From jukka.rahkonen at maanmittauslaitos.fi  Tue Jun  1 02:46:57 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 1 Jun 2021 02:46:57 -0700 (MST)
Subject: [gdal-dev] VRT layer definition question
In-Reply-To: <CADqLV_4WU0TVx9uuh3B8i3_msFXbVKGkY-iFYpReBx-zmbmb-g@mail.gmail.com>
References: <CADqLV_4WU0TVx9uuh3B8i3_msFXbVKGkY-iFYpReBx-zmbmb-g@mail.gmail.com>
Message-ID: <1622540817868-0.post@n6.nabble.com>

Hi,

Ogrinfo finds numbers from the .csv file with a little help:
ogrinfo csv.csv csv -al -oo autodetect_type=yes

Ogrinfo finds numbers from the .csv file automatically, probably because the
fields are mapped into real in the vrt file:
ogrinfo csv.vrt -al -so

But ogrmerge.py does have a problem:
ogrmerge f csv -o merged.csv csv.vrt
Warning 1: The 'lon' and/or 'lat' fields of the source layer are not
declared as numeric fields, so the spatial filter cannot be turned into an
attribute filter on them

Ogrmerge runs when I add a mapping file .csvt

csv.csvt
=====
Real,Real,String

It seems to me that your vrt file is OK but there is some issue in the
ogrmerge.py script that does not get the data type of the field correctly
from vrt. Write the csvt file and you should be fine.

-Jukka Rahkonen-



Al Piszcz wrote
> Jukka:
> Thank you, interesting, lat,lon interpreted as string by gdalinfo.
> 
> ==== Request 1
> ogrinfo file1.csv -al -so
> INFO: Open of `file1.csv'
>       using driver `CSV' successful.
> 
> Layer name: file1
> Geometry: None
> Feature Count: 1000
> Layer SRS WKT:
> (unknown)
> lon: String (0.0)
> lat: String (0.0)
> id: String (0.0)
> field_4: String (0.0)
> 
> === Request 2
> ::: file1.csv
> lon,lat,id,
> 0.084362378404311,0.08587464990542,"0"
> 0.090601035370249,0.005574551382458,"1"
> 0.074081946277276,0.020574321282505,"2"
> 0.034318505618178,0.034922734033886,"3"
> 0.008330436091964,0.013543226571866,"4"
> 
> 
> 
> Message: 2
> Date: Mon, 31 May 2021 13:41:55 -0700 (MST)
> From: jratike80 &lt;

> jukka.rahkonen@

> &gt;
> To: 

> gdal-dev at .osgeo

> Subject: Re: [gdal-dev]
> Message-ID: <

> 1622493715145-0.post at .nabble

>>
> Content-Type: text/plain; charset=us-ascii
> 
> Hi,
> 
> Please add couple of rows from your CSV file. Maybe the lon and lat fields
> are otherwise OK but GDAL does not recognize them to contain numbers but
> perhaps text. You can also check what sort of attributes ogrinfo reports
> with
> 
> ogrinfo file1.csv -al -so
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ap at solarrain.com  Tue Jun  1 12:41:07 2021
From: ap at solarrain.com (Al Piszcz)
Date: Tue, 1 Jun 2021 15:41:07 -0400
Subject: [gdal-dev] gdal-dev Digest, Vol 205, Issue 1
In-Reply-To: <mailman.3.1622574001.30669.gdal-dev@lists.osgeo.org>
References: <mailman.3.1622574001.30669.gdal-dev@lists.osgeo.org>
Message-ID: <CADqLV_5GM+yh2g+9OAe2z2T6U0ZFBTmdXvk--+P7jV35BjTATg@mail.gmail.com>

Thank you, I am creating a .csvt file now with the column type to work
around this issue.

On Tue, Jun 1, 2021 at 3:00 PM <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. VRT layer definition question (Al Piszcz)
>    2. Re: VRT layer definition question (jratike80)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 1 Jun 2021 02:01:10 -0400
> From: Al Piszcz <ap at solarrain.com>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] VRT layer definition question
> Message-ID:
>         <
> CADqLV_4WU0TVx9uuh3B8i3_msFXbVKGkY-iFYpReBx-zmbmb-g at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Jukka:
> Thank you, interesting, lat,lon interpreted as string by gdalinfo.
>
> ==== Request 1
> ogrinfo file1.csv -al -so
> INFO: Open of `file1.csv'
>       using driver `CSV' successful.
>
> Layer name: file1
> Geometry: None
> Feature Count: 1000
> Layer SRS WKT:
> (unknown)
> lon: String (0.0)
> lat: String (0.0)
> id: String (0.0)
> field_4: String (0.0)
>
> === Request 2
> ::: file1.csv
> lon,lat,id,
> 0.084362378404311,0.08587464990542,"0"
> 0.090601035370249,0.005574551382458,"1"
> 0.074081946277276,0.020574321282505,"2"
> 0.034318505618178,0.034922734033886,"3"
> 0.008330436091964,0.013543226571866,"4"
>
>
>
> Message: 2
> Date: Mon, 31 May 2021 13:41:55 -0700 (MST)
> From: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev]
> Message-ID: <1622493715145-0.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
> Hi,
>
> Please add couple of rows from your CSV file. Maybe the lon and lat fields
> are otherwise OK but GDAL does not recognize them to contain numbers but
> perhaps text. You can also check what sort of attributes ogrinfo reports
> with
>
> ogrinfo file1.csv -al -so
>
> -Jukka Rahkonen-
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210601/46e9d616/attachment-0001.html
> >
>
> ------------------------------
>
> Message: 2
> Date: Tue, 1 Jun 2021 02:46:57 -0700 (MST)
> From: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] VRT layer definition question
> Message-ID: <1622540817868-0.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
> Hi,
>
> Ogrinfo finds numbers from the .csv file with a little help:
> ogrinfo csv.csv csv -al -oo autodetect_type=yes
>
> Ogrinfo finds numbers from the .csv file automatically, probably because
> the
> fields are mapped into real in the vrt file:
> ogrinfo csv.vrt -al -so
>
> But ogrmerge.py does have a problem:
> ogrmerge f csv -o merged.csv csv.vrt
> Warning 1: The 'lon' and/or 'lat' fields of the source layer are not
> declared as numeric fields, so the spatial filter cannot be turned into an
> attribute filter on them
>
> Ogrmerge runs when I add a mapping file .csvt
>
> csv.csvt
> =====
> Real,Real,String
>
> It seems to me that your vrt file is OK but there is some issue in the
> ogrmerge.py script that does not get the data type of the field correctly
> from vrt. Write the csvt file and you should be fine.
>
> -Jukka Rahkonen-
>
>
>
> Al Piszcz wrote
> > Jukka:
> > Thank you, interesting, lat,lon interpreted as string by gdalinfo.
> >
> > ==== Request 1
> > ogrinfo file1.csv -al -so
> > INFO: Open of `file1.csv'
> >       using driver `CSV' successful.
> >
> > Layer name: file1
> > Geometry: None
> > Feature Count: 1000
> > Layer SRS WKT:
> > (unknown)
> > lon: String (0.0)
> > lat: String (0.0)
> > id: String (0.0)
> > field_4: String (0.0)
> >
> > === Request 2
> > ::: file1.csv
> > lon,lat,id,
> > 0.084362378404311,0.08587464990542,"0"
> > 0.090601035370249,0.005574551382458,"1"
> > 0.074081946277276,0.020574321282505,"2"
> > 0.034318505618178,0.034922734033886,"3"
> > 0.008330436091964,0.013543226571866,"4"
> >
> >
> >
> > Message: 2
> > Date: Mon, 31 May 2021 13:41:55 -0700 (MST)
> > From: jratike80 &lt;
>
> > jukka.rahkonen@
>
> > &gt;
> > To:
>
> > gdal-dev at .osgeo
>
> > Subject: Re: [gdal-dev]
> > Message-ID: <
>
> > 1622493715145-0.post at .nabble
>
> >>
> > Content-Type: text/plain; charset=us-ascii
> >
> > Hi,
> >
> > Please add couple of rows from your CSV file. Maybe the lon and lat
> fields
> > are otherwise OK but GDAL does not recognize them to contain numbers but
> > perhaps text. You can also check what sort of attributes ogrinfo reports
> > with
> >
> > ogrinfo file1.csv -al -so
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>
> End of gdal-dev Digest, Vol 205, Issue 1
> ****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210601/1a050d98/attachment.html>

From even.rouault at spatialys.com  Wed Jun  2 05:02:27 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Jun 2021 14:02:27 +0200
Subject: [gdal-dev] Call for discussion on RFC 83: guidelines for the
 use of GDAL project sponsorship
In-Reply-To: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
References: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
Message-ID: <b444582e-d82c-7813-5bc1-372989fa6ecc@spatialys.com>

Hi,

are there any remaining comments before we put that to vote ?

Even

Le 19/05/2021 ? 14:46, Even Rouault a ?crit?:
> Hi,
>
> in parallel to finalizing the last steps to get the relationship with 
> NumFOCUS fully operational, here's a new RFC for your consideration to 
> give guidelines on how we can use the sponsorship funds, who can 
> apply, etc. Input welcome.
>
> https://github.com/OSGeo/gdal/pull/3855
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Wed Jun  2 07:26:52 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 2 Jun 2021 16:26:52 +0200
Subject: [gdal-dev] Tons of errors in tests
Message-ID: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>

Hello

I am trying to build GDAL (this worked) and run the tests (tons of
failures). Because it is over a clean clone of master, I think there is
something wrong in my configuration. Maybe you can help me.

OS: Ubuntu 20.04
Python: 3.8.5
$ apt list --installed | grep gdal
gdal-bin/focal,now 3.0.4+dfsg-1build3 amd64 [installed]
gdal-data/focal,focal,now 3.0.4+dfsg-1build3 all [installed,automatic]
libgdal-dev/focal,now 3.0.4+dfsg-1build3 amd64 [installed]
libgdal26/focal,now 3.0.4+dfsg-1build3 amd64 [installed,automatic]
python3-gdal/focal,now 3.0.4+dfsg-1build3 amd64 [installed,automatic]

Following the instructions in
https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md

cd gdal
./configure
make -j8 -s
cd apps; make -s test_ogrsf; cd ..

. scripts/setdevenv.sh
gdalinfo --version
$ GDAL 3.4.0dev-6b8835c2b5, released 2021/06/02

cd ../autotest
pip install -r requirements.txt

python -m pytest
Test session starts (platform: linux, Python 3.8.5, pytest 4.6.9,
pytest-sugar 0.9.4)
rootdir: /home/jshaw/work/gdal/autotest, inifile: pytest.ini, testpaths:
ogr, gcore, gdrivers, osr, alg, gnm, utilities, pyscripts
plugins: sugar-0.9.4, env-0.6.2
collecting ...
???????????????????????????????????????????????????????????????????????????????????
ERROR collecting gcore/multidim.py
????????????????????????????????????????????????????????????????????????????????????
gcore/multidim.py:106: in <module>
    ???
E   AttributeError: module 'osgeo.gdal' has no attribute 'GRIORA_RMS'

???????????????????????????????????????????????????????????????????????????????????
ERROR collecting alg/fillnodata.py
????????????????????????????????????????????????????????????????????????????????????
/usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
    self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
/usr/lib/python3/dist-packages/_pytest/python.py:234: in
pytest_pycollect_makeitem
    res = list(collector._genfunctions(name, obj))
/usr/lib/python3/dist-packages/_pytest/python.py:410: in _genfunctions
    self.ihook.pytest_generate_tests(metafunc=metafunc)
/usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
    self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
/usr/lib/python3/dist-packages/_pytest/python.py:137: in
pytest_generate_tests
    metafunc.parametrize(*marker.args, **marker.kwargs)
/usr/lib/python3/dist-packages/_pytest/python.py:1015: in parametrize
    ids = self._resolve_arg_ids(argnames, ids, parameters,
item=self.definition)
/usr/lib/python3/dist-packages/_pytest/python.py:1069: in _resolve_arg_ids
    ids = idmaker(argnames, parameters, idfn, ids, self.config, item=item)
/usr/lib/python3/dist-packages/_pytest/python.py:1221: in idmaker
    ids = [
/usr/lib/python3/dist-packages/_pytest/python.py:1222: in <listcomp>
    _idvalset(valindex, parameterset, argnames, idfn, ids, config=config,
item=item)
/usr/lib/python3/dist-packages/_pytest/python.py:1210: in _idvalset
    if ids is None or (idx >= len(ids) or ids[idx] is None):
E   TypeError: 'dict_keys' object is not subscriptable

??????????????????????????????????????????????????????????????????????????????
ERROR collecting pyscripts/test_gdal_utils.py
??????????????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/test_gdal_utils.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/test_gdal_utils.py:37: in <module>
    from osgeo_utils.auxiliary.extent_util import Extent
E   ModuleNotFoundError: No module named 'osgeo_utils'

?????????????????????????????????????????????????????????????????????????????????
ERROR collecting pyscripts/test_pct.py
??????????????????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/test_pct.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/test_pct.py:37: in <module>
    from osgeo_utils import gdalattachpct, rgb2pct
E   ModuleNotFoundError: No module named 'osgeo_utils'

??????????????????????????????????????????????????????????????? ERROR
collecting pyscripts/gdal2tiles/test_add_alpha_band_to_string_vrt.py
????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_add_alpha_band_to_string_vrt.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_add_alpha_band_to_string_vrt.py:36: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

?????????????????????????????????????????????????????????????? ERROR
collecting pyscripts/gdal2tiles/test_add_gdal_warp_options_to_string.py
??????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_add_gdal_warp_options_to_string.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_add_gdal_warp_options_to_string.py:36: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

???????????????????????????????????????????????????????????????????????
ERROR collecting pyscripts/gdal2tiles/test_nb_data_bands.py
???????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_nb_data_bands.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_nb_data_bands.py:35: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

???????????????????????????????????????????????????????????????????????
ERROR collecting pyscripts/gdal2tiles/test_option_parser.py
???????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_option_parser.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_option_parser.py:37: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

????????????????????????????????????????????????????????????????????? ERROR
collecting pyscripts/gdal2tiles/test_reproject_dataset.py
?????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_reproject_dataset.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_reproject_dataset.py:36: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

??????????????????????????????????????????????????????????????????????
ERROR collecting pyscripts/gdal2tiles/test_setup_input_srs.py
??????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_setup_input_srs.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_setup_input_srs.py:34: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

???????????????????????????????????????????????????????????????????? ERROR
collecting pyscripts/gdal2tiles/test_setup_no_data_value.py
????????????????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_setup_no_data_value.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_setup_no_data_value.py:34: in <module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

?????????????????????????????????????????????????????????? ERROR collecting
pyscripts/gdal2tiles/test_update_alpha_value_for_non_alpha_inputs.py
??????????????????????????????????????????????????????????
ImportError while importing test module
'/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_update_alpha_value_for_non_alpha_inputs.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
pyscripts/gdal2tiles/test_update_alpha_value_for_non_alpha_inputs.py:34: in
<module>
    from osgeo_utils import gdal2tiles
E   ModuleNotFoundError: No module named 'osgeo_utils'

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Interrupted: 12 errors during collection
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Results (5.85s):


If I run a particular file, I get also a many errors (ommited here), and a
core dump:

python -m pytest gcore/tiff_read.py
....
 gcore/tiff_read.py ??s    97% ??????????
Segmentation fault (core dumped)

Is there anything basically wrong? Am I using the wrong gdal, not the one
just compiled?

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/a27ca4af/attachment-0001.html>

From andrew at aitchison.me.uk  Wed Jun  2 08:35:31 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 2 Jun 2021 16:35:31 +0100 (BST)
Subject: [gdal-dev] Tons of errors in tests
In-Reply-To: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>
References: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>
Message-ID: <66a7de45-16c2-8822-7f7a-d852fd27487@aitchison.me.uk>

On Wed, 2 Jun 2021, Javier Jimenez Shaw wrote:

> Hello
>
> I am trying to build GDAL (this worked) and run the tests (tons of
> failures). Because it is over a clean clone of master, I think there is
> something wrong in my configuration. Maybe you can help me.


> cd ../autotest
> pip install -r requirements.txt
>
> python -m pytest
> Test session starts (platform: linux, Python 3.8.5, pytest 4.6.9,
> pytest-sugar 0.9.4)

I have Ubuntu 21.04/hirsute:
(platform: linux, Python 3.9.5, pytest 6.2.3, pytest-sugar 0.9.4)

4.69 to 6.2.3 is quite a jump in pytest. Is it a python2 or a python3 pytest ?
GDAL is now python 3.

When I started running the autotests recently, I discovered that the
python3 pytest is
         /usr/bin/pytest-3
not
         /usr/bin/pytest

Assuming this is your problem too,
you could change autotest/GNUmakefile;
I just sym-linked pytest-3 to pytest

> OS: Ubuntu 20.04
> Python: 3.8.5
> $ apt list --installed | grep gdal
> gdal-bin/focal,now 3.0.4+dfsg-1build3 amd64 [installed]
> gdal-data/focal,focal,now 3.0.4+dfsg-1build3 all [installed,automatic]
> libgdal-dev/focal,now 3.0.4+dfsg-1build3 amd64 [installed]
> libgdal26/focal,now 3.0.4+dfsg-1build3 amd64 [installed,automatic]
> python3-gdal/focal,now 3.0.4+dfsg-1build3 amd64 [installed,automatic]
>
> Following the instructions in
> https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md
>
> cd gdal
> ./configure
> make -j8 -s
> cd apps; make -s test_ogrsf; cd ..
>
> . scripts/setdevenv.sh
> gdalinfo --version
> $ GDAL 3.4.0dev-6b8835c2b5, released 2021/06/02
>
> cd ../autotest
> pip install -r requirements.txt
>
> python -m pytest
> Test session starts (platform: linux, Python 3.8.5, pytest 4.6.9,
> pytest-sugar 0.9.4)

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Wed Jun  2 08:38:23 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Jun 2021 17:38:23 +0200
Subject: [gdal-dev] Tons of errors in tests
In-Reply-To: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>
References: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>
Message-ID: <05bbdaf0-4e53-1083-a891-c4b3dda8c44a@spatialys.com>

Javier,

CONTRIBUTING.md was missing the --with-python configure switch to build 
the python bindings. Now fixed

So re-run ./configure --with-python && make -j8 -s , and also source 
again ". scripts/setdevenv.sh" so that PYTHONPATH is set appropriately

You can check that everything is OK with:

python -c "from osgeo import gdal; print(gdal.__version__)"

Even


Le 02/06/2021 ? 16:26, Javier Jimenez Shaw a ?crit?:
> Hello
>
> I am trying to build GDAL (this worked) and run the tests (tons of 
> failures). Because it is over a clean clone of master, I think there 
> is something wrong in my configuration. Maybe you can help me.
>
> OS: Ubuntu 20.04
> Python: 3.8.5
> $ apt list --installed | grep gdal
> gdal-bin/focal,now 3.0.4+dfsg-1build3 amd64 [installed]
> gdal-data/focal,focal,now 3.0.4+dfsg-1build3 all [installed,automatic]
> libgdal-dev/focal,now 3.0.4+dfsg-1build3 amd64 [installed]
> libgdal26/focal,now 3.0.4+dfsg-1build3 amd64 [installed,automatic]
> python3-gdal/focal,now 3.0.4+dfsg-1build3 amd64 [installed,automatic]
>
> Following the instructions in 
> https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md 
> <https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md>
>
> cd gdal
> ./configure
> make -j8 -s
> cd apps; make -s test_ogrsf; cd ..
>
> . scripts/setdevenv.sh
> gdalinfo --version
> $ GDAL 3.4.0dev-6b8835c2b5, released 2021/06/02
>
> cd ../autotest
> pip install -r requirements.txt
>
> python -m pytest
> Test session starts (platform: linux, Python 3.8.5, pytest 4.6.9, 
> pytest-sugar 0.9.4)
> rootdir: /home/jshaw/work/gdal/autotest, inifile: pytest.ini, 
> testpaths: ogr, gcore, gdrivers, osr, alg, gnm, utilities, pyscripts
> plugins: sugar-0.9.4, env-0.6.2
> collecting ...
> ??????????????????????????????????????????????????????????????????????????????????? 
> ERROR collecting gcore/multidim.py 
> ????????????????????????????????????????????????????????????????????????????????????
> gcore/multidim.py:106: in <module>
> ? ? ???
> E ? AttributeError: module 'osgeo.gdal' has no attribute 'GRIORA_RMS'
>
> ??????????????????????????????????????????????????????????????????????????????????? 
> ERROR collecting alg/fillnodata.py 
> ????????????????????????????????????????????????????????????????????????????????????
> /usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
> ? ? return self._hookexec(self, self.get_hookimpls(), kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
> ? ? return self._inner_hookexec(hook, methods, kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
> ? ? self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
> /usr/lib/python3/dist-packages/_pytest/python.py:234: in 
> pytest_pycollect_makeitem
> ? ? res = list(collector._genfunctions(name, obj))
> /usr/lib/python3/dist-packages/_pytest/python.py:410: in _genfunctions
> ? ? self.ihook.pytest_generate_tests(metafunc=metafunc)
> /usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
> ? ? return self._hookexec(self, self.get_hookimpls(), kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
> ? ? return self._inner_hookexec(hook, methods, kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
> ? ? self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
> /usr/lib/python3/dist-packages/_pytest/python.py:137: in 
> pytest_generate_tests
> ? ? metafunc.parametrize(*marker.args, **marker.kwargs)
> /usr/lib/python3/dist-packages/_pytest/python.py:1015: in parametrize
> ? ? ids = self._resolve_arg_ids(argnames, ids, parameters, 
> item=self.definition)
> /usr/lib/python3/dist-packages/_pytest/python.py:1069: in _resolve_arg_ids
> ? ? ids = idmaker(argnames, parameters, idfn, ids, self.config, item=item)
> /usr/lib/python3/dist-packages/_pytest/python.py:1221: in idmaker
> ? ? ids = [
> /usr/lib/python3/dist-packages/_pytest/python.py:1222: in <listcomp>
> ? ? _idvalset(valindex, parameterset, argnames, idfn, ids, 
> config=config, item=item)
> /usr/lib/python3/dist-packages/_pytest/python.py:1210: in _idvalset
> ? ? if ids is None or (idx >= len(ids) or ids[idx] is None):
> E ? TypeError: 'dict_keys' object is not subscriptable
>
> ?????????????????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/test_gdal_utils.py 
> ??????????????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/test_gdal_utils.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/test_gdal_utils.py:37: in <module>
> ? ? from osgeo_utils.auxiliary.extent_util import Extent
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ????????????????????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/test_pct.py 
> ??????????????????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/test_pct.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/test_pct.py:37: in <module>
> ? ? from osgeo_utils import gdalattachpct, rgb2pct
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ??????????????????????????????????????????????????????????????? ERROR 
> collecting pyscripts/gdal2tiles/test_add_alpha_band_to_string_vrt.py 
> ????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_add_alpha_band_to_string_vrt.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_add_alpha_band_to_string_vrt.py:36: in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ?????????????????????????????????????????????????????????????? ERROR 
> collecting 
> pyscripts/gdal2tiles/test_add_gdal_warp_options_to_string.py 
> ??????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_add_gdal_warp_options_to_string.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_add_gdal_warp_options_to_string.py:36: in 
> <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ??????????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/gdal2tiles/test_nb_data_bands.py 
> ???????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_nb_data_bands.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_nb_data_bands.py:35: in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ??????????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/gdal2tiles/test_option_parser.py 
> ???????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_option_parser.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_option_parser.py:37: in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ????????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/gdal2tiles/test_reproject_dataset.py 
> ?????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_reproject_dataset.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_reproject_dataset.py:36: in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ?????????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/gdal2tiles/test_setup_input_srs.py 
> ??????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_setup_input_srs.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_setup_input_srs.py:34: in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ???????????????????????????????????????????????????????????????????? 
> ERROR collecting pyscripts/gdal2tiles/test_setup_no_data_value.py 
> ????????????????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_setup_no_data_value.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_setup_no_data_value.py:34: in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> ?????????????????????????????????????????????????????????? ERROR 
> collecting 
> pyscripts/gdal2tiles/test_update_alpha_value_for_non_alpha_inputs.py 
> ??????????????????????????????????????????????????????????
> ImportError while importing test module 
> '/home/jshaw/work/gdal/autotest/pyscripts/gdal2tiles/test_update_alpha_value_for_non_alpha_inputs.py'.
> Hint: make sure your test modules/packages have valid Python names.
> Traceback:
> pyscripts/gdal2tiles/test_update_alpha_value_for_non_alpha_inputs.py:34: 
> in <module>
> ? ? from osgeo_utils import gdal2tiles
> E ? ModuleNotFoundError: No module named 'osgeo_utils'
>
> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
> Interrupted: 12 errors during collection 
> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
>
> Results (5.85s):
>
>
> If I run a particular file, I get also a many errors (ommited here), 
> and a core dump:
>
> python -m pytest gcore/tiff_read.py
> ....
> ?gcore/tiff_read.py ??s ?? 97% ??????????
> Segmentation fault (core dumped)
>
> Is there anything basically wrong? Am I using the wrong gdal, not the 
> one just compiled?
>
> Thanks
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/c4408944/attachment-0001.html>

From j1 at jimenezshaw.com  Wed Jun  2 09:24:41 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 2 Jun 2021 18:24:41 +0200
Subject: [gdal-dev] Tons of errors in tests
In-Reply-To: <05bbdaf0-4e53-1083-a891-c4b3dda8c44a@spatialys.com>
References: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>
 <05bbdaf0-4e53-1083-a891-c4b3dda8c44a@spatialys.com>
Message-ID: <CADRrdKt-uhBxY8THYcSm5w=7zqkFg97JcXWCMGAXsvRjATXrzA@mail.gmail.com>

Thanks Even and Andrew for your answers.

Andrew, somehow I had a workaround for the pytest-3 (that I absolutely
forgot), but thanks for the info.

Even, with the "--with-python" everything goes much better...
Now I can run tiff tests without any failure!
pytest gcore/tiff_*

However, if I run the full test suite, it fails collecting alg/fillnodata.py
(I work it around with "pytest --continue-on-collection-errors")

$ pytest
Test session starts (platform: linux, Python 3.8.5, pytest 4.6.9,
pytest-sugar 0.9.4)
rootdir: /home/jshaw/work/gdal/autotest, inifile: pytest.ini, testpaths:
ogr, gcore, gdrivers, osr, alg, gnm, utilities, pyscripts
plugins: sugar-0.9.4, env-0.6.2
collecting ...
???????????????????????????????????????????????????????????????????????????????????
ERROR collecting alg/fillnodata.py
????????????????????????????????????????????????????????????????????????????????????
/usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
    self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
/usr/lib/python3/dist-packages/_pytest/python.py:234: in
pytest_pycollect_makeitem
    res = list(collector._genfunctions(name, obj))
/usr/lib/python3/dist-packages/_pytest/python.py:410: in _genfunctions
    self.ihook.pytest_generate_tests(metafunc=metafunc)
/usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
/usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
    self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
/usr/lib/python3/dist-packages/_pytest/python.py:137: in
pytest_generate_tests
    metafunc.parametrize(*marker.args, **marker.kwargs)
/usr/lib/python3/dist-packages/_pytest/python.py:1015: in parametrize
    ids = self._resolve_arg_ids(argnames, ids, parameters,
item=self.definition)
/usr/lib/python3/dist-packages/_pytest/python.py:1069: in _resolve_arg_ids
    ids = idmaker(argnames, parameters, idfn, ids, self.config, item=item)
/usr/lib/python3/dist-packages/_pytest/python.py:1221: in idmaker
    ids = [
/usr/lib/python3/dist-packages/_pytest/python.py:1222: in <listcomp>
    _idvalset(valindex, parameterset, argnames, idfn, ids, config=config,
item=item)
/usr/lib/python3/dist-packages/_pytest/python.py:1210: in _idvalset
    if ids is None or (idx >= len(ids) or ids[idx] is None):
E   TypeError: 'dict_keys' object is not subscriptable

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Interrupted: 1 errors during collection
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Results (5.42s):

Cheers
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Wed, 2 Jun 2021 at 17:38, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
> CONTRIBUTING.md was missing the --with-python configure switch to build
> the python bindings. Now fixed
>
> So re-run ./configure --with-python && make -j8 -s , and also source again
> ". scripts/setdevenv.sh" so that PYTHONPATH is set appropriately
>
> You can check that everything is OK with:
>
> python -c "from osgeo import gdal; print(gdal.__version__)"
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/73f3b8bd/attachment.html>

From even.rouault at spatialys.com  Wed Jun  2 09:32:02 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Jun 2021 18:32:02 +0200
Subject: [gdal-dev] Tons of errors in tests
In-Reply-To: <CADRrdKt-uhBxY8THYcSm5w=7zqkFg97JcXWCMGAXsvRjATXrzA@mail.gmail.com>
References: <CADRrdKuHaXwBB+ZP4cMhS491Qf5hEyCVSVkjq69gKcsUuGtN3g@mail.gmail.com>
 <05bbdaf0-4e53-1083-a891-c4b3dda8c44a@spatialys.com>
 <CADRrdKt-uhBxY8THYcSm5w=7zqkFg97JcXWCMGAXsvRjATXrzA@mail.gmail.com>
Message-ID: <f82abc79-258a-ea95-c3ae-ab52a4585112@spatialys.com>


> However, if I run the full test suite, it fails collecting 
> alg/fillnodata.py
> (I work it around with "pytest --continue-on-collection-errors")

The issue is that pytest 4.6.9 is too old. I've just bumped the min 
version to 6.0.0


>
> $ pytest
> Test session starts (platform: linux, Python 3.8.5, pytest 4.6.9, 
> pytest-sugar 0.9.4)
> rootdir: /home/jshaw/work/gdal/autotest, inifile: pytest.ini, 
> testpaths: ogr, gcore, gdrivers, osr, alg, gnm, utilities, pyscripts
> plugins: sugar-0.9.4, env-0.6.2
> collecting ...
> ??????????????????????????????????????????????????????????????????????????????????? 
> ERROR collecting alg/fillnodata.py 
> ????????????????????????????????????????????????????????????????????????????????????
> /usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
> ? ? return self._hookexec(self, self.get_hookimpls(), kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
> ? ? return self._inner_hookexec(hook, methods, kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
> ? ? self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
> /usr/lib/python3/dist-packages/_pytest/python.py:234: in 
> pytest_pycollect_makeitem
> ? ? res = list(collector._genfunctions(name, obj))
> /usr/lib/python3/dist-packages/_pytest/python.py:410: in _genfunctions
> ? ? self.ihook.pytest_generate_tests(metafunc=metafunc)
> /usr/lib/python3/dist-packages/pluggy/hooks.py:286: in __call__
> ? ? return self._hookexec(self, self.get_hookimpls(), kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:92: in _hookexec
> ? ? return self._inner_hookexec(hook, methods, kwargs)
> /usr/lib/python3/dist-packages/pluggy/manager.py:83: in <lambda>
> ? ? self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(
> /usr/lib/python3/dist-packages/_pytest/python.py:137: in 
> pytest_generate_tests
> ? ? metafunc.parametrize(*marker.args, **marker.kwargs)
> /usr/lib/python3/dist-packages/_pytest/python.py:1015: in parametrize
> ? ? ids = self._resolve_arg_ids(argnames, ids, parameters, 
> item=self.definition)
> /usr/lib/python3/dist-packages/_pytest/python.py:1069: in _resolve_arg_ids
> ? ? ids = idmaker(argnames, parameters, idfn, ids, self.config, item=item)
> /usr/lib/python3/dist-packages/_pytest/python.py:1221: in idmaker
> ? ? ids = [
> /usr/lib/python3/dist-packages/_pytest/python.py:1222: in <listcomp>
> ? ? _idvalset(valindex, parameterset, argnames, idfn, ids, 
> config=config, item=item)
> /usr/lib/python3/dist-packages/_pytest/python.py:1210: in _idvalset
> ? ? if ids is None or (idx >= len(ids) or ids[idx] is None):
> E ? TypeError: 'dict_keys' object is not subscriptable
>
> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
> Interrupted: 1 errors during collection 
> !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
>
> Results (5.42s):
>
> Cheers
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Wed, 2 Jun 2021 at 17:38, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Javier,
>
>     CONTRIBUTING.md was missing the --with-python configure switch to
>     build the python bindings. Now fixed
>
>     So re-run ./configure --with-python && make -j8 -s , and also
>     source again ". scripts/setdevenv.sh" so that PYTHONPATH is set
>     appropriately
>
>     You can check that everything is OK with:
>
>     python -c "from osgeo import gdal; print(gdal.__version__)"
>
>     Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/e7162787/attachment.html>

From sean at mapbox.com  Wed Jun  2 12:36:34 2021
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 2 Jun 2021 13:36:34 -0600
Subject: [gdal-dev] Call for discussion on RFC 83: guidelines for the
 use of GDAL project sponsorship
In-Reply-To: <b444582e-d82c-7813-5bc1-372989fa6ecc@spatialys.com>
References: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
 <b444582e-d82c-7813-5bc1-372989fa6ecc@spatialys.com>
Message-ID: <CADPhZXxAY_wTQfdi_tfcsUDb4CqrWODhX4qdg7qcrzz9MbnN2w@mail.gmail.com>

Hi Even,

I've got two questions. I don't think they need answers before we vote, but
I'm curious if asking them leads to any useful discussion.

Will we strictly require project proposals to be submitted and approved
before work starts? Will we allow works in progress to apply for funding?

Should we address, in the text of the RFC, the possibility of conflicting
proposals? Should we limit the number of proposals per person/organization
to minimize conflicts?

> Applicants will provide the amount to be funded. Proposals may be put
together by one or several individuals (in the later case, to be determined
if we can let the team have a "invoicing point of contact" and let them
arrange how to dispatch it amongst members, or if each team member should
ask for its part of funding). An applicant may submit proposals for several
subjects.

On Wed, Jun 2, 2021 at 6:02 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> are there any remaining comments before we put that to vote ?
>
> Even
>
> Le 19/05/2021 ? 14:46, Even Rouault a ?crit :
> > Hi,
> >
> > in parallel to finalizing the last steps to get the relationship with
> > NumFOCUS fully operational, here's a new RFC for your consideration to
> > give guidelines on how we can use the sponsorship funds, who can
> > apply, etc. Input welcome.
> >
> > https://github.com/OSGeo/gdal/pull/3855
> >
> > Even
> >
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/6911c11f/attachment.html>

From evert.etienne at sitemark.com  Wed Jun  2 12:44:39 2021
From: evert.etienne at sitemark.com (Evert Etienne (SITEMARK))
Date: Wed, 2 Jun 2021 19:44:39 +0000
Subject: [gdal-dev] Alpha band data type
Message-ID: <F106F9FC-FC4E-42AA-A28B-83B4CF5BD2B5@sitemark.com>

Dear all,

I was wondering if there is a best practice or guide for the data type of alpha channels in geotiffs.
I have many files where the data type is constant over all bands (UInt16 for example). 
I would expect the alpha band to be a byte band or even bit.

Is it possible to have different types in a single file? If so, can I change the type of the alpha band alone to see if it has impact on the file size for example?

Many thanks

Evert

From even.rouault at spatialys.com  Wed Jun  2 12:52:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Jun 2021 21:52:01 +0200
Subject: [gdal-dev] Call for discussion on RFC 83: guidelines for the
 use of GDAL project sponsorship
In-Reply-To: <CADPhZXxAY_wTQfdi_tfcsUDb4CqrWODhX4qdg7qcrzz9MbnN2w@mail.gmail.com>
References: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
 <b444582e-d82c-7813-5bc1-372989fa6ecc@spatialys.com>
 <CADPhZXxAY_wTQfdi_tfcsUDb4CqrWODhX4qdg7qcrzz9MbnN2w@mail.gmail.com>
Message-ID: <5c3cf9dc-14e0-04b1-8027-d783b94c84ab@spatialys.com>

Hi Sean,
> I've got two questions. I don't think they need answers before we 
> vote,?but I'm curious if asking them leads to any useful discussion.
>
> Will we strictly require project proposals to be submitted and 
> approved before work starts? Will we allow works in progress to apply 
> for funding?
I don't see why we would refuse an in-progress work to be funded, and I 
don't think the text of the RFC exclude this situation. The risk is not 
for the project, but for applicants who could see their work not 
selected for funding despite their expectation.
>
> Should we address, in the text of the RFC, the possibility of 
> conflicting proposals? Should we limit the number of proposals per 
> person/organization to minimize conflicts?

If we find conflicting proposals, I guess we'll ask to applicants if 
they want to collaborate together, if that makes sense. And if they 
don't/can't, we'll select the one we will find the best according to our 
criteria. As far as limiting the number of proposals, I don't see any 
need for now. Thinking to how QGIS grant proposals work, they are no 
such rules regarding that, and things seem to work well. The main 
limitation comes from the budget. If someone submit proposals that would 
 > total amount of the grant program, they know some will not be 
selected . At this stage, I don't think we don't have enough experience 
of how that work for GDAL to set extra rules.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From sean at mapbox.com  Wed Jun  2 12:56:07 2021
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 2 Jun 2021 13:56:07 -0600
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
 <CADPhZXwosVHKyeGHkQ_R9y6fUVuJh0aSiKOYnSwMgi61bYKLaw@mail.gmail.com>
 <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com>
Message-ID: <CADPhZXwD7YvaZSbNQhHFkhnW0Jaf7_2PrgUxYGT8rmQjA0dp1A@mail.gmail.com>

Even,

Sounds good. Until there is consensus on what coordinate epoch means for
OGC:CRS84 GeoJSON, the official and most widely used kind, I think it would
be better if GDAL didn't extend the format. For now, applications that need
more precision can and should use another format.

On Thu, May 27, 2021 at 12:19 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Regarding KML and GeoJSON and OGC:CRS84 (or EPSG:4326 since they are the
> same thing, except axis order), that's a good and hard question. Actually
> that extends to *any* CRS built on top of them, like all the
> EPSG:32[6|7][01-60] UTM CRS, and that's probably for those later than
> things are the most problematic since there's no EPSG code for a UTM WGS 84
> (G1762) CRS. I guess people would potentially want to attach a coordinate
> epoch to them, and have a (non-encoded-in-the-format) convention that they
> actually mean WGS 84 (G1762) (or possibly an earlier realization. The datum
> ensemble reality of WGS 84 is really due to Transit which differs
> significantly from later realizations, which are pretty consistent between
> them within a few centimers) . So I wouldn't forbid such uses (I actually
> got private feedback that some people would even want to store coordinate
> epoch for CRS that aren't considered by EPSG as dynamic CRS, but which, for
> advanced uses, can still have things like deformation models, like
> NAD83(2011) that is used for most people as a static CRS, but is more a
> snapshot of a dynamic CRS with a conventional reference epoch of 2010.0).
>
> That said, I'll probably drop the commit for KML as it is clearly a hack,
> but I think support for GeoJSON, which is cleaner, could still be useful at
> some point as it is widely used as an exchange format. But I'll defer for
> GeoJSON until we see if the *OGC Features* and *Geometries JSON* SWG comes
> with something regarding this.
>
> Even
> Le 27/05/2021 ? 19:24, Sean Gillies via gdal-dev a ?crit :
>
> Hi all,
>
> I've got a suggestion about limiting the number of formats.
>
> GeoJSON and KML don't need support for a coordinate epoch. Both of these
> are pretty cleared intended for low accuracy data (1-2 meters). KML and
> GeoJSON don't support any CRS other than OGC:CRS84, which uses (it has been
> pointed out many times) a datum ensemble that RFC 81 does not intend to
> address. Right, Even? So let's leave these formats the way they are.
>
> GML, GeoPackage, PostGIS, and the actively used raster formats like
> GeoTIFF seem like the important ones to me.
>
> On Thu, May 27, 2021 at 7:40 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> - merging the underlying API without any format support is I believe of
>> little interest. So I'll wait for at least one format (likely
>> GeoPackage) to have merged in the master of their specification an
>> official way of storing the coordinate epoch. I've also prepared an
>> enhancement of the GeoTIFF spec regarding this
>> (https://github.com/opengeospatial/geotiff/pull/99) that will likely be
>> discussed at the next OGC GeoTIFF SWG meeting.
>>
>> - I've just chatted with Howard and a good compromise could be that for
>> formats that will have an official way of storing the coordinate epoch,
>> we store it by default (when it is set), and for formats that we
>> unilaterally extend (GML, KML, GeoJSON, etc.), we require an explicit
>> GDAL_ENABLE_COORD_EPOCH_STORAGE=YES configuration option to be set
>> (default would be NO). We might revisit in the future the default value.
>>
>> - On the vector side of things, things will probably get more
>> complicated for some drivers, as it is likely that Spatialite (see
>> https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE) or PostGIS
>> might have per-geometry coordinate epoch, not at the layer level. But I
>> don't think that would invalidate having support for it at the layer
>> level (those database already support a per-geometry CRS, but GDAL
>> support for that is probably lacking a bit in those drivers), as a
>> OGRGeometry can potentially be associated with its own
>> OGRSpatialReference object.
>>
>> Even
>>
>> Le 27/05/2021 ? 15:01, Howard Butler a ?crit :
>> >
>> >> On May 26, 2021, at 8:33 PM, Nyall Dawson <nyall.dawson at gmail.com>
>> wrote:
>> >>
>> >> Can I make the suggestion that a subset of
>> >> https://github.com/OSGeo/gdal/pull/3827 could be created and be merged
>> >> on its own? Specifically the commits which add the underlying API for
>> >> GDAL to handle epochs should be controversy-free and suitable for
>> >> merge outside of the larger/trickier question of patching in support
>> >> to the data formats.
>> > :thumbsup:
>> >
>> > As for the patching of data formats with GDAL application-specific
>> metadata, as I said, I don't have a better option, but I'm satisfied if the
>> process of writing epochs into metadata is opt-in (some kind of global CRS
>> option? we already have magic switches like that).
>> >
>> > Howard
>> >
>> >
>>
>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/749c02db/attachment-0001.html>

From j1 at jimenezshaw.com  Wed Jun  2 13:08:26 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 2 Jun 2021 22:08:26 +0200
Subject: [gdal-dev] Alpha band data type
In-Reply-To: <F106F9FC-FC4E-42AA-A28B-83B4CF5BD2B5@sitemark.com>
References: <F106F9FC-FC4E-42AA-A28B-83B4CF5BD2B5@sitemark.com>
Message-ID: <CADRrdKsRGezL3MnjyYf+CsXyQhL5vaTRREWh-fvhEJ58zB2Xkw@mail.gmail.com>

Hi Evert,

As far as I know, TIFF data type is "constant" along the bands. You cannot
have a uint16 band and a byte band in the same page.
If you are worried about space, you can use the "nodata value", assigning a
single value for that purpose (assuming that you do not want intermediate
values, just on and off). However I do not know if this nodata is only for
GDAL -and widely used-, or in the (Geo)TIFF standard.

Cheers,
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Wed, 2 Jun 2021 at 21:44, Evert Etienne (SITEMARK) <
evert.etienne at sitemark.com> wrote:

> Dear all,
>
> I was wondering if there is a best practice or guide for the data type of
> alpha channels in geotiffs.
> I have many files where the data type is constant over all bands (UInt16
> for example).
> I would expect the alpha band to be a byte band or even bit.
>
> Is it possible to have different types in a single file? If so, can I
> change the type of the alpha band alone to see if it has impact on the file
> size for example?
>
> Many thanks
>
> Evert
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/066ec5cf/attachment.html>

From even.rouault at spatialys.com  Wed Jun  2 13:20:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Jun 2021 22:20:11 +0200
Subject: [gdal-dev] Alpha band data type
In-Reply-To: <CADRrdKsRGezL3MnjyYf+CsXyQhL5vaTRREWh-fvhEJ58zB2Xkw@mail.gmail.com>
References: <F106F9FC-FC4E-42AA-A28B-83B4CF5BD2B5@sitemark.com>
 <CADRrdKsRGezL3MnjyYf+CsXyQhL5vaTRREWh-fvhEJ58zB2Xkw@mail.gmail.com>
Message-ID: <33662f8c-e46c-27de-7a38-4a601aa2df5f@spatialys.com>


Le 02/06/2021 ? 22:08, Javier Jimenez Shaw a ?crit?:
> Hi Evert,
>
> As far as I know, TIFF data type is "constant" along the bands. You 
> cannot have a uint16 band and a byte band in the same page.
Yes, in theory this would be possible since the SampleFormat tag has as 
many values as bands 
(https://www.awaresystems.be/imaging/tiff/tifftags/sampleformat.html), 
but in practice libtiff only handles its value to be same for all bands 
(and similarly for BitsPerSample)
> If you are worried about space, you can use the "nodata value", 
> assigning a single value for that purpose (assuming that you do not 
> want intermediate values, just on and off). However I do not know if 
> this nodata is only for GDAL -and widely used-, or in the (Geo)TIFF 
> standard.
GDAL-only concept. See 
https://www.awaresystems.be/imaging/tiff/tifftags/gdal_nodata.html
>
> Cheers,
> Javier
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Wed, 2 Jun 2021 at 21:44, Evert Etienne (SITEMARK) 
> <evert.etienne at sitemark.com <mailto:evert.etienne at sitemark.com>> wrote:
>
>     Dear all,
>
>     I was wondering if there is a best practice or guide for the data
>     type of alpha channels in geotiffs.
>     I have many files where the data type is constant over all bands
>     (UInt16 for example).
>     I would expect the alpha band to be a byte band or even bit.
>
>     Is it possible to have different types in a single file? If so,
>     can I change the type of the alpha band alone to see if it has
>     impact on the file size for example?
>
>     Many thanks
>
>     Evert
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210602/a70377dc/attachment.html>

From mfstanton at geospan.com  Thu Jun  3 12:07:07 2021
From: mfstanton at geospan.com (Mike Stanton)
Date: Thu, 3 Jun 2021 19:07:07 +0000
Subject: [gdal-dev] GDAL Reproject Run as a Batch under QGIS
Message-ID: <e058a5ed39814a679a8842b6a5ecb130@geospan.com>

''
It is not working. I cannot put any reasonable information into the "Reproject" field of the batch job menu that makes it acceptable. What I would expect is to point at a folio containing Tiff Files for the input and a folio to receive the converted Tiff Files for receiving output that might be named the same as the input file. What it appears to expect is individual TIFF names. Does anyone have suggestions on how to correct this?

Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210603/0f615aa9/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jun  3 13:51:32 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 3 Jun 2021 13:51:32 -0700 (MST)
Subject: [gdal-dev] GDAL Reproject Run as a Batch under QGIS
In-Reply-To: <e058a5ed39814a679a8842b6a5ecb130@geospan.com>
References: <e058a5ed39814a679a8842b6a5ecb130@geospan.com>
Message-ID: <1622753492427-0.post@n6.nabble.com>

Hi,

This seems to be a wrong mailing list. Use qgis-users
https://lists.osgeo.org/mailman/listinfo/qgis-user instead or
gis.stackexcange site. Before you write a new mail or question please try to
improve your question a bit. What is not working? Do you know if
reprojecting a whole directory of files is supported or if you are rather
requesting a new feature?


-Jukka Rahkonen-



Mike Stanton wrote
> ''
> It is not working. I cannot put any reasonable information into the
> "Reproject" field of the batch job menu that makes it acceptable. What I
> would expect is to point at a folio containing Tiff Files for the input
> and a folio to receive the converted Tiff Files for receiving output that
> might be named the same as the input file. What it appears to expect is
> individual TIFF names. Does anyone have suggestions on how to correct
> this?
> 
> Mike
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From thomas.bonfort at gmail.com  Fri Jun  4 03:07:18 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Fri, 4 Jun 2021 12:07:18 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
Message-ID: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>

Hello gdal,

We're releasing two projects on github under an Apache-2.0 licence
which may be of interest to the GDAL community.

The first one, https://github.com/airbusgeo/cogger is a lightweight
geotiff to COG converter that reshuffles the bytes of a tiled geotiff
to make it cloud compatible. Whereas it does not replace the standard
gdal tools for initially creating a geotiff, it is much faster than
the last "-co COPY_SRC_OVERVIEWS=YES" classical gdal_translate method
for outputting a cog, and also allows more flexibility when varying
compression methods or tile sizes need to applied on overviews. Cogger
can be used as a standalone command line tool, or as a go library
function for interacting with remote storage without the need for
local files.

The second one, https://github.com/airbusgeo/godal is a golang wrapper
for GDAL's raster api. While there is an already established golang
wrapper for gdal that exists (https://github.com/lukeroth/gdal), godal
differs by offering:
- robust error handling and reporting
- a stable compatible api promise (to the extent of what is possible
to achieve given gdal's own api)
- a vsi abstraction that hands off i/o to native golang code
- a more user-friendly API that is not an exact mirror of the gdal
api, making lesser used functionality optional. (For example, instead
of the GDALOpen, GDALOpenEx and GDALOpenShared methods, godal exposes
a single Open() method with optional arguments validated at compile
time to pass in open options, shared mode, sibling files, etc...)
Although the raster handling side of godal is mostly feature complete
with gdal, the vector and spatial-referencing part is not.

Outside contributions to both these projects are welcome through github.

Best regards,
Thomas

From even.rouault at spatialys.com  Fri Jun  4 05:28:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jun 2021 14:28:42 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
Message-ID: <0e5ead3b-712a-3673-15b4-701f3574bf27@spatialys.com>

Hi Thomas,

cogger is really cool, and certainly a useful complement to the GDAL COG 
driver (we could probably do something similar in it directly, if the 
input file is a TIFF, but that doesn't fit in a very natural way in the 
GDAL machinery). Feel free to submit a PR to the COG driver doc pointing 
to cogger.

Same against https://gdal.org/api/index.html#gdal-ogr-in-other-languages 
regarding your golang wrapper.

Even

Le 04/06/2021 ? 12:07, thomas bonfort a ?crit?:
> Hello gdal,
>
> We're releasing two projects on github under an Apache-2.0 licence
> which may be of interest to the GDAL community.
>
> The first one, https://github.com/airbusgeo/cogger is a lightweight
> geotiff to COG converter that reshuffles the bytes of a tiled geotiff
> to make it cloud compatible. Whereas it does not replace the standard
> gdal tools for initially creating a geotiff, it is much faster than
> the last "-co COPY_SRC_OVERVIEWS=YES" classical gdal_translate method
> for outputting a cog, and also allows more flexibility when varying
> compression methods or tile sizes need to applied on overviews. Cogger
> can be used as a standalone command line tool, or as a go library
> function for interacting with remote storage without the need for
> local files.
>
> The second one, https://github.com/airbusgeo/godal is a golang wrapper
> for GDAL's raster api. While there is an already established golang
> wrapper for gdal that exists (https://github.com/lukeroth/gdal), godal
> differs by offering:
> - robust error handling and reporting
> - a stable compatible api promise (to the extent of what is possible
> to achieve given gdal's own api)
> - a vsi abstraction that hands off i/o to native golang code
> - a more user-friendly API that is not an exact mirror of the gdal
> api, making lesser used functionality optional. (For example, instead
> of the GDALOpen, GDALOpenEx and GDALOpenShared methods, godal exposes
> a single Open() method with optional arguments validated at compile
> time to pass in open options, shared mode, sibling files, etc...)
> Although the raster handling side of godal is mostly feature complete
> with gdal, the vector and spatial-referencing part is not.
>
> Outside contributions to both these projects are welcome through github.
>
> Best regards,
> Thomas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Fri Jun  4 09:14:45 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Fri, 4 Jun 2021 16:14:45 +0000
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
Message-ID: <c91c77dac8084f5783bea2cc969ae339@yukon.ca>

Is cogger specifically for the scenario where your converting a large imagery library that already exists, but isn't cloud optimized? i.e. Does it offer any advantages over the one step `gdal_translate -of cog ...` when starting fresh?

Cheers,

Matt
Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

From even.rouault at spatialys.com  Fri Jun  4 09:24:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jun 2021 18:24:25 +0200
Subject: [gdal-dev] Renaming of GDAL Advisory Board
Message-ID: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>

Hi,

We just had a meeting with NumFOCUS staff, and they suggested we should 
rename the GDAL Advisory Board to something else. The issue is with the 
Board term which is a legal term and may implicate that it is a deciding 
body, which it is not. They suggested Council, Committee, as potential 
alternatives. As committee is already used for the PSC, I think "GDAL 
Advisory Council" could be a good fit.

If there's no opposition to this, I'll change all references to it on 
the GDAL website (RFC 80, sponsorship prospectus), and ask for the 
related mailing list to be renamed/recreated.

Other news: the Fiscal Sponsorship Agreement document, which will make 
us officialy a NumFOCUS sponsored project, is now in the signing loop.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From thomas.bonfort at gmail.com  Fri Jun  4 09:28:13 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Fri, 4 Jun 2021 18:28:13 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
Message-ID: <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>

I haven't extensively used -of COG (the cogger code actually predates the
cog driver) but iirc there are at least some cases where it uses an
intermediate file, which would imply that cogger does offer some speedups.
I'll let Even confirm...
Regards,
Thomas

Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca> a ?crit :

> Is cogger specifically for the scenario where your converting a large
> imagery library that already exists, but isn't cloud optimized? i.e. Does
> it offer any advantages over the one step `gdal_translate -of cog ...` when
> starting fresh?
>
> Cheers,
>
> Matt
> Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
> Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210604/490a3740/attachment.html>

From even.rouault at spatialys.com  Fri Jun  4 09:32:43 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jun 2021 18:32:43 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
 <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
Message-ID: <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>

I haven't benchmarked cogger but I'd expect it to be much faster than 
gdal_translate -of COG (if your input is GeoTIFF and always properly 
tiled and compressed of course!). gdal_translate -of COG uses generic 
GDAL API to acquire input data, which implies decompression / 
recompression. And in particular, if using input GeoTIFF with lossy 
compressed methods such as JPEG or WebP, cogger will avoid adding any 
new loss.

Le 04/06/2021 ? 18:28, thomas bonfort a ?crit?:
> I haven't extensively used -of COG (the cogger code actually predates 
> the cog driver) but iirc there are at least some cases where it uses 
> an intermediate file, which would imply that cogger does offer some 
> speedups. I'll let Even confirm...
> Regards,
> Thomas
>
> Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca 
> <mailto:Matt.Wilkie at yukon.ca>> a ?crit?:
>
>     Is cogger specifically for the scenario where your converting a
>     large imagery library that already exists, but isn't cloud
>     optimized? i.e. Does it offer any advantages over the one step
>     `gdal_translate -of cog ...` when starting fresh?
>
>     Cheers,
>
>     Matt
>     Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
>     Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210604/c953b1fb/attachment-0001.html>

From dmorissette at mapgears.com  Fri Jun  4 09:26:47 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 4 Jun 2021 12:26:47 -0400
Subject: [gdal-dev] Renaming of GDAL Advisory Board
In-Reply-To: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>
References: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>
Message-ID: <bf83501a-0485-addd-f50a-a01566a51bc4@mapgears.com>

+1

Daniel


On 2021-06-04 12:24, Even Rouault wrote:
> Hi,
> 
> We just had a meeting with NumFOCUS staff, and they suggested we should 
> rename the GDAL Advisory Board to something else. The issue is with the 
> Board term which is a legal term and may implicate that it is a deciding 
> body, which it is not. They suggested Council, Committee, as potential 
> alternatives. As committee is already used for the PSC, I think "GDAL 
> Advisory Council" could be a good fit.
> 
> If there's no opposition to this, I'll change all references to it on 
> the GDAL website (RFC 80, sponsorship prospectus), and ask for the 
> related mailing list to be renamed/recreated.
> 
> Other news: the Fiscal Sponsorship Agreement document, which will make 
> us officialy a NumFOCUS sponsored project, is now in the signing loop.
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From warmerdam at pobox.com  Fri Jun  4 09:45:41 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 4 Jun 2021 12:45:41 -0400
Subject: [gdal-dev] Renaming of GDAL Advisory Board
In-Reply-To: <bf83501a-0485-addd-f50a-a01566a51bc4@mapgears.com>
References: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>
 <bf83501a-0485-addd-f50a-a01566a51bc4@mapgears.com>
Message-ID: <CA+YzLBdb5ZSbh+sw_y0v=ZN_SXiJOUm=yD_Dm90iLAjrb++fcQ@mail.gmail.com>

+1 Frank

On Fri, Jun 4, 2021 at 12:36 PM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1
>
> Daniel
>
>
> On 2021-06-04 12:24, Even Rouault wrote:
> > Hi,
> >
> > We just had a meeting with NumFOCUS staff, and they suggested we should
> > rename the GDAL Advisory Board to something else. The issue is with the
> > Board term which is a legal term and may implicate that it is a deciding
> > body, which it is not. They suggested Council, Committee, as potential
> > alternatives. As committee is already used for the PSC, I think "GDAL
> > Advisory Council" could be a good fit.
> >
> > If there's no opposition to this, I'll change all references to it on
> > the GDAL website (RFC 80, sponsorship prospectus), and ask for the
> > related mailing list to be renamed/recreated.
> >
> > Other news: the Fiscal Sponsorship Agreement document, which will make
> > us officialy a NumFOCUS sponsored project, is now in the signing loop.
> >
> > Even
> >
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210604/66a2ac16/attachment.html>

From schwehr at gmail.com  Fri Jun  4 10:01:32 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 4 Jun 2021 10:01:32 -0700
Subject: [gdal-dev] Renaming of GDAL Advisory Board
In-Reply-To: <CA+YzLBdb5ZSbh+sw_y0v=ZN_SXiJOUm=yD_Dm90iLAjrb++fcQ@mail.gmail.com>
References: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>
 <bf83501a-0485-addd-f50a-a01566a51bc4@mapgears.com>
 <CA+YzLBdb5ZSbh+sw_y0v=ZN_SXiJOUm=yD_Dm90iLAjrb++fcQ@mail.gmail.com>
Message-ID: <CACmBxyssT1GR=AQSFu9XG+Lj43Yr=TX58g+PzguF8hP1btRpwg@mail.gmail.com>

+1 KurtS

On Fri, Jun 4, 2021 at 9:46 AM Frank Warmerdam <warmerdam at pobox.com> wrote:

> +1 Frank
>
> On Fri, Jun 4, 2021 at 12:36 PM Daniel Morissette <
> dmorissette at mapgears.com> wrote:
>
>> +1
>>
>> Daniel
>>
>>
>> On 2021-06-04 12:24, Even Rouault wrote:
>> > Hi,
>> >
>> > We just had a meeting with NumFOCUS staff, and they suggested we should
>> > rename the GDAL Advisory Board to something else. The issue is with the
>> > Board term which is a legal term and may implicate that it is a
>> deciding
>> > body, which it is not. They suggested Council, Committee, as potential
>> > alternatives. As committee is already used for the PSC, I think "GDAL
>> > Advisory Council" could be a good fit.
>> >
>> > If there's no opposition to this, I'll change all references to it on
>> > the GDAL website (RFC 80, sponsorship prospectus), and ask for the
>> > related mailing list to be renamed/recreated.
>> >
>> > Other news: the Fiscal Sponsorship Agreement document, which will make
>> > us officialy a NumFOCUS sponsored project, is now in the signing loop.
>> >
>> > Even
>> >
>>
>>
>> --
>> Daniel Morissette
>> Mapgears Inc
>> T: +1 418-696-5056 #201
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | +1 650-701-7823
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210604/ba1f163f/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jun  4 13:21:49 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 4 Jun 2021 13:21:49 -0700 (MST)
Subject: [gdal-dev] Renaming of GDAL Advisory Board
In-Reply-To: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>
References: <98bd0dd0-037f-1682-ab56-5b7281d9959d@spatialys.com>
Message-ID: <1622838109777-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> We just had a meeting with NumFOCUS staff, and they suggested we should 
> rename the GDAL Advisory Board to something else. The issue is with the 
> Board term which is a legal term and may implicate that it is a deciding 
> body, which it is not. They suggested Council, Committee, as potential 
> alternatives. As committee is already used for the PSC, I think "GDAL 
> Advisory Council" could be a good fit.
> 
> If there's no opposition to this, I'll change all references to it on 
> the GDAL website (RFC 80, sponsorship prospectus), and ask for the 
> related mailing list to be renamed/recreated.
> 
> Other news: the Fiscal Sponsorship Agreement document, which will make 
> us officialy a NumFOCUS sponsored project, is now in the signing loop.
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sean at mapbox.com  Fri Jun  4 16:01:29 2021
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 4 Jun 2021 17:01:29 -0600
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
Message-ID: <CADPhZXyMHpcBkcXDstzynZfjVFs5vTDOq2iKkEmStADVYFLH+A@mail.gmail.com>

Hi Thomas,

Congratulations! These look like great projects.

On Fri, Jun 4, 2021 at 4:07 AM thomas bonfort <thomas.bonfort at gmail.com>
wrote:

> Hello gdal,
>
> We're releasing two projects on github under an Apache-2.0 licence
> which may be of interest to the GDAL community.
>
> The first one, https://github.com/airbusgeo/cogger is a lightweight
> geotiff to COG converter that reshuffles the bytes of a tiled geotiff
> to make it cloud compatible. Whereas it does not replace the standard
> gdal tools for initially creating a geotiff, it is much faster than
> the last "-co COPY_SRC_OVERVIEWS=YES" classical gdal_translate method
> for outputting a cog, and also allows more flexibility when varying
> compression methods or tile sizes need to applied on overviews. Cogger
> can be used as a standalone command line tool, or as a go library
> function for interacting with remote storage without the need for
> local files.
>
> The second one, https://github.com/airbusgeo/godal is a golang wrapper
> for GDAL's raster api. While there is an already established golang
> wrapper for gdal that exists (https://github.com/lukeroth/gdal), godal
> differs by offering:
> - robust error handling and reporting
> - a stable compatible api promise (to the extent of what is possible
> to achieve given gdal's own api)
> - a vsi abstraction that hands off i/o to native golang code
> - a more user-friendly API that is not an exact mirror of the gdal
> api, making lesser used functionality optional. (For example, instead
> of the GDALOpen, GDALOpenEx and GDALOpenShared methods, godal exposes
> a single Open() method with optional arguments validated at compile
> time to pass in open options, shared mode, sibling files, etc...)
> Although the raster handling side of godal is mostly feature complete
> with gdal, the vector and spatial-referencing part is not.
>
> Outside contributions to both these projects are welcome through github.
>
> Best regards,
> Thomas
>

I'm very interested in "a vsi abstraction that hands off i/o to native
golang code".

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210604/c7375f5e/attachment.html>

From j1 at jimenezshaw.com  Sat Jun  5 01:24:19 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 5 Jun 2021 10:24:19 +0200
Subject: [gdal-dev] ALPHA and PHOTOMETRIC options in TIFF
Message-ID: <CADRrdKvc37s2axMfkQeH0onBL_OcgW_Q0cxdWV7cmUNe8GE_4Q@mail.gmail.com>

Hi

I am struggling to save my data in (Geo)TIFF files with the proper creation
options.
My data is not standard RGB(A), but a collection of bands like red, green,
(not necessarily blue), another type of red, near infrared, etc, and Alpha.
It can be uint8, uint16 or float.

I was using PHOTOMETRIC=MINISBLACK and ALPHA=YES, but now I am not sure if
this is the proper configuration. In addition to that, I am setting a
ColorInterpretation to the bands (many bands as GCI_Undefined, like for
Near Infrared. The alpha band is clear as GCI_AlphaBand).

The "extra samples" is obscure to me, I do not know how many bands expects,
and how many are "extra". (
https://www.awaresystems.be/imaging/tiff/tifftags/extrasamples.html)

TIFF says "There is no default for PhotometricInterpretation, and it is
required. Do not rely on applications defaulting to what you want." in
https://www.awaresystems.be/imaging/tiff/tifftags/photometricinterpretation.html

How should I create my TIFFs?

Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210605/932fdc4a/attachment.html>

From even.rouault at spatialys.com  Sat Jun  5 01:30:06 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Jun 2021 10:30:06 +0200
Subject: [gdal-dev] ALPHA and PHOTOMETRIC options in TIFF
In-Reply-To: <CADRrdKvc37s2axMfkQeH0onBL_OcgW_Q0cxdWV7cmUNe8GE_4Q@mail.gmail.com>
References: <CADRrdKvc37s2axMfkQeH0onBL_OcgW_Q0cxdWV7cmUNe8GE_4Q@mail.gmail.com>
Message-ID: <795e71aa-8f63-5102-149e-4d90680355ae@spatialys.com>

Javier,

Le 05/06/2021 ? 10:24, Javier Jimenez Shaw a ?crit?:
> Hi
>
> I am struggling to save my data in (Geo)TIFF files with the proper 
> creation options.
> My data is not standard RGB(A), but a collection of bands like red, 
> green, (not necessarily blue), another type of red, near infrared, 
> etc, and Alpha. It can be uint8, uint16 or float.
>
> I was using PHOTOMETRIC=MINISBLACK and ALPHA=YES, but now I am not 
> sure if this is the proper configuration. In addition to that, I am 
> setting a ColorInterpretation to the bands (many bands as 
> GCI_Undefined, like for Near Infrared. The alpha band is clear as 
> GCI_AlphaBand).
This looks good. GDAL will potential write into its GDAL_METADATA XML 
tag custom band color interpretation if the very basic ones implied by 
only TIFF tags (Grey, Grey+Alpha, RGB, RGBA) don't fit your settings
>
> The "extra samples" is obscure to me, I do not know how many bands 
> expects, and how many are "extra". 
> (https://www.awaresystems.be/imaging/tiff/tifftags/extrasamples.html 
> <https://www.awaresystems.be/imaging/tiff/tifftags/extrasamples.html>)
You shouldn't worry too much about that tag. The GeoTIFF driver will 
take care of setting it. But basically if you use 
Photometric=MinIsBlack, then count(extra_samples) = number_bands - 1, or 
if you use Photometric=RGB, count(extra_samples) = number_bands - 3.
>
> TIFF says "There is no default for PhotometricInterpretation, and it 
> is required. Do not rely on applications defaulting to what you want." 
> in 
> https://www.awaresystems.be/imaging/tiff/tifftags/photometricinterpretation.html 
> <https://www.awaresystems.be/imaging/tiff/tifftags/photometricinterpretation.html>
>
> How should I create my TIFFs?

For what you describe, MinIsBlack is the appropriate Photometric value

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From intelligence-customertechnicalsupport at airbus.com  Mon Jun  7 06:46:34 2021
From: intelligence-customertechnicalsupport at airbus.com (Intelligence-CustomerTechnicalSupport)
Date: Mon, 7 Jun 2021 13:46:34 +0000
Subject: [gdal-dev] SPOT6-7 RPC interpretation issue
In-Reply-To: <30b1f38305014cb5b9120728bff5818e@CD1-4BDAG06-P03.cdmail.common.airbusds.corp>
References: <30b1f38305014cb5b9120728bff5818e@CD1-4BDAG06-P03.cdmail.common.airbusds.corp>
Message-ID: <2cd130ecc33c4cc2acbb8e44cdb251ca@CD1-4BDAG06-P03.cdmail.common.airbusds.corp>

Hi all,

I hope my email finds you well

I would like to report you a convention issue with our SPOT6-7 RPC model.
Gdal has previously updated RPC model interpretation of Pl?iades so that image coordinate normalized rn,cn = -1,-1 corresponds to r,c = 0,0 by subtracting 1 pixel to the offset value in row, column. The problem is that this interpretation was applicable to all Primary products (PHR and SPOT) while it shouldn't done for SPOT.

Regarding DIMAP and image file, there is no difference between SPOT and PHR. The pixel convention is center pixel for both

However regarding RPC :
For PHR, image coordinate normalized rn,cn = -1,-1 corresponds to the image coordinate r0,c0 = 1,1
For SPOT, image coordinate normalized rn,cn = -1,-1 corresponds to the image coordinate r0,c0 = 0,0 (c.f. http://geotiff.maptools.org/rpc_prop.html)

Could you handle this modification ? Or tell me who is the best contact to address this request ?

For information, here is the original discussion six years ago, when you implemented the fix for handling the PHR RPCs correctly: https://trac.osgeo.org/gdal/ticket/5993

I'm staying at your disposal for any further information if needed

Have a good day

Best regards
G?raldine

G?raldine LE PRIOL
Customer Technical Support
Customer Service &Technical Support - TCIFT1

Airbus Defence and Space
5, rue des Satellites, BP 14359
France - 31030 - Toulouse
E: geraldine.lepriol at airbus.com<mailto:geraldine.lepriol at airbus.com>

www.intelligence-airbusds.com<http://www.intelligence-airbusds.com/>

[AIRBUS_D&S_3D_Blue_RGB-low]



The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/d2d39f9c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5031 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/d2d39f9c/attachment.png>

From mchapman at hyperacktive.com  Mon Jun  7 09:19:56 2021
From: mchapman at hyperacktive.com (Martin Chapman)
Date: Mon, 7 Jun 2021 10:19:56 -0600
Subject: [gdal-dev] GDALCreateApproxTransformer and error threshold
 ramifications question
Message-ID: <024801d75bb8$f4f5d2a0$dee177e0$@hyperacktive.com>

Even, Frank or anyone in the know about gdal warp API,

 

I have been using the GDALCreateGenImgProjTransformer function to create my
transformer arg in the warp options for the ChunkAndWarpImage function with
an error threshold set to 0.0 for a while now and everything works great.  I
did this initially because I wanted the best possible warp results.
Recently, I noticed that the performance of that operation had slowed down
significantly in the newer versions and I am assuming that's because the
process has been improved to be more rigorous and produce better results
(?). 

 

Anyhow, I was looking at how I could speed up the process without
sacrificing too much accuracy and I noticed that the default behavior in the
gdalwarp utility uses an error threshold of 0.125 and the
GDALCreateApproxTransformer function to create the transformer arg.  I read
the documentation and I think I understand the ramifications of doing so,
but I was hoping somebody could give me a more detailed explanation of how
much the warp results will be affected by using the
GDALCreateApproxTransformer function with a threshold of 0.125.  I am
assuming it must not be that bad because Frank choose that value as the
default value years ago.  I noticed it really improves the performance but I
didn't want to make the conversion without knowing exactly what I am
sacrificing.  

 

I am assuming with an error threshold of 0.0 it is a per pixel warp
operation and if the threshold is greater than 0.0 and the
GDALCreateApproxTransformer function is used it ends up being a grid warp.
Is that correct?  Does the threshold mean that the warped pixel may be off
by one pixel in the results or could it be worse than that? 

 

Thanks in advance for any light you can shed on the subject!

 

Best regards,

Martin Chapman  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/4ce4a487/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jun  7 10:06:38 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jun 2021 19:06:38 +0200
Subject: [gdal-dev] GDALCreateApproxTransformer and error threshold
 ramifications question
In-Reply-To: <024801d75bb8$f4f5d2a0$dee177e0$@hyperacktive.com>
References: <024801d75bb8$f4f5d2a0$dee177e0$@hyperacktive.com>
Message-ID: <43dfbfcb-259d-3ac4-697f-58e3cc839ddb@spatialys.com>

Martin,

it would be interesting if you could identify which change caused the 
slow down you notice. Nothing jumps to mind. git bisect could help 
(assuming this is only GDAL related, and not due to changes in PROJ 
versions)

The value of the error threshold is in pixels. So 0.125 means you accept 
up to a 1/8th pixel error, so yes, that's already quite high quality. An 
error threshold of 0 is rarely needed, unless you use RPC 
ortho-rectification with a DEM, especially in mountainous regions.

Even

Le 07/06/2021 ? 18:19, Martin Chapman a ?crit?:
>
> Even, Frank or anyone in the know about gdal warp API,
>
> I have been using the GDALCreateGenImgProjTransformer function to 
> create my transformer arg in the warp options for the 
> ChunkAndWarpImage function with an error threshold set to 0.0 for a 
> while now and everything works great.? I did this initially because I 
> wanted the best possible warp results.? Recently, I noticed that the 
> performance of that operation had slowed down significantly in the 
> newer versions and I am assuming that?s because the process has been 
> improved to be more rigorous and produce better results (?).
>
> Anyhow, I was looking at how I could speed up the process without 
> sacrificing too much accuracy and I noticed that the default behavior 
> in the gdalwarp utility uses an error threshold of 0.125 and the 
> GDALCreateApproxTransformer function to create the transformer arg.? I 
> read the documentation and I think I understand the ramifications of 
> doing so, but I was hoping somebody could give me a more detailed 
> explanation of how much the warp results will be affected by using the 
> GDALCreateApproxTransformer function with a threshold of 0.125.? I am 
> assuming it must not be that bad because Frank choose that value as 
> the default value years ago.? I noticed it really improves the 
> performance but I didn?t want to make the conversion without knowing 
> exactly what I am sacrificing.
>
> I am assuming with an error threshold of 0.0 it is a per pixel warp 
> operation and if the threshold is greater than 0.0 and the 
> GDALCreateApproxTransformer function is used it ends up being a grid 
> warp.? Is that correct?? Does the threshold mean that the warped pixel 
> may be off by one pixel in the results or could it be worse than that?
>
> Thanks in advance for any light you can shed on the subject!
>
> Best regards,
>
> Martin Chapman
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/4602fbd6/attachment.html>

From mchapman at hyperacktive.com  Mon Jun  7 12:03:03 2021
From: mchapman at hyperacktive.com (Martin Chapman)
Date: Mon, 7 Jun 2021 13:03:03 -0600
Subject: [gdal-dev] GDALCreateApproxTransformer and error threshold
 ramifications question
In-Reply-To: <43dfbfcb-259d-3ac4-697f-58e3cc839ddb@spatialys.com>
References: <024801d75bb8$f4f5d2a0$dee177e0$@hyperacktive.com>
 <43dfbfcb-259d-3ac4-697f-58e3cc839ddb@spatialys.com>
Message-ID: <026501d75bcf$be8b0a20$3ba11e60$@hyperacktive.com>

Even,

 

Thanks for the explanation in the second paragraph of your response.  My
colleagues are probably gonna give me grief because the warp operation could
have been much faster all these years, but hey, better late than never. J
It sounds like using the approximate warp will work great then.  I?m
thrilled!

 

I?m not sure what is slowing down the warp in the new version, but I should
say that lightly because we only ran some simple tests and I may not be
exactly correct about that.  It wasn?t really gdalwarp that was slower, it
was my code that uses the warp api, so it could just be something I am
doing.  What is clear though, is that using the approx transformer with an
error threshold greater than 0.0 is significantly faster, which is probably
no surprise to you.  We were comparing gdalwarp v1.9 to gdalwarp v3.x
(latest) specifying ?et as 0.0.  We were warping a geotiff in some UTM zone
to WGS84.  When we removed the ?et parameter the run times were way faster.
I will look into it further and let you know if I find anything.

 

Thanks again!

 

Best regards,

Martin Chapman

 

From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, June 7, 2021 11:07 AM
To: Martin Chapman; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] GDALCreateApproxTransformer and error threshold
ramifications question

 

Martin,

it would be interesting if you could identify which change caused the slow
down you notice. Nothing jumps to mind. git bisect could help (assuming this
is only GDAL related, and not due to changes in PROJ versions)

The value of the error threshold is in pixels. So 0.125 means you accept up
to a 1/8th pixel error, so yes, that's already quite high quality. An error
threshold of 0 is rarely needed, unless you use RPC ortho-rectification with
a DEM, especially in mountainous regions.

Even

Le 07/06/2021 ? 18:19, Martin Chapman a ?crit :

Even, Frank or anyone in the know about gdal warp API,

 

I have been using the GDALCreateGenImgProjTransformer function to create my
transformer arg in the warp options for the ChunkAndWarpImage function with
an error threshold set to 0.0 for a while now and everything works great.  I
did this initially because I wanted the best possible warp results.
Recently, I noticed that the performance of that operation had slowed down
significantly in the newer versions and I am assuming that?s because the
process has been improved to be more rigorous and produce better results
(?). 

 

Anyhow, I was looking at how I could speed up the process without
sacrificing too much accuracy and I noticed that the default behavior in the
gdalwarp utility uses an error threshold of 0.125 and the
GDALCreateApproxTransformer function to create the transformer arg.  I read
the documentation and I think I understand the ramifications of doing so,
but I was hoping somebody could give me a more detailed explanation of how
much the warp results will be affected by using the
GDALCreateApproxTransformer function with a threshold of 0.125.  I am
assuming it must not be that bad because Frank choose that value as the
default value years ago.  I noticed it really improves the performance but I
didn?t want to make the conversion without knowing exactly what I am
sacrificing.  

 

I am assuming with an error threshold of 0.0 it is a per pixel warp
operation and if the threshold is greater than 0.0 and the
GDALCreateApproxTransformer function is used it ends up being a grid warp.
Is that correct?  Does the threshold mean that the warped pixel may be off
by one pixel in the results or could it be worse than that? 

 

Thanks in advance for any light you can shed on the subject!

 

Best regards,

Martin Chapman  





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/efe33354/attachment.html>

From Matt.Wilkie at yukon.ca  Mon Jun  7 14:17:03 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Mon, 7 Jun 2021 21:17:03 +0000
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
 <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
 <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
Message-ID: <9fe7c185bf474effb3084e02d7988371@yukon.ca>

?I'd expect it to be much faster than gdal_translate -of COG (if your input is GeoTIFF and always properly tiled and compressed of course!).

I?m confident I know what a properly compressed geotiff is, but what is a properly tiled one? (or if it?s easier to define: what are improperly tiled geotiff?)


-Matt

From: Even Rouault <even.rouault at spatialys.com>
Sent: June 4, 2021 9:33 AM
To: thomas bonfort <thomas.bonfort at gmail.com>; Matt.Wilkie <Matt.Wilkie at yukon.ca>
Cc: Gdal Dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Introducing the cogger and godal projects


*** External email: Do not click on links or attachments except from trusted senders. ***

******************************************************************************************




I haven't benchmarked cogger but I'd expect it to be much faster than gdal_translate -of COG (if your input is GeoTIFF and always properly tiled and compressed of course!). gdal_translate -of COG uses generic GDAL API to acquire input data, which implies decompression / recompression. And in particular, if using input GeoTIFF with lossy compressed methods such as JPEG or WebP, cogger will avoid adding any new loss.
Le 04/06/2021 ? 18:28, thomas bonfort a ?crit :
I haven't extensively used -of COG (the cogger code actually predates the cog driver) but iirc there are at least some cases where it uses an intermediate file, which would imply that cogger does offer some speedups. I'll let Even confirm...
Regards,
Thomas
Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca<mailto:Matt.Wilkie at yukon.ca>> a ?crit :
Is cogger specifically for the scenario where your converting a large imagery library that already exists, but isn't cloud optimized? i.e. Does it offer any advantages over the one step `gdal_translate -of cog ...` when starting fresh?

Cheers,

Matt
Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<https://imsva91-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=http%3a%2f%2fwww.spatialys.com&umid=BB1EB12E-C3F3-3E05-A4FC-DC578DED8704&auth=c132af8ee7c9d1278d61a701569070a095ce962e-b9e494bc988145611c35e65f34295c2b143834aa>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/bd4d540c/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jun  7 14:20:46 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jun 2021 23:20:46 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <9fe7c185bf474effb3084e02d7988371@yukon.ca>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
 <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
 <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
 <9fe7c185bf474effb3084e02d7988371@yukon.ca>
Message-ID: <7cd2a5ee-a254-0f4e-0554-817805cc751a@spatialys.com>

I meant that the input GeoTIFF file should use the tile size and 
compression method that you expect for the final COG, to be usable with 
cogger. If you need to re-tile or change compression method, use the 
GDAL COG driver

Le 07/06/2021 ? 23:17, Matt.Wilkie at yukon.ca a ?crit?:
>
> ?I'd expect it to be much faster than gdal_translate -of COG (if your 
> input is GeoTIFF and always properly tiled and compressed of course!).
>
> I?m confident I know what a properly compressed geotiff is, but what 
> is a properly tiled one? (or if it?s easier to define: what are 
> improperly tiled geotiff?)
>
> -Matt//
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* June 4, 2021 9:33 AM
> *To:* thomas bonfort <thomas.bonfort at gmail.com>; Matt.Wilkie 
> <Matt.Wilkie at yukon.ca>
> *Cc:* Gdal Dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Introducing the cogger and godal projects
>
> **** External email: Do not click on links or attachments except from 
> trusted senders. ****
> ********************************************************************************************
>
> I haven't benchmarked cogger but I'd expect it to be much faster than 
> gdal_translate -of COG (if your input is GeoTIFF and always properly 
> tiled and compressed of course!). gdal_translate -of COG uses generic 
> GDAL API to acquire input data, which implies decompression / 
> recompression. And in particular, if using input GeoTIFF with lossy 
> compressed methods such as JPEG or WebP, cogger will avoid adding any 
> new loss.
>
> Le 04/06/2021 ? 18:28, thomas bonfort a ?crit?:
>
>     I haven't extensively used -of COG (the cogger code actually
>     predates the cog driver) but iirc there are at least some cases
>     where it uses an intermediate file, which would imply that cogger
>     does offer some speedups. I'll let Even confirm...
>
>     Regards,
>
>     Thomas
>
>     Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca
>     <mailto:Matt.Wilkie at yukon.ca>> a ?crit?:
>
>         Is cogger specifically for the scenario where your converting
>         a large imagery library that already exists, but isn't cloud
>         optimized? i.e. Does it offer any advantages over the one step
>         `gdal_translate -of cog ...` when starting fresh?
>
>         Cheers,
>
>         Matt
>         Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
>         Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
> -- 
> http://www.spatialys.com  <https://imsva91-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=http%3a%2f%2fwww.spatialys.com&umid=BB1EB12E-C3F3-3E05-A4FC-DC578DED8704&auth=c132af8ee7c9d1278d61a701569070a095ce962e-b9e494bc988145611c35e65f34295c2b143834aa>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210607/e7ae0a08/attachment.html>

From j1 at jimenezshaw.com  Tue Jun  8 01:32:28 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 8 Jun 2021 10:32:28 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
 <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
 <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
Message-ID: <CADRrdKvouTQSb_xhiJoqEbSvJ5RQMNUn7oZtEbF2hPC3rmZ=6A@mail.gmail.com>

Thanks Thomas!
I see this is in Go. Is there a C++ version of it? Or how easy is to use it
from C++ code?
Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Fri, 4 Jun 2021 at 18:48, Even Rouault <even.rouault at spatialys.com>
wrote:

> I haven't benchmarked cogger but I'd expect it to be much faster than
> gdal_translate -of COG (if your input is GeoTIFF and always properly tiled
> and compressed of course!). gdal_translate -of COG uses generic GDAL API to
> acquire input data, which implies decompression / recompression. And in
> particular, if using input GeoTIFF with lossy compressed methods such as
> JPEG or WebP, cogger will avoid adding any new loss.
> Le 04/06/2021 ? 18:28, thomas bonfort a ?crit :
>
> I haven't extensively used -of COG (the cogger code actually predates the
> cog driver) but iirc there are at least some cases where it uses an
> intermediate file, which would imply that cogger does offer some speedups.
> I'll let Even confirm...
> Regards,
> Thomas
>
> Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca> a ?crit :
>
>> Is cogger specifically for the scenario where your converting a large
>> imagery library that already exists, but isn't cloud optimized? i.e. Does
>> it offer any advantages over the one step `gdal_translate -of cog ...` when
>> starting fresh?
>>
>> Cheers,
>>
>> Matt
>> Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
>> Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
>>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/7bc45a79/attachment.html>

From thomas.bonfort at gmail.com  Tue Jun  8 01:59:09 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Tue, 8 Jun 2021 10:59:09 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <CADRrdKvouTQSb_xhiJoqEbSvJ5RQMNUn7oZtEbF2hPC3rmZ=6A@mail.gmail.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
 <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
 <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
 <CADRrdKvouTQSb_xhiJoqEbSvJ5RQMNUn7oZtEbF2hPC3rmZ=6A@mail.gmail.com>
Message-ID: <CAOM3y2i8Oc9GLBox+REv6dA9iCf-BuseCJ6SyUrmumC-FftdHw@mail.gmail.com>

There is no c++ version, although there are no specific go constructs
that would prevent a port to c++ if you really wanted to.
It could also be possible to export a C function from the go code,
exposed as a shared library, that would only work on local files
and who's signature would be something like:

int rewrite(char *outputfilename, char *intpufilename);

--
thomas

On Tue, Jun 8, 2021 at 10:32 AM Javier Jimenez Shaw <j1 at jimenezshaw.com> wrote:
>
> Thanks Thomas!
> I see this is in Go. Is there a C++ version of it? Or how easy is to use it from C++ code?
> Thanks.
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Fri, 4 Jun 2021 at 18:48, Even Rouault <even.rouault at spatialys.com> wrote:
>>
>> I haven't benchmarked cogger but I'd expect it to be much faster than gdal_translate -of COG (if your input is GeoTIFF and always properly tiled and compressed of course!). gdal_translate -of COG uses generic GDAL API to acquire input data, which implies decompression / recompression. And in particular, if using input GeoTIFF with lossy compressed methods such as JPEG or WebP, cogger will avoid adding any new loss.
>>
>> Le 04/06/2021 ? 18:28, thomas bonfort a ?crit :
>>
>> I haven't extensively used -of COG (the cogger code actually predates the cog driver) but iirc there are at least some cases where it uses an intermediate file, which would imply that cogger does offer some speedups. I'll let Even confirm...
>> Regards,
>> Thomas
>>
>> Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca> a ?crit :
>>>
>>> Is cogger specifically for the scenario where your converting a large imagery library that already exists, but isn't cloud optimized? i.e. Does it offer any advantages over the one step `gdal_translate -of cog ...` when starting fresh?
>>>
>>> Cheers,
>>>
>>> Matt
>>> Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
>>> Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Tue Jun  8 03:50:18 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jun 2021 12:50:18 +0200
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
Message-ID: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>

Hi,

Motion:

adopt RFC 83: guidelines for the use of GDAL project sponsorship ( 
https://github.com/OSGeo/gdal/pull/3855 )

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mateusz at loskot.net  Tue Jun  8 05:31:08 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 8 Jun 2021 14:31:08 +0200
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
Message-ID: <CABUeae_qHiO4YU12M3+S=2uY-a2dSMeTts1P_AzjsuyMgPwMLA@mail.gmail.com>

+1   Mateusz

On Tue, 8 Jun 2021 at 12:50, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> Motion:
>
> adopt RFC 83: guidelines for the use of GDAL project sponsorship (
> https://github.com/OSGeo/gdal/pull/3855 )
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From howard at hobu.co  Tue Jun  8 06:37:39 2021
From: howard at hobu.co (Howard Butler)
Date: Tue, 8 Jun 2021 08:37:39 -0500
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <CABUeae_qHiO4YU12M3+S=2uY-a2dSMeTts1P_AzjsuyMgPwMLA@mail.gmail.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
 <CABUeae_qHiO4YU12M3+S=2uY-a2dSMeTts1P_AzjsuyMgPwMLA@mail.gmail.com>
Message-ID: <BE12D012-A1D3-442C-BF9A-58A8DF344649@hobu.co>

+1 Howard

> On Jun 8, 2021, at 7:31 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
> +1   Mateusz
> 
> On Tue, 8 Jun 2021 at 12:50, Even Rouault <even.rouault at spatialys.com> wrote:
>> 
>> Hi,
>> 
>> Motion:
>> 
>> adopt RFC 83: guidelines for the use of GDAL project sponsorship (
>> https://github.com/OSGeo/gdal/pull/3855 )
>> 
>> Starting with my +1
>> 
>> Even
>> 
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From j1 at jimenezshaw.com  Tue Jun  8 07:43:25 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 8 Jun 2021 16:43:25 +0200
Subject: [gdal-dev] Introducing the cogger and godal projects
In-Reply-To: <CAOM3y2i8Oc9GLBox+REv6dA9iCf-BuseCJ6SyUrmumC-FftdHw@mail.gmail.com>
References: <CAOM3y2jQ5CHgtbR3b9mKJTgWOX=svjQVFS0mCwMYgMb_2yfwkw@mail.gmail.com>
 <c91c77dac8084f5783bea2cc969ae339@yukon.ca>
 <CAOM3y2iXyGJXQcqgqkgVeXm9oxaEuVOaAd8VvvbJTxx+yodZqA@mail.gmail.com>
 <b76f1f0b-4633-75f8-4b4c-081bb839d2ce@spatialys.com>
 <CADRrdKvouTQSb_xhiJoqEbSvJ5RQMNUn7oZtEbF2hPC3rmZ=6A@mail.gmail.com>
 <CAOM3y2i8Oc9GLBox+REv6dA9iCf-BuseCJ6SyUrmumC-FftdHw@mail.gmail.com>
Message-ID: <CADRrdKsYHmMxwG9_L9NbPU6NwnCDNvjab4U61w0g0JBVzT-pkA@mail.gmail.com>

That sounds reasonable.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Tue, 8 Jun 2021 at 10:59, thomas bonfort <thomas.bonfort at gmail.com>
wrote:

> There is no c++ version, although there are no specific go constructs
> that would prevent a port to c++ if you really wanted to.
> It could also be possible to export a C function from the go code,
> exposed as a shared library, that would only work on local files
> and who's signature would be something like:
>
> int rewrite(char *outputfilename, char *intpufilename);
>
> --
> thomas
>
> On Tue, Jun 8, 2021 at 10:32 AM Javier Jimenez Shaw <j1 at jimenezshaw.com>
> wrote:
> >
> > Thanks Thomas!
> > I see this is in Go. Is there a C++ version of it? Or how easy is to use
> it from C++ code?
> > Thanks.
> > .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> > Entre dos pensamientos racionales
> > hay infinitos pensamientos irracionales.
> >
> >
> >
> > On Fri, 4 Jun 2021 at 18:48, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >>
> >> I haven't benchmarked cogger but I'd expect it to be much faster than
> gdal_translate -of COG (if your input is GeoTIFF and always properly tiled
> and compressed of course!). gdal_translate -of COG uses generic GDAL API to
> acquire input data, which implies decompression / recompression. And in
> particular, if using input GeoTIFF with lossy compressed methods such as
> JPEG or WebP, cogger will avoid adding any new loss.
> >>
> >> Le 04/06/2021 ? 18:28, thomas bonfort a ?crit :
> >>
> >> I haven't extensively used -of COG (the cogger code actually predates
> the cog driver) but iirc there are at least some cases where it uses an
> intermediate file, which would imply that cogger does offer some speedups.
> I'll let Even confirm...
> >> Regards,
> >> Thomas
> >>
> >> Le ven. 4 juin 2021 ? 18:14, <Matt.Wilkie at yukon.ca> a ?crit :
> >>>
> >>> Is cogger specifically for the scenario where your converting a large
> imagery library that already exists, but isn't cloud optimized? i.e. Does
> it offer any advantages over the one step `gdal_translate -of cog ...` when
> starting fresh?
> >>>
> >>> Cheers,
> >>>
> >>> Matt
> >>> Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
> >>> Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >> --
> >> http://www.spatialys.com
> >> My software is free, but my time generally not.
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/362ea352/attachment.html>

From j1 at jimenezshaw.com  Tue Jun  8 07:53:59 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 8 Jun 2021 16:53:59 +0200
Subject: [gdal-dev] ALPHA and PHOTOMETRIC options in TIFF
In-Reply-To: <795e71aa-8f63-5102-149e-4d90680355ae@spatialys.com>
References: <CADRrdKvc37s2axMfkQeH0onBL_OcgW_Q0cxdWV7cmUNe8GE_4Q@mail.gmail.com>
 <795e71aa-8f63-5102-149e-4d90680355ae@spatialys.com>
Message-ID: <CADRrdKtB88DjN85rTsfDmvG53zJ=Gk=KD8K=i3XWkJHu-E4CDA@mail.gmail.com>

Thanks Even

Doing that (multiband with minisblack and alpha), and interleave=band, when
computing overviews there is a problem. I opened an issue that explains it.
https://github.com/OSGeo/gdal/issues/3939
I tried a solution, but I think it is not the proper one.

Cheers.
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Sat, 5 Jun 2021 at 10:30, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
> Le 05/06/2021 ? 10:24, Javier Jimenez Shaw a ?crit :
> > Hi
> >
> > I am struggling to save my data in (Geo)TIFF files with the proper
> > creation options.
> > My data is not standard RGB(A), but a collection of bands like red,
> > green, (not necessarily blue), another type of red, near infrared,
> > etc, and Alpha. It can be uint8, uint16 or float.
> >
> > I was using PHOTOMETRIC=MINISBLACK and ALPHA=YES, but now I am not
> > sure if this is the proper configuration. In addition to that, I am
> > setting a ColorInterpretation to the bands (many bands as
> > GCI_Undefined, like for Near Infrared. The alpha band is clear as
> > GCI_AlphaBand).
> This looks good. GDAL will potential write into its GDAL_METADATA XML
> tag custom band color interpretation if the very basic ones implied by
> only TIFF tags (Grey, Grey+Alpha, RGB, RGBA) don't fit your settings
> >
> > The "extra samples" is obscure to me, I do not know how many bands
> > expects, and how many are "extra".
> > (https://www.awaresystems.be/imaging/tiff/tifftags/extrasamples.html
> > <https://www.awaresystems.be/imaging/tiff/tifftags/extrasamples.html>)
> You shouldn't worry too much about that tag. The GeoTIFF driver will
> take care of setting it. But basically if you use
> Photometric=MinIsBlack, then count(extra_samples) = number_bands - 1, or
> if you use Photometric=RGB, count(extra_samples) = number_bands - 3.
> >
> > TIFF says "There is no default for PhotometricInterpretation, and it
> > is required. Do not rely on applications defaulting to what you want."
> > in
> >
> https://www.awaresystems.be/imaging/tiff/tifftags/photometricinterpretation.html
> > <
> https://www.awaresystems.be/imaging/tiff/tifftags/photometricinterpretation.html
> >
> >
> > How should I create my TIFFs?
>
> For what you describe, MinIsBlack is the appropriate Photometric value
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/d8a01f0c/attachment.html>

From warmerdam at pobox.com  Tue Jun  8 09:19:06 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 8 Jun 2021 12:19:06 -0400
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <BE12D012-A1D3-442C-BF9A-58A8DF344649@hobu.co>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
 <CABUeae_qHiO4YU12M3+S=2uY-a2dSMeTts1P_AzjsuyMgPwMLA@mail.gmail.com>
 <BE12D012-A1D3-442C-BF9A-58A8DF344649@hobu.co>
Message-ID: <CA+YzLBdhX7KNU5D4FCdo+ctOP_BhJr_WWo2pf3QOTnZb67=Rnw@mail.gmail.com>

+1 FrankW

I do think we need to give ourselves (the PSC) some latitude on how
proposals are solicited and evaluated.

I am quite pleased with the characterization of the maintenance tasks.

Best regards,


On Tue, Jun 8, 2021 at 9:37 AM Howard Butler <howard at hobu.co> wrote:

> +1 Howard
>
> > On Jun 8, 2021, at 7:31 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> >
> > +1   Mateusz
> >
> > On Tue, 8 Jun 2021 at 12:50, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >>
> >> Hi,
> >>
> >> Motion:
> >>
> >> adopt RFC 83: guidelines for the use of GDAL project sponsorship (
> >> https://github.com/OSGeo/gdal/pull/3855 )
> >>
> >> Starting with my +1
> >>
> >> Even
> >>
> >> --
> >> http://www.spatialys.com
> >> My software is free, but my time generally not.
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Mateusz Loskot, http://mateusz.loskot.net
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/e3e7529f/attachment-0001.html>

From beggers359 at gmail.com  Tue Jun  8 11:11:27 2021
From: beggers359 at gmail.com (Bill Eggers)
Date: Tue, 8 Jun 2021 14:11:27 -0400
Subject: [gdal-dev] QGIS - No module named GDAL
Message-ID: <CAC+90i8j+qhV4sw=vPM9mHo8cW76Ou37Ny67006Wn2S8O5r31A@mail.gmail.com>

Somewhere between installing BlenderGIS, OSGEO4W testing version, and
ArcGISPro, the QGIS plugins that relied on GDAL quit working. I?ve tried
uninstalling and re-installing OSGEO4W and the standalone QGIS 3.18..3-2
and a few other tips like specifying the Python path, but nothing worked. I
suspect something happened when I was installing the BlenderGIS addon. It
called for a separate installation of Python and GDAL wheel. I?ve copied
the error message below. The problem isn?t just related to the QGIS CWSI
plugin, this is just an example of what I see from several plugins. Can
anyone help me fix this?


Kind regards,


Bill


Couldn't load plugin 'cwsi' due to an error when calling its classFactory()
method
ModuleNotFoundError: No module named 'gdal'

Traceback (most recent call last):
  File "C:\PROGRA~1/QGIS31~1.3/apps/qgis/./python\qgis\utils.py", line
335, in _startPlugin
    plugins[packageName] = package.classFactory(iface)
  File "C:\Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\cwsi\__init__.py",
line 35, in classFactory
    from .cwsi import CWSI
  File "C:\PROGRA~1/QGIS31~1.3/apps/qgis/./python\qgis\utils.py", line
799, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
  File "C:\Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\cwsi\cwsi.py",
line 43, in
    import gdal
  File "C:\PROGRA~1/QGIS31~1.3/apps/qgis/./python\qgis\utils.py", line
799, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
ModuleNotFoundError: No module named 'gdal'


Python version: 3.9.5 (tags/v3.9.5:0a7dcbd, May  3 2021, 17:27:52) [MSC
v.1928 64 bit (AMD64)]
QGIS version: 3.18.3-Z?rich Z?rich, 735cc85be9
Python Path:

   - C:/PROGRA~1/QGIS31~1.3/apps/qgis/./python
   - C:/Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python
   -
   C:/Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins
   - C:/PROGRA~1/QGIS31~1.3/apps/qgis/./python/plugins
   - C:\Program Files\QGIS 3.18.3\binC:\Program Files (x86)\ArcGIS\bin
   - C:\Program Files\QGIS 3.18.3\bin\python39.zip
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39\DLLs
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib
   - C:\Program Files\QGIS 3.18.3\bin
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages\win32
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages\win32\lib
   - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages\Pythonwin
   - C:/Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/54219212/attachment.html>

From Matt.Wilkie at yukon.ca  Tue Jun  8 11:19:17 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 8 Jun 2021 18:19:17 +0000
Subject: [gdal-dev] cogger output has no overviews?
Message-ID: <a7c6b733b78348e8b64c921096df4fcb@yukon.ca>

Hi,

I took cogger for a first test drive and I'm confused. I'm relatively new to the world of Cloud Optimized Geotiffs, so I don't know if my confusion is about the COG format itself or cogger:

I fed a jpeg-in-geotiff file with external overviews (tif.ovr) and mask (tif.msk) to cogger. The output contains neither overviews or mask. Is that the expected result?

It's my understanding not having overviews is the rare case, and do that only if you know what you're doing (I don't!). Is there something I should be doing to keep or regenerate the overviews?

Gdalinfo reports for in and output attached. Gdal's validate-cog python script says the output is a valid cog, also attached.

Best,

Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/74896086/attachment-0001.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: cogger-out-info.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/74896086/attachment-0004.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: input-info.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/74896086/attachment-0005.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: input-validate.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/74896086/attachment-0006.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: cogger-out-validate.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/74896086/attachment-0007.txt>

From Matt.Wilkie at yukon.ca  Tue Jun  8 11:21:15 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 8 Jun 2021 18:21:15 +0000
Subject: [gdal-dev] cogger output has no overviews?
In-Reply-To: <2c99a7648e274dd7bf541a64cac42451@yukon.ca>
References: <2c99a7648e274dd7bf541a64cac42451@yukon.ca>
Message-ID: <91b8846dd90b440bbaba14ef5320045a@yukon.ca>

I forgot to add: I tried adding the .ovr file in a manner similar to the Cogger readme example but got an error:

~~~
$ cogger -output test.tif SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers.tif SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers.tif.ovr

mucog write: load: cannot load multiple tifs if they contain overviews
~~~

-Matt

From: Matt.Wilkie
Sent: June 8, 2021 11:19 AM
To: Gdal Dev <gdal-dev at lists.osgeo.org>
Subject: cogger output has no overviews?

Hi,

I took cogger for a first test drive and I'm confused. I'm relatively new to the world of Cloud Optimized Geotiffs, so I don't know if my confusion is about the COG format itself or cogger:

I fed a jpeg-in-geotiff file with external overviews (tif.ovr) and mask (tif.msk) to cogger. The output contains neither overviews or mask. Is that the expected result?

It's my understanding not having overviews is the rare case, and do that only if you know what you're doing (I don't!). Is there something I should be doing to keep or regenerate the overviews?

Gdalinfo reports for in and output attached. Gdal's validate-cog python script says the output is a valid cog, also attached.

Best,

Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/d1e9d17f/attachment.html>

From idan at miara.com  Tue Jun  8 11:41:40 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 8 Jun 2021 21:41:40 +0300
Subject: [gdal-dev] QGIS - No module named GDAL
In-Reply-To: <CAC+90i8j+qhV4sw=vPM9mHo8cW76Ou37Ny67006Wn2S8O5r31A@mail.gmail.com>
References: <CAC+90i8j+qhV4sw=vPM9mHo8cW76Ou37Ny67006Wn2S8O5r31A@mail.gmail.com>
Message-ID: <CAEDrt38LVcarr4Zt5kkLGR9AyraE2UzZBBKC_VGC6hLLnXYHUA@mail.gmail.com>

Hi,

`import gdal` was deprecated. It got removed in 3.3.
Please use `from osgeo import gdal`

Idan.

On Tue, 8 Jun 2021, 21:11 Bill Eggers, <beggers359 at gmail.com> wrote:

> Somewhere between installing BlenderGIS, OSGEO4W testing version, and
> ArcGISPro, the QGIS plugins that relied on GDAL quit working. I?ve tried
> uninstalling and re-installing OSGEO4W and the standalone QGIS 3.18..3-2
> and a few other tips like specifying the Python path, but nothing worked. I
> suspect something happened when I was installing the BlenderGIS addon. It
> called for a separate installation of Python and GDAL wheel. I?ve copied
> the error message below. The problem isn?t just related to the QGIS CWSI
> plugin, this is just an example of what I see from several plugins. Can
> anyone help me fix this?
>
>
> Kind regards,
>
>
> Bill
>
>
> Couldn't load plugin 'cwsi' due to an error when calling its
> classFactory() method
> ModuleNotFoundError: No module named 'gdal'
>
> Traceback (most recent call last):
>   File "C:\PROGRA~1/QGIS31~1.3/apps/qgis/./python\qgis\utils.py", line 335, in _startPlugin
>     plugins[packageName] = package.classFactory(iface)
>   File "C:\Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\cwsi\__init__.py", line 35, in classFactory
>     from .cwsi import CWSI
>   File "C:\PROGRA~1/QGIS31~1.3/apps/qgis/./python\qgis\utils.py", line 799, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File "C:\Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\cwsi\cwsi.py", line 43, in
>     import gdal
>   File "C:\PROGRA~1/QGIS31~1.3/apps/qgis/./python\qgis\utils.py", line 799, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
> ModuleNotFoundError: No module named 'gdal'
>
>
> Python version: 3.9.5 (tags/v3.9.5:0a7dcbd, May  3 2021, 17:27:52) [MSC
> v.1928 64 bit (AMD64)]
> QGIS version: 3.18.3-Z?rich Z?rich, 735cc85be9
> Python Path:
>
>    - C:/PROGRA~1/QGIS31~1.3/apps/qgis/./python
>    - C:/Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python
>    -
>    C:/Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins
>    - C:/PROGRA~1/QGIS31~1.3/apps/qgis/./python/plugins
>    - C:\Program Files\QGIS 3.18.3\binC:\Program Files (x86)\ArcGIS\bin
>    - C:\Program Files\QGIS 3.18.3\bin\python39.zip
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39\DLLs
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib
>    - C:\Program Files\QGIS 3.18.3\bin
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages\win32
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages\win32\lib
>    - C:\PROGRA~1\QGIS31~1.3\apps\Python39\lib\site-packages\Pythonwin
>    - C:/Users/beggers/AppData/Roaming/QGIS/QGIS3\profiles\default/python
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/94f15625/attachment.html>

From thomas.bonfort at gmail.com  Tue Jun  8 12:05:04 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Tue, 8 Jun 2021 21:05:04 +0200
Subject: [gdal-dev] cogger output has no overviews?
In-Reply-To: <91b8846dd90b440bbaba14ef5320045a@yukon.ca>
References: <2c99a7648e274dd7bf541a64cac42451@yukon.ca>
 <91b8846dd90b440bbaba14ef5320045a@yukon.ca>
Message-ID: <CAOM3y2jb2_9CX+d4P0Q6WFqToFMvXS90-xXA1qigZpjtxEcd3A@mail.gmail.com>

Matt,
In the general case, cogger supports a tiff with internal overviews, i.e.
without a .tif.ovr sidecar file. The advanced usecase which takes multiple
files is a remnant of the time when gdaladdo was much slower than
successive runs of "gdal_translate -outsize 50% 50%", or for when you need
specific compression/tiling options for the overviews that gdaladdo does
not support.
In your scenario, you should delete your .tif.ovr file, run "gdaladdo -r
average myfile.tif 2 4 8 16 ..." and then "cogger myfile.tif"
Direct support for .tif.ovr files could be something we can support if
proposed as a pull request, but is not on our roadmap.
Regards,
Thomas

Le mar. 8 juin 2021 ? 20:21, <Matt.Wilkie at yukon.ca> a ?crit :

> I forgot to add: I tried adding the .ovr file in a manner similar to the
> Cogger readme example but got an error:
>
>
>
> ~~~
>
> $ cogger -output test.tif
> SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers.tif
> SPOT6_321_BeaverRiver_08Sep2018_NAD83_YAlbers.tif.ovr
>
>
>
> mucog write: load: cannot load multiple tifs if they contain overviews
>
> ~~~
>
>
>
> -Matt
>
>
>
> *From:* Matt.Wilkie
> *Sent:* June 8, 2021 11:19 AM
> *To:* Gdal Dev <gdal-dev at lists.osgeo.org>
> *Subject:* cogger output has no overviews?
>
>
>
> Hi,
>
>
>
> I took cogger for a first test drive and I?m confused. I?m relatively new
> to the world of Cloud Optimized Geotiffs, so I don?t know if my confusion
> is about the COG format itself or cogger:
>
>
>
> I fed a jpeg-in-geotiff file with external overviews (tif.ovr) and mask
> (tif.msk) to cogger. The output contains neither overviews or mask. Is that
> the expected result?
>
>
>
> It?s my understanding not having overviews is the rare case, and do that
> only if you know what you're doing (I don?t!). Is there something I should
> be doing to keep or regenerate the overviews?
>
>
>
> Gdalinfo reports for in and output attached. Gdal?s validate-cog python
> script says the output is a valid cog, also attached.
>
>
>
> Best,
>
>
>
> *Matt Wilkie*
>
> Geomatics Developer & Administrator
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | *Yukon.ca <http://yukon.ca/>*
>
> *Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.*
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/8291ebc0/attachment.html>

From Matt.Wilkie at yukon.ca  Tue Jun  8 12:21:31 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 8 Jun 2021 19:21:31 +0000
Subject: [gdal-dev] cogger output has no overviews?
In-Reply-To: <CAOM3y2jb2_9CX+d4P0Q6WFqToFMvXS90-xXA1qigZpjtxEcd3A@mail.gmail.com>
References: <2c99a7648e274dd7bf541a64cac42451@yukon.ca>
 <91b8846dd90b440bbaba14ef5320045a@yukon.ca>
 <CAOM3y2jb2_9CX+d4P0Q6WFqToFMvXS90-xXA1qigZpjtxEcd3A@mail.gmail.com>
Message-ID: <d6953fa71f2b4da6abbf75cc97601334@yukon.ca>

Thanks Thomas.

Does cogger need a  mask band to be internal as well, and not a sidecar file?

-Mat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/d1acbf81/attachment.html>

From thomas.bonfort at gmail.com  Tue Jun  8 12:27:45 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Tue, 8 Jun 2021 21:27:45 +0200
Subject: [gdal-dev] cogger output has no overviews?
In-Reply-To: <d6953fa71f2b4da6abbf75cc97601334@yukon.ca>
References: <2c99a7648e274dd7bf541a64cac42451@yukon.ca>
 <91b8846dd90b440bbaba14ef5320045a@yukon.ca>
 <CAOM3y2jb2_9CX+d4P0Q6WFqToFMvXS90-xXA1qigZpjtxEcd3A@mail.gmail.com>
 <d6953fa71f2b4da6abbf75cc97601334@yukon.ca>
Message-ID: <CAOM3y2gzVhkxa_AhqV78dQ5Q+UDH5x50GhxJOcYncFM4Uzj5oQ@mail.gmail.com>

Yes, it must be internal

Le mar. 8 juin 2021 ? 21:21, <Matt.Wilkie at yukon.ca> a ?crit :

> Thanks Thomas.
>
>
>
> Does cogger need a  mask band to be internal as well, and not a sidecar
> file?
>
>
>
> -Mat
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/e59afa39/attachment.html>

From even.rouault at spatialys.com  Tue Jun  8 13:08:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jun 2021 22:08:48 +0200
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS ones
Message-ID: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>

PSC,

We've had a request from NumFOCUS to align the titles of the GDAL 
sponsorship tiers with the ones of NumFOCUS, to limit the risk of 
confusion, which was one topic discussed during last meeting.

For reference, the ones of NumFOCUS are at 
https://numfocus.org/sponsors/become-a-sponsor, so to get consistent, 
our new levels would renamed as:

- Gold (previously Platinum): 50k

- Silver (previously Gold): 25k

- Bronze (previously Silver): 10k

This will help especially for actors that already have a relationship 
with NumFOCUS and can be confused by the current non-alignment.

NumFOCUS confirmed that companies that offer a sponsorship designated?to 
GDAL will receive both GDAL's benefits and NumFOCUS ones under that tier 
(if they don't already benefit from NumFOCUS sponsorship at a higher 
level because already sponsoring other NumFOCUS projects)

I'm +1 for that change. I don't anticipate sponsors to mind about that 
change. The different tiers and relative positioning with other actors 
is probably what matters to them, more than the absolute title of the 
tier. Anyway, we'll communicate that change to the current sponsors, and 
adapt our own documentation.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From schwehr at gmail.com  Tue Jun  8 14:59:18 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 8 Jun 2021 14:59:18 -0700
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS
 ones
In-Reply-To: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
References: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
Message-ID: <CACmBxyu0oBCpUkp5tZDRD71WbVyEaqd1k+40TnC5BG0wNdsYPg@mail.gmail.com>

+1 KurtS

On Tue, Jun 8, 2021 at 1:10 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> PSC,
>
> We've had a request from NumFOCUS to align the titles of the GDAL
> sponsorship tiers with the ones of NumFOCUS, to limit the risk of
> confusion, which was one topic discussed during last meeting.
>
> For reference, the ones of NumFOCUS are at
> https://numfocus.org/sponsors/become-a-sponsor, so to get consistent,
> our new levels would renamed as:
>
> - Gold (previously Platinum): 50k
>
> - Silver (previously Gold): 25k
>
> - Bronze (previously Silver): 10k
>
> This will help especially for actors that already have a relationship
> with NumFOCUS and can be confused by the current non-alignment.
>
> NumFOCUS confirmed that companies that offer a sponsorship designated to
> GDAL will receive both GDAL's benefits and NumFOCUS ones under that tier
> (if they don't already benefit from NumFOCUS sponsorship at a higher
> level because already sponsoring other NumFOCUS projects)
>
> I'm +1 for that change. I don't anticipate sponsors to mind about that
> change. The different tiers and relative positioning with other actors
> is probably what matters to them, more than the absolute title of the
> tier. Anyway, we'll communicate that change to the current sponsors, and
> adapt our own documentation.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/76841071/attachment-0001.html>

From warmerdam at pobox.com  Tue Jun  8 15:08:12 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 8 Jun 2021 18:08:12 -0400
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS
 ones
In-Reply-To: <CACmBxyu0oBCpUkp5tZDRD71WbVyEaqd1k+40TnC5BG0wNdsYPg@mail.gmail.com>
References: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
 <CACmBxyu0oBCpUkp5tZDRD71WbVyEaqd1k+40TnC5BG0wNdsYPg@mail.gmail.com>
Message-ID: <CA+YzLBegdMKSruQp2p=J4X2sY1-R9N5oWZEVSuyg2W=2T1OfVA@mail.gmail.com>

+1 FrankW

On Tue, Jun 8, 2021 at 5:59 PM Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 KurtS
>
> On Tue, Jun 8, 2021 at 1:10 PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> PSC,
>>
>> We've had a request from NumFOCUS to align the titles of the GDAL
>> sponsorship tiers with the ones of NumFOCUS, to limit the risk of
>> confusion, which was one topic discussed during last meeting.
>>
>> For reference, the ones of NumFOCUS are at
>> https://numfocus.org/sponsors/become-a-sponsor, so to get consistent,
>> our new levels would renamed as:
>>
>> - Gold (previously Platinum): 50k
>>
>> - Silver (previously Gold): 25k
>>
>> - Bronze (previously Silver): 10k
>>
>> This will help especially for actors that already have a relationship
>> with NumFOCUS and can be confused by the current non-alignment.
>>
>> NumFOCUS confirmed that companies that offer a sponsorship designated to
>> GDAL will receive both GDAL's benefits and NumFOCUS ones under that tier
>> (if they don't already benefit from NumFOCUS sponsorship at a higher
>> level because already sponsoring other NumFOCUS projects)
>>
>> I'm +1 for that change. I don't anticipate sponsors to mind about that
>> change. The different tiers and relative positioning with other actors
>> is probably what matters to them, more than the absolute title of the
>> tier. Anyway, we'll communicate that change to the current sponsors, and
>> adapt our own documentation.
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/6f13ec6f/attachment.html>

From schwehr at gmail.com  Tue Jun  8 15:08:20 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 8 Jun 2021 15:08:20 -0700
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <CA+YzLBdhX7KNU5D4FCdo+ctOP_BhJr_WWo2pf3QOTnZb67=Rnw@mail.gmail.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
 <CABUeae_qHiO4YU12M3+S=2uY-a2dSMeTts1P_AzjsuyMgPwMLA@mail.gmail.com>
 <BE12D012-A1D3-442C-BF9A-58A8DF344649@hobu.co>
 <CA+YzLBdhX7KNU5D4FCdo+ctOP_BhJr_WWo2pf3QOTnZb67=Rnw@mail.gmail.com>
Message-ID: <CACmBxyuRsJXf3KJj7QT0v+_-v3stiq9cknMh9ZgLk4pwyzpyZw@mail.gmail.com>

+1 KurtS

On Tue, Jun 8, 2021 at 9:19 AM Frank Warmerdam <warmerdam at pobox.com> wrote:

> +1 FrankW
>
> I do think we need to give ourselves (the PSC) some latitude on how
> proposals are solicited and evaluated.
>
> I am quite pleased with the characterization of the maintenance tasks.
>
> Best regards,
>
>
> On Tue, Jun 8, 2021 at 9:37 AM Howard Butler <howard at hobu.co> wrote:
>
>> +1 Howard
>>
>> > On Jun 8, 2021, at 7:31 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
>> >
>> > +1   Mateusz
>> >
>> > On Tue, 8 Jun 2021 at 12:50, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>> >>
>> >> Hi,
>> >>
>> >> Motion:
>> >>
>> >> adopt RFC 83: guidelines for the use of GDAL project sponsorship (
>> >> https://github.com/OSGeo/gdal/pull/3855 )
>> >>
>> >> Starting with my +1
>> >>
>> >> Even
>> >>
>> >> --
>> >> http://www.spatialys.com
>> >> My software is free, but my time generally not.
>> >>
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev at lists.osgeo.org
>> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>> > --
>> > Mateusz Loskot, http://mateusz.loskot.net
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | +1 650-701-7823
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/ebe94af7/attachment.html>

From sean.gillies at gmail.com  Tue Jun  8 16:12:16 2021
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 8 Jun 2021 17:12:16 -0600
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
Message-ID: <CAOodmJozgeXQKbs+bomaHPsf1TmeRX-HArDRqkvF64GFLpqiuQ@mail.gmail.com>

+1

On Tue, Jun 8, 2021 at 4:50 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Motion:
>
> adopt RFC 83: guidelines for the use of GDAL project sponsorship (
> https://github.com/OSGeo/gdal/pull/3855 )
>
> Starting with my +1
>
> Even
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210608/6dc2343d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jun  8 23:31:13 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 8 Jun 2021 23:31:13 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
Message-ID: <1623220273437-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> Motion:
> 
> adopt RFC 83: guidelines for the use of GDAL project sponsorship ( 
> https://github.com/OSGeo/gdal/pull/3855 )
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jun  8 23:31:59 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 8 Jun 2021 23:31:59 -0700 (MST)
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS
 ones
In-Reply-To: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
References: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
Message-ID: <1623220319829-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> PSC,
> 
> We've had a request from NumFOCUS to align the titles of the GDAL 
> sponsorship tiers with the ones of NumFOCUS, to limit the risk of 
> confusion, which was one topic discussed during last meeting.
> 
> For reference, the ones of NumFOCUS are at 
> https://numfocus.org/sponsors/become-a-sponsor, so to get consistent, 
> our new levels would renamed as:
> 
> - Gold (previously Platinum): 50k
> 
> - Silver (previously Gold): 25k
> 
> - Bronze (previously Silver): 10k
> 
> This will help especially for actors that already have a relationship 
> with NumFOCUS and can be confused by the current non-alignment.
> 
> NumFOCUS confirmed that companies that offer a sponsorship designated?to 
> GDAL will receive both GDAL's benefits and NumFOCUS ones under that tier 
> (if they don't already benefit from NumFOCUS sponsorship at a higher 
> level because already sponsoring other NumFOCUS projects)
> 
> I'm +1 for that change. I don't anticipate sponsors to mind about that 
> change. The different tiers and relative positioning with other actors 
> is probably what matters to them, more than the absolute title of the 
> tier. Anyway, we'll communicate that change to the current sponsors, and 
> adapt our own documentation.
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From howard at hobu.co  Wed Jun  9 07:18:26 2021
From: howard at hobu.co (Howard Butler)
Date: Wed, 9 Jun 2021 09:18:26 -0500
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS
 ones
In-Reply-To: <1623220319829-0.post@n6.nabble.com>
References: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
 <1623220319829-0.post@n6.nabble.com>
Message-ID: <764B0D2B-9C1F-48ED-BCDE-9B73916F9616@hobu.co>

+1

Howard

> On Jun 9, 2021, at 1:31 AM, jratike80 <jukka.rahkonen at maanmittauslaitos.fi> wrote:
> 
> +1
> 
> -Jukka Rahkonen-
> 
> 
> Even Rouault-2 wrote
>> PSC,
>> 
>> We've had a request from NumFOCUS to align the titles of the GDAL 
>> sponsorship tiers with the ones of NumFOCUS, to limit the risk of 
>> confusion, which was one topic discussed during last meeting.
>> 
>> For reference, the ones of NumFOCUS are at 
>> https://numfocus.org/sponsors/become-a-sponsor, so to get consistent, 
>> our new levels would renamed as:
>> 
>> - Gold (previously Platinum): 50k
>> 
>> - Silver (previously Gold): 25k
>> 
>> - Bronze (previously Silver): 10k
>> 
>> This will help especially for actors that already have a relationship 
>> with NumFOCUS and can be confused by the current non-alignment.
>> 
>> NumFOCUS confirmed that companies that offer a sponsorship designated to 
>> GDAL will receive both GDAL's benefits and NumFOCUS ones under that tier 
>> (if they don't already benefit from NumFOCUS sponsorship at a higher 
>> level because already sponsoring other NumFOCUS projects)
>> 
>> I'm +1 for that change. I don't anticipate sponsors to mind about that 
>> change. The different tiers and relative positioning with other actors 
>> is probably what matters to them, more than the absolute title of the 
>> tier. Anyway, we'll communicate that change to the current sponsors, and 
>> adapt our own documentation.
>> 
>> Even
>> 
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> 
>> _______________________________________________
>> gdal-dev mailing list
> 
>> gdal-dev at .osgeo
> 
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Wed Jun  9 07:45:04 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Jun 2021 16:45:04 +0200
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS
 ones
In-Reply-To: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
References: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
Message-ID: <591c10aa-0362-aa48-ae4b-c32bf236ec3d@spatialys.com>

Ok, so our documentation has been updated to reflect the renaming of the 
sponsorship tiers. The advisory council mailing list has been renamed to 
gdal-advisory-council at lists.osgeo.org (there's a remaining issue with 
the archives not appearing after the renaming. ticketed at 
https://trac.osgeo.org/osgeo/ticket/2611#comment:2)

Even

Le 08/06/2021 ? 22:08, Even Rouault a ?crit?:
> PSC,
>
> We've had a request from NumFOCUS to align the titles of the GDAL 
> sponsorship tiers with the ones of NumFOCUS, to limit the risk of 
> confusion, which was one topic discussed during last meeting.
>
> For reference, the ones of NumFOCUS are at 
> https://numfocus.org/sponsors/become-a-sponsor, so to get consistent, 
> our new levels would renamed as:
>
> - Gold (previously Platinum): 50k
>
> - Silver (previously Gold): 25k
>
> - Bronze (previously Silver): 10k
>
> This will help especially for actors that already have a relationship 
> with NumFOCUS and can be confused by the current non-alignment.
>
> NumFOCUS confirmed that companies that offer a sponsorship 
> designated?to GDAL will receive both GDAL's benefits and NumFOCUS ones 
> under that tier (if they don't already benefit from NumFOCUS 
> sponsorship at a higher level because already sponsoring other 
> NumFOCUS projects)
>
> I'm +1 for that change. I don't anticipate sponsors to mind about that 
> change. The different tiers and relative positioning with other actors 
> is probably what matters to them, more than the absolute title of the 
> tier. Anyway, we'll communicate that change to the current sponsors, 
> and adapt our own documentation.
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Wed Jun  9 08:39:17 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 9 Jun 2021 15:39:17 +0000
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
Message-ID: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>

I am getting tiff file size exceeded error but am using bigtiff creation options.

~~~
$ gdaladdo -r gauss ^
--config COMPRESS_OVERVIEW WEBP ^
--config PHOTOMETRIC_OVERVIEW YCBCR ^
--config INTERLEAVE_OVERVIEW PIXEL ^
--config QUALITY 87 ^
--config BIGTIFF YES ^
--config BIGTIFF_OVERVIEW YES ^
test.tif

0...10...20...ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
ERROR 1: An error occurred while writing a dirty block from GDALRasterBand::RasterIO
ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
ERROR 1: WriteEncodedTile/Strip() failed.
30...40...50...60...70...80...90...100 - done.
~~~

~~~
2021-06-09  08:35 AM     4,294,967,034 test.tif
2021-03-16  09:14 AM        21,765,697 test.tif.msk
~~~

Gdalinfo report attached.

GDAL 3.1.4, released 2020/10/20, Win10.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210609/bce7b223/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test.tif.info.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210609/bce7b223/attachment.txt>

From thomas.bonfort at gmail.com  Wed Jun  9 08:42:08 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Wed, 9 Jun 2021 17:42:08 +0200
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
In-Reply-To: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
References: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
Message-ID: <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>

Your initial test.tif file needs to be a bigtiff, i.e. have been
created with -co "BIGTIFF=YES". you can then drop the bigtiff config
arguments of your gdaladdo call.

--
thomas

On Wed, Jun 9, 2021 at 5:39 PM <Matt.Wilkie at yukon.ca> wrote:
>
> I am getting tiff file size exceeded error but am using bigtiff creation options.
>
>
>
> ~~~
>
> $ gdaladdo -r gauss ^
>
> --config COMPRESS_OVERVIEW WEBP ^
>
> --config PHOTOMETRIC_OVERVIEW YCBCR ^
>
> --config INTERLEAVE_OVERVIEW PIXEL ^
>
> --config QUALITY 87 ^
>
> --config BIGTIFF YES ^
>
> --config BIGTIFF_OVERVIEW YES ^
>
> test.tif
>
>
>
> 0...10...20...ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
>
> ERROR 1: An error occurred while writing a dirty block from GDALRasterBand::RasterIO
>
> ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
>
> ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
>
> ERROR 1: WriteEncodedTile/Strip() failed.
>
> 30...40...50...60...70...80...90...100 - done.
>
> ~~~
>
>
>
> ~~~
>
> 2021-06-09  08:35 AM     4,294,967,034 test.tif
>
> 2021-03-16  09:14 AM        21,765,697 test.tif.msk
>
> ~~~
>
>
>
> Gdalinfo report attached.
>
>
>
> GDAL 3.1.4, released 2020/10/20, Win10.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Thu Jun 10 10:31:52 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 10 Jun 2021 13:31:52 -0400
Subject: [gdal-dev] Renaming Sponsorships tiers to align with NumFOCUS
 ones
In-Reply-To: <591c10aa-0362-aa48-ae4b-c32bf236ec3d@spatialys.com>
References: <ed4a41a6-69a4-b367-e74c-b61f407a22b1@spatialys.com>
 <591c10aa-0362-aa48-ae4b-c32bf236ec3d@spatialys.com>
Message-ID: <d8887bb2-82be-f0b0-82b8-0eae53d501ff@mapgears.com>

Belated +1

Daniel



On 2021-06-09 10:45, Even Rouault wrote:
> Ok, so our documentation has been updated to reflect the renaming of the 
> sponsorship tiers. The advisory council mailing list has been renamed to 
> gdal-advisory-council at lists.osgeo.org (there's a remaining issue with 
> the archives not appearing after the renaming. ticketed at 
> https://trac.osgeo.org/osgeo/ticket/2611#comment:2)
> 
> Even
> 
> Le 08/06/2021 ? 22:08, Even Rouault a ?crit?:
>> PSC,
>>
>> We've had a request from NumFOCUS to align the titles of the GDAL 
>> sponsorship tiers with the ones of NumFOCUS, to limit the risk of 
>> confusion, which was one topic discussed during last meeting.
>>
>> For reference, the ones of NumFOCUS are at 
>> https://numfocus.org/sponsors/become-a-sponsor, so to get consistent, 
>> our new levels would renamed as:
>>
>> - Gold (previously Platinum): 50k
>>
>> - Silver (previously Gold): 25k
>>
>> - Bronze (previously Silver): 10k
>>
>> This will help especially for actors that already have a relationship 
>> with NumFOCUS and can be confused by the current non-alignment.
>>
>> NumFOCUS confirmed that companies that offer a sponsorship 
>> designated?to GDAL will receive both GDAL's benefits and NumFOCUS ones 
>> under that tier (if they don't already benefit from NumFOCUS 
>> sponsorship at a higher level because already sponsoring other 
>> NumFOCUS projects)
>>
>> I'm +1 for that change. I don't anticipate sponsors to mind about that 
>> change. The different tiers and relative positioning with other actors 
>> is probably what matters to them, more than the absolute title of the 
>> tier. Anyway, we'll communicate that change to the current sponsors, 
>> and adapt our own documentation.
>>
>> Even
>>


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From andrew at aitchison.me.uk  Thu Jun 10 12:21:39 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 10 Jun 2021 20:21:39 +0100 (BST)
Subject: [gdal-dev] clang-tidy configs for gdal ?
Message-ID: <911114f1-eefd-4336-3559-e8be233616ea@aitchison.me.uk>


I've discovered clang-tidy and am letting it loose on my gdal drives.
It is finding bugs and teaching me a lot about modern C++
but as well as 100k+ bugs it found but did not report in "non-user code"
it reports problems where I have used macros from the GDAL/CPL headers.

I will report or submit patches once I understand these issues;
in the mean time, are there any clang-tidy configs for gdal ?

I have read and will reread 
https://erouault.blogspot.com/2016/01/software-quality-improvements-in-gdal.html

Thanks,

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From schwehr at gmail.com  Thu Jun 10 13:11:19 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 10 Jun 2021 13:11:19 -0700
Subject: [gdal-dev] clang-tidy configs for gdal ?
In-Reply-To: <911114f1-eefd-4336-3559-e8be233616ea@aitchison.me.uk>
References: <911114f1-eefd-4336-3559-e8be233616ea@aitchison.me.uk>
Message-ID: <CACmBxysVEDj4thEUMOwFFJ-M4xdJtA7mUuihvcf9-gdmfkBRPA@mail.gmail.com>

My recommendation with clang-tidy is to start with all warnings disabled.
Then pick one that looks to be more likely to have constructive warnings.
Work on just those.  Then you can progressively add them.  And don't try to
deal with warnings for anything involving swig.

On Thu, Jun 10, 2021 at 12:34 PM Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

>
> I've discovered clang-tidy and am letting it loose on my gdal drives.
> It is finding bugs and teaching me a lot about modern C++
> but as well as 100k+ bugs it found but did not report in "non-user code"
> it reports problems where I have used macros from the GDAL/CPL headers.
>
> I will report or submit patches once I understand these issues;
> in the mean time, are there any clang-tidy configs for gdal ?
>
> I have read and will reread
>
> https://erouault.blogspot.com/2016/01/software-quality-improvements-in-gdal.html
>
> Thanks,
>
> --
> Andrew C. Aitchison                                     Kendal, UK
>                         andrew at aitchison.me.uk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210610/9eaa9907/attachment.html>

From mateusz at loskot.net  Thu Jun 10 13:31:25 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 10 Jun 2021 22:31:25 +0200
Subject: [gdal-dev] clang-tidy configs for gdal ?
In-Reply-To: <CACmBxysVEDj4thEUMOwFFJ-M4xdJtA7mUuihvcf9-gdmfkBRPA@mail.gmail.com>
References: <911114f1-eefd-4336-3559-e8be233616ea@aitchison.me.uk>
 <CACmBxysVEDj4thEUMOwFFJ-M4xdJtA7mUuihvcf9-gdmfkBRPA@mail.gmail.com>
Message-ID: <CABUeae8q_X20QUPxyRu=S3Y_iH3JY5jn-0Z2Tt5QJoeKHCo2nw@mail.gmail.com>

On Thu, 10 Jun 2021 at 22:11, Kurt Schwehr <schwehr at gmail.com> wrote:
>
> My recommendation with clang-tidy is to start with all warnings disabled.

Indeed, work with checks one by one, e.g. like here
https://github.com/libgeos/geos/commit/b7101be6533a1273f715a3309889c23b7ae02e4f
https://github.com/libgeos/geos/commit/6f0c2bac087180369760e9fed244bb797582a3b2

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From dmorissette at mapgears.com  Thu Jun 10 15:13:03 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 10 Jun 2021 18:13:03 -0400
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
Message-ID: <26cd11ea-f867-15a2-eb43-2a6f697a757f@mapgears.com>

+1

Daniel

On 2021-06-08 06:50, Even Rouault wrote:
> Hi,
> 
> Motion:
> 
> adopt RFC 83: guidelines for the use of GDAL project sponsorship ( 
> https://github.com/OSGeo/gdal/pull/3855 )
> 
> Starting with my +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From even.rouault at spatialys.com  Fri Jun 11 02:24:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jun 2021 11:24:11 +0200
Subject: [gdal-dev] Motion: adopt RFC 83: guidelines for the use of GDAL
 project sponsorship
In-Reply-To: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
References: <434bccf3-7467-3f2c-ed56-c54a4440f77b@spatialys.com>
Message-ID: <2316a705-2a60-d37b-bb93-85f316e11211@spatialys.com>

Hi,

motion passed with +1 from PSC members: MateuszL, HowardB, FrankW, 
KurtS, SeanG, JukkaR, DanielM and myself

Even

Le 08/06/2021 ? 12:50, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> adopt RFC 83: guidelines for the use of GDAL project sponsorship ( 
> https://github.com/OSGeo/gdal/pull/3855 )
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From rajeshreddy82 at gmail.com  Fri Jun 11 05:20:07 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Fri, 11 Jun 2021 05:20:07 -0700 (MST)
Subject: [gdal-dev] geopackage size limitation for Vector tiles
Message-ID: <1623414007739-0.post@n6.nabble.com>

Team,

We are planning to use geopackage to store vector tiles (MapBox Vector Tiles
format) as BLOBS along with attribute information. Do we have any size
limitations in geopackage to store vector tiles? Will geopackage support a
huge number of tiles?

Are you envisioning any complications here?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Jun 11 05:24:03 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jun 2021 14:24:03 +0200
Subject: [gdal-dev] geopackage size limitation for Vector tiles
In-Reply-To: <1623414007739-0.post@n6.nabble.com>
References: <1623414007739-0.post@n6.nabble.com>
Message-ID: <35237cc9-ae96-40f5-2983-53c21af49e32@spatialys.com>

Rajesh,

Each SQLite BLOB can be up to 1 GB itself, and the whole file several 
hundreds of TB. See https://www.sqlite.org/limits.html

There have been experiments to store MVT in GeoPackage (not adopted yet 
in GDAL). See https://www.geopackage.org/extensions.html

Even

Le 11/06/2021 ? 14:20, MRRAJESH a ?crit?:
> Team,
>
> We are planning to use geopackage to store vector tiles (MapBox Vector Tiles
> format) as BLOBS along with attribute information. Do we have any size
> limitations in geopackage to store vector tiles? Will geopackage support a
> huge number of tiles?
>
> Are you envisioning any complications here?
>
> Regards,
> Rajesh
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From bheberlein at wisc.edu  Fri Jun 11 12:30:26 2021
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Fri, 11 Jun 2021 19:30:26 +0000
Subject: [gdal-dev] Edge Artifacts with GDAL Warp & Geolocation Arrays
In-Reply-To: <DM6PR06MB4377F5118125FEFDE5F2ABB5BA349@DM6PR06MB4377.namprd06.prod.outlook.com>
References: <DM6PR06MB4377F5118125FEFDE5F2ABB5BA349@DM6PR06MB4377.namprd06.prod.outlook.com>
Message-ID: <DM6PR06MB43770F676C282625CB1CF150BA349@DM6PR06MB4377.namprd06.prod.outlook.com>

Hello all,

I have been using gdalwarp? to georeference sensor data with geolocation arrays.

I have observed that GDAL assigns values to pixels that clearly fall outside the geolocation footprint, producing some funny artifacts at the image edges. For example, see the image here<https://pasteboard.co/K69DUni.png>.

(Sensor data over Google satellite basemap; red dots are geolocation points.)

Notice how the data values are 'extruded' from the edges.

This occurs with various interpolation methods (all the ones I tried), including nearest neighbor, average & bilinear. Why does this happen? How can I go about fixing this?

Ideally, any pixel in the output grid which lies more than 1 pixel width from any of the geolocation points (red dots) would be assigned to no-data.

My code is very straightforward, basically I open the raw sensor image & geolocation array (a.k.a. input geometry map or IGM) with GDAL & then assign geolocation metadata to the sensor image before warping:
# Geolocation domain metadata
geoloc_metadata = {
    'SRS': WGS84_UTM16N.ExportToWkt(),
    'X_BAND': '1',
    'X_DATASET': str(igm_img_file),
    'Y_BAND': '2',
    'Y_DATASET': str(igm_img_file),
    'PIXEL_OFFSET': '0',
    'LINE_OFFSET': '0',
    'PIXEL_STEP': '1',
    'LINE_STEP': '1',
}

# Set geolocation domain metadata on dataset to be warped
dn_img_ds.SetMetadata(geoloc_metadata, 'GEOLOCATION')

x_min, y_min = igm[:2].min(axis=(1,2))
x_max, y_max = igm[:2].max(axis=(1,2))

# warp_options = gdal.WarpOptions(warpMemoryLimit=)
warped_ds = gdal.Warp(f'/warped.tif', dn_img_ds,
                      outputBounds=(x_min, y_min, x_max, y_max),
                      xRes=1.0,
                      yRes=1.0,
                      resampleAlg='near',
                      dstSRS=WGS84_UTM16N,
                      srcNodata=None,
                      dstNodata=-9999,
                      multithread=True,
                      targetAlignedPixels=True,
                      outputType=get_gdal_dtype(np.int16),
                      geoloc=True)

Any insight would be much appreciated. Cheers!

     ? Brendan Heberlein
            Research Intern, BS
            Townsend Lab
            University of Wisconsin - Madison
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210611/9c552243/attachment.html>

From even.rouault at spatialys.com  Fri Jun 11 12:49:43 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jun 2021 21:49:43 +0200
Subject: [gdal-dev] Edge Artifacts with GDAL Warp & Geolocation Arrays
In-Reply-To: <DM6PR06MB43770F676C282625CB1CF150BA349@DM6PR06MB4377.namprd06.prod.outlook.com>
References: <DM6PR06MB4377F5118125FEFDE5F2ABB5BA349@DM6PR06MB4377.namprd06.prod.outlook.com>
 <DM6PR06MB43770F676C282625CB1CF150BA349@DM6PR06MB4377.namprd06.prod.outlook.com>
Message-ID: <714aada6-b784-9e73-fd4a-d5f1220678b7@spatialys.com>

Hi,


I believe https://github.com/OSGeo/gdal/pull/3964 should improve this


Even


Le 11/06/2021 ? 21:30, Brendan Heberlein via gdal-dev a ?crit?:
> Hello all,
>
> I have been using |gdalwarp|? to georeference sensor data with 
> geolocation arrays.
>
> I have observed that GDAL assigns values to pixels that clearly fall 
> outside the geolocation footprint, producing some funny artifacts at 
> the image edges. For example, see the image here 
> <https://pasteboard.co/K69DUni.png>.
>
> (Sensor data over Google satellite basemap; red dots are geolocation 
> points.)
>
> Notice how the data values are 'extruded' from the edges.
>
> This occurs with various interpolation methods (all the ones I tried), 
> including nearest neighbor, average & bilinear. Why does this happen? 
> How can I go about fixing this?
>
> Ideally, any pixel in the output grid which lies more than 1 pixel 
> width from any of the geolocation points (red dots) would be assigned 
> to no-data.
>
> My code is very straightforward, basically I open the raw sensor image 
> & geolocation array (a.k.a. input geometry map or IGM) with GDAL & 
> then assign geolocation metadata to the sensor image before warping:
>
>     # Geolocation domain metadata
>     geoloc_metadata = {
>     ? ? 'SRS': WGS84_UTM16N.ExportToWkt(),
>     ? ? 'X_BAND': '1',
>     ? ? 'X_DATASET': str(igm_img_file),
>     ? ? 'Y_BAND': '2',
>     ? ? 'Y_DATASET': str(igm_img_file),
>     ? ? 'PIXEL_OFFSET': '0',
>     ? ? 'LINE_OFFSET': '0',
>     ? ? 'PIXEL_STEP': '1',
>     ? ? 'LINE_STEP': '1',
>     }
>
>     # Set geolocation domain metadata on dataset to be warped
>     dn_img_ds.SetMetadata(geoloc_metadata, 'GEOLOCATION')
>
>     x_min, y_min = igm[:2].min(axis=(1,2))
>     x_max, y_max = igm[:2].max(axis=(1,2))
>
>     # warp_options = gdal.WarpOptions(warpMemoryLimit=)
>     warped_ds = gdal.Warp(f'/warped.tif', dn_img_ds,
>     outputBounds=(x_min, y_min, x_max, y_max),
>     ? ? ? ? ? ? ? ? ? ? ? xRes=1.0,
>     ? ? ? ? ? ? ? ? ? ? ? yRes=1.0,
>     resampleAlg='near',
>     dstSRS=WGS84_UTM16N,
>     ? ? ? ? ? ? ? ? ? ? ? srcNodata=None,
>     ? ? ? ? ? ? ? ? ? ? ? dstNodata=-9999,
>     ? ? ? ? ? ? ? ? ? ? ? multithread=True,
>     targetAlignedPixels=True,
>     outputType=get_gdal_dtype(np.int16),
>     ? ? ? ? ? ? ? ? ? ? ? geoloc=True)
>
>
> Any insight would be much appreciated. Cheers!
>
> ? ? ?? Brendan Heberlein
> ? ? ? ? ? ? Research Intern, BS
> ? ? ? ? ? ? Townsend Lab
> ? ? ? ? ? ? University of Wisconsin - Madison
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210611/c6bdf7d2/attachment-0001.html>

From bheberlein at wisc.edu  Sat Jun 12 21:15:44 2021
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Sun, 13 Jun 2021 04:15:44 +0000
Subject: [gdal-dev] Edge Artifacts with GDAL Warp & Geolocation Arrays
In-Reply-To: <714aada6-b784-9e73-fd4a-d5f1220678b7@spatialys.com>
References: <DM6PR06MB4377F5118125FEFDE5F2ABB5BA349@DM6PR06MB4377.namprd06.prod.outlook.com>
 <DM6PR06MB43770F676C282625CB1CF150BA349@DM6PR06MB4377.namprd06.prod.outlook.com>,
 <714aada6-b784-9e73-fd4a-d5f1220678b7@spatialys.com>
Message-ID: <DM6PR06MB437785FD520C31979ADCBBD8BA339@DM6PR06MB4377.namprd06.prod.outlook.com>

Hi Even,

thanks for your response. I will try to test this with the updated code, although I have yet to learn the compilation process.

I will let you know if I am able to verify this is fixed.

All the best,
     ? Brendan Heberlein
            Research Intern, BS
            Townsend Lab
            University of Wisconsin - Madison


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Friday, June 11, 2021 2:49 PM
To: Brendan Heberlein <bheberlein at wisc.edu>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Edge Artifacts with GDAL Warp & Geolocation Arrays


Hi,


I believe https://github.com/OSGeo/gdal/pull/3964 should improve this


Even


Le 11/06/2021 ? 21:30, Brendan Heberlein via gdal-dev a ?crit :
Hello all,

I have been using gdalwarp? to georeference sensor data with geolocation arrays.

I have observed that GDAL assigns values to pixels that clearly fall outside the geolocation footprint, producing some funny artifacts at the image edges. For example, see the image here<https://pasteboard.co/K69DUni.png>.

(Sensor data over Google satellite basemap; red dots are geolocation points.)

Notice how the data values are 'extruded' from the edges.

This occurs with various interpolation methods (all the ones I tried), including nearest neighbor, average & bilinear. Why does this happen? How can I go about fixing this?

Ideally, any pixel in the output grid which lies more than 1 pixel width from any of the geolocation points (red dots) would be assigned to no-data.

My code is very straightforward, basically I open the raw sensor image & geolocation array (a.k.a. input geometry map or IGM) with GDAL & then assign geolocation metadata to the sensor image before warping:
# Geolocation domain metadata
geoloc_metadata = {
    'SRS': WGS84_UTM16N.ExportToWkt(),
    'X_BAND': '1',
    'X_DATASET': str(igm_img_file),
    'Y_BAND': '2',
    'Y_DATASET': str(igm_img_file),
    'PIXEL_OFFSET': '0',
    'LINE_OFFSET': '0',
    'PIXEL_STEP': '1',
    'LINE_STEP': '1',
}

# Set geolocation domain metadata on dataset to be warped
dn_img_ds.SetMetadata(geoloc_metadata, 'GEOLOCATION')

x_min, y_min = igm[:2].min(axis=(1,2))
x_max, y_max = igm[:2].max(axis=(1,2))

# warp_options = gdal.WarpOptions(warpMemoryLimit=)
warped_ds = gdal.Warp(f'/warped.tif', dn_img_ds,
                      outputBounds=(x_min, y_min, x_max, y_max),
                      xRes=1.0,
                      yRes=1.0,
                      resampleAlg='near',
                      dstSRS=WGS84_UTM16N,
                      srcNodata=None,
                      dstNodata=-9999,
                      multithread=True,
                      targetAlignedPixels=True,
                      outputType=get_gdal_dtype(np.int16),
                      geoloc=True)

Any insight would be much appreciated. Cheers!

     ? Brendan Heberlein
            Research Intern, BS
            Townsend Lab
            University of Wisconsin - Madison



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210613/19437f15/attachment-0001.html>

From ahmettemiz88 at gmail.com  Sun Jun 13 11:45:18 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Sun, 13 Jun 2021 21:45:18 +0300
Subject: [gdal-dev] export to geometrycollection.
Message-ID: <CAJKO1Ys5tyepu9zyMC+4gAqXUsWxav1Wu8Jk3NNsDsN5wyObTA@mail.gmail.com>

Hi,
I exported the geometry to geojson as:

OGRMultiPolygon * poOGRMultiPolygon= (OGRMultiPolygon * ) unionCascaded;
    //
 char * pszJSon= poOGRMultiPolygon->exportToJson();

this generates:
 "type": "MultiPolygon", "coordinates": ....

But.  I need geometrycollection.
How can I do that?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210613/1e7b37c8/attachment.html>

From even.rouault at spatialys.com  Sun Jun 13 11:53:16 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 13 Jun 2021 20:53:16 +0200
Subject: [gdal-dev] export to geometrycollection.
In-Reply-To: <CAJKO1Ys5tyepu9zyMC+4gAqXUsWxav1Wu8Jk3NNsDsN5wyObTA@mail.gmail.com>
References: <CAJKO1Ys5tyepu9zyMC+4gAqXUsWxav1Wu8Jk3NNsDsN5wyObTA@mail.gmail.com>
Message-ID: <1094b304-4e70-0d90-2e4b-315f2f672bac@spatialys.com>

Ahmet,

use the OGRGeometryFactory::forceTo(geom, wkbGeometrycollection) method:

https://gdal.org/api/ogrgeometry_cpp.html#classOGRGeometryFactory_1a26120382ccfec8ac4b5f932dd3a67c5f

Even

Le 13/06/2021 ? 20:45, Ahmet Temiz a ?crit?:
> Hi,
> I exported the geometry to geojson as:
>
> OGRMultiPolygon * poOGRMultiPolygon= (OGRMultiPolygon * ) unionCascaded;
> ? ? //
> ?char * pszJSon= poOGRMultiPolygon->exportToJson();
>
> this generates:
> ?"type": "MultiPolygon", "coordinates": ....
>
> But.? I need geometrycollection.
> How can I do that?
>
> regards
>
> -- 
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Deprem? Dairesi Ba?kanl???
>
>
> ________________________
>
> Ahmet Temiz
> Geological Eng.
>
> Disaster and Emergency Management
> of Presidency
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210613/2708633a/attachment.html>

From b.phamhuu at jacobs-university.de  Mon Jun 14 01:49:29 2021
From: b.phamhuu at jacobs-university.de (Bang Pham Huu)
Date: Mon, 14 Jun 2021 10:49:29 +0200
Subject: [gdal-dev] Does gdal support Military Grid Reference System (MGRS)
 grid?
Message-ID: <910cf7e1-f68c-33a6-657f-552f8430dd72@jacobs-university.de>

Hello,

I've questions regarding Military Grid Reference System (*MGRS*)grid data.

- Does gdal support this kind of grid?

- If yes, does it exist from EPSG coordinate reference system like UTM CRS?

Thanks,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210614/2417ddf3/attachment.html>

From bradh at frogmouth.net  Mon Jun 14 02:44:18 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 14 Jun 2021 19:44:18 +1000
Subject: [gdal-dev] Does gdal support Military Grid Reference System
 (MGRS) grid?
In-Reply-To: <910cf7e1-f68c-33a6-657f-552f8430dd72@jacobs-university.de>
References: <910cf7e1-f68c-33a6-657f-552f8430dd72@jacobs-university.de>
Message-ID: <1755311.FCOZff6kzb@audax>

On Monday, 14 June 2021 6:49:29 PM AEST Bang Pham Huu wrote:
> I've questions regarding Military Grid Reference System (*MGRS*)grid data.
> 
> - Does gdal support this kind of grid?
Yes, but perhaps not as you might expect. Its supported in NITF.

> - If yes, does it exist from EPSG coordinate reference system like UTM CRS?
EPSG rejected the inclusion of MGRS on 2010-09-24. The decision was:
"Request rejected. Grid systems are out of scope of the EPSG dataset. Although 
based on CRSs they have additional attrubutes describing the grid cell 
distribution which are not catered for in the ISO 19111:2007 or EPSG data 
models."
(typo in the original)

What are you actually hoping to do with MGRS? If you can explain the use case, 
maybe a more meaningful answer could be possible.

Brad



From mwtoews at gmail.com  Mon Jun 14 04:03:57 2021
From: mwtoews at gmail.com (Mike Taves)
Date: Mon, 14 Jun 2021 23:03:57 +1200
Subject: [gdal-dev] Does gdal support Military Grid Reference System
 (MGRS) grid?
In-Reply-To: <910cf7e1-f68c-33a6-657f-552f8430dd72@jacobs-university.de>
References: <910cf7e1-f68c-33a6-657f-552f8430dd72@jacobs-university.de>
Message-ID: <CAM2FmMov_CyYxPBA1jCdovFxPg5hO4wRMRbMqxncJD7wiCOLiQ@mail.gmail.com>

On Mon, 14 Jun 2021 at 20:49, Bang Pham Huu
<b.phamhuu at jacobs-university.de> wrote:
> I've questions regarding Military Grid Reference System (MGRS) grid data.

If it's simple coordinate conversions to/from MGRS and UTM, a decent
library is GeographicLib:

https://geographiclib.sourceforge.io/html/GeoConvert.1.html
https://geographiclib.sourceforge.io/cgi-bin/GeoConvert
https://geographiclib.sourceforge.io/html/classGeographicLib_1_1MGRS.html

From b.phamhuu at jacobs-university.de  Mon Jun 14 04:08:42 2021
From: b.phamhuu at jacobs-university.de (Bang Pham Huu)
Date: Mon, 14 Jun 2021 13:08:42 +0200
Subject: [gdal-dev] Does gdal support Military Grid Reference System
 (MGRS) grid?
In-Reply-To: <CAM2FmMov_CyYxPBA1jCdovFxPg5hO4wRMRbMqxncJD7wiCOLiQ@mail.gmail.com>
References: <910cf7e1-f68c-33a6-657f-552f8430dd72@jacobs-university.de>
 <CAM2FmMov_CyYxPBA1jCdovFxPg5hO4wRMRbMqxncJD7wiCOLiQ@mail.gmail.com>
Message-ID: <51a0c624-bf4a-b1ba-8be5-4db3a1c8fc5e@jacobs-university.de>

Thanks, my question is about like:

- using gdal_translate to subset an interested area from the tiff file
in MGRS grid.

- using gdalwarp which I can project a 2D Tiff file in MGRS to EPSG:4326
CRS for example.

Sorry, I don't have any MGRS file yet to understand the data, so I
needed to ask the GDAL mailing list first.

On 6/14/21 1:03 PM, Mike Taves wrote:
> On Mon, 14 Jun 2021 at 20:49, Bang Pham Huu
> <b.phamhuu at jacobs-university.de> wrote:
>> I've questions regarding Military Grid Reference System (MGRS) grid data.
> If it's simple coordinate conversions to/from MGRS and UTM, a decent
> library is GeographicLib:
>
> https://geographiclib.sourceforge.io/html/GeoConvert.1.html
> https://geographiclib.sourceforge.io/cgi-bin/GeoConvert
> https://geographiclib.sourceforge.io/html/classGeographicLib_1_1MGRS.html

From steve.pritchard at bto.org  Mon Jun 14 08:18:50 2021
From: steve.pritchard at bto.org (Steve Pritchard)
Date: Mon, 14 Jun 2021 16:18:50 +0100
Subject: [gdal-dev] OCI vector driver - could support be added for Oracle
 Wallet? (simple change?)
Message-ID: <CAF7Aqmw8S3woi9nEStuNUWNKG3-87KPNF++-AQDgat56c3wKfA@mail.gmail.com>

Oracle Wallet provides secure storage for usernames and passwords on client
devices. We use this to avoid having usernames and passwords in scripts,
etc. For details see "Using The Secure External Password Store (Doc ID
340559.1)" on the Oracle Support website.

I have tried using Oracle Wallet with ogrinfo and the OCI driver, e.g.:

ogrinfo OCI:/@db_name:table_name


however I always get:

ERROR 1: ORA-01017: invalid username/password; logon denied
 in <unnamed>
ERROR 1: ORA-01017: invalid username/password; logon denied
 in <unnamed>
FAILURE:
Unable to open datasource `OCI:..' with the following drivers.


I have tried this both with the bundled Oracle Instant Client and with the
latest Instant Client from the Oracle website. I've also tested Oracle
Wallet with other open source software (e.g. Perl DBI), and that works fine.

Having looked at the source code for ogrocisession.cpp, it looks as though
a simple change might be sufficient to make this work...

I think that the reason it doesn't work is because the "eCred" parameter
needs to be OCI_CRED_EXT for Oracle Wallet. But eCred is set
to OCI_CRED_RDBMS, except where OS authentication is being used.

So if pszUseridIn = "" and pszPasswordIn = "", can eCred be set to
OCI_CRED_EXT?

(Notes on using Oracle Wallet with Oracle OCI can be found in the answer to
this stackoverflow question
<https://stackoverflow.com/questions/21762885/using-oracle-wallet-authentication-from-oci>
)

Steve
-- 
Steve Pritchard
Database Developer

British Trust for Ornithology, The Nunnery, Thetford, Norfolk IP24 2PU, UK
Tel: +44 (0)1842 750050, fax: +44 (0)1842 750030
Registered Charity No 216652 (England & Wales) No SC039193 (Scotland)
Company Limited by Guarantee No 357284 (England & Wales)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210614/1383d8d3/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jun 14 08:23:34 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jun 2021 17:23:34 +0200
Subject: [gdal-dev] OCI vector driver - could support be added for
 Oracle Wallet? (simple change?)
In-Reply-To: <CAF7Aqmw8S3woi9nEStuNUWNKG3-87KPNF++-AQDgat56c3wKfA@mail.gmail.com>
References: <CAF7Aqmw8S3woi9nEStuNUWNKG3-87KPNF++-AQDgat56c3wKfA@mail.gmail.com>
Message-ID: <402aeda2-9b94-c1d8-0788-ac7187bacffe@spatialys.com>

Steve,

I believe https://github.com/OSGeo/gdal/pull/3784 has fixed that (in the 
master branch)

Even

Le 14/06/2021 ? 17:18, Steve Pritchard a ?crit?:
> Oracle Wallet provides secure storage for usernames and passwords on 
> client devices. We use this to avoid having usernames and passwords in 
> scripts, etc. For details see "Using The Secure External Password 
> Store (Doc ID 340559.1)" on the Oracle Support website.
>
> I have tried using Oracle Wallet with ogrinfo and the OCI driver, e.g.:
>
>     ogrinfo OCI:/@db_name:table_name
>
>
> however I always get:
>
>     ERROR 1: ORA-01017: invalid username/password; logon denied
>     ?in <unnamed>
>     ERROR 1: ORA-01017: invalid username/password; logon denied
>     ?in <unnamed>
>     FAILURE:
>     Unable to open datasource `OCI:..' with the following drivers.
>
>
> I have tried this both with the bundled Oracle Instant Client and with 
> the latest Instant Client from the Oracle website. I've also tested 
> Oracle Wallet with other open source software (e.g. Perl DBI), and 
> that works fine.
>
> Having looked at the source?code for?ogrocisession.cpp, it looks as 
> though a simple change might be sufficient to make this work...
>
> I think that the reason it doesn't work is because the "eCred" 
> parameter needs to be OCI_CRED_EXT for Oracle Wallet. But eCred is set 
> to?OCI_CRED_RDBMS, except where OS authentication is being used.
>
> So if?pszUseridIn = "" and?pszPasswordIn = "", can eCred be set to 
> OCI_CRED_EXT?
>
> (Notes on using Oracle Wallet with Oracle OCI can be found in the 
> answer tothis stackoverflow question 
> <https://stackoverflow.com/questions/21762885/using-oracle-wallet-authentication-from-oci>)
>
> Steve
> -- 
> Steve Pritchard
> Database Developer
>
> British Trust for Ornithology, The Nunnery, Thetford, Norfolk IP24 
> 2PU, UK
> Tel: +44 (0)1842 750050, fax: +44 (0)1842 750030
> Registered Charity No 216652 (England & Wales) No SC039193 (Scotland)
> Company Limited by Guarantee No 357284 (England & Wales)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210614/832938dc/attachment.html>

From Matt.Wilkie at yukon.ca  Mon Jun 14 12:12:20 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Mon, 14 Jun 2021 19:12:20 +0000
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
In-Reply-To: <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>
References: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
 <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>
Message-ID: <1c2bd47049a44a21aa638a015e735225@yukon.ca>

> Your initial test.tif file needs to be a bigtiff, i.e. have been
> created with -co "BIGTIFF=YES". you can then drop the bigtiff 
> config arguments of your gdaladdo call.

Ahh, thanks Thomas, that indeed is the problem. 

Unfortunately for me it means in this case I'm stuck, as the original is jpeg-tiff and I don't want to pay the penalty of another decompress-recompress cycle to change to big tiff. However at least I know what's going on now.

-Matt

From even.rouault at spatialys.com  Mon Jun 14 12:44:56 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jun 2021 21:44:56 +0200
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
In-Reply-To: <1c2bd47049a44a21aa638a015e735225@yukon.ca>
References: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
 <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>
 <1c2bd47049a44a21aa638a015e735225@yukon.ca>
Message-ID: <35b032a0-74ef-8f90-bddd-c7e91e398177@spatialys.com>

Matt,

You can create external overviews with the -ro switch

Even

Le 14/06/2021 ? 21:12, Matt.Wilkie at yukon.ca a ?crit?:
>> Your initial test.tif file needs to be a bigtiff, i.e. have been
>> created with -co "BIGTIFF=YES". you can then drop the bigtiff
>> config arguments of your gdaladdo call.
> Ahh, thanks Thomas, that indeed is the problem.
>
> Unfortunately for me it means in this case I'm stuck, as the original is jpeg-tiff and I don't want to pay the penalty of another decompress-recompress cycle to change to big tiff. However at least I know what's going on now.
>
> -Matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Mon Jun 14 13:12:25 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Mon, 14 Jun 2021 20:12:25 +0000
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
In-Reply-To: <35b032a0-74ef-8f90-bddd-c7e91e398177@spatialys.com>
References: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
 <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>
 <1c2bd47049a44a21aa638a015e735225@yukon.ca>
 <35b032a0-74ef-8f90-bddd-c7e91e398177@spatialys.com>
Message-ID: <065a999748334766a603af76ff368173@yukon.ca>

> You can create external overviews with the -ro switch

Yeah, I have those. I was trying to create internal ones instead in order to use cogger ;-)

(And behind all of this, a weeping and wailing and gnashing of teeth at the upstream person or persons who decided that creating jpegs and throwing away the originals was "good enough". Oh well, my history is littered with bad calls too.)

Matt

From even.rouault at spatialys.com  Tue Jun 15 08:38:46 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Jun 2021 17:38:46 +0200
Subject: [gdal-dev] Fwd: [Tiff] Caution if using mozjpeg and IJG libjpeg 9d
In-Reply-To: <3c970fe0-8dcc-68f4-8135-083c222cfc3a@spatialys.com>
References: <3c970fe0-8dcc-68f4-8135-083c222cfc3a@spatialys.com>
Message-ID: <fcdbcef5-84e4-6646-6180-2cf8ca960441@spatialys.com>

Relevant also for this group. Internal libtiff has just been patched 
with the changes mentioned below.

I'd recommend sticking with libjpeg-turbo (preferred option) or IJG 
libjpeg 6b, 7.x or 8.x

Even


-------- Message transf?r? --------
Sujet?: 	[Tiff] Caution if using mozjpeg and IJG libjpeg 9d
Date?: 	Tue, 15 Jun 2021 17:33:44 +0200
De?: 	Even Rouault <even.rouault at spatialys.com>
Pour?: 	tiff at lists.osgeo.org <tiff at lists.osgeo.org>



Hi,

A word of caution for those using mozjpeg or IJG libjpeg 9d for creating 
JPEG-in-TIFF files. It has been found that current libtiff releases can 
generate non-conformant (mozjpeg case) or broken (libjpeg 9d case) 
files. See https://gitlab.com/libtiff/libtiff/-/issues/266 for more details.

https://gitlab.com/libtiff/libtiff/-/merge_requests/254 and 
https://gitlab.com/libtiff/libtiff/-/merge_requests/255 have been merged 
with workarounds to make libtiff work with those JPEG libraries.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
Tiff mailing list
Tiff at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/tiff

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210615/94a8e4c9/attachment.html>

From briansia93 at gmail.com  Tue Jun 15 21:41:21 2021
From: briansia93 at gmail.com (zerovirus123)
Date: Tue, 15 Jun 2021 21:41:21 -0700 (MST)
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
Message-ID: <1623818481513-0.post@n6.nabble.com>

I am trying to run some GDAL operations inside my Anaconda environment.
However once I upgraded my gdal and other packages the program crashed.

Environment: Anaconda

Package               Version                  Channel
GDAL                   3.3.0                      pipwin
fiona                     1.8.20                    pipwin
geopandas           0.9.0                      pipwin
shapely                1.7.1                      pipwin
pyproj                   2.6.1.post1            py37hcfa1391_1

Here is the offending code.

crsGeo = osgeo.osr.SpatialReference()
crsGeo.ImportFromEPSG(int(proj_type))
t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
(lat, long, z) = t.TransformPoint(posX, posY)<-------------------
srs = osgeo.osr.SpatialReference(wkt=prj)  

And the raster's metadata.
/proj:  GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AXIS["Latitude",NORTH],
    AXIS["Longitude",EAST],
    AUTHORITY["EPSG","4326"]]
proj type:  4326/

The code threw the following error.

*ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation.
ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation.
ERROR 1: PROJ: proj_create: unrecognized format / unknown name
ERROR 6: Cannot find coordinate operations from `GEOGCRS["WGS
84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS
84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]]'
to `'
Could not calculate crsGeo spatial reference.
F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])
    OSRCoordinateTransformationShadow::TransformPoint(double [4])
    OSRCoordinateTransformationShadow::TransformPoint(double
[3],double,double,double)
    OSRCoordinateTransformationShadow::TransformPoint(double
[4],double,double,double,double)*

Based on previous posts, it seems that proj.dll is missing from some PATH
variable. My environment only has a proj_6_2.dll, and even with that added
to my system's PATH, the error persists.

I have tried to put posX and posY inside tuples/list as well, but that did
not help.

Is this a package mismatch issue? Missing dependencies issue? Or was there a
change in how TransformPoint should be called?


        



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From runette at gmail.com  Wed Jun 16 01:51:51 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 16 Jun 2021 09:51:51 +0100
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623818481513-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
Message-ID: <CAE8nN5MF1hw9a9nxFoNij7Ow4Ddp5T_DKkw4tgAdpN=KAeGEJg@mail.gmail.com>

Some ideas for you:

- In the conda environment - it says that Fiona and GDAL come from the
pipwin channel. I would try importing them from the conda-forge channel
since I think that is more actively maintained (and by the core teams).
This should do the trick

conda install -c conda-forge fiona

Also the same for pyproj

conda install -c conda-forge pyproj

Pyproj and OSR can work in the same app - I am doing that. You do have to
be a bit careful about remembering that the SR objects are not
interchangeable.

- in the conda environment if it working correctly - you should NOT have to
worry about proj - the correct version is and environment variables are
loaded automatically as part of the activate command. Indeed - having other
versions of proj.dll in the PATH will just confuse things - try removing
them and any env variables set OUTSIDE of the conda activate command.

I think that all of those errors are caused by this error:

C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation

However - I think you need three input coords on the transform point?

That command says that it is getting proj from an environment called
sw_py_cv45. Just to ask the obvious question ... That is the environment
that you 3expect to be using ..correct?

The error does suggest that the environment is corrupted and the version of
proj.dll in the env (or being found by the Python installed in the env) is
not the same as the version of the proj.db in the share directory of the
env. If it was me - I would probably start again from scratch - i.e.

conda create --name test
conda activate test
conda install -c conda-forge fiona
conda install -c conda-forge pyproj

and see what you get.

Just as a BTW - it looks like you have a custom config of Anaconda - since
conda usually puts the env directory in a directory called `anaconda3`. Are
you sure that the conda config is correct?

On Wed, 16 Jun 2021 at 05:42, zerovirus123 <briansia93 at gmail.com> wrote:

> I am trying to run some GDAL operations inside my Anaconda environment.
> However once I upgraded my gdal and other packages the program crashed.
>
> Environment: Anaconda
>
> Package               Version                  Channel
> GDAL                   3.3.0                      pipwin
> fiona                     1.8.20                    pipwin
> geopandas           0.9.0                      pipwin
> shapely                1.7.1                      pipwin
> pyproj                   2.6.1.post1            py37hcfa1391_1
>
> Here is the offending code.
>
> crsGeo = osgeo.osr.SpatialReference()
> crsGeo.ImportFromEPSG(int(proj_type))
> t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
> (lat, long, z) = t.TransformPoint(posX, posY)<-------------------
> srs = osgeo.osr.SpatialReference(wkt=prj)
>
> And the raster's metadata.
> /proj:  GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AXIS["Latitude",NORTH],
>     AXIS["Longitude",EAST],
>     AUTHORITY["EPSG","4326"]]
> proj type:  4326/
>
> The code threw the following error.
>
> *ERROR 1: PROJ: proj_create_from_database:
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation.
> ERROR 1: PROJ: proj_create_from_database:
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation.
> ERROR 1: PROJ: proj_create: unrecognized format / unknown name
> ERROR 6: Cannot find coordinate operations from `GEOGCRS["WGS
> 84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS
>
> 84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]]'
> to `'
> Could not calculate crsGeo spatial reference.
> F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
> arguments for overloaded function
> 'CoordinateTransformation_TransformPoint'.
>   Possible C/C++ prototypes are:
>     OSRCoordinateTransformationShadow::TransformPoint(double [3])
>     OSRCoordinateTransformationShadow::TransformPoint(double [4])
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [3],double,double,double)
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [4],double,double,double,double)*
>
> Based on previous posts, it seems that proj.dll is missing from some PATH
> variable. My environment only has a proj_6_2.dll, and even with that added
> to my system's PATH, the error persists.
>
> I have tried to put posX and posY inside tuples/list as well, but that did
> not help.
>
> Is this a package mismatch issue? Missing dependencies issue? Or was there
> a
> change in how TransformPoint should be called?
>
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/5bd1f1b3/attachment.html>

From Daniel.Evans at jbarisk.com  Wed Jun 16 02:02:07 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Wed, 16 Jun 2021 09:02:07 +0000
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <CAE8nN5MF1hw9a9nxFoNij7Ow4Ddp5T_DKkw4tgAdpN=KAeGEJg@mail.gmail.com>
References: <1623818481513-0.post@n6.nabble.com>
 <CAE8nN5MF1hw9a9nxFoNij7Ow4Ddp5T_DKkw4tgAdpN=KAeGEJg@mail.gmail.com>
Message-ID: <CWXP123MB5191A0078D48DB7BF5F12322950F9@CWXP123MB5191.GBRP123.PROD.OUTLOOK.COM>

However - I think you need three input coords on the transform point?

The Swig bindings for Python [should/used to] provide a wrapper for TransformPoint(), of the form TransformPoint(x, y, z=0.0) in Python terms.


It?s one of the listed bindings on the Python API documentation:

TransformPoint(CoordinateTransformation self, double x, double y, double z=0.0)

https://gdal.org/python/osgeo.osr.CoordinateTransformation-class.html


Looking at the autogenerated SWIG source code in the latest version of the repository, it looks like that particular wrapper still exists:

SWIGINTERN void OSRCoordinateTransformationShadow_TransformPoint__SWIG_2(OSRCoordinateTransformationShadow *self,double argout[3],double x,double y,double z=0.0){
    if (self == NULL)
        return;
    argout[0] = x;
    argout[1] = y;
    argout[2] = z;
    OCTTransform( self, 1, &argout[0], &argout[1], &argout[2] );
  }

https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/extensions/osr_wrap.cpp#L4422


I?ll admit none of that particularly helps solve the issue beyond saying ?I think it should work?, though!


Dr Daniel Evans
Software Developer


e: Daniel.Evans at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Paul Harwood
Sent: 16 June 2021 09:52
To: zerovirus123 <briansia93 at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] TypeError Wrong number or type of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.

Some ideas for you:

- In the conda environment - it says that Fiona and GDAL come from the pipwin channel. I would try importing them from the conda-forge channel since I think that is more actively maintained (and by the core teams). This should do the trick

conda install -c conda-forge fiona

Also the same for pyproj

conda install -c conda-forge pyproj

Pyproj and OSR can work in the same app - I am doing that. You do have to be a bit careful about remembering that the SR objects are not interchangeable.

- in the conda environment if it working correctly - you should NOT have to worry about proj - the correct version is and environment variables are loaded automatically as part of the activate command. Indeed - having other versions of proj.dll in the PATH will just confuse things - try removing them and any env variables set OUTSIDE of the conda activate command.

I think that all of those errors are caused by this error:

C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation

However - I think you need three input coords on the transform point?

That command says that it is getting proj from an environment called sw_py_cv45. Just to ask the obvious question ... That is the environment that you 3expect to be using ..correct?

The error does suggest that the environment is corrupted and the version of proj.dll in the env (or being found by the Python installed in the env) is not the same as the version of the proj.db in the share directory of the env. If it was me - I would probably start again from scratch - i.e.

conda create --name test
conda activate test
conda install -c conda-forge fiona
conda install -c conda-forge pyproj

and see what you get.

Just as a BTW - it looks like you have a custom config of Anaconda - since conda usually puts the env directory in a directory called `anaconda3`. Are you sure that the conda config is correct?

On Wed, 16 Jun 2021 at 05:42, zerovirus123 <briansia93 at gmail.com<mailto:briansia93 at gmail.com>> wrote:
I am trying to run some GDAL operations inside my Anaconda environment.
However once I upgraded my gdal and other packages the program crashed.

Environment: Anaconda

Package               Version                  Channel
GDAL                   3.3.0                      pipwin
fiona                     1.8.20                    pipwin
geopandas           0.9.0                      pipwin
shapely                1.7.1                      pipwin
pyproj                   2.6.1.post1            py37hcfa1391_1

Here is the offending code.

crsGeo = osgeo.osr.SpatialReference()
crsGeo.ImportFromEPSG(int(proj_type))
t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
(lat, long, z) = t.TransformPoint(posX, posY)<-------------------
srs = osgeo.osr.SpatialReference(wkt=prj)

And the raster's metadata.
/proj:  GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AXIS["Latitude",NORTH],
    AXIS["Longitude",EAST],
    AUTHORITY["EPSG","4326"]]
proj type:  4326/

The code threw the following error.

*ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation.
ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation.
ERROR 1: PROJ: proj_create: unrecognized format / unknown name
ERROR 6: Cannot find coordinate operations from `GEOGCRS["WGS
84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS
84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]]'
to `'
Could not calculate crsGeo spatial reference.
F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])
    OSRCoordinateTransformationShadow::TransformPoint(double [4])
    OSRCoordinateTransformationShadow::TransformPoint(double
[3],double,double,double)
    OSRCoordinateTransformationShadow::TransformPoint(double
[4],double,double,double,double)*

Based on previous posts, it seems that proj.dll is missing from some PATH
variable. My environment only has a proj_6_2.dll, and even with that added
to my system's PATH, the error persists.

I have tried to put posX and posY inside tuples/list as well, but that did
not help.

Is this a package mismatch issue? Missing dependencies issue? Or was there a
change in how TransformPoint should be called?






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/76fa1343/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image888686.png
Type: image/png
Size: 9886 bytes
Desc: image888686.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/76fa1343/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image730190.png
Type: image/png
Size: 651 bytes
Desc: image730190.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/76fa1343/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image073431.png
Type: image/png
Size: 715 bytes
Desc: image073431.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/76fa1343/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image348611.png
Type: image/png
Size: 966 bytes
Desc: image348611.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/76fa1343/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image074435.png
Type: image/png
Size: 784 bytes
Desc: image074435.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/76fa1343/attachment-0009.png>

From runette at gmail.com  Wed Jun 16 02:17:21 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 16 Jun 2021 10:17:21 +0100
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <CWXP123MB5191A0078D48DB7BF5F12322950F9@CWXP123MB5191.GBRP123.PROD.OUTLOOK.COM>
References: <1623818481513-0.post@n6.nabble.com>
 <CAE8nN5MF1hw9a9nxFoNij7Ow4Ddp5T_DKkw4tgAdpN=KAeGEJg@mail.gmail.com>
 <CWXP123MB5191A0078D48DB7BF5F12322950F9@CWXP123MB5191.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CAE8nN5PWH_D2VtaPxA5QJaQaiLSdsxJ2j1LdY5n5qsTOgiue_A@mail.gmail.com>

I admit - I was just working from the nerror message ...

F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])

suggests that it is looking for 3 coords

On Wed, 16 Jun 2021 at 10:02, Daniel Evans <Daniel.Evans at jbarisk.com> wrote:

> *However - I think you need three input coords on the transform point? *
>
>
>
> The Swig bindings for Python [should/used to] provide a wrapper for
> TransformPoint(), of the form TransformPoint(x, y, z=0.0) in Python terms.
>
>
>
>
>
> It?s one of the listed bindings on the Python API documentation:
>
>
>
> TransformPoint(CoordinateTransformation self, double x, double y, double
> z=0.0)
>
>
>
> https://gdal.org/python/osgeo.osr.CoordinateTransformation-class.html
>
>
>
>
>
> Looking at the autogenerated SWIG source code in the latest version of the
> repository, it looks like that particular wrapper still exists:
>
>
>
> SWIGINTERN void
> OSRCoordinateTransformationShadow_TransformPoint__SWIG_2(OSRCoordinateTransformationShadow
> *self,double argout[3],double x,double y,double z=0.0){
>
>     if (self == NULL)
>
>         return;
>
>     argout[0] = x;
>
>     argout[1] = y;
>
>     argout[2] = z;
>
>     OCTTransform( self, 1, &argout[0], &argout[1], &argout[2] );
>
>   }
>
>
>
>
> https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/extensions/osr_wrap.cpp#L4422
>
>
>
>
>
> I?ll admit none of that particularly helps solve the issue beyond saying
> ?I think it should work?, though!
>
>
>
>
>
> *Dr Daniel Evans*
>
> *Software Developer*
>
>
> e: ? *Daniel.Evans at jbarisk.com* <Daniel.Evans at jbarisk.com>
> t:  *+44 (0)1756 799919* <+44%20(0)1756%20799919>
> *www.jbarisk.com* <http://www.jbarisk.com/>
> [image: Facebook] <https://www.facebook.com/TheFloodPeople>
> [image: LinkedIn] <https://www.linkedin.com/company/jba-risk-management/>
> [image: Twitter] <https://twitter.com/JBARisk>
> [image: YouTube]
> <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>
>
> All JBA Risk Management's email messages contain confidential information
> and are intended only for the individual(s) named. If you are not the named
> addressee you should not disseminate, distribute or copy this e-mail.
> Please notify the sender immediately by email if you have received this
> email by mistake and delete this email from your system.
> JBA Risk Management Limited is registered in England, company number
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North
> Yorkshire, BD23 3FD, England.
>
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *On Behalf Of *Paul
> Harwood
> *Sent:* 16 June 2021 09:52
> *To:* zerovirus123 <briansia93 at gmail.com>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] TypeError Wrong number or type of arguments for
> overloaded function 'CoordinateTransformation_TransformPoint'.
>
>
>
> Some ideas for you:
>
>
>
> - In the conda environment - it says that Fiona and GDAL come from the
> pipwin channel. I would try importing them from the conda-forge channel
> since I think that is more actively maintained (and by the core teams).
> This should do the trick
>
>
>
> conda install -c conda-forge fiona
>
>
> Also the same for pyproj
>
>
>
> conda install -c conda-forge pyproj
>
>
>
> Pyproj and OSR can work in the same app - I am doing that. You do have to
> be a bit careful about remembering that the SR objects are not
> interchangeable.
>
>
>
> - in the conda environment if it working correctly - you should NOT have
> to worry about proj - the correct version is and environment variables are
> loaded automatically as part of the activate command. Indeed - having other
> versions of proj.dll in the PATH will just confuse things - try removing
> them and any env variables set OUTSIDE of the conda activate command.
>
>
>
> I think that all of those errors are caused by this error:
>
>
>
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation
>
>
>
> However - I think you need three input coords on the transform point?
>
>
>
> That command says that it is getting proj from an environment called
> sw_py_cv45. Just to ask the obvious question ... That is the environment
> that you 3expect to be using ..correct?
>
>
>
> The error does suggest that the environment is corrupted and the version
> of proj.dll in the env (or being found by the Python installed in the env)
> is not the same as the version of the proj.db in the share directory of the
> env. If it was me - I would probably start again from scratch - i.e.
>
>
>
> conda create --name test
>
> conda activate test
>
> conda install -c conda-forge fiona
>
> conda install -c conda-forge pyproj
>
>
>
> and see what you get.
>
> Just as a BTW - it looks like you have a custom config of Anaconda - since
> conda usually puts the env directory in a directory called `anaconda3`. Are
> you sure that the conda config is correct?
>
>
>
> On Wed, 16 Jun 2021 at 05:42, zerovirus123 <briansia93 at gmail.com> wrote:
>
> I am trying to run some GDAL operations inside my Anaconda environment.
> However once I upgraded my gdal and other packages the program crashed.
>
> Environment: Anaconda
>
> Package               Version                  Channel
> GDAL                   3.3.0                      pipwin
> fiona                     1.8.20                    pipwin
> geopandas           0.9.0                      pipwin
> shapely                1.7.1                      pipwin
> pyproj                   2.6.1.post1            py37hcfa1391_1
>
> Here is the offending code.
>
> crsGeo = osgeo.osr.SpatialReference()
> crsGeo.ImportFromEPSG(int(proj_type))
> t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
> (lat, long, z) = t.TransformPoint(posX, posY)<-------------------
> srs = osgeo.osr.SpatialReference(wkt=prj)
>
> And the raster's metadata.
> /proj:  GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AXIS["Latitude",NORTH],
>     AXIS["Longitude",EAST],
>     AUTHORITY["EPSG","4326"]]
> proj type:  4326/
>
> The code threw the following error.
>
> *ERROR 1: PROJ: proj_create_from_database:
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation.
> ERROR 1: PROJ: proj_create_from_database:
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation.
> ERROR 1: PROJ: proj_create: unrecognized format / unknown name
> ERROR 6: Cannot find coordinate operations from `GEOGCRS["WGS
> 84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS
>
> 84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]]'
> to `'
> Could not calculate crsGeo spatial reference.
> F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
> arguments for overloaded function
> 'CoordinateTransformation_TransformPoint'.
>   Possible C/C++ prototypes are:
>     OSRCoordinateTransformationShadow::TransformPoint(double [3])
>     OSRCoordinateTransformationShadow::TransformPoint(double [4])
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [3],double,double,double)
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [4],double,double,double,double)*
>
> Based on previous posts, it seems that proj.dll is missing from some PATH
> variable. My environment only has a proj_6_2.dll, and even with that added
> to my system's PATH, the error persists.
>
> I have tried to put posX and posY inside tuples/list as well, but that did
> not help.
>
> Is this a package mismatch issue? Missing dependencies issue? Or was there
> a
> change in how TransformPoint should be called?
>
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4abf2a50/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image888686.png
Type: image/png
Size: 9886 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4abf2a50/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image730190.png
Type: image/png
Size: 651 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4abf2a50/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image073431.png
Type: image/png
Size: 715 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4abf2a50/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image348611.png
Type: image/png
Size: 966 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4abf2a50/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image074435.png
Type: image/png
Size: 784 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4abf2a50/attachment-0009.png>

From Daniel.Evans at jbarisk.com  Wed Jun 16 02:35:50 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Wed, 16 Jun 2021 09:35:50 +0000
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <CAE8nN5PWH_D2VtaPxA5QJaQaiLSdsxJ2j1LdY5n5qsTOgiue_A@mail.gmail.com>
References: <1623818481513-0.post@n6.nabble.com>
 <CAE8nN5MF1hw9a9nxFoNij7Ow4Ddp5T_DKkw4tgAdpN=KAeGEJg@mail.gmail.com>
 <CWXP123MB5191A0078D48DB7BF5F12322950F9@CWXP123MB5191.GBRP123.PROD.OUTLOOK.COM>
 <CAE8nN5PWH_D2VtaPxA5QJaQaiLSdsxJ2j1LdY5n5qsTOgiue_A@mail.gmail.com>
Message-ID: <CWXP123MB51912E6DB5AB8EFEB620DC40950F9@CWXP123MB5191.GBRP123.PROD.OUTLOOK.COM>

Yes, I only happened to have an answer ready to go because I looked into it myself after seeing the same!

Playing around a bit more, it looks like all of the issues stem from an original error with creating crsGeo, deriving from Proj being unable to match EPSG prog_type is:

>>> proj_type = 123456789
>>> crsGeo.ImportFromEPSG(proj_type)
ERROR 1: PROJ: proj_create_from_database: crs not found
6

This then results in a null transform being created:

>>> t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
ERROR 1: PROJ: proj_create: unrecognized format / unknown name
ERROR 1: Cannot instantiate target_crs
ERROR 6: Cannot find coordinate operations from `EPSG:27700' to `'
>>> t
<osgeo.osr.CoordinateTransformation; proxy of None >

And I then receive the same (slightly misleading) error about the call arguments being incorrect:

>>> (lat, long, z) = t.TransformPoint(posX, posY)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "?/lib64/python3.6/site-packages/osgeo/osr.py", line 1104, in TransformPoint
    return _osr.CoordinateTransformation_TransformPoint(self, *args)
NotImplementedError: Wrong number or type of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])
    OSRCoordinateTransformationShadow::TransformPoint(double [4])
    OSRCoordinateTransformationShadow::TransformPoint(double [3],double,double,double)
    OSRCoordinateTransformationShadow::TransformPoint(double [4],double,double,double,double)

(I suspect the error might originate from SWIG being unable to match the call for a None/null object, rather than a CoordinateTransform?)


Dr Daniel Evans
Software Developer


e: Daniel.Evans at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: Paul Harwood <runette at gmail.com>
Sent: 16 June 2021 10:17
To: Daniel Evans <Daniel.Evans at jbarisk.com>
Cc: zerovirus123 <briansia93 at gmail.com>; gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] TypeError Wrong number or type of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.

I admit - I was just working from the nerror message ...

F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])

suggests that it is looking for 3 coords

On Wed, 16 Jun 2021 at 10:02, Daniel Evans <Daniel.Evans at jbarisk.com<mailto:Daniel.Evans at jbarisk.com>> wrote:
However - I think you need three input coords on the transform point?

The Swig bindings for Python [should/used to] provide a wrapper for TransformPoint(), of the form TransformPoint(x, y, z=0.0) in Python terms.


It?s one of the listed bindings on the Python API documentation:

TransformPoint(CoordinateTransformation self, double x, double y, double z=0.0)

https://gdal.org/python/osgeo.osr.CoordinateTransformation-class.html


Looking at the autogenerated SWIG source code in the latest version of the repository, it looks like that particular wrapper still exists:

SWIGINTERN void OSRCoordinateTransformationShadow_TransformPoint__SWIG_2(OSRCoordinateTransformationShadow *self,double argout[3],double x,double y,double z=0.0){
    if (self == NULL)
        return;
    argout[0] = x;
    argout[1] = y;
    argout[2] = z;
    OCTTransform( self, 1, &argout[0], &argout[1], &argout[2] );
  }

https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/extensions/osr_wrap.cpp#L4422


I?ll admit none of that particularly helps solve the issue beyond saying ?I think it should work?, though!


Dr Daniel Evans
Software Developer

e: ?
Daniel.Evans at jbarisk.com<mailto:Daniel.Evans at jbarisk.com>
t:
+44 (0)1756 799919<tel:+44%20(0)1756%20799919>
www.jbarisk.com<http://www.jbarisk.com/>
[cid:image001.png at 01D7629B.5F790AA0]
[Facebook]<https://www.facebook.com/TheFloodPeople>
[LinkedIn]<https://www.linkedin.com/company/jba-risk-management/>
[Twitter]<https://twitter.com/JBARisk>
[YouTube]<https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>



All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Paul Harwood
Sent: 16 June 2021 09:52
To: zerovirus123 <briansia93 at gmail.com<mailto:briansia93 at gmail.com>>
Cc: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] TypeError Wrong number or type of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.

Some ideas for you:

- In the conda environment - it says that Fiona and GDAL come from the pipwin channel. I would try importing them from the conda-forge channel since I think that is more actively maintained (and by the core teams). This should do the trick

conda install -c conda-forge fiona

Also the same for pyproj

conda install -c conda-forge pyproj

Pyproj and OSR can work in the same app - I am doing that. You do have to be a bit careful about remembering that the SR objects are not interchangeable.

- in the conda environment if it working correctly - you should NOT have to worry about proj - the correct version is and environment variables are loaded automatically as part of the activate command. Indeed - having other versions of proj.dll in the PATH will just confuse things - try removing them and any env variables set OUTSIDE of the conda activate command.

I think that all of those errors are caused by this error:

C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation

However - I think you need three input coords on the transform point?

That command says that it is getting proj from an environment called sw_py_cv45. Just to ask the obvious question ... That is the environment that you 3expect to be using ..correct?

The error does suggest that the environment is corrupted and the version of proj.dll in the env (or being found by the Python installed in the env) is not the same as the version of the proj.db in the share directory of the env. If it was me - I would probably start again from scratch - i.e.

conda create --name test
conda activate test
conda install -c conda-forge fiona
conda install -c conda-forge pyproj

and see what you get.

Just as a BTW - it looks like you have a custom config of Anaconda - since conda usually puts the env directory in a directory called `anaconda3`. Are you sure that the conda config is correct?

On Wed, 16 Jun 2021 at 05:42, zerovirus123 <briansia93 at gmail.com<mailto:briansia93 at gmail.com>> wrote:
I am trying to run some GDAL operations inside my Anaconda environment.
However once I upgraded my gdal and other packages the program crashed.

Environment: Anaconda

Package               Version                  Channel
GDAL                   3.3.0                      pipwin
fiona                     1.8.20                    pipwin
geopandas           0.9.0                      pipwin
shapely                1.7.1                      pipwin
pyproj                   2.6.1.post1            py37hcfa1391_1

Here is the offending code.

crsGeo = osgeo.osr.SpatialReference()
crsGeo.ImportFromEPSG(int(proj_type))
t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
(lat, long, z) = t.TransformPoint(posX, posY)<-------------------
srs = osgeo.osr.SpatialReference(wkt=prj)

And the raster's metadata.
/proj:  GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AXIS["Latitude",NORTH],
    AXIS["Longitude",EAST],
    AUTHORITY["EPSG","4326"]]
proj type:  4326/

The code threw the following error.

*ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation.
ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation.
ERROR 1: PROJ: proj_create: unrecognized format / unknown name
ERROR 6: Cannot find coordinate operations from `GEOGCRS["WGS
84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS
84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]]'
to `'
Could not calculate crsGeo spatial reference.
F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])
    OSRCoordinateTransformationShadow::TransformPoint(double [4])
    OSRCoordinateTransformationShadow::TransformPoint(double
[3],double,double,double)
    OSRCoordinateTransformationShadow::TransformPoint(double
[4],double,double,double,double)*

Based on previous posts, it seems that proj.dll is missing from some PATH
variable. My environment only has a proj_6_2.dll, and even with that added
to my system's PATH, the error persists.

I have tried to put posX and posY inside tuples/list as well, but that did
not help.

Is this a package mismatch issue? Missing dependencies issue? Or was there a
change in how TransformPoint should be called?






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 651 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 715 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 966 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0012.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 784 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0013.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7745 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0014.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image371680.png
Type: image/png
Size: 9886 bytes
Desc: image371680.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0015.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image276524.png
Type: image/png
Size: 651 bytes
Desc: image276524.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0016.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image802589.png
Type: image/png
Size: 715 bytes
Desc: image802589.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0017.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image542806.png
Type: image/png
Size: 966 bytes
Desc: image542806.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0018.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image312808.png
Type: image/png
Size: 784 bytes
Desc: image312808.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/768f3c1a/attachment-0019.png>

From briansia93 at gmail.com  Wed Jun 16 03:49:14 2021
From: briansia93 at gmail.com (zerovirus123)
Date: Wed, 16 Jun 2021 03:49:14 -0700 (MST)
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623818481513-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
Message-ID: <1623840554176-0.post@n6.nabble.com>

Hi,

        Based on the above suggestions? Should I just rebuild a fresh
environment? Or tamper with proj.dll files?

Thanks.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Daniel.Evans at jbarisk.com  Wed Jun 16 04:02:02 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Wed, 16 Jun 2021 11:02:02 +0000
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623840554176-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
 <1623840554176-0.post@n6.nabble.com>
Message-ID: <CWXP123MB5191818BCD7F54AC0D77A110950F9@CWXP123MB5191.GBRP123.PROD.OUTLOOK.COM>

I'll leave suggestions on diagnosing and fixing PROJ DLL/Databases to others - I've little knowledge on the matter, especially in regards to Conda and Windows. There might be something to Paul's points about the packages coming from different channels; I believe this can cause trouble with Conda (I've heard of issues in mixing packages from the defaults and conda-forge channels in the same environment).

One other thing I can think of to check: is the proj_type variable being set correctly (it looks like you're expecting it to be "4326", based on the raster metadata)? I reproduced the behaviour by intentionally putting in a bad EPSG code, and if the variable is somehow not what you expect, that could be it (although the PROJ errors still look concerning).

However, since you said this code was previously working correctly, I don't have much hope for this suggestion.

Daniel


e: Daniel.Evans at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of zerovirus123
Sent: 16 June 2021 11:49
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] TypeError Wrong number or type of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.

Hi,

        Based on the above suggestions? Should I just rebuild a fresh environment? Or tamper with proj.dll files?

Thanks.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/b77aa5d4/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image251428.png
Type: image/png
Size: 9886 bytes
Desc: image251428.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/b77aa5d4/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image585609.png
Type: image/png
Size: 651 bytes
Desc: image585609.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/b77aa5d4/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image356826.png
Type: image/png
Size: 715 bytes
Desc: image356826.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/b77aa5d4/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image508634.png
Type: image/png
Size: 966 bytes
Desc: image508634.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/b77aa5d4/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image525249.png
Type: image/png
Size: 784 bytes
Desc: image525249.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/b77aa5d4/attachment-0009.png>

From runette at gmail.com  Wed Jun 16 04:57:57 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 16 Jun 2021 12:57:57 +0100
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623840554176-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
 <1623840554176-0.post@n6.nabble.com>
Message-ID: <CAE8nN5MwCTyt64cEOG_KA6XnfzAh2VOfwrb3ztHS01uAERxHHw@mail.gmail.com>

As per my email :

- I would probably start again from scratch - i.e.

conda create --name test
conda activate test
conda install -c conda-forge fiona
conda install -c conda-forge pyproj

and see what you get.

If you are working in conda - you should NEVER have to tamper with proj.dll
or proj.db files.

On Wed, 16 Jun 2021 at 11:49, zerovirus123 <briansia93 at gmail.com> wrote:

> Hi,
>
>         Based on the above suggestions? Should I just rebuild a fresh
> environment? Or tamper with proj.dll files?
>
> Thanks.
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/5112f1aa/attachment.html>

From runette at gmail.com  Wed Jun 16 05:11:10 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 16 Jun 2021 13:11:10 +0100
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <CAE8nN5MwCTyt64cEOG_KA6XnfzAh2VOfwrb3ztHS01uAERxHHw@mail.gmail.com>
References: <1623818481513-0.post@n6.nabble.com>
 <1623840554176-0.post@n6.nabble.com>
 <CAE8nN5MwCTyt64cEOG_KA6XnfzAh2VOfwrb3ztHS01uAERxHHw@mail.gmail.com>
Message-ID: <CAE8nN5NDmLnrSz7-HVnM8X06eXu2P1gbhYF1gnvzVp6pLSZgbg@mail.gmail.com>

actually you probably also need to add:

conda install -c conda-forge gdal

since you are using the OSGeo python package and I don't you get that with
the Fiona conda package

On Wed, 16 Jun 2021 at 12:57, Paul Harwood <runette at gmail.com> wrote:

> As per my email :
>
> - I would probably start again from scratch - i.e.
>
> conda create --name test
> conda activate test
> conda install -c conda-forge fiona
> conda install -c conda-forge pyproj
>
> and see what you get.
>
> If you are working in conda - you should NEVER have to tamper with
> proj.dll or proj.db files.
>
> On Wed, 16 Jun 2021 at 11:49, zerovirus123 <briansia93 at gmail.com> wrote:
>
>> Hi,
>>
>>         Based on the above suggestions? Should I just rebuild a fresh
>> environment? Or tamper with proj.dll files?
>>
>> Thanks.
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/e6217543/attachment.html>

From rajeshreddy82 at gmail.com  Wed Jun 16 05:23:47 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Wed, 16 Jun 2021 05:23:47 -0700 (MST)
Subject: [gdal-dev] How to view geopackage file which is having vector tiles
 (MapBox Vector Tiles format)
Message-ID: <1623846227217-0.post@n6.nabble.com>

Team,

We have geopackage file, which is having vector tiles (MapBox Vector Tiles
format) as BLOBS.

How to view these vector tiles? do we have any viewers? or applications?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rdmailings at duif.net  Wed Jun 16 05:42:10 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 16 Jun 2021 14:42:10 +0200
Subject: [gdal-dev] How to view geopackage file which is having vector
 tiles (MapBox Vector Tiles format)
In-Reply-To: <1623846227217-0.post@n6.nabble.com>
References: <1623846227217-0.post@n6.nabble.com>
Message-ID: <5853e6c7-faaf-3ab1-0664-328b2c8c600c@duif.net>

On 6/16/21 2:23 PM, MRRAJESH wrote:
> Team,
> 
> We have geopackage file, which is having vector tiles (MapBox Vector Tiles
> format) as BLOBS.

This is not the MBTiles format? For what I know there were image tiles in those geopackages/sqlites...

But

https://github.com/mapbox/mbtiles-spec

seems 1.3 also has vector tilesets?

See also

https://gdal.org/drivers/raster/mbtiles.html

"Starting with GDAL 2.3, the MBTiles driver has read and write support for MBTiles vector datasets. For standalone Mapbox Vector Tile files or set of MVT files, see the MVT driver. "

https://gdal.org/drivers/vector/mvt.html#vector-mvt

Dit you try QGIS?

Regards,

Richard Duivenvoorde





From fiatlux113 at gmail.com  Wed Jun 16 06:15:25 2021
From: fiatlux113 at gmail.com (fiat lux)
Date: Wed, 16 Jun 2021 14:15:25 +0100
Subject: [gdal-dev] gdal Vertical Datum/ Reference System
Message-ID: <CAFHU0Ae5_OBY+BD__N_WC9CidB_PV-8Lnuhn60rbfL9Cgsn_xQ@mail.gmail.com>

I need help with identifying vertical datum on raster for a project that I
am working on. When I run gdalinfo raster.tif, I can identify the
horizontal reference system as given by the EPSG:XXXX. However, I am
struggling identifying the vertical reference system; which is a
prerequisite for transforming vertical datum using gdal.

Thanks for the help

Fiat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4e5d99eb/attachment.html>

From even.rouault at spatialys.com  Wed Jun 16 06:19:56 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jun 2021 15:19:56 +0200
Subject: [gdal-dev] gdal Vertical Datum/ Reference System
In-Reply-To: <CAFHU0Ae5_OBY+BD__N_WC9CidB_PV-8Lnuhn60rbfL9Cgsn_xQ@mail.gmail.com>
References: <CAFHU0Ae5_OBY+BD__N_WC9CidB_PV-8Lnuhn60rbfL9Cgsn_xQ@mail.gmail.com>
Message-ID: <31c868d2-205c-a4d6-deb0-2a663221cfe1@spatialys.com>

Fiat,

You could start by setting the environment variable / configuration 
option GTIFF_REPORT_COMPD_CS to YES (see 
https://gdal.org/drivers/raster/gtiff.html#configuration-options), that 
will make the GeoTIFF driver report a Compound CRS if the GeoTIFF keys 
contain information on the vertical CRS/datum.

If that doesn't work, then you'll have to connect with the data producer 
and ask him...

Even

Le 16/06/2021 ? 15:15, fiat lux a ?crit?:
> I need help with identifying vertical datum on raster for a project 
> that I am working on. When I run gdalinfo raster.tif, I can identify 
> the horizontal reference system as given by the EPSG:XXXX. However, I 
> am struggling identifying the vertical reference system; which is a 
> prerequisite for transforming vertical datum using gdal.
>
> Thanks for the help
>
> Fiat
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/2ea4c74d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Jun 16 07:45:38 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 16 Jun 2021 07:45:38 -0700 (MST)
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623818481513-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
Message-ID: <1623854738222-0.post@n6.nabble.com>

Hi,

At least you must fix this error first
"ERROR 1: PROJ: proj_create_from_database:
C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
metadata. It comes from another PROJ installation."

Your proj.db database must come from some older version than your current
Proj. Proj is reading the table "metadata" and the CREATE TABLE SQL for that
it currently https://github.com/OSGeo/PROJ/blob/master/data/sql/metadata.sql
and contains 

INSERT INTO "metadata" VALUES('DATABASE.LAYOUT.VERSION.MAJOR', 1);
INSERT INTO "metadata" VALUES('DATABASE.LAYOUT.VERSION.MINOR', 1);

Those fields were added 2020-11-30 by commit
https://github.com/OSGeo/PROJ/commit/eef73e3eca2959768563d2dbb95a591c68b1d807#diff-7efcaee17a3e41e5440dc2ff9e962f20ad448a3ce5d7fff45a839846a85f37f8


-Jukka Rahkonen-






zerovirus123 wrote
> I am trying to run some GDAL operations inside my Anaconda environment.
> However once I upgraded my gdal and other packages the program crashed.
> 
> Environment: Anaconda
> 
> Package               Version                  Channel
> GDAL                   3.3.0                      pipwin
> fiona                     1.8.20                    pipwin
> geopandas           0.9.0                      pipwin
> shapely                1.7.1                      pipwin
> pyproj                   2.6.1.post1            py37hcfa1391_1
> 
> Here is the offending code.
> 
> crsGeo = osgeo.osr.SpatialReference()
> crsGeo.ImportFromEPSG(int(proj_type))
> t = osgeo.osr.CoordinateTransformation(crs, crsGeo)
> (lat, long, z) = t.TransformPoint(posX, posY)<-------------------
> srs = osgeo.osr.SpatialReference(wkt=prj)  
> 
> And the raster's metadata.
> /proj:  GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AXIS["Latitude",NORTH],
>     AXIS["Longitude",EAST],
>     AUTHORITY["EPSG","4326"]]
> proj type:  4326/
> 
> The code threw the following error.
> 
> *ERROR 1: PROJ: proj_create_from_database:
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation.
> ERROR 1: PROJ: proj_create_from_database:
> C:\Users\Deployment\.conda\envs\sw_py37_cv45\Library\share\proj\proj.db
> lacks DATABASE.LAYOUT.VERSION.MAJOR / DATABASE.LAYOUT.VERSION.MINOR
> metadata. It comes from another PROJ installation.
> ERROR 1: PROJ: proj_create: unrecognized format / unknown name
> ERROR 6: Cannot find coordinate operations from `GEOGCRS["WGS
> 84",DATUM["World Geodetic System 1984",ELLIPSOID["WGS
> 84",6378137,298.257223563,LENGTHUNIT["metre",1]]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["latitude",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["longitude",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]]'
> to `'
> Could not calculate crsGeo spatial reference.
> F:\Sliding_Windows\GeoTiff.py, line 402: TypeError Wrong number or type of
> arguments for overloaded function
> 'CoordinateTransformation_TransformPoint'.
>   Possible C/C++ prototypes are:
>     OSRCoordinateTransformationShadow::TransformPoint(double [3])
>     OSRCoordinateTransformationShadow::TransformPoint(double [4])
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [3],double,double,double)
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [4],double,double,double,double)*
> 
> Based on previous posts, it seems that proj.dll is missing from some PATH
> variable. My environment only has a proj_6_2.dll, and even with that added
> to my system's PATH, the error persists.
> 
> I have tried to put posX and posY inside tuples/list as well, but that did
> not help.
> 
> Is this a package mismatch issue? Missing dependencies issue? Or was there
> a
> change in how TransformPoint should be called?
> 
> 
>         
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rajeshreddy82 at gmail.com  Wed Jun 16 08:00:33 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Wed, 16 Jun 2021 08:00:33 -0700 (MST)
Subject: [gdal-dev] How to view geopackage file which is having vector
 tiles (MapBox Vector Tiles format)
In-Reply-To: <5853e6c7-faaf-3ab1-0664-328b2c8c600c@duif.net>
References: <1623846227217-0.post@n6.nabble.com>
 <5853e6c7-faaf-3ab1-0664-328b2c8c600c@duif.net>
Message-ID: <1623855633922-0.post@n6.nabble.com>

No, this is not MBTiles format. This is geopackage file with MVT vector
tiles, NOT images.

QGIS is supporting only raster geopackage files, ours is vector geopackage
files.

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From fiatlux113 at gmail.com  Wed Jun 16 08:02:42 2021
From: fiatlux113 at gmail.com (fiat lux)
Date: Wed, 16 Jun 2021 16:02:42 +0100
Subject: [gdal-dev] gdal Vertical Datum/ Reference System
In-Reply-To: <31c868d2-205c-a4d6-deb0-2a663221cfe1@spatialys.com>
References: <CAFHU0Ae5_OBY+BD__N_WC9CidB_PV-8Lnuhn60rbfL9Cgsn_xQ@mail.gmail.com>
 <31c868d2-205c-a4d6-deb0-2a663221cfe1@spatialys.com>
Message-ID: <CAFHU0Afyu5EP75=f2HX4+R1Wbg7j7xAqPDxXfZCx=jJzMoUd8A@mail.gmail.com>

Thanks very much. your tip  was  much helpful

Even Rouault <even.rouault at spatialys.com> escreveu no dia quarta,
16/06/2021 ?(s) 14:19:

> Fiat,
>
> You could start by setting the environment variable / configuration option
> GTIFF_REPORT_COMPD_CS to YES (see
> https://gdal.org/drivers/raster/gtiff.html#configuration-options), that
> will make the GeoTIFF driver report a Compound CRS if the GeoTIFF keys
> contain information on the vertical CRS/datum.
>
> If that doesn't work, then you'll have to connect with the data producer
> and ask him...
>
> Even
> Le 16/06/2021 ? 15:15, fiat lux a ?crit :
>
> I need help with identifying vertical datum on raster for a project that I
> am working on. When I run gdalinfo raster.tif, I can identify the
> horizontal reference system as given by the EPSG:XXXX. However, I am
> struggling identifying the vertical reference system; which is a
> prerequisite for transforming vertical datum using gdal.
>
> Thanks for the help
>
> Fiat
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/9e3bf0b4/attachment.html>

From even.rouault at spatialys.com  Wed Jun 16 08:17:27 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jun 2021 17:17:27 +0200
Subject: [gdal-dev] How to view geopackage file which is having vector
 tiles (MapBox Vector Tiles format)
In-Reply-To: <1623846227217-0.post@n6.nabble.com>
References: <1623846227217-0.post@n6.nabble.com>
Message-ID: <88466b86-26ca-0f14-44f2-097bb7faf06d@spatialys.com>

Did you create them yourselves ? Which specification did you follow to 
organize the tiling ? Some time ago I pointed to 
https://www.geopackage.org/extensions.html that contains proposed 
extension(s) for MVT in GeoPackage, but they aren't implemented (yet) in 
GDAL or QGIS.

https://docs.ogc.org/per/18-074.html#_clients mentions a few clients 
that have been developed for MVT in GeoPackage but I'm unsure if any of 
them are publicly available/open source.

Even

Le 16/06/2021 ? 14:23, MRRAJESH a ?crit?:
> Team,
>
> We have geopackage file, which is having vector tiles (MapBox Vector Tiles
> format) as BLOBS.
>
> How to view these vector tiles? do we have any viewers? or applications?
>
> Regards,
> Rajesh
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From loridigia at gmail.com  Wed Jun 16 08:22:16 2021
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Wed, 16 Jun 2021 17:22:16 +0200
Subject: [gdal-dev] Merge multiple TIFF / NC in single NC
Message-ID: <CAERmyNSR3ANu8Jg==LutQ924AJbmSzHsD=3b56fO812aA=AQrg@mail.gmail.com>

Hi everybody, initially i have 1 NetCDF and for each band i create 1
GEOTIFF.
Now, i have X ( where X = #bands) TIFF files and i want to come back to 1
NetCDF file.
How should i do it?

P.S. i saw that with gdal_translate i can also transform each GEOTIFF in
one NetCDF, but at the end i cant find a way to merge all this files into 1
single NetCDF.

If you have any suggestions i'll really appreciate it, thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/7f583485/attachment.html>

From even.rouault at spatialys.com  Wed Jun 16 08:28:24 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jun 2021 17:28:24 +0200
Subject: [gdal-dev] Merge multiple TIFF / NC in single NC
In-Reply-To: <CAERmyNSR3ANu8Jg==LutQ924AJbmSzHsD=3b56fO812aA=AQrg@mail.gmail.com>
References: <CAERmyNSR3ANu8Jg==LutQ924AJbmSzHsD=3b56fO812aA=AQrg@mail.gmail.com>
Message-ID: <8a24c308-bef3-e278-2515-4c817e239ad6@spatialys.com>

Either with gdal_merge.py -separate -o out.nc in1.tif ... in2.tif? 
(https://gdal.org/programs/gdal_merge.html), but it might be memory hungry

Or use gdalbuildvrt -separate tmp.vrt in1.tif ... in2.tif + 
gdal_translate tmp.vrt out.nc

Le 16/06/2021 ? 17:22, Lorenzo Di Giacomo a ?crit?:
> Hi everybody, initially i have 1 NetCDF and for each band i create 1 
> GEOTIFF.
> Now, i have X ( where X = #bands) TIFF files and i want to come back 
> to 1 NetCDF file.
> How should i do it?
>
> P.S. i saw that with gdal_translate i can also transform each GEOTIFF 
> in one NetCDF, but at the end i cant?find a way to merge all this 
> files into 1 single NetCDF.
>
> If you have any suggestions i'll really?appreciate it, thanks
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/d59586de/attachment.html>

From briansia93 at gmail.com  Wed Jun 16 08:50:54 2021
From: briansia93 at gmail.com (zerovirus123)
Date: Wed, 16 Jun 2021 08:50:54 -0700 (MST)
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623818481513-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
Message-ID: <1623858654634-0.post@n6.nabble.com>

Hi all,

       So I created a new Conda environment, installed only gdal-3.3.0 from
conda-forge, isolated the code snippet from my project and ran the code. The
code executed without any issues. I then ran the test code in my old
environment and it worked fine, but when I ran the whole project I got the
TransformPoint error. It seems like an issue with my environment rather than
gdal itself.

      Would it be safe if I install gdal related libraries (fiona,
geopandas, etc...) with conda-forge, and everything else with pip? Some
packages can only be installed with pip...

Thanks for the help. And by the way Jukka, how would I solve the database
error?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From emiri.codes at gmail.com  Wed Jun 16 08:58:19 2021
From: emiri.codes at gmail.com (GeodudeKid)
Date: Wed, 16 Jun 2021 08:58:19 -0700 (MST)
Subject: [gdal-dev] LJPEG Support for GDAL
Message-ID: <1623859099786-0.post@n6.nabble.com>

Is there an LJPEG driver for GDAL? I tried looking on the documentation
online, but nothing really showed up. Has there been anyone that has added
support for LJPEG compression?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From runette at gmail.com  Wed Jun 16 09:01:15 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 16 Jun 2021 17:01:15 +0100
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <1623858654634-0.post@n6.nabble.com>
References: <1623818481513-0.post@n6.nabble.com>
 <1623858654634-0.post@n6.nabble.com>
Message-ID: <CAE8nN5MFc_nn=Mpxht_NNhzuS5NvxvU5gpv-dvOZy7a-kwomhA@mail.gmail.com>

Yep - they should be fine (it is what I do) as long as none of the pip
packages install gdal or proj - which may work but may also cause problems.

As per the conda docs - you should try to install the conda packages into
the env BEFORE the pip packages - so you should probably start with a new
clean conda env, add the conda-forge packages and then add the pip packages.

I have occasionally had some problems between conda packages and GLOBAL pip
packages - since I think the later can override the conda environments. You
should not install any of your packages globally and only add them to the
virtual environment.

On Wed, 16 Jun 2021 at 16:51, zerovirus123 <briansia93 at gmail.com> wrote:

> Hi all,
>
>        So I created a new Conda environment, installed only gdal-3.3.0 from
> conda-forge, isolated the code snippet from my project and ran the code.
> The
> code executed without any issues. I then ran the test code in my old
> environment and it worked fine, but when I ran the whole project I got the
> TransformPoint error. It seems like an issue with my environment rather
> than
> gdal itself.
>
>       Would it be safe if I install gdal related libraries (fiona,
> geopandas, etc...) with conda-forge, and everything else with pip? Some
> packages can only be installed with pip...
>
> Thanks for the help. And by the way Jukka, how would I solve the database
> error?
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/519933c0/attachment-0001.html>

From runette at gmail.com  Wed Jun 16 09:03:36 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 16 Jun 2021 17:03:36 +0100
Subject: [gdal-dev] TypeError Wrong number or type of arguments for
 overloaded function 'CoordinateTransformation_TransformPoint'.
In-Reply-To: <CAE8nN5MFc_nn=Mpxht_NNhzuS5NvxvU5gpv-dvOZy7a-kwomhA@mail.gmail.com>
References: <1623818481513-0.post@n6.nabble.com>
 <1623858654634-0.post@n6.nabble.com>
 <CAE8nN5MFc_nn=Mpxht_NNhzuS5NvxvU5gpv-dvOZy7a-kwomhA@mail.gmail.com>
Message-ID: <CAE8nN5OKay3uX5FP+SH1k9mvVSMkWNF1FOv8QSX3FLoL7ZPLoQ@mail.gmail.com>

... and if you have the conda-forge GDAL I think you have already fixed the
proj.db problem since you now have the latest version of proj.db.

On Wed, 16 Jun 2021 at 17:01, Paul Harwood <runette at gmail.com> wrote:

> Yep - they should be fine (it is what I do) as long as none of the pip
> packages install gdal or proj - which may work but may also cause problems.
>
> As per the conda docs - you should try to install the conda packages into
> the env BEFORE the pip packages - so you should probably start with a new
> clean conda env, add the conda-forge packages and then add the pip packages.
>
> I have occasionally had some problems between conda packages and GLOBAL
> pip packages - since I think the later can override the conda environments.
> You should not install any of your packages globally and only add them to
> the virtual environment.
>
> On Wed, 16 Jun 2021 at 16:51, zerovirus123 <briansia93 at gmail.com> wrote:
>
>> Hi all,
>>
>>        So I created a new Conda environment, installed only gdal-3.3.0
>> from
>> conda-forge, isolated the code snippet from my project and ran the code.
>> The
>> code executed without any issues. I then ran the test code in my old
>> environment and it worked fine, but when I ran the whole project I got the
>> TransformPoint error. It seems like an issue with my environment rather
>> than
>> gdal itself.
>>
>>       Would it be safe if I install gdal related libraries (fiona,
>> geopandas, etc...) with conda-forge, and everything else with pip? Some
>> packages can only be installed with pip...
>>
>> Thanks for the help. And by the way Jukka, how would I solve the database
>> error?
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/75014f61/attachment.html>

From even.rouault at spatialys.com  Wed Jun 16 09:40:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jun 2021 18:40:45 +0200
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <1623859099786-0.post@n6.nabble.com>
References: <1623859099786-0.post@n6.nabble.com>
Message-ID: <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>

What is exacly LJPEG ? Is it Lossless JPEG ? If so, you need the CharLS 
driver: https://gdal.org/drivers/raster/jpegls.html

Le 16/06/2021 ? 17:58, GeodudeKid a ?crit?:
> Is there an LJPEG driver for GDAL? I tried looking on the documentation
> online, but nothing really showed up. Has there been anyone that has added
> support for LJPEG compression?
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From emiri.codes at gmail.com  Wed Jun 16 09:56:06 2021
From: emiri.codes at gmail.com (GeodudeKid)
Date: Wed, 16 Jun 2021 09:56:06 -0700 (MST)
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>
References: <1623859099786-0.post@n6.nabble.com>
 <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>
Message-ID: <1623862566720-0.post@n6.nabble.com>

LJPEG is lossless JPEG. Trying to produce a NITF that is representative of
the Image Compression (IC) field being set to C5 or C6. C5 should be for
LJPEG, and C6 is for JPEGLS. I was wondering if there's a separate driver
for lossless JPEG, or if JPEGLS is a catch-all for both compression
algorithms.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rajeshreddy82 at gmail.com  Wed Jun 16 10:15:40 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Wed, 16 Jun 2021 10:15:40 -0700 (MST)
Subject: [gdal-dev] How to view geopackage file which is having vector
 tiles (MapBox Vector Tiles format)
In-Reply-To: <88466b86-26ca-0f14-44f2-097bb7faf06d@spatialys.com>
References: <1623846227217-0.post@n6.nabble.com>
 <88466b86-26ca-0f14-44f2-097bb7faf06d@spatialys.com>
Message-ID: <1623863740396-0.post@n6.nabble.com>

Thanks for the client's information.

As part of Prototype, we have created gpkg file ourselves with MVT vector
tiles with https://www.geopackage.org/extensions.html proposed extensions.

Regards,
Rajesh





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Jun 16 10:19:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jun 2021 19:19:22 +0200
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <1623862566720-0.post@n6.nabble.com>
References: <1623859099786-0.post@n6.nabble.com>
 <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>
 <1623862566720-0.post@n6.nabble.com>
Message-ID: <94b08af3-bef5-5113-fec8-cec8331e3636@spatialys.com>

Hum, your answer confuses me. Do you have a pointer to where LJPEG is 
specified, and how different it is from JPEGLS ?

Looking at MIL-STD-2500C 
(https://nsgreg.nga.mil/doc/view?i=4724&month=3&day=22&year=2021), it 
mentions

C5 - Lossless JPEG

C6 - reserved values that will represent a future correlated 
multicomponent compression algorithm

What I can say is that the GDAL NITF driver currently doesn't handle 
C5/C6 (no connection with the CharLS driver)

Even

Le 16/06/2021 ? 18:56, GeodudeKid a ?crit?:
> LJPEG is lossless JPEG. Trying to produce a NITF that is representative of
> the Image Compression (IC) field being set to C5 or C6. C5 should be for
> LJPEG, and C6 is for JPEGLS. I was wondering if there's a separate driver
> for lossless JPEG, or if JPEGLS is a catch-all for both compression
> algorithms.
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From loridigia at gmail.com  Wed Jun 16 10:49:45 2021
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Wed, 16 Jun 2021 19:49:45 +0200
Subject: [gdal-dev] Merge multiple TIFF / NC in single NC
In-Reply-To: <8a24c308-bef3-e278-2515-4c817e239ad6@spatialys.com>
References: <CAERmyNSR3ANu8Jg==LutQ924AJbmSzHsD=3b56fO812aA=AQrg@mail.gmail.com>
 <8a24c308-bef3-e278-2515-4c817e239ad6@spatialys.com>
Message-ID: <CAERmyNTSKEK9iV-TQwrtq+EUkr1ycxLoTK=+8MQ7b8F2D+J4Hw@mail.gmail.com>

Hi Even, first of all thanks for your fast reply!!
I did as you said but, when i do the gdalbuildvrt -separate tmp.vrt in1.tif
... in2.tif ( or similar gdalbuildvrt -separate tmp.vrt in1.nc ... in2.nc )
i got the message "

fileName.ext has 100 bands. Only the first one will be taken into account
in the -separate case".

In fact i have for each .tiff 100 bands and for each .nc 1 band with 100
levels ... What i'd like to have is that the resulting "OUT.NC" has N bands
(N = number of .nc / tiff) and for each of these bands their associated
levels (exactly as the original image was).
Any ideas?

Thanks!!

Il giorno mer 16 giu 2021 alle ore 17:28 Even Rouault <
even.rouault at spatialys.com> ha scritto:

> Either with gdal_merge.py -separate -o out.nc in1.tif ... in2.tif  (
> https://gdal.org/programs/gdal_merge.html), but it might be memory hungry
>
> Or use gdalbuildvrt -separate tmp.vrt in1.tif ... in2.tif + gdal_translate
> tmp.vrt out.nc
> Le 16/06/2021 ? 17:22, Lorenzo Di Giacomo a ?crit :
>
> Hi everybody, initially i have 1 NetCDF and for each band i create 1
> GEOTIFF.
> Now, i have X ( where X = #bands) TIFF files and i want to come back to 1
> NetCDF file.
> How should i do it?
>
> P.S. i saw that with gdal_translate i can also transform each GEOTIFF in
> one NetCDF, but at the end i cant find a way to merge all this files into 1
> single NetCDF.
>
> If you have any suggestions i'll really appreciate it, thanks
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210616/4217f07e/attachment.html>

From emiri.codes at gmail.com  Wed Jun 16 10:53:52 2021
From: emiri.codes at gmail.com (GeodudeKid)
Date: Wed, 16 Jun 2021 10:53:52 -0700 (MST)
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <94b08af3-bef5-5113-fec8-cec8331e3636@spatialys.com>
References: <1623859099786-0.post@n6.nabble.com>
 <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>
 <1623862566720-0.post@n6.nabble.com>
 <94b08af3-bef5-5113-fec8-cec8331e3636@spatialys.com>
Message-ID: <1623866032766-0.post@n6.nabble.com>

We can refer to this: https://en.wikipedia.org/wiki/Lossless_JPEG. "Besides
lossless compression, JPEG-LS also provides a lossy mode ("near-lossless")
where the maximum absolute error can be controlled by the encoder." That
being said, would the existing JPEGLS driver be able to support lossless and
lossy input imagery?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Jun 16 11:07:43 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jun 2021 20:07:43 +0200
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <1623866032766-0.post@n6.nabble.com>
References: <1623859099786-0.post@n6.nabble.com>
 <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>
 <1623862566720-0.post@n6.nabble.com>
 <94b08af3-bef5-5113-fec8-cec8331e3636@spatialys.com>
 <1623866032766-0.post@n6.nabble.com>
Message-ID: <d29c70d3-a534-3058-1364-42b8471e2c80@spatialys.com>


Le 16/06/2021 ? 19:53, GeodudeKid a ?crit?:
> We can refer to this: https://en.wikipedia.org/wiki/Lossless_JPEG. "Besides
> lossless compression, JPEG-LS also provides a lossy mode ("near-lossless")
> where the maximum absolute error can be controlled by the encoder." That
> being said, would the existing JPEGLS driver be able to support lossless and
> lossy input imagery?

Its capabilities should match the ones of 
https://github.com/team-charls/charls :

"This project's goal is to provide a full implementation of the ISO/IEC 
14495-1:1999, "Lossless and near-lossless compression of continuous-tone 
still images: Baseline" standard."

But I'm not aware of Lossless JPEG (not sure which variant NITF refers 
to, if it is the " 1993 addition to JPEG standard " or JPEG-LS 
ISO-14495-1/ITU-T.87) being actually used in practice with NITF (at 
least I've never seen such beast). People generally use either good-old 
JPEG or JPEG-2000 if they want compression.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From cgohlke at uci.edu  Wed Jun 16 11:00:02 2021
From: cgohlke at uci.edu (Christoph Gohlke)
Date: Wed, 16 Jun 2021 11:00:02 -0700
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <94b08af3-bef5-5113-fec8-cec8331e3636@spatialys.com>
References: <1623859099786-0.post@n6.nabble.com>
 <cb138b90-681b-5cd5-d175-8cbf07abeb5b@spatialys.com>
 <1623862566720-0.post@n6.nabble.com>
 <94b08af3-bef5-5113-fec8-cec8331e3636@spatialys.com>
Message-ID: <3ed7e7a2-2fff-40cf-c00c-8ce4e8286ead@uci.edu>

Lossless JPEG is defined in the Annex H of the JPEG specification. 
<https://www.w3.org/Graphics/JPEG/itu-t81.pdf>

See also 
<http://fileformats.archiveteam.org/wiki/Lossless_JPEG_(original)> and 
<https://www.loc.gov/preservation/digital/formats/fdd/fdd000334.shtml>.

LJPEG compressed images can be found in DICOM, DNG, and NITF.

Libjpeg(-turbo) can't decode it and errors with "Unsupported JPEG 
process: SOF type 0xc3"

Libjpeg <https://github.com/thorfdbg/libjpeg> can read (write?) the 
format but is GPL licensed.

Christoph


On 6/16/2021 10:19 AM, Even Rouault wrote:
> Hum, your answer confuses me. Do you have a pointer to where LJPEG is 
> specified, and how different it is from JPEGLS ?
> 
> Looking at MIL-STD-2500C 
> (https://nsgreg.nga.mil/doc/view?i=4724&month=3&day=22&year=2021), it 
> mentions
> 
> C5 - Lossless JPEG
> 
> C6 - reserved values that will represent a future correlated 
> multicomponent compression algorithm
> 
> What I can say is that the GDAL NITF driver currently doesn't handle 
> C5/C6 (no connection with the CharLS driver)
> 
> Even
> 
> Le 16/06/2021 ? 18:56, GeodudeKid a ?crit?:
>> LJPEG is lossless JPEG. Trying to produce a NITF that is 
>> representative of
>> the Image Compression (IC) field being set to C5 or C6. C5 should be for
>> LJPEG, and C6 is for JPEGLS. I was wondering if there's a separate driver
>> for lossless JPEG, or if JPEGLS is a catch-all for both compression
>> algorithms.
>>
>>
>>
>> -- 
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From bradh at frogmouth.net  Wed Jun 16 16:01:09 2021
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Thu, 17 Jun 2021 09:01:09 +1000
Subject: [gdal-dev] LJPEG Support for GDAL
In-Reply-To: <d29c70d3-a534-3058-1364-42b8471e2c80@spatialys.com>
Message-ID: <3e0ca866-299e-4aa5-9418-06ea44517610@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/afbe7a84/attachment.html>

From ahmettemiz88 at gmail.com  Thu Jun 17 00:06:51 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Thu, 17 Jun 2021 10:06:51 +0300
Subject: [gdal-dev] export to geometrycollection.
In-Reply-To: <1094b304-4e70-0d90-2e4b-315f2f672bac@spatialys.com>
References: <CAJKO1Ys5tyepu9zyMC+4gAqXUsWxav1Wu8Jk3NNsDsN5wyObTA@mail.gmail.com>
 <1094b304-4e70-0d90-2e4b-315f2f672bac@spatialys.com>
Message-ID: <CAJKO1YtHyqnL5a-h5XA8FbvHfgu4Rg=Q+ExaPR3OQuyhgAaU+g@mail.gmail.com>

Thanks, I'll check it out.

On Sun, Jun 13, 2021 at 9:53 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Ahmet,
>
> use the OGRGeometryFactory::forceTo(geom, wkbGeometrycollection) method:
>
>
> https://gdal.org/api/ogrgeometry_cpp.html#classOGRGeometryFactory_1a26120382ccfec8ac4b5f932dd3a67c5f
>
> Even
> Le 13/06/2021 ? 20:45, Ahmet Temiz a ?crit :
>
> Hi,
> I exported the geometry to geojson as:
>
> OGRMultiPolygon * poOGRMultiPolygon= (OGRMultiPolygon * ) unionCascaded;
>     //
>  char * pszJSon= poOGRMultiPolygon->exportToJson();
>
> this generates:
>  "type": "MultiPolygon", "coordinates": ....
>
> But.  I need geometrycollection.
> How can I do that?
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Deprem  Dairesi Ba?kanl???
>
>
> ________________________
>
> Ahmet Temiz
> Geological Eng.
>
> Disaster and Emergency Management
> of Presidency
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/8b9f71c2/attachment.html>

From ahmettemiz88 at gmail.com  Thu Jun 17 00:25:50 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Thu, 17 Jun 2021 10:25:50 +0300
Subject: [gdal-dev] (no subject)
Message-ID: <CAJKO1YuiozyP431oeuqV1MuQu5RkecK9N4D0Nc7jUEHbStzeyw@mail.gmail.com>

Hi,
How can I can create FeatureCollection  from :
```OGRMultiPolygon * poOGRMultiPolygon= (OGRMultiPolygon * )
unionCascaded;```


kind regards


-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/e7195427/attachment.html>

From loridigia at gmail.com  Thu Jun 17 01:09:24 2021
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Thu, 17 Jun 2021 10:09:24 +0200
Subject: [gdal-dev] Merge multiple TIFF / NC in single NC
In-Reply-To: <CAERmyNTSKEK9iV-TQwrtq+EUkr1ycxLoTK=+8MQ7b8F2D+J4Hw@mail.gmail.com>
References: <CAERmyNSR3ANu8Jg==LutQ924AJbmSzHsD=3b56fO812aA=AQrg@mail.gmail.com>
 <8a24c308-bef3-e278-2515-4c817e239ad6@spatialys.com>
 <CAERmyNTSKEK9iV-TQwrtq+EUkr1ycxLoTK=+8MQ7b8F2D+J4Hw@mail.gmail.com>
Message-ID: <CAERmyNQVNB65nTrkjiym_QDPp6WeduxqLSL858Y+=EwFEMxu-Q@mail.gmail.com>

I think i have explained what i'd like to have, i attach the image of the
initial .nc file that i would like to have back at the end of the process:

do you have any suggestions? Thanks a lot
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/1480121b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Schermata 2021-06-17 alle 10.05.08.png
Type: image/png
Size: 19390 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/1480121b/attachment-0001.png>

From loridigia at gmail.com  Thu Jun 17 01:10:36 2021
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Thu, 17 Jun 2021 10:10:36 +0200
Subject: [gdal-dev] Merge multiple TIFF / NC in single NC
In-Reply-To: <CAERmyNQVNB65nTrkjiym_QDPp6WeduxqLSL858Y+=EwFEMxu-Q@mail.gmail.com>
References: <CAERmyNSR3ANu8Jg==LutQ924AJbmSzHsD=3b56fO812aA=AQrg@mail.gmail.com>
 <8a24c308-bef3-e278-2515-4c817e239ad6@spatialys.com>
 <CAERmyNTSKEK9iV-TQwrtq+EUkr1ycxLoTK=+8MQ7b8F2D+J4Hw@mail.gmail.com>
 <CAERmyNQVNB65nTrkjiym_QDPp6WeduxqLSL858Y+=EwFEMxu-Q@mail.gmail.com>
Message-ID: <CAERmyNSHxYiZppu4XnGOfH2VzbiG26SBNk4Ss3icRkawxJdoxg@mail.gmail.com>

i have explained BAD*

Il giorno gio 17 giu 2021 alle ore 10:09 Lorenzo Di Giacomo <
loridigia at gmail.com> ha scritto:

> I think i have explained what i'd like to have, i attach the image of the
> initial .nc file that i would like to have back at the end of the process:
>
> do you have any suggestions? Thanks a lot
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/7c5c8ac2/attachment.html>

From mingchin.st at gmail.com  Thu Jun 17 08:41:31 2021
From: mingchin.st at gmail.com (Ming Chin)
Date: Thu, 17 Jun 2021 08:41:31 -0700
Subject: [gdal-dev] gdal & WMS
Message-ID: <CANuOYTHhpat6Ds26CXtO2i7u5ytDuixXKBioN6VJ2MO+K_hgQw@mail.gmail.com>

Hello GDAL devs,

I am a GDAL rookie, and I am trying to add WMS support to an existing GDAL
(2.2.4) implementation.

I saw in this example:

https://gis.stackexchange.com/questions/67416/using-gdal-to-connect-to-a-wfs

that its possible to provide OGRSFDriverRegistrar::Open(sURL,  FALSE );

with a url and use it to open an OGRDataSource.

And in other examples I see that OGRSFDriverRegistrar::Open() has been
deprecated and that GDALOpen() should be used instead.

So I did that, adding cURL to our GDAL build, and then in my
implementation, I provided GDALOpen() with a URL like this:

GDALDataset *pDataset = (GDALDataset*)::GDALOpen(sURL, GA_ReadOnly);
if( pDataset  )
{
    int nLayers =  pDataset->GetLayerCount();
    OGRLayer *pLayer =  pDataset->GetLayerByName(sLayerName);
}

This seems to partially work, in the sense that the  GDALOpen function
returns a non-NULL pointer to a GDALDataset, but when I try to call the
member functions of the resulting GDALDataset, everything seems to return
zeros or nulls;

The above call returns nLayers = 0, and  pLayer=NULL

but if I feed the same sURL into my web browser (Chrome), the browser
receives a properly formatted xml file that clearly has <Layer>(s) defined
in it.

What am I missing?  Why am I unable to retrieve useful data from the
dataset?

Ming
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/c0d4da76/attachment.html>

From even.rouault at spatialys.com  Thu Jun 17 08:47:08 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jun 2021 17:47:08 +0200
Subject: [gdal-dev] gdal & WMS
In-Reply-To: <CANuOYTHhpat6Ds26CXtO2i7u5ytDuixXKBioN6VJ2MO+K_hgQw@mail.gmail.com>
References: <CANuOYTHhpat6Ds26CXtO2i7u5ytDuixXKBioN6VJ2MO+K_hgQw@mail.gmail.com>
Message-ID: <4fce0710-ded4-1278-6d75-56cc4fa0188c@spatialys.com>

Ming,

A OGRLayer is a *vector* layer, not a raster one. So you should rather 
look at the raster API: https://gdal.org/tutorials/raster_api_tut.html

Depending on the kind of URL you provide to GDAL, you may get directly a 
workable dataset, or just a placeholder that links to real datasets with 
the subdataset (which can be seen as a king of raster layer) mechanism, 
using GDALDataset::GetMetadata("SUBDATASETS") to get the list of 
subdatasets, and then pass to GDALOpen() the value of one of the 
SUBDATASET_xx_NAME item

Even

Le 17/06/2021 ? 17:41, Ming Chin a ?crit?:
>
> Hello GDAL devs,
>
> I am a GDAL rookie, and I am trying to add WMS support to an 
> existing?GDAL (2.2.4) implementation.
>
> I saw in this example:
>
> https://gis.stackexchange.com/questions/67416/using-gdal-to-connect-to-a-wfs 
> <https://gis.stackexchange.com/questions/67416/using-gdal-to-connect-to-a-wfs>
>
> that its possible to provide OGRSFDriverRegistrar::Open(sURL, ?FALSE );
>
> with a url and use it to open an OGRDataSource.
>
> And in other examples I see that OGRSFDriverRegistrar::Open() has been 
> deprecated and that GDALOpen() should be used instead.
>
> So I did that, adding cURL to our GDAL build, and then in my 
> implementation, I provided GDALOpen() with a URL like this:
>
> GDALDataset *pDataset =?(GDALDataset*)::GDALOpen(sURL, GA_ReadOnly);
> if( pDataset? )
> {
> ? ? int nLayers = pDataset->GetLayerCount();
> ? ??OGRLayer *pLayer = pDataset->GetLayerByName(sLayerName);
> }
>
> This seems to partially work, in the sense that the GDALOpen function 
> returns a non-NULL pointer to a GDALDataset, but when?I try to call 
> the member functions of the resulting GDALDataset, everything seems to 
> return zeros or nulls;
>
> The above call returns nLayers = 0, and pLayer=NULL
>
> but if I feed the same sURL into my web browser (Chrome), the browser 
> receives a properly formatted xml file that clearly has <Layer>(s) 
> defined in it.
>
> What am I missing?? Why am I unable to retrieve useful data from the 
> dataset?
>
> Ming
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/4d7ed9f1/attachment.html>

From Matt.Wilkie at yukon.ca  Thu Jun 17 10:14:54 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Thu, 17 Jun 2021 17:14:54 +0000
Subject: [gdal-dev] python: set CacheMax to percent, MB, GB?
Message-ID: <a793fcabae234941be7aa05d9a458192@yukon.ca>

I see in https://gdal.org/python/osgeo.gdal-module.html#SetCacheMax we set the value using bytes. Is there a prebuilt method to convert units like percent, megabytes, gigabytes to bytes or is it up to us to build one?

Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/904b33de/attachment-0001.html>

From even.rouault at spatialys.com  Thu Jun 17 10:21:10 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jun 2021 19:21:10 +0200
Subject: [gdal-dev] python: set CacheMax to percent, MB, GB?
In-Reply-To: <a793fcabae234941be7aa05d9a458192@yukon.ca>
References: <a793fcabae234941be7aa05d9a458192@yukon.ca>
Message-ID: <49dd437b-73d3-0fa2-dbe4-d5ff30fe6da7@spatialys.com>

Matt,

Le 17/06/2021 ? 19:14, Matt.Wilkie at yukon.ca a ?crit?:
>
> I see in https://gdal.org/python/osgeo.gdal-module.html#SetCacheMax 
> <https://gdal.org/python/osgeo.gdal-module.html#SetCacheMax> we set 
> the value using bytes. Is there a prebuilt method to convert units 
> like percent, megabytes, gigabytes to bytes or is it up to us to build 
> one?
>
up to the user

you could also call gdal.SetConfigOption('GDAL_CACHEMAX', string), but 
you need to do that *before* reading any raster in the process (or any 
call to gdal.SetCacheMax/GetCacheMax), otherwise it will be ignored.

Even--

http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/7c1efea3/attachment.html>

From Matt.Wilkie at yukon.ca  Thu Jun 17 10:44:11 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Thu, 17 Jun 2021 17:44:11 +0000
Subject: [gdal-dev] python: set CacheMax to percent, MB, GB?
In-Reply-To: <49dd437b-73d3-0fa2-dbe4-d5ff30fe6da7@spatialys.com>
References: <a793fcabae234941be7aa05d9a458192@yukon.ca>
 <49dd437b-73d3-0fa2-dbe4-d5ff30fe6da7@spatialys.com>
Message-ID: <1462b03030b549a09730a08e1c51c42b@yukon.ca>

you could also call gdal.SetConfigOption('GDAL_CACHEMAX', string), but you need to do that *before* reading any raster in the process (or any call to gdal.SetCacheMax/GetCacheMax), otherwise it will be ignored.

Thanks! ...Later: How to use it? It doesn't seem to work for me:

~~~
>>> gdal.GetCacheMax()
4294967296
>>> gdal.SetCacheMax(0)
>>> gdal.GetCacheMax()
0
>>> gdal.SetConfigOption('GDAL_CACHEMAX','50%')
>>> gdal.GetCacheMax()
0
>>> gdal.SetConfigOption('GDAL_CACHEMAX','500')
>>> gdal.GetCacheMax()
0
>>> gdal.VersionInfo()
'3020200
~~~

Python 3.8.8 (default, Feb 24 2021, 15:54:32) on Windows (64 bits).



-Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/ebe8c592/attachment.html>

From even.rouault at spatialys.com  Thu Jun 17 10:49:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jun 2021 19:49:11 +0200
Subject: [gdal-dev] python: set CacheMax to percent, MB, GB?
In-Reply-To: <1462b03030b549a09730a08e1c51c42b@yukon.ca>
References: <a793fcabae234941be7aa05d9a458192@yukon.ca>
 <49dd437b-73d3-0fa2-dbe4-d5ff30fe6da7@spatialys.com>
 <1462b03030b549a09730a08e1c51c42b@yukon.ca>
Message-ID: <d18be1cd-e227-cf2a-47a8-81c62f366e51@spatialys.com>


Le 17/06/2021 ? 19:44, Matt.Wilkie at yukon.ca a ?crit?:
>
> you could also call gdal.SetConfigOption('GDAL_CACHEMAX', string), but 
> you need to do that *before* reading any raster in the process (or any 
> call to gdal.SetCacheMax/GetCacheMax), otherwise it will be ignored.
>
> Thanks! ?/Later/: How to use it? It doesn?t seem to work for me:
>
That's exacly what I wrote :-) you can't use 
gdal.SetConfigOption('GDAL_CACHEMAX', string) after calling 
gdal.SetCacheMax/GetCacheMax.? You need to use gdal.SetCacheMax() after.

That's not to annoy users, but we just don't want to pay the cost of 
reading an environment variable each time GDALGetCacheMax() is used 
internally, potentially in time critical code paths, so it is read just 
once.//

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/903fe1f2/attachment.html>

From mingchin.st at gmail.com  Thu Jun 17 11:02:29 2021
From: mingchin.st at gmail.com (Ming Chin)
Date: Thu, 17 Jun 2021 11:02:29 -0700
Subject: [gdal-dev] gdal & WMS
In-Reply-To: <4fce0710-ded4-1278-6d75-56cc4fa0188c@spatialys.com>
References: <CANuOYTHhpat6Ds26CXtO2i7u5ytDuixXKBioN6VJ2MO+K_hgQw@mail.gmail.com>
 <4fce0710-ded4-1278-6d75-56cc4fa0188c@spatialys.com>
Message-ID: <CANuOYTH4xH1v4EoDyr6VrPbit8W8itjQeuEWez14pZrQjdJsww@mail.gmail.com>

Hello Even,
thank you for your input.
I will review the raster API as you have suggested.  However, as I
understand the requirements of my task, I need to support the vector API as
well, because we do need to support vector layers.
Can you, or anyone else here, point to a recommended guide/tutorial to
implementing gdal wms vector layers (in c++)?

Thank you,
Ming

On Thu, 17 Jun 2021 at 08:47, Even Rouault <even.rouault at spatialys.com>
wrote:

> Ming,
>
> A OGRLayer is a *vector* layer, not a raster one. So you should rather
> look at the raster API: https://gdal.org/tutorials/raster_api_tut.html
>
> Depending on the kind of URL you provide to GDAL, you may get directly a
> workable dataset, or just a placeholder that links to real datasets with
> the subdataset (which can be seen as a king of raster layer) mechanism,
> using GDALDataset::GetMetadata("SUBDATASETS") to get the list of
> subdatasets, and then pass to GDALOpen() the value of one of the
> SUBDATASET_xx_NAME item
>
> Even
> Le 17/06/2021 ? 17:41, Ming Chin a ?crit :
>
>
> Hello GDAL devs,
>
> I am a GDAL rookie, and I am trying to add WMS support to an existing GDAL
> (2.2.4) implementation.
>
> I saw in this example:
>
>
> https://gis.stackexchange.com/questions/67416/using-gdal-to-connect-to-a-wfs
>
> that its possible to provide OGRSFDriverRegistrar::Open(sURL,  FALSE );
>
> with a url and use it to open an OGRDataSource.
>
> And in other examples I see that OGRSFDriverRegistrar::Open() has been
> deprecated and that GDALOpen() should be used instead.
>
> So I did that, adding cURL to our GDAL build, and then in my
> implementation, I provided GDALOpen() with a URL like this:
>
> GDALDataset *pDataset = (GDALDataset*)::GDALOpen(sURL, GA_ReadOnly);
> if( pDataset  )
> {
>     int nLayers =  pDataset->GetLayerCount();
>     OGRLayer *pLayer =  pDataset->GetLayerByName(sLayerName);
> }
>
> This seems to partially work, in the sense that the  GDALOpen function
> returns a non-NULL pointer to a GDALDataset, but when I try to call the
> member functions of the resulting GDALDataset, everything seems to return
> zeros or nulls;
>
> The above call returns nLayers = 0, and  pLayer=NULL
>
> but if I feed the same sURL into my web browser (Chrome), the browser
> receives a properly formatted xml file that clearly has <Layer>(s) defined
> in it.
>
> What am I missing?  Why am I unable to retrieve useful data from the
> dataset?
>
> Ming
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/555a5871/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Thu Jun 17 11:12:57 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Thu, 17 Jun 2021 18:12:57 +0000
Subject: [gdal-dev] python: set CacheMax to percent, MB, GB?
In-Reply-To: <d18be1cd-e227-cf2a-47a8-81c62f366e51@spatialys.com>
References: <a793fcabae234941be7aa05d9a458192@yukon.ca>
 <49dd437b-73d3-0fa2-dbe4-d5ff30fe6da7@spatialys.com>
 <1462b03030b549a09730a08e1c51c42b@yukon.ca>
 <d18be1cd-e227-cf2a-47a8-81c62f366e51@spatialys.com>
Message-ID: <88d8d0c01406471fbab66aa8746eba64@yukon.ca>

Ohhh. Sorry for being dense. Sometimes the hammer has to strike a couple times... ;-) Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/d645f9d2/attachment.html>

From cgodkin at gmail.com  Thu Jun 17 11:57:51 2021
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 17 Jun 2021 11:57:51 -0700
Subject: [gdal-dev] gdal & WMS
In-Reply-To: <CANuOYTH4xH1v4EoDyr6VrPbit8W8itjQeuEWez14pZrQjdJsww@mail.gmail.com>
References: <CANuOYTHhpat6Ds26CXtO2i7u5ytDuixXKBioN6VJ2MO+K_hgQw@mail.gmail.com>
 <4fce0710-ded4-1278-6d75-56cc4fa0188c@spatialys.com>
 <CANuOYTH4xH1v4EoDyr6VrPbit8W8itjQeuEWez14pZrQjdJsww@mail.gmail.com>
Message-ID: <CAE=8kmmANQfQ=EnNVh6hLGYhV=gYComvYQULjg=0v6bTrfeswg@mail.gmail.com>

Hi Ming,

There are no vector layers in WMS.  It's for imagery only.

Perhaps you are interested in WFS instead?

carl

On Thu, Jun 17, 2021 at 11:03 AM Ming Chin <mingchin.st at gmail.com> wrote:

> Hello Even,
> thank you for your input.
> I will review the raster API as you have suggested.  However, as I
> understand the requirements of my task, I need to support the vector API as
> well, because we do need to support vector layers.
> Can you, or anyone else here, point to a recommended guide/tutorial to
> implementing gdal wms vector layers (in c++)?
>
> Thank you,
> Ming
>
> On Thu, 17 Jun 2021 at 08:47, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Ming,
>>
>> A OGRLayer is a *vector* layer, not a raster one. So you should rather
>> look at the raster API: https://gdal.org/tutorials/raster_api_tut.html
>>
>> Depending on the kind of URL you provide to GDAL, you may get directly a
>> workable dataset, or just a placeholder that links to real datasets with
>> the subdataset (which can be seen as a king of raster layer) mechanism,
>> using GDALDataset::GetMetadata("SUBDATASETS") to get the list of
>> subdatasets, and then pass to GDALOpen() the value of one of the
>> SUBDATASET_xx_NAME item
>>
>> Even
>> Le 17/06/2021 ? 17:41, Ming Chin a ?crit :
>>
>>
>> Hello GDAL devs,
>>
>> I am a GDAL rookie, and I am trying to add WMS support to an
>> existing GDAL (2.2.4) implementation.
>>
>> I saw in this example:
>>
>>
>> https://gis.stackexchange.com/questions/67416/using-gdal-to-connect-to-a-wfs
>>
>> that its possible to provide OGRSFDriverRegistrar::Open(sURL,  FALSE );
>>
>> with a url and use it to open an OGRDataSource.
>>
>> And in other examples I see that OGRSFDriverRegistrar::Open() has been
>> deprecated and that GDALOpen() should be used instead.
>>
>> So I did that, adding cURL to our GDAL build, and then in my
>> implementation, I provided GDALOpen() with a URL like this:
>>
>> GDALDataset *pDataset = (GDALDataset*)::GDALOpen(sURL, GA_ReadOnly);
>> if( pDataset  )
>> {
>>     int nLayers =  pDataset->GetLayerCount();
>>     OGRLayer *pLayer =  pDataset->GetLayerByName(sLayerName);
>> }
>>
>> This seems to partially work, in the sense that the  GDALOpen function
>> returns a non-NULL pointer to a GDALDataset, but when I try to call the
>> member functions of the resulting GDALDataset, everything seems to return
>> zeros or nulls;
>>
>> The above call returns nLayers = 0, and  pLayer=NULL
>>
>> but if I feed the same sURL into my web browser (Chrome), the browser
>> receives a properly formatted xml file that clearly has <Layer>(s) defined
>> in it.
>>
>> What am I missing?  Why am I unable to retrieve useful data from the
>> dataset?
>>
>> Ming
>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/8e1e2ed2/attachment.html>

From mingchin.st at gmail.com  Thu Jun 17 14:42:48 2021
From: mingchin.st at gmail.com (Ming Chin)
Date: Thu, 17 Jun 2021 14:42:48 -0700
Subject: [gdal-dev] gdal & WMS
In-Reply-To: <CAE=8kmmANQfQ=EnNVh6hLGYhV=gYComvYQULjg=0v6bTrfeswg@mail.gmail.com>
References: <CANuOYTHhpat6Ds26CXtO2i7u5ytDuixXKBioN6VJ2MO+K_hgQw@mail.gmail.com>
 <4fce0710-ded4-1278-6d75-56cc4fa0188c@spatialys.com>
 <CANuOYTH4xH1v4EoDyr6VrPbit8W8itjQeuEWez14pZrQjdJsww@mail.gmail.com>
 <CAE=8kmmANQfQ=EnNVh6hLGYhV=gYComvYQULjg=0v6bTrfeswg@mail.gmail.com>
Message-ID: <CANuOYTFor9KMJK_SsXP7FsFp3Hmo4WrtT2+dxUQPe5ODscZuEg@mail.gmail.com>

hello Carl,
in the end I need to implement support for vectors, so yes, WFS is where I
need to go, but in the interim, i need wms rasters as well.

Ming

On Thu, 17 Jun 2021 at 11:58, Carl Godkin <cgodkin at gmail.com> wrote:

> Hi Ming,
>
> There are no vector layers in WMS.  It's for imagery only.
>
> Perhaps you are interested in WFS instead?
>
> carl
>
> On Thu, Jun 17, 2021 at 11:03 AM Ming Chin <mingchin.st at gmail.com> wrote:
>
>> Hello Even,
>> thank you for your input.
>> I will review the raster API as you have suggested.  However, as I
>> understand the requirements of my task, I need to support the vector API as
>> well, because we do need to support vector layers.
>> Can you, or anyone else here, point to a recommended guide/tutorial to
>> implementing gdal wms vector layers (in c++)?
>>
>> Thank you,
>> Ming
>>
>> On Thu, 17 Jun 2021 at 08:47, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> Ming,
>>>
>>> A OGRLayer is a *vector* layer, not a raster one. So you should rather
>>> look at the raster API: https://gdal.org/tutorials/raster_api_tut.html
>>>
>>> Depending on the kind of URL you provide to GDAL, you may get directly a
>>> workable dataset, or just a placeholder that links to real datasets with
>>> the subdataset (which can be seen as a king of raster layer) mechanism,
>>> using GDALDataset::GetMetadata("SUBDATASETS") to get the list of
>>> subdatasets, and then pass to GDALOpen() the value of one of the
>>> SUBDATASET_xx_NAME item
>>>
>>> Even
>>> Le 17/06/2021 ? 17:41, Ming Chin a ?crit :
>>>
>>>
>>> Hello GDAL devs,
>>>
>>> I am a GDAL rookie, and I am trying to add WMS support to an
>>> existing GDAL (2.2.4) implementation.
>>>
>>> I saw in this example:
>>>
>>>
>>> https://gis.stackexchange.com/questions/67416/using-gdal-to-connect-to-a-wfs
>>>
>>> that its possible to provide OGRSFDriverRegistrar::Open(sURL,  FALSE );
>>>
>>> with a url and use it to open an OGRDataSource.
>>>
>>> And in other examples I see that OGRSFDriverRegistrar::Open() has been
>>> deprecated and that GDALOpen() should be used instead.
>>>
>>> So I did that, adding cURL to our GDAL build, and then in my
>>> implementation, I provided GDALOpen() with a URL like this:
>>>
>>> GDALDataset *pDataset = (GDALDataset*)::GDALOpen(sURL, GA_ReadOnly);
>>> if( pDataset  )
>>> {
>>>     int nLayers =  pDataset->GetLayerCount();
>>>     OGRLayer *pLayer =  pDataset->GetLayerByName(sLayerName);
>>> }
>>>
>>> This seems to partially work, in the sense that the  GDALOpen function
>>> returns a non-NULL pointer to a GDALDataset, but when I try to call the
>>> member functions of the resulting GDALDataset, everything seems to return
>>> zeros or nulls;
>>>
>>> The above call returns nLayers = 0, and  pLayer=NULL
>>>
>>> but if I feed the same sURL into my web browser (Chrome), the browser
>>> receives a properly formatted xml file that clearly has <Layer>(s) defined
>>> in it.
>>>
>>> What am I missing?  Why am I unable to retrieve useful data from the
>>> dataset?
>>>
>>> Ming
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> -- http://www.spatialys.com
>>> My software is free, but my time generally not.
>>>
>>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210617/33918639/attachment.html>

From bontepaarden at gmail.com  Fri Jun 18 02:07:03 2021
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 18 Jun 2021 11:07:03 +0200
Subject: [gdal-dev] Converting WFS to shapefile
Message-ID: <CAHNf2YQ_OjWyiyAMjDAw003GyqVEFnnXWWv7yZbqC9ZR-zhRZg@mail.gmail.com>

Hi List,

I'm having trouble converting the result of a WFS request to a shapefile.
I'm using two servers, one is working the other not.

My command for the working server:
ogr2ogr -f "ESRI Shapefile" -s_srs "EPSG:4326" -t_srs "EPSG:28992"
"Perceel-bbox.shp" "WFS:
https://geodata.nationaalgeoregister.nl/kadastralekaart/wfs/v4_0?service=WFS&request=GetFeature&version=2.0.0&typename=kadastralekaartv4:perceel&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992
"

And the not working server:
ogr2ogr -f "ESRI Shapefile" --debug ON  -s_srs "EPSG:4326" -t_srs
"EPSG:28992" "Perceel-aan.shp" "WFS:
https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992
"

I don't get an error, the file is just not created.
The debug messages:
WFS:
https://geodata.nationaalgeoregister.nl/aan/wfs?SERVICE=WFS&REQUEST=GetCapabilities&version=2.0.0&srsname=EPSG:4326&bbox=163049,467594,163256,468020,EPSG:28992
HTTP: Fetch(
https://geodata.nationaalgeoregister.nl/aan/wfs?SERVICE=WFS&REQUEST=GetCapabilities&version=2.0.0&srsname=EPSG:4326&bbox=163049,467594,163256,468020,EPSG:28992
)
HTTP: libcurl/7.74.0-DEV OpenSSL/1.1.1i zlib/1.2.11
WFS: Paging support with page size 15000
WFS: No transaction support
GDAL: GDALOpen(WFS:
https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992,
this=0000018A6EA691F0) succeeds as WFS.
GDAL: GDALDriver::Create(ESRI
Shapefile,Perceel-aan.shp,0,0,0,Unknown,0000000000000000)
GDAL: GDALClose(WFS:
https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992,
this=0000018A6EA691F0)
GDAL: GDALClose(Perceel-aan.shp, this=0000018A70565430)
GDAL: In GDALDestroy - unloading GDAL shared library.

When I open the URL in the browser, I do get back JSON data. When I copy
this and paste it in QGis I get the expected polygons.

I'm not sure how I need to change my command to get this working for the
second server as well.
Please advice.

With regards,

Paul Meems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210618/fadb3e07/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jun 18 05:35:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 18 Jun 2021 05:35:48 -0700 (MST)
Subject: [gdal-dev] Converting WFS to shapefile
In-Reply-To: <CAHNf2YQ_OjWyiyAMjDAw003GyqVEFnnXWWv7yZbqC9ZR-zhRZg@mail.gmail.com>
References: <CAHNf2YQ_OjWyiyAMjDAw003GyqVEFnnXWWv7yZbqC9ZR-zhRZg@mail.gmail.com>
Message-ID: <1624019748888-0.post@n6.nabble.com>

Hi,

Run ogrinfo WFS:https://geodata.nationaalgeoregister.nl/aan/wfs
and you'll see
1: aan:aan (title: aan) (Multi Surface)

Use the typeName as it appears. Works for me with

ogr2ogr -f "ESRI Shapefile" --debug ON  -s_srs "EPSG:4326" -t_srs
"EPSG:28992" "Perceel-aan.shp"
"WFS:https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan:aan&srsname=EPSG:4326&bbox=163049,467594,163256,468020,EPSG:28992"

-Jukka Rahkonen-





Paul Meems wrote
> Hi List,
> 
> I'm having trouble converting the result of a WFS request to a shapefile.
> I'm using two servers, one is working the other not.
> 
> My command for the working server:
> ogr2ogr -f "ESRI Shapefile" -s_srs "EPSG:4326" -t_srs "EPSG:28992"
> "Perceel-bbox.shp" "WFS:
> https://geodata.nationaalgeoregister.nl/kadastralekaart/wfs/v4_0?service=WFS&request=GetFeature&version=2.0.0&typename=kadastralekaartv4:perceel&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992
> "
> 
> And the not working server:
> ogr2ogr -f "ESRI Shapefile" --debug ON  -s_srs "EPSG:4326" -t_srs
> "EPSG:28992" "Perceel-aan.shp" "WFS:
> https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992
> "
> 
> I don't get an error, the file is just not created.
> The debug messages:
> WFS:
> https://geodata.nationaalgeoregister.nl/aan/wfs?SERVICE=WFS&REQUEST=GetCapabilities&version=2.0.0&srsname=EPSG:4326&bbox=163049,467594,163256,468020,EPSG:28992
> HTTP: Fetch(
> https://geodata.nationaalgeoregister.nl/aan/wfs?SERVICE=WFS&REQUEST=GetCapabilities&version=2.0.0&srsname=EPSG:4326&bbox=163049,467594,163256,468020,EPSG:28992
> )
> HTTP: libcurl/7.74.0-DEV OpenSSL/1.1.1i zlib/1.2.11
> WFS: Paging support with page size 15000
> WFS: No transaction support
> GDAL: GDALOpen(WFS:
> https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992,
> this=0000018A6EA691F0) succeeds as WFS.
> GDAL: GDALDriver::Create(ESRI
> Shapefile,Perceel-aan.shp,0,0,0,Unknown,0000000000000000)
> GDAL: GDALClose(WFS:
> https://geodata.nationaalgeoregister.nl/aan/wfs?service=WFS&request=GetFeature&version=2.0.0&typename=aan&srsname=EPSG:4326&outputFormat=application/json&bbox=163049,467594,163256,468020,EPSG:28992,
> this=0000018A6EA691F0)
> GDAL: GDALClose(Perceel-aan.shp, this=0000018A70565430)
> GDAL: In GDALDestroy - unloading GDAL shared library.
> 
> When I open the URL in the browser, I do get back JSON data. When I copy
> this and paste it in QGis I get the expected polygons.
> 
> I'm not sure how I need to change my command to get this working for the
> second server as well.
> Please advice.
> 
> With regards,
> 
> Paul Meems
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Jun 18 07:19:17 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Jun 2021 16:19:17 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
Message-ID: <84fc7e61-e81a-bd6a-1238-e21d582222af@spatialys.com>

Hi,

I declare this motion passed with +1 from JukkaR and myself, -0 from 
HowardB and +0 from KurtS

I've issued a revision of my original pull request in 
https://github.com/OSGeo/gdal/pull/4011 that leaves out support for GML, 
KML, GeoJSON, Shapefile and GMLJP2 (JPEG2000 can still benefit from 
coordinate epoch through GeoJP2). So support is implemented for 
GeoPackage (the GeoPackage SWG adopted yesterday the proposed change), 
GeoTIFF (my proposal received good support so will eventually be added 
in the GeoTIFF 1.2 spec), FlatGeoBuf, VRT, PAM .aux.xml and the MEM drivers.

The OGR_CT_USE_SRS_COORDINATE_EPOCH config option can be set to NO to 
ignore the coordinate epoch coming from source or target CRS during 
coordinate transformations.

Even

Le 13/05/2021 ? 11:44, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> adopt RFC 81: support for coordinate epochs in geospatial formats ( 
> https://github.com/OSGeo/gdal/pull/3827 )
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From bheberlein at wisc.edu  Fri Jun 18 11:33:59 2021
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Fri, 18 Jun 2021 18:33:59 +0000
Subject: [gdal-dev] Transformer from & to Control Points in Map CS
Message-ID: <DM6PR06MB4377CFDAA84C5CF3D6A40313BA0D9@DM6PR06MB4377.namprd06.prod.outlook.com>

Hi all,

I wondered if anyone may help me understand how to accomplish this with GDAL (Python API preferred):

I would like to create a custom Transformer, based on control points which associate (map_x1, map_y1)? with (map_x2, map_y2)?. The projection is the same for both sets of points.

This transformer needs to transform point coordinates, although ideally I could warp raster data as well. I would like to use TPS or cubic interpolation.

What is the best way to do this?

Will the standard GCP transformer work? I understand it expects GCPs that associate (image_x, image_y)? with (map_x, map_y)?.


Thanks!

     ? Brendan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210618/481e5c79/attachment.html>

From jenssc at pocalipse.dk  Fri Jun 18 15:43:47 2021
From: jenssc at pocalipse.dk (=?UTF-8?Q?Jens_S=C3=B8e_Christiansen?=)
Date: Sat, 19 Jun 2021 00:43:47 +0200
Subject: [gdal-dev] GetNextFeature doesn't add version and typenames in URL
Message-ID: <CAD=UezpRR+tLGAYjSWZBfqjkv+ehPdSJWr=anwZ1cqPy037YXA@mail.gmail.com>

Hi
I'm desperately trying to read data from a Danish WFS service. Everything
is working well until I try to GetNextFeature. The GDAL is returning HTTP
ERROR 400 and the reason is that version and typenames are missing in the
request!

Am I missing something or is something wrong with the WFS service (It is
working well from inside QGIS) ?

Best regards
Jens Christiansen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/8e3c3706/attachment.html>

From even.rouault at spatialys.com  Fri Jun 18 15:51:15 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Jun 2021 00:51:15 +0200
Subject: [gdal-dev] GetNextFeature doesn't add version and typenames in
 URL
In-Reply-To: <CAD=UezpRR+tLGAYjSWZBfqjkv+ehPdSJWr=anwZ1cqPy037YXA@mail.gmail.com>
References: <CAD=UezpRR+tLGAYjSWZBfqjkv+ehPdSJWr=anwZ1cqPy037YXA@mail.gmail.com>
Message-ID: <98502d6e-1bee-1093-cd09-d0cfad77ba39@spatialys.com>

Jens,

when writing a report, remember that the reader cannot see your screen. 
So at a minimum, provide the connection string to that WFS service that 
you provide to GDAL.

Even

Le 19/06/2021 ? 00:43, Jens S?e Christiansen a ?crit?:
> Hi
> I'm desperately?trying to read data from a Danish WFS service. 
> Everything is working well until I try to GetNextFeature. The GDAL is 
> returning HTTP ERROR 400 and the reason is that version and typenames 
> are missing in the request!
>
> Am I missing something or is something wrong with the WFS service (It 
> is working well from inside QGIS) ?
>
> Best regards
> Jens Christiansen
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/25ecd391/attachment.html>

From even.rouault at spatialys.com  Fri Jun 18 16:39:35 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Jun 2021 01:39:35 +0200
Subject: [gdal-dev] GetNextFeature doesn't add version and typenames in
 URL
In-Reply-To: <98502d6e-1bee-1093-cd09-d0cfad77ba39@spatialys.com>
References: <CAD=UezpRR+tLGAYjSWZBfqjkv+ehPdSJWr=anwZ1cqPy037YXA@mail.gmail.com>
 <98502d6e-1bee-1093-cd09-d0cfad77ba39@spatialys.com>
Message-ID: <476d959e-6941-1bf4-279a-1a9398bd6a44@spatialys.com>

Based on information provided privately by Jens, the connection string 
to use should also include the namespaces parameter. I presume the 
server behind is Deegree which is quite pedantic about that. The QGIS 
WFS client automatically adds it, whereas the OGR WFS one not (it should 
likely)

So use:

WFS:https://services.datafordeler.dk/GeoDanmarkVektor/GeoDanmark60_HIST_GML3/1.0.0/WFS?servicename=wfs&REQUEST=DescribeFeatureType&SERVICE=WFS&username={your_username}&password={your_password}&version=2.0.0&typenames=Afvandingsgroeft&namespaces=xmlns(gdk60,http%3A%2F%2Fdata.gov.dk%2Fschemas%2Fgeodanmark60%2F2%2Fgml3)

Le 19/06/2021 ? 00:51, Even Rouault a ?crit?:
>
> Jens,
>
> when writing a report, remember that the reader cannot see your 
> screen. So at a minimum, provide the connection string to that WFS 
> service that you provide to GDAL.
>
> Even
>
> Le 19/06/2021 ? 00:43, Jens S?e Christiansen a ?crit?:
>> Hi
>> I'm desperately?trying to read data from a Danish WFS service. 
>> Everything is working well until I try to GetNextFeature. The GDAL is 
>> returning HTTP ERROR 400 and the reason is that version and typenames 
>> are missing in the request!
>>
>> Am I missing something or is something wrong with the WFS service (It 
>> is working well from inside QGIS) ?
>>
>> Best regards
>> Jens Christiansen
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/864a843d/attachment.html>

From Metabaseacc at gmail.com  Sat Jun 19 08:31:28 2021
From: Metabaseacc at gmail.com (Met Bas)
Date: Sat, 19 Jun 2021 08:31:28 -0700 (MST)
Subject: [gdal-dev] Polygon operations
Message-ID: <1624116688253-0.post@n6.nabble.com>

>From my understanding, a square polygon feature would only consists of the 5
vertices of the corners (with the last vertex being the same as the first to
"close" the polygon).

If I do an operation depending on a polygon, for example intersections or
clipping a raster, how is the path between the vertices determined? Is it
the great circle route using the ellipsoid of the spatial reference? Can it
be changed? And is it determined on the fly during each operation?

Thank you,
M.B





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew.bell.ia at gmail.com  Sat Jun 19 12:34:24 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Sat, 19 Jun 2021 15:34:24 -0400
Subject: [gdal-dev] Polygon operations
In-Reply-To: <1624116688253-0.post@n6.nabble.com>
References: <1624116688253-0.post@n6.nabble.com>
Message-ID: <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>

These are done in 2D, without regard to the spatial reference.

On Sat, Jun 19, 2021, 11:31 AM Met Bas <Metabaseacc at gmail.com> wrote:

> From my understanding, a square polygon feature would only consists of the
> 5
> vertices of the corners (with the last vertex being the same as the first
> to
> "close" the polygon).
>
> If I do an operation depending on a polygon, for example intersections or
> clipping a raster, how is the path between the vertices determined? Is it
> the great circle route using the ellipsoid of the spatial reference? Can it
> be changed? And is it determined on the fly during each operation?
>
> Thank you,
> M.B
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/33fa70ff/attachment.html>

From metabaseacc at gmail.com  Sat Jun 19 13:27:11 2021
From: metabaseacc at gmail.com (Metabase Account)
Date: Sat, 19 Jun 2021 16:27:11 -0400
Subject: [gdal-dev] Polygon operations
In-Reply-To: <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>
References: <1624116688253-0.post@n6.nabble.com>
 <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>
Message-ID: <CAJTmxzv2+nazH_UdT-UUmPMzQ0-0nK-YfmPfDg4oB8E2vKpH6A@mail.gmail.com>

I might be thinking of this incorrectly, but if they're done in 2D without
any spatial consideration, inserting additional vertices in between
shouldn't have an effect on behavior right? However it does seem to have an
effect when using operations such as warp with the polygon as the cutline.

On Sat, Jun 19, 2021 at 3:34 PM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> These are done in 2D, without regard to the spatial reference.
>
> On Sat, Jun 19, 2021, 11:31 AM Met Bas <Metabaseacc at gmail.com> wrote:
>
>> From my understanding, a square polygon feature would only consists of
>> the 5
>> vertices of the corners (with the last vertex being the same as the first
>> to
>> "close" the polygon).
>>
>> If I do an operation depending on a polygon, for example intersections or
>> clipping a raster, how is the path between the vertices determined? Is it
>> the great circle route using the ellipsoid of the spatial reference? Can
>> it
>> be changed? And is it determined on the fly during each operation?
>>
>> Thank you,
>> M.B
>>
>>
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/143d2b26/attachment.html>

From penswits at gmail.com  Sat Jun 19 13:59:30 2021
From: penswits at gmail.com (Pen Swits)
Date: Sat, 19 Jun 2021 13:59:30 -0700 (MST)
Subject: [gdal-dev] Raster Attribute Table access by name and null values
Message-ID: <1624136370215-0.post@n6.nabble.com>

If I already know the column name, is there a better way to access the value
than what I'm currently doing?

For example, currently in order to get the date value of the last row, I am
looping through all columns and confirming that the column name is what I
expect, then using that index to access the value.

for column in range(rtable.GetColumnCount()):
    if rtable.GetNameOfCol(column) == "Date":
        last_row_date = rtable.GetValueAsString(rtable.GetRowCount()-1,
column)

And is there any way in which I can set an empty/null value that can be
applicable for all field types?

Thank you,
Pen Swits



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Sat Jun 19 14:16:41 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Jun 2021 23:16:41 +0200
Subject: [gdal-dev] Polygon operations
In-Reply-To: <CAJTmxzv2+nazH_UdT-UUmPMzQ0-0nK-YfmPfDg4oB8E2vKpH6A@mail.gmail.com>
References: <1624116688253-0.post@n6.nabble.com>
 <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>
 <CAJTmxzv2+nazH_UdT-UUmPMzQ0-0nK-YfmPfDg4oB8E2vKpH6A@mail.gmail.com>
Message-ID: <4607e72d-ab42-d0b9-a44c-9c6505b6f2c6@spatialys.com>

The polygon of a cutline is reprojected into the coordinate system of 
the source image, so densification of its contour might have an effect 
indeed.

Le 19/06/2021 ? 22:27, Metabase Account a ?crit?:
> I might?be thinking of this incorrectly, but if they're done in 2D 
> without any spatial consideration, inserting additional vertices in 
> between shouldn't have an effect on behavior right? However it does 
> seem to have an effect when using operations such as warp with the 
> polygon as the cutline.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gdal at stripfamily.net  Sat Jun 19 14:42:19 2021
From: gdal at stripfamily.net (David Strip)
Date: Sat, 19 Jun 2021 15:42:19 -0600
Subject: [gdal-dev] Polygon operations
In-Reply-To: <CACJ51z0GCqCBJsyRYu92BJTmprcakn+bHcXEmZrD1orHo-+Bjw@mail.gmail.com>
References: <1624116688253-0.post@n6.nabble.com>
 <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>
 <4fcc95bb-de0d-7231-ea8c-1cc03b8c6965@stripfamily.net>
 <CACJ51z0GCqCBJsyRYu92BJTmprcakn+bHcXEmZrD1orHo-+Bjw@mail.gmail.com>
Message-ID: <d5b70cc3-98ad-5db1-c937-c5a60859eb02@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/8d1b1382/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: kikmggcmagihcgff.png
Type: image/png
Size: 44518 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210619/8d1b1382/attachment-0001.png>

From ahmettemiz88 at gmail.com  Sun Jun 20 00:56:27 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Sun, 20 Jun 2021 10:56:27 +0300
Subject: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation
Message-ID: <CAJKO1YthrkC6fbBDk6ct-AaDMB697RYRk7PyHAcbvs=12HQ_GQ@mail.gmail.com>

Hi,
..

 source.SetWellKnownGeogCS( "EPSG:3857" );
 dest.SetWellKnownGeogCS( "EPSG:4326" );
OGRCoordinateTransformation* ct =
OGRCreateCoordinateTransformation(&source, &dest);

OGRPolygon *poPolygon= ( OGRPolygon *) polyGeometry;

OGRErr err=poPolygon->transform(ct) ;  // it generates this error.

ERROR 6: No translation for an empty SRS to PROJ.4 format is known.

I think, this occurs, because I could not assign any SRS value to polygon

How can I solve this problem?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210620/d7365823/attachment.html>

From bradh at frogmouth.net  Sun Jun 20 01:02:39 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Sun, 20 Jun 2021 18:02:39 +1000
Subject: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation
In-Reply-To: <CAJKO1YthrkC6fbBDk6ct-AaDMB697RYRk7PyHAcbvs=12HQ_GQ@mail.gmail.com>
References: <CAJKO1YthrkC6fbBDk6ct-AaDMB697RYRk7PyHAcbvs=12HQ_GQ@mail.gmail.com>
Message-ID: <000501d765aa$a3bf7c00$eb3e7400$@frogmouth.net>

What is the `polyGeometry`? 

 

Can you try to generate a compilable, minimal, self-contained example that demonstrates the problem?

 

Brad

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Ahmet Temiz
Sent: Sunday, 20 June 2021 5:56 PM
To: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation

 

Hi,

..

 

 source.SetWellKnownGeogCS( "EPSG:3857" );
 dest.SetWellKnownGeogCS( "EPSG:4326" );

OGRCoordinateTransformation* ct = OGRCreateCoordinateTransformation(&source, &dest);

 

OGRPolygon *poPolygon= ( OGRPolygon *) polyGeometry;

OGRErr err=poPolygon->transform(ct) ;  // it generates this error.

 

ERROR 6: No translation for an empty SRS to PROJ.4 format is known.

 

I think, this occurs, because I could not assign any SRS value to polygon

 

How can I solve this problem?

 

regards

 

-- 

Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210620/c9052fa7/attachment.html>

From ahmettemiz88 at gmail.com  Sun Jun 20 01:28:26 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Sun, 20 Jun 2021 11:28:26 +0300
Subject: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation
In-Reply-To: <000501d765aa$a3bf7c00$eb3e7400$@frogmouth.net>
References: <CAJKO1YthrkC6fbBDk6ct-AaDMB697RYRk7PyHAcbvs=12HQ_GQ@mail.gmail.com>
 <000501d765aa$a3bf7c00$eb3e7400$@frogmouth.net>
Message-ID: <CAJKO1Yvt-MdyNo8x5_gDZvwN4PocCrLNBKjP99-WR1tcMgwj4w@mail.gmail.com>

Thank you,
I am reading a shape file with line geometry in epsg:3857 projection.

.I create buffer from lines (polyCollect)
.union  them (unionCascaded)
. then convert it to multipolygon (poOGRMultiPolygon)
. then transform is necessary for each polygon in poPolygon from epsg:3857
to epsg:4326

  Here is the code:
    OGRGeometry * unionCascaded = polyCollect->UnionCascaded();
    OGRMultiPolygon * poOGRMultiPolygon= ( OGRMultiPolygon * )
unionCascaded;


    int NumberOfGeometries= poOGRMultiPolygon->getNumGeometries();

    OGRSpatialReference source;
    OGRSpatialReference dest;
    source.SetWellKnownGeogCS( "EPSG:3857" );
    dest.SetWellKnownGeogCS( "EPSG:4326" );

    OGRCoordinateTransformation* ct =
OGRCreateCoordinateTransformation(&source, &dest);

    for (int j=0; j< NumberOfGeometries ;j++    ){
        OGRGeometry * polyGeometry = poOGRMultiPolygon -> getGeometryRef(j);
        OGRPolygon *poPolygon= ( OGRPolygon *) polyGeometry;

        OGRErr err=poPolygon->transform(ct) ;

On Sun, Jun 20, 2021 at 11:02 AM Brad Hards <bradh at frogmouth.net> wrote:

> What is the `polyGeometry`?
>
>
>
> Can you try to generate a compilable, minimal, self-contained example that
> demonstrates the problem?
>
>
>
> Brad
>
>
>
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *On Behalf Of *Ahmet
> Temiz
> *Sent:* Sunday, 20 June 2021 5:56 PM
> *To:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* [gdal-dev] I couldn't use OGRCreateCoordinateTransformation
>
>
>
> Hi,
>
> ..
>
>
>
>  source.SetWellKnownGeogCS( "EPSG:3857" );
>  dest.SetWellKnownGeogCS( "EPSG:4326" );
>
> OGRCoordinateTransformation* ct =
> OGRCreateCoordinateTransformation(&source, &dest);
>
>
>
> OGRPolygon *poPolygon= ( OGRPolygon *) polyGeometry;
>
> OGRErr err=poPolygon->transform(ct) ;  // it generates this error.
>
>
>
> ERROR 6: No translation for an empty SRS to PROJ.4 format is known.
>
>
>
> I think, this occurs, because I could not assign any SRS value to polygon
>
>
>
> How can I solve this problem?
>
>
>
> regards
>
>
>
> --
>
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Deprem  Dairesi Ba?kanl???
>
>
> ________________________
>
> Ahmet Temiz
> Geological Eng.
>
> Disaster and Emergency Management
> of Presidency
>


-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210620/2a80c4e8/attachment.html>

From andreas.oxenstierna at t-kartor.com  Sun Jun 20 01:53:34 2021
From: andreas.oxenstierna at t-kartor.com (Andreas Oxenstierna)
Date: Sun, 20 Jun 2021 08:53:34 +0000
Subject: [gdal-dev] Polygon operations
In-Reply-To: <d5b70cc3-98ad-5db1-c937-c5a60859eb02@stripfamily.net>
References: <1624116688253-0.post@n6.nabble.com>
 <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>
 <4fcc95bb-de0d-7231-ea8c-1cc03b8c6965@stripfamily.net>
 <CACJ51z0GCqCBJsyRYu92BJTmprcakn+bHcXEmZrD1orHo-+Bjw@mail.gmail.com>
 <d5b70cc3-98ad-5db1-c937-c5a60859eb02@stripfamily.net>
Message-ID: <49b1c765-a24a-4c6c-beb4-bc159fc97b0f@Spark>

Correct, you must always densify a line to mimic the behaviour of great-circle, loxodrome etc. in all spatial operations - depending on the definition of the data CRS.
This is a necessity in all ?long navigation? use cases like aero and nautical.


H?lsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
+46733206831
andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com
On 20 Jun 2021, 00:02 +0200, David Strip <gdal at stripfamily.net>, wrote:
On 6/19/2021 2:52 PM, Andrew Bell wrote:
The X and Y dimensions are assumed to lie on a plane. All intersection points are also assumed to lie on the same plane as the polygon. Z values are assigned after the fact.

On Sat, Jun 19, 2021, 4:40 PM David Strip <qgis-user at stripfamily.net<mailto:qgis-user at stripfamily.net>> wrote:
On 6/19/2021 1:34 PM, Andrew Bell wrote:
These are done in 2D, without regard to the spatial reference.
This still doesn't answer the question about great circles.

After some head-scratching and playing in QGIS, I realized that what Andrew is saying is that vertices are treated as Cartesian coordinates  with lon/lat values. QGIS appears to always draw a straight line between any two vertices regardless of the active projection.  This leads to some un-intuitive outcomes. Consider the map below in an Albers projection. The intersection of the two green lines is computed as the pink point. In EPSG:4326, the northern border of the US and the green line are coincident, and the intersection point lies on the visual intersection of the two lines.

 Densification of the line solves the problem, since each vertex is projected, creating the appearance of a curved line.
And for a different use case, there is a Geodesic Densification plug-in to create great circle lines between vertices.

<kikmggcmagihcgff.png>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210620/272bd312/attachment-0001.html>

From bradh at frogmouth.net  Sun Jun 20 03:01:02 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Sun, 20 Jun 2021 20:01:02 +1000
Subject: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation
In-Reply-To: <CAJKO1YvvVfriMaGKUD7oPzjULxXHRb2APVPNJ-XYFtYod1NkZw@mail.gmail.com>
References: <CAJKO1YthrkC6fbBDk6ct-AaDMB697RYRk7PyHAcbvs=12HQ_GQ@mail.gmail.com>
 <000501d765aa$a3bf7c00$eb3e7400$@frogmouth.net>
 <CAJKO1YvvVfriMaGKUD7oPzjULxXHRb2APVPNJ-XYFtYod1NkZw@mail.gmail.com>
Message-ID: <001501d765bb$2d5ae3e0$8810aba0$@frogmouth.net>

Does that code compile for you? What are you expecting this line to do:

OGRLineString *poLine = (OGRLineString *) poGeometry;

?

 

Where is poGeometry even defined?

 

Brad

 

From: Ahmet Temiz <ahmettemiz88 at gmail.com> 
Sent: Sunday, 20 June 2021 6:30 PM
To: Brad Hards <bradh at frogmouth.net>
Subject: Re: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation

 

Here is the full code

 

regards

 

On Sun, Jun 20, 2021 at 11:02 AM Brad Hards <bradh at frogmouth.net <mailto:bradh at frogmouth.net> > wrote:

What is the `polyGeometry`? 

 

Can you try to generate a compilable, minimal, self-contained example that demonstrates the problem?

 

Brad

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org <mailto:gdal-dev-bounces at lists.osgeo.org> > On Behalf Of Ahmet Temiz
Sent: Sunday, 20 June 2021 5:56 PM
To: gdal-dev <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> >
Subject: [gdal-dev] I couldn't use OGRCreateCoordinateTransformation

 

Hi,

..

 

 source.SetWellKnownGeogCS( "EPSG:3857" );
 dest.SetWellKnownGeogCS( "EPSG:4326" );

OGRCoordinateTransformation* ct = OGRCreateCoordinateTransformation(&source, &dest);

 

OGRPolygon *poPolygon= ( OGRPolygon *) polyGeometry;

OGRErr err=poPolygon->transform(ct) ;  // it generates this error.

 

ERROR 6: No translation for an empty SRS to PROJ.4 format is known.

 

I think, this occurs, because I could not assign any SRS value to polygon

 

How can I solve this problem?

 

regards

 

-- 

Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency




 

-- 

Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210620/4ee1a80a/attachment.html>

From jenssc at pocalipse.dk  Sun Jun 20 03:54:42 2021
From: jenssc at pocalipse.dk (=?UTF-8?Q?Jens_S=C3=B8e_Christiansen?=)
Date: Sun, 20 Jun 2021 12:54:42 +0200
Subject: [gdal-dev] GetNextFeature doesn't add version and typenames in
 URL
In-Reply-To: <476d959e-6941-1bf4-279a-1a9398bd6a44@spatialys.com>
References: <CAD=UezpRR+tLGAYjSWZBfqjkv+ehPdSJWr=anwZ1cqPy037YXA@mail.gmail.com>
 <98502d6e-1bee-1093-cd09-d0cfad77ba39@spatialys.com>
 <476d959e-6941-1bf4-279a-1a9398bd6a44@spatialys.com>
Message-ID: <CAD=UezrKR8ErRL7SW56GnsnkMYLq624r1wJHe-DNfcUArx6Szw@mail.gmail.com>

Wauw you are good :-)

Everything is working perfectly now so thank you so much for all your help
Even.

Best regards
Jens Christiansen

Den l?r. 19. jun. 2021 kl. 01.39 skrev Even Rouault <
even.rouault at spatialys.com>:

> Based on information provided privately by Jens, the connection string to
> use should also include the namespaces parameter. I presume the server
> behind is Deegree which is quite pedantic about that. The QGIS WFS client
> automatically adds it, whereas the OGR WFS one not (it should likely)
>
> So use:
>
> WFS:
> https://services.datafordeler.dk/GeoDanmarkVektor/GeoDanmark60_HIST_GML3/1.0.0/WFS?servicename=wfs&REQUEST=DescribeFeatureType&SERVICE=WFS&username=
> {your_username}&password={your_password}&version=2.0.0&typenames=Afvandingsgroeft&namespaces=xmlns(gdk60,http%3A%2F%
> 2Fdata.gov.dk%2Fschemas%2Fgeodanmark60%2F2%2Fgml3)
> Le 19/06/2021 ? 00:51, Even Rouault a ?crit :
>
> Jens,
>
> when writing a report, remember that the reader cannot see your screen. So
> at a minimum, provide the connection string to that WFS service that you
> provide to GDAL.
>
> Even
> Le 19/06/2021 ? 00:43, Jens S?e Christiansen a ?crit :
>
> Hi
> I'm desperately trying to read data from a Danish WFS service. Everything
> is working well until I try to GetNextFeature. The GDAL is returning HTTP
> ERROR 400 and the reason is that version and typenames are missing in the
> request!
>
> Am I missing something or is something wrong with the WFS service (It is
> working well from inside QGIS) ?
>
> Best regards
> Jens Christiansen
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210620/e165b5cb/attachment.html>

From Metabaseacc at gmail.com  Sun Jun 20 03:57:53 2021
From: Metabaseacc at gmail.com (Met Bas)
Date: Sun, 20 Jun 2021 03:57:53 -0700 (MST)
Subject: [gdal-dev] Polygon operations
In-Reply-To: <4607e72d-ab42-d0b9-a44c-9c6505b6f2c6@spatialys.com>
References: <1624116688253-0.post@n6.nabble.com>
 <CACJ51z15yQfBwYcErfYadGoPVf_2oW9QrR0m4GTaQzwkSX0LdQ@mail.gmail.com>
 <CAJTmxzv2+nazH_UdT-UUmPMzQ0-0nK-YfmPfDg4oB8E2vKpH6A@mail.gmail.com>
 <4607e72d-ab42-d0b9-a44c-9c6505b6f2c6@spatialys.com>
Message-ID: <1624186673847-0.post@n6.nabble.com>

Even Rouault-2 wrote
> The polygon of a cutline is reprojected into the coordinate system of 
> the source image, so densification of its contour might have an effect 
> indeed.
> 
> Le 19/06/2021 ? 22:27, Metabase Account a ?crit?:
>> I might?be thinking of this incorrectly, but if they're done in 2D 
>> without any spatial consideration, inserting additional vertices in 
>> between shouldn't have an effect on behavior right? However it does 
>> seem to have an effect when using operations such as warp with the 
>> polygon as the cutline.
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev

Thank you. This makes sense and have confirmed in testing that adding
vertices along the contour prior to reprojection lead to a relatively
significant 0.6 meter offset in my case than not having done so.

On that note, when using a polygon as a cutline, the determination of the
cut is done according to which side the center of the pixel is on?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jenssc at pocalipse.dk  Mon Jun 21 01:08:10 2021
From: jenssc at pocalipse.dk (=?UTF-8?Q?Jens_S=C3=B8e_Christiansen?=)
Date: Mon, 21 Jun 2021 10:08:10 +0200
Subject: [gdal-dev] FileGDB missing in C#
Message-ID: <CAD=Uezponyd16Pp+uqXLjfJcHJd4GR+hbq0C8UMpyjfzkTceZQ@mail.gmail.com>

Hi
I really like to use the ESRI FileGDB driver in my .net application but
can't figure out how to add the driver to the NuGet version.
Does anybody know how to add support for this driver in .net ?

Best regards
Jens Christiansen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/a095bfc6/attachment.html>

From fiatlux113 at gmail.com  Mon Jun 21 04:43:55 2021
From: fiatlux113 at gmail.com (fiat lux)
Date: Mon, 21 Jun 2021 12:43:55 +0100
Subject: [gdal-dev] Lidar vertical datum conversion to EGM2008
Message-ID: <CAFHU0Aes3DjsL9em-gmiLzE=cJDrFcoO93-JOo6dReP-3Uh7GQ@mail.gmail.com>

Hi all,


I have a question related to vertical datum conversion; e.g. for AHN3 lidar
data. Can you direct me to resources, or give me tips/tool on how to
convert AHN3 lidar vertical datum to EGM2008?


Thanks very much,

Fiat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/9ed5de0c/attachment.html>

From runette at gmail.com  Mon Jun 21 05:17:23 2021
From: runette at gmail.com (Paul Harwood)
Date: Mon, 21 Jun 2021 13:17:23 +0100
Subject: [gdal-dev] FileGDB missing in C#
In-Reply-To: <CAD=Uezponyd16Pp+uqXLjfJcHJd4GR+hbq0C8UMpyjfzkTceZQ@mail.gmail.com>
References: <CAD=Uezponyd16Pp+uqXLjfJcHJd4GR+hbq0C8UMpyjfzkTceZQ@mail.gmail.com>
Message-ID: <CAE8nN5NQ15BrThaZ97KzDf71fU1kNPyYgNcUkxATCeyDh-akTQ@mail.gmail.com>

Assuming you mean this NuGet package https://www.nuget.org/packages/GDAL/
then I think it is managed by the SharpMap team
<https://github.com/SharpMap/SharpMap> - you probably should try asking
there. As far as I know it comes with a custom build of GDAL 2.4.x (i.e
gdal204.dll) - which is  not near the current latest version (3.3.x)  {but
if I am wrong about that I would love to know}.

if you mean this NuGet package
https://www.nuget.org/packages/MaxRev.Gdal.Core/ then you probably need to
raise a question on the MaxRev site. I know that the standard build is only
a limited set of drivers but I think they have instructions about how to
compile more in.

There is also a conda package for the C# integrations  - see this page
https://gdal.org/api/csharp/csharp_conda.html and this page
https://gdal.org/api/csharp/index.html.

This uses the latest conda GDAL package - so is always up to date but
requires a bit more manual integration into your .NET app than NuGet (see
the page linked above).

I checked and the current GDAL conda package (as used by the conda csharp
package) :

- includes the OpenFileGDB driver
<https://gdal.org/drivers/vector/openfilegdb.html>
- does not include the 3rd Party library based FileGDB driver
<https://gdal.org/drivers/vector/filegdb.html>

Which one were you looking for?



On Mon, 21 Jun 2021 at 09:08, Jens S?e Christiansen <jenssc at pocalipse.dk>
wrote:

> Hi
> I really like to use the ESRI FileGDB driver in my .net application but
> can't figure out how to add the driver to the NuGet version.
> Does anybody know how to add support for this driver in .net ?
>
> Best regards
> Jens Christiansen
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/f562208f/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 21 07:01:01 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 21 Jun 2021 14:01:01 +0000
Subject: [gdal-dev] Problem with OAPIF and numeric id in the data
Message-ID: <a4f4cd3ce0a34e1da26441ccdab903df@maanmittauslaitos.fi>

Hi,

With this request

ogrinfo OAPIF:https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/ -dialect sqlite -sql "select * from RajamerkinSijaintitiedot limit 10" --debug on

ogrinfo does not use the "id" member as feature id nor does is report it as an attribute. Id exists in the data in this format
{"type":"FeatureCollection","features":[{"type":"Feature","id":12425552,"properties":{
as can be checked with https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/collections/RajamerkinSijaintitiedot/items?f=json&limit=10

The service that is used as reference in https://gdal.org/drivers/vector/oapif.html is having the id as string
"type" : "Feature","id" : "DENW42AL1000NscuFL",

and in this case ogrinfo does not use "id" ad fid either but at least reads it as a normal attribute
ogrinfo -al OAPIF:https://www.ldproxy.nrw.de/rest/services/kataster flurstueck --debug on
...
OGRFeature(flurstueck):110
  id (String) = DENW42AL1000NtLGFL


I managed to get the "id" used as fid when converting data from the service at maanmittauslaitos.fi into geopackage by using -preserve_fid but for some reason today even that does not work for me.

-Jukka Rahkonen-

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/7094e24d/attachment.html>

From even.rouault at spatialys.com  Mon Jun 21 07:49:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Jun 2021 16:49:45 +0200
Subject: [gdal-dev] Problem with OAPIF and numeric id in the data
In-Reply-To: <a4f4cd3ce0a34e1da26441ccdab903df@maanmittauslaitos.fi>
References: <a4f4cd3ce0a34e1da26441ccdab903df@maanmittauslaitos.fi>
Message-ID: <cfef27d8-ab5d-dae0-a837-199e883b8f1a@spatialys.com>

Jukka,

https://github.com/OSGeo/gdal/commit/36aa932aba3775f1e6ec825ba39c633442ffa640 
should help

Even

Le 21/06/2021 ? 16:01, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> With this request
>
> ogrinfo 
> OAPIF:https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/ 
> -dialect sqlite -sql "select * from RajamerkinSijaintitiedot limit 10" 
> --debug on
>
> ogrinfo does not use the ?id? member as feature id nor does is report 
> it as an attribute. Id exists in the data in this format
>
> {"type":"FeatureCollection","features":[{"type":"Feature","id":12425552,"properties":{
>
> as can be checked with 
> https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/collections/RajamerkinSijaintitiedot/items?f=json&limit=10 
> <https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/collections/RajamerkinSijaintitiedot/items?f=json&limit=10>
>
> The service that is used as reference in 
> https://gdal.org/drivers/vector/oapif.html 
> <https://gdal.org/drivers/vector/oapif.html> is having the id as string
>
> "type" : "Feature","id" : "DENW42AL1000NscuFL",
>
> and in this case ogrinfo does not use ?id? ad fid either but at least 
> reads it as a normal attribute
> ogrinfo -al OAPIF:https://www.ldproxy.nrw.de/rest/services/kataster 
> flurstueck --debug on
>
> ?
>
> OGRFeature(flurstueck):110
>
> ? id (String) = DENW42AL1000NtLGFL
>
> I managed to get the ?id? used as fid when converting data from the 
> service at maanmittauslaitos.fi into geopackage by using -preserve_fid 
> but for some reason today even that does not work for me.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/d0b63972/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 21 08:04:30 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 21 Jun 2021 15:04:30 +0000
Subject: [gdal-dev] Converting fid from GeoJSON into GeoPackage
Message-ID: <09104585cae44fa888362b92a278ec0e@maanmittauslaitos.fi>

Hi,

Take this GeoJSON

{
"type": "FeatureCollection",
"features": [{
"type": "Feature",
"id":12425552,
"properties":
{
},
"geometry": {
"type": "Point",
"coordinates": [26.30578223, 60.26170791]
}
}]
}

Ogrinfo knows the fid
OGRFeature(one_feature):12425552

Convert into a new GeoPackage and the native fid is lost
ogr2ogr -f gpkg one_feature.gpkg one_feature.json
OGRFeature(one_feature):1

Running the command with "-preserve_fid" keeps the native fid but according to ogr2ogr documentation https://gdal.org/programs/ogr2ogr.html that should not be needed:

"Use the FID of the source features instead of letting the output driver automatically assign a new one (for formats that require a FID). If not in append mode, this behavior is the default if the output driver has a FID layer creation option, in which case the name of the source FID column will be used and source feature IDs will be attempted to be preserved."

Is the error in the documentation or in the GeoJSON-GeoPackage conversion?

-Jukka Rahkonen-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/287ecf0f/attachment.html>

From even.rouault at spatialys.com  Mon Jun 21 08:08:30 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Jun 2021 17:08:30 +0200
Subject: [gdal-dev] Converting fid from GeoJSON into GeoPackage
In-Reply-To: <09104585cae44fa888362b92a278ec0e@maanmittauslaitos.fi>
References: <09104585cae44fa888362b92a278ec0e@maanmittauslaitos.fi>
Message-ID: <bb51663f-82fa-baf9-ff6b-032f362f713b@spatialys.com>

Jukka,

Automatic FID preservation requires that the source layer reports a 
non-empty column name for the FID column, which isn't the case of the 
GeoJSON driver. Mostly only SQL-based drivers will report a non-empty 
FID column name.

Even

Le 21/06/2021 ? 17:04, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> Take this GeoJSON
>
> {
>
> "type": "FeatureCollection",
>
> "features": [{
>
> "type": "Feature",
>
> "id":12425552,
>
> "properties":
>
> {
>
> },
>
> "geometry": {
>
> "type": "Point",
>
> "coordinates": [26.30578223, 60.26170791]
>
> }
>
> }]
>
> }
>
> Ogrinfo knows the fid
>
> OGRFeature(one_feature):12425552
>
> Convert into a new GeoPackage and the native fid is lost
>
> ogr2ogr -f gpkg one_feature.gpkg one_feature.json
>
> OGRFeature(one_feature):1
>
> Running the command with ?-preserve_fid? keeps the native fid but 
> according to ogr2ogr documentation 
> https://gdal.org/programs/ogr2ogr.html 
> <https://gdal.org/programs/ogr2ogr.html> that should not be needed:
>
> ?Use the FID of the source features instead of letting the output 
> driver automatically assign a new one (for formats that require a 
> FID). If not in append mode, this behavior is the default if the 
> output driver has a FID layer creation option, in which case the name 
> of the source FID column will be used and source feature IDs will be 
> attempted to be preserved.?
>
> Is the error in the documentation or in the GeoJSON-GeoPackage conversion?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/629be37b/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 21 08:22:37 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 21 Jun 2021 15:22:37 +0000
Subject: [gdal-dev] Converting fid from GeoJSON into GeoPackage
Message-ID: <5146cd8826ad4047b47f4ba3eac03f1e@maanmittauslaitos.fi>

Thanks,

I believe this resolves my previous problem by the same. The indirect_sqlite dialect is not so handy in this case because it wants do download the whole collection from OAPIF.

So because OAPIF is sending data as GeoJSON there is no name for the FID column and it is obligatory to use ogr2ogr with "-preserve_fid" if the aim is to preserve FID.  I will see if there is something to improve with this in the documentation. I had some trouble with joining  edited data with the original because 15 million feature ids changed into counting numbers.

-Jukka-

L?hett?j?: Even Rouault <even.rouault at spatialys.com>
L?hetetty: maanantai 21. kes?kuuta 2021 18.09
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Converting fid from GeoJSON into GeoPackage


Jukka,

Automatic FID preservation requires that the source layer reports a non-empty column name for the FID column, which isn't the case of the GeoJSON driver. Mostly only SQL-based drivers will report a non-empty FID column name.

Even
Le 21/06/2021 ? 17:04, Rahkonen Jukka (MML) a ?crit :
Hi,

Take this GeoJSON

{
"type": "FeatureCollection",
"features": [{
"type": "Feature",
"id":12425552,
"properties":
{
},
"geometry": {
"type": "Point",
"coordinates": [26.30578223, 60.26170791]
}
}]
}

Ogrinfo knows the fid
OGRFeature(one_feature):12425552

Convert into a new GeoPackage and the native fid is lost
ogr2ogr -f gpkg one_feature.gpkg one_feature.json
OGRFeature(one_feature):1

Running the command with "-preserve_fid" keeps the native fid but according to ogr2ogr documentation https://gdal.org/programs/ogr2ogr.html that should not be needed:

"Use the FID of the source features instead of letting the output driver automatically assign a new one (for formats that require a FID). If not in append mode, this behavior is the default if the output driver has a FID layer creation option, in which case the name of the source FID column will be used and source feature IDs will be attempted to be preserved."

Is the error in the documentation or in the GeoJSON-GeoPackage conversion?

-Jukka Rahkonen-






_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/26c9bfae/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 21 09:18:53 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 21 Jun 2021 16:18:53 +0000
Subject: [gdal-dev] Problem with OAPIF and numeric id in the data
Message-ID: <9ef87f8f6fa745f08d73cc4dfe555c36@maanmittauslaitos.fi>

Thanks,

I can get a copy of the native OAPIF FID into a normal attribute with

ogrinfo OAPIF:https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/ -dialect sqlite -sql "select rowid, * from RajamerkinSijaintitiedot limit 10" --debug on

OGRFeature(SELECT):9
  rowid (Integer) = 12425588

A bit strange message at the end of the debug info but I guess that for some reason the features are read twice:
SQLite: 20 features read on layer 'SELECT'.
OGR: Unloading VirtualOGR module

I know now well enough how I can get and store the native fids from OAPIF service with GDAL command line tools. However, QGIS seems to drop the native fids and generate new ones but that's another problem to learn to circumvent.

-Jukka-

L?hett?j?: Even Rouault <even.rouault at spatialys.com>
L?hetetty: maanantai 21. kes?kuuta 2021 17.50
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Problem with OAPIF and numeric id in the data


Jukka,

https://github.com/OSGeo/gdal/commit/36aa932aba3775f1e6ec825ba39c633442ffa640 should help

Even
Le 21/06/2021 ? 16:01, Rahkonen Jukka (MML) a ?crit :
Hi,

With this request

ogrinfo OAPIF:https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/ -dialect sqlite -sql "select * from RajamerkinSijaintitiedot limit 10" --debug on

ogrinfo does not use the "id" member as feature id nor does is report it as an attribute. Id exists in the data in this format
{"type":"FeatureCollection","features":[{"type":"Feature","id":12425552,"properties":{
as can be checked with https://beta-paikkatieto.maanmittauslaitos.fi/kiinteisto-avoin/features/v1/collections/RajamerkinSijaintitiedot/items?f=json&limit=10

The service that is used as reference in https://gdal.org/drivers/vector/oapif.html is having the id as string
"type" : "Feature","id" : "DENW42AL1000NscuFL",

and in this case ogrinfo does not use "id" ad fid either but at least reads it as a normal attribute
ogrinfo -al OAPIF:https://www.ldproxy.nrw.de/rest/services/kataster flurstueck --debug on
...
OGRFeature(flurstueck):110
  id (String) = DENW42AL1000NtLGFL


I managed to get the "id" used as fid when converting data from the service at maanmittauslaitos.fi into geopackage by using -preserve_fid but for some reason today even that does not work for me.

-Jukka Rahkonen-




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/dd6989b9/attachment.html>

From even.rouault at spatialys.com  Mon Jun 21 10:57:39 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Jun 2021 19:57:39 +0200
Subject: [gdal-dev] Problem with OAPIF and numeric id in the data
In-Reply-To: <9ef87f8f6fa745f08d73cc4dfe555c36@maanmittauslaitos.fi>
References: <9ef87f8f6fa745f08d73cc4dfe555c36@maanmittauslaitos.fi>
Message-ID: <5ea22ddb-5792-1675-0258-8211b1e39d06@spatialys.com>

> A bit strange message at the end of the debug info but I guess that 
> for some reason the features are read twice:
It's due to the reporting of feature count and layer extent. If you just 
want the feature listing, add -nocount -noextent
>
> However, QGIS seems to drop the native fids and generate new ones but 
> that?s another problem to learn to circumvent.

Hum, I'm afraid it will not be easy. The QGIS WFS / OAPIF provider 
stores internally the feature id in the internal feature cache but 
doesn't expose it. The QGIS feature id you get from such layer is a 
purely synthetical one, and that may change between sessions. Trying to 
remember about that design choice, there are several reasons:

  * if the WFS layer is a result of a join operation, there is no unique id
  * if we exposed the gml:id (or JSON id) as a regular field, that could
    cause issues for transactional WFS support where you don't want
    users to modify that value

That could probably be changed pending some work.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210621/70d004a2/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 21 12:20:08 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 21 Jun 2021 19:20:08 +0000
Subject: [gdal-dev] Problem with OAPIF and numeric id in the data
Message-ID: <aed278b3b475458eb2f755d8718e9d3b@maanmittauslaitos.fi>

Even Rouault <even.rouault at spatialys.com>  wrote:

>> However, QGIS seems to drop the native fids and generate new ones but that's another problem to learn to circumvent.
> Hum, I'm afraid it will not be easy. The QGIS WFS / OAPIF provider stores internally the feature id in the 
> internal feature cache but doesn't expose it. The QGIS feature id you get from such layer is a purely 
> synthetical one, and that may change between sessions. Trying to remember about that design choice,
> there are several reasons:
* if the WFS layer is a result of a join operation, there is no unique id
* if we exposed the gml:id (or JSON id) as a regular field, that could cause issues for transactional WFS support where you don't want users to modify that value

In that case I think we must publish the id two times in the OAPIF service, once as the id member and another time as  "landmark_id" or something in the feature properties because the id is meaningful for the users. They must be able to search by landmark_id and show them on the map.

> That could probably be changed pending some work.

-Jukka-

> Even
-- 
http://www.spatialys.com
My software is free, but my time generally not.

From steve.pritchard at bto.org  Wed Jun 23 06:28:09 2021
From: steve.pritchard at bto.org (Steve Pritchard)
Date: Wed, 23 Jun 2021 14:28:09 +0100
Subject: [gdal-dev] OCI vector driver - could support be added for
 Oracle Wallet? (simple change?)
In-Reply-To: <mailman.3.1623697201.4152.gdal-dev@lists.osgeo.org>
References: <mailman.3.1623697201.4152.gdal-dev@lists.osgeo.org>
Message-ID: <CAF7Aqmyg9i51PwtfDM74iB0VVdENwhNoCLvQTMDTh1XxtSkjpA@mail.gmail.com>

Many thanks Even.

This fix doesn't seem to be in a release yet, but I've managed to build
GDAL from master, and this works correctly with Oracle Wallet.

Steve
-- 
Steve Pritchard
Database Developer

British Trust for Ornithology, The Nunnery, Thetford, Norfolk IP24 2PU, UK
Tel: +44 (0)1842 750050, fax: +44 (0)1842 750030
Registered Charity No 216652 (England & Wales) No SC039193 (Scotland)
Company Limited by Guarantee No 357284 (England & Wales)


> Date: Mon, 14 Jun 2021 17:23:34 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] OCI vector driver - could support be added for
>         Oracle Wallet? (simple change?)
> Message-ID: <402aeda2-9b94-c1d8-0788-ac7187bacffe at spatialys.com>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>
> Steve,
>
> I believe https://github.com/OSGeo/gdal/pull/3784 has fixed that (in the
> master branch)
>
> Even
>
> Le 14/06/2021 ? 17:18, Steve Pritchard a ?crit?:
> > Oracle Wallet provides secure storage for usernames and passwords on
> > client devices. We use this to avoid having usernames and passwords in
> > scripts, etc. For details see "Using The Secure External Password
> > Store (Doc ID 340559.1)" on the Oracle Support website.
> >
> > I have tried using Oracle Wallet with ogrinfo and the OCI driver, e.g.:
> >
> >     ogrinfo OCI:/@db_name:table_name
> >
> >
> > however I always get:
> >
> >     ERROR 1: ORA-01017: invalid username/password; logon denied
> >     ?in <unnamed>
> >     ERROR 1: ORA-01017: invalid username/password; logon denied
> >     ?in <unnamed>
> >     FAILURE:
> >     Unable to open datasource `OCI:..' with the following drivers.
> >
> >
> > I have tried this both with the bundled Oracle Instant Client and with
> > the latest Instant Client from the Oracle website. I've also tested
> > Oracle Wallet with other open source software (e.g. Perl DBI), and
> > that works fine.
> >
> > Having looked at the source?code for?ogrocisession.cpp, it looks as
> > though a simple change might be sufficient to make this work...
> >
> > I think that the reason it doesn't work is because the "eCred"
> > parameter needs to be OCI_CRED_EXT for Oracle Wallet. But eCred is set
> > to?OCI_CRED_RDBMS, except where OS authentication is being used.
> >
> > So if?pszUseridIn = "" and?pszPasswordIn = "", can eCred be set to
> > OCI_CRED_EXT?
> >
> > (Notes on using Oracle Wallet with Oracle OCI can be found in the
> > answer tothis stackoverflow question
> > <
> https://stackoverflow.com/questions/21762885/using-oracle-wallet-authentication-from-oci
> >)
> >
> > Steve
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210623/fbdd8a11/attachment.html>

From even.rouault at spatialys.com  Wed Jun 23 07:44:40 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Jun 2021 16:44:40 +0200
Subject: [gdal-dev] OCI vector driver - could support be added for
 Oracle Wallet? (simple change?)
In-Reply-To: <CAF7Aqmyg9i51PwtfDM74iB0VVdENwhNoCLvQTMDTh1XxtSkjpA@mail.gmail.com>
References: <mailman.3.1623697201.4152.gdal-dev@lists.osgeo.org>
 <CAF7Aqmyg9i51PwtfDM74iB0VVdENwhNoCLvQTMDTh1XxtSkjpA@mail.gmail.com>
Message-ID: <4ec98748-d58d-b051-a134-100d65b5eebf@spatialys.com>

Steve,

thanks for confirming. I've just backported the fix to the 3.3 branch 
for the 3.3.1 release

Even

Le 23/06/2021 ? 15:28, Steve Pritchard a ?crit?:
> Many thanks Even.
>
> This fix doesn't seem to be in a release?yet, but I've managed to 
> build GDAL from master, and this works correctly with Oracle Wallet.
>
> Steve
> -- 
> Steve Pritchard
> Database Developer
>
> British Trust for Ornithology, The Nunnery, Thetford, Norfolk IP24 
> 2PU, UK
> Tel: +44 (0)1842 750050, fax: +44 (0)1842 750030
> Registered Charity No 216652 (England & Wales) No SC039193 (Scotland)
> Company Limited by Guarantee No 357284 (England & Wales)
>
>     Date: Mon, 14 Jun 2021 17:23:34 +0200
>     From: Even Rouault <even.rouault at spatialys.com
>     <mailto:even.rouault at spatialys.com>>
>     To: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     Subject: Re: [gdal-dev] OCI vector driver - could support be added for
>     ? ? ? ? Oracle Wallet? (simple change?)
>     Message-ID: <402aeda2-9b94-c1d8-0788-ac7187bacffe at spatialys.com
>     <mailto:402aeda2-9b94-c1d8-0788-ac7187bacffe at spatialys.com>>
>     Content-Type: text/plain; charset="utf-8"; Format="flowed"
>
>     Steve,
>
>     I believe https://github.com/OSGeo/gdal/pull/3784
>     <https://github.com/OSGeo/gdal/pull/3784> has fixed that (in the
>     master branch)
>
>     Even
>
>     Le 14/06/2021 ? 17:18, Steve Pritchard a ?crit?:
>     > Oracle Wallet provides secure storage for usernames and
>     passwords on
>     > client devices. We use this to avoid having usernames and
>     passwords in
>     > scripts, etc. For details see "Using The Secure External Password
>     > Store (Doc ID 340559.1)" on the Oracle Support website.
>     >
>     > I have tried using Oracle Wallet with ogrinfo and the OCI
>     driver, e.g.:
>     >
>     >? ? ?ogrinfo OCI:/@db_name:table_name
>     >
>     >
>     > however I always get:
>     >
>     >? ? ?ERROR 1: ORA-01017: invalid username/password; logon denied
>     >? ? ??in <unnamed>
>     >? ? ?ERROR 1: ORA-01017: invalid username/password; logon denied
>     >? ? ??in <unnamed>
>     >? ? ?FAILURE:
>     >? ? ?Unable to open datasource `OCI:..' with the following drivers.
>     >
>     >
>     > I have tried this both with the bundled Oracle Instant Client
>     and with
>     > the latest Instant Client from the Oracle website. I've also tested
>     > Oracle Wallet with other open source software (e.g. Perl DBI), and
>     > that works fine.
>     >
>     > Having looked at the source?code for?ogrocisession.cpp, it looks as
>     > though a simple change might be sufficient to make this work...
>     >
>     > I think that the reason it doesn't work is because the "eCred"
>     > parameter needs to be OCI_CRED_EXT for Oracle Wallet. But eCred
>     is set
>     > to?OCI_CRED_RDBMS, except where OS authentication is being used.
>     >
>     > So if?pszUseridIn = "" and?pszPasswordIn = "", can eCred be set to
>     > OCI_CRED_EXT?
>     >
>     > (Notes on using Oracle Wallet with Oracle OCI can be found in the
>     > answer tothis stackoverflow question
>     >
>     <https://stackoverflow.com/questions/21762885/using-oracle-wallet-authentication-from-oci
>     <https://stackoverflow.com/questions/21762885/using-oracle-wallet-authentication-from-oci>>)
>     >
>     > Steve
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210623/967114bb/attachment.html>

From jenssc at pocalipse.dk  Wed Jun 23 14:37:33 2021
From: jenssc at pocalipse.dk (=?UTF-8?Q?Jens_S=C3=B8e_Christiansen?=)
Date: Wed, 23 Jun 2021 23:37:33 +0200
Subject: [gdal-dev] Elasticsearch, rename index names
Message-ID: <CAD=UezojKvntXw9Ee9GsjVLA0GtyGHYdoOjV07ryen74Ba4W3A@mail.gmail.com>

Hi
Yet another challenge regarding the awesome CopyDataSource :-)

I'm trying to read a WFS service and write it to Elasticsearch. This is
almost working but my problem is the name of the layers in the source. They
come with a prefix (gdk60:) and : are not valid in an index name in
Elasticsearch!
If I set the index name nothing is working since the source contains
multiple layers so is there any way to add a mapping of layer names to
index names like the field mapper?

Best regards
Jens Christiansen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210623/4941006d/attachment.html>

From even.rouault at spatialys.com  Wed Jun 23 14:44:43 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Jun 2021 23:44:43 +0200
Subject: [gdal-dev] Elasticsearch, rename index names
In-Reply-To: <CAD=UezojKvntXw9Ee9GsjVLA0GtyGHYdoOjV07ryen74Ba4W3A@mail.gmail.com>
References: <CAD=UezojKvntXw9Ee9GsjVLA0GtyGHYdoOjV07ryen74Ba4W3A@mail.gmail.com>
Message-ID: <0c244aee-08a5-9436-05c1-78665ab57537@spatialys.com>

Jens,

You could use the GDALVectorTranslate() API (the library version of 
ogr2ogr) with the -nln option.

See 
https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1aa176ae667bc857ab9c6016dbe62166eb

Even

Le 23/06/2021 ? 23:37, Jens S?e Christiansen a ?crit?:
> Hi
> Yet another challenge?regarding the awesome CopyDataSource :-)
>
> I'm trying to read a WFS service and write it to Elasticsearch. This 
> is almost working but my problem is the name of the layers in the 
> source. They come with a prefix (gdk60:) and : are not valid in an 
> index name in Elasticsearch!
> If I set the index name nothing is working since the source contains 
> multiple layers so is there any way to add a mapping of layer names to 
> index names like the field mapper?
>
> Best regards
> Jens Christiansen
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210623/2c9771a7/attachment.html>

From jenssc at pocalipse.dk  Wed Jun 23 14:48:50 2021
From: jenssc at pocalipse.dk (=?UTF-8?Q?Jens_S=C3=B8e_Christiansen?=)
Date: Wed, 23 Jun 2021 23:48:50 +0200
Subject: [gdal-dev] Elasticsearch, rename index names
In-Reply-To: <0c244aee-08a5-9436-05c1-78665ab57537@spatialys.com>
References: <CAD=UezojKvntXw9Ee9GsjVLA0GtyGHYdoOjV07ryen74Ba4W3A@mail.gmail.com>
 <0c244aee-08a5-9436-05c1-78665ab57537@spatialys.com>
Message-ID: <CAD=Uezr25jceKOVwy6R9Nq8CPhHE7tfEnN52Bwe9nJkgYUCZDw@mail.gmail.com>

Thanks for the tip!

Den ons. 23. jun. 2021 kl. 23.44 skrev Even Rouault <
even.rouault at spatialys.com>:

> Jens,
>
> You could use the GDALVectorTranslate() API (the library version of
> ogr2ogr) with the -nln option.
>
> See
> https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1aa176ae667bc857ab9c6016dbe62166eb
>
> Even
> Le 23/06/2021 ? 23:37, Jens S?e Christiansen a ?crit :
>
> Hi
> Yet another challenge regarding the awesome CopyDataSource :-)
>
> I'm trying to read a WFS service and write it to Elasticsearch. This is
> almost working but my problem is the name of the layers in the source. They
> come with a prefix (gdk60:) and : are not valid in an index name in
> Elasticsearch!
> If I set the index name nothing is working since the source contains
> multiple layers so is there any way to add a mapping of layer names to
> index names like the field mapper?
>
> Best regards
> Jens Christiansen
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210623/b8e5ae22/attachment.html>

From mdsumner at gmail.com  Thu Jun 24 21:29:23 2021
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 25 Jun 2021 14:29:23 +1000
Subject: [gdal-dev] gdaldem aspect is grid-oriented
Message-ID: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>

Hello, we're using `gdaldem aspect` on polar grid products and we need to
convert the grid-oriented directions to compass oriented ones,
location-specific directions, where "compass north" is dependent on
longitude.

It's easy but inefficient for us to do this after running gdal dem for our
polar grids at latitude -90, and a more general solution would require a
general approach to "where north is" for any location in a projection.

I'll be able to modify GDAL to do this as an option to gdaldem for a simple
polar grid (e.g. EPSG:3031), and that will make our use of it much more
efficient. Is there any interest in a more general approach?

Best, Mike



-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210625/ec63a7f2/attachment.html>

From francesco.lazzarotto at inaf.it  Fri Jun 25 02:12:26 2021
From: francesco.lazzarotto at inaf.it (Francesco Lazzarotto)
Date: Fri, 25 Jun 2021 11:12:26 +0200
Subject: [gdal-dev] GDAL 2.1.4, released 2017/06/23 win32 mingw binaries
In-Reply-To: <CAB59xmF5FbKzBJmk9dWEcbdw5Wh_8840cdDg6EV_A=++ChTXyg@mail.gmail.com>
References: <CAB59xmF5FbKzBJmk9dWEcbdw5Wh_8840cdDg6EV_A=++ChTXyg@mail.gmail.com>
Message-ID: <8d112e2f-4bd4-4c5e-53de-612712ebf72b@inaf.it>

Hello,

I compiled a GDAL 2.1.4 build for MS win 32bit using 
i686-w64-mingw32-gcc / g++ compiler

tested to work on win32 and win64.

If someone is interested I share a link to the binary package 
gdal-2-i686-w64-mingw32.tgz
https://drive.google.com/file/d/14j4NdFnH-Q_SxjXpw6D0K1ToYoP-LrMo/view?usp=sharing
<https://drive.google.com/file/d/14j4NdFnH-Q_SxjXpw6D0K1ToYoP-LrMo/view?usp=sharing>

Best Regards,

Francesco Lazzarotto.


gdalinfo.exe --formats

Supported Formats:
 ? VRT -raster- (rw+v): Virtual Raster
 ? GTiff -raster- (rw+vs): GeoTIFF
 ? NITF -raster- (rw+vs): National Imagery Transmission Format
 ? RPFTOC -raster- (rovs): Raster Product Format TOC format
 ? ECRGTOC -raster- (rovs): ECRG TOC format
 ? HFA -raster- (rw+v): Erdas Imagine Images (.img)
 ? SAR_CEOS -raster- (rov): CEOS SAR Image
 ? CEOS -raster- (rov): CEOS Image
 ? JAXAPALSAR -raster- (rov): JAXA PALSAR Product Reader (Level 1.1/1.5)
 ? GFF -raster- (rov): Ground-based SAR Applications Testbed File Format 
(.gff)
 ? ELAS -raster- (rw+v): ELAS
 ? AIG -raster- (rov): Arc/Info Binary Grid
 ? AAIGrid -raster- (rwv): Arc/Info ASCII Grid
 ? GRASSASCIIGrid -raster- (rov): GRASS ASCII Grid
 ? SDTS -raster- (rov): SDTS Raster
 ? DTED -raster- (rwv): DTED Elevation Raster
 ? PNG -raster- (rwv): Portable Network Graphics
 ? JPEG -raster- (rwv): JPEG JFIF
 ? MEM -raster- (rw+): In Memory Raster
 ? JDEM -raster- (rov): Japanese DEM (.mem)
 ? GIF -raster- (rwv): Graphics Interchange Format (.gif)
 ? BIGGIF -raster- (rov): Graphics Interchange Format (.gif)
 ? ESAT -raster- (rov): Envisat Image Format
 ? BSB -raster- (rov): Maptech BSB Nautical Charts
 ? XPM -raster- (rwv): X11 PixMap Format
 ? BMP -raster- (rw+v): MS Windows Device Independent Bitmap
 ? DIMAP -raster- (rov): SPOT DIMAP
 ? AirSAR -raster- (rov): AirSAR Polarimetric Image
 ? RS2 -raster- (ros): RadarSat 2 XML Product
 ? SAFE -raster- (rov): Sentinel-1 SAR SAFE Product
 ? PCIDSK -raster,vector- (rw+v): PCIDSK Database File
 ? PCRaster -raster- (rw+): PCRaster Raster File
 ? ILWIS -raster- (rw+v): ILWIS Raster Map
 ? SGI -raster- (rw+): SGI Image File Format 1.0
 ? SRTMHGT -raster- (rwv): SRTMHGT File Format
 ? Leveller -raster- (rw+): Leveller heightfield
 ? Terragen -raster- (rw+): Terragen heightfield
 ? ISIS3 -raster- (rov): USGS Astrogeology ISIS cube (Version 3)
 ? ISIS2 -raster- (rw+v): USGS Astrogeology ISIS cube (Version 2)
 ? PDS -raster- (rov): NASA Planetary Data System
 ? VICAR -raster- (rov): MIPL VICAR file
 ? TIL -raster- (rov): EarthWatch .TIL
 ? ERS -raster- (rw+v): ERMapper .ers Labelled
 ? L1B -raster- (rovs): NOAA Polar Orbiter Level 1b Data Set
 ? FIT -raster- (rwv): FIT Image
 ? GRIB -raster- (rov): GRIdded Binary (.grb)
 ? RMF -raster- (rw+v): Raster Matrix Format
 ? WCS -raster- (rovs): OGC Web Coverage Service
 ? WMS -raster- (rwvs): OGC Web Map Service
 ? MSGN -raster- (ro): EUMETSAT Archive native (.nat)
 ? RST -raster- (rw+v): Idrisi Raster A.1
 ? INGR -raster- (rw+v): Intergraph Raster
 ? GSAG -raster- (rwv): Golden Software ASCII Grid (.grd)
 ? GSBG -raster- (rw+v): Golden Software Binary Grid (.grd)
 ? GS7BG -raster- (rw+v): Golden Software 7 Binary Grid (.grd)
 ? COSAR -raster- (rov): COSAR Annotated Binary Matrix (TerraSAR-X)
 ? TSX -raster- (rov): TerraSAR-X Product
 ? COASP -raster- (ro): DRDC COASP SAR Processor Raster
 ? R -raster- (rwv): R Object Data Store
 ? MAP -raster- (rov): OziExplorer .MAP
 ? KMLSUPEROVERLAY -raster- (rwv): Kml Super Overlay
 ? PDF -raster,vector- (w+): Geospatial PDF
 ? Rasterlite -raster- (rws): Rasterlite
 ? MBTiles -raster- (rw+v): MBTiles
 ? PLMOSAIC -raster- (ro): Planet Labs Mosaics API
 ? CALS -raster- (rw): CALS (Type 1)
 ? WMTS -raster- (rwv): OGC Web Mab Tile Service
 ? SENTINEL2 -raster- (rovs): Sentinel 2
 ? MRF -raster- (rw+v): Meta Raster Format
 ? PNM -raster- (rw+v): Portable Pixmap Format (netpbm)
 ? DOQ1 -raster- (rov): USGS DOQ (Old Style)
 ? DOQ2 -raster- (rov): USGS DOQ (New Style)
 ? GenBin -raster- (rov): Generic Binary (.hdr Labelled)
 ? PAux -raster- (rw+): PCI .aux Labelled
 ? MFF -raster- (rw+v): Vexcel MFF Raster
 ? MFF2 -raster- (rw+): Vexcel MFF2 (HKV) Raster
 ? FujiBAS -raster- (ro): Fuji BAS Scanner Image
 ? GSC -raster- (rov): GSC Geogrid
 ? FAST -raster- (rov): EOSAT FAST Format
 ? BT -raster- (rw+v): VTP .bt (Binary Terrain) 1.3 Format
 ? LAN -raster- (rw+v): Erdas .LAN/.GIS
 ? CPG -raster- (ro): Convair PolGASP
 ? IDA -raster- (rw+v): Image Data and Analysis
 ? NDF -raster- (rov): NLAPS Data Format
 ? EIR -raster- (rov): Erdas Imagine Raw
 ? DIPEx -raster- (rov): DIPEx
 ? LCP -raster- (rwv): FARSITE v.4 Landscape File (.lcp)
 ? GTX -raster- (rw+v): NOAA Vertical Datum .GTX
 ? LOSLAS -raster- (rov): NADCON .los/.las Datum Grid Shift
 ? NTv2 -raster- (rw+vs): NTv2 Datum Grid Shift
 ? CTable2 -raster- (rw+v): CTable2 Datum Grid Shift
 ? ACE2 -raster- (rov): ACE2
 ? SNODAS -raster- (rov): Snow Data Assimilation System
 ? KRO -raster- (rw+v): KOLOR Raw
 ? ROI_PAC -raster- (rw+v): ROI_PAC raster
 ? ENVI -raster- (rw+v): ENVI .hdr Labelled
 ? EHdr -raster- (rw+v): ESRI .hdr Labelled
 ? ISCE -raster- (rw+v): ISCE raster
 ? ARG -raster- (rwv): Azavea Raster Grid format
 ? RIK -raster- (rov): Swedish Grid RIK (.rik)
 ? USGSDEM -raster- (rwv): USGS Optional ASCII DEM (and CDED)
 ? GXF -raster- (ro): GeoSoft Grid Exchange Format
 ? NWT_GRD -raster- (rov): Northwood Numeric Grid Format .grd/.tab
 ? NWT_GRC -raster- (rov): Northwood Classified Grid Format .grc/.tab
 ? ADRG -raster- (rw+vs): ARC Digitized Raster Graphics
 ? SRP -raster- (rovs): Standard Raster Product (ASRP/USRP)
 ? BLX -raster- (rwv): Magellan topo (.blx)
 ? SAGA -raster- (rw+v): SAGA GIS Binary Grid (.sdat)
 ? XYZ -raster- (rwv): ASCII Gridded XYZ
 ? HF2 -raster- (rwv): HF2/HFZ heightfield raster
 ? OZI -raster- (rov): OziExplorer Image File
 ? CTG -raster- (rov): USGS LULC Composite Theme Grid
 ? E00GRID -raster- (rov): Arc/Info Export E00 GRID
 ? ZMap -raster- (rwv): ZMap Plus Grid
 ? NGSGEOID -raster- (rov): NOAA NGS Geoid Height Grids
 ? IRIS -raster- (rov): IRIS data (.PPI, .CAPPi etc)
 ? GPKG -raster,vector- (rw+vs): GeoPackage
 ? PLSCENES -raster,vector- (ro): Planet Labs Scenes API
 ? HTTP -raster,vector- (ro): HTTP Fetching Wrapper


From even.rouault at spatialys.com  Fri Jun 25 03:26:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 25 Jun 2021 12:26:14 +0200
Subject: [gdal-dev] gdaldem aspect is grid-oriented
In-Reply-To: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>
References: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>
Message-ID: <65892a1a-026c-353f-5d0b-525fb37729a5@spatialys.com>

Michael,

A general solution would have more appeal, although I suspect it will be 
a bit more computation intensive as you'll probably have to transform to 
invoke PROJ multiple times per grid point to compute the direction to 
the North

Even

Le 25/06/2021 ? 06:29, Michael Sumner a ?crit?:
> Hello, we're?using `gdaldem aspect` on polar grid products and we need 
> to convert the grid-oriented directions to compass oriented ones, 
> location-specific directions, where "compass north" is dependent on 
> longitude.
>
> It's easy but inefficient for us to do this after running gdal dem for 
> our polar grids at latitude -90, and a more general solution would 
> require a general approach to "where north is" for any location in a 
> projection.
>
> I'll be able to modify GDAL to do this as an option to gdaldem for a 
> simple polar grid (e.g. EPSG:3031), and that will make our use of it 
> much more efficient. Is there any interest in a more general approach?
>
> Best, Mike
>
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com <mailto:mdsumner at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210625/dbb437e1/attachment.html>

From aharond11 at gmail.com  Sat Jun 26 23:40:43 2021
From: aharond11 at gmail.com (aharon david)
Date: Sun, 27 Jun 2021 09:40:43 +0300
Subject: [gdal-dev] proj_context_set_network_callbacks
Message-ID: <CAAcYN0wDp8856VuV9L+yseV3yw60imbhkJ3H4j9xG+YempPoig@mail.gmail.com>

I want to get a callback when GTX file is needed.
but  proj_context_set_network_callbacks need PJ_CONTEXT.
How can I get PJ_CONTEXT from  OGRSpatialReference.
Is there another way to get a callback when GTX file is needed ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210627/5102e0c9/attachment.html>

From even.rouault at spatialys.com  Sun Jun 27 07:28:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 27 Jun 2021 16:28:42 +0200
Subject: [gdal-dev] proj_context_set_network_callbacks
In-Reply-To: <CAAcYN0wDp8856VuV9L+yseV3yw60imbhkJ3H4j9xG+YempPoig@mail.gmail.com>
References: <CAAcYN0wDp8856VuV9L+yseV3yw60imbhkJ3H4j9xG+YempPoig@mail.gmail.com>
Message-ID: <c32ede83-4ae3-88c7-7a37-7df3ef33b9fd@spatialys.com>

David,

there's currently no way to get the PJ_CONTEXT used by 
OGRSpatialReference with the API

Even

Le 27/06/2021 ? 08:40, aharon david a ?crit?:
> I want to get a callback when GTX file is needed.
> but??proj_context_set_network_callbacks need?PJ_CONTEXT.
> How can I get?PJ_CONTEXT from??OGRSpatialReference.
> Is there another way to get a callback when GTX file is needed ?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210627/a3641d30/attachment.html>

From andrew at aitchison.me.uk  Mon Jun 28 01:33:00 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 28 Jun 2021 09:33:00 +0100 (BST)
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
In-Reply-To: <1c2bd47049a44a21aa638a015e735225@yukon.ca>
References: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
 <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>
 <1c2bd47049a44a21aa638a015e735225@yukon.ca>
Message-ID: <b8aa3668-d490-7052-634a-ed14eb20c27@aitchison.me.uk>

On Mon, 14 Jun 2021, Matt.Wilkie at yukon.ca wrote:

>> Your initial test.tif file needs to be a bigtiff, i.e. have been
>> created with -co "BIGTIFF=YES". you can then drop the bigtiff
>> config arguments of your gdaladdo call.
>
> Ahh, thanks Thomas, that indeed is the problem.
>
> Unfortunately for me it means in this case I'm stuck,
> as the original is jpeg-tiff and I don't want to pay the penalty
> of another decompress-recompress cycle to change to big tiff.
> However at least I know what's going on now.

The description at http://bigtiff.org strongly suggests that
you can convert a tiff to a bigtiff without decompressing.
I do not have a pointer to code or an application (beyond
the BigTIFF version of libtiff) but some of the people named
as involved with the design are on this list.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Mon Jun 28 04:22:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Jun 2021 13:22:25 +0200
Subject: [gdal-dev] GDAL 3.3.1 RC1 available
Message-ID: <1eb8801a-c6f8-7692-0d70-0758dd71a07b@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.3.1 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.3.1/gdal-3.3.1rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.3.1/gdal-3.3.1rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.3.1/gdal331rc1.zip

A snapshot of the gdalautotest suite is also available :

https://download.osgeo.org/gdal/3.3.1/gdalautotest-3.3.1rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.3.1/gdalautotest-3.3.1rc1.zip

GDAL-GRASS plugin:

 ? https://download.osgeo.org/gdal/3.3.1/gdal-grass-3.3.1.tar.gz

The NEWS file is here :

 ? https://github.com/OSGeo/gdal/blob/v3.3.1RC1/gdal/NEWS

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From knudsen.thomas at gmail.com  Mon Jun 28 06:29:35 2021
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Mon, 28 Jun 2021 15:29:35 +0200
Subject: [gdal-dev] gdaldem aspect is grid-oriented
In-Reply-To: <65892a1a-026c-353f-5d0b-525fb37729a5@spatialys.com>
References: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>
 <65892a1a-026c-353f-5d0b-525fb37729a5@spatialys.com>
Message-ID: <CAH0YoENMmB1BKDYo5g2bvcGtdb6Q5Quz-wSybZwpKMUvM0QTjQ@mail.gmail.com>

The proj_factors(...) function, which a.o. returns the meridian convergence
in the PJ_FACTORS typedef, may be useful in this work.

Den fre. 25. jun. 2021 kl. 12.26 skrev Even Rouault <
even.rouault at spatialys.com>:

> Michael,
>
> A general solution would have more appeal, although I suspect it will be a
> bit more computation intensive as you'll probably have to transform to
> invoke PROJ multiple times per grid point to compute the direction to the
> North
>
> Even
> Le 25/06/2021 ? 06:29, Michael Sumner a ?crit :
>
> Hello, we're using `gdaldem aspect` on polar grid products and we need to
> convert the grid-oriented directions to compass oriented ones,
> location-specific directions, where "compass north" is dependent on
> longitude.
>
> It's easy but inefficient for us to do this after running gdal dem for our
> polar grids at latitude -90, and a more general solution would require a
> general approach to "where north is" for any location in a projection.
>
> I'll be able to modify GDAL to do this as an option to gdaldem for a
> simple polar grid (e.g. EPSG:3031), and that will make our use of it much
> more efficient. Is there any interest in a more general approach?
>
> Best, Mike
>
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/ecfeb253/attachment.html>

From andrew at aitchison.me.uk  Mon Jun 28 08:06:18 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 28 Jun 2021 16:06:18 +0100 (BST)
Subject: [gdal-dev] gdaldem aspect is grid-oriented
In-Reply-To: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>
References: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>
Message-ID: <bf3ffd8c-6468-14c8-5b53-43d4a2b53724@aitchison.me.uk>

On Fri, 25 Jun 2021, Michael Sumner wrote:

> Hello, we're using `gdaldem aspect` on polar grid products and we need to
> convert the grid-oriented directions to compass oriented ones,
> location-specific directions, where "compass north" is dependent on
> longitude.

I am curious; in the terminology of the British Ordnance Survey maps,
you are converting from "Grid North" but are you trying
to convert to "True North" or to "Magnetic North" ?

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From mdsumner at gmail.com  Mon Jun 28 08:14:48 2021
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 29 Jun 2021 01:14:48 +1000
Subject: [gdal-dev] gdaldem aspect is grid-oriented
In-Reply-To: <bf3ffd8c-6468-14c8-5b53-43d4a2b53724@aitchison.me.uk>
References: <CAAcGz9_wAWd2dse4qGLkydzW1pAY2tsAC3e8Wn0WNAE4_WbAJw@mail.gmail.com>
 <bf3ffd8c-6468-14c8-5b53-43d4a2b53724@aitchison.me.uk>
Message-ID: <CAAcGz99H3-=HeHUN3heFeapctq=T9aN1nahYyXRiecHfU0OYSw@mail.gmail.com>

True, we don't care where the needle points - we need polar north, it's
entirely dependent on longitude, and in our usual case, stere centred on
south pole, a simple special case.

Cheers, Mike

On Tue, 29 Jun 2021, 01:06 Andrew C Aitchison, <andrew at aitchison.me.uk>
wrote:

> On Fri, 25 Jun 2021, Michael Sumner wrote:
>
> > Hello, we're using `gdaldem aspect` on polar grid products and we need to
> > convert the grid-oriented directions to compass oriented ones,
> > location-specific directions, where "compass north" is dependent on
> > longitude.
>
> I am curious; in the terminology of the British Ordnance Survey maps,
> you are converting from "Grid North" but are you trying
> to convert to "True North" or to "Magnetic North" ?
>
> --
> Andrew C. Aitchison                                     Kendal, UK
>                         andrew at aitchison.me.uk
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210629/52c787df/attachment.html>

From thomas.bonfort at gmail.com  Mon Jun 28 10:28:01 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Mon, 28 Jun 2021 19:28:01 +0200
Subject: [gdal-dev] gdaladdo bigtiff err but --config BIGTIFF was used
In-Reply-To: <065a999748334766a603af76ff368173@yukon.ca>
References: <4dd8097926c14446b92cc72a11e773f5@yukon.ca>
 <CAOM3y2jnrGdwr15nPNHrV14BoioLuTz_BAhEDEYZ+O04edYVwA@mail.gmail.com>
 <1c2bd47049a44a21aa638a015e735225@yukon.ca>
 <35b032a0-74ef-8f90-bddd-c7e91e398177@spatialys.com>
 <065a999748334766a603af76ff368173@yukon.ca>
Message-ID: <CAOM3y2in81k0Ukpz_EOK2OGuAC-THE71mW4dJwoJ3iX1Vx_pcA@mail.gmail.com>

cogger v0.0.5 now supports .ovr external overviews. It will automatically
set the output cog to bigtiff if required, so your use-case should now be
covered.

--
Thomas


Le lun. 14 juin 2021 ? 22:12, <Matt.Wilkie at yukon.ca> a ?crit :

> > You can create external overviews with the -ro switch
>
> Yeah, I have those. I was trying to create internal ones instead in order
> to use cogger ;-)
>
> (And behind all of this, a weeping and wailing and gnashing of teeth at
> the upstream person or persons who decided that creating jpegs and throwing
> away the originals was "good enough". Oh well, my history is littered with
> bad calls too.)
>
> Matt
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/dfc229c7/attachment.html>

From David.Hill at oregonstate.edu  Mon Jun 28 11:59:24 2021
From: David.Hill at oregonstate.edu (Hill, David Foster)
Date: Mon, 28 Jun 2021 18:59:24 +0000
Subject: [gdal-dev] gdal_translate for nc --> tiff. Coords seem to change?
Message-ID: <64E16133-8CCD-4977-B0CE-48D8F0952547@oregonstate.edu>

Hello.

I am new to GDAL, and have spent the past two weeks exploring its use for (largely) nc ?> tiff conversions. I am puzzled by a few things, however. I have a .nc file and when I use 

>> ncdump -c file.nc

the coords are shown to me. The min x is 487200 and the min y is 4690100. The grid size is 100 m. If I then do:

>> gdal_translate -of GTiff file.nc file.tif

and then

>> gdalinfo file.tif, 

it shows the ?lower left? corner coordinates as

486790, 4690050

For the y coord, I can see how this makes sense?assume that ncdump is giving coords of the grid cell centers, not the ?corner? of the grid cells. Thus, the 50 m difference. For the x coord, the values are like 410 m different, so I am puzzled about that.

I am sure this is an overly simple question, but I would welcome any tips / guidance on what I am doing wrong. Thank you.
---------------------------------------------------
David F. Hill
Professor
Civil and Construction Engineering
Oregon State University
220 Owen Hall
Corvallis, OR 97331
541.737.4939
david.hill at oregonstate.edu
http://www.engr.oregonstate.edu/~dfh
---------------------------------------------------



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1563 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/94676cca/attachment-0001.bin>

From even.rouault at spatialys.com  Mon Jun 28 12:53:28 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Jun 2021 21:53:28 +0200
Subject: [gdal-dev] gdal_translate for nc --> tiff. Coords seem to
 change?
In-Reply-To: <64E16133-8CCD-4977-B0CE-48D8F0952547@oregonstate.edu>
References: <64E16133-8CCD-4977-B0CE-48D8F0952547@oregonstate.edu>
Message-ID: <4c4d66ac-67e5-6e28-a909-7d892409712f@spatialys.com>

David,

providing a link to a such file could be useful for investigation

Even

Le 28/06/2021 ? 20:59, Hill, David Foster a ?crit?:
> Hello.
>
> I am new to GDAL, and have spent the past two weeks exploring its use for (largely) nc ?> tiff conversions. I am puzzled by a few things, however. I have a .nc file and when I use
>
>>> ncdump -c file.nc
> the coords are shown to me. The min x is 487200 and the min y is 4690100. The grid size is 100 m. If I then do:
>
>>> gdal_translate -of GTiff file.nc file.tif
> and then
>
>>> gdalinfo file.tif,
> it shows the ?lower left? corner coordinates as
>
> 486790, 4690050
>
> For the y coord, I can see how this makes sense?assume that ncdump is giving coords of the grid cell centers, not the ?corner? of the grid cells. Thus, the 50 m difference. For the x coord, the values are like 410 m different, so I am puzzled about that.
>
> I am sure this is an overly simple question, but I would welcome any tips / guidance on what I am doing wrong. Thank you.
> ---------------------------------------------------
> David F. Hill
> Professor
> Civil and Construction Engineering
> Oregon State University
> 220 Owen Hall
> Corvallis, OR 97331
> 541.737.4939
> david.hill at oregonstate.edu
> http://www.engr.oregonstate.edu/~dfh
> ---------------------------------------------------
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/8cd2061d/attachment.html>

From David.Hill at oregonstate.edu  Mon Jun 28 13:42:10 2021
From: David.Hill at oregonstate.edu (Hill, David Foster)
Date: Mon, 28 Jun 2021 20:42:10 +0000
Subject: [gdal-dev] gdal_translate for nc --> tiff. Coords seem to
 change?
In-Reply-To: <4c4d66ac-67e5-6e28-a909-7d892409712f@spatialys.com>
References: <64E16133-8CCD-4977-B0CE-48D8F0952547@oregonstate.edu>
 <4c4d66ac-67e5-6e28-a909-7d892409712f@spatialys.com>
Message-ID: <0294865E-F60B-4E1D-A82A-5E99BE7FE191@oregonstate.edu>

Here is a link to the .tif:

https://drive.google.com/file/d/1ZxNdoURdLZS1HRUQUhF-evD1NpuIDcvk/view?usp=sharing <https://drive.google.com/file/d/1ZxNdoURdLZS1HRUQUhF-evD1NpuIDcvk/view?usp=sharing>

And here is a link to the .nc:

https://drive.google.com/file/d/1pcXklnup5AxYe3DQfGfsZ3mwwe8WI8mf/view?usp=sharing <https://drive.google.com/file/d/1pcXklnup5AxYe3DQfGfsZ3mwwe8WI8mf/view?usp=sharing> 


---------------------------------------------------
David F. Hill
Professor
Civil and Construction Engineering
Oregon State University
220 Owen Hall
Corvallis, OR 97331
541.737.4939
david.hill at oregonstate.edu
http://www.engr.oregonstate.edu/~dfh
---------------------------------------------------



> On Jun 28, 2021, at 12:53 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> [This email originated from outside of OSU. Use caution with links and attachments.]
> 
> David,
> 
> providing a link to a such file could be useful for investigation
> 
> Even
> 
> Le 28/06/2021 ? 20:59, Hill, David Foster a ?crit :
>> Hello.
>> 
>> I am new to GDAL, and have spent the past two weeks exploring its use for (largely) nc ?> tiff conversions. I am puzzled by a few things, however. I have a .nc file and when I use 
>> 
>>>> ncdump -c file.nc
>> the coords are shown to me. The min x is 487200 and the min y is 4690100. The grid size is 100 m. If I then do:
>> 
>>>> gdal_translate -of GTiff file.nc file.tif
>> and then
>> 
>>>> gdalinfo file.tif, 
>> it shows the ?lower left? corner coordinates as
>> 
>> 486790, 4690050
>> 
>> For the y coord, I can see how this makes sense?assume that ncdump is giving coords of the grid cell centers, not the ?corner? of the grid cells. Thus, the 50 m difference. For the x coord, the values are like 410 m different, so I am puzzled about that.
>> 
>> I am sure this is an overly simple question, but I would welcome any tips / guidance on what I am doing wrong. Thank you.
>> ---------------------------------------------------
>> David F. Hill
>> Professor
>> Civil and Construction Engineering
>> Oregon State University
>> 220 Owen Hall
>> Corvallis, OR 97331
>> 541.737.4939
>> david.hill at oregonstate.edu <mailto:david.hill at oregonstate.edu>
>> http://www.engr.oregonstate.edu/~dfh <https://nam04.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.engr.oregonstate.edu%2F~dfh&data=04%7C01%7C%7Cf1052ff53fe1478320b708d93a6e67c0%7Cce6d05e13c5e4d6287a84c4a2713c113%7C0%7C0%7C637605068745495027%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=2U4m8gjslAiHa%2FjfQlCHsjR30mQyoUKaZK6lZTA1W9M%3D&reserved=0>
>> ---------------------------------------------------
>> 
>> 
>> 
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=04%7C01%7C%7Cf1052ff53fe1478320b708d93a6e67c0%7Cce6d05e13c5e4d6287a84c4a2713c113%7C0%7C0%7C637605068745495027%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=Es0pPW8W2v2kSzDllxKkcLuzn2zJwFZ%2BCtHI3BahwAU%3D&reserved=0>
> -- 
> http://www.spatialys.com <https://nam04.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&data=04%7C01%7C%7Cf1052ff53fe1478320b708d93a6e67c0%7Cce6d05e13c5e4d6287a84c4a2713c113%7C0%7C0%7C637605068745505025%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=BcNPqrHMHjyxWT0koLvKjnN6ZKZ%2BtNiYwMuM%2BgYfGkw%3D&reserved=0>
> My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/e62ee528/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1563 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/e62ee528/attachment.bin>

From even.rouault at spatialys.com  Mon Jun 28 14:56:38 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Jun 2021 23:56:38 +0200
Subject: [gdal-dev] gdal_translate for nc --> tiff. Coords seem to
 change?
In-Reply-To: <0294865E-F60B-4E1D-A82A-5E99BE7FE191@oregonstate.edu>
References: <64E16133-8CCD-4977-B0CE-48D8F0952547@oregonstate.edu>
 <4c4d66ac-67e5-6e28-a909-7d892409712f@spatialys.com>
 <0294865E-F60B-4E1D-A82A-5E99BE7FE191@oregonstate.edu>
Message-ID: <23714883-cdb9-4781-cf19-17b05fd30479@spatialys.com>

As far as I can see, the netCDF driver behaves as designed. It reports 
as the origin the top-left corner of the raster.

Le 28/06/2021 ? 22:42, Hill, David Foster a ?crit?:
> Here is a link to the .tif:
>
> https://drive.google.com/file/d/1ZxNdoURdLZS1HRUQUhF-evD1NpuIDcvk/view?usp=sharing 
> <https://drive.google.com/file/d/1ZxNdoURdLZS1HRUQUhF-evD1NpuIDcvk/view?usp=sharing>
>
> And here is a link to the .nc:
>
> https://drive.google.com/file/d/1pcXklnup5AxYe3DQfGfsZ3mwwe8WI8mf/view?usp=sharing 
> <https://drive.google.com/file/d/1pcXklnup5AxYe3DQfGfsZ3mwwe8WI8mf/view?usp=sharing> 
>
>
>
> ---------------------------------------------------
> David F. Hill
> Professor
> Civil and Construction Engineering
> Oregon State University
> 220 Owen Hall
> Corvallis, OR 97331
> 541.737.4939
> david.hill at oregonstate.edu <mailto:david.hill at oregonstate.edu>
> http://www.engr.oregonstate.edu/~dfh
> ---------------------------------------------------
>
>
>
>> On Jun 28, 2021, at 12:53 PM, Even Rouault 
>> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>>
>> [This email originated from outside of OSU. Use caution with links 
>> and attachments.]
>>
>> David,
>>
>> providing a link to a such file could be useful for investigation
>>
>> Even
>>
>> Le 28/06/2021 ? 20:59, Hill, David Foster a ?crit?:
>>> Hello.
>>>
>>> I am new to GDAL, and have spent the past two weeks exploring its use for (largely) nc ?> tiff conversions. I am puzzled by a few things, however. I have a .nc file and when I use
>>>
>>>>> ncdump -c file.nc
>>> the coords are shown to me. The min x is 487200 and the min y is 4690100. The grid size is 100 m. If I then do:
>>>
>>>>> gdal_translate -of GTiff file.nc file.tif
>>> and then
>>>
>>>>> gdalinfo file.tif,
>>> it shows the ?lower left? corner coordinates as
>>>
>>> 486790, 4690050
>>>
>>> For the y coord, I can see how this makes sense?assume that ncdump is giving coords of the grid cell centers, not the ?corner? of the grid cells. Thus, the 50 m difference. For the x coord, the values are like 410 m different, so I am puzzled about that.
>>>
>>> I am sure this is an overly simple question, but I would welcome any tips / guidance on what I am doing wrong. Thank you.
>>> ---------------------------------------------------
>>> David F. Hill
>>> Professor
>>> Civil and Construction Engineering
>>> Oregon State University
>>> 220 Owen Hall
>>> Corvallis, OR 97331
>>> 541.737.4939
>>> david.hill at oregonstate.edu
>>> http://www.engr.oregonstate.edu/~dfh
>>> ---------------------------------------------------
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210628/f3d88270/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jun 28 15:15:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Jun 2021 00:15:11 +0200
Subject: [gdal-dev] gdal_translate for nc --> tiff. Coords seem to
 change?
In-Reply-To: <C76054DC-9B66-4825-9A56-7EDC8023547C@oregonstate.edu>
References: <64E16133-8CCD-4977-B0CE-48D8F0952547@oregonstate.edu>
 <4c4d66ac-67e5-6e28-a909-7d892409712f@spatialys.com>
 <0294865E-F60B-4E1D-A82A-5E99BE7FE191@oregonstate.edu>
 <23714883-cdb9-4781-cf19-17b05fd30479@spatialys.com>
 <C76054DC-9B66-4825-9A56-7EDC8023547C@oregonstate.edu>
Message-ID: <9082963d-7a20-7408-4c9e-83ca968a867f@spatialys.com>

Apologies, I misread your original question. I don't observe a 
difference in min x between the .nc file you observe and the .tif I get 
from gdal_translate. However I see the .tif you uploaded has indeed a 
difference in x, but it also has a UTM CRS, whereas the original .nc 
file has no CRS information, so I'm a bit confused if you attached the 
right .nc file.

Le 29/06/2021 ? 00:07, Hill, David Foster a ?crit?:
> Thank you for the reply. I still don?t understand why the minimum x 
> values from the grids are so different between the .nc and the .tif 
> files. I will continue to try and figure it out.
>
> Regards,
>
> ---------------------------------------------------
> David F. Hill
> Professor
> Civil and Construction Engineering
> Oregon State University
> 220 Owen Hall
> Corvallis, OR 97331
> 541.737.4939
> david.hill at oregonstate.edu <mailto:david.hill at oregonstate.edu>
> http://www.engr.oregonstate.edu/~dfh
> ---------------------------------------------------
>
>
>
>> On Jun 28, 2021, at 2:56 PM, Even Rouault <even.rouault at spatialys.com 
>> <mailto:even.rouault at spatialys.com>> wrote:
>>
>> [This email originated from outside of OSU. Use caution with links 
>> and attachments.]
>>
>> As far as I can see, the netCDF driver behaves as designed. It 
>> reports as the origin the top-left corner of the raster.
>>
>> Le 28/06/2021 ? 22:42, Hill, David Foster a ?crit?:
>>> Here is a link to the .tif:
>>>
>>> https://drive.google.com/file/d/1ZxNdoURdLZS1HRUQUhF-evD1NpuIDcvk/view?usp=sharing 
>>> <https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdrive.google.com%2Ffile%2Fd%2F1ZxNdoURdLZS1HRUQUhF-evD1NpuIDcvk%2Fview%3Fusp%3Dsharing&data=04%7C01%7C%7C2968bf9723694d852d0708d93a7f9c9e%7Cce6d05e13c5e4d6287a84c4a2713c113%7C0%7C0%7C637605142036202941%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=TEV9ZAhk1Si3JbX9YJeqCI0unDgOjrxRYxoOIQqnrdk%3D&reserved=0>
>>>
>>> And here is a link to the .nc:
>>>
>>> https://drive.google.com/file/d/1pcXklnup5AxYe3DQfGfsZ3mwwe8WI8mf/view?usp=sharing 
>>> <https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdrive.google.com%2Ffile%2Fd%2F1pcXklnup5AxYe3DQfGfsZ3mwwe8WI8mf%2Fview%3Fusp%3Dsharing&data=04%7C01%7C%7C2968bf9723694d852d0708d93a7f9c9e%7Cce6d05e13c5e4d6287a84c4a2713c113%7C0%7C0%7C637605142036212935%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=dx1yLb2i6YCPjnXudnE1JyPHKG1Wywt3IFv%2Foa7Q%2BQc%3D&reserved=0> 
>>>
>>>
>>>
>>> ---------------------------------------------------
>>> David F. Hill
>>> Professor
>>> Civil and Construction Engineering
>>> Oregon State University
>>> 220 Owen Hall
>>> Corvallis, OR 97331
>>> 541.737.4939
>>> david.hill at oregonstate.edu <mailto:david.hill at oregonstate.edu>
>>> http://www.engr.oregonstate.edu/~dfh
>>> ---------------------------------------------------
>>>
>>>
>>>
>>>> On Jun 28, 2021, at 12:53 PM, Even Rouault 
>>>> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>>>>
>>>> [This email originated from outside of OSU. Use caution with links 
>>>> and attachments.]
>>>>
>>>> David,
>>>>
>>>> providing a link to a such file could be useful for investigation
>>>>
>>>> Even
>>>>
>>>> Le 28/06/2021 ? 20:59, Hill, David Foster a ?crit?:
>>>>> Hello.
>>>>>
>>>>> I am new to GDAL, and have spent the past two weeks exploring its use for (largely) nc ?> tiff conversions. I am puzzled by a few things, however. I have a .nc file and when I use
>>>>>
>>>>>>> ncdump -c file.nc
>>>>> the coords are shown to me. The min x is 487200 and the min y is 4690100. The grid size is 100 m. If I then do:
>>>>>
>>>>>>> gdal_translate -of GTiff file.nc file.tif
>>>>> and then
>>>>>
>>>>>>> gdalinfo file.tif,
>>>>> it shows the ?lower left? corner coordinates as
>>>>>
>>>>> 486790, 4690050
>>>>>
>>>>> For the y coord, I can see how this makes sense?assume that ncdump is giving coords of the grid cell centers, not the ?corner? of the grid cells. Thus, the 50 m difference. For the x coord, the values are like 410 m different, so I am puzzled about that.
>>>>>
>>>>> I am sure this is an overly simple question, but I would welcome any tips / guidance on what I am doing wrong. Thank you.
>>>>> ---------------------------------------------------
>>>>> David F. Hill
>>>>> Professor
>>>>> Civil and Construction Engineering
>>>>> Oregon State University
>>>>> 220 Owen Hall
>>>>> Corvallis, OR 97331
>>>>> 541.737.4939
>>>>> david.hill at oregonstate.edu
>>>>> http://www.engr.oregonstate.edu/~dfh
>>>>> ---------------------------------------------------
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> -- 
>>>> http://www.spatialys.com
>>>> My software is free, but my time generally not.
>>>
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210629/755adf38/attachment.html>

From aborruso at gmail.com  Tue Jun 29 01:55:04 2021
From: aborruso at gmail.com (andy)
Date: Tue, 29 Jun 2021 10:55:04 +0200
Subject: [gdal-dev] Partially OT: "libsqlite3.la" error running make
Message-ID: <CAHEdGZPxix7+-YuHOyYXttH3NJdQkLgUdd+tEscLuYx4vhn=YA@mail.gmail.com>

Hi,
I have downloaded gdal-2.4.4 and then

./configure --prefix=/usr/local --with-sqlite3 --with-spatialite=/usr/local
 --with-geos=/usr/local/bin/geos-config --with-netcdf=/usr/local --with-proj

When I run make I have this error:

"libsqlite3.la" No such file or directory

I'm using debian 11.

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210629/aecfec7b/attachment.html>

From Roger.Bivand at nhh.no  Tue Jun 29 01:49:03 2021
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 29 Jun 2021 10:49:03 +0200
Subject: [gdal-dev] GDAL 3.3.1 RC1 available
Message-ID: <4616f77-45bb-e0e1-b07c-7ed660f63b24@reclus2.nhh.no>

No problems attributable to 3.3.1 built with PROJ 8.1.0 in R spatial 
package reverse dependency checks, looks good!

Roger

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From aparna_kumar at yahoo.com  Tue Jun 29 14:32:54 2021
From: aparna_kumar at yahoo.com (Aparna Nimbalker)
Date: Tue, 29 Jun 2021 21:32:54 +0000 (UTC)
Subject: [gdal-dev] Unable to convert NTF to png
References: <702921392.182045.1625002374742.ref@mail.yahoo.com>
Message-ID: <702921392.182045.1625002374742@mail.yahoo.com>

Hello, I am a beginner to gdal and I am working with .ntf, .NTF file formats.
I am trying to convert this one .NTF file (unfortunately I cannot share the file)? to a .png, so I can easily open it up and use it for a future processing. This particular .NTF file is 1.39 GB.
Right now I am working on a mac, in the terminal. I am using conda and have set up a (gdal_project) environment. I have downloaded all the necessary gdal packages and libraries by running?conda install -c conda-forge gdal?in the terminal.
I tried running for f in *.NTF do gdal_translate ${f} pngs/${f%.*}.png; done?
?in the terminal for the NTF file I mentioned above (it was the only one in the folder I was looping through). However, even though it creates a png, all I see is a large png that does not show the image, but is completely black.
Please let me know where I am going wrong. Is there something I am missing or should be doing that I am currently not? Is there a solution to my problem?




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210629/b650582d/attachment.html>

From patrick.mckendree.young at gmail.com  Tue Jun 29 14:57:54 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Tue, 29 Jun 2021 15:57:54 -0600
Subject: [gdal-dev] Unable to convert NTF to png
In-Reply-To: <702921392.182045.1625002374742@mail.yahoo.com>
References: <702921392.182045.1625002374742.ref@mail.yahoo.com>
 <702921392.182045.1625002374742@mail.yahoo.com>
Message-ID: <CADXYQQ4VpHe7r--Cj2gYaLuAZavWaqbeQfYNj1wKAznRuH+_VQ@mail.gmail.com>

What is the bit depth of the NTF?  You might need to scale it to an 8bit
range when converting it, check out the -scale option flag for
gdal_translate

https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale

On Tue, Jun 29, 2021 at 3:33 PM Aparna Nimbalker via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hello, I am a beginner to gdal and I am working with .ntf, .NTF file
> formats.
>
> I am trying to convert this one .NTF file (unfortunately I cannot share
> the file)  to a .png, so I can easily open it up and use it for a future
> processing. This particular .NTF file is 1.39 GB.
>
> Right now I am working on a mac, in the terminal. I am using conda and
> have set up a (gdal_project) environment. I have downloaded all the
> necessary gdal packages and libraries by running conda install -c
> conda-forge gdal in the terminal.
>
> I tried running for f in *.NTF do gdal_translate ${f} pngs/${f%.*}.png;
> done
>  in the terminal for the NTF file I mentioned above (it was the only one
> in the folder I was looping through). However, even though it creates a
> png, all I see is a large png that does not show the image, but is
> completely black.
>
> Please let me know where I am going wrong. Is there something I am missing
> or should be doing that I am currently not? Is there a solution to my
> problem?
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210629/f7c4dadf/attachment.html>

From bradh at frogmouth.net  Tue Jun 29 17:33:52 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 30 Jun 2021 10:33:52 +1000
Subject: [gdal-dev] Unable to convert NTF to png
In-Reply-To: <CADXYQQ4VpHe7r--Cj2gYaLuAZavWaqbeQfYNj1wKAznRuH+_VQ@mail.gmail.com>
References: <702921392.182045.1625002374742.ref@mail.yahoo.com>
 <702921392.182045.1625002374742@mail.yahoo.com>
 <CADXYQQ4VpHe7r--Cj2gYaLuAZavWaqbeQfYNj1wKAznRuH+_VQ@mail.gmail.com>
Message-ID: <2382332.Pq4Zi4D328@audax>

On Wednesday, 30 June 2021 7:57:54 AM AEST Patrick Young wrote:
> What is the bit depth of the NTF?  You might need to scale it to an 
8bit
> range when converting it, check out the -scale option flag for
> gdal_translate
> 
> https://gdal.org/programs/gdal_translate.html#cmdoption-gdal_translate-scale
If that doesn't work, please show the full metadata dump from 
gdalinfo.

Brad

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210630/42f431da/attachment.html>

From eruiz at aplitop.com  Wed Jun 30 01:21:49 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Wed, 30 Jun 2021 08:21:49 +0000
Subject: [gdal-dev] WMS using a Proxy
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.4e89baff-8fae-4f1d-a011-29ba0f060265@emailsignatures365.codetwo.com>
Message-ID: <AM0P192MB04984EBFA28A49EE16C527B3BB019@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>

Hello, I need to access the information from a WMS server through a proxy. I would need to know exactly the syntax to use the proxy, I have tried the following:


 *   gdalinfo "WMS:https://www.idee.es/wms/PNOA/PNOA?service=wms&request=getcapabilities" -config GDAL_HTTP_PROXY xx.xxx.x.xx:3128 -config GDAL_HTTP_PROXYUSERPWD user:password -config GDAL_HTTP_AUTH NTLM

Would it be okay with the previous syntax? Can you repeat the word --config? Do you need quotes or brackets for the IP: port or user: password? in the case of GDAL_HTTP_AUTH, how to know whether to put NTLM or BASIC? and finally, is it better to put the parameters after gdalinfo or in the system variables?

I'm waiting for your answer, regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210630/ccdc52ea/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210630/ccdc52ea/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210630/ccdc52ea/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210630/ccdc52ea/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210630/ccdc52ea/attachment-0007.png>

From stenger at lat-lon.de  Wed Jun 30 11:42:49 2021
From: stenger at lat-lon.de (Dirk Stenger)
Date: Wed, 30 Jun 2021 20:42:49 +0200
Subject: [gdal-dev] GDAL 3.0 on Debian 10
Message-ID: <a4bb9fc5-8933-916d-0ccf-27564011e919@lat-lon.de>

Hi all,

Currently, I am trying to install GDAL 3.0 on Debian 10.

Unfortunately, the package manager just provides GDAL 2 and the hints on 
https://gdal.org/download.html#debian do not tackle my case.

What is the easiest way to install GDAL 3.0 on Debian 10? Are there 
binaries available that I can use? Is there a manual describing how to 
install GDAL 3.0 on Debian 10?

Can anyone help me with those questions?

Kind regards,

Dirk



From jukka.rahkonen at maanmittauslaitos.fi  Wed Jun 30 12:51:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 30 Jun 2021 19:51:48 +0000
Subject: [gdal-dev] WMS using a Proxy
Message-ID: <95fe38e933e8476bad01944a9b3f5556@maanmittauslaitos.fi>

Hi,

Our proxy does not require user/password but these options work for the server/port part:

1) Set environmental variable and run gdalinfo
SET https_proxy=our_proxy.fi:8888
gdalinfo "WMS:https://www.idee.es/wms/PNOA/PNOA?service=wms&request=getcapabilities"

2) Set proxy with config option

gdalinfo "WMS:https://www.idee.es/wms/PNOA/PNOA?service=wms&request=getcapabilities" --config gdal_http_proxy our_proxy.fi:8888

Config option gdal_http_proxy seems to work also with https. Environmental variables must be set explicitly for http_proxy and https_proxy. And --config can be repeated. Which method to use depends on your work environment. I believe that technically the options are identical but if you use both internal and external services which require different proxy settings it might be more clear to define the proxy with config option.

-Jukka Rahkonen-


Elena Ruiz wrote:

> Hello, I need to access the information from a WMS server through a proxy. I would need to 
> know exactly the syntax to use the proxy, I have tried the following:


>   gdalinfo "WMS:https://www.idee.es/wms/PNOA/PNOA?service=wms&request=getcapabilities" -config GDAL_HTTP_PROXY xx.xxx.x.xx:3128 -config GDAL_HTTP_PROXYUSERPWD user:password -config GDAL_HTTP_AUTH NTLM

> Would it be okay with the previous syntax? Can you repeat the word --config? Do you need 
> quotes or brackets for the IP: port or user: password? in the case of GDAL_HTTP_AUTH, 
> how to know whether to put NTLM or BASIC? and finally, is it better to put the parameters 
> after gdalinfo or in the system variables?

> I'm waiting for your answer, regards

From sebastic at xs4all.nl  Wed Jun 30 20:51:30 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 1 Jul 2021 05:51:30 +0200
Subject: [gdal-dev] GDAL 3.0 on Debian 10
In-Reply-To: <a4bb9fc5-8933-916d-0ccf-27564011e919@lat-lon.de>
References: <a4bb9fc5-8933-916d-0ccf-27564011e919@lat-lon.de>
Message-ID: <87a15053-e9bb-4d18-8cea-ac114cd47f99@xs4all.nl>

On 6/30/21 8:42 PM, Dirk Stenger wrote:
> What is the easiest way to install GDAL 3.0 on Debian 10? Are there
> binaries available that I can use? Is there a manual describing how to
> install GDAL 3.0 on Debian 10?

I wouldn't bother with GDAL 3 on buster, consider upgrading to bullseye
already its release is due soon.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

