From rajeshreddy82 at gmail.com  Mon Jun  1 02:49:12 2020
From: rajeshreddy82 at gmail.com (rmaddu)
Date: Mon, 1 Jun 2020 02:49:12 -0700 (MST)
Subject: [gdal-dev] gdal.VSIFReadL
Message-ID: <1591004952565-0.post@n6.nabble.com>

gdal.VSIFReadL method is available in python. What is the equivalent method
in C#. My goal is write vsimem file to disk .



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From domlysz at gmail.com  Tue Jun  2 03:14:16 2020
From: domlysz at gmail.com (Dominique Lyszczarz)
Date: Tue, 2 Jun 2020 12:14:16 +0200
Subject: [gdal-dev] Current state of Winkel Tripel projection support
Message-ID: <CAKT=1=CgucJiRxEQ4mjLeeCUE8HVQx13SSzsPyOdecoBBRbw_w@mail.gmail.com>

Hi all,

I'm trying to reproject a raster from WGS84 to Winkel Tripel (EPSG 54030)
but unfortunately I encounter some error messages :

non-convergent inverse meridional dist
latitude or longitude exceeded limits

I've found some old messages about PROJ not supporting Winkel Tripel
projection because of a missing inverse transformation function. But I've
the feeling that this projection is better supported now. So I would like
to know if there are still limitations with it and hopefully some
explainations about these errors and a possible workaround. Currently I've
tried to reduce the target extent but with no luck.

Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200602/23357fe8/attachment.html>

From even.rouault at spatialys.com  Tue Jun  2 03:46:39 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Jun 2020 12:46:39 +0200
Subject: [gdal-dev] Current state of Winkel Tripel projection support
In-Reply-To: <CAKT=1=CgucJiRxEQ4mjLeeCUE8HVQx13SSzsPyOdecoBBRbw_w@mail.gmail.com>
References: <CAKT=1=CgucJiRxEQ4mjLeeCUE8HVQx13SSzsPyOdecoBBRbw_w@mail.gmail.com>
Message-ID: <1937105.W6I7PxNPub@even-i700>

Dominique,

A few remarks:
- There's no EPSG:54030
- There's a ESRI:54030
- ESRI:54030 is World_Robinson, so no Winkel Tripel
- The PROJ implementation of Winkel Tripel supports since 2015 the inverse method, using 
an iterative approach. But there might potential convergence issues. I see it uses a very small 
epsilon in longitude/latitude (1e-12 radian)
- Robinson uses also an inverse method using an iterative approach

The best would be to identify the points that fail to reproject and see if it is expected or not.

Even

> Hi all,
> 
> I'm trying to reproject a raster from WGS84 to Winkel Tripel (EPSG 54030)
> but unfortunately I encounter some error messages :
> 
> non-convergent inverse meridional dist
> latitude or longitude exceeded limits
> 
> I've found some old messages about PROJ not supporting Winkel Tripel
> projection because of a missing inverse transformation function. But I've
> the feeling that this projection is better supported now. So I would like
> to know if there are still limitations with it and hopefully some
> explainations about these errors and a possible workaround. Currently I've
> tried to reduce the target extent but with no luck.
> 
> Regards


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200602/f15ed183/attachment.html>

From domlysz at gmail.com  Tue Jun  2 06:02:29 2020
From: domlysz at gmail.com (domlysz)
Date: Tue, 2 Jun 2020 06:02:29 -0700 (MST)
Subject: [gdal-dev] Current state of Winkel Tripel projection support
In-Reply-To: <1937105.W6I7PxNPub@even-i700>
References: <CAKT=1=CgucJiRxEQ4mjLeeCUE8HVQx13SSzsPyOdecoBBRbw_w@mail.gmail.com>
 <1937105.W6I7PxNPub@even-i700>
Message-ID: <1591102949389-0.post@n6.nabble.com>

Hi Even,

Thanks for the answer, my double mistakes the srs I wanted to talk about is
the number 54042 and you're right this is an ESRI code, I can't believe I
don't see it ! 

The error messages happen when trying to reproject to EPSG:54042 which does
ot exists at all, with GDAL 2.3. So I resolved the issue by updating GDAL
and simply use the syntax -t_srs "+proj=wintri"

I'm very sorry to have bored the list with my mistakes, and thanks again for
your help.

Dominique



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sean at mapbox.com  Tue Jun  2 13:29:00 2020
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 2 Jun 2020 14:29:00 -0600
Subject: [gdal-dev] GRIB SRS sensitive to CHECK_WITH_INVERT_PROJ
Message-ID: <CADPhZXz79OmVivDEwugtCaQVT3g6MNbfB2ZJBmwE4LyDkLcsLg@mail.gmail.com>

Hi all,

Rasterio users have reported that GRIB metadata is sensitive
to CHECK_WITH_INVERT_PROJ and I can confirm it. The examples below use
rasterio 1.1.5dev (not yet released), GDAL 3.1.0 and PROJ 7.0.1. The bounds
of the dataset are approximately the Northern Hemisphere.

$ rio info --crs ~/work/grib2/sref_arw.t09z.pgrb132.ctl.f00.grib2
PROJCS["unnamed",GEOGCS["Coordinate System imported from GRIB
file",DATUM["unnamed",SPHEROID["Sphere",6371229,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["latitude_of_origin",50],PARAMETER["central_meridian",253],PARAMETER["standard_parallel_1",50],PARAMETER["standard_parallel_2",50],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Metre",1],AXIS["Easting",EAST],AXIS["Northing",NORTH]]

Now, I'm going to set CHECK_WITH_INVERT_PROJ=YES.

$ CHECK_WITH_INVERT_PROJ=YES rio info --crs
~/work/grib2/sref_arw.t09z.pgrb132.ctl.f00.grib2
WARNING:rasterio._env:CPLE_AppDefined in Unable to perform coordinate
transformations, so the correct projected geotransform could not be deduced
from the lat/long control points.  Defaulting to ungeoreferenced.
WARNING:rasterio._env:CPLE_AppDefined in Unable to perform coordinate
transformations, so the correct projected geotransform could not be deduced
from the lat/long control points.  Defaulting to ungeoreferenced.


An empty string is printed to the terminal after the second warning. Note
that behavior was different with rasterio 1.1.4, which
set CHECK_WITH_INVERT_PROJ=YES internally in an attempt to improve the
defaults.

The warning comes from
https://github.com/OSGeo/gdal/blob/2818ff0a49f65741a55b9cea79df496cc05f85e3/gdal/frmts/grib/gribdataset.cpp#L2149
.

Is this sensitivity expected?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200602/c8393ce4/attachment.html>

From even.rouault at spatialys.com  Tue Jun  2 13:43:32 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 02 Jun 2020 22:43:32 +0200
Subject: [gdal-dev] GRIB SRS sensitive to CHECK_WITH_INVERT_PROJ
In-Reply-To: <CADPhZXz79OmVivDEwugtCaQVT3g6MNbfB2ZJBmwE4LyDkLcsLg@mail.gmail.com>
References: <CADPhZXz79OmVivDEwugtCaQVT3g6MNbfB2ZJBmwE4LyDkLcsLg@mail.gmail.com>
Message-ID: <7841900.WvUc32RvjM@even-i700>

Hi Sean,

> An empty string is printed to the terminal after the second warning. Note
> that behavior was different with rasterio 1.1.4, which
> set CHECK_WITH_INVERT_PROJ=YES internally in an attempt to improve the
> defaults.
> 
> The warning comes from
> https://github.com/OSGeo/gdal/blob/2818ff0a49f65741a55b9cea79df496cc05f85e3/
> gdal/frmts/grib/gribdataset.cpp#L2149 .
> 
> Is this sensitivity expected?

I'd say this isn't completely unexpected if the corners of the dataset are far from the 
projection center. There might be convergence issues in the inverse projection method (or it 
might not try to converge down to the precision we expect with 
CHECK_WITH_INVERT_PROJ=YES)

CHECK_WITH_INVERT_PROJ is mostly a gdalwarp implementation detail to make things work 
in some cases. I wouldn't advise to use it universally unless you know you need to use it (one 
good reason is that not all PROJ projection methods have an inverse method, even if most 
popular ones do have one)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200602/d9358a16/attachment.html>

From sean at mapbox.com  Tue Jun  2 14:16:46 2020
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 2 Jun 2020 15:16:46 -0600
Subject: [gdal-dev] GRIB SRS sensitive to CHECK_WITH_INVERT_PROJ
In-Reply-To: <7841900.WvUc32RvjM@even-i700>
References: <CADPhZXz79OmVivDEwugtCaQVT3g6MNbfB2ZJBmwE4LyDkLcsLg@mail.gmail.com>
 <7841900.WvUc32RvjM@even-i700>
Message-ID: <CADPhZXxtRhEydqFkHMC8BFa+w23_qyscRF70O8EOpW3CAZOR5Q@mail.gmail.com>

Hi Even,

On Tue, Jun 2, 2020 at 2:43 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Sean,
>
>
>
> > An empty string is printed to the terminal after the second warning. Note
>
> > that behavior was different with rasterio 1.1.4, which
>
> > set CHECK_WITH_INVERT_PROJ=YES internally in an attempt to improve the
>
> > defaults.
>
> >
>
> > The warning comes from
>
> >
> https://github.com/OSGeo/gdal/blob/2818ff0a49f65741a55b9cea79df496cc05f85e3/
>
> > gdal/frmts/grib/gribdataset.cpp#L2149 .
>
> >
>
> > Is this sensitivity expected?
>
>
>
> I'd say this isn't completely unexpected if the corners of the dataset are
> far from the projection center. There might be convergence issues in the
> inverse projection method (or it might not try to converge down to the
> precision we expect with CHECK_WITH_INVERT_PROJ=YES)
>
>
>
> CHECK_WITH_INVERT_PROJ is mostly a gdalwarp implementation detail to make
> things work in some cases. I wouldn't advise to use it universally unless
> you know you need to use it (one good reason is that not all PROJ
> projection methods have an inverse method, even if most popular ones do
> have one)
>
>
>
> Even
>

Got it. Thank you!

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200602/e70cb166/attachment.html>

From idan at miara.com  Wed Jun  3 12:41:23 2020
From: idan at miara.com (Idan Miara)
Date: Wed, 3 Jun 2020 22:41:23 +0300
Subject: [gdal-dev] bug in gdaldem color-relief?
Message-ID: <CAEDrt3-OrSD1Lsx-gfXgczfby03mq8PoAs-sBnYrkNXPxjfoFA@mail.gmail.com>

Hi

I think I found a bug in gdaldem color-relief (tested on gdal 2.4.4 and
3.1.0).
I'm trying to make a color-relief with the attached dtm file (see attached
a micro sample d.tif).
The dtm has no "nodata" value set.
The following commands produce a very different output, although the
difference between the input palettes is just an added nv line which
shouldn't make a difference as the input has no ndv value.
It seems that gdal is treating the "nv" value as 0 and colors the value 0
as black accordingly.

gdaldem color-relief d.tif c.txt c.tif -CO COMPRESS=DEFLATE
gdaldem color-relief d.tif c_nv.txt c_nv.tif -CO COMPRESS=DEFLATE

c_nv.txt:
200 red
-200 green
nv black

Should I open a bug report or am I missing something here?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200603/41dbd78d/attachment-0001.html>
-------------- next part --------------
200 red
-200 green
-------------- next part --------------
A non-text attachment was scrubbed...
Name: c.tif
Type: image/tiff
Size: 6757 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200603/41dbd78d/attachment-0003.tif>
-------------- next part --------------
200 red
-200 green
nv black
-------------- next part --------------
A non-text attachment was scrubbed...
Name: d.tif
Type: image/tiff
Size: 10742 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200603/41dbd78d/attachment-0004.tif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: c_nv.tif
Type: image/tiff
Size: 6462 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200603/41dbd78d/attachment-0005.tif>

From even.rouault at spatialys.com  Wed Jun  3 15:41:01 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Jun 2020 00:41:01 +0200
Subject: [gdal-dev] Windows CI build times
In-Reply-To: <4B46FBC1-B107-4A5C-98E1-80578C885169@hobu.co>
References: <6887462.ldcPOGF9r1@even-i700>
 <CABUeae-1gB64sbpyEh2vW-Ce1nMv7gCZWfjAto50Oc-a7C_jZw@mail.gmail.com>
 <4B46FBC1-B107-4A5C-98E1-80578C885169@hobu.co>
Message-ID: <2972520.VV3a9HeVF2@even-i700>

On lundi 20 avril 2020 20:16:41 CEST Howard Butler wrote:
> > On Apr 16, 2020, at 7:46 PM, Mateusz Loskot <mateusz at loskot.net> wrote:
> > 
> > On Fri, 17 Apr 2020 at 01:45, Mike Taves <mwtoews at gmail.com> wrote:
> >> It seems that many projects have shifted from AppVeyor to AZP for
> >> performance benefits.
> > 
> > Or GitHub Actions, which is an incarnation of AzP.
> 
> Having done both GitHub Actions and AzP, I think Actions has more convenient
> expressiveness of job flow, a big win of integration with GitHub's API, and
> large directory of user-contributed actions.

https://github.com/OSGeo/gdal/pull/2648 has now a migration of the VS2019 build to 
GitHub actions, which will improve response time by cutting half of the load on AppVeyor

For anyone attempting similar migration, here are a few random points on which I stumbled 
upon:
- git on GitHub actions has the default behaviour of git on Windows, that is it must have 
core.autocrlf=true or whatever makes git turn LF into CRLF on some files. Fix was to set 
core.autocrlf=false
- powershell on GitHub actions exits as soon as a command in a script fails. Which is 
reasonable, but for some reason our GDAL appveyor powershell sequences don't like that, 
especially when used with the black magic exec() function we have in appveyor.yml that 
seems to be an emulation of the default Github action mode. Fix was to set 
$ErrorActionPreference = 'continue'
- anectodical: "Install-PackageProvider NuGet -Force", whatever that does, failed on github 
actions, but that turned out to be unnecessary.
(I now know at least I actively hate powershell)

So on AppVeyor remains the VS 2015 build, since github actions doesn't offer this compiler. 
At some point we will probably be able to remove VS 2015 builds. The main reason for 
keeping it is that OSGeo4W still uses VS 2015 to build GDAL, but this is going to be updated 
to 2019 soon according to Jürgen.

I've also migrated recently the Mac Travis-CI jobs, and all code quality checks into github 
actions. Was easier.

I will probably defer on migrating more things, that is the remaining Linux Travis-CI jobs. 
From a discussion with @pyusr on IRC, one solution to consider, and that would make us 
mostly CI host independent, would be to use Docker builds instead of relying on the VM 
provided by the CI host. I haven't considered that more, but on the paper it seems 
interesting. He was pointing to
https://github.com/tzickel/chunkedbuffer/blob/master/.github/workflows/test.yml +  
https://github.com/tzickel/chunkedbuffer/blob/master/Dockerfile.test as an example . One 
potential issue is that we have some Linux builds that start Docker containers for databases, 
so I'm not sure how that would interact with the build & tests being done in docker build. 
Would probably work by doing them as separate preliminary steps in a job.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/fb477cd5/attachment.html>

From cgodkin at gmail.com  Wed Jun  3 17:26:59 2020
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 3 Jun 2020 17:26:59 -0700
Subject: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
Message-ID: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>

Hi,

I'm unable to figure out how to retrieve elevation data (grids) from the
3DEP program's endpoints.

Starting here:
https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer


it would seem to be possible but I just cannot get anything back other than
solid white images.   Most of the help from that page leads off to
ArcGIS-land which I don't have or want to use.  And Googling for 3DEP leads
only to more government sites that aren't helpful.

If you have some experience with this (or a related public elevation data
source), would you please send an example "gdal_translate" command line?

I'd really like to figure out how to download terrain (as perhaps a GeoTIFF
with floating point elevations) for an arbitrary CONUS lat/lon range.

Thanks in advance for any help!

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200603/06fd3725/attachment.html>

From michael.smith.erdc at gmail.com  Wed Jun  3 17:42:05 2020
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Wed, 3 Jun 2020 20:42:05 -0400
Subject: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
In-Reply-To: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>
References: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>
Message-ID: <3E94BBC2-E6DE-47E7-808F-99736901D951@gmail.com>

Carl,

Try something like

gdal_translate -f gtiff  "<GDAL_WMS><Service name=\"AGS\"><ServerUrl>https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer</ServerUrl><BBoxOrder>xyXY</BBoxOrder><SRS>3857</SRS></Service><DataWindow><UpperLeftX>-20037508.34</UpperLeftX><UpperLeftY>20037508.34</UpperLeftY><LowerRightX>20037508.34</LowerRightX><LowerRightY>-20037508.34</LowerRightY><SizeX>2500</SizeX><SizeY>2500</SizeY></DataWindow></GDAL_WMS>" test1.tif -projwin  ulx uly lrx lry -projwin_srs <srs of your window> -t_srs <srs you want for the output>

If you want a different size than 2500x2500 just change that size

Michael Smith
US Army Corps


> On Jun 3, 2020, at 8:27 PM, Carl Godkin <cgodkin at gmail.com> wrote:
> 
> ﻿
> Hi,
> 
> I'm unable to figure out how to retrieve elevation data (grids) from the 3DEP program's endpoints.
> 
> Starting here:  https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer  
> 
> it would seem to be possible but I just cannot get anything back other than solid white images.   Most of the help from that page leads off to ArcGIS-land which I don't have or want to use.  And Googling for 3DEP leads only to more government sites that aren't helpful.
> 
> If you have some experience with this (or a related public elevation data source), would you please send an example "gdal_translate" command line?
> 
> I'd really like to figure out how to download terrain (as perhaps a GeoTIFF with floating point elevations) for an arbitrary CONUS lat/lon range.
> 
> Thanks in advance for any help!
> 
> carl
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200603/5f0264dd/attachment.html>

From Jon.Morris at jbarisk.com  Thu Jun  4 01:00:46 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Thu, 4 Jun 2020 08:00:46 +0000
Subject: [gdal-dev] Documentation for previous versions
Message-ID: <LO3P123MB35004E616563C3AFD164EB6B82890@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>

Hello all,

I was wondering where we could find documentation for previous versions of GDAL? We are still using version 2.2.0 and there are occasions when we see a useful method in the docs only to find it is not available in our version. I presume the docs available at https://gdal.org/api/index.html are for the latest released version?

I managed to install Doxygen and build docs for us to view locally, so we do actually have a C API reference for version 2.2.0 now, but I can't find where the Python docs are in the source. It would also be very useful to be able to see a different version of the docs at https://gdal.org/python/index.html.

Thanks,

Jon

Jon Morris
Software Developer

Skype<sip:jon.morris at jbarisk.com>

COVID-19. During the current outbreak JBA remains open for business and we continue to deliver our services. However, we have adopted flexible/remote workingas required. I will be receiving and reading email as normal but I may not always be available on the office number.


[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/05d38d6b/attachment-0001.html>

From junt0015 at umn.edu  Thu Jun  4 07:11:47 2020
From: junt0015 at umn.edu (Thomas Juntunen)
Date: Thu, 4 Jun 2020 09:11:47 -0500
Subject: [gdal-dev] Documentation for previous versions
In-Reply-To: <LO3P123MB35004E616563C3AFD164EB6B82890@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
References: <LO3P123MB35004E616563C3AFD164EB6B82890@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CAF028HX21R-KZEzEr80SFpHy9Yuoo+WXj_L8=zADU4C+ntkaHQ@mail.gmail.com>

Hi Jon,
Maybe the Wayback Machine can help? For example, this url gets you the GDAL
site from 2018 when 2.3 was new:
https://web.archive.org/web/20180723211153/http://gdal.org/index.html

Thomas

On Thu, Jun 4, 2020 at 3:00 AM Jon Morris <Jon.Morris at jbarisk.com> wrote:

> Hello all,
>
>
>
> I was wondering where we could find documentation for previous versions of
> GDAL? We are still using version 2.2.0 and there are occasions when we see
> a useful method in the docs only to find it is not available in our
> version. I presume the docs available at https://gdal.org/api/index.html
> are for the latest released version?
>
>
>
> I managed to install Doxygen and build docs for us to view locally, so we
> do actually have a C API reference for version 2.2.0 now, but I can't find
> where the Python docs are in the source. It would also be very useful to be
> able to see a different version of the docs at
> https://gdal.org/python/index.html.
>
>
>
> Thanks,
>
>
>
> Jon
>
>
>
> *Jon Morris*
>
> Software Developer
>
>
>
> *Skype*
>
>
>
> *COVID-19. During the current outbreak JBA remains open for business and
> we continue to deliver our services. However, we have adopted
> flexible/remote workingas required. I will be receiving and reading email
> as normal but I may not always be available on the office number.*
>
>
>
> [image: JBA COVID-19 statement]
> <https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
>
> *T* +44 (0) 1756 799919
> www.jbarisk.com
>
> [image: Visit our website] <http://www.jbarisk.com>
> <https://www.linkedin.com/in/jon-morris-a2897b4/> [image: Follow us on
> Twitter] <https://twitter.com/jbarisk>
>
> Our postal address and registered office is JBA Risk Management Limited,
> 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23
> 3FD.
>
> *Find out more about us here: www.jbarisk.com <http://www.jbarisk.com/>
> and **follow us on Twitter @JBARisk <http://twitter.com/JBARisk> and
> LinkedIn
> <https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>
> *
>
> The JBA Group supports the JBA Trust.
>
> All JBA Risk Management's email messages contain confidential information
> and are intended only for the individual(s) named. If you are not the named
> addressee you should not disseminate, distribute or copy this e-mail.
> Please notify the sender immediately by email if you have received this
> email by mistake and delete this email from your system.
>
>
> JBA Risk Management Limited is registered in England, company number
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North
> Yorkshire, BD23 3FD, Telephone: +441756799919
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
*The right coordinate system can turn an impossible problem into two really
hard problems. -- Charlie Pellerin*

Thomas Juntunen
GIS Specialist
Polar Geospatial Center
R280 Learning and Environmental Science
1954 Buford Ave
University of Minnesota
St. Paul, MN 55108
612-626-0505
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/c6fe19e3/attachment.html>

From cgodkin at gmail.com  Thu Jun  4 07:27:56 2020
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 4 Jun 2020 07:27:56 -0700
Subject: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
In-Reply-To: <3E94BBC2-E6DE-47E7-808F-99736901D951@gmail.com>
References: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>
 <3E94BBC2-E6DE-47E7-808F-99736901D951@gmail.com>
Message-ID: <CAE=8km=WiC=SRSS54v5gndMGXpbU9L8re=hN65z3BW8EnS08_Q@mail.gmail.com>

Hi Michael,

Thanks a lot for your reply.

I managed to come up with something sort of like that by using
gdal_translate to a WMS service description file and then using that.

But I don't see how to get elevations from there.  Have you figured that
out?  I know how to get imagery, but I'm interested in elevation values.

Thanks a lot,
carl


On Wed, Jun 3, 2020 at 5:42 PM <michael.smith.erdc at gmail.com> wrote:

> Carl,
>
> Try something like
>
> gdal_translate -f gtiff  "<GDAL_WMS><Service name=\"AGS\"><ServerUrl>
> https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer</ServerUrl><BBoxOrder>xyXY</BBoxOrder><SRS>3857</SRS></Service><DataWindow><UpperLeftX>-20037508.34</UpperLeftX><UpperLeftY>20037508.34</UpperLeftY><LowerRightX>20037508.34</LowerRightX><LowerRightY>-20037508.34</LowerRightY><SizeX>2500</SizeX><SizeY>2500</SizeY></DataWindow></GDAL_WMS>"
> test1.tif -projwin  ulx uly lrx lry -projwin_srs <srs of your window>
> -t_srs <srs you want for the output>
>
> If you want a different size than 2500x2500 just change that size
>
> Michael Smith
> US Army Corps
>
>
> On Jun 3, 2020, at 8:27 PM, Carl Godkin <cgodkin at gmail.com> wrote:
>
> ﻿
> Hi,
>
> I'm unable to figure out how to retrieve elevation data (grids) from the
> 3DEP program's endpoints.
>
> Starting here:
> https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer
>
>
> it would seem to be possible but I just cannot get anything back other
> than solid white images.   Most of the help from that page leads off to
> ArcGIS-land which I don't have or want to use.  And Googling for 3DEP leads
> only to more government sites that aren't helpful.
>
> If you have some experience with this (or a related public elevation data
> source), would you please send an example "gdal_translate" command line?
>
> I'd really like to figure out how to download terrain (as perhaps a
> GeoTIFF with floating point elevations) for an arbitrary CONUS lat/lon
> range.
>
> Thanks in advance for any help!
>
> carl
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/e4b9c709/attachment.html>

From michael.smith.erdc at gmail.com  Thu Jun  4 07:45:17 2020
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Thu, 04 Jun 2020 10:45:17 -0400
Subject: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
In-Reply-To: <CAE=8km=WiC=SRSS54v5gndMGXpbU9L8re=hN65z3BW8EnS08_Q@mail.gmail.com>
References: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>
 <3E94BBC2-E6DE-47E7-808F-99736901D951@gmail.com>
 <CAE=8km=WiC=SRSS54v5gndMGXpbU9L8re=hN65z3BW8EnS08_Q@mail.gmail.com>
Message-ID: <420EB5A4-87B5-44FF-BEE1-D674773153E4@gmail.com>

Looks like they don’t provide the data from that service just the extents. To get the data, they have the product view https://viewer.nationalmap.gov/basic/#productGroupSearch

 that links to files for download

 

Or you can access them directly via gdal with something like 

 

gdalinfo /vsizip//vsicurl/https://prd-tnm.s3.amazonaws.com/StagedProducts/Elevation/1/GridFloat/USGS_NED_1_n35w117_GridFloat.zip/usgs_ned_1_n35w117_gridfloat.flt

 

Mike

 

 

-- 

Michael Smith

US Army Corps of Engineers

Remote Sensing/GIS Center

 

 

From: Carl Godkin <cgodkin at gmail.com>
Date: Thursday, June 4, 2020 at 10:28 AM
To: <michael.smith.erdc at gmail.com>
Cc: <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex

 

Hi Michael,

 

Thanks a lot for your reply.

 

I managed to come up with something sort of like that by using gdal_translate to a WMS service description file and then using that. 

 

But I don't see how to get elevations from there.  Have you figured that out?  I know how to get imagery, but I'm interested in elevation values.

 

Thanks a lot,

carl

 

 

On Wed, Jun 3, 2020 at 5:42 PM <michael.smith.erdc at gmail.com> wrote:

Carl,

 

Try something like

 

gdal_translate -f gtiff  "<GDAL_WMS><Service name=\"AGS\"><ServerUrl>https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer</ServerUrl><BBoxOrder>xyXY</BBoxOrder><SRS>3857</SRS></Service><DataWindow><UpperLeftX>-20037508.34</UpperLeftX><UpperLeftY>20037508.34</UpperLeftY><LowerRightX>20037508.34</LowerRightX><LowerRightY>-20037508.34</LowerRightY><SizeX>2500</SizeX><SizeY>2500</SizeY></DataWindow></GDAL_WMS>" test1.tif -projwin  ulx uly lrx lry -projwin_srs <srs of your window> -t_srs <srs you want for the output>

 

If you want a different size than 2500x2500 just change that size

 

Michael Smith

US Army Corps

 




On Jun 3, 2020, at 8:27 PM, Carl Godkin <cgodkin at gmail.com> wrote:

﻿

Hi,

 

I'm unable to figure out how to retrieve elevation data (grids) from the 3DEP program's endpoints.

 

Starting here:  https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer  

 

it would seem to be possible but I just cannot get anything back other than solid white images.   Most of the help from that page leads off to ArcGIS-land which I don't have or want to use.  And Googling for 3DEP leads only to more government sites that aren't helpful.

 

If you have some experience with this (or a related public elevation data source), would you please send an example "gdal_translate" command line?

 

I'd really like to figure out how to download terrain (as perhaps a GeoTIFF with floating point elevations) for an arbitrary CONUS lat/lon range.

 

Thanks in advance for any help!

 

carl

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/109a927a/attachment-0001.html>

From cgodkin at gmail.com  Thu Jun  4 07:55:13 2020
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 4 Jun 2020 07:55:13 -0700
Subject: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
In-Reply-To: <420EB5A4-87B5-44FF-BEE1-D674773153E4@gmail.com>
References: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>
 <3E94BBC2-E6DE-47E7-808F-99736901D951@gmail.com>
 <CAE=8km=WiC=SRSS54v5gndMGXpbU9L8re=hN65z3BW8EnS08_Q@mail.gmail.com>
 <420EB5A4-87B5-44FF-BEE1-D674773153E4@gmail.com>
Message-ID: <CAE=8kmn11rUeTA76=_kvAa8mw-N3dWb-j8Y5mbvbn67PncDY4A@mail.gmail.com>

Hi Michael,

That seems perfect.  I'll experiment with that.

Thank you very much!

carl

On Thu, Jun 4, 2020 at 7:45 AM Michael Smith <michael.smith.erdc at gmail.com>
wrote:

> Looks like they don’t provide the data from that service just the extents.
> To get the data, they have the product view
> https://viewer.nationalmap.gov/basic/#productGroupSearch
>
> that links to files for download
>
>
>
> Or you can access them directly via gdal with something like
>
>
>
> gdalinfo /vsizip//vsicurl/
> https://prd-tnm.s3.amazonaws.com/StagedProducts/Elevation/1/GridFloat/USGS_NED_1_n35w117_GridFloat.zip/usgs_ned_1_n35w117_gridfloat.flt
>
>
>
> Mike
>
>
>
>
>
> --
>
> Michael Smith
>
> US Army Corps of Engineers
>
> Remote Sensing/GIS Center
>
>
>
>
>
> *From: *Carl Godkin <cgodkin at gmail.com>
> *Date: *Thursday, June 4, 2020 at 10:28 AM
> *To: *<michael.smith.erdc at gmail.com>
> *Cc: *<gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
>
>
>
> Hi Michael,
>
>
>
> Thanks a lot for your reply.
>
>
>
> I managed to come up with something sort of like that by using
> gdal_translate to a WMS service description file and then using that.
>
>
>
> But I don't see how to get elevations from there.  Have you figured that
> out?  I know how to get imagery, but I'm interested in elevation values.
>
>
>
> Thanks a lot,
>
> carl
>
>
>
>
>
> On Wed, Jun 3, 2020 at 5:42 PM <michael.smith.erdc at gmail.com> wrote:
>
> Carl,
>
>
>
> Try something like
>
>
>
> gdal_translate -f gtiff  "<GDAL_WMS><Service name=\"AGS\"><ServerUrl>
> https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer</ServerUrl><BBoxOrder>xyXY</BBoxOrder><SRS>3857</SRS></Service><DataWindow><UpperLeftX>-20037508.34</UpperLeftX><UpperLeftY>20037508.34</UpperLeftY><LowerRightX>20037508.34</LowerRightX><LowerRightY>-20037508.34</LowerRightY><SizeX>2500</SizeX><SizeY>2500</SizeY></DataWindow></GDAL_WMS>"
> test1.tif -projwin  ulx uly lrx lry -projwin_srs <srs of your window>
> -t_srs <srs you want for the output>
>
>
>
> If you want a different size than 2500x2500 just change that size
>
>
>
> Michael Smith
>
> US Army Corps
>
>
>
>
>
> On Jun 3, 2020, at 8:27 PM, Carl Godkin <cgodkin at gmail.com> wrote:
>
> ﻿
>
> Hi,
>
>
>
> I'm unable to figure out how to retrieve elevation data (grids) from the
> 3DEP program's endpoints.
>
>
>
> Starting here:
> https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer
>
>
>
>
> it would seem to be possible but I just cannot get anything back other
> than solid white images.   Most of the help from that page leads off to
> ArcGIS-land which I don't have or want to use.  And Googling for 3DEP leads
> only to more government sites that aren't helpful.
>
>
>
> If you have some experience with this (or a related public elevation data
> source), would you please send an example "gdal_translate" command line?
>
>
>
> I'd really like to figure out how to download terrain (as perhaps a
> GeoTIFF with floating point elevations) for an arbitrary CONUS lat/lon
> range.
>
>
>
> Thanks in advance for any help!
>
>
>
> carl
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/592ef694/attachment.html>

From cgodkin at gmail.com  Thu Jun  4 08:36:40 2020
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 4 Jun 2020 08:36:40 -0700
Subject: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
In-Reply-To: <CAE=8kmn11rUeTA76=_kvAa8mw-N3dWb-j8Y5mbvbn67PncDY4A@mail.gmail.com>
References: <CAE=8km=ohuhwhPGJ4FkfZMLw6pohzTOVkahFd0Xyu07xzd+b2Q@mail.gmail.com>
 <3E94BBC2-E6DE-47E7-808F-99736901D951@gmail.com>
 <CAE=8km=WiC=SRSS54v5gndMGXpbU9L8re=hN65z3BW8EnS08_Q@mail.gmail.com>
 <420EB5A4-87B5-44FF-BEE1-D674773153E4@gmail.com>
 <CAE=8kmn11rUeTA76=_kvAa8mw-N3dWb-j8Y5mbvbn67PncDY4A@mail.gmail.com>
Message-ID: <CAE=8kmkqGrksyKH_hup-W-hiFGuHfRKgOO9ig+-4kiMq6tdm5A@mail.gmail.com>

Hi again,

In case anyone else is interested, I followed one of the links that Michael
provided and found that I should be able to use WCS directly:

gdalinfo "WCS:
https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation
"

This returns one band of Float32 elevation data.  This is exactly what I
want! Thanks to both of you for the suggestions,

carl

On Thu, Jun 4, 2020 at 7:55 AM Carl Godkin <cgodkin at gmail.com> wrote:

> Hi Michael,
>
> That seems perfect.  I'll experiment with that.
>
> Thank you very much!
>
> carl
>
> On Thu, Jun 4, 2020 at 7:45 AM Michael Smith <michael.smith.erdc at gmail.com>
> wrote:
>
>> Looks like they don’t provide the data from that service just the
>> extents. To get the data, they have the product view
>> https://viewer.nationalmap.gov/basic/#productGroupSearch
>>
>> that links to files for download
>>
>>
>>
>> Or you can access them directly via gdal with something like
>>
>>
>>
>> gdalinfo /vsizip//vsicurl/
>> https://prd-tnm.s3.amazonaws.com/StagedProducts/Elevation/1/GridFloat/USGS_NED_1_n35w117_GridFloat.zip/usgs_ned_1_n35w117_gridfloat.flt
>>
>>
>>
>> Mike
>>
>>
>>
>>
>>
>> --
>>
>> Michael Smith
>>
>> US Army Corps of Engineers
>>
>> Remote Sensing/GIS Center
>>
>>
>>
>>
>>
>> *From: *Carl Godkin <cgodkin at gmail.com>
>> *Date: *Thursday, June 4, 2020 at 10:28 AM
>> *To: *<michael.smith.erdc at gmail.com>
>> *Cc: *<gdal-dev at lists.osgeo.org>
>> *Subject: *Re: [gdal-dev] Using GDAL WMS with USGS 3DEPElevationIndex
>>
>>
>>
>> Hi Michael,
>>
>>
>>
>> Thanks a lot for your reply.
>>
>>
>>
>> I managed to come up with something sort of like that by using
>> gdal_translate to a WMS service description file and then using that.
>>
>>
>>
>> But I don't see how to get elevations from there.  Have you figured that
>> out?  I know how to get imagery, but I'm interested in elevation values.
>>
>>
>>
>> Thanks a lot,
>>
>> carl
>>
>>
>>
>>
>>
>> On Wed, Jun 3, 2020 at 5:42 PM <michael.smith.erdc at gmail.com> wrote:
>>
>> Carl,
>>
>>
>>
>> Try something like
>>
>>
>>
>> gdal_translate -f gtiff  "<GDAL_WMS><Service name=\"AGS\"><ServerUrl>
>> https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer</ServerUrl><BBoxOrder>xyXY</BBoxOrder><SRS>3857</SRS></Service><DataWindow><UpperLeftX>-20037508.34</UpperLeftX><UpperLeftY>20037508.34</UpperLeftY><LowerRightX>20037508.34</LowerRightX><LowerRightY>-20037508.34</LowerRightY><SizeX>2500</SizeX><SizeY>2500</SizeY></DataWindow></GDAL_WMS>"
>> test1.tif -projwin  ulx uly lrx lry -projwin_srs <srs of your window>
>> -t_srs <srs you want for the output>
>>
>>
>>
>> If you want a different size than 2500x2500 just change that size
>>
>>
>>
>> Michael Smith
>>
>> US Army Corps
>>
>>
>>
>>
>>
>> On Jun 3, 2020, at 8:27 PM, Carl Godkin <cgodkin at gmail.com> wrote:
>>
>> ﻿
>>
>> Hi,
>>
>>
>>
>> I'm unable to figure out how to retrieve elevation data (grids) from the
>> 3DEP program's endpoints.
>>
>>
>>
>> Starting here:
>> https://index.nationalmap.gov/arcgis/rest/services/3DEPElevationIndex/MapServer
>>
>>
>>
>>
>> it would seem to be possible but I just cannot get anything back other
>> than solid white images.   Most of the help from that page leads off to
>> ArcGIS-land which I don't have or want to use.  And Googling for 3DEP leads
>> only to more government sites that aren't helpful.
>>
>>
>>
>> If you have some experience with this (or a related public elevation data
>> source), would you please send an example "gdal_translate" command line?
>>
>>
>>
>> I'd really like to figure out how to download terrain (as perhaps a
>> GeoTIFF with floating point elevations) for an arbitrary CONUS lat/lon
>> range.
>>
>>
>>
>> Thanks in advance for any help!
>>
>>
>>
>> carl
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200604/acabe543/attachment-0001.html>

From Jon.Morris at jbarisk.com  Fri Jun  5 00:48:01 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Fri, 5 Jun 2020 07:48:01 +0000
Subject: [gdal-dev] Documentation for previous versions
In-Reply-To: <CAF028HX21R-KZEzEr80SFpHy9Yuoo+WXj_L8=zADU4C+ntkaHQ@mail.gmail.com>
References: <LO3P123MB35004E616563C3AFD164EB6B82890@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
 <CAF028HX21R-KZEzEr80SFpHy9Yuoo+WXj_L8=zADU4C+ntkaHQ@mail.gmail.com>
Message-ID: <LO3P123MB3500DE7213D11360F9637CA982860@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>

Hi Thomas,

Looks like that is my best bet. Python docs are on there, so Wayback Machine saves the day again!

Thanks,

Jon

From: Thomas Juntunen <junt0015 at umn.edu>
Sent: 04 June 2020 15:12
To: Jon Morris <Jon.Morris at jbarisk.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Documentation for previous versions

Hi Jon,
Maybe the Wayback Machine can help? For example, this url gets you the GDAL site from 2018 when 2.3 was new:
https://web.archive.org/web/20180723211153/http://gdal.org/index.html<https://web.archive.org/web/20180723211153/http:/gdal.org/index.html>

Thomas

On Thu, Jun 4, 2020 at 3:00 AM Jon Morris <Jon.Morris at jbarisk.com<mailto:Jon.Morris at jbarisk.com>> wrote:
Hello all,

I was wondering where we could find documentation for previous versions of GDAL? We are still using version 2.2.0 and there are occasions when we see a useful method in the docs only to find it is not available in our version. I presume the docs available at https://gdal.org/api/index.html are for the latest released version?

I managed to install Doxygen and build docs for us to view locally, so we do actually have a C API reference for version 2.2.0 now, but I can't find where the Python docs are in the source. It would also be very useful to be able to see a different version of the docs at https://gdal.org/python/index.html.

Thanks,

Jon

Jon Morris
Software Developer

Skype

COVID-19. During the current outbreak JBA remains open for business and we continue to deliver our services. However, we have adopted flexible/remote workingas required. I will be receiving and reading email as normal but I may not always be available on the office number.


[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com/> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
The right coordinate system can turn an impossible problem into two really hard problems. -- Charlie Pellerin

Thomas Juntunen
GIS Specialist
Polar Geospatial Center
R280 Learning and Environmental Science
1954 Buford Ave
University of Minnesota
St. Paul, MN 55108
612-626-0505

[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200605/4d2a25b6/attachment-0001.html>

From haevitetty at gmail.com  Fri Jun  5 10:42:39 2020
From: haevitetty at gmail.com (Thomas Horner)
Date: Fri, 5 Jun 2020 11:42:39 -0600
Subject: [gdal-dev] new NBM grib2 files are not warpable
Message-ID: <CAOvtYK8EUH167wgzLW+i8wG+VFBW-8mwNMD4jEnW6XC2xZRPQA@mail.gmail.com>

Hello list,

The US National Weather Service recently released version 3.2 of their NBM
weather model blend. I have not been able to successfully to use gdalwarp
or gdal_translate on these GRIB2 files. For gdal_translate, I get an
"Error: Out of memory" error, even though it's only 80mb and I have 16gb of
RAM.

This is what happens when using gdalwarp to warp to EPSG:4326:

-------
> thomas at eolus:~/model_processing/tempWxData$ gdalwarp
nbm_20200605_16Z_t001.grib2 nbm.tif -t_srs EPSG:4326 -multi

Processing nbm_20200605_16Z_t001.grib2 [1/1] : 0Using internal nodata
values (e.g. 9999) for image nbm_20200605_16Z_t001.grib2.

ERROR 1: Too many points (529 out of 529) failed to transform, unable to
compute output bounds.
Warning 1: Unable to compute source region for output window 0,0,2345,1597,
skipping.
--------

gdalinfo reveals the following information about the CRS:

-------
Driver: GRIB/GRIdded Binary (.grb, .grb2)
Files: nbm_20200605_16Z_t001.grib2
Size is 2345, 1597
Coordinate System is:
PROJCRS["unnamed",
    BASEGEOGCRS["Coordinate System imported from GRIB file",
        DATUM["unnamed",
            ELLIPSOID["Sphere",6371200,0,
                LENGTHUNIT["metre",1,
                    ID["EPSG",9001]]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433,
                ID["EPSG",9122]]]],
    CONVERSION["unnamed",
        METHOD["Lambert Conic Conformal (2SP)",
            ID["EPSG",9802]],
        PARAMETER["Latitude of false origin",25,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8821]],
        PARAMETER["Longitude of false origin",265,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8822]],
        PARAMETER["Latitude of 1st standard parallel",25,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8823]],
        PARAMETER["Latitude of 2nd standard parallel",25,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8824]],
        PARAMETER["Easting at false origin",0,
            LENGTHUNIT["Metre",1],
            ID["EPSG",8826]],
        PARAMETER["Northing at false origin",0,
            LENGTHUNIT["Metre",1],
            ID["EPSG",8827]]],
    CS[Cartesian,2],
        AXIS["easting",east,
            ORDER[1],
            LENGTHUNIT["Metre",1]],
        AXIS["northing",north,
            ORDER[2],
            LENGTHUNIT["Metre",1]]]
Data axis to CRS axis mapping: 1,2
Origin = (-3272421.457337170839310,3790842.106035435572267)
Pixel Size = (2539.702999999999975,-2539.702999999999975)
Corner Coordinates:
Upper Left  (-3272421.457, 3790842.106) (138d23'39.07"W, 53d 3'24.76"N)
Lower Left  (-3272421.457, -265063.585) (126d17' 8.03"W, 19d12'55.22"N)
Upper Right ( 2683182.078, 3790842.106) ( 59d 1'17.54"W, 54d22'46.84"N)
Lower Right ( 2683182.078, -265063.585) ( 69d11'54.98"W, 20d19' 6.30"N)
Center      ( -294619.690, 1762889.261) ( 98d21'20.81"W, 40d37' 0.08"N)
-------

If you want a file to test with, download from here:
https://nomads.ncep.noaa.gov/pub/data/nccf/com/blend/prod/blend.20200605/16/grib2/blend.t16z.master.f001.co.grib2

That file will be removed after a couple days though.

I don't know the details of coordinate transformation, so I have no idea
how to solve this problem. Can anyone help?

Thanks,
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200605/97641560/attachment.html>

From haevitetty at gmail.com  Fri Jun  5 12:43:51 2020
From: haevitetty at gmail.com (Thomas Horner)
Date: Fri, 5 Jun 2020 13:43:51 -0600
Subject: [gdal-dev] new NBM grib2 files are not warpable
In-Reply-To: <CAOvtYK8EUH167wgzLW+i8wG+VFBW-8mwNMD4jEnW6XC2xZRPQA@mail.gmail.com>
References: <CAOvtYK8EUH167wgzLW+i8wG+VFBW-8mwNMD4jEnW6XC2xZRPQA@mail.gmail.com>
Message-ID: <CAOvtYK9ZOQjkWxx+5GaveW=n539M6O8oQUaf2Factd9NfKaQew@mail.gmail.com>

Hello,

A follow up with some more information. According to Zachary Flamig, there
are no issues in GDAL 2.2.0. I encountered these issues in 3.0.4. In 3.1.0,
the warp works correctly, but gdal_translate still fails with an out of
memory issue. It creates a TIF of 1.8gb before it errors out.

Thomas

On Fri, Jun 5, 2020 at 11:42 AM Thomas Horner <haevitetty at gmail.com> wrote:

> Hello list,
>
> The US National Weather Service recently released version 3.2 of their NBM
> weather model blend. I have not been able to successfully to use gdalwarp
> or gdal_translate on these GRIB2 files. For gdal_translate, I get an
> "Error: Out of memory" error, even though it's only 80mb and I have 16gb of
> RAM.
>
> This is what happens when using gdalwarp to warp to EPSG:4326:
>
> -------
> > thomas at eolus:~/model_processing/tempWxData$ gdalwarp
> nbm_20200605_16Z_t001.grib2 nbm.tif -t_srs EPSG:4326 -multi
>
> Processing nbm_20200605_16Z_t001.grib2 [1/1] : 0Using internal nodata
> values (e.g. 9999) for image nbm_20200605_16Z_t001.grib2.
>
> ERROR 1: Too many points (529 out of 529) failed to transform, unable to
> compute output bounds.
> Warning 1: Unable to compute source region for output window
> 0,0,2345,1597, skipping.
> --------
>
> gdalinfo reveals the following information about the CRS:
>
> -------
> Driver: GRIB/GRIdded Binary (.grb, .grb2)
> Files: nbm_20200605_16Z_t001.grib2
> Size is 2345, 1597
> Coordinate System is:
> PROJCRS["unnamed",
>     BASEGEOGCRS["Coordinate System imported from GRIB file",
>         DATUM["unnamed",
>             ELLIPSOID["Sphere",6371200,0,
>                 LENGTHUNIT["metre",1,
>                     ID["EPSG",9001]]]],
>         PRIMEM["Greenwich",0,
>             ANGLEUNIT["degree",0.0174532925199433,
>                 ID["EPSG",9122]]]],
>     CONVERSION["unnamed",
>         METHOD["Lambert Conic Conformal (2SP)",
>             ID["EPSG",9802]],
>         PARAMETER["Latitude of false origin",25,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8821]],
>         PARAMETER["Longitude of false origin",265,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8822]],
>         PARAMETER["Latitude of 1st standard parallel",25,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8823]],
>         PARAMETER["Latitude of 2nd standard parallel",25,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8824]],
>         PARAMETER["Easting at false origin",0,
>             LENGTHUNIT["Metre",1],
>             ID["EPSG",8826]],
>         PARAMETER["Northing at false origin",0,
>             LENGTHUNIT["Metre",1],
>             ID["EPSG",8827]]],
>     CS[Cartesian,2],
>         AXIS["easting",east,
>             ORDER[1],
>             LENGTHUNIT["Metre",1]],
>         AXIS["northing",north,
>             ORDER[2],
>             LENGTHUNIT["Metre",1]]]
> Data axis to CRS axis mapping: 1,2
> Origin = (-3272421.457337170839310,3790842.106035435572267)
> Pixel Size = (2539.702999999999975,-2539.702999999999975)
> Corner Coordinates:
> Upper Left  (-3272421.457, 3790842.106) (138d23'39.07"W, 53d 3'24.76"N)
> Lower Left  (-3272421.457, -265063.585) (126d17' 8.03"W, 19d12'55.22"N)
> Upper Right ( 2683182.078, 3790842.106) ( 59d 1'17.54"W, 54d22'46.84"N)
> Lower Right ( 2683182.078, -265063.585) ( 69d11'54.98"W, 20d19' 6.30"N)
> Center      ( -294619.690, 1762889.261) ( 98d21'20.81"W, 40d37' 0.08"N)
> -------
>
> If you want a file to test with, download from here:
>
> https://nomads.ncep.noaa.gov/pub/data/nccf/com/blend/prod/blend.20200605/16/grib2/blend.t16z.master.f001.co.grib2
>
> That file will be removed after a couple days though.
>
> I don't know the details of coordinate transformation, so I have no idea
> how to solve this problem. Can anyone help?
>
> Thanks,
> Thomas
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200605/ba3860dd/attachment.html>

From even.rouault at spatialys.com  Fri Jun  5 13:26:21 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Jun 2020 22:26:21 +0200
Subject: [gdal-dev] new NBM grib2 files are not warpable
In-Reply-To: <CAOvtYK9ZOQjkWxx+5GaveW=n539M6O8oQUaf2Factd9NfKaQew@mail.gmail.com>
References: <CAOvtYK8EUH167wgzLW+i8wG+VFBW-8mwNMD4jEnW6XC2xZRPQA@mail.gmail.com>
 <CAOvtYK9ZOQjkWxx+5GaveW=n539M6O8oQUaf2Factd9NfKaQew@mail.gmail.com>
Message-ID: <2459665.zucydo0X1D@even-i700>

Thomas,

> A follow up with some more information. According to Zachary Flamig, there
> are no issues in GDAL 2.2.0. I encountered these issues in 3.0.4.

I've just pushed a fix for that regression. was an added security check that was incorrectly 
triggered when reading band 23.

> In 3.1.0,
> the warp works correctly, but gdal_translate still fails with an out of
> memory issue.

Hum, are you really sure about that.. ? if gdal_translate cannot work, I can't see how gdalwarp 
could (if you use -overwrite to make sure creating a new file, and not updating something 
potentially unrelated)

I get now gdal_translate and gdalwarp to work, but due to how GRIB decompression works, 
for performant operation, I strongly suggest to first gdal_translate to a band interleaved 
GeoTIFF file, and then gdalwarp it:

gdal_translate blend.t16z.master.f001.co.grib2 tmp.tif \
   -co tiled=yes -co compress=zstd -co interleave=band
gdalwarp tmp.tif out.tif -t_srs EPSG:4326 -overwrite -co tiled=yes

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200605/013b553f/attachment.html>

From even.rouault at spatialys.com  Fri Jun  5 14:26:46 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Jun 2020 23:26:46 +0200
Subject: [gdal-dev] bug in gdaldem color-relief?
In-Reply-To: <CAEDrt3-OrSD1Lsx-gfXgczfby03mq8PoAs-sBnYrkNXPxjfoFA@mail.gmail.com>
References: <CAEDrt3-OrSD1Lsx-gfXgczfby03mq8PoAs-sBnYrkNXPxjfoFA@mail.gmail.com>
Message-ID: <3231795.xdpyMMoyDB@even-i700>

> Should I open a bug report or am I missing something here?

Was indeed a bug. Just fixed

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200605/f2b1e93a/attachment.html>

From haevitetty at gmail.com  Fri Jun  5 15:27:15 2020
From: haevitetty at gmail.com (Thomas Horner)
Date: Fri, 5 Jun 2020 16:27:15 -0600
Subject: [gdal-dev] new NBM grib2 files are not warpable
In-Reply-To: <2459665.zucydo0X1D@even-i700>
References: <CAOvtYK8EUH167wgzLW+i8wG+VFBW-8mwNMD4jEnW6XC2xZRPQA@mail.gmail.com>
 <CAOvtYK9ZOQjkWxx+5GaveW=n539M6O8oQUaf2Factd9NfKaQew@mail.gmail.com>
 <2459665.zucydo0X1D@even-i700>
Message-ID: <CAOvtYK_r1oKN061mMskU1aSA3Tnd=DP=sJYXLrSPtsrcTW-kSA@mail.gmail.com>

Even,

Thank you for your work and diligence. Perhaps what I meant by the warp
"working" was that in 3.1.0 it is no longer throwing an error about being
able to compute the bounds.

I can confirm that NWS's NBM v3.2 grib2 files are now translating to TIF
successfully when I try using the latest docker images in the repo.
Translating to TIF and then warping to 4326 looks correct when opening in
QGIS. Thanks for the tip about band interleaving too.

Thomas

On Fri, Jun 5, 2020 at 2:26 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Thomas,
>
>
>
> > A follow up with some more information. According to Zachary Flamig,
> there
>
> > are no issues in GDAL 2.2.0. I encountered these issues in 3.0.4.
>
>
>
> I've just pushed a fix for that regression. was an added security check
> that was incorrectly triggered when reading band 23.
>
>
>
> > In 3.1.0,
>
> > the warp works correctly, but gdal_translate still fails with an out of
>
> > memory issue.
>
>
>
> Hum, are you really sure about that.. ? if gdal_translate cannot work, I
> can't see how gdalwarp could (if you use -overwrite to make sure creating a
> new file, and not updating something potentially unrelated)
>
>
>
> I get now gdal_translate and gdalwarp to work, but due to how GRIB
> decompression works, for performant operation, I strongly suggest to first
> gdal_translate to a band interleaved GeoTIFF file, and then gdalwarp it:
>
>
>
> gdal_translate blend.t16z.master.f001.co.grib2 tmp.tif \
>
> -co tiled=yes -co compress=zstd -co interleave=band
>
> gdalwarp tmp.tif out.tif -t_srs EPSG:4326 -overwrite -co tiled=yes
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200605/54f951e4/attachment-0001.html>

From idan at miara.com  Fri Jun  5 22:09:26 2020
From: idan at miara.com (Idan Miara)
Date: Sat, 6 Jun 2020 08:09:26 +0300
Subject: [gdal-dev] bug in gdaldem color-relief?
In-Reply-To: <3231795.xdpyMMoyDB@even-i700>
References: <CAEDrt3-OrSD1Lsx-gfXgczfby03mq8PoAs-sBnYrkNXPxjfoFA@mail.gmail.com>
 <3231795.xdpyMMoyDB@even-i700>
Message-ID: <CAEDrt3-D_GFf8TQQcKv8wQnqYqdaAwWpD0Y6HfY0T--oJkmqeQ@mail.gmail.com>

Got it,

https://github.com/OSGeo/gdal/commit/5eb8fa57c7730ae09b6ef0c7840c26283d84db0e

Thanks!!!
Idan

On Sat, 6 Jun 2020, 00:26 Even Rouault, <even.rouault at spatialys.com> wrote:

> > Should I open a bug report or am I missing something here?
>
>
>
> Was indeed a bug. Just fixed
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200606/18e0de87/attachment.html>

From Jon.Morris at jbarisk.com  Mon Jun  8 01:25:20 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Mon, 8 Jun 2020 08:25:20 +0000
Subject: [gdal-dev] Segmentation fault on BuildOverviews
Message-ID: <LO3P123MB3500531097F906365EBFE45E82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>

Hello all,

I think I've found an edge case in gdal.Dataset.BuildOverviews. I'm using GDAL 3.0.4 and have found that some of our BuildOverviews tests were crashing out with a seg fault. On investigation, it seems to be when COMPRESS_OVERVIEW is set to LZW, the height is greater than the width, and the overview list is long enough that we will end up with some 1x1 overviews. Here is a code snippet that reproduces the crash.

from osgeo import gdal

gdal.SetConfigOption('COMPRESS_OVERVIEW', 'LZW')

temp_path = '/tmp/test.tif'
drv = gdal.GetDriverByName('GTiff')
raster_ds = drv.Create(temp_path, 5, 6, 1, gdal.GDT_Int16)
del raster_ds

tif = gdal.OpenEx(temp_path, gdal.GA_ReadOnly)
tif.BuildOverviews('nearest', overviewlist=[2, 4, 8])



The data type doesn't seem to matter (I've also tried Float32), but it seems that the raster dimensions are important. I couldn't get it to fail if the width was equal to or greater than the height.

Thanks,

Jon

Jon Morris
Software Developer

Skype<sip:jon.morris at jbarisk.com>

COVID-19. During the current outbreak JBA remains open for business and we continue to deliver our services. However, we have adopted flexible/remote workingas required. I will be receiving and reading email as normal but I may not always be available on the office number.


[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200608/50e622cd/attachment.html>

From even.rouault at spatialys.com  Mon Jun  8 02:41:29 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 08 Jun 2020 11:41:29 +0200
Subject: [gdal-dev] Segmentation fault on BuildOverviews
In-Reply-To: <LO3P123MB3500531097F906365EBFE45E82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
References: <LO3P123MB3500531097F906365EBFE45E82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <1894091.jfa8pgIrdA@even-i700>

Jon,

thanks for the report. I've just pushed a fix for that

Even

> Hello all,
> 
> I think I've found an edge case in gdal.Dataset.BuildOverviews. I'm using
> GDAL 3.0.4 and have found that some of our BuildOverviews tests were
> crashing out with a seg fault. On investigation, it seems to be when
> COMPRESS_OVERVIEW is set to LZW, the height is greater than the width, and
> the overview list is long enough that we will end up with some 1x1
> overviews. Here is a code snippet that reproduces the crash.
> 
> from osgeo import gdal
> 
> gdal.SetConfigOption('COMPRESS_OVERVIEW', 'LZW')
> 
> temp_path = '/tmp/test.tif'
> drv = gdal.GetDriverByName('GTiff')
> raster_ds = drv.Create(temp_path, 5, 6, 1, gdal.GDT_Int16)
> del raster_ds
> 
> tif = gdal.OpenEx(temp_path, gdal.GA_ReadOnly)
> tif.BuildOverviews('nearest', overviewlist=[2, 4, 8])
> 
> 
> 
> The data type doesn't seem to matter (I've also tried Float32), but it seems
> that the raster dimensions are important. I couldn't get it to fail if the
> width was equal to or greater than the height.
> 
> Thanks,
> 
> Jon
> 
> Jon Morris
> Software Developer
> 
> Skype<sip:jon.morris at jbarisk.com>
> 
> COVID-19. During the current outbreak JBA remains open for business and we
> continue to deliver our services. However, we have adopted flexible/remote
> workingas required. I will be receiving and reading email as normal but I
> may not always be available on the office number.
> 
> 
> [JBA COVID-19
> statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/docume
> nts/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
> 
> T +44 (0) 1756 799919
> www.jbarisk.com<http://www.jbarisk.com>
> 
> [Visit our website]<http://www.jbarisk.com>
> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]
> <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter]
> <https://twitter.com/jbarisk> Our postal address and registered office is
> JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton,
> Skipton, North Yorkshire BD23 3FD.
> 
> Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and
> follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and
> LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedV
> ertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A144741
> 4259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>
> 
> The JBA Group supports the JBA Trust.
> 
> All JBA Risk Management's email messages contain confidential information
> and are intended only for the individual(s) named. If you are not the named
> addressee you should not disseminate, distribute or copy this e-mail.
> Please notify the sender immediately by email if you have received this
> email by mistake and delete this email from your system.
> 
> 
> JBA Risk Management Limited is registered in England, company number
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North
> Yorkshire, BD23 3FD, Telephone: +441756799919


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200608/301e4be6/attachment-0001.html>

From Jon.Morris at jbarisk.com  Mon Jun  8 02:59:37 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Mon, 8 Jun 2020 09:59:37 +0000
Subject: [gdal-dev] Segmentation fault on BuildOverviews
In-Reply-To: <1894091.jfa8pgIrdA@even-i700>
References: <LO3P123MB3500531097F906365EBFE45E82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
 <1894091.jfa8pgIrdA@even-i700>
Message-ID: <LO3P123MB350042169BEC0C8B66FDE57C82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>

Thanks for the quick fix Even! I'm also getting a warning that I can't find any reference to in the code. We don't get this at 2.2.0, so do you know what version dropped support for this option?

Warning 6: driver GTiff does not support creation option GDAL_CACHEMAX

Jon

From: Even Rouault <even.rouault at spatialys.com>
Sent: 08 June 2020 10:41
To: gdal-dev at lists.osgeo.org
Cc: Jon Morris <Jon.Morris at jbarisk.com>
Subject: Re: [gdal-dev] Segmentation fault on BuildOverviews


Jon,



thanks for the report. I've just pushed a fix for that



Even



> Hello all,

>

> I think I've found an edge case in gdal.Dataset.BuildOverviews. I'm using

> GDAL 3.0.4 and have found that some of our BuildOverviews tests were

> crashing out with a seg fault. On investigation, it seems to be when

> COMPRESS_OVERVIEW is set to LZW, the height is greater than the width, and

> the overview list is long enough that we will end up with some 1x1

> overviews. Here is a code snippet that reproduces the crash.

>

> from osgeo import gdal

>

> gdal.SetConfigOption('COMPRESS_OVERVIEW', 'LZW')

>

> temp_path = '/tmp/test.tif'

> drv = gdal.GetDriverByName('GTiff')

> raster_ds = drv.Create(temp_path, 5, 6, 1, gdal.GDT_Int16)

> del raster_ds

>

> tif = gdal.OpenEx(temp_path, gdal.GA_ReadOnly)

> tif.BuildOverviews('nearest', overviewlist=[2, 4, 8])

>

>

>

> The data type doesn't seem to matter (I've also tried Float32), but it seems

> that the raster dimensions are important. I couldn't get it to fail if the

> width was equal to or greater than the height.

>

> Thanks,

>

> Jon

>

> Jon Morris

> Software Developer

>

> Skype<sip:jon.morris at jbarisk.com>

>

> COVID-19. During the current outbreak JBA remains open for business and we

> continue to deliver our services. However, we have adopted flexible/remote

> workingas required. I will be receiving and reading email as normal but I

> may not always be available on the office number.

>

>

> [JBA COVID-19

> statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/docume

> nts/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

>

> T +44 (0) 1756 799919

> www.jbarisk.com<http://www.jbarisk.com<http://www.jbarisk.com%3chttp:/www.jbarisk.com>>

>

> [Visit our website]<http://www.jbarisk.com>

> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]

> <https://www.linkedin.com/in/jon-morris-a2897b4/> [Follow us on Twitter]

> <https://twitter.com/jbarisk> Our postal address and registered office is

> JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton,

> Skipton, North Yorkshire BD23 3FD.

>

> Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/<http://www.jbarisk.com%3chttp:/www.jbarisk.com/>> and

> follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and

> LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedV

> ertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A144741

> 4259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

>

> The JBA Group supports the JBA Trust.

>

> All JBA Risk Management's email messages contain confidential information

> and are intended only for the individual(s) named. If you are not the named

> addressee you should not disseminate, distribute or copy this e-mail.

> Please notify the sender immediately by email if you have received this

> email by mistake and delete this email from your system.

>

>

> JBA Risk Management Limited is registered in England, company number

> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North

> Yorkshire, BD23 3FD, Telephone: +441756799919





--

Spatialys - Geospatial professional services

http://www.spatialys.com

[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200608/3f64e630/attachment-0001.html>

From Daniel.Evans at jbarisk.com  Mon Jun  8 03:04:27 2020
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Mon, 8 Jun 2020 10:04:27 +0000
Subject: [gdal-dev] Segmentation fault on BuildOverviews
In-Reply-To: <LO3P123MB350042169BEC0C8B66FDE57C82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
References: <LO3P123MB3500531097F906365EBFE45E82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
 <1894091.jfa8pgIrdA@even-i700>
 <LO3P123MB350042169BEC0C8B66FDE57C82850@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CWLP123MB29467A8BE63B8ADA852EFEE095850@CWLP123MB2946.GBRP123.PROD.OUTLOOK.COM>

Hi Jon,

That'll be some bit of code passing that in as a creation option (-co) incorrectly - the warning is quite correct that GDAL_CACHEMAX is not a valid creation option for file formats. You'd either need to set an environment variable, or call `gdal.SetConfigOption`.

I've spotted a few similar examples before - usually typos that went unnoticed for a long time, but a few cases like this.

Dr Daniel Evans
Software Developer

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jon Morris
Sent: 08 June 2020 11:00
To: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Segmentation fault on BuildOverviews

Thanks for the quick fix Even! I'm also getting a warning that I can't find any reference to in the code. We don't get this at 2.2.0, so do you know what version dropped support for this option?

Warning 6: driver GTiff does not support creation option GDAL_CACHEMAX

Jon

From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: 08 June 2020 10:41
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Cc: Jon Morris <Jon.Morris at jbarisk.com<mailto:Jon.Morris at jbarisk.com>>
Subject: Re: [gdal-dev] Segmentation fault on BuildOverviews


Jon,



thanks for the report. I've just pushed a fix for that



Even



> Hello all,

>

> I think I've found an edge case in gdal.Dataset.BuildOverviews. I'm using

> GDAL 3.0.4 and have found that some of our BuildOverviews tests were

> crashing out with a seg fault. On investigation, it seems to be when

> COMPRESS_OVERVIEW is set to LZW, the height is greater than the width, and

> the overview list is long enough that we will end up with some 1x1

> overviews. Here is a code snippet that reproduces the crash.

>

> from osgeo import gdal

>

> gdal.SetConfigOption('COMPRESS_OVERVIEW', 'LZW')

>

> temp_path = '/tmp/test.tif'

> drv = gdal.GetDriverByName('GTiff')

> raster_ds = drv.Create(temp_path, 5, 6, 1, gdal.GDT_Int16)

> del raster_ds

>

> tif = gdal.OpenEx(temp_path, gdal.GA_ReadOnly)

> tif.BuildOverviews('nearest', overviewlist=[2, 4, 8])

>

>

>

> The data type doesn't seem to matter (I've also tried Float32), but it seems

> that the raster dimensions are important. I couldn't get it to fail if the

> width was equal to or greater than the height.

>

> Thanks,

>

> Jon

>

> Jon Morris

> Software Developer

>

> Skype<sip:jon.morris at jbarisk.com>

>

> COVID-19. During the current outbreak JBA remains open for business and we

> continue to deliver our services. However, we have adopted flexible/remote

> workingas required. I will be receiving and reading email as normal but I

> may not always be available on the office number.

>

>

> [JBA COVID-19

> statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/docume

> nts/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

>

> T +44 (0) 1756 799919

> www.jbarisk.com<http://www.jbarisk.com<http://www.jbarisk.com%3chttp:/www.jbarisk.com>>

>

> [Visit our website]<http://www.jbarisk.com>

> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]

> <https://www.linkedin.com/in/jon-morris-a2897b4/> [Follow us on Twitter]

> <https://twitter.com/jbarisk> Our postal address and registered office is

> JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton,

> Skipton, North Yorkshire BD23 3FD.

>

> Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/<http://www.jbarisk.com%3chttp:/www.jbarisk.com/>> and

> follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and

> LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedV

> ertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A144741

> 4259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

>

> The JBA Group supports the JBA Trust.

>

> All JBA Risk Management's email messages contain confidential information

> and are intended only for the individual(s) named. If you are not the named

> addressee you should not disseminate, distribute or copy this e-mail.

> Please notify the sender immediately by email if you have received this

> email by mistake and delete this email from your system.

>

>

> JBA Risk Management Limited is registered in England, company number

> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North

> Yorkshire, BD23 3FD, Telephone: +441756799919





--

Spatialys - Geospatial professional services

http://www.spatialys.com

[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200608/7a328e31/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Mon Jun  8 07:21:21 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 8 Jun 2020 11:21:21 -0300
Subject: [gdal-dev] [Docs] Sphinx 3.1.0 + GDAL docs
Message-ID: <727c6b58-78e9-c67d-ee10-4b859caa5225@gatewaygeomatics.com>

Hello fellow GDAL docs contributors, this really isn't worthy for a GDAL 
ticket, so I'm just sharing here on the mailing list: keep an eye open 
for the python 'breathe' package currently not allowing to build with 
Sphinx 3.1.0, which was released today (GDAL docs require breathe + 
sphinx).  You can follow along at 
https://github.com/michaeljones/breathe/issues/541

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/






From Mark.Millman at Woolpert.com  Mon Jun  8 11:08:39 2020
From: Mark.Millman at Woolpert.com (Millman, Mark)
Date: Mon, 8 Jun 2020 18:08:39 +0000
Subject: [gdal-dev] =?utf-8?q?Building_with_recent_versions_of_Visual_Stud?=
 =?utf-8?q?io_2019_fails_due_to_cstdint_problems_C2039_C2873_=EE=A5=86?=
Message-ID: <MW3PR17MB4153A263B83354AE52C99649E0860@MW3PR17MB4153.namprd17.prod.outlook.com>

I've been building GDAL for the last 8 years or so for almost every new release.  And I successfully built version 2.4.1 with Visual Studio 2019 when it first came out.  However, I am no longer able to build V2.4.1 or V3.0.4 or V3.1.0 with the latest releases of Visual Studio 2019.  I get error C2039 and C2873 indicating a conflict with cstdint and the global namespace.  I've installed fresh copies of Visual Studio and replicated the issue on three different machines.  I have tried adding both /std:c++14 and /std:c++17 switches to OPTFLAGS but I get the same results.

Has anyone else successfully built GDAL with VS 2019 (V16.5.4 or higher)?  Can anyone offer any suggestions?

Thank you -- Mark Millman

Example output from
"C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\VC\Auxiliary\Build\vcvarsall" x64
nmake -f makefile.vc MSVC_VER=1920 WIN64=1 WITH_PDB=1 DLLBUILD=1

        cl  /Zi /Fd..\gdal204.pdb /nologo /MP /MD /EHsc /Ox /FC /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG /std:c++17 /W4 /wd4127 /wd4251 /wd4275 /wd4786 /wd4100 /wd4245 /wd4206 /wd4351 /wd4611  /DHAVE_SSE_AT_COMPILE_TIME /DHAVE_SSSE3_AT_COMPILE_TIME -I..\port -I..\ogr -I..\gcore  -I..\alg -I..\ogr\ogrsf_frmts  -I..\gnm -I..\gnm\gnm_frmts -I..\apps /DHAVE_AVX_AT_COMPILE_TIME -I../frmts/vrt -I../ogr/ogrsf_frmts -IC:\OpenSource\gdal-2.4.1\geos/capi -IC:\OpenSource\gdal-2.4.1\geos\include -DHAVE_GEOS -DPROJ_STATIC -DPROJ_VERSION=5 -IC:\Programs\OSGeo4W64\include -Imarching_squares -DINTERNAL_QHULL  -DGNM_ENABLED  -DGDAL_COMPILATION -DNOMINMAX  /c gdalgridsse.cpp
gdalgridsse.cpp
C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\VC\Tools\MSVC\14.25.28610\include\cstdint(22): error C2039: 'int8_t': is not a member of '`global namespace''
C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\VC\Tools\MSVC\14.25.28610\include\cstdint(22): error C2873: 'int8_t': symbol cannot be used in a using-declaration
C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\VC\Tools\MSVC\14.25.28610\include\cstdint(23): error C2039: 'int16_t': is not a member of '`global namespace''
C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\VC\Tools\MSVC\14.25.28610\include\cstdint(23): error C2873: 'int16_t': symbol cannot be used in a using-declaration
C:\Program Files (x86)\Microsoft Visual Studio\2019\Professional\VC\Tools\MSVC\14.25.28610\include\cstdint(24): error C2039: 'int32_t': is not a member of '`global namespace''



Mark Millman
Woolpert Inc -- Geospatial
702-799-9968
mark.millman at woolpert.com<mailto:mark.millman at woolpert.com>
Anacortes, WA



WARNING - The information contained in this communication may contain technical data whose export is restricted by the Arms Export Control Act (Title 22, U.S.C., Sec 2751, et seq.) or the Export Administration Act of 1979, as amended (Title 50, U.S.C., App. 2401 et seq.). Violations of these export laws are subject to severe criminal penalties. If you have received this communication in error, please return it to the sender immediately and delete the original message and any copy of it from your computer system. If you have any questions concerning this message, please contact the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200608/1fa32246/attachment.html>

From howard at hobu.co  Mon Jun  8 11:53:44 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 8 Jun 2020 13:53:44 -0500
Subject: [gdal-dev] Documentation for previous versions
In-Reply-To: <LO3P123MB3500DE7213D11360F9637CA982860@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
References: <LO3P123MB35004E616563C3AFD164EB6B82890@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
 <CAF028HX21R-KZEzEr80SFpHy9Yuoo+WXj_L8=zADU4C+ntkaHQ@mail.gmail.com>
 <LO3P123MB3500DE7213D11360F9637CA982860@LO3P123MB3500.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <B525857B-477A-4DD2-A965-C3FF5819C03A@hobu.co>

Jon,

The way to get point-in-time docs for GDAL is to check out the last release branch for the version you care about and run doxygen or sphinx (3.0+) to build the HTML site.

Other than that, Sphinx does support multi-version tagging, but it would be a lot of work to retroactively apply tagging to the docs. A patch that did so would be welcomed.

Howard


> On Jun 5, 2020, at 2:48 AM, Jon Morris <Jon.Morris at jbarisk.com> wrote:
> 
> Hi Thomas,
>  
> Looks like that is my best bet. Python docs are on there, so Wayback Machine saves the day again!
>  
> Thanks,
>  
> Jon
>  
> From: Thomas Juntunen <junt0015 at umn.edu <mailto:junt0015 at umn.edu>> 
> Sent: 04 June 2020 15:12
> To: Jon Morris <Jon.Morris at jbarisk.com <mailto:Jon.Morris at jbarisk.com>>
> Cc: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] Documentation for previous versions
>  
> Hi Jon,
> Maybe the Wayback Machine can help? For example, this url gets you the GDAL site from 2018 when 2.3 was new:
> https://web.archive.org/web/20180723211153/http://gdal.org/index.html <https://web.archive.org/web/20180723211153/http:/gdal.org/index.html>
>  
> Thomas
>  
> On Thu, Jun 4, 2020 at 3:00 AM Jon Morris <Jon.Morris at jbarisk.com <mailto:Jon.Morris at jbarisk.com>> wrote:
> Hello all,
>  
> I was wondering where we could find documentation for previous versions of GDAL? We are still using version 2.2.0 and there are occasions when we see a useful method in the docs only to find it is not available in our version. I presume the docs available at https://gdal.org/api/index.html <https://gdal.org/api/index.html> are for the latest released version?
>  
> I managed to install Doxygen and build docs for us to view locally, so we do actually have a C API reference for version 2.2.0 now, but I can't find where the Python docs are in the source. It would also be very useful to be able to see a different version of the docs at https://gdal.org/python/index.html <https://gdal.org/python/index.html>.
>  
> Thanks,
>  
> Jon
>  
> Jon Morris
> Software Developer
>  
> Skype
>  
> COVID-19. During the current outbreak JBA remains open for business and we continue to deliver our services. However, we have adopted flexible/remote workingas required. I will be receiving and reading email as normal but I may not always be available on the office number.
>  
>  <https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
> T +44 (0) 1756 799919
> www.jbarisk.com <http://www.jbarisk.com/>
>  <http://www.jbarisk.com/>  <https://www.linkedin.com/in/jon-morris-a2897b4/>  <https://twitter.com/jbarisk>
> Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
> Find out more about us here: www.jbarisk.com <http://www.jbarisk.com/> and follow us on Twitter @JBARisk <http://twitter.com/JBARisk> and LinkedIn <https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>
> The JBA Group supports the JBA Trust.
> 
> All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
> Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.
>  
> JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919
>  
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> 
> 
> -- 
> The right coordinate system can turn an impossible problem into two really hard problems. -- Charlie Pellerin
>  
> Thomas Juntunen
> GIS Specialist
> Polar Geospatial Center
> R280 Learning and Environmental Science
> 1954 Buford Ave
> University of Minnesota
> St. Paul, MN 55108
> 612-626-0505
>  <https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>
> Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200608/725f5e51/attachment-0001.html>

From r.l.morley82 at gmail.com  Wed Jun 10 01:16:45 2020
From: r.l.morley82 at gmail.com (Richard)
Date: Wed, 10 Jun 2020 08:16:45 +0000
Subject: [gdal-dev] SRC_METHOD=NO_GEOTRANSFORM
Message-ID: <CWLP265MB2225382302376444FFA43B62F8830@CWLP265MB2225.GBRP265.PROD.OUTLOOK.COM>

Hi GDAL team,

I was hoping someone could shed some light on my error log. When I try to run “clip raster by mask layer” from the GUI in QGIS I get the following in the log:

ERROR 1: The transformation is already "north up" or a transformation between pixel/line and georeferenced coordinates cannot be computed for /c1d.tif. There is no affine transformation and no GCPs. Specify transformation option SRC_METHOD=NO_GEOTRANSFORM to bypass this check.

The default CRS is set for the input parameters, and the project is set to no projection as I’m working with non cartesian data. I’m trying to figure out if this “SRC_METHOD=NO_GEOTRANSFORM” is the answer, but I can’t find anything about it in the GDAL python API index? I’m thinking that QGIS simply isn’t explicitly passing the projection on.

Any input would be gratefully received,

Richard



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200610/b3de4937/attachment.html>

From even.rouault at spatialys.com  Wed Jun 10 09:50:23 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Jun 2020 18:50:23 +0200
Subject: [gdal-dev] SRC_METHOD=NO_GEOTRANSFORM
In-Reply-To: <CWLP265MB2225382302376444FFA43B62F8830@CWLP265MB2225.GBRP265.PROD.OUTLOOK.COM>
References: <CWLP265MB2225382302376444FFA43B62F8830@CWLP265MB2225.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <3370403.dWKGOMl1Cx@even-i700>

On mercredi 10 juin 2020 08:16:45 CEST Richard wrote:
> Hi GDAL team,
> 
> I was hoping someone could shed some light on my error log. When I try to
> run “clip raster by mask layer” from the GUI in QGIS I get the following in
> the log:
> 
> ERROR 1: The transformation is already "north up" or a transformation
> between pixel/line and georeferenced coordinates cannot be computed for
> /c1d.tif. There is no affine transformation and no GCPs. Specify
> transformation option SRC_METHOD=NO_GEOTRANSFORM to bypass this check.
> 
> The default CRS is set for the input parameters, and the project is set to
> no projection as I’m working with non cartesian data. I’m trying to figure
> out if this “SRC_METHOD=NO_GEOTRANSFORM” is the answer, but I can’t find
> anything about it in the GDAL python API index? I’m thinking that QGIS
> simply isn’t explicitly passing the projection on.

With gdalwarp command line, you can pass this option with the -to switch

-to SRC_METHOD=NO_GEOTRANSFORM

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200610/56e66b7b/attachment.html>

From rykovd at gmail.com  Fri Jun 12 11:58:58 2020
From: rykovd at gmail.com (Denis Rykov)
Date: Fri, 12 Jun 2020 20:58:58 +0200
Subject: [gdal-dev] Rotate raster
Message-ID: <CAJbvKNrCe5cy5nOdQJdsNhvTZ99ZMTSRc83W2K+1odCYp2Y_Aw@mail.gmail.com>

Hi! Is there a way to rotate raster (physically as gdalwarp does) around
its center and reflect this rotation in Affine GeoTransform?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200612/e4cebd02/attachment.html>

From cgodkin at gmail.com  Sat Jun 13 17:27:38 2020
From: cgodkin at gmail.com (Carl Godkin)
Date: Sat, 13 Jun 2020 17:27:38 -0700
Subject: [gdal-dev] Retrieving 3DEP data via GDAL's WCS driver...
Message-ID: <CAE=8kmmMwMiGrp+Jn9aekcSyTRP0_hQEWWJQmanE7zQWmAhwGg@mail.gmail.com>

Hi,

This page https://viewer.nationalmap.gov/services/ includes a link under
"WCS Services" that lists a number of subdatasets.  This command

gdalnfo "
https://elevation.nationalmap.gov/arcgis/services/3DEPElevation/ImageServer/WCSServer?request=GetCapabilities&service=WCS
"

works fine.  I have been retrieving elevation data from the first
subdataset:

  SUBDATASET_1_NAME=WCS:
https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation
  SUBDATASET_1_DESC=DEP3Elevation

and most of the time it works but I think I must be doing something wrong
since sometimes there are large missing areas.

For instance this area (Boston) works just fine:

gdal_translate "WCS:
https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation"
test.tif -projwin -71.07 42.36 -71.03 42.33 -projwin_srs EPSG:4326 -tr 100
100

but this command with only a different "projwin" (in Colorado) is about 75%
missing:

gdal_translate "WCS:
https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation"
test.tif -projwin -107.03 37.28 -107 37.25 -projwin_srs EPSG:4326 -tr 100
100

Can anyone help me understand what I'm doing wrong here and how to fix it?

I am using a very recent OSGeo4W featuring GDAL 3.0.4, released 2020/01/28.

Thanks very much for your help,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200613/ded689ab/attachment.html>

From tchaddad at gmail.com  Sat Jun 13 18:20:47 2020
From: tchaddad at gmail.com (TC Haddad)
Date: Sat, 13 Jun 2020 18:20:47 -0700
Subject: [gdal-dev] Retrieving 3DEP data via GDAL's WCS driver...
In-Reply-To: <CAE=8kmmMwMiGrp+Jn9aekcSyTRP0_hQEWWJQmanE7zQWmAhwGg@mail.gmail.com>
References: <CAE=8kmmMwMiGrp+Jn9aekcSyTRP0_hQEWWJQmanE7zQWmAhwGg@mail.gmail.com>
Message-ID: <CAFVrPyh3kvNx7=ZnkfgPcjSbNrnm5p_ewUL3UagJVHdmhdGrGA@mail.gmail.com>

Hi Carl,

Is it possible that you are just encountering the edges of the subdataset?

That URL you provided in your first email had the list of indexes for the
collection of data sets, maybe you can cross reference the shapes it was
showing with the edges you are getting, to see if you need to switch to a
different product when you are in certain areas:

http://www.arcgis.com/home/webmap/viewer.html?url=https%3A%2F%2Findex.nationalmap.gov%2Farcgis%2Frest%2Fservices%2F3DEPElevationIndex%2FMapServer&source=sd

Tanya

On Sat, Jun 13, 2020 at 5:28 PM Carl Godkin <cgodkin at gmail.com> wrote:

> Hi,
>
> This page https://viewer.nationalmap.gov/services/ includes a link under
> "WCS Services" that lists a number of subdatasets.  This command
>
> gdalnfo "
> https://elevation.nationalmap.gov/arcgis/services/3DEPElevation/ImageServer/WCSServer?request=GetCapabilities&service=WCS
> "
>
> works fine.  I have been retrieving elevation data from the first
> subdataset:
>
>   SUBDATASET_1_NAME=WCS:
> https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation
>   SUBDATASET_1_DESC=DEP3Elevation
>
> and most of the time it works but I think I must be doing something wrong
> since sometimes there are large missing areas.
>
> For instance this area (Boston) works just fine:
>
> gdal_translate "WCS:
> https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation"
> test.tif -projwin -71.07 42.36 -71.03 42.33 -projwin_srs EPSG:4326 -tr 100
> 100
>
> but this command with only a different "projwin" (in Colorado) is about
> 75% missing:
>
> gdal_translate "WCS:
> https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation"
> test.tif -projwin -107.03 37.28 -107 37.25 -projwin_srs EPSG:4326 -tr 100
> 100
>
> Can anyone help me understand what I'm doing wrong here and how to fix
> it?
>
> I am using a very recent OSGeo4W featuring GDAL 3.0.4, released
> 2020/01/28.
>
> Thanks very much for your help,
>
> carl
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200613/29a0f441/attachment.html>

From cgodkin at gmail.com  Sun Jun 14 06:24:24 2020
From: cgodkin at gmail.com (Carl Godkin)
Date: Sun, 14 Jun 2020 06:24:24 -0700
Subject: [gdal-dev] Retrieving 3DEP data via GDAL's WCS driver...
In-Reply-To: <CAFVrPyh3kvNx7=ZnkfgPcjSbNrnm5p_ewUL3UagJVHdmhdGrGA@mail.gmail.com>
References: <CAE=8kmmMwMiGrp+Jn9aekcSyTRP0_hQEWWJQmanE7zQWmAhwGg@mail.gmail.com>
 <CAFVrPyh3kvNx7=ZnkfgPcjSbNrnm5p_ewUL3UagJVHdmhdGrGA@mail.gmail.com>
Message-ID: <CAE=8km=6TCucm0ddPG80b-e6uuLXb0A1ZdYDEexkbxzNWDyK4w@mail.gmail.com>

Hi Tanya,

Thanks for the suggestion.  I wondered about that too but there's only one
endpoint for "3DEP" in that WCS link so I don't know how to switch
products with WCS.  It appears from this view

https://viewer.nationalmap.gov/basic/?basemap=b1&category=ned&q=&zoom=9&bbox=-107.61108398,36.81368259,-105.38909912,38.17775097&preview=&avail=DEM
1/9 arc-second&refpoly=

that I might be near the edge of the 1/9 arc second availability but I
would have thought that the service would fill in from the next higher
resolution but I can find little in the way of documentation of this
assumption.  I have also written to the The National Map help email and I'm
hoping that someone either here or there can set me straight.

Thank you so much for the response,
carl

On Sat, Jun 13, 2020 at 6:20 PM TC Haddad <tchaddad at gmail.com> wrote:

>
> Hi Carl,
>
> Is it possible that you are just encountering the edges of the subdataset?
>
> That URL you provided in your first email had the list of indexes for the
> collection of data sets, maybe you can cross reference the shapes it was
> showing with the edges you are getting, to see if you need to switch to a
> different product when you are in certain areas:
>
>
> http://www.arcgis.com/home/webmap/viewer.html?url=https%3A%2F%2Findex.nationalmap.gov%2Farcgis%2Frest%2Fservices%2F3DEPElevationIndex%2FMapServer&source=sd
>
> Tanya
>
> On Sat, Jun 13, 2020 at 5:28 PM Carl Godkin <cgodkin at gmail.com> wrote:
>
>> Hi,
>>
>> This page https://viewer.nationalmap.gov/services/ includes a link under
>> "WCS Services" that lists a number of subdatasets.  This command
>>
>> gdalnfo "
>> https://elevation.nationalmap.gov/arcgis/services/3DEPElevation/ImageServer/WCSServer?request=GetCapabilities&service=WCS
>> "
>>
>> works fine.  I have been retrieving elevation data from the first
>> subdataset:
>>
>>   SUBDATASET_1_NAME=WCS:
>> https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation
>>   SUBDATASET_1_DESC=DEP3Elevation
>>
>> and most of the time it works but I think I must be doing something wrong
>> since sometimes there are large missing areas.
>>
>> For instance this area (Boston) works just fine:
>>
>> gdal_translate "WCS:
>> https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation"
>> test.tif -projwin -71.07 42.36 -71.03 42.33 -projwin_srs EPSG:4326 -tr 100
>> 100
>>
>> but this command with only a different "projwin" (in Colorado) is about
>> 75% missing:
>>
>> gdal_translate "WCS:
>> https://elevation.nationalmap.gov:443/arcgis/services/3DEPElevation/ImageServer/WCSServer?version=2.0.1&coverage=DEP3Elevation"
>> test.tif -projwin -107.03 37.28 -107 37.25 -projwin_srs EPSG:4326 -tr 100
>> 100
>>
>> Can anyone help me understand what I'm doing wrong here and how to fix
>> it?
>>
>> I am using a very recent OSGeo4W featuring GDAL 3.0.4, released
>> 2020/01/28.
>>
>> Thanks very much for your help,
>>
>> carl
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200614/939ec786/attachment-0001.html>

From julien.osman at csgroup.eu  Mon Jun 15 00:59:43 2020
From: julien.osman at csgroup.eu (Julien Osman)
Date: Mon, 15 Jun 2020 09:59:43 +0200
Subject: [gdal-dev] Sentinel-1 driver and calibration metadata
Message-ID: <99b2c9a5-74be-76f1-98e2-6fe8fb7ddef7@csgroup.eu>

Dear GDAL developers community,

I noticed that GDAL's driver for Sentinel-1 products doesn't access some
metadata (calibration information in particular). Do you know why this
limitation? Did you face any difficulty reading those metadata?

Since I need to access calibration information, I am considering
contributing to the driver. Do you have any advice or comment for me?

Best regards,
Julien.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x7A839B7CD5BAD6D5.asc
Type: application/pgp-keys
Size: 3187 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200615/1e66c640/attachment.key>

From panosis at noa.gr  Mon Jun 15 03:01:43 2020
From: panosis at noa.gr (Panagiotis Sismanidis)
Date: Mon, 15 Jun 2020 13:01:43 +0300
Subject: [gdal-dev] ERROR 4 while using gdalwarp to mosaic and resample
 multiple ASTGTM zipped tiffs
Message-ID: <CAAfH11Lyg6xm5TtoDw9yLSELU0rjF-mvseKtt_tPQtwycb5teQ@mail.gmail.com>

Hi,

I have prepared a python script that uses gdalwarp to mosaic and resample
ASTER DEM tiles, using as arguments the bounding box lat/lon coordinates
and the width and height of the output Gtiff. It works fine, except when I
use a quite large bbox (e.g. whole of Europe) where I get the gdal errors I
include below. If I split my bbox in two and iteratively run the script
there are no errors, all the tiffs are recognized without any issues, and
the process completes successfully. Do you know what can cause this weird
problem? Is it because of gdal or the OS?

The bbox coords (latS, lonW, latN, LonE) and the width and height that
gives me these errors are (29.94, -10.55, 61.18, 31.38), 4194 and 3125,
respectively.

I use python 3.6.7, gdal 2.2.3 and Ubuntu 18.04.4.

Thank you in advance for your help!

Errors:
=====
    ERROR 4:
`/vsizip//DATA/ASTER_GDEM_v3/ASTGTMV003_N45E009.zip/ASTGTMV003_N45E009_dem.tif'
not recognized as a supported file format.
    ERROR 4:
`/vsizip//DATA/ASTER_GDEM_v3/ASTGTMV003_N54E011.zip/ASTGTMV003_N54E011_dem.tif'
not recognized as a supported file format.
    ERROR 4:
`/vsizip//DATA/ASTER_GDEM_v3/ASTGTMV003_N34E033.zip/ASTGTMV003_N34E033_dem.tif'
not recognized as a supported file format.
    ERROR 4:
`/vsizip//DATA/ASTER_GDEM_v3/ASTGTMV003_N48E019.zip/ASTGTMV003_N48E019_dem.tif'
not recognized as a supported file format.
    ERROR 4:
`/vsizip//DATA/ASTER_GDEM_v3/ASTGTMV003_N51E006.zip/ASTGTMV003_N51E006_dem.tif'
not recognized as a supported file format.
    Traceback (most recent call last):
      File "/home/USER/gdalwarp_ASTGTM_tiles_inside_bbox.py", line 127, in
<module>
        warp_ASTGTM_tiles(args.savename, args.bbox, args.width,
args.height, args.method)
      File "/home/USER/gdalwarp_ASTGTM_tiles_inside_bbox.py", line 107, in
warp_ASTGTM_tiles
        gdal.Warp(savename, DEM_tiles_bbox, options=warp_options)
      File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 580, in Warp
        return wrapper_GDALWarpDestName(destNameOrDestDS, srcDSTab, opts,
callback, callback_data)
      File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 3112, in
wrapper_GDALWarpDestName
        return _gdal.wrapper_GDALWarpDestName(*args)
    SystemError: <built-in function wrapper_GDALWarpDestName> returned NULL
without setting an error


My function is the following:
===================

def warp_ASTGTM_tiles(savename, bbox, width, height, resampling_method):

    bound_S = math.trunc(bbox[0])
    bound_W = math.trunc(bbox[1])
    bound_N = math.ceil(bbox[2])
    bound_E = math.ceil(bbox[3])

    ASTGTM_zips = Path(ASTGTM_DATADIR).glob("*.zip")

    ASTGTM_zips_bbox = []

    for zipf in ASTGTM_zips:
        if re.match(ASTGTM_REGX, zipf.name):
            tile_lat, tile_lon = get_tile_loc(zipf.name)
            if (tile_lat >= bound_S and tile_lat <= bound_N and
                tile_lon >= bound_W and tile_lon <= bound_E):
                ASTGTM_zips_bbox.append(zipf)

    if len(ASTGTM_zips_bbox) == 0:
        raise SystemExit("No tiles are available for given bbox")

    DEM_tiles_bbox = []

    for zipf in ASTGTM_zips_bbox:
        with zipfile.ZipFile(zipf, "r") as zp:
            dem = zipf.stem + "_dem.tif"
            DEM_tiles_bbox.append(gdal.Open(f"/vsizip/{str(zipf)}/{dem}"))

    warp_options = gdal.WarpOptions(
        format="GTiff",
        outputBounds=(bbox[1], bbox[0], bbox[3], bbox[2]),
        outputBoundsSRS=WGS84_PROJ,
        srcSRS=DEM_tiles_bbox[0].GetProjection(),
        dstSRS=WGS84_PROJ,
        width=width,
        height=height,
        srcNodata=0,
        dstNodata=0,
        resampleAlg=METHODS[resampling_method],
    )

    gdal.Warp(savename, DEM_tiles_bbox, options=warp_options)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200615/38e0c954/attachment.html>

From even.rouault at spatialys.com  Mon Jun 15 06:19:54 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Jun 2020 15:19:54 +0200
Subject: [gdal-dev] Sentinel-1 driver and calibration metadata
In-Reply-To: <99b2c9a5-74be-76f1-98e2-6fe8fb7ddef7@csgroup.eu>
References: <99b2c9a5-74be-76f1-98e2-6fe8fb7ddef7@csgroup.eu>
Message-ID: <2366506.nCWK136khc@even-i700>

Julien,

> I noticed that GDAL's driver for Sentinel-1 products doesn't access some
> metadata (calibration information in particular). Do you know why this
> limitation? Did you face any difficulty reading those metadata?

I'm not super familiar with this driver, but I suspect this wasn't done because the original 
contributor didn't need that.

> Since I need to access calibration information, I am considering
> contributing to the driver. Do you have any advice or comment for me?

I think it could be wise to expose that information in a dedicated metadata domain, such as 
SAFE_CALIBRATION, rather than the general one. But I'm not sure about the amount of 
information we're talking about.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200615/c22ea1f4/attachment.html>

From even.rouault at spatialys.com  Mon Jun 15 06:23:16 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Jun 2020 15:23:16 +0200
Subject: [gdal-dev] ERROR 4 while using gdalwarp to mosaic and resample
	multiple ASTGTM zipped tiffs
In-Reply-To: <CAAfH11Lyg6xm5TtoDw9yLSELU0rjF-mvseKtt_tPQtwycb5teQ@mail.gmail.com>
References: <CAAfH11Lyg6xm5TtoDw9yLSELU0rjF-mvseKtt_tPQtwycb5teQ@mail.gmail.com>
Message-ID: <1950640.6E3unuEGjB@even-i700>

On lundi 15 juin 2020 13:01:43 CEST Panagiotis Sismanidis wrote:
> Hi,
> 
> I have prepared a python script that uses gdalwarp to mosaic and resample
> ASTER DEM tiles, using as arguments the bounding box lat/lon coordinates
> and the width and height of the output Gtiff. It works fine, except when I
> use a quite large bbox (e.g. whole of Europe) where I get the gdal errors I
> include below. If I split my bbox in two and iteratively run the script
> there are no errors, all the tiffs are recognized without any issues, and
> the process completes successfully. Do you know what can cause this weird
> problem? Is it because of gdal or the OS?

I suspect you hit the default maximum number of simultaneously open file by a process on 
Linux, which is 1024. You could potentially raise the value with ulimit.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200615/c444c874/attachment-0001.html>

From andrew at aitchison.me.uk  Tue Jun 16 01:07:57 2020
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 16 Jun 2020 09:07:57 +0100 (BST)
Subject: [gdal-dev] Reading a double from file
Message-ID: <alpine.DEB.2.22.394.2006160852140.147730@warden.aitchison.me.uk>


Does gdal have a standard, endian-independent,
way to read floating point values from file ?
Specifically IEEE-754 little-endian 64bit values.

So far my driver has used a union to "cast" 8 bytes to a double,
but I now discover that, whilst this is valid C, it is not valid C++.
I am looking for a portable way to read such values from file
into a C++ double. This cannot be the first gdal driver to need to do this.

Thanks,

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From mateusz at loskot.net  Tue Jun 16 02:02:55 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 16 Jun 2020 11:02:55 +0200
Subject: [gdal-dev] Reading a double from file
In-Reply-To: <alpine.DEB.2.22.394.2006160852140.147730@warden.aitchison.me.uk>
References: <alpine.DEB.2.22.394.2006160852140.147730@warden.aitchison.me.uk>
Message-ID: <CABUeae-aNG=rpS3OCF30dQn2w5iPHVic46w+sPEaeaU-ipMa1g@mail.gmail.com>

On Tue, 16 Jun 2020 at 10:08, Andrew C Aitchison <andrew at aitchison.me.uk> wrote:
>
> Does gdal have a standard, endian-independent,
> way to read floating point values from file ?
> Specifically IEEE-754 little-endian 64bit values.
>
> So far my driver has used a union to "cast" 8 bytes to a double,
> but I now discover that, whilst this is valid C, it is not valid C++.
> I am looking for a portable way to read such values from file
> into a C++ double. This cannot be the first gdal driver to need to do this.

Generally, use std::memcpy or std::copy.
Detect if you need to swap bytes and swap bytes.

Specifically, among others:
https://github.com/OSGeo/gdal/blob/master/gdal/frmts/blx/blx.c#L486-L502

BTW, for reading float-point values from text, CPLAtof, CPLScanString, etc:
https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_conv.h#L83-L119

-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Tue Jun 16 02:17:00 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jun 2020 11:17:00 +0200
Subject: [gdal-dev] Reading a double from file
In-Reply-To: <CABUeae-aNG=rpS3OCF30dQn2w5iPHVic46w+sPEaeaU-ipMa1g@mail.gmail.com>
References: <alpine.DEB.2.22.394.2006160852140.147730@warden.aitchison.me.uk>
 <CABUeae-aNG=rpS3OCF30dQn2w5iPHVic46w+sPEaeaU-ipMa1g@mail.gmail.com>
Message-ID: <5815462.1sHhMzLV9i@even-i700>

On mardi 16 juin 2020 11:02:55 CEST Mateusz Loskot wrote:
> On Tue, 16 Jun 2020 at 10:08, Andrew C Aitchison <andrew at aitchison.me.uk> wrote:
> > Does gdal have a standard, endian-independent,
> > way to read floating point values from file ?
> > Specifically IEEE-754 little-endian 64bit values.
> > 
> > So far my driver has used a union to "cast" 8 bytes to a double,
> > but I now discover that, whilst this is valid C, it is not valid C++.
> > I am looking for a portable way to read such values from file
> > into a C++ double. This cannot be the first gdal driver to need to do
> > this.
> 
> Generally, use std::memcpy or std::copy.
> Detect if you need to swap bytes and swap bytes.

A rather compact and portable way:

double x;
std::memcpy(&x, ..., sizeof(double));
CPL_LSBPTR64(&x); // if the ordering in the file is little-endian
CPL_MSBPTR64(&x); // if the ordering in the file is big-endian

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/a58337ba/attachment.html>

From andrew at aitchison.me.uk  Tue Jun 16 07:34:09 2020
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 16 Jun 2020 15:34:09 +0100 (BST)
Subject: [gdal-dev] Reading a double from file
In-Reply-To: <5815462.1sHhMzLV9i@even-i700>
References: <alpine.DEB.2.22.394.2006160852140.147730@warden.aitchison.me.uk>
 <CABUeae-aNG=rpS3OCF30dQn2w5iPHVic46w+sPEaeaU-ipMa1g@mail.gmail.com>
 <5815462.1sHhMzLV9i@even-i700>
Message-ID: <alpine.DEB.2.22.394.2006161533520.167929@warden.aitchison.me.uk>


Thanks to you both.

On Tue, 16 Jun 2020, Even Rouault wrote:

> On mardi 16 juin 2020 11:02:55 CEST Mateusz Loskot wrote:
>> On Tue, 16 Jun 2020 at 10:08, Andrew C Aitchison <andrew at aitchison.me.uk> wrote:
>>> Does gdal have a standard, endian-independent,
>>> way to read floating point values from file ?
>>> Specifically IEEE-754 little-endian 64bit values.
>>>
>>> So far my driver has used a union to "cast" 8 bytes to a double,
>>> but I now discover that, whilst this is valid C, it is not valid C++.
>>> I am looking for a portable way to read such values from file
>>> into a C++ double. This cannot be the first gdal driver to need to do
>>> this.
>>
>> Generally, use std::memcpy or std::copy.
>> Detect if you need to swap bytes and swap bytes.
>
> A rather compact and portable way:
>
> double x;
> std::memcpy(&x, ..., sizeof(double));
> CPL_LSBPTR64(&x); // if the ordering in the file is little-endian
> CPL_MSBPTR64(&x); // if the ordering in the file is big-endian
>
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From tcoquet at gmail.com  Tue Jun 16 07:34:14 2020
From: tcoquet at gmail.com (Thomas Coquet)
Date: Tue, 16 Jun 2020 16:34:14 +0200
Subject: [gdal-dev] Creating Geotiff is slow
Message-ID: <CAEr=DAhwUXReaT1+TSs3uT=YvAZTpUFHk_TUzqi+KaWhcvObPg@mail.gmail.com>

Hello,

I am trying to convert a full JPEG2000 image (Sentinel 2) to a GeoTIFF
(10000x10000 pixels).

My config is the following: GDAL 3.1.0, released 2020/05/03, freshly
compiled on my computer (Ubuntu 18.04).

I use the following env variables:

OPJ_NUM_THREADS=8
GDAL_NUM_THREADS=1
GDAL_CACHEMAX=1000

The command line is:

gdal_translate -of GTiff -co COMPRESS=NONE -co TILED=YES
T15RTN_20190328T170201_B02.jp2 /mnt/ramdisk/test-openjpeg.tif

As stated in its name, /mnt/ramdisk is in memory, so there should not be
any I/O lag.

I observed the following pattern:
- decompression at full speed, using all my laptop cores (about 5sec);
- a single thread starts, to write the GeoTIFF (about 5sec as well).

I would have expected the GeoTIFF creation to be almost instantaneous given
the fact that there is no compression.

If I set GDAL_NUM_THREADS > 1, I do not manage to reach full CPU speed (all
cores are used, at about 50%), and it takes about 10 secs as well.

If I use mapbox/rasterio to read the raster into memory then to write it
back to a GeoTIFF file, the whole process takes 5s, the GeoTIFF write being
almost instantaneous.

I am puzzled by this behavior... Is there something wrong with my GDAL
settings ?
Is there a way to speed up the GeoTIFF creation ? Why is it faster using
python ?

Thank you!
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/960992dc/attachment.html>

From even.rouault at spatialys.com  Tue Jun 16 08:37:49 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jun 2020 17:37:49 +0200
Subject: [gdal-dev] Creating Geotiff is slow
In-Reply-To: <CAEr=DAhwUXReaT1+TSs3uT=YvAZTpUFHk_TUzqi+KaWhcvObPg@mail.gmail.com>
References: <CAEr=DAhwUXReaT1+TSs3uT=YvAZTpUFHk_TUzqi+KaWhcvObPg@mail.gmail.com>
Message-ID: <3878414.ThYlAdkkov@even-i700>

> I am puzzled by this behavior... Is there something wrong with my GDAL
> settings ?
> Is there a way to speed up the GeoTIFF creation ? Why is it faster using
> python ?

There might be several factors:

- if with rasterio you read completely the image into memory, and then write it, parallel 
decompression is perhaps more effective. gdal_translate (actually the mechanics behind it) 
tries to use smaller read & write windows by default. You could try to set the 
GDAL_SWATH_SIZE configuration option to 250000000 so that the full band is read at once.

- but I suspect the reason might be due to the Sentinel2 band reporting 15 bits, and 
gdal_translate instructing the GTiff driver to use that setting, whereas I'm not sure if rasterio 
does the same by default. Writing 15 bits / pixel isn't a super fast code path in the GeoTIFF 
driver. You could try adding -co NBITS=16

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/4ddd1063/attachment-0001.html>

From tcoquet at gmail.com  Tue Jun 16 08:53:05 2020
From: tcoquet at gmail.com (Thomas Coquet)
Date: Tue, 16 Jun 2020 17:53:05 +0200
Subject: [gdal-dev] Creating Geotiff is slow
In-Reply-To: <3878414.ThYlAdkkov@even-i700>
References: <CAEr=DAhwUXReaT1+TSs3uT=YvAZTpUFHk_TUzqi+KaWhcvObPg@mail.gmail.com>
 <3878414.ThYlAdkkov@even-i700>
Message-ID: <CAHzsKQgdWd52Pb=1uxJYp0TpjOmv8haUc4cK6k4C+=ApcFNR1g@mail.gmail.com>

Thank you Even for your prompt answer, -co NBITS=16 solved my problem!

Thomas

Le mar. 16 juin 2020 à 17:37, Even Rouault <even.rouault at spatialys.com> a
écrit :

> > I am puzzled by this behavior... Is there something wrong with my GDAL
>
> > settings ?
>
> > Is there a way to speed up the GeoTIFF creation ? Why is it faster using
>
> > python ?
>
>
>
> There might be several factors:
>
>
>
> - if with rasterio you read completely the image into memory, and then
> write it, parallel decompression is perhaps more effective. gdal_translate
> (actually the mechanics behind it) tries to use smaller read & write
> windows by default. You could try to set the GDAL_SWATH_SIZE configuration
> option to 250000000 so that the full band is read at once.
>
>
>
> - but I suspect the reason might be due to the Sentinel2 band reporting 15
> bits, and gdal_translate instructing the GTiff driver to use that setting,
> whereas I'm not sure if rasterio does the same by default. Writing 15 bits
> / pixel isn't a super fast code path in the GeoTIFF driver. You could try
> adding -co NBITS=16
>
>
>
> Even
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/0a435a99/attachment.html>

From runette at gmail.com  Tue Jun 16 09:59:53 2020
From: runette at gmail.com (Paul Harwood)
Date: Tue, 16 Jun 2020 17:59:53 +0100
Subject: [gdal-dev] c# bindings - osr SpatialReference constructor
Message-ID: <CAE8nN5Ooa6w7_+BuYOzu5yEbh7J=R3QZiSVG2iQKV3uQ7W2Bfw@mail.gmail.com>

A common pattern for creating a SpatialReference is this :

from osgeo import osr
spatialRef = osr.SpatialReference()
spatialRef.ImportFromEPSG(2927)         # from EPSG

( this example is from the Python Cookbook and is just used to illustrate
the pattern)

But - when I try to do the equivalent in c# using the bindings :

SpatialReference CRS = new SpatialReference();
CRS.ImportFromMICoordSys(coordsys);

I get a message

error CS1729: 'SpatialReference' does not contain a constructor that takes
0 arguments

Am I missing something? Or is this is a gap in the bindings?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/18101fb7/attachment.html>

From szekerest at gmail.com  Tue Jun 16 11:12:37 2020
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 16 Jun 2020 20:12:37 +0200
Subject: [gdal-dev] c# bindings - osr SpatialReference constructor
In-Reply-To: <CAE8nN5Ooa6w7_+BuYOzu5yEbh7J=R3QZiSVG2iQKV3uQ7W2Bfw@mail.gmail.com>
References: <CAE8nN5Ooa6w7_+BuYOzu5yEbh7J=R3QZiSVG2iQKV3uQ7W2Bfw@mail.gmail.com>
Message-ID: <CACALY+Qne1tjq1Uo7jDFuUF19kDRX_xb_z=5UnDiQkCok9tz3g@mail.gmail.com>

You should use null in the constructor if you don't want to specity a wkt
during the initialization, something like:


*SpatialReference srs = new
SpatialReference(null);srs.ImportFromEPSG(2927);*

Best regards,

Tamas



Paul Harwood <runette at gmail.com> ezt írta (időpont: 2020. jún. 16., K,
19:01):

> A common pattern for creating a SpatialReference is this :
>
> from osgeo import osr
> spatialRef = osr.SpatialReference()
> spatialRef.ImportFromEPSG(2927)         # from EPSG
>
> ( this example is from the Python Cookbook and is just used to illustrate
> the pattern)
>
> But - when I try to do the equivalent in c# using the bindings :
>
> SpatialReference CRS = new SpatialReference();
> CRS.ImportFromMICoordSys(coordsys);
>
> I get a message
>
> error CS1729: 'SpatialReference' does not contain a constructor that takes
> 0 arguments
>
> Am I missing something? Or is this is a gap in the bindings?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/3927a85b/attachment.html>

From runette at gmail.com  Tue Jun 16 12:30:52 2020
From: runette at gmail.com (Paul Harwood)
Date: Tue, 16 Jun 2020 20:30:52 +0100
Subject: [gdal-dev] c# bindings - osr SpatialReference constructor
In-Reply-To: <CACALY+Qne1tjq1Uo7jDFuUF19kDRX_xb_z=5UnDiQkCok9tz3g@mail.gmail.com>
References: <CAE8nN5Ooa6w7_+BuYOzu5yEbh7J=R3QZiSVG2iQKV3uQ7W2Bfw@mail.gmail.com>
 <CACALY+Qne1tjq1Uo7jDFuUF19kDRX_xb_z=5UnDiQkCok9tz3g@mail.gmail.com>
Message-ID: <CAE8nN5OqK5Aw5FDM2zWVGaitq4x7ngWJuzACwByEivtSAXCU3Q@mail.gmail.com>

Cool, thanks!

On Tue, 16 Jun 2020, 19:12 Tamas Szekeres, <szekerest at gmail.com> wrote:

> You should use null in the constructor if you don't want to specity a wkt
> during the initialization, something like:
>
>
> *SpatialReference srs = new
> SpatialReference(null);srs.ImportFromEPSG(2927);*
>
> Best regards,
>
> Tamas
>
>
>
> Paul Harwood <runette at gmail.com> ezt írta (időpont: 2020. jún. 16., K,
> 19:01):
>
>> A common pattern for creating a SpatialReference is this :
>>
>> from osgeo import osr
>> spatialRef = osr.SpatialReference()
>> spatialRef.ImportFromEPSG(2927)         # from EPSG
>>
>> ( this example is from the Python Cookbook and is just used to illustrate
>> the pattern)
>>
>> But - when I try to do the equivalent in c# using the bindings :
>>
>> SpatialReference CRS = new SpatialReference();
>> CRS.ImportFromMICoordSys(coordsys);
>>
>> I get a message
>>
>> error CS1729: 'SpatialReference' does not contain a constructor that
>> takes 0 arguments
>>
>> Am I missing something? Or is this is a gap in the bindings?
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/eca344ee/attachment.html>

From Alex.Comer at maxar.com  Tue Jun 16 13:22:57 2020
From: Alex.Comer at maxar.com (Comer, Alex)
Date: Tue, 16 Jun 2020 20:22:57 +0000
Subject: [gdal-dev] Source SRS is a compound CRS but lacks +geoidgrids
Message-ID: <5bc63aa5cc9d40199084b032c9631b59@PW00INFMAI023.ent.ad.dg.local>


Hello, I'm having trouble using gdalwarp to adjust the heights in a DEM from EGM96 heights to ellipsoidal heights.

There is an example in the GDAL documentation (https://gdal.org/programs/gdalwarp.html#examples<https://urldefense.proofpoint.com/v2/url?u=https-3A__slack-2Dredir.net_link-3Furl-3Dhttps-253A-252F-252Fgdal.org-252Fprograms-252Fgdalwarp.html-2523examples-26v-3D3&d=DwMFAw&c=qv9gmtOiXdJCj9gMlMKtaw&r=c5qG9R_C_Uk15wO7YCz0Kmxn1feCJcKpkdWjm6OrnHA&m=LBJGDEisk_mehbQp1YF7U2vnpaqKAyB1WlXNejSAiHc&s=SPJdv5gp9MY8S77hKdINBORe-qDXH6QvCJa4mrKxl9c&e=> , near the end of the page):

  *   To transform a DEM from geoid elevations (using EGM96) to WGS84 ellipsoidal heights:

New in version 2.2.

gdalwarp -overwrite in_dem.tif out_dem.tif -s_srs EPSG:4326+5773 -t_srs EPSG:4979

When I run this command using GDAL 3.1.0 and PROJ 7.0.1, the output is unchanged from the input. My expectation is that the heights would be adjusted in the output file.

If I set CPL_DEBUG=ON, I see the message:

GDALWARP: Source SRS is a compound CRS but lacks +geoidgrids

Using gdalsrsinfo to examine the SRS "EPSG:4326+5773" shows a WKT that notably does not refer to +geoidgrids in the PROJ string:

$ gdalsrsinfo EPSG:4326+5773
PROJ.4 : +proj=longlat +datum=WGS84 +vunits=m +no_defsOGC WKT2:2018 :
COMPOUNDCRS["WGS 84 + EGM96 height",
    GEOGCRS["WGS 84",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        CS[ellipsoidal,2],
            AXIS["geodetic latitude (Lat)",north,
                ORDER[1],
                ANGLEUNIT["degree",0.0174532925199433]],
            AXIS["geodetic longitude (Lon)",east,
                ORDER[2],
                ANGLEUNIT["degree",0.0174532925199433]],
        USAGE[
            SCOPE["unknown"],
            AREA["World"],
            BBOX[-90,-180,90,180]],
        ID["EPSG",4326]],
    VERTCRS["EGM96 height",
        VDATUM["EGM96 geoid"],
        CS[vertical,1],
            AXIS["gravity-related height (H)",up,
                LENGTHUNIT["metre",1]],
        USAGE[
            SCOPE["unknown"],
            AREA["World"],
            BBOX[-90,-180,90,180]],
        ID["EPSG",5773]]]



A colleague using GDAL v2.4.1 had a different result. Note the reference to +geoidgrids=egm95_15.gtx and the PROJ4_GRIDS extension:



$ gdalsrsinfo EPSG:4326+5773
PROJ.4 : +proj=longlat +datum=WGS84 +geoidgrids=egm96_15.gtx +vunits=m +no_defsOGC WKT :
COMPD_CS["WGS 84 + EGM96 geoid height",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    VERT_CS["EGM96 geoid height",
        VERT_DATUM["EGM96 geoid",2005,
            EXTENSION["PROJ4_GRIDS","egm96_15.gtx"],
            AUTHORITY["EPSG","5171"]],
        UNIT["metre",1,
            AUTHORITY["EPSG","9001"]],
        AXIS["Up",UP],
        AUTHORITY["EPSG","5773"]]]



Indeed, with GDAL 3.1.0 & PROJ 7.0.1 I am able to achieve the desired result if I use a PROJ string rather than the EPSG:horiz+vertical code. For example something like:

gdalwarp -s_srs "+proj=longlat +datum=WGS84 +no_defs +geoidgrids=egm96_15.gtx" -t_srs "+proj=longlat +datum=WGS84 +no_def" input.tif output.tif

It seems that gdalwarp is having trouble parsing the +5773 (vertical) part of the EPSG code into the required +geoidgrids=egm96_15.gtx in the PROJ string.

I wondered whether GDAL was having trouble finding the PROJ files, but GDAL seems to find proj.db okay (this is my output with PROJ_DEBUG=3 and CPL_DEBUG=ON)...

$ gdalsrsinfo EPSG:4326+5773
gdalsrsinfo: got arg #1 : [EPSG:4326+5773]
gdalsrsinfo: trying to open with GDAL
gdalsrsinfo: trying to get SRS from user input [EPSG:4326+5773]
PROJ: pj_open_lib(proj.db): call fopen(/usr/share/proj/proj.db) - succeeded
gdalsrsinfo: got SRS from user input
gdalsrsinfo: bGotSRS: 1 bValidate: 0 pszOutputType: default bPretty: 1gdalsrsinfo: PrintSRS( oSRS, proj4, 1, 1 )PROJ.4 : +proj=longlat +datum=WGS84 +vunits=m +no_defsgdalsrsinfo: PrintSRS( oSRS, wkt2, 1, 1 )OGC WKT2:2018 :
COMPOUNDCRS["WGS 84 + EGM96 height",
    GEOGCRS["WGS 84",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        CS[ellipsoidal,2],
            AXIS["geodetic latitude (Lat)",north,
                ORDER[1],
                ANGLEUNIT["degree",0.0174532925199433]],
            AXIS["geodetic longitude (Lon)",east,
                ORDER[2],
                ANGLEUNIT["degree",0.0174532925199433]],
        USAGE[
            SCOPE["unknown"],
            AREA["World"],
            BBOX[-90,-180,90,180]],
        ID["EPSG",4326]],
    VERTCRS["EGM96 height",
        VDATUM["EGM96 geoid"],
        CS[vertical,1],
            AXIS["gravity-related height (H)",up,
                LENGTHUNIT["metre",1]],
        USAGE[
            SCOPE["unknown"],
            AREA["World"],
            BBOX[-90,-180,90,180]],
        ID["EPSG",5773]]]

I expected that we should be seeing a +geoidgrids=egm96_15.gtx
at the end of: PROJ.4 : +proj=longlat +datum=WGS84 +vunits=m +no_defs

Am I doing something wrong, or misunderstanding how things work now? Did something change with GDAL 3.1.0 or perhaps it should not be used with PROJ 7.0.1 ?
I would appreciate any insight anyone may have.
Thanks,
Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/4355171b/attachment.html>

From even.rouault at spatialys.com  Tue Jun 16 13:34:23 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jun 2020 22:34:23 +0200
Subject: [gdal-dev] Source SRS is a compound CRS but lacks +geoidgrids
In-Reply-To: <5bc63aa5cc9d40199084b032c9631b59@PW00INFMAI023.ent.ad.dg.local>
References: <5bc63aa5cc9d40199084b032c9631b59@PW00INFMAI023.ent.ad.dg.local>
Message-ID: <3606730.fmlI40c4a0@even-i700>

On mardi 16 juin 2020 20:22:57 CEST Comer, Alex wrote:
> Hello, I'm having trouble using gdalwarp to adjust the heights in a DEM from
> EGM96 heights to ellipsoidal heights.
> 
> There is an example in the GDAL documentation
> (https://gdal.org/programs/gdalwarp.html#examples<https://urldefense.proofp
> oint.com/v2/url?u=https-3A__slack-2Dredir.net_link-3Furl-3Dhttps-253A-252F-2
> 52Fgdal.org-252Fprograms-252Fgdalwarp.html-2523examples-26v-3D3&d=DwMFAw&c=q
> 
v9gmtOiXdJCj9gMlMKtaw&r=c5qG9R_C_Uk15wO7YCz0Kmxn1feCJcKpkdWjm6OrnHA&m=L
BJGDE
> isk_mehbQp1YF7U2vnpaqKAyB1WlXNejSAiHc&s=SPJdv5gp9MY8S77hKdINBORe-
qDXH6QvCJa4
> mrKxl9c&e=> , near the end of the page):
> 
>   *   To transform a DEM from geoid elevations (using EGM96) to WGS84
> ellipsoidal heights:
> 
> New in version 2.2.
> 
> gdalwarp -overwrite in_dem.tif out_dem.tif -s_srs EPSG:4326+5773 -t_srs
> EPSG:4979
> 
> When I run this command using GDAL 3.1.0 and PROJ 7.0.1, the output is
> unchanged from the input. My expectation is that the heights would be
> adjusted in the output file.
> 
> If I set CPL_DEBUG=ON, I see the message:
> 
> GDALWARP: Source SRS is a compound CRS but lacks +geoidgrids
> 
> Using gdalsrsinfo to examine the SRS "EPSG:4326+5773" shows a WKT that
> notably does not refer to +geoidgrids in the PROJ string:
> 
> $ gdalsrsinfo EPSG:4326+5773
> PROJ.4 : +proj=longlat +datum=WGS84 +vunits=m +no_defsOGC WKT2:2018 :
> COMPOUNDCRS["WGS 84 + EGM96 height",
>     GEOGCRS["WGS 84",
>         DATUM["World Geodetic System 1984",
>             ELLIPSOID["WGS 84",6378137,298.257223563,
>                 LENGTHUNIT["metre",1]]],
>         PRIMEM["Greenwich",0,
>             ANGLEUNIT["degree",0.0174532925199433]],
>         CS[ellipsoidal,2],
>             AXIS["geodetic latitude (Lat)",north,
>                 ORDER[1],
>                 ANGLEUNIT["degree",0.0174532925199433]],
>             AXIS["geodetic longitude (Lon)",east,
>                 ORDER[2],
>                 ANGLEUNIT["degree",0.0174532925199433]],
>         USAGE[
>             SCOPE["unknown"],
>             AREA["World"],
>             BBOX[-90,-180,90,180]],
>         ID["EPSG",4326]],
>     VERTCRS["EGM96 height",
>         VDATUM["EGM96 geoid"],
>         CS[vertical,1],
>             AXIS["gravity-related height (H)",up,
>                 LENGTHUNIT["metre",1]],
>         USAGE[
>             SCOPE["unknown"],
>             AREA["World"],
>             BBOX[-90,-180,90,180]],
>         ID["EPSG",5773]]]
> 
> 
> 
> A colleague using GDAL v2.4.1 had a different result. Note the reference to
> +geoidgrids=egm95_15.gtx and the PROJ4_GRIDS extension:
> 
> 
> 
> $ gdalsrsinfo EPSG:4326+5773
> PROJ.4 : +proj=longlat +datum=WGS84 +geoidgrids=egm96_15.gtx +vunits=m
> +no_defsOGC WKT : COMPD_CS["WGS 84 + EGM96 geoid height",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4326"]],
>     VERT_CS["EGM96 geoid height",
>         VERT_DATUM["EGM96 geoid",2005,
>             EXTENSION["PROJ4_GRIDS","egm96_15.gtx"],
>             AUTHORITY["EPSG","5171"]],
>         UNIT["metre",1,
>             AUTHORITY["EPSG","9001"]],
>         AXIS["Up",UP],
>         AUTHORITY["EPSG","5773"]]]
> 
> 
> 
> Indeed, with GDAL 3.1.0 & PROJ 7.0.1 I am able to achieve the desired result
> if I use a PROJ string rather than the EPSG:horiz+vertical code. For
> example something like:
> 
> gdalwarp -s_srs "+proj=longlat +datum=WGS84 +no_defs
> +geoidgrids=egm96_15.gtx" -t_srs "+proj=longlat +datum=WGS84 +no_def"
> input.tif output.tif

Yes, since GDAL 3 / PROJ 6, this is the expected way to proceed, even if admitedly not ideal 
and could benefit from enhancements, since EPSG:5773 is no longer automatically expanded 
(for "good" reasons) to +geoidgrids=egm96_15.gtx , and gdalwarp in height adjustment 
mode requires an explicit mention of geoidgrids.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/3bc6b01e/attachment-0001.html>

From patrick.mckendree.young at gmail.com  Tue Jun 16 14:17:54 2020
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Tue, 16 Jun 2020 15:17:54 -0600
Subject: [gdal-dev] Source SRS is a compound CRS but lacks +geoidgrids
In-Reply-To: <3606730.fmlI40c4a0@even-i700>
References: <5bc63aa5cc9d40199084b032c9631b59@PW00INFMAI023.ent.ad.dg.local>
 <3606730.fmlI40c4a0@even-i700>
Message-ID: <CADXYQQ5399AScPCA49sLo-wx=UV4+MvD4ncDX=nsrbViTdAQqg@mail.gmail.com>

Is this a special case for EPSG:5773, or is it a bad idea to express the
vertical datum via EPSG codes in general?

Patrick

On Tue, Jun 16, 2020 at 2:34 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 16 juin 2020 20:22:57 CEST Comer, Alex wrote:
>
> > Hello, I'm having trouble using gdalwarp to adjust the heights in a DEM
> from
>
> > EGM96 heights to ellipsoidal heights.
>
> >
>
> > There is an example in the GDAL documentation
>
> > (https://gdal.org/programs/gdalwarp.html#examples<
> https://urldefense.proofp
>
> >
> oint.com/v2/url?u=https-3A__slack-2Dredir.net_link-3Furl-3Dhttps-253A-252F-2
>
> >
> 52Fgdal.org-252Fprograms-252Fgdalwarp.html-2523examples-26v-3D3&d=DwMFAw&c=q
>
> >
> v9gmtOiXdJCj9gMlMKtaw&r=c5qG9R_C_Uk15wO7YCz0Kmxn1feCJcKpkdWjm6OrnHA&m=LBJGDE
>
> >
> isk_mehbQp1YF7U2vnpaqKAyB1WlXNejSAiHc&s=SPJdv5gp9MY8S77hKdINBORe-qDXH6QvCJa4
>
> > mrKxl9c&e=> , near the end of the page):
>
> >
>
> > * To transform a DEM from geoid elevations (using EGM96) to WGS84
>
> > ellipsoidal heights:
>
> >
>
> > New in version 2.2.
>
> >
>
> > gdalwarp -overwrite in_dem.tif out_dem.tif -s_srs EPSG:4326+5773 -t_srs
>
> > EPSG:4979
>
> >
>
> > When I run this command using GDAL 3.1.0 and PROJ 7.0.1, the output is
>
> > unchanged from the input. My expectation is that the heights would be
>
> > adjusted in the output file.
>
> >
>
> > If I set CPL_DEBUG=ON, I see the message:
>
> >
>
> > GDALWARP: Source SRS is a compound CRS but lacks +geoidgrids
>
> >
>
> > Using gdalsrsinfo to examine the SRS "EPSG:4326+5773" shows a WKT that
>
> > notably does not refer to +geoidgrids in the PROJ string:
>
> >
>
> > $ gdalsrsinfo EPSG:4326+5773
>
> > PROJ.4 : +proj=longlat +datum=WGS84 +vunits=m +no_defsOGC WKT2:2018 :
>
> > COMPOUNDCRS["WGS 84 + EGM96 height",
>
> > GEOGCRS["WGS 84",
>
> > DATUM["World Geodetic System 1984",
>
> > ELLIPSOID["WGS 84",6378137,298.257223563,
>
> > LENGTHUNIT["metre",1]]],
>
> > PRIMEM["Greenwich",0,
>
> > ANGLEUNIT["degree",0.0174532925199433]],
>
> > CS[ellipsoidal,2],
>
> > AXIS["geodetic latitude (Lat)",north,
>
> > ORDER[1],
>
> > ANGLEUNIT["degree",0.0174532925199433]],
>
> > AXIS["geodetic longitude (Lon)",east,
>
> > ORDER[2],
>
> > ANGLEUNIT["degree",0.0174532925199433]],
>
> > USAGE[
>
> > SCOPE["unknown"],
>
> > AREA["World"],
>
> > BBOX[-90,-180,90,180]],
>
> > ID["EPSG",4326]],
>
> > VERTCRS["EGM96 height",
>
> > VDATUM["EGM96 geoid"],
>
> > CS[vertical,1],
>
> > AXIS["gravity-related height (H)",up,
>
> > LENGTHUNIT["metre",1]],
>
> > USAGE[
>
> > SCOPE["unknown"],
>
> > AREA["World"],
>
> > BBOX[-90,-180,90,180]],
>
> > ID["EPSG",5773]]]
>
> >
>
> >
>
> >
>
> > A colleague using GDAL v2.4.1 had a different result. Note the reference
> to
>
> > +geoidgrids=egm95_15.gtx and the PROJ4_GRIDS extension:
>
> >
>
> >
>
> >
>
> > $ gdalsrsinfo EPSG:4326+5773
>
> > PROJ.4 : +proj=longlat +datum=WGS84 +geoidgrids=egm96_15.gtx +vunits=m
>
> > +no_defsOGC WKT : COMPD_CS["WGS 84 + EGM96 geoid height",
>
> > GEOGCS["WGS 84",
>
> > DATUM["WGS_1984",
>
> > SPHEROID["WGS 84",6378137,298.257223563,
>
> > AUTHORITY["EPSG","7030"]],
>
> > AUTHORITY["EPSG","6326"]],
>
> > PRIMEM["Greenwich",0,
>
> > AUTHORITY["EPSG","8901"]],
>
> > UNIT["degree",0.0174532925199433,
>
> > AUTHORITY["EPSG","9122"]],
>
> > AUTHORITY["EPSG","4326"]],
>
> > VERT_CS["EGM96 geoid height",
>
> > VERT_DATUM["EGM96 geoid",2005,
>
> > EXTENSION["PROJ4_GRIDS","egm96_15.gtx"],
>
> > AUTHORITY["EPSG","5171"]],
>
> > UNIT["metre",1,
>
> > AUTHORITY["EPSG","9001"]],
>
> > AXIS["Up",UP],
>
> > AUTHORITY["EPSG","5773"]]]
>
> >
>
> >
>
> >
>
> > Indeed, with GDAL 3.1.0 & PROJ 7.0.1 I am able to achieve the desired
> result
>
> > if I use a PROJ string rather than the EPSG:horiz+vertical code. For
>
> > example something like:
>
> >
>
> > gdalwarp -s_srs "+proj=longlat +datum=WGS84 +no_defs
>
> > +geoidgrids=egm96_15.gtx" -t_srs "+proj=longlat +datum=WGS84 +no_def"
>
> > input.tif output.tif
>
>
>
> Yes, since GDAL 3 / PROJ 6, this is the expected way to proceed, even if
> admitedly not ideal and could benefit from enhancements, since EPSG:5773 is
> no longer automatically expanded (for "good" reasons) to
> +geoidgrids=egm96_15.gtx , and gdalwarp in height adjustment mode requires
> an explicit mention of geoidgrids.
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/38f68a8a/attachment.html>

From even.rouault at spatialys.com  Tue Jun 16 14:44:59 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jun 2020 23:44:59 +0200
Subject: [gdal-dev] Source SRS is a compound CRS but lacks +geoidgrids
In-Reply-To: <CADXYQQ5399AScPCA49sLo-wx=UV4+MvD4ncDX=nsrbViTdAQqg@mail.gmail.com>
References: <5bc63aa5cc9d40199084b032c9631b59@PW00INFMAI023.ent.ad.dg.local>
 <3606730.fmlI40c4a0@even-i700>
 <CADXYQQ5399AScPCA49sLo-wx=UV4+MvD4ncDX=nsrbViTdAQqg@mail.gmail.com>
Message-ID: <9000445.bBKQIiYkSe@even-i700>

On mardi 16 juin 2020 15:17:54 CEST Patrick Young wrote:
> Is this a special case for EPSG:5773, or is it a bad idea to express the
> vertical datum via EPSG codes in general?

This could go in a lengthy geodesy lesson, but bascially a CRS definition and its 
transformation to another one are two separate concepts. PROJ < 6 tended to blend them 
together, by including the transformation to WGS84 in the CRS definition. For number of 
cases, this is accurate enough, but this systematic use of WGS84 pivot is more and more 
wrong in a number of situations, hence this is no longer used systematically in PROJ 6. PROJ 
< 6 behaviour was a "early binding" (to WGS84), while PROJ 6 uses a "late binding" approach 
where it might use a WGS84 pivot, or another one, or a direct transformation when available

Some details about that in:
http://download.osgeo.org/proj/presentations/PROJ%20CRS%20revamp%20(FOSS4G
%202019).pdf

So by adding +geoidgrids=egm96_15.gtx you force the geoid to be referenced to WGS84. 
Which makes sense in this particular case, since indeed EGM96 height has a transformation to 
WGS84, but not in the general case.

The current approach used by gdalwarp to do those height correction is a bit of a "hack". A 
more generalized approach would use PROJ capabilities to compute the Z difference without 
GDAL to have to explicitly use the geoidgrid.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/028e32ff/attachment.html>

From patrick.mckendree.young at gmail.com  Tue Jun 16 14:47:42 2020
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Tue, 16 Jun 2020 15:47:42 -0600
Subject: [gdal-dev] Source SRS is a compound CRS but lacks +geoidgrids
In-Reply-To: <9000445.bBKQIiYkSe@even-i700>
References: <5bc63aa5cc9d40199084b032c9631b59@PW00INFMAI023.ent.ad.dg.local>
 <3606730.fmlI40c4a0@even-i700>
 <CADXYQQ5399AScPCA49sLo-wx=UV4+MvD4ncDX=nsrbViTdAQqg@mail.gmail.com>
 <9000445.bBKQIiYkSe@even-i700>
Message-ID: <CADXYQQ6MwDHws29rMUZO0w2xohGMi1Qf54PU=M8jjSNmUZ02kg@mail.gmail.com>

Thanks Even, really helpful!

Patrick

On Tue, Jun 16, 2020 at 3:45 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 16 juin 2020 15:17:54 CEST Patrick Young wrote:
>
> > Is this a special case for EPSG:5773, or is it a bad idea to express the
>
> > vertical datum via EPSG codes in general?
>
>
>
> This could go in a lengthy geodesy lesson, but bascially a CRS definition
> and its transformation to another one are two separate concepts. PROJ < 6
> tended to blend them together, by including the transformation to WGS84 in
> the CRS definition. For number of cases, this is accurate enough, but this
> systematic use of WGS84 pivot is more and more wrong in a number of
> situations, hence this is no longer used systematically in PROJ 6. PROJ < 6
> behaviour was a "early binding" (to WGS84), while PROJ 6 uses a "late
> binding" approach where it might use a WGS84 pivot, or another one, or a
> direct transformation when available
>
>
>
> Some details about that in:
>
>
> http://download.osgeo.org/proj/presentations/PROJ%20CRS%20revamp%20(FOSS4G%202019).pdf
>
>
>
> So by adding +geoidgrids=egm96_15.gtx you force the geoid to be referenced
> to WGS84. Which makes sense in this particular case, since indeed EGM96
> height has a transformation to WGS84, but not in the general case.
>
>
>
> The current approach used by gdalwarp to do those height correction is a
> bit of a "hack". A more generalized approach would use PROJ capabilities to
> compute the Z difference without GDAL to have to explicitly use the
> geoidgrid.
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200616/36d5debe/attachment-0001.html>

From gdal at ryandesign.com  Tue Jun 16 18:41:28 2020
From: gdal at ryandesign.com (Ryan Schmidt)
Date: Tue, 16 Jun 2020 20:41:28 -0500
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
Message-ID: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>

Hello, I'm a developer with MacPorts. We have this problem: py-gdal is written in C++ but it gets compiled using the C compiler and CFLAGS and linked using the C++ compiler and LDFLAGS. We would like it to be compiled using the C++ compiler and CXXFLAGS. How can this be accomplished? We have a need to supply the build with certain flags in CXXFLAGS but they are currently being ignored, resulting in build failures like this:

https://trac.macports.org/ticket/57621

I know that distutils simply has the defect that it does not support C++ software at all, resulting in the above condition. This bug was never fixed before distutils was retired.

https://bugs.python.org/issue1222585

I am trying to figure out whether distutils' replacement setuptools is still suffering from the same problem and needs to be fixed or whether there is something that needs to be changed in py-gdal and other similar projects to make it work. Do you know?


From Jessica.Evans at jbarisk.com  Wed Jun 17 04:42:02 2020
From: Jessica.Evans at jbarisk.com (Jessica Evans)
Date: Wed, 17 Jun 2020 11:42:02 +0000
Subject: [gdal-dev] Help request for data alignment issue
Message-ID: <CWXP123MB3032C2B2C856F95DD44B7A71FA9A0@CWXP123MB3032.GBRP123.PROD.OUTLOOK.COM>

Hi

Wondering if anyone can help.

I am currently trying to use osgeo gdal.Warp to resample and reproject a GeoTiff (from EPSG:26916 NAD83 / UTM zone 16N to EPSG:102008 North America Albers), but also to get the data to align with other data that has been processed using ArcGIS.

I can get the data to align if I first translate the GeoTiff, setting "GEOTIFF_KEYS_FLAVOR"="ESRI_PE" creation option and create a new file, then run the warp operation on this new file.

What is the best way to force the alignment with ArcGIS data without creating this intermediate file? This will need to be run on files that are several tens of GBs in size, so I want to avoid making lots of copies of huge files.

I have tried going via a VRT, but the GEOTIFF_KEYS_FLAVOR option is only available for GeoTiffs. I've also tried using gdal_edit to manually edit the projection WKT in place and then pass that through gdalwarp, but this does not align the data. Editing the projection WKT with gdal_translate to create a new tiff for the warp operation seems to work just fine, but like I said I'd like to avoid creating new file because of their size.

I realise the most obvious answer is not to use ArcGIS, but that isn't an option for us at the moment.

Any help on this would be greatly appreciated.

Thanks in advance,
Jessica


[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200617/4c9c84d2/attachment.html>

From even.rouault at spatialys.com  Wed Jun 17 06:38:33 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Jun 2020 15:38:33 +0200
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
Message-ID: <1845078.aIMJ9AMLeH@even-i700>

On mardi 16 juin 2020 20:41:28 CEST Ryan Schmidt wrote:
> Hello, I'm a developer with MacPorts. We have this problem: py-gdal is
> written in C++ but it gets compiled using the C compiler and CFLAGS and
> linked using the C++ compiler and LDFLAGS. We would like it to be compiled
> using the C++ compiler and CXXFLAGS. How can this be accomplished? We have
> a need to supply the build with certain flags in CXXFLAGS but they are
> currently being ignored, resulting in build failures like this:
> 
> https://trac.macports.org/ticket/57621
> 
> I know that distutils simply has the defect that it does not support C++
> software at all, resulting in the above condition. This bug was never fixed
> before distutils was retired.
> 
> https://bugs.python.org/issue1222585
> 
> I am trying to figure out whether distutils' replacement setuptools is still
> suffering from the same problem and needs to be fixed or whether there is
> something that needs to be changed in py-gdal and other similar projects to
> make it work. Do you know?

What is py-gdal exactly ? A build of the "official" GDAL SWIG Python bindings ?

Python extension building is always a bit of black magick to me, but our continuous 
integration does include building them on the Mac. For example, 
https://github.com/OSGeo/gdal/runs/779871427 . I guess this must be through setuptools

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200617/989d7082/attachment-0001.html>

From schwehr at gmail.com  Wed Jun 17 06:57:20 2020
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 17 Jun 2020 06:57:20 -0700
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <1845078.aIMJ9AMLeH@even-i700>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
Message-ID: <CACmBxys92uwosTY6Tg8AwL=5xZ0FpUmogonkvAPeEr6N8QvCVw@mail.gmail.com>

Here is the (very out of date) fink setup for gdal for comparison:

https://github.com/fink/fink-distributions/blob/master/10.9-libcxx/stable/main/finkinfo/libs/pythonmods/gdal-py.info#L43
https://github.com/fink/fink-distributions/blob/master/10.9-libcxx/stable/main/finkinfo/libs/pythonmods/gdal-py.patch

Sorry it's such an old version of GDAL.  I haven't contributed to fink in a
while.

-kurt

On Wed, Jun 17, 2020 at 6:38 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 16 juin 2020 20:41:28 CEST Ryan Schmidt wrote:
>
> > Hello, I'm a developer with MacPorts. We have this problem: py-gdal is
>
> > written in C++ but it gets compiled using the C compiler and CFLAGS and
>
> > linked using the C++ compiler and LDFLAGS. We would like it to be
> compiled
>
> > using the C++ compiler and CXXFLAGS. How can this be accomplished? We
> have
>
> > a need to supply the build with certain flags in CXXFLAGS but they are
>
> > currently being ignored, resulting in build failures like this:
>
> >
>
> > https://trac.macports.org/ticket/57621
>
> >
>
> > I know that distutils simply has the defect that it does not support C++
>
> > software at all, resulting in the above condition. This bug was never
> fixed
>
> > before distutils was retired.
>
> >
>
> > https://bugs.python.org/issue1222585
>
> >
>
> > I am trying to figure out whether distutils' replacement setuptools is
> still
>
> > suffering from the same problem and needs to be fixed or whether there is
>
> > something that needs to be changed in py-gdal and other similar projects
> to
>
> > make it work. Do you know?
>
>
>
> What is py-gdal exactly ? A build of the "official" GDAL SWIG Python
> bindings ?
>
>
>
> Python extension building is always a bit of black magick to me, but our
> continuous integration does include building them on the Mac. For example,
>
> https://github.com/OSGeo/gdal/runs/779871427 . I guess this must be
> through setuptools
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200617/5bbe1144/attachment.html>

From bclay at infoscitex.com  Wed Jun 17 08:10:57 2020
From: bclay at infoscitex.com (Clay, Bruce)
Date: Wed, 17 Jun 2020 15:10:57 +0000
Subject: [gdal-dev] extract from geopdf with transparency
Message-ID: <0d134c2acdb34d9b9563de1083c13f29@infoscitex.com>

We have a GeoPDF file that contains multiple layers, base layer plus several transparent overlays and some vectors.

We can pull each or all image layers and the vector layers from the PDF and save them in separate files.  We cannot get the transparent image layers to extract and keep their transparency.


Is there a way to extract image layers and keep their transparency?  We have tried extracting as tif, jpeg, png and none of them work.  The gif driver only supports single band images .  While the layer we are trying to extract is a stroke text overlay and should only be one color it still will not extract the image


Bruce

From rajeshreddy82 at gmail.com  Wed Jun 17 09:37:48 2020
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Wed, 17 Jun 2020 09:37:48 -0700 (MST)
Subject: [gdal-dev] How to convert GDAL Vector dataset to memory stream
Message-ID: <1592411868039-0.post@n6.nabble.com>

Hello list,

I'm using GDAL via swig C# bindings. Is there a way to create memory stream
from gdal vector dataset. If so, how  can I achieve this.

Thanks in advance
Rajesh




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Jun 17 10:23:50 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 17 Jun 2020 10:23:50 -0700 (MST)
Subject: [gdal-dev] Help request for data alignment issue
In-Reply-To: <CWXP123MB3032C2B2C856F95DD44B7A71FA9A0@CWXP123MB3032.GBRP123.PROD.OUTLOOK.COM>
References: <CWXP123MB3032C2B2C856F95DD44B7A71FA9A0@CWXP123MB3032.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <1592414630078-0.post@n6.nabble.com>

Hi,

You do not give enough details so I could try to follow your steps. It is
odd that gdal_edit does not give the desired result. But have you tried to
use "GEOTIFF_KEYS_FLAVOR"="ESRI_PE" directly as a gdalwarp creation option?

-Jukka Rahkonen-


Jessica Evans wrote
> Hi
> 
> Wondering if anyone can help.
> 
> I am currently trying to use osgeo gdal.Warp to resample and reproject a
> GeoTiff (from EPSG:26916 NAD83 / UTM zone 16N to EPSG:102008 North America
> Albers), but also to get the data to align with other data that has been
> processed using ArcGIS.
> 
> I can get the data to align if I first translate the GeoTiff, setting
> "GEOTIFF_KEYS_FLAVOR"="ESRI_PE" creation option and create a new file,
> then run the warp operation on this new file.
> 
> What is the best way to force the alignment with ArcGIS data without
> creating this intermediate file? This will need to be run on files that
> are several tens of GBs in size, so I want to avoid making lots of copies
> of huge files.
> 
> I have tried going via a VRT, but the GEOTIFF_KEYS_FLAVOR option is only
> available for GeoTiffs. I've also tried using gdal_edit to manually edit
> the projection WKT in place and then pass that through gdalwarp, but this
> does not align the data. Editing the projection WKT with gdal_translate to
> create a new tiff for the warp operation seems to work just fine, but like
> I said I'd like to avoid creating new file because of their size.
> 
> I realise the most obvious answer is not to use ArcGIS, but that isn't an
> option for us at the moment.
> 
> Any help on this would be greatly appreciated.
> 
> Thanks in advance,
> Jessica
> 
> 
> [JBA COVID-19
> statement]&lt;https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf&gt;
> 
> T +44 (0) 1756 799919
> www.jbarisk.com&lt;http://www.jbarisk.com&gt;
> 
> [Visit our website]&lt;http://www.jbarisk.com&gt;
> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] 
> [Follow us on Twitter] &lt;https://twitter.com/jbarisk&gt;
> Our postal address and registered office is JBA Risk Management Limited, 1
> Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23
> 3FD.
> 
> Find out more about us here:
> www.jbarisk.com&lt;http://www.jbarisk.com/&gt; and follow us on Twitter
> @JBARisk&lt;http://twitter.com/JBARisk&gt; and
> LinkedIn&lt;https://www.linkedin.com/company/2370847?trk=tyah&amp;trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT&gt;
> 
> The JBA Group supports the JBA Trust.
> 
> All JBA Risk Management's email messages contain confidential information
> and are intended only for the individual(s) named. If you are not the
> named addressee you should not disseminate, distribute or copy this
> e-mail.
> Please notify the sender immediately by email if you have received this
> email by mistake and delete this email from your system.
> 
> 
> JBA Risk Management Limited is registered in England, company number
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North
> Yorkshire, BD23 3FD, Telephone: +441756799919
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From gdal at ryandesign.com  Wed Jun 17 15:37:23 2020
From: gdal at ryandesign.com (Ryan Schmidt)
Date: Wed, 17 Jun 2020 17:37:23 -0500
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <1845078.aIMJ9AMLeH@even-i700>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
Message-ID: <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>



On Jun 17, 2020, at 08:38, Even Rouault wrote:

> On mardi 16 juin 2020 20:41:28 CEST Ryan Schmidt wrote:
> > Hello, I'm a developer with MacPorts. We have this problem: py-gdal is
> > written in C++ but it gets compiled using the C compiler and CFLAGS and
> > linked using the C++ compiler and LDFLAGS. We would like it to be compiled
> > using the C++ compiler and CXXFLAGS. How can this be accomplished? We have
> > a need to supply the build with certain flags in CXXFLAGS but they are
> > currently being ignored, resulting in build failures like this:
> > 
> > https://trac.macports.org/ticket/57621
> > 
> > I know that distutils simply has the defect that it does not support C++
> > software at all, resulting in the above condition. This bug was never fixed
> > before distutils was retired.
> > 
> > https://bugs.python.org/issue1222585
> > 
> > I am trying to figure out whether distutils' replacement setuptools is still
> > suffering from the same problem and needs to be fixed or whether there is
> > something that needs to be changed in py-gdal and other similar projects to
> > make it work. Do you know?
>  
> What is py-gdal exactly ? A build of the "official" GDAL SWIG Python bindings ? 

https://pypi.org/project/GDAL/


> Python extension building is always a bit of black magick to me, but our continuous integration does include building them on the Mac. For example, 
> https://github.com/OSGeo/gdal/runs/779871427 . I guess this must be through setuptools

The HTML5ness of that CI result interface is making it impossible for me to determine whether it is building the python extension and if so to determine whether it has the same problem I'm seeing. The find function on that page isn't working right for me, and I can't see any way to download or copy the entire build log so that I can examine it in my editor.

From chris.marsh at usask.ca  Wed Jun 17 16:08:19 2020
From: chris.marsh at usask.ca (Chris Marsh)
Date: Wed, 17 Jun 2020 17:08:19 -0600
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
 <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>
Message-ID: <CAFgDerFuttoQ-=eNPD9tfNpeSO6w1WwZ10_nzDDVFqiFe3TcWA@mail.gmail.com>

To the right of the search box are 3 dots. Click that and 'view raw logs'

https://pipelines.actions.githubusercontent.com/yqaARdsLodWRtkoqajmNaa64Xp4JCsYwhgHYzJtTCVY8q4LFPT/_apis/pipelines/1/runs/546/signedlogcontent/3?urlExpires=2020-06-17T23%3A07%3A33.8599856Z&urlSigningMethod=HMACV1&urlSignature=lHpnB3bSeUyel1HOzHFRgrY3dg3RHkf4IQrqL%2BPKtu8%3D



On Wed, Jun 17, 2020 at 5:02 PM Ryan Schmidt <gdal at ryandesign.com> wrote:

> CAUTION: This email originated from outside of the University of
> Saskatchewan. Do not click links or open attachments unless you recognize
> the sender and know the content is safe. If in doubt, please forward
> suspicious emails to phishing at usask.ca
>
>
> On Jun 17, 2020, at 08:38, Even Rouault wrote:
>
> > On mardi 16 juin 2020 20:41:28 CEST Ryan Schmidt wrote:
> > > Hello, I'm a developer with MacPorts. We have this problem: py-gdal is
> > > written in C++ but it gets compiled using the C compiler and CFLAGS and
> > > linked using the C++ compiler and LDFLAGS. We would like it to be
> compiled
> > > using the C++ compiler and CXXFLAGS. How can this be accomplished? We
> have
> > > a need to supply the build with certain flags in CXXFLAGS but they are
> > > currently being ignored, resulting in build failures like this:
> > >
> > > https://trac.macports.org/ticket/57621
> > >
> > > I know that distutils simply has the defect that it does not support
> C++
> > > software at all, resulting in the above condition. This bug was never
> fixed
> > > before distutils was retired.
> > >
> > > https://bugs.python.org/issue1222585
> > >
> > > I am trying to figure out whether distutils' replacement setuptools is
> still
> > > suffering from the same problem and needs to be fixed or whether there
> is
> > > something that needs to be changed in py-gdal and other similar
> projects to
> > > make it work. Do you know?
> >
> > What is py-gdal exactly ? A build of the "official" GDAL SWIG Python
> bindings ?
>
> https://pypi.org/project/GDAL/
>
>
> > Python extension building is always a bit of black magick to me, but our
> continuous integration does include building them on the Mac. For example,
> > https://github.com/OSGeo/gdal/runs/779871427 . I guess this must be
> through setuptools
>
> The HTML5ness of that CI result interface is making it impossible for me
> to determine whether it is building the python extension and if so to
> determine whether it has the same problem I'm seeing. The find function on
> that page isn't working right for me, and I can't see any way to download
> or copy the entire build log so that I can examine it in my editor.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Chris Marsh, PhD
University of Saskatchewan
chrismarsh.ca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200617/edc36f9b/attachment.html>

From gdal at ryandesign.com  Wed Jun 17 16:20:09 2020
From: gdal at ryandesign.com (Ryan Schmidt)
Date: Wed, 17 Jun 2020 18:20:09 -0500
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <CAFgDerFuttoQ-=eNPD9tfNpeSO6w1WwZ10_nzDDVFqiFe3TcWA@mail.gmail.com>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
 <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>
 <CAFgDerFuttoQ-=eNPD9tfNpeSO6w1WwZ10_nzDDVFqiFe3TcWA@mail.gmail.com>
Message-ID: <6CDB0B7B-64A4-49EC-8E67-420DC5F60907@ryandesign.com>

On Jun 17, 2020, at 18:08, Chris Marsh wrote:

> To the right of the search box are 3 dots. Click that and 'view raw logs'
> 
> https://pipelines.actions.githubusercontent.com/yqaARdsLodWRtkoqajmNaa64Xp4JCsYwhgHYzJtTCVY8q4LFPT/_apis/pipelines/1/runs/546/signedlogcontent/3?urlExpires=2020-06-17T23%3A07%3A33.8599856Z&urlSigningMethod=HMACV1&urlSignature=lHpnB3bSeUyel1HOzHFRgrY3dg3RHkf4IQrqL%2BPKtu8%3D

Thanks. And there it is:


2020-06-17T10:10:44.5739190Z running build_ext
2020-06-17T10:10:44.7035530Z gcc -fno-strict-aliasing -fno-common -dynamic -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk/usr/include -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk/System/Library/Frameworks/Tk.framework/Versions/8.5/Headers -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/local/include -I/usr/local/opt/openssl at 1.1/include -I/usr/local/opt/sqlite/include -I../../port -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts -I../../gnm -I../../apps -I/usr/local/Cellar/python at 2/2.7.17_1/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I. -I/Users/runner/runners/2.263.0/work/gdal/gdal/gdal/include -c gdal_python_cxx11_test.cpp -o gdal_python_cxx11_test.o


It's building gdal_python_cxx11_test.cpp (a C++ file) using gcc (which is not a C++ compiler).

The question is how to get it to build using e.g. g++ instead, including honoring the CXX and CXXFLAGS environment variables.


From gdal at ryandesign.com  Wed Jun 17 18:24:40 2020
From: gdal at ryandesign.com (Ryan Schmidt)
Date: Wed, 17 Jun 2020 20:24:40 -0500
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <CAFgDerF1YkAf7sKrFWmntpHvPHkJSJyJ0V_1TYrwfPLU9woK6Q@mail.gmail.com>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
 <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>
 <CAFgDerFuttoQ-=eNPD9tfNpeSO6w1WwZ10_nzDDVFqiFe3TcWA@mail.gmail.com>
 <6CDB0B7B-64A4-49EC-8E67-420DC5F60907@ryandesign.com>
 <CAFgDerF1YkAf7sKrFWmntpHvPHkJSJyJ0V_1TYrwfPLU9woK6Q@mail.gmail.com>
Message-ID: <4B811AB3-D310-4B6F-B1F7-1FEC5516B9BE@ryandesign.com>

On Jun 17, 2020, at 18:38, Chris Marsh wrote:

> I don't have anything to do with the gdal project, so I don't have a proper answer for you.
> 
> However, I use this project
> https://github.com/nextgis/pygdal
> for using python gdal in my venvs as it behaves much better. 
> 
> It uses setuptools and does C++11 checks, which requires a c++ compiler. Might help you out if you can't get a good answer here.

It looks like there are many changes between the pypi version of gdal that I've been using and the one you referred to above. I don't have anything to do with the gdal project either so I'm not qualified to judge whether those changes are appropriate but my default reaction is to be uncomfortable using forks of software projects, especially when the original version of the project is still active.

Nevertheless I tried building the extension from the code you posted above, and it has the same problem: the C++ code gets built using the C compiler, not the C++ compiler. Do you see a different result when you build it? If so can you tell me more about your system?


From chris.marsh at usask.ca  Thu Jun 18 10:09:31 2020
From: chris.marsh at usask.ca (Chris Marsh)
Date: Thu, 18 Jun 2020 11:09:31 -0600
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <4B811AB3-D310-4B6F-B1F7-1FEC5516B9BE@ryandesign.com>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
 <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>
 <CAFgDerFuttoQ-=eNPD9tfNpeSO6w1WwZ10_nzDDVFqiFe3TcWA@mail.gmail.com>
 <6CDB0B7B-64A4-49EC-8E67-420DC5F60907@ryandesign.com>
 <CAFgDerF1YkAf7sKrFWmntpHvPHkJSJyJ0V_1TYrwfPLU9woK6Q@mail.gmail.com>
 <4B811AB3-D310-4B6F-B1F7-1FEC5516B9BE@ryandesign.com>
Message-ID: <CAFgDerHHmz7ZTQp=PHgfMMzZOQyp9NxAZjJbok6gu8RHc8rPVA@mail.gmail.com>

Hi Ryan,

Agreed. However for working in pyenvs, it 'just works' more reliably.

I'm actually quite interested in this issue as I have python code on pypi
that uses gdal & setuptools.

I note you commented on the setuptools issue here
https://github.com/pypa/setuptools/issues/1732

but there is also this earlier post
https://github.com/pypa/setuptools/issues/1192

>From what I can tell, I agree that CXXFLAGS aren't explicitly handled by
setuptools and it uses gcc/clang instead of the ++ variants. I see clang++
being used for the link invocation though.
However, either gcc/g++ can be used to compile c++ as code, as long as with
gcc the c++ libraries are linked against (which seems to be done
correctly). So other than the CXXFLAGS being ignored, it's perhaps not that
big of a problem (ie, it's still a C++ compiler at the end of the day
https://gcc.gnu.org/onlinedocs/gcc/Invoking-G_002b_002b.html)

I'll use the pygdal example (the one I linked above) as it uses setuptools

If I do
CC=clang++ CXXFLAGS='-std=c++11 -stdlib=libc++' pip -v install
--force-reinstall  pygdal=="`gdal-config --version`.*"

it fails to compile due to C++11 not being enabled

If I do
CC=clang++ CFLAGS='-std=c++11 -stdlib=libc++' pip -v install
--force-reinstall  pygdal=="`gdal-config --version`.*"

then it works as expected and it uses clang++ throughout in the log file.

My read is:
-I don't think this is a GDAL specific problem but a disutils/setuptools
quirk.
- It seems using CFLAGS=$CXXFLAGS would be sufficient to work around the
setuptools/distutils behaviour, but that may not be possible with
macports/your build env.


Cheers
Chris



Cheers
Chris




Chris Marsh, PhD
University of Saskatchewan
chrismarsh.ca



On Wed, Jun 17, 2020 at 7:24 PM Ryan Schmidt <gdal at ryandesign.com> wrote:

> CAUTION: This email originated from outside of the University of
> Saskatchewan. Do not click links or open attachments unless you recognize
> the sender and know the content is safe. If in doubt, please forward
> suspicious emails to phishing at usask.ca
>
>
> On Jun 17, 2020, at 18:38, Chris Marsh wrote:
>
> > I don't have anything to do with the gdal project, so I don't have a
> proper answer for you.
> >
> > However, I use this project
> > https://github.com/nextgis/pygdal
> > for using python gdal in my venvs as it behaves much better.
> >
> > It uses setuptools and does C++11 checks, which requires a c++ compiler.
> Might help you out if you can't get a good answer here.
>
> It looks like there are many changes between the pypi version of gdal that
> I've been using and the one you referred to above. I don't have anything to
> do with the gdal project either so I'm not qualified to judge whether those
> changes are appropriate but my default reaction is to be uncomfortable
> using forks of software projects, especially when the original version of
> the project is still active.
>
> Nevertheless I tried building the extension from the code you posted
> above, and it has the same problem: the C++ code gets built using the C
> compiler, not the C++ compiler. Do you see a different result when you
> build it? If so can you tell me more about your system?
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200618/4ac5ecb5/attachment-0001.html>

From RejectKid at gmail.com  Thu Jun 18 11:19:22 2020
From: RejectKid at gmail.com (RejectKid)
Date: Thu, 18 Jun 2020 11:19:22 -0700 (MST)
Subject: [gdal-dev] How to use Gdal c# bindings with .NET Core
In-Reply-To: <1575745672197-0.post@n6.nabble.com>
References: <1544885397803-0.post@n6.nabble.com>
 <CACALY+Rxirw5zc6UihKrH2=cyJmrVdxChHpA53awxnpK9_nHKg@mail.gmail.com>
 <1544904345953-0.post@n6.nabble.com>
 <CACALY+QfMcG8jEaGW-sCJpZYpzeN_Fp-AxMuFOrVfkEdmpHY2w@mail.gmail.com>
 <1575745672197-0.post@n6.nabble.com>
Message-ID: <1592504362322-0.post@n6.nabble.com>

has there been progress made on .NetStandard support for the gdal nuget
packages?  I see this thread is a little old so I wasnt sure if it was
dropped or not



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From gdal at ryandesign.com  Thu Jun 18 19:40:12 2020
From: gdal at ryandesign.com (Ryan Schmidt)
Date: Thu, 18 Jun 2020 21:40:12 -0500
Subject: [gdal-dev] How to build py-gdal using the C++ compiler
In-Reply-To: <CAFgDerHHmz7ZTQp=PHgfMMzZOQyp9NxAZjJbok6gu8RHc8rPVA@mail.gmail.com>
References: <58FE286F-8C4C-428A-BE73-59DF50EE6C2F@ryandesign.com>
 <1845078.aIMJ9AMLeH@even-i700>
 <A1F8E5D4-FFA6-46C8-BF3F-99EA0FE527DD@ryandesign.com>
 <CAFgDerFuttoQ-=eNPD9tfNpeSO6w1WwZ10_nzDDVFqiFe3TcWA@mail.gmail.com>
 <6CDB0B7B-64A4-49EC-8E67-420DC5F60907@ryandesign.com>
 <CAFgDerF1YkAf7sKrFWmntpHvPHkJSJyJ0V_1TYrwfPLU9woK6Q@mail.gmail.com>
 <4B811AB3-D310-4B6F-B1F7-1FEC5516B9BE@ryandesign.com>
 <CAFgDerHHmz7ZTQp=PHgfMMzZOQyp9NxAZjJbok6gu8RHc8rPVA@mail.gmail.com>
Message-ID: <AFD963F4-2099-45B6-96CA-0CCD6E5A2207@ryandesign.com>



On Jun 18, 2020, at 12:09, Chris Marsh wrote:

> I note you commented on the setuptools issue here
> https://github.com/pypa/setuptools/issues/1732
> 
> but there is also this earlier post
> https://github.com/pypa/setuptools/issues/1192

Thanks, I hadn't seen that one.


> From what I can tell, I agree that CXXFLAGS aren't explicitly handled by setuptools and it uses gcc/clang instead of the ++ variants. I see clang++ being used for the link invocation though.
> However, either gcc/g++ can be used to compile c++ as code, as long as with gcc the c++ libraries are linked against (which seems to be done correctly). So other than the CXXFLAGS being ignored, it's perhaps not that big of a problem (ie, it's still a C++ compiler at the end of the day https://gcc.gnu.org/onlinedocs/gcc/Invoking-G_002b_002b.html)
> 
> I'll use the pygdal example (the one I linked above) as it uses setuptools
> 
> If I do 
> CC=clang++ CXXFLAGS='-std=c++11 -stdlib=libc++' pip -v install --force-reinstall  pygdal=="`gdal-config --version`.*"
> 
> it fails to compile due to C++11 not being enabled
> 
> If I do
> CC=clang++ CFLAGS='-std=c++11 -stdlib=libc++' pip -v install --force-reinstall  pygdal=="`gdal-config --version`.*"
> 
> then it works as expected and it uses clang++ throughout in the log file.
> 
> My read is:
> -I don't think this is a GDAL specific problem but a disutils/setuptools quirk. 

That's what I suspect and GDAL is not the only Python extension with which I am seeing this type of problem. But I've been watching the distutils bug report about this problem* for a long time, waiting for it finally to be resolved. Well now it's fifteen years old and apparently will never be resolved. Before I wait another fifteen years for the setuptools developers to get around to deciding whether to fix this, and possibly then telling me that it's not a setuptools bug after all but something the project is doing wrong in its setup files, I thought I'd ask here. But it sounds like nobody here has really thought about it before because it worked well enough for them so I'll go back to waiting for the setuptools developers to respond.

* https://bugs.python.org/issue1222585


> - It seems using CFLAGS=$CXXFLAGS would be sufficient to work around the setuptools/distutils behaviour, but that may not be possible with macports/your build env. 

It's really not satisfactory.

I'm not comfortable modifying the way that MacPorts compiles *all* Python extensions (even those that aren't written in C++) to use the C++ compiler and CXXFLAGS instead of the C compiler and CFLAGS. I'm not sure what consequences that might have. And I'm not very interested in analyzing the thousands of Python extensions in MacPorts to determine which are written in C++ and modifying their Portfiles for this hack manually.

Some extensions are written partly in C and partly in C++. The build system must arrange for the correct compiler and flags to be used when compiling each file. Anything else is madness. One such extension is libsass and its setup scripts do somehow force the use of the C++ compiler instead of the C compiler for all files. This results in warnings when compiling the C files: "clang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated [-Wdeprecated]" This signifies to me that the build system is doing something wrong.

If it really is a bug in setuptools, as I suspect it is, the focus should be on getting that fixed, not working around it.



From david.bekaert at jpl.nasa.gov  Thu Jun 18 19:49:34 2020
From: david.bekaert at jpl.nasa.gov (Bekaert, David (334H))
Date: Fri, 19 Jun 2020 02:49:34 +0000
Subject: [gdal-dev] netcdf station time-series
Message-ID: <FF4501E3-4234-48C8-AA13-033078BC612A@jpl.nasa.gov>

Dear GDAL developers,

We would like to combine GPS  time-series from various stations (irregular spaced), for which we were considering storing it  as a netcdf time-series product.
http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html#time-series-data
Is there GDAL functionality we could leverage for spatial and temporal subsetting of this station netcdf time-series product?
There seems to be support for temporal raster time-series in GDAL: https://gdal.org/programs/gdalmdimtranslate.html#gdalmdimtranslate

Alternatively, would you recommend a different formatting structure for the GPS time-series which allows us to leverage GDAL capabilities?

Thank you in advance,

Best,
David Bekaert


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200619/ec7ebe2d/attachment.html>

From Stefan.Blumentrath at nina.no  Thu Jun 18 23:46:35 2020
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Fri, 19 Jun 2020 06:46:35 +0000
Subject: [gdal-dev] netcdf station time-series
In-Reply-To: <FF4501E3-4234-48C8-AA13-033078BC612A@jpl.nasa.gov>
References: <FF4501E3-4234-48C8-AA13-033078BC612A@jpl.nasa.gov>
Message-ID: <VI1PR02MB5038E27590DDF84E2900AB9F9E980@VI1PR02MB5038.eurprd02.prod.outlook.com>

Hi David,

Only partly a GDAL solution, but things we use for handling that kind of data are:

The temporal framework in GRASS GIS (where you would leverage GDAL/OGR for import):
https://grasswiki.osgeo.org/wiki/Temporal_data_processing

Or (mostly for vector data), TimescaleDB (building upon PostgreSQL and PostGIS):
https://www.timescale.com/

Cheers,
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Bekaert, David (334H)
Sent: fredag 19. juni 2020 04:50
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] netcdf station time-series

Dear GDAL developers,

We would like to combine GPS  time-series from various stations (irregular spaced), for which we were considering storing it  as a netcdf time-series product.
http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html#time-series-data
Is there GDAL functionality we could leverage for spatial and temporal subsetting of this station netcdf time-series product?
There seems to be support for temporal raster time-series in GDAL: https://gdal.org/programs/gdalmdimtranslate.html#gdalmdimtranslate

Alternatively, would you recommend a different formatting structure for the GPS time-series which allows us to leverage GDAL capabilities?

Thank you in advance,

Best,
David Bekaert


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200619/e827b3a1/attachment-0001.html>

From szekerest at gmail.com  Sat Jun 20 05:04:41 2020
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 20 Jun 2020 14:04:41 +0200
Subject: [gdal-dev] How to convert GDAL Vector dataset to memory stream
In-Reply-To: <1592411868039-0.post@n6.nabble.com>
References: <1592411868039-0.post@n6.nabble.com>
Message-ID: <CACALY+T-CdUs2+f=vThmEsTQ0xAxDBPO+JZfYe62-5NJ6RjigQ@mail.gmail.com>

Hi,

You could use a pre-allocated array to fill data from a GDAL dataset/bands.
The following examples could be used as a reference:

1. Read raster bands into separate byte arrays:

https://github.com/OSGeo/gdal/blob/master/gdal/swig/csharp/apps/GDALRead.cs#L139


 2. Read raster bands into bitmap data

https://github.com/OSGeo/gdal/blob/ecd7ed1420aa07691f88aca66ea8a13af38433f2/gdal/swig/csharp/apps/GDALReadDirect.cs#L140

3. Read dataset into bitmap data

https://github.com/OSGeo/gdal/blob/ecd7ed1420aa07691f88aca66ea8a13af38433f2/gdal/swig/csharp/apps/GDALDatasetRasterIO.cs#L116

Best regards,

Tamas



MRRAJESH <rajeshreddy82 at gmail.com> ezt írta (időpont: 2020. jún. 17., Sze,
18:39):

> Hello list,
>
> I'm using GDAL via swig C# bindings. Is there a way to create memory stream
> from gdal vector dataset. If so, how  can I achieve this.
>
> Thanks in advance
> Rajesh
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200620/868db98a/attachment.html>

From rajeshreddy82 at gmail.com  Sat Jun 20 22:10:54 2020
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Sat, 20 Jun 2020 22:10:54 -0700 (MST)
Subject: [gdal-dev] How to convert GDAL Vector dataset to memory stream
In-Reply-To: <CACALY+T-CdUs2+f=vThmEsTQ0xAxDBPO+JZfYe62-5NJ6RjigQ@mail.gmail.com>
References: <1592411868039-0.post@n6.nabble.com>
 <CACALY+T-CdUs2+f=vThmEsTQ0xAxDBPO+JZfYe62-5NJ6RjigQ@mail.gmail.com>
Message-ID: <1592716254615-0.post@n6.nabble.com>

Hi Tamas,

Thanks for your suggestions. Will it work for MVT memory dataset?

We have an MVT memory dataset with us. How to convert this to memory stream.

*Example: *
.....
var vsibuf = string.Format(@"/vsimem/mvt");
var newDs = Gdal.wrapper_GDALVectorTranslateDestName(vsibuf, ds1,
gdalOptions, null, null);
newDs.Dispose();

string filePath = string.Format("{0}\\{1}\\{2}\\{3}.mvt", vsibuf, 18, 66027,
96262);

We tried below ways:

*Way1:*
 
Dataset ds = Gdal.OpenEx(filePath, 0, null, open_options, null);
 
How to convert a dataset (ds) to memory stream?
 
*Way2:*
 
var bufPtr = Gdal.VSIFOpenL(filePath, "rb");
        if (bufPtr != null)
        {
          Gdal.VSIFSeekL(bufPtr, 0, 2); // seek to end
          var contentSize = Gdal.VSIFTellL(bufPtr1);
          Gdal.VSIFSeekL(bufPtr1, 0, 0); // seek to beginning 
          var data = new byte[contentSize];
          var content = VSIFReadL(1, contentSize, bufPtr); // This method is
not available in C#.
    }
 
How to get content here?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From szekerest at gmail.com  Sun Jun 21 02:24:23 2020
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 21 Jun 2020 11:24:23 +0200
Subject: [gdal-dev] How to convert GDAL Vector dataset to memory stream
In-Reply-To: <1592716254615-0.post@n6.nabble.com>
References: <1592411868039-0.post@n6.nabble.com>
 <CACALY+T-CdUs2+f=vThmEsTQ0xAxDBPO+JZfYe62-5NJ6RjigQ@mail.gmail.com>
 <1592716254615-0.post@n6.nabble.com>
Message-ID: <CACALY+QPiAT+i-rvA_Kfg76reu-oWxkjkt881RBGS7C+ZJn5vg@mail.gmail.com>

Hi,

MVT is a vector format, so you should use OGR to manipulate it.
To open the OGR format and iterate the features on a layer refer to the
following c# example:

https://github.com/OSGeo/gdal/blob/master/gdal/swig/csharp/apps/ogrinfo.cs

Also refer to the MVT driver information page, how the connection string
should look like and which open options can be used.

https://gdal.org/drivers/vector/mvt.html

Best regards,

Tamas


MRRAJESH <rajeshreddy82 at gmail.com> ezt írta (időpont: 2020. jún. 21., V,
7:11):

> Hi Tamas,
>
> Thanks for your suggestions. Will it work for MVT memory dataset?
>
> We have an MVT memory dataset with us. How to convert this to memory
> stream.
>
> *Example: *
> .....
> var vsibuf = string.Format(@"/vsimem/mvt");
> var newDs = Gdal.wrapper_GDALVectorTranslateDestName(vsibuf, ds1,
> gdalOptions, null, null);
> newDs.Dispose();
>
> string filePath = string.Format("{0}\\{1}\\{2}\\{3}.mvt", vsibuf, 18,
> 66027,
> 96262);
>
> We tried below ways:
>
> *Way1:*
>
> Dataset ds = Gdal.OpenEx(filePath, 0, null, open_options, null);
>
> How to convert a dataset (ds) to memory stream?
>
> *Way2:*
>
> var bufPtr = Gdal.VSIFOpenL(filePath, "rb");
>         if (bufPtr != null)
>         {
>           Gdal.VSIFSeekL(bufPtr, 0, 2); // seek to end
>           var contentSize = Gdal.VSIFTellL(bufPtr1);
>           Gdal.VSIFSeekL(bufPtr1, 0, 0); // seek to beginning
>           var data = new byte[contentSize];
>           var content = VSIFReadL(1, contentSize, bufPtr); // This method
> is
> not available in C#.
>     }
>
> How to get content here?
>
> Regards,
> Rajesh
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200621/775c9e56/attachment.html>

From rajeshreddy82 at gmail.com  Sun Jun 21 07:59:53 2020
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Sun, 21 Jun 2020 07:59:53 -0700 (MST)
Subject: [gdal-dev] How to convert GDAL Vector dataset to memory stream
In-Reply-To: <CACALY+QPiAT+i-rvA_Kfg76reu-oWxkjkt881RBGS7C+ZJn5vg@mail.gmail.com>
References: <1592411868039-0.post@n6.nabble.com>
 <CACALY+T-CdUs2+f=vThmEsTQ0xAxDBPO+JZfYe62-5NJ6RjigQ@mail.gmail.com>
 <1592716254615-0.post@n6.nabble.com>
 <CACALY+QPiAT+i-rvA_Kfg76reu-oWxkjkt881RBGS7C+ZJn5vg@mail.gmail.com>
Message-ID: <1592751593455-0.post@n6.nabble.com>

Thanks Tamas for your information.

I am able to open the MVT data file using OGR. I have referred your example
and able to check the layer names and features.
My requirement is: I need to return this entire MVT data i.e., datasource in
stream format. How to achieve this?

In one of the GDAL-DEV thead, Even Rouault mentioned that "you should be
able to read that in-memory file with gdal.VSIFOpenL() and read
its content with gdal.VSIFReadL(). However I'm not sure that the C# bindings
have been updated to support those VSIF*L functions."

In Python and C++, VSIFReadL() is there to get the data. How to achieve the
same in C#?





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Jun 22 02:08:40 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jun 2020 11:08:40 +0200
Subject: [gdal-dev] GDAL 3.1.1 RC1 available
Message-ID: <2062054.jmGNPAkrgz@even-i700>

Hi,

I have prepared a GDAL/OGR 3.1.1 release candidate.

Pick up an archive among the following ones (by ascending size):

  https://download.osgeo.org/gdal/3.1.1/gdal-3.1.1rc1.tar.xz
  https://download.osgeo.org/gdal/3.1.1/gdal-3.1.1rc1.tar.gz
  https://download.osgeo.org/gdal/3.1.1/gdal311rc1.zip

A snapshot of the gdalautotest suite is also available :

  https://download.osgeo.org/gdal/3.1.1/gdalautotest-3.1.1rc1.tar.gz
  https://download.osgeo.org/gdal/3.1.1/gdalautotest-3.1.1rc1.zip

GDAL-GRASS plugin (unmodified):

  https://download.osgeo.org/gdal/3.1.1/gdal-grass-3.1.1.tar.gz

The NEWS file is here :

  https://github.com/OSGeo/gdal/blob/v3.1.1RC1/gdal/NEWS

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200622/bcf154bf/attachment.html>

From julien.osman at csgroup.eu  Mon Jun 22 11:53:37 2020
From: julien.osman at csgroup.eu (Julien Osman)
Date: Mon, 22 Jun 2020 20:53:37 +0200
Subject: [gdal-dev] Using ReadXMLToList with debian's package
Message-ID: <2a198aef-c2c3-5bfb-8dc4-d07aef98121a@csgroup.eu>

Dear GDAL developers community,

I am using the "ReadXMLToList" method from the "GDALMDReaderBase" class[1]. In my
development environment (with GDAL compiled by myself), it works
perfectly. But when want to compile my application on debian using the
package libgdal-dev[2], the linker can't find the symbols related to the
"GDALMDReaderBase" class. Do you know why "libgdal.so" from debian's package doesn't contain all the symbols ?
Don't you think that "ReadXMLToList", which is a static method, could be useful with other XML manipulation methods in "cpl_minixml.h"[3] ?

Best regards,
Julien.

[1] https://gdal.org/doxygen/classGDALMDReaderBase.html
[2] https://packages.debian.org/buster/libgdal-dev
[3] https://gdal.org/api/cpl.html#cpl-minixml-h

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200622/623e36df/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x7A839B7CD5BAD6D5.asc
Type: application/pgp-keys
Size: 3187 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200622/623e36df/attachment.key>

From even.rouault at spatialys.com  Mon Jun 22 12:17:38 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jun 2020 21:17:38 +0200
Subject: [gdal-dev] Using ReadXMLToList with debian's package
In-Reply-To: <2a198aef-c2c3-5bfb-8dc4-d07aef98121a@csgroup.eu>
References: <2a198aef-c2c3-5bfb-8dc4-d07aef98121a@csgroup.eu>
Message-ID: <16093580.ZZmd2xfaBe@even-i700>

Julien,

> I am using the "ReadXMLToList" method from the "GDALMDReaderBase" class[1].
> In my development environment (with GDAL compiled by myself), it works
> perfectly. But when want to compile my application on debian using the
> package libgdal-dev[2], the linker can't find the symbols related to the
> "GDALMDReaderBase" class. Do you know why "libgdal.so" from debian's package
> doesn't contain all the symbols ?

It uses the --with-hide-internal-symbols switch to avoid exporting non-public symbols, such as 
the ones of GDALMDReaderBase, which is an implementation detail of GDAL

> Don't you think that "ReadXMLToList",
> which is a static method, 

(it isn't actually a static method) As far as I can see, you can get the result of the parsing of 
those XML side-car files, mainly in the "IMD" metadata domain of the dataset

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200622/c382c5f8/attachment.html>

From thiemo at gelassene-pferde.biz  Tue Jun 23 00:27:36 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Tue, 23 Jun 2020 09:27:36 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
Message-ID: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>

Hi

I am new to spacial data processing. For a project of mine I try to  
load swedish climate data in to my PostGIS installation running/using  
an openSUSE Tumbleweed installation.

I downloaded the data from  
https://www.smhi.se/pd/klimat/rcp_scenario/scid/SCID_v4.0.gdb.zip  
unzipped it and tried to load the data by

ogr2ogr –f "PostgreSQL" \
         -overwrite \
         –progress \
          --config PG_USE_COPY YES \
          "PG:host='/var/run/postgresql' port='6543' dbname='sverige'  
user='sverige'" \
          SCID_v4.0.gdb/gdb

But I receive the error "Unable to open datasource `PostgreSQL' with  
the following drivers." (Find the full error message at the bottom.

I tried to outsmart by workaround over shp file

ogr2ogr –f "ESRI Shapefile" \
         -overwrite \
         –progress \
          SCID_v4.0.gdb/gdb.shp \
          SCID_v4.0.gdb/gdb

but have been thwarted receiving the analogous error there too.

I would appreciate help a great deal.

Kind regards

Thiemo



FAILURE:
Unable to open datasource `PostgreSQL' with the following drivers.
   -> `PCIDSK'
   -> `netCDF'
   -> `PDS4'
   -> `JP2OpenJPEG'
   -> `PDF'
   -> `MBTiles'
   -> `EEDA'
   -> `ESRI Shapefile'
   -> `MapInfo File'
   -> `UK .NTF'
   -> `OGR_SDTS'
   -> `S57'
   -> `DGN'
   -> `OGR_VRT'
   -> `REC'
   -> `Memory'
   -> `BNA'
   -> `CSV'
   -> `NAS'
   -> `GML'
   -> `GPX'
   -> `KML'
   -> `GeoJSON'
   -> `GeoJSONSeq'
   -> `ESRIJSON'
   -> `TopoJSON'
   -> `Interlis 1'
   -> `Interlis 2'
   -> `OGR_GMT'
   -> `GPKG'
   -> `SQLite'
   -> `ODBC'
   -> `WAsP'
   -> `PGeo'
   -> `MSSQLSpatial'
   -> `PostgreSQL'
   -> `MySQL'
   -> `OpenFileGDB'
   -> `XPlane'
   -> `DXF'
   -> `CAD'
   -> `Geoconcept'
   -> `GeoRSS'
   -> `GPSTrackMaker'
   -> `VFK'
   -> `PGDUMP'
   -> `OSM'
   -> `GPSBabel'
   -> `SUA'
   -> `OpenAir'
   -> `OGR_PDS'
   -> `WFS'
   -> `WFS3'
   -> `HTF'
   -> `AeronavFAA'
   -> `Geomedia'
   -> `EDIGEO'
   -> `GFT'
   -> `SVG'
   -> `CouchDB'
   -> `Cloudant'
   -> `Idrisi'
   -> `ARCGEN'
   -> `SEGUKOOA'
   -> `SEGY'
   -> `XLS'
   -> `ODS'
   -> `XLSX'
   -> `ElasticSearch'
   -> `Walk'
   -> `Carto'
   -> `AmigoCloud'
   -> `SXF'
   -> `Selafin'
   -> `JML'
   -> `PLSCENES'
   -> `CSW'
   -> `VDV'
   -> `GMLAS'
   -> `MVT'
   -> `TIGER'
   -> `AVCBin'
   -> `AVCE00'
   -> `NGW'
   -> `HTTP'

-- 
S/MIME Public Key: https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/bad046ca/attachment.bin>

From bo.victor.thomsen at gmail.com  Tue Jun 23 01:11:09 2020
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Tue, 23 Jun 2020 10:11:09 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
Message-ID: <32b67519-9ffc-8d5f-3abf-dac0606c2d7c@gmail.com>

Try change the line:

"PG:host='/var/run/postgresql' port='6543' dbname='sverige' 
user='sverige'" \

to:

"PG:host='localhost' port='6543' dbname='sverige' user='sverige'" \

And:

Is port really 6543, not 5432 ?

What about the password ?, i.e something like: "PG:host='localhost' 
port='6543' dbname='sverige' user='sverige' password='supersecret'" \


-- 
Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 23-06-2020 kl. 09:27 skrev Thiemo Kellner:
> Hi
>
> I am new to spacial data processing. For a project of mine I try to 
> load swedish climate data in to my PostGIS installation running/using 
> an openSUSE Tumbleweed installation.
>
> I downloaded the data from 
> https://www.smhi.se/pd/klimat/rcp_scenario/scid/SCID_v4.0.gdb.zip 
> unzipped it and tried to load the data by
>
> ogr2ogr –f "PostgreSQL" \
>         -overwrite \
>         –progress \
>          --config PG_USE_COPY YES \
>          "PG:host='/var/run/postgresql' port='6543' dbname='sverige' 
> user='sverige'" \
>          SCID_v4.0.gdb/gdb
>
> But I receive the error "Unable to open datasource `PostgreSQL' with 
> the following drivers." (Find the full error message at the bottom.
>
> I tried to outsmart by workaround over shp file
>
> ogr2ogr –f "ESRI Shapefile" \
>         -overwrite \
>         –progress \
>          SCID_v4.0.gdb/gdb.shp \
>          SCID_v4.0.gdb/gdb
>
> but have been thwarted receiving the analogous error there too.
>
> I would appreciate help a great deal.
>
> Kind regards
>
> Thiemo
>
>
>
> FAILURE:
> Unable to open datasource `PostgreSQL' with the following drivers.
>   -> `PCIDSK'
>   -> `netCDF'
>   -> `PDS4'
>   -> `JP2OpenJPEG'
>   -> `PDF'
>   -> `MBTiles'
>   -> `EEDA'
>   -> `ESRI Shapefile'
>   -> `MapInfo File'
>   -> `UK .NTF'
>   -> `OGR_SDTS'
>   -> `S57'
>   -> `DGN'
>   -> `OGR_VRT'
>   -> `REC'
>   -> `Memory'
>   -> `BNA'
>   -> `CSV'
>   -> `NAS'
>   -> `GML'
>   -> `GPX'
>   -> `KML'
>   -> `GeoJSON'
>   -> `GeoJSONSeq'
>   -> `ESRIJSON'
>   -> `TopoJSON'
>   -> `Interlis 1'
>   -> `Interlis 2'
>   -> `OGR_GMT'
>   -> `GPKG'
>   -> `SQLite'
>   -> `ODBC'
>   -> `WAsP'
>   -> `PGeo'
>   -> `MSSQLSpatial'
>   -> `PostgreSQL'
>   -> `MySQL'
>   -> `OpenFileGDB'
>   -> `XPlane'
>   -> `DXF'
>   -> `CAD'
>   -> `Geoconcept'
>   -> `GeoRSS'
>   -> `GPSTrackMaker'
>   -> `VFK'
>   -> `PGDUMP'
>   -> `OSM'
>   -> `GPSBabel'
>   -> `SUA'
>   -> `OpenAir'
>   -> `OGR_PDS'
>   -> `WFS'
>   -> `WFS3'
>   -> `HTF'
>   -> `AeronavFAA'
>   -> `Geomedia'
>   -> `EDIGEO'
>   -> `GFT'
>   -> `SVG'
>   -> `CouchDB'
>   -> `Cloudant'
>   -> `Idrisi'
>   -> `ARCGEN'
>   -> `SEGUKOOA'
>   -> `SEGY'
>   -> `XLS'
>   -> `ODS'
>   -> `XLSX'
>   -> `ElasticSearch'
>   -> `Walk'
>   -> `Carto'
>   -> `AmigoCloud'
>   -> `SXF'
>   -> `Selafin'
>   -> `JML'
>   -> `PLSCENES'
>   -> `CSW'
>   -> `VDV'
>   -> `GMLAS'
>   -> `MVT'
>   -> `TIGER'
>   -> `AVCBin'
>   -> `AVCE00'
>   -> `NGW'
>   -> `HTTP'
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/b3b750d9/attachment-0001.html>

From thiemo at gelassene-pferde.biz  Tue Jun 23 02:24:38 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Tue, 23 Jun 2020 11:24:38 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <32b67519-9ffc-8d5f-3abf-dac0606c2d7c@gmail.com>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <32b67519-9ffc-8d5f-3abf-dac0606c2d7c@gmail.com>
Message-ID: <20200623112438.Horde.DoPLTqfWDwCQoNIJh8NwX8A@webmail.gelassene-pferde.biz>

  Hei Bo

Thanks for your suggestions. Unfortunately without effect.

The port is ok. I made a parallel PostgreSQL instance on a external  
HDD. I tryed to use socket for efficiency. I use .pgpass file because  
I am lazy . However, even when giving the password explicitely the  
result is the same.

I checked the DB log and I do not see the command hitting the database...

Hjertelig hilsen

Thiemo

Quoting Bo Victor Thomsen <bo.victor.thomsen at gmail.com>:

> Try change the line:
>
>   "PG:host='/var/run/postgresql' port='6543' dbname='sverige'  
> user='sverige'" \
>
>   to:
>
>   "PG:host='localhost' port='6543' dbname='sverige' user='sverige'" \
>
>   And:
>
>   Is port really 6543, not 5432 ?
>
>   What about the password ?, i.e something like:   
> "PG:host='localhost' port='6543' dbname='sverige' user='sverige'  
> password='supersecret'" \
>
>    
>
>    
> --  Med venlig hilsen / Kind regards  Bo Victor Thomsen
  S/MIME Public Key:
https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/5d59845c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wink_smile.gif
Type: image/gif
Size: 458 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/5d59845c/attachment.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/5d59845c/attachment.bin>

From julien.osman at csgroup.eu  Tue Jun 23 04:31:53 2020
From: julien.osman at csgroup.eu (Julien Osman)
Date: Tue, 23 Jun 2020 13:31:53 +0200
Subject: [gdal-dev] Using ReadXMLToList with debian's package
In-Reply-To: <16093580.ZZmd2xfaBe@even-i700>
References: <2a198aef-c2c3-5bfb-8dc4-d07aef98121a@csgroup.eu>
 <16093580.ZZmd2xfaBe@even-i700>
Message-ID: <787dc217-ec3b-fff1-2262-bc4f22d73a96@csgroup.eu>

Dear Even,

Thank you for your answer.

>  > I am using the "ReadXMLToList" method from the "GDALMDReaderBase"
> class[1].
>
> > In my development environment (with GDAL compiled by myself), it works
>
> > perfectly. But when want to compile my application on debian using the
>
> > package libgdal-dev[2], the linker can't find the symbols related to the
>
> > "GDALMDReaderBase" class. Do you know why "libgdal.so" from debian's
> package
>
> > doesn't contain all the symbols ?
>
>  
>
> It uses the --with-hide-internal-symbols switch to avoid exporting
> non-public symbols, such as the ones of GDALMDReaderBase, which is an
> implementation detail of GDAL
>
This "implementation detail" could be used in other contexts. I
understand GDAL doesn't have for purpose to provide a XML parser. But
this function is used to convert a XML file to a StringList, which is a
GDAL object. I think it would make sens to make that function accessible.
>
>  
>
> > Don't you think that "ReadXMLToList",
>
> > which is a static method,
>
>  
>
> (it isn't actually a static method) As far as I can see, you can get
> the result of the parsing of those XML side-car files, mainly in the
> "IMD" metadata domain of the dataset
>
You are right, this is not a static method. However, it only depends on
the class method "AddXMLNameValueToList" which is defined by a single
line of code. So, this method could easily be made static.

Anyway, I leave this to your good judgement, and I will adapt according
to your decision.

Best regards. Julien :)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/f9df7fdd/attachment.html>

From jmckenna at gatewaygeomatics.com  Tue Jun 23 05:46:18 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 23 Jun 2020 09:46:18 -0300
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
Message-ID: <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>

Hi Thiemo!

I have downloaded your data, to hopefully show you how I would tackle this.

First thing is to take this in very small steps, to confirm along the 
way, otherwise you jump to ogr2ogr without confirming that it is even 
possible on your system - in other words, live by *ogrinfo*, ogrinfo is 
your friend, and only move to ogr2ogr once you have ogrinfo happy, and 
then later use ogrinfo again for confirmation.

Here are my notes, I've made comments with the # symbol, and I should 
also mention that I am testing on Windows, with MS4W, so sometimes the 
exact command may slightly change (such as a single quote instead of a 
double quote in a command, on Linux systems) :

create database
---------------

#must first create an empty db (named 'scid' here), and load the PostGIS 
extension
createdb -U postgres -p 5436 -E UTF8 scid
psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis;"
psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis_topology;"

ogrinfo
-------

#verify that your local GDAL/OGR is built with PostGIS and FileGDB support
ogrinfo --formats

     PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
     MySQL -vector- (rw+): MySQL
     OpenFileGDB -vector- (rov): ESRI FileGDB
     XPlane -vector- (rov): X-Plane/Flightgear aeronautical data
     DXF -vector- (rw+v): AutoCAD DXF

#connect to your new database (see params for the PG driver at 
https://gdal.org/drivers/vector/pg.html )
ogrinfo PG:"host=localhost user=postgres password=postgres port=5436 
dbname=scid"

   INFO: Open of `PG:host=localhost user=postgres password=postgres 
port=5436 dbname=scid'
       using driver `PostgreSQL' successful.

#we're in business, no errors, yet no spatial tables listed yet, because 
there is none

#examine the file geodatabase
ogrinfo SCID_v4.0.gdb

INFO: Open of `SCID_v4.0.gdb'
       using driver `OpenFileGDB' successful.

#in my case, MS4W uses the 'OpenFileGDB' driver, but the 'FileGDB' 
driver is also possible

#356 layers should be listed there, with their layer names.  I'll use 
the last layer listed in the long list:

    356: HBVSv_MLSM_rcp85_ensembleMax_abs (Multi Polygon)

#so the layer name is 'HBVSv_MLSM_rcp85_ensembleMax_abs'

#examine the single layer through OGR/GDAL
ogrinfo SCID_v4.0.gdb HBVSv_MLSM_rcp85_ensembleMax_abs -summary

   - lists that there are 1103 features in that layer
   - EPSG (projection): https://epsg.io/3006

ogr2ogr
-------

#now you are ready to use ogr2ogr to bring the FileGDB layer into your 
empty PG/PostGIS database
ogr2ogr -f PostgreSQL PG:"host=localhost user=postgres password=postgres 
port=5436 dbname=scid" SCID_v4.0.gdb HBVSv_MLSM_rcp85_ensembleMax_abs

ogrinfo
-------

#use ogrinfo to confirm that the new spatial layer exists in your PG 
database
ogrinfo PG:"host=localhost user=postgres password=postgres port=5436 
dbname=scid"

  - should list your new layer 'hbvsv_mlsm_rcp85_ensemblemax_abs'

#examine your new layer
ogrinfo PG:"host=localhost user=postgres password=postgres port=5436 
dbname=scid" hbvsv_mlsm_rcp85_ensemblemax_abs -summary



Hope this helps.  Welcome to the FOSS4G community!

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/




On 2020-06-23 4:27 a.m., Thiemo Kellner wrote:
> Hi
> 
> I am new to spacial data processing. For a project of mine I try to load 
> swedish climate data in to my PostGIS installation running/using an 
> openSUSE Tumbleweed installation.
> 



From thiemo at gelassene-pferde.biz  Tue Jun 23 13:35:15 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Tue, 23 Jun 2020 22:35:15 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
Message-ID: <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>

Hi Jeff

Thank you for sharing your steps. I tried to follow them and had an  
insight though I am still stuck. I noticed that I was passing the gdb  
file within the unzipped folder to ogr2ogr whereas you passed the  
folder path. Switching to your pattern it looks as follows.

thiemo @ thiemos-toshi /mnt/schweden % ogrinfo --formats | grep -i postg
   PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
   PGDUMP -vector- (w+v): PostgreSQL SQL dump
# PostGIS capabilities of ogrinfo proven

thiemo @ thiemos-toshi /mnt/schweden % ogrinfo  
PG:"host='/var/run/postgresql' port='6543' dbname='sverige'  
user='sverige'"
INFO: Open of `PG:host='/var/run/postgresql' port='6543'  
dbname='sverige' user='sverige''
       using driver `PostgreSQL' successful.
1: tiger.county (Multi Polygon)
2: tiger.state (Multi Polygon)
...
# Connection to PostGIS works

thiemo @ thiemos-toshi /mnt/schweden % ogrinfo SCID_v4.0.gdb
INFO: Open of `SCID_v4.0.gdb'
       using driver `OpenFileGDB' successful.
1: HBVSv_intrans_HQloc100_rcp45_ensembleMean_diffPerc (Multi Polygon)
2: HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc (Multi Polygon)
...
# Proven to be able to read the gdb file(s)

thiemo @ thiemos-toshi /mnt/schweden % ogrinfo SCID_v4.0.gdb  
HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc -summary
INFO: Open of `SCID_v4.0.gdb'
       using driver `OpenFileGDB' successful.

Layer name: HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
Geometry: Multi Polygon
Feature Count: 1103
...
# Proven to be able to access a specific layer in the gdb

thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL"  
-overwrite –progress --config PG_USE_COPY YES  
PG:"host='/var/run/postgresql' port='5432' dbname='sverige'  
user='sverige'" SCID_v4.0.gdb  
HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
FAILURE:
Unable to open datasource `PostgreSQL' with the following drivers.
   -> `PCIDSK'
...
# UNABLE TO USE ogr2ogr TO WRITE DATA TO MY PostGIS

thiemo @ thiemos-toshi /mnt/schweden :-( % ogr2ogr –f "ESRI Shapefile"  
test.shp SCID_v4.0.gdb/gdb.shp SCID_v4.0.gdb  
HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
FAILURE:
Unable to open datasource `ESRI Shapefile' with the following drivers.
   -> `PCIDSK'
...
# To me it seems that I am not able to use ogr2ogr eventhough I can  
ogrinfo shape files
thiemo @ thiemos-toshi /mnt/schweden % ogrinfo --formats | grep -i esri
   ESRI Shapefile -vector- (rw+v): ESRI Shapefile
   ESRIJSON -vector- (rov): ESRIJSON
   PGeo -vector- (ro): ESRI Personal GeoDatabase
   OpenFileGDB -vector- (rov): ESRI FileGDB

I am pritty lost.

Kind regards

Thiemo

Quoting Jeff McKenna <jmckenna at gatewaygeomatics.com>:

> Hi Thiemo!
>
> I have downloaded your data, to hopefully show you how I would tackle this.
>
> First thing is to take this in very small steps, to confirm along  
> the way, otherwise you jump to ogr2ogr without confirming that it is  
> even possible on your system - in other words, live by *ogrinfo*,  
> ogrinfo is your friend, and only move to ogr2ogr once you have  
> ogrinfo happy, and then later use ogrinfo again for confirmation.
>
> Here are my notes, I've made comments with the # symbol, and I  
> should also mention that I am testing on Windows, with MS4W, so  
> sometimes the exact command may slightly change (such as a single  
> quote instead of a double quote in a command, on Linux systems) :
>
> create database
> ---------------
>
> #must first create an empty db (named 'scid' here), and load the  
> PostGIS extension
> createdb -U postgres -p 5436 -E UTF8 scid
> psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis;"
> psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis_topology;"
>
> ogrinfo
> -------
>
> #verify that your local GDAL/OGR is built with PostGIS and FileGDB support
> ogrinfo --formats
>
>     PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
>     MySQL -vector- (rw+): MySQL
>     OpenFileGDB -vector- (rov): ESRI FileGDB
>     XPlane -vector- (rov): X-Plane/Flightgear aeronautical data
>     DXF -vector- (rw+v): AutoCAD DXF
>
> #connect to your new database (see params for the PG driver at  
> https://gdal.org/drivers/vector/pg.html )
> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436  
> dbname=scid"
>
>   INFO: Open of `PG:host=localhost user=postgres password=postgres  
> port=5436 dbname=scid'
>       using driver `PostgreSQL' successful.
>
> #we're in business, no errors, yet no spatial tables listed yet,  
> because there is none
>
> #examine the file geodatabase
> ogrinfo SCID_v4.0.gdb
>
> INFO: Open of `SCID_v4.0.gdb'
>       using driver `OpenFileGDB' successful.
>
> #in my case, MS4W uses the 'OpenFileGDB' driver, but the 'FileGDB'  
> driver is also possible
>
> #356 layers should be listed there, with their layer names.  I'll  
> use the last layer listed in the long list:
>
>    356: HBVSv_MLSM_rcp85_ensembleMax_abs (Multi Polygon)
>
> #so the layer name is 'HBVSv_MLSM_rcp85_ensembleMax_abs'
>
> #examine the single layer through OGR/GDAL
> ogrinfo SCID_v4.0.gdb HBVSv_MLSM_rcp85_ensembleMax_abs -summary
>
>   - lists that there are 1103 features in that layer
>   - EPSG (projection): https://epsg.io/3006
>
> ogr2ogr
> -------
>
> #now you are ready to use ogr2ogr to bring the FileGDB layer into  
> your empty PG/PostGIS database
> ogr2ogr -f PostgreSQL PG:"host=localhost user=postgres  
> password=postgres port=5436 dbname=scid" SCID_v4.0.gdb  
> HBVSv_MLSM_rcp85_ensembleMax_abs
>
> ogrinfo
> -------
>
> #use ogrinfo to confirm that the new spatial layer exists in your PG database
> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436  
> dbname=scid"
>
>  - should list your new layer 'hbvsv_mlsm_rcp85_ensemblemax_abs'
>
> #examine your new layer
> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436  
> dbname=scid" hbvsv_mlsm_rcp85_ensemblemax_abs -summary
>
>
>
> Hope this helps.  Welcome to the FOSS4G community!
>
> -jeff
>
>
> -- 
> Jeff McKenna
> MapServer Consulting and Training Services
> co-founder of FOSS4G
> http://gatewaygeo.com/
>
>
>
>
> On 2020-06-23 4:27 a.m., Thiemo Kellner wrote:
>> Hi
>>
>> I am new to spacial data processing. For a project of mine I try to  
>> load swedish climate data in to my PostGIS installation  
>> running/using an openSUSE Tumbleweed installation.
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
S/MIME Public Key: https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/9dd9931b/attachment.bin>

From jmckenna at gatewaygeomatics.com  Tue Jun 23 14:11:45 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 23 Jun 2020 18:11:45 -0300
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
 <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
Message-ID: <258e169d-3c62-b014-2c93-11025b05c54c@gatewaygeomatics.com>

Hi Thiemo,

What if you following my steps and create a new database (sverige2), 
then connect to that empty database with ogrinfo, and then try ogr2ogr 
on that new empty db.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/



On 2020-06-23 5:35 p.m., Thiemo Kellner wrote:
> Hi Jeff
> 
> Thank you for sharing your steps. I tried to follow them and had an 
> insight though I am still stuck. I noticed that I was passing the gdb 
> file within the unzipped folder to ogr2ogr whereas you passed the folder 
> path. Switching to your pattern it looks as follows.
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogrinfo --formats | grep -i postg
>    PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
>    PGDUMP -vector- (w+v): PostgreSQL SQL dump
> # PostGIS capabilities of ogrinfo proven
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogrinfo 
> PG:"host='/var/run/postgresql' port='6543' dbname='sverige' user='sverige'"
> INFO: Open of `PG:host='/var/run/postgresql' port='6543' 
> dbname='sverige' user='sverige''
>        using driver `PostgreSQL' successful.
> 1: tiger.county (Multi Polygon)
> 2: tiger.state (Multi Polygon)
> ...
> # Connection to PostGIS works
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogrinfo SCID_v4.0.gdb
> INFO: Open of `SCID_v4.0.gdb'
>        using driver `OpenFileGDB' successful.
> 1: HBVSv_intrans_HQloc100_rcp45_ensembleMean_diffPerc (Multi Polygon)
> 2: HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc (Multi Polygon)
> ...
> # Proven to be able to read the gdb file(s)
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogrinfo SCID_v4.0.gdb 
> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc -summary
> INFO: Open of `SCID_v4.0.gdb'
>        using driver `OpenFileGDB' successful.
> 
> Layer name: HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> Geometry: Multi Polygon
> Feature Count: 1103
> ...
> # Proven to be able to access a specific layer in the gdb
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL" 
> -overwrite –progress --config PG_USE_COPY YES 
> PG:"host='/var/run/postgresql' port='5432' dbname='sverige' 
> user='sverige'" SCID_v4.0.gdb 
> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> FAILURE:
> Unable to open datasource `PostgreSQL' with the following drivers.
>    -> `PCIDSK'
> ...
> # UNABLE TO USE ogr2ogr TO WRITE DATA TO MY PostGIS
> 
> thiemo @ thiemos-toshi /mnt/schweden :-( % ogr2ogr –f "ESRI Shapefile" 
> test.shp SCID_v4.0.gdb/gdb.shp SCID_v4.0.gdb 
> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> FAILURE:
> Unable to open datasource `ESRI Shapefile' with the following drivers.
>    -> `PCIDSK'
> ...
> # To me it seems that I am not able to use ogr2ogr eventhough I can 
> ogrinfo shape files
> thiemo @ thiemos-toshi /mnt/schweden % ogrinfo --formats | grep -i esri
>    ESRI Shapefile -vector- (rw+v): ESRI Shapefile
>    ESRIJSON -vector- (rov): ESRIJSON
>    PGeo -vector- (ro): ESRI Personal GeoDatabase
>    OpenFileGDB -vector- (rov): ESRI FileGDB
> 
> I am pritty lost.
> 
> Kind regards
> 
> Thiemo
> 
> Quoting Jeff McKenna <jmckenna at gatewaygeomatics.com>:
> 
>> Hi Thiemo!
>>
>> I have downloaded your data, to hopefully show you how I would tackle 
>> this.
>>
>> First thing is to take this in very small steps, to confirm along the 
>> way, otherwise you jump to ogr2ogr without confirming that it is even 
>> possible on your system - in other words, live by *ogrinfo*, ogrinfo 
>> is your friend, and only move to ogr2ogr once you have ogrinfo happy, 
>> and then later use ogrinfo again for confirmation.
>>
>> Here are my notes, I've made comments with the # symbol, and I should 
>> also mention that I am testing on Windows, with MS4W, so sometimes the 
>> exact command may slightly change (such as a single quote instead of a 
>> double quote in a command, on Linux systems) :
>>
>> create database
>> ---------------
>>
>> #must first create an empty db (named 'scid' here), and load the 
>> PostGIS extension
>> createdb -U postgres -p 5436 -E UTF8 scid
>> psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis;"
>> psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis_topology;"
>>
>> ogrinfo
>> -------
>>
>> #verify that your local GDAL/OGR is built with PostGIS and FileGDB 
>> support
>> ogrinfo --formats
>>
>>     PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
>>     MySQL -vector- (rw+): MySQL
>>     OpenFileGDB -vector- (rov): ESRI FileGDB
>>     XPlane -vector- (rov): X-Plane/Flightgear aeronautical data
>>     DXF -vector- (rw+v): AutoCAD DXF
>>
>> #connect to your new database (see params for the PG driver at 
>> https://gdal.org/drivers/vector/pg.html )
>> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436 
>> dbname=scid"
>>
>>   INFO: Open of `PG:host=localhost user=postgres password=postgres 
>> port=5436 dbname=scid'
>>       using driver `PostgreSQL' successful.
>>
>> #we're in business, no errors, yet no spatial tables listed yet, 
>> because there is none
>>
>> #examine the file geodatabase
>> ogrinfo SCID_v4.0.gdb
>>
>> INFO: Open of `SCID_v4.0.gdb'
>>       using driver `OpenFileGDB' successful.
>>
>> #in my case, MS4W uses the 'OpenFileGDB' driver, but the 'FileGDB' 
>> driver is also possible
>>
>> #356 layers should be listed there, with their layer names.  I'll use 
>> the last layer listed in the long list:
>>
>>    356: HBVSv_MLSM_rcp85_ensembleMax_abs (Multi Polygon)
>>
>> #so the layer name is 'HBVSv_MLSM_rcp85_ensembleMax_abs'
>>
>> #examine the single layer through OGR/GDAL
>> ogrinfo SCID_v4.0.gdb HBVSv_MLSM_rcp85_ensembleMax_abs -summary
>>
>>   - lists that there are 1103 features in that layer
>>   - EPSG (projection): https://epsg.io/3006
>>
>> ogr2ogr
>> -------
>>
>> #now you are ready to use ogr2ogr to bring the FileGDB layer into your 
>> empty PG/PostGIS database
>> ogr2ogr -f PostgreSQL PG:"host=localhost user=postgres 
>> password=postgres port=5436 dbname=scid" SCID_v4.0.gdb 
>> HBVSv_MLSM_rcp85_ensembleMax_abs
>>
>> ogrinfo
>> -------
>>
>> #use ogrinfo to confirm that the new spatial layer exists in your PG 
>> database
>> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436 
>> dbname=scid"
>>
>>  - should list your new layer 'hbvsv_mlsm_rcp85_ensemblemax_abs'
>>
>> #examine your new layer
>> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436 
>> dbname=scid" hbvsv_mlsm_rcp85_ensemblemax_abs -summary
>>
>>
>>
>> Hope this helps.  Welcome to the FOSS4G community!
>>
>> -jeff
>>
>>
>> -- 
>> Jeff McKenna
>> MapServer Consulting and Training Services
>> co-founder of FOSS4G
>> http://gatewaygeo.com/
>>
>>
>>
>>
>> On 2020-06-23 4:27 a.m., Thiemo Kellner wrote:
>>> Hi
>>>
>>> I am new to spacial data processing. For a project of mine I try to 
>>> load swedish climate data in to my PostGIS installation running/using 
>>> an openSUSE Tumbleweed installation.
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From junt0015 at umn.edu  Tue Jun 23 14:23:17 2020
From: junt0015 at umn.edu (Thomas Juntunen)
Date: Tue, 23 Jun 2020 16:23:17 -0500
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <258e169d-3c62-b014-2c93-11025b05c54c@gatewaygeomatics.com>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
 <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
 <258e169d-3c62-b014-2c93-11025b05c54c@gatewaygeomatics.com>
Message-ID: <CAF028HVG=k2+wO5J2Jy7W1ZiU4HLnSCnFtoA_JGnd+LzZfGUtQ@mail.gmail.com>

It looks to me like you are using two dashes: "--f" or perhaps an emdash,
and not just "-f" and that ogr2ogr thinks "PostgreSQL" is the name of your
datasource. Compare with how it is listed in your initial commands, as a
path.


On Tue, Jun 23, 2020 at 4:11 PM Jeff McKenna <jmckenna at gatewaygeomatics.com>
wrote:

> Hi Thiemo,
>
> What if you following my steps and create a new database (sverige2),
> then connect to that empty database with ogrinfo, and then try ogr2ogr
> on that new empty db.
>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> co-founder of FOSS4G
> http://gatewaygeo.com/
>
>
>
> On 2020-06-23 5:35 p.m., Thiemo Kellner wrote:
> > Hi Jeff
> >
> > Thank you for sharing your steps. I tried to follow them and had an
> > insight though I am still stuck. I noticed that I was passing the gdb
> > file within the unzipped folder to ogr2ogr whereas you passed the folder
> > path. Switching to your pattern it looks as follows.
> >
> > thiemo @ thiemos-toshi /mnt/schweden % ogrinfo --formats | grep -i postg
> >    PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
> >    PGDUMP -vector- (w+v): PostgreSQL SQL dump
> > # PostGIS capabilities of ogrinfo proven
> >
> > thiemo @ thiemos-toshi /mnt/schweden % ogrinfo
> > PG:"host='/var/run/postgresql' port='6543' dbname='sverige'
> user='sverige'"
> > INFO: Open of `PG:host='/var/run/postgresql' port='6543'
> > dbname='sverige' user='sverige''
> >        using driver `PostgreSQL' successful.
> > 1: tiger.county (Multi Polygon)
> > 2: tiger.state (Multi Polygon)
> > ...
> > # Connection to PostGIS works
> >
> > thiemo @ thiemos-toshi /mnt/schweden % ogrinfo SCID_v4.0.gdb
> > INFO: Open of `SCID_v4.0.gdb'
> >        using driver `OpenFileGDB' successful.
> > 1: HBVSv_intrans_HQloc100_rcp45_ensembleMean_diffPerc (Multi Polygon)
> > 2: HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc (Multi Polygon)
> > ...
> > # Proven to be able to read the gdb file(s)
> >
> > thiemo @ thiemos-toshi /mnt/schweden % ogrinfo SCID_v4.0.gdb
> > HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc -summary
> > INFO: Open of `SCID_v4.0.gdb'
> >        using driver `OpenFileGDB' successful.
> >
> > Layer name: HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> > Geometry: Multi Polygon
> > Feature Count: 1103
> > ...
> > # Proven to be able to access a specific layer in the gdb
> >
> > thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL"
> > -overwrite –progress --config PG_USE_COPY YES
> > PG:"host='/var/run/postgresql' port='5432' dbname='sverige'
> > user='sverige'" SCID_v4.0.gdb
> > HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> > FAILURE:
> > Unable to open datasource `PostgreSQL' with the following drivers.
> >    -> `PCIDSK'
> > ...
> > # UNABLE TO USE ogr2ogr TO WRITE DATA TO MY PostGIS
> >
> > thiemo @ thiemos-toshi /mnt/schweden :-( % ogr2ogr –f "ESRI Shapefile"
> > test.shp SCID_v4.0.gdb/gdb.shp SCID_v4.0.gdb
> > HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> > FAILURE:
> > Unable to open datasource `ESRI Shapefile' with the following drivers.
> >    -> `PCIDSK'
> > ...
> > # To me it seems that I am not able to use ogr2ogr eventhough I can
> > ogrinfo shape files
> > thiemo @ thiemos-toshi /mnt/schweden % ogrinfo --formats | grep -i esri
> >    ESRI Shapefile -vector- (rw+v): ESRI Shapefile
> >    ESRIJSON -vector- (rov): ESRIJSON
> >    PGeo -vector- (ro): ESRI Personal GeoDatabase
> >    OpenFileGDB -vector- (rov): ESRI FileGDB
> >
> > I am pritty lost.
> >
> > Kind regards
> >
> > Thiemo
> >
> > Quoting Jeff McKenna <jmckenna at gatewaygeomatics.com>:
> >
> >> Hi Thiemo!
> >>
> >> I have downloaded your data, to hopefully show you how I would tackle
> >> this.
> >>
> >> First thing is to take this in very small steps, to confirm along the
> >> way, otherwise you jump to ogr2ogr without confirming that it is even
> >> possible on your system - in other words, live by *ogrinfo*, ogrinfo
> >> is your friend, and only move to ogr2ogr once you have ogrinfo happy,
> >> and then later use ogrinfo again for confirmation.
> >>
> >> Here are my notes, I've made comments with the # symbol, and I should
> >> also mention that I am testing on Windows, with MS4W, so sometimes the
> >> exact command may slightly change (such as a single quote instead of a
> >> double quote in a command, on Linux systems) :
> >>
> >> create database
> >> ---------------
> >>
> >> #must first create an empty db (named 'scid' here), and load the
> >> PostGIS extension
> >> createdb -U postgres -p 5436 -E UTF8 scid
> >> psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis;"
> >> psql -U postgres -d scid -p 5436 -c "CREATE EXTENSION postgis_topology;"
> >>
> >> ogrinfo
> >> -------
> >>
> >> #verify that your local GDAL/OGR is built with PostGIS and FileGDB
> >> support
> >> ogrinfo --formats
> >>
> >>     PostgreSQL -vector- (rw+): PostgreSQL/PostGIS
> >>     MySQL -vector- (rw+): MySQL
> >>     OpenFileGDB -vector- (rov): ESRI FileGDB
> >>     XPlane -vector- (rov): X-Plane/Flightgear aeronautical data
> >>     DXF -vector- (rw+v): AutoCAD DXF
> >>
> >> #connect to your new database (see params for the PG driver at
> >> https://gdal.org/drivers/vector/pg.html )
> >> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436
> >> dbname=scid"
> >>
> >>   INFO: Open of `PG:host=localhost user=postgres password=postgres
> >> port=5436 dbname=scid'
> >>       using driver `PostgreSQL' successful.
> >>
> >> #we're in business, no errors, yet no spatial tables listed yet,
> >> because there is none
> >>
> >> #examine the file geodatabase
> >> ogrinfo SCID_v4.0.gdb
> >>
> >> INFO: Open of `SCID_v4.0.gdb'
> >>       using driver `OpenFileGDB' successful.
> >>
> >> #in my case, MS4W uses the 'OpenFileGDB' driver, but the 'FileGDB'
> >> driver is also possible
> >>
> >> #356 layers should be listed there, with their layer names.  I'll use
> >> the last layer listed in the long list:
> >>
> >>    356: HBVSv_MLSM_rcp85_ensembleMax_abs (Multi Polygon)
> >>
> >> #so the layer name is 'HBVSv_MLSM_rcp85_ensembleMax_abs'
> >>
> >> #examine the single layer through OGR/GDAL
> >> ogrinfo SCID_v4.0.gdb HBVSv_MLSM_rcp85_ensembleMax_abs -summary
> >>
> >>   - lists that there are 1103 features in that layer
> >>   - EPSG (projection): https://epsg.io/3006
> >>
> >> ogr2ogr
> >> -------
> >>
> >> #now you are ready to use ogr2ogr to bring the FileGDB layer into your
> >> empty PG/PostGIS database
> >> ogr2ogr -f PostgreSQL PG:"host=localhost user=postgres
> >> password=postgres port=5436 dbname=scid" SCID_v4.0.gdb
> >> HBVSv_MLSM_rcp85_ensembleMax_abs
> >>
> >> ogrinfo
> >> -------
> >>
> >> #use ogrinfo to confirm that the new spatial layer exists in your PG
> >> database
> >> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436
> >> dbname=scid"
> >>
> >>  - should list your new layer 'hbvsv_mlsm_rcp85_ensemblemax_abs'
> >>
> >> #examine your new layer
> >> ogrinfo PG:"host=localhost user=postgres password=postgres port=5436
> >> dbname=scid" hbvsv_mlsm_rcp85_ensemblemax_abs -summary
> >>
> >>
> >>
> >> Hope this helps.  Welcome to the FOSS4G community!
> >>
> >> -jeff
> >>
> >>
> >> --
> >> Jeff McKenna
> >> MapServer Consulting and Training Services
> >> co-founder of FOSS4G
> >> http://gatewaygeo.com/
> >>
> >>
> >>
> >>
> >> On 2020-06-23 4:27 a.m., Thiemo Kellner wrote:
> >>> Hi
> >>>
> >>> I am new to spacial data processing. For a project of mine I try to
> >>> load swedish climate data in to my PostGIS installation running/using
> >>> an openSUSE Tumbleweed installation.
> >>>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
*The right coordinate system can turn an impossible problem into two really
hard problems. -- Charlie Pellerin*

Thomas Juntunen
GIS Specialist
Polar Geospatial Center
R280 Learning and Environmental Science
1954 Buford Ave
University of Minnesota
St. Paul, MN 55108
612-626-0505
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/d49f423c/attachment-0001.html>

From bo.victor.thomsen at gmail.com  Tue Jun 23 14:39:04 2020
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Tue, 23 Jun 2020 23:39:04 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
 <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
Message-ID: <2e13a889-d1fd-37c4-0f4f-297661ca142e@gmail.com>

Thimo -

The ogr2ogr command from your reply contains an factual error:

thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL" 
-overwrite –progress --config PG_USE_COPY YES 
PG:"host='/var/run/postgresql' port='5432' dbname='sverige' 
user='sverige'" SCID_v4.0.gdb

should be:

thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL" 
-overwrite –progress --config PG_USE_COPY YES 
PG:"host='/var/run/postgresql' *port='6543*' dbname='sverige' 
user='sverige'" SCID_v4.0.gdb

Anther question: Has the postgresql user 'sverige' the necessary  
write/create rights to the database / schema ?

Den 23-06-2020 kl. 22:35 skrev Thiemo Kellner:
> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL" 
> -overwrite –progress --config PG_USE_COPY YES 
> PG:"host='/var/run/postgresql' port='5432' dbname='sverige' 
> user='sverige'" SCID_v4.0.gdb 
> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> FAILURE:
> Unable to open datasource `PostgreSQL' with the following drivers.
>   -> `PCIDSK'
> ...
> # UNABLE TO USE ogr2ogr TO WRITE DATA TO MY PostGIS 

-- 
Med venlig hilsen / Kind regards

Bo Victor Thomsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200623/2896d558/attachment.html>

From thiemo at gelassene-pferde.biz  Tue Jun 23 16:48:50 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Wed, 24 Jun 2020 01:48:50 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <CACqBkM8hAc9Bt16yj-3puAqMXr9=NYDGBfEU2-r-LDm7iW_CyA@mail.gmail.com>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
 <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
 <CACqBkM8hAc9Bt16yj-3puAqMXr9=NYDGBfEU2-r-LDm7iW_CyA@mail.gmail.com>
Message-ID: <20200624014850.Horde.YmRAMKN1R0suY9bTAnIUw9e@webmail.gelassene-pferde.biz>

Hi all

Eli, you are quite right. Typo of mine.

thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr test.shp SCID_v4.0.gdb  
HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc 2>/dev/null

Does work with me too, sort of. As you can see, I suppressed error  
output. Without it, I get flooded with warnings:

Warning 1: Value 524332509.438000023 of field AREA of feature 4961 not  
successfully written. Possibly due to too larger number with respect  
to field width
More than 1000 errors or warnings have been reported. No more will be  
reported from now.

It puzzles me, however, that if I explicitly give the output format,  
it fails miserably.

thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "ESRI Shapefile"  
test.shp SCID_v4.0.gdb  
HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
FAILURE:
Unable to open datasource `ESRI Shapefile' with the following drivers.
    -> `PCIDSK'

Jeff, suggested, I tried to load into a new empty database with.

thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr -overwrite –progress  
--config PG_USE_COPY YES PG:"host='/var/run/postgresql' port='6543'  
dbname='sverige_gdb' user='sverige'" SCID_v4.0.gdb  
HBVSv_intrans_HQloc100_rcp45_ensembleMean_diffPerc
ERROR 1: Couldn't fetch requested layer 'SCID_v4.0.gdb'!

But still, I get errors.

Got it! Thomas, you are a genius! You are right with your dash  
assumption. Whatever I copied from the documentation pdf was not a  
dash! It loads into non-empty database (as was to be expected).

Thanks folks, for helping! It loads

Kind regards

Thiemo



Quoting Eli Adam <eadam at co.lincoln.or.us>:

> On Tue, Jun 23, 2020 at 1:40 PM Thiemo Kellner
> <thiemo at gelassene-pferde.biz> wrote:
>>
>>
>> thiemo @ thiemos-toshi /mnt/schweden :-( % ogr2ogr –f "ESRI Shapefile"
>> test.shp SCID_v4.0.gdb/gdb.shp SCID_v4.0.gdb
>> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>> FAILURE:
>> Unable to open datasource `ESRI Shapefile' with the following drivers.
>>   -> `PCIDSK'
>
> I think that ogr2ogr destination and source datasets is like this:
> dst_datasource_name src_datasource_name
>
> Can you try this: ogr2ogr test.shp SCID_v4.0.gdb
> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>
> If that works, build from there.
>
> HTH, Eli


-- 
S/MIME Public Key: https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/026731da/attachment.bin>

From thiemo at gelassene-pferde.biz  Tue Jun 23 16:56:45 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Wed, 24 Jun 2020 01:56:45 +0200
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <2e13a889-d1fd-37c4-0f4f-297661ca142e@gmail.com>
References: <20200623092736.Horde.VQ7yFnT4q8msAahWUc6Bwid@webmail.gelassene-pferde.biz>
 <be9953e0-efb6-b2d6-82ed-671db3ebb0c2@gatewaygeomatics.com>
 <20200623223515.Horde.ra0eOba8r6H6TI8VSW88-X-@webmail.gelassene-pferde.biz>
 <2e13a889-d1fd-37c4-0f4f-297661ca142e@gmail.com>
Message-ID: <20200624015645.Horde.fH2g4lNfWk6JUhwob72Ftya@webmail.gelassene-pferde.biz>

  Hei Bo

Well, I is just a project for myself so I made sverige superuser. :o)

Well again, I have on both ports PostGIS running but the 6543 has much  
much more space. 5432 is on a small SSD so  I moved from it to an  
externel HDD.

As mentionned in the previous post, Thomas was right. I copied options  
from the documentation PDF and unfortunately there it was not a dash.  
So fixing this, made it run perfectly well.

Takker for hjelp.

Hjertelig hilsen

Thiemo

Quoting Bo Victor Thomsen <bo.victor.thomsen at gmail.com>:

> Thimo -
>
>   The ogr2ogr command from your reply contains an factual error:
>   thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL"  
> -overwrite –progress --config PG_USE_COPY YES  
> PG:"host='/var/run/postgresql' port='5432' dbname='sverige'  
> user='sverige'" SCID_v4.0.gdb
>    
>   should be:
>    
>   thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "PostgreSQL"  
> -overwrite –progress --config PG_USE_COPY YES  
> PG:"host='/var/run/postgresql' PORT='6543' dbname='sverige'  
> user='sverige'" SCID_v4.0.gdb
>    
>   Anther question: Has the postgresql user 'sverige' the necessary   
> write/create rights to the database / schema ?
  S/MIME Public Key:
https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/7923319c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/7923319c/attachment-0001.bin>

From michael.smith.erdc at gmail.com  Tue Jun 23 17:11:45 2020
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Tue, 23 Jun 2020 20:11:45 -0400
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <20200624014850.Horde.YmRAMKN1R0suY9bTAnIUw9e@webmail.gelassene-pferde.biz>
References: <20200624014850.Horde.YmRAMKN1R0suY9bTAnIUw9e@webmail.gelassene-pferde.biz>
Message-ID: <F5569C9B-A560-43E2-B8DF-CEAC05E34E8E@gmail.com>

You should try using the precision=no layer creation option. With the default of YES, it tries to set the precision on columns based on the first 50 values. Often you have data that can exceed that. You could either precreate the table with correct field definitions and then append, or set precision equals NO and try the load. 

Michael Smith
US Army Corps

> On Jun 23, 2020, at 7:49 PM, Thiemo Kellner <thiemo at gelassene-pferde.biz> wrote:
> 
> ﻿Hi all
> 
> Eli, you are quite right. Typo of mine.
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr test.shp SCID_v4.0.gdb HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc 2>/dev/null
> 
> Does work with me too, sort of. As you can see, I suppressed error output. Without it, I get flooded with warnings:
> 
> Warning 1: Value 524332509.438000023 of field AREA of feature 4961 not successfully written. Possibly due to too larger number with respect to field width
> More than 1000 errors or warnings have been reported. No more will be reported from now.
> 
> It puzzles me, however, that if I explicitly give the output format, it fails miserably.
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "ESRI Shapefile" test.shp SCID_v4.0.gdb HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
> FAILURE:
> Unable to open datasource `ESRI Shapefile' with the following drivers.
>   -> `PCIDSK'
> 
> Jeff, suggested, I tried to load into a new empty database with.
> 
> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr -overwrite –progress --config PG_USE_COPY YES PG:"host='/var/run/postgresql' port='6543' dbname='sverige_gdb' user='sverige'" SCID_v4.0.gdb HBVSv_intrans_HQloc100_rcp45_ensembleMean_diffPerc
> ERROR 1: Couldn't fetch requested layer 'SCID_v4.0.gdb'!
> 
> But still, I get errors.
> 
> Got it! Thomas, you are a genius! You are right with your dash assumption. Whatever I copied from the documentation pdf was not a dash! It loads into non-empty database (as was to be expected).
> 
> Thanks folks, for helping! It loads
> 
> Kind regards
> 
> Thiemo
> 
> 
> 
> Quoting Eli Adam <eadam at co.lincoln.or.us>:
> 
>>> On Tue, Jun 23, 2020 at 1:40 PM Thiemo Kellner
>>> <thiemo at gelassene-pferde.biz> wrote:
>>> 
>>> 
>>> thiemo @ thiemos-toshi /mnt/schweden :-( % ogr2ogr –f "ESRI Shapefile"
>>> test.shp SCID_v4.0.gdb/gdb.shp SCID_v4.0.gdb
>>> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>>> FAILURE:
>>> Unable to open datasource `ESRI Shapefile' with the following drivers.
>>>  -> `PCIDSK'
>> 
>> I think that ogr2ogr destination and source datasets is like this:
>> dst_datasource_name src_datasource_name
>> 
>> Can you try this: ogr2ogr test.shp SCID_v4.0.gdb
>> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>> 
>> If that works, build from there.
>> 
>> HTH, Eli
> 
> 
> -- 
> S/MIME Public Key: https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
> Signal (Safer than WhatsApp): +49 1578 7723737
> Handys: +41 78 947 36 21 | +49 1578 772 37 37
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From thiemo at gelassene-pferde.biz  Tue Jun 23 22:28:22 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Wed, 24 Jun 2020 05:28:22 +0000 (UTC)
Subject: [gdal-dev] Problems loading swedish climate data to PostGIS
In-Reply-To: <F5569C9B-A560-43E2-B8DF-CEAC05E34E8E@gmail.com>
References: <20200624014850.Horde.YmRAMKN1R0suY9bTAnIUw9e@webmail.gelassene-pferde.biz>
 <F5569C9B-A560-43E2-B8DF-CEAC05E34E8E@gmail.com>
Message-ID: <43ecf8cc-1264-40f8-bf3c-ea73775e4c57@gelassene-pferde.biz>

Hi Mike

Thanks for pointing out the source of mentioned warning and nudging to a solution.

Kind regards

Thiemo

24.06.2020 2:11:54 vorm. michael.smith.erdc at gmail.com:

> You should try using the precision=no layer creation option. With the default of YES, it tries to set the precision on columns based on the first 50 values. Often you have data that can exceed that. You could either precreate the table with correct field definitions and then append, or set precision equals NO and try the load.
> 
> Michael Smith
> US Army Corps
> 
>> On Jun 23, 2020, at 7:49 PM, Thiemo Kellner <thiemo at gelassene-pferde.biz> wrote:
>> 
>> ﻿Hi all
>> 
>> Eli, you are quite right. Typo of mine.
>> 
>> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr test.shp SCID_v4.0.gdb HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc 2>/dev/null
>> 
>> Does work with me too, sort of. As you can see, I suppressed error output. Without it, I get flooded with warnings:
>> 
>> Warning 1: Value 524332509.438000023 of field AREA of feature 4961 not successfully written. Possibly due to too larger number with respect to field width
>> More than 1000 errors or warnings have been reported. No more will be reported from now.
>> 
>> It puzzles me, however, that if I explicitly give the output format, it fails miserably.
>> 
>> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr –f "ESRI Shapefile" test.shp SCID_v4.0.gdb HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>> FAILURE:
>> Unable to open datasource `ESRI Shapefile' with the following drivers.
>> -> `PCIDSK'
>> 
>> Jeff, suggested, I tried to load into a new empty database with.
>> 
>> thiemo @ thiemos-toshi /mnt/schweden % ogr2ogr -overwrite –progress --config PG_USE_COPY YES PG:"host='/var/run/postgresql' port='6543' dbname='sverige_gdb' user='sverige'" SCID_v4.0.gdb HBVSv_intrans_HQloc100_rcp45_ensembleMean_diffPerc
>> ERROR 1: Couldn't fetch requested layer 'SCID_v4.0.gdb'!
>> 
>> But still, I get errors.
>> 
>> Got it! Thomas, you are a genius! You are right with your dash assumption. Whatever I copied from the documentation pdf was not a dash! It loads into non-empty database (as was to be expected).
>> 
>> Thanks folks, for helping! It loads
>> 
>> Kind regards
>> 
>> Thiemo
>> 
>> Quoting Eli Adam <eadam at co.lincoln.or.us>:
>> 
>>>> On Tue, Jun 23, 2020 at 1:40 PM Thiemo Kellner
>>>> <thiemo at gelassene-pferde.biz> wrote:
>>>> 
>>>> thiemo @ thiemos-toshi /mnt/schweden :-( % ogr2ogr –f "ESRI Shapefile"
>>>> test.shp SCID_v4.0.gdb/gdb.shp SCID_v4.0.gdb
>>>> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>>>> FAILURE:
>>>> Unable to open datasource `ESRI Shapefile' with the following drivers.
>>>> -> `PCIDSK'
>>> 
>>> I think that ogr2ogr destination and source datasets is like this:
>>> dst_datasource_name src_datasource_name
>>> 
>>> Can you try this: ogr2ogr test.shp SCID_v4.0.gdb
>>> HBVSv_intrans_HQloc100_rcp85_ensembleMean_diffPerc
>>> 
>>> If that works, build from there.
>>> 
>>> HTH, Eli
>> 

From thiemo at gelassene-pferde.biz  Tue Jun 23 22:59:50 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Wed, 24 Jun 2020 07:59:50 +0200
Subject: [gdal-dev] I fail to load NetCDF data by ogr2ogr
Message-ID: <20200624075950.Horde.XVkap7DMdos8HBGF5nkk1tY@webmail.gelassene-pferde.biz>

Hi

(me again) Now that I have been able to load Swedish climate data into  
my database I wanted to load Norwegian to another.

I have the data from
https://thredds.met.no/thredds/catalog/senorge/seNorge2/archive/TEMP1m/catalog.html?dataset=senorge/seNorge2/archive/TEMP1m/seNorge_v2_0_TEMP1m_grid_1957_2015.nc
and
https://thredds.met.no/thredds/catalog/senorge/seNorge2/archive/PREC1m/catalog.html?dataset=senorge/seNorge2/archive/PREC1m/seNorge_v2_0_PREC1m_grid_1957_2015.nc

So I issue

thiemo @ thiemos-toshi /mnt/norwegen % ls se*
seNorge_v2_0_PREC1m_grid_1957_2015.nc  seNorge_v2_0_TEMP1m_grid_1957_2015.nc
thiemo @ thiemos-toshi /mnt/norwegen % raster2pgsql -G | grep -i netcdf
   GMT NetCDF Grid Format
thiemo @ thiemos-toshi /mnt/norwegen % ogr2ogr -f "PostgreSQL"  
-overwrite -progress --config PG_USE_COPY YES  
PG:"host='/var/run/postgresql' port='6543' dbname='norge_nc'  
user='norge'" seNorge_v2_0_PREC1m_grid_1957_2015.nc
Warning 1: The dataset has several variables that could be identified  
as vector fields, but not all share the same primary dimension.  
Consequently they will be ignored.
FAILURE:
Unable to open datasource `seNorge_v2_0_PREC1m_grid_1957_2015.nc' with  
the following drivers.
   -> `PCIDSK'
   -> `netCDF'
...

But ogrinfo appears to be able to handle the file

thiemo @ thiemos-toshi /mnt/norwegen :-( % ogrinfo  
seNorge_v2_0_PREC1m_grid_1957_2015.nc
Warning 1: The dataset has several variables that could be identified  
as vector fields, but not all share the same primary dimension.  
Consequently they will be ignored.
Warning 1: The dataset has several variables that could be identified  
as vector fields, but not all share the same primary dimension.  
Consequently they will be ignored.
INFO: Open of `seNorge_v2_0_PREC1m_grid_1957_2015.nc'
       using driver `netCDF' successful.
Metadata:
   NC_GLOBAL#Conventions=CF-1.4
   NC_GLOBAL#history=Fri Sep 30 20:03:58 2016: ncra -O -y ttl  
/lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151101_20151101.nc  
/lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/2015...ge2/PREC1m/gridded_dataset/2015/seNorge_v2_0_PREC1m_grid_201511_tmp.nc
   NC_GLOBAL#institution=Norwegian Meteorological Institute, met.no
   NC_GLOBAL#nco_openmp_thread_number=1
   NC_GLOBAL#References=
   NC_GLOBAL#source=daily precipitation from station data

even though there are some warnings. GDAL gives

thiemo @ thiemos-toshi /mnt/norwegen % gdalinfo  
seNorge_v2_0_PREC1m_grid_1957_2015.nc

Driver: netCDF/Network Common Data Format
Files: seNorge_v2_0_PREC1m_grid_1957_2015.nc
Size is 1195, 1550
Coordinate System is:
PROJCRS["unnamed",
     BASEGEOGCRS["unknown",
         DATUM["unnamed",
             ELLIPSOID["Spheroid",6378137,298.257222101,
                 LENGTHUNIT["metre",1,
                     ID["EPSG",9001]]]],
         PRIMEM["Greenwich",0,
             ANGLEUNIT["degree",0.0174532925199433,
                 ID["EPSG",9122]]]],
     CONVERSION["unnamed",
         METHOD["Transverse Mercator",
             ID["EPSG",9807]],
         PARAMETER["Latitude of natural origin",0,
             ANGLEUNIT["degree",0.0174532925199433],
             ID["EPSG",8801]],
         PARAMETER["Longitude of natural origin",0,
             ANGLEUNIT["degree",0.0174532925199433],
             ID["EPSG",8802]],
         PARAMETER["Scale factor at natural origin",1,
             SCALEUNIT["unity",1],
             ID["EPSG",8805]],
         PARAMETER["False easting",0,
             LENGTHUNIT["metre",1],
             ID["EPSG",8806]],
         PARAMETER["False northing",0,
             LENGTHUNIT["metre",1],
             ID["EPSG",8807]]],
     CS[Cartesian,2],
         AXIS["easting",east,
             ORDER[1],
             LENGTHUNIT["metre",1,
                 ID["EPSG",9001]]],
         AXIS["northing",north,
             ORDER[2],
             LENGTHUNIT["metre",1,
                 ID["EPSG",9001]]]]
Data axis to CRS axis mapping: 1,2
Origin = (-75000.000000000000000,8000000.000000000000000)
Pixel Size = (1000.000000000000000,-1000.000000000000000)
Metadata:
   dummy#units=
   NC_GLOBAL#Conventions=CF-1.4
   NC_GLOBAL#history=Fri Sep 30 20:03:58 2016: ncra -O -y ttl  
/lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151101_20151101.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151102_20151102.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151103_20151103.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151104_20151104.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151105_20151105.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151106_20151106.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151107_20151107.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151108_20151108.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151109_20151109.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151110_20151110.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151111_20151111.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151112_20151112.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151113_20151113.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151114_20151114.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151115_20151115.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151116_20151116.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151117_20151117.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151118_20151118.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151119_20151119.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151120_20151120.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151121_20151121.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151122_20151122.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151123_20151123.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151124_20151124.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151125_20151125.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151126_20151126.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151127_20151127.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151128_20151128.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151129_20151129.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151130_20151130.nc  
/lustre/storeB/project/metkl/senorge2/seNorge2/PREC1m/gridded_dataset/2015/seNorge_v2_0_PREC1m_grid_201511_tmp.nc
   NC_GLOBAL#institution=Norwegian Meteorological Institute, met.no
   NC_GLOBAL#nco_openmp_thread_number=1
   NC_GLOBAL#References=
   NC_GLOBAL#source=daily precipitation from station data
   NETCDF_DIM_EXTRA={time}
   NETCDF_DIM_time_DEF={708,6}
    
NETCDF_DIM_time_VALUES={20834,20863.5,20893,20923.5,20954,20984.5,21015,21046,21076.5,21107,21137.5,21168,21199,21228.5,21258,21288.5,21319,21349.5,21380,21411,21441.5,21472,21502.5,21533,21564,21593.5,21623,21653.5,21684,21714.5,21745,21776,21806.5,21837,21867.5,21898,21929,21959,21989,22019.5,22050,22080.5,22111,22142,22172.5,22203,22233.5,22264,22295,22324.5,22354,22384.5,22415,22445.5,22476,22507,22537.5,22568,22598.5,22629,22660,22689.5,22719,22749.5,22780,22810.5,22841,22872,22902.5,22933,22963.5,22994,23025,23054.5,23084,23114.5,23145,23175.5,23206,23237,23267.5,23298,23328.5,23359,23390,23420,23450,23480.5,23511,23541.5,23572,23603,23633.5,23664,23694.5,23725,23756,23785.5,23815,23845.5,23876,23906.5,23937,23968,23998.5,24029,24059.5,24090,24121,24150.5,24180,24210.5,24241,24271.5,24302,24333,24363.5,24394,24424.5,24455,24486,24515.5,24545,24575.5,24606,24636.5,24667,24698,24728.5,24759,24789.5,24820,24851,24881,24911,24941.5,24972,25002.5,25033,25064,25094.5,25125,25155.5,25
186,25217,25246.5,25276,25306.5,25337,25367.5,25398,25429,25459.5,25490,25520.5,25551,25582,25611.5,25641,25671.5,25702,25732.5,25763,25794,25824.5,25855,25885.5,25916,25947,25976.5,26006,26036.5,26067,26097.5,26128,26159,26189.5,26220,26250.5,26281,26312,26342,26372,26402.5,26433,26463.5,26494,26525,26555.5,26586,26616.5,26647,26678,26707.5,26737,26767.5,26798,26828.5,26859,26890,26920.5,26951,26981.5,27012,27043,27072.5,27102,27132.5,27163,27193.5,27224,27255,27285.5,27316,27346.5,27377,27408,27437.5,27467,27497.5,27528,27558.5,27589,27620,27650.5,27681,27711.5,27742,27773,27803,27833,27863.5,27894,27924.5,27955,27986,28016.5,28047,28077.5,28108,28139,28168.5,28198,28228.5,28259,28289.5,28320,28351,28381.5,28412,28442.5,28473,28504,28533.5,28563,28593.5,28624,28654.5,28685,28716,28746.5,28777,28807.5,28838,28869,28898.5,28928,28958.5,28989,29019.5,29050,29081,29111.5,29142,29172.5,29203,29234,29264,29294,29324.5,29355,29385.5,29416,29447,29477.5,29508,29538.5,29569,29600,29629.5,29
659,29689.5,29720,29750.5,29781,29812,29842.5,29873,29903.5,29934,29965,29994.5,30024,30054.5,30085,30115.5,30146,30177,30207.5,30238,30268.5,30299,30330,30359.5,30389,30419.5,30450,30480.5,30511,30542,30572.5,30603,30633.5,30664,30695,30725,30755,30785.5,30816,30846.5,30877,30908,30938.5,30969,30999.5,31030,31061,31090.5,31120,31150.5,31181,31211.5,31242,31273,31303.5,31334,31364.5,31395,31426,31455.5,31485,31515.5,31546,31576.5,31607,31638,31668.5,31699,31729.5,31760,31791,31820.5,31850,31880.5,31911,31941.5,31972,32003,32033.5,32064,32094.5,32125,32156,32186,32216,32246.5,32277,32307.5,32338,32369,32399.5,32430,32460.5,32491,32522,32551.5,32581,32611.5,32642,32672.5,32703,32734,32764.5,32795,32825.5,32856,32887,32916.5,32946,32976.5,33007,33037.5,33068,33099,33129.5,33160,33190.5,33221,33252,33281.5,33311,33341.5,33372,33402.5,33433,33464,33494.5,33525,33555.5,33586,33617,33647,33677,33707.5,33738,33768.5,33799,33830,33860.5,33891,33921.5,33952,33983,34012.5,34042,34072.5,34103,34
133.5,34164,34195,34225.5,34256,34286.5,34317,34348,34377.5,34407,34437.5,34468,34498.5,34529,34560,34590.5,34621,34651.5,34682,34713,34742.5,34772,34802.5,34833,34863.5,34894,34925,34955.5,34986,35016.5,35047,35078,35108,35138,35168.5,35199,35229.5,35260,35291,35321.5,35352,35382.5,35413,35444,35473.5,35503,35533.5,35564,35594.5,35625,35656,35686.5,35717,35747.5,35778,35809,35838.5,35868,35898.5,35929,35959.5,35990,36021,36051.5,36082,36112.5,36143,36174,36203.5,36233,36263.5,36294,36324.5,36355,36386,36416.5,36447,36477.5,36508,36539,36569,36599,36629.5,36660,36690.5,36721,36752,36782.5,36813,36843.5,36874,36905,36934.5,36964,36994.5,37025,37055.5,37086,37117,37147.5,37178,37208.5,37239,37270,37299.5,37329,37359.5,37390,37420.5,37451,37482,37512.5,37543,37573.5,37604,37635,37664.5,37694,37724.5,37755,37785.5,37816,37847,37877.5,37908,37938.5,37969,38000,38030,38060,38090.5,38121,38151.5,38182,38213,38243.5,38274,38304.5,38335,38366,38395.5,38425,38455.5,38486,38516.5,38547,38578,38
608.5,38639,38669.5,38700,38731,38760.5,38790,38820.5,38851,38881.5,38912,38943,38973.5,39004,39034.5,39065,39096,39125.5,39155,39185.5,39216,39246.5,39277,39308,39338.5,39369,39399.5,39430,39461,39491,39521,39551.5,39582,39612.5,39643,39674,39704.5,39735,39765.5,39796,39827,39856.5,39886,39916.5,39947,39977.5,40008,40039,40069.5,40100,40130.5,40161,40192,40221.5,40251,40281.5,40312,40342.5,40373,40404,40434.5,40465,40495.5,40526,40557,40586.5,40616,40646.5,40677,40707.5,40738,40769,40799.5,40830,40860.5,40891,40922,40952,40982,41012.5,41043,41073.5,41104,41135,41165.5,41196,41226.5,41257,41288,41317.5,41347,41377.5,41408,41438.5,41469,41500,41530.5,41561,41591.5,41622,41653,41682.5,41712,41742.5,41773,41803.5,41834,41865,41895.5,41926,41956.5,41987,42018,42047.5,42077,42107.5,42138,42168.5,42199,42230,42260.5,42291,42321.5,42352}
   precipitation_amount#cell_methods=time: sum
   precipitation_amount#grid_mapping=UTM_Zone_33
   precipitation_amount#long_name=daily precipitation sum
   precipitation_amount#missing_value=-999.98999
   precipitation_amount#prod_date=2015-11-25
   precipitation_amount#units=millimeter
   precipitation_amount#version=1.0
   precipitation_amount#_FillValue=-999.98999
   time#axis=T
   time#calendar=standard
   time#cell_methods=time: mean
   time#long_name=time
   time#units=days since 1900-01-01 00:00:00
   UTM_Zone_33#grid_mapping_name=transverse_mercator
   UTM_Zone_33#inverse_flattening=298.257222101
   UTM_Zone_33#missing_value=-1
   UTM_Zone_33#proj4=+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs  
+ellps=WGS84 +towgs84=0,0,0
   UTM_Zone_33#semi_major_axis=6378137
   UTM_Zone_33#units=
   UTM_Zone_33#utm_zone_number=33
   UTM_Zone_33#_CoordinateAxisType=GeoX GeoY
   UTM_Zone_33#_CoordinateTransformType=Projection
   X#long_name=x coordinate of projection
   X#standard_name=projection_x_coordinate
   X#units=meters
   Y#long_name=y coordinate of projection
   Y#standard_name=projection_y_coordinate
   Y#units=meters
Corner Coordinates:
Upper Left  (  -75000.000, 8000000.000) (  2d10'51.26"W, 72d 3'30.10"N)
Lower Left  (  -75000.000, 6450000.000) (  1d16'26.85"W, 58d 9'42.08"N)
Upper Right ( 1120000.000, 8000000.000) ( 29d45' 6.80"E, 69d33'30.01"N)
Lower Right ( 1120000.000, 6450000.000) ( 18d27'37.56"E, 56d47'36.47"N)
Center      (  522500.000, 7225000.000) ( 11d 0' 6.39"E, 64d42'50.33"N)
Band 1 Block=1195x1550 Type=Float32, ColorInterp=Undefined
   NoData Value=-999.989990234375
   Unit Type: millimeter
   Metadata:
     cell_methods=time: sum
     grid_mapping=UTM_Zone_33
     long_name=daily precipitation sum
     missing_value=-999.98999
     NETCDF_DIM_time=20834
     NETCDF_VARNAME=precipitation_amount
     prod_date=2015-11-25
     units=millimeter
...
Band 708 Block=1195x1550 Type=Float32, ColorInterp=Undefined
   NoData Value=-999.989990234375
   Unit Type: millimeter
   Metadata:
     cell_methods=time: sum
     grid_mapping=UTM_Zone_33
     long_name=daily precipitation sum
     missing_value=-999.98999
     NETCDF_DIM_time=42352
     NETCDF_VARNAME=precipitation_amount
     prod_date=2015-11-25
     units=millimeter
     version=1.0
     _FillValue=-999.98999


I doublechecked that my dashes are dashes, but cannot figure as to why  
ogr2ogr fails.

If I wanted to write each band into a separate table/layer, I need to  
get the name of it but I do not know where to find it.

I would appreciate if you shared your thoughts.

Kind regards

Thiemo

-- 
S/MIME Public Key: https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/d664c972/attachment-0001.bin>

From thiemo at gelassene-pferde.biz  Wed Jun 24 00:39:22 2020
From: thiemo at gelassene-pferde.biz (Thiemo Kellner)
Date: Wed, 24 Jun 2020 09:39:22 +0200
Subject: [gdal-dev] I fail to load NetCDF data by ogr2ogr
In-Reply-To: <20200624075950.Horde.XVkap7DMdos8HBGF5nkk1tY@webmail.gelassene-pferde.biz>
Message-ID: <20200624093922.Horde.OJWycs4Poz3ZGxxkXBtbhu9@webmail.gelassene-pferde.biz>

Btw, I tried to load by raster2pgsql but I am not happy with the  
results as the table contains just one records whereas the file is  
over 700 MB.

select ST_MetaData(rast) as meta, -- Kind of a serialisation of the  
specifics below
        ST_PixelHeight(rast) As pixheight,
        ST_PixelWidth(rast) As pixhwidth,
        ST_IsEmpty(rast) as is_empty,
        ST_MemSize(rast) as space_used_in_B,
        ST_BandMetaData(rast, 1) as band_1_meta_data,
        ST_BandMetaData(rast, 708) as band_708_meta_data,
        ST_MemSize(rast)/1024 as space_used_in_KB,
        ST_GeoReference(rast, 'ESRI') As esri_ref,
        ST_GeoReference(rast, 'GDAL') As gdal_ref
   from nc.senorge_v2_0_prec1m_grid_1957_2015;

Please note I transposed the result of the query to better fit into the mail.
meta                 (-75000,8000000,1195,1550,1000,-1000,0,0,0,708)
pixheight            1000
pixhwidth            1000
is_empty             false
space_used_in_b      34048
band_1_meta_data      
(32BF,-999.989990234375,t,seNorge_v2_0_PREC1m_grid_1957_2015.nc,1,,)
band_708_meta_data    
(32BF,-999.989990234375,t,seNorge_v2_0_PREC1m_grid_1957_2015.nc,196,,)
space_used_in_kb     33
esri_ref             1000.0000000000 0.0000000000 0.0000000000  
-1000.0000000000 -74500.0000000000 7999500.0000000000
gdal_ref             1000.0000000000 0.0000000000 0.0000000000  
-1000.0000000000 -75000.0000000000 8000000.0000000000




Quoting Thiemo Kellner <thiemo at gelassene-pferde.biz>:

> Hi
>
> (me again) Now that I have been able to load Swedish climate data  
> into my database I wanted to load Norwegian to another.
>
> I have the data from
> https://thredds.met.no/thredds/catalog/senorge/seNorge2/archive/TEMP1m/catalog.html?dataset=senorge/seNorge2/archive/TEMP1m/seNorge_v2_0_TEMP1m_grid_1957_2015.nc
> and
> https://thredds.met.no/thredds/catalog/senorge/seNorge2/archive/PREC1m/catalog.html?dataset=senorge/seNorge2/archive/PREC1m/seNorge_v2_0_PREC1m_grid_1957_2015.nc
>
> So I issue
>
> thiemo @ thiemos-toshi /mnt/norwegen % ls se*
> seNorge_v2_0_PREC1m_grid_1957_2015.nc  seNorge_v2_0_TEMP1m_grid_1957_2015.nc
> thiemo @ thiemos-toshi /mnt/norwegen % raster2pgsql -G | grep -i netcdf
>   GMT NetCDF Grid Format
> thiemo @ thiemos-toshi /mnt/norwegen % ogr2ogr -f "PostgreSQL"  
> -overwrite -progress --config PG_USE_COPY YES  
> PG:"host='/var/run/postgresql' port='6543' dbname='norge_nc'  
> user='norge'" seNorge_v2_0_PREC1m_grid_1957_2015.nc
> Warning 1: The dataset has several variables that could be  
> identified as vector fields, but not all share the same primary  
> dimension. Consequently they will be ignored.
> FAILURE:
> Unable to open datasource `seNorge_v2_0_PREC1m_grid_1957_2015.nc'  
> with the following drivers.
>   -> `PCIDSK'
>   -> `netCDF'
> ...
>
> But ogrinfo appears to be able to handle the file
>
> thiemo @ thiemos-toshi /mnt/norwegen :-( % ogrinfo  
> seNorge_v2_0_PREC1m_grid_1957_2015.nc
> Warning 1: The dataset has several variables that could be  
> identified as vector fields, but not all share the same primary  
> dimension. Consequently they will be ignored.
> Warning 1: The dataset has several variables that could be  
> identified as vector fields, but not all share the same primary  
> dimension. Consequently they will be ignored.
> INFO: Open of `seNorge_v2_0_PREC1m_grid_1957_2015.nc'
>       using driver `netCDF' successful.
> Metadata:
>   NC_GLOBAL#Conventions=CF-1.4
>   NC_GLOBAL#history=Fri Sep 30 20:03:58 2016: ncra -O -y ttl  
> /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151101_20151101.nc  
> /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/2015...ge2/PREC1m/gridded_dataset/2015/seNorge_v2_0_PREC1m_grid_201511_tmp.nc
>   NC_GLOBAL#institution=Norwegian Meteorological Institute, met.no
>   NC_GLOBAL#nco_openmp_thread_number=1
>   NC_GLOBAL#References=
>   NC_GLOBAL#source=daily precipitation from station data
>
> even though there are some warnings. GDAL gives
>
> thiemo @ thiemos-toshi /mnt/norwegen % gdalinfo  
> seNorge_v2_0_PREC1m_grid_1957_2015.nc
>
> Driver: netCDF/Network Common Data Format
> Files: seNorge_v2_0_PREC1m_grid_1957_2015.nc
> Size is 1195, 1550
> Coordinate System is:
> PROJCRS["unnamed",
>     BASEGEOGCRS["unknown",
>         DATUM["unnamed",
>             ELLIPSOID["Spheroid",6378137,298.257222101,
>                 LENGTHUNIT["metre",1,
>                     ID["EPSG",9001]]]],
>         PRIMEM["Greenwich",0,
>             ANGLEUNIT["degree",0.0174532925199433,
>                 ID["EPSG",9122]]]],
>     CONVERSION["unnamed",
>         METHOD["Transverse Mercator",
>             ID["EPSG",9807]],
>         PARAMETER["Latitude of natural origin",0,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8801]],
>         PARAMETER["Longitude of natural origin",0,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8802]],
>         PARAMETER["Scale factor at natural origin",1,
>             SCALEUNIT["unity",1],
>             ID["EPSG",8805]],
>         PARAMETER["False easting",0,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8806]],
>         PARAMETER["False northing",0,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8807]]],
>     CS[Cartesian,2],
>         AXIS["easting",east,
>             ORDER[1],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]],
>         AXIS["northing",north,
>             ORDER[2],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]]]
> Data axis to CRS axis mapping: 1,2
> Origin = (-75000.000000000000000,8000000.000000000000000)
> Pixel Size = (1000.000000000000000,-1000.000000000000000)
> Metadata:
>   dummy#units=
>   NC_GLOBAL#Conventions=CF-1.4
>   NC_GLOBAL#history=Fri Sep 30 20:03:58 2016: ncra -O -y ttl  
> /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151101_20151101.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151102_20151102.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151103_20151103.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151104_20151104.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151105_20151105.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151106_20151106.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151107_20151107.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151108_20151108.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151109_20151109.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151110_20151110.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151111_20151111.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151112_20151112.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151113_20151113.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151114_20151114.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151115_20151115.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151116_20151116.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151117_20151117.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151118_20151118.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151119_20151119.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151120_20151120.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151121_20151121.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151122_20151122.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151123_20151123.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151124_20151124.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151125_20151125.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151126_20151126.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151127_20151127.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151128_20151128.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151129_20151129.nc /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1d/gridded_dataset/201511/seNorge_v2_0_PREC1d_grid_20151130_20151130.nc  
> /lustre/storeB/project/metkl/senorge2/seNorge2/PREC1m/gridded_dataset/2015/seNorge_v2_0_PREC1m_grid_201511_tmp.nc
>   NC_GLOBAL#institution=Norwegian Meteorological Institute, met.no
>   NC_GLOBAL#nco_openmp_thread_number=1
>   NC_GLOBAL#References=
>   NC_GLOBAL#source=daily precipitation from station data
>   NETCDF_DIM_EXTRA={time}
>   NETCDF_DIM_time_DEF={708,6}
>    
> NETCDF_DIM_time_VALUES={20834,20863.5,20893,20923.5,20954,20984.5,21015,21046,21076.5,21107,21137.5,21168,21199,21228.5,21258,21288.5,21319,21349.5,21380,21411,21441.5,21472,21502.5,21533,21564,21593.5,21623,21653.5,21684,21714.5,21745,21776,21806.5,21837,21867.5,21898,21929,21959,21989,22019.5,22050,22080.5,22111,22142,22172.5,22203,22233.5,22264,22295,22324.5,22354,22384.5,22415,22445.5,22476,22507,22537.5,22568,22598.5,22629,22660,22689.5,22719,22749.5,22780,22810.5,22841,22872,22902.5,22933,22963.5,22994,23025,23054.5,23084,23114.5,23145,23175.5,23206,23237,23267.5,23298,23328.5,23359,23390,23420,23450,23480.5,23511,23541.5,23572,23603,23633.5,23664,23694.5,23725,23756,23785.5,23815,23845.5,23876,23906.5,23937,23968,23998.5,24029,24059.5,24090,24121,24150.5,24180,24210.5,24241,24271.5,24302,24333,24363.5,24394,24424.5,24455,24486,24515.5,24545,24575.5,24606,24636.5,24667,24698,24728.5,24759,24789.5,24820,24851,24881,24911,24941.5,24972,25002.5,25033,25064,25094.5,25125,25155.5,
> 25
> 186,25217,25246.5,25276,25306.5,25337,25367.5,25398,25429,25459.5,25490,25520.5,25551,25582,25611.5,25641,25671.5,25702,25732.5,25763,25794,25824.5,25855,25885.5,25916,25947,25976.5,26006,26036.5,26067,26097.5,26128,26159,26189.5,26220,26250.5,26281,26312,26342,26372,26402.5,26433,26463.5,26494,26525,26555.5,26586,26616.5,26647,26678,26707.5,26737,26767.5,26798,26828.5,26859,26890,26920.5,26951,26981.5,27012,27043,27072.5,27102,27132.5,27163,27193.5,27224,27255,27285.5,27316,27346.5,27377,27408,27437.5,27467,27497.5,27528,27558.5,27589,27620,27650.5,27681,27711.5,27742,27773,27803,27833,27863.5,27894,27924.5,27955,27986,28016.5,28047,28077.5,28108,28139,28168.5,28198,28228.5,28259,28289.5,28320,28351,28381.5,28412,28442.5,28473,28504,28533.5,28563,28593.5,28624,28654.5,28685,28716,28746.5,28777,28807.5,28838,28869,28898.5,28928,28958.5,28989,29019.5,29050,29081,29111.5,29142,29172.5,29203,29234,29264,29294,29324.5,29355,29385.5,29416,29447,29477.5,29508,29538.5,29569,29600,29629.5,
> 29
> 659,29689.5,29720,29750.5,29781,29812,29842.5,29873,29903.5,29934,29965,29994.5,30024,30054.5,30085,30115.5,30146,30177,30207.5,30238,30268.5,30299,30330,30359.5,30389,30419.5,30450,30480.5,30511,30542,30572.5,30603,30633.5,30664,30695,30725,30755,30785.5,30816,30846.5,30877,30908,30938.5,30969,30999.5,31030,31061,31090.5,31120,31150.5,31181,31211.5,31242,31273,31303.5,31334,31364.5,31395,31426,31455.5,31485,31515.5,31546,31576.5,31607,31638,31668.5,31699,31729.5,31760,31791,31820.5,31850,31880.5,31911,31941.5,31972,32003,32033.5,32064,32094.5,32125,32156,32186,32216,32246.5,32277,32307.5,32338,32369,32399.5,32430,32460.5,32491,32522,32551.5,32581,32611.5,32642,32672.5,32703,32734,32764.5,32795,32825.5,32856,32887,32916.5,32946,32976.5,33007,33037.5,33068,33099,33129.5,33160,33190.5,33221,33252,33281.5,33311,33341.5,33372,33402.5,33433,33464,33494.5,33525,33555.5,33586,33617,33647,33677,33707.5,33738,33768.5,33799,33830,33860.5,33891,33921.5,33952,33983,34012.5,34042,34072.5,34103,
> 34
> 133.5,34164,34195,34225.5,34256,34286.5,34317,34348,34377.5,34407,34437.5,34468,34498.5,34529,34560,34590.5,34621,34651.5,34682,34713,34742.5,34772,34802.5,34833,34863.5,34894,34925,34955.5,34986,35016.5,35047,35078,35108,35138,35168.5,35199,35229.5,35260,35291,35321.5,35352,35382.5,35413,35444,35473.5,35503,35533.5,35564,35594.5,35625,35656,35686.5,35717,35747.5,35778,35809,35838.5,35868,35898.5,35929,35959.5,35990,36021,36051.5,36082,36112.5,36143,36174,36203.5,36233,36263.5,36294,36324.5,36355,36386,36416.5,36447,36477.5,36508,36539,36569,36599,36629.5,36660,36690.5,36721,36752,36782.5,36813,36843.5,36874,36905,36934.5,36964,36994.5,37025,37055.5,37086,37117,37147.5,37178,37208.5,37239,37270,37299.5,37329,37359.5,37390,37420.5,37451,37482,37512.5,37543,37573.5,37604,37635,37664.5,37694,37724.5,37755,37785.5,37816,37847,37877.5,37908,37938.5,37969,38000,38030,38060,38090.5,38121,38151.5,38182,38213,38243.5,38274,38304.5,38335,38366,38395.5,38425,38455.5,38486,38516.5,38547,38578,
> 38
> 608.5,38639,38669.5,38700,38731,38760.5,38790,38820.5,38851,38881.5,38912,38943,38973.5,39004,39034.5,39065,39096,39125.5,39155,39185.5,39216,39246.5,39277,39308,39338.5,39369,39399.5,39430,39461,39491,39521,39551.5,39582,39612.5,39643,39674,39704.5,39735,39765.5,39796,39827,39856.5,39886,39916.5,39947,39977.5,40008,40039,40069.5,40100,40130.5,40161,40192,40221.5,40251,40281.5,40312,40342.5,40373,40404,40434.5,40465,40495.5,40526,40557,40586.5,40616,40646.5,40677,40707.5,40738,40769,40799.5,40830,40860.5,40891,40922,40952,40982,41012.5,41043,41073.5,41104,41135,41165.5,41196,41226.5,41257,41288,41317.5,41347,41377.5,41408,41438.5,41469,41500,41530.5,41561,41591.5,41622,41653,41682.5,41712,41742.5,41773,41803.5,41834,41865,41895.5,41926,41956.5,41987,42018,42047.5,42077,42107.5,42138,42168.5,42199,42230,42260.5,42291,42321.5,42352}
>   precipitation_amount#cell_methods=time: sum
>   precipitation_amount#grid_mapping=UTM_Zone_33
>   precipitation_amount#long_name=daily precipitation sum
>   precipitation_amount#missing_value=-999.98999
>   precipitation_amount#prod_date=2015-11-25
>   precipitation_amount#units=millimeter
>   precipitation_amount#version=1.0
>   precipitation_amount#_FillValue=-999.98999
>   time#axis=T
>   time#calendar=standard
>   time#cell_methods=time: mean
>   time#long_name=time
>   time#units=days since 1900-01-01 00:00:00
>   UTM_Zone_33#grid_mapping_name=transverse_mercator
>   UTM_Zone_33#inverse_flattening=298.257222101
>   UTM_Zone_33#missing_value=-1
>   UTM_Zone_33#proj4=+proj=utm +zone=33 +datum=WGS84 +units=m  
> +no_defs +ellps=WGS84 +towgs84=0,0,0
>   UTM_Zone_33#semi_major_axis=6378137
>   UTM_Zone_33#units=
>   UTM_Zone_33#utm_zone_number=33
>   UTM_Zone_33#_CoordinateAxisType=GeoX GeoY
>   UTM_Zone_33#_CoordinateTransformType=Projection
>   X#long_name=x coordinate of projection
>   X#standard_name=projection_x_coordinate
>   X#units=meters
>   Y#long_name=y coordinate of projection
>   Y#standard_name=projection_y_coordinate
>   Y#units=meters
> Corner Coordinates:
> Upper Left  (  -75000.000, 8000000.000) (  2d10'51.26"W, 72d 3'30.10"N)
> Lower Left  (  -75000.000, 6450000.000) (  1d16'26.85"W, 58d 9'42.08"N)
> Upper Right ( 1120000.000, 8000000.000) ( 29d45' 6.80"E, 69d33'30.01"N)
> Lower Right ( 1120000.000, 6450000.000) ( 18d27'37.56"E, 56d47'36.47"N)
> Center      (  522500.000, 7225000.000) ( 11d 0' 6.39"E, 64d42'50.33"N)
> Band 1 Block=1195x1550 Type=Float32, ColorInterp=Undefined
>   NoData Value=-999.989990234375
>   Unit Type: millimeter
>   Metadata:
>     cell_methods=time: sum
>     grid_mapping=UTM_Zone_33
>     long_name=daily precipitation sum
>     missing_value=-999.98999
>     NETCDF_DIM_time=20834
>     NETCDF_VARNAME=precipitation_amount
>     prod_date=2015-11-25
>     units=millimeter
> ...
> Band 708 Block=1195x1550 Type=Float32, ColorInterp=Undefined
>   NoData Value=-999.989990234375
>   Unit Type: millimeter
>   Metadata:
>     cell_methods=time: sum
>     grid_mapping=UTM_Zone_33
>     long_name=daily precipitation sum
>     missing_value=-999.98999
>     NETCDF_DIM_time=42352
>     NETCDF_VARNAME=precipitation_amount
>     prod_date=2015-11-25
>     units=millimeter
>     version=1.0
>     _FillValue=-999.98999
>
>
> I doublechecked that my dashes are dashes, but cannot figure as to  
> why ogr2ogr fails.
>
> If I wanted to write each band into a separate table/layer, I need  
> to get the name of it but I do not know where to find it.
>
> I would appreciate if you shared your thoughts.
>
> Kind regards
>
> Thiemo
>
> -- 
> S/MIME Public Key:  
> https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
> Signal (Safer than WhatsApp): +49 1578 7723737
> Handys: +41 78 947 36 21 | +49 1578 772 37 37



-- 
S/MIME Public Key: https://oc.gelassene-pferde.biz/index.php/s/eJuAUFONag6ofnH
Signal (Safer than WhatsApp): +49 1578 7723737
Handys: +41 78 947 36 21 | +49 1578 772 37 37
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4001 bytes
Desc: S/MIME Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/5e2b3e9f/attachment.bin>

From r.nijssen at terglobo.nl  Wed Jun 24 08:14:50 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Wed, 24 Jun 2020 17:14:50 +0200
Subject: [gdal-dev] GFS with condition on the second last element
Message-ID: <5dd75e9e-542e-5710-67c3-d4bcb84c44fa@terglobo.nl>

Hi list,

I'm trying to read a complex gml file that includes values that need to 
be selected on an xml attribute. This is possible to do with a condition 
in the gfs file, but the example only covers having the attribute on the 
last element in the elementPath:

https://gdal.org/drivers/vector/gml.html#using-conditions-on-xml-attributes


But mine is on the 2nd last element, like this:

```
         <imaer:result>
             <imaer:Result resultType="DEPOSITION" substance="NH3">
                 <imaer:value>0.01909</imaer:value>
             </imaer:Result>
         </imaer:result>
         <imaer:result>
             <imaer:Result resultType="DEPOSITION" substance="NOX">
                 <imaer:value>0.001341</imaer:value>
             </imaer:Result>
         </imaer:result>
```

So I'd like to do something like this in my gfs:

```
     <PropertyDefn>
       <Name>nh3</Name>
       <ElementPath>result|Result|value</ElementPath>
       <Condition>result|Result at substance='NH3'</Condition>
       <Type>Real</Type>
     </PropertyDefn>
```

to only catch the value where substance = NH3. I've been trying many 
options but no success yet.


Is this even possible? And if so, how?

Thanks!
Raymond

From even.rouault at spatialys.com  Wed Jun 24 09:11:15 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jun 2020 18:11:15 +0200
Subject: [gdal-dev] GFS with condition on the second last element
In-Reply-To: <5dd75e9e-542e-5710-67c3-d4bcb84c44fa@terglobo.nl>
References: <5dd75e9e-542e-5710-67c3-d4bcb84c44fa@terglobo.nl>
Message-ID: <5331961.i6MER4YekY@even-i700>

On mercredi 24 juin 2020 17:14:50 CEST Raymond Nijssen wrote:
> Hi list,
> 
> I'm trying to read a complex gml file that includes values that need to
> be selected on an xml attribute. This is possible to do with a condition
> in the gfs file, but the example only covers having the attribute on the
> last element in the elementPath:
> 
> https://gdal.org/drivers/vector/gml.html#using-conditions-on-xml-attributes
> 
> 
> But mine is on the 2nd last element, like this:
> 
> ```
>          <imaer:result>
>              <imaer:Result resultType="DEPOSITION" substance="NH3">
>                  <imaer:value>0.01909</imaer:value>
>              </imaer:Result>
>          </imaer:result>
>          <imaer:result>
>              <imaer:Result resultType="DEPOSITION" substance="NOX">
>                  <imaer:value>0.001341</imaer:value>
>              </imaer:Result>
>          </imaer:result>
> ```
> 
> So I'd like to do something like this in my gfs:
> 
> ```
>      <PropertyDefn>
>        <Name>nh3</Name>
>        <ElementPath>result|Result|value</ElementPath>
>        <Condition>result|Result at substance='NH3'</Condition>
>        <Type>Real</Type>
>      </PropertyDefn>
> ```
> 
> to only catch the value where substance = NH3. I've been trying many
> options but no success yet.
> 
> 
> Is this even possible?

No, this isn't possible. As documented, Condition capabilities are limited to filtering on an 
attribute of the same element whose value you want to retrieve.

You would probably have more capabilities by using the GMLAS driver, and filtering on its 
output.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/f4ae89ad/attachment.html>

From idan at miara.com  Wed Jun 24 14:01:59 2020
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Jun 2020 00:01:59 +0300
Subject: [gdal-dev] GDAL bindings for Delphi
Message-ID: <CAEDrt3-7A93fHBfQKi9uU54kOQB-9_vBWYbRcLnofSRQkvysfQ@mail.gmail.com>

Hi all,

I've also translated a significant portion of the C bindings of GDAL/OGR to
Delphi.
https://github.com/talos-gis/gdal4delphi.
It works well for me with GDAL 2.04 and with 3.02 master.
Would you be interested in adding the bindings to the GDAL git?
Should I create a PR?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/8090ca06/attachment.html>

From even.rouault at spatialys.com  Wed Jun 24 14:19:16 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jun 2020 23:19:16 +0200
Subject: [gdal-dev] GDAL bindings for Delphi
In-Reply-To: <CAEDrt3-7A93fHBfQKi9uU54kOQB-9_vBWYbRcLnofSRQkvysfQ@mail.gmail.com>
References: <CAEDrt3-7A93fHBfQKi9uU54kOQB-9_vBWYbRcLnofSRQkvysfQ@mail.gmail.com>
Message-ID: <2128196.1C23GJVeZJ@even-i700>

Idan,

I'm not sure having those bindings inside GDAL tree is the best solution. I don't 
perceive Delphi user based as being massive, and I suspect there won't probably be 
any interest from existing GDAL committers in helping maintaining them, so this could 
be more a burden for you and reviewers of GDAL pull requests than an advantage.

What I'd suggest is that you add a link to your repository in the GDAL doc.

To do so, it would probably be good to migrate the content of
https://trac.osgeo.org/gdal/wiki#GDALOGRInOtherLanguages
with this link to your repository into https://gdal.org/api/ . A PR for that is welcome.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200624/563cf0f7/attachment.html>

From idan at miara.com  Wed Jun 24 14:35:24 2020
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Jun 2020 00:35:24 +0300
Subject: [gdal-dev] gdal_calc.py improvments
Message-ID: <CAEDrt3_2_cEYERyTUERrYDDFbDeW+Ej63EuqteAfS0HaU7vMEg@mail.gmail.com>

Hi all,

I've added some additions/improvements to gdal_calc.py
https://github.com/talos-gis/gdalos/blob/master/src/gdalos/calc/gdal_calc.py


1. Alphalist now includes lower case letters.
2. added hideNoData option to ignore noDataValues
3. accept gdal datasets and pathlib.Path objects as alternative to string
filenames of input rasters.
4. can work with input of different extents - either use a given extent or
calculate an extent as a union or an intersection of the given rasters
extents.
5. optionally verify equal Geotransform and SRS.
6. accept additional user_namespace to the global_namespace
7. option to return the output ds
8. allow to run without outF with MEM driver
9. accept a ColorTable input and apply to the output.
10. Accept multiple rasters with the same Alpha name to make a list of
inputs. Then allow the use functions that operates on a vector of blocks,
like "max" or "add" or
https://github.com/talos-gis/gdalos/blob/master/src/gdalos/calc/gdalos_combine.py

What do you think about these additions?
Could you guide me what to do prior to creating a good PR for that?
I guess some of my additions would need to be improved beforehand
(Specifically #4, is there a better way to do it then to use VRTs? ) and
also maybe remove some of the dependencies in other functions, like
GeoRectangle (for the input extent).
I also didn't create extensive tests for all that... (I'm not sure how time
consuming this could be).

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/947fcab0/attachment.html>

From idan at miara.com  Wed Jun 24 14:52:15 2020
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Jun 2020 00:52:15 +0300
Subject: [gdal-dev] Windows CI build times
In-Reply-To: <2972520.VV3a9HeVF2@even-i700>
References: <6887462.ldcPOGF9r1@even-i700>
 <CABUeae-1gB64sbpyEh2vW-Ce1nMv7gCZWfjAto50Oc-a7C_jZw@mail.gmail.com>
 <4B46FBC1-B107-4A5C-98E1-80578C885169@hobu.co> <2972520.VV3a9HeVF2@even-i700>
Message-ID: <CAEDrt3_-9c_kK=2jiFXLKUhyw6YcSbkbX8PWYMfzv3oPmu_dNA@mail.gmail.com>

Just an innocent question...
How come GCC is not one of the tested compilers on Windows and it's the
only tested compiler for Linux?
Is GCC for Windows not in par with MSVC?

Idan

On Thu, 4 Jun 2020 at 01:41, Even Rouault <even.rouault at spatialys.com>
wrote:

> On lundi 20 avril 2020 20:16:41 CEST Howard Butler wrote:
>
> > > On Apr 16, 2020, at 7:46 PM, Mateusz Loskot <mateusz at loskot.net>
> wrote:
>
> > >
>
> > > On Fri, 17 Apr 2020 at 01:45, Mike Taves <mwtoews at gmail.com> wrote:
>
> > >> It seems that many projects have shifted from AppVeyor to AZP for
>
> > >> performance benefits.
>
> > >
>
> > > Or GitHub Actions, which is an incarnation of AzP.
>
> >
>
> > Having done both GitHub Actions and AzP, I think Actions has more
> convenient
>
> > expressiveness of job flow, a big win of integration with GitHub's API,
> and
>
> > large directory of user-contributed actions.
>
>
>
> https://github.com/OSGeo/gdal/pull/2648 has now a migration of the VS2019
> build to GitHub actions, which will improve response time by cutting half
> of the load on AppVeyor
>
>
>
> For anyone attempting similar migration, here are a few random points on
> which I stumbled upon:
>
> - git on GitHub actions has the default behaviour of git on Windows, that
> is it must have core.autocrlf=true or whatever makes git turn LF into CRLF
> on some files. Fix was to set core.autocrlf=false
>
> - powershell on GitHub actions exits as soon as a command in a script
> fails. Which is reasonable, but for some reason our GDAL appveyor
> powershell sequences don't like that, especially when used with the black
> magic exec() function we have in appveyor.yml that seems to be an emulation
> of the default Github action mode. Fix was to set $ErrorActionPreference =
> 'continue'
>
> - anectodical: "Install-PackageProvider NuGet -Force", whatever that does,
> failed on github actions, but that turned out to be unnecessary.
>
> (I now know at least I actively hate powershell)
>
>
>
> So on AppVeyor remains the VS 2015 build, since github actions doesn't
> offer this compiler. At some point we will probably be able to remove VS
> 2015 builds. The main reason for keeping it is that OSGeo4W still uses VS
> 2015 to build GDAL, but this is going to be updated to 2019 soon according
> to Jürgen.
>
>
>
> I've also migrated recently the Mac Travis-CI jobs, and all code quality
> checks into github actions. Was easier.
>
>
>
> I will probably defer on migrating more things, that is the remaining
> Linux Travis-CI jobs. From a discussion with @pyusr on IRC, one solution to
> consider, and that would make us mostly CI host independent, would be to
> use Docker builds instead of relying on the VM provided by the CI host. I
> haven't considered that more, but on the paper it seems interesting. He was
> pointing to
>
>
> https://github.com/tzickel/chunkedbuffer/blob/master/.github/workflows/test.yml
> + https://github.com/tzickel/chunkedbuffer/blob/master/Dockerfile.test as
> an example . One potential issue is that we have some Linux builds that
> start Docker containers for databases, so I'm not sure how that would
> interact with the build & tests being done in docker build. Would probably
> work by doing them as separate preliminary steps in a job.
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/6761b86d/attachment.html>

From even.rouault at spatialys.com  Wed Jun 24 15:05:35 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jun 2020 00:05:35 +0200
Subject: [gdal-dev] gdal_calc.py improvments
In-Reply-To: <CAEDrt3_2_cEYERyTUERrYDDFbDeW+Ej63EuqteAfS0HaU7vMEg@mail.gmail.com>
References: <CAEDrt3_2_cEYERyTUERrYDDFbDeW+Ej63EuqteAfS0HaU7vMEg@mail.gmail.com>
Message-ID: <4333055.b2x0lyxe9G@even-i700>

On jeudi 25 juin 2020 00:35:24 CEST Idan Miara wrote:
> Hi all,
> 
> I've added some additions/improvements to gdal_calc.py
> https://github.com/talos-gis/gdalos/blob/master/src/gdalos/calc/gdal_calc.py
> 
> 
> 1. Alphalist now includes lower case letters.
> 2. added hideNoData option to ignore noDataValues
> 3. accept gdal datasets and pathlib.Path objects as alternative to string
> filenames of input rasters.
> 4. can work with input of different extents - either use a given extent or
> calculate an extent as a union or an intersection of the given rasters
> extents.
> 5. optionally verify equal Geotransform and SRS.
> 6. accept additional user_namespace to the global_namespace
> 7. option to return the output ds
> 8. allow to run without outF with MEM driver
> 9. accept a ColorTable input and apply to the output.
> 10. Accept multiple rasters with the same Alpha name to make a list of
> inputs. Then allow the use functions that operates on a vector of blocks,
> like "max" or "add" or
> https://github.com/talos-gis/gdalos/blob/master/src/gdalos/calc/gdalos_combi
> ne.py
> 
> What do you think about these additions?

Sounds generally good, although I'm not completely sure about what all of them imply/mean

> Could you guide me what to do prior to creating a good PR for that?

I'd suggest perhaps to split into several PR so to make review easier. At least separate the 
more complex changes for more trivial ones.

> I guess some of my additions would need to be improved beforehand
> (Specifically #4, is there a better way to do it then to use VRTs? )

Using VRT for that sounds reasonable to me. You could probably do without it, but VRT is 
probably what will make the code clearer.

> and
> also maybe remove some of the dependencies in other functions, like
> GeoRectangle (for the input extent).

Not sure what GeoRectangle is, but yes you should try avoiding adding new dependencies.

> I also didn't create extensive tests for all that... (I'm not sure how time
> consuming this could be).

Isn't the general rule that 1/3 of the development time is implementing stuff, 1/3 adding 
tests and 1/3 documenting :-) ?

Tests for gdal_calc.py are in autotest/pyscripts/test_gdal_calc.py

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/ab426f3c/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jun 24 15:15:04 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jun 2020 00:15:04 +0200
Subject: [gdal-dev] Windows CI build times
In-Reply-To: <CAEDrt3_-9c_kK=2jiFXLKUhyw6YcSbkbX8PWYMfzv3oPmu_dNA@mail.gmail.com>
References: <6887462.ldcPOGF9r1@even-i700> <2972520.VV3a9HeVF2@even-i700>
 <CAEDrt3_-9c_kK=2jiFXLKUhyw6YcSbkbX8PWYMfzv3oPmu_dNA@mail.gmail.com>
Message-ID: <2607153.CeTnd3TXoF@even-i700>

> How come GCC is not one of the tested compilers on Windows 

For good or bad historic reasons, GDAL on Windows is mostly built with MSVC.
A good reason to use MSVC is when you want to link against C++ libraries that are also build 
with MSVC, due to different symbol manglings between GCC and MSVC (particularly the 
proprietary ones that can't be rebuilt from source).
(I've heard that recent clang versions on Windows can use MSVC C++ symbol mangling, so 
things could in theory be smoother now.)

Actually, we have a CI target uses the mingw32 cross compiler from Linux, so that halfs count 
for testing GCC on Windows. It doesn't test drivers with external library requirements 
though, neither MSYS2 specific issues.

The number of CI configs for GDAL is already quite (too?) big, and as I mentioned in this 
thread, we struggled with build times before the partial migration to github workflows. I'm 
moderately enthusiastic about adding a new one for GCC on Windows. At least it would need 
someone comitted to set it up and maintain it.

> and it's the only tested compiler for Linux?

clang is also tested

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/dee6e67c/attachment.html>

From r.nijssen at terglobo.nl  Wed Jun 24 20:29:45 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 25 Jun 2020 05:29:45 +0200
Subject: [gdal-dev] GFS with condition on the second last element
In-Reply-To: <5331961.i6MER4YekY@even-i700>
References: <5dd75e9e-542e-5710-67c3-d4bcb84c44fa@terglobo.nl>
 <5331961.i6MER4YekY@even-i700>
Message-ID: <8b68e06a-c4af-16e9-95f3-38235df30944@terglobo.nl>

Thanks Even,

Then at least I can stop searching.

For now I will move to iterparse in python, which is slow but very flexible.

Raymond


On 24-06-2020 18:11, Even Rouault wrote:
> On mercredi 24 juin 2020 17:14:50 CEST Raymond Nijssen wrote:
> 
>  > Hi list,
> 
>  >
> 
>  > I'm trying to read a complex gml file that includes values that need to
> 
>  > be selected on an xml attribute. This is possible to do with a condition
> 
>  > in the gfs file, but the example only covers having the attribute on the
> 
>  > last element in the elementPath:
> 
>  >
> 
>  > 
> https://gdal.org/drivers/vector/gml.html#using-conditions-on-xml-attributes
> 
>  >
> 
>  >
> 
>  > But mine is on the 2nd last element, like this:
> 
>  >
> 
>  > ```
> 
>  > <imaer:result>
> 
>  > <imaer:Result resultType="DEPOSITION" substance="NH3">
> 
>  > <imaer:value>0.01909</imaer:value>
> 
>  > </imaer:Result>
> 
>  > </imaer:result>
> 
>  > <imaer:result>
> 
>  > <imaer:Result resultType="DEPOSITION" substance="NOX">
> 
>  > <imaer:value>0.001341</imaer:value>
> 
>  > </imaer:Result>
> 
>  > </imaer:result>
> 
>  > ```
> 
>  >
> 
>  > So I'd like to do something like this in my gfs:
> 
>  >
> 
>  > ```
> 
>  > <PropertyDefn>
> 
>  > <Name>nh3</Name>
> 
>  > <ElementPath>result|Result|value</ElementPath>
> 
>  > <Condition>result|Result at substance='NH3'</Condition>
> 
>  > <Type>Real</Type>
> 
>  > </PropertyDefn>
> 
>  > ```
> 
>  >
> 
>  > to only catch the value where substance = NH3. I've been trying many
> 
>  > options but no success yet.
> 
>  >
> 
>  >
> 
>  > Is this even possible?
> 
> No, this isn't possible. As documented, Condition capabilities are 
> limited to filtering on an attribute of the same element whose value you 
> want to retrieve.
> 
> You would probably have more capabilities by using the GMLAS driver, and 
> filtering on its output.
> 
> Even
> 
> -- 
> 
> Spatialys - Geospatial professional services
> 
> http://www.spatialys.com
> 

From even.rouault at spatialys.com  Thu Jun 25 03:18:45 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jun 2020 12:18:45 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
Message-ID: <2273497.dMsDO4hdeZ@even-i700>

Hi,

Having heard no issues with RC1,

Motion:

Adopt GDAL 3.1.1 RC1 as final 3.1.1 release

+1 Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/af2335d2/attachment.html>

From howard at hobu.co  Thu Jun 25 06:10:59 2020
From: howard at hobu.co (Howard Butler)
Date: Thu, 25 Jun 2020 08:10:59 -0500
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
In-Reply-To: <2273497.dMsDO4hdeZ@even-i700>
References: <2273497.dMsDO4hdeZ@even-i700>
Message-ID: <CAKyBbG4Xer22qe47k9LNdz4KQmZewJcADRa3-yTOQh3SMe43rA@mail.gmail.com>

On Thu, Jun 25, 2020 at 5:19 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
>
>
> Having heard no issues with RC1,
>
>
>
> Motion:
>
>
>
> Adopt GDAL 3.1.1 RC1 as final 3.1.1 release
>
>
>
> +1 Even
>

+1 Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/00faec21/attachment.html>

From jmckenna at gatewaygeomatics.com  Thu Jun 25 06:28:56 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 25 Jun 2020 10:28:56 -0300
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
In-Reply-To: <CAKyBbG4Xer22qe47k9LNdz4KQmZewJcADRa3-yTOQh3SMe43rA@mail.gmail.com>
References: <2273497.dMsDO4hdeZ@even-i700>
 <CAKyBbG4Xer22qe47k9LNdz4KQmZewJcADRa3-yTOQh3SMe43rA@mail.gmail.com>
Message-ID: <4ce7f878-10ba-90a0-2846-92c03d707965@gatewaygeomatics.com>

+1 jeff

(howard's email is the first I've seen of this RC, as most would not 
have received the original post because of 
https://trac.osgeo.org/osgeo/ticket/2475 )



On 2020-06-25 10:10 a.m., Howard Butler wrote:
> 
> 
> On Thu, Jun 25, 2020 at 5:19 AM Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
> 
>     __
> 
>     Hi,
> 
>     Having heard no issues with RC1,
> 
>     Motion:
> 
>     Adopt GDAL 3.1.1 RC1 as final 3.1.1 release
> 
>     +1 Even
> 
> 
> +1 Howard
> 
> 


-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From mateusz at loskot.net  Thu Jun 25 09:45:31 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 25 Jun 2020 18:45:31 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
In-Reply-To: <2273497.dMsDO4hdeZ@even-i700>
References: <2273497.dMsDO4hdeZ@even-i700>
Message-ID: <CABUeae_n1h1fjRjySpFP716=CQwsoNdeGiyfBvVxRC4UuXUiNw@mail.gmail.com>

On Thu, 25 Jun 2020 at 12:18, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Motion:
> Adopt GDAL 3.1.1 RC1 as final 3.1.1 release
>
> +1 Even


+1 Mateusz


-- 
Mateusz Loskot, http://mateusz.loskot.net

From dmorissette at mapgears.com  Thu Jun 25 10:21:39 2020
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 25 Jun 2020 13:21:39 -0400
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
In-Reply-To: <2273497.dMsDO4hdeZ@even-i700>
References: <2273497.dMsDO4hdeZ@even-i700>
Message-ID: <aed78a78-26b8-012e-878f-3447178f8583@mapgears.com>

+1

Daniel


On 2020-06-25 06:18, Even Rouault wrote:
> Hi,
> 
> Having heard no issues with RC1,
> 
> Motion:
> 
> Adopt GDAL 3.1.1 RC1 as final 3.1.1 release
> 
> +1 Even
> 
> -- 
> 
> Spatialys - Geospatial professional services
> 
> http://www.spatialys.com
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From norman.barker at gmail.com  Thu Jun 25 11:05:50 2020
From: norman.barker at gmail.com (Norman Barker)
Date: Thu, 25 Jun 2020 13:05:50 -0500
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
In-Reply-To: <aed78a78-26b8-012e-878f-3447178f8583@mapgears.com>
References: <2273497.dMsDO4hdeZ@even-i700>
 <aed78a78-26b8-012e-878f-3447178f8583@mapgears.com>
Message-ID: <CAN_Dn-G8ZLjdok35saeQ3J7ADZiWRHg2gKPO79-bEdzzrq56qQ@mail.gmail.com>

+1

Norman

On Thu, Jun 25, 2020 at 12:27 PM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1
>
> Daniel
>
>
> On 2020-06-25 06:18, Even Rouault wrote:
> > Hi,
> >
> > Having heard no issues with RC1,
> >
> > Motion:
> >
> > Adopt GDAL 3.1.1 RC1 as final 3.1.1 release
> >
> > +1 Even
> >
> > --
> >
> > Spatialys - Geospatial professional services
> >
> > http://www.spatialys.com
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/3004bd81/attachment.html>

From idan at miara.com  Thu Jun 25 11:40:12 2020
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Jun 2020 21:40:12 +0300
Subject: [gdal-dev] Python bindings for a GDAL dependent library
Message-ID: <CAEDrt39HnyJBz61gJ1o60+6Gz7+rnz1UQQ8thjzOaZ2_7ii3yA@mail.gmail.com>

Hi all,

I am writing a C++ library with a C API that links to GDAL dynamically
with LoadLibrary.
I would like to access the C API via Python and I have a few questions.

Currently the library compiled with MSVC and I was able to access some
functions from python via SWIG but I didn't try to pass GDAL types back and
forth.

1. How do I make my library open the same instance of GDAL dll that is used
by the GDAL Python bindings?
2. Are the SWIG bindings written manually for every new C function or is
there an semi/automated way to create it?
3. Is there an example for a library that creates gdal datasets in C/C++
and sends them to Python (or the other way around) to continue the process?
any best practices?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/3dd558ea/attachment.html>

From andrew.bell.ia at gmail.com  Thu Jun 25 12:20:54 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 25 Jun 2020 15:20:54 -0400
Subject: [gdal-dev] Python bindings for a GDAL dependent library
In-Reply-To: <CAEDrt39HnyJBz61gJ1o60+6Gz7+rnz1UQQ8thjzOaZ2_7ii3yA@mail.gmail.com>
References: <CAEDrt39HnyJBz61gJ1o60+6Gz7+rnz1UQQ8thjzOaZ2_7ii3yA@mail.gmail.com>
Message-ID: <CACJ51z1FbxUseKeR+xyDWudsA5K-rEUjk=_bnTF-7dfg6-ZazQ@mail.gmail.com>

On Thu, Jun 25, 2020 at 2:40 PM Idan Miara <idan at miara.com> wrote:

> Hi all,
>
> I am writing a C++ library with a C API that links to GDAL dynamically
> with LoadLibrary.
> I would like to access the C API via Python and I have a few questions.
>
> Currently the library compiled with MSVC and I was able to access some
> functions from python via SWIG but I didn't try to pass GDAL types back and
> forth.
>
> 1. How do I make my library open the same instance of GDAL dll that is
> used by the GDAL Python bindings?
>
2. Are the SWIG bindings written manually for every new C function or is
> there an semi/automated way to create it?
> 3. Is there an example for a library that creates gdal datasets in C/C++
> and sends them to Python (or the other way around) to continue the process?
> any best practices?
>

Maybe an example of what you're trying to do would be helpful.

If you're writing your code that's calling GDAL from C++, why are you
concerned about Python bindings?

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/0f36b61a/attachment.html>

From idan at miara.com  Thu Jun 25 12:28:38 2020
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Jun 2020 22:28:38 +0300
Subject: [gdal-dev] Python bindings for a GDAL dependent library
In-Reply-To: <CACJ51z1FbxUseKeR+xyDWudsA5K-rEUjk=_bnTF-7dfg6-ZazQ@mail.gmail.com>
References: <CAEDrt39HnyJBz61gJ1o60+6Gz7+rnz1UQQ8thjzOaZ2_7ii3yA@mail.gmail.com>
 <CACJ51z1FbxUseKeR+xyDWudsA5K-rEUjk=_bnTF-7dfg6-ZazQ@mail.gmail.com>
Message-ID: <CAEDrt39se=4Aw2G=TdYdPg7Whe3BOkcd8_EjsUVaN1pZpEFgNA@mail.gmail.com>

Hi,
Thanks for your reply!
Say I am implementing some raster processing algorithm in c++ (thus using
gdal c api to load the input and to create an output ds) and want to write
python code that takes the result and post process it (say use gdal_calc.py
to combine some results of that function).

I was able to save the result raster to a file in c++ (through a python
call) and load the file in python (via gdal python api), but I want to
avoid using the intermediate file and just use the same instance of a ds.

On Thu, 25 Jun 2020, 22:21 Andrew Bell, <andrew.bell.ia at gmail.com> wrote:

>
> On Thu, Jun 25, 2020 at 2:40 PM Idan Miara <idan at miara.com> wrote:
>
>> Hi all,
>>
>> I am writing a C++ library with a C API that links to GDAL dynamically
>> with LoadLibrary.
>> I would like to access the C API via Python and I have a few questions.
>>
>> Currently the library compiled with MSVC and I was able to access some
>> functions from python via SWIG but I didn't try to pass GDAL types back and
>> forth.
>>
>> 1. How do I make my library open the same instance of GDAL dll that is
>> used by the GDAL Python bindings?
>>
> 2. Are the SWIG bindings written manually for every new C function or is
>> there an semi/automated way to create it?
>> 3. Is there an example for a library that creates gdal datasets in C/C++
>> and sends them to Python (or the other way around) to continue the process?
>> any best practices?
>>
>
> Maybe an example of what you're trying to do would be helpful.
>
> If you're writing your code that's calling GDAL from C++, why are you
> concerned about Python bindings?
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200625/1210c8c4/attachment.html>

From dniven at ucsc.edu  Sat Jun 27 13:29:11 2020
From: dniven at ucsc.edu (Doug Niven)
Date: Sat, 27 Jun 2020 13:29:11 -0700
Subject: [gdal-dev] Cannot compile 3.1.0 in Centos 7
Message-ID: <F6625D5B-110F-4F59-9F37-ED13A6D095E8@ucsc.edu>

Hi Folks,

I hope this is the right place to ask this question. If not, please send me elsewhere...

I’ve successfully built from tarball sources and installed the following to /usr/local on a Centos 7 machine:

   sqlite v3.32.3
   proj v6.3.2
   geos 3.8.1

But I just can’t get gdal 3.1.0 to compile, and am not getting terribly verbose reasons why.

My compile.log contents are at very bottom (apologies for its length), but after make, I see:

   collect2: error: ld returned 1 exit status
   make[1]: *** [gdalserver] Error 1
   make[1]: Leaving directory `/home/socsciadmin/gdal-3.1.0/apps’
   make: *** [apps-target] Error 2

Any suggestions or pointers towards troubleshooting this would be most appreciated!

Doug

Configure process:

./configure --with-proj=/usr/local --with-geos=/usr/local

checking build system type... x86_64-pc-linux-gnu
checking host system type... x86_64-pc-linux-gnu
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking C_WFLAGS for maximum warnings... -Wall -Wdeclaration-after-statement
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking CXX_WFLAGS for maximum warnings... -Wall
checking whether C compiler accepts -Werror -we10006... no
checking whether C compiler accepts -diag-disable 188,1684,2259,2304,3280,11074,11076... no
checking whether C compiler accepts -Wextra... yes
checking whether C compiler accepts -Winit-self... yes
checking whether C compiler accepts -Wunused-parameter... yes
checking whether C compiler accepts -Wmissing-prototypes... yes
checking whether C compiler accepts -Wmissing-declarations... yes
checking whether C compiler accepts -Wformat... yes
checking whether C compiler accepts -Wformat -Werror=format-security -Wno-format-nonliteral... yes
checking whether C compiler accepts -Wshorten-64-to-32... no
checking whether C compiler accepts -Wlogical-op... yes
checking whether C compiler accepts -Wshadow... yes
checking whether C compiler accepts -Werror=vla... yes
checking whether C compiler accepts -Werror=declaration-after-statement... yes
checking whether C compiler accepts -Wdate-time... yes
checking whether C compiler accepts -Wnull-dereference... yes
checking whether C compiler accepts -Wduplicated-cond... yes
checking whether C++ compiler accepts -Wextra-semi... yes
checking whether C compiler accepts -Wno-sign-compare... yes
checking whether C compiler accepts -Wcomma... no
checking whether C compiler accepts -Wfloat-conversion... yes
checking whether C compiler accepts -Wdocumentation -Wno-documentation-deprecated-sync... no
checking if -std=gnu89 can be enabled... yes
checking whether C++ compiler accepts -Wunused-private-field... no
checking whether C++ compiler accepts -Wmissing-declarations... yes
checking whether C++ compiler accepts -Wnon-virtual-dtor... yes
checking whether C++ compiler accepts -Wold-style-cast... yes
checking whether C++ compiler accepts -Weffc++... yes
checking if -Weffc++ should be enabled... yes
checking whether C++ compiler accepts -Woverloaded-virtual... yes
checking whether C++ compiler accepts -fno-operator-names... yes
checking whether C++ compiler accepts -Wzero-as-null-pointer-constant... yes
checking if use C++14 compiler options... disabled by user
checking whether g++ supports C++11 features by default... yes
checking whether C++ compiler accepts -Wsuggest-override... yes
checking if -Wimplicit-fallthrough can be enabled... yes
checking for gcc... (cached) gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for gcc option to accept ISO C89... (cached) none needed
checking whether we are using the GNU C++ compiler... (cached) yes
checking whether g++ accepts -g... (cached) yes
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /bin/ld
checking if the linker (/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /bin/nm -B
checking the name lister (/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
checking for /bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for dlltool... dlltool
checking how to associate runtime and link libraries... printf %s\n
checking for ar... ar
checking for archiver @FILE support... @
checking for strip... strip
checking for ranlib... ranlib
checking for gawk... gawk
checking command to parse /bin/nm -B output from gcc object... ok
checking for sysroot... no
checking for a working dd... /bin/dd
checking how to truncate binary pipes... /bin/dd bs=4096 count=1
checking for mt... no
checking if : is a manifest tool... no
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... no
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking how to run the C++ preprocessor... g++ -E
checking for ld used by g++... /bin/ld -m elf_x86_64
checking if the linker (/bin/ld -m elf_x86_64) is GNU ld... yes
checking whether the g++ linker (/bin/ld -m elf_x86_64) supports shared libraries... yes
checking for g++ option to produce PIC... -fPIC -DPIC
checking if g++ PIC flag -fPIC -DPIC works... yes
checking if g++ static flag -static works... no
checking if g++ supports -c -o file.o... yes
checking if g++ supports -c -o file.o... (cached) yes
checking whether the g++ linker (/bin/ld -m elf_x86_64) supports shared libraries... yes
checking dynamic linker characteristics... (cached) GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for std::isnan... yes
checking for dlopen in -ldl... yes
checking for nanosleep in -lrt... yes
checking for sin in -lm... yes
checking for ANSI C header files... (cached) yes
checking assert.h usability... yes
checking assert.h presence... yes
checking for assert.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for unistd.h... (cached) yes
checking dbmalloc.h usability... no
checking dbmalloc.h presence... no
checking for dbmalloc.h... no
checking for dlfcn.h... (cached) yes
checking for stdint.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking values.h usability... yes
checking values.h presence... yes
checking for values.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
checking linux/userfaultfd.h usability... yes
checking linux/userfaultfd.h presence... yes
checking for linux/userfaultfd.h... yes
checking whether byte ordering is bigendian... no
checking for long long... yes
checking for 64bit file io... yes
checking for stat64... yes
checking for fopen64... yes
checking for ftruncate64... yes
checking size of int... 4
checking size of unsigned long... 8
checking size of void*... 8
checking for int8... no
checking for int16... no
checking for int32... no
checking for uintptr_t... yes
checking for vprintf... yes
checking for _doprnt... no
checking for snprintf... yes
checking for vsnprintf... yes
checking for atoll... yes
checking for strtoull... yes
checking for strtof... yes
checking for getcwd... yes
checking whether strtof is declared... yes
checking for readlink... yes
checking for lstat... yes
checking for posix_spawnp... yes
checking for posix_memalign... yes
checking for vfork... yes
checking for mmap... yes
checking for sigaction... yes
checking for statvfs... yes
checking for statvfs64... yes
checking for getrlimit... yes
checking for RLIMIT_AS... yes
checking for gmtime_r... yes
checking for localtime_r... yes
checking for uselocale... yes
checking to enable debug build... no, CFLAGS="-g -O2"
checking whether GCC 4.1 atomic builtins are available... yes
checking whether GCC bswap builtins are available... yes
checking for __uint128_t... yes
checking whether SSE is available at compile time... yes
checking whether SSSE3 is available at compile time... yes
checking whether AVX is available at compile time... yes
checking to enable LTO (link time optimization) build... no
checking whether we should hide internal symbols... no
checking for local include/lib path... none
checking for pthread_create in -lpthread... yes
checking for PTHREAD_MUTEX_RECURSIVE... yes
checking for PTHREAD_MUTEX_ADAPTIVE_NP... yes
checking for pthread_spinlock_t... yes
checking for 5 args mremap()... yes
checking for _SC_PHYS_PAGES... yes
checking for deflateInit_ in -lz... yes
checking for inflateCopy in -lz... yes
using pre-installed libz
checking for ld used by GCC... /bin/ld -m elf_x86_64
checking if the linker (/bin/ld -m elf_x86_64) is GNU ld... yes
checking for shared library run path origin... /bin/sh: ./config.rpath: No such file or directory
done
checking for iconv... yes
checking for working iconv... yes
checking for iconv declaration... 
         extern size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);
using ICONV_CPP_CONST=""
configure: Bash completions not requested
checking for PROJ >= 6 library... checking for proj_create_from_wkt in -lproj... yes
configure: proj.h found
checking for ZSTD_decompressStream in -lzstd... no
libzstd not found - ZSTD support disabled
checking for PostgreSQL... checking for pkg-config... /bin/pkg-config
checking pkg-config is at least version 0.21... yes
checking for PQ... no
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for Mopen in -lcsf... no
checking csf.h usability... no
checking csf.h presence... no
checking for csf.h... no
using internal csf code.
checking for libpng... checking for png_set_IHDR in -lpng... yes
checking png.h usability... yes
checking png.h presence... yes
checking for png.h... yes
using pre-installed libpng.
checking for libcrunch... dds support disabled.
checking for gta_version in -lgta... no
libgta not found - GTA support disabled
checking for PCIDSK... using internal libpcidsk.
checking for libtiff... checking for TIFFScanlineSize64 in -ltiff... yes
checking for _TIFFsetDoubleArray in -ltiff... yes
using pre-installed libtiff.
checking for GTIFAttachPROJContext in -lgeotiff... no
using internal GeoTIFF code.
checking for jpeg_read_scanlines in -ljpeg... yes
checking jpeglib.h usability... yes
checking jpeglib.h presence... yes
checking for jpeglib.h... yes
using pre-installed libjpeg.
checking CharLS/interface.h usability... no
checking CharLS/interface.h presence... no
checking for CharLS/interface.h... no
checking CharLS/charls.h usability... no
checking CharLS/charls.h presence... no
checking for CharLS/charls.h... no
checking charls/charls.h usability... no
checking charls/charls.h presence... no
checking for charls/charls.h... no
checking for jpeg12... disabled, libjpeg or libtiff not internal
checking for DGifOpenFileName in -lgif... no
checking gif_lib.h usability... no
checking gif_lib.h presence... no
checking for gif_lib.h... no
using internal gif code.
checking for OGDI... no
checking ecs.h usability... no
checking ecs.h presence... no
checking for ecs.h... no
checking for FMEObjects... no
SOSI support disabled.
checking for MongoCXX... MongoCXX not found.
checking for pkg-config... (cached) /bin/pkg-config
checking pkg-config is at least version 0.21... yes
checking for MONGOCXXV3... no
checking for SDreaddata in -lmfhdfalt... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
checking for pkg-config... (cached) /bin/pkg-config
checking pkg-config is at least version 0.21... yes
checking for HDF5... no
checking for H5Fopen in -lhdf5... yes
checking for kea-config... no
checking for kea... no
checking for nc-config... /bin/nc-config
checking libnetcdf compiler and linker flags with nc-config... 
 got version="netCDF 4.3.3.1", prefix="/usr",
 libs="-lnetcdf  ", includedir="/usr/include"
checking for nc_open in -lnetcdf... yes
checking for netcdf-4 (and HDF5) support in libnetcdf... yes
checking for HDF4 support in libnetcdf... yes
checking for /usr/include/netcdf_mem.h... no
checking for jpc_decode in -ljasper... yes
checking for jp2_decode in -ljasper... yes
checking for pgx_decode in -ljasper... yes
checking for jp2_encode_uuid in -ljasper... no
configure: hacked JasPer version not found, GeoJP2 disabled.
checking for pkg-config... (cached) /bin/pkg-config
checking pkg-config is at least version 0.21... yes
checking for OPENJPEG... no
checking for FileGDBAPI... FileGDBAPI not found.
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for NCScbmOpenFileView in -lecwj2... no
checking for Kakadu JPEG2000 support... not requested.
configure: MrSID support disabled.
configure: MrSID/MG4 Lidar support disabled.
checking for JP2Lura support... checking for MSG... not requested
checking if Oracle support is enabled... no
enabled
checking for MySQL... no
checking for Ingres... no
checking for Xerces C++ Parser... no
checking for XML_ParserCreate in -lexpat... yes
checking for Expat XML Parser headers in /usr/include... found
checking for Expat XML Parser... yes
checking if Expat XML Parser version is >= 1.95.0... yes
checking for pkg-config... (cached) /bin/pkg-config
checking pkg-config is at least version 0.25... yes
checking for LIBKML... no
checking for Google libkml headers in /usr/local/include, /usr/local/include/kml, and /usr/local/include/kml/third_party/boost_1_34_1... found
checking for Google libkml libraries... found
checking for Google libkml... yes
checking if Google libkml version is >= 1.3.0... yes
check for unixODBC
checking for SQLConnect in -lodbc... yes
checking for SQLInstallDriverEx in -lodbcinst... yes
checking for sql.h... no
sql.h not found
checking if Oracle support is enabled... no
checking for DODS... disabled
checking for curl-config... /bin/curl-config
        found libcurl version 7.29.0
checking for curl_global_init in -lcurl... yes
checking for pkg-config... (cached) /bin/pkg-config
checking pkg-config is at least version 0.21... yes
checking for LIBXML2... yes
checking for xmlParseDoc in -lxml2... yes
checking for spatialite... disabled
checking for sqlite3_open in -lsqlite3... yes
checking for SQLite3 library >= 3.0.0... yes
checking for sqlite3_column_table_name in -lsqlite3... no
configure: rasterlite2 support disabled
checking pcre.h usability... yes
checking pcre.h presence... yes
checking for pcre.h... yes
checking for pcre_compile in -lpcre... yes
checking Checking for Teigha... disabled
configure: IBM Informix DataBlade not supported.
configure: checking whether we should include ESRI SDE support...
        ESRI SDE support not requested.
checking for WebPDecodeRGB in -lwebp... no
libwebp not found - WEBP support disabled
checking for local... no
checking for sfcgal-config... no
checking qhull/libqhull.h usability... no
checking qhull/libqhull.h presence... no
checking for qhull/libqhull.h... no
checking libqhull/libqhull.h usability... no
checking libqhull/libqhull.h presence... no
checking for libqhull/libqhull.h... no
checking for OpenCL support... no
checking for FreeXL support... checking freexl.h usability... no
checking freexl.h presence... no
checking for freexl.h... no
checking for freexl_open in -lfreexl... no
checking for freexl_open in -lfreexl... no
checking for freexl_open in -lfreexl... no
checking for freexl_open in -lfreexl... no
checking for freexl_open in -lfreexl... no
libfreexl not found - FreeXL support disabled
checking for json_object_set_serializer in -ljson-c... yes
using pre-installed libjson-c
checking whether to enable PAM... yes
checking whether to build PDF driver as a plugin... no
checking for poppler... disabled
checking for podofo... disabled
checking for pdfium... disabled
checking GDAL version information from gdal_version.h.in: 3.1.0
checking for perl bindings... disabled
checking for python bindings... disabled
checking whether we should include Java support... no
HDFS support not requested.
checking for tiledb_coords in -ltiledb... no
libtiledb not found - TileDB support disabled
checking whether we should include MDB support... no
configure: checking whether we should include rasdaman support...
        rasdaman support not requested.
checking for rdb_library_name in -lrdb... no
librdb not found - RDB support disabled
checking whether we should include Armadillo support... no
checking for cryptopp... no
checking for crypto... checking for EVP_sha256 in -lcrypto... yes
checking openssl/bio.h usability... yes
checking openssl/bio.h presence... yes
checking for openssl/bio.h... yes
checking for LERC... enabled
checking for NULL... disabled
checking for pkg-config... (cached) /bin/pkg-config
checking pkg-config is at least version 0.21... yes
checking for EXR... no
checking if sprintf can be overloaded for GDAL compilation... yes
configure: creating ./config.status
config.status: creating GDALmake.opt
config.status: creating port/cpl_config.h
config.status: port/cpl_config.h is unchanged
config.status: executing libtool commands

GDAL is now configured for x86_64-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -DHAVE_AVX_AT_COMPILE_TIME -DHAVE_SSSE3_AT_COMPILE_TIME -DHAVE_SSE_AT_COMPILE_TIME -g -O2
  C++ compiler:              g++ -DHAVE_AVX_AT_COMPILE_TIME -DHAVE_SSSE3_AT_COMPILE_TIME -DHAVE_SSE_AT_COMPILE_TIME -g -O2
  C++14 support:             no

  LIBTOOL support:           yes

  LIBZ support:              external
  LIBLZMA support:           no
  ZSTD support:              no
  cryptopp support:          no
  crypto/openssl support:    yes
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  LIBPNG support:            external
  DDS support:               no
  GTA support:               no
  LIBTIFF support:           external (BigTIFF=yes)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  12 bit JPEG:               no
  12 bit JPEG-in-TIFF:       no
  LIBGIF support:            internal
  JPEG-Lossless/CharLS:      no
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              yes
  Kea support:               no
  NetCDF support:            yes
  NetCDF has netcdf_mem.h:   no
  Kakadu support:            no
  JasPer support:            yes (GeoJP2=no)
  OpenJPEG support:          no
  ECW support:               no
  MrSID support:             no
  MrSID/MG4 Lidar support:   no
  JP2Lura support:           no
  MSG support:               no
  EPSILON support:           no
  WebP support:              no
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        no
  LERC support:              yes
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          no
  Expat support:             yes
  libxml2 support:           yes
  Google libkml support:     yes
  ODBC support:              no
  FGDB support:              no
  MDB support:               no
  PCIDSK support:            internal
  OCI support:               no
  GEORASTER support:         no
  SDE support:               no
  Rasdaman support:          no
  RDB support:               no
  DODS support:              no
  SQLite support:            yes
  PCRE support:              yes
  SpatiaLite support:        no
  RasterLite2 support:       no
  Teigha (DWG and DGNv8):    no
  INFORMIX DataBlade support:no
  GEOS support:              no
  SFCGAL support:            no
  QHull support:             internal
  Poppler support:           no
  Podofo support:            no
  PDFium support:            no
  OpenCL support:            no
  Armadillo support:         no
  FreeXL support:            no
  SOSI support:              no
  MongoDB support:           no
  MongoCXX v3 support:       no
  HDFS support:              no
  TileDB support:            no
  EXR support:               no
  userfaultfd support:       yes
  misc. gdal formats:        aaigrid adrg aigrid airsar arg blx bmp bsb cals ceos ceos2 coasp cosar ctg dimap dted e00grid elas envisat ers fit gff gsg gxf hf2 idrisi ignfheightasciigrid ilwis ingr iris iso8211 jaxapalsar jdem kmlsuperoverlay l1b leveller map mrf msgn ngsgeoid nitf northwood pds prf r raw rmf rs2 safe saga sdts sentinel2 sgi sigdem srtmhgt terragen til tsx usgsdem xpm xyz zmap rik ozi grib eeda plmosaic rda wcs wms wmts daas rasterlite mbtiles pdf
  disabled gdal formats:    
  misc. ogr formats:         aeronavfaa arcgen avc bna cad csv dgn dxf edigeo flatgeobuf geoconcept georss gml gmt gpsbabel gpx gtm htf jml mapml mvt ntf openair openfilegdb pgdump rec s57 segukooa segy selafin shape sua svg sxf tiger vdv wasp xplane idrisi pds sdts ods xlsx amigocloud carto cloudant couchdb csw elastic ngw plscenes wfs gpkg vfk osm
  disabled ogr formats:     


  SWIG Bindings:             no

  PROJ >= 6:                 yes
  enable GNM building:       yes
  enable pthread support:    yes
  enable POSIX iconv support:yes
  hide internal symbols:     no



From even.rouault at spatialys.com  Sat Jun 27 13:39:04 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Jun 2020 22:39:04 +0200
Subject: [gdal-dev] Cannot compile 3.1.0 in Centos 7
In-Reply-To: <F6625D5B-110F-4F59-9F37-ED13A6D095E8@ucsc.edu>
References: <F6625D5B-110F-4F59-9F37-ED13A6D095E8@ucsc.edu>
Message-ID: <1680561.pcXb1igMeB@even-i700>

Doug,

> My compile.log contents are at very bottom (apologies for its length),

This is just the configure log, not the build log

> but
> after make, I see:
> 
>    collect2: error: ld returned 1 exit status
>    make[1]: *** [gdalserver] Error 1
>    make[1]: Leaving directory `/home/socsciadmin/gdal-3.1.0/apps’
>    make: *** [apps-target] Error 2
> 

You need to dig a bit more before in the build log and find line(s) containing "error: "

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200627/8c8210c5/attachment-0001.html>

From dniven at ucsc.edu  Sat Jun 27 13:51:40 2020
From: dniven at ucsc.edu (Doug Niven)
Date: Sat, 27 Jun 2020 13:51:40 -0700
Subject: [gdal-dev] Cannot compile 3.1.0 in Centos 7
In-Reply-To: <1680561.pcXb1igMeB@even-i700>
References: <F6625D5B-110F-4F59-9F37-ED13A6D095E8@ucsc.edu>
 <1680561.pcXb1igMeB@even-i700>
Message-ID: <FE7B4D1B-2554-49C2-A0B4-7D9A27208565@ucsc.edu>

Even, thanks for the reply! Am hoping contents below contain the smoking gun.

…

collect2: error: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: *** Waiting for unfinished jobs....
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> const&)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*) const'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::ParseNS(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::ReadFile(char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*) const'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
collect2: error: ld returned 1 exit status
make[1]: *** [gdalserver] Error 1
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> const&)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*) const'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::ParseNS(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::ReadFile(char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*) const'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
collect2: error: ld returned 1 exit status
make[1]: *** [gdal_translate] Error 1
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::SerializePretty[abi:cxx11](boost::intrusive_ptr<kmldom::Element> const&)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::ReadKmlAndGetPath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*) const'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmldom::ParseNS(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::ReadFile(char const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >*) const'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::KmzFile::OpenFromString(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
/home/socsciadmin/gdal-3.1.0/.libs/libgdal.so: undefined reference to `kmlengine::Href::Parse(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
collect2: error: ld returned 1 exit status
make[1]: *** [gdaladdo] Error 1
make[1]: Leaving directory `/home/socsciadmin/gdal-3.1.0/apps'
make: *** [apps-target] Error 2





> On Jun 27, 2020, at 1:39 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Doug,
>  
> > My compile.log contents are at very bottom (apologies for its length),
>  
> This is just the configure log, not the build log
>  
> > but
> > after make, I see:
> > 
> >    collect2: error: ld returned 1 exit status
> >    make[1]: *** [gdalserver] Error 1
> >    make[1]: Leaving directory `/home/socsciadmin/gdal-3.1.0/apps’
> >    make: *** [apps-target] Error 2
> > 
>  
> You need to dig a bit more before in the build log and find line(s) containing "error: "
>  
> Even
>  
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From even.rouault at spatialys.com  Sat Jun 27 13:57:14 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Jun 2020 22:57:14 +0200
Subject: [gdal-dev] Cannot compile 3.1.0 in Centos 7
In-Reply-To: <FE7B4D1B-2554-49C2-A0B4-7D9A27208565@ucsc.edu>
References: <F6625D5B-110F-4F59-9F37-ED13A6D095E8@ucsc.edu>
 <1680561.pcXb1igMeB@even-i700>
 <FE7B4D1B-2554-49C2-A0B4-7D9A27208565@ucsc.edu>
Message-ID: <18748019.7qgvFzNhS0@even-i700>

On samedi 27 juin 2020 13:51:40 CEST Doug Niven wrote:
> Even, thanks for the reply! Am hoping contents below contain the smoking
> gun.

This is an issue with linking to libkml libraries

Perhaps try to set LD_LIBRARY_PATH=/usr/local/lib ?

Or if you don't need libkml, ./configure --without-libkml

(you need to "make clean" before rebuilding if you change the options of ./
configure)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200627/b6a9803b/attachment.html>

From BORISF at rnd-hub.com  Sun Jun 28 01:50:24 2020
From: BORISF at rnd-hub.com (Boris Forzun)
Date: Sun, 28 Jun 2020 08:50:24 +0000
Subject: [gdal-dev] Issue with GDAL - JP2KAK driver
Message-ID: <DB6PR07MB4343BA2503E5CA0A82AA7BD69C910@DB6PR07MB4343.eurprd07.prod.outlook.com>

Hi,

I've encountered a problem using the JP2KAK driver for reading JP2 images.
I use the following python code to read a specific overview from an image:

--------------------------------------------------------------------------------------------------------------------------

raster = gdal.Open(path, gdal.GA_ReadOnly)
overview = raster.GetRasterBand(band_num).GetOverview(overview_num)

# Read a 512X512 buffer at offset (0,0) from the given overview.
buffer = overview.ReadAsArray(0,0,512,512,512,512)

--------------------------------------------------------------------------------------------------------------------------

I would expect the driver to read exactly the 512X512 buffer I ask for, from the relevant overview.
In reality, I see the following log:

--------------------------------------------------------------------------------------------------------------------------

[2020-06-25T13:04:23.159Z] [DEBUG] [image_reader_logger] [1.1.0] Requested buffer for image: /vsis3/***.JP2 : Reads region (0, 0, 512, 512) into 512 X 512. Overview: 3 : Overview dimensions: (802X723)
[2020-06-25T13:04:23.177Z] [DEBUG] [image_reader_logger] [1.1.0] Reads band: 1 of overview: 3
JP2KAK: DirectRasterIO() for 0,0,8192,8192 -> 512x512 (no intermediate)

--------------------------------------------------------------------------------------------------------------------------

Also, I see VSICURL logs that the driver downloads 26 MB of data.
I've tested the behavior with a pyramidal tiff image, it works as expected.
I've also written a small C program doing the same. with the same results:

--------------------------------------------------------------------------------------------------------------------------

#include "gdal.h"
#include "cpl_conv.h"

int main()
{
    CPLSetConfigOption("AWS_VIRTUAL_HOSTING", "NO");
    CPLSetConfigOption("AWS_HTTPS", "NO");
    CPLSetConfigOption("AWS_SECRET_ACCESS_KEY", "***");
    CPLSetConfigOption("AWS_ACCESS_KEY_ID", "***");
    CPLSetConfigOption("AWS_S3_ENDPOINT", "localhost:9000");
    CPLSetConfigOption("AWS_SSL_ENABLED", "NO");
    CPLSetConfigOption("CPL_DEBUG", "ON");
    CPLSetConfigOption("CPL_CURL_VERBOSE", "NO");
    CPLSetConfigOption("CPL_VSIL_CURL_CHUNK_SIZE", "1000000");


    GDALDatasetH hDataset;
    GDALAllRegister();
    hDataset = GDALOpen("/vsis3/***.JP2", GA_ReadOnly);

    GDALRasterBandH hBand;

    hBand = GDALGetRasterBand(hDataset, 1);

    hBand = GDALGetOverview(hBand, 3);

    u_int16_t *pafScanline;
    pafScanline = (u_int16_t *)CPLMalloc(sizeof(u_int16_t) * 512 * 512);
    CPLErr err = GDALRasterIO(hBand, GF_Read, 0, 0, 512, 512,
                            pafScanline, 512, 512, GDT_UInt16,
                            0, 0);

    GDALClose(hDataset);
}

--------------------------------------------------------------------------------------------------------------------------

The higher the overview, the bigger the request from S3, as if GDAL reads the best resolution and resamples the results...


  *   The input image is a 12 bit, 4 bands, pyramidal (5 internal pyramids) J2K image (image size: 12826X11565).
  *   I've built GDAL 3.1.0 with kakadu vs8.0.4 (Also tried with 2.3.1 and kakadu vs7.7).

Am I missing something?


Thanks in advance,
Boris.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200628/f0969c6f/attachment-0001.html>

From even.rouault at spatialys.com  Sun Jun 28 03:20:05 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Jun 2020 12:20:05 +0200
Subject: [gdal-dev] Issue with GDAL - JP2KAK driver
In-Reply-To: <DB6PR07MB4343BA2503E5CA0A82AA7BD69C910@DB6PR07MB4343.eurprd07.prod.outlook.com>
References: <DB6PR07MB4343BA2503E5CA0A82AA7BD69C910@DB6PR07MB4343.eurprd07.prod.outlook.com>
Message-ID: <2102675.s9gKL76Szm@even-i700>

Boris,

> JP2KAK: DirectRasterIO() for 0,0,8192,8192 -> 512x512 (no intermediate)

This traces is probably a bit confusing, but it means that it reads from the overview you 
specified.

>     CPLSetConfigOption("CPL_VSIL_CURL_CHUNK_SIZE", "1000000");

This is probably the reason for the behaviour you observe. JPEG2000 files aren't necessarily 
all optimized for efficient overview retrieval. You should check the "progression order" of 
that file. If it is not RPCL or RLCP, the bits for overviews are scattered through the file, and so 
with a large chunk size you'll read a lot of the file. If you reduced it, the total amount of bytes 
read would be smaller, but you'd get a lot more GET requests.

But... with RPCL or RLCP progression order, reading a window at full resolution could become 
less efficient than with PCRL

I don't think you can get with JPEG2000 something equivalent to TIFF + overviews, because 
in TIFF + overviews you have redundancy of information (each resolution includes 
information already found in lower resolution), whereas JPEG2000 is optimized to avoid that 
redundancy, which also means that information is scattered through the file.

> The higher the overview, the bigger the request from S3, as if GDAL reads
> the best resolution and resamples the results.

Yes, that's "expected" given the above.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200628/85308ee4/attachment.html>

From BORISF at rnd-hub.com  Sun Jun 28 05:36:47 2020
From: BORISF at rnd-hub.com (Boris Forzun)
Date: Sun, 28 Jun 2020 12:36:47 +0000
Subject: [gdal-dev] Issue with GDAL - JP2KAK driver
In-Reply-To: <2102675.s9gKL76Szm@even-i700>
References: <DB6PR07MB4343BA2503E5CA0A82AA7BD69C910@DB6PR07MB4343.eurprd07.prod.outlook.com>,
 <2102675.s9gKL76Szm@even-i700>
Message-ID: <DB6PR07MB434354E13A33A55F351A66969C910@DB6PR07MB4343.eurprd07.prod.outlook.com>

Thanks for the response,

the image is indeed RPCL,
doesn't that mean that the bits for the overview are not scattered through the file?

________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Sunday, June 28, 2020 1:20 PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Cc: Boris Forzun <BORISF at rnd-hub.com>; MICHAEL FLASH <MICHAFL at rnd-hub.com>; YOSSI PARIENTE <YOSSIPA at rnd-hub.com>
Subject: Re: [gdal-dev] Issue with GDAL - JP2KAK driver


Boris,



> JP2KAK: DirectRasterIO() for 0,0,8192,8192 -> 512x512 (no intermediate)



This traces is probably a bit confusing, but it means that it reads from the overview you specified.



> CPLSetConfigOption("CPL_VSIL_CURL_CHUNK_SIZE", "1000000");



This is probably the reason for the behaviour you observe. JPEG2000 files aren't necessarily all optimized for efficient overview retrieval. You should check the "progression order" of that file. If it is not RPCL or RLCP, the bits for overviews are scattered through the file, and so with a large chunk size you'll read a lot of the file. If you reduced it, the total amount of bytes read would be smaller, but you'd get a lot more GET requests.



But... with RPCL or RLCP progression order, reading a window at full resolution could become less efficient than with PCRL



I don't think you can get with JPEG2000 something equivalent to TIFF + overviews, because in TIFF + overviews you have redundancy of information (each resolution includes information already found in lower resolution), whereas JPEG2000 is optimized to avoid that redundancy, which also means that information is scattered through the file.



> The higher the overview, the bigger the request from S3, as if GDAL reads

> the best resolution and resamples the results.



Yes, that's "expected" given the above.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200628/ed07369b/attachment.html>

From even.rouault at spatialys.com  Sun Jun 28 07:11:37 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Jun 2020 16:11:37 +0200
Subject: [gdal-dev] Issue with GDAL - JP2KAK driver
In-Reply-To: <DB6PR07MB434354E13A33A55F351A66969C910@DB6PR07MB4343.eurprd07.prod.outlook.com>
References: <DB6PR07MB4343BA2503E5CA0A82AA7BD69C910@DB6PR07MB4343.eurprd07.prod.outlook.com>
 <2102675.s9gKL76Szm@even-i700>
 <DB6PR07MB434354E13A33A55F351A66969C910@DB6PR07MB4343.eurprd07.prod.outlook.com>
Message-ID: <2417585.MR750PuSLu@even-i700>

On dimanche 28 juin 2020 12:36:47 CEST Boris Forzun wrote:
> Thanks for the response,
> 
> the image is indeed RPCL,
> doesn't that mean that the bits for the overview are not scattered through
> the file?

They are extra considerations:
- if your image is tiled, and the area you request covers several tiles, then the JPEG2000 
codec may have to seek in different parts of the file for each tiles covered by your request
- it also depends on the strategy of the encoder to dispatch the tile-parts inside the file, in 
case they are multiple tiles or tiles are encoded in several tile-parts (even for a tiled image, a 
smart encoder might pack together tile-parts corresponding to lower resolution levels at the 
beginning of the file)
- the presence of PLT marker segments might help a lot if the packets for lower resolutions 
aren't in dedicated tile-parts.

I've just tried with a single-tiled RPCL image, with PLT marker segments, and when requesting 
exactly at the resolution of the smallest overview, it only reads the beginning of the file.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200628/bb34e6f2/attachment-0001.html>

From woklist at kyngchaos.com  Sun Jun 28 16:53:27 2020
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 28 Jun 2020 18:53:27 -0500
Subject: [gdal-dev] Problems with latest pdfium
Message-ID: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>

I'm getting multiple errors trying to compile PDF support with pdfium.

pdfdataset.cpp:1557:61: error: reference to type 'const CFX_TextRenderOptions'
      could not bind to an rvalue of type 'int'
                                                     color, 0 /* text_flags */);
                                                            ^
/Users/Shared/unix/pdfium-sierra/include/pdfium/core/fxge/cfx_renderdevice.h:166:52: note: 
      passing argument to parameter 'options' here
                      const CFX_TextRenderOptions& options);
                                                   ^
pdfdataset.cpp:1644:36: error: no member named 'MakeUnique' in namespace
      'pdfium'
    pContext->m_pOptions = pdfium::MakeUnique<CPDF_RenderOptions>();
                           ~~~~~~~~^
pdfdataset.cpp:1644:47: error: 'CPDF_RenderOptions' does not refer to a value
    pContext->m_pOptions = pdfium::MakeUnique<CPDF_RenderOptions>();
                                              ^
/Users/Shared/unix/pdfium-sierra/include/pdfium/fpdfsdk/cpdfsdk_helpers.h:35:7: note: 
      declared here
class CPDF_RenderOptions;
      ^
...

At least for MakeUnique, I see a change from 6 weeks ago that they dropped MakeUnique.

Since there are no releases for pdfium (that I could find, other than the numerous "chromium" branches), is there a revision that is known to work that I can checkout? (I could go back to before the MakeUnique change, but there may be other earlier breaking changes.)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy



From even.rouault at spatialys.com  Mon Jun 29 02:34:00 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jun 2020 11:34:00 +0200
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
References: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
Message-ID: <17907045.KauOyWd94d@even-i700>

William,

> I'm getting multiple errors trying to compile PDF support with pdfium.

See https://gdal.org/drivers/raster/pdf.html#pdfium

You need to build pdfium from the indicated forks.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/40b79579/attachment.html>

From even.rouault at spatialys.com  Mon Jun 29 02:42:21 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jun 2020 11:42:21 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.1 RC1
In-Reply-To: <2273497.dMsDO4hdeZ@even-i700>
References: <2273497.dMsDO4hdeZ@even-i700>
Message-ID: <1735396.C3ssSjL3mp@even-i700>

On jeudi 25 juin 2020 12:18:45 CEST Even Rouault wrote:
> Hi,
> 
> Having heard no issues with RC1,
> 
> Motion:
> 
> Adopt GDAL 3.1.1 RC1 as final 3.1.1 release

I declare this motion passed with +1 from PSC members HowardB, MateuszL, 
DanielM, NormanB and myself

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/8ed6e9b7/attachment.html>

From technonsquare at gmail.com  Mon Jun 29 03:45:51 2020
From: technonsquare at gmail.com (NSquare)
Date: Mon, 29 Jun 2020 16:15:51 +0530
Subject: [gdal-dev] Error while opeing Dataset
Message-ID: <CANTAVSk4BRw4+zqGUon=gWmYJfUc=oT7tn6MYLYkH3wtw2N=rQ@mail.gmail.com>

Hi Folks,

I am trying to explore GDAL raster APIs for reading i_3001a.ntf. I have
installed GDAL using miniconda on Ubuntu 18.04 and referring to the Raster
API tutorial open sample file downloaded from here
<https://www.gwg.nga.mil/ntb/baseline/software/testfile/Nitfv2_1/scen_2_1.html>
.

Below is the code snippet I have written to open the file,

        GDALDataset *poDataset;

    GDALAllRegister();

    poDataset =
static_cast<GDALDataset*>(GDALOpen("../i_3001a_reader/images/i_3001a.ntf",
GA_ReadOnly));

    if (poDataset == nullptr)

    {

        cout << "Couldn't open i_3001a.ntf file" << endl;

    }


On running this code getting below error,

*proj_context_get_database_path: Open of
/home/nishant/miniconda3/share/proj failed*


Am I missing any step? Please suggest.

Kind Regards,
Nishant
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/0f81f545/attachment.html>

From technonsquare at gmail.com  Mon Jun 29 04:38:36 2020
From: technonsquare at gmail.com (NSquare)
Date: Mon, 29 Jun 2020 17:08:36 +0530
Subject: [gdal-dev] Error while opeing Dataset
In-Reply-To: <CANTAVSk4BRw4+zqGUon=gWmYJfUc=oT7tn6MYLYkH3wtw2N=rQ@mail.gmail.com>
References: <CANTAVSk4BRw4+zqGUon=gWmYJfUc=oT7tn6MYLYkH3wtw2N=rQ@mail.gmail.com>
Message-ID: <CANTAVSm+YYHceOXUFJCPkcndJSLFmh+uHcr6AFwS5OP1fL7Ccw@mail.gmail.com>

Looks like this is some kind of warning. I got the same warning after
running gdalinfo tool for the sample file. I added some more code to get
the general file information and it worked fine.

On Mon, Jun 29, 2020 at 4:15 PM NSquare <technonsquare at gmail.com> wrote:

> Hi Folks,
>
> I am trying to explore GDAL raster APIs for reading i_3001a.ntf. I have
> installed GDAL using miniconda on Ubuntu 18.04 and referring to the Raster
> API tutorial open sample file downloaded from here
> <https://www.gwg.nga.mil/ntb/baseline/software/testfile/Nitfv2_1/scen_2_1.html>
> .
>
> Below is the code snippet I have written to open the file,
>
>         GDALDataset *poDataset;
>
>     GDALAllRegister();
>
>     poDataset = static_cast<GDALDataset*>(GDALOpen("../i_3001a_reader/images/i_3001a.ntf", GA_ReadOnly));
>
>     if (poDataset == nullptr)
>
>     {
>
>         cout << "Couldn't open i_3001a.ntf file" << endl;
>
>     }
>
>
> On running this code getting below error,
>
> *proj_context_get_database_path: Open of
> /home/nishant/miniconda3/share/proj failed*
>
>
> Am I missing any step? Please suggest.
>
> Kind Regards,
> Nishant
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/ddb5c912/attachment-0001.html>

From bo.victor.thomsen at gmail.com  Mon Jun 29 04:45:07 2020
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Mon, 29 Jun 2020 13:45:07 +0200
Subject: [gdal-dev] Problems with reading data into SQLServer
Message-ID: <260b066b-a4c1-41da-ccbe-af467f5bdbcc@gmail.com>

Hi all -

I'm trying to use ogr2ogr to read shape data into a SQL Server Spatial 
database using ogr2ogr.

The problem is that I have a insert trigger (which is absolutely 
necessary) on the receiving table.

The command is like this:

*ogr2ogr.exe --config MSSQLSPATIAL_USE_BCP false -append -skipfailures 
-a_srs EPSG:25832 -nlt PROMOTE_TO_MULTI -nln gnss_data -lco 
SCHEMA=transit -lco SPATIAL_INDEX=no -lco GEOMETRY_NAME=sp_geometry -lco 
FID=mi_prinx -dialect SQLITE -sql "SELECT ID AS id, TYPENAVN AS 
typenavn, KATEGORI AS kategori, REGISTRE AS registrering, 
ST_GeometryType(geometry) AS kommentar, DATO AS oprettet, INITIALER AS 
ini, 'Punkter.shp' AS filepath, geometry as sp_geometry from ""Punkter"" 
where IsEmpty(geometry) = 0 and IsValid(geometry) = 1" -f "MSSQLSpatial" 
"MSSQL:server=localhost\SQLExpress;database=drc-spor;trusted_connection=yes;" 
"Punkter.shp"***

Activates trigger, but is slow (even if I deactivate the trigger)

*ogr2ogr.exe --config MSSQLSPATIAL_USE_BCP true -append -skipfailures 
-a_srs EPSG:25832 -nlt PROMOTE_TO_MULTI -nln gnss_data -lco 
SCHEMA=transit -lco SPATIAL_INDEX=no -lco GEOMETRY_NAME=sp_geometry -lco 
FID=mi_prinx -dialect SQLITE -sql "SELECT ID AS id, TYPENAVN AS 
typenavn, KATEGORI AS kategori, REGISTRE AS registrering, 
ST_GeometryType(geometry) AS kommentar, DATO AS oprettet, INITIALER AS 
ini, 'Punkter.shp' AS filepath, geometry as sp_geometry from ""Punkter"" 
where IsEmpty(geometry) = 0 and IsValid(geometry) = 1" -f "MSSQLSpatial" 
"MSSQL:server=localhost\SQLExpress;database=drc-spor;trusted_connection=yes;" 
"Punkter.shp"***

No error and data is correctly read and imported fast, but no trigger 
activation.
**


Is there a qualifier/config option to get a trigger executed even if you 
are using the bcp-copy method for importing data into SQLServer ?

-- 
Med venlig hilsen / Kind regards

Bo Victor Thomsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/c3ff6099/attachment.html>

From jluis at ualg.pt  Mon Jun 29 04:55:27 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Jun 2020 11:55:27 +0000
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <17907045.KauOyWd94d@even-i700>
References: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
 <17907045.KauOyWd94d@even-i700>
Message-ID: <DB6PR04MB3303B7D1D7DC4C9A134948F0A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>

Hi Even,

I tried to build with your pdfium.lib but got these linking errors.

Joaquim


pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_info_handler already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_warning_handler already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_error_handler already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_create_decompress already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_default_decoder_parameters already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_codec_set_threads already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_setup_decoder already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_read_header already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_decode already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_decode_area already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_get_decoded_tile already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_decoded_resolution_factor already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_create_compress already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_set_default_encoder_parameters already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_setup_encoder already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_start_compress already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_end_compress already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_end_decompress already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_write_tile already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_destroy_codec already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_get_cstr_info already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(openjpeg.obj) : error LNK2005: opj_destroy_cstr_info already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(image.obj) : error LNK2005: opj_image_destroy already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(image.obj) : error LNK2005: opj_image_tile_create already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_create already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_destroy already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_set_read_function already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_set_seek_function already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_set_write_function already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_set_skip_function already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_set_user_data already defined in openjp2.lib(openjp2_w64.dll)
pdfium.lib(cio.obj) : error LNK2005: opj_stream_set_user_data_length already defined in openjp2.lib(openjp2_w64.dll)
   Creating library gdal_i.lib and object gdal_i.exp
gdal_w64.dll : fatal error LNK1169: one or more multiply defined symbols found


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Monday, June 29, 2020 10:34 AM
To: gdal-dev at lists.osgeo.org; William Kyngesburye <kyngchaos at kyngchaos.com>
Subject: Re: [gdal-dev] Problems with latest pdfium


William,



> I'm getting multiple errors trying to compile PDF support with pdfium.



See https://gdal.org/drivers/raster/pdf.html#pdfium



You need to build pdfium from the indicated forks.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/074697ca/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jun 29 05:18:22 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jun 2020 14:18:22 +0200
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <DB6PR04MB3303B7D1D7DC4C9A134948F0A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
 <17907045.KauOyWd94d@even-i700>
 <DB6PR04MB3303B7D1D7DC4C9A134948F0A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <1766061.5HKuYmRMjx@even-i700>

Joaquim,

> I tried to build with your pdfium.lib but got these linking errors.

It seems they are due to your GDAL build also linking against openjp2.lib, and 
pdfium.lib being linked against its internal copy of openjp2. I don't remember 
how I tested this. Perhaps this was with a GDAL build without openjp2. Or 
maybe when building the PDF driver as a plugin the error doesn't show up. I 
guess you could modify the pdfium build scripts to build against an external 
openjp2 lib.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/580e545f/attachment.html>

From even.rouault at spatialys.com  Mon Jun 29 05:27:09 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jun 2020 14:27:09 +0200
Subject: [gdal-dev] GDAL 3.1.1 is released
Message-ID: <1647824.1iBp1oP7ys@even-i700>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.1.1 bug fix version. This adds 69 bug fixes on top 
of 3.1.0.

Consult the release notes for the list of issues addressed :
  https://github.com/OSGeo/gdal/blob/v3.1.1/gdal/NEWS

The sources are available at:

    https://download.osgeo.org/gdal/3.1.1/gdal-3.1.1.tar.xz
    https://download.osgeo.org/gdal/3.1.1/gdal-3.1.1.tar.gz
    https://download.osgeo.org/gdal/3.1.1/gdal311.zip
    https://download.osgeo.org/gdal/3.1.1/gdal-grass-3.1.1.tar.gz

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/1337ad2a/attachment.html>

From jluis at ualg.pt  Mon Jun 29 05:49:51 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Jun 2020 12:49:51 +0000
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <1766061.5HKuYmRMjx@even-i700>
References: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
 <17907045.KauOyWd94d@even-i700>
 <DB6PR04MB3303B7D1D7DC4C9A134948F0A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1766061.5HKuYmRMjx@even-i700>
Message-ID: <DB6PR04MB3303AC5A2833480AD478B3E8A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>

Even, I would try it but I'm not being able to build pdfium. I get python errors such

________ running 'vpython.bat pdfium/tools/clang/scripts/update.py' in 'C:\programs\compa_libs\PDFium'
Downloading https://commondatastorage.googleapis.com/chromium-browser-clang/Win/clang-371202-8455294f-1.tgz .......... Done.
Copying C:\Program Files (x86)/Microsoft Visual Studio/2017/Community\DIA SDK\bin\amd64\msdia140.dll to C:\programs\compa_libs\PDFium\pdfium\third_party\llvm-build\Release+Asserts\bin
Running hooks: 100% (16/16), done.
        1 file(s) copied.
  File "C:\programs\WPy64-3.7.2\python-3.7.2.amd64\lib\site.py", line 177
    file=sys.stderr)
        ^
SyntaxError: invalid syntax
ninja: error: loading 'build.ninja': The system cannot find the file specified.

ninja: Entering directory `out\Release'
A subdirectory or file C:\programs\compa_libs\PDFium\install already exists.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium already exists.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium\public already exists.
...

The build continues but ends with (before It had several "already exists")

       18 file(s) copied.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium\third_party\base\numerics already exists.
third_party\base\numerics\safe_conversions.h
third_party\base\numerics\safe_conversions_arm_impl.h
third_party\base\numerics\safe_conversions_impl.h
third_party\base\numerics\safe_math.h
third_party\base\numerics\safe_math_impl.h
        5 file(s) copied.
A subdirectory or file C:\programs\compa_libs\PDFium\install\lib already exists.
The system cannot find the path specified.




From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, June 29, 2020 1:18 PM
To: Joaquim Manuel Freire Luís <jluis at ualg.pt>
Cc: gdal-dev at lists.osgeo.org; William Kyngesburye <kyngchaos at kyngchaos.com>
Subject: Re: [gdal-dev] Problems with latest pdfium


Joaquim,



> I tried to build with your pdfium.lib but got these linking errors.



It seems they are due to your GDAL build also linking against openjp2.lib, and pdfium.lib being linked against its internal copy of openjp2. I don't remember how I tested this. Perhaps this was with a GDAL build without openjp2. Or maybe when building the PDF driver as a plugin the error doesn't show up. I guess you could modify the pdfium build scripts to build against an external openjp2 lib.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/748f854a/attachment-0001.html>

From muro.hector at gmail.com  Mon Jun 29 06:53:11 2020
From: muro.hector at gmail.com (Hector muro)
Date: Mon, 29 Jun 2020 14:53:11 +0100
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
Message-ID: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>

Hi,

As a part of a project I need to load quite big geojsons into SQL Server
and I am using ogr2ogr to do so.

Here is an example command I am using:

ogr2ogr -f MSSQLSpatial
"MSSQL:server=xxx;database=xxx;UID=xxx;PWD=xxx;DRIVER={ODBC Driver 17 for
SQL Server}" -append --config SPATIAL_INDEX NO --config
MSSQLSPATIAL_USE_BCP TRUE --config MSSQLSPATIAL_BCP_SIZE 10000 --config
MSSQLSPATIAL_USE_GEOMETRY_COLUMNS NO -nln INM.nv_lv_ohline -nlt GEOMETRY
-t_srs EPSG:27700 -s_srs EPSG:4326 -skipfailures -splitlistfields
$DATA/data.json

I found that it is very slow and I have been checking the SQL Server
profiler (as suggested already in this thread:
https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html) and I can
confirm that it is trying to insert every record one-by-one, hence the
slowness.

What I can't get to understand is how to point gdal to my sql server
installation.

SQL Server version: 2016
GDAL: 3.0.4

Thanks and regards,

Hector Muro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/0f4078dc/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 29 07:09:59 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 29 Jun 2020 07:09:59 -0700 (MST)
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
In-Reply-To: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
References: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
Message-ID: <1593439799178-0.post@n6.nabble.com>

Hi,

Don't use -skipfailures. It is only possible to skip errors one by one if
transactions also contain just one row. It is even documented in the
Performance hints in https://gdal.org/programs/ogr2ogr.html.

-Jukka Rahkonen-



hectormauer wrote
> Hi,
> 
> As a part of a project I need to load quite big geojsons into SQL Server
> and I am using ogr2ogr to do so.
> 
> Here is an example command I am using:
> 
> ogr2ogr -f MSSQLSpatial
> "MSSQL:server=xxx;database=xxx;UID=xxx;PWD=xxx;DRIVER={ODBC Driver 17 for
> SQL Server}" -append --config SPATIAL_INDEX NO --config
> MSSQLSPATIAL_USE_BCP TRUE --config MSSQLSPATIAL_BCP_SIZE 10000 --config
> MSSQLSPATIAL_USE_GEOMETRY_COLUMNS NO -nln INM.nv_lv_ohline -nlt GEOMETRY
> -t_srs EPSG:27700 -s_srs EPSG:4326 -skipfailures -splitlistfields
> $DATA/data.json
> 
> I found that it is very slow and I have been checking the SQL Server
> profiler (as suggested already in this thread:
> https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html) and I can
> confirm that it is trying to insert every record one-by-one, hence the
> slowness.
> 
> What I can't get to understand is how to point gdal to my sql server
> installation.
> 
> SQL Server version: 2016
> GDAL: 3.0.4
> 
> Thanks and regards,
> 
> Hector Muro
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From woklist at kyngchaos.com  Mon Jun 29 07:26:23 2020
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 29 Jun 2020 09:26:23 -0500
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <17907045.KauOyWd94d@even-i700>
References: <17907045.KauOyWd94d@even-i700>
Message-ID: <518CDAE8-9E46-464A-B508-91934247BB7A@kyngchaos.com>

I'm compiling GDAL 3.1, the note says that only needs the patches.  It doesn't specify the source to use.

-----
William Kyngesburye
<kyngchaos at kyngchaos.com>
<http://www.kyngchaos.com>

Don't Panic

> On Jun 29, 2020, at 4:34 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> ﻿
> William,
> 
>> I'm getting multiple errors trying to compile PDF support with pdfium.
> 
> See https://gdal.org/drivers/raster/pdf.html#pdfium
> 
> You need to build pdfium from the indicated forks.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 29 07:39:08 2020
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 29 Jun 2020 14:39:08 +0000
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
Message-ID: <dd5a5fa80cca41869fed50462e5129ce@C119S212VM042.msvyvi.vaha.local>

Pity, I thought it would be simple but in your case avoiding -skipfailures is obviously not enough.

Please use “reply to all” on this mailing list, otherwise mail does not reach the list.

-Jukka Rahkonen-

Lähettäjä: Hector muro <muro.hector at gmail.com>
Lähetetty: maanantai 29. kesäkuuta 2020 17.28
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] MSSQLSpatial not using BCP to load

Hi,

Thanks for that. I removed the argument but the process still loads one-by-one and does not seem to use BCP...

Regards
Hector

On Mon, 29 Jun 2020 at 15:10, jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Don't use -skipfailures. It is only possible to skip errors one by one if
transactions also contain just one row. It is even documented in the
Performance hints in https://gdal.org/programs/ogr2ogr.html.

-Jukka Rahkonen-



hectormauer wrote
> Hi,
>
> As a part of a project I need to load quite big geojsons into SQL Server
> and I am using ogr2ogr to do so.
>
> Here is an example command I am using:
>
> ogr2ogr -f MSSQLSpatial
> "MSSQL:server=xxx;database=xxx;UID=xxx;PWD=xxx;DRIVER={ODBC Driver 17 for
> SQL Server}" -append --config SPATIAL_INDEX NO --config
> MSSQLSPATIAL_USE_BCP TRUE --config MSSQLSPATIAL_BCP_SIZE 10000 --config
> MSSQLSPATIAL_USE_GEOMETRY_COLUMNS NO -nln INM.nv_lv_ohline -nlt GEOMETRY
> -t_srs EPSG:27700 -s_srs EPSG:4326 -skipfailures -splitlistfields
> $DATA/data.json
>
> I found that it is very slow and I have been checking the SQL Server
> profiler (as suggested already in this thread:
> https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html) and I can
> confirm that it is trying to insert every record one-by-one, hence the
> slowness.
>
> What I can't get to understand is how to point gdal to my sql server
> installation.
>
> SQL Server version: 2016
> GDAL: 3.0.4
>
> Thanks and regards,
>
> Hector Muro
>
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/888cb01d/attachment.html>

From muro.hector at gmail.com  Mon Jun 29 07:41:01 2020
From: muro.hector at gmail.com (Hector muro)
Date: Mon, 29 Jun 2020 15:41:01 +0100
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
In-Reply-To: <1593439799178-0.post@n6.nabble.com>
References: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
 <1593439799178-0.post@n6.nabble.com>
Message-ID: <CAKdB_X4gG2gyUTskUU0VVB6DX2OCjHf_ZSwooO_Y00-gSUQkDw@mail.gmail.com>

Hi,

Cheers for that. I tried it, even specifying a "-gt 50000" for instance,
but still stuck with the single-transaction limit...

Any other suggestions?

On Mon, 29 Jun 2020 at 15:10, jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

> Hi,
>
> Don't use -skipfailures. It is only possible to skip errors one by one if
> transactions also contain just one row. It is even documented in the
> Performance hints in https://gdal.org/programs/ogr2ogr.html.
>
> -Jukka Rahkonen-
>
>
>
> hectormauer wrote
> > Hi,
> >
> > As a part of a project I need to load quite big geojsons into SQL Server
> > and I am using ogr2ogr to do so.
> >
> > Here is an example command I am using:
> >
> > ogr2ogr -f MSSQLSpatial
> > "MSSQL:server=xxx;database=xxx;UID=xxx;PWD=xxx;DRIVER={ODBC Driver 17 for
> > SQL Server}" -append --config SPATIAL_INDEX NO --config
> > MSSQLSPATIAL_USE_BCP TRUE --config MSSQLSPATIAL_BCP_SIZE 10000 --config
> > MSSQLSPATIAL_USE_GEOMETRY_COLUMNS NO -nln INM.nv_lv_ohline -nlt GEOMETRY
> > -t_srs EPSG:27700 -s_srs EPSG:4326 -skipfailures -splitlistfields
> > $DATA/data.json
> >
> > I found that it is very slow and I have been checking the SQL Server
> > profiler (as suggested already in this thread:
> > https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html) and I
> can
> > confirm that it is trying to insert every record one-by-one, hence the
> > slowness.
> >
> > What I can't get to understand is how to point gdal to my sql server
> > installation.
> >
> > SQL Server version: 2016
> > GDAL: 3.0.4
> >
> > Thanks and regards,
> >
> > Hector Muro
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/b2d422ff/attachment-0001.html>

From jluis at ualg.pt  Mon Jun 29 07:43:07 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Jun 2020 14:43:07 +0000
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <DB6PR04MB3303AC5A2833480AD478B3E8A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
 <17907045.KauOyWd94d@even-i700>
 <DB6PR04MB3303B7D1D7DC4C9A134948F0A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1766061.5HKuYmRMjx@even-i700>
 <DB6PR04MB3303AC5A2833480AD478B3E8A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <DB6PR04MB33034703F290B01D0C3497E1A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>

The python error coes from running this command

call gn.bat gen out\Release

apparently it doesn't find something and gives that incomprehensible error message.


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Joaquim Manuel Freire Luís
Sent: Monday, June 29, 2020 1:50 PM
To: Even Rouault <even.rouault at spatialys.com>
Cc: gdal-dev at lists.osgeo.org; William Kyngesburye <kyngchaos at kyngchaos.com>
Subject: Re: [gdal-dev] Problems with latest pdfium

Even, I would try it but I'm not being able to build pdfium. I get python errors such

________ running 'vpython.bat pdfium/tools/clang/scripts/update.py' in 'C:\programs\compa_libs\PDFium'
Downloading https://commondatastorage.googleapis.com/chromium-browser-clang/Win/clang-371202-8455294f-1.tgz .......... Done.
Copying C:\Program Files (x86)/Microsoft Visual Studio/2017/Community\DIA SDK\bin\amd64\msdia140.dll to C:\programs\compa_libs\PDFium\pdfium\third_party\llvm-build\Release+Asserts\bin
Running hooks: 100% (16/16), done.
        1 file(s) copied.
  File "C:\programs\WPy64-3.7.2\python-3.7.2.amd64\lib\site.py", line 177
    file=sys.stderr)
        ^
SyntaxError: invalid syntax
ninja: error: loading 'build.ninja': The system cannot find the file specified.

ninja: Entering directory `out\Release'
A subdirectory or file C:\programs\compa_libs\PDFium\install already exists.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium already exists.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium\public already exists.
...

The build continues but ends with (before It had several "already exists")

       18 file(s) copied.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium\third_party\base\numerics already exists.
third_party\base\numerics\safe_conversions.h
third_party\base\numerics\safe_conversions_arm_impl.h
third_party\base\numerics\safe_conversions_impl.h
third_party\base\numerics\safe_math.h
third_party\base\numerics\safe_math_impl.h
        5 file(s) copied.
A subdirectory or file C:\programs\compa_libs\PDFium\install\lib already exists.
The system cannot find the path specified.




From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, June 29, 2020 1:18 PM
To: Joaquim Manuel Freire Luís <jluis at ualg.pt<mailto:jluis at ualg.pt>>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>; William Kyngesburye <kyngchaos at kyngchaos.com<mailto:kyngchaos at kyngchaos.com>>
Subject: Re: [gdal-dev] Problems with latest pdfium


Joaquim,



> I tried to build with your pdfium.lib but got these linking errors.



It seems they are due to your GDAL build also linking against openjp2.lib, and pdfium.lib being linked against its internal copy of openjp2. I don't remember how I tested this. Perhaps this was with a GDAL build without openjp2. Or maybe when building the PDF driver as a plugin the error doesn't show up. I guess you could modify the pdfium build scripts to build against an external openjp2 lib.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/8f94c180/attachment.html>

From even.rouault at spatialys.com  Mon Jun 29 08:10:41 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jun 2020 17:10:41 +0200
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <518CDAE8-9E46-464A-B508-91934247BB7A@kyngchaos.com>
References: <17907045.KauOyWd94d@even-i700>
 <518CDAE8-9E46-464A-B508-91934247BB7A@kyngchaos.com>
Message-ID: <2002715.BQrMoVEvdF@even-i700>

On lundi 29 juin 2020 09:26:23 CEST William Kyngesburye wrote:
> I'm compiling GDAL 3.1, the note says that only needs the patches.  It
> doesn't specify the source to use.

So you need to use
https://github.com/rouault/pdfium_build_gdal_3_1

I presume you'll have to start from the Linux build script & patch and adapt it for the 
Mac.

build_linux.sh does the checkout of the revision of PDFium with which this was tested 
and applies code.patch and build_linux.patch


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/a7e775af/attachment.html>

From jluis at ualg.pt  Mon Jun 29 09:02:58 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 29 Jun 2020 16:02:58 +0000
Subject: [gdal-dev] Problems with latest pdfium
In-Reply-To: <DB6PR04MB33034703F290B01D0C3497E1A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <F38510C7-3F23-47FD-9D42-BA42A62A11C3@kyngchaos.com>
 <17907045.KauOyWd94d@even-i700>
 <DB6PR04MB3303B7D1D7DC4C9A134948F0A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1766061.5HKuYmRMjx@even-i700>
 <DB6PR04MB3303AC5A2833480AD478B3E8A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <DB6PR04MB33034703F290B01D0C3497E1A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <DB6PR04MB33034ED3132C9BA4A9FBAD83A66E0@DB6PR04MB3303.eurprd04.prod.outlook.com>

Tried with another python (miniconda this time) and ... some other error
(very picky these pythons)


A subdirectory or file out already exists.
A subdirectory or file Release already exists.
        1 file(s) copied.
Done. Made 139 targets from 82 files in 4709ms
ninja: Entering directory `out\Release'
[5/1097] COPY ../../third_party/icu/common/icudtl.dat icudtl.dat
FAILED: icudtl.dat
C:/programs/compa_libs/PDFium/depot_tools/bootstrap-3_8_0_chromium_8_bin/python/bin/python.exe ../../build/toolchain/win/tool_wrapper.py recursive-mirror ../../third_party/icu/common/icudtl.dat icudtl.dat
Traceback (most recent call last):
  File "../../build/toolchain/win/tool_wrapper.py", line 51, in <module>
    import win32file    # pylint: disable=import-error
ImportError: No module named win32file
[18/1097] CXX obj/third_party/googletest/gmock/gmock-spec-builders.obj
ninja: build stopped: subcommand failed.

From: Joaquim Manuel Freire Luís <jluis at ualg.pt>
Sent: Monday, June 29, 2020 3:43 PM
To: Joaquim Manuel Freire Luís <jluis at ualg.pt>; Even Rouault <even.rouault at spatialys.com>
Cc: gdal-dev at lists.osgeo.org; William Kyngesburye <kyngchaos at kyngchaos.com>
Subject: RE: [gdal-dev] Problems with latest pdfium

The python error coes from running this command

call gn.bat gen out\Release

apparently it doesn't find something and gives that incomprehensible error message.


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Joaquim Manuel Freire Luís
Sent: Monday, June 29, 2020 1:50 PM
To: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>; William Kyngesburye <kyngchaos at kyngchaos.com<mailto:kyngchaos at kyngchaos.com>>
Subject: Re: [gdal-dev] Problems with latest pdfium

Even, I would try it but I'm not being able to build pdfium. I get python errors such

________ running 'vpython.bat pdfium/tools/clang/scripts/update.py' in 'C:\programs\compa_libs\PDFium'
Downloading https://commondatastorage.googleapis.com/chromium-browser-clang/Win/clang-371202-8455294f-1.tgz .......... Done.
Copying C:\Program Files (x86)/Microsoft Visual Studio/2017/Community\DIA SDK\bin\amd64\msdia140.dll to C:\programs\compa_libs\PDFium\pdfium\third_party\llvm-build\Release+Asserts\bin
Running hooks: 100% (16/16), done.
        1 file(s) copied.
  File "C:\programs\WPy64-3.7.2\python-3.7.2.amd64\lib\site.py", line 177
    file=sys.stderr)
        ^
SyntaxError: invalid syntax
ninja: error: loading 'build.ninja': The system cannot find the file specified.

ninja: Entering directory `out\Release'
A subdirectory or file C:\programs\compa_libs\PDFium\install already exists.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium already exists.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium\public already exists.
...

The build continues but ends with (before It had several "already exists")

       18 file(s) copied.
A subdirectory or file C:\programs\compa_libs\PDFium\install\include\pdfium\third_party\base\numerics already exists.
third_party\base\numerics\safe_conversions.h
third_party\base\numerics\safe_conversions_arm_impl.h
third_party\base\numerics\safe_conversions_impl.h
third_party\base\numerics\safe_math.h
third_party\base\numerics\safe_math_impl.h
        5 file(s) copied.
A subdirectory or file C:\programs\compa_libs\PDFium\install\lib already exists.
The system cannot find the path specified.




From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, June 29, 2020 1:18 PM
To: Joaquim Manuel Freire Luís <jluis at ualg.pt<mailto:jluis at ualg.pt>>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>; William Kyngesburye <kyngchaos at kyngchaos.com<mailto:kyngchaos at kyngchaos.com>>
Subject: Re: [gdal-dev] Problems with latest pdfium


Joaquim,



> I tried to build with your pdfium.lib but got these linking errors.



It seems they are due to your GDAL build also linking against openjp2.lib, and pdfium.lib being linked against its internal copy of openjp2. I don't remember how I tested this. Perhaps this was with a GDAL build without openjp2. Or maybe when building the PDF driver as a plugin the error doesn't show up. I guess you could modify the pdfium build scripts to build against an external openjp2 lib.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200629/37504506/attachment-0001.html>

From ravitejakrishna.w at zohocorp.com  Tue Jun 30 03:23:58 2020
From: ravitejakrishna.w at zohocorp.com (Wuyyuru Ravi Teja Krishna)
Date: Tue, 30 Jun 2020 15:53:58 +0530
Subject: [gdal-dev] extra column id is present when converted to csv from
	topojson
Message-ID: <17304c136fc.e2aaaadd11968.6793139064869788040@zohocorp.com>

Hello,



I am using ogr2ogr with java bindings. When iam trying to convert a topojson file to a csv file an extra column named "id" is coming in converted csv file with null values. How can i convert from topojson to csv without getting such extra columns. 

the command i am using for conversion is as below


java -cp :gdal.jar -Djava.library.path=libs/ ogr2ogr "-s_srs" "CRS:84" "-t_srs" "CRS:84" "-f" "CSV" filename.csv filename.topojson "-lco" "GEOMETRY=AS_WKT"




Thanks in advance.
Any clarification regarding this issue will be helpful to us.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200630/a4a254bf/attachment.html>

From muro.hector at gmail.com  Tue Jun 30 03:50:16 2020
From: muro.hector at gmail.com (Hector muro)
Date: Tue, 30 Jun 2020 11:50:16 +0100
Subject: [gdal-dev] Has ogr2ogr support for BCP Bulk Load on Unix?
Message-ID: <CAKdB_X7ukv5e4CUM5vRbiLvyNA5DvmeqptPBPxoqosowLhJXSw@mail.gmail.com>

Hi,

I've seen that there is support for BCP bulk load support since gdal 2.1.0,
but from other posts in this list and all mentions in the docs, it looks as
if this support is only available for Windows, not unix (I hope I am wrong
and my problem comes from somewhere else), e.g.:


   - https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html
   -
   http://osgeo-org.1560.x6.nabble.com/gdal-dev-connect-mssql-from-linux-td5363547.html



And here:
https://gdal.org/drivers/vector/mssqlspatial.html#configuration-options

"*MSSQLSPATIAL_USE_BCP*: (From GDAL 2.1.0) Enable bulk insert when adding
features. This option requires to to compile GDAL against a bulk copy
enabled ODBC driver like SQL Server Native Client 11.0. To specify a BCP
supported driver in the connection string, use the driver parameter, like
DRIVER={SQL Server Native Client 11.0}. If GDAL is compiled against SQL
Server Native Client 10.0 or 11.0 the driver is selected automatically not
requiring to specify that in the connection string. If GDAL is compiled
against SQL Server Native Client 10.0 or 11.0 the default setting of this
parameter is TRUE, otherwise the parameter is ignored by the driver."

It all references SQL Server Native Client and even in the code I've seen
"sqlncli", whereas the driver in Linux for SQL Server is called "ODBC
Driver XX for SQL Server", e.g.:

[ODBC Driver 17 for SQL Server]
Description=Microsoft ODBC Driver 17 for SQL Server
Driver=/opt/microsoft/msodbcsql17/lib64/libmsodbcsql-17.5.so.2.1

(Also, what does "compile GDAL against a bulk copy enabled ODBC driver
like" mean? I have built GDAL from source, configuring it with the
flag --enable-driver-mssqlspatial)

So I am wondering how does gdal checks if there is BCP Support? Like these
lines that i.e. #ifdef MSSQL_BCP_SUPPORTED? Is it a "Windows"-check feature?

I am asking because we have gdal and SQL Server on a CentOS machine and we
certainly have BCP, SQLCMD and other SQL Server tools available, but when
using ogr2ogr to load source files into a SQL Server instance it does not
use BCP. It instead loads one-by-one and this causes the process to be
really slow.

SQL Server version: 2017
GDAL version: 3.0.4

Any help/tips will be very appreciated.

Thanks

Hector Muro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200630/6863ca1d/attachment.html>

From mateusz at loskot.net  Tue Jun 30 05:43:48 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 30 Jun 2020 14:43:48 +0200
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
In-Reply-To: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
References: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
Message-ID: <CABUeae9acdAw8ptYviTwSTES-ZCE_3qfxaHrpGWhhP0QhN950w@mail.gmail.com>

On Mon, 29 Jun 2020 at 15:53, Hector muro <muro.hector at gmail.com> wrote:
>
> As a part of a project I need to load quite big geojsons into SQL Server and I am using ogr2ogr to do so.
>
> Here is an example command I am using:
>
> ogr2ogr -f MSSQLSpatial "MSSQL:server=xxx;database=xxx;UID=xxx;PWD=xxx;DRIVER={ODBC Driver 17 for SQL Server}" -append --config SPATIAL_INDEX NO --config MSSQLSPATIAL_USE_BCP TRUE --config MSSQLSPATIAL_BCP_SIZE 10000 --config MSSQLSPATIAL_USE_GEOMETRY_COLUMNS NO -nln INM.nv_lv_ohline -nlt GEOMETRY -t_srs EPSG:27700 -s_srs EPSG:4326 -skipfailures -splitlistfields $DATA/data.json
>
> I found that it is very slow and I have been checking the SQL Server profiler (as suggested already in this thread: https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html) and I can confirm that it is trying to insert every record one-by-one, hence the slowness.
>
> What I can't get to understand is how to point gdal to my sql server installation.
>
> SQL Server version: 2016
> GDAL: 3.0.4

Double check your GDAL is built with MSSQL_BCP_SUPPORTED=1 macro defined
https://github.com/OSGeo/gdal/blob/7ce18dfea8c2c6c2d73d5824cf1c91f6e0287a75/gdal/nmake.opt#L288-L298

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From muro.hector at gmail.com  Tue Jun 30 06:26:32 2020
From: muro.hector at gmail.com (Hector muro)
Date: Tue, 30 Jun 2020 14:26:32 +0100
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
In-Reply-To: <CABUeae9acdAw8ptYviTwSTES-ZCE_3qfxaHrpGWhhP0QhN950w@mail.gmail.com>
References: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
 <CABUeae9acdAw8ptYviTwSTES-ZCE_3qfxaHrpGWhhP0QhN950w@mail.gmail.com>
Message-ID: <CAKdB_X6+kz+FzzRp3oLwT5rkHLRxa96LwZ9K_v2ReuExGimepA@mail.gmail.com>

Hi Mateusz

Thanks a lot for that. I can see that in my gdal copy it is commented out.
But I also see all these paths refer to a Windows installation. Does this
mean the BCP support is only available for a Windows installation?

Regards
Hector

On Tue, 30 Jun 2020 at 13:42, Mateusz Loskot <mateusz at loskot.net> wrote:

> On Mon, 29 Jun 2020 at 15:53, Hector muro <muro.hector at gmail.com> wrote:
> >
> > As a part of a project I need to load quite big geojsons into SQL Server
> and I am using ogr2ogr to do so.
> >
> > Here is an example command I am using:
> >
> > ogr2ogr -f MSSQLSpatial
> "MSSQL:server=xxx;database=xxx;UID=xxx;PWD=xxx;DRIVER={ODBC Driver 17 for
> SQL Server}" -append --config SPATIAL_INDEX NO --config
> MSSQLSPATIAL_USE_BCP TRUE --config MSSQLSPATIAL_BCP_SIZE 10000 --config
> MSSQLSPATIAL_USE_GEOMETRY_COLUMNS NO -nln INM.nv_lv_ohline -nlt GEOMETRY
> -t_srs EPSG:27700 -s_srs EPSG:4326 -skipfailures -splitlistfields
> $DATA/data.json
> >
> > I found that it is very slow and I have been checking the SQL Server
> profiler (as suggested already in this thread:
> https://lists.osgeo.org/pipermail/gdal-dev/2018-May/048520.html) and I
> can confirm that it is trying to insert every record one-by-one, hence the
> slowness.
> >
> > What I can't get to understand is how to point gdal to my sql server
> installation.
> >
> > SQL Server version: 2016
> > GDAL: 3.0.4
>
> Double check your GDAL is built with MSSQL_BCP_SUPPORTED=1 macro defined
>
> https://github.com/OSGeo/gdal/blob/7ce18dfea8c2c6c2d73d5824cf1c91f6e0287a75/gdal/nmake.opt#L288-L298
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200630/b96ab9a4/attachment.html>

From mateusz at loskot.net  Tue Jun 30 07:17:52 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 30 Jun 2020 16:17:52 +0200
Subject: [gdal-dev] MSSQLSpatial not using BCP to load
In-Reply-To: <CAKdB_X6+kz+FzzRp3oLwT5rkHLRxa96LwZ9K_v2ReuExGimepA@mail.gmail.com>
References: <CAKdB_X6KAwYO0h9hg87Mrf0WRRxGG3dt9HBs-RRXPJ8vg6XaVw@mail.gmail.com>
 <CABUeae9acdAw8ptYviTwSTES-ZCE_3qfxaHrpGWhhP0QhN950w@mail.gmail.com>
 <CAKdB_X6+kz+FzzRp3oLwT5rkHLRxa96LwZ9K_v2ReuExGimepA@mail.gmail.com>
Message-ID: <CABUeae_9nS-vZwuUmiX9qQfNPUf2yVuW3GKKNB9WdRN35Dw83A@mail.gmail.com>

On Tue, 30 Jun 2020, 15:27 Hector muro, <muro.hector at gmail.com> wrote:

> Hi Mateusz
>
> Thanks a lot for that. I can see that in my gdal copy it is commented out.
> But I also see all these paths refer to a Windows installation. Does this
> mean the BCP support is only available for a Windows installation?
>

¯\_(ツ)_/¯

It definitely is a feature toggled at compile--time

Mateusz Loskot, mateusz at loskot.net
(Sent from mobile, may suffer from top-posting)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200630/02a59abf/attachment-0001.html>

