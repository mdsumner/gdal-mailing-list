From hw8c2 at mizzou.edu  Wed Sep  4 14:56:54 2002
From: hw8c2 at mizzou.edu (Wang, Hao)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] How can I build my application without using the "gdl11.dll"
Message-ID: <002201c25444$d66be620$970000c0@LeoPIEngr>

Hi, 

I am developing an application that could read ArcInfo binary grid using MS VC++ 6.0. I got some errors like:

aigccitt.obj : error LNK2001: unresolved external symbol _CPLError
aigopen.obj : error LNK2001: unresolved external symbol _CPLError
gridlib.obj : error LNK2001: unresolved external symbol _CPLError
aigopen.obj : error LNK2001: unresolved external symbol _VSIFClose

But when I added the "gdal_i.lib" as Objects/library modules in the Project Setting, I was prompted to have the file "gdal11.dll" to build my program. So, I am wondering if there is a way to use that part of the GDAL library without binding my program with "gdal11.dll".

Thanks,

Hao
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020904/dcc26379/attachment.html
From dem at acri-st.fr  Thu Sep  5 10:16:32 2002
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GDAL and Kakadu JPEG2000 performances and quality
Message-ID: <5.0.2.1.2.20020905151538.00a62ec0@mail.acri.fr>

Hi,


I'm testing GDAL JPEG2000 with Kakadu and I have some questions about 
performances and resulting quality :

My test is simple :

INPUT : a simple BMP file RGB 5096x4496 : size : 66 Mo

OUPUT : I want a JP2 file with size near 8 Mo

PLATFORM : Cygwin under Windows NT

First I try with kdu_compress include in binary package ok Kakadu 4.0.3 for 
Windows :
time kdu_compress.exe -i RGB.bmp -o RGB_kakadu_compress.jp2 -rate 
2.85,2.85,2.85
=> 36 seconds

Then I try the same with gdal_translate included in OpenEV_FW_1.6.2 binary 
package :
time gdal_translate.exe -of JP2KAK -co QUALITY=12 win32_executables/RGB.bmp 
RGB_kakadu_gdal.jp2
=> 96 seconds

Do you know why there is this difference of performances ?

In the GDAL 1.1.9 Kakadu source code driver I see that JP2 Kakadu files are 
virtually tiled into 512x128 tiles :

/* -------------------------------------------------------------------- */
/*      Use a 512x128 "virtual" block size unless the file is small.    */
/* -------------------------------------------------------------------- */
     if( nRasterXSize >= 1024 )
         nBlockXSize = 512;
     else
         nBlockXSize = nRasterXSize;

     if( nRasterYSize >= 256 )
         nBlockYSize = 128;
     else
         nBlockYSize = nRasterYSize;

Maybe this virtual tiling is the reason ?
(I don't know how kdu_compress write the data...)


When I compared visually the results (with OpenEV without viewer 
interpolation) I see also a big quality difference :
I have attached in the mail a ZIP file with the different snapshots.
The JP2 created with kakadu_compress seems better and I find that the image 
created by GDAL seems have colorimetric degradation (the color of some 
pixels seems surprising (are kakadu and/or gdal commpress RGB components 
separately ?)).

How can I obtain the same results with GDAL than with kakadu_compress ?

Sorry I'm newbie in JPEG2000 and Kakadu and GDAL and maybe the cause is I 
didn't pass the good arguments to GDAL and/or kakadu_compress...


Many thanks in advance and sorry for my poor english,

Julien

PS : kakadu_compress print a warning :
"Note:
     The default rate control policy for colour images employs visual (CSF)
     weighting factors.  To minimize MSE instead, specify `-no_weights'."
What is it ?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: comparison_gdal_kakadu.zip
Type: application/zip
Size: 11612 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020905/4a97d966/comparison_gdal_kakadu.zip
From paul at t...  Mon Sep  2 02:38:20 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:17 2007
Subject: World File Extensions
Message-ID: <000701c2524b$56cdade0$700201c0@M...>

Hello All,
What are the world file extensions supported for non-GIS raster
formats like the PNG, GIF, JPEG/JFIF etc?

>From the information I got so far, it ERSI is using the following

Windows Bitmap (*.bmp) --> *.bmpw or *.bpw

TIFF (*.tiff, *.tif, *.tff) --> *.tfw

Sun Raster File (*.sun, *.ras) --> *.snw, *.rsw

However, I could not get information on the PNG, GIF and JPEG.
Which source file contains these information?

Best regards,
Paul.




From dron at a...  Mon Sep  2 05:23:36 2002
From: dron at a... (Andrey Kiselev)
Date: Wed Nov 21 11:49:17 2007
Subject: [gdal-dev] World File Extensions
In-Reply-To: <000701c2524b$56cdade0$700201c0@M...>
References: <000701c2524b$56cdade0$700201c0@M...>
Message-ID: <20020902092336.GA4049@a...>

> What are the world file extensions supported for non-GIS raster
> formats like the PNG, GIF, JPEG/JFIF etc?
> >From the information I got so far, it ERSI is using the following
> Windows Bitmap (*.bmp) --> *.bmpw or *.bpw
> TIFF (*.tiff, *.tif, *.tff) --> *.tfw
> Sun Raster File (*.sun, *.ras) --> *.snw, *.rsw
> However, I could not get information on the PNG, GIF and JPEG.
> Which source file contains these information?

PNG driver can create world files with .wld suffix and read world files
with .wld, .tfw, and .tifw. For GIF .wld suffix supported for reading
and creation. For JPEG files .jgw and .wld suffixes supported for
reading and .wld for creation. This information missed from drivers
documentation, I have fix it.


-- 
Andrey V. Kiselev
Scientific Research Center for Ecological Safety Russian Academy of Sciences
Office phone: +7 812 2307834 ICQ UIN 26871517
Registered Linux user number 169907

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 35 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020902/274395a0/attachment.bin
From paul at t...  Mon Sep  2 05:43:43 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:17 2007
Subject: [gdal-dev] World File Extensions
References: <000701c2524b$56cdade0$700201c0@M...> <20020902092336.GA4049@a...>
Message-ID: <000c01c25265$3bb4e2c0$700201c0@M...>

Hello Andrey,
Thanks so much for the information. I need two more information:

I have searched the sources for these information, which source file
contains the information?

Finally, what is the format for the general world file? (I have seen 6 lines
of numerical values in the *.tfw, but could not understand them).

Best regards,
Paul.

----- Original Message -----
From: "Andrey Kiselev" <dron@a...>
To: <gdal-dev@yahoogroups.com>
Sent: Monday, September 02, 2002 6:23 PM
Subject: Re: [gdal-dev] World File Extensions





From dron at a...  Mon Sep  2 06:54:09 2002
From: dron at a... (Andrey Kiselev)
Date: Wed Nov 21 11:49:17 2007
Subject: [gdal-dev] World File Extensions
In-Reply-To: <000c01c25265$3bb4e2c0$700201c0@M...>
References: <000701c2524b$56cdade0$700201c0@M...> <20020902092336.GA4049@a...> <000c01c25265$3bb4e2c0$700201c0@M...>
Message-ID: <20020902105409.GB16739@a...>

> I have searched the sources for these information, which source file
> contains the information?

Source files for individual datasets contains all needed information.
Look into /frmts/<drivername>/<drivername>dataset.cpp files and search
them for words `WORLDFILE' and `wld'.
Functions GDALReadWorldFile() and GDALWriteWorldFile() implemented in
the /core/gdal_misc.cpp.

> Finally, what is the format for the general world file? (I have seen 6 lines
> of numerical values in the *.tfw, but could not understand them).

It is coefficients of the affine transform.

<pixel width>
<row rotation>
<column rotation>
<pixel height>
<X coordinate of the top left pixel center>
<Y coordinate of the top left pixel center>

-- 
Andrey V. Kiselev
Scientific Research Center for Ecological Safety Russian Academy of Sciences
Office phone: +7 812 2307834 ICQ UIN 26871517
Registered Linux user number 169907

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 35 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020902/4993df08/attachment.bin
From paul at t...  Mon Sep  2 06:55:03 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:17 2007
Subject: [gdal-dev] World File Extensions
References: <000701c2524b$56cdade0$700201c0@M...> <20020902092336.GA4049@a...> <000c01c25265$3bb4e2c0$700201c0@M...> <20020902105409.GB16739@a...>
Message-ID: <001601c2526f$330ad2b0$700201c0@M...>

Thanks, printed for reference!

Best regards,
Paul.

----- Original Message ----- 
From: "Andrey Kiselev" <dron@a...>
To: <gdal-dev@yahoogroups.com>
Sent: Monday, September 02, 2002 7:54 PM
Subject: Re: [gdal-dev] World File Extensions





From warmerdam at p...  Wed Sep  4 03:04:03 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:17 2007
Subject: GDALDestroyDriverManager() and static driver pointers
Message-ID: <3D75B063.1010800@p...>

Folks,

I have implemented GDALDestroyDriverManager() in response to the request 
for a way to
cleanup loaded drivers. However, to make it work smoothly, such that 
drivers can be reloaded
properly with a GDALAllRegister() call after destroying the driver 
manager, it is important that
we no longer maintain static driver pointers within out driver 
implementations.

In the past each driver maintained a static pointer to its GDALDriver 
instance. The problem
with this is that this doesn't get "NULLed" when the driver is 
destroyed. So, to fix do the
following steps to any drivers not in CVS (I have fixed all these):

o Remove the static pointer.
o Remove any initialization of the poDriver pointer in the GDALDataset. 
This will be taken
care of by GDALOpen().
o Change your register function to check if the driver is already 
loaded by calling
GDALGetDriverByName().

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent





From paul at t...  Wed Sep  4 04:44:03 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:17 2007
Subject: [gdal-dev] GDALDestroyDriverManager() and static driver pointers
References: <3D75B063.1010800@p...>
Message-ID: <001701c253ef$3cc81570$700201c0@M...>

Hello Frank,
Thanks so much for the fix and the update. I also wished the static global
driver manager is actually managed by the user.

static GDALDriverManager *poDM = NULL;

Something like

GDALDriverManger gdalDriverMager;

GDALStartup(&gdalDriverMager, ...);

.....use it

GDALShutdown(&gdalDriverMager, ...);

However, after looking a bit at the sources, it seems this will affect the
current
framework. I could then have the GDALDriverManager as member of a class
in an application :-)

I have many wishes, but you know they are not horses :-) I also wished the
various drivers were implemented as share library (dll for Windows). That
way,
I could simply take GeoTiff, if that is all that I want in an application.
In fact, if
there is no need to use GDAL to access a GeoTiff file, I could also use the
share
library directly.

Again, thanks so much.

Best regards,
Paul.


----- Original Message -----
From: "Frank Warmerdam" <warmerdam@p...>
To: "gdal-dev" <gdal-dev@yahoogroups.com>
Sent: Wednesday, September 04, 2002 4:04 PM
Subject: [gdal-dev] GDALDestroyDriverManager() and static driver pointers


>
> Folks,
>
> I have implemented GDALDestroyDriverManager() in response to the request
> for a way to
> cleanup loaded drivers. However, to make it work smoothly, such that
> drivers can be reloaded
> properly with a GDALAllRegister() call after destroying the driver
> manager, it is important that
> we no longer maintain static driver pointers within out driver
> implementations.
>
> In the past each driver maintained a static pointer to its GDALDriver
> instance. The problem
> with this is that this doesn't get "NULLed" when the driver is
> destroyed. So, to fix do the
> following steps to any drivers not in CVS (I have fixed all these):
>
> o Remove the static pointer.
> o Remove any initialization of the poDriver pointer in the GDALDataset.
> This will be taken
> care of by GDALOpen().
> o Change your register function to check if the driver is already
> loaded by calling
> GDALGetDriverByName().
>
> Best regards,
>
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up | Frank Warmerdam,
warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>



From warmerdam at p...  Wed Sep  4 08:27:18 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:17 2007
Subject: [gdal-dev] GDALDestroyDriverManager() and static driver pointers
References: <3D75B063.1010800@p...> <001701c253ef$3cc81570$700201c0@M...>
Message-ID: <3D75FC26.5070905@p...>

Paul Selormey wrote:

>I have many wishes, but you know they are not horses :-) 
>

Paul,

This must be an idiom I am not familiar with.

>I also wished the
>various drivers were implemented as share library (dll for Windows). That
>way,
>I could simply take GeoTiff, if that is all that I want in an application.
>
> 
>
In fact, there is support for auto-loading drivers from a shared 
library. The GDALDriverManager will
auto load drivers from any file named gdal_<drivername>.so in the gdal 
driver path, and then call
GDALRegister_<drivername> within that file to register it. The driver 
path is read from the
GDAL_DRIVER_PATH environment variable and defaults to /usr/local/lib if 
nothing else is found.
The auto-load support is invoked as soon as the GDALDriverManager is 
first constructed.

It isn't currently used by anyone, as far as I know. It was intended to 
make it possible to add drivers
to pre-built GDAL binary distributions, including potentially 
proprietary driver or drivers with lots
of dependencies that it might not be desireable to have in a core build.

As we discussed a few months ago, drivers are fairly sensitive to 
changes in GDAL version due to
changes in the base classes which are subclassed by drivers, so 
generally such standalone drivers
would need to be compiled for pretty much exactly the matching GDAL version.

>In fact, if
>there is no need to use GDAL to access a GeoTiff file, I could also use the
>share
>library directly.
>
Well, the drivers aren't really useful all on their own and it isn't my 
intention that they be.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent






From warmerdam at p...  Wed Sep  4 10:04:45 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:17 2007
Subject: gdal build instructions
Message-ID: <3D7612FD.8000707@p...>

Folks,

I have updated the GDAL build instructions somewhat, especially for 
windows. Available at:

http://www.remotesensing.org/gdal/gdal_building.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent





From paul at t...  Wed Sep  4 10:19:12 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] gdal build instructions
References: <3D7612FD.8000707@p...>
Message-ID: <000b01c2541e$0d238960$700201c0@M...>

Hello Frank,
Thanks for the update. Anywhere to download the test data for the support
data formats?

Also, this is off-topic - the Shapefile library contains world map data.
What is
the projection of this data? (do you have the ESRI's prj file for it?)

Best regards,
Paul.

----- Original Message -----
From: "Frank Warmerdam" <warmerdam@p...>
To: "gdal-dev" <gdal-dev@yahoogroups.com>
Sent: Wednesday, September 04, 2002 11:04 PM
Subject: [gdal-dev] gdal build instructions


>
> Folks,
>
> I have updated the GDAL build instructions somewhat, especially for
> windows. Available at:
>
> http://www.remotesensing.org/gdal/gdal_building.html
>
> Best regards,
>
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up | Frank Warmerdam,
warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>



From warmerdam at p...  Wed Sep  4 14:19:31 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: Exporting .adf files to xyz ascii format
References: <F60gUp5G9C1opccV19X0000173d@h...>
Message-ID: <3D764EB3.4040209@p...>


William,

OK, first download, and unpack:

ftp://ftp.remotesensing.org/pub/gdal/openev/OpenEV_FW_142.zip

Edit the openev_fw\setfw.bat file and fix the OPENEV_FW_DIR to point to 
whereever
you installed the tree. Dump the attached gdal2xyz.py script into the 
'openev_fw' directory
(same place as the setfw.bat file). Then in a dos window:

cd <wherever you put stuff>
setfw.bat
python gdal2xyz.py demo-data\utm.tif out.txt

This should (slowly) translate the example raster file, 
demo-data\utm.tif, into
a text file in xyz format called out.txt.

You can do the same thing for your file. Use the name of the directory 
containing
the w001001.adf as the input filename.

The gdal2xyz.py script also includes some additional commandline options for
capturing subsets of your data:

python gdal2xyz.py
Usage: gdal2xyz.py [-skip factor] [-srcwin xoff yoff width height]
[-band b] srcfile [dstfile]

The gdal2xyz.py script has also been committed to CVS, and is available 
for anyone else
who wants to do something similar. I hope this helps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent



-------------- next part --------------
name="gdal2xyz.py"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
filename="gdal2xyz.py"

#!/usr/bin/env python
###############################################################################
# $Id: gdal2xyz.py,v 1.2 2002/09/04 18:11:17 warmerda Exp $
#
# Project: GDAL
# Purpose: Script to translate GDAL supported raster into XYZ ASCII
# point stream.
# Author: Frank Warmerdam, warmerdam@p...
#
###############################################################################
# Copyright (c) 2002, Frank Warmerdam <warmerdam@p...>
# 
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Library General Public
# License as published by the Free Software Foundation; either
# version 2 of the License, or (at your option) any later version.
# 
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# Library General Public License for more details.
# 
# You should have received a copy of the GNU Library General Public
# License along with this library; if not, write to the
# Free Software Foundation, Inc., 59 Temple Place - Suite 330,
# Boston, MA 02111-1307, USA.
###############################################################################
# 
# $Log: gdal2xyz.py,v $
# Revision 1.2 2002/09/04 18:11:17 warmerda
# fixed to emit center of pixel
#
# Revision 1.1 2002/09/04 17:58:07 warmerda
# New
#
#

import gdal
import sys
import Numeric

# =============================================================================
def Usage():
print 'Usage: gdal2xyz.py [-skip factor] [-srcwin xoff yoff width height]'
print ' [-band b] srcfile [dstfile]'
print
sys.exit( 1 )

# =============================================================================
#
# Program mainline.
#

if __name__ == '__main__':

srcwin = None
skip = 1 
srcfile = None
dstfile = None
band_num = 1

# Parse command line arguments.
i = 1
while i < len(sys.argv):
arg = sys.argv[i]

if arg == '-srcwin':
srcwin = (int(sys.argv[i+1]),int(sys.argv[i+2]),
int(sys.argv[i+3]),int(sys.argv[i+4]))
i = i + 4

elif arg == '-skip':
skip = int(sys.argv[i+1])
i = i + 1

elif arg == '-band':
band_num = int(sys.argv[i+1])
i = i + 1

elif arg[0] == '-':
Usage()

elif srcfile is None:
srcfile = arg

elif dstfile is None:
dstfile = arg

else:
Usage()

i = i + 1

if srcfile is None:
Usage()

# Open source file. 
srcds = gdal.Open( srcfile )
if srcds is None:
print 'Could not open %s.' % srcfile
sys.exit( 1 )

band = srcds.GetRasterBand(band_num)
if band is None:
print 'Could not get band %d' % band_num
sys.exit( 1 )

gt = srcds.GetGeoTransform()

# Collect information on all the source files.
if srcwin is None:
srcwin = (0,0,srcds.RasterXSize,srcds.RasterYSize)

# Open the output file.
if dstfile is not None:
dst_fh = open(dstfile,'wt')
else:
dst_fh = sys.stdout

# Setup an appropriate print format.
if abs(gt[0]) < 180 and abs(gt[3]) < 180 \
and abs(srcds.RasterXSize * gt[1]) < 180 \
and abs(srcds.RasterYSize * gt[5]) < 180:
format = '%.10g %.10g %g\n'
else:
format = '%.3f %.3f %g\n'

# Loop emitting data.

for y in range(srcwin[1],srcwin[1]+srcwin[3],skip):

data = band.ReadAsArray( srcwin[0], y, srcwin[2], 1 ) 
data = Numeric.reshape( data, (srcwin[2],) )

for x_i in range(0,srcwin[2],skip):

x = x_i + srcwin[0]

geo_x = gt[0] + (x+0.5) * gt[1] + (y+0.5) * gt[2]
geo_y = gt[3] + (x+0.5) * gt[4] + (y+0.5) * gt[5]

line = format % (float(geo_x),float(geo_y),data[x_i])

dst_fh.write( line )


From shimitz at u...  Thu Sep  5 20:34:19 2002
From: shimitz at u... (April Shimitz)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] shared datasets
Message-ID: <OF05A90F6F.F8B1C688-ON86256C2C.000303CE@c...>

Frank,

Can you give me an idea when these changes will be made, or should I just
commit them to the repository myself?

April

----- Forwarded by April Shimitz/NMD/CONT/USGS/DOI on 09/05/02 07:32 PM
-----

"April Shimitz" 
<shimitz@u... To: gdal-dev@yahoogroups.com 
v> cc: 
Subject: [gdal-dev] shared datasets 
08/20/02 11:01 
AM 
Please respond 
to gdal-dev 








(Embedded image moved My Groups | gdal-dev Main Page 
to file: 
pic10881.gif) 






Frank,

I have a few changes for the GDAL core. First is just a minor bug in the
GDALDataset Create method. The return of GetDescription() is getting
checked at line 185 against NULL, but GetDescription returns the
description string or an empty string. I think Create should be comparing
the return to an empty string, not NULL.

For LAS, we have implemented a wrapper layer around the GDAL calls to make
our transition from our old image I/O library to the GDAL library a
smoother process. In the wrapper layer we implemented some routines to
track the open datasets so files don't get opened multiple times. I just
found a bug in one of those routines and was trying to fix it when I came
across your GDALOpenShared function. The dataset sharing you've implemented
does has mostly the same functionality we had implemented in our wrapper
layer, so I decided to just use that instead. There were a couple glitches
I found when trying to use it though - functionality I need but couldn't
find implemented anywhere (I could have just missed it if it is already).
First, I need some way to find out what datasets are currently open quicker
than dumping the datasets to a file (GDALDumpOpenDatasets) then parsing the
file to retrieve the datasets. So I implemented a public version of the
GetOpenDatasets routine (GDALGetOpenDatasets). The other thing was that I
needed the ability to determine the access method used to open the file
described by a given dataset. That was not available publicly either, so I
implemented a GDALGetAccess routine. I have attached a single patch file
containing these modifications.

Let me know when (and if) these routines get incorporated into the GDAL
core and if you make any changes to them.

Thanks,
April Shimitz

(See attached file: gdalcore.patch)

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. (See
attached file: gdalcore.patch)



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 147 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020905/bcc26985/attachment.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/octet-stream
Size: 151 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020905/bcc26985/attachment.obj
From warmerdam at p...  Thu Sep  5 21:31:21 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] shared datasets
References: <OF05A90F6F.F8B1C688-ON86256C2C.000303CE@c...>
Message-ID: <3D780569.80002@p...>

April Shimitz wrote:
> Frank,
> 
> Can you give me an idea when these changes will be made, or should I just
> commit them to the repository myself?

April,

Sorry about that. Your email got waylaid in a bunch of other stuff from while
I was at the cottage. I have committed your fixes with a slight alteration to
the description portion. Let me know if you have any more problems.

You also have permission to commit changes you don't expect to be controversial
yourself, as long as you provide me some notice after the fact.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From blazek at i...  Fri Sep  6 04:50:04 2002
From: blazek at i... (Radim Blazek)
Date: Wed Nov 21 11:49:18 2007
Subject: Sample 3D shapefiles
Message-ID: <02090610500401.13195@janacek>

Hi,

does anybody know about any free sample 3D shapefiles? Just for tests.
(true 3D not 2.5D)

Radim


From warmerdam at p...  Wed Sep 11 10:37:32 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: Band Descriptions
Message-ID: <3D7F552C.60307@p...>

Folks,

I have done some work to add band description support in the PCI .aux format,
and modified gdal_translate (and the default GDALDriver.CreateCopy() method)
to carry band descriptions over when available. I also added a
GDALSetDescription() C entry point and made GetDescription/SetDescription
virtual on the GDALMajorObject. Unfortunately, the last change means that
the C++ API is incompatibly changed. Ensure that you do a clean rebuild of
GDAL after your next update from CVS.

I am interested in making band descriptions work well in other places they
should appear. Let me know if you find any problems with the band description
support.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From ben at v...  Wed Sep 11 16:09:48 2002
From: ben at v... (Ben Discoe)
Date: Wed Nov 21 11:49:18 2007
Subject: Xerces version?
In-Reply-To: <3D69CB0D.5090109@p...>
Message-ID: <MGEOKJAEOFKANAFBLFGGCEKGDKAA.ben@v...>


What version of Xerces should i use to build GDAL? The last time i grabbed
the gdal 1.1.7 source archive, it seemed to want Xerces 1.7.0. But, the
latest Xerces is 2.1.0. Building against it has linking problems. If i
grab GDAL from cvs, will it work with a newer version of Xerces? Or should
i wait until the next GDAL source archive is released? Or should I dig the
1.7.0 version out of the archive part of the Xerces site?

Thanks,
Ben



From warmerdam at p...  Wed Sep 11 15:19:32 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Xerces version?
References: <MGEOKJAEOFKANAFBLFGGCEKGDKAA.ben@v...>
Message-ID: <3D7F9744.1050903@p...>

Ben Discoe wrote:
> What version of Xerces should i use to build GDAL? The last time i grabbed
> the gdal 1.1.7 source archive, it seemed to want Xerces 1.7.0. But, the
> latest Xerces is 2.1.0. Building against it has linking problems. If i
> grab GDAL from cvs, will it work with a newer version of Xerces? Or should
> i wait until the next GDAL source archive is released? Or should I dig the
> 1.7.0 version out of the archive part of the Xerces site?

Ben,

GDAL's GML code in CVS has not been tested against newer Xerces parsers. I
actually use a snapshot of Xerces from 2002-01-23 but hopefully version
1.7.0 or shortly after should be OK.

I would also be willing to upgrade to Xerces 2.x if you find that alot
better.

BTW, I intend to further refine my GML support, likely in early October.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Wed Sep 11 15:55:17 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] OGR - MapInfo 7.0
References: <4ACBA1414DD9EE418CC250E4AAA9035A16F2F9@S...>
Message-ID: <3D7F9FA5.6060005@p...>

Martin, Daniel wrote:
> 
> 
> <http://rd.yahoo.com/M=231653.2271063.3703635.2205276/D=egroupweb/S=1709129284:HM/A=1204770/R=0/*http://ads.x10.com/?bHlhaG9vbHJlYzIxLmRhd=1031772792%3eM=231653.2271063.3703635.2205276/D=egroupweb/S=1709129284:HM/A=1204770/R=1>
> 
> Yahoo! Groups <http://groups.yahoo.com/> My Groups 
> <http://groups.yahoo.com/mygroups> | gdal-dev Main Page 
> <http://groups.yahoo.com/group/gdal-dev>
> 
> 
> I've been happily using MapServer with MapInfo data through OGR support 
> for MapInfo TAB format since it was available. I recently upgraded to 
> MapInfo 7.0. It appears though that any data produced with 7.0 doesn't 
> work in MapServer.
> 
> Can someone confirm: Is MapInfo 7.0 producing a new format? If so, is 
> that format not currently supported by OGR? Is there a timeline on support?

Dan,

Daniel M. is out of the country for a couple of weeks and won't be able to
answer, but the best place to ask this questions is on the mitab list. The
MITAB page is at:

http://pages.infinit.net/danmo/e00/index-mitab.html

If you can provide a smallish sample of a file that is giving you the
problem I will do a quick check to see what the problem is. I suspect that
there are new object types that are not supported yet. In fact I think there
are some outstanding Mapinfo 6.5 feature types not yet supported by MITAB
(multipoint and collections).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From ben at v...  Wed Sep 11 17:29:04 2002
From: ben at v... (Ben Discoe)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Xerces version?
In-Reply-To: <MGEOKJAEOFKANAFBLFGGCEKGDKAA.ben@v...>
Message-ID: <MGEOKJAEOFKANAFBLFGGEEKIDKAA.ben@v...>

> latest Xerces is 2.1.0. Building against it has linking problems.
> should I dig the 1.7.0 version out of the archive part of the
> Xerces site?

I went ahead and tried using 1.7.0. This worked at my other site a couple
months ago, but it didn't work here. The link errors looked like it's
simply not linking with the Xerces library. Indeed, i found that on the
line in the main makefile.vc:

link /dll /debug $(OGR_INCLUDE) $(LIBOBJ) $(ECWLIB) $(OGDILIB) \

I needed to add "$(XERCES_LIB)". This change is probably already in CVS,
though.

Since this worked, i tried going ahead and switching to Xerces 2.1.0. Only
two small changes were needed to get it to build:

ogrsf_frmts/gml/gmlreaderp.h
<<< #include <dom/DOMString.hpp>
----
>>> #include <dom/deprecated/DOMString.hpp>

nmake.opt
<<< XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib
----
>>> XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_2.lib

The resulting library and executables seem to work fine.

-Ben



From DMartin at e...  Fri Sep 13 12:01:11 2002
From: DMartin at e... (Martin, Daniel)
Date: Wed Nov 21 11:49:18 2007
Subject: OGR - MapInfo 7.0
Message-ID: <4ACBA1414DD9EE418CC250E4AAA9035A16F30C@S...>

I discovered something this morning. It seems that previously mentioned
problem only occurs with the following definition in a LAYER object of a
MapServer map file:

PROJECTION
AUTO
END

So, I suspect MITAB can't automatically determine the projection on a
MapInfo 7.0 layer. Luckily, explicitly stating the projection has resolved
the problems I was having.

Thanks,
Dan Martin


-----Original Message-----
From: Martin, Daniel 
Sent: Thursday, September 12, 2002 4:19 PM
To: mapserver-users@l...
Subject: [mapserver-users] OGR - MapInfo 7.0


I originally sent this message to the GDAL mailing list, but I got no
response. So, I thought I would try here.

I've been using MapServer with MapInfo data through OGR support for MapInfo
TAB format since it was available. I recently upgraded to MapInfo 7.0. It
appears though that any data produced with 7.0 doesn't work in MapServer.

Can someone confirm: Is MapInfo 7.0 producing a new format? If so, is that
format not currently supported by OGR? Is there any timeline on support?

Thanks,
Dan Martin 


From warmerdam at p...  Thu Sep 19 15:09:12 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] MapInfo Seamless layers - limit to the number of base
  tables
References: <4ACBA1414DD9EE418CC250E4AAA9035A192B28@S...>
Message-ID: <3D8A20D8.4080002@p...>

Martin, Daniel wrote:
> I've run into a bug with OGR using MapInfo Seamless layers. If you 
> create a Seamless layer with a large number of base tables, OGR can't 
> open it. I haven't yet determined what the number is, but it's 
> somewhere below the number of 12,900+ base tables that make up the TIGER 
> Line data set. I can create the Seamless layer with a smaller number of 
> base tables and OGR can read it fine. I then append more and more base 
> tables, and eventually OGR stops reading it.
> 
> I can send someone the Seamless layer if need be - but not all the base 
> tables (15 gigs).
> 
> Do I need to report this bug elsewhere, or is this the best place? 
> Also, does anyone have any ideas for a work around? I'm in a bit of a 
> rush to finish what I'm working on right now.

Dan,

The Mapinfo support is based on MITAB, so the best place to report this is
the MITAB mailing list. However, Daniel M. reads this list too so this
should be sufficient. There is no public MITAB bug system so I would suggest
filing this bug report in the GDAL Bugzilla.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From jaybo at n...  Tue Sep 24 02:13:42 2002
From: jaybo at n... (Jay Borseth)
Date: Wed Nov 21 11:49:18 2007
Subject: Raster image orientation
Message-ID: <000001c26391$88952a40$0300000a@nomadserver1>

charset="us-ascii"
Content-Transfer-Encoding: 7bit

I would assume that the amongst the 30 to 40 file formats handled by
GDAL that some store the image data with pixel zero in the bottom-left
corner and some store pixel zero at the top-left corner. Do RasterIO()
and associated functions which give access to raster image pixels
rationalize these differences and always provide top-left pixel zero
image to the client? Or do client applications need to flip images
vertically for some formats?

Sorry if this is an excessively stupid question...

- Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020923/c0d97f2e/attachment.html
From warmerdam at p...  Tue Sep 24 09:32:09 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Raster image orientation
References: <000001c26391$88952a40$0300000a@nomadserver1>
Message-ID: <3D906959.5030004@p...>

Jay Borseth wrote:
> I would assume that the amongst the 30 to 40 file formats handled by 
> GDAL that some store the image data with pixel zero in the bottom-left 
> corner and some store pixel zero at the top-left corner. Do RasterIO() 
> and associated functions which give access to raster image pixels 
> rationalize these differences and always provide top-left pixel zero 
> image to the client? Or do client applications need to flip images 
> vertically for some formats?

Jay,

I can't think of any of the formats with a bottom left pixel origin though
there may be. In any event, GDAL provides a uniform coordinate system for
pixel line coordinates with the top left corner of the image being 0,0.

In some cases, such as GXF, this can result in internally flipping the image
to get the right orientation. In others, like TIFF, the alternate origin flags
are just ignored and your image may appear upside down to what was intended.
This is a difficiency of the driver and should be corrected there if it ever
becomes a significant issues.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Thu Sep 26 14:27:11 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: OGR C API
Message-ID: <3D93517F.40709@p...>

Folks,

I have just committed a preliminary pass as a C API for OGR. This is
primarily done to facilitate use of OGR in the GRASS core but is also helpful
for other applications where a C++ API is inconvenient.

Notably:

o I have added partial Python bindings for the OGR API. SWIG is more
convenient to use for C than c++ entry points (at least the way I use it).

o I am re-implementing the OGR support in OpenEV using the C API. This means
OpenEV itself does need to know about C++ compilers.

o Linking one-step removed applications against the C API instead of the C++
API makes applications much less sensitive to minor changes in the C++ API.
Currently seemingly minor changes in the C++ API frequently make it
impossible to drop in new GDAL/OGR shared libraries into existing application
distributions, such as OpenEV or MapServer.

Anyone interesting in using the C API can look at gdal/ogr/ogr_api.h for
the entry points. I have tried to update the C++ online documentation to
refer to the name of the corresponding C function where available.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From neteler at i...  Fri Sep 27 12:55:01 2002
From: neteler at i... (Markus Neteler)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] OGR C API
In-Reply-To: <3D93517F.40709@p...>; from warmerdam@p... on Thu, Sep 26, 2002 at 02:27:11PM -0400
References: <3D93517F.40709@p...>
Message-ID: <20020927185501.S9174@i...>

Frank,

On Thu, Sep 26, 2002 at 02:27:11PM -0400, Frank Warmerdam wrote:
> Folks,
> 
> I have just committed a preliminary pass as a C API for OGR. This is
> primarily done to facilitate use of OGR in the GRASS core but is also helpful
> for other applications where a C++ API is inconvenient.

... this is really great!! We hope that the GRASS5.1/OGR integration
will start now (I cannot see further excuses :-).

Thanks for providing the wrapper such quickly,

Markus

PS: GRASS 5.1: http://grass.itc.it/grass51/index.html


From rogerjames99 at b...  Sat Sep 28 10:27:44 2002
From: rogerjames99 at b... (rogerjames99)
Date: Wed Nov 21 11:49:18 2007
Subject: How do I set the color interp of a new raster band
Message-ID: <an4e90+jjel@eGroups.com>

I have some code which copies datasets. I need to copy across the 
color interpretation into the destination bands. I cannot at the 
moment see a way of doing this.

Help.

Roger



From warmerdam at p...  Sat Sep 28 17:52:10 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] How do I set the color interp of a new raster band
References: <an4e90+jjel@eGroups.com>
Message-ID: <3D96248A.8070207@p...>

rogerjames99 wrote:
> I have some code which copies datasets. I need to copy across the 
> color interpretation into the destination bands. I cannot at the 
> moment see a way of doing this.

Roger,

I presume you are using GDAL 1.1.7? The CVS version includes a
SetRasterInterpretation() method, but I should warn you that very few
formats support it at this time. It is slightly more often supported by
the CopyCreate() method of some drivers.

What format are you writing to?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




