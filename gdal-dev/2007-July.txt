From John.C.Cartwright at noaa.gov  Sun Jul  1 14:45:13 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] support for python 2.5.1
Message-ID: <4687F639.5080607@noaa.gov>

Hello,

Should I expect gdal 1.4.2 to work w/ python 2.5.x?

Thanks!

-- john


From nkdiitd2002 at yahoo.com  Mon Jul  2 08:18:13 2007
From: nkdiitd2002 at yahoo.com (nishith datta)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] dgn to shape converter
Message-ID: <945734.3995.qm@web55804.mail.re3.yahoo.com>

hi all,
  I am new to ogr have got to use it with ms4w .
  I have been able to convert a dgn file to three shape files - point, poly and line type.
  But how do I get to see the attributes of the features and can I seperate the different
  point / line or polygon features anyway.
  thanks in advance
  nishith

       
---------------------------------
Be a better Globetrotter. Get better travel answers from someone who knows.
Yahoo! Answers - Check it out.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070702/9a32b1d4/attachment.html
From warmerdam at pobox.com  Mon Jul  2 10:19:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] support for python 2.5.1
In-Reply-To: <4687F639.5080607@noaa.gov>
References: <4687F639.5080607@noaa.gov>
Message-ID: <4689097F.1030703@pobox.com>

John Cartwright wrote:
> Hello,
> 
> Should I expect gdal 1.4.2 to work w/ python 2.5.x?

John,

I am not aware of any problems but nothing is certain till you try it.
At worst it should only require a few build tweaks to get it working
I would hope.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Mon Jul  2 10:28:56 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] support for python 2.5.1
In-Reply-To: <4689097F.1030703@pobox.com>
References: <4687F639.5080607@noaa.gov> <4689097F.1030703@pobox.com>
Message-ID: <7F3B32A0-7060-4798-805E-80ED1713EEB0@gmail.com>

John,

<http://trac.osgeo.org/gdal/ticket/1379> was one issue that existed  
with the next-gen bindings and Python 2.5 that should now be cleaned  
up with 1.4.2.  I believe the old bindings should work without  
modification.

Howard

On Jul 2, 2007, at 9:19 AM, Frank Warmerdam wrote:

> John Cartwright wrote:
>> Hello,
>> Should I expect gdal 1.4.2 to work w/ python 2.5.x?
>
> John,
>
> I am not aware of any problems but nothing is certain till you try it.
> At worst it should only require a few build tweaks to get it working
> I would hope.
>
> Best regards,
>
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From kevsemola at gmail.com  Mon Jul  2 11:12:12 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] nmake for c # interfaces
Message-ID: <7337d4f60707020812v7a9f638aw5437e2a423dbeaf0@mail.gmail.com>

Hi,
I have been trying to build the gdal and swig files using the nmake utility,
for the csharp part of the swig (csharp seems to have the good documentation
:) ). When I try to build the gdal core library, it seems to fail at the
frmts directory for the tiff library. It gives the error,
"This <javascript:searchRef('This')> version<javascript:searchRef('version')>
of <javascript:searchRef('of')> tif_config<javascript:searchRef('tif_config')>
.h <javascript:searchRef('h')> header <javascript:searchRef('header')>
is<javascript:searchRef('is')>
dedicated <javascript:searchRef('dedicated')> for
Windows<javascript:searchRef('Windows')>
CE <javascript:searchRef('CE')> platform <javascript:searchRef('platform')>!"


I can produce the four namespace dll s for the c# interfaces but since I
cannot produce the core gdal library with the nmake, the linking cannot
succeed.

I am trying to compile it for a win64 bit system and setting the WIN64=YES
options in the nmake.opt file and also in the comandline when calling for
nmake.

Any ideas are geratly appreciated ...
Thanks in advance :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070702/7a95a3cb/attachment.html
From John.C.Cartwright at noaa.gov  Mon Jul  2 11:32:10 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] support for python 2.5.1
In-Reply-To: <7F3B32A0-7060-4798-805E-80ED1713EEB0@gmail.com>
References: <4687F639.5080607@noaa.gov> <4689097F.1030703@pobox.com>
	<7F3B32A0-7060-4798-805E-80ED1713EEB0@gmail.com>
Message-ID: <46891A7A.2040301@noaa.gov>

Thanks Howard and Frank for your prompt replies.  I've found that 
although the compile works fine, but when I try to use the gdal python 
bindings, I get the following:

/extra/contrib/lib/python2.5.1/site-packages/gdal.py:191: 
RuntimeWarning: Python C API version mismatch for module _gdal: This 
Python has API version 1013, module _gdal has version 1012.
  import _gdal


I've had the same experience on both RHEL 3, and Mac OS X 10.4.  Can you 
tell from the above what I might be doing wrong?

Thanks again for your help!

-- john


Howard Butler wrote:
> John,
>
> <http://trac.osgeo.org/gdal/ticket/1379> was one issue that existed 
> with the next-gen bindings and Python 2.5 that should now be cleaned 
> up with 1.4.2.  I believe the old bindings should work without 
> modification.
>
> Howard
>
> On Jul 2, 2007, at 9:19 AM, Frank Warmerdam wrote:
>
>> John Cartwright wrote:
>>> Hello,
>>> Should I expect gdal 1.4.2 to work w/ python 2.5.x?
>>
>> John,
>>
>> I am not aware of any problems but nothing is certain till you try it.
>> At worst it should only require a few build tweaks to get it working
>> I would hope.
>>
>> Best regards,
>>
>> -----------------------------------------+-------------------------------------- 
>>
>> I set the clouds in motion - turn up   | Frank Warmerdam, 
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, 
>> http://osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

From warmerdam at pobox.com  Mon Jul  2 12:39:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] support for python 2.5.1
In-Reply-To: <46891A7A.2040301@noaa.gov>
References: <4687F639.5080607@noaa.gov> <4689097F.1030703@pobox.com>
	<7F3B32A0-7060-4798-805E-80ED1713EEB0@gmail.com>
	<46891A7A.2040301@noaa.gov>
Message-ID: <46892A43.40903@pobox.com>

John Cartwright wrote:
> Thanks Howard and Frank for your prompt replies.  I've found that 
> although the compile works fine, but when I try to use the gdal python 
> bindings, I get the following:
> 
> /extra/contrib/lib/python2.5.1/site-packages/gdal.py:191: 
> RuntimeWarning: Python C API version mismatch for module _gdal: This 
> Python has API version 1013, module _gdal has version 1012.
>  import _gdal
> 
> 
> I've had the same experience on both RHEL 3, and Mac OS X 10.4.  Can you 
> tell from the above what I might be doing wrong?
>
John,

Generally speaking this means that the gdal bindings were built against
a different version of python than you are using to load it.  Is there
any chance you have more than one python installed on these systems?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From John.C.Cartwright at noaa.gov  Mon Jul  2 15:50:13 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] support for python 2.5.1
In-Reply-To: <46892A43.40903@pobox.com>
References: <4687F639.5080607@noaa.gov> <4689097F.1030703@pobox.com>
	<7F3B32A0-7060-4798-805E-80ED1713EEB0@gmail.com>
	<46891A7A.2040301@noaa.gov> <46892A43.40903@pobox.com>
Message-ID: <468956F5.90702@noaa.gov>

Thanks Frank, you're right on target.  I do have multiple versions on 
this system and thought I had accounted for that w/ environment 
variables, but realize now that I had different settings for "configure" 
step than for the "make" step.

I appreciate the  suggestion!

-- john
 

Frank Warmerdam wrote:
> John,
>
> Generally speaking this means that the gdal bindings were built against
> a different version of python than you are using to load it.  Is there
> any chance you have more than one python installed on these systems?
>
> Best regards,


From schwehr at ccom.unh.edu  Mon Jul  2 16:23:13 2007
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: support for python 2.5.1
In-Reply-To: <200707021601.l62G1S11001131@duke.maptools.org>
References: <200707021601.l62G1S11001131@duke.maptools.org>
Message-ID: <F6D9032B-10E1-4A83-AE28-FB4400D76826@ccom.unh.edu>

Works for me on PPC Mac OSX 10.4.10 using fink unstable gdal (I did  
the update to the fink package yesterday).   Looks like where ever  
you got gdal from or where you built it had a different version of  
python that was picked up.  Perhaps you have multi pythons around and  
an older one if being found by configure?

-kurt


% fink list gdal
i   gdal                      1.4.2-1001          Raster/Vector  
Geospatial Format Translator
i   gdal-dev                  1.4.2-1001          GDAL/OGR  
development headers
i   gdal-python-py25          1.4.2-1001          GDAL Python Module
i   gdal-shlibs               1.4.2-1001          GDAL/OGR shared  
libraries

% ipython
Python 2.5.1 (r251:54863, Jun  7 2007, 18:40:41)

IPython 0.8.1 -- An enhanced Interactive Python.

In [1]: import _gdal


> From: John Cartwright <John.C.Cartwright@noaa.gov>
> Subject: Re: [Gdal-dev] support for python 2.5.1
>
> Thanks Howard and Frank for your prompt replies.  I've found that
> although the compile works fine, but when I try to use the gdal python
> bindings, I get the following:
>
> /extra/contrib/lib/python2.5.1/site-packages/gdal.py:191:
> RuntimeWarning: Python C API version mismatch for module _gdal: This
> Python has API version 1013, module _gdal has version 1012.
>   import _gdal
>
>
> I've had the same experience on both RHEL 3, and Mac OS X 10.4.   
> Can you
> tell from the above what I might be doing wrong?
>
> Thanks again for your help!
>
> -- john
>
>
> Howard Butler wrote:
>> John,
>>
>> <http://trac.osgeo.org/gdal/ticket/1379> was one issue that existed
>> with the next-gen bindings and Python 2.5 that should now be cleaned
>> up with 1.4.2.  I believe the old bindings should work without
>> modification.
>>
>> Howard
>>
>> On Jul 2, 2007, at 9:19 AM, Frank Warmerdam wrote:
>>
>>> John Cartwright wrote:
>>>> Hello,
>>>> Should I expect gdal 1.4.2 to work w/ python 2.5.x?
>>>
>>> John,
>>>
>>> I am not aware of any problems but nothing is certain till you  
>>> try it.
>>> At worst it should only require a few build tweaks to get it working
>>> I would hope.
>>>
>>> Best regards,
>>>
>>> ----------------------------------------- 
>>> +--------------------------------------
>>>
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | President OSGeo,
>>> http://osgeo.org
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
>
>
> ------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> End of Gdal-dev Digest, Vol 38, Issue 1
> ***************************************


From nkdiitd2002 at yahoo.com  Tue Jul  3 03:39:22 2007
From: nkdiitd2002 at yahoo.com (nishith datta)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] converting dgn layers
Message-ID: <771617.27455.qm@web55807.mail.re3.yahoo.com>

hi all,
  I am new to this mailing list... so sorry for asking the same question again.
  I am working on ms4w. I wish to use the .dgn files to convert them to .shp files
  but I cannot see the attributes of the .dgn layers and the point , line and polygons 
  are all gettig saved as a single layer. 
  could someone help me do it.....Thanks in advance
   
  nishith

 
---------------------------------
The fish are biting.
 Get more visitors on your site using Yahoo! Search Marketing.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070703/0a915fc9/attachment.html
From kevsemola at gmail.com  Tue Jul  3 04:21:41 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: nmake for c # interfaces
In-Reply-To: <7337d4f60707020812v7a9f638aw5437e2a423dbeaf0@mail.gmail.com>
References: <7337d4f60707020812v7a9f638aw5437e2a423dbeaf0@mail.gmail.com>
Message-ID: <7337d4f60707030121t38608054v5cfdde2098901f0b@mail.gmail.com>

Hi again,
By getting a snapshot from the cvs the error has gone related to that tiff
:)
But I have another problem;
The test data wouldnt work and the system.typeinitializationexception is
thrown by the ogr.registerall() command.
I searched for the mailing archives, the error seems to be related with the
missing of some required dll's. (proj.dll or some other) But actually I dont
know which dlls should be referred, that is should be on the path??

Another question is, I cannot refer to the wrap.dll s from the csharp
project (e.i. csharp_wrap.dll) from a csharp project, is this normal?, it
complains about that dll is not a COM component or a valid assembly? I dont
know much of C #, so sory :((

And the last question is, is c# is complete in terms of the ogr, I mean; Is
everything; that can be done in the c++ API, can also be done by using the
c# bindings?

And to mention, I am working with visual studio 2005, in an 64 bit windows
XP...

Cheers
Thanks a lot for the contributions :)



On 7/2/07, kevser sonmez <kevsemola@gmail.com> wrote:
>
> Hi,
> I have been trying to build the gdal and swig files using the nmake
> utility, for the csharp part of the swig (csharp seems to have the good
> documentation :) ). When I try to build the gdal core library, it seems to
> fail at the frmts directory for the tiff library. It gives the error,
> " This version of tif_config. h header is dedicated for Windows CE
> platform !"
>
> I can produce the four namespace dll s for the c# interfaces but since I
> cannot produce the core gdal library with the nmake, the linking cannot
> succeed.
>
> I am trying to compile it for a win64 bit system and setting the WIN64=YES
> options in the nmake.opt file and also in the comandline when calling for
> nmake.
>
> Any ideas are geratly appreciated ...
> Thanks in advance :)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070703/541e075d/attachment.html
From warmerdam at pobox.com  Tue Jul  3 09:51:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] converting dgn layers
In-Reply-To: <771617.27455.qm@web55807.mail.re3.yahoo.com>
References: <771617.27455.qm@web55807.mail.re3.yahoo.com>
Message-ID: <468A5452.1010203@pobox.com>

nishith datta wrote:
> hi all,
> I am new to this mailing list... so sorry for asking the same question 
> again.
> I am working on ms4w. I wish to use the .dgn files to convert them to 
> .shp files
> but I cannot see the attributes of the .dgn layers and the point , line 
> and polygons
> are all gettig saved as a single layer.
> could someone help me do it.....Thanks in advance

nishith,

User defined attributes are stored in a variety of ways in DGN files,
and so there is no easy way for OGR to recognise them.  Thus there
are essentially ignored.

To split a dgn into shapefiles with distinct geometry types try
something like:

ogr2ogr -skipfailures -nlt point rot_point.shp rotterdam/46a.dgn
ogr2ogr -skipfailures -nlt linestring rot_line.shp rotterdam/46a.dgn
ogr2ogr -skipfailures -nlt polygon rot_poly.shp rotterdam/46a.dgn

You will see lots of error messages which you can ignore.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jul  3 10:21:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
Message-ID: <468A5B7A.60608@pobox.com>

Folks,

A decade ago when I worked in an office, we had developed a practice of
regular code reviews.  These were, I found, an excellent educational
tool for sharing best practice, and also helpful in identifying problems
in the reviewed code.

As part of our commitment to our Summer of Code students, I'd like to
introduce this practice to GDAL.  While my initial aim is to give our
SoC students an opportunity to review other code, and to be reviewed,
I also am hopeful that we could continue the practice after this point.

My concept of code reviews is that we would:

  o Pick a particular module of code, hopefully around 1000 lines of
    code and not more than 2000.

  o Get four reviewers to spend an hour each pre-reviewing the code, and
    making notes on points for discussion.

  o Getting together in IRC, following along "line by line", likely using
    a line numbered view like:
     http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_minixml.cpp

  o Spend about 1 hour reviewing in IRC, lead by a lead reviewer who
    keeps things moving.

  o The Reviewee would be responsible for recording action items.

  o The Reviewee would be expected to act on the suggestions, making the
    updated version available (along with the action items) within one week
    of the review for offline followup by reviewers.

One challenge for code reviews is getting reviewers willing to commit the
two hours needed for the process.  I would suggest that we have our paid
maintainer (Mateusz) as one reviewer.  That for the SoC reviews we include
at on other SoC student as a reviewer, and that the mentors have to review
at least their own mentee.  That should give us 3 of 4 reviewers.  We will
call for volunteers for the fourth spot.

Any opinions on this idea?  Are there any SoC students who can't can't access
IRC?

Are there any SoC students who will have code available for review reasonably
soon?    I would like to suggest that we pick some other piece of code
initially for review.  As I would like to lead the first review, it should be
someone elses code.  I'll ask around a bit for some recently contributed code
by another author which can be the reviewed module.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jmckenna at dmsolutions.ca  Tue Jul  3 10:43:41 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] PHP_OGR layer create options
In-Reply-To: <3367565a0706280211i5b4d57caodc7694c65f13ff80@mail.gmail.com>
References: <3367565a0706280211i5b4d57caodc7694c65f13ff80@mail.gmail.com>
Message-ID: <468A609D.6010502@dmsolutions.ca>

Regarding your direct email to me asking the same question as below: no 
I am no help to you regarding this.

--
jeff



Roberto Starnini wrote:
> Hello,
>  
> I have used ogr/php library to migrate layers from Oracle to Postgres. I 
> have a problem with the last parameter of OGR_DS_CreateLayer() 
>  function. I have passed an array of options :
>  $aoptions[0] = 'OVERWRITE=YES';
>  $aoptions[1] = 'GEOMETRY_NAME=the_geom';
> but it doesn't works.
>  
> Thanks for help!
>  
>  
> Roberto Starnini
> 
> 


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From sy at perkins.net  Tue Jul  3 11:28:46 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: nmake for c # interfaces
In-Reply-To: <7337d4f60707030121t38608054v5cfdde2098901f0b@mail.gmail.com>
References: <7337d4f60707020812v7a9f638aw5437e2a423dbeaf0@mail.gmail.com>
	<7337d4f60707030121t38608054v5cfdde2098901f0b@mail.gmail.com>
Message-ID: <468A6B2E.3020004@perkins.net>

kevser sonmez wrote:
> Hi again,
> By getting a snapshot from the cvs the error has gone related to that 
> tiff :)
> But I have another problem;
> The test data wouldnt work and the system.typeinitializationexception 
> is thrown by the ogr.registerall () command.
> I searched for the mailing archives, the error seems to be related 
> with the missing of some required dll's. (proj.dll or some other) But 
> actually I dont know which dlls should be referred, that is should be 
> on the path??

If you need proj.dll then you probably need to build the PROJ4 library 
which is separate from GDAL, though you'll find links on the GDAL web 
page to it.


> Another question is, I cannot refer to the wrap.dll s from the csharp 
> project (e.i. csharp_wrap.dll) from a csharp project, is this normal?, 
> it complains about that dll is not a COM component or a valid 
> assembly? I dont know much of C #, so sory :((

In .NET projects, you can only add direct references to .NET assemblies. 
Only some of the DLLs produced by SWIG are assemblies - namely those 
that have corresponding .cs files, rather than.cpp files. The assemblies 
in turn call the unmanaged DLLs. So, add references to gdal_csharp.dll 
and ogr_csharp.dll in your C# project. Then make sure that all the other 
DLLs that you need (includling gdal_csharp_wrap.dll and gdal.dll) are in 
a directory that is on your PATH. Although you can't add references to 
those unmanaged DLLs, windows needs to be able to find them at runtime. 
To do this, it looks in various places, most importantly in the 
directory containing the executing application, and also in the 
directories on the PATH. Your proj.dll also needs to be on the PATH.

> And the last question is, is c# is complete in terms of the ogr, I 
> mean; Is everything; that can be done in the c++ API, can also be done 
> by using the c# bindings?

The OGR C# bindings are actually generated from the OGR C API, but 
reorganized through the magic of SWIG (and Tamas) to provide an object 
oriented API. Since the OGR C API is itself a wrapper around the 
original C++ classes, it typically provides a subset of the C++ 
functionality - for instance there is no hierarchy of Geometry classes. 
However, most important things are there, though there's no real 
documentation on what the C# binding provide except for the SWIG code 
itself. So, say that you're looking for a method described in the OGR 
C++ read/write tutorial. Once you have the C++ name, look at the C API 
to see what the equivalent C method is called. Then search through the 
corresponding .cs file in swig/csharp/ogr for a similar named method, 
and see what arguments it takes. There's generally a fairly simple 
pattern to the C++ -> C# name translation, but there are a few quirks.

Cheers,

Simon


>
> And to mention, I am working with visual studio 2005, in an 64 bit 
> windows XP...
>
> Cheers
> Thanks a lot for the contributions :)
>
>
>
> On 7/2/07, *kevser sonmez* <kevsemola@gmail.com 
> <mailto:kevsemola@gmail.com> > wrote:
>
>     Hi,
>     I have been trying to build the gdal and swig files using the
>     nmake utility, for the csharp part of the swig (csharp seems to
>     have the good documentation :) ). When I try to build the gdal
>     core library, it seems to fail at the frmts directory for the tiff
>     library. It gives the error,
>     " This version of tif_config. h header is dedicated for Windows CE
>     platform !"
>
>     I can produce the four namespace dll s for the c# interfaces but
>     since I cannot produce the core gdal library with the nmake, the
>     linking cannot succeed.
>
>     I am trying to compile it for a win64 bit system and setting the
>     WIN64=YES options in the nmake.opt file and also in the comandline
>     when calling for nmake.
>
>     Any ideas are geratly appreciated ...
>     Thanks in advance :)
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070703/f0ebe0c7/attachment.html
From szekerest at gmail.com  Tue Jul  3 14:38:17 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: nmake for c # interfaces
In-Reply-To: <468A6B2E.3020004@perkins.net>
References: <7337d4f60707020812v7a9f638aw5437e2a423dbeaf0@mail.gmail.com>
	<7337d4f60707030121t38608054v5cfdde2098901f0b@mail.gmail.com>
	<468A6B2E.3020004@perkins.net>
Message-ID: <f3b73b7d0707031138y2fb19d83se922faeafaf0dc6a@mail.gmail.com>

The previous explanation was fairly exhautive :)

The recent version (in SVN trunk) links to the gdal.dll dynamically so
gdal14.dll should also be available to load. In addition to the
proj.dll the gdal14.dll might load further dll-s depending on the
functionality used. You can download the recent FWTools to obtain all
of the required libraries.(You might alter the names of the *_fw.dll
files to the original names)

Most of the frequently used C API funcions are mapped to the SWIG API
but I think we still have missing ones. If you find something missing
please file a ticket for that item.

I guess only a few people compile against the Win64 platform. The
current buildbot configuration (http://buildbot.osgeo.org:8500)
contains a Win64 builder to make sure the project compiles on this
platform as well.  So as to run the Win64 images most of the depencies
like the gdal.dll should also be compiled for this platform.


Best regards,

Tamas



2007/7/3, Simon Perkins <sy@perkins.net>:
>
>  kevser sonmez wrote:
> Hi again,
>  By getting a snapshot from the cvs the error has gone related to that tiff
> :)
>  But I have another problem;
>  The test data wouldnt work and the
> system.typeinitializationexception is thrown by the
> ogr.registerall () command.
>  I searched for the mailing archives, the error seems to be related with the
> missing of some required dll's. (proj.dll or some other) But actually I dont
> know which dlls should be referred, that is should be on the path??
>
>  If you need proj.dll then you probably need to build the PROJ4 library
> which is separate from GDAL, though you'll find links on the GDAL web page
> to it.
>
>
>
> Another question is, I cannot refer to the wrap.dll s from the csharp
> project (e.i. csharp_wrap.dll) from a csharp project, is this normal?, it
> complains about that dll is not a COM component or a valid assembly? I dont
> know much of C #, so sory :((
>
>  In .NET projects, you can only add direct references to .NET assemblies.
> Only some of the DLLs produced by SWIG are assemblies - namely those that
> have corresponding .cs files, rather than.cpp files. The assemblies in turn
> call the unmanaged DLLs. So, add references to gdal_csharp.dll and
> ogr_csharp.dll in your C# project. Then make sure that all the other DLLs
> that you need (includling gdal_csharp_wrap.dll and gdal.dll) are in a
> directory that is on your PATH. Although you can't add references to those
> unmanaged DLLs, windows needs to be able to find them at runtime. To do
> this, it looks in various places, most importantly in the directory
> containing the executing application, and also in the directories on the
> PATH. Your proj.dll also needs to be on the PATH.
>
>
> And the last question is, is c# is complete in terms of the ogr, I mean; Is
> everything; that can be done in the c++ API, can also be done by using the
> c# bindings?
>
>  The OGR C# bindings are actually generated from the OGR C API, but
> reorganized through the magic of SWIG (and Tamas) to provide an object
> oriented API. Since the OGR C API is itself a wrapper around the original
> C++ classes, it typically provides a subset of the C++ functionality - for
> instance there is no hierarchy of Geometry classes. However, most important
> things are there, though there's no real documentation on what the C#
> binding provide except for the SWIG code itself. So, say that you're looking
> for a method described in the OGR C++ read/write tutorial. Once you have the
> C++ name, look at the C API to see what the equivalent C method is called.
> Then search through the corresponding .cs file in swig/csharp/ogr for a
> similar named method, and see what arguments it takes. There's generally a
> fairly simple pattern to the C++ -> C# name translation, but there are a few
> quirks.
>
>  Cheers,
>
>  Simon
>
>
>
>
>  And to mention, I am working with visual studio 2005, in an 64 bit windows
> XP...
>
>  Cheers
>  Thanks a lot for the contributions :)
>
>
>
>
> On 7/2/07, kevser sonmez <kevsemola@gmail.com > wrote:
> > Hi,
> > I have been trying to build the gdal and swig files using the nmake
> utility, for the csharp part of the swig (csharp seems to have the good
> documentation :) ). When I try to build the gdal core library, it seems to
> fail at the frmts directory for the tiff library. It gives the error,
> > " This version of tif_config. h header is dedicated for Windows CE
> platform !"
> >
> > I can produce the four namespace dll s for the c# interfaces but since I
> cannot produce the core gdal library with the nmake, the linking cannot
> succeed.
> >
> > I am trying to compile it for a win64 bit system and setting the WIN64=YES
> options in the nmake.opt file and also in the comandline when calling for
> nmake.
> >
> > Any ideas are geratly appreciated ...
> > Thanks in advance :)
> >
>
>  ________________________________
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From szekerest at gmail.com  Tue Jul  3 14:48:07 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
In-Reply-To: <468A5B7A.60608@pobox.com>
References: <468A5B7A.60608@pobox.com>
Message-ID: <f3b73b7d0707031148q265d5620u1792267e8963fd0d@mail.gmail.com>

Frank,

Do you have some principles to follow in the course of the review from
the aspect of the gdal project?

Best regards,

Tamas



2007/7/3, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> A decade ago when I worked in an office, we had developed a practice of
> regular code reviews.  These were, I found, an excellent educational
> tool for sharing best practice, and also helpful in identifying problems
> in the reviewed code.
>
> As part of our commitment to our Summer of Code students, I'd like to
> introduce this practice to GDAL.  While my initial aim is to give our
> SoC students an opportunity to review other code, and to be reviewed,
> I also am hopeful that we could continue the practice after this point.
>
> My concept of code reviews is that we would:
>
>   o Pick a particular module of code, hopefully around 1000 lines of
>     code and not more than 2000.
>
>   o Get four reviewers to spend an hour each pre-reviewing the code, and
>     making notes on points for discussion.
>
>   o Getting together in IRC, following along "line by line", likely using
>     a line numbered view like:
>      http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_minixml.cpp
>
>   o Spend about 1 hour reviewing in IRC, lead by a lead reviewer who
>     keeps things moving.
>
>   o The Reviewee would be responsible for recording action items.
>
>   o The Reviewee would be expected to act on the suggestions, making the
>     updated version available (along with the action items) within one week
>     of the review for offline followup by reviewers.
>
> One challenge for code reviews is getting reviewers willing to commit the
> two hours needed for the process.  I would suggest that we have our paid
> maintainer (Mateusz) as one reviewer.  That for the SoC reviews we include
> at on other SoC student as a reviewer, and that the mentors have to review
> at least their own mentee.  That should give us 3 of 4 reviewers.  We will
> call for volunteers for the fourth spot.
>
> Any opinions on this idea?  Are there any SoC students who can't can't access
> IRC?
>
> Are there any SoC students who will have code available for review reasonably
> soon?    I would like to suggest that we pick some other piece of code
> initially for review.  As I would like to lead the first review, it should be
> someone elses code.  I'll ask around a bit for some recently contributed code
> by another author which can be the reviewed module.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Tue Jul  3 15:21:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
In-Reply-To: <f3b73b7d0707031148q265d5620u1792267e8963fd0d@mail.gmail.com>
References: <468A5B7A.60608@pobox.com>
	<f3b73b7d0707031148q265d5620u1792267e8963fd0d@mail.gmail.com>
Message-ID: <468AA1D4.6070109@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Do you have some principles to follow in the course of the review from
> the aspect of the gdal project?

Tamas,

It was my hope to write up something, perhaps as an RFC if we institutionalize
this.  But to start, I was planning to play it a bit by ear.

Basically we would be looking for things, including:

  o Bugs (for sure, and potential)
  o Poor use of standard GDAL/OGR/CPL services.
  o Opportunities for meaningful optimization.
  o Ways of expressing code in a more understandable fashion.

In particular, I don't want to get hung up on coding style conventions
which we don't have clear standards on for GDAL anyways.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bfraser at geoanalytic.com  Tue Jul  3 15:24:59 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Conversion of paletted PNG to ECW does not work
References: <4587DCF2.6020009@worldonline.fr>
	<45889185.5020407@pobox.com><45880ED5.8020802@worldonline.fr>
	<45889986.2070901@pobox.com>
Message-ID: <02ff01c7bda7$d88a5140$140002c0@shark>

Frank,

  Do you know if a bug was ever filed for this? (I have the
same problem with paletted tiffs)

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "Jean-Claude Repetto"
<jean-claude.repetto@worldonline.fr>
Cc: <gdal-dev@lists.maptools.org>
Sent: Tuesday, December 19, 2006 8:01 PM
Subject: Re: [Gdal-dev] Conversion of paletted PNG to ECW
does not work


> Jean-Claude Repetto wrote:
> > Hello Frank,
> >
> > Thanks for your answer. I understand that ECW does not
support palettes,
> > but I think gdal_translate should :
> > - either convert the image to 24bit before converting it
to ECW
> > - either print an error message and stop.
>
> Jean-Claude,
>
> I agree that the ECW CreateCopy() method ought to report
at least a warning
> that the color table is being ignored.  If you file a bug
on this, I can get
> it fixed at some point.
>
> Best regards,
> -- 
> ---------------------------------------+------------------
--------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows |
http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo,
http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Jul  3 15:54:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Conversion of paletted PNG to ECW does not work
In-Reply-To: <02ff01c7bda7$d88a5140$140002c0@shark>
References: <4587DCF2.6020009@worldonline.fr>
	<45889185.5020407@pobox.com><45880ED5.8020802@worldonline.fr>
	<45889986.2070901@pobox.com> <02ff01c7bda7$d88a5140$140002c0@shark>
Message-ID: <468AA990.8010500@pobox.com>

Brent Fraser wrote:
> Frank,
> 
>   Do you know if a bug was ever filed for this? (I have the
> same problem with paletted tiffs)

brent,

I'm afraid this is a "feature" not a bug.  As far as I know ECW
does not support palettes, so you are expected to convert to RGB
before writing to ECW, using a tool like pct2rgb.py.

If you believe ECW is supposed to support palettes then please file
a bug with details.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From chowell at pyxisinnovation.com  Tue Jul  3 15:45:24 2007
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
In-Reply-To: <f3b73b7d0707031148q265d5620u1792267e8963fd0d@mail.gmail.com>
References: <468A5B7A.60608@pobox.com>
	<f3b73b7d0707031148q265d5620u1792267e8963fd0d@mail.gmail.com>
Message-ID: <468AA754.9040904@pyxisinnovation.com>

Hi Frank,

It's probably a good idea once you initiate code reviews to keep them 
occurring regularly. I would suggest on every checkin. That's what we do 
in our office and it makes a huge difference on the quality of the code 
that is produced as well as a good learning opportunity for all.

Cheers
Chris

Tamas Szekeres wrote:
> Frank,
>
> Do you have some principles to follow in the course of the review from
> the aspect of the gdal project?
>
> Best regards,
>
> Tamas
>
>
>
> 2007/7/3, Frank Warmerdam <warmerdam@pobox.com>:
>> Folks,
>>
>> A decade ago when I worked in an office, we had developed a practice of
>> regular code reviews.  These were, I found, an excellent educational
>> tool for sharing best practice, and also helpful in identifying problems
>> in the reviewed code.
>>
>> As part of our commitment to our Summer of Code students, I'd like to
>> introduce this practice to GDAL.  While my initial aim is to give our
>> SoC students an opportunity to review other code, and to be reviewed,
>> I also am hopeful that we could continue the practice after this point.
>>
>> My concept of code reviews is that we would:
>>
>>   o Pick a particular module of code, hopefully around 1000 lines of
>>     code and not more than 2000.
>>
>>   o Get four reviewers to spend an hour each pre-reviewing the code, and
>>     making notes on points for discussion.
>>
>>   o Getting together in IRC, following along "line by line", likely 
>> using
>>     a line numbered view like:
>>      http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_minixml.cpp
>>
>>   o Spend about 1 hour reviewing in IRC, lead by a lead reviewer who
>>     keeps things moving.
>>
>>   o The Reviewee would be responsible for recording action items.
>>
>>   o The Reviewee would be expected to act on the suggestions, making the
>>     updated version available (along with the action items) within 
>> one week
>>     of the review for offline followup by reviewers.
>>
>> One challenge for code reviews is getting reviewers willing to commit 
>> the
>> two hours needed for the process.  I would suggest that we have our paid
>> maintainer (Mateusz) as one reviewer.  That for the SoC reviews we 
>> include
>> at on other SoC student as a reviewer, and that the mentors have to 
>> review
>> at least their own mentee.  That should give us 3 of 4 reviewers.  We 
>> will
>> call for volunteers for the fourth spot.
>>
>> Any opinions on this idea?  Are there any SoC students who can't 
>> can't access
>> IRC?
>>
>> Are there any SoC students who will have code available for review 
>> reasonably
>> soon?    I would like to suggest that we pick some other piece of code
>> initially for review.  As I would like to lead the first review, it 
>> should be
>> someone elses code.  I'll ask around a bit for some recently 
>> contributed code
>> by another author which can be the reviewed module.
>>
>> Best regards,
>> -- 
>> ---------------------------------------+-------------------------------------- 
>>
>> I set the clouds in motion - turn up   | Frank Warmerdam, 
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, 
>> http://osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

From warmerdam at pobox.com  Tue Jul  3 16:14:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
In-Reply-To: <468AA754.9040904@pyxisinnovation.com>
References: <468A5B7A.60608@pobox.com>
	<f3b73b7d0707031148q265d5620u1792267e8963fd0d@mail.gmail.com>
	<468AA754.9040904@pyxisinnovation.com>
Message-ID: <468AAE2E.5030003@pobox.com>

Chris Howell wrote:
> Hi Frank,
> 
> It's probably a good idea once you initiate code reviews to keep them 
> occurring regularly. I would suggest on every checkin. That's what we do 
> in our office and it makes a huge difference on the quality of the code 
> that is produced as well as a good learning opportunity for all.

Chris,

Unfortunately, I can't imagine per-checkin code reviews being practical
on this project.  When I was head of R&D at PCI I had a hard time keeping
one formal code review happening every week or two out of a team of 20
people.  Then I held the "performance/pay review stick".  Now most of
us volunteers, so I have very little leverage.

If we had the manpower resources and the organizational command-and-control
I'd like everything to be reviewed.  But since that isn't practical, I'd
be thrilled to pull off a code review every couple of weeks over the summer
and perhaps once a month after that.

I'd add there are sometimes a lot of checkins (small fixes, etc).

On the other hand, I have found keeping an eye on the gdal-commits mailing
list useful for a very quick pass review of changes going in.  But that
process is light-years different from formal code reviews.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bfraser at geoanalytic.com  Tue Jul  3 16:16:37 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Conversion of paletted PNG to ECW does not work
References: <4587DCF2.6020009@worldonline.fr>
	<45889185.5020407@pobox.com><45880ED5.8020802@worldonline.fr>
	<45889986.2070901@pobox.com> <02ff01c7bda7$d88a5140$140002c0@shark>
	<468AA990.8010500@pobox.com>
Message-ID: <033c01c7bdaf$0f11a6d0$140002c0@shark>

Frank,

   I don't think ECW supports palettes.  As a work-around we
can convert the files to 24-bit then ECW, so no big problem.

    My thought was the same as the original poster's: either
have GDAL do the 8-bit to 24-bit conversion as part of the
format translation (for convenience and to save on temporary
disk space), or at least produce a warning message that
paletted files are not supported (this would save time on
user support!)

Thanks!
Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "Brent Fraser" <bfraser@geoanalytic.com>
Cc: <gdal-dev@lists.maptools.org>
Sent: Tuesday, July 03, 2007 1:54 PM
Subject: Re: [Gdal-dev] Conversion of paletted PNG to ECW
does not work


> Brent Fraser wrote:
> > Frank,
> >
> >   Do you know if a bug was ever filed for this? (I have
the
> > same problem with paletted tiffs)
>
> brent,
>
> I'm afraid this is a "feature" not a bug.  As far as I
know ECW
> does not support palettes, so you are expected to convert
to RGB
> before writing to ECW, using a tool like pct2rgb.py.
>
> If you believe ECW is supposed to support palettes then
please file
> a bug with details.
>
> Best regards,
> -- 
> ---------------------------------------+------------------
--------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows |
http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo,
http://osgeo.org
>


From dmorissette at mapgears.com  Tue Jul  3 16:33:21 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
In-Reply-To: <468A5B7A.60608@pobox.com>
References: <468A5B7A.60608@pobox.com>
Message-ID: <468AB291.2060709@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> A decade ago when I worked in an office, we had developed a practice of
> regular code reviews.  These were, I found, an excellent educational
> tool for sharing best practice, and also helpful in identifying problems
> in the reviewed code.
> 
> As part of our commitment to our Summer of Code students, I'd like to
> introduce this practice to GDAL.  While my initial aim is to give our
> SoC students an opportunity to review other code, and to be reviewed,
> I also am hopeful that we could continue the practice after this point.
> 

Frank,

I like the idea. I'd even volunteer to participate in the first one if 
it's after the MapServer code freeze date planned for July 9th.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From sy at perkins.net  Tue Jul  3 16:34:39 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
Message-ID: <468AB2DF.9080607@perkins.net>

Hi,

I'm interested in ArcSDE read / write support in both GDAL  and OGR. I 
see that there is SDE reading listed on the OGR page, but no mention on 
the GDAL page - though there is a frmts/sde directory in GDAL, so I'm 
guessing the formats page is out of date? I also saw Howard Butler's 
post from last year describing ArcSDE read support, so I'm guessing that 
GDAL has read support for both vectors and rasters? Are they both fairly 
functional?

My company has a need for write access in both GDAL and OGR in addition. 
Would anyone out there, e.g. Howard, be interested in adding this, if we 
sponsored it?

Cheers,

Simon

P.S. Frank: we'd talked earlier about sponsoring a Oracle Spatial 
GeoRaster driver, but, after some debate, I think we're going to use 
ArcSDE instead. Oracle Spatial just gets too expensive since it's only 
available as an option on the enterprise database (at about $40k a 
processor).




From sy at perkins.net  Tue Jul  3 16:41:07 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: ArcSDE Support in GDAL/OGR
In-Reply-To: <468AB2DF.9080607@perkins.net>
References: <468AB2DF.9080607@perkins.net>
Message-ID: <468AB463.5000802@perkins.net>

Simon Perkins wrote:
> I'm interested in ArcSDE read / write support in both GDAL  and OGR. I 
> see that there is SDE reading listed on the OGR page, but no mention 
> on the GDAL page - though there is a frmts/sde directory in GDAL, so 
> I'm guessing the formats page is out of date? I also saw Howard 
> Butler's post from last year describing ArcSDE read support, so I'm 
> guessing that GDAL has read support for both vectors and rasters? Are 
> they both fairly functional?

Apologies, that wasn't very clear... I meant that I'm guessing that both 
GDAL and OGR have read support for reading ArcSDE raster and vectors 
respectively... (but not write support).

Cheers,

Sy


From warmerdam at pobox.com  Tue Jul  3 17:14:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468AB2DF.9080607@perkins.net>
References: <468AB2DF.9080607@perkins.net>
Message-ID: <468ABC43.7030806@pobox.com>

Simon Perkins wrote:
> Hi,
> 
> I'm interested in ArcSDE read / write support in both GDAL  and OGR. I 
> see that there is SDE reading listed on the OGR page, but no mention on 
> the GDAL page - though there is a frmts/sde directory in GDAL, so I'm 
> guessing the formats page is out of date? I also saw Howard Butler's 
> post from last year describing ArcSDE read support, so I'm guessing that 
> GDAL has read support for both vectors and rasters? Are they both fairly 
> functional?

Simon,

I see ArcSDE on this page:
  http://www.gdal.org/formats_list.html

The existing SDE support in GDAL and OGR is read-only, and believed
to work well though they aren't terribly widely used as yet as far as
I know.

> My company has a need for write access in both GDAL and OGR in addition. 
> Would anyone out there, e.g. Howard, be interested in adding this, if we 
> sponsored it?

Howard would be the obvious person to take on write support, and I'm
sure he would be pleased to prepare a quote.  I'll leave that ball in
his court.

> P.S. Frank: we'd talked earlier about sponsoring a Oracle Spatial 
> GeoRaster driver, but, after some debate, I think we're going to use 
> ArcSDE instead. Oracle Spatial just gets too expensive since it's only 
> available as an option on the enterprise database (at about $40k a 
> processor).

I can understand the hesitancy to go with oracle georaster at that
sort of pricing.  I'm not sure ArcSDE would have been my solution
to the problem, but hey. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jul  3 17:22:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Conversion of paletted PNG to ECW does not work
In-Reply-To: <033c01c7bdaf$0f11a6d0$140002c0@shark>
References: <4587DCF2.6020009@worldonline.fr>
	<45889185.5020407@pobox.com><45880ED5.8020802@worldonline.fr>
	<45889986.2070901@pobox.com> <02ff01c7bda7$d88a5140$140002c0@shark>
	<468AA990.8010500@pobox.com> <033c01c7bdaf$0f11a6d0$140002c0@shark>
Message-ID: <468ABE1C.3010402@pobox.com>

Brent Fraser wrote:
> Frank,
> 
>    I don't think ECW supports palettes.  As a work-around we
> can convert the files to 24-bit then ECW, so no big problem.
> 
>     My thought was the same as the original poster's: either
> have GDAL do the 8-bit to 24-bit conversion as part of the
> format translation (for convenience and to save on temporary
> disk space), or at least produce a warning message that
> paletted files are not supported (this would save time on
> user support!)

Brent,

I agree that ECWCreateCopy() should issue a warning (or if bStrict
is TRUE an error) if a palette is present on the source image.

If you file a bug, I'll "grow the scope" a bit to cover some other
common drivers, and queue it for Mateusz to work on.  Many of the
CreateCopy() implementations are pretty quiet about the information
the ignore.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Jul  3 17:21:10 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468ABC43.7030806@pobox.com>
References: <468AB2DF.9080607@perkins.net> <468ABC43.7030806@pobox.com>
Message-ID: <468ABDC6.40900@perkins.net>

Frank Warmerdam wrote:
> I see ArcSDE on this page:
>  http://www.gdal.org/formats_list.html

Hmmm... so do I! Sure I stared at that page several times... :)


>> P.S. Frank: we'd talked earlier about sponsoring a Oracle Spatial 
>> GeoRaster driver, but, after some debate, I think we're going to use 
>> ArcSDE instead. Oracle Spatial just gets too expensive since it's 
>> only available as an option on the enterprise database (at about $40k 
>> a processor).
>
> I can understand the hesitancy to go with oracle georaster at that
> sort of pricing.  I'm not sure ArcSDE would have been my solution
> to the problem, but hey. :-)

Well, really, we just need a solution that allows us to store large 
numbers of rasters in spatial databases. It seemed that the choices came 
down to Oracle Spatial or ArcGIS Server (SDE). Are there other 
alternatives? What are your qualms about ArcSDE? I've never used it, so 
any comments much appreciated!

Cheers,

Simon



From klokan at klokan.cz  Tue Jul  3 18:04:39 2007
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] SoC: GDAL2Tiles: georeferenced rasters on the web
Message-ID: <6e41d95b0707031504u1ca4dc16q9e2e714bfeb1aace@mail.gmail.com>

Hello,

I am working on the Google SoC project GDAL2Tiles, which should allow
to use GDAL library for simply exporting raster files with
georeference into the web and viewing by Google Maps, Google Earth,
OpenLayers, WorldKit, ...

I see the main goal of my project in implementation of an application,
which allow to convert a raster georeferenced map into a directory
with tiles and metadata. Such structure should, after uploading to any
webserver, allow on-line accessing from different viewers.

I have found a commercial project Arc2Earth, a module for ESRI
ArcView, which implement similar functionality.

There are several things I realized in last month, which a bit changed
my look at the project and that implied some goals as important for
the final result, so let's discuss them here:

If a man need to publish raster map, usually there is several map
sheets that needs to be merged together, merging in gdal using
gdal_merge.py is beautiful, but raster should be reprojected in
advance. Another thing is that merging of small overlapping raster
tiles could be more efficient then merging whole map sheets especially
for huge raster results.

There is a project GeoQuadTree.org, which implements this reprojection
and merging functionality on tile level using GDAL library.
This project define own GeoQuadTree tile structure, and also
implements GDAL reader driver for this structure as well as simple
FastCGI WMS server.
These tools were available under GPL, which was a bit restricting for
practical usage in GDAL library (linking with proprietary libraries
like MrSID, linking into commercial applications, etc.).
I was speaking with Jordi, author of these tools, and he accepted dual
licensing (GPL and the same license like GDAL has), so now gqt tool
and driver could be merged into official GDAL tree.
Is there some reason why not to do that?

To be true I like the GQT tile structure more that TMS tile structure,
I will write an extra email with reasons why.

Practical tasks to reach main goals of SoC Project I see now at:

- Prepare nice coded HTML/CSS/JavaScript examples of inserting tiles
into viewers (useful for both GQT and TMS with global-geodetic
profile).
I've been playing with this so far, I prepare some testing maps by
Arc2Earth Trial. Unfortunately we can't use JavaScript from this
project (and anyway I would like to make them better, now Safari is
not supported for example... and code is cryptic).
Testing map is available at:
http://www.staremapy.cz/a2e/FreeGeoDataCZAll/
I am working on it this week and I would like to have that on Sunday
(first SoC deadline).

- I will prepare python script which will generate sample index.html
for given GQT structure and several viewers. This script will generate
KML files for tiles with suitable projection too.

- I was thinking about python script for conversion between tile
structure, so you can work with GQT but you can simply convert tiles
into TMS naming conversion, similar with VirtualEarth, Zoomify,
anything else later. This script will just create metadata and rename
tiles and directories.

- I would like to add profiles from TMS (<global-geodetic> EPSG:4326 -
used by Google Earth and NASA WorldWind, and <global-mercator>
EPSG:41001 - for Google Maps, OpenLayers, MS Virtual Earth, etc) into
gqt stable (0.9) tool.
After conversation with Jordi I will need to make other small patches
to this tool, I think of direct (one step) conversion of one file into
the given profile, and some more functionality.
Stable 0.9 version is for me more important. I need only .png tiles now.
Version 1.0 adds support for more layers (multibands) in one tile
structure, separate mask, and tile file formats another then png.

- In Google SoC I promised a driver for writing the tile structure, I
hope this will be finished too. But I see more practical to
concentrate on GQT and metadata, then look at driver, as GQT tool now
do that job pretty well.

After the project is finished I would love to see gqt tool and python
scripts in FWTools.

Any comments?

Klokan

From klokan at klokan.cz  Tue Jul  3 18:05:41 2007
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Tile structures for custom map publishing
Message-ID: <6e41d95b0707031505x54a8fa0cga9a91dde0a01f0ba@mail.gmail.com>

Hello,

I have been inspecting several on-line map viewers, which are using
raster tiles, e.g. small static files served by a web server, for
on-line publishing of maps.

I always notice used map projection and coordinate system, size and
format of a tile, the structure of directories.

Result is available on a web page:
http://spreadsheets.google.com/pub?key=pm3_jKEJCJ2fWv3lToe7KZA

It contains notes and links for viewers:
Google Maps
Google Earth (KML)
Microsoft Live (VirtualEarth)
NASA WorldWind
OpenLayers
WorldKit

Structures:
OSGeo TMS
GeoQuadTree
Zoomify
Arc2Earth Publisher

The list is not complete for sure, so if anybody would like to add a
new viewer or repair some mistake, just let me know, I can give you
access or we can move that document into GDAL/OSGEO wiki.

I created this list of tile formats to choose the right solution for
implementing my Google SoC project (GDAL2Tiles) as variable as
possible.
This list give you overview how viewers allow you to publish your own
custom raster maps.
Formats of native map tiles is not described, if you need this have a
look into OpenLayers.org documentation.

Klokan

From klokan at klokan.cz  Tue Jul  3 18:09:10 2007
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] TMS vs. GeoQuadTree
Message-ID: <6e41d95b0707031509ha58dd0cnb709e3a0eb032b99@mail.gmail.com>

GDAL2Tiles:
To use or not to use TMS for on-line map publishing using static files?

There are several design differences in GeoQuadTree structure over TMS
structure:

Jordi, author of GeoQuadTree wrote me:

> Storage model
>
> In TMS a tile is addressed on a /layer/x/y.png basis (let's name it
> Cartesian), whereas GeoQuadTree stores the tiles on the filesystem
> hierarchically, based on the quadtree.
>
> How will GDAL2Tiles storage the tiles on the filesystem ?
>
>  If you store the tiles in a Cartesian fashion, then a client could access a
> tile with nothing more than a simple web server (the URL will include the
> exact position in the file system). In this approach, the number of image
> files depends on the size of the whole map. Any folder could store as many
> tiles as the number of tiles in the Y axis.
>
>  If you store the tiles in a hierarchical fashion (as GeoQuadTree do), then
> some layer of software (in the server) must translate the TMS notation in

My note: the same could be done in JavaScript on the client side too,
especially with optimization for global-mercator profile.

> the URL to the physical position in the filesystem. This process is quick
> and simple (I do it by means of a iteration, as many times as levels in the
> pyramid, but it can be optimized). In this approach, the number of image
> files is small and independent of the size of the whole map.
>
>  When I first thought of it, I was imaging huge maps, stored in any
> filesystem. I didn't want theoretical nor physical limitations. For
> instance, FAT32 only can manage 65534 files in a single folder. Let's
> imagine a map at 1:5000 scale. Let's consider a resolution of 0.5
> meters/pixel. Then a tile of 256x256 pixels would represent 128x128 meters.
> Thus at this scale, and considering only one file for each tile, the maximum
> storable map would be 8388 km in the Y axis. Maybe this is not a problem in
> many cases, but it's worse if you must store it in FAT16 (think of a small
> device with flash memory). FAT16 limits the number of files in a folder to
> 512.
>
>  The problem is worse with many file images per tile, as GeoQuadTree manages
> multiband.
>
>
> Tile format
>
>  GeoQuadTree version 0.9.0 only supported PNG as the format for tiles.
>
>  Some people (Frank Warmerdam amongst them) requested support for other
> formats.
>
>  GeoQuadTree 1.0.0 supports TIFF and JPEG as well as PNG as tile image
> formats.
>
>
> Multiband
>
> Will GDAL2Tiles support only RGB images ?
>
>  GeoQuadTree version 0.9.0 only supported RGB images, but someonerequested
> multiband support.
>
>  GeoQuadTree version 1.0.0 supports unlimited bands:
>
>  In the case of PNG format for tiles, a grey-valued PNG image is stored for
> each band in any tile (1.png for the first band, 2.png for the second band,
> etc). If the number of bands is 3, then any tile can be stored as 3
> gray-valued PNG images, or by means of a sole RGBA image ( 1.png).
>
>  In the case of TIFF format for tiles, a unique TIFF image is stored for all
> bands (1.tif), as TIFF format support multiband images.
>
>  In the case of JPEG format for tiles, a JPEG file is stored for each band
> in any tile (1.jpg for the first band, 2.jpg for the second band, etc.)
>
>
> Nodata values
>
>  GeoQuadTree 0.9.0 used the alpha channel in the PNG format to store the
> nodata values (0 indicated nodata, 255 indicated data).
>
>  GeoQuadTree 1.0.0 stores the nodata values with different approaches:
>
>  In the case of PNG format for tiles, the alpha channel is used for
> representing nodata values (0 indicates nodata, 255 or 65535 indicates
> data).
>
>  As Frank Warmerdam noted in the GDAL-dev mail list, with JPEG using a color
> as nodata it is not suitable. So I decided to use an associated PNG to store
> the nodata values. If the PNG is not present, then all pixels are considered
> data values. If the image tile file is not present, then all pixels are
> considered nodata values. If both the image file and nodata PNG file are
> present, then the values in the nodata PNG indicate if each pixel is data or
> nodata.
>
>  In the case of TIFF or JPEG format for tiles, a PNG file is associated with
> the tile, storing the data and nodata values. For instance, for a tile,
> there are 1.tif and 1.png . The first stores the image pixel values, and the
> second stores the nodata values.
> Best wishes,
>
> Jordi

Geo Quad Tree
-------------

Great features of GQT which I like:

- One map (including one!! metadata file and in the future multibands
tiles) is stored in one directory
- It is 100% file-format (especially 1.0 version) comparable to other
formats supported by GDAL, so one raster tiff source could be
converted into one tile format.
- There are already existing tools for process this format and
read-only driver for GDAL, now available under suitable license
- Conversion between tile formats could be done just by rename of tile
files and generating another metadata, so easy export into TMS
structure is still possible.

Disadvantages of GQT from my point of view:

- Not a label of OSGeo standard like TMS have
- A bit more complicated generation of tile url on client side, but
possible in JavaScript
- No viewer support this structure directly as I know, on the other
side QuadTree-based tile structure is used in Microsoft VirtualEarth
(tiles produced by tool MSR MapCruncher for example).

Tile Map Service
----------------

I have realized that TMS specification doesn't fit me because:

- TMS tile structure is not very well designed for simple hosting of
tiles on a webserver as static files. As I have seen only
global-mercator profile was practically used and then no metadata were
generated at all (or clients were not using them - OpenLayers,
WorldKit).
- Metadata like TileMap Resource XML have url of directory, how to
serve this as static file?
- Definition of standard is not well structured, there should be
section for simple static hosting (just tiles in global-geodetic,
without or with simple metadata) and definition of XML files which
serve list of available maps. A man should choose in my opinion if to
support whole TMS standard, eg. serve listing Metadata or host just
one map in some directory.
I see that TMS is mostly used by scripts, not as static files, but
anyway it should be designed to support this in my opinion.

on the other side, it's a standard supported by OSGeo, it has
easy-for-client tile naming structure....

Any comments are welcome... I hope you will not crucify me ;-)

Klokan

From warmerdam at pobox.com  Tue Jul  3 18:43:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468ABDC6.40900@perkins.net>
References: <468AB2DF.9080607@perkins.net> <468ABC43.7030806@pobox.com>
	<468ABDC6.40900@perkins.net>
Message-ID: <468AD110.3030503@pobox.com>

Simon Perkins wrote:
> Well, really, we just need a solution that allows us to store large 
> numbers of rasters in spatial databases. It seemed that the choices came 
> down to Oracle Spatial or ArcGIS Server (SDE). Are there other 
> alternatives? What are your qualms about ArcSDE? I've never used it, so 
> any comments much appreciated!

Simon,

Sorry, no serious objection.  It just seems like opting from one
expensive proprietary technology to another.  I don't know any
other good cheap/free raster-in-database solutions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Tue Jul  3 19:23:34 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468AD110.3030503@pobox.com>
References: <468AB2DF.9080607@perkins.net> <468ABC43.7030806@pobox.com>
	<468ABDC6.40900@perkins.net> <468AD110.3030503@pobox.com>
Message-ID: <468ADA76.7040501@noaa.gov>

Frank Warmerdam wrote:
> Simon Perkins wrote:
>> Well, really, we just need a solution that allows us to store large 
>> numbers of rasters in spatial databases. >

> I don't know any
> other good cheap/free raster-in-database solutions.

PostGIS can't do it? Darn.

Is it really critical that the rasters themselves be stored in the 
database? Rather than say, references to files instead?

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From sy at perkins.net  Tue Jul  3 19:46:57 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468ADA76.7040501@noaa.gov>
References: <468AB2DF.9080607@perkins.net>
	<468ABC43.7030806@pobox.com>	<468ABDC6.40900@perkins.net>
	<468AD110.3030503@pobox.com> <468ADA76.7040501@noaa.gov>
Message-ID: <468ADFF1.7000902@perkins.net>

Christopher Barker wrote:
>> I don't know any
>> other good cheap/free raster-in-database solutions.
>
> PostGIS can't do it? Darn.

There have been a couple of musings about raster support in PostGIS over 
the last few years, but I haven't seen anything ready for primetime.

> Is it really critical that the rasters themselves be stored in the 
> database? Rather than say, references to files instead?

We may fall back on the file reference model, but our first preference 
is to put all the data in the database. It's something of a marketing 
strategy as well - all your data in one place.

Cheers,

Simon


From rayg at daylongraphics.com  Tue Jul  3 21:09:41 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] USGS DEM driver asymmetric?
In-Reply-To: <468ADFF1.7000902@perkins.net>
References: <468AB2DF.9080607@perkins.net> <468ABC43.7030806@pobox.com>
	<468ABDC6.40900@perkins.net> <468AD110.3030503@pobox.com>
	<468ADA76.7040501@noaa.gov> <468ADFF1.7000902@perkins.net>
Message-ID: <468AF355.3060106@daylongraphics.com>

There seems to be an asymmetry in the USGS DEM driver, just wondering if 
it's supposed to be that way or not.

Specifically, when writing, elevations are written out as is. When 
reading, however, they are scaled by the Z resolution value. So 
roundtripping using a Z res other than 1.0 does not produce equivalent 
results.

Ray




From ivan.mjartan at geovap.cz  Wed Jul  4 04:11:15 2007
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Transform raster into coordinate system 
Message-ID: <000801c7be12$e4b1e120$1a01a8c0@pc24>

Hi list,

 

I'am trying solve one problem and I would like ask you, if it is possible using GDAL lib to solve it. 

 

At first I try describe what I need to do. 

So I have scan of raster (TIFF) without georeference and I need make geo position of this raster into SJTSK coordinate (EPSG:102067). So I know that it is not easy At first I need some geo referenced map (vector) and than mark identical point in the raster and vector map to get coordinate of identical point in raster. Then I can transform raster into my coordinate system. 

First what I need is compute polynomial formula to compute transform than I can compute output raster size after that I have to go throw each pixel in the output raster and compute (using polynomial formula) pixel from source raster.



So problem is that source raster can be very large and other problem is that this algorithm is very expensive. 

My question is It is possible do it by using GDAL? 

I have source raster without geo reference and I have array of identical point and each identical point has real geo coordinate. And I would like transform source raster into coordinate system.

 

Thanks a lot for your help 

 

Ivan Mjartan




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070704/86a6a495/attachment.html
From guillaume.huby.lists at gmail.com  Wed Jul  4 05:26:09 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Transform raster into coordinate system
In-Reply-To: <468B6460.3050706@geosys.com>
References: <468B6460.3050706@geosys.com>
Message-ID: <ddc797c30707040226vee6a3ebned3a0859e26b6b06@mail.gmail.com>

>
> -------- Message original --------
> Sujet:  [Gdal-dev] Transform raster into coordinate system
> Date:   Wed, 4 Jul 2007 10:11:15 +0200
> De:     Ivan Mjartan <ivan.mjartan@geovap.cz>
> Pour ::         <gdal-dev@lists.maptools.org>
> Copie a` ::     Robert Matul?k <robert.matulik@geovap.cz>
>
>
>
> Hi list,
>
>
>
> I'am trying solve one problem and I would like ask you, if it is
> possible using GDAL lib to solve it.
>
>
>
> At first I try describe what I need to do.
>
> So I have scan of raster (TIFF) without georeference and I need make geo
> position of this raster into SJTSK coordinate (*EPSG:102067*). So I know
> that it is not easy At first I need some geo referenced map (vector) and
> than mark identical point in the raster and vector map to get coordinate
> of identical point in raster. Then I can transform raster into my
> coordinate system.
>
> First what I need is compute polynomial formula to compute transform
> than I can compute output raster size after that I have to go throw each
> pixel in the output raster and compute (using polynomial formula) pixel
> from source raster.
>
> So problem is that source raster can be very large and other problem is
> that this algorithm is very expensive.
>
> My question is It is possible do it by using GDAL?
>
> I have source raster without geo reference and I have array of identical
> point and each identical point has real geo coordinate. And I would like
> transform source raster into coordinate system.


Hello,

I had the same problem yesterday. Here is how I solved it. The identical
point you have are named GCP (for Ground Control Points). For each GCP you
should have 2 pairs of numbers : (column, line) indexes of raster matrix and
(x, y) georeferenced coordinates of points. Once you have all this data for
your GCPs, you use gdal_translate utility to add GCPs into your raster (in
this sample 3 GCPs) :
gdal_translate -gcp 0 0 -2291216.87 2396570.93 -gcp 4100 0 2291216.87
2396570.93 -gcp <column> <line> <x> <y> image.tif image_gcp.tif (see
http://www.gdal.org/gdal_translate.html)
Then you can directly apply polynomial to your raster using gdalwarp :
gdalwarp -order 1 image_gcp.tif image_georef.tif (where order is the order
of your polynomial model).
For an order 1 you need at least 3 GCPs. There is also a spline option (see
http://www.gdal.org/gdalwarp.html).

I hope this will help you.

Good luck,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070704/6ba78ef0/attachment.html
From roberto.starnini at gmail.com  Wed Jul  4 06:23:57 2007
From: roberto.starnini at gmail.com (Roberto Starnini)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] PHP_OGR layer create options
In-Reply-To: <468A609D.6010502@dmsolutions.ca>
References: <3367565a0706280211i5b4d57caodc7694c65f13ff80@mail.gmail.com>
	<468A609D.6010502@dmsolutions.ca>
Message-ID: <3367565a0707040323rc1eb0e8v7df0330482fe6cd@mail.gmail.com>

Hi,

I've problems setting some function parameters on ms4w php-ogr library.

There is no OGR_DS_CreateLayer() example with layer creation options and I
don't understand what kind of parameter type I have to use.

Thanks






2007/7/3, Jeff McKenna <jmckenna@dmsolutions.ca>:
>
> Regarding your direct email to me asking the same question as below: no
> I am no help to you regarding this.
>
> --
> jeff
>
>
>
> Roberto Starnini wrote:
> > Hello,
> >
> > I have used ogr/php library to migrate layers from Oracle to Postgres. I
> > have a problem with the last parameter of OGR_DS_CreateLayer()
> >  function. I have passed an array of options :
> >  $aoptions[0] = 'OVERWRITE=YES';
> >  $aoptions[1] = 'GEOMETRY_NAME=the_geom';
> > but it doesn't works.
> >
> > Thanks for help!
> >
> >
> > Roberto Starnini
> >
> >
>
>
> --
> Jeff McKenna
> DM Solutions Group Inc.
> http://www.dmsolutions.ca
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070704/02db70f4/attachment.html
From guillaume.huby.lists at gmail.com  Wed Jul  4 11:04:38 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] gdal_translate : -a_ullr fail in specific case
Message-ID: <ddc797c30707040804j59ab102cu2b80b1ec8c8321c8@mail.gmail.com>

Hello,

I met some trouble using -a_ullr option in some case. I have a file
input.tif :
> gdalinfo input.tif
Driver: GTiff/GeoTIFF
Files: input.tif
Size is 1026, 1076
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1076.0)
Upper Right ( 1026.0,    0.0)
Lower Right ( 1026.0, 1076.0)
Center      (  513.0,  538.0)
Band 1 Block=1026x7 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
... blabla

I try to translate it :
> gdal_translate -a_ullr 0.000000000000 0.000000000000 1026.000000000000 -
1076.000 input.tif output.tif

process OK, but :
> gdalinfo output.tif
Driver: GTiff/GeoTIFF
Files: output.tif
Size is 1026, 1076
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1076.0)
Upper Right ( 1026.0,    0.0)
Lower Right ( 1026.0, 1076.0)
Center      (  513.0,  538.0)
Band 1 Block=1026x7 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
... blabla

While I expected this kind of result :
Driver: GTiff/GeoTIFF
Files: output.tif
Size is 1026, 1076
Coordinate System is `'
Origin = (1.000000000000000,1.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  (   1.0000000,   1.0000000)
Lower Left  (       0.000,   -1076.000)
Upper Right (    1026.000,       0.000)
Lower Right (    1026.000,   -1076.000)
Center      (     513.000,    -538.000)
Band 1 Block=1026x7 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
... blabla

If I change one value of -a_ullr, everything is OK, but for those specific
values, it doesn't work ! Is it normal or is it a bug ?

Thanks for your replies.

Best regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070704/b0286066/attachment.html
From warmerdam at pobox.com  Wed Jul  4 13:44:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] FGS with GDAL 1.4.2
Message-ID: <468BDC79.9050300@pobox.com>

Folks,

I've been experimenting with the FGS (FOSS GIS Suite) packaging system
for linux with some success.  I've created a package that includes
GDAL 1.4.2 and a bunch of dependencies, including python (NG bindings)
support.

An all-in-one installer is available at:

http://download.osgeo.org/gdal/fgs-modules/fgs-gdal-python-1.4.2-linux-i386.bin

You should be able to download and install this on most x86 style linux
systems.  To install run the .bin file as an argument to bash.

eg.

sh fgs-gdal-python-1.4.2-linux-i386.bin

This produces a self-contained install seperate from the rest of your
system.

Additional details on FGS are available at:

   http://www.maptools.org/fgs/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hellik at web.de  Wed Jul  4 17:33:35 2007
From: hellik at web.de (Helmut Kudrnovsky)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ERROR 6: Failed to initialize PROJ.4 with ...
Message-ID: <1417540239@web.de>

hi,

i've tried to warp a geotiff with the following command by the mean of gdal of the FWtools1.3.4 on a win-xp-machine:

C:\data_rev\rect>gdalwarp -of GTiff -s_srs Austria_GK_MGI_M31.prj -t_srs dhdn_zone3.prj teil2_gw_gk31.tif teil2_gw_dhdnz3.tif

where Austria_GK_MGI_M31.prj is:

PROJCS["Austria_MGI_M31",GEOGCS["GCS_MGI",DATUM["D_MGI",SPHEROID["Bessel_1841",6377397.155,299.1528128],TOWGS84[577.326,90.129,463.919,5.137,1.474,5.297,2.4232]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",-5000000.0],PARAMETER["Central_Meridian",13.33333333333333],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]

and dhdn_zone3.prj is :

PROJCS["DHDN_3_Degree_Gauss_Zone_3",GEOGCS["GCS_Deutsches_Hauptdreiecksnetz",DATUM["D_Deutsches_Hauptdreiecksnetz",SPHEROID["Bessel_1841",6377397.155,299.1528128],TOWGS84[598.1,73.7,418.2,0.202,0.045,-2.455,6.7]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Gauss_Kruger"],PARAMETER["False_Easting",3500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",9.0],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]

and the following error message comes up:

ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
Creating output file that is 3643P x 3885L.
Processing input file teil2_gw_gk31.tif.
ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
:0...10...20...30...40...50...60...70...80...90...100 - done.

what does this error message "ERROR 6: Failed to initialize PROJ.4..." mean?  i've got the TOWGS84 parameters for source (epsg-code: 1618, MGI to WGS 84-3) and target (epsg-code: 1777, DHDN to WGS 84-2)  from the epsg-database

best regards an thanks in advance
helli


gdalinfo teil2_gw_gk31.tif:

Driver: GTiff/GeoTIFF
Files: teil2_gw_gk31.tif
       teil2_gw_gk31.aux
       teil2_gw_gk31.rrd
Size is 3643, 3885
Coordinate System is:
PROJCS["Austria_MGI_M31",
    GEOGCS["GCS_MGI",
        DATUM["unknown",
            SPHEROID["unnamed",6377397.155,299.1528128000009]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",13.33333333333333],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",-5000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-30199.836829051419000,309992.790323723110000)
Pixel Size = (1.500172774538732,-1.500172774538732)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  -30199.837,  309992.790) ( 12d55'44.97"E, 47d55'41.88"N)
Lower Left  (  -30199.837,  304164.619) ( 12d55'46.44"E, 47d52'33.16"N)
Upper Right (  -24734.707,  309992.790) ( 13d 0'8.27"E, 47d55'42.72"N)
Lower Right (  -24734.707,  304164.619) ( 13d 0'9.48"E, 47d52'34.00"N)
Center      (  -27467.272,  307078.705) ( 12d57'57.29"E, 47d54'7.96"N)
Band 1 Block=3643x2 Type=Byte, ColorInterp=Red
  Overviews: 911x972, 456x486, 228x243, 114x122, 57x61
Band 2 Block=3643x2 Type=Byte, ColorInterp=Green
  Overviews: 911x972, 456x486, 228x243, 114x122, 57x61
Band 3 Block=3643x2 Type=Byte, ColorInterp=Blue
  Overviews: 911x972, 456x486, 228x243, 114x122, 57x61
  
gdalinfo teil2_gw_dhdnz3.tif:
 
 Driver: GTiff/GeoTIFF
Files: teil2_gw_dhdnz3.tif
Size is 3643, 3885
Coordinate System is:
LOCAL_CS["DHDN_3_Degree_Gauss_Zone_3",
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-30199.836829051419000,309992.790323723110000)
Pixel Size = (1.500172774538732,-1.500172774538732)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  -30199.837,  309992.790) 
Lower Left  (  -30199.837,  304164.619) 
Upper Right (  -24734.707,  309992.790) 
Lower Right (  -24734.707,  304164.619) 
Center      (  -27467.272,  307078.705) 
Band 1 Block=3643x2 Type=Byte, ColorInterp=Red
Band 2 Block=3643x2 Type=Byte, ColorInterp=Green
Band 3 Block=3643x2 Type=Byte, ColorInterp=Blue


_______________________________________________________________________
Jetzt neu! Sch?tzen Sie Ihren PC mit McAfee und WEB.DE. 3 Monate
kostenlos testen. http://www.pc-sicherheit.web.de/startseite/?mc=022220



From hobu.inc at gmail.com  Wed Jul  4 21:56:21 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468ABC43.7030806@pobox.com>
References: <468AB2DF.9080607@perkins.net> <468ABC43.7030806@pobox.com>
Message-ID: <D7888C84-B5F3-48E0-B7A0-EA5737BF74C0@gmail.com>

> Simon Perkins wrote:
>> My company has a need for write access in both GDAL and OGR in  
>> addition. Would anyone out there, e.g. Howard, be interested in  
>> adding this, if we sponsored it?
>
> Howard would be the obvious person to take on write support, and I'm
> sure he would be pleased to prepare a quote.  I'll leave that ball in
> his court.
>
>> P.S. Frank: we'd talked earlier about sponsoring a Oracle Spatial  
>> GeoRaster driver, but, after some debate, I think we're going to  
>> use ArcSDE instead. Oracle Spatial just gets too expensive since  
>> it's only available as an option on the enterprise database (at  
>> about $40k a processor).

Simon,

I'd be happy to prepare a quote for you for write support for OGR and  
for GDAL.  I have a half-finished OGR/SDE write proposal written  
already, and I've done some investigation about write support for  
GDAL.  I found that ArcSDE's raster model maps quite nicely to GDAL,  
and it should be fairly straightforward to support writing rasters to  
ArcSDE.  OGR on the otherhand....

Additionally, if you get a chance, I would appreciate some rigorous  
testing of the GDAL SDE driver.  It's been in the wild for a little  
while, but it hasn't made it into an official release yet, and if  
there are any bugs still outstanding, it would be nice to smash them  
before we do a 1.5 release later this summer.

Howard

PS... wait for ArcSDE 9.3, and you'll have your raster in Postgres  
solution ;)


From mateusz at loskot.net  Thu Jul  5 00:52:52 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ERROR 6: Failed to initialize PROJ.4 with ...
In-Reply-To: <1417540239@web.de>
References: <1417540239@web.de>
Message-ID: <3959.84.10.81.30.1183611172.squirrel@loskot.net>

Helmut Kudrnovsky wrote:
> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel
> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
> Creating output file that is 3643P x 3885L.
> Processing input file teil2_gw_gk31.tif.
> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel
> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
>
> what does this error message "ERROR 6: Failed to initialize PROJ.4..."
> mean?

It usually means the SRS is unknown or parameters are invalid.

> i've got the TOWGS84 parameters for source (epsg-code: 1618, MGI to
> WGS 84-3) and target (epsg-code: 1777, DHDN to WGS 84-2)  from the
> epsg-database

Could you try to use EPSG codes directly instead of definitions
from .prj files?

Please, check if following command works for you:

gdalwarp -of GTiff -s_srs EPSG:4312 -t_srs EPSG:4314 teil2_gw_gk31.tif
teil2_gw_dhdnz3.tif

where 4312 is EPSG code of MGI and 4314 of DHDN.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From kevsemola at gmail.com  Thu Jul  5 03:12:07 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] s 57 writer
Message-ID: <7337d4f60707050012s6950a39dpaf072f1999b817db@mail.gmail.com>

Hi;
In some part of the doc (if i dont remember wrong); there is a little
support of write for s57 data. If so; where in which release (it seems that
the support is not at the release), I can get the support?

Actually I dont need the s57 data to be written; rather create a layer on
the fly may be sufficient enough, but it is not supported as said so... Or
any ideas to create a layer?

* Maybe just convert the s57 data to a format where the write support exist,
but here i am not sure which conversion will be the lossless for the s 57?

Thanks again :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070705/ef268517/attachment.html
From hellik at web.de  Thu Jul  5 04:48:53 2007
From: hellik at web.de (Helmut Kudrnovsky)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] FW: ERROR 6: Failed to initialize PROJ.4 with ...
Message-ID: <1418169720@web.de>



>Helmut Kudrnovsky wrote:
>> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel
>> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
>> Creating output file that is 3643P x 3885L.
>> Processing input file teil2_gw_gk31.tif.
>> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel
>> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
>> :0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> what does this error message "ERROR 6: Failed to initialize PROJ.4..."
>> mean?

>It usually means the SRS is unknown or parameters are invalid.

>> i've got the TOWGS84 parameters for source (epsg-code: 1618, MGI to
>> WGS 84-3) and target (epsg-code: 1777, DHDN to WGS 84-2)  from the
>> epsg-database

>Could you try to use EPSG codes directly instead of definitions
>from .prj files?

>Please, check if following command works for you:

>gdalwarp -of GTiff -s_srs EPSG:4312 -t_srs EPSG:4314 teil2_gw_gk31.tif
>teil2_gw_dhdnz3.tif

i've tried command above and there is another error-message:

"ERROR 1: Too many points (441 out of 441) failed to transform, unable to compute output bounds."

>where 4312 is EPSG code of MGI and 4314 of DHDN.

>Cheers
>-- 
>Mateusz Loskot
>http://mateusz.loskot.net

cheers 
helli


_____________________________________________________________________
Der WEB.DE SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
http://smartsurfer.web.de/?mc=100071&distributionid=000000000066


From DCarreira at edia.pt  Thu Jul  5 04:48:50 2007
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
Message-ID: <94C0F903807262438796839A98A9BA5001A5F972@beja001.edia.pt>

Hi all.

I'm using ArcSDE for storing what we like to think are large raster
mosaics, although our scale may be a bit smaller than yours... Portugal
is small.

I would like to 'defend' the raster-in-database approach and also point
out why we like to use GDAL/OGR with our ArcSDE database.

I build raster mosaics by merging all images into a single table. As
each image is merged, pyramid levels are built for that area, turning
the mosaic into a kind of sid/ecw/jp2 huge file.

Now, about the advantages over file-based mosaics?
In my opinion they are the following:
 - I can extract a window extremely fast, and even choose the pyramid
level I want - in fact choosing the output resolution;
 - I can update a portion of the mosaic and rebuild pyramids for that
area, extremely fast;
 - I can add new areas just by importing a new image, extremely fast;
 - I can have all my desktop GIS users and Intranet and Internet users
accessing the same mosaic at what we perceive as an excellent
performance (and our servers are single-P4 based...) - I think the usual
RDBMS advantages apply here;
 - I am under the impression (but have no numbers to support this) that
big raster files in a file-share have less performance than accessing
the same information on a RDBMS - of course this varies with your LAN
and RDBMS, access patterns, and file sizes, but I feel this is really
true in our case here;
 - I prefer using mosaics over collections of independent rasters, since
I find managing collections to be more work-intensive, being referenced
or in the database;
 - ArcSDE integrates extremely well with ArcGIS and ArcIMS (but this is
obviously only important because we use ArcGIS and ArcIMS);

Why am I interested in having GDAL/OGR reading ArcSDE?
 - ArcGIS is slow exporting raster mosaics - we use ArcSDE command-line
utilities which are veeery fast;
 - ArcSDE command-line tools only export to TIF format;
 - I would prefer having GDAL exporting to a plethora of formats and
letting the user choose one;
 - I would prefer to use GDAL instead of ArcSDE command-line tools
because I feel I shouldn't have to install ArcSDE binaries on users'
PCs;
 - OGR read access to ArcSDE is important to me IF there are GIS desktop
tools that use it to access the data (I'm thinking QGIS or others...),
and IF mapservers use it (mapserver, geoserver, ...);
 - Finally, by using GDAL/OGR libs I can develop a small viewer in-house
that could show ArcSDE data (though I'm not considering it).

On a foot-note, I have stumbled on a few discussions about having
raster-data on a RDBMS or not. Isn't it just a matter of selecting the
right rows for the viewing window in both cases - vector and raster? I
feel the same reasoning applied to vector data should apply to raster
data. If you see advantages for the former the same should apply to the
later.

Regards,
Duarte Carreira

-----Mensagem original-----
De: Simon Perkins [mailto:sy@perkins.net] 
Enviada: quarta-feira, 4 de Julho de 2007 0:47
Para: Christopher Barker
Cc: gdal-dev
Assunto: Re: [Gdal-dev] ArcSDE Support in GDAL/OGR

Christopher Barker wrote:
>> I don't know any
>> other good cheap/free raster-in-database solutions.
>
> PostGIS can't do it? Darn.

There have been a couple of musings about raster support in PostGIS over
the last few years, but I haven't seen anything ready for primetime.

> Is it really critical that the rasters themselves be stored in the 
> database? Rather than say, references to files instead?

We may fall back on the file reference model, but our first preference
is to put all the data in the database. It's something of a marketing
strategy as well - all your data in one place.

Cheers,

Simon




From dany.geotools at gmail.com  Thu Jul  5 07:03:57 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: Error2 CPLRealloc(): Out of memory allocating 10
	bytes (with MrSID)
In-Reply-To: <7221db410706280854i72027c91tec5c83305e587525@mail.gmail.com>
References: <7221db410706280854i72027c91tec5c83305e587525@mail.gmail.com>
Message-ID: <7221db410707050403h6bbf6c02w283291b386ed7992@mail.gmail.com>

Hi List.
I'm again here ;)

Today I re-built GDAL with ECW support (for windows XP).
After spending some hours in the attempt of building it using a Visual
Studio .Net solution (Although I attempted to add all required Include,
Libs, and options, I encountered a lot of problems with NCS related files) I
finally used a simple NMAKE and I built it in 5 minutes.

Now, I'm fighting again with the old problem :) (related to MrSID support)
Thus, I'm really sorry bothering you with my old question:

Any suggestion to build GDAL using NMAKE without the error "CPLRealloc():
Out of memory allocating N bytes" occurring when reading some MrSID files
from Java?
^_^.

Best Regards
Daniele


On 6/28/07, Daniele Romagnoli <dany.geotools@gmail.com> wrote:
>
> Hi list,
> I encountered a strange error when using GDAL's MrSID driver from Java.
> (My system is Windows XP with Visual Studio .Net 2003)
>
> I built GDAL from SVN (I'm using the revision 11339) using NMAKE.
>
> I written an ImageIO plugin for loading and reading MrSID data sources.
> This is a typical code in my plugin:
>
> -------------------------------------------------------------------------------------------
> ...
> {
>        Dataset ds = gdal.Open(String name, int accessType);
>        ...
>        // trivial operations (getting Driver and Driver's description).
>        ...
>        ds.delete();
> }
> ...
> // trivial operations
> ...
> {
>  ...
>  Dataset ds = gdal.Open(String name, int accessType);
>  ...
> }
> -------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> I noticed that on some MrSID data samples, when calling the Open method
> the second time, this error will occur:
> Error2 CPLRealloc(): Out of memory allocating 10 bytes.
>
> It is thrown when MrSID parses metadata on mrsiddataset.cpp:
> pszMetadata = (char *)CPLRealloc( pszMetadata, iLength );
>
> To solve this problem, I built GDAL using a Visual Studio Solution (with
> MrSID support properly configured) and the error magically disappears.
>
> Any suggestion to build GDAL using NMAKE without this error?
> (I already attempted a NMAKE clean ...)
>
> Thank you very much.
>
> --
> Best Regards,
> Daniele Romagnoli




-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070705/bc7bb098/attachment.html
From christian.braun at tudor.lu  Thu Jul  5 09:59:54 2007
From: christian.braun at tudor.lu (christian.braun@tudor.lu)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Send more than one layer create option
Message-ID: <OF073479C6.837240D4-ONC125730F.004CE535-C125730F.004CE53E@tudor.lu>


Hello list members,

how is it possible to send more than one "layer create option" writing from
GRASS to PostGIS. I want to set the name of the geometry column and
overwrite the resulting table.

Thanks in advance,

Christian
_________________________________________

Dipl. Geogr. Christian Braun
Tel: +352- 425991-608
Mobil: +49-179-6845896
Mail: christian.braun@tudor.lu

Resource Centre for Environmental Technologies,
Public Research Centre Henri Tudor,
Technoport Schlassgoart,
66 rue de Luxembourg,
P.O. BOX 144,
L-4002 Esch-sur-Alzette, Luxembourg


From warmerdam at pobox.com  Thu Jul  5 10:12:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: Error2 CPLRealloc(): Out of memory allocating
	10 bytes (with MrSID)
In-Reply-To: <7221db410707050403h6bbf6c02w283291b386ed7992@mail.gmail.com>
References: <7221db410706280854i72027c91tec5c83305e587525@mail.gmail.com>
	<7221db410707050403h6bbf6c02w283291b386ed7992@mail.gmail.com>
Message-ID: <468CFC32.6090300@pobox.com>

Daniele Romagnoli wrote:
> Now, I'm fighting again with the old problem :) (related to MrSID support)
> Thus, I'm really sorry bothering you with my old question:
> 
> Any suggestion to build GDAL using NMAKE without the error 
> "CPLRealloc(): Out of memory allocating N bytes" occurring when reading 
> some MrSID files from Java?

Daniele,

I'm afraid I'll need more to go on than this.  I don't know what would
be causing this problem.  Can this issue only be reproduced from Java calls?
Is it possible there is a "heap confusion" problem with the Java wrappers
that is corrupting a heap?  For instance, do you use /MD for all components
so a shared C runtime heap is used for all components?

I'm hesitant to spend a lot of time trying to reproduce your problem at my
end without very specific parameters since the issue is likely to be
specific to the combination of compilers, compile options and versions of
GDAL and the SDK.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul  5 10:16:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Send more than one layer create option
In-Reply-To: <OF073479C6.837240D4-ONC125730F.004CE535-C125730F.004CE53E@tudor.lu>
References: <OF073479C6.837240D4-ONC125730F.004CE535-C125730F.004CE53E@tudor.lu>
Message-ID: <468CFD5B.9070306@pobox.com>

christian.braun@tudor.lu wrote:
> Hello list members,
> 
> how is it possible to send more than one "layer create option" writing from
> GRASS to PostGIS. I want to set the name of the geometry column and
> overwrite the resulting table.

Christian,

If you are using the ogr2ogr commandline program, just use multiple
-lco options.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Thu Jul  5 12:50:59 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <468ADFF1.7000902@perkins.net>
References: <468AB2DF.9080607@perkins.net> <468ABC43.7030806@pobox.com>
	<468ABDC6.40900@perkins.net> <468AD110.3030503@pobox.com>
	<468ADA76.7040501@noaa.gov> <468ADFF1.7000902@perkins.net>
Message-ID: <468D2173.9020706@noaa.gov>

Simon Perkins wrote:
>> PostGIS can't do it? Darn.
> 
> There have been a couple of musings about raster support in PostGIS over 
> the last few years, but I haven't seen anything ready for primetime.

Yes, I did some googling after sending that note, and found much the 
same thing -- Frank contributed to some of the threads, of course!

> We may fall back on the file reference model, but our first preference 
> is to put all the data in the database. It's something of a marketing 
> strategy as well - all your data in one place.

RDBMS store data in multiple files anyway -- how much is marketing like 
that really worth?

In reading the threads in the postGIS list, there are some good reasons 
for having the data in the DB -- if you need features that can really 
make use of it, then I guess ArcSDE is the way to go. Oh well.

-CHB


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Thu Jul  5 13:40:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] s 57 writer
In-Reply-To: <7337d4f60707050012s6950a39dpaf072f1999b817db@mail.gmail.com>
References: <7337d4f60707050012s6950a39dpaf072f1999b817db@mail.gmail.com>
Message-ID: <468D2D1D.3050108@pobox.com>

kevser sonmez wrote:
> Hi;
> In some part of the doc (if i dont remember wrong); there is a little 
> support of write for s57 data. If so; where in which release (it seems 
> that the support is not at the release), I can get the support?

Kevser,

The writing code should exist in any modern GDAL/OGR but it is very
challenging to make it work in a useful fashion.  Mostly it is just
useful for writing one S-57 file to a new file (perhaps changing
attribute values or something simple like that).

I do not support S-57 writing for free, because it is just too
unpleasant and unready for prime time.

> Actually I dont need the s57 data to be written; rather create a layer 
> on the fly may be sufficient enough, but it is not supported as said 
> so... Or any ideas to create a layer?
> 
> * Maybe just convert the s57 data to a format where the write support 
> exist, but here i am not sure which conversion will be the lossless for 
> the s 57?

If memory use isn't a big concern, you can load S-57 data into a
memory dataset (the "Memory" driver") and then you can modify that
freely using the normal OGR methods.  The memory driver should be
able to hold anything that OGR gets out of S-57.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul  5 14:04:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ERROR 6: Failed to initialize PROJ.4 with ...
In-Reply-To: <1417540239@web.de>
References: <1417540239@web.de>
Message-ID: <468D32A7.70008@pobox.com>

Helmut Kudrnovsky wrote:
> hi,
> 
> i've tried to warp a geotiff with the following command by the mean of gdal of the FWtools1.3.4 on a win-xp-machine:
> 
> C:\data_rev\rect>gdalwarp -of GTiff -s_srs Austria_GK_MGI_M31.prj -t_srs dhdn_zone3.prj teil2_gw_gk31.tif teil2_gw_dhdnz3.tif
> 
> where Austria_GK_MGI_M31.prj is:
> 
> PROJCS["Austria_MGI_M31",GEOGCS["GCS_MGI",DATUM["D_MGI",SPHEROID["Bessel_1841",6377397.155,299.1528128],TOWGS84[577.326,90.129,463.919,5.137,1.474,5.297,2.4232]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",-5000000.0],PARAMETER["Central_Meridian",13.33333333333333],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]
...
> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.

Helmut,

I don't know why you are getting this error.  I saved your WKT above to a
file and tested it with test epsg and it seemed to work fine.  You might
want to try "testepsg Austria_GK_MGI_M31.prj" in the FWTools shell to
check it at your end.  When I do it, I get something ending with:

PROJ.4 rendering of [1.wkt] = +proj=tmerc +lat_0=0 +lon_0=13.33333333333333 
+k=1.000000 +x_0=0 +y_0=-5000000 +ellps=bessel 
+towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232 +units=m +no_defs

> Creating output file that is 3643P x 3885L.
> Processing input file teil2_gw_gk31.tif.
> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> what does this error message "ERROR 6: Failed to initialize PROJ.4..." mean?  i've got the TOWGS84 parameters for source (epsg-code: 1618, MGI to WGS 84-3) and target (epsg-code: 1777, DHDN to WGS 84-2)  from the epsg-database

For some reason the geographic coordinate system parameters are being
translated but the projection and it's parameters are not.

By the way, the following does not work because EPSG:4314 and EPSG:4312
are geographic coordinate systems and the (projected) input coordinate
are outside the valid range for latitude and longitude angles.

 > gdalwarp -of GTiff -s_srs EPSG:4312 -t_srs EPSG:4314 teil2_gw_gk31.tif
 > >teil2_gw_dhdnz3.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.gregory at oregonstate.edu  Thu Jul  5 14:08:49 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] simplest method for creating/editing a GTiff color table
Message-ID: <451453C181B199458A55B2B1723FAC0006FBBA@SAGE.forestry.oregonstate.edu>

Sorry for a what is likely a very simple question, but a day of web
searches has left me frustrated ...

I have a simple GeoTiff that has an embedded Color Table with this
gdalinfo:

Driver: GTiff/GeoTIFF
Size is 13354, 7330
....
Band 1 Block=13354x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 254,254,254,255
    ...

What is the easiest way (GDAL or not) to edit this color table?  Or
alternatively, what is the easiest way to create and associate a color
table with a GeoTiff?  Sorry if this has been addressed already.

thanks,

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu


From warmerdam at pobox.com  Thu Jul  5 14:39:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Re: gdalwrap - issues with overlapping images
In-Reply-To: <97767.17217.qm@web52008.mail.re2.yahoo.com>
References: <97767.17217.qm@web52008.mail.re2.yahoo.com>
Message-ID: <468D3AF2.4060007@pobox.com>

Anil Kumar wrote:
> Dear Frank Warmerdam,
> I am trying to mosaicing 2 images which are partly overlapping each 
> other using ?gdalwrap?.
> One image first half is filled with white colour and second half is 
> having the required data. Similarly other image first half is filled 
> with required data and second half if filled with white colour. When I 
> mosaicing these two images which are partly overlapping each other using 
> ?gdalwrap, I am getting the output with some white pixels through out 
> the coverage of 2^nd iamge.
>  
> Can you please let me know how this can be rectified using gdalwrap. I 
> found some solution in Global Mapper where we can load both images and 
> with blend mode option as ?darken?. In this way I am not getting above 
> stated problem.

Anil,

Please do not send me substantial sized files by email.  My gmail account
is nearly full, and so every time I notice I have received a large file
I need to go to some trouble to login to gmail, and delete the email.

I have tried mosaicing your files with gdalwarp and discovered that some
of the white areas in the .sid files are being decompressed as "not quite
white" which means they aren't recognised as nodata.  To cope with this
I successfully converted them to TIFF and ran the "nearblack" utility
on them to convert nearly white areas to pure white.  Then the mosaic
worked well with just a wee bit of white noise on the boundary between
the tiles.  Additional fiddling with nearblack parameters might help
cope with that.

  gdal_translate 5246-913591.sid 5246.tif
  gdal_translate 5247-913591.sid 5247.tif
  nearblack -white 5246.tif
  nearblack -white 5247.tif
  gdalwarp -srcnodata "255 255 255" 5246.tif 5247.tif mosaic.tif

The nearblack utility is included in recent FWTools distributions.

I have taken the liberty of cc:ing this to gdal-dev so others can learn
from it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul  5 14:43:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] simplest method for creating/editing a GTiff color
	table
In-Reply-To: <451453C181B199458A55B2B1723FAC0006FBBA@SAGE.forestry.oregonstate.edu>
References: <451453C181B199458A55B2B1723FAC0006FBBA@SAGE.forestry.oregonstate.edu>
Message-ID: <468D3BC5.6030105@pobox.com>

Gregory, Matthew wrote:
> Sorry for a what is likely a very simple question, but a day of web
> searches has left me frustrated ...
> 
> I have a simple GeoTiff that has an embedded Color Table with this
> gdalinfo:
> 
> Driver: GTiff/GeoTIFF
> Size is 13354, 7330
> ....
> Band 1 Block=13354x1 Type=Byte, ColorInterp=Palette
>   Color Table (RGB with 256 entries)
>     0: 0,0,0,255
>     1: 254,254,254,255
>     ...
> 
> What is the easiest way (GDAL or not) to edit this color table?  Or
> alternatively, what is the easiest way to create and associate a color
> table with a GeoTiff?  Sorry if this has been addressed already.

Matt,

The easiest non-scripting way to do this is to translate your file to
VRT (XML) format, and edit the color table in the XML file.

eg.

gdal_translate -of VRT your.tif your.vrt

edit your.vrt and modify the color table.

gdal_translate your.vrt your_fixedup.tif

Note that the .vrt file doesn't actually include the image data, it
just references back to your.tif.

This general approach can be used to modify metadata, color tables,
gcps and other things for which there is no easy to do set them with
gdal_translate.

There are other mechanisms to do this via scripting or c/c++ programming.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul  5 15:29:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <94C0F903807262438796839A98A9BA5001A5F972@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA5001A5F972@beja001.edia.pt>
Message-ID: <468D46A1.2010705@pobox.com>

Duarte Carreira wrote:
> Why am I interested in having GDAL/OGR reading ArcSDE?
>  - ArcGIS is slow exporting raster mosaics - we use ArcSDE command-line
> utilities which are veeery fast;
>  - ArcSDE command-line tools only export to TIF format;
>  - I would prefer having GDAL exporting to a plethora of formats and
> letting the user choose one;
>  - I would prefer to use GDAL instead of ArcSDE command-line tools
> because I feel I shouldn't have to install ArcSDE binaries on users'
> PCs;

Duarte,

The good news is that the current read-only ArcSDE driver in GDAL should
be sufficient for these "extract to another format" uses.

>  - OGR read access to ArcSDE is important to me IF there are GIS desktop
> tools that use it to access the data (I'm thinking QGIS or others...),
> and IF mapservers use it (mapserver, geoserver, ...);

MapServer, and GeoServer (via GeoTools) have non-OGR mechanisms to
access ArcSDE vector data so OGR support isn't strictly needed.  It
should be possible to view SDE sourced data in QGIS using the OGR driver.

SDE vector data can also be used (read only) in GRASS, OpenEV,
and other OGR desktop software though currently it is often hard
to get the driver built in.  Hopefully the standard win32 builds
with SDE as a plugin will help this to some degree.

By the way, it's nice to hear a strong success story with ArcSDE
raster from the horses mouth.  While I still think files in the file
system can be somewhat faster than doing the same thing in a database
through some middleware, I can definitely see huge data management
benefits to having the raster data taken care of in the database with
the assistance of middleware.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hellik at web.de  Thu Jul  5 15:40:29 2007
From: hellik at web.de (hellik@web.de)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ERROR 6: Failed to initialize PROJ.4 with ...
Message-ID: <1419160617@web.de>

hi frank,

thanks for your hint. i testet the target-wkt with testepsg and there is the problem:

Validate Fails.
....
PROJECTION["Gauss_Kruger"]
....
PROJ.4 rendering of [dhdn_zone3.prj] = +ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs

so i hope, i'm right, but PROJECTION["Gauss_Kruger"] doesn't seem to be really a valitaded projection. so i will try it with the right tmerc-projection ....

thanks and greetings from austria
helli


-----Urspr?ngliche Nachricht-----
Von: Frank Warmerdam <warmerdam@pobox.com>
Gesendet: 05.07.07 20:00:07
An: Helmut Kudrnovsky <hellik@web.de>
CC: gdal-dev@lists.maptools.org
Betreff: Re: [Gdal-dev] ERROR 6: Failed to initialize PROJ.4 with ...


Helmut Kudrnovsky wrote:
> hi,
> 
> i've tried to warp a geotiff with the following command by the mean of gdal of the FWtools1.3.4 on a win-xp-machine:
> 
> C:\data_rev\rect>gdalwarp -of GTiff -s_srs Austria_GK_MGI_M31.prj -t_srs dhdn_zone3.prj teil2_gw_gk31.tif teil2_gw_dhdnz3.tif
> 
> where Austria_GK_MGI_M31.prj is:
> 
> PROJCS["Austria_MGI_M31",GEOGCS["GCS_MGI",DATUM["D_MGI",SPHEROID["Bessel_1841",6377397.155,299.1528128],TOWGS84[577.326,90.129,463.919,5.137,1.474,5.297,2.4232]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",-5000000.0],PARAMETER["Central_Meridian",13.33333333333333],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]
...
> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.

Helmut,

I don't know why you are getting this error.  I saved your WKT above to a
file and tested it with test epsg and it seemed to work fine.  You might
want to try "testepsg Austria_GK_MGI_M31.prj" in the FWTools shell to
check it at your end.  When I do it, I get something ending with:

PROJ.4 rendering of [1.wkt] = +proj=tmerc +lat_0=0 +lon_0=13.33333333333333 
+k=1.000000 +x_0=0 +y_0=-5000000 +ellps=bessel 
+towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232 +units=m +no_defs

> Creating output file that is 3643P x 3885L.
> Processing input file teil2_gw_gk31.tif.
> ERROR 6: Failed to initialize PROJ.4 with `+ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs '.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> what does this error message "ERROR 6: Failed to initialize PROJ.4..." mean?  i've got the TOWGS84 parameters for source (epsg-code: 1618, MGI to WGS 84-3) and target (epsg-code: 1777, DHDN to WGS 84-2)  from the epsg-database

For some reason the geographic coordinate system parameters are being
translated but the projection and it's parameters are not.

By the way, the following does not work because EPSG:4314 and EPSG:4312
are geographic coordinate systems and the (projected) input coordinate
are outside the valid range for latitude and longitude angles.

 > gdalwarp -of GTiff -s_srs EPSG:4312 -t_srs EPSG:4314 teil2_gw_gk31.tif
 > >teil2_gw_dhdnz3.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




_____________________________________________________________________
Der WEB.DE SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
http://smartsurfer.web.de/?mc=100071&distributionid=000000000066



From warmerdam at pobox.com  Thu Jul  5 16:00:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ERROR 6: Failed to initialize PROJ.4 with ...
In-Reply-To: <1419160617@web.de>
References: <1419160617@web.de>
Message-ID: <468D4DC8.3070606@pobox.com>

hellik@web.de wrote:
> hi frank,
> 
> thanks for your hint. i testet the target-wkt with testepsg and there is the
> problem:
> 
> Validate Fails. .... PROJECTION["Gauss_Kruger"] .... PROJ.4 rendering of
> [dhdn_zone3.prj] = +ellps=bessel
> +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs
> 
> so i hope, i'm right, but PROJECTION["Gauss_Kruger"] doesn't seem to be
> really a valitaded projection. so i will try it with the right
> tmerc-projection ....

Helli,

Gauss_Kruger means the same thing as Transverse_Mercator.  Just replace it.
It seems I checked the *wrong* one of your two WKT samples. :-)

If these .prj files are coming from ESRI software you should also consider
prefixing them with ESRI::, eg.

-t_srs ESRI::abc.prj

This tells GDAL/OGR to perform ESRI->OGR transformation of the WKT.  This
will fixup the Gauss_Kruger issue for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From DCarreira at edia.pt  Fri Jul  6 04:56:57 2007
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
Message-ID: <94C0F903807262438796839A98A9BA5001A5FA64@beja001.edia.pt>

Frank,

I have briefly tested GDAL to export ArcSDE rasters. It is fast, but the
exported image was always shifted. I couldn't see any reason and for
lack of time I postponed further tests until de next version arrives
with the plug-in included. For now we are using a 2 step approach, which
is not very time effective: 1-export to tiff using ArcSDE command-line;
2-convert to other formats using GDAL when required. This doubles our
export times.

I have been testing ArcSDE vector access with several GIS tools, and
didn't find any that would work well enough. Most don't read ArcSDE
vectors; a few Java based do: uDIG and Jump. uDIG has a better feature
set but is too slow with ArcSDE. Jump is faster but does not have enough
functionality for our use. QGIS is getting very attractive but I
couldn't figure a way to connect to ArcSDE. Our favorite FOSS4G desktop
today is Kosmo that reads Oracle Spatial. So we are studying the option
of storing our vector database in sdo_geom format, which ArcSDE can be
configured to write instead of writing the usual SDE blobs. But this has
been a slow process, there are always lots of catches we keep finding
when going down this interoperability road.

In a perfect world, we would be able to have a few core GIS techs
working with top gun GIS tools, managing the database and publishing
pre-configured layers to other GIS users that could use less expensive
tools - where FOSS4G tools would fit nicely. In a more distant future,
as FOSS4G evolves, who knows where this scenario may end up...

Regards,
Duarte

-----Mensagem original-----
De: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Enviada: quinta-feira, 5 de Julho de 2007 20:30
Para: Duarte Carreira
Cc: gdal-dev@lists.maptools.org
Assunto: Re: [Gdal-dev] ArcSDE Support in GDAL/OGR

Duarte Carreira wrote:
> Why am I interested in having GDAL/OGR reading ArcSDE?
>  - ArcGIS is slow exporting raster mosaics - we use ArcSDE 
> command-line utilities which are veeery fast;
>  - ArcSDE command-line tools only export to TIF format;
>  - I would prefer having GDAL exporting to a plethora of formats and 
> letting the user choose one;
>  - I would prefer to use GDAL instead of ArcSDE command-line tools 
> because I feel I shouldn't have to install ArcSDE binaries on users'
> PCs;

Duarte,

The good news is that the current read-only ArcSDE driver in GDAL should
be sufficient for these "extract to another format" uses.

>  - OGR read access to ArcSDE is important to me IF there are GIS 
> desktop tools that use it to access the data (I'm thinking QGIS or 
> others...), and IF mapservers use it (mapserver, geoserver, ...);

MapServer, and GeoServer (via GeoTools) have non-OGR mechanisms to
access ArcSDE vector data so OGR support isn't strictly needed.  It
should be possible to view SDE sourced data in QGIS using the OGR
driver.

SDE vector data can also be used (read only) in GRASS, OpenEV, and other
OGR desktop software though currently it is often hard to get the driver
built in.  Hopefully the standard win32 builds with SDE as a plugin will
help this to some degree.

By the way, it's nice to hear a strong success story with ArcSDE raster
from the horses mouth.  While I still think files in the file system can
be somewhat faster than doing the same thing in a database through some
middleware, I can definitely see huge data management benefits to having
the raster data taken care of in the database with the assistance of
middleware.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From warmerdam at pobox.com  Fri Jul  6 10:40:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] ArcSDE Support in GDAL/OGR
In-Reply-To: <94C0F903807262438796839A98A9BA5001A5FA64@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA5001A5FA64@beja001.edia.pt>
Message-ID: <468E5446.9070309@pobox.com>

Duarte Carreira wrote:
> Frank,
> 
> I have briefly tested GDAL to export ArcSDE rasters. It is fast, but the
> exported image was always shifted. I couldn't see any reason and for
> lack of time I postponed further tests until de next version arrives
> with the plug-in included. For now we are using a 2 step approach, which
> is not very time effective: 1-export to tiff using ArcSDE command-line;
> 2-convert to other formats using GDAL when required. This doubles our
> export times.

Duarte,

I believe Howard is going to look into this.  Hopefully you two can work
together to isolate the issue.

> I have been testing ArcSDE vector access with several GIS tools, and
> didn't find any that would work well enough. Most don't read ArcSDE
> vectors; a few Java based do: uDIG and Jump. uDIG has a better feature
> set but is too slow with ArcSDE. Jump is faster but does not have enough
> functionality for our use. QGIS is getting very attractive but I
> couldn't figure a way to connect to ArcSDE. 

If there are windows QGIS binaries built with GDAL/OGR 1.4.x using /MD
and VisualStudio 2003 it should be possible to use the sde plugin
Howard put at:

   http://download.osgeo.org/gdal/win32/gdalwin32sde141.zip

I'm not aware of any pre-built binaries for linux.

 > Our favorite FOSS4G desktop
> today is Kosmo that reads Oracle Spatial. So we are studying the option
> of storing our vector database in sdo_geom format, which ArcSDE can be
> configured to write instead of writing the usual SDE blobs. But this has
> been a slow process, there are always lots of catches we keep finding
> when going down this interoperability road.

Yes, I sympathize.

> In a perfect world, we would be able to have a few core GIS techs
> working with top gun GIS tools, managing the database and publishing
> pre-configured layers to other GIS users that could use less expensive
> tools - where FOSS4G tools would fit nicely. In a more distant future,
> as FOSS4G evolves, who knows where this scenario may end up...

Yes, this is a reasonable path for rolling things out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From frdcn at hotmail.com  Fri Jul  6 23:02:00 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Problems building with mysql under mingw
Message-ID: <BAY110-W12A50927A04940073753CCB2000@phx.gbl>

Hi:
 
I?m trying to build gdal with mysql support, I?m using mysql lib and headers from a dev-cpp package  but the compilation fails with several warnings but no one error, also I tested the library and headers with a small program there are also several warnings but it compiles and executes with no problem.
 
What could be wrong? I'm missing something?, any help will be appreciated.
 
This is part the output from make command.  
 
make -C mysqlmake[3]: Entering directory `/src/gdal/ogr/ogrsf_frmts/mysql'/bin/sh.exe /src/gdal/libtool --mode=compile g++ -Wall  -O2   -I.. -I../.. -I/src/gdal/port -I/src/gdal/gcore -I/src/gdal/alg -I/src/gdal/ogr -I/src/gdal/ogr/ogrsf_frmts -I/local/mysql/include/mysql -DOGR_ENABLED -I/src/gdal/port  -c -o ../o/ogrmysqldriver.o ogrmysqldriver.cpp g++ -Wall -O2 -I.. -I../.. -I/src/gdal/port -I/src/gdal/gcore -I/src/gdal/alg -I/src/gdal/ogr -I/src/gdal/ogr/ogrsf_frmts -I/local/mysql/include/mysql -DOGR_ENABLED -I/src/gdal/port -c ogrmysqldriver.cpp  -DDLL_EXPORT -DPIC -o ../o/.libs/ogrmysqldriver.oIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:153:1: warning: "isnan" redefinedIn file included from C:/msys/local/mysql/include/mysql/config-win.h:27,                 from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:c:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/math.h:365:1: warning:this is the location of the previous definitionIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:197:1: warning: "finite" redefinedC:/msys/local/mysql/include/mysql/config-win.h:154:1: warning: this is the location of the previous definitionIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h: In function `double rint(double)                                             ':C:/msys/local/mysql/include/mysql/config-win.h:211: error: redefinition of `double rint(double)'c:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/math.h:601: error: `double rint(double)' previously defined hereIn file included from C:/msys/local/mysql/include/mysql/my_global.h:259,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:c:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/stdio.h:367:54: macro "popen" passed 2 arguments, but takes just 1In file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:446:1: warning: "my_reinterpret_cast" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:339:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1021:1: warning: "int3store" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:271:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1025:1: warning: "int5store" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:275:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1036:1: warning: "doubleget" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:282:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1041:1: warning: "doublestore" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:284:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1044:1: warning: "float4get" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:286:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1047:1: warning: "floatstore" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:287:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1048:1: warning: "floatget" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:288:1: warning: this is the location of the previous definitionIn file included from C:/msys/src/gdal/port/cpl_port.h:86,                 from ../../ogr_core.h:33,                 from ../../ogr_geometry.h:34,                 from ../../ogr_feature.h:33,                 from ../ogrsf_frmts.h:33,                 from ogr_mysql.h:41,                 from ogrmysqldriver.cpp:30:C:/msys/src/gdal/port/cpl_config.h:51:1: warning: "HAVE_FLOAT_H" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:311:1: warning: this is the location of the previous definitionIn file included from C:/msys/src/gdal/port/cpl_port.h:86,                 from ../../ogr_core.h:33,                 from ../../ogr_geometry.h:34,                 from ../../ogr_feature.h:33,                 from ../ogrsf_frmts.h:33,                 from ogr_mysql.h:41,                 from ogrmysqldriver.cpp:30:C:/msys/src/gdal/port/cpl_config.h:54:1: warning: "HAVE_GETCWD" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:304:1: warning: this is the location of the previous definitionIn file included from C:/msys/src/gdal/port/cpl_port.h:86,                 from ../../ogr_core.h:33,                 from ../../ogr_geometry.h:34,                 from ../../ogr_feature.h:33,                 from ../ogrsf_frmts.h:33,                 from ogr_mysql.h:41,                 from ogrmysqldriver.cpp:30:C:/msys/src/gdal/port/cpl_config.h:88:1: warning: "HAVE_LIMITS_H" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:312:1: warning: this is the location of the previous definitionmake[3]: *** [../o/ogrmysqldriver.o] Error 1make[3]: Leaving directory `/src/gdal/ogr/ogrsf_frmts/mysql'make[2]: *** [mysql-target] Error 2make[2]: Leaving directory `/src/gdal/ogr/ogrsf_frmts'make[1]: *** [sublibs] Error 2make[1]: Leaving directory `/src/gdal/ogr'make: *** [ogr-target] Error 2
 
Best regards
Godofredo Contreras Nava
 
_________________________________________________________________
PC Magazine?s 2007 editors? choice for best web mail?award-winning Windows Live Hotmail.
http://imagine-windowslive.com/hotmail/?locale=en-us&ocid=TXT_TAGHM_migration_HMWL_mini_pcmag_0707
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070707/34bd4c22/attachment.html
From frdcn at hotmail.com  Fri Jul  6 23:23:28 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Problems building with mysql mingw
Message-ID: <BAY110-W270D72020DEFE6BB05347BB2000@phx.gbl>

Hi:
 
I?m trying to build gdal with mysql support, I?m using mysql lib and headers from a dev-cpp package  but the compilation fails with several warnings but no one error, also I tested the library and headers with a small program there are also several warnings but it compiles and executes with no problem.
 
What could be wrong? I'm missing something?, any help will be appreciated.
 
This is part the output from make command.  
 
make -C mysqlmake[3]: Entering directory `/src/gdal/ogr/ogrsf_frmts/mysql'/bin/sh.exe /src/gdal/libtool --mode=compile g++ -Wall  -O2   -I.. -I../.. -I/src/gdal/port -I/src/gdal/gcore -I/src/gdal/alg -I/src/gdal/ogr -I/src/gdal/ogr/ogrsf_frmts -I/local/mysql/include/mysql -DOGR_ENABLED -I/src/gdal/port  -c -o ../o/ogrmysqldriver.o ogrmysqldriver.cpp g++ -Wall -O2 -I.. -I../.. -I/src/gdal/port -I/src/gdal/gcore -I/src/gdal/alg -I/src/gdal/ogr -I/src/gdal/ogr/ogrsf_frmts -I/local/mysql/include/mysql -DOGR_ENABLED -I/src/gdal/port -c ogrmysqldriver.cpp  -DDLL_EXPORT -DPIC -o ../o/.libs/ogrmysqldriver.oIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:153:1: warning: "isnan" redefinedIn file included from C:/msys/local/mysql/include/mysql/config-win.h:27,                 from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:c:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/math.h:365:1: warning:this is the location of the previous definitionIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:197:1: warning: "finite" redefinedC:/msys/local/mysql/include/mysql/config-win.h:154:1: warning: this is the location of the previous definitionIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h: In function `double rint(double)                                             ':C:/msys/local/mysql/include/mysql/config-win.h:211: error: redefinition of `double rint(double)'c:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/math.h:601: error: `double rint(double)' previously defined hereIn file included from C:/msys/local/mysql/include/mysql/my_global.h:259,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:c:/mingw/bin/../lib/gcc/mingw32/3.4.2/../../../../include/stdio.h:367:54: macro "popen" passed 2 arguments, but takes just 1In file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:446:1: warning: "my_reinterpret_cast" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:339:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1021:1: warning: "int3store" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:271:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1025:1: warning: "int5store" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:275:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1036:1: warning: "doubleget" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:282:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1041:1: warning: "doublestore" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:284:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1044:1: warning: "float4get" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:286:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1047:1: warning: "floatstore" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:287:1: warning: this is the location of the previous definitionIn file included from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/my_global.h:1048:1: warning: "floatget" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:288:1: warning: this is the location of the previous definitionIn file included from C:/msys/src/gdal/port/cpl_port.h:86,                 from ../../ogr_core.h:33,                 from ../../ogr_geometry.h:34,                 from ../../ogr_feature.h:33,                 from ../ogrsf_frmts.h:33,                 from ogr_mysql.h:41,                 from ogrmysqldriver.cpp:30:C:/msys/src/gdal/port/cpl_config.h:51:1: warning: "HAVE_FLOAT_H" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:311:1: warning: this is the location of the previous definitionIn file included from C:/msys/src/gdal/port/cpl_port.h:86,                 from ../../ogr_core.h:33,                 from ../../ogr_geometry.h:34,                 from ../../ogr_feature.h:33,                 from ../ogrsf_frmts.h:33,                 from ogr_mysql.h:41,                 from ogrmysqldriver.cpp:30:C:/msys/src/gdal/port/cpl_config.h:54:1: warning: "HAVE_GETCWD" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:304:1: warning: this is the location of the previous definitionIn file included from C:/msys/src/gdal/port/cpl_port.h:86,                 from ../../ogr_core.h:33,                 from ../../ogr_geometry.h:34,                 from ../../ogr_feature.h:33,                 from ../ogrsf_frmts.h:33,                 from ogr_mysql.h:41,                 from ogrmysqldriver.cpp:30:C:/msys/src/gdal/port/cpl_config.h:88:1: warning: "HAVE_LIMITS_H" redefinedIn file included from C:/msys/local/mysql/include/mysql/my_global.h:65,                 from ogr_mysql.h:34,                 from ogrmysqldriver.cpp:30:C:/msys/local/mysql/include/mysql/config-win.h:312:1: warning: this is the location of the previous definitionmake[3]: *** [../o/ogrmysqldriver.o] Error 1make[3]: Leaving directory `/src/gdal/ogr/ogrsf_frmts/mysql'make[2]: *** [mysql-target] Error 2make[2]: Leaving directory `/src/gdal/ogr/ogrsf_frmts'make[1]: *** [sublibs] Error 2make[1]: Leaving directory `/src/gdal/ogr'make: *** [ogr-target] Error 2
 
Godofredo Contreras Nava
 
_________________________________________________________________
Local listings, incredible imagery, and driving directions - all in one place! Find it!
http://maps.live.com/?wip=69&FORM=MGAC01
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070707/82acf456/attachment.html
From tutey at o2.pl  Sat Jul  7 10:24:41 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] FGS with GDAL 1.4.2
In-Reply-To: <468BDC79.9050300@pobox.com>
References: <468BDC79.9050300@pobox.com>
Message-ID: <468FA229.2050508@o2.pl>

Frank Warmerdam wrote:
> Folks,
> 
> I've been experimenting with the FGS (FOSS GIS Suite) packaging system
> for linux with some success.  I've created a package that includes
> GDAL 1.4.2 and a bunch of dependencies, including python (NG bindings)
> support.
> 
> An all-in-one installer is available at:
> 
> http://download.osgeo.org/gdal/fgs-modules/fgs-gdal-python-1.4.2-linux-i386.bin
> 
> 
> You should be able to download and install this on most x86 style linux
> systems.  To install run the .bin file as an argument to bash.
> 
> eg.
> 
> sh fgs-gdal-python-1.4.2-linux-i386.bin
> 
> This produces a self-contained install seperate from the rest of your
> system.
> 
> Additional details on FGS are available at:
> 
>   http://www.maptools.org/fgs/

Frank,

Cool. What are the components? Will there be a version with Chameleon
like it was with 0.2?

Maciek

From seth at pricepages.org  Sat Jul  7 16:25:07 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Building with profile directed optimization
Message-ID: <29A55B41-31E5-4F5A-8C88-8ECB5964106F@pricepages.org>

I'm trying to build GDAL with GCC 4's profile directed optimization  
and I'm hitting some problems. It would be awesome if this sort of  
optimization could be incorperated into the build process. :) I'll  
outline the steps I'm going through and hopefully someone can point  
out what I'm doing wrong.

I start by adding '-fprofile-generate' to all flags. I'm not using  
any optimization here because it mangles the output code a bit and is  
not recommended.

export CXXFLAGS="-fprofile-generate"
export CPPFLAGS="-fprofile-generate"
export CFLAGS="-fprofile-generate"
export LDFLAGS="-fprofile-generate -lgcov"
./configure && make

Here is where the first problem occurs, this command needs to be  
altered to add the "-lgcov", then everything goes smooth.
/bin/sh /usr/local/gdal/gdal-1.4.2/libtool --mode=link  g++ -O1 - 
fprofile-generate -ljpeg -ltiff -lpng -lz  -ldl -lgcov   -L/usr/lib - 
lcurl -lssl -lcrypto -lz   -o libgdal.la /usr/local/gdal/gdal-1.4.2/ 
frmts/o/*.lo /usr/local/gdal/gdal-1.4.2/gcore/*.lo /usr/local/gdal/ 
gdal-1.4.2/port/*.lo /usr/local/gdal/gdal-1.4.2/alg/*.lo /usr/local/ 
gdal/gdal-1.4.2/ogr/ogrsf_frmts/o/*.lo ./ogr/ogrgeometryfactory.lo ./ 
ogr/ogrpoint.lo ./ogr/ogrcurve.lo ./ogr/ogrlinestring.lo ./ogr/ 
ogrlinearring.lo ./ogr/ogrpolygon.lo ./ogr/ogrutils.lo ./ogr/ 
ogrgeometry.lo ./ogr/ogrgeometrycollection.lo ./ogr/ 
ogrmultipolygon.lo ./ogr/ogrsurface.lo ./ogr/ogrmultipoint.lo ./ogr/ 
ogrmultilinestring.lo ./ogr/ogr_api.lo ./ogr/ogrfeature.lo ./ogr/ 
ogrfeaturedefn.lo ./ogr/ogrfeaturequery.lo ./ogr/ogrfeaturestyle.lo ./ 
ogr/ogrfielddefn.lo ./ogr/ogrspatialreference.lo ./ogr/ 
ogr_srsnode.lo ./ogr/ogr_srs_proj4.lo ./ogr/ogr_fromepsg.lo ./ogr/ 
ogrct.lo ./ogr/ogr_opt.lo ./ogr/ogr_srs_esri.lo ./ogr/ 
ogr_srs_pci.lo ./ogr/ogr_srs_usgs.lo ./ogr/ogr_srs_dict.lo ./ogr/ 
ogr_srs_panorama.lo ./ogr/swq.lo ./ogr/ogr_srs_validate.lo ./ogr/ 
ogr_srs_xml.lo ./ogr/ograssemblepolygon.lo ./ogr/ogr2gmlgeometry.lo ./ 
ogr/gml2ogrgeometry.lo \
     -rpath /usr/local/lib \
     -no-undefined \
     -version-info 12:2:11

Then I 'sudo make install' the libraries and run './exercise.sh' to  
hit all the code I use often. After that the profiling files have  
been produced. I can't use 'make clean' because it will erase the  
profiling files, so I use the following commands:
sudo find . -name \*.o -exec rm {} ";"
sudo find . -name \*.lo -exec rm {} ";"
sudo find . -name \*.a -exec rm {} ";"
sudo find . -name \*.la -exec rm {} ";"
sudo find . -name \*.lai -exec rm {} ";"
sudo find . -name \*.dylib -exec rm {} ";"

Now is the problem I'm stuck on. I can compile with '-fprofile-use',  
but I can't add any optimization (even '-O1') because I immediately  
get this error:
/bin/sh /usr/local/gdal/gdal-1.4.2/libtool --mode=compile g++ -Wall  - 
O1 -fprofile-use   -DOGR_ENABLED -O1 -fprofile-use -I/usr/local/gdal/ 
gdal-1.4.2/port  -c -o cpl_conv.o cpl_conv.cpp
  g++ -Wall -O1 -fprofile-use -DOGR_ENABLED -O1 -fprofile-use -I/usr/ 
local/gdal/gdal-1.4.2/port -c cpl_conv.cpp  -fno-common -DPIC - 
o .libs/cpl_conv.o
cpl_conv.cpp: In function 'void* CPLRealloc(void*, size_t)':
cpl_conv.cpp:194: error: corrupted profile info: number of executions  
for edge 6-7 thought to be -93808
cpl_conv.cpp:194: error: corrupted profile info: number of executions  
for edge 6--2 thought to be 320155
make[1]: *** [cpl_conv.o] Error 1
make: *** [port-target] Error 2

Does anyone have an idea what is causing this? If I add '-O1' to the  
first compile, I still get this error, so I don't think it's a  
mismatch. Ideas on how to proceed?
~Seth

From hobu.inc at gmail.com  Sun Jul  8 17:15:24 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] 1.4 Windows Python build
Message-ID: <B98A4C27-1078-4255-A4A5-026FAE271137@gmail.com>

All,

I have placed a windows python build (using the old gen bindings) at  
<http://download.osgeo.org/gdal/win32/>.  Some special things about  
this build include:
- It takes care of setting GDAL_DATA and GDAL_DRIVER_PATH when  
gdal.py is imported (I think all of the modules end up importing  
gdal.py).
- The scripts, like gdal_merge.py are placed in the Python install's  
scripts directory (typically C:\python24\scripts) instead of in pymod  
or lib\site-packages

To use this build, you must have the GDAL binary on your path  
somewhere.  One option might be to copy the contents of .\bin into c: 
\python24\dlls so that you don't have to have things system-wide.   
The module includes its own copy of GDAL_DATA and places it in C: 
\python24\gdal\data, however.

Again, this is for Python 2.4 only.  You will likely have to have  
Numeric installed for Python 2.4 for it to be fully functional.   
Please let me know of any issues via Trac.

Howard


From warmerdam at pobox.com  Mon Jul  9 10:33:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] FGS with GDAL 1.4.2
In-Reply-To: <468FA229.2050508@o2.pl>
References: <468BDC79.9050300@pobox.com> <468FA229.2050508@o2.pl>
Message-ID: <4692474E.8000106@pobox.com>

Maciej Sieczka wrote:
> Frank,
> 
> Cool. What are the components? Will there be a version with Chameleon
> like it was with 0.2?

Maciej,

You can find the list of modules in a self extracting .bin in the
associated .versions file.

http://download.osgeo.org/gdal/fgs-modules/fgs-gdal-python-1.4.2-linux-i386.versions

The same download directory also includes a fuller installer that includes
php and mapserver.  (the -all- one). I haven't generated the packages for
Chameleon and company, though I would assume it isn't too hard to do so.

I'm hopefully that an official FGS 0.3 would be issued with my GDAL and
company updates in the next few months.  If you would like to try this all
with Chameleon right away, let me know and I'll try to build all those
packages as well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From richard.matsunaga at waypointinfo.com  Mon Jul  9 14:25:30 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] memory leaks in MITAB driver
Message-ID: <001701c7c256$87ee5cf0$0202fea9@Richard>

I've fixed a few memory leaks in the MITAB driver that have been plaguing me
lately. Hopefully someone more qualified than I can validate these changes
and submit them into the code base.
 
Regards,
Richard
 
 
Index: /ogr/ogrsf_frmts/mitab/mitab_feature.cpp
===================================================================
--- /ogr/ogrsf_frmts/mitab/mitab_feature.cpp (revision 11729)
+++ /ogr/ogrsf_frmts/mitab/mitab_feature.cpp (working copy)
@@ -7813,6 +7813,12 @@
         }
     }
 
+ if (poStyleMgr)
+  delete poStyleMgr;
+
+ if (poStylePart)
+  delete poStylePart;
+
     return;
 }
 
@@ -7997,7 +8003,13 @@
         SetBrushFGColor((GInt32)nBrushColor);
     }
 
-     return;
+ if (poStyleMgr)
+  delete poStyleMgr;
+
+ if (poStylePart)
+  delete poStylePart;
+
+    return;
     
 }  
 
@@ -8281,6 +8293,14 @@
         nSymbolColor = strtol(pszSymbolColor, NULL, 16);
         SetSymbolColor((GInt32)nSymbolColor);
     }
+
+ if (poStyleMgr)
+ {
+  delete poStyleMgr;
+ }
+
+ if (poStylePart)
+  delete poStylePart;
     
     return;
     
     
Index: /ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp
===================================================================
--- /ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp (revision 11728)
+++ /ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp (working copy)
@@ -281,6 +281,7 @@
     TABPoint *poTABPointFeature = NULL;
     TABRegion *poTABRegionFeature = NULL;
     TABPolyline *poTABPolylineFeature = NULL;
+ const char *styleString = NULL;
 
     /*-----------------------------------------------------------------
      * MITAB won't accept new features unless they are in a type derived
@@ -300,11 +301,11 @@
        *------------------------------------------------------------*/
       case wkbPoint:
         poTABFeature = new TABPoint(poFeature->GetDefnRef());
-        if(poFeature->GetStyleString())
+  styleString = poFeature->GetStyleString();
+        if(styleString)
         {
             poTABPointFeature = (TABPoint*)poTABFeature;
-            poTABPointFeature->SetSymbolFromStyleString(
-                poFeature->GetStyleString());
+            poTABPointFeature->SetSymbolFromStyleString(styleString);
         }
         break;
       /*-------------------------------------------------------------
@@ -313,14 +314,13 @@
       case wkbPolygon:
       case wkbMultiPolygon:
         poTABFeature = new TABRegion(poFeature->GetDefnRef());
-        if(poFeature->GetStyleString())
+  styleString = poFeature->GetStyleString();
+        if(styleString)
         {
             poTABRegionFeature = (TABRegion*)poTABFeature;
-            poTABRegionFeature->SetPenFromStyleString(
-                poFeature->GetStyleString());
+            poTABRegionFeature->SetPenFromStyleString(styleString);
 
-            poTABRegionFeature->SetBrushFromStyleString(
-                poFeature->GetStyleString());
+            poTABRegionFeature->SetBrushFromStyleString(styleString);
         }
         break;
       /*-------------------------------------------------------------
@@ -329,11 +329,11 @@
       case wkbLineString:
       case wkbMultiLineString:
         poTABFeature = new TABPolyline(poFeature->GetDefnRef());
-        if(poFeature->GetStyleString())
+  styleString = poFeature->GetStyleString();
+        if(styleString)
         {
             poTABPolylineFeature = (TABPolyline*)poTABFeature;
-            poTABPolylineFeature->SetPenFromStyleString(
-                poFeature->GetStyleString());
+            poTABPolylineFeature->SetPenFromStyleString(styleString);
         }
         break;
       /*-------------------------------------------------------------
@@ -381,6 +381,8 @@
         eErr = OGRERR_FAILURE;
 
     delete poTABFeature;
+ if (styleString != NULL)
+  CPLFree((void *)styleString);
     
     return eErr;
 }

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070709/d256ab1d/attachment.html
From dmorissette at mapgears.com  Mon Jul  9 14:55:04 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] memory leaks in MITAB driver
In-Reply-To: <001701c7c256$87ee5cf0$0202fea9@Richard>
References: <001701c7c256$87ee5cf0$0202fea9@Richard>
Message-ID: <46928488.6090106@mapgears.com>

Hi Richard,

I'll have a look at this when I have a minute, but to make sure it 
doesn't get lost, could you please file a ticket and attach the patch?

Thanks

Daniel


Richard Matsunaga wrote:
> I've fixed a few memory leaks in the MITAB driver that have been 
> plaguing me lately. Hopefully someone more qualified than I can validate 
> these changes and submit them into the code base.
>  
> Regards,
> Richard
>  
>  
> Index: /ogr/ogrsf_frmts/mitab/mitab_feature.cpp
> ===================================================================
> --- /ogr/ogrsf_frmts/mitab/mitab_feature.cpp (revision 11729)
> +++ /ogr/ogrsf_frmts/mitab/mitab_feature.cpp (working copy)
> @@ -7813,6 +7813,12 @@
>          }
>      }
>  
> + if (poStyleMgr)
> +  delete poStyleMgr;
> +
> + if (poStylePart)
> +  delete poStylePart;
> +
>      return;
>  }
>  
> @@ -7997,7 +8003,13 @@
>          SetBrushFGColor((GInt32)nBrushColor);
>      }
>  
> -     return;
> + if (poStyleMgr)
> +  delete poStyleMgr;
> +
> + if (poStylePart)
> +  delete poStylePart;
> +
> +    return;
>     
>  } 
>  
> @@ -8281,6 +8293,14 @@
>          nSymbolColor = strtol(pszSymbolColor, NULL, 16);
>          SetSymbolColor((GInt32)nSymbolColor);
>      }
> +
> + if (poStyleMgr)
> + {
> +  delete poStyleMgr;
> + }
> +
> + if (poStylePart)
> +  delete poStylePart;
>     
>      return;
>     
>     
> Index: /ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp
> ===================================================================
> --- /ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp (revision 11728)
> +++ /ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp (working copy)
> @@ -281,6 +281,7 @@
>      TABPoint *poTABPointFeature = NULL;
>      TABRegion *poTABRegionFeature = NULL;
>      TABPolyline *poTABPolylineFeature = NULL;
> + const char *styleString = NULL;
>  
>      /*-----------------------------------------------------------------
>       * MITAB won't accept new features unless they are in a type derived
> @@ -300,11 +301,11 @@
>         *------------------------------------------------------------*/
>        case wkbPoint:
>          poTABFeature = new TABPoint(poFeature->GetDefnRef());
> -        if(poFeature->GetStyleString())
> +  styleString = poFeature->GetStyleString();
> +        if(styleString)
>          {
>              poTABPointFeature = (TABPoint*)poTABFeature;
> -            poTABPointFeature->SetSymbolFromStyleString(
> -                poFeature->GetStyleString());
> +            poTABPointFeature->SetSymbolFromStyleString(styleString);
>          }
>          break;
>        /*-------------------------------------------------------------
> @@ -313,14 +314,13 @@
>        case wkbPolygon:
>        case wkbMultiPolygon:
>          poTABFeature = new TABRegion(poFeature->GetDefnRef());
> -        if(poFeature->GetStyleString())
> +  styleString = poFeature->GetStyleString();
> +        if(styleString)
>          {
>              poTABRegionFeature = (TABRegion*)poTABFeature;
> -            poTABRegionFeature->SetPenFromStyleString(
> -                poFeature->GetStyleString());
> +            poTABRegionFeature->SetPenFromStyleString(styleString);
>  
> -            poTABRegionFeature->SetBrushFromStyleString(
> -                poFeature->GetStyleString());
> +            poTABRegionFeature->SetBrushFromStyleString(styleString);
>          }
>          break;
>        /*-------------------------------------------------------------
> @@ -329,11 +329,11 @@
>        case wkbLineString:
>        case wkbMultiLineString:
>          poTABFeature = new TABPolyline(poFeature->GetDefnRef());
> -        if(poFeature->GetStyleString())
> +  styleString = poFeature->GetStyleString();
> +        if(styleString)
>          {
>              poTABPolylineFeature = (TABPolyline*)poTABFeature;
> -            poTABPolylineFeature->SetPenFromStyleString(
> -                poFeature->GetStyleString());
> +            poTABPolylineFeature->SetPenFromStyleString(styleString);
>          }
>          break;
>        /*-------------------------------------------------------------
> @@ -381,6 +381,8 @@
>          eErr = OGRERR_FAILURE;
>  
>      delete poTABFeature;
> + if (styleString != NULL)
> +  CPLFree((void *)styleString);
>     
>      return eErr;
>  }
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From mateusz at loskot.net  Mon Jul  9 15:28:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] memory leaks in MITAB driver
In-Reply-To: <001701c7c256$87ee5cf0$0202fea9@Richard>
References: <001701c7c256$87ee5cf0$0202fea9@Richard>
Message-ID: <51059.84.10.81.30.1184009280.squirrel@loskot.net>

Richard Matsunaga wrote:
> I've fixed a few memory leaks in the MITAB driver that have been plaguing
> me lately. Hopefully someone more qualified than I can validate
> these changes and submit them into the code base.
>
> Index: /ogr/ogrsf_frmts/mitab/mitab_feature.cpp
> ===================================================================
> --- /ogr/ogrsf_frmts/mitab/mitab_feature.cpp (revision 11729)
> +++ /ogr/ogrsf_frmts/mitab/mitab_feature.cpp (working copy)
> @@ -7813,6 +7813,12 @@
>          }
>      }
>
> + if (poStyleMgr)
> +  delete poStyleMgr;
> +
> + if (poStylePart)
> +  delete poStylePart;
> +


Just a note, I'd suggest to remove if-clause.
There is no need to test for null pointer before calling delete operator.
So, I'd suggest to update the patch to read as:

delete poStyleMgr;
delete poStylePart;

and

CPLFree(styleString);


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Mon Jul  9 15:58:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] SoC: GDAL2Tiles: georeferenced rasters on the web
In-Reply-To: <6e41d95b0707031504u1ca4dc16q9e2e714bfeb1aace@mail.gmail.com>
References: <6e41d95b0707031504u1ca4dc16q9e2e714bfeb1aace@mail.gmail.com>
Message-ID: <46929360.8020801@pobox.com>


Petr,

I've read your three related messages over, and also thought a bit about
our discussion along with Adam Nowak in IRC.

My hope for this project was that we could have a read-write GDAL driver
that would support at least one "web tiled format" and ideally more than
one.

After discussions in IRC it seems that the naming conventions for TMS,
GQT and WorldWind are all distinct but that associated Google Earth kml
files could be generated for any of them.

I don't see too much benefit in targetting GeoQuadTree since there is a
limited amount of client interest in this.  However, with the agreement
to dual license GQT, I would like to see support for it incorporated into
GDAL.  This doesn't have to be part of your project, though I can see
that aspects of the GQT GDAL driver might be educational for you.

This leaves us with the decision of whether to use the WorldWind or
TMS tile naming convention as our basic tiled organization.   I'm inclined
to chose TMS since it gives us convenient support within clients like
OpenLayers, Worldkit and Cadcorp SIS.

If so, I would see your primary objective for the summer as writing
a GDAL driver that supports writing a tiled raster format that is
TMS compatible and Google Earth compatible.

I would also like the driver to be able to read these datasets (if
produced by GDAL) even if you need to write some sort of extra metadata
file at the root to make this easier (and less lossy of metadata) as
well as supporting "in place update".  That is to be able to open the
dataset in update mode and replace parts of the imagery on demand.
This also implies implementing the GDALDriver pfnCreate function
instead of (or at least in addition to) the pfnCreateCopy function.

I'd suggest you not try to address reproject in your project.  Assume
that gdal_merge, gdalwarp, or whatever will be used to handle
mosaicing or reprojection.  Although I would note that implementing
read/write/update support in the driver will make it possible to
mosaic additional images into an existing mosaic using something like
gdalwarp.

Additional optional objectives for the summer might include:
  o Producing whatever is needed to use the dataset with google maps.
  o Tweaking options for the driver such as supporting a wide variety
    of file formats for the tiles, tile sizes, compression options,
    extra metadata.

Does this seem reasonable?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From viritha30 at gmail.com  Tue Jul 10 12:11:49 2007
From: viritha30 at gmail.com (viritha 30)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Query regarding coordinate system transformation using
	GDAL
Message-ID: <e27f53910707100911p76add9c9n56a33f94c16b1023@mail.gmail.com>

Hi Friends,

                  I am working on GDAL library. I have some doubts in using
it. I want to convert the geographic coordinate system into any other
projection coordinate system. That is. i want the converted values of WGS84
latitude and longitude values in any other projection coordinate system like
UTM or Mercator2SP.......etc. And also i want to retrieve the zone number
from this . If anyone know abou this convertion using GDAL library or
OGRSpatial Reference class, please mail me. its very urgent for me.

I am giving the code  i am working. i dont know how to go forward . plz help
me. i am doing it in VC++ on Windows.

{
 OGRSpatialReference osRS,oosRS ;
 char *pszWKT=NULL;
 char *pszaWKT=NULL;
 CString str;

 osRS.SetWellKnownGeogCS("WGS84");
 osRS.exportToWkt(&pszWKT);
 str.Format("%s",pszWKT);
 MessageBox(str);


  oosRS.SetProjCS("Mercator_2SP");
 oosRS.SetWellKnownGeogCS("EPSG:9805");
 oosRS.SetHOM(0, 75, 90.0, 90.0,1.0, 500000, 0);
 oosRS.exportToWkt(&pszaWKT);
 str.Format("%s",pszaWKT);
 MessageBox(str);
void *reProjTransform=GDALCreateReprojectionTransformer(pszWKT,pszaWKT);
 /////////////////
I dont know wat to do after this. how to get the converted latitude and
longitude values.
}




I even tried with the            OGRCreateCoordinateTransformation()
function. by passing the two coordinate systems in WKT format. still i was
strucked.

plz help me.
-- 
Regards,
Viritha.B
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070710/e0094159/attachment.html
From david.m.riepl at boeing.com  Tue Jul 10 12:13:34 2007
From: david.m.riepl at boeing.com (Riepl, David M)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Gdalwarp problems
Message-ID: <9A61BAF9B9E2D649B4149409D70859B502845727@XCH-MW-2V2.mw.nos.boeing.com>

All,

I do a lot of 2-D and 3-D maps using GEOTIFF satellite imagery and DTED
1 elevation.  I use GDALWARP to reproject the imagery and the DTED
(turned into GEOTIFFs).  From there I use OSGDEM (currently with OSG1.2)
to create .ive output.  

I've noticed a problem during the gdalwarp step, I set up a .cmd script
to run gdalwarp on a folder of 28 images.  Normally I just double-click
the .cmd script, walk away and assume all is good.  Recently, I've been
running it from a DOS prompt and so now I am reading the messages.
Normally as the imagery processes you see this:
0...10...20...30...40...50...60...70...80...90...100  -Done.
But 9 of my 28 images never reach "Done".  The message just reads:
0...10...20...30...40...50...60...70...80...90...
They just don't want to reach "Done" no matter how many times I run the
script on them.   I've noticed the same problem with some of my
elevation files.   Since I used to just double-click the script and walk
away, maybe I've always had this problem and never known it.
In a quick test, the images still open in my viewer.  Are they any good?
Is something missing or incomplete?  Does anyone have an explanation or
advice to fix this?

Note:  I am using the gdalwarp from FW TOOLS 1.3.4 (Win 32 bit) on a
WinXP desktop with 2GB RAM.

Thank you,
David Riepl
Visualization IG\DB Team
> Training Systems & Services
david.m.riepl@boeing.com
314.777.4741



From warmerdam at pobox.com  Tue Jul 10 13:01:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] Query regarding coordinate system transformation using
	GDAL
In-Reply-To: <e27f53910707100911p76add9c9n56a33f94c16b1023@mail.gmail.com>
References: <e27f53910707100911p76add9c9n56a33f94c16b1023@mail.gmail.com>
Message-ID: <4693BB64.8040008@pobox.com>

viritha 30 wrote:
> Hi Friends,
>  
>                   I am working on GDAL library. I have some doubts in 
> using it. I want to convert the geographic coordinate system into any 
> other projection coordinate system. That is. i want the converted values 
> of WGS84 latitude and longitude values in any other projection 
> coordinate system like UTM or Mercator2SP.......etc. And also i want to 
> retrieve the zone number from this . If anyone know abou this convertion 
> using GDAL library or OGRSpatial Reference class, please mail me. its 
> very urgent for me.
>  
> I am giving the code  i am working. i dont know how to go forward . plz 
> help me. i am doing it in VC++ on Windows.
> 
> {
>  OGRSpatialReference osRS,oosRS ;
>  char *pszWKT=NULL;
>  char *pszaWKT=NULL;
>  CString str;
>  
>  osRS.SetWellKnownGeogCS("WGS84");
>  osRS.exportToWkt(&pszWKT);
>  str.Format("%s",pszWKT);
>  MessageBox(str);
> 
>     
>   oosRS.SetProjCS("Mercator_2SP");
>  oosRS.SetWellKnownGeogCS("EPSG:9805");
>  oosRS.SetHOM(0, 75, 90.0, 90.0,1.0, 500000, 0);
>  oosRS.exportToWkt(&pszaWKT);
>  str.Format("%s",pszaWKT);
>  MessageBox(str);

Viritha,

You are doing well up to this point.  Are you wanting to create a
transformer object that you can use to transform individual points
you pass in programmatically, or to warp a raster?  The
GDALCreateReprojectionTransformer() is really for use warping rasters.
If you just want transform individual points you pass in you should use
the OGRCoordinateTransformation class instead.  It's use is described
near the end of the OGR Projections Tutorial at:

   http://www.gdal.org/ogr/osr_tutorial.html

> I even tried with the            OGRCreateCoordinateTransformation()   
> function. by passing the two coordinate systems in WKT format. still i 
> was strucked.

Ah, I see you were already aware of this.

Perhaps you didn't see the specific example in the tutorial under the
title "Coordinate Transformation"?  Note that you use the OGRSpatialReference
objects, not the raw WKT to create this transformer.  For brevity the
example given looks like this:

         OGRSpatialReference oSourceSRS, oTargetSRS;
         OGRCoordinateTransformation *poCT;
         double                  x, y;

         oSourceSRS.importFromEPSG( atoi(papszArgv[i+1]) );
         oTargetSRS.importFromEPSG( atoi(papszArgv[i+2]) );

         poCT = OGRCreateCoordinateTransformation( &oSourceSRS,
                                                   &oTargetSRS );
         x = atof( papszArgv[i+3] );
         y = atof( papszArgv[i+4] );

         if( poCT == NULL || !poCT->Transform( 1, &x, &y ) )
             printf( "Transformation failed.\n" );
         else
             printf( "(%f,%f) -> (%f,%f)\n",
                     atof( papszArgv[i+3] ),
                     atof( papszArgv[i+4] ),
                     x, y );

You should be able to use your osRS and oosRS objects in
place of oSourceSRS and oTargetSRS.

I'm not aware of a method to compute the idea UTM zone for a given
longitude but a UTM zone is generally considered to extend 3 degrees
out from either side of it's central meridian and the central meridian
can be computed as "nZone * 6 - 183".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From John.C.Cartwright at noaa.gov  Tue Jul 10 15:10:04 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] compile problems re: GIF on RHEL 5/64-bit platform
Message-ID: <4693D98C.5040206@noaa.gov>

Hello All,

I'm trying to compile 1.4.2 on a RHEL 5 platform.  I configured using 
"--with-gif=internal", but during the compilation process I'm stopped by:
...
gcc -c -I/extra/contrib/src/gdal-1.4.2/port 
-I/extra/contrib/src/gdal-1.4.2/gcore 
-I/extra/contrib/src/gdal-1.4.2/alg -I/extra/contrib/src/gdal-1.4.2/ogr 
-I/extra/contrib/src/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED 
-Df2cFortran -D_POSIX_SOURCE -I/extra/contrib/src/gdal-1.4.2/port 
-I/extra/contrib/netcdf-3.6.2 -I/extra/contrib/netcdf-3.6.2/include 
-Ilibungif -Wall -O2 libungif/egif_lib.c  -fPIC -DPIC 
-o../o/.libs/egif_lib.o
libungif/egif_lib.c: In function 'EGifOpenFileName':
libungif/egif_lib.c:79: error: 'S_IREAD' undeclared (first use in this 
function)
libungif/egif_lib.c:79: error: (Each undeclared identifier is reported 
only once
libungif/egif_lib.c:79: error: for each function it appears in.)
libungif/egif_lib.c:79: error: 'S_IWRITE' undeclared (first use in this 
function)
libungif/egif_lib.c: In function 'EGifPutScreenDesc':
libungif/egif_lib.c:217: warning: pointer targets in passing argument 2 
of '(GifFile->Private)->Write' differ in signedness
libungif/egif_lib.c: In function 'EGifPutWord':
libungif/egif_lib.c:551: warning: pointer targets in passing argument 2 
of '(GifFile->Private)->Write' differ in signedness
libungif/egif_lib.c: In function 'EGifSpew':
libungif/egif_lib.c:815: warning: pointer targets in passing argument 2 
of 'EGifPutLine' differ in signedness
make[2]: *** [../o/egif_lib.o] Error 1
make[2]: Leaving directory `/extra/contrib/src/gdal-1.4.2/frmts/gif'
make[1]: *** [gif-install-obj] Error 2
make[1]: Leaving directory `/extra/contrib/src/gdal-1.4.2/frmts'
make: *** [frmts-target] Error 2


Can anyone suggest what I might be doing wrong here?

Thanks!

-- john


From warmerdam at pobox.com  Tue Jul 10 16:31:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] compile problems re: GIF on RHEL 5/64-bit platform
In-Reply-To: <4693D98C.5040206@noaa.gov>
References: <4693D98C.5040206@noaa.gov>
Message-ID: <4693EC89.8010305@pobox.com>

John Cartwright wrote:
> Hello All,
> 
> I'm trying to compile 1.4.2 on a RHEL 5 platform.  I configured using 
> "--with-gif=internal", but during the compilation process I'm stopped by:
> ...
> gcc -c -I/extra/contrib/src/gdal-1.4.2/port 
> -I/extra/contrib/src/gdal-1.4.2/gcore 
> -I/extra/contrib/src/gdal-1.4.2/alg -I/extra/contrib/src/gdal-1.4.2/ogr 
> -I/extra/contrib/src/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED 
> -Df2cFortran -D_POSIX_SOURCE -I/extra/contrib/src/gdal-1.4.2/port 
> -I/extra/contrib/netcdf-3.6.2 -I/extra/contrib/netcdf-3.6.2/include 
> -Ilibungif -Wall -O2 libungif/egif_lib.c  -fPIC -DPIC 
> -o../o/.libs/egif_lib.o
> libungif/egif_lib.c: In function 'EGifOpenFileName':
> libungif/egif_lib.c:79: error: 'S_IREAD' undeclared (first use in this 
> function)
> libungif/egif_lib.c:79: error: (Each undeclared identifier is reported 
> only once
> libungif/egif_lib.c:79: error: for each function it appears in.)
> libungif/egif_lib.c:79: error: 'S_IWRITE' undeclared (first use in this 
> function)

John,

Could you try substituting:

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/gif/libungif/egif_lib.c?format=raw

for gdal/frmts/gif/libungif/egif_lib.c and see if that builds?  If so,
please file a bug against GDAL and I'll make sure this fix makes it into
the 1.4 branch too.  I'm guessing that RHEL 5 is removing some deprecated
macros, like S_IREAD and S_IWRITE as part of a cleanup-and-modernize
effort.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From richard.matsunaga at waypointinfo.com  Tue Jul 10 23:58:38 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
Message-ID: <002601c7c36f$c37a5930$cd012b0a@Richard>

Tamas,
 
Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to track down
a resource issue and wondering if this is a potential problem?
 
Thanks,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070710/485f36ee/attachment.html
From richard.matsunaga at waypointinfo.com  Wed Jul 11 00:43:12 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <002601c7c36f$c37a5930$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
Message-ID: <000001c7c375$fd5a6c20$cd012b0a@Richard>

On a related note, I see that the Dispose() method for DataSource ultimately
calls the OGRReleaseDataSource() method. Shouldn't this be calling
OGR_DS_Destroy() instead? The latter method is the one I used in the
hand-rolled C# wrapper class.
 
Richard


  _____  

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Richard Matsunaga
Sent: July 10, 2007 11:59 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?


Tamas,
 
Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to track down
a resource issue and wondering if this is a potential problem?
 
Thanks,
Richard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070711/ba3362df/attachment.html
From ari.jolma at tkk.fi  Wed Jul 11 05:19:48 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <000001c7c375$fd5a6c20$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
	<000001c7c375$fd5a6c20$cd012b0a@Richard>
Message-ID: <4694A0B4.5070406@tkk.fi>

Richard Matsunaga kirjoitti:
> On a related note, I see that the Dispose() method for DataSource 
> ultimately calls the OGRReleaseDataSource() method. Shouldn't this be 
> calling OGR_DS_Destroy() instead? The latter method is the one I used 
> in the hand-rolled C# wrapper class.

I've got no deep knowledge on this, but looking at ReleaseDataSource() 
in ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp it seems the right 
thing to call. It closes and destroys the datasource object.

Ari

>  
> Richard
>
>     ------------------------------------------------------------------------
>     *From:* gdal-dev-bounces@lists.maptools.org
>     [mailto:gdal-dev-bounces@lists.maptools.org] *On Behalf Of
>     *Richard Matsunaga
>     *Sent:* July 10, 2007 11:59 PM
>     *To:* gdal-dev@lists.maptools.org
>     *Subject:* [Gdal-dev] C# Dataset not calling GDALClose()?
>
>     Tamas,
>      
>     Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to
>     track down a resource issue and wondering if this is a potential
>     problem?
>      
>     Thanks,
>     Richard
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From szekerest at gmail.com  Wed Jul 11 05:57:56 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <002601c7c36f$c37a5930$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
Message-ID: <f3b73b7d0707110257p354b338ayf35ebf2b0af08950@mail.gmail.com>

Richard,

GDAL uses a reference counting on the dataset so the interface actually uses:

if ( GDALDereferenceDataset( self ) <= 0 ) {
      GDALClose(self);
    }

when destroying the C# wrapper class.

Best regards,

Tamas


2007/7/11, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> Tamas,
>
> Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to track down
> a resource issue and wondering if this is a potential problem?
>
> Thanks,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From szekerest at gmail.com  Wed Jul 11 06:41:30 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <000001c7c375$fd5a6c20$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
	<000001c7c375$fd5a6c20$cd012b0a@Richard>
Message-ID: <f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>

Richard,

OGR_DS_Destroy doesn't handle if the datasource is shared so I
consider OGRReleaseDataSource is the proper method to use.

Could you describe your issue in more detail?

Best regards,

Tamas


2007/7/11, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> On a related note, I see that the Dispose() method for DataSource ultimately
> calls the OGRReleaseDataSource() method. Shouldn't this be calling
> OGR_DS_Destroy() instead? The latter method is the one I used in the
> hand-rolled C# wrapper class.
>
> Richard
>
>
>  ________________________________
>  From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
> Richard Matsunaga
> Sent: July 10, 2007 11:59 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
>
>
>
> Tamas,
>
> Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to track down
> a resource issue and wondering if this is a potential problem?
>
> Thanks,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From Doug_Newcomb at fws.gov  Wed Jul 11 08:15:10 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] compile problems re: GIF on RHEL 5/64-bit platform
In-Reply-To: <4693EC89.8010305@pobox.com>
Message-ID: <OFEDB9F37E.759EE6D3-ON85257315.00426DE2-85257315.00434E70@fws.gov>

John,

      If it helps, I've just compiled 1.4.2 on Centos 5 64-bit using the
external gif libraries and it finished compilation  using the system
giflib-devel-4.1.3-7.1.el5.1.  Frank,  what are the advantages of using the
internal gif library over the external gif library ?

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             Frank Warmerdam                                               
             <warmerdam@pobox.                                             
             com>                                                       To 
             Sent by:                  John Cartwright                     
             gdal-dev-bounces@         <John.C.Cartwright@noaa.gov>        
             lists.maptools.or                                          cc 
             g                         gdal-dev@lists.maptools.org         
                                                                   Subject 
                                       Re: [Gdal-dev] compile problems re: 
             07/10/2007 04:31          GIF on RHEL 5/64-bit platform       
             PM                                                            
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




John Cartwright wrote:
> Hello All,
>
> I'm trying to compile 1.4.2 on a RHEL 5 platform.  I configured using
> "--with-gif=internal", but during the compilation process I'm stopped by:
> ...
> gcc -c -I/extra/contrib/src/gdal-1.4.2/port
> -I/extra/contrib/src/gdal-1.4.2/gcore
> -I/extra/contrib/src/gdal-1.4.2/alg -I/extra/contrib/src/gdal-1.4.2/ogr
> -I/extra/contrib/src/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED
> -Df2cFortran -D_POSIX_SOURCE -I/extra/contrib/src/gdal-1.4.2/port
> -I/extra/contrib/netcdf-3.6.2 -I/extra/contrib/netcdf-3.6.2/include
> -Ilibungif -Wall -O2 libungif/egif_lib.c  -fPIC -DPIC
> -o../o/.libs/egif_lib.o
> libungif/egif_lib.c: In function 'EGifOpenFileName':
> libungif/egif_lib.c:79: error: 'S_IREAD' undeclared (first use in this
> function)
> libungif/egif_lib.c:79: error: (Each undeclared identifier is reported
> only once
> libungif/egif_lib.c:79: error: for each function it appears in.)
> libungif/egif_lib.c:79: error: 'S_IWRITE' undeclared (first use in this
> function)

John,

Could you try substituting:

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/gif/libungif/egif_lib.c?format=raw


for gdal/frmts/gif/libungif/egif_lib.c and see if that builds?  If so,
please file a bug against GDAL and I'll make sure this fix makes it into
the 1.4 branch too.  I'm guessing that RHEL 5 is removing some deprecated
macros, like S_IREAD and S_IWRITE as part of a cleanup-and-modernize
effort.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From richard.matsunaga at waypointinfo.com  Wed Jul 11 09:49:39 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>
References: <002601c7c36f$c37a5930$cd012b0a@Richard><000001c7c375$fd5a6c20$cd012b0a@Richard>
	<f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>
Message-ID: <000001c7c3c2$538bc890$cd012b0a@Richard>


Thanks Tamas, I didn't look deep enough to see what was happening in the C++
code for Dataset.

My problem is that our application is an ASP.NET web site and as soon as a
class instantiates a GDAL or OGR object, the GDAL dll gets locked and is
only released after some long period of idle time or if iisreset is called.
This makes updating GDAL (or just republishing the entire website) a bit of
a pain. I was initially worried that there may be a memory leak in there as
well, but that seems to not be the case.

The problem is easily reproduced using NUnit as well. Any test case that
uses a GDAL resource will lock the GDAL dll as well.

I just tried calling Ogr.RegisterAll() and it is the cause of the lock on
the dll. There seems to be no way of releasing resources initialized by
RegisterAll(). Not surprisingly, this behaviour is also flagged as a memory
leak (albeit a small one) by DevPartner when using OGR in an application.

Cheers,
Richard

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Tamas Szekeres
> Sent: July 11, 2007 6:42 AM
> To: Richard Matsunaga
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] C# Dataset not calling GDALClose()?
> 
> Richard,
> 
> OGR_DS_Destroy doesn't handle if the datasource is shared so 
> I consider OGRReleaseDataSource is the proper method to use.
> 
> Could you describe your issue in more detail?
> 
> Best regards,
> 
> Tamas
> 
> 
> 2007/7/11, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
> >
> >
> > On a related note, I see that the Dispose() method for DataSource 
> > ultimately calls the OGRReleaseDataSource() method. 
> Shouldn't this be 
> > calling
> > OGR_DS_Destroy() instead? The latter method is the one I 
> used in the 
> > hand-rolled C# wrapper class.
> >
> > Richard
> >
> >
> >  ________________________________
> >  From: gdal-dev-bounces@lists.maptools.org
> > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Richard 
> > Matsunaga
> > Sent: July 10, 2007 11:59 PM
> > To: gdal-dev@lists.maptools.org
> > Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
> >
> >
> >
> > Tamas,
> >
> > Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to 
> > track down a resource issue and wondering if this is a 
> potential problem?
> >
> > Thanks,
> > Richard
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Jul 11 10:20:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] compile problems re: GIF on RHEL 5/64-bit platform
In-Reply-To: <OFEDB9F37E.759EE6D3-ON85257315.00426DE2-85257315.00434E70@fws.gov>
References: <OFEDB9F37E.759EE6D3-ON85257315.00426DE2-85257315.00434E70@fws.gov>
Message-ID: <4694E71C.5040006@pobox.com>

Doug_Newcomb@fws.gov wrote:
> John,
> 
>       If it helps, I've just compiled 1.4.2 on Centos 5 64-bit using the
> external gif libraries and it finished compilation  using the system
> giflib-devel-4.1.3-7.1.el5.1.  Frank,  what are the advantages of using the
> internal gif library over the external gif library ?

Doug,

Building with the internal gif library is supposed to be easier and safer
than depending on the system library. :-)

I am aware of no reason to use the internal libungif instead of the
system libungif if that works fine.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jul 11 10:33:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <000001c7c3c2$538bc890$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard><000001c7c375$fd5a6c20$cd012b0a@Richard>
	<f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>
	<000001c7c3c2$538bc890$cd012b0a@Richard>
Message-ID: <4694EA55.90900@pobox.com>

Richard Matsunaga wrote:
> Thanks Tamas, I didn't look deep enough to see what was happening in the C++
> code for Dataset.
> 
> My problem is that our application is an ASP.NET web site and as soon as a
> class instantiates a GDAL or OGR object, the GDAL dll gets locked and is
> only released after some long period of idle time or if iisreset is called.
> This makes updating GDAL (or just republishing the entire website) a bit of
> a pain. I was initially worried that there may be a memory leak in there as
> well, but that seems to not be the case.
> 
> The problem is easily reproduced using NUnit as well. Any test case that
> uses a GDAL resource will lock the GDAL dll as well.
> 
> I just tried calling Ogr.RegisterAll() and it is the cause of the lock on
> the dll. There seems to be no way of releasing resources initialized by
> RegisterAll(). Not surprisingly, this behaviour is also flagged as a memory
> leak (albeit a small one) by DevPartner when using OGR in an application.

Richard / Tamas,

I'm not clear on what this "DLL locking" is all about, but at the C
level there is an OGRCleanupAll() function which will deregister OGR
drivers as well as cleanup some other memory allocations.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Jul 11 10:19:57 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <000001c7c3c2$538bc890$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
	<000001c7c375$fd5a6c20$cd012b0a@Richard>
	<f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>
	<000001c7c3c2$538bc890$cd012b0a@Richard>
Message-ID: <f3b73b7d0707110719n7fdd7046rcc89e7c1ca4f39bd@mail.gmail.com>

Richard,

Currently there's no build in mechanism in the GDAL C API to unload
the gdal dll. (By calling FreeLibrary on Windows for example).
Therefore you have to consider that the dll is loaded and locked until
the host application terminates in any case.

Best regards,

Tamas


2007/7/11, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
> Thanks Tamas, I didn't look deep enough to see what was happening in the C++
> code for Dataset.
>
> My problem is that our application is an ASP.NET web site and as soon as a
> class instantiates a GDAL or OGR object, the GDAL dll gets locked and is
> only released after some long period of idle time or if iisreset is called.
> This makes updating GDAL (or just republishing the entire website) a bit of
> a pain. I was initially worried that there may be a memory leak in there as
> well, but that seems to not be the case.
>
> The problem is easily reproduced using NUnit as well. Any test case that
> uses a GDAL resource will lock the GDAL dll as well.
>
> I just tried calling Ogr.RegisterAll() and it is the cause of the lock on
> the dll. There seems to be no way of releasing resources initialized by
> RegisterAll(). Not surprisingly, this behaviour is also flagged as a memory
> leak (albeit a small one) by DevPartner when using OGR in an application.
>
> Cheers,
> Richard
>
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.maptools.org
> > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
> > Tamas Szekeres
> > Sent: July 11, 2007 6:42 AM
> > To: Richard Matsunaga
> > Cc: gdal-dev@lists.maptools.org
> > Subject: Re: [Gdal-dev] C# Dataset not calling GDALClose()?
> >
> > Richard,
> >
> > OGR_DS_Destroy doesn't handle if the datasource is shared so
> > I consider OGRReleaseDataSource is the proper method to use.
> >
> > Could you describe your issue in more detail?
> >
> > Best regards,
> >
> > Tamas
> >
> >
> > 2007/7/11, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
> > >
> > >
> > > On a related note, I see that the Dispose() method for DataSource
> > > ultimately calls the OGRReleaseDataSource() method.
> > Shouldn't this be
> > > calling
> > > OGR_DS_Destroy() instead? The latter method is the one I
> > used in the
> > > hand-rolled C# wrapper class.
> > >
> > > Richard
> > >
> > >
> > >  ________________________________
> > >  From: gdal-dev-bounces@lists.maptools.org
> > > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Richard
> > > Matsunaga
> > > Sent: July 10, 2007 11:59 PM
> > > To: gdal-dev@lists.maptools.org
> > > Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
> > >
> > >
> > >
> > > Tamas,
> > >
> > > Shouldn't Dataset.Dispose() be calling GDALClose()? I'm trying to
> > > track down a resource issue and wondering if this is a
> > potential problem?
> > >
> > > Thanks,
> > > Richard
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

From szekerest at gmail.com  Wed Jul 11 11:37:02 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <4694EA55.90900@pobox.com>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
	<000001c7c375$fd5a6c20$cd012b0a@Richard>
	<f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>
	<000001c7c3c2$538bc890$cd012b0a@Richard> <4694EA55.90900@pobox.com>
Message-ID: <f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>

Frank,

OGRCleanupAll() is not exposed to SWIG right now. Should we add this
function to the interface?

Best regards,

Tamas


2007/7/11, Frank Warmerdam <warmerdam@pobox.com>:
> Richard Matsunaga wrote:
> > Thanks Tamas, I didn't look deep enough to see what was happening in the C++
> > code for Dataset.
> >
> > My problem is that our application is an ASP.NET web site and as soon as a
> > class instantiates a GDAL or OGR object, the GDAL dll gets locked and is
> > only released after some long period of idle time or if iisreset is called.
> > This makes updating GDAL (or just republishing the entire website) a bit of
> > a pain. I was initially worried that there may be a memory leak in there as
> > well, but that seems to not be the case.
> >
> > The problem is easily reproduced using NUnit as well. Any test case that
> > uses a GDAL resource will lock the GDAL dll as well.
> >
> > I just tried calling Ogr.RegisterAll() and it is the cause of the lock on
> > the dll. There seems to be no way of releasing resources initialized by
> > RegisterAll(). Not surprisingly, this behaviour is also flagged as a memory
> > leak (albeit a small one) by DevPartner when using OGR in an application.
>
> Richard / Tamas,
>
> I'm not clear on what this "DLL locking" is all about, but at the C
> level there is an OGRCleanupAll() function which will deregister OGR
> drivers as well as cleanup some other memory allocations.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From John.C.Cartwright at noaa.gov  Wed Jul 11 11:46:30 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] compile problems re: GIF on RHEL 5/64-bit platform
In-Reply-To: <OFEDB9F37E.759EE6D3-ON85257315.00426DE2-85257315.00434E70@fws.gov>
References: <OFEDB9F37E.759EE6D3-ON85257315.00426DE2-85257315.00434E70@fws.gov>
Message-ID: <4694FB56.6090301@noaa.gov>

Hi Doug,

thanks for the suggestion. I was able to get gdal to compile using a 
modified egif_lib.c that Frank supplied. However, strangely the gdal 
executables don't seem to be able to find some of the shared libraries 
even though the directory is listed in the LD_LIBRARY_PATH variable. Did 
you have any issues like this? It may be a problem specific to RHEL 5.

Thanks again!

--john


Doug_Newcomb@fws.gov wrote:
> John,
>
>       If it helps, I've just compiled 1.4.2 on Centos 5 64-bit using the
> external gif libraries and it finished compilation  using the system
> giflib-devel-4.1.3-7.1.el5.1.  Frank,  what are the advantages of using the
> internal gif library over the external gif library ?
>
> Doug
>
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
> ---------------------------------------------------------------------------------------------------------
>
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
> I left my signature file in /dev/null
>
>
>                                                                            
>              Frank Warmerdam                                               
>              <warmerdam@pobox.                                             
>              com>                                                       To 
>              Sent by:                  John Cartwright                     
>              gdal-dev-bounces@         <John.C.Cartwright@noaa.gov>        
>              lists.maptools.or                                          cc 
>              g                         gdal-dev@lists.maptools.org         
>                                                                    Subject 
>                                        Re: [Gdal-dev] compile problems re: 
>              07/10/2007 04:31          GIF on RHEL 5/64-bit platform       
>              PM                                                            
>                                                                            
>                                                                            
>                                                                            
>                                                                            
>                                                                            
>
>
>
>
> John Cartwright wrote:
>   
>> Hello All,
>>
>> I'm trying to compile 1.4.2 on a RHEL 5 platform.  I configured using
>> "--with-gif=internal", but during the compilation process I'm stopped by:
>> ...
>> gcc -c -I/extra/contrib/src/gdal-1.4.2/port
>> -I/extra/contrib/src/gdal-1.4.2/gcore
>> -I/extra/contrib/src/gdal-1.4.2/alg -I/extra/contrib/src/gdal-1.4.2/ogr
>> -I/extra/contrib/src/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED
>> -Df2cFortran -D_POSIX_SOURCE -I/extra/contrib/src/gdal-1.4.2/port
>> -I/extra/contrib/netcdf-3.6.2 -I/extra/contrib/netcdf-3.6.2/include
>> -Ilibungif -Wall -O2 libungif/egif_lib.c  -fPIC -DPIC
>> -o../o/.libs/egif_lib.o
>> libungif/egif_lib.c: In function 'EGifOpenFileName':
>> libungif/egif_lib.c:79: error: 'S_IREAD' undeclared (first use in this
>> function)
>> libungif/egif_lib.c:79: error: (Each undeclared identifier is reported
>> only once
>> libungif/egif_lib.c:79: error: for each function it appears in.)
>> libungif/egif_lib.c:79: error: 'S_IWRITE' undeclared (first use in this
>> function)
>>     
>
> John,
>
> Could you try substituting:
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/gif/libungif/egif_lib.c?format=raw
>
>
> for gdal/frmts/gif/libungif/egif_lib.c and see if that builds?  If so,
> please file a bug against GDAL and I'll make sure this fix makes it into
> the 1.4 branch too.  I'm guessing that RHEL 5 is removing some deprecated
> macros, like S_IREAD and S_IWRITE as part of a cleanup-and-modernize
> effort.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
>
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
>   

From richard.matsunaga at waypointinfo.com  Wed Jul 11 12:07:48 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>
References: <002601c7c36f$c37a5930$cd012b0a@Richard><000001c7c375$fd5a6c20$cd012b0a@Richard><f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com><000001c7c3c2$538bc890$cd012b0a@Richard>
	<4694EA55.90900@pobox.com>
	<f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>
Message-ID: <000701c7c3d5$a0ca2080$cd012b0a@Richard>


This would likely help me out a great deal, as well as anyone using GDAL
inside of an ASP.NET web site.

Cheers,
Richard

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> 
> Frank,
> 
> OGRCleanupAll() is not exposed to SWIG right now. Should we 
> add this function to the interface?
> 
> Best regards,
> 
> Tamas
> 
> 
> 2007/7/11, Frank Warmerdam <warmerdam@pobox.com>:
> > Richard Matsunaga wrote:
> > > Thanks Tamas, I didn't look deep enough to see what was 
> happening in 
> > > the C++ code for Dataset.
> > >
> > > My problem is that our application is an ASP.NET web site and as 
> > > soon as a class instantiates a GDAL or OGR object, the 
> GDAL dll gets 
> > > locked and is only released after some long period of 
> idle time or if iisreset is called.
> > > This makes updating GDAL (or just republishing the entire 
> website) a 
> > > bit of a pain. I was initially worried that there may be a memory 
> > > leak in there as well, but that seems to not be the case.
> > >
> > > The problem is easily reproduced using NUnit as well. Any 
> test case 
> > > that uses a GDAL resource will lock the GDAL dll as well.
> > >
> > > I just tried calling Ogr.RegisterAll() and it is the cause of the 
> > > lock on the dll. There seems to be no way of releasing resources 
> > > initialized by RegisterAll(). Not surprisingly, this behaviour is 
> > > also flagged as a memory leak (albeit a small one) by 
> DevPartner when using OGR in an application.
> >
> > Richard / Tamas,
> >
> > I'm not clear on what this "DLL locking" is all about, but at the C 
> > level there is an OGRCleanupAll() function which will 
> deregister OGR 
> > drivers as well as cleanup some other memory allocations.
> >
> > Best regards,
> > --
> > 
> ---------------------------------------+------------------------------
> > ---------------------------------------+--------
> > I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | President OSGeo, 
> http://osgeo.org
> >
> >
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From sy at perkins.net  Wed Jul 11 13:02:04 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:56 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <000701c7c3d5$a0ca2080$cd012b0a@Richard>
References: <002601c7c36f$c37a5930$cd012b0a@Richard><000001c7c375$fd5a6c20$cd012b0a@Richard><f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com><000001c7c3c2$538bc890$cd012b0a@Richard>	<4694EA55.90900@pobox.com>	<f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>
	<000701c7c3d5$a0ca2080$cd012b0a@Richard>
Message-ID: <46950D0C.8010900@perkins.net>

Could you explain this DLL locking thing? It would seem to be a sad day 
for shared libraries if only one executable could use them at a time! Or 
is it an issue that executables don't pick up recent changes to the 
shared library, preferring to use the OS cached version instead?

I think that OGRCleanupAll() only deletes the currently registered 
drivers, no? Does it actually unload the shared library? Is there an 
equivalent GDAL function, BTW, GDALDeregisterAll()?

Cheers,

Sy

Richard Matsunaga wrote:
> This would likely help me out a great deal, as well as anyone using GDAL
> inside of an ASP.NET web site.
>
> Cheers,
> Richard
>
>   
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.maptools.org 
>>
>> Frank,
>>
>> OGRCleanupAll() is not exposed to SWIG right now. Should we 
>> add this function to the interface?
>>
>> Best regards,
>>
>> Tamas
>>
>>
>> 2007/7/11, Frank Warmerdam <warmerdam@pobox.com>:
>>     
>>> Richard Matsunaga wrote:
>>>       
>>>> Thanks Tamas, I didn't look deep enough to see what was 
>>>>         
>> happening in 
>>     
>>>> the C++ code for Dataset.
>>>>
>>>> My problem is that our application is an ASP.NET web site and as 
>>>> soon as a class instantiates a GDAL or OGR object, the 
>>>>         
>> GDAL dll gets 
>>     
>>>> locked and is only released after some long period of 
>>>>         
>> idle time or if iisreset is called.
>>     
>>>> This makes updating GDAL (or just republishing the entire 
>>>>         
>> website) a 
>>     
>>>> bit of a pain. I was initially worried that there may be a memory 
>>>> leak in there as well, but that seems to not be the case.
>>>>
>>>> The problem is easily reproduced using NUnit as well. Any 
>>>>         
>> test case 
>>     
>>>> that uses a GDAL resource will lock the GDAL dll as well.
>>>>
>>>> I just tried calling Ogr.RegisterAll() and it is the cause of the 
>>>> lock on the dll. There seems to be no way of releasing resources 
>>>> initialized by RegisterAll(). Not surprisingly, this behaviour is 
>>>> also flagged as a memory leak (albeit a small one) by 
>>>>         
>> DevPartner when using OGR in an application.
>>     
>>> Richard / Tamas,
>>>
>>> I'm not clear on what this "DLL locking" is all about, but at the C 
>>> level there is an OGRCleanupAll() function which will 
>>>       
>> deregister OGR 
>>     
>>> drivers as well as cleanup some other memory allocations.
>>>
>>> Best regards,
>>> --
>>>
>>>       
>> ---------------------------------------+------------------------------
>>     
>>> ---------------------------------------+--------
>>> I set the clouds in motion - turn up   | Frank Warmerdam, 
>>>       
>> warmerdam@pobox.com
>>     
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | President OSGeo, 
>>>       
>> http://osgeo.org
>>     
>>>       
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>     
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070711/02f2d23c/attachment.html
From warmerdam at pobox.com  Wed Jul 11 13:55:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <46950D0C.8010900@perkins.net>
References: <002601c7c36f$c37a5930$cd012b0a@Richard><000001c7c375$fd5a6c20$cd012b0a@Richard><f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com><000001c7c3c2$538bc890$cd012b0a@Richard>	<4694EA55.90900@pobox.com>	<f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>
	<000701c7c3d5$a0ca2080$cd012b0a@Richard>
	<46950D0C.8010900@perkins.net>
Message-ID: <46951977.10701@pobox.com>

Simon Perkins wrote:
> Could you explain this DLL locking thing? It would seem to be a sad day 
> for shared libraries if only one executable could use them at a time! Or 
> is it an issue that executables don't pick up recent changes to the 
> shared library, preferring to use the OS cached version instead?

Simon,

Executable (and DLL) locking on windows seems to work such that when
an EXE or DLL is in use (loaded into the memory space of a running
process) the file in the file system is not modifiable.  So for instance,
you can't replace an in-use DLL in the file system - much less have
the change affect a running process.

But, of course, many processes can use the same DLL. It is just
write/update locked.

Win32 gurus please correct me if I'm wrong.

> I think that OGRCleanupAll() only deletes the currently registered 
> drivers, no? 

Correct.

> Does it actually unload the shared library? 

No.

 > Is there an equivalent GDAL function, BTW, GDALDeregisterAll()?

The GDALDestroyDriverManager() function does something roughly
analygous for GDAL.  I see in gdalinfo I also call CPLCleanupTLS()
after that to clean up other system (thread local storage)
resources, though I'm not sure if that is needed anymore.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Doug_Newcomb at fws.gov  Wed Jul 11 13:32:08 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] compile problems re: GIF on RHEL 5/64-bit platform
In-Reply-To: <4694FB56.6090301@noaa.gov>
Message-ID: <OF2E6145C7.D86A9B5A-ON85257315.005FA203-85257315.00605389@fws.gov>

John,
      I usually add /usr/local/lib to /etc/ld.so.conf .  I've noticed that
when I've compiled things from source on Centos that I have to disable
selinux and run /sbin/ldconfig after I install ( Proj4, geos, ecw, etc)
before it will allow the new libraries to be seen in the library path.
I've been thinking about building rpms and seeing how that goes ( In my
copious spare time) to avoid that issue.  Long term, I probably just need
to wrap my head around selinux configuration.


Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             John Cartwright                                               
             <John.C.Cartwrigh                                             
             t@noaa.gov>                                                To 
             Sent by:                  gdal-dev@lists.maptools.org         
             gdal-dev-bounces@                                          cc 
             lists.maptools.or                                             
             g                                                     Subject 
                                       Re: [Gdal-dev] compile problems re: 
                                       GIF on RHEL 5/64-bit platform       
             07/11/2007 11:46                                              
             AM                                                            
                                                                           
                                                                           
                                                                           
                                                                           




Hi Doug,

thanks for the suggestion. I was able to get gdal to compile using a
modified egif_lib.c that Frank supplied. However, strangely the gdal
executables don't seem to be able to find some of the shared libraries
even though the directory is listed in the LD_LIBRARY_PATH variable. Did
you have any issues like this? It may be a problem specific to RHEL 5.

Thanks again!

--john


Doug_Newcomb@fws.gov wrote:
> John,
>
>       If it helps, I've just compiled 1.4.2 on Centos 5 64-bit using the
> external gif libraries and it finished compilation  using the system
> giflib-devel-4.1.3-7.1.el5.1.  Frank,  what are the advantages of using
the
> internal gif library over the external gif library ?
>
> Doug
>
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
>
---------------------------------------------------------------------------------------------------------

>
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of
Interior.
> I left my signature file in /dev/null
>
>
>

>              Frank Warmerdam

>              <warmerdam@pobox.

>              com>
To
>              Sent by:                  John Cartwright

>              gdal-dev-bounces@         <John.C.Cartwright@noaa.gov>

>              lists.maptools.or
cc
>              g                         gdal-dev@lists.maptools.org

>
Subject
>                                        Re: [Gdal-dev] compile problems
re:
>              07/10/2007 04:31          GIF on RHEL 5/64-bit platform

>              PM

>

>

>

>

>

>
>
>
>
> John Cartwright wrote:
>
>> Hello All,
>>
>> I'm trying to compile 1.4.2 on a RHEL 5 platform.  I configured using
>> "--with-gif=internal", but during the compilation process I'm stopped
by:
>> ...
>> gcc -c -I/extra/contrib/src/gdal-1.4.2/port
>> -I/extra/contrib/src/gdal-1.4.2/gcore
>> -I/extra/contrib/src/gdal-1.4.2/alg -I/extra/contrib/src/gdal-1.4.2/ogr
>> -I/extra/contrib/src/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED
>> -Df2cFortran -D_POSIX_SOURCE -I/extra/contrib/src/gdal-1.4.2/port
>> -I/extra/contrib/netcdf-3.6.2 -I/extra/contrib/netcdf-3.6.2/include
>> -Ilibungif -Wall -O2 libungif/egif_lib.c  -fPIC -DPIC
>> -o../o/.libs/egif_lib.o
>> libungif/egif_lib.c: In function 'EGifOpenFileName':
>> libungif/egif_lib.c:79: error: 'S_IREAD' undeclared (first use in this
>> function)
>> libungif/egif_lib.c:79: error: (Each undeclared identifier is reported
>> only once
>> libungif/egif_lib.c:79: error: for each function it appears in.)
>> libungif/egif_lib.c:79: error: 'S_IWRITE' undeclared (first use in this
>> function)
>>
>
> John,
>
> Could you try substituting:
>
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/gif/libungif/egif_lib.c?format=raw

>
>
> for gdal/frmts/gif/libungif/egif_lib.c and see if that builds?  If so,
> please file a bug against GDAL and I'll make sure this fix makes it into
> the 1.4 branch too.  I'm guessing that RHEL 5 is removing some deprecated
> macros, like S_IREAD and S_IWRITE as part of a cleanup-and-modernize
> effort.
>
> Best regards,
> --
>
---------------------------------------+--------------------------------------

>
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo,
http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
>
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Wed Jul 11 14:02:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] C# Dataset not calling GDALClose()?
In-Reply-To: <f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>
References: <002601c7c36f$c37a5930$cd012b0a@Richard>
	<000001c7c375$fd5a6c20$cd012b0a@Richard>
	<f3b73b7d0707110341r2eacc6exd39846ce6ac6df8@mail.gmail.com>
	<000001c7c3c2$538bc890$cd012b0a@Richard> <4694EA55.90900@pobox.com>
	<f3b73b7d0707110837x10bcdbe5ha1364ac4464f0848@mail.gmail.com>
Message-ID: <46951B29.4010101@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> OGRCleanupAll() is not exposed to SWIG right now. Should we add this
> function to the interface?

Tamas,

Yes.  If you would like me to do it, email me off-list.  Likewise for
GDALDestroyDriverManager().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From johnr at wowway.com  Wed Jul 11 18:53:31 2007
From: johnr at wowway.com (John R.)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
Message-ID: <46955F6B.7060706@wowway.com>

GDAL 1.4.2.0.

I have a map from Wisconsin DOT (USA).  gdalinfo indicates this:

Driver: GTiff/GeoTIFF
Size is 10750, 8488
Coordinate System is `'
Origin = (659653.722794383182190,352632.358040164515842)
Pixel Size = (0.329187501713504,-0.329168110366799)
Metadata:
   TIFFTAG_XRESOLUTION=1200
   TIFFTAG_YRESOLUTION=1200
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  659653.723,  352632.358)
Lower Left  (  659653.723,  349838.379)
Upper Right (  663192.488,  352632.358)
Lower Right (  663192.488,  349838.379)
Center      (  661423.106,  351235.369)
Band 1 Block=10750x8 Type=Byte, ColorInterp=Red
Band 2 Block=10750x8 Type=Byte, ColorInterp=Green
Band 3 Block=10750x8 Type=Byte, ColorInterp=Blue

Provider indicates it is in a UTM coordinate system using NAD83.

I have tried many invocations of gdal_translate.  I started with 
variations on this:

gdal_translate -a_srs EPSG:2860 <src> <dst>

This adds the request coordinate system.  This map is from Wisconsin 
South.  Key gdalinfo output:

Center      (  661423.106,  351235.369) ( 89d11'34.92"W, 46d59'25.93"N)

In the approximate center of the map, I am expecting Center lat/long 
closer to this (approximate):

  West 87?, 59.477 Minutes;  North 43?, 48.340 Minutes;


I won't detail out all the variations as it may be clear to others what 
I am doing wrong.  I can provide them if needed.

What am I missing?

Thanks,

John

From tosborn at sbcglobal.net  Wed Jul 11 22:08:32 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <46955F6B.7060706@wowway.com>
References: <46955F6B.7060706@wowway.com>
Message-ID: <11552519.post@talk.nabble.com>


You indicate that the provider says the image is projected in UTM NAD83. 
EPSG:2860 that you specified is a State Plane Coordinate System projection
for the Central Zone of Wisconsin.  

However, the coordinates output by gdalinfo don't look like UTM
coordinates....they look more like State Plane Coordinates in meters. 
However, the lat long coordinates you say you expect for the center of the
map would be located in the Wisconsin South State Plane Coordinate Zone.  So
I would try EPSG:32154 which is NAD83 Wisconsin South Zone SPC, meter.
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11552519
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From thom.decarlo at nasa.gov  Thu Jul 12 11:40:28 2007
From: thom.decarlo at nasa.gov (Decarlo,
	Thomas R. (LARC-B702)[NCI INFORMATION SYSTEMS])
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Problem importing Arc Binary Grid data
Message-ID: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>

I've been given a directory full of DEM data that I'm supposed to import
for use in an osgdem terrain model build. I think, based on the file
names, that the data is in Arc/Info Binary Grid format (AIG). The
problem is that I don't think I was given everything that I need to
interpret the data. The contents of the directory looks like this:

 

07/11/2007  10:07 AM    <DIR>          .

07/11/2007  10:07 AM    <DIR>          ..

10/26/2006  11:21 AM               104 tdenv.adf

10/26/2006  11:21 AM        15,135,552 tedg.adf

10/26/2006  11:21 AM             4,624 thul.adf

10/26/2006  11:21 AM           157,792 tmsk.adf

10/26/2006  11:21 AM               116 tmsx.adf

10/26/2006  11:21 AM        15,135,552 tnod.adf

10/26/2006  11:21 AM        10,090,416 tnxy.adf

10/26/2006  11:21 AM         2,522,604 tnz.adf

 

I'm using FWTools v1.3.4, and I don't see how to import this stuff. Does
anyone out there know what this is and how I can bring it into Imagine
format? The GDAL Supported Formats page says that AIG format uses the
*.adf extension and is supported for reading, but I cannot even get a
successful gdalinfo from any of these adf files.

 

Thanks!

Thom

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070712/22f95eb0/attachment.html
From cavicchi at ferrara.linux.it  Thu Jul 12 12:08:54 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Default compression level...
Message-ID: <20070712160854.GA24464@ferrara.linux.it>

Hi to all,
I used the function GDALCreateCopy to convert some GTiff images in
JPEG and JPEG2000, but i don't find where i can read the default
compression level for this formats.
Someone can help me?

-- 
Ciao,
        Mario
        
[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From warmerdam at pobox.com  Thu Jul 12 12:14:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Problem importing Arc Binary Grid data
In-Reply-To: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
References: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
Message-ID: <4696536D.9040404@pobox.com>

Decarlo, Thomas R. (LARC-B702)[NCI INFORMATION SYSTEMS] wrote:
> I?ve been given a directory full of DEM data that I?m supposed to import 
> for use in an osgdem terrain model build. I think, based on the file 
> names, that the data is in Arc/Info Binary Grid format (AIG). The 
> problem is that I don?t think I was given everything that I need to 
> interpret the data. The contents of the directory looks like this:
> 
>  
> 
> 07/11/2007  10:07 AM    <DIR>          .
> 
> 07/11/2007  10:07 AM    <DIR>          ..
> 
> 10/26/2006  11:21 AM               104 tdenv.adf
> 
> 10/26/2006  11:21 AM        15,135,552 tedg.adf
> 
> 10/26/2006  11:21 AM             4,624 thul.adf
> 
> 10/26/2006  11:21 AM           157,792 tmsk.adf
> 
> 10/26/2006  11:21 AM               116 tmsx.adf
> 
> 10/26/2006  11:21 AM        15,135,552 tnod.adf
> 
> 10/26/2006  11:21 AM        10,090,416 tnxy.adf
> 
> 10/26/2006  11:21 AM         2,522,604 tnz.adf
> 
>  
> 
> I?m using FWTools v1.3.4, and I don?t see how to import this stuff. Does 
> anyone out there know what this is and how I can bring it into Imagine 
> format? The GDAL Supported Formats page says that AIG format uses the 
> *.adf extension and is supported for reading, but I cannot even get a 
> successful gdalinfo from any of these adf files.

Thom,

I think this looks more like an arc/info binary vector coverage ... likely
specifically a TIN.  Grids would look more like:

warmerda@amd64[50]% ls -l demgrd/
total 216
-rw-r--r--  1 warmerda users     32 2006-07-13 06:36 dblbnd.adf
-rw-r--r--  1 warmerda users    308 2006-07-13 06:36 hdr.adf
-rw-r--r--  1 warmerda users    165 2006-07-13 06:36 log
-rw-r--r--  1 warmerda users     32 2006-07-13 06:36 sta.adf
-rw-r--r--  1 warmerda users   7112 2006-07-13 06:36 vat.adf
-rw-r--r--  1 warmerda users 182586 2006-07-13 06:36 w001001.adf
-rw-r--r--  1 warmerda users   4596 2006-07-13 06:36 w001001x.adf

Vector coverages might be supported by ogr (try ogrinfo on the
directory name) but I *think* the vector coverage driver requires
an associate (parallel) info directory.  If you don't have that,
you might have problems reading the data.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul 12 12:32:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Default compression level...
In-Reply-To: <20070712160854.GA24464@ferrara.linux.it>
References: <20070712160854.GA24464@ferrara.linux.it>
Message-ID: <469657AA.8040301@pobox.com>

Mario Cavicchi wrote:
> Hi to all,
> I used the function GDALCreateCopy to convert some GTiff images in
> JPEG and JPEG2000, but i don't find where i can read the default
> compression level for this formats.
> Someone can help me?

Mario,

The default QUALITY for the JP2KAK driver is 20 which I believe
means the driver will attempt to make the output file 20% of the
uncompressed size or so.  I'll update the docs to indicate the
default of 20.

The default JPEG driver quality is 75 which has no correspondance
to physical file size.  It is just an arbitrary number to change to
alter the amount of compression to apply.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Martel at drdc-rddc.gc.ca  Thu Jul 12 13:42:26 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] CIB/NITF metadata
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D10394D@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi,

I use the NITF driver to extract metadata from CIB NITS frame file. The
CIB specification gives information about Horizontal accuracy (absolute
and relative) attributes. According to RPF specification, these
attributes should be near the end of the NITF file (not in NITF header).
Does anyone knows if the NITF driver take care of these specific
attributes with GetMetadata ?

Thanks,
Christian


From warmerdam at pobox.com  Thu Jul 12 14:46:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] CIB/NITF metadata
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D10394D@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D10394D@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <469676F6.2040307@pobox.com>

Martel, Christian wrote:
> Hi,
> 
> I use the NITF driver to extract metadata from CIB NITS frame file. The
> CIB specification gives information about Horizontal accuracy (absolute
> and relative) attributes. According to RPF specification, these
> attributes should be near the end of the NITF file (not in NITF header).
> Does anyone knows if the NITF driver take care of these specific
> attributes with GetMetadata ?

Christian,

CIB uses various extension blocks and these are not generally exposed as
metadata by GDAL.  Basically, run gdalinfo on the file and if you don't
see the metadata you want, then it isn't available through GDAL.

You might want to look at NITFReadBLOCKA() in gdal/frmts/nitf/nitfimage.c
for an example of reporting specific extension block contents as metadata.
If you have the docs handy, you might find you can engineer in support
for additional items.  I'd be open to patches to this effect.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Martel at drdc-rddc.gc.ca  Thu Jul 12 15:09:01 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] CIB/NITF metadata
In-Reply-To: <469676F6.2040307@pobox.com>
References: <D8AD814B3EB3A945B7F149E41240DB6D10394D@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<469676F6.2040307@pobox.com>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D10394E@valcartierex01.valcartier.drdc-rddc.gc.ca>

Frank,

You confirmed what I was thinking. I'll check for a workaround for that
metadata.
Thanks,
Christian

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 12 juillet 2007 14:46
To: Martel, Christian
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] CIB/NITF metadata

Martel, Christian wrote:
> Hi,
> 
> I use the NITF driver to extract metadata from CIB NITS frame file. 
> The CIB specification gives information about Horizontal accuracy 
> (absolute and relative) attributes. According to RPF specification, 
> these attributes should be near the end of the NITF file (not in NITF
header).
> Does anyone knows if the NITF driver take care of these specific 
> attributes with GetMetadata ?

Christian,

CIB uses various extension blocks and these are not generally exposed as
metadata by GDAL.  Basically, run gdalinfo on the file and if you don't
see the metadata you want, then it isn't available through GDAL.

You might want to look at NITFReadBLOCKA() in
gdal/frmts/nitf/nitfimage.c for an example of reporting specific
extension block contents as metadata.
If you have the docs handy, you might find you can engineer in support
for additional items.  I'd be open to patches to this effect.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From johnr at wowway.com  Thu Jul 12 21:57:19 2007
From: johnr at wowway.com (John R.)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11552519.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
Message-ID: <4696DBFF.90701@wowway.com>

Tim Osborn wrote:
> You indicate that the provider says the image is projected in UTM NAD83. 
> EPSG:2860 that you specified is a State Plane Coordinate System projection
> for the Central Zone of Wisconsin. 

Yes...I tried pretty much everything with "Wisconsin" in the name.

> 
> However, the coordinates output by gdalinfo don't look like UTM
> coordinates....they look more like State Plane Coordinates in meters. 

Interesting...is there a way I can confirm this?

> However, the lat long coordinates you say you expect for the center of the
> map would be located in the Wisconsin South State Plane Coordinate Zone.  So
> I would try EPSG:32154 which is NAD83 Wisconsin South Zone SPC, meter.

You are correct...it is South.

With "-a_srs EPSG:32154":

Center      (  661423.106,  351235.369) ( 89d13'8.87"W, 45d 9'30.70"N)

Should be approx:

  West 87d, 59.477 Minutes;  North 43d, 48.340 Minutes;

gdal_translate -a_srs overrides the projection for the output file. 
There doesn't seem to be an option for defining what is on the input 
side.  Is this because UTM is assumed assumed with gdal_translate?  Your 
comment that the coordinates look more like State Plane Coordinates in 
meters and that EPSG:32154 should be used as -a_srs implies that the 
-s_srs defines both the input side and output.

In an email response to by mail, someone else indicated the gdalwarp may 
be more appropriate as both s_srs and the t_srs (source and destination) 
coordinate systems can be overridden.  My attempts and making that work 
were tragic.  Is this a direction I should continue to pursue?

Thanks,

John

From nicholas.g.lawrence at mainroads.qld.gov.au  Fri Jul 13 02:40:43 2007
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] internals of ecw file
Message-ID: <OFC4F3C7DF.6802438E-ON4A257317.002467F3-4A257317.0024AEFE@transport.qld.gov.au>


I am trying to write a mapbasic program that, amongst
other things, interrogates an ecw file for information
such as;
- datum/projection
- bounding coordinates?
My plan is to open the binary file, and use
a Get statement to extract information. But I
don't know where in the ecw to look.

Does anyone know about the internals of an
ecw file?

nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************


From warmerdam at pobox.com  Fri Jul 13 11:43:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] internals of ecw file
In-Reply-To: <OFC4F3C7DF.6802438E-ON4A257317.002467F3-4A257317.0024AEFE@transport.qld.gov.au>
References: <OFC4F3C7DF.6802438E-ON4A257317.002467F3-4A257317.0024AEFE@transport.qld.gov.au>
Message-ID: <46979D9F.3040200@pobox.com>

nicholas.g.lawrence@mainroads.qld.gov.au wrote:
> I am trying to write a mapbasic program that, amongst
> other things, interrogates an ecw file for information
> such as;
> - datum/projection
> - bounding coordinates?
> My plan is to open the binary file, and use
> a Get statement to extract information. But I
> don't know where in the ecw to look.
> 
> Does anyone know about the internals of an
> ecw file?

Nick,

I have always used the ECW SDK to access ecw files, and haven't
looked into the internal organization.  You could review the
ECW SDK source code to work out rough layout of the header of
the ECW file, or perhaps examine it in a binary editor to find
particular items.  That is if you are convinced you want to
directly open the file and read it yourself.

Alternatively, you could use the ECW SDK or GDAL to get this
information.

> ***********************************************************************
> WARNING: This e-mail (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was intended
> to be sent to and if you use it in an authorised way.  No one is 
> allowed to use, review, alter, transmit, disclose, distribute, print 
> or copy this e-mail without appropriate authority.
> 
> If this e-mail was not intended for you and was sent to you by mistake,
> please telephone or e-mail me immediately, destroy any hardcopies of
> this e-mail and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and 
> any legal privilege and confidentiality attached to this e-mail is not 
> waived or destroyed by that mistake.
> 
> It is your responsibility to ensure that this e-mail does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
> 
> Opinions contained in this e-mail do not necessarily reflect the
> opinions of the Queensland Department of Main Roads, Queensland
> Transport or Maritime Safety Queensland, or endorsed organisations
> utilising the same infrastructure.
> ***********************************************************************

Whew, that is a heck of a disclaimer.  I feel for you having this
appended to all your email.  It must be embarrassing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tosborn at sbcglobal.net  Fri Jul 13 13:28:55 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <4696DBFF.90701@wowway.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com>
Message-ID: <11583972.post@talk.nabble.com>


>> However, the coordinates output by gdalinfo don't look like UTM
>> coordinates....they look more like State Plane Coordinates in meters. 

>Interesting...is there a way I can confirm this?

Well, the UTM NAD83 coordinates for West 87d, 59.477 Minutes, North 43d,
48.340 Minutes, which is where you say the center of the image should be,
are 420,265.62E  4,850,766.51N 16T.  Note the magnitude of the
northing...much larger that the coordinates for the center of the image
reported by gdalinfo.  That's why the coordinate information in the image
can't be UTM.  About all that leaves is State Plane or some custom spatial
reference system.

>gdal_translate -a_srs overrides the projection for the output file. 
>There doesn't seem to be an option for defining what is on the input 
>side.  Is this because UTM is assumed assumed with gdal_translate?  Your 
>comment that the coordinates look more like State Plane Coordinates in 
>meters and that EPSG:32154 should be used as -a_srs implies that the 
>-s_srs defines both the input side and output.
>
>In an email response to by mail, someone else indicated the gdalwarp may 
>be more appropriate as both s_srs and the t_srs (source and destination) 
>coordinate systems can be overridden.  My attempts and making that work 
>were tragic.  Is this a direction I should continue to pursue?

gdal_translate -a_srs assigns a spatial reference system to an image.  If
you knew for sure what the image was projected in, and you wanted to change
it to something else, it would be appropriate to use gdalwarp.  But that's
not the problem here....we really aren't sure what the image is projected
in.  So, using gdal_translate to assign a srs is appropriate.  

It seems that there is some disjoint here.  The center of the image that you
believe is in the Wisconsin South Zone SPC, but the coordinates in the image
are such that when that Wisconsin South Zone is applied, the center of the
image is located in the Wisconsin Central Zone. I'd check back with the
source of the image and see if they can provide a prj file or more
information.
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11583972
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From tosborn at sbcglobal.net  Fri Jul 13 13:42:49 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11583972.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
Message-ID: <11584290.post@talk.nabble.com>


OK...maybe this is what's going on.....

The image is probably projected in the Wisconsin Transverse Mercator
coordinate system WTM83.  You can read about it at
http://www.dnr.state.wi.us/maps/gis/wtm8391.html.  They also have a prj file
there you could download.  It is not the same as regular old UTM NAD83.  I
don't think there is a EPSG number code for WTM83, but I may be wrong.

Tim
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11584290
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mitchelljj98 at gmail.com  Fri Jul 13 14:00:05 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
Message-ID: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>

Hi,

Will increasing the RAM on a server increase the speed of gdalwarp?

If I have a server that currently has 4 gigs of RAM and I increase the RAM
to say 75 gigs will I notice a difference in the speed of processing a 75
gig image via gdalwarp?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070713/61505935/attachment.html
From ed at topozone.com  Fri Jul 13 14:20:26 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the
	speed of gdalwarp?
In-Reply-To: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
Message-ID: <C2BD3AAA.32E41%ed@topozone.com>

John -

It will almost certainly increase the speed.  That?s not at all the same as
saying that it is worth it, or that the speed increase will be significant.

Your disks are the slowest part of the process.  Please describe in detail
both the input and the output disk subsystems you are using for your
gdalwarp process.  Then we can see if that?s the first place to look.

     - Ed

  
-- 
Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed@topozone.com



From: John Mitchell <mitchelljj98@gmail.com>
Date: Fri, 13 Jul 2007 14:00:05 -0400
To: Gdal-Dev <gdal-dev@lists.maptools.org>
Cc: <mitchelljj98@gmail.com>, Mark A Hollis <mahollis@insequenceinc.com>,
<smithpack@gmail.com>
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
of gdalwarp?

Hi,

Will increasing the RAM on a server increase the speed of gdalwarp?

If I have a server that currently has 4 gigs of RAM and I increase the RAM
to say 75 gigs will I notice a difference in the speed of processing a 75
gig image via gdalwarp?

Thanks,

-- 
John J. Mitchell

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070713/00a19a78/attachment.html
From tosborn at sbcglobal.net  Fri Jul 13 15:04:29 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11583972.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
Message-ID: <11584290.post@talk.nabble.com>


OK...this is what's going on.....

I'm pretty sure the image is projected in the Wisconsin Transverse Mercator
coordinate system WTM83.  You can read about it at
http://www.dnr.state.wi.us/maps/gis/wtm8391.html.  They list the parameters
there and an email address you can request a prj file.  WTM83 is not the
same as regular old UTM NAD83.  I don't think there is a EPSG number code
for WTM83, but I may be wrong.  

Here are the parameters for WTM83:

Map Projection Name: Transverse Mercator

Longitude of Central Meridian: -90 degrees West

Scale Factor at Central Meridian: 0.9996

Latitude of Projection Origin: 0 degrees

False Easting: 520,000

False Northing: -4,480,000

Unit: Meter

Using these parameters, your expected lat long for the center of the image
and what gdalinfo reports are very close.

Tim
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11584290
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From tosborn at sbcglobal.net  Fri Jul 13 15:35:06 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11583972.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
Message-ID: <11584290.post@talk.nabble.com>


OK...this is what's going on.....

I'm pretty sure the image is projected in the Wisconsin Transverse Mercator
coordinate system WTM83.  You can read about it at
http://www.dnr.state.wi.us/maps/gis/wtm8391.html.  They list the parameters
there and an email address you can request a prj file.  WTM83 is not the
same as regular old UTM NAD83.  The EPSG number code for WTM83 is 3070.

Here are the parameters for WTM83:

Map Projection Name: Transverse Mercator

Longitude of Central Meridian: -90 degrees West

Scale Factor at Central Meridian: 0.9996

Latitude of Projection Origin: 0 degrees

False Easting: 520,000

False Northing: -4,480,000

Unit: Meter

Using these parameters, your expected lat long for the center of the image
and what gdalinfo reports are very close.

Tim
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11584290
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From tosborn at sbcglobal.net  Fri Jul 13 15:37:01 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11583972.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
Message-ID: <11584290.post@talk.nabble.com>


OK...this is what's going on.....

I'm pretty sure the image is projected in the Wisconsin Transverse Mercator
coordinate system WTM83.  You can read about it at
http://www.dnr.state.wi.us/maps/gis/wtm8391.html.  They list the parameters
there and an email address you can request a prj file.  WTM83 is not the
same as regular old UTM NAD83.  The EPSG number code for WTM83 is 3070 and
the code for WTM83(HARN) is 3071.

Here are the parameters for WTM83:

Map Projection Name: Transverse Mercator

Longitude of Central Meridian: -90 degrees West

Scale Factor at Central Meridian: 0.9996

Latitude of Projection Origin: 0 degrees

False Easting: 520,000

False Northing: -4,480,000

Unit: Meter

Using these parameters, your expected lat long for the center of the image
and what gdalinfo reports are very close.

Tim
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11584290
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Fri Jul 13 16:26:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
In-Reply-To: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
References: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
Message-ID: <4697DFE3.9050101@pobox.com>

John Mitchell wrote:
> Hi,
> 
> Will increasing the RAM on a server increase the speed of gdalwarp?
> 
> If I have a server that currently has 4 gigs of RAM and I increase the 
> RAM to say 75 gigs will I notice a difference in the speed of processing 
> a 75 gig image via gdalwarp?

John,

What commandline options are you using with gdalwarp?  By default
gdalwarp won't take much advantage of your 4GB of existing RAM.

You might want to try setting the -wm flag. For example "-wm 500" will
operate on 500MB chunks at a time which is better than the default.
Increasing the io block cache size may also help.  This can be done
on the command like:

gdalwarp --config GDAL_CACHEMAX 500 -wm 500 ...

This uses 500MB of RAM for read/write caching, and 500MB of RAM for
working buffers during the warp.  Beyond that I'm doubtful more
memory will make a substantial difference.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From johnr at wowway.com  Fri Jul 13 16:35:03 2007
From: johnr at wowway.com (John R.)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11584290.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com>
	<11552519.post@talk.nabble.com>	<4696DBFF.90701@wowway.com>
	<11583972.post@talk.nabble.com> <11584290.post@talk.nabble.com>
Message-ID: <4697E1F7.7030801@wowway.com>

Tim Osborn wrote:
> OK...this is what's going on.....
> 
> I'm pretty sure the image is projected in the Wisconsin Transverse Mercator
> coordinate system WTM83.  You can read about it at
> http://www.dnr.state.wi.us/maps/gis/wtm8391.html.  They list the parameters
> there and an email address you can request a prj file.  WTM83 is not the
> same as regular old UTM NAD83.  The EPSG number code for WTM83 is 3070.
> 
> Here are the parameters for WTM83:

[snip]

Thanks!

I requested the prj file (says it is for ArcGIS).  I had done a quick 
search for the EPSG number but did not find it.  I used the parameters 
to construct this:

  -a_srs '+proj=tmerc +lat_0=0 +lon_0=-90 +x_0=520000 +y_0=-4480000 
+k=0.9996 +ellps=GRS80 +units=m +datum=NAD83 +no_defs'

The results look pretty close.   Thanks again!

I just now tried 3070 and I dot get long and lat listed in gdalinfo output:

Driver: GTiff/GeoTIFF
Size is 10750, 8488
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["NAD83",
         DATUM["unknown",
             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","3070"]]
Origin = (659653.722794383182190,352632.358040164515842)
Pixel Size = (0.329187501713504,-0.329168110366799)
Metadata:
   AREA_OR_POINT=Area
   TIFFTAG_XRESOLUTION=1200
   TIFFTAG_YRESOLUTION=1200
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  659653.723,  352632.358)
Lower Left  (  659653.723,  349838.379)
Upper Right (  663192.488,  352632.358)
Lower Right (  663192.488,  349838.379)
Center      (  661423.106,  351235.369)
Band 1 Block=10750x1 Type=Byte, ColorInterp=Red
Band 2 Block=10750x1 Type=Byte, ColorInterp=Green
Band 3 Block=10750x1 Type=Byte, ColorInterp=Blue

From johnr at wowway.com  Fri Jul 13 16:49:44 2007
From: johnr at wowway.com (John R.)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11584290.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com>
	<11552519.post@talk.nabble.com>	<4696DBFF.90701@wowway.com>
	<11583972.post@talk.nabble.com> <11584290.post@talk.nabble.com>
Message-ID: <4697E568.30103@wowway.com>

Tim Osborn wrote:
> OK...this is what's going on.....

[snip]

> They list the parameters
> there and an email address you can request a prj file.  WTM83 is not the
> same as regular old UTM NAD83.  The EPSG number code for WTM83 is 3070.

[snip]

They sent me the prj file and I used that as an argument to -a_srs 
(cool!).  Results for extents and center matched what my hand built 
-a_srs output.

I am not sure if it is OK to post the prj file here as they provide it 
on request.

Things are still not 100%, but it may not be because of the coordinates 
in the tif.  I have asked the provider to provide me lat/long for the 
extents in order for me to verify that side of things.

Thanks,

John

From warmerdam at pobox.com  Fri Jul 13 21:12:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: SoC project status
In-Reply-To: <4697EB6A.2050709@xpam.de>
References: <469775B4.4020506@mapgears.com> <4697EB6A.2050709@xpam.de>
Message-ID: <469822E8.6010002@pobox.com>

Adam Nowacki wrote:
> 
> http://sydney.freeearthfoundation.com/wmsdriver.pdf
> 
> but I'm still adding things to it.

Adam,

As mentioned earlier, I'd like to see the design living in the GDAL Trac
Wiki.  Design review of the driver ought to take place on gdal-dev.

I think it would make sense to use distinct driver implementations for
the tile based datasources (TMS, Worldwind, etc) and WMS.  For the WMS
driver it makes sense to override IRasterIO() and fetch the exact
requested region at the requested resolution.

But for fixed tile based data sources, I think you should just implement
the IReadBlock() interface and leave it up to the normal GDAL blocking
mechanism to handle mosaicing, etc.

As mentioned earlier, I don't think the background thread/curl/adviseread
stuff should be done in the first pass.  So please plan initially
on a single threaded approach with that as an optional development
once the basics are all working.

Lastly, I try not to use std::string in GDAL, but instead to use CPLString
which is derived from std::string.

I quite excited about supporting so many different datasources - it hadn't
really sunk in with me that you were going to do more than just WMS!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Sat Jul 14 04:15:46 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] [ANNOUNCE]: Libtiff 4.0.0alpha released
Message-ID: <20070714081546.GB20272@ak4719.spb.edu>

Hello, folks,

We are glad to present a snapshot of the new libtiff branch 4.x. This is
the first libtiff release supporting BigTIFF files. Significant efforts
were made to keep source compatibility, so in most cases you just need
to rebuild your application to get read support for BigTIFF.

As usual sources available from our FTP site:

 ftp://ftp.remotesensing.org/pub/libtiff/tiff-4.0.0alpha.tar.gz
 ftp://ftp.remotesensing.org/pub/libtiff/tiff-4.0.0alpha.zip

Release notes:

 http://www.remotesensing.org/libtiff/v4.0.0.html

This release contains all fixes and features added in 3.9.0 and adds
BigTIFF support. There will be more new features in the future.

Release is marked as alpha, because it was not widely tested and we have
a few known problems. tiffset utility will not work and overview stuff
in contrib/addtiffo will not work either. Please, do not report these
particular bugs, it will be fixed ASAP.

Joris Van Damme should be credited for this important upgrade and thanks
to sponsors who supported his work.

NOTE FOR GDAL USERS: latest GDAL snapshot from the SVN trunk can be
rebuilt with this new library and BigTIFF support will be immediately
available. GDAL will automatically create BigTIFF if uncompressed image
size exceeds 4GiB. You can force BigTIFF creation even for smaller files
using BIGTIFF=YES driver option. Overview support does not work at the
moment, though.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517


From michael.timo.welsch at gmx.de  Sat Jul 14 06:03:01 2007
From: michael.timo.welsch at gmx.de (Michael84)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Distinguish between georeferenced images and height
	fields
Message-ID: <11592537.post@talk.nabble.com>


Hello,

is there any possibility to distinguish between georeferenced images and
height fields (both geoTiffs) ?

Thanks, Michael
-- 
View this message in context: http://www.nabble.com/Distinguish-between-georeferenced-images-and-height-fields-tf4078587.html#a11592537
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Sat Jul 14 10:28:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Distinguish between georeferenced images and height
	fields
In-Reply-To: <11592537.post@talk.nabble.com>
References: <11592537.post@talk.nabble.com>
Message-ID: <4698DD89.5050907@pobox.com>

Michael84 wrote:
> Hello,
> 
> is there any possibility to distinguish between georeferenced images and
> height fields (both geoTiffs) ?

Michael,

There is no reliable way to distinguish.

But there are a number of clues that a file isn't a height field:
  o more than one sample (band).
  o Data type is not float32 or int16.

But, for instance, gdal generates 16bit elevation geotiffs exactly the
same way it generates 16bit greyscale image geotiffs.  In fact, GDAL doesn't
for the most part know if an image is a height field.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From michael.timo.welsch at gmx.de  Sun Jul 15 02:23:46 2007
From: michael.timo.welsch at gmx.de (Michael84)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <4697E1F7.7030801@wowway.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
	<11584290.post@talk.nabble.com> <4697E1F7.7030801@wowway.com>
Message-ID: <11600033.post@talk.nabble.com>


You use the wrong command line tool...
You should use gdal_warp: "Warp an image into a new coordinate system"

Define the origin cs by -s_srs ... and the resulting cs by -t_srs (
http://www.gdal.org/gdalwarp.html )



John R. wrote:
> 
> Tim Osborn wrote:
>> OK...this is what's going on.....
>> 
>> I'm pretty sure the image is projected in the Wisconsin Transverse
>> Mercator
>> coordinate system WTM83.  You can read about it at
>> http://www.dnr.state.wi.us/maps/gis/wtm8391.html.  They list the
>> parameters
>> there and an email address you can request a prj file.  WTM83 is not the
>> same as regular old UTM NAD83.  The EPSG number code for WTM83 is 3070.
>> 
>> Here are the parameters for WTM83:
> 
> [snip]
> 
> Thanks!
> 
> I requested the prj file (says it is for ArcGIS).  I had done a quick 
> search for the EPSG number but did not find it.  I used the parameters 
> to construct this:
> 
>   -a_srs '+proj=tmerc +lat_0=0 +lon_0=-90 +x_0=520000 +y_0=-4480000 
> +k=0.9996 +ellps=GRS80 +units=m +datum=NAD83 +no_defs'
> 
> The results look pretty close.   Thanks again!
> 
> I just now tried 3070 and I dot get long and lat listed in gdalinfo
> output:
> 
> Driver: GTiff/GeoTIFF
> Size is 10750, 8488
> Coordinate System is:
> PROJCS["unnamed",
>      GEOGCS["NAD83",
>          DATUM["unknown",
>              SPHEROID["unretrievable - using
> WGS84",6378137,298.257223563]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","3070"]]
> Origin = (659653.722794383182190,352632.358040164515842)
> Pixel Size = (0.329187501713504,-0.329168110366799)
> Metadata:
>    AREA_OR_POINT=Area
>    TIFFTAG_XRESOLUTION=1200
>    TIFFTAG_YRESOLUTION=1200
>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Corner Coordinates:
> Upper Left  (  659653.723,  352632.358)
> Lower Left  (  659653.723,  349838.379)
> Upper Right (  663192.488,  352632.358)
> Lower Right (  663192.488,  349838.379)
> Center      (  661423.106,  351235.369)
> Band 1 Block=10750x1 Type=Byte, ColorInterp=Red
> Band 2 Block=10750x1 Type=Byte, ColorInterp=Green
> Band 3 Block=10750x1 Type=Byte, ColorInterp=Blue
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11600033
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From yjacolin at free.fr  Sun Jul 15 13:46:54 2007
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Typo error
Message-ID: <200707151946.54969.yjacolin@free.fr>

Hi,

There is a typo error in http://www.gdal.org/frmt_various.html#PNG
"Georeferencing .wld files are written if option WORLFFILE setted. All pixel 
types other than 16bit unsigned will be written as eight bit."

WORLFFILE -> WORLDFILE

Regards,

Y.
-- 
Yves Jacolin
-------------
http://yjacolin.gloobe.org
http://softlibre.gloobe.org

From tosborn at sbcglobal.net  Sun Jul 15 21:22:51 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11600033.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
	<11584290.post@talk.nabble.com> <4697E1F7.7030801@wowway.com>
	<11600033.post@talk.nabble.com>
Message-ID: <11607889.post@talk.nabble.com>




You use the wrong command line tool...
You should use gdal_warp: "Warp an image into a new coordinate system"

Define the origin cs by -s_srs ... and the resulting cs by -t_srs (
http://www.gdal.org/gdalwarp.html )




He wasn't trying to warp the image from one coordinate system to another. 
He was trying to find the correct coordinate system for the image he had,
which contained georeferenced bounds but no projection information. 
Gdal_translate was the correct utility to use to assign the srs.
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11607889
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From tosborn at sbcglobal.net  Sun Jul 15 21:24:25 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdal_translate Basic Usage / UTM to latlong
In-Reply-To: <11600033.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
	<11584290.post@talk.nabble.com> <4697E1F7.7030801@wowway.com>
	<11600033.post@talk.nabble.com>
Message-ID: <11607889.post@talk.nabble.com>



>You use the wrong command line tool...
>You should use gdal_warp: "Warp an image into a new coordinate system"
>Define the origin cs by -s_srs ... and the resulting cs by -t_srs (
http://www.gdal.org/gdalwarp.html )


He wasn't trying to warp the image from one coordinate system to another. 
He was trying to find the correct coordinate system for the image he had,
which contained georeferenced bounds but no projection information. 
Gdal_translate was the correct utility to use to assign the srs.
-- 
View this message in context: http://www.nabble.com/gdal_translate-Basic-Usage---UTM-to-latlong-tf4065198.html#a11607889
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From rayg at daylongraphics.com  Mon Jul 16 01:20:14 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Leveller 2.6 released
In-Reply-To: <11607889.post@talk.nabble.com>
References: <46955F6B.7060706@wowway.com> <11552519.post@talk.nabble.com>
	<4696DBFF.90701@wowway.com> <11583972.post@talk.nabble.com>
	<11584290.post@talk.nabble.com> <4697E1F7.7030801@wowway.com>
	<11600033.post@talk.nabble.com> <11607889.post@talk.nabble.com>
Message-ID: <469B000E.8050006@daylongraphics.com>

The Daylon Leveller 2.6 terrain/heightfield modeler has been officially 
released. I'd like to thank Frank and everyone else involved with 
GDAL/OGR and its related sublibraries; the integration was not without 
its challenges but in the long run, it's a good development model and I 
look forward to seeing where things can go from here. Yesterday, 
heightfield modeling; today, true terrain modeling.


Ray Gardener
Daylon Graphics Ltd.
http://www.daylongraphics.com

From hulst at argoss.nl  Mon Jul 16 02:24:27 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <C8085FAD5A0F274187122B8E2550DA1D03D525@extas4-hba.tas.csiro.au>
References: <C8085FAD5A0F274187122B8E2550DA1D03D525@extas4-hba.tas.csiro.au>
Message-ID: <200707160824.27730.hulst@argoss.nl>

Hi Paavo,

sorry I didn't respond earlier, but I had a small vacation.

On Friday 06 July 2007 04:47:12 Paavo.Jumppanen@csiro.au wrote:
> By those conventions this driver will pick identlen as X and time as Y!
> Clearly, I won't get a meaningful map out of it with the standard
> driver.
I can't see why. This is per variable base and it states that time goes before 
level and level before y and x. Your data (and virtually all modelled data) 
follows that convention. One of my variablesis:

short meridional_wind_speed(time, latitude, longitude) ;

and that shows perfectly in mapserver (in grayscale). It should also work for 
your sea surface temperature.

Sander



From nicholas.g.lawrence at mainroads.qld.gov.au  Mon Jul 16 02:32:45 2007
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: [MI-L] constructing a .tab file for an ecw file
In-Reply-To: <001901c7c650$23f91c00$4101a8c0@4CastleHill>
Message-ID: <OF7CE63DB1.71EBB8D9-ON4A25731A.002306F1-4A25731A.0023F271@transport.qld.gov.au>

> > Nick Lawrence

> > I am writing a mapbasic program that, amongst other things, would
> > construct
> > a .tab file for an ecw image file.
> >
> > Is there any way, using mapbasic, to interrogate an ecw file to extract
> > such information as datum/projection and bounding co-ordinates?


> "Tony Pilkington"

> This may help. As you can see it is very rough and ready code.

Thanks, it does seem to work.

I would like to clarify the ByteOrder clauses. The first time
the file is read the byteorder is HIGHLOW, the next time it
is LOWHIGH.

(in the code you sent me, the second byteorder statement is
commented out, but I've tested it explictly both ways).

Now, I always thought that a file had to be of one byteorder
all the way through. Am I wrong? Is it possible for byteorder
to change within a file?

Regards,
Nick Lawrence


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************


From dlunar29 at yahoo.es  Mon Jul 16 03:21:56 2007
From: dlunar29 at yahoo.es (Daniel Luna)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Error opening tiff B/N (1 band) under WinCE with GDAL
	1.4.0
Message-ID: <663758.43447.qm@web23105.mail.ird.yahoo.com>

Has anybody problems opening tiff B/N (1 band) under WinCE with GDAL 1.4.0? 
  I've compiled GDAL for Windows, Linux and Windows Mobile 2005 and POcket PC 2003 
  Under Windows and Linux Platforms i have no problem using tiffs F4 B/N, Packbits 1 band and depth = 8, Packbits 3 bands and depth = 8, but compilation under Windows Mobile 5 and Pocket PC 2003 give me error opening tiffs F4 B/N with the same tiff file that is opened under Windows platform.
  Has anybody the same problem? 
  Thanks in advance
   
   

       
---------------------------------

S? un Mejor Amante del Cine
?Quieres saber c?mo? ?Deja que otras personas te ayuden!.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070716/bf399520/attachment.html
From mbp at geomtech.com  Mon Jul 16 12:23:16 2007
From: mbp at geomtech.com (Mark Phillips)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] trouble with "gdal_translate -a_nodata" for Erdas
	Imagine output
Message-ID: <64df04ba0707160923w3e87b8c0g46974e44b9e2fd50@mail.gmail.com>

Hi.  I'm using FWTools-1.3.4 on Linux, and I'm having trouble adding a
NoData file to an Erdas Imagine file with gdal_translate.  It works
fine for GeoTiff.  Am I doing something wrong?  Does Erdas Imagine
support NoData values?  Here's a session showing what I'm doing:

> mbp@laurel:~/LIDAR$ gdalinfo src.img
> Driver: HFA/Erdas Imagine Images (.img)
> Files: src.img
> Size is 1500, 1500
> ...
> Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>   Description = Layer_1
>   Metadata:
>     LAYER_TYPE=athematic
>
> mbp@laurel:~/LIDAR$ gdal_translate -a_nodata -9999 -of HFA src.img dst.img
> Input file size is 1500, 1500
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> mbp@laurel:~/LIDAR$ gdalinfo dst.img
> Driver: HFA/Erdas Imagine Images (.img)
> Files: dst.img
> Size is 1500, 1500
> ...
> Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>   Description = Layer_1
>   Metadata:
>     LAYER_TYPE=athematic
>
> mbp@laurel:~/LIDAR$ gdal_translate -a_nodata -9999 src.img dst.tif
> Input file size is 1500, 1500
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> mbp@laurel:~/LIDAR$ gdalinfo dst.tif
> Driver: GTiff/GeoTIFF
> Files: dst.tif
> Size is 1500, 1500
> ...
> Band 1 Block=1500x1 Type=Float32, ColorInterp=Gray
>   NoData Value=-9999
>   Metadata:
>     LAYER_TYPE=athematic

Thanks in advance,

--Mark


-- 
Mark Phillips
Geometry Technologies LLC
mbp@geomtech.com
828-628-0489

From nowak at xpam.de  Mon Jul 16 12:34:31 2007
From: nowak at xpam.de (Adam Nowacki)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: SoC project status
In-Reply-To: <469822E8.6010002@pobox.com>
References: <469775B4.4020506@mapgears.com> <4697EB6A.2050709@xpam.de>
	<469822E8.6010002@pobox.com>
Message-ID: <469B9E17.4020800@xpam.de>

Frank Warmerdam wrote:
> As mentioned earlier, I'd like to see the design living in the GDAL Trac
> Wiki.  Design review of the driver ought to take place on gdal-dev.

http://trac.osgeo.org/gdal/wiki/SoCWMSDriver

but I don't really like the way editing works there, It's all same 
looking text.
Can we get C++ syntax coloring ? 
http://trac.osgeo.org/gdal/wiki/TracSyntaxColoring

> I think it would make sense to use distinct driver implementations for
> the tile based datasources (TMS, Worldwind, etc) and WMS.  For the WMS
> driver it makes sense to override IRasterIO() and fetch the exact
> requested region at the requested resolution.
> But for fixed tile based data sources, I think you should just implement
> the IReadBlock() interface and leave it up to the normal GDAL blocking
> mechanism to handle mosaicing, etc.

For base image it may be fine as the alignment required is only block 
size, usually 256x256 to 512x512. However, if you add overviews the 
alignment requirement grows by 2^n where n is number of overviews. For 
example to have all overviews in global 15 meter / pixel Landsat tileset 
the data window would have to be 2`700`000 x 1`300`000 pixels starting 
at (-180, 90). That big image may be a problem for some poorly coded 
applications.

Another thing is serial nature of block based IO. Only one image could 
be downloaded at same time (unless some clever prefetching is 
implemented). A bigger request to RasterIO can be serviced using 
parallel http connections and/or pipelining making it several times faster.

> As mentioned earlier, I don't think the background thread/curl/adviseread
> stuff should be done in the first pass.  So please plan initially
> on a single threaded approach with that as an optional development
> once the basics are all working.

Background thread / AdviseRead, I can forget it for a while ... but 
CURL, do you mean that I should not use CURL in the driver ? WCS driver 
already does so why couldn't WMS ?

> Lastly, I try not to use std::string in GDAL, but instead to use CPLString
> which is derived from std::string.

I know, it's just a habit of using std::string. I can mass rename it to 
CPLString.

> I quite excited about supporting so many different datasources - it hadn't
> really sunk in with me that you were going to do more than just WMS!

They all are fairly similar. The only real differences are the URLs 
hence the short mini-drivers.

From warmerdam at pobox.com  Mon Jul 16 13:28:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: SoC project status
In-Reply-To: <469B9E17.4020800@xpam.de>
References: <469775B4.4020506@mapgears.com> <4697EB6A.2050709@xpam.de>
	<469822E8.6010002@pobox.com> <469B9E17.4020800@xpam.de>
Message-ID: <469BAAAF.1070302@pobox.com>

Adam Nowacki wrote:
>
> but I don't really like the way editing works there, It's all same 
> looking text.
> Can we get C++ syntax coloring ? 
> http://trac.osgeo.org/gdal/wiki/TracSyntaxColoring

Adam,

I'll look into the syntax coloring.  Could you file a ticket against
component "SAC" in the OSGeo trac instance about this?

   http://trac.osgeo.org/osgeo/

>> I think it would make sense to use distinct driver implementations for
>> the tile based datasources (TMS, Worldwind, etc) and WMS.  For the WMS
>> driver it makes sense to override IRasterIO() and fetch the exact
>> requested region at the requested resolution.
>> But for fixed tile based data sources, I think you should just implement
>> the IReadBlock() interface and leave it up to the normal GDAL blocking
>> mechanism to handle mosaicing, etc.
> 
> For base image it may be fine as the alignment required is only block 
> size, usually 256x256 to 512x512. However, if you add overviews the 
> alignment requirement grows by 2^n where n is number of overviews. For 
> example to have all overviews in global 15 meter / pixel Landsat tileset 
> the data window would have to be 2`700`000 x 1`300`000 pixels starting 
> at (-180, 90). That big image may be a problem for some poorly coded 
> applications.

I'm not sure I understand.  When you talk about the "base image", do you
mean the highest resolution (biggest image) or the top of the overview
stack?  How does block oriented access make the fact that the full
resolution image is big any harder?

> Another thing is serial nature of block based IO. Only one image could 
> be downloaded at same time (unless some clever prefetching is 
> implemented). A bigger request to RasterIO can be serviced using 
> parallel http connections and/or pipelining making it several times faster.

That's an interesting point.  I can see there would be a substantial
benefit to fetching a bunch of tiles in parallel needed for a given
request region.

>> As mentioned earlier, I don't think the background thread/curl/adviseread
>> stuff should be done in the first pass.  So please plan initially
>> on a single threaded approach with that as an optional development
>> once the basics are all working.
> 
> Background thread / AdviseRead, I can forget it for a while ... but 
> CURL, do you mean that I should not use CURL in the driver ? WCS driver 
> already does so why couldn't WMS ?

I didn't mean not too use curl.  I meant to not attempt to do it
in a distinct thread or threads.  Absolutely, do use curl.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From michael.timo.welsch at gmx.de  Mon Jul 16 13:58:05 2007
From: michael.timo.welsch at gmx.de (Michael84)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdalwarp: target image extents are recognised wrong
Message-ID: <11627232.post@talk.nabble.com>


Hello,

I'm using gdalwarp to warp an image of 15862P x 19548L from UTM to Lat/Long.

gdalwarp -s_srs "+proj=UTM +zone=32 +datum=WGS84" -t_srs "+proj=latlong
+datum=WGS84" utm.tif latlong.tif

Gdalwarp then creates an image of 20491P x 15138L, instead of 15862P x
19548L or something with the same apect ratio!!! What could be the reason
for it ?

I know that providing the target size is one solution to this problem, but
it is not quite nice...
-- 
View this message in context: http://www.nabble.com/gdalwarp%3A-target-image-extents-are-recognised-wrong-tf4090047.html#a11627232
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Mon Jul 16 14:42:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdalwarp: target image extents are recognised wrong
In-Reply-To: <11627232.post@talk.nabble.com>
References: <11627232.post@talk.nabble.com>
Message-ID: <469BBC02.7040801@pobox.com>

Michael84 wrote:
> Hello,
> 
> I'm using gdalwarp to warp an image of 15862P x 19548L from UTM to Lat/Long.
> 
> gdalwarp -s_srs "+proj=UTM +zone=32 +datum=WGS84" -t_srs "+proj=latlong
> +datum=WGS84" utm.tif latlong.tif
> 
> Gdalwarp then creates an image of 20491P x 15138L, instead of 15862P x
> 19548L or something with the same apect ratio!!! What could be the reason
> for it ?
> 
> I know that providing the target size is one solution to this problem, but
> it is not quite nice...

Michael,

If the region is large, my guess would be that the aspect ratio of your
region is quite different in lat/long (ie. Plate Carree) than it is in
UTM.  Even a small region relatively near the pole can exhibit substantial
changes in aspect ratio in such a transformation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ben at vterrain.org  Tue Jul 17 05:02:11 2007
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Problem importing Arc Binary Grid data
In-Reply-To: <4696536D.9040404@pobox.com>
Message-ID: <031601c7c851$2a21e8c0$6601a8c0@DellWork>

> From: Frank Warmerdam
> Sent: Thursday, July 12, 2007 6:15 AM
> 
> Decarlo, Thomas R. (LARC-B702)[NCI INFORMATION SYSTEMS] wrote:
> > I've been given a directory full of DEM data that I'm supposed to 
> > import for use in an osgdem terrain model build.
> >
> > 10/26/2006  11:21 AM        15,135,552 tnod.adf
> > 10/26/2006  11:21 AM        10,090,416 tnxy.adf
> 
> Thom,
> I think this looks more like an arc/info binary vector 
> coverage ... likely specifically a TIN.

It's definitely an Arc TIN.

If you want to read it, Arc TIN is supported in the latest VTP release.  You
could use VTBuilder (the standalone app for windows is downloadable from
http://vterrain.org/Doc/VTBuilder/overview.html) to read your TIN, supply
the CRS, resample/export it to anything GDAL will read (such as Arc Ascii
Grid), then read that into OSG.

Or you could just visualize it with the VTP software instead of going all
the way down into low-level OSG. ;)

-Ben


From michael.timo.welsch at gmx.de  Tue Jul 17 12:29:56 2007
From: michael.timo.welsch at gmx.de (Michael84)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] gdalwarp: target image extents are recognised wrong
In-Reply-To: <469BBC02.7040801@pobox.com>
References: <11627232.post@talk.nabble.com> <469BBC02.7040801@pobox.com>
Message-ID: <11652994.post@talk.nabble.com>


The region is about 80 km? and has the following coords:

UTM Zone 32:
UpperLeft:   482100 5887000
LowerRight:  490031  5877226

Should be the following in Lat/Long:
UpperLeft:    8? 43' 56.847'' E	53? 7' 55.587'' N
LowerRight:  8? 51' 4.683'' E		53? 2' 40.034'' N

Does this match your thoughts?


Frank Warmerdam-2 wrote:
> 
> Michael84 wrote:
>> Hello,
>> 
>> I'm using gdalwarp to warp an image of 15862P x 19548L from UTM to
>> Lat/Long.
>> 
>> gdalwarp -s_srs "+proj=UTM +zone=32 +datum=WGS84" -t_srs "+proj=latlong
>> +datum=WGS84" utm.tif latlong.tif
>> 
>> Gdalwarp then creates an image of 20491P x 15138L, instead of 15862P x
>> 19548L or something with the same apect ratio!!! What could be the reason
>> for it ?
>> 
>> I know that providing the target size is one solution to this problem,
>> but
>> it is not quite nice...
> 
> Michael,
> 
> If the region is large, my guess would be that the aspect ratio of your
> region is quite different in lat/long (ie. Plate Carree) than it is in
> UTM.  Even a small region relatively near the pole can exhibit substantial
> changes in aspect ratio in such a transformation.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/gdalwarp%3A-target-image-extents-are-recognised-wrong-tf4090047.html#a11652994
Sent from the GDAL - Dev mailing list archive at Nabble.com.



From jmp at geosys.com  Tue Jul 17 12:54:41 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] OGR Performance Rasterize Contains Overlaps
In-Reply-To: <200707160824.27730.hulst@argoss.nl>
Message-ID: <000001c7c893$2b5050a0$2201a8c0@pcjmp>


Hi,
	
	I would like to get a matrix like with gdal_rasterize in c#, but
with the difference between pixels that are on polygon boundaries and pixels
that are completely inside polygon. It works with the following code but
it's very slow.

Thanks for your help.
Regards.

public void test()
{
	int [, ] mat = new int[width, height];
	Geometry geometry = Geometry.CreateFromWkt("...");

	//Browse each pixel of a raster
	for (i = 0, x = XUL; i < width; x += pixelsizeX, i++)	
      {
  	  for (j = 0, y = YUL; j < height; y += pixelsizeY, j++)
        {
		//x, y are the upper left corner of pixel
		double x1, y1, x2, y2, x3, y3, x4, y4;

		x1 = x;
		y1 = y;

		x2 = x1 + pixelsizeX; 
		y2 = y1;

		x3 = x1 + pixelsizeX; 
		y3 = y1 + pixelsizeY;

		x4 = x1; 
		y4 = y1 + pixelsizeY;

		Geometry geompixel =
Geometry.CreateFromWkt(string.Format("POLYGON(({0} {1}, {2} {3}, {4} {5},
{6} {7}, {0} {1}))", x1, y1, x2, y2, x3, y3, x4, y4));

		//get if pixel is overlap, contains or none by polygon
		if (geometry.Contains(geompixel))
			mat[i, j] = 2;	
		else if (geometry.Overlaps(geompixel))
			mat[i, j] = 1;
		else
			mat[i, j] = 0;

		geompixel.Dispose();
        }
	}

	geometry.Dispose();
}

Jean-michel PIERRET - Poste? 376
Tel : +33 (0)5 62 47 80 76
Mail : jmp@geosys.com
GEOSYS SA



From warmerdam at pobox.com  Tue Jul 17 15:16:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
In-Reply-To: <1bcf78d0707171146n3138c44aq45f902cbcfe1537e@mail.gmail.com>
References: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
	<4697DFE3.9050101@pobox.com>
	<1bcf78d0707171146n3138c44aq45f902cbcfe1537e@mail.gmail.com>
Message-ID: <469D1588.1050002@pobox.com>

Christopher Smith wrote:
> I am newcomer to image warping, and was surprised and disappointed at 
> your direction that extra memory likely would be of no benefit to 
> throughput.  You have suggest manipulation of cache size (your example 
> parameter list including the token "GDAL_CACHEMAX").  You also suggest 
> the adjustment of the size of "working buffers", which I inferred was 
> accomplished by the "-wm 500" argument and value.  Your "operate on 
> 500MB chunks at a time which is better than the default" certainly makes 
> sense.
> 
> My confusion is this:
> Reading the "gdalwarp" documentation  
> (http://www.gdal.org/gdalwarp.html), the "-wm" is advertised to direct 
> the caching size rather than the "operating block" size.  The "GDAL Warp 
> API Tutorial" documents a "GDALWarpOptions" object with a 
> "dfWarpMemoryLimit" attribute allowing the setting of "maximum amount of 
> memory to be used by the GDALWarpOperation 
> <http://www.gdal.org/classGDALWarpOperation.html> when selecting a size 
> of image chunk to operate on".  This gives rise to hope that with 
> computer populated with a large amount of RAM, I might set a very high 
> block size (not allowing block size + cache size + GDAL code segment(s) 
> size to exceed physical memory limit, of course), and improve performance.
> 
> My hopeful suspicions conflict with what you have written.  Further, 
> your example parameter list seems to address cache twice (though 
> admittedly I have not seen "GDAL_CACHEMAX" in written documentation) and 
> block size not at all.  Have I misunderstood something (or many things!)?

Chris,

I must admit my explanation of the two parameters was not all that
illuminating.

The GDAL_CACHEMAX affects the amount of space reserved for the low
level io buffers.  When blocks are read from disk, or written to disk,
they are cached in a global block cache by the GDALRasterBlock class.
Once this cache exceeds GDAL_CACHEMAX old blocks are flushed from the
cache.

You can think of this as primarily an IO cache, and it mostly benefits
you when you might need to read or write file blocks more than once.
This could occur, for instance, in a scanline oriented input file which
is processed in multiple chunks (horizontally) by gdalwarp.

The -wm flag affects the warping algorithm.   The warper will total up
the memory required to hold the input and output image arrays and any
auxilary masking arrays and if they are larger than the "warp memory"
allowed it will subdivide the chunk into smaller chunks and try again.

If the -wm value is very small there is some extra overhead in doing many
small chunks so setting it larger is better but it is a matter of
diminishing returns.

Overall, there is only so much more memory can do for you.

To get a better sense of how things are working, you might want to
try running in debug mode.  For instance:

   gdalwarp --debug on abc.tif def.tif

When things shut down you may see messages like:

   GDAL: 224 block reads on 32 block band 1 of utm.tif.

In this case it is saying that band 1 of utm.tif has 32 blocks, but
that 224 block reads were done, implying that lots of data was
having to be re-read, presumably because of a limited io cache.

You will also see messages like:

GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,0,512x512 Dst=0,0,512x512

The Src/Dst windows show you the "chunk size" being used.  In this
case my whole image which is very small.  If you find things are being
broken into a lot of chunks increasing -wm may help somewhat.

But far more important than memory are ensuring you are going through
an optimized path in the warper.  If you ever see it reporting
GDALWarpKernel()::GWKGeneralCase() you know things will be relatively
slow.  Basically, the fastest situations are nearest neighbour resampling
on 8bit data with no nodata or alpha masking in effect.

You also might want to check CPU usage while gdalwarp is running.  If it is
substantially less than 100% then you know things are IO bound.  Otherwise
they are CPU bound.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jul 17 15:40:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
In-Reply-To: <1bcf78d0707171221w9811cb8l52f26aff4dee9d42@mail.gmail.com>
References: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
	<4697DFE3.9050101@pobox.com>
	<1bcf78d0707171146n3138c44aq45f902cbcfe1537e@mail.gmail.com>
	<469D1588.1050002@pobox.com>
	<1bcf78d0707171221w9811cb8l52f26aff4dee9d42@mail.gmail.com>
Message-ID: <469D1B2E.9020501@pobox.com>

Christopher Smith wrote:
> Wow, thanks for the amazingly thorough and quick response (as opposed to 
> my very first question, posed to the community weeks ago which is still 
> "awaiting moderator approval"!).

Chris,

I'm the moderator and I gave up on sifting through posts-awaiting-approval
many months ago after many years of the drudgery.  The spam-to-signal
ratio is just too terrible.

> You have given us some wonderful tips 
> and I am very grateful.  We are quite sure we are I/O rather than CPU 
> bound and are presently planning our hardware strategy to improve 
> throughput.  I was hoping that we might fine tune the software side of 
> things as well.

I'd note that using a tile input and/or output format can reduce cache
thrashing for warps compared to using a scanline oriented format.  Erdas
Imagine (HFA driver) is a reasonable choice for very large tile oriented
images.  TIFF is good too up to the 4GB limit, but you need to specify
the TILED=YES creation option.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From wollez at gmx.net  Tue Jul 17 15:22:22 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] how to get the right parameters for ECW creation
Message-ID: <f7j4ti$h2f$1@sea.gmane.org>

Hi,

how do I get the right -co parameters for the creation of georeferenced 
ecw files.

The source is a geotiff with the EPSG code 31285. How do I find out 
which -co DATUM=???? and -co PROJ=???? I need to use?

Many thanks
Wolfgang


From jean-claude.repetto at worldonline.fr  Tue Jul 17 17:18:47 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] how to get the right parameters for ECW creation
In-Reply-To: <f7j4ti$h2f$1@sea.gmane.org>
References: <f7j4ti$h2f$1@sea.gmane.org>
Message-ID: <469D3237.8090806@worldonline.fr>

WolfgangZ a ?crit :
> Hi,
> 
> how do I get the right -co parameters for the creation of georeferenced 
> ecw files.
> 
> The source is a geotiff with the EPSG code 31285. How do I find out 
> which -co DATUM=???? and -co PROJ=???? I need to use?
> 
> Many thanks
> Wolfgang

Hi,

Look at the files in the GDT_DATA directory of ERMapper, particularly 
datum.dat and project.dat .

For EPSG 27572, I am using -CO 'DATUM=NTF' -CO 'PROJ=LM2FRANC'

Jean-Claude

From johanes_os at yahoo.com  Wed Jul 18 02:54:26 2007
From: johanes_os at yahoo.com (yohanes setiawan)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] OGRMySQL Connection
Message-ID: <785780.62208.qm@web54507.mail.re2.yahoo.com>

Hi,

I have read the documentation about ogrmysql connection in http://mapserver.gis.umn.edu/docs/howto/ogrmysql, which is define point data.
I want to know if ogrmysql connections also available to define a polygon data?
If the answer is yes, can you give me guidance to do it? is there anything that I must provide, or maybe there's anything that you consider important related with the subject?


best regards,

Yohanes

 Send instant messages to your online friends http://uk.messenger.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070718/216a4ff2/attachment.html
From hulst at argoss.nl  Wed Jul 18 02:59:54 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <C8085FAD5A0F274187122B8E2550DA1D03D529@extas4-hba.tas.csiro.au>
References: <C8085FAD5A0F274187122B8E2550DA1D03D529@extas4-hba.tas.csiro.au>
Message-ID: <200707180859.54647.hulst@argoss.nl>

Hi Paavo,

> Sorry for the delay in responding. I was away on a winter break from
> work.
I was slightly confused about this remark until I realized that your in 
Australia :P

On Wednesday 18 July 2007 07:27:32 you wrote:
> True, the gdal-1.4.2 build correctly interprets the structure to the SST
> file so I could technically use it as is except for the lack of colour
> table and data scaling through the offset and scale parameters in the
> file.
The latter issues are addressed by my hack. I have an updated netcdf.cpp of 
1.4.1. I don't believe there were any changes made to the driver for 1.4.2.

> However, even if that were possible it would be a bad idea to use
> it as is for our mapping application because of speed. The driver as is
> will take all the data in the selected variable and create a raster band
> for each even though I only wish to use one of those raster bands. For
> files with small numbers of time slices this is probably not much of a
> penalty but in my case, we have 365 bands. If I run gdalinfo on my SST
> variable in one of these files it takes over a second for the program to
> complete running. Compare this with my gdal-1.2.6 reading just what I
> want it to, which is almost instantaneous.
For gdalinfo this is true, it loops over all bands. However, from the 
mapserver application and other utilities like gdal_translate a band can be 
chosen so this is not an issue.

I'm setting up a mapserver in our DMZ at the moment that will show a wave 
field that is directly read from a 700Mb netCDF file. Given that is a just a 
virtual server and does not have much resources, it should still perform 
well. My matrix size here is 248x288x157. I don't expect the performance to 
differ much for your file (365x720x181 ?).

I'll send you a personal e-mail with the URL and mapfile when I have 
everything working properly.

Sander







From milo at 3dsite.nl  Wed Jul 18 04:28:45 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] php_ogr? Where can I find it?
Message-ID: <469DCF3D.9030804@3dsite.nl>

Hello list,

I am intending to use the php_ogr extension to php. I found the
documentation, but I cannot find a downloadable binary-archive.

Does anyone know if it is available and where?

Kind regards,
Milo van der Linden

-- 

	

3DSite - Milo van der Linden - CTO
Groenedijk 12, 4441 TJ  Ovezande (Zeeland, Nederland)
milo@3dsite.nl <mailto:milo@3dsite.nl>
http://www.3dsite.nl

Chat with me <skype:milovanderlinden?chat> 	 
 


De informatie verzonden met dit e-mail bericht is uitsluitend bestemd
voor de geadresseerde(n). Gebruik van deze informatie door andere dan de
geadresseerde(n) is verboden. Openbaarmaking, vermenigvuldiging,
verspreiding en/of verstrekking van deze informatie aan derde is niet
toegestaan. Kopi?ren en/of misbruiken van ingesloten afbeeldingen en/of
bestanden is wettelijke verboden en strafbaar. 3DSite staat niet in voor
de juiste en volledige overbrenging van de inhoud van een verzonden
e-mail, noch voor tijdig ontvangst daarvan. Op al onze leveringen,
aanbiedingen en verkopen zijn van toepassing onze Algemene Voorwaarden,
zoals gedeponeerd bij de K.v.K. te Middelburg. 3DSite

-------------- next part --------------
Skipped content of type multipart/related
From ari.jolma at tkk.fi  Wed Jul 18 06:03:55 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] MapInfo layer create failure in the Perl test code
Message-ID: <469DE58B.9080403@tkk.fi>

I notice with the latest sources a failure in MapInfo layer creation: 
RuntimeError SetSpatialRef() can be used only with Write access.'. I 
give a spatial reference object in the creation. It's a bit strange 
error message to come from a layer create since if you can create a 
layer then by default shouldn't you have a write access?

What's the story here?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From dmorissette at mapgears.com  Wed Jul 18 07:02:38 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] MapInfo layer create failure in the Perl test code
In-Reply-To: <469DE58B.9080403@tkk.fi>
References: <469DE58B.9080403@tkk.fi>
Message-ID: <469DF34E.9070608@mapgears.com>

Ari Jolma wrote:
> I notice with the latest sources a failure in MapInfo layer creation: 
> RuntimeError SetSpatialRef() can be used only with Write access.'. I 
> give a spatial reference object in the creation. It's a bit strange 
> error message to come from a layer create since if you can create a 
> layer then by default shouldn't you have a write access?
> 
> What's the story here?
> 

Ari,

Is this error happening using the SVN trunk? And does the same script 
work fine with V1.4.2?

I'm not sure why, but this might be related to a recent set of changes 
in the MITAB driver in trunk. Could you please file a ticket with a copy 
of the script that produces this error and assign it to me? I'll try to 
have a look next time I work on the MITAB driver.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From milo at 3dsite.nl  Wed Jul 18 07:35:14 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] php ogr
Message-ID: <469DFAF2.30501@3dsite.nl>

Hello list,

I downloaded the php_ogr from the maptools website
It lacks a windows 32 dll, the 1.0 dll doesn't work with the php 5.1.6 I
am using.

Is there anyone that did a succesfull windows32 compile? If yes, can I
get it in some way? And will it be available with php 5.1.6?

Kind regards,

Milo van der Linden
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070718/6814e1fb/attachment.html
From Christian.Strobl at dlr.de  Wed Jul 18 08:01:11 2007
From: Christian.Strobl at dlr.de (Christian.Strobl@dlr.de)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] problem building ogdi on suse 10.2
Message-ID: <AC78B6BABBC9A74C95028F87A0EACF799F3E49@exbe04.intra.dlr.de>


hi list,

i have a a problem building ogdi on open suse 10.2
i am following the build instructions on http://ogdi.sourceforge.net/

###############################################################
tar -zvxf ogdi-3.1.5.tar.gz
sudo mv ogdi-3.1.5 /usr/src/
cd /usr/src/ogdi-3.1.5/

TOPDIR=/usr/src/ogdi-3.1.5
export TOPDIR

./configure --prefix=/usr/local/OGDI-3.1.5 \
        --with-zlib \
        --with-proj=/usr/local/PROJ4

LD_LIBRARY_PATH=$TOPDIR/bin/Linux:/usr/local/PROJ4/lib
export LD_LIBRARY_PATH

make
################################################################

but with make install  i get the following error message

makefile:15: /config/common.mak: No such file or directory
make: *** No rule to make target `/config/common.mak'.  Stop.

the file '/config/common.mak' exists

any idea appreciated
thanks and greetings from munich
christian
p.s. the same instructions are working well for ubuntu dapper



From jmckenna at dmsolutions.ca  Wed Jul 18 09:44:07 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] php_ogr? Where can I find it?
In-Reply-To: <469DCF3D.9030804@3dsite.nl>
References: <469DCF3D.9030804@3dsite.nl>
Message-ID: <469E1927.90405@dmsolutions.ca>

Source: http://dl.maptools.org/dl/php_ogr/

Windows build: included in MS4W (also on maptools)


Milo van der Linden wrote:
> Hello list,
> 
> I am intending to use the php_ogr extension to php. I found the 
> documentation, but I cannot find a downloadable binary-archive.
> 
> Does anyone know if it is available and where?
> 
> Kind regards,
> Milo van der Linden
> 
> -- 

-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From jmckenna at dmsolutions.ca  Wed Jul 18 09:47:52 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] php ogr
In-Reply-To: <469DFAF2.30501@3dsite.nl>
References: <469DFAF2.30501@3dsite.nl>
Message-ID: <469E1A08.8000004@dmsolutions.ca>

Yes a successful windows compile exists in MS4W on maptools (look in 
/ms4w/Apache/php/ext/).


Milo van der Linden wrote:
> Hello list,
> 
> I downloaded the php_ogr from the maptools website
> It lacks a windows 32 dll, the 1.0 dll doesn't work with the php 5.1.6 I 
> am using.
> 
> Is there anyone that did a succesfull windows32 compile? If yes, can I 
> get it in some way? And will it be available with php 5.1.6?
> 
> Kind regards,
> 
> Milo van der Linden
> 


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From hulst at argoss.nl  Wed Jul 18 10:27:16 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <200707180859.54647.hulst@argoss.nl>
References: <C8085FAD5A0F274187122B8E2550DA1D03D529@extas4-hba.tas.csiro.au>
	<200707180859.54647.hulst@argoss.nl>
Message-ID: <200707181627.16460.hulst@argoss.nl>

On Wednesday 18 July 2007 08:59:54 A.Th.C. Hulst wrote:
> I'll send you a personal e-mail with the URL and mapfile when I have
> everything working properly.
You can see the speed of the current netcdf driver on 
http://mapserver.argoss.nl. Looks good to me.

It's configured with the map file I enclosed.

Regards,
Sander



-------------- next part --------------
MAP
  EXTENT 0 -78 360 78
  IMAGECOLOR 255 255 255
  IMAGETYPE PNG
  SHAPEPATH "/var/www/mapserver/data/"
  SIZE 1024 768
  STATUS ON
  UNITS DD
  NAME "RASTERTEST"

  OUTPUTFORMAT
    NAME "gif"
    MIMETYPE "image/gif"
    DRIVER "GD/GIF"
    EXTENSION "gif"
    IMAGEMODE "PC256"
    TRANSPARENT FALSE
  END
  OUTPUTFORMAT
    NAME jpeg
    DRIVER "GD/JPEG"
    MIMETYPE "image/jpeg"
    IMAGEMODE RGB
    EXTENSION "jpg"
  END


  PROJECTION
    "init=epsg:4326"
  END

  WEB
    IMAGEPATH "/var/www/mapserver/html/tmp/"
    IMAGEURL "/tmp/"
    LOG "/var/www/mapserver/log/rastertest.log"
      METADATA
        "wms_srs" "EPSG:28992 EPSG:4326 EPSG:32631"
        "wms_onlineresource"  "http://mapserver.argoss.nl/cgi-bin/mapserv?map=gbp_wms.map&"
        "wms_abstract"  "Test raster data"
        "wms_accessconstraints" "none"
        "wms_context_version" "1.1.1"
        "wms_title" "ARGOSS WMS Server"
        "wms_feature_info_mime_type" "text/html"
      END
    QUERYFORMAT text/html
    LEGENDFORMAT text/html
    BROWSEFORMAT text/html
    TEMPLATE "/var/www/mapserver/html/templates/global.html"
  END



 LAYER
    NAME "Hs"
    DATA "netCDF:/var/www/mapserver/data/windwave/ww3_output.nc:sign_wave_height"
    PROCESSING "SCALE=0,7.5"
    PROCESSING "SCALE_BUCKETS=100"
    PROCESSING "BANDS=1"
    TYPE RASTER
    STATUS ON
    OFFSITE 0 0 0
  END



END
From support at satshot.com  Wed Jul 18 11:49:48 2007
From: support at satshot.com (Avi A Blackmore)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Masking portions of a raster outside of a vector boundary
Message-ID: <200707181049.48790.support@satshot.com>

Hi,

	I'm trying to determine the best means of "masking out" the parts of a 
raster image that lie outside of a vector boundary, setting those areas to 
a null value.  Are there any existing GDAL or OGR tools which could be 
used to do this?

	If not, any suggestions for a general algorithm using GDAL/OGR?
-- 
Avi Blackmore
System Administrator/Programmer
Agri ImaGIS Technologies, Inc.


From philippe.suray at market-ip.com  Wed Jul 18 11:39:43 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] c# 'on the fly projection'
Message-ID: <loom.20070718T171525-502@post.gmane.org>

Hello list,

I just start using gdal with c#. My goal is to combine several tiles into one
image and then reproject it. All images are GTiff.

I would like to know if it's possible to create a GTiff without creating a
temporary image on the disk (indeed the signature of the Create() method of the
Driver class requires a file name)? I just want to manipulate GTiff in memory.

Thank for your responses.

Philippe.


From warmerdam at pobox.com  Wed Jul 18 13:24:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] c# 'on the fly projection'
In-Reply-To: <loom.20070718T171525-502@post.gmane.org>
References: <loom.20070718T171525-502@post.gmane.org>
Message-ID: <469E4CD6.1020305@pobox.com>

Suray Ph wrote:
> Hello list,
> 
> I just start using gdal with c#. My goal is to combine several tiles into one
> image and then reproject it. All images are GTiff.
> 
> I would like to know if it's possible to create a GTiff without creating a
> temporary image on the disk (indeed the signature of the Create() method of the
> Driver class requires a file name)? I just want to manipulate GTiff in memory.

Philippe,

If you use a filename like /vsimem/my.tif then the tiff will be created in
memory.  The /vsimem/ prefix is a special one for which file io is handled
specially for most GDAL drivers.

However, it is hard to "get to" this memory geotiff from C# since I don't
believe the VSI*L API is exposed.  So the only thing you are likely to be
able to do is access it in memory as a GDAL dataset.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jul 18 16:10:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Masking portions of a raster outside of a vector
	boundary
In-Reply-To: <200707181049.48790.support@satshot.com>
References: <200707181049.48790.support@satshot.com>
Message-ID: <469E739B.2000407@pobox.com>

Avi A Blackmore wrote:
> Hi,
> 
> 	I'm trying to determine the best means of "masking out" the parts of a 
> raster image that lie outside of a vector boundary, setting those areas to 
> a null value.  Are there any existing GDAL or OGR tools which could be 
> used to do this?
> 
> 	If not, any suggestions for a general algorithm using GDAL/OGR?

Avi,

The gdal_rasterize utility can mask out areas *inside* polygons.  If you can
wrap a "universe polygon" around all your polygons then that would give you
what you want by inverting inside and outside.

I have wanted to be able to do this "mask outside" sort of operation for
a long time, so I have finally added the ability to gdal_rasterize.  It
now (in subversion as of a few minutes ago) has a -i (invert) flag that
will do this for you.  So for instance:

   gdal_rasterize -burn 128 utm.shp -i -l utm out.tif

will mark all areas outside the polygons in utm.shp to a value
of 128 in out.tif.

Keep in mind that "per feature" burn values no longer make sense in this
context.  The code will now will use the burn value associated with the
very first feature when in -i mode.

For those interested, the inverter merges all the geometries into one
geometry collection and then add a universe polygon as shown below.
A use of the much hated OGR C geometry api, and one of the few places
where I use std::vector.

/************************************************************************/
/*                          InvertGeometries()                          */
/************************************************************************/

static void InvertGeometries( GDALDatasetH hDstDS,
                               std::vector<OGRGeometryH> &ahGeometries )

{
     OGRGeometryH hCollection =
         OGR_G_CreateGeometry( wkbGeometryCollection );

/* -------------------------------------------------------------------- */
/*      Create a ring that is a bit outside the raster dataset.         */
/* -------------------------------------------------------------------- */
     OGRGeometryH hUniversePoly, hUniverseRing;
     double adfGeoTransform[6];
     int brx = GDALGetRasterXSize( hDstDS ) + 2;
     int bry = GDALGetRasterYSize( hDstDS ) + 2;

     GDALGetGeoTransform( hDstDS, adfGeoTransform );

     hUniverseRing = OGR_G_CreateGeometry( wkbLinearRing );

     OGR_G_AddPoint_2D(
         hUniverseRing,
         adfGeoTransform[0] + -2*adfGeoTransform[1] + -2*adfGeoTransform[2],
         adfGeoTransform[3] + -2*adfGeoTransform[4] + -2*adfGeoTransform[5] );

     OGR_G_AddPoint_2D(
         hUniverseRing,
         adfGeoTransform[0] + brx*adfGeoTransform[1] + -2*adfGeoTransform[2],
         adfGeoTransform[3] + brx*adfGeoTransform[4] + -2*adfGeoTransform[5] );

     OGR_G_AddPoint_2D(
         hUniverseRing,
         adfGeoTransform[0] + brx*adfGeoTransform[1] + bry*adfGeoTransform[2],
         adfGeoTransform[3] + brx*adfGeoTransform[4] + bry*adfGeoTransform[5] );

     OGR_G_AddPoint_2D(
         hUniverseRing,
         adfGeoTransform[0] + -2*adfGeoTransform[1] + bry*adfGeoTransform[2],
         adfGeoTransform[3] + -2*adfGeoTransform[4] + bry*adfGeoTransform[5] );

     OGR_G_AddPoint_2D(
         hUniverseRing,
         adfGeoTransform[0] + -2*adfGeoTransform[1] + -2*adfGeoTransform[2],
         adfGeoTransform[3] + -2*adfGeoTransform[4] + -2*adfGeoTransform[5] );

     hUniversePoly = OGR_G_CreateGeometry( wkbPolygon );
     OGR_G_AddGeometryDirectly( hUniversePoly, hUniverseRing );

     OGR_G_AddGeometryDirectly( hCollection, hUniversePoly );

/* -------------------------------------------------------------------- */
/*      Add the rest of the geometries into our collection.             */
/* -------------------------------------------------------------------- */
     unsigned int iGeom;

     for( iGeom = 0; iGeom < ahGeometries.size(); iGeom++ )
         OGR_G_AddGeometryDirectly( hCollection, ahGeometries[iGeom] );

     ahGeometries.resize(1);
     ahGeometries[0] = hCollection;
}


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Wed Jul 18 19:04:06 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Layer Equality
Message-ID: <469E9C66.8080001@perkins.net>

Hi,

I'm trying to do something that on the face of it should be fairly 
straightforward, but I can't quite see how to do it in the best way. 
Basically, I have an open OGRLayer, and I'd like to see if this OGRLayer 
is the same as another layer in the same OGRDataSource, which I only 
know by name. Ultimately, if the named layer already exists, I'd like to 
delete it and replace it with the contents of the OGRLayer. Unless, that 
named layer is actually the same layer as the existing OGRLayer, in 
whcih case nothing needs to happen. The question is, how can I check for 
this? I know the index number of the existing OGRLayer, but I'm not sure 
I see how to determine the index number of the named layer to see if 
they are the same. Similarly, I'm not sure how to get the name of the 
existing OGRLayer to use that as a comparison. Any ideas?

Cheers,

Simon


From nowak at xpam.de  Thu Jul 19 03:37:58 2007
From: nowak at xpam.de (Adam Nowacki)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: SoC project status
In-Reply-To: <469BAAAF.1070302@pobox.com>
References: <469775B4.4020506@mapgears.com> <4697EB6A.2050709@xpam.de>
	<469822E8.6010002@pobox.com> <469B9E17.4020800@xpam.de>
	<469BAAAF.1070302@pobox.com>
Message-ID: <469F14D6.6010800@xpam.de>

Frank Warmerdam wrote:
>>> I think it would make sense to use distinct driver implementations for
>>> the tile based datasources (TMS, Worldwind, etc) and WMS.  For the WMS
>>> driver it makes sense to override IRasterIO() and fetch the exact
>>> requested region at the requested resolution.
>>> But for fixed tile based data sources, I think you should just implement
>>> the IReadBlock() interface and leave it up to the normal GDAL blocking
>>> mechanism to handle mosaicing, etc.
>>
>> For base image it may be fine as the alignment required is only block 
>> size, usually 256x256 to 512x512. However, if you add overviews the 
>> alignment requirement grows by 2^n where n is number of overviews. For 
>> example to have all overviews in global 15 meter / pixel Landsat 
>> tileset the data window would have to be 2`700`000 x 1`300`000 pixels 
>> starting at (-180, 90). That big image may be a problem for some 
>> poorly coded applications.
> 
> I'm not sure I understand.  When you talk about the "base image", do you
> mean the highest resolution (biggest image) or the top of the overview
> stack?  How does block oriented access make the fact that the full
> resolution image is big any harder?
> 

Base image - the highest resolution image.
The data window allows you to limit the amount of data visible to GDAL 
in cases where app you're trying to use the data in is unable to handle 
such big images. No overviews could be allowed with block access then, 
or each overview block would have to fetch 4 tiles.


From philippe.suray at market-ip.com  Thu Jul 19 04:19:39 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: c# 'on the fly projection'
References: <loom.20070718T171525-502@post.gmane.org>
	<469E4CD6.1020305@pobox.com>
Message-ID: <loom.20070719T100912-406@post.gmane.org>

Hello Frank,

Thank for your response, i tried your suggestion by using this code:
driver.Create(@"\vsimem\test.tif", ...)
but i got an exception System.ApplicationException: 
TIFFOpen:\vsimem\test.tif: No such file or directory)

Is there any plan to integrate this feature for c#?
Do you have other suggestions?

Thank you

Best Regards,

Philippe



From sy at perkins.net  Thu Jul 19 11:10:49 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] JOB: Senior Software Developer / Scientist - GDAL / OGR
	- C#
Message-ID: <469F7EF9.7090003@perkins.net>

UltraSpectral, Inc. is a small, dynamic, and rapidly growing company 
based in Albuquerque, New Mexico, specializing in software development 
for satellite and aerial imagery analysis.

We are seeking a talented and mathematically inclined software developer 
to join our team, with particular responsibility for leading the 
development of sophisticated software tools for analyzing hyperspectral 
satellite and aerial images.

To be a good candidate for this job, you should be a highly skilled 
programmer, with an up to date knowledge of modern object oriented 
design and programming methodologies. Our primary development language 
is C# on Windows / Visual Studio 2005, so fluency in C# (preferred) or 
Java is required, as well as a a solid knowledge of either C or C++. 
Experience with related Windows technologies such as .NET, Windows 
Forms, and Visual Studio would also be helpful.

Our software uses GDAL / OGR for reading and writing raster and vector 
data sources, so experience developing with either or both of these 
libraries would be very useful.

Much of the software we develop uses novel and sophisticated 
mathematical algorithms, and so strong mathematical skills are 
essential. A good grasp of linear algebra and data modeling / statistics 
would be very useful. Additionally candidates should have the ability to 
adapt and invent efficient algorithms for processing large quantities of 
data.

Experience with image processing methods and algorithms is highly 
desirable. Particularly relevant is experience with remote sensing 
(satellite / aerial) image applications and techniques. Experience with 
GIS (Geographic Information System) tools such as ArcGIS and geospatial 
databases would be very useful.

Importantly, applicants should be "self-starters", who are willing to 
work as part of a small and relatively informal team of other talented 
software developers, with a considerable degree of autonomy. 
UltraSpectral, Inc. practices a modern agile approach to software 
development, which requires that individuals participate in all aspects 
of the software process in an iterative fashion, including requirements 
analysis, design, coding and testing, in a highly collaborative fashion.

Ideally, you should hold a relevant advanced degree in a computer 
science related field, although equivalent experience is also 
acceptable. Salaries and benefits are highly competitive, and the exact 
level will be based on experience and qualifications. We intend to 
attract highly qualified and motivated individuals and are willing to 
reward talent appropriately.

Much of our work is with government agencies, and so the ability to 
obtain a US security clearance, which normally requires US citizenship, 
would be helpful.

UltraSpectral's main office is on the northern edge of Albuquerque, so 
commuting from Santa Fe is feasible. It would also be possible to work 
in Santa Fe for some or most of each week.

There is no specific deadline filling this job. We will begin 
interviewing people in July, and ideally, we would like to fill the job 
by the end of August 2007, but exceptions can be made for exceptional 
candidates.

Given the relatively short preferred hiring timescale, candidates must 
be US citizens or permanent residents, or must have currently active US 
work authorization.

To apply, please send a resume to Dr. Simon Perkins at 
simon.perkins@ultraspectral.com.

More information can be found on UltraSpectral's website can be found at 
www.ultraspectral.com.




From frdcn at hotmail.com  Thu Jul 19 12:46:37 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Question about command line tools in msys
Message-ID: <BAY110-W8A358040543BB64505FC4B2FB0@phx.gbl>

Hi:I have compiled gdal using msys, the command line tools work ok  in msys shell, but when a tried to run them from windows command line the applications do not do anything, no errors, no output from application. Is it possible to run the command line tools in a windows command line when they were built using msys? or there is something wrong with my building process?Best regardsGodofredo Contreras
_________________________________________________________________
Local listings, incredible imagery, and driving directions - all in one place! Find it!
http://maps.live.com/?wip=69&FORM=MGAC01
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070719/3e4d40b4/attachment.html
From warmerdam at pobox.com  Thu Jul 19 12:58:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: c# 'on the fly projection'
In-Reply-To: <loom.20070719T100912-406@post.gmane.org>
References: <loom.20070718T171525-502@post.gmane.org>
	<469E4CD6.1020305@pobox.com>
	<loom.20070719T100912-406@post.gmane.org>
Message-ID: <469F983E.8000402@pobox.com>

Suray Ph wrote:
> Hello Frank,
> 
> Thank for your response, i tried your suggestion by using this code:
> driver.Create(@"\vsimem\test.tif", ...)
> but i got an exception System.ApplicationException: 
> TIFFOpen:\vsimem\test.tif: No such file or directory)
> 
> Is there any plan to integrate this feature for c#?
> Do you have other suggestions?

Philippe,

This feature is not language dependant, it should work find from C#.
However, the path very specifically has to start with /vsimem/.  Even
\vsimem\ will not do even though I realize it is somewhat counter-intuitive
to use unix style path delimeters on windows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul 19 13:06:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Layer Equality
In-Reply-To: <469E9C66.8080001@perkins.net>
References: <469E9C66.8080001@perkins.net>
Message-ID: <469F9A24.2000006@pobox.com>

Simon Perkins wrote:
> Hi,
> 
> I'm trying to do something that on the face of it should be fairly 
> straightforward, but I can't quite see how to do it in the best way. 
> Basically, I have an open OGRLayer, and I'd like to see if this OGRLayer 
> is the same as another layer in the same OGRDataSource, which I only 
> know by name. Ultimately, if the named layer already exists, I'd like to 
> delete it and replace it with the contents of the OGRLayer. Unless, that 
> named layer is actually the same layer as the existing OGRLayer, in 
> whcih case nothing needs to happen. The question is, how can I check for 
> this? I know the index number of the existing OGRLayer, but I'm not sure 
> I see how to determine the index number of the named layer to see if 
> they are the same. Similarly, I'm not sure how to get the name of the 
> existing OGRLayer to use that as a comparison. Any ideas?

Simon,

Somewhat obtusely, the only way to get the name of a layer is to look in
the OGRFeatureDefn associated with it.  So in ogrinfo this is done as:

                 printf( "%d: %s",
                         iLayer+1,
                         poLayer->GetLayerDefn()->GetName() );

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Thu Jul 19 13:21:47 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Layer Equality
In-Reply-To: <469F9A24.2000006@pobox.com>
References: <469E9C66.8080001@perkins.net> <469F9A24.2000006@pobox.com>
Message-ID: <469F9DAB.5000006@perkins.net>

Thanks for that. I wasn't sure whether the FeatureDefn name was 
guaranteed to be the same as the name used by GetLayerByName().

Is there any way of determining the index number of a Layer from the 
OGRLayer?

Cheers,

Simon


Frank Warmerdam wrote:
> Simon Perkins wrote:
>> Hi,
>>
>> I'm trying to do something that on the face of it should be fairly 
>> straightforward, but I can't quite see how to do it in the best way. 
>> Basically, I have an open OGRLayer, and I'd like to see if this 
>> OGRLayer is the same as another layer in the same OGRDataSource, 
>> which I only know by name. Ultimately, if the named layer already 
>> exists, I'd like to delete it and replace it with the contents of the 
>> OGRLayer. Unless, that named layer is actually the same layer as the 
>> existing OGRLayer, in whcih case nothing needs to happen. The 
>> question is, how can I check for this? I know the index number of the 
>> existing OGRLayer, but I'm not sure I see how to determine the index 
>> number of the named layer to see if they are the same. Similarly, I'm 
>> not sure how to get the name of the existing OGRLayer to use that as 
>> a comparison. Any ideas?
>
> Simon,
>
> Somewhat obtusely, the only way to get the name of a layer is to look in
> the OGRFeatureDefn associated with it.  So in ogrinfo this is done as:
>
>                 printf( "%d: %s",
>                         iLayer+1,
>                         poLayer->GetLayerDefn()->GetName() );
>
> Best regards,


From warmerdam at pobox.com  Thu Jul 19 14:30:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Layer Equality
In-Reply-To: <469F9DAB.5000006@perkins.net>
References: <469E9C66.8080001@perkins.net> <469F9A24.2000006@pobox.com>
	<469F9DAB.5000006@perkins.net>
Message-ID: <469FADC7.9050200@pobox.com>

Simon Perkins wrote:
> Thanks for that. I wasn't sure whether the FeatureDefn name was 
> guaranteed to be the same as the name used by GetLayerByName().
> 
> Is there any way of determining the index number of a Layer from the 
> OGRLayer?

Simon,

There is no way to ask a layer for it's index number, no.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From christian.braun at tudor.lu  Thu Jul 19 16:02:56 2007
From: christian.braun at tudor.lu (christian.braun@tudor.lu)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Christian Braun is out of the office.
Message-ID: <OFC0DB1FB5.4CE75D7C-ONC125731D.006E2212-C125731D.006E2212@tudor.lu>


I will be out of the office starting  19.07.2007 and will not return until
24.07.2007.

I will respond to your message when I return.


From eschenbe at psc.edu  Thu Jul 19 16:36:48 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] How to Use gdalwarp to Convert to Simple Lon/Lat?
Message-ID: <469FCB60.8040602@psc.edu>

What are the options for gdalwarp that will produce an image on a simple 
longitude/latitude coordinate system?

The input file, lambert.tif, is a GeoTiff file from the National Atlas using 
the Lambert_Azimuthal_Equal_Area projection. It covers the 48 states.

I'd like the output X pixel coordinate to represent equally-spaced values of 
longitude and Y to represent latitude.

I tried this:

    gdalwarp -t_srs "+proj=ortho +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0"
       lambert.tif ortho.tif

I took the values for "+lat", "+lon", "+x_0" and "+y_0" from the input. 
gdalwarp wouldn't work without them.

This is a huge map so I've looked at only a 4000x3000 piece from the upper-left 
corner. ortho.tif looked the same as lambert.tif. The U.S.-Canadian border was 
curved in both. That doesn't seem right.

"gdalwarp --version" yields "GDAL 1.4.2.0, released 2007/06/27". I'm using a 
Redhat Fedora Core 5 system.

TIA!
Kent

From eschenbe at psc.edu  Thu Jul 19 16:51:43 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] What are georeferenced coordinates?
Message-ID: <469FCEDF.8000609@psc.edu>

What are georeferenced coordinates? I can't find a definition in any of the 
GDAL documents. I would guess they are longitude and latitude.

I'm trying to use the "-projwin" option for gdal_translate with valid longitude 
and latitude. But this always fails saying they are outside the bounds of the 
input image. "-srcwin" works as expected.

"gdal_translate --version" yields "GDAL 1.4.2.0, released 2007/06/27". I'm 
using a Redhat Fedora Core 5 system.

TIA!
Kent

From ealpert at digitalglobe.com  Thu Jul 19 17:06:02 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] What are georeferenced coordinates?
In-Reply-To: <469FCEDF.8000609@psc.edu>
References: <469FCEDF.8000609@psc.edu>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330142ED8C@COMAIL01.digitalglobe.com>



The output of gdalinfo on your source image file as well as your command
line invocation of gdal_translate would be useful in determining your
problem.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kent
Eschenberg
Sent: Thursday, July 19, 2007 2:52 PM
To: GDAL
Subject: [Gdal-dev] What are georeferenced coordinates?

What are georeferenced coordinates? I can't find a definition in any of
the 
GDAL documents. I would guess they are longitude and latitude.

I'm trying to use the "-projwin" option for gdal_translate with valid
longitude 
and latitude. But this always fails saying they are outside the bounds
of the 
input image. "-srcwin" works as expected.

"gdal_translate --version" yields "GDAL 1.4.2.0, released 2007/06/27".
I'm 
using a Redhat Fedora Core 5 system.

TIA!
Kent
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From eschenbe at psc.edu  Thu Jul 19 17:23:00 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] What are georeferenced coordinates?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330142ED8C@COMAIL01.digitalglobe.com>
References: <469FCEDF.8000609@psc.edu>
	<8B319E5A30FF4A48BE7EEAAF609DB2330142ED8C@COMAIL01.digitalglobe.com>
Message-ID: <469FD634.2000500@psc.edu>

Thanks! Here's the command and results:

======
$ gdal_translate -projwin -121 36 -113 31 ./R/relief.tif test.tif
Input file size is 25740, 17280
Computed -srcwin 11313 5194 0 0 from projected window.
-srcwin 11313 5194 0 0 falls outside raster size of 25740x17280
or is otherwise illegal
======

That should be an area covering southern California. I'm supplying the output 
from gdalinfo as an attached file since it is long.

TIA!
kent

Ethan Alpert wrote:
> 
> The output of gdalinfo on your source image file as well as your command
> line invocation of gdal_translate would be useful in determining your
> problem.
> 
> -e
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kent
> Eschenberg
> Sent: Thursday, July 19, 2007 2:52 PM
> To: GDAL
> Subject: [Gdal-dev] What are georeferenced coordinates?
> 
> What are georeferenced coordinates? I can't find a definition in any of
> the 
> GDAL documents. I would guess they are longitude and latitude.
> 
> I'm trying to use the "-projwin" option for gdal_translate with valid
> longitude 
> and latitude. But this always fails saying they are outside the bounds
> of the 
> input image. "-srcwin" works as expected.
> 
> "gdal_translate --version" yields "GDAL 1.4.2.0, released 2007/06/27".
> I'm 
> using a Redhat Fedora Core 5 system.
> 
> TIA!
> Kent
>
-------------- next part --------------
Driver: GTiff/GeoTIFF
Size is 25740, 17280
Coordinate System is:
PROJCS["TIFF 6.0, GeoTIFF Revision 1.0",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010042,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["latitude_of_center",45],
    PARAMETER["longitude_of_center",-100],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-2262900.000000000000000,1038900.000000000000000)
Pixel Size = (200.000000000000000,-200.000000000000000)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_IMAGEDESCRIPTION=USA Lower 48 elevation tints
  TIFFTAG_SOFTWARE=Arc/Info
  TIFFTAG_XRESOLUTION=0.0049999999
  TIFFTAG_YRESOLUTION=0.0049999999
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (-2262900.000, 1038900.000) (132d43'42.07"W, 50d 2'25.05"N)
Lower Left  (-2262900.000,-2417100.000) (121d28'10.03"W, 20d35'58.80"N)
Upper Right ( 2885100.000, 1038900.000) ( 59d31'54.76"W, 47d31'42.21"N)
Lower Right ( 2885100.000,-2417100.000) ( 72d47'14.96"W, 19d 4'10.39"N)
Center      (  311100.000, -689100.000) ( 96d25'32.42"W, 38d43'59.57"N)
Band 1 Block=25740x1 Type=Byte, ColorInterp=Red
Band 2 Block=25740x1 Type=Byte, ColorInterp=Green
Band 3 Block=25740x1 Type=Byte, ColorInterp=Blue
From warmerdam at pobox.com  Thu Jul 19 17:39:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] What are georeferenced coordinates?
In-Reply-To: <469FCEDF.8000609@psc.edu>
References: <469FCEDF.8000609@psc.edu>
Message-ID: <469FDA04.2030902@pobox.com>

Kent Eschenberg wrote:
> What are georeferenced coordinates? I can't find a definition in any of 
> the GDAL documents. I would guess they are longitude and latitude.
> 
> I'm trying to use the "-projwin" option for gdal_translate with valid 
> longitude and latitude. But this always fails saying they are outside 
> the bounds of the input image. "-srcwin" works as expected.
> 
> "gdal_translate --version" yields "GDAL 1.4.2.0, released 2007/06/27". 
> I'm using a Redhat Fedora Core 5 system.

Kent,

I use the term "georeferenced coordinates" to refer to coordinates in some
sort of cartographic reference system.  Mainly this means a projected
coordinate system like "UTM 11 WGS84" in which case the locations are measured
in some linear units like meters or feet from some origin, or a geographic
coordinate system like "WGS84" in which case the coordinates are angular
units (usually degrees) relative to the intersection of the prime meridian
(usually greenwich) and the equator.  This is the latitude and longitude
we see in lots of places.

So the arguments to -projwin need to be in the same coordinate system as
the image is georeferenced in.  If the image is projected (I think you
mention in an earlier message that it is in lambert implying a projected
coordinate system) then the values need to be linear values (meters or
feet) in that projection.

Regarding that email:

 > What are the options for gdalwarp that will produce an image on a simple
 > longitude/latitude coordinate system?
 >
 > The input file, lambert.tif, is a GeoTiff file from the National Atlas
 > using the Lambert_Azimuthal_Equal_Area projection. It covers the 48 states.
 >
 > I'd like the output X pixel coordinate to represent equally-spaced
 > values of longitude and Y to represent latitude.
 >
 > I tried this:
 >
 >    gdalwarp -t_srs "+proj=ortho +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0"
 >       lambert.tif ortho.tif

I think you want to use:

gdalwarp -t_srs WGS84 lambert.tif wgs84.tif

The ortho projection is not at all the same thing as unprojected.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From paul-grass at stjohnspoint.co.uk  Thu Jul 19 18:51:25 2007
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Question about command line tools in msys
In-Reply-To: <BAY110-W8A358040543BB64505FC4B2FB0@phx.gbl>
References: <BAY110-W8A358040543BB64505FC4B2FB0@phx.gbl>
Message-ID: <Pine.LNX.4.62.0707192346460.357@agrippa.ukshells.co.uk>

On Thu, 19 Jul 2007, godofredo contreras wrote:

> Hi:I have compiled gdal using msys, the command line tools work ok  in msys shell, but when a tried to run them from windows command line the applications do not do anything, no errors, no output from application. Is it possible to run the command line tools in a windows command line when they were built using msys? or there is something wrong with my building process?Best regardsGodofredo Contreras

Make sure the GDAL DLL and any supporting DLLs it needs are in a directory 
included in your PATH environment variable. On Windows you can set this by 
right-clicking on "My Computer" on the desktop and then selecting 
Properties-->Advanced-->Environment Variables.
Does this help?

P.S. Your e-mail has no linebreaks, which makes it quite hard to read in 
some e-mail clients.


From tosborn at sbcglobal.net  Thu Jul 19 18:56:57 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] What are georeferenced coordinates?
In-Reply-To: <469FD634.2000500@psc.edu>
References: <469FCEDF.8000609@psc.edu>
	<8B319E5A30FF4A48BE7EEAAF609DB2330142ED8C@COMAIL01.digitalglobe.com>
	<469FD634.2000500@psc.edu>
Message-ID: <11699383.post@talk.nabble.com>


It appears to me that you are supplying latitutde and longitude values in
your gdal_translate statement, but your image is projected in meters.  You
need to supply gdal_translate with meter values for -projwin. 
-- 
View this message in context: http://www.nabble.com/What-are-georeferenced-coordinates--tf4113724.html#a11699383
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From vali.system at free.fr  Fri Jul 20 05:18:03 2007
From: vali.system at free.fr (ValiSystem)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] How to Use gdalwarp to Convert to Simple Lon/Lat?
In-Reply-To: <469FCB60.8040602@psc.edu>
References: <469FCB60.8040602@psc.edu>
Message-ID: <6D228190-804A-4C40-A8FF-CD8505B9B06E@free.fr>


On 19 juil. 07, at 22:36, Kent Eschenberg wrote:

> What are the options for gdalwarp that will produce an image on a  
> simple longitude/latitude coordinate system?
>
> The input file, lambert.tif, is a GeoTiff file from the National  
> Atlas using the Lambert_Azimuthal_Equal_Area projection. It covers  
> the 48 states.
>
> I'd like the output X pixel coordinate to represent equally-spaced  
> values of longitude and Y to represent latitude.
>
> I tried this:
>
>    gdalwarp -t_srs "+proj=ortho +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0"
>       lambert.tif ortho.tif
>
> I took the values for "+lat", "+lon", "+x_0" and "+y_0" from the  
> input. gdalwarp wouldn't work without them.
>
> This is a huge map so I've looked at only a 4000x3000 piece from  
> the upper-left corner. ortho.tif looked the same as lambert.tif.  
> The U.S.-Canadian border was curved in both. That doesn't seem right.
>
> "gdalwarp --version" yields "GDAL 1.4.2.0, released 2007/06/27".  
> I'm using a Redhat Fedora Core 5 system.
>
> TIA!
> Kent
>


You can use ESPG:4326 which is the lat/long projection on the WGS84  
datum. This should be exactly what you expect.

gdalwarp -t_srs EPSG:4326 lambert.tif ortho.tif




From andrew.haywood at poyry.com  Fri Jul 20 08:01:23 2007
From: andrew.haywood at poyry.com (andrew.haywood@poyry.com)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Andrew Haywood is out of the office.
Message-ID: <OF176C17CB.1D594C64-ONCA25731E.00420BC6-CA25731E.00420BC6@poyry.com>


I will be out of the office starting  07/16/2007 and will not return until
01/17/2008.

I am no longer employed by Poyry. For Poyry matters please contact Rudolf
van Rensburg. rudolf.rensburg@poyry.com. For personal matters please
contact me on ahaywood3@gmail.com


This email and any files transmitted with it are confidential, may be legally privileged and are intended solely for the use of the individual or entity to whom they are addressed. If you are not the intended recipient, you are hereby notified that any use, distribution, or reproduction of the contents of this email is strictly prohibited and may be unlawful. If you are not the intended recipient, please notify the sender by return email and destroy all copies of the original message including any attachments thereto. 
Thank you.

We take reasonable precautions to prevent the transmission of viruses; however, we cannot guarantee that this email or its attachments are free from viruses. We only send and receive emails on the basis that we are not be liable in for any loss or damage resulting from the opening of this message and/or attachments.


From alexandre.leroux at ec.gc.ca  Fri Jul 20 11:11:55 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Announcing TCL bindings for GDAL/OGR
Message-ID: <46A0D0BB.9010303@ec.gc.ca>


Hi list,


I'm glad to announce the immediate availability of TCL bindings for 
GDAL/OGR. Frank already made up a page about it :
http://trac.osgeo.org/gdal/wiki/GdalOgrInTcl

However, to access the libraries, one will have to download the full SPI 
application (55 Mb, see link above) running on Linux. For technical 
reasons, the TCL bindings manager tells me it's easier to bundle the 
GDAL/OGR TCL bindings along with SPI instead of making them available 
separately. This may change in the future. In the documentation part of 
the website, there's some docs named TclOGR and TclGDAL, but it's in 
French (one of my colleagues wrote this). There's also a few GDAL/OGR 
TCL example scripts, which are helpful, but the TCL bindings in SPI 
allow the user to do much much more.


I'll go back off this list, so please contact me directly if you have 
any questions related to the TCL bindings even though I'm not the one in 
charge of those bindings. There's a generic email for outside users on 
the SPI page but that email will bounce at the moment and should be 
working in the coming days.


Have a great weekend!

Alex :-)
-- 
Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca

From hulst at argoss.nl  Fri Jul 20 11:43:31 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <C8085FAD5A0F274187122B8E2550DA1D03D52F@extas4-hba.tas.csiro.au>
References: <C8085FAD5A0F274187122B8E2550DA1D03D52F@extas4-hba.tas.csiro.au>
Message-ID: <200707201743.31729.hulst@argoss.nl>

On Friday 20 July 2007 02:23:35 Paavo.Jumppanen@csiro.au wrote:
> Looks good!
>
> I note from your map file there are 3 PROCESSING LUT entries, for each
> band I presume? With 3 bands map server assumes RGB representation
> doesn't it? 
Yes.
> Whilst this looks easy enough to use, creating colour maps 
> based on RGB representation isn't great. Hue, lightness and saturation
> representation would be far better (which is what I use in my driver).
I never worked with HSV before. The processing option also accepts a file for 
each band. Can't you translate a HSV colormap to RGB and feed that to 
mapserver?

>
> What does MapServer return when you do a spatial query on a point on
> your map? One thing my version of MapServer doesn't do correctly is
> include the scaling in the query return. It just returns the unscaled
> value.
You mean as in: the scale and offset is properly applied? I haven't tried but 
I guess is that this is al right because the min/max values returned by 
gdalinfo are correct.

Regards,
Sander


From aranguren at deneb.biz  Fri Jul 20 12:01:15 2007
From: aranguren at deneb.biz (aranguren@deneb.biz)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Autoreply: Gdal-dev Digest, Vol 38, Issue 32
Message-ID: <B0073066840@mailengine25.web2000.activeisp.com>

I am on holiday till the 30th of July and won't be able to reply to your email. For any urgent matters please contact Laura Senent at laura@deneb.biz



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential information, privileged material (including material protected by the solicitor-client or other applicable privileges), or constitute non-public information. Any use of this information by anyone other than the intended recipient is prohibited. If you have received this transmission in error, please immediately reply to the sender and delete this information from your system. Use, dissemination, distribution, or reproduction of this transmission by unintended recipients is not authorized and may be unlawful




From frdcn at hotmail.com  Fri Jul 20 21:21:19 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Re: Question about command line tools in msys 
Message-ID: <BAY110-W989C6A55232736C9A7EB2B2F50@phx.gbl>

Thank you Paul for your answer, all the supporting dlls are present.
I think this is a problem of configure or the making proccess under
msys, because I ran this command to recompile ogrinfo from msys shell:
 
g++ ogrinfo.cpp -I/local/include -L/local/lib -lgdal  -o ogrinfo.exe
 
and now ogrinfo.exe works fine in windows command line and
msys shell.
 
Best regards
 
Godofredo Contreras
> Message: 1> Date: Thu, 19 Jul 2007 23:51:25 +0100 (BST)> From: Paul Kelly <paul-grass@stjohnspoint.co.uk>> Subject: Re: [Gdal-dev] Question about command line tools in msys> To: godofredo contreras <frdcn@hotmail.com>> Cc: gdal-dev@lists.maptools.org> Message-ID: <Pine.LNX.4.62.0707192346460.357@agrippa.ukshells.co.uk>> Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed> > On Thu, 19 Jul 2007, godofredo contreras wrote:> > > Hi:I have compiled gdal using msys, the command line tools work ok in msys shell,
 but when a tried to run them from windows command line the applications do not do anything,
 no errors, no output from application. Is it possible to run the command line tools in a windows
 command line when they were built using msys? or there is something wrong with my
 building process
 
Best regards
Godofredo Contreras> > Make sure the GDAL DLL and any supporting DLLs it needs are in a directory > included in your PATH environment variable. On Windows you can set this by > right-clicking on "My Computer" on the desktop and then selecting > Properties-->Advanced-->Environment Variables.> Does this help?> > P.S. Your e-mail has no linebreaks, which makes it quite hard to read in > some e-mail clients.> > > 
_________________________________________________________________
Local listings, incredible imagery, and driving directions - all in one place! Find it!
http://maps.live.com/?wip=69&FORM=MGAC01
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070721/41c91b18/attachment.html
From seanasy at gmail.com  Sun Jul 22 00:02:10 2007
From: seanasy at gmail.com (Sean Fulton)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Read shapefile from zip with python and OGR
Message-ID: <f7ukqa$162$1@sea.gmane.org>

I'd like to open a zip file with python and read a shapefile within the 
zip with OGR.  Some thing like this:

import zipfile, ogr

zip = zipfile.ZipFile('Zoning.zip', 'r')
shape = zip.read('Zoning.shp')
data=ogr.Open(shape)

The above doesn't work. Is it because the shapefile driver needs access 
to the other files (.shx, .prj, .sbx, .dbf)? Is there a way to load 
them all manually?

Thanks,

Sean





From mtj.ashbridge at gmail.com  Sun Jul 22 06:07:07 2007
From: mtj.ashbridge at gmail.com (Michael Ashbridge)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Read shapefile from zip with python and OGR
In-Reply-To: <f7ukqa$162$1@sea.gmane.org>
References: <f7ukqa$162$1@sea.gmane.org>
Message-ID: <1ed805e50707220307m1ac6a715t614a1b4b12cfd364@mail.gmail.com>

On 7/21/07, Sean Fulton <seanasy@gmail.com> wrote:
> I'd like to open a zip file with python and read a shapefile within the
> zip with OGR.  Some thing like this:
>
> import zipfile, ogr
>
> zip = zipfile.ZipFile('Zoning.zip', 'r')
> shape = zip.read('Zoning.shp')
> data=ogr.Open(shape)
>
> The above doesn't work. Is it because the shapefile driver needs access
> to the other files (.shx, .prj, .sbx, .dbf)? Is there a way to load
> them all manually?

Looks like you're sending a string of bytes to ogr.Open(), which
expects a filename. One way is to extract the contents of the zipfile
to a temporary directory and work from there:

#!/usr/bin/python

import os
import os.path
import tempfile
import zipfile

import ogr

zip = zipfile.ZipFile('Zoning.zip')
tempdir = tempfile.mkdtemp()

# Copy the zipped files to a temporary directory, preserving names.
for name in zip.namelist():
  data = zip.read(name)
  outfile = os.path.join(tempdir, name)
  f = open(outfile, 'w')
  f.write(data)
  f.close()

data = ogr.Open(os.path.join(tempdir, 'Zoning.shp'))
# More work here...

# Clean up after ourselves.
for file in os.listdir(tempdir):
  os.unlink(os.path.join(tempdir, file))
os.rmdir(tempdir)

From jmp at geosys.com  Mon Jul 23 05:42:42 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] OGR Performance Intersection, Union
In-Reply-To: <000001c7c893$2b5050a0$2201a8c0@pcjmp>
Message-ID: <000001c7cd0d$d2d45c30$2201a8c0@pcjmp>

Hi,
    I have a problem with the performance of OGR (Intersection, Union, ...),
it seem to be slower than the library GPC (Generic Polygon Clipper) which i
used before.     

Is it normal ?
Do you have solutions or answers ?

Jean-michel PIERRET - Poste? 376
Tel : +33 (0)5 62 47 80 76
Mail : jmp@geosys.com
GEOSYS SA



-----Message d'origine-----
De?: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] De la part de Jean Michel
PIERRET
Envoy??: mardi 17 juillet 2007 18:55
??: gdal-dev@lists.maptools.org
Objet?: [Gdal-dev] OGR Performance Rasterize Contains Overlaps


Hi,
	
	I would like to get a matrix like with gdal_rasterize in c#, but
with the difference between pixels that are on polygon boundaries and pixels
that are completely inside polygon. It works with the following code but
it's very slow.

Thanks for your help.
Regards.

public void test()
{
	int [, ] mat = new int[width, height];
	Geometry geometry = Geometry.CreateFromWkt("...");

	//Browse each pixel of a raster
	for (i = 0, x = XUL; i < width; x += pixelsizeX, i++)	
      {
  	  for (j = 0, y = YUL; j < height; y += pixelsizeY, j++)
        {
		//x, y are the upper left corner of pixel
		double x1, y1, x2, y2, x3, y3, x4, y4;

		x1 = x;
		y1 = y;

		x2 = x1 + pixelsizeX; 
		y2 = y1;

		x3 = x1 + pixelsizeX; 
		y3 = y1 + pixelsizeY;

		x4 = x1; 
		y4 = y1 + pixelsizeY;

		Geometry geompixel =
Geometry.CreateFromWkt(string.Format("POLYGON(({0} {1}, {2} {3}, {4} {5},
{6} {7}, {0} {1}))", x1, y1, x2, y2, x3, y3, x4, y4));

		//get if pixel is overlap, contains or none by polygon
		if (geometry.Contains(geompixel))
			mat[i, j] = 2;	
		else if (geometry.Overlaps(geompixel))
			mat[i, j] = 1;
		else
			mat[i, j] = 0;

		geompixel.Dispose();
        }
	}

	geometry.Dispose();
}

Jean-michel PIERRET - Poste? 376
Tel : +33 (0)5 62 47 80 76
Mail : jmp@geosys.com
GEOSYS SA


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Mon Jul 23 09:44:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] OGR Performance Intersection, Union
In-Reply-To: <000001c7cd0d$d2d45c30$2201a8c0@pcjmp>
References: <000001c7cd0d$d2d45c30$2201a8c0@pcjmp>
Message-ID: <46A4B0D5.9060507@pobox.com>

Jean Michel PIERRET wrote:
> Hi,
>     I have a problem with the performance of OGR (Intersection, Union, ...),
> it seem to be slower than the library GPC (Generic Polygon Clipper) which i
> used before.     
> 
> Is it normal ?
> Do you have solutions or answers ?

Jean-michel,

I don't use GPC though I have heard good things about it.  Operations like
Intersection and Union in OGR are implemented by turning all geometries into
GEOS geometries, and then invoking GEOS functions.  The translation adds
some overhead, and I believe that some operations in GEOS are slower than they
may strictly need to be.   It is unclear whether this is an optimization
opportunity or just different tradeoffs being made on performance vs.
robustness.

In short, I think the issue lays in GEOS but I have no useful suggestions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aranguren at deneb.biz  Mon Jul 23 12:02:10 2007
From: aranguren at deneb.biz (aranguren@deneb.biz)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Autoreply: Gdal-dev Digest, Vol 38, Issue 35
Message-ID: <B0069676344@mailengine23.web2000.activeisp.com>

I am on holiday till the 3th of August and won't be able to reply to your email. For any urgent matters please contact Laura Senent at laura@deneb.biz



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential information, privileged material (including material protected by the solicitor-client or other applicable privileges), or constitute non-public information. Any use of this information by anyone other than the intended recipient is prohibited. If you have received this transmission in error, please immediately reply to the sender and delete this information from your system. Use, dissemination, distribution, or reproduction of this transmission by unintended recipients is not authorized and may be unlawful




From hobu.inc at gmail.com  Mon Jul 23 13:00:05 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] CPL HTTP
Message-ID: <2575CD46-4511-433A-BBBC-9BFD4485D7A3@gmail.com>

All,

For the WCS driver, Frank had developed a CPL module called HTTP that  
provides some wrapper around curl to support fetching data from  
URLs.  The module, cpl_http, lived in frmts/wcs, and I have moved it  
into CPL proper so that others can easily take advantage of it  
(notably some of the SoC projects that are very web-centric).

Howard



From hobu.inc at gmail.com  Mon Jul 23 16:08:01 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Proposed Feature: Consumption of URL-based Spatial
	References
Message-ID: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>

All,

Chris Schmidt and I have been working on a website <http:// 
spatialreference.org> that reflects the EPSG spatial reference codes  
database and user-contributed codes in a variety of output formats.   
The EPSG code database is never as up to date as you would like, and  
we frequently tell people to hack their /usr/share/proj/epsg database  
file with made up codes to support alternative projections.  If we  
could consume URL-based spatial references with OSR, all that would  
be required is someone adds the custom coordinate system definition  
to the site and then everyone could refer to it at that location  
(hopefully indefinitely).

As for the website itself, if it has uptake and people find it  
useful, we will work to put it somewhere it can live for a very long  
time -- for example OSGeo.  The source code (it's written in Django)  
will be made available so anyone can stand up their own version of  
the site.

I would like to propose that an ImportFromUrl() method be added to  
OSRSpatialReference that constructs a spatial reference given the  
SetFromUserInput data retrieved at the given URL.  It would only need  
to be as specific as that, and it wouldn't need to refer to  
spatialreference.org.  Additionally, this mechanism could be used to  
support GML SRS retrieval from URLs (which Frank mentioned was in the  
spec) in the future.  This method would only be active if you have  
included curl support, of course.  Maybe someday, if necessary, we do  
some magical caching, but that'd be a premature optimization at this  
point.

Here's an example:

ogr2ogr -a_srs http://spatialreference.org/epsg/4326/proj4 -t_srs  
http://spatialreference.org/user/6/proj4 world_borders.shp  
world_borders_google.shp

Howard

From dmorissette at mapgears.com  Mon Jul 23 17:48:24 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Proposed Feature: Consumption of URL-based Spatial
	References
In-Reply-To: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>
References: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>
Message-ID: <46A52228.6030208@mapgears.com>

I like the concept. I would rather read that we are using and extending 
support for an existing repository, than reading that we are creating 
our own repository, but I am not aware of an actual central repository 
somewhere that will accept user-contributions ... so I guess this is 
really filling a void.

Note that I am not an expert in OGC SRS and other projection 
authorities, so there may well be something that exists already and that 
I'm just not aware of.

Anyway, the extension seems simple and flexible enough to be extended to 
support other types of repositories someday, so I'm cool with it.

Daniel

Howard Butler wrote:
> All,
> 
> Chris Schmidt and I have been working on a website 
> <http://spatialreference.org> that reflects the EPSG spatial reference 
> codes database and user-contributed codes in a variety of output 
> formats.  The EPSG code database is never as up to date as you would 
> like, and we frequently tell people to hack their /usr/share/proj/epsg 
> database file with made up codes to support alternative projections.  If 
> we could consume URL-based spatial references with OSR, all that would 
> be required is someone adds the custom coordinate system definition to 
> the site and then everyone could refer to it at that location (hopefully 
> indefinitely).
> 
> As for the website itself, if it has uptake and people find it useful, 
> we will work to put it somewhere it can live for a very long time -- for 
> example OSGeo.  The source code (it's written in Django) will be made 
> available so anyone can stand up their own version of the site.
> 
> I would like to propose that an ImportFromUrl() method be added to 
> OSRSpatialReference that constructs a spatial reference given the 
> SetFromUserInput data retrieved at the given URL.  It would only need to 
> be as specific as that, and it wouldn't need to refer to 
> spatialreference.org.  Additionally, this mechanism could be used to 
> support GML SRS retrieval from URLs (which Frank mentioned was in the 
> spec) in the future.  This method would only be active if you have 
> included curl support, of course.  Maybe someday, if necessary, we do 
> some magical caching, but that'd be a premature optimization at this point.
> 
> Here's an example:
> 
> ogr2ogr -a_srs http://spatialreference.org/epsg/4326/proj4 -t_srs 
> http://spatialreference.org/user/6/proj4 world_borders.shp 
> world_borders_google.shp
> 
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From sgillies at frii.com  Mon Jul 23 17:58:47 2007
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Proposed Feature: Consumption of URL-based Spatial
	References
In-Reply-To: <46A52228.6030208@mapgears.com>
References: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>
	<46A52228.6030208@mapgears.com>
Message-ID: <46A52497.2090503@frii.com>

Howard, don't forget OGC URNs! And xlink traversal for GML ;)

Daniel Morissette wrote:
> I like the concept. I would rather read that we are using and extending 
> support for an existing repository, than reading that we are creating 
> our own repository, but I am not aware of an actual central repository 
> somewhere that will accept user-contributions ... so I guess this is 
> really filling a void.
> 
> Note that I am not an expert in OGC SRS and other projection 
> authorities, so there may well be something that exists already and that 
> I'm just not aware of.
> 
> Anyway, the extension seems simple and flexible enough to be extended to 
> support other types of repositories someday, so I'm cool with it.
> 
> Daniel
> 
> Howard Butler wrote:
>> All,
>>
>> Chris Schmidt and I have been working on a website 
>> <http://spatialreference.org> that reflects the EPSG spatial reference 
>> codes database and user-contributed codes in a variety of output 
>> formats.  The EPSG code database is never as up to date as you would 
>> like, and we frequently tell people to hack their /usr/share/proj/epsg 
>> database file with made up codes to support alternative projections.  
>> If we could consume URL-based spatial references with OSR, all that 
>> would be required is someone adds the custom coordinate system 
>> definition to the site and then everyone could refer to it at that 
>> location (hopefully indefinitely).
>>
>> As for the website itself, if it has uptake and people find it useful, 
>> we will work to put it somewhere it can live for a very long time -- 
>> for example OSGeo.  The source code (it's written in Django) will be 
>> made available so anyone can stand up their own version of the site.
>>
>> I would like to propose that an ImportFromUrl() method be added to 
>> OSRSpatialReference that constructs a spatial reference given the 
>> SetFromUserInput data retrieved at the given URL.  It would only need 
>> to be as specific as that, and it wouldn't need to refer to 
>> spatialreference.org.  Additionally, this mechanism could be used to 
>> support GML SRS retrieval from URLs (which Frank mentioned was in the 
>> spec) in the future.  This method would only be active if you have 
>> included curl support, of course.  Maybe someday, if necessary, we do 
>> some magical caching, but that'd be a premature optimization at this 
>> point.
>>
>> Here's an example:
>>
>> ogr2ogr -a_srs http://spatialreference.org/epsg/4326/proj4 -t_srs 
>> http://spatialreference.org/user/6/proj4 world_borders.shp 
>> world_borders_google.shp
>>
>> Howard
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 


From j.l.h.hartmann at uva.nl  Tue Jul 24 07:04:19 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Proposed Feature: Consumption of URL-based Spatial
	References
In-Reply-To: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>
References: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>
Message-ID: <46A5DCB3.5000804@uva.nl>

Yes, this is a good idea. I am working with historical maps with their 
own projections (e.g. central meridian in Paris), and a central 
repository for those definitions would be very welcome. One wish: it 
would be nice to be able to name the projections, e.g. "Cassini" for the 
18th century French projection. Did you know BTW that our definition of 
the meter as 1/40000 of the globe circumference comes from work done for 
creating that projection?

Jan

Dr. J. Hartmann
Department of Geography
University of Amsterdam

Howard Butler wrote:
> All,
> 
> Chris Schmidt and I have been working on a website 
> <http://spatialreference.org> that reflects the EPSG spatial reference 
> codes database and user-contributed codes in a variety of output 
> formats.  The EPSG code database is never as up to date as you would 
> like, and we frequently tell people to hack their /usr/share/proj/epsg 
> database file with made up codes to support alternative projections.  If 
> we could consume URL-based spatial references with OSR, all that would 
> be required is someone adds the custom coordinate system definition to 
> the site and then everyone could refer to it at that location (hopefully 
> indefinitely).
> 
> As for the website itself, if it has uptake and people find it useful, 
> we will work to put it somewhere it can live for a very long time -- for 
> example OSGeo.  The source code (it's written in Django) will be made 
> available so anyone can stand up their own version of the site.
> 
> I would like to propose that an ImportFromUrl() method be added to 
> OSRSpatialReference that constructs a spatial reference given the 
> SetFromUserInput data retrieved at the given URL.  It would only need to 
> be as specific as that, and it wouldn't need to refer to 
> spatialreference.org.  Additionally, this mechanism could be used to 
> support GML SRS retrieval from URLs (which Frank mentioned was in the 
> spec) in the future.  This method would only be active if you have 
> included curl support, of course.  Maybe someday, if necessary, we do 
> some magical caching, but that'd be a premature optimization at this point.
> 
> Here's an example:
> 
> ogr2ogr -a_srs http://spatialreference.org/epsg/4326/proj4 -t_srs 
> http://spatialreference.org/user/6/proj4 world_borders.shp 
> world_borders_google.shp
> 
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

From cavicchi at ferrara.linux.it  Tue Jul 24 07:14:19 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Dimap Spot Driver
Message-ID: <20070724111418.GA30257@ferrara.linux.it>

Hi to all,

In this days i must to work with some spot/dimap images and i read in
this  page http://www.gdal.org/frmt_various.html that GDAL library have
a comfortable driver for this images, but i don't find it in source of
GDAL.   
Someone can help me? Tnx.

-- 
Ciao,
        Mario
        
[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From philippe at cowpig.ca  Tue Jul 24 07:26:10 2007
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Dimap Spot Driver
In-Reply-To: <20070724111418.GA30257@ferrara.linux.it>
References: <20070724111418.GA30257@ferrara.linux.it>
Message-ID: <20070724112610.GA5545@cowpig.ca>

Hi Mario,

You'll be able to find the sources for the SPOT Dimap driver in
the frmts/dimap directory.

However, in taking a quick look at SVN, I think it wasn't tagged for the
1.4.2 release, so you'll have to grab it from the GDAL trunk (i.e. check
GDAL out of SVN or grab a snapshot).

Cheers,
Phil

On Tue, Jul 24, 2007 at 01:14:19PM +0200, Mario Cavicchi wrote:
> Hi to all,
> 
> In this days i must to work with some spot/dimap images and i read in
> this  page http://www.gdal.org/frmt_various.html that GDAL library have
> a comfortable driver for this images, but i don't find it in source of
> GDAL.   
> Someone can help me? Tnx.
> 
> -- 
> Ciao,
>         Mario
>         
> [ Web Info: http://members.ferrara.linux.it/cavicchi ]
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From j.l.h.hartmann at uva.nl  Tue Jul 24 09:17:41 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Proposed Feature: Consumption of URL-based Spatial
	References
In-Reply-To: <46A5DCB3.5000804@uva.nl>
References: <F7F79DD3-536B-4A73-9BB5-892D6CFD6D27@gmail.com>
	<46A5DCB3.5000804@uva.nl>
Message-ID: <46A5FBF5.4030702@uva.nl>

Completely off-topic of course, but I just realised that that Parisian 
meridian plays an important role in Dan Brown's "The Da Vinci Code". I 
forgot the details but it had something to do with the offspring of 
Jesus Christ. Anyway, Gdal seems to move into the realms of theology 
too. :-)

Jan

Jan Hartmann wrote:
> Yes, this is a good idea. I am working with historical maps with their 
> own projections (e.g. central meridian in Paris), and a central 
> repository for those definitions would be very welcome. One wish: it 
> would be nice to be able to name the projections, e.g. "Cassini" for the 
> 18th century French projection. Did you know BTW that our definition of 
> the meter as 1/40000 of the globe circumference comes from work done for 
> creating that projection?
> 
> Jan
> 
> Dr. J. Hartmann
> Department of Geography
> University of Amsterdam
> 
> Howard Butler wrote:
>> All,
>>
>> Chris Schmidt and I have been working on a website 
>> <http://spatialreference.org> that reflects the EPSG spatial reference 
>> codes database and user-contributed codes in a variety of output 
>> formats.  The EPSG code database is never as up to date as you would 
>> like, and we frequently tell people to hack their /usr/share/proj/epsg 
>> database file with made up codes to support alternative projections.  
>> If we could consume URL-based spatial references with OSR, all that 
>> would be required is someone adds the custom coordinate system 
>> definition to the site and then everyone could refer to it at that 
>> location (hopefully indefinitely).
>>
>> As for the website itself, if it has uptake and people find it useful, 
>> we will work to put it somewhere it can live for a very long time -- 
>> for example OSGeo.  The source code (it's written in Django) will be 
>> made available so anyone can stand up their own version of the site.
>>
>> I would like to propose that an ImportFromUrl() method be added to 
>> OSRSpatialReference that constructs a spatial reference given the 
>> SetFromUserInput data retrieved at the given URL.  It would only need 
>> to be as specific as that, and it wouldn't need to refer to 
>> spatialreference.org.  Additionally, this mechanism could be used to 
>> support GML SRS retrieval from URLs (which Frank mentioned was in the 
>> spec) in the future.  This method would only be active if you have 
>> included curl support, of course.  Maybe someday, if necessary, we do 
>> some magical caching, but that'd be a premature optimization at this 
>> point.
>>
>> Here's an example:
>>
>> ogr2ogr -a_srs http://spatialreference.org/epsg/4326/proj4 -t_srs 
>> http://spatialreference.org/user/6/proj4 world_borders.shp 
>> world_borders_google.shp
>>
>> Howard
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

From aranguren at deneb.biz  Tue Jul 24 09:31:03 2007
From: aranguren at deneb.biz (aranguren@deneb.biz)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Autoreply: Gdal-dev Digest, Vol 38, Issue 36
Message-ID: <B0073972763@mailengine27.web2000.activeisp.com>

I am on holiday till the 3th of August and won't be able to reply to your email. For any urgent matters please contact Laura Senent at laura@deneb.biz



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential information, privileged material (including material protected by the solicitor-client or other applicable privileges), or constitute non-public information. Any use of this information by anyone other than the intended recipient is prohibited. If you have received this transmission in error, please immediately reply to the sender and delete this information from your system. Use, dissemination, distribution, or reproduction of this transmission by unintended recipients is not authorized and may be unlawful




From warmerdam at pobox.com  Tue Jul 24 11:11:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Dimap Spot Driver
In-Reply-To: <20070724112610.GA5545@cowpig.ca>
References: <20070724111418.GA30257@ferrara.linux.it>
	<20070724112610.GA5545@cowpig.ca>
Message-ID: <46A616A4.1090509@pobox.com>

Philippe Vachon wrote:
> Hi Mario,
> 
> You'll be able to find the sources for the SPOT Dimap driver in
> the frmts/dimap directory.
> 
> However, in taking a quick look at SVN, I think it wasn't tagged for the
> 1.4.2 release, so you'll have to grab it from the GDAL trunk (i.e. check
> GDAL out of SVN or grab a snapshot).
> 
> Cheers,
> Phil
> 
> On Tue, Jul 24, 2007 at 01:14:19PM +0200, Mario Cavicchi wrote:
>> Hi to all,
>>
>> In this days i must to work with some spot/dimap images and i read in
>> this  page http://www.gdal.org/frmt_various.html that GDAL library have
>> a comfortable driver for this images, but i don't find it in source of
>> GDAL.   
>> Someone can help me? Tnx.

Mario,

Phil is correct, it is a very recent development.  I *think* it is available
in the FWTools 1.3.4 for Linux.  I would appreciate feedback on any problems
with it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sjahputerao at missouri.edu  Tue Jul 24 11:23:15 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Metadata preservation (or lack thereof) in NITF driver
In-Reply-To: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
References: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
Message-ID: <46A61963.5040309@missouri.edu>

I was using :

gdal_translate -of nitf src.ntf dst.ntf

The input file, src.ntf, contains some metadata items such as the RPC 
parameters (important to have if you want to do orthorectification). 
However, the result of gdal_translate above, dst.ntf, does not contain 
any of the RPC parameters. 

I wrote a simple program to do something similar:
   
    GDALDataset *srcDs = (GDALDataset*) GDALOpen( srcfname.c_str(), 
GA_ReadOnly);
    char **papszCreateOptions = NULL;
    papszCreateOptions = srcDs->GetMetadata();
    GDALDriver *hDriver = (GDALDriver*) GDALGetDriverByName( "nitf" );
    GDALDataset *dstDs = hDriver->CreateCopy(dstfname.c_str(), srcDs, 
TRUE, papszCreateOptions, NULL, NULL);

Note that I specifically fetched the source image metadata and passed it 
to CreateCopy.  I also specified bStrict = TRUE since I want the copy to 
be equivalent (just to prove a point). Even with this code the output 
image still does not contain any RPC parameter.

Any info on how to deal with this? 

Thanks.

Ozy

From dean.nelson at eecradar.com  Tue Jul 24 12:17:18 2007
From: dean.nelson at eecradar.com (Nelson, Dean)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Is ogr2ogr the tool to use?
Message-ID: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5B@FRIEDCHICKEN.eecnet.eecradar.com>

Hello,
I am trying to convert the Hydro1k basin shapefiles from a "projected"
shapefile to a Lat/Lon shape file. I am doing that with the command:
 
ogr2ogr -t_srs WGS84 -f "ESRI Shapefile" outfile.shp infile.shp
 
But when the shapefile is viewed, it shows up about 17km north of the
correct data. SO the questions are:
 
1. Is this the best tool to do that with?
2. Did I do it right?
3. Is there a way to offset the data in ogr2ogr?
 
Regards,

Dean Nelson   
Sr. Software Engineer
Enterprise Electronics Corp
http://www.EECradar.com <http://www.eecradar.com/>    

"Too much of the world is run on the theory that you don't need road
manners if you drive a five-ton truck" - Cleon Lyles


This e-mail, including attachments, may include confidential and/or
proprietary information, and may be used only by the person or entity to
which it is addressed.  If the reader of this e-mail is not the intended
recipient or his or her authorized agent, the reader is hereby notified
that any dissemination, distribution or copying of this e-mail is
prohibited.  If you have received this e-mail in error, please notify
the sender by replying to this  message and delete this e-mail
immediately.


 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070724/d49e1dbd/attachment.html
From craigrthunter at gmail.com  Tue Jul 24 12:25:06 2007
From: craigrthunter at gmail.com (Craig Hunter)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
Message-ID: <1ae7be230707240925y21371714hbefdde29b18aaa47@mail.gmail.com>

Hi,

I performed a hack to the OGR source in order to read and write shapefiles
with measured values.  If others may find this of value, I'll work on a
patch?

Also, the SDE driver only provides read access.  Is there some technical or
proprietary issues with performing write access to SDE? or has this not been
developed due to a lack of interest?

Thanks,
Craig Hunter.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070724/977d55ca/attachment.html
From warmerdam at pobox.com  Tue Jul 24 12:26:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Metadata preservation (or lack thereof) in NITF driver
In-Reply-To: <46A61963.5040309@missouri.edu>
References: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
	<46A61963.5040309@missouri.edu>
Message-ID: <46A6282C.1070909@pobox.com>

Ozy Sjahputera wrote:
> I was using :
> 
> gdal_translate -of nitf src.ntf dst.ntf
> 
> The input file, src.ntf, contains some metadata items such as the RPC 
> parameters (important to have if you want to do orthorectification). 
> However, the result of gdal_translate above, dst.ntf, does not contain 
> any of the RPC parameters.
> I wrote a simple program to do something similar:
>      GDALDataset *srcDs = (GDALDataset*) GDALOpen( srcfname.c_str(), 
> GA_ReadOnly);
>    char **papszCreateOptions = NULL;
>    papszCreateOptions = srcDs->GetMetadata();
>    GDALDriver *hDriver = (GDALDriver*) GDALGetDriverByName( "nitf" );
>    GDALDataset *dstDs = hDriver->CreateCopy(dstfname.c_str(), srcDs, 
> TRUE, papszCreateOptions, NULL, NULL);
> 
> Note that I specifically fetched the source image metadata and passed it 
> to CreateCopy.  I also specified bStrict = TRUE since I want the copy to 
> be equivalent (just to prove a point). Even with this code the output 
> image still does not contain any RPC parameter.

Ozy,

The NITF driver just doesn't support writing RPC info.

The bStrict flag is not well adhered to by drivers.  You should pass it
as a hint to drivers rather than expecting them to truely be "strict".

I have recently incorporated the ability to write BLOCKA stuff from
metadata in the NITF driver, but generally speaking the NITF driver
writes only a fairly simple subset of possible NITF information though
the reader tries to be more general.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dean.nelson at eecradar.com  Tue Jul 24 12:34:57 2007
From: dean.nelson at eecradar.com (Nelson, Dean)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <1ae7be230707240925y21371714hbefdde29b18aaa47@mail.gmail.com>
Message-ID: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5C@FRIEDCHICKEN.eecnet.eecradar.com>

Craig,
Would this be like a projected shape file (i.e. x,y off of a median) ?
 

Regards,

Dean Nelson   
Enterprise Electronics Corp


	-----Original Message-----
	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Craig Hunter
	Sent: Tuesday, July 24, 2007 11:25 AM
	To: gdal-dev@lists.maptools.org
	Subject: [Gdal-dev] Measured Values for Shapefile read & write
	
	
	Hi,
	 
	I performed a hack to the OGR source in order to read and write
shapefiles with measured values.  If others may find this of value, I'll
work on a patch?
	 
	Also, the SDE driver only provides read access.  Is there some
technical or proprietary issues with performing write access to SDE? or
has this not been developed due to a lack of interest?
	 
	Thanks,
	Craig Hunter.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070724/47239a5b/attachment.html
From warmerdam at pobox.com  Tue Jul 24 12:37:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Is ogr2ogr the tool to use?
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5B@FRIEDCHICKEN.eecnet.eecradar.com>
References: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5B@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <46A62ABC.7000103@pobox.com>

Nelson, Dean wrote:
> Hello,
> I am trying to convert the Hydro1k basin shapefiles from a "projected" 
> shapefile to a Lat/Lon shape file. I am doing that with the command:
>  
> ogr2ogr -t_srs WGS84 -f "ESRI Shapefile" outfile.shp infile.shp
>  
> But when the shapefile is viewed, it shows up about 17km north of the 
> correct data. SO the questions are:
>  
> 1. Is this the best tool to do that with?
> 2. Did I do it right?
> 3. Is there a way to offset the data in ogr2ogr?

Dean,

Could you post the .prj file associated with the input shapefile?
Ogr2ogr is an appropriate tool for the job, but there are issues
with how spherical projections are converted WGS84 that may be coming
into play.  Or it might be something else.  Having the input .prj
would be helpful to determine what the issue is.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dean.nelson at eecradar.com  Tue Jul 24 13:06:14 2007
From: dean.nelson at eecradar.com (Nelson, Dean)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Is ogr2ogr the tool to use?
References: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5B@FRIEDCHICKEN.eecnet.eecradar.com>
	<46A62ABC.7000103@pobox.com>
Message-ID: <BD653983CF3BF844A9B3E77CF79DA0A548DB55@FRIEDCHICKEN.eecnet.eecradar.com>

Frank
Here is the .prj file associated with the input file.

PROJCS["Sphere_ARC_INFO_Lambert_Azimuthal_Equal_Area",GEOGCS[
"GCS_Sphere_ARC_INFO",DATUM["D_Sphere_ARC_INFO",SPHEROID["Sphere_ARC_INFO",
6370997.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0.0],
PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-100.0],PARAMETER[
"Latitude_Of_Origin",45.0],UNIT["Meter",1.0]]


This particular data is located at 
http://edc.usgs.gov/products/elevation/gtopo30/hydro/na_basins.html

Regards,
Dean Nelson

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tue 7/24/2007 11:37 AM
To: Nelson, Dean
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Is ogr2ogr the tool to use?
 
Nelson, Dean wrote:
> Hello,
> I am trying to convert the Hydro1k basin shapefiles from a "projected" 
> shapefile to a Lat/Lon shape file. I am doing that with the command:
>  
> ogr2ogr -t_srs WGS84 -f "ESRI Shapefile" outfile.shp infile.shp
>  
> But when the shapefile is viewed, it shows up about 17km north of the 
> correct data. SO the questions are:
>  
> 1. Is this the best tool to do that with?
> 2. Did I do it right?
> 3. Is there a way to offset the data in ogr2ogr?

Dean,

Could you post the .prj file associated with the input shapefile?
Ogr2ogr is an appropriate tool for the job, but there are issues
with how spherical projections are converted WGS84 that may be coming
into play.  Or it might be something else.  Having the input .prj
would be helpful to determine what the issue is.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




From jmp at geosys.com  Tue Jul 24 13:27:58 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:57 2007
Subject: [Gdal-dev] Create Polygon in OGR / C#
Message-ID: <000501c7ce17$fadf8230$2201a8c0@pcjmp>

Hi,

 

      I would like transform a geometry structure in a OGR.Geometry.

 

Struct MyGeometry

{

bool [] exterior = null;

int []  partStarts = null;

int []  partEnds = null;

 

double [] padfX = null;

double [] padfY = null;

}

 

When I use the method ExportToWkt and CreateFromWkt it's very slow.

Now I have this method for the transformation :

 

Geometry gm = null;

Geometry g = null;

Geometry lr = null;

 

g = new Geometry(wkbGeometryType.wkbPolygon);

 

for (int i = 0; i < partStarts.Length; i++)

{

      if (exterior[i])

      {

            if (i > 0)

            {

                  if (gm == null)

                        gm = new Geometry(wkbGeometryType.wkbMultiPolygon);

                  gm.AddGeometry(g);

                  g.Dispose();

                  g = null;

            }

 

            if (g == null)

                  g = new Geometry(wkbGeometryType.wkbPolygon);

      }

 

      lr = new Geometry(wkbGeometryType.wkbLinearRing);

      for (int j = partStarts[i]; j < partEnds[i]; j++)

            lr.AddPoint(padfX[j], padfY[j], 0);

 

      g.AddGeometry(lr);

      lr.Dispose();

      lr = null;

}

 

if (gm != null)

{

      if (g != null)

      {

            gm.AddGeometry(g);

            g.Dispose();

            g = null;

      }

 

      return gm;

}

else

      return g;

 

It works but it is not very quick, It's possible to have a function like in
the shapelib

 

SHPObject SHPCreateObject(ShapeType shpType, int nShapeId, int nParts, int[]
panPartStart, PartType[] paPartType, int nVertices, double[] adfX, double[]
adfY, double[] adfZ, double[] adfM);

 

Thanks for your support.

 

Best Regards.

 

 


 <mailto:jmp@geosys.com> Jean-michel PIERRET - Poste  376


Tel : +33 (0)5 62 47 80 76
Mail :  <mailto:jmp@geosys.com> jmp@geosys.com
GEOSYS SA

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070724/0d166add/attachment.html
From craigrthunter at gmail.com  Tue Jul 24 13:52:26 2007
From: craigrthunter at gmail.com (Craig Hunter)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5C@FRIEDCHICKEN.eecnet.eecradar.com>
References: <1ae7be230707240925y21371714hbefdde29b18aaa47@mail.gmail.com>
	<BD653983CF3BF844A9B3E77CF79DA0A55FFC5C@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <1ae7be230707241052t1f0753eds665dfb45aa4b569d@mail.gmail.com>

Dean,

Are you referring to an offset, in the sense you have a point on a line and
you want to project it 100 meters off to the left side (90 degrees) of the
line?  In that case, *no*, but I'm pretty sure that can already be performed
with the ogr library as it is now.

I'm referring to measured values (M-values) that are included in the
geometry and can be used for dynamic segmentation.

(Sorry for the repeated message, I left the mailing list off my initial
reply)


On 7/24/07, Nelson, Dean <dean.nelson@eecradar.com> wrote:
>
>  Craig,
> Would this be like a projected shape file (i.e. x,y off of a median) ?
>
>
> Regards,
>
> Dean Nelson
> Enterprise Electronics Corp
>
>  -----Original Message-----
> *From:* gdal-dev-bounces@lists.maptools.org [mailto:
> gdal-dev-bounces@lists.maptools.org] *On Behalf Of *Craig Hunter
> *Sent:* Tuesday, July 24, 2007 11:25 AM
> *To:* gdal-dev@lists.maptools.org
> *Subject:* [Gdal-dev] Measured Values for Shapefile read & write
>
> Hi,
>
> I performed a hack to the OGR source in order to read and write shapefiles
> with measured values.  If others may find this of value, I'll work on a
> patch?
>
> Also, the SDE driver only provides read access.  Is there some technical
> or proprietary issues with performing write access to SDE? or has this not
> been developed due to a lack of interest?
>
> Thanks,
> Craig Hunter.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070724/15ca8115/attachment.html
From dean.nelson at eecradar.com  Tue Jul 24 14:34:43 2007
From: dean.nelson at eecradar.com (Nelson, Dean)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <1ae7be230707241052t1f0753eds665dfb45aa4b569d@mail.gmail.com>
Message-ID: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5E@FRIEDCHICKEN.eecnet.eecradar.com>

Craig,
 
We would like our product to ingest any type of shape file (projected or
lat/lon) and be able to run with it. However, as in the "[Gdal-dev] Is
ogr2ogr the tool to use?" thread, I have some shapefile data from the
USGS/Hydro1k project that is projected from a point and all of the
values in the polygons are x,y values. I needed to convert to a Lat/Lon
shapefile. I did it via ogr2ogr and the resulting output was placed 17km
north of reality.
 
I was looking for a kludgy fudge factor ;-)
 
 

Regards,

Dean Nelson   
Enterprise Electronics Corp


	-----Original Message-----
	From: Craig Hunter [mailto:craigrthunter@gmail.com] 
	Sent: Tuesday, July 24, 2007 12:52 PM
	To: Nelson, Dean
	Cc: gdal-dev@lists.maptools.org
	Subject: Re: [Gdal-dev] Measured Values for Shapefile read &
write
	
	
	Dean,
	 
	Are you referring to an offset, in the sense you have a point on
a line and you want to project it 100 meters off to the left side (90
degrees) of the line?  In that case, no, but I'm pretty sure that can
already be performed with the ogr library as it is now. 
	 
	I'm referring to measured values (M-values) that are included in
the geometry and can be used for dynamic segmentation.
	 
	(Sorry for the repeated message, I left the mailing list off my
initial reply)


	On 7/24/07, Nelson, Dean <dean.nelson@eecradar.com> wrote: 

		Craig,
		Would this be like a projected shape file (i.e. x,y off
of a median) ?
		 

		Regards,

		Dean Nelson   
		Enterprise Electronics Corp
		

		

			-----Original Message-----
			From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Craig Hunter
			Sent: Tuesday, July 24, 2007 11:25 AM
			To: gdal-dev@lists.maptools.org 
			Subject: [Gdal-dev] Measured Values for
Shapefile read & write
			
			
			Hi,
			 
			I performed a hack to the OGR source in order to
read and write shapefiles with measured values.  If others may find this
of value, I'll work on a patch?
			 
			Also, the SDE driver only provides read access.
Is there some technical or proprietary issues with performing write
access to SDE? or has this not been developed due to a lack of interest?
			 
			Thanks,
			Craig Hunter.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070724/e6a05c85/attachment.html
From sjahputerao at missouri.edu  Tue Jul 24 14:38:57 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Metadata preservation (or lack thereof) in NITF driver
In-Reply-To: <46A6282C.1070909@pobox.com>
References: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
	<46A61963.5040309@missouri.edu> <46A6282C.1070909@pobox.com>
Message-ID: <46A64741.7040809@missouri.edu>

Thanks, Frank.
Are you aware of other NITF driver in C/C++ that preserves the original 
metadata (most importantly RPC parameters)?
oz

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> I was using :
>>
>> gdal_translate -of nitf src.ntf dst.ntf
>>
>> The input file, src.ntf, contains some metadata items such as the RPC 
>> parameters (important to have if you want to do orthorectification). 
>> However, the result of gdal_translate above, dst.ntf, does not 
>> contain any of the RPC parameters.
>> I wrote a simple program to do something similar:
>>      GDALDataset *srcDs = (GDALDataset*) GDALOpen( srcfname.c_str(), 
>> GA_ReadOnly);
>>    char **papszCreateOptions = NULL;
>>    papszCreateOptions = srcDs->GetMetadata();
>>    GDALDriver *hDriver = (GDALDriver*) GDALGetDriverByName( "nitf" );
>>    GDALDataset *dstDs = hDriver->CreateCopy(dstfname.c_str(), srcDs, 
>> TRUE, papszCreateOptions, NULL, NULL);
>>
>> Note that I specifically fetched the source image metadata and passed 
>> it to CreateCopy.  I also specified bStrict = TRUE since I want the 
>> copy to be equivalent (just to prove a point). Even with this code 
>> the output image still does not contain any RPC parameter.
>
> Ozy,
>
> The NITF driver just doesn't support writing RPC info.
>
> The bStrict flag is not well adhered to by drivers.  You should pass it
> as a hint to drivers rather than expecting them to truely be "strict".
>
> I have recently incorporated the ability to write BLOCKA stuff from
> metadata in the NITF driver, but generally speaking the NITF driver
> writes only a fairly simple subset of possible NITF information though
> the reader tries to be more general.
>
> Best regards,


From dylan.beaudette at gmail.com  Tue Jul 24 14:52:52 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5E@FRIEDCHICKEN.eecnet.eecradar.com>
References: <BD653983CF3BF844A9B3E77CF79DA0A55FFC5E@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <200707241152.52537.dylan.beaudette@gmail.com>

Sounds like there was some kind of NADGRID mixup.... ? where you projecting 
across datums?

cheers,

Dylan

On Tuesday 24 July 2007 11:34, Nelson, Dean wrote:
> Craig,
>
> We would like our product to ingest any type of shape file (projected or
> lat/lon) and be able to run with it. However, as in the "[Gdal-dev] Is
> ogr2ogr the tool to use?" thread, I have some shapefile data from the
> USGS/Hydro1k project that is projected from a point and all of the
> values in the polygons are x,y values. I needed to convert to a Lat/Lon
> shapefile. I did it via ogr2ogr and the resulting output was placed 17km
> north of reality.
>
> I was looking for a kludgy fudge factor ;-)
>
>
>
> Regards,
>
> Dean Nelson
> Enterprise Electronics Corp
>
>
> 	-----Original Message-----
> 	From: Craig Hunter [mailto:craigrthunter@gmail.com]
> 	Sent: Tuesday, July 24, 2007 12:52 PM
> 	To: Nelson, Dean
> 	Cc: gdal-dev@lists.maptools.org
> 	Subject: Re: [Gdal-dev] Measured Values for Shapefile read &
> write
>
>
> 	Dean,
>
> 	Are you referring to an offset, in the sense you have a point on
> a line and you want to project it 100 meters off to the left side (90
> degrees) of the line?  In that case, no, but I'm pretty sure that can
> already be performed with the ogr library as it is now.
>
> 	I'm referring to measured values (M-values) that are included in
> the geometry and can be used for dynamic segmentation.
>
> 	(Sorry for the repeated message, I left the mailing list off my
> initial reply)
>
>
> 	On 7/24/07, Nelson, Dean <dean.nelson@eecradar.com> wrote:
>
> 		Craig,
> 		Would this be like a projected shape file (i.e. x,y off
> of a median) ?
>
>
> 		Regards,
>
> 		Dean Nelson
> 		Enterprise Electronics Corp
>
>
>
>
> 			-----Original Message-----
> 			From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Craig Hunter
> 			Sent: Tuesday, July 24, 2007 11:25 AM
> 			To: gdal-dev@lists.maptools.org
> 			Subject: [Gdal-dev] Measured Values for
> Shapefile read & write
>
>
> 			Hi,
>
> 			I performed a hack to the OGR source in order to
> read and write shapefiles with measured values.  If others may find this
> of value, I'll work on a patch?
>
> 			Also, the SDE driver only provides read access.
> Is there some technical or proprietary issues with performing write
> access to SDE? or has this not been developed due to a lack of interest?
>
> 			Thanks,
> 			Craig Hunter.



From dean.nelson at eecradar.com  Tue Jul 24 15:32:33 2007
From: dean.nelson at eecradar.com (Nelson, Dean)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <200707241152.52537.dylan.beaudette@gmail.com>
Message-ID: <BD653983CF3BF844A9B3E77CF79DA0A55FFC61@FRIEDCHICKEN.eecnet.eecradar.com>

Yes, I was projecting to a WSG84 from a Lambert_Azimuthal_Equal_Area
projection (as far as I can tell) See the "[Gdal-dev] Is ogr2ogr the
tool to use?" thread.

Regards,

Dean Nelson   
Enterprise Electronics Corp




-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Dylan
Beaudette
Sent: Tuesday, July 24, 2007 1:53 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Measured Values for Shapefile read & write


Sounds like there was some kind of NADGRID mixup.... ? where you
projecting 
across datums?

cheers,

Dylan

On Tuesday 24 July 2007 11:34, Nelson, Dean wrote:
> Craig,
>
> We would like our product to ingest any type of shape file (projected 
> or
> lat/lon) and be able to run with it. However, as in the "[Gdal-dev] Is
> ogr2ogr the tool to use?" thread, I have some shapefile data from the
> USGS/Hydro1k project that is projected from a point and all of the
> values in the polygons are x,y values. I needed to convert to a
Lat/Lon
> shapefile. I did it via ogr2ogr and the resulting output was placed
17km
> north of reality.
>
> I was looking for a kludgy fudge factor ;-)
>
>
>
> Regards,
>
> Dean Nelson
> Enterprise Electronics Corp
>
>
> 	-----Original Message-----
> 	From: Craig Hunter [mailto:craigrthunter@gmail.com]
> 	Sent: Tuesday, July 24, 2007 12:52 PM
> 	To: Nelson, Dean
> 	Cc: gdal-dev@lists.maptools.org
> 	Subject: Re: [Gdal-dev] Measured Values for Shapefile read &
write
>
>
> 	Dean,
>
> 	Are you referring to an offset, in the sense you have a point on
> a line and you want to project it 100 meters off to the left side (90
> degrees) of the line?  In that case, no, but I'm pretty sure that can
> already be performed with the ogr library as it is now.
>
> 	I'm referring to measured values (M-values) that are included in
> the geometry and can be used for dynamic segmentation.
>
> 	(Sorry for the repeated message, I left the mailing list off my
> initial reply)
>
>
> 	On 7/24/07, Nelson, Dean <dean.nelson@eecradar.com> wrote:
>
> 		Craig,
> 		Would this be like a projected shape file (i.e. x,y off
> of a median) ?
>
>
> 		Regards,
>
> 		Dean Nelson
> 		Enterprise Electronics Corp
>
>
>
>
> 			-----Original Message-----
> 			From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Craig Hunter
> 			Sent: Tuesday, July 24, 2007 11:25 AM
> 			To: gdal-dev@lists.maptools.org
> 			Subject: [Gdal-dev] Measured Values for
> Shapefile read & write
>
>
> 			Hi,
>
> 			I performed a hack to the OGR source in order to
> read and write shapefiles with measured values.  If others may find
this
> of value, I'll work on a patch?
>
> 			Also, the SDE driver only provides read access.
> Is there some technical or proprietary issues with performing write
> access to SDE? or has this not been developed due to a lack of
interest?
>
> 			Thanks,
> 			Craig Hunter.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From dylan.beaudette at gmail.com  Tue Jul 24 18:28:45 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC61@FRIEDCHICKEN.eecnet.eecradar.com>
References: <BD653983CF3BF844A9B3E77CF79DA0A55FFC61@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <200707241528.46379.dylan.beaudette@gmail.com>

On Tuesday 24 July 2007 12:32, Nelson, Dean wrote:
> Yes, I was projecting to a WSG84 from a Lambert_Azimuthal_Equal_Area
> projection (as far as I can tell) See the "[Gdal-dev] Is ogr2ogr the
> tool to use?" thread.
>
> Regards,
>
> Dean Nelson
> Enterprise Electronics Corp
>
If you are projecting across datums, then you might want to check that you 
installed GDAL/OGR in such a way that the NADGRIDS files were included. If 
you are outside of North America, then I am not sure how to go about this.

http://proj.maptools.org/


Cheers,

Dylan

>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Dylan
> Beaudette
> Sent: Tuesday, July 24, 2007 1:53 PM
> To: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] Measured Values for Shapefile read & write
>
>
> Sounds like there was some kind of NADGRID mixup.... ? where you
> projecting
> across datums?
>
> cheers,
>
> Dylan
>
> On Tuesday 24 July 2007 11:34, Nelson, Dean wrote:
> > Craig,
> >
> > We would like our product to ingest any type of shape file (projected
> > or
> > lat/lon) and be able to run with it. However, as in the "[Gdal-dev] Is
> > ogr2ogr the tool to use?" thread, I have some shapefile data from the
> > USGS/Hydro1k project that is projected from a point and all of the
> > values in the polygons are x,y values. I needed to convert to a
>
> Lat/Lon
>
> > shapefile. I did it via ogr2ogr and the resulting output was placed
>
> 17km
>
> > north of reality.
> >
> > I was looking for a kludgy fudge factor ;-)
> >
> >
> >
> > Regards,
> >
> > Dean Nelson
> > Enterprise Electronics Corp
> >
> >
> > 	-----Original Message-----
> > 	From: Craig Hunter [mailto:craigrthunter@gmail.com]
> > 	Sent: Tuesday, July 24, 2007 12:52 PM
> > 	To: Nelson, Dean
> > 	Cc: gdal-dev@lists.maptools.org
> > 	Subject: Re: [Gdal-dev] Measured Values for Shapefile read &
>
> write
>
> > 	Dean,
> >
> > 	Are you referring to an offset, in the sense you have a point on
> > a line and you want to project it 100 meters off to the left side (90
> > degrees) of the line?  In that case, no, but I'm pretty sure that can
> > already be performed with the ogr library as it is now.
> >
> > 	I'm referring to measured values (M-values) that are included in
> > the geometry and can be used for dynamic segmentation.
> >
> > 	(Sorry for the repeated message, I left the mailing list off my
> > initial reply)
> >
> >
> > 	On 7/24/07, Nelson, Dean <dean.nelson@eecradar.com> wrote:
> >
> > 		Craig,
> > 		Would this be like a projected shape file (i.e. x,y off
> > of a median) ?
> >
> >
> > 		Regards,
> >
> > 		Dean Nelson
> > 		Enterprise Electronics Corp
> >
> >
> >
> >
> > 			-----Original Message-----
> > 			From: gdal-dev-bounces@lists.maptools.org
> > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Craig Hunter
> > 			Sent: Tuesday, July 24, 2007 11:25 AM
> > 			To: gdal-dev@lists.maptools.org
> > 			Subject: [Gdal-dev] Measured Values for
> > Shapefile read & write
> >
> >
> > 			Hi,
> >
> > 			I performed a hack to the OGR source in order to
> > read and write shapefiles with measured values.  If others may find
>
> this
>
> > of value, I'll work on a patch?
> >
> > 			Also, the SDE driver only provides read access.
> > Is there some technical or proprietary issues with performing write
> > access to SDE? or has this not been developed due to a lack of
>
> interest?
>
> > 			Thanks,
> > 			Craig Hunter.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From szekerest at gmail.com  Tue Jul 24 19:13:51 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Create Polygon in OGR / C#
In-Reply-To: <000501c7ce17$fadf8230$2201a8c0@pcjmp>
References: <000501c7ce17$fadf8230$2201a8c0@pcjmp>
Message-ID: <f3b73b7d0707241613nd406a34qc206bd4ee5203007@mail.gmail.com>

Jean,

You might want to test with AddGeometryDirectly instead of AddGeometry so as
to avoid the extra geometry creations.

When you have a large number of points in the rings you might want to use
the CreateFromWkb method to avoid the number of invocations between the C#/C
interface. You can create a byte array containing the wkb of the polygon in
the C# side and call the static CreateFromWkb of the Geometry class with
that array.

Currently we have no such function you have mentioned, and I'm not sure
about the proper signature to use (depending on the type of the geometry) if
needed.


Best regards,

Tamas


2007/7/24, Jean Michel PIERRET <jmp@geosys.com>:
>
>  Hi,
>
>
>
>       I would like transform a geometry structure in a OGR.Geometry.
>
>
>
> Struct MyGeometry
>
> {
>
> bool [] exterior = null;
>
> int []  partStarts = null;
>
> int []  partEnds = null;
>
>
>
> double [] padfX = null;
>
> double [] padfY = null;
>
> }
>
>
>
> When I use the method ExportToWkt and CreateFromWkt it's very slow.
>
> Now I have this method for the transformation :
>
>
>
> Geometry gm = null;
>
> Geometry g = null;
>
> Geometry lr = null;
>
>
>
> g = new Geometry(wkbGeometryType.wkbPolygon);
>
>
>
> for (int i = 0; i < partStarts.Length; i++)
>
> {
>
>       if (exterior[i])
>
>       {
>
>             if (i > 0)
>
>             {
>
>                   if (gm == null)
>
>                         gm = new Geometry(wkbGeometryType.wkbMultiPolygon
> );
>
>                   gm.AddGeometry(g);
>
>                   g.Dispose();
>
>                   g = null;
>
>             }
>
>
>
>             if (g == null)
>
>                   g = new Geometry(wkbGeometryType.wkbPolygon);
>
>       }
>
>
>
>       lr = new Geometry(wkbGeometryType.wkbLinearRing);
>
>       for (int j = partStarts[i]; j < partEnds[i]; j++)
>
>             lr.AddPoint(padfX[j], padfY[j], 0);
>
>
>
>       g.AddGeometry(lr);
>
>       lr.Dispose();
>
>       lr = null;
>
> }
>
>
>
> if (gm != null)
>
> {
>
>       if (g != null)
>
>       {
>
>             gm.AddGeometry(g);
>
>             g.Dispose();
>
>             g = null;
>
>       }
>
>
>
>       return gm;
>
> }
>
> else
>
>       return g;
>
>
>
> It works but it is not very quick, It's possible to have a function like
> in the shapelib
>
>
>
> SHPObject SHPCreateObject(ShapeType shpType, int nShapeId, int nParts, int[]
> panPartStart, PartType[] paPartType, int nVertices, double[] adfX, double[]
> adfY, double[] adfZ, double[] adfM);
>
>
>
> Thanks for your support.
>
>
>
> Best Regards.
>
>
>
>
>
> *Jean-michel PIERRET <jmp@geosys.com> - Poste  376*
>
> *Tel : +33 (0)5 62 47 80 76*
> *Mail* : jmp@geosys.com
> *GEOSYS SA*
>
>
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070725/cace8177/attachment.html
From ivan.mjartan at geovap.cz  Wed Jul 25 03:30:53 2007
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] How to correct use GDALGCPTransform
Message-ID: <008001c7ce8d$bb74e7e0$1a01a8c0@pc24>

Hi list,

So I have scan of raster without georeference and I need make geo
position of this raster into SJTSK coordinate (*EPSG:102067*). I need do it 
on the fly. So I am trying use GDALCreateGCPTransformer.

My input is raster it can be tiff, bitmap, jpg and so on . output can be 
Geotiff

In my test I use polynomial order 1 and 3 GCPs points.

I followed tutorial on GDAL page. But I am not success I am doing something 
wrong and I not able find right way.

In the beginning I created blank dataset to get GeoTransform and output size 
of image like in gedalwarp.exe it is correct and I get black Geotiff and 
coordinate and size is correct. (The same when I use gedal_translate.exe to 
set GCPs and than gdalwarp to warp image). But when try use 
ChunkAndWarpImage with same Transformer the output image is still blank.  So 
I also tried debug this method and I find that inside this method is used 
WarpRegion Method but there was wrong parameters of destination image. So I 
try use WarpRegion directly without success L

I thing that I am wrong using GCPTransformer I thing that I have to set 
something in GDALWarpOptions but what? This is for me big mystery. I was 
looking on internet but there is nothing L

Can I see some sample of using GCPTransformer ?

May be I can use GenImgProjTransformer but I don't know how to set GCPs with 
out prior transform to Gtiff set GCPs and saving to Disk. (Input rasters can 
be jpg bitmap .)


So like input I used this image http://80.188.225.114/temp/input.tif

I am using GDAL 1.4.2





Thanks a lot for your help



Ivan Mjartan


the code looks like follow:

Method to get destination dataset



GDALDatasetH GDALWarpCreateOutput( char *papszSrcFiles,char *pszFilename,

                      const char *pszFormat,GDAL_GCP pasGCPList[3],int 
nReqOrder,int bReversed,int nGCPCount)

{

    GDALDriverH hDriver;

    GDALDatasetH hDstDS;

    void *hTransformArg;

    GDALColorTableH hCT = NULL;

    int nDstBandCount = 0;

                        GDALDataType eDT;

                        int nOrder = 1;





                        hDriver = GDALGetDriverByName( pszFormat );



        GDALDatasetH hSrcDS;



        hSrcDS = GDALOpen( papszSrcFiles, GA_ReadOnly );



                        if( hSrcDS == NULL )

            exit( 1 );



        eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));



        nDstBandCount = GDALGetRasterCount(hSrcDS);



        hCT = GDALGetRasterColorTable( GDALGetRasterBand(hSrcDS,1) );



                        if( hCT != NULL )

        {

            hCT = GDALCloneColorTable( hCT );

        }



                        hTransformArg = GDALCreateGCPTransformer (

                                   nGCPCount,

                                   pasGCPList,

                                   nReqOrder,

                                   bReversed

                        );



        if( hTransformArg == NULL )

            return NULL;



        double adfThisGeoTransform[6];

        int    nThisPixels, nThisLines;



                        CPLErr eErr;



        eErr = GDALSuggestedWarpOutput( hSrcDS,GDALGCPTransform, 
hTransformArg,adfThisGeoTransform,&nThisPixels, &nThisLines);



                        /*if (eErr == CE_None)

                        {

            return NULL;

                        }*/



                        GDALDestroyGCPTransformer(hTransformArg);



                        GDALClose( hSrcDS );



                        hDstDS = GDALCreate( hDriver, pszFilename, 
nThisPixels, nThisLines,

                         nDstBandCount, eDT, NULL);



                        if( hDstDS == NULL )

                                   return NULL;



                        GDALSetProjection( hDstDS, "");

                        GDALSetGeoTransform( hDstDS, adfThisGeoTransform );



                        if( hCT != NULL )

                        {

                                   GDALSetRasterColorTable( 
GDALGetRasterBand(hDstDS,1), hCT );

                                   GDALDestroyColorTable( hCT );

                        }



                        return hDstDS;

}


and my main method looks:


int main( int argc, char ** argv )



{

    GDALDatasetH       hDstDS;

    const char         *pszFormat = "GTiff";

    void               *hTransformArg;

            int i;



    GDALDataType        eOutputType = GDT_Unknown, eWorkingType = 
GDT_Unknown;

    GDALResampleAlg     eResampleAlg = GRA_NearestNeighbour;



            char               **papszWarpOptions = NULL;

            //moje definice



            char *pszSrcFilename = NULL;

            char *pszDstFilename = NULL;

            GDAL_GCP pasGCPList[3];



            int nReqOrder = 1;

            int bReversed = 0;

            int nGCPCount = 3;



/* -------------------------------------------------------------------- */

/*      input and output rasters                         */

/* -------------------------------------------------------------------- */

            //pszSrcFilename = 
CPLStrdup("c:\\Projects\\GDAL\\gdal142\\gedalwarp\\gedalwarp\\Debug\\out_beroGCP.tif");

            //pszSrcFilename = 
CPLStrdup("c:\\Projects\\GDAL\\gdal142\\gedalwarp\\gedalwarp\\Debug\\21.tif");

            pszSrcFilename = 
CPLStrdup("c:\\Projects\\GDAL\\gdal142\\gedalwarp\\gedalwarp\\Debug\\21.tif");

            pszDstFilename = 
CPLStrdup("c:\\Projects\\GDAL\\gdal142\\gedalwarp\\gedalwarp\\Debug\\out_r.tif");



    GDALAllRegister();





            //gcplist

            pasGCPList[0].dfGCPPixel = 0;

            pasGCPList[0].dfGCPLine = 0;

            pasGCPList[0].dfGCPX = -863909;

            pasGCPList[0].dfGCPY = -993283;

            pasGCPList[0].dfGCPZ = 0;

            pasGCPList[0].pszId = "1";

            pasGCPList[0].pszInfo = "info 1";



            pasGCPList[1].dfGCPPixel = 0;

            pasGCPList[1].dfGCPLine = 3403;

            pasGCPList[1].dfGCPX = -863909;

            pasGCPList[1].dfGCPY = -1024899;

            pasGCPList[1].dfGCPZ = 0;

            pasGCPList[1].pszId = "2";

            pasGCPList[1].pszInfo = "info 2";



            pasGCPList[2].dfGCPPixel = 3800;

            pasGCPList[2].dfGCPLine = 3403;

            pasGCPList[2].dfGCPX = -809988;

            pasGCPList[2].dfGCPY = -1024899;

            pasGCPList[2].dfGCPZ = 0;

            pasGCPList[2].pszId = "3";

            pasGCPList[2].pszInfo = "info 3";



            hDstDS = GDALWarpCreateOutput( pszSrcFilename, 
pszDstFilename,pszFormat,pasGCPList,nReqOrder,bReversed,nGCPCount);



    if( hDstDS == NULL )

        exit( 1 );



    GDALDatasetH hSrcDS;



    hSrcDS = GDALOpen(pszSrcFilename, GA_ReadOnly );



    if( hSrcDS == NULL )

         exit( 2 );



/* -------------------------------------------------------------------- */

/*      Create a transformation object                                */

/* -------------------------------------------------------------------- */

        hTransformArg = GDALCreateGCPTransformer (

                                   nGCPCount,

                                   pasGCPList,

                                   nReqOrder,

                                   bReversed

                        );



        if( hTransformArg == NULL )

            return NULL;



/* -------------------------------------------------------------------- */

/*      Setup warp options.                                             */

/* -------------------------------------------------------------------- */

        GDALWarpOptions *psWO = GDALCreateWarpOptions();

                        psWO->pfnProgress = GDALTermProgress;

                        psWO->eWorkingDataType = 
GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

        //psWO->eResampleAlg = eResampleAlg;



        psWO->hSrcDS = hSrcDS;

        psWO->hDstDS = hDstDS;



        psWO->pfnTransformer = GDALGCPTransform;

        psWO->pTransformerArg = hTransformArg;



/* -------------------------------------------------------------------- */

/*      Setup band mapping.                                             */

/* -------------------------------------------------------------------- */



                        psWO->nBandCount = GDALGetRasterCount(hSrcDS);



        psWO->panSrcBands = (int *) CPLMalloc(psWO->nBandCount*sizeof(int));

        psWO->panDstBands = (int *) CPLMalloc(psWO->nBandCount*sizeof(int));



        for( i = 0; i < psWO->nBandCount; i++ )

        {

            psWO->panSrcBands[i] = i+1;

            psWO->panDstBands[i] = i+1;

        }



/* -------------------------------------------------------------------- */

/*      Initialize and execute the warp.                                */

/* -------------------------------------------------------------------- */

        GDALWarpOperation oWO;



        if( oWO.Initialize( psWO ) == CE_None )

        {

                                   //if (oWO.ChunkAndWarpImage( 0, 0, 
GDALGetRasterXSize( hDstDS ),GDALGetRasterYSize( hDstDS ) )==CE_Failure){

                                               //printf("Error");



                                   //}

                                   oWO.WarpRegion( 0, 0, 
GDALGetRasterXSize( hDstDS ),GDALGetRasterYSize( hDstDS ),0, 0, 
GDALGetRasterXSize( hSrcDS ),GDALGetRasterYSize( hSrcDS ));

        }



/* -------------------------------------------------------------------- */

/*      Cleanup                                                         */

/* -------------------------------------------------------------------- */



                        if( hTransformArg != NULL ){

                                   GDALDestroyGCPTransformer( 
hTransformArg );

                        }



                        GDALClose( hDstDS );

                        GDALClose( hSrcDS );

        GDALDestroyWarpOptions( psWO );

                        GDALDestroyDriverManager();



    return 0;

} 




From jukka.rahkonen at mmmtike.fi  Wed Jul 25 04:16:04 2007
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: trouble with "gdal_translate-a_nodata" for
	Erdas	Imagine output
References: <64df04ba0707160923w3e87b8c0g46974e44b9e2fd50@mail.gmail.com>
Message-ID: <loom.20070725T101145-697@post.gmane.org>

Mark Phillips <mbp <at> geomtech.com> writes:

> 
> Hi.  I'm using FWTools-1.3.4 on Linux, and I'm having trouble adding a
> NoData file to an Erdas Imagine file with gdal_translate.  It works
> fine for GeoTiff.  Am I doing something wrong?  Does Erdas Imagine
> support NoData values?  Here's a session showing what I'm doing:

Hi.

I made a trial with gdalwarp, which gave me a message:
ERROR 6: SetNoDataValue() not supported for this dataset.
I don't know if it is because of Imagine .img format or the driver, but
obviously NoData value can not be set.

-Jukka Rahkonen-


From josevicente.higon at gmail.com  Wed Jul 25 05:05:16 2007
From: josevicente.higon at gmail.com (=?iso-8859-1?q?Jos=E9_Vicente_Hig=F3n?=)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
Message-ID: <200707251105.17185.josevicente.higon@iver.es>

Hi,
I configured a layer in Mapserver which datasource was an ECW image in 
EPSG:23030. When I requested the layer in other reference system like 
EPSG:4326, I got an error, the image was shift some meters. We solve the 
problem modifying the epsg file in proj directory with this line:
<23030> +proj=utm +zone=30 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m 
+nadgrids=sped2et.gsb +no_defs  <>
and adding the file sped2et.gsb in the same location as the epsg file. With 
these changes Mapserver worked fine and the error disappeared. 
My surprise was when I tried to reproject a raster with gdalwarp:
gdalwarp -of HFA -s_srs "EPSG:23030" -t_srs "EPSG:4326" source.ecw dest.img
I got the image with the shift error, in fact, I got the same image before 
made the changes in the proj file. 

In both cases I was using the latest FWTools release (1.3.4)

Why Did I get differents results in MApserver and gdalwarp?Any clue?

Thanks in advance

-- 
Jos? Vicente Hig?n Valero
Grupo desarrollo gvSIG. 
IVER TI S.A. 
C/Salamanca, 50-52 46005-Valencia
Tlf.+34963163400 
http://www.iver.es
http://www.gvsig.com 
http://www.gvsig.gva.es


From ASP at blominfo.dk  Wed Jul 25 08:21:39 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] nodata in VRTKernelFilteredSource
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A4774CA@posthus.blominfo.dk>

Hi list,

I'm having some issues with the filter in VRTKernelFilteredSource.

Firstly I think it would be great, if it handled nodata values and
secondly I am confused about the "Normalized" attribute.
 
At the moment nodata values are not recognized and are therefore
included in the convolution like any other value. I guess there are a
lot of different ways to handle nodata when filtering, but I think the
current is the least optimal.

Regarding the "normalized" attribute I think the naming is
counterintuitive when looking at how it is actually implemented in
vrtfilters.cpp. Actually the kernel is only normalized if "Normalized"
is true.

Below I have tried to sketch up a suggestion of a possible solution to
both issues. My c++ skills leave room for improvement so please consider
it some kind of pseudo code :-)

vrtfilters.cpp from line 455:

for( iY = 0; iY < nYSize; iY++ )
{
  for( iX = 0; iX < nXSize; iX++ )
  {
    int  iYY, iKern = 0;
    double dfSum = 0.0, dfKernSum = 0.0;
    float fResult;
    bool bNormalize = !bNormalized;

    // Check if center srcpixel is NoData
    if( ((float *)pabySrcData)[(iY+nKernelSize/2 + 1) *
(nXSize+2*nExtraEdgePixels) + iX + nKernelSize/2 +1 != dfNoDataValue)
    {
     for( iYY = 0; iYY < nKernelSize; iYY++ )
     {
       int i;
       float *pafData = ((float *)pabySrcData) 
         + (iY+iYY) * (nXSize+2*nExtraEdgePixels) + iX;

       for( i = 0; i < nKernelSize; i++, pafData++, iKern++ )
       {
         if(*pafData != dfNoDataValue)
         {
          dfSum += *pafData * padfKernelCoefs[iKern];
          dfKernSum += padfKernelCoefs[iKern];
         }
         else
          bNormalize = true; // Force normalization when only using part
of the kernel
       }
     }

     if( bNormalize )
     {
       if( dfKernSum != 0.0 )
         fResult = (float) (dfSum / dfKernSum);
       else
         fResult = 0.0;
     }
     else
       fResult = (float) dfSum;

     ((float *) pabyDstData)[iX + iY * nXSize] = fResult;
    }
    else
     ((float *) pabyDstData)[iX + iY * nXSize] = dfNoDataValue;
  }
}

I hope the ideas are clear from the above.

Best regards
Asger


From warmerdam at pobox.com  Wed Jul 25 09:27:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
In-Reply-To: <200707251105.17185.josevicente.higon@iver.es>
References: <200707251105.17185.josevicente.higon@iver.es>
Message-ID: <46A74FD1.5040004@pobox.com>

Jos? Vicente Hig?n wrote:
> In both cases I was using the latest FWTools release (1.3.4)
> 
> Why Did I get differents results in MApserver and gdalwarp?Any clue?

Jos?,

GDAL does not generally use the PROJ.4 epsg init file.  Instead it has
a set of .csv files with the EPSG definition information.

I think you will want to edit this line of FWTools/data/pcs.csv:

23030,"ED50 / UTM zone 
30N",9001,4230,16030,9807,1,0,8805,0.9996,9201,8802,-3,9102,8801,0,9102,8807,0,9001,8806,500000,9001,,,,,,

To include include the TOWGS84 values.  Something like:

23030,"ED50 / UTM zone 
30N",9001,4230,16030,9807,1,0,8805,0.9996,9201,8802,-3,9102,8801,0,9102,8807,0,9001,8806,500000,9001,-87,-98,-121,0,0,0,0 


You might want to verify that GDAL is picking up the definition properly
by entering "testepsg EPSG:23030" in the FWTools shell which will
report the coordinate system in various forms.  Make sure that one (the
first I think) includes the proper TOWGS84[] parameters and that they make
it into the final PROJ.4 rendering.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jul 25 09:46:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] How to correct use GDALGCPTransform
In-Reply-To: <008001c7ce8d$bb74e7e0$1a01a8c0@pc24>
References: <008001c7ce8d$bb74e7e0$1a01a8c0@pc24>
Message-ID: <46A7541C.3010405@pobox.com>

Ivan Mjartan wrote:
> I thing that I am wrong using GCPTransformer I thing that I have to set 
> something in GDALWarpOptions but what? This is for me big mystery. I was 
> looking on internet but there is nothing L
> 
> Can I see some sample of using GCPTransformer ?
> 
> May be I can use GenImgProjTransformer but I don't know how to set GCPs 
> with out prior transform to Gtiff set GCPs and saving to Disk. (Input 
> rasters can be jpg bitmap .)

Ivan,

I believe your problem is that the warper needs a transformer that goes
from input pixel/line coordinates to destination pixel/line coordinates (and
the reverse).  But the GDALGCPTransformer only does source pixel/line to
source georeferenced coordinates.  If you look at GenImgProjTransform() in
gdal/alg/gdaltransformer.cpp you may note it actually performs several steps.
One from source pixel/line to source georef.  Then potentially reproject
to destination pixel/line.  Then dest georef to dest pixel/line.

You could implement your own similar transformer somewhat similar to
GDALGenImgProjTransform, but I think the easier way is just to associate
the GCPs with the source image.  If it is impractical to write the image
to a new TIFF file with gdal_translate, and with the GCPs associated, then
another approach without intermediate files would be to create an in-memory
VRT dataset using GDALCreateCopy() from the source image, and then call
SetGCPs() on that VRT dataset.

Then use the VRT as an input with the GenImgProj transformer.

BTW, to avoid having a VRT written to disk, just use the filename "" for
it when calling CreateCopy().

BTW, the way you included your code (tab expansion, extra blank lines)
made it nearly unreadable.

Good work on all you have already learned about the warper!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From j.l.h.hartmann at uva.nl  Wed Jul 25 09:54:30 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
In-Reply-To: <46A74FD1.5040004@pobox.com>
References: <200707251105.17185.josevicente.higon@iver.es>
	<46A74FD1.5040004@pobox.com>
Message-ID: <46A75616.8080600@uva.nl>

Frank, is there any reason why Gdal doesn't use the epsg-file? Wouldn't 
it make things easier if it did? In my experience, this double 
administration can cause problems that are very hard to detect.

Even better of course is Howard Butler's web-based approach:

http://lists.maptools.org/pipermail/gdal-dev/2007-July/013641.html

Jan

Frank Warmerdam wrote:
> Jos? Vicente Hig?n wrote:
>> In both cases I was using the latest FWTools release (1.3.4)
>>
>> Why Did I get differents results in MApserver and gdalwarp?Any clue?
> 
> Jos?,
> 
> GDAL does not generally use the PROJ.4 epsg init file.  Instead it has
> a set of .csv files with the EPSG definition information.
> 
> I think you will want to edit this line of FWTools/data/pcs.csv:
> 
> 23030,"ED50 / UTM zone 
> 30N",9001,4230,16030,9807,1,0,8805,0.9996,9201,8802,-3,9102,8801,0,9102,8807,0,9001,8806,500000,9001,,,,,, 
> 
> 
> To include include the TOWGS84 values.  Something like:
> 
> 23030,"ED50 / UTM zone 
> 30N",9001,4230,16030,9807,1,0,8805,0.9996,9201,8802,-3,9102,8801,0,9102,8807,0,9001,8806,500000,9001,-87,-98,-121,0,0,0,0 
> 
> 
> You might want to verify that GDAL is picking up the definition properly
> by entering "testepsg EPSG:23030" in the FWTools shell which will
> report the coordinate system in various forms.  Make sure that one (the
> first I think) includes the proper TOWGS84[] parameters and that they make
> it into the final PROJ.4 rendering.
> 
> Best regards,

From warmerdam at pobox.com  Wed Jul 25 10:47:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
In-Reply-To: <46A75616.8080600@uva.nl>
References: <200707251105.17185.josevicente.higon@iver.es>
	<46A74FD1.5040004@pobox.com> <46A75616.8080600@uva.nl>
Message-ID: <46A7626A.1040601@pobox.com>

Jan Hartmann wrote:
> Frank, is there any reason why Gdal doesn't use the epsg-file? Wouldn't 
> it make things easier if it did? In my experience, this double 
> administration can cause problems that are very hard to detect.

Jan,

First, there are a fair number of folks who use GDAL without
PROJ.4, but it is still necessary to be able to expand EPSG
codes into full definitions for translation purposes.

Second, the PROJ.4 epsg definitions are not very complete.  For
translation I need to know things like the EPSG code for the
datum.  Also, PROJ.4 doesn't have the descriptive name for
coordinate systems and components which I use to populate the

Perversely libgeotiff also has it's own copy of the EPSG
definitions, as does PostGIS.

I agree this can be annoying, but I'm not sure what the solution is.

> Even better of course is Howard Butler's web-based approach:
> 
> http://lists.maptools.org/pipermail/gdal-dev/2007-July/013641.html

I'm very excited about spatialreference.org, but I don't think it
solves all problems.  In particular, most software needs to work fine
in a not-internet-connected situation so I don't want to depend on
web services for my basic coordinate systems support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jul 25 10:55:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC61@FRIEDCHICKEN.eecnet.eecradar.com>
References: <BD653983CF3BF844A9B3E77CF79DA0A55FFC61@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <46A76454.8050903@pobox.com>

Nelson, Dean wrote:
> Yes, I was projecting to a WSG84 from a Lambert_Azimuthal_Equal_Area
> projection (as far as I can tell) See the "[Gdal-dev] Is ogr2ogr the
> tool to use?" thread.

Dean,

The issue isn't nad grid files.  That won't account for 17km offsets.
Datum shift problems are normally in the 10-300m range.

The problem is that your source coordinate system uses a spherical
earth, but WGS84 is elliptical.  The *default* mechanism used by
PROJ.4 for such transformation is to convert your location on the
spherical earth to an absolute (geocentric) location, and then to
translate that onto the ellipsoid. But what people almost always
want is to assume that a given lat/long position on the sphere should
be treated as identical to the same lat/long on the ellipsoid.

My suggestion is to create a d_sphere.prj file with the following
contents:

GEOGCS[
"GCS_Sphere_ARC_INFO",DATUM["D_Sphere_ARC_INFO",SPHEROID["Sphere_ARC_INFO",
6370997.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]

Then do:

   ogr2ogr -t_srs d_sphere.prj -f "ESRI Shapefile" outfile.shp infile.shp

After that you can delete the outfile.prj file, and replace it with the
WGS84 equivelent (such as was produced by your earlier -t_srs WGS84
translation).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Strobl at dlr.de  Wed Jul 25 10:55:06 2007
From: Christian.Strobl at dlr.de (Christian.Strobl@dlr.de)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] shift coordinates with gdal
Message-ID: <AC78B6BABBC9A74C95028F87A0EACF79A6C10A@exbe04.intra.dlr.de>


hi list,
i have only a short user question concerning gdal: 
is it possible to shift a image with a certain amount, for example: i have satellite data with geographic coordinates from 0? to 360? longitude and i want them to shift to -180? to +180?. is there a chance to solve this problem with gdal or exists a workaround?
thanks and greetings from munich
christian


From warmerdam at pobox.com  Wed Jul 25 11:01:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Metadata preservation (or lack thereof) in NITF driver
In-Reply-To: <46A64741.7040809@missouri.edu>
References: <E3F2D3059E1EDF469CAA5A4FF1C5959E320840@NDMSEVS31B.ndc.nasa.gov>
	<46A61963.5040309@missouri.edu> <46A6282C.1070909@pobox.com>
	<46A64741.7040809@missouri.edu>
Message-ID: <46A765BC.8010904@pobox.com>

Ozy Sjahputera wrote:
> Thanks, Frank.
> Are you aware of other NITF driver in C/C++ that preserves the original 
> metadata (most importantly RPC parameters)?
> oz

Ozy,

The OSSIM folks have quite sophisticated NITF support, but I don't know
the details.  You might look into it.  But writing RPCs is a somewhat
involved and specialized process so I'm a bit doubtful they address it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jmp at geosys.com  Wed Jul 25 11:47:28 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Create Polygon in OGR / C#
Message-ID: <000a01c7ced3$1b570ea0$2201a8c0@pcjmp>

Hi,

 

I have changed all ?AddGeometry? by ?AddGeometryDirectly? and nothing has
changed. 

 

Also i have creates a method to convert my structure into "wkb" and i use
"Geometry.CreateFromWkb" but it's not more quick than the other method.

 

Any idea ?

 

    int cpt;

    byte [] bnbexterior = null;

 

    cpt = 0;

    wkb = new byte [wkbSize];

 

    if (this.ismulti)

    {

            cpt += 4;

            wkb[cpt++] = 6;

 

            bnbexterior = BitConverter.GetBytes(this.getNbExterior());

            if (BitConverter.IsLittleEndian)

                        Array.Reverse(bnbexterior);

            bnbexterior.CopyTo(wkb, cpt);

            cpt += 4;

    }

 

    for (int i = 0; i < this.partStarts.Length; i++)

    {

            byte [] bnbring = null, bnbpoint = null;

 

            if (i == 0 || this.exterior[i])

            {

                           cpt += 4;

                           wkb[cpt++] = 3;

                           bnbring =
BitConverter.GetBytes(this.getNbRing(i));

                           if (BitConverter.IsLittleEndian)

                                      Array.Reverse(bnbring);

                           bnbring.CopyTo(wkb, cpt);

                           cpt += 4;

            }

 

            bnbpoint = BitConverter.GetBytes(this.partEnds[i] -
this.partStarts[i]);

            if (BitConverter.IsLittleEndian)

                           Array.Reverse(bnbpoint);

            bnbpoint.CopyTo(wkb, cpt);

            cpt += 4;

 

            for (int j = this.partStarts[i]; j < this.partEnds[i]; j++)

            {

                           byte [] bX = null, bY = null;

 

                           bX = BitConverter.GetBytes(this.padfX[j]);

                           bY = BitConverter.GetBytes(this.padfY[j]);

 

                           if (BitConverter.IsLittleEndian)

                           {

                                          Array.Reverse(bX);

                                          Array.Reverse(bY);

                           }

 

                           bX.CopyTo(wkb, cpt);

                           cpt += 8;

                           bY.CopyTo(wkb, cpt);

                           cpt += 8;

            }

    }

 

Thanks.

Regards. 


 <mailto:jmp@geosys.com> Jean-michel PIERRET - Poste  376


Tel : +33 (0)5 62 47 80 76
Mail :  <mailto:jmp@geosys.com> jmp@geosys.com
GEOSYS SA

 

 

-----Message d'origine-----
De : Tamas Szekeres [mailto:szekerest@gmail.com] 
Envoy? : mercredi 25 juillet 2007 01:14
? : Jean Michel PIERRET
Cc : gdal-dev@lists.maptools.org
Objet : Re: [Gdal-dev] Create Polygon in OGR / C#

 

Jean,

You might want to test with AddGeometryDirectly instead of AddGeometry so as
to avoid the extra geometry creations.

When you have a large number of points in the rings you might want to use
the CreateFromWkb method to avoid the number of invocations between the C#/C
interface. You can create a byte array containing the wkb of the polygon in
the C# side and call the static CreateFromWkb of the Geometry class with
that array. 

Currently we have no such function you have mentioned, and I'm not sure
about the proper signature to use (depending on the type of the geometry) if
needed.
 

Best regards,

Tamas 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070725/e106a0c1/attachment.html
From mbp at geomtech.com  Wed Jul 25 12:01:28 2007
From: mbp at geomtech.com (Mark Phillips)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] looking for NoData compatibility with ESRI
Message-ID: <64df04ba0707250901u2faeb4c7i5dd2935f67274a58@mail.gmail.com>

I'd like to use GDAL to write raster files containing a NoData value, in a
binary format that can be recognized by ESRI software (ArcMap, etc).  I've
tried several experiments and haven't come up with anything that works yet.
Geotiff seemed like an obvious choice, but apparently ESRI uses a different
convention from GDAL in geotiffs for storing the NoData value.  I also tried
ERDAS Imagine format, but it seems that GDAL can't write the NoData value in
an HFA file.

It doesn't matter to me which format it is --- I just need support for one
band, georeferencing, and a NoData value, in a format that I can write with
GDAL and then hand over to someone who uses ArcMap, so that when they load
the file, ArcMap correctly understands the georeferencing and the NoData
value.

I think it will work with AAIGrid (ESRI's ascii grid format), but it is
huge.  Does anyone know if it is possible with one of the binary formats?

Thanks,

--Mark

-- 
Mark Phillips
Geometry Technologies LLC
mbp@geomtech.com
828-628-0489
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070725/6eff4f05/attachment.html
From szekerest at gmail.com  Wed Jul 25 14:12:05 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Create Polygon in OGR / C#
In-Reply-To: <000501c7cecd$5a20b920$2201a8c0@pcjmp>
References: <f3b73b7d0707241613nd406a34qc206bd4ee5203007@mail.gmail.com>
	<000501c7cecd$5a20b920$2201a8c0@pcjmp>
Message-ID: <f3b73b7d0707251112ia600513m112fe159438b6995@mail.gmail.com>

2007/7/25, Jean Michel PIERRET <jmp@geosys.com>:
>
>
>             I have changed all "AddGeometry" by "AddGeometryDirectly" and
> nothing has changed.
>

Jean,

If you doesn't experience much difference then the extra geometry creation
was not the cause of the performance weakness.


Also i have creates a method to convert my structure into "wkb" and i use "
> Geometry.CreateFromWkb" but it's not more quick than the other method.
>

Hmmm... I don't think if we can ever overstep this approach dramatically
with a much more performant  option. With this option most of the work is
implemented in OGRLinearRing::_importFromWkb (ogrlinearring.cpp)
With your proposal we should do mostly the same (considering that the wkb
byte ordering matches with your platform byte ordering - wkbXDR in case if
the intel platforms -.)

Do you have any clue which method causes slow execution, or could you create
a simple example including the various implementations mentioned before so
as to make some further investigations with that?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070725/2a6d2e5b/attachment.html
From condit at sdsc.edu  Wed Jul 25 15:52:00 2007
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] shift coordinates with gdal
In-Reply-To: <AC78B6BABBC9A74C95028F87A0EACF79A6C10A@exbe04.intra.dlr.de>
References: <AC78B6BABBC9A74C95028F87A0EACF79A6C10A@exbe04.intra.dlr.de>
Message-ID: <845AADAC1106E44996327D62097E4C6BDAD340@et.ad.sdsc.edu>

Hi Christian-
There was a discussion about this June last year. (see http://lists.maptools.org/pipermail/gdal-dev/2006-June/) and search for "Tool to convert shapefile".

To recap my response you could:
%gdaltx% -srcwin 0 0 360 330 -a_ullr 0 89.250 180 -75.25 source.tif right.tif
%gdaltx% -srcwin 360 0 360 330 -a_ullr -180 89.250 0 -75.25 source.tif left.tif
%gdalmg% -o correct.tif left.tif right.tif
%gdalinfo% -mm correct.tif

In my case the raster does not cover the entire globe, but you can put the correct values for your raster in the first two lines. Basically but the image into two files and then merge them.

-Chris

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Christian.Strobl@dlr.de
Sent: Wednesday, July 25, 2007 07:55
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] shift coordinates with gdal


hi list,
i have only a short user question concerning gdal: 
is it possible to shift a image with a certain amount, for example: i have satellite data with geographic coordinates from 0? to 360? longitude and i want them to shift to -180? to +180?. is there a chance to solve this problem with gdal or exists a workaround?
thanks and greetings from munich
christian

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Jul 25 21:52:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Create Polygon in OGR / C#
In-Reply-To: <000501c7ce17$fadf8230$2201a8c0@pcjmp>
References: <000501c7ce17$fadf8230$2201a8c0@pcjmp>
Message-ID: <46A7FE41.3040204@pobox.com>

Jean Michel PIERRET wrote:
> Hi,
> 
>  
> 
>       I would like transform a geometry structure in a OGR.Geometry.
> 
>  
> 
> Struct MyGeometry
> 
> {
> 
> bool [] exterior = null;
> 
> int []  partStarts = null;
> 
> int []  partEnds = null;
> 
>  
> 
> double [] padfX = null;
> 
> double [] padfY = null;
> 
> }
> 
>  
> 
> When I use the method ExportToWkt and CreateFromWkt it?s very slow.
> 
> Now I have this method for the transformation :
> 
>  
> 
> Geometry gm = null;
> 
> Geometry g = null;
> 
> Geometry lr = null;
> 
>  
> 
> g = new Geometry(wkbGeometryType.wkbPolygon);
> 
>  
> 
> for (int i = 0; i < partStarts.Length; i++)
> 
> {
> 
>       if (exterior[i])
> 
>       {
> 
>             if (i > 0)
> 
>             {
> 
>                   if (gm == null)
> 
>                         gm = new Geometry(wkbGeometryType.wkbMultiPolygon);
> 
>                   gm.AddGeometry(g);
> 
>                   g.Dispose();
> 
>                   g = null;
> 
>             }
> 
>  
> 
>             if (g == null)
> 
>                   g = new Geometry(wkbGeometryType.wkbPolygon);
> 
>       }
> 
>  
> 
>       lr = new Geometry(wkbGeometryType.wkbLinearRing);
> 
>       for (int j = partStarts[i]; j < partEnds[i]; j++)
> 
>             lr.AddPoint(padfX[j], padfY[j], 0);
> 
>  
> 
>       g.AddGeometry(lr);
> 
>       lr.Dispose();
> 
>       lr = null;
> 
> }
> 
>  
> 
> if (gm != null)
> 
> {
> 
>       if (g != null)
> 
>       {
> 
>             gm.AddGeometry(g);
> 
>             g.Dispose();
> 
>             g = null;
> 
>       }
> 
>  
> 
>       return gm;
> 
> }
> 
> else
> 
>       return g;
> 
>  
> 
> It works but it is not very quick, It?s possible to have a function like 
> in the shapelib
> 
>  
> 
> SHPObject SHPCreateObject(ShapeType shpType, int nShapeId, int nParts, 
> int[] panPartStart, PartType[] paPartType, int nVertices, double[] adfX, 
> double[] adfY, double[] adfZ, double[] adfM);

Jean-michel,

I'm not sure I'd want an all in one function like SHPCreateObject(), but
I think it would be helpful (and easy) to add an AddPoints() or SetPoints()
method for line strings to add a whole array of points in one step.  That
would likely help a lot.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jul 25 22:13:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] looking for NoData compatibility with ESRI
In-Reply-To: <64df04ba0707250901u2faeb4c7i5dd2935f67274a58@mail.gmail.com>
References: <64df04ba0707250901u2faeb4c7i5dd2935f67274a58@mail.gmail.com>
Message-ID: <46A80367.9080109@pobox.com>

Mark Phillips wrote:
> I'd like to use GDAL to write raster files containing a NoData value, in 
> a binary format that can be recognized by ESRI software (ArcMap, etc).  
> I've tried several experiments and haven't come up with anything that 
> works yet.  Geotiff seemed like an obvious choice, but apparently ESRI 
> uses a different convention from GDAL in geotiffs for storing the NoData 
> value.  I also tried ERDAS Imagine format, but it seems that GDAL can't 
> write the NoData value in an HFA file.
> 
> It doesn't matter to me which format it is --- I just need support for 
> one band, georeferencing, and a NoData value, in a format that I can 
> write with GDAL and then hand over to someone who uses ArcMap, so that 
> when they load the file, ArcMap correctly understands the georeferencing 
> and the NoData value.
> 
> I think it will work with AAIGrid (ESRI's ascii grid format), but it is 
> huge.  Does anyone know if it is possible with one of the binary formats?

Mark,

I'm sorry, but I can't think of any obvious (efficient) raster format that
you can transport nodata values in from GDAL to older versions of ArcGIS.

The most recent versions should recognise the GDAL nodata tag in GeoTIFF
but that doesn't help with older ones.

I think I have contributed code sitting in Trac for implementing nodata
support in the HFA driver but I don't think I've integrated it yet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From abhay.menon at gmail.com  Thu Jul 26 03:00:57 2007
From: abhay.menon at gmail.com (abhay menon)
Date: Wed Nov 21 11:50:58 2007
Subject: [GDAL-dev] GEOS with GDAL
Message-ID: <7a30cd70707260000y4e81678epd7eb48e221b720e9@mail.gmail.com>

Hello all,

How do I verify that GEOS compilation is working with my GDAL utility.

I have compiled the gdal-1.4.1 with geos-3.0.0-rc4 in vs2003 for some
process to build in vc6.

  OGRPolygon *poPolygon = new OGRPolygon();
  OGRPoint *pSt = new OGRPoint();

when I issue this :

1)  int i = poPolygon->PointOnSurface(pSt);

result pSt is empty and i = 6.
and when I try this :

2)  int i =  poPolygon->Centroid(pSt);

it gives me an error and the application quits

But when I tried the same with vs2003 the 2) step breaks at getX();
1) step result the same as earlier.


-- 
Best Regards

Abhay Menon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070726/8ed07eff/attachment.html
From josevicente.higon at gmail.com  Thu Jul 26 08:45:27 2007
From: josevicente.higon at gmail.com (=?iso-8859-1?q?Jos=E9_Vicente_Hig=F3n?=)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
In-Reply-To: <46A74FD1.5040004@pobox.com>
References: <200707251105.17185.josevicente.higon@iver.es>
	<46A74FD1.5040004@pobox.com>
Message-ID: <200707261445.29110.josevicente.higon@gmail.com>

On Wednesday 25 July 2007 15:27:45 Frank Warmerdam wrote:
> Jos? Vicente Hig?n wrote:
> > In both cases I was using the latest FWTools release (1.3.4)
> >
> > Why Did I get differents results in MApserver and gdalwarp?Any clue?
>
> Jos?,
>
> GDAL does not generally use the PROJ.4 epsg init file.  Instead it has
> a set of .csv files with the EPSG definition information.
>
> I think you will want to edit this line of FWTools/data/pcs.csv:
>
> 23030,"ED50 / UTM zone
> 30N",9001,4230,16030,9807,1,0,8805,0.9996,9201,8802,-3,9102,8801,0,9102,880
>7,0,9001,8806,500000,9001,,,,,,
>
> To include include the TOWGS84 values.  Something like:
>
> 23030,"ED50 / UTM zone
> 30N",9001,4230,16030,9807,1,0,8805,0.9996,9201,8802,-3,9102,8801,0,9102,880
>7,0,9001,8806,500000,9001,-87,-98,-121,0,0,0,0
>
>
> You might want to verify that GDAL is picking up the definition properly
> by entering "testepsg EPSG:23030" in the FWTools shell which will
> report the coordinate system in various forms.  Make sure that one (the
> first I think) includes the proper TOWGS84[] parameters and that they make
> it into the final PROJ.4 rendering.
>
> Best regards,

Thank you for your answer,
I've installed gdal 1.4.0 and I've changed the file 
gdal-1.4.0/share/gdal/pcs.csv, now I have a line like this:
23030,"ED50 / UTM zone 
30N",9001,4230,16030,9807,1,0,8801,0,9102,8802,-3,9102,8805,0.9996,9201,8806,500000,9001,8807,0,9001,-87,-98,-121,0,0,0,0
However, I am still getting a wrong reprojected image (shifted over a hundred 
meters).  I think the reason is because I am not specifying the nad grid 
shift file ( in my case sped2et.gsb). Am I right?
How can you specify to gdal for using this kind of file in reprojections?

Thanks in advance


From warmerdam at pobox.com  Thu Jul 26 09:16:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
In-Reply-To: <200707261445.29110.josevicente.higon@gmail.com>
References: <200707251105.17185.josevicente.higon@iver.es>
	<46A74FD1.5040004@pobox.com>
	<200707261445.29110.josevicente.higon@gmail.com>
Message-ID: <46A89E92.2@pobox.com>

Jos? Vicente Hig?n wrote:
> Thank you for your answer,
> I've installed gdal 1.4.0 and I've changed the file 
> gdal-1.4.0/share/gdal/pcs.csv, now I have a line like this:
> 23030,"ED50 / UTM zone 
> 30N",9001,4230,16030,9807,1,0,8801,0,9102,8802,-3,9102,8805,0.9996,9201,8806,500000,9001,8807,0,9001,-87,-98,-121,0,0,0,0
> However, I am still getting a wrong reprojected image (shifted over a hundred 
> meters).  I think the reason is because I am not specifying the nad grid 
> shift file ( in my case sped2et.gsb). Am I right?
> How can you specify to gdal for using this kind of file in reprojections?

Jos?,

I'm sorry, I missed your specification of a nadgrids file. Generally it is
bad to specify a +towgs84 parameter and a nadgrid as it isn't absolutely
certain which will be used.

Unfortunately there is no way to update the pcs.csv file to specify a
nadgrid.  One thing that might work is to remove the above 23030 line
from pcs.csv, and add the following line at the beginning of
gdal/data/epsg.wkt (make sure this is just one line, not split on
spaces as it likely is in my email):

23030,PROJCS["UTM Zone 30, Northern Hemisphere",GEOGCS["International 1909 
(Hayford)",DATUM["unknown",SPHEROID["intl",6378388,297]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-3],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1],EXTENSION["PROJ4","+proj=utm 
+zone=30 +ellps=intl +units=m +nadgrids=sped2et.gsb +wktext +no_defs"]]

The "trick" is the EXTENSION["PROJ4","..."] block that tells GDAL/OGR to
use a particular PROJ.4 translation when converting to proj.4 format.

The epsg.wkt file is, I think, consulted if a pcs is not found in the
pcs.csv file so it is important that it be properly removed from there for
this to work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dean.nelson at eecradar.com  Thu Jul 26 10:18:45 2007
From: dean.nelson at eecradar.com (Nelson, Dean)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <46A76454.8050903@pobox.com>
Message-ID: <BD653983CF3BF844A9B3E77CF79DA0A55FFC6C@FRIEDCHICKEN.eecnet.eecradar.com>

Frank, et al,

I agree - its not a datum issue here.

I have tried the solution suggested by Frank with no change in the
results. However, in delving deeper into the data for this particular
project, it appears that all of this data is off about 10 min in Lat. I
can't explain it - so I'll ask the source: USGS - which may prove to be
a daunting task for a whimp like me.

In the mean time I would like to know a few techniques to get me through
the day:

1. If I have a shape file that is 10 min off in lat, how can I shift it
to the right spot with the GDAL/OGR tools? Or do I need to write a
little code?

Since I am dealing with 1km resolution hydrology basins, accuracy is not
a huge concern.

2. When I reproject with ogr2ogr, the data come out 0-360 longitude. How
can I make it +-180?

You all have been so helpful, Thanks!

Regards,

Dean Nelson   
Enterprise Electronics Corp




-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, July 25, 2007 9:55 AM
To: Nelson, Dean
Cc: Dylan Beaudette; gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Measured Values for Shapefile read & write


Nelson, Dean wrote:
> Yes, I was projecting to a WSG84 from a Lambert_Azimuthal_Equal_Area 
> projection (as far as I can tell) See the "[Gdal-dev] Is ogr2ogr the 
> tool to use?" thread.

Dean,

The issue isn't nad grid files.  That won't account for 17km offsets.
Datum shift problems are normally in the 10-300m range.

The problem is that your source coordinate system uses a spherical
earth, but WGS84 is elliptical.  The *default* mechanism used by PROJ.4
for such transformation is to convert your location on the spherical
earth to an absolute (geocentric) location, and then to translate that
onto the ellipsoid. But what people almost always want is to assume that
a given lat/long position on the sphere should be treated as identical
to the same lat/long on the ellipsoid.

My suggestion is to create a d_sphere.prj file with the following
contents:

GEOGCS[
"GCS_Sphere_ARC_INFO",DATUM["D_Sphere_ARC_INFO",SPHEROID["Sphere_ARC_INF
O",
6370997.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433
]]

Then do:

   ogr2ogr -t_srs d_sphere.prj -f "ESRI Shapefile" outfile.shp
infile.shp

After that you can delete the outfile.prj file, and replace it with the
WGS84 equivelent (such as was produced by your earlier -t_srs WGS84
translation).

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From warmerdam at pobox.com  Thu Jul 26 10:22:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [GDAL-dev] GEOS with GDAL
In-Reply-To: <7a30cd70707260000y4e81678epd7eb48e221b720e9@mail.gmail.com>
References: <7a30cd70707260000y4e81678epd7eb48e221b720e9@mail.gmail.com>
Message-ID: <46A8AE0A.303@pobox.com>

abhay menon wrote:
> Hello all,
>  
> How do I verify that GEOS compilation is working with my GDAL utility.
>  
> I have compiled the gdal-1.4.1 with geos-3.0.0-rc4 in vs2003 for some 
> process to build in vc6.
>  
>   OGRPolygon *poPolygon = new OGRPolygon();
>   OGRPoint *pSt = new OGRPoint();
>  
> when I issue this :
>  
> 1)  int i = poPolygon->PointOnSurface(pSt);
>  
> result pSt is empty and i = 6.
> and when I try this :

Abhay,

I'm afraid PointOnSurface() is not implemented.  It appears to have
been a "good intention" based on the OGC geometry model I added to
the api 7-8 years ago and never implemented.

> 2)  int i =  poPolygon->Centroid(pSt);
>  
> it gives me an error and the application quits
>  
> But when I tried the same with vs2003 the 2) step breaks at getX();
> 1) step result the same as earlier.

Hmm.  Is pSt a pointer to an existing OGRPoint?  I don't know why
things are crashing but at least this indicates that OGR is trying
to use GEOS as otherwise it wouldn't do anything - just return
OGRERR_FAILURE.

At the core of the Centroid() method is this:

     	hOtherGeosGeom = GEOSGetCentroid( hThisGeosGeom );
         OGRPoint *poCentroid = (OGRPoint *)
             OGRGeometryFactory::createFromGEOS( hOtherGeosGeom );

         GEOSGeom_destroy( hThisGeosGeom );
         GEOSGeom_destroy( hOtherGeosGeom );

         if( poPoint == NULL
             || wkbFlatten(poPoint->getGeometryType()) != wkbPoint )
             return OGRERR_FAILURE;

	poPoint->setX( poCentroid->getX() );
	poPoint->setY( poCentroid->getY() );

         delete poCentroid;

I wonder if the return result (poCentroid) is invalid in
some fashion that isn't tested for?

I see the OGR autotests includes this python test:

     g1 = ogr.CreateGeometryFromWkt( 'POLYGON((0 0, 10 10, 10 0, 0 0))' )

     centroid = g1.Centroid()

     g1.Destroy()

     if ogrtest.check_feature_geometry( centroid,
                                        'POINT(6.666666667 3.333333333)') != 0:
         print 'Got: ', centroid.ExportToWkt()
         return 'fail'

     centroid.Destroy()

So it seems that Centroid() usually works.

I guess you will need to debug into the code to try and narrow down
what is happening.  You might want to determine whether other GEOS
based functions such as Union() work or not.  It may be a general problem
with using GEOS rather than Centroid() specific.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jul 26 10:29:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC6C@FRIEDCHICKEN.eecnet.eecradar.com>
References: <BD653983CF3BF844A9B3E77CF79DA0A55FFC6C@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <46A8AFCB.3050409@pobox.com>

Nelson, Dean wrote:
> Frank, et al,
> 
> I agree - its not a datum issue here.
> 
> I have tried the solution suggested by Frank with no change in the
> results. However, in delving deeper into the data for this particular
> project, it appears that all of this data is off about 10 min in Lat. I
> can't explain it - so I'll ask the source: USGS - which may prove to be
> a daunting task for a whimp like me.
> 
> In the mean time I would like to know a few techniques to get me through
> the day:
> 
> 1. If I have a shape file that is 10 min off in lat, how can I shift it
> to the right spot with the GDAL/OGR tools? Or do I need to write a
> little code?

Dean,

The vec_tr.py script can be used to to shift or scale vectors.

   http://trac.osgeo.org/gdal/browser/trunk/gdal/pymod/samples/vec_tr.py

You will need to edit the TransformPoint() function in the python script
to modify the point(s) as you wish:

def TransformPoint( xyz ):

     x = xyz[0]
     y = xyz[1]
     z = xyz[2]

     x = x + 1000

     return (x,y,z)

Just replace the x = x + 1000 line with whatever you want.

> Since I am dealing with 1km resolution hydrology basins, accuracy is not
> a huge concern.
> 
> 2. When I reproject with ogr2ogr, the data come out 0-360 longitude. How
> can I make it +-180?

Gee, you are raising hard issues.  Try setting the CENTER_LONG configuration
variable before the reprojection.  This is supposed to trigger "rewrapping"
of longitudes around an alternate center.

eg.

ogr2ogr -t_srs WGS84 --config CENTER_LONG 0 out.shp in.shp

But I'm surprised you are getting 0-360 output from ogr2ogr reprojection.
It normally defaults to -180 to 180.  I wonder if something odd is going
on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From nhv at cape.com  Thu Jul 26 10:33:43 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Measured Values for Shapefile read & write
In-Reply-To: <BD653983CF3BF844A9B3E77CF79DA0A55FFC6C@FRIEDCHICKEN.eecnet.eecradar.com>
Message-ID: <200707261433.l6QEXh35027783@smtp11.cape.com>

Nelson, Dean writes:
> 
> I have tried the solution suggested by Frank with no change in the
> results. However, in delving deeper into the data for this particular
> project, it appears that all of this data is off about 10 min 
> in Lat. I
> can't explain it - so I'll ask the source: USGS - which may 
> prove to be
> a daunting task for a whimp like me.

Is there a web link to the data you are using  ??

The USGS is usually very good about providing sufficient metadata
It usually just requires a little poking around on the site to find

Cheers

Norman


From woklist at kyngchaos.com  Thu Jul 26 16:29:08 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] ECW reading for OSX now possible
Message-ID: <DC985B2E-201D-4FE1-B797-F8D5B6F26378@kyngchaos.com>

Someone finally responded to the ECW Forums with a small patch that  
enables the ECW SDK to read ECW images on OSX 10.4.  I still get  
errors trying to write ECW images, but it's a start.  Reading and  
writing JP2s with the ECW SDK works.

I built a plugin for my GDAL framework and it's available for  
download on my frameworks page.

If anyone wants to build the ECW SDK on OSX on their own, this forum  
topic summarizes past patches from other topics and includes details  
on the latest patch:

http://forums.ermapper.com/viewtopic.php?t=2446

If any Mac programmers (I'm not much of a C++ programmer, I just  
tinker) have any ideas on the write problem, please help out by  
posting to the ER forum in that topic.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan



From seanasy at gmail.com  Thu Jul 26 17:00:20 2007
From: seanasy at gmail.com (Sean Fulton)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Opening PostGIS databases with Python & OGR
Message-ID: <f8b1vb$25p$1@sea.gmane.org>

I have a PostGIS database without any layers in it. If I try to connect 
the database with Python it fails.

>>> db = ogr.Open('PG:dbname=testgeo')
>>> db is None
True

However, if the database already has an existing layer (e.g. added with 
ogr2ogr) using ogr.Open() from Python works.  Can I get ogr.Open() to 
give an error message? Is there a  CPLGetLastErrorMsg()  equivalent in 
the Python API?

Thanks,

	Sean



From luisviveros at digimapas.com.br  Thu Jul 26 18:47:09 2007
From: luisviveros at digimapas.com.br (Luis Viveros)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] BigTIFF support
Message-ID: <46A9246D.6090001@digimapas.com.br>

Hi all,

I have tried to generate a big tiff file (~16GB) with the svn version. 
When trying to create the file with gdalwarp (with -co BIGTIFF=YES) it 
fails.

I have tried both the internal libtiff and also the tiff-4.0.0alpha.

When running the configure options --with-libtiff=internal or 
--with-libtiff=yes or even 
--with-libtiff=/usr/local/src/tiff-4.0.0alpha/libtiff, GDAL is 
configured as:

LIBTIFF support:   internal (BigTIFF=no)
or
LIBTIFF support:   external (BigTIFF=no)

Also, when the configure checks for TIFFScanlineSize64, I always get:

checking for TIFFScanlineSize64 in -ltiff... no

Is there something that I am missing to setup? Forcing BIGTIFF=YES is 
not working...

Thanks in advance,,

Luis

-- 
-----------------------------
Luis Viveros
Project Manager
Digimapas Chile
office:	+56(0)2 6657811
mobile:	+56(09) 87298009
-----------------------------


From josevicente.higon at gmail.com  Fri Jul 27 02:46:24 2007
From: josevicente.higon at gmail.com (=?iso-8859-1?q?Jos=E9_Vicente_Hig=F3n?=)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Reproject with Mapserver vs gdalwarp
In-Reply-To: <46A89E92.2@pobox.com>
References: <200707251105.17185.josevicente.higon@iver.es>
	<200707261445.29110.josevicente.higon@gmail.com>
	<46A89E92.2@pobox.com>
Message-ID: <200707270846.24502.josevicente.higon@gmail.com>

Thanks a lot for your answer.
I've changed the epsg.wkt and I've dropped the EPSG:23030 entry in pcs.csv  
and now It reprojects perfectly.

> Jos?,
>
> I'm sorry, I missed your specification of a nadgrids file. Generally it is
> bad to specify a +towgs84 parameter and a nadgrid as it isn't absolutely
> certain which will be used.
>
> Unfortunately there is no way to update the pcs.csv file to specify a
> nadgrid.  One thing that might work is to remove the above 23030 line
> from pcs.csv, and add the following line at the beginning of
> gdal/data/epsg.wkt (make sure this is just one line, not split on
> spaces as it likely is in my email):
>
> 23030,PROJCS["UTM Zone 30, Northern Hemisphere",GEOGCS["International 1909
> (Hayford)",DATUM["unknown",SPHEROID["intl",6378388,297]],PRIMEM["Greenwich"
>,0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PAR
>AMETER["latitude_of_origin",0],PARAMETER["central_meridian",-3],PARAMETER["s
>cale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_nort
>hing",0],UNIT["Meter",1],EXTENSION["PROJ4","+proj=utm +zone=30 +ellps=intl
> +units=m +nadgrids=sped2et.gsb +wktext +no_defs"]]
>
> The "trick" is the EXTENSION["PROJ4","..."] block that tells GDAL/OGR to
> use a particular PROJ.4 translation when converting to proj.4 format.
>
> The epsg.wkt file is, I think, consulted if a pcs is not found in the
> pcs.csv file so it is important that it be properly removed from there for
> this to work.
>
> Best regards,


From abhay.menon at gmail.com  Fri Jul 27 04:53:01 2007
From: abhay.menon at gmail.com (abhay menon)
Date: Wed Nov 21 11:50:58 2007
Subject: [GDAL-dev] GEOS with GDAL
In-Reply-To: <46A8AE0A.303@pobox.com>
References: <7a30cd70707260000y4e81678epd7eb48e221b720e9@mail.gmail.com>
	<46A8AE0A.303@pobox.com>
Message-ID: <7a30cd70707270153j5dbac31bv7f555bedca6a9d60@mail.gmail.com>

On 7/26/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> abhay menon wrote:
> > Hello all,
> >
> > How do I verify that GEOS compilation is working with my GDAL utility.
> >
> > I have compiled the gdal-1.4.1 with geos-3.0.0-rc4 in vs2003 for some
> > process to build in vc6.
> >
> >   OGRPolygon *poPolygon = new OGRPolygon();
> >   OGRPoint *pSt = new OGRPoint();
> >
> > when I issue this :
> >
> > 1)  int i = poPolygon->PointOnSurface(pSt);
> >
> > result pSt is empty and i = 6.
> > and when I try this :
>
> Abhay,
>
> I'm afraid PointOnSurface() is not implemented.  It appears to have
> been a "good intention" based on the OGC geometry model I added to
> the api 7-8 years ago and never implemented.
>
> > 2)  int i =  poPolygon->Centroid(pSt);
> >
> > it gives me an error and the application quits
> >
> > But when I tried the same with vs2003 the 2) step breaks at getX();
> > 1) step result the same as earlier.
>
> Hmm.  Is pSt a pointer to an existing OGRPoint?  I don't know why
> things are crashing but at least this indicates that OGR is trying
> to use GEOS as otherwise it wouldn't do anything - just return
> OGRERR_FAILURE.
>
> At the core of the Centroid() method is this:
>
>        hOtherGeosGeom = GEOSGetCentroid( hThisGeosGeom );
>         OGRPoint *poCentroid = (OGRPoint *)
>             OGRGeometryFactory::createFromGEOS( hOtherGeosGeom );
>
>         GEOSGeom_destroy( hThisGeosGeom );
>         GEOSGeom_destroy( hOtherGeosGeom );
>
>         if( poPoint == NULL
>             || wkbFlatten(poPoint->getGeometryType()) != wkbPoint )
>             return OGRERR_FAILURE;
>
>        poPoint->setX( poCentroid->getX() );
>        poPoint->setY( poCentroid->getY() );
>
>         delete poCentroid;
>
> I wonder if the return result (poCentroid) is invalid in
> some fashion that isn't tested for?
>
> I see the OGR autotests includes this python test:
>
>     g1 = ogr.CreateGeometryFromWkt( 'POLYGON((0 0, 10 10, 10 0, 0 0))' )
>
>     centroid = g1.Centroid()
>
>     g1.Destroy()
>
>     if ogrtest.check_feature_geometry( centroid,
>                                        'POINT(6.666666667 3.333333333)')
> != 0:
>         print 'Got: ', centroid.ExportToWkt()
>         return 'fail'
>
>     centroid.Destroy()
>
> So it seems that Centroid() usually works.
>
> I guess you will need to debug into the code to try and narrow down
> what is happening.  You might want to determine whether other GEOS
> based functions such as Union() work or not.  It may be a general problem
> with using GEOS rather than Centroid() specific.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
Hi Frank,
Thanks for the info about PointOnSuface.
But it would be really useful if the GDAL supported the PointOnSurface
function of GEOS as most of the GIS application will creating a Centriod of
a irregular polygon creates point inside the polygon which is not the real
centriod but an output of PointOnSurface or InnerPoint.

Hmm.. about the Centroid part.
I use the build for msvc80 in GEOS trunk to create the MSVC 8 compatible
version which I am able to call in VC++6.
I will let know on the problem that is being created on VC7.1. once I get
time for that. And let you know what happened within.


-- 
Best Regards

 Abhay Menon
 http://abhaymenon.info
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070727/23ed8a5b/attachment.html
From warmerdam at pobox.com  Fri Jul 27 10:46:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] BigTIFF support
In-Reply-To: <46A9246D.6090001@digimapas.com.br>
References: <46A9246D.6090001@digimapas.com.br>
Message-ID: <46AA0538.500@pobox.com>

Luis Viveros wrote:
> Hi all,
> 
> I have tried to generate a big tiff file (~16GB) with the svn version. 
> When trying to create the file with gdalwarp (with -co BIGTIFF=YES) it 
> fails.
> 
> I have tried both the internal libtiff and also the tiff-4.0.0alpha.
> 
> When running the configure options --with-libtiff=internal or 
> --with-libtiff=yes or even 
> --with-libtiff=/usr/local/src/tiff-4.0.0alpha/libtiff, GDAL is 

Luis,

Are you trying to point --with-libtiff at a libtiff build directory or
an installed directory?  Normally you would build and install libtiff4
somewhere (perhaps /usr/local) and then configure GDAL using --with-libtiff
pointing to the installed directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jul 27 10:54:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Opening PostGIS databases with Python & OGR
In-Reply-To: <f8b1vb$25p$1@sea.gmane.org>
References: <f8b1vb$25p$1@sea.gmane.org>
Message-ID: <46AA070E.4040401@pobox.com>

Sean Fulton wrote:
> However, if the database already has an existing layer (e.g. added with 
> ogr2ogr) using ogr.Open() from Python works.  Can I get ogr.Open() to 
> give an error message? Is there a  CPLGetLastErrorMsg()  equivalent in 
> the Python API?

Sean,

If you open the database in update mode (pass a second argument with the
value 1 to Open()) then OGR should be able to open a postgres database
with no apparent layers.  This is a quirk of the postgres driver in OGR
which assumes something must have gone wrong if it didn't find any layers.

You can call gdal.GetLastErrorMsg() in Python, but unfortunately it won't
return anything in this case since this code does not issue an error
message ... just return an error code.

OGR started out mostly avoiding use of CPL errors, instead returning
error codes from functions.  Since the beginning CPL error reporting has
become fairly common in OGR but is still not comprehensive.  This mixture
of error handling modes is an unfortunate weakness of OGR as it stands.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From luis.viveros at digimapas.cl  Fri Jul 27 12:51:52 2007
From: luis.viveros at digimapas.cl (Luis Viveros)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] BigTIFF support
In-Reply-To: <46AA0538.500@pobox.com>
References: <46A9246D.6090001@digimapas.com.br> <46AA0538.500@pobox.com>
Message-ID: <46AA22A8.3090809@digimapas.cl>

Hi Frank and all,

Thanks. Now I pointed correctly --with-libtiff=/usr/local/ and the 
configure output is:

LIBTIFF support:   external (BigTIFF=yes)

But, using gdalwarp after:

gdalwarp -of GTiff -co BIGTIFF=YES -ot float32 input.tor output.tif
Creating output file that is 32000P x 168000L
ERROR 1: A 32000 pixels x 168000 lines x 1 bands Float32 image would be 
larger than 4GB
but this is the largest size a TIFF can be.   Creation failed.

I executed ldconfig after installation...

Any idea?

Thanks

--------------------------------
Luis Viveros
Project Manager
Digimapas Chile
office:	+56(0)2 6657811
mobile:	+56(09) 87298009
web:    http://www.digimapas.cl
--------------------------------




Frank Warmerdam wrote:
> Luis Viveros wrote:
>> Hi all,
>>
>> I have tried to generate a big tiff file (~16GB) with the svn 
>> version. When trying to create the file with gdalwarp (with -co 
>> BIGTIFF=YES) it fails.
>>
>> I have tried both the internal libtiff and also the tiff-4.0.0alpha.
>>
>> When running the configure options --with-libtiff=internal or 
>> --with-libtiff=yes or even 
>> --with-libtiff=/usr/local/src/tiff-4.0.0alpha/libtiff, GDAL is 
>
> Luis,
>
> Are you trying to point --with-libtiff at a libtiff build directory or
> an installed directory?  Normally you would build and install libtiff4
> somewhere (perhaps /usr/local) and then configure GDAL using 
> --with-libtiff
> pointing to the installed directory.
>
> Best regards,

From warmerdam at pobox.com  Fri Jul 27 13:13:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] BigTIFF support
In-Reply-To: <46AA22A8.3090809@digimapas.cl>
References: <46A9246D.6090001@digimapas.com.br> <46AA0538.500@pobox.com>
	<46AA22A8.3090809@digimapas.cl>
Message-ID: <46AA27CF.9010502@pobox.com>

Luis Viveros wrote:
> Hi Frank and all,
> 
> Thanks. Now I pointed correctly --with-libtiff=/usr/local/ and the 
> configure output is:
> 
> LIBTIFF support:   external (BigTIFF=yes)
> 
> But, using gdalwarp after:
> 
> gdalwarp -of GTiff -co BIGTIFF=YES -ot float32 input.tor output.tif
> Creating output file that is 32000P x 168000L
> ERROR 1: A 32000 pixels x 168000 lines x 1 bands Float32 image would be 
> larger than 4GB
> but this is the largest size a TIFF can be.   Creation failed.
> 
> I executed ldconfig after installation...

Luis,

Is it possible you didn't do a "make clean" after reconfiguring with
bigtiff support?  I see the following logic in gdal/frmts/gtiff/geotiff.cpp:


     if( nCompression == COMPRESSION_NONE )
     {
         if( nXSize * ((double)nYSize) * nBands * (GDALGetDataTypeSize(eType)/8)
             > 4200000000.0 )
         {
#ifndef BIGTIFF_SUPPORT
             CPLError( CE_Failure, CPLE_AppDefined,
                       "A %d pixels x %d lines x %d bands %s image would be 
larger than 4GB\n"
                       "but this is the largest size a TIFF can be.  Creation 
failed.",
                       nXSize, nYSize, nBands, GDALGetDataTypeName(eType) );
             return NULL;
#else
             bCreateBigTIFF = TRUE;
#endif
         }
     }

So this error should not be reported if you build with BigTIFF support.
But if you just reconfigure and relink without a "make clean", then
geotiff.cpp won't get rebuilt and you would see the issue you have
run into.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rbanfield at weogeo.com  Fri Jul 27 14:42:53 2007
From: rbanfield at weogeo.com (Robert Banfield)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Providing supplemental information to GDALOpen()
Message-ID: <46AA3CAD.2080702@weogeo.com>

Hello,

Suppose I have a .jpg file with no corresponding .jgw file, but I know 
all of the transform values.  Is it possible through the API to provide 
supplemental information after GDALOpen() opens this file?

double Transform[6] = ...  // Provide what would have been provided in 
the .jgw file
GDALDatasetH hSrcDS = GDALOpen (MyFile, GA_ReadOnly);  // No .jgw file 
on disk
GDALSetGeoTransform(hSrcDS,Transform);  // I tried this with no success

When I use GDALSetGeoTransform in this fashion I obtain the following:  
CPL Failure 6: SetGeoTransform() not supported for this dataset.  When I 
use GDALOpen(MyFile, GA_Update), I am seg faulting... I haven't yet 
looked at what the cause of that may be...

My goal is simply to "pretend" the world file was already on disk, so 
that later code to generate new data files is correct.

Thank you very much,
Robert

From warmerdam at pobox.com  Fri Jul 27 15:25:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Providing supplemental information to GDALOpen()
In-Reply-To: <46AA3CAD.2080702@weogeo.com>
References: <46AA3CAD.2080702@weogeo.com>
Message-ID: <46AA4694.3000607@pobox.com>

Robert Banfield wrote:
> Hello,
> 
> Suppose I have a .jpg file with no corresponding .jgw file, but I know 
> all of the transform values.  Is it possible through the API to provide 
> supplemental information after GDALOpen() opens this file?
> 
> double Transform[6] = ...  // Provide what would have been provided in 
> the .jgw file
> GDALDatasetH hSrcDS = GDALOpen (MyFile, GA_ReadOnly);  // No .jgw file 
> on disk
> GDALSetGeoTransform(hSrcDS,Transform);  // I tried this with no success
> 
> When I use GDALSetGeoTransform in this fashion I obtain the following:  
> CPL Failure 6: SetGeoTransform() not supported for this dataset.  When I 
> use GDALOpen(MyFile, GA_Update), I am seg faulting... I haven't yet 
> looked at what the cause of that may be...
> 
> My goal is simply to "pretend" the world file was already on disk, so 
> that later code to generate new data files is correct.

Robert,

I'm not sure why GDALOpen() is crashing when you pass GA_Update.  That
definately should not happen.  For JPEG files it should just issue an
error message (about not supporting update access to jpeg files) and
return NULL.

You can't directly do what you want, but an indirect approach is to
create VRT dataset in memory referring to the JPEG file, and then
modify that VRT dataset.  Something like (untested/uncompiled):

   GDALDriverH hVRTDriver;
   GDALDatasetH hJpegDS, hVrtDS;

   hJpegDS = GDALOpen( "your.jpg", GA_ReadOnly );

   hVRTDriver = GDALGetDriverByName( "VRT" );
   hVrtDS = GDALCreateCopy( hVRTDriver, "", hJpegDS, FALSE, NULL,
                            NULL, NULL );

   GDALSetGeoTransform( hVrtDS, Transform );

   ...

The updates should be reflected on hVrtDS, and hVrtDS can be passed
as a proxy for the jpeg file to other code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From luis.viveros at digimapas.cl  Fri Jul 27 17:13:53 2007
From: luis.viveros at digimapas.cl (Luis Viveros)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] BigTIFF support
In-Reply-To: <46AA4557.8020609@pobox.com>
References: <46A9246D.6090001@digimapas.com.br> <46AA0538.500@pobox.com>
	<46AA22A8.3090809@digimapas.cl> <46AA27CF.9010502@pobox.com>
	<46AA3E5D.2090008@digimapas.cl> <46AA4557.8020609@pobox.com>
Message-ID: <46AA6011.2090708@digimapas.cl>

Hi Frank,

Thanks, it was exactly a library mixup:

/usr/local/lib/libgdal.so -> libgdal.so.1.11.0
/usr/local/lib/libgdal.so.1 -> libgdal.so.1.11.1

I just don't know where the version 1.11.1 comes from.

Now it's working right...

Thanks again,

Luis

Frank Warmerdam wrote:
> Luis Viveros wrote:
>> Frank,
>>
>> I did the make clean before and after you advice me. The problem 
>> persisted. Then I simply erased the full gdal directory and got the 
>> svn back again:
>>
>> svn checkout https://svn.osgeo.org/gdal/trunk/gdal gdal
>>
>> Then,
>>
>> ./configure --with-pg=/usr/local/pgsql/bin/pg_config 
>> -with-png=internal --with-jpeg=internal --with-gif=internal 
>> --with-geotiff=internal --with-libtiff=/usr/local --with-ecw=yes 
>> --with-libz
>> make
>> su
>> make install
>>
>> The result is the same:
>>
>> gdalwarp -of GTiff -co BIGTIFF=YES -ot float32 input.tor output.tif
>> Creating output file that is 32000P x 168000L
>> ERROR 1: A 32000 pixels x 168000 lines x 1 bands Float32 image would 
>> be larger than 4GB
>> but this is the largest size a TIFF can be.   Creation failed.
>
> Luis,
>
> I'm a bit at a loss as to what might be happening.  It could be some
> sort of shared library mixup at runtime.  If I were in your seat,
> I'd verify that -DBIGTIFF_SUPPORT appears on the commandline for
> gcc when the geotiff.cpp module is compiled (cd into frmts/gtiff and
> do "make clean", then "make" to check).  Then I'd ensure I'm actually
> using the new libgdal.so at runtime - use ldd on gdal_translate to check
> what is getting used.
>
> This problem has all the hallmarks of an incomplete 
> configure/build/install
> cycle resulting in some old shared library getting used or something like
> that.
>
> Best regards,
>

-- 
--------------------------------
Luis Viveros
Project Manager
Digimapas Chile
office:	+56(0)2 6657811
mobile:	+56(09) 87298009
web:    http://www.digimapas.cl
--------------------------------



From condit at sdsc.edu  Sun Jul 29 14:17:14 2007
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] gdalinfo on large file...
In-Reply-To: <46AA4694.3000607@pobox.com>
References: <46AA3CAD.2080702@weogeo.com> <46AA4694.3000607@pobox.com>
Message-ID: <845AADAC1106E44996327D62097E4C6BDE64D4@et.ad.sdsc.edu>

I've got a fairly large (3.7GB) GMT/GMT NetCDF Grid file. If I run
gdalinfo without -mm it seems fine. However, when I ask for -mm I see a
series of these error in the console (the Y offset varies):
ERROR 1: GMT scanline fetch failed: Invalid argument
ERROR 1: IReadBlock failed at X offset 0, Y offset 21599
and the resulting min/max is incorrect. Is there something special I
need to do to get gdalinfo to work with such a large file?

Thanks,
-Chris


From gcimino at gmail.com  Mon Jul 30 10:21:47 2007
From: gcimino at gmail.com (Giampaolo Cimino)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] merge rasters combining overlapping pixels
Message-ID: <20a1765b0707300721u66dbb138o86fb731e419dc885@mail.gmail.com>

Good morning everybody,

I am gdal newbie.
I would like to combine some geo-referenced rasters (format TIFF with world
file) into one big image (TIFF with tfw again).
It is very important to be able to choose the criteria to combine two
overlapping pixels coming from two different images,
for instance I would like to use min, max or mean.
Is this possible with gdal?
Could gdal_merge.py help me?
Eventually I would like to do it  from C# using the .Net binding. Is
tihs possible?
Thanks in advance
Giampaolo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070730/1e8d0424/attachment.html
From tim at linfiniti.com  Fri Jul 27 21:41:30 2007
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: [Qgis-developer] ECW reading for OSX now possible
In-Reply-To: <DC985B2E-201D-4FE1-B797-F8D5B6F26378@kyngchaos.com>
References: <DC985B2E-201D-4FE1-B797-F8D5B6F26378@kyngchaos.com>
Message-ID: <DF22E7EA-7251-4A34-91E6-1D416E733626@linfiniti.com>

Hi William

Excellent news! Will be great to have ecw support available for 0.9..

We still need to resolve in QGIS how to select the preferred driver  
for formats that are suported by more than 1 driver (like  
jpg2000)....something for further down the road I guess..

Regards

Tim

Em 26/07/2007, ?s 17:29, William Kyngesburye escreveu:

> Someone finally responded to the ECW Forums with a small patch that
> enables the ECW SDK to read ECW images on OSX 10.4.  I still get
> errors trying to write ECW images, but it's a start.  Reading and
> writing JP2s with the ECW SDK works.
>
> I built a plugin for my GDAL framework and it's available for
> download on my frameworks page.
>
> If anyone wants to build the ECW SDK on OSX on their own, this forum
> topic summarizes past patches from other topics and includes details
> on the latest patch:
>
> http://forums.ermapper.com/viewtopic.php?t=2446
>
> If any Mac programmers (I'm not much of a C++ programmer, I just
> tinker) have any ideas on the write problem, please help out by
> posting to the ER forum in that topic.
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Mon Dieu! but they are all alike.  Cheating, murdering, lying,
> fighting, and all for things that the beasts of the jungle would not
> deign to possess - money to purchase the effeminate pleasures of
> weaklings.  And yet withal bound down by silly customs that make them
> slaves to their unhappy lot while firm in the belief that they be the
> lords of creation enjoying the only real pleasures of existence....
>
> - the wisdom of Tarzan
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer


Tim Sutton

QGIS Project Steering Committee Member - Release  Manager
Visit http://qgis.org for a great open source GIS

openModeller Desktop Developer
Visit http://openModeller.sf.net for a great open source ecological  
niche modelling tool

Home Page: http://tim.linfiniti.com
Skype: timlinux
Irc: timlinux on #qgis at freenode.net



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070727/6a98a1f4/attachment.html
From hfpmartins at gmail.com  Tue Jul 31 05:14:52 2007
From: hfpmartins at gmail.com (Hugo Martins)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Problem with MODIS imagery
Message-ID: <f647f0570707310214y29c44dd4s2224855645732c83@mail.gmail.com>

Hello all,

I've already posted this questions on open-ev list but i think they are
better adressed to this list, so here they go!

I've a huge modis dataset to process in batch mode, or at least, it is what
i'm trying to do!

My first problem is that i can only extract different bands if i use
gdal_translate -sds command. Well, i don?t need them all and so i have tried
gdal_translate HDF4_EOS:EOS_GRID:"MOD13Q1.A2007.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI!
Unfortunately i get error message saying the file size is zero and that it
has no bands. Any suggestions?

The original file info is (from gdalinfo):

Driver: HDF4/Hierarchical Data Format Release 4
Files: MOD13Q1.A2007177.h17v04.005.2007204181956.hdf
Size is 512, 512
Coordinate System is `'
Metadata: ...
  HDFEOSVersion=HDFEOS_V2.9
  LOCALGRANULEID=MOD13Q1.A2007177.h17v04.005.2007204181956.hdf
  ...
 NORTHBOUNDINGCOORDINATE=49.9999999955098
  SOUTHBOUNDINGCOORDINATE=39.9999999964079
  EASTBOUNDINGCOORDINATE=0.0129643652214683
  WESTBOUNDINGCOORDINATE=-15.5572382657541
  ...
Subdatasets:
 SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days NDVI
  SUBDATASET_1_DESC=[4800x4800] 250m 16 days NDVI
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days EVI
  SUBDATASET_2_DESC=[4800x4800] 250m 16 days EVI
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
 SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days VI Quality
  SUBDATASET_3_DESC=[4800x4800] 250m 16 days VI Quality
MODIS_Grid_16DAY_250m_500m_VI (16-bit unsigned integer)
SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days red reflectance
  SUBDATASET_4_DESC=[4800x4800] 250m 16 days red reflectance
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
 SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days NIR reflectance
  SUBDATASET_5_DESC=[4800x4800] 250m 16 days NIR reflectance
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days blue reflectance
  SUBDATASET_6_DESC=[4800x4800] 250m 16 days blue reflectance
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
 SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days MIR reflectance
  SUBDATASET_7_DESC=[4800x4800] 250m 16 days MIR reflectance
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days view zenith angle
  SUBDATASET_8_DESC=[4800x4800] 250m 16 days view zenith angle
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
 SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days sun zenith angle
  SUBDATASET_9_DESC=[4800x4800] 250m 16 days sun zenith angle
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
SUBDATASET_10_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days relative azimuth angle
  SUBDATASET_10_DESC=[4800x4800] 250m 16 days relative azimuth angle
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
 SUBDATASET_11_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days composite day of the year
  SUBDATASET_11_DESC=[4800x4800] 250m 16 days composite day of the year
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)
SUBDATASET_12_NAME=HDF4_EOS:EOS_GRID:"
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days pixel reliability
  SUBDATASET_12_DESC=[4800x4800] 250m 16 days pixel reliability
MODIS_Grid_16DAY_250m_500m_VI (8-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

The second problem: after extracting all bands without reprojecting, the
coordinates come with shifts when compared to extracted bands from mrt tools

gdalinfo from extracted bands with mrt tools is:

Driver: GTiff/GeoTIFF
Files: testemrt.tif
Size is 4800, 4800
Coordinate System is:
PROJCS["SINUSOIDAL Unspecified Datum. Semi-major axis: 6371007.181000,
Semi-minor axis: 0.000000",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-1111834.691493776600000,5559636.770208701500000)
Pixel Size = (231.656358263750060,-231.656358263750060)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_SOFTWARE=MODIS Reprojection Tool  v3.3a January 2006
Corner Coordinates:
Upper Left  (-1111834.691, 5559636.770) ( 15d33'19.01"W, 49d59'56.25"N)
Lower Left  (-1111834.691, 4447686.251) ( 13d 3'9.05"W, 39d59'56.25"N)
Upper Right (     115.828, 5559636.770) (  0d 0'5.83"E, 49d59'56.25"N)
Lower Right (     115.828, 4447686.251) (  0d 0'4.90"E, 39d59'56.25"N)
Center      ( -555859.432, 5003661.510) (  7d 4'10.08"W, 44d59'56.25"N)
Band 1 Block=4800x1 Type=Int16, ColorInterp=Gray

gdalinfo from extracted bands with gdal_translate is:

Driver: GTiff/GeoTIFF
Files: teste.tif
Size is 4800, 4800
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["unknown",
            SPHEROID["unnamed",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-1111950.519667000000000,5559752.598333000200000)
Pixel Size = (231.656358263958340,-231.656358263750060)
Metadata:
  AREA_OR_POINT=Area
  HDFEOSVersion=HDFEOS_V2.9
  LOCALGRANULEID=MOD13Q1.A2007177.h17v04.005.2007204181956.hdf
...
  NORTHBOUNDINGCOORDINATE=49.9999999955098
  SOUTHBOUNDINGCOORDINATE=39.9999999964079
  EASTBOUNDINGCOORDINATE=0.0129643652214683
  WESTBOUNDINGCOORDINATE=-15.5572382657541
 ...
Corner Coordinates:
Upper Left  (-1111950.520, 5559752.598) ( 15d33'26.06"W, 50d 0'0.00"N)
Lower Left  (-1111950.520, 4447802.079) ( 13d 3'14.66"W, 40d 0'0.00"N)
Upper Right (       0.000, 5559752.598) (  0d 0'0.01"E, 50d 0'0.00"N)
Lower Right (       0.000, 4447802.079) (  0d 0'0.01"E, 40d 0'0.00"N)
Center      ( -555975.260, 5003777.339) (  7d 4'15.84"W, 45d 0'0.00"N)
Band 1 Block=4800x1 Type=Int16, ColorInterp=Gray

The third problem is with gdalwarp but i suppose it is originated by the
shifts occurred when extracting the bands (made previously). I want to
reproject images to WGS84 and so picked up esri prj files for sinusoidal and
wgs84 projections. Then i've changed the sinusoidal file by changing the
semimajor axis from 6371000 to 6371007.181 and by changing the degree. After
applied gdalwarp and shifts are maintained.

Can you please help me, as i said before i have a lot of imagery to process
and doing it one by one is completely absurd! So i really need some help so
that i can make it in batch mode!
Thanks in advance,

Hugo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070731/4db60ec5/attachment.html
From philippe.suray at market-ip.com  Tue Jul 31 09:11:30 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] gdal_translsate color problem
Message-ID: <loom.20070731T145627-77@post.gmane.org>

Hello,

I have several color ortho-photo's of 4000x4000px, i would like to create tiles
of 400x400px. In order to do that, I tried gdal_translate, but I have problems
with the output file: the image is in gray scale, pixels are streched to the
left with a big black band to the right.

Here is info from input file:
C:\TEMP\IGN_Photos\Couleurs>gdalinfo B228022_P72_Y2005_S71.tif
Driver: GTiff/GeoTIFF
Files: B228022_P72_Y2005_S71.tif
Size is 4000, 4000
Origin = (228000.000000000000000,24000.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=0
  TIFFTAG_YRESOLUTION=0
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (  228000.000,   24000.000) (  2d 2'53.37"E,  0d13'1.37"N)
Lower Left  (  228000.000,   22000.000) (  2d 2'53.37"E,  0d11'56.26"N)
Upper Right (  230000.000,   24000.000) (  2d 3'58.05"E,  0d13'1.37"N)
Lower Right (  230000.000,   22000.000) (  2d 3'58.05"E,  0d11'56.26"N)
Center      (  229000.000,   23000.000) (  2d 3'25.71"E,  0d12'28.82"N)
Band 1 Block=4000x1 Type=Byte, ColorInterp=Red
  Overviews: 800x800
Band 2 Block=4000x1 Type=Byte, ColorInterp=Green
  Overviews: 800x800
Band 3 Block=4000x1 Type=Byte, ColorInterp=Blue
  Overviews: 800x800

Here is the command used:
gdal_translate -of GTiff -projwin 228000 22200 228200 22000
B228022_P72_Y2005_S71.tif .\tiles200\228000-22200-228200-22000.tif

Here is the info from output file:
C:\TEMP\IGN_Photos\Couleurs\tiles200>gdalinfo 228000-22200-228200-22000_3.tif
Driver: GTiff/GeoTIFF
Files: 228000-22200-228200-22000_3.tif
Size is 400, 400
Origin = (228000.000000000000000,22200.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=0
  TIFFTAG_YRESOLUTION=0
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (  228000.000,   22200.000) (  2d 2'53.37"E,  0d12'2.77"N)
Lower Left  (  228000.000,   22000.000) (  2d 2'53.37"E,  0d11'56.26"N)
Upper Right (  228200.000,   22200.000) (  2d 2'59.84"E,  0d12'2.77"N)
Lower Right (  228200.000,   22000.000) (  2d 2'59.84"E,  0d11'56.26"N)
Center      (  228100.000,   22100.000) (  2d 2'56.61"E,  0d11'59.51"N)
Band 1 Block=400x20 Type=Byte, ColorInterp=Red
Band 2 Block=400x20 Type=Byte, ColorInterp=Green
Band 3 Block=400x20 Type=Byte, ColorInterp=Blue

What is going wrong?
Why the output file is in gray?

Could someone help me?

Thank you for your response.

Regards

Suray Ph.


From delphet at excite.com  Tue Jul 31 16:11:25 2007
From: delphet at excite.com (Marvin)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a specific
	schema in PostgreSQL
Message-ID: <20070731201125.4FE6591FCE@xprdmxin.myway.com>


Hi, All,

I'm trying to import TIGER data into a PostgreSQL database. The command I use is:

ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser host=localhost password=somepass" .

This command put the data into the "public" schema. I'm wondering if there is a way to import the data into a specific schema such as "mySchema". I tried to use the option "-dsco" as:

ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser host=localhost password=somepass" -dsco schema=mySchema .

But it still put the data into the "public" schema. Could anyone please give any suggestion? Thanks.




_______________________________________________
Join Excite! - http://www.excite.com
The most personalized portal on the Web!



From condit at sdsc.edu  Tue Jul 31 17:24:45 2007
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] gdal_translate question
In-Reply-To: <20070731201125.4FE6591FCE@xprdmxin.myway.com>
References: <20070731201125.4FE6591FCE@xprdmxin.myway.com>
Message-ID: <845AADAC1106E44996327D62097E4C6BDE660B@et.ad.sdsc.edu>

I'm trying to translate from an EHdr dataset to a GeoTIFF, but want to
incorporate the correct min/max values from the EHdr statistics file.
I'm currently using: gdal_translate -ot Int32 -scale 0 65535 -415 5778
input.DEM output.tiff
Is there any way to do this automatically since the statistics will vary
from DEM to DEM?

Thanks,
-Chris

gdalinfo output:

Driver: EHdr/ESRI .hdr Labelled
Files: E020N40.DEM
       E020N40.hdr
       E020N40.stx
       E020N40.prj
Size is 4800, 6000
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
Origin = (20.000000000000004,39.999999999999993)
Pixel Size = (0.008333333333330,-0.008333333333330)
Corner Coordinates:
Upper Left  (  20.0000000,  40.0000000) ( 20d 0'0.00"E, 40d 0'0.00"N)
Lower Left  (  20.0000000, -10.0000000) ( 20d 0'0.00"E, 10d 0'0.00"S)
Upper Right (  60.0000000,  40.0000000) ( 60d 0'0.00"E, 40d 0'0.00"N)
Lower Right (  60.0000000, -10.0000000) ( 60d 0'0.00"E, 10d 0'0.00"S)
Center      (  40.0000000,  15.0000000) ( 40d 0'0.00"E, 15d 0'0.00"N)
Band 1 Block=4800x1 Type=UInt16, ColorInterp=Undefined
  Min=-415.000 Max=5778.000   Computed Min/Max=0.000,65535.000
  Minimum=-415.000, Maximum=5778.000, Mean=516.400, StdDev=573.400
  NoData Value=-9999




From dcmikkelsen at shaw.ca  Tue Jul 31 22:18:54 2007
From: dcmikkelsen at shaw.ca (Dean C. Mikkelsen)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a
	specificschema in PostgreSQL
In-Reply-To: <20070731201125.4FE6591FCE@xprdmxin.myway.com>
Message-ID: <003101c7d3e2$4f4f3890$1f12fea9@TERRAETL2>


Hi there.

Have you tried:

ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser myschema
host=localhost password=somepass"

I've added the "myschema".

When I first started working with PostGIS last week, I found I had to do the
username and schema one after the other in order place the data in the
correct schema.

Let me know if this works.

Cheers,
Dean


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Marvin
Sent: Tuesday, July 31, 2007 1:11 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a
specificschema in PostgreSQL



Hi, All,

I'm trying to import TIGER data into a PostgreSQL database. The command I
use is:

ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser host=localhost
password=somepass" .

This command put the data into the "public" schema. I'm wondering if there
is a way to import the data into a specific schema such as "mySchema". I
tried to use the option "-dsco" as:

ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser host=localhost
password=somepass" -dsco schema=mySchema .

But it still put the data into the "public" schema. Could anyone please give
any suggestion? Thanks.




_______________________________________________
Join Excite! - http://www.excite.com
The most personalized portal on the Web!


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From tkeitt at gmail.com  Tue Jul 31 19:35:00 2007
From: tkeitt at gmail.com (Tim Keitt)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a
	specific	schema in PostgreSQL
References: <20070731201125.4FE6591FCE@xprdmxin.myway.com>
Message-ID: <loom.20070801T013221-613@post.gmane.org>

Marvin <delphet <at> excite.com> writes:

> But it still put the data into the "public" schema. Could anyone please give
any suggestion? Thanks.

Yes. I was just doing that 5 minutes ago.
Use the -lco option eg -lco SCHEMA=<schema-name>

One catch though -- only lowercase schema names are accepted!

THK

> 
> _______________________________________________
> Join Excite! - http://www.excite.com
> The most personalized portal on the Web!
> 





