From kamal_jo at yahoo.com  Mon Feb  3 11:00:34 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF to BMP
Message-ID: <20030203160034.8751.qmail@web41114.mail.yahoo.com>

I want to convert a GTIFF (geo tiff ) file to a bitmap
file (*.bmp) so that I can open it in any viewer is
this possible using GDAL library?

__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From warmerdam at pobox.com  Mon Feb  3 11:33:48 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF to BMP
In-Reply-To: <20030203160034.8751.qmail@web41114.mail.yahoo.com>
References: <20030203160034.8751.qmail@web41114.mail.yahoo.com>
Message-ID: <3E3E99EC.8010807@pobox.com>

Ayman Kamal wrote:
> I want to convert a GTIFF (geo tiff ) file to a bitmap
> file (*.bmp) so that I can open it in any viewer is
> this possible using GDAL library?

Ayman,

BMP format is supported in GDAL 1.1.8.   Use a command like this:

gdal_translate -of BMP input.tif output.bmp

See the online docs for details about the BMP format.  If you don't
have a GDAL 1.1.8 based (or more recent) version of GDAL you can download
OpenEV_FW 1.5.4 from:

   ftp://ftp.remotesensing.org/gdal/openev

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Mon Feb  3 11:46:50 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF to BMP
In-Reply-To: <20030203160034.8751.qmail@web41114.mail.yahoo.com>
References: <20030203160034.8751.qmail@web41114.mail.yahoo.com>
Message-ID: <20030203164650.GA32422@ak4719.spb.edu>

On Mon, Feb 03, 2003 at 08:00:34AM -0800, Ayman Kamal wrote:
> I want to convert a GTIFF (geo tiff ) file to a bitmap
> file (*.bmp) so that I can open it in any viewer is
> this possible using GDAL library?

Yes, try the gdal_translate utility:

gdal_translate -of BMP <input.tif> <output.bmp>


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From kamal_jo at yahoo.com  Mon Feb  3 12:20:35 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF to BMP, didnt' work
In-Reply-To: <3E3E99EC.8010807@pobox.com>
Message-ID: <20030203172035.29964.qmail@web41108.mail.yahoo.com>

--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Ayman Kamal wrote:
> > I want to convert a GTIFF (geo tiff ) file to a
> bitmap
> > file (*.bmp) so that I can open it in any viewer
> is
> > this possible using GDAL library?
> 
> Ayman,
> 
> BMP format is supported in GDAL 1.1.8.   Use a
> command like this:
> 
> gdal_translate -of BMP input.tif output.bmp
> 
> See the online docs for details about the BMP
> format.  If you don't
> have a GDAL 1.1.8 based (or more recent) version of
> GDAL you can download
> OpenEV_FW 1.5.4 from:
> 
>    ftp://ftp.remotesensing.org/gdal/openev
> 
> Best regards,
> 
I downlaoded the  file OpenEV_FW_154.zip from the link
u gave me, and the gdal_translate doesn't make errors
on converting to BMP, but when I open the BMP it
appears as blank image, its size is 496KB where the
original gtif file size if 1.82MB


>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From kamal_jo at yahoo.com  Mon Feb  3 13:10:15 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP
In-Reply-To: <20030203164650.GA32422@ak4719.spb.edu>
Message-ID: <20030203181015.47653.qmail@web41104.mail.yahoo.com>

The geotiff file that I have is for NED data, which is
supposed to be 32 bit floating point data, does this
give you any hint?
--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Mon, Feb 03, 2003 at 08:00:34AM -0800, Ayman
> Kamal wrote:
> > I want to convert a GTIFF (geo tiff ) file to a
> bitmap
> > file (*.bmp) so that I can open it in any viewer
> is
> > this possible using GDAL library?
> 
> Yes, try the gdal_translate utility:
> 
> gdal_translate -of BMP <input.tif> <output.bmp>
> 
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From dron at ak4719.spb.edu  Mon Feb  3 13:14:00 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF to BMP, didnt' work
In-Reply-To: <20030203172035.29964.qmail@web41108.mail.yahoo.com>
References: <3E3E99EC.8010807@pobox.com> <20030203172035.29964.qmail@web41108.mail.yahoo.com>
Message-ID: <20030203181400.GA23672@ak4719.spb.edu>

On Mon, Feb 03, 2003 at 09:20:35AM -0800, Ayman Kamal wrote:
> I downlaoded the  file OpenEV_FW_154.zip from the link
> u gave me, and the gdal_translate doesn't make errors
> on converting to BMP, but when I open the BMP it
> appears as blank image, its size is 496KB where the
> original gtif file size if 1.82MB

Could you post here output of the gdalinfo utility for both files?

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Mon Feb  3 13:30:25 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP
In-Reply-To: <20030203181015.47653.qmail@web41104.mail.yahoo.com>
References: <20030203164650.GA32422@ak4719.spb.edu> <20030203181015.47653.qmail@web41104.mail.yahoo.com>
Message-ID: <20030203183025.GA24368@ak4719.spb.edu>

On Mon, Feb 03, 2003 at 10:10:15AM -0800, Ayman Kamal wrote:
> The geotiff file that I have is for NED data, which is
> supposed to be 32 bit floating point data, does this
> give you any hint?

Yes, BMP format does not support such data type, it is limited by the
8-bit depth. It is a bug that GDAL does not produce any error message
for such input. Tt is fixed now and your file will be rejected. You
should explicitly specify output data type with -ot switch and play with
-scale switch to properly adjust your data.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From kamal_jo at yahoo.com  Mon Feb  3 13:33:26 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF to BMP, didnt' work
In-Reply-To: <20030203181400.GA23672@ak4719.spb.edu>
Message-ID: <20030203183326.58564.qmail@web41102.mail.yahoo.com>

here I attach the result of gdalinfo for both files

--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Mon, Feb 03, 2003 at 09:20:35AM -0800, Ayman
> Kamal wrote:
> > I downlaoded the  file OpenEV_FW_154.zip from the
> link
> > u gave me, and the gdal_translate doesn't make
> errors
> > on converting to BMP, but when I open the BMP it
> > appears as blank image, its size is 496KB where
> the
> > original gtif file size if 1.82MB
> 
> Could you post here output of the gdalinfo utility
> for both files?
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalinfo.gif
Type: image/gif
Size: 43288 bytes
Desc: gdalinfo.gif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030203/6f010c31/gdalinfo.gif
From kamal_jo at yahoo.com  Mon Feb  3 13:43:43 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP
In-Reply-To: <20030203183025.GA24368@ak4719.spb.edu>
Message-ID: <20030203184343.63715.qmail@web41101.mail.yahoo.com>

I appreciate very much if u can help me in finding
such tool to help me in opening 32 bit floating point
GeoTiff NED data

--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Mon, Feb 03, 2003 at 10:10:15AM -0800, Ayman
> Kamal wrote:
> > The geotiff file that I have is for NED data,
> which is
> > supposed to be 32 bit floating point data, does
> this
> > give you any hint?
> 
> Yes, BMP format does not support such data type, it
> is limited by the
> 8-bit depth. It is a bug that GDAL does not produce
> any error message
> for such input. Tt is fixed now and your file will
> be rejected. You
> should explicitly specify output data type with -ot
> switch and play with
> -scale switch to properly adjust your data.
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From dron at ak4719.spb.edu  Mon Feb  3 13:56:45 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP
In-Reply-To: <20030203184343.63715.qmail@web41101.mail.yahoo.com>
References: <20030203183025.GA24368@ak4719.spb.edu> <20030203184343.63715.qmail@web41101.mail.yahoo.com>
Message-ID: <20030203185645.GA28572@ak4719.spb.edu>

On Mon, Feb 03, 2003 at 10:43:43AM -0800, Ayman Kamal wrote:
> I appreciate very much if u can help me in finding
> such tool to help me in opening 32 bit floating point
> GeoTiff NED data

That's easy --- try OpenEV. You are already have it!

By the way, if you will need to convert your dataset in othe formats,
for example, BMP, gdal_translate may be invoked in such way:

gdal_translate -of BMP -ot Byte -scale <infile.tif> <outfile.bmp>

You may convert your data using OpenEV GUI as well.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From kamal_jo at yahoo.com  Tue Feb  4 02:43:58 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP
In-Reply-To: <20030203185645.GA28572@ak4719.spb.edu>
Message-ID: <20030204074358.14825.qmail@web41110.mail.yahoo.com>

I tried OpenEV and tried also invoking gdal_translate,
matters went good, can you tell me where can I get the
latest source code ( including your last changes )?

--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Mon, Feb 03, 2003 at 10:43:43AM -0800, Ayman
> Kamal wrote:
> > I appreciate very much if u can help me in finding
> > such tool to help me in opening 32 bit floating
> point
> > GeoTiff NED data
> 
> That's easy --- try OpenEV. You are already have it!
> 
> By the way, if you will need to convert your dataset
> in othe formats,
> for example, BMP, gdal_translate may be invoked in
> such way:
> 
> gdal_translate -of BMP -ot Byte -scale <infile.tif>
> <outfile.bmp>
> 
> You may convert your data using OpenEV GUI as well.
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From dron at ak4719.spb.edu  Tue Feb  4 03:28:42 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP
In-Reply-To: <20030204074358.14825.qmail@web41110.mail.yahoo.com>
References: <20030203185645.GA28572@ak4719.spb.edu> <20030204074358.14825.qmail@web41110.mail.yahoo.com>
Message-ID: <20030204082842.GC2977@ak4719.spb.edu>

On Mon, Feb 03, 2003 at 11:43:58PM -0800, Ayman Kamal wrote:
> I tried OpenEV and tried also invoking gdal_translate,
> matters went good, can you tell me where can I get the
> latest source code ( including your last changes )?

http://www.remotesensing.org/gdal/

contains information how to get access to anonymous CVS repository. You
will need CVS client utility to do this. For Windows it is called WinCVS
or something like. Alternatively you may use daily snapshot of the
development tree:

ftp://ftp.remotesensing.org/gdal/daily/

OpenEV sources available from its site:

http://openev.sourceforge.net/

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From g9news at hotmail.com  Tue Feb  4 09:11:27 2003
From: g9news at hotmail.com (Harry Ly)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] How to read a 1 bit TIFF file
Message-ID: <BAY1-F197teEgcI92eL00008ae0@hotmail.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030204/3c9210a0/attachment.html
From warmerdam at pobox.com  Tue Feb  4 10:53:49 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] How to read a 1 bit TIFF file
In-Reply-To: <BAY1-F197teEgcI92eL00008ae0@hotmail.com>
References: <BAY1-F197teEgcI92eL00008ae0@hotmail.com>
Message-ID: <3E3FE20D.9040402@pobox.com>

Harry Ly wrote:
> Hi,
>  
> Can anyone show me how to read a portion of a 1 bit TIFF image into a 
> char array using scanline or ReadStripEncoded function.
>  

Harry,

If you want to use the libtiff functions directly you would be better off
emailing the tiff mailing list.   I have attached some code out of
gdal/frmts/gtiff/geotiff.cpp for loading blocks from a TIFF file that
work for 1 bit files.

The key issues in calling TIFFReadEncodedStrip() like this:

   TIFFReadEncodedStrip(hTIFF, nBlockId, pabyBlockBuf, nBlockBufSize);

are:

  o The image is split into strips.  The number of strips will be
    (IMAGEHEIGHT + ROWSPERSTRIP - 1) / ROWSPERSTRIP with the blockids going
    from 0 to stripcount-1.

  o the size of the buffer required can be determined by calling TIFFStripSize().

The following code shows how to address the individual bits in the bitmap,
for instance for unpacking into one pixel per byte as I do.

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

/* -------------------------------------------------------------------- */
/*      Get block size.                                                 */
/* -------------------------------------------------------------------- */
     if( TIFFIsTiled(hTIFF) )
         nBlockBufSize = TIFFTileSize( hTIFF );
     else
         nBlockBufSize = TIFFStripSize( hTIFF );

/* -------------------------------------------------------------------- */
/*      Allocate a temporary buffer for this strip.                     */
/* -------------------------------------------------------------------- */
     if( pabyBlockBuf == NULL )
     {
         pabyBlockBuf = (GByte *) VSICalloc( 1, nBlockBufSize );
         if( pabyBlockBuf == NULL )
         {
             CPLError( CE_Failure, CPLE_OutOfMemory,
                       "Unable to allocate %d bytes for a temporary strip buffer\n"
                       "in GeoTIFF driver.",
                       nBlockBufSize );

             return( CE_Failure );
         }
     }

/* -------------------------------------------------------------------- */
/*      If we don't have this block already loaded, and we know it      */
/*      doesn't yet exist on disk, just zero the memory buffer and      */
/*      pretend we loaded it.                                           */
/* -------------------------------------------------------------------- */
     if( eAccess == GA_Update && !IsBlockAvailable( nBlockId ) )
     {
         memset( pabyBlockBuf, 0, nBlockBufSize );
         nLoadedBlock = nBlockId;
         return CE_None;
     }

/* -------------------------------------------------------------------- */
/*      Load the block, if it isn't our current block.                  */
/* -------------------------------------------------------------------- */
     if( TIFFIsTiled( hTIFF ) )
     {
         if( TIFFReadEncodedTile(hTIFF, nBlockId, pabyBlockBuf,
                                 nBlockBufSize) == -1 )
         {
             /* Once TIFFError() is properly hooked, this can go away */
             CPLError( CE_Failure, CPLE_AppDefined,
                       "TIFFReadEncodedTile() failed." );

             memset( pabyBlockBuf, 0, nBlockBufSize );

             eErr = CE_Failure;
         }
     }
     else
     {
         if( TIFFReadEncodedStrip(hTIFF, nBlockId, pabyBlockBuf,
                                  nBlockBufSize) == -1 )
         {
             /* Once TIFFError() is properly hooked, this can go away */
             CPLError( CE_Failure, CPLE_AppDefined,
                       "TIFFReadEncodedStrip() failed." );

             memset( pabyBlockBuf, 0, nBlockBufSize );

             eErr = CE_Failure;
         }
     }



From julian at preferred.com  Tue Feb  4 16:08:17 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] DEM  'no_data'  specification
Message-ID: <5.2.0.9.0.20030204155831.009ec570@pop.preferred.com>

  Hi,

    Does GDAL allow user specification of a 'no_data' value for DEM? If
  not, would it be practical/possible to add this?
  My idea is this:
     Images are a perfect media for porting information to mainstream,
  non-GIS applications, e.g. Matlab, image analyzers, etc. Since 'no_data'
  specifications are merely position holders in the file, allowing the user
  to specify their own value would resolve some data scaling problems
  in other applications, as well as allowing construction of visually accurate
  data images .


                                                                     Jim Julian



From warmerdam at pobox.com  Tue Feb  4 16:56:41 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] DEM  'no_data'  specification
In-Reply-To: <5.2.0.9.0.20030204155831.009ec570@pop.preferred.com>
References: <5.2.0.9.0.20030204155831.009ec570@pop.preferred.com>
Message-ID: <3E403719.8090002@pobox.com>

Jim Julian wrote:
> 
>  Hi,
> 
>    Does GDAL allow user specification of a 'no_data' value for DEM? If
>  not, would it be practical/possible to add this?
>  My idea is this:
>     Images are a perfect media for porting information to mainstream,
>  non-GIS applications, e.g. Matlab, image analyzers, etc. Since 'no_data'
>  specifications are merely position holders in the file, allowing the user
>  to specify their own value would resolve some data scaling problems
>  in other applications, as well as allowing construction of visually 
> accurate
>  data images .

Jim,

There are methods in the GDAL API for getting and setting the nodata values
for a band, but few formats actually support the set method and only slightly
more support the get method (generally because the underlying format has no
concept of nodata).

There are no user applications to call the setdata/getdata methods, though it
can be done from Python.

If I had a dataset that I wanted to have a particular nodata value I would
likely copy it to VRT format (creating an XML virtual file referring to the
original), and add the nodata spec to that .vrt file by hand.

In a .vrt file the nodata spec would look something like this:

...
   <VRTRasterBand dataType="Byte" band="1">
     <NoDataValue>255</NoDataValue>
     <SimpleSource>
...

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From julian at preferred.com  Tue Feb  4 20:56:54 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] DEM  'no_data'  specification
In-Reply-To: <3E403719.8090002@pobox.com>
References: <5.2.0.9.0.20030204155831.009ec570@pop.preferred.com>
 <5.2.0.9.0.20030204155831.009ec570@pop.preferred.com>
Message-ID: <5.2.0.9.0.20030204204957.009ee960@pop.preferred.com>

Hi Frank,

    Thanks. One question. Given a VRT format, what can I do with it?
GDAL creates an output file with the same 'no_data' value and any
attempt to load OpenEV with the file crashes the program. Do I
load the image and then reference the *.VRT file?


                                                              Jim Julian
The command line I used with GDAL:
gdal_translate -of VRT 9238-dem-uint16.pgm
and
gdal_translate -of PNM 9238-dem-uint16.vrt 9238-dem-uint16-vrtinv.pgm



>If I had a dataset that I wanted to have a particular nodata value I would
>likely copy it to VRT format (creating an XML virtual file referring to the
>original), and add the nodata spec to that .vrt file by hand.
>
>In a .vrt file the nodata spec would look something like this:
>
>...
>   <VRTRasterBand dataType="Byte" band="1">
>     <NoDataValue>255</NoDataValue>
>     <SimpleSource>
>...



From kamal_jo at yahoo.com  Wed Feb  5 08:36:35 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OpenEV licence
In-Reply-To: <20030204082842.GC2977@ak4719.spb.edu>
Message-ID: <20030205133635.52454.qmail@web41104.mail.yahoo.com>

I found at http://remotesensing.org/gdal/faq.html
that GDAL is free, does the same apply to OpenEV?

__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

From dron at ak4719.spb.edu  Wed Feb  5 14:08:52 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OpenEV licence
In-Reply-To: <20030205133635.52454.qmail@web41104.mail.yahoo.com>
References: <20030204082842.GC2977@ak4719.spb.edu> <20030205133635.52454.qmail@web41104.mail.yahoo.com>
Message-ID: <20030205190852.GC5680@ak4719.spb.edu>

On Wed, Feb 05, 2003 at 05:36:35AM -0800, Ayman Kamal wrote:
> I found at http://remotesensing.org/gdal/faq.html
> that GDAL is free, does the same apply to OpenEV?

GDAL distributed under X/MIT license, OpenEV comes with GPL.
You can do what you want with GDAL except removing copyright messages
from sources, OpenEV usage is more restricted: you can't use sources in
closed non-free projects.

And finally yes, both projects are free (but in different flavors).

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From s.perkins at lanl.gov  Wed Feb  5 16:25:22 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OpenEV licence
In-Reply-To: <20030205190852.GC5680@ak4719.spb.edu>
References: <20030204082842.GC2977@ak4719.spb.edu>
	 <20030205133635.52454.qmail@web41104.mail.yahoo.com>
	 <20030205190852.GC5680@ak4719.spb.edu>
Message-ID: <1044480322.11428.91.camel@afreet.lanl.gov>

On Wed, 2003-02-05 at 12:08, Andrey Kiselev wrote:
> On Wed, Feb 05, 2003 at 05:36:35AM -0800, Ayman Kamal wrote:
> > I found at http://remotesensing.org/gdal/faq.html
> > that GDAL is free, does the same apply to OpenEV?
> 
> GDAL distributed under X/MIT license, OpenEV comes with GPL.
> You can do what you want with GDAL except removing copyright messages
> from sources, OpenEV usage is more restricted: you can't use sources in
> closed non-free projects.

I thought OpenEV was LGPL'd?

See e.g.:

http://sourceforge.net/projects/openev/
http://openev.sourceforge.net/geo_inov_proj_summary/openev_open_source.html


The LGPL means you can use it in proprietary software, surely?

Sy


P.S.

<PhilosophicalDigression>

Personally I think the LGPL is fantastic for encouraging people to
contribute to standard re-usable software components like GDAL and
OpenEV, and making those components a standard.

Say that I am in a commercial company and I would like to incorporate
GDAL in my code, but it lacks some feature I need (like a driver for
some format). It makes sense for me to develop and contribute that
driver to the open source since that's the only way it will get
incorporated into future developments of the component. There's no
advantage to me "stealing" GDAL and keeping my driver to myself since
then I won't benefit from others' future work on the component. At the
same time my company doesn't need to buy into the "thou shalt not sell
software" philosophy required by the GPL. Other people get my driver,
the component becomes more useful and gets incorporated into even more
software, and attracts more developers. Everyone wins.

In contrast, the GPL puts severe restrictions on possible business
models that are not easily accepted by many commercial companies and
even semi-commercial entities like the national lab I work for. In doing
so, it can act as a barrier to potential contributors and restrict the
use and growth of the component.

Some counter-arguments (and counter-counter-arguments):

- Richard Stallman and others argue that libraries should use the GPL
to force more people to make their _application_ software free (due to
the infectious nature of the GPL). See
http://www.gnu.org/philosophy/why-not-lgpl.html for details. The cost
is that many commercial programmers / potential contributors are turned
away.

- There is also an argument I've heard that developers won't want to
contribute to an LGPL project when others might "steal" their efforts,
but that seems to be more of an argument against open source than
against LGPL.


I'm not opposed to the GPL in all cases, but I don't really like it for
libraries and reusable components.

</PhilosophicalDigression>



From DMartin at erac.com  Wed Feb  5 17:08:44 2003
From: DMartin at erac.com (Martin, Daniel)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OGR TIGER driver now supports TIGER/Line 2002 form
	 at
Message-ID: <4ACBA1414DD9EE418CC250E4AAA9035AADBD4A@STL-EXBE-I03.corp.erac.com>

Does the GDAL Windows binary distribution referenced on the GDAL page
(http://www.remotesensing.org/gdal/), specifically
ftp://ftp.remotesensing.org/pub/gdal/gdal-115a-ntbin.zip, include this
updated version of OGR that handles ?  Since ogr2ogr.exe in the archive has
a date of 10/12/2001 I would assume not.  On the other hand the archive has
a date of 2/5/2003.

I only need OGR, but GDAL is the only binary I'm aware of.

If not, let me officially register my petition that it be updated.  I could
go about installing VC++ and .NET Studio, but I'd also rather avoid it.

Thanks,
Dan Martin

> -----Original Message-----
> From: Mark Phillips [mailto:mbp@geomtech.com]
> Sent: Thursday, January 16, 2003 1:39 PM
> To: gdal-dev@remotesensing.org
> Cc: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] OGR TIGER driver now supports TIGER/Line 2002
> form at
> 
> 
> 
> > Confusing that some of the data released in 2002 is called 2000 and
> > other data is called 2002.  Especially when the Census was taken in
> > 2000.
> 
> I think there were actually 3 different variants of the 2000 data,
> released at various times between 2000 and 2002, inclusive.  And the
> data called 2002 wasn't actually released until 2003.  Yes it's very
> confusing!
> 
> 
> > As I said, OGR did have a few issues with the 2000 UA data. 
>  But, I imagine
> > that is a moot point now.
> 
> OGR will still read UA 2000 TIGER files (and several older 
> TIGER versions
> as well); it uses the version code in the files to figure out what
> version it's dealing with.  While implementing the driver for the 2002
> format I did fix a couple of minor bugs in the code that handles the
> UA 2000 format, so you might get fewer errors if you reprocess your
> files with the current version of the code.  The changes were minor,
> though, so it might not be worth the effort.
> 
> 
> --Mark
> 
> Mark Phillips @ Geometry Technologies LLC
> P.O. Box 1170, Black Mountain, NC  28711
> Phone: 828-664-1748
> mbp@geomtech.com       http://www.geomtech.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 

From gwalter at atlsci.com  Wed Feb  5 18:11:16 2003
From: gwalter at atlsci.com (gwalter@atlsci.com)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OpenEV licence
References: <20030204082842.GC2977@ak4719.spb.edu>
		 <20030205133635.52454.qmail@web41104.mail.yahoo.com>
		 <20030205190852.GC5680@ak4719.spb.edu> <1044480322.11428.91.camel@afreet.lanl.gov>
Message-ID: <3E419A14.E55109DC@atlsci.com>

OpenEV is licensed under LGPL, not GPL.  It can be (and is) used in
proprietary software.

Gillian (OpenEV developer at Atlantis)

Simon Perkins wrote:

> On Wed, 2003-02-05 at 12:08, Andrey Kiselev wrote:
> > On Wed, Feb 05, 2003 at 05:36:35AM -0800, Ayman Kamal wrote:
> > > I found at http://remotesensing.org/gdal/faq.html
> > > that GDAL is free, does the same apply to OpenEV?
> >
> > GDAL distributed under X/MIT license, OpenEV comes with GPL.
> > You can do what you want with GDAL except removing copyright messages
> > from sources, OpenEV usage is more restricted: you can't use sources in
> > closed non-free projects.
>
> I thought OpenEV was LGPL'd?
>
> See e.g.:
>
> http://sourceforge.net/projects/openev/
> http://openev.sourceforge.net/geo_inov_proj_summary/openev_open_source.html
>
> The LGPL means you can use it in proprietary software, surely?
>
> Sy
>
> P.S.
>
> <PhilosophicalDigression>
>
> Personally I think the LGPL is fantastic for encouraging people to
> contribute to standard re-usable software components like GDAL and
> OpenEV, and making those components a standard.
>
> Say that I am in a commercial company and I would like to incorporate
> GDAL in my code, but it lacks some feature I need (like a driver for
> some format). It makes sense for me to develop and contribute that
> driver to the open source since that's the only way it will get
> incorporated into future developments of the component. There's no
> advantage to me "stealing" GDAL and keeping my driver to myself since
> then I won't benefit from others' future work on the component. At the
> same time my company doesn't need to buy into the "thou shalt not sell
> software" philosophy required by the GPL. Other people get my driver,
> the component becomes more useful and gets incorporated into even more
> software, and attracts more developers. Everyone wins.
>
> In contrast, the GPL puts severe restrictions on possible business
> models that are not easily accepted by many commercial companies and
> even semi-commercial entities like the national lab I work for. In doing
> so, it can act as a barrier to potential contributors and restrict the
> use and growth of the component.
>
> Some counter-arguments (and counter-counter-arguments):
>
> - Richard Stallman and others argue that libraries should use the GPL
> to force more people to make their _application_ software free (due to
> the infectious nature of the GPL). See
> http://www.gnu.org/philosophy/why-not-lgpl.html for details. The cost
> is that many commercial programmers / potential contributors are turned
> away.
>
> - There is also an argument I've heard that developers won't want to
> contribute to an LGPL project when others might "steal" their efforts,
> but that seems to be more of an argument against open source than
> against LGPL.
>
> I'm not opposed to the GPL in all cases, but I don't really like it for
> libraries and reusable components.
>
> </PhilosophicalDigression>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Feb  5 17:10:24 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OpenEV licence
In-Reply-To: <1044480322.11428.91.camel@afreet.lanl.gov>
References: <20030204082842.GC2977@ak4719.spb.edu>	 <20030205133635.52454.qmail@web41104.mail.yahoo.com>	 <20030205190852.GC5680@ak4719.spb.edu> <1044480322.11428.91.camel@afreet.lanl.gov>
Message-ID: <3E418BD0.3020809@pobox.com>

Simon Perkins wrote:
> I thought OpenEV was LGPL'd?
> 
> See e.g.:
> 
> http://sourceforge.net/projects/openev/
> http://openev.sourceforge.net/geo_inov_proj_summary/openev_open_source.html
> 
> 
> The LGPL means you can use it in proprietary software, surely?

Simon,

You are right, it is LGPL, not GPL for essentially the reasons you stated.
Note that proprietary products using LGPL libraries are generally required
to provide the source to the LGPLed component (obviously with any
modifications) on request, and the LGPLed component needs to be included
in such a way that the user can rebuild and replace it.  For instance, using
it as a shared library, or separate executable.  You should not statically
link an LGPLed component into a closed source package as the user loses the
ability to fix/improve the LGPLed component for use in the closed source
package.

I keep GDAL under an X/MIT license for maximum re-usability, without even
these modest limitations.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tbeckman at usgs.gov  Wed Feb  5 17:31:02 2003
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
Message-ID: <OF5FC06903.8BC4AC88-ON86256CC4.0079FBE0@cr.usgs.gov>

Frank and the rest of the list,

We've been working to incorporate GDAL into our software.  One drawback 
we've found so far is that the performance of gdal when it needs to do 
data type conversions is extremely slow.  Here is a patch that I've 
generated that seems to work to improve the performance.  It works by 
changing the GDALRasterBand::IRasterIO to attempt to convert more than a 
single pixel for every call to GDALCopyWords.  For the testing I've done, 
it seems to work well.  I'm not sure if I've covered all the possible 
combinations though.  There are still cases where it falls back to calling 
GDALCopyWords once for each pixel.

Some preliminary timings show that the runtime to convert a 100 MB Float32 
image to Byte data took 49 seconds with the original code, but only 27 
seconds with the patch below.  This is using our unreleased LAS driver on 
an SGI Origin 2000 with 250 MHz processors.

Any comments?

Oh yeah, once for the record - I really dislike the naming convention used 
for variables in the routine.  It makes it much harder to understand the 
code.  Also, some of the variable names could use some comments to explain 
what they do (I'd add them, but I'm not 100% sure).  Example: the 
nSrcPixelOffset parameter to GDALCopyWords.  If I understand it correctly, 
it isn't an offset, it is the value to stride through the data with.

I also have another set of changes that cut the time nearly in half 
again...  But one step at a time.

Patch (hopefully won't be mangled by my email program):
---------------------------------------------------------------------------------------------------------------
--- ../../../remotesensing_gdal/core/rasterio.cpp       Mon Nov 11 
10:02:06 2002
+++ rasterio.cpp        Wed Feb  5 15:58:02 2003
@@ -103,6 +113,8 @@
 
 {
     int         nBandDataSize = GDALGetDataTypeSize( eDataType ) / 8;
+    int bytesPerDataPixel = GDALGetDataTypeSize( eDataType ) / 8;
+    int bytesPerBufPixel = GDALGetDataTypeSize( eBufType ) / 8;
     GByte       *pabySrcBlock = NULL;
     GDALRasterBlock *poBlock;
     int         nLBlockX=-1, nLBlockY=-1, iBufYOff, iBufXOff, iSrcY;
@@ -231,6 +243,26 @@
                     return CE_Failure;
             }
 
+            /* calculate buffer span in the current block and handle as 
many
+               pixels as possible in one call to the GDALCopyWords 
routine.
+               Note: this makes sure that if the data is being subsampled 
at
+               somethings besides an integer interval that only one pixel 
at a
+               time is grabbed.  This is very inefficient.  It would 
likely be
+               better to convert the entire line, then pull out the 
pixels that
+               are needed for the subsampled version. */
+            int iSrcXInc = (int)dfSrcXInc;
+            int wordCount = 1;
+            if ( dfSrcXInc == iSrcXInc)
+            {
+                /* integer multiple for subsampling, so calculate the 
number
+                   of words to copy.  Also make sure the end of the 
requested
+                   bytes isn't exceeded. */
+                int endXBlockIndex = (nLBlockX + 1) * nBlockXSize;
+                wordCount = (endXBlockIndex - iSrcX)/iSrcXInc;
+                if (wordCount > (nBufXSize - iBufXOff))
+                    wordCount = nBufXSize - iBufXOff;
+            }
+
 /* -------------------------------------------------------------------- 
*/
 /*      Copy over this pixel of data. */
 /* -------------------------------------------------------------------- 
*/
@@ -239,29 +271,38 @@
 
             if( eDataType == eBufType )
             {
+                /* FIXME: it might be better to call GDALCopyWords to 
process
+                   all the pixels from the current buffer */
                 if( eRWFlag == GF_Read )
                     memcpy( ((GByte *) pData) + iBufOffset,
                             pabySrcBlock + iSrcOffset, nBandDataSize );
                 else
                     memcpy( pabySrcBlock + iSrcOffset, 
                             ((GByte *) pData) + iBufOffset, nBandDataSize 
);
+                iBufOffset += nPixelSpace;
             }
             else
             {
-                /* type to type conversion ... ouch, this is expensive 
way
-                   of handling single words */
- 
+                /* copy all the words for the current image block */
                 if( eRWFlag == GF_Read )
-                    GDALCopyWords( pabySrcBlock + iSrcOffset, eDataType, 
0,
-                                   ((GByte *) pData) + iBufOffset, 
eBufType, 0,
-                                   1 );
+                {
+                    GDALCopyWords( pabySrcBlock + iSrcOffset, eDataType, 
+                                   bytesPerDataPixel * iSrcXInc,
+                                   ((GByte *) pData) + iBufOffset, 
eBufType, 
+                                   bytesPerBufPixel * iSrcXInc, wordCount 
);
+                }
                 else
-                    GDALCopyWords( ((GByte *) pData) + iBufOffset, 
eBufType, 0,
-                                   pabySrcBlock + iSrcOffset, eDataType, 
0,
-                                   1 );
+                {
+                    GDALCopyWords( ((GByte *) pData) + iBufOffset, 
eBufType, 
+                                   bytesPerBufPixel * iSrcXInc,
+                                   pabySrcBlock + iSrcOffset, eDataType, 
+                                   bytesPerDataPixel * iSrcXInc, 
wordCount );
+                }
+                /* adjust the loop counter to account for copying 
multiple
+                   words - ugly I know */
+                iBufXOff += (wordCount - 1);
+                iBufOffset += (nPixelSpace * wordCount);
             }
-
-            iBufOffset += nPixelSpace;
         }
     }
-------------------------------------------------------------------------------------------------------------------------


Interesting timing data for converting a 100 MB image with Float32 data to 
Byte data (using our LAS driver that hasn't been released yet): 
Quick summary: original code took 49 seconds.  patched code took 27 
seconds.

*****Original timing:
 -------------------------------------------------------------------------
Summary of ideal time data (ideal)--
                    9537549636: Total number of instructions executed
                   12281429794: Total computed cycles
                        49.126: Total computed execution time (secs.)
                         1.288: Average cycles / instruction
-------------------------------------------------------------------------
Function list, in descending order by exclusive ideal time
-------------------------------------------------------------------------
 [index]   excl.secs   excl.%     cum.%        cycles  instructions calls 
function  (dso: file, line)

     [1]      25.279    51.5%     51.5%    6319710000    5075915000 
25020000  GDALCopyWords (libgdal.1.1.so: rasterio.cpp, 369)
     [2]      18.711    38.1%     89.5%    4677785000    2951650000 10000 
GDALRasterBand::IRasterIO(GDALRWFlag,int,int,int,int,void*,int,int,GDALDataType,int,int) 
(libgdal.1.1.so: rasterio.cpp, 114)
     [3]       4.934    10.0%     99.6%    1233501577    1460605855 
50030709  memcpy (libc.so.1: bcopy.s, 329)
     [4]       0.019     0.0%     99.6%       4874107       5695887 5062 
memset (libc.so.1: bzero.s, 98)

***** Timing with the patch:
-------------------------------------------------------------------------
Summary of ideal time data (ideal)--
                    5839329727: Total number of instructions executed
                    6783873165: Total computed cycles
                        27.135: Total computed execution time (secs.)
                         1.162: Average cycles / instruction
-------------------------------------------------------------------------
Function list, in descending order by exclusive ideal time
-------------------------------------------------------------------------
 [index]   excl.secs   excl.%     cum.%        cycles  instructions calls 
function  (dso: file, line)

     [1]      21.979    81.0%     81.0%    5494875000    4326065000 25000 
GDALCopyWords (libgdal.1.1.so: rasterio.cpp, 400)
     [2]       4.934    18.2%     99.2%    1233501840    1460606163 
50030721  memcpy (libc.so.1: bcopy.s, 329)
     [3]       0.019     0.1%     99.3%       4874107       5695887 5062 
memset (libc.so.1: bzero.s, 98)
     [4]       0.018     0.1%     99.3%       4515000       2710000 10000 
GDALRasterBand::IRasterIO(GDALRWFlag,int,int,int,int,void*,int,int,GDALDataType,int,int) 
(libgdal.1.1.so: rasterio.cpp, 114)


--------------------------------------------------------------------------
Tim Beckmann               tbeckman@usgs.gov
Software Project Lead
SAIC
EROS Data Center, Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax


From warmerdam at pobox.com  Wed Feb  5 17:32:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OGR TIGER driver now supports TIGER/Line 2002 form
  at
In-Reply-To: <4ACBA1414DD9EE418CC250E4AAA9035AADBD4A@STL-EXBE-I03.corp.erac.com>
References: <4ACBA1414DD9EE418CC250E4AAA9035AADBD4A@STL-EXBE-I03.corp.erac.com>
Message-ID: <3E4190E3.9090304@pobox.com>

Martin, Daniel wrote:
> Does the GDAL Windows binary distribution referenced on the GDAL page
> (http://www.remotesensing.org/gdal/), specifically
> ftp://ftp.remotesensing.org/pub/gdal/gdal-115a-ntbin.zip, include this
> updated version of OGR that handles ?  Since ogr2ogr.exe in the archive has
> a date of 10/12/2001 I would assume not.  On the other hand the archive has
> a date of 2/5/2003.
> 
> I only need OGR, but GDAL is the only binary I'm aware of.
> 
> If not, let me officially register my petition that it be updated.  I could
> go about installing VC++ and .NET Studio, but I'd also rather avoid it.

Dan,

I don't think there is a currently released build of GDAL/OGR with the
updated TIGER support.  The most recent binary builds are part of the
OpenEV_FW releases, but that is from sometime in December before Mark
completed the TIGER work.

I have stopped preparing standalone GDAL (or OGR) binary releases since it
is quite a bit of work, and it is included in the OpenEV_FW releases.
I *should* prepare a new OpenEV_FW release sometime soon though.  Whether
I will is somewhat less certain.

I should also likely remove the references to the ancient 1.1.5 based binary
builds.  They jus cause problems.  In fact, this much I will go ahead and
do!

How do people feel about GDAL only being available (as a pre-built binary)
as part of the OpenEV_FW releases?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tbeckman at usgs.gov  Wed Feb  5 17:38:12 2003
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
Message-ID: <OF702EE9F8.44F70BAA-ON86256CC4.007C4082@cr.usgs.gov>

Okay, so much for the patch not getting mangled... Here is is attached. 
Hopefully it will get though without linewrap this way...


--------------------------------------------------------------------------
Tim Beckmann               tbeckman@usgs.gov
Software Project Lead
SAIC
EROS Data Center, Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rasterio.diff
Type: application/octet-stream
Size: 4297 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030205/77307d68/rasterio.obj
From warmerdam at pobox.com  Wed Feb  5 17:43:48 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
In-Reply-To: <OF5FC06903.8BC4AC88-ON86256CC4.0079FBE0@cr.usgs.gov>
References: <OF5FC06903.8BC4AC88-ON86256CC4.0079FBE0@cr.usgs.gov>
Message-ID: <3E4193A4.3090009@pobox.com>

Tim Beckmann wrote:
> Frank and the rest of the list,
> 
> We've been working to incorporate GDAL into our software.  One drawback 
> we've found so far is that the performance of gdal when it needs to do 
> data type conversions is extremely slow.  Here is a patch that I've 
> generated that seems to work to improve the performance.  It works by 
> changing the GDALRasterBand::IRasterIO to attempt to convert more than a 
> single pixel for every call to GDALCopyWords.  For the testing I've done, 
> it seems to work well.  I'm not sure if I've covered all the possible 
> combinations though.  There are still cases where it falls back to calling 
> GDALCopyWords once for each pixel.
> 
> Some preliminary timings show that the runtime to convert a 100 MB Float32 
> image to Byte data took 49 seconds with the original code, but only 27 
> seconds with the patch below.  This is using our unreleased LAS driver on 
> an SGI Origin 2000 with 250 MHz processors.
> 
> Any comments?

Tim,

Based on a quick inspection the code looks OK.  Could you submit this
patch into bugzilla as an enhancement request?  I will have Andrey apply
and test it.

> Oh yeah, once for the record - I really dislike the naming convention used 
> for variables in the routine.  It makes it much harder to understand the 
> code.  >  Also, some of the variable names could use some comments to explain
> what they do (I'd add them, but I'm not 100% sure).  Example: the 
> nSrcPixelOffset parameter to GDALCopyWords.  If I understand it correctly, 
> it isn't an offset, it is the value to stride through the data with.

Well, I think of it as the offset from the beginning of one pixel to the
beginning of the next.  I would agree of course that more internal
documentation would be helpful.

> I also have another set of changes that cut the time nearly in half 
> again...  But one step at a time.

I look forward to receiving them.

There is clearly lots of room for improvement in GDAL, at least in
cases where up/down sampling is done and/or when data type conversion is
done.   I have tried to ensure that the 1:1 IO logic (especially on
block boundaries) is efficient.

I would also add that I think I need to write some regression tests that
exercise lots of the cases so that when we tune it we can have greater
confidence that we haven't broken anything.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From DMartin at erac.com  Wed Feb  5 17:44:50 2003
From: DMartin at erac.com (Martin, Daniel)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OGR TIGER driver now supports TIGER/Line 2002 form
	 at
Message-ID: <4ACBA1414DD9EE418CC250E4AAA9035AADBD4B@STL-EXBE-I03.corp.erac.com>

Quite honestly, as long as it includes the ogr2ogr.exe or something similar,
I don't care.  I've merely been a brainless consumer-level user when it
comes to GDAL/OGR.  I guess my next obvious question is, does it include
ogr2ogr?  :)

-Dan


> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com]
> Sent: Wednesday, February 05, 2003 4:32 PM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] OGR TIGER driver now supports TIGER/Line 2002
> form at
> 
> 
> Martin, Daniel wrote:
> > Does the GDAL Windows binary distribution referenced on the 
> GDAL page
> > (http://www.remotesensing.org/gdal/), specifically
> > ftp://ftp.remotesensing.org/pub/gdal/gdal-115a-ntbin.zip, 
> include this
> > updated version of OGR that handles ?  Since ogr2ogr.exe in 
> the archive has
> > a date of 10/12/2001 I would assume not.  On the other hand 
> the archive has
> > a date of 2/5/2003.
> > 
> > I only need OGR, but GDAL is the only binary I'm aware of.
> > 
> > If not, let me officially register my petition that it be 
> updated.  I could
> > go about installing VC++ and .NET Studio, but I'd also 
> rather avoid it.
> 
> Dan,
> 
> I don't think there is a currently released build of GDAL/OGR with the
> updated TIGER support.  The most recent binary builds are part of the
> OpenEV_FW releases, but that is from sometime in December before Mark
> completed the TIGER work.
> 
> I have stopped preparing standalone GDAL (or OGR) binary 
> releases since it
> is quite a bit of work, and it is included in the OpenEV_FW releases.
> I *should* prepare a new OpenEV_FW release sometime soon 
> though.  Whether
> I will is somewhat less certain.
> 
> I should also likely remove the references to the ancient 
> 1.1.5 based binary
> builds.  They jus cause problems.  In fact, this much I will 
> go ahead and
> do!
> 
> How do people feel about GDAL only being available (as a 
> pre-built binary)
> as part of the OpenEV_FW releases?
> 
> Best regards,
> 
> -- 
> ---------------------------------------+----------------------
> ----------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 

From tbeckman at usgs.gov  Wed Feb  5 18:23:44 2003
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
Message-ID: <OFAE799B76.2DD8FE7C-ON86256CC4.007E4749@cr.usgs.gov>

Frank,

Okay, I put it in bugzilla.  It is #281.

I still need to clean up the other changes a bit before I submit them. One 
question for you.  When GDALCopyWords does data type conversions, it uses 
memcpy for copying out a single data element at a time.  The only reason I 
can think of why this would be done is that you're worried about being 
given data buffers that aren't properly aligned in memory for platforms 
that have such limitations.  Is this correct?  The next set of changes 
assumes memory alignment is correct.  I can either try using memcpy and 
see if it impacts speed in my changes, or I can make it one more special 
case that the changes I've done are only used when memory alignment 
constraints are met.  Actually, I can't think of a case where memory 
wouldn't be correctly aligned when going through RasterIO.  But I suppose 
someone could end up with incorrectly aligned buffers when calling 
GDALCopyWords directly (but for efficiency maybe it should just error out 
in that case and the driver should be fixed).

I agree that 1:1 IO should be as efficient as possible.  I won't be 
worrying about the down/up sampling speed right now since it is a feature 
we won't be using in the near future in LAS.  But the data type 
conversions are something we depend on the I/O layer to do currently.

A regression test is a good idea.  We have a large one for LAS.  But right 
now it only exercises our own LAS driver when we're using GDAL.  That will 
change in the future (probably distant).

BTW, I should have mentioned that I work with April Shimitz and Lowell 
Johnson who have filled you in a little on what we're doing.

Thanks
Tim

--------------------------------------------------------------------------
Tim Beckmann               tbeckman@usgs.gov
Software Project Lead
SAIC
EROS Data Center, Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax





Frank Warmerdam <warmerdam@pobox.com>
Sent by: gdal-dev-admin@remotesensing.org
02/05/2003 04:43 PM
Please respond to gdal-dev

 
        To:     gdal-dev@remotesensing.org
        cc: 
        Subject:        Re: [Gdal-dev] [RFC] RasterIO speedup patch


Tim Beckmann wrote:
> Frank and the rest of the list,
> 
> We've been working to incorporate GDAL into our software.  One drawback 
> we've found so far is that the performance of gdal when it needs to do 
> data type conversions is extremely slow.  Here is a patch that I've 
> generated that seems to work to improve the performance.  It works by 
> changing the GDALRasterBand::IRasterIO to attempt to convert more than a 

> single pixel for every call to GDALCopyWords.  For the testing I've 
done, 
> it seems to work well.  I'm not sure if I've covered all the possible 
> combinations though.  There are still cases where it falls back to 
calling 
> GDALCopyWords once for each pixel.
> 
> Some preliminary timings show that the runtime to convert a 100 MB 
Float32 
> image to Byte data took 49 seconds with the original code, but only 27 
> seconds with the patch below.  This is using our unreleased LAS driver 
on 
> an SGI Origin 2000 with 250 MHz processors.
> 
> Any comments?

Tim,

Based on a quick inspection the code looks OK.  Could you submit this
patch into bugzilla as an enhancement request?  I will have Andrey apply
and test it.

> Oh yeah, once for the record - I really dislike the naming convention 
used 
> for variables in the routine.  It makes it much harder to understand the 

> code.  >  Also, some of the variable names could use some comments to 
explain
> what they do (I'd add them, but I'm not 100% sure).  Example: the 
> nSrcPixelOffset parameter to GDALCopyWords.  If I understand it 
correctly, 
> it isn't an offset, it is the value to stride through the data with.

Well, I think of it as the offset from the beginning of one pixel to the
beginning of the next.  I would agree of course that more internal
documentation would be helpful.

> I also have another set of changes that cut the time nearly in half 
> again...  But one step at a time.

I look forward to receiving them.

There is clearly lots of room for improvement in GDAL, at least in
cases where up/down sampling is done and/or when data type conversion is
done.   I have tried to ensure that the 1:1 IO logic (especially on
block boundaries) is efficient.

I would also add that I think I need to write some regression tests that
exercise lots of the cases so that when we tune it we can have greater
confidence that we haven't broken anything.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From eugeneai at icc.ru  Fri Feb  7 03:18:18 2003
From: eugeneai at icc.ru (Cherkashin Evgeny)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Setup scripts for Python (win32 and Linux-rpm).
Message-ID: <3E436BCA.5010205@icc.ru>

Hi, Frank and all!

I've reworked the setup.py script according to Your needs and convenience.
Now:
1. There should be no __init__.py in the pymod directory.
2. setup.py and MANIFEST.in sould be placed and run from the source root.
3. The script is not intended to be the sdist (source distribution) 
creator, but binary packages for Linux (rpm) and win32.
4. MANIFEST.in is used only to produce temporal source RPM package.

How to use:
1. Compile the GDAL library as regular.
2. issue in the source root:
win32: python setup.py bdist_wininst
Linux: python setup.py bdist_rpm
Source RPM will contain libgdal.1.1.so and all the includes (everything 
for building the python module) and should be ignored.
Consider the source distribution the original gdal sources with the 
files included.

The usage of the package now is as regular just "import gdal, ogr, osr" 
no prefix needed.

Gud luck,
Evgeny Cherkashin

Frank, place the attached files in the source root and, please, correct 
URL keyword in the setup.py.
-------------- next part --------------
#!/usr/bin/env python

import string
from distutils.core import setup, Extension
import os, os.path, glob

#
# debug
#
#import sys
#sys.argv.append("build")

f=open(os.path.join("VERSION"))
v=f.read()
f.close()
del f

version=v.strip()
dllversion=version.replace(".","")
soversion=v[:3]

SOURCES=glob.glob(os.path.join("pymod","*.c*"))
print SOURCES
INCLUDE_DIRS=[os.path.join("core"), os.path.join("port"), os.path.join("ogr"), os.path.join("pymod"), ] # only necessary
LIBRARY_DIRS = ["."]

INCLUDE_FILES = [
	glob.glob(os.path.join("core", "*.h")),
	glob.glob(os.path.join("port", "*.h")),
	glob.glob(os.path.join("alg", "*.h")),
	glob.glob(os.path.join("ogr", "*.h")), 
	glob.glob(os.path.join("ogr", "ogrsf_frmts", "*.h")),
	glob.glob(os.path.join("pymod", "*.h"))
]

IF=[]
for i in INCLUDE_FILES:
	IF.extend(i)
INCLUDE_FILES=IF
del IF

HTML_FILES=glob.glob(os.path.join("html", "*"))

#HTML_FILES.remove(os.path.join("html", ".cvsignore"))

#print INCLUDE_FILES

if os.name=="nt":
	DLL="gdal%s.dll" % dllversion
	DATA_FILES=[
		("", [DLL]),
#		("libs", [os.path.join("gdal_i.lib"), os.path.join("pymod","_gdal.lib")]),
		("libs", [os.path.join("gdal_i.lib")]),
	]
	LIBRARIES = ["gdal_i"]
	EXTRA_LINK_ARGS=[]
else:
	DATA_FILES=[
		("lib", ['libgdal.%s.so' % soversion]),
	]
	LIBRARIES = []
	#EXTRA_LINK_ARGS=[os.path.join("gdal.a")]
	LIBRARIES = ["gdal.%s" % soversion]
	EXTRA_LINK_ARGS=[]
	
DATA_FILES.append(("include", INCLUDE_FILES))
DATA_FILES.append((os.path.join("doc","gdal"), HTML_FILES))

setup (name = "Pyhton_GDAL",
       version = version,
       description = "Geospatial Data Abstraction Library: Python Bindings",
       author = "Frank Warmerdam",
       #packager = "Evgeniy Cherkashin",
       author_email = "warmerda@home.com",
       #packager_email = "eugeneai@icc.ru",
       url = "http://www.remotesensing.org/.../gdal/",	# I've forgot the rest
       packages = [''],
       package_dir = {'': 'pymod'},
       extra_path = "gdal",
       ext_modules = [Extension('_gdal',
			sources = SOURCES,
			include_dirs = INCLUDE_DIRS,
			libraries = LIBRARIES,
			library_dirs = LIBRARY_DIRS,
			extra_link_args=EXTRA_LINK_ARGS,
			),
		],
		data_files = DATA_FILES
	)

-------------- next part --------------
recursive-include pymod *.py *.cpp *.c *.h *.i
recursive-include html *
recursive-include core *.h
recursive-include port *.h
recursive-include alg *.h
recursive-include ogr *.h
recursive-include frmts *.h
include VERSION
include setup.py
include MAINFEST.in
include *gdal*.so
include *gdal*.lib
include *gdal*.dll

From warmerdam at pobox.com  Fri Feb  7 09:57:23 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Setup scripts for Python (win32 and Linux-rpm).
In-Reply-To: <3E436BCA.5010205@icc.ru>
References: <3E436BCA.5010205@icc.ru>
Message-ID: <3E43C953.4010000@pobox.com>

Cherkashin Evgeny wrote:
> Hi, Frank and all!
> 
> I've reworked the setup.py script according to Your needs and convenience.
> Now:
> 1. There should be no __init__.py in the pymod directory.
> 2. setup.py and MANIFEST.in sould be placed and run from the source root.

Evgeny,

OK, I have committed setup.py and MANIFEST.in in the gdal root directory
after fixing up a few things in setup.py.

> 3. The script is not intended to be the sdist (source distribution) 
> creator, but binary packages for Linux (rpm) and win32.
> 4. MANIFEST.in is used only to produce temporal source RPM package.

I don't really understand what 3) and 4) mean.  What is a temporal
source RPM package?

> How to use:
> 1. Compile the GDAL library as regular.
> 2. issue in the source root:
> win32: python setup.py bdist_wininst
> Linux: python setup.py bdist_rpm
> Source RPM will contain libgdal.1.1.so and all the includes (everything 
> for building the python module) and should be ignored.
> Consider the source distribution the original gdal sources with the 
> files included.

OK, I tried running the "python setup.py bdist_rpm" command and got:

   building RPMs
   rpm -ba --define _topdir 
/debian/home/warmerda/osrs/gdal/build/bdist.linux-i686/rpm --clean 
build/bdist.linux-i686/rpm/SPECS/Python_GDAL.spec
   -ba: unknown option
   error: command 'rpm' failed with exit status 1

What is the significance of the "-ba" option?  I would add that this
is on RedHat 8.

In any event, a dist/Python_GDAL-1.1.8.tar.gz was produced.  I tried
unpacking this and doing a "python setup.py build" and things seemed to
go fine.  I didn't try installing it though.

Sorry, I guess the Python_GDAL-1.1.8.tar.gz would be suitable for distribution
to Linux users who want to install GDAL just for use from Python, right?
Where does it install libgdal.1.1.so?  Are there likely to be problems if a
slightly different version of libgdal.1.1.so is installed elsewhere?  How
would I go about making a binary distribution that installed itself
normally for stuff like binaries and shared data but also installed Python
support properly on the platform?

While I don't think I quite get how setup.py would be properly used, it is
committed to CVS and we can work at this for future releases.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From eugeneai at icc.ru  Sat Feb  8 02:03:30 2003
From: eugeneai at icc.ru (Cherkashin Evgeny)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Setup scripts for Python (win32 and Linux-rpm).
In-Reply-To: <3E43C953.4010000@pobox.com>
References: <3E436BCA.5010205@icc.ru> <3E43C953.4010000@pobox.com>
Message-ID: <3E44ABC2.8030902@icc.ru>

Hi, Frank!

>> 3. The script is not intended to be the sdist (source distribution) 
>> creator, but binary packages for Linux (rpm) and win32.
>> 4. MANIFEST.in is used only to produce temporal source RPM package.
> 
> 
> I don't really understand what 3) and 4) mean.  What is a temporal
> source RPM package?

I mean, that setup.py is intended to be used to build ONLY binary packages.

> 
>> How to use:
>> 1. Compile the GDAL library as regular.
>> 2. issue in the source root:
>> win32: python setup.py bdist_wininst
>> Linux: python setup.py bdist_rpm
>> Source RPM will contain libgdal.1.1.so and all the includes 
>> (everything for building the python module) and should be ignored.
>> Consider the source distribution the original gdal sources with the 
>> files included.
> 
> 
> OK, I tried running the "python setup.py bdist_rpm" command and got:
> 
>   building RPMs
>   rpm -ba --define _topdir 
> /debian/home/warmerda/osrs/gdal/build/bdist.linux-i686/rpm --clean 
> build/bdist.linux-i686/rpm/SPECS/Python_GDAL.spec
>   -ba: unknown option
>   error: command 'rpm' failed with exit status 1
> 

For me it is strange reaction.... -ba (it means build all, i.e. both 
source and binary rpms). It is usual option. I use rpm-based 
distribution inherited from Mandrake. I should find a RedHat 
distribution to test. OK.

> What is the significance of the "-ba" option?  I would add that this
> is on RedHat 8.
> 
> In any event, a dist/Python_GDAL-1.1.8.tar.gz was produced.  I tried
> unpacking this and doing a "python setup.py build" and things seemed to
> go fine.  I didn't try installing it though.
> 
> Sorry, I guess the Python_GDAL-1.1.8.tar.gz would be suitable for 
> distribution
> to Linux users who want to install GDAL just for use from Python, right?

Yes? but it will be not binary package, it requires compilation during 
install.

> Where does it install libgdal.1.1.so?  Are there likely to be problems if a

It just copied in /usr/lib

> slightly different version of libgdal.1.1.so is installed elsewhere?  How

Probably. I can redo with statical linkong to _gdal...so.

> would I go about making a binary distribution that installed itself
> normally for stuff like binaries and shared data but also installed Python
> support properly on the platform?
> 
> While I don't think I quite get how setup.py would be properly used, it is
> committed to CVS and we can work at this for future releases.
> 
> Best regards,
> 

Evgeny


From candrsn at mindspring.com  Mon Feb 10 20:39:51 2003
From: candrsn at mindspring.com (Carl Anderson)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] OLE Db Postgis
Message-ID: <20030211013951.GD24859@vadose>

Frank Wamerdam  
I dug up a license for VC98 to compile a PostgreSQL client and GDAL.
Your recent changes to CVS for gdal allow a working PostGIS to run. 
(Great)

I tested using

set PGHOST=pggis.my.net
set PGUSER=myuser
set PGPASS=mypass
   ogrinfo -ro -sql "select * from daccess where geo_oid < 100" 
PG:dbname=roads

   sfcdump.exe -provider Softmap.SF.Shape -ds PG:dbname=roads -table 
daccess

so both the direct PostgreSQL conenction and the OLE Dd pass through 
work.

things not working:

   I had a table with an invalid datatype id,  it was crashing ogrinfo.
      Error trapping needs to be improved

   Neither access form above allows the environment vars to be embedded

   The -cmd "sql" part of OLE Db is broken

---
I am willing to put some time into this

what I want to do is add/change things so that I can run
  ogrinfo -ro -sql "select * from bob.daccess where geo_oid < 100"
    
PG:dbname=roads;host=pggis.my.net;user=myuser;password=mypass;port=myport

that would be allowing
   schema names, sql stmts, and extra options
     (ok the example sql stmt already works but I want to fix it for 
OLE Db)

I also would like to
    move the table ident routines to use a view pg_tables (created if 
necessary in older PostgreSQLs), so that schema(catalog) support can 
work.  Data
scoping rules are handled by the psuedo table pg_tables in 7.3.

Before I take this on I would like to confirm with the PostGIS list the 
direction re schemas, PostGIS will take.
   
C.

-- 
----------------------------------
Carl Anderson
candrsn@mindspring.com

New Hampshire tells us "common sense for all"
     where can I get mine?
----------------------------------

From anandm at ittc.ku.edu  Tue Feb 11 17:44:44 2003
From: anandm at ittc.ku.edu (Anand Madhavan)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] How to add a utility to GDal ?
In-Reply-To: <20030211224201.30528.41282.Mailman@yoda.imagelinks.com>
Message-ID: <000301c2d21f$2c9d4a40$be7fed81@ittc.ku.edu>

Hi GDal Users,

   I am using GDAl to translate images between formats. I would like to add
my own utility to GDal in addition to the already present ones, which would
use the APIs of GDAL. Is there a documentation as to how I should modify the
MakeFile, etc ... so that my utility compiles along with the GDal libraries
? Any help regarding this is highly appreciated.

Thank you

Anand Madhavan
anandm@ittc.ku.edu


From slepnev_v at newmail.ru  Tue Feb 11 17:52:28 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] minor error in envidataset.cpp
Message-ID: <000001c2d220$4307db50$2f4560c3@sst>

Hi!

There seems to be an error in the file gdal\frmts\raw\envidataset.cpp on
line 409, in function int ENVIDataset::ProcessMapinfo( const char
*pszMapinfo ).

What is there:
        oSRS.SetUTM( atoi(papszFields[7]),
                     EQUAL(papszFields[8],"South") );

What should be:
        oSRS.SetUTM( atoi(papszFields[7]),
                     !EQUAL(papszFields[8],"South") );

Am I wrong?

Vladimir Slepnev
Programmer, RDC ScanEx


From azure at iki.fi  Wed Feb 12 11:08:26 2003
From: azure at iki.fi (Hannu Koivisto)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
Message-ID: <87wuk5qy6d.fsf@lynx.ionific.com>

Greetings,

I'm having some difficulties in seeing how to best use GDAL in my
application.  It may be that I'm proceeding exactly as I should,
but I can't help thinking that my data model requirements overlap
GDAL's data model / API slightly and I can't see whether I should
maybe extend GDAL or simply use a smaller subset of its
functionality.  Also, if you have suggestions on higher level
libraries layered on top of GDAL that might be suitable for me, I
am all ears.

I'm working on a navigation application primarily for touring
enduro motorcycling uses; basic moving map with GPS, waypoints,
routes, etc. along the lines of OziExplorer plus some special
features.  Map display is the hardest part (and also the only part
relevant to GDAL use) since I need to handle very large maps and
the software needs to work in handheld computers in addition to
normal desktop ones.  In my primary use case I have a single map
splitted to thousands of 800x800 (or so) PNG files.  PNG because it
seems to compress well in this case and splitted because arbitrary
regions in PNGs cannot be accessed efficiently.  I have separate
overviews, some of which are splitted as well due to their large
sizes.

My initial idea was to simply use GDAL to load each splitted file
(that is currently needed for display and that is not already in
memory) to memory and immediately close the datasets so that GDAL
does not cache anything that I already do.  And manage overviews
and cache data on my own.  However, I guess I could alternatively
create a GDAL driver for such "virtual" maps that are stored to
multiple files and then rely on GDAL's caching and overview
capabilities.  One immediate demerit of this approach is that it is
probably more complicated and the whole map display part, not to
speak about map loading and caching, is something I'd prefer to
offload to an existing library since the non-generic stuff for
which I believe I have something "new" to contribute to is in the
other features.

What would you suggest?

Another thing, the documentation of GDALDataset::GetProjectionRef
refers to GDALProjDef ("The returned string defines the projection
coordinate system of the image in either PROJ.4 format or OpenGIS
WKT format. It should be suitable for use with the GDALProjDef
object to reproject positions").  I couldn't find documentation
about or the implementation of GDALProjDef anywhere.  Am I correct
that it is obsoleted by the OGR library?

-- 
Hannu

From warmerdam at pobox.com  Thu Feb 13 09:57:35 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] minor error in envidataset.cpp
In-Reply-To: <000001c2d220$4307db50$2f4560c3@sst>
References: <000001c2d220$4307db50$2f4560c3@sst>
Message-ID: <3E4BB25F.3090105@pobox.com>

Vladimir Slepnev wrote:
> Hi!
> 
> There seems to be an error in the file gdal\frmts\raw\envidataset.cpp on
> line 409, in function int ENVIDataset::ProcessMapinfo( const char
> *pszMapinfo ).
> 
> What is there:
>         oSRS.SetUTM( atoi(papszFields[7]),
>                      EQUAL(papszFields[8],"South") );
> 
> What should be:
>         oSRS.SetUTM( atoi(papszFields[7]),
>                      !EQUAL(papszFields[8],"South") );
> 
> Am I wrong?

Vladimir,

You are right.  I have committed the fix.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Feb 13 10:00:06 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] How to add a utility to GDal ?
In-Reply-To: <000301c2d21f$2c9d4a40$be7fed81@ittc.ku.edu>
References: <000301c2d21f$2c9d4a40$be7fed81@ittc.ku.edu>
Message-ID: <3E4BB2F6.2020906@pobox.com>

Anand Madhavan wrote:
> Hi GDal Users,
> 
>    I am using GDAl to translate images between formats. I would like to add
> my own utility to GDal in addition to the already present ones, which would
> use the APIs of GDAL. Is there a documentation as to how I should modify the
> MakeFile, etc ... so that my utility compiles along with the GDal libraries
> ? Any help regarding this is highly appreciated.

Anand,

Normally when implementing your own applications or utilities it would
be done outside the GDAL source tree, and then linked against the GDAL
library.   This avoids problems when upgrading to new versions of GDAL.
However, if you want to do it within the GDAL source tree just put your new
application code in gdal/apps, and modify the makefile.vc, or GNUmakefile
in that directly accordingly.  Just copy the rules for one of the existing
programs like gdal_translate.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From schut at sarvision.com  Thu Feb 13 10:26:22 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] gdal_translate to select multiple bands?
Message-ID: <200302131626.22507.schut@sarvision.com>

Hi all,

Am I right when I assume that gdal_translate cannot be used to extract a 
selection of more then 1 band from an image? E.g. I have a 4 band tiff and I 
want only bands 2,3,4, I cannot type 'gdal_translate -b 2,3,4 ...... ?

Regards,
Vincent Schut.
-- 
______________________________________
Vincent Schut (schut@sarvision.com)
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From warmerdam at pobox.com  Thu Feb 13 11:26:00 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <87wuk5qy6d.fsf@lynx.ionific.com>
References: <87wuk5qy6d.fsf@lynx.ionific.com>
Message-ID: <3E4BC718.3020509@pobox.com>

Hannu Koivisto wrote:
> Greetings,
> 
> I'm having some difficulties in seeing how to best use GDAL in my
> application.  It may be that I'm proceeding exactly as I should,
> but I can't help thinking that my data model requirements overlap
> GDAL's data model / API slightly and I can't see whether I should
> maybe extend GDAL or simply use a smaller subset of its
> functionality.  Also, if you have suggestions on higher level
> libraries layered on top of GDAL that might be suitable for me, I
> am all ears.
> 
> I'm working on a navigation application primarily for touring
> enduro motorcycling uses; basic moving map with GPS, waypoints,
> routes, etc. along the lines of OziExplorer plus some special
> features.  Map display is the hardest part (and also the only part
> relevant to GDAL use) since I need to handle very large maps and
> the software needs to work in handheld computers in addition to
> normal desktop ones.  In my primary use case I have a single map
> splitted to thousands of 800x800 (or so) PNG files.  PNG because it
> seems to compress well in this case and splitted because arbitrary
> regions in PNGs cannot be accessed efficiently.  I have separate
> overviews, some of which are splitted as well due to their large
> sizes.
> 
> My initial idea was to simply use GDAL to load each splitted file
> (that is currently needed for display and that is not already in
> memory) to memory and immediately close the datasets so that GDAL
> does not cache anything that I already do.  And manage overviews
> and cache data on my own.  However, I guess I could alternatively
> create a GDAL driver for such "virtual" maps that are stored to
> multiple files and then rely on GDAL's caching and overview
> capabilities.  One immediate demerit of this approach is that it is
> probably more complicated and the whole map display part, not to
> speak about map loading and caching, is something I'd prefer to
> offload to an existing library since the non-generic stuff for
> which I believe I have something "new" to contribute to is in the
> other features.
> 
> What would you suggest?

Hannu,

I would actually suggest handling the image as one large TIFF file
with tiling, pre-built overviews and deflate/zip compression.  Then you
could use the existing TIFF driver for the whole mosaic, but with similar 
performance characteristics.   This assumes the result is not larger
than 4GB.

A second approach would be to use your PNG files, but to prepare
a ".vrt" file describing how they should all be used as one large
virtual dataset.  However, I think there would be some performance
issues with using a .vrt file with *alot* of files listed.  Also, the
.vrt format is rather insensitive to the ideal block size of the
underlying images, and maintains a secondary level of caching which
does not really add much value.

A third option is to implement a custom multi-file driver that can be
used with any regularly tiled set of GDAL supported files such as your
PNGs.  Doing this well would be a bit of work, perhaps a day or two.

> Another thing, the documentation of GDALDataset::GetProjectionRef
> refers to GDALProjDef ("The returned string defines the projection
> coordinate system of the image in either PROJ.4 format or OpenGIS
> WKT format. It should be suitable for use with the GDALProjDef
> object to reproject positions").  I couldn't find documentation
> about or the implementation of GDALProjDef anywhere.  Am I correct
> that it is obsoleted by the OGR library?

You are correct that it is obsoleted by the OGR library - in particular
use of the OGRSpatialReference and OGRCoordinateTransformation classes.
I have updated the documentation accordingly.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Feb 13 11:28:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] GDAL HTML Management
Message-ID: <3E4BC79F.1030607@pobox.com>

Folks,

I don't imagine many people will need to know this, but I have modified
how the html documentation for GDAL is now managed.  Instead of keeping all
the generated html in CVS, and depending on the CVS commit "action" to update
the master web site, I have changed the gdal/html directory in CVS to only
contain the non-generated files (just a few), and the rest will be generated
and updated on the web site nightly by a cron job.  Users can build local
updates of the documentation using "make docs".  I expect that source
releases will contain full html documentation generated as part of the
release process.

So, anyone wanting to update documentation, please do not commit the
Doxygen generated files in gdal/html anymore.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Feb 14 10:55:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] gdal_translate to select multiple bands?
References: <200302131626.22507.schut@sarvision.com>
Message-ID: <3E4D1176.3020504@pobox.com>

Vincent Schut wrote:
> Hi all,
> 
> Am I right when I assume that gdal_translate cannot be used to extract a 
> selection of more then 1 band from an image? E.g. I have a 4 band tiff and I 
> want only bands 2,3,4, I cannot type 'gdal_translate -b 2,3,4 ...... ?

Vincent,

You are correct.  What you want can be accomplished (with some hassle) by
converting to VRT format, editing the .vrt file to remove the first band
and renumber the remainder to 1,2,3 and then converting that .vrt file to
your desired output format.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From schut at sarvision.com  Thu Feb 13 12:08:33 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] gdal_translate to select multiple bands?
In-Reply-To: <3E4D1176.3020504@pobox.com>
References: <200302131626.22507.schut@sarvision.com> <3E4D1176.3020504@pobox.com>
Message-ID: <200302131808.33721.schut@sarvision.com>

Thanks for the confirmation.
easier to write a small program myself, then...
Did it already, actually :-) Not very generic, of course, but does exactly 
what I want, avoiding the hassle. Wonderfull thing, that gdal... :P

On Friday 14 February 2003 16:55, Frank Warmerdam wrote:
> Vincent Schut wrote:
> > Hi all,
> >
> > Am I right when I assume that gdal_translate cannot be used to extract a
> > selection of more then 1 band from an image? E.g. I have a 4 band tiff
> > and I want only bands 2,3,4, I cannot type 'gdal_translate -b 2,3,4
> > ...... ?
>
> Vincent,
>
> You are correct.  What you want can be accomplished (with some hassle) by
> converting to VRT format, editing the .vrt file to remove the first band
> and renumber the remainder to 1,2,3 and then converting that .vrt file to
> your desired output format.
>
> Best regards,

-- 
______________________________________
Vincent Schut (schut@sarvision.com)
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From warmerdam at pobox.com  Thu Feb 13 14:20:56 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] GIO (Arc/Info Binary Grid) Writer now fixed
Message-ID: <3E4BF018.5070502@pobox.com>

Folks,

The GIO driver which uses the avgridio.dll supplied with ArcView to read and
write Arc/Info binary grid coverages has been fixed so that when you write
out a grid it will not appear corrupt to ArcView, but it will have the
georeferencing (corner coordinates).

Anyone interested in this driver is encouraged to test with the new version
in CVS.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Fri Feb 14 04:39:32 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Re: 16-bit PNM support
In-Reply-To: <5.2.0.9.0.20030213195433.009fc0e0@pop.preferred.com>
References: <5.2.0.9.0.20030204154047.009eeec0@pop.preferred.com> <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com> <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com> <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com> <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com> <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com> <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com> <5.2.0.9.0.20030204154047.009eeec0@pop.preferred.com> <5.2.0.9.0.20030206164034.009eda40@pop.preferred.com> <5.2.0.9.0.20030213195433.009fc0e0@pop.preferred.com>
Message-ID: <20030214093932.GB3925@ak4719.spb.edu>

Hi, Jim,

On Thu, Feb 13, 2003 at 08:06:08PM -0500, Jim Julian wrote:
>    Thanks for your response. The output option approach to preserving
> MAXVAL seems the way to go. The "No_Data" option idea is left over
> from a DEM issue. Generally, I convert DEM to images. The NetPBM
> formats are a good solution for that. Unfortunately, the 'No_Data' value
> for most DEM is -9999. This makes the binary representaion signed.
>    Moreover, it also becomes the bottom of the scale and represents a
> similar problem in terms of image scaling.
>    Frank suggested using VRT to make the conversion. He also suggested
> the possibility of using Python. I looked over the documents I have and
> can find no detailed in formation on VRT files their options and uses.
> As a matter of fact, I can find no documentation for input file formats
> and option switches.
>     What do you think? VRT or Python?

I think that automation utility is always better then manual work.
Following small Python script will replace inNoData values (-9999.0 in
our case) from the input dataset by the outNoData (0.0) values.

I think implementation is clear enougth, but you will need
python-numeric package.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
-------------- next part --------------
#!/usr/bin/env python

import gdal
from gdalconst import *
import Numeric
import sys

inNoData = -9999.
outNoData = 0.

# checking command line
if len(sys.argv) < 2:
    print 'Usage:'
    print '%s <infile> <outfile>' % sys.argv[0]
    sys.exit(0)

infile = sys.argv[1]
outfile = sys.argv[2]

indataset = gdal.Open( infile, GA_ReadOnly )

out_driver = gdal.GetDriverByName('PNM')
outdataset = out_driver.Create(outfile, indataset.RasterXSize, indataset.RasterYSize, indataset.RasterCount, GDT_UInt16)

for iBand in range(1, indataset.RasterCount + 1):
    inband = indataset.GetRasterBand(iBand)
    outband = outdataset.GetRasterBand(iBand)

    for i in range(inband.YSize - 1, -1, -1):
	scanline = inband.ReadAsArray(0, i, inband.XSize, 1, inband.XSize, 1)
	for j in range(inband.XSize):
	    if scanline[0, j] == inNoData:
		scanline[0, j] = outNoData
	outband.WriteArray(scanline, 0, i)

print 'OK'


From azure at iki.fi  Fri Feb 14 07:39:56 2003
From: azure at iki.fi (Hannu Koivisto)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <3E4BC718.3020509@pobox.com> (Frank Warmerdam's message of
 "Thu, 13 Feb 2003 11:26:00 -0500")
References: <87wuk5qy6d.fsf@lynx.ionific.com> <3E4BC718.3020509@pobox.com>
Message-ID: <87d6lvox2b.fsf@lynx.ionific.com>

Frank Warmerdam <warmerdam@pobox.com> writes:

> I would actually suggest handling the image as one large TIFF file
> with tiling, pre-built overviews and deflate/zip compression.  Then you

Ah, I didn't realize to consider TIFF at all, I probably dismissed
it unconsciously because programs that I have used have not
supported compression and thus produced humongous files or
something like that.

I tested[1] TIFF with deflate compression on one PNG and the result
was even a bit smaller than the source!  This sounds like a good
choice indeed, except that...

> could use the existing TIFF driver for the whole mosaic, but with
> similar performance characteristics.  This assumes the result is
> not larger than 4GB.

Does this limitation of TIFF apply to the size of data in
uncompressed form or in compressed form?  The PNGs I have take
under 150MB and even the uncompressed size of the data is under
3GB, I recall, _but_ the area that the images cover is not
rectangular.  So if I combine the PNGs into one TIFF, there will be
empty areas and that entire area in uncompressed form is over 4GB.
I assume that compression can handle those areas so that they are
not a problem considering disk space consumption but if the
limitation applies to uncompressed data, this obviously is of
little comfort.

Also, I wonder what would be the best way to make that large TIFF
file.  All I can think of is to use netpbm to concatenate all the
files into one really huge (it would be three times that 4GB+) ppm
file, then convert that to 8bpp PNG (I noticed that gdal_translate
didn't figure out that a ppm converted from 8bpp PNG had <256
colours, so it seems I need to go through some 8bpp format) and
then use gdal_translate.  This sounds like it could work but
probably isn't exactly the most space and time efficient way :)

Oh, and those overviews.  How should I add them to that TIFF file?
I note that gdaladdo utility can be used to generate overviews from
the same data but I already have them.  Then again, perhaps it does
not make sense to add overviews generated from other data to the
same file to begin with?  The covered area is not the same even
though GDAL (maybe also the GeoTIFF format) wants it to be, if I
interpret the GDAL documentation correctly, but I guess this can be
fixed.  I also note that the example overview levels in gdaladdo
documentation are integers but, on the other hand, I couldn't see
that GDAL API would restrict them that way, so perhaps there is no
need to prescale them as well.

> A second approach would be to use your PNG files, but to prepare
> a ".vrt" file describing how they should all be used as one large
> virtual dataset.  However, I think there would be some performance
> issues with using a .vrt file with *alot* of files listed.  Also, the
> .vrt format is rather insensitive to the ideal block size of the
> underlying images, and maintains a secondary level of caching which
> does not really add much value.

Right...  I also couldn't find any information about this ".vrt"
format (I grepped GDAL documentation and sources plus tried
Google).

> A third option is to implement a custom multi-file driver that can be
> used with any regularly tiled set of GDAL supported files such as your
> PNGs.  Doing this well would be a bit of work, perhaps a day or two.

Ok.  Well, let's hope that the TIFF approach can be used.

>> Another thing, the documentation of GDALDataset::GetProjectionRef
>> refers to GDALProjDef ("The returned string defines the projection
...
> You are correct that it is obsoleted by the OGR library - in particular
> use of the OGRSpatialReference and OGRCoordinateTransformation classes.
> I have updated the documentation accordingly.

Ack, I'll learn more about those classes, then.

[1] When I converted one of my PNGs to GeoTIFF format with

gdal_translate -of GTiff -co "TILED=YES" -co "COMPRESSION=DEFLATE" foo.png foo.tif

I got this message right before gdal_translate finished:

Error 1: foo.tif: Can't open a compressed TIFF file with compression for update.

I wonder why it says that?  I was able to open the resulting TIFF
with Gimp so I guess the conversion succeeded at least to some
extent despite that error.

Thanks for your very helpful response,
-- 
Hannu

From warmerdam at pobox.com  Fri Feb 14 09:18:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <87d6lvox2b.fsf@lynx.ionific.com>
References: <87wuk5qy6d.fsf@lynx.ionific.com> <3E4BC718.3020509@pobox.com> <87d6lvox2b.fsf@lynx.ionific.com>
Message-ID: <3E4CFA99.90305@pobox.com>

Hannu Koivisto wrote:
> Does this limitation of TIFF apply to the size of data in
> uncompressed form or in compressed form?  

Hannu,

The limitation is on the compressed form, so you should be
fine.


> Also, I wonder what would be the best way to make that large TIFF
> file.  All I can think of is to use netpbm to concatenate all the
> files into one really huge (it would be three times that 4GB+) ppm
> file, then convert that to 8bpp PNG (I noticed that gdal_translate
> didn't figure out that a ppm converted from 8bpp PNG had <256
> colours, so it seems I need to go through some 8bpp format) and
> then use gdal_translate.  This sounds like it could work but
> probably isn't exactly the most space and time efficient way :)

I would suggest using the gdal_merge.py script.  This will build
a mosaic from a set of georeferenced input files.  You would need
to have .wld (ESRI world files) for each of your PNG chunks for it
to place them properly in the result.

Because of the way that gdal_merge.py updates the output file, it
is likely impossible to have the output file be a compressed TIFF
file.  You will likely need to assemble the files into an uncompressed
file (perhaps of some format like Erdas Imagine - driver=HFA) and
then convert that to a compressed GeoTIFF file using gdal_translate
as a separate step.

This approach has the same "large intermediate mosaic" problem as the
method that you suggest, but might be easier.

> Oh, and those overviews.  How should I add them to that TIFF file?
> I note that gdaladdo utility can be used to generate overviews from
> the same data but I already have them.  Then again, perhaps it does
> not make sense to add overviews generated from other data to the
> same file to begin with?  The covered area is not the same even
> though GDAL (maybe also the GeoTIFF format) wants it to be, if I
> interpret the GDAL documentation correctly, but I guess this can be
> fixed.  I also note that the example overview levels in gdaladdo
> documentation are integers but, on the other hand, I couldn't see
> that GDAL API would restrict them that way, so perhaps there is no
> need to prescale them as well.

My suggestion would be to let gdaladdo generate the overviews itself
unless you have some specific algorithm for generating the overviews
that you feel strongly about.

You are correct that it is not really necesary for the overviews to
be at integral resolutions.

>>A second approach would be to use your PNG files, but to prepare
>>a ".vrt" file describing how they should all be used as one large
>>virtual dataset.  However, I think there would be some performance
>>issues with using a .vrt file with *alot* of files listed.  Also, the
>>.vrt format is rather insensitive to the ideal block size of the
>>underlying images, and maintains a secondary level of caching which
>>does not really add much value.
> 
> 
> Right...  I also couldn't find any information about this ".vrt"
> format (I grepped GDAL documentation and sources plus tried
> Google).

There is some info in the archive, but I have yet to write user
documentation on the driver and the format.

>>You are correct that it is obsoleted by the OGR library - in particular
>>use of the OGRSpatialReference and OGRCoordinateTransformation classes.
>>I have updated the documentation accordingly.
> 
> 
> Ack, I'll learn more about those classes, then.
> 
> [1] When I converted one of my PNGs to GeoTIFF format with
> 
> gdal_translate -of GTiff -co "TILED=YES" -co "COMPRESSION=DEFLATE" foo.png foo.tif
> 
> I got this message right before gdal_translate finished:
> 
> Error 1: foo.tif: Can't open a compressed TIFF file with compression for update.
> 
> I wonder why it says that?  I was able to open the resulting TIFF
> with Gimp so I guess the conversion succeeded at least to some
> extent despite that error.

The file would still have been created properly.  I have also fixed the
problem where GDAL (and libtiff) was unable to open a compressed GeoTIFF file
in update mode as it prevented obviously necessary things like adding
overviews to a compressed file.

However, this fix is quite recent (the last couple of weeks), so you will
need a GDAL "nightly snapshot" or to build it from CVS.  Also, the fix
requires changes in libtiff so if you aren't using the internal libtiff you
will need to update your libtiff from CVS.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From julian at preferred.com  Fri Feb 14 13:16:23 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Re: 16-bit PNM support
In-Reply-To: <20030214093932.GB3925@ak4719.spb.edu>
References: <5.2.0.9.0.20030213195433.009fc0e0@pop.preferred.com>
 <5.2.0.9.0.20030204154047.009eeec0@pop.preferred.com>
 <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com>
 <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com>
 <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com>
 <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com>
 <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com>
 <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com>
 <5.2.0.9.0.20030204154047.009eeec0@pop.preferred.com>
 <5.2.0.9.0.20030206164034.009eda40@pop.preferred.com>
 <5.2.0.9.0.20030213195433.009fc0e0@pop.preferred.com>
Message-ID: <5.2.0.9.0.20030214131312.009f8300@pop.preferred.com>

Hi Andrey,

    In finishing this, do you think the script should be added to the
Pymod directory in CVS? I think a lot of people would have a use for
this option.


                                                               Jim Julian


From warmerdam at pobox.com  Fri Feb 14 13:32:55 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Re: Another GeoTif question
In-Reply-To: <1045245843.3e4d2f9370d9b@webmail.asu.edu>
References: <1042815698.3e281ad2ea64f@webmail.asu.edu> <3E281E0D.4070902@pobox.com> <1044556621.3e42ab4d86e79@webmail.asu.edu> <3E42BBD1.5030409@pobox.com> <1044561572.3e42bea462100@webmail.asu.edu> <3E42C1A9.1050500@pobox.com> <1045245843.3e4d2f9370d9b@webmail.asu.edu>
Message-ID: <3E4D3657.30606@pobox.com>

Stephen H. Savage wrote:
> Hi Frank,
> 
>    I've got a couple more questions for you about the geotifcp and gdalwarp 
> programs.  The first one requires a bit of explanation.
> 
> 1)  Part of the header information from a geo tiff file projected in WGS 84 UTM 
> zone 36N reads as follows:
> 
> ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_36N
> PCSCitationGeoKey (Ascii,24): "UTM International WGS84"
> 
> pcs.csv in GDAL\data has  32636	WGS 84 / UTM zone 36N, which comes from EPSG.
> 
> MapObjects has:	moProjCS_WGS1984UTM_36N	32636	WGS 1984 UTM Zone 36N
> 
>    Each of these formats is just a bit different.  My question involves trying 
> to understand just how sensitive the .tiff files are to specific syntax in the 
> header.  I would like to be able to extract the information from the MapObjects 
> data, because it is easily bound to a combo box control using a strings 
> collection in VB, thus eliminating the need to find the records in the excel 
> spreadsheets.  Can I use the MapObjects string directly to build the .lgo file, 
> or do I have to somehow duplicate exactly what the geotiff header has in it for 
> any projection?  What would be really nice would be to be able to plug the 
> numeric code for the projection into the .lgo file, rather than have to format 
> the whole set of entries.  Is there a way to do that?

Stephen,

The strings associated with the ProjectedCSTypeGeoKey must match the internal
list in geotifcp exactly in order for them to work when reading a metadata
file.  The PCSCitationGeoKey contents are never interpreted by geotifcp, and
are freeform text.  In short, you are not going to be able to trivally use
the mapobjects text to generate the geotiff, file, but the "32636" is the
actual numerical value that gets assigned to the ProjectedCSTypeGeoKey
field in the GeoTIFF file.  If you need to operate through a geotiff metadata
file then you can lookup the number to get the corresponding symbol using
the epsg_pcs.inc file distributed in libgeotiff.

>    My second question has to do with the gdalwarp program.  I can easily 
> extract the EPSG numeric values for the projection I want to shift to, and send 
> it with the EPSG:32636 format.  Does gdalwarp perform datum transformations 
> automatically, or do I have to do that explicitly somehow?  (For example, 
> reprojecting an image in UTM NAD 27, zone 12 to utm NAD 83 zone 12?).  Does the 
> program handle a two step transformation, for example, from the Palestine Belt 
> to WGS 84 UTM zone 36N - where I have to go from the Pal Belt to WGS 84 decimal 
> degrees first, then to the UTM projection?

gdalwarp will apply datum shifts in situations where it can figure out which
one is appropriate.  Note that NAD27 and NAD83 do not apply outside the Americas
to the best of my knowledge.  If a coordinate system is determined to be NAD27
gdalwarp will attempt to use the conus or ntv1_can.dat files to do the
NAD27/NAD83 shift.  Other areas (like Alaska, Hawaii) will be difficult.

It will also support "two step transformations".  You can give two distinct
PCSes and internally it will go through various steps, including an intermediate
WGS84 decimal degrees step.

Note that there are many situations in which gdalwarp cannot figure out the
appropriate datum shift to use.  Generally speaking there are just a few cases.

1) NAD27 - uses the grid shift files to convert to NAD83.
2) NAD83 - treated as identical to WGS84.
3) WGS84 - the reference datum.
4) TOWGS84[3parms] - systems with a TOWGS84[] clause can be automatically
            converted to WGS84.
5) TOWGS84[7parms] - systems with a TOWGS84[] clause can be automatically
            converted to WGS84.

The code that creates a coordinate system from an EPSG code will *not* produce
a TOWGS84[] clause if there are more than one possible approximation available.
Thus, things that seem like they should be transformable will often not be
because the system doesn't know what approximation to use.

>    I've got my little program reading MrSid or .tif files, and getting the 
> headers.  Then I can crop either of these two formats and save to .tif.  It 
> will currently write revised geotiff headers based on UTM zones, but not 
> anything else.  I want to support a wider range of projected and geographic 
> coordinate systems, and use the gdalwarp program to reproject them from the 
> system read from their current header to whatever I select from a drop down 
> list.  After that, I plan to implement the gdal_merge.py routine.  
> 
>    If I can get it all to work, I'll probably bundle it with an expanded 
> version of my ReprojectME! program, which currently reprojects ArcView 
> shapefiles, ArcInfo coverages, ascii coordinate lists and individual points 
> between about 24 projections used in the Middle East.  The program can be 
> downloaded free from my web page, by pressing the "ReprojectME! Program" 
> picture on the opening screen and following the links from there.  It would be 
> really spiffy to have a little utility that will handle vector, raster and 
> ascii data.  Something to keep me busy for a bit...

Very cool!

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Fri Feb 14 16:53:02 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Re: 16-bit PNM support
In-Reply-To: <5.2.0.9.0.20030214131312.009f8300@pop.preferred.com>
References: <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com> <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com> <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com> <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com> <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com> <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com> <5.2.0.9.0.20030204154047.009eeec0@pop.preferred.com> <5.2.0.9.0.20030206164034.009eda40@pop.preferred.com> <5.2.0.9.0.20030213195433.009fc0e0@pop.preferred.com> <5.2.0.9.0.20030214131312.009f8300@pop.preferred.com>
Message-ID: <20030214215302.GB3993@ak4719.spb.edu>

On Fri, Feb 14, 2003 at 01:16:23PM -0500, Jim Julian wrote:
>    In finishing this, do you think the script should be added to the
> Pymod directory in CVS? I think a lot of people would have a use for
> this option.

I'm not sure that gdal/pymod/ is a good place for such ten of lines
scripts. Maybe we should create a repository for Python samples. Frank?

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Sat Feb 15 16:27:00 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] Re: 16-bit PNM support
References: <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com> <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com> <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com> <5.2.0.9.0.20030203125417.009f0110@pop.preferred.com> <5.2.0.9.0.20030203200259.009edec0@pop.preferred.com> <5.2.0.9.0.20030204095446.009ef040@pop.preferred.com> <5.2.0.9.0.20030204154047.009eeec0@pop.preferred.com> <5.2.0.9.0.20030206164034.009eda40@pop.preferred.com> <5.2.0.9.0.20030213195433.009fc0e0@pop.preferred.com> <5.2.0.9.0.20030214131312.009f8300@pop.preferred.com> <20030214215302.GB3993@ak4719.spb.edu>
Message-ID: <3E4EB0A4.7040608@pobox.com>

Andrey Kiselev wrote:
> On Fri, Feb 14, 2003 at 01:16:23PM -0500, Jim Julian wrote:
> 
>>   In finishing this, do you think the script should be added to the
>>Pymod directory in CVS? I think a lot of people would have a use for
>>this option.
> 
> 
> I'm not sure that gdal/pymod/ is a good place for such ten of lines
> scripts. Maybe we should create a repository for Python samples. Frank?

Andrey,

I would suggest you create a samples subdirectory of the gdal/pymod
directory, and put it/them there.  Please add a README as well briefly
describing each sample script in the directory.

By putting them in a subdirectory we don't have to worry about them being
installed.

I will try to put a bunch of my sample scripts there as well.  Any samples
from others are welcome.  Email them directly to me to be added ... please
include a brief description of each.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From julian at preferred.com  Sun Feb 16 00:01:01 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] questions - revisited
In-Reply-To: <20030130090238.GA6426@ak4719.spb.edu>
References: <5.2.0.9.0.20030129175456.009ec970@pop.preferred.com>
 <5.2.0.9.0.20030129175456.009ec970@pop.preferred.com>
Message-ID: <5.2.0.9.0.20030215234331.009f2e20@pop.preferred.com>

Hi Andrey,

    During a compile of the Feb 15 snapshot, I decided to open up
some options in the 'nmake.opt' file. This has resulted in a solution and
a problem.
Solution: I never did get the wildcard expansion option to work,
and during this compile had an idea. I looked into VC98's vcvars32.bat
file to see how the install directory for VC98 is referred to. Microsoft
seems to use the MS-DOS 8.3 filename convention with command line use
of nmake.exe. Taking my cue from that, I inserted the DOS equivalent
(D:\MICROS~1\VC98) and was successful in compiling with wildcard
expansion.
Question: The first few lines in nmake.opt refer to Python directory variables
for post-compile installation of DLL, EXE, and PY files. form the PYMOD
subdirectory. While Python 22 for Windows doesn't use the Unix style
directory structure, I created one called 'D:\GDAL2\' with the specified
bin, include, lib, and pymod subdirectories.
    Nothing was installed but I did find '_gdal.dll' and presume that DLL 
and all
the python scripts were to have been installed. Am I correct in assuming
I can manually move these to the Python installation? Is the reference
to EXEs obsolete? I found no reference to an executable in the makefile
in the Pymod directory, but then I'm not up on my make/C++ language skills.

                                                                 Thanks,
                                                                Jim Julian

______________________________________________________________
At 12:02 PM 1/30/03 +0300, you wrote:
>Hi, Jim,
>
> >........When I compile with an nmake.opt altered for wildcard expansion,
> > I get a fatal error, "Do not know how to make 'D:\Microsoft' ".
> > The directory is "D:\Microsoft Visual Studio", are the spaces
> > in the name giving me problems? If so, can I replace them with
> > double backslashes (\\)?
>
>I think you should place the path with spaces in double quotes.



From kamal_jo at yahoo.com  Sun Feb 16 03:28:58 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP, error
In-Reply-To: <20030203185645.GA28572@ak4719.spb.edu>
Message-ID: <20030216082858.25550.qmail@web41114.mail.yahoo.com>

when using gdal_translate with the following
parameters:

gdal_translate -of BMP -ot Byte -scale <infile.tif>
<outfile.bmp>

The bmp file is generated but I get the following
error

ERROR 6: Dataset does not support the SetProjection()
method

why do I get this error, any more explanation about it
and how to get rid of it?

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From kamal_jo at yahoo.com  Sun Feb 16 04:32:38 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030205190852.GC5680@ak4719.spb.edu>
Message-ID: <20030216093238.21339.qmail@web41104.mail.yahoo.com>

I am trying to re build the gdal_translate
application, but I face problems of linking. Can u
tell me please what are the files of the OpenEV sdk or
anyother files that I need to be able to generate a
working EXE version of the gdal_translate, and are
there any addtional comments u can support me with
about this matter?

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From dron at ak4719.spb.edu  Sun Feb 16 04:50:14 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216093238.21339.qmail@web41104.mail.yahoo.com>
References: <20030205190852.GC5680@ak4719.spb.edu> <20030216093238.21339.qmail@web41104.mail.yahoo.com>
Message-ID: <20030216095014.GA12388@ak4719.spb.edu>

On Sun, Feb 16, 2003 at 01:32:38AM -0800, Ayman Kamal wrote:
> I am trying to re build the gdal_translate
> application, but I face problems of linking. Can u
> tell me please what are the files of the OpenEV sdk or
> anyother files that I need to be able to generate a
> working EXE version of the gdal_translate, and are
> there any addtional comments u can support me with
> about this matter?

You should take GDAL sources in order to rebuild gdal_translate and
other supplied applications. But this operation requires understanding
purpose of the files in GDAL building environment.

1. Take latest sources here: ftp://ftp.remotesensing.org/gdal/daily/

2. Read nmake.opt file and fill it with values suitable for your system.

3. Run `nmake /f makefile.vc' command.

4. If you will get a building errors, report them to Bugzilla :-)

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sun Feb 16 05:01:58 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP, error
In-Reply-To: <20030216082858.25550.qmail@web41114.mail.yahoo.com>
References: <20030203185645.GA28572@ak4719.spb.edu> <20030216082858.25550.qmail@web41114.mail.yahoo.com>
Message-ID: <20030216100158.GB12388@ak4719.spb.edu>

On Sun, Feb 16, 2003 at 12:28:58AM -0800, Ayman Kamal wrote:
> gdal_translate -of BMP -ot Byte -scale <infile.tif>
> <outfile.bmp>
> 
> The bmp file is generated but I get the following
> error
> 
> ERROR 6: Dataset does not support the SetProjection()
> method
> 
> why do I get this error, any more explanation about it
> and how to get rid of it?

This error raises because BMP format does not support storing
projection information. Not all formats has equal capabilities
for storing georeferensig. You may ignore this error (I think,
you don't need projection info if you are choose BMP as an output
format). Otherwise, if you want preserve this data, you need other
format. GeoTIFF is the most powerful, flexible and portable on present
moment, I'm suggest use GeoTIFF for all operations. Note, that if you
say

gdal_translate -of GTiff -ot Byte -scale <infile.tif> <outfile.tif>

you will get a scaled GeoTIFF file, which should be supported by many
image viewers.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From kamal_jo at yahoo.com  Sun Feb 16 05:21:03 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:46 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216095014.GA12388@ak4719.spb.edu>
Message-ID: <20030216102103.84981.qmail@web41109.mail.yahoo.com>

Thanks for your help, but here is my situation:

I am using Microsoft Visual Studio, and I want to be
able to create and build a project ( application )
that does the same as what gdal_translate. Simply I
want to know what do I need to accomplish this task
whether regarding needed files or other settings. I
want my application to be a stand alone application
along with the files needed with it.

--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Sun, Feb 16, 2003 at 01:32:38AM -0800, Ayman
> Kamal wrote:
> > I am trying to re build the gdal_translate
> > application, but I face problems of linking. Can u
> > tell me please what are the files of the OpenEV
> sdk or
> > anyother files that I need to be able to generate
> a
> > working EXE version of the gdal_translate, and are
> > there any addtional comments u can support me with
> > about this matter?
> 
> You should take GDAL sources in order to rebuild
> gdal_translate and
> other supplied applications. But this operation
> requires understanding
> purpose of the files in GDAL building environment.
> 
> 1. Take latest sources here:
> ftp://ftp.remotesensing.org/gdal/daily/
> 
> 2. Read nmake.opt file and fill it with values
> suitable for your system.
> 
> 3. Run `nmake /f makefile.vc' command.
> 
> 4. If you will get a building errors, report them to
> Bugzilla :-)
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From kamal_jo at yahoo.com  Sun Feb 16 05:38:16 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216095014.GA12388@ak4719.spb.edu>
Message-ID: <20030216103816.13597.qmail@web41106.mail.yahoo.com>

To be more specific and not waste your time, I want to
build a Win32 console application that opens a certain
geotiff file and saves it as a bmp file that can be
viewed in Microsoft Paint for example, what do I need
specifcally to accomplish this?

--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Sun, Feb 16, 2003 at 01:32:38AM -0800, Ayman
> Kamal wrote:
> > I am trying to re build the gdal_translate
> > application, but I face problems of linking. Can u
> > tell me please what are the files of the OpenEV
> sdk or
> > anyother files that I need to be able to generate
> a
> > working EXE version of the gdal_translate, and are
> > there any addtional comments u can support me with
> > about this matter?
> 
> You should take GDAL sources in order to rebuild
> gdal_translate and
> other supplied applications. But this operation
> requires understanding
> purpose of the files in GDAL building environment.
> 
> 1. Take latest sources here:
> ftp://ftp.remotesensing.org/gdal/daily/
> 
> 2. Read nmake.opt file and fill it with values
> suitable for your system.
> 
> 3. Run `nmake /f makefile.vc' command.
> 
> 4. If you will get a building errors, report them to
> Bugzilla :-)
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From dron at ak4719.spb.edu  Sun Feb 16 05:39:47 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216102103.84981.qmail@web41109.mail.yahoo.com>
References: <20030216095014.GA12388@ak4719.spb.edu> <20030216102103.84981.qmail@web41109.mail.yahoo.com>
Message-ID: <20030216103947.GA17609@ak4719.spb.edu>

On Sun, Feb 16, 2003 at 02:21:03AM -0800, Ayman Kamal wrote:
> Thanks for your help, but here is my situation:
> 
> I am using Microsoft Visual Studio, and I want to be
> able to create and build a project ( application )
> that does the same as what gdal_translate. Simply I

...and this application will be based on GDAL?

> want to know what do I need to accomplish this task
> whether regarding needed files or other settings. I
> want my application to be a stand alone application
> along with the files needed with it.

Anyway, take the sources and build the library. Then you should point
to compiler where the header files and compiled binary placed. You can
look at the OpenEV sources for the sample, how to use GDAL in external
project. Use makefile.vc from the OpenEV as a template.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sun Feb 16 06:07:53 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216103816.13597.qmail@web41106.mail.yahoo.com>
References: <20030216095014.GA12388@ak4719.spb.edu> <20030216103816.13597.qmail@web41106.mail.yahoo.com>
Message-ID: <20030216110753.GA20631@ak4719.spb.edu>

On Sun, Feb 16, 2003 at 02:38:16AM -0800, Ayman Kamal wrote:
> To be more specific and not waste your time, I want to
> build a Win32 console application that opens a certain
> geotiff file and saves it as a bmp file that can be
> viewed in Microsoft Paint for example, what do I need
> specifcally to accomplish this?

The simplest way: add your source at the apps/ subdirectory in the GDAL
tree and accordingly modify makefile.vc file. Your utility will be
builded along other GDAL tools.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From kamal_jo at yahoo.com  Sun Feb 16 06:17:32 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216103947.GA17609@ak4719.spb.edu>
Message-ID: <20030216111732.31701.qmail@web41104.mail.yahoo.com>

I sent u a message explainig what do I specifically
need :
{
building a stand alone application that can open a
GeoTiff file and convert it to a BMP file, that's all.
}

I don't know if I need to use GDAL library or OpenEV,
can u tell me what do u I need specifically to do
this, and where can I find the source of OpenEV ( the
application ) so that I can see what is going on.

Thanks


--- Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Sun, Feb 16, 2003 at 02:21:03AM -0800, Ayman
> Kamal wrote:
> > Thanks for your help, but here is my situation:
> > 
> > I am using Microsoft Visual Studio, and I want to
> be
> > able to create and build a project ( application )
> > that does the same as what gdal_translate. Simply
> I
> 
> ...and this application will be based on GDAL?
> 
> > want to know what do I need to accomplish this
> task
> > whether regarding needed files or other settings.
> I
> > want my application to be a stand alone
> application
> > along with the files needed with it.
> 
> Anyway, take the sources and build the library. Then
> you should point
> to compiler where the header files and compiled
> binary placed. You can
> look at the OpenEV sources for the sample, how to
> use GDAL in external
> project. Use makefile.vc from the OpenEV as a
> template.
> 
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From kamal_jo at yahoo.com  Sun Feb 16 08:04:08 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216110753.GA20631@ak4719.spb.edu>
Message-ID: <20030216130408.36005.qmail@web41115.mail.yahoo.com>

what I need is a list of the 
.h files
.lib files
.dll files

that I need to include in my project to be able to
write a simple Win32 console application that can
convert a GeoTiff file format into BMP file forma.

That's all

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From ed at topozone.com  Sun Feb 16 08:57:38 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
Message-ID: <13858AA1A74F30419F319ACB66A9D1221F3D68@mercator.topozone.com>

Ayman -

As Andrey said, this is easy to do once you have a GDAL build set up.  I
have found Frank's Windows makefiles very nicely arrange and easier than
most Open Source tools to build under Windows.

Have you downloaded the GDAL distribution?  If not, do so.  Then build
it.  When you get to the point where you can build, say, gdal_translate
in the apps directory, you're ready to go.  The GDAL download and build
instructions are all available on the GDAL site at
http://www.remotesensing.org/gdal

Once you're at that point, we can get going!

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
Sent: Sunday, February 16, 2003 8:04 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdal_translate

what I need is a list of the 
.h files
.lib files
.dll files

that I need to include in my project to be able to
write a simple Win32 console application that can
convert a GeoTiff file format into BMP file forma.

That's all

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From kamal_jo at yahoo.com  Sun Feb 16 10:28:19 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <13858AA1A74F30419F319ACB66A9D1221F3D68@mercator.topozone.com>
Message-ID: <20030216152819.92113.qmail@web41108.mail.yahoo.com>

Sir,
what I ask for is only the following:

I want to be able to build and execute gdal_translate
as a standalone project. I am using Microsoft Visual
Studio 6.0 IDE. What header files do I have to put in
the application directory and what library files do I
need to put in my workspace, and what DLLs do I have
to put in the same path of the EXE file so that the
application can survive alone.

--- Ed McNierney <ed@topozone.com> wrote:
> Ayman -
> 
> As Andrey said, this is easy to do once you have a
> GDAL build set up.  I
> have found Frank's Windows makefiles very nicely
> arrange and easier than
> most Open Source tools to build under Windows.
> 
> Have you downloaded the GDAL distribution?  If not,
> do so.  Then build
> it.  When you get to the point where you can build,
> say, gdal_translate
> in the apps directory, you're ready to go.  The GDAL
> download and build
> instructions are all available on the GDAL site at
> http://www.remotesensing.org/gdal
> 
> Once you're at that point, we can get going!
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> Phone: (978) 251-4242  Fax: (978) 251-1396
> ed@topozone.com
> 
> 
> -----Original Message-----
> From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
> Sent: Sunday, February 16, 2003 8:04 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] gdal_translate
> 
> what I need is a list of the 
> .h files
> .lib files
> .dll files
> 
> that I need to include in my project to be able to
> write a simple Win32 console application that can
> convert a GeoTiff file format into BMP file forma.
> 
> That's all
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Shopping - Send Flowers for Valentine's Day
> http://shopping.yahoo.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From ed at topozone.com  Sun Feb 16 10:34:41 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
Message-ID: <13858AA1A74F30419F319ACB66A9D1220195ED@mercator.topozone.com>

Ayman -

If you followed my suggestions you would find the answer to those
questions.

If you need to create a Microsoft Visual Studio project, you will need
to do that yourself as it's not part of the GDAL distribution.

If you read the makefile.vc file in the apps directory, where
gdal_translate lives, you'll find exactly the header files and libraries
it uses.  You'll also need to look at the nmake.opt options file in the
root GDAL directory; the answer to your question depends (slightly) on
whether you intend to use GDAL as a DLL or statically linked.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
Sent: Sunday, February 16, 2003 10:28 AM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] gdal_translate

Sir,
what I ask for is only the following:

I want to be able to build and execute gdal_translate
as a standalone project. I am using Microsoft Visual
Studio 6.0 IDE. What header files do I have to put in
the application directory and what library files do I
need to put in my workspace, and what DLLs do I have
to put in the same path of the EXE file so that the
application can survive alone.

--- Ed McNierney <ed@topozone.com> wrote:
> Ayman -
> 
> As Andrey said, this is easy to do once you have a
> GDAL build set up.  I
> have found Frank's Windows makefiles very nicely
> arrange and easier than
> most Open Source tools to build under Windows.
> 
> Have you downloaded the GDAL distribution?  If not,
> do so.  Then build
> it.  When you get to the point where you can build,
> say, gdal_translate
> in the apps directory, you're ready to go.  The GDAL
> download and build
> instructions are all available on the GDAL site at
> http://www.remotesensing.org/gdal
> 
> Once you're at that point, we can get going!
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> Phone: (978) 251-4242  Fax: (978) 251-1396
> ed@topozone.com
> 
> 
> -----Original Message-----
> From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
> Sent: Sunday, February 16, 2003 8:04 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] gdal_translate
> 
> what I need is a list of the 
> .h files
> .lib files
> .dll files
> 
> that I need to include in my project to be able to
> write a simple Win32 console application that can
> convert a GeoTiff file format into BMP file forma.
> 
> That's all
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Shopping - Send Flowers for Valentine's Day
> http://shopping.yahoo.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From kamal_jo at yahoo.com  Sun Feb 16 10:48:45 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <13858AA1A74F30419F319ACB66A9D1220195ED@mercator.topozone.com>
Message-ID: <20030216154845.95203.qmail@web41108.mail.yahoo.com>

I want to use it as a statically linked library.
Can you give me more explanation building apon this
fact?

--- Ed McNierney <ed@topozone.com> wrote:
> Ayman -
> 
> If you followed my suggestions you would find the
> answer to those
> questions.
> 
> If you need to create a Microsoft Visual Studio
> project, you will need
> to do that yourself as it's not part of the GDAL
> distribution.
> 
> If you read the makefile.vc file in the apps
> directory, where
> gdal_translate lives, you'll find exactly the header
> files and libraries
> it uses.  You'll also need to look at the nmake.opt
> options file in the
> root GDAL directory; the answer to your question
> depends (slightly) on
> whether you intend to use GDAL as a DLL or
> statically linked.
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> Phone: (978) 251-4242  Fax: (978) 251-1396
> ed@topozone.com
> 
> 
> -----Original Message-----
> From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
> Sent: Sunday, February 16, 2003 10:28 AM
> To: gdal-dev@remotesensing.org
> Subject: RE: [Gdal-dev] gdal_translate
> 
> Sir,
> what I ask for is only the following:
> 
> I want to be able to build and execute
> gdal_translate
> as a standalone project. I am using Microsoft Visual
> Studio 6.0 IDE. What header files do I have to put
> in
> the application directory and what library files do
> I
> need to put in my workspace, and what DLLs do I have
> to put in the same path of the EXE file so that the
> application can survive alone.
> 
> --- Ed McNierney <ed@topozone.com> wrote:
> > Ayman -
> > 
> > As Andrey said, this is easy to do once you have a
> > GDAL build set up.  I
> > have found Frank's Windows makefiles very nicely
> > arrange and easier than
> > most Open Source tools to build under Windows.
> > 
> > Have you downloaded the GDAL distribution?  If
> not,
> > do so.  Then build
> > it.  When you get to the point where you can
> build,
> > say, gdal_translate
> > in the apps directory, you're ready to go.  The
> GDAL
> > download and build
> > instructions are all available on the GDAL site at
> > http://www.remotesensing.org/gdal
> > 
> > Once you're at that point, we can get going!
> > 
> > 	- Ed
> > 
> > Ed McNierney
> > President and Chief Mapmaker
> > TopoZone.com / Maps a la carte, Inc.
> > 73 Princeton Street, Suite 305
> > North Chelmsford, MA  01863
> > Phone: (978) 251-4242  Fax: (978) 251-1396
> > ed@topozone.com
> > 
> > 
> > -----Original Message-----
> > From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
> > Sent: Sunday, February 16, 2003 8:04 AM
> > To: gdal-dev@remotesensing.org
> > Subject: Re: [Gdal-dev] gdal_translate
> > 
> > what I need is a list of the 
> > .h files
> > .lib files
> > .dll files
> > 
> > that I need to include in my project to be able to
> > write a simple Win32 console application that can
> > convert a GeoTiff file format into BMP file forma.
> > 
> > That's all
> > 
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Shopping - Send Flowers for Valentine's Day
> > http://shopping.yahoo.com
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Shopping - Send Flowers for Valentine's Day
> http://shopping.yahoo.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From packalen at cs.joensuu.fi  Sun Feb 16 11:18:10 2003
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GeoTiff projection/transformation problem
Message-ID: <Pine.GSO.4.50.0302161810190.28175-100000@cs>

Hi Everyone,

Below is a piece of code where: (1) a new driver is created, (2) a new
dataset is created based on driver just created, (3) projection and
transformation data are copied to output dataset, and (4) finally input
and output datasets are closed. This works without any problems when
working with IMAGINE files, but when new GTiff dataset is created neither
projection nor affine transformation info is written to the output file
(projection and transformation info are saved properly to output dataset).
The input GeoTiff file is not created by GDAL, but works properly when
processed with libgeotiff. GDAL version is 1.1.8.

I wonder if there is some fundamental problem in my code? Any hints how to
progress?

Example code (not whole program):

// double adfGeoTransform[6];
// GDALDataset  *pInputDS, *pOutputDS;
// char **ppCreateOptions = NULL;
// GDALDriver *pOutDR = NULL;
// GDALDataType inDT;
// const char *pOutProj = NULL;

// Create new driver by short name
pOutDR = DM.GetDriverByName( "GTiff" );

// Create new dataset
pOutputDS = pOutDR->Create( "out.tif", inX, inY, 1, inDT, ppCreateOptions );

// Copy projection info to output dataset
pOutProj = pInputDS->GetProjectionRef();
if ( pOutProj != NULL && strlen( pOutProj ) > 0 )
                pOutputDS->SetProjection( pOutProj );

// Copy affine transformation info to output dataset
if ( pInputDS->GetGeoTransform(adfGeoTransform) == CE_None )
                 pOutputDS->SetGeoTransform( adfGeoTransform );

// Delete datasets
pInputDS->~GDALDataset();
pOutputDS->~GDALDataset();

Best wishes,
Petteri



From ed at topozone.com  Sun Feb 16 12:16:42 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
Message-ID: <13858AA1A74F30419F319ACB66A9D1221F3D6C@mercator.topozone.com>

Have you read apps/makefile.vc and nmake.opt?

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
Sent: Sunday, February 16, 2003 10:49 AM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] gdal_translate

I want to use it as a statically linked library.
Can you give me more explanation building apon this
fact?

--- Ed McNierney <ed@topozone.com> wrote:
> Ayman -
> 
> If you followed my suggestions you would find the
> answer to those
> questions.
> 
> If you need to create a Microsoft Visual Studio
> project, you will need
> to do that yourself as it's not part of the GDAL
> distribution.
> 
> If you read the makefile.vc file in the apps
> directory, where
> gdal_translate lives, you'll find exactly the header
> files and libraries
> it uses.  You'll also need to look at the nmake.opt
> options file in the
> root GDAL directory; the answer to your question
> depends (slightly) on
> whether you intend to use GDAL as a DLL or
> statically linked.
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> Phone: (978) 251-4242  Fax: (978) 251-1396
> ed@topozone.com
> 
> 
> -----Original Message-----
> From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
> Sent: Sunday, February 16, 2003 10:28 AM
> To: gdal-dev@remotesensing.org
> Subject: RE: [Gdal-dev] gdal_translate
> 
> Sir,
> what I ask for is only the following:
> 
> I want to be able to build and execute
> gdal_translate
> as a standalone project. I am using Microsoft Visual
> Studio 6.0 IDE. What header files do I have to put
> in
> the application directory and what library files do
> I
> need to put in my workspace, and what DLLs do I have
> to put in the same path of the EXE file so that the
> application can survive alone.
> 
> --- Ed McNierney <ed@topozone.com> wrote:
> > Ayman -
> > 
> > As Andrey said, this is easy to do once you have a
> > GDAL build set up.  I
> > have found Frank's Windows makefiles very nicely
> > arrange and easier than
> > most Open Source tools to build under Windows.
> > 
> > Have you downloaded the GDAL distribution?  If
> not,
> > do so.  Then build
> > it.  When you get to the point where you can
> build,
> > say, gdal_translate
> > in the apps directory, you're ready to go.  The
> GDAL
> > download and build
> > instructions are all available on the GDAL site at
> > http://www.remotesensing.org/gdal
> > 
> > Once you're at that point, we can get going!
> > 
> > 	- Ed
> > 
> > Ed McNierney
> > President and Chief Mapmaker
> > TopoZone.com / Maps a la carte, Inc.
> > 73 Princeton Street, Suite 305
> > North Chelmsford, MA  01863
> > Phone: (978) 251-4242  Fax: (978) 251-1396
> > ed@topozone.com
> > 
> > 
> > -----Original Message-----
> > From: Ayman Kamal [mailto:kamal_jo@yahoo.com] 
> > Sent: Sunday, February 16, 2003 8:04 AM
> > To: gdal-dev@remotesensing.org
> > Subject: Re: [Gdal-dev] gdal_translate
> > 
> > what I need is a list of the 
> > .h files
> > .lib files
> > .dll files
> > 
> > that I need to include in my project to be able to
> > write a simple Win32 console application that can
> > convert a GeoTiff file format into BMP file forma.
> > 
> > That's all
> > 
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Shopping - Send Flowers for Valentine's Day
> > http://shopping.yahoo.com
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Shopping - Send Flowers for Valentine's Day
> http://shopping.yahoo.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Sun Feb 16 13:43:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GeoTiff projection/transformation problem
In-Reply-To: <Pine.GSO.4.50.0302161810190.28175-100000@cs>
References: <Pine.GSO.4.50.0302161810190.28175-100000@cs>
Message-ID: <3E4FDBC3.8090603@pobox.com>

Petteri Packalen wrote:
> Hi Everyone,
> 
> Below is a piece of code where: (1) a new driver is created, (2) a new
> dataset is created based on driver just created, (3) projection and
> transformation data are copied to output dataset, and (4) finally input
> and output datasets are closed. This works without any problems when
> working with IMAGINE files, but when new GTiff dataset is created neither
> projection nor affine transformation info is written to the output file
> (projection and transformation info are saved properly to output dataset).
> The input GeoTiff file is not created by GDAL, but works properly when
> processed with libgeotiff. GDAL version is 1.1.8.
> 
> I wonder if there is some fundamental problem in my code? Any hints how to
> progress?

Petteri,

This is a bug in GDAL 1.1.8 with the Create() method.  The CreateCopy() (used
by gdal_translate) works OK.  This is fixed in the nightly CVS snapshots.  I
would suggest building from that.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Sun Feb 16 14:04:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030216154845.95203.qmail@web41108.mail.yahoo.com>
References: <20030216154845.95203.qmail@web41108.mail.yahoo.com>
Message-ID: <3E4FE0A3.401@pobox.com>

Ayman Kamal wrote:
> I want to use it as a statically linked library.
> Can you give me more explanation building apon this
> fact?

Ayman,

Since the 1.1.8 release I have added a "devinstall" target to the makefile.vc.
This will copy all include files and the gdal_i.lib stub library to a target
location specified in nmake.opt.

However, if you want to link against static libraries instead of the stub
library for use of the DLL things are substantially more complicated.  I
think you would need the following directories in your include path:

  $(GDAL_HOME)\port
  $(GDAL_HOME)\core
  $(GDAL_HOME)\ogr

You will need to link against the following library files:
  $(GDAL_HOME)\gdal.lib
  $(GDAL_HOME)\port\cpl.lib
  $(GDAL_HOME)\ogr\ogr.lib

If you are building a Visual Studio project you will also need to ensure
that you use compatible compile options for the GDAL static libraries and
your project.  It is likely best to modify the OPTFLAGS macro in the nmake.opt
file to match your visual studio project and rebuild GDAL.

I would stess though, that using the DLL is the preferred mechanism for using
GDAL.  It is easier to build.

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From shadow at dementia.org  Sun Feb 16 14:08:37 2003
From: shadow at dementia.org (Derrick J Brashear)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <3E4BC718.3020509@pobox.com>
Message-ID: <Pine.LNX.3.96L.1030216134130.21660F-100000@scully.trafford.dementia.org>

On Thu, 13 Feb 2003, Frank Warmerdam wrote:

> I would actually suggest handling the image as one large TIFF file
> with tiling, pre-built overviews and deflate/zip compression.  Then you
> could use the existing TIFF driver for the whole mosaic, but with similar 
> performance characteristics.   This assumes the result is not larger
> than 4GB.

It hadn't actually occurred to me to try this before. I do have one
question, and one unrelated question:

1) Is there a way I'm overlooking to decollar collared maps (in GeoTIFF
form) or is it expected that an external program would be used for this? I
understand that the georeferencing is insufficient to know where the image
corners are, but I have other data which can be used for this.

2) Is there a simple viewer wrapped around GDAL I can point someone at
who wants to support GDAL in an existing viewer program? (Is what's in the
"viewer" subdirectory the best option for this?)



From warmerdam at pobox.com  Sun Feb 16 14:20:29 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <Pine.LNX.3.96L.1030216134130.21660F-100000@scully.trafford.dementia.org>
References: <Pine.LNX.3.96L.1030216134130.21660F-100000@scully.trafford.dementia.org>
Message-ID: <3E4FE47D.6090803@pobox.com>

Derrick J Brashear wrote:
> 1) Is there a way I'm overlooking to decollar collared maps (in GeoTIFF
> form) or is it expected that an external program would be used for this? I
> understand that the georeferencing is insufficient to know where the image
> corners are, but I have other data which can be used for this.

Derrick,

There is no convenient mechanism for decollaring stuff like DRG files.  If you
could define a polygon, then I suppose the OpenEV Python bindings for
rasterizing polygons could be used to mask out everything outside the polygon.

> 2) Is there a simple viewer wrapped around GDAL I can point someone at
> who wants to support GDAL in an existing viewer program? (Is what's in the
> "viewer" subdirectory the best option for this?)

The "viewer" directory contents are radically out of date, and unsupported.
At one time I was working on a Qt based viewer, but then OpenEV replaced that
as the reference GDAL based viewer.  Of course OpenEV is by no means a simple
example viewer for people to look at for incorporating GDAL into other apps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ed at topozone.com  Sun Feb 16 14:20:50 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
Message-ID: <13858AA1A74F30419F319ACB66A9D1221F3D73@mercator.topozone.com>

Derrick -

1) No, you'll need to do that externally.  If you can give me some info
about what kind of images you're working with, I'll try to make
suggestions.

2) I never noticed the "viewer" subdirectory before <g>.  It's there in
CVS but not in the distribution - the code looks pretty old.  There are
lots of viewers out there - what kind of data are you trying to view?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: Derrick J Brashear [mailto:shadow@dementia.org] 
Sent: Sunday, February 16, 2003 2:09 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] GDAL data model, caching, GDALProjDef

On Thu, 13 Feb 2003, Frank Warmerdam wrote:

> I would actually suggest handling the image as one large TIFF file
> with tiling, pre-built overviews and deflate/zip compression.  Then
you
> could use the existing TIFF driver for the whole mosaic, but with
similar 
> performance characteristics.   This assumes the result is not larger
> than 4GB.

It hadn't actually occurred to me to try this before. I do have one
question, and one unrelated question:

1) Is there a way I'm overlooking to decollar collared maps (in GeoTIFF
form) or is it expected that an external program would be used for this?
I
understand that the georeferencing is insufficient to know where the
image
corners are, but I have other data which can be used for this.

2) Is there a simple viewer wrapped around GDAL I can point someone at
who wants to support GDAL in an existing viewer program? (Is what's in
the
"viewer" subdirectory the best option for this?)


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From shadow at dementia.org  Sun Feb 16 14:30:22 2003
From: shadow at dementia.org (Derrick J Brashear)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <13858AA1A74F30419F319ACB66A9D1221F3D73@mercator.topozone.com>
Message-ID: <Pine.LNX.3.96L.1030216142711.21660I-100000@scully.trafford.dementia.org>

On Sun, 16 Feb 2003, Ed McNierney wrote:

> Derrick -
> 
> 1) No, you'll need to do that externally.  If you can give me some info
> about what kind of images you're working with, I'll try to make
> suggestions.

Everything I want to decollar are USGS quads. I'm willing to forgo
decollaring the 1:250k images to avoid the problem with the images that
fall at the center of the UTM zone if I have to, and just deal with 1:24k
and 1:100k images. 

> 2) I never noticed the "viewer" subdirectory before <g>.  It's there in
> CVS but not in the distribution - the code looks pretty old.  There are
> lots of viewers out there - what kind of data are you trying to view?

It's not that I'm trying to view data, it's that I wanted to point someone
who has a raster viewer now at a simple GDAL (presumably raster) viewer to
illustrate that it's not a big deal to integrate GDAL support. Basically
taking a section of image through the GDAL api and blatting it to a
displayed canvas. 


From ed at topozone.com  Sun Feb 16 14:53:32 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
Message-ID: <13858AA1A74F30419F319ACB66A9D1220195EE@mercator.topozone.com>

Derrick -

I have some relevant experience, having collar-clipped over 60,000 USGS
quads <g>.  There are a few commercial tools out there that will do it
for you.  We used to use the GeoTransform DLL from Blue Marble
Geographics (www.bluemarblegeo.com) built into our own application, but
it appears that product is no longer available.  They do offer a
GeoTransformer application that will do the collar-clipping.  Peak
Geo-Systems offers the QuadCompanion Pro package that seems to do the
same sort of thing at the application level (www.colorview-peak.com).
Both are, I think, Windows-only apps.

Clipping the collars is trickier than it might appear.  I'm not sure
what you mean by "the problem with images that fall at the center of the
UTM zone" is, but the Blue Marble tools have a long-reported and unfixed
bug with those quads (they clip to the bounding rectangle formed by the
projected four corners of the ROI, which clips off the middle of
southern edge of the DRG).  You also need to remember that the datum of
the latitude / longitude bounding box for the DRG may NOT be the same as
the datum of the DRG itself.  The USGS, TVA, and Teale metadata that
describes the bounding box is also often quite buggy, so you need to
check your results carefully.

If you don't care about the tools, but simply want to produce some
collar-clipped USGS DRGs, I've got plenty.  Contact me off-list and I'll
see if we can help.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed@topozone.com


-----Original Message-----
From: Derrick J Brashear [mailto:shadow@dementia.org] 
Sent: Sunday, February 16, 2003 2:30 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] GDAL data model, caching, GDALProjDef

On Sun, 16 Feb 2003, Ed McNierney wrote:

> Derrick -
> 
> 1) No, you'll need to do that externally.  If you can give me some
info
> about what kind of images you're working with, I'll try to make
> suggestions.

Everything I want to decollar are USGS quads. I'm willing to forgo
decollaring the 1:250k images to avoid the problem with the images that
fall at the center of the UTM zone if I have to, and just deal with
1:24k
and 1:100k images. 

> 2) I never noticed the "viewer" subdirectory before <g>.  It's there
in
> CVS but not in the distribution - the code looks pretty old.  There
are
> lots of viewers out there - what kind of data are you trying to view?

It's not that I'm trying to view data, it's that I wanted to point
someone
who has a raster viewer now at a simple GDAL (presumably raster) viewer
to
illustrate that it's not a big deal to integrate GDAL support. Basically
taking a section of image through the GDAL api and blatting it to a
displayed canvas. 

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From shadow at dementia.org  Sun Feb 16 15:07:27 2003
From: shadow at dementia.org (Derrick J Brashear)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <13858AA1A74F30419F319ACB66A9D1220195EE@mercator.topozone.com>
Message-ID: <Pine.LNX.3.96L.1030216145645.5680A-100000@scully.trafford.dementia.org>

On Sun, 16 Feb 2003, Ed McNierney wrote:

> Derrick -
> 
> I have some relevant experience, having collar-clipped over 60,000 USGS
> quads <g>.  There are a few commercial tools out there that will do it

[]

> Both are, I think, Windows-only apps.

Hmm. Being both commercial and non-Linux make them "right out". This is
basically a hobby venture, no hope or intent of ever generating money.

> Clipping the collars is trickier than it might appear.  I'm not sure
> what you mean by "the problem with images that fall at the center of the
> UTM zone" is, but the Blue Marble tools have a long-reported and unfixed
> bug with those quads (they clip to the bounding rectangle formed by the
> projected four corners of the ROI, which clips off the middle of
> southern edge of the DRG).  You also need to remember that the datum of

That's in fact the sort of problem I meant.

> the latitude / longitude bounding box for the DRG may NOT be the same as
> the datum of the DRG itself.  The USGS, TVA, and Teale metadata that
> describes the bounding box is also often quite buggy, so you need to
> check your results carefully.

Sure, but again, it's a "hobby-use" project, so close enough will suffice.
For that matter, if I wanted to abstract code, Xastir (which builds on
most unix systems, can display geotiffs, but isn't gdal-aware yet either)
does on-the-fly clipping of collars down to the map neatline based on the
metadata, in fact yielding a "close enough" except for the fact that it
does this for display and not to write the maps back out.

> If you don't care about the tools, but simply want to produce some
> collar-clipped USGS DRGs, I've got plenty.  Contact me off-list and I'll
> see if we can help.

Pennsylvania distributes collar-clipped 1:24k (at least) DRGs, and I have
a set of those to play with. Once I get beyond this area into Ohio or West
Virginia I need to generate some myself, so this is really all about my
hope for a tool. 



From rogerjames99 at btinternet.com  Sun Feb 16 15:29:36 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] convert GTIFF(NED) to BMP, error
In-Reply-To: <20030216100158.GB12388@ak4719.spb.edu>
Message-ID: <001301c2d5fa$23d2e800$300aa8c0@internal.beardandsandals.co.uk>

>gdal_translate -of GTiff -ot Byte -scale <infile.tif> <outfile.tif>

>you will get a scaled GeoTIFF file, which should be supported by many
>image viewers.

>-- 
>Andrey V. Kiselev

And of course this includes standard bmp viewers such as "paint" etc.
that know nothing about projections.

Roger


From kamal_jo at yahoo.com  Mon Feb 17 03:22:17 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <3E4FE0A3.401@pobox.com>
Message-ID: <20030217082217.68897.qmail@web41105.mail.yahoo.com>

Ok Sir,
I read nmake.opt and apps\makefile.vc
I didn't change makevile.vc
I changed nmake.opt to be as follows, and then used
Windows Command Prompt to invoke make file from within
the apps directory:

nmake /f makefile.vc

After that I got the following error:

NMAKE : fatal error U1073: don't know how to make
'../gdal.lib'
Stop.

Here is the namke.opt file listing
//--------------------------------------------------
//nmake.opt
//--------------------------------------------------
# Location to install .exe, .dll and python stuff

BINDIR = E:\Work\BIN
PY_INST_DIR = E:\Work\BIN\pymod
LIBDIR = E:\Work\BIN\lib
INCDIR = E:\Work\BIN\include

# Set this to the installed directory containing
python.  If you don't
# have python just let it point to a directory that
does not exist (as now). 
PYDIR   =	E:\Work\Software\Python22

# Uncomment the first for an optimized build or the
second for a debug build.
#OPTFLAGS=	/nologo /Ox 
OPTFLAGS=	/nologo /Zi /Fd$(GDAL_ROOT)\gdal.pdb

# Version number embedded in DLL name. 
VERSION =	11

# Uncomment the following to link OGR utilities
against main GDAL DLL
# instead of statically linking against OGR libraries.
DLLBUILD=1

# Enable all OGR formats, or only raster formats? 
Comment out to disable
# vector formats. 
#INCLUDE_OGR_FRMTS = YES

# Location of Visual C++ directory (only required for
following SETARGV stuff)
VCDIR   = 	D:\Program Files\Microsoft Visual
Studio\VC98

# Enable the following if VCDIR set properly, and you
want the utility
# programs to be able to expand wildcards. 
#SETARGV =	$(VCDIR)\lib\setargv.obj

# Comment out the following to disable JPEG support.
#JPEG_SUPPORTED = 1

# Uncomment the following and update to enable ECW
support.
#ECWDIR  = 	D:\Software\ECW_SDK
#ECWLIB  =       $(ECWDIR)\lib\NCSEcw.lib
$(ECWDIR)\lib\NCSEcwC.lib \
#		$(ECWDIR)\lib\NCSUtil.lib

# Uncomment the following and update to enable OGDI
support.
#OGDIDIR =	D:\warmerda\iii\devdir
#OGDIVER =	31
#OGDILIB =	$(OGDIDIR)\lib\$(TARGET)\ogdi$(OGDIVER).lib
\
#		$(OGDIDIR)\lib\$(TARGET)\zlib_ogdi$(OGDIVER).lib

# Uncomment for Xerces based GML support.
#XERCES_DIR =
d:\warmerda\iii\drivers\gml\xerces-c1_7_0-win32
#XERCES_INCLUDE = -I$(XERCES_DIR)/include
-I$(XERCES_DIR)/include/xercesc
#XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib

# Uncomment for JPEG2000 support
#JASPER_DIR = S:\projects_libs\jasper-1.500.4
#JASPER_INCLUDE =
-I$(JASPER_DIR)\src\libjasper\include\jasper
#JASPER_LIB =
$(JASPER_DIR)src\msvc\Win32_Release\libjasper.lib

# Uncommment if you have Frank's modified Kakadu
build.
#KAKDIR =	D:\warmerda\jp2\kakadu

# Uncomment the following and update to enable NCSA
HDF Release 4 support.
#HDF4_DIR =	D:\warmerda\HDF41r5
#HDF4_LIB =	/LIBPATH:$(HDF4_DIR)\lib

# Uncomment the following and update to enable FME
support.
#FME_DIR =	d:\Software\fme

!IFDEF ORACLE_HOME
OCI_LIB =	$(ORACLE_HOME)\oci\lib\msvc\ociw32.lib \
		$(ORACLE_HOME)\oci\lib\msvc\oci.lib
!ENDIF

########### END OF STUFF THAT NORMALLY NEEDS TO BE
UPDATED ##################


# Location of MS Data Access SDK (not really needed
anymore I think)
#MSDASDK =	D:\Software\MDAC_2.6

GDAL_DLL =	gdal$(VERSION).dll

INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr
-I$(GDAL_ROOT)\core

#LINKER_FLAGS =	/NODEFAULTLIB:LIBC 

CFLAGS	=	$(OPTFLAGS) $(INC) $(EXTRAFLAGS)
MAKE	=	nmake /nologo

CC	=	cl

CPLLIB	=    $(GDAL_ROOT)/port/cpl.lib
GDALLIB	=    $(GDAL_ROOT)/gdal.lib

.c.obj:	
	$(CC) $(CFLAGS) /c $*.c

.cpp.obj:	
	$(CC) $(CFLAGS) /c $*.cpp


//--------------------------------------------------

--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Ayman Kamal wrote:
> > I want to use it as a statically linked library.
> > Can you give me more explanation building apon
> this
> > fact?
> 
> Ayman,
> 
> Since the 1.1.8 release I have added a "devinstall"
> target to the makefile.vc.
> This will copy all include files and the gdal_i.lib
> stub library to a target
> location specified in nmake.opt.
> 
> However, if you want to link against static
> libraries instead of the stub
> library for use of the DLL things are substantially
> more complicated.  I
> think you would need the following directories in
> your include path:
> 
>   $(GDAL_HOME)\port
>   $(GDAL_HOME)\core
>   $(GDAL_HOME)\ogr
> 
> You will need to link against the following library
> files:
>   $(GDAL_HOME)\gdal.lib
>   $(GDAL_HOME)\port\cpl.lib
>   $(GDAL_HOME)\ogr\ogr.lib
> 
> If you are building a Visual Studio project you will
> also need to ensure
> that you use compatible compile options for the GDAL
> static libraries and
> your project.  It is likely best to modify the
> OPTFLAGS macro in the nmake.opt
> file to match your visual studio project and rebuild
> GDAL.
> 
> I would stess though, that using the DLL is the
> preferred mechanism for using
> GDAL.  It is easier to build.
> 
> Good luck,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From slepnev_v at newmail.ru  Sun Feb 16 18:17:57 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <000001c2d611$a511f200$324560c3@sst>

Hi!

Frank, your resume says you've worked on GDB technology (for PCI
Geomatics?), which supports a lot more formats than GDAL. What is its
status, is it commercial or what? Why does GDAL include GDBDataset? I wasn't
able to get it clear from the Web.

Thanks,

Vladimir Slepnev
Programmer, RDC ScanEx


From packalen at cs.joensuu.fi  Mon Feb 17 06:56:34 2003
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GeoTiff projection/transformation problem
Message-ID: <Pine.GSO.4.50.0302171354290.18605-100000@cs>

Dear Frank,

I built snapshot cvs-030217 and now GeoTransform info is written to the
output file properly. However, projection is not written to the output
file and during the execution of GDALAllRegister() arise an error 'ERROR
1: Can't find requested entry point: CellLayerClose'.

Petteri

>> Hi Everyone,
>>
>> Below is a piece of code where: (1) a new driver is created, (2) a new
>> dataset is created based on driver just created, (3) projection and
>> transformation data are copied to output dataset, and (4) finally input
>> and output datasets are closed. This works without any problems when
>> working with IMAGINE files, but when new GTiff dataset is created neither
>> projection nor affine transformation info is written to the output file
>> (projection and transformation info are saved properly to output dataset).
>> The input GeoTiff file is not created by GDAL, but works properly when
>> processed with libgeotiff. GDAL version is 1.1.8.
>>
>> I wonder if there is some fundamental problem in my code? Any hints how
>> to progress?

> Petteri,

> This is a bug in GDAL 1.1.8 with the Create() method.  The CreateCopy()
> (used by gdal_translate) works OK.  This is fixed in the nightly CVS
> snapshots. I would suggest building from that.


From kamal_jo at yahoo.com  Mon Feb 17 07:45:07 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <3E4FE0A3.401@pobox.com>
Message-ID: <20030217124507.88803.qmail@web41110.mail.yahoo.com>

OK 
I will go with ur choice and use GDLA as DLL,
can you tell me plz what are the names of the DLLs
that I have to reference in my application and what
are the header files to put in my application?

My application needs only to open a GeoTiff file and
save it as BMP.

--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Ayman Kamal wrote:
> > I want to use it as a statically linked library.
> > Can you give me more explanation building apon
> this
> > fact?
> 
> Ayman,
> 
> Since the 1.1.8 release I have added a "devinstall"
> target to the makefile.vc.
> This will copy all include files and the gdal_i.lib
> stub library to a target
> location specified in nmake.opt.
> 
> However, if you want to link against static
> libraries instead of the stub
> library for use of the DLL things are substantially
> more complicated.  I
> think you would need the following directories in
> your include path:
> 
>   $(GDAL_HOME)\port
>   $(GDAL_HOME)\core
>   $(GDAL_HOME)\ogr
> 
> You will need to link against the following library
> files:
>   $(GDAL_HOME)\gdal.lib
>   $(GDAL_HOME)\port\cpl.lib
>   $(GDAL_HOME)\ogr\ogr.lib
> 
> If you are building a Visual Studio project you will
> also need to ensure
> that you use compatible compile options for the GDAL
> static libraries and
> your project.  It is likely best to modify the
> OPTFLAGS macro in the nmake.opt
> file to match your visual studio project and rebuild
> GDAL.
> 
> I would stess though, that using the DLL is the
> preferred mechanism for using
> GDAL.  It is easier to build.
> 
> Good luck,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From warmerdam at pobox.com  Mon Feb 17 09:27:53 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <20030217124507.88803.qmail@web41110.mail.yahoo.com>
References: <20030217124507.88803.qmail@web41110.mail.yahoo.com>
Message-ID: <3E50F169.1000708@pobox.com>

Ayman Kamal wrote:
> OK 
> I will go with ur choice and use GDLA as DLL,
> can you tell me plz what are the names of the DLLs
> that I have to reference in my application and what
> are the header files to put in my application?
> 
> My application needs only to open a GeoTiff file and
> save it as BMP.

Ayman,

Same include paths as before.  Link against gdal_i.lib, the stub library
for gdal11.dll.  Then the only DLL you need (assuming a default build) is
the gdal11.dll.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From kamal_jo at yahoo.com  Mon Feb 17 09:45:18 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <3E50F169.1000708@pobox.com>
Message-ID: <20030217144518.54086.qmail@web41107.mail.yahoo.com>

Thank you very much for the explantion, but I still
have one missing file whic is 
gdal_i.lib
I can't find it among the files I donwloaded from
ftp://ftp.remotesensing.org/gdal/openev/ or
ftp://ftp.remotesensing.org/gdal/daily/

can you please send this lib to me?

p.s. Can you help more and tell me the names of the
header files?



--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Ayman Kamal wrote:
> > OK 
> > I will go with ur choice and use GDLA as DLL,
> > can you tell me plz what are the names of the DLLs
> > that I have to reference in my application and
> what
> > are the header files to put in my application?
> > 
> > My application needs only to open a GeoTiff file
> and
> > save it as BMP.
> 
> Ayman,
> 
> Same include paths as before.  Link against
> gdal_i.lib, the stub library
> for gdal11.dll.  Then the only DLL you need
> (assuming a default build) is
> the gdal11.dll.
> 
> Best regards,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From warmerdam at pobox.com  Mon Feb 17 09:46:17 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] (no subject)
In-Reply-To: <000001c2d611$a511f200$324560c3@sst>
References: <000001c2d611$a511f200$324560c3@sst>
Message-ID: <3E50F5B9.6050703@pobox.com>

Vladimir Slepnev wrote:
> Hi!
> 
> Frank, your resume says you've worked on GDB technology (for PCI
> Geomatics?), which supports a lot more formats than GDAL. What is its
> status, is it commercial or what? Why does GDAL include GDBDataset? I wasn't
> able to get it clear from the Web.

Vladimir,

GDB is commercial, though PCI doesn't normally sell it as a standalone SDK.
You can get their general purpose SDK which includes GDB but if you want to
redistribute an application depending on GDB you will need to make special
licensing arrangements.

At one time I was working on a GDB/GDAL bridge represented as the
GDBDataset, but it was not completed and is not being maintained.  I may
return to it at some point, but of course since GDB is not free software
it is of limited use to the GDAL community.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Feb 17 09:52:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GeoTiff projection/transformation problem
In-Reply-To: <Pine.GSO.4.50.0302171354290.18605-100000@cs>
References: <Pine.GSO.4.50.0302171354290.18605-100000@cs>
Message-ID: <3E50F742.1060102@pobox.com>

Petteri Packalen wrote:
> Dear Frank,
> 
> I built snapshot cvs-030217 and now GeoTransform info is written to the
> output file properly. However, projection is not written to the output
> file and during the execution of GDALAllRegister() arise an error 'ERROR
> 1: Can't find requested entry point: CellLayerClose'.

Petteri,

Do you have ArcView 3.x or ArcGIS 8 installed?  The GIO driver searches the
path for avgridio.dll or aigridio.dll and tries to load various entry points
from it, including CellLayerClose.  Is that really the only entry point that
was reported missing?   Funky.

On the projection not being written to the GeoTIFF file, could you mail me
(directly) the code segment you were using again?  This should not happen.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From julian at preferred.com  Mon Feb 17 12:18:21 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <Pine.LNX.3.96L.1030216134130.21660F-100000@scully.trafford
 .dementia.org>
References: <3E4BC718.3020509@pobox.com>
Message-ID: <5.2.0.9.0.20030217121045.009f47b0@pop.preferred.com>

Hi Derrick,

    Without the use of an (usually) expensive GIS program you would have to
improvise. You may be better off treating the data in image form. Use GDAL
to convert a DEM for the same quadrangle as your topo to a GeoTiff and
resample to the same SCALE (not the SIZE, check the world files). This will
make the DEM a template with which you can perform unions/intersections
etc. Think of the images as arrays then this will make more sense. You still
need to write or find the software to do these operations, but I don't believe
there is much difficulty. Python has an imaging library(PIL) which might be
of some help.

                                                                   Jim Julian

At 02:08 PM 2/16/03 -0500, you wrote:

>1) Is there a way I'm overlooking to decollar collared maps (in GeoTIFF
>form) or is it expected that an external program would be used for this? I
>understand that the georeferencing is insufficient to know where the image
>corners are, but I have other data which can be used for this.



From julian at preferred.com  Mon Feb 17 12:21:58 2003
From: julian at preferred.com (Jim Julian)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GDAL data model, caching, GDALProjDef
In-Reply-To: <Pine.LNX.3.96L.1030216134130.21660F-100000@scully.trafford
 .dementia.org>
References: <3E4BC718.3020509@pobox.com>
Message-ID: <5.2.0.9.0.20030217121929.009f88e0@pop.preferred.com>

Hi again Derrick,

    Forgot to mention, since GDAL includes some vector related software,
you might use GDAL ( or perhaps OpenEV) to create the template and
perhaps even make the cut. I'm not so well versed in the programs to be
able to make a definite recommendation.

                                                                Jim Julian


At 02:08 PM 2/16/03 -0500, you wrote:
>On Thu, 13 Feb 2003, Frank Warmerdam wrote:
>
>1) Is there a way I'm overlooking to decollar collared maps (in GeoTIFF
>form) or is it expected that an external program would be used for this? I
>understand that the georeferencing is insufficient to know where the image
>corners are, but I have other data which can be used for this.



From slepnev_v at newmail.ru  Mon Feb 17 02:16:01 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal\html
Message-ID: <000001c2d654$6e9af080$3b4560c3@sst>

Hi,

I just did a "cvs checkout gdal" (which finished successfully) and most of
the files in gdal\html have disappeared somewhere!

Vladimir Slepnev
Programmer, RDC ScanEx


From slepnev_v at newmail.ru  Mon Feb 17 02:20:38 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] same problem on server
Message-ID: <000101c2d655$13f73ed0$3b4560c3@sst>

Hi!

There's also a problem with the gdal website!
For example, http://www.remotesensing.org/gdal/frmt_fast.html -> "404 file
not found"

And some more questions: what is the difference between the formats with
codes EFF and FAST? Which should I use? What is the situation with the
support of Euromap Fast Format? I can make neither head nor tail of it from
the docs.

Vladimir Slepnev
Programmer, RDC ScanEx


From jlawhead at nvisionsolutions.com  Mon Feb 17 14:25:11 2003
From: jlawhead at nvisionsolutions.com (Joel Lawhead)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Python examples
Message-ID: <006301c2d6ba$4df38020$c3633ed0@nvisionsolutions.com>

I'd like to voice support for some sort of GDAL/Python examples
repository mentioned on several posts this weekend. 
 
Messages from Python/GDAL users are infrequent on this list so I figured
not many people are using GDAL from Python. But if that's not the case
then some sort of script exchange could be really useful. 
 
I'm using GDAL exclusively from Python and could really benefit and
contribute to such an exchange. Right now the only examples I've found
are the GDAL pymod directory, OpenEV, and scattered posts throughout the
list. It would be great to see some user-contributed programs.  What's
the best way to host something like that?
 
Thanks,
Joel
 
Joel Lawhead, Web Application Developer
NVision Solutions Inc., www.nvisionsolutions.com 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030217/6a70422a/attachment.html
From dron at ak4719.spb.edu  Mon Feb 17 14:45:59 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] same problem on server
In-Reply-To: <000101c2d655$13f73ed0$3b4560c3@sst>
References: <000101c2d655$13f73ed0$3b4560c3@sst>
Message-ID: <20030217194559.GA26990@ak4719.spb.edu>

On Mon, Feb 17, 2003 at 10:20:38AM +0300, Vladimir Slepnev wrote:
> There's also a problem with the gdal website!
> For example, http://www.remotesensing.org/gdal/frmt_fast.html -> "404 file
> not found"

Ok, I have restored frmt_fast.html. Someone should make web-update now :-)

> And some more questions: what is the difference between the formats with
> codes EFF and FAST? Which should I use? What is the situation with the
> support of Euromap Fast Format? I can make neither head nor tail of it from
> the docs.

FAST driver designed for Landsat TM datasets and now supports only those
ones. But it may be extended for other dataset as well if I've got
samples.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Mon Feb 17 14:50:49 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal\html
In-Reply-To: <000001c2d654$6e9af080$3b4560c3@sst>
References: <000001c2d654$6e9af080$3b4560c3@sst>
Message-ID: <20030217195049.GB26990@ak4719.spb.edu>

On Mon, Feb 17, 2003 at 10:16:01AM +0300, Vladimir Slepnev wrote:
> I just did a "cvs checkout gdal" (which finished successfully) and most of
> the files in gdal\html have disappeared somewhere!

Frank removed HTML docs because they are often changed along with
sources and may be builded when needed.

$ make docs

in main directory will do the work (if GNU make and Doxygen are
available).

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Mon Feb 17 14:52:24 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Python examples
In-Reply-To: <006301c2d6ba$4df38020$c3633ed0@nvisionsolutions.com>
References: <006301c2d6ba$4df38020$c3633ed0@nvisionsolutions.com>
Message-ID: <20030217195224.GC26990@ak4719.spb.edu>

On Mon, Feb 17, 2003 at 01:25:11PM -0600, Joel Lawhead wrote:
> I'd like to voice support for some sort of GDAL/Python examples
> repository mentioned on several posts this weekend. 

Take the latest GDAL snapshot and look in pymod/samples directory: this
repository already started!

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Mon Feb 17 15:09:28 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] same problem on server
In-Reply-To: <20030217194559.GA26990@ak4719.spb.edu>
References: <000101c2d655$13f73ed0$3b4560c3@sst> <20030217194559.GA26990@ak4719.spb.edu>
Message-ID: <3E514178.7070904@pobox.com>

Andrey Kiselev wrote:
> On Mon, Feb 17, 2003 at 10:20:38AM +0300, Vladimir Slepnev wrote:
> 
>>There's also a problem with the gdal website!
>>For example, http://www.remotesensing.org/gdal/frmt_fast.html -> "404 file
>>not found"
> 
> 
> Ok, I have restored frmt_fast.html. Someone should make web-update now :-)

Done.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Feb 17 15:13:12 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Python examples
In-Reply-To: <006301c2d6ba$4df38020$c3633ed0@nvisionsolutions.com>
References: <006301c2d6ba$4df38020$c3633ed0@nvisionsolutions.com>
Message-ID: <3E514258.30908@pobox.com>

Joel Lawhead wrote:
> I?d like to voice support for some sort of GDAL/Python examples 
> repository mentioned on several posts this weekend.
> 
>  
> 
> Messages from Python/GDAL users are infrequent on this list so I figured 
> not many people are using GDAL from Python. But if that?s not the case 
> then some sort of script exchange could be really useful.

Joel,

While I think a majority of GDAL users are just using the library from
applications like OpenEV, MapServer or the utilities provided with
GDAL, there is significant use of Python going on too.

> I?m using GDAL exclusively from Python and could really benefit and 
> contribute to such an exchange. Right now the only examples I?ve found 
> are the GDAL pymod directory, OpenEV, and scattered posts throughout the 
> list. It would be great to see some user-contributed programs.  What?s 
> the best way to host something like that?

They are being committed to CVS under pymod/samples.  They can be browsed
live on the web at:

   http://www.remotesensing.org/cgi-bin/cvsweb.cgi/osrs/gdal/pymod/samples

If you have entries you would like to submit, and if you don't have CVS
access, just email them to me or Andrey with a bit of a description to
include in the README.

Note, OGR/Python examples are also of interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Mon Feb 17 16:40:52 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Support for creating ENVI .hdr labeled files
Message-ID: <20030217214052.GA19157@ak4719.spb.edu>

Hi, folks,

There is a support for creating ENVI datasets (with "ENVI" driver).
At the time there is a limitation: driver cannot save projection and
geotransform in Mapinfo format, but this issue will be resolved shortly.
Also I want add an option to select the interleaving type.

Everybody interested in this driver may start testing.

				Regards,
				Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Mon Feb 17 22:29:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] OGR JOIN Support
Message-ID: <3E51A8AE.2050501@pobox.com>

Folks,

As part of a contract (via DM Solutions), it is desired for MapServer to
support attribute joins for OGR datasources.  I am intending to implement
access to this as a narrow extension to the existing support SQL syntax
supportted by OGR's ExecuteSQL() call.  In order to get decent speed for
attribute joins it is planned to optionally use the xBase 2.0 library
in place of the "simple" dbf support currently used in the shapelib driver.
The xBase based support should make it possible to quickly find the record
matching matching a particular key value when indexes are pre-built for the
columns in question.

I have attached my rough notes on how this would be incorporated.  I am
throwing it out here in case anyone has suggestions or would be interested
in utilizing the mechanism.

The work should be implemented over the next two weeks.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




See http://www.w3schools.com/sql/sql_join.asp for SQL join syntax.


Requirements:

   o Arbitrary OGR->.dbf Joins.
   o Any field type for key.
   o Use xBase library for fast (index based) fetches from joined table.
   o Joined table may be in a different location than the file being joined to.


-----

SQL Syntax (for ExecuteSQL() method on OGRDataSource):

   SELECT <field_list> FROM <primary_table>
      LEFT JOIN ['DataSourceName'.]<join_table> [<join_table_alias>]
      ON <primary_table>.<key_field> = <join_table>.<key_field>
      WHERE <where_query>

<field_list>
   - This may be '*' indicating all fields from primary table, and secondary
     table, including duplication of the keyfield.  Any field name duplication
     will result in the joined tables name being prefix with the join name.
   - Fields from the primary table should not be qualified by a table they
     are from.
   - Fields from the secondary table *should* be qualified by the table they
     are from (ie. 'jointb.id').

Example:

SELECT * FROM cities
   LEFT JOIN 'province.dbf'.province ON cities.prov_id = province.id
   WHERE pop > 100000

SELECT name, pop, prov.name FROM cities
   LEFT JOIN '/u/data/province.dbf'.province prov ON cities.prov_id = prov.id
   WHERE pop > 100000 ORDER BY pop;


Some Details:
  o If no <join_table_alias> is provided, then the name of the join table will
    be used.
  o The ON clause must specificially be of the form primary key = join key.
  o The WHERE clause can only have conditions on fields from the primary record.
    It is evaluated before any joining is done.
  o More than one "LEFT JOIN / ON" clause may be supplied to append from
    multiple sources.
  o This mechanism can only be used against data sources that do not provide
    their own SQL interpretation, so it cannot be used with Oracle or PostGIS.
  o The 'DataSourceName' is a quoted filename for the OGRDataSource holding the
    secondary table.  It may be any OGR supported data source (including
    Oracle/PostGIS), but for the time being it is likely to be terribly
    inefficient for anything but .dbf, Oracle or PostGIS since a query will be
    issues on the joined table for each primary record selected.
  o There is no way to utilize geometry from the joined table.
  o Unlike a real left join only one record will be produced if the primary
    record has more than one join record associated with it.  In this case the
    first joined record matching the criteria will be used and the rest ignored.
  o Any primary records for which no related record in the join table will
    just have the joined fields set to NULL ... the primary record will still
    be returned.
  o The joined data source (when different from the main one) will only be
    kept open as long as the ExecuteSQL() results layer exists.  It won't be
    shared with anything else that is active.

-----

Overall Implementation:

  1) swq.c/swq.h: Parsing of the JOIN syntax.

  2) gdal/ogr/ogrsf_frmts/generic/ogr_gensql.{cpp,h}: Implement the joining.

  3) gdal/ogr/ogrsf_frmts/shape:
      - Incorporate alternate DBF support based on xBase 2.0
      - Implement fast evaluation of *simple* attribute queries of the form
        <field> = <value>, possible also <field> > <value> and <field> < <value>
      - Implement a pseudo-SQL statement to build indexes in xBase fields.

  4) MapServer: modify mapogr.cpp to allow an SQL statement in place of a layer
                number/name in the connection string.  The SQL will be executed
                with OGRDataSource::ExecuteSQL() to create a temporary layer.
      eg. CONNECTION 'spmap.dgn,SELECT * FROM elements'

-----

Future directions:

  o Implement a generic OGR mechanism for holding attribute field indexes that
    could be fairly easily applied to other formats to give similar performance
    characteristics to the xBase library.

  o Reqwrite SQL parser to be much more generic and support more of the multi
    table support from SQL, removing many limitations listed above.




From kamal_jo at yahoo.com  Tue Feb 18 03:44:12 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate & OpenEV 1.50
In-Reply-To: <3E51A8AE.2050501@pobox.com>
Message-ID: <20030218084412.55256.qmail@web41111.mail.yahoo.com>

I opened a 16 bit  geotiff file using OpenEV 1.50 and
it was desplyed properly as a grayscale image,but when
I used gdal_translate to convert this same file to a
bmp file, it all appeared as black, why is that?

I downloaded gdal_translate and OpenEV 1.50 from 
ftp://ftp.remotesensing.org/gdal/openev/

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From alessandro_amici at telespazio.it  Tue Feb 18 04:56:45 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal and python exceptions
Message-ID: <A183DF60AC72D5119B990002A5749CB303848E75@ROMADG-MAIL01>

Frank,

> there is significant use of Python going on too.

I am one using mainly the python bindings and I'd like to point out
one of my wishlist items:

gdal.Open(filename) returns None in case of failure. But, raising an IOError
exception wuold be more consistent with the python style. Similarly for
other error conditions (i.e. GetDriverByName(), Driver.Create(), etc).
I understand this wuold be a significant interface change, that you might
be reluctant to implement. But please note that I end up doing:

	im = gdal.Open(filename)
	if im is None:
		raise IOError, 'Could not open "$s"' % filename

quite often anyhow. Moreover, right now the gdal related code ends up being
obfuscated by numerous error-handling paths needed.
IMHO most of that could be avoided with the use of exceptions.

Frank, waht do you think? Should I file a wishlist bug?

Thanks,
alessandro

From kamal_jo at yahoo.com  Tue Feb 18 05:39:32 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Gdal interface function
In-Reply-To: <3E51A8AE.2050501@pobox.com>
Message-ID: <20030218103932.4072.qmail@web41103.mail.yahoo.com>

I use Gdal to convert a geotiff file into bmp, now
instead of saving the bmp on a disk file, I need to
get the memory buffer that contains the bmp data.

So, what interface functions do I have to use from
Gdal to accomplish this? And in what format does this
data come ( int, unsigned int, ..)?

If there is a help file that contains all interface
functions in general that will be great so that I
don't refer to you for future quries about other functionalities.

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From warmerdam at pobox.com  Tue Feb 18 09:26:16 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Gdal interface function
In-Reply-To: <20030218103932.4072.qmail@web41103.mail.yahoo.com>
References: <20030218103932.4072.qmail@web41103.mail.yahoo.com>
Message-ID: <3E524288.4030905@pobox.com>

Ayman Kamal wrote:
> I use Gdal to convert a geotiff file into bmp, now
> instead of saving the bmp on a disk file, I need to
> get the memory buffer that contains the bmp data.
> 
> So, what interface functions do I have to use from
> Gdal to accomplish this? And in what format does this
> data come ( int, unsigned int, ..)?
> 
> If there is a help file that contains all interface
> functions in general that will be great so that I
> don't refer to you for future quries about other functionalities.

Ayman,

There is no mechanism in place currently for creating formats like BMP
strictly in memory.  You want the data in BMP format in memory, right?
Of course, you can write it to disk, and then read it into memory.

Later,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Feb 18 09:34:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal and python exceptions
In-Reply-To: <A183DF60AC72D5119B990002A5749CB303848E75@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB303848E75@ROMADG-MAIL01>
Message-ID: <3E52448C.3010408@pobox.com>

Amici Alessandro wrote:
> Frank,
> 
> 
>>there is significant use of Python going on too.
> 
> 
> I am one using mainly the python bindings and I'd like to point out
> one of my wishlist items:
> 
> gdal.Open(filename) returns None in case of failure. But, raising an IOError
> exception wuold be more consistent with the python style. Similarly for
> other error conditions (i.e. GetDriverByName(), Driver.Create(), etc).
> I understand this wuold be a significant interface change, that you might
> be reluctant to implement. But please note that I end up doing:
> 
> 	im = gdal.Open(filename)
> 	if im is None:
> 		raise IOError, 'Could not open "$s"' % filename
> 
> quite often anyhow. Moreover, right now the gdal related code ends up being
> obfuscated by numerous error-handling paths needed.
> IMHO most of that could be avoided with the use of exceptions.
> 
> Frank, waht do you think? Should I file a wishlist bug?

Alessandro,

I agree this would be a desirable change ... for the OGR open function as well.
Please file as a feature request.  I don't want to make the change till I can
take the time to add the corresponding exception catching in OpenEV though.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tbeckman at usgs.gov  Tue Feb 18 09:36:02 2003
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
Message-ID: <OF0426C0B0.BAB9026E-ON86256CD1.00501CC2@cr.usgs.gov>

Resend... Frank, you didn't reply to this email and it has a question in 
that I need an answer to...

Thanks
Tim

----- Forwarded by Tim Beckmann/NMD/CONT/USGS/DOI on 02/18/2003 08:35 AM 
-----


Tim Beckmann
02/05/2003 05:23 PM


        To:     gdal-dev@remotesensing.org
        cc: 
        Subject:        Re: [Gdal-dev] [RFC] RasterIO speedup patch

Frank,

Okay, I put it in bugzilla.  It is #281.

I still need to clean up the other changes a bit before I submit them. One 
question for you.  When GDALCopyWords does data type conversions, it uses 
memcpy for copying out a single data element at a time.  The only reason I 
can think of why this would be done is that you're worried about being 
given data buffers that aren't properly aligned in memory for platforms 
that have such limitations.  Is this correct?  The next set of changes 
assumes memory alignment is correct.  I can either try using memcpy and 
see if it impacts speed in my changes, or I can make it one more special 
case that the changes I've done are only used when memory alignment 
constraints are met.  Actually, I can't think of a case where memory 
wouldn't be correctly aligned when going through RasterIO.  But I suppose 
someone could end up with incorrectly aligned buffers when calling 
GDALCopyWords directly (but for efficiency maybe it should just error out 
in that case and the driver should be fixed).

I agree that 1:1 IO should be as efficient as possible.  I won't be 
worrying about the down/up sampling speed right now since it is a feature 
we won't be using in the near future in LAS.  But the data type 
conversions are something we depend on the I/O layer to do currently.

A regression test is a good idea.  We have a large one for LAS.  But right 
now it only exercises our own LAS driver when we're using GDAL.  That will 
change in the future (probably distant).

BTW, I should have mentioned that I work with April Shimitz and Lowell 
Johnson who have filled you in a little on what we're doing.

Thanks
Tim

--------------------------------------------------------------------------
Tim Beckmann               tbeckman@usgs.gov
Software Project Lead
SAIC
EROS Data Center, Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax





Frank Warmerdam <warmerdam@pobox.com>
Sent by: gdal-dev-admin@remotesensing.org
02/05/2003 04:43 PM
Please respond to gdal-dev

 
        To:     gdal-dev@remotesensing.org
        cc: 
        Subject:        Re: [Gdal-dev] [RFC] RasterIO speedup patch


Tim Beckmann wrote:
> Frank and the rest of the list,
> 
> We've been working to incorporate GDAL into our software.  One drawback 
> we've found so far is that the performance of gdal when it needs to do 
> data type conversions is extremely slow.  Here is a patch that I've 
> generated that seems to work to improve the performance.  It works by 
> changing the GDALRasterBand::IRasterIO to attempt to convert more than a 

> single pixel for every call to GDALCopyWords.  For the testing I've 
done, 
> it seems to work well.  I'm not sure if I've covered all the possible 
> combinations though.  There are still cases where it falls back to 
calling 
> GDALCopyWords once for each pixel.
> 
> Some preliminary timings show that the runtime to convert a 100 MB 
Float32 
> image to Byte data took 49 seconds with the original code, but only 27 
> seconds with the patch below.  This is using our unreleased LAS driver 
on 
> an SGI Origin 2000 with 250 MHz processors.
> 
> Any comments?

Tim,

Based on a quick inspection the code looks OK.  Could you submit this
patch into bugzilla as an enhancement request?  I will have Andrey apply
and test it.

> Oh yeah, once for the record - I really dislike the naming convention 
used 
> for variables in the routine.  It makes it much harder to understand the 

> code.  >  Also, some of the variable names could use some comments to 
explain
> what they do (I'd add them, but I'm not 100% sure).  Example: the 
> nSrcPixelOffset parameter to GDALCopyWords.  If I understand it 
correctly, 
> it isn't an offset, it is the value to stride through the data with.

Well, I think of it as the offset from the beginning of one pixel to the
beginning of the next.  I would agree of course that more internal
documentation would be helpful.

> I also have another set of changes that cut the time nearly in half 
> again...  But one step at a time.

I look forward to receiving them.

There is clearly lots of room for improvement in GDAL, at least in
cases where up/down sampling is done and/or when data type conversion is
done.   I have tried to ensure that the 1:1 IO logic (especially on
block boundaries) is efficient.

I would also add that I think I need to write some regression tests that
exercise lots of the cases so that when we tune it we can have greater
confidence that we haven't broken anything.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev





From warmerdam at pobox.com  Tue Feb 18 09:36:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate & OpenEV 1.50
In-Reply-To: <20030218084412.55256.qmail@web41111.mail.yahoo.com>
References: <20030218084412.55256.qmail@web41111.mail.yahoo.com>
Message-ID: <3E524504.8000701@pobox.com>

Ayman Kamal wrote:
> I opened a 16 bit  geotiff file using OpenEV 1.50 and
> it was desplyed properly as a grayscale image,but when
> I used gdal_translate to convert this same file to a
> bmp file, it all appeared as black, why is that?
> 
> I downloaded gdal_translate and OpenEV 1.50 from 
> ftp://ftp.remotesensing.org/gdal/openev/

Ayman,

OpenEV automatically scales 16bit images but does not do that for 8bit
greyscale images (such as BMP) since the 8bit values can be directly displayed.
After loading the BMP file try hitting the linear stretch button in OpenEV.

Also, be aware that a default translation to BMP from 16bit will map all values
larger than 255 to 255 and all values lower than 0 to 0.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Feb 18 09:46:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
In-Reply-To: <OF0426C0B0.BAB9026E-ON86256CD1.00501CC2@cr.usgs.gov>
References: <OF0426C0B0.BAB9026E-ON86256CD1.00501CC2@cr.usgs.gov>
Message-ID: <3E524749.7080502@pobox.com>

Tim Beckmann wrote:
> Resend... Frank, you didn't reply to this email and it has a question in 
> that I need an answer to...

Tim,

Sorry about that.  Approximately 1400 "in queue" email message fell into an
HD black hole a week and a half ago.

> Okay, I put it in bugzilla.  It is #281.

As noted in Bugzilla Andrey has applied your patch.

> I still need to clean up the other changes a bit before I submit them. One 
> question for you.  When GDALCopyWords does data type conversions, it uses 
> memcpy for copying out a single data element at a time.  The only reason I 
> can think of why this would be done is that you're worried about being 
> given data buffers that aren't properly aligned in memory for platforms 
> that have such limitations.  Is this correct?  The next set of changes 
> assumes memory alignment is correct.  I can either try using memcpy and 
> see if it impacts speed in my changes, or I can make it one more special 
> case that the changes I've done are only used when memory alignment 
> constraints are met.  Actually, I can't think of a case where memory 
> wouldn't be correctly aligned when going through RasterIO.  But I suppose 
> someone could end up with incorrectly aligned buffers when calling 
> GDALCopyWords directly (but for efficiency maybe it should just error out 
> in that case and the driver should be fixed).

GDALCopyWords() is sometimes used to copy data out of buffers read from disk
that are not word aligned, so this is an issue.  I think that if you want to
copy by word in some cases then GDALCopyWords() should verify that the
pointer is word aligned.

Don't hesitate to poke me when I don't respond in a day or two to a question.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tbeckman at usgs.gov  Tue Feb 18 09:56:06 2003
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
Message-ID: <OFC64A1E18.46FD2B54-ON86256CD1.00517B5D@cr.usgs.gov>

Frank, 

No problem on the delay.  I understand having a large mail queue (I've 
never seen so much traffic on the gdal list as there has been lately ;). I 
haven't had time since I sent the email to work on the GDALCopyWords 
anyway.  That's why I didn't poke you sooner.

I didn't receive an email that my patch had been applied.  I assumed the 
submitter would automatically be notified.  Not a big deal - now I know 
;).  Thanks to you and Andrey for applying it.

I'll make sure my follow-on patch(es) test for pointer alignment (will be 
a little bit yet before I find the time to finish the patches).

Thanks
Tim
--------------------------------------------------------------------------
Tim Beckmann               tbeckman@usgs.gov
Software Project Lead
SAIC
EROS Data Center, Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax





Frank Warmerdam <warmerdam@pobox.com>
Sent by: gdal-dev-admin@remotesensing.org
02/18/2003 08:46 AM
Please respond to gdal-dev

 
        To:     gdal-dev@remotesensing.org
        cc: 
        Subject:        Re: [Gdal-dev] [RFC] RasterIO speedup patch


Tim Beckmann wrote:
> Resend... Frank, you didn't reply to this email and it has a question in 

> that I need an answer to...

Tim,

Sorry about that.  Approximately 1400 "in queue" email message fell into 
an
HD black hole a week and a half ago.

> Okay, I put it in bugzilla.  It is #281.

As noted in Bugzilla Andrey has applied your patch.

> I still need to clean up the other changes a bit before I submit them. 
One 
> question for you.  When GDALCopyWords does data type conversions, it 
uses 
> memcpy for copying out a single data element at a time.  The only reason 
I 
> can think of why this would be done is that you're worried about being 
> given data buffers that aren't properly aligned in memory for platforms 
> that have such limitations.  Is this correct?  The next set of changes 
> assumes memory alignment is correct.  I can either try using memcpy and 
> see if it impacts speed in my changes, or I can make it one more special 

> case that the changes I've done are only used when memory alignment 
> constraints are met.  Actually, I can't think of a case where memory 
> wouldn't be correctly aligned when going through RasterIO.  But I 
suppose 
> someone could end up with incorrectly aligned buffers when calling 
> GDALCopyWords directly (but for efficiency maybe it should just error 
out 
> in that case and the driver should be fixed).

GDALCopyWords() is sometimes used to copy data out of buffers read from 
disk
that are not word aligned, so this is an issue.  I think that if you want 
to
copy by word in some cases then GDALCopyWords() should verify that the
pointer is word aligned.

Don't hesitate to poke me when I don't respond in a day or two to a 
question.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Tue Feb 18 10:05:39 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
In-Reply-To: <OFC64A1E18.46FD2B54-ON86256CD1.00517B5D@cr.usgs.gov>
References: <OFC64A1E18.46FD2B54-ON86256CD1.00517B5D@cr.usgs.gov>
Message-ID: <3E524BC3.30702@pobox.com>

Tim Beckmann wrote:
> Frank, 
> 
> No problem on the delay.  I understand having a large mail queue (I've 
> never seen so much traffic on the gdal list as there has been lately ;). I 
> haven't had time since I sent the email to work on the GDALCopyWords 
> anyway.  That's why I didn't poke you sooner.
> 
> I didn't receive an email that my patch had been applied.  I assumed the 
> submitter would automatically be notified.  Not a big deal - now I know 
> ;).  Thanks to you and Andrey for applying it.
> 
> I'll make sure my follow-on patch(es) test for pointer alignment (will be 
> a little bit yet before I find the time to finish the patches).

Tim,

The bugzilla.remotesensing.org is partially broken currently and email
notification of changes isn't happening.  I find it really hamstrings me.  I
am quite dependent on this feature of Bugzilla!  Hopefully it will be fixed
again soon.

I would add that I broke this feature with some hamhanded fiddling around as
root when I was trying to create a new project for OpenEV.  I was moving OpenEV
to bugzilla.remotesensing.org specifically to get the email notifications!

Later,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rzanolli at hotmail.com  Tue Feb 18 10:18:00 2003
From: rzanolli at hotmail.com (roni zanolli)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Problem Unable to load PROJ.4
Message-ID: <F149I0HkIq2dUsU9ULH0000ea5c@hotmail.com>

Hi All,

I installed gdal-1.1.8 and I'm using it with Virtual Terrain Project. My O.S 
is linux suse 8.1 and when I tried to convert a projection coordinate from 
nad27 to nad83 I get a error message

ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.

I installed proj-4.4.5 and the libproj.so is locate in /usr/local/lib and my 
ldconfig is set up to look to this path.

Debugging the code I found that the file cplgetsymbol.cpp is using Dummy 
implementation instead of Unix Implemnetation because HAVE_DLFCN_H was not 
define when running configure prior to the instalation.

So I run configure again and figure out that it is not findind most of my 
header files like
dlfcn.h, unistd.h, fcntl.h.

Can somebody help me with this problem?

Thank you,


                 Roni





_________________________________________________________________
MSN 8 with e-mail virus protection service: 2 months FREE*  
http://join.msn.com/?page=features/virus


From dron at ak4719.spb.edu  Tue Feb 18 10:23:03 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] [RFC] RasterIO speedup patch
In-Reply-To: <3E524749.7080502@pobox.com>
References: <OF0426C0B0.BAB9026E-ON86256CD1.00501CC2@cr.usgs.gov> <3E524749.7080502@pobox.com>
Message-ID: <20030218152303.GB26400@ak4719.spb.edu>

Tim, Frank,

I've deleted this patch because of problems it produces. I shall return
back to this issue shortly and ftry to fix the crash. This improvement
was not forgotten.

On Tue, Feb 18, 2003 at 09:46:33AM -0500, Frank Warmerdam wrote:
> As noted in Bugzilla Andrey has applied your patch.
> 
> >I still need to clean up the other changes a bit before I submit them. One 
> >question for you.  When GDALCopyWords does data type conversions, it uses 
> >memcpy for copying out a single data element at a time.  The only reason I 
> >can think of why this would be done is that you're worried about being 
> >given data buffers that aren't properly aligned in memory for platforms 
> >that have such limitations.  Is this correct?  The next set of changes 
> >assumes memory alignment is correct.  I can either try using memcpy and 
> >see if it impacts speed in my changes, or I can make it one more special 
> >case that the changes I've done are only used when memory alignment 
> >constraints are met.  Actually, I can't think of a case where memory 
> >wouldn't be correctly aligned when going through RasterIO.  But I suppose 
> >someone could end up with incorrectly aligned buffers when calling 
> >GDALCopyWords directly (but for efficiency maybe it should just error out 
> >in that case and the driver should be fixed).
> 
> GDALCopyWords() is sometimes used to copy data out of buffers read from disk
> that are not word aligned, so this is an issue.  I think that if you want to
> copy by word in some cases then GDALCopyWords() should verify that the
> pointer is word aligned.
> 
> Don't hesitate to poke me when I don't respond in a day or two to a 
> question.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Feb 18 10:33:44 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Problem Unable to load PROJ.4
In-Reply-To: <F149I0HkIq2dUsU9ULH0000ea5c@hotmail.com>
References: <F149I0HkIq2dUsU9ULH0000ea5c@hotmail.com>
Message-ID: <3E525258.6090902@pobox.com>

roni zanolli wrote:
> 
> Hi All,
> 
> I installed gdal-1.1.8 and I'm using it with Virtual Terrain Project. My 
> O.S is linux suse 8.1 and when I tried to convert a projection 
> coordinate from nad27 to nad83 I get a error message
> 
> ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
> OGRCoordinateTransformation failed.
> 
> I installed proj-4.4.5 and the libproj.so is locate in /usr/local/lib 
> and my ldconfig is set up to look to this path.
> 
> Debugging the code I found that the file cplgetsymbol.cpp is using Dummy 
> implementation instead of Unix Implemnetation because HAVE_DLFCN_H was 
> not define when running configure prior to the instalation.
> 
> So I run configure again and figure out that it is not findind most of 
> my header files like
> dlfcn.h, unistd.h, fcntl.h.
> 
> Can somebody help me with this problem?

Roni,

This is a problem with gcc 3.2 and configure.  Try grabbing the nightly
snapshot from CVS and building from that.  The configure problems should
be worked around.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Tue Feb 18 11:13:46 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] FAST driver now supports IRS datasets
Message-ID: <20030218161346.GA31503@ak4719.spb.edu>

Hello, all,

The FAST driver now able to work with IRS datasets. As in case of
L7A datasets (Landsat TM) administrative header should be provided to
driver. Bands should be named as follows:

<header>.<ext>
band1.<ext>
band2.<ext>
...

or

<header>.<ext>
<header>.1.<ext>
<header>.2.<ext>
...

or

<header>.<ext>
band1.dat
band2.dat
...

or

<header>.<ext>
imagery1.dat
imagery2.dat
...

in lower or upper case. This should cover majority of distributors
fantasy in naming files. But if you out of luck and your datasets named
differently you should rename them manually.

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Feb 18 11:42:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] GeoTiff projection/transformation problem
In-Reply-To: <Pine.GSO.4.50.0302181303110.29780-101000@cs>
References: <Pine.GSO.4.50.0302181303110.29780-101000@cs>
Message-ID: <3E52626A.1050806@pobox.com>

Petteri Packalen wrote:
> The code in question where error occures and an example GeoTiff image is
> attached to this mail (petteri_gtiff_problem.zip). An example code
> actually does nothing useful. listgeo prints projection of output image,
> but I don't know is it completely correct. Neither IMAGINE nor ArcGIS is
> able to open output GeoTiff file correctly (projection cannot be seen),
> but when I use libgeotiff directly everything works ok and also
> projection is saved in a way IMAGINE and ArcGIS is able to read it.

Petteri,

OK, I have verified and fixed this problem.  It seems that Erdas is quite
picky about getting all of GeographicTypeGeoKey, GeogGeodeticDatumGeoKey,
and GeogEllipsoidGeoKey set to KvUserDefined when defining an ellipsoid
"by hand".

I have also noticed that Imagine is picking up names for the datum and
ellipsoid from their citation geo keys. Without these I get popup message
about a NULL spheroid in Imagine.

Anyways, the GDAL CVS now has an update gdal/frmts/gtiff/gt_wkt_srs.cpp that
is more Erdas compatible - and more generally correct.

I will also drop a note to Erdas making a few suggestions for the reader.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From kamal_jo at yahoo.com  Tue Feb 18 12:38:12 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Gdal interface function
In-Reply-To: <3E524288.4030905@pobox.com>
Message-ID: <20030218173812.70248.qmail@web41114.mail.yahoo.com>

I want to use a mechanism similar to what
"GDALCreateCopy" uses to write the data to a disk file

is this possible?
Can you help me further?
--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Ayman Kamal wrote:
> > I use Gdal to convert a geotiff file into bmp, now
> > instead of saving the bmp on a disk file, I need
> to
> > get the memory buffer that contains the bmp data.
> > 
> > So, what interface functions do I have to use from
> > Gdal to accomplish this? And in what format does
> this
> > data come ( int, unsigned int, ..)?
> > 
> > If there is a help file that contains all
> interface
> > functions in general that will be great so that I
> > don't refer to you for future quries about other
> functionalities.
> 
> Ayman,
> 
> There is no mechanism in place currently for
> creating formats like BMP
> strictly in memory.  You want the data in BMP format
> in memory, right?
> Of course, you can write it to disk, and then read
> it into memory.
> 
> Later,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From kamal_jo at yahoo.com  Tue Feb 18 13:18:51 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Reading Raster Data using GDAL
In-Reply-To: <3E524BC3.30702@pobox.com>
Message-ID: <20030218181851.66114.qmail@web41105.mail.yahoo.com>

I added the following code at the end of the for loop
that loops through the bands,
The case that I have is a 1 band image (gray scale
bitmap)

There was data writeen to the file, but it seemed to
be rubish, can u help me?

//-----------------------------------------------------
      char *pafScanlines;
      int   nXSize = poVRTBand->GetXSize();
      int   nYSize = poVRTBand->GetYSize();
      
      pafScanlines = (char *)
CPLMalloc(sizeof(float)*nXSize*nYSize);
      poVRTBand->RasterIO(GF_Read, 0, 0, nXSize,
nYSize, 
         pafScanlines, nXSize, nYSize, GDT_Byte, 
         0, 0 );

      
      FILE* pStream;
      pStream = fopen("new.bmp","w");
      fwrite(pafScanlines,nXSize*nYSize,1 ,pStream);
      fclose(pStream);
      
      //-----------------------------------------------

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From kamal_jo at yahoo.com  Tue Feb 18 14:21:58 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Reading Raster Data using GDAL
In-Reply-To: <20030218181851.66114.qmail@web41105.mail.yahoo.com>
Message-ID: <20030218192158.92216.qmail@web41104.mail.yahoo.com>

Ok I managed finally using this piece of code to get
the raw data, but still there is one problem

but there is still one problem, the size of the file
should be
nXSize*nYSize*sizeof(unsigned char), but when I
checked the saved file it was greater than I expected.

of course I checked the size of the file and not size
on disk.

Any way and the bottom left of the image had a black
area.

Can u help me solve this ASAP please?
//-----------------------------------------------------
      unsigned char *pafScanlines;
      int   nXSize = poVRTBand->GetXSize();
      int   nYSize = poVRTBand->GetYSize();
      
      GDALDataType p = poVRTBand->GetRasterDataType();
      pafScanlines = (unsigned char *)
CPLMalloc(sizeof(unsigned char )*nXSize*nYSize);
      poVRTBand->RasterIO(GF_Read, 0, 0, nXSize,
nYSize, 
                           pafScanlines, nXSize,
nYSize, GDT_Byte, 
                           0, 0 );
      FILE* pStream;
      pStream = fopen("new.bmp","w");
      fwrite(pafScanlines,nXSize*nYSize,1 ,pStream);
      fclose(pStream);
      
      
//-----------------------------------------------------

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From warmerdam at pobox.com  Tue Feb 18 14:40:42 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Gdal interface function
In-Reply-To: <20030218173812.70248.qmail@web41114.mail.yahoo.com>
References: <20030218173812.70248.qmail@web41114.mail.yahoo.com>
Message-ID: <3E528C3A.3090503@pobox.com>

Ayman Kamal wrote:
> I want to use a mechanism similar to what
> "GDALCreateCopy" uses to write the data to a disk file
> 
> is this possible?
> Can you help me further?

Ayman,

It is somewhat involved to use the CreateCopy() mechanism from a memory
array to a disk file.  However, there is an example of how to do this in the
mapgdal.c file in the UMN MapServer distribution.  See the msSaveImageGDAL()
function.

However, given the difficulty you are having with substantially simplier
cases I am not sure I would advise you to try and tackle it.

PS. You have exausted your answer quota for today (from me at least).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From garvank at optech.on.ca  Tue Feb 18 16:23:09 2003
From: garvank at optech.on.ca (Garvan Keeley)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate bsb files problem
Message-ID: <11E3973D1E78D311A5B400508B4A70CE0108343A@COMSRVR>

Hi,
I am having some problems using gdal_translate with BSB files.

I have two files that I have been able to open with a commercial viewer
(Caris Easy ENC) but are causing errors with gdal_translate.

File #1:
- no errors reported by gdalinfo
- gdal_translate does partial read, at about 80% through the processing, I
get these errors:
ERROR 1: Got scanline id 0 when looking for 7401.
ERROR 1: IReadBlock failed at X offset 0, Y offset 7400
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 7400
ERROR 1: Got scanline id 0 when looking for 7401.
ERROR 1: IReadBlock failed at X offset 0, Y offset 7401
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 7401
ERROR 1: Got scanline id 0 when looking for 7401.
etc.

File #2:
- gdalinfo and gdal_translate give this error:
ERROR 1: Failed to find compressed data segment of BSB file.
GDALOpen failed - 1
Failed to find compressed data segment of BSB file.

I have put the BSB files (along with some other files that aren't causing
problems) here:
ftp://ftp.optech.on.ca/marine/BSBfiles

Any tips on how I could troubleshoot these problems?

Thanks,
Garvan Keeley
Programmer/Analyst
http://www.optech.on.ca
Tel: 416.661.5904 x441

From warmerdam at pobox.com  Tue Feb 18 22:51:40 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] gdal_translate bsb files problem
In-Reply-To: <11E3973D1E78D311A5B400508B4A70CE0108343A@COMSRVR>
References: <11E3973D1E78D311A5B400508B4A70CE0108343A@COMSRVR>
Message-ID: <3E52FF4C.9060400@pobox.com>

Garvan Keeley wrote:
> Hi,
> I am having some problems using gdal_translate with BSB files.
> 
> I have two files that I have been able to open with a commercial viewer
> (Caris Easy ENC) but are causing errors with gdal_translate.
> 
> File #1:
> - no errors reported by gdalinfo
> - gdal_translate does partial read, at about 80% through the processing, I
> get these errors:
> ERROR 1: Got scanline id 0 when looking for 7401.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 7400
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 7400
> ERROR 1: Got scanline id 0 when looking for 7401.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 7401
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 7401
> ERROR 1: Got scanline id 0 when looking for 7401.
> etc.
> 
> File #2:
> - gdalinfo and gdal_translate give this error:
> ERROR 1: Failed to find compressed data segment of BSB file.
> GDALOpen failed - 1
> Failed to find compressed data segment of BSB file.
> 
> I have put the BSB files (along with some other files that aren't causing
> problems) here:
> ftp://ftp.optech.on.ca/marine/BSBfiles
> 
> Any tips on how I could troubleshoot these problems?

Garvan,

The world.kap file has a bit of junk between the keywords and the beginning
of the image data proper.  I have modified bsb_read.c to skip this (and will
commit it shortly).  Given that BSB is not a properly published format it is
hard to know if this is a problem in my understanding of the format, or if
that file was just incorrectly generated.

The sample1.kap of Puget Sound has an extra zero byte at offset 6617592.  If
I drop it out of the file it reads fine.  I have implemented a hack to work
around this as well, and have committed the changes to CVS.

You can either pick up the fix from CVS, the nightly snapshot that will be
created overnight, or I can email you a new bsb_read.c.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Wed Feb 19 02:27:26 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] FAST driver now supports IRS datasets
In-Reply-To: <20030218161346.GA31503@ak4719.spb.edu>
References: <20030218161346.GA31503@ak4719.spb.edu>
Message-ID: <20030219072726.GA14072@ak4719.spb.edu>

On Tue, Feb 18, 2003 at 07:13:46PM +0300, Andrey Kiselev wrote:
> The FAST driver now able to work with IRS datasets. As in case of
> L7A datasets (Landsat TM) administrative header should be provided to
> driver. Bands should be named as follows:

EOSAT Fast Format driver (EFF) removed from GDAL because its
functionality now covered by the FAST driver. If anyone has problems
with datsets which was previously successfully imported with EFF driver
you are encouraged to fill a bug report.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From kamal_jo at yahoo.com  Wed Feb 19 05:44:30 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Reading Image into a buffer
In-Reply-To: <3E528C3A.3090503@pobox.com>
Message-ID: <20030219104430.84881.qmail@web41112.mail.yahoo.com>

I traced gdal_translate source code, and found that
there is a virtual data set being created, finally
this virtual data set is sent to GDALCreateCopy to
save it to disk file.

I want to be able to get the data into a memory buffer
instead of being sent to a file.

How can I do this?

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com

From morissette at dmsolutions.ca  Wed Feb 19 15:49:46 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] OGR C API - sample program
Message-ID: <3E53EDEA.30696FB2@dmsolutions.ca>

Hi everyone,

For those who were not aware of it yet, OGR comes with a C API (this was
news to me a few weeks ago).  The C API is a set of C wrapper functions
on top of the C++ classes, allowing use of OGR from C programs or
potentially from other languages such as Delphi that would call exported
functions in the GDAL.DLL.  See ogr_api.h for the list of functions.

Unfortunately this API is still undocumented and to my knowledge there
was no sample code demonstrating its usage anywhere.  As a starting
point, I have committed to CVS the file gdal/ogr/ogr_capi_test.c that
shows how to use the OGR C API to read a OGR dataset, and to create a
new dataset with a few features in it.

Hopefully documentation for the OGR C API will follow in the not too
distant future. (If you can read between the lines, that means we're 
pending approval of a project in which we would do this for one of our 
clients. ;)

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From warmerdam at pobox.com  Wed Feb 19 23:28:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] OGR Web Page Updated
Message-ID: <3E545971.9030209@pobox.com>

Folks,

I have updated the OGR web page a bunch, emphasising current status, how
to report bugs, where to get current source and binaries, that gdal-dev is now
effectively the primary mailing list for OGR issues, and the availability of
the C and Python APIs.

   http://gdal.velocet.ca/projects/opengis/

Let me know anything that is particularly weak.

I have also setup the night CVS snapshot script to unpack the same code
copy under http://www.remotesensing.org/gdal/srctree.  It can't currently
be browsed since apparently the remotesensing.org web server disallows
directory indexes, but it can be directly referenced from web pages - which
I have taken advantage of in a few spots in the OGR main page.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Feb 20 09:48:57 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Re: Why is origin different?
In-Reply-To: <1045695420.2773.9.camel@delores>
References: <1045695420.2773.9.camel@delores>
Message-ID: <3E54EAD9.9000708@pobox.com>

Diana Esch-Mosher wrote:
> I have the following method. The file I am trying to copy has no
> geotransform or projection or metadata. The file I create has the
> origin  0,1? Why? Both are HFA files.
> 
> Thanks,
> 
> Diana  
> 
> def CopyDatasetInfo( self,src, dst ):
>         if src.GetGCPCount() > 0:
>             dst.SetGCPs( src.GetGCPs(), src.GetGCPProjection() )
>     
>         dst.SetGeoTransform( src.GetGeoTransform() )
>         dst.SetProjection( src.GetProjection() )
>         dst.SetMetadata( src.GetMetadata() )

Diana,

I have committed a fix for this bug.  I also modified the Imagine writing
code to not write out a "mapinfo" node for images with the default
geotransform (unreferenced).

I have cc:ed this to gdal-dev since that is a more appropriate venue for
GDAL specific issues.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From neteler at itc.it  Thu Feb 20 12:15:14 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] OGR C API - sample program
In-Reply-To: <3E53EDEA.30696FB2@dmsolutions.ca>; from morissette@dmsolutions.ca on Wed, Feb 19, 2003 at 03:49:46PM -0500
References: <3E53EDEA.30696FB2@dmsolutions.ca>
Message-ID: <20030220181514.P31731@itc.it>

On Wed, Feb 19, 2003 at 03:49:46PM -0500, Daniel Morissette wrote:
> Hi everyone,
> 
> For those who were not aware of it yet, OGR comes with a C API (this was
> news to me a few weeks ago).  The C API is a set of C wrapper functions
> on top of the C++ classes, allowing use of OGR from C programs or
> potentially from other languages such as Delphi that would call exported
> functions in the GDAL.DLL.  See ogr_api.h for the list of functions.
> 
> Unfortunately this API is still undocumented and to my knowledge there
> was no sample code demonstrating its usage anywhere.


Hi Daniel, hi everyone,

in GRASS 5.1 experimental you can find v.in.ogr and v.out.ogr :-)

http://grass.itc.it/grass51/

The code in hosted in the GRASS CVS, snapshots and GNU/Linux binaries
are built weekly. Note that it is experimental and not recommended
for productional usage.

Kind regards

 Markus

-- 
Markus Neteler

ITC-irst, Istituto per la Ricerca Scientifica e Tecnologica
      Project on Predictive Models for the Environment    
Via Sommarive, 18        -       38050 Povo (Trento), Italy
                                          http://mpa.itc.it

From anandm at ittc.ku.edu  Fri Feb 21 16:43:45 2003
From: anandm at ittc.ku.edu (Anand Madhavan)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Extracting and Setting the  Entire Header of a .img ( HFA) File
In-Reply-To: <20030221170001.25619.37365.Mailman@yoda.imagelinks.com>
Message-ID: <000e01c2d9f2$4faa5070$be7fed81@ittc.ku.edu>

Hi,

   I am writing an application using the APIs of gdal. What I need to do is
basically, extract the entire Header information of a .img file, (HFA),
which includes all the information including, the Geo-Referencing,
Projection, MaxValue, MinValue, etc. Also, I need to set all these
information into another .img file which I create separately.

   Is there a function like GetImgHeaderInfo() and SetImgHeaderInfo() which
will help me out ?

Kindly let me know.

Regards,
Anand Madhavan


From warmerdam at pobox.com  Fri Feb 21 16:54:31 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Extracting and Setting the  Entire Header of a .img
 ( HFA) File
In-Reply-To: <000e01c2d9f2$4faa5070$be7fed81@ittc.ku.edu>
References: <000e01c2d9f2$4faa5070$be7fed81@ittc.ku.edu>
Message-ID: <3E56A017.7000808@pobox.com>

Anand Madhavan wrote:
> Hi,
> 
>    I am writing an application using the APIs of gdal. What I need to do is
> basically, extract the entire Header information of a .img file, (HFA),
> which includes all the information including, the Geo-Referencing,
> Projection, MaxValue, MinValue, etc. Also, I need to set all these
> information into another .img file which I create separately.
> 
>    Is there a function like GetImgHeaderInfo() and SetImgHeaderInfo() which
> will help me out ?
> 
> Kindly let me know.

Anand,

Sorry, no there is not.  You could write such a program using the lower
level HFA API used by GDAL.  If you dig around in gdal/frmts/hfa you
can see how it is used in hfadataset.cpp (the GDAL binding on top of the
HFA API), and try to implement such a thing yourself, but it wouldn't
be a trivial undertaking.

If you just have a few items you want transported we could likely improve
the GDAL driver to preserve the info via metadata.  Note that a rough (but
lossy) form of the projection is maintained, and georeferencing should match
already using GDAL.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rogerjames99 at btinternet.com  Fri Feb 21 20:53:20 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Problems with gtiff projections
Message-ID: <000001c2da15$2d94f3a0$300aa8c0@internal.beardandsandals.co.uk>

Frank,

 

I create a new geotiff dataset, set the projection from wkt that has
projection parameters in it, and then save it. When I read it back in
the projection parameters are missing. For a transverse mercator these
are things like the lat/long origin and the false easting/northing etc. 

 

From warmerdam at pobox.com  Fri Feb 21 21:02:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Problems with gtiff projections
In-Reply-To: <000001c2da15$2d94f3a0$300aa8c0@internal.beardandsandals.co.uk>
References: <000001c2da15$2d94f3a0$300aa8c0@internal.beardandsandals.co.uk>
Message-ID: <3E56DA2A.1010605@pobox.com>

Roger James wrote:
> Frank,
> 
>  
> 
> I create a new geotiff dataset, set the projection from wkt that has 
> projection parameters in it, and then save it. When I read it back in 
> the projection parameters are missing. For a transverse mercator these 
> are things like the lat/long origin and the false easting/northing etc.
> 
>  
> 
>  From a quick look at the code the routine GTIFGetProjTRFInfo might be a 
> culprit as it always fails because the file "projop_wparm.csv" cannot be 
> found.

Roger,

What version of GDAL are you using?  How are you creating and writing
the projection to the file.  I ask because in GDAL 1.1.8 there was a bug
in writing the projection to files created with the Create() method, while
those created by the CreateCopy() were OK.

If that isn't the issue (the problem is fixed in CVS), then I will need
further details.  Generally speaking if you provide the full set of
projection parameters when writing a GeoTIFF file, then GDAL should be able
to read and interprete the file properly when reading even if projop_wparm.csv
isn't found.  If there is a glitch in this I would like to know, but I will
need details of how to reproduce.  For instance, what was the WKT you were
writing, and what is the listgeo *and* gdalinfo reports on the resulting file?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gb at cs.unc.edu  Sat Feb 22 09:54:39 2003
From: gb at cs.unc.edu (Gary Bishop)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
Message-ID: <200302221454.h1MEsdhi016059@wren.cs.unc.edu>

I'm a newbie to gdal, osr, and gis in general. I'm trying to get things 
set up so that we can use osr to create map projections for our 
python-based blind mapping system 
(http://www.cs.unc.edu/Research/assist/bats/).

I have downloaded and successfully compiled gdal-1.1.8 on my 
Windows2000 system. I also downloaded proj-4.4.5 and built it. I put 
the proj.dll on my path.

Now when I try the following little python script that I'm using for testing:

import osr
src = osr.SpatialReference()
src.SetWellKnownGeogCS('nad83')

dst=osr.SpatialReference()
dst.SetProjCS("UTM 17 (NAD83) in northern hemisphere")
dst.SetWellKnownGeogCS('nad83')
dst.SetUTM(17, True)

xfm = osr.CoordinateTransformation(src, dst)

I get an error on the last line saying:

ERROR 1: Can't find requested entry point: pj_get_def

ERROR 1: Can't find requested entry point: pj_dalloc

Any suggestions for what I'm doing wrong? I *thought* I had this 
working a few weeks ago and I was just coming back now to document the 
procedure to get a working version but I was either wrong then or have 
done something wrong now.

Thanks for any help,
Gary Bishop
Associate Professor
Computer Science
University of North Carolina
Chapel Hill, NC 27599-3175
http://www.cs.unc.edu/~gb


From warmerdam at pobox.com  Sat Feb 22 13:16:23 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
In-Reply-To: <200302221454.h1MEsdhi016059@wren.cs.unc.edu>
References: <200302221454.h1MEsdhi016059@wren.cs.unc.edu>
Message-ID: <3E57BE77.9080800@pobox.com>

Gary Bishop wrote:
> I'm a newbie to gdal, osr, and gis in general. I'm trying to get things 
> set up so that we can use osr to create map projections for our 
> python-based blind mapping system 
> (http://www.cs.unc.edu/Research/assist/bats/).
> 
> I have downloaded and successfully compiled gdal-1.1.8 on my Windows2000 
> system. I also downloaded proj-4.4.5 and built it. I put the proj.dll on 
> my path.
> 
> Now when I try the following little python script that I'm using for 
> testing:
> 
> import osr
> src = osr.SpatialReference()
> src.SetWellKnownGeogCS('nad83')
> 
> dst=osr.SpatialReference()
> dst.SetProjCS("UTM 17 (NAD83) in northern hemisphere")
> dst.SetWellKnownGeogCS('nad83')
> dst.SetUTM(17, True)
> 
> xfm = osr.CoordinateTransformation(src, dst)
> 
> I get an error on the last line saying:
> 
> ERROR 1: Can't find requested entry point: pj_get_def
> 
> ERROR 1: Can't find requested entry point: pj_dalloc
> 
> Any suggestions for what I'm doing wrong? I *thought* I had this working 
> a few weeks ago and I was just coming back now to document the procedure 
> to get a working version but I was either wrong then or have done 
> something wrong now.


Gary,

The pj_get_def and pj_dalloc entry points are not strictly necessary for
correct operation and the intention is that they should just be
considered warnings. I would hope that you would find things are still working.

You can avoid the problem entirely by utilizing the version of PROJ.4 that
is in CVS (which has the entry points) or using the CVS snapshot of GDAL
(which avoids printing out an error message for these failures).

I skimmed over the BATS pages.  It looks cool and I will have to try on the
demo some time when I am working on Windows.  I am always keen to support
fellow Python users in GIS and mapping.  What do you use for image and vector
access in BATS?  I wonder if GDAL and OGR might be of use?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gb at cs.unc.edu  Sat Feb 22 13:29:31 2003
From: gb at cs.unc.edu (Gary Bishop)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
Message-ID: <200302221829.h1MITVhi022915@wren.cs.unc.edu>

Thanks,

I figured out that the version in CVS would work. I didn't interpret 
the messages as warnings since they included the string ERROR...

The demo is a lot better with a game controller with rumble feedback. A 
good sound card helps too.

We render the vector data using OpenGL and do our point and area 
queries using OpenGL selection. For access to the vector data (all we 
support right now) my grad student found a library to read shape files. 
I forget its name. We can download shape files from the National Atlas 
and our colleagues over at the Ancient World Mapping Center can easily 
ship us there data in shape files.

I'm struggling to learn about map projects (messy stuff!). The maps 
from the National Atlas appear to be in NAD83 (which is something like 
latitude/longitude as I understand it). I want to produce a normal 
looking map (say of NC) so it looks to me like I can use the functions 
in OSR to get into another coordinate system that I haven't figured out 
yet. Then we can work with the map in that coordinate system. I've read 
about "State Planes". I'm thinking that is likely most appropriate for 
state maps.

Thanks for the interest in BATS. Right now, kids who are visually 
impaired are in 45 public school systems in NC. Almost all of them have 
NO access to maps of any kind. When the sighted kids are doing a map 
activity the kids who are blind have NOTHING to do. That drives me 
crazy. We're trying to provide some small step toward fixing that. 
We're going to give our software away with as many maps as we can stand 
to make. Then we're going to try to make some tools to make it easy for 
GIS cognizant teachers and school kids to make maps for kids who are 
blind. Hopefully some map publishers will pick up the idea and provide 
textbook maps in an accessible format.

gb

On Sat, 22 Feb 2003 13:16:23 -0500 "Frank Warmerdam" 
<warmerdam@pobox.com> wrote:

> Gary,

> The pj_get_def and pj_dalloc entry points are not strictly necessary for
> correct operation and the intention is that they should just be
> considered warnings. I would hope that you would find things are still working.

> You can avoid the problem entirely by utilizing the version of PROJ.4 that
> is in CVS (which has the entry points) or using the CVS snapshot of GDAL
> (which avoids printing out an error message for these failures).

> I skimmed over the BATS pages.  It looks cool and I will have to try on the
> demo some time when I am working on Windows.  I am always keen to support
> fellow Python users in GIS and mapping.  What do you use for image and vector
> access in BATS?  I wonder if GDAL and OGR might be of use?

> Best regards,

> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent


> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

From gb at cs.unc.edu  Sat Feb 22 13:35:37 2003
From: gb at cs.unc.edu (Gary Bishop)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
Message-ID: <200302221835.h1MIZbhi023104@wren.cs.unc.edu>

I said:
On Sat, 22 Feb 2003 13:29:31 EST "Gary Bishop" <gb@cs.unc.edu> wrote:

> I'm struggling to learn about map projects (messy stuff!).

I meant:

I'm struggling to learn about map projections (message stuff!).

gb

From warmerdam at pobox.com  Sat Feb 22 14:06:00 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
In-Reply-To: <200302221829.h1MITVhi022915@wren.cs.unc.edu>
References: <200302221829.h1MITVhi022915@wren.cs.unc.edu>
Message-ID: <3E57CA18.3000404@pobox.com>

Gary Bishop wrote:
> Thanks,
> 
> I figured out that the version in CVS would work. I didn't interpret the 
> messages as warnings since they included the string ERROR...
> 
> The demo is a lot better with a game controller with rumble feedback. A 
> good sound card helps too.
> 
> We render the vector data using OpenGL and do our point and area queries 
> using OpenGL selection. For access to the vector data (all we support 
> right now) my grad student found a library to read shape files. I forget 
> its name. We can download shape files from the National Atlas and our 
> colleagues over at the Ancient World Mapping Center can easily ship us 
> there data in shape files.

Gary,

Perhaps that's my shapelib library ... Shapelib.   It is also incorporated
into OGR which provides Shapefiles and other formats.

> I'm struggling to learn about map projects (messy stuff!). The maps from 
> the National Atlas appear to be in NAD83 (which is something like 
> latitude/longitude as I understand it). I want to produce a normal 
> looking map (say of NC) so it looks to me like I can use the functions 
> in OSR to get into another coordinate system that I haven't figured out 
> yet. Then we can work with the map in that coordinate system. I've read 
> about "State Planes". I'm thinking that is likely most appropriate for 
> state maps.

The North Carolina state plane coordinate system can be auto-created
as EPSG:32119.

eg.

import osr
x = osr.SpatialReference()
x.SetFromEPSG( 32119 )
print x.ExportAsPrettyWkt()

NAD83 is a datum (or Geographic coordinate system).  Geographic coordinate
systems used degrees of latitude and longitude.  The NAD83 aspect indicates
some detailed information about how it is tied to the ground.  Difference
datums are often offset from each other by a few meters depending on how
the original surveying was done.

Projected coordinate systems, like the north carolina state plane zone,
are measured in meters (or feet in some cases) instead of lat/long degrees
and generally give a truer reflection of the shape of things in their
locality of appropriateness.

Let me know how you do on the reprojection.  I can help as needed.

> Thanks for the interest in BATS. Right now, kids who are visually 
> impaired are in 45 public school systems in NC. Almost all of them have 
> NO access to maps of any kind. When the sighted kids are doing a map 
> activity the kids who are blind have NOTHING to do. That drives me 
> crazy. We're trying to provide some small step toward fixing that. We're 
> going to give our software away with as many maps as we can stand to 
> make. Then we're going to try to make some tools to make it easy for GIS 
> cognizant teachers and school kids to make maps for kids who are blind. 
> Hopefully some map publishers will pick up the idea and provide textbook 
> maps in an accessible format.

Hmm. It might be challenging to get much commercial interest given the small
size of the market, but it does seem like a good academic / open source
project.  There are lots of good map data sources available and with some
work it should be possible to bundle the software with locale appropriate
map data (as well as world datasets of course) with some local effort.

My son actually goes to a elementary school with a large number of visually
impaired students.  As things progress with BATS perhaps I can bundle it
with Ontario data and offer it to them for a trial.

Do you have an announcements email list or something like that I could join?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gb at cs.unc.edu  Sat Feb 22 14:33:03 2003
From: gb at cs.unc.edu (Gary Bishop)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
Message-ID: <200302221933.h1MJX3hi024997@wren.cs.unc.edu>

On Sat, 22 Feb 2003 14:06:00 -0500 "Frank Warmerdam" 
<warmerdam@pobox.com> wrote:
> Gary Bishop wrote:
> Perhaps that's my shapelib library ... Shapelib.   It is also incorporated
> into OGR which provides Shapefiles and other formats.

Yes, that's it. Cool, so we won't need 2 libraries.

> The North Carolina state plane coordinate system can be auto-created
> as EPSG:32119.

How did you know that? Where do I look to get that number?

> eg.

> import osr
> x = osr.SpatialReference()
> x.SetFromEPSG( 32119 )

My library does not appear to have the above method for 
SpatialReference. The methods I see include:

>>> dir(x)
['Clone', 'CloneGeogCS', 'ExportToPrettyWkt', 'ExportToProj4', 
'ExportToWkt', 'GetAttrValue', 'GetAu
thorityCode', 'GetAuthorityName', 'ImportFromEPSG', 'ImportFromESRI', 
'ImportFromWkt', 'IsGeographic
', 'IsProjected', 'IsSame', 'IsSameGeogCS', 'MorphFromESRI', 
'MorphToESRI', 'SetAttrValue', 'SetAuth
ority', 'SetFromUserInput', 'SetGeogCS', 'SetLinearUnits', 'SetProjCS', 
'SetProjParm', 'SetStatePlan
e', 'SetUTM', 'SetWellKnownGeogCS', 'Validate', '__del__', '__doc__', 
'__init__', '__module__', '__s
tr__', '_o']

Am I running the wrong version? Didn't set some compile time parameter?

> Hmm. It might be challenging to get much commercial interest given the small
> size of the market, but it does seem like a good academic / open source
> project.  There are lots of good map data sources available and with some
> work it should be possible to bundle the software with locale appropriate
> map data (as well as world datasets of course) with some local effort.

Agreed. If there was a commercial product it would be $$$$$$$$ like all 
the other accessibility stuff. That's why we want to give the stuff 
away. If the university can't do it, who can?

> My son actually goes to a elementary school with a large number of visually
> impaired students.  As things progress with BATS perhaps I can bundle it
> with Ontario data and offer it to them for a trial.

That would be great.

> Do you have an announcements email list or something like that I could join?

We have a list <bats-users@listserv.unc.edu> but we haven't been using 
it much because we haven't had any external users yet. It appears to me 
that you can join it at

http://listserv.unc.edu/cgi-bin/lyris.pl?join=bats-users

gb

From warmerdam at pobox.com  Sat Feb 22 14:56:27 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
In-Reply-To: <200302221933.h1MJX3hi024997@wren.cs.unc.edu>
References: <200302221933.h1MJX3hi024997@wren.cs.unc.edu>
Message-ID: <3E57D5EB.5080201@pobox.com>

>> The North Carolina state plane coordinate system can be auto-created
>> as EPSG:32119.
 >
> How did you know that? Where do I look to get that number?

Gary,

I searched for North Carolina in gdal/data/pcs.csv.

>> eg.
> 
> 
>> import osr
>> x = osr.SpatialReference()
>> x.SetFromEPSG( 32119 )
> 
> 
> My library does not appear to have the above method for 
> SpatialReference. The methods I see include:

Sorry.  I actually did try it in a separate window, but didn't
literally copy.

It should be "x.ImportFromEPSG(32119)"

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gb at cs.unc.edu  Sat Feb 22 15:08:05 2003
From: gb at cs.unc.edu (Gary Bishop)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
Message-ID: <200302222008.h1MK86hi026140@wren.cs.unc.edu>

Sorry to keep bugging you. Here is my code and the output it produces:

import osr

dst=osr.SpatialReference()
print 'r1=',dst.ImportFromEPSG( 32119 )
print 'r2=',dst.ExportToWkt()

print 'done'

$ python trypy.py
r1= 7
r2=
done

Do I need some EPSG database? Does it come with gdal?Thanks for your help
gb

From warmerdam at pobox.com  Sat Feb 22 15:17:45 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] problems with OSR
In-Reply-To: <200302222008.h1MK86hi026140@wren.cs.unc.edu>
References: <200302222008.h1MK86hi026140@wren.cs.unc.edu>
Message-ID: <3E57DAE9.3040808@pobox.com>

Gary Bishop wrote:
> Sorry to keep bugging you. Here is my code and the output it produces:
> 
> import osr
> 
> dst=osr.SpatialReference()
> print 'r1=',dst.ImportFromEPSG( 32119 )
> print 'r2=',dst.ExportToWkt()
> 
> print 'done'
> 
> $ python trypy.py
> r1= 7
> r2=
> done
> 
> Do I need some EPSG database? Does it come with gdal?Thanks for your help

Gary,

In the gdal/data directory are a bunch of .csv files containing the EPSG
tables.  In a default install they would be placed in /usr/local/share/gdal
and found their by GDAL.  If you install somewhere odd you can set the
GEOTIFF_CSV environment to point to the directory containing the .csv files.

When it succeeds ImportFromEPSG() should has a result code of 0.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rogerjames99 at btinternet.com  Sat Feb 22 19:33:17 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Problems with gtiff projections
In-Reply-To: <3E56DA2A.1010605@pobox.com>
Message-ID: <000001c2dad3$28fc1940$300aa8c0@internal.beardandsandals.co.uk>

Frank

I am using a build from CVS from two days ago. I will do some further
checking. These are the results I have at the moment.


The wkt string is generated by OSR.importFromEPSG on coord code 27700

PROJCS["OSGB 1936 / British National Grid",GEOGCS["OSGB
1936",DATUM["OSGB_1936",SPHEROID["Airy
1830",6377563.396,299.3249646,AUTHORITY["EPSG","7001"]],AUTHORITY["EPSG"
,"6277"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0
.0174532925199433],AUTHORITY["EPSG","4277"]],PROJECTION["Transverse_Merc
ator"],PARAMETER["latitude_of_origin",49],PARAMETER["central_meridian",-
2],PARAMETER["scale_factor",0.999601272],PARAMETER["false_easting",40000
0],PARAMETER["false_northing",-100000],UNIT["metre",1,AUTHORITY["EPSG","
9001"]],AUTHORITY["EPSG","27700"]]

The code that saves it does this

if (NULL == (pNewDataset = pDriver->Create(lpszPathName,
			m_iImagePixelWidth,
			m_iImagePixelHeight,
			iRasterCount,
			DataType,
			aOptions)))
{
	ErrorMessage.Format("Unable to create new GDAL dataset - %s",
CPLGetLastErrorMsg());
	throw (const char*)ErrorMessage;
}
#ifdef _DEBUG
DebugString.Format("SaveFile 1 - Projection %s\n", m_Wkt);
OutputDebugString(DebugString);
#endif
if (CE_None != pNewDataset->SetProjection(m_Wkt))
{
	ErrorMessage.Format("Unable to set projection - %s",
CPLGetLastErrorMsg());
	throw (const char*)ErrorMessage;
}

This is what comes back in when I re read the file.

PROJCS["OSGB 1936 / British National Grid",GEOGCS["OSGB
1936",DATUM["OSGB_1936",SPHEROID["Airy
1830",6377563.396,299.3249646000044,AUTHORITY["EPSG","7001"]],AUTHORITY[
"EPSG","6277"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],
AUTHORITY["EPSG","4277"]],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHO
RITY["EPSG","27700"]]

This is what listgeo says

C:\mapdata\IMAGES>listgeo test.tif
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0
         0                0                0
      ModelPixelScaleTag (1,3):
         0                0                0
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,34): "OSGB 1936 / British National Grid"
      ProjectedCSTypeGeoKey (Short,1): PCS_British_National_Grid
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      End_Of_Keys.
   End_Of_Geotiff.

PCS = 27700 (name unknown)
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    (      0.000,      0.000)
Lower Left    (      0.000,      0.000)
Upper Right   (      0.000,      0.000)
Lower Right   (      0.000,      0.000)
Center        (      0.000,      0.000)

This is what gdalinfo says:-

C:\mapdata\IMAGES>/vterrain/apis/gdal/bin/gdalinfo test.tif
Driver: GTiff/GeoTIFF
Size is 822, 822
Coordinate System is:
PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646000044,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","27700"]]
Origin = (0.000000,0.000000)
Pixel Size = (0.000000,0.000000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Lower Left  (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Upper Right (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Lower Right (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Band 1 Block=822x3 Type=Byte, ColorInterp=Red
Band 2 Block=822x3 Type=Byte, ColorInterp=Green
Band 3 Block=822x3 Type=Byte, ColorInterp=Blue

Any ideas?

Roger

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: 22 February 2003 02:02
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems with gtiff projections

Roger James wrote:
> Frank,
> 
>  
> 
> I create a new geotiff dataset, set the projection from wkt that has 
> projection parameters in it, and then save it. When I read it back in 
> the projection parameters are missing. For a transverse mercator these

> are things like the lat/long origin and the false easting/northing
etc.
> 
>  
> 
>  From a quick look at the code the routine GTIFGetProjTRFInfo might be
a 
> culprit as it always fails because the file "projop_wparm.csv" cannot
be 
> found.

Roger,

What version of GDAL are you using?  How are you creating and writing
the projection to the file.  I ask because in GDAL 1.1.8 there was a bug
in writing the projection to files created with the Create() method,
while
those created by the CreateCopy() were OK.

If that isn't the issue (the problem is fixed in CVS), then I will need
further details.  Generally speaking if you provide the full set of
projection parameters when writing a GeoTIFF file, then GDAL should be
able
to read and interprete the file properly when reading even if
projop_wparm.csv
isn't found.  If there is a glitch in this I would like to know, but I
will
need details of how to reproduce.  For instance, what was the WKT you
were
writing, and what is the listgeo *and* gdalinfo reports on the resulting
file?

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




From warmerdam at pobox.com  Sun Feb 23 00:46:54 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Problems with gtiff projections
In-Reply-To: <000001c2dad3$28fc1940$300aa8c0@internal.beardandsandals.co.uk>
References: <000001c2dad3$28fc1940$300aa8c0@internal.beardandsandals.co.uk>
Message-ID: <3E58604E.9060705@pobox.com>

Roger James wrote:
> Frank
> 
> I am using a build from CVS from two days ago. I will do some further
> checking. These are the results I have at the moment.


Roger,

As you traced, the problem is the lack of projop_wparm.csv.  I hadn't
thought that GDAL would require it because normally when resolving a PCS
code it does so using the pcs.csv table, but libgeotiff - used by GDAL -
also requires the projop_wparm.csv table.  I have incorporated it into
gdal/data in CVS.  The next nightly snapshot should include it.

Alternatively you can separately install libgeotiff 1.2.0 which installs this
an many other tables in /usr/local/share/epsg_csv.  I have this installed
which is why things worked for me.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From kamal_jo at yahoo.com  Sun Feb 23 03:15:17 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Determining Opened File Format?
In-Reply-To: <3E58604E.9060705@pobox.com>
Message-ID: <20030223081517.33665.qmail@web41102.mail.yahoo.com>

I am using GDAL to open GeoTiff files, I want a
function to tell me if the file being opened is
GeoTiff or not, so that I refuse to open it if it is
not GeoTiff.

How can I do this?


__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - forms, calculators, tips, more
http://taxes.yahoo.com/

From warmerdam at pobox.com  Sun Feb 23 03:25:43 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Determining Opened File Format?
In-Reply-To: <20030223081517.33665.qmail@web41102.mail.yahoo.com>
References: <20030223081517.33665.qmail@web41102.mail.yahoo.com>
Message-ID: <3E588587.30605@pobox.com>

Ayman Kamal wrote:
> I am using GDAL to open GeoTiff files, I want a
> function to tell me if the file being opened is
> GeoTiff or not, so that I refuse to open it if it is
> not GeoTiff.
> 
> How can I do this?

Ayman,

Call GDALGetDatasetDriver() to get back a GDALDriverH for the dataset, and
they get the short name using GDALGetDriverShortName().  Check if this is
"GTiff".

Good idea to avoid all those other dirty formats. Make them stick with GeoTIFF.

Later,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From kamal_jo at yahoo.com  Sun Feb 23 03:58:25 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Determining Opened File Format?
In-Reply-To: <3E588587.30605@pobox.com>
Message-ID: <20030223085825.83086.qmail@web41104.mail.yahoo.com>

Your technique didn't work, I tried it with two files
of type TIF ( not GeoTiff )

and your code didn't return that the file format isn't
GeoTiff

here is the code snap:
//////////////////////////////////////////////////////
   GDALDriverH hInputDriver;
   const char *szShortDriverName;
   hInputDriver = GDALGetDatasetDriver( hDataset );
   szShortDriverName = GDALGetDriverShortName(
hInputDriver );
   if ( 0 != strcmp(szShortDriverName,"GTiff") )
   {
      printf("\nThis is not a GeoTiff file format\n");
      return 1;
   }
//////////////////////////////////////////////////////



__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - forms, calculators, tips, more
http://taxes.yahoo.com/

From warmerdam at pobox.com  Sun Feb 23 04:10:06 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Determining Opened File Format?
In-Reply-To: <20030223085825.83086.qmail@web41104.mail.yahoo.com>
References: <20030223085825.83086.qmail@web41104.mail.yahoo.com>
Message-ID: <3E588FEE.1080402@pobox.com>

Ayman Kamal wrote:
> Your technique didn't work, I tried it with two files
> of type TIF ( not GeoTiff )
> 
> and your code didn't return that the file format isn't
> GeoTiff
> 
> here is the code snap:
> //////////////////////////////////////////////////////
>    GDALDriverH hInputDriver;
>    const char *szShortDriverName;
>    hInputDriver = GDALGetDatasetDriver( hDataset );
>    szShortDriverName = GDALGetDriverShortName(
> hInputDriver );
>    if ( 0 != strcmp(szShortDriverName,"GTiff") )
>    {
>       printf("\nThis is not a GeoTiff file format\n");
>       return 1;
>    }
> //////////////////////////////////////////////////////

Ayman,

TIFF and GeoTIFF both go through the GTiff driver.  There is no certain
way of establishing that a TIFF file is not also a GeoTIFF file through
GDAL, but if the driver is "GTiff", and projection string is "" and the
geotransform is [0,1,0,0,0,1] then it is likely not a geotiff file.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From kamal_jo at yahoo.com  Mon Feb 24 04:52:42 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Error messages
In-Reply-To: <3E588FEE.1080402@pobox.com>
Message-ID: <20030224095242.48002.qmail@web41110.mail.yahoo.com>

How can I disable error messages from being displayed?


__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - forms, calculators, tips, more
http://taxes.yahoo.com/

From dron at ak4719.spb.edu  Mon Feb 24 06:19:00 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] JPEG2000 driver updated to JasPer 1.700.2
Message-ID: <20030224111900.GA9072@ak4719.spb.edu>

Hi, folks,

I have updated JPEG2000 driver today and now JasPer 1.700.2 required for
compiling GDAL with JasPer based JPEG2000 support.

IMPORTANT NOTE: you cannot use upstream JasPer library from its website
because of bug in the code. You must take modified version here:

ftp://ftp.remotesensing.org/gdal/jasper-1.700.2.uuid.tar.gz

This modified version also contains important additions required for
supporting GeoJP2 extension. Saving and reading projection information and
georeferencing possible with this version only.

					Best regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Mon Feb 24 10:04:27 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Error messages
In-Reply-To: <20030224095242.48002.qmail@web41110.mail.yahoo.com>
References: <20030224095242.48002.qmail@web41110.mail.yahoo.com>
Message-ID: <3E5A347B.6010008@pobox.com>

Ayman Kamal wrote:
> How can I disable error messages from being displayed?
> 


Ayman,

In C or C++ call "GDALSetErrorHandler( CPLQuietErrorHandler );".  In general
you can install your own handler that displays the error in any desired
way.  Note that custom error handlers should not in general throw an
exception as GDAL won't necessariliy get to do proper cleanup on the way out
then.   The CPLQuietErrorHandler() is just an error handler that does not
report the error to the user.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ben at vterrain.org  Mon Feb 24 18:55:03 2003
From: ben at vterrain.org (VTP)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Projection import from ArcInfo grid (adf)
In-Reply-To: <5.2.0.9.0.20030217121045.009f47b0@pop.preferred.com>
Message-ID: <IHEAIHOJLJNLHCKGKJEDGEEOCAAA.ben@vterrain.org>

I'm using GDALOpen() to read an ArcInfo binary grid file (a directory of
.adf files).  The projection is presumably specified in the file "prj.adf",
which contains the following:

Projection    LAMBERT
Zunits        NO
Units         METERS
Spheroid      CLARKE1866
Xshift        0.0000000000
Yshift        0.0000000000
Parameters
 9 56  0.000 /* 1st standard parallel
 11  0  0.000 /* 2nd standard parallel
-84 20  0.000 /* central meridian
 10 28  0.000 /* latitude of projection's origin
500000.00000 /* false easting (meters)
271820.52200 /* false northing (meters)

The dataset opens successfully and allows me to read the grid values, but
when i call GetProjectionRef(), it gives me the following string:

	"LOCAL_CS["LAMBERT",UNIT["METERS",1]]"

This seems quite wrong; it's picking up the Lambert but missing the rest of
the projection description.

This is with GDAL 1.1.8 (not from CVS).  Am i doing something wrong or is
this an issue with GDAL?

Thanks,
Ben


From warmerdam at pobox.com  Tue Feb 25 00:00:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] Projection import from ArcInfo grid (adf)
In-Reply-To: <IHEAIHOJLJNLHCKGKJEDGEEOCAAA.ben@vterrain.org>
References: <IHEAIHOJLJNLHCKGKJEDGEEOCAAA.ben@vterrain.org>
Message-ID: <3E5AF853.6050909@pobox.com>

VTP wrote:
> I'm using GDALOpen() to read an ArcInfo binary grid file (a directory of
> .adf files).  The projection is presumably specified in the file "prj.adf",
> which contains the following:
> 
> Projection    LAMBERT
> Zunits        NO
> Units         METERS
> Spheroid      CLARKE1866
> Xshift        0.0000000000
> Yshift        0.0000000000
> Parameters
>  9 56  0.000 /* 1st standard parallel
>  11  0  0.000 /* 2nd standard parallel
> -84 20  0.000 /* central meridian
>  10 28  0.000 /* latitude of projection's origin
> 500000.00000 /* false easting (meters)
> 271820.52200 /* false northing (meters)
> 
> The dataset opens successfully and allows me to read the grid values, but
> when i call GetProjectionRef(), it gives me the following string:
> 
> 	"LOCAL_CS["LAMBERT",UNIT["METERS",1]]"
> 
> This seems quite wrong; it's picking up the Lambert but missing the rest of
> the projection description.
> 
> This is with GDAL 1.1.8 (not from CVS).  Am i doing something wrong or is
> this an issue with GDAL?


Ben,

OGRSpatialReference has very limited support for the variations possible with
the old style (Arc/Info 7) ESRI .prj files.  I have incorporated support for
LAMBERT projections in CVS this evening, as well as a few fixes to the datum
and spheroid handling.

The LOCAL_CS[] is what things fall back to when the projection is not supported.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From slepnev_v at newmail.ru  Tue Feb 25 01:25:23 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] plugging in JasPer
Message-ID: <000001c2dc96$b0632d50$3e4560c3@sst>

Hi,

there seem to be some problems using the JasPer-based JPEG2000 support in
GDAL. I am using JasPer version 1.700.1 .

Here's what is in the file gdal\nmake.opt:

#JASPER_INCLUDE = -I$(JASPER_DIR)\src\libjasper\include\jasper
#JASPER_LIB = $(JASPER_DIR)src\msvc\Win32_Release\libjasper.lib

Here's what those lines should look like, to the best of my knowledge:

#JASPER_INCLUDE = -I$(JASPER_DIR)\src\libjasper\include
#JASPER_LIB = $(JASPER_DIR)\src\msvc\Win32_Release\libjasper.lib

(note the missing backslash in the second line!)
Otherwise, I get "cannot find file" errors for JasPer files.

After making those minor changes, I try to build GDAL with JPEG2000 support.
And this is what I get then:

E:\vova\cvs-1-11-1p1\gdal\frmts>call ..\submake.bat jpeg2000
	cl /nologo
/Ox -I..\..\port -I..\..\ogr -I..\..\core -IE:\vova\jasper-1.700.1\src\libja
sper\include /DWIN32 -DFRMT_jpeg2000 /c jpeg2000dataset.cpp
jpeg2000dataset.cpp
E:\vova\jasper-1.700.1\src\libjasper\include\jasper/jas_config.h(132) :
warning C4005: 'HAVE_VPRINTF' : macro redefinition
        ..\..\port\cpl_config.h(6) : see previous definition of
'HAVE_VPRINTF'
E:\vova\jasper-1.700.1\src\libjasper\include\jasper/jas_config.h(141) :
warning C4005: 'STDC_HEADERS' : macro redefinition
        ..\..\port\cpl_config.h(11) : see previous definition of
'STDC_HEADERS'
E:\vova\jasper-1.700.1\src\libjasper\include\jasper/jas_types.h(159) : fatal
error C1083: Cannot open include file: 'stdbool.h': No such file or
directory

Now this is an error I can't fix very quickly :-) so I'm writing this to
gdal-dev. Is this the case when I should do some extra steps after
installing and building JasPer to use it correctly? If so, the
responsibility for such steps should lie on GDAL, not me... as far as I
grasp the matter :-)

Vladimir Slepnev
Programmer, RDC ScanEx


From slepnev_v at newmail.ru  Tue Feb 25 01:43:31 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] new version of jasper
Message-ID: <000001c2dc99$39008e80$254560c3@sst>

As a postscript to my previous letter...

I just installed the new version of JasPer (1.700.2.uuid) from the
remotesensing.org website. Unlike the previous version I used (1.700.1, from
the JasPer website), this one even refuses to build through MSVC. I open the
file src\msvc\jasper.dsw and try to build all the targets, and here is what
I get:


--------------------Configuration: libjasper - Win32
Release--------------------
Compiling...
bmp_cod.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
bmp_dec.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
bmp_enc.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_cm.c
E:\vova\jasper-1.700.2.uuid\src\libjasper\base\jas_cm.c(117) : fatal error
C1083: Cannot open include file: 'jasper/jas_config.h': No such file or
directory
jas_debug.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_getopt.c
..\libjasper\include\jasper/jas_getopt.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_icc.c
E:\vova\jasper-1.700.2.uuid\src\libjasper\base\jas_icc.c(112) : fatal error
C1083: Cannot open include file: 'jasper/jas_config.h': No such file or
directory
jas_iccdata.c
E:\vova\jasper-1.700.2.uuid\src\libjasper\base\jas_iccdata.c(111) : fatal
error C1083: Cannot open include file: 'jasper/jas_config.h': No such file
or directory
jas_image.c
..\libjasper\include\jasper/jas_math.h(126) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jas_init.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_malloc.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_seq.c
..\libjasper\include\jasper/jas_seq.h(126) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jas_stream.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_string.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_tvp.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jas_version.c
..\libjasper\include\jasper/jas_version.h(120) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jp2_cod.c
..\libjasper\include\jasper/jas_stream.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jp2_dec.c
..\libjasper\include\jasper/jas_image.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jp2_enc.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_bs.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_cs.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_dec.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_enc.c
..\libjasper\include\jasper/jas_string.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_mct.c
..\libjasper\include\jasper/jas_seq.h(126) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpc_mqcod.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_mqdec.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_mqenc.c
..\libjasper\include\jasper/jas_stream.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_qmfb.c
..\libjasper\include\jasper/jas_fix.h(130) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpc_t1cod.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_t1dec.c
..\libjasper\include\jasper/jas_fix.h(130) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpc_t1enc.c
..\libjasper\include\jasper/jas_fix.h(130) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpc_t2cod.c
..\libjasper\include\jasper/jas_math.h(126) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpc_t2dec.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_t2enc.c
..\libjasper\include\jasper/jas_fix.h(130) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpc_tagtree.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_tsfb.c
..\libjasper\include\jasper/jas_malloc.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
jpc_util.c
..\libjasper\include\jasper/jas_math.h(126) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpg_dummy.c
..\libjasper\include\jasper/jas_tvp.h(124) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
jpg_val.c
..\libjasper\include\jasper/jas_stream.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
mif_cod.c
..\libjasper\include\jasper/jas_tvp.h(124) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
pgx_cod.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
pgx_dec.c
..\libjasper\include\jasper/jas_tvp.h(124) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
pgx_enc.c
..\libjasper\include\jasper/jas_tvp.h(124) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
pnm_cod.c
..\libjasper\include\jasper/jas_math.h(126) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
pnm_dec.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
pnm_enc.c
..\libjasper\include\jasper/jas_types.h(122) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
ras_dec.c
..\libjasper\include\jasper/jas_stream.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
ras_enc.c
..\libjasper\include\jasper/jas_image.h(126) : fatal error C1083: Cannot
open include file: 'jasper/jas_config.h': No such file or directory
Error executing cl.exe.

imgcmp.exe - 48 error(s), 0 warning(s)
--------------------Configuration: libjasper - Win32
Debug--------------------
Compiling...
bmp_cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
bmp_dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
bmp_enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_cm.c
E:\vova\jasper-1.700.2.uuid\src\libjasper\base\jas_cm.c(117) : fatal error
C1083: Cannot open include file: 'jasper/jas_config.h': No such file or
directory
jas_debug.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_getopt.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_getopt.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_icc.c
E:\vova\jasper-1.700.2.uuid\src\libjasper\base\jas_icc.c(112) : fatal error
C1083: Cannot open include file: 'jasper/jas_config.h': No such file or
directory
jas_iccdata.c
E:\vova\jasper-1.700.2.uuid\src\libjasper\base\jas_iccdata.c(111) : fatal
error C1083: Cannot open include file: 'jasper/jas_config.h': No such file
or directory
jas_image.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_math.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_init.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_malloc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_seq.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_seq.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_stream.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_string.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_tvp.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jas_version.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_version.h(120)
: fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No
such file or directory
jp2_cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_stream.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jp2_dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_image.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jp2_enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_bs.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_cs.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_string.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_mct.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_seq.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_mqcod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_mqdec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_mqenc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_stream.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_qmfb.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_fix.h(130) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_t1cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_t1dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_fix.h(130) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_t1enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_fix.h(130) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_t2cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_math.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_t2dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_t2enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_fix.h(130) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_tagtree.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_tsfb.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_malloc.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpc_util.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_math.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpg_dummy.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_tvp.h(124) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
jpg_val.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_stream.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
mif_cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_tvp.h(124) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
pgx_cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
pgx_dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_tvp.h(124) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
pgx_enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_tvp.h(124) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
pnm_cod.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_math.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
pnm_dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
pnm_enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_types.h(122) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
ras_dec.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_stream.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
ras_enc.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jas_image.h(126) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
Error executing cl.exe.

imgcmp.exe - 48 error(s), 0 warning(s)
--------------------Configuration: imginfo - Win32
Release--------------------
Compiling...
imginfo.c
..\libjasper\include\jasper/jasper.h(114) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
Error executing cl.exe.

imginfo.exe - 1 error(s), 0 warning(s)
--------------------Configuration: imginfo - Win32 Debug--------------------
Compiling...
imginfo.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jasper.h(114) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
Error executing cl.exe.

imginfo.exe - 1 error(s), 0 warning(s)
--------------------Configuration: jasper - Win32
Release--------------------
Compiling...
jasper.c
..\libjasper\include\jasper/jasper.h(114) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
Error executing cl.exe.

jasper.exe - 1 error(s), 0 warning(s)
--------------------Configuration: jasper - Win32 Debug--------------------
Compiling...
jasper.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jasper.h(114) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
Error executing cl.exe.

jasper.exe - 1 error(s), 0 warning(s)
--------------------Configuration: jiv - Win32 Release--------------------
Compiling...
jiv.c
..\libjasper\include\jasper/jasper.h(114) : fatal error C1083: Cannot open
include file: 'jasper/jas_config.h': No such file or directory
Error executing cl.exe.

jiv.exe - 1 error(s), 0 warning(s)
--------------------Configuration: jiv - Win32 Debug--------------------
Compiling...
jiv.c
e:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper\jasper.h(114) :
fatal error C1083: Cannot open include file: 'jasper/jas_config.h': No such
file or directory
Error executing cl.exe.

jiv.exe - 1 error(s), 0 warning(s)



Funny, huh?
Needless to say, this doesn't drive away the problems mentioned in my
previous letter.

Vladimir Slepnev
Programmer, RDC ScanEx


From dron at ak4719.spb.edu  Tue Feb 25 15:08:53 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] new version of jasper
In-Reply-To: <000001c2dc99$39008e80$254560c3@sst>
References: <000001c2dc99$39008e80$254560c3@sst>
Message-ID: <20030225200853.GB6054@ak4719.spb.edu>

On Tue, Feb 25, 2003 at 09:43:31AM +0300, Vladimir Slepnev wrote:
> I just installed the new version of JasPer (1.700.2.uuid) from the
> remotesensing.org website. Unlike the previous version I used (1.700.1, from
> the JasPer website), this one even refuses to build through MSVC. I open the
> file src\msvc\jasper.dsw and try to build all the targets, and here is what
> I get:

...

> Funny, huh?

Yes.
`make distclean' removes jas_config.h.
Fixed, new tarball reuploaded (NOTE: this problem affects users without
GNU autotools only. Linux users don't need download library again).

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Tue Feb 25 15:03:21 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] plugging in JasPer
In-Reply-To: <000001c2dc96$b0632d50$3e4560c3@sst>
References: <000001c2dc96$b0632d50$3e4560c3@sst>
Message-ID: <20030225200321.GA6054@ak4719.spb.edu>

Vladimir,

On Tue, Feb 25, 2003 at 09:25:23AM +0300, Vladimir Slepnev wrote:
> there seem to be some problems using the JasPer-based JPEG2000 support in
> GDAL. I am using JasPer version 1.700.1 .

JasPer support in GDAL has several side effects, so I recommend you
read this list where I will post JasPer-related announces and follow my
instructions exactly. Building notes in GDAL's CVS tree always will be
up-to-date as well (see /core/gdal_building.dox).
Please, don't use new JasPer versions before my announce. In near future
upstream JasPer library will not be a good solution for GDAL users, we
are maintain our modified version at

ftp://ftp.remotesensing.org/gdal/jasper-<version>.tar.gz

> Here's what is in the file gdal\nmake.opt:
> 
> #JASPER_INCLUDE = -I$(JASPER_DIR)\src\libjasper\include\jasper
> #JASPER_LIB = $(JASPER_DIR)src\msvc\Win32_Release\libjasper.lib
> 
> Here's what those lines should look like, to the best of my knowledge:
> 
> #JASPER_INCLUDE = -I$(JASPER_DIR)\src\libjasper\include
> #JASPER_LIB = $(JASPER_DIR)\src\msvc\Win32_Release\libjasper.lib

You are right, fixed.

> After making those minor changes, I try to build GDAL with JPEG2000 support.
> And this is what I get then:
> 
> E:\vova\cvs-1-11-1p1\gdal\frmts>call ..\submake.bat jpeg2000
> 	cl /nologo
> /Ox -I..\..\port -I..\..\ogr -I..\..\core -IE:\vova\jasper-1.700.1\src\libja
> sper\include /DWIN32 -DFRMT_jpeg2000 /c jpeg2000dataset.cpp
> jpeg2000dataset.cpp
> E:\vova\jasper-1.700.1\src\libjasper\include\jasper/jas_config.h(132) :
> warning C4005: 'HAVE_VPRINTF' : macro redefinition
>         ..\..\port\cpl_config.h(6) : see previous definition of
> 'HAVE_VPRINTF'
> E:\vova\jasper-1.700.1\src\libjasper\include\jasper/jas_config.h(141) :
> warning C4005: 'STDC_HEADERS' : macro redefinition
>         ..\..\port\cpl_config.h(11) : see previous definition of
> 'STDC_HEADERS'
> E:\vova\jasper-1.700.1\src\libjasper\include\jasper/jas_types.h(159) : fatal
> error C1083: Cannot open include file: 'stdbool.h': No such file or
> directory

Should not happens with our JasPer modification.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From rogerjames99 at btinternet.com  Tue Feb 25 15:54:43 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] MapInfo grid (.mig) files
Message-ID: <000301c2dd10$200503d0$300aa8c0@internal.beardandsandals.co.uk>

I know this is slightly off topic. But has anybody come across any means
of importing MapInfo grid (.mig) files and exporting them into other
raster formats (e.g. geotiff or a known DEM format). If not does anyone
have information on the mig format so that I can code up an importer
myself. I have searched the MapInfo lists but have only come across
people asking this question not answers.

 

Roger

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030225/b3a6ec48/attachment.html
From slepnev_v at newmail.ru  Tue Feb 25 04:23:43 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] jasper
Message-ID: <000001c2dcaf$992cc1f0$384560c3@sst>

Hi,

unfortunately, the problem of building GDAL with JPEG2000 support turned on
refuses to go away. I installed the new version of JasPer from the
remotesensing.org website, built it (successfully) and then tried to build
GDAL. Here is what I got (I have Windows 2000 and MSVC 6.0):

E:\vova\cvs-1-11-1p1\gdal\frmts>call ..\submake.bat jpeg2000
	cl /nologo
/Ox -I..\..\port -I..\..\ogr -I..\..\core -IE:\vova\jasper-1.700.2.uuid\src\
libjasper\include /DWIN32 -DFRMT_jpeg2000 /c jpeg2000dataset.cpp
jpeg2000dataset.cpp
E:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper/jas_config.h(132) :
warning C4005: 'HAVE_VPRINTF' : macro redefinition
        ..\..\port\cpl_config.h(6) : see previous definition of
'HAVE_VPRINTF'
E:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper/jas_config.h(141) :
warning C4005: 'STDC_HEADERS' : macro redefinition
        ..\..\port\cpl_config.h(11) : see previous definition of
'STDC_HEADERS'
E:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper/jas_types.h(186) :
fatal error C1083: Cannot open include file: 'stdint.h': No such file or
directory

Last time I saw this problem, it couldn't find stdbool.h :-)
What's that? Is this a Win32/MSVC-specific problem?

Vladimir Slepnev
Programmer, RDC ScanEx


From dron at ak4719.spb.edu  Tue Feb 25 17:44:41 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] jasper
In-Reply-To: <000001c2dcaf$992cc1f0$384560c3@sst>
References: <000001c2dcaf$992cc1f0$384560c3@sst>
Message-ID: <20030225224441.GA22387@ak4719.spb.edu>

On Tue, Feb 25, 2003 at 12:23:43PM +0300, Vladimir Slepnev wrote:
> unfortunately, the problem of building GDAL with JPEG2000 support turned on
> refuses to go away. I installed the new version of JasPer from the
> remotesensing.org website, built it (successfully) and then tried to build
> GDAL. Here is what I got (I have Windows 2000 and MSVC 6.0):
> 
> E:\vova\cvs-1-11-1p1\gdal\frmts>call ..\submake.bat jpeg2000
> 	cl /nologo
> /Ox -I..\..\port -I..\..\ogr -I..\..\core -IE:\vova\jasper-1.700.2.uuid\src\
> libjasper\include /DWIN32 -DFRMT_jpeg2000 /c jpeg2000dataset.cpp
> jpeg2000dataset.cpp
> E:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper/jas_config.h(132) :
> warning C4005: 'HAVE_VPRINTF' : macro redefinition
>         ..\..\port\cpl_config.h(6) : see previous definition of
> 'HAVE_VPRINTF'
> E:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper/jas_config.h(141) :
> warning C4005: 'STDC_HEADERS' : macro redefinition
>         ..\..\port\cpl_config.h(11) : see previous definition of
> 'STDC_HEADERS'
> E:\vova\jasper-1.700.2.uuid\src\libjasper\include\jasper/jas_types.h(186) :
> fatal error C1083: Cannot open include file: 'stdint.h': No such file or
> directory
> 
> Last time I saw this problem, it couldn't find stdbool.h :-)
> What's that? Is this a Win32/MSVC-specific problem?

This stuff configured via jas_config.h file. But for MSVC environment
there is special hook: JAS_WIN_MSVC_BUILD should be defined and
jas_config2.h used instead of jas_config.h. jas_config2.h contains
definitions, appropriate for MSVC. JAS_WIN_MSVC_BUILD defined in project
files, so you should get a clean build process. I don't know, why it
doesn't work, but I will test JasPer build on Windows as soon as
possible.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From slepnev_v at newmail.ru  Tue Feb 25 16:40:37 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] more jasper
Message-ID: <000001c2dd16$89ed1430$304560c3@sst>

Hi,

when I added the line

#define JAS_WIN_MSVC_BUILD

to the file frmts\jpeg2000\jpeg2000dataset.cpp, some problems went away and
GDAL built OK. Of course, this is not a good solution :-) The next problem
is that I could not read any jpeg2000 files, the program always crashes on
the GDALOpen call.

It seems that this feature really needs testing in the Win32 environment.

And one more question: what is the appropriate JPEG2000 GDAL driver code,
"JPEG" or "JPEG2000"? The documentation says "JPEG", but
GDALRegister_JPEG2000() says "JPEG2000".

Vladimir Slepnev
Programmer, RDC ScanEx


From dron at ak4719.spb.edu  Wed Feb 26 05:10:13 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] more jasper
In-Reply-To: <000001c2dd16$89ed1430$304560c3@sst>
References: <000001c2dd16$89ed1430$304560c3@sst>
Message-ID: <20030226101013.GA11437@ak4719.spb.edu>

On Wed, Feb 26, 2003 at 12:40:37AM +0300, Vladimir Slepnev wrote:
> GDAL built OK. Of course, this is not a good solution :-) The next problem
> is that I could not read any jpeg2000 files, the program always crashes on
> the GDALOpen call.

I will take a look.

> And one more question: what is the appropriate JPEG2000 GDAL driver code,
> "JPEG" or "JPEG2000"? The documentation says "JPEG", but
> GDALRegister_JPEG2000() says "JPEG2000".

JPEG driver is based on IJG libjpeg library. It is implementation of the
`old' JFIF compression standard. JPEG2000 introduces completely new
compression scheme and file layout. GDAL has two JPEG2000 drivers:
`JPEG2000' based on free JasPer library and `JP2KAK' based on non-free
Kakadu library.

JPEG and JPEG2000 are different drivers and you don't need JPEG2000 if
you only need to handle JFIF files.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alessandro_amici at telespazio.it  Wed Feb 26 06:47:34 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
Message-ID: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01>

hi,

> There is a support for creating ENVI datasets (with "ENVI" driver).
> At the time there is a limitation: driver cannot save projection and
> geotransform in Mapinfo format, but this issue will be resolved shortly.
> Also I want add an option to select the interleaving type.
> 
> Everybody interested in this driver may start testing.

i started testing with python apps and ENVI write support works nicely.

in addition to the WIP-items you mentioned i'd like to point out to you 
one more useful item to implement: 
an option to _append_ the '.hdr' extension to the full name i.e.
	image.bin -> image.bin.hdr

thanks,
alessandro

PS: sorry for the delay, i was run over by a virus!

From alessandro_amici at telespazio.it  Wed Feb 26 06:49:09 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Error messages
Message-ID: <A183DF60AC72D5119B990002A5749CB30392A2EC@ROMADG-MAIL01>

hi,

> In C or C++ call "GDALSetErrorHandler( CPLQuietErrorHandler );".

is there any way to do it from python?
i don't need to attach an handler, just to silence the errors.

thanks,
alessandro

From dron at ak4719.spb.edu  Wed Feb 26 08:06:04 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01>
Message-ID: <20030226130604.GA3738@ak4719.spb.edu>

Amici,

On Wed, Feb 26, 2003 at 12:47:34PM +0100, Amici Alessandro wrote:
> in addition to the WIP-items you mentioned i'd like to point out to you 
> one more useful item to implement: 
> an option to _append_ the '.hdr' extension to the full name i.e.
> 	image.bin -> image.bin.hdr

Sorry, it is not clear for me, what option do you want.
ENVI driver produces two files, one with .img suffix and other with .hdr
suffix. Base parts of names should be equal.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From schut at sarvision.com  Wed Feb 26 08:31:02 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <20030226130604.GA3738@ak4719.spb.edu>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01> <20030226130604.GA3738@ak4719.spb.edu>
Message-ID: <200302261431.02036.schut@sarvision.com>

On Wednesday 26 February 2003 14:06, Andrey Kiselev wrote:
> Amici,
>
> On Wed, Feb 26, 2003 at 12:47:34PM +0100, Amici Alessandro wrote:
> > in addition to the WIP-items you mentioned i'd like to point out to you
> > one more useful item to implement:
> > an option to _append_ the '.hdr' extension to the full name i.e.
> > 	image.bin -> image.bin.hdr
>
> Sorry, it is not clear for me, what option do you want.
> ENVI driver produces two files, one with .img suffix and other with .hdr
> suffix. Base parts of names should be equal.

As a regular user of ENVI (from 3.2 till the recent 3.6) I've always had the 
feeling that envi does not produce the .img suffix as default. If I save a 
file as ENVI native file, the file does not get a standard extension and the 
.hdr always has the complete binary filename (including its suffix) as 
prefix. If you have a image.bin and a belonging image.hdr, envi will probably 
not automatically associate the hdr file with the image.bin file. It would if 
they were called 'image' and 'image.hdr', or 'image.bin' and 'image.bin.hdr'.

Ok I decided to check this last opinion I just wrote down before sending this 
mail, and it appears to be not entirely right.
1. If you create a file with envi, the header file is the *complete* image 
filename with a .hdr extension (so: image.bin.hdr, if you give image.bin as 
file name)
2. However, if you have a image.bin and image.hdr, envi will recognize the hdr 
file as belonging to image.bin. This also works for image.bla, but not for 
'image.whatever.yoyo'. So it appears that envi simply tests 2 cases: 
filename+suffix+.hdr, and filename+.hdr.
However, the default is what Amici is trying to tell us: image.bin and 
image.bin.hdr (or without the '.bin'). 

In other words, imho Amici is right.

-- 
______________________________________
Vincent Schut (schut@sarvision.com)
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From azure at iki.fi  Wed Feb 26 08:50:19 2003
From: azure at iki.fi (Hannu Koivisto)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] large file support, gdal_merge with 8bit images (was: GDAL data
 model...)
In-Reply-To: <3E4CFA99.90305@pobox.com> (Frank Warmerdam's message of "Fri,
 14 Feb 2003 09:18:01 -0500")
References: <87wuk5qy6d.fsf@lynx.ionific.com> <3E4BC718.3020509@pobox.com>
	<87d6lvox2b.fsf@lynx.ionific.com> <3E4CFA99.90305@pobox.com>
Message-ID: <87d6lfb17o.fsf_-_@lynx.ionific.com>

Frank Warmerdam <warmerdam@pobox.com> writes:

> I would suggest using the gdal_merge.py script.  This will build
> a mosaic from a set of georeferenced input files.  You would need
> to have .wld (ESRI world files) for each of your PNG chunks for it
> to place them properly in the result.

I couldn't convince myself that gdal_merge would do the right thing
with my images so I went with the netpbm method.  I took a look at
gdal_merge code and it seemed to me that if the images are 8bit
images with colormaps, gdal does not make the result 24bit if
neccessary (not to speak about quantization which was required in
my case since I do not want a 24bit result), instead it blindly
uses the colormap of the first image.

> file.  You will likely need to assemble the files into an uncompressed
> file (perhaps of some format like Erdas Imagine - driver=HFA) and
> then convert that to a compressed GeoTIFF file using gdal_translate
> as a separate step.

I have now assembled the files into an uncompressed PNG.
Unfortunately, if I try to convert that to a compressed GeoTIFF
file using gdal_translate, it cannot open the input file because it
is larger than 4GB, i.e. it does not seem use large file support.
From dron at ak4719.spb.edu  Wed Feb 26 09:35:01 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <200302261431.02036.schut@sarvision.com>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01> <20030226130604.GA3738@ak4719.spb.edu> <200302261431.02036.schut@sarvision.com>
Message-ID: <20030226143501.GA1128@ak4719.spb.edu>

On Wed, Feb 26, 2003 at 02:31:02PM +0100, Vincent Schut wrote:
> file as belonging to image.bin. This also works for image.bla, but not for 
> 'image.whatever.yoyo'. So it appears that envi simply tests 2 cases: 
> filename+suffix+.hdr, and filename+.hdr.

Note, that ENVI driver recognizes both these cases as well.

> However, the default is what Amici is trying to tell us: image.bin and 
> image.bin.hdr (or without the '.bin'). 

Ok, now I'm realize. Create <filename>.<ext> and <filename>.<ext>.hdr
instead of <filename>.img and <filename>.hdr. But does this really
important? :-)


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From schut at sarvision.com  Wed Feb 26 10:08:22 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <20030226143501.GA1128@ak4719.spb.edu>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01> <200302261431.02036.schut@sarvision.com> <20030226143501.GA1128@ak4719.spb.edu>
Message-ID: <200302261608.22172.schut@sarvision.com>

On Wednesday 26 February 2003 15:35, Andrey Kiselev wrote:
> On Wed, Feb 26, 2003 at 02:31:02PM +0100, Vincent Schut wrote:
> > file as belonging to image.bin. This also works for image.bla, but not
> > for 'image.whatever.yoyo'. So it appears that envi simply tests 2 cases:
> > filename+suffix+.hdr, and filename+.hdr.
>
> Note, that ENVI driver recognizes both these cases as well.
>
> > However, the default is what Amici is trying to tell us: image.bin and
> > image.bin.hdr (or without the '.bin').
>
> Ok, now I'm realize. Create <filename>.<ext> and <filename>.<ext>.hdr
> instead of <filename>.img and <filename>.hdr. But does this really
> important? :-)

Well, to join the discussion really good now :-), it matters not really of 
course, from the envi point of view. Envi will open your files, one way or 
the other.
It becomes a different thing if you have written your own idl programs (envi 
is written in idl) that automatically process some envi files and that do not 
use the native envi open functions to open these files + headers, but have 
their own opening functions that are a bit more specific.
I don't, I usually write these programs in C (+gdal) once I tested the 
algorithm in idl/envi :-). But maybe others have...? Btw, I thought the .img 
suffix was Erdas native/default, not ENVI's ? If you ask me, I think it might 
be good to keep as close as possible to the native driver's format, in envi's 
case: just add the .hdr suffix. But it is not a *real* problem, I directly 
admit.

-- 
______________________________________
Vincent Schut (schut@sarvision.com)
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From dron at ak4719.spb.edu  Wed Feb 26 10:48:39 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <200302261608.22172.schut@sarvision.com>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01> <200302261431.02036.schut@sarvision.com> <20030226143501.GA1128@ak4719.spb.edu> <200302261608.22172.schut@sarvision.com>
Message-ID: <20030226154839.GA9351@ak4719.spb.edu>

On Wed, Feb 26, 2003 at 04:08:22PM +0100, Vincent Schut wrote:
> > Ok, now I'm realize. Create <filename>.<ext> and <filename>.<ext>.hdr
> > instead of <filename>.img and <filename>.hdr. But does this really
> > important? :-)
> 
> It becomes a different thing if you have written your own idl programs (envi 
> is written in idl) that automatically process some envi files and that do not 
> use the native envi open functions to open these files + headers, but have 
> their own opening functions that are a bit more specific.

Ok. I shall add an appropriate option for more flexibility.

> I don't, I usually write these programs in C (+gdal) once I tested the 
> algorithm in idl/envi :-). But maybe others have...? Btw, I thought the .img 
> suffix was Erdas native/default, not ENVI's ?

Sample datasets, supplied with ENVI, has .img suffix (and named as <file>.img,
<file>.hdr)


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From schut at sarvision.com  Wed Feb 26 11:21:03 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <20030226154839.GA9351@ak4719.spb.edu>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01> <200302261608.22172.schut@sarvision.com> <20030226154839.GA9351@ak4719.spb.edu>
Message-ID: <200302261721.03569.schut@sarvision.com>

On Wednesday 26 February 2003 16:48, Andrey Kiselev wrote:

>
> Ok. I shall add an appropriate option for more flexibility.

It's always good to have more flexibility :-)
I hope this solves Amici's problems.

> Sample datasets, supplied with ENVI, has .img suffix (and named as
> <file>.img, <file>.hdr)

Now I see where the confusion started...


-- 
______________________________________
Vincent Schut (schut@sarvision.com)
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From warmerdam at pobox.com  Wed Feb 26 11:29:02 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] large file support, gdal_merge with 8bit images (was:
 GDAL data model...)
In-Reply-To: <87d6lfb17o.fsf_-_@lynx.ionific.com>
References: <87wuk5qy6d.fsf@lynx.ionific.com> <3E4BC718.3020509@pobox.com>	<87d6lvox2b.fsf@lynx.ionific.com> <3E4CFA99.90305@pobox.com> <87d6lfb17o.fsf_-_@lynx.ionific.com>
Message-ID: <3E5CEB4E.60008@pobox.com>

Hannu Koivisto wrote:
> I have now assembled the files into an uncompressed PNG.

Hannu,

Is there such a thing as an uncompressed PNG file?  I believe all
image segments in PNG files are internally compressed using zlib.

> Unfortunately, if I try to convert that to a compressed GeoTIFF
> file using gdal_translate, it cannot open the input file because it
> is larger than 4GB, i.e. it does not seem use large file support.
>>From the output of strace:
> 
> 30339 open("foo.png", O_RDONLY) = -1 EFBIG (File too large)
> 
> Given that you suggested using an uncompressed format, although a
> different one, I assumed that this would be because my gdal was
> compiled to use system's libpng, which is unlikely to have large
> file support.  So I recompiled gdal with internal PNG support but I
> still get the same error.  I guess this means that somehow the PNG
> driver does not get compiled with correct definitions.  I do see
> calls to stat64 before that open call, so it would seem that some
> parts are using 64bit calls.  Unless you have some insight into the
> issue, I'll investigate this more closely later today or tomorrow.

Yow!  That's a big png file.

First, I should note that the internal version of libpng is a bit
antique. If you are going to do a bunch of work getting it going in
64 bit IO mode it might be better that we upgrade first to the latest
libpng.

There are parts of GDAL that using the large file API (abstracted
within GDAL as the VSI*L functions, such as VSIOpenL(), VSIFSeekL(),
etc.  For libraries like libtiff that allow easy replacement of the
low level IO functions I try to insert using the VSI functions (or
VSI*L) to take advantage of large file access where practical.

It might be possible to do this with libpng but I haven't looked into
it.

Let us know how work on large-file PNG support goes.  With luck it
might be something that can be incorporated back.  If you need it, I
could also dig into this and try to make libpng work with large files
within GDAL.

>>My suggestion would be to let gdaladdo generate the overviews itself
>>unless you have some specific algorithm for generating the overviews
>>that you feel strongly about.
> 
> 
> It's not really an algorithm issue, the overviews I already have
> have been generated from different data and serve much better as
> overviews.  If I generated highly downscaled versions of the high
> resolution data, I couldn't read text or make much sense of the
> data otherwise either.  But I can work around this problem easily
> by keeping the overviews in separate files and operating on them as
> separate datasets.  

Understood.  If you find you want to assemble GeoTIFF files with these
overviews let me know.  It can be done using libtiff utilities but it
is a hassle.

 >I am slightly worried whether GDAL's caching
> works well in a situation like this, i.e. is it designed to work
> with multiple simultaneously open datasets, but given that I
> eventually need multiple simultaneously open datasets anyway
> ("real" datasets, not just overviews of an other dataset), I guess
> I'll just make it work if it doesn't.

GDAL's raster caching is global.  That is one memory pool is shared
amoung all datasets.  If you have two files open, read all of one and
then read all of the second, the cached blocks of the first will
be expired as memory is needed for the second dataset.

I presume this is the behaviour you would want?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alessandro_amici at telespazio.it  Wed Feb 26 11:38:51 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:47 2007
Subject: R: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
Message-ID: <A183DF60AC72D5119B990002A5749CB30392A8DE@ROMADG-MAIL01>

hi,

> It becomes a different thing if you have written your own idl programs
(envi 
> is written in idl) that automatically process some envi files and that do
not 
> use the native envi open functions to open these files + headers, but have

> their own opening functions that are a bit more specific.

i use idl, python and c programs (without gdal) which recognize the appended
extension, not the substituted one.

> >
> > Ok. I shall add an appropriate option for more flexibility.
>
> It's always good to have more flexibility :-)
> I hope this solves Amici's problems.
> 

yes it will.

> > Sample datasets, supplied with ENVI, has .img suffix (and named as
> > <file>.img, <file>.hdr)
>
> Now I see where the confusion started...

i think linux and windows might have different conventions.
all file created by envi i have ever seen are of the form:
<whatever> + <whatever>.hdr
on linux with envi 3.4 and 3.5.

obviously using "append the .hdr" as the default (as envi does) is fine by
me
as well :).

thanks,
alessandro

From nhv at cape.com  Wed Feb 26 17:38:05 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <3E5CEB4E.60008@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGACEJCCKAA.nhv@cape.com>

Hi All

I am not sure if the following is a problem with GDAL
or my hdf4 library

With gdalinfo I constantly get

Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
....
  GPOLYGONCONTAINER=-103.892405, -81.954139, -86.270138, -107.052668
   ^^^^^^^^^^^^^^^
  GRINGPOINTLATITUDE=20.525827, 17.337449, -0.496254, 2.465055
  GRINGPOINTSEQUENCENO=1, 2, 3, 4

the data for GRPOLYGONCONTAINER is I would expect for 
GRINGPOINTLONGITUDE

Is anyone else seeing this ?

This is using Cygwin

Cheers

Norman


From dron at ak4719.spb.edu  Thu Feb 27 02:00:30 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <EKEJIKAILPONGGENMBGACEJCCKAA.nhv@cape.com>
References: <3E5CEB4E.60008@pobox.com> <EKEJIKAILPONGGENMBGACEJCCKAA.nhv@cape.com>
Message-ID: <20030227070030.GA3308@ak4719.spb.edu>

Norman,

On Wed, Feb 26, 2003 at 05:38:05PM -0500, Norman Vine wrote:
> I am not sure if the following is a problem with GDAL
> or my hdf4 library
> 
> With gdalinfo I constantly get
> 
> Driver: HDF4/Hierarchical Data Format Release 4
> Size is 512, 512
> Coordinate System is `'
> Metadata:
> ....
>   GPOLYGONCONTAINER=-103.892405, -81.954139, -86.270138, -107.052668
>    ^^^^^^^^^^^^^^^
>   GRINGPOINTLATITUDE=20.525827, 17.337449, -0.496254, 2.465055
>   GRINGPOINTSEQUENCENO=1, 2, 3, 4
> 
> the data for GRPOLYGONCONTAINER is I would expect for 
> GRINGPOINTLONGITUDE

What HDF products used by you? What size of this datasets? If them has a
reasonable size, I want get the sample.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nhv at cape.com  Thu Feb 27 04:52:33 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <20030227070030.GA3308@ak4719.spb.edu>
Message-ID: <EKEJIKAILPONGGENMBGAAEKACKAA.nhv@cape.com>

Andrey Kiselev writes:
> 
> On Wed, Feb 26, 2003 at 05:38:05PM -0500, Norman Vine wrote:
> > I am not sure if the following is a problem with GDAL
> > or my hdf4 library
> > 
> > With gdalinfo I constantly get
> > 
> > Driver: HDF4/Hierarchical Data Format Release 4
> > Size is 512, 512
> > Coordinate System is `'
> > Metadata:
> > ....
> >   GPOLYGONCONTAINER=-103.892405, -81.954139, -86.270138, -107.052668
> >    ^^^^^^^^^^^^^^^
> >   GRINGPOINTLATITUDE=20.525827, 17.337449, -0.496254, 2.465055
> >   GRINGPOINTSEQUENCENO=1, 2, 3, 4
> > 
> > the data for GRPOLYGONCONTAINER is I would expect for 
> > GRINGPOINTLONGITUDE
> 
> What HDF products used by you? What size of this datasets? If them has a
> reasonable size, I want get the sample.

Hi Andrey

I am working with MODIS data

There are l2 and l3 data sets in the 'images' directory of 
the MODIS Ocean Color tutorial 
http://jeager.gsfc.nasa.gov/modis_workshop_unh/

I suggest that we use these as our 'standard' MODIS test files

Note I hope to eventually be able to duplicate the functionality of the 
matlab and IDL code in this tutorial with GDAL and Python

Cheers

Norman


From dron at ak4719.spb.edu  Thu Feb 27 04:58:32 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
In-Reply-To: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB30392A2E3@ROMADG-MAIL01>
Message-ID: <20030227095832.GA28463@ak4719.spb.edu>

Amici,

On Wed, Feb 26, 2003 at 12:47:34PM +0100, Amici Alessandro wrote:
> in addition to the WIP-items you mentioned i'd like to point out to you 
> one more useful item to implement: 
> an option to _append_ the '.hdr' extension to the full name i.e.
> 	image.bin -> image.bin.hdr

I have implemented such an option. Try "SUFFIX=ADD" with gdal_translate.
By default suffix will be replaced as previously.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alessandro_amici at telespazio.it  Thu Feb 27 05:36:18 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:47 2007
Subject: R: R: [Gdal-dev] Support for creating ENVI .hdr labeled files
Message-ID: <A183DF60AC72D5119B990002A5749CB30394E807@ROMADG-MAIL01>

hi,

> Amici,

Andrey, my first name is Alessandro :) and unfortunately i have no power to
change the broken mailer with this stupid 'second name first' default :(

> On Wed, Feb 26, 2003 at 12:47:34PM +0100, Amici Alessandro wrote:
> > in addition to the WIP-items you mentioned i'd like to point out to you 
> > one more useful item to implement: 
> > an option to _append_ the '.hdr' extension to the full name i.e.
> > 	image.bin -> image.bin.hdr
> 
> I have implemented such an option. Try "SUFFIX=ADD" with gdal_translate.
> By default suffix will be replaced as previously.

i tryed both SUFFIX and INTERLEAVE, and found no problem :).

thanks a lot, this seriously cuts down the number of quirks i need to
implement in my apps!

i will stress test the ENVI driver from now on. if you need testing on
specific
areas (i.e. map_info), don't esitate to cc me directly.

cheers,
alessandro

From dron at ak4719.spb.edu  Thu Feb 27 05:41:01 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <EKEJIKAILPONGGENMBGAAEKACKAA.nhv@cape.com>
References: <20030227070030.GA3308@ak4719.spb.edu> <EKEJIKAILPONGGENMBGAAEKACKAA.nhv@cape.com>
Message-ID: <20030227104101.GA32648@ak4719.spb.edu>

Norman,

What GDAL version do you use?


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nhv at cape.com  Thu Feb 27 06:02:51 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <20030227104101.GA32648@ak4719.spb.edu>
Message-ID: <EKEJIKAILPONGGENMBGAGEKFCKAA.nhv@cape.com>

Andrey Kiselev writes:
> 
> Norman,
> 
> What GDAL version do you use?

Yesterday's CVS

Cheers

Norman

From kamal_jo at yahoo.com  Thu Feb 27 07:00:55 2003
From: kamal_jo at yahoo.com (Ayman Kamal)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] customizing GDAL to make only two drivers available
In-Reply-To: <20030225200853.GB6054@ak4719.spb.edu>
Message-ID: <20030227120055.11229.qmail@web41114.mail.yahoo.com>

Is there any means to minimize the numbers of drivers
available in GDAL so that I can use it just to convert
from format "A" to format "B", I guess this way it
will be lighter weight. Can I do this? How?

__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - forms, calculators, tips, more
http://taxes.yahoo.com/

From nhv at cape.com  Thu Feb 27 07:16:57 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] customizing GDAL to make only two drivers available
In-Reply-To: <20030227120055.11229.qmail@web41114.mail.yahoo.com>
Message-ID: <EKEJIKAILPONGGENMBGAEEKICKAA.nhv@cape.com>

Ayman Kamal writes:
> 
> Is there any means to minimize the numbers of drivers
> available in GDAL so that I can use it just to convert
> from format "A" to format "B", I guess this way it
> will be lighter weight. Can I do this? How?

If I remember correctly you are using MSVC
in which case I believe that you can modify the
$GDAL_SRC/frmts/makefile.vc EXTRAFLAGS variable
to just include the formats you want

ie this should yield a GDAL that only did tiff and bmp
EXTRAFLAGS =	 -DFRMT_gtiff -DFRMT_bmp

on Unix like systems you need to modify the 
$GDAL_SRC/GDALmake.opt file variable $GDAL_FORMATS

HTH

Norman



From warmerdam at pobox.com  Thu Feb 27 09:11:53 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] customizing GDAL to make only two drivers available
In-Reply-To: <EKEJIKAILPONGGENMBGAEEKICKAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAEEKICKAA.nhv@cape.com>
Message-ID: <3E5E1CA9.4020204@pobox.com>

Norman Vine wrote:
> Ayman Kamal writes:
> 
>>Is there any means to minimize the numbers of drivers
>>available in GDAL so that I can use it just to convert
>>from format "A" to format "B", I guess this way it
>>will be lighter weight. Can I do this? How?
> 
> 
> If I remember correctly you are using MSVC
> in which case I believe that you can modify the
> $GDAL_SRC/frmts/makefile.vc EXTRAFLAGS variable
> to just include the formats you want
> 
> ie this should yield a GDAL that only did tiff and bmp
> EXTRAFLAGS =	 -DFRMT_gtiff -DFRMT_bmp
> 
> on Unix like systems you need to modify the 
> $GDAL_SRC/GDALmake.opt file variable $GDAL_FORMATS

Ayman,

Norman is right on this, though you can only control what gets
included by subdirectory of gdal/frmts, so for instance, to get any
driver in the frmts/raw directory you normally get them all.  However, they
are "light".  There are also a few dependencies between drivers that may come
up.

I would add that you can save alot by not including the OGR drivers in a GDAL
build where you only need raster support.

On windows set comment out the "INCLUDE_OGR_FRMTS" flag setting to disable
inclusino of OGR.

On Unix configure with the "--without-ogr" switch.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Thu Feb 27 09:40:13 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <EKEJIKAILPONGGENMBGAGEKFCKAA.nhv@cape.com>
References: <20030227104101.GA32648@ak4719.spb.edu> <EKEJIKAILPONGGENMBGAGEKFCKAA.nhv@cape.com>
Message-ID: <20030227144013.GA765@ak4719.spb.edu>

Norman,

I have fixed problem with HDF-EOS metadata parsing. You could check out
latest changes.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nhv at cape.com  Thu Feb 27 10:04:39 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:47 2007
Subject: [Gdal-dev] hdf4 metadata
In-Reply-To: <20030227144013.GA765@ak4719.spb.edu>
Message-ID: <EKEJIKAILPONGGENMBGAKELACKAA.nhv@cape.com>

Andrey Kiselev writes:
> 
> I have fixed problem with HDF-EOS metadata parsing. You could check out
> latest changes.

Yes *much* better :-)

Thanks !

Norman

