From jeff at unterbahn.com  Sun Aug  1 16:54:15 2010
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Sun Aug  1 16:54:17 2010
Subject: [gdal-dev] 4 point, projective warping
In-Reply-To: <201007301622.40228.m.massing@warped-space.de>
References: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com>
	<201007281545.35142.m.massing@warped-space.de>
	<201007301622.40228.m.massing@warped-space.de>
Message-ID: <AANLkTimFsJrfnp+v5Fwjg2td_1uTjjJHfLRyHk_3Fz3E@mail.gmail.com>

Thanks for all the input, Manuel - I've gone ahead with the
ImageMagick system and it works pretty well. That said, a projective
warp would be great as a native GDAL feature, so thanks for the offer.

If anyone else has interest, please pipe up! If it's just me then I
guess there's not too much demand.

Jeff

On 7/30/10, Manuel Massing <m.massing@warped-space.de> wrote:
> Hi Jeffrey,
>
>> I've thought about implementing a projective transform in the qgis
>> georeferencer, so if you're interested I'll let you know when I get around
>> to it.
>
> If this interest you, I have just commited an initial implementation of
> projective warping (see https://trac.osgeo.org/qgis/changeset/13987)
> to the qgis georeferencer, which is based on the gdalwarper.
>
> In principle, it should be relatively easy to integrate this transform into
> a
> custom version of gdalwarp.
>
> Maybe there's even interest to have such a transform in GDAL proper?
> I would be willing to contribute the code to GDAL, although the model
> fitting step uses a singular value decomposition, so this would require
> some dependency on  a linear algebra package (I wouldn't consider it wise to
> reimplement numerical algorithms from scratch, with their numerous caveats).
>
> cheers,
>
> 	Manuel
> 	
>
From warmerdam at pobox.com  Sun Aug  1 20:03:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Aug  1 20:03:08 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
Message-ID: <4C560B39.4000107@pobox.com>

Folks,

With the support of Camp To Camp I have been working on an overhaul for the
OGR SQL parsing engine.  The minimum goal was to support functions in the
column definitions for the output record set of a SELECT, but in order to
achieve this in a reasonable way I have worked towards a substantial
generalization of expression in OGR SQL and extending them to column
definitions.

I have written up a preliminary RFC for review at:

   http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc

I am seeking feedback before I polish it off and call for a vote this
week.

I will note that in my local development tree I now have this overhauled
implementation working, including the autotest/ogr/{ogr_join_test.py,
ogr_sql_test.py,ogr_index_test.py} test scripts all passing without
alteration.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Sun Aug  1 23:48:54 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Aug  1 23:48:56 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <4C560B39.4000107@pobox.com>
References: <4C560B39.4000107@pobox.com>
Message-ID: <AANLkTinZ7-yRETCY8gPkQ24PyPDSKc3sWzO_iED__QtN@mail.gmail.com>

Frank,

Can you list the statements supported by the WHERE clauses, like LIKE, IN
and BETWEEN?

Is there a way to force through the SQL statement to the underlying database
driver if required?

On Mon, Aug 2, 2010 at 5:33 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Folks,
>
> With the support of Camp To Camp I have been working on an overhaul for the
> OGR SQL parsing engine.  The minimum goal was to support functions in the
> column definitions for the output record set of a SELECT, but in order to
> achieve this in a reasonable way I have worked towards a substantial
> generalization of expression in OGR SQL and extending them to column
> definitions.
>
> I have written up a preliminary RFC for review at:
>
>  http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
>
> I am seeking feedback before I polish it off and call for a vote this
> week.
>
> I will note that in my local development tree I now have this overhauled
> implementation working, including the autotest/ogr/{ogr_join_test.py,
> ogr_sql_test.py,ogr_index_test.py} test scripts all passing without
> alteration.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100802/093d6ce4/attachment.html
From j.donovan at virtalis.com  Mon Aug  2 04:53:17 2010
From: j.donovan at virtalis.com (John Donovan)
Date: Mon Aug  2 04:53:23 2010
Subject: [gdal-dev] 4 point, projective warping
References: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com><201007281545.35142.m.massing@warped-space.de><201007301622.40228.m.massing@warped-space.de>
	<AANLkTimFsJrfnp+v5Fwjg2td_1uTjjJHfLRyHk_3Fz3E@mail.gmail.com>
Message-ID: <C8891C79DFCAB347B9221DF3890EDD2F6C8C1A@topdog.Virtalis.local>

I'd be very interested in a native GDAL implementation of perspective
warping. I've done something similar to the work Manuel has done on
Qgis, having written an in-house application that uses GSL/CBLAS. So I'd
be happy to help where I can, but as Manuel says, writing robust SVD
routines is beyond my ken.

So is another dependency the way to go?

-JD

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jeffrey Warren
Sent: 01 August 2010 21:54
To: Manuel Massing
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] 4 point, projective warping

Thanks for all the input, Manuel - I've gone ahead with the ImageMagick
system and it works pretty well. That said, a projective warp would be
great as a native GDAL feature, so thanks for the offer.

If anyone else has interest, please pipe up! If it's just me then I
guess there's not too much demand.

Jeff

On 7/30/10, Manuel Massing <m.massing@warped-space.de> wrote:
> Hi Jeffrey,
>
>> I've thought about implementing a projective transform in the qgis 
>> georeferencer, so if you're interested I'll let you know when I get 
>> around to it.
>
> If this interest you, I have just commited an initial implementation 
> of projective warping (see 
> https://trac.osgeo.org/qgis/changeset/13987)
> to the qgis georeferencer, which is based on the gdalwarper.
>
> In principle, it should be relatively easy to integrate this transform

> into a custom version of gdalwarp.
>
> Maybe there's even interest to have such a transform in GDAL proper?
> I would be willing to contribute the code to GDAL, although the model 
> fitting step uses a singular value decomposition, so this would 
> require some dependency on  a linear algebra package (I wouldn't 
> consider it wise to reimplement numerical algorithms from scratch,
with their numerous caveats).
>
> cheers,
>
> 	Manuel
> 	
>
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email
Security System.
______________________________________________________________________

______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email Security System. ______________________________________________________________________
From wrightc at forthvalleygis.co.uk  Mon Aug  2 04:58:38 2010
From: wrightc at forthvalleygis.co.uk (Colin Wright)
Date: Mon Aug  2 04:58:43 2010
Subject: [gdal-dev] Save to DXF with specific layer name with c#
In-Reply-To: <39761.193.246.86.39.1280493081.squirrel@webmail.carto.net>
References: <4C52A7A0.FDD4.0005.1@forthvalleygis.co.uk>
	<39761.193.246.86.39.1280493081.squirrel@webmail.carto.net>
Message-ID: <4C5696CD.FDD4.0005.1@forthvalleygis.co.uk>

Hi Andreas,
Thanks for that - it's comforting to know I wasn't missing something obvious.  I'll have a dig
around in the header.dxf and see what I can do from that end.  

I haven't tried them yet, but do you know if there are gotchas with any of the other standard
DXF attributes?  Entities, Text, etc...

Colin

>>> "Andreas Neumann" <a.neumann@carto.net> 30/07/10 13:31 >>>
Hi Colin,

Not sure if creation of layers is yet supported. I think it is only
supported if you created the layers in advance in the header.dxf file.

Frank Warmerdam is now working on a second round of improvements where
automatic layer creation (even if the layers aren't present in header.dxf)
should be supported.

You probably have to wait for a couple weeks for this to appear.

Frank can tell you more about it.

Andreas


On Fri, July 30, 2010 11:21 am, Colin Wright wrote:
> I'm using GDAL/OGR 1.7.2 with the C# bindings to write a tool that will
> export data to various formats.
>
> When it exports to DXF I want it to use a specific layer name rather than
> using the default dxf layer 0.
> The problem is that even though I'm setting the attribute "Layer" for each
> feature, it is still appearing as layer 0 in the final DXF file.  I've
> checked and the "Layer" attribute does exist, and setting the attribute
> value doesn't throw any errors.  The geometry is getting saved to the DXF
> OK.
>
> Any ideas?  An extract of my code is below.
>
> //--------------------------------------------------
> //Loop through input layers writing to output
> lyrInput.ResetReading();
> Feature inFeat = lyrInput.GetNextFeature();
> iError = -1;
> while (inFeat != null)
> {
>                //Try approach of creating new feature
> 	Feature outFeat = new Feature(lyrOutput.GetLayerDefn());
>                 if (outFeat.SetGeometry(inFeat.GetGeometryRef()) ==
> Ogr.OGRERR_NONE)
>                {
>                        bFeatOK = true;
>
>                       //Generic attribs for DXF
>                       if (sOutFormat == "DXF")
>                       {
>                                   //I've checked and this section is
> getting called
>                                   outFeat.SetField("Layer",
> "MyLayerName");
>
>                        }
>                }
>                if (bFeatOK)
>                {
> 	         iError = lyrOutput.CreateFeature(outFeat);
>                }
>
>                outFeat.Dispose();
>                inFeat = lyrInput.GetNextFeature();
> }
>
>
> Thanks
>
> Colin
>
>
> --------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>


-- 
Andreas Neumann
http://www.carto.net/neumann/ 
http://www.svgopen.org/ 


--------------------------------


--------------------------------
From warmerdam at pobox.com  Mon Aug  2 08:00:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug  2 08:00:15 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <AANLkTinZ7-yRETCY8gPkQ24PyPDSKc3sWzO_iED__QtN@mail.gmail.com>
References: <4C560B39.4000107@pobox.com>
	<AANLkTinZ7-yRETCY8gPkQ24PyPDSKc3sWzO_iED__QtN@mail.gmail.com>
Message-ID: <4C56B34A.8070501@pobox.com>

Chaitanya kumar CH wrote:
> Frank,
> 
> Can you list the statements supported by the WHERE clauses, like LIKE, 
> IN and BETWEEN?

Chaitanya,

The comparison operators supported in WHERE clauses are =, <, >, <=,
 >=, LIKE, IN.   BETWEEN is not supported.  This is unchanged from the
existing implementation.

> Is there a way to force through the SQL statement to the underlying 
> database driver if required?

Generally speaking SQL statements will be passed through to the RDBMS
where available.  OGR SQL is intended to be the "fallback implementation".
I will note that at least some RDBMS providers support passing
"OGRSQL" as the dialect to use the OGR SQL implementation instead of the
one associated with the RDBMS.  Of course, OGR SQL is almost always slower
than evaluating the SQL in the RDBMS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Mon Aug  2 08:06:28 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Aug  2 08:06:32 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <4C560B39.4000107@pobox.com>
References: <4C560B39.4000107@pobox.com>
Message-ID: <AANLkTikmgtKgsn0x+f2HLWGFu9gzDtfOqHTa4MvR_D7W@mail.gmail.com>

2010/8/2 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> With the support of Camp To Camp I have been working on an overhaul for the
> OGR SQL parsing engine.  The minimum goal was to support functions in the
> column definitions for the output record set of a SELECT, but in order to
> achieve this in a reasonable way I have worked towards a substantial
> generalization of expression in OGR SQL and extending them to column
> definitions.
>
> I have written up a preliminary RFC for review at:
>
>  http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
>
> I am seeking feedback before I polish it off and call for a vote this
> week.
>
> I will note that in my local development tree I now have this overhauled
> implementation working, including the autotest/ogr/{ogr_join_test.py,
> ogr_sql_test.py,ogr_index_test.py} test scripts all passing without
> alteration.
>


Frank,

Where can I find the current implementation? Is that publicly available?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100802/347713ff/attachment-0001.html
From bertelli at charta.acme.com  Mon Aug  2 09:02:03 2010
From: bertelli at charta.acme.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Mon Aug  2 09:02:26 2010
Subject: [gdal-dev] WMS overlapping tiles
Message-ID: <AANLkTikmXpGFnepH1PdYxtK-3vNmAnCDYEWszJNwf3iz@mail.gmail.com>

Hello,
JOSM wms and the fairly simplistic Grass r.in.wms allow tile
overlapping which is sometimes very useful when checking map
consistency and trying to spot digitizing errors.
I didn't find this option nor in the xml definition nor in
gdal_translate. I imagine it could be feasible with an appropriate
combination of gdal_translate e and gdalretile.py, but...
Do someone have any suggestion about it?
c
From bertelli at charta.acme.com  Mon Aug  2 09:05:20 2010
From: bertelli at charta.acme.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Mon Aug  2 09:05:42 2010
Subject: [gdal-dev] Re: OGR SQL Parser/Evaluator Overhaul
Message-ID: <AANLkTinN0p934AApw2aDcL5Z84kLpny-mT3-mrCpu6Ez@mail.gmail.com>

Thank you very much to you, Frank, and Camp To Camp. This is a very
welcome addition for file based datasources.
GDAL is becoming more and more powerful, versatile, useful and ... big.
Maybe you could add a
-straight
clause so to avoid the parser. GDAL/OGR shoud remain fast when used
only as a conversion library.
c

on Sun, 01 Aug 2010 20:03:05 Frank Warmerdam <warmerdam@pobox.com> wrote:
> Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
>
> Folks,
>
> With the support of Camp To Camp I have been working on an overhaul for the
> OGR SQL parsing engine.  The minimum goal was to support functions in the
> column definitions for the output record set of a SELECT, but in order to
> achieve this in a reasonable way I have worked towards a substantial
> generalization of expression in OGR SQL and extending them to column
> definitions.
>
> I have written up a preliminary RFC for review at:
>
>   http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
>
> I am seeking feedback before I polish it off and call for a vote this
> week.
>
> I will note that in my local development tree I now have this overhauled
> implementation working, including the autotest/ogr/{ogr_join_test.py,
> ogr_sql_test.py,ogr_index_test.py} test scripts all passing without
> alteration.
>
> Best regards,

-- 
--------------------------------------------------------------------------
Carlo A. Bertelli
?? Charta servizi e sistemi per il territorio e la storia ambientale srl
? ? ? ? ? Dipendenze del palazzo Doria,
? ? ? ? ? vc. alla Chiesa della Maddalena 9/2 16124? ? ? Genova (Italy)
? ? ? ? ? tel. +39(0)10 2475439? fax +39(0)10 2475439? gsm:+39 393 1590711
?? e-mail: bertelli@charta.acme.com? ? ? http://www.charta.acme.com
--------------------------------------------------------------------------
From dmorissette at mapgears.com  Mon Aug  2 09:13:01 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Aug  2 09:13:04 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <4C560B39.4000107@pobox.com>
References: <4C560B39.4000107@pobox.com>
Message-ID: <4C56C45D.9080908@mapgears.com>

Frank Warmerdam wrote:
> 
> I have written up a preliminary RFC for review at:
> 
>   http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
> 
> I am seeking feedback before I polish it off and call for a vote this
> week.
> 

All sounds good to me (with the little knowledge I have of the SQL
engine implementation).

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From lancewellspring at gmail.com  Mon Aug  2 10:11:10 2010
From: lancewellspring at gmail.com (lancer611)
Date: Mon Aug  2 10:11:12 2010
Subject: [gdal-dev] Re: GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
In-Reply-To: <1280251266730-5343159.post@n2.nabble.com>
References: <1280242709084-5342514.post@n2.nabble.com>
	<1280242995132-5342539.post@n2.nabble.com>
	<1280251266730-5343159.post@n2.nabble.com>
Message-ID: <1280758270801-5364223.post@n2.nabble.com>


I am still struggling with this same problem.  No one has any ideas?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5364223.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Mon Aug  2 10:16:59 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug  2 10:17:06 2010
Subject: [gdal-dev] Re: OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <AANLkTinN0p934AApw2aDcL5Z84kLpny-mT3-mrCpu6Ez@mail.gmail.com>
References: <AANLkTinN0p934AApw2aDcL5Z84kLpny-mT3-mrCpu6Ez@mail.gmail.com>
Message-ID: <4C56D35B.1000807@pobox.com>

Carlo A. Bertelli (Charta s.r.l.) wrote:
> Thank you very much to you, Frank, and Camp To Camp. This is a very
> welcome addition for file based datasources.
> GDAL is becoming more and more powerful, versatile, useful and ... big.
> Maybe you could add a
> -straight
> clause so to avoid the parser. GDAL/OGR shoud remain fast when used
> only as a conversion library.

Carlo,

The SQL expression parser is used for ExecuteSQL() SELECT statements and
when you set an attribute filter with SetAttributeFilter().  If neither
of these are used, such as in a plain ogr2ogr call, there is no use of the
SQL engine.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Aug  2 10:18:53 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug  2 10:18:58 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <AANLkTikmgtKgsn0x+f2HLWGFu9gzDtfOqHTa4MvR_D7W@mail.gmail.com>
References: <4C560B39.4000107@pobox.com>
	<AANLkTikmgtKgsn0x+f2HLWGFu9gzDtfOqHTa4MvR_D7W@mail.gmail.com>
Message-ID: <4C56D3CD.2020900@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Where can I find the current implementation? Is that publicly available?

Tamas,

It is unpublished currently, in my local dev tree.  I was thinking I might
make a branch in the sandbox if that would be helpful to you.  I'll try and
do that today.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From edikaradumi at gmail.com  Mon Aug  2 11:11:52 2010
From: edikaradumi at gmail.com (Edi KARADUMI)
Date: Mon Aug  2 11:11:55 2010
Subject: [gdal-dev] hi i wont to post to this list
Message-ID: <AANLkTimULYUV4v8x+o5jG-9fijbp24GQg2f++7GD40+J@mail.gmail.com>

And the topic is: Raster Strategies Example

I have read many strategies for raster performance, but i still have
problems with my case. The posts that i have read explain the strategie, but
are not very detailed. Im new to mapserver so i have problems implementing
them. My case is:

-about 6000 tiles that form the map
-170mb each tile
-aproximately 1.2T of iamges
-i have 10T HD and i think disk space is not a problem for me
-tile format is TIF
-tile size 9375x6250 pixels

The strategy i have implemented and the problems i have

-First i divided the tiles in 60 folders, to increase the performance in
disk seek/read.

-Than i transformed source files into internally tiles with the command
   gdal_translate -of GTiff -co "TILED=YES" original.tif tiled.tif

-i used gdaladdo to add internal pyramids

   gdaladdo -r average 2 4 8 16 32 64 128

-Created a tileindex using
   gdaltindex -write_absolute_path MapAll.shp
//server/Maps/Subfolder1/*.tif

-Created a spatial index .qix file
   shptree MapAll.shp

-than added the layer to the mapfile without the .shp extension so the
application can use the .qix

as you may know, i have very slow performance when i zoom out and im stucked
here. As i have read i should make a copy of the tiles with reduced
resolution. Merge the tiles together and use min/max scale to show different
layers in different scales. the min/max scales i zoom in/out are
100/1200000. Now my questions are

- How can i calculate the scale where i should create another layer of the
tiles, or i shoud see it with some tests?

- how much should be the resolution of the new layer?

- is there any tools or program to merge the tiles? merging 6000 tiles with
the gdalwarp by writing the command by myself is frustrating

- how many tiles should i merge together to create the new layer? (how many
tiles should have the new layer) i know that in each zoomscale its better to
appear only one tile but i dont know how to calculate it

- the tiles that i should merge are the originals or those with internal
tiling and overviews?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100802/28862a1b/attachment.html
From edikaradumi at gmail.com  Mon Aug  2 11:14:09 2010
From: edikaradumi at gmail.com (Edi KARADUMI)
Date: Mon Aug  2 11:14:13 2010
Subject: [gdal-dev] Raster Strategies Examples
Message-ID: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>

I have read many strategies for raster performance, but i still have
problems with my case. The posts that i have read explain the strategie, but
are not very detailed. Im new to mapserver so i have problems implementing
them. My case is:

-about 6000 tiles that form the map
-170mb each tile
-aproximately 1.2T of iamges
-i have 10T HD and i think disk space is not a problem for me
-tile format is TIF
-tile size 9375x6250 pixels

The strategy i have implemented and the problems i have

-First i divided the tiles in 60 folders, to increase the performance in
disk seek/read.

-Than i transformed source files into internally tiles with the command
   gdal_translate -of GTiff -co "TILED=YES" original.tif tiled.tif

-i used gdaladdo to add internal pyramids

   gdaladdo -r average 2 4 8 16 32 64 128

-Created a tileindex using
   gdaltindex -write_absolute_path MapAll.shp
//server/Maps/Subfolder1/*.tif

-Created a spatial index .qix file
   shptree MapAll.shp

-than added the layer to the mapfile without the .shp extension so the
application can use the .qix

as you may know, i have very slow performance when i zoom out and im stucked
here. As i have read i should make a copy of the tiles with reduced
resolution. Merge the tiles together and use min/max scale to show different
layers in different scales. the min/max scales i zoom in/out are
100/1200000. Now my questions are

- How can i calculate the scale where i should create another layer of the
tiles, or i shoud see it with some tests?

- how much should be the resolution of the new layer?

- is there any tools or program to merge the tiles? merging 6000 tiles with
the gdalwarp by writing the command by myself is frustrating

- how many tiles should i merge together to create the new layer? (how many
tiles should have the new layer) i know that in each zoomscale its better to
appear only one tile but i dont know how to calculate it

- the tiles that i should merge are the originals or those with internal
tiling and overviews?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100802/22a98f47/attachment-0001.html
From m.massing at warped-space.de  Mon Aug  2 11:48:54 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Mon Aug  2 11:48:58 2010
Subject: [gdal-dev] GDALSuggestedWarpOutput returns negative infinity in
	padfGeoTransformOut
In-Reply-To: <1280242709084-5342514.post@n2.nabble.com>
References: <1280242709084-5342514.post@n2.nabble.com>
Message-ID: <201008021748.54477.m.massing@warped-space.de>

Hi Lance,

I suspect the most probable cause for the transform failure is a non-
invertible geotransform matrix in CSTrans (i.e., due to incorrectly set 
scale values).

What are m_srcGT / m_dstGT set to (the 6 actual values, not
the code fragment used to set them)? m_srcGT should be
set to the source file geotransform,  m_dstGT to identity.

You should also add some debug code to see the source and destination
coordinates calculated in CSTrans::STransform, especially if they are
mapped to infinity or all onto the same x/y-coordinate. 

Also, failure of GDALApproxTransform / GDALReprojectionTransform is
not corretly passed on in STransform, so to make sure that it does not 
trip up GDALSuggestedWarpOutput, you should return 0 if GDALApproxTransform or
GDALReprojectionTransform fail (return 0).

cheers,

	Manuel
From m.massing at warped-space.de  Mon Aug  2 13:17:04 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Mon Aug  2 13:17:09 2010
Subject: [gdal-dev] 4 point, projective warping
In-Reply-To: <C8891C79DFCAB347B9221DF3890EDD2F6C8C1A@topdog.Virtalis.local>
References: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com>
	<AANLkTimFsJrfnp+v5Fwjg2td_1uTjjJHfLRyHk_3Fz3E@mail.gmail.com>
	<C8891C79DFCAB347B9221DF3890EDD2F6C8C1A@topdog.Virtalis.local>
Message-ID: <201008021917.04860.m.massing@warped-space.de>

Hi,

> I'd be very interested in a native GDAL implementation of perspective
> warping. I've done something similar to the work Manuel has done on
> Qgis, having written an in-house application that uses GSL/CBLAS. So I'd
> be happy to help where I can, but as Manuel says, writing robust SVD
> routines is beyond my ken.
> 
> So is another dependency the way to go?

Haven't seen any well-tested&stand-alone SVD code with an appropriate license 
out there yet :-(

The question is if new transform models should reside in the core
library (like the polynomial/TPS transforms, which makes them programmatically 
accessible) or in gdalwarp. 

In the latter case, the dependency could be kept fairly peripheral with a
conditional compile. 

BTW, weren't there plans for an OpenGL accelerated version of gdalwarp?
Maybe at some point it'll become a stand-alone project (i.e., with separate
build system) anyway...

cheers,

	Manuel
From warmerdam at pobox.com  Mon Aug  2 15:13:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug  2 15:13:49 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <AANLkTikmgtKgsn0x+f2HLWGFu9gzDtfOqHTa4MvR_D7W@mail.gmail.com>
References: <4C560B39.4000107@pobox.com>
	<AANLkTikmgtKgsn0x+f2HLWGFu9gzDtfOqHTa4MvR_D7W@mail.gmail.com>
Message-ID: <4C5718E9.5090800@pobox.com>

Tamas Szekeres wrote:
  > Frank,
> 
> Where can I find the current implementation? Is that publicly available?

Tamas,

I have created a branch at:

  http://svn.osgeo.org/gdal/sandbox/warmerdam/gdal-rfc28

The swq.c file has been split into several swq files, and the code is now
C++ instead of flat C.  The grammar is swq_parser.y.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From p.baumann at jacobs-university.de  Mon Aug  2 14:50:46 2010
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Mon Aug  2 17:53:26 2010
Subject: [gdal-dev] new GDAL driver: how to proceed?
Message-ID: <4C571386.5010509@jacobs-university.de>

Dear GDAL maintainers,

we have written a GDAL driver to add the rasdaman database as another 
"data format" that GDAL can read, and we would like to contribute this 
to the GDAL project.

Rasdaman is a raster database middleware offering an SQL-style query 
language on multi-dimensional arrays of unlimited size, stored in a 
relational database. See www.rasdaman.org for the open-source code, 
documentation, etc. Currently rasdaman is under consideration for OSGeo 
incubation.

In our driver implementation, GDAL connects to rasdaman by defining a 
query template which is instantiated with the concrete subsetting box 
upon every access. This allows to deliver 2-D cutouts from n-D data sets 
(such as hyperspectral satellite time series, multi-variable climate 
simulation data, ocean model data, etc.). In particular, virtual imagery 
can be offered which is derived on demand from ground truth data. Some 
more technical details are given below [1].

The code compiles smoothly with the latest GDAL code and is undergoing 
final tests and documentation. For a clean integration with the GDAL 
code base we are asking for further advice. In particular, our Makefile 
structure needs some fine tuning, we need to know intended use of some 
parameters.

We hope that this contribution is of value to the community, any 
comments are highly appreciated.

Thanks in advance for your assistance,
Peter & Constantin


[1] The connect string syntax follows the WKT Raster pattern and goes 
like this:
     rasdaman:
         query='select a[$x_lo:$x_hi,$y_lo:$y_hi] from MyImages as a'
         tileXSize=512 tileYSize=512
         [host='localhost'] [port=7001] [database='RASBASE']
         [user='rasguest'] [password='rasguest']

The rasdaman query language (rasql) string in this case only performs 
subsetting. Upon image access by GDAL, the $ parameters are substituted 
by the concrete bounding box computed from the input tile coordinates.

However, the query provided can include any kind of processing, as long 
as it returns something 2-D. For example, this determines the average of 
red and near-infrared pixels from the oldest image time series:
         query='select ( a.red+a.nir ) /2 [$x_lo:$x_hi,$y_lo:$y_hi, 0 ] 
from SatStack as a'

The further key-value pair parameters in brackets are optional, their 
defaults are listed. BTW, the default user has read-only access to the 
database as per rasdaman convention.

As rasdaman supports concurrent access with parallel query evaluation, 
any number of such connections can be opened.

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 147737)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 10xx)



From chaitanya.ch at gmail.com  Tue Aug  3 01:10:26 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug  3 01:10:29 2010
Subject: [gdal-dev] new GDAL driver: how to proceed?
In-Reply-To: <4C571386.5010509@jacobs-university.de>
References: <4C571386.5010509@jacobs-university.de>
Message-ID: <AANLkTin1tN4xfnV_Nj6vBXUN4rfjrt-hUNCF03ZVf2hY@mail.gmail.com>

Peter,

Please create a new ticket at http://trac.osgeo.org/gdal/newticket and
attach your code. If all goes smoothly, it will be added into the 1.8 branch
of GDAL and released with GDAL-1.8.0

On Tue, Aug 3, 2010 at 12:20 AM, Peter Baumann <
p.baumann@jacobs-university.de> wrote:

> Dear GDAL maintainers,
>
> we have written a GDAL driver to add the rasdaman database as another "data
> format" that GDAL can read, and we would like to contribute this to the GDAL
> project.
>
> Rasdaman is a raster database middleware offering an SQL-style query
> language on multi-dimensional arrays of unlimited size, stored in a
> relational database. See www.rasdaman.org for the open-source code,
> documentation, etc. Currently rasdaman is under consideration for OSGeo
> incubation.
>
> In our driver implementation, GDAL connects to rasdaman by defining a query
> template which is instantiated with the concrete subsetting box upon every
> access. This allows to deliver 2-D cutouts from n-D data sets (such as
> hyperspectral satellite time series, multi-variable climate simulation data,
> ocean model data, etc.). In particular, virtual imagery can be offered which
> is derived on demand from ground truth data. Some more technical details are
> given below [1].
>
> The code compiles smoothly with the latest GDAL code and is undergoing
> final tests and documentation. For a clean integration with the GDAL code
> base we are asking for further advice. In particular, our Makefile structure
> needs some fine tuning, we need to know intended use of some parameters.
>
> We hope that this contribution is of value to the community, any comments
> are highly appreciated.
>
> Thanks in advance for your assistance,
> Peter & Constantin
>
>
> [1] The connect string syntax follows the WKT Raster pattern and goes like
> this:
>    rasdaman:
>        query='select a[$x_lo:$x_hi,$y_lo:$y_hi] from MyImages as a'
>        tileXSize=512 tileYSize=512
>        [host='localhost'] [port=7001] [database='RASBASE']
>        [user='rasguest'] [password='rasguest']
>
> The rasdaman query language (rasql) string in this case only performs
> subsetting. Upon image access by GDAL, the $ parameters are substituted by
> the concrete bounding box computed from the input tile coordinates.
>
> However, the query provided can include any kind of processing, as long as
> it returns something 2-D. For example, this determines the average of red
> and near-infrared pixels from the oldest image time series:
>        query='select ( a.red+a.nir ) /2 [$x_lo:$x_hi,$y_lo:$y_hi, 0 ] from
> SatStack as a'
>
> The further key-value pair parameters in brackets are optional, their
> defaults are listed. BTW, the default user has read-only access to the
> database as per rasdaman convention.
>
> As rasdaman supports concurrent access with parallel query evaluation, any
> number of such connections can be opened.
>
> --
> Dr. Peter Baumann
>  - Professor of Computer Science, Jacobs University Bremen
>   www.faculty.jacobs-university.de/pbaumann
>   mail: p.baumann@jacobs-university.de
>   tel: +49-421-200-3178, fax: +49-421-200-493178
>  - Executive Director, rasdaman GmbH Bremen (HRB 147737)
>   www.rasdaman.com, mail: baumann@rasdaman.com
>   tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
> "Si forte in alienas manus oberraverit hec peregrina epistola incertis
> ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli
> destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD
> 10xx)
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100803/82e34de8/attachment.html
From seth at pricepages.org  Tue Aug  3 04:01:39 2010
From: seth at pricepages.org (Seth Price)
Date: Tue Aug  3 04:01:43 2010
Subject: [gdal-dev] Week 10 OpenCL Integration
Message-ID: <299F9DD5-4035-4751-BD3E-832ADA9FCC3F@pricepages.org>

1) What did I do last week?
All my work can be seen here:
http://github.com/mailseth/OpenCL-integration-for-GRASS---GDAL

I put a bunch more effort into finding and fixing bugs. The latest bug  
(which I spent way too much time on) seems to be caused by error  
introduced in the GPU. I think I've set up the code to avoid it in the  
future.

I've implemented vectorization, and it runs much faster on both the  
GPU and CPU. You can expect a speedup over the original code from 2x  
using bilinear resampling to 40x using lanczos resampling. This is  
affected by how much manipulation and masks are used by GDAL's  
processing, of course.

What took most of my time this week was implementing a reduced X/Y  
translation matrix. Now the projection numbers are slightly  
interpolated with a greatly reduced GPU memory footprint (16x smaller  
for this matrix).

2) What I plan to do this week.
I think I'm pretty close to being done with OpenCL GDAL. The only  
thing that needs doing is a clean config script to handle compiling.  
There needs to be changes made for it to run on Windows, but I don't  
have a machine to test, so someone else will have to look at that.

Therefore I'll head over to r.sun and see if I can finish that up.

3) Do I have any problems or obstacles which will interfere with my  
work?
We need to finalize what's going on with pj_do_proj() in r.sun, but it  
sounds like this is pretty much done. My family has a hiking trip the  
7th thu the 10th, so I'll either send my next report a few days early  
or late.

~Seth
From robert.coup at koordinates.com  Tue Aug  3 06:41:00 2010
From: robert.coup at koordinates.com (Robert Coup)
Date: Tue Aug  3 06:41:07 2010
Subject: [gdal-dev] Week 10 OpenCL Integration
In-Reply-To: <299F9DD5-4035-4751-BD3E-832ADA9FCC3F@pricepages.org>
References: <299F9DD5-4035-4751-BD3E-832ADA9FCC3F@pricepages.org>
Message-ID: <AANLkTin=FoW+re04tXUCDX7fY1CVaySgTnibO6NZ4nd+@mail.gmail.com>

Hi Seth,

On Tue, Aug 3, 2010 at 8:01 PM, Seth Price <seth@pricepages.org> wrote:
> 3) Do I have any problems or obstacles which will interfere with my work?
> We need to finalize what's going on with pj_do_proj() in r.sun, but it
> sounds like this is pretty much done.

Out of curiosity, do you think porting proj4 to run using OpenCL would
increase it's speed significantly? Considering it basically iterates
through an array of points and performs some maths on each one
independently, I'd imagine it could...

Rob :)
From p.baumann at jacobs-university.de  Tue Aug  3 07:52:43 2010
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue Aug  3 07:52:53 2010
Subject: [gdal-dev] new GDAL driver: how to proceed?
In-Reply-To: <AANLkTin1tN4xfnV_Nj6vBXUN4rfjrt-hUNCF03ZVf2hY@mail.gmail.com>
References: <4C571386.5010509@jacobs-university.de>
	<AANLkTin1tN4xfnV_Nj6vBXUN4rfjrt-hUNCF03ZVf2hY@mail.gmail.com>
Message-ID: <4C58030B.7030905@jacobs-university.de>

Chaitanya,

thanks for this prompt response! We will do as you describe. Before, 
we'd need your assistance: the rasdaman driver should be compiled in 
only if it's found, and we are not sure whether our way of doing so is 
the canonical one. Constantin will describe this soon in a separate mail.

-Peter



On 08/03/2010 07:10 AM, Chaitanya kumar CH wrote:
> Peter,
>
> Please create a new ticket at http://trac.osgeo.org/gdal/newticket and 
> attach your code. If all goes smoothly, it will be added into the 1.8 
> branch of GDAL and released with GDAL-1.8.0
>
> On Tue, Aug 3, 2010 at 12:20 AM, Peter Baumann 
> <p.baumann@jacobs-university.de 
> <mailto:p.baumann@jacobs-university.de>> wrote:
>
>     Dear GDAL maintainers,
>
>     we have written a GDAL driver to add the rasdaman database as
>     another "data format" that GDAL can read, and we would like to
>     contribute this to the GDAL project.
>
>     Rasdaman is a raster database middleware offering an SQL-style
>     query language on multi-dimensional arrays of unlimited size,
>     stored in a relational database. See www.rasdaman.org
>     <http://www.rasdaman.org> for the open-source code, documentation,
>     etc. Currently rasdaman is under consideration for OSGeo incubation.
>
>     In our driver implementation, GDAL connects to rasdaman by
>     defining a query template which is instantiated with the concrete
>     subsetting box upon every access. This allows to deliver 2-D
>     cutouts from n-D data sets (such as hyperspectral satellite time
>     series, multi-variable climate simulation data, ocean model data,
>     etc.). In particular, virtual imagery can be offered which is
>     derived on demand from ground truth data. Some more technical
>     details are given below [1].
>
>     The code compiles smoothly with the latest GDAL code and is
>     undergoing final tests and documentation. For a clean integration
>     with the GDAL code base we are asking for further advice. In
>     particular, our Makefile structure needs some fine tuning, we need
>     to know intended use of some parameters.
>
>     We hope that this contribution is of value to the community, any
>     comments are highly appreciated.
>
>     Thanks in advance for your assistance,
>     Peter & Constantin
>
>
>     [1] The connect string syntax follows the WKT Raster pattern and
>     goes like this:
>        rasdaman:
>            query='select a[$x_lo:$x_hi,$y_lo:$y_hi] from MyImages as a'
>            tileXSize=512 tileYSize=512
>            [host='localhost'] [port=7001] [database='RASBASE']
>            [user='rasguest'] [password='rasguest']
>
>     The rasdaman query language (rasql) string in this case only
>     performs subsetting. Upon image access by GDAL, the $ parameters
>     are substituted by the concrete bounding box computed from the
>     input tile coordinates.
>
>     However, the query provided can include any kind of processing, as
>     long as it returns something 2-D. For example, this determines the
>     average of red and near-infrared pixels from the oldest image time
>     series:
>            query='select ( a.red+a.nir ) /2 [$x_lo:$x_hi,$y_lo:$y_hi,
>     0 ] from SatStack as a'
>
>     The further key-value pair parameters in brackets are optional,
>     their defaults are listed. BTW, the default user has read-only
>     access to the database as per rasdaman convention.
>
>     As rasdaman supports concurrent access with parallel query
>     evaluation, any number of such connections can be opened.
>
>     -- 
>     Dr. Peter Baumann
>      - Professor of Computer Science, Jacobs University Bremen
>     www.faculty.jacobs-university.de/pbaumann
>     <http://www.faculty.jacobs-university.de/pbaumann>
>       mail: p.baumann@jacobs-university.de
>     <mailto:p.baumann@jacobs-university.de>
>       tel: +49-421-200-3178, fax: +49-421-200-493178
>      - Executive Director, rasdaman GmbH Bremen (HRB 147737)
>     www.rasdaman.com <http://www.rasdaman.com>, mail:
>     baumann@rasdaman.com <mailto:baumann@rasdaman.com>
>       tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
>     "Si forte in alienas manus oberraverit hec peregrina epistola
>     incertis ventis dimissa, sed Deo commendata, precamur ut ei
>     reddatur cui soli destinata, nec preripiat quisquam non sibi
>     parata." (mail disclaimer, AD 10xx)
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 147737)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 10xx)



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100803/2612f393/attachment.html
From cfab13 at hotmail.fr  Tue Aug  3 08:18:53 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Tue Aug  3 08:18:55 2010
Subject: [gdal-dev] [GDAL_TRANSLATE]Problem with colorimetry
Message-ID: <1280837933426-5368059.post@n2.nabble.com>


Hi,

I try  to assemblez several TIF to make a unique picture.
I use this command:

    C:\GDAL\SCAN25_SCOT>gdalbuildvrt truc.vrt C:\GDAL\SCAN25_SCOT\*.tif
-srcnodata "0 0 0"
    0...10...20...30...40...50...60...70...80...90...100 - done.

    C:\GDAL\SCAN25_SCOT>gdal_translate -of GTiff
C:\GDAL\SCAN25_SCOT\truc.vrt C:\GDAL\SCAN25_SCOT\truc.tif


But a part of the picture gets a lots of red pixels.

Does someone know why?

Thanks
Tacot
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5368059.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lancewellspring at gmail.com  Tue Aug  3 08:45:39 2010
From: lancewellspring at gmail.com (lancer611)
Date: Tue Aug  3 08:45:41 2010
Subject: [gdal-dev] Re: GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
In-Reply-To: <201008021748.54477.m.massing@warped-space.de>
References: <1280242709084-5342514.post@n2.nabble.com>
	<201008021748.54477.m.massing@warped-space.de>
Message-ID: <1280839539798-5368158.post@n2.nabble.com>


Thanks for your response Manuel.  m_dstGT is set to identity, but I'm not
setting m_srcGT exactly to that of the input image because I am trying to
split the image into parts.  I think my problem is that I dont understand
all of the parts of the geotransform matrix correctly.

The input image has values of:  -83.03, 4.4e-7, 0.0, 40.01, 0.0, -4.4e-7

This is the code I use to set the geotransform for the partition of the
image:

geoTransform[0] = geoT[0] + xOffset * geoT[1];
geoTransform[1] = geoT[1];
geoTransform[2] = geoT[2];
geoTransform[3] = geoT[3] + yOffset * geoT[5];
geoTransform[4] = geoT[4];
geoTransform[5] = geoT[5];

Am I doing something wrong here?

Thanks
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5368158.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lancewellspring at gmail.com  Tue Aug  3 08:55:05 2010
From: lancewellspring at gmail.com (lancer611)
Date: Tue Aug  3 08:55:06 2010
Subject: [gdal-dev] Re: GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
In-Reply-To: <1280839539798-5368158.post@n2.nabble.com>
References: <1280242709084-5342514.post@n2.nabble.com>
	<201008021748.54477.m.massing@warped-space.de>
	<1280839539798-5368158.post@n2.nabble.com>
Message-ID: <1280840105359-5368187.post@n2.nabble.com>


OK, I just realized there is a problem with the code I just presented.  I
think this is how it should be:
geoTransform[0] = geoT[0] + xOffset * geoT[1] + yOffset * geoT[2];
geoTransform[1] = geoT[1]; 
geoTransform[2] = geoT[2]; 
geoTransform[3] = xOffset * geoT[4] + yOffset * geoT[5];
geoTransform[4] = geoT[4]; 
geoTransform[5] = geoT[5]; 

(I use geoTransform to set m_srcGT)

But the same problem still exists.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5368187.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lancewellspring at gmail.com  Tue Aug  3 10:26:04 2010
From: lancewellspring at gmail.com (lancer611)
Date: Tue Aug  3 10:26:05 2010
Subject: [gdal-dev] Re: GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
In-Reply-To: <1280840105359-5368187.post@n2.nabble.com>
References: <1280242709084-5342514.post@n2.nabble.com>
	<201008021748.54477.m.massing@warped-space.de>
	<1280839539798-5368158.post@n2.nabble.com>
	<1280840105359-5368187.post@n2.nabble.com>
Message-ID: <1280845564240-5368575.post@n2.nabble.com>


Mistype in last post, geoTransform[3] = xOffset * geoT[4] + yOffset *
geoT[5];  should be:
geoTransform[3] = geoT[3] + xOffset * geoT[4] + yOffset * geoT[5]; 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5368575.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Aug  3 10:35:44 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug  3 10:35:47 2010
Subject: [gdal-dev] [GDAL_TRANSLATE]Problem with colorimetry
In-Reply-To: <1280837933426-5368059.post@n2.nabble.com>
References: <1280837933426-5368059.post@n2.nabble.com>
Message-ID: <AANLkTin3DEaV_tKQTX9Pzacbtt0tbZNLN1GRO-MmpCZP@mail.gmail.com>

Tacot,

If the red pixels are shaped like a block, it could be a missing tif image.
Otherwise, there may be a discrepancy in the nodata values.
A screenshot of your data can help.

On Tue, Aug 3, 2010 at 5:48 PM, Tacot <cfab13@hotmail.fr> wrote:

>
> Hi,
>
> I try  to assemblez several TIF to make a unique picture.
> I use this command:
>
>    C:\GDAL\SCAN25_SCOT>gdalbuildvrt truc.vrt C:\GDAL\SCAN25_SCOT\*.tif
> -srcnodata "0 0 0"
>    0...10...20...30...40...50...60...70...80...90...100 - done.
>
>    C:\GDAL\SCAN25_SCOT>gdal_translate -of GTiff
> C:\GDAL\SCAN25_SCOT\truc.vrt C:\GDAL\SCAN25_SCOT\truc.tif
>
>
> But a part of the picture gets a lots of red pixels.
>
> Does someone know why?
>
> Thanks
> Tacot
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5368059.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100803/6934b143/attachment.html
From cfab13 at hotmail.fr  Tue Aug  3 11:06:52 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Tue Aug  3 11:06:55 2010
Subject: [gdal-dev] Re: [GDAL_TRANSLATE]Problem with colorimetry
In-Reply-To: <AANLkTin3DEaV_tKQTX9Pzacbtt0tbZNLN1GRO-MmpCZP@mail.gmail.com>
References: <1280837933426-5368059.post@n2.nabble.com>
	<AANLkTin3DEaV_tKQTX9Pzacbtt0tbZNLN1GRO-MmpCZP@mail.gmail.com>
Message-ID: <1280848012805-5368754.post@n2.nabble.com>


I think more about the value of data.
http://osgeo-org.1803224.n2.nabble.com/file/n5368754/PixelRed.jpg 

But it's not always the picture on the right which pixels become red; it can
be also the picture on the left.
I have the felling it depends on the range of merging.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5368754.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From wonder.sk at gmail.com  Tue Aug  3 11:17:42 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue Aug  3 11:17:45 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C52D749.8060705@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
	<AANLkTinphLUaSQY7mjXh0QB6edLSfTAMUSvVGPcxGezw@mail.gmail.com>
	<AANLkTi=MY611CW=4OoSgd+J2z38jPasZV9yUx_jDsZ3h@mail.gmail.com>
	<4C52D749.8060705@pobox.com>
Message-ID: <AANLkTimNpVwHp=E92LumjG4S-7Mr7XpbfZdJabqvXOJZ@mail.gmail.com>

On Fri, Jul 30, 2010 at 3:44 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Martin,
>
> I do not agree with applications directly changing the OGRFieldDefn, even
> if ultimately the flag is stored here. ?There needs to be a virtual method
> on the OGRLayer (IMHO) so that drivers have an opportunity to hook the
> method to do something special when the list of desired fields changes.
>
> I'm disappointed that several new methods will be added to the API, with
> distinct methods for geometry, and style. ?I am always fighting to
> minimize the breadth of the API, within reason. ?Hopefully you can weld
> these results into a RFC proposal we can vote on reasonably soon.

Hi Frank

I have updated the RFC so that it counts with addition of these new methods:
bool OGRFieldDefn::IsIgnored();
bool OGRFeatureDefn::IsGeometryIgnored();
bool OGRFeatureDefn::IsStyleIgnored();

... together with setters - only to be used internally by OGRLayer or
its derived classes. The only allowed way to set ignored fields will
be the SetIgnoredFields() call.

IMHO there are good reasons for adding the new methods, so I hope your
disappointment will be reduced by the increased performance of OGR :-)

Regards
Martin
From kfw4 at cornell.edu  Tue Aug  3 15:57:34 2010
From: kfw4 at cornell.edu (Kevin F Webb)
Date: Tue Aug  3 17:59:13 2010
Subject: [gdal-dev] Memory leak from GDALRasterIO
In-Reply-To: <4C51E5E8.1020805@pobox.com>
References: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09C500@MBXC.exchange.cornell.edu>
	<4C51E5E8.1020805@pobox.com>
Message-ID: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09CE32@MBXC.exchange.cornell.edu>

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, July 29, 2010 4:35 PM
To: Kevin F Webb
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Memory leak from GDALRasterIO

Kevin F Webb wrote: 
> 
> I am experiencing a memory leak from looped calls to GDALRasterIO(). It 
> may be something I am doing improperly
> because I use/call RasterIO() in a C++ program that runs leak free.
> 

Kevin,

You haven't shown your code, but I suspect you aren't closing the
datasource and so the block cache isn't getting cleaned up.


I misrepresented this issue as a "Memory Leak." There was no leak, all resources
were in fact being recovered by GDALClose(). What I did experience was resource 
allocation during each loop on GDALRasterIO() such that it appeared that the heap 
was exhausted. 

With some off-list help from Frank, he directed me to the API calls for 
GDALFlushCacheBlock(), and GDALSetCacheMax() which have solved my problem.

Thank you Frank!


KFW
From szekerest at gmail.com  Tue Aug  3 18:41:50 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Aug  3 18:41:52 2010
Subject: [gdal-dev] OGR SQL Parser/Evaluator Overhaul
In-Reply-To: <4C5718E9.5090800@pobox.com>
References: <4C560B39.4000107@pobox.com>
	<AANLkTikmgtKgsn0x+f2HLWGFu9gzDtfOqHTa4MvR_D7W@mail.gmail.com>
	<4C5718E9.5090800@pobox.com>
Message-ID: <AANLkTi=4OuaYQKP=+vPO+PSDhymG4Qx_4HLjK3oDfhfk@mail.gmail.com>

Frank,

I've compiled and tested the code and it works reasonably well. The only
issue is the missing strcasecmp with the MSVC builds. I would support this
addition as it's pretty much extensible comparing to the previous code.


Best regards,

Tamas




2010/8/2 Frank Warmerdam <warmerdam@pobox.com>

> Tamas Szekeres wrote:
>  > Frank,
>
>>
>> Where can I find the current implementation? Is that publicly available?
>>
>
> Tamas,
>
> I have created a branch at:
>
>  http://svn.osgeo.org/gdal/sandbox/warmerdam/gdal-rfc28
>
> The swq.c file has been split into several swq files, and the code is now
> C++ instead of flat C.  The grammar is swq_parser.y.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/b97cebb1/attachment.html
From mail2vajram at gmail.com  Wed Aug  4 02:52:13 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Wed Aug  4 02:52:14 2010
Subject: [gdal-dev] how to create a grid shape file with in the extent of
	the image
Message-ID: <1280904733601-5371420.post@n2.nabble.com>


i have a land use land cover image, i need to create a 1000 * 1000 m
grid(shape file format) over the image and i have to calculate the area of
the each class in each grid how to do this......And i attach a file here
visualization of my problem, Please help me how to do this.....
http://osgeo-org.1803224.n2.nabble.com/file/n5371420/LULOVERIMAGE.docx
LULOVERIMAGE.docx 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-create-a-grid-shape-file-with-in-the-extent-of-the-image-tp5371420p5371420.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jgomezdans at gmail.com  Wed Aug  4 08:44:56 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed Aug  4 08:44:58 2010
Subject: [gdal-dev] how to create a grid shape file with in the extent of 
	the image
In-Reply-To: <1280904733601-5371420.post@n2.nabble.com>
References: <1280904733601-5371420.post@n2.nabble.com>
Message-ID: <AANLkTimME4GaJatwK4KiHxMqQLLgx5XtTTjdOJvDFsE_@mail.gmail.com>

Hi,

On 4 August 2010 07:52, mail2vajram <mail2vajram@gmail.com> wrote:

> i have a land use land cover image, i need to create a 1000 * 1000 m
> grid(shape file format) over the image and i have to calculate the area of
> the each class in each grid how to do this......



Maybe this is of use to you, using python and GDAL:
<http://sites.google.com/site/spatialpython/zonal-statistics>

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/8e7193bf/attachment.html
From 181797177 at qq.com  Wed Aug  4 09:23:24 2010
From: 181797177 at qq.com (=?gbk?B?3dXdzLXEyfnS9A==?=)
Date: Wed Aug  4 09:23:30 2010
Subject: [gdal-dev] EXCEPTION_ACCESS_VIOLATION, when using GDAL Java API
Message-ID: <tencent_7EDE59B14ED7CDAA71ACAC26@qq.com>

Hi,all:
 I use GDAL Java API to write raster data to Oracle Spatial GeoRaster Object, and encouter a strange problem:
 #
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0afa0770, pid=5904, tid=5548
#
# JRE version: 6.0_15-b03
# Java VM: Java HotSpot(TM) Client VM (14.1-b02 mixed mode windows-x86 )
# Problematic frame:
# C  [gdal17.dll+0x190770]
#
# An error report file with more information is saved as:
# D:\workspace\GDALTest\hs_err_pid5904.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
  
 This is my Java codes:
  
 import org.gdal.gdal.gdal;
import org.gdal.gdalconst.gdalconstConstants;
import org.gdal.gdal.Band;
import org.gdal.gdal.Dataset;
import org.gdal.gdal.Driver;
 import java.nio.ByteBuffer;
 public class GDALTest1 {
  /**
  * @param args
  */
 public static void main(String[] args) {
  
  Dataset Dataset1;
  Dataset Dataset2;
  Band Band1;
  Band Band2;
  gdal.AllRegister();
//  Dataset1 = gdal.Open("georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0");
  Dataset1 = gdal.Open("georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0");
//  Dataset2 = gdal.Open("D:/gdal_charles/GeoRasterDemo/private2/georaster_demo/demo_data/data/237898.tif",
//    gdalconstConstants.GA_Update);
  Dataset2 = gdal.Open("georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0", 
  gdalconstConstants.GA_Update);
  Band1 = Dataset1.GetRasterBand(1);
  Band2 = Dataset2.GetRasterBand(1);
  Dataset2.SetProjection(Dataset1.GetProjection());
  Dataset2.SetGeoTransform(Dataset1.GetGeoTransform());
  System.out.println("Passing information from input dataset to output dataset");
  int XSize = 100;
  ByteBuffer buffer = ByteBuffer.allocateDirect(XSize);
  buffer = Band1.ReadRaster_Direct(0,0,XSize,1);
  Band2.WriteRaster_Direct(0,0,XSize,1,buffer);
  Dataset2.FlushCache();
  System.out.println(buffer.getLong());
  Dataset1.delete();
  Dataset2.delete();
 }
 }
  
When executing the sentence "Dataset2.FlushCache();", the above problem rises. 
 
The error report is as following:
 
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0afa0770, pid=5904, tid=5548
#
# JRE version: 6.0_15-b03
# Java VM: Java HotSpot(TM) Client VM (14.1-b02 mixed mode windows-x86 )
# Problematic frame:
# C  [gdal17.dll+0x190770]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
 
---------------  T H R E A D  ---------------
 
Current thread (0x00847c00):  JavaThread "main" [_thread_in_native, id=5548, stack(0x008e0000,0x00930000)]
 
siginfo: ExceptionCode=0xc0000005, reading address 0x0000000c
 
Registers:
EAX=0x0d5335d4, EBX=0x00200000, ECX=0x00000000, EDX=0x0b678908
ESP=0x0092fb78, EBP=0x0e1d0020, ESI=0x0b676b38, EDI=0x00000000
EIP=0x0afa0770, EFLAGS=0x00010217
 
Top of Stack: (sp=0x0092fb78)
0x0092fb78:   0aedb0f8 0d5335d4 0e1d0020 00200000
0x0092fb88:   00000000 0092fc68 00000000 0b679810
0x0092fb98:   0aed6b97 00000000 00000000 00000000
0x0092fba8:   00000000 0dfc0020 0b6788d0 00000000
0x0092fbb8:   0b67cf38 0ae40cf3 00000000 00000000
0x0092fbc8:   0dfc0020 00000000 0ae3cb70 00000000
0x0092fbd8:   0b679810 00000000 0ae3e9e7 00000000
0x0092fbe8:   00000000 00000000 06c10db0 0b67c9e8 
 
Instructions: (pc=0x0afa0770)
0x0afa0760:   c4 08 f7 d8 1b c0 f7 d0 23 44 24 0c c2 0c 00 cc
0x0afa0770:   8b 41 0c 8b 54 24 08 56 8b 74 24 10 50 6a 01 6a 
 

Stack: [0x008e0000,0x00930000],  sp=0x0092fb78,  free space=318k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [gdal17.dll+0x190770]
 
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  org.gdal.gdal.gdalJNI.Dataset_FlushCache(JLorg/gdal/gdal/Dataset;)V+0
j  org.gdal.gdal.Dataset.FlushCache()V+5
j  oracle.spatial.georaster.gdaltest.GDALTest1.main([Ljava/lang/String;)V+93
v  ~StubRoutines::call_stub
 
---------------  P R O C E S S  ---------------
 
Java Threads: ( => current thread )
  0x0ab17800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=4276, stack(0x0ad60000,0x0adb0000)]
  0x0ab11400 JavaThread "CompilerThread0" daemon [_thread_blocked, id=1824, stack(0x0ad10000,0x0ad60000)]
  0x0ab0c400 JavaThread "Attach Listener" daemon [_thread_blocked, id=1452, stack(0x0acc0000,0x0ad10000)]
  0x0ab23c00 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=2400, stack(0x0ac70000,0x0acc0000)]
  0x0aaf5800 JavaThread "Finalizer" daemon [_thread_blocked, id=4672, stack(0x0ac20000,0x0ac70000)]
  0x0aaf4400 JavaThread "Reference Handler" daemon [_thread_blocked, id=4668, stack(0x0abd0000,0x0ac20000)]
=>0x00847c00 JavaThread "main" [_thread_in_native, id=5548, stack(0x008e0000,0x00930000)]
 
Other Threads:
  0x0aaf1400 VMThread [stack: 0x0ab80000,0x0abd0000] [id=4820]
  0x0ab21c00 WatcherThread [stack: 0x0adb0000,0x0ae00000] [id=1532]
 
VM state:not at safepoint (normal execution)
 
VM Mutex/Monitor currently owned by a thread: None
 
Heap
 def new generation   total 960K, used 596K [0x029e0000, 0x02ae0000, 0x02ec0000)
  eden space 896K,  66% used [0x029e0000, 0x02a75210, 0x02ac0000)
  from space 64K,   0% used [0x02ac0000, 0x02ac0000, 0x02ad0000)
  to   space 64K,   0% used [0x02ad0000, 0x02ad0000, 0x02ae0000)
 tenured generation   total 4096K, used 0K [0x02ec0000, 0x032c0000, 0x069e0000)
   the space 4096K,   0% used [0x02ec0000, 0x02ec0000, 0x02ec0200, 0x032c0000)
 compacting perm gen  total 12288K, used 2410K [0x069e0000, 0x075e0000, 0x0a9e0000)
   the space 12288K,  19% used [0x069e0000, 0x06c3aa68, 0x06c3ac00, 0x075e0000)
No shared spaces configured.
 
Dynamic libraries:
0x00400000 - 0x00424000  C:\Program Files\Java\jre6\bin\javaw.exe
0x7c920000 - 0x7c9b6000  C:\WINDOWS\system32\ntdll.dll
0x7c800000 - 0x7c91e000  C:\WINDOWS\system32\kernel32.dll
0x77da0000 - 0x77e49000  C:\WINDOWS\system32\ADVAPI32.dll
0x77e50000 - 0x77ee2000  C:\WINDOWS\system32\RPCRT4.dll
0x77fc0000 - 0x77fd1000  C:\WINDOWS\system32\Secur32.dll
0x77d10000 - 0x77da0000  C:\WINDOWS\system32\USER32.dll
0x77ef0000 - 0x77f39000  C:\WINDOWS\system32\GDI32.dll
0x76300000 - 0x7631d000  C:\WINDOWS\system32\IMM32.DLL
0x62c20000 - 0x62c29000  C:\WINDOWS\system32\LPK.DLL
0x73fa0000 - 0x7400b000  C:\WINDOWS\system32\USP10.dll
0x7c340000 - 0x7c396000  C:\Program Files\Java\jre6\bin\msvcr71.dll
0x6d800000 - 0x6da8b000  C:\Program Files\Java\jre6\bin\client\jvm.dll
0x76b10000 - 0x76b3a000  C:\WINDOWS\system32\WINMM.dll
0x6d7b0000 - 0x6d7bc000  C:\Program Files\Java\jre6\bin\verify.dll
0x6d330000 - 0x6d34f000  C:\Program Files\Java\jre6\bin\java.dll
0x6d290000 - 0x6d298000  C:\Program Files\Java\jre6\bin\hpi.dll
0x76bc0000 - 0x76bcb000  C:\WINDOWS\system32\PSAPI.DLL
0x6d7f0000 - 0x6d7ff000  C:\Program Files\Java\jre6\bin\zip.dll
0x10000000 - 0x10031000  C:\gdal-1.7.1\swig\java\gdaljni.dll
0x0ae10000 - 0x0b3ae000  C:\gdal-1.7.1\gdal17.dll
0x0b3c0000 - 0x0b4b4000  C:\app\Admin\product\11.2.0\dbhome_1\bin\OCI.dll
0x78130000 - 0x781cb000  C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.4053_x-ww_e6967989\MSVCR80.dll
0x77be0000 - 0x77c38000  C:\WINDOWS\system32\msvcrt.dll
0x73540000 - 0x7357d000  C:\WINDOWS\system32\ODBC32.dll
0x77180000 - 0x77283000  C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.5512_x-ww_35d4ce83\COMCTL32.dll
0x77f40000 - 0x77fb6000  C:\WINDOWS\system32\SHLWAPI.dll
0x76320000 - 0x76367000  C:\WINDOWS\system32\comdlg32.dll
0x7d590000 - 0x7dd84000  C:\WINDOWS\system32\SHELL32.dll
0x78520000 - 0x785c3000  C:\WINDOWS\WinSxS\x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.30729.1_x-ww_6f74963e\MSVCR90.dll
0x78480000 - 0x7850e000  C:\WINDOWS\WinSxS\x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.30729.1_x-ww_6f74963e\MSVCP90.dll
0x1f840000 - 0x1f857000  C:\WINDOWS\system32\odbcint.dll
0x0b760000 - 0x0bb07000  C:\app\Admin\product\11.2.0\dbhome_1\bin\OraClient11.Dll
0x60f00000 - 0x60ff1000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oracore11.dll
0x61400000 - 0x614ca000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oranls11.dll
0x65830000 - 0x6584b000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraunls11.dll
0x618c0000 - 0x618c7000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orauts.dll
0x71a20000 - 0x71a37000  C:\WINDOWS\system32\WS2_32.dll
0x71a10000 - 0x71a18000  C:\WINDOWS\system32\WS2HELP.dll
0x76990000 - 0x76acd000  C:\WINDOWS\system32\ole32.dll
0x619b0000 - 0x61be3000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oracommon11.dll
0x65630000 - 0x65660000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orasnls11.dll
0x0bb80000 - 0x0c78f000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orageneric11.dll
0x65910000 - 0x65c80000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraxml11.dll
0x7c420000 - 0x7c4a7000  C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.4053_x-ww_e6967989\MSVCP80.dll
0x0c7b0000 - 0x0cbb0000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oran11.dll
0x0cbc0000 - 0x0cc22000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oranl11.dll
0x0cc40000 - 0x0cc76000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orantcp11.dll
0x0cc90000 - 0x0ccdd000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oranldap11.dll
0x642f0000 - 0x64422000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orannzsbb11.dll
0x71a40000 - 0x71a4b000  C:\WINDOWS\system32\WSOCK32.dll
0x638b0000 - 0x63a3c000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraldapclnt11.dll
0x0cd10000 - 0x0cd2e000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orancrypt11.dll
0x76d30000 - 0x76d48000  C:\WINDOWS\system32\iphlpapi.dll
0x65cb0000 - 0x65e38000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orazt11.dll
0x770f0000 - 0x7717b000  C:\WINDOWS\system32\OLEAUT32.dll
0x0cd50000 - 0x0cd9c000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oranro11.dll
0x0cdb0000 - 0x0cdbd000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oranhost11.dll
0x0cdd0000 - 0x0cdd6000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orancds11.dll
0x0cdf0000 - 0x0ce01000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orantns11.dll
0x65e40000 - 0x65ed3000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraztkg11.dll
0x614d0000 - 0x618b2000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orapls11.dll
0x65620000 - 0x65629000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraslax11.dll
0x65850000 - 0x65856000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oravsn11.dll
0x65100000 - 0x653d1000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraplp11.dll
0x632b0000 - 0x63633000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orahasgen11.dll
0x5fdd0000 - 0x5fe25000  C:\WINDOWS\system32\NETAPI32.dll
0x64630000 - 0x646ce000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraocr11.dll
0x646d0000 - 0x6478d000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraocrb11.dll
0x64790000 - 0x6479d000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oraocrutl11.dll
0x0cea0000 - 0x0cf71000  C:\app\Admin\product\11.2.0\dbhome_1\bin\dbghelp.dll
0x62bd0000 - 0x62c0e000  C:\app\Admin\product\11.2.0\dbhome_1\bin\oracell11.dll
0x65690000 - 0x65728000  C:\app\Admin\product\11.2.0\dbhome_1\bin\orasql11.dll
0x650e0000 - 0x650f8000  C:\app\Admin\product\11.2.0\dbhome_1\bin\OraPlc11.Dll
0x719c0000 - 0x719fe000  C:\WINDOWS\system32\mswsock.dll
0x0d410000 - 0x0d465000  C:\WINDOWS\system32\hnetcfg.dll
0x71a00000 - 0x71a08000  C:\WINDOWS\System32\wshtcpip.dll
0x71f00000 - 0x71f04000  C:\WINDOWS\system32\security.dll
0x77c40000 - 0x77c65000  C:\WINDOWS\system32\msv1_0.dll
0x76760000 - 0x7676c000  C:\WINDOWS\system32\cryptdll.dll
0x5adc0000 - 0x5adf7000  C:\WINDOWS\system32\uxtheme.dll
0x74680000 - 0x746cc000  C:\WINDOWS\system32\MSCTF.dll
0x63000000 - 0x63014000  C:\WINDOWS\system32\SynTPFcs.dll
0x77bd0000 - 0x77bd8000  C:\WINDOWS\system32\VERSION.dll
0x0db80000 - 0x0db8a000  C:\gdal-1.7.1\swig\java\gdalconstjni.dll
 
VM Arguments:
jvm_args: -Djava.library.path=C:\gdal-1.7.1\swig\java -Dfile.encoding=GBK 
java_command: oracle.spatial.georaster.gdaltest.GDALTest1
Launcher Type: SUN_STANDARD
 
Environment Variables:
JAVA_HOME=C:\Java\jdk1.6.0_10
CLASSPATH=.;C:\Java\jdk1.6.0_10\lib\dt.jar;C:\Java\jdk1.6.0_10\lib\tools.jar;C:\GeoRaster\jar\11gR2\ojdbc5.jar;C:\Java\jdk1.6.0_10\jre\lib\ext\jai_codec.jar;C:\Java\jdk1.6.0_10\jre\lib\ext\jai_core.jar;C:\GeoRaster\jar\11gR2\xdb.jar;C:\GeoRaster\jar\11gR2\xmlcomp.jar;C:\GeoRaster\jar\11gR2\xmlparserv2.jar;C:\GeoRaster\jar\11gR2\xxschema.jar;C:\GeoRaster\jar\11gR2\jewt4.jar;C:\GeoRaster\jar\11gR2\sdoapi.jar;C:\GeoRaster\jar\11gR2\sdoutl.jar;C:\GeoRaster\jar\11gR2\xtiff-jai.jar;C:\GeoRaster\jar\11gR2\geotiff-jai.jar;C:\GeoRaster\jar\11gR2\jai_imageio.jar;C:\Java\jdk1.6.0_10\jre\lib\ext\mlibwrapper_jai.jar;C:\GeoRaster\jar\11gR2\georaster_tools.jar;C:\app\Admin\product\11.2.0\dbhome_1\sqldeveloper\jlib\orai18n.jar;..\gdal.jar
PATH=C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:\app\Admin\product\11.2.0\dbhome_1\bin;C:\Program Files\ThinkPad\Utilities;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Common Files\Thunder Network\KanKan\Codecs;C:\Java\jdk1.6.0_10\bin;C:\Java\jdk1.6.0_10\jre\bin;C:\gdal-1.7.1;C:\apache-ant-1.8.1\bin
USERNAME=Admin
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 14 Stepping 12, GenuineIntel
 
 
 
---------------  S Y S T E M  ---------------
 
OS: Windows XP Build 2600 Service Pack 3
 
CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 14 stepping 12, cmov, cx8, fxsr, mmx, sse, sse2, sse3
 
Memory: 4k page, physical 2087276k(334648k free), swap 4022628k(2155428k free)
 
vm_info: Java HotSpot(TM) Client VM (14.1-b02) for windows-x86 JRE (1.6.0_15-b03), built on Jul 25 2009 01:22:46 by "java_re" with MS VC++ 7.1
 
time: Wed Aug 04 17:34:44 2010
elapsed time: 1 seconds
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/9027d7bb/attachment-0001.html
From tjeffery at gmail.com  Wed Aug  4 09:27:59 2010
From: tjeffery at gmail.com (Tom Jeffery)
Date: Wed Aug  4 09:28:01 2010
Subject: [gdal-dev] Editing attributes with ogr causing corrupt shapefile
Message-ID: <1280928479215-5372483.post@n2.nabble.com>


I'm working with GDAL's Java bindings, and trying to simply add an index
field to a shapefile.  This is working, but the resulting shapefile gets
corrupted somehow, where viewing it in ArcMap causes the message "Warning,
inconsistent extent." and viewing it in ArcCatalog shows all the points in
the shapefile in the very upper left corner of the preview.  (Viewing the
metadata tab in ArcCatalog will crash the program.)

Below is the method where I'm adding the index field... is there anything
I'm missing / obviously wrong here?  Any help would be greatly appreciated!

Thanks,
-Tom Jeffery

	public static void addIndex(File input, String fieldName) throws Exception
{
		ogr.RegisterAll();
		DataSource dataSource = ogr.Open(input.getAbsolutePath(), true);
		
		if (dataSource == null) {
			throw new Exception("Error opening input file while trying to add
index.");
		}
		
		// Shapefiles have a single layer
		Layer layer = dataSource.GetLayer(0);
		
		// Creating an OFTInteger alone didn't seem to do the trick, but setting
the width to 9 created a "Long Integer" 
		// field (as viewed in ESRI)
		FieldDefn newField = new FieldDefn(fieldName, ogr.OFTInteger);
		newField.SetWidth(9);
		int result = layer.CreateField(newField);
		if (result != ogr.OGRERR_NONE)
			throw new Exception("Got OGR error code: " + result + " when trying to
add new field to shapefile.");
		
		for (int i = 0; i < layer.GetFeatureCount(); i++) {
			org.gdal.ogr.Feature feature = layer.GetFeature(i);
			feature.SetField(fieldName, i);
			layer.SetFeature(feature);
			feature.delete();
		}
		// you must call "delete" (or Destroy in c/c++) to properly close / write
the datasource.. 
		layer.delete();
		dataSource.delete();
	}
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5372483.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Wed Aug  4 09:31:54 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Aug  4 09:31:56 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gRVhDRVBUSU9OX0FDQ0VTU19WSU9MQVRJT04sIHdoZW4gdXNpbmcgR0RBTCBKYXZhIEFQSQ==?=
Message-ID: <20100804133154.2587.qmail@s466.sureserver.com>

I noticed that you are reading and writing from the same GeoRaster, "georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0". Is that what you want?


>  -------Original Message-------
>  From:  <181797177@qq.com>
>  To: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: [gdal-dev] EXCEPTION_ACCESS_VIOLATION, when using GDAL Java API
>  Sent: Aug 04 '10 08:23
>  
>  Hi,all:
>  I use GDAL Java API to write raster data to Oracle Spatial GeoRaster
>  Object, and encouter a strange problem:
>  #
>  # A fatal error has been detected by the Java Runtime Environment:
>  #
>  #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0afa0770, pid=5904,
>  tid=5548
>  #
>  # JRE version: 6.0_15-b03
>  # Java VM: Java HotSpot(TM) Client VM (14.1-b02 mixed mode windows-x86 )
>  # Problematic frame:
>  # C  [gdal17.dll+0x190770]
>  #
>  # An error report file with more information is saved as:
>  # D:\workspace\GDALTest\hs_err_pid5904.log
>  #
>  # If you would like to submit a bug report, please visit:
>  #   [LINK: http://java.sun.com/webapps/bugreport/crash.jsp]
>  http://java.sun.com/webapps/bugreport/crash.jsp
>  # The crash happened outside the Java Virtual Machine in native code.
>  
>  This is my Java codes:
>  
>  import org.gdal.gdal.gdal;
>  import org.gdal.gdalconst.gdalconstConstants;
>  import org.gdal.gdal.Band;
>  import org.gdal.gdal.Dataset;
>  import org.gdal.gdal.Driver;
>  import java.nio.ByteBuffer;
>  public class GDALTest1 {
>  /**
>  * @param args
>  */
>  public static void main(String[] args) {
>  
>  Dataset Dataset1;
>  Dataset Dataset2;
>  Band Band1;
>  Band Band2;
>  gdal.AllRegister();
>  //  Dataset1 =
>  gdal.Open("georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0");
>  Dataset1 =
>  gdal.Open("georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0");
>  //  Dataset2 =
>  gdal.Open("D:/gdal_charles/GeoRasterDemo/private2/georaster_demo/demo_data/data/237898.tif",
>  //    gdalconstConstants.GA_Update);
>  Dataset2 =
>  gdal.Open("georaster:georaster/georaster@localhost:1521/orcl,rdt_2,0",
>  gdalconstConstants.GA_Update);
>  Band1 = Dataset1.GetRasterBand(1);
>  Band2 = Dataset2.GetRasterBand(1);
>  Dataset2.SetProjection(Dataset1.GetProjection());
>  Dataset2.SetGeoTransform(Dataset1.GetGeoTransform());
>  System.out.println("Passing information from input dataset to output
>  dataset");
>  int XSize = 100;
>  ByteBuffer buffer = ByteBuffer.allocateDirect(XSize);
>  buffer = Band1.ReadRaster_Direct(0,0,XSize,1);
>  Band2.WriteRaster_Direct(0,0,XSize,1,buffer);
>  Dataset2.FlushCache();
>  System.out.println(buffer.getLong());
>  Dataset1.delete();
>  Dataset2.delete();
>  }
>  }
>  
>  
>  When executing the sentence "Dataset2.FlushCache();", the above problem
>  rises.
>  
>  The error report is as following:
>  
>  #
>  # A fatal error has been detected by the Java Runtime Environment:
>  #
>  #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0afa0770, pid=5904,
>  tid=5548
>  #
>  # JRE version: 6.0_15-b03
>  # Java VM: Java HotSpot(TM) Client VM (14.1-b02 mixed mode windows-x86 )
>  # Problematic frame:
>  # C  [gdal17.dll+0x190770]
>  #
>  # If you would like to submit a bug report, please visit:
>  #   [LINK: http://java.sun.com/webapps/bugreport/crash.jsp]
>  http://java.sun.com/webapps/bugreport/crash.jsp
>  # The crash happened outside the Java Virtual Machine in native code.
>  # See problematic frame for where to report the bug.
>  #
>  
>  ---------------  T H R E A D  ---------------
>  
>  Current thread (0x00847c00):  JavaThread "main" [_thread_in_native,
>  id=5548, stack(0x008e0000,0x00930000)]
>  
>  siginfo: ExceptionCode=0xc0000005, reading address 0x0000000c
>  
>  Registers:
>  EAX=0x0d5335d4, EBX=0x00200000, ECX=0x00000000, EDX=0x0b678908
>  ESP=0x0092fb78, EBP=0x0e1d0020, ESI=0x0b676b38, EDI=0x00000000
>  EIP=0x0afa0770, EFLAGS=0x00010217
>  
>  Top of Stack: (sp=0x0092fb78)
>  0x0092fb78:   0aedb0f8 0d5335d4 0e1d0020 00200000
>  0x0092fb88:   00000000 0092fc68 00000000 0b679810
>  0x0092fb98:   0aed6b97 00000000 00000000 00000000
>  0x0092fba8:   00000000 0dfc0020 0b6788d0 00000000
>  0x0092fbb8:   0b67cf38 0ae40cf3 00000000 00000000
>  0x0092fbc8:   0dfc0020 00000000 0ae3cb70 00000000
>  0x0092fbd8:   0b679810 00000000 0ae3e9e7 00000000
>  0x0092fbe8:   00000000 00000000 06c10db0 0b67c9e8
>  
>  Instructions: (pc=0x0afa0770)
>  0x0afa0760:   c4 08 f7 d8 1b c0 f7 d0 23 44 24 0c c2 0c 00 cc
>  0x0afa0770:   8b 41 0c 8b 54 24 08 56 8b 74 24 10 50 6a 01 6a
>  
>  
>  Stack: [0x008e0000,0x00930000],  sp=0x0092fb78,  free space=318k
>  Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
>  code)
>  C  [gdal17.dll+0x190770]
>  
>  Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
>  j  org.gdal.gdal.gdalJNI.Dataset_FlushCache(JLorg/gdal/gdal/Dataset;)V+0
>  j  org.gdal.gdal.Dataset.FlushCache()V+5
>  j
>  oracle.spatial.georaster.gdaltest.GDALTest1.main([Ljava/lang/String;)V+93
>  v  ~StubRoutines::call_stub
>  
>  ---------------  P R O C E S S  ---------------
>  
>  Java Threads: ( => current thread )
>  0x0ab17800 JavaThread "Low Memory Detector" daemon [_thread_blocked,
>  id=4276, stack(0x0ad60000,0x0adb0000)]
>  0x0ab11400 JavaThread "CompilerThread0" daemon [_thread_blocked, id=1824,
>  stack(0x0ad10000,0x0ad60000)]
>  0x0ab0c400 JavaThread "Attach Listener" daemon [_thread_blocked, id=1452,
>  stack(0x0acc0000,0x0ad10000)]
>  0x0ab23c00 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
>  id=2400, stack(0x0ac70000,0x0acc0000)]
>  0x0aaf5800 JavaThread "Finalizer" daemon [_thread_blocked, id=4672,
>  stack(0x0ac20000,0x0ac70000)]
>  0x0aaf4400 JavaThread "Reference Handler" daemon [_thread_blocked,
>  id=4668, stack(0x0abd0000,0x0ac20000)]
>  =>0x00847c00 JavaThread "main" [_thread_in_native, id=5548,
>  stack(0x008e0000,0x00930000)]
>  
>  Other Threads:
>  0x0aaf1400 VMThread [stack: 0x0ab80000,0x0abd0000] [id=4820]
>  0x0ab21c00 WatcherThread [stack: 0x0adb0000,0x0ae00000] [id=1532]
>  
>  VM state:not at safepoint (normal execution)
>  
>  VM Mutex/Monitor currently owned by a thread: None
>  
>  Heap
>  def new generation   total 960K, used 596K [0x029e0000, 0x02ae0000,
>  0x02ec0000)
>  eden space 896K,  66% used [0x029e0000, 0x02a75210, 0x02ac0000)
>  from space 64K,   0% used [0x02ac0000, 0x02ac0000, 0x02ad0000)
>  to   space 64K,   0% used [0x02ad0000, 0x02ad0000, 0x02ae0000)
>  tenured generation   total 4096K, used 0K [0x02ec0000, 0x032c0000,
>  0x069e0000)
>  the space 4096K,   0% used [0x02ec0000, 0x02ec0000, 0x02ec0200,
>  0x032c0000)
>  compacting perm gen  total 12288K, used 2410K [0x069e0000, 0x075e0000,
>  0x0a9e0000)
>  the space 12288K,  19% used [0x069e0000, 0x06c3aa68, 0x06c3ac00,
>  0x075e0000)
>  No shared spaces configured.
>  
>  Dynamic libraries:
>  0x00400000 - 0x00424000  C:\Program Files\Java\jre6\bin\javaw.exe
>  0x7c920000 - 0x7c9b6000  C:\WINDOWS\system32\ntdll.dll
>  0x7c800000 - 0x7c91e000  C:\WINDOWS\system32\kernel32.dll
>  0x77da0000 - 0x77e49000  C:\WINDOWS\system32\ADVAPI32.dll
>  0x77e50000 - 0x77ee2000  C:\WINDOWS\system32\RPCRT4.dll
>  0x77fc0000 - 0x77fd1000  C:\WINDOWS\system32\Secur32.dll
>  0x77d10000 - 0x77da0000  C:\WINDOWS\system32\USER32.dll
>  0x77ef0000 - 0x77f39000  C:\WINDOWS\system32\GDI32.dll
>  0x76300000 - 0x7631d000  C:\WINDOWS\system32\IMM32.DLL
>  0x62c20000 - 0x62c29000  C:\WINDOWS\system32\LPK.DLL
>  0x73fa0000 - 0x7400b000  C:\WINDOWS\system32\USP10.dll
>  0x7c340000 - 0x7c396000  C:\Program Files\Java\jre6\bin\msvcr71.dll
>  0x6d800000 - 0x6da8b000  C:\Program Files\Java\jre6\bin\client\jvm.dll
>  0x76b10000 - 0x76b3a000  C:\WINDOWS\system32\WINMM.dll
>  0x6d7b0000 - 0x6d7bc000  C:\Program Files\Java\jre6\bin\verify.dll
>  0x6d330000 - 0x6d34f000  C:\Program Files\Java\jre6\bin\java.dll
>  0x6d290000 - 0x6d298000  C:\Program Files\Java\jre6\bin\hpi.dll
>  0x76bc0000 - 0x76bcb000  C:\WINDOWS\system32\PSAPI.DLL
>  0x6d7f0000 - 0x6d7ff000  C:\Pr
From rush at winkey.org  Wed Aug  4 10:04:36 2010
From: rush at winkey.org (brian)
Date: Wed Aug  4 10:04:41 2010
Subject: [gdal-dev] Raster Strategies Examples
In-Reply-To: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>
References: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>
Message-ID: <1280930676.30564.10.camel@winkey.org>

Edi,

Personaly I beleve gdalwarp is the wrong tool for the job, you already
have it all set up for mapserver so just use shp2img.



On Mon, 2010-08-02 at 17:14 +0200, Edi KARADUMI wrote:
> as you may know, i have very slow performance when i zoom out and im
> stucked here. As i have read i should make a copy of the tiles with
> reduced resolution. Merge the tiles together and use min/max scale to
> show different layers in different scales. the min/max scales i zoom
> in/out are 100/1200000. Now my questions are 
> 
> - How can i calculate the scale where i should create another layer of
> the tiles, or i shoud see it with some tests? 
> 
> - how much should be the resolution of the new layer? 
> 
> - is there any tools or program to merge the tiles? merging 6000 tiles
> with the gdalwarp by writing the command by myself is frustrating 
> 
> - how many tiles should i merge together to create the new layer? (how
> many tiles should have the new layer) i know that in each zoomscale
> its better to appear only one tile but i dont know how to calculate
> it 
> 
> - the tiles that i should merge are the originals or those with
> internal tiling and overviews? 

From robert.zermeno at navy.mil  Wed Aug  4 10:46:46 2010
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Wed Aug  4 10:48:27 2010
Subject: [gdal-dev] Programmatically saving out a .tif file
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA91025777A8@nawechlkez02v.nadsuswe.nads.navy.mil>

Hi everyone,

I know I am having a programming issues here because using GDAL apps provided, it outputs correctly.  I am using the SVN daily build of 7-21-2010 in Borland C++.

My issue: First, I converted the file , world.jp2, taken from http://www.microimages.com/gallery/jp2/ to TIF format via GDAL apps.  Programmatically, I can read in this RGB image correctly.  The problem is saving it out programmatically.  My output results in an image that appears to having either missing information or somehow horizontal scanlines of black are inserted.  It looks like your looking at an old TV that visually shows the scan lines of the video feed.  It is consistent throughout the image.

I wish I can put up the image for you to see.  I do not have a host site or server to do so.

Solution:  Instead of keeping default CSLSetNameValue( pzOptions, "INTERLEAVE", "PIXEL" ) , I change it to CSLSetNameValue( pzOptions, "INTERLEAVE", "BAND" ).
  The output file is the same as the input file.  Only problem now is Microsoft Windows Picture and Fax Viewer can no longer read the image format.  I guess BAND interleave is a viable option, but not really used often.

Here are snippets of my code that will help explain what I am doing, and see if you guys can help me.  The problem with my solution is when using gdalinfo.exe on the file, original image INTERLEAVE = PIXEL and not BAND, so I want to spit out the same file in the same format.

PROGRAM:
        //Retrieve the RGB colors....
        RedBand   = GDALGetRasterBand(fileDataset, 1);
        GreenBand = GDALGetRasterBand(fileDataset, 2);
        BlueBand  = GDALGetRasterBand(fileDataset, 3);
	imageBits = (BYTE *) malloc(curGeoData->getImageWidth() *
						 curGeoData->getImageHeight() *
						curGeoData->getBitsPerPixel());

//Read in whole image: This example is for 1 scanLine read.  I have this in a For loop.



             RedError   =				GDALRasterIO( RedBand, GF_Read,
                                                  0,
                                                  curRow,
                                                  curGeoData->getImageWidth(),
                                                  1,
                                                  RedStrip,
                                                  curGeoData->getImageWidth(),
                                                  1,
                                                  GDT_Byte,
                                                  0,
                                                  0 );

             GreenError =				GDALRasterIO( GreenBand, GF_Read,
                                                  0 ,
                                                  curRow,
                                                  curGeoData->getImageWidth(),
                                                  1,
                                                  GreenStrip,
                                                  curGeoData->getImageWidth(),
                                                  1,
                                                  GDT_Byte,
                                                  0,
                                                  0 );

             BlueError  =				GDALRasterIO( BlueBand, GF_Read,
                                                  0,
                                                  curRow,
                                                  curGeoData->getImageWidth(),
                                                  1,
                                                  BlueStrip,
                                                  curGeoData->getImageWidth(),
                                                  1,
                                                  GDT_Byte,
                                                  0,
                                                  0 );

             if(RedError != CE_None || GreenError != CE_None || BlueError != CE_None)
             {
                 //Error occured, return nothing to show error reading in bits...
                 return NULL;
             }
            //save out to output image buffer...
            //Grab pixel per pixel
            for(int col =0; col < curGeoData->getImageWidth(); col++)
            {
                imageBits[rawLoc++] = BlueStrip[col];
                imageBits[rawLoc++] = GreenStrip[col];
                imageBits[rawLoc++] = RedStrip[col];
            }



//NOTE: as you can see, I have to place the pixels in BGRBGRBGRBGR in order for my Bitmap canvas to properly display.  Its not in RGBRGBRGB...

//NOW, Time to save out the FILE, this is just snippets not whole source...

    GDALDriverH hDriver;
    GDALDatasetH hDstDS;
    if(imageBpp == 3)
    {
        //pzOptions = CSLSetNameValue( pzOptions, "INTERLEAVE", "PIXEL" );
        pzOptions = CSLSetNameValue( pzOptions, "INTERLEAVE", "BAND" );
    }

    hDriver = GDALGetDriverByName( "GTiff");
    hDstDS  = GDALCreate( hDriver, newFileName.c_str(),
                                newImageWidth, newImageHeight,
                                imageBpp, GDT_Byte, pzOptions );

    //Output Geo-referenced data if necessary...
    if( hDstDS != NULL )
    {

       else if(imageBpp == 3)
        {
            //24-bpp (COLOR) RGB...
            GDALRasterBandH Redout = GDALGetRasterBand( hDstDS, 1 );
            GDALRasterBandH Blueout = GDALGetRasterBand( hDstDS, 2 );
            GDALRasterBandH Greenout = GDALGetRasterBand( hDstDS, 3 );


             //GDALRasterBandH hBandout = GDALGetRasterBand( hDstDS, 1 );

            if(Redout == NULL || Blueout == NULL || Greenout == NULL)
            {
                //Oh no!!
                curError = CE_Failure;
                return false;
            }


//NOTE: Solution to RGB...is Break up my interleaved array, RGBRGBRGBRGB, and separate into
//arrays so will be [0] = RRRRRRRRRR, [1] = GGGGGGGGGG, [2] = BBBBBBBBB...
//THen save to output like I did reading in...

            CPLErr RedError   = CE_None;
            CPLErr BlueError  = CE_None;
            CPLErr GreenError = CE_None;

           BlueError = GDALRasterIO( Blueout, GF_Write, 0, 0, newImageWidth, newImageHeight,
            imageBits + 1, newImageWidth , newImageHeight , GDT_Byte, //GDT_Float32,
            3, newImageWidth * 3);

            GreenError = GDALRasterIO( Greenout, GF_Write, 0, 0, newImageWidth, newImageHeight,
            imageBits + 0, newImageWidth , newImageHeight , GDT_Byte, //GDT_Float32,
            3, newImageWidth * 3);

           RedError =  GDALRasterIO( Redout, GF_Write, 0, 0, newImageWidth, newImageHeight,
            imageBits + 2, newImageWidth, newImageHeight, GDT_Byte, //GDT_Float32,
            3, newImageWidth * 3);

           GDALClose(Redout);
           GDALClose(Greenout);
           GDALClose(Blueout);
           GDALClose( hDstDS );
           Redout   = NULL;
           Greenout = NULL;
           Blueout  = NULL;
           hDstDS   = NULL;
           if(RedError != CE_None)
           {
              //Error occured, return nothing to show error reading in bits...
              curError = RedError;
              return false;
           }
           else if(GreenError != CE_None)
           {
              //Error occured, return nothing to show error reading in bits...
              curError = GreenError;
              return false;
           }
           else if(BlueError != CE_None)
           {
              //Error occured, return nothing to show error reading in bits...
              curError = BlueError;
              return false;
           }

    }



Assume that newImageWidth, newImageHeight are the size of image I mentioned in beginning of message.  Tell my what you think about the way I
Am approaching it.  Does it seem correct or am I misinterpreting something?  Any suggestions is a plus.  It is a working solution, but since 
My output file cannot be opened with native Microsoft programs, its not acceptable.  I hope I have given enough information.  I tried to keep it short.

Thanks in advance,

Robert
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5695 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/eb157bd7/smime-0001.bin
From robert.zermeno at navy.mil  Wed Aug  4 10:54:53 2010
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Wed Aug  4 10:55:33 2010
Subject: [gdal-dev] WinCE programming support
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA91025777A9@nawechlkez02v.nadsuswe.nads.navy.mil>

Hi GDAL,

At my work, I have been assigned to support TIF images on Windows CE platform.  My task is to support Pocket PC Arch. From 2002 to present.  So,
I am building from EVC 3.0 to MSVC 2005 with Windows Moblie 6.  I am using GDAL to accomplish this task.  Now, I noticed that no one is maintaining 
Support for it anymore.
I have taken the current SVN daily build and have successfully compiled GDAL for WinCE using Visual Studio 2005.  I would like to throw myself
Into the task in updating WinCE support.  What would I have to do to get approved to be on the team?

Thanks,

Robert
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5695 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/317563d5/smime.bin
From chaitanya.ch at gmail.com  Wed Aug  4 11:00:16 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug  4 11:00:18 2010
Subject: [gdal-dev] Editing attributes with ogr causing corrupt shapefile
In-Reply-To: <1280928479215-5372483.post@n2.nabble.com>
References: <1280928479215-5372483.post@n2.nabble.com>
Message-ID: <AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>

Tom,

Can you check the destination shapefile with 'ogrinfo' and see if it works?
If ogrinfo gives a valid output of the new file, check with 'ogrinfo -al'
and compare it with the old file's output.
( http://www.gdal.org/ogrinfo.html )

On Wed, Aug 4, 2010 at 6:57 PM, Tom Jeffery <tjeffery@gmail.com> wrote:

>
> I'm working with GDAL's Java bindings, and trying to simply add an index
> field to a shapefile.  This is working, but the resulting shapefile gets
> corrupted somehow, where viewing it in ArcMap causes the message "Warning,
> inconsistent extent." and viewing it in ArcCatalog shows all the points in
> the shapefile in the very upper left corner of the preview.  (Viewing the
> metadata tab in ArcCatalog will crash the program.)
>
> Below is the method where I'm adding the index field... is there anything
> I'm missing / obviously wrong here?  Any help would be greatly appreciated!
>
> Thanks,
> -Tom Jeffery
>
>        public static void addIndex(File input, String fieldName) throws
> Exception
> {
>                ogr.RegisterAll();
>                DataSource dataSource = ogr.Open(input.getAbsolutePath(),
> true);
>
>                if (dataSource == null) {
>                        throw new Exception("Error opening input file while
> trying to add
> index.");
>                }
>
>                // Shapefiles have a single layer
>                Layer layer = dataSource.GetLayer(0);
>
>                // Creating an OFTInteger alone didn't seem to do the trick,
> but setting
> the width to 9 created a "Long Integer"
>                // field (as viewed in ESRI)
>                FieldDefn newField = new FieldDefn(fieldName,
> ogr.OFTInteger);
>                newField.SetWidth(9);
>                int result = layer.CreateField(newField);
>                if (result != ogr.OGRERR_NONE)
>                        throw new Exception("Got OGR error code: " + result
> + " when trying to
> add new field to shapefile.");
>
>                for (int i = 0; i < layer.GetFeatureCount(); i++) {
>                        org.gdal.ogr.Feature feature = layer.GetFeature(i);
>                        feature.SetField(fieldName, i);
>                        layer.SetFeature(feature);
>                        feature.delete();
>                }
>                // you must call "delete" (or Destroy in c/c++) to properly
> close / write
> the datasource..
>                layer.delete();
>                dataSource.delete();
>        }
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5372483.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/e7e24dd7/attachment.html
From warmerdam at pobox.com  Wed Aug  4 11:42:01 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug  4 11:42:05 2010
Subject: [gdal-dev] WinCE programming support
In-Reply-To: <F8A8A114E3F41D4D9157F1BECCA3BA91025777A9@nawechlkez02v.nadsuswe.nads.navy.mil>
References: <F8A8A114E3F41D4D9157F1BECCA3BA91025777A9@nawechlkez02v.nadsuswe.nads.navy.mil>
Message-ID: <4C598A49.7030008@pobox.com>

Zermeno, Robert J CIV NAVAIR, 472100D wrote:
> Hi GDAL,
> 
> At my work, I have been assigned to support TIF images on Windows CE platform.  My task is to support Pocket PC Arch. From 2002 to present.  So,
> I am building from EVC 3.0 to MSVC 2005 with Windows Moblie 6.  I am using GDAL to accomplish this task.  Now, I noticed that no one is maintaining 
> Support for it anymore.
> I have taken the current SVN daily build and have successfully compiled GDAL for WinCE using Visual Studio 2005.  I would like to throw myself
> Into the task in updating WinCE support.  What would I have to do to get approved to be on the team?

Robert,

It would be great to have you take this on!  I'd suggest you start by
submitting a few tickets with patches.  Once those "prove you", one of us
can make a motion to add you as a committer and you can do stuff more
directly.

We currently have documentation on the wince support at:

   http://www.gdal.org/wince.html

It might make sense for you to translate that into a Trac wiki page so it
is easier for you to update.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From zdenek at vrablik.org  Wed Aug  4 12:07:47 2010
From: zdenek at vrablik.org (=?UTF-8?B?WmRlbsSbayBWcsOhYmzDrWs=?=)
Date: Wed Aug  4 12:07:51 2010
Subject: [gdal-dev] GDAL 1.7.2 Windows compilation JAVA JNI doesn't work
Message-ID: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>

Hi all,

I have problem to use java jni generated dll files. I have available
precompiled dll files with internal formats + MrSID and ECW. These dll
works fine including JNI.
Now I have compiled gdal myself, because I need add more formats (GPX,
GML, KML ) and later possibly SDE.

I can't load the  gdaljni.dll into java.
I am getting this error:
Native library load failed.
java.lang.UnsatisfiedLinkError:
C:\ZdenekTC\lib\native\GDAL_DATA\gdaljni.dll: The operating system
cannot run %1

Building env: Windows XP, Microsoft Windows SDK 7.0; Visual Studio
2005, gdal 1.7.2; crosscompiler
Running env: Windows 2003 SP2, sun JDK 6, Tomcat 6, gdal 1.7.2

I am sure I have PE+ dll files. (tested with msys file command)

I tried compile HelloWorld from Java JNI tutorial and I have got same issue.
rem original cl -IC:\Java1.6\include -IC:\Java1.6\include\win32 /O1
/Op /Zi /MD /D _STATIC_CPPLIB /Wp64 /W3 /DNDEBUG /DWIN32 /DIAL
/D_LITTLE_ENDIAN /D_AMD64_ /Damd64 /DWIN32_LEAN_AND_MEAN /c *.c
cl -IC:\Java1.6\include -IC:\Java1.6\include\win32 /O1 /Op /Zi /MT /D
_STATIC_CPPLIB /Wp64 /W3 /DNDEBUG /DWIN32 /DIAL /D_LITTLE_ENDIAN
/D_AMD64_ /Damd64 /DWIN32_LEAN_AND_MEAN /DJNI_IMPLEMENTATION /c *.c
rem original link /dll /opt:REF /incremental:no /debug /out:HelloWorld.dll *.obj
link /verbose /dll /opt:REF /incremental:no /out:HelloWorld.dll *.obj

The HelloWorld dll works fine without the MD flag.
Removing MD parameter doesn't work in gdal JNI dll files.

Do I have to add there any parameter to get gdal jni binding compilled
correctly?

I think the MD parameter is necessary if there is another part of
application loading same dll files?


Here is standard output from compiling (the swig warning messages are
not included):

	del .\setup.ini
	echo "C:\GDAL\gdal1.7.1Win32Win64\win64\gdal172Dist" > .\setup.ini
	findstr /c:"define GDAL_RELEASE_NAME " ..\gcore\gdal_version.h  >> .\setup.ini
	cd java
	if not exist org\gdal\gdal mkdir org\gdal\gdal
	cd gdal
	swig.exe -java -c++ -package org.gdal.gdal -outdir ../org/gdal/gdal
-I../../include/java -o gdal_wrap.cpp ../../../include/gdal.i
	cd ..
	cd org\gdal
	if not exist ogr mkdir ogr
	cd ../../
	cd ogr
	swig.exe -java -c++ -package org.gdal.ogr -outdir ../org/gdal/ogr
-I../../include/java -o ogr_wrap.cpp ../../../include/ogr.i
	cd ..
	cd org\gdal
	if not exist osr mkdir osr
	cd ../../
	cd osr
	swig.exe -java -c++ -package org.gdal.osr -outdir ../org/gdal/osr
-I../../include/java -o osr_wrap.cpp ../../../include/osr.i
	cd ..
	cd org\gdal
	if not exist gdalconst mkdir gdalconst
	cd ../../
	cd const
	swig.exe -java -c++ -package org.gdal.gdalconst -outdir
../org/gdal/gdalconst -I../../include/java -o gdalconst_wrap.cpp
../../../include/gdalconst.i
	cd ..
	nmake /nologo /f makefile.vc
	cd ogr
	nmake /nologo /f makefile.vc
	cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
-I..\..\..\ogr -I..\..\..\gcore  -I..\..\..\alg
-I..\..\..\ogr\ogrsf_frmts  -DOGR_ENABLED  -IC:\Java1.5\include
-IC:\Java1.5\include\win32 /c ogr_wrap.cpp
ogr_wrap.cpp
	xcopy /D  /Y *.obj ..
C:ogr_wrap.obj
1 File(s) copied
	cd ..
	link ogr_wrap.obj ..\..\gdal_i.lib /out:ogrjni.dll /DLL
Microsoft (R) Incremental Linker Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.

   Creating library ogrjni.lib and object ogrjni.exp
	if exist ogrjni.dll.manifest mt -manifest ogrjni.dll.manifest
-outputresource:ogrjni.dll;2
Microsoft (R) Manifest Tool version 5.2.3790.2075

Copyright (c) Microsoft Corporation 2005.

All rights reserved.

	cd gdal
	nmake /nologo /f makefile.vc
	cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
-I..\..\..\ogr -I..\..\..\gcore  -I..\..\..\alg
-I..\..\..\ogr\ogrsf_frmts  -DOGR_ENABLED  -IC:\Java1.5\include
-IC:\Java1.5\include\win32 /c gdal_wrap.cpp
gdal_wrap.cpp
gdal_wrap.cpp(989) : warning C4996: 'stricmp': The POSIX name for this
item is deprecated. Instead, use the ISO C++ conformant name:
_stricmp. See online help for details.
        C:\Program Files\Microsoft Visual Studio
8\VC\INCLUDE\string.h(215) : see declaration of 'stricmp'
gdal_wrap.cpp(991) : warning C4996: 'stricmp': The POSIX name for this
item is deprecated. Instead, use the ISO C++ conformant name:
_stricmp. See online help for details.
        C:\Program Files\Microsoft Visual Studio
8\VC\INCLUDE\string.h(215) : see declaration of 'stricmp'
gdal_wrap.cpp(993) : warning C4996: 'stricmp': The POSIX name for this
item is deprecated. Instead, use the ISO C++ conformant name:
_stricmp. See online help for details.
        C:\Program Files\Microsoft Visual Studio
8\VC\INCLUDE\string.h(215) : see declaration of 'stricmp'
gdal_wrap.cpp(1019) : warning C4267: 'argument' : conversion from
'size_t' to 'int', possible loss of data
	xcopy /D  /Y *.obj ..
C:gdal_wrap.obj
1 File(s) copied
	cd ..
	link gdal_wrap.obj ..\..\gdal_i.lib /out:gdaljni.dll /DLL
Microsoft (R) Incremental Linker Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.

   Creating library gdaljni.lib and object gdaljni.exp
	if exist gdaljni.dll.manifest mt -manifest gdaljni.dll.manifest
-outputresource:gdaljni.dll;2
Microsoft (R) Manifest Tool version 5.2.3790.2075

Copyright (c) Microsoft Corporation 2005.

All rights reserved.

	cd const
	nmake /nologo /f makefile.vc
	cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
-I..\..\..\ogr -I..\..\..\gcore  -I..\..\..\alg
-I..\..\..\ogr\ogrsf_frmts  -DOGR_ENABLED  -IC:\Java1.5\include
-IC:\Java1.5\include\win32 /c gdalconst_wrap.cpp
gdalconst_wrap.cpp
	xcopy /D  /Y *.obj ..
C:gdalconst_wrap.obj
1 File(s) copied
	cd ..
	link gdalconst_wrap.obj ..\..\gdal_i.lib /out:gdalconstjni.dll /DLL
Microsoft (R) Incremental Linker Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.

   Creating library gdalconstjni.lib and object gdalconstjni.exp
	if exist gdalconstjni.dll.manifest mt -manifest
gdalconstjni.dll.manifest -outputresource:gdalconstjni.dll;2
Microsoft (R) Manifest Tool version 5.2.3790.2075

Copyright (c) Microsoft Corporation 2005.

All rights reserved.

	cd osr
	nmake /nologo /f makefile.vc
	cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
-I..\..\..\ogr -I..\..\..\gcore  -I..\..\..\alg
-I..\..\..\ogr\ogrsf_frmts  -DOGR_ENABLED  -IC:\Java1.5\include
-IC:\Java1.5\include\win32 /c osr_wrap.cpp
osr_wrap.cpp
	xcopy /D  /Y *.obj ..
C:osr_wrap.obj
1 File(s) copied
	cd ..
	link osr_wrap.obj ..\..\gdal_i.lib /out:osrjni.dll /DLL
Microsoft (R) Incremental Linker Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.

   Creating library osrjni.lib and object osrjni.exp
	if exist osrjni.dll.manifest mt -manifest osrjni.dll.manifest
-outputresource:osrjni.dll;2
Microsoft (R) Manifest Tool version 5.2.3790.2075

Copyright (c) Microsoft Corporation 2005.

All rights reserved.

	set JAVA_HOME="C:\Java1.5"
	C:\ant\bin\ant
Buildfile: build.xml

compile:
    [javac] Compiling 34 source files to
C:\GDAL\gdal1.7.1Win32Win64\win64\gdal-1.7.2\swig\java\build\classes
     [echo] compilation complete

archive:
      [jar] Building jar:
C:\GDAL\gdal1.7.1Win32Win64\win64\gdal-1.7.2\swig\java\gdal.jar

compile_tests:
     [echo] compilation of tests complete

all:

BUILD SUCCESSFUL
Total time: 1 second


nmake.opt diff is
--- nmake.opt.original	2010-04-23 16:22:12 +0100
+++ nmake.opt	2010-08-04 16:21:14 +0100
@@ -39,7 +39,7 @@
 # But the paths *should* be absolute (relative paths mess up in submakefiles).

 !IFNDEF GDAL_HOME
-GDAL_HOME = "C:\warmerda\bld"
+GDAL_HOME = "C:\GDAL\gdal1.7.1Win32Win64\win64\gdal172Dist"
 !ENDIF
 BINDIR = $(GDAL_HOME)\bin
 PLUGINDIR = $(BINDIR)\gdalplugins
@@ -61,10 +61,10 @@

 # SWIG Java settings
 !IFNDEF JAVA_HOME
-JAVA_HOME = c:\j2sdk1.4.2_12
+JAVA_HOME = C:\Java1.6
 !ENDIF
 !IFNDEF ANT_HOME
-ANT_HOME=c:\programmi\apache-ant-1.7.0
+ANT_HOME=C:\ant
 !ENDIF
 JAVADOC=$(JAVA_HOME)\bin\javadoc
 JAVAC=$(JAVA_HOME)\bin\javac
@@ -76,15 +76,15 @@
 !IFNDEF OPTFLAGS
 !IF $(MSVC_VER) >= 1400
 !IFNDEF DEBUG
-OPTFLAGS= /nologo /MD /EHsc /Ox /W3 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
+OPTFLAGS= /nologo /MT /EHsc /Ox /W3 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
 !ELSE
-OPTFLAGS= /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
+OPTFLAGS= /nologo /MT /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
 !ENDIF
 !ELSE
 !IFNDEF DEBUG
-OPTFLAGS=	/nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG
+OPTFLAGS=	/nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG
 !ELSE
-OPTFLAGS=	/nologo /MD /EHsc /GR /Zi /W4 /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
+OPTFLAGS=	/nologo /MT /EHsc /GR /Zi /W4 /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
 !ENDIF
 !ENDIF  #MSVC_VER
 !ENDIF  # OPTFLAGS
@@ -97,7 +97,7 @@
 # Uncomment the following if you are building for 64-bit windows
 # (x64). You'll need to have PATH, INCLUDE and LIB set up for 64-bit
 # compiles.
-#WIN64=YES
+WIN64=YES

 # If you don't want some entry points to have STDCALL conventions,
 # comment out the following and add -DCPL_DISABLE_STDCALL in OPTFLAGS.
@@ -160,9 +160,10 @@
 #GEOTIFF_LIB =   C:/warmerda/libgeotiff/geotiff_i.lib

 # Uncomment the following and update to enable ECW support.
-#ECW_PLUGIN = NO
-#ECWDIR  = 	C:\warmerda\libecwj2-3.3
-#ECWLIB  = 	$(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
+ECW_PLUGIN = YES
+ECWDIR=C:\GDAL\gdal1.7.1Win32Win64\win64\libecwj2-3.3
+#ECWLIB=$(ECWDIR)\lib\win64\*.lib
+ECWLIB=$(ECWDIR)\lib\win64\NCSEcw.lib
$(ECWDIR)\lib\win64\NCSEcwCu.lib $(ECWDIR)\lib\win64\NCSUtil.lib
$(ECWDIR)\lib\win64\NCScnet.lib $(ECWDIR)\lib\win64\NCSEcwC.lib
$(ECWDIR)\lib\win64\NCSEcwS.lib $(ECWDIR)\lib\win64\NCSUtilS.lib
$(ECWDIR)\lib\win64\NCScnetS.lib

 # DWG/DXF support via DWGdirect from Open Design Alliance

@@ -177,9 +178,9 @@
 #		$(OGDIDIR)\lib\$(TARGET)\zlib_ogdi$(OGDIVER).lib

 # Uncomment for Expat support (required for KML, GPX and GeoRSS read support).
-#EXPAT_DIR = "C:\Program Files\Expat 2.0.1"
-#EXPAT_INCLUDE = -I$(EXPAT_DIR)/source/lib
-#EXPAT_LIB = $(EXPAT_DIR)/bin/libexpat.lib
+EXPAT_DIR = C:\GDAL\gdal1.7.1Win32Win64\win64\expat-2.0.1\win32\bin\release
+EXPAT_INCLUDE = -IC:\GDAL\gdal1.7.1Win32Win64\win64\expat-2.0.1\lib
+EXPAT_LIB = C:\GDAL\gdal1.7.1Win32Win64\win64\expat-2.0.1\win32\bin\release\libexpatMT.lib

 # Uncomment for Xerces based GML and ILI support.
 #XERCES_DIR =	c:\warmerda\supportlibs\xerces-c_2_6_0
@@ -219,12 +220,12 @@

 # Uncomment the following for MrSID support.
 # You will likely require /MD and /EHsc in OPTFLAGS.
-#MRSID_DIR =	d:\projects\mrsid
-#MRSID_INCLUDE = -I$(MRSID_DIR)\include\base -I$(MRSID_DIR)\include\support \
-#		-I$(MRSID_DIR)\include\metadata \
-#		-I$(MRSID_DIR)\include\mrsid_readers \
-#		-I$(MRSID_DIR)\include\j2k_readers
-#MRSID_LIB =	$(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib
advapi32.lib user32.lib
+MRSID_DIR =	C:\GDAL\gdal1.7.1Win32Win64\win64\Geo_DSDK-7.0.0.2167
+MRSID_INCLUDE = -I$(MRSID_DIR)\include\base -I$(MRSID_DIR)\include \
+		-I$(MRSID_DIR)\include\metadata \
+		-I$(MRSID_DIR)\include\mrsid_readers \
+		-I$(MRSID_DIR)\include\j2k_readers
+MRSID_LIB =	$(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib advapi32.lib
user32.lib
 # Comment out the following to supress JP2MRSID driver.
 #MRSID_FLAGS =	-DMRSID_J2K
 # Enable these, if you have the MrSID Encoding SDK and want
@@ -234,7 +235,7 @@
 #		-I$(MRSID_DIR)\include\j2k_writers $(MRSID_INCLUDE)
 #MRSID_LIB =	$(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib $(MRSID_LIB)
 # Enable the following if you prefer to build MrSID support as a plugin.
-#MRSID_PLUGIN = YES
+MRSID_PLUGIN = YES

 # PCIDSK Libraries - default configuration uses internal implementation
 PCIDSK_SETTING=INTERNAL


Do I have to add any new parameters to compile jni dll files? Did I
any wrong step during compilation?

I could send you full description what I have done to compile ecw and
installing the Windows SDK if required.
I have compiled gdal 1.7.1 in linux 64bit and Solaris SPARC 64 bit and
it works fine.

I have tested the compiled dll files in two different runtime environments.

Thank you for your help.

Regards,
Zdenek
From tjeffery at gmail.com  Wed Aug  4 12:30:14 2010
From: tjeffery at gmail.com (Tom Jeffery)
Date: Wed Aug  4 12:30:17 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt shapefile
In-Reply-To: <AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
Message-ID: <1280939414854-5373236.post@n2.nabble.com>


Chaitanya,

The updated file is read properly with ogrinfo.  The only difference between
ogrinfo -al between the two, besides the new field that was created, is the
extent, which looks like this:

Original file:
Extent: (1528126.013001, 45899.818172) - (1542444.478012, 61468.662925)

Updated file:
(-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000,
-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000)
- (1542444.478012, 61468.662925)

That...is a really large negative number!  Any idea why it might be getting
blown up?
-Tom


Chaitanya kumar CH wrote:
> 
> Tom,
> 
> Can you check the destination shapefile with 'ogrinfo' and see if it
> works?
> If ogrinfo gives a valid output of the new file, check with 'ogrinfo -al'
> and compare it with the old file's output.
> ( http://www.gdal.org/ogrinfo.html )
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5373236.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From zdenek at vrablik.org  Wed Aug  4 13:28:13 2010
From: zdenek at vrablik.org (=?UTF-8?B?WmRlbsSbayBWcsOhYmzDrWs=?=)
Date: Wed Aug  4 13:28:16 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work
In-Reply-To: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
References: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
Message-ID: <AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>

Hi,

I have compiled the gdal 1.7.2 for 32 bit windows and tested in
Windows XP. This works fine.

Than my colleague  tested the 64bit dll files with 64 bit Windows 7
and it was working too.

Regards,
Zdenek

On Wed, Aug 4, 2010 at 5:07 PM, Zden?k Vr?bl?k <zdenek@vrablik.org> wrote:
> Hi all,
>
> I have problem to use java jni generated dll files. I have available
> precompiled dll files with internal formats + MrSID and ECW. These dll
> works fine including JNI.
> Now I have compiled gdal myself, because I need add more formats (GPX,
> GML, KML ) and later possibly SDE.
>
> I can't load the ?gdaljni.dll into java.
> I am getting this error:
> Native library load failed.
> java.lang.UnsatisfiedLinkError:
> C:\ZdenekTC\lib\native\GDAL_DATA\gdaljni.dll: The operating system
> cannot run %1
>
> Building env: Windows XP, Microsoft Windows SDK 7.0; Visual Studio
> 2005, gdal 1.7.2; crosscompiler
> Running env: Windows 2003 SP2, sun JDK 6, Tomcat 6, gdal 1.7.2
>
> I am sure I have PE+ dll files. (tested with msys file command)
>
> I tried compile HelloWorld from Java JNI tutorial and I have got same issue.
> rem original cl -IC:\Java1.6\include -IC:\Java1.6\include\win32 /O1
> /Op /Zi /MD /D _STATIC_CPPLIB /Wp64 /W3 /DNDEBUG /DWIN32 /DIAL
> /D_LITTLE_ENDIAN /D_AMD64_ /Damd64 /DWIN32_LEAN_AND_MEAN /c *.c
> cl -IC:\Java1.6\include -IC:\Java1.6\include\win32 /O1 /Op /Zi /MT /D
> _STATIC_CPPLIB /Wp64 /W3 /DNDEBUG /DWIN32 /DIAL /D_LITTLE_ENDIAN
> /D_AMD64_ /Damd64 /DWIN32_LEAN_AND_MEAN /DJNI_IMPLEMENTATION /c *.c
> rem original link /dll /opt:REF /incremental:no /debug /out:HelloWorld.dll *.obj
> link /verbose /dll /opt:REF /incremental:no /out:HelloWorld.dll *.obj
>
> The HelloWorld dll works fine without the MD flag.
> Removing MD parameter doesn't work in gdal JNI dll files.
>
> Do I have to add there any parameter to get gdal jni binding compilled
> correctly?
>
> I think the MD parameter is necessary if there is another part of
> application loading same dll files?
>
>
> Here is standard output from compiling (the swig warning messages are
> not included):
>
> ? ? ? ?del .\setup.ini
> ? ? ? ?echo "C:\GDAL\gdal1.7.1Win32Win64\win64\gdal172Dist" > .\setup.ini
> ? ? ? ?findstr /c:"define GDAL_RELEASE_NAME " ..\gcore\gdal_version.h ?>> .\setup.ini
> ? ? ? ?cd java
> ? ? ? ?if not exist org\gdal\gdal mkdir org\gdal\gdal
> ? ? ? ?cd gdal
> ? ? ? ?swig.exe -java -c++ -package org.gdal.gdal -outdir ../org/gdal/gdal
> -I../../include/java -o gdal_wrap.cpp ../../../include/gdal.i
> ? ? ? ?cd ..
> ? ? ? ?cd org\gdal
> ? ? ? ?if not exist ogr mkdir ogr
> ? ? ? ?cd ../../
> ? ? ? ?cd ogr
> ? ? ? ?swig.exe -java -c++ -package org.gdal.ogr -outdir ../org/gdal/ogr
> -I../../include/java -o ogr_wrap.cpp ../../../include/ogr.i
> ? ? ? ?cd ..
> ? ? ? ?cd org\gdal
> ? ? ? ?if not exist osr mkdir osr
> ? ? ? ?cd ../../
> ? ? ? ?cd osr
> ? ? ? ?swig.exe -java -c++ -package org.gdal.osr -outdir ../org/gdal/osr
> -I../../include/java -o osr_wrap.cpp ../../../include/osr.i
> ? ? ? ?cd ..
> ? ? ? ?cd org\gdal
> ? ? ? ?if not exist gdalconst mkdir gdalconst
> ? ? ? ?cd ../../
> ? ? ? ?cd const
> ? ? ? ?swig.exe -java -c++ -package org.gdal.gdalconst -outdir
> ../org/gdal/gdalconst -I../../include/java -o gdalconst_wrap.cpp
> ../../../include/gdalconst.i
> ? ? ? ?cd ..
> ? ? ? ?nmake /nologo /f makefile.vc
> ? ? ? ?cd ogr
> ? ? ? ?nmake /nologo /f makefile.vc
> ? ? ? ?cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
> -I..\..\..\ogr -I..\..\..\gcore ?-I..\..\..\alg
> -I..\..\..\ogr\ogrsf_frmts ?-DOGR_ENABLED ?-IC:\Java1.5\include
> -IC:\Java1.5\include\win32 /c ogr_wrap.cpp
> ogr_wrap.cpp
> ? ? ? ?xcopy /D ?/Y *.obj ..
> C:ogr_wrap.obj
> 1 File(s) copied
> ? ? ? ?cd ..
> ? ? ? ?link ogr_wrap.obj ..\..\gdal_i.lib /out:ogrjni.dll /DLL
> Microsoft (R) Incremental Linker Version 8.00.50727.762
> Copyright (C) Microsoft Corporation. ?All rights reserved.
>
> ? Creating library ogrjni.lib and object ogrjni.exp
> ? ? ? ?if exist ogrjni.dll.manifest mt -manifest ogrjni.dll.manifest
> -outputresource:ogrjni.dll;2
> Microsoft (R) Manifest Tool version 5.2.3790.2075
>
> Copyright (c) Microsoft Corporation 2005.
>
> All rights reserved.
>
> ? ? ? ?cd gdal
> ? ? ? ?nmake /nologo /f makefile.vc
> ? ? ? ?cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
> -I..\..\..\ogr -I..\..\..\gcore ?-I..\..\..\alg
> -I..\..\..\ogr\ogrsf_frmts ?-DOGR_ENABLED ?-IC:\Java1.5\include
> -IC:\Java1.5\include\win32 /c gdal_wrap.cpp
> gdal_wrap.cpp
> gdal_wrap.cpp(989) : warning C4996: 'stricmp': The POSIX name for this
> item is deprecated. Instead, use the ISO C++ conformant name:
> _stricmp. See online help for details.
> ? ? ? ?C:\Program Files\Microsoft Visual Studio
> 8\VC\INCLUDE\string.h(215) : see declaration of 'stricmp'
> gdal_wrap.cpp(991) : warning C4996: 'stricmp': The POSIX name for this
> item is deprecated. Instead, use the ISO C++ conformant name:
> _stricmp. See online help for details.
> ? ? ? ?C:\Program Files\Microsoft Visual Studio
> 8\VC\INCLUDE\string.h(215) : see declaration of 'stricmp'
> gdal_wrap.cpp(993) : warning C4996: 'stricmp': The POSIX name for this
> item is deprecated. Instead, use the ISO C++ conformant name:
> _stricmp. See online help for details.
> ? ? ? ?C:\Program Files\Microsoft Visual Studio
> 8\VC\INCLUDE\string.h(215) : see declaration of 'stricmp'
> gdal_wrap.cpp(1019) : warning C4267: 'argument' : conversion from
> 'size_t' to 'int', possible loss of data
> ? ? ? ?xcopy /D ?/Y *.obj ..
> C:gdal_wrap.obj
> 1 File(s) copied
> ? ? ? ?cd ..
> ? ? ? ?link gdal_wrap.obj ..\..\gdal_i.lib /out:gdaljni.dll /DLL
> Microsoft (R) Incremental Linker Version 8.00.50727.762
> Copyright (C) Microsoft Corporation. ?All rights reserved.
>
> ? Creating library gdaljni.lib and object gdaljni.exp
> ? ? ? ?if exist gdaljni.dll.manifest mt -manifest gdaljni.dll.manifest
> -outputresource:gdaljni.dll;2
> Microsoft (R) Manifest Tool version 5.2.3790.2075
>
> Copyright (c) Microsoft Corporation 2005.
>
> All rights reserved.
>
> ? ? ? ?cd const
> ? ? ? ?nmake /nologo /f makefile.vc
> ? ? ? ?cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
> -I..\..\..\ogr -I..\..\..\gcore ?-I..\..\..\alg
> -I..\..\..\ogr\ogrsf_frmts ?-DOGR_ENABLED ?-IC:\Java1.5\include
> -IC:\Java1.5\include\win32 /c gdalconst_wrap.cpp
> gdalconst_wrap.cpp
> ? ? ? ?xcopy /D ?/Y *.obj ..
> C:gdalconst_wrap.obj
> 1 File(s) copied
> ? ? ? ?cd ..
> ? ? ? ?link gdalconst_wrap.obj ..\..\gdal_i.lib /out:gdalconstjni.dll /DLL
> Microsoft (R) Incremental Linker Version 8.00.50727.762
> Copyright (C) Microsoft Corporation. ?All rights reserved.
>
> ? Creating library gdalconstjni.lib and object gdalconstjni.exp
> ? ? ? ?if exist gdalconstjni.dll.manifest mt -manifest
> gdalconstjni.dll.manifest -outputresource:gdalconstjni.dll;2
> Microsoft (R) Manifest Tool version 5.2.3790.2075
>
> Copyright (c) Microsoft Corporation 2005.
>
> All rights reserved.
>
> ? ? ? ?cd osr
> ? ? ? ?nmake /nologo /f makefile.vc
> ? ? ? ?cl /nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG -I..\..\..\port
> -I..\..\..\ogr -I..\..\..\gcore ?-I..\..\..\alg
> -I..\..\..\ogr\ogrsf_frmts ?-DOGR_ENABLED ?-IC:\Java1.5\include
> -IC:\Java1.5\include\win32 /c osr_wrap.cpp
> osr_wrap.cpp
> ? ? ? ?xcopy /D ?/Y *.obj ..
> C:osr_wrap.obj
> 1 File(s) copied
> ? ? ? ?cd ..
> ? ? ? ?link osr_wrap.obj ..\..\gdal_i.lib /out:osrjni.dll /DLL
> Microsoft (R) Incremental Linker Version 8.00.50727.762
> Copyright (C) Microsoft Corporation. ?All rights reserved.
>
> ? Creating library osrjni.lib and object osrjni.exp
> ? ? ? ?if exist osrjni.dll.manifest mt -manifest osrjni.dll.manifest
> -outputresource:osrjni.dll;2
> Microsoft (R) Manifest Tool version 5.2.3790.2075
>
> Copyright (c) Microsoft Corporation 2005.
>
> All rights reserved.
>
> ? ? ? ?set JAVA_HOME="C:\Java1.5"
> ? ? ? ?C:\ant\bin\ant
> Buildfile: build.xml
>
> compile:
> ? ?[javac] Compiling 34 source files to
> C:\GDAL\gdal1.7.1Win32Win64\win64\gdal-1.7.2\swig\java\build\classes
> ? ? [echo] compilation complete
>
> archive:
> ? ? ?[jar] Building jar:
> C:\GDAL\gdal1.7.1Win32Win64\win64\gdal-1.7.2\swig\java\gdal.jar
>
> compile_tests:
> ? ? [echo] compilation of tests complete
>
> all:
>
> BUILD SUCCESSFUL
> Total time: 1 second
>
>
> nmake.opt diff is
> --- nmake.opt.original ?2010-04-23 16:22:12 +0100
> +++ nmake.opt ? 2010-08-04 16:21:14 +0100
> @@ -39,7 +39,7 @@
> ?# But the paths *should* be absolute (relative paths mess up in submakefiles).
>
> ?!IFNDEF GDAL_HOME
> -GDAL_HOME = "C:\warmerda\bld"
> +GDAL_HOME = "C:\GDAL\gdal1.7.1Win32Win64\win64\gdal172Dist"
> ?!ENDIF
> ?BINDIR = $(GDAL_HOME)\bin
> ?PLUGINDIR = $(BINDIR)\gdalplugins
> @@ -61,10 +61,10 @@
>
> ?# SWIG Java settings
> ?!IFNDEF JAVA_HOME
> -JAVA_HOME = c:\j2sdk1.4.2_12
> +JAVA_HOME = C:\Java1.6
> ?!ENDIF
> ?!IFNDEF ANT_HOME
> -ANT_HOME=c:\programmi\apache-ant-1.7.0
> +ANT_HOME=C:\ant
> ?!ENDIF
> ?JAVADOC=$(JAVA_HOME)\bin\javadoc
> ?JAVAC=$(JAVA_HOME)\bin\javac
> @@ -76,15 +76,15 @@
> ?!IFNDEF OPTFLAGS
> ?!IF $(MSVC_VER) >= 1400
> ?!IFNDEF DEBUG
> -OPTFLAGS= /nologo /MD /EHsc /Ox /W3 /D_CRT_SECURE_NO_DEPRECATE
> /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
> +OPTFLAGS= /nologo /MT /EHsc /Ox /W3 /D_CRT_SECURE_NO_DEPRECATE
> /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
> ?!ELSE
> -OPTFLAGS= /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
> /D_CRT_NONSTDC_NO_DEPRECATE /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
> +OPTFLAGS= /nologo /MT /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
> /D_CRT_NONSTDC_NO_DEPRECATE /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
> ?!ENDIF
> ?!ELSE
> ?!IFNDEF DEBUG
> -OPTFLAGS= ? ? ?/nologo /MD /EHsc /GR /Ox /W3 /DNDEBUG
> +OPTFLAGS= ? ? ?/nologo /MT /EHsc /GR /Ox /W3 /DNDEBUG
> ?!ELSE
> -OPTFLAGS= ? ? ?/nologo /MD /EHsc /GR /Zi /W4 /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
> +OPTFLAGS= ? ? ?/nologo /MT /EHsc /GR /Zi /W4 /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb
> ?!ENDIF
> ?!ENDIF ?#MSVC_VER
> ?!ENDIF ?# OPTFLAGS
> @@ -97,7 +97,7 @@
> ?# Uncomment the following if you are building for 64-bit windows
> ?# (x64). You'll need to have PATH, INCLUDE and LIB set up for 64-bit
> ?# compiles.
> -#WIN64=YES
> +WIN64=YES
>
> ?# If you don't want some entry points to have STDCALL conventions,
> ?# comment out the following and add -DCPL_DISABLE_STDCALL in OPTFLAGS.
> @@ -160,9 +160,10 @@
> ?#GEOTIFF_LIB = ? C:/warmerda/libgeotiff/geotiff_i.lib
>
> ?# Uncomment the following and update to enable ECW support.
> -#ECW_PLUGIN = NO
> -#ECWDIR ?= ? ? C:\warmerda\libecwj2-3.3
> -#ECWLIB ?= ? ? $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
> +ECW_PLUGIN = YES
> +ECWDIR=C:\GDAL\gdal1.7.1Win32Win64\win64\libecwj2-3.3
> +#ECWLIB=$(ECWDIR)\lib\win64\*.lib
> +ECWLIB=$(ECWDIR)\lib\win64\NCSEcw.lib
> $(ECWDIR)\lib\win64\NCSEcwCu.lib $(ECWDIR)\lib\win64\NCSUtil.lib
> $(ECWDIR)\lib\win64\NCScnet.lib $(ECWDIR)\lib\win64\NCSEcwC.lib
> $(ECWDIR)\lib\win64\NCSEcwS.lib $(ECWDIR)\lib\win64\NCSUtilS.lib
> $(ECWDIR)\lib\win64\NCScnetS.lib
>
> ?# DWG/DXF support via DWGdirect from Open Design Alliance
>
> @@ -177,9 +178,9 @@
> ?# ? ? ? ? ? ? ?$(OGDIDIR)\lib\$(TARGET)\zlib_ogdi$(OGDIVER).lib
>
> ?# Uncomment for Expat support (required for KML, GPX and GeoRSS read support).
> -#EXPAT_DIR = "C:\Program Files\Expat 2.0.1"
> -#EXPAT_INCLUDE = -I$(EXPAT_DIR)/source/lib
> -#EXPAT_LIB = $(EXPAT_DIR)/bin/libexpat.lib
> +EXPAT_DIR = C:\GDAL\gdal1.7.1Win32Win64\win64\expat-2.0.1\win32\bin\release
> +EXPAT_INCLUDE = -IC:\GDAL\gdal1.7.1Win32Win64\win64\expat-2.0.1\lib
> +EXPAT_LIB = C:\GDAL\gdal1.7.1Win32Win64\win64\expat-2.0.1\win32\bin\release\libexpatMT.lib
>
> ?# Uncomment for Xerces based GML and ILI support.
> ?#XERCES_DIR = ?c:\warmerda\supportlibs\xerces-c_2_6_0
> @@ -219,12 +220,12 @@
>
> ?# Uncomment the following for MrSID support.
> ?# You will likely require /MD and /EHsc in OPTFLAGS.
> -#MRSID_DIR = ? d:\projects\mrsid
> -#MRSID_INCLUDE = -I$(MRSID_DIR)\include\base -I$(MRSID_DIR)\include\support \
> -# ? ? ? ? ? ? ?-I$(MRSID_DIR)\include\metadata \
> -# ? ? ? ? ? ? ?-I$(MRSID_DIR)\include\mrsid_readers \
> -# ? ? ? ? ? ? ?-I$(MRSID_DIR)\include\j2k_readers
> -#MRSID_LIB = ? $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib
> advapi32.lib user32.lib
> +MRSID_DIR = ? ?C:\GDAL\gdal1.7.1Win32Win64\win64\Geo_DSDK-7.0.0.2167
> +MRSID_INCLUDE = -I$(MRSID_DIR)\include\base -I$(MRSID_DIR)\include \
> + ? ? ? ? ? ? ? -I$(MRSID_DIR)\include\metadata \
> + ? ? ? ? ? ? ? -I$(MRSID_DIR)\include\mrsid_readers \
> + ? ? ? ? ? ? ? -I$(MRSID_DIR)\include\j2k_readers
> +MRSID_LIB = ? ?$(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib advapi32.lib
> user32.lib
> ?# Comment out the following to supress JP2MRSID driver.
> ?#MRSID_FLAGS = -DMRSID_J2K
> ?# Enable these, if you have the MrSID Encoding SDK and want
> @@ -234,7 +235,7 @@
> ?# ? ? ? ? ? ? ?-I$(MRSID_DIR)\include\j2k_writers $(MRSID_INCLUDE)
> ?#MRSID_LIB = ? $(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib $(MRSID_LIB)
> ?# Enable the following if you prefer to build MrSID support as a plugin.
> -#MRSID_PLUGIN = YES
> +MRSID_PLUGIN = YES
>
> ?# PCIDSK Libraries - default configuration uses internal implementation
> ?PCIDSK_SETTING=INTERNAL
>
>
> Do I have to add any new parameters to compile jni dll files? Did I
> any wrong step during compilation?
>
> I could send you full description what I have done to compile ecw and
> installing the Windows SDK if required.
> I have compiled gdal 1.7.1 in linux 64bit and Solaris SPARC 64 bit and
> it works fine.
>
> I have tested the compiled dll files in two different runtime environments.
>
> Thank you for your help.
>
> Regards,
> Zdenek
>
From chaitanya.ch at gmail.com  Wed Aug  4 14:07:56 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug  4 14:07:58 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt 
	shapefile
In-Reply-To: <1280939414854-5373236.post@n2.nabble.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
	<1280939414854-5373236.post@n2.nabble.com>
Message-ID: <AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>

Tom,

GDAL/OGR updates the shapefile along with the dbf file when a feature is
changed. That means updating the extents according to the geometries in the
changed features. My guess is that there is a problem reading a feature's
geometry extents.

Call the OGRGeometry::getEnvelope method on each geometry and check if the
OGREnvelope::MinX and OGREnvelope::MinY values are within the expected
extents. You can isolate the problem this way.

Otherwise, put together a sample dataset and create a new ticket at
http://trac.osgeo.org/gdal/newticket

On Wed, Aug 4, 2010 at 10:00 PM, Tom Jeffery <tjeffery@gmail.com> wrote:

>
> Chaitanya,
>
> The updated file is read properly with ogrinfo.  The only difference
> between
> ogrinfo -al between the two, besides the new field that was created, is the
> extent, which looks like this:
>
> Original file:
> Extent: (1528126.013001, 45899.818172) - (1542444.478012, 61468.662925)
>
> Updated file:
>
> (-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000,
>
> -179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000)
> - (1542444.478012, 61468.662925)
>
> That...is a really large negative number!  Any idea why it might be getting
> blown up?
> -Tom
>
>
> Chaitanya kumar CH wrote:
> >
> > Tom,
> >
> > Can you check the destination shapefile with 'ogrinfo' and see if it
> > works?
> > If ogrinfo gives a valid output of the new file, check with 'ogrinfo -al'
> > and compare it with the old file's output.
> > ( http://www.gdal.org/ogrinfo.html )
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5373236.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100804/7642b41f/attachment.html
From tjeffery at gmail.com  Wed Aug  4 15:31:46 2010
From: tjeffery at gmail.com (Tom Jeffery)
Date: Wed Aug  4 15:31:48 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt shapefile
In-Reply-To: <AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
	<1280939414854-5373236.post@n2.nabble.com>
	<AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>
Message-ID: <1280950306227-5373963.post@n2.nabble.com>


Chaitanya,

I've found the issue with the particular shapefile I'm using.  It actually
has some null geometries in it, which are fixable using ESRI's "Repair
Geometry" tool.  I read that ogr2ogr is also suppose to remove records with
empty geometries, but it doesn't seem to be working on my file, even with
the -skipfailures flag set.

Any thoughts?  Or is there another good way to clean a shapefile that might
have null geometries?

Thanks so much for your help so far!

-Tom


Chaitanya kumar CH wrote:
> 
> Tom,
> 
> GDAL/OGR updates the shapefile along with the dbf file when a feature is
> changed. That means updating the extents according to the geometries in
> the
> changed features. My guess is that there is a problem reading a feature's
> geometry extents.
> 
> Call the OGRGeometry::getEnvelope method on each geometry and check if the
> OGREnvelope::MinX and OGREnvelope::MinY values are within the expected
> extents. You can isolate the problem this way.
> 
> Otherwise, put together a sample dataset and create a new ticket at
> http://trac.osgeo.org/gdal/newticket
> 
> On Wed, Aug 4, 2010 at 10:00 PM, Tom Jeffery <tjeffery@gmail.com> wrote:
> 
>>
>> Chaitanya,
>>
>> The updated file is read properly with ogrinfo.  The only difference
>> between
>> ogrinfo -al between the two, besides the new field that was created, is
>> the
>> extent, which looks like this:
>>
>> Original file:
>> Extent: (1528126.013001, 45899.818172) - (1542444.478012, 61468.662925)
>>
>> Updated file:
>>
>> (-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000,
>>
>> -179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000)
>> - (1542444.478012, 61468.662925)
>>
>> That...is a really large negative number!  Any idea why it might be
>> getting
>> blown up?
>> -Tom
>>
>>
>> Chaitanya kumar CH wrote:
>> >
>> > Tom,
>> >
>> > Can you check the destination shapefile with 'ogrinfo' and see if it
>> > works?
>> > If ogrinfo gives a valid output of the new file, check with 'ogrinfo
>> -al'
>> > and compare it with the old file's output.
>> > ( http://www.gdal.org/ogrinfo.html )
>> >
>> > --
>> > Best regards,
>> > Chaitanya kumar CH.
>> > /t?a???nj?/ /k?m?r/
>> > +91-9494447584
>> > 17.2416N 80.1426E
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5373236.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5373963.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Wed Aug  4 15:56:02 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug  4 16:02:39 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt 
	shapefile
In-Reply-To: <1280950306227-5373963.post@n2.nabble.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
	<1280939414854-5373236.post@n2.nabble.com>
	<AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>
	<1280950306227-5373963.post@n2.nabble.com>
Message-ID: <AANLkTikYoUqOS+z-C1BbXj6UenoG7wRmhz7nxicANodb@mail.gmail.com>

Tom,

The -skipfailures flag skips only failures to create new features. Null
geometries in non-null shapetype shapefile are not handled.
The only way I can think of to clean such a file is by checking the geometry
in each feature.

On Thu, Aug 5, 2010 at 1:01 AM, Tom Jeffery <tjeffery@gmail.com> wrote:

>
> Chaitanya,
>
> I've found the issue with the particular shapefile I'm using.  It actually
> has some null geometries in it, which are fixable using ESRI's "Repair
> Geometry" tool.  I read that ogr2ogr is also suppose to remove records with
> empty geometries, but it doesn't seem to be working on my file, even with
> the -skipfailures flag set.
>
> Any thoughts?  Or is there another good way to clean a shapefile that might
> have null geometries?
>
> Thanks so much for your help so far!
>
> -Tom
>
>
> Chaitanya kumar CH wrote:
> >
> > Tom,
> >
> > GDAL/OGR updates the shapefile along with the dbf file when a feature is
> > changed. That means updating the extents according to the geometries in
> > the
> > changed features. My guess is that there is a problem reading a feature's
> > geometry extents.
> >
> > Call the OGRGeometry::getEnvelope method on each geometry and check if
> the
> > OGREnvelope::MinX and OGREnvelope::MinY values are within the expected
> > extents. You can isolate the problem this way.
> >
> > Otherwise, put together a sample dataset and create a new ticket at
> > http://trac.osgeo.org/gdal/newticket
> >
> > On Wed, Aug 4, 2010 at 10:00 PM, Tom Jeffery <tjeffery@gmail.com> wrote:
> >
> >>
> >> Chaitanya,
> >>
> >> The updated file is read properly with ogrinfo.  The only difference
> >> between
> >> ogrinfo -al between the two, besides the new field that was created, is
> >> the
> >> extent, which looks like this:
> >>
> >> Original file:
> >> Extent: (1528126.013001, 45899.818172) - (1542444.478012, 61468.662925)
> >>
> >> Updated file:
> >>
> >>
> (-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000,
> >>
> >>
> -179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000)
> >> - (1542444.478012, 61468.662925)
> >>
> >> That...is a really large negative number!  Any idea why it might be
> >> getting
> >> blown up?
> >> -Tom
> >>
> >>
> >> Chaitanya kumar CH wrote:
> >> >
> >> > Tom,
> >> >
> >> > Can you check the destination shapefile with 'ogrinfo' and see if it
> >> > works?
> >> > If ogrinfo gives a valid output of the new file, check with 'ogrinfo
> >> -al'
> >> > and compare it with the old file's output.
> >> > ( http://www.gdal.org/ogrinfo.html )
> >> >
> >> > --
> >> > Best regards,
> >> > Chaitanya kumar CH.
> >> > /t?a???nj?/ /k?m?r/
> >> > +91-9494447584
> >> > 17.2416N 80.1426E
> >> >
> >> > _______________________________________________
> >> > gdal-dev mailing list
> >> > gdal-dev@lists.osgeo.org
> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5373236.html
> >> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5373963.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/5ef73729/attachment.html
From tjeffery at gmail.com  Wed Aug  4 16:43:18 2010
From: tjeffery at gmail.com (Tom Jeffery)
Date: Wed Aug  4 16:43:20 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt shapefile
In-Reply-To: <AANLkTikYoUqOS+z-C1BbXj6UenoG7wRmhz7nxicANodb@mail.gmail.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
	<1280939414854-5373236.post@n2.nabble.com>
	<AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>
	<1280950306227-5373963.post@n2.nabble.com>
	<AANLkTikYoUqOS+z-C1BbXj6UenoG7wRmhz7nxicANodb@mail.gmail.com>
Message-ID: <1280954598517-5374225.post@n2.nabble.com>


Chaitanya,

I wrote up a method to find and delete geometries that fall outside of the
reported Extent from the shapefile.  It seems to be doing the trick, though
with some strange side effects.  

It finds the bad features properly, and I remove them with
layer.DeleteFeature(feature.GetFID()), but the .shp part of the shapefile is
never updated.  (The dbf is the only file to change.)  Everything looks fine
in OGR and ArcGIS, but if I run repair geometry in ArcGIS on the same file,
it deletes the "same" records, causing the file to become completely
unreadable.

I seem to recall reading about this before, but haven't turned up anything
in google searches.  Is there a method to properly delete a record so the
.shp is updated as well?

-Tom


Tom,

The -skipfailures flag skips only failures to create new features. Null
geometries in non-null shapetype shapefile are not handled.
The only way I can think of to clean such a file is by checking the geometry
in each feature.

On Thu, Aug 5, 2010 at 1:01 AM, Tom Jeffery <tjeffery@gmail.com> wrote:

>
> Chaitanya,
>
> I've found the issue with the particular shapefile I'm using.  It actually
> has some null geometries in it, which are fixable using ESRI's "Repair
> Geometry" tool.  I read that ogr2ogr is also suppose to remove records
> with
> empty geometries, but it doesn't seem to be working on my file, even with
> the -skipfailures flag set.
>
> Any thoughts?  Or is there another good way to clean a shapefile that
> might
> have null geometries?
>
> Thanks so much for your help so far!
>
> -Tom
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5374225.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Wed Aug  4 16:43:42 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug  4 16:43:45 2010
Subject: [gdal-dev] new GDAL driver: how to proceed?
In-Reply-To: <AANLkTimB5h-PL9ZSCo+LrsOH1dSWhWSvat8jheSsWL2G@mail.gmail.com>
References: <4C571386.5010509@jacobs-university.de>
	<AANLkTin1tN4xfnV_Nj6vBXUN4rfjrt-hUNCF03ZVf2hY@mail.gmail.com>
	<4C58030B.7030905@jacobs-university.de>
	<AANLkTimB5h-PL9ZSCo+LrsOH1dSWhWSvat8jheSsWL2G@mail.gmail.com>
Message-ID: <AANLkTimu6-OF5FkoD6OvWzdBHXoWCOVmaRRm1UmcSZoe@mail.gmail.com>

Constantin,

In GDAL code, autoconf is used with configure.in to generate the configure
script. In earlier versions of autoconf, configure.ac was named configure.in,
which is still being used here. I believe it works almost the same. It is
handwritten.

Refer to http://trac.osgeo.org/gdal/wiki/rfc8_devguide for developer
guidelines. A test script in python is created in the autotest suite for
each driver (http://trac.osgeo.org/gdal/browser/trunk/autotest). You can
look at the other raster driver test scripts at
http://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers for a general
idea. Add any tests you think are specific to this format.

Your code will go through a GDAL maintainer. So, don't worry too much about
styling, etc.

On Thu, Aug 5, 2010 at 1:48 AM, Constantin Jucovschi <
c.jucovschi@jacobs-university.de> wrote:

> Hi Chaitanya,
>
> My question concerns the configure script. I cannot find a
> configure.ac file to specify the libraries which have to be searched
> for in order to be able to compile/use rasdaman driver for GDAL. Does
> that mean I should write code in the configure.in file, which does
> look like it's handwritten? Is there any requirements on code
> style/readability/testing I should know?
>
> Thanks in advance,
> Constantin
>
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/bec94353/attachment.html
From warmerdam at pobox.com  Wed Aug  4 16:59:55 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug  4 16:59:59 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt
	shapefile
In-Reply-To: <1280954598517-5374225.post@n2.nabble.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
	<1280939414854-5373236.post@n2.nabble.com>
	<AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>
	<1280950306227-5373963.post@n2.nabble.com>
	<AANLkTikYoUqOS+z-C1BbXj6UenoG7wRmhz7nxicANodb@mail.gmail.com>
	<1280954598517-5374225.post@n2.nabble.com>
Message-ID: <4C59D4CB.80805@pobox.com>

Tom Jeffery wrote:
> Chaitanya,
> 
> I wrote up a method to find and delete geometries that fall outside of the
> reported Extent from the shapefile.  It seems to be doing the trick, though
> with some strange side effects.  
> 
> It finds the bad features properly, and I remove them with
> layer.DeleteFeature(feature.GetFID()), but the .shp part of the shapefile is
> never updated.  (The dbf is the only file to change.)  Everything looks fine
> in OGR and ArcGIS, but if I run repair geometry in ArcGIS on the same file,
> it deletes the "same" records, causing the file to become completely
> unreadable.
> 
> I seem to recall reading about this before, but haven't turned up anything
> in google searches.  Is there a method to properly delete a record so the
> .shp is updated as well?

Tom,

I believe OGR takes the approach of marking shapes deleted by setting the
deleted flag in the .dbf file.  As far as I knew, this is a reasonable
approach as far as ArcGIS is concerned.  I don't know why ArcGIS does
something that corrupts the file.  If you figure out the issue let us know.

In the meantime, after doing the cleanup operation you can run ogr2ogr on
the file to create a new file with all deleted records/shapes discarded.

eg.
ogr2ogr out.shp in.shp

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yehil at rafael.co.il  Thu Aug  5 00:25:10 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu Aug  5 00:36:03 2010
Subject: [gdal-dev] c# binding and .net4 
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06A12B7D798@MAILBOXSERVER.rf.local>

Hi
As you probably aware GDAL currently fails to run when used in a .net4 client.
I know that there is a newer version of swig (2.0) that fixes that.
Are there any plans to move to the new swig version?

Thanks
Yehiyam

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/2a0dba98/attachment.html
From P.Halls at york.ac.uk  Thu Aug  5 02:09:49 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Aug  5 02:11:46 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt
	shapefile
In-Reply-To: <1280954598517-5374225.post@n2.nabble.com>
References: <1280928479215-5372483.post@n2.nabble.com>	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>	<1280939414854-5373236.post@n2.nabble.com>	<AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>	<1280950306227-5373963.post@n2.nabble.com>	<AANLkTikYoUqOS+z-C1BbXj6UenoG7wRmhz7nxicANodb@mail.gmail.com>
	<1280954598517-5374225.post@n2.nabble.com>
Message-ID: <4C5A55AD.9080009@york.ac.uk>

Tom,

    so far as I am aware, neither GDAL/OGR nor ArcGIS update a shapefile in situ 
- I believe that ArcGIS creates a temporary dataset, performs the update as it 
copies the input data over, then deletes and renames to get the replacement.  I 
have used a similar method with Shapelib over the years and have done so with 
OGR more recently.  I think it likely that attempting to update a shapefile 
structure in situ is going always to carry the risk of corruption ...

Best wishes,

Peter

Tom Jeffery wrote:
> Chaitanya,
> 
> I wrote up a method to find and delete geometries that fall outside of the
> reported Extent from the shapefile.  It seems to be doing the trick, though
> with some strange side effects.  
> 
> It finds the bad features properly, and I remove them with
> layer.DeleteFeature(feature.GetFID()), but the .shp part of the shapefile is
> never updated.  (The dbf is the only file to change.)  Everything looks fine
> in OGR and ArcGIS, but if I run repair geometry in ArcGIS on the same file,
> it deletes the "same" records, causing the file to become completely
> unreadable.
> 
> I seem to recall reading about this before, but haven't turned up anything
> in google searches.  Is there a method to properly delete a record so the
> .shp is updated as well?
> 
> -Tom
> 
> 
> Tom,
> 
> The -skipfailures flag skips only failures to create new features. Null
> geometries in non-null shapetype shapefile are not handled.
> The only way I can think of to clean such a file is by checking the geometry
> in each feature.
> 
> On Thu, Aug 5, 2010 at 1:01 AM, Tom Jeffery <tjeffery@gmail.com> wrote:
> 
>> Chaitanya,
>>
>> I've found the issue with the particular shapefile I'm using.  It actually
>> has some null geometries in it, which are fixable using ESRI's "Repair
>> Geometry" tool.  I read that ogr2ogr is also suppose to remove records
>> with
>> empty geometries, but it doesn't seem to be working on my file, even with
>> the -skipfailures flag set.
>>
>> Any thoughts?  Or is there another good way to clean a shapefile that
>> might
>> have null geometries?
>>
>> Thanks so much for your help so far!
>>
>> -Tom

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From ludovic.granjon at u-bourgogne.fr  Thu Aug  5 03:23:08 2010
From: ludovic.granjon at u-bourgogne.fr (Ludovic Granjon)
Date: Thu Aug  5 03:25:28 2010
Subject: [gdal-dev] get back a layer objet with ogr in python
Message-ID: <4C5A66DC.5010002@u-bourgogne.fr>

Hello

I'm trying to develop with ogr in python. I'm on ubuntu 10.4 and I use 
gdal 1.7
When I try to get back a layer object from a function, I have the 
following message when I do python monscript.py :
"Erreur de segmentation"

This is my code :

-----------------------
# import modules
from osgeo import ogr

def openShapeLine(shapefile):
     #Ouverture du shapefile avec ogr
     driver = ogr.GetDriverByName("ESRI Shapefile")
     datasource = driver.Open(shapefile)
     layer = datasource.GetLayer()
     return (layer)

couche = openShapeLine('/data/axe.shp')

print couche.GetName()
------------------------

If I do a "print layer.GetName()" inside the openShapeLine function, 
there's no problem ...

Have you any idea ?

Thanks all
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ludovic_granjon.vcf
Type: text/x-vcard
Size: 149 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/8edfa951/ludovic_granjon.vcf
From fmarkham at gmail.com  Thu Aug  5 03:36:55 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Thu Aug  5 03:44:59 2010
Subject: [gdal-dev] get back a layer objet with ogr in python
In-Reply-To: <4C5A66DC.5010002@u-bourgogne.fr>
References: <4C5A66DC.5010002@u-bourgogne.fr>
Message-ID: <AANLkTik+tUQbVHSAOfFPSkQSXqKnCv36VgvS4uNEkGif@mail.gmail.com>

The driver and datasource are going out of scope.  The former can be fixed
by using ogr.Open instead of driver.Open The latter can be fixed by
returning it from the function.  A revised version of your code would look
like:

# import modules
from osgeo import ogr

def openShapeLine(shapefile):
   #Ouverture du shapefile avec ogr
   datasource = ogr.Open(shapefile)
   layer = datasource.GetLayer()
   return (datasource, layer)

ds, couche = openShapeLine('/data/axe.shp')

print couche.GetName()


On 5 August 2010 17:23, Ludovic Granjon <ludovic.granjon@u-bourgogne.fr>wrote:

> Hello
>
> I'm trying to develop with ogr in python. I'm on ubuntu 10.4 and I use gdal
> 1.7
> When I try to get back a layer object from a function, I have the following
> message when I do python monscript.py :
> "Erreur de segmentation"
>
> This is my code :
>
> -----------------------
> # import modules
> from osgeo import ogr
>
> def openShapeLine(shapefile):
>    #Ouverture du shapefile avec ogr
>    driver = ogr.GetDriverByName("ESRI Shapefile")
>    datasource = driver.Open(shapefile)
>    layer = datasource.GetLayer()
>    return (layer)
>
> couche = openShapeLine('/data/axe.shp')
>
> print couche.GetName()
> ------------------------
>
> If I do a "print layer.GetName()" inside the openShapeLine function,
> there's no problem ...
>
> Have you any idea ?
>
> Thanks all
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/0e0fc817/attachment-0001.html
From ludovic.granjon at u-bourgogne.fr  Thu Aug  5 03:55:41 2010
From: ludovic.granjon at u-bourgogne.fr (Ludovic Granjon)
Date: Thu Aug  5 03:55:48 2010
Subject: [gdal-dev] get back a layer objet with ogr in python
In-Reply-To: <AANLkTik+tUQbVHSAOfFPSkQSXqKnCv36VgvS4uNEkGif@mail.gmail.com>
References: <4C5A66DC.5010002@u-bourgogne.fr>
	<AANLkTik+tUQbVHSAOfFPSkQSXqKnCv36VgvS4uNEkGif@mail.gmail.com>
Message-ID: <4C5A6E7D.7070908@u-bourgogne.fr>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: ludovic_granjon.vcf
Type: text/x-vcard
Size: 149 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/3a728f4f/ludovic_granjon.vcf
From szekerest at gmail.com  Thu Aug  5 08:05:08 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Aug  5 08:05:10 2010
Subject: [gdal-dev] c# binding and .net4
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06A12B7D798@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06A12B7D798@MAILBOXSERVER.rf.local>
Message-ID: <AANLkTimwQ5MVd+Fz+Z2gJy-NspV2oSOHnjqCq9dWynBw@mail.gmail.com>

I think you may refer to the issue reported in
http://trac.osgeo.org/gdal/ticket/3560

I've now updated the GDAL csharp bindings to include that fix which already
exists in SWIG 2.0.

Upgrading the bindings to support SWIG 2.0 would be quite complicated due to
several backward incompatible changes introduced from versions to versions.
In addition we have a number of local fixes to rework the original behaviour
of SWIG causing further memory issues with the .NET garbage collection.
These problems hasn't yet been included in the SWIG codebase (and I'm not
sure it will ever be added) make that impossible to use SWIG as it stands in
the GDAL C# bindings.

These changes will be included in the next daily build available to download
at: http://vbkto.dyndns.org/sdk/


Best regards,

Tamas




2010/8/5 Livneh Yehiyam <yehil@rafael.co.il>

> Hi
> As you probably aware GDAL currently fails to run when used in a .net4
> client.
> I know that there is a newer version of swig (2.0) that fixes that.
> Are there any plans to move to the new swig version?
>
> Thanks
> Yehiyam
>
>
> ------------------------------
> * This message (including any attachments) issued by RAFAEL- ADVANCED
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
> information intended for a specific individual and purpose, may constitute
> information that is privileged or confidential or otherwise protected from
> disclosure. If you are not the intended recipient, you should contact us
> immediately and thereafter delete this message from your system. You are
> hereby notified that any disclosure, copying, dissemination, distribution or
> forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof. *
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/ea1faf82/attachment.html
From armin.burger at gmx.net  Thu Aug  5 08:27:15 2010
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Aug  5 08:27:21 2010
Subject: [gdal-dev] gdaladdo and cubic resampling
Message-ID: <20100805122715.134230@gmx.net>

Hi all

I have a question regarding the resampling modes for the gdaladdo utility. Since the overviews are used by Mapserver afterwards, I ran some tests with a map file referencing the Tiff image and the shp2img tool to output the results. 

I found the gauss resampling smoothening the image a bit too much. Therefore I wanted to try the "cubic" resample method using the GDAL version included in FWTools 2.4.7 (1.7.0b2), but to me it looks like that this does not have any effect compared to "nearest" resampling. Does anybody have a clue why? Command used was

gdaladdo -ro  -r cubic  image.tif 2 4 8 16 32 64

Thanks in advance for any help
Armin


 
-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 ?/mtl.!*
http://portal.gmx.net/de/go/dsl
From edikaradumi at gmail.com  Thu Aug  5 08:42:40 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Aug  5 08:42:41 2010
Subject: [gdal-dev] SPHEROID["unretrievable - using WGS84"...
Message-ID: <1281012160499-5376320.post@n2.nabble.com>


when i use gdalwarp -t_srs EPSG:2199 source.tif dest.tif i get an ok but when
i use gdalinfo i get 
the following result:

Driver: GTiff/GeoTIFF
Files: dest.tif
dest.tfw
Size is 9375, 6250
Coordinate System is:
PROJCS["unnamed",
   GEOGCS[,
       DATUM["unknown",
            SPHEROIK["unretrievable - using WGS84",6375137,298.257223563]],
       PRIMEM["Greenwich",0],
   UNIT["metre",1,
       AUTHORITY["EPSG","9001"]],
   AUTHORITY["EPSG","2199"]]
Origin = (375000.00000000,4581000.0000000000)
Pixel Size = (0.0800000000,-0.08000000000)
Medatata:

..........

is this normal?
what is the meaning of all those unknown, unretrievable?




-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/SPHEROID-unretrievable-using-WGS84-tp5376320p5376320.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tjeffery at gmail.com  Thu Aug  5 09:02:00 2010
From: tjeffery at gmail.com (Tom Jeffery)
Date: Thu Aug  5 09:02:01 2010
Subject: [gdal-dev] Re: Editing attributes with ogr causing corrupt shapefile
In-Reply-To: <4C59D4CB.80805@pobox.com>
References: <1280928479215-5372483.post@n2.nabble.com>
	<AANLkTinkCCe8Hhju0BJ_Hub=t6nJTyziKQRyeWw=FEP8@mail.gmail.com>
	<1280939414854-5373236.post@n2.nabble.com>
	<AANLkTimaOPxB46KU0jewRcVCjcqZMVL_ab8tt7cQGHMO@mail.gmail.com>
	<1280950306227-5373963.post@n2.nabble.com>
	<AANLkTikYoUqOS+z-C1BbXj6UenoG7wRmhz7nxicANodb@mail.gmail.com>
	<1280954598517-5374225.post@n2.nabble.com>
	<4C59D4CB.80805@pobox.com>
Message-ID: <1281013320640-5376367.post@n2.nabble.com>


Frank,

Your solution seems to work for me.  I don't know ArcGIS well enough to dig
into why it behaves that way, but deleting the features outside the claimed
extent (they aren't showing up as null in ogr), then using ogr2ogr does
result in a safe, non-corrupt shapefile that is usable with both ArcGIS and
ogr.  Thanks for the suggestion!

-Tom


Frank Warmerdam wrote:
> 
> Tom,
> 
> I believe OGR takes the approach of marking shapes deleted by setting the
> deleted flag in the .dbf file.  As far as I knew, this is a reasonable
> approach as far as ArcGIS is concerned.  I don't know why ArcGIS does
> something that corrupts the file.  If you figure out the issue let us
> know.
> 
> In the meantime, after doing the cleanup operation you can run ogr2ogr on
> the file to create a new file with all deleted records/shapes discarded.
> 
> eg.
> ogr2ogr out.shp in.shp
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Editing-attributes-with-ogr-causing-corrupt-shapefile-tp5372483p5376367.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From armin.burger at gmx.net  Thu Aug  5 09:58:01 2010
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Aug  5 09:58:11 2010
Subject: [gdal-dev] SPHEROID["unretrievable - using WGS84"...
In-Reply-To: <1281012160499-5376320.post@n2.nabble.com>
References: <1281012160499-5376320.post@n2.nabble.com>
Message-ID: <20100805135801.78670@gmx.net>

Edi

this is a typical issue with GDAL using less "common" projections specified with their EPSG code (it always works fine with UTM projections for example). The transformation is correct, but the GeoTiff header is a bit weird. This happens for me eg. when I use a pan-European projection like ETRS LAEA (EPSG 3035). 

The best way to avoid this is to specify the "-t_srs" not with the EPSG:2199 but with a file containing the WKT description of your projection. This seems to always write the complete WKT from your prj file into the GeoTiff header, so something like

... -t_srs path/to/epsg2199.prj ...
where epsg2199.prj is a text file containing the WKT representation of your projection.

WKT for 2199 should be:

PROJCS["Albanian 1987 / Gauss Kruger zone 4 (deprecated)",
    GEOGCS["Albanian 1987",
        DATUM["Albanian_1987",
            SPHEROID["Krassowsky 1940",6378245,298.3,
                AUTHORITY["EPSG","7024"]],
            AUTHORITY["EPSG","6191"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4191"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",21],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",4500000],
    PARAMETER["false_northing",0],
    AUTHORITY["EPSG","2199"]]



An alternative is to use the full Proj4 definition string, like for your case

... -t_srs "+proj=tmerc +lat_0=0 +lon_0=21 +k=1 +x_0=4500000 +y_0=0 +ellps=krass +units=m +no_defs" ... 

You can also specify your datum by adding in addition a clause to this string like
  +datum=your-datum
but this depends if GDAL recognizes the datum definition (I have not found a list of supported datums that one can use this way). 

An advantage using the latter approach is that you can also specify datum shift parameters with the additional clause like

  +towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56

(values depend of course of your projection).

I hope this helps

Greetings
Armin



-------- Original-Nachricht --------
> Datum: Thu, 5 Aug 2010 05:42:40 -0700 (PDT)
> Von: "Edi.Karadumi" <edikaradumi@gmail.com>
> An: gdal-dev@lists.osgeo.org
> Betreff: [gdal-dev] SPHEROID["unretrievable - using WGS84"...

> 
> when i use gdalwarp -t_srs EPSG:2199 source.tif dest.tif i get an ok but
> when
> i use gdalinfo i get 
> the following result:
> 
> Driver: GTiff/GeoTIFF
> Files: dest.tif
> dest.tfw
> Size is 9375, 6250
> Coordinate System is:
> PROJCS["unnamed",
>    GEOGCS[,
>        DATUM["unknown",
>             SPHEROIK["unretrievable - using
> WGS84",6375137,298.257223563]],
>        PRIMEM["Greenwich",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","2199"]]
> Origin = (375000.00000000,4581000.0000000000)
> Pixel Size = (0.0800000000,-0.08000000000)
> Medatata:
> 
> ..........
> 
> is this normal?
> what is the meaning of all those unknown, unretrievable?
> 
> 
> 
> 
> -- 
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/SPHEROID-unretrievable-using-WGS84-tp5376320p5376320.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 ?/mtl.!*
http://portal.gmx.net/de/go/dsl
From edikaradumi at gmail.com  Thu Aug  5 10:14:15 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Aug  5 10:14:16 2010
Subject: [gdal-dev] Re: SPHEROID["unretrievable - using WGS84"...
In-Reply-To: <20100805135801.78670@gmx.net>
References: <1281012160499-5376320.post@n2.nabble.com>
	<20100805135801.78670@gmx.net>
Message-ID: <1281017655108-5376648.post@n2.nabble.com>


Thnx, that dids the job. Actually i was trying with gdal_translate -a_srs
"+proj=tmerc +lat_0=0 +lon_0=21 +k=1 +x_0=4500000 +y_0=0 +ellps=krass
+units=m +no_defs" input.tif output.tif and it worked too.
Another thing if i execute this command after i have created the overview
they are not in the new file. Now my problem is should i use 

gdal_translate -a_srs "+proj=tmerc +lat_0=0 +lon_0=21 +k=1 +x_0=4500000
+y_0=0 +ellps=krass +units=m +no_defs" input.tif output.tif

before 

gdal_translate -of GTiff -co "TILED=YES" input.tif output.tif

or the opposite 

cuz i thing that the projection removes the other info of the tile

the size of the file with overview was ~240 mb and after adding the
projection went to 170mb
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/SPHEROID-unretrievable-using-WGS84-tp5376320p5376648.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From piva at meeo.it  Thu Aug  5 10:18:55 2010
From: piva at meeo.it (Giacomo Piva)
Date: Thu Aug  5 10:25:36 2010
Subject: [gdal-dev] gdal warp of a shapefile
Message-ID: <4C5AC84F.6050002@meeo.it>

Hi all,
I have a somple and fast question: is it possible to execute a gdalwarp 
command on a shapefile? how?

Thank you

-- 
Giacomo

From chaitanya.ch at gmail.com  Thu Aug  5 10:44:41 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Aug  5 10:44:44 2010
Subject: [gdal-dev] gdal warp of a shapefile
In-Reply-To: <4C5AC84F.6050002@meeo.it>
References: <4C5AC84F.6050002@meeo.it>
Message-ID: <AANLkTi=hHGfoXru7oHNj9R9YQLzq4M1bpTL98rmAbhVX@mail.gmail.com>

Giacomo,

You can use ogr2ogr utility for that. (http://www.gdal.org/ogr2ogr.html)

On Thu, Aug 5, 2010 at 7:48 PM, Giacomo Piva <piva@meeo.it> wrote:

> Hi all,
> I have a somple and fast question: is it possible to execute a gdalwarp
> command on a shapefile? how?
>
> Thank you
>
> --
> Giacomo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/c20613ae/attachment.html
From ivan at sanchezortega.es  Thu Aug  5 11:35:37 2010
From: ivan at sanchezortega.es (=?iso-8859-1?q?Iv=E1n_S=E1nchez_Ortega?=)
Date: Thu Aug  5 11:35:45 2010
Subject: [gdal-dev] gdal warp of a shapefile
In-Reply-To: <4C5AC84F.6050002@meeo.it>
References: <4C5AC84F.6050002@meeo.it>
Message-ID: <201008051735.38435.ivan@sanchezortega.es>

El d?a Thursday 05 August 2010 16:18:55, Giacomo Piva dijo:
> I have a somple and fast question: is it possible to execute a gdalwarp
> command on a shapefile? how?

Raster data is warped. Vector data is reprojected. These concepts are quite 
different.

-- 
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

Un ordenador no es una televisi?n ni un microondas: es una herramienta 
compleja.
From edikaradumi at gmail.com  Thu Aug  5 11:59:08 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Aug  5 11:59:10 2010
Subject: [gdal-dev] Re: Raster Strategies Examples
In-Reply-To: <1280930676.30564.10.camel@winkey.org>
References: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>
	<1280930676.30564.10.camel@winkey.org>
Message-ID: <1281023948432-5377105.post@n2.nabble.com>


Edi,

its not like that, you provide shp2img a map file, bounding box, height
and width of output file, and it produces a image made of all the tiles
that land in that bounding box

brian
- Hide quoted text -

On Wed, 2010-08-04 at 16:09 +0200, Edi KARADUMI wrote:
> oh yeah. thnx
> But do you know how many tiles ill have to merge together? for example
> ill have to merge the tiles 2 by 2.
> its the same thing as writing 3000 times the command
>
> On Wed, Aug 4, 2010 at 4:04 PM, brian <rush@winkey.org> wrote:
>         Edi,
>
>         Personaly I beleve gdalwarp is the wrong tool for the job, you
>         already
>         have it all set up for mapserver so just use shp2img.
>
>
>
>
>         On Mon, 2010-08-02 at 17:14 +0200, Edi KARADUMI wrote:
>         > as you may know, i have very slow performance when i zoom
>         out and im
>         > stucked here. As i have read i should make a copy of the
>         tiles with
>         > reduced resolution. Merge the tiles together and use min/max
>         scale to
>         > show different layers in different scales. the min/max
>         scales i zoom
>         > in/out are 100/1200000. Now my questions are
>         >
>         > - How can i calculate the scale where i should create
>         another layer of
>         > the tiles, or i shoud see it with some tests?
>         >
>         > - how much should be the resolution of the new layer?
>         >
>         > - is there any tools or program to merge the tiles? merging
>         6000 tiles
>         > with the gdalwarp by writing the command by myself is
>         frustrating
>         >
>         > - how many tiles should i merge together to create the new
>         layer? (how
>         > many tiles should have the new layer) i know that in each
>         zoomscale
>         > its better to appear only one tile but i dont know how to
>         calculate
>         > it
>         >
>         > - the tiles that i should merge are the originals or those
>         with
>         > internal tiling and overviews?

yep but i need to do a new copy of all my tiles to display it with min/max
scale when i zoom out cuz the number of tiles to read is very large and
takes a lot of time to render. so in bigger scales i should make another
copy with reduced resolution and less tiles. So i need to merge them. And im
still working on it cuz i dont know how many tiles should merge to create a
bigger one that will be displayed at bigger scales (still confused how to
find this scale for example 1:5000 or 1:100000 i dont know it)

Regards
Edi Karadumi
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Raster-Strategies-Examples-tp5364468p5377105.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From zdenek at vrablik.org  Thu Aug  5 12:31:21 2010
From: zdenek at vrablik.org (=?UTF-8?B?WmRlbsSbayBWcsOhYmzDrWs=?=)
Date: Thu Aug  5 12:31:25 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work
In-Reply-To: <AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>
References: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
	<AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>
Message-ID: <AANLkTi=JbOVrZhQ7L98obz90pAW8n+j3Vg-SGke+kRwg@mail.gmail.com>

Hi,

I have removed external plugins and found that the JNI works when
I have removed the lib expat from nmake.opt

I was compiling the expat from source I downloaded from
http://sourceforge.net/projects/expat/files/
I am using version 2.0.1.

Have you got any problems compiling and using expat.

I was compiling with the visual studio. There is VS project file. I
have changed the active configuration to release and platform to x64.

Expat dll file is PE 32+, but using this dll prevents loading jni
files correctly.


Did you have to modify the expat project before building?

Thanks.

Regards,
Zdenek
From ari.jolma at gmail.com  Thu Aug  5 12:53:00 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Aug  5 12:53:04 2010
Subject: [gdal-dev] c# binding and .net4
In-Reply-To: <AANLkTimwQ5MVd+Fz+Z2gJy-NspV2oSOHnjqCq9dWynBw@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C06A12B7D798@MAILBOXSERVER.rf.local>
	<AANLkTimwQ5MVd+Fz+Z2gJy-NspV2oSOHnjqCq9dWynBw@mail.gmail.com>
Message-ID: <4C5AEC6C.7030306@gmail.com>

Tamas Szekeres wrote:
>
> I've now updated the GDAL csharp bindings to include that fix which 
> already exists in SWIG 2.0.
>
> Upgrading the bindings to support SWIG 2.0 would be quite complicated 
> due to several backward incompatible changes introduced from versions 
> to versions.
> In addition we have a number of local fixes to rework the original 
> behaviour of SWIG causing further memory issues with the .NET garbage 
> collection. These problems hasn't yet been included in the SWIG 
> codebase (and I'm not sure it will ever be added) make that impossible 
> to use SWIG as it stands in the GDAL C# bindings.
>
Tamas,

Are you saying here that C# swig bindings are stuck with 1.3.40 (or what 
is the official version of swig that we use, in my Ubuntu I have 
1.3.36)? I believe that eventually we need to move to using 2.0.

Ari

From szekerest at gmail.com  Thu Aug  5 13:41:08 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Aug  5 13:41:10 2010
Subject: [gdal-dev] c# binding and .net4
In-Reply-To: <4C5AEC6C.7030306@gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C06A12B7D798@MAILBOXSERVER.rf.local>
	<AANLkTimwQ5MVd+Fz+Z2gJy-NspV2oSOHnjqCq9dWynBw@mail.gmail.com>
	<4C5AEC6C.7030306@gmail.com>
Message-ID: <AANLkTi=7Zoehk2hDYRyXpxRQEi_ygMiJx19tT3dV1DjC@mail.gmail.com>

2010/8/5 Ari Jolma <ari.jolma@gmail.com>

> Tamas Szekeres wrote:
>
>>
>> I've now updated the GDAL csharp bindings to include that fix which
>> already exists in SWIG 2.0.
>>
>> Upgrading the bindings to support SWIG 2.0 would be quite complicated due
>> to several backward incompatible changes introduced from versions to
>> versions.
>> In addition we have a number of local fixes to rework the original
>> behaviour of SWIG causing further memory issues with the .NET garbage
>> collection. These problems hasn't yet been included in the SWIG codebase
>> (and I'm not sure it will ever be added) make that impossible to use SWIG as
>> it stands in the GDAL C# bindings.
>>
>>  Tamas,
>
> Are you saying here that C# swig bindings are stuck with 1.3.40 (or what is
> the official version of swig that we use, in my Ubuntu I have 1.3.36)? I
> believe that eventually we need to move to using 2.0.
>
>
Ari,

It may eventually work but hasn't been tested by me. My automated builders
at http://vbkto.dyndns.org/sdk use 1.3.39 for all bindings.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/66ad06e1/attachment.html
From szekerest at gmail.com  Thu Aug  5 13:53:08 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Aug  5 13:53:10 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't 
	work
In-Reply-To: <AANLkTi=JbOVrZhQ7L98obz90pAW8n+j3Vg-SGke+kRwg@mail.gmail.com>
References: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
	<AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>
	<AANLkTi=JbOVrZhQ7L98obz90pAW8n+j3Vg-SGke+kRwg@mail.gmail.com>
Message-ID: <AANLkTin7Y23rTK8430RjZAj+NWGk5d5PtRRauFRintVQ@mail.gmail.com>

Hi,

Switcing to x64 should produce x64 compatible libs and dll with the expat
solution. You can use de Depends tool to inspect libexpat.dll whether it's
an x64 or x32 image.
BTW: If you don't want to make your hands dirty with the compilation just
download one of the SDK packages from http://vbkto.dyndns.org/sdk containing
all the required libs headers and dlls provided to compile GDAL.


Best regards,

Tamas



2010/8/5 Zden?k Vr?bl?k <zdenek@vrablik.org>

> Hi,
>
> I have removed external plugins and found that the JNI works when
> I have removed the lib expat from nmake.opt
>
> I was compiling the expat from source I downloaded from
> http://sourceforge.net/projects/expat/files/
> I am using version 2.0.1.
>
> Have you got any problems compiling and using expat.
>
> I was compiling with the visual studio. There is VS project file. I
> have changed the active configuration to release and platform to x64.
>
> Expat dll file is PE 32+, but using this dll prevents loading jni
> files correctly.
>
>
> Did you have to modify the expat project before building?
>
> Thanks.
>
> Regards,
> Zdenek
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/1262ae5e/attachment.html
From warmerdam at pobox.com  Thu Aug  5 15:50:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Aug  5 15:50:49 2010
Subject: [gdal-dev] Motion / RFC 28: OGR SQL Generalized Expressions
Message-ID: <4C5B1616.5010003@pobox.com>

Folks,

I motion to adopt RFC 28: OGR SQL Generalized Expressions.

   http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc

The working implementation is available in the sandbox noted in the
RFC, though I'm still refining it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Thu Aug  5 15:52:32 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Aug  5 15:52:36 2010
Subject: [gdal-dev] Motion / RFC 28: OGR SQL Generalized Expressions
In-Reply-To: <4C5B1616.5010003@pobox.com>
References: <4C5B1616.5010003@pobox.com>
Message-ID: <AADA49B1-FC16-445A-97D0-BA8B59ED20B0@gmail.com>


On Aug 5, 2010, at 2:50 PM, Frank Warmerdam wrote:

> Folks,
> 
> I motion to adopt RFC 28: OGR SQL Generalized Expressions.
> 
>  http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
> 
> The working implementation is available in the sandbox noted in the
> RFC, though I'm still refining it.

+1

Howard
From even.rouault at mines-paris.org  Thu Aug  5 16:06:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug  5 16:06:49 2010
Subject: [gdal-dev] Motion / RFC 28: OGR SQL Generalized Expressions
In-Reply-To: <4C5B1616.5010003@pobox.com>
References: <4C5B1616.5010003@pobox.com>
Message-ID: <201008052206.39771.even.rouault@mines-paris.org>

+1

Even

Le jeudi 05 ao?t 2010 21:50:46, Frank Warmerdam a ?crit :
> Folks,
> 
> I motion to adopt RFC 28: OGR SQL Generalized Expressions.
> 
>    http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
> 
> The working implementation is available in the sandbox noted in the
> RFC, though I'm still refining it.
> 
> Best regards,
From szekerest at gmail.com  Thu Aug  5 16:17:05 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Aug  5 16:17:07 2010
Subject: [gdal-dev] Motion / RFC 28: OGR SQL Generalized Expressions
In-Reply-To: <4C5B1616.5010003@pobox.com>
References: <4C5B1616.5010003@pobox.com>
Message-ID: <AANLkTinMgti9iDGaLioWa218b9Wnf9nfUbCfAfmBhZta@mail.gmail.com>

+1

Tamas



2010/8/5 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> I motion to adopt RFC 28: OGR SQL Generalized Expressions.
>
>  http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
>
> The working implementation is available in the sandbox noted in the
> RFC, though I'm still refining it.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100805/14b35417/attachment-0001.html
From dmorissette at mapgears.com  Thu Aug  5 17:20:17 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Aug  5 17:27:14 2010
Subject: [gdal-dev] Motion / RFC 28: OGR SQL Generalized Expressions
In-Reply-To: <4C5B1616.5010003@pobox.com>
References: <4C5B1616.5010003@pobox.com>
Message-ID: <4C5B2B11.9090400@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> I motion to adopt RFC 28: OGR SQL Generalized Expressions.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc
> 

+1

-- 
Daniel Morissette
http://www.mapgears.com/
From chaitanya.ch at gmail.com  Fri Aug  6 01:26:21 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug  6 01:26:23 2010
Subject: [gdal-dev] gdaladdo and cubic resampling
In-Reply-To: <4C5AF543.8060509@gmx.net>
References: <20100805122715.134230@gmx.net>
	<AANLkTinm9EXP6nSrDDWyz0U_Mxp=vLM6EB6MgKHbkc6Z@mail.gmail.com>
	<4C5AF543.8060509@gmx.net>
Message-ID: <AANLkTik2hzK3TqtB7g5er3es-P_cPP5vPV+611D88b1s@mail.gmail.com>

Armin,

GDAL's resampling algorithms for overviews are a bit restricted. Your best
bet is to smoothen the image with an image processing software.

On Thu, Aug 5, 2010 at 11:00 PM, Armin Burger <armin.burger@gmx.net> wrote:

> Chaitanya
>
> I send the image just to you since it's not small any more. This is a
> mosaic of 3 versions of GDAL overviews:
>
> left: nearest
> middle: cubic
> right: gauss
>
> as you can see, nearest and cubic are looking very similar, quite grainy
> (which I would expect from nearest but not from cubic convolution). The
> gaussian on the other hand is very much smoothed, already a bit blurred. I
> was expecting that cubic would produce much less grainy results than nearest
> but less blurred effects than gaussian.
>
> Regards
> Armin
>
>
> On 05/08/2010 14:52, Chaitanya kumar CH wrote:
>
>> Armin,
>>
>> Can you provide a sample image that shows this problem?
>>
>> On Thu, Aug 5, 2010 at 5:57 PM, Armin Burger <armin.burger@gmx.net
>> <mailto:armin.burger@gmx.net>> wrote:
>>
>>    Hi all
>>
>>    I have a question regarding the resampling modes for the gdaladdo
>>    utility. Since the overviews are used by Mapserver afterwards, I ran
>>    some tests with a map file referencing the Tiff image and the
>>    shp2img tool to output the results.
>>
>>    I found the gauss resampling smoothening the image a bit too much.
>>    Therefore I wanted to try the "cubic" resample method using the GDAL
>>    version included in FWTools 2.4.7 (1.7.0b2), but to me it looks like
>>    that this does not have any effect compared to "nearest" resampling.
>>    Does anybody have a clue why? Command used was
>>
>>    gdaladdo -ro  -r cubic  image.tif 2 4 8 16 32 64
>>
>>    Thanks in advance for any help
>>    Armin
>>
>>
>>
>>    --
>>    GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 f?r nur 19,99 ?/mtl.!*
>>    http://portal.gmx.net/de/go/dsl
>>    _______________________________________________
>>    gdal-dev mailing list
>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>
>>    http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100806/96d205d6/attachment.html
From piva at meeo.it  Fri Aug  6 02:39:36 2010
From: piva at meeo.it (Giacomo Piva)
Date: Fri Aug  6 02:39:41 2010
Subject: [gdal-dev] Merging shapefile
Message-ID: <4C5BAE28.3050905@meeo.it>

Hi all,
I need to merge two shapefile, is it possible with GDAL ?
Thank you

-- 
Giacomo

From ole.nielsen at aifdr.org  Fri Aug  6 02:50:15 2010
From: ole.nielsen at aifdr.org (Ole Nielsen)
Date: Fri Aug  6 02:45:32 2010
Subject: [gdal-dev] How to retain double precision in GDAL?
Message-ID: <01744CEB055A2D46A1C0E02E68F90DCB02172C951203@Exchange.aifdr.org>

Dear group

We are using GDAL - both command line and Python bindings -  for much of our modelling work. However, we find that the library wants to round floating point numbers down to single precision (Float32 or DataType=6) where what we need for scientific computing is double precision (Float64 or DataType=7). We have been digging around the documentation and the Python binding source codes, but are running out of ideas.

Please find attached a small Python script with an ASCII test grid that reveals the issue. Data which is originally in double precision gets rounded to 6 decimal places if read directly by Gdal and also if converted first to GeoTIFF using gdal_translate -ot Float64 ... .


The output of the attached script is


ASCII datatype: 6 float32
TIF datatype:   7 float64

Data GDAL (ASC): 50.814723968505859
Data GDAL (TIF): 50.814723968505859
Data REF:        50.814723686393002

Error (ASC):     0.000000282112858
Error (TIF):     0.000000282112858




Grateful for your help
Cheers
Ole


Dr Ole Nielsen
Numerical Modeller
Australia-Indonesia Facility for Disaster Reduction
Mobile: +62 811 820 4637 | Phone: +62 21 398 30088 x1007 | Fax: +62 21 398 30068




-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_precision_test.tgz
Type: application/x-compressed
Size: 1377 bytes
Desc: gdal_precision_test.tgz
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100806/89c8271b/gdal_precision_test.bin
From piva at meeo.it  Fri Aug  6 03:30:58 2010
From: piva at meeo.it (Giacomo Piva)
Date: Fri Aug  6 03:31:02 2010
Subject: [gdal-dev] ogr2ogr clipping shapefile
Message-ID: <4C5BBA32.8020105@meeo.it>

Hi all,
I need to cut a shapefile usins as bounding box another shapefile.
Does someone can explain me how to do that with ogr2ogr?

Thank you very much

-- 
Giacomo

From chaitanya.ch at gmail.com  Fri Aug  6 03:50:30 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug  6 03:50:33 2010
Subject: [gdal-dev] ogr2ogr clipping shapefile
In-Reply-To: <4C5BBA32.8020105@meeo.it>
References: <4C5BBA32.8020105@meeo.it>
Message-ID: <AANLkTi=fw3VnGvRuNZU5fB3148rqqXVAtYctcpqMkCbg@mail.gmail.com>

Giacomo,

The ogr2ogr utility can do that. Use the clipping options.
http://gdal.org/ogr2ogr.html

On Fri, Aug 6, 2010 at 1:00 PM, Giacomo Piva <piva@meeo.it> wrote:

> Hi all,
> I need to cut a shapefile usins as bounding box another shapefile.
> Does someone can explain me how to do that with ogr2ogr?
>
> Thank you very much
>
> --
> Giacomo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100806/718c9cc9/attachment.html
From peifer at gmx.eu  Fri Aug  6 03:50:26 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Aug  6 03:50:42 2010
Subject: [gdal-dev] Re: Merging shapefile
In-Reply-To: <4C5BAE28.3050905@meeo.it>
References: <4C5BAE28.3050905@meeo.it>
Message-ID: <4C5BBEC2.6000808@gmx.eu>

On 06/08/2010 08:39, Giacomo Piva wrote:
> Hi all,
> I need to merge two shapefile, is it possible with GDAL ?
> Thank you
>

See this FAQ:

http://trac.osgeo.org/gdal/wiki/FAQVector#HowcanImergehundredsofShapefiles

Hermann
From even.rouault at mines-paris.org  Fri Aug  6 04:08:30 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug  6 04:08:37 2010
Subject: [gdal-dev] How to retain double precision in GDAL?
In-Reply-To: <01744CEB055A2D46A1C0E02E68F90DCB02172C951203@Exchange.aifdr.org>
References: <01744CEB055A2D46A1C0E02E68F90DCB02172C951203@Exchange.aifdr.org>
Message-ID: <201008061008.30686.even.rouault@mines-paris.org>

Ole,

the current code in the AAIGRID driver autodetects if its a integer grid or a 
floating point grid, and in the later case it uses Float32 as a datatype, so 
that explains the loss of precision you've seen.

In the latest SVN code (see http://trac.osgeo.org/gdal/changeset/20179 and 
http://trac.osgeo.org/gdal/changeset/20180 ), the situation is now improved so 
that you now can set the configuration option AAIGRID_DATATYPE to Float64 to 
force Float64 being used to avoid the loss of precision.

If I try with your script,
AAIGRID_DATATYPE=Float64 python gdal_precision_test.py

I get now :
ASCII datatype: 7 float64
TIF datatype:   7 float64

Data GDAL (ASC): 50.814723686393002
Data GDAL (TIF): 50.814723686393002
Data REF:        50.814723686393002

Error (ASC):     0.000000000000000
Error (TIF):     0.000000000000000

Best regards,

Even

Le vendredi 06 ao?t 2010 08:50:15, Ole Nielsen a ?crit :
> Dear group
> 
> We are using GDAL - both command line and Python bindings -  for much of
> our modelling work. However, we find that the library wants to round
> floating point numbers down to single precision (Float32 or DataType=6)
> where what we need for scientific computing is double precision (Float64
> or DataType=7). We have been digging around the documentation and the
> Python binding source codes, but are running out of ideas.
> 
> Please find attached a small Python script with an ASCII test grid that
> reveals the issue. Data which is originally in double precision gets
> rounded to 6 decimal places if read directly by Gdal and also if converted
> first to GeoTIFF using gdal_translate -ot Float64 ... .
> 
> 
> The output of the attached script is
> 
> 
> ASCII datatype: 6 float32
> TIF datatype:   7 float64
> 
> Data GDAL (ASC): 50.814723968505859
> Data GDAL (TIF): 50.814723968505859
> Data REF:        50.814723686393002
> 
> Error (ASC):     0.000000282112858
> Error (TIF):     0.000000282112858
> 
> 
> 
> 
> Grateful for your help
> Cheers
> Ole
> 
> 
> Dr Ole Nielsen
> Numerical Modeller
> Australia-Indonesia Facility for Disaster Reduction
> Mobile: +62 811 820 4637 | Phone: +62 21 398 30088 x1007 | Fax: +62 21 398
> 30068
From martin at bier-mail.de  Fri Aug  6 06:56:28 2010
From: martin at bier-mail.de (Matin80)
Date: Fri Aug  6 06:56:30 2010
Subject: [gdal-dev] split netCDF
Message-ID: <1281092188665-5380091.post@n2.nabble.com>


Hi everyone,

I have a netCDF-file containing over 300  bands.
is it possible to split up the file and get the same number of GeoTiffs with
GDAL in a single command line? All i found to this topic ended in merging
the bands to a single output file...

kind regards,
Martin

 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/split-netCDF-tp5380091p5380091.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Aug  6 07:42:35 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug  6 07:42:37 2010
Subject: [gdal-dev] split netCDF
In-Reply-To: <1281092188665-5380091.post@n2.nabble.com>
References: <1281092188665-5380091.post@n2.nabble.com>
Message-ID: <AANLkTi=9n_6kjDD+Tb9T2apcLJWAK-HQ+6bvq+aHYe1P@mail.gmail.com>

Martin,

Use the gdal_translate utility (http://www.gdal.org/gdal_translate.html)
with the -b option. You will have to run the command once for each band. A
simple shell script should do it.

On Fri, Aug 6, 2010 at 4:26 PM, Matin80 <martin@bier-mail.de> wrote:

>
> Hi everyone,
>
> I have a netCDF-file containing over 300  bands.
> is it possible to split up the file and get the same number of GeoTiffs
> with
> GDAL in a single command line? All i found to this topic ended in merging
> the bands to a single output file...
>
> kind regards,
> Martin
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/split-netCDF-tp5380091p5380091.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100806/2cf386cb/attachment.html
From zdenek at vrablik.org  Fri Aug  6 08:15:21 2010
From: zdenek at vrablik.org (=?UTF-8?B?WmRlbsSbayBWcsOhYmzDrWs=?=)
Date: Fri Aug  6 08:15:23 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work
In-Reply-To: <AANLkTimKW3yvF8kr2iZ9sHyTK=tC4EYaHCtEQj8ynxAg@mail.gmail.com>
References: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
	<AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>
	<AANLkTi=JbOVrZhQ7L98obz90pAW8n+j3Vg-SGke+kRwg@mail.gmail.com>
	<AANLkTin7Y23rTK8430RjZAj+NWGk5d5PtRRauFRintVQ@mail.gmail.com>
	<AANLkTimKW3yvF8kr2iZ9sHyTK=tC4EYaHCtEQj8ynxAg@mail.gmail.com>
Message-ID: <AANLkTinppCBzVOFHmzfZYt598JC0Ud56L2vdNnTff-7y@mail.gmail.com>

Hi Tamas,

Thank you for reply.

I compiled with libexpat.lib and used the include directory from
release-1400-x64-dev ?and than I used the dll file from bin directory
libexpat.dll. It doesn't work again. It has compilled correctly, but
the error is same.

I compiled with Xerces from release-1400-x64-dev and the gml was
working fine. The KML didn't work.
I was importing kml, which was possible to read by gdal (with expat,
through jni ) in linux. Than I think the file should be correct.


I have got an error when I try open the libexpat.dll (downloaded from
page you recommanded ) in DependencyWalker ( 64 bit version on win
2003):

Error: The Side-by-Side configuration information for
"n:\zdenek\gdal\compiled2_8_2010\release-1400-x64\bin\LIBEXPAT.DLL"
contains errors. This application has failed to start because the
application configuration is incorrect. Reinstalling the application
may fix this problem (14001).

First I thought it could be because of missing ms visual c++ dlls,
than I copied msvcm80.dll msvcp80.dll and msvcr80.dll into same
directory as libexpat.dll. Dependency walker doesn't report any
missing library, but the error is still there.

Could be the dll file invalid?

Is it possible to compile expat from command line?
Is it possible to use Xerces as xml parsers for kml and gpx? Gml works
fine with Xerces.

Regards,
Zdenek

2010/8/5 Tamas Szekeres <szekerest@gmail.com>:
> Hi,
>
> Switcing to x64 should produce x64 compatible libs and dll with the expat
> solution. You can use de Depends tool to inspect libexpat.dll whether it's
> an x64 or x32 image.
> BTW: If you don't want to make your hands dirty with the compilation just
> download one of the SDK packages from http://vbkto.dyndns.org/sdk containing
> all the required libs headers and dlls provided to compile GDAL.
>
>
> Best regards,
>
> Tamas
>
>
>
> 2010/8/5 Zden?k Vr?bl?k <zdenek@vrablik.org>
>>
>> Hi,
>>
>> I have removed external plugins and found that the JNI works when
>> I have removed the lib expat from nmake.opt
>>
>> I was compiling the expat from source I downloaded from
>> http://sourceforge.net/projects/expat/files/
>> I am using version 2.0.1.
>>
>> Have you got any problems compiling and using expat.
>>
>> I was compiling with the visual studio. There is VS project file. I
>> have changed the active configuration to release and platform to x64.
>>
>> Expat dll file is PE 32+, but using this dll prevents loading jni
>> files correctly.
>>
>>
>> Did you have to modify the expat project before building?
>>
>> Thanks.
>>
>> Regards,
>> Zdenek
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
From chaitanya.ch at gmail.com  Fri Aug  6 08:16:49 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Aug  6 08:16:51 2010
Subject: [gdal-dev] Merging shapefile
In-Reply-To: <4C5BAE28.3050905@meeo.it>
References: <4C5BAE28.3050905@meeo.it>
Message-ID: <AANLkTi=_W5yAfWF0vFEz47kshf22GrW9QagQzPaBT8YD@mail.gmail.com>

Giacomo,

If you want to merge a small number of shapefiles into a single shapefile,
look at the example near the bottom of the page
http://www.gdal.org/ogr/drv_shapefile.html

http://gdal.org/ogr2ogr.html

On Fri, Aug 6, 2010 at 12:09 PM, Giacomo Piva <piva@meeo.it> wrote:

> Hi all,
> I need to merge two shapefile, is it possible with GDAL ?
> Thank you
>
> --
> Giacomo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100806/32b81ef8/attachment.html
From ivan.lucena at pmldnet.com  Fri Aug  6 08:23:44 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Aug  6 08:23:47 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gc3BsaXQgbmV0Q0RG?=
Message-ID: <20100806122344.21474.qmail@s466.sureserver.com>

Martin,

If you are running it on Windows you can use "for" (type "help for" on Command Prompt), ex:

C:\Data> for /l %i in (1,1,300) do gdal_translate -b %i input_file output_%i.tif


>  -------Original Message-------
>  From: Matin80 <martin@bier-mail.de>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] split netCDF
>  Sent: Aug 06 '10 05:56
>  
>  
>  Hi everyone,
>  
>  I have a netCDF-file containing over 300??bands.
>  is it possible to split up the file and get the same number of GeoTiffs with
>  GDAL in a single command line? All i found to this topic ended in merging
>  the bands to a single output file...
>  
>  kind regards,
>  Martin
>  
>  
>  --
>  View this message in context: http://osgeo-org.1803224.n2.nabble.com/split-netCDF-tp5380091p5380091.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From wonder.sk at gmail.com  Fri Aug  6 09:04:12 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri Aug  6 09:04:15 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
Message-ID: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>

Hi,

As there have been no further comments on RFC 29, I would like to call
for vote on it:

http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

Regards
Martin
From warmerdam at pobox.com  Fri Aug  6 09:10:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Aug  6 09:11:06 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
Message-ID: <4C5C09CD.5000106@pobox.com>

Martin Dobias wrote:
> Hi,
> 
> As there have been no further comments on RFC 29, I would like to call
> for vote on it:
> 
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

+1 Frank


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From harsh.govind at spadac.com  Fri Aug  6 09:17:13 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Fri Aug  6 09:18:20 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't
	work
In-Reply-To: <AANLkTinppCBzVOFHmzfZYt598JC0Ud56L2vdNnTff-7y@mail.gmail.com>
References: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
	<AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>
	<AANLkTi=JbOVrZhQ7L98obz90pAW8n+j3Vg-SGke+kRwg@mail.gmail.com>
	<AANLkTin7Y23rTK8430RjZAj+NWGk5d5PtRRauFRintVQ@mail.gmail.com>
	<AANLkTimKW3yvF8kr2iZ9sHyTK=tC4EYaHCtEQj8ynxAg@mail.gmail.com>
	<AANLkTinppCBzVOFHmzfZYt598JC0Ud56L2vdNnTff-7y@mail.gmail.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E28181B73C7F6@SPATCEX003.spadac.com>

Looks like your path may have another version of libexpat somewhere probably x86. I usually see these kind of errors when accidentally mix-n-match 32 and 64 bit dlls. Basically a 64 bit native application is trying to instantiate a 32 bit application. 

Regards,
Harsh Govind

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Zdenek Vr?bl?k
Sent: Friday, August 06, 2010 8:15 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work

Hi Tamas,

Thank you for reply.

I compiled with libexpat.lib and used the include directory from
release-1400-x64-dev ?and than I used the dll file from bin directory
libexpat.dll. It doesn't work again. It has compilled correctly, but
the error is same.

I compiled with Xerces from release-1400-x64-dev and the gml was
working fine. The KML didn't work.
I was importing kml, which was possible to read by gdal (with expat,
through jni ) in linux. Than I think the file should be correct.


I have got an error when I try open the libexpat.dll (downloaded from
page you recommanded ) in DependencyWalker ( 64 bit version on win
2003):

Error: The Side-by-Side configuration information for
"n:\zdenek\gdal\compiled2_8_2010\release-1400-x64\bin\LIBEXPAT.DLL"
contains errors. This application has failed to start because the
application configuration is incorrect. Reinstalling the application
may fix this problem (14001).

First I thought it could be because of missing ms visual c++ dlls,
than I copied msvcm80.dll msvcp80.dll and msvcr80.dll into same
directory as libexpat.dll. Dependency walker doesn't report any
missing library, but the error is still there.

Could be the dll file invalid?

Is it possible to compile expat from command line?
Is it possible to use Xerces as xml parsers for kml and gpx? Gml works
fine with Xerces.

Regards,
Zdenek

2010/8/5 Tamas Szekeres <szekerest@gmail.com>:
> Hi,
>
> Switcing to x64 should produce x64 compatible libs and dll with the expat
> solution. You can use de Depends tool to inspect libexpat.dll whether it's
> an x64 or x32 image.
> BTW: If you don't want to make your hands dirty with the compilation just
> download one of the SDK packages from http://vbkto.dyndns.org/sdk containing
> all the required libs headers and dlls provided to compile GDAL.
>
>
> Best regards,
>
> Tamas
>
>
>
> 2010/8/5 Zden?k Vr?bl?k <zdenek@vrablik.org>
>>
>> Hi,
>>
>> I have removed external plugins and found that the JNI works when
>> I have removed the lib expat from nmake.opt
>>
>> I was compiling the expat from source I downloaded from
>> http://sourceforge.net/projects/expat/files/
>> I am using version 2.0.1.
>>
>> Have you got any problems compiling and using expat.
>>
>> I was compiling with the visual studio. There is VS project file. I
>> have changed the active configuration to release and platform to x64.
>>
>> Expat dll file is PE 32+, but using this dll prevents loading jni
>> files correctly.
>>
>>
>> Did you have to modify the expat project before building?
>>
>> Thanks.
>>
>> Regards,
>> Zdenek
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From harsh.govind at spadac.com  Fri Aug  6 09:26:06 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Fri Aug  6 09:26:09 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't
	work
In-Reply-To: <4B3B3C35D34C9345BC8914C199882E28181B73C7F6@SPATCEX003.spadac.com>
References: <AANLkTimK_L2tUXSN8Pf3bEFZTifCXQDNVaN5wRp1XDHh@mail.gmail.com>
	<AANLkTi=g4vH2jYhpLe1zucHhfE_cKZOpPTkkA8G7oZw2@mail.gmail.com>
	<AANLkTi=JbOVrZhQ7L98obz90pAW8n+j3Vg-SGke+kRwg@mail.gmail.com>
	<AANLkTin7Y23rTK8430RjZAj+NWGk5d5PtRRauFRintVQ@mail.gmail.com>
	<AANLkTimKW3yvF8kr2iZ9sHyTK=tC4EYaHCtEQj8ynxAg@mail.gmail.com>
	<AANLkTinppCBzVOFHmzfZYt598JC0Ud56L2vdNnTff-7y@mail.gmail.com>
	<4B3B3C35D34C9345BC8914C199882E28181B73C7F6@SPATCEX003.spadac.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E28181B73C7FC@SPATCEX003.spadac.com>

Also, don?t copy msvc80*.dlls around. You want to update the winSxS by using MS vcredist installer. I think yours is not in sync with Tamas's build machine. 

Regards,
Harsh Govind


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Harsh Govind
Sent: Friday, August 06, 2010 9:17 AM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work

Looks like your path may have another version of libexpat somewhere probably x86. I usually see these kind of errors when accidentally mix-n-match 32 and 64 bit dlls. Basically a 64 bit native application is trying to instantiate a 32 bit application. 

Regards,
Harsh Govind

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Zdenek Vr?bl?k
Sent: Friday, August 06, 2010 8:15 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work

Hi Tamas,

Thank you for reply.

I compiled with libexpat.lib and used the include directory from
release-1400-x64-dev ?and than I used the dll file from bin directory
libexpat.dll. It doesn't work again. It has compilled correctly, but
the error is same.

I compiled with Xerces from release-1400-x64-dev and the gml was
working fine. The KML didn't work.
I was importing kml, which was possible to read by gdal (with expat,
through jni ) in linux. Than I think the file should be correct.


I have got an error when I try open the libexpat.dll (downloaded from
page you recommanded ) in DependencyWalker ( 64 bit version on win
2003):

Error: The Side-by-Side configuration information for
"n:\zdenek\gdal\compiled2_8_2010\release-1400-x64\bin\LIBEXPAT.DLL"
contains errors. This application has failed to start because the
application configuration is incorrect. Reinstalling the application
may fix this problem (14001).

First I thought it could be because of missing ms visual c++ dlls,
than I copied msvcm80.dll msvcp80.dll and msvcr80.dll into same
directory as libexpat.dll. Dependency walker doesn't report any
missing library, but the error is still there.

Could be the dll file invalid?

Is it possible to compile expat from command line?
Is it possible to use Xerces as xml parsers for kml and gpx? Gml works
fine with Xerces.

Regards,
Zdenek

2010/8/5 Tamas Szekeres <szekerest@gmail.com>:
> Hi,
>
> Switcing to x64 should produce x64 compatible libs and dll with the expat
> solution. You can use de Depends tool to inspect libexpat.dll whether it's
> an x64 or x32 image.
> BTW: If you don't want to make your hands dirty with the compilation just
> download one of the SDK packages from http://vbkto.dyndns.org/sdk containing
> all the required libs headers and dlls provided to compile GDAL.
>
>
> Best regards,
>
> Tamas
>
>
>
> 2010/8/5 Zden?k Vr?bl?k <zdenek@vrablik.org>
>>
>> Hi,
>>
>> I have removed external plugins and found that the JNI works when
>> I have removed the lib expat from nmake.opt
>>
>> I was compiling the expat from source I downloaded from
>> http://sourceforge.net/projects/expat/files/
>> I am using version 2.0.1.
>>
>> Have you got any problems compiling and using expat.
>>
>> I was compiling with the visual studio. There is VS project file. I
>> have changed the active configuration to release and platform to x64.
>>
>> Expat dll file is PE 32+, but using this dll prevents loading jni
>> files correctly.
>>
>>
>> Did you have to modify the expat project before building?
>>
>> Thanks.
>>
>> Regards,
>> Zdenek
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From martin at bier-mail.de  Fri Aug  6 09:42:09 2010
From: martin at bier-mail.de (Matin80)
Date: Fri Aug  6 09:42:10 2010
Subject: [gdal-dev] Re: split netCDF
In-Reply-To: <20100806122344.21474.qmail@s466.sureserver.com>
References: <1281092188665-5380091.post@n2.nabble.com>
	<20100806122344.21474.qmail@s466.sureserver.com>
Message-ID: <1281102129286-5380600.post@n2.nabble.com>


this works great, thanks a lot.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/split-netCDF-tp5380091p5380600.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hobu.inc at gmail.com  Fri Aug  6 09:52:35 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Aug  6 09:52:39 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <4C5C09CD.5000106@pobox.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
	<4C5C09CD.5000106@pobox.com>
Message-ID: <F22321FC-9E7A-46E7-B35A-6480EED1EBAD@gmail.com>


On Aug 6, 2010, at 8:10 AM, Frank Warmerdam wrote:

> Martin Dobias wrote:
>> Hi,
>> As there have been no further comments on RFC 29, I would like to call
>> for vote on it:
>> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
> 
> +1 Frank

+0.

I admit to being a bit worried about the extra complication this adds, especially with respect to FIDs and our significantly varying rules across the drivers on them.  Additionally, I think the RFC should add a testable (with TestCapability) capability to allow applications to query whether or not drivers support this feature.

Howard
From zdenek at vrablik.org  Fri Aug  6 09:58:33 2010
From: zdenek at vrablik.org (=?UTF-8?B?WmRlbsSbayBWcsOhYmzDrWs=?=)
Date: Fri Aug  6 09:58:35 2010
Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't 
	work SOLVED
Message-ID: <AANLkTiki9uT5LBCijHWAw2-VZGEXJi1d5vzqx7zo41YC@mail.gmail.com>

Hi Harsh,

thank you very much.

I have found that Oracle database has expat.dll too and the app server
has appended the path with GDAL dll files to existing.
Adding  the path to GDAL dll files to the begining of  PATH variable
did solve the issue!

That explains why it was working in Win7 and from command line. I was
adding everytime GDAL libs to begining ...

Thank you again.

Regards,
Zdenek

On Fri, Aug 6, 2010 at 2:26 PM, Harsh Govind <harsh.govind@spadac.com> wrote:
> Also, don?t copy msvc80*.dlls around. You want to update the winSxS by using MS vcredist installer. I think yours is not in sync with Tamas's build machine.
>
> Regards,
> Harsh Govind
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Harsh Govind
> Sent: Friday, August 06, 2010 9:17 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work
>
> Looks like your path may have another version of libexpat somewhere probably x86. I usually see these kind of errors when accidentally mix-n-match 32 and 64 bit dlls. Basically a 64 bit native application is trying to instantiate a 32 bit application.
>
> Regards,
> Harsh Govind
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Zdenek Vr?bl?k
> Sent: Friday, August 06, 2010 8:15 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Re: GDAL 1.7.2 Windows compilation JAVA JNI doesn't work
>
> Hi Tamas,
>
> Thank you for reply.
>
> I compiled with libexpat.lib and used the include directory from
> release-1400-x64-dev ?and than I used the dll file from bin directory
> libexpat.dll. It doesn't work again. It has compilled correctly, but
> the error is same.
>
> I compiled with Xerces from release-1400-x64-dev and the gml was
> working fine. The KML didn't work.
> I was importing kml, which was possible to read by gdal (with expat,
> through jni ) in linux. Than I think the file should be correct.
>
>
> I have got an error when I try open the libexpat.dll (downloaded from
> page you recommanded ) in DependencyWalker ( 64 bit version on win
> 2003):
>
> Error: The Side-by-Side configuration information for
> "n:\zdenek\gdal\compiled2_8_2010\release-1400-x64\bin\LIBEXPAT.DLL"
> contains errors. This application has failed to start because the
> application configuration is incorrect. Reinstalling the application
> may fix this problem (14001).
>
> First I thought it could be because of missing ms visual c++ dlls,
> than I copied msvcm80.dll msvcp80.dll and msvcr80.dll into same
> directory as libexpat.dll. Dependency walker doesn't report any
> missing library, but the error is still there.
>
> Could be the dll file invalid?
>
> Is it possible to compile expat from command line?
> Is it possible to use Xerces as xml parsers for kml and gpx? Gml works
> fine with Xerces.
>
> Regards,
> Zdenek
>
> 2010/8/5 Tamas Szekeres <szekerest@gmail.com>:
>> Hi,
>>
>> Switcing to x64 should produce x64 compatible libs and dll with the expat
>> solution. You can use de Depends tool to inspect libexpat.dll whether it's
>> an x64 or x32 image.
>> BTW: If you don't want to make your hands dirty with the compilation just
>> download one of the SDK packages from http://vbkto.dyndns.org/sdk containing
>> all the required libs headers and dlls provided to compile GDAL.
>>
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2010/8/5 Zden?k Vr?bl?k <zdenek@vrablik.org>
>>>
>>> Hi,
>>>
>>> I have removed external plugins and found that the JNI works when
>>> I have removed the lib expat from nmake.opt
>>>
>>> I was compiling the expat from source I downloaded from
>>> http://sourceforge.net/projects/expat/files/
>>> I am using version 2.0.1.
>>>
>>> Have you got any problems compiling and using expat.
>>>
>>> I was compiling with the visual studio. There is VS project file. I
>>> have changed the active configuration to release and platform to x64.
>>>
>>> Expat dll file is PE 32+, but using this dll prevents loading jni
>>> files correctly.
>>>
>>>
>>> Did you have to modify the expat project before building?
>>>
>>> Thanks.
>>>
>>> Regards,
>>> Zdenek
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From szekerest at gmail.com  Fri Aug  6 10:48:46 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Aug  6 10:48:48 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
Message-ID: <AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>

+1

I assume that this feature will be utilized in the OGR sql query processor
and not directly in the ogr2ogr application.

Best regards,

Tamas



2010/8/6 Martin Dobias <wonder.sk@gmail.com>

> Hi,
>
> As there have been no further comments on RFC 29, I would like to call
> for vote on it:
>
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>
> Regards
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100806/c4482f13/attachment.html
From dmorissette at mapgears.com  Fri Aug  6 11:21:26 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Aug  6 11:21:29 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
Message-ID: <4C5C2876.6050407@mapgears.com>

Martin Dobias wrote:
> Hi,
> 
> As there have been no further comments on RFC 29, I would like to call
> for vote on it:
> 
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
> 

+0

I understand the need and do not have a better solution to offer
unfortunately. The proposed RFC seems to be the best we could come up
with, but I still wish we could have found a cleaner way to handle this.

-- 
Daniel Morissette
http://www.mapgears.com/
From even.rouault at mines-paris.org  Fri Aug  6 11:21:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug  6 11:21:52 2010
Subject: [gdal-dev] For those tracking SVN trunk : Full clean & rebuild
	necessary after r20189
Message-ID: <201008061721.45322.even.rouault@mines-paris.org>

All in title,

Even
From jasonbeverage at gmail.com  Fri Aug  6 11:34:18 2010
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Fri Aug  6 11:34:50 2010
Subject: [gdal-dev] Speed up MrSid warping
Message-ID: <AANLkTinOEpyM5JgZ6ci-UKDVsNkQBMgAMEKBj3TV8gS8@mail.gmail.com>

Hi all,

I have quite a few MrSid files that are in UTM that I want to mosaic
together into some epsg:4326 tiles.  I've written some python scripts
to produce the appropriate gdal_warp commands to create the tiles, but
they are running extremely slow.

I've read various mailing list posts and blogs about different options
for MrSid like this one:
http://priour.wordpress.com/2007/01/09/massive-performance-improvements-in-converting-mrsid-files/
which highlights using GDAL_FORCE_CACHING = YES to speed up a
gdal_translate when using MrSids.  I've also read about using
GDAL_ONE_BIG_READREAD to speed things up in MapServer.  Which option,
or any other options, would be helpful for gdal_warp?

Also, my MrSids are wrapped in VRTs to provide coordinate system info.
 If I use the VRTs will the GDAL_FORCE_CACHING and GDAL_ONE_BIGREAD
options be used?

Thanks!

Jason
From filippo.coro at alice.it  Fri Aug  6 12:08:56 2010
From: filippo.coro at alice.it (=?iso-8859-15?Q?Filippo_Cor=F2?=)
Date: Fri Aug  6 12:08:55 2010
Subject: [gdal-dev] Problem with GetNoDataValue function 
Message-ID: <op.vg0xs6d9nqr6om@filippo-pc.belkin>


Hi List,

I have a problem with the function GetNoDataValue () of GDAL 1.6.2 ver. I  
use some raster where the nodatavalue is equal to -128 and the pixel depth  
is 8bit. Opening the raster with the following code (with pydev  end  
python 2.6):

# Get the bands and block sizes
primoBand primoDs.GetRasterBand = (1)
noval primoBand.GetNoDataValue = ()

Get noval = 0.0 and not -128 as I expected.
Is there any option I can use to solve the problem?

Thanks in Advance

Greetings
Filippo Cor?


-- 
Creato con il rivoluzionario client e-mail di Opera:  
http://www.opera.com/mail/
From even.rouault at mines-paris.org  Fri Aug  6 12:23:57 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug  6 12:24:05 2010
Subject: [gdal-dev] Problem with GetNoDataValue function
In-Reply-To: <op.vg0xs6d9nqr6om@filippo-pc.belkin>
References: <op.vg0xs6d9nqr6om@filippo-pc.belkin>
Message-ID: <201008061823.57916.even.rouault@mines-paris.org>

Filippo,

What is the format of that raster file ? Can you share a link to the dataset ? 
or the output of gdalinfo at the very least

I'd note that -128 can only be considered a valid value for a 8bit raster if 
the metadata item PIXELTYPE at band level is set to SIGNEDBYTE 
(IMAGE_STRUCTURE metadata domain).

Best regards,

Even

Le vendredi 06 ao?t 2010 18:08:56, Filippo Cor? a ?crit :
> Hi List,
> 
> I have a problem with the function GetNoDataValue () of GDAL 1.6.2 ver. I
> use some raster where the nodatavalue is equal to -128 and the pixel depth
> is 8bit. Opening the raster with the following code (with pydev  end
> python 2.6):
> 
> # Get the bands and block sizes
> primoBand primoDs.GetRasterBand = (1)
> noval primoBand.GetNoDataValue = ()
> 
> Get noval = 0.0 and not -128 as I expected.
> Is there any option I can use to solve the problem?
> 
> Thanks in Advance
> 
> Greetings
> Filippo Cor?
From ragi at burhum.com  Fri Aug  6 12:32:47 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Fri Aug  6 12:32:49 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
Message-ID: <AANLkTinUTSEjG7RES2nvx4Fk0308Qp37=knwVT1CLXe_@mail.gmail.com>

>
> Martin Dobias wrote:
> > Hi,
> >
> > As there have been no further comments on RFC 29, I would like to call
> > for vote on it:
> >
> > http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>

I hesitated whether to reply to this or not. I am aware that I can
(deservingly) get publicly castrated for chiming in now instead of a
couple of weeks ago. In my defense I can tell you I get digests and
then read them when I have free time. Which is usually at the end of
the week. Like right now. Sigh.

Thus, it may be too late already.?I know.

I also realize that I don't have voting power on this, but I still
wanted to gave my opinion because I do care about this library. Very
much actually. Feel free to dismiss this as noise.

There are two elements of this RFC that I think are not ideal.

One is the lack of a TestCapabilities feature so I can decide whether
to use this or not. I saw that other people had expressed their
opinions about it and I assumed it was going to be added. Looking at
the RFC, I don't see that this materialized.

The other, IMHO more importantly, is the issue of specifying **what I
want** (SetDesiredFields) vs specifying **what I don't want**
(SetIgnoredFields). I guess the conversation turned to using
SetIgnoreFields after Frank expressed a preference for
SetIgnoredFields here

http://lists.osgeo.org/pipermail/gdal-dev/2010-July/025487.html

Frank's opinion was: "What if it was determined at some point that
fetching the real FID was sometimes expensive and that in cases where
it does not matter we would like to be able to skip that. Should we
then start dropping the FID for everyone who has ever used
SelectFields() without knowing that some day FID would become
optional? I can live with SelectFields(), but to me it is an approach
at odds with trying to ensure backwards/forwards compatability for
applications."

I humbly disagree that this is a strong enough argument to go the
"ignore fields" approach.

With every single other data abstraction library I ever worked with
(sadly, I have used too many), I usually ask the API *for I what I
want*, and the data abstraction library returns to me that content. In
subsequent versions those APIs, there may be optimizations done here
and there, but the backwards compatibility is retained by continuing
with the same behavior.

If there is some optimization in the future (i.e "FID retrieval is
expensive"), and I want to take advantage of it, then I have to use
the new approach (i.e "not including FID" in my request). If I don't,
my code still works, but I am not taking advantage of the new
optimization, right?

Presumably, if I had asked only for what I needed - and I included
FID, it is because I needed it in the first place, right? If I didn't
need it, I would not have requested it in the first place and I would
get the optimization for free in the future.

Contrast this with the other approach, "explicitly express what you
don't want". I know I only need three fields for my calculation, I
request those. New fields are added. In every subsequent version I can
potentially be getting extra fields that I don't need. So then I need
to go back to my code and exclude newer fields I don't want so I only
get what I need for my calculation. Sounds silly, right? I believe
Martin had it right when he expressed his opinion about this.

Martin has rewritten the RFC to be SetIgnoreFields instead of
SetRequiredFields and I feel like a jackass for providing input so
late. I apologize Martin.

But of course you are all free ignore this as noise as I said earlier.
Then I wouldn't be such a jackass I guess.

my two cents,

- Ragi
From jason.roberts at duke.edu  Fri Aug  6 13:59:22 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Aug  6 13:59:31 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTinUTSEjG7RES2nvx4Fk0308Qp37=knwVT1CLXe_@mail.gmail.com>
References: <AANLkTinUTSEjG7RES2nvx4Fk0308Qp37=knwVT1CLXe_@mail.gmail.com>
Message-ID: <011201cb3591$1a1d02b0$4e570810$@roberts@duke.edu>

Sorry to jump in as another non-voting user of the API, but I second Raji's
opinion. As a user of the API, I would expect to find consistency with other
APIs and the SQL language, which typically require to specify the fields you
want to retrieve, not the ones you want to ignore.

The RFC presents these use cases:

1. the client renders the layer: all fields can be ignored, only the
geometry is required
2. the client shows attribute table: all fields are required, the geometry
can be ignored

While those may be common for certain applications, such as GIS GUIs, I
would say there is a third case that should be considered:

3. The client is doing some geoprocessing that involves a specific subset of
fields, possibly but not always including the geometry. The client wants to
save bandwidth, memory, and CPU by requesting just the fields of interest.

So the question is, is case #2 more common than case #3, to the point that
the API should make case #2 convenient to code at the cost of making case #3
difficult plus deviating from the design most other APIs use? I believe not.

I would also point out that case #1 is not as common as might be expected
either. The very first thing anyone does in a GIS after they display the
points is to color code them by some attribute. This is case #3.

Best regards, and sorry again for jumping into your vote,

Jason 

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ragi Burhum
Sent: Friday, August 06, 2010 12:33 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields

>
> Martin Dobias wrote:
> > Hi,
> >
> > As there have been no further comments on RFC 29, I would like to call
> > for vote on it:
> >
> > http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>

I hesitated whether to reply to this or not. I am aware that I can
(deservingly) get publicly castrated for chiming in now instead of a
couple of weeks ago. In my defense I can tell you I get digests and
then read them when I have free time. Which is usually at the end of
the week. Like right now. Sigh.

Thus, it may be too late already.?I know.

I also realize that I don't have voting power on this, but I still
wanted to gave my opinion because I do care about this library. Very
much actually. Feel free to dismiss this as noise.

There are two elements of this RFC that I think are not ideal.

One is the lack of a TestCapabilities feature so I can decide whether
to use this or not. I saw that other people had expressed their
opinions about it and I assumed it was going to be added. Looking at
the RFC, I don't see that this materialized.

The other, IMHO more importantly, is the issue of specifying **what I
want** (SetDesiredFields) vs specifying **what I don't want**
(SetIgnoredFields). I guess the conversation turned to using
SetIgnoreFields after Frank expressed a preference for
SetIgnoredFields here

http://lists.osgeo.org/pipermail/gdal-dev/2010-July/025487.html

Frank's opinion was: "What if it was determined at some point that
fetching the real FID was sometimes expensive and that in cases where
it does not matter we would like to be able to skip that. Should we
then start dropping the FID for everyone who has ever used
SelectFields() without knowing that some day FID would become
optional? I can live with SelectFields(), but to me it is an approach
at odds with trying to ensure backwards/forwards compatability for
applications."

I humbly disagree that this is a strong enough argument to go the
"ignore fields" approach.

With every single other data abstraction library I ever worked with
(sadly, I have used too many), I usually ask the API *for I what I
want*, and the data abstraction library returns to me that content. In
subsequent versions those APIs, there may be optimizations done here
and there, but the backwards compatibility is retained by continuing
with the same behavior.

If there is some optimization in the future (i.e "FID retrieval is
expensive"), and I want to take advantage of it, then I have to use
the new approach (i.e "not including FID" in my request). If I don't,
my code still works, but I am not taking advantage of the new
optimization, right?

Presumably, if I had asked only for what I needed - and I included
FID, it is because I needed it in the first place, right? If I didn't
need it, I would not have requested it in the first place and I would
get the optimization for free in the future.

Contrast this with the other approach, "explicitly express what you
don't want". I know I only need three fields for my calculation, I
request those. New fields are added. In every subsequent version I can
potentially be getting extra fields that I don't need. So then I need
to go back to my code and exclude newer fields I don't want so I only
get what I need for my calculation. Sounds silly, right? I believe
Martin had it right when he expressed his opinion about this.

Martin has rewritten the RFC to be SetIgnoreFields instead of
SetRequiredFields and I feel like a jackass for providing input so
late. I apologize Martin.

But of course you are all free ignore this as noise as I said earlier.
Then I wouldn't be such a jackass I guess.

my two cents,

- Ragi
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gregcoats at mac.com  Fri Aug  6 17:41:37 2010
From: gregcoats at mac.com (Greg Coats)
Date: Fri Aug  6 17:41:42 2010
Subject: [gdal-dev] Problem with GetNoDataValue function
In-Reply-To: <201008061823.57916.even.rouault@mines-paris.org>
References: <op.vg0xs6d9nqr6om@filippo-pc.belkin>
	<201008061823.57916.even.rouault@mines-paris.org>
Message-ID: <0D13C6A7-D298-4F7D-8267-D867106231C6@mac.com>

I agree that unsigned byte does not support -128. Signed byte does support -127. Signed byte does not could support -128. I note that http://www.gdal.org/gdal_translate.html shows that gdal_translate supports 11 data types Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/CInt16/CInt32/CFloat32/CFloat64, and "Byte" is included, but I think this "Byte" refers to unsigned byte. I do not see any indication that gdal_translate supports signed byte. Greg

On Aug 6, 2010, at 12:23 PM, Even Rouault wrote:

> Filippo,
> 
> What is the format of that raster file ? Can you share a link to the dataset ? 
> or the output of gdalinfo at the very least
> 
> I'd note that -128 can only be considered a valid value for a 8bit raster if 
> the metadata item PIXELTYPE at band level is set to SIGNEDBYTE 
> (IMAGE_STRUCTURE metadata domain).
> 
> Best regards,
> 
> Even
> 
> Le vendredi 06 ao?t 2010 18:08:56, Filippo Cor? a ?crit :
>> Hi List,
>> 
>> I have a problem with the function GetNoDataValue () of GDAL 1.6.2 ver. I
>> use some raster where the nodatavalue is equal to -128 and the pixel depth
>> is 8bit. Opening the raster with the following code (with pydev  end
>> python 2.6):
>> 
>> # Get the bands and block sizes
>> primoBand primoDs.GetRasterBand = (1)
>> noval primoBand.GetNoDataValue = ()
>> 
>> Get noval = 0.0 and not -128 as I expected.
>> Is there any option I can use to solve the problem?
>> 
>> Thanks in Advance
>> 
>> Greetings
>> Filippo Cor?
From even.rouault at mines-paris.org  Fri Aug  6 18:06:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Aug  6 18:06:11 2010
Subject: [gdal-dev] Problem with GetNoDataValue function
In-Reply-To: <0D13C6A7-D298-4F7D-8267-D867106231C6@mac.com>
References: <op.vg0xs6d9nqr6om@filippo-pc.belkin>
	<201008061823.57916.even.rouault@mines-paris.org>
	<0D13C6A7-D298-4F7D-8267-D867106231C6@mac.com>
Message-ID: <201008070006.02938.even.rouault@mines-paris.org>

Le vendredi 06 ao?t 2010 23:41:37, Greg Coats a ?crit :
> I agree that unsigned byte does not support -128. Signed byte does support
> -127. 

Yes

> Signed byte does not could support -128.

No, the validty range of a signed byte is [-128,127]. 

> I note that
> http://www.gdal.org/gdal_translate.html shows that gdal_translate supports
> 11 data types
> Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/CInt16/CInt32/CFloat32/CFlo
> at64, and "Byte" is included, but I think this "Byte" refers to unsigned
> byte. I do not see any indication that gdal_translate supports signed
> byte. 

It's a bit more complex than that...

GDAL can actually deal with signed byte datatype in a limited way. A few 
drivers like GTiff, HFA, EHDR or ERS can return a band of type Byte with 
PIXELTYPE=SIGNEDBYTE  in the IMAGE_STRUCTURE metadata domain. This means that 
the data returned by ReadBlock()/RasterIO() must be interpretated as a signed 
byte instead of the default unsigned byte. See 
http://gdal.org/gdal_datamodel.html.

GTiff and HFA drivers also support a SIGNEDBYTE creation option to mark a 
dataset as being of type signed byte instead of unsigned byte.

I'd note that there have been fixes a few month ago in GDAL statistic 
computations to take into account the SIGNEDBYTE case 
(http://trac.osgeo.org/gdal/ticket/3151 -> fixed after 1.6.2), but there are 
perhaps other areas where it isn't properly taken into account.

> 
> On Aug 6, 2010, at 12:23 PM, Even Rouault wrote:
> > Filippo,
> > 
> > What is the format of that raster file ? Can you share a link to the
> > dataset ? or the output of gdalinfo at the very least
> > 
> > I'd note that -128 can only be considered a valid value for a 8bit raster
> > if the metadata item PIXELTYPE at band level is set to SIGNEDBYTE
> > (IMAGE_STRUCTURE metadata domain).
> > 
> > Best regards,
> > 
> > Even
> > 
> > Le vendredi 06 ao?t 2010 18:08:56, Filippo Cor? a ?crit :
> >> Hi List,
> >> 
> >> I have a problem with the function GetNoDataValue () of GDAL 1.6.2 ver.
> >> I use some raster where the nodatavalue is equal to -128 and the pixel
> >> depth is 8bit. Opening the raster with the following code (with pydev 
> >> end python 2.6):
> >> 
> >> # Get the bands and block sizes
> >> primoBand primoDs.GetRasterBand = (1)
> >> noval primoBand.GetNoDataValue = ()
> >> 
> >> Get noval = 0.0 and not -128 as I expected.
> >> Is there any option I can use to solve the problem?
> >> 
> >> Thanks in Advance
> >> 
> >> Greetings
> >> Filippo Cor?
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From rudivs at gmail.com  Sat Aug  7 07:29:36 2010
From: rudivs at gmail.com (Rudi von Staden)
Date: Sat Aug  7 07:29:46 2010
Subject: [gdal-dev] Help with python gdal.RasterizeLayer
Message-ID: <4C5D43A0.9070608@gmail.com>

Greetings all,

I am trying to create a raster mask using a polygon template. I can 
create the raster datasource to be the right extent, and using the same 
projection, but somehow gdal.RasterizeLayer does not do anything to the 
mask. Am I missing something in the implementation?

Below I've included the output I'm getting (followed by my python 
script). The RasterizeLayer command should be burning the polygon onto 
the single band raster (initialized to have all cells = 255) using a 
value of 0. However, the stats show that nothing has happened, and if I 
check the resulting GTif, all cells are still 255.

Any suggestions welcome.


Thanks,
Rudi

========Polygon Layer========
UL:  24.9371 -33.0525
LR:  27.8373 -33.9152
Spatial Reference:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]

========Mask Raster========
UL:  24.9371 -33.0525
LR:  27.8365142765 -32.1900501578
Spatial Reference:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]
Stats before burn:  [255.0, 255.0, 255.0, 0.0]
Stats after burn:  [255.0, 255.0, 255.0, 0.0]


========[burn_test.py]========
import sys
from osgeo import ogr,osr,gdal
from osgeo.gdalconst import *

points = ([24.937100000000001, -33.837400000000002], [25.2897, 
-33.671399999999998], [26.1754, -33.415300000000002], 
[27.837299999999999, -33.052500000000002], [27.693300000000001, 
-33.151899999999998], [25.475999999999999, -33.915199999999999], 
[25.238299999999999, -33.880899999999997], [24.937100000000001, 
-33.837400000000002])
pixelWidth = 0.000899322046076
pixelHeight = -0.000899322046076

#create polygon
ring = ogr.Geometry(ogr.wkbLinearRing)
for point in points:
     ring.AddPoint(point[0],point[1])
poly = ogr.Geometry(ogr.wkbPolygon)
poly.AddGeometry(ring)

#create memory layer for polygon
srWGS84 = osr.SpatialReference()
srWGS84.ImportFromProj4('+proj=longlat +datum=WGS84')
polyds = ogr.GetDriverByName('Memory').CreateDataSource('')
polylyr = polyds.CreateLayer('poly',geom_type=ogr.wkbPolygon, srs=srWGS84)
feat = ogr.Feature(polylyr.GetLayerDefn())
feat.SetGeometryDirectly(poly)
polylyr.CreateFeature(feat)

#check polygon layer extent
extent = polylyr.GetExtent()
print '========Polygon Layer========'
print 'UL: ', extent[0], extent[3]
print 'LR: ', extent[1], extent[2]
print 'Spatial Reference:\n',polylyr.GetSpatialRef(),"\n"
x = extent[0]
y = extent[3]
xLR = extent[1]
yLR = extent[2]
xSpan = int((xLR-x)/pixelWidth)
ySpan = int((yLR-y)/pixelHeight)


#create mask from polygon
mask = gdal.GetDriverByName('MEM').Create('',xSpan,ySpan,1,GDT_Byte)
transform = [x,pixelWidth,0.0,y,0.0,-pixelHeight]
mask.SetGeoTransform(transform)
mask.SetProjection(srWGS84.ExportToWkt())
projstring = srWGS84.ExportToPrettyWkt()
mask.GetRasterBand(1).Fill(255)

#check mask extent
transform = mask.GetGeoTransform()
xMask = transform[0]          #top left of coverage
yMask = transform[3]          #top left of coverage
maskPixelWidth = transform[1]
maskPixelHeight = transform[5]
print "========Mask Raster========"
print "UL: ", xMask, yMask
print "LR: ", xMask+(xSpan*maskPixelWidth), yMask+(ySpan*maskPixelWidth)
print "Spatial Reference:\n", projstring
print "Stats before burn: ", mask.GetRasterBand(1).GetStatistics(0,1)

#burn polygon onto mask
err = gdal.RasterizeLayer(mask,[1],polylyr,burn_values=[0])
if err != 0:
     print(err)
     gdaltest.post_reason( 'got non-zero result code from RasterizeLayer' )
     sys.exit(1)
print "Stats after burn: ", mask.GetRasterBand(1).GetStatistics(0,1)
gdal.GetDriverByName('GTiff').CreateCopy('mask.tif',mask)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100807/ccb87f8e/attachment-0001.html
From filippo.coro at alice.it  Sat Aug  7 09:12:10 2010
From: filippo.coro at alice.it (=?iso-8859-15?Q?Filippo_Cor=F2?=)
Date: Sat Aug  7 09:12:13 2010
Subject: [gdal-dev] Problem with GetNoDataValue function
Message-ID: <op.vg2jv0y9nqr6om@filippo-pc.belkin>

Even

At the following url:  
http://img529.imageshack.us/img529/5287/metadatatiff.jpg are the results  
gdalinfo, I use raster GeoTIFF file.
If I open the tif with the ArcMap nodatavalue is equal to -128.



Greetings
Filippo Cor?
From warmerdam at pobox.com  Sat Aug  7 09:25:41 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Aug  7 09:25:48 2010
Subject: [gdal-dev] Speed up MrSid warping
In-Reply-To: <AANLkTinOEpyM5JgZ6ci-UKDVsNkQBMgAMEKBj3TV8gS8@mail.gmail.com>
References: <AANLkTinOEpyM5JgZ6ci-UKDVsNkQBMgAMEKBj3TV8gS8@mail.gmail.com>
Message-ID: <AANLkTikKPfCG1EDxfLLftEpKit4ESoecwUsKqYq3JPrw@mail.gmail.com>

On Fri, Aug 6, 2010 at 11:34 AM, Jason Beverage <jasonbeverage@gmail.com> wrote:
> Hi all,
>
> I have quite a few MrSid files that are in UTM that I want to mosaic
> together into some epsg:4326 tiles. ?I've written some python scripts
> to produce the appropriate gdal_warp commands to create the tiles, but
> they are running extremely slow.
>
> I've read various mailing list posts and blogs about different options
> for MrSid like this one:
> http://priour.wordpress.com/2007/01/09/massive-performance-improvements-in-converting-mrsid-files/
> which highlights using GDAL_FORCE_CACHING = YES to speed up a
> gdal_translate when using MrSids. ?I've also read about using
> GDAL_ONE_BIG_READREAD to speed things up in MapServer. ?Which option,
> or any other options, would be helpful for gdal_warp?

Jason,

Generally speaking gdalwarp tries to read in big chunks, and it would be
beneficial to enable GDAL_ONE_BIG_READ to on and avoid caching.
Caching is more beneficial when doing lots of little reads.

> Also, my MrSids are wrapped in VRTs to provide coordinate system info.
> ?If I use the VRTs will the GDAL_FORCE_CACHING and GDAL_ONE_BIGREAD
> options be used?

When access is done through a VRT it forces access
at a smaller chunk size which can be at least somewhat
painful for formats like mrsid for which each read is quite
expensive.  You might want to consider ways of associating
the coordinate system without using the VRT.  Note that
gdalwarp does have a -s_srs switch to set the source
coordinate system if it is missing or wrong on the source
file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From rudivs at gmail.com  Sat Aug  7 09:36:46 2010
From: rudivs at gmail.com (Rudi von Staden)
Date: Sat Aug  7 09:36:55 2010
Subject: [gdal-dev] Help with python gdal.RasterizeLayer
In-Reply-To: <4C5D43A0.9070608@gmail.com>
References: <4C5D43A0.9070608@gmail.com>
Message-ID: <4C5D616E.3070908@gmail.com>

On 07/08/2010 13:29, Rudi von Staden wrote:
> Below I've included the output I'm getting (followed by my python 
> script). The RasterizeLayer command should be burning the polygon onto 
> the single band raster (initialized to have all cells = 255) using a 
> value of 0. However, the stats show that nothing has happened, and if 
> I check the resulting GTif, all cells are still 255.

Apologies. It seems I was a little hasty in checking my own output, and 
I had some issues with the extents being different. It is working now, 
but the statistics are not reported correctly ([255.0, 255.0, 255.0, 
0.0] before and after). Do I have to set them manually, or is there some 
way to recalculate them?

Rudi
From chaitanya.ch at gmail.com  Sat Aug  7 10:23:01 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug  7 10:23:03 2010
Subject: [gdal-dev] Help with python gdal.RasterizeLayer
In-Reply-To: <4C5D616E.3070908@gmail.com>
References: <4C5D43A0.9070608@gmail.com>
	<4C5D616E.3070908@gmail.com>
Message-ID: <AANLkTik+8JHiCCZYmtSqFiHtspq7+E_sePPf9VgKFFj3@mail.gmail.com>

GDALRasterBand::ComputeStatistics() recalculates them.

On Sat, Aug 7, 2010 at 7:06 PM, Rudi von Staden <rudivs@gmail.com> wrote:

> On 07/08/2010 13:29, Rudi von Staden wrote:
>
>> Below I've included the output I'm getting (followed by my python script).
>> The RasterizeLayer command should be burning the polygon onto the single
>> band raster (initialized to have all cells = 255) using a value of 0.
>> However, the stats show that nothing has happened, and if I check the
>> resulting GTif, all cells are still 255.
>>
>
> Apologies. It seems I was a little hasty in checking my own output, and I
> had some issues with the extents being different. It is working now, but the
> statistics are not reported correctly ([255.0, 255.0, 255.0, 0.0] before and
> after). Do I have to set them manually, or is there some way to recalculate
> them?
>
> Rudi
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100807/0387ebc4/attachment.html
From warmerdam at pobox.com  Sat Aug  7 10:33:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Aug  7 10:33:37 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
	<AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>
Message-ID: <AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>

On Fri, Aug 6, 2010 at 10:48 AM, Tamas Szekeres <szekerest@gmail.com> wrote:
> +1
>
> I assume that this feature will be utilized in the OGR sql query processor
> and not directly in the ogr2ogr application.

Tamas,

ogr2ogr has a -select switch to identify desired fields
to be copied to the output.  I imagine ogr2ogr could
benefit from ignoring all the undesired attributes using
this new api.

Currently there is no logic in the OGR SQL engine to
ignore fields not needed in the result but I can see that
adding this would be desirable.  It would require some
work to walk all the expression trees (for the WHERE
and each of the column expressions) to identify the
fields that are used in the primary and joined tables.  I
would potentially be willing to implement this optimization.

Re: the TestCapability(), I'd like to see this added too.
I think this could be done without restarting the RFC
process.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From szekerest at gmail.com  Sat Aug  7 11:08:39 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Aug  7 11:08:41 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
	<AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>
	<AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
Message-ID: <AANLkTikUwCm1t=n2i2cGg3n7MH4AnkhN5_tFxZgWoYr2@mail.gmail.com>

2010/8/7 Frank Warmerdam <warmerdam@pobox.com>

>
> ogr2ogr has a -select switch to identify desired fields
> to be copied to the output.  I imagine ogr2ogr could
> benefit from ignoring all the undesired attributes using
> this new api.
>


Frank,

There are some other tools like ogrinfo, gdal_grid also support the sql
option. I mean it would be desirable to provide unique implementation for
each.


>
> Currently there is no logic in the OGR SQL engine to
> ignore fields not needed in the result but I can see that
> adding this would be desirable.  It would require some
> work to walk all the expression trees (for the WHERE
> and each of the column expressions) to identify the
> fields that are used in the primary and joined tables.  I
> would potentially be willing to implement this optimization.
>
>

In this case I would support to postpone the implementation in ogr2ogr to
avoid parallel approaches to coexist in ogr2ogr and the common code.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100807/a593bc48/attachment.html
From woklist at kyngchaos.com  Sat Aug  7 11:20:57 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Aug  7 11:21:02 2010
Subject: [gdal-dev] Python Bindings
In-Reply-To: <E0F4E675-D80B-4C2A-8502-A8987C0A74A3@gmail.com>
References: <E0F4E675-D80B-4C2A-8502-A8987C0A74A3@gmail.com>
Message-ID: <006BA9C0-E031-4EE0-9DB3-B3C39B16212D@kyngchaos.com>

I couldn't think of anything at first, but now I wonder if it's an arch problem.  Usually errors say if there is a missing architecture in the binaries.

On OS X Snow Leopard python normally runs 64bit, unless you have one of the first Intel Macs with Core solo/duo processors.  You are compiling GDAL 32bit.  And without some other env settings Python compiles modules 32+64bit, but you won't see compile errors due to the way it compiles.

Try removing the arch flags so it compiles 64bit.  Heck, no need to explicitly set CC, CXX, ... at all.

On Jul 26, 2010, at 5:35 PM, Jeff Hamann wrote:

> I've built GDAL/OGR (1.7.2) with the following ./configure options 
> 
> $ ./configure \
> CC="gcc -arch i386" \
> CXX="g++ -arch i386" \
> OBJC="gcc -arch i386" \
> F77="gfortran -arch i386" \
> FC="gfortran -arch i386" \
>  --with-pg=/usr/local/pgsql/bin/pg_config \
>  --without-macosx-framework \
>  --without-sqlite3 \
>  --with-python
> 
> Even though I run on a mac, I really don't want to build with the framework. 
> 
> When I attempt to run a simple Python script:
> 
> #! /usr/bin/env python
> from osgeo import gdal
> 
> I get the following:
> 
> Jeff-Hamanns-MacBook-Pro:scripts hamannj$ python pytest.py 
> Traceback (most recent call last):
>  File "pytest.py", line 2, in <module>
>    from osgeo import gdal
>  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", line 21, in <module>
>    _gdal = swig_import_helper()
>  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", line 17, in swig_import_helper
>    _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: dlopen(/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so, 2): Symbol not found: _CPLDefaultErrorHandler
>  Referenced from: /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>  Expected in: flat namespace
> in /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
> Jeff-Hamanns-MacBook-Pro:scripts hamannj$ 
> 
> I know *nothing* about python. 
> 
> There are a bunch of these statements:
> 
> from osgeo import gdal
> from osgeo import osr
> import osgeo.gdalconst as gdalc
> from optparse import OptionParser, OptionGroup
> import binascii
> import glob
> import math
> import numpy
> import os
> import sys
> 
> in the gdal2wktraster.py file that I eventually want to run, but I don't know enough about python to diagnose, debug, and correct these problems. 
> 
> Is this a python binding problem with gdal/ogr? 
> 
> When I ./configured gdal/ogr: I got the following results:
> 
> GDAL is now configured for i386-apple-darwin10.4.0
> 
>  Installation directory:    /usr/local
>  C compiler:                gcc -arch i386  -g -O2
>  C++ compiler:              g++ -arch i386  -g -O2
> 
>  LIBTOOL support:           yes
> 
>  LIBZ support:              external
>  GRASS support:             no
>  CFITSIO support:           no
>  PCRaster support:          internal
>  NetCDF support:            yes
>  LIBPNG support:            internal
>  LIBTIFF support:           internal (BigTIFF=yes)
>  LIBGEOTIFF support:        internal
>  LIBJPEG support:           internal
>  8/12 bit JPEG TIFF:        yes
>  LIBGIF support:            internal
>  OGDI support:              no
>  HDF4 support:              no
>  HDF5 support:              no
>  Kakadu support:            no
>  JasPer support:            no
>  ECW support:               no
>  MrSID support:             no
>  MSG support:               no
>  GRIB support:              yes
>  EPSILON support:           no
>  cURL support (wms/wcs/...):yes
>  PostgreSQL support:        yes
>  MySQL support:             no
>  Ingres support:            no
>  Xerces-C support:          no
>  NAS support:               no
>  Expat support:             yes
>  ODBC support:              no
>  PGeo support:              no
>  PCIDSK support:            internal
>  OCI support:               no
>  GEORASTER support:         no
>  SDE support:               no
>  DODS support:              no
>  SQLite support:            no
>  SpatiaLite support:        no
>  DWGdirect support          no
>  INFORMIX DataBlade support:no
>  GEOS support:              yes
>  VFK support:               yes
> 
>  Mac OS X Framework :       no
> 
>  SWIG Bindings:          python 
> 
>  Statically link PROJ.4:    no
>  enable OGR building:       yes
>  enable pthread support:    no
>  hide internal symbols:     no
> 
> Jeff-Hamanns-MacBook-Pro:gdal-1.7.2 hamannj$ 
> 
> 
> 
> Jeff Hamann
> jeff.d.hamann@gmail.com
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From DCarreira at edia.pt  Sat Aug  7 13:25:36 2010
From: DCarreira at edia.pt (Duarte Carreira)
Date: Sat Aug  7 13:32:35 2010
Subject: [gdal-dev] external overviews format
Message-ID: <58C383B0A191E747BE79503F3EEA22BF5E85F06207@beja012.edia.pt>

What is the format of external overviews? Is the .ovr file in the same format as the original image? Or is it TIFF format, unless you choose Imagine format?

I'm supposing that internal overviews are in the same format as the original image?

Thanks,
Duarte
From chaitanya.ch at gmail.com  Sat Aug  7 14:04:19 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug  7 14:04:24 2010
Subject: [gdal-dev] external overviews format
In-Reply-To: <58C383B0A191E747BE79503F3EEA22BF5E85F06207@beja012.edia.pt>
References: <58C383B0A191E747BE79503F3EEA22BF5E85F06207@beja012.edia.pt>
Message-ID: <AANLkTimJjYYRQnt9L-=dajoa8k=W05OY+BbVZHb5FtYw@mail.gmail.com>

Duarte,

The gdaladdo utility doc page at http://www.gdal.org/gdaladdo.html has the
info on it.

On Sat, Aug 7, 2010 at 10:55 PM, Duarte Carreira <DCarreira@edia.pt> wrote:

> What is the format of external overviews? Is the .ovr file in the same
> format as the original image? Or is it TIFF format, unless you choose
> Imagine format?
>
> I'm supposing that internal overviews are in the same format as the
> original image?
>
> Thanks,
> Duarte
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100807/831cfa39/attachment.html
From DCarreira at edia.pt  Sat Aug  7 14:14:17 2010
From: DCarreira at edia.pt (dncarreira)
Date: Sat Aug  7 14:14:19 2010
Subject: [gdal-dev] Re: external overviews format
In-Reply-To: <AANLkTimJjYYRQnt9L-=dajoa8k=W05OY+BbVZHb5FtYw@mail.gmail.com>
References: <58C383B0A191E747BE79503F3EEA22BF5E85F06207@beja012.edia.pt>
	<AANLkTimJjYYRQnt9L-=dajoa8k=W05OY+BbVZHb5FtYw@mail.gmail.com>
Message-ID: <1281204857699-5384120.post@n2.nabble.com>


Well, this is embarassing...

Ok, external ovr is a GTiff file, no matter the format of the original.

"(...)file with the extension .ovr that is actually in TIFF format."

Thanks.



-----
Duarte
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-external-overviews-format-tp5384029p5384120.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Aug  8 13:22:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Aug  8 13:22:12 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
Message-ID: <201008081922.02567.even.rouault@mines-paris.org>

+ 0

I'm not sure which approach DesiredFields vs IgnoredFields is the best one. 
Both have their pros and cons. IgnoredFields will be a bit awkward to use, but 
the main argument for this approach (avoid dropping any special fields) makes 
sense.

I also think that a layer capability can be useful to know which driver makes 
use of it.

For Tamas : About the -select option of ogr2ogr, I'd note that, paradoxically 
ogr2ogr does not use currently the SQL engine to implement this. The list of 
fields is just used to create the layout of the target layer definition and 
build the map between source and target field indices to be used by 
OGRFeature::SetFrom(). At first thought, I have imagined it could generate a 
"SELECT field1, field2, ... FROM layer_name" SQL expression instead and fallback 
to the -sql case. But for server based drivers (postgresql or mysql for 
example), this wouldn't fetch the geometry field...

Best regards,

Even

Le vendredi 06 ao?t 2010 15:04:12, Martin Dobias a ?crit :
> Hi,
> 
> As there have been no further comments on RFC 29, I would like to call
> for vote on it:
> 
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
> 
> Regards
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ahmettemiz88 at gmail.com  Sun Aug  8 14:37:38 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sun Aug  8 14:37:41 2010
Subject: [gdal-dev] wrong in LINESTRING
Message-ID: <AANLkTi=h=RvLFM=vnD3xiOJ-L2iCQw00N9SnGwX2g65u@mail.gmail.com>

hello

I was wondering what I did wrong in the following code ?

               Geometry line2=new Geometry(1,"LINESTRING((33.0 41.0 0,33.5
42.5 0, 33.9 41.9 0,33.0 41.0 0))", null, null);
               Feature feature = new Feature(layerDefinition);
               feature.SetFID(0);
               feature.SetGeometry(line2);
               layer.CreateFeature(feature);

regards
From even.rouault at mines-paris.org  Sun Aug  8 14:47:30 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Aug  8 14:47:40 2010
Subject: [gdal-dev] wrong in LINESTRING
In-Reply-To: <AANLkTi=h=RvLFM=vnD3xiOJ-L2iCQw00N9SnGwX2g65u@mail.gmail.com>
References: <AANLkTi=h=RvLFM=vnD3xiOJ-L2iCQw00N9SnGwX2g65u@mail.gmail.com>
Message-ID: <201008082047.30967.even.rouault@mines-paris.org>

2 errors :
1) The WKT is incorrect. You don't need 2 open & closing parenthesis for a 
LINESTRING. Just one is enough : "LINESTRING(33.0 41.0 0,33.5 42.5 0, 33.9 
41.9 0,33.0 41.0 0)"

2) Provided you use GDAL >= 1.7.0, you shouldn't use the Geometry(int 
eGeometryType, String wkt, byte[] wkb, String gml) constructor, which is 
really awkward to use and was kept only for backward compatibility. If you 
want to construct a geometry from a WKT string, you should pass 0 as the first 
argument, otherwise the geometry type will be used to create in your case a 
POINT EMPTY geometry. Use Geometry.CreateFromWkt() instead.
From chaitanya.ch at gmail.com  Sun Aug  8 16:17:32 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Aug  8 16:17:34 2010
Subject: [gdal-dev] Maintenance report for Jun 17, 2010 to Aug 07, 2010
Message-ID: <AANLkTik2ya9D3Uy3PTymEo=EyEUZcmdKiWMSDhbDmU3d@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
GDAL Maintenance Reports by Chaitanya kumar CH.

Duration: Jun 17, 2010 to Aug 07, 2010

#3630: Added some corrections, changes and a test for xlink support in GML driver.

#2852: Added a test.

#3364: Fixed a typo that was making the comparision of coordinate systems to fail sometimes.

#2798: Prepared a test for index management in shapefile driver.

#3045: Fixed a memory leak.

#3694: Made the mif driver more lenient with the mif file formatting.


--
Chaitanya kumar CH
chaitanyach@gmail.com
From jluis at ualg.pt  Sun Aug  8 20:06:49 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Aug  8 20:31:05 2010
Subject: [gdal-dev] vsizip & vsigzip on Win
Message-ID: <4C5F4699.3020400@ualg.pt>

Hi,

I'm trying to access ziped files on Windows using the /vsizip but it 
fails most of times

According to docs, this should work no?

gdalinfo c:/vsizip/m_gmt_so/tmp/N37W008.hgt.zip/N37W008.hgt

but it doesn't. I get
ERROR 4: `c:/vsizip/m_gmt_so/tmp/N37W008.hgt.zip/N37W008.hgt' does not 
exist in the file system,
and is not recognised as a supported dataset name.

However, I'm able to make it work by using the unix pathname syntax

gdalinfo /vsizip/m_gmt_so/tmp/N37W008.hgt.zip/N37W008.hgt

but even this only works when I run the command from the root dir, that 
is from C:\
If run it from any another location I get the same error message.

Joaquim Luis
From jluis at ualg.pt  Sun Aug  8 20:40:15 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Aug  8 20:40:31 2010
Subject: [gdal-dev] vsizip & vsigzip on Win
In-Reply-To: <4C5F4699.3020400@ualg.pt>
References: <4C5F4699.3020400@ualg.pt>
Message-ID: <4C5F4E6F.4000508@ualg.pt>

Sorry for the noise. I found that the correct syntax is

gdalinfo /vsizip/c:\m_gmt_so\tmp\N37W008.hgt.zip\N37W008.hgt

and like that it works fine.

Joaquim

> Hi,
>
> I'm trying to access ziped files on Windows using the /vsizip but it 
> fails most of times
>
> According to docs, this should work no?
>
> gdalinfo c:/vsizip/m_gmt_so/tmp/N37W008.hgt.zip/N37W008.hgt
>
> but it doesn't. I get
> ERROR 4: `c:/vsizip/m_gmt_so/tmp/N37W008.hgt.zip/N37W008.hgt' does not 
> exist in the file system,
> and is not recognised as a supported dataset name.
>
> However, I'm able to make it work by using the unix pathname syntax
>
> gdalinfo /vsizip/m_gmt_so/tmp/N37W008.hgt.zip/N37W008.hgt
>
> but even this only works when I run the command from the root dir, 
> that is from C:\
> If run it from any another location I get the same error message.
>
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From Ole.Nielsen at aifdr.org  Sun Aug  8 22:40:33 2010
From: Ole.Nielsen at aifdr.org (Ole Nielsen)
Date: Sun Aug  8 22:40:35 2010
Subject: [gdal-dev] Re: How to retain double precision in GDAL?
In-Reply-To: <201008061008.30686.even.rouault@mines-paris.org>
References: <01744CEB055A2D46A1C0E02E68F90DCB02172C951203@Exchange.aifdr.org>
	<201008061008.30686.even.rouault@mines-paris.org>
Message-ID: <1281321633165-5387617.post@n2.nabble.com>


Thanks for fixing the precision loss so quickly.

"you now can set the configuration option AAIGRID_DATATYPE to Float64 to
force Float64 being used to avoid the loss of precision."

I am not exactly sure whether this option relates to the gdal_translate
command line utility or the Python binding (ReadAsArray) - or both.

Could you perhaps post the updated script that produced the double precision
values correctly?

Thanks
Ole Nielsen

   


-----
Ole Nielsen
Australia - Indonesia Facility for Disaster Reduction
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-How-to-retain-double-precision-in-GDAL-tp5379507p5387617.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Sun Aug  8 23:44:28 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Aug  8 23:44:37 2010
Subject: [gdal-dev] Re: How to retain double precision in GDAL?
In-Reply-To: <1281321633165-5387617.post@n2.nabble.com>
References: <01744CEB055A2D46A1C0E02E68F90DCB02172C951203@Exchange.aifdr.org>
	<201008061008.30686.even.rouault@mines-paris.org>
	<1281321633165-5387617.post@n2.nabble.com>
Message-ID: <AANLkTimv7Tx0nnzO5JE0PvfZ07v3HxDzQ77gw_D8C3VF@mail.gmail.com>

Ole,

This option is for the AAIGRID driver. So this option is valid any time the
format is handled.

In a python script you set the option you need to set this option during the
call to gdal.Open() to set a specific datatype.
Refer to
http://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/aaigrid.py#L245and
http://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/aaigrid.py#L247 .
Remember to set it to 'None'.

To set this option for gdal/ogr utilities use the option "--config" as
described in http://www.gdal.org/gdal_utilities.html.

Use the CPLSetConfigOption() function in C/C++ code.

On Mon, Aug 9, 2010 at 8:10 AM, Ole Nielsen <Ole.Nielsen@aifdr.org> wrote:

>
> Thanks for fixing the precision loss so quickly.
>
> "you now can set the configuration option AAIGRID_DATATYPE to Float64 to
> force Float64 being used to avoid the loss of precision."
>
> I am not exactly sure whether this option relates to the gdal_translate
> command line utility or the Python binding (ReadAsArray) - or both.
>
> Could you perhaps post the updated script that produced the double
> precision
> values correctly?
>
> Thanks
> Ole Nielsen
>
>
>
>
> -----
> Ole Nielsen
> Australia - Indonesia Facility for Disaster Reduction
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-How-to-retain-double-precision-in-GDAL-tp5379507p5387617.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100809/59c0978a/attachment.html
From P.Halls at york.ac.uk  Mon Aug  9 02:19:40 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Mon Aug  9 02:19:50 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>	<AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>
	<AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
Message-ID: <4C5F9DFC.6000601@york.ac.uk>

Frank,

Frank Warmerdam wrote:
> On Fri, Aug 6, 2010 at 10:48 AM, Tamas Szekeres <szekerest@gmail.com> wrote:
>> +1
>>
>> I assume that this feature will be utilized in the OGR sql query processor
>> and not directly in the ogr2ogr application.
> 
> Tamas,
> 
> ogr2ogr has a -select switch to identify desired fields
> to be copied to the output.  I imagine ogr2ogr could
> benefit from ignoring all the undesired attributes using
> this new api.
> 
> Currently there is no logic in the OGR SQL engine to
> ignore fields not needed in the result but I can see that
> adding this would be desirable.  It would require some
> work to walk all the expression trees (for the WHERE
> and each of the column expressions) to identify the
> fields that are used in the primary and joined tables.  I
> would potentially be willing to implement this optimization.

Please correct me if I am wrong, but is not the OGR SQL engine correct at 
present, ie conformant to the SQL standard, whilst this proposal would render 
OGR SQL non-conformant?

For example,

SELECT * FROM tablename WHERE condition

is the most common case and is the form currently delivered by OGR;

however,

SELECT column2,column3,column7,columnn FROM tablename WHERE condition

must be the second most common.  SQL provides for the specification of columns 
to return (* / all or a list) but does not, so far as I am aware, provide a 
construct by which one can specify columns to be omitted from the results 
(which, I suppose, would equate to * EXCEPT FOR).

Surely the goal is compliance with the standards?

Best wishes,

Peter

> 
> Re: the TestCapability(), I'd like to see this added too.
> I think this could be done without restarting the RFC
> process.
> 
> Best regards,

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From wonder.sk at gmail.com  Mon Aug  9 07:35:44 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Aug  9 07:35:46 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
	<AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>
	<AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
Message-ID: <AANLkTi=8_wMKZfTTqqRvkrU=1JYCvRtx_PAMy7tU9KbP@mail.gmail.com>

On Sat, Aug 7, 2010 at 4:33 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Re: the TestCapability(), I'd like to see this added too.
> I think this could be done without restarting the RFC
> process.

I've done minor edits to the RFC, stating:

The drivers supporting this method will return TRUE to OLCIgnoreFields
("IgnoreFields") capability.


@Ragi, Jason: I understand your concerns, but since there are pros and
cons for both "desired" and "ignored" fields, the discussion which one
is better can be endless. I'd like keep to keep the RFC as it is.

I'll proceed with updating the original patch to comply with the final
RFC specification and create a ticket in Trac soon.

Regards
Martin
From warmerdam at pobox.com  Mon Aug  9 09:32:14 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug  9 09:32:17 2010
Subject: [gdal-dev] Motion: Adopt RFC 29: OGR Set Ignored Fields
In-Reply-To: <4C5F9DFC.6000601@york.ac.uk>
References: <AANLkTikMJcqQMqOqWLcanmMUFZmG8oEVwqhTMBt9N-t8@mail.gmail.com>
	<AANLkTik_knwe+xTOGk25f4MOumv4w7R6jT1LBTBbaqbV@mail.gmail.com>
	<AANLkTikkGx0ff2YaUmVhmes9FAmm+_iVGs=jiJMAgKG=@mail.gmail.com>
	<4C5F9DFC.6000601@york.ac.uk>
Message-ID: <AANLkTiki99JahTXEMzdt5xGSNfc4tkQc2r51qjjDZhkM@mail.gmail.com>

On Mon, Aug 9, 2010 at 2:19 AM, Peter J Halls <P.Halls@york.ac.uk> wrote:
> Please correct me if I am wrong, but is not the OGR SQL engine correct at
> present, ie conformant to the SQL standard, whilst this proposal would
> render OGR SQL non-conformant?
>
> For example,
>
> SELECT * FROM tablename WHERE condition
>
> is the most common case and is the form currently delivered by OGR;
>
> however,
>
> SELECT column2,column3,column7,columnn FROM tablename WHERE condition
>
> must be the second most common. ?SQL provides for the specification of
> columns to return (* / all or a list) but does not, so far as I am aware,
> provide a construct by which one can specify columns to be omitted from the
> results (which, I suppose, would equate to * EXCEPT FOR).
>
> Surely the goal is compliance with the standards?

Peter,

RDBMS based providers will construct the list of
columns to select by scanining through the  OGR
field definitions, and including all those not marked
as excluded in the select statement.  The fact that
the high level API function excludes fields rather than
including them has no effect at the lower levels.  It
is just a way of ensuring that things are not excluded
by accident.

I see no problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From bfraser at geoanalytic.com  Mon Aug  9 10:24:33 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Aug  9 10:24:37 2010
Subject: [gdal-dev] Raster Strategies Examples
In-Reply-To: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>
References: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>
Message-ID: <4C600FA1.9020708@geoanalytic.com>

The steps you've listed below are correct for maximizing performance when 
viewing the raster at (or around) the native resolution of the data.  However, 
as you've found out, the performance can still be poor when trying to view the 
entire dataset.

The basic rule is that your application (mapserver?) should not have to open 
more than 4 to 8 raster files to render the view.  With that in mind (and since 
disk space is not a problem), create "layers" of the raster dataset at different 
scales, say a factor of 2, until you have only one image.

For example, if the resolution of your original data is 1 meter per pixel, your 
layers would look like the following.  Note the first eight layers are handled 
by the internal overviews you created with gdaladdo.

Pixel   Map Scale:
Size:   1:n
-----   ------
1 m     4,000
2       8,000
4       16,000
8       32k
16      64
32      128
64      250
128     500

Additional External Layers
256	1m
512	2m
1024	4m
2048	8m
4096	16m

To create the additional external layers, use GDAL's gdalbuiltvrt to create a 
VRT file of the original dataset.  You can then use gdal_retile.py or Maptiler 
to build the layers.

Best Regards,
Brent Fraser

Edi KARADUMI wrote:
> I have read many strategies for raster performance, but i still have 
> problems with my case. The posts that i have read explain the strategie, 
> but are not very detailed. Im new to mapserver so i have problems 
> implementing them. My case is: 
> 
> -about 6000 tiles that form the map 
> -170mb each tile 
> -aproximately 1.2T of iamges 
> -i have 10T HD and i think disk space is not a problem for me 
> -tile format is TIF 
> -tile size 9375x6250 pixels 
> 
> The strategy i have implemented and the problems i have 
> 
> -First i divided the tiles in 60 folders, to increase the performance in 
> disk seek/read. 
> 
> -Than i transformed source files into internally tiles with the command 
>    gdal_translate -of GTiff -co "TILED=YES" original.tif tiled.tif 
> 
> -i used gdaladdo to add internal pyramids 
> 
>    gdaladdo -r average 2 4 8 16 32 64 128 
> 
> -Created a tileindex using 
>    gdaltindex -write_absolute_path MapAll.shp 
> //server/Maps/Subfolder1/*.tif 
> 
> -Created a spatial index .qix file 
>    shptree MapAll.shp 
> 
> -than added the layer to the mapfile without the .shp extension so the 
> application can use the .qix 
> 
> as you may know, i have very slow performance when i zoom out and im 
> stucked here. As i have read i should make a copy of the tiles with 
> reduced resolution. Merge the tiles together and use min/max scale to 
> show different layers in different scales. the min/max scales i zoom 
> in/out are 100/1200000. Now my questions are 
> 
> - How can i calculate the scale where i should create another layer of 
> the tiles, or i shoud see it with some tests? 
> 
> - how much should be the resolution of the new layer? 
> 
> - is there any tools or program to merge the tiles? merging 6000 tiles 
> with the gdalwarp by writing the command by myself is frustrating 
> 
> - how many tiles should i merge together to create the new layer? (how 
> many tiles should have the new layer) i know that in each zoomscale its 
> better to appear only one tile but i dont know how to calculate it 
> 
> - the tiles that i should merge are the originals or those with internal 
> tiling and overviews? 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hiebert at uvic.ca  Mon Aug  9 18:21:51 2010
From: hiebert at uvic.ca (James Hiebert)
Date: Mon Aug  9 18:28:42 2010
Subject: [gdal-dev] How does GDAL's NetCDF driver determine the spatial
 reference system
Message-ID: <20100809222148.GC7409@basalt.uvic.ca>

Hi All,

I'm trying to use GDAL (version 1.7.2 on Gentoo built with hdf5 and netcdf
support) to read NetCDF files, but I'm a little unclear on how the NetCDF
driver attempts to determine the georeferencing.

The driver page here:
http://www.gdal.org/frmt_netcdf.html
states that it will attempt to read the metadata "spatial_ref" for a Well
Know Text definition of the spatial reference (I assume that it means that
it will try to use a global attribute of the NetCDF file named spatial_ref).

Since this would be convenient for my application, I attempted to use GDAL
this way without success.

+ I added a global attribute named "spatial_ref" with the WKT definition of
the spatial reference system.
+ gdalinfo on the file still reports "Coordinate System is `'"
+ opening the file with the python bindings and calling dst.GetProjection()
  returns a blank string (i.e. no projection information)

The full listings of my spatial reference definition, the output of ncdump
and gdalinfo and the output from the python session are listed below.  Can
anyone tell me whether I'm doing something wrong, or should I not count on
georeferencing being supported by the NetCDF driver?

~James

james@basalt ~ $ ncatted -a spatial_ref,global,a,c,'PROJCS["unnamed",GEOGCS["Normal Sphere
(r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]'
narccap_ecpc-20c3m-tasmin-ncep.nc narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc


james@basalt ~ $ ncdump -h narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
netcdf narccap_ecpc-20c3m-tasmin-ncep-with-srs {
dimensions:
	xc = 123 ;
	yc = 104 ;
	time = UNLIMITED ; // (9496 currently)
	bnds = 2 ;
variables:
	char polar_stereographic ;
		polar_stereographic:grid_mapping_name =
"polar_stereographic" ;
		polar_stereographic:longitude_of_central_meridian = 263. ;
		polar_stereographic:straight_vertical_longitude_from_pole =
263. ;
		polar_stereographic:standard_parallel = 60. ;
		polar_stereographic:TrueGridLength_Latitude = 60. ;
		polar_stereographic:XGridLength_M = 50000. ;
		polar_stereographic:YGridLength_M = 50000. ;
		polar_stereographic:PoleOnPlane = "north" ;
		polar_stereographic:false_easting = 3925000. ;
		polar_stereographic:false_northing = 8325000. ;
		polar_stereographic:latitude_of_projection_origin = 90. ;
	double yc(yc) ;
		yc:long_name = "y-coordinate of Cartesian system" ;
		yc:standard_name = "projection_y_coordinate" ;
		yc:axis = "Y" ;
		yc:units = "m" ;
	double xc(xc) ;
		xc:long_name = "x-coordinate of Cartesian system" ;
		xc:standard_name = "projection_x_coordinate" ;
		xc:axis = "X" ;
		xc:units = "m" ;
	double lon(yc, xc) ;
		lon:units = "degrees_east" ;
		lon:long_name = "longitude" ;
		lon:standard_name = "longitude" ;
		lon:axis = "X" ;
		lon:NX_NumPntsOnParallel = 123 ;
		lon:NY_NumPntsOnMeridian = 104 ;
		lon:actual_range = 211.5412f, 316.2759f ;
		lon:XGridLength_M = 50000. ;
		lon:YGridLength_M = 50000. ;
		lon:PoleOnPlane = "north" ;
	double lat(yc, xc) ;
		lat:units = "degrees_north" ;
		lat:long_name = "latitude" ;
		lat:standard_name = "latitude" ;
		lat:axis = "Y" ;
		lat:NX_NumPntsOnParallel = 123 ;
		lat:NY_NumPntsOnMeridian = 104 ;
		lat:actual_range = 21.23807f, 67.63758f ;
		lat:XGridLength_M = 50000. ;
		lat:YGridLength_M = 50000. ;
		lat:PoleOnPlane = "north" ;
...

// global attributes:
...
		:history = "Mon Aug  9 13:44:50 2010: ncatted -a
		spatial_ref,global,a,c,PROJCS[\"unnamed\",GEOGCS[\"Normal
		Sphere
		(r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]
		narccap_ecpc-20c3m-tasmin-ncep.nc
		narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc\n",
			"Fri May  8 09:34:14 2009: ncrcat
tasmin_ECPC_1979010106.nc tasmin_ECPC_1981010106.nc
tasmin_ECPC_1986010106.nc tasmin_ECPC_1991010106.nc
tasmin_ECPC_1996010106.nc tasmin_ECPC_2001010106.nc
narccap_ecpc-20c3m-tasmin-ncep.nc" ;
		:nco_openmp_thread_number = 1 ;
		:spatial_ref = "PROJCS[\"unnamed\",GEOGCS[\"Normal Sphere
(r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]"
;
}

james@basalt ~ $ gdalinfo narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
Driver: netCDF/Network Common Data Format
Files: narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
       narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc.aux.xml
Size is 512, 512
Coordinate System is `'
Metadata:
...
  NC_GLOBAL#history1=Original output in GRIB 1
  NC_GLOBAL#history2=Contains modifications made to original data
  NC_GLOBAL#history=Mon Aug  9 13:44:50 2010: ncatted -a
  spatial_ref,global,a,c,PROJCS["unnamed",GEOGCS["Normal Sphere
  (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
  narccap_ecpc-20c3m-tasmin-ncep.nc
  narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
Fri May  8 09:34:14 2009: ncrcat tasmin_ECPC_1979010106.nc
tasmin_ECPC_1981010106.nc tasmin_ECPC_1986010106.nc
tasmin_ECPC_1991010106.nc tasmin_ECPC_1996010106.nc
tasmin_ECPC_2001010106.nc narccap_ecpc-20c3m-tasmin-ncep.nc
  NC_GLOBAL#nco_openmp_thread_number=1
  NC_GLOBAL#spatial_ref=PROJCS["unnamed",GEOGCS["Normal Sphere
(r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":lon
  SUBDATASET_1_DESC=[104x123] longitude (64-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":lat
  SUBDATASET_2_DESC=[104x123] latitude (64-bit floating-point)
  SUBDATASET_3_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":time_bnds
  SUBDATASET_3_DESC=[9496x2] time_bnds (64-bit floating-point)
  SUBDATASET_4_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":tasmin
  SUBDATASET_4_DESC=[9496x104x123] air_temperature (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


james@basalt ~ $ python
>>> from osgeo import gdal
>>> dst = gdal.Open("narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc")
>>> dst.GetProjection()

From ivan.lucena at pmldnet.com  Mon Aug  9 15:13:59 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Mon Aug  9 19:16:16 2010
Subject: [gdal-dev] How does GDAL's NetCDF driver determine the spatial
	reference system
In-Reply-To: <20100809222148.GC7409@basalt.uvic.ca>
References: <20100809222148.GC7409@basalt.uvic.ca>
Message-ID: <4C605377.6030803@pmldnet.com>

James,

Could do file a ticked and upload a sample file on http://trac.osgeo.org/gdal/ ?

Regards,

Ivan

James Hiebert wrote:
> Hi All,
> 
> I'm trying to use GDAL (version 1.7.2 on Gentoo built with hdf5 and netcdf
> support) to read NetCDF files, but I'm a little unclear on how the NetCDF
> driver attempts to determine the georeferencing.
> 
> The driver page here:
> http://www.gdal.org/frmt_netcdf.html
> states that it will attempt to read the metadata "spatial_ref" for a Well
> Know Text definition of the spatial reference (I assume that it means that
> it will try to use a global attribute of the NetCDF file named spatial_ref).
> 
> Since this would be convenient for my application, I attempted to use GDAL
> this way without success.
> 
> + I added a global attribute named "spatial_ref" with the WKT definition of
> the spatial reference system.
> + gdalinfo on the file still reports "Coordinate System is `'"
> + opening the file with the python bindings and calling dst.GetProjection()
>   returns a blank string (i.e. no projection information)
> 
> The full listings of my spatial reference definition, the output of ncdump
> and gdalinfo and the output from the python session are listed below.  Can
> anyone tell me whether I'm doing something wrong, or should I not count on
> georeferencing being supported by the NetCDF driver?
> 
> ~James
> 
> james@basalt ~ $ ncatted -a spatial_ref,global,a,c,'PROJCS["unnamed",GEOGCS["Normal Sphere
> (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]'
> narccap_ecpc-20c3m-tasmin-ncep.nc narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> 
> 
> james@basalt ~ $ ncdump -h narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> netcdf narccap_ecpc-20c3m-tasmin-ncep-with-srs {
> dimensions:
> 	xc = 123 ;
> 	yc = 104 ;
> 	time = UNLIMITED ; // (9496 currently)
> 	bnds = 2 ;
> variables:
> 	char polar_stereographic ;
> 		polar_stereographic:grid_mapping_name =
> "polar_stereographic" ;
> 		polar_stereographic:longitude_of_central_meridian = 263. ;
> 		polar_stereographic:straight_vertical_longitude_from_pole =
> 263. ;
> 		polar_stereographic:standard_parallel = 60. ;
> 		polar_stereographic:TrueGridLength_Latitude = 60. ;
> 		polar_stereographic:XGridLength_M = 50000. ;
> 		polar_stereographic:YGridLength_M = 50000. ;
> 		polar_stereographic:PoleOnPlane = "north" ;
> 		polar_stereographic:false_easting = 3925000. ;
> 		polar_stereographic:false_northing = 8325000. ;
> 		polar_stereographic:latitude_of_projection_origin = 90. ;
> 	double yc(yc) ;
> 		yc:long_name = "y-coordinate of Cartesian system" ;
> 		yc:standard_name = "projection_y_coordinate" ;
> 		yc:axis = "Y" ;
> 		yc:units = "m" ;
> 	double xc(xc) ;
> 		xc:long_name = "x-coordinate of Cartesian system" ;
> 		xc:standard_name = "projection_x_coordinate" ;
> 		xc:axis = "X" ;
> 		xc:units = "m" ;
> 	double lon(yc, xc) ;
> 		lon:units = "degrees_east" ;
> 		lon:long_name = "longitude" ;
> 		lon:standard_name = "longitude" ;
> 		lon:axis = "X" ;
> 		lon:NX_NumPntsOnParallel = 123 ;
> 		lon:NY_NumPntsOnMeridian = 104 ;
> 		lon:actual_range = 211.5412f, 316.2759f ;
> 		lon:XGridLength_M = 50000. ;
> 		lon:YGridLength_M = 50000. ;
> 		lon:PoleOnPlane = "north" ;
> 	double lat(yc, xc) ;
> 		lat:units = "degrees_north" ;
> 		lat:long_name = "latitude" ;
> 		lat:standard_name = "latitude" ;
> 		lat:axis = "Y" ;
> 		lat:NX_NumPntsOnParallel = 123 ;
> 		lat:NY_NumPntsOnMeridian = 104 ;
> 		lat:actual_range = 21.23807f, 67.63758f ;
> 		lat:XGridLength_M = 50000. ;
> 		lat:YGridLength_M = 50000. ;
> 		lat:PoleOnPlane = "north" ;
> ...
> 
> // global attributes:
> ...
> 		:history = "Mon Aug  9 13:44:50 2010: ncatted -a
> 		spatial_ref,global,a,c,PROJCS[\"unnamed\",GEOGCS[\"Normal
> 		Sphere
> 		(r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]
> 		narccap_ecpc-20c3m-tasmin-ncep.nc
> 		narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc\n",
> 			"Fri May  8 09:34:14 2009: ncrcat
> tasmin_ECPC_1979010106.nc tasmin_ECPC_1981010106.nc
> tasmin_ECPC_1986010106.nc tasmin_ECPC_1991010106.nc
> tasmin_ECPC_1996010106.nc tasmin_ECPC_2001010106.nc
> narccap_ecpc-20c3m-tasmin-ncep.nc" ;
> 		:nco_openmp_thread_number = 1 ;
> 		:spatial_ref = "PROJCS[\"unnamed\",GEOGCS[\"Normal Sphere
> (r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]"
> ;
> }
> 
> james@basalt ~ $ gdalinfo narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> Driver: netCDF/Network Common Data Format
> Files: narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
>        narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc.aux.xml
> Size is 512, 512
> Coordinate System is `'
> Metadata:
> ...
>   NC_GLOBAL#history1=Original output in GRIB 1
>   NC_GLOBAL#history2=Contains modifications made to original data
>   NC_GLOBAL#history=Mon Aug  9 13:44:50 2010: ncatted -a
>   spatial_ref,global,a,c,PROJCS["unnamed",GEOGCS["Normal Sphere
>   (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
>   narccap_ecpc-20c3m-tasmin-ncep.nc
>   narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> Fri May  8 09:34:14 2009: ncrcat tasmin_ECPC_1979010106.nc
> tasmin_ECPC_1981010106.nc tasmin_ECPC_1986010106.nc
> tasmin_ECPC_1991010106.nc tasmin_ECPC_1996010106.nc
> tasmin_ECPC_2001010106.nc narccap_ecpc-20c3m-tasmin-ncep.nc
>   NC_GLOBAL#nco_openmp_thread_number=1
>   NC_GLOBAL#spatial_ref=PROJCS["unnamed",GEOGCS["Normal Sphere
> (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
> Subdatasets:
>   SUBDATASET_1_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":lon
>   SUBDATASET_1_DESC=[104x123] longitude (64-bit floating-point)
>   SUBDATASET_2_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":lat
>   SUBDATASET_2_DESC=[104x123] latitude (64-bit floating-point)
>   SUBDATASET_3_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":time_bnds
>   SUBDATASET_3_DESC=[9496x2] time_bnds (64-bit floating-point)
>   SUBDATASET_4_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":tasmin
>   SUBDATASET_4_DESC=[9496x104x123] air_temperature (32-bit floating-point)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
> 
> 
> james@basalt ~ $ python
>>>> from osgeo import gdal
>>>> dst = gdal.Open("narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc")
>>>> dst.GetProjection()
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From jzl5325 at psu.edu  Mon Aug  9 16:51:23 2010
From: jzl5325 at psu.edu (Jay L.)
Date: Mon Aug  9 19:43:16 2010
Subject: [gdal-dev] Shapefile - Multipolygon with interior rings
Message-ID: <AANLkTinjh_mxpWgKdWjDGfs_2vLsCTi6=VHP0v1kQx6Y@mail.gmail.com>

Good afternoon,
I am working on a program to convert a shapefile from ocentric to ographic
latitude.  The program reads an ESRI shapefile, creates a new shapefile,
copying the attribute data, and performs a latitude "shift" for each point
in the geometry.  OGR is working wonderfully on all geometry types, except
for multipolygons with donuts.

Below is the code snippet.  Above this the geometry type and feature
attributes are read from the input shapefile.

When printing the point_count (in blue) variable I am able to see that my
multipolygon consists of two polygons, each with 2 rings (one interior and
one exterior).  I iterate through these rings and attempt to get a point
count, which I use to iterate over each linearring.  The point count for the
exterior ring runs without a problem and returns the proper number of
points.  The point count on the interior ring returns an error.

Stepping up one "level" I can print the geometry (green text) for the
multipolygon and the description of 2 polygons (in proper WKT format with an
exterior and interior ring) are written.  It seems that once I am "into" the
linearrings of a multipolygon OGR is only "seeing" the exterior ring.

Thoughts?

Thanks!
Jay


Code Snippet:

elif geom_type == "MULTIPOLYGON":

    while feature_in is not None:

        #Create the output feature from the input
        geometry = feature_in.GetGeometryRef()

        #Dig into the input geometry
        geom_count = geometry.GetGeometryCount()

        #Pack the multipolygon lunch for later
        multipoly = ogr.Geometry(ogr.wkbMultiPolygon)

        #Iterate through the polygons
        for g in range(geom_count):
            geom = geometry.GetGeometryRef(g)
            geom_count = geom.GetGeometryCount()
            geom_name = geom.GetGeometryName()

            #For individual polygons in the multipolygon layer
            if geom_name == "LINEARRING":

                #Create a linear ring to populate with the points.
                ring = ogr.Geometry(ogr.wkbLinearRing)

                #Get a point count
                point_count = geom.GetPointCount()

                #Iterate through the points
                for h in range (point_count):
                    pntx = geom.GetX(h)
                    pnty = geom.GetY(h)
                    pntz = geom.GetZ(h)

                    #perform the conversion
                    if pntz == 0.0:
                        new_y = convert(pnty)
                        ring.AddPoint_2D(pntx, new_y)


                    elif pntz != 0.0:
                        new_y = convert(pnty)
                        ring.AddPoint(pntx, new_y, pntz)

                #Add the linearring
                poly.AddGeometry(ring)

                #Assign the spatial reference to the feature
                poly.AssignSpatialReference(feature_in_spatref)

            #For multipolygons in the multipolygon layer
            elif geom_name == "POLYGON":

                #Create a polygon to populate with linear ring(s)
                poly = ogr.Geometry(ogr.wkbPolygon)

                #Iterate through the polygons
                for h in range (geom_count):
                    geom = geom.GetGeometryRef(h)

                    #Check for multipolyons with donuts
                    try:
                        #Get a point count
                        point_count = geom.GetPointCount()

                        #Create a linear ring to populate with the points.
                        ring = ogr.Geometry(ogr.wkbLinearRing)

                        #Iterate through the points
                        for j in range (point_count):
                            pntx = geom.GetX(j)
                            pnty = geom.GetY(j)
                            pntz = geom.GetZ(j)

                            #perform the conversion
                            if pntz == 0.0:
                                new_y = convert(pnty)
                                ring.AddPoint_2D(pntx, new_y)


                            elif pntz != 0.0:
                                new_y = convert(pnty)
                                ring.AddPoint(pntx, new_y, pntz)

                    #Exit gracefully if multipolygons with donuts are
encountered
                    except:
                        print "This shapefile is not supported."

                #Add the linearring
                poly.AddGeometry(ring)

            #Add the polygon to the multipolygon
            multipoly.AddGeometry(poly)

            #Set the spatial reference of the feature
            multipoly.AssignSpatialReference(feature_in_spatref)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100809/827a46e9/attachment-0001.html
From hiebert at uvic.ca  Mon Aug  9 19:50:17 2010
From: hiebert at uvic.ca (James Hiebert)
Date: Mon Aug  9 19:50:21 2010
Subject: [gdal-dev] How does GDAL's NetCDF driver determine the spatial
	reference system
In-Reply-To: <4C605377.6030803@pmldnet.com>
References: <20100809222148.GC7409@basalt.uvic.ca>
	<4C605377.6030803@pmldnet.com>
Message-ID: <20100809235015.GD7409@basalt.uvic.ca>

Sure.  The ticket can be found here:
https://trac.osgeo.org/gdal/ticket/3715

~James

On Mon, Aug 09, 2010 at 03:13:59PM -0400, Lucena, Ivan wrote:
> James,
> 
> Could do file a ticked and upload a sample file on http://trac.osgeo.org/gdal/ ?
> 
> Regards,
> 
> Ivan
> 
> James Hiebert wrote:
> > Hi All,
> > 
> > I'm trying to use GDAL (version 1.7.2 on Gentoo built with hdf5 and netcdf
> > support) to read NetCDF files, but I'm a little unclear on how the NetCDF
> > driver attempts to determine the georeferencing.
> > 
> > The driver page here:
> > http://www.gdal.org/frmt_netcdf.html
> > states that it will attempt to read the metadata "spatial_ref" for a Well
> > Know Text definition of the spatial reference (I assume that it means that
> > it will try to use a global attribute of the NetCDF file named spatial_ref).
> > 
> > Since this would be convenient for my application, I attempted to use GDAL
> > this way without success.
> > 
> > + I added a global attribute named "spatial_ref" with the WKT definition of
> > the spatial reference system.
> > + gdalinfo on the file still reports "Coordinate System is `'"
> > + opening the file with the python bindings and calling dst.GetProjection()
> >   returns a blank string (i.e. no projection information)
> > 
> > The full listings of my spatial reference definition, the output of ncdump
> > and gdalinfo and the output from the python session are listed below.  Can
> > anyone tell me whether I'm doing something wrong, or should I not count on
> > georeferencing being supported by the NetCDF driver?
> > 
> > ~James
> > 
> > james@basalt ~ $ ncatted -a spatial_ref,global,a,c,'PROJCS["unnamed",GEOGCS["Normal Sphere
> > (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]'
> > narccap_ecpc-20c3m-tasmin-ncep.nc narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > 
> > 
> > james@basalt ~ $ ncdump -h narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > netcdf narccap_ecpc-20c3m-tasmin-ncep-with-srs {
> > dimensions:
> > 	xc = 123 ;
> > 	yc = 104 ;
> > 	time = UNLIMITED ; // (9496 currently)
> > 	bnds = 2 ;
> > variables:
> > 	char polar_stereographic ;
> > 		polar_stereographic:grid_mapping_name =
> > "polar_stereographic" ;
> > 		polar_stereographic:longitude_of_central_meridian = 263. ;
> > 		polar_stereographic:straight_vertical_longitude_from_pole =
> > 263. ;
> > 		polar_stereographic:standard_parallel = 60. ;
> > 		polar_stereographic:TrueGridLength_Latitude = 60. ;
> > 		polar_stereographic:XGridLength_M = 50000. ;
> > 		polar_stereographic:YGridLength_M = 50000. ;
> > 		polar_stereographic:PoleOnPlane = "north" ;
> > 		polar_stereographic:false_easting = 3925000. ;
> > 		polar_stereographic:false_northing = 8325000. ;
> > 		polar_stereographic:latitude_of_projection_origin = 90. ;
> > 	double yc(yc) ;
> > 		yc:long_name = "y-coordinate of Cartesian system" ;
> > 		yc:standard_name = "projection_y_coordinate" ;
> > 		yc:axis = "Y" ;
> > 		yc:units = "m" ;
> > 	double xc(xc) ;
> > 		xc:long_name = "x-coordinate of Cartesian system" ;
> > 		xc:standard_name = "projection_x_coordinate" ;
> > 		xc:axis = "X" ;
> > 		xc:units = "m" ;
> > 	double lon(yc, xc) ;
> > 		lon:units = "degrees_east" ;
> > 		lon:long_name = "longitude" ;
> > 		lon:standard_name = "longitude" ;
> > 		lon:axis = "X" ;
> > 		lon:NX_NumPntsOnParallel = 123 ;
> > 		lon:NY_NumPntsOnMeridian = 104 ;
> > 		lon:actual_range = 211.5412f, 316.2759f ;
> > 		lon:XGridLength_M = 50000. ;
> > 		lon:YGridLength_M = 50000. ;
> > 		lon:PoleOnPlane = "north" ;
> > 	double lat(yc, xc) ;
> > 		lat:units = "degrees_north" ;
> > 		lat:long_name = "latitude" ;
> > 		lat:standard_name = "latitude" ;
> > 		lat:axis = "Y" ;
> > 		lat:NX_NumPntsOnParallel = 123 ;
> > 		lat:NY_NumPntsOnMeridian = 104 ;
> > 		lat:actual_range = 21.23807f, 67.63758f ;
> > 		lat:XGridLength_M = 50000. ;
> > 		lat:YGridLength_M = 50000. ;
> > 		lat:PoleOnPlane = "north" ;
> > ...
> > 
> > // global attributes:
> > ...
> > 		:history = "Mon Aug  9 13:44:50 2010: ncatted -a
> > 		spatial_ref,global,a,c,PROJCS[\"unnamed\",GEOGCS[\"Normal
> > 		Sphere
> > 		(r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]
> > 		narccap_ecpc-20c3m-tasmin-ncep.nc
> > 		narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc\n",
> > 			"Fri May  8 09:34:14 2009: ncrcat
> > tasmin_ECPC_1979010106.nc tasmin_ECPC_1981010106.nc
> > tasmin_ECPC_1986010106.nc tasmin_ECPC_1991010106.nc
> > tasmin_ECPC_1996010106.nc tasmin_ECPC_2001010106.nc
> > narccap_ecpc-20c3m-tasmin-ncep.nc" ;
> > 		:nco_openmp_thread_number = 1 ;
> > 		:spatial_ref = "PROJCS[\"unnamed\",GEOGCS[\"Normal Sphere
> > (r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]"
> > ;
> > }
> > 
> > james@basalt ~ $ gdalinfo narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > Driver: netCDF/Network Common Data Format
> > Files: narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> >        narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc.aux.xml
> > Size is 512, 512
> > Coordinate System is `'
> > Metadata:
> > ...
> >   NC_GLOBAL#history1=Original output in GRIB 1
> >   NC_GLOBAL#history2=Contains modifications made to original data
> >   NC_GLOBAL#history=Mon Aug  9 13:44:50 2010: ncatted -a
> >   spatial_ref,global,a,c,PROJCS["unnamed",GEOGCS["Normal Sphere
> >   (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
> >   narccap_ecpc-20c3m-tasmin-ncep.nc
> >   narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > Fri May  8 09:34:14 2009: ncrcat tasmin_ECPC_1979010106.nc
> > tasmin_ECPC_1981010106.nc tasmin_ECPC_1986010106.nc
> > tasmin_ECPC_1991010106.nc tasmin_ECPC_1996010106.nc
> > tasmin_ECPC_2001010106.nc narccap_ecpc-20c3m-tasmin-ncep.nc
> >   NC_GLOBAL#nco_openmp_thread_number=1
> >   NC_GLOBAL#spatial_ref=PROJCS["unnamed",GEOGCS["Normal Sphere
> > (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
> > Subdatasets:
> >   SUBDATASET_1_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":lon
> >   SUBDATASET_1_DESC=[104x123] longitude (64-bit floating-point)
> >   SUBDATASET_2_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":lat
> >   SUBDATASET_2_DESC=[104x123] latitude (64-bit floating-point)
> >   SUBDATASET_3_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":time_bnds
> >   SUBDATASET_3_DESC=[9496x2] time_bnds (64-bit floating-point)
> >   SUBDATASET_4_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc":tasmin
> >   SUBDATASET_4_DESC=[9496x104x123] air_temperature (32-bit floating-point)
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0,  512.0)
> > Upper Right (  512.0,    0.0)
> > Lower Right (  512.0,  512.0)
> > Center      (  256.0,  256.0)
> > 
> > 
> > james@basalt ~ $ python
> >>>> from osgeo import gdal
> >>>> dst = gdal.Open("narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc")
> >>>> dst.GetProjection()
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> 
From ksshannon at gmail.com  Mon Aug  9 20:12:04 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Mon Aug  9 20:12:24 2010
Subject: [gdal-dev] How does GDAL's NetCDF driver determine the spatial 
	reference system
In-Reply-To: <20100809235015.GD7409@basalt.uvic.ca>
References: <20100809222148.GC7409@basalt.uvic.ca>
	<4C605377.6030803@pmldnet.com> 
	<20100809235015.GD7409@basalt.uvic.ca>
Message-ID: <AANLkTimxX19comhOO8eeKBVbvbGHTrJVV=aVdsi7A--A@mail.gmail.com>

James,
I added polar stereographic support to the trunk in r18931.  I believe I
added all the coordinate systems to be cf=1.4 compliant.  I did not have a
dataset to test it.  I did not backport these changes to 1.7 because I was a
new commiter.  I will test your file tomorrow on my 1.8dev machine.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Mon, Aug 9, 2010 at 5:50 PM, James Hiebert <hiebert@uvic.ca> wrote:

> Sure.  The ticket can be found here:
> https://trac.osgeo.org/gdal/ticket/3715
>
> ~James
>
> On Mon, Aug 09, 2010 at 03:13:59PM -0400, Lucena, Ivan wrote:
> > James,
> >
> > Could do file a ticked and upload a sample file on
> http://trac.osgeo.org/gdal/ ?
> >
> > Regards,
> >
> > Ivan
> >
> > James Hiebert wrote:
> > > Hi All,
> > >
> > > I'm trying to use GDAL (version 1.7.2 on Gentoo built with hdf5 and
> netcdf
> > > support) to read NetCDF files, but I'm a little unclear on how the
> NetCDF
> > > driver attempts to determine the georeferencing.
> > >
> > > The driver page here:
> > > http://www.gdal.org/frmt_netcdf.html
> > > states that it will attempt to read the metadata "spatial_ref" for a
> Well
> > > Know Text definition of the spatial reference (I assume that it means
> that
> > > it will try to use a global attribute of the NetCDF file named
> spatial_ref).
> > >
> > > Since this would be convenient for my application, I attempted to use
> GDAL
> > > this way without success.
> > >
> > > + I added a global attribute named "spatial_ref" with the WKT
> definition of
> > > the spatial reference system.
> > > + gdalinfo on the file still reports "Coordinate System is `'"
> > > + opening the file with the python bindings and calling
> dst.GetProjection()
> > >   returns a blank string (i.e. no projection information)
> > >
> > > The full listings of my spatial reference definition, the output of
> ncdump
> > > and gdalinfo and the output from the python session are listed below.
>  Can
> > > anyone tell me whether I'm doing something wrong, or should I not count
> on
> > > georeferencing being supported by the NetCDF driver?
> > >
> > > ~James
> > >
> > > james@basalt ~ $ ncatted -a
> spatial_ref,global,a,c,'PROJCS["unnamed",GEOGCS["Normal Sphere
> > >
> (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]'
> > > narccap_ecpc-20c3m-tasmin-ncep.nc
> narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > >
> > >
> > > james@basalt ~ $ ncdump -h narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > > netcdf narccap_ecpc-20c3m-tasmin-ncep-with-srs {
> > > dimensions:
> > >     xc = 123 ;
> > >     yc = 104 ;
> > >     time = UNLIMITED ; // (9496 currently)
> > >     bnds = 2 ;
> > > variables:
> > >     char polar_stereographic ;
> > >             polar_stereographic:grid_mapping_name =
> > > "polar_stereographic" ;
> > >             polar_stereographic:longitude_of_central_meridian = 263. ;
> > >             polar_stereographic:straight_vertical_longitude_from_pole =
> > > 263. ;
> > >             polar_stereographic:standard_parallel = 60. ;
> > >             polar_stereographic:TrueGridLength_Latitude = 60. ;
> > >             polar_stereographic:XGridLength_M = 50000. ;
> > >             polar_stereographic:YGridLength_M = 50000. ;
> > >             polar_stereographic:PoleOnPlane = "north" ;
> > >             polar_stereographic:false_easting = 3925000. ;
> > >             polar_stereographic:false_northing = 8325000. ;
> > >             polar_stereographic:latitude_of_projection_origin = 90. ;
> > >     double yc(yc) ;
> > >             yc:long_name = "y-coordinate of Cartesian system" ;
> > >             yc:standard_name = "projection_y_coordinate" ;
> > >             yc:axis = "Y" ;
> > >             yc:units = "m" ;
> > >     double xc(xc) ;
> > >             xc:long_name = "x-coordinate of Cartesian system" ;
> > >             xc:standard_name = "projection_x_coordinate" ;
> > >             xc:axis = "X" ;
> > >             xc:units = "m" ;
> > >     double lon(yc, xc) ;
> > >             lon:units = "degrees_east" ;
> > >             lon:long_name = "longitude" ;
> > >             lon:standard_name = "longitude" ;
> > >             lon:axis = "X" ;
> > >             lon:NX_NumPntsOnParallel = 123 ;
> > >             lon:NY_NumPntsOnMeridian = 104 ;
> > >             lon:actual_range = 211.5412f, 316.2759f ;
> > >             lon:XGridLength_M = 50000. ;
> > >             lon:YGridLength_M = 50000. ;
> > >             lon:PoleOnPlane = "north" ;
> > >     double lat(yc, xc) ;
> > >             lat:units = "degrees_north" ;
> > >             lat:long_name = "latitude" ;
> > >             lat:standard_name = "latitude" ;
> > >             lat:axis = "Y" ;
> > >             lat:NX_NumPntsOnParallel = 123 ;
> > >             lat:NY_NumPntsOnMeridian = 104 ;
> > >             lat:actual_range = 21.23807f, 67.63758f ;
> > >             lat:XGridLength_M = 50000. ;
> > >             lat:YGridLength_M = 50000. ;
> > >             lat:PoleOnPlane = "north" ;
> > > ...
> > >
> > > // global attributes:
> > > ...
> > >             :history = "Mon Aug  9 13:44:50 2010: ncatted -a
> > >             spatial_ref,global,a,c,PROJCS[\"unnamed\",GEOGCS[\"Normal
> > >             Sphere
> > >
> (r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]
> > >             narccap_ecpc-20c3m-tasmin-ncep.nc
> > >             narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc\n",
> > >                     "Fri May  8 09:34:14 2009: ncrcat
> > > tasmin_ECPC_1979010106.nc tasmin_ECPC_1981010106.nc
> > > tasmin_ECPC_1986010106.nc tasmin_ECPC_1991010106.nc
> > > tasmin_ECPC_1996010106.nc tasmin_ECPC_2001010106.nc
> > > narccap_ecpc-20c3m-tasmin-ncep.nc" ;
> > >             :nco_openmp_thread_number = 1 ;
> > >             :spatial_ref = "PROJCS[\"unnamed\",GEOGCS[\"Normal Sphere
> > >
> (r=6370997)\",DATUM[\"unknown\",SPHEROID[\"sphere\",6370997,0]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433]],PROJECTION[\"Polar_Stereographic\"],PARAMETER[\"latitude_of_origin\",60],PARAMETER[\"central_meridian\",263],PARAMETER[\"scale_factor\",1],PARAMETER[\"false_easting\",3925000],PARAMETER[\"false_northing\",8325000]]"
> > > ;
> > > }
> > >
> > > james@basalt ~ $ gdalinfo narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > > Driver: netCDF/Network Common Data Format
> > > Files: narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > >        narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc.aux.xml
> > > Size is 512, 512
> > > Coordinate System is `'
> > > Metadata:
> > > ...
> > >   NC_GLOBAL#history1=Original output in GRIB 1
> > >   NC_GLOBAL#history2=Contains modifications made to original data
> > >   NC_GLOBAL#history=Mon Aug  9 13:44:50 2010: ncatted -a
> > >   spatial_ref,global,a,c,PROJCS["unnamed",GEOGCS["Normal Sphere
> > >
> (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
> > >   narccap_ecpc-20c3m-tasmin-ncep.nc
> > >   narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> > > Fri May  8 09:34:14 2009: ncrcat tasmin_ECPC_1979010106.nc
> > > tasmin_ECPC_1981010106.nc tasmin_ECPC_1986010106.nc
> > > tasmin_ECPC_1991010106.nc tasmin_ECPC_1996010106.nc
> > > tasmin_ECPC_2001010106.nc narccap_ecpc-20c3m-tasmin-ncep.nc
> > >   NC_GLOBAL#nco_openmp_thread_number=1
> > >   NC_GLOBAL#spatial_ref=PROJCS["unnamed",GEOGCS["Normal Sphere
> > >
> (r=6370997)",DATUM["unknown",SPHEROID["sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Polar_Stereographic"],PARAMETER["latitude_of_origin",60],PARAMETER["central_meridian",263],PARAMETER["scale_factor",1],PARAMETER["false_easting",3925000],PARAMETER["false_northing",8325000]]
> > > Subdatasets:
> > >   SUBDATASET_1_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> ":lon
> > >   SUBDATASET_1_DESC=[104x123] longitude (64-bit floating-point)
> > >   SUBDATASET_2_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> ":lat
> > >   SUBDATASET_2_DESC=[104x123] latitude (64-bit floating-point)
> > >   SUBDATASET_3_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> ":time_bnds
> > >   SUBDATASET_3_DESC=[9496x2] time_bnds (64-bit floating-point)
> > >   SUBDATASET_4_NAME=NETCDF:"narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc
> ":tasmin
> > >   SUBDATASET_4_DESC=[9496x104x123] air_temperature (32-bit
> floating-point)
> > > Corner Coordinates:
> > > Upper Left  (    0.0,    0.0)
> > > Lower Left  (    0.0,  512.0)
> > > Upper Right (  512.0,    0.0)
> > > Lower Right (  512.0,  512.0)
> > > Center      (  256.0,  256.0)
> > >
> > >
> > > james@basalt ~ $ python
> > >>>> from osgeo import gdal
> > >>>> dst = gdal.Open("narccap_ecpc-20c3m-tasmin-ncep-with-srs.nc")
> > >>>> dst.GetProjection()
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100809/ee690136/attachment-0001.html
From warmerdam at pobox.com  Mon Aug  9 22:10:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug  9 22:10:09 2010
Subject: [gdal-dev] Shapefile - Multipolygon with interior rings
In-Reply-To: <AANLkTinjh_mxpWgKdWjDGfs_2vLsCTi6=VHP0v1kQx6Y@mail.gmail.com>
References: <AANLkTinjh_mxpWgKdWjDGfs_2vLsCTi6=VHP0v1kQx6Y@mail.gmail.com>
Message-ID: <AANLkTi=EhdWCYuoeakTgfNfUKDJVx=EjJ8oU__53ZNbo@mail.gmail.com>

On Mon, Aug 9, 2010 at 4:51 PM, Jay L. <jzl5325@psu.edu> wrote:
> When printing the point_count (in blue) variable I am able to see that my
> multipolygon consists of two polygons, each with 2 rings (one interior and
> one exterior).? I iterate through these rings and attempt to get a point
> count, which I use to iterate over each linearring.? The point count for the
> exterior ring runs without a problem and returns the proper number of
> points.? The point count on the interior ring returns an error.

Jay,

It isn't immediately obvious to me why you are seeing the problem
you report, but you are using the variable geom_count for
both the outer and inner loop and this will cause you
severe problems in any case where a multipolygon
contains a different number of polygons than it's
polygon's have rings.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From martin.raspaud at smhi.se  Tue Aug 10 03:14:39 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Tue Aug 10 03:38:33 2010
Subject: [gdal-dev] Geotiff with bands of different type
Message-ID: <4C60FC5F.50204@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all,

I'm using gdal/python and I would like to create geotiffs using one band of
bytes and one of float32s...

Is this even possible ?

Thanks,
Martin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJMYPxfAAoJEBdvyODiyJI4k1kH/0JQBE/wSlR3yDLP/OljCMsE
YgLEji5Hs6u2dtaDu/uIsxViKsLfIX4wZIp0VA5o2QhdW/Y+oBq9s5kKTEbLrsNd
kWl80/qTVX7xyOcV36hcbtPDbRxnxdIbnWSZi36U+aFLh4D0Sm+n8JX+++SglZ3W
TcCdgDG9PYCQE1bcFfNOB82kOdFKFDuDR16rZFV/eSpUZLgAHfoYmZC6SJhQOjaa
GhpdcMPyn8un1Hu/5pT50tq9Dm11oDF3gRAQUQo3cjhn6+frfjimjXhMzDTZZm7T
V23Dq5Ok/qLq2JjWXhjiNJnAWDKCSZI6K+zD4OAW1Oo28+ElaDS3VsGr2twN/Zk=
=9RL2
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/6cb11242/martin_raspaud.vcf
From chaitanya.ch at gmail.com  Tue Aug 10 03:46:56 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug 10 03:47:00 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <4C60FC5F.50204@smhi.se>
References: <4C60FC5F.50204@smhi.se>
Message-ID: <AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>

Martin,

Yes, it is possible.
You can specify the data type in GDALDataset::AddBand()

On Tue, Aug 10, 2010 at 12:44 PM, Martin Raspaud <martin.raspaud@smhi.se>wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all,
>
> I'm using gdal/python and I would like to create geotiffs using one band of
> bytes and one of float32s...
>
> Is this even possible ?
>
> Thanks,
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/f0253adc/attachment.html
From martin.raspaud at smhi.se  Tue Aug 10 04:33:47 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Tue Aug 10 04:33:49 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
Message-ID: <4C610EEB.1040408@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chaitanya kumar CH skrev:
> Martin,
> 
> Yes, it is possible.
> You can specify the data type in GDALDataset::AddBand()

Hi,

thanks for your answer.

Unfortunately, I get the following error:
ERROR 6: Dataset does not support the AddBand() method

I am using the gtiff driver.
Or was this solved in more recent versions of gdal ? (v. 1.5.3)

Best regards,
Martin

> On Tue, Aug 10, 2010 at 12:44 PM, Martin Raspaud <martin.raspaud@smhi.se
> <mailto:martin.raspaud@smhi.se>> wrote:
> 
>     -----BEGIN PGP SIGNED MESSAGE-----
>     Hash: SHA1
> 
>     Hi all,
> 
>     I'm using gdal/python and I would like to create geotiffs using one
>     band of
>     bytes and one of float32s...
> 
>     Is this even possible ?
> 
>     Thanks,
>     Martin
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJMYQ7rAAoJEBdvyODiyJI4GREH/j1CI911HGlK8MAMRlbhAtEl
IIeZJbI4nlP/8hpOJWCbQuK+JSV7UJVbjcud0HqeZdjX9rfi7VVxBh1zx6BONtAz
qXIxn0/r/xz+2G4CZJyEIsL8q4w+/vGJZ+9Wz+TR/s4AtQPrEr86PcNu5YBf2jnp
hER54NMenInoEVmxAW0MsrkuHKL5D6mPeq7WYwUTqzCVz6twYZVwyv5IaLDsDblq
jf2pOMir4uEfgrQshik/SxBtVcdJMCIbYvfMJPYgQG+TebgWABJUaDbKxllqrNEf
gAqXu2b7plYCNqibAMYHQTxXrI0aLO4F6Gx2A3+t7dcjsS6Qhz+Q2fY4vMlpvrw=
=Mji/
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/bac0feef/martin_raspaud.vcf
From chaitanya.ch at gmail.com  Tue Aug 10 05:46:06 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug 10 05:46:10 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <4C610EEB.1040408@smhi.se>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
	<4C610EEB.1040408@smhi.se>
Message-ID: <AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>

Martin,

I'm sorry. I just found out that GDALDataset::AddBand() is not supported by
most format drivers.  GeoTiff format driver doesn't support it.  Also,
having different data types for bands may confuse some applications.

If you are trying to create a mask band, refer to
http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

FYI, 1.5 branch is no longer supported.


On Tue, Aug 10, 2010 at 2:03 PM, Martin Raspaud <martin.raspaud@smhi.se>wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Chaitanya kumar CH skrev:
> > Martin,
> >
> > Yes, it is possible.
> > You can specify the data type in GDALDataset::AddBand()
>
> Hi,
>
> thanks for your answer.
>
> Unfortunately, I get the following error:
> ERROR 6: Dataset does not support the AddBand() method
>
> I am using the gtiff driver.
> Or was this solved in more recent versions of gdal ? (v. 1.5.3)
>
> Best regards,
> Martin
>
> > On Tue, Aug 10, 2010 at 12:44 PM, Martin Raspaud <martin.raspaud@smhi.se
> > <mailto:martin.raspaud@smhi.se>> wrote:
> >
> >     -----BEGIN PGP SIGNED MESSAGE-----
> >     Hash: SHA1
> >
> >     Hi all,
> >
> >     I'm using gdal/python and I would like to create geotiffs using one
> >     band of
> >     bytes and one of float32s...
> >
> >     Is this even possible ?
> >
> >     Thanks,
> >     Martin
> >     _______________________________________________
> >     gdal-dev mailing list
> >     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
> >     http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.9 (GNU/Linux)
> Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/
>
> iQEcBAEBAgAGBQJMYQ7rAAoJEBdvyODiyJI4GREH/j1CI911HGlK8MAMRlbhAtEl
> IIeZJbI4nlP/8hpOJWCbQuK+JSV7UJVbjcud0HqeZdjX9rfi7VVxBh1zx6BONtAz
> qXIxn0/r/xz+2G4CZJyEIsL8q4w+/vGJZ+9Wz+TR/s4AtQPrEr86PcNu5YBf2jnp
> hER54NMenInoEVmxAW0MsrkuHKL5D6mPeq7WYwUTqzCVz6twYZVwyv5IaLDsDblq
> jf2pOMir4uEfgrQshik/SxBtVcdJMCIbYvfMJPYgQG+TebgWABJUaDbKxllqrNEf
> gAqXu2b7plYCNqibAMYHQTxXrI0aLO4F6Gx2A3+t7dcjsS6Qhz+Q2fY4vMlpvrw=
> =Mji/
> -----END PGP SIGNATURE-----
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/4b1799c9/attachment.html
From martin.raspaud at smhi.se  Tue Aug 10 06:46:00 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Tue Aug 10 06:46:02 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
References: <4C60FC5F.50204@smhi.se>	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>	<4C610EEB.1040408@smhi.se>
	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
Message-ID: <4C612DE8.2000705@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chaitanya kumar CH skrev:
> Martin,
> 
> I'm sorry. I just found out that GDALDataset::AddBand() is not supported
> by most format drivers.  GeoTiff format driver doesn't support it. 
> Also, having different data types for bands may confuse some applications.
> 
> If you are trying to create a mask band, refer to
> http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
> 
> FYI, 1.5 branch is no longer supported.

Hi,

Ok, here is a little description of what I try to achieve:
We have a satellite image in black and white, which show IR brightness
temperatures. The data is scaled between 0 and 255 for viewing, and this is
packed in a geotiff file

Now some users would like to have the true value of the brightness temperature
embedded in the file also.

But unfortunately it doesn't seem possible to do with geotiff...

Thanks for your help.

Martin

PS: we are about to switch to gdal 1.6.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJMYS3oAAoJEBdvyODiyJI4NkUH/0i2jLP1qiHSMNmu9Al0Bmev
UoezlTLUuRLPS0fZj9kaJ0mLygcP3w8uBFNCvCivlYE2feBJYZSPv5+pVt9T5LdY
mRUauJ2383ugdWWJ/ceCZKuI2wpCQjBUBtKf+Qicj6Lpk4qqUZattvBkfbWs8yKe
1jT9ZNMJB5bbOFKLmYNaHkbzc+DgzI1FM0fvT9U6vWuoARKL3S/0+Nn+fgVNrSuq
i4WA+y+ThhZ0VviekljB/lhstAYMsWjq8erlMzdiIqMH8vTc4NcwKbSZTDWf5ctw
YYN3/UF63TnkYSdijGVg0YenQPzD2gJJF3N21czA6uHVLCYwnsQMhsz16D1Mhwk=
=9XSz
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/3a4564f7/martin_raspaud.vcf
From arb at sat.dundee.ac.uk  Tue Aug 10 07:02:44 2010
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Tue Aug 10 07:06:34 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <4C612DE8.2000705@smhi.se>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
	<4C610EEB.1040408@smhi.se>
	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
	<4C612DE8.2000705@smhi.se>
Message-ID: <op.vg7yau1dqw3wu1@titan>

On Tue, 10 Aug 2010 11:46:00 +0100, Martin Raspaud <martin.raspaud@smhi.se> wrote:
> We have a satellite image in black and white, which show IR brightness
> temperatures. The data is scaled between 0 and 255 for viewing, and this is
> packed in a geotiff file
>
> Now some users would like to have the true value of the brightness temperature
> embedded in the file also.

Maybe you can simulate something close by putting a scale and offset (slope
and intercept) into the geotiff so you still display 8-bit values but a decent
image viewer will also calculate the true values and give a pixel readout of
the true value under the cursor. I say simulate because 8 bits may not give
sufficient resolution.

Andrew
From martin.raspaud at smhi.se  Tue Aug 10 07:16:41 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Tue Aug 10 07:16:44 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <op.vg7yau1dqw3wu1@titan>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
	<4C610EEB.1040408@smhi.se>
	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
	<4C612DE8.2000705@smhi.se> <op.vg7yau1dqw3wu1@titan>
Message-ID: <4C613519.20602@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Andrew Brooks skrev:
> On Tue, 10 Aug 2010 11:46:00 +0100, Martin Raspaud
> <martin.raspaud@smhi.se> wrote:
>> We have a satellite image in black and white, which show IR brightness
>> temperatures. The data is scaled between 0 and 255 for viewing, and
>> this is
>> packed in a geotiff file
>>
>> Now some users would like to have the true value of the brightness
>> temperature
>> embedded in the file also.
> 
> Maybe you can simulate something close by putting a scale and offset (slope
> and intercept) into the geotiff so you still display 8-bit values but a
> decent
> image viewer will also calculate the true values and give a pixel
> readout of
> the true value under the cursor. I say simulate because 8 bits may not give
> sufficient resolution.

Hmmm, that sounds like a sufficient solution indeed, very good idea, thanks.

Is there any scale/slope and offset/intercept tags defined in geotiff ?

Best regards,
Martin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJMYTUZAAoJEBdvyODiyJI4rOcIAJmI0PzHTOX7hHWD72NcnATG
KKgZFbGMtTL0rAGkexdqSv1fHsqGRL6Jp9QM+qi3Z/FFt6V6iNtlpiJX88k0Limb
aqRO61oHHf3tM0EbWfeSXe0dju/n9BkDiHpJ00k4kKVdyJ+7/7QlYNNHu1/4L+Xa
FO1Cm9X7eBHrq80PD0+oDNVq2D2epnj1EaiHCgiOpMiXZomf/4xs9AOVpG8aeJEf
tx06IO6wb18FuIZHk9mhu8nMqA4F+JEF9AZ0VXACvcDA8q17Q4PjngE0Mpba0tlg
vasSf9vJ/XCuNOOEGEq2lmE3Fp7Ec0ShTbuPBTNPHBKPhJKL4ffCyv7BXYtyUsc=
=3pgP
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/478a0f75/martin_raspaud.vcf
From chaitanya.ch at gmail.com  Tue Aug 10 08:00:41 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug 10 08:00:43 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <op.vg7yau1dqw3wu1@titan>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
	<4C610EEB.1040408@smhi.se>
	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
	<4C612DE8.2000705@smhi.se> <op.vg7yau1dqw3wu1@titan>
Message-ID: <AANLkTinekx77QtYA4Ob=94rOW2R4QmNQ4bkHUJep+j=T@mail.gmail.com>

Martin,

You could scale the actual values into 'float' values between 0 and 255.
This way you can still have the resolution. Conversion to 8-bit will be
easier.

Use GDALRasterBand::GetOffset() and GDALRasterBand::GetScale() along with
GDALRasterBand::SetOffset() and GDALRasterBand::SetScale()
Docs at http://gdal.org/classGDALRasterBand.html describe how to use these.

On Tue, Aug 10, 2010 at 4:32 PM, Andrew Brooks <arb@sat.dundee.ac.uk> wrote:

> On Tue, 10 Aug 2010 11:46:00 +0100, Martin Raspaud <martin.raspaud@smhi.se>
> wrote:
>
>> We have a satellite image in black and white, which show IR brightness
>> temperatures. The data is scaled between 0 and 255 for viewing, and this
>> is
>> packed in a geotiff file
>>
>> Now some users would like to have the true value of the brightness
>> temperature
>> embedded in the file also.
>>
>
> Maybe you can simulate something close by putting a scale and offset (slope
> and intercept) into the geotiff so you still display 8-bit values but a
> decent
> image viewer will also calculate the true values and give a pixel readout
> of
> the true value under the cursor. I say simulate because 8 bits may not give
> sufficient resolution.
>
> Andrew
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/6d9838a2/attachment.html
From warmerdam at pobox.com  Tue Aug 10 08:05:29 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 10 08:05:38 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <4C613519.20602@smhi.se>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
	<4C610EEB.1040408@smhi.se>
	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
	<4C612DE8.2000705@smhi.se> <op.vg7yau1dqw3wu1@titan>
	<4C613519.20602@smhi.se>
Message-ID: <AANLkTimRQ=4XcMyY0AFhuFKxLQGC_FZ1pZONZEx-AdSu@mail.gmail.com>

On Tue, Aug 10, 2010 at 7:16 AM, Martin Raspaud <martin.raspaud@smhi.se> wrote:
> Hmmm, that sounds like a sufficient solution indeed, very good idea, thanks.
>
> Is there any scale/slope and offset/intercept tags defined in geotiff ?

Martin,

GDAL supports saving this style of metadata in a private tag as
defined at:

  http://www.awaresystems.be/imaging/tiff/tifftags/gdal_metadata.html

To do so with the GDAL API use the SetOffset and SetScale methods
on the GDALRasterBand:

  http://www.gdal.org/classGDALRasterBand.html#44e23beb3418c44a89d25ea708207fe1

I should note that in theory the TIFF specification allows a
mix of sample types, but in practice this is not done in the
real world, and libtiff does not support it.

GDAL *does* support reading mixed band types from a variety
of file formats, but not TIFF.  As noted, AddBand() can be used
in a few format cases to create mixed band types though this is
rarely done.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From martin.raspaud at smhi.se  Tue Aug 10 08:57:13 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Tue Aug 10 08:57:16 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <AANLkTimRQ=4XcMyY0AFhuFKxLQGC_FZ1pZONZEx-AdSu@mail.gmail.com>
References: <4C60FC5F.50204@smhi.se>	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>	<4C610EEB.1040408@smhi.se>	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>	<4C612DE8.2000705@smhi.se>	<op.vg7yau1dqw3wu1@titan>	<4C613519.20602@smhi.se>
	<AANLkTimRQ=4XcMyY0AFhuFKxLQGC_FZ1pZONZEx-AdSu@mail.gmail.com>
Message-ID: <4C614CA9.9030408@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Frank Warmerdam skrev:
> On Tue, Aug 10, 2010 at 7:16 AM, Martin Raspaud <martin.raspaud@smhi.se> wrote:
>> Hmmm, that sounds like a sufficient solution indeed, very good idea, thanks.
>>
>> Is there any scale/slope and offset/intercept tags defined in geotiff ?
> 
> Martin,
> 
> GDAL supports saving this style of metadata in a private tag as
> defined at:
> 
>   http://www.awaresystems.be/imaging/tiff/tifftags/gdal_metadata.html
> 
> To do so with the GDAL API use the SetOffset and SetScale methods
> on the GDALRasterBand:
> 
>   http://www.gdal.org/classGDALRasterBand.html#44e23beb3418c44a89d25ea708207fe1

Thanks for the link. Unfortunately, I'm using the python interface with gdal
1.6.2 (since a few minutes, instead of 1.5.3), and the SetOffset/SetScale
methods are not there.

I'll use the gdal private tags instead then...


> I should note that in theory the TIFF specification allows a
> mix of sample types, but in practice this is not done in the
> real world, and libtiff does not support it.
> 
> GDAL *does* support reading mixed band types from a variety
> of file formats, but not TIFF.  As noted, AddBand() can be used
> in a few format cases to create mixed band types though this is
> rarely done.

Thanks for the explanation. We might jump over to netcdf4 if geotiff becomes too
limited.


Best regards,
Martin

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJMYUypAAoJEBdvyODiyJI4kA0IALDDzDRQQl/ZrwLAo2cXTpeN
3M0Mu4J5V7KNEFHaT95Hy0te+D/jLP7g7iEsJcTBuoQwoK3qBQBbgzUBIf0xMeZt
HBGoU9LCpBaZS38W/8oYri2o6nUJO8ZUrdgLlELrGsC/syVKEiIdrf8puOAiJ3pi
y5IRaYegjcNi8paRDCBD9cuedB2lnQJYKVOglh2h0pBJDa3bPbvUNrqXjjLCJls3
Eor9Vt2FVEMajcSSMz+AdnMz6gxzvMzj+0oM17WQDB4DGPTJ6BFjDp3UslLL0ldM
KcAQIt5s2FVLqqEGue/DwMlbLG4pXuz6KnIFY/+U/tMeVWjcXfnvFQIJveI4pNk=
=ce+j
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/f2817e72/martin_raspaud.vcf
From chaitanya.ch at gmail.com  Tue Aug 10 09:30:54 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug 10 09:30:57 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <4C614CA9.9030408@smhi.se>
References: <4C60FC5F.50204@smhi.se>
	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>
	<4C610EEB.1040408@smhi.se>
	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>
	<4C612DE8.2000705@smhi.se> <op.vg7yau1dqw3wu1@titan>
	<4C613519.20602@smhi.se>
	<AANLkTimRQ=4XcMyY0AFhuFKxLQGC_FZ1pZONZEx-AdSu@mail.gmail.com>
	<4C614CA9.9030408@smhi.se>
Message-ID: <AANLkTin88g7f3WnWuYM=deYsHx_3ru-PGE+KTh3coV4Z@mail.gmail.com>

Martin,

Python methods do exist.
Refer to
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py for
some Python examples of these four methods.

On Tue, Aug 10, 2010 at 6:27 PM, Martin Raspaud <martin.raspaud@smhi.se>wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Frank Warmerdam skrev:
> > On Tue, Aug 10, 2010 at 7:16 AM, Martin Raspaud <martin.raspaud@smhi.se>
> wrote:
> >> Hmmm, that sounds like a sufficient solution indeed, very good idea,
> thanks.
> >>
> >> Is there any scale/slope and offset/intercept tags defined in geotiff ?
> >
> > Martin,
> >
> > GDAL supports saving this style of metadata in a private tag as
> > defined at:
> >
> >   http://www.awaresystems.be/imaging/tiff/tifftags/gdal_metadata.html
> >
> > To do so with the GDAL API use the SetOffset and SetScale methods
> > on the GDALRasterBand:
> >
> >
> http://www.gdal.org/classGDALRasterBand.html#44e23beb3418c44a89d25ea708207fe1
>
> Thanks for the link. Unfortunately, I'm using the python interface with
> gdal
> 1.6.2 (since a few minutes, instead of 1.5.3), and the SetOffset/SetScale
> methods are not there.
>
> I'll use the gdal private tags instead then...
>
>
> > I should note that in theory the TIFF specification allows a
> > mix of sample types, but in practice this is not done in the
> > real world, and libtiff does not support it.
> >
> > GDAL *does* support reading mixed band types from a variety
> > of file formats, but not TIFF.  As noted, AddBand() can be used
> > in a few format cases to create mixed band types though this is
> > rarely done.
>
> Thanks for the explanation. We might jump over to netcdf4 if geotiff
> becomes too
> limited.
>
>
> Best regards,
> Martin
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.9 (GNU/Linux)
> Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/
>
> iQEcBAEBAgAGBQJMYUypAAoJEBdvyODiyJI4kA0IALDDzDRQQl/ZrwLAo2cXTpeN
> 3M0Mu4J5V7KNEFHaT95Hy0te+D/jLP7g7iEsJcTBuoQwoK3qBQBbgzUBIf0xMeZt
> HBGoU9LCpBaZS38W/8oYri2o6nUJO8ZUrdgLlELrGsC/syVKEiIdrf8puOAiJ3pi
> y5IRaYegjcNi8paRDCBD9cuedB2lnQJYKVOglh2h0pBJDa3bPbvUNrqXjjLCJls3
> Eor9Vt2FVEMajcSSMz+AdnMz6gxzvMzj+0oM17WQDB4DGPTJ6BFjDp3UslLL0ldM
> KcAQIt5s2FVLqqEGue/DwMlbLG4pXuz6KnIFY/+U/tMeVWjcXfnvFQIJveI4pNk=
> =ce+j
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/87886511/attachment.html
From chaitanya.ch at gmail.com  Tue Aug 10 12:01:00 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug 10 12:01:03 2010
Subject: [gdal-dev] Re: [GDAL_TRANSLATE]Problem with colorimetry
In-Reply-To: <1280848012805-5368754.post@n2.nabble.com>
References: <1280837933426-5368059.post@n2.nabble.com>
	<AANLkTin3DEaV_tKQTX9Pzacbtt0tbZNLN1GRO-MmpCZP@mail.gmail.com>
	<1280848012805-5368754.post@n2.nabble.com>
Message-ID: <AANLkTi=VbK-zmWTfnOzBDcOAuPn+QtXW1vDpg1Ug=7=b@mail.gmail.com>

Fab,

I found the problem.
There were some differences in color tables of your images. gdalbuildvrt
application from the latest GDAL version reports the issue when you try to
build the vrt file. You're advised to preprocess your rasters with other
tools, such as pct2rgb.py or "gdal_translate -expand RGB" to operate
gdalbuildvrt on RGB rasters instead.

The reason the red areas were occuring in different areas is that
gdalbuildvrt considers only the first file's color table.

On Tue, Aug 3, 2010 at 8:36 PM, Tacot <cfab13@hotmail.fr> wrote:

>
> I think more about the value of data.
> http://osgeo-org.1803224.n2.nabble.com/file/n5368754/PixelRed.jpg
>
> But it's not always the picture on the right which pixels become red; it
> can
> be also the picture on the left.
> I have the felling it depends on the range of merging.
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5368754.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/958411b8/attachment.html
From even.rouault at mines-paris.org  Tue Aug 10 13:17:25 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 10 13:17:26 2010
Subject: [gdal-dev] Geotiff with bands of different type
In-Reply-To: <AANLkTin88g7f3WnWuYM=deYsHx_3ru-PGE+KTh3coV4Z@mail.gmail.com>
References: <4C60FC5F.50204@smhi.se> <4C614CA9.9030408@smhi.se>
	<AANLkTin88g7f3WnWuYM=deYsHx_3ru-PGE+KTh3coV4Z@mail.gmail.com>
Message-ID: <201008101917.25449.even.rouault@mines-paris.org>

To be more precise, Band.SetOffset() and Band.SetScale() do exist, but they are 
recent additions only available in the development version (1.8.0dev).

Le mardi 10 ao?t 2010 15:30:54, Chaitanya kumar CH a ?crit :
> Martin,
> 
> Python methods do exist.
> Refer to
> http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py for
> some Python examples of these four methods.
> 
> On Tue, Aug 10, 2010 at 6:27 PM, Martin Raspaud 
<martin.raspaud@smhi.se>wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> > Hash: SHA1
> > 
> > Frank Warmerdam skrev:
> > > On Tue, Aug 10, 2010 at 7:16 AM, Martin Raspaud
> > > <martin.raspaud@smhi.se>
> > 
> > wrote:
> > >> Hmmm, that sounds like a sufficient solution indeed, very good idea,
> > 
> > thanks.
> > 
> > >> Is there any scale/slope and offset/intercept tags defined in geotiff
> > >> ?
> > > 
> > > Martin,
> > > 
> > > GDAL supports saving this style of metadata in a private tag as
> > > 
> > > defined at:
> > >   http://www.awaresystems.be/imaging/tiff/tifftags/gdal_metadata.html
> > > 
> > > To do so with the GDAL API use the SetOffset and SetScale methods
> > 
> > > on the GDALRasterBand:
> > http://www.gdal.org/classGDALRasterBand.html#44e23beb3418c44a89d25ea70820
> > 7fe1
> > 
> > Thanks for the link. Unfortunately, I'm using the python interface with
> > gdal
> > 1.6.2 (since a few minutes, instead of 1.5.3), and the SetOffset/SetScale
> > methods are not there.
> > 
> > I'll use the gdal private tags instead then...
> > 
> > > I should note that in theory the TIFF specification allows a
> > > mix of sample types, but in practice this is not done in the
> > > real world, and libtiff does not support it.
> > > 
> > > GDAL *does* support reading mixed band types from a variety
> > > of file formats, but not TIFF.  As noted, AddBand() can be used
> > > in a few format cases to create mixed band types though this is
> > > rarely done.
> > 
> > Thanks for the explanation. We might jump over to netcdf4 if geotiff
> > becomes too
> > limited.
> > 
> > 
> > Best regards,
> > Martin
> > 
> > -----BEGIN PGP SIGNATURE-----
> > Version: GnuPG v1.4.9 (GNU/Linux)
> > Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/
> > 
> > iQEcBAEBAgAGBQJMYUypAAoJEBdvyODiyJI4kA0IALDDzDRQQl/ZrwLAo2cXTpeN
> > 3M0Mu4J5V7KNEFHaT95Hy0te+D/jLP7g7iEsJcTBuoQwoK3qBQBbgzUBIf0xMeZt
> > HBGoU9LCpBaZS38W/8oYri2o6nUJO8ZUrdgLlELrGsC/syVKEiIdrf8puOAiJ3pi
> > y5IRaYegjcNi8paRDCBD9cuedB2lnQJYKVOglh2h0pBJDa3bPbvUNrqXjjLCJls3
> > Eor9Vt2FVEMajcSSMz+AdnMz6gxzvMzj+0oM17WQDB4DGPTJ6BFjDp3UslLL0ldM
> > KcAQIt5s2FVLqqEGue/DwMlbLG4pXuz6KnIFY/+U/tMeVWjcXfnvFQIJveI4pNk=
> > =ce+j
> > -----END PGP SIGNATURE-----
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ytrapaet at hotmail.com  Tue Aug 10 18:46:14 2010
From: ytrapaet at hotmail.com (m k)
Date: Tue Aug 10 18:47:18 2010
Subject: [gdal-dev] GDAL equivalent of ArcGIS's focal statistics raster
	interpolation?
In-Reply-To: <201008101917.25449.even.rouault@mines-paris.org>
References: <4C60FC5F.50204@smhi.se> <4C614CA9.9030408@smhi.se>,
	<AANLkTin88g7f3WnWuYM=deYsHx_3ru-PGE+KTh3coV4Z@mail.gmail.com>,
	<201008101917.25449.even.rouault@mines-paris.org>
Message-ID: <BAY119-W68F592268B13D4467C8F4D1950@phx.gbl>


Much of my GIS vocabulary comes from ArcGIS. ArcGIS has a Spatial Analyst Tool called Focal Statistics. It basically "blurs" the raster by redefining cells based on a search area (either circle or square), and the values that occur in these surroundings (you can also control how big the area is with a parameter). I've found this process useful to prepare a raster for hillshading.
I am wondering if there is an equivalent tool in the GDAL library?
Thank you
-m 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100810/191f1e31/attachment.html
From jluis at ualg.pt  Tue Aug 10 22:05:57 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Aug 10 22:06:28 2010
Subject: [gdal-dev] errors compiling r20250
Message-ID: <4C620585.1040107@ualg.pt>

Hi,

I'm getting these compiling errors. I did build the trunk version from 
yesterday without any problem

c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(274) : error 
C2143: syntax error : missing ';' before '*'
c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(274) : error 
C4430: missing type specifier - int assumed. Note: C++ does not support 
default-int
c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(274) : error 
C4430: missing type specifier - int assumed. Note: C++ does not support 
default-int
c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(275) : error 
C2146: syntax error : missing ';' before identifier 'oParser'
c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(275) : error 
C4430: missing type specifier - int assumed. Note: C++ does not support 
default-int
c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(275) : error 
C4430: missing type specifier - int assumed. Note: C++ does not support 
default-int
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual 
Studio 10.0\VC\BIN\cl.EXE"' : return code '0x2'

Joaquim
From warmerdam at pobox.com  Wed Aug 11 00:32:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug 11 00:32:53 2010
Subject: [gdal-dev] errors compiling r20250
In-Reply-To: <4C620585.1040107@ualg.pt>
References: <4C620585.1040107@ualg.pt>
Message-ID: <AANLkTikGbghLL9EHZcgFhAVzXxxnnLJKW2=b8vMbBKL8@mail.gmail.com>

On Tue, Aug 10, 2010 at 10:05 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> Hi,
>
> I'm getting these compiling errors. I did build the trunk version from
> yesterday without any problem
>
> c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(274) : error
> C2143: syntax error : missing ';' before '*'

Joaquim / Even,

I have traced this to the inclusion of gmlutils.cpp in the default
build list for the gml driver.  gmlutils.cpp include gmlreaderp.h
even when neither expat nor xerces are available.  This normally
would not happen in this case.

I suspect that gmlutils.cpp should either be altered to not depend
on gmlreaderp.h or it should be in the list of objects files only
included when xerces or expat are available.

However, in the meantime, I have done a hacky fix in r20251
to gmlreaderp.h to make it build (after a fashion) without either
expat or xerces.

So - hopefully - things should build again from svn.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From even.rouault at mines-paris.org  Wed Aug 11 02:05:44 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 11 02:05:52 2010
Subject: [gdal-dev] errors compiling r20250
In-Reply-To: <AANLkTikGbghLL9EHZcgFhAVzXxxnnLJKW2=b8vMbBKL8@mail.gmail.com>
References: <4C620585.1040107@ualg.pt>
	<AANLkTikGbghLL9EHZcgFhAVzXxxnnLJKW2=b8vMbBKL8@mail.gmail.com>
Message-ID: <201008110805.44596.even.rouault@mines-paris.org>

Thanks for having fixed this. I have now added a specific header file for 
gmlutils.cpp that should avoid those unwanted dependencies.

Le mercredi 11 ao?t 2010 06:32:51, Frank Warmerdam a ?crit :
> On Tue, Aug 10, 2010 at 10:05 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> > Hi,
> > 
> > I'm getting these compiling errors. I did build the trunk version from
> > yesterday without any problem
> > 
> > c:\programs\gdaltrunk\gdal\ogr\ogrsf_frmts\gml\gmlreaderp.h(274) : error
> > C2143: syntax error : missing ';' before '*'
> 
> Joaquim / Even,
> 
> I have traced this to the inclusion of gmlutils.cpp in the default
> build list for the gml driver.  gmlutils.cpp include gmlreaderp.h
> even when neither expat nor xerces are available.  This normally
> would not happen in this case.
> 
> I suspect that gmlutils.cpp should either be altered to not depend
> on gmlreaderp.h or it should be in the list of objects files only
> included when xerces or expat are available.
> 
> However, in the meantime, I have done a hacky fix in r20251
> to gmlreaderp.h to make it build (after a fashion) without either
> expat or xerces.
> 
> So - hopefully - things should build again from svn.
> 
> Best regards,
From rajjad at gmail.com  Wed Aug 11 02:14:01 2010
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed Aug 11 02:14:09 2010
Subject: [gdal-dev] unable to append data to orale spatial
Message-ID: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>

Hi list,

I inserted a shape file in oracle 11g, now I have another shape file
with exactly same attributes, I`m using the -append option but it
seems the new shapefile wont get appended to the table, there seems to
be some problem related to the spatial index because data in both
shape files does not come under same spatial extent, is there anyway
to tell gdal not to create spatial index when data is being inserted
and when all the data has been inserted we create the spatial index
manualy?

regards,
Imran



-- 
I.R
From P.Halls at york.ac.uk  Wed Aug 11 02:25:44 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Aug 11 02:27:42 2010
Subject: [gdal-dev] unable to append data to orale spatial
In-Reply-To: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>
References: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>
Message-ID: <4C624268.4030609@york.ac.uk>

Imran,

    in the documentation for the OCI Driver it says clearly that the spatial 
extent and SDO_GEOM_METADATA entries are not updated when using append mode and 
that it is up to the caller to manage these.

    It is actually quite easy to code for this, but does require an SQLExecute 
to handle SDO_GEOM_METADATA.  I simply generate this on the fly, along with the 
SQL to update the spatial index.

Best wishes,

Peter

Imran Rajjad wrote:
> Hi list,
> 
> I inserted a shape file in oracle 11g, now I have another shape file
> with exactly same attributes, I`m using the -append option but it
> seems the new shapefile wont get appended to the table, there seems to
> be some problem related to the spatial index because data in both
> shape files does not come under same spatial extent, is there anyway
> to tell gdal not to create spatial index when data is being inserted
> and when all the data has been inserted we create the spatial index
> manualy?
> 
> regards,
> Imran
> 
> 
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From rajjad at gmail.com  Wed Aug 11 02:32:02 2010
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed Aug 11 02:32:03 2010
Subject: [gdal-dev] unable to append data to orale spatial
In-Reply-To: <4C624268.4030609@york.ac.uk>
References: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>
	<4C624268.4030609@york.ac.uk>
Message-ID: <AANLkTikthQWsPt_C8iUmHYrtsLq1jYxuqJPWMz3aXHdC@mail.gmail.com>

Hi,

yes I figured that out, for now I just drop the index added initialy
and I append new data to the table, though I`m not very optimistic
about not getting any more trouble when publish this table in
geoserver.

regards,
Imran

On Wed, Aug 11, 2010 at 11:25 AM, Peter J Halls <P.Halls@york.ac.uk> wrote:
> Imran,
>
> ? in the documentation for the OCI Driver it says clearly that the spatial
> extent and SDO_GEOM_METADATA entries are not updated when using append mode
> and that it is up to the caller to manage these.
>
> ? It is actually quite easy to code for this, but does require an SQLExecute
> to handle SDO_GEOM_METADATA. ?I simply generate this on the fly, along with
> the SQL to update the spatial index.
>
> Best wishes,
>
> Peter
>
> Imran Rajjad wrote:
>>
>> Hi list,
>>
>> I inserted a shape file in oracle 11g, now I have another shape file
>> with exactly same attributes, I`m using the -append option but it
>> seems the new shapefile wont get appended to the table, there seems to
>> be some problem related to the spatial index because data in both
>> shape files does not come under same spatial extent, is there anyway
>> to tell gdal not to create spatial index when data is being inserted
>> and when all the data has been inserted we create the spatial index
>> manualy?
>>
>> regards,
>> Imran
>>
>>
>>
>
> --
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806 ? ? Fax: 01904 433740
> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
> This message has the status of a private and personal communication
> --------------------------------------------------------------------------------
>



-- 
I.R
From P.Halls at york.ac.uk  Wed Aug 11 03:21:13 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Aug 11 03:21:19 2010
Subject: [gdal-dev] GDAL equivalent of ArcGIS's focal statistics raster
	interpolation?
In-Reply-To: <BAY119-W68F592268B13D4467C8F4D1950@phx.gbl>
References: <4C60FC5F.50204@smhi.se> <4C614CA9.9030408@smhi.se>,
	<AANLkTin88g7f3WnWuYM=deYsHx_3ru-PGE+KTh3coV4Z@mail.gmail.com>,
	<201008101917.25449.even.rouault@mines-paris.org>
	<BAY119-W68F592268B13D4467C8F4D1950@phx.gbl>
Message-ID: <4C624F69.5020908@york.ac.uk>

When you talk of the ArcGIS FocalStatistics tool, to which statistics do you refer?

ArcGIS Spatial Analyst is built on C Dana Tomlin's Map Algebra and the ArcGIS 
Workstation command line implementation 'Grid Algebra'.  In Map Algebra, Focal 
functions operate on an immediate neighbourhood of specified size, yielding a 
result which is stored in the output 'focal' or central cell.  FocalStatistics 
provides a single tool to deliver the functions FocalMean, FocalMedian, 
FocalMinimum, FocalMaximum, FocalMinority, FocalMajority and FocalRange.

You talk of 'blurring' the raster, however each of these functions has a 
specific purpose related to its result - FocalMean and FocalMedian, for example, 
deliver a smoothing operation; FocalRange delivers what is, in effect, a measure 
of the smoothness of the neighbourhood; and so on.

If you are writing a raster model, for example, using GDAL to manage the data, 
then you can implement any of these when using GDAL, but you will not find GDAL 
functions ready for you: GDAL provides you with the essential tools by which to 
access and manipulate raster data - read and write, transformation, etc., but it 
is up to you what you do at cell level.  GDAL is not a GIS, however, and 
therefore does not provide the same range of tools as ArcGIS - which, for 
example, incorporates and uses GDAL internally for some raster data access.

If you need to implement such a model, then I would urge you to read Tomlin's 
papers first, so that you understand what it is that you have been using in 
ArcGIS.  Start with the book 'Geographic Information Systems and Cartographic 
Modelling', C Dana Tomlin, 1990, Eaglesfield Cliffs NJ: Prentice Hall.

Best wishes,

Peter

m k wrote:
> Much of my GIS vocabulary comes from ArcGIS. ArcGIS has a Spatial Analyst Tool called Focal Statistics. It basically "blurs" the raster by redefining cells based on a search area (either circle or square), and the values that occur in these surroundings (you can also control how big the area is with a parameter). I've found this process useful to prepare a raster for hillshading.
> I am wondering if there is an equivalent tool in the GDAL library?
> Thank you
> -m 		 	   		  
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From antonio.rocha at deimos.com.pt  Wed Aug 11 03:41:05 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Wed Aug 11 03:41:07 2010
Subject: [gdal-dev] Retrieve number of layers with gdalpy
Message-ID: <4C625411.9070900@deimos.com.pt>

Greetings

I have a file Geotiff format (and other in GRIB) and I need to know how 
many layers of data I have in each one of them by using gdalPy. is it 
possible? (I don't want to use gdalinfo , I just want to get this value 
directly)

Thanks
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5356 (20100810) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From cfab13 at hotmail.fr  Wed Aug 11 04:29:03 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Wed Aug 11 04:29:06 2010
Subject: [gdal-dev] RE: [GDAL_TRANSLATE]Problem with colorimetry
In-Reply-To: <AANLkTi=VbK-zmWTfnOzBDcOAuPn+QtXW1vDpg1Ug=7=b@mail.gmail.com>
References: <1280837933426-5368059.post@n2.nabble.com>
	<AANLkTin3DEaV_tKQTX9Pzacbtt0tbZNLN1GRO-MmpCZP@mail.gmail.com>
	<1280848012805-5368754.post@n2.nabble.com>
	<AANLkTi=VbK-zmWTfnOzBDcOAuPn+QtXW1vDpg1Ug=7=b@mail.gmail.com>
Message-ID: <SNT122-W50119513909AF6CD1959C4BE960@phx.gbl>



Hi

First of all, Thanks a lot: it works!

I've run those commands line:

/*For all pictures => it's a little bit repetitive:
gdal_translate -of GTiff -expand RGB -co compress=lzw SC25_TOPO_0850_6470_L93.tif 0850_6470.tif

gdalbuildvrt truc.vrt *.tif

gdal_translate -of GTiff truc.vrt truc.tif

But maybe you can explain somme things to me:
- what version of gdal, reports the issue?

- What does the option RGB do?

- What is PCT2RGB?

Best Regards
Fab

Date: Tue, 10 Aug 2010 09:01:36 -0700
From: ml-node+5393675-1188735875-280951@n2.nabble.com
To: cfab13@hotmail.fr
Subject: Re: [GDAL_TRANSLATE]Problem with colorimetry



Fab,



I found the problem.

There were some differences in color tables of your images.
gdalbuildvrt application from the latest GDAL version reports the issue
when you try to build the vrt file. You're advised to preprocess your
rasters with other tools, such as pct2rgb.py or "gdal_translate -expand
RGB" to operate gdalbuildvrt on RGB rasters instead.



The reason the red areas were occuring in different areas is that gdalbuildvrt considers only the first file's color table.

On Tue, Aug 3, 2010 at 8:36 PM, Tacot <[hidden email]> wrote:



I think more about the value of data.

http://osgeo-org.1803224.n2.nabble.com/file/n5368754/PixelRed.jpg



But it's not always the picture on the right which pixels become red; it can

be also the picture on the left.

I have the felling it depends on the range of merging.

--

View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5368754.html


Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________

gdal-dev mailing list

[hidden email]

http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/ 
+91-9494447584
17.2416N 80.1426E


_______________________________________________

gdal-dev mailing list

[hidden email]

http://lists.osgeo.org/mailman/listinfo/gdal-dev





View message @ http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5393675.html


To unsubscribe from Re: [GDAL_TRANSLATE]Problem with colorimetry, click here.


 		 	   		  
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5411388.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/b5917f43/attachment.html
From chaitanya.ch at gmail.com  Wed Aug 11 05:37:16 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 11 05:37:21 2010
Subject: [gdal-dev] RE: [GDAL_TRANSLATE]Problem with colorimetry
In-Reply-To: <SNT122-W50119513909AF6CD1959C4BE960@phx.gbl>
References: <1280837933426-5368059.post@n2.nabble.com>
	<AANLkTin3DEaV_tKQTX9Pzacbtt0tbZNLN1GRO-MmpCZP@mail.gmail.com>
	<1280848012805-5368754.post@n2.nabble.com>
	<AANLkTi=VbK-zmWTfnOzBDcOAuPn+QtXW1vDpg1Ug=7=b@mail.gmail.com>
	<SNT122-W50119513909AF6CD1959C4BE960@phx.gbl>
Message-ID: <AANLkTi=4Bz1X0dyC4Pcee68EXyQ587CdqTXSqvGJKbXK@mail.gmail.com>

Tacot,

You could have used a small shell script like this for converting all the
tif files.
for f in *.tif; do echo "$f -> new_$f"; gdal_translate -of GTiff -expand RGB
-co compress=lzw $f new_$f; done

The issue is reported as a warning in the trunk version of GDAL. It will
appear in gdal-1.8.0

Your images had only one band of 8-bit pixels.  The colors are interpreted
using a color table.  You can see it in the output of gdalinfo.  By using
the -expand RGB option in gdal_translate, you are creating a new tiff with
three bands, one each for Red, Green and Blue colors.  This way, all the
image files will have the same values for any color.  Note that your color
table also had the alpha channel, but I ignored it since all of them were
255.

Refer to http://www.gdal.org/gdal_utilities.html for documentation on
various gdal utilities.

On Wed, Aug 11, 2010 at 1:59 PM, Tacot <cfab13@hotmail.fr> wrote:

> Hi
>
> First of all, Thanks a lot: it works!
>
> I've run those commands line:
>
> /*For all pictures => it's a little bit repetitive:
> *gdal_translate -of GTiff -expand RGB -co compress=lzw
> SC25_TOPO_0850_6470_L93.tif 0850_6470.tif
>
> gdalbuildvrt truc.vrt *.tif
>
>
> gdal_translate -of GTiff truc.vrt truc.tif
> *
>
> But maybe you can explain somme things to me:
> - what version of gdal, reports the issue?
>
> - What does the option RGB do?
>
> - What is PCT2RGB?
>
> Best Regards
> Fab
>
> ------------------------------
> Date: Tue, 10 Aug 2010 09:01:36 -0700
> From: [hidden email]<http://user/SendEmail.jtp?type=node&node=5411388&i=0>
> To: [hidden email] <http://user/SendEmail.jtp?type=node&node=5411388&i=1>
> Subject: Re: [GDAL_TRANSLATE]Problem with colorimetry
>
>
> Fab,
>
> I found the problem.
> There were some differences in color tables of your images. gdalbuildvrt
> application from the latest GDAL version reports the issue when you try to
> build the vrt file. You're advised to preprocess your rasters with other
> tools, such as pct2rgb.py or "gdal_translate -expand RGB" to operate
> gdalbuildvrt on RGB rasters instead.
>
> The reason the red areas were occuring in different areas is that
> gdalbuildvrt considers only the first file's color table.
>
> On Tue, Aug 3, 2010 at 8:36 PM, Tacot <[hidden email]> wrote:
>
>
> I think more about the value of data.
> http://osgeo-org.1803224.n2.nabble.com/file/n5368754/PixelRed.jpg
>
> But it's not always the picture on the right which pixels become red; it
> can
> be also the picture on the left.
> I have the felling it depends on the range of merging.
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5368754.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
>  View message @
> http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5393675.html
> To unsubscribe from Re: [GDAL_TRANSLATE]Problem with colorimetry, click
> here.
>
>
> ------------------------------
> View this message in context: RE: [GDAL_TRANSLATE]Problem with colorimetry<http://osgeo-org.1803224.n2.nabble.com/GDAL-TRANSLATE-Problem-with-colorimetry-tp5368059p5411388.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1803224.n2.nabble.com/GDAL-Dev-f2022644.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/df9d0e32/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Aug 11 05:49:05 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 11 05:49:08 2010
Subject: [gdal-dev] Retrieve number of layers with gdalpy
In-Reply-To: <4C625411.9070900@deimos.com.pt>
References: <4C625411.9070900@deimos.com.pt>
Message-ID: <AANLkTi=HF7jBYAR4zMhn4wLjH6N0UzMtbrhsBTj7RLXB@mail.gmail.com>

Ant?nio,

GDALDataset::GetRasterCount doesn't have the same interface in Python. You
can get the value using the GDALDataset's member variable RasterCount in
Python.
Example:
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py?rev=19928#L764

2010/8/11 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Greetings
>
> I have a file Geotiff format (and other in GRIB) and I need to know how
> many layers of data I have in each one of them by using gdalPy. is it
> possible? (I don't want to use gdalinfo , I just want to get this value
> directly)
>
> Thanks
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5356 (20100810) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/4cd321ab/attachment.html
From gisxperts at web.de  Wed Aug 11 06:42:11 2010
From: gisxperts at web.de (Hannes Reuter)
Date: Wed Aug 11 06:42:10 2010
Subject: [gdal-dev] GDAL equivalent of ArcGIS's focal statistics,
	raster	interpolati
Message-ID: <4C627E83.7060601@web.de>

Dear Mxxxx,

I programmed some of my recent zonalstats/DOCELL/IFTHENELSE (AG slang) 
work in numpy/scipys functionality for terrain analysis.

Have a look there, and in combination with gdal its rather 
straightforward. The only problem you might run into is that at one 
stage you need to implement tiling as your memory might not be able to 
fit your dem into it.

Cheers hannes


From jasonbeverage at gmail.com  Wed Aug 11 08:45:38 2010
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Wed Aug 11 08:46:00 2010
Subject: [gdal-dev] Speed up MrSid warping
In-Reply-To: <AANLkTikKPfCG1EDxfLLftEpKit4ESoecwUsKqYq3JPrw@mail.gmail.com>
References: <AANLkTinOEpyM5JgZ6ci-UKDVsNkQBMgAMEKBj3TV8gS8@mail.gmail.com> 
	<AANLkTikKPfCG1EDxfLLftEpKit4ESoecwUsKqYq3JPrw@mail.gmail.com>
Message-ID: <AANLkTikV8nrra5Qqgq6zZqkUO=X0f-iN7=H5u1Y3C=1d@mail.gmail.com>

Hi Frank,

Thanks for the tips, I'll tinker around and try to run some tests with
GDAL_ONE_BIG_READ and try to get things working so that the MrSid
isn't wrapped in a VRT and see if that helps.

Thanks!

Jason

On Sat, Aug 7, 2010 at 9:25 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Fri, Aug 6, 2010 at 11:34 AM, Jason Beverage <jasonbeverage@gmail.com> wrote:
>> Hi all,
>>
>> I have quite a few MrSid files that are in UTM that I want to mosaic
>> together into some epsg:4326 tiles. ?I've written some python scripts
>> to produce the appropriate gdal_warp commands to create the tiles, but
>> they are running extremely slow.
>>
>> I've read various mailing list posts and blogs about different options
>> for MrSid like this one:
>> http://priour.wordpress.com/2007/01/09/massive-performance-improvements-in-converting-mrsid-files/
>> which highlights using GDAL_FORCE_CACHING = YES to speed up a
>> gdal_translate when using MrSids. ?I've also read about using
>> GDAL_ONE_BIG_READREAD to speed things up in MapServer. ?Which option,
>> or any other options, would be helpful for gdal_warp?
>
> Jason,
>
> Generally speaking gdalwarp tries to read in big chunks, and it would be
> beneficial to enable GDAL_ONE_BIG_READ to on and avoid caching.
> Caching is more beneficial when doing lots of little reads.
>
>> Also, my MrSids are wrapped in VRTs to provide coordinate system info.
>> ?If I use the VRTs will the GDAL_FORCE_CACHING and GDAL_ONE_BIGREAD
>> options be used?
>
> When access is done through a VRT it forces access
> at a smaller chunk size which can be at least somewhat
> painful for formats like mrsid for which each read is quite
> expensive. ?You might want to consider ways of associating
> the coordinate system without using the VRT. ?Note that
> gdalwarp does have a -s_srs switch to set the source
> coordinate system if it is missing or wrong on the source
> file.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Programmer for Rent
>
From jrepetto at free.fr  Wed Aug 11 09:34:29 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Aug 11 09:35:03 2010
Subject: [gdal-dev] directory for ECW tmp files
In-Reply-To: <49F21AF3.20704@gmx.net>
References: <49F21AF3.20704@gmx.net>
Message-ID: <4C62A6E5.7040102@free.fr>

Le 24/04/2009 22:02, Armin Burger a ?crit :
> Hi everybody
>
> does anybody know if the tools like gdal_translate have a config
> parameter that allows to specify the directory used for the tmp files
> when creating ECW files? I made some tests on Linux and no environment
> vars like TMP, TEMP or TMPDIR were taken into account when creating the
> ECW files. The temporary files were always written to the same dir as
> the final ECW file.
>
> Greetings
>
> Armin

Hi Armin and everybody,

One year after you, I have the same problem. Have you found an answer to 
this question ?

Jean-Claude
From discoursemap at live.com  Wed Aug 11 10:37:48 2010
From: discoursemap at live.com (Discourse Maps)
Date: Wed Aug 11 10:38:50 2010
Subject: [gdal-dev] ArcGIS 10
Message-ID: <SNT130-w36B99FDD724654FAD55538BC960@phx.gbl>


I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.  If this is true, does that mean that users will not have to install the various Python library bindings GDAL, numpy, etc. after a full Arc10 install? 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/5b8eebc1/attachment.html
From a.neumann at carto.net  Wed Aug 11 11:28:48 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Aug 11 11:28:50 2010
Subject: [gdal-dev] No Interlis format support after recent svn update
Message-ID: <43157.193.246.86.39.1281540528.squirrel@webmail.carto.net>

Hi,

For some reasons, after an SVN update, I can't use the Interlis format
anymore. ogrinfo --formats doesn't list the Interlis 1/2 formats as
supported.

Luckily I still have an older installation which I can use for my data
imports, but I would like to get it working again with the SVN version.

What could be missing? Xerces is listed as supported by the configure
script and ili2c.jar is also present in /usr/bin or in the jvm/lib
directory.

Any help/ideas would be much appreciated.

Thanks,
Andreas

-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From jukka.rahkonen at mmmtike.fi  Wed Aug 11 11:47:34 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Aug 11 11:47:45 2010
Subject: [gdal-dev] Re: Geotiff with bands of different type
References: <4C60FC5F.50204@smhi.se>	<AANLkTikAtXJYXp49M8Q8pECZLRR2FcXi8ZFiV8pM3E_-@mail.gmail.com>	<4C610EEB.1040408@smhi.se>	<AANLkTi=dzQSBvL7b0XbTWinorDyckVUs0rhwWqZHtC49@mail.gmail.com>	<4C612DE8.2000705@smhi.se>	<op.vg7yau1dqw3wu1@titan>	<4C613519.20602@smhi.se>
	<AANLkTimRQ=4XcMyY0AFhuFKxLQGC_FZ1pZONZEx-AdSu@mail.gmail.com>
	<4C614CA9.9030408@smhi.se>
Message-ID: <loom.20100811T174351-228@post.gmane.org>

Martin Raspaud <martin.raspaud <at> smhi.se> writes:

> 
> 
> Frank Warmerdam skrev:
> > On Tue, Aug 10, 2010 at 7:16 AM, Martin Raspaud <martin.raspaud <at>
smhi.se> wrote:
> >> Hmmm, that sounds like a sufficient solution indeed, very good idea, 
thanks.
> >>
> >> Is there any scale/slope and offset/intercept tags defined in geotiff ?
> > 
> > Martin,

> 
> > I should note that in theory the TIFF specification allows a
> > mix of sample types, but in practice this is not done in the
> > real world, and libtiff does not support it.
> > 
> > GDAL *does* support reading mixed band types from a variety
> > of file formats, but not TIFF.  As noted, AddBand() can be used
> > in a few format cases to create mixed band types though this is
> > rarely done.
> 
> Thanks for the explanation. We might jump over to netcdf4 if 
geotiff becomes too
> limited.


Hi,

JPEG2000 for supports what you need I am sure you could create such images with
Kakadu tools. I don't know if GDAL JP2KAK driver handles it, though.

From jason.roberts at duke.edu  Wed Aug 11 12:49:06 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Aug 11 12:49:12 2010
Subject: [gdal-dev] ArcGIS 10
In-Reply-To: <SNT130-w36B99FDD724654FAD55538BC960@phx.gbl>
References: <SNT130-w36B99FDD724654FAD55538BC960@phx.gbl>
Message-ID: <026c01cb3975$1e0d8330$5a288990$@roberts@duke.edu>

ArcGIS 10 installs Python 2.6 and numpy 1.3.0. It does not install GDAL with
Python bindings. It includes a new Python module from ESRI called ArcPy.
This module supposedly provides the capability of reading and writing raster
layers in the form of numpy arrays, similar to GDAL's Python bindings. I
have not played with it much-only very briefly in Arc 9.4 Beta 2, when it
did not seem to work very well. If you search the Arc 10 online
documentation you can probably find more information.

 

In principle, the ArcPy module may make it less necessary those developing
for ArcGIS with Python to resort to GDAL to read or write rasters. If you do
wish to use GDAL from ArcGIS 9.3 or 10, you must contend with an important
bug in ArcGIS that affects GDAL; see http://trac.osgeo.org/gdal/ticket/3672.
I am corresponding with the ESRI developer who is investigating this. He
expressed an interest in fixing this in Arc 10 SP1 but has not committed to
doing so at this time.

 

To work around that, when creating Python-based geoprocessing tools that use
GDAL, you must disable the "Run Python script in process" option in the
ArcGIS UI. That has certain implications on performance but is probably fine
for most people. I developed a hack that works around the ArcGIS bug that
allows you to enable the "Run Python script in process" but unless you are
pretty savvy with Python (comfortable writing C extension modules) I do not
recommend that approach. If anyone is interested I can provide an example.

 

Best,

Jason

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Discourse Maps
Sent: Wednesday, August 11, 2010 10:38 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] ArcGIS 10

 

I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.  If
this is true, does that mean that users will not have to install the various
Python library bindings GDAL, numpy, etc. after a full Arc10 install? 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/b25c0123/attachment.html
From even.rouault at mines-paris.org  Wed Aug 11 13:11:59 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Aug 11 13:12:05 2010
Subject: [gdal-dev] No Interlis format support after recent svn update
In-Reply-To: <43157.193.246.86.39.1281540528.squirrel@webmail.carto.net>
References: <43157.193.246.86.39.1281540528.squirrel@webmail.carto.net>
Message-ID: <201008111911.59988.even.rouault@mines-paris.org>

Well, interlis is listed for me with latest SVN, so I guess it must be some 
detail on your side.

Did you do a full rebuild : 'make clean' and 'make' ?

In GDALmake.opt, is HAVE_XERCES set to yes ?

In the console, when compiling do you see that it goes into 
ogr/ogrsf_frmts/ili ? you can cd to that directore and make clean in it, and 
then retry a make from the top directory

Le mercredi 11 ao?t 2010 17:28:48, Andreas Neumann a ?crit :
> Hi,
> 
> For some reasons, after an SVN update, I can't use the Interlis format
> anymore. ogrinfo --formats doesn't list the Interlis 1/2 formats as
> supported.
> 
> Luckily I still have an older installation which I can use for my data
> imports, but I would like to get it working again with the SVN version.
> 
> What could be missing? Xerces is listed as supported by the configure
> script and ili2c.jar is also present in /usr/bin or in the jvm/lib
> directory.
> 
> Any help/ideas would be much appreciated.
> 
> Thanks,
> Andreas
From gisxperts at web.de  Wed Aug 11 13:19:59 2010
From: gisxperts at web.de (Hannes Reuter)
Date: Wed Aug 11 13:19:55 2010
Subject: [gdal-dev] ArcGIS 10
Message-ID: <4C62DBBF.1010607@web.de>

YES, numpy / gdal is under my Python 2.6/AG10site packages,

on the other hand, installing python, numpy, gdal, scipy is rather 
straightforward and should be done in less than 10 minutes.. ;-)

The only problem I was running in -> Vista and Win7 maschines need the 
newest version of gdal (larger than 1.6) to execute GDAL's readasarray, 
while ogr is fine.. .otherwise they just die, while all is fine on XP 
and linux. see 
http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-td4398401.html

hannes

hth


> I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.  If this is true, does that mean that users will not have to install the various Python library bindings GDAL, numpy, etc. after a full Arc10 install? 		 	   		  
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/5b8eebc1/attachment-0001.html

From jason.roberts at duke.edu  Wed Aug 11 15:51:41 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Aug 11 15:51:45 2010
Subject: [gdal-dev] ArcGIS 10
In-Reply-To: <4C62DBBF.1010607@web.de>
References: <4C62DBBF.1010607@web.de>
Message-ID: <000a01cb398e$9f22ac20$dd680460$@roberts@duke.edu>

Hannes,

When I installed ArcGIS Desktop 10 on an XP machine that had no Python
installed on it, the ArcGIS 10 installer created the directory
C:\Python26\ArcGIS10.0. Unlike a normal Python installation, all of the
Python files were under this C:\Python26\ArcGIS10.0 directory, rather than
C:\Python26 as is normally done.

In C:\Python26\ArcGIS10.0\Lib\site-packages there was a numpy subdirectory
(containing numpy 1.3.0) but there was no osgeo directory. The only place I
found evidence of GDAL was C:\Program
Files\ArcGIS\Desktop10.0\bin\gdal16.dll, which is expected as ArcGIS
increasingly uses GDAL for internal operations. As far as I can tell, there
were no GDAL Python bindings installed by ArcGIS. Are you seeing something
different?

Thanks,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Hannes Reuter
Sent: Wednesday, August 11, 2010 1:20 PM
To: discoursemap@live.com; gdal-dev@lists.osgeo.org
Subject: [gdal-dev] ArcGIS 10

YES, numpy / gdal is under my Python 2.6/AG10site packages,

on the other hand, installing python, numpy, gdal, scipy is rather 
straightforward and should be done in less than 10 minutes.. ;-)

The only problem I was running in -> Vista and Win7 maschines need the 
newest version of gdal (larger than 1.6) to execute GDAL's readasarray, 
while ogr is fine.. .otherwise they just die, while all is fine on XP 
and linux. see 
http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArr
ay-td4398401.html

hannes

hth


> I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.
If this is true, does that mean that users will not have to install the
various Python library bindings GDAL, numpy, etc. after a full Arc10
install? 		 	   		  
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/5b8eebc1/atta
chment-0001.html

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mauricio.dev at gmail.com  Wed Aug 11 17:03:50 2010
From: mauricio.dev at gmail.com (=?ISO-8859-1?Q?Maur=EDcio_de_Paulo?=)
Date: Wed Aug 11 17:03:54 2010
Subject: [gdal-dev] Raster Scaling
Message-ID: <AANLkTinwkDbGNPCh9TVV6VPkvY9gs4Uj9RxeTDtJdt=f@mail.gmail.com>

Hi list,
I've recently found an interest in scaling rasters. Mainly because of poor
georeferencing techniques that the users applyed a few years ago.
I've written a python script using gdal to alter the transformation
parameters thus scaling the map.
Is there any tool in gdaltools that does this kind of task? If now, Is there
any interest in using this (really simple) code?

-- 
1? Ten Mauricio - Engenheiro Cart?grafo
Chefe da Se??o de Processamento de Imagens
1? Divis?o de Levantamento
Ex?rcito Brasileiro - Bra?o Forte, M?o Amiga.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/8a2f707a/attachment.html
From ytrapaet at hotmail.com  Wed Aug 11 17:11:32 2010
From: ytrapaet at hotmail.com (m k)
Date: Wed Aug 11 17:11:35 2010
Subject: [gdal-dev] Raster Scaling
In-Reply-To: <AANLkTinwkDbGNPCh9TVV6VPkvY9gs4Uj9RxeTDtJdt=f@mail.gmail.com>
References: <AANLkTinwkDbGNPCh9TVV6VPkvY9gs4Uj9RxeTDtJdt=f@mail.gmail.com>
Message-ID: <BAY119-W35B18132B2266406F16000D1960@phx.gbl>


Im not sure if you are looking to rescale a whole map, or just individual rasters. If just rasters, I believe what you are looking for is: 
gdal_translate -outsize xsize[%] ysize[%] [file source] [file output]

http://www.gdal.org/gdal_translate.html

-Matt
Date: Wed, 11 Aug 2010 18:03:50 -0300
From: mauricio.dev@gmail.com
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Raster Scaling

Hi list,
I've recently found an interest in scaling rasters. Mainly because of poor georeferencing techniques that the users applyed a few years ago.
I've written a python script using gdal to alter the transformation parameters thus scaling the map.

Is there any tool in gdaltools that does this kind of task? If now, Is there any interest in using this (really simple) code?
-- 
1? Ten Mauricio - Engenheiro Cart?grafo
Chefe da Se??o de Processamento de Imagens

1? Divis?o de Levantamento
Ex?rcito Brasileiro - Bra?o Forte, M?o Amiga.


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/03eee2ca/attachment-0001.html
From fmarkham at gmail.com  Wed Aug 11 22:13:50 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Wed Aug 11 22:14:13 2010
Subject: [gdal-dev] ArcGIS 10
In-Reply-To: <-5553896686395738034@unknownmsgid>
References: <SNT130-w36B99FDD724654FAD55538BC960@phx.gbl>
	<-5553896686395738034@unknownmsgid>
Message-ID: <AANLkTin2-v365Lr8eBVTfq_vEKFOG5QqBsKfq2OepWac@mail.gmail.com>

Thanks for your encyclopedic response Jason!  If you don't mind
detailing the problems with running GDAL scripts in process, and your
work-around for avoiding it, I would be very interested.

Cheers,

Francis

On 12 August 2010 02:49, Jason Roberts <jason.roberts@duke.edu> wrote:
> ArcGIS 10 installs Python 2.6 and numpy 1.3.0. It does not install GDAL with
> Python bindings. It includes a new Python module from ESRI called ArcPy.
> This module supposedly provides the capability of reading and writing raster
> layers in the form of numpy arrays, similar to GDAL?s Python bindings. I
> have not played with it much?only very briefly in Arc 9.4 Beta 2, when it
> did not seem to work very well. If you search the Arc 10 online
> documentation you can probably find more information.
>
>
>
> In principle, the ArcPy module may make it less necessary those developing
> for ArcGIS with Python to resort to GDAL to read or write rasters. If you do
> wish to use GDAL from ArcGIS 9.3 or 10, you must contend with an important
> bug in ArcGIS that affects GDAL; see http://trac.osgeo.org/gdal/ticket/3672.
> I am corresponding with the ESRI developer who is investigating this. He
> expressed an interest in fixing this in Arc 10 SP1 but has not committed to
> doing so at this time.
>
>
>
> To work around that, when creating Python-based geoprocessing tools that use
> GDAL, you must disable the ?Run Python script in process? option in the
> ArcGIS UI. That has certain implications on performance but is probably fine
> for most people. I developed a hack that works around the ArcGIS bug that
> allows you to enable the ?Run Python script in process? but unless you are
> pretty savvy with Python (comfortable writing C extension modules) I do not
> recommend that approach. If anyone is interested I can provide an example.
>
>
>
> Best,
>
> Jason
>
>
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Discourse Maps
> Sent: Wednesday, August 11, 2010 10:38 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] ArcGIS 10
>
>
>
> I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.? If
> this is true, does that mean that users will not have to install the various
> Python library bindings GDAL, numpy, etc. after a full Arc10 install?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jason.roberts at duke.edu  Wed Aug 11 23:38:31 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Aug 11 23:38:36 2010
Subject: [gdal-dev] ArcGIS 10
In-Reply-To: <AANLkTin2-v365Lr8eBVTfq_vEKFOG5QqBsKfq2OepWac@mail.gmail.com>
References: <SNT130-w36B99FDD724654FAD55538BC960@phx.gbl>
	<-5553896686395738034@unknownmsgid>
	<AANLkTin2-v365Lr8eBVTfq_vEKFOG5QqBsKfq2OepWac@mail.gmail.com>
Message-ID: <003701cb39cf$d6b1a150$8414e3f0$@roberts@duke.edu>

Francis,

The ticket that I referenced (http://trac.osgeo.org/gdal/ticket/3672)
contains comprehensive details. In short: prior to ArcGIS 9.3, ArcGIS
executed Python geoprocessing tools by creating a separate python.exe
process with command line arguments specifying the script to run and its
parameters. In 9.3 ESRI introduced the capability of running the tools in
the ArcGIS process itself (ArcCatalog.exe or ArcMap.exe). The ArcGIS
processes embedded the Python interpreter using Python's C interface; see
the Python docs for good info about how embedding is done. This provided
performance advantages because a new process does not have to be created
every time a tool is run and because the communication that occurs between
the tool and the code that starts and monitors it does not have to occur as
cross-process calls.

Presumably to make things even faster, the ArcGIS processes instantiate a
single Python interpreter when they start up and reuse this interpreter each
time an in-process Python tool is run. But in between tool runs, a bug in
ArcGIS causes it to remove all of the items in Python's sys.modules
dictionary; apparently ArcGIS is calling Py_Initialize multiple times.
sys.modules maps the names of Python modules loaded when Python "import"
statements are executed to the actual objects representing the modules in
memory. When the next Python tool runs and tries to import modules, the
interpreter checks whether those modules are in sys.modules yet. Because
they are not, the interpreter loads them again. This produces unpredictable
results, depending on what the modules do.

For most modules, it works ok and may just result in memory leaks. (I have
not traced through enough of the Python interpreter source code to know for
sure about that.) But for GDAL and other complex Python packages, it causes
problems. In GDAL's case, several of the osgeo modules implemented in Python
code (.py files) have a relationship with modules implemented in C (.pyd
files). In particular, gdal_array.py calls functions implemented in
_gdal_array.pyd. _gdal_array.pyd stores a pointer to the gdal_array.py
module so it can access things defined in it. When ArcGIS clears out
sys.modules, gdal_array.py must be imported again and now exists at a new
memory address. _gdal_array.pyd is also imported again, but because of how
Python loads modules written in C, it's C "init" function is not called
again so it is stuck with the pointer to the old gdal_array.py.

Eventually the geoprocessing script wants to read or write data from or to a
raster. It calls Band.ReadAsArray or Band.WriteArray. Those functions
ultimately cause gdal_array.py (the new one) to call _gdal_array.pyd and
pass in a Band object that comes from the new .py files in sys.modules. But
_gdal_array.pyd is expecting a Band object from the old .py files and raises
an exception saying that the object passed in was not a Band instance. (See
the ticket for the exact message.)

My workaround is to save the contents of sys.modules to a cache after the
geoprocessing tool runs and restore it when the script starts up again,
basically:

import sys, _GeoEcoArcGISHelper
_GeoEcoArcGISHelper.LoadModulesFromCache()
try:
    # The real work of the script comes here.
    ...
finally:
    _GeoEcoArcGISHelper.AddModulesToCache(sys.modules.keys())

The cache is implemented in a module called GeoEcoArcGISHelper which written
in C. (The name of my Python project is GeoEco.) Here is a link to that file
in a svn repository:

http://code.nicholas.duke.edu/projects/mget/browser/MGET/Branches/Jason/Pyth
onPackage/src/GeoEco/_GeoEcoArcGISHelper.cpp

Pretty ugly but it seems to work. I reviewed it with the ESRI geoprocessor
developer that I'm working with; he agreed it was ugly but said it should
work. Normally with Python you are not supposed to tamper with sys.modules
directly but I looked at the Python 2.6.5 code and it seemed like it would
not have any ill effects. No promises, however...

Jason

-----Original Message-----
From: Francis Markham [mailto:fmarkham@gmail.com] 
Sent: Wednesday, August 11, 2010 10:14 PM
To: Jason Roberts
Cc: Discourse Maps; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ArcGIS 10

Thanks for your encyclopedic response Jason!  If you don't mind
detailing the problems with running GDAL scripts in process, and your
work-around for avoiding it, I would be very interested.

Cheers,

Francis

On 12 August 2010 02:49, Jason Roberts <jason.roberts@duke.edu> wrote:
> ArcGIS 10 installs Python 2.6 and numpy 1.3.0. It does not install GDAL
with
> Python bindings. It includes a new Python module from ESRI called ArcPy.
> This module supposedly provides the capability of reading and writing
raster
> layers in the form of numpy arrays, similar to GDAL?s Python bindings. I
> have not played with it much?only very briefly in Arc 9.4 Beta 2, when it
> did not seem to work very well. If you search the Arc 10 online
> documentation you can probably find more information.
>
>
>
> In principle, the ArcPy module may make it less necessary those developing
> for ArcGIS with Python to resort to GDAL to read or write rasters. If you
do
> wish to use GDAL from ArcGIS 9.3 or 10, you must contend with an important
> bug in ArcGIS that affects GDAL; see
http://trac.osgeo.org/gdal/ticket/3672.
> I am corresponding with the ESRI developer who is investigating this. He
> expressed an interest in fixing this in Arc 10 SP1 but has not committed
to
> doing so at this time.
>
>
>
> To work around that, when creating Python-based geoprocessing tools that
use
> GDAL, you must disable the ?Run Python script in process? option in the
> ArcGIS UI. That has certain implications on performance but is probably
fine
> for most people. I developed a hack that works around the ArcGIS bug that
> allows you to enable the ?Run Python script in process? but unless you are
> pretty savvy with Python (comfortable writing C extension modules) I do
not
> recommend that approach. If anyone is interested I can provide an example.
>
>
>
> Best,
>
> Jason
>
>
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Discourse Maps
> Sent: Wednesday, August 11, 2010 10:38 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] ArcGIS 10
>
>
>
> I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.?
If
> this is true, does that mean that users will not have to install the
various
> Python library bindings GDAL, numpy, etc. after a full Arc10 install?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From a.neumann at carto.net  Thu Aug 12 02:13:54 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu Aug 12 02:14:01 2010
Subject: [gdal-dev] No Interlis format support after recent svn update
In-Reply-To: <201008111911.59988.even.rouault@mines-paris.org>
References: <43157.193.246.86.39.1281540528.squirrel@webmail.carto.net>
	<201008111911.59988.even.rouault@mines-paris.org>
Message-ID: <38673.193.246.86.39.1281593634.squirrel@webmail.carto.net>

Hi Even,

Thank you for your hints. It seems to work again. From all of your
suggestions it was most likely the make clean in ogr/ogrsf_frmts/ili. I
think all other things were fine (the HAVE_XERCES was set to yes,
ogr/ogrsf_frmts/ili existed).

Anyway, all fine now.

Thanks for your help,
Andreas

On Wed, August 11, 2010 7:11 pm, Even Rouault wrote:
> Well, interlis is listed for me with latest SVN, so I guess it must be
> some
> detail on your side.
>
> Did you do a full rebuild : 'make clean' and 'make' ?
>
> In GDALmake.opt, is HAVE_XERCES set to yes ?
>
> In the console, when compiling do you see that it goes into
> ogr/ogrsf_frmts/ili ? you can cd to that directore and make clean in it,
> and
> then retry a make from the top directory
>
> Le mercredi 11 ao?t 2010 17:28:48, Andreas Neumann a ?crit :
>> Hi,
>>
>> For some reasons, after an SVN update, I can't use the Interlis format
>> anymore. ogrinfo --formats doesn't list the Interlis 1/2 formats as
>> supported.
>>
>> Luckily I still have an older installation which I can use for my data
>> imports, but I would like to get it working again with the SVN version.
>>
>> What could be missing? Xerces is listed as supported by the configure
>> script and ili2c.jar is also present in /usr/bin or in the jvm/lib
>> directory.
>>
>> Any help/ideas would be much appreciated.
>>
>> Thanks,
>> Andreas
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From rajjad at gmail.com  Thu Aug 12 03:16:15 2010
From: rajjad at gmail.com (Imran Rajjad)
Date: Thu Aug 12 03:16:17 2010
Subject: [gdal-dev] unable to append data to orale spatial
In-Reply-To: <4C624832.3080407@york.ac.uk>
References: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>
	<4C624268.4030609@york.ac.uk>
	<AANLkTikthQWsPt_C8iUmHYrtsLq1jYxuqJPWMz3aXHdC@mail.gmail.com>
	<4C624832.3080407@york.ac.uk>
Message-ID: <AANLkTik_bSBCU5TEbJ90x55iC=n2CqoqXNiHNOTSOT9M@mail.gmail.com>

hi,

I have appended the data but the -lco DIM=2 option does not seem to
make any effect, when I`m dumping records into my table, some of them
have sdo_gtype set to 3001 which is suppose to be 2001 and also an
extra Z cordinate is also appearing but I`m sure I have mentioned the
dimension, could there be a problem with the syntax here?


ogr2ogr -f OCI OCI:usr/pas@ip:port/db file.shp -append -skipfailure
-lco SRID=8307 -lco DIM=2 -lco GEOMETRY_NAME=GEOM -nln ASIA_POI




regards,
Imran

On Wed, Aug 11, 2010 at 11:50 AM, Peter J Halls <P.Halls@york.ac.uk> wrote:
> Imran,
>
> Imran Rajjad wrote:
>>
>> Hi,
>>
>> yes I figured that out, for now I just drop the index added initialy
>> and I append new data to the table, though I`m not very optimistic
>
> That is sensible: drop spatial index, update table, update SDO_GEOM_METADATA
> and recreate spatial index. ?There was a related bug in ArcGIS a version or
> two back where the workaround published by ESRI was to do this same
> sequence!
>
> Best wishes,
>
> Peter
>
>> about not getting any more trouble when publish this table in
>> geoserver.
>>
>> regards,
>> Imran
>>
>> On Wed, Aug 11, 2010 at 11:25 AM, Peter J Halls <P.Halls@york.ac.uk>
>> wrote:
>>>
>>> Imran,
>>>
>>> ?in the documentation for the OCI Driver it says clearly that the spatial
>>> extent and SDO_GEOM_METADATA entries are not updated when using append
>>> mode
>>> and that it is up to the caller to manage these.
>>>
>>> ?It is actually quite easy to code for this, but does require an
>>> SQLExecute
>>> to handle SDO_GEOM_METADATA. ?I simply generate this on the fly, along
>>> with
>>> the SQL to update the spatial index.
>>>
>>> Best wishes,
>>>
>>> Peter
>>>
>>> Imran Rajjad wrote:
>>>>
>>>> Hi list,
>>>>
>>>> I inserted a shape file in oracle 11g, now I have another shape file
>>>> with exactly same attributes, I`m using the -append option but it
>>>> seems the new shapefile wont get appended to the table, there seems to
>>>> be some problem related to the spatial index because data in both
>>>> shape files does not come under same spatial extent, is there anyway
>>>> to tell gdal not to create spatial index when data is being inserted
>>>> and when all the data has been inserted we create the spatial index
>>>> manualy?
>>>>
>>>> regards,
>>>> Imran
>>>>
>>>>
>>>>
>>> --
>>>
>>> --------------------------------------------------------------------------------
>>> Peter J Halls, GIS Advisor, University of York
>>> Telephone: 01904 433806 ? ? Fax: 01904 433740
>>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>>> This message has the status of a private and personal communication
>>>
>>> --------------------------------------------------------------------------------
>>>
>>
>>
>>
>
> --
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806 ? ? Fax: 01904 433740
> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
> This message has the status of a private and personal communication
> --------------------------------------------------------------------------------
>



-- 
I.R
From P.Halls at york.ac.uk  Thu Aug 12 03:37:45 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Aug 12 03:37:50 2010
Subject: [gdal-dev] unable to append data to orale spatial
In-Reply-To: <AANLkTik_bSBCU5TEbJ90x55iC=n2CqoqXNiHNOTSOT9M@mail.gmail.com>
References: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>	<4C624268.4030609@york.ac.uk>	<AANLkTikthQWsPt_C8iUmHYrtsLq1jYxuqJPWMz3aXHdC@mail.gmail.com>	<4C624832.3080407@york.ac.uk>
	<AANLkTik_bSBCU5TEbJ90x55iC=n2CqoqXNiHNOTSOT9M@mail.gmail.com>
Message-ID: <4C63A4C9.1070304@york.ac.uk>

Imran,

    is the initial table two or three dimensioned?

    Most of the shapefiles I've looked at have been generated by some ESRI 
product or other ... In my experience, shapefiles are usually x-y-z-m, so three 
dimensional geometry is a sensible default.

    It might be worth checking the OGR TRAC buglist ... I've a vague 
recollection that at some version or other there may have been an issue 
regarding appending a non-default coordinate dimension, but do not recall 
whether that was ogr2ogr - which I use rarely - or an issue when programming 
with the OGR API.

Best wishes,

Peter

Imran Rajjad wrote:
> hi,
> 
> I have appended the data but the -lco DIM=2 option does not seem to
> make any effect, when I`m dumping records into my table, some of them
> have sdo_gtype set to 3001 which is suppose to be 2001 and also an
> extra Z cordinate is also appearing but I`m sure I have mentioned the
> dimension, could there be a problem with the syntax here?
> 
> 
> ogr2ogr -f OCI OCI:usr/pas@ip:port/db file.shp -append -skipfailure
> -lco SRID=8307 -lco DIM=2 -lco GEOMETRY_NAME=GEOM -nln ASIA_POI
> 
> 
> 
> 
> regards,
> Imran
> 
> On Wed, Aug 11, 2010 at 11:50 AM, Peter J Halls <P.Halls@york.ac.uk> wrote:
>> Imran,
>>
>> Imran Rajjad wrote:
>>> Hi,
>>>
>>> yes I figured that out, for now I just drop the index added initialy
>>> and I append new data to the table, though I`m not very optimistic
>> That is sensible: drop spatial index, update table, update SDO_GEOM_METADATA
>> and recreate spatial index.  There was a related bug in ArcGIS a version or
>> two back where the workaround published by ESRI was to do this same
>> sequence!
>>
>> Best wishes,
>>
>> Peter
>>
>>> about not getting any more trouble when publish this table in
>>> geoserver.
>>>
>>> regards,
>>> Imran
>>>
>>> On Wed, Aug 11, 2010 at 11:25 AM, Peter J Halls <P.Halls@york.ac.uk>
>>> wrote:
>>>> Imran,
>>>>
>>>>  in the documentation for the OCI Driver it says clearly that the spatial
>>>> extent and SDO_GEOM_METADATA entries are not updated when using append
>>>> mode
>>>> and that it is up to the caller to manage these.
>>>>
>>>>  It is actually quite easy to code for this, but does require an
>>>> SQLExecute
>>>> to handle SDO_GEOM_METADATA.  I simply generate this on the fly, along
>>>> with
>>>> the SQL to update the spatial index.
>>>>
>>>> Best wishes,
>>>>
>>>> Peter
>>>>
>>>> Imran Rajjad wrote:
>>>>> Hi list,
>>>>>
>>>>> I inserted a shape file in oracle 11g, now I have another shape file
>>>>> with exactly same attributes, I`m using the -append option but it
>>>>> seems the new shapefile wont get appended to the table, there seems to
>>>>> be some problem related to the spatial index because data in both
>>>>> shape files does not come under same spatial extent, is there anyway
>>>>> to tell gdal not to create spatial index when data is being inserted
>>>>> and when all the data has been inserted we create the spatial index
>>>>> manualy?
>>>>>
>>>>> regards,
>>>>> Imran
>>>>>
>>>>>
>>>>>
>>>> --
>>>>
>>>> --------------------------------------------------------------------------------
>>>> Peter J Halls, GIS Advisor, University of York
>>>> Telephone: 01904 433806     Fax: 01904 433740
>>>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>>>> This message has the status of a private and personal communication
>>>>
>>>> --------------------------------------------------------------------------------
>>>>
>>>
>>>
>> --
>> --------------------------------------------------------------------------------
>> Peter J Halls, GIS Advisor, University of York
>> Telephone: 01904 433806     Fax: 01904 433740
>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>> This message has the status of a private and personal communication
>> --------------------------------------------------------------------------------
>>
> 
> 
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From rajjad at gmail.com  Thu Aug 12 03:47:31 2010
From: rajjad at gmail.com (Imran Rajjad)
Date: Thu Aug 12 03:47:33 2010
Subject: [gdal-dev] unable to append data to orale spatial
In-Reply-To: <4C63A4C9.1070304@york.ac.uk>
References: <AANLkTim1_9wtFg3itvAOtmY6228fuCRy5SgFyvFynpaB@mail.gmail.com>
	<4C624268.4030609@york.ac.uk>
	<AANLkTikthQWsPt_C8iUmHYrtsLq1jYxuqJPWMz3aXHdC@mail.gmail.com>
	<4C624832.3080407@york.ac.uk>
	<AANLkTik_bSBCU5TEbJ90x55iC=n2CqoqXNiHNOTSOT9M@mail.gmail.com>
	<4C63A4C9.1070304@york.ac.uk>
Message-ID: <AANLkTim8XeXYeYJw0bQmuTS7ryfv-A=xgH-Q4_PKe0vw@mail.gmail.com>

Hi,

the orignal table is 2 dimensioned, but the features I`m appending hav
3d, though I thought the -lco DIM=2 option would take care of that,
well it seems for now I have to convert 3d to 2d in Oracle 11g using
the method defined at
http://forums.oracle.com/forums/thread.jspa?messageID=960492&#960492
.. it has worked for me , but all this is too much time on the
consoles.

thanks a lot
regards,
Imran

On Thu, Aug 12, 2010 at 12:37 PM, Peter J Halls <P.Halls@york.ac.uk> wrote:
> Imran,
>
> ? is the initial table two or three dimensioned?
>
> ? Most of the shapefiles I've looked at have been generated by some ESRI
> product or other ... In my experience, shapefiles are usually x-y-z-m, so
> three dimensional geometry is a sensible default.
>
> ? It might be worth checking the OGR TRAC buglist ... I've a vague
> recollection that at some version or other there may have been an issue
> regarding appending a non-default coordinate dimension, but do not recall
> whether that was ogr2ogr - which I use rarely - or an issue when programming
> with the OGR API.
>
> Best wishes,
>
> Peter
>
> Imran Rajjad wrote:
>>
>> hi,
>>
>> I have appended the data but the -lco DIM=2 option does not seem to
>> make any effect, when I`m dumping records into my table, some of them
>> have sdo_gtype set to 3001 which is suppose to be 2001 and also an
>> extra Z cordinate is also appearing but I`m sure I have mentioned the
>> dimension, could there be a problem with the syntax here?
>>
>>
>> ogr2ogr -f OCI OCI:usr/pas@ip:port/db file.shp -append -skipfailure
>> -lco SRID=8307 -lco DIM=2 -lco GEOMETRY_NAME=GEOM -nln ASIA_POI
>>
>>
>>
>>
>> regards,
>> Imran
>>
>> On Wed, Aug 11, 2010 at 11:50 AM, Peter J Halls <P.Halls@york.ac.uk>
>> wrote:
>>>
>>> Imran,
>>>
>>> Imran Rajjad wrote:
>>>>
>>>> Hi,
>>>>
>>>> yes I figured that out, for now I just drop the index added initialy
>>>> and I append new data to the table, though I`m not very optimistic
>>>
>>> That is sensible: drop spatial index, update table, update
>>> SDO_GEOM_METADATA
>>> and recreate spatial index. ?There was a related bug in ArcGIS a version
>>> or
>>> two back where the workaround published by ESRI was to do this same
>>> sequence!
>>>
>>> Best wishes,
>>>
>>> Peter
>>>
>>>> about not getting any more trouble when publish this table in
>>>> geoserver.
>>>>
>>>> regards,
>>>> Imran
>>>>
>>>> On Wed, Aug 11, 2010 at 11:25 AM, Peter J Halls <P.Halls@york.ac.uk>
>>>> wrote:
>>>>>
>>>>> Imran,
>>>>>
>>>>> ?in the documentation for the OCI Driver it says clearly that the
>>>>> spatial
>>>>> extent and SDO_GEOM_METADATA entries are not updated when using append
>>>>> mode
>>>>> and that it is up to the caller to manage these.
>>>>>
>>>>> ?It is actually quite easy to code for this, but does require an
>>>>> SQLExecute
>>>>> to handle SDO_GEOM_METADATA. ?I simply generate this on the fly, along
>>>>> with
>>>>> the SQL to update the spatial index.
>>>>>
>>>>> Best wishes,
>>>>>
>>>>> Peter
>>>>>
>>>>> Imran Rajjad wrote:
>>>>>>
>>>>>> Hi list,
>>>>>>
>>>>>> I inserted a shape file in oracle 11g, now I have another shape file
>>>>>> with exactly same attributes, I`m using the -append option but it
>>>>>> seems the new shapefile wont get appended to the table, there seems to
>>>>>> be some problem related to the spatial index because data in both
>>>>>> shape files does not come under same spatial extent, is there anyway
>>>>>> to tell gdal not to create spatial index when data is being inserted
>>>>>> and when all the data has been inserted we create the spatial index
>>>>>> manualy?
>>>>>>
>>>>>> regards,
>>>>>> Imran
>>>>>>
>>>>>>
>>>>>>
>>>>> --
>>>>>
>>>>>
>>>>> --------------------------------------------------------------------------------
>>>>> Peter J Halls, GIS Advisor, University of York
>>>>> Telephone: 01904 433806 ? ? Fax: 01904 433740
>>>>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>>>>> This message has the status of a private and personal communication
>>>>>
>>>>>
>>>>> --------------------------------------------------------------------------------
>>>>>
>>>>
>>>>
>>> --
>>>
>>> --------------------------------------------------------------------------------
>>> Peter J Halls, GIS Advisor, University of York
>>> Telephone: 01904 433806 ? ? Fax: 01904 433740
>>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>>> This message has the status of a private and personal communication
>>>
>>> --------------------------------------------------------------------------------
>>>
>>
>>
>>
>
> --
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806 ? ? Fax: 01904 433740
> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
> This message has the status of a private and personal communication
> --------------------------------------------------------------------------------
>



-- 
I.R
From hmorkemo at gmail.com  Thu Aug 12 04:37:11 2010
From: hmorkemo at gmail.com (Helge Morkemo)
Date: Thu Aug 12 04:37:13 2010
Subject: [gdal-dev] CreateCopy/BuildOverviews produce strange colors
Message-ID: <AANLkTim86yhkmhp2GdP2gp02Ai6gsu1up7zmpDhi4jx+@mail.gmail.com>

Hi experts!

I'm trying to make a (lower quality) copy of a GeoTIFF file, and add
overviews to that copy.
It seems to work fine, BUT the resulting file has the colors messed up!
With JPEG_QUALITY=30, the colors seem to be "faded".
With JPEG_QUALITY=90, they're more "intense" than the original.
GDALINFO reports identical info for the input and output files (except for
the overviews and quality)

The complete code (VisualBasic 2010, 32bits):

        Dim gtiffdriver As Driver = Gdal.GetDriverByName("GTIFF")
        Dim viewfileoptions() As String = {"TFW=YES", "TILED=YES",
"BLOCKXSIZE=256", "BLOCKYSIZE=256",
                                            "COMPRESS=JPEG",
"JPEG_QUALITY=30", "PHOTOMETRIC=YCBCR",
                                            "INTERLEAVE=PIXEL",
                                            "PROFILE=GeoTIFF",
"BIGTIFF=IF_SAFER"}
        Dim inputdataset As Dataset = Gdal.Open(inputfile, Access
.GA_ReadOnly)
        Dim outputdataset As Dataset
 = gtiffdriver.CreateCopy(outputfile, inputdataset, 1, viewfileoptions,
Nothing, Nothing)
        outputdataset.BuildOverviews("GAUSS", overviews)
        outputdataset.FlushCache()
        outputdataset.Dispose()
1 or 0 in the strict parameter to CreateCopy makes no difference.
I've tested both the 1.7.x version and the trunk (18dev).
-
Helge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100812/38fe00b5/attachment.html
From ivan.lucena at pmldnet.com  Thu Aug 12 09:10:22 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Aug 12 09:10:25 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gQXJjR0lTIDEw?=
Message-ID: <20100812131022.11002.qmail@s466.sureserver.com>

Hannes,

I just did it!

Ingredients:

- ArcGIS 10
- Visual Studio.NET 2003 
- SWIG (swigwin-1.3.31) (or newer, maybe)
- GDAL source code (doesn't need to be the same version that Arc uses)

How to prepare:

- Build GDAL (see gdal.org)
- Set the variables SWIG and PYDIR on nmake.opt
- Set the path for the ArcGIS Python folder:

..\gdal> set PATH=E:\Python26\ArcGIS10.0;%PATH%

- Set the path for SWIG (obviously):

..\gdal> set PATH=<your swig folder>;%PATH%

- Build the GDAL Python wrapper:

..\gdal\swig> nmake -f makefile.vc python

- Generate the GDAL Python installer:

..\gdal\swig> cd python
..\gdal\swig\python> python setup.py bdist_wininst

- Run the installer:

..\gdal\swig\python> cd dist
..\gdal\swig\python\dist> GDAL-1.7.0.win32-py2.6.exe

- Open ArcMap again and click on the "Python window" icon 
or select "Geoprocessing/python" from the ArcMap menu

- To launch GDAL just type the usual:

>>> from osgeo import GDAL
>>> from osgeo import OGR

- VOILA

Alternative:

if you just download and run the GDAL-Python installer it probably is not going to find the ArcGIS's Python installation on the register. So you can ask someone to prepare one for you like I did.

Attention:

Again, you are going to be running two different versions of GDAL in ArcMap's Python command line!

Regards,

Ivan

>  -------Original Message-------
>  From: Hannes Reuter <gisxperts@web.de>
>  To: discoursemap@live.com, gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] ArcGIS 10
>  Sent: Aug 11 '10 12:19
>  
>  YES, numpy / gdal is under my Python 2.6/AG10site packages,
>  
>  on the other hand, installing python, numpy, gdal, scipy is rather
>  straightforward and should be done in less than 10 minutes.. ;-)
>  
>  The only problem I was running in -> Vista and Win7 maschines need the
>  newest version of gdal (larger than 1.6) to execute GDAL's readasarray,
>  while ogr is fine.. .otherwise they just die, while all is fine on XP
>  and linux. see
>  http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-td4398401.html
>  
>  hannes
>  
>  hth
>  
>  
>  > I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.??If this is true, does that mean that users will not have to install the various Python library bindings GDAL, numpy, etc. after a full Arc10 install? 	 	??	????	 	??
>  > -------------- next part --------------
>  > An HTML attachment was scrubbed...
>  > URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100811/5b8eebc1/attachment-0001.html
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From rigal at rapideye.de  Thu Aug 12 10:11:54 2010
From: rigal at rapideye.de (Matthieu Rigal)
Date: Thu Aug 12 10:32:42 2010
Subject: [gdal-dev] gdal.ReprojectImage error with gdal 1.7.1
Message-ID: <201008121611.55006.rigal@rapideye.de>

Hi guys,

I just upgraded my gdal version to 1.7.1 and I had a bad surprise figuring 
some of my scripts were not working anymore and I could quickly figure out 
where it came from : gdal.ReprojectImage is not working as it should...

I downloaded the reproject.py script from the autotest to see what is 
happening with the default tests you are also conducting.

Results:
reproject_1 success
reproject_2 4143 cs, failed

When I look at the images, the byte.tif is OK, the byte_4326 has a black 
border on its right. And the image I was reprojecting from 300*300 to 
5000*5000 was fully black !!!

Any one has an idea where it could come from ?
It looks a bit like bad memory management... I have python 2.6.2 here
I searched on the net and on the list, I could not find any similar issue...

Regards,
Matthieu

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_ag
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: 
Juergen Breitkopf 
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified
 
*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
 
The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From even.rouault at mines-paris.org  Thu Aug 12 10:45:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 12 10:45:19 2010
Subject: [gdal-dev] gdal.ReprojectImage error with gdal 1.7.1
In-Reply-To: <201008121611.55006.rigal@rapideye.de>
References: <201008121611.55006.rigal@rapideye.de>
Message-ID: <1281624310.4c6408f649848@webmail.free.fr>

Matthieu,

I'm not sure 100% whether this is the cause of the error you get (in my memory,
the test suite passed correctly for any recently released version), but I'd
suggest you upgrading to 1.7.2 that fixes
http://trac.osgeo.org/gdal/ticket/3458, which was a serious regression present
in 1.7.0 and 1.7.1 that could have caused what you observe.

Best regards,

Even

Selon Matthieu Rigal <rigal@rapideye.de>:

> Hi guys,
>
> I just upgraded my gdal version to 1.7.1 and I had a bad surprise figuring
> some of my scripts were not working anymore and I could quickly figure out
> where it came from : gdal.ReprojectImage is not working as it should...
>
> I downloaded the reproject.py script from the autotest to see what is
> happening with the default tests you are also conducting.
>
> Results:
> reproject_1 success
> reproject_2 4143 cs, failed
>
> When I look at the images, the byte.tif is OK, the byte_4326 has a black
> border on its right. And the image I was reprojecting from 300*300 to
> 5000*5000 was fully black !!!
>
> Any one has an idea where it could come from ?
> It looks a bit like bad memory management... I have python 2.6.2 here
> I searched on the net and on the list, I could not find any similar issue...
>
> Regards,
> Matthieu
>
> RapidEye AG
> Molkenmarkt 30
> 14776 Brandenburg an der Havel
> Germany
>
> Follow us on Twitter! www.twitter.com/rapideye_ag
>
> Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
> Management Board/Vorstand: Wolfgang G. Biedermann
> Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates:
> Juergen Breitkopf
> Commercial Register/Handelsregister Potsdam HRB 17 796
> Tax Number/Steuernummer: 048/100/00053
> VAT-Ident-Number/Ust.-ID: DE 199331235
> DIN EN ISO 9001 certified
>
> *************************************************************************
> Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
> Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
> E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
> Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
> die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
>
> The information in this e-mail is intended for the named recipients
> only. It may contain privileged and confidential information. If you
> have received this communication in error, any use, copying or
> dissemination of its contents is strictly prohibited. Please erase all
> copies of the message along with any included attachments and notify
> RapidEye AG or the sender immediately by telephone at the number
> indicated on this page.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From weixj2003ld at 163.com  Thu Aug 12 10:35:50 2010
From: weixj2003ld at 163.com (=?gbk?B?uMrL4KGjy7zUtg==?=)
Date: Thu Aug 12 10:51:01 2010
Subject: [gdal-dev] .hgt
Message-ID: <b5313b.10d01.12a66ba7751.Coremail.weixj2003ld@163.com>

I got a .hgt file,and do not know what is the format of it,and GDAL can read it?
Thk u .
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100812/8785f711/attachment.html
From chaitanya.ch at gmail.com  Thu Aug 12 12:32:09 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Aug 12 12:32:12 2010
Subject: [gdal-dev] .hgt
In-Reply-To: <b5313b.10d01.12a66ba7751.Coremail.weixj2003ld@163.com>
References: <b5313b.10d01.12a66ba7751.Coremail.weixj2003ld@163.com>
Message-ID: <AANLkTiniWUhBOB_dkC3ciPrAvj6X51LJHwLEwmvbcfD1@mail.gmail.com>

weixj2003ld,

The SRTMHGT driver in GDAL should be able to open that file.
http://www.gdal.org/frmt_various.html#SRTMHGT

2010/8/12 ????? <weixj2003ld@163.com>

> I got a .hgt file,and do not know what is the format of it,and GDAL can
> read it?
> Thk u .
>
>
> ------------------------------
> ??????????????? <http://mail.163.com/?from=fe1>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100812/e3075aec/attachment.html
From ahmettemiz88 at gmail.com  Thu Aug 12 14:25:34 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Thu Aug 12 14:25:36 2010
Subject: [gdal-dev] to get length of LINESTRING
Message-ID: <AANLkTi=yo0Vf=XFKrVqEkozHhwBvg-WO0rhfC=eXo=f_@mail.gmail.com>

hello

which function should I use to  get length of LINESTRING in gdal-java  ?

regards
From even.rouault at mines-paris.org  Thu Aug 12 15:05:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 12 15:05:24 2010
Subject: [gdal-dev] to get length of LINESTRING
In-Reply-To: <AANLkTi=yo0Vf=XFKrVqEkozHhwBvg-WO0rhfC=eXo=f_@mail.gmail.com>
References: <AANLkTi=yo0Vf=XFKrVqEkozHhwBvg-WO0rhfC=eXo=f_@mail.gmail.com>
Message-ID: <201008122105.21439.even.rouault@mines-paris.org>

http://gdal.org/java/org/gdal/ogr/Geometry.html#Length()

But only available in the developement version. Otherwise you have to compute 
it by yourself by examining the vertex coordinates

Le jeudi 12 ao?t 2010 20:25:34, ahmet temiz a ?crit :
> hello
> 
> which function should I use to  get length of LINESTRING in gdal-java  ?
> 
> regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From filippo.coro at alice.it  Fri Aug 13 03:15:02 2010
From: filippo.coro at alice.it (=?iso-8859-15?Q?Filippo_Cor=F2?=)
Date: Fri Aug 13 03:15:00 2010
Subject: [gdal-dev] problem install gdal1.7.1 and python
Message-ID: <op.vhc7rclanqr6om@filippo-pc.belkin>


Hi List


I'd like to use GDAL 1.7.1, but I can not install the package correctly.
Until now I used GDAL 1.6.0 with python 2.6 on windows xp sp3.

trying to install GDAL 1.7.1 I followed these steps:

- Downloaded gdal171.zip

- Makegdal build makefile project under VS2008 (creating c: \  
gdalwin32-1.7.1 with folders bin, date and related dll and exe)

- Setting environmental variable PATH,c: \ gdalwin32-1.7.1 \ bin   
GDAL_DATA,c: \ gdalwin32-1.7.1 \ data

- Downloaded from pypi.python.org / pypi / GDAL / # usage the file   
GDAL.1.7.1.tar.gz

- Unziped GDAL.1.7.1.tar.gz in C:\GDAL-1.7.1

- Launching in the  command line   C:\GDAL-1.7.1\setup.py

 From python I can not import GDAL:

this is error messagge

IDLE 2.6.3
Import from OSGeo GDAL

Traceback (most recent call last):
   File "<pyshell#0>", line 1, in <module>
     OSGeo GDAL import from
ImportError: No module named OSGeo

What's wrong?

Best Regards

Filippo Cor?
From anders.moe at geocap.no  Fri Aug 13 03:53:41 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Fri Aug 13 03:53:44 2010
Subject: [gdal-dev] OGR OCI driver, shape import gives ORA-01438,
	wrong precision
Message-ID: <AANLkTi=w7rJgBNcsc8ETs1fGtXGnw3NUzHDFRx3QR0zO@mail.gmail.com>

Hi everyone

I'm using ogr2ogr to import the well-known world.shp shapefile into oracle

I'm getting an ORA-01438 :


http://ora-01438.ora-code.com/


The file is here :

http://aprsworld.net/gisdata/world/world.zip


http://aprsworld.net/gisdata/world/


Seems as if a similar issue is described here :

http://trac.osgeo.org/gdal/ticket/2667

Any ideas ?

Thanks,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100813/f333e32d/attachment.html
From ltucker at openplans.org  Fri Aug 13 20:04:38 2010
From: ltucker at openplans.org (Luke Tucker)
Date: Fri Aug 13 20:04:40 2010
Subject: [gdal-dev] PyPI GDAL package has development default,
	does not easy_install
Message-ID: <AANLkTimFCF9p82i5y6+uJJ12oja2XbjNUz8NVBFbxt3p@mail.gmail.com>

Hi,

I noticed the releases of the python GDAL bindings uploaded to PyPI have a
strange default setting.  Namely, the line in setup.cfg that sets:

gdal-config="../../apps/gdal-config"

See:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/setup.cfg?annotate=blame&rev=15445

This appears to be reasonable in a development context when building
everything from scratch, but when just installing the python package from a
random location, it seems unlikely at best ;)  Removing the line from
setup.cfg when uploading PyPI packages would allow setup.py to guess that
gdal-config is in the user's path (more likely)

The default results in the following behavior:

GDAL-1.7.1$ python ./setup.py install
running install
running bdist_egg
running egg_info
writing GDAL.egg-info/PKG-INFO
writing top-level names to GDAL.egg-info/top_level.txt
writing dependency_links to GDAL.egg-info/dependency_links.txt
Could not run gdal-config!!!!
[... chaos ensues]

A similar error occurs running easy_install GDAL.  After removing the line,
works fine for me.

I created a ticket about this a while ago, but it doesn't look like anyone
has touched it:
http://trac.osgeo.org/gdal/ticket/3375

- Luke
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100813/50c59616/attachment.html
From hmorkemo at gmail.com  Sat Aug 14 06:49:54 2010
From: hmorkemo at gmail.com (Helge Morkemo)
Date: Sat Aug 14 06:49:57 2010
Subject: [gdal-dev] CreateCopy/BuildOverviews produce strange colors
In-Reply-To: <AANLkTim86yhkmhp2GdP2gp02Ai6gsu1up7zmpDhi4jx+@mail.gmail.com>
References: <AANLkTim86yhkmhp2GdP2gp02Ai6gsu1up7zmpDhi4jx+@mail.gmail.com>
Message-ID: <AANLkTikfD29eNpZ27zkuBYk69em16zAank3c3JzCPs8O@mail.gmail.com>

 Hi experts!

I'm trying to make a (lower quality) copy of a GeoTIFF file, and add
overviews to that copy.
It seems to work fine, BUT the resulting file has the colors messed up!
With JPEG_QUALITY=30, the colors seem to be "faded".
With JPEG_QUALITY=90, they're more "intense" than the original.
GDALINFO reports identical info for the input and output files (except for
the overviews and quality)

The complete code (VisualBasic 2010, 32bits):

        Dim gtiffdriver As Driver = Gdal.GetDriverByName("GTIFF")
        Dim viewfileoptions() As String = {"TFW=YES", "TILED=YES",
"BLOCKXSIZE=256", "BLOCKYSIZE=256",
                                            "COMPRESS=JPEG",
"JPEG_QUALITY=30", "PHOTOMETRIC=YCBCR",
                                            "INTERLEAVE=PIXEL",
                                            "PROFILE=GeoTIFF",
"BIGTIFF=IF_SAFER"}
        Dim inputdataset As Dataset = Gdal.Open(inputfile, Access
.GA_ReadOnly)
        Dim outputdataset As Dataset
 = gtiffdriver.CreateCopy(outputfile, inputdataset, 1, viewfileoptions,
Nothing, Nothing)
        outputdataset.BuildOverviews("GAUSS", overviews)
        outputdataset.FlushCache()
        outputdataset.Dispose()
1 or 0 in the strict parameter to CreateCopy makes no difference.
I've tested both the 1.7.x version and the trunk (18dev).

-
Helge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100814/fc9d3228/attachment.html
From even.rouault at mines-paris.org  Sat Aug 14 11:18:50 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Aug 14 11:18:58 2010
Subject: [gdal-dev] Proposed addition of OGR_L_GetName() /
	OGRLayer::GetName()
Message-ID: <201008141718.50777.even.rouault@mines-paris.org>

Hi gdal-devs,

Here's a proposal for adding OGR_L_GetName() / OGRLayer::GetName().

The proposed patch in http://trac.osgeo.org/gdal/ticket/3719 introduces a new 
virtual method GetName?() at the OGRLayer level.

The semantics of this method is to return the same result as GetLayerDefn()-
>GetName(). This is indeed the default implementation of the OGRLayer class 
itself.

So, what is it usefull for ? A few drivers, like PG since 
http://trac.osgeo.org/gdal/changeset/20277 , can benefit from GetName() by 
overloading it, without needing to fetch the layer definition, which is an 
operation that cost a few SQL requests per layer.

So the new method can be usefull to present the list of layer names of a PG 
database.

This would also be very handy for a OGR WFS driver I'm writing. It would save 
a DescribeFeatureType request for each layer. Just the GetCapabilities request 
would be needed.

Apart from the PG driver, there's only another driver (LIBKML) in trunk that 
overrides GetName(), and its semantics matches the one explained above. So 
there's no backward compatibility issue.

IMHO, this change seems to be a bit light to deserve a whole RFC, but I wanted 
to hear from your feedback before applying it.

Best regards,

Even
From warmerdam at pobox.com  Sat Aug 14 13:57:52 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Aug 14 13:57:55 2010
Subject: [gdal-dev] Proposed addition of OGR_L_GetName() /
	OGRLayer::GetName()
In-Reply-To: <201008141718.50777.even.rouault@mines-paris.org>
References: <201008141718.50777.even.rouault@mines-paris.org>
Message-ID: <AANLkTimBiC4Kw6oo+3BtG9v3PAdsd3EWbGkUWP9F7QB_@mail.gmail.com>

On Sat, Aug 14, 2010 at 11:18 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Hi gdal-devs,
>
> Here's a proposal for adding OGR_L_GetName() / OGRLayer::GetName().
>
> The proposed patch in http://trac.osgeo.org/gdal/ticket/3719 introduces a new
> virtual method GetName?() at the OGRLayer level.
>
> The semantics of this method is to return the same result as GetLayerDefn()-
>>GetName(). This is indeed the default implementation of the OGRLayer class
> itself.
>
> So, what is it usefull for ? A few drivers, like PG since
> http://trac.osgeo.org/gdal/changeset/20277 , can benefit from GetName() by
> overloading it, without needing to fetch the layer definition, which is an
> operation that cost a few SQL requests per layer.
>
> So the new method can be usefull to present the list of layer names of a PG
> database.
>
> This would also be very handy for a OGR WFS driver I'm writing. It would save
> a DescribeFeatureType request for each layer. Just the GetCapabilities request
> would be needed.
>
> Apart from the PG driver, there's only another driver (LIBKML) in trunk that
> overrides GetName(), and its semantics matches the one explained above. So
> there's no backward compatibility issue.
>
> IMHO, this change seems to be a bit light to deserve a whole RFC, but I wanted
> to hear from your feedback before applying it.


Even,

I'm generally ok with this change.  I would like to see it made explicit that
the name returned by OGRLayer::GetName() must always match the name
returned by the OGRFeatureDefn::GetName().

I am also wondering if there are any other aspects that should be handled
this way.  Many applications want to show a list of laye names, and the
geometry type of the layer (ie. ogrinfo, QGIS, etc).  Should we also be
making the geometry type a virtual method fetch on the layer?

I can see the change you propose being of benefit to essentially all the
RDBMS  drivers.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From even.rouault at mines-paris.org  Sat Aug 14 14:50:18 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Aug 14 14:50:27 2010
Subject: [gdal-dev] Proposed addition of OGR_L_GetName() /
	OGRLayer::GetName()
In-Reply-To: <AANLkTimBiC4Kw6oo+3BtG9v3PAdsd3EWbGkUWP9F7QB_@mail.gmail.com>
References: <201008141718.50777.even.rouault@mines-paris.org>
	<AANLkTimBiC4Kw6oo+3BtG9v3PAdsd3EWbGkUWP9F7QB_@mail.gmail.com>
Message-ID: <201008142050.19046.even.rouault@mines-paris.org>

Le samedi 14 ao?t 2010 19:57:52, Frank Warmerdam a ?crit :
> On Sat, Aug 14, 2010 at 11:18 AM, Even Rouault
> 
> Even,
> 
> I'm generally ok with this change.  I would like to see it made explicit
> that the name returned by OGRLayer::GetName() must always match the name
> returned by the OGRFeatureDefn::GetName().

Yes 100% agreed : here's what is currently stated in the doc of the method : 
"This returns the same result as GetLayerDefn()->GetName()"

Is that clear enough ?

> 
> I am also wondering if there are any other aspects that should be handled
> this way.  Many applications want to show a list of laye names, and the
> geometry type of the layer (ie. ogrinfo, QGIS, etc).  Should we also be
> making the geometry type a virtual method fetch on the layer?

Yes, that makes sense although this is an information that is sometimes a bit 
harder to get than the name, however I can add easily it  :

OGRGeometryType OGRLayer::GetGeomType()

which should return the same as GetLayerDefn()->GetGeomType()

> 
> I can see the change you propose being of benefit to essentially all the
> RDBMS  drivers.

Yes, a quick look at the MYSQL driver shows that it could benefit from that 
too.

> 
> Best regards,
From ahmettemiz88 at gmail.com  Sun Aug 15 15:17:01 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sun Aug 15 15:17:04 2010
Subject: [gdal-dev] problem in PostgreSQL layer
Message-ID: <AANLkTi=BkQb9+102b8o1qZbb=oJY+fEHccVcZ-2eLmDW@mail.gmail.com>

hello

I am trying to build a java application.

I received this error message:

ERROR 1: AddGeometryColumn failed for layer postlayer12, layer
creation has failed.

when I changed,

String name="PG:dbname='bzk2' host='localhost' port='5432'
user='postgres' password='222222'";    //super user
DataSource dspost2 = drvpost.CreateDataSource(name);

It worked:

Do I have to be superuser to build postgres layer ?

regards
From even.rouault at mines-paris.org  Sun Aug 15 15:37:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Aug 15 15:38:06 2010
Subject: [gdal-dev] problem in PostgreSQL layer
In-Reply-To: <AANLkTi=BkQb9+102b8o1qZbb=oJY+fEHccVcZ-2eLmDW@mail.gmail.com>
References: <AANLkTi=BkQb9+102b8o1qZbb=oJY+fEHccVcZ-2eLmDW@mail.gmail.com>
Message-ID: <201008152137.58673.even.rouault@mines-paris.org>

Le dimanche 15 ao?t 2010 21:17:01, ahmet temiz a ?crit :
> 
> Do I have to be superuser to build postgres layer ?

No, but you must make sure that you have the permissions for the 
geometry_columns and spatial_ref_sys tables.

See the FAQ at http://gdal.org/ogr/drv_pg.html

a bit of googling also points to 
http://comments.gmane.org/gmane.comp.gis.postgis/24967 for solutions

> 
> regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From marlam at marlam.de  Mon Aug 16 00:39:03 2010
From: marlam at marlam.de (Martin Lambers)
Date: Mon Aug 16 00:48:44 2010
Subject: [gdal-dev] Writing a GDAL Driver: two questions
Message-ID: <4C68C0E7.2050502@marlam.de>

Hello all,

I am writing a GDAL Driver for the GTA format
<http://www.nongnu.org/gta/>. The driver can already read GTA files and
create files with CreateCopy().

- What actions must a Driver support in GA_Update mode? Is it ok if it
just implements GDALPamRasterBand::IWriteBlock() for data updates? Or
does it have to support metadata updates, too?

- A GTA file can have bands with different data types mixed freely (e.g.
Byte, UInt16, CFloat32 all in one file). The Open() function can create
a matching GDALDataset without problems, and the gdal* programs seem to
be able to handle this. But the GDALDriver::Create() function only
allows to create data sets with the same data type for all bands. Are
different data types supported, or should I restrict the driver to only
open files that use the same data type for all bands?

Best regards,
Martin
From jez.walters at ipl.com  Mon Aug 16 08:50:33 2010
From: jez.walters at ipl.com (Jez Walters)
Date: Mon Aug 16 08:50:34 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
Message-ID: <1281963033244-5427706.post@n2.nabble.com>


Hello fellow GDAL users!


I need to handle Change Only Updates (COU) for the UK Ordnance Survey
MasterMap Topography Layer, and I was wondering how to approach this.

Both the initial and COU data are supplied as GML, and I am currently
converting the initial data to ESRI shapefiles using ogr2ogr.  However, the
ogr2ogr "-update" option won't update the shapefiles using the COU data -
unless I'm missing something?

I currently see two ways of overcoming this:

1. Use the COU data to update the initial GML data, and then re-convert the
merged data to ESRI shapefiles
2. Use the COU data to directly update the ESRI shapefiles

Obviously the second approach is more efficient, but how difficult is it to
create, update and delete features using the GDAL python library?

A few pointers for how to achieve this would be most welcome!  :-)


Warm regards,


Jez
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Handling-Ordnance-Survey-Change-Only-Updates-tp5427706p5427706.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Mon Aug 16 11:50:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug 16 11:50:52 2010
Subject: [gdal-dev] Writing a GDAL Driver: two questions
In-Reply-To: <4C68C0E7.2050502@marlam.de>
References: <4C68C0E7.2050502@marlam.de>
Message-ID: <4C695E56.5030005@pobox.com>

Martin Lambers wrote:
> Hello all,
> 
> I am writing a GDAL Driver for the GTA format
> <http://www.nongnu.org/gta/>. The driver can already read GTA files and
> create files with CreateCopy().
> 
> - What actions must a Driver support in GA_Update mode? Is it ok if it
> just implements GDALPamRasterBand::IWriteBlock() for data updates? Or
> does it have to support metadata updates, too?

Martin,

It is acceptable to issue an error in response to update to metadata,
coordinate system, georeferencing and such in Update mode if it is
impractical to update them.

> - A GTA file can have bands with different data types mixed freely (e.g.
> Byte, UInt16, CFloat32 all in one file). The Open() function can create
> a matching GDALDataset without problems, and the gdal* programs seem to
> be able to handle this. But the GDALDriver::Create() function only
> allows to create data sets with the same data type for all bands. Are
> different data types supported, or should I restrict the driver to only
> open files that use the same data type for all bands?

The only way to create mixed type files is to use AddBand() to
add the bands of different types.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Aug 16 23:20:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug 16 23:20:25 2010
Subject: [gdal-dev] Motion / RFC 28: OGR SQL Generalized Expressions
In-Reply-To: <4C5B1616.5010003@pobox.com>
References: <4C5B1616.5010003@pobox.com>
Message-ID: <4C69FFF5.4080307@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> I motion to adopt RFC 28: OGR SQL Generalized Expressions.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc

Folks,

I declare this motion adopted with support from Even, Daniel, Howard,
Tamas and myself.  I will migrate it from my sandbox to trunk tonight.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From edikaradumi at gmail.com  Tue Aug 17 03:11:04 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Tue Aug 17 03:11:05 2010
Subject: [gdal-dev] Re: Raster Strategies Examples
In-Reply-To: <4C600FA1.9020708@geoanalytic.com>
References: <AANLkTimL+LccrMqPyWWWCU2rrFe0gTF-n0dQhJr+hxsy@mail.gmail.com>
	<4C600FA1.9020708@geoanalytic.com>
Message-ID: <1282029064243-5430942.post@n2.nabble.com>


Thanks, i have read one of your posts:

>Glen, 
>
>  As Frank has pointed out in his reply (and Ed has said for several
> years), 
>the answer is to pyramid your data.  This means constructing layers at 
>different resolutions, then setting MINSCALE MAXSCALE for each of the
layers 
>in the map file.  The goal is to improve the performance of Mapserver by 
>limiting the number of files it has to open to render a requested image. 
>
> For example, I've set up a site to render the NASA's Geocover global 
>Landsat mosaic.  To handle the range of requests from full resolution (14 
>meters per pixel) to full world-wide coverage (20km per pixel), I set up
six 
>levels (and I may add one more) of the pyramid (view in a fixed-pitched
font 
>such as Courier): 
>
>       Largest 
>Number of     Tile 
>Lvl:    Map Scale:      Resolution:     Tile Size: 
>Pixels:     Tiles         Size  Total Size:   Format: 
>----    ----------      -----------     ---------------------------    
---- 
>----    ----------    ----- -----------   ------ 
>6       1:    50k          14 meters    1:250k-ish (1/16 of 5x6 deg)    10k 
>x 10k   14064         26mb  = 338     gb  ECW 
>5            250k          50 meters    1:250k  1 deg H x  2 deg W       2k 
>x  2k   14921          3mb  =  38.4   gb  ECW 
>4          1m             200 meters    ~1:1m   5 deg H x  6 deg W       3k 
>x  2k    36x60 = 2160 20mb  =  26.1   gb  TIFF 
>3          5m            30 sec ( 1km)         15 deg H x 30 deg W       2k 
>x  3k    12x12 =  144 20mb  =   2.4   gb  TIFF 
>2         20m             2 min ( 4km)         45 deg H x 90 deg W       1k 
>x  2k     4x 4 =   16 10mb  =   0.167 gb  TIFF 
>1        100m            10 min (20km)        180 deg H x360 deg W       1k 
>x  2k       1  =    1  7mb  =   0.007 gb  TIFF 
>
>Disclaimer: The above is just an example of pyramiding a large raster 
>dataset (tuning by adding levels or adjusting scale will likely be 
>required).  And I've broken Ed's Rule #3 ("For best performance, don't 
>compress your data") since levels 5 and 6 are ECW, and Rule #4 ("Don't 
>re-project your data on-the-fly") since levels 4,5,6 are in UTM. 
>
>Brent Fraser 
>GeoAnalytic Inc. 
>Calgary, Alberta 

but it is still confusing for me, cuz i havent worked for a long time with
raster data. My pixel size is 0.08m and i use default resolution, 72. my
images are 9375x6250 pixels. now i am having problems calculating how many
overview should i build, meaning maybe i should not build the 128 overview
but create another copy of the mosaic data on that point? or i should build
the 256 overview and build the additional external layer in 512. I know
these are some math calculations but im having problems

Regards
Edi Karadumi





On Mon, Aug 9, 2010 at 4:24 PM, Brent Fraser <bfraser@geoanalytic.com>
wrote:
The steps you've listed below are correct for maximizing performance when
viewing the raster at (or around) the native resolution of the data. 
However, as you've found out, the performance can still be poor when trying
to view the entire dataset.

The basic rule is that your application (mapserver?) should not have to open
more than 4 to 8 raster files to render the view.  With that in mind (and
since disk space is not a problem), create "layers" of the raster dataset at
different scales, say a factor of 2, until you have only one image.

For example, if the resolution of your original data is 1 meter per pixel,
your layers would look like the following.  Note the first eight layers are
handled by the internal overviews you created with gdaladdo.

Pixel   Map Scale:
Size:   1:n
-----   ------
1 m     4,000
2       8,000
4       16,000
8       32k
16      64
32      128
64      250
128     500

Additional External Layers
256     1m
512     2m
1024    4m
2048    8m
4096    16m

To create the additional external layers, use GDAL's gdalbuiltvrt to create
a VRT file of the original dataset.  You can then use gdal_retile.py or
Maptiler to build the layers.

Best Regards,
Brent Fraser

Edi KARADUMI wrote:
I have read many strategies for raster performance, but i still have
problems with my case. The posts that i have read explain the strategie, but
are not very detailed. Im new to mapserver so i have problems implementing
them. My case is: 
-about 6000 tiles that form the map -170mb each tile -aproximately 1.2T of
iamges -i have 10T HD and i think disk space is not a problem for me -tile
format is TIF -tile size 9375x6250 pixels 
The strategy i have implemented and the problems i have 
-First i divided the tiles in 60 folders, to increase the performance in
disk seek/read. 
-Than i transformed source files into internally tiles with the command   
gdal_translate -of GTiff -co "TILED=YES" original.tif tiled.tif 
-i used gdaladdo to add internal pyramids 
  gdaladdo -r average 2 4 8 16 32 64 128 
-Created a tileindex using    gdaltindex -write_absolute_path MapAll.shp
//server/Maps/Subfolder1/*.tif 
-Created a spatial index .qix file    shptree MapAll.shp 
-than added the layer to the mapfile without the .shp extension so the
application can use the .qix 
as you may know, i have very slow performance when i zoom out and im stucked
here. As i have read i should make a copy of the tiles with reduced
resolution. Merge the tiles together and use min/max scale to show different
layers in different scales. the min/max scales i zoom in/out are
100/1200000. Now my questions are 
- How can i calculate the scale where i should create another layer of the
tiles, or i shoud see it with some tests? 
- how much should be the resolution of the new layer? 
- is there any tools or program to merge the tiles? merging 6000 tiles with
the gdalwarp by writing the command by myself is frustrating 
- how many tiles should i merge together to create the new layer? (how many
tiles should have the new layer) i know that in each zoomscale its better to
appear only one tile but i dont know how to calculate it 
- the tiles that i should merge are the originals or those with internal
tiling and overviews? 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Raster-Strategies-Examples-tp5364468p5430942.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From P.Halls at york.ac.uk  Tue Aug 17 03:35:53 2010
From: P.Halls at york.ac.uk (Peter Halls)
Date: Tue Aug 17 03:37:21 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <1281963033244-5427706.post@n2.nabble.com>
References: <1281963033244-5427706.post@n2.nabble.com>
Message-ID: <Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>

Jez,

   I would be surprised if GDAL can handle OSGB MasterMap change-only 
updates automatically. The process defined by OS is to locate and replace 
the records concerned. Because the update may change the geometry of a 
record, I do not believe this can be done on a shapefile in situ. Instead 
the procedure would be to input the shapefile sequentially until a record 
to be changed is liocated, outputing the input to a new shapefile and 
substituting the change record for the input as appropriate, gaining a new 
shapefile. On completion, the new shapefile will have the correct spatial 
index and bounds. Indeed, it is probably most sensible to adopt this 
approach to such updates regardless of the output format, as this is 'safe' 
against update problems - which, in theory, could result from a problematic 
GML file and permits easy reversion.

Best wishes,

Peter
  
On Aug 16 2010, Jez Walters wrote:

>
>Hello fellow GDAL users!
>
>
>I need to handle Change Only Updates (COU) for the UK Ordnance Survey
>MasterMap Topography Layer, and I was wondering how to approach this.
>
>Both the initial and COU data are supplied as GML, and I am currently
>converting the initial data to ESRI shapefiles using ogr2ogr.  However, the
>ogr2ogr "-update" option won't update the shapefiles using the COU data -
>unless I'm missing something?
>
>I currently see two ways of overcoming this:
>
>1. Use the COU data to update the initial GML data, and then re-convert the
>merged data to ESRI shapefiles
>2. Use the COU data to directly update the ESRI shapefiles
>
>Obviously the second approach is more efficient, but how difficult is it to
>create, update and delete features using the GDAL python library?
>
>A few pointers for how to achieve this would be most welcome!  :-)
>
>
>Warm regards,
>
>
>Jez
>

-- 
--------------------------------------------------------------------------
Peter Halls, University of York GIS Advisor
Snail Mail: Computing Service, Heslington, York YO10 5DD, England
Telephone: 01904 433806   FAX: 01904 433740

This message has the status of a private & personal communication
--------------------------------------------------------------------------



From Jez.Walters at ipl.com  Tue Aug 17 05:16:51 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Tue Aug 17 05:20:19 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>

Peter,


I may be misinterpreting it, but the GDAL documentation (http://www.gdal.org/ogr/drv_shapefile.html) suggests that shapefiles CAN be edited:

"The OGR shapefile driver supports rewriting existing shapes in a shapefile as well as deleting shapes. Deleted shapes are marked for deletion in the .dbf file, and then ignored by OGR. To actually remove them permanently (resulting in renumbering of FIDs) invoke the SQL 'REPACK <tablename>' via the datasource ExecuteSQL() method."

I was rather hoping this would be implemented via ogr2ogr - can you confirm I'm right that ogr2ogr does NOT support this?
 

Warm regards,


Jez


-----Original Message-----
From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
Sent: Tuesday 17 August 2010 08:36
To: Jez Walters
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Handling Ordnance Survey Change Only Updates

Jez,

   I would be surprised if GDAL can handle OSGB MasterMap change-only updates automatically. The process defined by OS is to locate and replace 
the records concerned. Because the update may change the geometry of a record, I do not believe this can be done on a shapefile in situ. Instead 
the procedure would be to input the shapefile sequentially until a record to be changed is liocated, outputing the input to a new shapefile and substituting the change record for the input as appropriate, gaining a new shapefile. On completion, the new shapefile will have the correct spatial 
index and bounds. Indeed, it is probably most sensible to adopt this approach to such updates regardless of the output format, as this is 'safe' 
against update problems - which, in theory, could result from a problematic GML file and permits easy reversion.

Best wishes,

Peter

On Aug 16 2010, Jez Walters wrote:

>
>Hello fellow GDAL users!
>
>
>I need to handle Change Only Updates (COU) for the UK Ordnance Survey
>MasterMap Topography Layer, and I was wondering how to approach this.
>
>Both the initial and COU data are supplied as GML, and I am currently
>converting the initial data to ESRI shapefiles using ogr2ogr.  However, the
>ogr2ogr "-update" option won't update the shapefiles using the COU data -
>unless I'm missing something?
>
>I currently see two ways of overcoming this:
>
>1. Use the COU data to update the initial GML data, and then re-convert the
>merged data to ESRI shapefiles
>2. Use the COU data to directly update the ESRI shapefiles
>
>Obviously the second approach is more efficient, but how difficult is it to
>create, update and delete features using the GDAL python library?
>
>A few pointers for how to achieve this would be most welcome!  :-)
>
>
>Warm regards,
>
>
>Jez
>

-- 
--------------------------------------------------------------------------
Peter Halls, University of York GIS Advisor
Snail Mail: Computing Service, Heslington, York YO10 5DD, England
Telephone: 01904 433806   FAX: 01904 433740

This message has the status of a private & personal communication
--------------------------------------------------------------------------


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From P.Halls at york.ac.uk  Tue Aug 17 06:40:17 2010
From: P.Halls at york.ac.uk (Peter Halls)
Date: Tue Aug 17 06:41:59 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
Message-ID: <Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>

Jez,

   I rather doubt you could use ogr2ogr to effect a MasterMap update, I'm 
afraid. I do not believe it to be designed to take two inputs and, 
effectively, merge them to produce the output.

   Yes, it is true that you can edit shapefiles to the extent that records 
can be marked for deletion and new records added. However, you need logic 
to identify the records to be updated - which, so far as I am aware, does 
not exist within ogr2ogr, which is a data conversion tool. There have been 
other postings regarding updating bounds and indeces, which can all be 
wored around.

    Because I am paranoid, I would not wish to do an in situ update of my 
base reference data, such as MasterMap, without preserving the previous 
version. As I do not believe the logic to exist to update a Mastermap 
dataset from the Changes GML using GDAL, you will need to create this. Thus 
the most sensible approach is to take the two inputs, existing shapefile 
and GML updates, apply the updates and write out a new, updated shapefile. 
You can, of course, delete or archive the old one once your QA processes 
have been run and you are confident with the result.

Best wishes,

Peter

On Aug 17 2010, Jez Walters wrote:

>Peter,
>
>
> I may be misinterpreting it, but the GDAL documentation 
> (http://www.gdal.org/ogr/drv_shapefile.html) suggests that shapefiles CAN 
> be edited:
>
> "The OGR shapefile driver supports rewriting existing shapes in a 
> shapefile as well as deleting shapes. Deleted shapes are marked for 
> deletion in the .dbf file, and then ignored by OGR. To actually remove 
> them permanently (resulting in renumbering of FIDs) invoke the SQL 
> 'REPACK <tablename>' via the datasource ExecuteSQL() method."
>
> I was rather hoping this would be implemented via ogr2ogr - can you 
> confirm I'm right that ogr2ogr does NOT support this?
> 
>
>Warm regards,
>
>
>Jez
>
>
>-----Original Message-----
>From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
>Sent: Tuesday 17 August 2010 08:36
>To: Jez Walters
>Cc: gdal-dev@lists.osgeo.org
>Subject: Re: [gdal-dev] Handling Ordnance Survey Change Only Updates
>
>Jez,
>
>   I would be surprised if GDAL can handle OSGB MasterMap change-only 
> updates automatically. The process defined by OS is to locate and replace 
> the records concerned. Because the update may change the geometry of a 
> record, I do not believe this can be done on a shapefile in situ. Instead 
> the procedure would be to input the shapefile sequentially until a record 
> to be changed is liocated, outputing the input to a new shapefile and 
> substituting the change record for the input as appropriate, gaining a 
> new shapefile. On completion, the new shapefile will have the correct 
> spatial index and bounds. Indeed, it is probably most sensible to adopt 
> this approach to such updates regardless of the output format, as this is 
> 'safe' against update problems - which, in theory, could result from a 
> problematic GML file and permits easy reversion.
>
>Best wishes,
>
>Peter
>
>On Aug 16 2010, Jez Walters wrote:
>
>>
>>Hello fellow GDAL users!
>>
>>
>>I need to handle Change Only Updates (COU) for the UK Ordnance Survey
>>MasterMap Topography Layer, and I was wondering how to approach this.
>>
>> Both the initial and COU data are supplied as GML, and I am currently 
>> converting the initial data to ESRI shapefiles using ogr2ogr. However, 
>> the ogr2ogr "-update" option won't update the shapefiles using the COU 
>> data - unless I'm missing something?
>>
>>I currently see two ways of overcoming this:
>>
>> 1. Use the COU data to update the initial GML data, and then re-convert 
>> the merged data to ESRI shapefiles 2. Use the COU data to directly 
>> update the ESRI shapefiles
>>
>> Obviously the second approach is more efficient, but how difficult is it 
>> to create, update and delete features using the GDAL python library?
>>
>>A few pointers for how to achieve this would be most welcome!  :-)
>>
>>
>>Warm regards,
>>
>>
>>Jez
>>
>
>

-- 
--------------------------------------------------------------------------
Peter Halls, University of York GIS Advisor
Snail Mail: Computing Service, Heslington, York YO10 5DD, England
Telephone: 01904 433806   FAX: 01904 433740

This message has the status of a private & personal communication
--------------------------------------------------------------------------



From Jez.Walters at ipl.com  Tue Aug 17 07:18:41 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Tue Aug 17 07:18:49 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
	<Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>

Peter,


I can't see how to use ogr2ogr with Change Only Updates (COU) either, but I was hoping for a more definitive response (no offense intended)!  :-)

I'm receiving full and COU data in 'chunks' for the whole of Great Britain, and features can move from chunk to chunk between updates.  For example, a bridge feature might be first described in the full data file '123456-000012-10.gz' but amendments to this feature might be issued three months later in the COU data file '123456-000011-10.gz'.

Because of the data volumes involved, I can't process each full data shapefile in turn to check its features against ALL of the changed features for the WHOLE of Great Britain.  I need an algorithm that processes COU data files one at a time.

I see the first step as establishing which full data shapefile contains a given feature that has changed.  Should I maintain my own feature index for this, or can the OGR library work this out for me?

Once I know which shapefile to edit, is it possible (however risky) to add, update and delete features from it - and if so, how?


Warm regards,


Jez


-----Original Message-----
From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
Sent: Tuesday 17 August 2010 11:40
To: Jez Walters
Cc: 'gdal-dev@lists.osgeo.org'
Subject: RE: [gdal-dev] Handling Ordnance Survey Change Only Updates

Jez,

   I rather doubt you could use ogr2ogr to effect a MasterMap update, I'm afraid. I do not believe it to be designed to take two inputs and, 
effectively, merge them to produce the output.

   Yes, it is true that you can edit shapefiles to the extent that records can be marked for deletion and new records added. However, you need logic 
to identify the records to be updated - which, so far as I am aware, does not exist within ogr2ogr, which is a data conversion tool. There have been 
other postings regarding updating bounds and indeces, which can all be wored around.

    Because I am paranoid, I would not wish to do an in situ update of my base reference data, such as MasterMap, without preserving the previous 
version. As I do not believe the logic to exist to update a Mastermap dataset from the Changes GML using GDAL, you will need to create this. Thus 
the most sensible approach is to take the two inputs, existing shapefile and GML updates, apply the updates and write out a new, updated shapefile. 
You can, of course, delete or archive the old one once your QA processes have been run and you are confident with the result.

Best wishes,

Peter

On Aug 17 2010, Jez Walters wrote:

>Peter,
>
>
> I may be misinterpreting it, but the GDAL documentation 
> (http://www.gdal.org/ogr/drv_shapefile.html) suggests that shapefiles CAN 
> be edited:
>
> "The OGR shapefile driver supports rewriting existing shapes in a 
> shapefile as well as deleting shapes. Deleted shapes are marked for 
> deletion in the .dbf file, and then ignored by OGR. To actually remove 
> them permanently (resulting in renumbering of FIDs) invoke the SQL 
> 'REPACK <tablename>' via the datasource ExecuteSQL() method."
>
> I was rather hoping this would be implemented via ogr2ogr - can you 
> confirm I'm right that ogr2ogr does NOT support this?
> 
>
>Warm regards,
>
>
>Jez
>
>
>-----Original Message-----
>From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
>Sent: Tuesday 17 August 2010 08:36
>To: Jez Walters
>Cc: gdal-dev@lists.osgeo.org
>Subject: Re: [gdal-dev] Handling Ordnance Survey Change Only Updates
>
>Jez,
>
>   I would be surprised if GDAL can handle OSGB MasterMap change-only 
> updates automatically. The process defined by OS is to locate and replace 
> the records concerned. Because the update may change the geometry of a 
> record, I do not believe this can be done on a shapefile in situ. Instead 
> the procedure would be to input the shapefile sequentially until a record 
> to be changed is liocated, outputing the input to a new shapefile and 
> substituting the change record for the input as appropriate, gaining a 
> new shapefile. On completion, the new shapefile will have the correct 
> spatial index and bounds. Indeed, it is probably most sensible to adopt 
> this approach to such updates regardless of the output format, as this is 
> 'safe' against update problems - which, in theory, could result from a 
> problematic GML file and permits easy reversion.
>
>Best wishes,
>
>Peter
>
>On Aug 16 2010, Jez Walters wrote:
>
>>
>>Hello fellow GDAL users!
>>
>>
>>I need to handle Change Only Updates (COU) for the UK Ordnance Survey
>>MasterMap Topography Layer, and I was wondering how to approach this.
>>
>> Both the initial and COU data are supplied as GML, and I am currently 
>> converting the initial data to ESRI shapefiles using ogr2ogr. However, 
>> the ogr2ogr "-update" option won't update the shapefiles using the COU 
>> data - unless I'm missing something?
>>
>>I currently see two ways of overcoming this:
>>
>> 1. Use the COU data to update the initial GML data, and then re-convert 
>> the merged data to ESRI shapefiles 2. Use the COU data to directly 
>> update the ESRI shapefiles
>>
>> Obviously the second approach is more efficient, but how difficult is it 
>> to create, update and delete features using the GDAL python library?
>>
>>A few pointers for how to achieve this would be most welcome!  :-)
>>
>>
>>Warm regards,
>>
>>
>>Jez
>>
>
>

-- 
--------------------------------------------------------------------------
Peter Halls, University of York GIS Advisor
Snail Mail: Computing Service, Heslington, York YO10 5DD, England
Telephone: 01904 433806   FAX: 01904 433740

This message has the status of a private & personal communication
--------------------------------------------------------------------------





The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From p.baumann at jacobs-university.de  Tue Aug 17 07:37:59 2010
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue Aug 17 07:38:03 2010
Subject: [gdal-dev] GDAL driver for rasdaman: license acceptance
Message-ID: <4C6A7497.5000608@jacobs-university.de>

Dear GDAL maintainers,

this is to confirm that we (Constantin Jucovschi, as cc'ed and me) agree 
to the GDAL commiter guidelines as set forth in 
http://trac.osgeo.org/gdal/wiki/rfc3_commiters  for the code submitted 
under ticket http://trac.osgeo.org/gdal/ticket/3721 .

Kindly let us know of any further steps to be taken. In particular, we 
will be happy to assist in the final code integration process.

regards,
Peter

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 147737)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 10xx)



From warmerdam at pobox.com  Tue Aug 17 09:07:19 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 17 09:07:27 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
	<Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>
Message-ID: <4C6A8987.8000801@pobox.com>

Jez Walters wrote:
> Peter,
> 
> 
> I can't see how to use ogr2ogr with Change Only Updates (COU) either, but I
> was hoping for a more definitive response (no offense intended)!  :-)

Jez,

I think Peter's statements were all accurate.

> I'm receiving full and COU data in 'chunks' for the whole of Great Britain,
> and features can move from chunk to chunk between updates.  For example, a
> bridge feature might be first described in the full data file
> '123456-000012-10.gz' but amendments to this feature might be issued three
> months later in the COU data file '123456-000011-10.gz'.

Ouch.

> Because of the data volumes involved, I can't process each full data
> shapefile in turn to check its features against ALL of the changed features
> for the WHOLE of Great Britain.  I need an algorithm that processes COU data
> files one at a time.
> 
> I see the first step as establishing which full data shapefile contains a
> given feature that has changed.  Should I maintain my own feature index for
> this, or can the OGR library work this out for me?
> 
> Once I know which shapefile to edit, is it possible (however risky) to add,
> update and delete features from it - and if so, how?

You can add, update and delete features in a shapefile using the OGR API.
See CreateFeature(), SetFeature(),  and DeleteFeature() in the OGRLayer class
for details.

OGR is going to refer to features by "FID" (feature id) which is a 32bit
numeric value unique only within one layer (gml file, shapefile, etc), while
presumably you are working with alphanumeric gml id's unique across all
of the datasets.

My *suggestion* would be to load all your original data into postgis, and
then run a python/perl/etc script to read the COU files, and apply the
updates to the database.  If you do it in a database it should be much
easier to find the features without having to maintain a separate feature
id index mapping to particular files.

Note that OGR is not likely to provide any help maintaining a gml:id index.

Hmm, I just tried opening a mastermap file I have sitting around with OGR
and it also appears that OGR is not preserving the fid attribute on the
features as an attribute.  If there isn't a work around for this you may
have a very hard time processing updates - assuming they operate against
this fid.  Perhaps this is something that has already been discussed?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Aug 17 09:26:23 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 17 09:26:34 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <4C6A8987.8000801@pobox.com>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
	<Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>
	<4C6A8987.8000801@pobox.com>
Message-ID: <1282051583.4c6a8dff09b96@webmail.free.fr>

Selon Frank Warmerdam <warmerdam@pobox.com>:
>
> Note that OGR is not likely to provide any help maintaining a gml:id index.
>
> Hmm, I just tried opening a mastermap file I have sitting around with OGR
> and it also appears that OGR is not preserving the fid attribute on the
> features as an attribute.  If there isn't a work around for this you may
> have a very hard time processing updates - assuming they operate against
> this fid.  Perhaps this is something that has already been discussed?

Yes, I also agree that the only missing piece to implement an update mechanism
was the gml:id. Yesterday, while implementing WFS-T, I also needed it badly, so
it is now in trunk in the GML driver. Currently, I just conditionnaly enabled
the exposure of gml:id (1) as "gml_id" field in the case of
<wfs:FeatureCollection> documents, but it is trivial to change the bExposeGMLId
initialization to TRUE in the OGRGMLDataSource constructor to get them.

Best regards,

Even

(1) : This is true for GML3 data. For GML2 data, the fid attribute will be
exposed in this gml_id field

>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From aguyot at siradel.com  Tue Aug 17 10:25:31 2010
From: aguyot at siradel.com (alexguyot)
Date: Tue Aug 17 10:25:33 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <1269452077517-4792534.post@n2.nabble.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
	<1266965795875-4622435.post@n2.nabble.com>
	<1267040120346-4628026.post@n2.nabble.com>
	<1268258369264-4712621.post@n2.nabble.com>
	<1269379433252-4787310.post@n2.nabble.com>
	<f3b73b7d1003231455y772feff8o877739b19d740e2c@mail.gmail.com>
	<1269452077517-4792534.post@n2.nabble.com>
Message-ID: <1282055131925-5432336.post@n2.nabble.com>


Hi,

I'm having the exact same issue.
Which release have you downloaded from  http://vbkto.dyndns.org/sdk/
http://vbkto.dyndns.org/sdk/  ?

I've tried to overwrite my GDAL 1.6.1 install using files from
"release-1600-gdal-1-6-mapserver-5-6.zip", but it still crashing on
ReadAsArray

Thanks for your help,
Alex



-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p5432336.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From P.Halls at york.ac.uk  Tue Aug 17 11:12:50 2010
From: P.Halls at york.ac.uk (Peter Halls)
Date: Tue Aug 17 11:12:54 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
	<Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>
Message-ID: <Prayer.1.3.2.1008171612500.26169@webmail4.york.ac.uk>

Jez,

On Aug 17 2010, Jez Walters wrote:

>Peter,
>
>
> I can't see how to use ogr2ogr with Change Only Updates (COU) either, but 
> I was hoping for a more definitive response (no offense intended)! :-)
>
> I'm receiving full and COU data in 'chunks' for the whole of Great 
> Britain, and features can move from chunk to chunk between updates. For 
> example, a bridge feature might be first described in the full data file 
> '123456-000012-10.gz' but amendments to this feature might be issued 
> three months later in the COU data file '123456-000011-10.gz'.
>
> Because of the data volumes involved, I can't process each full data 
> shapefile in turn to check its features against ALL of the changed 
> features for the WHOLE of Great Britain. I need an algorithm that 
> processes COU data files one at a time.
>
> I see the first step as establishing which full data shapefile contains a 
> given feature that has changed. Should I maintain my own feature index 
> for this, or can the OGR library work this out for me?
>
> Once I know which shapefile to edit, is it possible (however risky) to 
> add, update and delete features from it - and if so, how?
>

Echoing, perhaps, what Frank and Even have said, so long as your data 
repository has to be as shapefiles, I think you are going to have a lot of 
work to do. I'm fortunate in having a corporate Oracle licence on which to 
build, but PostGIS is a perfectly suitable alternative - shapefiles have so 
many built-in restrictions, consequent on their origin fifteen or so years 
ago. Indeed, if you need ESRI compatibility I gather PostGIS is supported 
from ArcGIS release 10. Managing the data in PostGIS should be as 
straightforward as in Oracle: you can easily extract shapefile segments as 
required but would no longer have the headache of creating and managing an 
index system to determine which feature is in which shapefile.

The OSGB FID can be either alphabetic or numeric - the first four 
characters are always OSGB and the rest is a sixteen digit integer (64 bit 
integer, then, rather than 32). I've been toying with the idea of using the 
integer form as the unique record ID / index column, but I think GDAL 
currently requires this column to be a 32bit integer; I do not yet know 
whether SDE 10 would handle a 64bit integer but I will need to interwork 
with this, so it may be a constraint for me but not for you. As I am 
working primarily with ITN-RRI, rather than the Topographic Layer, the way 
I handle the ID is critical ...

Even mentioned that there are some differences in the GML handling for GML2 
/ GML3. The OSGB GML claims to be GML2 but includes some GML3 constructs - 
I recall someone describing it as GML2.5 but cannot remember who or where. 
I do not know whether this is liable to cause any problems for you.

Best wishes,

Peter

>
>Warm regards,
>
>
>Jez
>
>
>-----Original Message-----
>From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
>Sent: Tuesday 17 August 2010 11:40
>To: Jez Walters
>Cc: 'gdal-dev@lists.osgeo.org'
>Subject: RE: [gdal-dev] Handling Ordnance Survey Change Only Updates
>
>Jez,
>
>   I rather doubt you could use ogr2ogr to effect a MasterMap update, I'm 
> afraid. I do not believe it to be designed to take two inputs and, 
> effectively, merge them to produce the output.
>
>   Yes, it is true that you can edit shapefiles to the extent that 
> records can be marked for deletion and new records added. However, you 
> need logic to identify the records to be updated - which, so far as I am 
> aware, does not exist within ogr2ogr, which is a data conversion tool. 
> There have been other postings regarding updating bounds and indeces, 
> which can all be wored around.
>
>    Because I am paranoid, I would not wish to do an in situ update of my 
> base reference data, such as MasterMap, without preserving the previous 
> version. As I do not believe the logic to exist to update a Mastermap 
> dataset from the Changes GML using GDAL, you will need to create this. 
> Thus the most sensible approach is to take the two inputs, existing 
> shapefile and GML updates, apply the updates and write out a new, updated 
> shapefile. You can, of course, delete or archive the old one once your QA 
> processes have been run and you are confident with the result.
>
>Best wishes,
>
>Peter
>
>On Aug 17 2010, Jez Walters wrote:
>
>>Peter,
>>
>>
>> I may be misinterpreting it, but the GDAL documentation 
>> (http://www.gdal.org/ogr/drv_shapefile.html) suggests that shapefiles 
>> CAN be edited:
>>
>> "The OGR shapefile driver supports rewriting existing shapes in a 
>> shapefile as well as deleting shapes. Deleted shapes are marked for 
>> deletion in the .dbf file, and then ignored by OGR. To actually remove 
>> them permanently (resulting in renumbering of FIDs) invoke the SQL 
>> 'REPACK <tablename>' via the datasource ExecuteSQL() method."
>>
>> I was rather hoping this would be implemented via ogr2ogr - can you 
>> confirm I'm right that ogr2ogr does NOT support this?
>> 
>>
>>Warm regards,
>>
>>
>>Jez
>>
>>
>>-----Original Message-----
>>From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
>>Sent: Tuesday 17 August 2010 08:36
>>To: Jez Walters
>>Cc: gdal-dev@lists.osgeo.org
>>Subject: Re: [gdal-dev] Handling Ordnance Survey Change Only Updates
>>
>>Jez,
>>
>>   I would be surprised if GDAL can handle OSGB MasterMap change-only 
>> updates automatically. The process defined by OS is to locate and 
>> replace the records concerned. Because the update may change the 
>> geometry of a record, I do not believe this can be done on a shapefile 
>> in situ. Instead the procedure would be to input the shapefile 
>> sequentially until a record to be changed is liocated, outputing the 
>> input to a new shapefile and substituting the change record for the 
>> input as appropriate, gaining a new shapefile. On completion, the new 
>> shapefile will have the correct spatial index and bounds. Indeed, it is 
>> probably most sensible to adopt this approach to such updates regardless 
>> of the output format, as this is 'safe' against update problems - which, 
>> in theory, could result from a problematic GML file and permits easy 
>> reversion.
>>
>>Best wishes,
>>
>>Peter
>>
>>On Aug 16 2010, Jez Walters wrote:
>>
>>>
>>>Hello fellow GDAL users!
>>>
>>>
>>>I need to handle Change Only Updates (COU) for the UK Ordnance Survey
>>>MasterMap Topography Layer, and I was wondering how to approach this.
>>>
>>> Both the initial and COU data are supplied as GML, and I am currently 
>>> converting the initial data to ESRI shapefiles using ogr2ogr. However, 
>>> the ogr2ogr "-update" option won't update the shapefiles using the COU 
>>> data - unless I'm missing something?
>>>
>>>I currently see two ways of overcoming this:
>>>
>>> 1. Use the COU data to update the initial GML data, and then re-convert 
>>> the merged data to ESRI shapefiles 2. Use the COU data to directly 
>>> update the ESRI shapefiles
>>>
>>> Obviously the second approach is more efficient, but how difficult is 
>>> it to create, update and delete features using the GDAL python library?
>>>
>>>A few pointers for how to achieve this would be most welcome!  :-)
>>>
>>>
>>>Warm regards,
>>>
>>>
>>>Jez
>>>
>>
>>
>
>

-- 
--------------------------------------------------------------------------
Peter Halls, University of York GIS Advisor
Snail Mail: Computing Service, Heslington, York YO10 5DD, England
Telephone: 01904 433806   FAX: 01904 433740

This message has the status of a private & personal communication
--------------------------------------------------------------------------



From warmerdam at pobox.com  Tue Aug 17 11:34:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 17 11:34:35 2010
Subject: [gdal-dev] RFC28 OGR SQL Expressions now in trunk
Message-ID: <4C6AAC08.8000605@pobox.com>

Folks,

I have completed the migration of OGR SQL Expression support (RFC 28)
into trunk, added testing and updated the documentation. Feel free to give
it a try and let me know if/when you encounter problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Aug 17 13:56:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 17 13:56:27 2010
Subject: [DONE] Re: [gdal-dev] Proposed addition of OGR_L_GetName() /
	OGRLayer::GetName()
In-Reply-To: <201008142050.19046.even.rouault@mines-paris.org>
References: <201008141718.50777.even.rouault@mines-paris.org>
	<AANLkTimBiC4Kw6oo+3BtG9v3PAdsd3EWbGkUWP9F7QB_@mail.gmail.com>
	<201008142050.19046.even.rouault@mines-paris.org>
Message-ID: <201008171956.21914.even.rouault@mines-paris.org>

Implemented in trunk now.

--> Full rebuild (make clean; make) of GDAL necessary due to addition of 
virtual methods.

Best regards,

Even

Le samedi 14 ao?t 2010 20:50:18, Even Rouault a ?crit :
> Le samedi 14 ao?t 2010 19:57:52, Frank Warmerdam a ?crit :
> > On Sat, Aug 14, 2010 at 11:18 AM, Even Rouault
> > 
> > Even,
> > 
> > I'm generally ok with this change.  I would like to see it made explicit
> > that the name returned by OGRLayer::GetName() must always match the name
> > returned by the OGRFeatureDefn::GetName().
> 
> Yes 100% agreed : here's what is currently stated in the doc of the method
> : "This returns the same result as GetLayerDefn()->GetName()"
> 
> Is that clear enough ?
> 
> > I am also wondering if there are any other aspects that should be handled
> > this way.  Many applications want to show a list of laye names, and the
> > geometry type of the layer (ie. ogrinfo, QGIS, etc).  Should we also be
> > making the geometry type a virtual method fetch on the layer?
> 
> Yes, that makes sense although this is an information that is sometimes a
> bit harder to get than the name, however I can add easily it  :
> 
> OGRGeometryType OGRLayer::GetGeomType()
> 
> which should return the same as GetLayerDefn()->GetGeomType()
> 
> > I can see the change you propose being of benefit to essentially all the
> > RDBMS  drivers.
> 
> Yes, a quick look at the MYSQL driver shows that it could benefit from that
> too.
> 
> > Best regards,
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matt.wilkie at gov.yk.ca  Tue Aug 17 15:28:37 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Aug 17 15:28:48 2010
Subject: [gdal-dev] ArcGIS 10
In-Reply-To: <003701cb39cf$d6b1a150$8414e3f0$@roberts@duke.edu>
References: <SNT130-w36B99FDD724654FAD55538BC960@phx.gbl>	<-5553896686395738034@unknownmsgid>	<AANLkTin2-v365Lr8eBVTfq_vEKFOG5QqBsKfq2OepWac@mail.gmail.com>
	<003701cb39cf$d6b1a150$8414e3f0$@roberts@duke.edu>
Message-ID: <4C6AE2E5.9090306@gov.yk.ca>

Jason, thank you for this detailed explanation of goings on behind the 
curtain. Much of it is over my head, but I appreciate being able to now 
percieve the outline of the shadowy shapes in the fog. :)

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

On 11/08/2010 8:38 PM, Jason Roberts wrote:
> Francis,
>
> The ticket that I referenced (http://trac.osgeo.org/gdal/ticket/3672)
> contains comprehensive details. In short: prior to ArcGIS 9.3, ArcGIS
> executed Python geoprocessing tools by creating a separate python.exe
> process with command line arguments specifying the script to run and its
> parameters. In 9.3 ESRI introduced the capability of running the tools in
> the ArcGIS process itself (ArcCatalog.exe or ArcMap.exe). The ArcGIS
> processes embedded the Python interpreter using Python's C interface; see
> the Python docs for good info about how embedding is done. This provided
> performance advantages because a new process does not have to be created
> every time a tool is run and because the communication that occurs between
> the tool and the code that starts and monitors it does not have to occur as
> cross-process calls.
>
> Presumably to make things even faster, the ArcGIS processes instantiate a
> single Python interpreter when they start up and reuse this interpreter each
> time an in-process Python tool is run. But in between tool runs, a bug in
> ArcGIS causes it to remove all of the items in Python's sys.modules
> dictionary; apparently ArcGIS is calling Py_Initialize multiple times.
> sys.modules maps the names of Python modules loaded when Python "import"
> statements are executed to the actual objects representing the modules in
> memory. When the next Python tool runs and tries to import modules, the
> interpreter checks whether those modules are in sys.modules yet. Because
> they are not, the interpreter loads them again. This produces unpredictable
> results, depending on what the modules do.
>
> For most modules, it works ok and may just result in memory leaks. (I have
> not traced through enough of the Python interpreter source code to know for
> sure about that.) But for GDAL and other complex Python packages, it causes
> problems. In GDAL's case, several of the osgeo modules implemented in Python
> code (.py files) have a relationship with modules implemented in C (.pyd
> files). In particular, gdal_array.py calls functions implemented in
> _gdal_array.pyd. _gdal_array.pyd stores a pointer to the gdal_array.py
> module so it can access things defined in it. When ArcGIS clears out
> sys.modules, gdal_array.py must be imported again and now exists at a new
> memory address. _gdal_array.pyd is also imported again, but because of how
> Python loads modules written in C, it's C "init" function is not called
> again so it is stuck with the pointer to the old gdal_array.py.
>
> Eventually the geoprocessing script wants to read or write data from or to a
> raster. It calls Band.ReadAsArray or Band.WriteArray. Those functions
> ultimately cause gdal_array.py (the new one) to call _gdal_array.pyd and
> pass in a Band object that comes from the new .py files in sys.modules. But
> _gdal_array.pyd is expecting a Band object from the old .py files and raises
> an exception saying that the object passed in was not a Band instance. (See
> the ticket for the exact message.)
>
> My workaround is to save the contents of sys.modules to a cache after the
> geoprocessing tool runs and restore it when the script starts up again,
> basically:
>
> import sys, _GeoEcoArcGISHelper
> _GeoEcoArcGISHelper.LoadModulesFromCache()
> try:
>      # The real work of the script comes here.
>      ...
> finally:
>      _GeoEcoArcGISHelper.AddModulesToCache(sys.modules.keys())
>
> The cache is implemented in a module called GeoEcoArcGISHelper which written
> in C. (The name of my Python project is GeoEco.) Here is a link to that file
> in a svn repository:
>
> http://code.nicholas.duke.edu/projects/mget/browser/MGET/Branches/Jason/Pyth
> onPackage/src/GeoEco/_GeoEcoArcGISHelper.cpp
>
> Pretty ugly but it seems to work. I reviewed it with the ESRI geoprocessor
> developer that I'm working with; he agreed it was ugly but said it should
> work. Normally with Python you are not supposed to tamper with sys.modules
> directly but I looked at the Python 2.6.5 code and it seemed like it would
> not have any ill effects. No promises, however...
>
> Jason
>
> -----Original Message-----
> From: Francis Markham [mailto:fmarkham@gmail.com]
> Sent: Wednesday, August 11, 2010 10:14 PM
> To: Jason Roberts
> Cc: Discourse Maps; gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] ArcGIS 10
>
> Thanks for your encyclopedic response Jason!  If you don't mind
> detailing the problems with running GDAL scripts in process, and your
> work-around for avoiding it, I would be very interested.
>
> Cheers,
>
> Francis
>
> On 12 August 2010 02:49, Jason Roberts<jason.roberts@duke.edu>  wrote:
>> ArcGIS 10 installs Python 2.6 and numpy 1.3.0. It does not install GDAL
> with
>> Python bindings. It includes a new Python module from ESRI called ArcPy.
>> This module supposedly provides the capability of reading and writing
> raster
>> layers in the form of numpy arrays, similar to GDAL?s Python bindings. I
>> have not played with it much?only very briefly in Arc 9.4 Beta 2, when it
>> did not seem to work very well. If you search the Arc 10 online
>> documentation you can probably find more information.
>>
>>
>>
>> In principle, the ArcPy module may make it less necessary those developing
>> for ArcGIS with Python to resort to GDAL to read or write rasters. If you
> do
>> wish to use GDAL from ArcGIS 9.3 or 10, you must contend with an important
>> bug in ArcGIS that affects GDAL; see
> http://trac.osgeo.org/gdal/ticket/3672.
>> I am corresponding with the ESRI developer who is investigating this. He
>> expressed an interest in fixing this in Arc 10 SP1 but has not committed
> to
>> doing so at this time.
>>
>>
>>
>> To work around that, when creating Python-based geoprocessing tools that
> use
>> GDAL, you must disable the ?Run Python script in process? option in the
>> ArcGIS UI. That has certain implications on performance but is probably
> fine
>> for most people. I developed a hack that works around the ArcGIS bug that
>> allows you to enable the ?Run Python script in process? but unless you are
>> pretty savvy with Python (comfortable writing C extension modules) I do
> not
>> recommend that approach. If anyone is interested I can provide an example.
>>
>>
>>
>> Best,
>>
>> Jason
>>
>>
>>
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Discourse Maps
>> Sent: Wednesday, August 11, 2010 10:38 AM
>> To: gdal-dev@lists.osgeo.org
>> Subject: [gdal-dev] ArcGIS 10
>>
>>
>>
>> I hear the new ArcGIS10 has GDAL and NumPy built into the geoprocessor.
> If
>> this is true, does that mean that users will not have to install the
> various
>> Python library bindings GDAL, numpy, etc. after a full Arc10 install?
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> .
>
From gregor at hostgis.com  Tue Aug 17 16:31:08 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Tue Aug 17 16:37:25 2010
Subject: [gdal-dev] Java SWIG won't build
Message-ID: <4C6AF18C.7040309@hostgis.com>

Hey guys. I'm trying to build the Java SWIG wrapper on GDAL 1.6.4 I get 
this. Any ideas?

$ make build
mkdir -p org/gdal/gdal
mkdir -p org/gdal/gdalconst
mkdir -p org/gdal/ogr
mkdir -p org/gdal/osr
g++ -fPIC -fPIC -D_FILE_OFFSET_BITS=64 -fPIC  -Wall 
-Wdeclaration-after-statement  -I/tmp/gdal-1.6.2/port 
-I/tmp/gdal-1.6.2/gcore -I/tmp/gdal-1.6.2/alg -I/tmp/gdal-1.6.2/ogr 
-I/tmp/gdal-1.6.2/ogr/ogrsf_frmts -I/usr/local/jdk1.6.0_17/include 
-I/usr/local/jdk1.6.0_17/include/linux -c gdal_wrap.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is 
valid for C/ObjC but not for C++
g++ -shared  -L/tmp/gdal-1.6.2 -lgdal  -L/usr/lib -lgeos_c -L/usr/lib 
-lexpat -L/usr/lib -lxerces-c -lpthread -L/usr/lib -lNCSEcw -lNCSCnet 
-lNCSUtil -L/usr/lib -lhdf5  -L/usr/lib -lmfhdf -ldf -lsz -L/usr 
-L/usr/lib -lnetcdf -lpq -L/usr/lib -lpq -lz -L/usr -L/usr/lib -pthread 
-lm -lrt -ldl    -lcurl -L/tmp/Geo_DSDK-7.0.0.2167/lib/Release 
-L/tmp/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release -lltidsdk -lpthread 
-llt_kakadu   gdal_wrap.o -o libgdaljni.so
g++ -fPIC -fPIC -D_FILE_OFFSET_BITS=64 -fPIC  -Wall 
-Wdeclaration-after-statement  -I/tmp/gdal-1.6.2/port 
-I/tmp/gdal-1.6.2/gcore -I/tmp/gdal-1.6.2/alg -I/tmp/gdal-1.6.2/ogr 
-I/tmp/gdal-1.6.2/ogr/ogrsf_frmts -I/usr/local/jdk1.6.0_17/include 
-I/usr/local/jdk1.6.0_17/include/linux -c ogr_wrap.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is 
valid for C/ObjC but not for C++
g++ -shared  -L/tmp/gdal-1.6.2 -lgdal  -L/usr/lib -lgeos_c -L/usr/lib 
-lexpat -L/usr/lib -lxerces-c -lpthread -L/usr/lib -lNCSEcw -lNCSCnet 
-lNCSUtil -L/usr/lib -lhdf5  -L/usr/lib -lmfhdf -ldf -lsz -L/usr 
-L/usr/lib -lnetcdf -lpq -L/usr/lib -lpq -lz -L/usr -L/usr/lib -pthread 
-lm -lrt -ldl    -lcurl -L/tmp/Geo_DSDK-7.0.0.2167/lib/Release 
-L/tmp/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release -lltidsdk -lpthread 
-llt_kakadu   ogr_wrap.o -o libogrjni.so
gcc -fPIC -fPIC -D_FILE_OFFSET_BITS=64 -fPIC  -Wall 
-Wdeclaration-after-statement  -I/tmp/gdal-1.6.2/port 
-I/tmp/gdal-1.6.2/gcore -I/tmp/gdal-1.6.2/alg -I/tmp/gdal-1.6.2/ogr 
-I/tmp/gdal-1.6.2/ogr/ogrsf_frmts -I/usr/local/jdk1.6.0_17/include 
-I/usr/local/jdk1.6.0_17/include/linux -c gdalconst_wrap.c
g++ -shared  -L/tmp/gdal-1.6.2 -lgdal  -L/usr/lib -lgeos_c -L/usr/lib 
-lexpat -L/usr/lib -lxerces-c -lpthread -L/usr/lib -lNCSEcw -lNCSCnet 
-lNCSUtil -L/usr/lib -lhdf5  -L/usr/lib -lmfhdf -ldf -lsz -L/usr 
-L/usr/lib -lnetcdf -lpq -L/usr/lib -lpq -lz -L/usr -L/usr/lib -pthread 
-lm -lrt -ldl    -lcurl -L/tmp/Geo_DSDK-7.0.0.2167/lib/Release 
-L/tmp/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release -lltidsdk -lpthread 
-llt_kakadu   gdalconst_wrap.o -o libgdalconstjni.so
g++ -fPIC -fPIC -D_FILE_OFFSET_BITS=64 -fPIC  -Wall 
-Wdeclaration-after-statement  -I/tmp/gdal-1.6.2/port 
-I/tmp/gdal-1.6.2/gcore -I/tmp/gdal-1.6.2/alg -I/tmp/gdal-1.6.2/ogr 
-I/tmp/gdal-1.6.2/ogr/ogrsf_frmts -I/usr/local/jdk1.6.0_17/include 
-I/usr/local/jdk1.6.0_17/include/linux -c osr_wrap.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is 
valid for C/ObjC but not for C++
g++ -shared  -L/tmp/gdal-1.6.2 -lgdal  -L/usr/lib -lgeos_c -L/usr/lib 
-lexpat -L/usr/lib -lxerces-c -lpthread -L/usr/lib -lNCSEcw -lNCSCnet 
-lNCSUtil -L/usr/lib -lhdf5  -L/usr/lib -lmfhdf -ldf -lsz -L/usr 
-L/usr/lib -lnetcdf -lpq -L/usr/lib -lpq -lz -L/usr -L/usr/lib -pthread 
-lm -lrt -ldl    -lcurl -L/tmp/Geo_DSDK-7.0.0.2167/lib/Release 
-L/tmp/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release -lltidsdk -lpthread 
-llt_kakadu   osr_wrap.o -o libosrjni.so
cp ./.libs/*.so ./
cp: cannot stat `./.libs/*.so': No such file or directory
make: [build] Error 1 (ignored)
ant
Buildfile: /tmp/gdal-1.6.2/swig/java/build.xml

compile:
     [javac] Compiling 48 source files to 
/tmp/gdal-1.6.2/swig/java/build/classes
     [javac] 
/tmp/gdal-1.6.2/swig/java/org/gdal/gdal/MajorObject.java:71: 
SetMetadataItem(java.lang.String,java.lang.String,java.lang.String) is 
already defined in org.gdal.gdal.MajorObject
     [javac]   public int SetMetadataItem(String name, String value, 
String domain) {
     [javac]              ^
     [javac] 1 error

BUILD FAILED
/tmp/gdal-1.6.2/swig/java/build.xml:10: Compile failed; see the compiler 
error output for details.

Total time: 1 second
make: *** [build] Error 1


-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From gregor at hostgis.com  Tue Aug 17 16:43:30 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Tue Aug 17 16:43:38 2010
Subject: [gdal-dev] Java SWIG won't build
In-Reply-To: <4C6AF18C.7040309@hostgis.com>
References: <4C6AF18C.7040309@hostgis.com>
Message-ID: <4C6AF472.6070105@hostgis.com>

Funny; after the email came back to me the reply was right at the middle 
of the screen:  SetMetadataItem() was defined twice.

No idea why this was, but I removed the second and it built.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From benjamin.d.garrett at lmco.com  Tue Aug 17 17:52:36 2010
From: benjamin.d.garrett at lmco.com (Garrett, Benjamin D)
Date: Tue Aug 17 21:04:34 2010
Subject: [gdal-dev] retrieve specific tiff tags
Message-ID: <D87381913C7CDB46A5AD531B978AF9CA178F1B58D1@HVXMSP5.us.lmco.com>

Hi,

I would like to be able to retrieve the value of this tiff tag:
34737                    GeoAsciiParams

from a geotiff file.   How do I do this using GDAL?  I've searched the FAQ, the mailing list via google, this page: http://www.gdal.org/frmt_gtiff.html , etc.

When I dump the metadata for my file using "gdainfo", the tag above doesn't show up (even though I know it is present in the file by dumping it via other 3rd party tools). I assume this is because I don't know what the right domain name is to pass in via -mdd.  But I haven't found any list of domain names that might be appropriate for tiff.

Thanks,
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100817/0e446417/attachment.html
From warmerdam at pobox.com  Tue Aug 17 21:10:53 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 17 21:10:59 2010
Subject: [gdal-dev] retrieve specific tiff tags
In-Reply-To: <D87381913C7CDB46A5AD531B978AF9CA178F1B58D1@HVXMSP5.us.lmco.com>
References: <D87381913C7CDB46A5AD531B978AF9CA178F1B58D1@HVXMSP5.us.lmco.com>
Message-ID: <4C6B331D.4050104@pobox.com>

Garrett, Benjamin D wrote:
> Hi,
> 
>  
> 
> I would like to be able to retrieve the value of this tiff tag:
> 
> 34737                    GeoAsciiParams
> 
>  
> 
> from a geotiff file.   How do I do this using GDAL?  I?ve searched the 
> FAQ, the mailing list via google, this page: 
> http://www.gdal.org/frmt_gtiff.html , etc.
> 
>  
> 
> When I dump the metadata for my file using ?gdainfo?, the tag above 
> doesn?t show up (even though I know it is present in the file by dumping 
> it via other 3^rd party tools). I assume this is because I don?t know 
> what the right domain name is to pass in via -mdd.  But I haven?t found 
> any list of domain names that might be appropriate for tiff.

Ben,

This tag is considered internal structural information of the file,
and is not directly made available.  However, it will generally contain
things like the PSC citation name, datum name and such that are used to
build the projected coordinate system name.  So much of the contents will
typically come through in that fashion.

If you want to access such underlying TIFF tags you should really be
using libtiff, and TIFFGetField().  I would note that libgeotiff also
does not provide direct access to this tag.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Tue Aug 17 22:11:02 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue Aug 17 22:07:40 2010
Subject: [gdal-dev] GDAL driver for rasdaman: license acceptance
In-Reply-To: <4C6A7497.5000608@jacobs-university.de>
References: <4C6A7497.5000608@jacobs-university.de>
Message-ID: <4C6B4136.8090800@pmldnet.com>

Peter,

It is all going smoothly so far.

I will keep you posted.

Regards,

Ivan

Peter Baumann wrote:
> Dear GDAL maintainers,
> 
> this is to confirm that we (Constantin Jucovschi, as cc'ed and me) agree 
> to the GDAL commiter guidelines as set forth in 
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters  for the code submitted 
> under ticket http://trac.osgeo.org/gdal/ticket/3721 .
> 
> Kindly let us know of any further steps to be taken. In particular, we 
> will be happy to assist in the final code integration process.
> 
> regards,
> Peter
> 


From mail2vajram at gmail.com  Wed Aug 18 02:16:04 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Wed Aug 18 02:16:08 2010
Subject: [gdal-dev] how to (install) use gdal libraries in python
Message-ID: <1282112164632-5435197.post@n2.nabble.com>


I want to use gdal libraries in python. Till now i don't have the programming
knowledge in python. But already i am working with gdal in visual studio
with C#. I installed gdal libraries along with FWTools 2.4.7,and python 2.7.
But i dont know how to integrate these gdal libraries in python.

and

is there any way to use python libraries in visual studio simply by adding
reference.....

please help me......
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-install-use-gdal-libraries-in-python-tp5435197p5435197.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From p.baumann at jacobs-university.de  Wed Aug 18 02:26:34 2010
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Wed Aug 18 02:26:46 2010
Subject: [gdal-dev] GDAL driver for rasdaman: license acceptance
In-Reply-To: <4C6B4136.8090800@pmldnet.com>
References: <4C6A7497.5000608@jacobs-university.de>
	<4C6B4136.8090800@pmldnet.com>
Message-ID: <4C6B7D1A.3040901@jacobs-university.de>

excellent - thanks, Ivan!
-Peter


On 08/18/2010 04:11 AM, Lucena, Ivan wrote:
> Peter,
>
> It is all going smoothly so far.
>
> I will keep you posted.
>
> Regards,
>
> Ivan
>
> Peter Baumann wrote:
>    
>> Dear GDAL maintainers,
>>
>> this is to confirm that we (Constantin Jucovschi, as cc'ed and me) agree
>> to the GDAL commiter guidelines as set forth in
>> http://trac.osgeo.org/gdal/wiki/rfc3_commiters  for the code submitted
>> under ticket http://trac.osgeo.org/gdal/ticket/3721 .
>>
>> Kindly let us know of any further steps to be taken. In particular, we
>> will be happy to assist in the final code integration process.
>>
>> regards,
>> Peter
>>
>>      
>
>    

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 147737)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 10xx)



From anders.moe at geocap.no  Wed Aug 18 02:49:27 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Wed Aug 18 02:49:30 2010
Subject: [gdal-dev] OGR : geometric operations in place,
	docs says they're not
Message-ID: <AANLkTi=m4pBz5Gwboe7rhWVO4x2O6Yt0B6+Ji9MaS4-f@mail.gmail.com>

Hi everyone

I just noticed that the OGR docs says that

"Note that the family of spatial analysis methods (Equal(),
Disjoint()<http://www.gdal.org/ogr/classOGRGeometry.html#45f683761d57c8bea40e4ca1d832760a>,
..., ConvexHull()<http://www.gdal.org/ogr/classOGRGeometry.html#c906abd9b1cd9dd2b208a10c6e9d1bf0>
, Buffer()<http://www.gdal.org/ogr/classOGRGeometry.html#b34b27e2c8812a0fc1dccf055b11d1a2>,
...) are not implemented at this time.."


http://www.gdal.org/ogr/classOGRGeometry.html


<http://www.gdal.org/ogr/classOGRGeometry.html>although, looking at the
source code, they do indeed seem to  be implemented. Is that just the docs
out of date, or are these methods not considering complete ?

best regards,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100818/af926ae5/attachment.html
From Jez.Walters at ipl.com  Wed Aug 18 04:38:11 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Wed Aug 18 04:38:20 2010
Subject: [gdal-dev] Handling Ordnance Survey Change Only Updates
In-Reply-To: <Prayer.1.3.2.1008171612500.26169@webmail4.york.ac.uk>
References: <1281963033244-5427706.post@n2.nabble.com>
	<Prayer.1.3.2.1008170835530.15671@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F58@GOOFY.iplbath.com>
	<Prayer.1.3.2.1008171140170.13806@webmail4.york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02981827F91@GOOFY.iplbath.com>
	<Prayer.1.3.2.1008171612500.26169@webmail4.york.ac.uk>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A0298182802B@GOOFY.iplbath.com>

All,


>From the sentiments posted so far, I've decided to go with my original idea of using the Change Only Update (COU) GML data files to update the full GML data files, and then re-convert them to ESRI shapefiles.  Although this is obviously less efficient, it's a sporadic off-line process anyway so processing time isn't that critical.  If I have time I'll experiment with a database solution using PostGIS, mySQL or Oracle.

For what it's worth, I'd prefer to use the OGR/GML driver to read the full GML data directly, but MapServer won't read various key fields that I need to render the maps correctly.  Converting the GML to ESRI shapefiles overcomes this problem, but introduces a high conversion overhead.  Personally, I see this as a fault with MapServer/GDAL, but others may see it differently.

In any case, I need to pre-process the GML to accommodate various limitations in ogr2ogr, so adding a feature index at this point isn't too hard.  Thanks for all the very helpful advice!  :-)


Warm regards,


Jez


-----Original Message-----
From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
Sent: Tuesday 17 August 2010 16:13
To: Jez Walters
Cc: 'gdal-dev@lists.osgeo.org'
Subject: RE: [gdal-dev] Handling Ordnance Survey Change Only Updates

Jez,

On Aug 17 2010, Jez Walters wrote:

>Peter,
>
>
> I can't see how to use ogr2ogr with Change Only Updates (COU) either, but 
> I was hoping for a more definitive response (no offense intended)! :-)
>
> I'm receiving full and COU data in 'chunks' for the whole of Great 
> Britain, and features can move from chunk to chunk between updates. For 
> example, a bridge feature might be first described in the full data file 
> '123456-000012-10.gz' but amendments to this feature might be issued 
> three months later in the COU data file '123456-000011-10.gz'.
>
> Because of the data volumes involved, I can't process each full data 
> shapefile in turn to check its features against ALL of the changed 
> features for the WHOLE of Great Britain. I need an algorithm that 
> processes COU data files one at a time.
>
> I see the first step as establishing which full data shapefile contains a 
> given feature that has changed. Should I maintain my own feature index 
> for this, or can the OGR library work this out for me?
>
> Once I know which shapefile to edit, is it possible (however risky) to 
> add, update and delete features from it - and if so, how?
>

Echoing, perhaps, what Frank and Even have said, so long as your data 
repository has to be as shapefiles, I think you are going to have a lot of 
work to do. I'm fortunate in having a corporate Oracle licence on which to 
build, but PostGIS is a perfectly suitable alternative - shapefiles have so 
many built-in restrictions, consequent on their origin fifteen or so years 
ago. Indeed, if you need ESRI compatibility I gather PostGIS is supported 
from ArcGIS release 10. Managing the data in PostGIS should be as 
straightforward as in Oracle: you can easily extract shapefile segments as 
required but would no longer have the headache of creating and managing an 
index system to determine which feature is in which shapefile.

The OSGB FID can be either alphabetic or numeric - the first four 
characters are always OSGB and the rest is a sixteen digit integer (64 bit 
integer, then, rather than 32). I've been toying with the idea of using the 
integer form as the unique record ID / index column, but I think GDAL 
currently requires this column to be a 32bit integer; I do not yet know 
whether SDE 10 would handle a 64bit integer but I will need to interwork 
with this, so it may be a constraint for me but not for you. As I am 
working primarily with ITN-RRI, rather than the Topographic Layer, the way 
I handle the ID is critical ...

Even mentioned that there are some differences in the GML handling for GML2 
/ GML3. The OSGB GML claims to be GML2 but includes some GML3 constructs - 
I recall someone describing it as GML2.5 but cannot remember who or where. 
I do not know whether this is liable to cause any problems for you.

Best wishes,

Peter

>
>Warm regards,
>
>
>Jez
>
>
>-----Original Message-----
>From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
>Sent: Tuesday 17 August 2010 11:40
>To: Jez Walters
>Cc: 'gdal-dev@lists.osgeo.org'
>Subject: RE: [gdal-dev] Handling Ordnance Survey Change Only Updates
>
>Jez,
>
>   I rather doubt you could use ogr2ogr to effect a MasterMap update, I'm 
> afraid. I do not believe it to be designed to take two inputs and, 
> effectively, merge them to produce the output.
>
>   Yes, it is true that you can edit shapefiles to the extent that 
> records can be marked for deletion and new records added. However, you 
> need logic to identify the records to be updated - which, so far as I am 
> aware, does not exist within ogr2ogr, which is a data conversion tool. 
> There have been other postings regarding updating bounds and indeces, 
> which can all be wored around.
>
>    Because I am paranoid, I would not wish to do an in situ update of my 
> base reference data, such as MasterMap, without preserving the previous 
> version. As I do not believe the logic to exist to update a Mastermap 
> dataset from the Changes GML using GDAL, you will need to create this. 
> Thus the most sensible approach is to take the two inputs, existing 
> shapefile and GML updates, apply the updates and write out a new, updated 
> shapefile. You can, of course, delete or archive the old one once your QA 
> processes have been run and you are confident with the result.
>
>Best wishes,
>
>Peter
>
>On Aug 17 2010, Jez Walters wrote:
>
>>Peter,
>>
>>
>> I may be misinterpreting it, but the GDAL documentation 
>> (http://www.gdal.org/ogr/drv_shapefile.html) suggests that shapefiles 
>> CAN be edited:
>>
>> "The OGR shapefile driver supports rewriting existing shapes in a 
>> shapefile as well as deleting shapes. Deleted shapes are marked for 
>> deletion in the .dbf file, and then ignored by OGR. To actually remove 
>> them permanently (resulting in renumbering of FIDs) invoke the SQL 
>> 'REPACK <tablename>' via the datasource ExecuteSQL() method."
>>
>> I was rather hoping this would be implemented via ogr2ogr - can you 
>> confirm I'm right that ogr2ogr does NOT support this?
>> 
>>
>>Warm regards,
>>
>>
>>Jez
>>
>>
>>-----Original Message-----
>>From: pjh1@york.ac.uk [mailto:pjh1@york.ac.uk] On Behalf Of Peter Halls
>>Sent: Tuesday 17 August 2010 08:36
>>To: Jez Walters
>>Cc: gdal-dev@lists.osgeo.org
>>Subject: Re: [gdal-dev] Handling Ordnance Survey Change Only Updates
>>
>>Jez,
>>
>>   I would be surprised if GDAL can handle OSGB MasterMap change-only 
>> updates automatically. The process defined by OS is to locate and 
>> replace the records concerned. Because the update may change the 
>> geometry of a record, I do not believe this can be done on a shapefile 
>> in situ. Instead the procedure would be to input the shapefile 
>> sequentially until a record to be changed is liocated, outputing the 
>> input to a new shapefile and substituting the change record for the 
>> input as appropriate, gaining a new shapefile. On completion, the new 
>> shapefile will have the correct spatial index and bounds. Indeed, it is 
>> probably most sensible to adopt this approach to such updates regardless 
>> of the output format, as this is 'safe' against update problems - which, 
>> in theory, could result from a problematic GML file and permits easy 
>> reversion.
>>
>>Best wishes,
>>
>>Peter
>>
>>On Aug 16 2010, Jez Walters wrote:
>>
>>>
>>>Hello fellow GDAL users!
>>>
>>>
>>>I need to handle Change Only Updates (COU) for the UK Ordnance Survey
>>>MasterMap Topography Layer, and I was wondering how to approach this.
>>>
>>> Both the initial and COU data are supplied as GML, and I am currently 
>>> converting the initial data to ESRI shapefiles using ogr2ogr. However, 
>>> the ogr2ogr "-update" option won't update the shapefiles using the COU 
>>> data - unless I'm missing something?
>>>
>>>I currently see two ways of overcoming this:
>>>
>>> 1. Use the COU data to update the initial GML data, and then re-convert 
>>> the merged data to ESRI shapefiles 2. Use the COU data to directly 
>>> update the ESRI shapefiles
>>>
>>> Obviously the second approach is more efficient, but how difficult is 
>>> it to create, update and delete features using the GDAL python library?
>>>
>>>A few pointers for how to achieve this would be most welcome!  :-)
>>>
>>>
>>>Warm regards,
>>>
>>>
>>>Jez
>>>
>>
>>
>
>

-- 
--------------------------------------------------------------------------
Peter Halls, University of York GIS Advisor
Snail Mail: Computing Service, Heslington, York YO10 5DD, England
Telephone: 01904 433806   FAX: 01904 433740

This message has the status of a private & personal communication
--------------------------------------------------------------------------





The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From mail2vajram at gmail.com  Wed Aug 18 04:58:51 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Wed Aug 18 04:58:54 2010
Subject: [gdal-dev] Re: how to create a grid shape file with in the extent
 of the image
In-Reply-To: <AANLkTimME4GaJatwK4KiHxMqQLLgx5XtTTjdOJvDFsE_@mail.gmail.com>
References: <1280904733601-5371420.post@n2.nabble.com>
	<AANLkTimME4GaJatwK4KiHxMqQLLgx5XtTTjdOJvDFsE_@mail.gmail.com>
Message-ID: <1282121931225-5435530.post@n2.nabble.com>


thanks for ur reply...
But i am not familier with python programming. Can u help me please is there
any possibility to calculate the zonal statistics using gdal in C#. 

Please help me ........
thank you........
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-create-a-grid-shape-file-with-in-the-extent-of-the-image-tp5371420p5435530.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Wed Aug 18 05:32:39 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Aug 18 05:32:41 2010
Subject: [gdal-dev] how to (install) use gdal libraries in python
In-Reply-To: <1282112164632-5435197.post@n2.nabble.com>
References: <1282112164632-5435197.post@n2.nabble.com>
Message-ID: <AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>

Vajram,

You can start at http://trac.osgeo.org/gdal/wiki/GdalOgrInPython

On Wed, Aug 18, 2010 at 11:46 AM, mail2vajram <mail2vajram@gmail.com> wrote:

>
> I want to use gdal libraries in python. Till now i don't have the
> programming
> knowledge in python. But already i am working with gdal in visual studio
> with C#. I installed gdal libraries along with FWTools 2.4.7,and python
> 2.7.
> But i dont know how to integrate these gdal libraries in python.
>
> and
>
> is there any way to use python libraries in visual studio simply by adding
> reference.....
>
> please help me......
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/how-to-install-use-gdal-libraries-in-python-tp5435197p5435197.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100818/40c6d8f5/attachment-0001.html
From mail2vajram at gmail.com  Wed Aug 18 07:13:51 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Wed Aug 18 07:13:53 2010
Subject: [gdal-dev] Re: how to (install) use gdal libraries in python
In-Reply-To: <AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
References: <1282112164632-5435197.post@n2.nabble.com>
	<AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
Message-ID: <1282130031589-5435889.post@n2.nabble.com>


Thanks Mr.Chaitanya.. for ur reply...
 
I followed the procedure what the link provided by you, but after when i
used the simple code 

from osgeo import gdal  

in Python (ilde) 

when i run this code  i got the following exception.........



"Traceback (most recent call last):
  File "C:/Python27/ff.py", line 1, in <module>
    from osgeo import gdal
ImportError: No module named osgeo
>>> "


Please help me which steps i have to follow here.....
 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-install-use-gdal-libraries-in-python-tp5435197p5435889.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Aug 18 09:43:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug 18 09:43:57 2010
Subject: [gdal-dev] OGR : geometric operations in place, docs says
	they're not
In-Reply-To: <AANLkTi=m4pBz5Gwboe7rhWVO4x2O6Yt0B6+Ji9MaS4-f@mail.gmail.com>
References: <AANLkTi=m4pBz5Gwboe7rhWVO4x2O6Yt0B6+Ji9MaS4-f@mail.gmail.com>
Message-ID: <4C6BE397.6050504@pobox.com>

Anders Moe wrote:
> 
> Hi everyone
> 
> I just noticed that the OGR docs says that  
> 
> "Note that the family of spatial analysis methods (Equal(), Disjoint() 
> <http://www.gdal.org/ogr/classOGRGeometry.html#45f683761d57c8bea40e4ca1d832760a>, 
> ..., ConvexHull() 
> <http://www.gdal.org/ogr/classOGRGeometry.html#c906abd9b1cd9dd2b208a10c6e9d1bf0>, Buffer() 
> <http://www.gdal.org/ogr/classOGRGeometry.html#b34b27e2c8812a0fc1dccf055b11d1a2>, 
> ...) are not implemented at this time.."
> 
> 
> http://www.gdal.org/ogr/classOGRGeometry.html
> 
> 
> <http://www.gdal.org/ogr/classOGRGeometry.html>although, looking at the 
> source code, they do indeed seem to  be implemented. Is that just the 
> docs out of date, or are these methods not considering complete ? 

Anders,

The information is out of date.  I have now corrected the docs.  Note that
these methods do depend on GEOS being included in the build.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From benjamin.d.garrett at lmco.com  Wed Aug 18 10:22:10 2010
From: benjamin.d.garrett at lmco.com (Garrett, Benjamin D)
Date: Wed Aug 18 12:21:23 2010
Subject: EXTERNAL: Re: [gdal-dev] retrieve specific tiff tags
In-Reply-To: <4C6B331D.4050104@pobox.com>
References: <D87381913C7CDB46A5AD531B978AF9CA178F1B58D1@HVXMSP5.us.lmco.com>
	<4C6B331D.4050104@pobox.com>
Message-ID: <D87381913C7CDB46A5AD531B978AF9CA178F1B5DA9@HVXMSP5.us.lmco.com>

Thanks Frank.  I understand now but that is too bad because I have GeoTiff files that have data like this for tag 34737 GeoAsciiParams:

QT5 DEM|Null: -9999.000000, Non-Null Min: -21.640174, Non-Null Avg: 14.014185, Non-Null Max: 49.668544|

And another geotiff file with data like this for tag 34737 GeoAsciiParams:

Digital Elevation Model, Null: -10000|WGS 84 Ellipsoid|

The reason I need this data is specifically that I need a way to pull the Null/noData value from this file. I have searched through all of the other tiff tags in these files and this is the only place where I could find this information.

When I use gdal to read these two geotiffs, I call:

double noDataValue = poBand->GetNoDataValue(&bSrcHasNoData);

but bSrcHasNoData is always false.

These geotiffs are publicly available so if you are interested I could send you the links.

Ben

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, August 17, 2010 9:11 PM
To: Garrett, Benjamin D
Cc: 'gdal-dev@lists.osgeo.org'
Subject: EXTERNAL: Re: [gdal-dev] retrieve specific tiff tags

Garrett, Benjamin D wrote:
> Hi,
> 
>  
> 
> I would like to be able to retrieve the value of this tiff tag:
> 
> 34737                    GeoAsciiParams
> 
>  
> 
> from a geotiff file.   How do I do this using GDAL?  I've searched the 
> FAQ, the mailing list via google, this page: 
> http://www.gdal.org/frmt_gtiff.html , etc.
> 
>  
> 
> When I dump the metadata for my file using "gdainfo", the tag above 
> doesn't show up (even though I know it is present in the file by dumping 
> it via other 3^rd party tools). I assume this is because I don't know 
> what the right domain name is to pass in via -mdd.  But I haven't found 
> any list of domain names that might be appropriate for tiff.

Ben,

This tag is considered internal structural information of the file,
and is not directly made available.  However, it will generally contain
things like the PSC citation name, datum name and such that are used to
build the projected coordinate system name.  So much of the contents will
typically come through in that fashion.

If you want to access such underlying TIFF tags you should really be
using libtiff, and TIFFGetField().  I would note that libgeotiff also
does not provide direct access to this tag.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Wed Aug 18 12:31:14 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Aug 18 12:31:21 2010
Subject: [gdal-dev] Re: how to (install) use gdal libraries in python
In-Reply-To: <1282130031589-5435889.post@n2.nabble.com>
References: <1282112164632-5435197.post@n2.nabble.com>
	<AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
	<1282130031589-5435889.post@n2.nabble.com>
Message-ID: <4C6C0AD2.9090407@noaa.gov>

mail2vajram wrote:
> I followed the procedure what the link provided by you, but after when i
> used the simple code 
> 
> from osgeo import gdal  
> 
> in Python (ilde) 
> 
> when i run this code  i got the following exception.........
> 
> 
> 
> "Traceback (most recent call last):
>   File "C:/Python27/ff.py", line 1, in <module>
>     from osgeo import gdal
> ImportError: No module named osgeo

so it didn't get installed to your python at all.

To help you, we'll need to know what version of python you are running, 
and how you installed it, and exactly what you did to try to install 
GDAL and python bindings.

NOTE: last I tried the "official GDAL binaries were not up to date, and 
none of the other ones I found were compatible with the python binding 
eggs without tweaking things. It would be nice to have one simple way to 
get GDAL libs, utilities and python bindings all installed. (with the 
python.org python, version 2.5 and 2.6 -- and maybe 2.7 now)

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From matt.gregory at oregonstate.edu  Wed Aug 18 14:37:30 2010
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Aug 18 14:42:32 2010
Subject: [gdal-dev] ArcGIS 10 and GIO driver
Message-ID: <1D673F86DDA00841A1216F04D1CE70D6426032DD6D@EXCH2.nws.oregonstate.edu>

Hi all,

I know this is likely not to get a lot of attention, given that the GIO driver is currently unsupported and I'm guessing the issue is on the ArcGIS side.  But I'll give it a try anyway ...

I build GDAL from SVN trunk and had included the (old) GIO driver for ArcInfo output grid support.  At ArcInfo 9.x, this worked well (albeit without projection support).  However, now that I've installed ArcInfo 10, I'm getting license errors on simple utilities like gdal_translate, e.g.

  d:\matt>gdal_translate -of GIO dem.tif test_dem
  Input file size is 100, 100
  Warning 1: GIO driver only supports Float32, and Int32 datasets, not
  Int16 as requested for test_dem.  Treating as Int32.
  0Unauthorized license

The DLL aigridio.dll is still at the expected location (C:\ArcGIS\arcexe10x\bin) which is in my PATH and I haven't had any license issues otherwise (through Workstation, ArcMap, etc.).  Has anybody else run into this (unlikely) scenario?

Thanks for any help,
matt

From woodbri at swoodbridge.com  Wed Aug 18 21:38:01 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Aug 18 21:39:35 2010
Subject: [gdal-dev] Working with USGS NED data
Message-ID: <4C6C8AF9.7070802@swoodbridge.com>

Hi all,

I plan to download the USGS NED 1/3 arcsec dataset and I noticed it is 
available in 2 formats: ArcGrid and GridFloat

Is one easier, faster, smaller, etc to work with than the other?

My goal is to augment the Tiger road network with Z elevation data.

I'm wondering if there is a tool that already does this, like read a 
shapefile, augment with elevation and write a new shapefile. Or if I 
would need to write a tools that does that. Can postgis be used to do this?

Given a lat,lon, what is the fastest way to get the elevation?

Thank you for any input you can provide.

-Steve

From dylan.beaudette at gmail.com  Wed Aug 18 21:51:03 2010
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Aug 18 21:51:06 2010
Subject: [gdal-dev] Working with USGS NED data
In-Reply-To: <4C6C8AF9.7070802@swoodbridge.com>
References: <4C6C8AF9.7070802@swoodbridge.com>
Message-ID: <AANLkTikMaSZ00pWo2NvNr3nA4PKkAo3PQEijtZsSbeZQ@mail.gmail.com>

Supposing that you had the road network and USGS NED data loaded into
GRASS, you could use the v.drape command:

http://grass.itc.it/grass65/manuals/html65_user/v.drape.html

You may be able to automate this, by looping over counties,
downloading the minimum NED required, running v.drape, and then saving
the result.

Alternatively, you could craft a python solution that loops over
vertices of the road network, and submits requests to the NED point
elevation lookup. This would obviously be very slow, and possibly
memory-bound--- therefor you would need to chunk the operation,
possibly by county.

Do you really need the precision of the 1/3 arc second data? You do
realize that this is possibly a multi-terabyte data set?

Cheers,
Dylan

On Wed, Aug 18, 2010 at 6:38 PM, Stephen Woodbridge
<woodbri@swoodbridge.com> wrote:
> Hi all,
>
> I plan to download the USGS NED 1/3 arcsec dataset and I noticed it is
> available in 2 formats: ArcGrid and GridFloat
>
> Is one easier, faster, smaller, etc to work with than the other?
>
> My goal is to augment the Tiger road network with Z elevation data.
>
> I'm wondering if there is a tool that already does this, like read a
> shapefile, augment with elevation and write a new shapefile. Or if I would
> need to write a tools that does that. Can postgis be used to do this?
>
> Given a lat,lon, what is the fastest way to get the elevation?
>
> Thank you for any input you can provide.
>
> -Steve
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mail2vajram at gmail.com  Thu Aug 19 01:25:23 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Thu Aug 19 01:25:25 2010
Subject: [gdal-dev] Re: how to (install) use gdal libraries in python
In-Reply-To: <4C6C0AD2.9090407@noaa.gov>
References: <1282112164632-5435197.post@n2.nabble.com>
	<AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
	<1282130031589-5435889.post@n2.nabble.com>
	<4C6C0AD2.9090407@noaa.gov>
Message-ID: <1282195523149-5439003.post@n2.nabble.com>


Thanks for your response.....

I installed python 2.7(installation procedure in first slide), and download
gdal 32-1.6 files and extracted and placed in c drive(files in second
slide), then i set the envoronment variables(slide 3).Then when i wrote
simple one line code and run it. but i got the error(screen shot 3).. please
check the slides 

And FwTools 2.4.7 and arc gis are already installed in my system....
http://osgeo-org.1803224.n2.nabble.com/file/n5439003/gdalandpython.pptx
gdalandpython.pptx 
Thnak you...........
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-install-use-gdal-libraries-in-python-tp5435197p5439003.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mr.bryn at gmail.com  Thu Aug 19 01:32:30 2010
From: mr.bryn at gmail.com (Bryn Roberts)
Date: Thu Aug 19 01:32:32 2010
Subject: [gdal-dev] ogrinfo segmentation fault
Message-ID: <AANLkTinQ7sh-A6YhqzmmP89T-yDaDAsNVJdbCdMx8LjL@mail.gmail.com>

Hi all,

First, I've done a fair bit of googling for my problem and haven't got
anywhere. Hopefully I am just doing something stupid and there is an easy
fix!

I use the gdal-bin package on my debian lenny box, mostly for MapServer to
render data from MySQL Spatial.
Recently the gdal-bin package upgraded to version 1.5.2-3 and around the
same time MapServer stopped working when using MySQL Spatial layers.

I began troubleshooting this problem by following the steps on the MapServer
page for using MySQL via OGR (http://mapserver.org/input/vector/mysql.html) and
discovered that executing

"ogrinfo MYSQL:spatial,user=bryn,password=xxxx,port=3306"

returns

"Segmentation fault"

That's it, I don't get any other info out and I don't know where else I can
look to find more on why this error might be happening!

Hope someone can help me out.

Cheers,
Bryn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100819/fc8f5415/attachment.html
From ari.jolma at gmail.com  Thu Aug 19 03:26:00 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Aug 19 03:26:05 2010
Subject: [gdal-dev] swig generated files for Perl bindings removed from
	repository
Message-ID: <4C6CDC88.7050902@gmail.com>

Folks,

This was discussed a while ago[1] and while there was no general 
conclusion, I believe there is no requirement for the Perl bindings to 
keep the generated files in the repository. In fact, I recommend that 
the Perl bindings are regenerated every time they are built. The only 
exception is if you are using an official release (either of GDAL itself 
or Geo::GDAL - but see below), which is guaranteed to have updated 
bindings built in the release process.

Note that "make generate" in swig/perl is not guaranteed to build 
updated bindings since the dependencies are not complete, the old ones 
need to be deleted first with "rm *wrap*".

Perl bindings are not so picky on swig version. swig version in latest 
Ubuntu is 1.3.40 and it is ok, but also 2.0.0 seem to work ok (I just 
tested). swig for windows binaries also have worked without problems.

I have been negligent at updating the Perl bindings as a CPAN module. A 
CPAN package (currently Geo-GDAL-0.23.tar.gz) can be generated from the 
bindings by "make dist". The package includes the swig generated 
bindings. Testing now it seems that building the package out of GDAL 
distribution fails due to (at least) include file swq.h not being found. 
This is a known bug[2], not related to the Perl bindings.

Ari

[1] http://lists.osgeo.org/pipermail/gdal-dev/2009-May/020665.html
[2] http://trac.osgeo.org/gdal/ticket/3468

From ari.jolma at gmail.com  Thu Aug 19 03:35:25 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Aug 19 03:35:29 2010
Subject: [gdal-dev] Code sprint or other GDAL developers meetings in FOSS4G?
Message-ID: <4C6CDEBD.8020309@gmail.com>

Is anything planned? I would be interested in and available.

http://wiki.osgeo.org/wiki/FOSS4G_2010_Code_Sprint

Ari

From edikaradumi at gmail.com  Thu Aug 19 08:29:55 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Aug 19 08:29:57 2010
Subject: [gdal-dev] Creating new mosaic overview
Message-ID: <1282220995189-5439991.post@n2.nabble.com>


i have 3T of images and there are more than 12000 tiles. I want to create a
new mosaic overview. Im using the gdal_merge.py command. I cant use
gdal_merge for every 2 images. Is there any other way to merge the tiles for
the new layer? if my pixel size of the original tile are 0.08meters, how
many should be the size of the pixel of the merged tiles? I mean what pixel
size should i use in the gdal_merge.py ... -ps parameter?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Aug 19 08:48:14 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Aug 19 08:48:16 2010
Subject: [gdal-dev] Creating new mosaic overview
In-Reply-To: <1282220995189-5439991.post@n2.nabble.com>
References: <1282220995189-5439991.post@n2.nabble.com>
Message-ID: <AANLkTinbeZHyRwci38cfqwscsbmvuRtK31i4aW7HNUPB@mail.gmail.com>

Edi,

You don't have to specify the -ps parameter. You specify it only if you want
to set a specific resolution. Also, note that gdal_merge.py can accept more
than two files.

Another way to do what you are probably trying to do is to build a VRT
file[1] using gdalbuildvrt [2] and then build an external overview using
"gdaladdo -ro" specifying the level of overview.

On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com> wrote:

>
> i have 3T of images and there are more than 12000 tiles. I want to create a
> new mosaic overview. Im using the gdal_merge.py command. I cant use
> gdal_merge for every 2 images. Is there any other way to merge the tiles
> for
> the new layer? if my pixel size of the original tile are 0.08meters, how
> many should be the size of the pixel of the merged tiles? I mean what pixel
> size should i use in the gdal_merge.py ... -ps parameter?
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100819/33238abb/attachment.html
From warmerdam at pobox.com  Thu Aug 19 09:20:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Aug 19 09:20:16 2010
Subject: [gdal-dev] swig generated files for Perl bindings removed from
	repository
In-Reply-To: <4C6CDC88.7050902@gmail.com>
References: <4C6CDC88.7050902@gmail.com>
Message-ID: <4C6D2F8A.7050701@pobox.com>

Ari Jolma wrote:
> Folks,
> 
> This was discussed a while ago[1] and while there was no general 
> conclusion, I believe there is no requirement for the Perl bindings to 
> keep the generated files in the repository. In fact, I recommend that 
> the Perl bindings are regenerated every time they are built. The only 
> exception is if you are using an official release (either of GDAL itself 
> or Geo::GDAL - but see below), which is guaranteed to have updated 
> bindings built in the release process.
> 
> Note that "make generate" in swig/perl is not guaranteed to build 
> updated bindings since the dependencies are not complete, the old ones 
> need to be deleted first with "rm *wrap*".
> 
> Perl bindings are not so picky on swig version. swig version in latest 
> Ubuntu is 1.3.40 and it is ok, but also 2.0.0 seem to work ok (I just 
> tested). swig for windows binaries also have worked without problems.
> 
> I have been negligent at updating the Perl bindings as a CPAN module. A 
> CPAN package (currently Geo-GDAL-0.23.tar.gz) can be generated from the 
> bindings by "make dist". The package includes the swig generated 
> bindings. Testing now it seems that building the package out of GDAL 
> distribution fails due to (at least) include file swq.h not being found. 
> This is a known bug[2], not related to the Perl bindings.

Ari,

I agree, you are welcome to remove the perl bindings from the repository.
I see that the mkgdaldist.sh script is already regenerating the perl
(and C#) bindings when release and nightly distributions are prepared.

If it has not already been done, you should try to make the situation
clear in the documentation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From edikaradumi at gmail.com  Thu Aug 19 09:25:21 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Aug 19 09:25:25 2010
Subject: [gdal-dev] Re: Creating new mosaic overview
In-Reply-To: <AANLkTinbeZHyRwci38cfqwscsbmvuRtK31i4aW7HNUPB@mail.gmail.com>
References: <1282220995189-5439991.post@n2.nabble.com>
	<AANLkTinbeZHyRwci38cfqwscsbmvuRtK31i4aW7HNUPB@mail.gmail.com>
Message-ID: <1282224321544-5440218.post@n2.nabble.com>


Yep but im creating an overview so i need a lowered resolution so i need the
-ps parameter. I know that gdal_merge.py can take more than two files but
the new mosaiced overview will have 6000 or less tiles, thats why i said
that i dont want to write the command for every two tiles.  

Best Regards
Edi Karadumi


Edi,

You don't have to specify the -ps parameter. You specify it only if you want
to set a specific resolution. Also, note that gdal_merge.py can accept more
than two files.

Another way to do what you are probably trying to do is to build a VRT
file[1] using gdalbuildvrt [2] and then build an external overview using
"gdaladdo -ro" specifying the level of overview.

On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <[hidden email]> wrote:

i have 3T of images and there are more than 12000 tiles. I want to create a
new mosaic overview. Im using the gdal_merge.py command. I cant use
gdal_merge for every 2 images. Is there any other way to merge the tiles for
the new layer? if my pixel size of the original tile are 0.08meters, how
many should be the size of the pixel of the merged tiles? I mean what pixel
size should i use in the gdal_merge.py ... -ps parameter?
--


Chaitanya kumar CH wrote:
> 
> Edi,
> 
> You don't have to specify the -ps parameter. You specify it only if you
> want
> to set a specific resolution. Also, note that gdal_merge.py can accept
> more
> than two files.
> 
> Another way to do what you are probably trying to do is to build a VRT
> file[1] using gdalbuildvrt [2] and then build an external overview using
> "gdaladdo -ro" specifying the level of overview.
> 
> On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com>
> wrote:
> 
>>
>> i have 3T of images and there are more than 12000 tiles. I want to create
>> a
>> new mosaic overview. Im using the gdal_merge.py command. I cant use
>> gdal_merge for every 2 images. Is there any other way to merge the tiles
>> for
>> the new layer? if my pixel size of the original tile are 0.08meters, how
>> many should be the size of the pixel of the merged tiles? I mean what
>> pixel
>> size should i use in the gdal_merge.py ... -ps parameter?
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
Edi,

You don't have to specify the -ps parameter. You specify it only if you want
to set a specific resolution. Also, note that gdal_merge.py can accept more
than two files.

Another way to do what you are probably trying to do is to build a VRT
file[1] using gdalbuildvrt [2] and then build an external overview using
"gdaladdo -ro" specifying the level of overview.

On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com> wrote:

>
> i have 3T of images and there are more than 12000 tiles. I want to create
> a
> new mosaic overview. Im using the gdal_merge.py command. I cant use
> gdal_merge for every 2 images. Is there any other way to merge the tiles
> for
> the new layer? if my pixel size of the original tile are 0.08meters, how
> many should be the size of the pixel of the merged tiles? I mean what
> pixel
> size should i use in the gdal_merge.py ... -ps parameter?
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

Edi,

You don't have to specify the -ps parameter. You specify it only if you want
to set a specific resolution. Also, note that gdal_merge.py can accept more
than two files.

Another way to do what you are probably trying to do is to build a VRT
file[1] using gdalbuildvrt [2] and then build an external overview using
"gdaladdo -ro" specifying the level of overview.

On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com> wrote:

>
> i have 3T of images and there are more than 12000 tiles. I want to create
> a
> new mosaic overview. Im using the gdal_merge.py command. I cant use
> gdal_merge for every 2 images. Is there any other way to merge the tiles
> for
> the new layer? if my pixel size of the original tile are 0.08meters, how
> many should be the size of the pixel of the merged tiles? I mean what
> pixel
> size should i use in the gdal_merge.py ... -ps parameter?
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5440218.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From christian.mueller at nvoe.at  Thu Aug 19 09:33:28 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Thu Aug 19 09:46:02 2010
Subject: [gdal-dev] Re: Creating new mosaic overview
In-Reply-To: <1282224321544-5440218.post@n2.nabble.com>
References: <1282220995189-5439991.post@n2.nabble.com>
	<AANLkTinbeZHyRwci38cfqwscsbmvuRtK31i4aW7HNUPB@mail.gmail.com>
	<1282224321544-5440218.post@n2.nabble.com>
Message-ID: <20100819153328.efauwp8u0cg0c8kw@webmail.nvoe.at>

Look here, http://www.gdal.org/gdal_retile.html

I think this should do your job.

Cheers



Quoting "Edi.Karadumi" <edikaradumi@gmail.com>:

>
> Yep but im creating an overview so i need a lowered resolution so i need the
> -ps parameter. I know that gdal_merge.py can take more than two files but
> the new mosaiced overview will have 6000 or less tiles, thats why i said
> that i dont want to write the command for every two tiles.
>
> Best Regards
> Edi Karadumi
>
>
> Edi,
>
> You don't have to specify the -ps parameter. You specify it only if you want
> to set a specific resolution. Also, note that gdal_merge.py can accept more
> than two files.
>
> Another way to do what you are probably trying to do is to build a VRT
> file[1] using gdalbuildvrt [2] and then build an external overview using
> "gdaladdo -ro" specifying the level of overview.
>
> On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <[hidden email]> wrote:
>
> i have 3T of images and there are more than 12000 tiles. I want to create a
> new mosaic overview. Im using the gdal_merge.py command. I cant use
> gdal_merge for every 2 images. Is there any other way to merge the tiles for
> the new layer? if my pixel size of the original tile are 0.08meters, how
> many should be the size of the pixel of the merged tiles? I mean what pixel
> size should i use in the gdal_merge.py ... -ps parameter?
> --
>
>
> Chaitanya kumar CH wrote:
>>
>> Edi,
>>
>> You don't have to specify the -ps parameter. You specify it only if you
>> want
>> to set a specific resolution. Also, note that gdal_merge.py can accept
>> more
>> than two files.
>>
>> Another way to do what you are probably trying to do is to build a VRT
>> file[1] using gdalbuildvrt [2] and then build an external overview using
>> "gdaladdo -ro" specifying the level of overview.
>>
>> On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com>
>> wrote:
>>
>>>
>>> i have 3T of images and there are more than 12000 tiles. I want to create
>>> a
>>> new mosaic overview. Im using the gdal_merge.py command. I cant use
>>> gdal_merge for every 2 images. Is there any other way to merge the tiles
>>> for
>>> the new layer? if my pixel size of the original tile are 0.08meters, how
>>> many should be the size of the pixel of the merged tiles? I mean what
>>> pixel
>>> size should i use in the gdal_merge.py ... -ps parameter?
>>> --
>>> View this message in context:
>>> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> Edi,
>
> You don't have to specify the -ps parameter. You specify it only if you want
> to set a specific resolution. Also, note that gdal_merge.py can accept more
> than two files.
>
> Another way to do what you are probably trying to do is to build a VRT
> file[1] using gdalbuildvrt [2] and then build an external overview using
> "gdaladdo -ro" specifying the level of overview.
>
> On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com> wrote:
>
>>
>> i have 3T of images and there are more than 12000 tiles. I want to create
>> a
>> new mosaic overview. Im using the gdal_merge.py command. I cant use
>> gdal_merge for every 2 images. Is there any other way to merge the tiles
>> for
>> the new layer? if my pixel size of the original tile are 0.08meters, how
>> many should be the size of the pixel of the merged tiles? I mean what
>> pixel
>> size should i use in the gdal_merge.py ... -ps parameter?
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Edi,
>
> You don't have to specify the -ps parameter. You specify it only if you want
> to set a specific resolution. Also, note that gdal_merge.py can accept more
> than two files.
>
> Another way to do what you are probably trying to do is to build a VRT
> file[1] using gdalbuildvrt [2] and then build an external overview using
> "gdaladdo -ro" specifying the level of overview.
>
> On Thu, Aug 19, 2010 at 5:59 PM, Edi.Karadumi <edikaradumi@gmail.com> wrote:
>
>>
>> i have 3T of images and there are more than 12000 tiles. I want to create
>> a
>> new mosaic overview. Im using the gdal_merge.py command. I cant use
>> gdal_merge for every 2 images. Is there any other way to merge the tiles
>> for
>> the new layer? if my pixel size of the original tile are 0.08meters, how
>> many should be the size of the pixel of the merged tiles? I mean what
>> pixel
>> size should i use in the gdal_merge.py ... -ps parameter?
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5439991.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/Creating-new-mosaic-overview-tp5439991p5440218.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From warmerdam at pobox.com  Thu Aug 19 09:52:52 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Aug 19 09:52:56 2010
Subject: [gdal-dev] Code sprint or other GDAL developers meetings in
	FOSS4G?
In-Reply-To: <4C6CDEBD.8020309@gmail.com>
References: <4C6CDEBD.8020309@gmail.com>
Message-ID: <4C6D3734.6020606@pobox.com>

Ari Jolma wrote:
> Is anything planned? I would be interested in and available.
> 
> http://wiki.osgeo.org/wiki/FOSS4G_2010_Code_Sprint

Ari,

I anticipate being available that day and would be interested in
participating in the code sprint working on GDAL, MapServer, PROJ.4 or
related projects. I have taken the liberty of adding a list of
additional interested people with projects they might be interested in
working on in the wiki and including you and I.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Thu Aug 19 12:13:12 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Aug 19 12:13:18 2010
Subject: [gdal-dev] Re: how to (install) use gdal libraries in python
In-Reply-To: <1282195523149-5439003.post@n2.nabble.com>
References: <1282112164632-5435197.post@n2.nabble.com>
	<AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
	<1282130031589-5435889.post@n2.nabble.com> <4C6C0AD2.9090407@noaa.gov>
	<1282195523149-5439003.post@n2.nabble.com>
Message-ID: <4C6D5818.7080404@noaa.gov>

mail2vajram wrote:
> I installed python 2.7(installation procedure in first slide), and download
> gdal 32-1.6 files and extracted and placed in c drive(files in second
> slide), then i set the envoronment variables(slide 3).Then when i wrote
> simple one line code and run it. but i got the error(screen shot 3).. please
> check the slides 

sorry -- can't read pptx easily.

In the future, you will get better results from a mailing list if you 
put all the relevant information in text in your email itself. If you 
really need a screen shot, a .png or .jpg or something likely to be 
easily readable on all platforms is best.

But it sounds like you may never have installed the Python bindings 
themselves.

Check out the PDF Jay L. posted -- it's a bit our of date, but I don't 
know that anything has changed.

-Chris


> And FwTools 2.4.7 and arc gis are already installed in my system....
> http://osgeo-org.1803224.n2.nabble.com/file/n5439003/gdalandpython.pptx
> gdalandpython.pptx 
> Thnak you...........


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From joelodom at gmail.com  Thu Aug 19 14:13:57 2010
From: joelodom at gmail.com (Joel Odom)
Date: Thu Aug 19 14:14:00 2010
Subject: [gdal-dev] OGR Data Source Change Notifications
Message-ID: <AANLkTikoptO2dY4KqMh9F5+BviFqYs=RSoKn=a1SKY6y@mail.gmail.com>

We're trying to set up FalconView to redraw automatically when a PostGIS
table changes.  Does OGR have any facility for call backs when a data source
changes?  I can't find this feature, but maybe it's there somehow.  Thanks.



-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100819/e9e7d0e6/attachment.html
From even.rouault at mines-paris.org  Thu Aug 19 14:15:26 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 19 14:15:33 2010
Subject: [gdal-dev] OGR Data Source Change Notifications
In-Reply-To: <AANLkTikoptO2dY4KqMh9F5+BviFqYs=RSoKn=a1SKY6y@mail.gmail.com>
References: <AANLkTikoptO2dY4KqMh9F5+BviFqYs=RSoKn=a1SKY6y@mail.gmail.com>
Message-ID: <201008192015.26103.even.rouault@mines-paris.org>

Le jeudi 19 ao?t 2010 20:13:57, Joel Odom a ?crit :
> We're trying to set up FalconView to redraw automatically when a PostGIS
> table changes.  Does OGR have any facility for call backs when a data
> source changes?  I can't find this feature, but maybe it's there somehow. 
> Thanks.

Short (and long) answer: no ...
From joelodom at gmail.com  Thu Aug 19 14:17:56 2010
From: joelodom at gmail.com (Joel Odom)
Date: Thu Aug 19 14:17:59 2010
Subject: [gdal-dev] OGR Data Source Change Notifications
In-Reply-To: <201008192015.26103.even.rouault@mines-paris.org>
References: <AANLkTikoptO2dY4KqMh9F5+BviFqYs=RSoKn=a1SKY6y@mail.gmail.com>
	<201008192015.26103.even.rouault@mines-paris.org>
Message-ID: <AANLkTimHWjgHFZhhC8i_09A8jMm=w2o2dWKr5p-N0ngi@mail.gmail.com>

Merci.

If there are any ideas for work-arounds, shoot them my way!



On Thu, Aug 19, 2010 at 2:15 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le jeudi 19 ao?t 2010 20:13:57, Joel Odom a ?crit :
> > We're trying to set up FalconView to redraw automatically when a PostGIS
> > table changes.  Does OGR have any facility for call backs when a data
> > source changes?  I can't find this feature, but maybe it's there somehow.
> > Thanks.
>
> Short (and long) answer: no ...
>



-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100819/5d3bd935/attachment.html
From dlowther at COORDINATESOLUTIONS.COM  Thu Aug 19 14:56:38 2010
From: dlowther at COORDINATESOLUTIONS.COM (David Lowther)
Date: Thu Aug 19 14:56:39 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
Message-ID: <1282244198128-5441674.post@n2.nabble.com>


List,
	
I have an OVF layer defined as follows:

<OGRVRTDataSource>
        <OGRVRTLayer name="UserPoint">
         <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
         <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
         <GeometryField encoding="WKB" field="Feature"/>
  <FID>FID</FID>
        </OGRVRTLayer>
</OGRVRTDataSource>

The ODBC connection is to a SQL Express 2008 database. The PointData table
is defined as follows:

CREATE TABLE [dbo].[PointData](
 [PKey] [int] IDENTITY(1,1) NOT NULL,
 [Feature] [geometry] NULL,
 CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
(
 [PKey] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

This query

select *, Feature.STAsText() from pointdata

yields

1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)

"ogrinfo test.ovf --debug on" runs for a very long time returning many lines
of this sort of stuff:

ERROR 4: Update access not supported for VRT datasources.
OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
ODBC: SQLConnect(CLO)
ODBC: CatalogNameL: (null)
Schema name: (null)

OGR_ODBC: Table PointData has no identified FID column.
OGR_ODBC: Table UserMapData has no identified FID column.
OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.

before finally saying:

OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
OGR_ODBC: Table SELECT has no identified FID column.
OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
Had to open data source read-only.
INFO: Open of `test.ovf'
      using driver `VRT' successful.
OGR: GetLayerCount() = 1

1: UserPoint
OGR: ReleaseDataSource(ODBC:sa/!Q2w3e4r@CLO/02C79D10) dereferenced and now
destroying.
ODBC: SQLDisconnect()

GDAL version is 1.6.0.

I have tried using no FID tag and using SrcLayer instead of SrcSQL. Anybody
know what I could do to make it see the FID? I'm guessing it would be a lot
faster if it didn't check every table in the database for an FID...

Thanks in advance for your assistance,

Dave Lowther

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-OVF-has-no-identified-FID-column-tp5441674p5441674.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dlowther at coordinatesolutions.com  Thu Aug 19 15:30:38 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Thu Aug 19 15:37:19 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <4C6D82AE.7040606@geoanalytic.com>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
Message-ID: <5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>

Brent,

Thanks for the reply. On initial read I thought you had found my issue -
that I was trying so many things I finally messed it all up. But on closer
inspection I am aliasing the PKey column to FID in the SrcSQL (select PKey
as FID, Feature from PointData).

When <FID>FID</FID> ogrinfo returns:

ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
OGR_ODBC: Table SELECT has no identified FID column.
OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
Had to open data source read-only.
INFO: Open of `test.ovf'
      using driver `VRT' successful.
OGR: GetLayerCount() = 1

1: UserPoint
OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
destroying.
ODBC: SQLDisconnect()

When <FID>PKEY</FID> ogrinfo returns:

ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
OGR_ODBC: Table SELECT has no identified FID column.
ERROR 1: Unable to identify FID field 'PKey'.
OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
destroying.
ODBC: SQLDisconnect()
FAILURE:
Unable to open datasource `test.ovf' with the following drivers.
  -> ESRI Shapefile


David Lowther
 
Coordinate Solutions, Inc.
 

-----Original Message-----
From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
Sent: Thursday, August 19, 2010 3:15 PM
To: David Lowther
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR OVF has no identified FID column

How about using:
<FID>PKey</FID>

but that doesn't explain why it takes a long time...

Best Regards,
Brent Fraser


David Lowther wrote:
> List,
> 	
> I have an OVF layer defined as follows:
> 
> <OGRVRTDataSource>
>         <OGRVRTLayer name="UserPoint">
>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>          <GeometryField encoding="WKB" field="Feature"/>
>   <FID>FID</FID>
>         </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> The ODBC connection is to a SQL Express 2008 database. The PointData table
> is defined as follows:
> 
> CREATE TABLE [dbo].[PointData](
>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>  [Feature] [geometry] NULL,
>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
> (
>  [PKey] ASC
> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
> ) ON [PRIMARY]
> 
> This query
> 
> select *, Feature.STAsText() from pointdata
> 
> yields
> 
> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
> 
> "ogrinfo test.ovf --debug on" runs for a very long time returning many
lines
> of this sort of stuff:
> 
> ERROR 4: Update access not supported for VRT datasources.
> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
> ODBC: SQLConnect(CLO)
> ODBC: CatalogNameL: (null)
> Schema name: (null)
> 
> OGR_ODBC: Table PointData has no identified FID column.
> OGR_ODBC: Table UserMapData has no identified FID column.
> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
> 
> before finally saying:
> 
> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
> OGR_ODBC: Table SELECT has no identified FID column.
> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 1: UserPoint
> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
> destroying.
> ODBC: SQLDisconnect()
> 
> GDAL version is 1.6.0.
> 
> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
Anybody
> know what I could do to make it see the FID? I'm guessing it would be a
lot
> faster if it didn't check every table in the database for an FID...
> 
> Thanks in advance for your assistance,
> 
> Dave Lowther
> 


From bfraser at geoanalytic.com  Thu Aug 19 15:49:29 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Aug 19 15:49:37 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
	<5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
Message-ID: <4C6D8AC9.9020206@geoanalytic.com>

Yeah I saw that after I sent the message.  Take out the  <SrcSQL>, it's really 
only useful if want to do "special" things, and it can kill spatial indexing on 
ODBC datasources.  Does this work any better:

<OGRVRTDataSource>
     <OGRVRTLayer name="UserPoint">
          <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
          <GeometryField encoding="WKB" field="Feature"/>
          <FID>PKey</FID>
     </OGRVRTLayer>
</OGRVRTDataSource>


Brent

David Lowther wrote:
> Brent,
> 
> Thanks for the reply. On initial read I thought you had found my issue -
> that I was trying so many things I finally messed it all up. But on closer
> inspection I am aliasing the PKey column to FID in the SrcSQL (select PKey
> as FID, Feature from PointData).
> 
> When <FID>FID</FID> ogrinfo returns:
> 
> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
> OGR_ODBC: Table SELECT has no identified FID column.
> OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 1: UserPoint
> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
> destroying.
> ODBC: SQLDisconnect()
> 
> When <FID>PKEY</FID> ogrinfo returns:
> 
> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
> OGR_ODBC: Table SELECT has no identified FID column.
> ERROR 1: Unable to identify FID field 'PKey'.
> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
> destroying.
> ODBC: SQLDisconnect()
> FAILURE:
> Unable to open datasource `test.ovf' with the following drivers.
>   -> ESRI Shapefile
> 
> 
> David Lowther
>  
> Coordinate Solutions, Inc.
>  
> 
> -----Original Message-----
> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
> Sent: Thursday, August 19, 2010 3:15 PM
> To: David Lowther
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
> 
> How about using:
> <FID>PKey</FID>
> 
> but that doesn't explain why it takes a long time...
> 
> Best Regards,
> Brent Fraser
> 
> 
> David Lowther wrote:
>> List,
>> 	
>> I have an OVF layer defined as follows:
>>
>> <OGRVRTDataSource>
>>         <OGRVRTLayer name="UserPoint">
>>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>>          <GeometryField encoding="WKB" field="Feature"/>
>>   <FID>FID</FID>
>>         </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> The ODBC connection is to a SQL Express 2008 database. The PointData table
>> is defined as follows:
>>
>> CREATE TABLE [dbo].[PointData](
>>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>>  [Feature] [geometry] NULL,
>>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
>> (
>>  [PKey] ASC
>> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
>> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>> ) ON [PRIMARY]
>>
>> This query
>>
>> select *, Feature.STAsText() from pointdata
>>
>> yields
>>
>> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
>>
>> "ogrinfo test.ovf --debug on" runs for a very long time returning many
> lines
>> of this sort of stuff:
>>
>> ERROR 4: Update access not supported for VRT datasources.
>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>> ODBC: SQLConnect(CLO)
>> ODBC: CatalogNameL: (null)
>> Schema name: (null)
>>
>> OGR_ODBC: Table PointData has no identified FID column.
>> OGR_ODBC: Table UserMapData has no identified FID column.
>> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
>>
>> before finally saying:
>>
>> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>> OGR_ODBC: Table SELECT has no identified FID column.
>> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
>> Had to open data source read-only.
>> INFO: Open of `test.ovf'
>>       using driver `VRT' successful.
>> OGR: GetLayerCount() = 1
>>
>> 1: UserPoint
>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
>> destroying.
>> ODBC: SQLDisconnect()
>>
>> GDAL version is 1.6.0.
>>
>> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
> Anybody
>> know what I could do to make it see the FID? I'm guessing it would be a
> lot
>> faster if it didn't check every table in the database for an FID...
>>
>> Thanks in advance for your assistance,
>>
>> Dave Lowther
>>
> 
> 
> 

From dlowther at coordinatesolutions.com  Thu Aug 19 15:55:03 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Thu Aug 19 15:55:05 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <4C6D8AC9.9020206@geoanalytic.com>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
	<5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
	<4C6D8AC9.9020206@geoanalytic.com>
Message-ID: <74E1B79A1CAD4D1EA5928E117BED7FB8@dlq6600>

Still doesn't see the FID but is way faster! 

<OGRVRTDataSource>
     <OGRVRTLayer name="PointData">
          <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
          <GeometryField encoding="WKB" field="Feature"/>
          <FID>PKey</FID>
     </OGRVRTLayer>
</OGRVRTDataSource>

ogrinfo test.ovf --debug on

ERROR 4: Update access not supported for VRT datasources.
OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
ODBC: SQLConnect(CLO)
OGR_ODBC: Table PointData has no identified FID column.
OGR: OGROpen(ODBC:un/pw@CLO,PointData/02799B88) succeeded as ODBC.
OGR: OGROpen(test.ovf/010270B8) succeeded as VRT.
Had to open data source read-only.
INFO: Open of `test.ovf'
      using driver `VRT' successful.
OGR: GetLayerCount() = 1

1: PointData
ODBC: SQLDisconnect()



Does the datatype of the FID column matter? I have it as an int, does it
need to be guid?

David Lowther
 
Coordinate Solutions, Inc.
 

-----Original Message-----
From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
Sent: Thursday, August 19, 2010 3:49 PM
To: David Lowther
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR OVF has no identified FID column

Yeah I saw that after I sent the message.  Take out the  <SrcSQL>, it's
really 
only useful if want to do "special" things, and it can kill spatial indexing
on 
ODBC datasources.  Does this work any better:

<OGRVRTDataSource>
     <OGRVRTLayer name="UserPoint">
          <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
          <GeometryField encoding="WKB" field="Feature"/>
          <FID>PKey</FID>
     </OGRVRTLayer>
</OGRVRTDataSource>


Brent

David Lowther wrote:
> Brent,
> 
> Thanks for the reply. On initial read I thought you had found my issue -
> that I was trying so many things I finally messed it all up. But on closer
> inspection I am aliasing the PKey column to FID in the SrcSQL (select PKey
> as FID, Feature from PointData).
> 
> When <FID>FID</FID> ogrinfo returns:
> 
> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
> OGR_ODBC: Table SELECT has no identified FID column.
> OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 1: UserPoint
> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
> destroying.
> ODBC: SQLDisconnect()
> 
> When <FID>PKEY</FID> ogrinfo returns:
> 
> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
> OGR_ODBC: Table SELECT has no identified FID column.
> ERROR 1: Unable to identify FID field 'PKey'.
> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
> destroying.
> ODBC: SQLDisconnect()
> FAILURE:
> Unable to open datasource `test.ovf' with the following drivers.
>   -> ESRI Shapefile
> 
> 
> David Lowther
>  
> Coordinate Solutions, Inc.
>  
> 
> -----Original Message-----
> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
> Sent: Thursday, August 19, 2010 3:15 PM
> To: David Lowther
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
> 
> How about using:
> <FID>PKey</FID>
> 
> but that doesn't explain why it takes a long time...
> 
> Best Regards,
> Brent Fraser
> 
> 
> David Lowther wrote:
>> List,
>> 	
>> I have an OVF layer defined as follows:
>>
>> <OGRVRTDataSource>
>>         <OGRVRTLayer name="UserPoint">
>>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>>          <GeometryField encoding="WKB" field="Feature"/>
>>   <FID>FID</FID>
>>         </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> The ODBC connection is to a SQL Express 2008 database. The PointData
table
>> is defined as follows:
>>
>> CREATE TABLE [dbo].[PointData](
>>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>>  [Feature] [geometry] NULL,
>>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
>> (
>>  [PKey] ASC
>> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
>> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>> ) ON [PRIMARY]
>>
>> This query
>>
>> select *, Feature.STAsText() from pointdata
>>
>> yields
>>
>> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
>>
>> "ogrinfo test.ovf --debug on" runs for a very long time returning many
> lines
>> of this sort of stuff:
>>
>> ERROR 4: Update access not supported for VRT datasources.
>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>> ODBC: SQLConnect(CLO)
>> ODBC: CatalogNameL: (null)
>> Schema name: (null)
>>
>> OGR_ODBC: Table PointData has no identified FID column.
>> OGR_ODBC: Table UserMapData has no identified FID column.
>> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
>>
>> before finally saying:
>>
>> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>> OGR_ODBC: Table SELECT has no identified FID column.
>> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
>> Had to open data source read-only.
>> INFO: Open of `test.ovf'
>>       using driver `VRT' successful.
>> OGR: GetLayerCount() = 1
>>
>> 1: UserPoint
>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
>> destroying.
>> ODBC: SQLDisconnect()
>>
>> GDAL version is 1.6.0.
>>
>> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
> Anybody
>> know what I could do to make it see the FID? I'm guessing it would be a
> lot
>> faster if it didn't check every table in the database for an FID...
>>
>> Thanks in advance for your assistance,
>>
>> Dave Lowther
>>
> 
> 
> 


From bfraser at geoanalytic.com  Thu Aug 19 17:21:12 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Aug 19 17:21:28 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <74E1B79A1CAD4D1EA5928E117BED7FB8@dlq6600>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
	<5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
	<4C6D8AC9.9020206@geoanalytic.com>
	<74E1B79A1CAD4D1EA5928E117BED7FB8@dlq6600>
Message-ID: <4C6DA048.1020205@geoanalytic.com>

I think it's faster since it doesn't have to enumerate all the tables,views, etc.

so how do you get for attributes names when you do a

ogrinfo test.ovf  PointData --debug on

Brent

David Lowther wrote:
> Still doesn't see the FID but is way faster! 
> 
> <OGRVRTDataSource>
>      <OGRVRTLayer name="PointData">
>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>           <GeometryField encoding="WKB" field="Feature"/>
>           <FID>PKey</FID>
>      </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> ogrinfo test.ovf --debug on
> 
> ERROR 4: Update access not supported for VRT datasources.
> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
> ODBC: SQLConnect(CLO)
> OGR_ODBC: Table PointData has no identified FID column.
> OGR: OGROpen(ODBC:un/pw@CLO,PointData/02799B88) succeeded as ODBC.
> OGR: OGROpen(test.ovf/010270B8) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 1: PointData
> ODBC: SQLDisconnect()
> 
> 
> 
> Does the datatype of the FID column matter? I have it as an int, does it
> need to be guid?
> 
> David Lowther
>  
> Coordinate Solutions, Inc.
>  
> 
> -----Original Message-----
> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
> Sent: Thursday, August 19, 2010 3:49 PM
> To: David Lowther
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
> 
> Yeah I saw that after I sent the message.  Take out the  <SrcSQL>, it's
> really 
> only useful if want to do "special" things, and it can kill spatial indexing
> on 
> ODBC datasources.  Does this work any better:
> 
> <OGRVRTDataSource>
>      <OGRVRTLayer name="UserPoint">
>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>           <GeometryField encoding="WKB" field="Feature"/>
>           <FID>PKey</FID>
>      </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> 
> Brent
> 
> David Lowther wrote:
>> Brent,
>>
>> Thanks for the reply. On initial read I thought you had found my issue -
>> that I was trying so many things I finally messed it all up. But on closer
>> inspection I am aliasing the PKey column to FID in the SrcSQL (select PKey
>> as FID, Feature from PointData).
>>
>> When <FID>FID</FID> ogrinfo returns:
>>
>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>> OGR_ODBC: Table SELECT has no identified FID column.
>> OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
>> Had to open data source read-only.
>> INFO: Open of `test.ovf'
>>       using driver `VRT' successful.
>> OGR: GetLayerCount() = 1
>>
>> 1: UserPoint
>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
>> destroying.
>> ODBC: SQLDisconnect()
>>
>> When <FID>PKEY</FID> ogrinfo returns:
>>
>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>> OGR_ODBC: Table SELECT has no identified FID column.
>> ERROR 1: Unable to identify FID field 'PKey'.
>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
>> destroying.
>> ODBC: SQLDisconnect()
>> FAILURE:
>> Unable to open datasource `test.ovf' with the following drivers.
>>   -> ESRI Shapefile
>>
>>
>> David Lowther
>>  
>> Coordinate Solutions, Inc.
>>  
>>
>> -----Original Message-----
>> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
>> Sent: Thursday, August 19, 2010 3:15 PM
>> To: David Lowther
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
>>
>> How about using:
>> <FID>PKey</FID>
>>
>> but that doesn't explain why it takes a long time...
>>
>> Best Regards,
>> Brent Fraser
>>
>>
>> David Lowther wrote:
>>> List,
>>> 	
>>> I have an OVF layer defined as follows:
>>>
>>> <OGRVRTDataSource>
>>>         <OGRVRTLayer name="UserPoint">
>>>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>>>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>>>          <GeometryField encoding="WKB" field="Feature"/>
>>>   <FID>FID</FID>
>>>         </OGRVRTLayer>
>>> </OGRVRTDataSource>
>>>
>>> The ODBC connection is to a SQL Express 2008 database. The PointData
> table
>>> is defined as follows:
>>>
>>> CREATE TABLE [dbo].[PointData](
>>>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>>>  [Feature] [geometry] NULL,
>>>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
>>> (
>>>  [PKey] ASC
>>> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
>>> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>>> ) ON [PRIMARY]
>>>
>>> This query
>>>
>>> select *, Feature.STAsText() from pointdata
>>>
>>> yields
>>>
>>> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
>>>
>>> "ogrinfo test.ovf --debug on" runs for a very long time returning many
>> lines
>>> of this sort of stuff:
>>>
>>> ERROR 4: Update access not supported for VRT datasources.
>>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>>> ODBC: SQLConnect(CLO)
>>> ODBC: CatalogNameL: (null)
>>> Schema name: (null)
>>>
>>> OGR_ODBC: Table PointData has no identified FID column.
>>> OGR_ODBC: Table UserMapData has no identified FID column.
>>> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
>>>
>>> before finally saying:
>>>
>>> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>> OGR_ODBC: Table SELECT has no identified FID column.
>>> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
>>> Had to open data source read-only.
>>> INFO: Open of `test.ovf'
>>>       using driver `VRT' successful.
>>> OGR: GetLayerCount() = 1
>>>
>>> 1: UserPoint
>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
>>> destroying.
>>> ODBC: SQLDisconnect()
>>>
>>> GDAL version is 1.6.0.
>>>
>>> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
>> Anybody
>>> know what I could do to make it see the FID? I'm guessing it would be a
>> lot
>>> faster if it didn't check every table in the database for an FID...
>>>
>>> Thanks in advance for your assistance,
>>>
>>> Dave Lowther
>>>
>>
>>
> 
> 
> 

From dlowther at coordinatesolutions.com  Thu Aug 19 19:33:08 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Thu Aug 19 19:33:09 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <4C6DA048.1020205@geoanalytic.com>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
	<5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
	<4C6D8AC9.9020206@geoanalytic.com>
	<74E1B79A1CAD4D1EA5928E117BED7FB8@dlq6600>
	<4C6DA048.1020205@geoanalytic.com>
Message-ID: <BAE011C34DB94D698A8BC9A12EAA9160@dlq6600>

D:\Utility\ms4w\tools\gdal-ogr>ogrinfo test.ovf  PointData --debug on
ERROR 4: Update access not supported for VRT datasources.
OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
ODBC: SQLConnect(CLO)
OGR_ODBC: Table PointData has no identified FID column.
OGR: OGROpen(ODBC:un/pw@CLO,PointData/00FB9BB0) succeeded as ODBC.
OGR: OGROpen(test.ovf/010870B8) succeeded as VRT.
Had to open data source read-only.
INFO: Open of `test.ovf'
      using driver `VRT' successful.
OGR: GetLayerCount() = 1


Layer name: PointData
Geometry: Unknown (any)
OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
Feature Count: 1
OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
Extent: (0.000000, 2.000000) - (0.000000, 2.000000)
Layer SRS WKT:
(unknown)
PKey: Integer (10.0)
Feature: Binary (0.0)
OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
OGRFeature(PointData):1
  PKey (Integer) = 1
  Feature (Binary) = 00000000010C0000000000C062400000000000C06240
  POINT (0.0 2.000000000021871)

VRT: 2 features read on layer 'PointData'.
OGR_ODBC: 3 features read on layer 'PointData'.
ODBC: SQLDisconnect()




And, why do you think it is saying 0.0 2.000000... for the point when the
SQL query says?

1	0x00000000010C0000000000C062400000000000C06240	POINT (150 150)



David Lowther
 
Coordinate Solutions, Inc.
 

-----Original Message-----
From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
Sent: Thursday, August 19, 2010 5:21 PM
To: David Lowther
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR OVF has no identified FID column

I think it's faster since it doesn't have to enumerate all the tables,views,
etc.

so how do you get for attributes names when you do a

ogrinfo test.ovf  PointData --debug on

Brent

David Lowther wrote:
> Still doesn't see the FID but is way faster! 
> 
> <OGRVRTDataSource>
>      <OGRVRTLayer name="PointData">
>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>           <GeometryField encoding="WKB" field="Feature"/>
>           <FID>PKey</FID>
>      </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> ogrinfo test.ovf --debug on
> 
> ERROR 4: Update access not supported for VRT datasources.
> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
> ODBC: SQLConnect(CLO)
> OGR_ODBC: Table PointData has no identified FID column.
> OGR: OGROpen(ODBC:un/pw@CLO,PointData/02799B88) succeeded as ODBC.
> OGR: OGROpen(test.ovf/010270B8) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 1: PointData
> ODBC: SQLDisconnect()
> 
> 
> 
> Does the datatype of the FID column matter? I have it as an int, does it
> need to be guid?
> 
> David Lowther
>  
> Coordinate Solutions, Inc.
>  
> 
> -----Original Message-----
> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
> Sent: Thursday, August 19, 2010 3:49 PM
> To: David Lowther
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
> 
> Yeah I saw that after I sent the message.  Take out the  <SrcSQL>, it's
> really 
> only useful if want to do "special" things, and it can kill spatial
indexing
> on 
> ODBC datasources.  Does this work any better:
> 
> <OGRVRTDataSource>
>      <OGRVRTLayer name="UserPoint">
>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>           <GeometryField encoding="WKB" field="Feature"/>
>           <FID>PKey</FID>
>      </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> 
> Brent
> 
> David Lowther wrote:
>> Brent,
>>
>> Thanks for the reply. On initial read I thought you had found my issue -
>> that I was trying so many things I finally messed it all up. But on
closer
>> inspection I am aliasing the PKey column to FID in the SrcSQL (select
PKey
>> as FID, Feature from PointData).
>>
>> When <FID>FID</FID> ogrinfo returns:
>>
>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>> OGR_ODBC: Table SELECT has no identified FID column.
>> OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
>> Had to open data source read-only.
>> INFO: Open of `test.ovf'
>>       using driver `VRT' successful.
>> OGR: GetLayerCount() = 1
>>
>> 1: UserPoint
>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
>> destroying.
>> ODBC: SQLDisconnect()
>>
>> When <FID>PKEY</FID> ogrinfo returns:
>>
>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>> OGR_ODBC: Table SELECT has no identified FID column.
>> ERROR 1: Unable to identify FID field 'PKey'.
>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
>> destroying.
>> ODBC: SQLDisconnect()
>> FAILURE:
>> Unable to open datasource `test.ovf' with the following drivers.
>>   -> ESRI Shapefile
>>
>>
>> David Lowther
>>  
>> Coordinate Solutions, Inc.
>>  
>>
>> -----Original Message-----
>> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
>> Sent: Thursday, August 19, 2010 3:15 PM
>> To: David Lowther
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
>>
>> How about using:
>> <FID>PKey</FID>
>>
>> but that doesn't explain why it takes a long time...
>>
>> Best Regards,
>> Brent Fraser
>>
>>
>> David Lowther wrote:
>>> List,
>>> 	
>>> I have an OVF layer defined as follows:
>>>
>>> <OGRVRTDataSource>
>>>         <OGRVRTLayer name="UserPoint">
>>>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>>>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>>>          <GeometryField encoding="WKB" field="Feature"/>
>>>   <FID>FID</FID>
>>>         </OGRVRTLayer>
>>> </OGRVRTDataSource>
>>>
>>> The ODBC connection is to a SQL Express 2008 database. The PointData
> table
>>> is defined as follows:
>>>
>>> CREATE TABLE [dbo].[PointData](
>>>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>>>  [Feature] [geometry] NULL,
>>>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
>>> (
>>>  [PKey] ASC
>>> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
>>> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>>> ) ON [PRIMARY]
>>>
>>> This query
>>>
>>> select *, Feature.STAsText() from pointdata
>>>
>>> yields
>>>
>>> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
>>>
>>> "ogrinfo test.ovf --debug on" runs for a very long time returning many
>> lines
>>> of this sort of stuff:
>>>
>>> ERROR 4: Update access not supported for VRT datasources.
>>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>>> ODBC: SQLConnect(CLO)
>>> ODBC: CatalogNameL: (null)
>>> Schema name: (null)
>>>
>>> OGR_ODBC: Table PointData has no identified FID column.
>>> OGR_ODBC: Table UserMapData has no identified FID column.
>>> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
>>>
>>> before finally saying:
>>>
>>> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>> OGR_ODBC: Table SELECT has no identified FID column.
>>> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
>>> Had to open data source read-only.
>>> INFO: Open of `test.ovf'
>>>       using driver `VRT' successful.
>>> OGR: GetLayerCount() = 1
>>>
>>> 1: UserPoint
>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
>>> destroying.
>>> ODBC: SQLDisconnect()
>>>
>>> GDAL version is 1.6.0.
>>>
>>> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
>> Anybody
>>> know what I could do to make it see the FID? I'm guessing it would be a
>> lot
>>> faster if it didn't check every table in the database for an FID...
>>>
>>> Thanks in advance for your assistance,
>>>
>>> Dave Lowther
>>>
>>
>>
> 
> 
> 


From fabrice.lallauret at external.thalesgroup.com  Fri Aug 20 02:09:51 2010
From: fabrice.lallauret at external.thalesgroup.com (Fabrice LALLAURET - PSV)
Date: Fri Aug 20 02:12:36 2010
Subject: [gdal-dev] unwanted error message
Message-ID: <4C6E1C2F.8050502@external.thalesgroup.com>

  I've tried to write some gdal python scripts but in some case I've got 
unwanted error message. Here is a small example (from gdal tutorial).

src_filename  = "src.tif"
dst_filename = "dest.tif"

# ensure no dest file exists
if os.path.exists(dst_filename):
     os.unlink(dst_filename)

src_ds = gdal.Open( src_filename  )
driver = gdal.GetDriverByName('GTiff')
src_ds = gdal.Open( src_filename )
dst_ds = driver.CreateCopy( dst_filename, src_ds, 0, [ 'TILED=YES', 
'COMPRESS=PACKBITS' ] )

# Once we're done, close properly the dataset
dst_ds = None
src_ds = None

The src.tif is correctly copied in dest.tif but the console messages are:

#>python test.py
dest.tif: No such file or directory
GTIFF_RAW:dest.tif: No such file or directory
#>

What is wrong with this code  or how to eliminate these error messages 
which aren't useful and may be a bit misleading ?

Best Regards

-- 
      .--.    Fabrice LALLAURET - PSV Team
     |o_o |   Tel: (33) (01 34) 22 83 47
     |:_/ |   Thales Training&  Simulation
    //   \ \  1, rue du General de Gaulle
   (|     | ) Z.I. les beaux soleils
  /'\_   _/`\ Osny. B.P. 226
  \___)=(___/ 95523 Cergy-Pontoise Cedex
  E-mail: fabrice.lallauret@external.thalesgroup.com
  "Power corrupts. PowerPoint corrupts absolutely."
  My personnal (french) Websites: http://www.xbee.net
  and http://www.french-comics-zone.fr.st


From fabrice.lallauret at external.thalesgroup.com  Fri Aug 20 03:33:00 2010
From: fabrice.lallauret at external.thalesgroup.com (Fabrice LALLAURET - PSV)
Date: Fri Aug 20 03:33:04 2010
Subject: [gdal-dev] unwanted error message
In-Reply-To: <AANLkTimjaCeuBH_K=YdWNPp_xy5g2px9pFMWpo+g_=z8@mail.gmail.com>
References: <4C6E1C2F.8050502@external.thalesgroup.com>
	<AANLkTimjaCeuBH_K=YdWNPp_xy5g2px9pFMWpo+g_=z8@mail.gmail.com>
Message-ID: <4C6E2FAC.4080205@external.thalesgroup.com>

  Le 08/20/2010 08:40 AM, Chaitanya kumar CH a ??crit? :
> Fabrice,
>
> Can you pin point the code lines that are giving the error messages?

Oops, after compare the result of my script on several platforms (linux 
with my compiled gdal/windows with my compiled gdal and fwtools) I've 
found that this is my GDAL_DRIVER_PATH environment variable which cause 
the problem. I'll check why ...

Thanks
>
> On Fri, Aug 20, 2010 at 11:39 AM, Fabrice LALLAURET - PSV 
> <fabrice.lallauret@external.thalesgroup.com 
> <mailto:fabrice.lallauret@external.thalesgroup.com>> wrote:
>
>     ? I've tried to write some gdal python scripts but in some case
>     I've got unwanted error message. Here is a small example (from
>     gdal tutorial).
>
>     src_filename ? = "src.tif"
>     dst_filename = "dest.tif"
>
>     # ensure no dest file exists
>     if os.path.exists(dst_filename):
>     ?  ? os.unlink(dst_filename)
>
>     src_ds = gdal.Open( src_filename ? )
>     driver = gdal.GetDriverByName('GTiff')
>     src_ds = gdal.Open( src_filename )
>     dst_ds = driver.CreateCopy( dst_filename, src_ds, 0, [
>     'TILED=YES', 'COMPRESS=PACKBITS' ] )
>
>     # Once we're done, close properly the dataset
>     dst_ds = None
>     src_ds = None
>
>     The src.tif is correctly copied in dest.tif but the console
>     messages are:
>
>     #>python test.py
>     dest.tif: No such file or directory
>     GTIFF_RAW:dest.tif: No such file or directory
>     #>
>
>     What is wrong with this code ? or how to eliminate these error
>     messages which aren't useful and may be a bit misleading ?
>
>     Best Regards
>


-- 
      .--.    Fabrice LALLAURET - PSV Team
     |o_o |   Tel: (33) (01 34) 22 83 47
     |:_/ |   Thales Training&  Simulation
    //   \ \  1, rue du General de Gaulle
   (|     | ) Z.I. les beaux soleils
  /'\_   _/`\ Osny. B.P. 226
  \___)=(___/ 95523 Cergy-Pontoise Cedex
  E-mail:fabrice.lallauret@external.thalesgroup.com
  "Power corrupts. PowerPoint corrupts absolutely."
  My personnal (french) Websites:http://www.xbee.net
  andhttp://www.french-comics-zone.fr.st

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100820/2bf76c7f/attachment-0001.html
From warmerdam at pobox.com  Fri Aug 20 09:56:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Aug 20 09:56:59 2010
Subject: [gdal-dev] RawDataset.h change - might need recompile
Message-ID: <4C6E89A8.3060301@pobox.com>

Folks,

I have changed the RawRasterBand class in a way that means all classes
derived from it need to be rebuilt.  It might be that not all the
appropriate dependencies on rawdataset.h are expressed in the makefiles
in which case a clean rebuild will be needed after you next update from svn
trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bfraser at geoanalytic.com  Fri Aug 20 10:16:27 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Aug 20 10:16:33 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <BAE011C34DB94D698A8BC9A12EAA9160@dlq6600>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
	<5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
	<4C6D8AC9.9020206@geoanalytic.com>
	<74E1B79A1CAD4D1EA5928E117BED7FB8@dlq6600>
	<4C6DA048.1020205@geoanalytic.com>
	<BAE011C34DB94D698A8BC9A12EAA9160@dlq6600>
Message-ID: <4C6E8E3B.8080904@geoanalytic.com>

David,

   GDAL:       POINT (0.0 2.000000000021871)
   SQL Server: POINT (150 150)

   That IS strange!  There could be a problem with GDAL's or SQL Server's 
encoding/decoding of WKB, or it could be related to data type (geometry? 
geography?) or the lack of a Spatial Reference System?

Best Regards,
Brent Fraser

David Lowther wrote:
> D:\Utility\ms4w\tools\gdal-ogr>ogrinfo test.ovf  PointData --debug on
> ERROR 4: Update access not supported for VRT datasources.
> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
> ODBC: SQLConnect(CLO)
> OGR_ODBC: Table PointData has no identified FID column.
> OGR: OGROpen(ODBC:un/pw@CLO,PointData/00FB9BB0) succeeded as ODBC.
> OGR: OGROpen(test.ovf/010870B8) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 
> Layer name: PointData
> Geometry: Unknown (any)
> OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
> Feature Count: 1
> OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
> Extent: (0.000000, 2.000000) - (0.000000, 2.000000)
> Layer SRS WKT:
> (unknown)
> PKey: Integer (10.0)
> Feature: Binary (0.0)
> OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
> OGRFeature(PointData):1
>   PKey (Integer) = 1
>   Feature (Binary) = 00000000010C0000000000C062400000000000C06240
>   POINT (0.0 2.000000000021871)
> 
> VRT: 2 features read on layer 'PointData'.
> OGR_ODBC: 3 features read on layer 'PointData'.
> ODBC: SQLDisconnect()
> 
> 
> 
> 
> And, why do you think it is saying 0.0 2.000000... for the point when the
> SQL query says?
> 
> 1	0x00000000010C0000000000C062400000000000C06240	POINT (150 150)
> 
> 
> 
> David Lowther
>  
> Coordinate Solutions, Inc.
>  
> 
> -----Original Message-----
> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
> Sent: Thursday, August 19, 2010 5:21 PM
> To: David Lowther
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
> 
> I think it's faster since it doesn't have to enumerate all the tables,views,
> etc.
> 
> so how do you get for attributes names when you do a
> 
> ogrinfo test.ovf  PointData --debug on
> 
> Brent
> 
> David Lowther wrote:
>> Still doesn't see the FID but is way faster! 
>>
>> <OGRVRTDataSource>
>>      <OGRVRTLayer name="PointData">
>>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>>           <GeometryField encoding="WKB" field="Feature"/>
>>           <FID>PKey</FID>
>>      </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> ogrinfo test.ovf --debug on
>>
>> ERROR 4: Update access not supported for VRT datasources.
>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>> ODBC: SQLConnect(CLO)
>> OGR_ODBC: Table PointData has no identified FID column.
>> OGR: OGROpen(ODBC:un/pw@CLO,PointData/02799B88) succeeded as ODBC.
>> OGR: OGROpen(test.ovf/010270B8) succeeded as VRT.
>> Had to open data source read-only.
>> INFO: Open of `test.ovf'
>>       using driver `VRT' successful.
>> OGR: GetLayerCount() = 1
>>
>> 1: PointData
>> ODBC: SQLDisconnect()
>>
>>
>>
>> Does the datatype of the FID column matter? I have it as an int, does it
>> need to be guid?
>>
>> David Lowther
>>  
>> Coordinate Solutions, Inc.
>>  
>>
>> -----Original Message-----
>> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
>> Sent: Thursday, August 19, 2010 3:49 PM
>> To: David Lowther
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
>>
>> Yeah I saw that after I sent the message.  Take out the  <SrcSQL>, it's
>> really 
>> only useful if want to do "special" things, and it can kill spatial
> indexing
>> on 
>> ODBC datasources.  Does this work any better:
>>
>> <OGRVRTDataSource>
>>      <OGRVRTLayer name="UserPoint">
>>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>>           <GeometryField encoding="WKB" field="Feature"/>
>>           <FID>PKey</FID>
>>      </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>>
>> Brent
>>
>> David Lowther wrote:
>>> Brent,
>>>
>>> Thanks for the reply. On initial read I thought you had found my issue -
>>> that I was trying so many things I finally messed it all up. But on
> closer
>>> inspection I am aliasing the PKey column to FID in the SrcSQL (select
> PKey
>>> as FID, Feature from PointData).
>>>
>>> When <FID>FID</FID> ogrinfo returns:
>>>
>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>> OGR_ODBC: Table SELECT has no identified FID column.
>>> OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
>>> Had to open data source read-only.
>>> INFO: Open of `test.ovf'
>>>       using driver `VRT' successful.
>>> OGR: GetLayerCount() = 1
>>>
>>> 1: UserPoint
>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
>>> destroying.
>>> ODBC: SQLDisconnect()
>>>
>>> When <FID>PKEY</FID> ogrinfo returns:
>>>
>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>> OGR_ODBC: Table SELECT has no identified FID column.
>>> ERROR 1: Unable to identify FID field 'PKey'.
>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
>>> destroying.
>>> ODBC: SQLDisconnect()
>>> FAILURE:
>>> Unable to open datasource `test.ovf' with the following drivers.
>>>   -> ESRI Shapefile
>>>
>>>
>>> David Lowther
>>>  
>>> Coordinate Solutions, Inc.
>>>  
>>>
>>> -----Original Message-----
>>> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
>>> Sent: Thursday, August 19, 2010 3:15 PM
>>> To: David Lowther
>>> Cc: gdal-dev@lists.osgeo.org
>>> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
>>>
>>> How about using:
>>> <FID>PKey</FID>
>>>
>>> but that doesn't explain why it takes a long time...
>>>
>>> Best Regards,
>>> Brent Fraser
>>>
>>>
>>> David Lowther wrote:
>>>> List,
>>>> 	
>>>> I have an OVF layer defined as follows:
>>>>
>>>> <OGRVRTDataSource>
>>>>         <OGRVRTLayer name="UserPoint">
>>>>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>>>>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>>>>          <GeometryField encoding="WKB" field="Feature"/>
>>>>   <FID>FID</FID>
>>>>         </OGRVRTLayer>
>>>> </OGRVRTDataSource>
>>>>
>>>> The ODBC connection is to a SQL Express 2008 database. The PointData
>> table
>>>> is defined as follows:
>>>>
>>>> CREATE TABLE [dbo].[PointData](
>>>>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>>>>  [Feature] [geometry] NULL,
>>>>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
>>>> (
>>>>  [PKey] ASC
>>>> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
>>>> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>>>> ) ON [PRIMARY]
>>>>
>>>> This query
>>>>
>>>> select *, Feature.STAsText() from pointdata
>>>>
>>>> yields
>>>>
>>>> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
>>>>
>>>> "ogrinfo test.ovf --debug on" runs for a very long time returning many
>>> lines
>>>> of this sort of stuff:
>>>>
>>>> ERROR 4: Update access not supported for VRT datasources.
>>>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>>>> ODBC: SQLConnect(CLO)
>>>> ODBC: CatalogNameL: (null)
>>>> Schema name: (null)
>>>>
>>>> OGR_ODBC: Table PointData has no identified FID column.
>>>> OGR_ODBC: Table UserMapData has no identified FID column.
>>>> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
>>>>
>>>> before finally saying:
>>>>
>>>> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
>>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>>> OGR_ODBC: Table SELECT has no identified FID column.
>>>> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
>>>> Had to open data source read-only.
>>>> INFO: Open of `test.ovf'
>>>>       using driver `VRT' successful.
>>>> OGR: GetLayerCount() = 1
>>>>
>>>> 1: UserPoint
>>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
>>>> destroying.
>>>> ODBC: SQLDisconnect()
>>>>
>>>> GDAL version is 1.6.0.
>>>>
>>>> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
>>> Anybody
>>>> know what I could do to make it see the FID? I'm guessing it would be a
>>> lot
>>>> faster if it didn't check every table in the database for an FID...
>>>>
>>>> Thanks in advance for your assistance,
>>>>
>>>> Dave Lowther
>>>>
>>>
>>
>>
> 
> 
> 

From jeff at unterbahn.com  Sat Aug 21 10:42:32 2010
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Sat Aug 21 10:42:36 2010
Subject: [gdal-dev] on-the-fly TMS translation
Message-ID: <AANLkTinTM2Dbmp-+W2y4T+kmRkbbmBtnU-iH8O_YwYWc@mail.gmail.com>

Hello all -

At OpenMapsCaucasus/JumpStart and in other places I've had trouble
reconciling the standard OSGeo implementation (origin at bottom-left) of TMS
which gdal2tiles.py generates, and the OSM convention (origin at top-left).
 There may be a simpler way to do this, but for on-the-fly translation
between the two implementations, we've created this tool:

http://tms.mapspot.ge/

You enter one or the other, and it generates links for both formats. It asks
you to register (name, description etc. all optional) and generates a
relatively short URL for each.

Please feel free to use it, fork the source:

http://github.com/jywarren/tms-filter

or tell us how to improve it. This has, for example, allowed JOSM viewing of
gdal2tiles.py derived tiles with minimal fuss.

Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100821/109dbda5/attachment.html
From tkeitt at gmail.com  Sat Aug 21 12:21:22 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 12:21:25 2010
Subject: [gdal-dev] Create copy without any bands
Message-ID: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>

I am writing a utility that takes a raster as input and outputs a
raster with all attributes the same, except that I only want one
output band and I want to specify its type independent of the data
type in the input file. Is there a function that creates a copy of a
dataset (or creates a virtual dataset), but does not copy any raster
bands? This would really simplify things as all I would have to do is
add a band to the output dataset of the desired type.

THK

-- 
Timothy H. Keitt
http://www.keittlab.org/
From chaitanya.ch at gmail.com  Sat Aug 21 13:00:34 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug 21 13:00:36 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
Message-ID: <AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>

Tim,

You can create it easily by modifying GDALDriver::DefaultCreateCopy()

On Sat, Aug 21, 2010 at 9:51 PM, Tim Keitt <tkeitt@gmail.com> wrote:

> I am writing a utility that takes a raster as input and outputs a
> raster with all attributes the same, except that I only want one
> output band and I want to specify its type independent of the data
> type in the input file. Is there a function that creates a copy of a
> dataset (or creates a virtual dataset), but does not copy any raster
> bands? This would really simplify things as all I would have to do is
> add a band to the output dataset of the desired type.
>
> THK
>
> --
> Timothy H. Keitt
> http://www.keittlab.org/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100821/b08b977b/attachment.html
From tkeitt at gmail.com  Sat Aug 21 13:05:37 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 13:05:39 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
Message-ID: <AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>

I noticed DefaultCreateCopy, but appears not to be documented. At
least there is no click through link in the class reference. What does
it do? How is it modified? In the driver code?

THK

On Sat, Aug 21, 2010 at 7:00 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Tim,
>
> You can create it easily by modifying GDALDriver::DefaultCreateCopy()
>
> On Sat, Aug 21, 2010 at 9:51 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>>
>> I am writing a utility that takes a raster as input and outputs a
>> raster with all attributes the same, except that I only want one
>> output band and I want to specify its type independent of the data
>> type in the input file. Is there a function that creates a copy of a
>> dataset (or creates a virtual dataset), but does not copy any raster
>> bands? This would really simplify things as all I would have to do is
>> add a band to the output dataset of the desired type.
>>
>> THK
>>
>> --
>> Timothy H. Keitt
>> http://www.keittlab.org/
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Timothy H. Keitt
http://www.keittlab.org/
From tkeitt at gmail.com  Sat Aug 21 13:14:14 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 13:14:17 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
	<AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
Message-ID: <AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>

OK. I found the source. Yes, that is fairly straightforward to copy and modify.

It seems making a copy without propagating the raster bands would be
very common operation. Would it make sense to introduce a new function
to GDAL? ShallowCopy?

THK

On Sat, Aug 21, 2010 at 7:05 PM, Tim Keitt <tkeitt@gmail.com> wrote:
> I noticed DefaultCreateCopy, but appears not to be documented. At
> least there is no click through link in the class reference. What does
> it do? How is it modified? In the driver code?
>
> THK
>
> On Sat, Aug 21, 2010 at 7:00 PM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
>> Tim,
>>
>> You can create it easily by modifying GDALDriver::DefaultCreateCopy()
>>
>> On Sat, Aug 21, 2010 at 9:51 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>>>
>>> I am writing a utility that takes a raster as input and outputs a
>>> raster with all attributes the same, except that I only want one
>>> output band and I want to specify its type independent of the data
>>> type in the input file. Is there a function that creates a copy of a
>>> dataset (or creates a virtual dataset), but does not copy any raster
>>> bands? This would really simplify things as all I would have to do is
>>> add a band to the output dataset of the desired type.
>>>
>>> THK
>>>
>>> --
>>> Timothy H. Keitt
>>> http://www.keittlab.org/
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Timothy H. Keitt
> http://www.keittlab.org/
>



-- 
Timothy H. Keitt
http://www.keittlab.org/
From tkeitt at gmail.com  Sat Aug 21 13:24:11 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 13:24:16 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
	<AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
	<AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>
Message-ID: <AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>

How about:

/************************************************************************/
/*                         ShallowCopy()                                */
/************************************************************************/

GDALDataset *GDALDriver::ShallowCopy( const char * pszFilename,
                                      GDALDataset * poSrcDS,
                                      GDALDataType etype, int nBands,
                                      int bStrict, char ** papszOptions,
                                      GDALProgressFunc pfnProgress )

{
    if( pfnProgress == NULL )
        pfnProgress = GDALDummyProgress;

/* -------------------------------------------------------------------- */
/*      Create destination dataset.                                     */
/* -------------------------------------------------------------------- */
    GDALDataset  *poDstDS;
    int          nXSize = poSrcDS->GetRasterXSize();
    int          nYSize = poSrcDS->GetRasterYSize();
    CPLErr       eErr;

    CPLDebug( "GDAL", "Using default GDALDriver::CreateCopy implementation." );

    if( !pfnProgress( 0.0, NULL, pProgressData ) )
    {
        CPLError( CE_Failure, CPLE_UserInterrupt, "User terminated" );
        return NULL;
    }

    poDstDS = Create( pszFilename, nXSize, nYSize, nBands, eType,
papszOptions );

    if( poDstDS == NULL )
        return NULL;

/* -------------------------------------------------------------------- */
/*      Try setting the projection and geotransform if it seems         */
/*      suitable.  For now we don't try and copy GCPs, though I         */
/*      suppose we should. Also copy metadata.                          */
/* -------------------------------------------------------------------- */
    double      adfGeoTransform[6];

    if( poSrcDS->GetGeoTransform( adfGeoTransform ) == CE_None
        && (adfGeoTransform[0] != 0.0
            || adfGeoTransform[1] != 1.0
            || adfGeoTransform[2] != 0.0
            || adfGeoTransform[3] != 0.0
            || adfGeoTransform[4] != 0.0
            || adfGeoTransform[5] != 1.0) )
    {
        poDstDS->SetGeoTransform( adfGeoTransform );
    }

    if( poSrcDS->GetProjectionRef() != NULL
        && strlen(poSrcDS->GetProjectionRef()) > 0 )
    {
        poDstDS->SetProjection( poSrcDS->GetProjectionRef() );
    }

    poDstDS->SetMetadata( poSrcDS->GetMetadata() );

    return poDstDS;
}


On Sat, Aug 21, 2010 at 7:14 PM, Tim Keitt <tkeitt@gmail.com> wrote:
> OK. I found the source. Yes, that is fairly straightforward to copy and modify.
>
> It seems making a copy without propagating the raster bands would be
> very common operation. Would it make sense to introduce a new function
> to GDAL? ShallowCopy?
>
> THK
>
> On Sat, Aug 21, 2010 at 7:05 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>> I noticed DefaultCreateCopy, but appears not to be documented. At
>> least there is no click through link in the class reference. What does
>> it do? How is it modified? In the driver code?
>>
>> THK
>>
>> On Sat, Aug 21, 2010 at 7:00 PM, Chaitanya kumar CH
>> <chaitanya.ch@gmail.com> wrote:
>>> Tim,
>>>
>>> You can create it easily by modifying GDALDriver::DefaultCreateCopy()
>>>
>>> On Sat, Aug 21, 2010 at 9:51 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>>>>
>>>> I am writing a utility that takes a raster as input and outputs a
>>>> raster with all attributes the same, except that I only want one
>>>> output band and I want to specify its type independent of the data
>>>> type in the input file. Is there a function that creates a copy of a
>>>> dataset (or creates a virtual dataset), but does not copy any raster
>>>> bands? This would really simplify things as all I would have to do is
>>>> add a band to the output dataset of the desired type.
>>>>
>>>> THK
>>>>
>>>> --
>>>> Timothy H. Keitt
>>>> http://www.keittlab.org/
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>>
>> --
>> Timothy H. Keitt
>> http://www.keittlab.org/
>>
>
>
>
> --
> Timothy H. Keitt
> http://www.keittlab.org/
>



-- 
Timothy H. Keitt
http://www.keittlab.org/
From tkeitt at gmail.com  Sat Aug 21 13:32:41 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 13:32:45 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
	<AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
	<AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>
	<AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>
Message-ID: <AANLkTim_KX+dDxqWXFLzdQFUKyDnvr9e+sSTcRskFuv_@mail.gmail.com>

Oops. This would have to be made a non-member function so a different
driver could be specified.

THK

On Sat, Aug 21, 2010 at 7:24 PM, Tim Keitt <tkeitt@gmail.com> wrote:
> How about:
>
> /************************************************************************/
> /* ? ? ? ? ? ? ? ? ? ? ? ? ShallowCopy() ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?*/
> /************************************************************************/
>
> GDALDataset *GDALDriver::ShallowCopy( const char * pszFilename,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALDataset * poSrcDS,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALDataType etype, int nBands,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?int bStrict, char ** papszOptions,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALProgressFunc pfnProgress )
>
> {
> ? ?if( pfnProgress == NULL )
> ? ? ? ?pfnProgress = GDALDummyProgress;
>
> /* -------------------------------------------------------------------- */
> /* ? ? ?Create destination dataset. ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? */
> /* -------------------------------------------------------------------- */
> ? ?GDALDataset ?*poDstDS;
> ? ?int ? ? ? ? ?nXSize = poSrcDS->GetRasterXSize();
> ? ?int ? ? ? ? ?nYSize = poSrcDS->GetRasterYSize();
> ? ?CPLErr ? ? ? eErr;
>
> ? ?CPLDebug( "GDAL", "Using default GDALDriver::CreateCopy implementation." );
>
> ? ?if( !pfnProgress( 0.0, NULL, pProgressData ) )
> ? ?{
> ? ? ? ?CPLError( CE_Failure, CPLE_UserInterrupt, "User terminated" );
> ? ? ? ?return NULL;
> ? ?}
>
> ? ?poDstDS = Create( pszFilename, nXSize, nYSize, nBands, eType,
> papszOptions );
>
> ? ?if( poDstDS == NULL )
> ? ? ? ?return NULL;
>
> /* -------------------------------------------------------------------- */
> /* ? ? ?Try setting the projection and geotransform if it seems ? ? ? ? */
> /* ? ? ?suitable. ?For now we don't try and copy GCPs, though I ? ? ? ? */
> /* ? ? ?suppose we should. Also copy metadata. ? ? ? ? ? ? ? ? ? ? ? ? ?*/
> /* -------------------------------------------------------------------- */
> ? ?double ? ? ?adfGeoTransform[6];
>
> ? ?if( poSrcDS->GetGeoTransform( adfGeoTransform ) == CE_None
> ? ? ? ?&& (adfGeoTransform[0] != 0.0
> ? ? ? ? ? ?|| adfGeoTransform[1] != 1.0
> ? ? ? ? ? ?|| adfGeoTransform[2] != 0.0
> ? ? ? ? ? ?|| adfGeoTransform[3] != 0.0
> ? ? ? ? ? ?|| adfGeoTransform[4] != 0.0
> ? ? ? ? ? ?|| adfGeoTransform[5] != 1.0) )
> ? ?{
> ? ? ? ?poDstDS->SetGeoTransform( adfGeoTransform );
> ? ?}
>
> ? ?if( poSrcDS->GetProjectionRef() != NULL
> ? ? ? ?&& strlen(poSrcDS->GetProjectionRef()) > 0 )
> ? ?{
> ? ? ? ?poDstDS->SetProjection( poSrcDS->GetProjectionRef() );
> ? ?}
>
> ? ?poDstDS->SetMetadata( poSrcDS->GetMetadata() );
>
> ? ?return poDstDS;
> }
>
>
> On Sat, Aug 21, 2010 at 7:14 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>> OK. I found the source. Yes, that is fairly straightforward to copy and modify.
>>
>> It seems making a copy without propagating the raster bands would be
>> very common operation. Would it make sense to introduce a new function
>> to GDAL? ShallowCopy?
>>
>> THK
>>
>> On Sat, Aug 21, 2010 at 7:05 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>>> I noticed DefaultCreateCopy, but appears not to be documented. At
>>> least there is no click through link in the class reference. What does
>>> it do? How is it modified? In the driver code?
>>>
>>> THK
>>>
>>> On Sat, Aug 21, 2010 at 7:00 PM, Chaitanya kumar CH
>>> <chaitanya.ch@gmail.com> wrote:
>>>> Tim,
>>>>
>>>> You can create it easily by modifying GDALDriver::DefaultCreateCopy()
>>>>
>>>> On Sat, Aug 21, 2010 at 9:51 PM, Tim Keitt <tkeitt@gmail.com> wrote:
>>>>>
>>>>> I am writing a utility that takes a raster as input and outputs a
>>>>> raster with all attributes the same, except that I only want one
>>>>> output band and I want to specify its type independent of the data
>>>>> type in the input file. Is there a function that creates a copy of a
>>>>> dataset (or creates a virtual dataset), but does not copy any raster
>>>>> bands? This would really simplify things as all I would have to do is
>>>>> add a band to the output dataset of the desired type.
>>>>>
>>>>> THK
>>>>>
>>>>> --
>>>>> Timothy H. Keitt
>>>>> http://www.keittlab.org/
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>> /t?a???nj?/ /k?m?r/
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>>
>>> --
>>> Timothy H. Keitt
>>> http://www.keittlab.org/
>>>
>>
>>
>>
>> --
>> Timothy H. Keitt
>> http://www.keittlab.org/
>>
>
>
>
> --
> Timothy H. Keitt
> http://www.keittlab.org/
>



-- 
Timothy H. Keitt
http://www.keittlab.org/
From warmerdam at pobox.com  Sat Aug 21 13:41:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Aug 21 13:41:53 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
	<AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
	<AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>
	<AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>
Message-ID: <4C700FD9.7010701@pobox.com>

Tim Keitt wrote:
> How about:

Tim,

I don't really like!  I think instead it would be better to have
a method/function to copy a variety of types of metadata - possibly
taking some flags to control what should be copied.  Perhaps something
that works similar to the GDALPamDataset::CloneInfo() and
GDALPamRasterBand::CloneInfo() methods?

There is value in a helper to copy the various sorts of metadata
(including georeferencing, color tables, etc) but there are also a
wide variety of situations for use and it is hard to make something
that serves most or all of them.  I have, till now, tried to avoid
baking anything into the standard api for this because I couldn't
really wrap my head around a sufficiently general, yet not too complicated
arrangement.

BTW, why did you ignore GCPs, and RPCs in your ShallowCopy() suggestion?

Best regards,

> /************************************************************************/
> /*                         ShallowCopy()                                */
> /************************************************************************/
> 
> GDALDataset *GDALDriver::ShallowCopy( const char * pszFilename,
>                                       GDALDataset * poSrcDS,
>                                       GDALDataType etype, int nBands,
>                                       int bStrict, char ** papszOptions,
>                                       GDALProgressFunc pfnProgress )
> 
> {
>     if( pfnProgress == NULL )
>         pfnProgress = GDALDummyProgress;
> 
> /* -------------------------------------------------------------------- */
> /*      Create destination dataset.                                     */
> /* -------------------------------------------------------------------- */
>     GDALDataset  *poDstDS;
>     int          nXSize = poSrcDS->GetRasterXSize();
>     int          nYSize = poSrcDS->GetRasterYSize();
>     CPLErr       eErr;
> 
>     CPLDebug( "GDAL", "Using default GDALDriver::CreateCopy implementation." );
> 
>     if( !pfnProgress( 0.0, NULL, pProgressData ) )
>     {
>         CPLError( CE_Failure, CPLE_UserInterrupt, "User terminated" );
>         return NULL;
>     }
> 
>     poDstDS = Create( pszFilename, nXSize, nYSize, nBands, eType,
> papszOptions );
> 
>     if( poDstDS == NULL )
>         return NULL;
> 
> /* -------------------------------------------------------------------- */
> /*      Try setting the projection and geotransform if it seems         */
> /*      suitable.  For now we don't try and copy GCPs, though I         */
> /*      suppose we should. Also copy metadata.                          */
> /* -------------------------------------------------------------------- */
>     double      adfGeoTransform[6];
> 
>     if( poSrcDS->GetGeoTransform( adfGeoTransform ) == CE_None
>         && (adfGeoTransform[0] != 0.0
>             || adfGeoTransform[1] != 1.0
>             || adfGeoTransform[2] != 0.0
>             || adfGeoTransform[3] != 0.0
>             || adfGeoTransform[4] != 0.0
>             || adfGeoTransform[5] != 1.0) )
>     {
>         poDstDS->SetGeoTransform( adfGeoTransform );
>     }
> 
>     if( poSrcDS->GetProjectionRef() != NULL
>         && strlen(poSrcDS->GetProjectionRef()) > 0 )
>     {
>         poDstDS->SetProjection( poSrcDS->GetProjectionRef() );
>     }
> 
>     poDstDS->SetMetadata( poSrcDS->GetMetadata() );
> 
>     return poDstDS;
> }


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Sat Aug 21 18:07:17 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat Aug 21 18:09:03 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
Message-ID: <4C704E15.7040309@swoodbridge.com>

So I have been able to download the NED data and I have US coverage.
The data is in GeoTiff and all in a single band Int16 format.
I have create a ned.vrt file.

So I'm interested in writing a simple program in C that I can pass a 
lat, lon and get the elevation. I assume I need to open the .vrt file 
but looking at the GDAL API, I'm not sure how to map the lat, lon to a 
pixel and then how to fetch the pixel value. If it matter, I will 
probably extend this later to process a list of locations or maybe 
extend it to read a shapefile and process the shape through it.

Does anyone have a sample program that does something like this.

-Steve



woodbri@mappy:/u/srcdata$ gdalinfo -stats ned2.vrt
Driver: VRT/Virtual Raster
Files: ned2.vrt
        NED2/-100_25_-96_28.tif
        NED2/-102_28_-96_30.tif
        NED2/-102_30_-96_32.tif
        NED2/-102_32_-96_34.tif
        NED2/-102_34_-96_36.tif
        NED2/-102_36_-96_38.tif
        NED2/-102_38_-96_40.tif
        NED2/-102_40_-96_42.tif
        NED2/-102_42_-96_44.tif
        NED2/-102_44_-96_46.tif
        NED2/-102_46_-96_48.tif
        NED2/-102_48_-96_50.tif
        NED2/-108_28_-102_30.tif
        NED2/-108_30_-102_32.tif
        NED2/-108_32_-102_34.tif
        NED2/-108_34_-102_36.tif
        NED2/-108_36_-102_38.tif
        NED2/-108_38_-102_40.tif
        NED2/-108_40_-102_42.tif
        NED2/-108_42_-102_44.tif
        NED2/-108_44_-102_46.tif
        NED2/-108_46_-102_48.tif
        NED2/-108_48_-102_50.tif
        NED2/-114_30_-108_32.tif
        NED2/-114_32_-108_34.tif
        NED2/-114_34_-108_36.tif
        NED2/-114_36_-108_38.tif
        NED2/-114_38_-108_40.tif
        NED2/-114_40_-108_42.tif
        NED2/-114_42_-108_44.tif
        NED2/-114_44_-108_46.tif
        NED2/-114_46_-108_48.tif
        NED2/-114_48_-108_50.tif
        NED2/-120_32_-114_34.tif
        NED2/-120_34_-114_36.tif
        NED2/-120_36_-114_38.tif
        NED2/-120_38_-114_40.tif
        NED2/-120_40_-114_42.tif
        NED2/-120_42_-114_44.tif
        NED2/-120_44_-114_46.tif
        NED2/-120_46_-114_48.tif
        NED2/-120_48_-114_50.tif
        NED2/-123_33_-120_37.tif
        NED2/-125_37_-120_39.tif
        NED2/-125_39_-120_42.tif
        NED2/-126_42_-120_44.tif
        NED2/-126_44_-120_46.tif
        NED2/-126_46_-120_48.tif
        NED2/-126_48_-120_50.tif
        NED2/133_6.5_138.5_10.tif
        NED2/-139.0019842_51.9997277_-127.0018384_58.9998127.tif
        NED2/-139.0024054_58.9997472_-127.0018101_66.0000944.tif
        NED2/144_13_146_16.tif
        NED2/151_5_163.5_8.tif
        NED2/-157_18_-152_23.tif
        NED2/-157.5_18.75_-154.5_21.5.tif
        NED2/-160.5_21_-157.5_22.5.tif
        NED2/-162_18_-157_23.tif
        NED2/-171_-14.5_-169_-14.tif
        NED2/-68_17_-64_18.tif
        NED2/-72.0002778_40.9999994_-67.9999992_44.tif
        NED2/-72.0002778_44_-66_46.tif
        NED2/-72.0002778_46_-66_48.tif
        NED2/-78.0002778_33.0000047_-75.0000047_36.tif
        NED2/-78.0002778_36_-72_38.tif
        NED2/-78.0002778_38_-72_40.tif
        NED2/-78.0002778_40_-72_42.tif
        NED2/-78.0002778_42_-72_44.tif
        NED2/-78.0002778_44_-72_46.tif
        NED2/-84.0002778_24_-78_26.tif
        NED2/-84.0002778_26_-78_28.tif
        NED2/-84.0002778_28_-78_30.tif
        NED2/-84.0002778_30_-78_32.tif
        NED2/-84.0002778_32_-78_34.tif
        NED2/-84.0002778_34_-78_36.tif
        NED2/-84.0002778_36_-78_38.tif
        NED2/-84.0002778_38_-78_40.tif
        NED2/-84.0002778_40_-78_42.tif
        NED2/-84.0002778_42_-78_44.tif
        NED2/-85.0002778_44.0000047_-82.0000047_47.tif
        NED2/-90_28_-84_30.tif
        NED2/-90_30_-84_32.tif
        NED2/-90_32_-84_34.tif
        NED2/-90_34_-84_36.tif
        NED2/-90_36_-84_38.tif
        NED2/-90_38_-84_40.tif
        NED2/-90_40_-84_42.tif
        NED2/-90_42_-84_44.tif
        NED2/-90_44_-85_46.tif
        NED2/-90_46_-85_49.tif
        NED2/-96_28_-90_30.tif
        NED2/-96_30_-90_32.tif
        NED2/-96_32_-90_34.tif
        NED2/-96_34_-90_36.tif
        NED2/-96_36_-90_38.tif
        NED2/-96_38_-90_40.tif
        NED2/-96_40_-90_42.tif
        NED2/-96_42_-90_44.tif
        NED2/-96_44_-90_46.tif
        NED2/-96_46_-90_48.tif
        NED2/-96_48_-90_50.tif
Size is 1180816, 284173
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-171.000000000113090,66.000094447240443)
Pixel Size = (0.000283278659440,-0.000283278659440)
Corner Coordinates:
Upper Left  (-171.0000000,  66.0000944) (171d 0'0.00"W, 66d 0'0.34"N)
Lower Left  (-171.0000000, -14.5000520) (171d 0'0.00"W, 14d30'0.19"S)
Upper Right ( 163.4999735,  66.0000944) (163d29'59.90"E, 66d 0'0.34"N)
Lower Right ( 163.4999735, -14.5000520) (163d29'59.90"E, 14d30'0.19"S)
Center      (  -3.7500132,  25.7500212) (  3d45'0.05"W, 25d45'0.08"N)
Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
   Minimum=-83.000, Maximum=4665.000, Mean=25.333, StdDev=189.129
   Metadata:
     STATISTICS_MINIMUM=-83
     STATISTICS_MAXIMUM=4665
     STATISTICS_MEAN=25.332848474484
     STATISTICS_STDDEV=189.12886049417
From tkeitt at gmail.com  Sat Aug 21 19:21:39 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 19:21:41 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <4C700FD9.7010701@pobox.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
	<AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
	<AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>
	<AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>
	<4C700FD9.7010701@pobox.com>
Message-ID: <AANLkTinCHNSyhfnPG1bxctOKp7MMaPqyNzAqoAGm0Kpu@mail.gmail.com>

On Sat, Aug 21, 2010 at 7:41 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Tim Keitt wrote:
>>
>> How about:
>
> Tim,
>
> I don't really like! ?I think instead it would be better to have
> a method/function to copy a variety of types of metadata - possibly
> taking some flags to control what should be copied. ?Perhaps something
> that works similar to the GDALPamDataset::CloneInfo() and
> GDALPamRasterBand::CloneInfo() methods?
>
> There is value in a helper to copy the various sorts of metadata
> (including georeferencing, color tables, etc) but there are also a
> wide variety of situations for use and it is hard to make something
> that serves most or all of them. ?I have, till now, tried to avoid
> baking anything into the standard api for this because I couldn't
> really wrap my head around a sufficiently general, yet not too complicated
> arrangement.
>
> BTW, why did you ignore GCPs, and RPCs in your ShallowCopy() suggestion?

Because I've never had the opportunity to use them. Also because these
are not in DefaultCreateCopy which I took and simply deleted the part
that copies the raster bands.

There are a vast number of raster-to-raster operations that simply
need a dataset to store the output. The things that are almost always
different are the file format (only for user convenience) and the data
type of the resulting raster band.

BTW, my choice of "ShallowCopy" is probably not a good name as it
implies a view containing pointers to the original data. Perhaps
"PrepareOutput" would be better.

THK

>
> Best regards,
>
>> /************************************************************************/
>> /* ? ? ? ? ? ? ? ? ? ? ? ? ShallowCopy() ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?*/
>> /************************************************************************/
>>
>> GDALDataset *GDALDriver::ShallowCopy( const char * pszFilename,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALDataset * poSrcDS,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALDataType etype, int nBands,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?int bStrict, char ** papszOptions,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALProgressFunc pfnProgress )
>>
>> {
>> ? ?if( pfnProgress == NULL )
>> ? ? ? ?pfnProgress = GDALDummyProgress;
>>
>> /* -------------------------------------------------------------------- */
>> /* ? ? ?Create destination dataset. ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? */
>> /* -------------------------------------------------------------------- */
>> ? ?GDALDataset ?*poDstDS;
>> ? ?int ? ? ? ? ?nXSize = poSrcDS->GetRasterXSize();
>> ? ?int ? ? ? ? ?nYSize = poSrcDS->GetRasterYSize();
>> ? ?CPLErr ? ? ? eErr;
>>
>> ? ?CPLDebug( "GDAL", "Using default GDALDriver::CreateCopy
>> implementation." );
>>
>> ? ?if( !pfnProgress( 0.0, NULL, pProgressData ) )
>> ? ?{
>> ? ? ? ?CPLError( CE_Failure, CPLE_UserInterrupt, "User terminated" );
>> ? ? ? ?return NULL;
>> ? ?}
>>
>> ? ?poDstDS = Create( pszFilename, nXSize, nYSize, nBands, eType,
>> papszOptions );
>>
>> ? ?if( poDstDS == NULL )
>> ? ? ? ?return NULL;
>>
>> /* -------------------------------------------------------------------- */
>> /* ? ? ?Try setting the projection and geotransform if it seems ? ? ? ? */
>> /* ? ? ?suitable. ?For now we don't try and copy GCPs, though I ? ? ? ? */
>> /* ? ? ?suppose we should. Also copy metadata. ? ? ? ? ? ? ? ? ? ? ? ? ?*/
>> /* -------------------------------------------------------------------- */
>> ? ?double ? ? ?adfGeoTransform[6];
>>
>> ? ?if( poSrcDS->GetGeoTransform( adfGeoTransform ) == CE_None
>> ? ? ? ?&& (adfGeoTransform[0] != 0.0
>> ? ? ? ? ? ?|| adfGeoTransform[1] != 1.0
>> ? ? ? ? ? ?|| adfGeoTransform[2] != 0.0
>> ? ? ? ? ? ?|| adfGeoTransform[3] != 0.0
>> ? ? ? ? ? ?|| adfGeoTransform[4] != 0.0
>> ? ? ? ? ? ?|| adfGeoTransform[5] != 1.0) )
>> ? ?{
>> ? ? ? ?poDstDS->SetGeoTransform( adfGeoTransform );
>> ? ?}
>>
>> ? ?if( poSrcDS->GetProjectionRef() != NULL
>> ? ? ? ?&& strlen(poSrcDS->GetProjectionRef()) > 0 )
>> ? ?{
>> ? ? ? ?poDstDS->SetProjection( poSrcDS->GetProjectionRef() );
>> ? ?}
>>
>> ? ?poDstDS->SetMetadata( poSrcDS->GetMetadata() );
>>
>> ? ?return poDstDS;
>> }
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>



-- 
Timothy H. Keitt
http://www.keittlab.org/
From tkeitt at gmail.com  Sat Aug 21 20:13:01 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Sat Aug 21 20:13:03 2010
Subject: [gdal-dev] Create copy without any bands
In-Reply-To: <AANLkTinCHNSyhfnPG1bxctOKp7MMaPqyNzAqoAGm0Kpu@mail.gmail.com>
References: <AANLkTi=6PzHQ5q18gzQwA+bmrBifmKHCvoFfQVwwP_4e@mail.gmail.com>
	<AANLkTimZPFS2JD5wkYpxaDUJtc29g261uG8mmXehU9ZM@mail.gmail.com>
	<AANLkTimoOJMVGXFZm6bVdMeMLEOCZg_OdPGVc-nFsYTk@mail.gmail.com>
	<AANLkTin+icihbh+xiQL2e46vm-k1ydQWsMVxdrgTbcAn@mail.gmail.com>
	<AANLkTi=_iFfxnMt90EC3MonwOypsiV7HhzCBpC2=tLHn@mail.gmail.com>
	<4C700FD9.7010701@pobox.com>
	<AANLkTinCHNSyhfnPG1bxctOKp7MMaPqyNzAqoAGm0Kpu@mail.gmail.com>
Message-ID: <AANLkTinyS1zcTU1JEpDwkFBfTik4A_10O30Lde+=swpr@mail.gmail.com>

On Sun, Aug 22, 2010 at 1:21 AM, Tim Keitt <tkeitt@gmail.com> wrote:
> On Sat, Aug 21, 2010 at 7:41 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Tim Keitt wrote:
>>>
>>> How about:
>>
>> Tim,
>>
>> I don't really like! ?I think instead it would be better to have
>> a method/function to copy a variety of types of metadata - possibly
>> taking some flags to control what should be copied. ?Perhaps something
>> that works similar to the GDALPamDataset::CloneInfo() and
>> GDALPamRasterBand::CloneInfo() methods?
>>
>> There is value in a helper to copy the various sorts of metadata
>> (including georeferencing, color tables, etc) but there are also a
>> wide variety of situations for use and it is hard to make something
>> that serves most or all of them. ?I have, till now, tried to avoid
>> baking anything into the standard api for this because I couldn't
>> really wrap my head around a sufficiently general, yet not too complicated
>> arrangement.
>>
>> BTW, why did you ignore GCPs, and RPCs in your ShallowCopy() suggestion?
>
> Because I've never had the opportunity to use them. Also because these
> are not in DefaultCreateCopy which I took and simply deleted the part
> that copies the raster bands.
>
> There are a vast number of raster-to-raster operations that simply
> need a dataset to store the output. The things that are almost always
> different are the file format (only for user convenience) and the data
> type of the resulting raster band.
>
> BTW, my choice of "ShallowCopy" is probably not a good name as it
> implies a view containing pointers to the original data. Perhaps
> "PrepareOutput" would be better.

Thinking about it some more, perhaps what I am seeking is to split
CreateCopy into two phases, one that copies the dataset and another
that copies the raster bands. If these two functions were added to the
API, then CreateCopy would simply call them in succession.
Modification of the drivers would be straightforward since it is
simply splitting existing code into two functions.

THK

>
> THK
>
>>
>> Best regards,
>>
>>> /************************************************************************/
>>> /* ? ? ? ? ? ? ? ? ? ? ? ? ShallowCopy() ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?*/
>>> /************************************************************************/
>>>
>>> GDALDataset *GDALDriver::ShallowCopy( const char * pszFilename,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALDataset * poSrcDS,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALDataType etype, int nBands,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?int bStrict, char ** papszOptions,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?GDALProgressFunc pfnProgress )
>>>
>>> {
>>> ? ?if( pfnProgress == NULL )
>>> ? ? ? ?pfnProgress = GDALDummyProgress;
>>>
>>> /* -------------------------------------------------------------------- */
>>> /* ? ? ?Create destination dataset. ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? */
>>> /* -------------------------------------------------------------------- */
>>> ? ?GDALDataset ?*poDstDS;
>>> ? ?int ? ? ? ? ?nXSize = poSrcDS->GetRasterXSize();
>>> ? ?int ? ? ? ? ?nYSize = poSrcDS->GetRasterYSize();
>>> ? ?CPLErr ? ? ? eErr;
>>>
>>> ? ?CPLDebug( "GDAL", "Using default GDALDriver::CreateCopy
>>> implementation." );
>>>
>>> ? ?if( !pfnProgress( 0.0, NULL, pProgressData ) )
>>> ? ?{
>>> ? ? ? ?CPLError( CE_Failure, CPLE_UserInterrupt, "User terminated" );
>>> ? ? ? ?return NULL;
>>> ? ?}
>>>
>>> ? ?poDstDS = Create( pszFilename, nXSize, nYSize, nBands, eType,
>>> papszOptions );
>>>
>>> ? ?if( poDstDS == NULL )
>>> ? ? ? ?return NULL;
>>>
>>> /* -------------------------------------------------------------------- */
>>> /* ? ? ?Try setting the projection and geotransform if it seems ? ? ? ? */
>>> /* ? ? ?suitable. ?For now we don't try and copy GCPs, though I ? ? ? ? */
>>> /* ? ? ?suppose we should. Also copy metadata. ? ? ? ? ? ? ? ? ? ? ? ? ?*/
>>> /* -------------------------------------------------------------------- */
>>> ? ?double ? ? ?adfGeoTransform[6];
>>>
>>> ? ?if( poSrcDS->GetGeoTransform( adfGeoTransform ) == CE_None
>>> ? ? ? ?&& (adfGeoTransform[0] != 0.0
>>> ? ? ? ? ? ?|| adfGeoTransform[1] != 1.0
>>> ? ? ? ? ? ?|| adfGeoTransform[2] != 0.0
>>> ? ? ? ? ? ?|| adfGeoTransform[3] != 0.0
>>> ? ? ? ? ? ?|| adfGeoTransform[4] != 0.0
>>> ? ? ? ? ? ?|| adfGeoTransform[5] != 1.0) )
>>> ? ?{
>>> ? ? ? ?poDstDS->SetGeoTransform( adfGeoTransform );
>>> ? ?}
>>>
>>> ? ?if( poSrcDS->GetProjectionRef() != NULL
>>> ? ? ? ?&& strlen(poSrcDS->GetProjectionRef()) > 0 )
>>> ? ?{
>>> ? ? ? ?poDstDS->SetProjection( poSrcDS->GetProjectionRef() );
>>> ? ?}
>>>
>>> ? ?poDstDS->SetMetadata( poSrcDS->GetMetadata() );
>>>
>>> ? ?return poDstDS;
>>> }
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up ? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>>
>>
>
>
>
> --
> Timothy H. Keitt
> http://www.keittlab.org/
>



-- 
Timothy H. Keitt
http://www.keittlab.org/
From chaitanya.ch at gmail.com  Sat Aug 21 22:57:19 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug 21 22:57:20 2010
Subject: [gdal-dev] ogrinfo segmentation fault
In-Reply-To: <AANLkTinv0QBH+kGL1+b=DeYy0X7JvyX6HB+zyLCvva90@mail.gmail.com>
References: <AANLkTinQ7sh-A6YhqzmmP89T-yDaDAsNVJdbCdMx8LjL@mail.gmail.com>
	<AANLkTi=Eha=+yubSjbr3fANqgX3c4frRr=wu-jrbKXiD@mail.gmail.com>
	<AANLkTinv0QBH+kGL1+b=DeYy0X7JvyX6HB+zyLCvva90@mail.gmail.com>
Message-ID: <AANLkTi=+9VvZ03NiRTGn6ZaGEvJvWSNFfXzoyo8QJgj3@mail.gmail.com>

Bryn,

Segfault is a serious problem. Please provide a small sample dataset that
shows this problem so the problem can be identified.

On Sun, Aug 22, 2010 at 5:06 AM, Bryn Roberts <mr.bryn@gmail.com> wrote:

> Hi Chaitanya,
>
> Thanks for getting back to me.
> I've modified my system to use the debian testing packages and my current
> gdal-bin version is 1.6.3-4 and I still receive the Segmentation fault
> error.
>
> Any ideas?
>
> Cheers,
> Bryn
>
>
> On 19 August 2010 22:11, Chaitanya kumar CH <chaitanya.ch@gmail.com>wrote:
>
>> Bryn,
>>
>> GDAL 1.5 branch is not supported right now. Can you try with the latest of
>> 1.6 or 1.7 branch?
>>
>> On Thu, Aug 19, 2010 at 11:02 AM, Bryn Roberts <mr.bryn@gmail.com> wrote:
>>
>>> Hi all,
>>>
>>> First, I've done a fair bit of googling for my problem and haven't got
>>> anywhere. Hopefully I am just doing something stupid and there is an easy
>>> fix!
>>>
>>> I use the gdal-bin package on my debian lenny box, mostly for MapServer
>>> to render data from MySQL Spatial.
>>> Recently the gdal-bin package upgraded to version 1.5.2-3 and around the
>>> same time MapServer stopped working when using MySQL Spatial layers.
>>>
>>> I began troubleshooting this problem by following the steps on the
>>> MapServer page for using MySQL via OGR (
>>> http://mapserver.org/input/vector/mysql.html) and discovered that
>>> executing
>>>
>>> "ogrinfo MYSQL:spatial,user=bryn,password=xxxx,port=3306"
>>>
>>> returns
>>>
>>> "Segmentation fault"
>>>
>>> That's it, I don't get any other info out and I don't know where else I
>>> can look to find more on why this error might be happening!
>>>
>>> Hope someone can help me out.
>>>
>>> Cheers,
>>> Bryn
>>>
>>>
>>
>>
>
-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100822/16e45d66/attachment.html
From chaitanya.ch at gmail.com  Sat Aug 21 23:11:21 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Aug 21 23:11:24 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <4C704E15.7040309@swoodbridge.com>
References: <4C704E15.7040309@swoodbridge.com>
Message-ID: <AANLkTin2R7OZ1ARghVB4LjKUmuA+DDnCuxxyh5PYWsZb@mail.gmail.com>

Stephen,

Refer to http://www.gdal.org/gdal_tutorial.html for help in opening the vrt
dataset using gdal.
Use the transformation coefficients from GDALGetGeoTransform() to translate
between lat/long and line/pixel.

http://www.gdal.org/classGDALDataset.html

On Sun, Aug 22, 2010 at 3:37 AM, Stephen Woodbridge <woodbri@swoodbridge.com
> wrote:

> So I have been able to download the NED data and I have US coverage.
> The data is in GeoTiff and all in a single band Int16 format.
> I have create a ned.vrt file.
>
> So I'm interested in writing a simple program in C that I can pass a lat,
> lon and get the elevation. I assume I need to open the .vrt file but looking
> at the GDAL API, I'm not sure how to map the lat, lon to a pixel and then
> how to fetch the pixel value. If it matter, I will probably extend this
> later to process a list of locations or maybe extend it to read a shapefile
> and process the shape through it.
>
> Does anyone have a sample program that does something like this.
>
> -Steve
>
>
>
> woodbri@mappy:/u/srcdata$ gdalinfo -stats ned2.vrt
> Driver: VRT/Virtual Raster
> Files: ned2.vrt
>       NED2/-100_25_-96_28.tif
>       NED2/-102_28_-96_30.tif
>       NED2/-102_30_-96_32.tif
>       NED2/-102_32_-96_34.tif
>       NED2/-102_34_-96_36.tif
>       NED2/-102_36_-96_38.tif
>       NED2/-102_38_-96_40.tif
>       NED2/-102_40_-96_42.tif
>       NED2/-102_42_-96_44.tif
>       NED2/-102_44_-96_46.tif
>       NED2/-102_46_-96_48.tif
>       NED2/-102_48_-96_50.tif
>       NED2/-108_28_-102_30.tif
>       NED2/-108_30_-102_32.tif
>       NED2/-108_32_-102_34.tif
>       NED2/-108_34_-102_36.tif
>       NED2/-108_36_-102_38.tif
>       NED2/-108_38_-102_40.tif
>       NED2/-108_40_-102_42.tif
>       NED2/-108_42_-102_44.tif
>       NED2/-108_44_-102_46.tif
>       NED2/-108_46_-102_48.tif
>       NED2/-108_48_-102_50.tif
>       NED2/-114_30_-108_32.tif
>       NED2/-114_32_-108_34.tif
>       NED2/-114_34_-108_36.tif
>       NED2/-114_36_-108_38.tif
>       NED2/-114_38_-108_40.tif
>       NED2/-114_40_-108_42.tif
>       NED2/-114_42_-108_44.tif
>       NED2/-114_44_-108_46.tif
>       NED2/-114_46_-108_48.tif
>       NED2/-114_48_-108_50.tif
>       NED2/-120_32_-114_34.tif
>       NED2/-120_34_-114_36.tif
>       NED2/-120_36_-114_38.tif
>       NED2/-120_38_-114_40.tif
>       NED2/-120_40_-114_42.tif
>       NED2/-120_42_-114_44.tif
>       NED2/-120_44_-114_46.tif
>       NED2/-120_46_-114_48.tif
>       NED2/-120_48_-114_50.tif
>       NED2/-123_33_-120_37.tif
>       NED2/-125_37_-120_39.tif
>       NED2/-125_39_-120_42.tif
>       NED2/-126_42_-120_44.tif
>       NED2/-126_44_-120_46.tif
>       NED2/-126_46_-120_48.tif
>       NED2/-126_48_-120_50.tif
>       NED2/133_6.5_138.5_10.tif
>       NED2/-139.0019842_51.9997277_-127.0018384_58.9998127.tif
>       NED2/-139.0024054_58.9997472_-127.0018101_66.0000944.tif
>       NED2/144_13_146_16.tif
>       NED2/151_5_163.5_8.tif
>       NED2/-157_18_-152_23.tif
>       NED2/-157.5_18.75_-154.5_21.5.tif
>       NED2/-160.5_21_-157.5_22.5.tif
>       NED2/-162_18_-157_23.tif
>       NED2/-171_-14.5_-169_-14.tif
>       NED2/-68_17_-64_18.tif
>       NED2/-72.0002778_40.9999994_-67.9999992_44.tif
>       NED2/-72.0002778_44_-66_46.tif
>       NED2/-72.0002778_46_-66_48.tif
>       NED2/-78.0002778_33.0000047_-75.0000047_36.tif
>       NED2/-78.0002778_36_-72_38.tif
>       NED2/-78.0002778_38_-72_40.tif
>       NED2/-78.0002778_40_-72_42.tif
>       NED2/-78.0002778_42_-72_44.tif
>       NED2/-78.0002778_44_-72_46.tif
>       NED2/-84.0002778_24_-78_26.tif
>       NED2/-84.0002778_26_-78_28.tif
>       NED2/-84.0002778_28_-78_30.tif
>       NED2/-84.0002778_30_-78_32.tif
>       NED2/-84.0002778_32_-78_34.tif
>       NED2/-84.0002778_34_-78_36.tif
>       NED2/-84.0002778_36_-78_38.tif
>       NED2/-84.0002778_38_-78_40.tif
>       NED2/-84.0002778_40_-78_42.tif
>       NED2/-84.0002778_42_-78_44.tif
>       NED2/-85.0002778_44.0000047_-82.0000047_47.tif
>       NED2/-90_28_-84_30.tif
>       NED2/-90_30_-84_32.tif
>       NED2/-90_32_-84_34.tif
>       NED2/-90_34_-84_36.tif
>       NED2/-90_36_-84_38.tif
>       NED2/-90_38_-84_40.tif
>       NED2/-90_40_-84_42.tif
>       NED2/-90_42_-84_44.tif
>       NED2/-90_44_-85_46.tif
>       NED2/-90_46_-85_49.tif
>       NED2/-96_28_-90_30.tif
>       NED2/-96_30_-90_32.tif
>       NED2/-96_32_-90_34.tif
>       NED2/-96_34_-90_36.tif
>       NED2/-96_36_-90_38.tif
>       NED2/-96_38_-90_40.tif
>       NED2/-96_40_-90_42.tif
>       NED2/-96_42_-90_44.tif
>       NED2/-96_44_-90_46.tif
>       NED2/-96_46_-90_48.tif
>       NED2/-96_48_-90_50.tif
> Size is 1180816, 284173
> Coordinate System is:
> GEOGCS["WGS 84",
>    DATUM["WGS_1984",
>        SPHEROID["WGS 84",6378137,298.257223563,
>            AUTHORITY["EPSG","7030"]],
>        AUTHORITY["EPSG","6326"]],
>    PRIMEM["Greenwich",0],
>    UNIT["degree",0.0174532925199433],
>    AUTHORITY["EPSG","4326"]]
> Origin = (-171.000000000113090,66.000094447240443)
> Pixel Size = (0.000283278659440,-0.000283278659440)
> Corner Coordinates:
> Upper Left  (-171.0000000,  66.0000944) (171d 0'0.00"W, 66d 0'0.34"N)
> Lower Left  (-171.0000000, -14.5000520) (171d 0'0.00"W, 14d30'0.19"S)
> Upper Right ( 163.4999735,  66.0000944) (163d29'59.90"E, 66d 0'0.34"N)
> Lower Right ( 163.4999735, -14.5000520) (163d29'59.90"E, 14d30'0.19"S)
> Center      (  -3.7500132,  25.7500212) (  3d45'0.05"W, 25d45'0.08"N)
> Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
>  Minimum=-83.000, Maximum=4665.000, Mean=25.333, StdDev=189.129
>  Metadata:
>    STATISTICS_MINIMUM=-83
>    STATISTICS_MAXIMUM=4665
>    STATISTICS_MEAN=25.332848474484
>    STATISTICS_STDDEV=189.12886049417
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100822/b3ce3f29/attachment.html
From woodbri at swoodbridge.com  Sat Aug 21 23:23:45 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat Aug 21 23:25:36 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <4C704E15.7040309@swoodbridge.com>
References: <4C704E15.7040309@swoodbridge.com>
Message-ID: <4C709841.80406@swoodbridge.com>

OK, well may to answer my own question by reading the GDAL API Tutorial 
and taking a guess at some parts I came up with the following. This is 
basically just a copy of the tutorial and at the end I added some code 
that I'm hoping reads the correct pixel for my lat,lon and prints out 
the elevation.

The tutorial code for "Fetching a Raster Band" works on a GTiff file but 
segv on a VRT file. Not sure why this happened, although there was a 
compiler warning about:

testit.c: In function 'main':
testit.c:80: warning: cast to pointer from integer of different size

which would be:

     float *pafScanline;
     pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);

I could not find docs on CPLMalloc, or any info on if I need to free 
that and how!

I would appreciate if someone could code review the code at the end and 
comment on whether or not this is correct.

Thanks,
   -Steve

#include <gdal.h>

int main() {
     GDALDatasetH  hDataset;
     char *pszFilename = "/u/srcdata/ned2.vrt";
     //char *pszFilename = "/u/srcdata/NED2/-90_28_-84_30.tif";

     GDALDriverH   hDriver;
     double        adfGeoTransform[6];

     GDALRasterBandH hBand;
     int             nBlockXSize, nBlockYSize;
     int             bGotMin, bGotMax;
     double          adfMinMax[2];

     float *pafScanline;
     int   nXSize;

     int nXOff, nYOff;
     float elevation;

     float lon = -74.0;
     float lat =  42.0;

     GDALAllRegister();

     hDataset = GDALOpen( pszFilename, GA_ReadOnly );
     if( hDataset == NULL ) {
         printf("Failed to open %s!\n", pszFilename);
         exit(1);
     }

     hDriver = GDALGetDatasetDriver( hDataset );
     printf( "Driver: %s/%s\n",
         GDALGetDriverShortName( hDriver ),
         GDALGetDriverLongName( hDriver ) );

     printf( "Size is %dx%dx%d\n",
         GDALGetRasterXSize( hDataset ),
         GDALGetRasterYSize( hDataset ),
         GDALGetRasterCount( hDataset ) );

     if( GDALGetProjectionRef( hDataset ) != NULL )
         printf( "Projection is `%s'\n", GDALGetProjectionRef( hDataset ) );

     if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
     {
         printf( "Origin = (%.6f,%.6f)\n",
         adfGeoTransform[0], adfGeoTransform[3] );

         printf( "Pixel Size = (%.6f,%.6f)\n",
             adfGeoTransform[1], adfGeoTransform[5] );
     }

     hBand = GDALGetRasterBand( hDataset, 1 );
     GDALGetBlockSize( hBand, &nBlockXSize, &nBlockYSize );
     printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",
         nBlockXSize, nBlockYSize,
         GDALGetDataTypeName(GDALGetRasterDataType(hBand)),
         GDALGetColorInterpretationName(
             GDALGetRasterColorInterpretation(hBand)) );

     adfMinMax[0] = GDALGetRasterMinimum( hBand, &bGotMin );
     adfMinMax[1] = GDALGetRasterMaximum( hBand, &bGotMax );
     if( ! (bGotMin && bGotMax) )
         GDALComputeRasterMinMax( hBand, TRUE, adfMinMax );

     printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );

     if( GDALGetOverviewCount(hBand) > 0 )
         printf( "Band has %d overviews.\n", GDALGetOverviewCount(hBand));

     if( GDALGetRasterColorTable( hBand ) != NULL )
         printf( "Band has a color table with %d entries.\n",
                  GDALGetColorEntryCount(
                      GDALGetRasterColorTable( hBand ) ) );

     /*
      * This section segv trying to do a memset in GDALRasterIO
      * if I use the VRT driver, but works OK on the GTiff file.
      */
     /*
     nXSize = GDALGetRasterBandXSize( hBand );

     pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
     GDALRasterIO( hBand, GF_Read, 0, 0, nXSize, 1,
                   pafScanline, nXSize, 1, GDT_Float32,
                   0, 0 );
     */

     /* convert the lon, lat in a pixel location on the file and
      * read that location into a float.
      */
     nXOff = (lon - adfGeoTransform[0]) / adfGeoTransform[1] + 0.5;
     nYOff = (lat - adfGeoTransform[3]) / adfGeoTransform[5] + 0.5;
     GDALRasterIO( hBand, GF_Read, nXOff, nYOff, 1, 1,
                   &elevation, 1, 1, GDT_Float32,
                   0, 0 );
     printf("Elevation at %.6f, %.6f = %.1f\n", lon, lat, elevation);

     GDALClose(hDataset);
     return(0);
}



On 8/21/2010 6:07 PM, Stephen Woodbridge wrote:
> So I have been able to download the NED data and I have US coverage.
> The data is in GeoTiff and all in a single band Int16 format.
> I have create a ned.vrt file.
>
> So I'm interested in writing a simple program in C that I can pass a
> lat, lon and get the elevation. I assume I need to open the .vrt file
> but looking at the GDAL API, I'm not sure how to map the lat, lon to a
> pixel and then how to fetch the pixel value. If it matter, I will
> probably extend this later to process a list of locations or maybe
> extend it to read a shapefile and process the shape through it.
>
> Does anyone have a sample program that does something like this.
>
> -Steve
>
>
>
> woodbri@mappy:/u/srcdata$ gdalinfo -stats ned2.vrt
> Driver: VRT/Virtual Raster
> Files: ned2.vrt
> NED2/-100_25_-96_28.tif
> NED2/-102_28_-96_30.tif
> NED2/-102_30_-96_32.tif
> NED2/-102_32_-96_34.tif
> NED2/-102_34_-96_36.tif
> NED2/-102_36_-96_38.tif
> NED2/-102_38_-96_40.tif
> NED2/-102_40_-96_42.tif
> NED2/-102_42_-96_44.tif
> NED2/-102_44_-96_46.tif
> NED2/-102_46_-96_48.tif
> NED2/-102_48_-96_50.tif
> NED2/-108_28_-102_30.tif
> NED2/-108_30_-102_32.tif
> NED2/-108_32_-102_34.tif
> NED2/-108_34_-102_36.tif
> NED2/-108_36_-102_38.tif
> NED2/-108_38_-102_40.tif
> NED2/-108_40_-102_42.tif
> NED2/-108_42_-102_44.tif
> NED2/-108_44_-102_46.tif
> NED2/-108_46_-102_48.tif
> NED2/-108_48_-102_50.tif
> NED2/-114_30_-108_32.tif
> NED2/-114_32_-108_34.tif
> NED2/-114_34_-108_36.tif
> NED2/-114_36_-108_38.tif
> NED2/-114_38_-108_40.tif
> NED2/-114_40_-108_42.tif
> NED2/-114_42_-108_44.tif
> NED2/-114_44_-108_46.tif
> NED2/-114_46_-108_48.tif
> NED2/-114_48_-108_50.tif
> NED2/-120_32_-114_34.tif
> NED2/-120_34_-114_36.tif
> NED2/-120_36_-114_38.tif
> NED2/-120_38_-114_40.tif
> NED2/-120_40_-114_42.tif
> NED2/-120_42_-114_44.tif
> NED2/-120_44_-114_46.tif
> NED2/-120_46_-114_48.tif
> NED2/-120_48_-114_50.tif
> NED2/-123_33_-120_37.tif
> NED2/-125_37_-120_39.tif
> NED2/-125_39_-120_42.tif
> NED2/-126_42_-120_44.tif
> NED2/-126_44_-120_46.tif
> NED2/-126_46_-120_48.tif
> NED2/-126_48_-120_50.tif
> NED2/133_6.5_138.5_10.tif
> NED2/-139.0019842_51.9997277_-127.0018384_58.9998127.tif
> NED2/-139.0024054_58.9997472_-127.0018101_66.0000944.tif
> NED2/144_13_146_16.tif
> NED2/151_5_163.5_8.tif
> NED2/-157_18_-152_23.tif
> NED2/-157.5_18.75_-154.5_21.5.tif
> NED2/-160.5_21_-157.5_22.5.tif
> NED2/-162_18_-157_23.tif
> NED2/-171_-14.5_-169_-14.tif
> NED2/-68_17_-64_18.tif
> NED2/-72.0002778_40.9999994_-67.9999992_44.tif
> NED2/-72.0002778_44_-66_46.tif
> NED2/-72.0002778_46_-66_48.tif
> NED2/-78.0002778_33.0000047_-75.0000047_36.tif
> NED2/-78.0002778_36_-72_38.tif
> NED2/-78.0002778_38_-72_40.tif
> NED2/-78.0002778_40_-72_42.tif
> NED2/-78.0002778_42_-72_44.tif
> NED2/-78.0002778_44_-72_46.tif
> NED2/-84.0002778_24_-78_26.tif
> NED2/-84.0002778_26_-78_28.tif
> NED2/-84.0002778_28_-78_30.tif
> NED2/-84.0002778_30_-78_32.tif
> NED2/-84.0002778_32_-78_34.tif
> NED2/-84.0002778_34_-78_36.tif
> NED2/-84.0002778_36_-78_38.tif
> NED2/-84.0002778_38_-78_40.tif
> NED2/-84.0002778_40_-78_42.tif
> NED2/-84.0002778_42_-78_44.tif
> NED2/-85.0002778_44.0000047_-82.0000047_47.tif
> NED2/-90_28_-84_30.tif
> NED2/-90_30_-84_32.tif
> NED2/-90_32_-84_34.tif
> NED2/-90_34_-84_36.tif
> NED2/-90_36_-84_38.tif
> NED2/-90_38_-84_40.tif
> NED2/-90_40_-84_42.tif
> NED2/-90_42_-84_44.tif
> NED2/-90_44_-85_46.tif
> NED2/-90_46_-85_49.tif
> NED2/-96_28_-90_30.tif
> NED2/-96_30_-90_32.tif
> NED2/-96_32_-90_34.tif
> NED2/-96_34_-90_36.tif
> NED2/-96_36_-90_38.tif
> NED2/-96_38_-90_40.tif
> NED2/-96_40_-90_42.tif
> NED2/-96_42_-90_44.tif
> NED2/-96_44_-90_46.tif
> NED2/-96_46_-90_48.tif
> NED2/-96_48_-90_50.tif
> Size is 1180816, 284173
> Coordinate System is:
> GEOGCS["WGS 84",
> DATUM["WGS_1984",
> SPHEROID["WGS 84",6378137,298.257223563,
> AUTHORITY["EPSG","7030"]],
> AUTHORITY["EPSG","6326"]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433],
> AUTHORITY["EPSG","4326"]]
> Origin = (-171.000000000113090,66.000094447240443)
> Pixel Size = (0.000283278659440,-0.000283278659440)
> Corner Coordinates:
> Upper Left (-171.0000000, 66.0000944) (171d 0'0.00"W, 66d 0'0.34"N)
> Lower Left (-171.0000000, -14.5000520) (171d 0'0.00"W, 14d30'0.19"S)
> Upper Right ( 163.4999735, 66.0000944) (163d29'59.90"E, 66d 0'0.34"N)
> Lower Right ( 163.4999735, -14.5000520) (163d29'59.90"E, 14d30'0.19"S)
> Center ( -3.7500132, 25.7500212) ( 3d45'0.05"W, 25d45'0.08"N)
> Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
> Minimum=-83.000, Maximum=4665.000, Mean=25.333, StdDev=189.129
> Metadata:
> STATISTICS_MINIMUM=-83
> STATISTICS_MAXIMUM=4665
> STATISTICS_MEAN=25.332848474484
> STATISTICS_STDDEV=189.12886049417
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ahmettemiz88 at gmail.com  Sun Aug 22 11:31:26 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sun Aug 22 11:37:53 2010
Subject: [gdal-dev] Making Createlayer overwritable
Message-ID: <AANLkTim_vBN7keNW9+M7p8awtujXGsb18FbUMaLaJO=R@mail.gmail.com>

hello


Layer player12 = dspost2.CreateLayer("postlayer12", sr,
ogr.wkbLineString, null);

How can I make createlayer overwritable in java ?

regards
From even.rouault at mines-paris.org  Sun Aug 22 12:43:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Aug 22 12:43:10 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <4C709841.80406@swoodbridge.com>
References: <4C704E15.7040309@swoodbridge.com> <4C709841.80406@swoodbridge.com>
Message-ID: <201008221843.31470.even.rouault@mines-paris.org>

Stephen,

at first sight, I don't see anything wrong with your code.

You need to include "cpl_conv.h" for CPLMalloc(). And memory allocated with 
CPLMalloc() should be freed with CPLFree().  The doc is there : 
http://gdal.org/cpl__conv_8h.html  (http://gdal.org/ -> API reference 
documentation -> Files -> cpl_conv.h )

But that doesn't likely account for the segmentation fault you have. This code 
should work just fine with a GTiff or VRT dataset.

Do you use a recent version of GDAL ? If not, retry ;-) If still crashing, 
could you attach a debugger and show the stack trace at the place where it 
crashes and/or run valgrind on it ?

Best regards,

Even

Le dimanche 22 ao?t 2010 05:23:45, Stephen Woodbridge a ?crit :
> OK, well may to answer my own question by reading the GDAL API Tutorial
> and taking a guess at some parts I came up with the following. This is
> basically just a copy of the tutorial and at the end I added some code
> that I'm hoping reads the correct pixel for my lat,lon and prints out
> the elevation.
> 
> The tutorial code for "Fetching a Raster Band" works on a GTiff file but
> segv on a VRT file. Not sure why this happened, although there was a
> compiler warning about:
> 
> testit.c: In function 'main':
> testit.c:80: warning: cast to pointer from integer of different size
> 
> which would be:
> 
>      float *pafScanline;
>      pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
> 
> I could not find docs on CPLMalloc, or any info on if I need to free
> that and how!
> 
> I would appreciate if someone could code review the code at the end and
> comment on whether or not this is correct.
> 
> Thanks,
>    -Steve
> 
> #include <gdal.h>
> 
> int main() {
>      GDALDatasetH  hDataset;
>      char *pszFilename = "/u/srcdata/ned2.vrt";
>      //char *pszFilename = "/u/srcdata/NED2/-90_28_-84_30.tif";
> 
>      GDALDriverH   hDriver;
>      double        adfGeoTransform[6];
> 
>      GDALRasterBandH hBand;
>      int             nBlockXSize, nBlockYSize;
>      int             bGotMin, bGotMax;
>      double          adfMinMax[2];
> 
>      float *pafScanline;
>      int   nXSize;
> 
>      int nXOff, nYOff;
>      float elevation;
> 
>      float lon = -74.0;
>      float lat =  42.0;
> 
>      GDALAllRegister();
> 
>      hDataset = GDALOpen( pszFilename, GA_ReadOnly );
>      if( hDataset == NULL ) {
>          printf("Failed to open %s!\n", pszFilename);
>          exit(1);
>      }
> 
>      hDriver = GDALGetDatasetDriver( hDataset );
>      printf( "Driver: %s/%s\n",
>          GDALGetDriverShortName( hDriver ),
>          GDALGetDriverLongName( hDriver ) );
> 
>      printf( "Size is %dx%dx%d\n",
>          GDALGetRasterXSize( hDataset ),
>          GDALGetRasterYSize( hDataset ),
>          GDALGetRasterCount( hDataset ) );
> 
>      if( GDALGetProjectionRef( hDataset ) != NULL )
>          printf( "Projection is `%s'\n", GDALGetProjectionRef( hDataset )
> );
> 
>      if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
>      {
>          printf( "Origin = (%.6f,%.6f)\n",
>          adfGeoTransform[0], adfGeoTransform[3] );
> 
>          printf( "Pixel Size = (%.6f,%.6f)\n",
>              adfGeoTransform[1], adfGeoTransform[5] );
>      }
> 
>      hBand = GDALGetRasterBand( hDataset, 1 );
>      GDALGetBlockSize( hBand, &nBlockXSize, &nBlockYSize );
>      printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",
>          nBlockXSize, nBlockYSize,
>          GDALGetDataTypeName(GDALGetRasterDataType(hBand)),
>          GDALGetColorInterpretationName(
>              GDALGetRasterColorInterpretation(hBand)) );
> 
>      adfMinMax[0] = GDALGetRasterMinimum( hBand, &bGotMin );
>      adfMinMax[1] = GDALGetRasterMaximum( hBand, &bGotMax );
>      if( ! (bGotMin && bGotMax) )
>          GDALComputeRasterMinMax( hBand, TRUE, adfMinMax );
> 
>      printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );
> 
>      if( GDALGetOverviewCount(hBand) > 0 )
>          printf( "Band has %d overviews.\n", GDALGetOverviewCount(hBand));
> 
>      if( GDALGetRasterColorTable( hBand ) != NULL )
>          printf( "Band has a color table with %d entries.\n",
>                   GDALGetColorEntryCount(
>                       GDALGetRasterColorTable( hBand ) ) );
> 
>      /*
>       * This section segv trying to do a memset in GDALRasterIO
>       * if I use the VRT driver, but works OK on the GTiff file.
>       */
>      /*
>      nXSize = GDALGetRasterBandXSize( hBand );
> 
>      pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
>      GDALRasterIO( hBand, GF_Read, 0, 0, nXSize, 1,
>                    pafScanline, nXSize, 1, GDT_Float32,
>                    0, 0 );
>      */
> 
>      /* convert the lon, lat in a pixel location on the file and
>       * read that location into a float.
>       */
>      nXOff = (lon - adfGeoTransform[0]) / adfGeoTransform[1] + 0.5;
>      nYOff = (lat - adfGeoTransform[3]) / adfGeoTransform[5] + 0.5;
>      GDALRasterIO( hBand, GF_Read, nXOff, nYOff, 1, 1,
>                    &elevation, 1, 1, GDT_Float32,
>                    0, 0 );
>      printf("Elevation at %.6f, %.6f = %.1f\n", lon, lat, elevation);
> 
>      GDALClose(hDataset);
>      return(0);
> }
> 
> On 8/21/2010 6:07 PM, Stephen Woodbridge wrote:
> > So I have been able to download the NED data and I have US coverage.
> > The data is in GeoTiff and all in a single band Int16 format.
> > I have create a ned.vrt file.
> > 
> > So I'm interested in writing a simple program in C that I can pass a
> > lat, lon and get the elevation. I assume I need to open the .vrt file
> > but looking at the GDAL API, I'm not sure how to map the lat, lon to a
> > pixel and then how to fetch the pixel value. If it matter, I will
> > probably extend this later to process a list of locations or maybe
> > extend it to read a shapefile and process the shape through it.
> > 
> > Does anyone have a sample program that does something like this.
> > 
> > -Steve
> > 
> > 
> > 
> > woodbri@mappy:/u/srcdata$ gdalinfo -stats ned2.vrt
> > Driver: VRT/Virtual Raster
> > Files: ned2.vrt
> > NED2/-100_25_-96_28.tif
> > NED2/-102_28_-96_30.tif
> > NED2/-102_30_-96_32.tif
> > NED2/-102_32_-96_34.tif
> > NED2/-102_34_-96_36.tif
> > NED2/-102_36_-96_38.tif
> > NED2/-102_38_-96_40.tif
> > NED2/-102_40_-96_42.tif
> > NED2/-102_42_-96_44.tif
> > NED2/-102_44_-96_46.tif
> > NED2/-102_46_-96_48.tif
> > NED2/-102_48_-96_50.tif
> > NED2/-108_28_-102_30.tif
> > NED2/-108_30_-102_32.tif
> > NED2/-108_32_-102_34.tif
> > NED2/-108_34_-102_36.tif
> > NED2/-108_36_-102_38.tif
> > NED2/-108_38_-102_40.tif
> > NED2/-108_40_-102_42.tif
> > NED2/-108_42_-102_44.tif
> > NED2/-108_44_-102_46.tif
> > NED2/-108_46_-102_48.tif
> > NED2/-108_48_-102_50.tif
> > NED2/-114_30_-108_32.tif
> > NED2/-114_32_-108_34.tif
> > NED2/-114_34_-108_36.tif
> > NED2/-114_36_-108_38.tif
> > NED2/-114_38_-108_40.tif
> > NED2/-114_40_-108_42.tif
> > NED2/-114_42_-108_44.tif
> > NED2/-114_44_-108_46.tif
> > NED2/-114_46_-108_48.tif
> > NED2/-114_48_-108_50.tif
> > NED2/-120_32_-114_34.tif
> > NED2/-120_34_-114_36.tif
> > NED2/-120_36_-114_38.tif
> > NED2/-120_38_-114_40.tif
> > NED2/-120_40_-114_42.tif
> > NED2/-120_42_-114_44.tif
> > NED2/-120_44_-114_46.tif
> > NED2/-120_46_-114_48.tif
> > NED2/-120_48_-114_50.tif
> > NED2/-123_33_-120_37.tif
> > NED2/-125_37_-120_39.tif
> > NED2/-125_39_-120_42.tif
> > NED2/-126_42_-120_44.tif
> > NED2/-126_44_-120_46.tif
> > NED2/-126_46_-120_48.tif
> > NED2/-126_48_-120_50.tif
> > NED2/133_6.5_138.5_10.tif
> > NED2/-139.0019842_51.9997277_-127.0018384_58.9998127.tif
> > NED2/-139.0024054_58.9997472_-127.0018101_66.0000944.tif
> > NED2/144_13_146_16.tif
> > NED2/151_5_163.5_8.tif
> > NED2/-157_18_-152_23.tif
> > NED2/-157.5_18.75_-154.5_21.5.tif
> > NED2/-160.5_21_-157.5_22.5.tif
> > NED2/-162_18_-157_23.tif
> > NED2/-171_-14.5_-169_-14.tif
> > NED2/-68_17_-64_18.tif
> > NED2/-72.0002778_40.9999994_-67.9999992_44.tif
> > NED2/-72.0002778_44_-66_46.tif
> > NED2/-72.0002778_46_-66_48.tif
> > NED2/-78.0002778_33.0000047_-75.0000047_36.tif
> > NED2/-78.0002778_36_-72_38.tif
> > NED2/-78.0002778_38_-72_40.tif
> > NED2/-78.0002778_40_-72_42.tif
> > NED2/-78.0002778_42_-72_44.tif
> > NED2/-78.0002778_44_-72_46.tif
> > NED2/-84.0002778_24_-78_26.tif
> > NED2/-84.0002778_26_-78_28.tif
> > NED2/-84.0002778_28_-78_30.tif
> > NED2/-84.0002778_30_-78_32.tif
> > NED2/-84.0002778_32_-78_34.tif
> > NED2/-84.0002778_34_-78_36.tif
> > NED2/-84.0002778_36_-78_38.tif
> > NED2/-84.0002778_38_-78_40.tif
> > NED2/-84.0002778_40_-78_42.tif
> > NED2/-84.0002778_42_-78_44.tif
> > NED2/-85.0002778_44.0000047_-82.0000047_47.tif
> > NED2/-90_28_-84_30.tif
> > NED2/-90_30_-84_32.tif
> > NED2/-90_32_-84_34.tif
> > NED2/-90_34_-84_36.tif
> > NED2/-90_36_-84_38.tif
> > NED2/-90_38_-84_40.tif
> > NED2/-90_40_-84_42.tif
> > NED2/-90_42_-84_44.tif
> > NED2/-90_44_-85_46.tif
> > NED2/-90_46_-85_49.tif
> > NED2/-96_28_-90_30.tif
> > NED2/-96_30_-90_32.tif
> > NED2/-96_32_-90_34.tif
> > NED2/-96_34_-90_36.tif
> > NED2/-96_36_-90_38.tif
> > NED2/-96_38_-90_40.tif
> > NED2/-96_40_-90_42.tif
> > NED2/-96_42_-90_44.tif
> > NED2/-96_44_-90_46.tif
> > NED2/-96_46_-90_48.tif
> > NED2/-96_48_-90_50.tif
> > Size is 1180816, 284173
> > Coordinate System is:
> > GEOGCS["WGS 84",
> > DATUM["WGS_1984",
> > SPHEROID["WGS 84",6378137,298.257223563,
> > AUTHORITY["EPSG","7030"]],
> > AUTHORITY["EPSG","6326"]],
> > PRIMEM["Greenwich",0],
> > UNIT["degree",0.0174532925199433],
> > AUTHORITY["EPSG","4326"]]
> > Origin = (-171.000000000113090,66.000094447240443)
> > Pixel Size = (0.000283278659440,-0.000283278659440)
> > Corner Coordinates:
> > Upper Left (-171.0000000, 66.0000944) (171d 0'0.00"W, 66d 0'0.34"N)
> > Lower Left (-171.0000000, -14.5000520) (171d 0'0.00"W, 14d30'0.19"S)
> > Upper Right ( 163.4999735, 66.0000944) (163d29'59.90"E, 66d 0'0.34"N)
> > Lower Right ( 163.4999735, -14.5000520) (163d29'59.90"E, 14d30'0.19"S)
> > Center ( -3.7500132, 25.7500212) ( 3d45'0.05"W, 25d45'0.08"N)
> > Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
> > Minimum=-83.000, Maximum=4665.000, Mean=25.333, StdDev=189.129
> > Metadata:
> > STATISTICS_MINIMUM=-83
> > STATISTICS_MAXIMUM=4665
> > STATISTICS_MEAN=25.332848474484
> > STATISTICS_STDDEV=189.12886049417
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From woodbri at swoodbridge.com  Sun Aug 22 23:28:17 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun Aug 22 23:30:33 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <201008221843.31470.even.rouault@mines-paris.org>
References: <4C704E15.7040309@swoodbridge.com> <4C709841.80406@swoodbridge.com>
	<201008221843.31470.even.rouault@mines-paris.org>
Message-ID: <4C71EAD1.1080807@swoodbridge.com>

Even,

It seems the adding:

#include <cpl_conv.h>

resolves the segv issue.

I would recommend changing the example in:

http://www.gdal.org/gdal_tutorial.html

To include that in the section "Reading Raster Data" because the example 
C code uses CPLMalloc(). It would also be very helpful to add:

...
CPLFree(pafScanline);

to the example code. And a link to http://gdal.org/cpl__conv_8h.html 
which is not otherwise referenced.

Anyway, code is working great now. I am generating an elevation profile 
from a number of points along a path.

1. tried to get the points via USGS NED webservice: 132 point took 4-6 
min and 132 points is a short path.

So I downloaded the USGS NED data and created a .vrt file for the layer:

2. C code to open vrt file and handle requests via local CGI took 4 sec
3. C code to open vrt file and handle requests via local FCGI took < 1 sec

And each profile time above has some overhead because it has to compute 
a route in pgrouting to get the points needed to generate the profile.

http://imaptools.com:8080/routeloops/route_loops6.php?x=-71.387764&y=42.620002&length=4828.032&heading=-1&shape=-1&rand=0.06593320066404917&allow=0%2C1&zoom=11&lat=42.62&lon=-71.38776&layers=B00TT&ll=-71.387764%2042.620002&len=3&rs=0.4646901273751023&al=0,1&u=E&cw=1&f=profile

Thanks for the help and support everyone.

-Steve

On 8/22/2010 12:43 PM, Even Rouault wrote:
> Stephen,
>
> at first sight, I don't see anything wrong with your code.
>
> You need to include "cpl_conv.h" for CPLMalloc(). And memory allocated with
> CPLMalloc() should be freed with CPLFree().  The doc is there :
> http://gdal.org/cpl__conv_8h.html  (http://gdal.org/ ->  API reference
> documentation ->  Files ->  cpl_conv.h )
>
> But that doesn't likely account for the segmentation fault you have. This code
> should work just fine with a GTiff or VRT dataset.
>
> Do you use a recent version of GDAL ? If not, retry ;-) If still crashing,
> could you attach a debugger and show the stack trace at the place where it
> crashes and/or run valgrind on it ?
>
> Best regards,
>
> Even
>
> Le dimanche 22 ao?t 2010 05:23:45, Stephen Woodbridge a ?crit :
>> OK, well may to answer my own question by reading the GDAL API Tutorial
>> and taking a guess at some parts I came up with the following. This is
>> basically just a copy of the tutorial and at the end I added some code
>> that I'm hoping reads the correct pixel for my lat,lon and prints out
>> the elevation.
>>
>> The tutorial code for "Fetching a Raster Band" works on a GTiff file but
>> segv on a VRT file. Not sure why this happened, although there was a
>> compiler warning about:
>>
>> testit.c: In function 'main':
>> testit.c:80: warning: cast to pointer from integer of different size
>>
>> which would be:
>>
>>       float *pafScanline;
>>       pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
>>
>> I could not find docs on CPLMalloc, or any info on if I need to free
>> that and how!
>>
>> I would appreciate if someone could code review the code at the end and
>> comment on whether or not this is correct.
>>
>> Thanks,
>>     -Steve
>>
>> #include<gdal.h>
>>
>> int main() {
>>       GDALDatasetH  hDataset;
>>       char *pszFilename = "/u/srcdata/ned2.vrt";
>>       //char *pszFilename = "/u/srcdata/NED2/-90_28_-84_30.tif";
>>
>>       GDALDriverH   hDriver;
>>       double        adfGeoTransform[6];
>>
>>       GDALRasterBandH hBand;
>>       int             nBlockXSize, nBlockYSize;
>>       int             bGotMin, bGotMax;
>>       double          adfMinMax[2];
>>
>>       float *pafScanline;
>>       int   nXSize;
>>
>>       int nXOff, nYOff;
>>       float elevation;
>>
>>       float lon = -74.0;
>>       float lat =  42.0;
>>
>>       GDALAllRegister();
>>
>>       hDataset = GDALOpen( pszFilename, GA_ReadOnly );
>>       if( hDataset == NULL ) {
>>           printf("Failed to open %s!\n", pszFilename);
>>           exit(1);
>>       }
>>
>>       hDriver = GDALGetDatasetDriver( hDataset );
>>       printf( "Driver: %s/%s\n",
>>           GDALGetDriverShortName( hDriver ),
>>           GDALGetDriverLongName( hDriver ) );
>>
>>       printf( "Size is %dx%dx%d\n",
>>           GDALGetRasterXSize( hDataset ),
>>           GDALGetRasterYSize( hDataset ),
>>           GDALGetRasterCount( hDataset ) );
>>
>>       if( GDALGetProjectionRef( hDataset ) != NULL )
>>           printf( "Projection is `%s'\n", GDALGetProjectionRef( hDataset )
>> );
>>
>>       if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
>>       {
>>           printf( "Origin = (%.6f,%.6f)\n",
>>           adfGeoTransform[0], adfGeoTransform[3] );
>>
>>           printf( "Pixel Size = (%.6f,%.6f)\n",
>>               adfGeoTransform[1], adfGeoTransform[5] );
>>       }
>>
>>       hBand = GDALGetRasterBand( hDataset, 1 );
>>       GDALGetBlockSize( hBand,&nBlockXSize,&nBlockYSize );
>>       printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",
>>           nBlockXSize, nBlockYSize,
>>           GDALGetDataTypeName(GDALGetRasterDataType(hBand)),
>>           GDALGetColorInterpretationName(
>>               GDALGetRasterColorInterpretation(hBand)) );
>>
>>       adfMinMax[0] = GDALGetRasterMinimum( hBand,&bGotMin );
>>       adfMinMax[1] = GDALGetRasterMaximum( hBand,&bGotMax );
>>       if( ! (bGotMin&&  bGotMax) )
>>           GDALComputeRasterMinMax( hBand, TRUE, adfMinMax );
>>
>>       printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );
>>
>>       if( GDALGetOverviewCount(hBand)>  0 )
>>           printf( "Band has %d overviews.\n", GDALGetOverviewCount(hBand));
>>
>>       if( GDALGetRasterColorTable( hBand ) != NULL )
>>           printf( "Band has a color table with %d entries.\n",
>>                    GDALGetColorEntryCount(
>>                        GDALGetRasterColorTable( hBand ) ) );
>>
>>       /*
>>        * This section segv trying to do a memset in GDALRasterIO
>>        * if I use the VRT driver, but works OK on the GTiff file.
>>        */
>>       /*
>>       nXSize = GDALGetRasterBandXSize( hBand );
>>
>>       pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
>>       GDALRasterIO( hBand, GF_Read, 0, 0, nXSize, 1,
>>                     pafScanline, nXSize, 1, GDT_Float32,
>>                     0, 0 );
>>       */
>>
>>       /* convert the lon, lat in a pixel location on the file and
>>        * read that location into a float.
>>        */
>>       nXOff = (lon - adfGeoTransform[0]) / adfGeoTransform[1] + 0.5;
>>       nYOff = (lat - adfGeoTransform[3]) / adfGeoTransform[5] + 0.5;
>>       GDALRasterIO( hBand, GF_Read, nXOff, nYOff, 1, 1,
>>                     &elevation, 1, 1, GDT_Float32,
>>                     0, 0 );
>>       printf("Elevation at %.6f, %.6f = %.1f\n", lon, lat, elevation);
>>
>>       GDALClose(hDataset);
>>       return(0);
>> }
>>
>> On 8/21/2010 6:07 PM, Stephen Woodbridge wrote:
>>> So I have been able to download the NED data and I have US coverage.
>>> The data is in GeoTiff and all in a single band Int16 format.
>>> I have create a ned.vrt file.
>>>
>>> So I'm interested in writing a simple program in C that I can pass a
>>> lat, lon and get the elevation. I assume I need to open the .vrt file
>>> but looking at the GDAL API, I'm not sure how to map the lat, lon to a
>>> pixel and then how to fetch the pixel value. If it matter, I will
>>> probably extend this later to process a list of locations or maybe
>>> extend it to read a shapefile and process the shape through it.
>>>
>>> Does anyone have a sample program that does something like this.
>>>
>>> -Steve
>>>
>>>
>>>
>>> woodbri@mappy:/u/srcdata$ gdalinfo -stats ned2.vrt
>>> Driver: VRT/Virtual Raster
>>> Files: ned2.vrt
>>> NED2/-100_25_-96_28.tif
>>> NED2/-102_28_-96_30.tif
>>> NED2/-102_30_-96_32.tif
>>> NED2/-102_32_-96_34.tif
>>> NED2/-102_34_-96_36.tif
>>> NED2/-102_36_-96_38.tif
>>> NED2/-102_38_-96_40.tif
>>> NED2/-102_40_-96_42.tif
>>> NED2/-102_42_-96_44.tif
>>> NED2/-102_44_-96_46.tif
>>> NED2/-102_46_-96_48.tif
>>> NED2/-102_48_-96_50.tif
>>> NED2/-108_28_-102_30.tif
>>> NED2/-108_30_-102_32.tif
>>> NED2/-108_32_-102_34.tif
>>> NED2/-108_34_-102_36.tif
>>> NED2/-108_36_-102_38.tif
>>> NED2/-108_38_-102_40.tif
>>> NED2/-108_40_-102_42.tif
>>> NED2/-108_42_-102_44.tif
>>> NED2/-108_44_-102_46.tif
>>> NED2/-108_46_-102_48.tif
>>> NED2/-108_48_-102_50.tif
>>> NED2/-114_30_-108_32.tif
>>> NED2/-114_32_-108_34.tif
>>> NED2/-114_34_-108_36.tif
>>> NED2/-114_36_-108_38.tif
>>> NED2/-114_38_-108_40.tif
>>> NED2/-114_40_-108_42.tif
>>> NED2/-114_42_-108_44.tif
>>> NED2/-114_44_-108_46.tif
>>> NED2/-114_46_-108_48.tif
>>> NED2/-114_48_-108_50.tif
>>> NED2/-120_32_-114_34.tif
>>> NED2/-120_34_-114_36.tif
>>> NED2/-120_36_-114_38.tif
>>> NED2/-120_38_-114_40.tif
>>> NED2/-120_40_-114_42.tif
>>> NED2/-120_42_-114_44.tif
>>> NED2/-120_44_-114_46.tif
>>> NED2/-120_46_-114_48.tif
>>> NED2/-120_48_-114_50.tif
>>> NED2/-123_33_-120_37.tif
>>> NED2/-125_37_-120_39.tif
>>> NED2/-125_39_-120_42.tif
>>> NED2/-126_42_-120_44.tif
>>> NED2/-126_44_-120_46.tif
>>> NED2/-126_46_-120_48.tif
>>> NED2/-126_48_-120_50.tif
>>> NED2/133_6.5_138.5_10.tif
>>> NED2/-139.0019842_51.9997277_-127.0018384_58.9998127.tif
>>> NED2/-139.0024054_58.9997472_-127.0018101_66.0000944.tif
>>> NED2/144_13_146_16.tif
>>> NED2/151_5_163.5_8.tif
>>> NED2/-157_18_-152_23.tif
>>> NED2/-157.5_18.75_-154.5_21.5.tif
>>> NED2/-160.5_21_-157.5_22.5.tif
>>> NED2/-162_18_-157_23.tif
>>> NED2/-171_-14.5_-169_-14.tif
>>> NED2/-68_17_-64_18.tif
>>> NED2/-72.0002778_40.9999994_-67.9999992_44.tif
>>> NED2/-72.0002778_44_-66_46.tif
>>> NED2/-72.0002778_46_-66_48.tif
>>> NED2/-78.0002778_33.0000047_-75.0000047_36.tif
>>> NED2/-78.0002778_36_-72_38.tif
>>> NED2/-78.0002778_38_-72_40.tif
>>> NED2/-78.0002778_40_-72_42.tif
>>> NED2/-78.0002778_42_-72_44.tif
>>> NED2/-78.0002778_44_-72_46.tif
>>> NED2/-84.0002778_24_-78_26.tif
>>> NED2/-84.0002778_26_-78_28.tif
>>> NED2/-84.0002778_28_-78_30.tif
>>> NED2/-84.0002778_30_-78_32.tif
>>> NED2/-84.0002778_32_-78_34.tif
>>> NED2/-84.0002778_34_-78_36.tif
>>> NED2/-84.0002778_36_-78_38.tif
>>> NED2/-84.0002778_38_-78_40.tif
>>> NED2/-84.0002778_40_-78_42.tif
>>> NED2/-84.0002778_42_-78_44.tif
>>> NED2/-85.0002778_44.0000047_-82.0000047_47.tif
>>> NED2/-90_28_-84_30.tif
>>> NED2/-90_30_-84_32.tif
>>> NED2/-90_32_-84_34.tif
>>> NED2/-90_34_-84_36.tif
>>> NED2/-90_36_-84_38.tif
>>> NED2/-90_38_-84_40.tif
>>> NED2/-90_40_-84_42.tif
>>> NED2/-90_42_-84_44.tif
>>> NED2/-90_44_-85_46.tif
>>> NED2/-90_46_-85_49.tif
>>> NED2/-96_28_-90_30.tif
>>> NED2/-96_30_-90_32.tif
>>> NED2/-96_32_-90_34.tif
>>> NED2/-96_34_-90_36.tif
>>> NED2/-96_36_-90_38.tif
>>> NED2/-96_38_-90_40.tif
>>> NED2/-96_40_-90_42.tif
>>> NED2/-96_42_-90_44.tif
>>> NED2/-96_44_-90_46.tif
>>> NED2/-96_46_-90_48.tif
>>> NED2/-96_48_-90_50.tif
>>> Size is 1180816, 284173
>>> Coordinate System is:
>>> GEOGCS["WGS 84",
>>> DATUM["WGS_1984",
>>> SPHEROID["WGS 84",6378137,298.257223563,
>>> AUTHORITY["EPSG","7030"]],
>>> AUTHORITY["EPSG","6326"]],
>>> PRIMEM["Greenwich",0],
>>> UNIT["degree",0.0174532925199433],
>>> AUTHORITY["EPSG","4326"]]
>>> Origin = (-171.000000000113090,66.000094447240443)
>>> Pixel Size = (0.000283278659440,-0.000283278659440)
>>> Corner Coordinates:
>>> Upper Left (-171.0000000, 66.0000944) (171d 0'0.00"W, 66d 0'0.34"N)
>>> Lower Left (-171.0000000, -14.5000520) (171d 0'0.00"W, 14d30'0.19"S)
>>> Upper Right ( 163.4999735, 66.0000944) (163d29'59.90"E, 66d 0'0.34"N)
>>> Lower Right ( 163.4999735, -14.5000520) (163d29'59.90"E, 14d30'0.19"S)
>>> Center ( -3.7500132, 25.7500212) ( 3d45'0.05"W, 25d45'0.08"N)
>>> Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
>>> Minimum=-83.000, Maximum=4665.000, Mean=25.333, StdDev=189.129
>>> Metadata:
>>> STATISTICS_MINIMUM=-83
>>> STATISTICS_MAXIMUM=4665
>>> STATISTICS_MEAN=25.332848474484
>>> STATISTICS_STDDEV=189.12886049417
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mail2vajram at gmail.com  Mon Aug 23 00:57:38 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Mon Aug 23 00:57:41 2010
Subject: [gdal-dev] Re: how to (install) use gdal libraries in python
In-Reply-To: <4C6D5818.7080404@noaa.gov>
References: <1282112164632-5435197.post@n2.nabble.com>
	<AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
	<1282130031589-5435889.post@n2.nabble.com>
	<4C6C0AD2.9090407@noaa.gov>
	<1282195523149-5439003.post@n2.nabble.com>
	<4C6D5818.7080404@noaa.gov>
Message-ID: <1282539458704-5451449.post@n2.nabble.com>


Thanks for ur help....

I followed the complete procedure,in the PDF provided by JAY.L but after
installing all the appropriate bindings also i got an error..Here i attached
screen shot of the error message....
Please give the suggestion to rectify this error...

Thnaks.....
http://osgeo-org.1803224.n2.nabble.com/file/n5451449/gdal_error.jpg
gdal_error.jpg   
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-install-use-gdal-libraries-in-python-tp5435197p5451449.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From enrico.oemi at gmail.com  Mon Aug 23 03:23:32 2010
From: enrico.oemi at gmail.com (Kiks)
Date: Mon Aug 23 03:23:33 2010
Subject: [gdal-dev] ecw gdalinfo problem
Message-ID: <1282548212185-5451644.post@n2.nabble.com>


Hi to all, 
I've got a problem since I upgraded my mapserver. 
When I run gdalnfo myfile.ecw this error popup: 

"Cannot find entry point ??0CNSJPBox@@QAE@XZ od the procedure in the library
NCSEcw.dll" 

NCSEcw.dll version is 1.5.2.312 
Is this correct? 
Any ideas about it? 

Thanks, 
Kiks
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ecw-gdalinfo-problem-tp5451644p5451644.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mail2vajram at gmail.com  Mon Aug 23 05:26:52 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Mon Aug 23 05:26:54 2010
Subject: [gdal-dev] how to clip the shape file
Message-ID: <1282555612734-5451928.post@n2.nabble.com>


I want to access shape files using GDAL, and i have a shape file and raster
image. then how to clip the shape file which covers that raster....how to do
this.

Thank you....
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-clip-the-shape-file-tp5451928p5451928.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Aug 23 05:34:28 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Aug 23 05:34:30 2010
Subject: [gdal-dev] how to clip the shape file
In-Reply-To: <1282555612734-5451928.post@n2.nabble.com>
References: <1282555612734-5451928.post@n2.nabble.com>
Message-ID: <AANLkTi=zyb3zBeoxZi02H1XLX4wvtKKMAeeXVH8=KDKO@mail.gmail.com>

Vajram,

Unless you want to do this with many files, you can just mention the
raster's extents in the ogr2ogr utility with the options -spat and/or
-clipsrs and convert the shapefile into a new shapefile that covers the
raster.

On Mon, Aug 23, 2010 at 2:56 PM, mail2vajram <mail2vajram@gmail.com> wrote:

>
> I want to access shape files using GDAL, and i have a shape file and raster
> image. then how to clip the shape file which covers that raster....how to
> do
> this.
>
> Thank you....
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/how-to-clip-the-shape-file-tp5451928p5451928.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100823/89378b53/attachment.html
From jonasln at gmail.com  Mon Aug 23 07:41:32 2010
From: jonasln at gmail.com (jonas nielsen)
Date: Mon Aug 23 07:41:34 2010
Subject: [gdal-dev] Artifacts when presenting WMS based on a number of
 adjoining vrt files with overviews
Message-ID: <AANLkTinVn2AurMV97EL=45HKZzevt6mAvhGpAC_q9CB0@mail.gmail.com>

Hi List,

Help would be sincerely appreciated:



We are seeing artifacts when presenting WMS images based on a number of
adjoining .vrt files with overviews.



Background.

We are processing 47.000 files containing aerial photos of 1 km by 1 km
each, at a resolution of 10 cm by 10 cm. These are to be distributed as WMS
through MapServer. Originally we planned to create one or more vrt files
with overviews for this.

We observed the processing efficiency of GDAL (gdaladdo) deteriorate as the
number of image files in the vrt increased. Therefore we create vrt files
for every 100 photos (10 km by 10 km area), build an external,
jpeg-compressed overview for each, and then present these 470 files together
through MapServer. We build the jpeg-compressed overviews with gdaladdo.* *

* *

The bug.

Viewing the output for a 2000 km2 test area, we see vertical black or white
lines in parts of the output. Normally, these lines only extend partially
from top to bottom in the image. The lines do not appear in all zoom levels.
Changing width or height by a pixel or two may make them go away. Panning in
the image also may make them go away. We never see the lines when zoomed in
far enough to be viewing the raw image files. The lines do not allways
appear along the ?seamlines? between the 10 by 10 km blocks ? but mostly do
though.



The artifacts appear both when viewing the output from MapServer with Gaia
and through a browser.





Any thoughts on what might be causing this?





For reference, the gdaladdo command:

gdaladdo /data/file.vrt -r average -ro --config GDAL_CACHEMAX 1000 --config
COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 75 --config
PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config
BIGTIFF_OVERVIEW YES 2 4 8 16 32 64 128 256 512 1024 2048
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100823/3b3e8279/attachment.html
From bfraser at geoanalytic.com  Mon Aug 23 10:17:56 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Aug 23 10:18:08 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <4C71EAD1.1080807@swoodbridge.com>
References: <4C704E15.7040309@swoodbridge.com>
	<4C709841.80406@swoodbridge.com>	<201008221843.31470.even.rouault@mines-paris.org>
	<4C71EAD1.1080807@swoodbridge.com>
Message-ID: <4C728314.9090302@geoanalytic.com>

Steve,

   Excellent info!  I had been contemplating using GDAL's VRT format to create 
an elevation web service so I could display X,Y and Z on mouse moves in web 
mapping, but was unsure about the performance.  Looks like fcgi could work.

   FYI, I think I'll use Google's <ElevationResponse> XML format 
(http://code.google.com/apis/maps/documentation/elevation/), but I may extend to 
have some kind of quality/accuracy and vertical datum values too.  Here's a 
stock Google example:

<ElevationResponse>
  <status>OK</status>
  <result>
   <location>
    <lat>39.7391536</lat>
    <lng>-104.9847034</lng>
   </location>
   <elevation>1608.8402100</elevation>
  </result>
  <result>
   <location>
    <lat>36.4555560</lat>
    <lng>-116.8666670</lng>
   </location>
   <elevation>-50.7890358</elevation>
  </result>
</ElevationResponse>


Or perhaps the less verbose USGS format 
(http://gisdata.usgs.gov/XMLWebServices2/Elevation_Service_Methods.php):

<Data_ID>[Source Layer ID]</Data_ID>
<Elevation>[Decimal Elevation Value]</Elevation>
<Units>[FEET or METERS]</Units>

Thanks again...

Best Regards,
Brent Fraser

Stephen Woodbridge wrote:
> Even,
> 
> It seems the adding:
> 
> #include <cpl_conv.h>
> 
> resolves the segv issue.
> 
> I would recommend changing the example in:
> 
> http://www.gdal.org/gdal_tutorial.html
> 
> To include that in the section "Reading Raster Data" because the example 
> C code uses CPLMalloc(). It would also be very helpful to add:
> 
> ...
> CPLFree(pafScanline);
> 
> to the example code. And a link to http://gdal.org/cpl__conv_8h.html 
> which is not otherwise referenced.
> 
> Anyway, code is working great now. I am generating an elevation profile 
> from a number of points along a path.
> 
> 1. tried to get the points via USGS NED webservice: 132 point took 4-6 
> min and 132 points is a short path.
> 
> So I downloaded the USGS NED data and created a .vrt file for the layer:
> 
> 2. C code to open vrt file and handle requests via local CGI took 4 sec
> 3. C code to open vrt file and handle requests via local FCGI took < 1 sec
> 
> And each profile time above has some overhead because it has to compute 
> a route in pgrouting to get the points needed to generate the profile.
> 
> http://imaptools.com:8080/routeloops/route_loops6.php?x=-71.387764&y=42.620002&length=4828.032&heading=-1&shape=-1&rand=0.06593320066404917&allow=0%2C1&zoom=11&lat=42.62&lon=-71.38776&layers=B00TT&ll=-71.387764%2042.620002&len=3&rs=0.4646901273751023&al=0,1&u=E&cw=1&f=profile 
> 
> 
> Thanks for the help and support everyone.
> 
> -Steve
> 
> On 8/22/2010 12:43 PM, Even Rouault wrote:
>> Stephen,
>>
>> at first sight, I don't see anything wrong with your code.
>>
>> You need to include "cpl_conv.h" for CPLMalloc(). And memory allocated 
>> with
>> CPLMalloc() should be freed with CPLFree().  The doc is there :
>> http://gdal.org/cpl__conv_8h.html  (http://gdal.org/ ->  API reference
>> documentation ->  Files ->  cpl_conv.h )
>>
>> But that doesn't likely account for the segmentation fault you have. 
>> This code
>> should work just fine with a GTiff or VRT dataset.
>>
>> Do you use a recent version of GDAL ? If not, retry ;-) If still 
>> crashing,
>> could you attach a debugger and show the stack trace at the place 
>> where it
>> crashes and/or run valgrind on it ?
>>
>> Best regards,
>>
>> Even
>>
>> Le dimanche 22 ao?t 2010 05:23:45, Stephen Woodbridge a ?crit :
>>> OK, well may to answer my own question by reading the GDAL API Tutorial
>>> and taking a guess at some parts I came up with the following. This is
>>> basically just a copy of the tutorial and at the end I added some code
>>> that I'm hoping reads the correct pixel for my lat,lon and prints out
>>> the elevation.
>>>
>>> The tutorial code for "Fetching a Raster Band" works on a GTiff file but
>>> segv on a VRT file. Not sure why this happened, although there was a
>>> compiler warning about:
>>>
>>> testit.c: In function 'main':
>>> testit.c:80: warning: cast to pointer from integer of different size
>>>
>>> which would be:
>>>
>>>       float *pafScanline;
>>>       pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
>>>
>>> I could not find docs on CPLMalloc, or any info on if I need to free
>>> that and how!
>>>
>>> I would appreciate if someone could code review the code at the end and
>>> comment on whether or not this is correct.
>>>
>>> Thanks,
>>>     -Steve
>>>
>>> #include<gdal.h>
>>>
>>> int main() {
>>>       GDALDatasetH  hDataset;
>>>       char *pszFilename = "/u/srcdata/ned2.vrt";
>>>       //char *pszFilename = "/u/srcdata/NED2/-90_28_-84_30.tif";
>>>
>>>       GDALDriverH   hDriver;
>>>       double        adfGeoTransform[6];
>>>
>>>       GDALRasterBandH hBand;
>>>       int             nBlockXSize, nBlockYSize;
>>>       int             bGotMin, bGotMax;
>>>       double          adfMinMax[2];
>>>
>>>       float *pafScanline;
>>>       int   nXSize;
>>>
>>>       int nXOff, nYOff;
>>>       float elevation;
>>>
>>>       float lon = -74.0;
>>>       float lat =  42.0;
>>>
>>>       GDALAllRegister();
>>>
>>>       hDataset = GDALOpen( pszFilename, GA_ReadOnly );
>>>       if( hDataset == NULL ) {
>>>           printf("Failed to open %s!\n", pszFilename);
>>>           exit(1);
>>>       }
>>>
>>>       hDriver = GDALGetDatasetDriver( hDataset );
>>>       printf( "Driver: %s/%s\n",
>>>           GDALGetDriverShortName( hDriver ),
>>>           GDALGetDriverLongName( hDriver ) );
>>>
>>>       printf( "Size is %dx%dx%d\n",
>>>           GDALGetRasterXSize( hDataset ),
>>>           GDALGetRasterYSize( hDataset ),
>>>           GDALGetRasterCount( hDataset ) );
>>>
>>>       if( GDALGetProjectionRef( hDataset ) != NULL )
>>>           printf( "Projection is `%s'\n", GDALGetProjectionRef( 
>>> hDataset )
>>> );
>>>
>>>       if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
>>>       {
>>>           printf( "Origin = (%.6f,%.6f)\n",
>>>           adfGeoTransform[0], adfGeoTransform[3] );
>>>
>>>           printf( "Pixel Size = (%.6f,%.6f)\n",
>>>               adfGeoTransform[1], adfGeoTransform[5] );
>>>       }
>>>
>>>       hBand = GDALGetRasterBand( hDataset, 1 );
>>>       GDALGetBlockSize( hBand,&nBlockXSize,&nBlockYSize );
>>>       printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",
>>>           nBlockXSize, nBlockYSize,
>>>           GDALGetDataTypeName(GDALGetRasterDataType(hBand)),
>>>           GDALGetColorInterpretationName(
>>>               GDALGetRasterColorInterpretation(hBand)) );
>>>
>>>       adfMinMax[0] = GDALGetRasterMinimum( hBand,&bGotMin );
>>>       adfMinMax[1] = GDALGetRasterMaximum( hBand,&bGotMax );
>>>       if( ! (bGotMin&&  bGotMax) )
>>>           GDALComputeRasterMinMax( hBand, TRUE, adfMinMax );
>>>
>>>       printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );
>>>
>>>       if( GDALGetOverviewCount(hBand)>  0 )
>>>           printf( "Band has %d overviews.\n", 
>>> GDALGetOverviewCount(hBand));
>>>
>>>       if( GDALGetRasterColorTable( hBand ) != NULL )
>>>           printf( "Band has a color table with %d entries.\n",
>>>                    GDALGetColorEntryCount(
>>>                        GDALGetRasterColorTable( hBand ) ) );
>>>
>>>       /*
>>>        * This section segv trying to do a memset in GDALRasterIO
>>>        * if I use the VRT driver, but works OK on the GTiff file.
>>>        */
>>>       /*
>>>       nXSize = GDALGetRasterBandXSize( hBand );
>>>
>>>       pafScanline = (float *) CPLMalloc(sizeof(float)*nXSize);
>>>       GDALRasterIO( hBand, GF_Read, 0, 0, nXSize, 1,
>>>                     pafScanline, nXSize, 1, GDT_Float32,
>>>                     0, 0 );
>>>       */
>>>
>>>       /* convert the lon, lat in a pixel location on the file and
>>>        * read that location into a float.
>>>        */
>>>       nXOff = (lon - adfGeoTransform[0]) / adfGeoTransform[1] + 0.5;
>>>       nYOff = (lat - adfGeoTransform[3]) / adfGeoTransform[5] + 0.5;
>>>       GDALRasterIO( hBand, GF_Read, nXOff, nYOff, 1, 1,
>>>                     &elevation, 1, 1, GDT_Float32,
>>>                     0, 0 );
>>>       printf("Elevation at %.6f, %.6f = %.1f\n", lon, lat, elevation);
>>>
>>>       GDALClose(hDataset);
>>>       return(0);
>>> }
>>>
>>> On 8/21/2010 6:07 PM, Stephen Woodbridge wrote:
>>>> So I have been able to download the NED data and I have US coverage.
>>>> The data is in GeoTiff and all in a single band Int16 format.
>>>> I have create a ned.vrt file.
>>>>
>>>> So I'm interested in writing a simple program in C that I can pass a
>>>> lat, lon and get the elevation. I assume I need to open the .vrt file
>>>> but looking at the GDAL API, I'm not sure how to map the lat, lon to a
>>>> pixel and then how to fetch the pixel value. If it matter, I will
>>>> probably extend this later to process a list of locations or maybe
>>>> extend it to read a shapefile and process the shape through it.
>>>>
>>>> Does anyone have a sample program that does something like this.
>>>>
>>>> -Steve
>>>>
>>>>
>>>>
>>>> woodbri@mappy:/u/srcdata$ gdalinfo -stats ned2.vrt
>>>> Driver: VRT/Virtual Raster
>>>> Files: ned2.vrt
>>>> NED2/-100_25_-96_28.tif
>>>> NED2/-102_28_-96_30.tif
>>>> NED2/-102_30_-96_32.tif
>>>> NED2/-102_32_-96_34.tif
>>>> NED2/-102_34_-96_36.tif
>>>> NED2/-102_36_-96_38.tif
>>>> NED2/-102_38_-96_40.tif
>>>> NED2/-102_40_-96_42.tif
>>>> NED2/-102_42_-96_44.tif
>>>> NED2/-102_44_-96_46.tif
>>>> NED2/-102_46_-96_48.tif
>>>> NED2/-102_48_-96_50.tif
>>>> NED2/-108_28_-102_30.tif
>>>> NED2/-108_30_-102_32.tif
>>>> NED2/-108_32_-102_34.tif
>>>> NED2/-108_34_-102_36.tif
>>>> NED2/-108_36_-102_38.tif
>>>> NED2/-108_38_-102_40.tif
>>>> NED2/-108_40_-102_42.tif
>>>> NED2/-108_42_-102_44.tif
>>>> NED2/-108_44_-102_46.tif
>>>> NED2/-108_46_-102_48.tif
>>>> NED2/-108_48_-102_50.tif
>>>> NED2/-114_30_-108_32.tif
>>>> NED2/-114_32_-108_34.tif
>>>> NED2/-114_34_-108_36.tif
>>>> NED2/-114_36_-108_38.tif
>>>> NED2/-114_38_-108_40.tif
>>>> NED2/-114_40_-108_42.tif
>>>> NED2/-114_42_-108_44.tif
>>>> NED2/-114_44_-108_46.tif
>>>> NED2/-114_46_-108_48.tif
>>>> NED2/-114_48_-108_50.tif
>>>> NED2/-120_32_-114_34.tif
>>>> NED2/-120_34_-114_36.tif
>>>> NED2/-120_36_-114_38.tif
>>>> NED2/-120_38_-114_40.tif
>>>> NED2/-120_40_-114_42.tif
>>>> NED2/-120_42_-114_44.tif
>>>> NED2/-120_44_-114_46.tif
>>>> NED2/-120_46_-114_48.tif
>>>> NED2/-120_48_-114_50.tif
>>>> NED2/-123_33_-120_37.tif
>>>> NED2/-125_37_-120_39.tif
>>>> NED2/-125_39_-120_42.tif
>>>> NED2/-126_42_-120_44.tif
>>>> NED2/-126_44_-120_46.tif
>>>> NED2/-126_46_-120_48.tif
>>>> NED2/-126_48_-120_50.tif
>>>> NED2/133_6.5_138.5_10.tif
>>>> NED2/-139.0019842_51.9997277_-127.0018384_58.9998127.tif
>>>> NED2/-139.0024054_58.9997472_-127.0018101_66.0000944.tif
>>>> NED2/144_13_146_16.tif
>>>> NED2/151_5_163.5_8.tif
>>>> NED2/-157_18_-152_23.tif
>>>> NED2/-157.5_18.75_-154.5_21.5.tif
>>>> NED2/-160.5_21_-157.5_22.5.tif
>>>> NED2/-162_18_-157_23.tif
>>>> NED2/-171_-14.5_-169_-14.tif
>>>> NED2/-68_17_-64_18.tif
>>>> NED2/-72.0002778_40.9999994_-67.9999992_44.tif
>>>> NED2/-72.0002778_44_-66_46.tif
>>>> NED2/-72.0002778_46_-66_48.tif
>>>> NED2/-78.0002778_33.0000047_-75.0000047_36.tif
>>>> NED2/-78.0002778_36_-72_38.tif
>>>> NED2/-78.0002778_38_-72_40.tif
>>>> NED2/-78.0002778_40_-72_42.tif
>>>> NED2/-78.0002778_42_-72_44.tif
>>>> NED2/-78.0002778_44_-72_46.tif
>>>> NED2/-84.0002778_24_-78_26.tif
>>>> NED2/-84.0002778_26_-78_28.tif
>>>> NED2/-84.0002778_28_-78_30.tif
>>>> NED2/-84.0002778_30_-78_32.tif
>>>> NED2/-84.0002778_32_-78_34.tif
>>>> NED2/-84.0002778_34_-78_36.tif
>>>> NED2/-84.0002778_36_-78_38.tif
>>>> NED2/-84.0002778_38_-78_40.tif
>>>> NED2/-84.0002778_40_-78_42.tif
>>>> NED2/-84.0002778_42_-78_44.tif
>>>> NED2/-85.0002778_44.0000047_-82.0000047_47.tif
>>>> NED2/-90_28_-84_30.tif
>>>> NED2/-90_30_-84_32.tif
>>>> NED2/-90_32_-84_34.tif
>>>> NED2/-90_34_-84_36.tif
>>>> NED2/-90_36_-84_38.tif
>>>> NED2/-90_38_-84_40.tif
>>>> NED2/-90_40_-84_42.tif
>>>> NED2/-90_42_-84_44.tif
>>>> NED2/-90_44_-85_46.tif
>>>> NED2/-90_46_-85_49.tif
>>>> NED2/-96_28_-90_30.tif
>>>> NED2/-96_30_-90_32.tif
>>>> NED2/-96_32_-90_34.tif
>>>> NED2/-96_34_-90_36.tif
>>>> NED2/-96_36_-90_38.tif
>>>> NED2/-96_38_-90_40.tif
>>>> NED2/-96_40_-90_42.tif
>>>> NED2/-96_42_-90_44.tif
>>>> NED2/-96_44_-90_46.tif
>>>> NED2/-96_46_-90_48.tif
>>>> NED2/-96_48_-90_50.tif
>>>> Size is 1180816, 284173
>>>> Coordinate System is:
>>>> GEOGCS["WGS 84",
>>>> DATUM["WGS_1984",
>>>> SPHEROID["WGS 84",6378137,298.257223563,
>>>> AUTHORITY["EPSG","7030"]],
>>>> AUTHORITY["EPSG","6326"]],
>>>> PRIMEM["Greenwich",0],
>>>> UNIT["degree",0.0174532925199433],
>>>> AUTHORITY["EPSG","4326"]]
>>>> Origin = (-171.000000000113090,66.000094447240443)
>>>> Pixel Size = (0.000283278659440,-0.000283278659440)
>>>> Corner Coordinates:
>>>> Upper Left (-171.0000000, 66.0000944) (171d 0'0.00"W, 66d 0'0.34"N)
>>>> Lower Left (-171.0000000, -14.5000520) (171d 0'0.00"W, 14d30'0.19"S)
>>>> Upper Right ( 163.4999735, 66.0000944) (163d29'59.90"E, 66d 0'0.34"N)
>>>> Lower Right ( 163.4999735, -14.5000520) (163d29'59.90"E, 14d30'0.19"S)
>>>> Center ( -3.7500132, 25.7500212) ( 3d45'0.05"W, 25d45'0.08"N)
>>>> Band 1 Block=128x128 Type=Int16, ColorInterp=Gray
>>>> Minimum=-83.000, Maximum=4665.000, Mean=25.333, StdDev=189.129
>>>> Metadata:
>>>> STATISTICS_MINIMUM=-83
>>>> STATISTICS_MAXIMUM=4665
>>>> STATISTICS_MEAN=25.332848474484
>>>> STATISTICS_STDDEV=189.12886049417
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From jukka.rahkonen at mmmtike.fi  Mon Aug 23 12:24:26 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Aug 23 12:24:44 2010
Subject: [gdal-dev] Re: Artifacts when presenting WMS based on a number of
	adjoining vrt files with overviews
References: <AANLkTinVn2AurMV97EL=45HKZzevt6mAvhGpAC_q9CB0@mail.gmail.com>
Message-ID: <loom.20100823T182041-335@post.gmane.org>

jonas nielsen <jonasln <at> gmail.com> writes:

>
> 
> Help would
> be sincerely appreciated:
> 
> ?
> 
> We are
> seeing artifacts when presenting WMS images based on a number of adjoining .vrt
> files with overviews.

Hi,

What are the dimensions in pixels of the original images with 10 cm pixel size?
Is it right that you are seeing artifacts even if you do not reproject the layer
for output?

-Jukka Rahkonen- 


From ahmettemiz88 at gmail.com  Mon Aug 23 14:40:42 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Mon Aug 23 14:40:46 2010
Subject: [gdal-dev] OVERWRITING a Layer
Message-ID: <AANLkTikpgJyM+XnV=KFji8-JYcf5fTN0pC+8zRWdFHB3@mail.gmail.com>

hello

in gdal-java application. I encountered this problem.


ERROR 1: Layer postlayer12 already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.

how can I solve this problem ?

regards
From anders.moe at geocap.no  Mon Aug 23 14:41:55 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Mon Aug 23 14:41:57 2010
Subject: [gdal-dev] Assigning SpatialReference to OGRLayer
Message-ID: <AANLkTikb9CxPBV9rK1P3vYMzaxZc9mv7s8vOVohQAx0D@mail.gmail.com>

Hi everyone

I was wondering how I should assign a spatial reference to my OGRLayer.

virtual OGRSpatialReference<http://www.gdal.org/ogr/classOGRSpatialReference.html>
 * OGRLayer::GetSpatialRef<http://www.gdal.org/ogr/classOGRLayer.html#75c06b4993f8eb76b569f37365cd19ab>
 ()


There  seems to be no SetSpatialRef method. The current spatial reference is
null, since it was imported from a shapefile without spatial ref, so I can
not simply fill in the values of the existing sref object. I tried assigning
to each geometry, but this seems less than elegant, and the layer still
returns 0.

Thanks in advance,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100823/db20d23c/attachment.html
From even.rouault at mines-paris.org  Mon Aug 23 14:45:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 23 14:44:22 2010
Subject: [gdal-dev] OVERWRITING a Layer
In-Reply-To: <AANLkTikpgJyM+XnV=KFji8-JYcf5fTN0pC+8zRWdFHB3@mail.gmail.com>
References: <AANLkTikpgJyM+XnV=KFji8-JYcf5fTN0pC+8zRWdFHB3@mail.gmail.com>
Message-ID: <201008232045.00639.even.rouault@mines-paris.org>

Look at the example at
http://gdal.org/java/org/gdal/ogr/DataSource.html#CreateLayer(java.lang.String,
%20org.gdal.osr.SpatialReference,%20int,%20java.util.Vector)

Replace DIM=2 by OVERWRITE=YES

Alternatively you could delete the layer before with DeleteLayer(), because 
not all drivers support OVERWRITE=YES.

Le lundi 23 ao?t 2010 20:40:42, ahmet temiz a ?crit :
> hello
> 
> in gdal-java application. I encountered this problem.
> 
> 
> ERROR 1: Layer postlayer12 already exists, CreateLayer failed.
> Use the layer creation option OVERWRITE=YES to replace it.
> 
> how can I solve this problem ?
> 
> regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Aug 23 15:00:38 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 23 15:00:00 2010
Subject: [gdal-dev] Assigning SpatialReference to OGRLayer
In-Reply-To: <AANLkTikb9CxPBV9rK1P3vYMzaxZc9mv7s8vOVohQAx0D@mail.gmail.com>
References: <AANLkTikb9CxPBV9rK1P3vYMzaxZc9mv7s8vOVohQAx0D@mail.gmail.com>
Message-ID: <201008232100.38861.even.rouault@mines-paris.org>

You cannot do that. The layer can set the spatial reference when building its 
definition, but the user cannot change that.

You could achieve this by wrapping your layer into a OGR VRT though. See 
http://gdal.org/ogr/drv_vrt.html

But for shapefiles, the easier will be to write a .prj file. You can use the 
OGRSpatialReference for that (see 
http://gdal.org/ogr/classOGRSpatialReference.html ) . Namely the  
morphToESRI() and exportToWkt() should be of great help to get the ESRI WKT 
string to write into the .prj

Le lundi 23 ao?t 2010 20:41:55, Anders Moe a ?crit :
> Hi everyone
> 
> I was wondering how I should assign a spatial reference to my OGRLayer.
> 
> virtual
> OGRSpatialReference<http://www.gdal.org/ogr/classOGRSpatialReference.html>
> *
> OGRLayer::GetSpatialRef<http://www.gdal.org/ogr/classOGRLayer.html#75c06b4
> 993f8eb76b569f37365cd19ab> ()
> 
> 
> There  seems to be no SetSpatialRef method. The current spatial reference
> is null, since it was imported from a shapefile without spatial ref, so I
> can not simply fill in the values of the existing sref object. I tried
> assigning to each geometry, but this seems less than elegant, and the
> layer still returns 0.
> 
> Thanks in advance,
> Anders
From even.rouault at mines-paris.org  Mon Aug 23 15:05:01 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 23 15:04:22 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <4C71EAD1.1080807@swoodbridge.com>
References: <4C704E15.7040309@swoodbridge.com>
	<201008221843.31470.even.rouault@mines-paris.org>
	<4C71EAD1.1080807@swoodbridge.com>
Message-ID: <201008232105.01935.even.rouault@mines-paris.org>

Le lundi 23 ao?t 2010 05:28:17, Stephen Woodbridge a ?crit :
> Even,
> 
> It seems the adding:
> 
> #include <cpl_conv.h>
> 
> resolves the segv issue.

Strange, I think there's no particular good reason why it worked with GTiff and 
not VRT. I assume you compile on a 64bit platform and that without header the 
return type was assumed to be of integer type, thus leading to pointer 
trucation.

> 
> I would recommend changing the example in:
> 
> http://www.gdal.org/gdal_tutorial.html
> 
> To include that in the section "Reading Raster Data" because the example
> C code uses CPLMalloc(). It would also be very helpful to add:
> 
> ...
> CPLFree(pafScanline);

Done
From woodbri at swoodbridge.com  Mon Aug 23 16:30:04 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon Aug 23 16:31:33 2010
Subject: [gdal-dev] Working with NED elevation data - part 2
In-Reply-To: <201008232105.01935.even.rouault@mines-paris.org>
References: <4C704E15.7040309@swoodbridge.com>
	<201008221843.31470.even.rouault@mines-paris.org>
	<4C71EAD1.1080807@swoodbridge.com>
	<201008232105.01935.even.rouault@mines-paris.org>
Message-ID: <4C72DA4C.3030507@swoodbridge.com>

On 8/23/2010 3:05 PM, Even Rouault wrote:
> Le lundi 23 ao?t 2010 05:28:17, Stephen Woodbridge a ?crit :
>> Even,
>>
>> It seems the adding:
>>
>> #include<cpl_conv.h>
>>
>> resolves the segv issue.
>
> Strange, I think there's no particular good reason why it worked with GTiff and
> not VRT. I assume you compile on a 64bit platform and that without header the
> return type was assumed to be of integer type, thus leading to pointer
> trucation.

Yes, good point, this was on a 64bit platform. and I did get a compiler 
warning about incompatible types which was not obvious as to why from 
reading the docs.

I suspect the the tiff worked because it was much smaller coverage than 
the vrt file so the line buffer would have to have been significant 
larger for the vrt file like causing the truncation, or something similar.

-Steve

>>
>> I would recommend changing the example in:
>>
>> http://www.gdal.org/gdal_tutorial.html
>>
>> To include that in the section "Reading Raster Data" because the example
>> C code uses CPLMalloc(). It would also be very helpful to add:
>>
>> ...
>> CPLFree(pafScanline);
>
> Done

From gpscruise at gmail.com  Mon Aug 23 16:56:54 2010
From: gpscruise at gmail.com (james pruett)
Date: Mon Aug 23 16:57:17 2010
Subject: [gdal-dev] ogr2ogr ESRI Shapefile only outputs 55.384 instead of
	55.38361
Message-ID: <AANLkTi=DgnqUVe6g_nUF87qrHapMhvvbbc4-QwqVN_5T@mail.gmail.com>

Q: Is there any kind of    -f %.6f     type option for ogr2ogr like there is
for cs2cs ?

I don't seem to get all the precision... My lat shows 55.384 where it should
be 55.38361936

Thanks for continued help!
-jim

--------------------------------------
Using Meridan 2 UK file:

C\:>   ogr2ogr -s_srs epsg:27700 -t_srs epsg:4326 -f "ESRI Shapefile" ogr
minor_rd_polyline.shp

This converts:
#
  381514.000,  610000.000
  381273.000,  609813.000
  380935.000,  609701.000
  380819.000,  609727.000
  380671.000,  609665.000
  380542.000,  609515.000
  380215.000,  609240.000
  380000.000,  608939.000
#

into

#
      -2.293,      55.384
      -2.297,      55.382
      -2.302,      55.381
      -2.304,      55.381
      -2.307,      55.381
      -2.309,      55.379
      -2.314,      55.377
      -2.317,      55.374
#
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100823/ec940d6a/attachment.html
From jonasln at gmail.com  Mon Aug 23 16:57:45 2010
From: jonasln at gmail.com (jonas nielsen)
Date: Mon Aug 23 16:57:48 2010
Subject: [gdal-dev] Re: Artifacts when presenting WMS based on a number of
	adjoining vrt files with overviews
In-Reply-To: <loom.20100823T182041-335@post.gmane.org>
References: <AANLkTinVn2AurMV97EL=45HKZzevt6mAvhGpAC_q9CB0@mail.gmail.com>
	<loom.20100823T182041-335@post.gmane.org>
Message-ID: <AANLkTinPOk2npYOrKHmbsAjFqy4ZfTJL-nWWQc+L7OR9@mail.gmail.com>

The original images that the overviews are built on are 10000 by 10000
pixels.
And yes, the artifacts appear without reprojection.

-Jonas

On Mon, Aug 23, 2010 at 6:24 PM, Jukka Rahkonen
<jukka.rahkonen@mmmtike.fi>wrote:

> jonas nielsen <jonasln <at> gmail.com> writes:
>
> >
> >
> > Help would
> > be sincerely appreciated:
> >
> >
> >
> > We are
> > seeing artifacts when presenting WMS images based on a number of
> adjoining .vrt
> > files with overviews.
>
> Hi,
>
> What are the dimensions in pixels of the original images with 10 cm pixel
> size?
> Is it right that you are seeing artifacts even if you do not reproject the
> layer
> for output?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100823/322f37a6/attachment-0001.html
From volker27 at gmx.at  Mon Aug 23 19:02:33 2010
From: volker27 at gmx.at (Volker =?iso-8859-1?q?Fr=F6hlich?=)
Date: Mon Aug 23 18:58:48 2010
Subject: [gdal-dev] KML's extendedData not visible
Message-ID: <201008240102.33770.volker27@gmx.at>

Dear GDAL/OGR developers!

I've got a question concerning KML and OGR. I noticed, that QGIS doesn't show 
data within KML's <extendedData>. QGIS reads KML via OGR. QGIS' J?rgen E. 
Fischer pointed out, ogrinfo doesn't show that data either.

The file in question was even written by ogr2ogr and the XML looks perfectly 
fine to me.

Why doesn't OGR reveal the flat information in <extendedData>? Would the other 
KML driver (libkml) help?

Volker Fr?hlich
From maplabs at light42.com  Mon Aug 23 21:21:56 2010
From: maplabs at light42.com (maplabs@light42.com)
Date: Mon Aug 23 21:31:49 2010
Subject: [gdal-dev] KML's extendedData not visible
Message-ID: <20100823212156.2urjq3smn400o8w8@webmail.light42.com>



On Tue, 24 Aug 2010 01:02:33  0200, Volker Fr?hlich  wrote:
>
  > I've got a question concerning KML and OGR. I noticed, that QGIS 
doesn't show
  > data within KML's <extendedData>. QGIS reads KML via OGR. QGIS' J?rgen E. 
  > Fischer pointed out, ogrinfo doesn't show that data either. 
?
Hi Volker-
?
??reading KML is limited, in both the KML driver and the newer LIBKML 
driver. 
There are several categories of reasons for this, here are a couple I 
can think of now:
?
??* the internal format of ogr, Simple Features
??* the variety of possible KML input
??* KML as a display format, and not a data interchange format
?
>
  > The file in question was even written by ogr2ogr and the XML looks 
perfectly
  > fine to me. 
?
KML output is legal XML
both drivers output valid KML
?
>
  > Why doesn't OGR reveal the flat information in <extendedData>? 
Would the other
  > KML driver (libkml) help?
  >
?
??no, the LIBKML driver does not do what are looking for, either, as 
far as I know
I would suggest as a work-around, to hold your data in some other format,
and just use KML as display, on demand. 
?
hth
??-Brian
?

  > Volker Fr?hlich
?
==
Brian Hamlin
planetwork.net
OSGeo California Chapter
(415) 717-4462 cell

From christopher.schmidt at nokia.com  Mon Aug 23 23:36:40 2010
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Mon Aug 23 23:37:09 2010
Subject: [gdal-dev] KML's extendedData not visible
In-Reply-To: <20100823212156.2urjq3smn400o8w8@webmail.light42.com>
References: <20100823212156.2urjq3smn400o8w8@webmail.light42.com>
Message-ID: <FF43855E-7167-43E2-8512-DCAD98EEEBAE@nokia.com>

>   no, the LIBKML driver does not do what are looking for, either, as 
> far as I know
> I would suggest as a work-around, to hold your data in some other format,
> and just use KML as display, on demand. 

The libkml driver supports ExtendedData attributes as attributes of the
simple features in OGR, according to the author of the code, the last time
I talked with him.

-- Chris
From dburken at comcast.net  Tue Aug 24 02:35:28 2010
From: dburken at comcast.net (David Burken)
Date: Tue Aug 24 02:36:40 2010
Subject: [gdal-dev] hdf5dataset.cpp patch
Message-ID: <4C736830.10004@comcast.net>

  Hi Everyone,

gdalinfo was core dumping in method HDF5AttrIterate on some hdf5 data we 
have.  The value of nAttrSize was greater than the hard coded array 
length of 8192.  I changed the array size to be dynamic and it seems to 
be working now on my small sample of two data sets.

svn diff below.  I can send whole file if someone would like it but did 
not want to do that to the list.

Take care,
Dave

hdf5dataset.cpp:

599c599
<     char            szData[8192];
---
 >     char            *szData = NULL;
609,610c609,610
<     char            szTemp[8192];
<     char            szValue[8192];
---
 >     char           *szTemp = (char*) CPLMalloc( 8192 );
 >     char           *szValue = NULL;
622,624d621
<
<     szValue[0] ='\0';
<
626a624,625
 >         szData = (char*) CPLMalloc(nAttrSize+1);
 >         szValue = (char*) CPLMalloc(nAttrSize+1);
628a628
 >         szValue[nAttrSize]='\0';
639a640,643
 >             szData = (char*) CPLMalloc( 8192 );
 >             szValue = (char*) CPLMalloc( 8192 );
 >             szData[0]='\0';
 >             szValue[0] ='\0';
709a714,716
 >     CPLFree( szTemp );
 >     CPLFree( szData );
 >     CPLFree( szValue );

From jukka.rahkonen at mmmtike.fi  Tue Aug 24 03:43:58 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Aug 24 03:44:13 2010
Subject: [gdal-dev] Re: Artifacts when presenting WMS based on a number
	of	adjoining vrt files with overviews
References: <AANLkTinVn2AurMV97EL=45HKZzevt6mAvhGpAC_q9CB0@mail.gmail.com>
	<loom.20100823T182041-335@post.gmane.org>
	<AANLkTinPOk2npYOrKHmbsAjFqy4ZfTJL-nWWQc+L7OR9@mail.gmail.com>
Message-ID: <loom.20100824T085857-510@post.gmane.org>

jonas nielsen <jonasln <at> gmail.com> writes:

> 
> 
> The original images that the overviews are built on are 10000 by 
10000 pixels.
> 
> And yes, the artifacts appear without reprojection.
> 
> -Jonas

Hi,

I do also see such artifacts with Mapserver tileindex layers when 
zoomed far away so that the overviews are used. I have a slight 
feeling that it may come from subsampling when the resolution and 
image extents do not math exactly.  With your images I would guess 
that the first overview levels up to 16 might work fine because 
the image extents can be filled exactly with the new subsampled pixels. 

samling theoretical
level   image width
1       10000
2        5000
4        2500
8        1250
16        625
32        312.5
64        156.25
128       78.125
256       39.0625
512       19.53125
1024       9.765625
2048       4.8828125

I cannot imagine what GDAL is really doing at, let's say, redused 
level 128. Your whole image width could be covered with 78.125 pixels,
each 12.8 meters wide. Obviously this is not possible. Either the pixel
size must be a bit smaller or this overview level contains 79 pixels 
and thus it is a bit wider than the original image. If the latter is 
the case, what colour does the border pixels, which have the majority 
of their area off-site, get?

I may be totally on the wrong track but this is what I have been 
wondering. Same looking but warp process related artifacts can be 
seen in figure 3 in article 
http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf.

Figures 4 and 5 show how we managed to remove them.


-Jukka Rahkonen-


From ahmettemiz88 at gmail.com  Tue Aug 24 10:16:48 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Tue Aug 24 10:16:50 2010
Subject: [gdal-dev] nonspatial column with ogr.
Message-ID: <AANLkTinhy0Hgj_T7sADspkizObGvfvfJHhGLuGJ-sRiu@mail.gmail.com>

hello

I can create spatial column. But I don't know how I can create
nonspatial column with ogr in gdal-java.

something like column "name" and its value "xxxx"

how can I do that ?

regards
From jonasln at gmail.com  Tue Aug 24 10:47:40 2010
From: jonasln at gmail.com (jonas nielsen)
Date: Tue Aug 24 10:47:43 2010
Subject: [gdal-dev] Re: Artifacts when presenting WMS based on a number of
	adjoining vrt files with overviews
In-Reply-To: <loom.20100824T085857-510@post.gmane.org>
References: <AANLkTinVn2AurMV97EL=45HKZzevt6mAvhGpAC_q9CB0@mail.gmail.com>
	<loom.20100823T182041-335@post.gmane.org>
	<AANLkTinPOk2npYOrKHmbsAjFqy4ZfTJL-nWWQc+L7OR9@mail.gmail.com>
	<loom.20100824T085857-510@post.gmane.org>
Message-ID: <AANLkTi=c6Ho=Gedj55KNYiGReBkYi2Lw+dEgQ5=ZRJhd@mail.gmail.com>

That is a very interesting question you are raising. Thank you :-)

Two solutions come to mind:

1: Change the parameters of gdaladdo to something that will produce an
integer division with the input data size. In this case, with 100k by 100k
px, that means it will no longer be multiples of two.
A test of this is in the making...

2: Keep using multiples of two for gdaladdo, but only as far as they produce
an integer division. When this point is reached a new "solid" image can then
be created with MapServers shp2img function. More overviews can then be
built on this as required. This potentially allows us to gather more and
more 10 km by 10 km blocks in these shp2img outputs, which should be good
for display performance, as fewer files needs to be accessed for display of
the entire dataset. It also means that both GDAL and MapServer are working
on the images several times over, and the impact of this on image quality is
unknown. Also, great care must be taken when making the mapfile for final
display in MapServer.

In your opinion, what would be the best work-around to solve this issue?

No matter what we do, we will probably have to use shp2img to build a
complete view of the entire dataset at the top level, to reduce file-access
and achieve good performance.

-Jonas


On Tue, Aug 24, 2010 at 9:43 AM, Jukka Rahkonen
<jukka.rahkonen@mmmtike.fi>wrote:

> jonas nielsen <jonasln <at> gmail.com> writes:
>
> >
> >
> > The original images that the overviews are built on are 10000 by
> 10000 pixels.
> >
> > And yes, the artifacts appear without reprojection.
> >
> > -Jonas
>
> Hi,
>
> I do also see such artifacts with Mapserver tileindex layers when
> zoomed far away so that the overviews are used. I have a slight
> feeling that it may come from subsampling when the resolution and
> image extents do not math exactly.  With your images I would guess
> that the first overview levels up to 16 might work fine because
> the image extents can be filled exactly with the new subsampled pixels.
>
> samling theoretical
> level   image width
> 1       10000
> 2        5000
> 4        2500
> 8        1250
> 16        625
> 32        312.5
> 64        156.25
> 128       78.125
> 256       39.0625
> 512       19.53125
> 1024       9.765625
> 2048       4.8828125
>
> I cannot imagine what GDAL is really doing at, let's say, redused
> level 128. Your whole image width could be covered with 78.125 pixels,
> each 12.8 meters wide. Obviously this is not possible. Either the pixel
> size must be a bit smaller or this overview level contains 79 pixels
> and thus it is a bit wider than the original image. If the latter is
> the case, what colour does the border pixels, which have the majority
> of their area off-site, get?
>
> I may be totally on the wrong track but this is what I have been
> wondering. Same looking but warp process related artifacts can be
> seen in figure 3 in article
> http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf.
>
> Figures 4 and 5 show how we managed to remove them.
>
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100824/2b438ace/attachment.html
From warmerdam at pobox.com  Tue Aug 24 11:08:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 24 11:08:37 2010
Subject: [gdal-dev] nonspatial column with ogr.
In-Reply-To: <AANLkTinhy0Hgj_T7sADspkizObGvfvfJHhGLuGJ-sRiu@mail.gmail.com>
References: <AANLkTinhy0Hgj_T7sADspkizObGvfvfJHhGLuGJ-sRiu@mail.gmail.com>
Message-ID: <4C73E06F.4060707@pobox.com>

ahmet temiz wrote:
> hello
> 
> I can create spatial column. But I don't know how I can create
> nonspatial column with ogr in gdal-java.
> 
> something like column "name" and its value "xxxx"
> 

Ahmet,

I believe you are looking for the CreateField() method on the OGR Layer
class.  Note that it does not provide a mechanism to populate the new
column with a particular value for pre-existing features.

 
http://www.gdal.org/java/org/gdal/ogr/Layer.html#CreateField%28org.gdal.ogr.FieldDefn,%20int%29


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tkeitt at gmail.com  Tue Aug 24 13:14:32 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Tue Aug 24 13:14:35 2010
Subject: [gdal-dev] Clarification of OGR write tutorial code
Message-ID: <AANLkTi=PTEocpAd-BETAsuejMd0=b2dTyqmjBQDCY6YL@mail.gmail.com>

I made my first foray into OGR today and want to be sure I understand
the following code from the tutorial.

In particular, I am wondering why the feature is created and destroyed
in each loop. Could one instead create a single feature object and
simply update its x and y values repeatedly? Clearly the feature
created in the layer does not reference poFeature, because it is
destroyed, right?  Can the OGRFeature::CreateFeature and
OGRFeature::DestroyFeature calls be moved outside the loop?

Thanks.

THK

  while( !feof(stdin)
           && fscanf( stdin, "%lf,%lf,%32s", &x, &y, szName ) == 3 )
    {
        OGRFeature *poFeature;

        poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
        poFeature->SetField( "Name", szName );

        OGRPoint pt;

        pt.setX( x );
        pt.setY( y );

        poFeature->SetGeometry( &pt );

        if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
        {
           printf( "Failed to create feature in shapefile.\n" );
           exit( 1 );
        }

         OGRFeature::DestroyFeature( poFeature );
    }


-- 
Timothy H. Keitt
http://www.keittlab.org/
From warmerdam at pobox.com  Tue Aug 24 13:33:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Aug 24 13:33:46 2010
Subject: [gdal-dev] Clarification of OGR write tutorial code
In-Reply-To: <AANLkTi=PTEocpAd-BETAsuejMd0=b2dTyqmjBQDCY6YL@mail.gmail.com>
References: <AANLkTi=PTEocpAd-BETAsuejMd0=b2dTyqmjBQDCY6YL@mail.gmail.com>
Message-ID: <4C740274.3050701@pobox.com>

Tim Keitt wrote:
> I made my first foray into OGR today and want to be sure I understand
> the following code from the tutorial.
> 
> In particular, I am wondering why the feature is created and destroyed
> in each loop. Could one instead create a single feature object and
> simply update its x and y values repeatedly? Clearly the feature
> created in the layer does not reference poFeature, because it is
> destroyed, right?  Can the OGRFeature::CreateFeature and
> OGRFeature::DestroyFeature calls be moved outside the loop?

Tim,

Yes, the same feature could be reused and the create/destroy moved
outside the call.  That is the call to OGRFeature::CreateFeature().
The call to OGRLayer::CreateFeature() must of course be within the loop.

Best regards,

>   while( !feof(stdin)
>            && fscanf( stdin, "%lf,%lf,%32s", &x, &y, szName ) == 3 )
>     {
>         OGRFeature *poFeature;
> 
>         poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
>         poFeature->SetField( "Name", szName );
> 
>         OGRPoint pt;
> 
>         pt.setX( x );
>         pt.setY( y );
> 
>         poFeature->SetGeometry( &pt );
> 
>         if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
>         {
>            printf( "Failed to create feature in shapefile.\n" );
>            exit( 1 );
>         }
> 
>          OGRFeature::DestroyFeature( poFeature );
>     }
> 
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Aug 24 14:00:08 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 24 13:59:12 2010
Subject: [gdal-dev] Clarification of OGR write tutorial code
In-Reply-To: <AANLkTi=PTEocpAd-BETAsuejMd0=b2dTyqmjBQDCY6YL@mail.gmail.com>
References: <AANLkTi=PTEocpAd-BETAsuejMd0=b2dTyqmjBQDCY6YL@mail.gmail.com>
Message-ID: <201008242000.08245.even.rouault@mines-paris.org>

Tim,

yes you could likely move the OGRFeature::CreateFeature / 
OGRFeature::DestroyFeature out of the loop. If you do this, depending on the 
underlying OGR driver, you'll probably need doing a poFeature-
>SetFID(OGRNullFID) before poLayer->CreateFeature(), since the previous call 
to CreateFeature() would have set the FID to a non null-value and 
CreateFeature() might not like seeing a non-null FID the next time.

Le mardi 24 ao?t 2010 19:14:32, Tim Keitt a ?crit :
> I made my first foray into OGR today and want to be sure I understand
> the following code from the tutorial.
> 
> In particular, I am wondering why the feature is created and destroyed
> in each loop. Could one instead create a single feature object and
> simply update its x and y values repeatedly? Clearly the feature
> created in the layer does not reference poFeature, because it is
> destroyed, right?  Can the OGRFeature::CreateFeature and
> OGRFeature::DestroyFeature calls be moved outside the loop?
> 
> Thanks.
> 
> THK
> 
>   while( !feof(stdin)
>            && fscanf( stdin, "%lf,%lf,%32s", &x, &y, szName ) == 3 )
>     {
>         OGRFeature *poFeature;
> 
>         poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
>         poFeature->SetField( "Name", szName );
> 
>         OGRPoint pt;
> 
>         pt.setX( x );
>         pt.setY( y );
> 
>         poFeature->SetGeometry( &pt );
> 
>         if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
>         {
>            printf( "Failed to create feature in shapefile.\n" );
>            exit( 1 );
>         }
> 
>          OGRFeature::DestroyFeature( poFeature );
>     }
From Doug_Newcomb at fws.gov  Tue Aug 24 15:05:08 2010
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Tue Aug 24 15:12:42 2010
Subject: [gdal-dev] Integer error in creating bigtiff image
Message-ID: <OF6409C795.87D19E51-ON85257789.00667BE8-85257789.0068D6F3@fws.gov>

Hi folks,

I'm working with someone trying to merge and reproject 1108 4 band tiff 
images into 1 BIGTIFF image.  The command line options are as follows:

 gdalwarp -s_srs EPSG:26918 -t_srs EPSG:32119 -wo 'SOURCE_EXTRA=3' -wo
 'SKIP_NOSOURCE=YES' -wm 4000 --config 'GDAL_CACHEMAX=2000' -tps -rcs
 -srcnodata '0' -of GTIFF -co 'BIGTIFF=YES' -co 'TFW=YES' -tr 1 1
 /work/lisa/utm18/*.tif
 /work/lisa/reprojected_and_merged/naip_utm18_32119.tif


The process stops with the following error:

ERROR 1: Integer overflow : nDstXSize=29400, nDstYSize=19377


The command worked fine with 33 tiff images.  The individual is using gdal 
1.7.2 on 64 bit linux.

Googling a bit and grepping the source code makes me think the problem is 
in reading the a tiff file, perhaps a badly formatted input tiff image?

I suggested that the user try smaller chunks based on latitude rather than 
the whole utem zone for the state. 

Thoughts?

Doug


Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100824/c7121746/attachment.html
From even.rouault at mines-paris.org  Tue Aug 24 15:33:20 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Aug 24 15:32:23 2010
Subject: [gdal-dev] Integer error in creating bigtiff image
In-Reply-To: <OF6409C795.87D19E51-ON85257789.00667BE8-85257789.0068D6F3@fws.gov>
References: <OF6409C795.87D19E51-ON85257789.00667BE8-85257789.0068D6F3@fws.gov>
Message-ID: <201008242133.20310.even.rouault@mines-paris.org>

Doug,

No, the spirce image is probably just fine. This error basically means that an 
internal buffer of the warper code would need to be larger than 2 GB ( 29400 * 
19377 * 4 = 2.2 GB), which cannot be satisified on 32 bit systems. The root 
cause is likely to be the huge value of the -wm parameter (4000 = 4 GB). Try 
reducing under 2000 and it should work better. A too big value for the -wm 
parameter can even sometimes affect speed negatively, and that'd probably the 
case for your example where you are merging a lot of individual files into a 
big one.

Le mardi 24 ao?t 2010 21:05:08, Doug_Newcomb@fws.gov a ?crit :
> Hi folks,
> 
> I'm working with someone trying to merge and reproject 1108 4 band tiff
> images into 1 BIGTIFF image.  The command line options are as follows:
> 
>  gdalwarp -s_srs EPSG:26918 -t_srs EPSG:32119 -wo 'SOURCE_EXTRA=3' -wo
>  'SKIP_NOSOURCE=YES' -wm 4000 --config 'GDAL_CACHEMAX=2000' -tps -rcs
>  -srcnodata '0' -of GTIFF -co 'BIGTIFF=YES' -co 'TFW=YES' -tr 1 1
>  /work/lisa/utm18/*.tif
>  /work/lisa/reprojected_and_merged/naip_utm18_32119.tif
> 
> 
> The process stops with the following error:
> 
> ERROR 1: Integer overflow : nDstXSize=29400, nDstYSize=19377
> 
> 
> The command worked fine with 33 tiff images.  The individual is using gdal
> 1.7.2 on 64 bit linux.
> 
> Googling a bit and grepping the source code makes me think the problem is
> in reading the a tiff file, perhaps a badly formatted input tiff image?
> 
> I suggested that the user try smaller chunks based on latitude rather than
> the whole utem zone for the state.
> 
> Thoughts?
> 
> Doug
> 
> 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
> ---------------------------------------------------------------------------
> ------------------------------ The opinions I express are my own and are
> not representative of the official policy of the U.S.Fish and Wildlife
> Service or Dept. of the Interior.   Life is too short for undocumented,
> proprietary data formats.
From Chris.Barker at noaa.gov  Tue Aug 24 16:45:41 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Aug 24 16:45:48 2010
Subject: [gdal-dev] Re: how to (install) use gdal libraries in python
In-Reply-To: <1282539458704-5451449.post@n2.nabble.com>
References: <1282112164632-5435197.post@n2.nabble.com>
	<AANLkTimeQwBZKFK_Xff+RR+tzohBGSXj9G6xu69bj0uU@mail.gmail.com>
	<1282130031589-5435889.post@n2.nabble.com> <4C6C0AD2.9090407@noaa.gov>
	<1282195523149-5439003.post@n2.nabble.com> <4C6D5818.7080404@noaa.gov>
	<1282539458704-5451449.post@n2.nabble.com>
Message-ID: <4C742F75.5080607@noaa.gov>

mail2vajram wrote:
> Thanks for ur help....
> 
> I followed the complete procedure,in the PDF provided by JAY.L but after
> installing all the appropriate bindings also i got an error..Here i attached
> screen shot of the error message....
> Please give the suggestion to rectify this error...

sorry, no time to be much help, but it looks like you've got the python 
code installed, but not the compiled extension code. Perhaps that will 
be enough of a hint see what went wrong in your procedure.

-Chris


> Thnaks.....
> http://osgeo-org.1803224.n2.nabble.com/file/n5451449/gdal_error.jpg
> gdal_error.jpg   


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ChDohmen at gmx.de  Wed Aug 25 01:35:51 2010
From: ChDohmen at gmx.de (Christoph Dohmen)
Date: Wed Aug 25 01:35:55 2010
Subject: [gdal-dev] projection unsupported?
Message-ID: <20100825053551.57280@gmx.net>

Dear list,

I got some data to deal with which use a projection called
"Kertau RSO Malaya Meters". From some earlier posts to proj.4
list I got the information that this is a kind of oblique
mercator projection. But I can't find anything around gdal
about how to deal with this projection.
Do I have to change the SRS before using gdal to deal with
this data? Or will there be any change inside gdal to support
this projection? Are there any hints outside I didn' get
so far?

Best regards,

Christoph
-- 
Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief!  
Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail
From alexander.bruy at gmail.com  Wed Aug 25 02:29:31 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Aug 25 02:29:35 2010
Subject: [gdal-dev] Using GDAL with Delphi
Message-ID: <AANLkTinYk6DYd2p9sdVsZd0gLc01SRHGUmjD7XheQtgd@mail.gmail.com>

Hi,

I want to use GDAL library with Delphi application. I search for any
existing Delphi unit
and find only few topics in list archieves (e.g.
http://www.osgeo.org/pipermail/gdal-dev/2007-April/012565.html)
and ticket in trac (http://trac.osgeo.org/gdal/ticket/1580) that
closed as wontfix.

So I start to write an unit around GDAL C API. Maybe someone else use
or want to use
GDAL in Delphi and can help with this. Also any hints and suggestions
are welcome.


Thanks,
-- 
Alexander Bruy
From peifer at gmx.eu  Wed Aug 25 02:57:08 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Aug 25 02:57:07 2010
Subject: [gdal-dev] Re: Integer error in creating bigtiff image
In-Reply-To: <201008242133.20310.even.rouault@mines-paris.org>
References: <OF6409C795.87D19E51-ON85257789.00667BE8-85257789.0068D6F3@fws.gov>
	<201008242133.20310.even.rouault@mines-paris.org>
Message-ID: <4C74BEC4.9000003@gmx.eu>

On 24/08/2010 21:33, Even Rouault wrote:

>
> Try reducing under 2000 and it should work better. A too big value for the -wm
> parameter can even sometimes affect speed negatively, and that'd probably the
> case for your example where you are merging a lot of individual files into a
> big one.
>

Just to add that this counter-intuitive behaviour is mentioned at:
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp

You could use: --debug on, and then observe how Src and Dst windows 
change depending on the chosen -wm value. (There is little point in 
having the Src window bigger than the input raster.)

Hermann
From peifer at gmx.eu  Wed Aug 25 03:09:42 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Aug 25 03:09:40 2010
Subject: [gdal-dev] Re: projection unsupported?
In-Reply-To: <20100825053551.57280@gmx.net>
References: <20100825053551.57280@gmx.net>
Message-ID: <4C74C1B6.4090000@gmx.eu>


It looks to me that "Kertau RSO Malaya Meters" is also known as 
EPSG:3168. So for the GDAL tools, you could use the EPSG code or this 
list of parameters and values:

http://spatialreference.org/ref/epsg/3168/proj4/

Hermann


On 25/08/2010 07:35, Christoph Dohmen wrote:
> Dear list,
>
> I got some data to deal with which use a projection called
> "Kertau RSO Malaya Meters". From some earlier posts to proj.4
> list I got the information that this is a kind of oblique
> mercator projection. But I can't find anything around gdal
> about how to deal with this projection.
> Do I have to change the SRS before using gdal to deal with
> this data? Or will there be any change inside gdal to support
> this projection? Are there any hints outside I didn' get
> so far?
>
> Best regards,
>
> Christoph

From ChDohmen at gmx.de  Wed Aug 25 03:43:20 2010
From: ChDohmen at gmx.de (Christoph Dohmen)
Date: Wed Aug 25 03:43:24 2010
Subject: [gdal-dev] Re: projection unsupported?
In-Reply-To: <4C74C1B6.4090000@gmx.eu>
References: <20100825053551.57280@gmx.net> <4C74C1B6.4090000@gmx.eu>
Message-ID: <20100825074320.226830@gmx.net>

Well, Hermann, not _really_ :-(

The WKT from one of the files is the following:
PROJCS['Kertau_RSO_Malaya_Meters',
              GEOGCS['GCS_Kertau',
                  DATUM['D_Kertau',
                      SPHEROID['Everest_1830_Modified',6377304.063,300.8017]],
                      PRIMEM['Greenwich',0.0],
                      UNIT['Degree',0.0174532925199433]],
                  PROJECTION['Rectified_Skew_Orthomorphic_Natural_Origin'],
                  PARAMETER['False_Easting',804671.299775],
                  PARAMETER['False_Northing',0.0],
                  PARAMETER['Scale_Factor',0.99984],
                  PARAMETER['Azimuth',-36.97420943711801],
                  PARAMETER['Longitude_Of_Center',102.25],
                  PARAMETER['Latitude_Of_Center',4.0],
                  PARAMETER['XY_Plane_Rotation',-36.86989764584402],
                  UNIT['Meter',1.0]]

The difference is the Datum (a=6377304.063 vs. a=6377295.664) and the
false easting (x_0=804671.299775 vs. x_0=804670.24).

The parameters from spatialreference.org define the projection to be
omerc which is not RSO :-(

Christoph

-------- Original-Nachricht --------
> Datum: Wed, 25 Aug 2010 09:09:42 +0200
> Von: Hermann Peifer <peifer@gmx.eu>
> An: Christoph Dohmen <ChDohmen@gmx.de>
> CC: gdal-dev@lists.osgeo.org
> Betreff: Re: projection unsupported?

> 
> It looks to me that "Kertau RSO Malaya Meters" is also known as 
> EPSG:3168. So for the GDAL tools, you could use the EPSG code or this 
> list of parameters and values:
> 
> http://spatialreference.org/ref/epsg/3168/proj4/
> 
> Hermann
> 
> 
> On 25/08/2010 07:35, Christoph Dohmen wrote:
> > Dear list,
> >
> > I got some data to deal with which use a projection called
> > "Kertau RSO Malaya Meters". From some earlier posts to proj.4
> > list I got the information that this is a kind of oblique
> > mercator projection. But I can't find anything around gdal
> > about how to deal with this projection.
> > Do I have to change the SRS before using gdal to deal with
> > this data? Or will there be any change inside gdal to support
> > this projection? Are there any hints outside I didn' get
> > so far?
> >
> > Best regards,
> >
> > Christoph
> 

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From mitchelljj98 at gmail.com  Wed Aug 25 09:42:52 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Aug 25 09:42:55 2010
Subject: [gdal-dev] I get the following error when running gdalwarp with the
 -multi
 switch: ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
Message-ID: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>

I get the following error when running gdalwarp with the -multi switch:

gdalwarp -multi -tr 1.2 1.2 -rc -s_srs EPSG:26917 -t_srs EPSG:26917
-co bigtiff=yes  -q "17RMP395060.tif"
"/tmp/gvAppTemp/gvApp2/m2.tiftemp"

ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()

The -multi switch causes the error but if I take out the -multi switch
then the command completes.

When I do the same command on an older linux server with the -multi
switch then the command does not error off, so it could be that the
newer server has a later version of gdal that does not like -multi.

The command will work without the -multi switch which I believe is
supposed to run the gdalwarp command in multithreaded mode which in
theory should be faster.

On a 64 bit version of gdal running on a 64 bit linux does performance
improve at all if the -multi switch is included and if so how can I
prevent this error from occurring when using the -multi switch.

Thanks,

John
From tkeitt at gmail.com  Wed Aug 25 09:44:23 2010
From: tkeitt at gmail.com (Tim Keitt)
Date: Wed Aug 25 09:44:24 2010
Subject: [gdal-dev] Fwd: Question on valid shapefiles
In-Reply-To: <AANLkTimgFVrY5Lpd8k+upxzewAX2USXp7Jt93-rVpdwv@mail.gmail.com>
References: <AANLkTimgFVrY5Lpd8k+upxzewAX2USXp7Jt93-rVpdwv@mail.gmail.com>
Message-ID: <AANLkTimntn=8b2ifr_PYY2PYSCx6di9hhETQrwsVOgaw@mail.gmail.com>

Maybe someone over here knows the answer?

THK


---------- Forwarded message ----------
From: Tim Keitt <tkeitt@gmail.com>
Date: Tue, Aug 24, 2010 at 7:41 PM
Subject: Question on valid shapefiles
To: qgis-developer <qgis-developer@lists.osgeo.org>


I am using OGR to write output from an application. The first few
lines from 'ogrinfo -al' is shown below. QGIS will not load it,
however I can display the line strings in R using rgdal. Is the
problem that the FID is type REAL? Can QGIS handle the "Line String"
type? I am not yet assigning an SRS either.

THK

INFO: Open of `test_mesh.shp'
? ? ?using driver `ESRI Shapefile' successful.

Layer name: test_mesh
Geometry: Line String
Feature Count: 32
Extent: (-2.606171, -0.077198) - (-1.017908, 1.051899)
Layer SRS WKT:
(unknown)
FID: Real (11.0)
OGRFeature(test_mesh):0
?FID (Real) = ? ? ? ? ? 0
?LINESTRING (-2.187155438493099 0.038231550177175,-1.944544004528339
0.53448727172605)



--
Timothy H. Keitt
http://www.keittlab.org/



-- 
Timothy H. Keitt
http://www.keittlab.org/
From mitchelljj98 at gmail.com  Wed Aug 25 09:54:35 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Aug 25 09:54:37 2010
Subject: [gdal-dev] Re: I get the following error when running gdalwarp with
 the -multi
 switch: ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
In-Reply-To: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>
References: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>
Message-ID: <AANLkTimviTZPJPF1TVpnbE3nkuVNjHpsZWE3zwLcBQiB@mail.gmail.com>

Also the older linux server is 32 bit linux with gdal 1.4.4.1 and the
new server that errors on -multi has 64 bit linux with gdal 1.4.4.2.

In checking some old emails someone said that they also could not use
-multi either but said
"If I raise the values for GDAL_CACHEMAX and -wm it doubled the speed".

John


On 8/25/10, John Mitchell <mitchelljj98@gmail.com> wrote:
> I get the following error when running gdalwarp with the -multi switch:
>
> gdalwarp -multi -tr 1.2 1.2 -rc -s_srs EPSG:26917 -t_srs EPSG:26917
> -co bigtiff=yes  -q "17RMP395060.tif"
> "/tmp/gvAppTemp/gvApp2/m2.tiftemp"
>
> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
>
> The -multi switch causes the error but if I take out the -multi switch
> then the command completes.
>
> When I do the same command on an older linux server with the -multi
> switch then the command does not error off, so it could be that the
> newer server has a later version of gdal that does not like -multi.
>
> The command will work without the -multi switch which I believe is
> supposed to run the gdalwarp command in multithreaded mode which in
> theory should be faster.
>
> On a 64 bit version of gdal running on a 64 bit linux does performance
> improve at all if the -multi switch is included and if so how can I
> prevent this error from occurring when using the -multi switch.
>
> Thanks,
>
> John
>


-- 
John J. Mitchell
From warmerdam at pobox.com  Wed Aug 25 09:56:08 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Aug 25 09:56:15 2010
Subject: [gdal-dev] I get the following error when running gdalwarp with
	the -multi switch: ERROR 1: CPLCreateThread() failed in
	ChunkAndWarpMulti()
In-Reply-To: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>
References: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>
Message-ID: <4C7520F8.6070503@pobox.com>

John Mitchell wrote:
> I get the following error when running gdalwarp with the -multi switch:
> 
> gdalwarp -multi -tr 1.2 1.2 -rc -s_srs EPSG:26917 -t_srs EPSG:26917
> -co bigtiff=yes  -q "17RMP395060.tif"
> "/tmp/gvAppTemp/gvApp2/m2.tiftemp"
> 
> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
> 
> The -multi switch causes the error but if I take out the -multi switch
> then the command completes.
> 
> When I do the same command on an older linux server with the -multi
> switch then the command does not error off, so it could be that the
> newer server has a later version of gdal that does not like -multi.
> 
> The command will work without the -multi switch which I believe is
> supposed to run the gdalwarp command in multithreaded mode which in
> theory should be faster.
> 
> On a 64 bit version of gdal running on a 64 bit linux does performance
> improve at all if the -multi switch is included and if so how can I
> prevent this error from occurring when using the -multi switch.

John,

It likely means the GDAL was built without threading support.  If you
build yourself, consider using the --with-threads configure option.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mitchelljj98 at gmail.com  Wed Aug 25 10:13:21 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Aug 25 10:13:23 2010
Subject: [gdal-dev] I get the following error when running gdalwarp with
	the -multi switch: ERROR 1: CPLCreateThread() failed in
	ChunkAndWarpMulti()
In-Reply-To: <4C7520F8.6070503@pobox.com>
References: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>
	<4C7520F8.6070503@pobox.com>
Message-ID: <AANLkTikcZOa1FBLu0r9+6T7V=WhcRj689_U5E6AG+Xr_@mail.gmail.com>

The person that installed gdal used a precompiled package, so he will
try to install from source.

Thanks,

John

On 8/25/10, Frank Warmerdam <warmerdam@pobox.com> wrote:
> John Mitchell wrote:
>> I get the following error when running gdalwarp with the -multi switch:
>>
>> gdalwarp -multi -tr 1.2 1.2 -rc -s_srs EPSG:26917 -t_srs EPSG:26917
>> -co bigtiff=yes  -q "17RMP395060.tif"
>> "/tmp/gvAppTemp/gvApp2/m2.tiftemp"
>>
>> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
>> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
>>
>> The -multi switch causes the error but if I take out the -multi switch
>> then the command completes.
>>
>> When I do the same command on an older linux server with the -multi
>> switch then the command does not error off, so it could be that the
>> newer server has a later version of gdal that does not like -multi.
>>
>> The command will work without the -multi switch which I believe is
>> supposed to run the gdalwarp command in multithreaded mode which in
>> theory should be faster.
>>
>> On a 64 bit version of gdal running on a 64 bit linux does performance
>> improve at all if the -multi switch is included and if so how can I
>> prevent this error from occurring when using the -multi switch.
>
> John,
>
> It likely means the GDAL was built without threading support.  If you
> build yourself, consider using the --with-threads configure option.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
John J. Mitchell
From frankhevans at yahoo.com  Wed Aug 25 10:24:33 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Wed Aug 25 10:24:35 2010
Subject: [gdal-dev] Large NITF generation
Message-ID: <1282746273355-5461499.post@n2.nabble.com>


I'm seeing an issue with generating large NITFs 1GB+. 
1. I've tried using "GDAL1.7dev" in Linux and  "GDAL 1.7.2" in Windows.
2. The images are all 8-bit 3band. 
3. I've tried going from
     TIF --> NITF
     Tiled-tif --> NITF
     NITF --> NITF

4. In terms of validating the input data, I've loaded them in ERDAS-IMAGINE
10, ArcMap 9.3.1. 
5. I then repeat the validation steps on the output nitf and get errors.
6. There is no error in the generation process. 
7. The metadata in the output nitf looks good. Only the pixels are "bad".

QUESTION:
1. Is there a known limitation of NITF output?
2. Would setting environment variables such as GDAL_CACHEMAX help?

http://osgeo-org.1803224.n2.nabble.com/file/n5461499/ERDAS_Imagine_BadNitf_generated_In_Linux_GDAL1.7Dev.png 
http://osgeo-org.1803224.n2.nabble.com/file/n5461499/GlobalMapper_BadNITF_GDAL1.7.2_WIN64.png 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Large-NITF-generation-tp5461499p5461499.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From volker27 at gmx.at  Wed Aug 25 18:11:46 2010
From: volker27 at gmx.at (Volker =?iso-8859-1?q?Fr=F6hlich?=)
Date: Wed Aug 25 18:07:47 2010
Subject: [gdal-dev] KML's extendedData not visible
In-Reply-To: <FF43855E-7167-43E2-8512-DCAD98EEEBAE@nokia.com>
References: <20100823212156.2urjq3smn400o8w8@webmail.light42.com>
	<FF43855E-7167-43E2-8512-DCAD98EEEBAE@nokia.com>
Message-ID: <201008260011.46128.volker27@gmx.at>

Am Dienstag 24 August 2010, 05:36:40 schrieb christopher.schmidt@nokia.com:
> >   no, the LIBKML driver does not do what are looking for, either, as
> > 
> > far as I know
> > I would suggest as a work-around, to hold your data in some other format,
> > and just use KML as display, on demand.
> 
> The libkml driver supports ExtendedData attributes as attributes of the
> simple features in OGR, according to the author of the code, the last time
> I talked with him.
> 
> -- Chris

We'll give libkml a try. I hope to know more by next week.

Coming to what Brian said: It seems kind of contradicting to me. Since the KML 
is proper XML, it better serves as an exchange format, than it does for 
displaying, since it doesn't show anything besides geometry itsself.

I can't imagine why it shouldn't be possible for flat data structure.

Volker
From gregcoats at mac.com  Wed Aug 25 18:28:06 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Aug 25 18:28:12 2010
Subject: [gdal-dev] Large NITF generation
In-Reply-To: <1282746273355-5461499.post@n2.nabble.com>
References: <1282746273355-5461499.post@n2.nabble.com>
Message-ID: <0EB1F8D7-D2A0-441A-A314-D00B58A7D9C7@mac.com>

According to http://www.gdal.org/formats_list.html the maximum GDAL NITF file size is 10 GB. Greg

On Aug 25, 2010, at 10:24 AM, turtlewax wrote:

> 1. Is there a known limitation of NITF output?
From christopher.schmidt at nokia.com  Wed Aug 25 20:33:13 2010
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Wed Aug 25 20:33:44 2010
Subject: [gdal-dev] KML's extendedData not visible
In-Reply-To: <201008260011.46128.volker27@gmx.at>
References: <20100823212156.2urjq3smn400o8w8@webmail.light42.com>
	<FF43855E-7167-43E2-8512-DCAD98EEEBAE@nokia.com>
	<201008260011.46128.volker27@gmx.at>
Message-ID: <43D3D033-A69A-41B6-8C26-0A63214CC58F@nokia.com>


On Aug 25, 2010, at 6:11 PM, ext Volker Fr?hlich wrote:

> Am Dienstag 24 August 2010, 05:36:40 schrieb christopher.schmidt@nokia.com:
>>>  no, the LIBKML driver does not do what are looking for, either, as
>>> 
>>> far as I know
>>> I would suggest as a work-around, to hold your data in some other format,
>>> and just use KML as display, on demand.
>> 
>> The libkml driver supports ExtendedData attributes as attributes of the
>> simple features in OGR, according to the author of the code, the last time
>> I talked with him.
>> 
>> -- Chris
> 
> We'll give libkml a try. I hope to know more by next week.
> 
> Coming to what Brian said: It seems kind of contradicting to me. Since the KML 
> is proper XML, it better serves as an exchange format, than it does for 
> displaying, since it doesn't show anything besides geometry itsself.
> 
> I can't imagine why it shouldn't be possible for flat data structure.

http://crschmidt.net/blog/archives/303/kml-html-for-the-geoweb/

KML is a complex and multifaceted, with an almost infinite variation
and flexible layout. Transforming *all* KML to a simple flat data structure
is difficult and in some cases, impossible to do effectively.

KML is a presentation format, not a data transfer format, ExtendedData
notwithstanding. Though there is some movement to come to a common way to
do data transfer with it, that is not the primary purpose of KML, and other 
formats are definitely better suited.

-- Chris

> Volker
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gregcoats at mac.com  Wed Aug 25 20:42:24 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Aug 25 20:42:30 2010
Subject: [gdal-dev] Large NITF generation
In-Reply-To: <1282746273355-5461499.post@n2.nabble.com>
References: <1282746273355-5461499.post@n2.nabble.com>
Message-ID: <8E178B71-EA4A-406C-8AE7-B7A42E49CBD0@mac.com>

In a well documented test, I found that gdal_translate processing of a 675 MB image with --config GDAL_CACHEMAX 40 took 10,473 seconds, while processing with --config GDAL_CACHEMAX 45 was 63 times faster!, taking only 166 seconds. However, further increases in the GDAL_CACHEMAX did not effect processing times. A table and a graph of the results of my test are available at http://homepage.mac.com/gregcoats/jp2.html#GDAL_CACHEMAX
Greg

On Aug 25, 2010, at 10:24 AM, turtlewax wrote:

> 2. Would setting environment variables such as GDAL_CACHEMAX help?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100825/777f2c3f/attachment.html
From mail2vajram at gmail.com  Thu Aug 26 02:54:02 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Thu Aug 26 02:54:04 2010
Subject: [gdal-dev] how to get the pixel value and its latlong value in
	projected image
Message-ID: <1282805642416-5464485.post@n2.nabble.com>


I have a projected image and i want to read the pixel value along with its
lat/long values for each pixel .....

I know how to read the pixel value and i dont know to read its lat/long
value........

Thanks....
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-get-the-pixel-value-and-its-latlong-value-in-projected-image-tp5464485p5464485.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From giohappy at gmail.com  Thu Aug 26 08:41:09 2010
From: giohappy at gmail.com (G. Allegri)
Date: Thu Aug 26 08:41:11 2010
Subject: [gdal-dev] java imageio-ext gdal bindings: when a new build?
Message-ID: <AANLkTi=ctB=w-cV=sgYbhad_nZ_o3NnThvE7wWJi5oX=@mail.gmail.com>

I've written to the users ml for imageio-ext, but I see that it's
activity is null. I try here, even if can be OT.
I would like to know if there's a roadmap for the release of newer
versions of imageio-ext/gdal. The actual version, released also with
other third party sw (like uDig) still uses gdal 1.4.x.
I've read here and there that packaging gdal bindings for imageio-ext
is quite cumbersome. Some patches are needed to the Swig interface,
etc.. Some of them seem to be already included in gdal 1.7. I don't
know Swig, so I don't dare to try to build the whole packaging by my
own....
Does anyone know if there is work in progress on this topic? (guys
from Geosolutions maybe?).

thanks a lot,
giovanni
From RJoslyn at etg-sadi.com  Thu Aug 26 09:36:52 2010
From: RJoslyn at etg-sadi.com (Ray D. Joslyn)
Date: Thu Aug 26 09:38:06 2010
Subject: [gdal-dev] ecw speckling in no-data area
Message-ID: <601F122BD61A7944B66B4E6F84602AE80D39A63166@mailman>

Is there any way to remove the speckling in ecw files in no-data areas and re-output to ecw?  There doesn't seem to be a compression scheme for ecw that doesn't produce these artifacts.  I have tried the nearblack utility, but it doesn't seem to be able to create or re-write to an ecw file.

Ray Joslyn, GISP

ETG, a division of Westwood
7304 W. 130th Street, Suite 200
Overland Park, KS 66213

MAIN                      913-851-4492
Direct                      913-890-4804
EMAIL                    rjoslyn@etg-sadi.com<mailto:rjoslyn@etg-sadi.com>
FAX                          913-851-8357
WEB                        www.westwoodps.com/etg<http://www.westwoodps.com/etg>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100826/6ce95362/attachment.html
From warmerdam at pobox.com  Thu Aug 26 09:51:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Aug 26 09:51:49 2010
Subject: [gdal-dev] ecw speckling in no-data area
In-Reply-To: <601F122BD61A7944B66B4E6F84602AE80D39A63166@mailman>
References: <601F122BD61A7944B66B4E6F84602AE80D39A63166@mailman>
Message-ID: <4C76716E.4000302@pobox.com>

Ray D. Joslyn wrote:
> Is there any way to remove the speckling in ecw files in no-data areas 
> and re-output to ecw?  There doesn?t seem to be a compression scheme for 
> ecw that doesn?t produce these artifacts.  I have tried the nearblack 
> utility, but it doesn?t seem to be able to create or re-write to an ecw 
> file.

Ray,

To the best of my knowledge ecw compression is lossy, and not suitable to
exactly represent nodata areas with a specific value.  If you want to recover
nodata areas you need to use nearblack, writing to a new uncompressed (or at
least lossly compressed) output file in a format other than mrsid, or ecw.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From frankhevans at yahoo.com  Thu Aug 26 11:20:19 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Thu Aug 26 11:20:21 2010
Subject: [gdal-dev] Re: Large NITF generation
In-Reply-To: <1282746273355-5461499.post@n2.nabble.com>
References: <1282746273355-5461499.post@n2.nabble.com>
Message-ID: <1282836019736-5466006.post@n2.nabble.com>


Thanks to Chaitanya kumar for the help.
Specifying a BLOCKXSIZE and BLOCKYSIZE on the command line solved this.

gdal_translate -of NITF -co BLOCKXSIZE=1024 -co BLOCKYSIZE=1024 foo.tif
foo.ntf

Furthermore, adding these options to my mapserver map file worked as well.

  OUTPUTFORMAT
    NAME NITF
    DRIVER "GDAL/NITF"
    IMAGEMODE RGB
    MIMETYPE "image/nitf"
    EXTENSION "ntf"
    FORMATOPTION "BLOCKXSIZE=1024"
    FORMATOPTION "BLOCKYSIZE=1024"
  END
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Large-NITF-generation-tp5461499p5466006.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Aug 26 13:51:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Aug 26 13:49:42 2010
Subject: [gdal-dev] java imageio-ext gdal bindings: when a new build?
In-Reply-To: <AANLkTi=ctB=w-cV=sgYbhad_nZ_o3NnThvE7wWJi5oX=@mail.gmail.com>
References: <AANLkTi=ctB=w-cV=sgYbhad_nZ_o3NnThvE7wWJi5oX=@mail.gmail.com>
Message-ID: <201008261951.10997.even.rouault@mines-paris.org>

Giovanni,

I'm not aware of unresolved issues (= I don't see tickets in GDAL Trac) with 
the GDAL java bindings that would prevent the imageio-ext/gdal project to 
upgrade to GDAL 1.7.
 
A few months ago, Daniele Romagnoli contributed a patch that has been 
incorporated, but since then I didn't hear any news.

Anyway, I'll be happy to help as much as I can if concrete things are 
reported...

Best regards,

Even

Le jeudi 26 ao?t 2010 14:41:09, G. Allegri a ?crit :
> I've written to the users ml for imageio-ext, but I see that it's
> activity is null. I try here, even if can be OT.
> I would like to know if there's a roadmap for the release of newer
> versions of imageio-ext/gdal. The actual version, released also with
> other third party sw (like uDig) still uses gdal 1.4.x.
> I've read here and there that packaging gdal bindings for imageio-ext
> is quite cumbersome. Some patches are needed to the Swig interface,
> etc.. Some of them seem to be already included in gdal 1.7. I don't
> know Swig, so I don't dare to try to build the whole packaging by my
> own....
> Does anyone know if there is work in progress on this topic? (guys
> from Geosolutions maybe?).
> 
> thanks a lot,
> giovanni
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From simone.giannecchini at geo-solutions.it  Thu Aug 26 13:57:03 2010
From: simone.giannecchini at geo-solutions.it (Simone Giannecchini)
Date: Thu Aug 26 13:57:26 2010
Subject: [gdal-dev] java imageio-ext gdal bindings: when a new build?
In-Reply-To: <201008261951.10997.even.rouault@mines-paris.org>
References: <AANLkTi=ctB=w-cV=sgYbhad_nZ_o3NnThvE7wWJi5oX=@mail.gmail.com>
	<201008261951.10997.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=Tci+pBnjEE+_0nEDkfK4CW2fKcXmiiAdt79Be@mail.gmail.com>

Giovanni,
I have not seen any emails from you on the imageio-ext dev or users lists:

https://imageio-ext.dev.java.net/servlets/SummarizeList?listName=users
https://imageio-ext.dev.java.net/servlets/SummarizeList?listName=dev


Simone.
-------------------------------------------------------

Ing. Simone Giannecchini
GeoSolutions S.A.S.
Founder
Via Carignoni 51
55041? Camaiore (LU)
Italy

phone: +39 0584983027
fax:? ? ? +39 0584983027
mob:? ? +39 333 8128928


http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.linkedin.com/in/simonegiannecchini
http://twitter.com/simogeo

-------------------------------------------------------



On Thu, Aug 26, 2010 at 7:51 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Giovanni,
>
> I'm not aware of unresolved issues (= I don't see tickets in GDAL Trac) with
> the GDAL java bindings that would prevent the imageio-ext/gdal project to
> upgrade to GDAL 1.7.
>
> A few months ago, Daniele Romagnoli contributed a patch that has been
> incorporated, but since then I didn't hear any news.
>
> Anyway, I'll be happy to help as much as I can if concrete things are
> reported...
>
> Best regards,
>
> Even
>
> Le jeudi 26 ao?t 2010 14:41:09, G. Allegri a ?crit :
>> I've written to the users ml for imageio-ext, but I see that it's
>> activity is null. I try here, even if can be OT.
>> I would like to know if there's a roadmap for the release of newer
>> versions of imageio-ext/gdal. The actual version, released also with
>> other third party sw (like uDig) still uses gdal 1.4.x.
>> I've read here and there that packaging gdal bindings for imageio-ext
>> is quite cumbersome. Some patches are needed to the Swig interface,
>> etc.. Some of them seem to be already included in gdal 1.7. I don't
>> know Swig, so I don't dare to try to build the whole packaging by my
>> own....
>> Does anyone know if there is work in progress on this topic? (guys
>> from Geosolutions maybe?).
>>
>> thanks a lot,
>> giovanni
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mitchelljj98 at gmail.com  Thu Aug 26 15:12:09 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Thu Aug 26 15:12:11 2010
Subject: [gdal-dev] I get the following error when running gdalwarp with
	the -multi switch: ERROR 1: CPLCreateThread() failed in
	ChunkAndWarpMulti()
In-Reply-To: <4C7520F8.6070503@pobox.com>
References: <AANLkTinwqCW5vUSj3hK091yjm4_+X16_pH-mGZt0_Pj=@mail.gmail.com>
	<4C7520F8.6070503@pobox.com>
Message-ID: <AANLkTins_PCVNg-nEt6Dzz-VXiX2PuvwvygzXBWv6Wtu@mail.gmail.com>

I am having problems installing the latest gdal on an .rpm based linux
distribution. The pre-packaged gdal (1.4.4) for centos was not
compiled with warp multi-threading, so I have to build from scratch.
This was compiled with python using ?with-threads and ?with-python.

I have listed the below error when running gdal_merge.  Note:
gdalwarp, gdal_translate, ogr2ogr, gdalinfo I have no errors for
these.


[root@GVWkr01 bin]# gdal_merge.py

Traceback (most recent call last):

  File "/usr/local/bin/gdal_merge.py", line 31, in ?

    import gdal

ImportError: No module named gdal


John Mitchell

On 8/25/10, Frank Warmerdam <warmerdam@pobox.com> wrote:
> John Mitchell wrote:
>> I get the following error when running gdalwarp with the -multi switch:
>>
>> gdalwarp -multi -tr 1.2 1.2 -rc -s_srs EPSG:26917 -t_srs EPSG:26917
>> -co bigtiff=yes  -q "17RMP395060.tif"
>> "/tmp/gvAppTemp/gvApp2/m2.tiftemp"
>>
>> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
>> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
>>
>> The -multi switch causes the error but if I take out the -multi switch
>> then the command completes.
>>
>> When I do the same command on an older linux server with the -multi
>> switch then the command does not error off, so it could be that the
>> newer server has a later version of gdal that does not like -multi.
>>
>> The command will work without the -multi switch which I believe is
>> supposed to run the gdalwarp command in multithreaded mode which in
>> theory should be faster.
>>
>> On a 64 bit version of gdal running on a 64 bit linux does performance
>> improve at all if the -multi switch is included and if so how can I
>> prevent this error from occurring when using the -multi switch.
>
> John,
>
> It likely means the GDAL was built without threading support.  If you
> build yourself, consider using the --with-threads configure option.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
John J. Mitchell
From giohappy at gmail.com  Fri Aug 27 03:40:52 2010
From: giohappy at gmail.com (G. Allegri)
Date: Fri Aug 27 03:40:54 2010
Subject: [gdal-dev] java imageio-ext gdal bindings: when a new build?
In-Reply-To: <AANLkTi=Tci+pBnjEE+_0nEDkfK4CW2fKcXmiiAdt79Be@mail.gmail.com>
References: <AANLkTi=ctB=w-cV=sgYbhad_nZ_o3NnThvE7wWJi5oX=@mail.gmail.com>
	<201008261951.10997.even.rouault@mines-paris.org>
	<AANLkTi=Tci+pBnjEE+_0nEDkfK4CW2fKcXmiiAdt79Be@mail.gmail.com>
Message-ID: <AANLkTik_d55FWBNSYfJgRYFArSfNL3bN2CzzFAHhbGYj@mail.gmail.com>

Hi Simone,
sorry. I thought I was subscribed to users@imageio-ext.dev.java.net,
while I subscribed to users-digest@imageio-ext.dev.java.net.
I will send my post again.
Thanks Even for clarifying me the situation.

giovanni

2010/8/26 Simone Giannecchini <simone.giannecchini@geo-solutions.it>:
> Giovanni,
> I have not seen any emails from you on the imageio-ext dev or users lists:
>
> https://imageio-ext.dev.java.net/servlets/SummarizeList?listName=users
> https://imageio-ext.dev.java.net/servlets/SummarizeList?listName=dev
>
>
> Simone.
> -------------------------------------------------------
>
> Ing. Simone Giannecchini
> GeoSolutions S.A.S.
> Founder
> Via Carignoni 51
> 55041? Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:? ? ? +39 0584983027
> mob:? ? +39 333 8128928
>
>
> http://www.geo-solutions.it
> http://geo-solutions.blogspot.com/
> http://www.linkedin.com/in/simonegiannecchini
> http://twitter.com/simogeo
>
> -------------------------------------------------------
>
>
>
> On Thu, Aug 26, 2010 at 7:51 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> Giovanni,
>>
>> I'm not aware of unresolved issues (= I don't see tickets in GDAL Trac) with
>> the GDAL java bindings that would prevent the imageio-ext/gdal project to
>> upgrade to GDAL 1.7.
>>
>> A few months ago, Daniele Romagnoli contributed a patch that has been
>> incorporated, but since then I didn't hear any news.
>>
>> Anyway, I'll be happy to help as much as I can if concrete things are
>> reported...
>>
>> Best regards,
>>
>> Even
>>
>> Le jeudi 26 ao?t 2010 14:41:09, G. Allegri a ?crit :
>>> I've written to the users ml for imageio-ext, but I see that it's
>>> activity is null. I try here, even if can be OT.
>>> I would like to know if there's a roadmap for the release of newer
>>> versions of imageio-ext/gdal. The actual version, released also with
>>> other third party sw (like uDig) still uses gdal 1.4.x.
>>> I've read here and there that packaging gdal bindings for imageio-ext
>>> is quite cumbersome. Some patches are needed to the Swig interface,
>>> etc.. Some of them seem to be already included in gdal 1.7. I don't
>>> know Swig, so I don't dare to try to build the whole packaging by my
>>> own....
>>> Does anyone know if there is work in progress on this topic? (guys
>>> from Geosolutions maybe?).
>>>
>>> thanks a lot,
>>> giovanni
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From bruhn at fh-mainz.de  Fri Aug 27 08:31:24 2010
From: bruhn at fh-mainz.de (Kai-Christian Bruhn)
Date: Fri Aug 27 08:39:10 2010
Subject: [gdal-dev] Trimble 33_3ITRF to WKT and proj4
Message-ID: <4C77B01C.1080603@fh-mainz.de>

Dear list-members,

I'm not really sure, whether this is the right place, but I saw several 
discussions of converting from WKT to proj4 etc. on this list, so I hope 
you could provide valuable info's

Since months I'm struggling with results of a GNSS-survey in Turkey. The 
data made available to me are in a projection called 33_3ITRF by 
Trimble. The parameters
Datum: ITRF (Molodensky)
Geoid: EGM96 (Global)
Projection: Transverse - Mercator
Central Meridian: 33?00'00''E
False Easting: 5000000
Scale: 1

Now I want to start working on these data in a clean open OSGEO 
environment and I'm looking for valid wkt and proj4 descriptions of this 
coordinate system. A project-partner provided a .prj-file (which was 
successfully used for testing transformations in an ESRI-environment, I 
guess).
Using the http://prj2epsg.org tool, I get the following WKT:

PROJCS["UnknownSystem",GEOGCS["GCS_ITRF_1996",DATUM["D_ITRF_1996",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Gauss_Kruger"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",33.0],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]] 


which does not pass testepsg-validation (from the FWTools) complaining 
about the 'Transverse Mercator' string. 'tmerc' doesn't work also.

Am I on the complete wrong track? How would a valid WKT and proj4 string 
look like? Is there an EPSG-Code for the 33_3ITRF-System?

Cheers

Kai

From ahmettemiz88 at gmail.com  Sat Aug 28 12:52:24 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sat Aug 28 12:52:26 2010
Subject: [gdal-dev] nonspatial column with ogr.
In-Reply-To: <4C73E06F.4060707@pobox.com>
References: <AANLkTinhy0Hgj_T7sADspkizObGvfvfJHhGLuGJ-sRiu@mail.gmail.com>
	<4C73E06F.4060707@pobox.com>
Message-ID: <AANLkTi=d3Fn346-NjuyQa04+0JBs_EnK=zK0P15erCh8@mail.gmail.com>

thank you

I think I need one more clarification. Doesn't "field" have same
meaning with column ?
or what does "field" correspond to in sql jargon ?

I will appreciate if you make me clear


2010/8/24 Frank Warmerdam <warmerdam@pobox.com>:
> ahmet temiz wrote:
>>
>> hello
>>
>> I can create spatial column. But I don't know how I can create
>> nonspatial column with ogr in gdal-java.
>>
>> something like column "name" and its value "xxxx"
>>
>
> Ahmet,
>
> I believe you are looking for the CreateField() method on the OGR Layer
> class. ?Note that it does not provide a mechanism to populate the new
> column with a particular value for pre-existing features.
>
>
> http://www.gdal.org/java/org/gdal/ogr/Layer.html#CreateField%28org.gdal.ogr.FieldDefn,%20int%29
>
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From warmerdam at pobox.com  Sun Aug 29 09:34:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Aug 29 09:34:43 2010
Subject: [gdal-dev] nonspatial column with ogr.
In-Reply-To: <AANLkTi=d3Fn346-NjuyQa04+0JBs_EnK=zK0P15erCh8@mail.gmail.com>
References: <AANLkTinhy0Hgj_T7sADspkizObGvfvfJHhGLuGJ-sRiu@mail.gmail.com>
	<4C73E06F.4060707@pobox.com>
	<AANLkTi=d3Fn346-NjuyQa04+0JBs_EnK=zK0P15erCh8@mail.gmail.com>
Message-ID: <4C7A61ED.408@pobox.com>

ahmet temiz wrote:
> thank you
> 
> I think I need one more clarification. Doesn't "field" have same
> meaning with column ?
> or what does "field" correspond to in sql jargon ?
> 
> I will appreciate if you make me clear

Ahmet,

For our purposes field and column are essentially the same.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bontepaarden at gmail.com  Sun Aug 29 12:34:48 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Sun Aug 29 12:35:11 2010
Subject: [gdal-dev] ERDAS ECW JPEG2000 SDK v4.1
Message-ID: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>

It seems ERDAS has finally released their new ECW and JPEG2000 SDK:
http://www.erdas.com/tabid/84/currentid/1142/default.aspx

I'm not a lawyer, not even a native English speaker so I don't fully
understand their EULA.

I don't know if it is allowed but will GDAL replace the old libecwj2 (v3.3)
with the new one (v4.1)?

And does anybody already have some experience with this new SDK. It should
be must faster and better ;)

And did anybody ever managed to compile the libecwj2 (v3.3) with VS2010? I
had similar issues with it last year when I needed to compile it with
VS2008.
With a lot of help from you guys I managed that. I would really appreciate
any help to compile it with VS2010 as well.

Thanks,

Paul

--
Paul Meems
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

Contact Me [image: Linkedin] <http://nl.linkedin.com/in/paulmeems>[image:
Twitter] <http://twitter.com/mapwindow_nl>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100829/15ef68fa/attachment.html
From woklist at kyngchaos.com  Sun Aug 29 14:10:24 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Aug 29 14:10:28 2010
Subject: [gdal-dev] ERDAS ECW JPEG2000 SDK v4.1
In-Reply-To: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>
References: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>
Message-ID: <22EB2B5C-2A72-4979-A1E0-325E02432418@kyngchaos.com>

On Aug 29, 2010, at 11:34 AM, Paul Meems wrote:

> It seems ERDAS has finally released their new ECW and JPEG2000 SDK:
> http://www.erdas.com/tabid/84/currentid/1142/default.aspx
> 
> I'm not a lawyer, not even a native English speaker so I don't fully understand their EULA.
... ugh, looks horrible, not very FOSS-friendly.

- read-only now
- windoze only! (sorry for the derogatory spelling, but *only* windows!?), I hope (or maybe I don't care now) they make Mac and Linux versions
- license acceptance of binary downloads (ie a GDAL plugin) must be done at the download step (I can't/don't want to do that on my website), instead of when the user installs it
- the creator of a binary using the ECW SDK must collect contact info for everyone that downloads the binary
- there's one of those export control restrictions in there also
- for "avoidance of doubt", no server apps using the SDK

Very disappointed, but not surprised.  (We're stuck on OSX with a partially-working SDK 3.3)

> 
> I don't know if it is allowed but will GDAL replace the old libecwj2 (v3.3) with the new one (v4.1)?
> 
> And does anybody already have some experience with this new SDK. It should be must faster and better ;)
> 
It certainly should be easier to use, since it is a binary library, like Lizardtech does for mrsid, so you don't have to worry about compiling the library.  The what's new pdf says it supports the old 3.x interface, so it should not be too much trouble to integrate into the current GDAL.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From even.rouault at mines-paris.org  Sun Aug 29 14:39:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Aug 29 14:39:42 2010
Subject: [gdal-dev] ERDAS ECW JPEG2000 SDK v4.1
In-Reply-To: <22EB2B5C-2A72-4979-A1E0-325E02432418@kyngchaos.com>
References: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>
	<22EB2B5C-2A72-4979-A1E0-325E02432418@kyngchaos.com>
Message-ID: <201008292039.39152.even.rouault@mines-paris.org>

> It certainly should be easier to use, since it is a binary library, like
> Lizardtech does for mrsid, so you don't have to worry about compiling the
> library.  The what's new pdf says it supports the old 3.x interface, so it
> should not be too much trouble to integrate into the current GDAL.

Or not... The doc says the C interface is compatible, but GDAL uses the C++ 
one. Looks like Frank has anticipated some work to be done before bringing 
support for the new SDK : see http://trac.osgeo.org/gdal/ticket/3676

> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting,
> and all for things that the beasts of the jungle would not deign to
> possess - money to purchase the effeminate pleasures of weaklings.  And
> yet withal bound down by silly customs that make them slaves to their
> unhappy lot while firm in the belief that they be the lords of creation
> enjoying the only real pleasures of existence....
> 
> - the wisdom of Tarzan
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Sun Aug 29 14:47:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Aug 29 14:47:44 2010
Subject: [gdal-dev] ERDAS ECW JPEG2000 SDK v4.1
In-Reply-To: <201008292039.39152.even.rouault@mines-paris.org>
References: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>
	<22EB2B5C-2A72-4979-A1E0-325E02432418@kyngchaos.com>
	<201008292039.39152.even.rouault@mines-paris.org>
Message-ID: <4C7AAB48.6090204@pobox.com>

Even Rouault wrote:
>> It certainly should be easier to use, since it is a binary library, like
>> Lizardtech does for mrsid, so you don't have to worry about compiling the
>> library.  The what's new pdf says it supports the old 3.x interface, so it
>> should not be too much trouble to integrate into the current GDAL.
> 
> Or not... The doc says the C interface is compatible, but GDAL uses the C++ 
> one. Looks like Frank has anticipated some work to be done before bringing 
> support for the new SDK : see http://trac.osgeo.org/gdal/ticket/3676

Folks,

Chaitanya started looking into it, but after contacting Erdas it turned out
somewhere there was already working on GDAL updates for the new SDK.  I am
not sure where that stands now, but I do have a client interested in
having it incorporated so it *should* happen fairly soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Sun Aug 29 14:51:16 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Aug 29 14:51:18 2010
Subject: [gdal-dev] ERDAS ECW JPEG2000 SDK v4.1
In-Reply-To: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>
References: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>
Message-ID: <AANLkTikc8GoF0VpWAUtGoPjwJpYdpWkyWv5Sj4SNE77y@mail.gmail.com>

Either the licensing terms or the selected way of distributing the SDK
prevents me to utilize this version at http://vbkto.dyndns.org/sdk/. I
prefer to stay with v3.3 which did eventually compile on both
platforms I wanted to support.

1. As the authors decided to provide the binaries only they should
take the responsibility to support at least the most reasonable
compilers (like VS7 or VS10 x86/x64 from my point of view) and other
operating systems like (Linux/OSX).
2. The current licensing terms don't allow to distribute the binaries
without recording the identity, location and contact information of
the end user, or the packages should prevent access to this portion
for those who don't accept the ECW SDK license.


Best regards,

Tamas



2010/8/29 Paul Meems <bontepaarden@gmail.com>
>
> It seems ERDAS has finally released their new ECW and JPEG2000 SDK:
> http://www.erdas.com/tabid/84/currentid/1142/default.aspx
>
> I'm not a lawyer, not even a native English speaker so I don't fully understand their EULA.
>
> I don't know if it is allowed but will GDAL replace the old libecwj2 (v3.3) with the new one (v4.1)?
>
> And does anybody already have some experience with this new SDK. It should be must faster and better ;)
>
> And did anybody ever managed to compile the libecwj2 (v3.3) with VS2010? I had similar issues with it last year when I needed to compile it with VS2008.
> With a lot of help from you guys I managed that. I would really appreciate any help to compile it with VS2010 as well.
>
> Thanks,
>
> Paul
>
> --
> Paul Meems
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
> Contact Me
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ssbird at internode.on.net  Sun Aug 29 22:31:29 2010
From: ssbird at internode.on.net (Steven Bird)
Date: Sun Aug 29 22:47:03 2010
Subject: [gdal-dev] Commercial use of dwgdirect 
Message-ID: <Js1mVYVcbN5p.Bqc7RLGS@securemail.internode.on.net>

A bit of a newbie question....

We use OGR with Mapserver and need it to be able to read dwgs.   I understand that directdwg code has been moved out of the core package to spike.  OGR pages say the use of this is 'available under fairly permissive terms'.  

My question is does anyone have an idea of the dollar costs and licence mechanisms to legally use directdwg with ogr.  I can't seem to find this info on the net.  

Regards  

Steven 

From robert.coup at koordinates.com  Sun Aug 29 23:25:59 2010
From: robert.coup at koordinates.com (Robert Coup)
Date: Sun Aug 29 23:26:02 2010
Subject: [gdal-dev] Commercial use of dwgdirect
In-Reply-To: <Js1mVYVcbN5p.Bqc7RLGS@securemail.internode.on.net>
References: <Js1mVYVcbN5p.Bqc7RLGS@securemail.internode.on.net>
Message-ID: <AANLkTik6K+s0g7EDJrp3tWj5W8NXtOY2ko4Bshbsy9V1@mail.gmail.com>

Hi Steven,

On Mon, Aug 30, 2010 at 2:31 PM, Steven Bird <ssbird@internode.on.net>wrote:

>
> My question is does anyone have an idea of the dollar costs and licence
> mechanisms to legally use directdwg with ogr.  I can't seem to find this
> info on the net.
>

The details of the Open Design Alliance memberships are available at
http://www.opendesign.com/join
It used to be free for the "associate" level, it's now $100/year.

<http://www.opendesign.com/join>
HTH,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100830/b1e6d8b3/attachment.html
From shane.harwood at gmail.com  Mon Aug 30 08:07:59 2010
From: shane.harwood at gmail.com (sharwood)
Date: Mon Aug 30 08:08:01 2010
Subject: [gdal-dev] Re: ecw speckling in no-data area
In-Reply-To: <4C76716E.4000302@pobox.com>
References: <601F122BD61A7944B66B4E6F84602AE80D39A63166@mailman>
	<4C76716E.4000302@pobox.com>
Message-ID: <1283170079753-5477914.post@n2.nabble.com>


The recently released 4.1 SDK update now supports an alpha channel for ECW. 
This is used to get around the speckle problem.


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-ecw-speckling-in-no-data-area-tp5465609p5477914.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From schut at sarvision.nl  Mon Aug 30 08:51:37 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Aug 30 08:54:05 2010
Subject: [gdal-dev] default to 'interleave=band'?
Message-ID: <4C7BA959.4010709@sarvision.nl>

  Hi,

is there a way to have gdal (utilities and library interfaces, notably 
python) default to band interleaving instead of pixel interleaving when 
writing geotiffs? I know this changed some time ago, but I'd rather have 
the old behaviour as many of my scripts are based on delivering max 
performance with band-interleaved files... Would it be possible to have 
a gdal environment variable to override this, for example? I tend to 
forget appending -co "INTERLEAVE=BAND" (or the option in my python 
scripts), and then wonder why everything runs so slowly...


Regards,

Vincent.
From jason.roberts at duke.edu  Mon Aug 30 09:26:55 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Aug 30 09:27:01 2010
Subject: [gdal-dev] ArcGIS 10 and GIO driver
In-Reply-To: <1D673F86DDA00841A1216F04D1CE70D6426032DD6D@EXCH2.nws.oregonstate.edu>
References: <1D673F86DDA00841A1216F04D1CE70D6426032DD6D@EXCH2.nws.oregonstate.edu>
Message-ID: <00e001cb4847$04dea890$0e9bf9b0$@roberts@duke.edu>

Matt,

Donno if you are still working on this problem (I've been on vacation) but
here is one possibility.

If the GIO driver uses ArcObjects, it might need to call this new
"LoadVersion" function before making any other ArcObjects calls. I had a
C++/ATL ArcObjects program that worked fine with 9.x but did not work with
10 until I did this:

    // Before making any ArcObjects calls, use IArcGISVersion::LoadVersion
to
    // load the ArcGIS runtime from the ArcGIS Desktop 10.0 product
    // installation. This is a new requirement introduced in ArcGIS 10.0.

    ArcGISVersionLib::IArcGISVersionPtr
ipVer(__uuidof(ArcGISVersionLib::VersionManager));
    VARIANT_BOOL succeeded;
    HRESULT hr = ipVer->LoadVersion(ArcGISVersionLib::esriArcGISDesktop,
L"10.0", &succeeded);
    if (FAILED(hr))
    {
        fprintf(stderr, "ERROR:
IArcGISVersion::LoadVersion(ArcGISVersionLib::esriArcGISDesktop, L\"10.0\",
...) failed with error 0x%08X. Check that ArcGIS Desktop 10.0 is properly
installed.\n", hr);
        return hr;
    }

You can find more info on this new requirement by googling "ArcGIS 10
LoadVersion" (without quotes).

Good luck,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gregory, Matthew
Sent: Wednesday, August 18, 2010 2:38 PM
To: 'gdal-dev@lists.osgeo.org'
Subject: [gdal-dev] ArcGIS 10 and GIO driver

Hi all,

I know this is likely not to get a lot of attention, given that the GIO
driver is currently unsupported and I'm guessing the issue is on the ArcGIS
side.  But I'll give it a try anyway ...

I build GDAL from SVN trunk and had included the (old) GIO driver for
ArcInfo output grid support.  At ArcInfo 9.x, this worked well (albeit
without projection support).  However, now that I've installed ArcInfo 10,
I'm getting license errors on simple utilities like gdal_translate, e.g.

  d:\matt>gdal_translate -of GIO dem.tif test_dem
  Input file size is 100, 100
  Warning 1: GIO driver only supports Float32, and Int32 datasets, not
  Int16 as requested for test_dem.  Treating as Int32.
  0Unauthorized license

The DLL aigridio.dll is still at the expected location
(C:\ArcGIS\arcexe10x\bin) which is in my PATH and I haven't had any license
issues otherwise (through Workstation, ArcMap, etc.).  Has anybody else run
into this (unlikely) scenario?

Thanks for any help,
matt

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From blake at hailmail.net  Mon Aug 30 12:56:26 2010
From: blake at hailmail.net (Dane Springmeyer)
Date: Mon Aug 30 13:03:32 2010
Subject: [gdal-dev] Reason not to enable gdal --with-threads by default?
Message-ID: <522A8253-BFF8-4061-85F4-CEB0907F9C8D@hailmail.net>

In the Mapnik library we open a GDALDataset per thread, for each feature query, but have been seeing crashes when rendering large geotiffs.

I've assumed that GDALDataset was fairly threadsafe in recent revisions as per (http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous#IstheGDALlibrarythread-safe), but recently learned that you must force --with-threads during configure to get this working.

Once I rebuilt gdal --with-threads all my troubles went away.

Are there caveats or other reasons not to pass --with-threads during the configure stage. E.g. should is not be made default some time in the future?

Thanks,

Dane

From matt.wilkie at gov.yk.ca  Mon Aug 30 13:05:18 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Mon Aug 30 13:05:26 2010
Subject: [gdal-dev] ERDAS ECW JPEG2000 SDK v4.1
In-Reply-To: <4C7AAB48.6090204@pobox.com>
References: <AANLkTimnHP_x8Tg_+JKN0DL6RgYT1kYeheh1t21gqYmC@mail.gmail.com>	<22EB2B5C-2A72-4979-A1E0-325E02432418@kyngchaos.com>	<201008292039.39152.even.rouault@mines-paris.org>
	<4C7AAB48.6090204@pobox.com>
Message-ID: <4C7BE4CE.1030706@gov.yk.ca>


> Chaitanya started looking into it, but after contacting Erdas it turned out
> somewhere there was already working on GDAL updates for the new SDK.  I am
> not sure where that stands now, but I do have a client interested in
> having it incorporated so it *should* happen fairly soon.
the website /now says/ 
<http://www.erdas.com/tabid/84/currentid/1142/default.aspx>:/

//*Timesaving GDAL Integration*
Save time by accessing the ERDAS ECW JPEG2000 SDK via the Geospatial 
Data Abstraction Library (GDAL) interface. By simply adding the SDK, 
developers already using GDAL can easily provide ECW and JPEG2000 read 
support in desktop applications (without having to learn an additional 
toolkit).


/

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


On 29/08/2010 11:47 AM, Frank Warmerdam wrote:
> Even Rouault wrote:
>>> It certainly should be easier to use, since it is a binary library, like
>>> Lizardtech does for mrsid, so you don't have to worry about compiling the
>>> library.  The what's new pdf says it supports the old 3.x interface, so it
>>> should not be too much trouble to integrate into the current GDAL.
>> Or not... The doc says the C interface is compatible, but GDAL uses the C++
>> one. Looks like Frank has anticipated some work to be done before bringing
>> support for the new SDK : see http://trac.osgeo.org/gdal/ticket/3676
> Folks,
>
>
> Best regards,
From rush at winkey.org  Mon Aug 30 13:23:39 2010
From: rush at winkey.org (brian)
Date: Mon Aug 30 13:23:43 2010
Subject: [gdal-dev] KML's extendedData not visible
In-Reply-To: <201008240102.33770.volker27@gmx.at>
References: <201008240102.33770.volker27@gmx.at>
Message-ID: <1283189019.12470.6.camel@winkey.org>

Volker,

Pardon the late reply I was out of town for a few days.

The libkml driver will read properly formatted schema and extendedData,
but if I recall the kml driver does not produce properly formated schema
so this may not be readable without editing.

Feel free to submit a ticket on the libkml driver if you have any
issues. and be sure to attach a samnple of data in question

Brian


On Tue, 2010-08-24 at 01:02 +0200, Volker Fr?hlich wrote:
> Dear GDAL/OGR developers!
> 
> I've got a question concerning KML and OGR. I noticed, that QGIS doesn't show 
> data within KML's <extendedData>. QGIS reads KML via OGR. QGIS' J?rgen E. 
> Fischer pointed out, ogrinfo doesn't show that data either.
> 
> The file in question was even written by ogr2ogr and the XML looks perfectly 
> fine to me.
> 
> Why doesn't OGR reveal the flat information in <extendedData>? Would the other 
> KML driver (libkml) help?
> 
> Volker Fr?hlich
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Aug 30 13:43:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 30 15:02:18 2010
Subject: [gdal-dev] Reason not to enable gdal --with-threads by default?
In-Reply-To: <522A8253-BFF8-4061-85F4-CEB0907F9C8D@hailmail.net>
References: <522A8253-BFF8-4061-85F4-CEB0907F9C8D@hailmail.net>
Message-ID: <201008301943.29334.even.rouault@mines-paris.org>

I would second configuring GDAL with thread support by default if pthread 
library is available, and turn it off only when --without-threads is 
explicitely passed.

This would be consistant with how proj.4 works for example.

Le lundi 30 ao?t 2010 18:56:26, Dane Springmeyer a ?crit :
> In the Mapnik library we open a GDALDataset per thread, for each feature
> query, but have been seeing crashes when rendering large geotiffs.
> 
> I've assumed that GDALDataset was fairly threadsafe in recent revisions as
> per
> (http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous#IstheGDALlibrarythread-s
> afe), but recently learned that you must force --with-threads during
> configure to get this working.
> 
> Once I rebuilt gdal --with-threads all my troubles went away.
> 
> Are there caveats or other reasons not to pass --with-threads during the
> configure stage. E.g. should is not be made default some time in the
> future?
> 
> Thanks,
> 
> Dane
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Mon Aug 30 15:29:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Aug 30 15:29:44 2010
Subject: [gdal-dev] Reason not to enable gdal --with-threads by default?
In-Reply-To: <522A8253-BFF8-4061-85F4-CEB0907F9C8D@hailmail.net>
References: <522A8253-BFF8-4061-85F4-CEB0907F9C8D@hailmail.net>
Message-ID: <4C7C06A3.3070908@pobox.com>

Dane Springmeyer wrote:
> In the Mapnik library we open a GDALDataset per thread, for each feature
> query, but have been seeing crashes when rendering large geotiffs.
> 
> I've assumed that GDALDataset was fairly threadsafe in recent revisions as
> per
> (http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous#IstheGDALlibrarythread-safe),
> but recently learned that you must force --with-threads during configure to
> get this working.
> 
> Once I rebuilt gdal --with-threads all my troubles went away.
> 
> Are there caveats or other reasons not to pass --with-threads during the
> configure stage. E.g. should is not be made default some time in the future?

Dane,

There will inevitably be some performance cost to turning on the locking.
I don't know how much that would be.  Also, some platforms (in the past)
did not have good pthread implementations easily available though that is
likely not so true now.

Likely threads ought to be enabled by default in GDAL unix/linux builds.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Aug 30 15:47:57 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Aug 30 15:48:22 2010
Subject: [gdal-dev] Reason not to enable gdal --with-threads by default?
In-Reply-To: <4C7C06A3.3070908@pobox.com>
References: <522A8253-BFF8-4061-85F4-CEB0907F9C8D@hailmail.net>
	<4C7C06A3.3070908@pobox.com>
Message-ID: <201008302147.57142.even.rouault@mines-paris.org>

> Likely threads ought to be enabled by default in GDAL unix/linux builds.

Now done in trunk in r20494

> 
> Best regards,
From terrasi.carmelo at gmail.com  Tue Aug 31 11:11:47 2010
From: terrasi.carmelo at gmail.com (Carmelo Terrasi)
Date: Tue Aug 31 11:11:49 2010
Subject: [gdal-dev] Extract elevation from (latitude, longitude)
Message-ID: <AANLkTim2r8wCXzsC9Tn2tf-fOx8Mi26cv5yQwb5WJr38@mail.gmail.com>

Hello everybody,
first of all my apologies cause I'm a newbie with this stuff...

I'm trying to build a function able to extract altitude from latitude and
longitude as parameters.
Something like that: *double MyElevation(double lat, double lon)*
*
*
I'm using Dted level 0 to get the elevation (I've already read this post:
http://www.osgeo.org/pipermail/gdal-dev/2010-February/023457.html )
But I got lost... :(

*GDALAllRegister();
*
*pointerToDataSet=(GDALDataset*) GDALOpen("n30.dt0", GA_ReadOnly);*
* *
*double data[6];*
*double longitude, latitude;*
*
*
*pointerToDataSet->GetGeoTransform(data);*
*
*
*longitude=???;*
*latitude=???;*
* *
*double x = (longitude - pippo[0]) / pippo[1];*
*double y = (latitude - pippo[3]) / pippo[5];*
* *
*GDALRasterBand* pointerToBand;*
* *
*pointerToBand=pointerToDataSet->GetRasterBand(1);*
* *
*float *elevation;*
* *
*pointerToDataSet->RasterIO(?,?, ... , ?);*
*pointerToBand->RasterIO(?,?, ... , ?);*


I supposed I had to store elevation data into the buffer I created, I mean
the float pointer.
I got confused among these:
- the file *.dt0
- longitude and latitude
- parameters for RasterIO()

Every tips will be very appreciated, thanks a lot for your patience,
Regards,
Carmelo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100831/51ed1cab/attachment.html
From woodbri at swoodbridge.com  Tue Aug 31 11:47:37 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue Aug 31 11:49:33 2010
Subject: [gdal-dev] Extract elevation from (latitude, longitude)
In-Reply-To: <AANLkTim2r8wCXzsC9Tn2tf-fOx8Mi26cv5yQwb5WJr38@mail.gmail.com>
References: <AANLkTim2r8wCXzsC9Tn2tf-fOx8Mi26cv5yQwb5WJr38@mail.gmail.com>
Message-ID: <4C7D2419.2030205@swoodbridge.com>

On 8/31/2010 11:11 AM, Carmelo Terrasi wrote:
> Hello everybody,
> first of all my apologies cause I'm a newbie with this stuff...
>
> I'm trying to build a function able to extract altitude from latitude
> and longitude as parameters.
> Something like that: *double MyElevation(double lat, double lon)*
> *
> *
> I'm using Dted level 0 to get the elevation (I've already read this
> post: http://www.osgeo.org/pipermail/gdal-dev/2010-February/023457.html )
> But I got lost... :(
>
>     /GDALAllRegister();
>     /
>     /pointerToDataSet=(GDALDataset*) GDALOpen("n30.dt0", GA_ReadOnly);/
>     / /
>     /double data[6];/
>     /double longitude, latitude;/
>     /
>     /
>     /pointerToDataSet->GetGeoTransform(data);/
>     /
>     /
>     /longitude=???;/
>     /latitude=???;/
>     / /
>     /double x = (longitude - pippo[0]) / pippo[1];/
>     /double y = (latitude - pippo[3]) / pippo[5];/
>     / /
>     /GDALRasterBand* pointerToBand;/
>     / /
>     /pointerToBand=pointerToDataSet->GetRasterBand(1);/
>     / /
>     /float *elevation;/
>     / /
>     /pointerToDataSet->RasterIO(?,?, ... , ?);/
>     /pointerToBand->RasterIO(?,?, ... , ?);/

maybe something like:

     GDALRasterIO( pointerToBand, GF_Read, x, y, 1, 1,
                   &elevation, 1, 1, GDT_Float32,
                   0, 0 );

-Steve

> I supposed I had to store elevation data into the buffer I created, I
> mean the float pointer.
> I got confused among these:
> - the file *.dt0
> - longitude and latitude
> - parameters for RasterIO()
>
> Every tips will be very appreciated, thanks a lot for your patience,
> Regards,
> Carmelo
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Tue Aug 31 11:54:17 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Aug 31 11:54:19 2010
Subject: [gdal-dev] Extract elevation from (latitude, longitude)
In-Reply-To: <AANLkTim2r8wCXzsC9Tn2tf-fOx8Mi26cv5yQwb5WJr38@mail.gmail.com>
References: <AANLkTim2r8wCXzsC9Tn2tf-fOx8Mi26cv5yQwb5WJr38@mail.gmail.com>
Message-ID: <AANLkTi=kdVQjTuPbvzW5vr+74+HZoGi-JQaD+jP6GpB5@mail.gmail.com>

Carmelo,

In the code n30.dt0 is some raster image file. Replace it with your image
path.
The array named 'data' was renamed to pippo. Correct that.

Refer to GDALDataset::GetGeoTransform() method at
http://www.gdal.org/classGDALDataset.html

Use GDALDataset::RasterIO() or GDALRasterIO while treating the pointer to a
double variable as the buffer (pData in the function definition).

On Tue, Aug 31, 2010 at 8:41 PM, Carmelo Terrasi
<terrasi.carmelo@gmail.com>wrote:

> Hello everybody,
> first of all my apologies cause I'm a newbie with this stuff...
>
> I'm trying to build a function able to extract altitude from latitude and
> longitude as parameters.
> Something like that: *double MyElevation(double lat, double lon)*
> *
> *
> I'm using Dted level 0 to get the elevation (I've already read this post:
> http://www.osgeo.org/pipermail/gdal-dev/2010-February/023457.html )
> But I got lost... :(
>
> *GDALAllRegister();
> *
> *pointerToDataSet=(GDALDataset*) GDALOpen("n30.dt0", GA_ReadOnly);*
> * *
> *double data[6];*
> *double longitude, latitude;*
> *
> *
> *pointerToDataSet->GetGeoTransform(data);*
> *
> *
> *longitude=???;*
> *latitude=???;*
> * *
> *double x = (longitude - pippo[0]) / pippo[1];*
> *double y = (latitude - pippo[3]) / pippo[5];*
> * *
> *GDALRasterBand* pointerToBand;*
> * *
> *pointerToBand=pointerToDataSet->GetRasterBand(1);*
> * *
> *float *elevation;*
> * *
> *pointerToDataSet->RasterIO(?,?, ... , ?);*
> *pointerToBand->RasterIO(?,?, ... , ?);*
>
>
> I supposed I had to store elevation data into the buffer I created, I mean
> the float pointer.
> I got confused among these:
> - the file *.dt0
> - longitude and latitude
> - parameters for RasterIO()
>
> Every tips will be very appreciated, thanks a lot for your patience,
> Regards,
> Carmelo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100831/e88750cd/attachment.html
