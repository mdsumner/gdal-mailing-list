From bishop.dev at gmail.com  Thu Jan  1 05:48:42 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 01 Jan 2015 16:48:42 +0300
Subject: [gdal-dev] 268 tickets closed in December
In-Reply-To: <loom.20141231T162104-450@post.gmane.org>
References: <loom.20141231T162104-450@post.gmane.org>
Message-ID: <54A5503A.3020900@gmail.com>

Hi,

Good news! And how many tickets left?

Best regards,
     Dmitry

01.01.2015 01:50, Jukka Rahkonen ?????:
> Hi,
>
> An unofficial ticket closing rally in December 2014 was quite a success with
> about 268 closed tickets. None of those were closed only because they were
> so old and still not fixed. Thanks to everybody involved and especially to Even.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at spatialys.com  Thu Jan  1 11:45:09 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Jan 2015 20:45:09 +0100
Subject: [gdal-dev] 268 tickets closed in December
In-Reply-To: <54A5503A.3020900@gmail.com>
References: <loom.20141231T162104-450@post.gmane.org>
	<54A5503A.3020900@gmail.com>
Message-ID: <201501012045.09489.even.rouault@spatialys.com>

Le jeudi 01 janvier 2015 14:48:42, Dmitriy Baryshnikov a ?crit :
> Hi,
> 
> Good news! And how many tickets left?

A quick look at Trac gives the answer: 664.

Even
> 
> Best regards,
>      Dmitry
> 
> 01.01.2015 01:50, Jukka Rahkonen ?????:
> > Hi,
> > 
> > An unofficial ticket closing rally in December 2014 was quite a success
> > with about 268 closed tickets. None of those were closed only because
> > they were so old and still not fixed. Thanks to everybody involved and
> > especially to Even.
> > 
> > -Jukka Rahkonen-
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Mon Jan  5 05:22:06 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 5 Jan 2015 14:22:06 +0100
Subject: [gdal-dev] gdal / ogr drivers
Message-ID: <CA+Ei1OdUcnmK09fKZ4M2JHGBesNphcB-iuMeN0ao_Kc3=6umiQ@mail.gmail.com>

Hi,

in r28290 I set up some metadata for OGR GRASS driver. In this light,
I would have some questions:

1) is it necessary to name OGR driver differently from GDAL driver (in
this case "GRASS" vs. "OGR_GRASS")?
2) historically manual pages in GDAL were named "frmt_" and in OGR
"drv_", this should be consolidated(?)
2a) probably manual pages for drivers which have both raster and
vector capabilities (like GRASS driver) should be merged together?

Thanks for clarification, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From tomerlieber at gmail.com  Mon Jan  5 05:54:15 2015
From: tomerlieber at gmail.com (Tomer)
Date: Mon, 5 Jan 2015 05:54:15 -0800 (PST)
Subject: [gdal-dev] error in Jp2Ecw driver create() method
Message-ID: <1420466055279-5180022.post@n6.nabble.com>

Hello,
 
After compiling Gdal with the licensed ecw/jp2 sdk (read+write)
and trying to use gdal_translate utility to create a jp2 file with the next
parameters:

-of jp2ecw -co "ECW_ENCODE_KEY=xxxx" -co "ECW_ENCODE_COMPANY=xxxx"
"input.tif" "output.jp2"

I'm getting the next error:
0ERROR 6: GDALDriver::Create() ... no create method implemented for this
format.

best regards,
Tomer



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/error-in-Jp2Ecw-driver-create-method-tp5180022.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Mon Jan  5 06:05:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 5 Jan 2015 15:05:30 +0100
Subject: [gdal-dev] gdal / ogr drivers
In-Reply-To: <CA+Ei1OdUcnmK09fKZ4M2JHGBesNphcB-iuMeN0ao_Kc3=6umiQ@mail.gmail.com>
References: <CA+Ei1OdUcnmK09fKZ4M2JHGBesNphcB-iuMeN0ao_Kc3=6umiQ@mail.gmail.com>
Message-ID: <201501051505.30222.even.rouault@spatialys.com>

Le lundi 05 janvier 2015 14:22:06, Martin Landa a ?crit :
> Hi,
> 
> in r28290 I set up some metadata for OGR GRASS driver. In this light,
> I would have some questions:
> 
> 1) is it necessary to name OGR driver differently from GDAL driver (in
> this case "GRASS" vs. "OGR_GRASS")?

Yes, if they are not technically the same driver (which is the case here), 
they must have distinct names since the registration is now common among all 
drivers.

> 2) historically manual pages in GDAL were named "frmt_" and in OGR
> "drv_", this should be consolidated(?)

The actual name doesn't seem to be that important to me to justify the change 
and breaks existing URLs. No strong opinion though.


> 2a) probably manual pages for drivers which have both raster and
> vector capabilities (like GRASS driver) should be merged together?

They can certainly be linked together at the very least. I'd say it would be 
perhaps a bit too far to merge the pages when the drivers aren't technically 
unified.

And even for unified ones, like GeoPackage, I've created a new page 
http://gdal.org/drv_geopackage_raster.html for the raster capabilities, but 
mainly because the content of the vector and raster pages were big enough to 
have their own pages.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jan  5 06:22:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 5 Jan 2015 15:22:31 +0100
Subject: [gdal-dev] error in Jp2Ecw driver create() method
In-Reply-To: <1420466055279-5180022.post@n6.nabble.com>
References: <1420466055279-5180022.post@n6.nabble.com>
Message-ID: <201501051522.31080.even.rouault@spatialys.com>

Le lundi 05 janvier 2015 14:54:15, Tomer a ?crit :
> Hello,
> 
> After compiling Gdal with the licensed ecw/jp2 sdk (read+write)
> and trying to use gdal_translate utility to create a jp2 file with the next
> parameters:
> 
> -of jp2ecw -co "ECW_ENCODE_KEY=xxxx" -co "ECW_ENCODE_COMPANY=xxxx"
> "input.tif" "output.jp2"
> 
> I'm getting the next error:
> 0ERROR 6: GDALDriver::Create() ... no create method implemented for this
> format.

This indicates that during compilation the driver didn't see that write 
support was needed. On Linux this should be automatic by the ./configure 
process. So I'll asume you're a Windows user.

nmake.opt has this indication:
# To add Write support, use the write SDK, change NCSEcw4_RO.lib to 
# NCSEcw4.lib, and add -DHAVE_COMPRESS to ECWFLAGS.  The ECWDIR setting will
# also need some adjustment. 

> 
> best regards,
> Tomer
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/error-in-Jp2Ecw-driver-create-method-t
> p5180022.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From warmerdam at pobox.com  Mon Jan  5 12:45:13 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 5 Jan 2015 12:45:13 -0800
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
Message-ID: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>

Folks,

Motion: Appoint Even Roualt as GDAL Project Management Committee Chair

+1 Frank

---

For at least a couple years, if not longer, Even has been the leading
contributor to the GDAL project.  As we start a fresh year in the middle of
the 2010s I think it is time for us to formally acknowledge Even as the
project leader.

The PMC chair doesn't really have many responsibilities, beyond ensuring
that the PMC operates in an orderly fashion and acting as liason to the
OSGeo board when needed.  But it is also a recognition of Even's great
work, technically and increasingly in other outward facing efforts such as
his upcoming presentation on GDAL at FOSS4G NA in March.

I am very pleased to have "my" project pass into his capable hands, and I
trust his instincts on technical and collaborative matters.

I will continue on as a member of the PMC and commiters list of course.

Best regards,
Frank
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150105/95e023aa/attachment.html>

From lhomme.xavier at gmail.com  Mon Jan  5 13:14:53 2015
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Mon, 5 Jan 2015 22:14:53 +0100
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <CACqzBMw5eFcxf7XCAx05gMXcZsu-o21zg6wRtgMr1VhNaYkuhg@mail.gmail.com>

Great news
And happy new year.
+1
Le 5 janv. 2015 21:45, "Frank Warmerdam" <warmerdam at pobox.com> a ?crit :

> Folks,
>
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>
> +1 Frank
>
> ---
>
> For at least a couple years, if not longer, Even has been the leading
> contributor to the GDAL project.  As we start a fresh year in the middle of
> the 2010s I think it is time for us to formally acknowledge Even as the
> project leader.
>
> The PMC chair doesn't really have many responsibilities, beyond ensuring
> that the PMC operates in an orderly fashion and acting as liason to the
> OSGeo board when needed.  But it is also a recognition of Even's great
> work, technically and increasingly in other outward facing efforts such as
> his upcoming presentation on GDAL at FOSS4G NA in March.
>
> I am very pleased to have "my" project pass into his capable hands, and I
> trust his instincts on technical and collaborative matters.
>
> I will continue on as a member of the PMC and commiters list of course.
>
> Best regards,
> Frank
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150105/705e658a/attachment.html>

From szekerest at gmail.com  Mon Jan  5 14:20:53 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 5 Jan 2015 23:20:53 +0100
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <CACALY+QR9pdUUFp5pZTwGLaBMFRQE4hf37iHoP2r_uR5ECjeFg@mail.gmail.com>

+1

Tamas

2015-01-05 21:45 GMT+01:00 Frank Warmerdam <warmerdam at pobox.com>:

> Folks,
>
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>
> +1 Frank
>
> ---
>
> For at least a couple years, if not longer, Even has been the leading
> contributor to the GDAL project.  As we start a fresh year in the middle of
> the 2010s I think it is time for us to formally acknowledge Even as the
> project leader.
>
> The PMC chair doesn't really have many responsibilities, beyond ensuring
> that the PMC operates in an orderly fashion and acting as liason to the
> OSGeo board when needed.  But it is also a recognition of Even's great
> work, technically and increasingly in other outward facing efforts such as
> his upcoming presentation on GDAL at FOSS4G NA in March.
>
> I am very pleased to have "my" project pass into his capable hands, and I
> trust his instincts on technical and collaborative matters.
>
> I will continue on as a member of the PMC and commiters list of course.
>
> Best regards,
> Frank
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150105/f5346ac1/attachment.html>

From even.rouault at spatialys.com  Mon Jan  5 14:42:33 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 5 Jan 2015 23:42:33 +0100
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <201501052342.33698.even.rouault@spatialys.com>

Le lundi 05 janvier 2015 21:45:13, Frank Warmerdam a ?crit :
> Folks,
> 
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
> 
> +1 Frank
> 
> ---
> 
> For at least a couple years, if not longer, Even has been the leading
> contributor to the GDAL project.  As we start a fresh year in the middle of
> the 2010s I think it is time for us to formally acknowledge Even as the
> project leader.
> 
> The PMC chair doesn't really have many responsibilities, beyond ensuring
> that the PMC operates in an orderly fashion and acting as liason to the
> OSGeo board when needed.  But it is also a recognition of Even's great
> work, technically and increasingly in other outward facing efforts such as
> his upcoming presentation on GDAL at FOSS4G NA in March.
> 
> I am very pleased to have "my" project pass into his capable hands, and I
> trust his instincts on technical and collaborative matters.
> 
> I will continue on as a member of the PMC and commiters list of course.

Just to mention that I would be honoured fulfilling that role after Frank.

Technically, I abstain/+0 for that motion.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From howard at hobu.co  Mon Jan  5 19:54:18 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 5 Jan 2015 21:54:18 -0600
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CACALY+QR9pdUUFp5pZTwGLaBMFRQE4hf37iHoP2r_uR5ECjeFg@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
	<CACALY+QR9pdUUFp5pZTwGLaBMFRQE4hf37iHoP2r_uR5ECjeFg@mail.gmail.com>
Message-ID: <3AD074E7-16A4-4048-ABBC-E1AD00E090B3@hobu.co>

+1

Thank you for your leadership and momentum, Even. 


> On Jan 5, 2015, at 4:20 PM, Tamas Szekeres <szekerest at gmail.com> wrote:
> 
> +1
> 
> Tamas
> 
> 2015-01-05 21:45 GMT+01:00 Frank Warmerdam <warmerdam at pobox.com>:
>> Folks,
>> 
>> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>> 
>> +1 Frank
>> 
>> ---
>> 
>> For at least a couple years, if not longer, Even has been the leading contributor to the GDAL project.  As we start a fresh year in the middle of the 2010s I think it is time for us to formally acknowledge Even as the project leader.
>> 
>> The PMC chair doesn't really have many responsibilities, beyond ensuring that the PMC operates in an orderly fashion and acting as liason to the OSGeo board when needed.  But it is also a recognition of Even's great work, technically and increasingly in other outward facing efforts such as his upcoming presentation on GDAL at FOSS4G NA in March.
>> 
>> I am very pleased to have "my" project pass into his capable hands, and I trust his instincts on technical and collaborative matters.
>> 
>> I will continue on as a member of the PMC and commiters list of course. 
>> 
>> Best regards,
>> Frank
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150105/4c1d033a/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Jan  6 04:49:52 2015
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 6 Jan 2015 12:49:52 +0000 (UTC)
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <loom.20150106T134919-807@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> Folks,
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
> 
> +1 Frank


+1

-Jukka Rahkonen- 



From Andreas.Schmid at bd.so.ch  Tue Jan  6 05:02:33 2015
From: Andreas.Schmid at bd.so.ch (Schmid Andreas)
Date: Tue, 6 Jan 2015 13:02:33 +0000
Subject: [gdal-dev] Request for reintroduction of an override line
	into	gcs.override.csv
In-Reply-To: <50FFCD4FD2A0A948A16AFC67888052C637F30171@srsofaioi16256.verw.rootso.org>
References: <50FFCD4FD2A0A948A16AFC67888052C637F30171@srsofaioi16256.verw.rootso.org>
Message-ID: <50FFCD4FD2A0A948A16AFC67888052C637F338B8@srsofaioi16256.verw.rootso.org>

Help? Anyone? 


-----Urspr?ngliche Nachricht-----
Von: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Schmid Andreas
Gesendet: Mittwoch, 17. Dezember 2014 17:29
An: gdal-dev at lists.osgeo.org
Betreff: [gdal-dev] Request for reintroduction of an override line into gcs.override.csv

Hi

I hope this is the right mailing list to ask the following:

I've realized that in GDAL 1.9.2 the "towgs84" parameters of the Swiss "CH1903" GCS (EPSG:4149) appear incorrectly. According to [1], they should be
674.374,15.056,405.346,,,,
instead of
674.4,15.1,405.3,,,,
It seems that the origin of these rounded values is the EPSG database. In order to override them, I had to add the following line to the gcs.override.csv file:
4149,CH1903,6149,CH1903,6149,9122,7004,8901,1,0,6422,1766,1,9603,674.374,15.056,405.346,,,,

The same (almost same) line used to be included in the gcs.override.csv file until GDAL 1.7.3: [2]
Would it be possible to re-include this override line into the gcs.override.csv?

Thank you,
Andy


[1]: Formulas and constants for the calculation of the Swiss conformal cylindrical projection and for the transformation between coordinate systems, chapter 1.4: http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys/refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojectionen.pdf
[2]: https://github.com/OSGeo/gdal/blob/733829bf6f88530a92c25457a0f4d0ef0eb5f03a/gdal/data/gcs.override.csv#L29-L31


Andreas Schmid
GIS-Informatiker


Amt f?r Geoinformation
SO!GIS-Koordination
R?tistrasse 4
4501 Solothurn

Telefon +41 32 627 75 93
Telefax +41 32 627 75 98
andreas.schmid at bd.so.ch
http://www.so.ch


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Tue Jan  6 06:08:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 6 Jan 2015 15:08:16 +0100
Subject: [gdal-dev]
 =?utf-8?q?Request_for_reintroduction_of_an_override_li?=
 =?utf-8?q?ne_into=09gcs=2Eoverride=2Ecsv?=
In-Reply-To: <50FFCD4FD2A0A948A16AFC67888052C637F338B8@srsofaioi16256.verw.rootso.org>
References: <50FFCD4FD2A0A948A16AFC67888052C637F30171@srsofaioi16256.verw.rootso.org>
	<50FFCD4FD2A0A948A16AFC67888052C637F338B8@srsofaioi16256.verw.rootso.org>
Message-ID: <201501061508.16256.even.rouault@spatialys.com>

Andreas,

Datum shifts are always tricky. I've dug up that issue a bit.

The GDAL EPSG related files are coming from libgeotiff, from where they are 
synchronized with at some time (when a new EPSG database is imported 
typically). The change in libgeotiff that made the override disappeared from 
gcs.override.csv is http://trac.osgeo.org/geotiff/changeset/1819
The comment of the commit seems to suggest that the intent was just to do a 
refactoring on how overrides are handled, and an override was actually defined 
in the new file 1766


####################################################################
#
# CH1903: Per http://bugzilla.remotesensing.org/show_bug.cgi?id=957
#
4149,1766

So it refers to coordinate operation 1766 which is defined in 
coordinate_operation.csv as :

OGRFeature(coordinate_operation):751
  coord_op_code (String) = 1766
  coord_op_name (String) = CH1903 to WGS 84 (2)
  coord_op_type (String) = transformation
  source_crs_code (String) = 4149
  target_crs_code (String) = 4326
  coord_tfm_version (String) = BfL-CH 2
  coord_op_variant (String) = 2
  area_of_use_code (String) = 1286
  coord_op_scope (String) = Accuracy 1.5 metres.
  coord_op_accuracy (String) = 1.5
  coord_op_method_code (String) = 9603
  uom_code_source_coord_diff (String) = 
  uom_code_target_coord_diff (String) = 
  remarks (String) = These parameters are derive from CH1903+ to ETRS89 (code 
1647) and are used at lesser precision from CH1903 to WGS 84 as an 
approximation which is within the accuracy of the distortions in the CH1903 
network. Replaces CH1903 to WGS 84 (1) (code 1753).
  information_source (String) = Bundesamt f?r Landestopographie. Aufbau der 
Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und 
Bezugsrahmen. L+T 1999.
  data_source (String) = OGP
  revision_date (String) = 2007/03/22
  change_id (String) = 2001.390 2006.992 2007.043
  show_operation (String) = 1
  deprecated (String) = 0

And whose parameter values are in coordinate_operation_parameter_value.csv :

1766,9603,8605,674.4,,9001
1766,9603,8606,15.1,,9001
1766,9603,8607,405.3,,9001

So this explains why you get the values you see now.

I'm not sure if the intent was really to change the override with the 
refactoring or if it is more or less accidental, but IMHO, it doesn't look so 
wrong since coord_op_code=1766 aboce description is "CH1903 to WGS 84" and 
"These parameters are derive from CH1903+ to ETRS89 (code 1647) and are used 
at lesser precision from CH1903 to WGS 84 as an approximation which is within 
the accuracy of the distortions in the CH1903 network."

Digging more, the previous override you suggest reintroducing is :

OGRFeature(coordinate_operation):494
  coord_op_code (String) = 1509
  coord_op_name (String) = CH1903+ to CHTRF95 (1)
  coord_op_type (String) = transformation
  source_crs_code (String) = 4150
  target_crs_code (String) = 4151
  coord_tfm_version (String) = BfL-CH
  coord_op_variant (String) = 1
  area_of_use_code (String) = 1286
  coord_op_scope (String) = For applications to an accuracy of 0.1 metres.
  coord_op_accuracy (String) = 0.1
  coord_op_method_code (String) = 9603
  uom_code_source_coord_diff (String) = 
  uom_code_target_coord_diff (String) = 
  remarks (String) = This transformation is also given as CH1903+ to ETRS89 
(1) (code 1647). CHTRF95 is a realisation of ETRS89. May be taken as 
approximate transformation CH1903+ to WGS 84 - see code 1676.
  information_source (String) = Bundesamt f?r Landestopographie. Aufbau der 
Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und 
Bezugsrahmen. L+T 1999.
  data_source (String) = OGP
  revision_date (String) = 1999/10/20
  change_id (String) = 
  show_operation (String) = 1
  deprecated (String) = 0

With values :

1509,9603,8605,674.374,,9001
1509,9603,8606,15.056,,9001
1509,9603,8607,405.346,,9001

So basically you would want datum shift for CH1903+ to be applied as well to 
CH1903.

GDAL actually has the right values for EPSG:4150 / CH1903+ :

$ gdalsrsinfo EPSG:4150

PROJ.4 : '+proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 
+no_defs '

OGC WKT :
GEOGCS["CH1903+",
    DATUM["CH1903+",
        SPHEROID["Bessel 1841",6377397.155,299.1528128,
            AUTHORITY["EPSG","7004"]],
        TOWGS84[674.374,15.056,405.346,0,0,0,0],
        AUTHORITY["EPSG","6150"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4150"]]

I'm not qualified enough to know if it is always appropriate to apply CH1903+ 
datum shift for CH1903 and unfortunately the bugzilla ticket is no longer 
available (I think the bugzilla database crashed and couldn't be recovered).
But looking at 1.4 "transformation parameters CHTRS95/ETRS89
? CH1903+" of the link you provide 
http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys/refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojectionen.pdf 
, "Without any restrictions they can also be used for the system ETRS89 and 
for many applications also for CH1903. But in the case of CH1903, one must be 
aware that because of the local distortions of this network the transformed 
coordinates can be false by up to 1.6 meters compared to the official 
coordinates in CH1903", which would seem to suggest that the CH1903+ 
parameters don't necessarily apply to CH1903.

If you can still think the previous override should be applied in the 
CH1903==>WGS84 case, it would be great to find clear references about that.

Isn't your issue that datasets should be referenced as EPSG:4150 instead of 
EPSG:4149 ?

Even

Le mardi 06 janvier 2015 14:02:33, Schmid Andreas a ?crit :
> Help? Anyone?
> 
> 
> -----Urspr?ngliche Nachricht-----
> Von: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Schmid Andreas
> Gesendet: Mittwoch, 17. Dezember 2014 17:29
> An: gdal-dev at lists.osgeo.org
> Betreff: [gdal-dev] Request for reintroduction of an override line into
> gcs.override.csv
> 
> Hi
> 
> I hope this is the right mailing list to ask the following:
> 
> I've realized that in GDAL 1.9.2 the "towgs84" parameters of the Swiss
> "CH1903" GCS (EPSG:4149) appear incorrectly. According to [1], they should
> be 674.374,15.056,405.346,,,,
> instead of
> 674.4,15.1,405.3,,,,
> It seems that the origin of these rounded values is the EPSG database. In
> order to override them, I had to add the following line to the
> gcs.override.csv file:
> 4149,CH1903,6149,CH1903,6149,9122,7004,8901,1,0,6422,1766,1,9603,674.374,1
> 5.056,405.346,,,,
> 
> The same (almost same) line used to be included in the gcs.override.csv
> file until GDAL 1.7.3: [2] Would it be possible to re-include this
> override line into the gcs.override.csv?
> 
> Thank you,
> Andy
> 
> 
> [1]: Formulas and constants for the calculation of the Swiss conformal
> cylindrical projection and for the transformation between coordinate
> systems, chapter 1.4:
> http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys
> /refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojec
> tionen.pdf [2]:
> https://github.com/OSGeo/gdal/blob/733829bf6f88530a92c25457a0f4d0ef0eb5f03
> a/gdal/data/gcs.override.csv#L29-L31
> 
> 
> Andreas Schmid
> GIS-Informatiker
> 
> 
> Amt f?r Geoinformation
> SO!GIS-Koordination
> R?tistrasse 4
> 4501 Solothurn
> 
> Telefon +41 32 627 75 93
> Telefax +41 32 627 75 98
> andreas.schmid at bd.so.ch
> http://www.so.ch
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dmorissette at mapgears.com  Tue Jan  6 06:19:27 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 06 Jan 2015 09:19:27 -0500
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <54ABEEEF.4040508@mapgears.com>

On 2015-01-05 3:45 PM, Frank Warmerdam wrote:
> Folks,
>
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>


+1 and big thanks Even for all your work for the project

Daniel
-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From bhudspeth at edac.unm.edu  Tue Jan  6 07:10:50 2015
From: bhudspeth at edac.unm.edu (VictoriaH)
Date: Tue, 6 Jan 2015 07:10:50 -0800 (PST)
Subject: [gdal-dev] Problems with GDAL 1.10.1 converting from NetCDF to
	Geotiff
Message-ID: <1420557050544-5180197.post@n6.nabble.com>

Hello,

I am running GDAL 1.10.1 on an Ubuntu 14.04 machine. When I try to create a
Geotiff from a NetCDF file, I get the following error. The problem does not
occur when using an earlier version of GDAL (e.g. 1.9.2). I have seen some
discussion of this issue on the mailing lists, but it is unclear what the
workaround is. I would appreciate any information about how to get around
this issue.


ERROR 1: nBlockYSize = 663, only 1 supported when reading bottom-up dataset
ERROR 1: NETCDF:PM25_2004_06_average.nc:Data, band 1: IReadBlock failed at X
offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

I use the following as an example:

gdal_translate -ot Byte -of GTiff NETCDF:"PM25_2004_06_average.nc":Data
pm_2004.tif

Thanks for any help...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problems-with-GDAL-1-10-1-converting-from-NetCDF-to-Geotiff-tp5180197.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Julien.Demaria at acri-st.fr  Tue Jan  6 08:11:33 2015
From: Julien.Demaria at acri-st.fr (Julien Demaria)
Date: Tue, 6 Jan 2015 16:11:33 +0000
Subject: [gdal-dev] Problems with GDAL 1.10.1 converting from NetCDF
	to	Geotiff
In-Reply-To: <1420557050544-5180197.post@n6.nabble.com>
References: <1420557050544-5180197.post@n6.nabble.com>
Message-ID: <3B970FB76033264EB34479EC8A365E1101BA3162FD@vwiexc030.acri.local>

Dear Victoria,

You can try
export GDAL_NETCDF_BOTTOMUP=NO
just before launching gdal_translate
but note that this works only if your dataset is oriented north-south

For GDAL developpers: I have implemented a path on my version to force blockYSize to 1 if bottomup dataset :

--------------------- gdal/frmts/netcdf/netcdfdataset.cpp --------------------- index f9de39f..5b7a16a 100644 @@ -457,6 +457,15 @@ netCDFRasterBand::netCDFRasterBand( netCDFDataset *poNCDFDS,
         }
 	} 		
 #endif
+
+/* -------------------------------------------------------------------- */
+/*      Force block size to 1 scanline for bottom-up datasets if        */
+/*      nBlockYSize != 1                                                */
+/* -------------------------------------------------------------------- */
+    if( poNCDFDS->bBottomUp && nBlockYSize != 1 ) {
+        nBlockXSize = nRasterXSize;
+        nBlockYSize = 1;
+    }
 }

I have also implemented several other improvements on the netCDF Driver (including full support of groups and netCDF4), I will provide them to the community ASAP.


Best Regards,

Julien

-----Message d'origine-----
De?: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de VictoriaH
Envoy??: mardi 6 janvier 2015 16:11
??: gdal-dev at lists.osgeo.org
Objet?: [gdal-dev] Problems with GDAL 1.10.1 converting from NetCDF to Geotiff

Hello,

I am running GDAL 1.10.1 on an Ubuntu 14.04 machine. When I try to create a Geotiff from a NetCDF file, I get the following error. The problem does not occur when using an earlier version of GDAL (e.g. 1.9.2). I have seen some discussion of this issue on the mailing lists, but it is unclear what the workaround is. I would appreciate any information about how to get around this issue.


ERROR 1: nBlockYSize = 663, only 1 supported when reading bottom-up dataset ERROR 1: NETCDF:PM25_2004_06_average.nc:Data, band 1: IReadBlock failed at X offset 0, Y offset 0 ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

I use the following as an example:

gdal_translate -ot Byte -of GTiff NETCDF:"PM25_2004_06_average.nc":Data
pm_2004.tif

Thanks for any help...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problems-with-GDAL-1-10-1-converting-from-NetCDF-to-Geotiff-tp5180197.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Tue Jan  6 08:23:21 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 6 Jan 2015 17:23:21 +0100
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <CABUeae_V3uA83oSWwLobWW_K1xbxKK5etOaGkU6d4pmYJO_qHg@mail.gmail.com>

Congratulations Even and big thanks for your great efforts!

Mateusz ?oskot
(Sent from mobile)
On 5 Jan 2015 21:45, "Frank Warmerdam" <warmerdam at pobox.com> wrote:

> Folks,
>
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>
> +1 Frank
>
> ---
>
> For at least a couple years, if not longer, Even has been the leading
> contributor to the GDAL project.  As we start a fresh year in the middle of
> the 2010s I think it is time for us to formally acknowledge Even as the
> project leader.
>
> The PMC chair doesn't really have many responsibilities, beyond ensuring
> that the PMC operates in an orderly fashion and acting as liason to the
> OSGeo board when needed.  But it is also a recognition of Even's great
> work, technically and increasingly in other outward facing efforts such as
> his upcoming presentation on GDAL at FOSS4G NA in March.
>
> I am very pleased to have "my" project pass into his capable hands, and I
> trust his instincts on technical and collaborative matters.
>
> I will continue on as a member of the PMC and commiters list of course.
>
> Best regards,
> Frank
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150106/a4b55676/attachment.html>

From mweier at nd.gov  Tue Jan  6 08:38:36 2015
From: mweier at nd.gov (Weier, Mitchell S.)
Date: Tue, 6 Jan 2015 16:38:36 +0000
Subject: [gdal-dev] OGR CSV Example Header Format
Message-ID: <738BCF8F-7BB7-4A34-916B-92EA53524460@nd.gov>

I'm running gdal 1.11.1 on OS X Mavericks.

I was not able to get the OGR csv driver to work with the example header provided in the driver documentation and gdal_grid documentation.  The SrcDataSource line in the vrt header needed to be changed from

<SrcDataSource>test.csv</SrcDataSource>

to

<SrcDataSource relativeToVRT="1">test.csv</SrcDataSource>.

I assume it is a typo.

Regards,

Mitch

Mitch




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150106/32f75763/attachment-0001.html>

From bhudspeth at edac.unm.edu  Tue Jan  6 08:31:11 2015
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Tue, 06 Jan 2015 09:31:11 -0700
Subject: [gdal-dev] Problems with GDAL 1.10.1 converting from NetCDF to
 Geotiff
In-Reply-To: <3B970FB76033264EB34479EC8A365E1101BA3162FD@vwiexc030.acri.local>
References: <1420557050544-5180197.post@n6.nabble.com>
	<3B970FB76033264EB34479EC8A365E1101BA3162FD@vwiexc030.acri.local>
Message-ID: <54AC0DCF.2000607@edac.unm.edu>

Thank you,

Setting the environmental variable worked....

V

On 01/06/2015 09:11 AM, Julien Demaria wrote:
> Dear Victoria,
>
> You can try
> export GDAL_NETCDF_BOTTOMUP=NO
> just before launching gdal_translate
> but note that this works only if your dataset is oriented north-south
>
> For GDAL developpers: I have implemented a path on my version to force blockYSize to 1 if bottomup dataset :
>
> --------------------- gdal/frmts/netcdf/netcdfdataset.cpp --------------------- index f9de39f..5b7a16a 100644 @@ -457,6 +457,15 @@ netCDFRasterBand::netCDFRasterBand( netCDFDataset *poNCDFDS,
>           }
>   	} 		
>   #endif
> +
> +/* -------------------------------------------------------------------- */
> +/*      Force block size to 1 scanline for bottom-up datasets if        */
> +/*      nBlockYSize != 1                                                */
> +/* -------------------------------------------------------------------- */
> +    if( poNCDFDS->bBottomUp && nBlockYSize != 1 ) {
> +        nBlockXSize = nRasterXSize;
> +        nBlockYSize = 1;
> +    }
>   }
>
> I have also implemented several other improvements on the netCDF Driver (including full support of groups and netCDF4), I will provide them to the community ASAP.
>
>
> Best Regards,
>
> Julien
>
> -----Message d'origine-----
> De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de VictoriaH
> Envoy? : mardi 6 janvier 2015 16:11
> ? : gdal-dev at lists.osgeo.org
> Objet : [gdal-dev] Problems with GDAL 1.10.1 converting from NetCDF to Geotiff
>
> Hello,
>
> I am running GDAL 1.10.1 on an Ubuntu 14.04 machine. When I try to create a Geotiff from a NetCDF file, I get the following error. The problem does not occur when using an earlier version of GDAL (e.g. 1.9.2). I have seen some discussion of this issue on the mailing lists, but it is unclear what the workaround is. I would appreciate any information about how to get around this issue.
>
>
> ERROR 1: nBlockYSize = 663, only 1 supported when reading bottom-up dataset ERROR 1: NETCDF:PM25_2004_06_average.nc:Data, band 1: IReadBlock failed at X offset 0, Y offset 0 ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>
> I use the following as an example:
>
> gdal_translate -ot Byte -of GTiff NETCDF:"PM25_2004_06_average.nc":Data
> pm_2004.tif
>
> Thanks for any help...
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problems-with-GDAL-1-10-1-converting-from-NetCDF-to-Geotiff-tp5180197.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From sfkeller at gmail.com  Tue Jan  6 17:20:27 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 7 Jan 2015 02:20:27 +0100
Subject: [gdal-dev] OGR: How to access Coded Value Domains in File
	Geodatabases?
Message-ID: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>

Hi,

ArcGIS offers "Coded Value Domains" (short: "coded domain") to specify
a valid set of values (code+description) for an attribute [1].

Any clues on how to access this information using ogr2ogr, i.e. how to
export this to a separate table when converting e.g. from a ESRI File
Geodatabase (OpenFileGDB, .gdb directories) to Spatialite or
GeoPackage?

Yours, S.

[1] http://resources.arcgis.com/en/help/main/10.1/index.html#//001s00000001000000

From mwtoews at gmail.com  Tue Jan  6 17:44:16 2015
From: mwtoews at gmail.com (Mike Toews)
Date: Wed, 7 Jan 2015 14:44:16 +1300
Subject: [gdal-dev] OGR: How to access Coded Value Domains in File
	Geodatabases?
In-Reply-To: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>
References: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>
Message-ID: <CAM2FmMrMf2EvEdp5HrSwvp+Zb=CjNM_0ESSY2Djh79DwXcW-8Q@mail.gmail.com>

Hi Stefan,

I found this issue too and wrote an enhancement ticket:
http://trac.osgeo.org/gdal/ticket/5741

The only workaround appears to be lots of work. The GDB_Items table
(a00000004.gdbtable) can be read with OGR, where the code/value pairs
are in attributes of XML code, which can be used to either hash the
values or do an SQL JOIN.

-Mike

On 7 January 2015 at 14:20, Stefan Keller <sfkeller at gmail.com> wrote:
> Hi,
>
> ArcGIS offers "Coded Value Domains" (short: "coded domain") to specify
> a valid set of values (code+description) for an attribute [1].
>
> Any clues on how to access this information using ogr2ogr, i.e. how to
> export this to a separate table when converting e.g. from a ESRI File
> Geodatabase (OpenFileGDB, .gdb directories) to Spatialite or
> GeoPackage?
>
> Yours, S.
>
> [1] http://resources.arcgis.com/en/help/main/10.1/index.html#//001s00000001000000

From wxx114 at 163.com  Wed Jan  7 00:41:35 2015
From: wxx114 at 163.com (wxx)
Date: Wed, 7 Jan 2015 00:41:35 -0800 (PST)
Subject: [gdal-dev] how to set filegdb encoding
Message-ID: <1420620095861-5180296.post@n6.nabble.com>

the dirver of shp file  in ogr can support chinese character by setting
CPLSetConfigOption("SHAPE_ENCODING","");
how to set encoding about filegdb dirver to support chinese character.
now all the chinese character in the attribute field is messy code.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/how-to-set-filegdb-encoding-tp5180296.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Jan  7 00:47:18 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Jan 2015 09:47:18 +0100
Subject: [gdal-dev] how to set filegdb encoding
In-Reply-To: <1420620095861-5180296.post@n6.nabble.com>
References: <1420620095861-5180296.post@n6.nabble.com>
Message-ID: <201501070947.18254.even.rouault@spatialys.com>

Le mercredi 07 janvier 2015 09:41:35, wxx a ?crit :
> the dirver of shp file  in ogr can support chinese character by setting
> CPLSetConfigOption("SHAPE_ENCODING","");
> how to set encoding about filegdb dirver to support chinese character.
> now all the chinese character in the attribute field is messy code.

The FileGDB driver (as most drivers) expects attribute values to be passed in 
UTF-8 encoding (and this is the encoding used in the FileGDB binary format 
itself), so you'll likely have to convert on your side from your chinese 
encoding into UTF-8.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From wxx114 at 163.com  Wed Jan  7 01:15:26 2015
From: wxx114 at 163.com (Rebecca)
Date: Wed, 7 Jan 2015 01:15:26 -0800 (PST)
Subject: [gdal-dev] how to set filegdb encoding
In-Reply-To: <201501070947.18254.even.rouault@spatialys.com>
References: <1420620095861-5180296.post@n6.nabble.com>
	<201501070947.18254.even.rouault@spatialys.com>
Message-ID: <1420622126177-5180303.post@n6.nabble.com>

thank Even, I convert the string in utf8 and then dump the feature to gdb,
then there is no messy code, all chinese character is right. thank you very
much !



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/how-to-set-filegdb-encoding-tp5180296p5180303.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From wxx114 at 163.com  Wed Jan  7 02:35:14 2015
From: wxx114 at 163.com (Rebecca)
Date: Wed, 7 Jan 2015 02:35:14 -0800 (PST)
Subject: [gdal-dev] why the layer changed geometry type after insert into gdb
Message-ID: <1420626914928-5180310.post@n6.nabble.com>

I created a gdb with filegdab api  in gdal, then create an ogrlayer int gdb
by function CreateLayer(newlayername,spatial,geotype,option), 
 the thrid parameter "geotype"=wkbLinestring, after created the layer,  I
get the layer geometry type by function layerGeoType=pLayer->getgeomtype();
but the "layerGeoType"=wkbmultilinestring, is not the same as before I set
the layer type wkbLinestring.
  I tried wkblinestring layer, wkbpolygon layer , all the layer into gdbfile
, their geometry type become wkbmultilinestring, wkbmultipolygon, how could
I control the layer geometry type in filegdb which would be the same as
before.

Rebecca



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/why-the-layer-changed-geometry-type-after-insert-into-gdb-tp5180310.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Jan  7 02:45:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Jan 2015 11:45:13 +0100
Subject: [gdal-dev] why the layer changed geometry type after insert
	into gdb
In-Reply-To: <1420626914928-5180310.post@n6.nabble.com>
References: <1420626914928-5180310.post@n6.nabble.com>
Message-ID: <201501071145.13322.even.rouault@spatialys.com>

Le mercredi 07 janvier 2015 11:35:14, Rebecca a ?crit :
> I created a gdb with filegdab api  in gdal, then create an ogrlayer int gdb
> by function CreateLayer(newlayername,spatial,geotype,option),
>  the thrid parameter "geotype"=wkbLinestring, after created the layer,  I
> get the layer geometry type by function layerGeoType=pLayer->getgeomtype();
> but the "layerGeoType"=wkbmultilinestring, is not the same as before I set
> the layer type wkbLinestring.
>   I tried wkblinestring layer, wkbpolygon layer , all the layer into
> gdbfile , their geometry type become wkbmultilinestring, wkbmultipolygon,
> how could I control the layer geometry type in filegdb which would be the
> same as before.

Rebecca,

This is a specfic behaviour of the FileGDB driver due to the FileGDB format 
itself that doesn't recognize the difference between a linestring and a 
multilinestring, or a polygon and a multipolygon, since the stored geometries 
are always "multi".
Thus the choice has been made in the FileGDB driver to expose and convert 
everything as  "multi" geometry type.
When writing you should be able to pass a single linestring/polygon and it 
will be automatically converted. When reading, you will always get the multi 
representation.
So this is intended behaviour. Not much that can be done about that.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bontepaarden at gmail.com  Wed Jan  7 03:08:59 2015
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 7 Jan 2015 12:08:59 +0100
Subject: [gdal-dev] GDAL and C# bindings
Message-ID: <CAHNf2YQ7ApTHqfeb1bWDGgnxHnM35K_KqZ9FvM5vSd2JYYuLtQ@mail.gmail.com>

I'm trying the C# bindings but keep running into problems.
I've made the sample project explained here:
http://vipassanaandenvironmentalinformatics.blogspot.nl/2013/03/getting-started-with-c-and-gdal.html

But when calling Gdal.AllRegister(); I get an exception saying it can't
find gdal_warp.dll.
I have C:\Program Files (x86)\GDAL in my PATH environmental value.
When I open a command line prompt I can run gdalinfo at any location,
meaning the PATH is correct.
gdal_wrap.dll is in C:\Program Files (x86)\GDAL. I've got the binaries from
gisinternals.com (GDAL 1.11.1, released 2014/09/24)

It looks like PInvoke can't find the dll. What do I need to set to get this
to work?

Thanks,

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150107/3d058355/attachment.html>

From liminlu0314 at 163.com  Wed Jan  7 04:55:12 2015
From: liminlu0314 at 163.com (liminlu0314)
Date: Wed, 7 Jan 2015 04:55:12 -0800 (PST)
Subject: [gdal-dev] OGR can't create PCIDSK polygon file
Message-ID: <1420635312592-5180339.post@n6.nabble.com>

OGR cannot create the PCIDSK polygon vector data, Found in the GDAL library
code is not achieved, I realize part of the code, surface vector data can
create PCIDSK type.
The modified code is as follows[ogrpcidsklayer.cpp file OGRErr
OGRPCIDSKLayer::SetFeature( OGRFeature *poFeature )]:

		else if( wkbFlatten(poGeometry->getGeometryType()) == wkbPolygon )
		{
			OGRPolygon *poPoly = (OGRPolygon *) poGeometry;
			int nRingSize = poPoly->getNumInteriorRings();
			
			std::vector<PCIDSK::int32> anRingStart;
			anRingStart.resize(nRingSize+1);
			
			OGRLinearRing *poRing = NULL;
			poRing = poPoly->getExteriorRing();
			anRingStart[0] = poRing->getNumPoints();
			
			aoVertices.resize(poRing->getNumPoints());
			for(int i = 0; i < aoVertices.size(); i++ )
			{
				aoVertices[i].x = poRing->getX(i);
				aoVertices[i].y = poRing->getY(i);
				aoVertices[i].z = poRing->getZ(i);
			}

			for (int iRing=0; iRing < nRingSize; iRing++)
			{
				int nCurrentStart = aoVertices.size();
				poRing = poPoly->getInteriorRing(iRing);
				anRingStart[iRing+1] = nCurrentStart + poRing->getNumPoints();
				aoVertices.resize(nCurrentStart + poRing->getNumPoints());

				for(int i = nCurrentStart; i < aoVertices.size(); i++ )
				{
					aoVertices[i].x = poRing->getX(i-nCurrentStart);
					aoVertices[i].y = poRing->getY(i-nCurrentStart);
					aoVertices[i].z = poRing->getZ(i-nCurrentStart);
				}
			}
			
			if(iRingStartField == -1)
			{
				iRingStartField = poVecSeg->GetFieldCount();
				//poVecSeg->AddField( "RingStart", PCIDSK::FieldTypeCountedInt, "", ""
);
	  			OGRFieldDefn oField( "RingStart", OFTIntegerList );
	  			//oField.SetWidth(100);
	  			CreateField( &oField );
			}

			std::vector<PCIDSK::ShapeField> aoShapeFields;
			poVecSeg->GetFields(id, aoShapeFields);

			aoShapeFields[iRingStartField].SetValue(anRingStart);
			poVecSeg->SetFields( id, aoShapeFields );
		}




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-can-t-create-PCIDSK-polygon-file-tp5180339.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bontepaarden at gmail.com  Wed Jan  7 05:13:30 2015
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 7 Jan 2015 14:13:30 +0100
Subject: [gdal-dev] GDAL and C# bindings
In-Reply-To: <CAHNf2YQ7ApTHqfeb1bWDGgnxHnM35K_KqZ9FvM5vSd2JYYuLtQ@mail.gmail.com>
References: <CAHNf2YQ7ApTHqfeb1bWDGgnxHnM35K_KqZ9FvM5vSd2JYYuLtQ@mail.gmail.com>
Message-ID: <CAHNf2YRgAL1d+pAxEe-La09jipDhitSSV4RAuKxL3nho8_S2KA@mail.gmail.com>

Found the solution myself.
When I add the location of gdal as first to my path environment it is
working. So it seems my path is not correctly set for PInvoke.
It is working now.

I'm now working on getting my C# application run on Ubuntu with MONO. Also
a very interesting challenge ;)




Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*

2015-01-07 12:08 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:

> I'm trying the C# bindings but keep running into problems.
> I've made the sample project explained here:
> http://vipassanaandenvironmentalinformatics.blogspot.nl/2013/03/getting-started-with-c-and-gdal.html
>
> But when calling Gdal.AllRegister(); I get an exception saying it can't
> find gdal_warp.dll.
> I have C:\Program Files (x86)\GDAL in my PATH environmental value.
> When I open a command line prompt I can run gdalinfo at any location,
> meaning the PATH is correct.
> gdal_wrap.dll is in C:\Program Files (x86)\GDAL. I've got the binaries
> from gisinternals.com (GDAL 1.11.1, released 2014/09/24)
>
> It looks like PInvoke can't find the dll. What do I need to set to get
> this to work?
>
> Thanks,
>
> Paul
>
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
>
>
> *The English presentations of the MapWindow GIS Conference 2014 are
> online. <http://www.slideshare.net/mapwindow>*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150107/13c56b9d/attachment-0001.html>

From sfkeller at gmail.com  Wed Jan  7 07:20:46 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 7 Jan 2015 16:20:46 +0100
Subject: [gdal-dev] OGR: How to access Coded Value Domains in File
	Geodatabases?
In-Reply-To: <CAM2FmMrMf2EvEdp5HrSwvp+Zb=CjNM_0ESSY2Djh79DwXcW-8Q@mail.gmail.com>
References: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>
	<CAM2FmMrMf2EvEdp5HrSwvp+Zb=CjNM_0ESSY2Djh79DwXcW-8Q@mail.gmail.com>
Message-ID: <CAFcOn2839t7hG-+dyN9O-pcDTsDZQdYt8FLmh-7SjkZgn56vjA@mail.gmail.com>

Hi Mike

Thanks! That ticket is very insightful.

I'm not sure though if there is already an agreement there about the
best solution inside OGR code.

In the meantime: Am I correct that there's an immediate solution by
defining an query against table DipCategories of a FileGDB file with
ogr2ogr (-sgl "select ")?

--S.

2015-01-07 2:44 GMT+01:00 Mike Toews <mwtoews at gmail.com>:
> Hi Stefan,
>
> I found this issue too and wrote an enhancement ticket:
> http://trac.osgeo.org/gdal/ticket/5741
>
> The only workaround appears to be lots of work. The GDB_Items table
> (a00000004.gdbtable) can be read with OGR, where the code/value pairs
> are in attributes of XML code, which can be used to either hash the
> values or do an SQL JOIN.
>
> -Mike
>
> On 7 January 2015 at 14:20, Stefan Keller <sfkeller at gmail.com> wrote:
>> Hi,
>>
>> ArcGIS offers "Coded Value Domains" (short: "coded domain") to specify
>> a valid set of values (code+description) for an attribute [1].
>>
>> Any clues on how to access this information using ogr2ogr, i.e. how to
>> export this to a separate table when converting e.g. from a ESRI File
>> Geodatabase (OpenFileGDB, .gdb directories) to Spatialite or
>> GeoPackage?
>>
>> Yours, S.
>>
>> [1] http://resources.arcgis.com/en/help/main/10.1/index.html#//001s00000001000000

From even.rouault at spatialys.com  Wed Jan  7 07:39:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Jan 2015 16:39:35 +0100
Subject: [gdal-dev] OGR: How to access Coded Value Domains in File
	Geodatabases?
In-Reply-To: <CAFcOn2839t7hG-+dyN9O-pcDTsDZQdYt8FLmh-7SjkZgn56vjA@mail.gmail.com>
References: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>
	<CAM2FmMrMf2EvEdp5HrSwvp+Zb=CjNM_0ESSY2Djh79DwXcW-8Q@mail.gmail.com>
	<CAFcOn2839t7hG-+dyN9O-pcDTsDZQdYt8FLmh-7SjkZgn56vjA@mail.gmail.com>
Message-ID: <201501071639.35752.even.rouault@spatialys.com>

Le mercredi 07 janvier 2015 16:20:46, Stefan Keller a ?crit :
> Hi Mike
> 
> Thanks! That ticket is very insightful.
> 
> I'm not sure though if there is already an agreement there about the
> best solution inside OGR code.
> 
> In the meantime: Am I correct that there's an immediate solution by
> defining an query against table DipCategories of a FileGDB file with
> ogr2ogr (-sgl "select ")?

Hum I don't think so. The suggestion in the ticket was to enhance the drivers 
to expose the XML as a OGR layer and do a join. Or to do optional expansion of 
the code into their descriptions. Another less ad-hac approach would be to 
extent the recently added subtyping field mechanism to model such enumerated 
fields and then have an option in ogr2ogr to do the expansion.
Anyway interesting small enhancement to potentially sponsor.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sfkeller at gmail.com  Wed Jan  7 09:03:29 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 7 Jan 2015 18:03:29 +0100
Subject: [gdal-dev] OGR: How to access Coded Value Domains in File
	Geodatabases?
In-Reply-To: <201501071639.35752.even.rouault@spatialys.com>
References: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>
	<CAM2FmMrMf2EvEdp5HrSwvp+Zb=CjNM_0ESSY2Djh79DwXcW-8Q@mail.gmail.com>
	<CAFcOn2839t7hG-+dyN9O-pcDTsDZQdYt8FLmh-7SjkZgn56vjA@mail.gmail.com>
	<201501071639.35752.even.rouault@spatialys.com>
Message-ID: <CAFcOn28iutGKC2f4gjgJ+y797AJZSiHkpxptssrouFiuyoLS_A@mail.gmail.com>

2015-01-07 16:39 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hum I don't think so.

Ok. And what about accessing it with Python GDAL/OGR API?

--S.

P.S.
> Anyway interesting small enhancement to potentially sponsor.
Right. Perhaps Esri could step in ;-)


2015-01-07 16:39 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> Le mercredi 07 janvier 2015 16:20:46, Stefan Keller a ?crit :
>> Hi Mike
>>
>> Thanks! That ticket is very insightful.
>>
>> I'm not sure though if there is already an agreement there about the
>> best solution inside OGR code.
>>
>> In the meantime: Am I correct that there's an immediate solution by
>> defining an query against table DipCategories of a FileGDB file with
>> ogr2ogr (-sgl "select ")?
>
> Hum I don't think so. The suggestion in the ticket was to enhance the drivers
> to expose the XML as a OGR layer and do a join. Or to do optional expansion of
> the code into their descriptions. Another less ad-hac approach would be to
> extent the recently added subtyping field mechanism to model such enumerated
> fields and then have an option in ogr2ogr to do the expansion.
> Anyway interesting small enhancement to potentially sponsor.
>
> Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From Andreas.Schmid at bd.so.ch  Wed Jan  7 09:43:15 2015
From: Andreas.Schmid at bd.so.ch (Schmid Andreas)
Date: Wed, 7 Jan 2015 17:43:15 +0000
Subject: [gdal-dev] Request for reintroduction of an override line into
 gcs.override.csv
Message-ID: <50FFCD4FD2A0A948A16AFC67888052C637F34D3A@srsofaioi16256.verw.rootso.org>

Even,

Thank you a lot for digging so deep. It seems indeed quite tricky.

>I'm not sure if the intent was really to change the override with the 
>refactoring or if it is more or less accidental

I also realized that it was during a refactoring that this (and other) overrides were removed. So I rather felt like the removal was accidental. (Or that the overrides are solved in a different way now, but I couldn't find out how.)

>So basically you would want datum shift for CH1903+ to be applied as well to 
>CH1903.

Exactly. The reason is: Even though the transformed coordinates can be false up to 1.6 meters when using this datum shift, they won't become any better when using the rounded datum shift values. However they will become worse in a way, as using the rounded datum shift values adds some additional noise to the transformation results. For example, performing a transformation from CH1903+ to CH1903 should not modify the coordinates at all. But working with the current two different sets of parameters modifies the coordinates slightliy, which is not correct and may confuse the end user.

>If you can still think the previous override should be applied in the 
>CH1903==>WGS84 case, it would be great to find clear references about that.

I unfortunately couldn't find a more clear reference until now than the document from swisstopo already given. But to sum it up, the following points indicate that applying the previous override again would be reasonable:
* according to an older version of the gcs.override.csv file, the override obviously has been approved at some point in the past 
* it rather looks like the removal of the override was accidental
* even if the transformed coordinates can be false up to 1.6 meters, transformations from CH1903+ to CH1903 should not arbitrarily modify the coordinates in order to not confuse the end user
* as the transformed coordinates can be false up to 1.6 meters anyway, we don't loose anything by using the unrounded parameters

>Isn't your issue that datasets should be referenced as EPSG:4150 instead of 
>EPSG:4149 ?

Not really. While this would basically solve the issue, referencing EPSG:4150 instead of EPSG:4149 is wrong from a systematic point of view.


Best regards,
Andy





-----Urspr?ngliche Nachricht-----
Von: Even Rouault [mailto:even.rouault at spatialys.com] 
Gesendet: Dienstag, 6. Januar 2015 15:08
An: gdal-dev at lists.osgeo.org
Cc: Schmid Andreas
Betreff: Re: [gdal-dev] Request for reintroduction of an override line into gcs.override.csv

Andreas,

Datum shifts are always tricky. I've dug up that issue a bit.

The GDAL EPSG related files are coming from libgeotiff, from where they are 
synchronized with at some time (when a new EPSG database is imported 
typically). The change in libgeotiff that made the override disappeared from 
gcs.override.csv is http://trac.osgeo.org/geotiff/changeset/1819
The comment of the commit seems to suggest that the intent was just to do a 
refactoring on how overrides are handled, and an override was actually defined 
in the new file 1766


####################################################################
#
# CH1903: Per http://bugzilla.remotesensing.org/show_bug.cgi?id=957
#
4149,1766

So it refers to coordinate operation 1766 which is defined in 
coordinate_operation.csv as :

OGRFeature(coordinate_operation):751
  coord_op_code (String) = 1766
  coord_op_name (String) = CH1903 to WGS 84 (2)
  coord_op_type (String) = transformation
  source_crs_code (String) = 4149
  target_crs_code (String) = 4326
  coord_tfm_version (String) = BfL-CH 2
  coord_op_variant (String) = 2
  area_of_use_code (String) = 1286
  coord_op_scope (String) = Accuracy 1.5 metres.
  coord_op_accuracy (String) = 1.5
  coord_op_method_code (String) = 9603
  uom_code_source_coord_diff (String) = 
  uom_code_target_coord_diff (String) = 
  remarks (String) = These parameters are derive from CH1903+ to ETRS89 (code 
1647) and are used at lesser precision from CH1903 to WGS 84 as an 
approximation which is within the accuracy of the distortions in the CH1903 
network. Replaces CH1903 to WGS 84 (1) (code 1753).
  information_source (String) = Bundesamt f?r Landestopographie. Aufbau der 
Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und 
Bezugsrahmen. L+T 1999.
  data_source (String) = OGP
  revision_date (String) = 2007/03/22
  change_id (String) = 2001.390 2006.992 2007.043
  show_operation (String) = 1
  deprecated (String) = 0

And whose parameter values are in coordinate_operation_parameter_value.csv :

1766,9603,8605,674.4,,9001
1766,9603,8606,15.1,,9001
1766,9603,8607,405.3,,9001

So this explains why you get the values you see now.

I'm not sure if the intent was really to change the override with the 
refactoring or if it is more or less accidental, but IMHO, it doesn't look so 
wrong since coord_op_code=1766 aboce description is "CH1903 to WGS 84" and 
"These parameters are derive from CH1903+ to ETRS89 (code 1647) and are used 
at lesser precision from CH1903 to WGS 84 as an approximation which is within 
the accuracy of the distortions in the CH1903 network."

Digging more, the previous override you suggest reintroducing is :

OGRFeature(coordinate_operation):494
  coord_op_code (String) = 1509
  coord_op_name (String) = CH1903+ to CHTRF95 (1)
  coord_op_type (String) = transformation
  source_crs_code (String) = 4150
  target_crs_code (String) = 4151
  coord_tfm_version (String) = BfL-CH
  coord_op_variant (String) = 1
  area_of_use_code (String) = 1286
  coord_op_scope (String) = For applications to an accuracy of 0.1 metres.
  coord_op_accuracy (String) = 0.1
  coord_op_method_code (String) = 9603
  uom_code_source_coord_diff (String) = 
  uom_code_target_coord_diff (String) = 
  remarks (String) = This transformation is also given as CH1903+ to ETRS89 
(1) (code 1647). CHTRF95 is a realisation of ETRS89. May be taken as 
approximate transformation CH1903+ to WGS 84 - see code 1676.
  information_source (String) = Bundesamt f?r Landestopographie. Aufbau der 
Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und 
Bezugsrahmen. L+T 1999.
  data_source (String) = OGP
  revision_date (String) = 1999/10/20
  change_id (String) = 
  show_operation (String) = 1
  deprecated (String) = 0

With values :

1509,9603,8605,674.374,,9001
1509,9603,8606,15.056,,9001
1509,9603,8607,405.346,,9001

So basically you would want datum shift for CH1903+ to be applied as well to 
CH1903.

GDAL actually has the right values for EPSG:4150 / CH1903+ :

$ gdalsrsinfo EPSG:4150

PROJ.4 : '+proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 
+no_defs '

OGC WKT :
GEOGCS["CH1903+",
    DATUM["CH1903+",
        SPHEROID["Bessel 1841",6377397.155,299.1528128,
            AUTHORITY["EPSG","7004"]],
        TOWGS84[674.374,15.056,405.346,0,0,0,0],
        AUTHORITY["EPSG","6150"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4150"]]

I'm not qualified enough to know if it is always appropriate to apply CH1903+ 
datum shift for CH1903 and unfortunately the bugzilla ticket is no longer 
available (I think the bugzilla database crashed and couldn't be recovered).
But looking at 1.4 "transformation parameters CHTRS95/ETRS89
? CH1903+" of the link you provide 
http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys/refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojectionen.pdf 
, "Without any restrictions they can also be used for the system ETRS89 and 
for many applications also for CH1903. But in the case of CH1903, one must be 
aware that because of the local distortions of this network the transformed 
coordinates can be false by up to 1.6 meters compared to the official 
coordinates in CH1903", which would seem to suggest that the CH1903+ 
parameters don't necessarily apply to CH1903.

If you can still think the previous override should be applied in the 
CH1903==>WGS84 case, it would be great to find clear references about that.

Isn't your issue that datasets should be referenced as EPSG:4150 instead of 
EPSG:4149 ?

Even

Le mardi 06 janvier 2015 14:02:33, Schmid Andreas a ?crit :
> Help? Anyone?
> 
> 
> -----Urspr?ngliche Nachricht-----
> Von: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Schmid Andreas
> Gesendet: Mittwoch, 17. Dezember 2014 17:29
> An: gdal-dev at lists.osgeo.org
> Betreff: [gdal-dev] Request for reintroduction of an override line into
> gcs.override.csv
> 
> Hi
> 
> I hope this is the right mailing list to ask the following:
> 
> I've realized that in GDAL 1.9.2 the "towgs84" parameters of the Swiss
> "CH1903" GCS (EPSG:4149) appear incorrectly. According to [1], they should
> be 674.374,15.056,405.346,,,,
> instead of
> 674.4,15.1,405.3,,,,
> It seems that the origin of these rounded values is the EPSG database. In
> order to override them, I had to add the following line to the
> gcs.override.csv file:
> 4149,CH1903,6149,CH1903,6149,9122,7004,8901,1,0,6422,1766,1,9603,674.374,1
> 5.056,405.346,,,,
> 
> The same (almost same) line used to be included in the gcs.override.csv
> file until GDAL 1.7.3: [2] Would it be possible to re-include this
> override line into the gcs.override.csv?
> 
> Thank you,
> Andy
> 
> 
> [1]: Formulas and constants for the calculation of the Swiss conformal
> cylindrical projection and for the transformation between coordinate
> systems, chapter 1.4:
> http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys
> /refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojec
> tionen.pdf [2]:
> https://github.com/OSGeo/gdal/blob/733829bf6f88530a92c25457a0f4d0ef0eb5f03
> a/gdal/data/gcs.override.csv#L29-L31
> 
> 
> Andreas Schmid
> GIS-Informatiker
> 
> 
> Amt f?r Geoinformation
> SO!GIS-Koordination
> R?tistrasse 4
> 4501 Solothurn
> 
> Telefon +41 32 627 75 93
> Telefax +41 32 627 75 98
> andreas.schmid at bd.so.ch
> http://www.so.ch
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From warmerdam at pobox.com  Wed Jan  7 09:51:39 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 7 Jan 2015 09:51:39 -0800
Subject: [gdal-dev] Request for reintroduction of an override line into
	gcs.override.csv
In-Reply-To: <50FFCD4FD2A0A948A16AFC67888052C637F34D3A@srsofaioi16256.verw.rootso.org>
References: <50FFCD4FD2A0A948A16AFC67888052C637F34D3A@srsofaioi16256.verw.rootso.org>
Message-ID: <CA+YzLBcu_Y8WOfLn-huxLh9eEb0hLP_9=EgtozOJXeuQWPJLbA@mail.gmail.com>

Schmid,

If you file a ticket against libgeotiff (http://trac.osgeo.org/geotiff/)
capturing the details of the above discussion, I'll review and consider
reapplying the override.

I haven't looked into this issue in detail yet, but I'm concerned you want
to apply a particular transform to CH1903+ that EPSG does not offer as one
of the routes to WGS84. I have tried to move to the new approach where
overrides are almost always just given priority to a particular EPSG
transformation over others rather than providing transformations not
included in the EPSG set.  Hopefully that won't be the case here.

Best regards,
Frank


On Wed, Jan 7, 2015 at 9:43 AM, Schmid Andreas <Andreas.Schmid at bd.so.ch>
wrote:

> Even,
>
> Thank you a lot for digging so deep. It seems indeed quite tricky.
>
> >I'm not sure if the intent was really to change the override with the
> >refactoring or if it is more or less accidental
>
> I also realized that it was during a refactoring that this (and other)
> overrides were removed. So I rather felt like the removal was accidental.
> (Or that the overrides are solved in a different way now, but I couldn't
> find out how.)
>
> >So basically you would want datum shift for CH1903+ to be applied as well
> to
> >CH1903.
>
> Exactly. The reason is: Even though the transformed coordinates can be
> false up to 1.6 meters when using this datum shift, they won't become any
> better when using the rounded datum shift values. However they will become
> worse in a way, as using the rounded datum shift values adds some
> additional noise to the transformation results. For example, performing a
> transformation from CH1903+ to CH1903 should not modify the coordinates at
> all. But working with the current two different sets of parameters modifies
> the coordinates slightliy, which is not correct and may confuse the end
> user.
>
> >If you can still think the previous override should be applied in the
> >CH1903==>WGS84 case, it would be great to find clear references about
> that.
>
> I unfortunately couldn't find a more clear reference until now than the
> document from swisstopo already given. But to sum it up, the following
> points indicate that applying the previous override again would be
> reasonable:
> * according to an older version of the gcs.override.csv file, the override
> obviously has been approved at some point in the past
> * it rather looks like the removal of the override was accidental
> * even if the transformed coordinates can be false up to 1.6 meters,
> transformations from CH1903+ to CH1903 should not arbitrarily modify the
> coordinates in order to not confuse the end user
> * as the transformed coordinates can be false up to 1.6 meters anyway, we
> don't loose anything by using the unrounded parameters
>
> >Isn't your issue that datasets should be referenced as EPSG:4150 instead
> of
> >EPSG:4149 ?
>
> Not really. While this would basically solve the issue, referencing
> EPSG:4150 instead of EPSG:4149 is wrong from a systematic point of view.
>
>
> Best regards,
> Andy
>
>
>
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Even Rouault [mailto:even.rouault at spatialys.com]
> Gesendet: Dienstag, 6. Januar 2015 15:08
> An: gdal-dev at lists.osgeo.org
> Cc: Schmid Andreas
> Betreff: Re: [gdal-dev] Request for reintroduction of an override line
> into gcs.override.csv
>
> Andreas,
>
> Datum shifts are always tricky. I've dug up that issue a bit.
>
> The GDAL EPSG related files are coming from libgeotiff, from where they are
> synchronized with at some time (when a new EPSG database is imported
> typically). The change in libgeotiff that made the override disappeared
> from
> gcs.override.csv is http://trac.osgeo.org/geotiff/changeset/1819
> The comment of the commit seems to suggest that the intent was just to do a
> refactoring on how overrides are handled, and an override was actually
> defined
> in the new file 1766
>
>
> ####################################################################
> #
> # CH1903: Per http://bugzilla.remotesensing.org/show_bug.cgi?id=957
> #
> 4149,1766
>
> So it refers to coordinate operation 1766 which is defined in
> coordinate_operation.csv as :
>
> OGRFeature(coordinate_operation):751
>   coord_op_code (String) = 1766
>   coord_op_name (String) = CH1903 to WGS 84 (2)
>   coord_op_type (String) = transformation
>   source_crs_code (String) = 4149
>   target_crs_code (String) = 4326
>   coord_tfm_version (String) = BfL-CH 2
>   coord_op_variant (String) = 2
>   area_of_use_code (String) = 1286
>   coord_op_scope (String) = Accuracy 1.5 metres.
>   coord_op_accuracy (String) = 1.5
>   coord_op_method_code (String) = 9603
>   uom_code_source_coord_diff (String) =
>   uom_code_target_coord_diff (String) =
>   remarks (String) = These parameters are derive from CH1903+ to ETRS89
> (code
> 1647) and are used at lesser precision from CH1903 to WGS 84 as an
> approximation which is within the accuracy of the distortions in the CH1903
> network. Replaces CH1903 to WGS 84 (1) (code 1753).
>   information_source (String) = Bundesamt f?r Landestopographie. Aufbau der
> Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und
> Bezugsrahmen. L+T 1999.
>   data_source (String) = OGP
>   revision_date (String) = 2007/03/22
>   change_id (String) = 2001.390 2006.992 2007.043
>   show_operation (String) = 1
>   deprecated (String) = 0
>
> And whose parameter values are in coordinate_operation_parameter_value.csv
> :
>
> 1766,9603,8605,674.4,,9001
> 1766,9603,8606,15.1,,9001
> 1766,9603,8607,405.3,,9001
>
> So this explains why you get the values you see now.
>
> I'm not sure if the intent was really to change the override with the
> refactoring or if it is more or less accidental, but IMHO, it doesn't look
> so
> wrong since coord_op_code=1766 aboce description is "CH1903 to WGS 84" and
> "These parameters are derive from CH1903+ to ETRS89 (code 1647) and are
> used
> at lesser precision from CH1903 to WGS 84 as an approximation which is
> within
> the accuracy of the distortions in the CH1903 network."
>
> Digging more, the previous override you suggest reintroducing is :
>
> OGRFeature(coordinate_operation):494
>   coord_op_code (String) = 1509
>   coord_op_name (String) = CH1903+ to CHTRF95 (1)
>   coord_op_type (String) = transformation
>   source_crs_code (String) = 4150
>   target_crs_code (String) = 4151
>   coord_tfm_version (String) = BfL-CH
>   coord_op_variant (String) = 1
>   area_of_use_code (String) = 1286
>   coord_op_scope (String) = For applications to an accuracy of 0.1 metres.
>   coord_op_accuracy (String) = 0.1
>   coord_op_method_code (String) = 9603
>   uom_code_source_coord_diff (String) =
>   uom_code_target_coord_diff (String) =
>   remarks (String) = This transformation is also given as CH1903+ to ETRS89
> (1) (code 1647). CHTRF95 is a realisation of ETRS89. May be taken as
> approximate transformation CH1903+ to WGS 84 - see code 1676.
>   information_source (String) = Bundesamt f?r Landestopographie. Aufbau der
> Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und
> Bezugsrahmen. L+T 1999.
>   data_source (String) = OGP
>   revision_date (String) = 1999/10/20
>   change_id (String) =
>   show_operation (String) = 1
>   deprecated (String) = 0
>
> With values :
>
> 1509,9603,8605,674.374,,9001
> 1509,9603,8606,15.056,,9001
> 1509,9603,8607,405.346,,9001
>
> So basically you would want datum shift for CH1903+ to be applied as well
> to
> CH1903.
>
> GDAL actually has the right values for EPSG:4150 / CH1903+ :
>
> $ gdalsrsinfo EPSG:4150
>
> PROJ.4 : '+proj=longlat +ellps=bessel
> +towgs84=674.374,15.056,405.346,0,0,0,0
> +no_defs '
>
> OGC WKT :
> GEOGCS["CH1903+",
>     DATUM["CH1903+",
>         SPHEROID["Bessel 1841",6377397.155,299.1528128,
>             AUTHORITY["EPSG","7004"]],
>         TOWGS84[674.374,15.056,405.346,0,0,0,0],
>         AUTHORITY["EPSG","6150"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4150"]]
>
> I'm not qualified enough to know if it is always appropriate to apply
> CH1903+
> datum shift for CH1903 and unfortunately the bugzilla ticket is no longer
> available (I think the bugzilla database crashed and couldn't be
> recovered).
> But looking at 1.4 "transformation parameters CHTRS95/ETRS89
> ? CH1903+" of the link you provide
>
> http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys/refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojectionen.pdf
> , "Without any restrictions they can also be used for the system ETRS89 and
> for many applications also for CH1903. But in the case of CH1903, one must
> be
> aware that because of the local distortions of this network the transformed
> coordinates can be false by up to 1.6 meters compared to the official
> coordinates in CH1903", which would seem to suggest that the CH1903+
> parameters don't necessarily apply to CH1903.
>
> If you can still think the previous override should be applied in the
> CH1903==>WGS84 case, it would be great to find clear references about that.
>
> Isn't your issue that datasets should be referenced as EPSG:4150 instead of
> EPSG:4149 ?
>
> Even
>
> Le mardi 06 janvier 2015 14:02:33, Schmid Andreas a ?crit :
> > Help? Anyone?
> >
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: gdal-dev-bounces at lists.osgeo.org
> > [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Schmid Andreas
> > Gesendet: Mittwoch, 17. Dezember 2014 17:29
> > An: gdal-dev at lists.osgeo.org
> > Betreff: [gdal-dev] Request for reintroduction of an override line into
> > gcs.override.csv
> >
> > Hi
> >
> > I hope this is the right mailing list to ask the following:
> >
> > I've realized that in GDAL 1.9.2 the "towgs84" parameters of the Swiss
> > "CH1903" GCS (EPSG:4149) appear incorrectly. According to [1], they
> should
> > be 674.374,15.056,405.346,,,,
> > instead of
> > 674.4,15.1,405.3,,,,
> > It seems that the origin of these rounded values is the EPSG database. In
> > order to override them, I had to add the following line to the
> > gcs.override.csv file:
> >
> 4149,CH1903,6149,CH1903,6149,9122,7004,8901,1,0,6422,1766,1,9603,674.374,1
> > 5.056,405.346,,,,
> >
> > The same (almost same) line used to be included in the gcs.override.csv
> > file until GDAL 1.7.3: [2] Would it be possible to re-include this
> > override line into the gcs.override.csv?
> >
> > Thank you,
> > Andy
> >
> >
> > [1]: Formulas and constants for the calculation of the Swiss conformal
> > cylindrical projection and for the transformation between coordinate
> > systems, chapter 1.4:
> >
> http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys
> >
> /refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojec
> > tionen.pdf [2]:
> >
> https://github.com/OSGeo/gdal/blob/733829bf6f88530a92c25457a0f4d0ef0eb5f03
> > a/gdal/data/gcs.override.csv#L29-L31
> >
> >
> > Andreas Schmid
> > GIS-Informatiker
> >
> >
> > Amt f?r Geoinformation
> > SO!GIS-Koordination
> > R?tistrasse 4
> > 4501 Solothurn
> >
> > Telefon +41 32 627 75 93
> > Telefax +41 32 627 75 98
> > andreas.schmid at bd.so.ch
> > http://www.so.ch
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150107/22fa4b89/attachment-0001.html>

From wxx114 at 163.com  Wed Jan  7 23:04:00 2015
From: wxx114 at 163.com (Rebecca)
Date: Wed, 7 Jan 2015 23:04:00 -0800 (PST)
Subject: [gdal-dev] misssing field width information when getting OGRLayer
	form filegdb
Message-ID: <1420700640127-5180487.post@n6.nabble.com>

I get ogrlayer from fielgdb , when I try to get the field information such as
field name, field width, field type, I found the field name and field type
is right , but field width is zero when the field type is OFTString. 
   Does the filegdb lost the field width information in gdal-filegdb?

OGRDataSource *pOGRDS...
OGRLayer *pLayer=pOGRDS->GetLayerByName(filename.c_str());
for(int i=0;i<pLayer->GetLayerDefn()->GetFieldCount();i++)
{
	OGRFieldDefn *pDef=pLayer->GetLayerDefn()->GetFieldDefn(i);
	std::string name=pDef->GetNameRef();
	int width=pDef->GetWidth(); //width =0

}



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/misssing-field-width-information-when-getting-OGRLayer-form-filegdb-tp5180487.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan  8 04:22:47 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 8 Jan 2015 12:22:47 +0000 (UTC)
Subject: [gdal-dev] OGR can't create PCIDSK polygon file
References: <1420635312592-5180339.post@n6.nabble.com>
Message-ID: <loom.20150108T125644-581@post.gmane.org>

liminlu0314 <liminlu0314 <at> 163.com> writes:

> 
> OGR cannot create the PCIDSK polygon vector data, Found in the GDAL library
> code is not achieved, I realize part of the code, surface vector data can
> create PCIDSK type.
> The modified code is as follows
...

I believe that the developers would like if you could make a ticket to
http://trac.osgeo.org/gdal/.

Patches seem to often a title beginning as [PATCH]... and the patch itself
contains the changes parts (diff). An example:
http://trac.osgeo.org/gdal/ticket/5504

I also feel that a new autotest case to be added to
http://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/pcidsk.py would
be appreciated.

That way your work will have better chances to be applied to the code base.

-Jukka Rahkonen-





From even.rouault at spatialys.com  Thu Jan  8 05:03:46 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 8 Jan 2015 14:03:46 +0100
Subject: [gdal-dev] misssing field width information when getting
	OGRLayer form filegdb
In-Reply-To: <1420700640127-5180487.post@n6.nabble.com>
References: <1420700640127-5180487.post@n6.nabble.com>
Message-ID: <201501081403.46160.even.rouault@spatialys.com>

Le jeudi 08 janvier 2015 08:04:00, Rebecca a ?crit :
> I get ogrlayer from fielgdb , when I try to get the field information such
> as field name, field width, field type, I found the field name and field
> type is right , but field width is zero when the field type is OFTString.
> Does the filegdb lost the field width information in gdal-filegdb?
> 
> OGRDataSource *pOGRDS...
> OGRLayer *pLayer=pOGRDS->GetLayerByName(filename.c_str());
> for(int i=0;i<pLayer->GetLayerDefn()->GetFieldCount();i++)
> {
> 	OGRFieldDefn *pDef=pLayer->GetLayerDefn()->GetFieldDefn(i);
> 	std::string name=pDef->GetNameRef();
> 	int width=pDef->GetWidth(); //width =0
> 
> }

Digging a bit, the code in the driver that should set the width is commented. 
It appears those lines are mine. Not sure why I let it commented. I somehow 
remember this was due to oddities with integer fields where the width is 
probably reported in terms of number of bytes for the binary representation 
rather than in terms of the width for the decimal representation. But for 
strings it could probably be reported. Perhaps worth a ticket in Trac.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Thu Jan  8 06:50:43 2015
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 08 Jan 2015 10:50:43 -0400
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <54AE9943.1020406@gatewaygeomatics.com>

I've also updated OSGeo's Officers page[1] with Even's info, for the 
GDAL project.

[1] http://www.osgeo.org/content/foundation/board_and_officers.html

-jeff



On 2015-01-05 4:45 PM, Frank Warmerdam wrote:
> Folks,
>
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>
> +1 Frank
>
> ---
>
> For at least a couple years, if not longer, Even has been the leading
> contributor to the GDAL project.  As we start a fresh year in the middle
> of the 2010s I think it is time for us to formally acknowledge Even as
> the project leader.
>
> The PMC chair doesn't really have many responsibilities, beyond ensuring
> that the PMC operates in an orderly fashion and acting as liason to the
> OSGeo board when needed.  But it is also a recognition of Even's great
> work, technically and increasingly in other outward facing efforts such
> as his upcoming presentation on GDAL at FOSS4G NA in March.
>
> I am very pleased to have "my" project pass into his capable hands, and
> I trust his instincts on technical and collaborative matters.
>
> I will continue on as a member of the PMC and commiters list of course.
>
> Best regards,
> Frank
> --

From warmerdam at pobox.com  Thu Jan  8 07:09:27 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 8 Jan 2015 07:09:27 -0800
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
Message-ID: <CA+YzLBc3R5nRYPEBj3QRGh1x4sOiyOSORESMryAMg6Gx_tG8sQ@mail.gmail.com>

Folks,

The motion passes with support from Frank, Tamas, Howard and Daniel.

Thanks for taking this on Even!

Best regards,
Frank


On Mon, Jan 5, 2015 at 12:45 PM, Frank Warmerdam <warmerdam at pobox.com>
wrote:

> Folks,
>
> Motion: Appoint Even Roualt as GDAL Project Management Committee Chair
>
> +1 Frank
>
> ---
>
> For at least a couple years, if not longer, Even has been the leading
> contributor to the GDAL project.  As we start a fresh year in the middle of
> the 2010s I think it is time for us to formally acknowledge Even as the
> project leader.
>
> The PMC chair doesn't really have many responsibilities, beyond ensuring
> that the PMC operates in an orderly fashion and acting as liason to the
> OSGeo board when needed.  But it is also a recognition of Even's great
> work, technically and increasingly in other outward facing efforts such as
> his upcoming presentation on GDAL at FOSS4G NA in March.
>
> I am very pleased to have "my" project pass into his capable hands, and I
> trust his instincts on technical and collaborative matters.
>
> I will continue on as a member of the PMC and commiters list of course.
>
> Best regards,
> Frank
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150108/6e0bf3c0/attachment.html>

From even.rouault at spatialys.com  Thu Jan  8 07:19:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 8 Jan 2015 16:19:35 +0100
Subject: [gdal-dev] Motion: Appoint Even Rouault PMC Chair
In-Reply-To: <CA+YzLBc3R5nRYPEBj3QRGh1x4sOiyOSORESMryAMg6Gx_tG8sQ@mail.gmail.com>
References: <CA+YzLBdbK_COr6NfMtAFsRcLmaFooKF_prGy1ckSnGtAvqqDsw@mail.gmail.com>
	<CA+YzLBc3R5nRYPEBj3QRGh1x4sOiyOSORESMryAMg6Gx_tG8sQ@mail.gmail.com>
Message-ID: <201501081619.36168.even.rouault@spatialys.com>

Le jeudi 08 janvier 2015 16:09:27, Frank Warmerdam a ?crit :
> Folks,
> 
> The motion passes with support from Frank, Tamas, Howard and Daniel.

And Jukka as well.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Andreas.Schmid at bd.so.ch  Thu Jan  8 07:57:45 2015
From: Andreas.Schmid at bd.so.ch (Schmid Andreas)
Date: Thu, 8 Jan 2015 15:57:45 +0000
Subject: [gdal-dev] Request for reintroduction of an override line into
 gcs.override.csv
In-Reply-To: <CA+YzLBcu_Y8WOfLn-huxLh9eEb0hLP_9=EgtozOJXeuQWPJLbA@mail.gmail.com>
References: <50FFCD4FD2A0A948A16AFC67888052C637F34D3A@srsofaioi16256.verw.rootso.org>
	<CA+YzLBcu_Y8WOfLn-huxLh9eEb0hLP_9=EgtozOJXeuQWPJLbA@mail.gmail.com>
Message-ID: <50FFCD4FD2A0A948A16AFC67888052C637F35FA5@srsofaioi16256.verw.rootso.org>

Frank,

Ah, now I understand how the new approach works.
OK, so I'll file a libgeotiff ticket. I'm pretty confident that it won't be a big deal, as in the datum_shift.csv file the parameters I propose already appear as a non preferred datum shift parameter set.

Thanks a lot,
Andy




Von: fwarmerdam at gmail.com [mailto:fwarmerdam at gmail.com] Im Auftrag von Frank Warmerdam
Gesendet: Mittwoch, 7. Januar 2015 18:52
An: Schmid Andreas
Cc: gdal-dev at lists.osgeo.org
Betreff: Re: [gdal-dev] Request for reintroduction of an override line into gcs.override.csv

Schmid,

If you file a ticket against libgeotiff (http://trac.osgeo.org/geotiff/) capturing the details of the above discussion, I'll review and consider reapplying the override.

I haven't looked into this issue in detail yet, but I'm concerned you want to apply a particular transform to CH1903+ that EPSG does not offer as one of the routes to WGS84. I have tried to move to the new approach where overrides are almost always just given priority to a particular EPSG transformation over others rather than providing transformations not included in the EPSG set.? Hopefully that won't be the case here.

Best regards,
Frank


On Wed, Jan 7, 2015 at 9:43 AM, Schmid Andreas <Andreas.Schmid at bd.so.ch> wrote:
Even,

Thank you a lot for digging so deep. It seems indeed quite tricky.

>I'm not sure if the intent was really to change the override with the
>refactoring or if it is more or less accidental

I also realized that it was during a refactoring that this (and other) overrides were removed. So I rather felt like the removal was accidental. (Or that the overrides are solved in a different way now, but I couldn't find out how.)

>So basically you would want datum shift for CH1903+ to be applied as well to
>CH1903.

Exactly. The reason is: Even though the transformed coordinates can be false up to 1.6 meters when using this datum shift, they won't become any better when using the rounded datum shift values. However they will become worse in a way, as using the rounded datum shift values adds some additional noise to the transformation results. For example, performing a transformation from CH1903+ to CH1903 should not modify the coordinates at all. But working with the current two different sets of parameters modifies the coordinates slightliy, which is not correct and may confuse the end user.

>If you can still think the previous override should be applied in the
>CH1903==>WGS84 case, it would be great to find clear references about that.

I unfortunately couldn't find a more clear reference until now than the document from swisstopo already given. But to sum it up, the following points indicate that applying the previous override again would be reasonable:
* according to an older version of the gcs.override.csv file, the override obviously has been approved at some point in the past
* it rather looks like the removal of the override was accidental
* even if the transformed coordinates can be false up to 1.6 meters, transformations from CH1903+ to CH1903 should not arbitrarily modify the coordinates in order to not confuse the end user
* as the transformed coordinates can be false up to 1.6 meters anyway, we don't loose anything by using the unrounded parameters

>Isn't your issue that datasets should be referenced as EPSG:4150 instead of
>EPSG:4149 ?

Not really. While this would basically solve the issue, referencing EPSG:4150 instead of EPSG:4149 is wrong from a systematic point of view.


Best regards,
Andy





-----Urspr?ngliche Nachricht-----
Von: Even Rouault [mailto:even.rouault at spatialys.com]
Gesendet: Dienstag, 6. Januar 2015 15:08
An: gdal-dev at lists.osgeo.org
Cc: Schmid Andreas
Betreff: Re: [gdal-dev] Request for reintroduction of an override line into gcs.override.csv

Andreas,

Datum shifts are always tricky. I've dug up that issue a bit.

The GDAL EPSG related files are coming from libgeotiff, from where they are
synchronized with at some time (when a new EPSG database is imported
typically). The change in libgeotiff that made the override disappeared from
gcs.override.csv is http://trac.osgeo.org/geotiff/changeset/1819
The comment of the commit seems to suggest that the intent was just to do a
refactoring on how overrides are handled, and an override was actually defined
in the new file 1766


####################################################################
#
# CH1903: Per http://bugzilla.remotesensing.org/show_bug.cgi?id=957
#
4149,1766

So it refers to coordinate operation 1766 which is defined in
coordinate_operation.csv as :

OGRFeature(coordinate_operation):751
? coord_op_code (String) = 1766
? coord_op_name (String) = CH1903 to WGS 84 (2)
? coord_op_type (String) = transformation
? source_crs_code (String) = 4149
? target_crs_code (String) = 4326
? coord_tfm_version (String) = BfL-CH 2
? coord_op_variant (String) = 2
? area_of_use_code (String) = 1286
? coord_op_scope (String) = Accuracy 1.5 metres.
? coord_op_accuracy (String) = 1.5
? coord_op_method_code (String) = 9603
? uom_code_source_coord_diff (String) =
? uom_code_target_coord_diff (String) =
? remarks (String) = These parameters are derive from CH1903+ to ETRS89 (code
1647) and are used at lesser precision from CH1903 to WGS 84 as an
approximation which is within the accuracy of the distortions in the CH1903
network. Replaces CH1903 to WGS 84 (1) (code 1753).
? information_source (String) = Bundesamt f?r Landestopographie. Aufbau der
Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und
Bezugsrahmen. L+T 1999.
? data_source (String) = OGP
? revision_date (String) = 2007/03/22
? change_id (String) = 2001.390 2006.992 2007.043
? show_operation (String) = 1
? deprecated (String) = 0

And whose parameter values are in coordinate_operation_parameter_value.csv :

1766,9603,8605,674.4,,9001
1766,9603,8606,15.1,,9001
1766,9603,8607,405.3,,9001

So this explains why you get the values you see now.

I'm not sure if the intent was really to change the override with the
refactoring or if it is more or less accidental, but IMHO, it doesn't look so
wrong since coord_op_code=1766 aboce description is "CH1903 to WGS 84" and
"These parameters are derive from CH1903+ to ETRS89 (code 1647) and are used
at lesser precision from CH1903 to WGS 84 as an approximation which is within
the accuracy of the distortions in the CH1903 network."

Digging more, the previous override you suggest reintroducing is :

OGRFeature(coordinate_operation):494
? coord_op_code (String) = 1509
? coord_op_name (String) = CH1903+ to CHTRF95 (1)
? coord_op_type (String) = transformation
? source_crs_code (String) = 4150
? target_crs_code (String) = 4151
? coord_tfm_version (String) = BfL-CH
? coord_op_variant (String) = 1
? area_of_use_code (String) = 1286
? coord_op_scope (String) = For applications to an accuracy of 0.1 metres.
? coord_op_accuracy (String) = 0.1
? coord_op_method_code (String) = 9603
? uom_code_source_coord_diff (String) =
? uom_code_target_coord_diff (String) =
? remarks (String) = This transformation is also given as CH1903+ to ETRS89
(1) (code 1647). CHTRF95 is a realisation of ETRS89. May be taken as
approximate transformation CH1903+ to WGS 84 - see code 1676.
? information_source (String) = Bundesamt f?r Landestopographie. Aufbau der
Landesvermessung der Schweiz 'LV95' Teil 3: Terrestrische Bezugssysteme und
Bezugsrahmen. L+T 1999.
? data_source (String) = OGP
? revision_date (String) = 1999/10/20
? change_id (String) =
? show_operation (String) = 1
? deprecated (String) = 0

With values :

1509,9603,8605,674.374,,9001
1509,9603,8606,15.056,,9001
1509,9603,8607,405.346,,9001

So basically you would want datum shift for CH1903+ to be applied as well to
CH1903.

GDAL actually has the right values for EPSG:4150 / CH1903+ :

$ gdalsrsinfo EPSG:4150

PROJ.4 : '+proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0
+no_defs '

OGC WKT :
GEOGCS["CH1903+",
? ? DATUM["CH1903+",
? ? ? ? SPHEROID["Bessel 1841",6377397.155,299.1528128,
? ? ? ? ? ? AUTHORITY["EPSG","7004"]],
? ? ? ? TOWGS84[674.374,15.056,405.346,0,0,0,0],
? ? ? ? AUTHORITY["EPSG","6150"]],
? ? PRIMEM["Greenwich",0,
? ? ? ? AUTHORITY["EPSG","8901"]],
? ? UNIT["degree",0.0174532925199433,
? ? ? ? AUTHORITY["EPSG","9122"]],
? ? AUTHORITY["EPSG","4150"]]

I'm not qualified enough to know if it is always appropriate to apply CH1903+
datum shift for CH1903 and unfortunately the bugzilla ticket is no longer
available (I think the bugzilla database crashed and couldn't be recovered).
But looking at 1.4 "transformation parameters CHTRS95/ETRS89
? CH1903+" of the link you provide
http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys/refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojectionen.pdf
, "Without any restrictions they can also be used for the system ETRS89 and
for many applications also for CH1903. But in the case of CH1903, one must be
aware that because of the local distortions of this network the transformed
coordinates can be false by up to 1.6 meters compared to the official
coordinates in CH1903", which would seem to suggest that the CH1903+
parameters don't necessarily apply to CH1903.

If you can still think the previous override should be applied in the
CH1903==>WGS84 case, it would be great to find clear references about that.

Isn't your issue that datasets should be referenced as EPSG:4150 instead of
EPSG:4149 ?

Even

Le mardi 06 janvier 2015 14:02:33, Schmid Andreas a ?crit :
> Help? Anyone?
>
>
> -----Urspr?ngliche Nachricht-----
> Von: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] Im Auftrag von Schmid Andreas
> Gesendet: Mittwoch, 17. Dezember 2014 17:29
> An: gdal-dev at lists.osgeo.org
> Betreff: [gdal-dev] Request for reintroduction of an override line into
> gcs.override.csv
>
> Hi
>
> I hope this is the right mailing list to ask the following:
>
> I've realized that in GDAL 1.9.2 the "towgs84" parameters of the Swiss
> "CH1903" GCS (EPSG:4149) appear incorrectly. According to [1], they should
> be 674.374,15.056,405.346,,,,
> instead of
> 674.4,15.1,405.3,,,,
> It seems that the origin of these rounded values is the EPSG database. In
> order to override them, I had to add the following line to the
> gcs.override.csv file:
> 4149,CH1903,6149,CH1903,6149,9122,7004,8901,1,0,6422,1766,1,9603,674.374,1
> 5.056,405.346,,,,
>
> The same (almost same) line used to be included in the gcs.override.csv
> file until GDAL 1.7.3: [2] Would it be possible to re-include this
> override line into the gcs.override.csv?
>
> Thank you,
> Andy
>
>
> [1]: Formulas and constants for the calculation of the Swiss conformal
> cylindrical projection and for the transformation between coordinate
> systems, chapter 1.4:
> http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys
> /refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojec
> tionen.pdf [2]:
> https://github.com/OSGeo/gdal/blob/733829bf6f88530a92c25457a0f4d0ef0eb5f03
> a/gdal/data/gcs.override.csv#L29-L31
>
>
> Andreas Schmid
> GIS-Informatiker
>
>
> Amt f?r Geoinformation
> SO!GIS-Koordination
> R?tistrasse 4
> 4501 Solothurn
>
> Telefon +41 32 627 75 93
> Telefax +41 32 627 75 98
> andreas.schmid at bd.so.ch
> http://www.so.ch
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Spatialys - Geospatial professional services
http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From wxx114 at 163.com  Thu Jan  8 23:47:25 2015
From: wxx114 at 163.com (Rebecca)
Date: Thu, 8 Jan 2015 23:47:25 -0800 (PST)
Subject: [gdal-dev] misssing field width information when getting
 OGRLayer form filegdb
In-Reply-To: <201501081403.46160.even.rouault@spatialys.com>
References: <1420700640127-5180487.post@n6.nabble.com>
	<201501081403.46160.even.rouault@spatialys.com>
Message-ID: <1420789645298-5180723.post@n6.nabble.com>

Even 

  only the field which type is string has width attribute, so you mean it's
impossible to get field width by OGRFieldDefn::GetWidth() function. Then it
is impossiable to convert vector data from filegdb to shp/mif accurately, 
because the field width in filegdb is zero, then the output layer field
width will be 254.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/misssing-field-width-information-when-getting-OGRLayer-form-filegdb-tp5180487p5180723.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan  9 00:33:04 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 9 Jan 2015 08:33:04 +0000 (UTC)
Subject: [gdal-dev] Affine parameters in the gdal datamodel doc
Message-ID: <loom.20150109T090214-331@post.gmane.org>

Hi,

I am trying to understand the geotransform parameters by reading
http://www.gdal.org/gdal_datamodel.html but I am confused. In the Affine
GeoTransform section there are formulas

    Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
    Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)

The latter formula feels odd to me and I think that it should rather be

    Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
    Ygeo = GT(3) + Ypixel*GT(5) + Xline*GT(4)

That way I could understand at least how to get Y pixel when there is no
rotation involved.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Fri Jan  9 01:39:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Jan 2015 10:39:00 +0100
Subject: [gdal-dev] Affine parameters in the gdal datamodel doc
In-Reply-To: <loom.20150109T090214-331@post.gmane.org>
References: <loom.20150109T090214-331@post.gmane.org>
Message-ID: <201501091039.01090.even.rouault@spatialys.com>

Le vendredi 09 janvier 2015 09:33:04, Jukka Rahkonen a ?crit :
> Hi,
> 
> I am trying to understand the geotransform parameters by reading
> http://www.gdal.org/gdal_datamodel.html but I am confused. In the Affine
> GeoTransform section there are formulas
> 
>     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
> 
> The latter formula feels odd to me and I think that it should rather be
> 
>     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>     Ygeo = GT(3) + Ypixel*GT(5) + Xline*GT(4)

Jukka,

That would look more odd to me ;-) since it would seem to add 2 new variables 
to the equations (but perhaps that was just a typo, and you wanted only to 
switch the 2 terms of the addition ?)
In the original equation, my guess is that Xpixel means "X or pixel or column" 
and Yline means "Y or line or row", according to the terminology people use.

The equations are just the result of the standard matrix multiplication for a 
2D affine transformation : 

[   1     ]          [   1           0         0       ]       [    1      ]
[  Xgeo ]   =    [   GT(0)   GT(1)   GT(2) ]  *    [ Xpixel  ]
[  Ygeo ]          [   GT(3)   GT(4)   GT(5) ]  *    [ Yline    ]

(usually you put the 1 at the bottom and right of the matrices, but that's 
only a presentation change)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan  9 04:05:31 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 9 Jan 2015 12:05:31 +0000
Subject: [gdal-dev] Affine parameters in the gdal datamodel doc
Message-ID: <9152e392d1694340adb19ae732de9649@C119S212VM022.msvyvi.vaha.local>

Even Rouault wrote:

>> Hi,
>> 
>> I am trying to understand the geotransform parameters by reading 
>> http://www.gdal.org/gdal_datamodel.html but I am confused. In the 
>> Affine GeoTransform section there are formulas
>> 
>>     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>>     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
>> 
>> The latter formula feels odd to me and I think that it should rather 
>> be
>> 
>>     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>>     Ygeo = GT(3) + Ypixel*GT(5) + Xline*GT(4)

> Jukka,

> That would look more odd to me ;-) since it would seem to add 2 new variables to the equations (but perhaps that was just a typo, and you wanted only to switch the 2 terms of the addition ?) In the original equation, my guess is that Xpixel means "X or pixel or column" 
and Yline means "Y or line or row", according to the terminology people use.

> The equations are just the result of the standard matrix multiplication for a 2D affine transformation : 

> [   1     ]          [   1           0         0       ]       [    1      ]
> [  Xgeo ]   =    [   GT(0)   GT(1)   GT(2) ]  *    [ Xpixel  ]
> [  Ygeo ]          [   GT(3)   GT(4)   GT(5) ]  *    [ Yline    ]

> (usually you put the 1 at the bottom and right of the matrices, but that's only a presentation change)

Ok, it was just a combination of lazy reading and lazy thinking from my side:

- For some reason I was unconsciously thinking that if "Xpixel" means the location of a pixel in left to right direction then there should be another parameter "Ypixel" for defining the location in top to bottom direction. However, this parameter is called as "Yline".
- Because I did not understand the meaning of "Yline"  I did not bother to think about it at all.
- As the formula for calculating X coordinate has an order
 (initial x) + (pixel size(x) * pixel count x) + (correction term of x because of rotation) my brain believed that the formula for Y should follow the same order. Actually it is using another order which keeps the parameter index numbers nicely in order 0, 1, 2, 3, 4, 5
(initial y) +  (correction term of y because of rotation) + (pixel size(y) * pixel count y)

I am not sure if there is anything to learn about this. Programmers may think a bit differently than end users about what is logical but I was lurking the developers document even I am just a user so I can only accuse myself.

-Jukka Rahkonen-

From aj_bresler at yahoo.co.uk  Fri Jan  9 13:54:22 2015
From: aj_bresler at yahoo.co.uk (Bresler Johan)
Date: Fri, 9 Jan 2015 21:54:22 +0000 (UTC)
Subject: [gdal-dev] gdal_rasterize - blending option
Message-ID: <583541748.63911.1420840462600.JavaMail.yahoo@jws11109.mail.ir2.yahoo.com>

Hi,
I sometimes need to burn vector data on a raster and use?gdal_rasterize for this task.How ever there is times that I would like to "blend" / "multiply" polygons vector data (color) with the existing raster.
I had a look in the code and noted there is a GDALRasterMergeAlg option with a "ADD" from?gdalrasterize.cpp onward. Default "REPLACE".The "ADD" option is not available from gdal_rasterize.?
I hope to get the time next week to compile GDAL and test the "ADD" option from gdal_rasterize to see if this is what I am looking for.
But if I can get some advice on this I would appreciate it.
RegardsAJ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150109/d0c5d12c/attachment.html>

From chsnow123 at gmail.com  Sun Jan 11 09:11:53 2015
From: chsnow123 at gmail.com (chris snow)
Date: Sun, 11 Jan 2015 17:11:53 +0000
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
Message-ID: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>

I have been informed by a colleague attempting to convert a 1.4GB TIF file
using gdal_polygonize.py on a g2.2xlarge Amazon instance (8 vCPU, 15gb RAM)
that the processing took over 2 weeks running constantly.   I have also
been told that the same conversion using commercial tooling was completed
in a few minutes.

As a result, I'm currently investigating to see if there is an opportunity
for improving the performance of the gdal_polygonize.py TIF to JSON
conversion.  I have run a strace while attempting the same conversion, but
stopped after a few hours (the gdal_polygonize.py status indicator was
showing between 5% and 7.5% complete).  The strace results are:


% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 99.40    2.348443           9    252474           read
  0.18    0.004139           3      1554           lseek
  0.12    0.002878           7       439       269 open
  0.10    0.002447          20       123        87 stat
  0.10    0.002429           5       459           mmap
  0.02    0.000561           3       208           munmap
  0.02    0.000529           2       216           fstat
  0.02    0.000504           3       188           mprotect
  0.01    0.000314           2       188           brk
  0.01    0.000173          29         6         5 unlink
  0.00    0.000109          11        10           getdents
  0.00    0.000098           1        67           rt_sigaction
  0.00    0.000000           0         4           write
  0.00    0.000000           0       173           close
  0.00    0.000000           0        12           lstat
  0.00    0.000000           0         1           rt_sigprocmask
  0.00    0.000000           0         2           rt_sigreturn
  0.00    0.000000           0         5         1 ioctl
  0.00    0.000000           0        91        91 access
  0.00    0.000000           0        20           mremap
  0.00    0.000000           0         5         3 execve
  0.00    0.000000           0         1           getcwd
  0.00    0.000000           0         4         2 readlink
  0.00    0.000000           0         1           getrlimit
  0.00    0.000000           0         1           getuid
  0.00    0.000000           0         1           getgid
  0.00    0.000000           0         1           geteuid
  0.00    0.000000           0         1           getegid
  0.00    0.000000           0         2           arch_prctl
  0.00    0.000000           0         4         1 futex
  0.00    0.000000           0         1           set_tid_address
  0.00    0.000000           0         5           openat
  0.00    0.000000           0         1           set_robust_list
------ ----------- ----------- --------- --------- ----------------
100.00    2.362624                256268       459 total


FYI - I performed my test inside a vagrant virtualbox guest with 30GB
memory and 8 CPUS assigned to the guest.

It appears that the input TIF file is read in small pieces at a time.

I have shared the results here in case any one else is looking at
optimising the performance of the conversion or already has ideas where the
code can be optimised.

Best regards,

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150111/bc9d3d47/attachment.html>

From gdal at stripfamily.net  Sun Jan 11 10:31:40 2015
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Jan 2015 11:31:40 -0700
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>
References: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>
Message-ID: <54B2C18C.7090208@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150111/092128c9/attachment.html>

From paul.malm at saabgroup.com  Sun Jan 11 23:42:50 2015
From: paul.malm at saabgroup.com (Malm Paul)
Date: Mon, 12 Jan 2015 07:42:50 +0000
Subject: [gdal-dev] upper-/lower-case for names in DNC-charts structures
	(VPF).
Message-ID: <4e77f84032be4a198e12a49e68e3577d@corpappl844.corp.saab.se>

Hi, list!
We're trying to read a DNC chart (VPF format) in a Linux OS. The OGR driver reports that files are not found. It works in Windows.
The problems seems to be caseing of the names, if we recursively rename the file paths to lowercase it works.  But it does not work with the original files.
We have searched the "VPF" files and can see that the referenced filenames is no different from the filenames on disc, does the OGR driver force names that are read in the files to be lower case?

Our biggest problem is that the files are read directly from CD and can't be renamed prior reading.
Does anyone have a solution for this?
Kind regards,
Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150112/5d49aecd/attachment.html>

From chsnow123 at gmail.com  Mon Jan 12 02:07:56 2015
From: chsnow123 at gmail.com (chris snow)
Date: Mon, 12 Jan 2015 10:07:56 +0000
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <54B2C18C.7090208@stripfamily.net>
References: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>
	<54B2C18C.7090208@stripfamily.net>
Message-ID: <CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>

Hi David,

Thanks for your response.  I have a little more information since
feeding your response to the project team:

"The tif file is around 1.4GB as you noted and the data is similar to
that of the result of an image classification where each pixel value
is in a range between (say) 1-5. After a classification this image is
usually exported as a vector file (EVF of Shapefile) but in this case
we want to use geojson. This has taken both Mark and myself weeks to
complete with gdal_polygonize as you noted.

I think an obvious way to speed this up would be threading by breaking
the tiff file in tiles (say 1024x1024) and spreading these over the
available cores, then there would need to be a way to dissolve the
tile boundaries to complete the polygons as we would not want obvious
tile lines."

Does this help?

Many thanks,

Chris

On 11 January 2015 at 18:31, David Strip <gdal at stripfamily.net> wrote:
> I'm surprised at your colleague's experience. We've run some polygonize on
> large images and have never had this problem. The g2.2xlarge instance is
> overkill in the sense that the code is not multi-threaded, so the extra CPUs
> don't help. Also, as you have already determined, the image is read in small
> chunks, so you don't need large buffers for the image. But two weeks make no
> sense. In fact, your run shows that the job reaches 5% completion in a
> couple of hours.
>
> The reason for so many reads (though 2.3 seconds out of "a few hours" is
> negligible overhead) is that the algorithm operates on a pair of adjacent
> raster lines at a time. This allows processing of extremely large images
> with very modest memory requirements. It's been a while since I've looked at
> the code, but from my recollection, the algorithm should scale approximately
> linearly in the number of pixels and polygons in the image. Far more
> important to the run-time is the nature of the image itself. If the input is
> something like a satellite photo, your output can be orders of magnitude
> larger than the input image, as you can get a polygon for nearly every
> pixel. If the output format is a verbose format like KML or JSON, the number
> of bytes to describe each pixel is large. How big was the output in your
> colleague's run?
>
> The algorithm runs in two passes. If I'm reading the code right, the
> progress indicator is designed to show 10% at the end of the first pass. You
> will have a better estimate of the run-time on your VM by noting the elapsed
> time to 10%, then the elapsed time from 10% to 20%.
>
> Also, tell us more about the image. Is it a continuous scale raster - eg, a
> photo? One way to significantly reduce the output size (and hence runtime),
> as well as to get a more meaningful output in most cases, is to posterize
> the image into a small number of colors/tones. Then run a filter to remove
> isolated pixels or small groups of pixels. Polygonize run on this
> pre-processed image should perform better.
>
> Bear in mind that the algorithm is such that the first pass will be very
> similar in run-time for the unprocessed and pre-processed image. However,
> the second pass is more sensitive to the number of polygons and should
> improve for the posterized image.
>
> Hopefully Frank will weigh in where I've gotten it wrong or missed
> something.
>
>
> On 1/11/2015 10:11 AM, chris snow wrote:
>
> I have been informed by a colleague attempting to convert a 1.4GB TIF file
> using gdal_polygonize.py on a g2.2xlarge Amazon instance (8 vCPU, 15gb RAM)
> that the processing took over 2 weeks running constantly.   I have also been
> told that the same conversion using commercial tooling was completed in a
> few minutes.
>
> As a result, I'm currently investigating to see if there is an opportunity
> for improving the performance of the gdal_polygonize.py TIF to JSON
> conversion.  I have run a strace while attempting the same conversion, but
> stopped after a few hours (the gdal_polygonize.py status indicator was
> showing between 5% and 7.5% complete).  The strace results are:
>
>
> % time     seconds  usecs/call     calls    errors syscall
> ------ ----------- ----------- --------- --------- ----------------
>  99.40    2.348443           9    252474           read
>  ...
>   0.00    0.000000           0         1           set_robust_list
> ------ ----------- ----------- --------- --------- ----------------
> 100.00    2.362624                256268       459 total
>
>
> FYI - I performed my test inside a vagrant virtualbox guest with 30GB memory
> and 8 CPUS assigned to the guest.
>
> It appears that the input TIF file is read in small pieces at a time.
>
> I have shared the results here in case any one else is looking at optimising
> the performance of the conversion or already has ideas where the code can be
> optimised.
>
> Best regards,
>
> Chris
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From even.rouault at spatialys.com  Mon Jan 12 02:51:03 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Jan 2015 11:51:03 +0100
Subject: [gdal-dev] upper-/lower-case for names in DNC-charts structures
	(VPF).
In-Reply-To: <4e77f84032be4a198e12a49e68e3577d@corpappl844.corp.saab.se>
References: <4e77f84032be4a198e12a49e68e3577d@corpappl844.corp.saab.se>
Message-ID: <1421059863.54b3a71760c9d@imp.free.fr>

Selon Malm Paul <paul.malm at saabgroup.com>:

> Hi, list!
> We're trying to read a DNC chart (VPF format) in a Linux OS. The OGR driver
> reports that files are not found. It works in Windows.
> The problems seems to be caseing of the names, if we recursively rename the
> file paths to lowercase it works.  But it does not work with the original
> files.
> We have searched the "VPF" files and can see that the referenced filenames is
> no different from the filenames on disc, does the OGR driver force names that
> are read in the files to be lower case?
>
> Our biggest problem is that the files are read directly from CD and can't be
> renamed prior reading.
> Does anyone have a solution for this?

The issue is or was in OGDI itself. At the time where VPF was a hot topic, I
remind having patched OGDI for that, and presumably contributed the patch
upstream. It must be in ogdi 3.2.0beta2 or something like that.

> Kind regards,
> Paul
>
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jan 12 03:09:59 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Jan 2015 12:09:59 +0100
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>
References: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>
	<54B2C18C.7090208@stripfamily.net>
	<CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>
Message-ID: <1421060999.54b3ab873fa31@imp.free.fr>

Chris,

As underlined by David, the time spent in raster I/O is presumably neglectable
and not the issue here.
How many polygons were generated in this execution ?
A good way of identifying a bottleneck is to run the process under gdb and
regularly break with Ctrl+C and display the backtrace, and that a few times.

Threading the algorithm is indeed a potential way of speeding things, but
reconciling the various outputs isn't necessarily trivial. And currently the
algorithm works in a streaming mode regarding the output, which is great to be
able to output to GeoJSON which only supports streamed writes. The multithreaded
version would presumably needs a temporary file to handle intermediate results.

Even

> Hi David,
>
> Thanks for your response.  I have a little more information since
> feeding your response to the project team:
>
> "The tif file is around 1.4GB as you noted and the data is similar to
> that of the result of an image classification where each pixel value
> is in a range between (say) 1-5. After a classification this image is
> usually exported as a vector file (EVF of Shapefile) but in this case
> we want to use geojson. This has taken both Mark and myself weeks to
> complete with gdal_polygonize as you noted.
>
> I think an obvious way to speed this up would be threading by breaking
> the tiff file in tiles (say 1024x1024) and spreading these over the
> available cores, then there would need to be a way to dissolve the
> tile boundaries to complete the polygons as we would not want obvious
> tile lines."
>
> Does this help?
>
> Many thanks,
>
> Chris
>
> On 11 January 2015 at 18:31, David Strip <gdal at stripfamily.net> wrote:
> > I'm surprised at your colleague's experience. We've run some polygonize on
> > large images and have never had this problem. The g2.2xlarge instance is
> > overkill in the sense that the code is not multi-threaded, so the extra
> CPUs
> > don't help. Also, as you have already determined, the image is read in
> small
> > chunks, so you don't need large buffers for the image. But two weeks make
> no
> > sense. In fact, your run shows that the job reaches 5% completion in a
> > couple of hours.
> >
> > The reason for so many reads (though 2.3 seconds out of "a few hours" is
> > negligible overhead) is that the algorithm operates on a pair of adjacent
> > raster lines at a time. This allows processing of extremely large images
> > with very modest memory requirements. It's been a while since I've looked
> at
> > the code, but from my recollection, the algorithm should scale
> approximately
> > linearly in the number of pixels and polygons in the image. Far more
> > important to the run-time is the nature of the image itself. If the input
> is
> > something like a satellite photo, your output can be orders of magnitude
> > larger than the input image, as you can get a polygon for nearly every
> > pixel. If the output format is a verbose format like KML or JSON, the
> number
> > of bytes to describe each pixel is large. How big was the output in your
> > colleague's run?
> >
> > The algorithm runs in two passes. If I'm reading the code right, the
> > progress indicator is designed to show 10% at the end of the first pass.
> You
> > will have a better estimate of the run-time on your VM by noting the
> elapsed
> > time to 10%, then the elapsed time from 10% to 20%.
> >
> > Also, tell us more about the image. Is it a continuous scale raster - eg, a
> > photo? One way to significantly reduce the output size (and hence runtime),
> > as well as to get a more meaningful output in most cases, is to posterize
> > the image into a small number of colors/tones. Then run a filter to remove
> > isolated pixels or small groups of pixels. Polygonize run on this
> > pre-processed image should perform better.
> >
> > Bear in mind that the algorithm is such that the first pass will be very
> > similar in run-time for the unprocessed and pre-processed image. However,
> > the second pass is more sensitive to the number of polygons and should
> > improve for the posterized image.
> >
> > Hopefully Frank will weigh in where I've gotten it wrong or missed
> > something.
> >
> >
> > On 1/11/2015 10:11 AM, chris snow wrote:
> >
> > I have been informed by a colleague attempting to convert a 1.4GB TIF file
> > using gdal_polygonize.py on a g2.2xlarge Amazon instance (8 vCPU, 15gb RAM)
> > that the processing took over 2 weeks running constantly.   I have also
> been
> > told that the same conversion using commercial tooling was completed in a
> > few minutes.
> >
> > As a result, I'm currently investigating to see if there is an opportunity
> > for improving the performance of the gdal_polygonize.py TIF to JSON
> > conversion.  I have run a strace while attempting the same conversion, but
> > stopped after a few hours (the gdal_polygonize.py status indicator was
> > showing between 5% and 7.5% complete).  The strace results are:
> >
> >
> > % time     seconds  usecs/call     calls    errors syscall
> > ------ ----------- ----------- --------- --------- ----------------
> >  99.40    2.348443           9    252474           read
> >  ...
> >   0.00    0.000000           0         1           set_robust_list
> > ------ ----------- ----------- --------- --------- ----------------
> > 100.00    2.362624                256268       459 total
> >
> >
> > FYI - I performed my test inside a vagrant virtualbox guest with 30GB
> memory
> > and 8 CPUS assigned to the guest.
> >
> > It appears that the input TIF file is read in small pieces at a time.
> >
> > I have shared the results here in case any one else is looking at
> optimising
> > the performance of the conversion or already has ideas where the code can
> be
> > optimised.
> >
> > Best regards,
> >
> > Chris
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at stripfamily.net  Mon Jan 12 08:04:10 2015
From: gdal at stripfamily.net (David Strip)
Date: Mon, 12 Jan 2015 09:04:10 -0700
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>
References: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>	<54B2C18C.7090208@stripfamily.net>
	<CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>
Message-ID: <54B3F07A.60004@stripfamily.net>

Your team writes that the image is usually exported as a vector file, eg
shapefile. Can they do this successfully for the 1.4GB image? If so,
have you tried just converting the shapefile to geojson? Might be the
simplest solution.

If that doesn't work, you could try tiling, as you mention. As Even has
already noted, the challenge to threading the code is rejoining the
polygons at the boundaries. It's not an overwhelming problem, but it is
a challenge and requires buffering the output rather than streaming it.

You could do a poor-man's version of multi-threading.
1. Tile your input image. I would probably try something bigger than
1024x1024 that your mention. Perhaps 4K x 4K, maybe 8K x 8K. Overlap the
tiles by a pixel or two on all edges.
    For the initial experiment just a couple of adjacent tiles are
sufficient.
2. Feed each tile to gdal_polygonize in as many processes as you have
available processors.
3. Take the resulting polygon files and merge them into a single
shapefile (or other equivalent format).  You can do this with ogr2ogr or
in qgis
4. Dissolve using the classification value
5. Split multipart polygons to single polygons.

I don't know anything about how the dissolve algorithm is written, so I
can't predict it's performance and how it will scale with image size and
number of tiles. However, if it takes advantage of spatial indices, it
could scale fairly well unless you have shapes (like roads) that tend to
stretch from one tile boundary to the next.

On 1/12/2015 3:07 AM, chris snow wrote:
> Hi David,
>
> Thanks for your response.  I have a little more information since
> feeding your response to the project team:
>
> "The tif file is around 1.4GB as you noted and the data is similar to
> that of the result of an image classification where each pixel value
> is in a range between (say) 1-5. After a classification this image is
> usually exported as a vector file (EVF of Shapefile) but in this case
> we want to use geojson. This has taken both Mark and myself weeks to
> complete with gdal_polygonize as you noted.
>
> I think an obvious way to speed this up would be threading by breaking
> the tiff file in tiles (say 1024x1024) and spreading these over the
> available cores, then there would need to be a way to dissolve the
> tile boundaries to complete the polygons as we would not want obvious
> tile lines."
>
> Does this help?
>
>


From chsnow123 at gmail.com  Mon Jan 12 08:19:10 2015
From: chsnow123 at gmail.com (chris snow)
Date: Mon, 12 Jan 2015 16:19:10 +0000
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <54B3F07A.60004@stripfamily.net>
References: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>
	<54B2C18C.7090208@stripfamily.net>
	<CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>
	<54B3F07A.60004@stripfamily.net>
Message-ID: <CAGWifGJ=3R0sdaMjAJ3LYtwmrRfcfjLcACqEM-W3uv22DBrBwg@mail.gmail.com>

Hi David,

Thanks for the response.  I'll feed your question about converting the
shapefile to geojson back to the team.

In the meantime, I have also received some more info on your previous questions:

"The input file was 1.4GB, the output geojson was around 17GB IIRC.

The raster file contains a UK Flood River model, it works on a 5 metre
grid with pixels representing the associated flood risk at a given
point on the map.  The data is continuous in that a long river would
have a band of colour / risk which would follow its course and this
could run for miles.  Vectorising this could result in a very large
long vector with extremely complex geometry (imagine trying to
vectorise the whole of the Thames for example)."


Many thanks,

Chris

On 12 January 2015 at 16:04, David Strip <gdal at stripfamily.net> wrote:
> Your team writes that the image is usually exported as a vector file, eg
> shapefile. Can they do this successfully for the 1.4GB image? If so,
> have you tried just converting the shapefile to geojson? Might be the
> simplest solution.
>
> If that doesn't work, you could try tiling, as you mention. As Even has
> already noted, the challenge to threading the code is rejoining the
> polygons at the boundaries. It's not an overwhelming problem, but it is
> a challenge and requires buffering the output rather than streaming it.
>
> You could do a poor-man's version of multi-threading.
> 1. Tile your input image. I would probably try something bigger than
> 1024x1024 that your mention. Perhaps 4K x 4K, maybe 8K x 8K. Overlap the
> tiles by a pixel or two on all edges.
>     For the initial experiment just a couple of adjacent tiles are
> sufficient.
> 2. Feed each tile to gdal_polygonize in as many processes as you have
> available processors.
> 3. Take the resulting polygon files and merge them into a single
> shapefile (or other equivalent format).  You can do this with ogr2ogr or
> in qgis
> 4. Dissolve using the classification value
> 5. Split multipart polygons to single polygons.
>
> I don't know anything about how the dissolve algorithm is written, so I
> can't predict it's performance and how it will scale with image size and
> number of tiles. However, if it takes advantage of spatial indices, it
> could scale fairly well unless you have shapes (like roads) that tend to
> stretch from one tile boundary to the next.
>
> On 1/12/2015 3:07 AM, chris snow wrote:
>> Hi David,
>>
>> Thanks for your response.  I have a little more information since
>> feeding your response to the project team:
>>
>> "The tif file is around 1.4GB as you noted and the data is similar to
>> that of the result of an image classification where each pixel value
>> is in a range between (say) 1-5. After a classification this image is
>> usually exported as a vector file (EVF of Shapefile) but in this case
>> we want to use geojson. This has taken both Mark and myself weeks to
>> complete with gdal_polygonize as you noted.
>>
>> I think an obvious way to speed this up would be threading by breaking
>> the tiff file in tiles (say 1024x1024) and spreading these over the
>> available cores, then there would need to be a way to dissolve the
>> tile boundaries to complete the polygons as we would not want obvious
>> tile lines."
>>
>> Does this help?
>>
>>
>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jan 12 08:20:36 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 12 Jan 2015 16:20:36 +0000 (UTC)
Subject: [gdal-dev] Does GDAL have a guide for new committers?
Message-ID: <loom.20150112T171402-253@post.gmane.org>

Hi,

Geoserver project has useful documents for committers about policies and
procedures http://docs.geoserver.org/2.5.0/developer/policies/index.html.
Now we have a brave user who writes:

"I'll be willing to contribute in that way! What does it imply from my side
to be maintainer? I need to assess available resources."

http://trac.osgeo.org/gdal/ticket/4890#comment:8

What do we have for him?

-Jukka Rahkonen-


From even.rouault at spatialys.com  Mon Jan 12 08:52:33 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Jan 2015 17:52:33 +0100
Subject: [gdal-dev] Does GDAL have a guide for new committers?
In-Reply-To: <loom.20150112T171402-253@post.gmane.org>
References: <loom.20150112T171402-253@post.gmane.org>
Message-ID: <1421081553.54b3fbd1f26ce@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
> Geoserver project has useful documents for committers about policies and
> procedures http://docs.geoserver.org/2.5.0/developer/policies/index.html.
> Now we have a brave user who writes:
>
> "I'll be willing to contribute in that way! What does it imply from my side
> to be maintainer? I need to assess available resources."
>
> http://trac.osgeo.org/gdal/ticket/4890#comment:8
>
> What do we have for him?

Jukka,

http://trac.osgeo.org/gdal/wiki/HowToContribute and the links it points to
should be a good generic starting point.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yutaxsato at gmail.com  Mon Jan 12 23:30:06 2015
From: yutaxsato at gmail.com (yuta sato)
Date: Tue, 13 Jan 2015 16:30:06 +0900
Subject: [gdal-dev] Reading a GeoTiff file
Message-ID: <CAPqnkJRo+u83R2zp6_zakt1oYYu9=CMKf0pLd9j38WCCmcudOg@mail.gmail.com>

Dear Gdal Developers and Users:

I have a big GeoTiff image file, and the following rectangular boundary:

ulx,uly,lrx,lry = -180, 90, 180, 80

I have to read the image lying for that boundary only.
How can I read it?

************************************************************
inraster = gdal.Open(infile, GA_ReadOnly)

data = inraster.GetRasterBand(1).ReadAsArray()
print data
************************************************************

Hope someone can help me.

Thanks in the advance
Yuta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150113/d11be2ff/attachment.html>

From grb at skogoglandskap.no  Tue Jan 13 01:37:09 2015
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Tue, 13 Jan 2015 09:37:09 +0000
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <mailman.53348.1421079558.1977.gdal-dev@lists.osgeo.org>
References: <mailman.53348.1421079558.1977.gdal-dev@lists.osgeo.org>
Message-ID: <D868CD13-9E14-4040-B15F-E0C8E40B3E1C@skogoglandskap.no>

>> 
>> The reason for so many reads (though 2.3 seconds out of "a few hours" is
>> negligible overhead) is that the algorithm operates on a pair of adjacent
>> raster lines at a time. This allows processing of extremely large images
>> with very modest memory requirements. It's been a while since I've looked at
>> the code, but from my recollection, the algorithm should scale approximately
>> linearly in the number of pixels and polygons in the image. Far more
>> important to the run-time is the nature of the image itself. If the input is
>> something like a satellite photo, your output can be orders of magnitude
>> larger than the input image, as you can get a polygon for nearly every
>> pixel. If the output format is a verbose format like KML or JSON, the number
>> of bytes to describe each pixel is large. How big was the output in your
>> colleague's run?


Three points. 

- until last year, "Dan's GDAL scripts" had a polygonisation routine that was an order of magnitude faster than gdal_polygonise for our use cases.

- locally, for geometry burning/raster processing/polygonising we use 'rbuild' to manage tiling (I'm the author) to get e.g. 100x speedup from parallelisation and smaller tasks that fit better in cache - you can find it on http://github.com/gbb. You can run a polygon merge afterwards on the union of the tiles to consolidate the polygons.

- There are two 'worst case' situations for polygonisation. You outline one of them above (zillions of tiny polygons). My own experience has been that this problem was handled well by either gdal_polygonise or dan's scripts - I can't remember which one worked well. There is another 'worst case' situation that occurs frequently as follows: 

Whenever you deal with national scale data for any country with coastline, you frequently end up with an absolutely gigantic and horrifically complex single polygon which depicts the coastline and all the rivers throughout the country as a single continuous edge. This mega-polygon, so often present and so often necessary, is very time-consuming for gdal_polygonise to produce and the result is very painful for every GIS geometry package to handle. 

It would be great if the people behind gdal_polygonise could put some thought into this extremely common situation for anyone working with country or continent scale rasters to make sure that it is handled well. It has certainly affected us a great deal when working with data at up to 2m resolution for a country larger than the UK...

Graeme.



From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 13 02:17:21 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 13 Jan 2015 10:17:21 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?gdal=5Fpolygonize=2Epy_TIF_to_JSON_performan?=
	=?utf-8?q?ce?=
References: <mailman.53348.1421079558.1977.gdal-dev@lists.osgeo.org>
	<D868CD13-9E14-4040-B15F-E0C8E40B3E1C@skogoglandskap.no>
Message-ID: <loom.20150113T105821-375@post.gmane.org>

Graeme B. Bell <grb <at> skogoglandskap.no> writes:


> It would be great if the people behind gdal_polygonise could put some
thought into this extremely common
> situation for anyone working with country or continent scale rasters to
make sure that it is handled well.
> It has certainly affected us a great deal when working with data at up to
2m resolution for a country larger
> than the UK...

This really feels like the old "how to eat an elephant problem" and you have
answered already by implementing your 'rbuild' system. It seems to be an
enhanced version of the traditional solution "one bite at a time" because it
can make many parallel bites at a time. I would call it something like "The
Piranha Polygonizer (TM)". By the Jungle Software, Inc. It sounds good, doesn't?

Analogous problem is making point in polygon queries from huge polygons and
this document by Alessandro Furieri has a nice coloured picture about it
http://www.gaia-gis.it/spatialite-3.0.0-BETA1/WorldBorders.pdf.

So the question is who is the first to make a piranha version of
gdal_polygonize.py which takes tile size and perhaps number of thread as
input parameters. The default output could be one polygon file for each
raster tile because for many use cases it would be just perfect. Combining
vector tiles later and making unions of adjacent polygons with same
attribute values feels trivial and fast. But this is a non-programmers
opinion only.

-Jukka Rahkonen-




From paul.malm at saabgroup.com  Tue Jan 13 02:18:31 2015
From: paul.malm at saabgroup.com (Malm Paul)
Date: Tue, 13 Jan 2015 10:18:31 +0000
Subject: [gdal-dev] upper/Lower case filenames in VPF (DNC)
Message-ID: <df3afb54749840daba4f4f7c8ae50e65@corpappl844.corp.saab.se>

Hi,
is it possible to add the use CPLFormCIFilename() in the reading of DNC charts, since the casing often mismatches in references to files and actual filenames. This is a problem in LINUX.
I think this method is used for this.
Thanks,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150113/0762b9fb/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 13 04:59:58 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 13 Jan 2015 12:59:58 +0000 (UTC)
Subject: [gdal-dev] List of driver maintainers wanted
Message-ID: <loom.20150113T135057-691@post.gmane.org>

Hi,

There are lots of tickets and patches in the GDAL trac with no reaction from
GDAL developer side ever. If I could find a list of maintainers of drivers,
OS specialists (Windows, OSX, uncommon Linux) etc. I could add their
addresses to Carbon copy field for encouraging them to react somehow which
would be polite for the people who make tickets which are sometimes of very
high quality. Do we have such a list? I mean some longer list than it used
to be Frank and during the last years it has been Even.

-Jukka Rahkonen-


From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 13 07:33:00 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 13 Jan 2015 15:33:00 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Gdal=5Fedit_with_-mo_removes_existing_metada?=
	=?utf-8?q?ta?=
Message-ID: <loom.20150113T161411-572@post.gmane.org>

Hi,

I noticed that when I tried to add one TIFFTAG metadata item with
gdal_edit.py by using the -mo option it wrote my new metadata and wiped away
all the existing TIFFTAG metadata. For the desired result I had to give the
whole list of metadata tags with repeated -mo options. Is this intentional
behaviour? Could it be possible to change behaviour so that -mo adds or
overwrites just the given metadata item and keeps others untouched? Or to
keep the current way but introduce a new -add_mo option?

-Jukka Rahkonen-


From even.rouault at spatialys.com  Tue Jan 13 09:16:55 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Jan 2015 18:16:55 +0100
Subject: [gdal-dev] List of driver maintainers wanted
In-Reply-To: <loom.20150113T135057-691@post.gmane.org>
References: <loom.20150113T135057-691@post.gmane.org>
Message-ID: <1421169415.54b55307684d8@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
> There are lots of tickets and patches in the GDAL trac with no reaction from
> GDAL developer side ever. If I could find a list of maintainers of drivers,
> OS specialists (Windows, OSX, uncommon Linux) etc. I could add their
> addresses to Carbon copy field for encouraging them to react somehow which
> would be polite for the people who make tickets which are sometimes of very
> high quality. Do we have such a list?

Jukka,

The COMMITERS file (http://svn.osgeo.org/gdal/trunk/gdal/COMMITERS) in SVN is
probably the closest to your search. It does not necessarily reflect the current
level of activity/involvement of the commiters however.

I agree we would welcome more reviews of contributions.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Jan 13 09:45:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Jan 2015 18:45:04 +0100
Subject: [gdal-dev] Gdal_edit with -mo removes existing metadata
In-Reply-To: <loom.20150113T161411-572@post.gmane.org>
References: <loom.20150113T161411-572@post.gmane.org>
Message-ID: <1421171104.54b559a0a9ba7@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
> I noticed that when I tried to add one TIFFTAG metadata item with
> gdal_edit.py by using the -mo option it wrote my new metadata and wiped away
> all the existing TIFFTAG metadata. For the desired result I had to give the
> whole list of metadata tags with repeated -mo options. Is this intentional
> behaviour? Could it be possible to change behaviour so that -mo adds or
> overwrites just the given metadata item and keeps others untouched? Or to
> keep the current way but introduce a new -add_mo option?

Jukka,

This wasn't intended as far as I recall. I've change -mo to add to existing
metadata, and added a -unsetmd option to be able to reset existing metdata (can
be combined with -mo to clean and replace)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sfkeller at gmail.com  Tue Jan 13 15:01:07 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 14 Jan 2015 00:01:07 +0100
Subject: [gdal-dev] OGR: How to access Coded Value Domains in File
	Geodatabases?
In-Reply-To: <CAFcOn28iutGKC2f4gjgJ+y797AJZSiHkpxptssrouFiuyoLS_A@mail.gmail.com>
References: <CAFcOn28jmY8ryj=KpaqhevoiWnzPNDp8wV2UV4Rj5+SWuAKLhA@mail.gmail.com>
	<CAM2FmMrMf2EvEdp5HrSwvp+Zb=CjNM_0ESSY2Djh79DwXcW-8Q@mail.gmail.com>
	<CAFcOn2839t7hG-+dyN9O-pcDTsDZQdYt8FLmh-7SjkZgn56vjA@mail.gmail.com>
	<201501071639.35752.even.rouault@spatialys.com>
	<CAFcOn28iutGKC2f4gjgJ+y797AJZSiHkpxptssrouFiuyoLS_A@mail.gmail.com>
Message-ID: <CAFcOn28O84rhrkNbYQBk_bzy1jXrXSQWo97TVvuM3Oizfa2JcQ@mail.gmail.com>

I'd like to support mwtoews proposal to expose a coded value domain as
a simple lookup table.
-S.

2015-01-07 18:03 GMT+01:00 Stefan Keller <sfkeller at gmail.com>:
> 2015-01-07 16:39 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
>
>> Hum I don't think so.
>
> Ok. And what about accessing it with Python GDAL/OGR API?
>
> --S.
>
> P.S.
>> Anyway interesting small enhancement to potentially sponsor.
> Right. Perhaps Esri could step in ;-)
>
>
> 2015-01-07 16:39 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
>> Le mercredi 07 janvier 2015 16:20:46, Stefan Keller a ?crit :
>>> Hi Mike
>>>
>>> Thanks! That ticket is very insightful.
>>>
>>> I'm not sure though if there is already an agreement there about the
>>> best solution inside OGR code.
>>>
>>> In the meantime: Am I correct that there's an immediate solution by
>>> defining an query against table DipCategories of a FileGDB file with
>>> ogr2ogr (-sgl "select ")?
>>
>> Hum I don't think so. The suggestion in the ticket was to enhance the drivers
>> to expose the XML as a OGR layer and do a join. Or to do optional expansion of
>> the code into their descriptions. Another less ad-hac approach would be to
>> extent the recently added subtyping field mechanism to model such enumerated
>> fields and then have an option in ogr2ogr to do the expansion.
>> Anyway interesting small enhancement to potentially sponsor.
>>
>> Even
>>
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com

From pierre.soille at jrc.ec.europa.eu  Wed Jan 14 01:11:21 2015
From: pierre.soille at jrc.ec.europa.eu (Pierre Soille)
Date: Wed, 14 Jan 2015 10:11:21 +0100
Subject: [gdal-dev] gdal_translate and multithreading
Message-ID: <54B632B9.9040802@jrc.ec.europa.eu>

Hello,

while translating a vrt file into a tif file with gdal_translate, I
noticed thanks to htop utility that gdal_translate is using
multithreading (typicallay 4 threads). I fail to find any multithreading
option for gdal_translate (contrary to gdal_warp that has a multi option
and where the number of threads can be set with -wo "NUM_THREADS=x"). 
Is there any possibility to prevent gdal_translate from multithreading? 
Setting the global environment variable OMP_NUM_THREADS to 1 does not
help.  I had a quick look to gdal_translate.cpp but did not find any
explicit reference to multithreading.

This behaviour of gdal_translate is an issue in case of distributed
computing.  Indeed, cluster nodes with many cores are spending most of
their time with kernel time to serve a number of threads largely
exceeding the number of CPUs.

Any hint on how to solve this problem will be greatly appreciated.

Cheers,

Pierre

------------------------
Pierre Soille
EC Joint Research Centre
Ispra, Italy
------------------------

From even.rouault at spatialys.com  Wed Jan 14 01:52:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jan 2015 10:52:58 +0100
Subject: [gdal-dev] gdal_translate and multithreading
In-Reply-To: <54B632B9.9040802@jrc.ec.europa.eu>
References: <54B632B9.9040802@jrc.ec.europa.eu>
Message-ID: <1421229178.54b63c7a79884@imp.free.fr>

Pierre,

Nor gdal_translate nor the VRT driver uses multithreading. But it is possible
that the driver that handles the underlying dataset referenced by the VRT uses
multithreading. There are very few of them however. I can only think of :
- JP2KAK. You can specify JP2KAK_THREADS=1
- JP2OpenJPEG. You can specify GDAL_NUM_THREADS=1

Even

> Hello,
>
> while translating a vrt file into a tif file with gdal_translate, I
> noticed thanks to htop utility that gdal_translate is using
> multithreading (typicallay 4 threads). I fail to find any multithreading
> option for gdal_translate (contrary to gdal_warp that has a multi option
> and where the number of threads can be set with -wo "NUM_THREADS=x").
> Is there any possibility to prevent gdal_translate from multithreading?
> Setting the global environment variable OMP_NUM_THREADS to 1 does not
> help.  I had a quick look to gdal_translate.cpp but did not find any
> explicit reference to multithreading.
>
> This behaviour of gdal_translate is an issue in case of distributed
> computing.  Indeed, cluster nodes with many cores are spending most of
> their time with kernel time to serve a number of threads largely
> exceeding the number of CPUs.
>
> Any hint on how to solve this problem will be greatly appreciated.
>
> Cheers,
>
> Pierre
>
> ------------------------
> Pierre Soille
> EC Joint Research Centre
> Ispra, Italy
> ------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.rajerison at gmail.com  Wed Jan 14 02:08:12 2015
From: mathieu.rajerison at gmail.com (mathieu)
Date: Wed, 14 Jan 2015 02:08:12 -0800 (PST)
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
	polygon wanted
Message-ID: <1421230092768-5181426.post@n6.nabble.com>

Hello,

I crop a 3 band raster by a polygon with the following formula :
/gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif output.tif
/
But pixels outside my polygon are assigned the 0 value. I'd like them to
have nodata

If I put the -dstnodata 0 option :
/gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif output.tif
-dstnodata 0/, all the pixels in each of the 3 bands that contain the 0
value will be turned to nodata, even if they are contained in my polygon.

Hence, 127 0 222 will become 127 nodata 222
or 0 127 222 will become nodata 127 222

How to put the nodata value only outside my polygon ?

Thanks a lot in advance !

Mathieu



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Jan 14 02:39:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jan 2015 11:39:21 +0100
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
	polygon wanted
In-Reply-To: <1421230092768-5181426.post@n6.nabble.com>
References: <1421230092768-5181426.post@n6.nabble.com>
Message-ID: <1421231961.54b64759399d5@imp.free.fr>

Mathieu,

If 0 is a valid value at some locations of your raster, then you cannot use it
as the nodata value. Use an alpha band instead for example by using -dstalpha
instead of -dstnodata 0

Even

> Hello,
>
> I crop a 3 band raster by a polygon with the following formula :
> /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif output.tif
> /
> But pixels outside my polygon are assigned the 0 value. I'd like them to
> have nodata
>
> If I put the -dstnodata 0 option :
> /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif output.tif
> -dstnodata 0/, all the pixels in each of the 3 bands that contain the 0
> value will be turned to nodata, even if they are contained in my polygon.
>
> Hence, 127 0 222 will become 127 nodata 222
> or 0 127 222 will become nodata 127 222
>
> How to put the nodata value only outside my polygon ?
>
> Thanks a lot in advance !
>
> Mathieu
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.rajerison at gmail.com  Wed Jan 14 02:58:02 2015
From: mathieu.rajerison at gmail.com (mathieu)
Date: Wed, 14 Jan 2015 02:58:02 -0800 (PST)
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
 polygon wanted
In-Reply-To: <1421231961.54b64759399d5@imp.free.fr>
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
Message-ID: <CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>

The problem is that I don't know want an alpha channel because some of my
users work on MapInfo and MapInfo doesn't deal with alpha channels..

2015-01-14 11:39 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
ml-node+s1560n5181432h49 at n6.nabble.com>:

> Mathieu,
>
> If 0 is a valid value at some locations of your raster, then you cannot
> use it
> as the nodata value. Use an alpha band instead for example by using
> -dstalpha
> instead of -dstnodata 0
>
> Even
>
> > Hello,
> >
> > I crop a 3 band raster by a polygon with the following formula :
> > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> output.tif
> > /
> > But pixels outside my polygon are assigned the 0 value. I'd like them to
> > have nodata
> >
> > If I put the -dstnodata 0 option :
> > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> output.tif
> > -dstnodata 0/, all the pixels in each of the 3 bands that contain the 0
> > value will be turned to nodata, even if they are contained in my
> polygon.
> >
> > Hence, 127 0 222 will become 127 nodata 222
> > or 0 127 222 will become nodata 127 222
> >
> > How to put the nodata value only outside my polygon ?
> >
> > Thanks a lot in advance !
> >
> > Mathieu
> >
> >
> >
> > --
> > View this message in context:
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181432&i=0>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181432&i=1>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181432.html
>  To unsubscribe from Cropping a raster by a polygon - only nodata outside
> polygon wanted, click here
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5181426&code=bWF0aGlldS5yYWplcmlzb25AZ21haWwuY29tfDUxODE0MjZ8NTczODc4NDU1>
> .
> NAML
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181437.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150114/c3d9abf3/attachment.html>

From even.rouault at spatialys.com  Wed Jan 14 03:06:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jan 2015 12:06:52 +0100
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
	polygon wanted
In-Reply-To: <CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
	<CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
Message-ID: <1421233612.54b64dccd1f4f@imp.free.fr>

Selon mathieu <mathieu.rajerison at gmail.com>:

> The problem is that I don't know want an alpha channel because some of my
> users work on MapInfo and MapInfo doesn't deal with alpha channels..

Really ??? Tell them to use QGIS instead. It does support alpha channel.

Otherwise try to find a nodata value that isn't a valid pixel value. But I'd
note that the nodata support in TIFF is a GDAL extended TIFF tag, so I wouldn't
be surprised if MapInfo doesn't support it either.

>
> 2015-01-14 11:39 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
> ml-node+s1560n5181432h49 at n6.nabble.com>:
>
> > Mathieu,
> >
> > If 0 is a valid value at some locations of your raster, then you cannot
> > use it
> > as the nodata value. Use an alpha band instead for example by using
> > -dstalpha
> > instead of -dstnodata 0
> >
> > Even
> >
> > > Hello,
> > >
> > > I crop a 3 band raster by a polygon with the following formula :
> > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > output.tif
> > > /
> > > But pixels outside my polygon are assigned the 0 value. I'd like them to
> > > have nodata
> > >
> > > If I put the -dstnodata 0 option :
> > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > output.tif
> > > -dstnodata 0/, all the pixels in each of the 3 bands that contain the 0
> > > value will be turned to nodata, even if they are contained in my
> > polygon.
> > >
> > > Hence, 127 0 222 will become 127 nodata 222
> > > or 0 127 222 will become nodata 127 222
> > >
> > > How to put the nodata value only outside my polygon ?
> > >
> > > Thanks a lot in advance !
> > >
> > > Mathieu
> > >
> > >
> > >
> > > --
> > > View this message in context:
> > >
> >
> >
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
> > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > _______________________________________________
> > > gdal-dev mailing list
> > > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181432&i=0>
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181432&i=1>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > ------------------------------
> >  If you reply to this email, your message will be added to the discussion
> > below:
> >
> >
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181432.html
> >  To unsubscribe from Cropping a raster by a polygon - only nodata outside
> > polygon wanted, click here
> >
>
<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5181426&code=bWF0aGlldS5yYWplcmlzb25AZ21haWwuY29tfDUxODE0MjZ8NTczODc4NDU1>
> > .
> > NAML
> >
>
<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
> >
>
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181437.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.rajerison at gmail.com  Wed Jan 14 03:54:55 2015
From: mathieu.rajerison at gmail.com (mathieu)
Date: Wed, 14 Jan 2015 03:54:55 -0800 (PST)
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
 polygon wanted
In-Reply-To: <1421233612.54b64dccd1f4f@imp.free.fr>
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
	<CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
	<1421233612.54b64dccd1f4f@imp.free.fr>
Message-ID: <CAGfc75n4fCB3zgFQmeU-31pdBrPuN-8-w3nhJnDpXCx4frn3qg@mail.gmail.com>

Is there a simple way to find one or several pixel value none of the bands
use ?

Mathieu

2015-01-14 12:06 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
ml-node+s1560n5181443h90 at n6.nabble.com>:

> Selon mathieu <[hidden email]
> <http:///user/SendEmail.jtp?type=node&node=5181443&i=0>>:
>
> > The problem is that I don't know want an alpha channel because some of
> my
> > users work on MapInfo and MapInfo doesn't deal with alpha channels..
>
> Really ??? Tell them to use QGIS instead. It does support alpha channel.
>
> Otherwise try to find a nodata value that isn't a valid pixel value. But
> I'd
> note that the nodata support in TIFF is a GDAL extended TIFF tag, so I
> wouldn't
> be surprised if MapInfo doesn't support it either.
>
> >
> > 2015-01-14 11:39 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
> > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181443&i=1>>:
>
> >
> > > Mathieu,
> > >
> > > If 0 is a valid value at some locations of your raster, then you
> cannot
> > > use it
> > > as the nodata value. Use an alpha band instead for example by using
> > > -dstalpha
> > > instead of -dstnodata 0
> > >
> > > Even
> > >
> > > > Hello,
> > > >
> > > > I crop a 3 band raster by a polygon with the following formula :
> > > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > > output.tif
> > > > /
> > > > But pixels outside my polygon are assigned the 0 value. I'd like
> them to
> > > > have nodata
> > > >
> > > > If I put the -dstnodata 0 option :
> > > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > > output.tif
> > > > -dstnodata 0/, all the pixels in each of the 3 bands that contain
> the 0
> > > > value will be turned to nodata, even if they are contained in my
> > > polygon.
> > > >
> > > > Hence, 127 0 222 will become 127 nodata 222
> > > > or 0 127 222 will become nodata 127 222
> > > >
> > > > How to put the nodata value only outside my polygon ?
> > > >
> > > > Thanks a lot in advance !
> > > >
> > > > Mathieu
> > > >
> > > >
> > > >
> > > > --
> > > > View this message in context:
> > > >
> > >
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
>
> > > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > [hidden email] <
> http:///user/SendEmail.jtp?type=node&node=5181432&i=0>
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >
> > >
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181432&i=1>
>
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > >
> > > ------------------------------
> > >  If you reply to this email, your message will be added to the
> discussion
> > > below:
> > >
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181432.html
> > >  To unsubscribe from Cropping a raster by a polygon - only nodata
> outside
> > > polygon wanted, click here
> > >
> >
> <
> > > .
> > > NAML
> > >
> >
> <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>
> > >
> >
> >
> >
> >
> > --
> > View this message in context:
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181437.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181443&i=2>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181443.html
>  To unsubscribe from Cropping a raster by a polygon - only nodata outside
> polygon wanted, click here
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5181426&code=bWF0aGlldS5yYWplcmlzb25AZ21haWwuY29tfDUxODE0MjZ8NTczODc4NDU1>
> .
> NAML
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181453.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150114/ceb187cb/attachment.html>

From even.rouault at spatialys.com  Wed Jan 14 04:24:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jan 2015 13:24:48 +0100
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
	polygon wanted
In-Reply-To: <CAGfc75n4fCB3zgFQmeU-31pdBrPuN-8-w3nhJnDpXCx4frn3qg@mail.gmail.com>
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
	<CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
	<1421233612.54b64dccd1f4f@imp.free.fr>
	<CAGfc75n4fCB3zgFQmeU-31pdBrPuN-8-w3nhJnDpXCx4frn3qg@mail.gmail.com>
Message-ID: <1421238288.54b66010d6b00@imp.free.fr>

Selon mathieu <mathieu.rajerison at gmail.com>:

> Is there a simple way to find one or several pixel value none of the bands
> use ?

Analyzing the histograms is the closest way I can think of.

With "gdalinfo -hist in.tif" for example (but it is admitedly not completely
trivial to find the index from the output)
Or programatically with GetDefaultHistogram():
http://www.gdal.org/classGDALRasterBand.html#afeffe2ed8bfdc3d84200a57068ad0945

>
> Mathieu
>
> 2015-01-14 12:06 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
> ml-node+s1560n5181443h90 at n6.nabble.com>:
>
> > Selon mathieu <[hidden email]
> > <http:///user/SendEmail.jtp?type=node&node=5181443&i=0>>:
> >
> > > The problem is that I don't know want an alpha channel because some of
> > my
> > > users work on MapInfo and MapInfo doesn't deal with alpha channels..
> >
> > Really ??? Tell them to use QGIS instead. It does support alpha channel.
> >
> > Otherwise try to find a nodata value that isn't a valid pixel value. But
> > I'd
> > note that the nodata support in TIFF is a GDAL extended TIFF tag, so I
> > wouldn't
> > be surprised if MapInfo doesn't support it either.
> >
> > >
> > > 2015-01-14 11:39 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
> > > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181443&i=1>>:
> >
> > >
> > > > Mathieu,
> > > >
> > > > If 0 is a valid value at some locations of your raster, then you
> > cannot
> > > > use it
> > > > as the nodata value. Use an alpha band instead for example by using
> > > > -dstalpha
> > > > instead of -dstnodata 0
> > > >
> > > > Even
> > > >
> > > > > Hello,
> > > > >
> > > > > I crop a 3 band raster by a polygon with the following formula :
> > > > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > > > output.tif
> > > > > /
> > > > > But pixels outside my polygon are assigned the 0 value. I'd like
> > them to
> > > > > have nodata
> > > > >
> > > > > If I put the -dstnodata 0 option :
> > > > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > > > output.tif
> > > > > -dstnodata 0/, all the pixels in each of the 3 bands that contain
> > the 0
> > > > > value will be turned to nodata, even if they are contained in my
> > > > polygon.
> > > > >
> > > > > Hence, 127 0 222 will become 127 nodata 222
> > > > > or 0 127 222 will become nodata 127 222
> > > > >
> > > > > How to put the nodata value only outside my polygon ?
> > > > >
> > > > > Thanks a lot in advance !
> > > > >
> > > > > Mathieu
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > View this message in context:
> > > > >
> > > >
> > > >
> > >
> >
> >
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
> >
> > > > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > [hidden email] <
> > http:///user/SendEmail.jtp?type=node&node=5181432&i=0>
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > >
> > > >
> > > >
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181432&i=1>
> >
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >
> > > >
> > > > ------------------------------
> > > >  If you reply to this email, your message will be added to the
> > discussion
> > > > below:
> > > >
> > > >
> > >
> >
> >
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181432.html
> > > >  To unsubscribe from Cropping a raster by a polygon - only nodata
> > outside
> > > > polygon wanted, click here
> > > >
> > >
> > <
> > > > .
> > > > NAML
> > > >
> > >
> > <
> >
>
http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
> >
> > > >
> > >
> > >
> > >
> > >
> > > --
> > > View this message in context:
> > >
> >
> >
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181437.html
> > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181443&i=2>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > ------------------------------
> >  If you reply to this email, your message will be added to the discussion
> > below:
> >
> >
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181443.html
> >  To unsubscribe from Cropping a raster by a polygon - only nodata outside
> > polygon wanted, click here
> >
>
<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5181426&code=bWF0aGlldS5yYWplcmlzb25AZ21haWwuY29tfDUxODE0MjZ8NTczODc4NDU1>
> > .
> > NAML
> >
>
<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
> >
>
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181453.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.rajerison at gmail.com  Wed Jan 14 08:30:13 2015
From: mathieu.rajerison at gmail.com (mathieu)
Date: Wed, 14 Jan 2015 08:30:13 -0800 (PST)
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
 polygon wanted
In-Reply-To: <1421238288.54b66010d6b00@imp.free.fr>
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
	<CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
	<1421233612.54b64dccd1f4f@imp.free.fr>
	<CAGfc75n4fCB3zgFQmeU-31pdBrPuN-8-w3nhJnDpXCx4frn3qg@mail.gmail.com>
	<1421238288.54b66010d6b00@imp.free.fr>
Message-ID: <CAGfc75=T-7OukYsKPB3Op25GMOjcg1vjaZo6Zuo30k5wkwRB0Q@mail.gmail.com>

Ok thanks a lot for the answer!
Le 14 janv. 2015 13:25, "Even Rouault-2 [via OSGeo.org]" <
ml-node+s1560n5181459h86 at n6.nabble.com> a ?crit :

> Selon mathieu <[hidden email]
> <http:///user/SendEmail.jtp?type=node&node=5181459&i=0>>:
>
> > Is there a simple way to find one or several pixel value none of the
> bands
> > use ?
>
> Analyzing the histograms is the closest way I can think of.
>
> With "gdalinfo -hist in.tif" for example (but it is admitedly not
> completely
> trivial to find the index from the output)
> Or programatically with GetDefaultHistogram():
>
> http://www.gdal.org/classGDALRasterBand.html#afeffe2ed8bfdc3d84200a57068ad0945
>
> >
> > Mathieu
> >
> > 2015-01-14 12:06 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
> > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181459&i=1>>:
>
> >
> > > Selon mathieu <[hidden email]
> > > <http:///user/SendEmail.jtp?type=node&node=5181443&i=0>>:
> > >
> > > > The problem is that I don't know want an alpha channel because some
> of
> > > my
> > > > users work on MapInfo and MapInfo doesn't deal with alpha channels..
> > >
> > > Really ??? Tell them to use QGIS instead. It does support alpha
> channel.
> > >
> > > Otherwise try to find a nodata value that isn't a valid pixel value.
> But
> > > I'd
> > > note that the nodata support in TIFF is a GDAL extended TIFF tag, so I
> > > wouldn't
> > > be surprised if MapInfo doesn't support it either.
> > >
> > > >
> > > > 2015-01-14 11:39 GMT+01:00 Even Rouault-2 [via OSGeo.org] <
> > > > [hidden email] <
> http:///user/SendEmail.jtp?type=node&node=5181443&i=1>>:
> > >
> > > >
> > > > > Mathieu,
> > > > >
> > > > > If 0 is a valid value at some locations of your raster, then you
> > > cannot
> > > > > use it
> > > > > as the nodata value. Use an alpha band instead for example by
> using
> > > > > -dstalpha
> > > > > instead of -dstnodata 0
> > > > >
> > > > > Even
> > > > >
> > > > > > Hello,
> > > > > >
> > > > > > I crop a 3 band raster by a polygon with the following formula :
> > > > > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > > > > output.tif
> > > > > > /
> > > > > > But pixels outside my polygon are assigned the 0 value. I'd like
> > > them to
> > > > > > have nodata
> > > > > >
> > > > > > If I put the -dstnodata 0 option :
> > > > > > /gdalwarp -of GTiff -cutline polygon.shp -cl polygon input.tif
> > > > > output.tif
> > > > > > -dstnodata 0/, all the pixels in each of the 3 bands that
> contain
> > > the 0
> > > > > > value will be turned to nodata, even if they are contained in my
> > > > > polygon.
> > > > > >
> > > > > > Hence, 127 0 222 will become 127 nodata 222
> > > > > > or 0 127 222 will become nodata 127 222
> > > > > >
> > > > > > How to put the nodata value only outside my polygon ?
> > > > > >
> > > > > > Thanks a lot in advance !
> > > > > >
> > > > > > Mathieu
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > View this message in context:
> > > > > >
> > > > >
> > > > >
> > > >
> > >
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426.html
>
> > >
> > > > > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > > > > _______________________________________________
> > > > > > gdal-dev mailing list
> > > > > > [hidden email] <
> > > http:///user/SendEmail.jtp?type=node&node=5181432&i=0>
> > > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Spatialys - Geospatial professional services
> > > > > http://www.spatialys.com
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > [hidden email] <
> http:///user/SendEmail.jtp?type=node&node=5181432&i=1>
> > >
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > >
> > > > >
> > > > > ------------------------------
> > > > >  If you reply to this email, your message will be added to the
> > > discussion
> > > > > below:
> > > > >
> > > > >
> > > >
> > >
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181432.html
>
> > > > >  To unsubscribe from Cropping a raster by a polygon - only nodata
> > > outside
> > > > > polygon wanted, click here
> > > > >
> > > >
> > > <
> > > > > .
> > > > > NAML
> > > > >
> > > >
> > > <
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>
>
> > >
> > > > >
> > > >
> > > >
> > > >
> > > >
> > > > --
> > > > View this message in context:
> > > >
> > >
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181437.html
>
> > > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > >
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181443&i=2>
>
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > >
> > > ------------------------------
> > >  If you reply to this email, your message will be added to the
> discussion
> > > below:
> > >
> > >
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181443.html
> > >  To unsubscribe from Cropping a raster by a polygon - only nodata
> outside
> > > polygon wanted, click here
> > >
> >
> <
> > > .
> > > NAML
> > >
> >
> <
> http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>
> > >
> >
> >
> >
> >
> > --
> > View this message in context:
> >
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181453.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http:///user/SendEmail.jtp?type=node&node=5181459&i=2>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181459.html
>  To unsubscribe from Cropping a raster by a polygon - only nodata outside
> polygon wanted, click here
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5181426&code=bWF0aGlldS5yYWplcmlzb25AZ21haWwuY29tfDUxODE0MjZ8NTczODc4NDU1>
> .
> NAML
> <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5181520.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150114/6d1f7d60/attachment-0001.html>

From pierre.soille at jrc.ec.europa.eu  Wed Jan 14 09:11:26 2015
From: pierre.soille at jrc.ec.europa.eu (Pierre Soille)
Date: Wed, 14 Jan 2015 18:11:26 +0100
Subject: [gdal-dev] gdal_translate and multithreading
In-Reply-To: <1421229178.54b63c7a79884@imp.free.fr>
References: <54B632B9.9040802@jrc.ec.europa.eu>
	<1421229178.54b63c7a79884@imp.free.fr>
Message-ID: <54B6A33E.7010407@jrc.ec.europa.eu>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150114/8d81e52c/attachment.html>

From even.rouault at spatialys.com  Wed Jan 14 09:11:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jan 2015 18:11:32 +0100
Subject: [gdal-dev] gdal_translate and multithreading
In-Reply-To: <54B6A33E.7010407@jrc.ec.europa.eu>
References: <54B632B9.9040802@jrc.ec.europa.eu>
	<1421229178.54b63c7a79884@imp.free.fr>
	<54B6A33E.7010407@jrc.ec.europa.eu>
Message-ID: <1421255492.54b6a344e019e@imp.free.fr>

Selon Pierre Soille <pierre.soille at jrc.ec.europa.eu>:

>
>
>
>
>
>     Even,
>
>
>
>         thank you for your prompt reply.? To be more specific, the
>         successive steps of my procedure are
>
>
>
>         1] gdalwarp of a vrt file referring to 8 bands (stored as
>         gtiffs) of Landsat8 image from UTM into the equivalent EPSG:4326 vrt
> file:
>
>         gdalwarp -of vrt -r cubic -t_srs EPSG:4326 -tr 0.00025 0.00025
>         -te -77.54 69.69 -70.01 72.07 -srcnodata 0 -dstnodata 0
>         LC80260102014095LGN00_REF.vrt
>         LC80260102014095LGN00_REF_EPSG4326.vrt
>
>
>
>         (this first step is almost instantaneous given that it only
>         produces a vrt file.
>
>
>
>         2] translate the obtained vrt file into a gtiff file using
>         gdal_translate:
>
>         gdal_translate -co INTERLEAVE=BAND -co COMPRESS=LZW -co
>         PREDICTOR=2 -co BIGTIFF=IF_SAFER?
>         LC80260102014095LGN00_REF_EPSG4326.vrt
> LC80260102014095LGN00_REF_EPSG4326.tif
>
>
>
>         It is in this second step that htop reports the use of
>         multithreads by gdal_translate.
>
>
>
>         Any idea where I am doing something wrong or why htop reports the use
> of multithreads by gdal_translate in
>         this case?

Unless I'm missing something, there should be no multithreading in your above
use case. I'm not familiar with htop, so I cannot comment. A way of checking if
threads are created is to run the command line with "strace -f" and check if
there are child processes created.

>
>
>
>           As a side note, I noticed that applying the same procedure 8
>           times on the individual bands is much faster (~100 times) than
>           applying it once starting from the vrt file referring to the 8
>           individual bands as described above but also fail to
>           understand such a behaviour.
>
>

It is always difficult to know what bottlenecks are without running and
debugging the use case. My guess: there are some optimizations done when dealing
with pixel interleaved data that might be defeated if you output to a
INTERLEAVE=BAND tiff. Try removing -co INTERLEAVE=BAND


>
>           Thank you again for your time and your amazing contributions
>           to gdal.
>
>
>
>           Best regards,
>
>
>
>           Pierre
>
>
>
>
>
>         On 01/14/2015 10:52 AM, Even Rouault wrote:
>
>
>
>       Pierre,
>
> Nor gdal_translate nor the VRT driver uses multithreading. But it is possible
> that the driver that handles the underlying dataset referenced by the VRT
> uses
> multithreading. There are very few of them however. I can only think of :
> - JP2KAK. You can specify JP2KAK_THREADS=1
> - JP2OpenJPEG. You can specify GDAL_NUM_THREADS=1
>
> Even
>
>
>
>         Hello,
>
> while translating a vrt file into a tif file with gdal_translate, I
> noticed thanks to htop utility that gdal_translate is using
> multithreading (typicallay 4 threads). I fail to find any multithreading
> option for gdal_translate (contrary to gdal_warp that has a multi option
> and where the number of threads can be set with -wo "NUM_THREADS=x").
> Is there any possibility to prevent gdal_translate from multithreading?
> Setting the global environment variable OMP_NUM_THREADS to 1 does not
> help.  I had a quick look to gdal_translate.cpp but did not find any
> explicit reference to multithreading.
>
> This behaviour of gdal_translate is an issue in case of distributed
> computing.  Indeed, cluster nodes with many cores are spending most of
> their time with kernel time to serve a number of threads largely
> exceeding the number of CPUs.
>
> Any hint on how to solve this problem will be greatly appreciated.
>
> Cheers,
>
> Pierre
>
> ------------------------
> Pierre Soille
> EC Joint Research Centre
> Ispra, Italy
> ------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
>
>
>
>
>
>
>
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From daniel.wiesmann at gmail.com  Wed Jan 14 09:57:34 2015
From: daniel.wiesmann at gmail.com (Daniel Wiesmann)
Date: Wed, 14 Jan 2015 17:57:34 +0000
Subject: [gdal-dev] WKB Representation of Raster Data
Message-ID: <54B6AE0E.6060107@gmail.com>

Hello Everyone

I am working on integration of Raster data into the Django web-framework 
leveraging GDAL. For this I have written some GDAL C-Bindings through 
ctypes in python.

https://github.com/django/django/blob/master/django/contrib/gis/gdal/prototypes/raster.py

For reading and storing data to a database, I would like to add the 
possibility to convert a raster into a WKB format. For geometries, GDAL 
has the "OGR_G_ExportToWkb" function for OGR:

http://gdal.org/ogr__api_8h.html#ad5c94ae76c09774dba8725c24daeefd6

However, If I am not mistaken there is nothing similar for rasters. I 
have written function that converts a raster into a PostGIS Raster WKB 
buffer in python, but I am not sure if this is the best approach:

https://github.com/geodesign/django/blob/gdalraster/django/contrib/gis/gdal/raster/rasters.py#L466

So my questions are the following:

Is the inclusion of WKB raster export/import part of the GDAL Roadmap?

Do you know any other WKB representation for raster data other than 
PostGIS Raster?

If yes, which WKB format would you find most appropriate here?

Do you happen to know where PostGIS Raster is documented? I understand 
how it is constructed, but I had to piece it together from the source 
code and the user documentattion.

Thank you in advance for your help,

Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150114/11ca23a1/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Jan 14 10:25:31 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 14 Jan 2015 18:25:31 +0000 (UTC)
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
	polygon wanted
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
	<CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
	<1421233612.54b64dccd1f4f@imp.free.fr>
	<CAGfc75n4fCB3zgFQmeU-31pdBrPuN-8-w3nhJnDpXCx4frn3qg@mail.gmail.com>
Message-ID: <loom.20150114T191501-856@post.gmane.org>

mathieu <mathieu.rajerison <at> gmail.com> writes:


> Is there a simple way to find one or several pixel value none of the bands 
use ?

Hi,

Another GDAL users just some time ago told about a workaround for a little
bit similar use case. The idea is to use first gdal_calc.py and update all
(0,0,0) pixels into (1,1,1). Because of this little trick it is guaranteed
that after runninig a process that generates (0,0,0) as nodata pixels, all
that is (0,0,0) in the image comes from this process. For the users the
(1,1,1) pixels of real data look just as black as they used to.

-Jukka Rahkonen-






From even.rouault at spatialys.com  Wed Jan 14 10:51:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jan 2015 19:51:37 +0100
Subject: [gdal-dev] WKB Representation of Raster Data
In-Reply-To: <54B6AE0E.6060107@gmail.com>
References: <54B6AE0E.6060107@gmail.com>
Message-ID: <1421261497.54b6bab9c07dc@imp.free.fr>

Selon Daniel Wiesmann <daniel.wiesmann at gmail.com>:

> Hello Everyone
>
> I am working on integration of Raster data into the Django web-framework
> leveraging GDAL. For this I have written some GDAL C-Bindings through
> ctypes in python.
>
>
https://github.com/django/django/blob/master/django/contrib/gis/gdal/prototypes/raster.py
>
> For reading and storing data to a database, I would like to add the
> possibility to convert a raster into a WKB format. For geometries, GDAL
> has the "OGR_G_ExportToWkb" function for OGR:
>
> http://gdal.org/ogr__api_8h.html#ad5c94ae76c09774dba8725c24daeefd6
>
> However, If I am not mistaken there is nothing similar for rasters. I
> have written function that converts a raster into a PostGIS Raster WKB
> buffer in python, but I am not sure if this is the best approach:
>
>
https://github.com/geodesign/django/blob/gdalraster/django/contrib/gis/gdal/raster/rasters.py#L466
>
> So my questions are the following:
>
> Is the inclusion of WKB raster export/import part of the GDAL Roadmap?
>
> Do you know any other WKB representation for raster data other than
> PostGIS Raster?
>
> If yes, which WKB format would you find most appropriate here?
>

I'm not aware of a standard for that.

> Do you happen to know where PostGIS Raster is documented? I understand
> how it is constructed, but I had to piece it together from the source
> code and the user documentattion.

This is documented there :
http://trac.osgeo.org/postgis/wiki/WKTRaster/Documentation01

>
> Thank you in advance for your help,
>
> Daniel
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Wed Jan 14 13:52:03 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 14 Jan 2015 22:52:03 +0100
Subject: [gdal-dev] WKB Representation of Raster Data
In-Reply-To: <1421261497.54b6bab9c07dc@imp.free.fr>
References: <54B6AE0E.6060107@gmail.com> <1421261497.54b6bab9c07dc@imp.free.fr>
Message-ID: <CABUeae-wzwUV+G0dAYH6LFQzCDVWwNnLDYXbRDMTO3u_oGSJnw@mail.gmail.com>

On 14 Jan 2015 19:51, "Even Rouault"  <even.rouault at spatialys.com> wrote:
>
> Selon Daniel Wiesmann <daniel.wiesmann at gmail.com>:
> > Do you happen to know where PostGIS Raster is documented? I understand
> > how it is constructed, but I had to piece it together from the source
> > code and the user documentattion.
>
> This is documented there :
> http://trac.osgeo.org/postgis/wiki/WKTRaster/Documentation01

There is also serialisation format  originally described by Sandro

https://svn.osgeo.org/postgis/trunk/raster/doc/

Mateusz ?oskot
(Sent from mobile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150114/d17feb2e/attachment.html>

From landa.martin at gmail.com  Wed Jan 14 16:06:56 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 15 Jan 2015 01:06:56 +0100
Subject: [gdal-dev] OGRCircularString - full circle from three points
Message-ID: <CA+Ei1OfWkV0OjVKMz5_r+u5+eBj+pf9jXVvF_2wfuutt3pXxXA@mail.gmail.com>

Hi,

I am working with three points which define a full circle. To describe
it using OGRCircularString
I would need five points defining two circular arcs, right? So in my
case to compute an intermediate point for the second arc, right?

Thanks for clarification! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From gdal at stripfamily.net  Wed Jan 14 21:18:12 2015
From: gdal at stripfamily.net (David Strip)
Date: Wed, 14 Jan 2015 22:18:12 -0700
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <CAGWifGJ=3R0sdaMjAJ3LYtwmrRfcfjLcACqEM-W3uv22DBrBwg@mail.gmail.com>
References: <CAGWifGKhjLg7iLqu=3-ugY=xcR9f6ovjbxHCnLvkfSd_Pr_pvQ@mail.gmail.com>	<54B2C18C.7090208@stripfamily.net>	<CAGWifGJP4MDiJD9vOpksyeKirDkY8OLfDrZLUJNn=WE_vTNXcA@mail.gmail.com>	<54B3F07A.60004@stripfamily.net>
	<CAGWifGJ=3R0sdaMjAJ3LYtwmrRfcfjLcACqEM-W3uv22DBrBwg@mail.gmail.com>
Message-ID: <54B74D94.9070108@stripfamily.net>

I ran a test case on my Windows 7 laptop (i7, quad core (not that it
matters), 2.4 GHz, 8G RAM).
Input file was geotiff, 29847x33432, paletted 8-bit, 11 landcover classes.
This dataset covers the city limits of Philadelphia, PA, so the polygon
representing the Delaware River runs approximately from the lower left
to the upper right corner, creating the same pathological case as the
Thames in your dataset. However, unlike your dataset, there are
relatively few other very large features, as would be the flood level
contours in your data set.
gdal_polygonize to shapefile took ~9 hours and the output files sum to
1.22GB, 1.13M ploygonal features.
gdal_polygonize to geojson took about ~15 hours and the output file is
just over 2GB.

Not sure how useful this is in comparing your dataset that started this
thread, but at least it's some point of comparison.



From even.rouault at spatialys.com  Thu Jan 15 02:20:10 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Jan 2015 11:20:10 +0100
Subject: [gdal-dev] OGRCircularString - full circle from three points
In-Reply-To: <CA+Ei1OfWkV0OjVKMz5_r+u5+eBj+pf9jXVvF_2wfuutt3pXxXA@mail.gmail.com>
References: <CA+Ei1OfWkV0OjVKMz5_r+u5+eBj+pf9jXVvF_2wfuutt3pXxXA@mail.gmail.com>
Message-ID: <1421317210.54b7945a21f8a@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> I am working with three points which define a full circle. To describe
> it using OGRCircularString
> I would need five points defining two circular arcs, right? So in my
> case to compute an intermediate point for the second arc, right?

Martin,

You can describe a full circle with 3 points by specifying (P1,P2,P1) where
P1-P2 defines a diameter of the circle, but there's an ambiguity on the
orientation to follow the CircularString (which shouldn't matter if the
CircularString is part of a CurvePolygon) and some implementation might not like
it (OGR should be fine)
Indeed using 5 points is better. You can define (P1,P2,P3,P4,P1) where all
points are on the circle. For example P1-P3 and P2-P4 being 2 diameters, but
that's not a requirement.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Thu Jan 15 03:07:19 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 15 Jan 2015 12:07:19 +0100
Subject: [gdal-dev] OGRCircularString - full circle from three points
In-Reply-To: <1421317210.54b7945a21f8a@imp.free.fr>
References: <CA+Ei1OfWkV0OjVKMz5_r+u5+eBj+pf9jXVvF_2wfuutt3pXxXA@mail.gmail.com>
	<1421317210.54b7945a21f8a@imp.free.fr>
Message-ID: <CA+Ei1Od6NhEeeR8Mz4SHoGHtkqrwsLcrD_YgUn5+XErk8-aUhA@mail.gmail.com>

Hi,

2015-01-15 11:20 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> You can describe a full circle with 3 points by specifying (P1,P2,P1) where
> P1-P2 defines a diameter of the circle, but there's an ambiguity on the
> orientation to follow the CircularString (which shouldn't matter if the
> CircularString is part of a CurvePolygon) and some implementation might not like
> it (OGR should be fine)
> Indeed using 5 points is better. You can define (P1,P2,P3,P4,P1) where all
> points are on the circle. For example P1-P3 and P2-P4 being 2 diameters, but
> that's not a requirement.

thanks for the confirmation Even.

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From gdal at stripfamily.net  Thu Jan 15 06:59:19 2015
From: gdal at stripfamily.net (David Strip)
Date: Thu, 15 Jan 2015 07:59:19 -0700
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <D868CD13-9E14-4040-B15F-E0C8E40B3E1C@skogoglandskap.no>
References: <mailman.53348.1421079558.1977.gdal-dev@lists.osgeo.org>
	<D868CD13-9E14-4040-B15F-E0C8E40B3E1C@skogoglandskap.no>
Message-ID: <54B7D5C7.8010401@stripfamily.net>

On 1/13/2015 2:37 AM, Graeme B. Bell wrote:
> Whenever you deal with national scale data for any country with coastline, you frequently end up with an absolutely gigantic and horrifically complex single polygon which depicts the coastline and all the rivers throughout the country as a single continuous edge. This mega-polygon, so often present and so often necessary, is very time-consuming for gdal_polygonise to produce and the result is very painful for every GIS geometry package to handle. 
>
> It would be great if the people behind gdal_polygonise could put some thought into this extremely common situation for anyone working with country or continent scale rasters to make sure that it is handled well. It has certainly affected us a great deal when working with data at up to 2m resolution for a country larger than the UK...

This second use case is a very bad mismatch to the design of the
polygonize algorithm, as you have discovered. If this is indeed a common
use case (I have no basis to judge one way or the other), a very
different algorithm would be far more appropriate.  In many respects,
the desired algorithm would also be easier to implement if the nature of
the data is basically binary - in the country/region/polygon, or out.
Matters get more complicated if we allow holes, disconnected regions, or
have multiple regions to identify (but a small number).

Perhaps one of the core project members could describe how to build a
case to support this need and submit an enhancement request.


From zoltans at geograph.co.za  Thu Jan 15 23:45:00 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 16 Jan 2015 09:45:00 +0200
Subject: [gdal-dev] Compiling gdal 1.11.1 on ubuntu 14.10
Message-ID: <54B8C17C.8090707@geograph.co.za>

Hi,
I compiled QGIS 2.7 successfully on ubuntu 14.10, and then noticed that 
it had gdal 1.10, so I downloaded the source for gdal 1.11.1 and 
compiled it.
The trouble is that running gdalinfo --version still gives me the 1.10 
version.

Can anyone spot my deliberate error?

This is a new system for experimenting with, so I am able to nuke it and 
start again by reloading ubuntu if need be.
My goal is to fiddle with QGIS dev, python dev, mapserver and postgis.
I'd like GRASS and  OTB  as well, plus all the "normal" dependencies 
like gdal, ogr, proj.....
(So if someone has a recipe for the correct installation sequence so 
that all the dependencies work out with their correct versions, please 
post it on this list.)

Thanks & regards,
Zoltan


*So, to the current status:*

    *#before make install:*
    geograph at gs01:~$ which gdalinfo
    /usr/bin/gdalinfo

    *#after make install:*   (note the different location)
    geograph at gs01:~$ which gdalinfo
    /usr/local/bin/gdalinfo

    *# So howcome?:*
    geograph at gs01:~$ */usr/bin/gdalinfo* --version
    GDAL *1.10.1*, released 2013/08/26
    geograph at gs01:~$
    geograph at gs01:~$ */usr/local/bin/gdalinfo* --version
    GDAL *1.10.1*, released 2013/08/26
    geograph at gs01:~$

*Just before sending this email I did:
*

    which gdalbuildvrt
    /usr/local/bin/gdalbuildvrt
    gdalbuildvrt --version
    ERROR 1: gdalbuildvrt was compiled against GDAL 1.11.1 but current
    library version is 1.10

*I then got into synaptic and removed gdal-bin and python-gdal but _not 
libgdal-dev and libgdal1h_ (all ver 1.10) as the last one would have 
removed grass and a bunch of other stuff, including postgre 9.4 and 
postgis, which I want.


The above is after running sudo make install:*

    geograph at gs01:~/dev/cpp/gdal-1.11.1$ sudo make install
    [sudo] password for geograph:
    (cd port; make)
    make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/port'
    make[1]: Nothing to be done for 'default'.
    make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/port'
    (cd gcore; make)
    make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/gcore'
    make[1]: Nothing to be done for 'default'.
    make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/gcore'
    (cd alg; make)
    make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/alg'

*etc etc etc**(and then the last few lines of the make install follow):*

    libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
    .libs/ogrtindex /usr/local/bin/ogrtindex
    libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
    .libs/ogrlineref /usr/local/bin/ogrlineref
    libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
    .libs/testepsg /usr/local/bin/testepsg
    libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
    .libs/gdalbuildvrt /usr/local/bin/gdalbuildvrt
    /bin/bash /home/geograph/dev/cpp/gdal-1.11.1/libtool --mode=install 
    /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c gdal-config-inst
    /usr/local/bin/gdal-config
    libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
    gdal-config-inst /usr/local/bin/gdal-config
    make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/apps'
    for f in LICENSE.TXT data/*.* ; do
    /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c -m 0644 $f
    /usr/local/share/gdal ; done
    /bin/bash /home/geograph/dev/cpp/gdal-1.11.1/libtool --mode=finish
    --silent /usr/local/lib
    /home/geograph/dev/cpp/gdal-1.11.1/install-sh -d
    /usr/local/lib/pkgconfig
    /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c -m 0644 gdal.pc
    /usr/local/lib/pkgconfig/gdal.pc
    geograph at gs01:~/dev/cpp/gdal-1.11.1$
    geograph at gs01:~/dev/cpp/gdal-1.11.1$
    geograph at gs01:~/dev/cpp/gdal-1.11.1$ which gdalinfo
    /usr/local/bin/gdalinfo
    geograph at gs01:~/dev/cpp/gdal-1.11.1$ gdalinfo  --version
    GDAL 1.10.1, released 2013/08/26
    geograph at gs01:~/dev/cpp/gdal-1.11.1$




-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150116/df56fbc4/attachment.html>

From zoltans at geograph.co.za  Fri Jan 16 00:06:57 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 16 Jan 2015 10:06:57 +0200
Subject: [gdal-dev] loading ESRI File Geodatabase into POSTGIS
Message-ID: <54B8C6A1.3050006@geograph.co.za>

Hi,
I've been offered some vector data in either Shapefile format, or File 
Geodatabase format.
I'll have to pay for the extract time, so I want to choose correctly.

 1. How reliable is the new File Geodatabase reader in gdal 1.11.1?
 2. Is there any benefit (in terms of information, topology, anything?)
    to getting file Geodatabase instead of Shape format?
    (I've read the famous "9 Reasons" doc, so I'm aware of the obvious
    limitations like field names, null values etc - I'm thinking more
    like "does Geodatabase have any topology - like adjoining polygons
    share the common line)

The data will be networks (sewer, water etc) and polygons - I'd kind of 
prefer to use Geodatabase as I have an inherent dislike to Shape files 
and their limitations, but not if there are still issues with the gdal 
geodatabase reader.

I intend to put the received data into postgis.

Anyone care to share some experiences?

Regards & thanks,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150116/d9b53570/attachment.html>

From even.rouault at spatialys.com  Fri Jan 16 01:58:23 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Jan 2015 10:58:23 +0100
Subject: [gdal-dev] Compiling gdal 1.11.1 on ubuntu 14.10
In-Reply-To: <54B8C17C.8090707@geograph.co.za>
References: <54B8C17C.8090707@geograph.co.za>
Message-ID: <1421402303.54b8e0bfe2159@imp.free.fr>

Selon Zoltan Szecsei <zoltans at geograph.co.za>:

> Hi,
> I compiled QGIS 2.7 successfully on ubuntu 14.10, and then noticed that
> it had gdal 1.10, so I downloaded the source for gdal 1.11.1 and
> compiled it.
> The trouble is that running gdalinfo --version still gives me the 1.10
> version.
>
> Can anyone spot my deliberate error?

This is because /usr/local/bin/gdalinfo still tries to find libgdal.so in
/usr/lib and not /usr/local/lib

Set LD_LIBRARY_PATH=/usr/local/lib as environment variable

>
> This is a new system for experimenting with, so I am able to nuke it and
> start again by reloading ubuntu if need be.
> My goal is to fiddle with QGIS dev, python dev, mapserver and postgis.
> I'd like GRASS and  OTB  as well, plus all the "normal" dependencies
> like gdal, ogr, proj.....
> (So if someone has a recipe for the correct installation sequence so
> that all the dependencies work out with their correct versions, please
> post it on this list.)
>
> Thanks & regards,
> Zoltan
>
>
> *So, to the current status:*
>
>     *#before make install:*
>     geograph at gs01:~$ which gdalinfo
>     /usr/bin/gdalinfo
>
>     *#after make install:*   (note the different location)
>     geograph at gs01:~$ which gdalinfo
>     /usr/local/bin/gdalinfo
>
>     *# So howcome?:*
>     geograph at gs01:~$ */usr/bin/gdalinfo* --version
>     GDAL *1.10.1*, released 2013/08/26
>     geograph at gs01:~$
>     geograph at gs01:~$ */usr/local/bin/gdalinfo* --version
>     GDAL *1.10.1*, released 2013/08/26
>     geograph at gs01:~$
>
> *Just before sending this email I did:
> *
>
>     which gdalbuildvrt
>     /usr/local/bin/gdalbuildvrt
>     gdalbuildvrt --version
>     ERROR 1: gdalbuildvrt was compiled against GDAL 1.11.1 but current
>     library version is 1.10
>
> *I then got into synaptic and removed gdal-bin and python-gdal but _not
> libgdal-dev and libgdal1h_ (all ver 1.10) as the last one would have
> removed grass and a bunch of other stuff, including postgre 9.4 and
> postgis, which I want.
>
>
> The above is after running sudo make install:*
>
>     geograph at gs01:~/dev/cpp/gdal-1.11.1$ sudo make install
>     [sudo] password for geograph:
>     (cd port; make)
>     make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/port'
>     make[1]: Nothing to be done for 'default'.
>     make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/port'
>     (cd gcore; make)
>     make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/gcore'
>     make[1]: Nothing to be done for 'default'.
>     make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/gcore'
>     (cd alg; make)
>     make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/alg'
>
> *etc etc etc**(and then the last few lines of the make install follow):*
>
>     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
>     .libs/ogrtindex /usr/local/bin/ogrtindex
>     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
>     .libs/ogrlineref /usr/local/bin/ogrlineref
>     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
>     .libs/testepsg /usr/local/bin/testepsg
>     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
>     .libs/gdalbuildvrt /usr/local/bin/gdalbuildvrt
>     /bin/bash /home/geograph/dev/cpp/gdal-1.11.1/libtool --mode=install
>     /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c gdal-config-inst
>     /usr/local/bin/gdal-config
>     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c
>     gdal-config-inst /usr/local/bin/gdal-config
>     make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/apps'
>     for f in LICENSE.TXT data/*.* ; do
>     /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c -m 0644 $f
>     /usr/local/share/gdal ; done
>     /bin/bash /home/geograph/dev/cpp/gdal-1.11.1/libtool --mode=finish
>     --silent /usr/local/lib
>     /home/geograph/dev/cpp/gdal-1.11.1/install-sh -d
>     /usr/local/lib/pkgconfig
>     /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c -m 0644 gdal.pc
>     /usr/local/lib/pkgconfig/gdal.pc
>     geograph at gs01:~/dev/cpp/gdal-1.11.1$
>     geograph at gs01:~/dev/cpp/gdal-1.11.1$
>     geograph at gs01:~/dev/cpp/gdal-1.11.1$ which gdalinfo
>     /usr/local/bin/gdalinfo
>     geograph at gs01:~/dev/cpp/gdal-1.11.1$ gdalinfo  --version
>     GDAL 1.10.1, released 2013/08/26
>     geograph at gs01:~/dev/cpp/gdal-1.11.1$
>
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> GIS and Photogrammetric Services
>
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> Mobile: +27-83-6004028
> Fax:    +27-86-6115323     www.geograph.co.za
> ===========================================
>
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 16 02:07:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Jan 2015 11:07:29 +0100
Subject: [gdal-dev] loading ESRI File Geodatabase into POSTGIS
In-Reply-To: <54B8C6A1.3050006@geograph.co.za>
References: <54B8C6A1.3050006@geograph.co.za>
Message-ID: <1421402849.54b8e2e16c5ea@imp.free.fr>

Zoltan,

I believe File Geodatabase support, either through FileGDB or OpenFileGDB
driver, should be rather solid in GDAL 1.11.1. There are some bugs in the
FileGDB SDK based driver (for example it cannot handle some "exotic" SRS), but
OpenFileGDB has not those limitations.
Regarding topology support, I'm not sure if File Geodatabase has support for it,
but both OGR drivers wouldn't handle that. They support feature tables only. But
if your data is proposed in both vector, I'd assume it is only feature tables.
So I don't think there's really an advantage in selecting one of the formats,
especially if you intend to ingest it into PostGIS just after.

Even

> Hi,
> I've been offered some vector data in either Shapefile format, or File
> Geodatabase format.
> I'll have to pay for the extract time, so I want to choose correctly.
>
>  1. How reliable is the new File Geodatabase reader in gdal 1.11.1?
>  2. Is there any benefit (in terms of information, topology, anything?)
>     to getting file Geodatabase instead of Shape format?
>     (I've read the famous "9 Reasons" doc, so I'm aware of the obvious
>     limitations like field names, null values etc - I'm thinking more
>     like "does Geodatabase have any topology - like adjoining polygons
>     share the common line)
>
> The data will be networks (sewer, water etc) and polygons - I'd kind of
> prefer to use Geodatabase as I have an inherent dislike to Shape files
> and their limitations, but not if there are still issues with the gdal
> geodatabase reader.
>
> I intend to put the received data into postgis.
>
> Anyone care to share some experiences?
>
> Regards & thanks,
> Zoltan
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> GIS and Photogrammetric Services
>
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> Mobile: +27-83-6004028
> Fax:    +27-86-6115323     www.geograph.co.za
> ===========================================
>
>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hrz at geodata.soton.ac.uk  Fri Jan 16 02:20:32 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 16 Jan 2015 10:20:32 +0000
Subject: [gdal-dev] Compiling gdal 1.11.1 on ubuntu 14.10
In-Reply-To: <54B8C17C.8090707@geograph.co.za>
References: <54B8C17C.8090707@geograph.co.za>
Message-ID: <54B8E5F0.9060501@geodata.soton.ac.uk>

Hi,

On 16/01/15 07:45, Zoltan Szecsei wrote:
> Hi,
 > I compiled QGIS 2.7 successfully on ubuntu 14.10, and then noticed 
that it had gdal 1.10, so I downloaded the source for gdal 1.11.1 and 
compiled it.
 > The trouble is that running gdalinfo --version still gives me the 
1.10 version.
 >
 > Can anyone spot my deliberate error?

Have you tried running the ldconfig command after running `make install` on
GDAL?  This should solve the dynamic link issues resulting in the 
version errors
you're experiencing when running the GDAL 1.11.1 binaries.

Alternatively you can adjust the `LD_LIBRARY_PATH` environment variable 
to point
to `/usr/local/lib` e.g.

     LD_LIBARY_PATH=/usr/local/lib /usr/local/bin/gdalinfo --version

You should also compile any dependent software after installing your 
custom GDAL
i.e. compile GDAL first then QGIS.

Best regards,

Homme
>
 > This is a new system for experimenting with, so I am able to nuke it 
and start again by reloading ubuntu if need be.
 > My goal is to fiddle with QGIS dev, python dev, mapserver and postgis.
 > I'd like GRASS and  OTB  as well, plus all the "normal" dependencies 
like gdal, ogr, proj.....
 > (So if someone has a recipe for the correct installation sequence so 
that all the dependencies work out with their correct versions, please 
post it on this list.)
 >
 > Thanks & regards,
 > Zoltan
 >
 >
 > So, to the current status:
 >
 >     #before make install:
 >     geograph at gs01:~$ which gdalinfo
 >     /usr/bin/gdalinfo
 >
 >     #after make install:   (note the different location)
 >     geograph at gs01:~$ which gdalinfo
 >     /usr/local/bin/gdalinfo
 >
 >     # So howcome?:
 >     geograph at gs01:~$ /usr/bin/gdalinfo --version
 >     GDAL 1.10.1, released 2013/08/26
 >     geograph at gs01:~$
 >     geograph at gs01:~$ /usr/local/bin/gdalinfo --version
 >     GDAL 1.10.1, released 2013/08/26
 >     geograph at gs01:~$
 >
 > Just before sending this email I did:
 >
 >     which gdalbuildvrt
 >     /usr/local/bin/gdalbuildvrt
 >     gdalbuildvrt --version
 >     ERROR 1: gdalbuildvrt was compiled against GDAL 1.11.1 but 
current library version is 1.10
 >
 > I then got into synaptic and removed gdal-bin and python-gdal but not 
libgdal-dev and libgdal1h (all ver 1.10) as the last one would have 
removed grass and a bunch of other stuff, including postgre 9.4 and 
postgis, which I want.
 >
 >
 > The above is after running sudo make install:
 >
 >     geograph at gs01:~/dev/cpp/gdal-1.11.1$ sudo make install
 >     [sudo] password for geograph:
 >     (cd port; make)
 >     make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/port'
 >     make[1]: Nothing to be done for 'default'.
 >     make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/port'
 >     (cd gcore; make)
 >     make[1]: Entering directory 
'/home/geograph/dev/cpp/gdal-1.11.1/gcore'
 >     make[1]: Nothing to be done for 'default'.
 >     make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/gcore'
 >     (cd alg; make)
 >     make[1]: Entering directory '/home/geograph/dev/cpp/gdal-1.11.1/alg'
 >
 > etc etc etc (and then the last few lines of the make install follow):
 >
 >     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh 
-c .libs/ogrtindex /usr/local/bin/ogrtindex
 >     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh 
-c .libs/ogrlineref /usr/local/bin/ogrlineref
 >     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh 
-c .libs/testepsg /usr/local/bin/testepsg
 >     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh 
-c .libs/gdalbuildvrt /usr/local/bin/gdalbuildvrt
 >     /bin/bash /home/geograph/dev/cpp/gdal-1.11.1/libtool 
--mode=install  /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c 
gdal-config-inst /usr/local/bin/gdal-config
 >     libtool: install: /home/geograph/dev/cpp/gdal-1.11.1/install-sh 
-c gdal-config-inst /usr/local/bin/gdal-config
 >     make[1]: Leaving directory '/home/geograph/dev/cpp/gdal-1.11.1/apps'
 >     for f in LICENSE.TXT data/*.* ; do 
/home/geograph/dev/cpp/gdal-1.11.1/install-sh -c -m 0644 $f 
/usr/local/share/gdal ; done
 >     /bin/bash /home/geograph/dev/cpp/gdal-1.11.1/libtool 
--mode=finish --silent /usr/local/lib
 >     /home/geograph/dev/cpp/gdal-1.11.1/install-sh -d 
/usr/local/lib/pkgconfig
 >     /home/geograph/dev/cpp/gdal-1.11.1/install-sh -c -m 0644 gdal.pc 
/usr/local/lib/pkgconfig/gdal.pc
 >     geograph at gs01:~/dev/cpp/gdal-1.11.1$
 >     geograph at gs01:~/dev/cpp/gdal-1.11.1$
 >     geograph at gs01:~/dev/cpp/gdal-1.11.1$ which gdalinfo
 >     /usr/local/bin/gdalinfo
 >     geograph at gs01:~/dev/cpp/gdal-1.11.1$ gdalinfo  --version
 >     GDAL 1.10.1, released 2013/08/26
 >     geograph at gs01:~/dev/cpp/gdal-1.11.1$
 >
 >
 >
 >
 > --
 >
 > ===========================================
 > Zoltan Szecsei PrGISc [PGP0031]
 > Geograph (Pty) Ltd.
 > GIS and Photogrammetric Services
 >
 > P.O. Box 7, Muizenberg 7950, South Africa.
 >
 > Mobile: +27-83-6004028
 > Fax:    +27-86-6115323     www.geograph.co.za
 > ===========================================
 >
 >
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev at lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150116/b173a8b3/attachment-0001.html>

From pramsey at cleverelephant.ca  Fri Jan 16 12:28:01 2015
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri, 16 Jan 2015 12:28:01 -0800
Subject: [gdal-dev] PgSQL and OLCFastFeatureCount
Message-ID: <etPan.54b97451.3d1b58ba.452@Butterfly.local>

The PgSQL driver is returning TRUE for?OLCFastFeatureCount and then running "SELECT Count(*)? to fulfill the request. Since that is actually going to apply a full table scan, it?s not *really* a fast feature count in my estimation, but perhaps GDAL has a different standard? What?s the standard for a fast feature count? Basically instant (the record count resides in header metadata or something similar)? Or ?fast enough for small things??

P.


--?
Paul Ramsey
http://cleverelephant.ca
http://postgis.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150116/1b1fdc36/attachment.html>

From even.rouault at spatialys.com  Fri Jan 16 12:39:20 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Jan 2015 21:39:20 +0100
Subject: [gdal-dev] PgSQL and OLCFastFeatureCount
In-Reply-To: <etPan.54b97451.3d1b58ba.452@Butterfly.local>
References: <etPan.54b97451.3d1b58ba.452@Butterfly.local>
Message-ID: <1421440760.54b976f857a0d@imp.free.fr>

Selon Paul Ramsey <pramsey at cleverelephant.ca>:

> The PgSQL driver is returning TRUE for??OLCFastFeatureCount and then running
> "SELECT Count(*)??? to fulfill the request. Since that is actually going to
> apply a full table scan, it???s not *really* a fast feature count in my
> estimation, but perhaps GDAL has a different standard? What???s the standard
> for a fast feature count? Basically instant (the record count resides in
> header metadata or something similar)? Or ???fast enough for small things????

Paul,

The standard for "fast" is not well defined I think. Instant would be ideal, but
a number of drivers advertize FastFeatureCount when they have a specialized
implementation that is faster than the generic one. In that instance the request
is run entirely on server side, so this is much faster than the default
implementation. It is a bit surprising that PostgreSQL cannot maintain the
feature count without going to a full table scan, but I guess there are
technical difficulties related to concurrent updates to do so.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Fri Jan 16 16:37:30 2015
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 16 Jan 2015 17:37:30 -0700
Subject: [gdal-dev] GDALFillNodata needs GTiff driver?
Message-ID: <CADPhZXwHg40jmaOVscNqrFHF7aPgpAqXQhK+b88qW2dc5j9sDA@mail.gmail.com>

Hi all,

I'm wondering about the possibility of using MEM datasets in
GDALFillNodata() instead of TIFFs. I see in the code

GDALDriverH hDriver = GDALGetDriverByName( "GTiff" ); if (hDriver == NULL)
{ CPLError(CE_Failure, CPLE_AppDefined, "GDALFillNodata needs GTiff
driver"); return CE_Failure; }
Does the algorithm require TIFF features or can I swap in the MEM driver?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150116/ebcde78c/attachment.html>

From zoltans at geograph.co.za  Sat Jan 17 09:31:00 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat, 17 Jan 2015 19:31:00 +0200
Subject: [gdal-dev] Compiling gdal 1.11.1 on ubuntu 14.10
In-Reply-To: <54B8E5F0.9060501@geodata.soton.ac.uk>
References: <54B8C17C.8090707@geograph.co.za>
	<54B8E5F0.9060501@geodata.soton.ac.uk>
Message-ID: <54BA9C54.1070802@geograph.co.za>

On 2015/01/16 12:20, Homme Zwaagstra wrote:
> Hi,
>
> On 16/01/15 07:45, Zoltan Szecsei wrote:
> > Hi,
> > I compiled QGIS 2.7 successfully on ubuntu 14.10, and then noticed 
> that it had gdal 1.10, so I downloaded the source for gdal 1.11.1 and 
> compiled it. > The trouble is that running gdalinfo --version still 
> gives me the 1.10 version. > Can anyone spot my deliberate error?
>
> Have you tried running the ldconfig command after running `make 
> install` on
> GDAL?  This should solve the dynamic link issues resulting in the 
> version errors
> you're experiencing when running the GDAL 1.11.1 binaries.
>
> Alternatively you can adjust the `LD_LIBRARY_PATH` environment 
> variable to point
> to `/usr/local/lib` e.g.
>
>     LD_LIBARY_PATH=/usr/local/lib ;  /usr/local/bin/gdalinfo --version
Thanks both Even & Homme for the comments.
Interestingly, I left it for a few days as I had other priorities, and 
now that I've powered up the PC again, it all works! (implying that I 
had some other funny setting for that session).
Regards,
Zoltan

>
> You should also compile any dependent software after installing your 
> custom GDAL
> i.e. compile GDAL first then QGIS.
>
> Best regards,
>
> Homme
>

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150117/65c39918/attachment.html>

From even.rouault at spatialys.com  Sat Jan 17 11:26:14 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 17 Jan 2015 20:26:14 +0100
Subject: [gdal-dev] GDALFillNodata needs GTiff driver?
In-Reply-To: <CADPhZXwHg40jmaOVscNqrFHF7aPgpAqXQhK+b88qW2dc5j9sDA@mail.gmail.com>
References: <CADPhZXwHg40jmaOVscNqrFHF7aPgpAqXQhK+b88qW2dc5j9sDA@mail.gmail.com>
Message-ID: <201501172026.14883.even.rouault@spatialys.com>

Le samedi 17 janvier 2015 01:37:30, Sean Gillies a ?crit :
> Hi all,
> 
> I'm wondering about the possibility of using MEM datasets in
> GDALFillNodata() instead of TIFFs. I see in the code
> 
> GDALDriverH hDriver = GDALGetDriverByName( "GTiff" ); if (hDriver == NULL)
> { CPLError(CE_Failure, CPLE_AppDefined, "GDALFillNodata needs GTiff
> driver"); return CE_Failure; }
> Does the algorithm require TIFF features or can I swap in the MEM driver?

Sean,

AFAIK you can use any driver. TIFF was used to generate temporary files, but if 
you've enough RAM, MEM should do it.
You will probably have to edit the "static const char *apszOptions[]" to make 
it an empty list to avoid warnings about non handled creation options.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Sat Jan 17 12:05:42 2015
From: sean at mapbox.com (Sean Gillies)
Date: Sat, 17 Jan 2015 13:05:42 -0700
Subject: [gdal-dev] GDALFillNodata needs GTiff driver?
In-Reply-To: <201501172026.14883.even.rouault@spatialys.com>
References: <CADPhZXwHg40jmaOVscNqrFHF7aPgpAqXQhK+b88qW2dc5j9sDA@mail.gmail.com>
	<201501172026.14883.even.rouault@spatialys.com>
Message-ID: <CADPhZXxz9g9fvXDCZBxyQmuMbvmjc83GjvX3k=NEu1=KriJf7Q@mail.gmail.com>

On Sat, Jan 17, 2015 at 12:26 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le samedi 17 janvier 2015 01:37:30, Sean Gillies a ?crit :
> > Hi all,
> >
> > I'm wondering about the possibility of using MEM datasets in
> > GDALFillNodata() instead of TIFFs. I see in the code
> >
> > GDALDriverH hDriver = GDALGetDriverByName( "GTiff" ); if (hDriver ==
> NULL)
> > { CPLError(CE_Failure, CPLE_AppDefined, "GDALFillNodata needs GTiff
> > driver"); return CE_Failure; }
> > Does the algorithm require TIFF features or can I swap in the MEM driver?
>
> Sean,
>
> AFAIK you can use any driver. TIFF was used to generate temporary files,
> but if
> you've enough RAM, MEM should do it.
> You will probably have to edit the "static const char *apszOptions[]" to
> make
> it an empty list to avoid warnings about non handled creation options.
>
> Even
>

Thanks, Even, I'll let you know how it turns out.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150117/911326b6/attachment.html>

From pramsey at cleverelephant.ca  Sat Jan 17 13:10:23 2015
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Sat, 17 Jan 2015 13:10:23 -0800
Subject: [gdal-dev] PgSQL and OLCFastFeatureCount
In-Reply-To: <1421440760.54b976f857a0d@imp.free.fr>
References: <etPan.54b97451.3d1b58ba.452@Butterfly.local>
	<1421440760.54b976f857a0d@imp.free.fr>
Message-ID: <CACowWR0kW2HFY4P6U1ACPgy9Q8OdeXQ7sK63-eWdB_PCQ5wsvg@mail.gmail.com>

How accurate is the fast feature count supposed to be? An estimate
could be pulled from the system stats pretty much instantly, but it
wouldn't be exact.

I  come to this question via the FDW work, where the first step PgSQL
does is to try and plan the query and get selectivity estimates from
all the nodes, including the FDW node. That means the FDW node is
expected to return a guess of how many records the query will return,
so I end up calling the OGR feature count method. But if it's really
slow (as SELECT Count(*) can be) then thing will fall apart pretty
quick.

P.

On Fri, Jan 16, 2015 at 12:39 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Selon Paul Ramsey <pramsey at cleverelephant.ca>:
>
>> The PgSQL driver is returning TRUE for? OLCFastFeatureCount and then running
>> "SELECT Count(*)?   to fulfill the request. Since that is actually going to
>> apply a full table scan, it?  s not *really* a fast feature count in my
>> estimation, but perhaps GDAL has a different standard? What?  s the standard
>> for a fast feature count? Basically instant (the record count resides in
>> header metadata or something similar)? Or ?  fast enough for small things?  ?
>
> Paul,
>
> The standard for "fast" is not well defined I think. Instant would be ideal, but
> a number of drivers advertize FastFeatureCount when they have a specialized
> implementation that is faster than the generic one. In that instance the request
> is run entirely on server side, so this is much faster than the default
> implementation. It is a bit surprising that PostgreSQL cannot maintain the
> feature count without going to a full table scan, but I guess there are
> technical difficulties related to concurrent updates to do so.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Sat Jan 17 13:24:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 17 Jan 2015 22:24:53 +0100
Subject: [gdal-dev] PgSQL and OLCFastFeatureCount
In-Reply-To: <CACowWR0kW2HFY4P6U1ACPgy9Q8OdeXQ7sK63-eWdB_PCQ5wsvg@mail.gmail.com>
References: <etPan.54b97451.3d1b58ba.452@Butterfly.local>
	<1421440760.54b976f857a0d@imp.free.fr>
	<CACowWR0kW2HFY4P6U1ACPgy9Q8OdeXQ7sK63-eWdB_PCQ5wsvg@mail.gmail.com>
Message-ID: <201501172224.53936.even.rouault@spatialys.com>

Le samedi 17 janvier 2015 22:10:23, Paul Ramsey a ?crit :
> How accurate is the fast feature count supposed to be? An estimate
> could be pulled from the system stats pretty much instantly, but it
> wouldn't be exact.

From the documentation :

/**

 \fn int OGRLayer::GetFeatureCount( int bForce = TRUE );

 \brief Fetch the feature count in this layer. 

 Returns the number of features in the layer.  For dynamic databases the
 count may not be exact.  If bForce is FALSE, and it would be expensive
 to establish the feature count a value of -1 may be returned indicating
 that the count isn't know.  If bForce is TRUE some implementations will
 actually scan the entire layer once to count objects. 

 The returned count takes the spatial filter into account. 

 Note that some implementations of this method may alter the read cursor
 of the layer.

 This method is the same as the C function OGR_L_GetFeatureCount().

 @param bForce Flag indicating whether the count should be computed even
 if it is expensive.

 @return feature count, -1 if count not known. 

*/

So we could in theory return -1 if bForce = FALSE (the generic implementation 
in OGRLayer does that). However I'm afraid it would break some applications, 
and it would not help for your use case. You would likely need a 
GetApproxFeatureCount() that could default to GetFeatureCount(FALSE) (or 
perhaps just return -1) for the generic implementation, and use PostgreSQL 
stats for the PG driver.

> 
> I  come to this question via the FDW work, where the first step PgSQL
> does is to try and plan the query and get selectivity estimates from
> all the nodes, including the FDW node. That means the FDW node is
> expected to return a guess of how many records the query will return,
> so I end up calling the OGR feature count method. But if it's really
> slow (as SELECT Count(*) can be) then thing will fall apart pretty
> quick.
> 
> P.
> 
> On Fri, Jan 16, 2015 at 12:39 PM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Selon Paul Ramsey <pramsey at cleverelephant.ca>:
> >> The PgSQL driver is returning TRUE for? OLCFastFeatureCount and then
> >> running "SELECT Count(*)?   to fulfill the request. Since that is
> >> actually going to apply a full table scan, it?  s not *really* a fast
> >> feature count in my estimation, but perhaps GDAL has a different
> >> standard? What?  s the standard for a fast feature count? Basically
> >> instant (the record count resides in header metadata or something
> >> similar)? Or ?  fast enough for small things?  ?
> > 
> > Paul,
> > 
> > The standard for "fast" is not well defined I think. Instant would be
> > ideal, but a number of drivers advertize FastFeatureCount when they have
> > a specialized implementation that is faster than the generic one. In
> > that instance the request is run entirely on server side, so this is
> > much faster than the default implementation. It is a bit surprising that
> > PostgreSQL cannot maintain the feature count without going to a full
> > table scan, but I guess there are technical difficulties related to
> > concurrent updates to do so.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From rayg at daylongraphics.com  Sun Jan 18 01:46:41 2015
From: rayg at daylongraphics.com (Ray Gardener)
Date: Sun, 18 Jan 2015 01:46:41 -0800
Subject: [gdal-dev] Locale issue with OGRCreateCoordinateTransformation
In-Reply-To: <201501172224.53936.even.rouault@spatialys.com>
References: <etPan.54b97451.3d1b58ba.452@Butterfly.local>	<1421440760.54b976f857a0d@imp.free.fr>	<CACowWR0kW2HFY4P6U1ACPgy9Q8OdeXQ7sK63-eWdB_PCQ5wsvg@mail.gmail.com>
	<201501172224.53936.even.rouault@spatialys.com>
Message-ID: <54BB8101.5070102@daylongraphics.com>

Has anyone had a problem (GDAL 1.8.0.0 or higher) with the 
OGRCreateCoordinateTransformation function
in ogr/ogrct.cpp changing the current locale back to the default "C" locale?



From rayg at daylongraphics.com  Sun Jan 18 02:23:04 2015
From: rayg at daylongraphics.com (Ray Gardener)
Date: Sun, 18 Jan 2015 02:23:04 -0800
Subject: [gdal-dev] Locale issue with OGRCreateCoordinateTransformation
In-Reply-To: <54BB8101.5070102@daylongraphics.com>
References: <etPan.54b97451.3d1b58ba.452@Butterfly.local>	<1421440760.54b976f857a0d@imp.free.fr>	<CACowWR0kW2HFY4P6U1ACPgy9Q8OdeXQ7sK63-eWdB_PCQ5wsvg@mail.gmail.com>	<201501172224.53936.even.rouault@spatialys.com>
	<54BB8101.5070102@daylongraphics.com>
Message-ID: <54BB8988.1050805@daylongraphics.com>

Sorry, false alarm, my copy of PROJ.4 pj_init is old and was not using 
strdup(setlocale(...))

Ray


On 1/18/2015 1:46 AM, Ray Gardener wrote:
> Has anyone had a problem (GDAL 1.8.0.0 or higher) with the 
> OGRCreateCoordinateTransformation function
> in ogr/ogrct.cpp changing the current locale back to the default "C" 
> locale?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From grb at skogoglandskap.no  Mon Jan 19 02:24:22 2015
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Mon, 19 Jan 2015 10:24:22 +0000
Subject: [gdal-dev] gdal_polygonize.py TIF to JSON performance
In-Reply-To: <54B74D1C.5060005@stripfamily.net>
References: <mailman.53348.1421079558.1977.gdal-dev@lists.osgeo.org>
	<D868CD13-9E14-4040-B15F-E0C8E40B3E1C@skogoglandskap.no>
	<54B74D1C.5060005@stripfamily.net>
Message-ID: <37CD504E-7AD2-43E7-95BD-3A9A15EB26E4@skogoglandskap.no>

>> Whenever you deal with national scale data for any country with coastline, you frequently end up with an absolutely gigantic and horrifically complex single polygon which depicts the coastline and all the rivers throughout the country as a single continuous edge. This mega-polygon, so often present and so often necessary, is very time-consuming for gdal_polygonise to produce and the result is very painful for every GIS geometry package to handle. 
>> 
>> It would be great if the people behind gdal_polygonise could put some thought into this extremely common situation for anyone working with country or continent scale rasters to make sure that it is handled well. It has certainly affected us a great deal when working with data at up to 2m resolution for a country larger than the UK...
>> 
> 
> This second use case is a very bad mismatch to the design of the polygonize algorithm, as you have discovered. If this is indeed a common use case (I have no basis to judge one way or the other), a very different algorithm would be far more appropriate.  In many respects, the desired algorithm would also be easier to implement if the nature of the data is basically binary - in the country/region/polygon, or out. Matters get more complicated if we allow holes, disconnected regions, or have multiple regions to identify (but a small number). 
> 
> Perhaps one of the core project members could describe how to build a case to support this need and submit an enhancement request.

Hi David, thanks for the reply.

It's probably worth noting that there are analogous situations for countries without coastline. Consider a national map raster for a landlocked country, which has been masked to remove neighbours. You could get a giant polygon surrounding the country representing the complexity of all the border as a single polygon. It's not quite so fiendish as the example I gave above, but it can happen pretty easily.

Also, while I appreciate the value of checking commonality of use cases, there is also an alternative way of viewing the issue: 

Does GDAL have the features and behaviour that are needed for national scale map work, or is it a 'town and county' type of project?

There is a hidden danger in relying on how commonly something occurs as a use case:  if a piece of software currently can't support a use case or supports it incredibly poorly, then by definition there will be few (likely zero) people using it for that purpose. 

Graeme.

From Richard.Mitanchey at cerema.fr  Mon Jan 19 03:46:20 2015
From: Richard.Mitanchey at cerema.fr (MITANCHEY Richard - CEREMA/DTecTV/ESI/GNSI)
Date: Mon, 19 Jan 2015 12:46:20 +0100
Subject: [gdal-dev] WindowsLatin1 encoded strings
Message-ID: <54BCEE8C.6090703@cerema.fr>

Hi,
I need to get WindowsLatin1 encoded Strings (mapinfo .tab files), and I 
cannot really convert original data to UTF-8 before...
I'm using OGR (GDAL Java binding) with GetFieldAsString() but string 
lengths (and chars within) are most of the times incorrect
Is there any way to specify read and write string encodings ?
Should it be a pb of GDAL Java binding ?
TIA for your answers
Richard

From even.rouault at spatialys.com  Mon Jan 19 04:17:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Jan 2015 13:17:11 +0100
Subject: [gdal-dev] WindowsLatin1 encoded strings
In-Reply-To: <54BCEE8C.6090703@cerema.fr>
References: <54BCEE8C.6090703@cerema.fr>
Message-ID: <201501191317.12031.even.rouault@spatialys.com>

Le lundi 19 janvier 2015 12:46:20, MITANCHEY Richard - CEREMA/DTecTV/ESI/GNSI 
a ?crit :
> Hi,
> I need to get WindowsLatin1 encoded Strings (mapinfo .tab files), and I
> cannot really convert original data to UTF-8 before...
> I'm using OGR (GDAL Java binding) with GetFieldAsString() but string
> lengths (and chars within) are most of the times incorrect
> Is there any way to specify read and write string encodings ?
> Should it be a pb of GDAL Java binding ?

Richard,

This is a problem of the TAB driver that should recode strings to UTF-8 
internally as this is the conventionnal encoding decided in OGR.
And also a problem of the Java bindings which should offer a binary interface 
in that case, since GetFieldAsString() can only be used to convert native 
UTF-8 strings into Java unicode strings.
Both issues could potentially be fixed.

A potential workaround is to convert the .tab into a .shp by using --config 
SHAPE_ENCODING "" in ogr2ogr, so that Latin1 strings are put directly 
unmodified. And then read the shapefile, in which case it will recode from 
Latin1 to UTF-8, and then you can use GetFieldAsString()

Even


> TIA for your answers
> Richard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mathieu.rajerison at gmail.com  Mon Jan 19 04:40:37 2015
From: mathieu.rajerison at gmail.com (mathieu)
Date: Mon, 19 Jan 2015 04:40:37 -0800 (PST)
Subject: [gdal-dev] Cropping a raster by a polygon - only nodata outside
 polygon wanted
In-Reply-To: <loom.20150114T191501-856@post.gmane.org>
References: <1421230092768-5181426.post@n6.nabble.com>
	<1421231961.54b64759399d5@imp.free.fr>
	<CAGfc75nyuBjrefdCSg61A+tt1yAjD9sQAwuB=-g6K4XCWLVgXQ@mail.gmail.com>
	<1421233612.54b64dccd1f4f@imp.free.fr>
	<CAGfc75n4fCB3zgFQmeU-31pdBrPuN-8-w3nhJnDpXCx4frn3qg@mail.gmail.com>
	<loom.20150114T191501-856@post.gmane.org>
Message-ID: <1421671237142-5182316.post@n6.nabble.com>

It's a very nice workaround !

Thanks for the tip !

I think it will be ok for me now :)



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Cropping-a-raster-by-a-polygon-only-nodata-outside-polygon-wanted-tp5181426p5182316.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Richard.Mitanchey at cerema.fr  Mon Jan 19 04:46:58 2015
From: Richard.Mitanchey at cerema.fr (MITANCHEY Richard - CEREMA/DTecTV/ESI/GNSI)
Date: Mon, 19 Jan 2015 13:46:58 +0100
Subject: [gdal-dev] WindowsLatin1 encoded strings
In-Reply-To: <201501191317.12031.even.rouault@spatialys.com>
References: <54BCEE8C.6090703@cerema.fr>
	<201501191317.12031.even.rouault@spatialys.com>
Message-ID: <54BCFCC2.80208@cerema.fr>

Even,
Thank you for your excellent suggestion (as always)
I'll try to implement it into my Talend TOS project (quite a bit 
complicated but it  may works)
Richard

Le 19/01/2015 13:17, > Even Rouault (par Internet) a ?crit :
> Le lundi 19 janvier 2015 12:46:20, MITANCHEY Richard - CEREMA/DTecTV/ESI/GNSI
> a ?crit :
>> Hi,
>> I need to get WindowsLatin1 encoded Strings (mapinfo .tab files), and I
>> cannot really convert original data to UTF-8 before...
>> I'm using OGR (GDAL Java binding) with GetFieldAsString() but string
>> lengths (and chars within) are most of the times incorrect
>> Is there any way to specify read and write string encodings ?
>> Should it be a pb of GDAL Java binding ?
> Richard,
>
> This is a problem of the TAB driver that should recode strings to UTF-8
> internally as this is the conventionnal encoding decided in OGR.
> And also a problem of the Java bindings which should offer a binary interface
> in that case, since GetFieldAsString() can only be used to convert native
> UTF-8 strings into Java unicode strings.
> Both issues could potentially be fixed.
>
> A potential workaround is to convert the .tab into a .shp by using --config
> SHAPE_ENCODING "" in ogr2ogr, so that Latin1 strings are put directly
> unmodified. And then read the shapefile, in which case it will recode from
> Latin1 to UTF-8, and then you can use GetFieldAsString()
>
> Even
>
>
>> TIA for your answers
>> Richard
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150119/40fc67c3/attachment.html>

From marco.stornelli at selex-es.com  Mon Jan 19 08:10:25 2015
From: marco.stornelli at selex-es.com (marco.stornelli at selex-es.com)
Date: Mon, 19 Jan 2015 17:10:25 +0100
Subject: [gdal-dev] Find junctions in VMAP with gdal
Message-ID: <OF7AA4A0BB.A20BEB01-ONC1257DD2.00589194-C1257DD2.0058D8C2@LocalDomain>

Hi,

I'm reading a VMAP using GDAL and OGDI. It works well but I don't know how 
to find the road junctions. I'm reading each edge and each edge has got 
several segments. Now I need to knwo what points are junctions. Is there 
any easy way to get this information? Is there an API to find this 
information with GDAL? Any tips is appreciated.

Regards,

Marco

This email and any attachments are confidential to the intended recipient and may also be privileged. If you are not the intended recipient please delete it from your system and notify the sender. You should not copy it or use it for any purpose nor disclose or distribute its contents to any other person. 
Questa e-mail e tutti i suoi allegati sono da intendersi inviati in via riservata all'effettivo destinatario e possono essere soggetti a restrizioni legali. Se non siete l'effettivo destinatario o avete ricevuto il messaggio per errore siete pregati di cancellarlo dal vostro sistema e di avvisare il mittente. E' vietata la duplicazione, l'uso a qualsiasi titolo, la divulgazione o la distribuzione dei contenuti di questa e-mail a qualunque altro soggetto. 

Prima di stampare questa comunicazione consideratene, per favore, l'impatto ambientale. 
Please   consider  the  environment   before   printing   this   email   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150119/022cdeb0/attachment.html>

From tomerlieber at gmail.com  Tue Jan 20 07:57:55 2015
From: tomerlieber at gmail.com (Tomer)
Date: Tue, 20 Jan 2015 07:57:55 -0800 (PST)
Subject: [gdal-dev] NODATA tag
Message-ID: <1421769475072-5182620.post@n6.nabble.com>

Hello,

The existing behaviour of GDAL(e.g gdal_translate) is:
1. if we run "gdal_translate -a_nodata 255 input output"
the NODATA tag in the header of the output is written as 255
and the pixels that have no source data are set to the given NODATA value.

2. if we run "gdal_translate -a_nodata none input output"
there is no NODATA tag in the header of the ouput
and the pixels that no source data are set to 0(black)

How can we set the value of the pixels that have no source data without
creating the NODATA tag?
We have tried to modify the tiff driver by changing the
methodDataset::WriteNoDataValue in geotiff.cpp 
(removing its content), it didn't change nothing in the behaviour (the
NODATA tag was still written)

Best regards,
Tomer



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/NODATA-tag-tp5182620.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From zoltans at geograph.co.za  Tue Jan 20 08:57:14 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue, 20 Jan 2015 18:57:14 +0200
Subject: [gdal-dev] Compiling QGIS on ubuntu 14.10 - Couldn't load PyQGIS"
	error
In-Reply-To: <1421402303.54b8e0bfe2159@imp.free.fr>
References: <54B8C17C.8090707@geograph.co.za>
	<1421402303.54b8e0bfe2159@imp.free.fr>
Message-ID: <54BE88EA.9080801@geograph.co.za>

Hi,
I've gone through the recommended process 
(http://htmlpreview.github.io/?https://raw.github.com/qgis/QGIS/master/doc/INSTALL.html)

I had a problem with Grass, but set "with grass" in ccmake to "No" and that solved that (for now).

After firing up QGIS, I get the dreaded "Couldn't load PyQGIS" error.
My Python is installed from the default ubuntu 14.10 repository, and is presumably the wrong version for QGIS 2.7.0 Master.

Is this a python version issue, and which version (from where) do I need?
I did my anonymous git check out a week ago - could this also be part of the issue?

Thanks in advance,
Zoltan.

    QGIS version                 2.7.0-Master       QGIS code
    revision        exported
    Compiled against Qt          4.8.6              Running against
    Qt        4.8.6
    Compiled against GDAL/OGR    1.11.1             Running against
    GDAL/OGR  1.11.1
    Compiled against GEOS        3.4.2-CAPI-1.8.2   Running against
    GEOS      3.4.2-CAPI-1.8.2 r3921
    PostgreSQL Client Version    9.4rc1 SpatiaLite Version        4.1.1
    QWT Version                  5.2.3              PROJ.4 Version   
             480
    QScintilla2 Version          2.8.3



  --

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150120/ddf2dfa6/attachment.html>

From dmorissette at mapgears.com  Tue Jan 20 11:05:23 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 20 Jan 2015 14:05:23 -0500
Subject: [gdal-dev] List of driver maintainers wanted
In-Reply-To: <loom.20150113T135057-691@post.gmane.org>
References: <loom.20150113T135057-691@post.gmane.org>
Message-ID: <54BEA6F3.30903@mapgears.com>

Hi Jukka, and all,

First of all, huge thanks to you Jukka for all your work cleaning up the 
list of tickets.

In theory I am supposed to be the maintainer of the MITAB driver, but I 
have been inactive for a little while and I apologize for my lack of 
responses on the tickets that relate to this driver. I wish I had more 
time available, but unfortunately for the time being I am unable to 
attend to MITAB tickets, so you should not count on me for those. I hope 
to get back to coding someday, but I'm not sure when that day will be. 
In the meantime, Even has done a great job in attending to tickets on 
which I failed to act (Thanks Even!).

With respect to upstream MITAB, it has become quite out of sync with the 
copy that lives in the OGR source tree, to the point that we should 
consider upstream as deprecated and the version in OGR should probably 
be considered the master from now on. That would solve the question of 
tickets that relate to pushing stuff upstream.

I actually wonder if there are still people who rely on the MITAB C API 
which was the key feature of upstream standalone MITAB and the reason to 
maintain it separate form the whole OGR lib. If those users are 
interested, they could either fork the source of this version which is 
now at https://github.com/mapgears/mitab or contact a developer to offer 
to fund support of the standalone MITAB.

Daniel


On 2015-01-13 7:59 AM, Jukka Rahkonen wrote:
> Hi,
>
> There are lots of tickets and patches in the GDAL trac with no reaction from
> GDAL developer side ever. If I could find a list of maintainers of drivers,
> OS specialists (Windows, OSX, uncommon Linux) etc. I could add their
> addresses to Carbon copy field for encouraging them to react somehow which
> would be polite for the people who make tickets which are sometimes of very
> high quality. Do we have such a list? I mean some longer list than it used
> to be Frank and during the last years it has been Even.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From sean at mapbox.com  Tue Jan 20 13:10:57 2015
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 20 Jan 2015 14:10:57 -0700
Subject: [gdal-dev] GDALFillNodata needs GTiff driver?
In-Reply-To: <CADPhZXxz9g9fvXDCZBxyQmuMbvmjc83GjvX3k=NEu1=KriJf7Q@mail.gmail.com>
References: <CADPhZXwHg40jmaOVscNqrFHF7aPgpAqXQhK+b88qW2dc5j9sDA@mail.gmail.com>
	<201501172026.14883.even.rouault@spatialys.com>
	<CADPhZXxz9g9fvXDCZBxyQmuMbvmjc83GjvX3k=NEu1=KriJf7Q@mail.gmail.com>
Message-ID: <CADPhZXws6dbWpXpYRXdV4CtnOnAKnvaH2tmFtHmURhVZMwD1OA@mail.gmail.com>

On Sat, Jan 17, 2015 at 1:05 PM, Sean Gillies <sean at mapbox.com> wrote:

> On Sat, Jan 17, 2015 at 12:26 PM, Even Rouault <even.rouault at spatialys.com
> > wrote:
>
>> Le samedi 17 janvier 2015 01:37:30, Sean Gillies a ?crit :
>> > Hi all,
>> >
>> > I'm wondering about the possibility of using MEM datasets in
>> > GDALFillNodata() instead of TIFFs. I see in the code
>> >
>> > GDALDriverH hDriver = GDALGetDriverByName( "GTiff" ); if (hDriver ==
>> NULL)
>> > { CPLError(CE_Failure, CPLE_AppDefined, "GDALFillNodata needs GTiff
>> > driver"); return CE_Failure; }
>> > Does the algorithm require TIFF features or can I swap in the MEM
>> driver?
>>
>> Sean,
>>
>> AFAIK you can use any driver. TIFF was used to generate temporary files,
>> but if
>> you've enough RAM, MEM should do it.
>> You will probably have to edit the "static const char *apszOptions[]" to
>> make
>> it an empty list to avoid warnings about non handled creation options.
>>
>> Even
>>
>
> Thanks, Even, I'll let you know how it turns out.
>

Works like a charm. I've submitted a PR
https://github.com/OSGeo/gdal/pull/47 to get this back into GDAL.
Meanwhile, I'm maintaining a fork of rasterfill.cpp in Rasterio.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150120/b2b230f4/attachment.html>

From zoltans at geograph.co.za  Tue Jan 20 22:33:13 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed, 21 Jan 2015 08:33:13 +0200
Subject: [gdal-dev] Compiling QGIS on ubuntu 14.10 - Couldn't load
 PyQGIS" error
In-Reply-To: <54BE88EA.9080801@geograph.co.za>
References: <54B8C17C.8090707@geograph.co.za>	<1421402303.54b8e0bfe2159@imp.free.fr>
	<54BE88EA.9080801@geograph.co.za>
Message-ID: <54BF4829.4070306@geograph.co.za>

So sorry - sent to gdal-dev by mistake, now at qgis-dev.
Regards,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From epoyart at google.com  Wed Jan 21 14:48:46 2015
From: epoyart at google.com (Eduardo Poyart)
Date: Wed, 21 Jan 2015 14:48:46 -0800
Subject: [gdal-dev] VSI driver question
Message-ID: <CA+a-q2Rj7uX6uS1yhkXGVKrOT+d=zjdfs-1mhiaoSoVkQqrOOA@mail.gmail.com>

Hello,

I have a VSI-related question. Does all file reading operations in GDAL go
through the VSI layer for all file formats? Are there specific file formats
for which this is not true? My concern is whether or not there are
underlying file-format drivers that are third-party implementations and
talk to the file system directly.

Thanks
Eduardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150121/0c982754/attachment.html>

From even.rouault at spatialys.com  Thu Jan 22 00:46:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Jan 2015 09:46:37 +0100
Subject: [gdal-dev] VSI driver question
In-Reply-To: <CA+a-q2Rj7uX6uS1yhkXGVKrOT+d=zjdfs-1mhiaoSoVkQqrOOA@mail.gmail.com>
References: <CA+a-q2Rj7uX6uS1yhkXGVKrOT+d=zjdfs-1mhiaoSoVkQqrOOA@mail.gmail.com>
Message-ID: <201501220946.38153.even.rouault@spatialys.com>

Eduardo,
> 
> I have a VSI-related question. Does all file reading operations in GDAL go
> through the VSI layer for all file formats?

No, this depend on drivers. Only drivers advertizing DCAP_VIRTUALIO do. Others 
use their own I/O layer, generally because they use a underlying library that 
does not offer I/O indirection, or a few ones that have not yet been converted 
to use the VSI*L API.

Even

> Are there specific file formats
> for which this is not true? My concern is whether or not there are
> underlying file-format drivers that are third-party implementations and
> talk to the file system directly.
> 
> Thanks
> Eduardo

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pierric.delaborie at gmail.com  Thu Jan 22 10:43:50 2015
From: pierric.delaborie at gmail.com (Pierric de Laborie)
Date: Thu, 22 Jan 2015 19:43:50 +0100
Subject: [gdal-dev] Reprojection shapefile using ogr2ogr from EPSG:28992 to
	EPSG:4326
Message-ID: <CABQp95Z6=A_wCYvw9jW9Vcnn3GX0MOHSMufakV4xaTE=jXpoeQ@mail.gmail.com>

Hello,

I do not understand why there seems to be a drift (about 100 meters) of the
polygons contained in a shapefile after reprojecting it to 4326 using the
following command :

ogr2ogr -f 'ESRI Shapefile' -wrapdateline -t_srs EPSG:4326
destinationfile.shp sourcefile.shp

The original prj file is the following. It is supposed to describe the
projection EPSG:28992  ( http://spatialreference.org/ref/epsg/28992/  )

PROJCS["RD_New",GEOGCS["GCS_Amersfoort",DATUM["D_Amersfoort",
SPHEROID["Bessel_1841",6377397.155,299.1528128]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Double_Stereographic"],
PARAMETER["False_Easting",155000.0],
PARAMETER["False_Northing",463000.0],
PARAMETER["Central_Meridian",5.38763888888889],
PARAMETER["Scale_Factor",0.9999079],
PARAMETER["Latitude_Of_Origin",52.15616055555555],
UNIT["Meter",1.0]]

Apparently QGIS could understand the projection file correctly and
reproject it to WGS84 with no problem. But it seems that for some specific
projections, GDAL does not reproject as expected.

 Is it possible to force it by adding the projection specifications in one
of the files included in the following folder (linux debian install) :
 /usr/share/gdal   and how ?

For example, I could see a file named gdal_datum.csv  containing the datum
"D_Amersfoort" specified in the prj file. However I could not find in any
other files the projection GCS_Amersfoort or RD_New as specified in the prj
file.

Thanks for your help
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150122/4d74eec8/attachment.html>

From even.rouault at spatialys.com  Thu Jan 22 10:54:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Jan 2015 19:54:24 +0100
Subject: [gdal-dev] Reprojection shapefile using ogr2ogr from EPSG:28992
	to EPSG:4326
In-Reply-To: <CABQp95Z6=A_wCYvw9jW9Vcnn3GX0MOHSMufakV4xaTE=jXpoeQ@mail.gmail.com>
References: <CABQp95Z6=A_wCYvw9jW9Vcnn3GX0MOHSMufakV4xaTE=jXpoeQ@mail.gmail.com>
Message-ID: <201501221954.24715.even.rouault@spatialys.com>

Le jeudi 22 janvier 2015 19:43:50, Pierric de Laborie a ?crit :
> Hello,
> 
> I do not understand why there seems to be a drift (about 100 meters) of the
> polygons contained in a shapefile after reprojecting it to 4326 using the
> following command :
> 
> ogr2ogr -f 'ESRI Shapefile' -wrapdateline -t_srs EPSG:4326
> destinationfile.shp sourcefile.shp
> 
> The original prj file is the following. It is supposed to describe the
> projection EPSG:28992  ( http://spatialreference.org/ref/epsg/28992/  )
> 
> PROJCS["RD_New",GEOGCS["GCS_Amersfoort",DATUM["D_Amersfoort",
> SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Double_Stereographic"],
> PARAMETER["False_Easting",155000.0],
> PARAMETER["False_Northing",463000.0],
> PARAMETER["Central_Meridian",5.38763888888889],
> PARAMETER["Scale_Factor",0.9999079],
> PARAMETER["Latitude_Of_Origin",52.15616055555555],
> UNIT["Meter",1.0]]


This definition is outdated and has not the needed datum shift :

$ gdalsrsinfo EPSG:28992

PROJ.4 : '+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 
+k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel 
+towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m 
+no_defs '

OGC WKT :
PROJCS["Amersfoort / RD New",
    GEOGCS["Amersfoort",
        DATUM["Amersfoort",
            SPHEROID["Bessel 1841",6377397.155,299.1528128,
                AUTHORITY["EPSG","7004"]],
            TOWGS84[565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725],
            AUTHORITY["EPSG","6289"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4289"]],
    PROJECTION["Oblique_Stereographic"],
    PARAMETER["latitude_of_origin",52.15616055555555],
    PARAMETER["central_meridian",5.38763888888889],
    PARAMETER["scale_factor",0.9999079],
    PARAMETER["false_easting",155000],
    PARAMETER["false_northing",463000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    AUTHORITY["EPSG","28992"]]


> 
> Apparently QGIS could understand the projection file correctly and
> reproject it to WGS84 with no problem. But it seems that for some specific
> projections, GDAL does not reproject as expected.

Shapefile .prj files don't include TOWGS84, so that's the likely explanation. 
Try adding -s_srs  EPSG:28992 to your ogr2ogr command line

> 
>  Is it possible to force it by adding the projection specifications in one
> of the files included in the following folder (linux debian install) :
>  /usr/share/gdal   and how ?
> 
> For example, I could see a file named gdal_datum.csv  containing the datum
> "D_Amersfoort" specified in the prj file. However I could not find in any
> other files the projection GCS_Amersfoort or RD_New as specified in the prj
> file.
> 
> Thanks for your help

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Jan 22 12:29:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Jan 2015 21:29:05 +0100
Subject: [gdal-dev] Discount for FOSS4G NA registration
Message-ID: <201501222129.06022.even.rouault@spatialys.com>

Hi,

To those interested in the upcoming FOSS4G NA 2015 in San Francisco and who 
might have not yet registered, I've been notified by the organizing commitee 
that you can benefit from a $100 discount off the FOSS4G NA registration fee 
(All-Access Pass 4 days) with the the coupon code SPKR100.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pierric.delaborie at gmail.com  Fri Jan 23 01:37:25 2015
From: pierric.delaborie at gmail.com (Pierric de Laborie)
Date: Fri, 23 Jan 2015 10:37:25 +0100
Subject: [gdal-dev] Reprojection shapefile using ogr2ogr from EPSG:28992
 to EPSG:4326
In-Reply-To: <201501221954.24715.even.rouault@spatialys.com>
References: <CABQp95Z6=A_wCYvw9jW9Vcnn3GX0MOHSMufakV4xaTE=jXpoeQ@mail.gmail.com>
	<201501221954.24715.even.rouault@spatialys.com>
Message-ID: <CABQp95aYcsDM+kLnJVfDmJ_Bo1dtG17P69OhmT5YiieOh5MnVQ@mail.gmail.com>

In my case shapefile are uploaded to the server by users through a web page
(polygons represent the boundaries of a new protected natural site). So the
only information about the projection that I get is located in the .prj
file. I am not sure if there is a way to get the EPSG code automatically in
this case (?)

How can QGIS pick up the name of the EPSG code right (actually I knew that
the projection code was EPSG:28992 by opening the shapefile in QGIS and
checking the properties of the layer)   ?

In the case there is no way to get the EPSG code automatically: do you know
if ogr2ogr could send a warning/error that I would send back to the user
asking him to reproject the shapefile in WGS84 himself before uploading the
file?

Thanks in advance for your insights


2015-01-22 19:54 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Le jeudi 22 janvier 2015 19:43:50, Pierric de Laborie a ?crit :
> > Hello,
> >
> > I do not understand why there seems to be a drift (about 100 meters) of
> the
> > polygons contained in a shapefile after reprojecting it to 4326 using the
> > following command :
> >
> > ogr2ogr -f 'ESRI Shapefile' -wrapdateline -t_srs EPSG:4326
> > destinationfile.shp sourcefile.shp
> >
> > The original prj file is the following. It is supposed to describe the
> > projection EPSG:28992  ( http://spatialreference.org/ref/epsg/28992/  )
> >
> > PROJCS["RD_New",GEOGCS["GCS_Amersfoort",DATUM["D_Amersfoort",
> > SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> > PRIMEM["Greenwich",0.0],
> > UNIT["Degree",0.0174532925199433]],
> > PROJECTION["Double_Stereographic"],
> > PARAMETER["False_Easting",155000.0],
> > PARAMETER["False_Northing",463000.0],
> > PARAMETER["Central_Meridian",5.38763888888889],
> > PARAMETER["Scale_Factor",0.9999079],
> > PARAMETER["Latitude_Of_Origin",52.15616055555555],
> > UNIT["Meter",1.0]]
>
>
> This definition is outdated and has not the needed datum shift :
>
> $ gdalsrsinfo EPSG:28992
>
> PROJ.4 : '+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889
> +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel
> +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m
> +no_defs '
>
> OGC WKT :
> PROJCS["Amersfoort / RD New",
>     GEOGCS["Amersfoort",
>         DATUM["Amersfoort",
>             SPHEROID["Bessel 1841",6377397.155,299.1528128,
>                 AUTHORITY["EPSG","7004"]],
>
> TOWGS84[565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725],
>             AUTHORITY["EPSG","6289"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4289"]],
>     PROJECTION["Oblique_Stereographic"],
>     PARAMETER["latitude_of_origin",52.15616055555555],
>     PARAMETER["central_meridian",5.38763888888889],
>     PARAMETER["scale_factor",0.9999079],
>     PARAMETER["false_easting",155000],
>     PARAMETER["false_northing",463000],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AXIS["X",EAST],
>     AXIS["Y",NORTH],
>     AUTHORITY["EPSG","28992"]]
>
>
> >
> > Apparently QGIS could understand the projection file correctly and
> > reproject it to WGS84 with no problem. But it seems that for some
> specific
> > projections, GDAL does not reproject as expected.
>
> Shapefile .prj files don't include TOWGS84, so that's the likely
> explanation.
> Try adding -s_srs  EPSG:28992 to your ogr2ogr command line
>
> >
> >  Is it possible to force it by adding the projection specifications in
> one
> > of the files included in the following folder (linux debian install) :
> >  /usr/share/gdal   and how ?
> >
> > For example, I could see a file named gdal_datum.csv  containing the
> datum
> > "D_Amersfoort" specified in the prj file. However I could not find in any
> > other files the projection GCS_Amersfoort or RD_New as specified in the
> prj
> > file.
> >
> > Thanks for your help
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150123/67f7d62d/attachment.html>

From bohnet.max at googlemail.com  Fri Jan 23 04:07:03 2015
From: bohnet.max at googlemail.com (Max Bohnet)
Date: Fri, 23 Jan 2015 13:07:03 +0100
Subject: [gdal-dev] building gdal: conflict with sqlite3 version
Message-ID: <54C23967.9050204@gmail.com>

Dear gdal experts,

Under Ubuntu 14, 64bit, i have the python distribution anaconda installed in
/opt/anaconda
and want to use the environment
/opt/anaconda/envs/py27
source activate py27

I need gdal with Esri FileGeodatabase support, so i could not use
conda install gdal, because this version is built without FGDB-support.
I had to build it from source using gdal 1.11.1
with the following options for the ./configure command

(py27)root at j109817:/opt/drivers/gdal/gdal-1.11.1# ./configure
--with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
--with-python=/opt/anaconda/envs/py27/bin/python --with-sqlite3
--with-spatialite

this causes a warning of a conflict between the FGDB-driver and the
libxml2 driver, because the FGDB-driver of Esri comes with another
libxml2 library as the one in anaconda python.
If i ignore the warning, there is an error when i type make.

So i renamed /opt/anaconda to /opt/anaconda2 and started the building of
gdal:

(py27)root at j109817:/opt/drivers/gdal/gdal-1.11.1# ./configure
--with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
--with-python=/opt/anaconda2/envs/py27/bin/python --with-sqlite3
--with-spatialite
make
make install

This installs a package GDAL-1.11.1-py2.7-linux-x86_64.egg into
/opt/anaconda2/envs/py27/lib/python2.7/site-packages

and then renamed /opt/anaconda2 back to /opt/anaconda

when i start python and try to

from osgeo import gdal
the following error message appears:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File
"/opt/anaconda/envs/py27/lib/python2.7/site-packages/GDAL-1.11.1-py2.7-linux-x86_64.egg/osgeo/__init__.py",
line 21, in <module>
    _gdal = swig_import_helper()
  File
"/opt/anaconda/envs/py27/lib/python2.7/site-packages/GDAL-1.11.1-py2.7-linux-x86_64.egg/osgeo/__init__.py",
line 17, in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: /usr/local/lib/libgdal.so.1: undefined symbol:
sqlite3_column_table_name

In another Forum i found, that the sqlite3 python package is compiled
aganist another sqlite version than gdal.
In Anaconda python 2.7, it seems to be sqlite version 3.8.4.1
>>> import sqlite3
>>> sqlite3.sqlite_version
'3.8.4.1'
>>>

I could find 4 sourcefiles for sqlite 3.8.4.1
wget
https://olex-secure.openlogic.com/content/private/5e6a6f0815e830bba705e79e4a0470fbee8a5880/sqlite/3.8.4.1/sqlite-amalgamation-3080401.zip
unzip sqlite-amalgamation-3080401.zip
gcc shell.c sqlite3.c -lpthread -ldl
mv "a.out" sqlite3841

and tried to build gdal against this sqlite3 version with
./configure --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
--with-python=/opt/anaconda2/envs/py27/bin/python
--with-sqlite3=/opt/drivers/sqlite/sqlite-amalgamation-3080401/sqlite3481 --with-spatialite

but i have no idea, if that makes any sense.

the error that appears when from osgeo import gdal remains the same.

any idea what i could do?

Thanks in advance for any help,
Max

From even.rouault at spatialys.com  Fri Jan 23 04:13:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Jan 2015 13:13:26 +0100
Subject: [gdal-dev] Reprojection shapefile using ogr2ogr from EPSG:28992
	to EPSG:4326
In-Reply-To: <CABQp95aYcsDM+kLnJVfDmJ_Bo1dtG17P69OhmT5YiieOh5MnVQ@mail.gmail.com>
References: <CABQp95Z6=A_wCYvw9jW9Vcnn3GX0MOHSMufakV4xaTE=jXpoeQ@mail.gmail.com>
	<201501221954.24715.even.rouault@spatialys.com>
	<CABQp95aYcsDM+kLnJVfDmJ_Bo1dtG17P69OhmT5YiieOh5MnVQ@mail.gmail.com>
Message-ID: <201501231313.26871.even.rouault@spatialys.com>

Pierric,

> In my case shapefile are uploaded to the server by users through a web page
> (polygons represent the boundaries of a new protected natural site). So the
> only information about the projection that I get is located in the .prj
> file. I am not sure if there is a way to get the EPSG code automatically in
> this case (?)

Not yet currently. Althgouth this is a much desired feature that waits from 
contributions/funding.

> 
> How can QGIS pick up the name of the EPSG code right (actually I knew that
> the projection code was EPSG:28992 by opening the shapefile in QGIS and
> checking the properties of the layer)   ?

It has some heuristics where it tries to match the proj.4 string deduced from 
the .prj file with the ones of the EPSG database. But that's not a full proof 
mecanism. There can be be misattributions because some SRS have very close 
definitions that come to identical proj.4 strings.

> 
> In the case there is no way to get the EPSG code automatically: do you know
> if ogr2ogr could send a warning/error that I would send back to the user
> asking him to reproject the shapefile in WGS84 himself before uploading the
> file?

There's no way ogr2ogr could guess there's information missing. It can makes 
sense of the .prj as it is currently. It is just that there's a missing piece 
of information in it that must be retrieved by other means, while above 
heuristics is not implemented.

Even

> 
> Thanks in advance for your insights
> 
> 2015-01-22 19:54 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> > Le jeudi 22 janvier 2015 19:43:50, Pierric de Laborie a ?crit :
> > > Hello,
> > > 
> > > I do not understand why there seems to be a drift (about 100 meters) of
> > 
> > the
> > 
> > > polygons contained in a shapefile after reprojecting it to 4326 using
> > > the following command :
> > > 
> > > ogr2ogr -f 'ESRI Shapefile' -wrapdateline -t_srs EPSG:4326
> > > destinationfile.shp sourcefile.shp
> > > 
> > > The original prj file is the following. It is supposed to describe the
> > > projection EPSG:28992  ( http://spatialreference.org/ref/epsg/28992/  )
> > > 
> > > PROJCS["RD_New",GEOGCS["GCS_Amersfoort",DATUM["D_Amersfoort",
> > > SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> > > PRIMEM["Greenwich",0.0],
> > > UNIT["Degree",0.0174532925199433]],
> > > PROJECTION["Double_Stereographic"],
> > > PARAMETER["False_Easting",155000.0],
> > > PARAMETER["False_Northing",463000.0],
> > > PARAMETER["Central_Meridian",5.38763888888889],
> > > PARAMETER["Scale_Factor",0.9999079],
> > > PARAMETER["Latitude_Of_Origin",52.15616055555555],
> > > UNIT["Meter",1.0]]
> > 
> > This definition is outdated and has not the needed datum shift :
> > 
> > $ gdalsrsinfo EPSG:28992
> > 
> > PROJ.4 : '+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889
> > +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel
> > +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725
> > +units=m +no_defs '
> > 
> > OGC WKT :
> > PROJCS["Amersfoort / RD New",
> > 
> >     GEOGCS["Amersfoort",
> >     
> >         DATUM["Amersfoort",
> >         
> >             SPHEROID["Bessel 1841",6377397.155,299.1528128,
> >             
> >                 AUTHORITY["EPSG","7004"]],
> > 
> > TOWGS84[565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725],
> > 
> >             AUTHORITY["EPSG","6289"]],
> >         
> >         PRIMEM["Greenwich",0,
> >         
> >             AUTHORITY["EPSG","8901"]],
> >         
> >         UNIT["degree",0.0174532925199433,
> >         
> >             AUTHORITY["EPSG","9122"]],
> >         
> >         AUTHORITY["EPSG","4289"]],
> >     
> >     PROJECTION["Oblique_Stereographic"],
> >     PARAMETER["latitude_of_origin",52.15616055555555],
> >     PARAMETER["central_meridian",5.38763888888889],
> >     PARAMETER["scale_factor",0.9999079],
> >     PARAMETER["false_easting",155000],
> >     PARAMETER["false_northing",463000],
> >     UNIT["metre",1,
> >     
> >         AUTHORITY["EPSG","9001"]],
> >     
> >     AXIS["X",EAST],
> >     AXIS["Y",NORTH],
> >     AUTHORITY["EPSG","28992"]]
> > > 
> > > Apparently QGIS could understand the projection file correctly and
> > > reproject it to WGS84 with no problem. But it seems that for some
> > 
> > specific
> > 
> > > projections, GDAL does not reproject as expected.
> > 
> > Shapefile .prj files don't include TOWGS84, so that's the likely
> > explanation.
> > Try adding -s_srs  EPSG:28992 to your ogr2ogr command line
> > 
> > >  Is it possible to force it by adding the projection specifications in
> > 
> > one
> > 
> > > of the files included in the following folder (linux debian install) :
> > >  /usr/share/gdal   and how ?
> > > 
> > > For example, I could see a file named gdal_datum.csv  containing the
> > 
> > datum
> > 
> > > "D_Amersfoort" specified in the prj file. However I could not find in
> > > any other files the projection GCS_Amersfoort or RD_New as specified
> > > in the
> > 
> > prj
> > 
> > > file.
> > > 
> > > Thanks for your help
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 23 04:22:02 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Jan 2015 13:22:02 +0100
Subject: [gdal-dev] building gdal: conflict with sqlite3 version
In-Reply-To: <54C23967.9050204@gmail.com>
References: <54C23967.9050204@gmail.com>
Message-ID: <201501231322.02435.even.rouault@spatialys.com>

Le vendredi 23 janvier 2015 13:07:03, Max Bohnet a ?crit :
> Dear gdal experts,
> 
> Under Ubuntu 14, 64bit, i have the python distribution anaconda installed
> in /opt/anaconda
> and want to use the environment
> /opt/anaconda/envs/py27
> source activate py27
> 
> I need gdal with Esri FileGeodatabase support, 

With write support ? If you just need read-only support, the OpenFileGDB 
driver should be good enough.

> so i could not use
> conda install gdal, because this version is built without FGDB-support.
> I had to build it from source using gdal 1.11.1
> with the following options for the ./configure command
> 
> (py27)root at j109817:/opt/drivers/gdal/gdal-1.11.1# ./configure
> --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
> --with-python=/opt/anaconda/envs/py27/bin/python --with-sqlite3
> --with-spatialite
> 
> this causes a warning of a conflict between the FGDB-driver and the
> libxml2 driver, because the FGDB-driver of Esri comes with another
> libxml2 library as the one in anaconda python.
> If i ignore the warning, there is an error when i type make.

Max, when you report something, "there is an error" is not a description. You 
have to include the full text of the error.

I doubt your error was related to the libxml2 warning. This one is more about 
to warn about potential strange things at runtime.

> 
> So i renamed /opt/anaconda to /opt/anaconda2 and started the building of
> gdal:
> 
> (py27)root at j109817:/opt/drivers/gdal/gdal-1.11.1# ./configure
> --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
> --with-python=/opt/anaconda2/envs/py27/bin/python --with-sqlite3
> --with-spatialite
> make
> make install
> 
> This installs a package GDAL-1.11.1-py2.7-linux-x86_64.egg into
> /opt/anaconda2/envs/py27/lib/python2.7/site-packages
> 
> and then renamed /opt/anaconda2 back to /opt/anaconda
> 
> when i start python and try to
> 
> from osgeo import gdal
> the following error message appears:
> 
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File
> "/opt/anaconda/envs/py27/lib/python2.7/site-packages/GDAL-1.11.1-py2.7-linu
> x-x86_64.egg/osgeo/__init__.py", line 21, in <module>
>     _gdal = swig_import_helper()
>   File
> "/opt/anaconda/envs/py27/lib/python2.7/site-packages/GDAL-1.11.1-py2.7-linu
> x-x86_64.egg/osgeo/__init__.py", line 17, in swig_import_helper
>     _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: /usr/local/lib/libgdal.so.1: undefined symbol:
> sqlite3_column_table_name

The error seemts to indicate that the sqlite3 lib that GDAL found at configure 
time (likely the system one) had the sqlite3_column_table_name symbol (which 
GDAL can optionally use when available), whereas the one available at runtime 
in your environment has not.
If you want to link against a specific sqlite3 version, you should mention it 
in the --with-sqlite3 option, so as GDAL properly configures against the 
appropriate sqlite3 version. But you would also need the relevant sqlite3 
headers.

> 
> In another Forum i found, that the sqlite3 python package is compiled
> aganist another sqlite version than gdal.
> In Anaconda python 2.7, it seems to be sqlite version 3.8.4.1
> 
> >>> import sqlite3
> >>> sqlite3.sqlite_version
> 
> '3.8.4.1'
> 
> 
> I could find 4 sourcefiles for sqlite 3.8.4.1
> wget
> https://olex-secure.openlogic.com/content/private/5e6a6f0815e830bba705e79e4
> a0470fbee8a5880/sqlite/3.8.4.1/sqlite-amalgamation-3080401.zip unzip
> sqlite-amalgamation-3080401.zip
> gcc shell.c sqlite3.c -lpthread -ldl
> mv "a.out" sqlite3841
> 
> and tried to build gdal against this sqlite3 version with
> ./configure --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
> --with-python=/opt/anaconda2/envs/py27/bin/python
> --with-sqlite3=/opt/drivers/sqlite/sqlite-amalgamation-3080401/sqlite3481
> --with-spatialite
> 
> but i have no idea, if that makes any sense.
> 
> the error that appears when from osgeo import gdal remains the same.
> 
> any idea what i could do?

It looks like you are going to have big troubles trying to mix things...


> 
> Thanks in advance for any help,
> Max
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 23 07:17:33 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Jan 2015 16:17:33 +0100
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer Fields
	and FIDs
Message-ID: <201501231617.33531.even.rouault@spatialys.com>

Hi,

This is a call for discussion on revisiting the existing RFC 31 - OGR 64bit 
Integer Fields and FIDs, initiated by Frank in 2010 and that I've extended.

http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64

Below the summary :
"""
This RFC addresses steps to upgrade OGR to support 64bit integer fields and 
feature ids. Many feature data formats support wide integers, and the 
inability to transform these through OGR causes increasing numbers of 
problems. 
"""

A first discussion took place at http://lists.osgeo.org/pipermail/gdal-
dev/2010-November/thread.html#26883. My main remarks at that time were about 
compatibility issues, but as this would go in GDAL 2.0, they are likely less 
critical.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 23 08:28:38 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Jan 2015 17:28:38 +0100
Subject: [gdal-dev] GDAL 1.11.2 release planning ?
Message-ID: <201501231728.38372.even.rouault@spatialys.com>

Hi,

GDAL 1.11.1 has been released 4 months ago and since then 48 new bug fixes (*) 
have been done in the 1.11 branch, so it might be worth procuding a new 
release.

What about cutting a RC in 2 weeks ? That should give time to people having 
things in standby to review and act on them, but if you need more time, just 
tell.

I can take care of the release process if nobody else volunteers.

Even

(*) 
http://trac.osgeo.org/gdal/query?status=closed&group=resolution&milestone=1.11.2

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Fri Jan 23 13:32:10 2015
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 23 Jan 2015 14:32:10 -0700
Subject: [gdal-dev] No OGR formats found in my OS X universal binaries?
Message-ID: <CADPhZXy_Py1gLbpPP14wvWgpbh5x6Nd3Ep88etWNjwfXC7eVBQ@mail.gmail.com>

Hi all,

I've run into a problem when building universal binaries for GDAL 1.11.1 on
OS X 10.9.5. If I follow the instructions at

  https://trac.osgeo.org/gdal/wiki/BuildingOnMac

and set

  CFLAGS="-arch i386 -arch x86_64" CXXFLAGS="-arch i386 -arch x86_64"
LDFLAGS="-arch i386 -arch x86_64"

the software builds without any errors I can tell, but provides no vector
formats:

  $ ./parts/gdal/bin/ogrinfo --formats
  Supported Formats:

Running gdalinfo --formats, on the other hand, gives me all the raster
formats I expect.

My configure commands is below:

  $ ./configure --prefix=/Users/sean/code/frs-wheel-builds/parts/gdal
ARCHFLAGS=-arch i386 -arch x86_64 CFLAGS=-arch i386 -arch x86_64
CXXFLAGS=-arch i386 -arch x86_64 LDFLAGS=-arch i386 -arch x86_64
--with-threads --disable-debug --disable-static --without-grass
--without-libgrass --without-jpeg12
--with-jasper=/Users/sean/code/frs-wheel-builds/parts/jasper
--with-libtiff=internal --with-jpeg --with-gif --with-png
--with-geotiff=internal --with-sqlite3=/usr --with-pcraster=internal
--with-pcraster=internal --with-pcidsk=internal --with-bsb --with-grib
--with-pam
--with-geos=/Users/sean/code/frs-wheel-builds/parts/geos/bin/geos-config
--with-static-proj4=/Users/sean/code/frs-wheel-builds/parts/proj4
--with-expat=/usr
--with-libjson-c=/Users/sean/code/frs-wheel-builds/parts/json-c
--with-libiconv-prefix=/usr --with-libz=/usr
--with-curl=/usr/bin/curl-config --without-python

If I rebuild, using the same configuration but omitting the -arch flags,
ogrinfo --formats reports all the vector formats I expect.

I should add that MACOSX_DEPLOYMENT_TARGET=10.6 is set in the environment
for all these builds. I'm doing that because I'm building GDAL to be used
with C Extension modules for the Python from python.org (which uses SDK
version 10.6).

Here are the details on my gcc:

  gcc -v
  Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr
--with-gxx-include-dir=/usr/include/c++/4.2.1
  Apple LLVM version 6.0 (clang-600.0.56) (based on LLVM 3.5svn)
  Target: x86_64-apple-darwin13.4.0
  Thread model: posix

Anybody run into this problem before or see something I'm obviously doing
wrong?

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150123/453d7ad9/attachment.html>

From szekerest at gmail.com  Fri Jan 23 15:00:19 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 24 Jan 2015 00:00:19 +0100
Subject: [gdal-dev] GDAL 1.11.2 release planning ?
In-Reply-To: <201501231728.38372.even.rouault@spatialys.com>
References: <201501231728.38372.even.rouault@spatialys.com>
Message-ID: <CACALY+ROiUZmb0815NQK2q=Cg4cUWLtqP4dCV90iLv-5-1dgrA@mail.gmail.com>

I agree to release.

Tamas

2015-01-23 17:28 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> GDAL 1.11.1 has been released 4 months ago and since then 48 new bug fixes
> (*)
> have been done in the 1.11 branch, so it might be worth procuding a new
> release.
>
> What about cutting a RC in 2 weeks ? That should give time to people having
> things in standby to review and act on them, but if you need more time,
> just
> tell.
>
> I can take care of the release process if nobody else volunteers.
>
> Even
>
> (*)
>
> http://trac.osgeo.org/gdal/query?status=closed&group=resolution&milestone=1.11.2
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150124/bd187de4/attachment.html>

From woklist at kyngchaos.com  Fri Jan 23 18:21:45 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 23 Jan 2015 20:21:45 -0600
Subject: [gdal-dev] No OGR formats found in my OS X universal binaries?
In-Reply-To: <CADPhZXy_Py1gLbpPP14wvWgpbh5x6Nd3Ep88etWNjwfXC7eVBQ@mail.gmail.com>
References: <CADPhZXy_Py1gLbpPP14wvWgpbh5x6Nd3Ep88etWNjwfXC7eVBQ@mail.gmail.com>
Message-ID: <F3815EEB-6454-4BD5-BEF5-9329121B3027@kyngchaos.com>

You need to quote the CFLAGS, CXXFLAGS and LDFLAGS parts in the configure line, which also overrides whatever you may have set before running configure as you imply (ARCHFLAGS is meaningless, drop that):

./configure --prefix=/Users/sean/code/frs-wheel-builds/parts/gdal CFLAGS="-arch i386 -arch x86_64" CXXFLAGS="-arch i386 -arch x86_64" LDFLAGS="-arch i386 -arch x86_64" --with-threads --disable-debug --disable-static --without-grass --without-libgrass --without-jpeg12 --with-jasper=/Users/sean/code/frs-wheel-builds/parts/jasper --with-libtiff=internal --with-jpeg --with-gif --with-png --with-geotiff=internal --with-sqlite3=/usr --with-pcraster=internal --with-pcraster=internal --with-pcidsk=internal --with-bsb --with-grib --with-pam --with-geos=/Users/sean/code/frs-wheel-builds/parts/geos/bin/geos-config --with-static-proj4=/Users/sean/code/frs-wheel-builds/parts/proj4 --with-expat=/usr --with-libjson-c=/Users/sean/code/frs-wheel-builds/parts/json-c --with-libiconv-prefix=/usr --with-libz=/usr --with-curl=/usr/bin/curl-config --without-python

On Jan 23, 2015, at 3:32 PM, Sean Gillies <sean at mapbox.com> wrote:

> Hi all,
> 
> I've run into a problem when building universal binaries for GDAL 1.11.1 on OS X 10.9.5. If I follow the instructions at 
> 
>   https://trac.osgeo.org/gdal/wiki/BuildingOnMac
> 
> and set 
> 
>   CFLAGS="-arch i386 -arch x86_64" CXXFLAGS="-arch i386 -arch x86_64" LDFLAGS="-arch i386 -arch x86_64"
> 
> the software builds without any errors I can tell, but provides no vector formats:
> 
>   $ ./parts/gdal/bin/ogrinfo --formats
>   Supported Formats:
> 
> Running gdalinfo --formats, on the other hand, gives me all the raster formats I expect.
> 
> My configure commands is below:
> 
>   $ ./configure --prefix=/Users/sean/code/frs-wheel-builds/parts/gdal ARCHFLAGS=-arch i386 -arch x86_64 CFLAGS=-arch i386 -arch x86_64 CXXFLAGS=-arch i386 -arch x86_64 LDFLAGS=-arch i386 -arch x86_64 --with-threads --disable-debug --disable-static --without-grass --without-libgrass --without-jpeg12 --with-jasper=/Users/sean/code/frs-wheel-builds/parts/jasper --with-libtiff=internal --with-jpeg --with-gif --with-png --with-geotiff=internal --with-sqlite3=/usr --with-pcraster=internal --with-pcraster=internal --with-pcidsk=internal --with-bsb --with-grib --with-pam --with-geos=/Users/sean/code/frs-wheel-builds/parts/geos/bin/geos-config --with-static-proj4=/Users/sean/code/frs-wheel-builds/parts/proj4 --with-expat=/usr --with-libjson-c=/Users/sean/code/frs-wheel-builds/parts/json-c --with-libiconv-prefix=/usr --with-libz=/usr --with-curl=/usr/bin/curl-config --without-python
> 
> If I rebuild, using the same configuration but omitting the -arch flags, ogrinfo --formats reports all the vector formats I expect.
> 
> I should add that MACOSX_DEPLOYMENT_TARGET=10.6 is set in the environment for all these builds. I'm doing that because I'm building GDAL to be used with C Extension modules for the Python from python.org (which uses SDK version 10.6).
> 
> Here are the details on my gcc:
> 
>   gcc -v
>   Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
>   Apple LLVM version 6.0 (clang-600.0.56) (based on LLVM 3.5svn)
>   Target: x86_64-apple-darwin13.4.0
>   Thread model: posix
> 
> Anybody run into this problem before or see something I'm obviously doing wrong?
> 
> Thanks,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From bishop.dev at gmail.com  Sat Jan 24 05:07:08 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sat, 24 Jan 2015 16:07:08 +0300
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
 Fields and FIDs
In-Reply-To: <201501231617.33531.even.rouault@spatialys.com>
References: <201501231617.33531.even.rouault@spatialys.com>
Message-ID: <54C398FC.7060304@gmail.com>

Hi Even,

The RFC looks good. One note. May be in GDAL 2 we can use GetFID instead 
GetFID64? Because we can allow some incompatibility between GDAL 1.x and 
GDAL 2.x.

Best regards,
     Dmitry

23.01.2015 18:17, Even Rouault ?????:
> Hi,
>
> This is a call for discussion on revisiting the existing RFC 31 - OGR 64bit
> Integer Fields and FIDs, initiated by Frank in 2010 and that I've extended.
>
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
>
> Below the summary :
> """
> This RFC addresses steps to upgrade OGR to support 64bit integer fields and
> feature ids. Many feature data formats support wide integers, and the
> inability to transform these through OGR causes increasing numbers of
> problems.
> """
>
> A first discussion took place at http://lists.osgeo.org/pipermail/gdal-
> dev/2010-November/thread.html#26883. My main remarks at that time were about
> compatibility issues, but as this would go in GDAL 2.0, they are likely less
> critical.
>
> Even
>


From even.rouault at spatialys.com  Sat Jan 24 05:41:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 24 Jan 2015 14:41:50 +0100
Subject: [gdal-dev] RE : Re: Call for discusson on RFC 31 - OGR 64bit
 Integer Fields and FIDs
Message-ID: <4j9igbpamahvxfd9k1dcyfya.1422106910948@email.android.com>

Dmitriy,?

The main reason for the new symbol is that if we change the return type it might cause crashing problems that are not detected at compile time if GetFID is used in a printf like function. For example

printf("%ld %s", GetFID (), str)

Even

---
Spatialys - Geospatial professional services
http://www.spatialys.com

<div>-------- Message d'origine --------</div><div>De : Dmitriy Baryshnikov <bishop.dev at gmail.com> </div><div>Date :24/01/2015  14:07  (GMT+01:00) </div><div>A : gdal-dev at lists.osgeo.org </div><div>Objet : Re: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
  Fields and FIDs </div><div>
</div>Hi Even,

The RFC looks good. One note. May be in GDAL 2 we can use GetFID instead 
GetFID64? Because we can allow some incompatibility between GDAL 1.x and 
GDAL 2.x.

Best regards,
     Dmitry

23.01.2015 18:17, Even Rouault ?????:
> Hi,
>
> This is a call for discussion on revisiting the existing RFC 31 - OGR 64bit
> Integer Fields and FIDs, initiated by Frank in 2010 and that I've extended.
>
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
>
> Below the summary :
> """
> This RFC addresses steps to upgrade OGR to support 64bit integer fields and
> feature ids. Many feature data formats support wide integers, and the
> inability to transform these through OGR causes increasing numbers of
> problems.
> """
>
> A first discussion took place at http://lists.osgeo.org/pipermail/gdal-
> dev/2010-November/thread.html#26883. My main remarks at that time were about
> compatibility issues, but as this would go in GDAL 2.0, they are likely less
> critical.
>
> Even
>

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150124/d9e1e0b9/attachment.html>

From sean at mapbox.com  Sat Jan 24 10:51:00 2015
From: sean at mapbox.com (Sean Gillies)
Date: Sat, 24 Jan 2015 11:51:00 -0700
Subject: [gdal-dev] No OGR formats found in my OS X universal binaries?
In-Reply-To: <F3815EEB-6454-4BD5-BEF5-9329121B3027@kyngchaos.com>
References: <CADPhZXy_Py1gLbpPP14wvWgpbh5x6Nd3Ep88etWNjwfXC7eVBQ@mail.gmail.com>
	<F3815EEB-6454-4BD5-BEF5-9329121B3027@kyngchaos.com>
Message-ID: <CADPhZXwcw8d+v3UOFfOGDYKczyyKjeQCEDjewyqWXFx+v8u5wA@mail.gmail.com>

Thanks, William! I'm all straightened out now. I did indeed have a problem
getting my build system to pass quoted parts.

On Fri, Jan 23, 2015 at 7:21 PM, William Kyngesburye <woklist at kyngchaos.com>
wrote:

> You need to quote the CFLAGS, CXXFLAGS and LDFLAGS parts in the configure
> line, which also overrides whatever you may have set before running
> configure as you imply (ARCHFLAGS is meaningless, drop that):
> ...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150124/f4e84b51/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sun Jan 25 02:13:03 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 25 Jan 2015 10:13:03 +0000 (UTC)
Subject: [gdal-dev] GDAL 1.11.2 release planning ?
References: <201501231728.38372.even.rouault@spatialys.com>
Message-ID: <loom.20150125T110802-733@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> GDAL 1.11.1 has been released 4 months ago and since then 48 new bug fixes
(*) 
> have been done in the 1.11 branch, so it might be worth procuding a new 
> release.
> 
> What about cutting a RC in 2 weeks ? That should give time to people having 
> things in standby to review and act on them, but if you need more time, just 
> tell.
> 
> I can take care of the release process if nobody else volunteers.


+1 for the new release.

Thinking GDAL as a project it would be great if someone else volunteers.
Even is for sure the one who knows best how to cut a new release but it
would good to have also some others in the team who can do it when needed.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Sun Jan 25 09:31:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 25 Jan 2015 18:31:08 +0100
Subject: [gdal-dev] No OGR formats found in my OS X universal binaries?
In-Reply-To: <CADPhZXy_Py1gLbpPP14wvWgpbh5x6Nd3Ep88etWNjwfXC7eVBQ@mail.gmail.com>
References: <CADPhZXy_Py1gLbpPP14wvWgpbh5x6Nd3Ep88etWNjwfXC7eVBQ@mail.gmail.com>
Message-ID: <201501251831.08380.even.rouault@spatialys.com>

Slightly unrelated remark, I see you provide JPEG2000 support through Jasper. 
I'd rather encourage you using OpenJPEG instead, as Jasper is fairly limited 
and especially unable to deal with large images.

> Hi all,
> 
> I've run into a problem when building universal binaries for GDAL 1.11.1 on
> OS X 10.9.5. If I follow the instructions at
> 
>   https://trac.osgeo.org/gdal/wiki/BuildingOnMac
> 
> and set
> 
>   CFLAGS="-arch i386 -arch x86_64" CXXFLAGS="-arch i386 -arch x86_64"
> LDFLAGS="-arch i386 -arch x86_64"
> 
> the software builds without any errors I can tell, but provides no vector
> formats:
> 
>   $ ./parts/gdal/bin/ogrinfo --formats
>   Supported Formats:
> 
> Running gdalinfo --formats, on the other hand, gives me all the raster
> formats I expect.
> 
> My configure commands is below:
> 
>   $ ./configure --prefix=/Users/sean/code/frs-wheel-builds/parts/gdal
> ARCHFLAGS=-arch i386 -arch x86_64 CFLAGS=-arch i386 -arch x86_64
> CXXFLAGS=-arch i386 -arch x86_64 LDFLAGS=-arch i386 -arch x86_64
> --with-threads --disable-debug --disable-static --without-grass
> --without-libgrass --without-jpeg12
> --with-jasper=/Users/sean/code/frs-wheel-builds/parts/jasper
> --with-libtiff=internal --with-jpeg --with-gif --with-png
> --with-geotiff=internal --with-sqlite3=/usr --with-pcraster=internal
> --with-pcraster=internal --with-pcidsk=internal --with-bsb --with-grib
> --with-pam
> --with-geos=/Users/sean/code/frs-wheel-builds/parts/geos/bin/geos-config
> --with-static-proj4=/Users/sean/code/frs-wheel-builds/parts/proj4
> --with-expat=/usr
> --with-libjson-c=/Users/sean/code/frs-wheel-builds/parts/json-c
> --with-libiconv-prefix=/usr --with-libz=/usr
> --with-curl=/usr/bin/curl-config --without-python
> 
> If I rebuild, using the same configuration but omitting the -arch flags,
> ogrinfo --formats reports all the vector formats I expect.
> 
> I should add that MACOSX_DEPLOYMENT_TARGET=10.6 is set in the environment
> for all these builds. I'm doing that because I'm building GDAL to be used
> with C Extension modules for the Python from python.org (which uses SDK
> version 10.6).
> 
> Here are the details on my gcc:
> 
>   gcc -v
>   Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr
> --with-gxx-include-dir=/usr/include/c++/4.2.1
>   Apple LLVM version 6.0 (clang-600.0.56) (based on LLVM 3.5svn)
>   Target: x86_64-apple-darwin13.4.0
>   Thread model: posix
> 
> Anybody run into this problem before or see something I'm obviously doing
> wrong?
> 
> Thanks,

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jan 26 06:18:43 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 26 Jan 2015 14:18:43 +0000 (UTC)
Subject: [gdal-dev] Closed polyline from DXF as line or area?
Message-ID: <loom.20150126T145316-505@post.gmane.org>

Spotted from gis.stackexchange:

http://gis.stackexchange.com/questions/131765/ogr-dxf-closed-polyline-conversion

The DXF driver documentation claims that closed polylines from DXF are
converted into polygons but that does not seem to happen. By comparing the
DXF snipped from stackexchange

ENTITIES
  0
LWPOLYLINE
  5
20000
  8
0
100
AcDbEntity
100
AcDbPolyline
 70
1
 90
4

with a DXF specification
http://www.autodesk.com/techpubs/autocad/acad2000/dxf/lwpolyline_dxf_06.htm
I can read that LWPOLYLINE [code 70] is defined with flag 1 [closed]. But
could someone interpret what does it mean in GIS context? Should a closed
CAD polyline be translated into LINEARRING or POLYGON in WKT?

-Jukka Rahkonen-




From zoltans at geograph.co.za  Mon Jan 26 06:28:06 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 26 Jan 2015 16:28:06 +0200
Subject: [gdal-dev] Closed polyline from DXF as line or area?
In-Reply-To: <loom.20150126T145316-505@post.gmane.org>
References: <loom.20150126T145316-505@post.gmane.org>
Message-ID: <54C64EF6.4030601@geograph.co.za>

Hiya,

My first thought is that the documentation must change.
If I had perimeter fence features on some agricultural fields, I would 
want the field feature to be a polygon but not the (closed) fence feature.

Surely the flexible way to go is exactly what is currently happening.
If a DXF user wants to create polygons from closed lines then surely 
that should be a post-process. ie: select lines with layer=x, 
linestyle=y etc etc, and convert these to polygons?

My 2c

Regards,
Zoltan


On 2015/01/26 16:18, Jukka Rahkonen wrote:
> Spotted from gis.stackexchange:
>
> http://gis.stackexchange.com/questions/131765/ogr-dxf-closed-polyline-conversion
>
> The DXF driver documentation claims that closed polylines from DXF are
> converted into polygons but that does not seem to happen. By comparing the
> DXF snipped from stackexchange
>
> ENTITIES
>    0
> LWPOLYLINE
>    5
> 20000
>    8
> 0
> 100
> AcDbEntity
> 100
> AcDbPolyline
>   70
> 1
>   90
> 4
>
> with a DXF specification
> http://www.autodesk.com/techpubs/autocad/acad2000/dxf/lwpolyline_dxf_06.htm
> I can read that LWPOLYLINE [code 70] is defined with flag 1 [closed]. But
> could someone interpret what does it mean in GIS context? Should a closed
> CAD polyline be translated into LINEARRING or POLYGON in WKT?
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From even.rouault at spatialys.com  Mon Jan 26 06:29:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 15:29:35 +0100
Subject: [gdal-dev] Closed polyline from DXF as line or area?
In-Reply-To: <loom.20150126T145316-505@post.gmane.org>
References: <loom.20150126T145316-505@post.gmane.org>
Message-ID: <201501261529.35710.even.rouault@spatialys.com>

Le lundi 26 janvier 2015 15:18:43, Jukka Rahkonen a ?crit :
> Spotted from gis.stackexchange:
> 
> http://gis.stackexchange.com/questions/131765/ogr-dxf-closed-polyline-conve
> rsion
> 
> The DXF driver documentation claims that closed polylines from DXF are
> converted into polygons but that does not seem to happen. By comparing the
> DXF snipped from stackexchange
> 
> ENTITIES
>   0
> LWPOLYLINE
>   5
> 20000
>   8
> 0
> 100
> AcDbEntity
> 100
> AcDbPolyline
>  70
> 1
>  90
> 4
> 
> with a DXF specification
> http://www.autodesk.com/techpubs/autocad/acad2000/dxf/lwpolyline_dxf_06.htm
> I can read that LWPOLYLINE [code 70] is defined with flag 1 [closed]. But
> could someone interpret what does it mean in GIS context? Should a closed
> CAD polyline be translated into LINEARRING or POLYGON in WKT?


Jukka,

It seems the documentation matches the initial implementation but has been 
outdated by later changes. Indeed, ogr/ogrsf_frmts/dxf/ogrdxflayer.cpp contains 
the following (disabled) code :

/* -------------------------------------------------------------------- */
/*      If polyline is closed, convert linestring to a linear ring      */
/*                                                                      */
/*      Actually, on review I'm not convinced this is a good idea.      */
/*      Note that most (all) "filled polygons" are expressed with       */
/*      hatches which are now handled fairly well and they tend to      */
/*      echo linear polylines.                                          */
/* -------------------------------------------------------------------- */
#ifdef notdef
    if(m_bClosed)
    {
        OGRLinearRing *poLR = new OGRLinearRing();
        poLR->addSubLineString( poLS, 0 );
        delete poLS;

        // Wrap as polygon.
        OGRPolygon *poPoly = new OGRPolygon();
        poPoly->addRingDirectly( poLR );

        return poPoly;
    }
#endif

Only HATCH (as well as 3DFACE and SOLID) objects are converted as Polygon.

Even

> 
> -Jukka Rahkonen-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bohnet.max at googlemail.com  Mon Jan 26 06:35:30 2015
From: bohnet.max at googlemail.com (Max Bohnet)
Date: Mon, 26 Jan 2015 15:35:30 +0100
Subject: [gdal-dev] building gdal: conflict with sqlite3 version
In-Reply-To: <201501231322.02435.even.rouault@spatialys.com>
References: <54C23967.9050204@gmail.com>
	<201501231322.02435.even.rouault@spatialys.com>
Message-ID: <54C650B2.5010801@gmail.com>

Dear Even,

thanks for your answer,

>> Under Ubuntu 14, 64bit, i have the python distribution anaconda installed
>> in /opt/anaconda
>> and want to use the environment
>> /opt/anaconda/envs/py27
>> source activate py27
>>
>> I need gdal with Esri FileGeodatabase support, 
> 
> With write support ? If you just need read-only support, the OpenFileGDB 
> driver should be good enough.

Yes, i need Write support, therefore the OpenFileGDB does not help

>> so i could not use
>> conda install gdal, because this version is built without FGDB-support.
>> I had to build it from source using gdal 1.11.1
>> with the following options for the ./configure command
>>
>> (py27)root at j109817:/opt/drivers/gdal/gdal-1.11.1# ./configure
>> --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
>> --with-python=/opt/anaconda/envs/py27/bin/python --with-sqlite3
>> --with-spatialite
>>
>> this causes a warning of a conflict between the FGDB-driver and the
>> libxml2 driver, because the FGDB-driver of Esri comes with another
>> libxml2 library as the one in anaconda python.
>> If i ignore the warning, there is an error when i type make.
> 
> Max, when you report something, "there is an error" is not a description. You 
> have to include the full text of the error.
> 
> I doubt your error was related to the libxml2 warning. This one is more about 
> to warn about potential strange things at runtime.



>>
>> So i renamed /opt/anaconda to /opt/anaconda2 and started the building of
>> gdal:
>>
>> (py27)root at j109817:/opt/drivers/gdal/gdal-1.11.1# ./configure
>> --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
>> --with-python=/opt/anaconda2/envs/py27/bin/python --with-sqlite3
>> --with-spatialite
>> make
>> make install
>>
>> This installs a package GDAL-1.11.1-py2.7-linux-x86_64.egg into
>> /opt/anaconda2/envs/py27/lib/python2.7/site-packages
>>
>> and then renamed /opt/anaconda2 back to /opt/anaconda
>>
>> when i start python and try to
>>
>> from osgeo import gdal
>> the following error message appears:
>>
>> Traceback (most recent call last):
>>   File "<stdin>", line 1, in <module>
>>   File
>> "/opt/anaconda/envs/py27/lib/python2.7/site-packages/GDAL-1.11.1-py2.7-linu
>> x-x86_64.egg/osgeo/__init__.py", line 21, in <module>
>>     _gdal = swig_import_helper()
>>   File
>> "/opt/anaconda/envs/py27/lib/python2.7/site-packages/GDAL-1.11.1-py2.7-linu
>> x-x86_64.egg/osgeo/__init__.py", line 17, in swig_import_helper
>>     _mod = imp.load_module('_gdal', fp, pathname, description)
>> ImportError: /usr/local/lib/libgdal.so.1: undefined symbol:
>> sqlite3_column_table_name
> 

> The error seemts to indicate that the sqlite3 lib that GDAL found at configure 
> time (likely the system one) had the sqlite3_column_table_name symbol (which 
> GDAL can optionally use when available), whereas the one available at runtime 
> in your environment has not.
> If you want to link against a specific sqlite3 version, you should mention it 
> in the --with-sqlite3 option, so as GDAL properly configures against the 
> appropriate sqlite3 version. But you would also need the relevant sqlite3 
> headers.

i tried it using the
--with-sqlite3=/opt/drivers/sqlite/sqlite-amalgamation-3080401
/sqlite3481
option in order to link it against the sqlite-Version 3.8.4.1, but i
don't know if thats the right way...

the folder /opt/drivers/sqlite/sqlite-amalgamation-3080401 includs the
sqlite3.c and shell.c as well as the header files sqlite3.h and sqlite3ext.h
sqlite3481 is the executable i compiled from these 4 files.


>>
>> In another Forum i found, that the sqlite3 python package is compiled
>> aganist another sqlite version than gdal.
>> In Anaconda python 2.7, it seems to be sqlite version 3.8.4.1
>>
>>>>> import sqlite3
>>>>> sqlite3.sqlite_version
>>
>> '3.8.4.1'
>>
>>
>> I could find 4 sourcefiles for sqlite 3.8.4.1
>> wget
>> https://olex-secure.openlogic.com/content/private/5e6a6f0815e830bba705e79e4
>> a0470fbee8a5880/sqlite/3.8.4.1/sqlite-amalgamation-3080401.zip unzip
>> sqlite-amalgamation-3080401.zip
>> gcc shell.c sqlite3.c -lpthread -ldl
>> mv "a.out" sqlite3841
>>
>> and tried to build gdal against this sqlite3 version with
>> ./configure --with-fgdb=/opt/drivers/FileGDB_API/ --with-pg
>> --with-python=/opt/anaconda2/envs/py27/bin/python
>> --with-sqlite3=/opt/drivers/sqlite/sqlite-amalgamation-3080401/sqlite3481
>> --with-spatialite
>>
>> but i have no idea, if that makes any sense.
>>
>> the error that appears when from osgeo import gdal remains the same.
>>
>> any idea what i could do?
> 
> It looks like you are going to have big troubles trying to mix things...

Because of the troubles i work now with 2 different gdal-Versions.
- The one i compiled from Source with FileGDB-Support and without python
support
and
- the one precompiled by anaconda python.
The first one i use with ogr2ogr to write the FileGeodatabases, the
second one to use in my python scripts.
This workaround works for me at the moment.

Thanks, Max



From andre+joost at nurfuerspam.de  Mon Jan 26 07:25:04 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 26 Jan 2015 16:25:04 +0100
Subject: [gdal-dev] Closed polyline from DXF as line or area?
In-Reply-To: <201501261529.35710.even.rouault@spatialys.com>
References: <loom.20150126T145316-505@post.gmane.org>
	<201501261529.35710.even.rouault@spatialys.com>
Message-ID: <ma5mbh$l71$1@ger.gmane.org>

Am 26.01.2015 um 15:29 schrieb Even Rouault:

>
> It seems the documentation matches the initial implementation but has been
> outdated by later changes. Indeed, ogr/ogrsf_frmts/dxf/ogrdxflayer.cpp contains
> the following (disabled) code :

The behaviour might have changed with the implementation of is ticket:
https://trac.osgeo.org/gdal/ticket/4680
but noone thought of adjusting the dxf driver manpage.

BTW: creating polygons from closed lines is still not available in GDAL 
or other osgeo command line tools?
<http://osgeo-org.1560.x6.nabble.com/gdal-dev-MULTILINESTRING-to-MULTIPOLYGON-using-ogr2ogr-td5018430.html>
was the latest I could find.

Greetings,
Andr? Joost



From even.rouault at spatialys.com  Mon Jan 26 07:36:55 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 16:36:55 +0100
Subject: [gdal-dev] Closed polyline from DXF as line or area?
In-Reply-To: <ma5mbh$l71$1@ger.gmane.org>
References: <loom.20150126T145316-505@post.gmane.org>
	<201501261529.35710.even.rouault@spatialys.com>
	<ma5mbh$l71$1@ger.gmane.org>
Message-ID: <201501261636.55145.even.rouault@spatialys.com>

Le lundi 26 janvier 2015 16:25:04, Andre Joost a ?crit :
> Am 26.01.2015 um 15:29 schrieb Even Rouault:
> > It seems the documentation matches the initial implementation but has
> > been outdated by later changes. Indeed,
> > ogr/ogrsf_frmts/dxf/ogrdxflayer.cpp contains
> 
> > the following (disabled) code :
> The behaviour might have changed with the implementation of is ticket:
> https://trac.osgeo.org/gdal/ticket/4680
> but noone thought of adjusting the dxf driver manpage.
> 
> BTW: creating polygons from closed lines is still not available in GDAL
> or other osgeo command line tools?
> <http://osgeo-org.1560.x6.nabble.com/gdal-dev-MULTILINESTRING-to-MULTIPOLYG
> ON-using-ogr2ogr-td5018430.html> was the latest I could find.

Andr?,

Looks like it works now with trunk. Probably a side effect of my recent work on curve
geometries where I significantly enhanced conversions between geometry types

$ cat test.csv
id,WKT
1,"LINESTRING(0 0,0 1,1 1,1 0,0 0)"
2,"MULTILINESTRING((0 0,0 1,1 1,1 0,0 0))"

l$ ogr2ogr -f csv /vsistdout/ test.csv -nlt polygon -dsco geometry=as_wkt -select id
WKT,id,
"POLYGON ((0 0,0 1,1 1,1 0,0 0))",1
"POLYGON ((0 0,0 1,1 1,1 0,0 0))",2

$ ogr2ogr -f csv /vsistdout/ test.csv -nlt multipolygon -dsco geometry=as_wkt -select id
WKT,id,
"MULTIPOLYGON (((0 0,0 1,1 1,1 0,0 0)))",1
"MULTIPOLYGON (((0 0,0 1,1 1,1 0,0 0)))",2


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andre+joost at nurfuerspam.de  Mon Jan 26 09:12:30 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 26 Jan 2015 18:12:30 +0100
Subject: [gdal-dev] Closed polyline from DXF as line or area?
In-Reply-To: <201501261636.55145.even.rouault@spatialys.com>
References: <loom.20150126T145316-505@post.gmane.org>	<201501261529.35710.even.rouault@spatialys.com>	<ma5mbh$l71$1@ger.gmane.org>
	<201501261636.55145.even.rouault@spatialys.com>
Message-ID: <ma5sjj$5is$1@ger.gmane.org>

Am 26.01.2015 um 16:36 schrieb Even Rouault:
> Le lundi 26 janvier 2015 16:25:04, Andre Joost a ?crit :

>>
>> BTW: creating polygons from closed lines is still not available in GDAL
>> or other osgeo command line tools?
>> <http://osgeo-org.1560.x6.nabble.com/gdal-dev-MULTILINESTRING-to-MULTIPOLYG
>> ON-using-ogr2ogr-td5018430.html> was the latest I could find.
>
> Andr?,
>
> Looks like it works now with trunk. Probably a side effect of my recent work on curve
> geometries where I significantly enhanced conversions between geometry types
>
Thanks, works perfectly.

So +1 from me for a quick relase of 1.11.2 (to get it into the next QGIS 
version as well).

Greetings,
Andr? Joost



From even.rouault at spatialys.com  Mon Jan 26 09:19:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 18:19:54 +0100
Subject: [gdal-dev] Closed polyline from DXF as line or area?
In-Reply-To: <ma5sjj$5is$1@ger.gmane.org>
References: <loom.20150126T145316-505@post.gmane.org>
	<201501261636.55145.even.rouault@spatialys.com>
	<ma5sjj$5is$1@ger.gmane.org>
Message-ID: <201501261819.54191.even.rouault@spatialys.com>

Le lundi 26 janvier 2015 18:12:30, Andre Joost a ?crit :
> Am 26.01.2015 um 16:36 schrieb Even Rouault:
> > Le lundi 26 janvier 2015 16:25:04, Andre Joost a ?crit :
> >> BTW: creating polygons from closed lines is still not available in GDAL
> >> or other osgeo command line tools?
> >> <http://osgeo-org.1560.x6.nabble.com/gdal-dev-MULTILINESTRING-to-MULTIPO
> >> LYG ON-using-ogr2ogr-td5018430.html> was the latest I could find.
> > 
> > Andr?,
> > 
> > Looks like it works now with trunk. Probably a side effect of my recent
> > work on curve geometries where I significantly enhanced conversions
> > between geometry types
> 
> Thanks, works perfectly.
> 
> So +1 from me for a quick relase of 1.11.2 (to get it into the next QGIS
> version as well).

This will not be in 1.11.2 but in GDAL 2.0

> 
> Greetings,
> Andr? Joost
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jan 26 09:47:25 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 18:47:25 +0100
Subject: [gdal-dev] Call for discusson on RFC 52 Strict OGR SQL quoting
Message-ID: <201501261847.25634.even.rouault@spatialys.com>

Hi,

This is a call for discussion on the new "RFC 52 - Strict OGR SQL quoting", 
based on an older ticket.

http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting

Summary :

This RFC proposes that OGR SQL enforces strict quoting rules for SQL literals 
and identifiers.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From a.furieri at lqt.it  Mon Jan 26 10:48:52 2015
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Mon, 26 Jan 2015 19:48:52 +0100
Subject: [gdal-dev] Call for discusson on RFC 52 Strict OGR SQL quoting
In-Reply-To: <201501261847.25634.even.rouault@spatialys.com>
References: <201501261847.25634.even.rouault@spatialys.com>
Message-ID: <5995baa77fca8ab5e921ab608139df6d@lqt.it>

On Mon, 26 Jan 2015 18:47:25 +0100, Even Rouault wrote:
> Hi,
>
> This is a call for discussion on the new "RFC 52 - Strict OGR SQL 
> quoting",
> based on an older ticket.
>
> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
>
> Summary :
>
> This RFC proposes that OGR SQL enforces strict quoting rules for SQL
> literals
> and identifiers.
>

Hi Even,

I fully agree with the intended scopes of this RFC

using more or less at random single or double quotes in SQL expression
is a very common bad practice adopted by too many users.

many DBMS implementations do actually attempt to be reasonably tolerant
about mismatching usages and will successfully work even while parsing
malformed expressions without raising even the blandest warning.
anyway such an "users friendly" forgiveness will simply end up in an
increased confusion and will often impair real interoperability between
different SQL implementations.

always enforcing the standard SQL rules seems to be the most obvious
and safest approach for a tool like GDAL/OGR intended to support an
homogeneous abstraction level ideally supporting any possible SQL DBMS
implementation.

single quotes: string/text literals
double quotes: table and column names

bye Sandro

From even.rouault at spatialys.com  Mon Jan 26 11:52:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 20:52:21 +0100
Subject: [gdal-dev] Killing GME driver ?
Message-ID: <201501262052.22094.even.rouault@spatialys.com>

Hi,

I just saw news here and there (*) that Google Maps Engine will be 
discontinued in January 2016 (couldn't find an official statement from Google 
however, apart from an email quoted by others...). So I was wondering if there 
was a point in keeping the driver in trunk or if it should be just be killed ?

If so, GDAL 2.0 would probably be the first version to remove an existing 
driver : cool ;-)! We could probably do the same with a few drivers for 
esoteric old formats, but it's difficult to know for sure which ones are 
completely unused.

Even

(*) http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-
deprecated.html

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jan 26 12:49:21 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 26 Jan 2015 20:49:21 +0000 (UTC)
Subject: [gdal-dev] Call for discusson on RFC 52 Strict OGR SQL quoting
References: <201501261847.25634.even.rouault@spatialys.com>
Message-ID: <loom.20150126T213623-327@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> This is a call for discussion on the new "RFC 52 - Strict OGR SQL quoting", 
> based on an older ticket.
> 
> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
> 
> Summary :
> 
> This RFC proposes that OGR SQL enforces strict quoting rules for SQL literals 
> and identifiers.

Hi,

Could there be a need to think about the "schema"."table" structure? I have
some memories about (silly) users having table names with dots like
"MY.TABLE". If I remember right, with some database the SQL query 

SELECT "field" FROM "MY.TABLE"

was being interpreted wrongly as "select field named 'field' from table
named 'table' from schema named 'my'".

I do not really know if this trouble belongs to GDAL at all but I share my
weigh memories anyhow.

-Jukka Rahkonen-


From wolf+grass at bergenheim.net  Mon Jan 26 12:54:37 2015
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Mon, 26 Jan 2015 21:54:37 +0100
Subject: [gdal-dev] Killing GME driver ?
In-Reply-To: <201501262052.22094.even.rouault@spatialys.com>
References: <201501262052.22094.even.rouault@spatialys.com>
Message-ID: <CAJhTkW4JQ+0CL62M=Z0hYrsiviEn3BYVpT_U1FhWb_cMUPfDqA@mail.gmail.com>

Hi,

Let's not be hasty here.

The GME driver will become more important now that GME is going down, since
people will possibly be using the GME driver to migrate their data from GME
to what ever other service / platform they are moving to. I think we should
still keep it around for one more year. I suppose I could maintain a patch
for the GDAL driver.  Do what other mechanisms to add a GDAL driver? Did
you mean to only have it live in the 1.11 branch? That should be only
mildly irritating.

Best Regards,
Wolf Bergenheim


On 26 January 2015 at 20:52, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I just saw news here and there (*) that Google Maps Engine will be
> discontinued in January 2016 (couldn't find an official statement from
> Google
> however, apart from an email quoted by others...). So I was wondering if
> there
> was a point in keeping the driver in trunk or if it should be just be
> killed ?
>
> If so, GDAL 2.0 would probably be the first version to remove an existing
> driver : cool ;-)! We could probably do the same with a few drivers for
> esoteric old formats, but it's difficult to know for sure which ones are
> completely unused.
>
> Even
>
> (*) http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-
> deprecated.html
> <http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-deprecated.html>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150126/c0a2489f/attachment.html>

From even.rouault at spatialys.com  Mon Jan 26 12:57:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 21:57:15 +0100
Subject: [gdal-dev] Call for discusson on RFC 52 Strict OGR SQL quoting
In-Reply-To: <loom.20150126T213623-327@post.gmane.org>
References: <201501261847.25634.even.rouault@spatialys.com>
	<loom.20150126T213623-327@post.gmane.org>
Message-ID: <201501262157.15810.even.rouault@spatialys.com>

Le lundi 26 janvier 2015 21:49:21, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Hi,
> > 
> > This is a call for discussion on the new "RFC 52 - Strict OGR SQL
> > quoting", based on an older ticket.
> > 
> > http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
> > 
> > Summary :
> > 
> > This RFC proposes that OGR SQL enforces strict quoting rules for SQL
> > literals and identifiers.
> 
> Hi,
> 
> Could there be a need to think about the "schema"."table" structure? I have
> some memories about (silly) users having table names with dots like
> "MY.TABLE". If I remember right, with some database the SQL query
> 
> SELECT "field" FROM "MY.TABLE"
> 
> was being interpreted wrongly as "select field named 'field' from table
> named 'table' from schema named 'my'".
> 
> I do not really know if this trouble belongs to GDAL at all but I share my
> weigh memories anyhow.

There's no direct relevance with GDAL as we don't have the concept of schema 
in the abstraction, so "my.schema" is really "my.schema" if a layer has this 
name.

The closest thing we have is being able to do joins with other datasources as 
the main one :

SELECT * FROM city 
  LEFT JOIN '/usr2/data/nation.dbf'.nation ON city.nation_id = 
nation.nation_id

This is non standard SQL. Looking at my old patch in 
http://trac.osgeo.org/gdal/attachment/ticket/4280/ticket_4280.patch, it seems 
that this will still be permitted, as well as using double quotes.


> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Mon Jan 26 13:01:31 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 27 Jan 2015 00:01:31 +0300
Subject: [gdal-dev] Call for discusson on RFC 52 Strict OGR SQL quoting
In-Reply-To: <loom.20150126T213623-327@post.gmane.org>
References: <201501261847.25634.even.rouault@spatialys.com>
	<loom.20150126T213623-327@post.gmane.org>
Message-ID: <54C6AB2B.4040300@gmail.com>

Hi,

I just check PostGIS. Create a table with name test.test in test schema. 
The result looks so:
CREATE TABLE test."test.test"
(
   id serial NOT NULL
);

Also, if schema name have spaces it'll be look like: "test 
test"."test.test".

And what about other DBs?

Best regards,
     Dmitry

26.01.2015 23:49, Jukka Rahkonen ?????:
> Even Rouault <even.rouault <at> spatialys.com> writes:
>
>> Hi,
>>
>> This is a call for discussion on the new "RFC 52 - Strict OGR SQL quoting",
>> based on an older ticket.
>>
>> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
>>
>> Summary :
>>
>> This RFC proposes that OGR SQL enforces strict quoting rules for SQL literals
>> and identifiers.
> Hi,
>
> Could there be a need to think about the "schema"."table" structure? I have
> some memories about (silly) users having table names with dots like
> "MY.TABLE". If I remember right, with some database the SQL query
>
> SELECT "field" FROM "MY.TABLE"
>
> was being interpreted wrongly as "select field named 'field' from table
> named 'table' from schema named 'my'".
>
> I do not really know if this trouble belongs to GDAL at all but I share my
> weigh memories anyhow.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at spatialys.com  Mon Jan 26 13:01:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jan 2015 22:01:44 +0100
Subject: [gdal-dev] Killing GME driver ?
In-Reply-To: <CAJhTkW4JQ+0CL62M=Z0hYrsiviEn3BYVpT_U1FhWb_cMUPfDqA@mail.gmail.com>
References: <201501262052.22094.even.rouault@spatialys.com>
	<CAJhTkW4JQ+0CL62M=Z0hYrsiviEn3BYVpT_U1FhWb_cMUPfDqA@mail.gmail.com>
Message-ID: <201501262201.44350.even.rouault@spatialys.com>

Le lundi 26 janvier 2015 21:54:37, Wolf Bergenheim a ?crit :
> Hi,
> 
> Let's not be hasty here.
> 
> The GME driver will become more important now that GME is going down, since
> people will possibly be using the GME driver to migrate their data from GME
> to what ever other service / platform they are moving to. I think we should
> still keep it around for one more year. I suppose I could maintain a patch
> for the GDAL driver.  Do what other mechanisms to add a GDAL driver? Did
> you mean to only have it live in the 1.11 branch? That should be only
> mildly irritating.

Hi Wolf,

Your argument makes sense and we can/should probably keep it in trunk until 
GME is really unavailable. So GDAL 2.1 could kill it.

> 
> Best Regards,
> Wolf Bergenheim
> 
> 
> On 26 January 2015 at 20:52, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Hi,
> > 
> > I just saw news here and there (*) that Google Maps Engine will be
> > discontinued in January 2016 (couldn't find an official statement from
> > Google
> > however, apart from an email quoted by others...). So I was wondering if
> > there
> > was a point in keeping the driver in trunk or if it should be just be
> > killed ?
> > 
> > If so, GDAL 2.0 would probably be the first version to remove an existing
> > driver : cool ;-)! We could probably do the same with a few drivers for
> > esoteric old formats, but it's difficult to know for sure which ones are
> > completely unused.
> > 
> > Even
> > 
> > (*) http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-
> > deprecated.html
> > <http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-depre
> > cated.html>
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From wolf+grass at bergenheim.net  Mon Jan 26 13:15:15 2015
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Mon, 26 Jan 2015 22:15:15 +0100
Subject: [gdal-dev] Killing GME driver ?
In-Reply-To: <201501262201.44350.even.rouault@spatialys.com>
References: <201501262052.22094.even.rouault@spatialys.com>
	<CAJhTkW4JQ+0CL62M=Z0hYrsiviEn3BYVpT_U1FhWb_cMUPfDqA@mail.gmail.com>
	<201501262201.44350.even.rouault@spatialys.com>
Message-ID: <CAJhTkW7VuBvFdn1XhdMAbd9dYvzESMC4z5yDuPvEgJZC4eAEAw@mail.gmail.com>

Hi Even,

Thanks for listening. :)

It will make my life easier in the coming year.

--Wolf

On 26 January 2015 at 22:01, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le lundi 26 janvier 2015 21:54:37, Wolf Bergenheim a ?crit :
> > Hi,
> >
> > Let's not be hasty here.
> >
> > The GME driver will become more important now that GME is going down,
> since
> > people will possibly be using the GME driver to migrate their data from
> GME
> > to what ever other service / platform they are moving to. I think we
> should
> > still keep it around for one more year. I suppose I could maintain a
> patch
> > for the GDAL driver.  Do what other mechanisms to add a GDAL driver? Did
> > you mean to only have it live in the 1.11 branch? That should be only
> > mildly irritating.
>
> Hi Wolf,
>
> Your argument makes sense and we can/should probably keep it in trunk until
> GME is really unavailable. So GDAL 2.1 could kill it.
>
> >
> > Best Regards,
> > Wolf Bergenheim
> >
> >
> > On 26 January 2015 at 20:52, Even Rouault <even.rouault at spatialys.com>
> >
> > wrote:
> > > Hi,
> > >
> > > I just saw news here and there (*) that Google Maps Engine will be
> > > discontinued in January 2016 (couldn't find an official statement from
> > > Google
> > > however, apart from an email quoted by others...). So I was wondering
> if
> > > there
> > > was a point in keeping the driver in trunk or if it should be just be
> > > killed ?
> > >
> > > If so, GDAL 2.0 would probably be the first version to remove an
> existing
> > > driver : cool ;-)! We could probably do the same with a few drivers for
> > > esoteric old formats, but it's difficult to know for sure which ones
> are
> > > completely unused.
> > >
> > > Even
> > >
> > > (*)
> http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-
> > > deprecated.html
> > > <
> http://www.gearthblog.com/blog/archives/2015/01/google-maps-engine-depre
> > > cated.html>
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150126/72bd4789/attachment.html>

From michael.katz at noaa.gov  Mon Jan 26 16:07:18 2015
From: michael.katz at noaa.gov (Michael Katz - NOAA Affiliate)
Date: Mon, 26 Jan 2015 16:07:18 -0800
Subject: [gdal-dev] Macintosh GDAL library looks for UnixImageIO framework
 in default location only?
Message-ID: <CALx5Kqbq4bd9b7oXjmFcaUtTLwcTHd_shLpgN2hNHfToh8Vm3g@mail.gmail.com>

I am using the GDAL 1.11 Complete build for Mac found here:
http://www.kyngchaos.com/software/frameworks.

I am installing my .app bundle in /Applications (or rather the user is
installing it there via a drag-and-drop .dmg), and I don't want the user to
have to install anything to /Library/Frameworks.

However, it appears that something inside the GDAL library is referencing
/Library/Frameworks/UnixImageIO.framework as an absolute path, and I
haven't been able to find a way to tell it to reference that framework from
its location within my .app bundle instead.

The result is that certain files, such as .tif files, are not handled
correctly (e.g., I cannot get the bounding world rect of a georeferenced
.tif file when /Library/Frameworks/UnixImageIO.framework is not present,
but can get it when /Library/Frameworks/UnixImageIO.framework is present).

I looked at the QGIS installer, but that requires you to install GDAL plus
UnixImageIO to /Library/Frameworks explicitly, so that didn't help.

I understand this Mac build of GDAL is done by William Kyngesburye, and is
not part of the official GDAL build, but I couldn't find a way to get in
touch with Kyngesburye directly and I thought someone on this list might
have faced this problem.

Thanks for any help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150126/7dfeb5da/attachment-0001.html>

From woklist at kyngchaos.com  Mon Jan 26 20:17:22 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 26 Jan 2015 22:17:22 -0600
Subject: [gdal-dev] Macintosh GDAL library looks for UnixImageIO
	framework in default location only?
In-Reply-To: <CALx5Kqbq4bd9b7oXjmFcaUtTLwcTHd_shLpgN2hNHfToh8Vm3g@mail.gmail.com>
References: <CALx5Kqbq4bd9b7oXjmFcaUtTLwcTHd_shLpgN2hNHfToh8Vm3g@mail.gmail.com>
Message-ID: <673162AA-0B87-45E7-BFB6-64CFD1DC936B@kyngchaos.com>

My email should be in the GDAL installer readme.

Anyways, yes, the whole batch of frameworks is set up for absolue paths.  So not only does GDAL reference UnixImageIO (and SQLite3), when you compile an app linked to them, it will also link absolute paths to the frameworks.

The standard way to change this in your app and in any bundled frameworks is to use install_name_tool with the -change option and a special relative path keyword, @loader_path:

install_name_tool -change /original/path @loader_path/relative/path /path/to/bundled/framework/binary

/original/path will be the /Library/Frameworks path to the binary file of the framework.

the relative path is relative from the binary file in the framework, so you will need to back out with a few ../

Of course, your app should know how to redirect GDAL to the bundled copies of its support files, or it will try to find them in the compiled in /Library/Frameworks path.  The UnixImageIO framework also has support files for the geotiff library that will have to be redirected if used.

On Jan 26, 2015, at 6:07 PM, Michael Katz - NOAA Affiliate <michael.katz at noaa.gov> wrote:

> I am using the GDAL 1.11 Complete build for Mac found here: http://www.kyngchaos.com/software/frameworks.
> 
> I am installing my .app bundle in /Applications (or rather the user is installing it there via a drag-and-drop .dmg), and I don't want the user to have to install anything to /Library/Frameworks.
> 
> However, it appears that something inside the GDAL library is referencing /Library/Frameworks/UnixImageIO.framework as an absolute path, and I haven't been able to find a way to tell it to reference that framework from its location within my .app bundle instead.
> 
> The result is that certain files, such as .tif files, are not handled correctly (e.g., I cannot get the bounding world rect of a georeferenced .tif file when /Library/Frameworks/UnixImageIO.framework is not present, but can get it when /Library/Frameworks/UnixImageIO.framework is present).
> 
> I looked at the QGIS installer, but that requires you to install GDAL plus UnixImageIO to /Library/Frameworks explicitly, so that didn't help.
> 
> I understand this Mac build of GDAL is done by William Kyngesburye, and is not part of the official GDAL build, but I couldn't find a way to get in touch with Kyngesburye directly and I thought someone on this list might have faced this problem.
> 
> Thanks for any help.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From even.rouault at spatialys.com  Tue Jan 27 04:44:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Jan 2015 13:44:28 +0100
Subject: [gdal-dev] Python3 continuous testing
Message-ID: <201501271344.28949.even.rouault@spatialys.com>

Hi,

Just to notify you that I've added a python3 branch for Travis-CI testing :
https://travis-ci.org/rouault/gdal_coverage/branches

Before today's commits, Python 3 bindings had been broken in trunk for a few 
months without anyone noticying/complaining. Now this should no longer happen.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Jan 27 05:39:49 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Jan 2015 14:39:49 +0100
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
	Fields and FIDs
In-Reply-To: <201501231617.33531.even.rouault@spatialys.com>
References: <201501231617.33531.even.rouault@spatialys.com>
Message-ID: <201501271439.49192.even.rouault@spatialys.com>

If people need more time to review, tell me otherwise I'll call for a vote on 
it tomorrow.

> Hi,
> 
> This is a call for discussion on revisiting the existing RFC 31 - OGR 64bit
> Integer Fields and FIDs, initiated by Frank in 2010 and that I've extended.
> 
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
> 
> Below the summary :
> """
> This RFC addresses steps to upgrade OGR to support 64bit integer fields and
> feature ids. Many feature data formats support wide integers, and the
> inability to transform these through OGR causes increasing numbers of
> problems.
> """
> 
> A first discussion took place at http://lists.osgeo.org/pipermail/gdal-
> dev/2010-November/thread.html#26883. My main remarks at that time were
> about compatibility issues, but as this would go in GDAL 2.0, they are
> likely less critical.
> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Tue Jan 27 05:49:01 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 27 Jan 2015 14:49:01 +0100
Subject: [gdal-dev] Python3 continuous testing
In-Reply-To: <201501271344.28949.even.rouault@spatialys.com>
References: <201501271344.28949.even.rouault@spatialys.com>
Message-ID: <CACALY+SxENLQMhF+YvgMhkjvAYBqNnTOdiGCdmJ8B2V=+BpWjw@mail.gmail.com>

Hi Even,

I've noticed build issue on Windows using the latest (stable) Python3.x
versions, hope that this fix will solve that problem too.

Thanks,

Tamas


2015-01-27 13:44 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> Just to notify you that I've added a python3 branch for Travis-CI testing :
> https://travis-ci.org/rouault/gdal_coverage/branches
>
> Before today's commits, Python 3 bindings had been broken in trunk for a
> few
> months without anyone noticying/complaining. Now this should no longer
> happen.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150127/0eff4308/attachment.html>

From even.rouault at spatialys.com  Tue Jan 27 05:56:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Jan 2015 14:56:45 +0100
Subject: [gdal-dev] Python3 continuous testing
In-Reply-To: <CACALY+SxENLQMhF+YvgMhkjvAYBqNnTOdiGCdmJ8B2V=+BpWjw@mail.gmail.com>
References: <201501271344.28949.even.rouault@spatialys.com>
	<CACALY+SxENLQMhF+YvgMhkjvAYBqNnTOdiGCdmJ8B2V=+BpWjw@mail.gmail.com>
Message-ID: <201501271456.45650.even.rouault@spatialys.com>

Le mardi 27 janvier 2015 14:49:01, Tamas Szekeres a ?crit :
> Hi Even,
> 
> I've noticed build issue on Windows using the latest (stable) Python3.x
> versions, hope that this fix will solve that problem too.

Hi Tamas,

Thas would be surprising since my commits solved runtime failure, not build 
failure. Which error do you get ?

I don't see any error when looking at :
http://build.gisinternals.com/sdk/build-output/vc10-20150127-6-56-46-62-vc10-
dev.txt

> 
> Thanks,
> 
> Tamas
> 
> 2015-01-27 13:44 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> > Hi,
> > 
> > Just to notify you that I've added a python3 branch for Travis-CI testing
> > : https://travis-ci.org/rouault/gdal_coverage/branches
> > 
> > Before today's commits, Python 3 bindings had been broken in trunk for a
> > few
> > months without anyone noticying/complaining. Now this should no longer
> > happen.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dmorissette at mapgears.com  Tue Jan 27 09:17:44 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 27 Jan 2015 12:17:44 -0500
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
 Fields and FIDs
In-Reply-To: <54C398FC.7060304@gmail.com>
References: <201501231617.33531.even.rouault@spatialys.com>
	<54C398FC.7060304@gmail.com>
Message-ID: <54C7C838.9040103@mapgears.com>

Hi Even,

I like the RFC, and just like Dimitri I was wondering if instead of 
GetFID64(), GetFeatureCount64(), etc, we could not simply keep the 
current method names since 2.0 is the time to break the API anyway.

Also note that in the list of driver upgrades, you could add potential 
enhancement to the support for MITAB "TAB Seamless Tables" which had a 
potential FID overflow problem on very large tables with 32 bit ids. The 
driver would have caught and reported an error in this case, but that 
limitation can be solved with 64 bit ids if/when the code is upgraded to 
use them. Look for TABSeamless::EncodeFeatureId() and related methods in 
mitab_tabseamless.cpp.

Daniel


On 2015-01-24 8:07 AM, Dmitriy Baryshnikov wrote:
> Hi Even,
>
> The RFC looks good. One note. May be in GDAL 2 we can use GetFID instead
> GetFID64? Because we can allow some incompatibility between GDAL 1.x and
> GDAL 2.x.
>
> Best regards,
>      Dmitry
>
> 23.01.2015 18:17, Even Rouault ?????:
>> Hi,
>>
>> This is a call for discussion on revisiting the existing RFC 31 - OGR
>> 64bit
>> Integer Fields and FIDs, initiated by Frank in 2010 and that I've
>> extended.
>>
>> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
>>
>> Below the summary :
>> """
>> This RFC addresses steps to upgrade OGR to support 64bit integer
>> fields and
>> feature ids. Many feature data formats support wide integers, and the
>> inability to transform these through OGR causes increasing numbers of
>> problems.
>> """
>>
>> A first discussion took place at http://lists.osgeo.org/pipermail/gdal-
>> dev/2010-November/thread.html#26883. My main remarks at that time were
>> about
>> compatibility issues, but as this would go in GDAL 2.0, they are
>> likely less
>> critical.
>>
>> Even
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From even.rouault at spatialys.com  Tue Jan 27 09:47:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Jan 2015 18:47:28 +0100
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
	Fields and FIDs
In-Reply-To: <54C7C838.9040103@mapgears.com>
References: <201501231617.33531.even.rouault@spatialys.com>
	<54C398FC.7060304@gmail.com> <54C7C838.9040103@mapgears.com>
Message-ID: <201501271847.28692.even.rouault@spatialys.com>

Le mardi 27 janvier 2015 18:17:44, Daniel Morissette a ?crit :
> Hi Even,
> 
> I like the RFC, and just like Dimitri I was wondering if instead of
> GetFID64(), GetFeatureCount64(), etc, we could not simply keep the
> current method names since 2.0 is the time to break the API anyway.

Hi Daniel,

Not sure if you saw my answer to Dmitriy as it ended up into a separate thread 
due to dumb email agent. Reposting it inline

"""Dmitriy, 

The main reason for the new symbol is that if we change the return type it 
might cause crashing problems that are not detected at compile time if GetFID 
is used in a printf like function. For example

printf("%ld %s", GetFID (), str)

Even
"""

I've taken that approach from Frank's initial draft and that seamed a valid 
concern. That said, if you guys think that changing the return type is better, 
I've no strong mind.

> 
> Also note that in the list of driver upgrades, you could add potential
> enhancement to the support for MITAB "TAB Seamless Tables" which had a
> potential FID overflow problem on very large tables with 32 bit ids. The
> driver would have caught and reported an error in this case, but that
> limitation can be solved with 64 bit ids if/when the code is upgraded to
> use them. Look for TABSeamless::EncodeFeatureId() and related methods in
> mitab_tabseamless.cpp.

OK thanks for the hint, I'll have a look at this. Do you have samples datasets 
that would trigger that issue ?

Even

> 
> Daniel
> 
> On 2015-01-24 8:07 AM, Dmitriy Baryshnikov wrote:
> > Hi Even,
> > 
> > The RFC looks good. One note. May be in GDAL 2 we can use GetFID instead
> > GetFID64? Because we can allow some incompatibility between GDAL 1.x and
> > GDAL 2.x.
> > 
> > Best regards,
> > 
> >      Dmitry
> > 
> > 23.01.2015 18:17, Even Rouault ?????:
> >> Hi,
> >> 
> >> This is a call for discussion on revisiting the existing RFC 31 - OGR
> >> 64bit
> >> Integer Fields and FIDs, initiated by Frank in 2010 and that I've
> >> extended.
> >> 
> >> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
> >> 
> >> Below the summary :
> >> """
> >> This RFC addresses steps to upgrade OGR to support 64bit integer
> >> fields and
> >> feature ids. Many feature data formats support wide integers, and the
> >> inability to transform these through OGR causes increasing numbers of
> >> problems.
> >> """
> >> 
> >> A first discussion took place at http://lists.osgeo.org/pipermail/gdal-
> >> dev/2010-November/thread.html#26883. My main remarks at that time were
> >> about
> >> compatibility issues, but as this would go in GDAL 2.0, they are
> >> likely less
> >> critical.
> >> 
> >> Even
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From woklist at kyngchaos.com  Tue Jan 27 13:12:12 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue, 27 Jan 2015 15:12:12 -0600
Subject: [gdal-dev] gdal.org only works with www.gdal.org now?
Message-ID: <79702FE6-2EF1-46A1-B593-5F4B2B63F0F1@kyngchaos.com>

It appears that the GDAL website only responds to www.gdal.org now, and not gdal.org.  I usually let my history fill it in, which has always been without the www (instead of using bookmarks).  There is also a hardwired gdal.org link on the main page, to the GDAL 1.x documentation.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From dmorissette at mapgears.com  Tue Jan 27 13:32:05 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 27 Jan 2015 16:32:05 -0500
Subject: [gdal-dev] gdal.org only works with www.gdal.org now?
In-Reply-To: <79702FE6-2EF1-46A1-B593-5F4B2B63F0F1@kyngchaos.com>
References: <79702FE6-2EF1-46A1-B593-5F4B2B63F0F1@kyngchaos.com>
Message-ID: <54C803D5.4060102@mapgears.com>

FWIW, gdal.org and www.gdal.org both work fine for me form here. (Tested 
with wget to ensure there was no caching involved)

Daniel


On 2015-01-27 4:12 PM, William Kyngesburye wrote:
> It appears that the GDAL website only responds to www.gdal.org now, and not gdal.org.  I usually let my history fill it in, which has always been without the www (instead of using bookmarks).  There is also a hardwired gdal.org link on the main page, to the GDAL 1.x documentation.
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
> Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
>
> -HitchHiker's Guide to the Galaxy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From nhv at cape.com  Tue Jan 27 13:39:33 2015
From: nhv at cape.com (Norman Vine)
Date: Tue, 27 Jan 2015 16:39:33 -0500
Subject: [gdal-dev] gdal.org only works with www.gdal.org now?
In-Reply-To: <54C803D5.4060102@mapgears.com>
References: <79702FE6-2EF1-46A1-B593-5F4B2B63F0F1@kyngchaos.com>
	<54C803D5.4060102@mapgears.com>
Message-ID: <80767C1D-1809-4CA4-8A0A-8B414E46F71C@cape.com>

These work for me with Firefox<35.0.1> and Chrome <40.0.2214.93> but not Safari <6.2.2>

Norman

On Jan 27, 2015, at 4:32 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:

> FWIW, gdal.org and www.gdal.org both work fine for me form here. (Tested with wget to ensure there was no caching involved)
> 
> Daniel
> 
> 
> On 2015-01-27 4:12 PM, William Kyngesburye wrote:
>> It appears that the GDAL website only responds to www.gdal.org now, and not gdal.org.  I usually let my history fill it in, which has always been without the www (instead of using bookmarks).  There is also a hardwired gdal.org link on the main page, to the GDAL 1.x documentation.
>> 
>> -----

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 27 13:47:26 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 27 Jan 2015 21:47:26 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Call_for_discusson_on_RFC_31_-_OGR_64bit_Int?=
	=?utf-8?q?eger_Fields=09and_FIDs?=
References: <201501231617.33531.even.rouault@spatialys.com>
Message-ID: <loom.20150127T224323-820@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

 
> Hi,
> 
> This is a call for discussion on revisiting the existing RFC 31 - OGR 64bit 
> Integer Fields and FIDs, initiated by Frank in 2010 and that I've extended.
> 
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64


+1

Looks like a huge work that you have done with everything listed in 
https://github.com/rouault/gdal2/compare/rfc31_64bit.


-Jukka Rahkonen-


From szekerest at gmail.com  Tue Jan 27 14:18:45 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 27 Jan 2015 23:18:45 +0100
Subject: [gdal-dev] Python3 continuous testing
In-Reply-To: <201501271456.45650.even.rouault@spatialys.com>
References: <201501271344.28949.even.rouault@spatialys.com>
	<CACALY+SxENLQMhF+YvgMhkjvAYBqNnTOdiGCdmJ8B2V=+BpWjw@mail.gmail.com>
	<201501271456.45650.even.rouault@spatialys.com>
Message-ID: <CACALY+QD+W=dh3Akw7EO_EmxTLM=cUJ+mbG=7zMJUE=Rt-U9Bw@mail.gmail.com>

Hi Even,

I get this output from a Python 3.4 build (VS2012):


E:\builds\Python34\python.exe setup.py build
running build
running build_py
creating build
creating build\lib.win32-3.4
copying gdal.py -> build\lib.win32-3.4
copying ogr.py -> build\lib.win32-3.4
copying osr.py -> build\lib.win32-3.4
copying gdalconst.py -> build\lib.win32-3.4
copying gdalnumeric.py -> build\lib.win32-3.4
creating build\lib.win32-3.4\osgeo
copying osgeo\gdal.py -> build\lib.win32-3.4\osgeo
copying osgeo\gdalconst.py -> build\lib.win32-3.4\osgeo
copying osgeo\gdalnumeric.py -> build\lib.win32-3.4\osgeo
copying osgeo\gdal_array.py -> build\lib.win32-3.4\osgeo
copying osgeo\ogr.py -> build\lib.win32-3.4\osgeo
copying osgeo\osr.py -> build\lib.win32-3.4\osgeo
copying osgeo\__init__.py -> build\lib.win32-3.4\osgeo
Fixing build\lib.win32-3.4\gdal.py build\lib.win32-3.4\ogr.py
build\lib.win32-3.4\osr.py build\lib.win32-3.4\gdalconst.py
build\lib.win32-3.4\gdalnumeric.py build\lib.win32-3.4\osgeo\gdal.py
build\lib.win32-3.4\osgeo\gdalconst.py
build\lib.win32-3.4\osgeo\gdalnumeric.py
build\lib.win32-3.4\osgeo\gdal_array.py build\lib.win32-3.4\osgeo\ogr.py
build\lib.win32-3.4\osgeo\osr.py build\lib.win32-3.4\osgeo\__init__.py
Skipping implicit fixer: ws_comma
Fixing build\lib.win32-3.4\gdal.py build\lib.win32-3.4\ogr.py
build\lib.win32-3.4\osr.py build\lib.win32-3.4\gdalconst.py
build\lib.win32-3.4\gdalnumeric.py build\lib.win32-3.4\osgeo\gdal.py
build\lib.win32-3.4\osgeo\gdalconst.py
build\lib.win32-3.4\osgeo\gdalnumeric.py
build\lib.win32-3.4\osgeo\gdal_array.py build\lib.win32-3.4\osgeo\ogr.py
build\lib.win32-3.4\osgeo\osr.py build\lib.win32-3.4\osgeo\__init__.py
Skipping implicit fixer: ws_comma
running build_ext
building 'osgeo._gdal' extension
creating build\temp.win32-3.4
creating build\temp.win32-3.4\Release
creating build\temp.win32-3.4\Release\extensions
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\cl.exe /c
/nologo /Ox /MD /W3 /GS- /DNDEBUG -I../../port -I../../gcore -I../../alg
-I../../ogr/ -IE:\builds\Python34\include -IE:\builds\Python34\include
-IE:\builds\Python34\lib\site-packages\numpy\core\include
/Tpextensions/gdal_wrap.cpp
/Fobuild\temp.win32-3.4\Release\extensions/gdal_wrap.obj
gdal_wrap.cpp
extensions/gdal_wrap.cpp(2451) : error C3861: 'PyCObject_Import':
identifier not found
extensions/gdal_wrap.cpp(2521) : error C3861: 'PyCObject_FromVoidPtr':
identifier not found
extensions/gdal_wrap.cpp(2544) : error C3861: 'PyCObject_AsVoidPtr':
identifier not found
extensions/gdal_wrap.cpp(2549) : error C3861: 'PyCObject_FromVoidPtr':
identifier not found
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\xlocale(336)
: warning C4530: C++ exception handler used, but unwind semantics are not
enabled. Specify /EHsc
e:\sdk\vc11\gdal-trunk\gdal\port\cpl_config.h(16) : warning C4005:
'HAVE_SNPRINTF' : macro redefinition
        e:\builds\python34\include\pyerrors.h(450) : see previous
definition of 'HAVE_SNPRINTF'
e:\sdk\vc11\gdal-trunk\gdal\port\cpl_config.h(62) : warning C4005:
'HAVE_DIRECT_H' : macro redefinition
        e:\builds\python34\include\pyconfig.h(467) : see previous
definition of 'HAVE_DIRECT_H'
../../gcore\gdal_priv.h(547) : warning C4251: 'GDALColorTable::aoEntries' :
class 'std::vector<_Ty>' needs to have dll-interface to be used by clients
of class 'GDALColorTable'
        with
        [
            _Ty=GDALColorEntry
        ]
../../gcore\gdal_priv.h(932) : warning C4251:
'GDALDriverManager::oMapNameToDrivers' : class 'std::map<_Kty,_Ty>' needs
to have dll-interface to be used by clients of class 'GDALDriverManager'
        with
        [
            _Kty=CPLString,
            _Ty=GDALDriver *
        ]
extensions/gdal_wrap.cpp(3003) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'Py_ssize_t', possible loss of data
extensions/gdal_wrap.cpp(3016) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'Py_ssize_t', possible loss of data
extensions/gdal_wrap.cpp(3019) : warning C4244: 'return' : conversion from
'GIntBig' to 'int', possible loss of data
extensions/gdal_wrap.cpp(4136) : warning C4244: '=' : conversion from
'double' to 'int', possible loss of data
extensions/gdal_wrap.cpp(4137) : warning C4244: '=' : conversion from
'double' to 'int', possible loss of data
extensions/gdal_wrap.cpp(4218) : warning C4244: '=' : conversion from
'GIntBig' to 'int', possible loss of data
extensions/gdal_wrap.cpp(4392) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'Py_ssize_t', possible loss of data
extensions/gdal_wrap.cpp(4414) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'size_t', possible loss of data
extensions/gdal_wrap.cpp(4419) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'size_t', possible loss of data
extensions/gdal_wrap.cpp(4422) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'size_t', possible loss of data
extensions/gdal_wrap.cpp(4790) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'Py_ssize_t', possible loss of data
extensions/gdal_wrap.cpp(4813) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'size_t', possible loss of data
extensions/gdal_wrap.cpp(4840) : warning C4244: 'argument' : conversion
from 'GIntBig' to 'Py_ssize_t', possible loss of data



builds at gisinternals use older python releases which don't produce this
problem.


Thanks,

Tamas


2015-01-27 14:56 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Le mardi 27 janvier 2015 14:49:01, Tamas Szekeres a ?crit :
> > Hi Even,
> >
> > I've noticed build issue on Windows using the latest (stable) Python3.x
> > versions, hope that this fix will solve that problem too.
>
> Hi Tamas,
>
> Thas would be surprising since my commits solved runtime failure, not build
> failure. Which error do you get ?
>
> I don't see any error when looking at :
>
> http://build.gisinternals.com/sdk/build-output/vc10-20150127-6-56-46-62-vc10-
> dev.txt
>
> >
> > Thanks,
> >
> > Tamas
> >
> > 2015-01-27 13:44 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> > > Hi,
> > >
> > > Just to notify you that I've added a python3 branch for Travis-CI
> testing
> > > : https://travis-ci.org/rouault/gdal_coverage/branches
> > >
> > > Before today's commits, Python 3 bindings had been broken in trunk for
> a
> > > few
> > > months without anyone noticying/complaining. Now this should no longer
> > > happen.
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150127/aef8fefa/attachment.html>

From michael.katz at noaa.gov  Tue Jan 27 14:41:56 2015
From: michael.katz at noaa.gov (Michael Katz - NOAA Affiliate)
Date: Tue, 27 Jan 2015 14:41:56 -0800
Subject: [gdal-dev] Macintosh GDAL library looks for UnixImageIO
 framework in default location only?
In-Reply-To: <673162AA-0B87-45E7-BFB6-64CFD1DC936B@kyngchaos.com>
References: <CALx5Kqbq4bd9b7oXjmFcaUtTLwcTHd_shLpgN2hNHfToh8Vm3g@mail.gmail.com>
	<673162AA-0B87-45E7-BFB6-64CFD1DC936B@kyngchaos.com>
Message-ID: <CALx5KqZ_ut-d9-5qc8ZpBLfrNCmY-weUR2AUEX=QCmymb99+CA@mail.gmail.com>

We have resolved the  issue.

My problem statement was misleading. Our program was not having trouble
finding a library, but rather the libgeotiff library was having trouble
finding its data files, which came out in opensnoop as failures to open:

1698751227   2095 MARPLOT_server  39
/Library/Frameworks/UnixImageIO.framework/Versions/E/Resources/epsg_csv/pcs.override.csv
1698751227   2095 MARPLOT_server  39
/Library/Frameworks/UnixImageIO.framework/Versions/E/Resources/epsg_csv/pcs.csv
1698751227   2095 MARPLOT_server  39
/Library/Frameworks/UnixImageIO.framework/Versions/E/Resources/epsg_csv/projop_wparm.csv

So I learned that in the build of UnixImageIO.framework, in
buildfw-uiio.sh, it uses a hard-coded path to /Library/Frameworks as the
prefix for the --data-dir parameter used in building geotiff, which becomes
CSV_DATA_DIR in geotiff's cpl_csv_c. But that file also shows that the
environment variable GEOTIFF_CSV can be defined to override CSV_DATA_DIR,
so we are doing that now with a setenv() call, and it works.

So for users like me who want to bundle GDAL into a standalone app, it
would help include a note about this gotcha, perhaps in the UnixImageIO
section of your "Unix Compatibility Frameworks" page.



On Mon, Jan 26, 2015 at 8:17 PM, William Kyngesburye <woklist at kyngchaos.com>
wrote:

> My email should be in the GDAL installer readme.
>
> Anyways, yes, the whole batch of frameworks is set up for absolue paths.
> So not only does GDAL reference UnixImageIO (and SQLite3), when you compile
> an app linked to them, it will also link absolute paths to the frameworks.
>
> The standard way to change this in your app and in any bundled frameworks
> is to use install_name_tool with the -change option and a special relative
> path keyword, @loader_path:
>
> install_name_tool -change /original/path @loader_path/relative/path
> /path/to/bundled/framework/binary
>
> /original/path will be the /Library/Frameworks path to the binary file of
> the framework.
>
> the relative path is relative from the binary file in the framework, so
> you will need to back out with a few ../
>
> Of course, your app should know how to redirect GDAL to the bundled copies
> of its support files, or it will try to find them in the compiled in
> /Library/Frameworks path.  The UnixImageIO framework also has support files
> for the geotiff library that will have to be redirected if used.
>
> On Jan 26, 2015, at 6:07 PM, Michael Katz - NOAA Affiliate <
> michael.katz at noaa.gov> wrote:
>
> > I am using the GDAL 1.11 Complete build for Mac found here:
> http://www.kyngchaos.com/software/frameworks.
> >
> > I am installing my .app bundle in /Applications (or rather the user is
> installing it there via a drag-and-drop .dmg), and I don't want the user to
> have to install anything to /Library/Frameworks.
> >
> > However, it appears that something inside the GDAL library is
> referencing /Library/Frameworks/UnixImageIO.framework as an absolute path,
> and I haven't been able to find a way to tell it to reference that
> framework from its location within my .app bundle instead.
> >
> > The result is that certain files, such as .tif files, are not handled
> correctly (e.g., I cannot get the bounding world rect of a georeferenced
> .tif file when /Library/Frameworks/UnixImageIO.framework is not present,
> but can get it when /Library/Frameworks/UnixImageIO.framework is present).
> >
> > I looked at the QGIS installer, but that requires you to install GDAL
> plus UnixImageIO to /Library/Frameworks explicitly, so that didn't help.
> >
> > I understand this Mac build of GDAL is done by William Kyngesburye, and
> is not part of the official GDAL build, but I couldn't find a way to get in
> touch with Kyngesburye directly and I thought someone on this list might
> have faced this problem.
> >
> > Thanks for any help.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Earth: "Mostly harmless"
>
> - revised entry in the HitchHiker's Guide to the Galaxy
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150127/cfa7cd40/attachment-0001.html>

From woklist at kyngchaos.com  Tue Jan 27 14:47:07 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue, 27 Jan 2015 16:47:07 -0600
Subject: [gdal-dev] Macintosh GDAL library looks for UnixImageIO
	framework in default location only?
In-Reply-To: <CALx5KqZ_ut-d9-5qc8ZpBLfrNCmY-weUR2AUEX=QCmymb99+CA@mail.gmail.com>
References: <CALx5Kqbq4bd9b7oXjmFcaUtTLwcTHd_shLpgN2hNHfToh8Vm3g@mail.gmail.com>
	<673162AA-0B87-45E7-BFB6-64CFD1DC936B@kyngchaos.com>
	<CALx5KqZ_ut-d9-5qc8ZpBLfrNCmY-weUR2AUEX=QCmymb99+CA@mail.gmail.com>
Message-ID: <3B6A7CE9-3B9E-492D-ABFA-C9CB730E8C86@kyngchaos.com>

Thanks for catching that - I forgot to add that bit long ago when I added GeoTIFF to the UnixImageIO framework.

On Jan 27, 2015, at 4:41 PM, Michael Katz - NOAA Affiliate <michael.katz at noaa.gov> wrote:

> We have resolved the  issue.
> 
> My problem statement was misleading. Our program was not having trouble finding a library, but rather the libgeotiff library was having trouble finding its data files, which came out in opensnoop as failures to open:
> 
> 1698751227   2095 MARPLOT_server  39 /Library/Frameworks/UnixImageIO.framework/Versions/E/Resources/epsg_csv/pcs.override.csv 
> 1698751227   2095 MARPLOT_server  39 /Library/Frameworks/UnixImageIO.framework/Versions/E/Resources/epsg_csv/pcs.csv 
> 1698751227   2095 MARPLOT_server  39 /Library/Frameworks/UnixImageIO.framework/Versions/E/Resources/epsg_csv/projop_wparm.csv 
> 
> So I learned that in the build of UnixImageIO.framework, in buildfw-uiio.sh, it uses a hard-coded path to /Library/Frameworks as the prefix for the --data-dir parameter used in building geotiff, which becomes CSV_DATA_DIR in geotiff's cpl_csv_c. But that file also shows that the environment variable GEOTIFF_CSV can be defined to override CSV_DATA_DIR, so we are doing that now with a setenv() call, and it works.
> 
> So for users like me who want to bundle GDAL into a standalone app, it would help include a note about this gotcha, perhaps in the UnixImageIO section of your "Unix Compatibility Frameworks" page.
> 
> 
> 
> On Mon, Jan 26, 2015 at 8:17 PM, William Kyngesburye <woklist at kyngchaos.com> wrote:
> My email should be in the GDAL installer readme.
> 
> Anyways, yes, the whole batch of frameworks is set up for absolue paths.  So not only does GDAL reference UnixImageIO (and SQLite3), when you compile an app linked to them, it will also link absolute paths to the frameworks.
> 
> The standard way to change this in your app and in any bundled frameworks is to use install_name_tool with the -change option and a special relative path keyword, @loader_path:
> 
> install_name_tool -change /original/path @loader_path/relative/path /path/to/bundled/framework/binary
> 
> /original/path will be the /Library/Frameworks path to the binary file of the framework.
> 
> the relative path is relative from the binary file in the framework, so you will need to back out with a few ../
> 
> Of course, your app should know how to redirect GDAL to the bundled copies of its support files, or it will try to find them in the compiled in /Library/Frameworks path.  The UnixImageIO framework also has support files for the geotiff library that will have to be redirected if used.
> 
> On Jan 26, 2015, at 6:07 PM, Michael Katz - NOAA Affiliate <michael.katz at noaa.gov> wrote:
> 
> > I am using the GDAL 1.11 Complete build for Mac found here: http://www.kyngchaos.com/software/frameworks.
> >
> > I am installing my .app bundle in /Applications (or rather the user is installing it there via a drag-and-drop .dmg), and I don't want the user to have to install anything to /Library/Frameworks.
> >
> > However, it appears that something inside the GDAL library is referencing /Library/Frameworks/UnixImageIO.framework as an absolute path, and I haven't been able to find a way to tell it to reference that framework from its location within my .app bundle instead.
> >
> > The result is that certain files, such as .tif files, are not handled correctly (e.g., I cannot get the bounding world rect of a georeferenced .tif file when /Library/Frameworks/UnixImageIO.framework is not present, but can get it when /Library/Frameworks/UnixImageIO.framework is present).
> >
> > I looked at the QGIS installer, but that requires you to install GDAL plus UnixImageIO to /Library/Frameworks explicitly, so that didn't help.
> >
> > I understand this Mac build of GDAL is done by William Kyngesburye, and is not part of the official GDAL build, but I couldn't find a way to get in touch with Kyngesburye directly and I thought someone on this list might have faced this problem.
> >
> > Thanks for any help.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> Earth: "Mostly harmless"
> 
> - revised entry in the HitchHiker's Guide to the Galaxy
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

The equator is so long, it could encircle the earth completely once.


From woklist at kyngchaos.com  Tue Jan 27 14:50:23 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue, 27 Jan 2015 16:50:23 -0600
Subject: [gdal-dev] gdal.org only works with www.gdal.org now?
In-Reply-To: <80767C1D-1809-4CA4-8A0A-8B414E46F71C@cape.com>
References: <79702FE6-2EF1-46A1-B593-5F4B2B63F0F1@kyngchaos.com>
	<54C803D5.4060102@mapgears.com>
	<80767C1D-1809-4CA4-8A0A-8B414E46F71C@cape.com>
Message-ID: <CB8A2B9E-B9F5-4F25-B8D9-8A69C2B996DE@kyngchaos.com>

Working now for me (Safari 6.2.2).  Maybe a hiccup on the server.

On Jan 27, 2015, at 3:39 PM, Norman Vine <nhv at cape.com> wrote:

> These work for me with Firefox<35.0.1> and Chrome <40.0.2214.93> but not Safari <6.2.2>
> 
> Norman
> 
> On Jan 27, 2015, at 4:32 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:
> 
>> FWIW, gdal.org and www.gdal.org both work fine for me form here. (Tested with wget to ensure there was no caching involved)
>> 
>> Daniel
>> 
>> 
>> On 2015-01-27 4:12 PM, William Kyngesburye wrote:
>>> It appears that the GDAL website only responds to www.gdal.org now, and not gdal.org.  I usually let my history fill it in, which has always been without the www (instead of using bookmarks).  There is also a hardwired gdal.org link on the main page, to the GDAL 1.x documentation.
>>> 
>>> -----
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the past isn't a fiction designed to account for the discrepancy between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From nhv at cape.com  Tue Jan 27 15:15:28 2015
From: nhv at cape.com (Norman Vine)
Date: Tue, 27 Jan 2015 18:15:28 -0500
Subject: [gdal-dev] gdal.org only works with www.gdal.org now?
In-Reply-To: <CB8A2B9E-B9F5-4F25-B8D9-8A69C2B996DE@kyngchaos.com>
References: <79702FE6-2EF1-46A1-B593-5F4B2B63F0F1@kyngchaos.com>
	<54C803D5.4060102@mapgears.com>
	<80767C1D-1809-4CA4-8A0A-8B414E46F71C@cape.com>
	<CB8A2B9E-B9F5-4F25-B8D9-8A69C2B996DE@kyngchaos.com>
Message-ID: <2C8F7C5D-115A-418F-AC63-3616B2DFEFA1@cape.com>

Confirmed  working here now also  :-)

On Jan 27, 2015, at 5:50 PM, William Kyngesburye <woklist at kyngchaos.com> wrote:

> Working now for me (Safari 6.2.2).  Maybe a hiccup on the server.
> 
> On Jan 27, 2015, at 3:39 PM, Norman Vine <nhv at cape.com> wrote:
> 
>> These work for me with Firefox<35.0.1> and Chrome <40.0.2214.93> but not Safari <6.2.2>
>> 
>> Norman
>> 
>> On Jan 27, 2015, at 4:32 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:
>> 
>>> FWIW, gdal.org and www.gdal.org both work fine for me form here. (Tested with wget to ensure there was no caching involved)
>>> 
>>> Daniel
>>> 
>>> 
>>> On 2015-01-27 4:12 PM, William Kyngesburye wrote:
>>>> It appears that the GDAL website only responds to www.gdal.org now, and not gdal.org.  I usually let my history fill it in, which has always been without the www (instead of using bookmarks).  There is also a hardwired gdal.org link on the main page, to the GDAL 1.x documentation.
>>>> 
>>>> -----
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "This is a question about the past, is it? ... How can I tell that the past isn't a fiction designed to account for the discrepancy between my immediate physical sensations and my state of mind?"
> 
> - The Ruler of the Universe
> 
> 


From dmorissette at mapgears.com  Tue Jan 27 18:51:51 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 27 Jan 2015 21:51:51 -0500
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
 Fields and FIDs
In-Reply-To: <201501271847.28692.even.rouault@spatialys.com>
References: <201501231617.33531.even.rouault@spatialys.com>	<54C398FC.7060304@gmail.com>
	<54C7C838.9040103@mapgears.com>
	<201501271847.28692.even.rouault@spatialys.com>
Message-ID: <54C84EC7.8010704@mapgears.com>

Hi Even,

Replies in-line below

On 2015-01-27 12:47 PM, Even Rouault wrote:
>
> Not sure if you saw my answer to Dmitriy as it ended up into a separate thread
> due to dumb email agent. Reposting it inline
>

No, I'm sorry it seems that I had missed it.


> """Dmitriy,
>
> The main reason for the new symbol is that if we change the return type it
> might cause crashing problems that are not detected at compile time if GetFID
> is used in a printf like function. For example
>
> printf("%ld %s", GetFID (), str)
>
> Even
> """
>

This may not be true on all platforms, but at least with GCC, we get 
warnings in a case like this, e.g.


#include <stdio.h>
#include <stdint.h>

int main()
{
   int64_t id=10;

   printf ("%d %s\n", id, "test");
   return 0;
}


$ gcc -Wall ttt.c -o ttt
ttt.c: In function 'main':
ttt.c:8: warning: format '%ld' expects type 'long int', but argument 2 
has type 'int64_t'



> I've taken that approach from Frank's initial draft and that seamed a valid
> concern. That said, if you guys think that changing the return type is better,
> I've no strong mind.
>

I don't feel that strongly about it. I was mostly wondering if there 
would be a way to avoid the *64() suffixes.

>>
>> Also note that in the list of driver upgrades, you could add potential
>> enhancement to the support for MITAB "TAB Seamless Tables" which had a
>> potential FID overflow problem on very large tables with 32 bit ids. The
>> driver would have caught and reported an error in this case, but that
>> limitation can be solved with 64 bit ids if/when the code is upgraded to
>> use them. Look for TABSeamless::EncodeFeatureId() and related methods in
>> mitab_tabseamless.cpp.
>
> OK thanks for the hint, I'll have a look at this. Do you have samples datasets
> that would trigger that issue ?
>

No. I don't think I've ever seen or heard of a seamless table large 
enough to trigger the issue.


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From even.rouault at spatialys.com  Wed Jan 28 00:59:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 09:59:11 +0100
Subject: [gdal-dev] Python3 continuous testing
In-Reply-To: <CACALY+QD+W=dh3Akw7EO_EmxTLM=cUJ+mbG=7zMJUE=Rt-U9Bw@mail.gmail.com>
References: <201501271344.28949.even.rouault@spatialys.com>
	<201501271456.45650.even.rouault@spatialys.com>
	<CACALY+QD+W=dh3Akw7EO_EmxTLM=cUJ+mbG=7zMJUE=Rt-U9Bw@mail.gmail.com>
Message-ID: <201501280959.11832.even.rouault@spatialys.com>

Le mardi 27 janvier 2015 23:18:45, Tamas Szekeres a ?crit :
> Hi Even,
> 
> I get this output from a Python 3.4 build (VS2012):
> 
> 
> E:\builds\Python34\python.exe setup.py build
> running build
> running build_py
> creating build
> creating build\lib.win32-3.4
> copying gdal.py -> build\lib.win32-3.4
> copying ogr.py -> build\lib.win32-3.4
> copying osr.py -> build\lib.win32-3.4
> copying gdalconst.py -> build\lib.win32-3.4
> copying gdalnumeric.py -> build\lib.win32-3.4
> creating build\lib.win32-3.4\osgeo
> copying osgeo\gdal.py -> build\lib.win32-3.4\osgeo
> copying osgeo\gdalconst.py -> build\lib.win32-3.4\osgeo
> copying osgeo\gdalnumeric.py -> build\lib.win32-3.4\osgeo
> copying osgeo\gdal_array.py -> build\lib.win32-3.4\osgeo
> copying osgeo\ogr.py -> build\lib.win32-3.4\osgeo
> copying osgeo\osr.py -> build\lib.win32-3.4\osgeo
> copying osgeo\__init__.py -> build\lib.win32-3.4\osgeo
> Fixing build\lib.win32-3.4\gdal.py build\lib.win32-3.4\ogr.py
> build\lib.win32-3.4\osr.py build\lib.win32-3.4\gdalconst.py
> build\lib.win32-3.4\gdalnumeric.py build\lib.win32-3.4\osgeo\gdal.py
> build\lib.win32-3.4\osgeo\gdalconst.py
> build\lib.win32-3.4\osgeo\gdalnumeric.py
> build\lib.win32-3.4\osgeo\gdal_array.py build\lib.win32-3.4\osgeo\ogr.py
> build\lib.win32-3.4\osgeo\osr.py build\lib.win32-3.4\osgeo\__init__.py
> Skipping implicit fixer: ws_comma
> Fixing build\lib.win32-3.4\gdal.py build\lib.win32-3.4\ogr.py
> build\lib.win32-3.4\osr.py build\lib.win32-3.4\gdalconst.py
> build\lib.win32-3.4\gdalnumeric.py build\lib.win32-3.4\osgeo\gdal.py
> build\lib.win32-3.4\osgeo\gdalconst.py
> build\lib.win32-3.4\osgeo\gdalnumeric.py
> build\lib.win32-3.4\osgeo\gdal_array.py build\lib.win32-3.4\osgeo\ogr.py
> build\lib.win32-3.4\osgeo\osr.py build\lib.win32-3.4\osgeo\__init__.py
> Skipping implicit fixer: ws_comma
> running build_ext
> building 'osgeo._gdal' extension
> creating build\temp.win32-3.4
> creating build\temp.win32-3.4\Release
> creating build\temp.win32-3.4\Release\extensions
> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\cl.exe /c
> /nologo /Ox /MD /W3 /GS- /DNDEBUG -I../../port -I../../gcore -I../../alg
> -I../../ogr/ -IE:\builds\Python34\include -IE:\builds\Python34\include
> -IE:\builds\Python34\lib\site-packages\numpy\core\include
> /Tpextensions/gdal_wrap.cpp
> /Fobuild\temp.win32-3.4\Release\extensions/gdal_wrap.obj
> gdal_wrap.cpp
> extensions/gdal_wrap.cpp(2451) : error C3861: 'PyCObject_Import':
> identifier not found
> extensions/gdal_wrap.cpp(2521) : error C3861: 'PyCObject_FromVoidPtr':
> identifier not found
> extensions/gdal_wrap.cpp(2544) : error C3861: 'PyCObject_AsVoidPtr':
> identifier not found
> extensions/gdal_wrap.cpp(2549) : error C3861: 'PyCObject_FromVoidPtr':
> identifier not found

--> This is SWIG generated code, so perhaps you need to update to a newer SWIG 
that supports Python 3.4 ?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Wed Jan 28 03:36:17 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 28 Jan 2015 12:36:17 +0100
Subject: [gdal-dev] Python3 continuous testing
Message-ID: <CACALY+TJ4scEe9VF_P6iQrseHCT2RjacjLLeiiELzEtd_-FYBQ@mail.gmail.com>

Hi Even,

I'm always confused about the GDAL-python bindings what is the best
approach to use. The SWIG generated output is also included in the
bindings, but as far as I remember it wasn't always up to date. Also the
windows makefile will generate the bindings by default and there's no
option to bypass this step as far as I remember.

On the other hand, I'm not quite sure which one is the suggested SWIG
version to generate the bindings, I also remember the cases when the recent
version wasn't sufficient and we had to use an earlier SWIG version to
compile. Not sure how it depends on the Python version either.

I think we should either remove the SWIG generated output from the
repository or modify the makefiles not to generate the output every time.

Best regards,

Tamas



2015-01-28 9:59 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Le mardi 27 janvier 2015 23:18:45, Tamas Szekeres a ?crit :
> > Hi Even,
> >
> > I get this output from a Python 3.4 build (VS2012):
> >
> >
> > E:\builds\Python34\python.exe setup.py build
> > running build
> > running build_py
> > creating build
> > creating build\lib.win32-3.4
> > copying gdal.py -> build\lib.win32-3.4
> > copying ogr.py -> build\lib.win32-3.4
> > copying osr.py -> build\lib.win32-3.4
> > copying gdalconst.py -> build\lib.win32-3.4
> > copying gdalnumeric.py -> build\lib.win32-3.4
> > creating build\lib.win32-3.4\osgeo
> > copying osgeo\gdal.py -> build\lib.win32-3.4\osgeo
> > copying osgeo\gdalconst.py -> build\lib.win32-3.4\osgeo
> > copying osgeo\gdalnumeric.py -> build\lib.win32-3.4\osgeo
> > copying osgeo\gdal_array.py -> build\lib.win32-3.4\osgeo
> > copying osgeo\ogr.py -> build\lib.win32-3.4\osgeo
> > copying osgeo\osr.py -> build\lib.win32-3.4\osgeo
> > copying osgeo\__init__.py -> build\lib.win32-3.4\osgeo
> > Fixing build\lib.win32-3.4\gdal.py build\lib.win32-3.4\ogr.py
> > build\lib.win32-3.4\osr.py build\lib.win32-3.4\gdalconst.py
> > build\lib.win32-3.4\gdalnumeric.py build\lib.win32-3.4\osgeo\gdal.py
> > build\lib.win32-3.4\osgeo\gdalconst.py
> > build\lib.win32-3.4\osgeo\gdalnumeric.py
> > build\lib.win32-3.4\osgeo\gdal_array.py build\lib.win32-3.4\osgeo\ogr.py
> > build\lib.win32-3.4\osgeo\osr.py build\lib.win32-3.4\osgeo\__init__.py
> > Skipping implicit fixer: ws_comma
> > Fixing build\lib.win32-3.4\gdal.py build\lib.win32-3.4\ogr.py
> > build\lib.win32-3.4\osr.py build\lib.win32-3.4\gdalconst.py
> > build\lib.win32-3.4\gdalnumeric.py build\lib.win32-3.4\osgeo\gdal.py
> > build\lib.win32-3.4\osgeo\gdalconst.py
> > build\lib.win32-3.4\osgeo\gdalnumeric.py
> > build\lib.win32-3.4\osgeo\gdal_array.py build\lib.win32-3.4\osgeo\ogr.py
> > build\lib.win32-3.4\osgeo\osr.py build\lib.win32-3.4\osgeo\__init__.py
> > Skipping implicit fixer: ws_comma
> > running build_ext
> > building 'osgeo._gdal' extension
> > creating build\temp.win32-3.4
> > creating build\temp.win32-3.4\Release
> > creating build\temp.win32-3.4\Release\extensions
> > C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\cl.exe /c
> > /nologo /Ox /MD /W3 /GS- /DNDEBUG -I../../port -I../../gcore -I../../alg
> > -I../../ogr/ -IE:\builds\Python34\include -IE:\builds\Python34\include
> > -IE:\builds\Python34\lib\site-packages\numpy\core\include
> > /Tpextensions/gdal_wrap.cpp
> > /Fobuild\temp.win32-3.4\Release\extensions/gdal_wrap.obj
> > gdal_wrap.cpp
> > extensions/gdal_wrap.cpp(2451) : error C3861: 'PyCObject_Import':
> > identifier not found
> > extensions/gdal_wrap.cpp(2521) : error C3861: 'PyCObject_FromVoidPtr':
> > identifier not found
> > extensions/gdal_wrap.cpp(2544) : error C3861: 'PyCObject_AsVoidPtr':
> > identifier not found
> > extensions/gdal_wrap.cpp(2549) : error C3861: 'PyCObject_FromVoidPtr':
> > identifier not found
>
> --> This is SWIG generated code, so perhaps you need to update to a newer
> SWIG
> that supports Python 3.4 ?
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/9369f21d/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jan 28 03:55:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 12:55:57 +0100
Subject: [gdal-dev] Python3 continuous testing
In-Reply-To: <CACALY+TJ4scEe9VF_P6iQrseHCT2RjacjLLeiiELzEtd_-FYBQ@mail.gmail.com>
References: <CACALY+TJ4scEe9VF_P6iQrseHCT2RjacjLLeiiELzEtd_-FYBQ@mail.gmail.com>
Message-ID: <201501281255.57537.even.rouault@spatialys.com>

Hi Tamas,

> 
> I'm always confused about the GDAL-python bindings what is the best
> approach to use. The SWIG generated output is also included in the
> bindings, but as far as I remember it wasn't always up to date.

As far as I'm concerned, I try to make sure to commit updated generated files 
(for Python). And making sure they are sync'ed with the .i is part of the 
release process when we cut a version.

> Also the
> windows makefile will generate the bindings by default and there's no
> option to bypass this step as far as I remember.
> 
> On the other hand, I'm not quite sure which one is the suggested SWIG
> version to generate the bindings,

Me neither. Your below error seems to suggest that another SWIG version as the 
one you use (2.0.4 apparently) should be used (provided recent SWIG versions 
have caught up with Python 3.4). Perhaps open a ticket if you don't have time 
to investigate on that.

> I also remember the cases when the recent
> version wasn't sufficient and we had to use an earlier SWIG version to
> compile. Not sure how it depends on the Python version either.

I somehow remember an issue (something like one language needed a particular 
SWIG version, but that didn't work with other languages), but I'm not sure if 
it was with Python or another language.

> 
> I think we should either remove the SWIG generated output from the
> repository or modify the makefiles not to generate the output every time.

Sounds reasonable. We've had such discussion in the past and I think the 
outcome was that requiring people to have swig available to build the Python 
bindings could be a pain for them. Beyond the pain, if we indeed need 
particular/very recent swig for Python, then having the generated files can 
make sense.

The Unix makefile has a 'generate' target that generates the bindings with SWIG 
and a 'build' target that compiles generated bindings . Perhaps similar 
approach could be taken for the Windows makefile (I don't anticipate myself 
trying that, so I let you experimenting if you wish)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jan 28 04:01:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 13:01:32 +0100
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
	Fields and FIDs
In-Reply-To: <54C84EC7.8010704@mapgears.com>
References: <201501231617.33531.even.rouault@spatialys.com>
	<201501271847.28692.even.rouault@spatialys.com>
	<54C84EC7.8010704@mapgears.com>
Message-ID: <201501281301.32248.even.rouault@spatialys.com>

Daniel,

> 
> This may not be true on all platforms, but at least with GCC, we get
> warnings in a case like this, e.g.
> 
> 
> #include <stdio.h>
> #include <stdint.h>
> 
> int main()
> {
>    int64_t id=10;
> 
>    printf ("%d %s\n", id, "test");
>    return 0;
> }
> 
> 
> $ gcc -Wall ttt.c -o ttt
> ttt.c: In function 'main':
> ttt.c:8: warning: format '%ld' expects type 'long int', but argument 2
> has type 'int64_t'
> 
> > I've taken that approach from Frank's initial draft and that seamed a
> > valid concern. That said, if you guys think that changing the return
> > type is better, I've no strong mind.
> 
> I don't feel that strongly about it. I was mostly wondering if there
> would be a way to avoid the *64() suffixes.

Yes GCC nicely warns. I don't think MSVC does, but oh well people building on 
Windows are used to self-inflicted pain ;-)

So I've renamed GetFID64() -> GetFID() and GetFeatureCount64() -> GetFeature() 
in latest commit : 
https://github.com/rouault/gdal2/commit/40eb13bb9e2a4c86df9d3cf4d030ab14d67749d5

> 
> >> Also note that in the list of driver upgrades, you could add potential
> >> enhancement to the support for MITAB "TAB Seamless Tables" which had a
> >> potential FID overflow problem on very large tables with 32 bit ids. The
> >> driver would have caught and reported an error in this case, but that
> >> limitation can be solved with 64 bit ids if/when the code is upgraded to
> >> use them. Look for TABSeamless::EncodeFeatureId() and related methods in
> >> mitab_tabseamless.cpp.
> > 

I've made changes in TABSeamless and now builds a 64 bit FID  with the upper 
32bits being for the index table and the lower 32bits for the feature within 
the table.
Looking at the code, I've manually forged a simple seamless table and added it 
in autotest.
https://github.com/rouault/gdal2/commit/a922228eff8d0b07918db520de142154e8454f6a

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jan 28 04:23:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 13:23:13 +0100
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and FIDs
Message-ID: <201501281323.13737.even.rouault@spatialys.com>

Hi,

I think that the points raised in the discussion have been addressed.

Since the call for discussion, I've updated the RFC to reflect the latest 
changes :
- GetFID64()/GetFeatureCount64() removed and replaced by 
GetFID()/GetFeatureCount() whose return type is changed to GIntBig
- MITAB driver updated with change for seamless table FIDs

So:

Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs

http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64

Starting with my +1

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jan 28 04:51:23 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 13:51:23 +0100
Subject: [gdal-dev] BPG driver
Message-ID: <201501281351.23429.even.rouault@spatialys.com>

Hi,

For those interested, I've committed an experimental (*) read-only BPG (Better 
Portable Graphics) driver to read the new image format created by Fabrice 
Bellard based on HEVC : http://bellard.org/bpg/
For same quality as JPEG, images are typically twice smaller. Competitor of 
WebP as well, with apparently slightly better quality.
Rather as dealing with standalone images, it could be interested as a codec in 
TIFF for example to benefit from tiling, overviews, etc. Or a GeoPackage tile 
format extension.

Even

(*) No doc, no makefile support at all (libbpg itself is pretty raw). Look at 
frmts/bpg/bpgdataset.cpp to see how to build it as a plugin on Linux.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Wed Jan 28 05:29:10 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 28 Jan 2015 13:29:10 +0000 (UTC)
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and
	FIDs
References: <201501281323.13737.even.rouault@spatialys.com>
Message-ID: <loom.20150128T142829-65@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

 
> Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs
> 
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
> 
> Starting with my +1

+1

-Jukka-


From jukka.rahkonen at maanmittauslaitos.fi  Wed Jan 28 06:28:06 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 28 Jan 2015 14:28:06 +0000 (UTC)
Subject: [gdal-dev] BPG driver
References: <201501281351.23429.even.rouault@spatialys.com>
Message-ID: <loom.20150128T145557-972@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> For those interested, I've committed an experimental (*) read-only BPG
(Better 
> Portable Graphics) driver to read the new image format created by Fabrice 
> Bellard based on HEVC : http://bellard.org/bpg/
> For same quality as JPEG, images are typically twice smaller. Competitor of 
> WebP as well, with apparently slightly better quality.
> Rather as dealing with standalone images, it could be interested as a
codec in 
> TIFF for example to benefit from tiling, overviews, etc. Or a GeoPackage tile 
> format extension.

Hi,

Extremely interesting for all that you mention. By quick reading I got an
impression that it might be 10 times slower in compression and 2-3 times
slower in decompression compared to some video codec.

I have no idea about how fast it is to use H.264 codec so I planned to make
a quick test with jpeg with my own images by using bpgenc.exe which I found
from http://bellard.org/bpg/bpg-0.9.5-win32.zip. With a 19200x19200 sized
image it just crashes but I could compress a 3455x3954 sized png. I can
confirm that compression is very slow.

My topographic map shrink from 475 kb (.png) into 340 kb (.bpg) which is
pretty good (-30%) because the original image suits very well for png
compression. As a comparison, gdal_translate made a 676 kb jpeg image with
the default settings. Remember that this number does not mean anything
because the original just does not suit for jpeg.

I believe that with GDAL the bpg format would be used with at max. 1024x1024
sized tiles so my tests are probably not worth much value but it feels like
reasonable savings in bandwidth could be achieved at rather high cost in CPU
usage. Users of tile services and offline maps should be interested but
without hardware acceleration bpg could be slow for WMS. However, chips for
hardware HEVC compression are already available so it is only upon someone
writing code and make GDAL to utilize such things. Hardware accelerated
MapServer for fast and small delivery, mmmm, it tastes good.



-Jukka Rahkonen-



From dmorissette at mapgears.com  Wed Jan 28 06:37:30 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 28 Jan 2015 09:37:30 -0500
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and
 FIDs
In-Reply-To: <201501281323.13737.even.rouault@spatialys.com>
References: <201501281323.13737.even.rouault@spatialys.com>
Message-ID: <54C8F42A.6020500@mapgears.com>

On 2015-01-28 7:23 AM, Even Rouault wrote:
>
> Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs
>
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
>

+1. This is a great addition. Thank you very much for your work on this 
Even.

-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From dmorissette at mapgears.com  Wed Jan 28 07:11:55 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 28 Jan 2015 10:11:55 -0500
Subject: [gdal-dev] Call for discusson on RFC 31 - OGR 64bit Integer
 Fields and FIDs
In-Reply-To: <201501281301.32248.even.rouault@spatialys.com>
References: <201501231617.33531.even.rouault@spatialys.com>	<201501271847.28692.even.rouault@spatialys.com>	<54C84EC7.8010704@mapgears.com>
	<201501281301.32248.even.rouault@spatialys.com>
Message-ID: <54C8FC3B.4060806@mapgears.com>

Merci!

Daniel

On 2015-01-28 7:01 AM, Even Rouault wrote:
> Daniel,
>
>>
>> This may not be true on all platforms, but at least with GCC, we get
>> warnings in a case like this, e.g.
>>
>>
>> #include <stdio.h>
>> #include <stdint.h>
>>
>> int main()
>> {
>>     int64_t id=10;
>>
>>     printf ("%d %s\n", id, "test");
>>     return 0;
>> }
>>
>>
>> $ gcc -Wall ttt.c -o ttt
>> ttt.c: In function 'main':
>> ttt.c:8: warning: format '%ld' expects type 'long int', but argument 2
>> has type 'int64_t'
>>
>>> I've taken that approach from Frank's initial draft and that seamed a
>>> valid concern. That said, if you guys think that changing the return
>>> type is better, I've no strong mind.
>>
>> I don't feel that strongly about it. I was mostly wondering if there
>> would be a way to avoid the *64() suffixes.
>
> Yes GCC nicely warns. I don't think MSVC does, but oh well people building on
> Windows are used to self-inflicted pain ;-)
>
> So I've renamed GetFID64() -> GetFID() and GetFeatureCount64() -> GetFeature()
> in latest commit :
> https://github.com/rouault/gdal2/commit/40eb13bb9e2a4c86df9d3cf4d030ab14d67749d5
>
>>
>>>> Also note that in the list of driver upgrades, you could add potential
>>>> enhancement to the support for MITAB "TAB Seamless Tables" which had a
>>>> potential FID overflow problem on very large tables with 32 bit ids. The
>>>> driver would have caught and reported an error in this case, but that
>>>> limitation can be solved with 64 bit ids if/when the code is upgraded to
>>>> use them. Look for TABSeamless::EncodeFeatureId() and related methods in
>>>> mitab_tabseamless.cpp.
>>>
>
> I've made changes in TABSeamless and now builds a 64 bit FID  with the upper
> 32bits being for the index table and the lower 32bits for the feature within
> the table.
> Looking at the code, I've manually forged a simple seamless table and added it
> in autotest.
> https://github.com/rouault/gdal2/commit/a922228eff8d0b07918db520de142154e8454f6a
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From szekerest at gmail.com  Wed Jan 28 08:04:58 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 28 Jan 2015 17:04:58 +0100
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and
	FIDs
In-Reply-To: <201501281323.13737.even.rouault@spatialys.com>
References: <201501281323.13737.even.rouault@spatialys.com>
Message-ID: <CACALY+RF6g0KwbCc72DDqhO+sVv4itE6qiQ-p-_rroELerK1=w@mail.gmail.com>

+1

Tamas

2015-01-28 13:23 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> I think that the points raised in the discussion have been addressed.
>
> Since the call for discussion, I've updated the RFC to reflect the latest
> changes :
> - GetFID64()/GetFeatureCount64() removed and replaced by
> GetFID()/GetFeatureCount() whose return type is changed to GIntBig
> - MITAB driver updated with change for seamless table FIDs
>
> So:
>
> Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs
>
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
>
> Starting with my +1
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/e856b6c1/attachment.html>

From jorge at cartodb.com  Wed Jan 28 09:34:44 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Wed, 28 Jan 2015 18:34:44 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
Message-ID: <54C91DB4.20503@cartodb.com>

Hello,

I've compiled GDAL from trunk, specifying --with-python at configure 
time. I first checked numpy is correctly installed. The problem is I 
couldn't import gdal_array.py by default (got ImportError: no module 
named _gdal_array).

Tried

python gdal_sources/swig/python/setup.py install

Didn't work.

I finally had to define

export PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo

to make it work. And I don't think that's the default solution, right? 
Am I doing something wrong?

Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8

Many thanks in advance,

Best regards

-- 
Jorge Ar?valo

CartoDB
http://cartodb.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/fe631d60/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jan 28 09:44:43 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 18:44:43 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
In-Reply-To: <54C91DB4.20503@cartodb.com>
References: <54C91DB4.20503@cartodb.com>
Message-ID: <201501281844.43521.even.rouault@spatialys.com>

Jorge,

> 
> I've compiled GDAL from trunk, specifying --with-python at configure
> time. I first checked numpy is correctly installed. The problem is I
> couldn't import gdal_array.py by default (got ImportError: no module
> named _gdal_array).
> 
> Tried
> 
> python gdal_sources/swig/python/setup.py install
> 
> Didn't work.

"didn't work", could you be more precise ?
"python setup.py install" requires root rights since it installs in 
/usr/local/lib. There's a ticket&debate if the python bindings should honour 
the --prefix specified at configure time or not. Currently they don't, and it is 
an annoyance for folks. Perhaps we should revert to honour the prefix, but this 
was disabled at some point and nobody remembers why...

> 
> I finally had to define
> 
> export PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
> 
> to make it work. And I don't think that's the default solution, right?

That's what I use since I have many GDAL versions on my machine and must 
switch between them without reinstalling. For regular users not tweaking the 
installation prefix, "sudo make install" should do the right thing however.

> Am I doing something wrong?
> 
> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
> 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Wed Jan 28 09:51:28 2015
From: jorge at cartodb.com (=?UTF-8?B?Sm9yZ2UgQXLDqXZhbG8=?=)
Date: Wed, 28 Jan 2015 18:51:28 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
In-Reply-To: <201501281844.43521.even.rouault@spatialys.com>
References: <54C91DB4.20503@cartodb.com>
	<201501281844.43521.even.rouault@spatialys.com>
Message-ID: <54C921A0.3050001@cartodb.com>

Hi,

> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 6:44 PM
> Jorge,
>
>> I've compiled GDAL from trunk, specifying --with-python at configure
>> time. I first checked numpy is correctly installed. The problem is I
>> couldn't import gdal_array.py by default (got ImportError: no module
>> named _gdal_array).
>>
>> Tried
>>
>> python gdal_sources/swig/python/setup.py install
>>
>> Didn't work.
>
> "didn't work", could you be more precise ?
> "python setup.py install" requires root rights since it installs in
> /usr/local/lib. There's a ticket&debate if the python bindings should honour
> the --prefix specified at configure time or not. Currently they don't, and it is
> an annoyance for folks. Perhaps we should revert to honour the prefix, but this
> was disabled at some point and nobody remembers why...
Yes, I felt the pain of python bindings don't honouring the --prefix 
specified... Good to know there's a debate on this.

Sorry about my vague description. I just did it using sudo, for a system 
installation, and after that, system Python still didn't find the path. 
So, after

sudo python gdal_sources/swig/python/setup.py install

I still get the same error:

ImportError: no module named _gdal_array

>> I finally had to define
>>
>> export PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
>>
>> to make it work. And I don't think that's the default solution, right?
>
> That's what I use since I have many GDAL versions on my machine and must
> switch between them without reinstalling. For regular users not tweaking the
> installation prefix, "sudo make install" should do the right thing however.
Yep, that was what I thought. But still fails after sudo make install. 
The only way I've found to make it work is by exporting PYTHONPATH

Best regards,

Jorge
>> Am I doing something wrong?
>>
>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
>>
>
> Even
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/74944820/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compose-unknown-contact.jpg
Type: image/jpeg
Size: 770 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/74944820/attachment.jpg>

From even.rouault at spatialys.com  Wed Jan 28 09:53:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 18:53:16 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
In-Reply-To: <54C921A0.3050001@cartodb.com>
References: <54C91DB4.20503@cartodb.com>
	<201501281844.43521.even.rouault@spatialys.com>
	<54C921A0.3050001@cartodb.com>
Message-ID: <201501281853.16817.even.rouault@spatialys.com>

Le mercredi 28 janvier 2015 18:51:28, Jorge Ar?valo a ?crit :
> Hi,
> 
> > Even Rouault <mailto:even.rouault at spatialys.com>
> > January 28, 2015 at 6:44 PM
> > Jorge,
> > 
> >> I've compiled GDAL from trunk, specifying --with-python at configure
> >> time. I first checked numpy is correctly installed. The problem is I
> >> couldn't import gdal_array.py by default (got ImportError: no module
> >> named _gdal_array).
> >> 
> >> Tried
> >> 
> >> python gdal_sources/swig/python/setup.py install
> >> 
> >> Didn't work.
> > 
> > "didn't work", could you be more precise ?
> > "python setup.py install" requires root rights since it installs in
> > /usr/local/lib. There's a ticket&debate if the python bindings should
> > honour the --prefix specified at configure time or not. Currently they
> > don't, and it is an annoyance for folks. Perhaps we should revert to
> > honour the prefix, but this was disabled at some point and nobody
> > remembers why...
> 
> Yes, I felt the pain of python bindings don't honouring the --prefix
> specified... Good to know there's a debate on this.
> 
> Sorry about my vague description. I just did it using sudo, for a system
> installation, and after that, system Python still didn't find the path.
> So, after
> 
> sudo python gdal_sources/swig/python/setup.py install
> 
> I still get the same error:
> 
> ImportError: no module named _gdal_array

Are you sure you don't have a python-gdal package hanging somewhere ? (but 
that would be weird it wouldn't have numpy support). Or a custom python-gdal 
bindings installed in another location that is tried before the one where you 
install.

> 
> >> I finally had to define
> >> 
> >> export
> >> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
> >> 
> >> to make it work. And I don't think that's the default solution, right?
> > 
> > That's what I use since I have many GDAL versions on my machine and must
> > switch between them without reinstalling. For regular users not tweaking
> > the installation prefix, "sudo make install" should do the right thing
> > however.
> 
> Yep, that was what I thought. But still fails after sudo make install.
> The only way I've found to make it work is by exporting PYTHONPATH
> 
> Best regards,
> 
> Jorge
> 
> >> Am I doing something wrong?
> >> 
> >> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Wed Jan 28 10:08:18 2015
From: jorge at cartodb.com (=?UTF-8?B?Sm9yZ2UgQXLDqXZhbG8=?=)
Date: Wed, 28 Jan 2015 19:08:18 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
In-Reply-To: <201501281853.16817.even.rouault@spatialys.com>
References: <54C91DB4.20503@cartodb.com>
	<201501281844.43521.even.rouault@spatialys.com>
	<54C921A0.3050001@cartodb.com>
	<201501281853.16817.even.rouault@spatialys.com>
Message-ID: <54C92592.8020402@cartodb.com>



> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 6:53 PM
> Le mercredi 28 janvier 2015 18:51:28, Jorge Ar?valo a ?crit :
>> Hi,
>>
>>> Even Rouault<mailto:even.rouault at spatialys.com>
>>> January 28, 2015 at 6:44 PM
>>> Jorge,
>>>
>>>> I've compiled GDAL from trunk, specifying --with-python at configure
>>>> time. I first checked numpy is correctly installed. The problem is I
>>>> couldn't import gdal_array.py by default (got ImportError: no module
>>>> named _gdal_array).
>>>>
>>>> Tried
>>>>
>>>> python gdal_sources/swig/python/setup.py install
>>>>
>>>> Didn't work.
>>> "didn't work", could you be more precise ?
>>> "python setup.py install" requires root rights since it installs in
>>> /usr/local/lib. There's a ticket&debate if the python bindings should
>>> honour the --prefix specified at configure time or not. Currently they
>>> don't, and it is an annoyance for folks. Perhaps we should revert to
>>> honour the prefix, but this was disabled at some point and nobody
>>> remembers why...
>> Yes, I felt the pain of python bindings don't honouring the --prefix
>> specified... Good to know there's a debate on this.
>>
>> Sorry about my vague description. I just did it using sudo, for a system
>> installation, and after that, system Python still didn't find the path.
>> So, after
>>
>> sudo python gdal_sources/swig/python/setup.py install
>>
>> I still get the same error:
>>
>> ImportError: no module named _gdal_array
>
> Are you sure you don't have a python-gdal package hanging somewhere ? (but
> that would be weird it wouldn't have numpy support). Or a custom python-gdal
> bindings installed in another location that is tried before the one where you
> install.
Yep. Looked for gdal packages:

dpkg-query --show --showformat='${Package;-50}\t${Installed-Size}\n' | 
sort -k 2 -n | grep -v deinstall | awk '{printf "%.3f MB \t %s\n", 
$2/(1024), $1}' | grep gdal

0 found. Just installed GDAL from sources, using this line

./configure --with-python --without-libtool --with-curl=/usr/bin/curl-config

Also looked for any existent gdal_array.py

sudo find / -name gdal_array.py

Just found the one in my sources tree, and the system one at 
/usr/local/lib/python2.7/dist-packages/osgeo/gdal_array.py.

If I print sys.path from Python console, I get:

['', '/home/jorge', '/usr/lib/python2.7', 
'/usr/lib/python2.7/plat-x86_64-linux-gnu', '/usr/lib/python2.7/lib-tk', 
'/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', 
'/usr/local/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages/PILcompat']

So, /usr/local/lib/python2.7/dist-packages is included, but 
/usr/local/lib/python2.7/dist-packages/osgeo doesn't. I tried with

from osgeo import gdal_array

And then, I get ImportError: no module named _gdal
>>>> I finally had to define
>>>>
>>>> export
>>>> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
>>>>
>>>> to make it work. And I don't think that's the default solution, right?
>>> That's what I use since I have many GDAL versions on my machine and must
>>> switch between them without reinstalling. For regular users not tweaking
>>> the installation prefix, "sudo make install" should do the right thing
>>> however.
>> Yep, that was what I thought. But still fails after sudo make install.
>> The only way I've found to make it work is by exporting PYTHONPATH
>>
>> Best regards,
>>
>> Jorge
>>
>>>> Am I doing something wrong?
>>>>
>>>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
>>> Even
>
> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 6:44 PM
> Jorge,
>
>> I've compiled GDAL from trunk, specifying --with-python at configure
>> time. I first checked numpy is correctly installed. The problem is I
>> couldn't import gdal_array.py by default (got ImportError: no module
>> named _gdal_array).
>>
>> Tried
>>
>> python gdal_sources/swig/python/setup.py install
>>
>> Didn't work.
>
> "didn't work", could you be more precise ?
> "python setup.py install" requires root rights since it installs in
> /usr/local/lib. There's a ticket&debate if the python bindings should honour
> the --prefix specified at configure time or not. Currently they don't, and it is
> an annoyance for folks. Perhaps we should revert to honour the prefix, but this
> was disabled at some point and nobody remembers why...
>
>> I finally had to define
>>
>> export PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
>>
>> to make it work. And I don't think that's the default solution, right?
>
> That's what I use since I have many GDAL versions on my machine and must
> switch between them without reinstalling. For regular users not tweaking the
> installation prefix, "sudo make install" should do the right thing however.
>
>> Am I doing something wrong?
>>
>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
>>
>
> Even
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/493dc197/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compose-unknown-contact.jpg
Type: image/jpeg
Size: 770 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/493dc197/attachment-0001.jpg>

From even.rouault at spatialys.com  Wed Jan 28 10:25:02 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 19:25:02 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
In-Reply-To: <54C92592.8020402@cartodb.com>
References: <54C91DB4.20503@cartodb.com>
	<201501281853.16817.even.rouault@spatialys.com>
	<54C92592.8020402@cartodb.com>
Message-ID: <201501281925.02973.even.rouault@spatialys.com>

Le mercredi 28 janvier 2015 19:08:18, Jorge Ar?valo a ?crit :
> > Even Rouault <mailto:even.rouault at spatialys.com>
> > January 28, 2015 at 6:53 PM
> > 
> > Le mercredi 28 janvier 2015 18:51:28, Jorge Ar?valo a ?crit :
> >> Hi,
> >> 
> >>> Even Rouault<mailto:even.rouault at spatialys.com>
> >>> January 28, 2015 at 6:44 PM
> >>> Jorge,
> >>> 
> >>>> I've compiled GDAL from trunk, specifying --with-python at configure
> >>>> time. I first checked numpy is correctly installed. The problem is I
> >>>> couldn't import gdal_array.py by default (got ImportError: no module
> >>>> named _gdal_array).
> >>>> 
> >>>> Tried
> >>>> 
> >>>> python gdal_sources/swig/python/setup.py install
> >>>> 
> >>>> Didn't work.
> >>> 
> >>> "didn't work", could you be more precise ?
> >>> "python setup.py install" requires root rights since it installs in
> >>> /usr/local/lib. There's a ticket&debate if the python bindings should
> >>> honour the --prefix specified at configure time or not. Currently they
> >>> don't, and it is an annoyance for folks. Perhaps we should revert to
> >>> honour the prefix, but this was disabled at some point and nobody
> >>> remembers why...
> >> 
> >> Yes, I felt the pain of python bindings don't honouring the --prefix
> >> specified... Good to know there's a debate on this.
> >> 
> >> Sorry about my vague description. I just did it using sudo, for a system
> >> installation, and after that, system Python still didn't find the path.
> >> So, after
> >> 
> >> sudo python gdal_sources/swig/python/setup.py install
> >> 
> >> I still get the same error:
> >> 
> >> ImportError: no module named _gdal_array
> > 
> > Are you sure you don't have a python-gdal package hanging somewhere ?
> > (but that would be weird it wouldn't have numpy support). Or a custom
> > python-gdal bindings installed in another location that is tried before
> > the one where you install.
> 
> Yep. Looked for gdal packages:
> 
> dpkg-query --show --showformat='${Package;-50}\t${Installed-Size}\n' |
> sort -k 2 -n | grep -v deinstall | awk '{printf "%.3f MB \t %s\n",
> $2/(1024), $1}' | grep gdal
> 
> 0 found. Just installed GDAL from sources, using this line
> 
> ./configure --with-python --without-libtool
> --with-curl=/usr/bin/curl-config
> 
> Also looked for any existent gdal_array.py
> 
> sudo find / -name gdal_array.py
> 
> Just found the one in my sources tree, and the system one at
> /usr/local/lib/python2.7/dist-packages/osgeo/gdal_array.py.
> 
> If I print sys.path from Python console, I get:
> 
> ['', '/home/jorge', '/usr/lib/python2.7',
> '/usr/lib/python2.7/plat-x86_64-linux-gnu', '/usr/lib/python2.7/lib-tk',
> '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
> '/usr/local/lib/python2.7/dist-packages',
> '/usr/lib/python2.7/dist-packages',
> '/usr/lib/python2.7/dist-packages/PILcompat']

Trying the same with python2.6, I have the following in sys.path :
'/usr/local/lib/python2.6/dist-packages/GDAL-2.0.0-py2.6-linux-x86_64.egg'

And

'from osgeo import gdal_array' works without PYTHONPATH defined

What is the output of "python setup.py install" ? Mine for reference :

$ sudo python setup.py install

running install
running bdist_egg
running egg_info
creating GDAL.egg-info
writing GDAL.egg-info/PKG-INFO
writing top-level names to GDAL.egg-info/top_level.txt
writing dependency_links to GDAL.egg-info/dependency_links.txt
writing manifest file 'GDAL.egg-info/SOURCES.txt'
writing manifest file 'GDAL.egg-info/SOURCES.txt'
installing library code to build/bdist.linux-x86_64/egg
running install_lib
running build_py
running build_ext
creating build/bdist.linux-x86_64
creating build/bdist.linux-x86_64/egg
copying build/lib.linux-x86_64-2.6/gdal.py -> build/bdist.linux-x86_64/egg
creating build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/gdal.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/_gdalconst.so -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/__init__.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/__init__.pyc -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/gdalconst.pyc -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/_gdal.so -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/ogr.pyc -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/gdalnumeric.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/_gdal_array.so -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/gdalconst.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/ogr.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/osr.pyc -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/gdal_array.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/gdal.pyc -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/osr.py -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/_ogr.so -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/osgeo/_osr.so -> build/bdist.linux-x86_64/egg/osgeo
copying build/lib.linux-x86_64-2.6/gdalnumeric.py -> build/bdist.linux-x86_64/egg
copying build/lib.linux-x86_64-2.6/gdalconst.py -> build/bdist.linux-x86_64/egg
copying build/lib.linux-x86_64-2.6/ogr.py -> build/bdist.linux-x86_64/egg
copying build/lib.linux-x86_64-2.6/osr.py -> build/bdist.linux-x86_64/egg
byte-compiling build/bdist.linux-x86_64/egg/gdal.py to gdal.pyc
byte-compiling build/bdist.linux-x86_64/egg/osgeo/gdalnumeric.py to gdalnumeric.pyc
byte-compiling build/bdist.linux-x86_64/egg/osgeo/gdal_array.py to gdal_array.pyc
byte-compiling build/bdist.linux-x86_64/egg/gdalnumeric.py to gdalnumeric.pyc
byte-compiling build/bdist.linux-x86_64/egg/gdalconst.py to gdalconst.pyc
byte-compiling build/bdist.linux-x86_64/egg/ogr.py to ogr.pyc
byte-compiling build/bdist.linux-x86_64/egg/osr.py to osr.pyc
creating stub loader for osgeo/_gdal.so
creating stub loader for osgeo/_gdalconst.so
creating stub loader for osgeo/_osr.so
creating stub loader for osgeo/_ogr.so
creating stub loader for osgeo/_gdal_array.so
byte-compiling build/bdist.linux-x86_64/egg/osgeo/_gdal.py to _gdal.pyc
byte-compiling build/bdist.linux-x86_64/egg/osgeo/_gdalconst.py to _gdalconst.pyc
byte-compiling build/bdist.linux-x86_64/egg/osgeo/_osr.py to _osr.pyc
byte-compiling build/bdist.linux-x86_64/egg/osgeo/_ogr.py to _ogr.pyc
byte-compiling build/bdist.linux-x86_64/egg/osgeo/_gdal_array.py to _gdal_array.pyc
creating build/bdist.linux-x86_64/egg/EGG-INFO
copying GDAL.egg-info/PKG-INFO -> build/bdist.linux-x86_64/egg/EGG-INFO
copying GDAL.egg-info/SOURCES.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying GDAL.egg-info/dependency_links.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
copying GDAL.egg-info/not-zip-safe -> build/bdist.linux-x86_64/egg/EGG-INFO
copying GDAL.egg-info/top_level.txt -> build/bdist.linux-x86_64/egg/EGG-INFO
writing build/bdist.linux-x86_64/egg/EGG-INFO/native_libs.txt
creating dist
creating 'dist/GDAL-2.0.0-py2.6-linux-x86_64.egg' and adding 'build/bdist.linux-x86_64/egg' to it
removing 'build/bdist.linux-x86_64/egg' (and everything under it)
Processing GDAL-2.0.0-py2.6-linux-x86_64.egg
creating /usr/local/lib/python2.6/dist-packages/GDAL-2.0.0-py2.6-linux-x86_64.egg
Extracting GDAL-2.0.0-py2.6-linux-x86_64.egg to /usr/local/lib/python2.6/dist-packages
Adding GDAL 2.0.0 to easy-install.pth file

Installed /usr/local/lib/python2.6/dist-packages/GDAL-2.0.0-py2.6-linux-x86_64.egg
Processing dependencies for GDAL==2.0.0
Finished processing dependencies for GDAL==2.0.0


> 
> So, /usr/local/lib/python2.7/dist-packages is included, but
> /usr/local/lib/python2.7/dist-packages/osgeo doesn't. I tried with
> 
> from osgeo import gdal_array
> 
> And then, I get ImportError: no module named _gdal
> 
> >>>> I finally had to define
> >>>> 
> >>>> export
> >>>> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo

Should rather be PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/dist-packages (without the final osgeo) actually

> >>>> 
> >>>> to make it work. And I don't think that's the default solution, right?
> >>> 
> >>> That's what I use since I have many GDAL versions on my machine and
> >>> must switch between them without reinstalling. For regular users not
> >>> tweaking the installation prefix, "sudo make install" should do the
> >>> right thing however.
> >> 
> >> Yep, that was what I thought. But still fails after sudo make install.
> >> The only way I've found to make it work is by exporting PYTHONPATH
> >> 
> >> Best regards,
> >> 
> >> Jorge
> >> 
> >>>> Am I doing something wrong?
> >>>> 
> >>>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
> >>> 
> >>> Even
> > 
> > Even Rouault <mailto:even.rouault at spatialys.com>
> > January 28, 2015 at 6:44 PM
> > Jorge,
> > 
> >> I've compiled GDAL from trunk, specifying --with-python at configure
> >> time. I first checked numpy is correctly installed. The problem is I
> >> couldn't import gdal_array.py by default (got ImportError: no module
> >> named _gdal_array).
> >> 
> >> Tried
> >> 
> >> python gdal_sources/swig/python/setup.py install
> >> 
> >> Didn't work.
> > 
> > "didn't work", could you be more precise ?
> > "python setup.py install" requires root rights since it installs in
> > /usr/local/lib. There's a ticket&debate if the python bindings should
> > honour the --prefix specified at configure time or not. Currently they
> > don't, and it is an annoyance for folks. Perhaps we should revert to
> > honour the prefix, but this was disabled at some point and nobody
> > remembers why...
> > 
> >> I finally had to define
> >> 
> >> export
> >> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
> >> 
> >> to make it work. And I don't think that's the default solution, right?
> > 
> > That's what I use since I have many GDAL versions on my machine and must
> > switch between them without reinstalling. For regular users not tweaking
> > the installation prefix, "sudo make install" should do the right thing
> > however.
> > 
> >> Am I doing something wrong?
> >> 
> >> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Wed Jan 28 10:36:04 2015
From: jorge at cartodb.com (=?UTF-8?B?Sm9yZ2UgQXLDqXZhbG8=?=)
Date: Wed, 28 Jan 2015 19:36:04 +0100
Subject: [gdal-dev] Python installation can't find gdal_array.py
In-Reply-To: <201501281925.02973.even.rouault@spatialys.com>
References: <54C91DB4.20503@cartodb.com>
	<201501281853.16817.even.rouault@spatialys.com>
	<54C92592.8020402@cartodb.com>
	<201501281925.02973.even.rouault@spatialys.com>
Message-ID: <54C92C14.50105@cartodb.com>



> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 7:25 PM
> Le mercredi 28 janvier 2015 19:08:18, Jorge Ar?valo a ?crit :
>>> Even Rouault<mailto:even.rouault at spatialys.com>
>>> January 28, 2015 at 6:53 PM
>>>
>>> Le mercredi 28 janvier 2015 18:51:28, Jorge Ar?valo a ?crit :
>>>> Hi,
>>>>
>>>>> Even Rouault<mailto:even.rouault at spatialys.com>
>>>>> January 28, 2015 at 6:44 PM
>>>>> Jorge,
>>>>>
>>>>>> I've compiled GDAL from trunk, specifying --with-python at configure
>>>>>> time. I first checked numpy is correctly installed. The problem is I
>>>>>> couldn't import gdal_array.py by default (got ImportError: no module
>>>>>> named _gdal_array).
>>>>>>
>>>>>> Tried
>>>>>>
>>>>>> python gdal_sources/swig/python/setup.py install
>>>>>>
>>>>>> Didn't work.
>>>>> "didn't work", could you be more precise ?
>>>>> "python setup.py install" requires root rights since it installs in
>>>>> /usr/local/lib. There's a ticket&debate if the python bindings should
>>>>> honour the --prefix specified at configure time or not. Currently they
>>>>> don't, and it is an annoyance for folks. Perhaps we should revert to
>>>>> honour the prefix, but this was disabled at some point and nobody
>>>>> remembers why...
>>>> Yes, I felt the pain of python bindings don't honouring the --prefix
>>>> specified... Good to know there's a debate on this.
>>>>
>>>> Sorry about my vague description. I just did it using sudo, for a system
>>>> installation, and after that, system Python still didn't find the path.
>>>> So, after
>>>>
>>>> sudo python gdal_sources/swig/python/setup.py install
>>>>
>>>> I still get the same error:
>>>>
>>>> ImportError: no module named _gdal_array
>>> Are you sure you don't have a python-gdal package hanging somewhere ?
>>> (but that would be weird it wouldn't have numpy support). Or a custom
>>> python-gdal bindings installed in another location that is tried before
>>> the one where you install.
>> Yep. Looked for gdal packages:
>>
>> dpkg-query --show --showformat='${Package;-50}\t${Installed-Size}\n' |
>> sort -k 2 -n | grep -v deinstall | awk '{printf "%.3f MB \t %s\n",
>> $2/(1024), $1}' | grep gdal
>>
>> 0 found. Just installed GDAL from sources, using this line
>>
>> ./configure --with-python --without-libtool
>> --with-curl=/usr/bin/curl-config
>>
>> Also looked for any existent gdal_array.py
>>
>> sudo find / -name gdal_array.py
>>
>> Just found the one in my sources tree, and the system one at
>> /usr/local/lib/python2.7/dist-packages/osgeo/gdal_array.py.
>>
>> If I print sys.path from Python console, I get:
>>
>> ['', '/home/jorge', '/usr/lib/python2.7',
>> '/usr/lib/python2.7/plat-x86_64-linux-gnu', '/usr/lib/python2.7/lib-tk',
>> '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
>> '/usr/local/lib/python2.7/dist-packages',
>> '/usr/lib/python2.7/dist-packages',
>> '/usr/lib/python2.7/dist-packages/PILcompat']
>
> Trying the same with python2.6, I have the following in sys.path :
> '/usr/local/lib/python2.6/dist-packages/GDAL-2.0.0-py2.6-linux-x86_64.egg'
>
> And
>
> 'from osgeo import gdal_array' works without PYTHONPATH defined
>
> What is the output of "python setup.py install" ? Mine for reference :
>
> $ sudo python setup.py install
>
> running install
> running bdist_egg
> running egg_info
> creating GDAL.egg-info
> writing GDAL.egg-info/PKG-INFO
> writing top-level names to GDAL.egg-info/top_level.txt
> writing dependency_links to GDAL.egg-info/dependency_links.txt
> writing manifest file 'GDAL.egg-info/SOURCES.txt'
> writing manifest file 'GDAL.egg-info/SOURCES.txt'
> installing library code to build/bdist.linux-x86_64/egg
> running install_lib
> running build_py
> running build_ext
> creating build/bdist.linux-x86_64
> creating build/bdist.linux-x86_64/egg
> copying build/lib.linux-x86_64-2.6/gdal.py ->  build/bdist.linux-x86_64/egg
> creating build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/gdal.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/_gdalconst.so ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/__init__.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/__init__.pyc ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/gdalconst.pyc ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/_gdal.so ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/ogr.pyc ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/gdalnumeric.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/_gdal_array.so ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/gdalconst.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/ogr.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/osr.pyc ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/gdal_array.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/gdal.pyc ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/osr.py ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/_ogr.so ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/osgeo/_osr.so ->  build/bdist.linux-x86_64/egg/osgeo
> copying build/lib.linux-x86_64-2.6/gdalnumeric.py ->  build/bdist.linux-x86_64/egg
> copying build/lib.linux-x86_64-2.6/gdalconst.py ->  build/bdist.linux-x86_64/egg
> copying build/lib.linux-x86_64-2.6/ogr.py ->  build/bdist.linux-x86_64/egg
> copying build/lib.linux-x86_64-2.6/osr.py ->  build/bdist.linux-x86_64/egg
> byte-compiling build/bdist.linux-x86_64/egg/gdal.py to gdal.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/gdalnumeric.py to gdalnumeric.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/gdal_array.py to gdal_array.pyc
> byte-compiling build/bdist.linux-x86_64/egg/gdalnumeric.py to gdalnumeric.pyc
> byte-compiling build/bdist.linux-x86_64/egg/gdalconst.py to gdalconst.pyc
> byte-compiling build/bdist.linux-x86_64/egg/ogr.py to ogr.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osr.py to osr.pyc
> creating stub loader for osgeo/_gdal.so
> creating stub loader for osgeo/_gdalconst.so
> creating stub loader for osgeo/_osr.so
> creating stub loader for osgeo/_ogr.so
> creating stub loader for osgeo/_gdal_array.so
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/_gdal.py to _gdal.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/_gdalconst.py to _gdalconst.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/_osr.py to _osr.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/_ogr.py to _ogr.pyc
> byte-compiling build/bdist.linux-x86_64/egg/osgeo/_gdal_array.py to _gdal_array.pyc
> creating build/bdist.linux-x86_64/egg/EGG-INFO
> copying GDAL.egg-info/PKG-INFO ->  build/bdist.linux-x86_64/egg/EGG-INFO
> copying GDAL.egg-info/SOURCES.txt ->  build/bdist.linux-x86_64/egg/EGG-INFO
> copying GDAL.egg-info/dependency_links.txt ->  build/bdist.linux-x86_64/egg/EGG-INFO
> copying GDAL.egg-info/not-zip-safe ->  build/bdist.linux-x86_64/egg/EGG-INFO
> copying GDAL.egg-info/top_level.txt ->  build/bdist.linux-x86_64/egg/EGG-INFO
> writing build/bdist.linux-x86_64/egg/EGG-INFO/native_libs.txt
> creating dist
> creating 'dist/GDAL-2.0.0-py2.6-linux-x86_64.egg' and adding 'build/bdist.linux-x86_64/egg' to it
> removing 'build/bdist.linux-x86_64/egg' (and everything under it)
> Processing GDAL-2.0.0-py2.6-linux-x86_64.egg
> creating /usr/local/lib/python2.6/dist-packages/GDAL-2.0.0-py2.6-linux-x86_64.egg
> Extracting GDAL-2.0.0-py2.6-linux-x86_64.egg to /usr/local/lib/python2.6/dist-packages
> Adding GDAL 2.0.0 to easy-install.pth file
>
> Installed /usr/local/lib/python2.6/dist-packages/GDAL-2.0.0-py2.6-linux-x86_64.egg
> Processing dependencies for GDAL==2.0.0
> Finished processing dependencies for GDAL==2.0.0
>
Mine is much shorter

running install
running build
running build_py
running build_ext
running install_lib
running install_egg_info
Removing /usr/local/lib/python2.7/dist-packages/GDAL-2.0.0.egg-info
Writing /usr/local/lib/python2.7/dist-packages/GDAL-2.0.0.egg-info



>> So, /usr/local/lib/python2.7/dist-packages is included, but
>> /usr/local/lib/python2.7/dist-packages/osgeo doesn't. I tried with
>>
>> from osgeo import gdal_array
>>
>> And then, I get ImportError: no module named _gdal
>>
>>>>>> I finally had to define
>>>>>>
>>>>>> export
>>>>>> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
>
> Should rather be PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/dist-packages (without the final osgeo) actually

Actually, that path is already included

['', '/home/jorge', '/usr/lib/python2.7', 
'/usr/lib/python2.7/plat-x86_64-linux-gnu', '/usr/lib/python2.7/lib-tk', 
'/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', 
'/usr/local/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages/PILcompat']

So, if I try something like

from osgeo import gdal

it works. But running gdal_merge.py, for example, I get the mentioned error

   File "/usr/local/bin/gdal_merge.py", line 513, in <module>
     sys.exit(main())
   File "/usr/local/bin/gdal_merge.py", line 499, in main
     fi.copy_into( t_fh, band, band, nodata )
   File "/usr/local/bin/gdal_merge.py", line 243, in copy_into
     nodata_arg )
   File "/usr/local/bin/gdal_merge.py", line 63, in raster_copy
     nodata )
   File "/usr/local/bin/gdal_merge.py", line 99, in raster_copy_with_nodata
     t_xsize, t_ysize )
   File "/usr/local/lib/python2.7/dist-packages/osgeo/gdal.py", line 
1331, in ReadAsArray
     import gdalnumeric
   File "/usr/local/lib/python2.7/dist-packages/osgeo/gdalnumeric.py", 
line 1, in <module>
     from gdal_array import *
   File "/usr/local/lib/python2.7/dist-packages/osgeo/gdal_array.py", 
line 25, in <module>
     _gdal_array = swig_import_helper()
   File "/usr/local/lib/python2.7/dist-packages/osgeo/gdal_array.py", 
line 17, in swig_import_helper
     import _gdal_array
ImportError: No module named _gdal_array

Opening gdal_merge.py, I see the imports are doing in the right way:

try:
     from osgeo import gdal
except ImportError:
     import gdal

I'd understand if an old version of the script still does

import gdal

which is deprecated way to import gdal bindings (right?). But the script 
is also from trunk. The last version.



>
>>>>>> to make it work. And I don't think that's the default solution, right?
>>>>> That's what I use since I have many GDAL versions on my machine and
>>>>> must switch between them without reinstalling. For regular users not
>>>>> tweaking the installation prefix, "sudo make install" should do the
>>>>> right thing however.
>>>> Yep, that was what I thought. But still fails after sudo make install.
>>>> The only way I've found to make it work is by exporting PYTHONPATH
>>>>
>>>> Best regards,
>>>>
>>>> Jorge
>>>>
>>>>>> Am I doing something wrong?
>>>>>>
>>>>>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
>>>>> Even
>>> Even Rouault<mailto:even.rouault at spatialys.com>
>>> January 28, 2015 at 6:44 PM
>>> Jorge,
>>>
>>>> I've compiled GDAL from trunk, specifying --with-python at configure
>>>> time. I first checked numpy is correctly installed. The problem is I
>>>> couldn't import gdal_array.py by default (got ImportError: no module
>>>> named _gdal_array).
>>>>
>>>> Tried
>>>>
>>>> python gdal_sources/swig/python/setup.py install
>>>>
>>>> Didn't work.
>>> "didn't work", could you be more precise ?
>>> "python setup.py install" requires root rights since it installs in
>>> /usr/local/lib. There's a ticket&debate if the python bindings should
>>> honour the --prefix specified at configure time or not. Currently they
>>> don't, and it is an annoyance for folks. Perhaps we should revert to
>>> honour the prefix, but this was disabled at some point and nobody
>>> remembers why...
>>>
>>>> I finally had to define
>>>>
>>>> export
>>>> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
>>>>
>>>> to make it work. And I don't think that's the default solution, right?
>>> That's what I use since I have many GDAL versions on my machine and must
>>> switch between them without reinstalling. For regular users not tweaking
>>> the installation prefix, "sudo make install" should do the right thing
>>> however.
>>>
>>>> Am I doing something wrong?
>>>>
>>>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
>>> Even
>
> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 6:53 PM
> Le mercredi 28 janvier 2015 18:51:28, Jorge Ar?valo a ?crit :
>> Hi,
>>
>>> Even Rouault<mailto:even.rouault at spatialys.com>
>>> January 28, 2015 at 6:44 PM
>>> Jorge,
>>>
>>>> I've compiled GDAL from trunk, specifying --with-python at configure
>>>> time. I first checked numpy is correctly installed. The problem is I
>>>> couldn't import gdal_array.py by default (got ImportError: no module
>>>> named _gdal_array).
>>>>
>>>> Tried
>>>>
>>>> python gdal_sources/swig/python/setup.py install
>>>>
>>>> Didn't work.
>>> "didn't work", could you be more precise ?
>>> "python setup.py install" requires root rights since it installs in
>>> /usr/local/lib. There's a ticket&debate if the python bindings should
>>> honour the --prefix specified at configure time or not. Currently they
>>> don't, and it is an annoyance for folks. Perhaps we should revert to
>>> honour the prefix, but this was disabled at some point and nobody
>>> remembers why...
>> Yes, I felt the pain of python bindings don't honouring the --prefix
>> specified... Good to know there's a debate on this.
>>
>> Sorry about my vague description. I just did it using sudo, for a system
>> installation, and after that, system Python still didn't find the path.
>> So, after
>>
>> sudo python gdal_sources/swig/python/setup.py install
>>
>> I still get the same error:
>>
>> ImportError: no module named _gdal_array
>
> Are you sure you don't have a python-gdal package hanging somewhere ? (but
> that would be weird it wouldn't have numpy support). Or a custom python-gdal
> bindings installed in another location that is tried before the one where you
> install.
>
>>>> I finally had to define
>>>>
>>>> export
>>>> PYTHONPATH=$PYTHONPATH:$/usr/local/lib/python2.7/dist-packages/osgeo
>>>>
>>>> to make it work. And I don't think that's the default solution, right?
>>> That's what I use since I have many GDAL versions on my machine and must
>>> switch between them without reinstalling. For regular users not tweaking
>>> the installation prefix, "sudo make install" should do the right thing
>>> however.
>> Yep, that was what I thought. But still fails after sudo make install.
>> The only way I've found to make it work is by exporting PYTHONPATH
>>
>> Best regards,
>>
>> Jorge
>>
>>>> Am I doing something wrong?
>>>>
>>>> Environment: Ubuntu 14.10, GDAL from trunk, Python 2.7.8
>>> Even
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/033b1002/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compose-unknown-contact.jpg
Type: image/jpeg
Size: 770 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/033b1002/attachment-0001.jpg>

From jorge at cartodb.com  Wed Jan 28 11:17:08 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Wed, 28 Jan 2015 20:17:08 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
Message-ID: <54C935B4.9060100@cartodb.com>

Hi,

I'm working with a patched version of gdal2tiles, which makes use of 
parallelization: 
http://gis.stackexchange.com/questions/7743/performance-of-google-map-tile-creation-processes/74446#74446

I want to create a complete TMS cache from raster imagery. No 
assumptions about SRS of data type for input data.

I want the tiling process to be as fast as possible (gdal2tiles is 
really heavy process), do you have any recomendations about the data or 
the parameters used?

Right now, I'm doing this

Step 1: build vrt from input images

gdal_vrtmerge.py -o merged.vrt <list of input tif files>

Step 2: build tiles from vrt file

gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir

Even with parallelization, process still feels really slow. Would it be 
faster if, for example, I convert all my input files to epsg:3857? Or if 
I scale them to 8-bit? Or if I use near resampling method instead of 
cubic? (I'm using cubic because I'm working with continuous data: 
satellite images, am I doing it right?).

Any other tips?

Many thanks in advance

Best regards


-- 
Jorge Ar?valo

CartoDB
http://cartodb.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/458d560e/attachment.html>

From even.rouault at spatialys.com  Wed Jan 28 12:28:46 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Jan 2015 21:28:46 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
In-Reply-To: <54C935B4.9060100@cartodb.com>
References: <54C935B4.9060100@cartodb.com>
Message-ID: <201501282128.46180.even.rouault@spatialys.com>

Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
> Hi,
> 
> I'm working with a patched version of gdal2tiles, which makes use of
> parallelization:
> http://gis.stackexchange.com/questions/7743/performance-of-google-map-tile-
> creation-processes/74446#74446
> 
> I want to create a complete TMS cache from raster imagery. No
> assumptions about SRS of data type for input data.
> 
> I want the tiling process to be as fast as possible (gdal2tiles is
> really heavy process), do you have any recomendations about the data or
> the parameters used?
> 
> Right now, I'm doing this
> 
> Step 1: build vrt from input images
> 
> gdal_vrtmerge.py -o merged.vrt <list of input tif files>
> 
> Step 2: build tiles from vrt file
> 
> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
> 
> Even with parallelization, process still feels really slow. Would it be
> faster if, for example, I convert all my input files to epsg:3857? Or if
> I scale them to 8-bit? Or if I use near resampling method instead of
> cubic? (I'm using cubic because I'm working with continuous data:
> satellite images, am I doing it right?).

From a quick look at the source, it seems that there's an optimization if the 
input SRS == output SRS that avoids going through the warped VRT path.

That said, we definitely need one or several maintainers for gdal2tiles. There 
are quite a faw patches floating around in Trac that would need someone to 
review, test, fix, apply them, as well as writing tests (no autotest for 
gdal2tiles yet), etc...

> 
> Any other tips?
> 
> Many thanks in advance
> 
> Best regards

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From awood at agi.com  Wed Jan 28 12:53:12 2015
From: awood at agi.com (Wood, Alexander)
Date: Wed, 28 Jan 2015 20:53:12 +0000
Subject: [gdal-dev] gdalwarp and geogrids
Message-ID: <BY2PR07MB842DC695481567608595D1DA8330@BY2PR07MB842.namprd07.prod.outlook.com>

Hello,

Hello devlist,
I have small patch of alaska elevation data  in utm4/navd88 and I would like to convert this into wgs84 ellipsoidal.  I know this data uses navd88,but gdalinfo does not report this vertical datum in the WKT.  To reproject this data into wgs84 ellipsoidal elevation, I'm assuming it should be possible with the following gdalwarp command:

gdalwarp -s_srs "+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs +geoidgrids=g2009alaska.gtx" -t_srs "+proj=longlat +datum=WGS84 +units=m +no_def" alaska_sample_utm4_navd88.tif alaska_sample_wgs84.tif

I'm seeing the following errors reported from this command:
ERROR 1: point not within available datum shift grids
ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because the pfnTransformer failed.
Warning 1: Unable to compute source region for output window 0,0,351,106, skipping.

I'm using the geoidgrids from http://trac.osgeo.org/proj/wiki/VerticalDatums, moved into the gdal/projlib directory

The source file is in utm4:
PROJ.4 string is:
'+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs '
Origin = (412011.848695503660000,7085064.815277445100000)

For reference, this is about 100msurrounding the following lat/long:
Center      (-160.7909106,  63.8815138) (160d47'27.28"W, 63d52'53.45"N)

A simple gdalinfo on g2009alaska.gtx reports the following:
PROJ.4 string is:
'+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs '
Origin = (171.991666666666670,72.008333333333340)
Pixel Size = (0.016666666666667,-0.016666666666667)
Corner Coordinates:
Upper Left  ( 171.9916667,  72.0083333) (171d59'30.00"E, 72d 0'30.00"N)
Lower Left  ( 171.9916667,  48.9916667) (171d59'30.00"E, 48d59'30.00"N)
Upper Right (     234.008,      72.008) (234d 0'30.00"E, 72d 0'30.00"N)
Lower Right (     234.008,      48.992) (234d 0'30.00"E, 48d59'30.00"N)
Center      (     203.000,      60.500) (203d 0' 0.00"E, 60d30' 0.00"N)

Does anyone see anything wrong with my gdalwarp/proj4 usage?  Are there better ways to handle these sorts of transformations?

Thanks,
Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/3196cfd0/attachment.html>

From jorge at cartodb.com  Wed Jan 28 15:05:32 2015
From: jorge at cartodb.com (=?UTF-8?B?Sm9yZ2UgQXLDqXZhbG8=?=)
Date: Thu, 29 Jan 2015 00:05:32 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
In-Reply-To: <201501282128.46180.even.rouault@spatialys.com>
References: <54C935B4.9060100@cartodb.com>
	<201501282128.46180.even.rouault@spatialys.com>
Message-ID: <54C96B3C.7040109@cartodb.com>



> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 9:28 PM
> Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
>> Hi,
>>
>> I'm working with a patched version of gdal2tiles, which makes use of
>> parallelization:
>> http://gis.stackexchange.com/questions/7743/performance-of-google-map-tile-
>> creation-processes/74446#74446
>>
>> I want to create a complete TMS cache from raster imagery. No
>> assumptions about SRS of data type for input data.
>>
>> I want the tiling process to be as fast as possible (gdal2tiles is
>> really heavy process), do you have any recomendations about the data or
>> the parameters used?
>>
>> Right now, I'm doing this
>>
>> Step 1: build vrt from input images
>>
>> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
>>
>> Step 2: build tiles from vrt file
>>
>> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
>>
>> Even with parallelization, process still feels really slow. Would it be
>> faster if, for example, I convert all my input files to epsg:3857? Or if
>> I scale them to 8-bit? Or if I use near resampling method instead of
>> cubic? (I'm using cubic because I'm working with continuous data:
>> satellite images, am I doing it right?).
>
>  From a quick look at the source, it seems that there's an optimization if the
> input SRS == output SRS that avoids going through the warped VRT path.
>
> That said, we definitely need one or several maintainers for gdal2tiles. There
> are quite a faw patches floating around in Trac that would need someone to
> review, test, fix, apply them, as well as writing tests (no autotest for
> gdal2tiles yet), etc...

Ok. But the applications is taking hours to generate a complete tile 
cache (zoom levels 0-19) for a 3MB tiff file, in epsg:3857. A 4 cores 
machine with 8GB of RAM. The file is this one

https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina-3857.tif

Taking so much time for a 3MB file sounds ridiculous. I'm probably doing 
something wrong. This is the line

gdal2tiles.py  -s epsg:3857 -z 0-19 -r cubic katrina-3857.tif tiles_dir

Do you see something wrong in this approach?

Anyway, if this is a problem of gdal2tiles and it needs fine tunning or 
maintenance, we could talk. I don't know if there's any other method to 
generate a complete TMS cache using GDAL.
>
>> Any other tips?
>>
>> Many thanks in advance
>>
>> Best regards
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150129/aba5bc28/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compose-unknown-contact.jpg
Type: image/jpeg
Size: 770 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150129/aba5bc28/attachment.jpg>

From even.rouault at spatialys.com  Wed Jan 28 15:27:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Jan 2015 00:27:36 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
In-Reply-To: <54C96B3C.7040109@cartodb.com>
References: <54C935B4.9060100@cartodb.com>
	<201501282128.46180.even.rouault@spatialys.com>
	<54C96B3C.7040109@cartodb.com>
Message-ID: <201501290027.37537.even.rouault@spatialys.com>

Le jeudi 29 janvier 2015 00:05:32, Jorge Ar?valo a ?crit :
> > Even Rouault <mailto:even.rouault at spatialys.com>
> > January 28, 2015 at 9:28 PM
> > 
> > Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
> >> Hi,
> >> 
> >> I'm working with a patched version of gdal2tiles, which makes use of
> >> parallelization:
> >> http://gis.stackexchange.com/questions/7743/performance-of-google-map-ti
> >> le- creation-processes/74446#74446
> >> 
> >> I want to create a complete TMS cache from raster imagery. No
> >> assumptions about SRS of data type for input data.
> >> 
> >> I want the tiling process to be as fast as possible (gdal2tiles is
> >> really heavy process), do you have any recomendations about the data or
> >> the parameters used?
> >> 
> >> Right now, I'm doing this
> >> 
> >> Step 1: build vrt from input images
> >> 
> >> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
> >> 
> >> Step 2: build tiles from vrt file
> >> 
> >> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
> >> 
> >> Even with parallelization, process still feels really slow. Would it be
> >> faster if, for example, I convert all my input files to epsg:3857? Or if
> >> I scale them to 8-bit? Or if I use near resampling method instead of
> >> cubic? (I'm using cubic because I'm working with continuous data:
> >> satellite images, am I doing it right?).
> >> 
> >  From a quick look at the source, it seems that there's an optimization
> >  if the
> > 
> > input SRS == output SRS that avoids going through the warped VRT path.
> > 
> > That said, we definitely need one or several maintainers for gdal2tiles.
> > There are quite a faw patches floating around in Trac that would need
> > someone to review, test, fix, apply them, as well as writing tests (no
> > autotest for gdal2tiles yet), etc...
> 
> Ok. But the applications is taking hours to generate a complete tile
> cache (zoom levels 0-19) for a 3MB tiff file, in epsg:3857. A 4 cores
> machine with 8GB of RAM. The file is this one
> 
> https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina-3857.tif
> 
> Taking so much time for a 3MB file sounds ridiculous. I'm probably doing
> something wrong. This is the line
> 
> gdal2tiles.py  -s epsg:3857 -z 0-19 -r cubic katrina-3857.tif tiles_dir
> 
> Do you see something wrong in this approach?

The performance seems to be deeply impacted by "-r cubic", but even without 
it, it still sucks. The reason is the zoom level 19. Your dataset has a 
resolution of 3469 m. zoom 19 corresponds to a resolution of ~ 0.3 m. So you 
basically try to generate a TMS that is rougly 12000 x 12000 larger than your 
source dataset...

> 
> Anyway, if this is a problem of gdal2tiles and it needs fine tunning or
> maintenance, we could talk. I don't know if there's any other method to
> generate a complete TMS cache using GDAL.
> 
> >> Any other tips?
> >> 
> >> Many thanks in advance
> >> 
> >> Best regards

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jan 28 15:33:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Jan 2015 00:33:48 +0100
Subject: [gdal-dev] gdalwarp and geogrids
In-Reply-To: <BY2PR07MB842DC695481567608595D1DA8330@BY2PR07MB842.namprd07.prod.outlook.com>
References: <BY2PR07MB842DC695481567608595D1DA8330@BY2PR07MB842.namprd07.prod.outlook.com>
Message-ID: <201501290033.48529.even.rouault@spatialys.com>

Le mercredi 28 janvier 2015 21:53:12, Wood, Alexander a ?crit :
> Hello,
> 
> Hello devlist,
> I have small patch of alaska elevation data  in utm4/navd88 and I would
> like to convert this into wgs84 ellipsoidal.  I know this data uses
> navd88,but gdalinfo does not report this vertical datum in the WKT.  To
> reproject this data into wgs84 ellipsoidal elevation, I'm assuming it
> should be possible with the following gdalwarp command:
> 
> gdalwarp -s_srs "+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs
> +geoidgrids=g2009alaska.gtx" -t_srs "+proj=longlat +datum=WGS84 +units=m
> +no_def" alaska_sample_utm4_navd88.tif alaska_sample_wgs84.tif
> 
> I'm seeing the following errors reported from this command:
> ERROR 1: point not within available datum shift grids
> ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because the
> pfnTransformer failed. Warning 1: Unable to compute source region for
> output window 0,0,351,106, skipping.
> 
> I'm using the geoidgrids from
> http://trac.osgeo.org/proj/wiki/VerticalDatums, moved into the
> gdal/projlib directory
> 
> The source file is in utm4:
> PROJ.4 string is:
> '+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs '
> Origin = (412011.848695503660000,7085064.815277445100000)
> 
> For reference, this is about 100msurrounding the following lat/long:
> Center      (-160.7909106,  63.8815138) (160d47'27.28"W, 63d52'53.45"N)
> 
> A simple gdalinfo on g2009alaska.gtx reports the following:
> PROJ.4 string is:
> '+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs '
> Origin = (171.991666666666670,72.008333333333340)
> Pixel Size = (0.016666666666667,-0.016666666666667)
> Corner Coordinates:
> Upper Left  ( 171.9916667,  72.0083333) (171d59'30.00"E, 72d 0'30.00"N)
> Lower Left  ( 171.9916667,  48.9916667) (171d59'30.00"E, 48d59'30.00"N)
> Upper Right (     234.008,      72.008) (234d 0'30.00"E, 72d 0'30.00"N)
> Lower Right (     234.008,      48.992) (234d 0'30.00"E, 48d59'30.00"N)
> Center      (     203.000,      60.500) (203d 0' 0.00"E, 60d30' 0.00"N)
> 
> Does anyone see anything wrong with my gdalwarp/proj4 usage?  Are there
> better ways to handle these sorts of transformations?

Alexander,

I can also reproduce. Running with PROJ_DEBUG=ON gives an interesting hint :

$ echo "-160.7909106 63.8815138" | PROJ_DEBUG=ON gdaltransform  -s_srs 
"+proj=longlat +datum=WGS84 +units=m +no_defs 
+geoidgrids=./usa_geoid2009/g2009alaska.gtx" -t_srs "+proj=longlat 
+datum=WGS84 +units=m +no_def" --debug on
OGRCT: PROJ >= 4.8.0 features enabled
pj_open_lib(proj_def.dat): call fopen(/home/even/install-
proj-4.8.0/share/proj/proj_def.dat) - succeeded

OGRCT: Source: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 
+geoidgrids=./usa_geoid2009/g2009alaska.gtx +no_defs 
OGRCT: Target: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs 
OGRCT: Source: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs 
OGRCT: Target: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 
+geoidgrids=./usa_geoid2009/g2009alaska.gtx +no_defs 
pj_open_lib(./usa_geoid2009/g2009alaska.gtx): call 
fopen(./usa_geoid2009/g2009alaska.gtx) - succeeded

This GTX spans the dateline!  This will cause problems.
GTX 3721x1381: LL=(172,49) UR=(234,72)
pj_apply_vgridshift(): failed to find a grid shift table for
                       location (-160.7909106dW,63.8815138dN)
   tried: ./usa_geoid2009/g2009alaska.gtx
ERROR 1: point not within available datum shift grids
transformation failed.

And indeed :
$ gdalinfo ./usa_geoid2009/g2009alaska.gtx
Driver: GTX/NOAA Vertical Datum .GTX
Files: ./usa_geoid2009/g2009alaska.gtx
Size is 3721, 1381
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Origin = (171.991666666666674,72.008333333333340)
Pixel Size = (0.016666666666667,-0.016666666666667)
Corner Coordinates:
Upper Left  ( 171.9916667,  72.0083333) (171d59'30.00"E, 72d 0'30.00"N)
Lower Left  ( 171.9916667,  48.9916667) (171d59'30.00"E, 48d59'30.00"N)
Upper Right (     234.008,      72.008) (234d 0'30.00"E, 72d 0'30.00"N)
Lower Right (     234.008,      48.992) (234d 0'30.00"E, 48d59'30.00"N)
Center      (     203.000,      60.500) (203d 0' 0.00"E, 60d30' 0.00"N)
Band 1 Block=3721x1 Type=Float32, ColorInterp=Undefined
  NoData Value=-88.8888015747070312

Current proj.4 code can deal with grids whose longitudes are all < 180 or all 
> 180, but not crossing. This could probably be improved, but would require 
further investigation.

I've successfully tried the following workaround by cutting the grid into 2 
parts around the dateline :

$ gdal_translate ./usa_geoid2009/g2009alaska.gtx \
			 ./usa_geoid2009/g2009alaska_west_dateline.gtx -of gtx \
			 -projwin 171.9916667 72.0083333 180 48.992


$ gdal_translate ./usa_geoid2009/g2009alaska.gtx \
			 ./usa_geoid2009/g2009alaska_east_dateline.gtx -of gtx \
			 -projwin 180 72.0083333 234.008 48.992


And then :
$ echo "-160.7909106 63.8815138" | gdaltransform  -s_srs "+proj=longlat 
+datum=WGS84 +units=m +no_defs 
+geoidgrids=./usa_geoid2009/g2009alaska_east_dateline.gtx" -t_srs 
"+proj=longlat +datum=WGS84 +units=m +no_def"
-160.7909106 63.8815138 7.7247364547829

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Wed Jan 28 16:13:02 2015
From: jorge at cartodb.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Thu, 29 Jan 2015 01:13:02 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
In-Reply-To: <201501290027.37537.even.rouault@spatialys.com>
References: <54C935B4.9060100@cartodb.com>
	<201501282128.46180.even.rouault@spatialys.com>
	<54C96B3C.7040109@cartodb.com>
	<201501290027.37537.even.rouault@spatialys.com>
Message-ID: <CAPRx4nT_M-0YudutRZ7QfxMa2yEPi6+oFxeQOgVcLYVPsCdy6w@mail.gmail.com>

El jueves, 29 de enero de 2015, Even Rouault <even.rouault at spatialys.com>
escribi?:

> Le jeudi 29 janvier 2015 00:05:32, Jorge Ar?valo a ?crit :
> > > Even Rouault <mailto:even.rouault at spatialys.com <javascript:;>>
> > > January 28, 2015 at 9:28 PM
> > >
> > > Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
> > >> Hi,
> > >>
> > >> I'm working with a patched version of gdal2tiles, which makes use of
> > >> parallelization:
> > >>
> http://gis.stackexchange.com/questions/7743/performance-of-google-map-ti
> > >> le- creation-processes/74446#74446
> > >>
> > >> I want to create a complete TMS cache from raster imagery. No
> > >> assumptions about SRS of data type for input data.
> > >>
> > >> I want the tiling process to be as fast as possible (gdal2tiles is
> > >> really heavy process), do you have any recomendations about the data
> or
> > >> the parameters used?
> > >>
> > >> Right now, I'm doing this
> > >>
> > >> Step 1: build vrt from input images
> > >>
> > >> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
> > >>
> > >> Step 2: build tiles from vrt file
> > >>
> > >> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
> > >>
> > >> Even with parallelization, process still feels really slow. Would it
> be
> > >> faster if, for example, I convert all my input files to epsg:3857? Or
> if
> > >> I scale them to 8-bit? Or if I use near resampling method instead of
> > >> cubic? (I'm using cubic because I'm working with continuous data:
> > >> satellite images, am I doing it right?).
> > >>
> > >  From a quick look at the source, it seems that there's an optimization
> > >  if the
> > >
> > > input SRS == output SRS that avoids going through the warped VRT path.
> > >
> > > That said, we definitely need one or several maintainers for
> gdal2tiles.
> > > There are quite a faw patches floating around in Trac that would need
> > > someone to review, test, fix, apply them, as well as writing tests (no
> > > autotest for gdal2tiles yet), etc...
> >
> > Ok. But the applications is taking hours to generate a complete tile
> > cache (zoom levels 0-19) for a 3MB tiff file, in epsg:3857. A 4 cores
> > machine with 8GB of RAM. The file is this one
> >
> > https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina-3857.tif
> >
> > Taking so much time for a 3MB file sounds ridiculous. I'm probably doing
> > something wrong. This is the line
> >
> > gdal2tiles.py  -s epsg:3857 -z 0-19 -r cubic katrina-3857.tif tiles_dir
> >
> > Do you see something wrong in this approach?
>
> The performance seems to be deeply impacted by "-r cubic", but even without
> it, it still sucks. The reason is the zoom level 19. Your dataset has a
> resolution of 3469 m. zoom 19 corresponds to a resolution of ~ 0.3 m. So
> you
> basically try to generate a TMS that is rougly 12000 x 12000 larger than
> your
> source dataset...
>
> Wow, thanks for the enlightment. So, with that resolution, I could easily
create TMS cache until levels 5-6, according to this
https://msdn.microsoft.com/en-us/library/aa940990.aspx

If I'd want higher zoom levels... That could mean high processing cost.
Worse if c?bic resampling method is used.

Conclussion: better guessing the highest zoom level for that resolution
using the table on the previous link, and building the TMS cache with that
constraint in mind.

Thanks again, Even!

>
> > Anyway, if this is a problem of gdal2tiles and it needs fine tunning or
> > maintenance, we could talk. I don't know if there's any other method to
> > generate a complete TMS cache using GDAL.
> >
> > >> Any other tips?
> > >>
> > >> Many thanks in advance
> > >>
> > >> Best regards
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
Jorge Ar?valo

http://cartodb.com/
Skype ID: jorgecartodb
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150129/b942dd91/attachment.html>

From geospatialsolutions at gmail.com  Wed Jan 28 19:17:09 2015
From: geospatialsolutions at gmail.com (Geospatial Information Technology Solutions)
Date: Wed, 28 Jan 2015 22:17:09 -0500
Subject: [gdal-dev] gdalwarp in MapTiler Pro Command Line
Message-ID: <CADx88nQv4tnaxRaUawvMasMJctjSLShhwJSGx7O+8dO314A41A@mail.gmail.com>

I have Map Tiler Pro and I'm trying to use the GDALWARP arguments that it
supports in order remove the borders around aviation/aeronautical charts
for a seamless moving map in a mobile app. I have a GIS Polygon Shapefile
for each Raster Image and I've prepared the following statement inside the
myarguments.txt (--optfile Maptiler command) The MapTilerPro Command Line
Manual is available at :
https://docs.google.com/file/d/0BwUe1kqIRJWST1ZlT0tlTWNaRlk/edit

(this is all GDALWARP except for the -wo which is a MapTiler Pro command
for warping argument)

-wo gdalwarp -overwrite  -r bilinear -q -cutline  S:/cropfiles/ENR_L01.shp
   -crop_to_cutline -of GTiff
S:/GEO-GIS/1501/d-EC_IFR/SOURCE/LOW/ENR_L01.TIF
s:/geo-gis/1501/d-EC_IFR/decollared/ENR_L01_crop.tif

I've just never worked with GDAL or GDALWARP and what I've tried seems to
work from OSGEO4W command line or from within QGIS but not with MapTilerPro
from Klokan Technologies.
I'm sure it's something simply but I have not received any responses from
my postings to

https://groups.google.com/forum/#!topic/maptiler/_0wIyVYuzO0
https://groups.google.com/forum/#!topic/maptiler/rbJvZ4lKIEY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150128/1700bd0e/attachment.html>

From even.rouault at spatialys.com  Thu Jan 29 01:12:03 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Jan 2015 10:12:03 +0100
Subject: [gdal-dev] gdalwarp and geogrids
In-Reply-To: <201501290033.48529.even.rouault@spatialys.com>
References: <BY2PR07MB842DC695481567608595D1DA8330@BY2PR07MB842.namprd07.prod.outlook.com>
	<201501290033.48529.even.rouault@spatialys.com>
Message-ID: <201501291012.03427.even.rouault@spatialys.com>

Le jeudi 29 janvier 2015 00:33:48, Even Rouault a ?crit :
> Le mercredi 28 janvier 2015 21:53:12, Wood, Alexander a ?crit :
> > Hello,
> > 
> > Hello devlist,
> > I have small patch of alaska elevation data  in utm4/navd88 and I would
> > like to convert this into wgs84 ellipsoidal.  I know this data uses
> > navd88,but gdalinfo does not report this vertical datum in the WKT.  To
> > reproject this data into wgs84 ellipsoidal elevation, I'm assuming it
> > should be possible with the following gdalwarp command:
> > 
> > gdalwarp -s_srs "+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs
> > +geoidgrids=g2009alaska.gtx" -t_srs "+proj=longlat +datum=WGS84 +units=m
> > +no_def" alaska_sample_utm4_navd88.tif alaska_sample_wgs84.tif
> > 
> > I'm seeing the following errors reported from this command:
> > ERROR 1: point not within available datum shift grids
> > ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because the
> > pfnTransformer failed. Warning 1: Unable to compute source region for
> > output window 0,0,351,106, skipping.
> > 
> > I'm using the geoidgrids from
> > http://trac.osgeo.org/proj/wiki/VerticalDatums, moved into the
> > gdal/projlib directory
> > 
> > The source file is in utm4:
> > PROJ.4 string is:
> > '+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs '
> > Origin = (412011.848695503660000,7085064.815277445100000)
> > 
> > For reference, this is about 100msurrounding the following lat/long:
> > Center      (-160.7909106,  63.8815138) (160d47'27.28"W, 63d52'53.45"N)
> > 
> > A simple gdalinfo on g2009alaska.gtx reports the following:
> > PROJ.4 string is:
> > '+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs '
> > Origin = (171.991666666666670,72.008333333333340)
> > Pixel Size = (0.016666666666667,-0.016666666666667)
> > Corner Coordinates:
> > Upper Left  ( 171.9916667,  72.0083333) (171d59'30.00"E, 72d 0'30.00"N)
> > Lower Left  ( 171.9916667,  48.9916667) (171d59'30.00"E, 48d59'30.00"N)
> > Upper Right (     234.008,      72.008) (234d 0'30.00"E, 72d 0'30.00"N)
> > Lower Right (     234.008,      48.992) (234d 0'30.00"E, 48d59'30.00"N)
> > Center      (     203.000,      60.500) (203d 0' 0.00"E, 60d30' 0.00"N)
> > 
> > Does anyone see anything wrong with my gdalwarp/proj4 usage?  Are there
> > better ways to handle these sorts of transformations?
> 
> Alexander,
> 
> I can also reproduce. Running with PROJ_DEBUG=ON gives an interesting hint
> :
> 
> $ echo "-160.7909106 63.8815138" | PROJ_DEBUG=ON gdaltransform  -s_srs
> "+proj=longlat +datum=WGS84 +units=m +no_defs
> +geoidgrids=./usa_geoid2009/g2009alaska.gtx" -t_srs "+proj=longlat
> +datum=WGS84 +units=m +no_def" --debug on
> OGRCT: PROJ >= 4.8.0 features enabled
> pj_open_lib(proj_def.dat): call fopen(/home/even/install-
> proj-4.8.0/share/proj/proj_def.dat) - succeeded
> 
> OGRCT: Source: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0
> +geoidgrids=./usa_geoid2009/g2009alaska.gtx +no_defs
> OGRCT: Target: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs
> OGRCT: Source: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs
> OGRCT: Target: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0
> +geoidgrids=./usa_geoid2009/g2009alaska.gtx +no_defs
> pj_open_lib(./usa_geoid2009/g2009alaska.gtx): call
> fopen(./usa_geoid2009/g2009alaska.gtx) - succeeded
> 
> This GTX spans the dateline!  This will cause problems.
> GTX 3721x1381: LL=(172,49) UR=(234,72)
> pj_apply_vgridshift(): failed to find a grid shift table for
>                        location (-160.7909106dW,63.8815138dN)
>    tried: ./usa_geoid2009/g2009alaska.gtx
> ERROR 1: point not within available datum shift grids
> transformation failed.
> 
> And indeed :
> $ gdalinfo ./usa_geoid2009/g2009alaska.gtx
> Driver: GTX/NOAA Vertical Datum .GTX
> Files: ./usa_geoid2009/g2009alaska.gtx
> Size is 3721, 1381
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> Origin = (171.991666666666674,72.008333333333340)
> Pixel Size = (0.016666666666667,-0.016666666666667)
> Corner Coordinates:
> Upper Left  ( 171.9916667,  72.0083333) (171d59'30.00"E, 72d 0'30.00"N)
> Lower Left  ( 171.9916667,  48.9916667) (171d59'30.00"E, 48d59'30.00"N)
> Upper Right (     234.008,      72.008) (234d 0'30.00"E, 72d 0'30.00"N)
> Lower Right (     234.008,      48.992) (234d 0'30.00"E, 48d59'30.00"N)
> Center      (     203.000,      60.500) (203d 0' 0.00"E, 60d30' 0.00"N)
> Band 1 Block=3721x1 Type=Float32, ColorInterp=Undefined
>   NoData Value=-88.8888015747070312
> 
> Current proj.4 code can deal with grids whose longitudes are all < 180 or
> all
> 
> > 180, but not crossing. This could probably be improved, but would require
> 
> further investigation.
> 
> I've successfully tried the following workaround by cutting the grid into 2
> parts around the dateline :
> 
> $ gdal_translate ./usa_geoid2009/g2009alaska.gtx \
> 			 ./usa_geoid2009/g2009alaska_west_dateline.gtx -of gtx \
> 			 -projwin 171.9916667 72.0083333 180 48.992
> 
> 
> $ gdal_translate ./usa_geoid2009/g2009alaska.gtx \
> 			 ./usa_geoid2009/g2009alaska_east_dateline.gtx -of gtx \
> 			 -projwin 180 72.0083333 234.008 48.992
> 
> 
> And then :
> $ echo "-160.7909106 63.8815138" | gdaltransform  -s_srs "+proj=longlat
> +datum=WGS84 +units=m +no_defs
> +geoidgrids=./usa_geoid2009/g2009alaska_east_dateline.gtx" -t_srs
> "+proj=longlat +datum=WGS84 +units=m +no_def"
> -160.7909106 63.8815138 7.7247364547829

Waking up this morning, I realized that the above is necessary, but not sufficient
to help you for your ultimate goal.
gdalwarp will run, but not produce the expected result since it only uses 2D components
of the coordinates. So it will give the same result with and without +geoidgrids

AFAIK, there's no one-step utility to do what you want in GDAL, but you could likely
use the following multiple step process :

1) Convert your grid into a point cloud with gdal2xyz

gdal2xyz.py in.tif > points.txt

2) Use gdaltransform to reproject the point cloud from utm4/navd88 to wgs84

gdaltransform -s_srs "+proj=utm +zone=4 +datum=WGS84 +units=m +no_defs +geoidgrids=./usa_geoid2009/g2009alaska_east_dateline.gtx" \
                       -t_srs "+proj=longlat +datum=WGS84 +units=m +no_def" < points.txt > points2.txt

3) Edit points2.txt to replace spaces by commas and generate a CSV file

sed "s/ /,/g" < points2.txt > points2.csv

And add a "x,y,z" first line

4) Make a VRT from the CSV to build geometry from the columns. See "Example: ODBC Point Layer" of http://gdal.org/drv_vrt.html as a starting point

5) Optionally convert with ogr2ogr the VRT into a shapefile and add a spatial index for better performance of next step

6) Run gdal_grid to build the output DEM from the VRT/SHP

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Jan 29 01:23:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Jan 2015 10:23:06 +0100
Subject: [gdal-dev] gdalwarp in MapTiler Pro Command Line
In-Reply-To: <CADx88nQv4tnaxRaUawvMasMJctjSLShhwJSGx7O+8dO314A41A@mail.gmail.com>
References: <CADx88nQv4tnaxRaUawvMasMJctjSLShhwJSGx7O+8dO314A41A@mail.gmail.com>
Message-ID: <201501291023.07008.even.rouault@spatialys.com>

Le jeudi 29 janvier 2015 04:17:09, Geospatial Information Technology Solutions 
a ?crit :
> I have Map Tiler Pro and I'm trying to use the GDALWARP arguments that it
> supports in order remove the borders around aviation/aeronautical charts
> for a seamless moving map in a mobile app. I have a GIS Polygon Shapefile
> for each Raster Image and I've prepared the following statement inside the
> myarguments.txt (--optfile Maptiler command) The MapTilerPro Command Line
> Manual is available at :
> https://docs.google.com/file/d/0BwUe1kqIRJWST1ZlT0tlTWNaRlk/edit
> 
> (this is all GDALWARP except for the -wo which is a MapTiler Pro command
> for warping argument)
> 
> -wo gdalwarp -overwrite  -r bilinear -q -cutline  S:/cropfiles/ENR_L01.shp
>    -crop_to_cutline -of GTiff
> S:/GEO-GIS/1501/d-EC_IFR/SOURCE/LOW/ENR_L01.TIF
> s:/geo-gis/1501/d-EC_IFR/decollared/ENR_L01_crop.tif
> 
> I've just never worked with GDAL or GDALWARP and what I've tried seems to
> work from OSGEO4W command line or from within QGIS but not with MapTilerPro
> from Klokan Technologies.

(unnamed user),

I'm a bit confused, but if it works with the standard GDAL distribution and 
not within MapTilerPro, it's unlikely we can help... You'd better check with 
MapTilerPro appropriate support channels.

Regarding -cutline, an important thing to have in mind is :
"If the OGR layer containing the cutline
features has no explicit SRS, the cutline features must be in the SRS of the
destination file."
But generally .shp are accompanied with a .prj, so it is unlikely to be your 
issue here, and you don't do reprojection either. So no idea...

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From howard at hobu.co  Thu Jan 29 06:16:11 2015
From: howard at hobu.co (Howard Butler)
Date: Thu, 29 Jan 2015 08:16:11 -0600
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and
	FIDs
In-Reply-To: <CACALY+RF6g0KwbCc72DDqhO+sVv4itE6qiQ-p-_rroELerK1=w@mail.gmail.com>
References: <201501281323.13737.even.rouault@spatialys.com>
	<CACALY+RF6g0KwbCc72DDqhO+sVv4itE6qiQ-p-_rroELerK1=w@mail.gmail.com>
Message-ID: <296EE511-87CF-446C-9B8A-7F4EB5838AA0@hobu.co>

+1

Howard

> On Jan 28, 2015, at 10:04 AM, Tamas Szekeres <szekerest at gmail.com> wrote:
> 
> +1
> 
> Tamas
> 
> 2015-01-28 13:23 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> Hi,
> 
> I think that the points raised in the discussion have been addressed.
> 
> Since the call for discussion, I've updated the RFC to reflect the latest
> changes :
> - GetFID64()/GetFeatureCount64() removed and replaced by
> GetFID()/GetFeatureCount() whose return type is changed to GIntBig
> - MITAB driver updated with change for seamless table FIDs
> 
> So:
> 
> Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs
> 
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
> 
> Starting with my +1
> 
> Best regards,
> 
> Even
> 
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jorge at cartodb.com  Thu Jan 29 07:39:14 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu, 29 Jan 2015 16:39:14 +0100
Subject: [gdal-dev] gdal_merge vs gdalbuildvrt
Message-ID: <54CA5422.8030901@cartodb.com>

Hello,

What's the difference between gdal_merge and gdalbuildvrt? If I'm not 
wrong, gdal_merge actually creates a new dataset, merging the input 
ones. And gdalbuildvrt just creates a VRT file, which works as 
descriptor for a mosaic.

At the end, in both cases we have a mosaic from several input files 
(real mosaic vs virtual mosaic). So, why would I use gdal_merge instead 
of gdalbuildvrt? With gdal_merge, I'd need more space in disk, in order 
to generate a merged file.

Many thanks in advance.

Best regards,

-- 
Jorge Ar?valo

CartoDB
http://cartodb.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150129/274a4a1a/attachment.html>

From geospatialsolutions at gmail.com  Thu Jan 29 10:13:23 2015
From: geospatialsolutions at gmail.com (GeospatialInfoTechSolutions)
Date: Thu, 29 Jan 2015 10:13:23 -0800 (PST)
Subject: [gdal-dev] gdalwarp in MapTiler Pro Command Line
In-Reply-To: <201501291023.07008.even.rouault@spatialys.com>
References: <CADx88nQv4tnaxRaUawvMasMJctjSLShhwJSGx7O+8dO314A41A@mail.gmail.com>
	<201501291023.07008.even.rouault@spatialys.com>
Message-ID: <1422555203019-5184510.post@n6.nabble.com>

It's not working in OSGEO4W shell when I try to run it.

gdalwarp -overwrite  -r bilinear -q -cutline  S:/cropfiles/ENR_L01.shp 
-crop_to_cutline -of GTiff  S:/GEO-GIS/1501/d-EC_IFR/SOURCE/LOW/ENR_L01.TIF 
s:/geo-gis/1501/d-EC_IFR/decollared/ENR_L01_crop.tif 

I'm not familiar with the gdalwarp syntax and could use some guidance.  



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-gdalwarp-in-MapTiler-Pro-Command-Line-tp5184328p5184510.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Thu Jan 29 11:58:11 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 29 Jan 2015 20:58:11 +0100
Subject: [gdal-dev] gdalwarp in MapTiler Pro Command Line
In-Reply-To: <1422555203019-5184510.post@n6.nabble.com>
References: <CADx88nQv4tnaxRaUawvMasMJctjSLShhwJSGx7O+8dO314A41A@mail.gmail.com>	<201501291023.07008.even.rouault@spatialys.com>
	<1422555203019-5184510.post@n6.nabble.com>
Message-ID: <mae3el$a60$1@ger.gmane.org>

Am 29.01.2015 um 19:13 schrieb GeospatialInfoTechSolutions:
> It's not working in OSGEO4W shell when I try to run it.
>
> gdalwarp -overwrite  -r bilinear -q -cutline  S:/cropfiles/ENR_L01.shp
> -crop_to_cutline -of GTiff  S:/GEO-GIS/1501/d-EC_IFR/SOURCE/LOW/ENR_L01.TIF
> s:/geo-gis/1501/d-EC_IFR/decollared/ENR_L01_crop.tif
>

Do you get an error message, or is the cropped tif the same as the 
uncropped?

Can you add the extent of TIF and shapefile, as reproted by gdalinfo and 
"ogrinfo -al -geom=SUMMARY" ?

Greetings,
Andr? Joost



From randre at gmail.com  Fri Jan 30 01:37:30 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Fri, 30 Jan 2015 01:37:30 -0800
Subject: [gdal-dev] Setting encoding using Python API
Message-ID: <CAOL+ROF3_n5Yw1LdZ1CN=Lx5HXdZuaNQRL9UMRdwJMiB=aQNYg@mail.gmail.com>

Hi All,

Curious how I go about specifying the equivalent of "-lco ENCODING=UTF-8"
when using the Python API to write out shapefiles with OGR?

Thanks,

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150130/75f61f0b/attachment.html>

From even.rouault at spatialys.com  Fri Jan 30 01:39:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Jan 2015 10:39:58 +0100
Subject: [gdal-dev] Setting encoding using Python API
In-Reply-To: <CAOL+ROF3_n5Yw1LdZ1CN=Lx5HXdZuaNQRL9UMRdwJMiB=aQNYg@mail.gmail.com>
References: <CAOL+ROF3_n5Yw1LdZ1CN=Lx5HXdZuaNQRL9UMRdwJMiB=aQNYg@mail.gmail.com>
Message-ID: <201501301039.59571.even.rouault@spatialys.com>

Le vendredi 30 janvier 2015 10:37:30, Roger Andr? a ?crit :
> Hi All,
> 
> Curious how I go about specifying the equivalent of "-lco ENCODING=UTF-8"
> when using the Python API to write out shapefiles with OGR?

Roger,

sure: taken from autotest suite:

shape_ds.CreateLayer('test_utf_cut', geom_type = ogr.wkbPoint, \
	options = ['ENCODING=UTF-8'])


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From randre at gmail.com  Fri Jan 30 01:42:50 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Fri, 30 Jan 2015 01:42:50 -0800
Subject: [gdal-dev] Setting encoding using Python API
In-Reply-To: <201501301039.59571.even.rouault@spatialys.com>
References: <CAOL+ROF3_n5Yw1LdZ1CN=Lx5HXdZuaNQRL9UMRdwJMiB=aQNYg@mail.gmail.com>
	<201501301039.59571.even.rouault@spatialys.com>
Message-ID: <CAOL+ROFDB6ropNi3fasz-+uvEE1gTJM4-iv2iFYtM0f5xGZgrA@mail.gmail.com>

Awesome!  I hate to ask [another] dumb question, but how can I peruse that
autotest suite?  Under some sort of "test" dir in the install?

Roger

On Fri, Jan 30, 2015 at 1:39 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le vendredi 30 janvier 2015 10:37:30, Roger Andr? a ?crit :
> > Hi All,
> >
> > Curious how I go about specifying the equivalent of "-lco ENCODING=UTF-8"
> > when using the Python API to write out shapefiles with OGR?
>
> Roger,
>
> sure: taken from autotest suite:
>
> shape_ds.CreateLayer('test_utf_cut', geom_type = ogr.wkbPoint, \
>         options = ['ENCODING=UTF-8'])
>
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150130/14f13698/attachment.html>

From even.rouault at spatialys.com  Fri Jan 30 01:51:40 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Jan 2015 10:51:40 +0100
Subject: [gdal-dev] Setting encoding using Python API
In-Reply-To: <CAOL+ROFDB6ropNi3fasz-+uvEE1gTJM4-iv2iFYtM0f5xGZgrA@mail.gmail.com>
References: <CAOL+ROF3_n5Yw1LdZ1CN=Lx5HXdZuaNQRL9UMRdwJMiB=aQNYg@mail.gmail.com>
	<201501301039.59571.even.rouault@spatialys.com>
	<CAOL+ROFDB6ropNi3fasz-+uvEE1gTJM4-iv2iFYtM0f5xGZgrA@mail.gmail.com>
Message-ID: <201501301051.40438.even.rouault@spatialys.com>

Le vendredi 30 janvier 2015 10:42:50, Roger Andr? a ?crit :
> Awesome!  I hate to ask [another] dumb question, but how can I peruse that
> autotest suite?  Under some sort of "test" dir in the install?
> 

It is there in SVN : http://svn.osgeo.org/gdal/trunk/autotest/
or the gdalautotest archives in http://download.osgeo.org/gdal/1.11.1/

> Roger
> 
> On Fri, Jan 30, 2015 at 1:39 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le vendredi 30 janvier 2015 10:37:30, Roger Andr? a ?crit :
> > > Hi All,
> > > 
> > > Curious how I go about specifying the equivalent of "-lco
> > > ENCODING=UTF-8" when using the Python API to write out shapefiles with
> > > OGR?
> > 
> > Roger,
> > 
> > sure: taken from autotest suite:
> > 
> > shape_ds.CreateLayer('test_utf_cut', geom_type = ogr.wkbPoint, \
> > 
> >         options = ['ENCODING=UTF-8'])
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 30 03:28:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Jan 2015 12:28:22 +0100
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and
	FIDs
In-Reply-To: <201501281323.13737.even.rouault@spatialys.com>
References: <201501281323.13737.even.rouault@spatialys.com>
Message-ID: <201501301228.23194.even.rouault@spatialys.com>

> So:
> 
> Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs
> 
> http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
> 

Hi,

I declare this motion passed with support from JukkaR, DanielM, TamasS, 
HowardB and myself.

I will proceed to merging into trunk.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 30 08:38:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Jan 2015 17:38:00 +0100
Subject: [gdal-dev] Motion: Adopt RFC 31 - OGR 64bit Integer Fields and
	FIDs
In-Reply-To: <201501301228.23194.even.rouault@spatialys.com>
References: <201501281323.13737.even.rouault@spatialys.com>
	<201501301228.23194.even.rouault@spatialys.com>
Message-ID: <201501301738.01031.even.rouault@spatialys.com>

Le vendredi 30 janvier 2015 12:28:22, Even Rouault a ?crit :
> > So:
> > 
> > Motion : I move to adopt RFC 31 - OGR 64bit Integer Fields and FIDs
> > 
> > http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64
> 
> Hi,
> 
> I declare this motion passed with support from JukkaR, DanielM, TamasS,
> HowardB and myself.
> 
> I will proceed to merging into trunk.

Merged. After various adjustments to handle subtle different behaviours with 32 
bit python, python3, mingw, etc.., everything should be back to normal. All 
C.I. platforms are green again.

> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 30 08:41:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Jan 2015 17:41:15 +0100
Subject: [gdal-dev] Motion: Adopt RFC 52 - Strict OGR SQL quoting
Message-ID: <201501301741.15202.even.rouault@spatialys.com>

Hi,

Since the call for discussion, I've updated the RFC to point to the proposed 
refreshed implementation against current trunk.

So:

Motion : I move to adopt RFC 52 - Strict OGR SQL quoting

http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting

Starting with my +1

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan 30 09:31:02 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 30 Jan 2015 17:31:02 +0000 (UTC)
Subject: [gdal-dev] Motion: Adopt RFC 52 - Strict OGR SQL quoting
References: <201501301741.15202.even.rouault@spatialys.com>
Message-ID: <loom.20150130T183024-653@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

 
> Motion : I move to adopt RFC 52 - Strict OGR SQL quoting
> 
> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
> 
> Starting with my +1

+1

-Jukka Rahkonen-


From dmorissette at mapgears.com  Fri Jan 30 11:26:15 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 30 Jan 2015 14:26:15 -0500
Subject: [gdal-dev] Motion: Adopt RFC 52 - Strict OGR SQL quoting
In-Reply-To: <201501301741.15202.even.rouault@spatialys.com>
References: <201501301741.15202.even.rouault@spatialys.com>
Message-ID: <54CBDAD7.8030401@mapgears.com>

+1

Daniel


On 2015-01-30 11:41 AM, Even Rouault wrote:
> Hi,
>
> Since the call for discussion, I've updated the RFC to point to the proposed
> refreshed implementation against current trunk.
>
> So:
>
> Motion : I move to adopt RFC 52 - Strict OGR SQL quoting
>
> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
>
> Starting with my +1
>
> Best regards,
>
> Even
>
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From szekerest at gmail.com  Fri Jan 30 11:43:05 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 30 Jan 2015 20:43:05 +0100
Subject: [gdal-dev] Motion: Adopt RFC 52 - Strict OGR SQL quoting
In-Reply-To: <201501301741.15202.even.rouault@spatialys.com>
References: <201501301741.15202.even.rouault@spatialys.com>
Message-ID: <CACALY+TXoNm58B2G9-=dyAZ=g_PWdcjAJ5nEM-EAurVyRj5Bxw@mail.gmail.com>

+1

Tamas

2015-01-30 17:41 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> Since the call for discussion, I've updated the RFC to point to the
> proposed
> refreshed implementation against current trunk.
>
> So:
>
> Motion : I move to adopt RFC 52 - Strict OGR SQL quoting
>
> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
>
> Starting with my +1
>
> Best regards,
>
> Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150130/a9544b26/attachment.html>

From jlmcgraw at gmail.com  Fri Jan 30 11:59:31 2015
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Fri, 30 Jan 2015 14:59:31 -0500
Subject: [gdal-dev] gdalwarp in MapTiler Pro Command Line
Message-ID: <CA+XueT3e5r+c0=7LvSQR0Mc7U0OKd+uDuVwXj=ysZodP7UC3RA@mail.gmail.com>

I have done some work on this using only gdal and other open-source tools,
please see my github repository for ideas:
https://github.com/jlmcgraw?tab=repositories
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150130/26412778/attachment-0001.html>

