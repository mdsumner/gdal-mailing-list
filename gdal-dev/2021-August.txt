From jp4work at gmail.com  Sun Aug  8 14:23:14 2021
From: jp4work at gmail.com (Pei JIA)
Date: Sun, 8 Aug 2021 14:23:14 -0700
Subject: [gdal-dev] Build gdal from source - cannot set CPPFLAGS
Message-ID: <CADh8Q_VAV3RP2XLrpWUs=Q1Q3R50jww=1a6zm7RUpywnkZqe1g@mail.gmail.com>

 I can do
`./configure --enable-shared`

but failed with the following error message:








*?  gdal git:(master) ? ./configure CFLAGS="/usr/local/include/openjpeg"
CPPFLAGS="/usr/local/include/openjpeg" --enable-sharedchecking build system
type... x86_64-pc-linux-gnuchecking host system type...
x86_64-pc-linux-gnuchecking for gcc... gccchecking whether the C compiler
works... noconfigure: error: in `....../gdal/gdal':configure: error: C
compiler cannot create executablesSee `config.log' for more details*


-- 

Pei JIA, Ph.D.

Email: jp4work at gmail.com
cell in Canada:    +1 778-863-5816
cell in China: +86 186-8244-3503

Welcome to Vision Open
http://www.visionopen.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210808/3b4cbbab/attachment.html>

From Claudiu.Cochior at bentley.com  Thu Aug 12 08:54:07 2021
From: Claudiu.Cochior at bentley.com (Claudiu Cochior)
Date: Thu, 12 Aug 2021 15:54:07 +0000
Subject: [gdal-dev] unicode support in GDAL
Message-ID: <DS7PR19MB45812F2486ED1BB76B5602A7E6F99@DS7PR19MB4581.namprd19.prod.outlook.com>

Hello everybody,

I have a question related to Unicode strings in GDAL

We are using GDAL 3.0.4 and at some point we would like to write to shapefile a string that contains Russian characters. To give you some context, we are in C++, we created a OGRFeature and we want to set a field to the string that contains the Russian characters. My machine is in English and the language for non-unicode programs is set to English. I didn't find in the GDAL doc a definitive answer if GDAL support Unicode strings for filed values. As a test I converted the System::String to UTF-8 but the shape file displays only ? for the characters. If I change the language for non-unicode programs to Russian then I can safely extract the ANSI string and give it to the SetField method and the result is OK.

So, does GDAL supports unicede field string values somehow?

Thanks,


Claudiu

________________________________



This email, including any attachments, may contain confidential and/or proprietary information intended only for the use of the recipient. If you are not the intended recipient, any distribution, copying, or use of this email or its attachments is prohibited. If you received this email in error, please reply to the sender immediately and delete this message and any copies.

Bentley Systems has taken all reasonable steps to ensure that this communication is free from viruses, data corruption, and unauthorized alteration. Bentley Systems does not accept liability for any damages that may be incurred as a result of this or any communication by email


[https://cdn2.webdamdb.com/310th_sm_UnR3pO7k0ir0.jpg?1616176329]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210812/156f0016/attachment.html>

From jan.heckman at gmail.com  Thu Aug 12 09:10:28 2021
From: jan.heckman at gmail.com (Jan Heckman)
Date: Thu, 12 Aug 2021 18:10:28 +0200
Subject: [gdal-dev] unicode support in GDAL
In-Reply-To: <DS7PR19MB45812F2486ED1BB76B5602A7E6F99@DS7PR19MB4581.namprd19.prod.outlook.com>
References: <DS7PR19MB45812F2486ED1BB76B5602A7E6F99@DS7PR19MB4581.namprd19.prod.outlook.com>
Message-ID: <CAKMUAtCev4e3t-R80LCS2YUKY_tyn9=VfBZ4jp7narCVasLyDQ@mail.gmail.com>

Does the shapefile have a .cpg with UTF8 as spec?
Did you open the shape (or, in fact, the .dbf) in e.g.  Qgis?
You might try open it (the .dbf) in Libre office calc and specify the
encoding as UTF8.
If there's still ? or non-Russian where it should be, you are sure that the
shapefile (dbf) is not correct.
It may be quite ok and all you need is to supply the .cpg file.


On Thu, Aug 12, 2021 at 5:54 PM Claudiu Cochior via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hello everybody,
>
>
>
> I have a question related to Unicode strings in GDAL
>
>
>
> We are using GDAL 3.0.4 and at some point we would like to write to
> shapefile a string that contains Russian characters. To give you some
> context, we are in C++, we created a OGRFeature and we want to set a field
> to the string that contains the Russian characters. My machine is in
> English and the language for non-unicode programs is set to English. I
> didn?t find in the GDAL doc a definitive answer if GDAL support Unicode
> strings for filed values. As a test I converted the System::String to UTF-8
> but the shape file displays only ? for the characters. If I change the
> language for non-unicode programs to Russian then I can safely extract the
> ANSI string and give it to the SetField method and the result is OK.
>
>
>
> So, does GDAL supports unicede field string values somehow?
>
>
>
> Thanks,
>
>
>
>
>
> Claudiu
>
> ------------------------------
>
>
> This email, including any attachments, may contain confidential and/or
> proprietary information intended only for the use of the recipient. If you
> are not the intended recipient, any distribution, copying, or use of this
> email or its attachments is prohibited. If you received this email in
> error, please reply to the sender immediately and delete this message and
> any copies.
>
> *Bentley Systems has taken all reasonable steps to ensure that this
> communication is free from viruses, data corruption, and unauthorized
> alteration. Bentley Systems does not accept liability for any damages that
> may be incurred as a result of this or any communication by email*
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210812/2f5849e4/attachment.html>

From even.rouault at spatialys.com  Thu Aug 12 09:23:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Aug 2021 18:23:48 +0200
Subject: [gdal-dev] unicode support in GDAL
In-Reply-To: <DS7PR19MB45812F2486ED1BB76B5602A7E6F99@DS7PR19MB4581.namprd19.prod.outlook.com>
References: <DS7PR19MB45812F2486ED1BB76B5602A7E6F99@DS7PR19MB4581.namprd19.prod.outlook.com>
Message-ID: <9d06d2ac-0169-1508-4fa0-ceaa1f4e9181@spatialys.com>

**
Claudiu,

OGR supports unicode strings, and expect/outputs in UTF-8 as the pivot 
encoding. See https://gdal.org/development/rfc/rfc23_ogr_unicode.html 
for details
For shapefiles on writing, you'll need to pass the ENCODING=UTF-8 layer 
creation option (see 
https://gdal.org/drivers/vector/shapefile.html#layer-creation-options), 
or at another value that is compatible of cyrillic characters (CP1251 e.g.)

Demo (in UTF-8 console)

$ cat cyrillic.csv
id,txt
1,"??????"

$ ogr2ogr cyrillic.shp cyrillic.csv -lco ENCODING=CP1251

$ ogrinfo cyrillic.dbf -al -q

Layer name: cyrillic
Metadata:
 ? DBF_DATE_LAST_UPDATE=2021-08-12
OGRFeature(cyrillic):0
 ? id (String) = 1
 ? txt (String) = ??????


Even

Le 12/08/2021 ? 17:54, Claudiu Cochior via gdal-dev a ?crit?:
>
> Hello everybody,
>
> I have a question related to Unicode strings in GDAL
>
> We are using GDAL 3.0.4 and at some point we would like to write to 
> shapefile a string that contains Russian characters. To give you some 
> context, we are in C++, we created a OGRFeature and we want to set a 
> field to the string that contains the Russian characters. My machine 
> is in English and the language for non-unicode programs is set to 
> English. I didn?t find in the GDAL doc a definitive answer if GDAL 
> support Unicode strings for filed values. As a test I converted the 
> System::String to UTF-8 but the shape file displays only ? for the 
> characters. If I change the language for non-unicode programs to 
> Russian then I can safely extract the ANSI string and give it to the 
> SetField method and the result is OK.
>
> So, does GDAL supports unicede field string values somehow?
>
> Thanks,
>
> Claudiu
>
>
> ------------------------------------------------------------------------
>
>
> This email, including any attachments, may contain confidential and/or 
> proprietary information intended only for the use of the recipient. If 
> you are not the intended recipient, any distribution, copying, or use 
> of this email or its attachments is prohibited. If you received this 
> email in error, please reply to the sender immediately and delete this 
> message and any copies.
>
> /Bentley Systems has taken all reasonable steps to ensure that this 
> communication is free from viruses, data corruption, and unauthorized 
> alteration. Bentley Systems does not accept liability for any damages 
> that may be incurred as a result of this or any communication by email/
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210812/54033e40/attachment-0001.html>

From cdelancy at blackfangtechnologies.com  Fri Aug 13 07:16:28 2021
From: cdelancy at blackfangtechnologies.com (Craig Delancy)
Date: Fri, 13 Aug 2021 14:16:28 +0000
Subject: [gdal-dev] Crash during ChunkAndWarpImage in C++ API
Message-ID: <CH2PR17MB373323F9F03835ADD87235E5C7FA9@CH2PR17MB3733.namprd17.prod.outlook.com>

When calling ChunkAndWarpImage I have an unhandled exception on the line
pTransformArg = psInfo->pDstTransformArg;
in gdaltransformer.cpp.

Does anyone have any advice for where I should start debugging or what I may be doing wrong?
My full function is as follows:

bool WarpDataset(GDALDataset* srcDataset, GDALDataset*& dstDataset, int32 px, int32 py,
                FVector2D TopLeft, FVector2D BottomRight, OGRSpatialReference* dstSpatRef)
{
                if (!srcDataset)
                {
                                return false;
                }

                GDALAllRegister();

                //Source data
                GDALDatasetH hSrcDS = GDALDataset::ToHandle(srcDataset);
                CSLConstList CSL = CSLConstList();
                GDALDriverH hDriver = GDALGetDriverByName("MEM");

                if (!hDriver)
                {
                                UE_LOG(LogTemp, Warning, TEXT("Resize failed. No valid driver!"));
                                return false;
                }

                int32 NumBands = srcDataset->GetRasterCount();
                if (NumBands < 1)
                {
                                return false;
                }

                GDALDataType sourceDatatype = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS, 1));
                //Destination data
                GDALDatasetH hDstDS = GDALCreate(hDriver, "", px, py, NumBands, sourceDatatype, CSL);

                if (dstSpatRef)
                {
                                char* pszDstWKT = NULL;
                                int32 Err = dstSpatRef->exportToWkt(&pszDstWKT);
                                GDALDataset::FromHandle(hDstDS)->SetProjection(pszDstWKT);
                }
                else
                {
                                char* pszDstWKT = NULL;
                                int32 Err = GDALDataset::FromHandle(hSrcDS)->GetSpatialRef()->exportToWkt(&pszDstWKT);
                                GDALDataset::FromHandle(hDstDS)->SetProjection(pszDstWKT);
                }

                GDALDataset::FromHandle(hDstDS)->SetMetadata(GDALDataset::FromHandle(hSrcDS)->GetMetadata());

                bool InvertY = true;

                //Affine
                double T[6];
                double MaxX = BottomRight.X;
                double MaxY = BottomRight.Y;
                double MinX = TopLeft.X;
                double MinY = TopLeft.Y;

                T[0] = (MaxX - MinX) / double(px);
                T[1] = 0;
                T[2] = MinX;
                T[3] = (InvertY ? (MinY - MaxY) : (MaxY - MinY)) / double(py);
                T[4] = 0;
                T[5] = InvertY ? MaxY : MinY;

                GDALDataset::FromHandle(hDstDS)->SetGeoTransform(T);


                // Setup warp options.

                GDALWarpOptions* psWarpOptions = GDALCreateWarpOptions();

                psWarpOptions->hSrcDS = hSrcDS;
                psWarpOptions->hDstDS = hDstDS;

                psWarpOptions->nBandCount = NumBands;
                psWarpOptions->panSrcBands = (int*)CPLMalloc(sizeof(int) * psWarpOptions->nBandCount);
                psWarpOptions->panDstBands = (int*)CPLMalloc(sizeof(int) * psWarpOptions->nBandCount);

                for (int32 B = 0; B < NumBands; B++)
                {
                                psWarpOptions->panSrcBands[B] = B + 1;
                                psWarpOptions->panDstBands[B] = B + 1;
                }

                psWarpOptions->pfnProgress = GDALTermProgress;

                // Establish reprojection transformer.
                psWarpOptions->pTransformerArg = GDALCreateGenImgProjTransformer(hSrcDS, GDALGetProjectionRef(hSrcDS),
                                hDstDS, GDALGetProjectionRef(hDstDS), FALSE, 0.0, 1);
                psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

                // Initialize and execute the warp operation.

                GDALWarpOperation oOperation;

                oOperation.Initialize(psWarpOptions);
                oOperation.ChunkAndWarpImage(0, 0, GDALGetRasterXSize(hDstDS), GDALGetRasterYSize(hDstDS));

                GDALDestroyGenImgProjTransformer(psWarpOptions->pTransformerArg);
                GDALDestroyWarpOptions(psWarpOptions);

                dstDataset = GDALDataset::FromHandle(hDstDS);

                for (int32 B = 0; B < dstDataset->GetRasterCount(); B++)
                {
                                double Mean, Min, Max, SDev;
                                dstDataset->GetRasterBand(B + 1)->ComputeStatistics(0, &Min, &Max, &Mean, &SDev, NULL, NULL);
                }

                return true;
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/b9be9505/attachment-0001.html>

From Claudiu.Cochior at bentley.com  Fri Aug 13 09:24:20 2021
From: Claudiu.Cochior at bentley.com (Claudiu Cochior)
Date: Fri, 13 Aug 2021 16:24:20 +0000
Subject: [gdal-dev] unicode support in GDAL
In-Reply-To: <9d06d2ac-0169-1508-4fa0-ceaa1f4e9181@spatialys.com>
References: <DS7PR19MB45812F2486ED1BB76B5602A7E6F99@DS7PR19MB4581.namprd19.prod.outlook.com>
 <9d06d2ac-0169-1508-4fa0-ceaa1f4e9181@spatialys.com>
Message-ID: <DS7PR19MB458193CCCF256CD8245F22DBE6FA9@DS7PR19MB4581.namprd19.prod.outlook.com>

Thanks for the advice,

My string were in utf-8 but were not displaying well even with cpg file. Setting the encoding for the layer did the trick. Thanks

From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, August 12, 2021 12:24 PM
To: Claudiu Cochior <Claudiu.Cochior at bentley.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] unicode support in GDAL


WARNING: This email originated from outside of the organization. DO NOT click links, open attachments, or respond unless you recognize the sender and know the content is safe.

________________________________

Claudiu,

OGR supports unicode strings, and expect/outputs in UTF-8 as the pivot encoding. See https://gdal.org/development/rfc/rfc23_ogr_unicode.html<https://urldefense.com/v3/__https:/gdal.org/development/rfc/rfc23_ogr_unicode.html__;!!F1Q1IbZmrAg!X0yQNxc3iWUObkK4uTo7AmP54lFFTXf-YBmMDpLLGuT-Gwb5bZlrK9YDMJNwbHjHQrf9cA$> for details
For shapefiles on writing, you'll need to pass the ENCODING=UTF-8 layer creation option (see https://gdal.org/drivers/vector/shapefile.html#layer-creation-options<https://urldefense.com/v3/__https:/gdal.org/drivers/vector/shapefile.html*layer-creation-options__;Iw!!F1Q1IbZmrAg!X0yQNxc3iWUObkK4uTo7AmP54lFFTXf-YBmMDpLLGuT-Gwb5bZlrK9YDMJNwbHjfCK585w$>), or at another value that is compatible of cyrillic characters (CP1251 e.g.)

Demo (in UTF-8 console)

$ cat cyrillic.csv
id,txt
1,"??????"
$ ogr2ogr cyrillic.shp cyrillic.csv -lco ENCODING=CP1251

$ ogrinfo cyrillic.dbf -al -q

Layer name: cyrillic
Metadata:
  DBF_DATE_LAST_UPDATE=2021-08-12
OGRFeature(cyrillic):0
  id (String) = 1
  txt (String) = ??????

Even

Le 12/08/2021 ? 17:54, Claudiu Cochior via gdal-dev a ?crit :
Hello everybody,

I have a question related to Unicode strings in GDAL

We are using GDAL 3.0.4 and at some point we would like to write to shapefile a string that contains Russian characters. To give you some context, we are in C++, we created a OGRFeature and we want to set a field to the string that contains the Russian characters. My machine is in English and the language for non-unicode programs is set to English. I didn?t find in the GDAL doc a definitive answer if GDAL support Unicode strings for filed values. As a test I converted the System::String to UTF-8 but the shape file displays only ? for the characters. If I change the language for non-unicode programs to Russian then I can safely extract the ANSI string and give it to the SetField method and the result is OK.

So, does GDAL supports unicede field string values somehow?

Thanks,


Claudiu

________________________________


This email, including any attachments, may contain confidential and/or proprietary information intended only for the use of the recipient. If you are not the intended recipient, any distribution, copying, or use of this email or its attachments is prohibited. If you received this email in error, please reply to the sender immediately and delete this message and any copies.

Bentley Systems has taken all reasonable steps to ensure that this communication is free from viruses, data corruption, and unauthorized alteration. Bentley Systems does not accept liability for any damages that may be incurred as a result of this or any communication by email


[Image removed by sender.]



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!F1Q1IbZmrAg!X0yQNxc3iWUObkK4uTo7AmP54lFFTXf-YBmMDpLLGuT-Gwb5bZlrK9YDMJNwbHiygVmSlw$>

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!F1Q1IbZmrAg!X0yQNxc3iWUObkK4uTo7AmP54lFFTXf-YBmMDpLLGuT-Gwb5bZlrK9YDMJNwbHjxpaae3w$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/7c7a4a17/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ~WRD0001.jpg
Type: image/jpeg
Size: 823 bytes
Desc: ~WRD0001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/7c7a4a17/attachment.jpg>

From even.rouault at spatialys.com  Fri Aug 13 10:31:02 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Aug 2021 19:31:02 +0200
Subject: [gdal-dev] HANA driver proposal
In-Reply-To: <AM4PR02MB3123930CA96402ACE6F9CB6FF7E89@AM4PR02MB3123.eurprd02.prod.outlook.com>
References: <AM4PR02MB3123A11FB595552D31089E84F7E19@AM4PR02MB3123.eurprd02.prod.outlook.com>
 <b44320cb-6af8-fd1f-f220-22547d5ff071@spatialys.com>
 <AM4PR02MB3123930CA96402ACE6F9CB6FF7E89@AM4PR02MB3123.eurprd02.prod.outlook.com>
Message-ID: <1c76d86b-c775-567a-1553-a93fc935c052@spatialys.com>

Maxim,

> ?I assume the driver would depend on the ODBC  library, and would require users to build 
https://github.com/SAP/odbc-cpp-wrapper 
<https://github.com/SAP/odbc-cpp-wrapper>as the corresponding ODBC driver ??
>
> The odbc-cpp-wrapper library is going to be used only during the 
> compilation phase and linked statically, thus end users will get only 
> one dynamic/shared library of the HANA driver.? Hence, no additional 
> actions are required from end users. For those who want to compile the 
> GDAL sources with HANA support on their own, the sources of the 
> odbc-cpp-wrapper are needed. However, this step can be omitted if we 
> store a copy of the library in 
> https://github.com/OSGeo/gdal/tree/master/gdal/third_party 
> <https://github.com/OSGeo/gdal/tree/master/gdal/third_party>like we 
> did in QGIS (see 
> https://github.com/qgis/QGIS/tree/master/external/odbccpp 
> <https://github.com/qgis/QGIS/tree/master/external/odbccpp>).
>
I can anticipate potential issues if both GDAL and QGIS have a odbcpp 
vendorized copy, and that for some reason they differ in versions. That 
could cause symbol clashes at runtime. Putting the vendorized copy in a 
dedicated namespace prefix (GDAL::) could avoid that.

Otherwise, isn't the cpl_odbc.h abstraction good enough ?

Side note: are you aware of https://github.com/nanodbc/nanodbc that is 
also a C++ wrapper for ODBC ? (Mateusz one of our PSC members was the 
main developer of it, although I believe he has retired from it)

> Note, that any HANA plugin (GDAL/QGIS) also requires the SAP HANA 
> Client (https://tools.hana.ondemand.com/#hanatools) to be able to 
> connect an SAP HANA database.
>
Is that the ODBC driver for SAP HANA ?
> ?Unfortunately, we are not able to answer the remaining raised 
> pointsas they are beyond our expertise.
>
> Perhaps they should be addressed in a separate dedicated discussion.
>
Well, if you contribute to GDAL, then that should be in your area of 
interest and concern :-)

I think the main practical issue for this to go forward is for you to 
find someone who would want to review your contribution.

Another option is to propose the OGR SAP HANA driver as a plugin for 
download from your website.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/21b1d799/attachment-0001.html>

From sault.don at gmail.com  Fri Aug 13 13:33:13 2021
From: sault.don at gmail.com (Saulteau Don)
Date: Fri, 13 Aug 2021 13:33:13 -0700
Subject: [gdal-dev] modify zvalue in database when inserted using zfield
 option
Message-ID: <CAJo0jfN0uuE1S8XFR5g5BEaaNaeTA5FoC6yNCwd4WE4S6tvBmA@mail.gmail.com>

I used ogr2ogr to append contours into a larger dataset. I opted for the
zfield option using the ELEVATION field.

I realized one of my contours has a bad value and need to modify it to
match the other contours it is connected to.

I can edit the attribute ELEVATION fine, but when I rerun a mesh tool it
uses the zfield like its the old value instead of the modified one in the
ELEVATION field.

Where are the zvalues hidden in PostGIS to change them? Do I delete the old
line and re-append after I've made the change? That's one option but I was
wondering if I can just easily edit it inside postgis first.



Donovan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/c8620336/attachment.html>

From jan.heckman at gmail.com  Fri Aug 13 14:04:05 2021
From: jan.heckman at gmail.com (Jan Heckman)
Date: Fri, 13 Aug 2021 23:04:05 +0200
Subject: [gdal-dev] modify zvalue in database when inserted using zfield
 option
In-Reply-To: <CAJo0jfN0uuE1S8XFR5g5BEaaNaeTA5FoC6yNCwd4WE4S6tvBmA@mail.gmail.com>
References: <CAJo0jfN0uuE1S8XFR5g5BEaaNaeTA5FoC6yNCwd4WE4S6tvBmA@mail.gmail.com>
Message-ID: <CAKMUAtBMLt4cb5x97ibA_LRbKbJ_fTGF=7xdY7U04wqc3WrD7w@mail.gmail.com>

Quite possibly in the Z-coordinate of your geometry column. You can check
in pgadmin or psql (or another program like omnidb) what the exact type of
the postgis geometry in your table is.
You should see something like geometry(LineStringZM,28992) what i.c. means
a dutch projection of a linestring with Z and M coordinates.
You can access these (outside gdal) only through postgis, like
select st_astext(st_pointn(polyline,1)) from ehrdtracks limit 1;
            st_astext
----------------------------------
 POINT ZM (71905.9 417771 1504 0)

Esp with points you can formulate an update query replacing the geometry
element with a condition,
using ST_Makepoint(), see https://postgis.net/docs/ST_MakePoint.html

Perhaps Qgis might help, too, but I can't tell for sure.

Hope this helps,
Jan

On Fri, Aug 13, 2021 at 10:34 PM Saulteau Don <sault.don at gmail.com> wrote:

> I used ogr2ogr to append contours into a larger dataset. I opted for the
> zfield option using the ELEVATION field.
>
> I realized one of my contours has a bad value and need to modify it to
> match the other contours it is connected to.
>
> I can edit the attribute ELEVATION fine, but when I rerun a mesh tool it
> uses the zfield like its the old value instead of the modified one in the
> ELEVATION field.
>
> Where are the zvalues hidden in PostGIS to change them? Do I delete the
> old line and re-append after I've made the change? That's one option but I
> was wondering if I can just easily edit it inside postgis first.
>
>
>
> Donovan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/2de28d8e/attachment.html>

From sault.don at gmail.com  Fri Aug 13 14:13:07 2021
From: sault.don at gmail.com (Donovan Cameron)
Date: Fri, 13 Aug 2021 14:13:07 -0700
Subject: [gdal-dev] modify zvalue in database when inserted using zfield
 option
In-Reply-To: <CAKMUAtBMLt4cb5x97ibA_LRbKbJ_fTGF=7xdY7U04wqc3WrD7w@mail.gmail.com>
References: <CAJo0jfN0uuE1S8XFR5g5BEaaNaeTA5FoC6yNCwd4WE4S6tvBmA@mail.gmail.com>
 <CAKMUAtBMLt4cb5x97ibA_LRbKbJ_fTGF=7xdY7U04wqc3WrD7w@mail.gmail.com>
Message-ID: <dfe4d925-bc83-d19d-b130-634ebc96311b@gmail.com>

Oh! Thank you! I'm thinking maybe I'll generate a trigger in the 
database to update the zvalue when the ELEVATION field is updated.

On 2021-08-13 2:04 p.m., Jan Heckman wrote:
> Quite possibly in the Z-coordinate of your geometry column. You can 
> check in pgadmin or psql (or another program like omnidb) what the 
> exact type of the postgis geometry in your table is.
> You should see something like?geometry(LineStringZM,28992) what i.c. 
> means a dutch projection of a linestring with Z and M coordinates.
> You can access these (outside gdal) only through postgis, like
> select st_astext(st_pointn(polyline,1)) from ehrdtracks limit 1;
> ? ? ? ? ? ? st_astext
> ----------------------------------
> ?POINT ZM (71905.9 417771 1504 0)
>
> Esp with points you can formulate an update query replacing the 
> geometry element with a condition,
> using ST_Makepoint(), see https://postgis.net/docs/ST_MakePoint.html 
> <https://postgis.net/docs/ST_MakePoint.html>
>
> Perhaps Qgis might help, too, but I can't tell for sure.
>
> Hope this helps,
> Jan
>
> On Fri, Aug 13, 2021 at 10:34 PM Saulteau Don <sault.don at gmail.com 
> <mailto:sault.don at gmail.com>> wrote:
>
>     I used ogr2ogr to append contours into a larger dataset. I opted
>     for the zfield?option using the ELEVATION field.
>
>     I realized one of my contours has a bad value and need to modify
>     it to match the other contours it is connected to.
>
>     I can edit the attribute ELEVATION fine, but when I rerun a mesh
>     tool it uses the?zfield?like its the old value instead of the
>     modified one in the ELEVATION field.
>
>     Where are the zvalues?hidden in PostGIS to change them? Do I
>     delete the old line and re-append after I've made the change?
>     That's one option but I was wondering if I can just easily edit it
>     inside postgis first.
>
>
>
>     Donovan
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210813/630cecbd/attachment.html>

From brook at nmsu.edu  Fri Aug 13 17:23:51 2021
From: brook at nmsu.edu (Brook Milligan)
Date: Fri, 13 Aug 2021 18:23:51 -0600
Subject: [gdal-dev] Convert OGRGeometry* to pointer to derived geometry type
Message-ID: <0401508A-C21D-416B-A4EF-83752BC75FF5@nmsu.edu>

I would like to convert a pointer to OGRGeometry into a pointer to the appropriate derived type based upon the result of wkbFlatten(geometry->getGeometryType()).  It used to be possible to do this with functions like geometry->toLineString().  However, it seems that those are all deleted with the OGR_FORBID_DOWNCAST_TO(name) macro, although the functions are listed in the API documentation.

How is this conversion supposed to be accomplished now?

Thanks for any pointers.

Cheers,
Brook


From rlc5m8 at mail.missouri.edu  Sat Aug 14 04:22:16 2021
From: rlc5m8 at mail.missouri.edu (Chastain, Raymond Lee (MU-Student))
Date: Sat, 14 Aug 2021 11:22:16 +0000
Subject: [gdal-dev] GDAL NITF COMRAT issue when combining SDE_TRE=YES with
 compressio
Message-ID: <CY4PR01MB2471BA2ED8AE8667FEDF02D19FFB9@CY4PR01MB2471.prod.exchangelabs.com>

When we enable JPEG-2000 compression (or any IC=* creation option) alongside "SDE_TRE=YES" we get:
"Warning 1: Unable to locate COMRAT to update in NITF header."

We require the precision increase provided by "SDE_TRE=YES" and dropping the IC creation option
explodes the size of our final mosaics by an order of magnitude. Using either option separately is fine,
however, combining them emits this warning.

For context we are taking GeoTIFF mosaics and converting them to the NITF format when we encounter this.

Thanks,
Raymond.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210814/f06cd4e0/attachment-0001.html>

From even.rouault at spatialys.com  Sat Aug 14 05:28:19 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 14 Aug 2021 14:28:19 +0200
Subject: [gdal-dev] GDAL NITF COMRAT issue when combining SDE_TRE=YES
 with compressio
In-Reply-To: <CY4PR01MB2471BA2ED8AE8667FEDF02D19FFB9@CY4PR01MB2471.prod.exchangelabs.com>
References: <CY4PR01MB2471BA2ED8AE8667FEDF02D19FFB9@CY4PR01MB2471.prod.exchangelabs.com>
Message-ID: <11b78242-55d0-858b-f253-00c38df673d9@spatialys.com>

Raymond,

I believe this has been fixed per this commit in master done a few weeks 
ago:

https://github.com/OSGeo/gdal/commit/0decd82d582015c07bcf22c52cc03bbdda952ce9

I've just backported it to the 3.3 branch

Even

Le 14/08/2021 ? 13:22, Chastain, Raymond Lee (MU-Student) a ?crit?:
> When we enable JPEG-2000 compression (or any IC=* creation option) 
> alongside "SDE_TRE=YES" we get:
> "Warning 1: Unable to locate COMRAT to update in NITF header."
>
> We require the precision increase provided by "SDE_TRE=YES" and 
> dropping the IC creation option
> explodes the size of our final mosaics by an order of magnitude. Using 
> either option separately is fine,
> however, combining them emits this warning.
>
> For context we are taking GeoTIFF mosaics and converting them to the 
> NITF format when we encounter this.
>
> Thanks,
> Raymond.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210814/1c350ad0/attachment.html>

From even.rouault at spatialys.com  Sat Aug 14 05:30:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 14 Aug 2021 14:30:48 +0200
Subject: [gdal-dev] Convert OGRGeometry* to pointer to derived geometry
 type
In-Reply-To: <0401508A-C21D-416B-A4EF-83752BC75FF5@nmsu.edu>
References: <0401508A-C21D-416B-A4EF-83752BC75FF5@nmsu.edu>
Message-ID: <33c15e8a-c07e-9396-5ee8-95d5bb8e0d46@spatialys.com>

Brook,

toXXXX methods can still be used. We just have restricted invalid 
conversions, like a LineString to Polygon

A great part of what is valid is tested in

https://github.com/OSGeo/gdal/blob/1ec0b63d8820b2d3f0cfb792e05f3f5fea49892c/autotest/cpp/test_ogr.cpp#L787

Even

Le 14/08/2021 ? 02:23, Brook Milligan a ?crit?:
> I would like to convert a pointer to OGRGeometry into a pointer to the appropriate derived type based upon the result of wkbFlatten(geometry->getGeometryType()).  It used to be possible to do this with functions like geometry->toLineString().  However, it seems that those are all deleted with the OGR_FORBID_DOWNCAST_TO(name) macro, although the functions are listed in the API documentation.
>
> How is this conversion supposed to be accomplished now?
>
> Thanks for any pointers.
>
> Cheers,
> Brook
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sat Aug 14 05:43:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 14 Aug 2021 14:43:11 +0200
Subject: [gdal-dev] GDAL NITF COMRAT issue when combining SDE_TRE=YES
 with compressio
In-Reply-To: <CY4PR01MB2471AD28DEEA88E555C097979FFB9@CY4PR01MB2471.prod.exchangelabs.com>
References: <CY4PR01MB2471BA2ED8AE8667FEDF02D19FFB9@CY4PR01MB2471.prod.exchangelabs.com>
 <11b78242-55d0-858b-f253-00c38df673d9@spatialys.com>
 <CY4PR01MB2471AD28DEEA88E555C097979FFB9@CY4PR01MB2471.prod.exchangelabs.com>
Message-ID: <437fed7e-39d2-90f0-9490-c56639deb502@spatialys.com>

The side effect of using a file where this warning is emitted is that 
this COMRAT field which indicates the compression rate will be set to a 
invalid value (or probably set to blank. I haven't checked). Pedantic 
software or validation procedures might be unhappy with that. GDAL based 
software will ignore that field on reading.


Le 14/08/2021 ? 14:33, Chastain, Raymond Lee (MU-Student) a ?crit?:
> Thanks Even that's fantastic,
>
> Do you know what side-effects if any we can expect due to this?
>
> We need to know if we should regenerate our imagery before we deliver it.
>
> Thanks for your time,
> Raymond.
> ------------------------------------------------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* Saturday, August 14, 2021 7:28 AM
> *To:* Chastain, Raymond Lee (MU-Student) <rlc5m8 at mail.missouri.edu>; 
> gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] GDAL NITF COMRAT issue when combining 
> SDE_TRE=YES with compressio
> WARNING: This message has originated from an External Source. This may 
> be a phishing expedition that can result in unauthorized access to our 
> IT System. Please use proper judgment and caution when opening 
> attachments, clicking links, or responding to this email.
>
> Raymond,
>
> I believe this has been fixed per this commit in master done a few 
> weeks ago:
>
> https://github.com/OSGeo/gdal/commit/0decd82d582015c07bcf22c52cc03bbdda952ce9 
> <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fcommit%2F0decd82d582015c07bcf22c52cc03bbdda952ce9&data=04%7C01%7C%7Cd81ccff1e3754c4773c208d95f1f01c9%7Ce3fefdbef7e9401ba51a355e01b05a89%7C0%7C0%7C637645409483708058%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=W1d2E0BTJo7Ld5xHIC66uckdF9cxE1pbIwuarPGZ%2BBo%3D&reserved=0>
>
> I've just backported it to the 3.3 branch
>
> Even
>
> Le 14/08/2021 ? 13:22, Chastain, Raymond Lee (MU-Student) a ?crit?:
>> When we enable JPEG-2000 compression (or any IC=* creation option) 
>> alongside "SDE_TRE=YES" we get:
>> "Warning 1: Unable to locate COMRAT to update in NITF header."
>>
>> We require the precision increase provided by "SDE_TRE=YES" and 
>> dropping the IC creation option
>> explodes the size of our final mosaics by an order of magnitude. 
>> Using either option separately is fine,
>> however, combining them emits this warning.
>>
>> For context we are taking GeoTIFF mosaics and converting them to the 
>> NITF format when we encounter this.
>>
>> Thanks,
>> Raymond.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=04%7C01%7C%7Cd81ccff1e3754c4773c208d95f1f01c9%7Ce3fefdbef7e9401ba51a355e01b05a89%7C0%7C0%7C637645409483718054%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=78dJn9FLoWH9kcbp1z0ZdKMV6oiYtKBiYmKhtqILd88%3D&reserved=0>
> -- 
> http://www.spatialys.com  <https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&data=04%7C01%7C%7Cd81ccff1e3754c4773c208d95f1f01c9%7Ce3fefdbef7e9401ba51a355e01b05a89%7C0%7C0%7C637645409483728049%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=ubDodTKc6F9h1iHXgG4LMEuqVhUUeYxI5hmQjlTSHwg%3D&reserved=0>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210814/b569a218/attachment.html>

From cdelancy at blackfangtechnologies.com  Mon Aug 16 09:41:40 2021
From: cdelancy at blackfangtechnologies.com (Craig Delancy)
Date: Mon, 16 Aug 2021 16:41:40 +0000
Subject: [gdal-dev] Causes of GDALCreateGenImgProjTransformer returning null?
Message-ID: <CH2PR17MB3733195D28EB4520046E19C6C7FD9@CH2PR17MB3733.namprd17.prod.outlook.com>

Hello, I am using the c++ API of GDAL 3. I am having a crash during ChunkAndWarpImage, and the cause seems to be that GDALCreateGenImgProjTransformer returns null while I am setting up psWarpOptions.
I have also tried GDALCreateGenImgProjTransformer2, which also returns null. Does anyone know what some common causes of this would be that I could investigate?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210816/76ea0926/attachment.html>

From stefan.uhrig at sap.com  Tue Aug 17 02:43:23 2021
From: stefan.uhrig at sap.com (Uhrig, Stefan)
Date: Tue, 17 Aug 2021 09:43:23 +0000
Subject: [gdal-dev] HANA driver proposal
In-Reply-To: <1c76d86b-c775-567a-1553-a93fc935c052@spatialys.com>
References: <AM4PR02MB3123A11FB595552D31089E84F7E19@AM4PR02MB3123.eurprd02.prod.outlook.com>
 <b44320cb-6af8-fd1f-f220-22547d5ff071@spatialys.com>
 <AM4PR02MB3123930CA96402ACE6F9CB6FF7E89@AM4PR02MB3123.eurprd02.prod.outlook.com>
 <1c76d86b-c775-567a-1553-a93fc935c052@spatialys.com>
Message-ID: <AM0PR02MB5777368BAAABDE84DC38EF9493FE9@AM0PR02MB5777.eurprd02.prod.outlook.com>

Thanks for your reply, Even. Maxim is on vacation, so let me try to answer on his behalf.

Good point about the symbol clashes. We weren?t thinking of that yet. Adding an additional namespace prefix seems to be a good idea. We should introduce that option upstream.

Before we implemented our own ODBC wrapper, we checked out existing ones. Indeed, nanodbc seems to be the best maintained wrapper with the most features. However, it does not support batch inserts with data-at-execution parameters (https://docs.microsoft.com/en-us/sql/odbc/reference/develop-app/using-arrays-of-parameters?view=sql-server-ver15), which we consider rather important in a spatial context as the length of geometry values can vary greatly.

We considered contributing, but batch inserts with data-at-execution parameters are poorly supported by ODBC drivers. Of the drivers we tested, we found that only PostgreSQL and SAP HANA support it the way we understand the specification. Hence, we preferred to write our own wrapper as the data-at-execution parameters support might be considered a buggy feature.

Yes, the SAP HANA Client (https://tools.hana.ondemand.com/#hanatools) contains the ODBC driver for SAP HANA (it also contains database connectors for other languages). The driver is not required at compile time, it?s only required at runtime if you want to connect to an SAP HANA database.

Can you point us to an example of a GDAL plugin that is offered as download from a GDAL external website? This might be an option, but we would prefer contributing directly to GDAL, of course. Maintaining binary plugin versions externally for all the relevant versions/platforms/compilers will probably be difficult.

Would it be sufficient if the OGR SAP HANA driver is reviewed by members of our team? And if that?s not sufficient, what options do we have to find someone who is qualified to do the final review?

Thanks, and best regards,
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Friday, August 13, 2021 7:31 PM
To: Rylov, Maxim <maxim.rylov at sap.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] HANA driver proposal


Maxim,
> ?I assume the driver would depend on the ODBC library, and would require users to build https://github.com/SAP/odbc-cpp-wrapper as the corresponding ODBC driver ??

The odbc-cpp-wrapper library is going to be used only during the compilation phase and linked statically, thus end users will get only one dynamic/shared library of the HANA driver.  Hence, no additional actions are required from end users. For those who want to compile the GDAL sources with HANA support on their own, the sources of the odbc-cpp-wrapper are needed. However, this step can be omitted if we store a copy of the library in https://github.com/OSGeo/gdal/tree/master/gdal/third_party like we did in QGIS (see https://github.com/qgis/QGIS/tree/master/external/odbccpp).

I can anticipate potential issues if both GDAL and QGIS have a odbcpp vendorized copy, and that for some reason they differ in versions. That could cause symbol clashes at runtime. Putting the vendorized copy in a dedicated namespace prefix (GDAL::) could avoid that.

Otherwise, isn't the cpl_odbc.h abstraction good enough ?

Side note: are you aware of https://github.com/nanodbc/nanodbc that is also a C++ wrapper for ODBC ? (Mateusz one of our PSC members was the main developer of it, although I believe he has retired from it)

Note, that any HANA plugin (GDAL/QGIS) also requires the SAP HANA Client (https://tools.hana.ondemand.com/#hanatools) to be able to connect an SAP HANA database.
Is that the ODBC driver for SAP HANA ?

?Unfortunately, we are not able to answer the remaining raised points as they are beyond our expertise.
Perhaps they should be addressed in a separate dedicated discussion.

Well, if you contribute to GDAL, then that should be in your area of interest and concern :-)

I think the main practical issue for this to go forward is for you to find someone who would want to review your contribution.

Another option is to propose the OGR SAP HANA driver as a plugin for download from your website.

Even

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/7624e38e/attachment.html>

From howard at hobu.co  Tue Aug 17 08:33:40 2021
From: howard at hobu.co (Howard Butler)
Date: Tue, 17 Aug 2021 10:33:40 -0500
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
Message-ID: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>

Dear PSC,

As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Even Rouault as a contracted GDAL maintainer for the year 2021-2022 beginning on August 1st, 2021 and ending July 31st, 2022. 

Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html

The terms of the contract are for 833 hours at $120/hr USD.

Howard

PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.

From warmerdam at pobox.com  Tue Aug 17 08:52:31 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 17 Aug 2021 22:52:31 +0700
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
Message-ID: <CA+YzLBeWaD2oJO4bavmp+VtFsouj89M4T4XzCyLgSmHRHgTvvw@mail.gmail.com>

+1 FrankW !

On Tue, Aug 17, 2021 at 10:33 PM Howard Butler <howard at hobu.co> wrote:

> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a
> financial conduit, it is my pleasure to put forward a motion to approve
> Even Rouault as a contracted GDAL maintainer for the year 2021-2022
> beginning on August 1st, 2021 and ending July 31st, 2022.
>
> Details of the maintenance tasking and duties can be found at the
> previously approved RFC 83
> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for 833 hours at $120/hr USD.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL
> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
> Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/9c617762/attachment.html>

From norman.barker at gmail.com  Tue Aug 17 08:57:29 2021
From: norman.barker at gmail.com (Norman Barker)
Date: Tue, 17 Aug 2021 10:57:29 -0500
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <CA+YzLBeWaD2oJO4bavmp+VtFsouj89M4T4XzCyLgSmHRHgTvvw@mail.gmail.com>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
 <CA+YzLBeWaD2oJO4bavmp+VtFsouj89M4T4XzCyLgSmHRHgTvvw@mail.gmail.com>
Message-ID: <CAN_Dn-HZJ2izaQbua45doRvQH1KrRCkgt12C_xsRa7hcfAjUHQ@mail.gmail.com>

+1

Norman

On Tue, Aug 17, 2021 at 10:53 AM Frank Warmerdam <warmerdam at pobox.com>
wrote:

> +1 FrankW !
>
> On Tue, Aug 17, 2021 at 10:33 PM Howard Butler <howard at hobu.co> wrote:
>
>> Dear PSC,
>>
>> As a result of our fundraising activity and development of NumFOCUS as a
>> financial conduit, it is my pleasure to put forward a motion to approve
>> Even Rouault as a contracted GDAL maintainer for the year 2021-2022
>> beginning on August 1st, 2021 and ending July 31st, 2022.
>>
>> Details of the maintenance tasking and duties can be found at the
>> previously approved RFC 83
>> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>>
>> The terms of the contract are for 833 hours at $120/hr USD.
>>
>> Howard
>>
>> PS I will coordinating the contracting activity in my role as the GDAL
>> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
>> Please contact us directly with any comments or concerns.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | +1 650-701-7823
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/8ebf414f/attachment.html>

From sean.gillies at gmail.com  Tue Aug 17 08:57:30 2021
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 17 Aug 2021 09:57:30 -0600
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
Message-ID: <CAOodmJqr9yFdJhBrQwzcSfL5dwYrTzmEFpH0kxDtYvipk1ZCig@mail.gmail.com>

+1 from me. What a great milestone for the project!

On Tue, Aug 17, 2021 at 9:34 AM Howard Butler <howard at hobu.co> wrote:

> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a
> financial conduit, it is my pleasure to put forward a motion to approve
> Even Rouault as a contracted GDAL maintainer for the year 2021-2022
> beginning on August 1st, 2021 and ending July 31st, 2022.
>
> Details of the maintenance tasking and duties can be found at the
> previously approved RFC 83
> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for 833 hours at $120/hr USD.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL
> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
> Please contact us directly with any comments or concerns.
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/d4bd267d/attachment.html>

From nelson.gerald.c at gmail.com  Tue Aug 17 09:02:38 2021
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Tue, 17 Aug 2021 16:02:38 +0000
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <CAOodmJqr9yFdJhBrQwzcSfL5dwYrTzmEFpH0kxDtYvipk1ZCig@mail.gmail.com>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
 <CAOodmJqr9yFdJhBrQwzcSfL5dwYrTzmEFpH0kxDtYvipk1ZCig@mail.gmail.com>
Message-ID: <CO1PR18MB46680F45E63F24A48BD55C47ADFE9@CO1PR18MB4668.namprd18.prod.outlook.com>

I?m not a member of the core group, or even a direct gdal user, so I can?t officially vote, but I am really impressed with how the core group has managed this process. And from a far distance, Even seems like a great choice.

Keep up the good work!
Jerry

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Sean Gillies <sean.gillies at gmail.com>
Date: Tuesday, August 17, 2021 at 9:58 AM
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL maintainer

+1 from me. What a great milestone for the project!

On Tue, Aug 17, 2021 at 9:34 AM Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
Dear PSC,

As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Even Rouault as a contracted GDAL maintainer for the year 2021-2022 beginning on August 1st, 2021 and ending July 31st, 2022.

Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html

The terms of the contract are for 833 hours at $120/hr USD.

Howard

PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.

--
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/5f5afb27/attachment.html>

From szekerest at gmail.com  Tue Aug 17 09:07:30 2021
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 17 Aug 2021 18:07:30 +0200
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
Message-ID: <500884D5-68F3-400D-A64E-B0848D2765F9@gmail.com>

+1

Tamas


> 2021. aug. 17. d?tummal, 17:35 id?pontban Howard Butler <howard at hobu.co> ?rta:
> 
> ?Dear PSC,
> 
> As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Even Rouault as a contracted GDAL maintainer for the year 2021-2022 beginning on August 1st, 2021 and ending July 31st, 2022. 
> 
> Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
> 
> The terms of the contract are for 833 hours at $120/hr USD.
> 
> Howard
> 
> PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From schwehr at gmail.com  Tue Aug 17 11:41:09 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 17 Aug 2021 11:41:09 -0700
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
Message-ID: <CACmBxyvk-b2HyJTfjD89vSqE4F-X04DokE3ya1zfm4=Bm3VArQ@mail.gmail.com>

+1 KurtS

On Tue, Aug 17, 2021 at 8:35 AM Howard Butler <howard at hobu.co> wrote:

> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a
> financial conduit, it is my pleasure to put forward a motion to approve
> Even Rouault as a contracted GDAL maintainer for the year 2021-2022
> beginning on August 1st, 2021 and ending July 31st, 2022.
>
> Details of the maintenance tasking and duties can be found at the
> previously approved RFC 83
> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for 833 hours at $120/hr USD.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL
> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
> Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/ea4b9c8f/attachment.html>

From Matt.Wilkie at yukon.ca  Tue Aug 17 12:29:00 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 17 Aug 2021 19:29:00 +0000
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <CA+YzLBeWaD2oJO4bavmp+VtFsouj89M4T4XzCyLgSmHRHgTvvw@mail.gmail.com>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
 <CA+YzLBeWaD2oJO4bavmp+VtFsouj89M4T4XzCyLgSmHRHgTvvw@mail.gmail.com>
Message-ID: <b87119257da848ca89f5a169e59ace51@yukon.ca>

As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Even Rouault as a contracted GDAL maintainer for the year 2021-2022 beginning on August 1st, 2021 and ending July 31st, 2022.



Excellent news! It?s so encouraging to see a strong measure of stability and future proofing established.

Matt
Geomatics Developer and Administrator | Environment | T 867-667-8133 | Yukon.ca
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210817/aa11a4ca/attachment.html>

From paul.malm at lfv.se  Tue Aug 17 22:24:27 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 18 Aug 2021 05:24:27 +0000
Subject: [gdal-dev] Reading from PNG file in Java from using GDAL
Message-ID: <c72f3cfbb9f74bf389079548b425226b@lfv.se>

I've used gdalwarp.exe to project a tif-file from EPSG:4326 to EPSG:32635 and storing it in the PNG-format:

    gdalwarp.exe -dstalpha -t_srs EPSG:32635 -s_srs EPSG:4326 -if GTiff -of PNG -et 0.125 -r cubicspline -co COMPRESS=LZW -co WORLDFILE=YES H:\somlos_8.tif H:\trans32635.png

Then I try to read that PNG_file in JAVA with GDAL:

       import org.geotools.coverage.grid.GridCoverage2D;
       import org.geotools.coverage.grid.io.AbstractGridFormat;
       import org.geotools.coverage.grid.io.GridCoverage2DReader;
       import org.geotools.coverage.grid.io.GridFormatFinder;
       import org.geotools.factory.Hints;
       import org.geotools.gce.geotiff.GeoTiffFormat;

       public class Test {
          public Test() {
             AbstractGridFormat format = GridFormatFinder.findFormat("H:\\trans32635.png");
             Hints hints=null;;
             GridCoverage2DReader reader = null;
             if (!format.getName().equals("Unknown Format"))
                hints = new Hints();
             if (format instanceof GeoTiffFormat) {
                hints = new Hints(Hints.FORCE_LONGITUDE_FIRST_AXIS_ORDER, Boolean.TRUE);
             }
             try {
                reader = format.getReader("H:\\trans32635.png", hints);
                GridCoverage2D cov = null;
                cov = reader.read(null); // here it breaks
                ...
                ...
             } catch (Exception e1) {
                e1.printStackTrace();
             }
          }
      }
The problem is reading "GridCoverage2D" from the reader "cov = reader.read(null);", where it breaks. It works with the original TIF-file.
The program breaks here:
java.awt.geom.affineTransform.class (public AffineTransform(AffineTransform Tx) { this.m00 = Tx.m00; )
I have the gt-image module and matching .wld, .prj and .png.aux.xml files.
I'm running the JAVA-program on Windows 10 and using GDAL 3.21 and org.geotools 0.0.1-SNAPSHOT.
Any ideas?
Kind regards,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210818/9a7fee6e/attachment.html>

From bradh at frogmouth.net  Tue Aug 17 22:52:22 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 18 Aug 2021 15:52:22 +1000
Subject: [gdal-dev] Reading from PNG file in Java from using GDAL
In-Reply-To: <c72f3cfbb9f74bf389079548b425226b@lfv.se>
References: <c72f3cfbb9f74bf389079548b425226b@lfv.se>
Message-ID: <5620203.Ui8DoVQtgx@audax>

On Wednesday, 18 August 2021 3:24:27 PM AEST paul.malm at lfv.se wrote:
> The problem is reading "GridCoverage2D" from the reader "cov =
> reader.read(null);", where it breaks. It works with the original TIF-file.
> The program breaks here:
> java.awt.geom.affineTransform.class (public AffineTransform(AffineTransform
> Tx) { this.m00 = Tx.m00; ) I have the gt-image module and matching .wld,
> .prj and .png.aux.xml files. 
What is the exception?

Do you have a referencing jar loaded (or in the classpath) - something like 
gt-epsg-hsql ?

Brad





From paul.malm at lfv.se  Wed Aug 18 00:17:17 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 18 Aug 2021 07:17:17 +0000
Subject: [gdal-dev] Reading from PNG file in Java from using GDAL
In-Reply-To: <5620203.Ui8DoVQtgx@audax>
References: <c72f3cfbb9f74bf389079548b425226b@lfv.se>
 <5620203.Ui8DoVQtgx@audax>
Message-ID: <2653e154f002408394cffa126fddd989@lfv.se>

Yes I have gt-epsg-hsql (version 20.2)

-----Ursprungligt meddelande-----
Fr?n: Brad Hards <bradh at frogmouth.net> 
Skickat: den 18 augusti 2021 07:52
Till: gdal-dev at lists.osgeo.org
Kopia: Malm, Paul (Operations AIM) <paul.malm at lfv.se>
?mne: Re: [gdal-dev] Reading from PNG file in Java from using GDAL

Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och vet att inneh?llet ?r s?kert.
On Wednesday, 18 August 2021 3:24:27 PM AEST paul.malm at lfv.se wrote:
> The problem is reading "GridCoverage2D" from the reader "cov = 
> reader.read(null);", where it breaks. It works with the original TIF-file.
> The program breaks here:
> java.awt.geom.affineTransform.class (public 
> AffineTransform(AffineTransform
> Tx) { this.m00 = Tx.m00; ) I have the gt-image module and matching 
> .wld, .prj and .png.aux.xml files.
What is the exception?

Do you have a referencing jar loaded (or in the classpath) - something like gt-epsg-hsql ?

Brad





From mateusz at loskot.net  Wed Aug 18 05:00:23 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 18 Aug 2021 14:00:23 +0200
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
Message-ID: <CABUeae8LEEKO2TUU1zN4VascurCJSyHX60+jJnoWGUmb280hMw@mail.gmail.com>

+1 Mateusz




On Tue, 17 Aug 2021, 17:33 Howard Butler, <howard at hobu.co> wrote:

> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a
> financial conduit, it is my pleasure to put forward a motion to approve
> Even Rouault as a contracted GDAL maintainer for the year 2021-2022
> beginning on August 1st, 2021 and ending July 31st, 2022.
>
> Details of the maintenance tasking and duties can be found at the
> previously approved RFC 83
> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for 833 hours at $120/hr USD.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL
> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
> Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210818/86116a32/attachment.html>

From Matt.Wilkie at yukon.ca  Wed Aug 18 14:08:51 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 18 Aug 2021 21:08:51 +0000
Subject: [gdal-dev] Generating data-only footprints of imagery
In-Reply-To: <ae8d5274f0d14a84b79281f4f2087302@yukon.ca>
References: <ae8d5274f0d14a84b79281f4f2087302@yukon.ca>
Message-ID: <992d0c9a67da4e398a422caddb8a8795@yukon.ca>

Hi Folks,



The standard image footprint mechanism such as that produced by gdaltindex draws a box around the raster but that often includes large nodata areas which we don't care about. Generating polygons of only the data carrying area is something I've often wished for but not devoted the time and attention to solving. This summer I'm very happy to have finally arrived at repeatable solution to the challenge.



I've posted the below in answer to "Creating shapefile showing footprints of Rasters?<https://gis.stackexchange.com/questions/26893/creating-shapefile-showing-footprints-of-rasters/>" on GIS Stack Exchange. After some more refinement I'll also post some of the scripts which I built as part of a larger processing chain. (No promises on how long that might be. I have to work it around my main duties.)



Ensure images have defined nodata. If source images do not, fix with something like one of the below, where 0 or 255 is the supposed-to-be nodata value:

gdal_translate ... -a_nodata 0 ... outimage.vrt

gdal_edit -a_nodata 255 somefile.tif

Create small preview images for faster processing (useful when dealing with multi GB satellite images). Skip this step if you want to match value pixels' boundary precisely. I find using the target resolution -tr parameter or choosing an outsize percentage that approximates 2048 rows/columns works well. Three approaches shown, just use one.

gdal_translate -tr 185 185 vendor_image.tif myimage.tif

gdal_translate -outsize 5% 5% vendor_image.tif myimage.tif

gdal_translate -outsize 2048 0 vendor_image.tif myimage.tif

Force pixel values to range between 1 and 255, then rescale again so that data = 100 and all else are nodata. Use vrt<https://gis.stackexchange.com/questions/tagged/vrt> to not conserve storage and be much faster also. The reason for scaling twice is to work around the problem of not knowing what range the values might be when we start. There's no meaning to 100 other than by default it draws as a midtone grey, in contrast to the traditional 1 which is visually indistinguishable from black.

gdal_translate -scale -ot byte myimage.tif myimage_8bit.vrt

gdal_translate -scale 1 255 100 100 myimage_8bit.vrt myimage_data_mask.vrt

Create a polygon of the data-only area image mask for all connected regions of pixels in the raster sharing a common pixel value, using 8-way connectedness.:

gdal_polygonize -8 myimage_data_mask.vrt .\footprints\myimage_data.shp



Enjoy! Pink is the normal extents area as created by gdaltindex and similar approaches. Black outline is our new data-only polygon.

Image: https://i.stack.imgur.com/Qv1im.png <https://i.stack.imgur.com/Qv1im.png>

Windows CMD shell bulk processing example

cd .\previews

md .\byte

md .\data-only

for %a in (*.tif) do gdal_translate -scale -ot byte %a .\byte\%~na.vrt

for %a in (byte\*.vrt) do gdal_translate -scale 1 255 100 100 %a .\data-only\%~na.vrt

for %a in (data-only\*.vrt) do call gdal_polygonize -8 %a %~na.shp

Assemble the footprints you've created by the hundred into a single overview index. {AUTO_NAME} populates a field with the name of the source file for that polygon. See ogrmerge doc page<https://gdal.org/programs/ogrmerge.html> for other options.

ogrmerge -single ^

  -src_layer_field_name Image_Name ^

  -src_layer_field_content {AUTO_NAME} ^

  -o ..\index_footprint_data.shp ^

  .\data-only\*.shp

Image:<https://i.stack.imgur.com/DbaQU.png> https://i.stack.imgur.com/DbaQU.png

________________________________

Thank you https://gis.stackexchange.com/a/139045/108 for rescaling data-only to single pixel value tip. There are other ways of reaching the same end using gdal_calc but I find this scale approach is easier to wrap my head around.

I think I learned about rescaling without knowing the input values ahead of time from Robert Simmon but have lost the reference. You can't go wrong by consulting his General Introduction to GDAL<https://medium.com/planet-stories/a-gentle-introduction-to-gdal-part-4-working-with-satellite-data-d3835b5e2971> series however.





Hopefully this will be useful for others also,

cheers.


Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210818/a32b68f3/attachment.html>

From cdelancy at blackfangtechnologies.com  Wed Aug 18 16:21:54 2021
From: cdelancy at blackfangtechnologies.com (Craig Delancy)
Date: Wed, 18 Aug 2021 23:21:54 +0000
Subject: [gdal-dev] Windows build errors GDAL 3.3.1
Message-ID: <CH2PR17MB3733E17A43FF84213BDC4837C7FF9@CH2PR17MB3733.namprd17.prod.outlook.com>

When pulling and building the latest release from GitHub, there are several unresolved externals that halt the build.

1>   Creating library gdal_translate.lib and object gdal_translate.exp
1>gdal_d.lib(eedacommon.obj) : error LNK2019: unresolved external symbol "bool __cdecl CPLIsMachinePotentiallyGCEInstance(void)" (?CPLIsMachinePotentiallyGCEInstance@@YA_NXZ) referenced in function "protected: char * * __cdecl GDALEEDABaseDataset::GetBaseHTTPOptions(void)" (?GetBaseHTTPOptions at GDALEEDABaseDataset@@IEAAPEAPEADXZ)
1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol "void * __cdecl CPLHTTPSetOptions(void *,char const *,char const * const *)" (?CPLHTTPSetOptions@@YAPEAXPEAXPEBDPEBQEBD at Z) referenced in function "void __cdecl WMSHTTPInitializeRequest(struct WMSHTTPRequest *)" (?WMSHTTPInitializeRequest@@YAXPEAUWMSHTTPRequest@@@Z)
1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol "void * __cdecl CPLHTTPIgnoreSigPipe(void)" (?CPLHTTPIgnoreSigPipe@@YAPEAXXZ) referenced in function "enum CPLErr __cdecl WMSHTTPFetchMulti(struct WMSHTTPRequest *,int)" (?WMSHTTPFetchMulti@@YA?AW4CPLErr@@PEAUWMSHTTPRequest@@H at Z)
1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol "void __cdecl CPLHTTPRestoreSigPipeHandler(void *)" (?CPLHTTPRestoreSigPipeHandler@@YAXPEAX at Z) referenced in function "enum CPLErr __cdecl WMSHTTPFetchMulti(struct WMSHTTPRequest *,int)" (?WMSHTTPFetchMulti@@YA?AW4CPLErr@@PEAUWMSHTTPRequest@@H at Z)
1>gdal_translate.exe : fatal error LNK1120: 4 unresolved externals
1>NMAKE : fatal error U1077: 'cl' : return code '0x2'
1>Stop.

Is it possible I have misconfigured something in the build process?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210818/ca4724f4/attachment-0001.html>

From even.rouault at spatialys.com  Wed Aug 18 16:24:54 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Aug 2021 01:24:54 +0200
Subject: [gdal-dev] Windows build errors GDAL 3.3.1
In-Reply-To: <CH2PR17MB3733E17A43FF84213BDC4837C7FF9@CH2PR17MB3733.namprd17.prod.outlook.com>
References: <CH2PR17MB3733E17A43FF84213BDC4837C7FF9@CH2PR17MB3733.namprd17.prod.outlook.com>
Message-ID: <e5ced199-7e4e-a274-289a-0b99c1ab0191@spatialys.com>

Craig,

did you update an existing git checkout ? If so, due to the lack of 
header dependency tracking in our nmake & GNUmakefile build systems, you 
generally have to "nmake /f makefile.vc clean" (or "make clean" on Unix) 
before rebuilding.

Even

Le 19/08/2021 ? 01:21, Craig Delancy a ?crit?:
>
> When pulling and building the latest release from GitHub, there are 
> several unresolved externals that halt the build.
>
> 1>?? Creating library gdal_translate.lib and object gdal_translate.exp
>
> 1>gdal_d.lib(eedacommon.obj) : error LNK2019: unresolved external 
> symbol "bool __cdecl CPLIsMachinePotentiallyGCEInstance(void)" 
> (?CPLIsMachinePotentiallyGCEInstance@@YA_NXZ) referenced in function 
> "protected: char * * __cdecl 
> GDALEEDABaseDataset::GetBaseHTTPOptions(void)" 
> (?GetBaseHTTPOptions at GDALEEDABaseDataset@@IEAAPEAPEADXZ)
>
> 1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol 
> "void * __cdecl CPLHTTPSetOptions(void *,char const *,char const * 
> const *)" (?CPLHTTPSetOptions@@YAPEAXPEAXPEBDPEBQEBD at Z) referenced in 
> function "void __cdecl WMSHTTPInitializeRequest(struct WMSHTTPRequest 
> *)" (?WMSHTTPInitializeRequest@@YAXPEAUWMSHTTPRequest@@@Z)
>
> 1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol 
> "void * __cdecl CPLHTTPIgnoreSigPipe(void)" 
> (?CPLHTTPIgnoreSigPipe@@YAPEAXXZ) referenced in function "enum CPLErr 
> __cdecl WMSHTTPFetchMulti(struct WMSHTTPRequest *,int)" 
> (?WMSHTTPFetchMulti@@YA?AW4CPLErr@@PEAUWMSHTTPRequest@@H at Z)
>
> 1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol 
> "void __cdecl CPLHTTPRestoreSigPipeHandler(void *)" 
> (?CPLHTTPRestoreSigPipeHandler@@YAXPEAX at Z) referenced in function 
> "enum CPLErr __cdecl WMSHTTPFetchMulti(struct WMSHTTPRequest *,int)" 
> (?WMSHTTPFetchMulti@@YA?AW4CPLErr@@PEAUWMSHTTPRequest@@H at Z)
>
> 1>gdal_translate.exe : fatal error LNK1120: 4 unresolved externals
>
> 1>NMAKE : fatal error U1077: 'cl' : return code '0x2'
>
> 1>Stop.
>
> Is it possible I have misconfigured something in the build process?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210819/334383de/attachment.html>

From bessoh2 at uw.edu  Thu Aug 19 16:04:49 2021
From: bessoh2 at uw.edu (Hannah Besso)
Date: Thu, 19 Aug 2021 16:04:49 -0700
Subject: [gdal-dev] Define and transform a GeoTiff with a compound and
 projected CRS
Message-ID: <CAC9j2qHfg4C5p_uH6uKYbbX677GrkKGJtXYOwd0xjNE_j2SQDg@mail.gmail.com>

I have two elevation datasets I need to compare: one is an airborne
lidar-derived DTM (resolution 1m) and the other is spaceborne
altimeter-derived elevation points from NASA's ICESat-2. These two datasets
are in different datums and projections. The lidar data has detailed
metadata with this info:

Horizontal Datum: NAD83(2011)(EPOCH:2010.0000)
Horizontal Projection: UTM Zone 12 North
Vertical Datum: NAVD88
Geoid Model: Geoid 12B
Horizontal Units: Meters
Vertical Units: Meters

While the ICESat-2 data is given as height above the WGS84 ellipsoid
(ITRF14 reference frame).

*My ultimate goal is to get the airborne lidar into the same CRS as the
spaceborne ICESat-2 data. This involves two steps: 1) converting the lidar
data from ASCII to GeoTiff with the correctly defined CRS, and 2)
transforming that GeoTiff to the same CRS as the ICESat-2 data. What is the
best way to do this?*

Here are the steps I've taken from my most recent attempt to perform these
tasks:

1) So far I have used gdal_translate in python to convert from ASCII to
GeoTiff, but am having issues with defining the correct CRS. I tried using
a custom WKT I wrote using a text editor to combine two existing WKTs, but
this doesn't seem to be working. My custom WKT tries to combine the info
from EPSG:26912 and 4979, and reads:

COMPD_CS["NAD83 / UTM zone 12N + NAVD88 height",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4269"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator (3D)"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-111],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    AUTHORITY["EPSG","26912"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    VERT_CS["NAVD88 height",
        VERT_DATUM["North American Vertical Datum 1988",2005,
            AUTHORITY["EPSG","5103"],

EXTENSION["PROJ4_GRIDS","g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx"]],
        UNIT["metre",1,
            AUTHORITY["EPSG","9001"]],
        AXIS["Up",UP],
        AUTHORITY["EPSG","5703"]],
    AUTHORITY["EPSG","5498"]]

The code I have been using to run gdal_translate is:

*!gdal_translate -of "GTiff" -a_srs '26912_5498.prj' '0115_DTM_NoSnow.asc'
'0115_DTM_NoSnow_26912_5498.tif'*

where '26912_5498.prj' is the name of the WKT text file that I pasted in
above. This is my first time trying to write one of these WKT files, so I
would not be surprised if there is an error in this file. The command runs,
outputting a file named '0115_DTM_NoSnow_26912_5498.tif'.
Running *!gdalinfo '0115_DTM_NoSnow_26912_5498.tif' *outputs this
information, which seems to be missing info about the UTM projection
(specifically the projection parameters):

Driver: GTiff/GeoTIFF
Files: 0115_DTM_NoSnow_26912_5498.tif
Size is 3398, 3388
Coordinate System is:
COMPOUNDCRS["NAD83 / UTM zone 12N + NAVD88 height",
    GEOGCRS["NAD83",
        DATUM["North American Datum 1983",
            ELLIPSOID["GRS 1980",6378137,298.257222101004,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        CS[ellipsoidal,2],
            AXIS["geodetic latitude (Lat)",north,
                ORDER[1],
                ANGLEUNIT["degree",0.0174532925199433]],
            AXIS["geodetic longitude (Lon)",east,
                ORDER[2],
                ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",4269]],
    VERTCRS["NAVD88 height",
        VDATUM["North American Vertical Datum 1988"],
        CS[vertical,1],
            AXIS["gravity-related height",up,
                LENGTHUNIT["metre",1]],
        ID["EPSG",5703]]]
Data axis to CRS axis mapping: 2,1,3
Origin = (579016.799999999930151,5212972.400000000372529)
Pixel Size = (0.300000000000000,-0.300000000000000)
Metadata:
  AREA_OR_POINT=Point
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  579016.800, 5212972.400)
Lower Left  (  579016.800, 5211956.000)
Upper Right (  580036.200, 5212972.400)
Lower Right (  580036.200, 5211956.000)
Center      (  579526.500, 5212464.200)
Band 1 Block=3398x1 Type=Float64, ColorInterp=Gray
  NoData Value=0
  Unit Type: metre


2) I then used gdalwarp (again using a cell in Python) to try to convert to
WGS84 using this code:
*!gdalwarp -s_srs '26912_5498.prj' -t_srs 'EPSG:4979'
'0115_DTM_NoSnow_26912_5498.tif' '0115_DTM_NoSnow_4979.tif' *
Which runs, but when I output the bounds of the new GeoTif, the coordinates
appear to still be in UTM meters:

*src2 = rio.open('0115_DTM_NoSnow_4979.tif')*
*src2.bounds*

BoundingBox(left=579016.7999999999, bottom=5211956.0,
right=580036.2000000001, top=5212972.4)

So clearly something is not working correctly. Any help or insight is
appreciated!
Thank you,
Hannah
-- 
_____________________________________
*Hannah Besso*,  *she/her/hers*
Graduate Student, Hydrology & Hydrodynamics
Civil and Environmental Engineering
University of Washington | Seattle, WA

bessoh2 at uw.edu <lumbraca at uw.edu> | (509) 823-0946
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210819/50d12a6e/attachment.html>

From cdelancy at blackfangtechnologies.com  Thu Aug 19 22:15:45 2021
From: cdelancy at blackfangtechnologies.com (Craig Delancy)
Date: Fri, 20 Aug 2021 05:15:45 +0000
Subject: [gdal-dev] Windows build errors GDAL 3.3.1
Message-ID: <CH2PR17MB373362B53A8BE244A1CB4D28C7C19@CH2PR17MB3733.namprd17.prod.outlook.com>

Running the command fixed the problem and the build is now successful. Thank you.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of gdal-dev-request at lists.osgeo.org
Sent: Thursday, August 19, 2021 3:00 PM
To: gdal-dev at lists.osgeo.org
Subject: gdal-dev Digest, Vol 207, Issue 14

Send gdal-dev mailing list submissions to
	gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
	gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
	gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. Re: Windows build errors GDAL 3.3.1 (Even Rouault)


----------------------------------------------------------------------

Message: 1
Date: Thu, 19 Aug 2021 01:24:54 +0200
From: Even Rouault <even.rouault at spatialys.com>
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Windows build errors GDAL 3.3.1
Message-ID: <e5ced199-7e4e-a274-289a-0b99c1ab0191 at spatialys.com>
Content-Type: text/plain; charset="windows-1252"; Format="flowed"

Craig,

did you update an existing git checkout ? If so, due to the lack of header dependency tracking in our nmake & GNUmakefile build systems, you generally have to "nmake /f makefile.vc clean" (or "make clean" on Unix) before rebuilding.

Even

Le 19/08/2021 ? 01:21, Craig Delancy a ?crit?:
>
> When pulling and building the latest release from GitHub, there are 
> several unresolved externals that halt the build.
>
> 1>?? Creating library gdal_translate.lib and object gdal_translate.exp
>
> 1>gdal_d.lib(eedacommon.obj) : error LNK2019: unresolved external
> symbol "bool __cdecl CPLIsMachinePotentiallyGCEInstance(void)" 
> (?CPLIsMachinePotentiallyGCEInstance@@YA_NXZ) referenced in function
> "protected: char * * __cdecl
> GDALEEDABaseDataset::GetBaseHTTPOptions(void)" 
> (?GetBaseHTTPOptions at GDALEEDABaseDataset@@IEAAPEAPEADXZ)
>
> 1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol
> "void * __cdecl CPLHTTPSetOptions(void *,char const *,char const * 
> const *)" (?CPLHTTPSetOptions@@YAPEAXPEAXPEBDPEBQEBD at Z) referenced in 
> function "void __cdecl WMSHTTPInitializeRequest(struct WMSHTTPRequest 
> *)" (?WMSHTTPInitializeRequest@@YAXPEAUWMSHTTPRequest@@@Z)
>
> 1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol
> "void * __cdecl CPLHTTPIgnoreSigPipe(void)" 
> (?CPLHTTPIgnoreSigPipe@@YAPEAXXZ) referenced in function "enum CPLErr 
> __cdecl WMSHTTPFetchMulti(struct WMSHTTPRequest *,int)"
> (?WMSHTTPFetchMulti@@YA?AW4CPLErr@@PEAUWMSHTTPRequest@@H at Z)
>
> 1>gdal_d.lib(gdalhttp.obj) : error LNK2019: unresolved external symbol
> "void __cdecl CPLHTTPRestoreSigPipeHandler(void *)" 
> (?CPLHTTPRestoreSigPipeHandler@@YAXPEAX at Z) referenced in function 
> "enum CPLErr __cdecl WMSHTTPFetchMulti(struct WMSHTTPRequest *,int)"
> (?WMSHTTPFetchMulti@@YA?AW4CPLErr@@PEAUWMSHTTPRequest@@H at Z)
>
> 1>gdal_translate.exe : fatal error LNK1120: 4 unresolved externals
>
> 1>NMAKE : fatal error U1077: 'cl' : return code '0x2'
>
> 1>Stop.
>
> Is it possible I have misconfigured something in the build process?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

--
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210819/334383de/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------

End of gdal-dev Digest, Vol 207, Issue 14
*****************************************

From even.rouault at spatialys.com  Fri Aug 20 05:25:54 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Aug 2021 14:25:54 +0200
Subject: [gdal-dev] Define and transform a GeoTiff with a compound and
 projected CRS
In-Reply-To: <CAC9j2qHfg4C5p_uH6uKYbbX677GrkKGJtXYOwd0xjNE_j2SQDg@mail.gmail.com>
References: <CAC9j2qHfg4C5p_uH6uKYbbX677GrkKGJtXYOwd0xjNE_j2SQDg@mail.gmail.com>
Message-ID: <75b03e7c-f849-539e-369d-a976590e9b46@spatialys.com>

Hannah,

there are 2 issues.

* First your WKT is indeed invalid. Instead of using a WKT, as there are 
EPSG codes for the horizontal and vertical part, you could just use 
gdal_translate -a_srs EPSG:6341+5703? (EPSG:6341 is "NAD83(2011) /
UTM zone 12N", which is slightly more appropriate given the information 
you give in introduction than EPSG:26912 which uses the older NAD83 datum)

You can get the correct WKT with:

$ gdalsrsinfo EPSG:6341+5703 -o WKT1

COMPD_CS["NAD83(2011) / UTM zone 12N + NAVD88 height",
 ??? PROJCS["NAD83(2011) / UTM zone 12N",
 ??????? GEOGCS["NAD83(2011)",
 ??????????? DATUM["NAD83_National_Spatial_Reference_System_2011",
 ??????????????? SPHEROID["GRS 1980",6378137,298.257222101,
 ??????????????????? AUTHORITY["EPSG","7019"]],
 ??????????????? AUTHORITY["EPSG","1116"]],
 ??????????? PRIMEM["Greenwich",0,
 ??????????????? AUTHORITY["EPSG","8901"]],
 ??????????? UNIT["degree",0.0174532925199433,
 ??????????????? AUTHORITY["EPSG","9122"]],
 ??????????? AUTHORITY["EPSG","6318"]],
 ??????? PROJECTION["Transverse_Mercator"],
 ??????? PARAMETER["latitude_of_origin",0],
 ??????? PARAMETER["central_meridian",-111],
 ??????? PARAMETER["scale_factor",0.9996],
 ??????? PARAMETER["false_easting",500000],
 ??????? PARAMETER["false_northing",0],
 ??????? UNIT["metre",1,
 ??????????? AUTHORITY["EPSG","9001"]],
 ??????? AXIS["Easting",EAST],
 ??????? AXIS["Northing",NORTH],
 ??????? AUTHORITY["EPSG","6341"]],
 ??? VERT_CS["NAVD88 height",
 ??????? VERT_DATUM["North American Vertical Datum 1988",2005,
 ??????????? AUTHORITY["EPSG","5103"]],
 ??????? UNIT["metre",1,
 ??????????? AUTHORITY["EPSG","9001"]],
 ??????? AXIS["Gravity-related height",UP],
 ??????? AUTHORITY["EPSG","5703"]]]

* For the gdalwarp transformation, when wanting to apply vertical 
transformation, the source and target CRS must be 3D, which is the case 
in your invokation (once previous issue has been addressed), but there's 
a strong limitation in the way gdalwarp operates in that mode. The CRS 
definition that use orthometric heights (here EPSG:6341+5703) must lso 
contain an explicit EXTENSION["PROJ4_GRIDS"] node (if using WK1) or, a 
+geoidgrids= if using a PROJ.4 style string.

I'm assuming you use PROJ 7 or later (to be able to use GeoTIFF grids) 
and have the grids at 
https://github.com/OSGeo/PROJ-data/tree/master/us_noaa installed in the 
resource directory of PROJ (for example by unzipping the content of 
http://download.osgeo.org/proj/proj-data-1.7.zip in it)

Then you can create a input.wkt file with the following content, which 
is the same as above but by adding the explicit PROJ4_GRIDS node:

COMPD_CS["NAD83(2011) / UTM zone 12N + NAVD88 height",
 ??? PROJCS["NAD83(2011) / UTM zone 12N",
 ??????? GEOGCS["NAD83(2011)",
 ??????????? DATUM["NAD83_National_Spatial_Reference_System_2011",
 ??????????????? SPHEROID["GRS 1980",6378137,298.257222101,
 ??????????????????? AUTHORITY["EPSG","7019"]],
 ??????????????? AUTHORITY["EPSG","1116"]],
 ??????????? PRIMEM["Greenwich",0,
 ??????????????? AUTHORITY["EPSG","8901"]],
 ??????????? UNIT["degree",0.0174532925199433,
 ??????????????? AUTHORITY["EPSG","9122"]],
 ??????????? AUTHORITY["EPSG","6318"]],
 ??????? PROJECTION["Transverse_Mercator"],
 ??????? PARAMETER["latitude_of_origin",0],
 ??????? PARAMETER["central_meridian",-111],
 ??????? PARAMETER["scale_factor",0.9996],
 ??????? PARAMETER["false_easting",500000],
 ??????? PARAMETER["false_northing",0],
 ??????? UNIT["metre",1,
 ??????????? AUTHORITY["EPSG","9001"]],
 ??????? AXIS["Easting",EAST],
 ??????? AXIS["Northing",NORTH],
 ??????? AUTHORITY["EPSG","6341"]],
 ??? VERT_CS["NAVD88 height",
 ??????? VERT_DATUM["North American Vertical Datum 1988",2005,
 ??????????? AUTHORITY["EPSG","5103"],
 ??????????? EXTENSION["PROJ4_GRIDS","us_noaa_g2012bu0.tif"]],
 ??????? UNIT["metre",1,
 ??????????? AUTHORITY["EPSG","9001"]],
 ??????? AXIS["Gravity-related height",UP],
 ??????? AUTHORITY["EPSG","5703"]]]

You can check with gdalsrsinfo input.wkt that it is correctly understood 
(by default you'll see the WKT2 formulation of it, which is more 
verbose, in particular in its expression of the transformation between 
orthometric and ellipsoidal heights)

So your gdalwarp invokation would be something like:

gdalwarp -overwrite -s_srs input.wkt -t_srs EPSG:4979

If you add "--debug on", you'll see a trace like "GDAL: 
GDALOpen(/path/to/us_noaa_g2012bu0.tif, this=......) succeeds as GTiff." 
showing that the vertical shift grid is used.

Pedantic note: the relationship between NAD83(2011) and WGS 84 is poorly 
known, at least not well captured in the entries of the proj.db 
database. Basically the results you'll get will be assuming that 
NAD83(2011) and WGS 84 are equivalent. Hard to say which accuracy you'll 
really get in that transformation.

Note: I actually see that you mention ITRF2014. So a better match for 
the target CRS would be EPSG:4912.? "projinfo -s EPSG:6341+5703 -t 
EPSG:4912 --spatial-test intersects" shows that more accurate 
transformations are available than by using the generic WGS 84 
EPSG:4979. They are time dependent though, so for best precision you'd 
need to specify a coordinate epoch, but I'm probably digressing a bit 
too far...

Best regards,

Even

Le 20/08/2021 ? 01:04, Hannah Besso a ?crit?:
> I have two elevation datasets I need to compare: one is an airborne 
> lidar-derived DTM (resolution 1m) and the other is spaceborne 
> altimeter-derived elevation points from NASA's ICESat-2. These two 
> datasets are in different datums and projections. The lidar data has 
> detailed metadata with this info:
>
> Horizontal Datum: NAD83(2011)(EPOCH:2010.0000)
> Horizontal Projection: UTM Zone 12 North
> Vertical Datum: NAVD88
> Geoid Model: Geoid 12B
> Horizontal Units: Meters
> Vertical Units: Meters
>
> While the ICESat-2 data is given as height above the WGS84 ellipsoid 
> (ITRF14 reference frame).
>
> *My ultimate goal is to get the airborne lidar into the same CRS as 
> the spaceborne ICESat-2 data. This involves two steps: 1) 
> converting?the lidar data from ASCII to GeoTiff with the correctly 
> defined CRS, and 2) transforming that GeoTiff to the same CRS as the 
> ICESat-2 data. What is the best way to do this?*
>
> Here are the steps I've taken from my most recent attempt to perform 
> these tasks:
>
> 1) So far I have used gdal_translate in python to convert from ASCII 
> to GeoTiff, but am having issues with defining the correct CRS. I 
> tried using a custom WKT I wrote using a text editor to combine two 
> existing WKTs, but this doesn't seem to be working. My custom WKT 
> tries to combine the info from EPSG:26912 and 4979, and reads:
>
> COMPD_CS["NAD83 / UTM zone 12N + NAVD88 height",
> ? ? GEOGCS["NAD83",
> ? ? ? ? DATUM["North_American_Datum_1983",
> ? ? ? ? ? ? SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ? ? ? AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ? AUTHORITY["EPSG","6269"]],
> ? ? ? ? PRIMEM["Greenwich",0,
> ? ? ? ? ? ? AUTHORITY["EPSG","8901"]],
> ? ? ? ? UNIT["degree",0.01745329251994328,
> ? ? ? ? ? ? AUTHORITY["EPSG","9122"]],
> ? ? ? ? AUTHORITY["EPSG","4269"]],
> ? ? UNIT["metre",1,
> ? ? ? ? AUTHORITY["EPSG","9001"]],
> ? ? PROJECTION["Transverse_Mercator (3D)"],
> ? ? PARAMETER["latitude_of_origin",0],
> ? ? PARAMETER["central_meridian",-111],
> ? ? PARAMETER["scale_factor",0.9996],
> ? ? PARAMETER["false_easting",500000],
> ? ? PARAMETER["false_northing",0],
> ? ? AUTHORITY["EPSG","26912"],
> ? ? AXIS["Easting",EAST],
> ? ? AXIS["Northing",NORTH],
> ? ? VERT_CS["NAVD88 height",
> ? ? ? ? VERT_DATUM["North American Vertical Datum 1988",2005,
> ? ? ? ? ? ? AUTHORITY["EPSG","5103"],
> EXTENSION["PROJ4_GRIDS","g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx"]],
> ? ? ? ? UNIT["metre",1,
> ? ? ? ? ? ? AUTHORITY["EPSG","9001"]],
> ? ? ? ? AXIS["Up",UP],
> ? ? ? ? AUTHORITY["EPSG","5703"]],
> ? ? AUTHORITY["EPSG","5498"]]
>
> The code I have been using to run gdal_translate is:
>
>     /!gdal_translate -of "GTiff" -a_srs '26912_5498.prj'
>     '0115_DTM_NoSnow.asc' '0115_DTM_NoSnow_26912_5498.tif'/
>
> where '26912_5498.prj' is the name of the WKT text file that I pasted 
> in above. This is my first time trying to write one of these WKT 
> files, so I would not be surprised if there is an error in this file. 
> The command runs, outputting a file named 
> '0115_DTM_NoSnow_26912_5498.tif'.
> Running /!gdalinfo?'0115_DTM_NoSnow_26912_5498.tif' /outputs this 
> information, which seems to be missing info about the UTM projection 
> (specifically the projection parameters):
> Driver: GTiff/GeoTIFF
> Files: 0115_DTM_NoSnow_26912_5498.tif
> Size is 3398, 3388
> Coordinate System is:
> COMPOUNDCRS["NAD83 / UTM zone 12N + NAVD88 height",
>      GEOGCRS["NAD83",
>          DATUM["North American Datum 1983",
>              ELLIPSOID["GRS 1980",6378137,298.257222101004,
>                  LENGTHUNIT["metre",1]]],
>          PRIMEM["Greenwich",0,
>              ANGLEUNIT["degree",0.0174532925199433]],
>          CS[ellipsoidal,2],
>              AXIS["geodetic latitude (Lat)",north,
>                  ORDER[1],
>                  ANGLEUNIT["degree",0.0174532925199433]],
>              AXIS["geodetic longitude (Lon)",east,
>                  ORDER[2],
>                  ANGLEUNIT["degree",0.0174532925199433]],
>          ID["EPSG",4269]],
>      VERTCRS["NAVD88 height",
>          VDATUM["North American Vertical Datum 1988"],
>          CS[vertical,1],
>              AXIS["gravity-related height",up,
>                  LENGTHUNIT["metre",1]],
>          ID["EPSG",5703]]]
> Data axis to CRS axis mapping: 2,1,3
> Origin = (579016.799999999930151,5212972.400000000372529)
> Pixel Size = (0.300000000000000,-0.300000000000000)
> Metadata:
>    AREA_OR_POINT=Point
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  579016.800, 5212972.400)
> Lower Left  (  579016.800, 5211956.000)
> Upper Right (  580036.200, 5212972.400)
> Lower Right (  580036.200, 5211956.000)
> Center      (  579526.500, 5212464.200)
> Band 1 Block=3398x1 Type=Float64, ColorInterp=Gray
>    NoData Value=0
>    Unit Type: metre
>
> 2) I then used gdalwarp (again using a cell in Python) to try to 
> convert to WGS84 using this code:
> /!gdalwarp -s_srs '26912_5498.prj' -t_srs 'EPSG:4979' 
> '0115_DTM_NoSnow_26912_5498.tif' '0115_DTM_NoSnow_4979.tif' /
> Which runs, but when I output the bounds of the new GeoTif, the 
> coordinates appear to still be in UTM meters:
> /src2 = rio.open('0115_DTM_NoSnow_4979.tif')
> /
> /src2.bounds/
> BoundingBox(left=579016.7999999999, bottom=5211956.0, right=580036.2000000001, top=5212972.4)
> So clearly something is not working correctly. Any help or insight is 
> appreciated!
> Thank you,
> Hannah
> -- 
> _____________________________________
> *Hannah Besso*, /she/her/hers/
> Graduate Student, Hydrology & Hydrodynamics
> Civil and Environmental Engineering
> University of Washington | Seattle, WA
>
> bessoh2 at uw.edu <mailto:lumbraca at uw.edu>?| (509) 823-0946
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210820/19ad53be/attachment-0001.html>

From kreve at sdfe.dk  Fri Aug 20 07:37:10 2021
From: kreve at sdfe.dk (Kristian Evers)
Date: Fri, 20 Aug 2021 14:37:10 +0000
Subject: [gdal-dev] Custom vertical transformations
Message-ID: <d75bf232b8f347c49b858cd484786632@sdfe.dk>

Hi list,

I am trying to apply a custom vertical transformation to a grid using gdalwarp and am struggling a bit to get the results I want. It's entirely possible I am trying something not within the capabilities of gdalwarp but I am sure someone here can help me figure that out.

I am devising a deformation model transformation that is meant to adjust terrain heights over a certain time period. The general idea here is to predict the changes in the terrain in the future based on various information like isostatic uplift and land subsidence. I have this information available as gridded ground motion velocities. For now though I am just concerned about making a proof-of-concept transformation and subsequent terrain adjustment using PROJ and GDAL. I've got the PROJ part figured out but need a bit of help to do what I want with GDAL.

My transformation is a using the PROJ "defmodel" operation. My proof-of-concept is available in this repository: https://github.com/kbevers/dk2100. For now it's just a dummy that uses the same deformation grid twice and applies a correction to the input height value. An example looks like this:

echo 687071.4391 6210141.3267 0 2025 | cct +proj=pipeline +step +proj=utm +zone=32 +inv +step \
+proj=defmodel +model=./defmodel.json +step +proj=utm +zone=32
  687071.4391   6210141.3267        6.0000     2025.0000

The UTM steps surrounding the defmodel accomodate that the grids I want to transform have horizontal coordinates registered as EPSG:25832. Ideally I want this to be a time-dependent transformation but for now I am just working with simple constant offsets.

When using the above transformation with gdalwarp I am presented with an error:

gdalwarp -ct "+proj=pipeline +step +proj=utm +zone=32 +inv +step +proj=defmodel +model=./defmodel.json +step +proj=utm +zone=32" \ DHYMSEA_1km_6150_542.tif out.tif
ERROR 1: Too many points (2601 out of 2601) failed to transform, unable to compute output bounds.

The immediate question is "what am I missing"? I suppose I either have some errors in the transformation setup or am missing some command line switches. Any guidance is appreciated. The next question is, if I turn the above transformation into a time-depending transformation, would I be able to use that with gdalwarp? I see GDAL 3.4 has some switches for applying coordinate epochs but haven't been able to test them since I don't have version 3.4 readily available at the moment.

Best regards,
Kristian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210820/e02e1d31/attachment.html>

From even.rouault at spatialys.com  Fri Aug 20 08:20:56 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Aug 2021 17:20:56 +0200
Subject: [gdal-dev] Custom vertical transformations
In-Reply-To: <d75bf232b8f347c49b858cd484786632@sdfe.dk>
References: <d75bf232b8f347c49b858cd484786632@sdfe.dk>
Message-ID: <3e9c7739-ddcb-eedf-f58f-b295a92f9737@spatialys.com>

Kristian,

your question kind of intersects 
https://lists.osgeo.org/pipermail/gdal-dev/2021-August/054529.html

Two part answer:

A) I guess that there's an issue with axis order and units in your 
pipeline. In particular if your DHYMSEA_1km_6150_542.tif has a EPSG 
geographic CRS set, then the axis order of the coordinates that will be 
provided to PROJ will be latitude, longitude in degrees, so you likely 
need to change it to add an initial conversion "+step +proj=unitconvert 
+xy_in=deg +xy_out=rad +step +proj=axisswap +order=2,1"

And you likely also need to add a final symetric operation at the end of 
the string: "+step +proj=unitconvert +xy_in=rad +xy_out=deg +step 
+proj=axisswap +order=2,1"

and adding -t_srs EPSG:XXXX will probably make GDAL happier too (the -ct 
pipeline will be the one actually used even if you specify -s_srs and 
-t_srs)

Don't forget to add -overwrite if you don't erase your target file 
between each attempt.

B) Now... despite all the above, you won't get the result you expect 
(you should get a no-op when that "works"). The reason is that the 
adjustment of values using the vertical transform done in GDAL is 
implemented as a kind of a hack. gdalwarp is fundamentally a 2D 
coordinate transformation engine. The 3D mode actually works by warping 
a PROJ vertical grid as an intermediate raster, and adding the pixel 
values to the result of the 2D warping (hope that makes sense). So that 
can't work for an arbitrary pipeline as provided with low-level -ct, 
which is only used for the 2D transformation of pixel coordinates. It 
would be certainly desirable to have a way of having generic vertical 
transformation of a grid but that won't be a 5-minute fix. Please file 
an enhancement ticket about that, so that we can at least track that. 
The time-dependent aspect should work once the previous bigger issue is 
addressed.

Regarding your immediate issue, the workaround I see would be that you 
use PROJ to create a regular grid that contains the vertical correction, 
use gdalwarp to transform it to the exact extent and resolution of the 
result of your 2D-only gdalwarp, and finally use gdal_calc to sum the two.

Even

Le 20/08/2021 ? 16:37, Kristian Evers via gdal-dev a ?crit?:
>
> Hi list,
>
> I am trying to apply a custom vertical transformation to a grid using 
> gdalwarp and am struggling a bit to get the results I want. It?s 
> entirely possible I am trying something not within the capabilities of 
> gdalwarp but I am sure someone here can help me figure that out.
>
> I am devising a deformation model transformation that is meant to 
> adjust terrain heights over a certain time period. The general idea 
> here is to predict the changes in the terrain in the future based on 
> various information like isostatic uplift and land subsidence. I have 
> this information available as gridded ground motion velocities. For 
> now though I am just concerned about making a proof-of-concept 
> transformation and subsequent terrain adjustment using PROJ and GDAL. 
> I?ve got the PROJ part figured out but need a bit of help to do what I 
> want with GDAL.
>
> My transformation is a using the PROJ ?defmodel? operation. My 
> proof-of-concept is available in this repository: 
> https://github.com/kbevers/dk2100 <https://github.com/kbevers/dk2100>. 
> For now it?s just a dummy that uses the same deformation grid twice 
> and applies a correction to the input height value. An example looks 
> like this:
>
> echo 687071.4391 6210141.3267 0 2025 | cct +proj=pipeline +step 
> +proj=utm +zone=32 +inv +step \
>
> +proj=defmodel +model=./defmodel.json +step +proj=utm +zone=32
>
> 687071.4391?? 6210141.3267??????? 6.0000???? 2025.0000
>
> The UTM steps surrounding the defmodel accomodate that the grids I 
> want to transform have horizontal coordinates registered as 
> EPSG:25832. Ideally I want this to be a time-dependent transformation 
> but for now I am just working with simple constant offsets.
>
> When using the above transformation with gdalwarp I am presented with 
> an error:
>
> gdalwarp -ct "+proj=pipeline +step +proj=utm +zone=32 +inv +step 
> +proj=defmodel +model=./defmodel.json +step +proj=utm +zone=32" \ 
> DHYMSEA_1km_6150_542.tif out.tif
>
> ERROR 1: Too many points (2601 out of 2601) failed to transform, 
> unable to compute output bounds.
>
> The immediate question is ?what am I missing?? I suppose I either have 
> some errors in the transformation setup or am missing some command 
> line switches. Any guidance is appreciated. The next question is, if I 
> turn the above transformation into a time-depending transformation, 
> would I be able to use that with gdalwarp? I see GDAL 3.4 has some 
> switches for applying coordinate epochs but haven?t been able to test 
> them since I don?t have version 3.4 readily available at the moment.
>
> Best regards,
>
> Kristian
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210820/bd444bba/attachment.html>

From even.rouault at spatialys.com  Fri Aug 20 08:30:17 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Aug 2021 17:30:17 +0200
Subject: [gdal-dev] Custom vertical transformations
In-Reply-To: <3e9c7739-ddcb-eedf-f58f-b295a92f9737@spatialys.com>
References: <d75bf232b8f347c49b858cd484786632@sdfe.dk>
 <3e9c7739-ddcb-eedf-f58f-b295a92f9737@spatialys.com>
Message-ID: <89cc4e3e-73c1-5e0f-cfed-aa5d4c459dca@spatialys.com>


> Regarding your immediate issue, the workaround I see would be that you 
> use PROJ to create a regular grid that contains the vertical 
> correction, use gdalwarp to transform it to the exact extent and 
> resolution of the result of your 2D-only gdalwarp, and finally use 
> gdal_calc to sum the two.
>
Well, if you actually create a vertical correction only grid, then you 
could just use? -s_srs "+proj=longlat +ellps=... 
+geoidgrids=your_tif_or_gtx"? (or maybe as output, or fix the sign of 
the correction in the grid), since the workaround I give above is what 
gdalwarp would do. But of course none of this will solve the 
time-dependent aspect you need.

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From cgodkin at gmail.com  Fri Aug 20 18:36:07 2021
From: cgodkin at gmail.com (Carl Godkin)
Date: Fri, 20 Aug 2021 18:36:07 -0700
Subject: [gdal-dev] Puzzled about gdal_translate return all white image...
Message-ID: <CAE=8km=XxHc=Rb6yApVxEn_f15O+exWQdSOJ0snQzn6UTfkc0g@mail.gmail.com>

Hi,
I'm very puzzled about why gdal_translate (v. 3.3.1) returns an all-white
image when I select a smaller area than with a working case with a larger
area.

These two command lines are exactly the same except that the failing case
has a smaller area:

gdal_translate "
https://basemap.nationalmap.gov:443/arcgis/services/USGSImageryTopo/MapServer/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=0&SRS=EPSG:4326&BBOX=-179.999989,-89.000000,179.999988,89.000000"
wms.xml -of WMS

gdal_translate \
    -projwin 524136.39 5229915.17 527111.89 5226499.96 \
    -projwin_srs EPSG:32610 \
    -outsize 2500 0 \
    wms.xml fails.tif

gdal_translate \
    -projwin 517947.80 5235658.96 528189.82 5224344.74 \
    -projwin_srs EPSG:32610 \
    -outsize 2500 0 \
    wms.xml works.tif

Can anyone explain what's going on here and (most likely!) what I'm doing
wrong?

Thank you very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210820/cb1dd4e3/attachment.html>

From even.rouault at spatialys.com  Sat Aug 21 00:33:12 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Aug 2021 09:33:12 +0200
Subject: [gdal-dev] Puzzled about gdal_translate return all white
 image...
In-Reply-To: <CAE=8km=XxHc=Rb6yApVxEn_f15O+exWQdSOJ0snQzn6UTfkc0g@mail.gmail.com>
References: <CAE=8km=XxHc=Rb6yApVxEn_f15O+exWQdSOJ0snQzn6UTfkc0g@mail.gmail.com>
Message-ID: <6db7407c-6be3-b513-4ce1-63f3be6b7601@spatialys.com>

Nothing wrong from your side, but the second command probably selects a 
higher zoom level that has blank data given the configuration/data 
available on the server side.

Le 21/08/2021 ? 03:36, Carl Godkin a ?crit?:
> Hi,
> I'm very puzzled about why gdal_translate (v. 3.3.1) returns an 
> all-white image when I select a smaller area than with a working case 
> with a larger area.
>
> These two command lines are exactly the same except that the failing 
> case has a smaller area:
>
> gdal_translate 
> "https://basemap.nationalmap.gov:443/arcgis/services/USGSImageryTopo/MapServer/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=0&SRS=EPSG:4326&BBOX=-179.999989,-89.000000,179.999988,89.000000 
> <https://basemap.nationalmap.gov:443/arcgis/services/USGSImageryTopo/MapServer/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=0&SRS=EPSG:4326&BBOX=-179.999989,-89.000000,179.999988,89.000000>" 
> wms.xml -of WMS
>
> gdal_translate \
> ? ? -projwin 524136.39 5229915.17 527111.89 5226499.96 \
> ? ? -projwin_srs EPSG:32610 \
> ? ? -outsize 2500 0 \
> ? ? wms.xml fails.tif
>
> gdal_translate \
> ? ? -projwin 517947.80 5235658.96 528189.82 5224344.74 \
> ? ? -projwin_srs EPSG:32610 \
> ? ? -outsize 2500 0 \
> ? ? wms.xml works.tif
>
> Can anyone explain what's going on here and (most likely!) what I'm 
> doing wrong?
>
> Thank you very much,
>
> carl
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210821/976a6c99/attachment.html>

From cgodkin at gmail.com  Sat Aug 21 06:33:09 2021
From: cgodkin at gmail.com (Carl Godkin)
Date: Sat, 21 Aug 2021 06:33:09 -0700
Subject: [gdal-dev] Puzzled about gdal_translate return all white
 image...
In-Reply-To: <6db7407c-6be3-b513-4ce1-63f3be6b7601@spatialys.com>
References: <CAE=8km=XxHc=Rb6yApVxEn_f15O+exWQdSOJ0snQzn6UTfkc0g@mail.gmail.com>
 <6db7407c-6be3-b513-4ce1-63f3be6b7601@spatialys.com>
Message-ID: <CAE=8kmmoJfoto0T488JBPEnk0Ws+FQ0KYGQRAPRBJd-8g_Duiw@mail.gmail.com>

Hi Even,

Thank you for the reply.  It occurred to me that the server might be
missing the data.  I changed my little script to use "-outsize 2000 0" and
it works fine.

Is there any way to check for this or protect against it  from the client
side, or do you just have to be experienced with a given WMS service?

Thanks again,
carl

On Sat, Aug 21, 2021 at 12:33 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Nothing wrong from your side, but the second command probably selects a
> higher zoom level that has blank data given the configuration/data
> available on the server side.
> Le 21/08/2021 ? 03:36, Carl Godkin a ?crit :
>
> Hi,
> I'm very puzzled about why gdal_translate (v. 3.3.1) returns an all-white
> image when I select a smaller area than with a working case with a larger
> area.
>
> These two command lines are exactly the same except that the failing case
> has a smaller area:
>
> gdal_translate "
> https://basemap.nationalmap.gov:443/arcgis/services/USGSImageryTopo/MapServer/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=0&SRS=EPSG:4326&BBOX=-179.999989,-89.000000,179.999988,89.000000"
> wms.xml -of WMS
>
> gdal_translate \
>     -projwin 524136.39 5229915.17 527111.89 5226499.96 \
>     -projwin_srs EPSG:32610 \
>     -outsize 2500 0 \
>     wms.xml fails.tif
>
> gdal_translate \
>     -projwin 517947.80 5235658.96 528189.82 5224344.74 \
>     -projwin_srs EPSG:32610 \
>     -outsize 2500 0 \
>     wms.xml works.tif
>
> Can anyone explain what's going on here and (most likely!) what I'm doing
> wrong?
>
> Thank you very much,
>
> carl
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210821/c56640f7/attachment.html>

From even.rouault at spatialys.com  Sat Aug 21 06:45:21 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Aug 2021 15:45:21 +0200
Subject: [gdal-dev] Puzzled about gdal_translate return all white
 image...
In-Reply-To: <CAE=8kmmoJfoto0T488JBPEnk0Ws+FQ0KYGQRAPRBJd-8g_Duiw@mail.gmail.com>
References: <CAE=8km=XxHc=Rb6yApVxEn_f15O+exWQdSOJ0snQzn6UTfkc0g@mail.gmail.com>
 <6db7407c-6be3-b513-4ce1-63f3be6b7601@spatialys.com>
 <CAE=8kmmoJfoto0T488JBPEnk0Ws+FQ0KYGQRAPRBJd-8g_Duiw@mail.gmail.com>
Message-ID: <3b1e745b-2494-4340-15f8-46cb3d1242eb@spatialys.com>


>
> Is there any way to check for this or protect against it from the 
> client side, or do you just have to be experienced with a given WMS 
> service?
Not much to do on the client side, except checking that if you got a 
all-white image, it is probably not what you want, and retry at a 
coarser resolution. I guess such a logic could potentially be 
implemented in the WMS driver, but it could cause confusion to? end 
users (the driver would have to upsample the downsampled request, and so 
the user might not realize that they didn't get data at the resolution 
they requested)
>
> Thanks again,
> carl
>
> On Sat, Aug 21, 2021 at 12:33 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Nothing wrong from your side, but the second command probably
>     selects a higher zoom level that has blank data given the
>     configuration/data available on the server side.
>
>     Le 21/08/2021 ? 03:36, Carl Godkin a ?crit?:
>>     Hi,
>>     I'm very puzzled about why gdal_translate (v. 3.3.1) returns an
>>     all-white image when I select a smaller area than with a working
>>     case with a larger area.
>>
>>     These two command lines are exactly the same except that the
>>     failing case has a smaller area:
>>
>>     gdal_translate
>>     "https://basemap.nationalmap.gov:443/arcgis/services/USGSImageryTopo/MapServer/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=0&SRS=EPSG:4326&BBOX=-179.999989,-89.000000,179.999988,89.000000
>>     <https://basemap.nationalmap.gov:443/arcgis/services/USGSImageryTopo/MapServer/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=0&SRS=EPSG:4326&BBOX=-179.999989,-89.000000,179.999988,89.000000>"
>>     wms.xml -of WMS
>>
>>     gdal_translate \
>>     ? ? -projwin 524136.39 5229915.17 527111.89 5226499.96 \
>>     ? ? -projwin_srs EPSG:32610 \
>>     ? ? -outsize 2500 0 \
>>     ? ? wms.xml fails.tif
>>
>>     gdal_translate \
>>     ? ? -projwin 517947.80 5235658.96 528189.82 5224344.74 \
>>     ? ? -projwin_srs EPSG:32610 \
>>     ? ? -outsize 2500 0 \
>>     ? ? wms.xml works.tif
>>
>>     Can anyone explain what's going on here and (most likely!) what
>>     I'm doing wrong?
>>
>>     Thank you very much,
>>
>>     carl
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210821/8de76471/attachment-0001.html>

From nyall.dawson at gmail.com  Sat Aug 21 21:33:48 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sun, 22 Aug 2021 14:33:48 +1000
Subject: [gdal-dev] How to handle private (system) tables which a caller may
 explicitly want
Message-ID: <CAB28AsgBZnHZKRnfeZ=zc_q-JLySUwraH8X5EeEO_JzVPn7K1g@mail.gmail.com>

Hi list,

Looking for some advice here on the best way to handle a particular
situation in some particular GDAL formats, specifically formats which
have a bunch of internal or system tables which we don't want to
expose to users in 99.99999% of cases BUT still allowing the 0.000001%
to explicitly get access to the tables when needed.

An example: the ESRI personal geodatabase format has a bunch of tables
like "GDB_Annosymbols", "GDB_Relationships", "GDB_TopoRules", etc. In
almost all cases a user won't want to see these tables exposed from
client applications so they are currently hardcoded to be skipped over
when building the list of layers for a datasource.  BUT there's
actually some useful content in these tables which an application
might want to read in very specific cases, e.g. if the application
wanted to read the topo rules to convert these to a human readable
form, or the relationship information, etc.

I can't see any way to handle this in current GDAL api -- either a
layer is exposed and accessible or it's skipped and there's no way for
a client to access it. Am I missing something, or would this require
new API? If so, has anyone any thoughts on how these could be handled
nicely?

Nyall

From even.rouault at spatialys.com  Sun Aug 22 01:59:41 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 22 Aug 2021 10:59:41 +0200
Subject: [gdal-dev] How to handle private (system) tables which a caller
 may explicitly want
In-Reply-To: <CAB28AsgBZnHZKRnfeZ=zc_q-JLySUwraH8X5EeEO_JzVPn7K1g@mail.gmail.com>
References: <CAB28AsgBZnHZKRnfeZ=zc_q-JLySUwraH8X5EeEO_JzVPn7K1g@mail.gmail.com>
Message-ID: <d658a7c4-b50f-af3f-5ac9-adc7dfaf4705@spatialys.com>

Hi Nyall,

There are several possible approaches to this:

- have a LIST_ALL_TABLES=YES open option. A few drivers expose it, like 
PG, SQLite and GPKG. But the intent here was more for drivers that use 
by default the content of a geometry_columns table to establish their 
list of layers. With LIST_ALL_TABLES=YES they expose also other 
non-spatial tables. But if that includes "system" tables or not is 
driver dependent. I see the GPKG driver still hides system tables, 
whereas SQLite really shows all tables, and PG exposes for example 
raster tables (but not pg_XXXX tables, but I don't think they are actual 
tables, so that might explain it)

- have a GetLayerByName() implementation that creates on-demand layers. 
This is implement, among other, for example in the SQLite driver. In 
that case, those new layers must be added to the layer list (ie freeing 
them is done by the driver at dataset closing)

- or just rely on ExecuteSQL("SELECT * FROM the_table"). This generally 
works for most drivers without adding new code, and from a quick test, 
this works with the PGeo driver. Except that MDBTools emits errors on 
the console when trying on a non-existing table. I guess some quick 
processing of the SQL string could be done to extract the table name, 
check if it exists and it it doesn't just emits a OGR error. Or have a 
special handling of a "SELECT * FROM "_ogr_table_list_" " that would 
return them ?

Even

Le 22/08/2021 ? 06:33, Nyall Dawson a ?crit?:
> Hi list,
>
> Looking for some advice here on the best way to handle a particular
> situation in some particular GDAL formats, specifically formats which
> have a bunch of internal or system tables which we don't want to
> expose to users in 99.99999% of cases BUT still allowing the 0.000001%
> to explicitly get access to the tables when needed.
>
> An example: the ESRI personal geodatabase format has a bunch of tables
> like "GDB_Annosymbols", "GDB_Relationships", "GDB_TopoRules", etc. In
> almost all cases a user won't want to see these tables exposed from
> client applications so they are currently hardcoded to be skipped over
> when building the list of layers for a datasource.  BUT there's
> actually some useful content in these tables which an application
> might want to read in very specific cases, e.g. if the application
> wanted to read the topo rules to convert these to a human readable
> form, or the relationship information, etc.
>
> I can't see any way to handle this in current GDAL api -- either a
> layer is exposed and accessible or it's skipped and there's no way for
> a client to access it. Am I missing something, or would this require
> new API? If so, has anyone any thoughts on how these could be handled
> nicely?
>
> Nyall
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Sun Aug 22 10:33:13 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Sun, 22 Aug 2021 17:33:13 +0000
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
Message-ID: <c64157635de048468546b8ec8b2d4406@maanmittauslaitos.fi>

+1

-Jukka Rahkonen-

Howard Butler wrote:

> Dear PSC,

> As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Even Rouault as a contracted GDAL maintainer for the year 2021-2022 beginning on August 1st, 2021 and ending July 31st, 2022. 

Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html

> The terms of the contract are for 833 hours at $120/hr USD.

> Howard

From idan at miara.com  Sun Aug 22 15:58:47 2021
From: idan at miara.com (Idan Miara)
Date: Mon, 23 Aug 2021 01:58:47 +0300
Subject: [gdal-dev] Warp with different band types?
Message-ID: <CAEDrt39p8ruN9BtNQAhbveGbLTo7cLk0KYBu+HXsjU+jgJQWHA@mail.gmail.com>

Hi all,

I was trying to warp a ds with a byte band and an int16 band and got a ds
with two byte band.
Is warp using the first band data type for all the output bands?
Is that a bug?

If multiple band types are not supported - maybe max(band types) could be a
better default (assuming no explicit output type) ?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210823/d92d43fa/attachment.html>

From nyall.dawson at gmail.com  Sun Aug 22 16:11:34 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 23 Aug 2021 09:11:34 +1000
Subject: [gdal-dev] How to handle private (system) tables which a caller
 may explicitly want
In-Reply-To: <d658a7c4-b50f-af3f-5ac9-adc7dfaf4705@spatialys.com>
References: <CAB28AsgBZnHZKRnfeZ=zc_q-JLySUwraH8X5EeEO_JzVPn7K1g@mail.gmail.com>
 <d658a7c4-b50f-af3f-5ac9-adc7dfaf4705@spatialys.com>
Message-ID: <CAB28AsjWzg7sAq4HY01f0FtpxVbrC316jp22Eb6C4sGBuOm2Mw@mail.gmail.com>

On Sun, 22 Aug 2021 at 18:59, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi Nyall,
>
> There are several possible approaches to this:
>
> - have a LIST_ALL_TABLES=YES open option. A few drivers expose it, like
> PG, SQLite and GPKG. But the intent here was more for drivers that use
> by default the content of a geometry_columns table to establish their
> list of layers. With LIST_ALL_TABLES=YES they expose also other
> non-spatial tables. But if that includes "system" tables or not is
> driver dependent. I see the GPKG driver still hides system tables,
> whereas SQLite really shows all tables, and PG exposes for example
> raster tables (but not pg_XXXX tables, but I don't think they are actual
> tables, so that might explain it)
>

I like this approach. Would you be accepting of a new API "bool
GDALDataset::IsLayerPrivate(int iLayer)" to accompany this? It would
return true for any layers which are deemed as private/system/internal
details only.

Nyall



> - have a GetLayerByName() implementation that creates on-demand layers.
> This is implement, among other, for example in the SQLite driver. In
> that case, those new layers must be added to the layer list (ie freeing
> them is done by the driver at dataset closing)
>
> - or just rely on ExecuteSQL("SELECT * FROM the_table"). This generally
> works for most drivers without adding new code, and from a quick test,
> this works with the PGeo driver. Except that MDBTools emits errors on
> the console when trying on a non-existing table. I guess some quick
> processing of the SQL string could be done to extract the table name,
> check if it exists and it it doesn't just emits a OGR error. Or have a
> special handling of a "SELECT * FROM "_ogr_table_list_" " that would
> return them ?
>
> Even
>
> Le 22/08/2021 ? 06:33, Nyall Dawson a ?crit :
> > Hi list,
> >
> > Looking for some advice here on the best way to handle a particular
> > situation in some particular GDAL formats, specifically formats which
> > have a bunch of internal or system tables which we don't want to
> > expose to users in 99.99999% of cases BUT still allowing the 0.000001%
> > to explicitly get access to the tables when needed.
> >
> > An example: the ESRI personal geodatabase format has a bunch of tables
> > like "GDB_Annosymbols", "GDB_Relationships", "GDB_TopoRules", etc. In
> > almost all cases a user won't want to see these tables exposed from
> > client applications so they are currently hardcoded to be skipped over
> > when building the list of layers for a datasource.  BUT there's
> > actually some useful content in these tables which an application
> > might want to read in very specific cases, e.g. if the application
> > wanted to read the topo rules to convert these to a human readable
> > form, or the relationship information, etc.
> >
> > I can't see any way to handle this in current GDAL api -- either a
> > layer is exposed and accessible or it's skipped and there's no way for
> > a client to access it. Am I missing something, or would this require
> > new API? If so, has anyone any thoughts on how these could be handled
> > nicely?
> >
> > Nyall
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>

From even.rouault at spatialys.com  Mon Aug 23 01:45:53 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Aug 2021 10:45:53 +0200
Subject: [gdal-dev] How to handle private (system) tables which a caller
 may explicitly want
In-Reply-To: <CAB28AsjWzg7sAq4HY01f0FtpxVbrC316jp22Eb6C4sGBuOm2Mw@mail.gmail.com>
References: <CAB28AsgBZnHZKRnfeZ=zc_q-JLySUwraH8X5EeEO_JzVPn7K1g@mail.gmail.com>
 <d658a7c4-b50f-af3f-5ac9-adc7dfaf4705@spatialys.com>
 <CAB28AsjWzg7sAq4HY01f0FtpxVbrC316jp22Eb6C4sGBuOm2Mw@mail.gmail.com>
Message-ID: <62b25d5d-f918-fb90-504a-068e7c8af57e@spatialys.com>

Hi Nyall,

> On Sun, 22 Aug 2021 at 18:59, Even Rouault <even.rouault at spatialys.com> wrote:
>> Hi Nyall,
>>
>> There are several possible approaches to this:
>>
>> - have a LIST_ALL_TABLES=YES open option. A few drivers expose it, like
>> PG, SQLite and GPKG. But the intent here was more for drivers that use
>> by default the content of a geometry_columns table to establish their
>> list of layers. With LIST_ALL_TABLES=YES they expose also other
>> non-spatial tables. But if that includes "system" tables or not is
>> driver dependent. I see the GPKG driver still hides system tables,
>> whereas SQLite really shows all tables, and PG exposes for example
>> raster tables (but not pg_XXXX tables, but I don't think they are actual
>> tables, so that might explain it)
>>
> I like this approach. Would you be accepting of a new API "bool
> GDALDataset::IsLayerPrivate(int iLayer)" to accompany this? It would
> return true for any layers which are deemed as private/system/internal
> details only.

Sounds good to me

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From kreve at sdfe.dk  Mon Aug 23 01:50:55 2021
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 23 Aug 2021 08:50:55 +0000
Subject: [gdal-dev] Custom vertical transformations
In-Reply-To: <89cc4e3e-73c1-5e0f-cfed-aa5d4c459dca@spatialys.com>
References: <d75bf232b8f347c49b858cd484786632@sdfe.dk>
 <3e9c7739-ddcb-eedf-f58f-b295a92f9737@spatialys.com>
 <89cc4e3e-73c1-5e0f-cfed-aa5d4c459dca@spatialys.com>
Message-ID: <c28e3039230e45fc93dba12cfa57c01e@sdfe.dk>

Thanks for your insights, Even! I had a feeling I was pushing the boundaries here, good to get that confirmed.

The idea of using -s_srs and a correction grid is intriguing. I assume this way will be easier to implement as well since I don't have to worry as much about the CRS and extent of my correction grid as when using gdal_calc. The correction grids I already have are in EPSG:4326 and I assume GDAL is clever enough to handle that or at least pass the responsibility over to PROJ. I'll try a few things and report back how it goes. 

I'll make sure to add a ticket for extending the scope of gdalwarp to the 3D-space.

/Kristian

> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: 20. august 2021 17:30
> To: Kristian Evers <kreve at sdfe.dk>; gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Custom vertical transformations
> 
> 
> > Regarding your immediate issue, the workaround I see would be that you
> > use PROJ to create a regular grid that contains the vertical
> > correction, use gdalwarp to transform it to the exact extent and
> > resolution of the result of your 2D-only gdalwarp, and finally use
> > gdal_calc to sum the two.
> >
> Well, if you actually create a vertical correction only grid, then you
> could just use? -s_srs "+proj=longlat +ellps=...
> +geoidgrids=your_tif_or_gtx"? (or maybe as output, or fix the sign of
> the correction in the grid), since the workaround I give above is what
> gdalwarp would do. But of course none of this will solve the
> time-dependent aspect you need.
> 
> --
> 
> http://www.spatialys.com
> My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Aug 23 01:51:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Aug 2021 10:51:57 +0200
Subject: [gdal-dev] Warp with different band types?
In-Reply-To: <CAEDrt39p8ruN9BtNQAhbveGbLTo7cLk0KYBu+HXsjU+jgJQWHA@mail.gmail.com>
References: <CAEDrt39p8ruN9BtNQAhbveGbLTo7cLk0KYBu+HXsjU+jgJQWHA@mail.gmail.com>
Message-ID: <358f7a35-9d03-78e5-2de1-708ad3e10269@spatialys.com>

Idan,

The warping kernel works on a multiple band dataset by using a single 
working data type, which should be the "max" of the types of the input 
bands, so here int16. I believe this is working, but here the issue is 
more at the creation of the dataset itself than during the warping. This 
is due to 
https://github.com/OSGeo/gdal/blob/3302b5c9cb62191df3409676aa97fced07c92c3b/gdal/apps/gdalwarp_lib.cpp#L3017 
. GDALWarpResolveWorkingDataType() should likely be used instead

Even

Le 23/08/2021 ? 00:58, Idan Miara a ?crit?:
> Hi all,
>
> I was trying to warp a ds with a byte band and an int16 band and got a 
> ds with two byte band.
> Is warp using the first band data type for all the output bands?
> Is that a bug?
>
> If multiple band types are not supported - maybe max(band types) could 
> be a better default (assuming no explicit output type) ?
>
> Kind regards,
> Idan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210823/de0394b5/attachment.html>

From dmorissette at mapgears.com  Mon Aug 23 06:39:48 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 23 Aug 2021 09:39:48 -0400
Subject: [gdal-dev] Motion: Approve Even Rouault as a contracted GDAL
 maintainer
In-Reply-To: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
References: <11F8E9C4-5C8F-4E22-A9A6-5E24E15CA3CC@hobu.co>
Message-ID: <a9b90186-f95f-3748-0236-a9fd98b1182b@mapgears.com>

+1!

Daniel


On 2021-08-17 11:33, Howard Butler wrote:
> Dear PSC,
> 
> As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Even Rouault as a contracted GDAL maintainer for the year 2021-2022 beginning on August 1st, 2021 and ending July 31st, 2022.
> 
> Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
> 
> The terms of the contract are for 833 hours at $120/hr USD.
> 
> Howard
> 
> PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From mulcahy.brianp at gmail.com  Tue Aug 24 05:24:38 2021
From: mulcahy.brianp at gmail.com (Brian)
Date: Tue, 24 Aug 2021 08:24:38 -0400
Subject: [gdal-dev] Proper way to burn in a shape to a Cloud Optimized
 Geotiff(COG)?
Message-ID: <CANoBQebJ-+1Z4X9vtRJccOGmmRVcxx9tHrfOkoDs7N-SyCQ7gA@mail.gmail.com>

Looking at what is the proper way to burn in -9999 to a COG?

Here are the steps I have came up with:

1. Remove overviews
2. gdal_rasterize the geometry into the COG
3. create new overviews.


Is there a way to just rebuild the overviews after burning in the values? I
want to manipulate the original raster as little as possible.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/501e3f26/attachment.html>

From ni_hao88 at hotmail.com  Tue Aug 24 09:45:00 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 24 Aug 2021 16:45:00 +0000
Subject: [gdal-dev] NITF DES
Message-ID: <DM5PR02MB3862B5625E13D88631E88486F1C59@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi List,

Is there a GDAL utility or Python code to delete/alter/write to NITF Data Extension Segments (DES) ?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/648a9849/attachment.html>

From even.rouault at spatialys.com  Tue Aug 24 09:50:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 24 Aug 2021 18:50:14 +0200
Subject: [gdal-dev] NITF DES
In-Reply-To: <DM5PR02MB3862B5625E13D88631E88486F1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB3862B5625E13D88631E88486F1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <6b0ea16f-5a17-4160-07e5-9f9988296379@spatialys.com>

Hello,

yes, first look:

- at the doc of the DES creation option in 
https://gdal.org/drivers/raster/nitf.html#creation-issues

- at 
https://gdal.org/drivers/raster/nitf_advanced.html#data-extension-segments-xml-des

you will need to compose the DES segment in a relatively low level.

Look at examples in :

- 
https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3728

- 
https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3795

Note: gdal.EscapeString(des_data, gdal.CPLES_BackslashQuotable) with 
binary data only works since a commit done yesterday in GDAL master!

If using an older version, backslash escaping can be done with :

escaped_data = data.replace(b'\\', b'\\\\').replace(b'\0', b'\\0') \
                    .replace(b'\"', b'\\"').replace(b'\n', b'\\n')

Best regards,

Even

Le 24/08/2021 ? 18:45, ni hao a ?crit?:
> Hi List,
>
> Is there a GDAL utility or Python code to delete/alter/write to?NITF 
> Data Extension Segments (DES) ?
>
> Thanks.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/a5f0f63f/attachment.html>

From ni_hao88 at hotmail.com  Tue Aug 24 11:07:37 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 24 Aug 2021 18:07:37 +0000
Subject: [gdal-dev] NITF DES
In-Reply-To: <6b0ea16f-5a17-4160-07e5-9f9988296379@spatialys.com>
References: <DM5PR02MB3862B5625E13D88631E88486F1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
 <6b0ea16f-5a17-4160-07e5-9f9988296379@spatialys.com>
Message-ID: <DM5PR02MB38627C5ADA3BAF97707CEB0FF1C59@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi Even,

Thank you for your reply.
Is there a simpler example to remove DES (say DES ID = 1) from an existing NITF, or replace DES with a null string?



________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: August 24, 2021 1:50 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF DES


Hello,

yes, first look:

- at the doc of the DES creation option in https://gdal.org/drivers/raster/nitf.html#creation-issues

- at https://gdal.org/drivers/raster/nitf_advanced.html#data-extension-segments-xml-des

you will need to compose the DES segment in a relatively low level.

Look at examples in :

- https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3728

- https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3795

Note: gdal.EscapeString(des_data, gdal.CPLES_BackslashQuotable) with binary data only works since a commit done yesterday in GDAL master!

If using an older version, backslash escaping can be done with :

escaped_data = data.replace(b'\\', b'\\\\').replace(b'\0', b'\\0') \
                   .replace(b'\"', b'\\"').replace(b'\n', b'\\n')

Best regards,

Even

Le 24/08/2021 ? 18:45, ni hao a ?crit :
Hi List,

Is there a GDAL utility or Python code to delete/alter/write to NITF Data Extension Segments (DES) ?

Thanks.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/bae4cd2f/attachment-0001.html>

From even.rouault at spatialys.com  Tue Aug 24 11:28:24 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 24 Aug 2021 20:28:24 +0200
Subject: [gdal-dev] NITF DES
In-Reply-To: <DM5PR02MB38627C5ADA3BAF97707CEB0FF1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB3862B5625E13D88631E88486F1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
 <6b0ea16f-5a17-4160-07e5-9f9988296379@spatialys.com>
 <DM5PR02MB38627C5ADA3BAF97707CEB0FF1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <cae57232-935b-33f8-6252-85abb9856300@spatialys.com>


Le 24/08/2021 ? 20:07, ni hao a ?crit?:
> Hi Even,
>
> Thank you?for your reply.
> Is there a simpler example to remove DES (say DES ID = 1) from an 
> existing NITF, or replace DES with a null string?
No, there's no code to update/remove a DES . You'll need to edit the 
file at byte level, or rewrite a new one without them
>
>
>
> ------------------------------------------------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* August 24, 2021 1:50 PM
> *To:* ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org 
> <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] NITF DES
>
> Hello,
>
> yes, first look:
>
> - at the doc of the DES creation option in 
> https://gdal.org/drivers/raster/nitf.html#creation-issues 
> <https://gdal.org/drivers/raster/nitf.html#creation-issues>
>
> - at 
> https://gdal.org/drivers/raster/nitf_advanced.html#data-extension-segments-xml-des 
> <https://gdal.org/drivers/raster/nitf_advanced.html#data-extension-segments-xml-des>
>
> you will need to compose the DES segment in a relatively low level.
>
> Look at examples in :
>
> - 
> https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3728 
> <https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3728>
>
> - 
> https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3795 
> <https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3795>
>
> Note: gdal.EscapeString(des_data, gdal.CPLES_BackslashQuotable) with 
> binary data only works since a commit done yesterday in GDAL master!
>
> If using an older version, backslash escaping can be done with :
>
> escaped_data = data.replace(b'\\', b'\\\\').replace(b'\0', b'\\0') \
>                     .replace(b'\"', b'\\"').replace(b'\n', b'\\n')
>
> Best regards,
>
> Even
>
> Le 24/08/2021 ? 18:45, ni hao a ?crit?:
>> Hi List,
>>
>> Is there a GDAL utility or Python code to delete/alter/write to?NITF 
>> Data Extension Segments (DES) ?
>>
>> Thanks.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/fe831aaa/attachment.html>

From chriscorbell at gmail.com  Tue Aug 24 14:17:54 2021
From: chriscorbell at gmail.com (Christopher Corbell)
Date: Tue, 24 Aug 2021 14:17:54 -0700
Subject: [gdal-dev] CPLFindFile not honoring CPLSetConfigOption
Message-ID: <CAP2bJPwrUMBQYSuxwDoC_a6xGbyy1WR=mKkd=etMnNKY10-OeA@mail.gmail.com>

I'm tracking down a bug with WFS data import in our app and it seems like
the cause is a call to CPLFindFile returning NULL, looking for a
gmlasconf.xml file that should be in the gdal share directory.

This is a Mac universal binary app that embeds GDAL as a dylib and also
includes the share files, so we use CPLSetConfigOption("GDAL_DATA", ...) to
configure the CPL. So we don't rely on any absolute install/build paths or
on the end-user installing their own GDAL. This worked previously but we
recently updated to GDAL 3.3.1.

The WFS import fails when CPLFindFile returns NULL on attempt to read that
config file, but the bug does not occur on my workstation, where this copy
of GDAL was built. It turns out this is because CPLFindFile will return the
original location of the GDAL build/install share directory (which still
exists on my system).

Can anyone offer a theory why CPLFindFile might ignore the gdal data path
and only look in the absolute install path set when GDAL was built? Here's
some debugger output showing how these functions point to two different
directories at runtime:

(lldb) po (const char*) CPLGetConfigOption("GDAL_DATA")
"/Users/ccorbell/Development/working/ccorbell_27x_MBP/IP
Source/Plug-ins/Common/Data/GIS/gdal/"

(lldb) po (const char*) CPLFindFile("gdal", "gmlasconf.xml")
"/Users/ccorbell/Development/working/ccorbell_27x_MBP/AppSource/ThirdPartySource/GDAL/config/gdal-3.3.1-x86_64/share/gdal/gmlasconf.xml"


Thanks,
Christopher
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/11f816ca/attachment.html>

From even.rouault at spatialys.com  Tue Aug 24 14:26:40 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 24 Aug 2021 23:26:40 +0200
Subject: [gdal-dev] CPLFindFile not honoring CPLSetConfigOption
In-Reply-To: <CAP2bJPwrUMBQYSuxwDoC_a6xGbyy1WR=mKkd=etMnNKY10-OeA@mail.gmail.com>
References: <CAP2bJPwrUMBQYSuxwDoC_a6xGbyy1WR=mKkd=etMnNKY10-OeA@mail.gmail.com>
Message-ID: <3a999a88-23da-2bdc-2544-1032e6c4052b@spatialys.com>

Christopher,

CPLFindFile() calls CPLFinderInit() which issues CPLGetConfigOption( 
"GDAL_DATA", nullptr). But CPLFinderInit() runs once per-thread. So a 
potential theory for what you observe would be that something runs 
CPLFindFile() before you call CPLSetConfigOption("GDAL_DATA", ...). 
Setting breakpoint on CPLFinderInit and CPLSetConfigOption should 
confirm if this is what actually happens

Even

Le 24/08/2021 ? 23:17, Christopher Corbell a ?crit?:
> I'm tracking down a bug with WFS data import in our app and it seems 
> like the cause is a call to CPLFindFile returning NULL, looking for a 
> gmlasconf.xml file that should be in the gdal share directory.
>
> This is a Mac universal binary app that embeds GDAL as a dylib and 
> also includes the share files, so we use 
> CPLSetConfigOption("GDAL_DATA", ...) to configure the CPL. So we don't 
> rely on any absolute install/build paths or on the end-user installing 
> their own GDAL. This worked previously but we recently updated to GDAL 
> 3.3.1.
>
> The WFS import fails when CPLFindFile returns NULL on attempt to read 
> that config file, but the bug does not occur on my workstation, where 
> this copy of GDAL was built. It turns out this is because CPLFindFile 
> will?return the original location of the GDAL build/install share 
> directory (which still exists on my system).
>
> Can anyone offer a theory why CPLFindFile might ignore the gdal data 
> path and only look in the absolute install path set when GDAL was 
> built? Here's some debugger output showing how these functions point 
> to two different directories at runtime:
>
> (lldb) po (const char*) CPLGetConfigOption("GDAL_DATA")
> "/Users/ccorbell/Development/working/ccorbell_27x_MBP/IP Source/Plug-ins/Common/Data/GIS/gdal/"
>
> (lldb) po (const char*) CPLFindFile("gdal", "gmlasconf.xml")
> "/Users/ccorbell/Development/working/ccorbell_27x_MBP/AppSource/ThirdPartySource/GDAL/config/gdal-3.3.1-x86_64/share/gdal/gmlasconf.xml"
>
> Thanks,
> Christopher
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210824/d0dc7648/attachment.html>

From idan at miara.com  Wed Aug 25 04:12:30 2021
From: idan at miara.com (Idan Miara)
Date: Wed, 25 Aug 2021 14:12:30 +0300
Subject: [gdal-dev] Warp with different band types?
In-Reply-To: <358f7a35-9d03-78e5-2de1-708ad3e10269@spatialys.com>
References: <CAEDrt39p8ruN9BtNQAhbveGbLTo7cLk0KYBu+HXsjU+jgJQWHA@mail.gmail.com>
 <358f7a35-9d03-78e5-2de1-708ad3e10269@spatialys.com>
Message-ID: <CAEDrt3-XG4s7fK-K17C=NcBR2HapH5zN9bgZNxoXHNyRV-ts_A@mail.gmail.com>

Thanks Even!

For my case, max(data types) is good enough, but I see that for the general
case calling this function might be a better option.

I couldn't find a reference for GDALWarpResolveWorkingDataType in the
python wrappers, or the warp tester:
https://github.com/OSGeo/gdal/blob/master/autotest/alg/warp.py

Looking at
https://github.com/OSGeo/gdal/blob/master/autotest/cpp/test_alg.cpp#L89
I couldn't find a test that is considering two bands with different data
types.

I was expecting that, at least in the python version, gdal.Warp will call
this function internally before warping and not take the first data type as
a default.

Idan

On Mon, 23 Aug 2021 at 11:51, Even Rouault <even.rouault at spatialys.com>
wrote:

> Idan,
>
> The warping kernel works on a multiple band dataset by using a single
> working data type, which should be the "max" of the types of the input
> bands, so here int16. I believe this is working, but here the issue is more
> at the creation of the dataset itself than during the warping. This is due
> to
> https://github.com/OSGeo/gdal/blob/3302b5c9cb62191df3409676aa97fced07c92c3b/gdal/apps/gdalwarp_lib.cpp#L3017
> . GDALWarpResolveWorkingDataType() should likely be used instead
>
> Even
> Le 23/08/2021 ? 00:58, Idan Miara a ?crit :
>
> Hi all,
>
> I was trying to warp a ds with a byte band and an int16 band and got a ds
> with two byte band.
> Is warp using the first band data type for all the output bands?
> Is that a bug?
>
> If multiple band types are not supported - maybe max(band types) could be
> a better default (assuming no explicit output type) ?
>
> Kind regards,
> Idan
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/29612e05/attachment.html>

From even.rouault at spatialys.com  Wed Aug 25 04:47:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Aug 2021 13:47:11 +0200
Subject: [gdal-dev] Warp with different band types?
In-Reply-To: <CAEDrt3-XG4s7fK-K17C=NcBR2HapH5zN9bgZNxoXHNyRV-ts_A@mail.gmail.com>
References: <CAEDrt39p8ruN9BtNQAhbveGbLTo7cLk0KYBu+HXsjU+jgJQWHA@mail.gmail.com>
 <358f7a35-9d03-78e5-2de1-708ad3e10269@spatialys.com>
 <CAEDrt3-XG4s7fK-K17C=NcBR2HapH5zN9bgZNxoXHNyRV-ts_A@mail.gmail.com>
Message-ID: <b58df16c-bfae-0f81-c485-4e2e4ef14893@spatialys.com>


Le 25/08/2021 ? 13:12, Idan Miara a ?crit?:
> Thanks Even!
>
> For my case, max(data types) is good enough, but I see that for the 
> general case calling this function might be a better option.
>
> I couldn't find a reference?for GDALWarpResolveWorkingDataType in the 
> python wrappers, or the warp tester:
> https://github.com/OSGeo/gdal/blob/master/autotest/alg/warp.py 
> <https://github.com/OSGeo/gdal/blob/master/autotest/alg/warp.py>
It's not meant for general consumption. Mostly an implementation detail
>
> Looking at 
> https://github.com/OSGeo/gdal/blob/master/autotest/cpp/test_alg.cpp#L89 
> <https://github.com/OSGeo/gdal/blob/master/autotest/cpp/test_alg.cpp#L89>
> I couldn't find a test that is considering two bands with different 
> data types.
>
> I was expecting that, at least in the python version, gdal.Warp will 
> call this function internally before warping and not take the first 
> data type as a default.
gdal.Warp() just calls the same logic as the gdalwarp binary. The fix 
shouldn't be too hard if you want to have a try. Otherwise please file a 
ticket about that
>
> Idan
>
> On Mon, 23 Aug 2021 at 11:51, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Idan,
>
>     The warping kernel works on a multiple band dataset by using a
>     single working data type, which should be the "max" of the types
>     of the input bands, so here int16. I believe this is working, but
>     here the issue is more at the creation of the dataset itself than
>     during the warping. This is due to
>     https://github.com/OSGeo/gdal/blob/3302b5c9cb62191df3409676aa97fced07c92c3b/gdal/apps/gdalwarp_lib.cpp#L3017
>     <https://github.com/OSGeo/gdal/blob/3302b5c9cb62191df3409676aa97fced07c92c3b/gdal/apps/gdalwarp_lib.cpp#L3017>
>     . GDALWarpResolveWorkingDataType() should likely be used instead
>
>     Even
>
>     Le 23/08/2021 ? 00:58, Idan Miara a ?crit?:
>>     Hi all,
>>
>>     I was trying to warp a ds with a byte band and an int16 band and
>>     got a ds with two byte band.
>>     Is warp using the first band data type for all the output bands?
>>     Is that a bug?
>>
>>     If multiple band types are not supported - maybe max(band types)
>>     could be a better default (assuming no explicit output type) ?
>>
>>     Kind regards,
>>     Idan
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/c1261fc1/attachment-0001.html>

From Jon.Morris at jbarisk.com  Wed Aug 25 07:29:27 2021
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Wed, 25 Aug 2021 14:29:27 +0000
Subject: [gdal-dev] Recalculating spatial index with FileGDB driver
Message-ID: <LO2P123MB4861EE05BDEEEE786B87687882C69@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>

Hello all,

I'm using GDAL 3.2.1 on Python 3.6.8 and am looking for more information on FileGDB spatial indexes. I have a File GDB layer containing some features and where the geometry is below a certain size, I'm trying to replace it with a larger geometry. However, I'm getting the error RuntimeError: Failed updating row  (The spatial index grid size is invalid.).

I found this ticket https://github.com/Toblerity/Fiona/issues/388 which suggests that the spatial index is being calculated using the first feature added to the layer, then when you add a much larger feature, it is not compatible. Is it possible to recalculate the index using OGR? All the results I have found suggest you need to use Esri tools to update the spatial index.

As a workaround, I can delete the layer and start again, or I can write a large dummy feature to the layer first, but I wondered if there was a better solution. There is a repro case below if anyone wants to see the issue.

    srs = osr.SpatialReference()
    srs.ImportFromEPSG(27700)
    drv = gdal.GetDriverByName('FileGDB')
    temp_name = f"/tmp/{uuid.uuid4()}.gdb"
    ds = drv.Create(temp_name, 0, 0, 0)
    lyr = ds.CreateLayer('lyr1', srs=srs, geom_type=ogr.wkbPolygon)
    ftr1 = ogr.Feature(lyr.GetLayerDefn())
    geom1 = ogr.CreateGeometryFromWkt('POLYGON ((0 10000,10 10000,10 10010,0 10010,0 10000))')
    geom2 = ogr.CreateGeometryFromWkt('POLYGON ((-5000 7000,600000 7000,600000 1200000,-5000 1200000,-5000 7000))')
    ftr1.SetGeometry(geom1)
    print(f'Add small feature (area = {geom1.Area()})')
    lyr.CreateFeature(ftr1)
    ftr1.SetGeometry(geom2)
    print(f'Update feature (area = {geom2.Area()})')
    lyr.SetFeature(ftr1)

If you add a feature with the larger geom before doing the update, it works fine. The error is only when you try and update the existing small feature.

Thanks,

Jon

Jon Morris
Software Developer



e: Jon.Morris at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/d9241347/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image733132.png
Type: image/png
Size: 9886 bytes
Desc: image733132.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/d9241347/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image909374.png
Type: image/png
Size: 651 bytes
Desc: image909374.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/d9241347/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image836014.png
Type: image/png
Size: 715 bytes
Desc: image836014.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/d9241347/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image407826.png
Type: image/png
Size: 966 bytes
Desc: image407826.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/d9241347/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image616029.png
Type: image/png
Size: 784 bytes
Desc: image616029.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/d9241347/attachment-0009.png>

From even.rouault at spatialys.com  Wed Aug 25 08:12:53 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Aug 2021 17:12:53 +0200
Subject: [gdal-dev] Recalculating spatial index with FileGDB driver
In-Reply-To: <LO2P123MB4861EE05BDEEEE786B87687882C69@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
References: <LO2P123MB4861EE05BDEEEE786B87687882C69@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <edaeaaad-0929-ea53-4d9c-cf3e03953649@spatialys.com>

Jon,

I believe this is a bug/feature of the (closed source) FileGDB SDK 
itself when it . Not sure we can do much about that. Or according to 
some mysterious parts of the documentation of the SDK perhaps we could 
offer to the user, as layer creation options, the possibility to specify 
the values of the 3 grid sizes used to compute the spatial index instead 
of letting the SDK guess it, but I'm not sure if this is really possible 
and if users could reasonably infer such values. I've tried to modify 
the driver to not disable bulk-loading in SetFeature() as the SDK doc 
suggested this might be possible, but this resulted in another error.

Even

Le 25/08/2021 ? 16:29, Jon Morris a ?crit?:
>
> Hello all,
>
> I'm using GDAL 3.2.1 on Python 3.6.8 and am looking for more 
> information on FileGDB spatial indexes. I have a File GDB layer 
> containing some features and where the geometry is below a certain 
> size, I'm trying to replace it with a larger geometry. However, I'm 
> getting the error RuntimeError: Failed updating row (The spatial index 
> grid size is invalid.).
>
> I found this ticket https://github.com/Toblerity/Fiona/issues/388 
> <https://github.com/Toblerity/Fiona/issues/388> which suggests that 
> the spatial index is being calculated using the first feature added to 
> the layer, then when you add a much larger feature, it is not 
> compatible. Is it possible to recalculate the index using OGR? All the 
> results I have found suggest you need to use Esri tools to update the 
> spatial index.
>
> As a workaround, I can delete the layer and start again, or I can 
> write a large dummy feature to the layer first, but I wondered if 
> there was a better solution. There is a repro case below if anyone 
> wants to see the issue.
>
> ??? srs = osr.SpatialReference()
>
> ??? srs.ImportFromEPSG(27700)
>
> ??? drv = gdal.GetDriverByName('FileGDB')
>
> ??? temp_name = f"/tmp/{uuid.uuid4()}.gdb"
>
> ??? ds = drv.Create(temp_name, 0, 0, 0)
>
> ??? lyr = ds.CreateLayer('lyr1', srs=srs, geom_type=ogr.wkbPolygon)
>
> ??? ftr1 = ogr.Feature(lyr.GetLayerDefn())
>
> ??? geom1 = ogr.CreateGeometryFromWkt('POLYGON ((0 10000,10 10000,10 
> 10010,0 10010,0 10000))')
>
> ??? geom2 = ogr.CreateGeometryFromWkt('POLYGON ((-5000 7000,600000 
> 7000,600000 1200000,-5000 1200000,-5000 7000))')
>
> ??? ftr1.SetGeometry(geom1)
>
> ??? print(f'Add small feature (area = {geom1.Area()})')
>
> ??? lyr.CreateFeature(ftr1)
>
> ??? ftr1.SetGeometry(geom2)
>
> ??? print(f'Update feature (area = {geom2.Area()})')
>
> ??? lyr.SetFeature(ftr1)
>
> If you add a feature with the larger geom before doing the update, it 
> works fine. The error is only when you try and update the existing 
> small feature.
>
> Thanks,
>
> Jon
>
> *Jon Morris*
>
> *Software Developer*
>
> e: ? 	*Jon.Morris at jbarisk.com* <mailto:Jon.Morris at jbarisk.com>
> t: 	*+44?(0)1756?799919* <tel:+44%20(0)1756%20799919>
>
> 	
>
> *www.jbarisk.com* <http://www.jbarisk.com/>
>
> Facebook <https://www.facebook.com/TheFloodPeople>
>
> 	
> LinkedIn <https://www.linkedin.com/company/jba-risk-management/>
>
> 	
> Twitter <https://twitter.com/JBARisk>
>
> 	
> YouTube <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>
> 	
>
> All JBA Risk Management's email messages contain confidential 
> information and are intended only for the individual(s) named. If you 
> are not the named addressee you should not disseminate, distribute or 
> copy this e-mail.
> Please notify the sender immediately by email if you have received 
> this email by mistake and delete this email from your system.
> JBA Risk Management Limited is registered in England, company number 
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North 
> Yorkshire, BD23 3FD, England.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/a9f53a39/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image733132.png
Type: image/png
Size: 9886 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/a9f53a39/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image909374.png
Type: image/png
Size: 651 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/a9f53a39/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image836014.png
Type: image/png
Size: 715 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/a9f53a39/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image407826.png
Type: image/png
Size: 966 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/a9f53a39/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image616029.png
Type: image/png
Size: 784 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/a9f53a39/attachment-0009.png>

From Jon.Morris at jbarisk.com  Wed Aug 25 09:13:49 2021
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Wed, 25 Aug 2021 16:13:49 +0000
Subject: [gdal-dev] Recalculating spatial index with FileGDB driver
In-Reply-To: <edaeaaad-0929-ea53-4d9c-cf3e03953649@spatialys.com>
References: <LO2P123MB4861EE05BDEEEE786B87687882C69@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
 <edaeaaad-0929-ea53-4d9c-cf3e03953649@spatialys.com>
Message-ID: <LO2P123MB486198A360347FBEDB98A2A282C69@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>

Hi Even,

Thanks for looking into it. I suspected it might be something we have to live with, but thanks for confirming.

I can get round the problem by creating a dummy feature using the input layer extent then deleting it later, but it's an ugly workaround.

Weirdly, once you've hit the error, you can't then use CreateFeature to add a large feature, it also fails. You have to add the large feature before attempting the update.

Jon


e: Jon.Morris at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: Even Rouault <even.rouault at spatialys.com>
Sent: 25 August 2021 16:13
To: Jon Morris <Jon.Morris at jbarisk.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Recalculating spatial index with FileGDB driver


Jon,

I believe this is a bug/feature of the (closed source) FileGDB SDK itself when it . Not sure we can do much about that. Or according to some mysterious parts of the documentation of the SDK perhaps we could offer to the user, as layer creation options, the possibility to specify the values of the 3 grid sizes used to compute the spatial index instead of letting the SDK guess it, but I'm not sure if this is really possible and if users could reasonably infer such values. I've tried to modify the driver to not disable bulk-loading in SetFeature() as the SDK doc suggested this might be possible, but this resulted in another error.

Even
Le 25/08/2021 ? 16:29, Jon Morris a ?crit :
Hello all,

I'm using GDAL 3.2.1 on Python 3.6.8 and am looking for more information on FileGDB spatial indexes. I have a File GDB layer containing some features and where the geometry is below a certain size, I'm trying to replace it with a larger geometry. However, I'm getting the error RuntimeError: Failed updating row  (The spatial index grid size is invalid.).

I found this ticket https://github.com/Toblerity/Fiona/issues/388 which suggests that the spatial index is being calculated using the first feature added to the layer, then when you add a much larger feature, it is not compatible. Is it possible to recalculate the index using OGR? All the results I have found suggest you need to use Esri tools to update the spatial index.

As a workaround, I can delete the layer and start again, or I can write a large dummy feature to the layer first, but I wondered if there was a better solution. There is a repro case below if anyone wants to see the issue.

    srs = osr.SpatialReference()
    srs.ImportFromEPSG(27700)
    drv = gdal.GetDriverByName('FileGDB')
    temp_name = f"/tmp/{uuid.uuid4()}.gdb"
    ds = drv.Create(temp_name, 0, 0, 0)
    lyr = ds.CreateLayer('lyr1', srs=srs, geom_type=ogr.wkbPolygon)
    ftr1 = ogr.Feature(lyr.GetLayerDefn())
    geom1 = ogr.CreateGeometryFromWkt('POLYGON ((0 10000,10 10000,10 10010,0 10010,0 10000))')
    geom2 = ogr.CreateGeometryFromWkt('POLYGON ((-5000 7000,600000 7000,600000 1200000,-5000 1200000,-5000 7000))')
    ftr1.SetGeometry(geom1)
    print(f'Add small feature (area = {geom1.Area()})')
    lyr.CreateFeature(ftr1)
    ftr1.SetGeometry(geom2)
    print(f'Update feature (area = {geom2.Area()})')
    lyr.SetFeature(ftr1)

If you add a feature with the larger geom before doing the update, it works fine. The error is only when you try and update the existing small feature.

Thanks,

Jon

Jon Morris
Software Developer


e: ?
Jon.Morris at jbarisk.com<mailto:Jon.Morris at jbarisk.com>
t:
+44 (0)1756 799919<tel:+44%20(0)1756%20799919>
www.jbarisk.com<http://www.jbarisk.com/>
[cid:image001.png at 01D799D4.90C27AE0]
[Facebook]<https://www.facebook.com/TheFloodPeople>
[LinkedIn]<https://www.linkedin.com/company/jba-risk-management/>
[Twitter]<https://twitter.com/JBARisk>
[YouTube]<https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>



All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 9886 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 651 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 715 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0012.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 966 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0013.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 784 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0014.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image707752.png
Type: image/png
Size: 9886 bytes
Desc: image707752.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0015.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image178087.png
Type: image/png
Size: 651 bytes
Desc: image178087.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0016.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image313640.png
Type: image/png
Size: 715 bytes
Desc: image313640.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0017.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image889875.png
Type: image/png
Size: 966 bytes
Desc: image889875.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0018.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image935680.png
Type: image/png
Size: 784 bytes
Desc: image935680.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/ea308be5/attachment-0019.png>

From ni_hao88 at hotmail.com  Wed Aug 25 09:57:44 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 25 Aug 2021 16:57:44 +0000
Subject: [gdal-dev] NITF DES
In-Reply-To: <cae57232-935b-33f8-6252-85abb9856300@spatialys.com>
References: <DM5PR02MB3862B5625E13D88631E88486F1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
 <6b0ea16f-5a17-4160-07e5-9f9988296379@spatialys.com>
 <DM5PR02MB38627C5ADA3BAF97707CEB0FF1C59@DM5PR02MB3862.namprd02.prod.outlook.com>
 <cae57232-935b-33f8-6252-85abb9856300@spatialys.com>
Message-ID: <DM5PR02MB3862A02557AC35DDA93BB801F1C69@DM5PR02MB3862.namprd02.prod.outlook.com>

Thank you Even for your help.


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: August 24, 2021 3:28 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF DES



Le 24/08/2021 ? 20:07, ni hao a ?crit :
Hi Even,

Thank you for your reply.
Is there a simpler example to remove DES (say DES ID = 1) from an existing NITF, or replace DES with a null string?
No, there's no code to update/remove a DES . You'll need to edit the file at byte level, or rewrite a new one without them



________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: August 24, 2021 1:50 PM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF DES


Hello,

yes, first look:

- at the doc of the DES creation option in https://gdal.org/drivers/raster/nitf.html#creation-issues

- at https://gdal.org/drivers/raster/nitf_advanced.html#data-extension-segments-xml-des

you will need to compose the DES segment in a relatively low level.

Look at examples in :

- https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3728

- https://github.com/OSGeo/gdal/blob/de6a6b44302be5c6a294d86f6ca35ebcdce563ff/autotest/gdrivers/nitf.py#L3795

Note: gdal.EscapeString(des_data, gdal.CPLES_BackslashQuotable) with binary data only works since a commit done yesterday in GDAL master!

If using an older version, backslash escaping can be done with :

escaped_data = data.replace(b'\\', b'\\\\').replace(b'\0', b'\\0') \
                   .replace(b'\"', b'\\"').replace(b'\n', b'\\n')

Best regards,

Even

Le 24/08/2021 ? 18:45, ni hao a ?crit :
Hi List,

Is there a GDAL utility or Python code to delete/alter/write to NITF Data Extension Segments (DES) ?

Thanks.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210825/48dff8da/attachment.html>

From even.rouault at spatialys.com  Wed Aug 25 10:34:55 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Aug 2021 19:34:55 +0200
Subject: [gdal-dev] Retiring osgeo/gdal:alpine-ultra-small Docker image
Message-ID: <ecb5da61-4ca8-d3f8-4151-56d0164a269a@spatialys.com>

Hi,

I'm considering retiring the osgeo/gdal:alpine-ultra-small Docker image. 
It's size difference with the osgeo/gdal:alpine-small one is small (50 
MB vs 59 MB), and with arm64 images being now generated, the 
cross-compilation time for it becomes a bit painful. Any opposition to that?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From thet at traverse.ai  Wed Aug 25 18:47:35 2021
From: thet at traverse.ai (Thet Lin Thu)
Date: Thu, 26 Aug 2021 01:47:35 +0000
Subject: [gdal-dev] In GDAL Warp What WM Should I Choose
Message-ID: <v1-XorGyOR7OoaznzbC5-581be3c9dd6c0ee299d30afbd421ba2b@traverse.ai>

I am trying to stitch a global elevation raster dataset made of 14,000 files
into 1 single 120GB file. I already have the VRT generated and have tried
applying both gdal warp and gdal translate on it with varying results in speed.
Although I am not warping anything (same projection for the input and output) It
seems like gdal warp is faster because I can set a larger memory cache and can
enable -multi for multi core processing.
My question is, what is the correct -wm to set? I have an AWS machine with 700GB
or so of RAM. The total dataset in question is only 120GB (deflated compressed).
I have set GDAL_CACHEMAX at 500GB as well. I am using the most latest  GDAL
3.3.1 in the full Ubuntu docker environment.
I saw in many places about the ambiguities of wm, especially this:-
https://github.com/OSGeo/gdal/issues/1345

That issue was in 2019 and seems like a few things happened around 3.2 and 3.3
in 2020 with regards to warp performance and PROJ.
So based on the assumption that I have any amount of RAM I can procure, is the
best value for wm around "100" still as per the github link?
My apologies if I have interpreted some of the articles I have read in dribs and
drabs across the internet. Thank you for the help.
Thet
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/b4363d97/attachment.html>

From howard at hobu.co  Thu Aug 26 07:19:57 2021
From: howard at hobu.co (Howard Butler)
Date: Thu, 26 Aug 2021 09:19:57 -0500
Subject: [gdal-dev] Retiring osgeo/gdal:alpine-ultra-small Docker image
In-Reply-To: <ecb5da61-4ca8-d3f8-4151-56d0164a269a@spatialys.com>
References: <ecb5da61-4ca8-d3f8-4151-56d0164a269a@spatialys.com>
Message-ID: <1DA31468-1D96-4200-A642-8AB235BC4C5F@hobu.co>



> On Aug 25, 2021, at 12:34 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> I'm considering retiring the osgeo/gdal:alpine-ultra-small Docker image. It's size difference with the osgeo/gdal:alpine-small one is small (50 MB vs 59 MB), and with arm64 images being now generated, the cross-compilation time for it becomes a bit painful. Any opposition to that?

+1 for simpler and faster infrastructure

From patrick.mckendree.young at gmail.com  Thu Aug 26 08:21:37 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Thu, 26 Aug 2021 09:21:37 -0600
Subject: [gdal-dev] On Internal PROJ When Building
Message-ID: <CADXYQQ6kwff0PRVnz+vX4SF-2WBNFJM81=M2GDC67ckqnR05vA@mail.gmail.com>

Hi,

I was curious how relevant building an internal PROJ library is these days
as described in this note

https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev

I noticed GDAL's docker builds still do this.  Are there some common
dependencies that still use the older PROJ?

Many thanks!
Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/60bc5c6d/attachment.html>

From even.rouault at spatialys.com  Thu Aug 26 08:35:05 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Aug 2021 17:35:05 +0200
Subject: [gdal-dev] On Internal PROJ When Building
In-Reply-To: <CADXYQQ6kwff0PRVnz+vX4SF-2WBNFJM81=M2GDC67ckqnR05vA@mail.gmail.com>
References: <CADXYQQ6kwff0PRVnz+vX4SF-2WBNFJM81=M2GDC67ckqnR05vA@mail.gmail.com>
Message-ID: <ad13095d-5929-2e31-611a-4c96777fcaf0@spatialys.com>

Patrick,

I guess this is at least relevant for the ubuntu-full config that uses 
libspatialite from the distro. This libspatialite must link against proj 
6.3.1 from the Ubuntu 20.04 distro, whereas the GDAL we build will link 
against the PROJ built in the image, so without that trick, crashes 
would happen.

Even

Le 26/08/2021 ? 17:21, Patrick Young a ?crit?:
> Hi,
>
> I was curious how relevant?building an internal PROJ library is these 
> days as described in this note
>
> https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev 
> <https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev>
>
> I noticed GDAL's docker builds still do this.? Are there some common 
> dependencies that still use the older PROJ?
>
> Many thanks!
> Patrick
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/d656c88e/attachment.html>

From even.rouault at spatialys.com  Thu Aug 26 08:43:23 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Aug 2021 17:43:23 +0200
Subject: [gdal-dev] On Internal PROJ When Building
In-Reply-To: <ad13095d-5929-2e31-611a-4c96777fcaf0@spatialys.com>
References: <CADXYQQ6kwff0PRVnz+vX4SF-2WBNFJM81=M2GDC67ckqnR05vA@mail.gmail.com>
 <ad13095d-5929-2e31-611a-4c96777fcaf0@spatialys.com>
Message-ID: <eab5b349-2ab5-2ce6-3ccb-525f102373cd@spatialys.com>

Actually looking at the wiki page, I've just updated it since it would 
not have worked if the system PROJ is >= 6.0. The update consists in 
adding? -DPROJ_INTERNAL_CPP_NAMESPACE to CXXFLAGS when building PROJ so 
that C++ symbols of the "internal" proj don't clash with the ones of the 
system PROJ (that was Docker build recipees already did)

Le 26/08/2021 ? 17:35, Even Rouault a ?crit?:
>
> Patrick,
>
> I guess this is at least relevant for the ubuntu-full config that uses 
> libspatialite from the distro. This libspatialite must link against 
> proj 6.3.1 from the Ubuntu 20.04 distro, whereas the GDAL we build 
> will link against the PROJ built in the image, so without that trick, 
> crashes would happen.
>
> Even
>
> Le 26/08/2021 ? 17:21, Patrick Young a ?crit?:
>> Hi,
>>
>> I was curious how relevant?building an internal PROJ library is these 
>> days as described in this note
>>
>> https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev 
>> <https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev>
>>
>> I noticed GDAL's docker builds still do this.? Are there some common 
>> dependencies that still use the older PROJ?
>>
>> Many thanks!
>> Patrick
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/fe6fcbc7/attachment.html>

From chriscorbell at gmail.com  Thu Aug 26 09:17:19 2021
From: chriscorbell at gmail.com (Christopher Corbell)
Date: Thu, 26 Aug 2021 09:17:19 -0700
Subject: [gdal-dev] CPLFindFile not honoring CPLSetConfigOption
In-Reply-To: <3a999a88-23da-2bdc-2544-1032e6c4052b@spatialys.com>
References: <CAP2bJPwrUMBQYSuxwDoC_a6xGbyy1WR=mKkd=etMnNKY10-OeA@mail.gmail.com>
 <3a999a88-23da-2bdc-2544-1032e6c4052b@spatialys.com>
Message-ID: <CAP2bJPy3ovnva7i_1jAR4fu9whDapgHmHUOOKkh3V3mskdTw2A@mail.gmail.com>

Thanks Even, that helped track it down.

Turns out we were calling GDALAllRegister() before calling
CPLSetConfigOption(), I think that was causing the internal CPLFindeInit
call, looks fixed now.

Cheers!

On Tue, Aug 24, 2021 at 2:26 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Christopher,
>
> CPLFindFile() calls CPLFinderInit() which issues CPLGetConfigOption(
> "GDAL_DATA", nullptr). But CPLFinderInit() runs once per-thread. So a
> potential theory for what you observe would be that something runs
> CPLFindFile() before you call CPLSetConfigOption("GDAL_DATA", ...). Setting
> breakpoint on CPLFinderInit and CPLSetConfigOption should confirm if this
> is what actually happens
>
> Even
> Le 24/08/2021 ? 23:17, Christopher Corbell a ?crit :
>
> I'm tracking down a bug with WFS data import in our app and it seems like
> the cause is a call to CPLFindFile returning NULL, looking for a
> gmlasconf.xml file that should be in the gdal share directory.
>
> This is a Mac universal binary app that embeds GDAL as a dylib and also
> includes the share files, so we use CPLSetConfigOption("GDAL_DATA", ...) to
> configure the CPL. So we don't rely on any absolute install/build paths or
> on the end-user installing their own GDAL. This worked previously but we
> recently updated to GDAL 3.3.1.
>
> The WFS import fails when CPLFindFile returns NULL on attempt to read that
> config file, but the bug does not occur on my workstation, where this copy
> of GDAL was built. It turns out this is because CPLFindFile will return the
> original location of the GDAL build/install share directory (which still
> exists on my system).
>
> Can anyone offer a theory why CPLFindFile might ignore the gdal data path
> and only look in the absolute install path set when GDAL was built? Here's
> some debugger output showing how these functions point to two different
> directories at runtime:
>
> (lldb) po (const char*) CPLGetConfigOption("GDAL_DATA")
> "/Users/ccorbell/Development/working/ccorbell_27x_MBP/IP Source/Plug-ins/Common/Data/GIS/gdal/"
>
> (lldb) po (const char*) CPLFindFile("gdal", "gmlasconf.xml")
> "/Users/ccorbell/Development/working/ccorbell_27x_MBP/AppSource/ThirdPartySource/GDAL/config/gdal-3.3.1-x86_64/share/gdal/gmlasconf.xml"
>
>
> Thanks,
> Christopher
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/fb8e8fbe/attachment-0001.html>

From patrick.mckendree.young at gmail.com  Thu Aug 26 09:33:15 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Thu, 26 Aug 2021 10:33:15 -0600
Subject: [gdal-dev] On Internal PROJ When Building
In-Reply-To: <eab5b349-2ab5-2ce6-3ccb-525f102373cd@spatialys.com>
References: <CADXYQQ6kwff0PRVnz+vX4SF-2WBNFJM81=M2GDC67ckqnR05vA@mail.gmail.com>
 <ad13095d-5929-2e31-611a-4c96777fcaf0@spatialys.com>
 <eab5b349-2ab5-2ce6-3ccb-525f102373cd@spatialys.com>
Message-ID: <CADXYQQ6mpz27X7MXuM7tXsEdnueMRpWGWgTUW0F-22yj1KYUKA@mail.gmail.com>

Thanks Even!

As newer versions of Ubuntu pick up fresher versions of proj (was checking
out https://packages.ubuntu.com/groovy/libproj-dev), is there a minimum
version of proj that'll be reasonable (e.g. 7 or 8) to use?

P



On Thu, Aug 26, 2021 at 9:44 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Actually looking at the wiki page, I've just updated it since it would not
> have worked if the system PROJ is >= 6.0. The update consists in adding
> -DPROJ_INTERNAL_CPP_NAMESPACE to CXXFLAGS when building PROJ so that C++
> symbols of the "internal" proj don't clash with the ones of the system PROJ
> (that was Docker build recipees already did)
> Le 26/08/2021 ? 17:35, Even Rouault a ?crit :
>
> Patrick,
>
> I guess this is at least relevant for the ubuntu-full config that uses
> libspatialite from the distro. This libspatialite must link against proj
> 6.3.1 from the Ubuntu 20.04 distro, whereas the GDAL we build will link
> against the PROJ built in the image, so without that trick, crashes would
> happen.
>
> Even
> Le 26/08/2021 ? 17:21, Patrick Young a ?crit :
>
> Hi,
>
> I was curious how relevant building an internal PROJ library is these days
> as described in this note
>
> https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev
>
> I noticed GDAL's docker builds still do this.  Are there some common
> dependencies that still use the older PROJ?
>
> Many thanks!
> Patrick
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/4ab6a3a9/attachment.html>

From j1 at jimenezshaw.com  Thu Aug 26 09:45:09 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 26 Aug 2021 18:45:09 +0200
Subject: [gdal-dev] Crash on cancel overviews creation
Message-ID: <CADRrdKs2sxThD-BYcYSzVdYA1XKO3Y=8tAUA5YZ4E9Tq6UUseQ@mail.gmail.com>

Hi

Some times (unfortunately it is not reproducible every time) we got a crash
when we cancel the overview generation.
I tried to reproduce it in my Ubuntu 20.04, but couldn't. My colleagues are
able to reproduce some times on Mac and Windows.

In C++, with GDAL 3.3.1, calling BuildOverviews("AVERAGE", ...) to produce
embedded overview and calling the cancel callback, it crashes on
overviews.cpp:

~PointerHolder() { CPLFree(ptr); }. (line 3929)
The reason of the crash is : Thread 34: EXC_BAD_ACCESS (code=1,
address=0x1d)
Yes, the debugger says the value of "ptr" is 0x1d... that does not make so
much sense.

the debugger shows this steps on the back trace:
poJob->oDstBufferHolder.reset(new PointerHolder(poJob->pDstBuffer));  (line
4930)
GDALRegenerateOverviewsMultiBand (line 4638)


Before calling to BuildOverviews I am calling
CPLSetConfigOption("GDAL_NUM_THREADS", "ALL_CPUS");
to make it multithreaded.

The image is an RGBA 8bit with JPEG compression.

Is anything wrong there?

Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/cd00b7cc/attachment.html>

From even.rouault at spatialys.com  Thu Aug 26 09:51:51 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Aug 2021 18:51:51 +0200
Subject: [gdal-dev] On Internal PROJ When Building
In-Reply-To: <CADXYQQ6mpz27X7MXuM7tXsEdnueMRpWGWgTUW0F-22yj1KYUKA@mail.gmail.com>
References: <CADXYQQ6kwff0PRVnz+vX4SF-2WBNFJM81=M2GDC67ckqnR05vA@mail.gmail.com>
 <ad13095d-5929-2e31-611a-4c96777fcaf0@spatialys.com>
 <eab5b349-2ab5-2ce6-3ccb-525f102373cd@spatialys.com>
 <CADXYQQ6mpz27X7MXuM7tXsEdnueMRpWGWgTUW0F-22yj1KYUKA@mail.gmail.com>
Message-ID: <2a9d19f2-60ec-b7c0-a6b4-d0cd54be3cfc@spatialys.com>


Le 26/08/2021 ? 18:33, Patrick Young a ?crit?:
> Thanks Even!
>
> As newer versions of Ubuntu pick up fresher versions of proj (was 
> checking out https://packages.ubuntu.com/groovy/libproj-dev 
> <https://packages.ubuntu.com/groovy/libproj-dev>), is there a minimum 
> version of proj that'll be reasonable (e.g. 7 or 8) to use?

The latest PROJ version you can use, the better. At some point I can 
imagine we might want to drop the 6.x series for example. I guess we 
must wait at least for the next Ubuntu LTS for that.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Aug 26 10:02:39 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Aug 2021 19:02:39 +0200
Subject: [gdal-dev] Crash on cancel overviews creation
In-Reply-To: <CADRrdKs2sxThD-BYcYSzVdYA1XKO3Y=8tAUA5YZ4E9Tq6UUseQ@mail.gmail.com>
References: <CADRrdKs2sxThD-BYcYSzVdYA1XKO3Y=8tAUA5YZ4E9Tq6UUseQ@mail.gmail.com>
Message-ID: <400c1a70-b74c-8218-56ff-80d662522bb2@spatialys.com>

Javier,

Hopefully https://github.com/OSGeo/gdal/pull/4347 should solve that

Even

Le 26/08/2021 ? 18:45, Javier Jimenez Shaw a ?crit?:
> Hi
>
> Some times (unfortunately it is not reproducible every time) we got a 
> crash when we cancel the overview generation.
> I tried to reproduce it in my Ubuntu 20.04, but couldn't. My 
> colleagues are able to reproduce some times on Mac and Windows.
>
> In C++, with GDAL 3.3.1, calling BuildOverviews("AVERAGE", ...) to 
> produce embedded overview and calling the cancel callback, it crashes 
> on overviews.cpp:
>
> ~PointerHolder() { CPLFree(ptr); }. (line 3929)
> The reason of the crash is : Thread 34: EXC_BAD_ACCESS (code=1, 
> address=0x1d)
> Yes, the debugger says the value of "ptr" is 0x1d... that does not 
> make so much sense.
>
> the debugger shows this steps on the back trace:
> poJob->oDstBufferHolder.reset(new PointerHolder(poJob->pDstBuffer));? 
> (line 4930)
> GDALRegenerateOverviewsMultiBand (line 4638)
>
>
> Before calling to BuildOverviews I am calling
> CPLSetConfigOption("GDAL_NUM_THREADS", "ALL_CPUS");
> to make it multithreaded.
>
> The image is an RGBA 8bit with JPEG compression.
>
> Is anything wrong there?
>
> Thanks.
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/646a5b3f/attachment.html>

From schwehr at gmail.com  Thu Aug 26 12:30:48 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 26 Aug 2021 12:30:48 -0700
Subject: [gdal-dev] Retiring osgeo/gdal:alpine-ultra-small Docker image
In-Reply-To: <1DA31468-1D96-4200-A642-8AB235BC4C5F@hobu.co>
References: <ecb5da61-4ca8-d3f8-4151-56d0164a269a@spatialys.com>
 <1DA31468-1D96-4200-A642-8AB235BC4C5F@hobu.co>
Message-ID: <CACmBxyv77xc-K8rZ0RGEvTdMTKNd9Mkq5UTkgKksHg6R5U8QRA@mail.gmail.com>

+1 to match Howard's sentiment.

Unless someone steps up with a strong use case for why to keep it, I think
it should go.

I am curious if any of the alpine images are getting lots of use outside of
GDAL's CI testing.

On Thu, Aug 26, 2021 at 7:20 AM Howard Butler <howard at hobu.co> wrote:

>
>
> > On Aug 25, 2021, at 12:34 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Hi,
> >
> > I'm considering retiring the osgeo/gdal:alpine-ultra-small Docker image.
> It's size difference with the osgeo/gdal:alpine-small one is small (50 MB
> vs 59 MB), and with arm64 images being now generated, the cross-compilation
> time for it becomes a bit painful. Any opposition to that?
>
> +1 for simpler and faster infrastructure
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210826/32c8e6ae/attachment.html>

From even.rouault at spatialys.com  Thu Aug 26 12:32:50 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Aug 2021 21:32:50 +0200
Subject: [gdal-dev] Retiring osgeo/gdal:alpine-ultra-small Docker image
In-Reply-To: <CACmBxyv77xc-K8rZ0RGEvTdMTKNd9Mkq5UTkgKksHg6R5U8QRA@mail.gmail.com>
References: <ecb5da61-4ca8-d3f8-4151-56d0164a269a@spatialys.com>
 <1DA31468-1D96-4200-A642-8AB235BC4C5F@hobu.co>
 <CACmBxyv77xc-K8rZ0RGEvTdMTKNd9Mkq5UTkgKksHg6R5U8QRA@mail.gmail.com>
Message-ID: <09df9b54-1c7c-1a52-b162-6887597d7902@spatialys.com>


> I am curious?if any of the alpine images are getting lots of use 
> outside of GDAL's CI testing.
They aren't used by GDAL's CI. Was just referring to CPU time on my PC 
when building them

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Aug 26 13:45:50 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Aug 2021 22:45:50 +0200
Subject: [gdal-dev] Remainder: GDAL 3.3.2 RC next monday
Message-ID: <db50c646-99f2-e897-f778-4a432ae0c103@spatialys.com>

Hi,

just a remainder I intend to prepare a GDAL 3.3.2 RC next monday.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From aborruso at gmail.com  Fri Aug 27 02:31:40 2021
From: aborruso at gmail.com (andy)
Date: Fri, 27 Aug 2021 11:31:40 +0200
Subject: [gdal-dev] GeoRSS AUTHOR_NAME option
Message-ID: <CAHEdGZPV0c-srjP43-JGE7=wZBok1oh4WXz08smxvMN-uMxF=Q@mail.gmail.com>

Hi,
if I use AUTHOR_NAME option, I have no element in the XML header.

Starting in example from this CSV

description,link,pubDate,title,guid
a description,https://lorem.com/1431092533786918915,2021-08-27T03:13:43Z,a
title,https://lorem.com/1431092533786918915

and running

ogr2ogr -f geoRSS -dsco TITLE="header title" -dsco
LINK="https://lorem.com/feed.xml" -dsco DESCRIPTION="header
description" -dsco AUTHOR_NAME="The great author" -dsco
USE_EXTENSIONS="YES" tmp.xml tmp.csv -oo AUTODETECT_TYPE=YES

I have this

<?xml version="1.0"?><rss version="2.0"
xmlns:georss="http://www.georss.org/georss">
  <channel>
    <title>header title</title>
    <description>header description</description>
    <link>https://lorem.com/feed.xml</link>
    <item>
      <description>a description</description>
      <link>https://lorem.com/1431092533786918915</link>
      <pubDate>Fri, 27 Aug 2021 03:13:43 GMT</pubDate>
      <title>a title</title>
      <guid>https://lorem.com/1431092533786918915</guid>
    </item>
  </channel></rss>

I?m using GDAL 2.4.4, released 2020/01/08. Do I have this problem due to
this old version?

Thank you
-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210827/55e6c4db/attachment.html>

From even.rouault at spatialys.com  Fri Aug 27 03:10:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Aug 2021 12:10:14 +0200
Subject: [gdal-dev] GeoRSS AUTHOR_NAME option
In-Reply-To: <CAHEdGZPV0c-srjP43-JGE7=wZBok1oh4WXz08smxvMN-uMxF=Q@mail.gmail.com>
References: <CAHEdGZPV0c-srjP43-JGE7=wZBok1oh4WXz08smxvMN-uMxF=Q@mail.gmail.com>
Message-ID: <eb4fc46b-8135-d660-1805-fe6bf600cb0e@spatialys.com>

Andrea,

the driver documentation indicates that AUTHOR_NAME is only used for 
Atom format output, and that by default the driver uses the RSS format, 
so this behaves as expecte

Even

Le 27/08/2021 ? 11:31, andy a ?crit?:
>
> Hi,
> if I use AUTHOR_NAME option, I have no element in the XML header.
>
> Starting in example from this CSV
>
> |description,link,pubDate,title,guid a 
> description,https://lorem.com/1431092533786918915,2021-08-27T03:13:43Z,a 
> <https://lorem.com/1431092533786918915,2021-08-27T03:13:43Z,a> 
> title,https://lorem.com/1431092533786918915 
> <https://lorem.com/1431092533786918915> |
>
> and running
>
> |ogr2ogr -f geoRSS -dsco TITLE="header title" -dsco 
> LINK="https://lorem.com/feed.xml <https://lorem.com/feed.xml>" -dsco 
> DESCRIPTION="header description" -dsco AUTHOR_NAME="The great author" 
> -dsco USE_EXTENSIONS="YES" tmp.xml tmp.csv -oo AUTODETECT_TYPE=YES |
>
> I have this
>
> |<?xml version="1.0"?> <rss version="2.0" 
> xmlns:georss="http://www.georss.org/georss 
> <http://www.georss.org/georss>"> <channel> <title>header title</title> 
> <description>header description</description> 
> <link>https://lorem.com/feed.xml <https://lorem.com/feed.xml></link> 
> <item> <description>a description</description> 
> <link>https://lorem.com/1431092533786918915 
> <https://lorem.com/1431092533786918915></link> <pubDate>Fri, 27 Aug 
> 2021 03:13:43 GMT</pubDate> <title>a title</title> 
> <guid>https://lorem.com/1431092533786918915 
> <https://lorem.com/1431092533786918915></guid> </item> </channel> </rss> |
>
> I?m using GDAL 2.4.4, released 2020/01/08. Do I have this problem due 
> to this old version?
>
> Thank you
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto <https://medium.com/tantotanto>
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210827/213b9c63/attachment-0001.html>

From aborruso at gmail.com  Fri Aug 27 03:45:50 2021
From: aborruso at gmail.com (andy)
Date: Fri, 27 Aug 2021 12:45:50 +0200
Subject: [gdal-dev] GeoRSS AUTHOR_NAME option
In-Reply-To: <eb4fc46b-8135-d660-1805-fe6bf600cb0e@spatialys.com>
References: <CAHEdGZPV0c-srjP43-JGE7=wZBok1oh4WXz08smxvMN-uMxF=Q@mail.gmail.com>
 <eb4fc46b-8135-d660-1805-fe6bf600cb0e@spatialys.com>
Message-ID: <CAHEdGZNNz3oXOE43s4gvqrxf9S=Vbmg_Xa98aDqL1MOQSK0DBA@mail.gmail.com>

Thank you very much

______
Scusami per la brevit?, ti sto scrivendo dal cellulare.

website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E EPSG:4326

Il ven 27 ago 2021, 12:10 Even Rouault <even.rouault at spatialys.com> ha
scritto:

> Andrea,
>
> the driver documentation indicates that AUTHOR_NAME is only used for Atom
> format output, and that by default the driver uses the RSS format, so this
> behaves as expecte
>
> Even
> Le 27/08/2021 ? 11:31, andy a ?crit :
>
> Hi,
> if I use AUTHOR_NAME option, I have no element in the XML header.
>
> Starting in example from this CSV
>
> description,link,pubDate,title,guid
> a description,https://lorem.com/1431092533786918915,2021-08-27T03:13:43Z,a title,https://lorem.com/1431092533786918915
>
> and running
>
> ogr2ogr -f geoRSS -dsco TITLE="header title" -dsco LINK="https://lorem.com/feed.xml" -dsco DESCRIPTION="header description" -dsco AUTHOR_NAME="The great author" -dsco USE_EXTENSIONS="YES" tmp.xml tmp.csv -oo AUTODETECT_TYPE=YES
>
> I have this
>
> <?xml version="1.0"?><rss version="2.0" xmlns:georss="http://www.georss.org/georss">
>   <channel>
>     <title>header title</title>
>     <description>header description</description>
>     <link>https://lorem.com/feed.xml</link>
>     <item>
>       <description>a description</description>
>       <link>https://lorem.com/1431092533786918915</link>
>       <pubDate>Fri, 27 Aug 2021 03:13:43 GMT</pubDate>
>       <title>a title</title>
>       <guid>https://lorem.com/1431092533786918915</guid>
>     </item>
>   </channel></rss>
>
> I?m using GDAL 2.4.4, released 2020/01/08. Do I have this problem due to
> this old version?
>
> Thank you
> --
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
>  in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210827/9be67a04/attachment.html>

From j1 at jimenezshaw.com  Fri Aug 27 06:56:56 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 27 Aug 2021 15:56:56 +0200
Subject: [gdal-dev] Crash on cancel overviews creation
In-Reply-To: <400c1a70-b74c-8218-56ff-80d662522bb2@spatialys.com>
References: <CADRrdKs2sxThD-BYcYSzVdYA1XKO3Y=8tAUA5YZ4E9Tq6UUseQ@mail.gmail.com>
 <400c1a70-b74c-8218-56ff-80d662522bb2@spatialys.com>
Message-ID: <CADRrdKvn67E9j-eic-3JhCGdoQa+6VvRui64-ppkmOF-pC48ow@mail.gmail.com>

Thanks Even

We tested your patch and we were not able to crash it. It looks like fixed
:)
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Thu, 26 Aug 2021 at 19:02, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
> Hopefully https://github.com/OSGeo/gdal/pull/4347 should solve that
>
> Even
> Le 26/08/2021 ? 18:45, Javier Jimenez Shaw a ?crit :
>
> Hi
>
> Some times (unfortunately it is not reproducible every time) we got a
> crash when we cancel the overview generation.
> I tried to reproduce it in my Ubuntu 20.04, but couldn't. My colleagues
> are able to reproduce some times on Mac and Windows.
>
> In C++, with GDAL 3.3.1, calling BuildOverviews("AVERAGE", ...) to produce
> embedded overview and calling the cancel callback, it crashes on
> overviews.cpp:
>
> ~PointerHolder() { CPLFree(ptr); }. (line 3929)
> The reason of the crash is : Thread 34: EXC_BAD_ACCESS (code=1,
> address=0x1d)
> Yes, the debugger says the value of "ptr" is 0x1d... that does not make so
> much sense.
>
> the debugger shows this steps on the back trace:
> poJob->oDstBufferHolder.reset(new PointerHolder(poJob->pDstBuffer));
> (line 4930)
> GDALRegenerateOverviewsMultiBand (line 4638)
>
>
> Before calling to BuildOverviews I am calling
> CPLSetConfigOption("GDAL_NUM_THREADS", "ALL_CPUS");
> to make it multithreaded.
>
> The image is an RGBA 8bit with JPEG compression.
>
> Is anything wrong there?
>
> Thanks.
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210827/20790c06/attachment.html>

From aharond11 at gmail.com  Sat Aug 28 09:08:56 2021
From: aharond11 at gmail.com (aharon david)
Date: Sat, 28 Aug 2021 19:08:56 +0300
Subject: [gdal-dev] ECEF CRS
Message-ID: <CAAcYN0yWH=PN9LfGtPjrfRofXqPbCQJYyrGMbYh_nz5UJiZMFw@mail.gmail.com>

Hi,

ECEF is a pure matemtiacl Coordinate System
In that way it is not reflect an area on the real world.
Suppose that I got from some where, a layer with an ECEF CRS, is there a
way to know what was the original CRS (that reflected on earth) of this
layer?
Is there a way to create ECEF layer and keep the original CRS in the ECEF
WKT?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210828/c33c2cc6/attachment.html>

From aharond11 at gmail.com  Sat Aug 28 09:10:09 2021
From: aharond11 at gmail.com (aharon david)
Date: Sat, 28 Aug 2021 19:10:09 +0300
Subject: [gdal-dev] WKT user data
Message-ID: <CAAcYN0wi6GQU0rvmfRgu51ZhbpVaFXBLkMZpDiiqkNEJBsbPRw@mail.gmail.com>

Hi,

What is the formal way for storing a user data section into a WKT ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210828/b1ee5cec/attachment.html>

From even.rouault at spatialys.com  Sat Aug 28 09:16:51 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Aug 2021 18:16:51 +0200
Subject: [gdal-dev] WKT user data
In-Reply-To: <CAAcYN0wi6GQU0rvmfRgu51ZhbpVaFXBLkMZpDiiqkNEJBsbPRw@mail.gmail.com>
References: <CAAcYN0wi6GQU0rvmfRgu51ZhbpVaFXBLkMZpDiiqkNEJBsbPRw@mail.gmail.com>
Message-ID: <6649731a-2bb4-dbff-d072-106ad229e963@spatialys.com>

Hi,
> What is the formal way for storing a user data section into a WKT ?

Not completely sure what you've in mind, and assuming you speak about 
WKT CRS, probably using the REMARK[] optional node. See 
http://docs.opengeospatial.org/is/18-010r7/18-010r7.html#38 (there are 
other examples using REMARK[] throughout the document)

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sat Aug 28 10:00:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Aug 2021 19:00:45 +0200
Subject: [gdal-dev] ECEF CRS
In-Reply-To: <CAAcYN0yWH=PN9LfGtPjrfRofXqPbCQJYyrGMbYh_nz5UJiZMFw@mail.gmail.com>
References: <CAAcYN0yWH=PN9LfGtPjrfRofXqPbCQJYyrGMbYh_nz5UJiZMFw@mail.gmail.com>
Message-ID: <2c2e05d2-8ab0-85c5-b3fb-1cc3e4a79736@spatialys.com>


Le 28/08/2021 ? 18:08, aharon david a ?crit?:
> Hi,
>
> ECEF is a pure matemtiacl Coordinate System
> In that way it is not reflect an area on the real world.
> Suppose that I got from some where, a layer with an ECEF CRS, is there 
> a way to know what was the original CRS (that reflected on earth) of 
> this layer?

No. But if the ECEF CRS is in the same datum as the original CRS, then 
it is just a different representation that you can convert almost 
losslessly to a geographic or projected CRS based on the same datum.

With the projinfo utility shipped with PROJ >= 8.1.0, you can query the 
list of known CRSs whose area of use matches some bounding box. For example:

projinfo --list-crs --bbox 2,49,3,50 --spatial-test intersects 
--authority EPSG


> Is there a way to create ECEF layer and keep the original CRS in the 
> ECEF WKT?
See answer in other thread
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210828/8f728087/attachment.html>

From aharond11 at gmail.com  Sat Aug 28 23:06:33 2021
From: aharond11 at gmail.com (aharon david)
Date: Sun, 29 Aug 2021 09:06:33 +0300
Subject: [gdal-dev] WFS Vector Layer Improvement
Message-ID: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>

Hi,

I want to suggest an  improvement in WFS Vector Layer.


my suggestion is just to remove the lines 839 and 840:
 osURL = CPLURLAddKVP(osURL, "TYPENAME", nullptr);
 osURL = CPLURLAddKVP(osURL, "TYPENAMES", nullptr);

in file: "gdal-3.3.1\ogr\ogrsf_frmts\wfs\ogrwfsdatasource.cpp".

The big advantage is that the GetCapabilitiy Response will be minimal and
contain info only
for the layers that are set in the tag - TYPENAME in case it is placed in
the pszBaseURL.

There is no disadvantage to this change.
There is no change in the function behavior.

THanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210829/049fbfb3/attachment.html>

From bradh at frogmouth.net  Sat Aug 28 23:31:15 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Sun, 29 Aug 2021 16:31:15 +1000
Subject: [gdal-dev] WFS Vector Layer Improvement
In-Reply-To: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
References: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
Message-ID: <9539141.ljs6VBTFWi@audax>

On Sunday, 29 August 2021 4:06:33 PM AEST aharon david wrote:
> I want to suggest an  improvement in WFS Vector Layer.
You can make Pull Requests at https://github.com/OSGeo/gdal

Please check the CONTRIBUTING.md file in that repository (or your checkout) 
first.

Brad





From even.rouault at spatialys.com  Sun Aug 29 06:51:30 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 29 Aug 2021 15:51:30 +0200
Subject: [gdal-dev] WFS Vector Layer Improvement
In-Reply-To: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
References: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
Message-ID: <7210f40c-e879-3828-26fd-64fe2d75e9a7@spatialys.com>

David,

Per the standard (at least I checked in WFS 2.0), typename/typenames is 
not a standardized query parameter for GetCapabilities. Are you 
referring to some servers that would accept it as an extension ?

Even

Le 29/08/2021 ? 08:06, aharon david a ?crit?:
> Hi,
>
> I want to suggest an? improvement in WFS Vector Layer.
>
>
> my suggestion is just to remove the lines 839 and 840:
> ?osURL = CPLURLAddKVP(osURL, "TYPENAME", nullptr);
> ?osURL = CPLURLAddKVP(osURL, "TYPENAMES", nullptr);
>
> in file: "gdal-3.3.1\ogr\ogrsf_frmts\wfs\ogrwfsdatasource.cpp".
>
> The big advantage is that the GetCapabilitiy?Response will be minimal 
> and contain?info only
> for the layers that are set in the tag - TYPENAME in case it is placed 
> in the?pszBaseURL.
>
> There is no disadvantage to this change.
> There is no change in the function behavior.
>
> THanks.
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210829/54a74e69/attachment.html>

From even.rouault at spatialys.com  Sun Aug 29 07:59:12 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 29 Aug 2021 16:59:12 +0200
Subject: [gdal-dev] WFS Vector Layer Improvement
In-Reply-To: <CAAcYN0zJzJexLDDGbHhUSGRaoZFi33xMWanwtphzEQ5oxuYJGw@mail.gmail.com>
References: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
 <7210f40c-e879-3828-26fd-64fe2d75e9a7@spatialys.com>
 <CAAcYN0zJzJexLDDGbHhUSGRaoZFi33xMWanwtphzEQ5oxuYJGw@mail.gmail.com>
Message-ID: <6c19ef61-254a-87bb-c7e8-02f393308189@spatialys.com>

(Adding back the list)

you can see in?the?following URL that typename\typenames?are exist in 
the WFS2 schema examples:
> http://schemas.opengis.net/wfs/2.0/examples/KVP/kvp.txt 
> <http://schemas.opengis.net/wfs/2.0/examples/KVP/kvp.txt>
In those examples, Typename is just for GetFeature and 
DescribeFeatureType, not GetCapabilities
>
> anyway, it is the standard of servers less than WFS 2.0 by sure.

Not in WFS 1.1 as far as I can see in 
http://docs.opengeospatial.org/is/04-094r1/04-094r1.html#88

Even

>
>
>
>
>
>
> ??????? ??? ??, 29 ????? 2021 ?-16:51 ??? ?Even Rouault?? 
> <?even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>??>:?
>
>     David,
>
>     Per the standard (at least I checked in WFS 2.0),
>     typename/typenames is not a standardized query parameter for
>     GetCapabilities. Are you referring to some servers that would
>     accept it as an extension ?
>
>     Even
>
>     Le 29/08/2021 ? 08:06, aharon david a ?crit?:
>>     Hi,
>>
>>     I want to suggest an? improvement in WFS Vector Layer.
>>
>>
>>     my suggestion is just to remove the lines 839 and 840:
>>     ?osURL = CPLURLAddKVP(osURL, "TYPENAME", nullptr);
>>     ?osURL = CPLURLAddKVP(osURL, "TYPENAMES", nullptr);
>>
>>     in file: "gdal-3.3.1\ogr\ogrsf_frmts\wfs\ogrwfsdatasource.cpp".
>>
>>     The big advantage is that the GetCapabilitiy?Response will be
>>     minimal and contain?info only
>>     for the layers that are set in the tag - TYPENAME in case it is
>>     placed in the?pszBaseURL.
>>
>>     There is no disadvantage to this change.
>>     There is no change in the function behavior.
>>
>>     THanks.
>>
>>
>>
>>
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210829/a05aeead/attachment.html>

From even.rouault at spatialys.com  Sun Aug 29 11:10:36 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 29 Aug 2021 20:10:36 +0200
Subject: [gdal-dev] WFS Vector Layer Improvement
In-Reply-To: <CAAcYN0wifO9Ls3MNuY4m_k1wax9GFLRtp8p5QbtW4_1wxmsu9Q@mail.gmail.com>
References: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
 <7210f40c-e879-3828-26fd-64fe2d75e9a7@spatialys.com>
 <CAAcYN0zJzJexLDDGbHhUSGRaoZFi33xMWanwtphzEQ5oxuYJGw@mail.gmail.com>
 <6c19ef61-254a-87bb-c7e8-02f393308189@spatialys.com>
 <CAAcYN0wifO9Ls3MNuY4m_k1wax9GFLRtp8p5QbtW4_1wxmsu9Q@mail.gmail.com>
Message-ID: <163b13a4-3790-514a-fc34-941e3bbd7d17@spatialys.com>

(Adding back the list again, please "Answer all")

Le 29/08/2021 ? 19:59, aharon david a ?crit?:
> Ok, you right. But what about to add it as an extention? Why to remove 
> it by force?
To avoid emitting confusing requests.
> As far as i can see in the code, other arbitary extenetions are 
> permitted, why not to permit also this one?
This would only make sense if there were popular servers to implement 
such an extension.
>
> ?????? ??? ??, 29 ????? 2021, 17:59, ??? Even Rouault 
> ?<even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>>:
>
>     (Adding back the list)
>
>     you can see in?the?following URL that typename\typenames?are exist
>     in the WFS2 schema examples:
>>     http://schemas.opengis.net/wfs/2.0/examples/KVP/kvp.txt
>>     <http://schemas.opengis.net/wfs/2.0/examples/KVP/kvp.txt>
>     In those examples, Typename is just for GetFeature and
>     DescribeFeatureType, not GetCapabilities
>>
>>     anyway, it is the standard of servers less than WFS 2.0 by sure.
>
>     Not in WFS 1.1 as far as I can see in
>     http://docs.opengeospatial.org/is/04-094r1/04-094r1.html#88
>     <http://docs.opengeospatial.org/is/04-094r1/04-094r1.html#88>
>
>     Even
>
>>
>>
>>
>>
>>
>>
>>     ??????? ??? ??, 29 ????? 2021 ?-16:51 ??? ?Even Rouault??
>>     <?even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>??>:?
>>
>>         David,
>>
>>         Per the standard (at least I checked in WFS 2.0),
>>         typename/typenames is not a standardized query parameter for
>>         GetCapabilities. Are you referring to some servers that would
>>         accept it as an extension ?
>>
>>         Even
>>
>>         Le 29/08/2021 ? 08:06, aharon david a ?crit?:
>>>         Hi,
>>>
>>>         I want to suggest an? improvement in WFS Vector Layer.
>>>
>>>
>>>         my suggestion is just to remove the lines 839 and 840:
>>>         ?osURL = CPLURLAddKVP(osURL, "TYPENAME", nullptr);
>>>         ?osURL = CPLURLAddKVP(osURL, "TYPENAMES", nullptr);
>>>
>>>         in file: "gdal-3.3.1\ogr\ogrsf_frmts\wfs\ogrwfsdatasource.cpp".
>>>
>>>         The big advantage is that the GetCapabilitiy?Response will
>>>         be minimal and contain?info only
>>>         for the layers that are set in the tag - TYPENAME in case it
>>>         is placed in the?pszBaseURL.
>>>
>>>         There is no disadvantage to this change.
>>>         There is no change in the function behavior.
>>>
>>>         THanks.
>>>
>>>
>>>
>>>
>>>
>>>
>>>         _______________________________________________
>>>         gdal-dev mailing list
>>>         gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>>         https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>         -- 
>>         http://www.spatialys.com  <http://www.spatialys.com>
>>         My software is free, but my time generally not.
>>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210829/86866c0e/attachment-0001.html>

From robert.coup at koordinates.com  Mon Aug 30 02:15:38 2021
From: robert.coup at koordinates.com (Robert Coup)
Date: Mon, 30 Aug 2021 10:15:38 +0100
Subject: [gdal-dev] WFS Vector Layer Improvement
In-Reply-To: <163b13a4-3790-514a-fc34-941e3bbd7d17@spatialys.com>
References: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
 <7210f40c-e879-3828-26fd-64fe2d75e9a7@spatialys.com>
 <CAAcYN0zJzJexLDDGbHhUSGRaoZFi33xMWanwtphzEQ5oxuYJGw@mail.gmail.com>
 <6c19ef61-254a-87bb-c7e8-02f393308189@spatialys.com>
 <CAAcYN0wifO9Ls3MNuY4m_k1wax9GFLRtp8p5QbtW4_1wxmsu9Q@mail.gmail.com>
 <163b13a4-3790-514a-fc34-941e3bbd7d17@spatialys.com>
Message-ID: <CAFLLRpL3fa0xcVwJKmQEzjRUh-zGZ_uaBgVsWyF+2Nc-Pg7ZzA@mail.gmail.com>

FYI, the way it works with GeoServer is to use the URL paths:

/geoserver/wfs?service=WFS&request=GetCapabilities&version=2.0.0 ? results
for all workspaces & datasets
/geoserver/myworkspace/wfs?service=WFS&request=GetCapabilities&version=2.0.0
? results for all datasets in a single workspace
/geoserver/myworkspace/mydataset/wfs?service=WFS&request=GetCapabilities&version=2.0.0
? results for a single dataset


And there's a mechanism to suppress datasets from the global/workspace
capabilities responses (not advertised) but have them available for
dataset-only capabilities requests. (eg. mydataset-change-history).

More details:
https://docs.geoserver.org/stable/en/user/configuration/virtual-services.html

Since it's in the URL path component any of the above can be passed to GDAL
without interfering with the key-value parameters.

Rob :-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210830/7c2241f0/attachment.html>

From aharond11 at gmail.com  Mon Aug 30 03:57:51 2021
From: aharond11 at gmail.com (aharon david)
Date: Mon, 30 Aug 2021 13:57:51 +0300
Subject: [gdal-dev] WFS Vector Layer Improvement
In-Reply-To: <CAFLLRpL3fa0xcVwJKmQEzjRUh-zGZ_uaBgVsWyF+2Nc-Pg7ZzA@mail.gmail.com>
References: <CAAcYN0xzxLgrV4=qHTVWc4v_JngjjvkpYKcwOkdLcx5JU+Y3jQ@mail.gmail.com>
 <7210f40c-e879-3828-26fd-64fe2d75e9a7@spatialys.com>
 <CAAcYN0zJzJexLDDGbHhUSGRaoZFi33xMWanwtphzEQ5oxuYJGw@mail.gmail.com>
 <6c19ef61-254a-87bb-c7e8-02f393308189@spatialys.com>
 <CAAcYN0wifO9Ls3MNuY4m_k1wax9GFLRtp8p5QbtW4_1wxmsu9Q@mail.gmail.com>
 <163b13a4-3790-514a-fc34-941e3bbd7d17@spatialys.com>
 <CAFLLRpL3fa0xcVwJKmQEzjRUh-zGZ_uaBgVsWyF+2Nc-Pg7ZzA@mail.gmail.com>
Message-ID: <CAAcYN0yVuPBwPp27QDUcdV6bCVceQJ7+8AZ=VnWmUj+XVLUavQ@mail.gmail.com>

Thanks! It is very helpful.

Aharon David.

??????? ??? ??, 30 ????? 2021 ?-12:15 ??? ?Robert Coup?? <?
robert.coup at koordinates.com??>:?

> FYI, the way it works with GeoServer is to use the URL paths:
>
> /geoserver/wfs?service=WFS&request=GetCapabilities&version=2.0.0 ?
> results for all workspaces & datasets
>
> /geoserver/myworkspace/wfs?service=WFS&request=GetCapabilities&version=2.0.0
> ? results for all datasets in a single workspace
>
> /geoserver/myworkspace/mydataset/wfs?service=WFS&request=GetCapabilities&version=2.0.0
> ? results for a single dataset
>
>
> And there's a mechanism to suppress datasets from the global/workspace
> capabilities responses (not advertised) but have them available for
> dataset-only capabilities requests. (eg. mydataset-change-history).
>
> More details:
> https://docs.geoserver.org/stable/en/user/configuration/virtual-services.html
>
> Since it's in the URL path component any of the above can be passed to
> GDAL without interfering with the key-value parameters.
>
> Rob :-)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210830/b3586b14/attachment.html>

From even.rouault at spatialys.com  Mon Aug 30 05:27:06 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Aug 2021 14:27:06 +0200
Subject: [gdal-dev] GDAL 3.3.2 RC1 available
Message-ID: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.3.2 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.3.2/gdal332rc1.zip

A snapshot of the gdalautotest suite is also available :

https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.zip

GDAL-GRASS plugin:

 ? https://download.osgeo.org/gdal/3.3.2/gdal-grass-3.3.2.tar.gz

The NEWS file is here :

 ? https://github.com/OSGeo/gdal/blob/v3.3.2RC1/gdal/NEWS

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From rlc5m8 at mail.missouri.edu  Mon Aug 30 08:16:39 2021
From: rlc5m8 at mail.missouri.edu (Chastain, Raymond Lee (MU-Student))
Date: Mon, 30 Aug 2021 15:16:39 +0000
Subject: [gdal-dev] Lossless JPEG2000 compression with NITF Format and
 OpenJPEG
Message-ID: <CY4PR01MB24716E85C74116A8AF16D5A69FCB9@CY4PR01MB2471.prod.exchangelabs.com>

We're trying to create NITFs with lossless compression using the OpenJPEG driver for JPEG2000 compression.

We've set the "QUALITY=100" creation option but are still noticing that repeated conversions generate different perceptual image hashes.

The OpenJPEG driver mentions "REVERSIBLE=YES" but that doesn't seem to be a valid creation option for the NITF driver.

Sample gdal_translate command:
"gdal_translate -of NITF -co IC=C8 -co BLOCKXSIZE=256 -co BLOCKYSIZE=256 -co SDE_TRE=YES -co QUALITY=100 sample.tif reversible.nitf"

Am I going about this the right way?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210830/bff44fd9/attachment.html>

From even.rouault at spatialys.com  Mon Aug 30 08:21:05 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Aug 2021 17:21:05 +0200
Subject: [gdal-dev] Lossless JPEG2000 compression with NITF Format and
 OpenJPEG
In-Reply-To: <CY4PR01MB24716E85C74116A8AF16D5A69FCB9@CY4PR01MB2471.prod.exchangelabs.com>
References: <CY4PR01MB24716E85C74116A8AF16D5A69FCB9@CY4PR01MB2471.prod.exchangelabs.com>
Message-ID: <1e722250-8f18-76cd-e7f3-b044d4b7a387@spatialys.com>

Hi,

yes, in the 3.3 branch and earlier, there was no tunable to ask for 
lossless JPEG2000 compression

If you use GDAL master, you can now use the 
PROFILE=NPJE_NUMERICALLY_LOSSLESS option for that

Even

Le 30/08/2021 ? 17:16, Chastain, Raymond Lee (MU-Student) a ?crit?:
> We're trying to create NITFs with lossless compression using the 
> OpenJPEG driver for JPEG2000 compression.
>
> We've set the "QUALITY=100" creation option but are still noticing 
> that repeated conversions generate different perceptual image hashes.
>
> The OpenJPEG driver mentions "REVERSIBLE=YES" but that doesn't seem to 
> be a valid creation option for the NITF driver.
>
> Sample gdal_translate command:
> "gdal_translate -of NITF -co IC=C8 -co BLOCKXSIZE=256 -co 
> BLOCKYSIZE=256 -co SDE_TRE=YES -co QUALITY=100 sample.tif reversible.nitf"
>
> Am I going about this the right way?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210830/8ccc7cb2/attachment-0001.html>

From j1 at jimenezshaw.com  Mon Aug 30 08:47:38 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 30 Aug 2021 17:47:38 +0200
Subject: [gdal-dev] GDAL 3.3.2 RC1 available
In-Reply-To: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
References: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
Message-ID: <CADRrdKuw4kfS7wcBRjoWvSrrwhnV9MPy9PhaB8Zh4BqKHNPQjA@mail.gmail.com>

Thanks Even

The NEWS link starts with:

= GDAL/OGR 3.3.1 Release Notes =
The 3.3.1 release is a bug fix release.

Is it right?
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Mon, 30 Aug 2021 at 14:27, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I have prepared a GDAL/OGR 3.3.2 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.xz
>    https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.gz
>    https://download.osgeo.org/gdal/3.3.2/gdal332rc1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
> https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.tar.gz
>    https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.zip
>
> GDAL-GRASS plugin:
>
>    https://download.osgeo.org/gdal/3.3.2/gdal-grass-3.3.2.tar.gz
>
> The NEWS file is here :
>
>    https://github.com/OSGeo/gdal/blob/v3.3.2RC1/gdal/NEWS
>
> I'll call for a vote promoting it to final later this week if no
> serious problems are reported before.
>
> Best regards,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210830/f6cbed51/attachment.html>

From even.rouault at spatialys.com  Mon Aug 30 08:51:07 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Aug 2021 17:51:07 +0200
Subject: [gdal-dev] GDAL 3.3.2 RC1 available
In-Reply-To: <CADRrdKuw4kfS7wcBRjoWvSrrwhnV9MPy9PhaB8Zh4BqKHNPQjA@mail.gmail.com>
References: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
 <CADRrdKuw4kfS7wcBRjoWvSrrwhnV9MPy9PhaB8Zh4BqKHNPQjA@mail.gmail.com>
Message-ID: <627a2321-5bdd-3c71-01aa-535f9d5d68d1@spatialys.com>

Hi Javier,

Good catch. should read 3.3.2. Will re-issue a RC2 tomorrow

Even

Le 30/08/2021 ? 17:47, Javier Jimenez Shaw a ?crit?:
> Thanks Even
>
> The NEWS link starts with:
>
> = GDAL/OGR 3.3.1 Release Notes =
> The 3.3.1 release is a bug fix release.
>
> Is it right?
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Mon, 30 Aug 2021 at 14:27, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Hi,
>
>     I have prepared a GDAL/OGR 3.3.2 release candidate.
>
>     Pick up an archive among the following ones (by ascending size):
>
>     https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.xz
>     <https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.xz>
>     https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.gz
>     <https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.gz>
>     https://download.osgeo.org/gdal/3.3.2/gdal332rc1.zip
>     <https://download.osgeo.org/gdal/3.3.2/gdal332rc1.zip>
>
>     A snapshot of the gdalautotest suite is also available :
>
>     https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.tar.gz
>     <https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.tar.gz>
>     https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.zip
>     <https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.zip>
>
>     GDAL-GRASS plugin:
>
>     https://download.osgeo.org/gdal/3.3.2/gdal-grass-3.3.2.tar.gz
>     <https://download.osgeo.org/gdal/3.3.2/gdal-grass-3.3.2.tar.gz>
>
>     The NEWS file is here :
>
>     https://github.com/OSGeo/gdal/blob/v3.3.2RC1/gdal/NEWS
>     <https://github.com/OSGeo/gdal/blob/v3.3.2RC1/gdal/NEWS>
>
>     I'll call for a vote promoting it to final later this week if no
>     serious problems are reported before.
>
>     Best regards,
>
>     Even
>
>     -- 
>     http://www.spatialys.com <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210830/6803cee2/attachment.html>

From huangning290 at 126.com  Mon Aug 30 18:28:26 2021
From: huangning290 at 126.com (=?GBK?B?u8bE/g==?=)
Date: Tue, 31 Aug 2021 09:28:26 +0800 (CST)
Subject: [gdal-dev] GDAL rasterize geometry
Message-ID: <438ea32a.c1d.17b99d260e5.Coremail.huangning290@126.com>

if i want to study the rasterize source code,which basic theory i need to know?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/4c8ebdb1/attachment.html>

From even.rouault at spatialys.com  Tue Aug 31 02:05:00 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Aug 2021 11:05:00 +0200
Subject: [gdal-dev] GDAL 3.3.2 RC2 is available [was Re: GDAL 3.3.2 RC1
 available]
In-Reply-To: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
References: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
Message-ID: <a7a99b3c-07e7-30fd-7765-d68c63b195c0@spatialys.com>

Hi,

Here's a RC2 with 2 additional changes w.r.t RC1:

- NEWS file to correctly mention 3.3.2

- gdal_viewshed: Fix incorrect progress reporting (fixes #4390)

Updated download links:

 ? https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.3.2/gdal332rc2.zip

https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc2.zip

Even

Le 30/08/2021 ? 14:27, Even Rouault a ?crit?:
> Hi,
>
> I have prepared a GDAL/OGR 3.3.2 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
> ? https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.xz
> ? https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.3.2/gdal332rc1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
> https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.zip
>
> GDAL-GRASS plugin:
>
> ? https://download.osgeo.org/gdal/3.3.2/gdal-grass-3.3.2.tar.gz
>
> The NEWS file is here :
>
> ? https://github.com/OSGeo/gdal/blob/v3.3.2RC1/gdal/NEWS
>
> I'll call for a vote promoting it to final later this week if no
> serious problems are reported before.
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Tue Aug 31 03:07:19 2021
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 31 Aug 2021 20:07:19 +1000
Subject: [gdal-dev] subdatasets of
Message-ID: <CAAcGz9-vnUSb5YtfRiZcjeJOCxaiR9XGvBrBT53UFCnwRmRiug@mail.gmail.com>

Hello, I'm having trouble getting subdataset names programatically from the
WMTS/OGC Web Map Tile Service

Using

/vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml

I see many well named SDS sources from gdalinfo, i.e. listed below.

But when I try to obtain these programatically I only get repeated values :
literally

"WMTS:/vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer
"

I'm using (effectively)

char **SDS = poDataset->GetMetadata("SUBDATASETS");

and that gives me the same value for every SDS, i.e. no layer name.

Is there something extra that needs to be done especially for WMTS? I can't
figure it out from the sources.

Thanks for any help!

Best, Mike



gdalinfo  /vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml
Driver: WMTS/OGC Web Map Tile Service
Files: /vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml
Size is 512, 512
Origin = (0.000000000000000,0.000000000000000)
Pixel Size = (1.000000000000000,1.000000000000000)
Subdatasets:
  SUBDATASET_1_NAME=WMTS:/vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_12km
  SUBDATASET_1_DESC=Layer Sea Ice Concentration (12 km, AMSR-E, Aqua)
  SUBDATASET_2_NAME=WMTS:/vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Snow_Depth_Over_Ice
  SUBDATASET_2_DESC=Layer Snow Depth Over Ice (12 km, AMSR-E, Aqua)
  SUBDATASET_3_NAME=WMTS:/vsicurl/
https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_25km
  S

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/b6af7e3c/attachment.html>

From even.rouault at spatialys.com  Tue Aug 31 03:14:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Aug 2021 12:14:42 +0200
Subject: [gdal-dev] subdatasets of
In-Reply-To: <CAAcGz9-vnUSb5YtfRiZcjeJOCxaiR9XGvBrBT53UFCnwRmRiug@mail.gmail.com>
References: <CAAcGz9-vnUSb5YtfRiZcjeJOCxaiR9XGvBrBT53UFCnwRmRiug@mail.gmail.com>
Message-ID: <43cc348c-737e-48f8-7069-0c837994e3b2@spatialys.com>

Michael,

apart your code not using the same GDAL version as the one of gdalinfo 
(but I can't recall versions having such issues), or a flow in your 
code, I don't see why you'd this.

Even

Le 31/08/2021 ? 12:07, Michael Sumner a ?crit?:
> Hello, I'm having trouble getting subdataset names programatically 
> from the WMTS/OGC Web Map Tile Service
>
> Using
>
> /vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml>
>
> I see many well named SDS sources from gdalinfo, i.e. listed below.
>
> But when I try to obtain these programatically?I only get repeated 
> values : literally
>
> "WMTS:/vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer>"
>
> I'm using (effectively)
>
> char **SDS = poDataset->GetMetadata("SUBDATASETS");
>
> and that gives me the same value for every SDS, i.e. no layer name.
>
> Is there something extra that needs to be done especially for WMTS? I 
> can't figure it out from the sources.
>
> Thanks for any help!
>
> Best, Mike
>
>
>
> gdalinfo? 
> /vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml>
> Driver: WMTS/OGC Web Map Tile Service
> Files: 
> /vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml>
> Size is 512, 512
> Origin = (0.000000000000000,0.000000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Subdatasets:
> ? 
> SUBDATASET_1_NAME=WMTS:/vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_12km 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_12km>
> ? SUBDATASET_1_DESC=Layer Sea Ice Concentration (12 km, AMSR-E, Aqua)
> ? 
> SUBDATASET_2_NAME=WMTS:/vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Snow_Depth_Over_Ice 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Snow_Depth_Over_Ice>
> ? SUBDATASET_2_DESC=Layer Snow Depth Over Ice (12 km, AMSR-E, Aqua)
> ? 
> SUBDATASET_3_NAME=WMTS:/vsicurl/https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_25km 
> <https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_25km>
> ? S
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com <mailto:mdsumner at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/8eeadf8f/attachment.html>

From mdsumner at gmail.com  Tue Aug 31 03:31:29 2021
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 31 Aug 2021 20:31:29 +1000
Subject: [gdal-dev] subdatasets of
In-Reply-To: <43cc348c-737e-48f8-7069-0c837994e3b2@spatialys.com>
References: <CAAcGz9-vnUSb5YtfRiZcjeJOCxaiR9XGvBrBT53UFCnwRmRiug@mail.gmail.com>
 <43cc348c-737e-48f8-7069-0c837994e3b2@spatialys.com>
Message-ID: <CAAcGz9-5is6dEsu4zGbd2GDD834S9LaAi9L_n0sWkxHLqXojXA@mail.gmail.com>

Excellent, thanks so much it's definitely not GDAL-related, a surprising
problem in the way I'm getting the strings out.

Appreciate the very fast response!

Best, Mike



On Tue, Aug 31, 2021 at 8:14 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Michael,
>
> apart your code not using the same GDAL version as the one of gdalinfo
> (but I can't recall versions having such issues), or a flow in your code, I
> don't see why you'd this.
>
> Even
> Le 31/08/2021 ? 12:07, Michael Sumner a ?crit :
>
> Hello, I'm having trouble getting subdataset names programatically from
> the WMTS/OGC Web Map Tile Service
>
> Using
>
> /vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml
>
> I see many well named SDS sources from gdalinfo, i.e. listed below.
>
> But when I try to obtain these programatically I only get repeated values
> : literally
>
> "WMTS:/vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer
> "
>
> I'm using (effectively)
>
> char **SDS = poDataset->GetMetadata("SUBDATASETS");
>
> and that gives me the same value for every SDS, i.e. no layer name.
>
> Is there something extra that needs to be done especially for WMTS? I
> can't figure it out from the sources.
>
> Thanks for any help!
>
> Best, Mike
>
>
>
> gdalinfo  /vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml
> Driver: WMTS/OGC Web Map Tile Service
> Files: /vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml
> Size is 512, 512
> Origin = (0.000000000000000,0.000000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Subdatasets:
>   SUBDATASET_1_NAME=WMTS:/vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_12km
>   SUBDATASET_1_DESC=Layer Sea Ice Concentration (12 km, AMSR-E, Aqua)
>   SUBDATASET_2_NAME=WMTS:/vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Snow_Depth_Over_Ice
>   SUBDATASET_2_DESC=Layer Snow Depth Over Ice (12 km, AMSR-E, Aqua)
>   SUBDATASET_3_NAME=WMTS:/vsicurl/
> https://gibs.earthdata.nasa.gov/wmts/epsg3031/best/1.0.0/WMTSCapabilities.xml,layer=AMSRE_Sea_Ice_Concentration_25km
>   S
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/0f27cbab/attachment-0001.html>

From sean at mapbox.com  Tue Aug 31 09:34:16 2021
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 31 Aug 2021 10:34:16 -0600
Subject: [gdal-dev] GDAL 3.3.2 RC2 is available [was Re: GDAL 3.3.2 RC1
 available]
In-Reply-To: <a7a99b3c-07e7-30fd-7765-d68c63b195c0@spatialys.com>
References: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
 <a7a99b3c-07e7-30fd-7765-d68c63b195c0@spatialys.com>
Message-ID: <CADPhZXz7ZUN1cMRxG_qoQ_G7k0J=2J46eEevaHTq2h=gBSiYTg@mail.gmail.com>

Hi Even,

Would it be difficult to change the RC URLs and release directory to
include the "rc*" string? If the download was at
https://download.osgeo.org/gdal/3.3.2rc2/gdal-3.3.2rc2.tar.gz and extracted
to gdal-3.3.2rc2 I would only need to make a one line change to my build
system to test it.

I did find some failures in the tests we run when building and testing
rasterio's binary distributions (the wheels on PyPI). GDAL 3.3.2rc2 and
PROJ 7.2.1. The errors seem to come from a failure to auto identify the
EPSG codes in spatial reference systems created from, for example,
'+init=epsg:4326' or '+proj=longlat +datum=WGS84 +no_defs'.

https://github.com/mapbox/rasterio/blob/master/rasterio/_crs.pyx#L241-L243

These failures did not occur with 3.3.0. I'm retroactively checking 3.3.1
now.

Here's the pytest output for one of the failures:

______________ test_to_epsg[+proj=longlat +datum=WGS84 +no_defs]
_______________
proj_string = '+proj=longlat +datum=WGS84 +no_defs'
    @pytest.mark.parametrize('proj_string', ['+init=epsg:4326',
'+proj=longlat +datum=WGS84 +no_defs'])
    def test_to_epsg(proj_string):
        """CRS has EPSG code"""
>       assert _CRS.from_proj4(proj_string).to_epsg() == 4326
E       assert None == 4326
E         -None
E         +4326


On Tue, Aug 31, 2021 at 3:05 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Here's a RC2 with 2 additional changes w.r.t RC1:
>
> - NEWS file to correctly mention 3.3.2
>
> - gdal_viewshed: Fix incorrect progress reporting (fixes #4390)
>
> Updated download links:
>
>    https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc2.tar.xz
>    https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc2.tar.gz
>    https://download.osgeo.org/gdal/3.3.2/gdal332rc2.zip
>
> https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc2.tar.gz
>    https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc2.zip
>
> Even
>
> Le 30/08/2021 ? 14:27, Even Rouault a ?crit :
> > Hi,
> >
> > I have prepared a GDAL/OGR 3.3.2 release candidate.
> >
> > Pick up an archive among the following ones (by ascending size):
> >
> >   https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.xz
> >   https://download.osgeo.org/gdal/3.3.2/gdal-3.3.2rc1.tar.gz
> >   https://download.osgeo.org/gdal/3.3.2/gdal332rc1.zip
> >
> > A snapshot of the gdalautotest suite is also available :
> >
> > https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.tar.gz
> >   https://download.osgeo.org/gdal/3.3.2/gdalautotest-3.3.2rc1.zip
> >
> > GDAL-GRASS plugin:
> >
> >   https://download.osgeo.org/gdal/3.3.2/gdal-grass-3.3.2.tar.gz
> >
> > The NEWS file is here :
> >
> >   https://github.com/OSGeo/gdal/blob/v3.3.2RC1/gdal/NEWS
> >
> > I'll call for a vote promoting it to final later this week if no
> > serious problems are reported before.
> >
> > Best regards,
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/d7b16b5e/attachment.html>

From andrew.bell.ia at gmail.com  Tue Aug 31 09:52:18 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 31 Aug 2021 12:52:18 -0400
Subject: [gdal-dev] Windows CPL_STDCALL
Message-ID: <CACJ51z39hF5kfFvGoxE728KcMC1KDc0TqosHoGO1BxZpj2GOKA@mail.gmail.com>

Hi,

There is a hint here (https://trac.osgeo.org/gdal/wiki/GDAL20Changes) that
CPL_STDCALL would be no longer used, but it's still around in many function
signatures. Is this #define'd away somewhere, or does one still need to be
aware of CPL_STDCALL?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/3f09ac9e/attachment.html>

From even.rouault at spatialys.com  Tue Aug 31 09:55:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Aug 2021 18:55:14 +0200
Subject: [gdal-dev] GDAL 3.3.2 RC2 is available [was Re: GDAL 3.3.2 RC1
 available]
In-Reply-To: <CADPhZXz7ZUN1cMRxG_qoQ_G7k0J=2J46eEevaHTq2h=gBSiYTg@mail.gmail.com>
References: <ec4c304f-7a78-f922-ed97-4313d3d8a1b0@spatialys.com>
 <a7a99b3c-07e7-30fd-7765-d68c63b195c0@spatialys.com>
 <CADPhZXz7ZUN1cMRxG_qoQ_G7k0J=2J46eEevaHTq2h=gBSiYTg@mail.gmail.com>
Message-ID: <4bbe4947-4c1a-e47a-b1d0-d30a4e3b3088@spatialys.com>

Hi Sean,
>
> Would it be difficult to change the RC URLs and release directory to 
> include the "rc*" string? If the download was at 
> https://download.osgeo.org/gdal/3.3.2rc2/gdal-3.3.2rc2.tar.gz 
> <https://download.osgeo.org/gdal/3.3.2rc2/gdal-3.3.2rc2.tar.gz> and 
> extracted to gdal-3.3.2rc2 I would only need to make a one line change 
> to my build system to test it.
ok will try to remember that for next time
>
> I did find some failures in the tests we run when building and testing 
> rasterio's binary distributions (the wheels on PyPI). GDAL 3.3.2rc2 
> and PROJ 7.2.1. The errors seem to come from a failure to auto 
> identify the EPSG codes in spatial reference systems created from, for 
> example, '+init=epsg:4326' or '+proj=longlat +datum=WGS84 +no_defs'.
>
> https://github.com/mapbox/rasterio/blob/master/rasterio/_crs.pyx#L241-L243 
> <https://github.com/mapbox/rasterio/blob/master/rasterio/_crs.pyx#L241-L243>
>
> These failures did not occur with 3.3.0. I'm retroactively checking 
> 3.3.1 now.

This is a 3.3.2 change : https://github.com/OSGeo/gdal/pull/4047 . And 
this is intended. The issue with the PROJ strings you mention is that 
they are legacy syntax that results in a CRS that is instantiated with 
longitude, latitude order, whereas official EPSG:4326 is latitude, 
longitude order. The previous tolerance on the axis order in 
AutoIdentifyEPSG() was actually causing issues in some contexts 
(coordinate transformations)

I'd suggest you use OSRFindMatches() (much more capable) instead of 
AutoIdentifyEPSG(). You can walk through the suggested matches and 
compare them with the original CRS for example with OSRIsSame(). By 
default OSRIsSame() is tolerant on the axis order for geographic CRS 
(using OSRIsSameEx() with CRITERION=EQUIVALENT you'll get enforcement of 
same axis order).

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Aug 31 09:57:24 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Aug 2021 18:57:24 +0200
Subject: [gdal-dev] Windows CPL_STDCALL
In-Reply-To: <CACJ51z39hF5kfFvGoxE728KcMC1KDc0TqosHoGO1BxZpj2GOKA@mail.gmail.com>
References: <CACJ51z39hF5kfFvGoxE728KcMC1KDc0TqosHoGO1BxZpj2GOKA@mail.gmail.com>
Message-ID: <75850168-d576-6530-4c57-867d7c66d0d4@spatialys.com>

Andrew,

this page was just a collection of ideas. Not things that have 
necessarily been implemented. No change regarding CPL_STDCALL have been 
made AFAIR

Even

Le 31/08/2021 ? 18:52, Andrew Bell a ?crit?:
> Hi,
>
> There is a hint here (https://trac.osgeo.org/gdal/wiki/GDAL20Changes 
> <https://trac.osgeo.org/gdal/wiki/GDAL20Changes>) that CPL_STDCALL 
> would be no longer used, but it's still around in many function 
> signatures. Is this #define'd away somewhere, or does one still need 
> to be aware of CPL_STDCALL?
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/4db3918c/attachment.html>

From gdt at lexort.com  Tue Aug 31 17:33:51 2021
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 31 Aug 2021 20:33:51 -0400
Subject: [gdal-dev] autotest questions/issues
Message-ID: <rmieea916ds.fsf@s1.lexort.com>


After a very long time of not running the tests, because I thought it
was harder than it is, I have started down that path.  (Thanks to Even
for an offlist hint.)

I'm running tests on NetBSD 9 amd64, and realize that I may be the first
to do so.


A few comments from the perspective of a gdal test newbie, which I hope
are helpful:

* autotest is not in the distribution tarball

I realize it's 194M, but I don't see how pacakges are supposed to run
tests.  In pkgsrc, a package can declare a test invocation (e.g. "make
check" for autotools packages).  I'm a big fan of testing as installed.
So perhaps I should package autotest - but it's not clear there are
releases.

I am not so much asking for this to change as for it to be explained in
README.md.

* lack of instructions about branches and which code is tested

autotest/README.md doesn't explain

  + Does it test the gdal that is installed in one's PATH (and
  PYTHONPATH), or is is testing the gdal that is in the source tree?

  + Is one supposed to check out the corresponding branch (or really
  tag), or is it ok to test 3.3.2rc2 with master?

Now it's clear that the installed version is tested, and one should
match the branch, from first principles and having seen a test failure
about no CoordinateEpoch in 3.3.2.

* no clear path to test a not-yet-installed gdal

When building a new gdal, it seems a good idea to run tests before
installing it.  autoconf has done this for year with make check.  I see
no obvious way to do this.

* puzzling test dependencies

  It's not really clear if a missing dependency (vs requirements.txt)
  will cause problems (assuming pytest and lxml are there), in terms of
  just skipping some things, bad output, or perhaps some missing pretty
  printing.

  I think pytest-env is
    https://pypi.org/project/pytest-env/#history
  but that appears unmaintained, with a last release in 2017.   Perhaps
  there are no outstanding bugs and no changes and it is actually
  maintained but there is no reason to change -- but that is highly
  implausible.   It seems boutique, based on not being in pkgsrc, which
  means no one else has needed it, even though we have 20K packages.

  [Now I see that osr tests fail with a warning about env if this is
  missing, but really the test should be skipped or hard fail and not
  run without the env.]

* I'm guessing the expectation is that all the tests pass.  With
  autotest from master and 3.3.2rc2 installed (base lib and python
  bindings), I get:

    ogr/ogr_mitab.py .FFFatal Python error: Segmentation fault

    Current thread 0x00007d63dbe3b800 (most recent call first):
      File "/usr/pkg/lib/python3.8/site-packages/osgeo/ogr.py", line 1143 in SetAttributeFilter
      File "/home/n0/gdt/SOFTWARE/GEO/GDAL/gdal/autotest/ogr/ogr_mitab.py", line 177 in test_ogr_mitab_5
      File "/usr/pkg/lib/python3.8/site-packages/_pytest/python.py", line 183 in pytest_pyfunc_call
      File "/usr/pkg/lib/python3.8/site-packages/pluggy/callers.py", line 187 in _multicall
      File "/usr/pkg/lib/python3.8/site-packages/pluggy/manager.py", line 84 in <lambda>
      File "/usr/pkg/lib/python3.8/site-packages/pluggy/manager.py", line 93 in _hookexec
      File "/usr/pkg/lib/python3.8/site-packages/pluggy/hooks.py", line 286 in __call__
      File "/usr/pkg/lib/python3.8/site-packages/_pytest/python.py", line 1641 in runtest
      File "/usr/pkg/lib/python3.8/site-packages/_pytest/runner.py", line 162 in pytest_runtest_call
      File "/usr/pkg/lib/python3.8/site-packages/pluggy/callers.py", line 187 in _multicall
      File "/usr/pkg/lib/python3.8/site-packages/pluggy/manager.py", line 84 in <lambda>

Looking at gdb briefly, this looks like perhaps some kind fo threads
issue.  I remember from a different context around 10 years ago that
python called functions in signal handlers that were not defined as
async-signal-safe by POSIX, and I wonder if that problem still exists
and is related, or if gdb is just having a bad time.

I also got pyscripts failures:

         - pyscripts/test_gdal_polygonize.py:45 test_gdal_polygonize_1
         - pyscripts/test_gdal_polygonize.py:103 test_gdal_polygonize_2
         - pyscripts/test_ogr2ogr_py.py:663 test_ogr2ogr_py_21
         - pyscripts/test_ogr2ogr_py.py:1110 test_ogr2ogr_py_37
         - pyscripts/test_ogr2ogr_py.py:1173 test_ogr2ogr_py_39
         - pyscripts/test_ogrmerge.py:42 test_ogrmerge_1
         - pyscripts/test_ogrmerge.py:61 test_ogrmerge_2

and utilities

     600 passed
      10 failed
         - utilities/test_gdalwarp.py:324 test_gdalwarp_15
         - utilities/test_gnmutils.py:80 test_gnmmanage_3
         - utilities/test_gnmutils.py:95 test_gnmmanage_4
         - utilities/test_gnmutils.py:107 test_gnmanalyse_1
         - utilities/test_gnmutils.py:121 test_gnmanalyse_2
         - utilities/test_ogr2ogr.py:645 test_ogr2ogr_21
         - utilities/test_ogr2ogr.py:1223 test_ogr2ogr_37
         - utilities/test_ogr2ogr.py:1284 test_ogr2ogr_39
         - utilities/test_ogr2ogr.py:2299 test_ogr2ogr_64
         - utilities/test_ogrinfo.py:557 test_ogrinfo_fielddomains

* skipping tests after a failure.

It would be nice to have hints in README.md about skipping tests, but it
seems easy enough to run osr and then the following ones.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210831/4d07a360/attachment.sig>

