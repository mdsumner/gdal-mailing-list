From warmerdam at pobox.com  Sat Nov 23 12:22:49 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] test
Message-ID: <3DDFB969.2070300@pobox.com>

test
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Sat Nov 23 14:06:24 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Re: CreateCopy vs Create
References: <3DDD59F0.746CFC38@atlsci.com> <3DDD5689.2070404@pobox.com> <3DDD6AF9.7F30AEAF@atlsci.com>
Message-ID: <3DDFD1B0.2090109@pobox.com>

gwalter@atlsci.com wrote:
> Hi Frank,
> 
> Thanks, that was helpful.  If you could bear two more little questions:
> 
> 1) Is gdal-dev the equivalent of openev-discuss?  I found a link on the website
> that referred to the group, but when I tried to click on it, it came up with a
> page warning that it was an age-restricted site and had adult content???  I would
> be interested in receiving posts regarding changes made to gdal and answers to
> general questions.

Gillian,

I have migrated gdal-dev to remotesensing.org.  But yes, gdal-dev is the
general discussion list for GDAL related issues, much like openev-discuss.

> 2) Is there a way to test in advance which output data types are supported for a
> given file format?  I looked at the metadata options in gdal.h and in some of the
> drivers, but it looks as if this is dealt with within the creation functions.
> Are there any plans to pass up this info (eg. by creating, for instance, a
> metadata string or strings along the lines of the DCAP_CREATECOPY)?  It might be
> useful later on if we ever do more rigorous error handling (or for making certain
> options sensitive or not depending on the chosen format).  Then again, maybe it
> would just bloat things.  There are error messages printed in the terminal at
> least.

There was no way to pre-detect what data types a given driver will support at
creation time.  However, I agree this would be useful, so I have created the
DMD_CREATIONDATATYPES metadata and committed support for it to all drivers.  It
is metadata on the driver containing a list of space separated data types supported
by the Create or CreateCopy method on the driver.

For instance, for GeoTIFF it looks like this:

     poDriver->SetMetadataItem( GDAL_DMD_CREATIONDATATYPES,
                                "Byte UInt16 Int16 UInt32 Int32 Float32 "
                                "CInt16 CInt32 CFloat32 CFloat64" );

> Also, I have created some help files and screenshots here for the export tool for
> linking in with gvhtml's set_help_topic function, though I haven't checked them
> in.  Peter suggested that we might want to come up with a naming convention for
> tools, and that Tool_Export may be more intuitive than Tool_GDAL for the average
> openev user.  Maybe Tool_Export.py for the tool and a corresponding
> Tool_Export.html in the html directory or something along those lines.  

This seems reasonable.

 > I've also added (locally) Andrey's change for auto-detecting create-enabled formats,
 > though
> I modified it to require that Create and CreateCopy both be available because
> gdal_translate needs both depending on the circumstances.  Unfortunately, this
> only extends the list by one: the ever-popular HFA.  Once the scaling options
> have been added to VRT, I'll try to modify it to use CreateCopy() and modify
> VRT's at the python level instead.

Once the scaling is incorporated into VRT format, gdal_translate should never
need to call Create() unless there is no CreateCopy().

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From slepnev_v at newmail.ru  Sun Nov 24 04:24:56 2002
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] some geotiff export problems
Message-ID: <000001c2939b$5c779530$2b4560c3@sst>

Hello.


1) I've been trying to use GDAL to export some data into the GeoTIFF format,
and I encountered some problems I can't solve on my own. There are both
"code" and "documentation" problems. Am I writing to the right place?


2) From the GeoTIFF format specification I gather that GeoTIFF doesn't
support arbitrary metadata. In fact, I was unable to write _any_ metadata
into a GeoTIFF file and read it back successfully using GDAL. The GDAL docs
don't say _anything_ on this subject.
Is it that I did something wrong?
Is there any way to, say, write the GTCitationGeoKey string using GDAL? I
could pack some metadata into this string...
Or do I have to merge GDAL and libgeotiff code? This may be tricky...


3) Our GIS uses PROJ.4 strings internally to define projections. From the
documentation, there's no obvious way to pass a PROJ.4 string into a
GTiffDataset, although PROJ.4 is "linkaged" into GDAL. Using
SetProjection(), naturally, doesn't work.
By rummaging through the source code, I was able to find a way to convert
PROJ.4 strings into WKT strings and vice versa - initializing an
OGRSpatialReference from one and exporting into the other. Can I rely on
this feature? It is not documented in _any_ way - importFromProj4 and
exportToProj4 are even missing from the "all members of OGRSpatialReference"
list found on the Web, although they're there and seem to work OK :-)


4) It seems that linear units are _not_ written into the GeoTIFF file if we
pass them in a WKT string. They are read correctly, but when I try to write
feet, I always get meters. Running the resulting file through listgeo, I see
no linear unit information at all. The code responsible for  this job seems
to reside in frmts\gtiff\gt_wkt_srs.cpp, and I was unable to find any code
that writes linear units - there's just a blank line after the comment
"write linear units information". Is the problem with me?


5) Here are some listgeo snippets.

A "good" GeoTIFF file (not GDAL-generated):

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsPoint
      GTCitationGeoKey (Ascii,25): "UTM Zone 37 N with WGS84"
      GeogLinearUnitsGeoKey (Short,1): Linear_Meter
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_37N
      End_Of_Keys.
   End_Of_Geotiff.


A GDAL-generated file:

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): Proj_UTM_zone_25N
      End_Of_Keys.
   End_Of_Geotiff.

Why is ProjectedCSTypeGeoKey "User-Defined"?
Why no linear units? I passed 'em, they were there in both the PROJ.4 string
and the (converted from PROJ.4) WKT string!
Why no GTCitationGeoKey?
What's up with ProjectedCSTypeGeoKey and ProjectionGeoKey? Is GDAL confusing
them?


I understand those may be stupid questions...
but could you please answer me?

Vladimir Slepnev
Programmer, RDC ScanEx


From cbsled at ncia.net  Sun Nov 24 19:03:03 2002
From: cbsled at ncia.net (Carl Brown)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL for PPC Linux
Message-ID: <200211241903.03598.cbsled@ncia.net>

I have been unable to find or build a working libgdal for use with GRASS 5.0.0 
running under Yellow Dog Linux 2.3. (kernel 2.4.18)
Most of my data is SDTS, so GDAL is crucial to the use of GRASS on this 
machine.
I have tried the prebuilt libgdal115-linux-grass.tar.gz, 
building from source gdal-1.1.7.tar.gz, 
and building from source via cvs. 

In all cases, I had a freshly installed file named libgdal.1.1.so in 
/usr/local/grass5/lib/, but r.in.gdal always aborted with this error:

	GBBridgeInitialize() failed to find an suitable GDAL .DLL/.so file.
	The following filenames were searched for:
	  o libgdal.1.1.so
	  o gdal.1.0.so
	  o gdal.so.1.0
	  o libgdal.so.1

	The following locations were searched:
	  o /usr/local/grass5/lib
	  o System default locations.

I am not a programmer, so I don't know where to look to find the problems, or 
how to fix them. Obviously the build is failing. Tell me what diagnostic 
information to post, and I will post it.

Carl Brown


From Antti.Roppola at brs.gov.au  Sun Nov 24 20:08:12 2002
From: Antti.Roppola at brs.gov.au (Antti.Roppola@brs.gov.au)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL for PPC Linux
Message-ID: <4D6E6CCBC9CED61192720060B06B3DD7C3FB75@ACTMAIL2>

Hi Carl,

Check your /etc/ld.so.conf, you may need to use ldconfig
to add the path to your gdal library. For example, I had
to add /usr/local/lib because I had installed GDAL there.

More generally:

Use "ldd" to check your compiled libraries and executables
to see where they are tyring to find things.
For example (on my Debian box):

	cd /usr/lib/php4/20010901/
	ldd php_mapscript.so

Will show what libraries Mapserver is using, and where it expects to
find them (including GDAL). The next step is to make sure all the
libraries actually exist in those locations.

Also 

Cheers,

Antti

-----Original Message-----
From: Carl Brown [mailto:cbsled@ncia.net]

I am not a programmer, so I don't know where to look to find the problems, or 
how to fix them. Obviously the build is failing. Tell me what diagnostic 
information to post, and I will post it.

Carl Brown


From warmerdam at pobox.com  Sun Nov 24 21:36:01 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] some geotiff export problems
References: <000001c2939b$5c779530$2b4560c3@sst>
Message-ID: <3DE18C91.4040907@pobox.com>

Vladimir Slepnev wrote:
> Hello.
> 
> 
> 1) I've been trying to use GDAL to export some data into the GeoTIFF format,
> and I encountered some problems I can't solve on my own. There are both
> "code" and "documentation" problems. Am I writing to the right place?

Vladimir,

This is the right place.

> 2) From the GeoTIFF format specification I gather that GeoTIFF doesn't
> support arbitrary metadata. In fact, I was unable to write _any_ metadata
> into a GeoTIFF file and read it back successfully using GDAL. The GDAL docs
> don't say _anything_ on this subject.
> Is it that I did something wrong?
> Is there any way to, say, write the GTCitationGeoKey string using GDAL? I
> could pack some metadata into this string...
> Or do I have to merge GDAL and libgeotiff code? This may be tricky...

Currently only selected items can be read/written via the GetMetadata()
and SetMetadata() API in the GeoTIFF driver.  These are the DOCUMENTNAME,
IMAGEDESCRIPTION, SOFTWARE and DATETIME tags in TIFF which correspond
to TIFFTAG_DOCUMENTNAME and so forth in the metadata api.

There is no really appropriate place to put full GDAL style metadata
in a GeoTIFF file, but I have been thinking I should overload some
tag for this purpose, or add an application specific one.

> 3) Our GIS uses PROJ.4 strings internally to define projections. From the
> documentation, there's no obvious way to pass a PROJ.4 string into a
> GTiffDataset, although PROJ.4 is "linkaged" into GDAL. Using
> SetProjection(), naturally, doesn't work.
> By rummaging through the source code, I was able to find a way to convert
> PROJ.4 strings into WKT strings and vice versa - initializing an
> OGRSpatialReference from one and exporting into the other. Can I rely on
> this feature? It is not documented in _any_ way - importFromProj4 and
> exportToProj4 are even missing from the "all members of OGRSpatialReference"
> list found on the Web, although they're there and seem to work OK :-)

The omission of importFromProj4() and exportToProj4() from the documentation
was unintentional.  I have added documentation for these methods today.  Note
that the SetFromUserInput() method will accept a variety of formats to
initialize an OGRSpatialReference(), including PROJ.4.

You can rely on importFromProj4() and exportToProj4().  Note that the
OGRCoordinateTransformation class uses PROJ.4 to do it's work, and actually
uses exportToProj4() to convert OGRSpatialReferences into a form that can
be used to initialize PROJ.4.

> 4) It seems that linear units are _not_ written into the GeoTIFF file if we
> pass them in a WKT string. They are read correctly, but when I try to write
> feet, I always get meters. Running the resulting file through listgeo, I see
> no linear unit information at all. The code responsible for  this job seems
> to reside in frmts\gtiff\gt_wkt_srs.cpp, and I was unable to find any code
> that writes linear units - there's just a blank line after the comment
> "write linear units information". Is the problem with me?

This is an embarrasing omission given my other role as libgeotiff maintainer,
and general supporter of GeoTIFF.  I will do some work on the geotiff driver
tonight and report back later on the improvements.


> I understand those may be stupid questions...
> but could you please answer me?

Not stupid questions at all.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Nov 25 00:43:53 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] some geotiff export problems
References: <000001c2939b$5c779530$2b4560c3@sst>
Message-ID: <3DE1B899.8020202@pobox.com>

Vladimir Slepnev wrote:
> 5) Here are some listgeo snippets.
> 
> A "good" GeoTIFF file (not GDAL-generated):
> 
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsPoint
>       GTCitationGeoKey (Ascii,25): "UTM Zone 37 N with WGS84"
>       GeogLinearUnitsGeoKey (Short,1): Linear_Meter
>       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
>       ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_37N
>       End_Of_Keys.
>    End_Of_Geotiff.
> 
> 
> A GDAL-generated file:
> 
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>       ProjectedCSTypeGeoKey (Short,1): User-Defined
>       ProjectionGeoKey (Short,1): Proj_UTM_zone_25N
>       End_Of_Keys.
>    End_Of_Geotiff.
> 
> Why is ProjectedCSTypeGeoKey "User-Defined"?
> Why no linear units? I passed 'em, they were there in both the PROJ.4 string
> and the (converted from PROJ.4) WKT string!
> Why no GTCitationGeoKey?
> What's up with ProjectedCSTypeGeoKey and ProjectionGeoKey? Is GDAL confusing
> them?

Vladimir,

I was able to reproduce this with gdal_translate using:

gdal_translate -a_srs "+proj=utm +zone=11 +ellps=WGS84 +units=us-ft" in.tif out.tif

I fixed gt_wkt_srs.cpp so the units are written out, but the GEOGCS is still
not WGS84 since you have not set your datum to be WGS84 (just your ellipse).
I also get the right GEOGCS now if I use +datum=WGS84 instead of +ellps=WGS84.

Somewhat unrelated to your specific problem I also am not currently taking
any advantage of AUTHORITY[] information in my EPSG strings when writing out
GeoTIFF files.  I will try to fix this tomorrow.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From blazek at itc.it  Mon Nov 25 05:00:18 2002
From: blazek at itc.it (Radim Blazek)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Re: [Freegis-list] Lx-Viewer (DWG viewer for Linux)
In-Reply-To: <1038132722.27232.163.camel@linstation.rebelbase>
References: <1038132722.27232.163.camel@linstation.rebelbase>
Message-ID: <02112511001801.27480@janacek>

On Sunday 24 November 2002 11:12 am, Guy Edwards wrote:
> Hello,
>
> Just to let you know that the latest stable Lx-Viewer (0.98a) is out and
> give a quick overview. LX-Viewer is a GPL program that will allow you to
> open, view and print DWG or DXF files on Linux (+do other things).
>
> Download from:
> http://sourceforge.net/project/showfiles.php?group_id=30996
> You will need the OpenDWG libraries also
> http://www.opendwg.org
>
> Any problems/questions/feedback you have is welcome
>
> New features in 0.98a:
> * latest Qt3 and OpenDWG support
> * Single/multiple drawing auditing and reporting
> * Accepts multiple command line parameters when starting the program
> * internal command line with command history
> * Postscript printer resolution increased from 72dpi to 600dpi
> * Added text and picture previews to the open file dialog
> * Viewer now stores a bitmap preview picture with the drawing file
> * Drawing is sniffed prior to load looking for corrupt data
> * XPM file output replaced with Portable Network Graphics files (PNG)
> * Standard install: ./configure, make and make install working 100%.
> * many other misc improvements.......
>
> Project changes
> * New, more informative website with development roadmaps/targets etc
> * Project team up from 6 to 16 members
> * Development has begun on 0.99

I would like to say that LX-Viewer is realy very good program 
(I am running 0.95a). Thank you.

I have some questions:
1) How to get libraries for Linux. Is it right that I must become at least 
"associate" member if I want libraries for Linux? Linux is not listed at  
http://www.opendwg.org/downloads/guest.htm "Member downloads".
2) Does any command line conversion tool (dwg<->dxf, versions) exist in 
LX-Viewer project?
3) Do you think that OpenDWG could become sometimes realy 'open', something 
like GPL or is it non free forever?
4) Once I read somewhere that support for editing and other formats (DGN) is
planned for lxviewer. Is it still true? 
5) (For others) Would it make sense to have DWG/DXF support based on OpenDWG
in OGR? Could somebody do that:)?

Radim




From warmerdam at pobox.com  Mon Nov 25 08:58:04 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Re: [Freegis-list] Lx-Viewer (DWG viewer for Linux)
References: <1038132722.27232.163.camel@linstation.rebelbase> <02112511001801.27480@janacek>
Message-ID: <3DE22C6C.5030501@pobox.com>

Radim Blazek wrote:

> 5) (For others) Would it make sense to have DWG/DXF support based on OpenDWG
> in OGR? Could somebody do that:)?

Radim,

It is my general intention to someday add DXF/DWG support to OGR based based
on the OpenDWG libraries.  However, even with the libraries it seems like it
would be a fairly complicated effort, and no one (well, none of my paying
clients) has had a particular need for the capability.  Also, as you note,
the OpenDWG libraries aren't exactly free which kind of takes some of the
fun out of it.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From freebsd at remotesensing.org  Mon Nov 25 17:13:13 2002
From: freebsd at remotesensing.org (freebsd@remotesensing.org)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] =?ISO-8859-1?B?vve3fLV5wWGnWbN1LKaopVzE3anztE2n5L73t3yquqRI?=
Message-ID: <200211252213.gAPMDAo23292@yoda.imagelinks.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20021126/0ff83dfd/attachment.html
From cbsled at ncia.net  Tue Nov 26 08:53:55 2002
From: cbsled at ncia.net (cbsled@ncia.net)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL for PPC Linux
In-Reply-To: <02c001c29418$2f526490$b137ba8c@sfdev3>
Message-ID: <20021126135400.5DF503845F@bobcat.ncia.net>

On 11/24/02, at 07:18 PM, "Norman Vine" <nhv@cape.com> said:

>You need to run ldconfig

I added a some directories to /etc.ld.so.conf, then ran ldconfig.

That changed the error, but r.in.gdal still did not run...

So I did in my src/gdal:

    make clean
    ./configure
    make

#(The resulting libgdal.1.1.so is about 3.6MB)

    cp libgdal.1.1.so /usr/local/grass5/lib/

Then, as root:

    ldconfig

r.in.gdal now segfaults.

Suggestions?

-- 
-----------------------------------------------------------
Carl Brown cbsled@ncia.net
------------------------------------------------------
-----


From Antti.Roppola at brs.gov.au  Tue Nov 26 21:41:49 2002
From: Antti.Roppola at brs.gov.au (Antti.Roppola@brs.gov.au)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL for PPC Linux
Message-ID: <4D6E6CCBC9CED61192720060B06B3DD7C3FB9A@ACTMAIL2>

You will need to check:
 - What libs (and paths) are used by gdal
	ldd libgdal.1.1.so
 - Check to see if they exist where libgdal thinks they are
 - Check to see if the paths for libgdal and any dependant
   libraries are in ld.so.conf
 - Check GDAL independantly of your app (i.e. use gdalinfo to query a TIFF)

Once we know GDAL is working correctly, *then* troubleshoot your app:

 - Check your application ("r.in.gdal") to see where it thinks
   gdal is located. (I am not using grass, so I'm guessing)
	ldd r.in.gdal

FWIW, the GDAL compile and install has always seemed pretty robust to me.
On my system, "make install" installed to /usr/lib/ by default, not
/usr/local/grass/, maybe check though the GDAL Makefile if there are
other references to /usr/lib?

Cheers,

Antti


-----Original Message-----
From: cbsled@ncia.net [mailto:cbsled@ncia.net]
Sent: Wednesday, 27 November 2002 12:54 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] GDAL for PPC Linux


On 11/24/02, at 07:18 PM, "Norman Vine" <nhv@cape.com> said:

>You need to run ldconfig

I added a some directories to /etc.ld.so.conf, then ran ldconfig.

That changed the error, but r.in.gdal still did not run...

So I did in my src/gdal:

    make clean
    ./configure
    make

#(The resulting libgdal.1.1.so is about 3.6MB)

    cp libgdal.1.1.so /usr/local/grass5/lib/

Then, as root:

    ldconfig

r.in.gdal now segfaults.

Suggestions?

-- 
-----------------------------------------------------------
Carl Brown cbsled@ncia.net
------------------------------------------------------
-----

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Nov 28 10:58:59 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL/OGR EPSG Upgrade In Progress
Message-ID: <3DE63D43.9090403@pobox.com>

Folks,

This is a warning that I am in the process of upgrading the version of the
EPSG databases used by GDAL/OGR - notably OGRSpatialReference.importFromEPSG()
and OGRSpatialReference.SetStatePlane().  This includes an update to the
files in gdal/data, upgraded to the latest table, and substantial changes to
the code that turns the tables into WKT descriptions ... since the
relationships of the EPSG tables have changed substantially.  Previously
EPSG 4.3 tables were being used, but I am upgrading to 6.2.2.

Note, I am also re-implementing the port/cpl_csv support for CSV files to
follow the CSV standard (escaping of quotes is with paired quotes), and
changing things to keep the .csv files loaded in memory (and indexed) after
the first access.  This means that expanding multiple GeoTIFF definitions
should be much faster than it used to be.

While the upgrade is going on EPSG (and GeoTIFF PCS/GCS support) may be
flakey.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ben at vterrain.org  Thu Nov 28 15:09:11 2002
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL/OGR EPSG Upgrade In Progress
In-Reply-To: <3DE63D43.9090403@pobox.com>
Message-ID: <MGEOKJAEOFKANAFBLFGGOEBGDNAA.ben@vterrain.org>

Frank,

Will be possible for the new GDAL code to check the version of EPSG files
that it encounters?  It would be much better to get an error returned like
"Sorry, wrong version of EPSG tables" rather than silently producing
incorrect results.

Thanks,
Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Thursday, November 28, 2002 7:59 AM
> To: gdal-dev; SFCOM Developers Forum
> Subject: [Gdal-dev] GDAL/OGR EPSG Upgrade In Progress
>
> [...] Previously
> EPSG 4.3 tables were being used, but I am upgrading to 6.2.2.
> [...]
> While the upgrade is going on EPSG (and GeoTIFF PCS/GCS support) may be
> flakey.


From warmerdam at pobox.com  Thu Nov 28 15:12:23 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] GDAL/OGR EPSG Upgrade In Progress
In-Reply-To: <MGEOKJAEOFKANAFBLFGGOEBGDNAA.ben@vterrain.org>
References: <MGEOKJAEOFKANAFBLFGGOEBGDNAA.ben@vterrain.org>
Message-ID: <3DE678A7.9090101@pobox.com>

Ben Discoe wrote:
> Frank,
> 
> Will be possible for the new GDAL code to check the version of EPSG files
> that it encounters?  It would be much better to get an error returned like
> "Sorry, wrong version of EPSG tables" rather than silently producing
> incorrect results.

Ben,

Most of the tables have different names now, so it would likely appear to
the application, or user, that no EPSG files were found at all but I will
try and make it give a more specific error about the problem.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ben at vterrain.org  Thu Nov 28 15:57:58 2002
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] MapInfo mixing geometry types in a layer
In-Reply-To: <3DE678A7.9090101@pobox.com>
Message-ID: <MGEOKJAEOFKANAFBLFGGOEBHDNAA.ben@vterrain.org>

Happy Thanksgiving, Frank.  Since we're both working on a holiday, i figure
i'll bug you with more questions :-)

I'm using OGR to read some MapInfo .MAP/.TAB files.  Most are working fine,
but for some of them i am encountering a strange behavior.

When i ask the type of the layer:

	OGRFeatureDefn *defn = pLayer->GetLayerDefn();
	OGRwkbGeometryType geom_type = defn->GetGeomType();

it says "OGRLineString."  However, when i am reading each geometry, some of
them are OGRLineString, and some of them are OGRMultiLineString!

Is this an expected behavior, correct OGR functioning?  Does MapInfo really
mix geometry types within a single layer, ESRI Shapefiles sure don't.

Thanks,
Ben


From warmerdam at pobox.com  Thu Nov 28 16:08:37 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] MapInfo mixing geometry types in a layer
In-Reply-To: <MGEOKJAEOFKANAFBLFGGOEBHDNAA.ben@vterrain.org>
References: <MGEOKJAEOFKANAFBLFGGOEBHDNAA.ben@vterrain.org>
Message-ID: <3DE685D5.5090504@pobox.com>

Ben Discoe wrote:
> Happy Thanksgiving, Frank.  Since we're both working on a holiday, i figure
> i'll bug you with more questions :-)
> 
> I'm using OGR to read some MapInfo .MAP/.TAB files.  Most are working fine,
> but for some of them i am encountering a strange behavior.
> 
> When i ask the type of the layer:
> 
> 	OGRFeatureDefn *defn = pLayer->GetLayerDefn();
> 	OGRwkbGeometryType geom_type = defn->GetGeomType();
> 
> it says "OGRLineString."  However, when i am reading each geometry, some of
> them are OGRLineString, and some of them are OGRMultiLineString!
> 
> Is this an expected behavior, correct OGR functioning?  Does MapInfo really
> mix geometry types within a single layer, ESRI Shapefiles sure don't.

Ben,

It is routine to mix geometry types in Mapinfo files; however, the
pLayer->GetLayerDefn() should return wkbUnknown as the geometry type for
layers with a mixture of geometries.  I believe the problem is that the MITAB
code determines if a specific geometry type can be used by checking the
tab file header.  In cases where the "number of lines" field is the only
non-zero one, it assumes the layer holds only lines.  However, there
can be cases where some geometries are more properly modelled as
OGRMultiLineString (a set of disconnected lines).

The correct solution would be for us to either scan all geometries in advance
(to determine the geometry type for the layer), or return wkbUnknown all the
time since it is hard for us to be certain in advance.  However, both solutions
suck.

I am a little surprised there are multi line strings in Mapinfo, but the
problem you see frequently arises with polygons where multi-island polygons
really need to be represented as OGRMultiPolygons, but this is often not
possible to know in advance untill the geometry is encountered.  This is
the case with the still buggy shapefile reader for instance.  An ESRI
polygon shapefile may contain a mix of OGRPolygon and OGRMultiPolygon
geometries.  In ESRI parlance they are all polygons, but in the OpenGIS
Simple Features geometry model some are polygons and some are multi-polygons.

The shapefile driver actually just returns the multi-island geometries
as OGRPolygon even though there are really more than one outer ring.

In short, for the time being you should be wary of completely trusting
the return result of OGRFeatureDefn->GetGeomType().

PS. we had our Canadian Thanksgiving several weeks ago; however, I did have
a turkey lunch with an American friend today to celebrate your holiday.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From morissette at dmsolutions.ca  Thu Nov 28 17:13:16 2002
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] MapInfo mixing geometry types in a layer
References: <MGEOKJAEOFKANAFBLFGGOEBHDNAA.ben@vterrain.org> <3DE685D5.5090504@pobox.com>
Message-ID: <3DE694FC.3092D182@dmsolutions.ca>

Frank Warmerdam wrote:
> 
>  I believe the problem is that the MITAB
> code determines if a specific geometry type can be used by checking the
> tab file header.  In cases where the "number of lines" field is the only
> non-zero one, it assumes the layer holds only lines.  

...

> 
> I am a little surprised there are multi line strings in Mapinfo, 
>

Frank, Ben,

Just to shed some light on this...

MapInfo has three linear types:
 - LINE: 
     2 points line, returned as a LineString

 - PLINE: 
     polyline, returned as a LineString

 - PLINE MULTIPLE: 
     multiple disjoint polyline segments, will be returned as a
     MultiLineString

As Frank mentioned, OGR checks the 'numlines' field in the file header
to try to guess the geometry type, but this is really just the total
number of linear features in the file (the sum of the three types above)
so there is no way to tell whether there is a mix of LineString and
MultiLineString in the file without scanning the whole file.

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette@dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From slepnev_v at newmail.ru  Fri Nov 29 19:57:20 2002
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] more problems
Message-ID: <000101c2980b$71261aa0$0100007f@sst>

Hello, it's me again.


1) You wrote that

> Currently only selected items can be read/written via the GetMetadata()
> and SetMetadata() API in the GeoTIFF driver.  These are the DOCUMENTNAME,
> IMAGEDESCRIPTION, SOFTWARE and DATETIME tags in TIFF which correspond
> to TIFFTAG_DOCUMENTNAME and so forth in the metadata api.

It doesn't seem to work.
Here is the source code of my test routine:

	GDALAllRegister();

	GDALDataset *output = (GDALDataset *) GDALOpen( "pic3.tiff", GA_Update );
	output->SetMetadataItem("TIFFTAG_DOCUMENTNAME","Sample data");
	printf("%s\n",output->GetMetadataItem("TIFFTAG_DOCUMENTNAME"));

	delete output;

	output = (GDALDataset *) GDALOpen( "pic3.tiff", GA_ReadOnly );
	printf("%s\n",output->GetMetadataItem("TIFFTAG_DOCUMENTNAME")); //Same line
as above!

	return 0;

Here is the output:

Sample data
(null)

pic3.tiff is a valid TIFF file that exists in the program's directory.
It seems that either the read or the write doesn't work. Am I wrong?
If I delete the file pic3.tiff and change the first GDALOpen() call to a
Create() call, the file gets created, but the metadata item is still not
written or not read correctly.


2) Here's one more problem I can't solve.

A "good" GeoTIFF file (not GDAL-generated):

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsPoint
      GTCitationGeoKey (Ascii,25): "UTM Zone 37 N with WGS84"
      GeogLinearUnitsGeoKey (Short,1): Linear_Meter
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_37N
      End_Of_Keys.
   End_Of_Geotiff.


Here's what I get if I write the string ""+proj=utm +zone=11 +ellps=WGS84
+units=us-ft":

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): Proj_UTM_zone_11N
      ProjLinearUnitsGeoKey (Short,1): Linear_Foot_US_Survey
      End_Of_Keys.
   End_Of_Geotiff.


Here's what I get if I write the string ""+proj=utm +zone=11 +datum=WGS84
+units=us-ft":

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      ProjectedCSTypeGeoKey (Short,1): Unknown-4326
      ProjLinearUnitsGeoKey (Short,1): Linear_Foot_US_Survey
      End_Of_Keys.
   End_Of_Geotiff.


Once again, the questions are:
Why is ProjectedCSTypeGeoKey "user-defined" in the second case? What does it
mean? Isn't it wrong?
What is ProjectionGeoKey in the second case? Doesn't GDAL confuse it with
ProjectedCSTypeGeoKey in the first case?
Why is the third case so utterly wrong?
And once again, why is the GTCitationGeoKey not written?

All I did was convert the string to WKT through an OGRSpatialReference and
then write it using SetProjection(). I did _not_ use gdal_translate.


Sorry for the inconvenience,

Vladimir Slepnev
Programmer, RDC ScanEx


From warmerdam at pobox.com  Sat Nov 30 11:53:49 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] more problems
In-Reply-To: <000101c2980b$71261aa0$0100007f@sst>
References: <000101c2980b$71261aa0$0100007f@sst>
Message-ID: <3DE8ED1D.1030502@pobox.com>

Vladimir Slepnev wrote:

> 	GDALAllRegister();
> 
> 	GDALDataset *output = (GDALDataset *) GDALOpen( "pic3.tiff", GA_Update );
> 	output->SetMetadataItem("TIFFTAG_DOCUMENTNAME","Sample data");
> 	printf("%s\n",output->GetMetadataItem("TIFFTAG_DOCUMENTNAME"));
> 
> 	delete output;
> 
> 	output = (GDALDataset *) GDALOpen( "pic3.tiff", GA_ReadOnly );
> 	printf("%s\n",output->GetMetadataItem("TIFFTAG_DOCUMENTNAME")); //Same line
> as above!
> 
> 	return 0;
> 
> Here is the output:
> 
> Sample data
> (null)

Vladimir,

Generally speaking GeoTIFF files aren't very updatable, even if opened
in update mode.  I will look into the metadata issue to see if I can
improve things, but the dependable way of getting the metadata set in
a GeoTIFF file is by having it set in the dataset passed to the CreateCopy()
method for GeoTIFF.


> Here's what I get if I write the string ""+proj=utm +zone=11 +ellps=WGS84
> +units=us-ft":
> 
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>       ProjectedCSTypeGeoKey (Short,1): User-Defined
>       ProjectionGeoKey (Short,1): Proj_UTM_zone_11N
>       ProjLinearUnitsGeoKey (Short,1): Linear_Foot_US_Survey
>       End_Of_Keys.
>    End_Of_Geotiff.

ProjectedCSTypeGeoKey is user defined in this case, because my libraries
don't know of a PCS code for UTM 11 N with us feet as the units.  A PCS
is a full projected coordinate system including GCS (datum/pm), linear
units, and a projection transformation method (ProjectionGeoKey).  When it
doesn't know a corresponding EPSG PCS code, it must define each of the
components indpendently.

As usual, +ellps=WGS84 is not equivlent to +datum=WGS84, so we have
no GCS/datum definition at all.  Peraps it ought to write an ellipsoid
definition in this case.  I will look into that.

So, in general this worked properly.


> Here's what I get if I write the string ""+proj=utm +zone=11 +datum=WGS84
> +units=us-ft":
> 
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>       ProjectedCSTypeGeoKey (Short,1): Unknown-4326
>       ProjLinearUnitsGeoKey (Short,1): Linear_Foot_US_Survey
>       End_Of_Keys.
>    End_Of_Geotiff.

Yikes! Major breakage.  I fixed the problem here.  It now comes out:

    Keyed_Information:
       GTModelTypeGeoKey (Short,1): ModelTypeProjected
       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
       GeographicTypeGeoKey (Short,1): GCS_WGS_84
       ProjectedCSTypeGeoKey (Short,1): User-Defined
       ProjectionGeoKey (Short,1): Proj_UTM_zone_11N
       ProjLinearUnitsGeoKey (Short,1): Linear_Foot_US_Survey
       End_Of_Keys.
    End_Of_Geotiff.


> Once again, the questions are:
> Why is ProjectedCSTypeGeoKey "user-defined" in the second case? What does it
> mean? Isn't it wrong?
> What is ProjectionGeoKey in the second case? Doesn't GDAL confuse it with
> ProjectedCSTypeGeoKey in the first case?
> Why is the third case so utterly wrong?
> And once again, why is the GTCitationGeoKey not written?

Citations are not required for GeoTIFF.  Nevertheless, I agree they
are desirable, so I will look into adding them.

> All I did was convert the string to WKT through an OGRSpatialReference and
> then write it using SetProjection(). I did _not_ use gdal_translate.

Nevertheless, they are similar mechanisms.  I used gdal_translate to
demonstrate because it makes it easy for anyone to try without writing
and compiling a test program.

So, fixes for the serious bug have been committed.   As well I did some
work to attach authority values to the WKT when reading from GeoTIFF.  I
will write again soon once I have looked at some of the other problems.
Be wary about updating from CVS since I have dramatically changed the
way the EPSG support works and this affects GeoTIFF alot.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Sat Nov 30 16:00:06 2002
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] more problems
In-Reply-To: <000101c2980b$71261aa0$0100007f@sst>
References: <000101c2980b$71261aa0$0100007f@sst>
Message-ID: <3DE926D6.1070002@pobox.com>

Vladimir,

OK, I have spent a few more hours hacking and have made several improvements:

  o I now write GTCitationGeoKey with the high level coordinate system
    description from the well known text.

  o It is now possible to update the projection information and metadata of
    a existing GeoTIFF file in place.  This may only work for uncompressed
    files ... I don't know it is currently supported to open compressed geotiff
    files in update mode.  This is a very new and experimental ability!

  o Metadata can be written to files created directly as well as those
    created with CreateCopy().

  o I added support for generic metadata.  Any metadata items other than
    the special TIFFTAG_* values will be written new a new tiff tag I have
    defined in a simple XML format, and they are also recovered when reading
    the file.  This metadata will only be meaningful to GDAL based applications
    but it should be useful for stuff like using GeoTIFF as the generic "import"
    format for raster data in applications like OpenEV.  Eventually I would like
    to use a similar mechanism to associate stuff like NODATA values with
    GeoTIFF bands.

Some of the above changes required bug fixes in libtiff, so if you use an
external libtiff please ensure it is rebuilt from CVS, or reconfigure your
GDAL to use the internal libtiff (which has been updated from the libtiff
CVS tree).

All testing and feedback on the new capabilities is appreciated.

For interest sake, I was able to use the following python script to test the
inplace update of information on tiff files:

import gdal
import sys
import osr

driver = gdal.GetDriverByName( 'GTiff' )

ds = gdal.Open( 'test.tif', gdal.GA_Update )

md = { 'TIFFTAG_DOCUMENTNAME' : 'Third test', 'OTHERINFO' : 'New value', 'NewTag' : 'This 
tags value' }
ds.SetMetadata( md )

srs = osr.SpatialReference()
srs.SetFromUserInput( '+proj=utm +zone=11 +ellps=WGS84' )
ds.SetProjection( srs.ExportToWkt() )
ds.SetGeoTransform( [ 100000, 10, 0, 50000, 0, -10 ] )

ds = None

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at p...  Tue Nov  5 01:58:21 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: OpenEV_FW 1.5.3 Release
Message-ID: <3DC76C0D.1030509@p...>

Folks,

I have prepared a new set of binary builds of OpenEV and related
technologies for Windows and Linux (1.5.3). This should resolve a bunch of
problems discovered by Dr. Lobo with my Linux distribution. It also includes
recent improvements to Arc/Info binary grid support and includes Kakadu
derived support for reading and writing JPEG2000 (and GeoJP2) on both
platforms!

For anyone interested in JPEG2000 or GeoJP2, I think this kit could be worth
while for doing experiments. The following command will convert an existing
8bit or 16bit file into JPEG2000. Set the QUALITY to any value between
1 and 100, with 20 (reduce to 20% of original size) being the default. Values
as low as 3% have produced useful image depending on the nature of the data
(for instance DEMs).

% gdal_translate -of JP2KAK -co "QUALITY=10" utm.tif utm.jp2

Please send me any feedback on configuration issues, bugs, etc.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From jaybo at n...  Thu Nov  7 04:36:24 2002
From: jaybo at n... (Jay Borseth)
Date: Wed Nov 21 11:49:18 2007
Subject: BSB GDALGCPsToGeoTransform() failing
Message-ID: <001001c28641$2373e7f0$0300000a@nomadserver1>

Standard Disclaimer: I don't know nuttin about GDAL, but...

When opening BSB version 3.07 files I'm noting a failure in
GDALGCPsToGeoTransform() (in gdal_misc.cpp, line 1432) when the sanity
check is performed on the GCPs:

/* --------------------------------------------------------------------
*/
/* Now check if any of the input points fit this poorly.
*/
/* --------------------------------------------------------------------
*/
if( !bApproxOK )


Usually the first few GCPs are fine with dfErrorX and dfErrorY == 0. But
then on subsequent GCPs the error magnitude becomes roughly a half
pixel:

dfErrorX	-5.7940904895303902e-005
dfPixelSize	9.4416574834524163e-005	

And since the failure tolerance is a quarter pixel, upon return to
bsbdataset.cpp V1.7, line 316, bGeoTransformSet is set false, and not
much works after that.

I'm assuming this problem is intrinsic to the way the BSB files were
created. One fix would be to pass "true" as the final parameter to
GDALGCPsToGeoTransform() which just bypasses the sanity check, but this
seems less than ideal. What to do?

- Jay

PS. A sample BSB V3.07 file that shows this behavior is at
http://www.nomadelectronics.com/anonymous/fakeftp.htm.




From warmerdam at p...  Thu Nov  7 09:05:57 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] BSB GDALGCPsToGeoTransform() failing
References: <001001c28641$2373e7f0$0300000a@nomadserver1>
Message-ID: <3DCA7345.8090003@p...>

Jay Borseth wrote:
> Standard Disclaimer: I don't know nuttin about GDAL, but...
> 
> When opening BSB version 3.07 files I'm noting a failure in
> GDALGCPsToGeoTransform() (in gdal_misc.cpp, line 1432) when the sanity
> check is performed on the GCPs:
...
> And since the failure tolerance is a quarter pixel, upon return to
> bsbdataset.cpp V1.7, line 316, bGeoTransformSet is set false, and not
> much works after that.
> 
> I'm assuming this problem is intrinsic to the way the BSB files were
> created. One fix would be to pass "true" as the final parameter to
> GDALGCPsToGeoTransform() which just bypasses the sanity check, but this
> seems less than ideal. What to do?

Jay,

BSB files use a series of reference points on the map to describe the
georeferencing. If the map is scanned from a slightly warped paper map, or
if the underlying map is not really sampled on a geographic grid, then it will
be essentially impossible to compute an affine transform describing the
georeferencing of the image.

The error test is intended to check if an affine transform is a good
approximation of the georeferencing. The error size check (one quarter
pixel) is somewhat arbitrary. You could alter that to a whole pixel if you
like, but I have personally yet to check a BSB file that came even that
close!

However, you can get the underlying GCPs (ground control points) from the
GDAL API, and use them yourself to georeference the image, even calling
GDALGCPsToGeoTransform() with TRUE passed if you wish. This would be
my suggestion.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From shimitz at u...  Wed Nov 13 14:21:56 2002
From: shimitz at u... (April Shimitz)
Date: Wed Nov 21 11:49:18 2007
Subject: cvs co
Message-ID: <OF7CC44660.C96BEB9E-ON86256C70.0069E925@c...>

Frank,

For some reason I cannot check out the GDAL source when specifying a tag
(but when I specify a revision number, it works fine). I can't make much
sense at all of the output I see when I try to check out the entirety of
GDAL, but when I attempt to just do an update on a single file and specify
a tag (i.e. "cvs up -r gdal_1_1_6 configure"), I get the following error:

cvs [server aborted]: cannot write /cvsroot/CVSROOT/val-tags: Permission
denied

This happens both when I login as user "anonymous" and "shimitz". Do you
have any idea what the problem is?

April




From warmerdam at p...  Wed Nov 13 15:29:29 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] cvs co
References: <OF7CC44660.C96BEB9E-ON86256C70.0069E925@c...>
Message-ID: <3DD2B629.1010508@p...>

April Shimitz wrote:
> Frank,
> 
> For some reason I cannot check out the GDAL source when specifying a tag
> (but when I specify a revision number, it works fine). I can't make much
> sense at all of the output I see when I try to check out the entirety of
> GDAL, but when I attempt to just do an update on a single file and specify
> a tag (i.e. "cvs up -r gdal_1_1_6 configure"), I get the following error:
> 
> cvs [server aborted]: cannot write /cvsroot/CVSROOT/val-tags: Permission
> denied
> 
> This happens both when I login as user "anonymous" and "shimitz". Do you
> have any idea what the problem is?

April,

Could you try again? I have changed the permissions on the val-tags file.

Best regards,


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From shimitz at u...  Wed Nov 13 16:10:19 2002
From: shimitz at u... (April Shimitz)
Date: Wed Nov 21 11:49:18 2007
Subject: cvs co
Message-ID: <OF1EAB68C7.C1ADBE22-ON86256C70.0072BD33@c...>

>> Frank,
>>>
>> For some reason I cannot check out the GDAL source when specifying a tag
>> (but when I specify a revision number, it works fine). I can't make much
>> sense at all of the output I see when I try to check out the entirety of
>> GDAL, but when I attempt to just do an update on a single file and
specify
>> a tag (i.e. "cvs up -r gdal_1_1_6 configure"), I get the following
error:
>>
>> cvs [server aborted]: cannot write /cvsroot/CVSROOT/val-tags: Permission
>> denied
>>
>> This happens both when I login as user "anonymous" and "shimitz". Do you
>> have any idea what the problem is?
>
>April,
>
>Could you try again? I have changed the permissions on the val-tags file.

Frank,

Well, it partially fixed it. Now I can co and do diffs specifying the
gdal_1_1_6 tag, but it still error with any other revision tag. Also, are
you applying a global tag to the code at each major release?

April




From warmerdam at p...  Wed Nov 13 16:25:03 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Re: cvs co
References: <OF1EAB68C7.C1ADBE22-ON86256C70.0072BD33@c...>
Message-ID: <3DD2C32F.5020005@p...>

April Shimitz wrote:
> Frank,
> 
> Well, it partially fixed it. Now I can co and do diffs specifying the
> gdal_1_1_6 tag, but it still error with any other revision tag. Also, are
> you applying a global tag to the code at each major release?
> 
> April

Funky,

My vague understanding is the val-tags file is intended to hold a list
of "valid" tags. It seems to be updated when new tags are "discovered".
I have access the gdal_1_1_7 and gdal_1_1_5 tags so they are now in the file.

I suspect the problem arose because the CVS programs on remotesensing.org
were upgraded, adding the new val-tags support, without populating an up
to date val-tags file.

In any event, hopefully it will work now for the standard tags. Note, I
can't event reproduce your problem when operating as anonymous.

Finally, I do apply new global tags on new major releases, but there hasn't
been a major release since 1.1.7 in the spring. There have been point
releases (1.1.7.1, 1.1.7.2, etc) but these are just interim snapshows.

Really there has been lots of changes in GDAL, I have just avoided making
a big release because I promised to implement proper shared library
versioning for the next release. Since I haven't tackled that yet, I just
issue minor "point" releases.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From blazek at i...  Thu Nov 14 08:14:25 2002
From: blazek at i... (Radim Blazek)
Date: Wed Nov 21 11:49:18 2007
Subject: ogr2ogr output layer type
Message-ID: <02111414142502.13150@janacek>

Hi,

I cannot convert DGN file to shapefile because DGN contains more
feature types and ogr2ogr stops with:

ERROR 1: Attempt to write non-linestring (POLYGON) geometry to ARC type 
shapefile.
ERROR 1: Terminating translation prematurely after failed
translation of layer elements

even if I use '-nlt LINESTRING'. Would it be possible to change ogr2ogr
so that it works only on features of type specified by '-nlt'?

I can use somethink like where="Type = 3 or Type = 4" but it does not
seem to be optimal.

Thanks

Radim


From warmerdam at p...  Thu Nov 14 08:57:58 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] ogr2ogr output layer type
References: <02111414142502.13150@janacek>
Message-ID: <3DD3ABE6.6000109@p...>

Radim Blazek wrote:
> Hi,
> 
> I cannot convert DGN file to shapefile because DGN contains more
> feature types and ogr2ogr stops with:
> 
> ERROR 1: Attempt to write non-linestring (POLYGON) geometry to ARC type 
> shapefile.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer elements
> 
> even if I use '-nlt LINESTRING'. Would it be possible to change ogr2ogr
> so that it works only on features of type specified by '-nlt'?
> 
> I can use somethink like where="Type = 3 or Type = 4" but it does not
> seem to be optimal.

Radim,

You could use -skipfailures with ogr2ogr to ensure it will continue after
failed features. Alternatively, the where clause you suggest could also be
used. I am not keen on changing the interpretation of the -nlt flag.

It would be nice to be able to do geometry based tests in a where clause ...
stuff like test if a geometry is a line string, but that would be quite a
bit of work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From blazek at i...  Thu Nov 14 09:14:05 2002
From: blazek at i... (Radim Blazek)
Date: Wed Nov 21 11:49:18 2007
Subject: dgnlib and cells
Message-ID: <02111415140504.13150@janacek>

Hi,

1) Is it right that unshared cells in DGN are saved as
cell header (type 2) followed by cell members within 'totlength'?
Something like complex chains/shapes? This is not explicitly said
in http://gdal.velocet.ca/projects/dgn/dgn.html and I am missing
something like 'numelems' for Cell Header.

2) Where is fseek() for element in DGN file before
psChildElement = DGNReadElement( hDGN ); 
in OGRDGNLayer::ElementToFeature() (grdgnlayer.cpp)
for DGNST_COMPLEX_HEADER? I don't see any call to DGNGotoElement().
Are there file offsets to members of complex chains/shapes and unshared
cells saved in index?

3) Any reason why DGNT_CELL_HEADER is not processed by
OGRDGNLayer::ElementToFeature()? It seems that Cells are silently
lost, is that true?

Thanks for help.

Radim 


From warmerdam at p...  Thu Nov 14 09:26:11 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] dgnlib and cells
References: <02111415140504.13150@janacek>
Message-ID: <3DD3B283.1010800@p...>

Radim Blazek wrote:
> Hi,
> 
> 1) Is it right that unshared cells in DGN are saved as
> cell header (type 2) followed by cell members within 'totlength'?
> Something like complex chains/shapes? This is not explicitly said
> in http://gdal.velocet.ca/projects/dgn/dgn.html and I am missing
> something like 'numelems' for Cell Header.

Radim,

Frankly, I am a little uncertain about how cells work. I think they
essentially form aggregates from a set of elements. However, I don't
get how you tell how many following elements are part of the cell. This
might be a good question to raise on the dgnlib mailing list.

> 2) Where is fseek() for element in DGN file before
> psChildElement = DGNReadElement( hDGN ); 
> in OGRDGNLayer::ElementToFeature() (grdgnlayer.cpp)
> for DGNST_COMPLEX_HEADER? I don't see any call to DGNGotoElement().
> Are there file offsets to members of complex chains/shapes and unshared
> cells saved in index?

ElementToFeature() is passed the feature. It is actually read by either
GetNextFeature() which does no seek because it reads sequentially, or
GetFeature() which does call DGNGotoElement().

Actually, I see that ElementToFeature() does read subsequent elements in
a complex chain or shape but it assumes the "read pointer" for the file
is set to point just after the header when the method is called.

> 3) Any reason why DGNT_CELL_HEADER is not processed by
> OGRDGNLayer::ElementToFeature()? It seems that Cells are silently
> lost, is that true?

That is true. I am not sure how to translate them, so for now each component
element in a cell is treated as an independent element, and the relationship
to the original cell header is lost. I am open to suggestions on this.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From blazek at i...  Thu Nov 14 11:13:58 2002
From: blazek at i... (Radim Blazek)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] dgnlib and cells
In-Reply-To: <3DD3B283.1010800@p...>
References: <02111415140504.13150@janacek> <3DD3B283.1010800@p...>
Message-ID: <02111417135807.13150@janacek>

On Thursday 14 November 2002 03:26 pm, you wrote:
> Frankly, I am a little uncertain about how cells work. I think they
> essentially form aggregates from a set of elements. However, I don't
> get how you tell how many following elements are part of the cell. This
> might be a good question to raise on the dgnlib mailing list.

So I'll ask there.

> ElementToFeature() is passed the feature. It is actually read by either
> GetNextFeature() which does no seek because it reads sequentially, or
> GetFeature() which does call DGNGotoElement().
>
> Actually, I see that ElementToFeature() does read subsequent elements in
> a complex chain or shape but it assumes the "read pointer" for the file
> is set to point just after the header when the method is called.

I see, sorry, I thought that DGNLoadRawElement() reads whole complex
element and it reads just cell header.

> > 3) Any reason why DGNT_CELL_HEADER is not processed by
> > OGRDGNLayer::ElementToFeature()? It seems that Cells are silently
> > lost, is that true?
>
> That is true. I am not sure how to translate them, so for now each
> component element in a cell is treated as an independent element, and the
> relationship to the original cell header is lost. I am open to suggestions
> on this.

I would guess to scale + rotate by matrix and then move to cell origin.
I just know, that while cell is created in Microstation, the cell origin
is specified, so I expect that cell elements are stored in their independent
coordinate systems and MUST be transformed to final position. We need some 
example dgn well described. I'll ask also in dgnlib list.

Radim


From ianm at d...  Fri Nov 15 05:40:11 2002
From: ianm at d... (Ian MacColl)
Date: Wed Nov 21 11:49:18 2007
Subject: missing attributes in OGR NTF meridian-2 => shapefile
Message-ID: <9E4762A0-F886-11D6-A3B3-0003935819D0@d...>

Hello:

[apologies for copious appended listings and possibly OT posting]

I'm converting OS Meridian-2 NTF files to ESRI shapefile but I think 
some of the text attributes are going missing, particularly proper 
names for lines (roads).

I've appended an excerpt from an NTF file. It looks as though proper 
names (PN) are detected for POINTs (see MERIDIAN_POINT listing below) 
but not for LINEs (see MERIDIAN_LINE listing below). My reading of the 
user guide 
(http://www.ordnancesurvey.co.uk/downloads/vector/meridian/ 
Meridian_guide_3_1.pdf) suggests that proper names can occur for lines 
as well as points. Grepping for the proper name strings in the results 
of converting excerpted or full NTF files doesn't find names that 
appear in the NTF (eg, "CASTLEBANK").

One possibility is that OGR is parsing an older version of Meridian, 
implied by old user guide at OGR WWW site, and inclusion of 2 in 
Meridian-2 name??? I've submitted this message to GDAL bugzilla in case 
this is right.

Another possibility is that I'm doing something wrong, or don't 
understand the output (inc which case I'll delete the buzilla report).

thanks

Ian

=== EXCERPT FROM NTF FILE ===

01OS-EDINA-Digimap glacsianm 2002102100000130200V \0%
02Meridian_02.01 DEFAULT_02.00 19920515 
000000001%
00Meridian_02.00 20000901 00000000000%
40FC004I4 FEATURE CODE\NUMERIC FEATURE CODE\0%
40OD013A13 OSODR\ORDNANCE SURVEY OSCAR DATA REFERENCE\0%
40JN A* JUNCTION_NAME\Name Of Road Junction\0%
40LL005I5 LINE_LENGTH\Length Of Line Feature\0%
40NP002I2 NUM_PARENTS\Number Of Parent OSODRs\0%
40PO013A13 PARENT_OSODR\Parent OSODR\0%
40RT001A1 ROUNDABOUT\Roundabout Indicator\0%
40RN A* ROAD_NUM\DoT Route Number\0%
40SN A* SETTLEMENT_NAME\Settlement Name\0%
40TR001A1 TRUNK_ROAD\Trunk Road Indicator\0%
40LC006I6 LEFT COUNTY\LEFT COUNTY INDICATOR\0%
40RC006I6 RIGHT COUNTY\RIGHT COUNTY INDICATOR\0%
40LD006I6 LEFT DISTRICT\LEFT DISTRICT INDICATOR\0%
40RD006I6 RIGHT DISTRICT\RIGHT DISTRICT INDICATOR\0%
40NM A* ADMIN NAME\ADMINISTRATIVE AREA NAME\0%
40PI006I6 GLOBAL ID\ADMIN AREA GLOBAL IDENTIFIER\0%
40DA013A13 DLUA ID\DLUA IDENTIFIER\0%
40PN A* PROPER NAME\DEFINITIVE NAME\0%
40RI013A13 RAIL ID\RAILWAY IDENTIFIER\0%
40SI013A13 STATION ID\STATION IDENTIFIER\0%
40TX A* TEXT\INDEPENDENT TEXT\0%
40FA013A13 FOREST ID\FOREST IDENTIFIER\0%
40WA013A13 WATER AREA ID\AREA WATER IDENTIFIER\0%
40WI013A13 WATER LINK ID\LINEAR WATER IDENTIFIER\0%
40HT008I8 HEIGHT\DERIVED HEIGHT IN METRES\0%
...FEAT_CODE listing deleted...
...90* lines deleted...
23000002000002010000020%
21000002200040570506322 0571606292 0563606276 0548806279 0%
14000002ODO3FPHP6MY4LYVFC3004LL00262PNCASTLEBANK 
STREET\NP03POO1FPHP6MY4LYVPO1%
00O1YPGCAMVCFXXPOO1FPHNB5VQVYV0%
23000003000003010000030%
21000003200020589007483 0585207499 0%
14000003ODO3FPF6U5NE9FVFC3004LL00042NP01POO1FPF6U5NE9FV0%
23000004000004010000040%
21000004200020658406907 0657006883 0%
14000004ODO3FPFKL5UJHFVFC3004LL00028NP01POO1FPFKL5UJHFV0%
23000005000005010000050%
21000005200030796005614 0794805636 0771205639 0%
14000005ODO3FP5DVMYG0YVFC3004LL00266PNST VINCENT 
TERRACE\NP01POO1FP5DVMYG0YV0%
23000006000006010000060%
21000006200020876706271 0878406273 0%
14000006ODO3FP12BMVC9FVFC3004LL00058NP03POO1FP12BMVC9FVPOO1FP0YBMVACFVPO 
1%
00O1FP16XMV9TYV0%

=== OGRINFO MERIDIAN_LINE OUTPUT ===

Layer name: MERIDIAN_LINE
Geometry: Line String
Feature Count: 5
Extent: (255488.000000, 665614.000000) - (258784.000000, 667499.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
GEOGCS["OSGB 1936",
DATUM["OSGB_1936",
SPHEROID["Airy 1830",6377563.396,299.3249646]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",49],
PARAMETER["central_meridian",-2],
PARAMETER["scale_factor",0.999601272],
PARAMETER["false_easting",400000],
PARAMETER["false_northing",-100000],
UNIT["metre",1]]
LINE_ID: Integer (6.0)
FEAT_CODE: String (4.0)
GEOM_ID: Integer (6.0)
OSMDR: String (13.0)
ROAD_NUM: String (80.0)
TRUNK_ROAD: String (1.0)
RAIL_ID: String (13.0)
LEFT_COUNT: Integer (6.0)
RIGHT_COUN: Integer (6.0)
LEFT_DISTR: Integer (6.0)
RIGHT_DIST: Integer (6.0)
TILE_REF: String (10.0)
OGRFeature(MERIDIAN_LINE):0
LINE_ID (Integer) = 2
FEAT_CODE (String) = 3004
GEOM_ID (Integer) = 2
OSMDR (String) = (null)
ROAD_NUM (String) = (null)
TRUNK_ROAD (String) = (null)
RAIL_ID (String) = (null)
LEFT_COUNT (Integer) = (null)
RIGHT_COUN (Integer) = (null)
LEFT_DISTR (Integer) = (null)
RIGHT_DIST (Integer) = (null)
TILE_REF (String) = NS56
LINESTRING (255705 666322,255716 666292,255636 666276,255488 666279)

OGRFeature(MERIDIAN_LINE):1
LINE_ID (Integer) = 3
FEAT_CODE (String) = 3004
GEOM_ID (Integer) = 3
OSMDR (String) = (null)
ROAD_NUM (String) = (null)
TRUNK_ROAD (String) = (null)
RAIL_ID (String) = (null)
LEFT_COUNT (Integer) = (null)
RIGHT_COUN (Integer) = (null)
LEFT_DISTR (Integer) = (null)
RIGHT_DIST (Integer) = (null)
TILE_REF (String) = NS56
LINESTRING (255890 667483,255852 667499)

... features 2-4 deleted...

=== OGRINFO MERIDIAN_LINE OUTPUT ===

Layer name: MERIDIAN_POINT
Geometry: Point
Feature Count: 0
Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
GEOGCS["OSGB 1936",
DATUM["OSGB_1936",
SPHEROID["Airy 1830",6377563.396,299.3249646]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",49],
PARAMETER["central_meridian",-2],
PARAMETER["scale_factor",0.999601272],
PARAMETER["false_easting",400000],
PARAMETER["false_northing",-100000],
UNIT["metre",1]]
POINT_ID: Integer (6.0)
GEOM_ID: Integer (6.0)
FEAT_CODE: String (4.0)
PROPER_NAM: String (80.0)
OSMDR: String (13.0)
JUNCTION_N: String (80.0)
ROUNDABOUT: String (1.0)
STATION_ID: String (13.0)
GLOBAL_ID: Integer (6.0)
ADMIN_NAME: String (80.0)
DA_DLUA_ID: String (13.0)
TILE_REF: String (10.0)

=== OGRINFO MERIDIAN_NODE OUTPUT ===

Layer name: MERIDIAN_NODE
Geometry: None
Feature Count: 0
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
GEOGCS["OSGB 1936",
DATUM["OSGB_1936",
SPHEROID["Airy 1830",6377563.396,299.3249646]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",49],
PARAMETER["central_meridian",-2],
PARAMETER["scale_factor",0.999601272],
PARAMETER["false_easting",400000],
PARAMETER["false_northing",-100000],
UNIT["metre",1]]
NODE_ID: Integer (6.0)
GEOM_ID_OF: Integer (6.0)
NUM_LINKS: Integer (4.0)
TILE_REF: String (10.0)

=== OGRINFO MERIDIAN_TEXT OUTPUT ===

Layer name: MERIDIAN_TEXT
Geometry: Point
Feature Count: 0
Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
GEOGCS["OSGB 1936",
DATUM["OSGB_1936",
SPHEROID["Airy 1830",6377563.396,299.3249646]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",49],
PARAMETER["central_meridian",-2],
PARAMETER["scale_factor",0.999601272],
PARAMETER["false_easting",400000],
PARAMETER["false_northing",-100000],
UNIT["metre",1]]
TEXT_ID: Integer (6.0)
FEAT_CODE: String (4.0)
FONT: Integer (4.0)
TEXT_HT: Real (5.1)
DIG_POSTN: Integer (1.0)
ORIENT: Real (5.1)
TEXT: String (80.0)
TEXT_HT_GR: Real (10.3)
TILE_REF: String (10.0)



From warmerdam at p...  Sun Nov 17 22:54:31 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: Daily CVS Snapshots now available
Message-ID: <3DD86477.5080109@p...>

Folks,

I have setup a cron job to prepare daily CVS snapshots of the GDAL source
tree. They may be found at:

ftp://ftp.remotesensing.org/gdal/daily/

A link has also been added to the main page. This is intended to help folks
needing recent bug fixes, but not wanting to bother setting up for
anonymous CVS access.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From paul at t...  Sun Nov 17 23:10:53 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Daily CVS Snapshots now available
References: <3DD86477.5080109@p...>
Message-ID: <000701c28eb8$7f142af0$700201c0@M...>

Hello Frank,
I do not know if daily is that necessary. Personally, I think
weekly (updated over weekends, which equals check new versions
every Monday!) might be more realistic.

Best regards,
Paul.

----- Original Message -----
From: "Frank Warmerdam" <warmerdam@p...>
To: "gdal-dev" <gdal-dev@yahoogroups.com>
Sent: Monday, November 18, 2002 12:54 PM
Subject: [gdal-dev] Daily CVS Snapshots now available


> Folks,
>
> I have setup a cron job to prepare daily CVS snapshots of the GDAL source
> tree. They may be found at:
>
> ftp://ftp.remotesensing.org/gdal/daily/
>
> A link has also been added to the main page. This is intended to help
folks
> needing recent bug fixes, but not wanting to bother setting up for
> anonymous CVS access.
>
> Best regards,
>
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up | Frank Warmerdam,
warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>



From danmo at v...  Mon Nov 18 07:43:34 2002
From: danmo at v... (Daniel Morissette)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Daily CVS Snapshots now available
References: <3DD86477.5080109@p...> <000701c28eb8$7f142af0$700201c0@M...>
Message-ID: <3DD8E076.D553AAC1@d...>

Paul Selormey wrote:
> 
> I do not know if daily is that necessary. Personally, I think
> weekly (updated over weekends, which equals check new versions
> every Monday!) might be more realistic.
> 

I'm not sure to understand why weekly would be considered 'more
realistic' since it's a cron job that does the pacakge so it doesn't
require more manual work and there is no reason why the Monday morning
build would be less broken than the Thursday morning one for instance.

I think daily is a great idea because if someone is waiting for an
important bug that gets fixed on a Tuesday then they can get a new
package the next day and don't have to wait until the next Monday.

So daily is more realistic IMHO.

Daniel



From paul at t...  Mon Nov 18 09:01:55 2002
From: paul at t... (Paul Selormey)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Daily CVS Snapshots now available
References: <3DD86477.5080109@p...> <000701c28eb8$7f142af0$700201c0@M...> <3DD8E076.D553AAC1@d...>
Message-ID: <000b01c28f0b$10408030$700201c0@M...>

Hello Daniel,

> I think daily is a great idea because if someone is waiting for an
> important bug that gets fixed on a Tuesday then they can get a new
> package the next day and don't have to wait until the next Monday.
> 
> So daily is more realistic IMHO.

Shipping a product a with CVS snapshots is not realistic, besides you
can always access the CVS - hmmm...every minute if you really do 
not wish to wait :-)

Best regards,
Paul.




From warmerdam at p...  Mon Nov 18 09:14:27 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Daily CVS Snapshots now available
References: <3DD86477.5080109@p...> <000701c28eb8$7f142af0$700201c0@M...> <3DD8E076.D553AAC1@d...> <000b01c28f0b$10408030$700201c0@M...>
Message-ID: <3DD8F5C3.90301@p...>

Paul Selormey wrote:

> Shipping a product a with CVS snapshots is not realistic, besides you
> can always access the CVS - hmmm...every minute if you really do 
> not wish to wait :-)

Paul,

The CVS snapshots are never quality-assured by me. They are automatically
generated snapshots ... nothing more. I create them because some folks
don't what to install a CVS client and learn how to use it just to get a
bug fix. Some companies (such as one Daniel and I used to work for) don't
even seem to be able to access external CVS servers from there internal
network!

As to whether a CVS snapshot can be used in a "product" that is a decision
for those producing the product. Obviously using a snapshot puts more
pressure on the consumer to ensure that the code works for their intended
applications.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From danmo at v...  Mon Nov 18 09:15:34 2002
From: danmo at v... (Daniel Morissette)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Daily CVS Snapshots now available
References: <3DD86477.5080109@p...>
  <000701c28eb8$7f142af0$700201c0@M...>
  <3DD8E076.D553AAC1@d...> <000b01c28f0b$10408030$700201c0@M...>
Message-ID: <3DD8F606.A27B58B2@d...>

Paul Selormey wrote:
> 
> Shipping a product a with CVS snapshots is not realistic, besides you
> can always access the CVS - hmmm...every minute if you really do
> not wish to wait :-)
> 

Agreed. But with daily snapshots the idea is not to ship a product but
to provide an alternative to CVS for those who don't have it installed
already. This is a very common practice for every Open Source project
so I don't see what the issue is.

-- 
------------------------------------------------------------
Daniel Morissette morissette@d...
DM Solutions Group http://www.dmsolutions.ca/
------------------------------------------------------------


From dron at a...  Mon Nov 18 10:41:30 2002
From: dron at a... (Andrey Kiselev)
Date: Wed Nov 21 11:49:18 2007
Subject: [ANNOUNCE]: HDF4 driver supports writing
Message-ID: <20021118154129.GA21127@a...>

Hello, GDAL users,

Writing support recently added to HDF4 GDAL driver. Both Create() and
CreateCopy() methods accessible.

By default multiband dataset stored as single 3D SDS. The third dimension
represent band number. With "RANK=2" option set of 2D SDSs will be
produced, one per each band. Projection name, transformation matrix,
band descriptions and metadata also stored and restored back
automatically.

Note, that default behaviour of the HDF4 driver changed: now if input
HDF file contains only single multidimensional subdataset it will be
opened automatically. If several subdatasets exist, you should select
one of them manually, as previously. I don't know is it really right
way, so any feedback appreciated.

Regards,
Andrey

-- 
Andrey V. Kiselev
Scientific Research Center for Ecological Safety Russian Academy of Sciences
Office phone: +7 812 2307834 ICQ UIN 26871517



From nakiya123 at y...  Tue Nov 19 18:10:11 2002
From: nakiya123 at y... (nakiya123)
Date: Wed Nov 21 11:49:18 2007
Subject: can't find libproj.so
Message-ID: <aregcj+6t75@eGroups.com>

I am trying to use an OGRCoordinateTransformation object but it fails
with:

ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.

My program uses the proj4 library directly for coordinate
transformations(pj_fwd, etc.) and it works, so it must be finding the
library. It's in my LD_LIBRARY_PATH and I even set it up in my
ld.so.conf path/setup stuff. It shows in this:

% ldconfig -p | grep -i proj
libproj.so.0 (libc6) => /home/dmingus/lib/proj4/lib/libproj.so.0
libproj.so (libc6) => /home/dmingus/lib/proj4/lib/libproj.so
libmrproject.so.0 (libc6) => /usr/lib/libmrproject.so.0

I'm running RH8.0 with gcc-3.2.7, gdal from cvs(thanks for j2k!!!),
and proj-4.4.4 AND I've tried proj-4.4.5 both from source. Any
suggestions?



From warmerdam at p...  Tue Nov 19 22:30:39 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] can't find libproj.so
References: <aregcj+6t75@eGroups.com>
Message-ID: <3DDB01DF.8020404@p...>

nakiya123 wrote:
> I am trying to use an OGRCoordinateTransformation object but it fails
> with:
> 
> ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
> OGRCoordinateTransformation failed.
> 
> My program uses the proj4 library directly for coordinate
> transformations(pj_fwd, etc.) and it works, so it must be finding the
> library. It's in my LD_LIBRARY_PATH and I even set it up in my
> ld.so.conf path/setup stuff. It shows in this:
> 
> % ldconfig -p | grep -i proj
> libproj.so.0 (libc6) => /home/dmingus/lib/proj4/lib/libproj.so.0
> libproj.so (libc6) => /home/dmingus/lib/proj4/lib/libproj.so
> libmrproject.so.0 (libc6) => /usr/lib/libmrproject.so.0
> 
> I'm running RH8.0 with gcc-3.2.7, gdal from cvs(thanks for j2k!!!),
> and proj-4.4.4 AND I've tried proj-4.4.5 both from source. Any
> suggestions?

Hmm,

This is odd. You could try building and installing PROJ.4 from CVS, but
I don't think that should be necessary. You might also want to put some
printf() statements in LoadProjLibrary() in ogrct.cpp to see what
part is failing. Is it the initial CPLGetSymbol() call for "pj_init", or
one of the new functions?

If the initial CPLGetSymbol() is failing then the problem is somehow related
to your search paths (ie. LD_LIBRARY_PATH).

I would also suggest setting the CPL_LOG_ERRORS environment variable to some
non-empty value, and setting the CPL_DEBUG environment variable to ON. This
might cause CPLGetSymbol() to cough up some extra info on why the shared
library load is failing.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From nakiya123 at y...  Wed Nov 20 09:57:35 2002
From: nakiya123 at y... (nakiya123)
Date: Wed Nov 21 11:49:18 2007
Subject: can't find libproj.so
In-Reply-To: <3DDB01DF.8020404@p...>
Message-ID: <arg7sv+uiev@eGroups.com>

--- In gdal-dev@y..., Frank Warmerdam <warmerdam@p...> wrote:
> nakiya123 wrote:
> > I am trying to use an OGRCoordinateTransformation object but it fails
> > with:
> > 
> > ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
> > OGRCoordinateTransformation failed.
> > 
> > My program uses the proj4 library directly for coordinate
> > transformations(pj_fwd, etc.) and it works, so it must be finding the
> > library. It's in my LD_LIBRARY_PATH and I even set it up in my
> > ld.so.conf path/setup stuff. It shows in this:
> > 
> > % ldconfig -p | grep -i proj
> > libproj.so.0 (libc6) => /home/dmingus/lib/proj4/lib/libproj.so.0
> > libproj.so (libc6) => /home/dmingus/lib/proj4/lib/libproj.so
> > libmrproject.so.0 (libc6) => /usr/lib/libmrproject.so.0
> > 
> > I'm running RH8.0 with gcc-3.2.7, gdal from cvs(thanks for j2k!!!),
> > and proj-4.4.4 AND I've tried proj-4.4.5 both from source. Any
> > suggestions?
> 
> Hmm,
> 
> This is odd. You could try building and installing PROJ.4 from CVS, but
> I don't think that should be necessary. You might also want to put
some
> printf() statements in LoadProjLibrary() in ogrct.cpp to see what
> part is failing. Is it the initial CPLGetSymbol() call for
"pj_init", or
> one of the new functions?
> 
> If the initial CPLGetSymbol() is failing then the problem is somehow
related
> to your search paths (ie. LD_LIBRARY_PATH).
> 
> I would also suggest setting the CPL_LOG_ERRORS environment variable
to some
> non-empty value, and setting the CPL_DEBUG environment variable to
ON. This
> might cause CPLGetSymbol() to cough up some extra info on why the shared
> library load is failing.
> 
> Best regards,
> 
> -- 
>

CPL_LOG_ERRORS & CPL_DEBUG did nothing. I put printf's around the
loading of pj_init like this:
---------------------------------------------------------
printf( "********** DEBUGGING INFO: Gunna load pj_init... " );
pfn_pj_init = (projPJ (*)(int, char**)) CPLGetSymbol( LIBNAME,
"pj_init" );
CPLPopErrorHandler();

if( pfn_pj_init == NULL )
return( FALSE );

printf( "done **********\n" );
----------------------------------------------------------

"done" does not get printed. I tried the proj-cvs. Same results. I
did notice though that my program reports this:

% ldd lv
libproj.so.0 => /home/dmingus/lib/proj4/lib/libproj.so.0 (0x40013000)
libgdal.so => /home/dmingus/lib/gdal/lib/libgdal.so (0x40042000)
libGLU.so.1 => /usr/lib/libGLU.so.1 (0x402cb000)

notice the libproj.so.0. There is a libproj.so link pointing to the
same place that libproj.so.0 does which is libproj.so.0.3.1. From my
recolection, it should be linking up with libproj.so instead of
libproj.so.0 right? So I removed libproj.so.0 to force it, recompiled
and ldd showed:

libproj.so.0 => not found

funny!

Regardless, this looks like it's on my end so consider this a status
report instead of a troubleshooting request, unless you know exactly
what I'm doing wrong.

Thanks


---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent



From warmerdam at p...  Wed Nov 20 10:02:50 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Re: can't find libproj.so
References: <arg7sv+uiev@eGroups.com>
Message-ID: <3DDBA41A.2010801@p...>

nakiya123 wrote:
>>>% ldconfig -p | grep -i proj
>>>libproj.so.0 (libc6) => /home/dmingus/lib/proj4/lib/libproj.so.0
>>>libproj.so (libc6) => /home/dmingus/lib/proj4/lib/libproj.so
>>>libmrproject.so.0 (libc6) => /usr/lib/libmrproject.so.0


> "done" does not get printed. I tried the proj-cvs. Same results. I
> did notice though that my program reports this:

This would seem to indicate that for one reason or another
libproj.so (this should be what LIBNAME maps to) is not found by
dlopen() (which is what CPLGetSymbol() calls).

> % ldd lv
> libproj.so.0 => /home/dmingus/lib/proj4/lib/libproj.so.0 (0x40013000)
> libgdal.so => /home/dmingus/lib/gdal/lib/libgdal.so (0x40042000)
> libGLU.so.1 => /usr/lib/libGLU.so.1 (0x402cb000)
> 
> notice the libproj.so.0. There is a libproj.so link pointing to the
> same place that libproj.so.0 does which is libproj.so.0.3.1. From my
> recolection, it should be linking up with libproj.so instead of
> libproj.so.0 right? So I removed libproj.so.0 to force it, recompiled
> and ldd showed:
> 
> libproj.so.0 => not found
> 
> funny!
> 
> Regardless, this looks like it's on my end so consider this a status
> report instead of a troubleshooting request, unless you know exactly
> what I'm doing wrong.

I would encourage you to review the dlopen() man page and consider
why the libproj.so you have isn't found. You could likely make it
work by soft linking /usr/lib/libproj.so to your copy.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From nakiya123 at y...  Wed Nov 20 11:58:39 2002
From: nakiya123 at y... (nakiya123)
Date: Wed Nov 21 11:49:18 2007
Subject: can't find libproj.so
In-Reply-To: <3DDBA41A.2010801@p...>
Message-ID: <argevv+cks7@eGroups.com>

--- In gdal-dev@y..., Frank Warmerdam <warmerdam@p...> wrote:
Ok,

this is getting called:

(port/cplgetsymbol.cpp)
--------------------------------------------------------
void *CPLGetSymbol(const char *, const char *)

{
printf( "DUMMY???\n" );
return NULL;
}
--------------------------------------------------------

not the correct unix version!

so I removed the #if defined(HAVE_DLFCN_H) which is not the right way
to do this of course, but blammo! it worked.

So what to do?




From warmerdam at p...  Wed Nov 20 12:19:16 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [gdal-dev] Re: can't find libproj.so
References: <argevv+cks7@eGroups.com>
Message-ID: <3DDBC414.5000901@p...>

nakiya123 wrote:
> --- In gdal-dev@y..., Frank Warmerdam <warmerdam@p...> wrote:
> Ok,
> 
> this is getting called:
> 
> (port/cplgetsymbol.cpp)
> --------------------------------------------------------
> void *CPLGetSymbol(const char *, const char *)
> 
> {
> printf( "DUMMY???\n" );
> return NULL;
> }
> --------------------------------------------------------
> 
> not the correct unix version!
> 
> so I removed the #if defined(HAVE_DLFCN_H) which is not the right way
> to do this of course, but blammo! it worked.
> 
> So what to do?

Well, that gets you working fine.

The HAVE_DLFCN_H macro is supposed to be set in gdal/port/cpl_config.h by
configure based on a test to see if your system has dlfcn.h. Could you
do "locate dlfcn.h" to see where yours is? Also, could you rerun
configure can capture the line about dlfcn.h?

I would like to fix configure so this doesn't happen to other people, but
I don't know what could be going wrong with the include file check.

Any chance you did something funky like running configure on a different
system, or messing with cpl_config.h?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From nakiya123 at y...  Wed Nov 20 12:24:36 2002
From: nakiya123 at y... (nakiya123)
Date: Wed Nov 21 11:49:18 2007
Subject: can't find libproj.so
In-Reply-To: <3DDBC414.5000901@p...>
Message-ID: <argggk+csrt@eGroups.com>

--- In gdal-dev@y..., Frank Warmerdam <warmerdam@p...> wrote:
> nakiya123 wrote:
> > --- In gdal-dev@y..., Frank Warmerdam <warmerdam@p...> wrote:
> > Ok,
> > 
> > this is getting called:
> > 
> > (port/cplgetsymbol.cpp)
> > --------------------------------------------------------
> > void *CPLGetSymbol(const char *, const char *)
> > 
> > {
> > printf( "DUMMY???\n" );
> > return NULL;
> > }
> > --------------------------------------------------------
> > 
> > not the correct unix version!
> > 
> > so I removed the #if defined(HAVE_DLFCN_H) which is not the right way
> > to do this of course, but blammo! it worked.
> > 
> > So what to do?
> 
> Well, that gets you working fine.
> 
> The HAVE_DLFCN_H macro is supposed to be set in
gdal/port/cpl_config.h by
> configure based on a test to see if your system has dlfcn.h. Could you
> do "locate dlfcn.h" to see where yours is? Also, could you rerun
> configure can capture the line about dlfcn.h?
> 
> I would like to fix configure so this doesn't happen to other
people, but
> I don't know what could be going wrong with the include file check.
> 
> Any chance you did something funky like running configure on a different
> system, or messing with cpl_config.h?
> 
> Best regards,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent


% locate dlfcn.h
/usr/include/bits/dlfcn.h
/usr/include/dlfcn.h

./configure --prefix=/home/dmingus/lib/gdal/
checking for gcc... gcc
checking whether the C compiler (gcc ) works... yes
checking whether the C compiler (gcc ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking for c++... c++
checking whether the C++ compiler (c++ ) works... yes
checking whether the C++ compiler (c++ ) is a cross-compiler... no
checking whether we are using GNU C++... yes
checking whether c++ accepts -g... yes
checking for ranlib... ranlib
checking for dlopen in -ldl... yes
checking for malloc_chain_check in -ldbmalloc... no
checking for main in -lm... yes
checking how to run the C preprocessor... /lib/cpp
checking for ANSI C header files... no
checking for fcntl.h... no
checking for unistd.h... no
checking for dbmalloc.h... no
checking for dlfcn.h... no <--- ********************************
checking for stdint.h... no
checking whether byte ordering is bigendian... no
checking for vprintf... yes
checking for vsnprintf... yes
checking for 64bit integer type... long long
checking for 64bit file io... yes
checking for deflateInit_ in -lz... yes
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for png_set_IHDR in -lpng... yes
checking for png.h... no
using internal png code.
checking for TIFFGetTagListCount in -ltiff... no
using internal TIFF code.
using internal GeoTIFF code.
checking for jpeg_read_scanlines in -ljpeg... yes
checking for jpeglib.h... no
using internal jpeg code.
checking for DGifOpenFileName in -lgif... yes
using pre-installed libgif.
checking for cln_GetLayerCapabilities in -logdi31... no
with_fme=
checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for jpc_decode in -ljasper... no
checking for jp2_decode in -ljasper... no
checking for pgx_decode in -ljasper... no
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for OGR ... enabled
checking for pg_config... no
checking for PostgreSQL... no
checking for Xerces C++... disabled
checking for c++ -shared ... yes
checking for python... python
checking where python Makefiles are... found
checking Python makefile... found
checking where .py files should go... /usr/lib/python2.2/site-packages
checking for python headers... found
checking definitions from Python makefile... done
checking for NumPy include files... missing
creating ./config.status
creating GDALmake.opt
creating port/cpl_config.h
port/cpl_config.h is unchanged


missing a lot of stuff it looks like?

I ran just "./configure" without prefix setting( I assumed this
wouldn't make a differenc ) and it was the same.

I'll use it with my hack for now, thanks for the help.




From warmerdam at p...  Thu Nov 21 16:56:25 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: CreateCopy vs Create
References: <3DDD59F0.746CFC38@a...>
Message-ID: <3DDD5689.2070404@p...>

gwalter@a... wrote:
> Hi Frank,
> 
> What is the distinction between CreateCopy and Create in gdal?

Gillian,

The CreateCopy() method takes a complete dataset as the input, and
tries to create a duplicate of all the data in the target drivers
format, taking into account the passed in creation options.

The Create() method creates a new blank database which may be written
to randomly.

The distinction exists because many formats (well it's more an issue
of the libraries) require alot of information in advance before they
can start creating the file, including stuff like coordinate system and
metadata. Also, many formats can only be practically written with
certain output strategies. For instance, a pixel interleaved output
formats should be have the data streamed to it with all bands at ones.

It is therefore much easier to implement a CreateCopy() method for these
formats than it is also allow truely random update for writing them.

>From the application point of view, it is often harder to use the formats
with only a CreateCopy() method because a whole "image" of the desired
output file must be created in advance. The virtual format is often useful
for doing this without actually duplicating the underlying image data.

I hope this helps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Sat Nov 23 12:37:50 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: gdal-dev mailing list moving
Message-ID: <3DDFBCEE.4080408@p...>

Folks,

Since YahooGroups has chosen to classify gdal-dev as an "adult" mailing
list, and for various other reasons that yahoogroups is annoying, I am
finally moving the group to remotesensing.org. The new email address will
be:

gdal-dev@r...

I will be bulk-inviting everyone who is currently a member of the list
on yahoogroups. Please update any address book entries for gdal-dev to
refer to the new group. I am not going to shutdown the old list, but I have
closed it to new membership. It seems I am unable to recover the mailing
list archives from YahooGroups, so I will retain a link to the old archive
on the GDAL web page.

Information for subscribing, and viewing archives of the new group can be
found at http://www.remotesensing.org/gdal as always.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




