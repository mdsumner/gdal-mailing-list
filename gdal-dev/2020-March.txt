From even.rouault at spatialys.com  Sun Mar  1 03:08:16 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 01 Mar 2020 12:08:16 +0100
Subject: [gdal-dev] netcdf warnings
In-Reply-To: <DB8PR04MB6697B116E5638C2B69D85C53A6E90@DB8PR04MB6697.eurprd04.prod.outlook.com>
References: <DB8PR04MB6697B116E5638C2B69D85C53A6E90@DB8PR04MB6697.eurprd04.prod.outlook.com>
Message-ID: <1895525.es8PoyUYoS@even-i700>

Joaquim,

> There are a couple of issues that show when I run this test case.

Thanks for reporting. This turned out to be a regression in master, in raster 
Create() support, related to the addition of CF-1.8 Simple Geometries writing. 
Now fixed

> I see that the x,y coordinates are always named "lon,lat" but data is not in
> geographics those names are not true.

GDAL defaults to geographic coordinates, if there's no explicit setting of the 
CRS. As far as I can see in CF conventions, there's no way to define a 
unspecified projected coordinate systems, and as the driver stick to CF 
conventions, that's the likely reason for the current behaviour.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jluis at ualg.pt  Sun Mar  1 13:18:52 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Sun, 1 Mar 2020 21:18:52 +0000
Subject: [gdal-dev] netcdf warnings
In-Reply-To: <1895525.es8PoyUYoS@even-i700>
References: <DB8PR04MB6697B116E5638C2B69D85C53A6E90@DB8PR04MB6697.eurprd04.prod.outlook.com>
 <1895525.es8PoyUYoS@even-i700>
Message-ID: <DB8PR04MB6697ED308920F1333A4B800BA6E60@DB8PR04MB6697.eurprd04.prod.outlook.com>


> Thanks for reporting. This turned out to be a regression in master, in raster
> Create() support, related to the addition of CF-1.8 Simple Geometries writing. 
> Now fixed

Thanks, works silently now.

>> I see that the x,y coordinates are always named "lon,lat" but data is 
>> not in geographics those names are not true.

> GDAL defaults to geographic coordinates, if there's no explicit setting of the CRS. As far as I can see in > CF conventions, there's no way to define a unspecified projected coordinate systems, and as the 
> driver stick to CF conventions, that's the likely reason for the current behaviour.

OK.

Joaquim
 

From borjarf9 at gmail.com  Mon Mar  2 01:02:03 2020
From: borjarf9 at gmail.com (=?UTF-8?Q?Borja_Rodr=C3=ADguez_Fern=C3=A1ndez?=)
Date: Mon, 2 Mar 2020 10:02:03 +0100
Subject: [gdal-dev] Problem with protocol Microsoft Azure Blob in QGIS
Message-ID: <CALAT5VdrWxvsxq_M93iyccE1zAQKvoYtGLi6LyYOxcpxxqRXEA@mail.gmail.com>

Hi
I am trying to upload an image in tiff format into QGIS using Azure Blob
protocol with the name of the blob and the storage account key but I have
this error:

Layer Invalid: provider GDAL You can not open GDAL dataset / vsiaz / cog2 /
3LiES........Lack AZURE_STORAGE_ACCOUNT + AZURE_STORAGE_ACCESS_KEY or
AZURE_STORAGE_CONNECTION_STRING settings frame layer Provider is invalid
(Provider: gdal, URL: / vsiaz / cog2 / 3LiES.............

I write the name of the storage account and the key1 of that storage
account but I get an error

What could be the problem?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200302/ba37d6f2/attachment.html>

From momtchil at momtchev.com  Mon Mar  2 01:12:30 2020
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Mon, 2 Mar 2020 10:12:30 +0100
Subject: [gdal-dev] Handle geojson bigger than 200MB
In-Reply-To: <34cd4704-d2e1-4c96-b707-5a60029cb91b@Spark>
References: <687fa626-ab91-40ef-9ee8-ed63de93341d@Spark>
 <2198812.CLDSvcy3v0@even-i700> <3b6a6124-cca3-4cd2-a1e2-6aca7b55cbd2@Spark>
 <3050483.EyXBC9cvJK@even-i700> <34cd4704-d2e1-4c96-b707-5a60029cb91b@Spark>
Message-ID: <8952f5e1-95fa-632f-912c-7906d95127c0@momtchev.com>


On 29/02/2020 20:34, Francesco Bartoli wrote:
> Thanks Even, it works but I have strange result with the size value. I 
> wouldn’t have been expected the exception from this test:
>
> $ OGR_GEOJSON_MAX_OBJ_SIZE=500MB ogr2ogr -f "GeoJSON" 
> indonesia.geojson 
> "WFS:geonode.wfp.org/geoserver/wfs?request=GetFeature&typename=geonode:glb_bnd_adm0_1&outputformat=json" 
> -where “adm0_id=‘272’"
>
> indonesia.geojson is around 35MB so the exception shouldn’t raise if 
> OGR_GEOJSON_MAX_OBJ_SIZE=50 AFAIK:
>

OGR_GEOJSON_MAX_OBJ_SIZE is not a limit on the file size, but on the 
maximum memory allocation for a single GeoJSON feature which is 
estimated before the feature is read. As country borders are usually a 
single GeoJSON feature, a country with a complex coastline is the 
typical case where you need larger features.


-- 
Momtchil Momtchev <momtchil at momtchev.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200302/351d99ba/attachment.html>

From xbartolone at gmail.com  Mon Mar  2 04:48:50 2020
From: xbartolone at gmail.com (Francesco Bartoli)
Date: Mon, 2 Mar 2020 13:48:50 +0100
Subject: [gdal-dev] Handle geojson bigger than 200MB
In-Reply-To: <8952f5e1-95fa-632f-912c-7906d95127c0@momtchev.com>
References: <687fa626-ab91-40ef-9ee8-ed63de93341d@Spark>
 <2198812.CLDSvcy3v0@even-i700>
 <3b6a6124-cca3-4cd2-a1e2-6aca7b55cbd2@Spark>
 <3050483.EyXBC9cvJK@even-i700>
 <34cd4704-d2e1-4c96-b707-5a60029cb91b@Spark>
 <8952f5e1-95fa-632f-912c-7906d95127c0@momtchev.com>
Message-ID: <db44347d-584d-4b2b-ac65-529d1a90ead9@Spark>

thanks Momtchil, it makes sense now
Il 2 mar 2020, 10:12 +0100, Momtchil Momtchev <momtchil at momtchev.com>, ha scritto:
>
> On 29/02/2020 20:34, Francesco Bartoli wrote:
> > Thanks Even, it works but I have strange result with the size value. I wouldn’t have been expected the exception from this test:
> >
> > $ OGR_GEOJSON_MAX_OBJ_SIZE=500MB ogr2ogr -f "GeoJSON" indonesia.geojson "WFS:geonode.wfp.org/geoserver/wfs?request=GetFeature&typename=geonode:glb_bnd_adm0_1&outputformat=json" -where “adm0_id=‘272’"
> >
> > indonesia.geojson is around 35MB so the exception shouldn’t raise if OGR_GEOJSON_MAX_OBJ_SIZE=50 AFAIK:
> >
>
> OGR_GEOJSON_MAX_OBJ_SIZE is not a limit on the file size, but on the maximum memory allocation for a single GeoJSON feature which is estimated before the feature is read. As country borders are usually a single GeoJSON feature, a country with a complex coastline is the typical case where you need larger features.
>
> --
> Momtchil Momtchev <momtchil at momtchev.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200302/06ee0b69/attachment.html>

From gd.zhu at outlook.com  Wed Mar  4 20:23:18 2020
From: gd.zhu at outlook.com (Guodong)
Date: Wed, 4 Mar 2020 21:23:18 -0700 (MST)
Subject: [gdal-dev] Using Python gdalwarp to read gif file and world file,
 re-project to another picture
Message-ID: <1583382198374-0.post@n6.nabble.com>

Hello,

I want to re-project a radar image
(https://radar.weather.gov/Conus/RadarImg/latest_radaronly.gif) which is in
NAD83/EPSG4326 to WGS84/Pseudo-Mercator/EPSG3857. There is a world file
associated with this gif
(https://radar.weather.gov/Conus/RadarImg/latest_radaronly.gfw). I was
wondering how can I do this projection using Python gdalwarp package, and
how to extract the coordinates bounds from the new re-projected picture?

I'm very new to GIS. I know world file contains georeferencing information,
but I stucked at the first step and don't know how to read gif file along
with the world file...

Thanks a lot for your time and help!

Best regards,
Guodong



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From miller.frank2299 at gmail.com  Thu Mar  5 00:26:35 2020
From: miller.frank2299 at gmail.com (Frank Miller)
Date: Thu, 5 Mar 2020 09:26:35 +0100
Subject: [gdal-dev] Processing builder
Message-ID: <CAN6zawWV-P4Qm+wTw3xz+qVtZwOvDwbZSmaq8o+1HRmQoqWMJA@mail.gmail.com>

Hi,
I am very new in this group and have a question you may be very familiar
with. I am trying to add 'Clip raster by mask layer' tool to processing
modeler and download DEM data from an online resource but so far there is
no luck.
Does GDAL works in Processing Modeler? If yes what is my problem?

Regards,
Frank
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200305/a7382570/attachment.html>

From alexander.bruy at gmail.com  Thu Mar  5 00:31:10 2020
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 5 Mar 2020 10:31:10 +0200
Subject: [gdal-dev] Processing builder
In-Reply-To: <CAN6zawWV-P4Qm+wTw3xz+qVtZwOvDwbZSmaq8o+1HRmQoqWMJA@mail.gmail.com>
References: <CAN6zawWV-P4Qm+wTw3xz+qVtZwOvDwbZSmaq8o+1HRmQoqWMJA@mail.gmail.com>
Message-ID: <CALuHMPArEooKJEKg=v0y+0Uud5CMxs_uLQx76PNTjFeCkDkRgw@mail.gmail.com>

Hi Frank,

your question is not about GDAL but about QGIS and should be asked in the
QGIS-users mailing list.

Your issue is that you are using online DEM source. You should first download
it to the local machine and only then call Processing algorithm against saved
file.

Hope this helps.

чт, 5 бер. 2020 о 10:26 Frank Miller <miller.frank2299 at gmail.com> пише:
>
> Hi,
> I am very new in this group and have a question you may be very familiar with. I am trying to add 'Clip raster by mask layer' tool to processing modeler and download DEM data from an online resource but so far there is no luck.
> Does GDAL works in Processing Modeler? If yes what is my problem?
>
> Regards,
> Frank
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Alexander Bruy

From Daniel.Evans at jbarisk.com  Thu Mar  5 07:23:32 2020
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Thu, 5 Mar 2020 15:23:32 +0000
Subject: [gdal-dev] Importing ESRI (EPSG?) 102008 in GDAL 3.x/PROJ 6
Message-ID: <LO2P123MB20773919D78560CC2A9DF37495E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>

Hi all,

While upgrading some Python software from using GDAL 2.3 to GDAL 3, I've come across this snippet of code:

srs = osr.SpatialReference()
srs.ImportFromEPSG(102008)

This used to work, but now fails with GDAL 3 / Proj 6 with "crs not found".

Projection code 102008 corresponds to "ESRI:102008" described here, which the WKT output describes as "EPSG 102008": https://epsg.io/102008

Is there an easy way to create an SRS from the code 102008 (perhaps with some prefix/suffix) in GDAL 3 / PROJ 6? The projection and its code are included in the PROJ source data (https://github.com/OSGeo/PROJ/blob/master/data/sql/esri.sql), but I can't figure out what combination of "ImportFrom..." function and projection code format to use.


(There is a possibility that the GDAL 2.3 build we have has 102008 added into the data files - the history of the custom fork of GDAL we're moving away from isn't well documented)

Dr. Daniel Evans
Software Developer

Skype<sip:daniel.evans at jbarisk.com>


T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200305/88f1b576/attachment.html>

From even.rouault at spatialys.com  Thu Mar  5 08:00:41 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 17:00:41 +0100
Subject: [gdal-dev] Importing ESRI (EPSG?) 102008 in GDAL 3.x/PROJ 6
In-Reply-To: <LO2P123MB20773919D78560CC2A9DF37495E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>
References: <LO2P123MB20773919D78560CC2A9DF37495E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <1663870.YQrXOHxBjO@even-i700>

Daniel,
 
> While upgrading some Python software from using GDAL 2.3 to GDAL 3, I've
> come across this snippet of code:
> 
> srs = osr.SpatialReference()
> srs.ImportFromEPSG(102008)
> 
> This used to work, but now fails with GDAL 3 / Proj 6 with "crs not found".

yep, we're more pedantic now, and don't mix EPSG and ESRI codes together.

> Projection code 102008 corresponds to "ESRI:102008" described here, which
> the WKT output describes as "EPSG 102008": https://epsg.io/102008

epsg.io should not be taken as a reference website (even if more up-to-date 
than spatialreference.org). The WKT you see there has been built by some piece 
of software, and is in no way the original ESRI WKT (ESRI WKT has no AUTHORITY 
node)

> Is there an easy way to create an SRS from the code 102008 (perhaps with
> some prefix/suffix) in GDAL 3 / PROJ 6? The projection and its code are
> included in the PROJ source data
> (https://github.com/OSGeo/PROJ/blob/master/data/sql/esri.sql), but I can't
> figure out what combination of "ImportFrom..." function and projection code
> format to use.

srs.SetFromUserInput("ESRI:102008")

> (There is a possibility that the GDAL 2.3 build we have has 102008 added
> into the data files - the history of the custom fork of GDAL we're moving
> away from isn't well documented)

No, stock GDAL 2.4 will also output

$ gdalsrsinfo EPSG:102008

PROJ.4 : +proj=aea +lat_1=20 +lat_2=60 +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 
+datum=NAD83 +units=m +no_defs 

OGC WKT :
PROJCS["North_America_Albers_Equal_Area_Conic",
    GEOGCS["GCS_North_American_1983",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS_1980",6378137.0,298.257222101]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["False_Easting",0.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["longitude_of_center",-96.0],
    PARAMETER["Standard_Parallel_1",20.0],
    PARAMETER["Standard_Parallel_2",60.0],
    PARAMETER["latitude_of_center",40.0],
    UNIT["Meter",1.0],
    AUTHORITY["Esri","102008"]]

This is an arguable convenience that is no longer offered.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Daniel.Evans at jbarisk.com  Thu Mar  5 08:11:57 2020
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Thu, 5 Mar 2020 16:11:57 +0000
Subject: [gdal-dev] Importing ESRI (EPSG?) 102008 in GDAL 3.x/PROJ 6
In-Reply-To: <1663870.YQrXOHxBjO@even-i700>
References: <LO2P123MB20773919D78560CC2A9DF37495E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>
 <1663870.YQrXOHxBjO@even-i700>
Message-ID: <LO2P123MB207703C98637DE8239824E7C95E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>

Hi Even,

> epsg.io should not be taken as a reference website (even if more up-to-date than spatialreference.org). The WKT you see there has been built by some piece of software, and is in no way the original ESRI > WKT (ESRI WKT has no AUTHORITY node)

Thanks for the note. I was mostly rather confused by whether it was considered an official EPSG code (if such a thing even exists), relegated to being a custom ESRI one with "ESRI" as a prefix, or something totally different.

> srs.SetFromUserInput("ESRI:102008")

That's the magic one-liner I was hoping for. Thanks!


Dr. Daniel Evans
Software Developer


-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com>
Sent: 05 March 2020 16:01
To: gdal-dev at lists.osgeo.org
Cc: Daniel Evans <Daniel.Evans at jbarisk.com>
Subject: Re: [gdal-dev] Importing ESRI (EPSG?) 102008 in GDAL 3.x/PROJ 6

Daniel,

> While upgrading some Python software from using GDAL 2.3 to GDAL 3,
> I've come across this snippet of code:
>
> srs = osr.SpatialReference()
> srs.ImportFromEPSG(102008)
>
> This used to work, but now fails with GDAL 3 / Proj 6 with "crs not found".

yep, we're more pedantic now, and don't mix EPSG and ESRI codes together.

> Projection code 102008 corresponds to "ESRI:102008" described here,
> which the WKT output describes as "EPSG 102008":
> https://epsg.io/102008

epsg.io should not be taken as a reference website (even if more up-to-date than spatialreference.org). The WKT you see there has been built by some piece of software, and is in no way the original ESRI WKT (ESRI WKT has no AUTHORITY
node)

> Is there an easy way to create an SRS from the code 102008 (perhaps
> with some prefix/suffix) in GDAL 3 / PROJ 6? The projection and its
> code are included in the PROJ source data
> (https://github.com/OSGeo/PROJ/blob/master/data/sql/esri.sql), but I
> can't figure out what combination of "ImportFrom..." function and
> projection code format to use.

srs.SetFromUserInput("ESRI:102008")

> (There is a possibility that the GDAL 2.3 build we have has 102008
> added into the data files - the history of the custom fork of GDAL
> we're moving away from isn't well documented)

No, stock GDAL 2.4 will also output

$ gdalsrsinfo EPSG:102008

PROJ.4 : +proj=aea +lat_1=20 +lat_2=60 +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0
+datum=NAD83 +units=m +no_defs

OGC WKT :
PROJCS["North_America_Albers_Equal_Area_Conic",
    GEOGCS["GCS_North_American_1983",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS_1980",6378137.0,298.257222101]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["False_Easting",0.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["longitude_of_center",-96.0],
    PARAMETER["Standard_Parallel_1",20.0],
    PARAMETER["Standard_Parallel_2",60.0],
    PARAMETER["latitude_of_center",40.0],
    UNIT["Meter",1.0],
    AUTHORITY["Esri","102008"]]

This is an arguable convenience that is no longer offered.

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com
T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <>  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919



From even.rouault at spatialys.com  Thu Mar  5 08:40:45 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 17:40:45 +0100
Subject: [gdal-dev] Importing ESRI (EPSG?) 102008 in GDAL 3.x/PROJ 6
In-Reply-To: <LO2P123MB207703C98637DE8239824E7C95E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>
References: <LO2P123MB20773919D78560CC2A9DF37495E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>
 <1663870.YQrXOHxBjO@even-i700>
 <LO2P123MB207703C98637DE8239824E7C95E20@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <3923469.7iEyAU52R4@even-i700>

> Thanks for the note. I was mostly rather confused by whether it was
> considered an official EPSG code (if such a thing even exists), 

The most official thing would be EPSG registry itself (controlled by IOGP).

For example to get the WKT2:2015 definition of EPSG:32631:

https://www.epsg-registry.org/export.htm?wkt=urn:ogc:def:crs:EPSG::32631

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Thu Mar  5 09:24:01 2020
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 5 Mar 2020 10:24:01 -0700
Subject: [gdal-dev] Using Python gdalwarp to read gif file and world
 file, re-project to another picture
In-Reply-To: <1583382198374-0.post@n6.nabble.com>
References: <1583382198374-0.post@n6.nabble.com>
Message-ID: <CADPhZXz+nHLTEzOaH2WG10P3N2jLHthhSubhdptqkXHcubCsxQ@mail.gmail.com>

Hi Guodong,

On Wed, Mar 4, 2020 at 9:23 PM Guodong <gd.zhu at outlook.com> wrote:

> Hello,
>
> I want to re-project a radar image
> (https://radar.weather.gov/Conus/RadarImg/latest_radaronly.gif) which is
> in
> NAD83/EPSG4326 to WGS84/Pseudo-Mercator/EPSG3857. There is a world file
> associated with this gif
> (https://radar.weather.gov/Conus/RadarImg/latest_radaronly.gfw). I was
> wondering how can I do this projection using Python gdalwarp package, and
> how to extract the coordinates bounds from the new re-projected picture?
>
> I'm very new to GIS. I know world file contains georeferencing information,
> but I stucked at the first step and don't know how to read gif file along
> with the world file...
>
> Thanks a lot for your time and help!
>
> Best regards,
> Guodong
>

If you save the .gif and the .gfw file to the same directory, so that they
are siblings, GDAL will find the .gfw automatically when the .gif file is
opened. This is a common GIS paradigm. Many GIS file formats are actually
multi-file formats. One file, usually the image file, is the primary file
and it may have auxiliary or "sidecar" files that carry additional
information. A world file is one such auxiliary file.

You can convert and warp like like this:

gdalwarp -r near -s_srs EPSG:4326 -t_srs EPSG:3857 -of GTiff
latest_radaronly.gif warped.tif

The gdalinfo program will show you the bounds of the result and you can
confirm they are what you expect.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200305/2d414f4c/attachment.html>

From gd.zhu at outlook.com  Thu Mar  5 13:16:39 2020
From: gd.zhu at outlook.com (Guodong Zhu)
Date: Thu, 5 Mar 2020 21:16:39 +0000
Subject: [gdal-dev] Using Python gdalwarp to read gif file and world
 file, re-project to another picture
In-Reply-To: <CADPhZXz+nHLTEzOaH2WG10P3N2jLHthhSubhdptqkXHcubCsxQ@mail.gmail.com>
References: <1583382198374-0.post@n6.nabble.com>
 <CADPhZXz+nHLTEzOaH2WG10P3N2jLHthhSubhdptqkXHcubCsxQ@mail.gmail.com>
Message-ID: <SN6PR05MB5710A32714CD01FD15DEF21196E20@SN6PR05MB5710.namprd05.prod.outlook.com>

Hi Sean,

Thanks a lot for your answer! It works for me. I have one follow up question: is there a way to make the background transparent instead of being white?

I really appreciate your help!

Best regard,
Guodong


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Sean Gillies
Sent: Thursday, March 5, 2020 11:24 AM
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Using Python gdalwarp to read gif file and world file, re-project to another picture

Hi Guodong,

On Wed, Mar 4, 2020 at 9:23 PM Guodong <gd.zhu at outlook.com<mailto:gd.zhu at outlook.com>> wrote:
Hello,

I want to re-project a radar image
(https://radar.weather.gov/Conus/RadarImg/latest_radaronly.gif) which is in
NAD83/EPSG4326 to WGS84/Pseudo-Mercator/EPSG3857. There is a world file
associated with this gif
(https://radar.weather.gov/Conus/RadarImg/latest_radaronly.gfw). I was
wondering how can I do this projection using Python gdalwarp package, and
how to extract the coordinates bounds from the new re-projected picture?

I'm very new to GIS. I know world file contains georeferencing information,
but I stucked at the first step and don't know how to read gif file along
with the world file...

Thanks a lot for your time and help!

Best regards,
Guodong

If you save the .gif and the .gfw file to the same directory, so that they are siblings, GDAL will find the .gfw automatically when the .gif file is opened. This is a common GIS paradigm. Many GIS file formats are actually multi-file formats. One file, usually the image file, is the primary file and it may have auxiliary or "sidecar" files that carry additional information. A world file is one such auxiliary file.

You can convert and warp like like this:

gdalwarp -r near -s_srs EPSG:4326 -t_srs EPSG:3857 -of GTiff latest_radaronly.gif warped.tif

The gdalinfo program will show you the bounds of the result and you can confirm they are what you expect.

--
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200305/7bdd46d2/attachment.html>

From jdaniel at etresoft.com  Thu Mar  5 14:05:59 2020
From: jdaniel at etresoft.com (John Daniel)
Date: Thu, 5 Mar 2020 22:05:59 +0000
Subject: [gdal-dev] Resampling on the GPU using Apple Metal
Message-ID: <D94F6734-67EF-4611-8B51-A3FDD969201A@etresoft.com>

Hello everyone, 
I am investigating adding support for Apple Metal to GPU resampling in GDAL. This is what I've learned so far:

1) Currently, OpenCL is only used for resampling operations via gdalwarp. RasterIO resampling via gdal_translate does not use OpenCL. This makes gdal_translate, and RasterIO, much slower for resampling operations.
2) Not even taking OpenCL into account, there are two independent resampling paths. Resampling via RasterIO uses routines in gcore/overview.cpp. Resampling via warp uses a different set of resampling implementations in alg/gdalwarpkernel.cpp, for the same resampling algorithms.

So, if I wanted to implement a new set of resampling routines using Apple Metal, is there a reason why I should not implement it in the overview.cpp path and then have warp use that same path for resampling? Am I missing something? Is one set of resampling implementations better than the other?

Thanks!

John Daniel
Etresoft, Inc.


From even.rouault at spatialys.com  Thu Mar  5 14:12:27 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 23:12:27 +0100
Subject: [gdal-dev] Resampling on the GPU using Apple Metal
In-Reply-To: <D94F6734-67EF-4611-8B51-A3FDD969201A@etresoft.com>
References: <D94F6734-67EF-4611-8B51-A3FDD969201A@etresoft.com>
Message-ID: <1653520.Rrsa2CMqUv@even-i700>

On jeudi 5 mars 2020 22:05:59 CET John Daniel wrote:
> Hello everyone,
> I am investigating adding support for Apple Metal to GPU resampling in GDAL.
> This is what I've learned so far:
> 
> 1) Currently, OpenCL is only used for resampling operations via gdalwarp.
> RasterIO resampling via gdal_translate does not use OpenCL. This makes
> gdal_translate, and RasterIO, much slower for resampling operations. 2) Not
> even taking OpenCL into account, there are two independent resampling
> paths. Resampling via RasterIO uses routines in gcore/overview.cpp.
> Resampling via warp uses a different set of resampling implementations in
> alg/gdalwarpkernel.cpp, for the same resampling algorithms.
> 
> So, if I wanted to implement a new set of resampling routines using Apple
> Metal, is there a reason why I should not implement it in the overview.cpp
> path and then have warp use that same path for resampling? Am I missing
> something?

> Is one set of resampling implementations better than the other?

Not really. The RasterIO / overview resampling can make extra assumptions in 
comparison to the warping resampling that make its CPU implementation normally 
faster. In warping mode, pixels of a same target line do not correspond to a 
single line in the source image, whereas for overviews, they do.

The fact that warping resampling has a OpenCL acceleration path is just 
because only it was targetted during the work where it was implemented. 
There's no fundamental reason why RasterIO / overview resampling couldn't have 
one.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nyall.dawson at gmail.com  Thu Mar  5 22:03:23 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 6 Mar 2020 16:03:23 +1000
Subject: [gdal-dev] Fedora package status
In-Reply-To: <e0602acc-901f-f332-3816-d234c672edde@gmail.com>
References: <CAB28AsghV6wMBR4qOi0b8rTY05Am346GBrPJtZ_i1+QEDvPK+Q@mail.gmail.com>
 <5c39bfd7-62b7-1beb-dd03-1b04a7155cad@gmail.com>
 <CAB28AsigRrFywqQSvpuWFaTNNNpXoVp1fke0WHVqk2mYe-=4GQ@mail.gmail.com>
 <e0602acc-901f-f332-3816-d234c672edde@gmail.com>
Message-ID: <CAB28AsizftfjXAdh=LmrDhqgCkgY6O+AgJkngs5dZonPk1j=3g@mail.gmail.com>

On Mon, 24 Feb 2020 at 20:32, Sandro Mani <manisandro at gmail.com> wrote:
>
> > Let me know if I can do anything to help (even if you just want me to
> > pester on the bug reports to try to raise the severity of the issues
> > around these older package versions!)
>
> I've moved ahead and filed [1] to formally resolve the situation. Feel
> free to add comments there.

I see you're now the maintainer, and everything is looking MUCH
healthier!! Thank you!

One question: do you have plans to also update the Fedora 32 GDAL
package? That one is still stuck on 2.3

Nyall



>
> Sandro
>
> [1] https://pagure.io/fesco/issue/2345
>
> >> Sandro
> >>
> >> [1] https://copr.fedorainfracloud.org/coprs/smani/gisstack/
> >>
> >> On 23.02.20 01:45, Nyall Dawson wrote:
> >>
> >> Hi list,
> >>
> >> Does anyone with any knowledge of the fedora packaging infrastructure
> >> have any advice for getting the gdal library updated in the fedora
> >> repos?
> >>
> >> Even on the most recent Fedora releases, this is stuck at absolutely
> >> ancient versions (2.3!).
> >>
> >> Worse is that the proj library has been updated, resulting in the
> >> not-recommended combination of proj 6/gdal 2 (specifically proj 6.2 --
> >> a version with known critical bugs).
> >>
> >> Nyall
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From manisandro at gmail.com  Fri Mar  6 07:46:40 2020
From: manisandro at gmail.com (Sandro Mani)
Date: Fri, 6 Mar 2020 16:46:40 +0100
Subject: [gdal-dev] Fedora package status
In-Reply-To: <CAB28AsizftfjXAdh=LmrDhqgCkgY6O+AgJkngs5dZonPk1j=3g@mail.gmail.com>
References: <CAB28AsghV6wMBR4qOi0b8rTY05Am346GBrPJtZ_i1+QEDvPK+Q@mail.gmail.com>
 <5c39bfd7-62b7-1beb-dd03-1b04a7155cad@gmail.com>
 <CAB28AsigRrFywqQSvpuWFaTNNNpXoVp1fke0WHVqk2mYe-=4GQ@mail.gmail.com>
 <e0602acc-901f-f332-3816-d234c672edde@gmail.com>
 <CAB28AsizftfjXAdh=LmrDhqgCkgY6O+AgJkngs5dZonPk1j=3g@mail.gmail.com>
Message-ID: <ad199212-4a4a-de80-0851-99f2eb4520c3@gmail.com>


On 06.03.20 07:03, Nyall Dawson wrote:
> I see you're now the maintainer, and everything is looking MUCH
> healthier!! Thank you!
>
> One question: do you have plans to also update the Fedora 32 GDAL
> package? That one is still stuck on 2.3

I'm finishing the rawhide rebuilds, once I've resolved all the issues 
I'll proceed with F32, yes.

Sandro


From bret.johnson at utcg.com  Fri Mar  6 10:35:12 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Fri, 6 Mar 2020 18:35:12 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
Message-ID: <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>

I have some GeoTIFF (.TIF) files that a program I'm using won't accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.  When I do, GDAL_TRANSLATE says it worked and it generates a few files (including a .BIL), but it doesn't create the .BLW file where all of the "real" data should be.  Is there some special GDAL_TRANSLATE option or use or some special format GeoTIFF data needs to be in for it to work properly and generate a .BLW file?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200306/55710982/attachment.html>

From sean at mapbox.com  Fri Mar  6 11:22:24 2020
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 6 Mar 2020 12:22:24 -0700
Subject: [gdal-dev] Using Python gdalwarp to read gif file and world
 file, re-project to another picture
In-Reply-To: <SN6PR05MB5710A32714CD01FD15DEF21196E20@SN6PR05MB5710.namprd05.prod.outlook.com>
References: <1583382198374-0.post@n6.nabble.com>
 <CADPhZXz+nHLTEzOaH2WG10P3N2jLHthhSubhdptqkXHcubCsxQ@mail.gmail.com>
 <SN6PR05MB5710A32714CD01FD15DEF21196E20@SN6PR05MB5710.namprd05.prod.outlook.com>
Message-ID: <CADPhZXwVBtCPKdvCdztUz1o3kOEMNLefNk_GeXMv9ocp6_G_eA@mail.gmail.com>

Hi Guodong,

On Thu, Mar 5, 2020 at 2:16 PM Guodong Zhu <gd.zhu at outlook.com> wrote:

> Hi Sean,
>
>
>
> Thanks a lot for your answer! It works for me. I have one follow up
> question: is there a way to make the background transparent instead of
> being white?
>
>
>
> I really appreciate your help!
>

The background is transparent, I think it may appear white due to details
of your image viewer. If you convert the warped GeoTIFF to a PNG like

gdal_translate -of PNG warped.tif warped.png

you'll have a file that looks properly transparent in a browser or image
viewer.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200306/9d88f8d7/attachment.html>

From even.rouault at spatialys.com  Fri Mar  6 12:14:35 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 06 Mar 2020 21:14:35 +0100
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
 <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
Message-ID: <1643357.eAXm7dl4oZ@even-i700>

Bret,

> I have some GeoTIFF (.TIF) files that a program I'm using won't accept.  It
> will accept .BIL files and I'm using GDAL to try and do the conversion. 
> When I do, GDAL_TRANSLATE says it worked and it generates a few files
> (including a .BIL), but it doesn't create the .BLW file where all of the
> "real" data should be.  Is there some special GDAL_TRANSLATE option or use
> or some special format GeoTIFF data needs to be in for it to work properly
> and generate a .BLW file?

I don't know which output driver you use (EHdr, ENVI etc.), but they aren't 
likely to produce a .blw worldfile as they will generate a text header file 
specific to the format.

To generate a .blw file you can do:

gdal_translate your_input.tif tmp.tif -co TFW=YES

This will generate a tmp.tfw file. Just rename it to .blw and with the 
basename of your BIL output file.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bret.johnson at utcg.com  Fri Mar  6 16:19:23 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Sat, 7 Mar 2020 00:19:23 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <1643357.eAXm7dl4oZ@even-i700>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
 <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
 <1643357.eAXm7dl4oZ@even-i700>
Message-ID: <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>

Even:

Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Friday, March 6, 2020 1:15 PM
To: gdal-dev at lists.osgeo.org
Cc: Bret Johnson <bret.johnson at utcg.com>
Subject: Re: [gdal-dev] Convert TIF to BIL

Bret,

> I have some GeoTIFF (.TIF) files that a program I'm using won't 
> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
> When I do, GDAL_TRANSLATE says it worked and it generates a few files 
> (including a .BIL), but it doesn't create the .BLW file where all of 
> the "real" data should be.  Is there some special GDAL_TRANSLATE 
> option or use or some special format GeoTIFF data needs to be in for 
> it to work properly and generate a .BLW file?

I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.

To generate a .blw file you can do:

gdal_translate your_input.tif tmp.tif -co TFW=YES

This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From neteler at osgeo.org  Fri Mar  6 20:42:11 2020
From: neteler at osgeo.org (Markus Neteler)
Date: Fri, 6 Mar 2020 23:42:11 -0500
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
 <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
 <1643357.eAXm7dl4oZ@even-i700>
 <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>
Message-ID: <CALFmHhtG6DSwG4g5_dpVVyEBnaAuC5CdH9whamU2cJC=b_Ow5Q@mail.gmail.com>

Bret,

What does gdalinfo report on the file?

Markus


Bret Johnson <bret.johnson at utcg.com> schrieb am Fr., 6. März 2020, 19:19:

> Even:
>
> Thanks.  That worked to create a World file, so I made it past the error
> message.  It's still not importing correctly and the error message is so
> generic that it's useless (basically just says it doesn't like the data).
> I'll do some more playing.
>
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Bret Johnson <bret.johnson at utcg.com>
> Subject: Re: [gdal-dev] Convert TIF to BIL
>
> Bret,
>
> > I have some GeoTIFF (.TIF) files that a program I'm using won't
> > accept.  It will accept .BIL files and I'm using GDAL to try and do the
> conversion.
> > When I do, GDAL_TRANSLATE says it worked and it generates a few files
> > (including a .BIL), but it doesn't create the .BLW file where all of
> > the "real" data should be.  Is there some special GDAL_TRANSLATE
> > option or use or some special format GeoTIFF data needs to be in for
> > it to work properly and generate a .BLW file?
>
> I don't know which output driver you use (EHdr, ENVI etc.), but they
> aren't likely to produce a .blw worldfile as they will generate a text
> header file specific to the format.
>
> To generate a .blw file you can do:
>
> gdal_translate your_input.tif tmp.tif -co TFW=YES
>
> This will generate a tmp.tfw file. Just rename it to .blw and with the
> basename of your BIL output file.
>
> Even
>
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200306/fb0b01a4/attachment.html>

From gd.zhu at outlook.com  Sat Mar  7 15:27:12 2020
From: gd.zhu at outlook.com (Guodong Zhu)
Date: Sat, 7 Mar 2020 23:27:12 +0000
Subject: [gdal-dev] Using Python gdalwarp to read gif file and world
 file, re-project to another picture
In-Reply-To: <CADPhZXwVBtCPKdvCdztUz1o3kOEMNLefNk_GeXMv9ocp6_G_eA@mail.gmail.com>
References: <1583382198374-0.post@n6.nabble.com>
 <CADPhZXz+nHLTEzOaH2WG10P3N2jLHthhSubhdptqkXHcubCsxQ@mail.gmail.com>
 <SN6PR05MB5710A32714CD01FD15DEF21196E20@SN6PR05MB5710.namprd05.prod.outlook.com>
 <CADPhZXwVBtCPKdvCdztUz1o3kOEMNLefNk_GeXMv9ocp6_G_eA@mail.gmail.com>
Message-ID: <SN6PR05MB57104E21163390FE463D3E7696E00@SN6PR05MB5710.namprd05.prod.outlook.com>

Hi Sean,

The background is actually not transparent : ) Just for your reference, I followed the following post and removed the background:
https://stackoverflow.com/questions/765736/using-pil-to-make-all-white-pixels-transparent

Thanks for your help on my question!

Best regards,
Guodong
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Sean Gillies
Sent: Friday, March 6, 2020 1:22 PM
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Using Python gdalwarp to read gif file and world file, re-project to another picture

Hi Guodong,

On Thu, Mar 5, 2020 at 2:16 PM Guodong Zhu <gd.zhu at outlook.com<mailto:gd.zhu at outlook.com>> wrote:
Hi Sean,

Thanks a lot for your answer! It works for me. I have one follow up question: is there a way to make the background transparent instead of being white?

I really appreciate your help!

The background is transparent, I think it may appear white due to details of your image viewer. If you convert the warped GeoTIFF to a PNG like

gdal_translate -of PNG warped.tif warped.png

you'll have a file that looks properly transparent in a browser or image viewer.

--
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200307/a871d6b4/attachment.html>

From bret.johnson at utcg.com  Mon Mar  9 07:42:40 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Mon, 9 Mar 2020 14:42:40 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <CALFmHhtG6DSwG4g5_dpVVyEBnaAuC5CdH9whamU2cJC=b_Ow5Q@mail.gmail.com>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
 <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
 <1643357.eAXm7dl4oZ@even-i700>
 <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>
 <CALFmHhtG6DSwG4g5_dpVVyEBnaAuC5CdH9whamU2cJC=b_Ow5Q@mail.gmail.com>
Message-ID: <04b1f7814b0b4408a75db199b64d2437@WINHEXBEUS103.winus.mail>

GDALINFO Output:

*****************

Driver: EHdr/ESRI .hdr Labelled
Files: d:\470-600N_0900-0905W.bil
       d:\X470-600N_0900-0905W.bil.aux.xml
       d:\X470-600N_0900-0905W.hdr
       d:\X470-600N_0900-0905W.prj
Size is 2784, 89882
Origin = (-10074427.220539299771190,7863030.092672790400684)
Pixel Size = (20.000000000000000,-20.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-10074427.221, 7863030.093)
Lower Left  (-10074427.221, 6065390.093)
Upper Right (-10018747.221, 7863030.093)
Lower Right (-10018747.221, 6065390.093)
Center      (-10046587.221, 6964210.093)
Band 1 Block=2784x1 Type=Int16, ColorInterp=Undefined
  Min=0.000 Max=666.000
  Minimum=0.000, Maximum=666.000, Mean=281.661, StdDev=147.479
  NoData Value=-32767
  Metadata:
    STATISTICS_APPROXIMATE=YES
    STATISTICS_MAXIMUM=666
    STATISTICS_MEAN=281.66132304577
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=147.47884400779
    STATISTICS_VALID_PERCENT=93.76

*****************

As far as I can tell, nothing unusual there.  BTW, I’ve tried with both EHDR and ENVI and it makes no difference.

From: Markus Neteler <neteler at osgeo.org>
Sent: Friday, March 6, 2020 9:42 PM
To: Bret Johnson <bret.johnson at utcg.com>
Cc: Even Rouault <even.rouault at spatialys.com>; gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

Bret,

What does gdalinfo report on the file?

Markus


Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>> schrieb am Fr., 6. März 2020, 19:19:
Even:

Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Friday, March 6, 2020 1:15 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Cc: Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>
Subject: Re: [gdal-dev] Convert TIF to BIL

Bret,

> I have some GeoTIFF (.TIF) files that a program I'm using won't
> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
> When I do, GDAL_TRANSLATE says it worked and it generates a few files
> (including a .BIL), but it doesn't create the .BLW file where all of
> the "real" data should be.  Is there some special GDAL_TRANSLATE
> option or use or some special format GeoTIFF data needs to be in for
> it to work properly and generate a .BLW file?

I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.

To generate a .blw file you can do:

gdal_translate your_input.tif tmp.tif -co TFW=YES

This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200309/c0bc1243/attachment.html>

From jmckenna at gatewaygeomatics.com  Mon Mar  9 07:50:02 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 9 Mar 2020 11:50:02 -0300
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
 <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
 <1643357.eAXm7dl4oZ@even-i700>
 <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>
Message-ID: <805b20da-b870-1f6d-98ad-82c246a26a10@gatewaygeomatics.com>

Hi Bret, what is the exact error message?

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/




On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> Even:
> 
> Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.
> 
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Bret Johnson <bret.johnson at utcg.com>
> Subject: Re: [gdal-dev] Convert TIF to BIL
> 
> Bret,
> 
>> I have some GeoTIFF (.TIF) files that a program I'm using won't
>> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
>> When I do, GDAL_TRANSLATE says it worked and it generates a few files
>> (including a .BIL), but it doesn't create the .BLW file where all of
>> the "real" data should be.  Is there some special GDAL_TRANSLATE
>> option or use or some special format GeoTIFF data needs to be in for
>> it to work properly and generate a .BLW file?
> 
> I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.
> 
> To generate a .blw file you can do:
> 
> gdal_translate your_input.tif tmp.tif -co TFW=YES
> 
> This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From bret.johnson at utcg.com  Mon Mar  9 08:07:56 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Mon, 9 Mar 2020 15:07:56 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <805b20da-b870-1f6d-98ad-82c246a26a10@gatewaygeomatics.com>
References: <64a09d7f4b4948d9a7068074f641a479@WINHEXBEUS103.winus.mail>
 <c134e8e8c97e49f2a8d8c49cf7c73114@WINHEXBEUS103.winus.mail>
 <1643357.eAXm7dl4oZ@even-i700>
 <b90b4e84bdf34c1d8b34c831cc52c63c@WINHEXBEUS103.winus.mail>
 <805b20da-b870-1f6d-98ad-82c246a26a10@gatewaygeomatics.com>
Message-ID: <f46a302a826146ac8f13fac2f0f91a87@WINHEXBEUS103.winus.mail>

The program is made by SoftWright and is called TAP, which is used for radio propagation analysis.  The relevant parts of the error message are:

Note that 1 file(s) were found that were not indexed because of errors.  There could be errors in the data file(s), or these could be files that are NOT topo data files that the program tested to try to index and failed.

Like, I said, pretty generic and not very helpful.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jeff McKenna
Sent: Monday, March 9, 2020 8:50 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convert TIF to BIL

Hi Bret, what is the exact error message?

-jeff


--
Jeff McKenna
MapServer Consulting and Training Services https://gatewaygeomatics.com/




On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> Even:
> 
> Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.
> 
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Bret Johnson <bret.johnson at utcg.com>
> Subject: Re: [gdal-dev] Convert TIF to BIL
> 
> Bret,
> 
>> I have some GeoTIFF (.TIF) files that a program I'm using won't
>> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
>> When I do, GDAL_TRANSLATE says it worked and it generates a few files
>> (including a .BIL), but it doesn't create the .BLW file where all of
>> the "real" data should be.  Is there some special GDAL_TRANSLATE
>> option or use or some special format GeoTIFF data needs to be in for
>> it to work properly and generate a .BLW file?
> 
> I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.
> 
> To generate a .blw file you can do:
> 
> gdal_translate your_input.tif tmp.tif -co TFW=YES
> 
> This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From nhv at meganet.net  Mon Mar  9 08:56:21 2020
From: nhv at meganet.net (nhv)
Date: Mon, 09 Mar 2020 11:56:21 -0400
Subject: [gdal-dev] =?utf-8?q?Convert_TIF_to_BIL?=
Message-ID: <202003091156162.SM125804@WIN-TNUD1V9I7I3>

This might help
https://www.softwright.com/faq/support/toposcript_bil_file_format.html

---- Original Message ----
From: "Bret Johnson" <bret.johnson at utcg.com>
Sent: 3/9/2020 11:08:20 AM
To: "Jeff McKenna" <jmckenna at gatewaygeomatics.com>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

The program is made by SoftWright and is called TAP, which is used for radio propagation analysis.  The relevant parts of the error message are:

Note that 1 file(s) were found that were not indexed because of errors.  There could be errors in the data file(s), or these could be files that are NOT topo data files that the program tested to try to index and failed.

Like, I said, pretty generic and not very helpful.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jeff McKenna
Sent: Monday, March 9, 2020 8:50 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convert TIF to BIL

Hi Bret, what is the exact error message?

-jeff


--
Jeff McKenna
MapServer Consulting and Training Services https://gatewaygeomatics.com/




On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> Even:
> 
> Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.
> 
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Bret Johnson <bret.johnson at utcg.com>
> Subject: Re: [gdal-dev] Convert TIF to BIL
> 
> Bret,
> 
>> I have some GeoTIFF (.TIF) files that a program I'm using won't
>> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
>> When I do, GDAL_TRANSLATE says it worked and it generates a few files
>> (including a .BIL), but it doesn't create the .BLW file where all of
>> the "real" data should be.  Is there some special GDAL_TRANSLATE
>> option or use or some special format GeoTIFF data needs to be in for
>> it to work properly and generate a .BLW file?
> 
> I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.
> 
> To generate a .blw file you can do:
> 
> gdal_translate your_input.tif tmp.tif -co TFW=YES
> 
> This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From Nathan.Raley at cropriskservices.com  Mon Mar  9 10:50:10 2020
From: Nathan.Raley at cropriskservices.com (Nathan Raley)
Date: Mon, 9 Mar 2020 17:50:10 +0000
Subject: [gdal-dev] .NET Core gdal_calc Raster Assistance
Message-ID: <567b3dc7259c42c189d1d6543bf24806@USPAEXPRD03.global.local>

I have added the Gdal.Core and Gdal.Core.WindowsRuntime to my .NET Core application.  I have two satellite rasters that I need to perform band calculations against.  Based on my research, it appears that the gdal_calc is the function I am looking for.

Does anyone know how to call the gdal_calc function within the C# application?  I am having difficulty finding examples utilizing the libraries within .NET Core environment.  I have been able to successfully create a referenced GeoTiff, but I don't see the calc function in the wrapper and have no clue how to actually wrap the call for that.  Any assistance would be greatly appreciated.

Thanks,

Nathan Raley
nathan.raley at cropriskservices.com<mailto:nathan.raley at cropriskservices.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200309/c7643a9d/attachment.html>

From bret.johnson at utcg.com  Mon Mar  9 16:22:29 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Mon, 9 Mar 2020 23:22:29 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <202003091156162.SM125804@WIN-TNUD1V9I7I3>
References: <202003091156162.SM125804@WIN-TNUD1V9I7I3>
Message-ID: <994be30d0eb7475e82b9933ecb6687e6@WINHEXBEUS103.winus.mail>

Based on that, it looks like my program requires coordinates in decimal degrees and my files are not in that format.  How do I force the output into the correct (decimal degrees) format?

-----Original Message-----
From: nhv <nhv at meganet.net> 
Sent: Monday, March 9, 2020 9:56 AM
To: Bret Johnson <bret.johnson at utcg.com>; Jeff McKenna <jmckenna at gatewaygeomatics.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convert TIF to BIL

This might help
https://www.softwright.com/faq/support/toposcript_bil_file_format.html

---- Original Message ----
From: "Bret Johnson" <bret.johnson at utcg.com>
Sent: 3/9/2020 11:08:20 AM
To: "Jeff McKenna" <jmckenna at gatewaygeomatics.com>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

The program is made by SoftWright and is called TAP, which is used for radio propagation analysis.  The relevant parts of the error message are:

Note that 1 file(s) were found that were not indexed because of errors.  There could be errors in the data file(s), or these could be files that are NOT topo data files that the program tested to try to index and failed.

Like, I said, pretty generic and not very helpful.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jeff McKenna
Sent: Monday, March 9, 2020 8:50 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convert TIF to BIL

Hi Bret, what is the exact error message?

-jeff


--
Jeff McKenna
MapServer Consulting and Training Services https://gatewaygeomatics.com/




On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> Even:
> 
> Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.
> 
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Bret Johnson <bret.johnson at utcg.com>
> Subject: Re: [gdal-dev] Convert TIF to BIL
> 
> Bret,
> 
>> I have some GeoTIFF (.TIF) files that a program I'm using won't 
>> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
>> When I do, GDAL_TRANSLATE says it worked and it generates a few files 
>> (including a .BIL), but it doesn't create the .BLW file where all of 
>> the "real" data should be.  Is there some special GDAL_TRANSLATE 
>> option or use or some special format GeoTIFF data needs to be in for 
>> it to work properly and generate a .BLW file?
> 
> I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.
> 
> To generate a .blw file you can do:
> 
> gdal_translate your_input.tif tmp.tif -co TFW=YES
> 
> This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From rupestre.campos at gmail.com  Tue Mar 10 04:48:15 2020
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Tue, 10 Mar 2020 08:48:15 -0300
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <CAAvXUUoxSeQWZ7fr3r4V3fRMhAGV13ANjfqh61sHv0p543eWiw@mail.gmail.com>
References: <202003091156162.SM125804@WIN-TNUD1V9I7I3>
 <994be30d0eb7475e82b9933ecb6687e6@WINHEXBEUS103.winus.mail>
 <CAAvXUUoxSeQWZ7fr3r4V3fRMhAGV13ANjfqh61sHv0p543eWiw@mail.gmail.com>
Message-ID: <CAAvXUUqau8qkETinaVqGz2cZAL+3bR53LAJZ2W9kvBzUCpVmGA@mail.gmail.com>

On Tue, Mar 10, 2020 at 8:47 AM Cainã K. Campos <rupestre.campos at gmail.com>
wrote:

> Bret,
>
> based on the link sent
> https://www.softwright.com/faq/support/toposcript_bil_file_format.html
> looks like the .blw file is not just the .tfw file renamed, as  it should
> have other kind of parameters such pixel size, raster rotation. Check if
> your .blw matches the example in the link, if not you can easily create one
> with a .txt file renamed to .blw.
> I believe that the .tfw should be renamed to .prj as described in doc, and
> check if formats match also in the .prj generated with documented
>
> In order to reproject raster to decimal degrees you should use gdalwarp
> with the -t_srs flag, and choose a degree projection like EPSG:4326, you
> may do it before translating to .BIL , like:
>
> gdalwarp -t_srs EPSG:4326 input.tif output.tif
>
> Caina
>
> On Mon, Mar 9, 2020 at 8:23 PM Bret Johnson <bret.johnson at utcg.com> wrote:
>
>> Based on that, it looks like my program requires coordinates in decimal
>> degrees and my files are not in that format.  How do I force the output
>> into the correct (decimal degrees) format?
>>
>> -----Original Message-----
>> From: nhv <nhv at meganet.net>
>> Sent: Monday, March 9, 2020 9:56 AM
>> To: Bret Johnson <bret.johnson at utcg.com>; Jeff McKenna <
>> jmckenna at gatewaygeomatics.com>; gdal-dev at lists.osgeo.org
>> Subject: Re: [gdal-dev] Convert TIF to BIL
>>
>> This might help
>> https://www.softwright.com/faq/support/toposcript_bil_file_format.html
>>
>> ---- Original Message ----
>> From: "Bret Johnson" <bret.johnson at utcg.com>
>> Sent: 3/9/2020 11:08:20 AM
>> To: "Jeff McKenna" <jmckenna at gatewaygeomatics.com>, "
>> gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
>> Subject: Re: [gdal-dev] Convert TIF to BIL
>>
>> The program is made by SoftWright and is called TAP, which is used for
>> radio propagation analysis.  The relevant parts of the error message are:
>>
>> Note that 1 file(s) were found that were not indexed because of errors.
>> There could be errors in the data file(s), or these could be files that are
>> NOT topo data files that the program tested to try to index and failed.
>>
>> Like, I said, pretty generic and not very helpful.
>>
>> -----Original Message-----
>> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jeff
>> McKenna
>> Sent: Monday, March 9, 2020 8:50 AM
>> To: gdal-dev at lists.osgeo.org
>> Subject: Re: [gdal-dev] Convert TIF to BIL
>>
>> Hi Bret, what is the exact error message?
>>
>> -jeff
>>
>>
>> --
>> Jeff McKenna
>> MapServer Consulting and Training Services https://gatewaygeomatics.com/
>>
>>
>>
>>
>> On 2020-03-06 8:19 p.m., Bret Johnson wrote:
>> > Even:
>> >
>> > Thanks.  That worked to create a World file, so I made it past the
>> error message.  It's still not importing correctly and the error message is
>> so generic that it's useless (basically just says it doesn't like the
>> data).  I'll do some more playing.
>> >
>> > -----Original Message-----
>> > From: Even Rouault <even.rouault at spatialys.com>
>> > Sent: Friday, March 6, 2020 1:15 PM
>> > To: gdal-dev at lists.osgeo.org
>> > Cc: Bret Johnson <bret.johnson at utcg.com>
>> > Subject: Re: [gdal-dev] Convert TIF to BIL
>> >
>> > Bret,
>> >
>> >> I have some GeoTIFF (.TIF) files that a program I'm using won't
>> >> accept.  It will accept .BIL files and I'm using GDAL to try and do
>> the conversion.
>> >> When I do, GDAL_TRANSLATE says it worked and it generates a few files
>> >> (including a .BIL), but it doesn't create the .BLW file where all of
>> >> the "real" data should be.  Is there some special GDAL_TRANSLATE
>> >> option or use or some special format GeoTIFF data needs to be in for
>> >> it to work properly and generate a .BLW file?
>> >
>> > I don't know which output driver you use (EHdr, ENVI etc.), but they
>> aren't likely to produce a .blw worldfile as they will generate a text
>> header file specific to the format.
>> >
>> > To generate a .blw file you can do:
>> >
>> > gdal_translate your_input.tif tmp.tif -co TFW=YES
>> >
>> > This will generate a tmp.tfw file. Just rename it to .blw and with the
>> basename of your BIL output file.
>> >
>> > Even
>> >
>> > --
>> > Spatialys - Geospatial professional services http://www.spatialys.com
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200310/624c628b/attachment.html>

From scott.stanie at gmail.com  Wed Mar 11 07:49:49 2020
From: scott.stanie at gmail.com (Scott Staniewicz)
Date: Wed, 11 Mar 2020 09:49:49 -0500
Subject: [gdal-dev] Combining raw .vrt with derived bands
Message-ID: <CAN4_TO-pfpPp9R9sD89i5pg+WAiPdScqe5Ng4fpi4ZpOzn1v3A@mail.gmail.com>

Is it possible to have a VRTRawRasterBand and a VRTDerivedRasterBand, which
is derived from that Raw file, together as two bands in a single VRT file?


I've got a CFloat32 raster file with only one complex band in binary format
(called "20160327_20160420.int" in the example below), and I've figured out
how to make a VRT for it so I can load it with GDAL.

"20160327_20160420.int.vrt":

<VRTDataset rasterXSize="720" rasterYSize="720">
  <VRTRasterBand dataType="CFloat32" band="1" subClass="VRTRawRasterBand">
    <SourceFilename relativeToVRT="1">20160327_20160420.int</SourceFilename>
    <ImageOffset>8</ImageOffset>
    <PixelOffset>8</PixelOffset>
    <LineOffset>5760</LineOffset>
    <ByteOrder>LSB</ByteOrder>
  </VRTRasterBand>
  <SRS>WGS84</SRS>
  <GeoTransform> ...</GeoTransform>
</VRTDataset>

This works great. I've also figured out how to make a derived raster band
from this that shows the amplitude of the data, and also the phase (below):

"20160327_20160420.int.phase.vrt":

<VRTDataset rasterXSize="720" rasterYSize="720">
  <SRS>...</SRS>
  <GeoTransform>  ...</GeoTransform>
  <VRTRasterBand dataType="Float32" band="1"
subClass="VRTDerivedRasterBand">
    <Description>phase of 20160327_20160420.int.vrt </Description>
    <SimpleSource>
      <SourceFilename
relativeToVRT="1">20160327_20160420.int.vrt</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="720" RasterYSize="720"
DataType="CFloat32" BlockXSize="720" BlockYSize="1" />
    </SimpleSource>
    <PixelFunctionType>phase</PixelFunctionType>
    <SourceTransferType>CFloat32</SourceTransferType>
  </VRTRasterBand>
</VRTDataset>

But I can't figure out how I would get both of these as two bands in one
VRT without causing an infinite recursion. Is that possible? Or do I need
to keep them separate?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200311/44cf556f/attachment.html>

From even.rouault at spatialys.com  Wed Mar 11 07:54:32 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Mar 2020 15:54:32 +0100
Subject: [gdal-dev] Combining raw .vrt with derived bands
In-Reply-To: <CAN4_TO-pfpPp9R9sD89i5pg+WAiPdScqe5Ng4fpi4ZpOzn1v3A@mail.gmail.com>
References: <CAN4_TO-pfpPp9R9sD89i5pg+WAiPdScqe5Ng4fpi4ZpOzn1v3A@mail.gmail.com>
Message-ID: <3417757.AuiSzADPjC@even-i700>

On mercredi 11 mars 2020 09:49:49 CET Scott Staniewicz wrote:
> Is it possible to have a VRTRawRasterBand and a VRTDerivedRasterBand, which
> is derived from that Raw file, together as two bands in a single VRT file?
> 
> 
> I've got a CFloat32 raster file with only one complex band in binary format
> (called "20160327_20160420.int" in the example below), and I've figured out
> how to make a VRT for it so I can load it with GDAL.
> 
> "20160327_20160420.int.vrt":
> 
> <VRTDataset rasterXSize="720" rasterYSize="720">
>   <VRTRasterBand dataType="CFloat32" band="1" subClass="VRTRawRasterBand">
>     <SourceFilename relativeToVRT="1">20160327_20160420.int</SourceFilename>
> <ImageOffset>8</ImageOffset>
>     <PixelOffset>8</PixelOffset>
>     <LineOffset>5760</LineOffset>
>     <ByteOrder>LSB</ByteOrder>
>   </VRTRasterBand>
>   <SRS>WGS84</SRS>
>   <GeoTransform> ...</GeoTransform>
> </VRTDataset>
> 
> This works great. I've also figured out how to make a derived raster band
> from this that shows the amplitude of the data, and also the phase (below):
> 
> "20160327_20160420.int.phase.vrt":
> 
> <VRTDataset rasterXSize="720" rasterYSize="720">
>   <SRS>...</SRS>
>   <GeoTransform>  ...</GeoTransform>
>   <VRTRasterBand dataType="Float32" band="1"
> subClass="VRTDerivedRasterBand">
>     <Description>phase of 20160327_20160420.int.vrt </Description>
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="1">20160327_20160420.int.vrt</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="720" RasterYSize="720"
> DataType="CFloat32" BlockXSize="720" BlockYSize="1" />
>     </SimpleSource>
>     <PixelFunctionType>phase</PixelFunctionType>
>     <SourceTransferType>CFloat32</SourceTransferType>
>   </VRTRasterBand>
> </VRTDataset>
> 
> But I can't figure out how I would get both of these as two bands in one
> VRT without causing an infinite recursion. Is that possible? Or do I need
> to keep them separate?

In the top level VRT, instead of having

<SourceFilename relativeToVRT="1">20160327_20160420.int.vrt</SourceFilename>

you can put the content of .int.vrt inline in a CDATA section

<SourceFilename relativeToVRT="1"><![CDATA[put here content of 
20160327_20160420.int.vrt]]></SourceFilename>

See example from autotest suite:
https://github.com/OSGeo/gdal/blob/master/autotest/gcore/data/vrtinvrt.vrt

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aborruso at gmail.com  Wed Mar 11 09:03:05 2020
From: aborruso at gmail.com (aborruso)
Date: Wed, 11 Mar 2020 09:03:05 -0700 (MST)
Subject: [gdal-dev] /vsicurl/ and 3XX response code
Message-ID: <1583942585955-0.post@n6.nabble.com>

Hi all,
using /vsicurl/ is it possible to native intercept HTTP 3XX response code
and get the final URL of the source?

Thank you



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Mar 11 09:13:41 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Mar 2020 17:13:41 +0100
Subject: [gdal-dev] /vsicurl/ and 3XX response code
In-Reply-To: <1583942585955-0.post@n6.nabble.com>
References: <1583942585955-0.post@n6.nabble.com>
Message-ID: <2309691.mrky0DmU5W@even-i700>

On mercredi 11 mars 2020 09:03:05 CET aborruso wrote:
> Hi all,
> using /vsicurl/ is it possible to native intercept HTTP 3XX response code
> and get the final URL of the source?

No, this is an implementation detail. You'd have to use the curl or other HTTP 
API for that.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bret.johnson at utcg.com  Wed Mar 11 09:39:53 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Wed, 11 Mar 2020 16:39:53 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <CAAvXUUqau8qkETinaVqGz2cZAL+3bR53LAJZ2W9kvBzUCpVmGA@mail.gmail.com>
References: <202003091156162.SM125804@WIN-TNUD1V9I7I3>
 <994be30d0eb7475e82b9933ecb6687e6@WINHEXBEUS103.winus.mail>
 <CAAvXUUoxSeQWZ7fr3r4V3fRMhAGV13ANjfqh61sHv0p543eWiw@mail.gmail.com>
 <CAAvXUUqau8qkETinaVqGz2cZAL+3bR53LAJZ2W9kvBzUCpVmGA@mail.gmail.com>
Message-ID: <9689d16737de42068d6fbbb12f863de7@WINHEXBEUS103.winus.mail>

Tried your recommendation of GDALWARP, and received this error message:

ERROR 1: Too many points (529 out of 529) failed to transform, unable to compute output bounds.
Warning 1: Unable to compute source region for output window 0,0,2784,89882, skipping.

From: Cainã K. Campos <rupestre.campos at gmail.com>
Sent: Tuesday, March 10, 2020 5:48 AM
To: Bret Johnson <bret.johnson at utcg.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convert TIF to BIL



On Tue, Mar 10, 2020 at 8:47 AM Cainã K. Campos <rupestre.campos at gmail.com<mailto:rupestre.campos at gmail.com>> wrote:
Bret,

based on the link sent https://www.softwright.com/faq/support/toposcript_bil_file_format.html
looks like the .blw file is not just the .tfw file renamed, as  it should have other kind of parameters such pixel size, raster rotation. Check if your .blw matches the example in the link, if not you can easily create one with a .txt file renamed to .blw.
I believe that the .tfw should be renamed to .prj as described in doc, and check if formats match also in the .prj generated with documented

In order to reproject raster to decimal degrees you should use gdalwarp with the -t_srs flag, and choose a degree projection like EPSG:4326, you may do it before translating to .BIL , like:

gdalwarp -t_srs EPSG:4326 input.tif output.tif

Caina

On Mon, Mar 9, 2020 at 8:23 PM Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>> wrote:
Based on that, it looks like my program requires coordinates in decimal degrees and my files are not in that format.  How do I force the output into the correct (decimal degrees) format?

-----Original Message-----
From: nhv <nhv at meganet.net<mailto:nhv at meganet.net>>
Sent: Monday, March 9, 2020 9:56 AM
To: Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>; Jeff McKenna <jmckenna at gatewaygeomatics.com<mailto:jmckenna at gatewaygeomatics.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

This might help
https://www.softwright.com/faq/support/toposcript_bil_file_format.html

---- Original Message ----
From: "Bret Johnson" <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>
Sent: 3/9/2020 11:08:20 AM
To: "Jeff McKenna" <jmckenna at gatewaygeomatics.com<mailto:jmckenna at gatewaygeomatics.com>>, "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Convert TIF to BIL

The program is made by SoftWright and is called TAP, which is used for radio propagation analysis.  The relevant parts of the error message are:

Note that 1 file(s) were found that were not indexed because of errors.  There could be errors in the data file(s), or these could be files that are NOT topo data files that the program tested to try to index and failed.

Like, I said, pretty generic and not very helpful.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Jeff McKenna
Sent: Monday, March 9, 2020 8:50 AM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

Hi Bret, what is the exact error message?

-jeff


--
Jeff McKenna
MapServer Consulting and Training Services https://gatewaygeomatics.com/




On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> Even:
>
> Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.
>
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> Cc: Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>
> Subject: Re: [gdal-dev] Convert TIF to BIL
>
> Bret,
>
>> I have some GeoTIFF (.TIF) files that a program I'm using won't
>> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
>> When I do, GDAL_TRANSLATE says it worked and it generates a few files
>> (including a .BIL), but it doesn't create the .BLW file where all of
>> the "real" data should be.  Is there some special GDAL_TRANSLATE
>> option or use or some special format GeoTIFF data needs to be in for
>> it to work properly and generate a .BLW file?
>
> I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.
>
> To generate a .blw file you can do:
>
> gdal_translate your_input.tif tmp.tif -co TFW=YES
>
> This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.
>
> Even
>
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200311/ff7393d3/attachment-0001.html>

From aborruso at gmail.com  Wed Mar 11 09:53:55 2020
From: aborruso at gmail.com (aborruso)
Date: Wed, 11 Mar 2020 09:53:55 -0700 (MST)
Subject: [gdal-dev] /vsicurl/ and 3XX response code
In-Reply-To: <2309691.mrky0DmU5W@even-i700>
References: <1583942585955-0.post@n6.nabble.com> <2309691.mrky0DmU5W@even-i700>
Message-ID: <1583945635677-0.post@n6.nabble.com>

Hi Even ,


Even Rouault-2 wrote
> No, this is an implementation detail. You'd have to use the curl or other
> HTTP 
> API for that.

today a lot of datasets, especially structured text data, are hosted in
portals that reply with "HTTP/1.1 301 Moved Permanently".
A classic example are the many and preciuous CSV and JSON files that you
have in github gist.

It would be great to have as feature the option to follow the link (as in
curl via "-L" option), both using the gdal/ogr /vsicurl/ via command line
and via the definition of a VRT – GDAL Virtual Format XML file.

Is this the right place where I can create a feature request?

As usual thank you very much




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rupestre.campos at gmail.com  Wed Mar 11 09:53:49 2020
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Wed, 11 Mar 2020 13:53:49 -0300
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <9689d16737de42068d6fbbb12f863de7@WINHEXBEUS103.winus.mail>
References: <202003091156162.SM125804@WIN-TNUD1V9I7I3>
 <994be30d0eb7475e82b9933ecb6687e6@WINHEXBEUS103.winus.mail>
 <CAAvXUUoxSeQWZ7fr3r4V3fRMhAGV13ANjfqh61sHv0p543eWiw@mail.gmail.com>
 <CAAvXUUqau8qkETinaVqGz2cZAL+3bR53LAJZ2W9kvBzUCpVmGA@mail.gmail.com>
 <9689d16737de42068d6fbbb12f863de7@WINHEXBEUS103.winus.mail>
Message-ID: <CAAvXUUoJkWY=TjSvSQygP9X-6LeO3KB6sN2zN7Wpuxs3zMp4Vw@mail.gmail.com>

Bret,

maybe gdal did not recognize source projection, try to run again with -s_srs
EPSG:XXXX, where xxxx should be
the epsg code for your projection. Like:
gdalwarp -s_srs EPSG:XXXX -t_srs EPSG:4326 input.tif output.tif


On Wed, Mar 11, 2020 at 1:39 PM Bret Johnson <bret.johnson at utcg.com> wrote:

> Tried your recommendation of GDALWARP, and received this error message:
>
>
>
> ERROR 1: Too many points (529 out of 529) failed to transform, unable to
> compute output bounds.
>
> Warning 1: Unable to compute source region for output window
> 0,0,2784,89882, skipping.
>
>
>
> *From:* Cainã K. Campos <rupestre.campos at gmail.com>
> *Sent:* Tuesday, March 10, 2020 5:48 AM
> *To:* Bret Johnson <bret.johnson at utcg.com>; gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Convert TIF to BIL
>
>
>
>
>
>
>
> On Tue, Mar 10, 2020 at 8:47 AM Cainã K. Campos <rupestre.campos at gmail.com>
> wrote:
>
> Bret,
>
>
>
> based on the link sent
> https://www.softwright.com/faq/support/toposcript_bil_file_format.html
>
> looks like the .blw file is not just the .tfw file renamed, as  it should
> have other kind of parameters such pixel size, raster rotation. Check if
> your .blw matches the example in the link, if not you can easily create one
> with a .txt file renamed to .blw.
>
> I believe that the .tfw should be renamed to .prj as described in doc, and
> check if formats match also in the .prj generated with documented
>
>
>
> In order to reproject raster to decimal degrees you should use gdalwarp
> with the -t_srs flag, and choose a degree projection like EPSG:4326, you
> may do it before translating to .BIL , like:
>
>
>
> gdalwarp -t_srs EPSG:4326 input.tif output.tif
>
>
>
> Caina
>
>
>
> On Mon, Mar 9, 2020 at 8:23 PM Bret Johnson <bret.johnson at utcg.com> wrote:
>
> Based on that, it looks like my program requires coordinates in decimal
> degrees and my files are not in that format.  How do I force the output
> into the correct (decimal degrees) format?
>
> -----Original Message-----
> From: nhv <nhv at meganet.net>
> Sent: Monday, March 9, 2020 9:56 AM
> To: Bret Johnson <bret.johnson at utcg.com>; Jeff McKenna <
> jmckenna at gatewaygeomatics.com>; gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Convert TIF to BIL
>
> This might help
> https://www.softwright.com/faq/support/toposcript_bil_file_format.html
>
> ---- Original Message ----
> From: "Bret Johnson" <bret.johnson at utcg.com>
> Sent: 3/9/2020 11:08:20 AM
> To: "Jeff McKenna" <jmckenna at gatewaygeomatics.com>, "
> gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] Convert TIF to BIL
>
> The program is made by SoftWright and is called TAP, which is used for
> radio propagation analysis.  The relevant parts of the error message are:
>
> Note that 1 file(s) were found that were not indexed because of errors.
> There could be errors in the data file(s), or these could be files that are
> NOT topo data files that the program tested to try to index and failed.
>
> Like, I said, pretty generic and not very helpful.
>
> -----Original Message-----
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jeff
> McKenna
> Sent: Monday, March 9, 2020 8:50 AM
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Convert TIF to BIL
>
> Hi Bret, what is the exact error message?
>
> -jeff
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services https://gatewaygeomatics.com/
>
>
>
>
> On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> > Even:
> >
> > Thanks.  That worked to create a World file, so I made it past the error
> message.  It's still not importing correctly and the error message is so
> generic that it's useless (basically just says it doesn't like the data).
> I'll do some more playing.
> >
> > -----Original Message-----
> > From: Even Rouault <even.rouault at spatialys.com>
> > Sent: Friday, March 6, 2020 1:15 PM
> > To: gdal-dev at lists.osgeo.org
> > Cc: Bret Johnson <bret.johnson at utcg.com>
> > Subject: Re: [gdal-dev] Convert TIF to BIL
> >
> > Bret,
> >
> >> I have some GeoTIFF (.TIF) files that a program I'm using won't
> >> accept.  It will accept .BIL files and I'm using GDAL to try and do the
> conversion.
> >> When I do, GDAL_TRANSLATE says it worked and it generates a few files
> >> (including a .BIL), but it doesn't create the .BLW file where all of
> >> the "real" data should be.  Is there some special GDAL_TRANSLATE
> >> option or use or some special format GeoTIFF data needs to be in for
> >> it to work properly and generate a .BLW file?
> >
> > I don't know which output driver you use (EHdr, ENVI etc.), but they
> aren't likely to produce a .blw worldfile as they will generate a text
> header file specific to the format.
> >
> > To generate a .blw file you can do:
> >
> > gdal_translate your_input.tif tmp.tif -co TFW=YES
> >
> > This will generate a tmp.tfw file. Just rename it to .blw and with the
> basename of your BIL output file.
> >
> > Even
> >
> > --
> > Spatialys - Geospatial professional services http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200311/04c57e3e/attachment.html>

From scott.stanie at gmail.com  Wed Mar 11 09:59:03 2020
From: scott.stanie at gmail.com (Scott Staniewicz)
Date: Wed, 11 Mar 2020 11:59:03 -0500
Subject: [gdal-dev] Combining raw .vrt with derived bands
In-Reply-To: <3417757.AuiSzADPjC@even-i700>
References: <CAN4_TO-pfpPp9R9sD89i5pg+WAiPdScqe5Ng4fpi4ZpOzn1v3A@mail.gmail.com>
 <3417757.AuiSzADPjC@even-i700>
Message-ID: <CAN4_TO-Kh_HkjXOM7JUUY1Q-yuZtqJ7NBm=wZAXYxNj69NM9Ow@mail.gmail.com>

Oh very cool, thanks!
So that appears to work for getting the Derived band (pasted below), but
I've got 2 followups

1. is there any way to access the nested VRT? So for this one .vrt, it
would have one band as Float32 (the derived phase), and one as CFloat32
(the original raw file). Or are the different datatypes not allowed as
different bands in one raster?
2. If I wanted to have two derived bands (say, a logamp derived band),
would I need to copy the CDATA section twice?

Thanks (apologies for the mis-reply the first time)


(This loaded correctly, but only has 1 band)

<VRTDataset rasterXSize="720" rasterYSize="720">
  <SRS>...</SRS>
  <GeoTransform>  ...</GeoTransform>
  <VRTRasterBand dataType="Float32" band="1"
subClass="VRTDerivedRasterBand">
    <SimpleSource>
      <SourceFilename><![CDATA[
        <VRTDataset rasterXSize="720" rasterYSize="720">
          <SRS>...</SRS>
          <GeoTransform>  ...</GeoTransform>
          <VRTRasterBand dataType="CFloat32" band="1"
subClass="VRTRawRasterBand">
            <SourceFilename relativeToVRT="1">20160327_20160420.int
</SourceFilename>
            <ImageOffset>8</ImageOffset>
            <PixelOffset>8</PixelOffset>
            <LineOffset>5760</LineOffset>
            <ByteOrder>LSB</ByteOrder>
          </VRTRasterBand>
        </VRTDataset>
      ]]></SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="720" RasterYSize="720"
DataType="CFloat32" BlockXSize="720" BlockYSize="1" />
    </SimpleSource>
    <PixelFunctionType>phase</PixelFunctionType>
    <SourceTransferType>CFloat32</SourceTransferType>
  </VRTRasterBand>
</VRTDataset>


On Wed, Mar 11, 2020 at 9:54 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 11 mars 2020 09:49:49 CET Scott Staniewicz wrote:
> > Is it possible to have a VRTRawRasterBand and a VRTDerivedRasterBand,
> which
> > is derived from that Raw file, together as two bands in a single VRT
> file?
> >
> >
> > I've got a CFloat32 raster file with only one complex band in binary
> format
> > (called "20160327_20160420.int" in the example below), and I've figured
> out
> > how to make a VRT for it so I can load it with GDAL.
> >
> > "20160327_20160420.int.vrt":
> >
> > <VRTDataset rasterXSize="720" rasterYSize="720">
> >   <VRTRasterBand dataType="CFloat32" band="1"
> subClass="VRTRawRasterBand">
> >     <SourceFilename relativeToVRT="1">20160327_20160420.int
> </SourceFilename>
> > <ImageOffset>8</ImageOffset>
> >     <PixelOffset>8</PixelOffset>
> >     <LineOffset>5760</LineOffset>
> >     <ByteOrder>LSB</ByteOrder>
> >   </VRTRasterBand>
> >   <SRS>WGS84</SRS>
> >   <GeoTransform> ...</GeoTransform>
> > </VRTDataset>
> >
> > This works great. I've also figured out how to make a derived raster band
> > from this that shows the amplitude of the data, and also the phase
> (below):
> >
> > "20160327_20160420.int.phase.vrt":
> >
> > <VRTDataset rasterXSize="720" rasterYSize="720">
> >   <SRS>...</SRS>
> >   <GeoTransform>  ...</GeoTransform>
> >   <VRTRasterBand dataType="Float32" band="1"
> > subClass="VRTDerivedRasterBand">
> >     <Description>phase of 20160327_20160420.int.vrt </Description>
> >     <SimpleSource>
> >       <SourceFilename
> > relativeToVRT="1">20160327_20160420.int.vrt</SourceFilename>
> >       <SourceBand>1</SourceBand>
> >       <SourceProperties RasterXSize="720" RasterYSize="720"
> > DataType="CFloat32" BlockXSize="720" BlockYSize="1" />
> >     </SimpleSource>
> >     <PixelFunctionType>phase</PixelFunctionType>
> >     <SourceTransferType>CFloat32</SourceTransferType>
> >   </VRTRasterBand>
> > </VRTDataset>
> >
> > But I can't figure out how I would get both of these as two bands in one
> > VRT without causing an infinite recursion. Is that possible? Or do I need
> > to keep them separate?
>
> In the top level VRT, instead of having
>
> <SourceFilename
> relativeToVRT="1">20160327_20160420.int.vrt</SourceFilename>
>
> you can put the content of .int.vrt inline in a CDATA section
>
> <SourceFilename relativeToVRT="1"><![CDATA[put here content of
> 20160327_20160420.int.vrt]]></SourceFilename>
>
> See example from autotest suite:
> https://github.com/OSGeo/gdal/blob/master/autotest/gcore/data/vrtinvrt.vrt
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200311/8330fd53/attachment-0001.html>

From even.rouault at spatialys.com  Wed Mar 11 10:00:51 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Mar 2020 18:00:51 +0100
Subject: [gdal-dev] /vsicurl/ and 3XX response code
In-Reply-To: <1583945635677-0.post@n6.nabble.com>
References: <1583942585955-0.post@n6.nabble.com>
 <2309691.mrky0DmU5W@even-i700> <1583945635677-0.post@n6.nabble.com>
Message-ID: <2429741.pHF23A800x@even-i700>

On mercredi 11 mars 2020 09:53:55 CET aborruso wrote:
> Hi Even ,
> 
> 
> Even Rouault-2 wrote
> 
> > No, this is an implementation detail. You'd have to use the curl or other
> > HTTP
> > API for that.
> 
> today a lot of datasets, especially structured text data, are hosted in
> portals that reply with "HTTP/1.1 301 Moved Permanently".
> A classic example are the many and preciuous CSV and JSON files that you
> have in github gist.
> 
> It would be great to have as feature the option to follow the link (as in
> curl via "-L" option), both using the gdal/ogr /vsicurl/ via command line
> and via the definition of a VRT – GDAL Virtual Format XML file.

/vsicurl/ should automatically follow links. This is even tested in
https://github.com/OSGeo/gdal/blob/master/autotest/gcore/vsicurl.py#L230

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bret.johnson at utcg.com  Wed Mar 11 10:03:10 2020
From: bret.johnson at utcg.com (Bret Johnson)
Date: Wed, 11 Mar 2020 17:03:10 +0000
Subject: [gdal-dev] Convert TIF to BIL
In-Reply-To: <CAAvXUUoJkWY=TjSvSQygP9X-6LeO3KB6sN2zN7Wpuxs3zMp4Vw@mail.gmail.com>
References: <202003091156162.SM125804@WIN-TNUD1V9I7I3>
 <994be30d0eb7475e82b9933ecb6687e6@WINHEXBEUS103.winus.mail>
 <CAAvXUUoxSeQWZ7fr3r4V3fRMhAGV13ANjfqh61sHv0p543eWiw@mail.gmail.com>
 <CAAvXUUqau8qkETinaVqGz2cZAL+3bR53LAJZ2W9kvBzUCpVmGA@mail.gmail.com>
 <9689d16737de42068d6fbbb12f863de7@WINHEXBEUS103.winus.mail>
 <CAAvXUUoJkWY=TjSvSQygP9X-6LeO3KB6sN2zN7Wpuxs3zMp4Vw@mail.gmail.com>
Message-ID: <7f994854ec524441bbf8d245f673e240@WINHEXBEUS103.winus.mail>

Nope, that didn’t help.  Same error message.

From: Cainã K. Campos <rupestre.campos at gmail.com>
Sent: Wednesday, March 11, 2020 10:54 AM
To: Bret Johnson <bret.johnson at utcg.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convert TIF to BIL

Bret,

maybe gdal did not recognize source projection, try to run again with -s_srs EPSG:XXXX, where xxxx should be
the epsg code for your projection. Like:
gdalwarp -s_srs EPSG:XXXX -t_srs EPSG:4326 input.tif output.tif


On Wed, Mar 11, 2020 at 1:39 PM Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>> wrote:
Tried your recommendation of GDALWARP, and received this error message:

ERROR 1: Too many points (529 out of 529) failed to transform, unable to compute output bounds.
Warning 1: Unable to compute source region for output window 0,0,2784,89882, skipping.

From: Cainã K. Campos <rupestre.campos at gmail.com<mailto:rupestre.campos at gmail.com>>
Sent: Tuesday, March 10, 2020 5:48 AM
To: Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL



On Tue, Mar 10, 2020 at 8:47 AM Cainã K. Campos <rupestre.campos at gmail.com<mailto:rupestre.campos at gmail.com>> wrote:
Bret,

based on the link sent https://www.softwright.com/faq/support/toposcript_bil_file_format.html
looks like the .blw file is not just the .tfw file renamed, as  it should have other kind of parameters such pixel size, raster rotation. Check if your .blw matches the example in the link, if not you can easily create one with a .txt file renamed to .blw.
I believe that the .tfw should be renamed to .prj as described in doc, and check if formats match also in the .prj generated with documented

In order to reproject raster to decimal degrees you should use gdalwarp with the -t_srs flag, and choose a degree projection like EPSG:4326, you may do it before translating to .BIL , like:

gdalwarp -t_srs EPSG:4326 input.tif output.tif

Caina

On Mon, Mar 9, 2020 at 8:23 PM Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>> wrote:
Based on that, it looks like my program requires coordinates in decimal degrees and my files are not in that format.  How do I force the output into the correct (decimal degrees) format?

-----Original Message-----
From: nhv <nhv at meganet.net<mailto:nhv at meganet.net>>
Sent: Monday, March 9, 2020 9:56 AM
To: Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>; Jeff McKenna <jmckenna at gatewaygeomatics.com<mailto:jmckenna at gatewaygeomatics.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

This might help
https://www.softwright.com/faq/support/toposcript_bil_file_format.html

---- Original Message ----
From: "Bret Johnson" <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>
Sent: 3/9/2020 11:08:20 AM
To: "Jeff McKenna" <jmckenna at gatewaygeomatics.com<mailto:jmckenna at gatewaygeomatics.com>>, "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Convert TIF to BIL

The program is made by SoftWright and is called TAP, which is used for radio propagation analysis.  The relevant parts of the error message are:

Note that 1 file(s) were found that were not indexed because of errors.  There could be errors in the data file(s), or these could be files that are NOT topo data files that the program tested to try to index and failed.

Like, I said, pretty generic and not very helpful.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Jeff McKenna
Sent: Monday, March 9, 2020 8:50 AM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Convert TIF to BIL

Hi Bret, what is the exact error message?

-jeff


--
Jeff McKenna
MapServer Consulting and Training Services https://gatewaygeomatics.com/




On 2020-03-06 8:19 p.m., Bret Johnson wrote:
> Even:
>
> Thanks.  That worked to create a World file, so I made it past the error message.  It's still not importing correctly and the error message is so generic that it's useless (basically just says it doesn't like the data).  I'll do some more playing.
>
> -----Original Message-----
> From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
> Sent: Friday, March 6, 2020 1:15 PM
> To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> Cc: Bret Johnson <bret.johnson at utcg.com<mailto:bret.johnson at utcg.com>>
> Subject: Re: [gdal-dev] Convert TIF to BIL
>
> Bret,
>
>> I have some GeoTIFF (.TIF) files that a program I'm using won't
>> accept.  It will accept .BIL files and I'm using GDAL to try and do the conversion.
>> When I do, GDAL_TRANSLATE says it worked and it generates a few files
>> (including a .BIL), but it doesn't create the .BLW file where all of
>> the "real" data should be.  Is there some special GDAL_TRANSLATE
>> option or use or some special format GeoTIFF data needs to be in for
>> it to work properly and generate a .BLW file?
>
> I don't know which output driver you use (EHdr, ENVI etc.), but they aren't likely to produce a .blw worldfile as they will generate a text header file specific to the format.
>
> To generate a .blw file you can do:
>
> gdal_translate your_input.tif tmp.tif -co TFW=YES
>
> This will generate a tmp.tfw file. Just rename it to .blw and with the basename of your BIL output file.
>
> Even
>
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200311/785f136c/attachment-0001.html>

From aborruso at gmail.com  Wed Mar 11 10:36:49 2020
From: aborruso at gmail.com (aborruso)
Date: Wed, 11 Mar 2020 10:36:49 -0700 (MST)
Subject: [gdal-dev] /vsicurl/ and 3XX response code
In-Reply-To: <2429741.pHF23A800x@even-i700>
References: <1583942585955-0.post@n6.nabble.com>
 <2309691.mrky0DmU5W@even-i700> <1583945635677-0.post@n6.nabble.com>
 <2429741.pHF23A800x@even-i700>
Message-ID: <1583948209628-0.post@n6.nabble.com>

Hi Even,


Even Rouault-2 wrote
> /vsicurl/ should automatically follow links. This is even tested in
> https://github.com/OSGeo/gdal/blob/master/autotest/gcore/vsicurl.py#L230

I have this example CSV input source
https://query.data.world/s/q4h3mwm2acruvoc5snpp5ltsn5h2gk

It replies:

HTTP/1.1 301 Moved Permanently
Connection: keep-alive
Content-Length: 0
Date: Wed, 11 Mar 2020 17:24:23 GMT
Location:
https://download.data.world/file_download/ondata/covid-19-italia-dati-dipartimento-protezione-civile/dpc-covid19-ita-regioni.csv?auth=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJwcm9kLXVzZXItY2xpZW50OmFib3JydXNvIiwiaXNzIjoiYWdlbnQ6YWJvcnJ1c286OmRlNTc0ZTFlLTVhNzktNDhhZC1hMDk0LTdiZmI5YWExNTBiYyIsImlhdCI6MTU4MzkzNDg2Nywicm9sZSI6WyJ1c2VyIiwidXNlcl9hcGlfYWRtaW4iLCJ1c2VyX2FwaV9yZWFkIiwidXNlcl9hcGlfd3JpdGUiXSwiZ2VuZXJhbC1wdXJwb3NlIjpmYWxzZSwidXJsIjoiMjU5OTdiNjUwZGYzYjllOWM2ZTM1MWIxYTMwZDVmYWJhZjA0NjQxYiJ9.8-yXU5WpfkOcZ5VFMNVtaGwBy7ZaT4yIWIWQ8P1NIgR4o11jnwqH9DpcghdUcvvHNYQZwIDAYIRiwJe5zVLWLA
Server: nginx
Vary: Origin

If I set this VRT input file

<OGRVRTDataSource>
<OGRVRTLayer name="dpc-covid19-ita-regioni">
    <SrcDataSource
relativeToVRT="0">/vsicurl/https://query.data.world/s/q4h3mwm2acruvoc5snpp5ltsn5h2gk</SrcDataSource>
    <GeometryType>wkbPoint</GeometryType>
    <LayerSRS>WGS84</LayerSRS>
    <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
</OGRVRTLayer>
</OGRVRTDataSource>

and run "ogrinfo input.vrt" I have

"ERROR 1: Failed to open datasource
`/vsicurl/https://query.data.world/s/q4h3mwm2acruvoc5snpp5ltsn5h2gk'"

If I run "curl -L http...." I have the CSV.

Probably there is some error of mine, but I don't know which it is.

Thank you





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Mar 11 10:43:53 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Mar 2020 18:43:53 +0100
Subject: [gdal-dev] /vsicurl/ and 3XX response code
In-Reply-To: <1583948209628-0.post@n6.nabble.com>
References: <1583942585955-0.post@n6.nabble.com>
 <2429741.pHF23A800x@even-i700> <1583948209628-0.post@n6.nabble.com>
Message-ID: <3153100.C5Ijj3GX6I@even-i700>

There are 2 issues:
- the CSV driver only recognizes files with .csv extension, unless you prefix the filename with CSV:
- the underling resource doesn't support HTTP GET requests used by /vsicurl/. Fortunately in that situation, you can use the alternate /vsicurl_streaming/ implementation

So all in all, the following works:

ogrinfo -ro -al -q CSV:/vsicurl_streaming/https://query.data.world/s/q4h3mwm2acruvoc5snpp5ltsn5h2gk

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aborruso at gmail.com  Wed Mar 11 10:54:33 2020
From: aborruso at gmail.com (aborruso)
Date: Wed, 11 Mar 2020 10:54:33 -0700 (MST)
Subject: [gdal-dev] /vsicurl/ and 3XX response code
In-Reply-To: <3153100.C5Ijj3GX6I@even-i700>
References: <1583942585955-0.post@n6.nabble.com>
 <2309691.mrky0DmU5W@even-i700> <1583945635677-0.post@n6.nabble.com>
 <2429741.pHF23A800x@even-i700> <1583948209628-0.post@n6.nabble.com>
 <3153100.C5Ijj3GX6I@even-i700>
Message-ID: <1583949273623-0.post@n6.nabble.com>

Hi Even,
as usual GDAL and you are really bombastic!!

Thank you very much



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From menno at huss.nl  Thu Mar 12 05:44:57 2020
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Thu, 12 Mar 2020 12:44:57 +0000
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping (version
	2.4.4)
Message-ID: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>

Dear list,

While in the process of upgrading from 2.2.4 to 2.4.4 we encountered an issue with a specific NETCDF file which can no longer be warped.
Sample files can be found at : ftp://msgcpp-ogc-realtime.knmi.nl/

The file is a multiband dataset from which we want to extract the precip data, it contains 2 bands for georeferencing Lat/Lon.
So in 2.2.4 we used the -geoloc warp parameter to correctly warp it to a Webmercator or Mercator projection, this was done with the c-sharp swig bindings.

With 2.4.4 the program just halts and does not continue, the same can be reproduced with the commandline gdalwarp tool :
gdalwarp -geoloc -r cubic -t_srs "+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs" NETCDF:"samplefile ":precip "output.tiff"

When interrupting this process  HDF5 gives an error :

HDF5: infinite loop closing library
      D,T,FD,P,FD,P,FD,P,E,E,SL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL

Unsure if this is the actual problem or a result of the interrupt.
Best Regards,

Menno Van Scheers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200312/bf55c8fc/attachment.html>

From even.rouault at spatialys.com  Thu Mar 12 07:31:06 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Mar 2020 15:31:06 +0100
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping
	(version 2.4.4)
In-Reply-To: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
References: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
Message-ID: <99005650.2nRJCIzveg@even-i700>

Menno,

did you just update GDAL or GDAL+libnetcdf/libhdf5 ? I can't replicate the 
error you see with GDAL 2.4 or master, and libhdf5 1.8.16 from Ubuntu 16.04

I've tried on ftp://msgcpp-ogc-realtime.knmi.nl/
SEVIR_OPER_R___MSGCPP__L2__20200305T000000_20200305T001500_0001.nc

By the way the georeferencing of that product is broken (but that's unrelated 
to the issue you get):

		projection:semi_major_axis = 6356584.f ;
		projection:semi_minor_axis = 6378169.f ;

semi_minor_axis should be <= semi_major_axis, not greater

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From menno at huss.nl  Thu Mar 12 09:14:17 2020
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Thu, 12 Mar 2020 16:14:17 +0000
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping
 (version 2.4.4)
In-Reply-To: <99005650.2nRJCIzveg@even-i700>
References: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
 <99005650.2nRJCIzveg@even-i700>
Message-ID: <AM0P191MB0483AB315AA493D3A2B685FAACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>

Hi Even,

First thanks for the speedy  reply.

We have used a couple of different version and packages to test this (So a complete gdal update with the associated libhdf5 and netcdf).
In the project itself (.NET) we used 2 different version from the gdal package https://www.nuget.org/packages/GDAL/ (2.4.4 and 2.43)

For testing on commandline I downloaded the prebuild package from http://www.gisinternals.com/release.php

This was also reproduced on a completely clean machine with no prior GDAL or other dependencies installed.


Best Regards,

Menno Van Scheers


-----Oorspronkelijk bericht-----
Van: Even Rouault <even.rouault at spatialys.com> 
Verzonden: donderdag 12 maart 2020 15:31
Aan: gdal-dev at lists.osgeo.org
CC: Menno van Scheers - HUSS <menno at huss.nl>; Mauricio Dominguez Diaz Del Castillo <Mauricio.Dominguez at rtl.nl>
Onderwerp: Re: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping (version 2.4.4)

Menno,

did you just update GDAL or GDAL+libnetcdf/libhdf5 ? I can't replicate the error you see with GDAL 2.4 or master, and libhdf5 1.8.16 from Ubuntu 16.04

I've tried on ftp://msgcpp-ogc-realtime.knmi.nl/
SEVIR_OPER_R___MSGCPP__L2__20200305T000000_20200305T001500_0001.nc

By the way the georeferencing of that product is broken (but that's unrelated to the issue you get):

		projection:semi_major_axis = 6356584.f ;
		projection:semi_minor_axis = 6378169.f ;

semi_minor_axis should be <= semi_major_axis, not greater

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Thu Mar 12 10:44:45 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 12 Mar 2020 14:44:45 -0300
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping
 (version 2.4.4)
In-Reply-To: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
References: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
Message-ID: <e4d2f03a-c141-5e63-c3bf-437fbccea11f@gatewaygeomatics.com>

Hi Menno,

I have also tested one of your files on Windows here, with MS4W 4.0.3 
(GDAL 2.4.4, NetCDF 4.7.3, HDF5 1.10.5), and it also gives me errors:

gdalinfo
--------

gdalinfo --format netcdf

     GDAL_HAS_HDF4=YES
     GDAL_HAS_HDF5=YES
     NETCDF_CONVENTIONS=CF-1.5
     NETCDF_HAS_NC2=YES
     NETCDF_VERSION=4.7.3 of Jan 23 2020 15:16:48 $

gdalwarp
-------

gdalwarp -geoloc -r cubic -t_srs "+proj=merc +a=6378137 +b=6378137 
+lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null 
+wktext  +no_defs" 
NETCDF:"SEVIR_OPER_R___MSGCPP__L2__20200305T000000_20200305T001500_0001.nc":precip 
"output.tiff"

output
------

Warning 1: NetCDF driver detected file type=5, but libnetcdf detected type=3
ERROR 5: OSRCalcInvFlattening(): Wrong input values
Warning 1: NetCDF driver detected file type=5, but libnetcdf detected type=3
ERROR 5: OSRCalcInvFlattening(): Wrong input values
Warning 1: NetCDF driver detected file type=5, but libnetcdf detected type=3
ERROR 5: OSRCalcInvFlattening(): Wrong input values
Creating output file that is 2790P x 4447L.
Processing 
NETCDF:SEVIR_OPER_R___MSGCPP__L2__20200305T000000_20200305T001500_0001.nc:precip 
[1/1] : 0Using internal nodata values (e.g. -1) for image 
NETCDF:SEVIR_OPER_R___MSGCPP__L2__20200305T000000_20200305T001500_0001.nc:precip.
Copying nodata values from source 
NETCDF:SEVIR_OPER_R___MSGCPP__L2__20200305T000000_20200305T001500_0001.nc:precip 
to destination output.tiff.
...10...20...30...40...50...60...70...80...90...100 - done.


thoughts
--------

MS4W does include C Sharp GDAL bindings but I did not test them with 
your data.


-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/




On 2020-03-12 9:44 a.m., Menno van Scheers - HUSS wrote:
> Dear list,
> 
> While in the process of upgrading from 2.2.4 to 2.4.4 we encountered an 
> issue with a specific NETCDF file which can no longer be warped.
> Sample files can be found at : ftp://msgcpp-ogc-realtime.knmi.nl/
> 
> The file is a multiband dataset from which we want to extract the 
> *precip* data, it contains 2 bands for georeferencing Lat/Lon.
> So in 2.2.4 we used the -geoloc warp parameter to correctly warp it to a 
> Webmercator or Mercator projection, this was done with the c-sharp swig 
> bindings.
> 
> With 2.4.4 the program just halts and does not continue, the same can be 
> reproduced with the commandline gdalwarp tool :
> gdalwarp -geoloc -r cubic -t_srs "+proj=merc +a=6378137 +b=6378137 
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null 
> +wktext  +no_defs" NETCDF:"samplefile ":precip "output.tiff"
> 
> When interrupting this process  HDF5 gives an error :
> 
> HDF5: infinite loop closing library
> 
>        
> D,T,FD,P,FD,P,FD,P,E,E,SL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL,FL
> 
> Unsure if this is the actual problem or a result of the interrupt.
> 
> Best Regards,
> 
> Menno Van Scheers
> 
> 






From even.rouault at spatialys.com  Thu Mar 12 11:16:39 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Mar 2020 19:16:39 +0100
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping
	(version 2.4.4)
In-Reply-To: <e4d2f03a-c141-5e63-c3bf-437fbccea11f@gatewaygeomatics.com>
References: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
 <e4d2f03a-c141-5e63-c3bf-437fbccea11f@gatewaygeomatics.com>
Message-ID: <2004230.vUvGiHOJyR@even-i700>

Jeff,

> I have also tested one of your files on Windows here, with MS4W 4.0.3
> (GDAL 2.4.4, NetCDF 4.7.3, HDF5 1.10.5), and it also gives me errors:

They look unrelated to Menno's error.

> Warning 1: NetCDF driver detected file type=5, but libnetcdf detected type=3

That one is likely related to MS4W nmake.opt lacking NETCDF_HAS_NC4 = yes

> ERROR 5: OSRCalcInvFlattening(): Wrong input values

Yep, that one is related to the oddity of the semi_minor_radius vs 
semi_major_radius I mentionned before.

> MS4W does include C Sharp GDAL bindings but I did not test them with
> your data.

That's completely unrelated.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Thu Mar 12 11:30:27 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 12 Mar 2020 15:30:27 -0300
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping
 (version 2.4.4)
In-Reply-To: <2004230.vUvGiHOJyR@even-i700>
References: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
 <e4d2f03a-c141-5e63-c3bf-437fbccea11f@gatewaygeomatics.com>
 <2004230.vUvGiHOJyR@even-i700>
Message-ID: <6ec7c2a8-67ee-7ba4-40bd-8269e46e45d1@gatewaygeomatics.com>

On 2020-03-12 3:16 p.m., Even Rouault wrote:
> Jeff,
> 
>> I have also tested one of your files on Windows here, with MS4W 4.0.3
>> (GDAL 2.4.4, NetCDF 4.7.3, HDF5 1.10.5), and it also gives me errors:
> 
> They look unrelated to Menno's error.
> 
>> Warning 1: NetCDF driver detected file type=5, but libnetcdf detected type=3
> 
> That one is likely related to MS4W nmake.opt lacking NETCDF_HAS_NC4 = yes
> 
>

Thanks Even, confirmed, will fix this for next release.

-jeff






From menno at huss.nl  Fri Mar 13 01:04:25 2020
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Fri, 13 Mar 2020 08:04:25 +0000
Subject: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping
 (version 2.4.4)
In-Reply-To: <6ec7c2a8-67ee-7ba4-40bd-8269e46e45d1@gatewaygeomatics.com>
References: <AM0P191MB0483DF737E1A7D33A58A8DE8ACFD0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>
 <e4d2f03a-c141-5e63-c3bf-437fbccea11f@gatewaygeomatics.com>
 <2004230.vUvGiHOJyR@even-i700>
 <6ec7c2a8-67ee-7ba4-40bd-8269e46e45d1@gatewaygeomatics.com>
Message-ID: <AM0P191MB0483208D22FCD315FFF3EE06ACFA0@AM0P191MB0483.EURP191.PROD.OUTLOOK.COM>

Hi Even, Jeff

I checked both the 3.0.x and 2.4.4 release from  http://www.gisinternals.com/
They both report :

    GDAL_HAS_HDF4=YES
    GDAL_HAS_HDF5=YES
    NETCDF_CONVENTIONS=CF-1.5
    NETCDF_HAS_NC2=YES
    NETCDF_VERSION=4.3.2 of Sep  3 2017 18:13:37

Are the gdal nuget package based on these builds ? 
And am I safe to assume the issue is due to this old NETCDF version

Best Regards,
Menno Van Scheers

-----Oorspronkelijk bericht-----
Van: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Namens Jeff McKenna
Verzonden: donderdag 12 maart 2020 19:30
Aan: gdal-dev at lists.osgeo.org
Onderwerp: Re: [gdal-dev] Infinite loop Netcdf/HDF5 -geoloc when warping (version 2.4.4)

On 2020-03-12 3:16 p.m., Even Rouault wrote:
> Jeff,
> 
>> I have also tested one of your files on Windows here, with MS4W 4.0.3 
>> (GDAL 2.4.4, NetCDF 4.7.3, HDF5 1.10.5), and it also gives me errors:
> 
> They look unrelated to Menno's error.
> 
>> Warning 1: NetCDF driver detected file type=5, but libnetcdf detected 
>> type=3
> 
> That one is likely related to MS4W nmake.opt lacking NETCDF_HAS_NC4 = 
> yes
> 
>

Thanks Even, confirmed, will fix this for next release.

-jeff





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From mulcahy.brianp at gmail.com  Fri Mar 13 05:07:11 2020
From: mulcahy.brianp at gmail.com (Brian)
Date: Fri, 13 Mar 2020 08:07:11 -0400
Subject: [gdal-dev] Need some help understanding why this raster is so big
Message-ID: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>

So compressed this raster is fairly small about 120mb but running gdal_warp
produces a raster that is about 416 gb, is this something this list can
help with? If so I can upload the file somewhere and let you guys/gals take
a look at it.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/777d7ee5/attachment.html>

From rupestre.campos at gmail.com  Fri Mar 13 05:33:45 2020
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Fri, 13 Mar 2020 09:33:45 -0300
Subject: [gdal-dev] Need some help understanding why this raster is so
	big
In-Reply-To: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
Message-ID: <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>

Hello Brian,

Try to add the switch   -co "COMPRESS=LZW" to the command line to generate
a compressed result with lossless compression.

On Fri, Mar 13, 2020 at 9:07 AM Brian <mulcahy.brianp at gmail.com> wrote:

> So compressed this raster is fairly small about 120mb but running
> gdal_warp produces a raster that is about 416 gb, is this something this
> list can help with? If so I can upload the file somewhere and let you
> guys/gals take a look at it.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/e7afe070/attachment.html>

From mulcahy.brianp at gmail.com  Fri Mar 13 05:42:59 2020
From: mulcahy.brianp at gmail.com (Brian)
Date: Fri, 13 Mar 2020 08:42:59 -0400
Subject: [gdal-dev] Need some help understanding why this raster is so
	big
In-Reply-To: <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
 <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>
Message-ID: <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>

Is it faster to do a gdal_warp with compression then without? Is it safe
to assume the drive write speed would be the limiting factor for speed in
this case?

On Fri, Mar 13, 2020 at 8:33 AM Cainã K. Campos <rupestre.campos at gmail.com>
wrote:

> Hello Brian,
>
> Try to add the switch   -co "COMPRESS=LZW" to the command line to
> generate a compressed result with lossless compression.
>
> On Fri, Mar 13, 2020 at 9:07 AM Brian <mulcahy.brianp at gmail.com> wrote:
>
>> So compressed this raster is fairly small about 120mb but running
>> gdal_warp produces a raster that is about 416 gb, is this something this
>> list can help with? If so I can upload the file somewhere and let you
>> guys/gals take a look at it.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/7a597d46/attachment.html>

From mdsumner at gmail.com  Fri Mar 13 05:55:43 2020
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 13 Mar 2020 23:55:43 +1100
Subject: [gdal-dev] Need some help understanding why this raster is so
	big
In-Reply-To: <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
 <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>
 <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>
Message-ID: <CAAcGz9-6d+gEj7Y9F1=fV5vo0h2Bkv8knUp657fwsUjngquBHw@mail.gmail.com>

What is the source (and target) projection and extent? Some projections
have expansive limits, but you can specify the target extent with -te

HTH

On Fri., 13 Mar. 2020, 23:43 Brian, <mulcahy.brianp at gmail.com> wrote:

> Is it faster to do a gdal_warp with compression then without? Is it safe
> to assume the drive write speed would be the limiting factor for speed in
> this case?
>
> On Fri, Mar 13, 2020 at 8:33 AM Cainã K. Campos <rupestre.campos at gmail.com>
> wrote:
>
>> Hello Brian,
>>
>> Try to add the switch   -co "COMPRESS=LZW" to the command line to
>> generate a compressed result with lossless compression.
>>
>> On Fri, Mar 13, 2020 at 9:07 AM Brian <mulcahy.brianp at gmail.com> wrote:
>>
>>> So compressed this raster is fairly small about 120mb but running
>>> gdal_warp produces a raster that is about 416 gb, is this something this
>>> list can help with? If so I can upload the file somewhere and let you
>>> guys/gals take a look at it.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/91b2e063/attachment-0001.html>

From mulcahy.brianp at gmail.com  Fri Mar 13 06:02:33 2020
From: mulcahy.brianp at gmail.com (Brian)
Date: Fri, 13 Mar 2020 09:02:33 -0400
Subject: [gdal-dev] Need some help understanding why this raster is so
	big
In-Reply-To: <CAAcGz9-6d+gEj7Y9F1=fV5vo0h2Bkv8knUp657fwsUjngquBHw@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
 <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>
 <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>
 <CAAcGz9-6d+gEj7Y9F1=fV5vo0h2Bkv8knUp657fwsUjngquBHw@mail.gmail.com>
Message-ID: <CANoBQebusXxVpABPWwB2DB1gd_dzge+JWgRy4a3g0+rB26b2tQ@mail.gmail.com>

Here is the gdalinfo output I am just re-projecting to 4326

Driver: VRT/Virtual Raster
Files: Depth (Max).vrt
       Depth (Max).Terrainredacted.tif
       Depth (Max). redacted .tif
Size is 309153, 277451
Coordinate System is:
PROJCS["USA_Contiguous_Albers_Equal_Area_Conic_USGS_version",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010042,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",29.5],
    PARAMETER["standard_parallel_2",45.5],
    PARAMETER["latitude_of_center",23],
    PARAMETER["longitude_of_center",-96],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]]]
Origin = (2771031.965285023674369,6437561.791629494167864)
Pixel Size = (3.000000000000000,-3.000000000000000)
Corner Coordinates:
Upper Left  ( 2771031.965, 6437561.792) ( 85d57'44.50"W, 40d16'21.58"N)
Lower Left  ( 2771031.965, 5605208.792) ( 86d16'11.82"W, 38d 1'16.13"N)
Upper Right ( 3698490.965, 6437561.792) ( 82d38'29.14"W, 39d57'46.13"N)
Lower Right ( 3698490.965, 5605208.792) ( 83d 2'54.73"W, 37d43'14.99"N)
Center      ( 3234761.465, 6021385.292) ( 84d28'47.64"W, 39d 0'18.59"N)
Band 1 Block=128x128 Type=Float32, ColorInterp=Gray
  Min=0.001 Max=96.054
  Minimum=0.001, Maximum=96.054, Mean=6.209, StdDev=10.756
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=96.0537109375
    STATISTICS_MEAN=6.2090953579112
    STATISTICS_MINIMUM=0.0009765625
    STATISTICS_STDDEV=10.756049212573

On Fri, Mar 13, 2020 at 8:53 AM Michael Sumner <mdsumner at gmail.com> wrote:

> What is the source (and target) projection and extent? Some projections
> have expansive limits, but you can specify the target extent with -te
>
> HTH
>
> On Fri., 13 Mar. 2020, 23:43 Brian, <mulcahy.brianp at gmail.com> wrote:
>
>> Is it faster to do a gdal_warp with compression then without? Is it safe
>> to assume the drive write speed would be the limiting factor for speed in
>> this case?
>>
>> On Fri, Mar 13, 2020 at 8:33 AM Cainã K. Campos <
>> rupestre.campos at gmail.com> wrote:
>>
>>> Hello Brian,
>>>
>>> Try to add the switch   -co "COMPRESS=LZW" to the command line to
>>> generate a compressed result with lossless compression.
>>>
>>> On Fri, Mar 13, 2020 at 9:07 AM Brian <mulcahy.brianp at gmail.com> wrote:
>>>
>>>> So compressed this raster is fairly small about 120mb but running
>>>> gdal_warp produces a raster that is about 416 gb, is this something this
>>>> list can help with? If so I can upload the file somewhere and let you
>>>> guys/gals take a look at it.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/cd7c13e6/attachment.html>

From rupestre.campos at gmail.com  Fri Mar 13 06:08:04 2020
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Fri, 13 Mar 2020 10:08:04 -0300
Subject: [gdal-dev] Need some help understanding why this raster is so
	big
In-Reply-To: <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
 <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>
 <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>
Message-ID: <CAAvXUUqRe_FctUBqCZbQ1ieyD3etTRPU5oBbmRzP0NW1RtVz4A@mail.gmail.com>

if you run without the switch it will create the result without
compression, so you will be back to a 400Gb file. Instead run everything in
one single command.
With compression it is likely to take some extra time, as some calculation
has to be done to achieve that.
If you want speed, tile the raster and also there are a few other switches
to add so gdalwarp can use more than one core to make this calcs, and you
can also too give more memory to it like:
--config GDAL_SWATH_SIZE 2000000000 --config GDAL_CACHEMAX 2000 -wm 2000 -co
"tiled=yes" -co "BLOCKXSIZE=256" -co "BLOCKYSIZE=256" -wo "NUM_THREADS=
ALL_CPUS" -multi -co "NUM_THREADS=ALL_CPUS" -co "bigtiff=yes"


On Fri, Mar 13, 2020 at 9:43 AM Brian <mulcahy.brianp at gmail.com> wrote:

> Is it faster to do a gdal_warp with compression then without? Is it safe
> to assume the drive write speed would be the limiting factor for speed in
> this case?
>
> On Fri, Mar 13, 2020 at 8:33 AM Cainã K. Campos <rupestre.campos at gmail.com>
> wrote:
>
>> Hello Brian,
>>
>> Try to add the switch   -co "COMPRESS=LZW" to the command line to
>> generate a compressed result with lossless compression.
>>
>> On Fri, Mar 13, 2020 at 9:07 AM Brian <mulcahy.brianp at gmail.com> wrote:
>>
>>> So compressed this raster is fairly small about 120mb but running
>>> gdal_warp produces a raster that is about 416 gb, is this something this
>>> list can help with? If so I can upload the file somewhere and let you
>>> guys/gals take a look at it.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/db0e286e/attachment.html>

From Daniel.Evans at jbarisk.com  Fri Mar 13 06:13:42 2020
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Fri, 13 Mar 2020 13:13:42 +0000
Subject: [gdal-dev] Need some help understanding why this raster is
	so	big
In-Reply-To: <CAAvXUUqRe_FctUBqCZbQ1ieyD3etTRPU5oBbmRzP0NW1RtVz4A@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
 <CAAvXUUrzyyVMfSW=sUnnX4fVKW84VKoMuHwNeSCJ4e1CrAyr+Q@mail.gmail.com>
 <CANoBQebXe+H4SJ3n9yScCtyHC7W2FnxhJ4T1HK4atBuQSvpoQA@mail.gmail.com>
 <CAAvXUUqRe_FctUBqCZbQ1ieyD3etTRPU5oBbmRzP0NW1RtVz4A@mail.gmail.com>
Message-ID: <LO2P123MB207773DADDD7F20F6769820995FA0@LO2P123MB2077.GBRP123.PROD.OUTLOOK.COM>

Given the filesize of the original raster, I suspect it’s mostly empty, and so I’d suggest also specifying:

-co “SPARSE_OK=TRUE”

That instructs GDAL to avoid writing any data at all where the entirety of a tile is nodata, rather than writing a (compressed) block of nodata values. However, the GDAL documentation does warn that this can cause trouble with external software.


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Cainã K. Campos
Sent: 13 March 2020 13:08
To: Brian <mulcahy.brianp at gmail.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Need some help understanding why this raster is so big

if you run without the switch it will create the result without compression, so you will be back to a 400Gb file. Instead run everything in one single command.
With compression it is likely to take some extra time, as some calculation has to be done to achieve that.
If you want speed, tile the raster and also there are a few other switches to add so gdalwarp can use more than one core to make this calcs, and you can also too give more memory to it like:
--config GDAL_SWATH_SIZE 2000000000 --config GDAL_CACHEMAX 2000 -wm 2000 -co "tiled=yes" -co "BLOCKXSIZE=256" -co "BLOCKYSIZE=256" -wo "NUM_THREADS=ALL_CPUS" -multi -co "NUM_THREADS=ALL_CPUS" -co "bigtiff=yes"


On Fri, Mar 13, 2020 at 9:43 AM Brian <mulcahy.brianp at gmail.com<mailto:mulcahy.brianp at gmail.com>> wrote:
Is it faster to do a gdal_warp with compression then without? Is it safe to assume the drive write speed would be the limiting factor for speed in this case?

On Fri, Mar 13, 2020 at 8:33 AM Cainã K. Campos <rupestre.campos at gmail.com<mailto:rupestre.campos at gmail.com>> wrote:
Hello Brian,

Try to add the switch   -co "COMPRESS=LZW" to the command line to generate a compressed result with lossless compression.

On Fri, Mar 13, 2020 at 9:07 AM Brian <mulcahy.brianp at gmail.com<mailto:mulcahy.brianp at gmail.com>> wrote:
So compressed this raster is fairly small about 120mb but running gdal_warp produces a raster that is about 416 gb, is this something this list can help with? If so I can upload the file somewhere and let you guys/gals take a look at it.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png]  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/08f28f9e/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 13 07:03:08 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 13 Mar 2020 07:03:08 -0700 (MST)
Subject: [gdal-dev] Need some help understanding why this raster is so
 big
In-Reply-To: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
References: <CANoBQebKFEEWCSG4kWWebmGpWYQiCNnWnjRER3=8NP=cyQAz1A@mail.gmail.com>
Message-ID: <1584108188412-0.post@n6.nabble.com>

Hi,

You asked help for understanding, so

Check the size of the original image:
309153 x 277451
Check how many bands:
1
Check how many bits per pixel for each band:
32 bits (makes 4 bytes)

Multiply:
309153 x 277451 x 4 = number of bytes as uncompressed = 3.43099E+11 = 343 GB

Compare with the 120 MB that you have and make a conclusion that the
original is well compressed.

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Jon.Morris at jbarisk.com  Fri Mar 13 08:10:45 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Fri, 13 Mar 2020 15:10:45 +0000
Subject: [gdal-dev] cannot write to gdal_array
Message-ID: <CWXP123MB1701243B1534A6AD9589D23182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>

Hello all,

I'm trying to upgrade from GDAL 2.2.0 to 3.0.4 and some of our tests are failing. We're using gdal_array.OpenArray() to create temporary datasets and all the tests where we call band.WriteArray() are failing with the error "CPLError: Write operation not permitted on dataset opened in read-only mode."

I can't see any way to open a gdal_array in update mode, so is this a change in behaviour between 2.2 and 3.0? Should we be able to write to these datasets, or should I change the failing tests to use the MEM driver instead?

Thanks,

Jon

Jon Morris
Software Developer

Skype<sip:jon.morris at jbarisk.com>


T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200313/d01c417d/attachment.html>

From even.rouault at spatialys.com  Fri Mar 13 08:41:42 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Mar 2020 16:41:42 +0100
Subject: [gdal-dev] cannot write to gdal_array
In-Reply-To: <CWXP123MB1701243B1534A6AD9589D23182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>
References: <CWXP123MB1701243B1534A6AD9589D23182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <6660125.Qx6m5j1jL4@even-i700>

Jon,

> I'm trying to upgrade from GDAL 2.2.0 to 3.0.4 and some of our tests are
> failing. We're using gdal_array.OpenArray() to create temporary datasets
> and all the tests where we call band.WriteArray() are failing with the
> error "CPLError: Write operation not permitted on dataset opened in
> read-only mode."
> 
> I can't see any way to open a gdal_array in update mode, so is this a change
> in behaviour between 2.2 and 3.0?

A not intended one. Due to gdal_array.OpenArray() having apparently always set 
ReadOnly setting for a unknown reason, and the MEM driver used by it 
underneath that didn't honour this setting until recently.

Proposed fix queued in https://github.com/OSGeo/gdal/pull/2317

> Should we be able to write to these
> datasets, or should I change the failing tests to use the MEM driver
> instead?

If you can't apply the above fix, yes, using the MEM driver is probably your 
best option

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Jon.Morris at jbarisk.com  Fri Mar 13 09:23:27 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Fri, 13 Mar 2020 16:23:27 +0000
Subject: [gdal-dev] cannot write to gdal_array
In-Reply-To: <6660125.Qx6m5j1jL4@even-i700>
References: <CWXP123MB1701243B1534A6AD9589D23182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>
 <6660125.Qx6m5j1jL4@even-i700>
Message-ID: <CWXP123MB1701A9B84347E369D534245182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>

Thanks for the quick fix, Even! Glad it wasn't just something I'd missed.

I'm not entirely clear on the uses for gdal_array. Are there cases where it is better than using a MEM raster? Is there any more detailed documentation?

Thanks,

Jon

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com>
Sent: 13 March 2020 15:42
To: gdal-dev at lists.osgeo.org
Cc: Jon Morris <Jon.Morris at jbarisk.com>
Subject: Re: [gdal-dev] cannot write to gdal_array

Jon,

> I'm trying to upgrade from GDAL 2.2.0 to 3.0.4 and some of our tests
> are failing. We're using gdal_array.OpenArray() to create temporary
> datasets and all the tests where we call band.WriteArray() are failing
> with the error "CPLError: Write operation not permitted on dataset
> opened in read-only mode."
>
> I can't see any way to open a gdal_array in update mode, so is this a
> change in behaviour between 2.2 and 3.0?

A not intended one. Due to gdal_array.OpenArray() having apparently always set ReadOnly setting for a unknown reason, and the MEM driver used by it underneath that didn't honour this setting until recently.

Proposed fix queued in https://github.com/OSGeo/gdal/pull/2317

> Should we be able to write to these
> datasets, or should I change the failing tests to use the MEM driver
> instead?

If you can't apply the above fix, yes, using the MEM driver is probably your best option

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com
T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter] <https://twitter.com/jbarisk>
Our postal address and registered office is JBA Risk Management Limited, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire BD23 3FD.
Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919



From even.rouault at spatialys.com  Fri Mar 13 10:01:31 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Mar 2020 18:01:31 +0100
Subject: [gdal-dev] cannot write to gdal_array
In-Reply-To: <CWXP123MB1701A9B84347E369D534245182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>
References: <CWXP123MB1701243B1534A6AD9589D23182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>
 <6660125.Qx6m5j1jL4@even-i700>
 <CWXP123MB1701A9B84347E369D534245182FA0@CWXP123MB1701.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <49507899.ccbDpZhtj3@even-i700>

On vendredi 13 mars 2020 16:23:27 CET Jon Morris wrote:
> Thanks for the quick fix, Even! Glad it wasn't just something I'd missed.
> 
> I'm not entirely clear on the uses for gdal_array. Are there cases where it
> is better than using a MEM raster?

I don't think so. It uses the MEM driver underneath. This is just a matter of 
using different entry points to the same backend.

> Is there any more detailed documentation?

Not sure. Documentation is not the strongest point of the bindings :-) Looking 
at unit tests / using the search function in the github repo is sometimes 
useful to find relevant snippets.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From darrel.maddy at newcastle.ac.uk  Sun Mar 15 05:08:04 2020
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Sun, 15 Mar 2020 12:08:04 +0000
Subject: [gdal-dev] Building on windows
Message-ID: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>

I have recently switched back to windows for a specific project that uses the gdal library.  I am getting the following error on compilation of the VS project
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' : return code '0x2'

The cl.exe file is present in the directory (there are a number of similar messages that follow)  and I am unsure how to proceed. Any suggestions?

Thanks

Darrel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200315/9f2df43a/attachment.html>

From mateusz at loskot.net  Sun Mar 15 08:53:49 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 15 Mar 2020 16:53:49 +0100
Subject: [gdal-dev] Building on windows
In-Reply-To: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
Message-ID: <CABUeae8UzS8foFD7B2K=DuoB3eV+CO-0uiHVAWO0+TV1-=Z6=Q@mail.gmail.com>

On Sun, 15 Mar 2020 at 13:08, Darrel Maddy <darrel.maddy at newcastle.ac.uk> wrote:
>
> I have recently switched back to windows for a specific project that uses the gdal library.  I am getting the following error on compilation of the VS project
>
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' : return code '0x2'
>
> The cl.exe file is present in the directory (there are a number of similar messages that follow)  and I am unsure how to proceed. Any suggestions?

That is just a tiny bit of detailed error that does not tell much.
Possibly, your nmake.opt is configured to link some GDAL dependencies
which you are actually missing, then NMAKE will fail if cl/link fail.

Besides, you don't tell anything about
- what version of GDAL you build
- what commands you run to build
- you say you compile of the VS project, but what is "the" project, is
it one generated with generate_vcxproj.bat?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From Robert.Danziger at eui.eu  Mon Mar 16 05:54:20 2020
From: Robert.Danziger at eui.eu (Danziger, Robert C.)
Date: Mon, 16 Mar 2020 12:54:20 +0000
Subject: [gdal-dev] ogr2ogr - double free or corruption (out)
Message-ID: <AM4PR05MB3282C26B24FC72AF1C24131787F90@AM4PR05MB3282.eurprd05.prod.outlook.com>

Ubuntu 18.04 (LTR).
since (apt) upgrade 3-4 days ago every invocation of 'ogr2org' (GDAL 3.0.2) generates the following messages:
===============================
"Double free or corruption (out)"
"Aborted (core dumped)"
===============================
Every invocation produces this, regardless whether an attempt to convert posgresql => geojson or a simple 'ogr2ogr --version' command.
=> However the command appears to execute correctly (i.e. the postgresql => geojson does get executed as desired but the messages are thrown anyway.)
===============================
Any attempt to apt upgrade shows gdal-bin, gdal-data, libgdal26, python3-gdal as well as qgis and grass packages 'kept back'.
(Note: I have attempted to "force" an upgrade of these packages but this has not worked and resulted in a situation of having to completely restore the system -- successfully-- from a very recent cold backup.)
===============================
PostgreSQL Server version: 11.7
Best regards


The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review, retransmission, dissemination, distribution, forwarding, or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited without the express permission of the sender. If you received this communication in error, please contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200316/183b0074/attachment.html>

From andre+joost at nurfuerspam.de  Mon Mar 16 11:19:32 2020
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 16 Mar 2020 19:19:32 +0100
Subject: [gdal-dev] ogr2ogr - double free or corruption (out)
In-Reply-To: <AM4PR05MB3282C26B24FC72AF1C24131787F90@AM4PR05MB3282.eurprd05.prod.outlook.com>
References: <AM4PR05MB3282C26B24FC72AF1C24131787F90@AM4PR05MB3282.eurprd05.prod.outlook.com>
Message-ID: <r4oht3$39mj$1@ciao.gmane.io>

Am 16.03.20 um 13:54 schrieb Danziger, Robert C.:
> Ubuntu 18.04 (LTR). since (apt) upgrade 3-4 days ago every invocation
> of 'ogr2org' (GDAL 3.0.2) generates the following messages:
> =============================== "Double free or corruption (out)"
> "Aborted (core dumped)"

I assume you are using GDAL from the ubuntugis PPA.

There, GDAL has been upgraded to 3.0.4 on 2020-03-11.

Try to update. If the error persists, you may downgrade GDAL to the 
version 2.2.3 from the main ubuntu repo.

For QGIS, you might have to wait for the next point release to get it 
working with GDAL 3.0.4.

HTH,
Andre Joost


From daniloide at gmail.com  Mon Mar 16 16:08:59 2020
From: daniloide at gmail.com (Danilo da Rosa)
Date: Mon, 16 Mar 2020 20:08:59 -0300
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
Message-ID: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>

Hi!

This may be a very basic question, but I can't find the answer anyware.

I am working with this DEM obtained using terraincache
<https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is
WGS 84.

[image: DEM File in QGIS] <https://i.stack.imgur.com/Sp4Sg.jpg>

I ran this GDAL command to get the slope:

gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of
the SRC)

The resulting image looks fine but it's not smooth, it has weird lines over
it, like contour lines.

[image: Slope file on QGIS] <https://i.stack.imgur.com/POcHR.jpg>

You can download the DEM file here: https://gofile.io/?c=Du7WnM

Does anyone have an idea of how to solve it?

Thanks in advance for your help,

Danilo

P.S. I made this question here too:
https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200316/cd8396f9/attachment.html>

From jluis at ualg.pt  Mon Mar 16 17:32:13 2020
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Tue, 17 Mar 2020 00:32:13 +0000
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
Message-ID: <DB6PR04MB330353623A3745771C6A4CE8A6F60@DB6PR04MB3303.eurprd04.prod.outlook.com>

Ah, let me guess. The dem grid was interpolated from contour lines and you seeing the contours again.

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Danilo da Rosa
Sent: Monday, March 16, 2020 11:09 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Slope obtained with GDAL has weird lines

Hi!

This may be a very basic question, but I can't find the answer anyware.

I am working with this DEM obtained using terraincache<https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is WGS 84.

[DEM File in QGIS]<https://i.stack.imgur.com/Sp4Sg.jpg>

I ran this GDAL command to get the slope:

gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of the SRC)

The resulting image looks fine but it's not smooth, it has weird lines over it, like contour lines.

[Slope file on QGIS]<https://i.stack.imgur.com/POcHR.jpg>

You can download the DEM file here: https://gofile.io/?c=Du7WnM

Does anyone have an idea of how to solve it?

Thanks in advance for your help,

Danilo

P.S. I made this question here too: https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/60e89f57/attachment.html>

From alexhighviz at hotmail.com  Mon Mar 16 23:29:30 2020
From: alexhighviz at hotmail.com (Alex HighViz)
Date: Tue, 17 Mar 2020 06:29:30 +0000
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <DB6PR04MB330353623A3745771C6A4CE8A6F60@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>,
 <DB6PR04MB330353623A3745771C6A4CE8A6F60@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <AM6PR05MB4965843DFB609465E5EFE7B3B4F60@AM6PR05MB4965.eurprd05.prod.outlook.com>

Another guess:

The vertical resolution of your DEM is low, say height is measured by 1m intervals, and your horizontal resolution is relatively high, say the pixel size is 25m. Then the minimum slope is 1/25. For many pixels in flatter area, this means adjacent pixels are of exactly

Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Joaquim Manuel Freire Luís <jluis at ualg.pt>
Sent: Tuesday, March 17, 2020 12:32:13 AM
To: Danilo da Rosa <daniloide at gmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Slope obtained with GDAL has weird lines


Ah, let me guess. The dem grid was interpolated from contour lines and you seeing the contours again.



From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Danilo da Rosa
Sent: Monday, March 16, 2020 11:09 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Slope obtained with GDAL has weird lines



Hi!



This may be a very basic question, but I can't find the answer anyware.

I am working with this DEM obtained using terraincache<https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is WGS 84.

[DEM File in QGIS]<https://i.stack.imgur.com/Sp4Sg.jpg>

I ran this GDAL command to get the slope:

gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of the SRC)

The resulting image looks fine but it's not smooth, it has weird lines over it, like contour lines.

[Slope file on QGIS]<https://i.stack.imgur.com/POcHR.jpg>

You can download the DEM file here: https://gofile.io/?c=Du7WnM

Does anyone have an idea of how to solve it?

Thanks in advance for your help,

Danilo

P.S. I made this question here too: https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/af598d78/attachment-0001.html>

From alexhighviz at hotmail.com  Mon Mar 16 23:34:08 2020
From: alexhighviz at hotmail.com (Alex HighViz)
Date: Tue, 17 Mar 2020 06:34:08 +0000
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <AM6PR05MB4965843DFB609465E5EFE7B3B4F60@AM6PR05MB4965.eurprd05.prod.outlook.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>, 
 <DB6PR04MB330353623A3745771C6A4CE8A6F60@DB6PR04MB3303.eurprd04.prod.outlook.com>,
 <AM6PR05MB4965843DFB609465E5EFE7B3B4F60@AM6PR05MB4965.eurprd05.prod.outlook.com>
Message-ID: <AM6PR05MB4965A9FC88141821E3FD817DB4F60@AM6PR05MB4965.eurprd05.prod.outlook.com>

Oops, message completed below...

Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Alex HighViz <alexhighviz at hotmail.com>
Sent: Tuesday, 17 March 2020, 06:29
To: Danilo da Rosa; gdal-dev at lists.osgeo.org; Joaquim Manuel Freire Luís
Subject: Re: [gdal-dev] Slope obtained with GDAL has weird lines

Another guess:

The vertical resolution of your DEM is low, say height is measured by 1m intervals, and your horizontal resolution is relatively high, say the pixel size is 25m. Then the minimum slope is 1/25. For many pixels in flatter area, this means adjacent pixels are of exactly same height, and for some it is the 1m step that is recorded as a contour line. Basically your data has the profile of a terraced rice paddy.

Could that be it? Alex

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Joaquim Manuel Freire Luís <jluis at ualg.pt>
Sent: Tuesday, March 17, 2020 12:32:13 AM
To: Danilo da Rosa <daniloide at gmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Slope obtained with GDAL has weird lines


Ah, let me guess. The dem grid was interpolated from contour lines and you seeing the contours again.



From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Danilo da Rosa
Sent: Monday, March 16, 2020 11:09 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Slope obtained with GDAL has weird lines



Hi!



This may be a very basic question, but I can't find the answer anyware.

I am working with this DEM obtained using terraincache<https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is WGS 84.

[DEM File in QGIS]<https://i.stack.imgur.com/Sp4Sg.jpg>

I ran this GDAL command to get the slope:

gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of the SRC)

The resulting image looks fine but it's not smooth, it has weird lines over it, like contour lines.

[Slope file on QGIS]<https://i.stack.imgur.com/POcHR.jpg>

You can download the DEM file here: https://gofile.io/?c=Du7WnM

Does anyone have an idea of how to solve it?

Thanks in advance for your help,

Danilo

P.S. I made this question here too: https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/691a0dc9/attachment.html>

From geodesy99 at gmail.com  Tue Mar 17 00:35:58 2020
From: geodesy99 at gmail.com (Michael Patrick)
Date: Tue, 17 Mar 2020 00:35:58 -0700
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <mailman.80563.1584426579.17185.gdal-dev@lists.osgeo.org>
References: <mailman.80563.1584426579.17185.gdal-dev@lists.osgeo.org>
Message-ID: <CAC54+E5dQs1yn7XFo5oySthNrOJymtD1ZDaqwbQoVXfKi0uNEQ@mail.gmail.com>

>
> *> I am working with this DEM obtained using terraincache
> <https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is
> WGS 84. ...   Does anyone have an idea of how to solve it? *
>

Get better elevation data ... you didn't mention where in the world you
are, but if you tell me, I can probably make some suggestions.



> *> Ah, let me guess. The dem grid was interpolated from contour lines and
> you seeing the contours again.*
>

Can confirm, and they used a fairly crappy interpolation method also, it's
not just terraced, it's wrinkled along the contour lines.

Michael Patrick
Data Ferret

<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
Virus-free.
www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/69992e47/attachment.html>

From mchapman at hyperacktive.com  Tue Mar 17 00:50:23 2020
From: mchapman at hyperacktive.com (Martin Chapman)
Date: Tue, 17 Mar 2020 01:50:23 -0600
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
Message-ID: <141CC492-7625-4550-AD20-84BCDA4AAD24@hyperacktive.com>

A slope map indicates the maximum rate of change between a pixel elevation value and its neighboring 8 pixels.  In other words, the output value for each pixel represents the steepest slope, or decent to the neighboring elevation values.  The output values are given as either percent slope or degrees from 0 (flat) to 90 (vertical) depending on the command line switches you choose.  

Therefore, the output raster values no longer represent elevation values from the input but rather slope (steepness) values and should be interpreted differently.  A common way to visually interpret them would be to color code them with a color ramp where each color in the ramp represents a range of degrees somewhere between 0 and 90.  That way a user can look at the image and quickly identify steep slopes versus not so steep slopes and flat areas.  To create a color ramp that matches changes in steepness you will need to use a statistical method on the slope values such as standard deviations or jenks natural breaks to group similar slope values together and where they change.  In other words, you will want your color ramp to change colors where flat areas start to get steeper.  I hope that makes sense.

Another way to use the results would be to write an algorithm to identify areas that are within a certain range of steepness so you could identify a good place to build a road or perhaps lay train tracks that must not exceed a certain steepness.  

I hope that helps.

Best regards,
Martin Chapman

> On Mar 16, 2020, at 5:09 PM, Danilo da Rosa <daniloide at gmail.com> wrote:
> 
> ﻿
> Hi!
> 
> This may be a very basic question, but I can't find the answer anyware.
> I am working with this DEM obtained using terraincache, it uses mapzen data. The SRC is WGS 84.
> 
> 
> 
> I ran this GDAL command to get the slope:
> 
> gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of the SRC)
> 
> The resulting image looks fine but it's not smooth, it has weird lines over it, like contour lines.
> 
> 
> 
> You can download the DEM file here: https://gofile.io/?c=Du7WnM
> 
> Does anyone have an idea of how to solve it? 
> 
> Thanks in advance for your help,
> 
> Danilo
> 
> P.S. I made this question here too: https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/a04201ac/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 17 01:30:05 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 17 Mar 2020 01:30:05 -0700 (MST)
Subject: [gdal-dev] ogr2ogr - double free or corruption (out)
In-Reply-To: <AM4PR05MB3282C26B24FC72AF1C24131787F90@AM4PR05MB3282.eurprd05.prod.outlook.com>
References: <AM4PR05MB3282C26B24FC72AF1C24131787F90@AM4PR05MB3282.eurprd05.prod.outlook.com>
Message-ID: <1584433805992-0.post@n6.nabble.com>

Hi,

I wonder if the issue we faced with MapCache is somehow related.
Unfortunately I do not know which versions we are running and if some
libraries have been updated lately.
https://lists.osgeo.org/pipermail/mapserver-dev/2020-March/016114.html

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sankin619 at gmail.com  Tue Mar 17 02:11:27 2020
From: sankin619 at gmail.com (san619)
Date: Tue, 17 Mar 2020 02:11:27 -0700 (MST)
Subject: [gdal-dev] Invalid dataset dimensions : -2147483648 x -2147483648
 Error While using gdalinfo
Message-ID: <1584436287741-0.post@n6.nabble.com>

Im getting a error message : "Invalid dataset dimensions : -2147483648 x
-2147483648" while using gdalinfo for a wmts url.What is the reason for the
error.How to resolve this.The WMTS Url used is :
"https://services.arcgisonline.com/arcgis/rest/services/Polar/Arctic_Ocean_Base/MapServer/WMTS/1.0.0/WMTSCapabilities.xml".



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 17 02:18:38 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 17 Mar 2020 02:18:38 -0700 (MST)
Subject: [gdal-dev] Invalid dataset dimensions : -2147483648 x
 -2147483648 Error While using gdalinfo
In-Reply-To: <1584436287741-0.post@n6.nabble.com>
References: <1584436287741-0.post@n6.nabble.com>
Message-ID: <1584436718386-0.post@n6.nabble.com>

Hi,

Works for me with GDAL GDAL 3.0.4

gdalinfo
https://services.arcgisonline.com/arcgis/rest/services/Polar/Arctic_Ocean_Base/MapServer/WMTS/1.0.0/WMTSCapabilities.xml
Driver: WMTS/OGC Web Map Tile Service
Files: none associated
Size is 1073741823, 1073741823
Coordinate System is:
PROJCRS["WGS 84 / EPSG Alaska Polar Stereographic",
...

-Jukka Rahkonen-



san619 wrote
> Im getting a error message : "Invalid dataset dimensions : -2147483648 x
> -2147483648" while using gdalinfo for a wmts url.What is the reason for
> the
> error.How to resolve this.The WMTS Url used is :
> "https://services.arcgisonline.com/arcgis/rest/services/Polar/Arctic_Ocean_Base/MapServer/WMTS/1.0.0/WMTSCapabilities.xml".
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sankin619 at gmail.com  Tue Mar 17 03:15:11 2020
From: sankin619 at gmail.com (san619)
Date: Tue, 17 Mar 2020 03:15:11 -0700 (MST)
Subject: [gdal-dev] Invalid dataset dimensions : -2147483648 x
 -2147483648 Error While using gdalinfo
In-Reply-To: <1584436718386-0.post@n6.nabble.com>
References: <1584436287741-0.post@n6.nabble.com>
 <1584436718386-0.post@n6.nabble.com>
Message-ID: <1584440111522-0.post@n6.nabble.com>

Thank You So much for the quick reply.I was using GDAL 2.3.2.When I updated
to GDAL 3.0.4 the issue is resolved.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sankin619 at gmail.com  Tue Mar 17 05:57:54 2020
From: sankin619 at gmail.com (san619)
Date: Tue, 17 Mar 2020 05:57:54 -0700 (MST)
Subject: [gdal-dev] Invalid dataset dimensions : -2147483648 x
 -2147483648 Error While using gdalinfo
In-Reply-To: <1584436718386-0.post@n6.nabble.com>
References: <1584436287741-0.post@n6.nabble.com>
 <1584436718386-0.post@n6.nabble.com>
Message-ID: <1584449874669-0.post@n6.nabble.com>

But in some cases im not getting the extent of the layer.What could be the
reason.I tried in both versions 2.3.2 and 3.0.4.But still same,extent is
empty in the output.

WMS layer :
http://services.ga.gov.au/gis/services/NEXIS_Agricultural_Exposure/MapServer/WMSServer?request=GetCapabilities&service=WMS

JSON output:
{
 
"description":"http:\/\/services.ga.gov.au\/gis\/services\/NEXIS_Agricultural_Exposure\/MapServer\/WMSServer?request=GetCapabilities&service=WMS",
  "driverShortName":"WMS",
  "driverLongName":"OGC Web Map Service",
  "files":[
  ],
  "size":[
    512,
    512
  ],
  "coordinateSystem":{
    "wkt":""
  },
  "metadata":{
    "SUBDATASETS":{
     
"SUBDATASET_1_NAME":"WMS:http:\/\/services.ga.gov.au\/gis\/services\/NEXIS_Agricultural_Exposure\/MapServer\/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=NEXIS_Agricultural_Exposure_LGA&SRS=EPSG:4326&BBOX=96.816941,-43.740510,159.109219,-9.142176",
      "SUBDATASET_1_DESC":"NEXIS Agricultural Exposure LGA",
     
"SUBDATASET_2_NAME":"WMS:http:\/\/services.ga.gov.au\/gis\/services\/NEXIS_Agricultural_Exposure\/MapServer\/WmsServer?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=NEXIS_Agricultural_Exposure_SA1&SRS=EPSG:4326&BBOX=96.816941,-43.740510,159.109219,-9.142176",
      "SUBDATASET_2_DESC":"NEXIS Agricultural Exposure SA1"
    }
  },
  "cornerCoordinates":{
    "upperLeft":[
      0.0,
      0.0
    ],
    "lowerLeft":[
      0.0,
      512.0
    ],
    "lowerRight":[
      512.0,
      512.0
    ],
    "upperRight":[
      512.0,
      0.0
    ],
    "center":[
      256.0,
      256.0
    ]
  },
  "extent":{
    "type":"Polygon",
    "coordinates":[
      [
      ]
    ]
  },
  "bands":[
  ]
}





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From muccigrosso at icloud.com  Tue Mar 17 07:46:22 2020
From: muccigrosso at icloud.com (John Muccigrosso)
Date: Tue, 17 Mar 2020 15:46:22 +0100
Subject: [gdal-dev] ogr2ogr problem with updated libproj
Message-ID: <1E07F22A-3F58-4F38-8DF8-0AFC8F8255F3@icloud.com>

I use homebrew to install both gdal2 and its dependencies, like osgeo-proj. This morning I updated the latter and started getting the following error from ogr2ogr:


	dyld: Library not loaded: /usr/local/opt/osgeo-proj/lib/libproj.15.dylib
	Referenced from: /usr/local/bin/ogr2ogr
	Reason: image not found


The relevant directory listing is this:

-r--r--r--   1  3172652 Mar 17 11:35 libproj.19.dylib
-r--r--r--   1  5447248 Mar 17 11:35 libproj.a
lrwxr-xr-x   1       16 Mar 17 11:35 libproj.dylib -> libproj.19.dylib
-rwxr-xr-x   1     1017 Mar 17 11:35 libproj.la
drwxr-xr-x   3       96 Mar 17 11:35 pkgconfig

This happened to me before and I filed a bug at osgeo here: https://github.com/OSGeo/homebrew-osgeo4mac/issues/174

The solution there was to remove and re-install gdal, which also worked this time.

Anyway, as I noted in that thread, it seems like this is something that is fixable (maybe by not referring to a specific version of the library? - out of my expertise here), so I thought I'd note it here.

Thanks.

John

From jerome.siot at mytimezero.com  Tue Mar 17 08:04:49 2020
From: jerome.siot at mytimezero.com (Jerome Siot)
Date: Tue, 17 Mar 2020 15:04:49 +0000
Subject: [gdal-dev] Building on windows
In-Reply-To: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
Message-ID: <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>

Hello,

  *   Be sure to launch a terminal by executing :


C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\Tools\LaunchDevCmd.bat


  *   Then , give the VS version in nmake command :

nmake /f makefile.vc MSVC_VER=1900

Hope this helps, Jérome

De : gdal-dev <gdal-dev-bounces at lists.osgeo.org> De la part de Darrel Maddy
Envoyé : Sunday, March 15, 2020 1:08 PM
À : 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Objet : [gdal-dev] Building on windows

I have recently switched back to windows for a specific project that uses the gdal library.  I am getting the following error on compilation of the VS project
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' : return code '0x2'

The cl.exe file is present in the directory (there are a number of similar messages that follow)  and I am unsure how to proceed. Any suggestions?

Thanks

Darrel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/845483fc/attachment.html>

From darrel.maddy at newcastle.ac.uk  Tue Mar 17 08:10:47 2020
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Tue, 17 Mar 2020 15:10:47 +0000
Subject: [gdal-dev] Building on windows
In-Reply-To: <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>
Message-ID: <DB7PR07MB4603B610523889054ED6E1FFC1F60@DB7PR07MB4603.eurprd07.prod.outlook.com>

Dear Jérome

Many thanks for trying to help. Alas it is giving the same errors in the Developer Command Prompt window.

Darrel



From: Jerome Siot <jerome.siot at mytimezero.com>
Sent: 17 March 2020 15:05
To: Darrel Maddy <darrel.maddy at newcastle.ac.uk>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Subject: RE: Building on windows

Hello,

  *   Be sure to launch a terminal by executing :


C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\Tools\LaunchDevCmd.bat


  *   Then , give the VS version in nmake command :

nmake /f makefile.vc MSVC_VER=1900

Hope this helps, Jérome

De : gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> De la part de Darrel Maddy
Envoyé : Sunday, March 15, 2020 1:08 PM
À : 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Objet : [gdal-dev] Building on windows

I have recently switched back to windows for a specific project that uses the gdal library.  I am getting the following error on compilation of the VS project
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' : return code '0x2'

The cl.exe file is present in the directory (there are a number of similar messages that follow)  and I am unsure how to proceed. Any suggestions?

Thanks

Darrel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/e80b95c7/attachment-0001.html>

From even.rouault at spatialys.com  Tue Mar 17 08:30:41 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Mar 2020 16:30:41 +0100
Subject: [gdal-dev] Invalid dataset dimensions : -2147483648 x
	-2147483648 Error While using gdalinfo
In-Reply-To: <1584449874669-0.post@n6.nabble.com>
References: <1584436287741-0.post@n6.nabble.com>
 <1584436718386-0.post@n6.nabble.com> <1584449874669-0.post@n6.nabble.com>
Message-ID: <13318965.n10Pn2Oahf@even-i700>

On mardi 17 mars 2020 05:57:54 CET san619 wrote:
> But in some cases im not getting the extent of the layer.What could be the
> reason.I tried in both versions 2.3.2 and 3.0.4.But still same,extent is
> empty in the output.
> 
> WMS layer :
> http://services.ga.gov.au/gis/services/NEXIS_Agricultural_Exposure/MapServer
> /WMSServer?request=GetCapabilities&service=WMS
> 
> JSON output:

This service exposes 2 WMS layers, which are reported as 2 GDAL subdatasets by 
the top-level GDAL dataset. So you need to open then the dataset names pointed 
by SUBDATASET_1_NAME or SUBDATASET_2_NAME to get datasets with raster content.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From xbartolone at gmail.com  Tue Mar 17 12:52:07 2020
From: xbartolone at gmail.com (Francesco Bartoli)
Date: Tue, 17 Mar 2020 20:52:07 +0100
Subject: [gdal-dev] Loading GeoJSON to ES 7
In-Reply-To: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
References: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
Message-ID: <ba043ec0-7d40-4f57-bec8-4153946370c2@Spark>

Hi All,

I'm trying to investigate this issue https://github.com/geopython/pygeoapi/issues/379 in the pygeoapi project. I'm using an instance of ES7 and if I understand well the command below:

docker run --rm --network=host -u $(id -u ${USER}):$(id -g ${USER}) \
-v $(pwd):/data \
-e OGR_GEOJSON_MAX_OBJ_SIZE=500MB \
osgeo/gdal:alpine-small-latest \
ogr2ogr -lco INDEX_NAME=pygeoapi ES:localhost:9200 /data/tests/data/ne_110m_populated_places_simple.geojson

should create a Feature object in the index or am I wrong? Actually I don't have a geojson object:

{
    "took": 3,
    "timed_out": false,
    "_shards": {
        "total": 1,
        "successful": 1,
        "skipped": 0,
        "failed": 0
    },
    "hits": {
        "total": {
            "value": 243,
            "relation": "eq"
        },
        "max_score": 1.0,
        "hits": [
            {
                "_index": "pygeoapi",
                "_type": "_doc",
                "_id": "EfwD6nAB8v4-ZVfFzLGS",
                "_score": 1.0,
                "_source": {
                    "geonameid": 6691831.0,
                    "geometry": {
                        "type": "POINT",
                        "coordinates": [
                            12.453386545,
                            41.90328218
                        ]
                    },
                    "scalerank": 8,
                    "natscale": 10,
                    "labelrank": 3,
                    "featurecla": "Admin-0 capital",
                    "name": "Vatican City",
                    "namepar": null,
                    "namealt": null,
                    "diffascii": 0,
                    "nameascii": "Vatican City",
                    "adm0cap": 1.0,
                    "capalt": null,
                    "capin": null,
                    "worldcity": 1.0,
                    "megacity": 0,
                    "sov0name": "Vatican (Holy Sea)",
                    "sov_a3": "VAT",
                    "adm0name": "Vatican (Holy See)",
                    "adm0_a3": "VAT",
                    "adm1name": "Lazio",
                    "iso_a2": "VA",
                    "note": null,
                    "latitude": 41.900012226400001,
                    "longitude": 12.4478083889,
                    "changed": 4.0,
                    "namediff": 0,
                    "diffnote": "Changed scale rank.",
                    "pop_max": 832,
                    "pop_min": 832,
                    "pop_other": 562430,
                    "rank_max": 2,
                    "rank_min": 2,
                    "meganame": null,
                    "ls_name": "Vatican City",
                    "ls_match": 1,
                    "checkme": 0,
                    "min_zoom": 7.0
                }
            },
...
}

Thanks,
Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/09a216b3/attachment-0001.html>

From daniloide at gmail.com  Tue Mar 17 13:24:33 2020
From: daniloide at gmail.com (Danilo da Rosa)
Date: Tue, 17 Mar 2020 17:24:33 -0300
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <141CC492-7625-4550-AD20-84BCDA4AAD24@hyperacktive.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
 <141CC492-7625-4550-AD20-84BCDA4AAD24@hyperacktive.com>
Message-ID: <CAA3XD6a3DWMUNGSn4zpDkcfTnhZYOsqJK=PGgqxNBKbfhwt5qw@mail.gmail.com>

Thanks for your answers Joaquim, Alex and Martin!

I think the problem is height is measured by 1m intervals, thatś why I see
1 meter contour lines in the slope result. The dem grid was not
interpolated from contours, at least not by me, the data comes from Mapzen
terrain tiles, I don't know exactly how they are producing it.

Do you think it would be a good idea to do some kind of interpolation to
smooth the DEM file or the slope file? Do you have any recommendations on
how to do that using gdal? The idea is to use the gdaldem color-relief
command to generate a coloured and easy to read map. The problem is that
this lines makes the map more difficult to understand, which is a priority
in this case.

Thanks again!
Danilo


El mar., 17 mar. 2020 a las 4:50, Martin Chapman (<mchapman at hyperacktive.com>)
escribió:

> A slope map indicates the maximum rate of change between a pixel elevation
> value and its neighboring 8 pixels.  In other words, the output value for
> each pixel represents the steepest slope, or decent to the neighboring
> elevation values.  The output values are given as either percent slope or
> degrees from 0 (flat) to 90 (vertical) depending on the command line
> switches you choose.
>
> Therefore, the output raster values no longer represent elevation values
> from the input but rather slope (steepness) values and should be
> interpreted differently.  A common way to visually interpret them would be
> to color code them with a color ramp where each color in the ramp
> represents a range of degrees somewhere between 0 and 90.  That way a user
> can look at the image and quickly identify steep slopes versus not so steep
> slopes and flat areas.  To create a color ramp that matches changes in
> steepness you will need to use a statistical method on the slope values
> such as standard deviations or jenks natural breaks to group similar slope
> values together and where they change.  In other words, you will want your
> color ramp to change colors where flat areas start to get steeper.  I hope
> that makes sense.
>
> Another way to use the results would be to write an algorithm to identify
> areas that are within a certain range of steepness so you could identify a
> good place to build a road or perhaps lay train tracks that must not exceed
> a certain steepness.
>
> I hope that helps.
>
> Best regards,
> Martin Chapman
>
> On Mar 16, 2020, at 5:09 PM, Danilo da Rosa <daniloide at gmail.com> wrote:
>
> ﻿
> Hi!
>
> This may be a very basic question, but I can't find the answer anyware.
>
> I am working with this DEM obtained using terraincache
> <https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is
> WGS 84.
>
> [image: DEM File in QGIS] <https://i.stack.imgur.com/Sp4Sg.jpg>
>
> I ran this GDAL command to get the slope:
>
> gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of
> the SRC)
>
> The resulting image looks fine but it's not smooth, it has weird lines
> over it, like contour lines.
>
> [image: Slope file on QGIS] <https://i.stack.imgur.com/POcHR.jpg>
>
> You can download the DEM file here: https://gofile.io/?c=Du7WnM
>
> Does anyone have an idea of how to solve it?
>
> Thanks in advance for your help,
>
> Danilo
>
> P.S. I made this question here too:
> https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/f3b64231/attachment.html>

From even.rouault at spatialys.com  Tue Mar 17 14:13:54 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Mar 2020 22:13:54 +0100
Subject: [gdal-dev] Loading GeoJSON to ES 7
In-Reply-To: <ba043ec0-7d40-4f57-bec8-4153946370c2@Spark>
References: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
 <ba043ec0-7d40-4f57-bec8-4153946370c2@Spark>
Message-ID: <3494227.Iqj4XZXgIA@even-i700>

Francesco,

The behaviour in ES7 has been changed. Now only flat structure is supported. 
This was discussed in https://github.com/OSGeo/gdal/issues/1246 and I've just 
made the doc of the driver clearer:

-  **MAPPING_NAME=**\ =name. (Elasticsearch < 7) Name of the mapping type 
within the index.
   By default, the mapping name is "FeatureCollection" and the documents
   will be written as GeoJSON Feature objects. If another mapping name
   is chosen, a more "flat" structure will be used.  This option is
   ignored when converting to Elasticsearch >=7 (see `Removal of mapping types 
<https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html>`__).
   With ElasticSearch 7 or later, a "flat" structure is always used.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at stripfamily.net  Tue Mar 17 15:22:34 2020
From: gdal at stripfamily.net (David Strip)
Date: Tue, 17 Mar 2020 16:22:34 -0600
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <CAA3XD6a3DWMUNGSn4zpDkcfTnhZYOsqJK=PGgqxNBKbfhwt5qw@mail.gmail.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
 <141CC492-7625-4550-AD20-84BCDA4AAD24@hyperacktive.com>
 <CAA3XD6a3DWMUNGSn4zpDkcfTnhZYOsqJK=PGgqxNBKbfhwt5qw@mail.gmail.com>
Message-ID: <ab9f6ec4-7d09-ffe4-6252-61958bd12cf6@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/1de84e1a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: slope.JPG
Type: image/jpeg
Size: 46373 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/1de84e1a/attachment-0001.jpe>

From mchapman at hyperacktive.com  Tue Mar 17 15:50:03 2020
From: mchapman at hyperacktive.com (Martin Chapman)
Date: Tue, 17 Mar 2020 16:50:03 -0600
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <CAA3XD6a3DWMUNGSn4zpDkcfTnhZYOsqJK=PGgqxNBKbfhwt5qw@mail.gmail.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
 <141CC492-7625-4550-AD20-84BCDA4AAD24@hyperacktive.com>
 <CAA3XD6a3DWMUNGSn4zpDkcfTnhZYOsqJK=PGgqxNBKbfhwt5qw@mail.gmail.com>
Message-ID: <012901d5fcae$65d62620$31827260$@hyperacktive.com>

Danilo,

 

Resampling only occurs when an image is being resized or warped.  If the dimensions are not changing then resampling is not really appropriate.  If you do need to resample, the utilities called gdal_translate.exe and gdalwarp.exe may be used depending on your needs.  Other utilities also provide resample options but they may not fit your purposes.

 

As a general rule you should NOT use nearest neighbor to resample elevation (floating point) data because it can drastically alter the elevation values from the original values and creates a staircase like effect in the output imagery.  Use something like cubic or bilinear.  That said, if the input data is bad then nothing you do will fix it.  Maybe look on the web for the USGS 3Dep elevation data if you are in the USA or SRTM 1 arc second data for continuous worldwide coverage.  Maybe the source data you are using is just bad or has been altered.

 

You should definitely NOT resample the slope output.  I think your source data may just be bad but it’s hard to know.  Download other sources and compare the output.  If the output looks similar then review your code or command line options.

 

Best regards,

Martin Chapman

 

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Danilo da Rosa
Sent: Tuesday, March 17, 2020 2:25 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Slope obtained with GDAL has weird lines

 

Thanks for your answers Joaquim, Alex and Martin!

 

I think the problem is height is measured by 1m intervals, thatś why I see 1 meter contour lines in the slope result. The dem grid was not interpolated from contours, at least not by me, the data comes from Mapzen terrain tiles, I don't know exactly how they are producing it.

 

Do you think it would be a good idea to do some kind of interpolation to smooth the DEM file or the slope file? Do you have any recommendations on how to do that using gdal? The idea is to use the gdaldem color-relief command to generate a coloured and easy to read map. The problem is that this lines makes the map more difficult to understand, which is a priority in this case.

 

Thanks again!

Danilo

 

 

El mar., 17 mar. 2020 a las 4:50, Martin Chapman (<mchapman at hyperacktive.com>) escribió:

A slope map indicates the maximum rate of change between a pixel elevation value and its neighboring 8 pixels.  In other words, the output value for each pixel represents the steepest slope, or decent to the neighboring elevation values.  The output values are given as either percent slope or degrees from 0 (flat) to 90 (vertical) depending on the command line switches you choose.  

 

Therefore, the output raster values no longer represent elevation values from the input but rather slope (steepness) values and should be interpreted differently.  A common way to visually interpret them would be to color code them with a color ramp where each color in the ramp represents a range of degrees somewhere between 0 and 90.  That way a user can look at the image and quickly identify steep slopes versus not so steep slopes and flat areas.  To create a color ramp that matches changes in steepness you will need to use a statistical method on the slope values such as standard deviations or jenks natural breaks to group similar slope values together and where they change.  In other words, you will want your color ramp to change colors where flat areas start to get steeper.  I hope that makes sense.

 

Another way to use the results would be to write an algorithm to identify areas that are within a certain range of steepness so you could identify a good place to build a road or perhaps lay train tracks that must not exceed a certain steepness.  

 

I hope that helps.

 

Best regards,

Martin Chapman





On Mar 16, 2020, at 5:09 PM, Danilo da Rosa <daniloide at gmail.com> wrote:

﻿

Hi!

 

This may be a very basic question, but I can't find the answer anyware.

I am working with this DEM obtained using terraincache <https://pypi.org/project/terraincache/> , it uses mapzen data. The SRC is WGS 84.

 <https://i.stack.imgur.com/Sp4Sg.jpg> DEM File in QGIS

I ran this GDAL command to get the slope:

gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of the SRC)

The resulting image looks fine but it's not smooth, it has weird lines over it, like contour lines.

 <https://i.stack.imgur.com/POcHR.jpg> Slope file on QGIS

You can download the DEM file here: https://gofile.io/?c=Du7WnM

Does anyone have an idea of how to solve it? 

Thanks in advance for your help,

Danilo

P.S. I made this question here too: https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200317/21d26ae8/attachment.html>

From xbartolone at gmail.com  Wed Mar 18 01:05:39 2020
From: xbartolone at gmail.com (Francesco Bartoli)
Date: Wed, 18 Mar 2020 09:05:39 +0100
Subject: [gdal-dev] Loading GeoJSON to ES 7
In-Reply-To: <3494227.Iqj4XZXgIA@even-i700>
References: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
 <ba043ec0-7d40-4f57-bec8-4153946370c2@Spark>
 <3494227.Iqj4XZXgIA@even-i700>
Message-ID: <c82aec18-d940-451f-9459-9a02a837a869@Spark>

Thanks Even, I was misleading the behavior. However, is there a way to ingest and set the value of a unique identifier, for instance geonameid, in the key _id of each item of the index?

Francesco
Il 17 mar 2020, 22:13 +0100, Even Rouault <even.rouault at spatialys.com>, ha scritto:
> Francesco,
>
> The behaviour in ES7 has been changed. Now only flat structure is supported.
> This was discussed in https://github.com/OSGeo/gdal/issues/1246 and I've just
> made the doc of the driver clearer:
>
> - **MAPPING_NAME=**\ =name. (Elasticsearch < 7) Name of the mapping type
> within the index.
> By default, the mapping name is "FeatureCollection" and the documents
> will be written as GeoJSON Feature objects. If another mapping name
> is chosen, a more "flat" structure will be used. This option is
> ignored when converting to Elasticsearch >=7 (see `Removal of mapping types
> <https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html>`__).
> With ElasticSearch 7 or later, a "flat" structure is always used.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200318/9fe5f9ff/attachment.html>

From even.rouault at spatialys.com  Wed Mar 18 02:36:28 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Mar 2020 10:36:28 +0100
Subject: [gdal-dev] Loading GeoJSON to ES 7
In-Reply-To: <c82aec18-d940-451f-9459-9a02a837a869@Spark>
References: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
 <3494227.Iqj4XZXgIA@even-i700> <c82aec18-d940-451f-9459-9a02a837a869@Spark>
Message-ID: <6834029.zJZZMlajOS@even-i700>

On mercredi 18 mars 2020 09:05:39 CET Francesco Bartoli wrote:
> Thanks Even, I was misleading the behavior. However, is there a way to
> ingest and set the value of a unique identifier, for instance geonameid, in
> the key _id of each item of the index?

Yes, you need to set the "_id" field of the feature before calling 
CreateFeature()

Even

> 
> Francesco
> 
> Il 17 mar 2020, 22:13 +0100, Even Rouault <even.rouault at spatialys.com>, ha 
scritto:
> > Francesco,
> > 
> > The behaviour in ES7 has been changed. Now only flat structure is
> > supported. This was discussed in
> > https://github.com/OSGeo/gdal/issues/1246 and I've just made the doc of
> > the driver clearer:
> > 
> > - **MAPPING_NAME=**\ =name. (Elasticsearch < 7) Name of the mapping type
> > within the index.
> > By default, the mapping name is "FeatureCollection" and the documents
> > will be written as GeoJSON Feature objects. If another mapping name
> > is chosen, a more "flat" structure will be used. This option is
> > ignored when converting to Elasticsearch >=7 (see `Removal of mapping
> > types
> > <https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-o
> > f-types.html>`__). With ElasticSearch 7 or later, a "flat" structure is
> > always used.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From xbartolone at gmail.com  Wed Mar 18 02:49:48 2020
From: xbartolone at gmail.com (Francesco Bartoli)
Date: Wed, 18 Mar 2020 10:49:48 +0100
Subject: [gdal-dev] Loading GeoJSON to ES 7
In-Reply-To: <6834029.zJZZMlajOS@even-i700>
References: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
 <3494227.Iqj4XZXgIA@even-i700>
 <c82aec18-d940-451f-9459-9a02a837a869@Spark>
 <6834029.zJZZMlajOS@even-i700>
Message-ID: <101d9a42-705d-4a55-bba1-fa5e674293b7@Spark>

Does it mean that can be done only programmatically? How would it be translated into a -lco of ogr2ogr?
Il 18 mar 2020, 10:36 +0100, Even Rouault <even.rouault at spatialys.com>, ha scritto:
> On mercredi 18 mars 2020 09:05:39 CET Francesco Bartoli wrote:
> > Thanks Even, I was misleading the behavior. However, is there a way to
> > ingest and set the value of a unique identifier, for instance geonameid, in
> > the key _id of each item of the index?
>
> Yes, you need to set the "_id" field of the feature before calling
> CreateFeature()
>
> Even
>
> >
> > Francesco
> >
> > Il 17 mar 2020, 22:13 +0100, Even Rouault <even.rouault at spatialys.com>, ha
> scritto:
> > > Francesco,
> > >
> > > The behaviour in ES7 has been changed. Now only flat structure is
> > > supported. This was discussed in
> > > https://github.com/OSGeo/gdal/issues/1246 and I've just made the doc of
> > > the driver clearer:
> > >
> > > - **MAPPING_NAME=**\ =name. (Elasticsearch < 7) Name of the mapping type
> > > within the index.
> > > By default, the mapping name is "FeatureCollection" and the documents
> > > will be written as GeoJSON Feature objects. If another mapping name
> > > is chosen, a more "flat" structure will be used. This option is
> > > ignored when converting to Elasticsearch >=7 (see `Removal of mapping
> > > types
> > > <https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-o
> > > f-types.html>`__). With ElasticSearch 7 or later, a "flat" structure is
> > > always used.
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200318/b33ca5e5/attachment-0001.html>

From even.rouault at spatialys.com  Wed Mar 18 03:27:38 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Mar 2020 11:27:38 +0100
Subject: [gdal-dev] Loading GeoJSON to ES 7
In-Reply-To: <101d9a42-705d-4a55-bba1-fa5e674293b7@Spark>
References: <0ce7941e-fcc0-42ae-bf25-deb6d8da217b@Spark>
 <6834029.zJZZMlajOS@even-i700> <101d9a42-705d-4a55-bba1-fa5e674293b7@Spark>
Message-ID: <4333493.93e2neSplE@even-i700>

On mercredi 18 mars 2020 10:49:48 CET Francesco Bartoli wrote:
> Does it mean that can be done only programmatically? How would it be
> translated into a -lco of ogr2ogr?

With ogr2ogr, you can do something like

ogr2ogr [...] {src_ds_name} -sql "select geonameid as _id, ... from ..."

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Robert.Danziger at eui.eu  Wed Mar 18 08:05:28 2020
From: Robert.Danziger at eui.eu (Danziger, Robert C.)
Date: Wed, 18 Mar 2020 15:05:28 +0000
Subject: [gdal-dev] ogr2ogr - double free or corruption (out)
In-Reply-To: <r4oht3$39mj$1@ciao.gmane.io>
References: <AM4PR05MB3282C26B24FC72AF1C24131787F90@AM4PR05MB3282.eurprd05.prod.outlook.com>,
 <r4oht3$39mj$1@ciao.gmane.io>
Message-ID: <AM4PR05MB328297842B6E9759F66DCFD587F70@AM4PR05MB3282.eurprd05.prod.outlook.com>

Thank you. At this point I have decided to do nothing and will wait to see if a future update will resolve the problem. As I mentioned, despite the error, the calls to ‚ogr2ogr‘ do produce the results I need (GeoJSON outputs from Postgresql) and otherwise seem to have no side effects (except a dump file). Once I move to the next QGIS LTR (I am at 3.4) compatible with the Lizmap plugin I use, we‘ll see what happens.
Best regards.

Téléchargez Outlook pour iOS<https://aka.ms/o0ukef>
________________________________
De : gdal-dev <gdal-dev-bounces at lists.osgeo.org> de la part de Andre Joost <andre+joost at nurfuerspam.de>
Envoyé : Monday, March 16, 2020 7:19:32 PM
À : gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Objet : Re: [gdal-dev] ogr2ogr - double free or corruption (out)

Am 16.03.20 um 13:54 schrieb Danziger, Robert C.:
> Ubuntu 18.04 (LTR). since (apt) upgrade 3-4 days ago every invocation
> of 'ogr2org' (GDAL 3.0.2) generates the following messages:
> =============================== "Double free or corruption (out)"
> "Aborted (core dumped)"

I assume you are using GDAL from the ubuntugis PPA.

There, GDAL has been upgraded to 3.0.4 on 2020-03-11.

Try to update. If the error persists, you may downgrade GDAL to the
version 2.2.3 from the main ubuntu repo.

For QGIS, you might have to wait for the next point release to get it
working with GDAL 3.0.4.

HTH,
Andre Joost

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=02%7C01%7Crobert.danziger%40eui.eu%7Ce5f867496b45492b5c6d08d7c9dbe84d%7Cd3f434ee643c409f94aa6db2f23545ce%7C0%7C1%7C637199818640478213&amp;sdata=88uEN%2Fj6uIn2WxO%2BxRP2qN4lUkdgzoLvgnvmmyrvCHI%3D&amp;reserved=0

The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review, retransmission, dissemination, distribution, forwarding, or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited without the express permission of the sender. If you received this communication in error, please contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200318/d9e3ba16/attachment.html>

From sean at mapbox.com  Wed Mar 18 17:27:25 2020
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 18 Mar 2020 18:27:25 -0600
Subject: [gdal-dev] vsis3 in TMS ServerUrl?
Message-ID: <CADPhZXyMjO+VySRBwrxr+Mef2s1_8kCdEom3wh31XtzPa-nU+w@mail.gmail.com>

Hi all,

I hope you and yours are well in these times.

I'm wondering how close we are to having support for vsis3 URLs in a TMS
ServerUrl and if it would be worth doing the work to add it.

The issue is that HTTPS requests for non-public S3 objects have to be (as I
understand it) signed per object. Thus there is no single set of
authentication headers we can use for all objects covered by a ServerUrl
template like this:

      <ServerUrl>
https://my-private-bucket.s3.amazonaws.com/tiles/${z}/${x}/${y}.png
?</ServerUrl>

GDAL's vsis3 handler takes care of the signing for single URLs and,
syntactically at least, it looks like it would be possible to support the
following


<ServerUrl>/vsis3/my-private-bucket/tiles/${z}/${x}/${y}.png?</ServerUrl>

with the vsis3 handler doing the signing for each individual HTTPS request
that is made.

Does this look useful to anyone else? Have any of you found a workaround
that is nearly as good?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200318/fd9b74aa/attachment.html>

From even.rouault at spatialys.com  Thu Mar 19 03:19:47 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Mar 2020 11:19:47 +0100
Subject: [gdal-dev] vsis3 in TMS ServerUrl?
In-Reply-To: <CADPhZXyMjO+VySRBwrxr+Mef2s1_8kCdEom3wh31XtzPa-nU+w@mail.gmail.com>
References: <CADPhZXyMjO+VySRBwrxr+Mef2s1_8kCdEom3wh31XtzPa-nU+w@mail.gmail.com>
Message-ID: <3411954.ZDirD2ooSN@even-i700>

On mercredi 18 mars 2020 18:27:25 CET Sean Gillies wrote:
> Hi all,
> 
> I hope you and yours are well in these times.
> 
> I'm wondering how close we are to having support for vsis3 URLs in a TMS
> ServerUrl and if it would be worth doing the work to add it.
> 
> The issue is that HTTPS requests for non-public S3 objects have to be (as I
> understand it) signed per object. Thus there is no single set of
> authentication headers we can use for all objects covered by a ServerUrl
> template like this:
> 
>       <ServerUrl>
> https://my-private-bucket.s3.amazonaws.com/tiles/${z}/${x}/${y}.png
> ?</ServerUrl>
> 
> GDAL's vsis3 handler takes care of the signing for single URLs and,
> syntactically at least, it looks like it would be possible to support the
> following
> 
> 
> <ServerUrl>/vsis3/my-private-bucket/tiles/${z}/${x}/${y}.png?</ServerUrl>
> 
> with the vsis3 handler doing the signing for each individual HTTPS request
> that is made.
> 
> Does this look useful to anyone else? Have any of you found a workaround
> that is nearly as good?

Sean,

The WMS driver proably pre-dates /vsicurl/ and its children file systems, so 
it uses libcurl directly (and, anyway, it uses the curl "multi" API so as to 
be able to spawn simultaneous tile downloads, which cannot be done with /
vsicurl/ is the like). But a not-so-hard solution would be to do a little 
patching in the WMS driver to use the VSIGetSignedURL() function to transform 
a /vsis3/ filename into a signed URL that can be then fed to the existing 
download logic of the WMS driver. 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aborruso at gmail.com  Thu Mar 19 07:51:26 2020
From: aborruso at gmail.com (aborruso)
Date: Thu, 19 Mar 2020 07:51:26 -0700 (MST)
Subject: [gdal-dev] Compiling gdal 2.4.4: "fatal error: mysql.h: No such
 file or directory"
Message-ID: <1584629486295-0.post@n6.nabble.com>

Hi,
I'm building gdal 2.4.4 on CentOS Linux release 7.7.1908.

When I run "./configure --with-mysql=/usr/bin/mysql" I have no error.

Than when I run make I have

"make[3]: Entering directory
`/var/regsic/apps/gdal-2.4.4/ogr/ogrsf_frmts/mysql'
/bin/sh /var/regsic/apps/gdal-2.4.4/libtool --mode=compile --silent
--tag=CXX g++ -std=c++11 -I/var/regsic/apps/gdal-2.4.4/port
-I/var/regsic/apps/gdal-2.4.4/gcore -I/var/regsic/apps/gdal-2.4.4/alg
-I/var/regsic/apps/gdal-2.4.4/ogr
-I/var/regsic/apps/gdal-2.4.4/ogr/ogrsf_frmts
-I/var/regsic/apps/gdal-2.4.4/gnm -I/var/regsic/apps/gdal-2.4.4/apps
-DHAVE_AVX_AT_COMPILE_TIME -DHAVE_SSSE3_AT_COMPILE_TIME
-DHAVE_SSE_AT_COMPILE_TIME -g -O2  -Wall -Wextra -Winit-self
-Wunused-parameter -Wformat -Werror=format-security -Wno-format-nonliteral
-Wlogical-op -Wshadow -Werror=vla -Wmissing-declarations -Wnon-virtual-dtor
-Woverloaded-virtual -fno-operator-names -Wzero-as-null-pointer-constant 
-I.. -I../..   -DGNM_ENABLED -I/var/regsic/apps/gdal-2.4.4/port 
-DGDAL_COMPILATION -c -o ../o/ogrmysqldriver.lo ogrmysqldriver.cpp
In file included from ogrmysqldriver.cpp:29:0:
ogr_mysql.h:47:19: fatal error: mysql.h: No such file or directory"

"mysql.h" is in "/usr/include/mysql/mysql.h" and I have installed
mariadb-devel.

How to solve it?

Thank you



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sebastic at xs4all.nl  Thu Mar 19 08:00:02 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 19 Mar 2020 16:00:02 +0100
Subject: [gdal-dev] Compiling gdal 2.4.4: "fatal error: mysql.h: No such
 file or directory"
In-Reply-To: <1584629486295-0.post@n6.nabble.com>
References: <1584629486295-0.post@n6.nabble.com>
Message-ID: <29d85409-200f-b7ad-bc4c-8bdc23f67078@xs4all.nl>

On 3/19/20 3:51 PM, aborruso wrote:
> When I run "./configure --with-mysql=/usr/bin/mysql" I have no error.

You need to supply the path to mysql-config:

 --with-mysql=ARG Include MySQL (ARG=path to mysql_config) [default=no]

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From aborruso at gmail.com  Thu Mar 19 08:07:11 2020
From: aborruso at gmail.com (aborruso)
Date: Thu, 19 Mar 2020 08:07:11 -0700 (MST)
Subject: [gdal-dev] Compiling gdal 2.4.4: "fatal error: mysql.h: No such
 file or directory"
In-Reply-To: <29d85409-200f-b7ad-bc4c-8bdc23f67078@xs4all.nl>
References: <1584629486295-0.post@n6.nabble.com>
 <29d85409-200f-b7ad-bc4c-8bdc23f67078@xs4all.nl>
Message-ID: <1584630431614-0.post@n6.nabble.com>

Thank you very much Sebastiaan, it works



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From scott.stanie at gmail.com  Thu Mar 19 09:23:05 2020
From: scott.stanie at gmail.com (Scott Staniewicz)
Date: Thu, 19 Mar 2020 11:23:05 -0500
Subject: [gdal-dev] gdalbuildvrt -separate from list of files with two bands
Message-ID: <CAN4_TO9zonipNA+eZGzRqZiNgywtta66LXHKjCjo1-DaMvF+jQ@mail.gmail.com>

Hi, I'd like to combine a large list of raster files (each of which has two
bands) into one .vrt, where each band of the VRT would have the 2nd band
from each file. I thought that the "-b 2" option , but doing

gdalbuildvrt   -b  2  -separate  outvrt.vrt  *two2band_inputs.tif

just gives the warning that "... _____ has 2 bands. Only the first one will
be taken into account in the -separate case". I see that the code seems to
be not using the -b band option here, and just taking band one:
https://github.com/OSGeo/gdal/blob/master/gdal/apps/gdalbuildvrt_lib.cpp#L598-L603

Is there any way to do what I'm attempting? Is the -b option used for some
other reason in gdalbuildvrt?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200319/5e7844af/attachment.html>

From mikeucfl at gmail.com  Fri Mar 20 14:18:33 2020
From: mikeucfl at gmail.com (Mike)
Date: Fri, 20 Mar 2020 17:18:33 -0400
Subject: [gdal-dev] Adding datasets to VRT at runtime
Message-ID: <CAH4n74S7=rO4YZv2DdqPkYUawnn4sY+7zFt8awWD_hcgO9Ygdg@mail.gmail.com>

Currently I have a workflow which uses GDALBuildVRT (in C++) to create a
dataset with multiple geotiffs. I'm trying now to figure out if after this
VRT dataset was created, is there a way to add an additional dataset
without having to call GDALBuildVRT again?

The main use case for this is I'm that loading geotiffs based on a paging
system, and I'd like to be able to efficiently handle adding these new
datasets. Any suggestions for where to look or maybe a different method is
appreciated too.

Thanks,
Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200320/9669e6f8/attachment.html>

From even.rouault at spatialys.com  Sat Mar 21 02:46:54 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Mar 2020 10:46:54 +0100
Subject: [gdal-dev] Adding datasets to VRT at runtime
In-Reply-To: <CAH4n74S7=rO4YZv2DdqPkYUawnn4sY+7zFt8awWD_hcgO9Ygdg@mail.gmail.com>
References: <CAH4n74S7=rO4YZv2DdqPkYUawnn4sY+7zFt8awWD_hcgO9Ygdg@mail.gmail.com>
Message-ID: <51126248.QHtolHH4BV@even-i700>

On vendredi 20 mars 2020 17:18:33 CET Mike wrote:
> Currently I have a workflow which uses GDALBuildVRT (in C++) to create a
> dataset with multiple geotiffs. I'm trying now to figure out if after this
> VRT dataset was created, is there a way to add an additional dataset
> without having to call GDALBuildVRT again?
> 
> The main use case for this is I'm that loading geotiffs based on a paging
> system, and I'd like to be able to efficiently handle adding these new
> datasets. Any suggestions for where to look or maybe a different method is
> appreciated too.

Mie,

https://gdal.org/drivers/raster/vrt.html#creation-of-vrt-datasets gives an 
example on how to add a new source with
oBand->SetMetadataItem( "source_0", szFilterSourceXML, "vrt_sources" );
You'd need to adapt the XML to use a SimpleSource or ComplexSource.

Otherwise a VRT is just a XML file, so you can also use your favorite XML 
editing library
(or GDAL's minixml : https://gdal.org/doxygen/cpl__minixml_8h.html ) to edit 
it as you wish.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From daniloide at gmail.com  Sat Mar 21 16:57:32 2020
From: daniloide at gmail.com (Danilo da Rosa)
Date: Sat, 21 Mar 2020 20:57:32 -0300
Subject: [gdal-dev] Slope obtained with GDAL has weird lines
In-Reply-To: <012901d5fcae$65d62620$31827260$@hyperacktive.com>
References: <CAA3XD6YCi7FkMcMGY=0uBVgqU+GZpoghL6NV=F_+U_+azUTkXA@mail.gmail.com>
 <141CC492-7625-4550-AD20-84BCDA4AAD24@hyperacktive.com>
 <CAA3XD6a3DWMUNGSn4zpDkcfTnhZYOsqJK=PGgqxNBKbfhwt5qw@mail.gmail.com>
 <012901d5fcae$65d62620$31827260$@hyperacktive.com>
Message-ID: <CAA3XD6bKGchF+cs1ejEFbgdsePWkaB3bF=_xv0Yf5kEGbJDZPQ@mail.gmail.com>

Thanks for your answers Martin and David.

Yes, you are right, I will use an other data source without that problem.
An other user sent me an article about *Release of NASADEM Data Products*
at *https://lpdaac.usgs.gov/news/release-nasadem-data-products/.*
<https://lpdaac.usgs.gov/news/release-nasadem-data-products/>

I think that using this data would be the best option.

Thanks again!
Danilo

El mar., 17 mar. 2020 a las 19:50, Martin Chapman (<
mchapman at hyperacktive.com>) escribió:

> Danilo,
>
>
>
> Resampling only occurs when an image is being resized or warped.  If the
> dimensions are not changing then resampling is not really appropriate.  If
> you do need to resample, the utilities called gdal_translate.exe and
> gdalwarp.exe may be used depending on your needs.  Other utilities also
> provide resample options but they may not fit your purposes.
>
>
>
> As a general rule you should NOT use nearest neighbor to resample
> elevation (floating point) data because it can drastically alter the
> elevation values from the original values and creates a staircase like
> effect in the output imagery.  Use something like cubic or bilinear.  That
> said, if the input data is bad then nothing you do will fix it.  Maybe look
> on the web for the USGS 3Dep elevation data if you are in the USA or SRTM 1
> arc second data for continuous worldwide coverage.  Maybe the source data
> you are using is just bad or has been altered.
>
>
>
> You should definitely NOT resample the slope output.  I think your source
> data may just be bad but it’s hard to know.  Download other sources and
> compare the output.  If the output looks similar then review your code or
> command line options.
>
>
>
> Best regards,
>
> Martin Chapman
>
>
>
> *From:* gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Danilo
> da Rosa
> *Sent:* Tuesday, March 17, 2020 2:25 PM
> *To:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Slope obtained with GDAL has weird lines
>
>
>
> Thanks for your answers Joaquim, Alex and Martin!
>
>
>
> I think the problem is height is measured by 1m intervals, thatś why I see
> 1 meter contour lines in the slope result. The dem grid was not
> interpolated from contours, at least not by me, the data comes from Mapzen
> terrain tiles, I don't know exactly how they are producing it.
>
>
>
> Do you think it would be a good idea to do some kind of interpolation to
> smooth the DEM file or the slope file? Do you have any recommendations on
> how to do that using gdal? The idea is to use the gdaldem color-relief
> command to generate a coloured and easy to read map. The problem is that
> this lines makes the map more difficult to understand, which is a priority
> in this case.
>
>
>
> Thanks again!
>
> Danilo
>
>
>
>
>
> El mar., 17 mar. 2020 a las 4:50, Martin Chapman (<
> mchapman at hyperacktive.com>) escribió:
>
> A slope map indicates the maximum rate of change between a pixel elevation
> value and its neighboring 8 pixels.  In other words, the output value for
> each pixel represents the steepest slope, or decent to the neighboring
> elevation values.  The output values are given as either percent slope or
> degrees from 0 (flat) to 90 (vertical) depending on the command line
> switches you choose.
>
>
>
> Therefore, the output raster values no longer represent elevation values
> from the input but rather slope (steepness) values and should be
> interpreted differently.  A common way to visually interpret them would be
> to color code them with a color ramp where each color in the ramp
> represents a range of degrees somewhere between 0 and 90.  That way a user
> can look at the image and quickly identify steep slopes versus not so steep
> slopes and flat areas.  To create a color ramp that matches changes in
> steepness you will need to use a statistical method on the slope values
> such as standard deviations or jenks natural breaks to group similar slope
> values together and where they change.  In other words, you will want your
> color ramp to change colors where flat areas start to get steeper.  I hope
> that makes sense.
>
>
>
> Another way to use the results would be to write an algorithm to identify
> areas that are within a certain range of steepness so you could identify a
> good place to build a road or perhaps lay train tracks that must not exceed
> a certain steepness.
>
>
>
> I hope that helps.
>
>
>
> Best regards,
>
> Martin Chapman
>
>
>
> On Mar 16, 2020, at 5:09 PM, Danilo da Rosa <daniloide at gmail.com> wrote:
>
> ﻿
>
> Hi!
>
>
>
> This may be a very basic question, but I can't find the answer anyware.
>
> I am working with this DEM obtained using terraincache
> <https://pypi.org/project/terraincache/>, it uses mapzen data. The SRC is
> WGS 84.
>
> [image: DEM File in QGIS] <https://i.stack.imgur.com/Sp4Sg.jpg>
>
> I ran this GDAL command to get the slope:
>
> gdaldem slope -s 111120 dem.tif slope.tif (I had to do scaling because of
> the SRC)
>
> The resulting image looks fine but it's not smooth, it has weird lines
> over it, like contour lines.
>
> [image: Slope file on QGIS] <https://i.stack.imgur.com/POcHR.jpg>
>
> You can download the DEM file here: https://gofile.io/?c=Du7WnM
>
> Does anyone have an idea of how to solve it?
>
> Thanks in advance for your help,
>
> Danilo
>
> P.S. I made this question here too:
> https://gis.stackexchange.com/questions/353983/slope-obtained-with-gdal-has-weird-lines
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200321/8d598461/attachment.html>

From jluis at ualg.pt  Mon Mar 23 10:49:27 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 23 Mar 2020 17:49:27 +0000
Subject: [gdal-dev] Using MEM datasets in librarified  functions
Message-ID: <DB6PR04MB3303E582BE626A1DA378080FA6F00@DB6PR04MB3303.eurprd04.prod.outlook.com>

HI,

Is that supposed to work?

We have a kind of toy program in GMT that calls a couple of librarified functions. It works well when the hSrcDS in
https://github.com/GenericMappingTools/gmt/blob/master/src/gmt_gdal_librarified.c#L382

was obtained with

hSrcDS = GDALOpen(fname_in, GA_ReadOnly);

but I want now to be able to use in memory data and created a MEM dataset whose handle works fine when used in GDALCreateCopy(). However, it crashes GDAL when used, for example, in GDALGrid()

Thanks from my sofa

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200323/92e7975b/attachment.html>

From even.rouault at spatialys.com  Mon Mar 23 11:39:06 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Mar 2020 19:39:06 +0100
Subject: [gdal-dev] Using MEM datasets in librarified  functions
In-Reply-To: <DB6PR04MB3303E582BE626A1DA378080FA6F00@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <DB6PR04MB3303E582BE626A1DA378080FA6F00@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <1834872.pvxPuQ89zl@even-i700>

On lundi 23 mars 2020 17:49:27 CET Joaquim Manuel Freire Luís wrote:
> HI,
> 
> Is that supposed to work?

Yes, should work

> but I want now to be able to use in memory data and created a MEM dataset
> whose handle works fine when used in GDALCreateCopy(). However, it crashes
> GDAL when used, for example, in GDALGrid()

Self-contained reproducer please :-)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jluis at ualg.pt  Mon Mar 23 11:59:58 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 23 Mar 2020 18:59:58 +0000
Subject: [gdal-dev] Using MEM datasets in librarified  functions
In-Reply-To: <1834872.pvxPuQ89zl@even-i700>
References: <DB6PR04MB3303E582BE626A1DA378080FA6F00@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1834872.pvxPuQ89zl@even-i700>
Message-ID: <DB6PR04MB330371C20A2FB663321CF194A6F00@DB6PR04MB3303.eurprd04.prod.outlook.com>

Even, hard to send a MWE. The workflow involves using Julia from where I call GMT like you do with the GDAL Python bindings. If you are so low in occupation I'll be happy to explain the whole procedures.

But I built GDAL debug and caught the crash at gdalmajorobject.cpp See attached image.


On lundi 23 mars 2020 17:49:27 CET Joaquim Manuel Freire Luís wrote:
> HI,
> 
> Is that supposed to work?

Yes, should work

> but I want now to be able to use in memory data and created a MEM 
> dataset whose handle works fine when used in GDALCreateCopy(). 
> However, it crashes GDAL when used, for example, in GDALGrid()

Self-contained reproducer please :-)

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Capture.PNG
Type: image/png
Size: 68660 bytes
Desc: Capture.PNG
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200323/8f12fcc3/attachment-0001.png>

From darrel.maddy at newcastle.ac.uk  Tue Mar 24 03:50:03 2020
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Tue, 24 Mar 2020 10:50:03 +0000
Subject: [gdal-dev] Building on windows
In-Reply-To: <DB7PR07MB4603B610523889054ED6E1FFC1F60@DB7PR07MB4603.eurprd07.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>,
 <DB7PR07MB4603B610523889054ED6E1FFC1F60@DB7PR07MB4603.eurprd07.prod.outlook.com>
Message-ID: <DB7PR07MB460313A70114DC6E7133885BC1F10@DB7PR07MB4603.eurprd07.prod.outlook.com>

Not having much luck here.  Anyone got any further suggestions?

I turned to windows because of a problem with my linux build  - this is throwing up errors such as

/usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1761): error: identifier "__builtin_ia32_sqrtsd_round" is undefined
/usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1770): error: identifier "__builtin_ia32_sqrtss_round" is undefined

eclipse indicates these errors are being thrown during access to gdal.h .  This program compiled and ran without error until last week. I have not done anything to the gdal library or updated anything that I am aware of. I will move back to linux if I can resolve this issue so any suggestions for this would also be welcome.

If I cannot resolve these then I will move away from gdal as a general library and write some generic data access tools.

Thanks

Darrel



________________________________
From: Darrel Maddy
Sent: 17 March 2020 15:10
To: Jerome Siot <jerome.siot at mytimezero.com>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Subject: RE: Building on windows


Dear Jérome



Many thanks for trying to help. Alas it is giving the same errors in the Developer Command Prompt window.



Darrel







From: Jerome Siot <jerome.siot at mytimezero.com>
Sent: 17 March 2020 15:05
To: Darrel Maddy <darrel.maddy at newcastle.ac.uk>; 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Subject: RE: Building on windows



Hello,

  *   Be sure to launch a terminal by executing :



C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\Tools\LaunchDevCmd.bat



  *   Then , give the VS version in nmake command :

nmake /f makefile.vc MSVC_VER=1900

Hope this helps, Jérome



De : gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> De la part de Darrel Maddy
Envoyé : Sunday, March 15, 2020 1:08 PM
À : 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Objet : [gdal-dev] Building on windows



I have recently switched back to windows for a specific project that uses the gdal library.  I am getting the following error on compilation of the VS project

NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' : return code '0x2'



The cl.exe file is present in the directory (there are a number of similar messages that follow)  and I am unsure how to proceed. Any suggestions?



Thanks



Darrel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200324/ee954f24/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 24 07:56:33 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 24 Mar 2020 07:56:33 -0700 (MST)
Subject: [gdal-dev] Building on windows
In-Reply-To: <DB7PR07MB460313A70114DC6E7133885BC1F10@DB7PR07MB4603.eurprd07.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>
 <DB7PR07MB4603B610523889054ED6E1FFC1F60@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <DB7PR07MB460313A70114DC6E7133885BC1F10@DB7PR07MB4603.eurprd07.prod.outlook.com>
Message-ID: <1585061793754-0.post@n6.nabble.com>

Hi,

I don' t do builds myself so excuse if my suggestions do not help you.
However, I know that the Windows builds at gisinternal.com tend to succeed
every night. Perhaps you could have a look at the development kits
http://gisinternals.com/sdk.php and try building with them yourself. If they
work try to find out what makes the difference to your own experiments. Also
the docker builds usually success, perhaps you could find some useful
recipes for Linux from
https://github.com/OSGeo/gdal/tree/master/gdal/docker.

-Jukka Rahkonen



Darrel Maddy wrote
> Not having much luck here.  Anyone got any further suggestions?
> 
> I turned to windows because of a problem with my linux build  - this is
> throwing up errors such as
> 
> /usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1761): error:
> identifier "__builtin_ia32_sqrtsd_round" is undefined
> /usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1770): error:
> identifier "__builtin_ia32_sqrtss_round" is undefined
> 
> eclipse indicates these errors are being thrown during access to gdal.h . 
> This program compiled and ran without error until last week. I have not
> done anything to the gdal library or updated anything that I am aware of.
> I will move back to linux if I can resolve this issue so any suggestions
> for this would also be welcome.
> 
> If I cannot resolve these then I will move away from gdal as a general
> library and write some generic data access tools.
> 
> Thanks
> 
> Darrel
> 
> 
> 
> ________________________________
> From: Darrel Maddy
> Sent: 17 March 2020 15:10
> To: Jerome Siot &lt;

> jerome.siot@

> &gt;; '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &gt;
> Subject: RE: Building on windows
> 
> 
> Dear Jérome
> 
> 
> 
> Many thanks for trying to help. Alas it is giving the same errors in the
> Developer Command Prompt window.
> 
> 
> 
> Darrel
> 
> 
> 
> 
> 
> 
> 
> From: Jerome Siot &lt;

> jerome.siot@

> &gt;
> Sent: 17 March 2020 15:05
> To: Darrel Maddy &lt;

> darrel.maddy at .ac

> &gt;; '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &gt;
> Subject: RE: Building on windows
> 
> 
> 
> Hello,
> 
>   *   Be sure to launch a terminal by executing :
> 
> 
> 
> C:\Program Files (x86)\Microsoft Visual
> Studio\2019\Enterprise\Common7\Tools\LaunchDevCmd.bat
> 
> 
> 
>   *   Then , give the VS version in nmake command :
> 
> nmake /f makefile.vc MSVC_VER=1900
> 
> Hope this helps, Jérome
> 
> 
> 
> De : gdal-dev &lt;

> gdal-dev-bounces at .osgeo

> &lt;mailto:

> gdal-dev-bounces at .osgeo

> &gt;> De la part de Darrel Maddy
> Envoyé : Sunday, March 15, 2020 1:08 PM
> À : '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &lt;mailto:

> gdal-dev at .osgeo

> &gt;>
> Objet : [gdal-dev] Building on windows
> 
> 
> 
> I have recently switched back to windows for a specific project that uses
> the gdal library.  I am getting the following error on compilation of the
> VS project
> 
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"'
> : return code '0x2'
> 
> 
> 
> The cl.exe file is present in the directory (there are a number of similar
> messages that follow)  and I am unsure how to proceed. Any suggestions?
> 
> 
> 
> Thanks
> 
> 
> 
> Darrel
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Tue Mar 24 12:55:12 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 24 Mar 2020 16:55:12 -0300
Subject: [gdal-dev] Building on windows
In-Reply-To: <DB7PR07MB460313A70114DC6E7133885BC1F10@DB7PR07MB4603.eurprd07.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>
 <DB7PR07MB4603B610523889054ED6E1FFC1F60@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <DB7PR07MB460313A70114DC6E7133885BC1F10@DB7PR07MB4603.eurprd07.prod.outlook.com>
Message-ID: <9bd7b2ac-e222-98e0-b982-bc9f1e4795aa@gatewaygeomatics.com>

Regarding your original error, googling it returns this discussion which 
has a GDAL connection, and a solution: 
https://stackoverflow.com/questions/60824242/suddenly-getting-builtin-ia32-sqrtsd-round-is-undefined-with-nvcc-gcc

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/



On 2020-03-24 7:50 a.m., Darrel Maddy wrote:
> Not having much luck here.  Anyone got any further suggestions?
> 
> I turned to windows because of a problem with my linux build  - this is 
> throwing up errors such as
> 
> /usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1761): error: 
> identifier "__builtin_ia32_sqrtsd_round" is undefined
> /usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1770): error: 
> identifier "__builtin_ia32_sqrtss_round" is undefined
> 
> eclipse indicates these errors are being thrown during access to gdal.h 
> .  This program compiled and ran without error until last week. I have 
> not done anything to the gdal library or updated anything that I am 
> aware of. I will move back to linux if I can resolve this issue so any 
> suggestions for this would also be welcome.
> 
> If I cannot resolve these then I will move away from gdal as a general 
> library and write some generic data access tools.
> 
> Thanks
> 
> Darrel
> 
> 
> 
> ------------------------------------------------------------------------
> *From:* Darrel Maddy
> *Sent:* 17 March 2020 15:10
> *To:* Jerome Siot <jerome.siot at mytimezero.com>; 
> 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> *Subject:* RE: Building on windows
> 
> Dear Jérome
> 
> Many thanks for trying to help. Alas it is giving the same errors in the 
> Developer Command Prompt window.
> 
> Darrel
> 
> *From:*Jerome Siot <jerome.siot at mytimezero.com>
> *Sent:* 17 March 2020 15:05
> *To:* Darrel Maddy <darrel.maddy at newcastle.ac.uk>; 
> 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> *Subject:* RE: Building on windows
> 
> Hello,
> 
>   * Be sure to launch a terminal by executing : 
> 
> C:\Program Files (x86)\Microsoft Visual 
> Studio\2019\Enterprise\Common7\Tools\LaunchDevCmd.bat
> 
>   * Then , give the VS version in nmake command :
> 
> nmake /f makefile.vc MSVC_VER=1900
> 
> Hope this helps, Jérome
> 
> *De :*gdal-dev <gdal-dev-bounces at lists.osgeo.org 
> <mailto:gdal-dev-bounces at lists.osgeo.org>> *De la part de* Darrel Maddy
> *Envoyé :* Sunday, March 15, 2020 1:08 PM
> *À :* 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org 
> <mailto:gdal-dev at lists.osgeo.org>>
> *Objet :* [gdal-dev] Building on windows
> 
> I have recently switched back to windows for a specific project that 
> uses the gdal library.  I am getting the following error on compilation 
> of the VS project
> 
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual 
> Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' : 
> return code '0x2'
> 
> The cl.exe file is present in the directory (there are a number of 
> similar messages that follow)  and I am unsure how to proceed. Any 
> suggestions?
> 
> Thanks
> 
> Darrel
> 





From avancinirodrigo at gmail.com  Wed Mar 25 04:40:13 2020
From: avancinirodrigo at gmail.com (Rodrigo Avancini)
Date: Wed, 25 Mar 2020 08:40:13 -0300
Subject: [gdal-dev] Building on windows
In-Reply-To: <9bd7b2ac-e222-98e0-b982-bc9f1e4795aa@gatewaygeomatics.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <BYAPR17MB21819E0082770D82D8DDD14283F60@BYAPR17MB2181.namprd17.prod.outlook.com>
 <DB7PR07MB4603B610523889054ED6E1FFC1F60@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <DB7PR07MB460313A70114DC6E7133885BC1F10@DB7PR07MB4603.eurprd07.prod.outlook.com>
 <9bd7b2ac-e222-98e0-b982-bc9f1e4795aa@gatewaygeomatics.com>
Message-ID: <CAFE8KLc1YYeA62BtqpdApfZQajLT_tE3-iKuipms9g80BDUNAA@mail.gmail.com>

Hi,

I build gdal on windows without problem.

I am using nmake.opt to configure the build options:
https://trac.osgeo.org/gdal/wiki/GeneratingVisualStudioProject

After that:
copy nmake.opt nmake.local /Y
nmake -f makefile.vc MSVC_VER=1910 DLLBUILD=1 WIN64=1 VERSION=301

Best,

* Rodrigo Avancini *


Em ter., 24 de mar. de 2020 às 16:55, Jeff McKenna <
jmckenna at gatewaygeomatics.com> escreveu:

> Regarding your original error, googling it returns this discussion which
> has a GDAL connection, and a solution:
>
> https://stackoverflow.com/questions/60824242/suddenly-getting-builtin-ia32-sqrtsd-round-is-undefined-with-nvcc-gcc
>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> https://gatewaygeomatics.com/
>
>
>
> On 2020-03-24 7:50 a.m., Darrel Maddy wrote:
> > Not having much luck here.  Anyone got any further suggestions?
> >
> > I turned to windows because of a problem with my linux build  - this is
> > throwing up errors such as
> >
> > /usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1761): error:
> > identifier "__builtin_ia32_sqrtsd_round" is undefined
> > /usr/lib/gcc/x86_64-linux-gnu/7/include/avx512fintrin.h(1770): error:
> > identifier "__builtin_ia32_sqrtss_round" is undefined
> >
> > eclipse indicates these errors are being thrown during access to gdal.h
> > .  This program compiled and ran without error until last week. I have
> > not done anything to the gdal library or updated anything that I am
> > aware of. I will move back to linux if I can resolve this issue so any
> > suggestions for this would also be welcome.
> >
> > If I cannot resolve these then I will move away from gdal as a general
> > library and write some generic data access tools.
> >
> > Thanks
> >
> > Darrel
> >
> >
> >
> > ------------------------------------------------------------------------
> > *From:* Darrel Maddy
> > *Sent:* 17 March 2020 15:10
> > *To:* Jerome Siot <jerome.siot at mytimezero.com>;
> > 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> > *Subject:* RE: Building on windows
> >
> > Dear Jérome
> >
> > Many thanks for trying to help. Alas it is giving the same errors in the
> > Developer Command Prompt window.
> >
> > Darrel
> >
> > *From:*Jerome Siot <jerome.siot at mytimezero.com>
> > *Sent:* 17 March 2020 15:05
> > *To:* Darrel Maddy <darrel.maddy at newcastle.ac.uk>;
> > 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> > *Subject:* RE: Building on windows
> >
> > Hello,
> >
> >   * Be sure to launch a terminal by executing :
> >
> > C:\Program Files (x86)\Microsoft Visual
> > Studio\2019\Enterprise\Common7\Tools\LaunchDevCmd.bat
> >
> >   * Then , give the VS version in nmake command :
> >
> > nmake /f makefile.vc MSVC_VER=1900
> >
> > Hope this helps, Jérome
> >
> > *De :*gdal-dev <gdal-dev-bounces at lists.osgeo.org
> > <mailto:gdal-dev-bounces at lists.osgeo.org>> *De la part de* Darrel Maddy
> > *Envoyé :* Sunday, March 15, 2020 1:08 PM
> > *À :* 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org
> > <mailto:gdal-dev at lists.osgeo.org>>
> > *Objet :* [gdal-dev] Building on windows
> >
> > I have recently switched back to windows for a specific project that
> > uses the gdal library.  I am getting the following error on compilation
> > of the VS project
> >
> > NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> >
> Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"' :
> > return code '0x2'
> >
> > The cl.exe file is present in the directory (there are a number of
> > similar messages that follow)  and I am unsure how to proceed. Any
> > suggestions?
> >
> > Thanks
> >
> > Darrel
> >
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200325/19519ced/attachment.html>

From Checed.Rodgers at microsoft.com  Wed Mar 25 21:08:26 2020
From: Checed.Rodgers at microsoft.com (Aaron Rodgers)
Date: Thu, 26 Mar 2020 04:08:26 +0000
Subject: [gdal-dev] GDAL 3.0.4,
 Proj 7.0.0. ogr2ogr says "Unable to open EPSG support file gcs.csv"
Message-ID: <BN6PR21MB0177C1E7E3DD9EEA10C4786D99CF0@BN6PR21MB0177.namprd21.prod.outlook.com>

I am building GDAL 3.0.4 on Windows. GDAL 3.0.4 depends on PROJ. I have chosen PROJ 7.0.0, which depends on Curl, Libtiff, and Sqlite.

I have successfully built all of the dependencies as shared libraries from source. The final output is a GDAL devinstall Release build, which I install to ...\gdal_304_devinstall.

I am able to call GDAL executables in gdal_304_devinstall\bin (ogrinfo.exe, gdalinfo, etc.), and I am also able to call the C++ API using files in gdal_304_devinstall\lib and gdal_304_devinstall\include.

As a test of functionality, I am doing a transformation of a shapefile from EPSG 4326 to EPSG 3857. This task succeeds when I do it through the C++ API. However, it fails when I try to use the command line:


    D:\shapefiles>PATH=%PATH%;C:\Users\[USER]\bin\gdal\gdal_304_install\bin
    D:\shapefiles>set GDAL_DATA=C:\Users\[USER]\bin\gdal\gdal_304_install\data
    D:\shapefiles>set PROJ_LIB=C:\Users\[USER]\bin\proj\proj-7.0.0\inst\share\proj # (contains proj.db)
    D:\shapefiles>ogr2ogr -s_srs EPSG:4326 -t_srs EPSG:3857 foobar.shp input.shp
    ERROR 4: Unable to open EPSG support file gcs.csv.  Try setting the GDAL_DATA environment variable to point to the directory containing EPSG csv files.
    ERROR 1: Failed to process SRS definition: EPSG:3857


I am pretty confused by this. First, I did not expect GDAL to look for a .csv. I thought these were deprecated when GDAL took PROJ as a build dependency. https://github.com/OSGeo/gdal/blob/v3.0.4/gdal/NEWS, "Implement RFC 73".

Second, I am not sure how the transformation succeeds when using the C++ API but not when using the command line. I have informed my C++ program about the location of proj_7_0.dll, but not about the location of proj.db, so I am not sure how it knows how to do the transform. Does it have something to do with the INCLUDE_OGR_FRMTS flag in makefile.vc? I have built GDAL with that both on and off, doesn't seem to fix command line.

Third, and this is odd, if I point GDAL_DATA to the data dir for a much older version of GDAL (2.0.4, which I downloaded precompiled), the command line works! I assume this is some kind of backwards compatibility kicking in.

Finally, as a last resort, I redid the build process using PROJ 6.3.1, but got exactly the same behavior.

Any clues? I don't have a good sense for how the EPSG transform data should be propagated in a modern GDAL build.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/9b67e232/attachment.html>

From Checed.Rodgers at microsoft.com  Wed Mar 25 22:21:07 2020
From: Checed.Rodgers at microsoft.com (Aaron Rodgers)
Date: Thu, 26 Mar 2020 05:21:07 +0000
Subject: [gdal-dev] GDAL 3.0.4,
 Proj 7.0.0. ogr2ogr says "Unable to open EPSG support file gcs.csv"
Message-ID: <BN6PR21MB017762E2BB5836AEB3BB609099CF0@BN6PR21MB0177.namprd21.prod.outlook.com>

Apologies. False alarm.

I had an older version of ogr2ogr hiding in a pgsql installation that I did last September. Taking that off my path fixed the issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/3aee3d78/attachment.html>

From jluis at ualg.pt  Thu Mar 26 12:58:52 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 26 Mar 2020 19:58:52 +0000
Subject: [gdal-dev] Issue with writen colortables
Message-ID: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>

Attached are two tinny indexed images created with GMT but via GDAL.
The .tif file looks right but if look at the .png (it needs lots of zoom) we can see that the top left pixel is missing. That happens, I think, because the transparency column has a first value of 0 whilst all the others are 1's. I checked this both with GDAL and Matlab.

The code that writes it is
https://github.com/GenericMappingTools/gmt/blob/master/src/gmt_gdalwrite.c#L343
where .c4 is well set to 255. However when it lands on the file, the first was converted to 0.

Again, I'm doing this the Julia bindings so have no C code to provide a MWE.


[cid:image003.jpg at 01D603A8.F88800A0]

Thanks

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/b87b6d6c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 20381 bytes
Desc: image003.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/b87b6d6c/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lixo.png
Type: image/png
Size: 1144 bytes
Desc: lixo.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/b87b6d6c/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lixo.tif
Type: image/tiff
Size: 2261 bytes
Desc: lixo.tif
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/b87b6d6c/attachment-0001.tif>

From even.rouault at spatialys.com  Thu Mar 26 13:46:50 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Mar 2020 21:46:50 +0100
Subject: [gdal-dev] Issue with writen colortables
In-Reply-To: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <1758579.x3F544lxbN@even-i700>

On jeudi 26 mars 2020 19:58:52 CET Joaquim Manuel Freire Luís wrote:
>  images created with GMT but via GDAL.
> The .tif file looks right but if look at the .png (it needs lots of zoom) we
> can see that the top left pixel is missing. That happens, I think, because
> the transparency column has a first value of 0 whilst all the others are
> 1's. I checked this both with

You should probably not set the nodata value to 0. This will cause the alpha 
component for entry 0 of the color table to be set to 0 when writing PNG

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/842455fc/attachment.html>

From jluis at ualg.pt  Thu Mar 26 16:19:47 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 26 Mar 2020 23:19:47 +0000
Subject: [gdal-dev] Issue with writen colortables
In-Reply-To: <1758579.x3F544lxbN@even-i700>
References: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1758579.x3F544lxbN@even-i700>
Message-ID: <DB6PR04MB3303CC0E318980EDCA09C398A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>

Funny, I made it nodata = 1 and the zero moved to second place.

[cid:image002.jpg at 01D603C5.0A070080]

From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, March 26, 2020 8:47 PM
To: gdal-dev at lists.osgeo.org
Cc: Joaquim Manuel Freire Luís <jluis at ualg.pt>
Subject: Re: [gdal-dev] Issue with writen colortables


On jeudi 26 mars 2020 19:58:52 CET Joaquim Manuel Freire Luís wrote:

> images created with GMT but via GDAL.

> The .tif file looks right but if look at the .png (it needs lots of zoom) we

> can see that the top left pixel is missing. That happens, I think, because

> the transparency column has a first value of 0 whilst all the others are

> 1's. I checked this both with



You should probably not set the nodata value to 0. This will cause the alpha component for entry 0 of the color table to be set to 0 when writing PNG



Even





--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/020f3747/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 41621 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/020f3747/attachment-0001.jpg>

From even.rouault at spatialys.com  Thu Mar 26 16:24:19 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Mar 2020 00:24:19 +0100
Subject: [gdal-dev] Issue with writen colortables
In-Reply-To: <DB6PR04MB3303CC0E318980EDCA09C398A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1758579.x3F544lxbN@even-i700>
 <DB6PR04MB3303CC0E318980EDCA09C398A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <2682145.E0gDRovf7f@even-i700>

On jeudi 26 mars 2020 23:19:47 CET Joaquim Manuel Freire Luís 
wrote:
> Funny, I made it nodata = 1 and the zero moved to second place.

Fully determinstic behaviour: GDAL sets the alpha component of the 
entry in 
the color table whose value is nodata to 0:

https://github.com/OSGeo/gdal/blob/master/gdal/frmts/png/
pngdataset.cpp#L1820

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200327/845109a2/attachment.html>

From jluis at ualg.pt  Thu Mar 26 16:41:57 2020
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 26 Mar 2020 23:41:57 +0000
Subject: [gdal-dev] Issue with writen colortables
In-Reply-To: <2682145.E0gDRovf7f@even-i700>
References: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <1758579.x3F544lxbN@even-i700>
 <DB6PR04MB3303CC0E318980EDCA09C398A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
 <2682145.E0gDRovf7f@even-i700>
Message-ID: <DB6PR04MB330337824B7F4BD27738336AA6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>

Ah, thanks. So the solution is to not call GDALSetRasterNoDataValue() unless we really want to set one color as transparent.

From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, March 26, 2020 11:24 PM
To: Joaquim Manuel Freire Luís <jluis at ualg.pt>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Issue with writen colortables


On jeudi 26 mars 2020 23:19:47 CET Joaquim Manuel Freire Luís wrote:

> Funny, I made it nodata = 1 and the zero moved to second place.



Fully determinstic behaviour: GDAL sets the alpha component of the entry in

the color table whose value is nodata to 0:



https://github.com/OSGeo/gdal/blob/master/gdal/frmts/png/pngdataset.cpp#L1820



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200326/a5c021ff/attachment.html>

From ankitvrishm22 at gmail.com  Fri Mar 27 02:11:13 2020
From: ankitvrishm22 at gmail.com (ankit yadav)
Date: Fri, 27 Mar 2020 14:41:13 +0530
Subject: [gdal-dev] Gdal compatibility to hdf4
Message-ID: <CAOym713O84MnJks-aEf3g=+KH9YVwNoE2HziMX2T6fntNx4CHg@mail.gmail.com>

Hello Everyone,

I am a new user to data visualization tools and currently experiencing this
problem with my installed gdal where I am not having hdf4 compatibility and
because of this I can not deal with the hdf4 format files obtained from
MODIS.

can anyone help me with this?
I will be indebted to you all.


thank you

Ankit
IISER mohali
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200327/50ef03e0/attachment.html>

From lucadeluge at gmail.com  Fri Mar 27 03:17:38 2020
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Fri, 27 Mar 2020 11:17:38 +0100
Subject: [gdal-dev] ogr2ogr Too many recursion levels in expression
Message-ID: <CAK4m-3yiMRg6H3=nvjPTpeN=b3K+MZEXkCTQGJW7B2sWMrJ9_Q@mail.gmail.com>

Hi devs,

I need to extract several features (around 190) from a geojson file. I
build the where condition string but when I run it I get this error

ERROR 1: Too many recursion levels in expression
ERROR 1: SetAttributeFilter(NUTS_NAME='Nordburgenland' OR
NUTS_NAME='Waldviertel' OR NUTS_NAME='Wien city'.....OR
NUTS_NAME='Zala') on layer 'NUTS_RG_01M_2016_3035_LEVL_3' failed.

I tried to reduce the number but it still give me error, if I try with
few value (3) it is working. Is there another way to solve this?
I'm using GDAL 3.0.4

Thanks

-- 
ciao
Luca

www.lucadelu.org

From even.rouault at spatialys.com  Fri Mar 27 05:17:20 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Mar 2020 13:17:20 +0100
Subject: [gdal-dev] ogr2ogr Too many recursion levels in expression
In-Reply-To: <CAK4m-3yiMRg6H3=nvjPTpeN=b3K+MZEXkCTQGJW7B2sWMrJ9_Q@mail.gmail.com>
References: <CAK4m-3yiMRg6H3=nvjPTpeN=b3K+MZEXkCTQGJW7B2sWMrJ9_Q@mail.gmail.com>
Message-ID: <1918862.tlddxRII5G@even-i700>

Luca,

> I need to extract several features (around 190) from a geojson file. I
> build the where condition string but when I run it I get this error
> 
> ERROR 1: Too many recursion levels in expression
> ERROR 1: SetAttributeFilter(NUTS_NAME='Nordburgenland' OR
> NUTS_NAME='Waldviertel' OR NUTS_NAME='Wien city'.....OR
> NUTS_NAME='Zala') on layer 'NUTS_RG_01M_2016_3035_LEVL_3' failed.

As a workaround, try:

NUTS_NAME IN ('Nordburgenland', 'Waldviertel', ... )

I've also submitted a fix so that those many OR can be supported:
https://github.com/OSGeo/gdal/pull/2355

The issue was naturally the parser would construct a deeply unbalanced expression tree, and 
sanity checks triggered to avoid potential call stack overflows when evaluating it.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200327/4f8d4ab0/attachment-0001.html>

From schwehr at gmail.com  Sun Mar 29 09:44:34 2020
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 29 Mar 2020 09:44:34 -0700
Subject: [gdal-dev] Gdal compatibility to hdf4
In-Reply-To: <CAOym713O84MnJks-aEf3g=+KH9YVwNoE2HziMX2T6fntNx4CHg@mail.gmail.com>
References: <CAOym713O84MnJks-aEf3g=+KH9YVwNoE2HziMX2T6fntNx4CHg@mail.gmail.com>
Message-ID: <CACmBxyuiqJ9_gQim_-TwfBLaPog9Mc_JNCfWKWnNhkG46mGHkg@mail.gmail.com>

You need to give details about your platform and gdal install.  I have been
using gdal with hdf4 for modis for many years, so it is certainly possible

On Fri, Mar 27, 2020, 2:11 AM ankit yadav <ankitvrishm22 at gmail.com> wrote:

> Hello Everyone,
>
> I am a new user to data visualization tools and currently experiencing
> this problem with my installed gdal where I am not having hdf4
> compatibility and because of this I can not deal with the hdf4 format files
> obtained from MODIS.
>
> can anyone help me with this?
> I will be indebted to you all.
>
>
> thank you
>
> Ankit
> IISER mohali
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200329/f6220545/attachment.html>

From schwehr at gmail.com  Sun Mar 29 13:42:32 2020
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 29 Mar 2020 13:42:32 -0700
Subject: [gdal-dev] Gdal compatibility to hdf4
In-Reply-To: <CAOym713M8u-c6+Zedce0tJvZyB_A34BUTvMAZ3oe-vgCf5oCZA@mail.gmail.com>
References: <CAOym713O84MnJks-aEf3g=+KH9YVwNoE2HziMX2T6fntNx4CHg@mail.gmail.com>
 <CACmBxyuiqJ9_gQim_-TwfBLaPog9Mc_JNCfWKWnNhkG46mGHkg@mail.gmail.com>
 <CAOym713M8u-c6+Zedce0tJvZyB_A34BUTvMAZ3oe-vgCf5oCZA@mail.gmail.com>
Message-ID: <CACmBxyv+N+4NcwKFPtfaueHQOs9cFk68G4qF9BZW12hE8HPL6Q@mail.gmail.com>

+gdal-dev - re-added

There are multiple ways to get gdal on a mac.  Did you build it from
source? Did you use macports, fink, homebrew, conda*, or something else?
What version of macosx and gdal do you have?

I use a specific git version of gdal and build with bazel in a custom
environment, so you don't want what I have :). I used to be a fink
packager, but I gave that up after 18 years

On Sun, Mar 29, 2020 at 10:06 AM ankit yadav <ankitvrishm22 at gmail.com>
wrote:

> Hello Kurt
> I am using a mac having macos catalina (10.15.4).
> i installed the GDAL with osgeo/osgeo4mac with the help of homebrew and it
> does not have any hdf4 raster driver.
>
> Could you help me with that?
>
> if you could provide me a way to install the same version you are running
> on your platform.
> I think linux based platforms are running gdal with hdf4 but not on the
> mac.
>
> Thank you
>
> Ankit
> IISER Mohali
>
> On Sun, 29 Mar 2020 at 10:14 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> You need to give details about your platform and gdal install.  I have
>> been using gdal with hdf4 for modis for many years, so it is certainly
>> possible
>>
>> On Fri, Mar 27, 2020, 2:11 AM ankit yadav <ankitvrishm22 at gmail.com>
>> wrote:
>>
>>> Hello Everyone,
>>>
>>> I am a new user to data visualization tools and currently experiencing
>>> this problem with my installed gdal where I am not having hdf4
>>> compatibility and because of this I can not deal with the hdf4 format files
>>> obtained from MODIS.
>>>
>>> can anyone help me with this?
>>> I will be indebted to you all.
>>>
>>>
>>> thank you
>>>
>>> Ankit
>>> IISER mohali
>>>
>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200329/8cd222cc/attachment.html>

From even.rouault at spatialys.com  Mon Mar 30 06:01:36 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Mar 2020 15:01:36 +0200
Subject: [gdal-dev] GDAL 3.1 schedule
Message-ID: <2393169.Ex1ATeuPGi@even-i700>

Hi,

We didn't discuss GDAL 3.1.0 schedule yet. If we want to keep on our usual 
yearly cycle for feature version, we should release 3.1.0 around beginning of 
May. This cycle has been mostly consolidating without anything significantly 
breaking (OGR SQL 'LIKE' becoming case sensitive being the only listed 
backward incompatible change), so I'd be in favor to go directly for a release 
candidate.
Let's say on April 27th ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200330/aa8bd947/attachment.html>

From osahon.gis at gmail.com  Mon Mar 30 06:31:25 2020
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Mon, 30 Mar 2020 14:31:25 +0100
Subject: [gdal-dev] Issue with writen colortables
In-Reply-To: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
References: <DB6PR04MB3303181705203E06CB443E59A6CF0@DB6PR04MB3303.eurprd04.prod.outlook.com>
Message-ID: <CAGpiUSiHWDpihqUXYAn=ELC76xAQDw9bRRXO+QYwntdEpuKxNQ@mail.gmail.com>

**Copy links to browser address bar if they are not opening upon click:
*LEAH SHARIBU, 2 YEARS AFTER*:
https://www.docdroid.net/fWQ480p/leah-sharibu-2-years-after.pdf

BE WISE AS SERPENTS (Facebook Page Link)*:
https://m.facebook.com/story.php?story_fbid=10223074657920398&id=1399351130


On Mar 26, 2020 20:59, "Joaquim Manuel Freire Luís" <jluis at ualg.pt> wrote:

> Attached are two tinny indexed images created with GMT but via GDAL.
>
> The .tif file looks right but if look at the .png (it needs lots of zoom)
> we can see that the top left pixel is missing. That happens, I think,
> because the transparency column has a first value of 0 whilst all the
> others are 1’s. I checked this both with GDAL and Matlab.
>
>
>
> The code that writes it is
>
> https://github.com/GenericMappingTools/gmt/blob/
> master/src/gmt_gdalwrite.c#L343
>
> where .c4 is well set to 255. However when it lands on the file, the first
> was converted to 0.
>
>
>
> Again, I’m doing this the Julia bindings so have no C code to provide a
> MWE.
>
>
>
>
>
>
>
> Thanks
>
>
>
> Joaquim
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200330/63424317/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 20381 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200330/63424317/attachment-0001.jpg>

From osahon.gis at gmail.com  Mon Mar 30 06:33:04 2020
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Mon, 30 Mar 2020 14:33:04 +0100
Subject: [gdal-dev] Building on windows
In-Reply-To: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
References: <DB7PR07MB460390DA53CC4416FE05139CC1F80@DB7PR07MB4603.eurprd07.prod.outlook.com>
Message-ID: <CAGpiUSgBg3FmK6phcbUPKcfNcj2DgmFBpwY4=W16-jvp0Lkdow@mail.gmail.com>

**Copy links to browser address bar if they are not opening upon click:
LEAH SHARIBU, 2 YEARS AFTER:
https://www.docdroid.net/fWQ480p/leah-sharibu-2-years-after.pdf

BE WISE AS SERPENTS (Facebook Page Link):
https://m.facebook.com/story.php?story_fbid=10223074657920398&id=1399351130


On Mar 15, 2020 13:08, "Darrel Maddy" <darrel.maddy at newcastle.ac.uk> wrote:

> I have recently switched back to windows for a specific project that uses
> the gdal library.  I am getting the following error on compilation of the
> VS project
>
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> Studio\2019\Enterprise\VC\Tools\MSVC\14.22.27905\bin\HostX86\x64\cl.EXE"'
> : return code '0x2'
>
>
>
> The cl.exe file is present in the directory (there are a number of similar
> messages that follow)  and I am unsure how to proceed. Any suggestions?
>
>
>
> Thanks
>
>
>
> Darrel
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200330/07ec74cf/attachment.html>

From even.rouault at spatialys.com  Tue Mar 31 07:21:39 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Mar 2020 16:21:39 +0200
Subject: [gdal-dev] Dealing with "default" TOWGS84 values
Message-ID: <3645694.ToKyIBH2vB@even-i700>

Hi,

I wanted to get opinions on a topic related to TOWGS84 7-parameter transforms. In the GDAL 
1.x/2.x & PROJ 4.x/5.x era, having TOWGS84 values attached to CRS definitions was critical to 
get correct datum transformation.

Now, in the GDAL 3 + PROJ 6.x/7.x era, there are more an annoyance than anything else, 
since they can prevent more accurate transformations to be used.

Some data formats such as GeoTIFF files written by GDAL 1.x/2.x encode the TOWGS84 value 
of the CRS definition that was built when importing the EPSG dataset. E.g 
TOWGS84[446.448,-125.157,542.06,0.15,0.247,0.842,-20.489] for EPSG:27700 OSGB 1936 / 
British National Grid

In GDAL 3, when such file is read, a BoundCRS object is returned, that is a CRS that has a base 
CRS (potentially with a EPSG code attached. e.g EPSG:27700) + the definition of its 
transformation to WGS84 (which corresponds to the transformation with larger area of use). 
Software like QGIS will then use this BoundCRS (since that's what GDAL returns for the 
dataset CRS) when reprojecting to a target CRS, which will cause the TOWGS84 parameters 
from the file to be used (PROJ >= 6 will honour the TOWGS84 parameters of a BoundCRS 
when transforming from/into it), rather than potentially more accurate transformations 
(typically grid based transformations) from the base CRS to the target CRS.

Whether this behaviour is a bug or a feature, and where this bug belongs to, has been a 
debate in a number of tickets:
https://github.com/OSGeo/gdal/issues/2219
https://github.com/qgis/QGIS/issues/34993

I wanted to have broader opinions regarding if we should do something about that, and 
what.

One possibility would be for GDAL to ignore the TOWGS84 value associated with a base CRS 
if we detect that this TOWGS84 value is the default one that was written by GDAL 1.x/2.x for 
this base CRS, and thus to return just the base CRS, letting PROJ figure out all potential 
transformations when transforming to a target CRS. This could potentially be the default 
behaviour, with a configuration option that could be set to opt for the current behaviour 
(that is return the BoundCRS). This would have to be implemented per driver (logic would be 
similar). I guess GeoTIFF, GPKG, Spatialite could be candidates.
The potential downside of this is if the user relied on those exact default TOWGS84 values to 
be used when reprojecting to WGS84 (or when using WGS84 as the pivot)

I'd note that GDAL 3, in the OGRCoordinateTransformation code, implements partially this 
logic, but only in the transformation code (not impacting the CRS actually returned by the 
dataset), and with limitations. That is when transforming from/into a BoundCRS whose which 
has a unique Helmert transformation to WGS84 that matches the transformation of the 
BoundCRS, it uses by default only the BaseCRS (can be disabled with 
OSR_CT_USE_DEFAULT_EPSG_TOWGS84=YES). But this is for example not sufficient for 
EPSG:27700, because it has several Helmert transformations. So as suggested in https://
github.com/OSGeo/gdal/issues/2219, a broader fix would be for the PROJ database to have a 
GDAL2 authority that would store the TOWGS84 parameters historically used by GDAL 2.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200331/ffe64abd/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 31 07:23:32 2020
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 31 Mar 2020 14:23:32 +0000
Subject: [gdal-dev] GPKG validation error from Teamengine
Message-ID: <92811a1c708f49eca7cd79fded7af067@C119S212VM042.msvyvi.vaha.local>

Hi,

I have tested some GDAL made GeoPackages with Teamengine and it finds some errors where validate_gpkg.py does not. I am using the ets-gpkg12 test and its source code is at https://github.com/opengeospatial/ets-gpkg12/blob/master/src/main/java/org/opengis/cite/gpkg12/features/FeaturesTests.java

The test that fails is about requirement 78:
// Verify the geometry envelope falls within the rtree extents for this instance
// final String enveloperesult = geometryEnvelopeWithinExtents(envelopeVals, rtreeminmaxVals);
// this test would test for the envelope within the rtree, not equal to

I wonder if this finding is worth making a GitHub issue or not. By the comment in the source code this test is known to be a bit problematic:
final Double localtolerance = 1.0e-4;        // 1.0e-5 is not good enough for most geopackages to pass!

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200331/06f31a3d/attachment.html>

From even.rouault at spatialys.com  Tue Mar 31 07:37:49 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Mar 2020 16:37:49 +0200
Subject: [gdal-dev] GPKG validation error from Teamengine
In-Reply-To: <92811a1c708f49eca7cd79fded7af067@C119S212VM042.msvyvi.vaha.local>
References: <92811a1c708f49eca7cd79fded7af067@C119S212VM042.msvyvi.vaha.local>
Message-ID: <2929043.VDmD3GUAps@even-i700>

On mardi 31 mars 2020 14:23:32 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> I have tested some GDAL made GeoPackages with Teamengine and it finds some
> errors where validate_gpkg.py does not. I am using the ets-gpkg12 test and
> its source code is at
> https://github.com/opengeospatial/ets-gpkg12/blob/master/src/main/java/org/
> opengis/cite/gpkg12/features/FeaturesTests.java
> 
> The test that fails is about requirement 78:
> // Verify the geometry envelope falls within the rtree extents for this
> instance // final String enveloperesult =
> geometryEnvelopeWithinExtents(envelopeVals, rtreeminmaxVals); // this test
> would test for the envelope within the rtree, not equal to
> 
> I wonder if this finding is worth making a GitHub issue or not. By the
> comment in the source code this test is known to be a bit problematic:
> final Double localtolerance = 1.0e-4;        // 1.0e-5 is not good enough
> for most geopackages to pass!

Jukka,

I see this test has been removed in the latest state of the spec:
https://github.com/opengeospatial/geopackage/commit/f2482abcc42a96b87dfd4970f9a1a08f493fc9b5#diff-c1aba1c1e37494be8225c64af76beb82

That the envelope in the GeoPackage geometry blob and the xmin,ymin,xmax,ymax value
from the RTree don't exactly match is expected, as the SQLite3 RTree mechanism
uses Float32 (see paragraph 3 of https://www.sqlite.org/rtree.html) instead of Float64
as in the envelope of the GPKG geometry blob.

validate_gpkg.py has never tested this, since it has not been created from the ATS
itself, but from the requirements, and probably an earlier version of the requirements
than 1.2.0 or later.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200331/43261b30/attachment-0001.html>

From stephenwoodbridge37 at gmail.com  Tue Mar 31 08:48:18 2020
From: stephenwoodbridge37 at gmail.com (Stephen Woodbridge)
Date: Tue, 31 Mar 2020 11:48:18 -0400
Subject: [gdal-dev] Dealing with "default" TOWGS84 values
In-Reply-To: <3645694.ToKyIBH2vB@even-i700>
References: <3645694.ToKyIBH2vB@even-i700>
Message-ID: <28b4a430-67d9-f11d-5354-027b80260df5@gmail.com>

Even,

Would it make sense to add an option to GDAL like -ignore-bound-towgs84 
or -use-bound-towgs84 depending on what the default behavior is set to?

This would allow the user to choose which is best for their data.

-Steve W

On 3/31/2020 10:21 AM, Even Rouault wrote:
>
> Hi,
>
> I wanted to get opinions on a topic related to TOWGS84 7-parameter 
> transforms. In the GDAL 1.x/2.x & PROJ 4.x/5.x era, having TOWGS84 
> values attached to CRS definitions was critical to get correct datum 
> transformation.
>
> Now, in the GDAL 3 + PROJ 6.x/7.x era, there are more an annoyance 
> than anything else, since they can prevent more accurate 
> transformations to be used.
>
> Some data formats such as GeoTIFF files written by GDAL 1.x/2.x encode 
> the TOWGS84 value of the CRS definition that was built when importing 
> the EPSG dataset. E.g 
> TOWGS84[446.448,-125.157,542.06,0.15,0.247,0.842,-20.489] for 
> EPSG:27700 OSGB 1936 / British National Grid
>
> In GDAL 3, when such file is read, a BoundCRS object is returned, that 
> is a CRS that has a base CRS (potentially with a EPSG code attached. 
> e.g EPSG:27700) + the definition of its transformation to WGS84 (which 
> corresponds to the transformation with larger area of use). Software 
> like QGIS will then use this BoundCRS (since that's what GDAL returns 
> for the dataset CRS) when reprojecting to a target CRS, which will 
> cause the TOWGS84 parameters from the file to be used (PROJ >= 6 will 
> honour the TOWGS84 parameters of a BoundCRS when transforming 
> from/into it), rather than potentially more accurate transformations 
> (typically grid based transformations) from the base CRS to the target 
> CRS.
>
> Whether this behaviour is a bug or a feature, and where this bug 
> belongs to, has been a debate in a number of tickets:
>
> https://github.com/OSGeo/gdal/issues/2219
>
> https://github.com/qgis/QGIS/issues/34993
>
> I wanted to have broader opinions regarding if we should do something 
> about that, and what.
>
> One possibility would be for GDAL to ignore the TOWGS84 value 
> associated with a base CRS if we detect that this TOWGS84 value is the 
> default one that was written by GDAL 1.x/2.x for this base CRS, and 
> thus to return just the base CRS, letting PROJ figure out all 
> potential transformations when transforming to a target CRS. This 
> could potentially be the default behaviour, with a configuration 
> option that could be set to opt for the current behaviour (that is 
> return the BoundCRS). This would have to be implemented per driver 
> (logic would be similar). I guess GeoTIFF, GPKG, Spatialite could be 
> candidates.
>
> The potential downside of this is if the user relied on those exact 
> default TOWGS84 values to be used when reprojecting to WGS84 (or when 
> using WGS84 as the pivot)
>
> I'd note that GDAL 3, in the OGRCoordinateTransformation code, 
> implements partially this logic, but only in the transformation code 
> (not impacting the CRS actually returned by the dataset), and with 
> limitations. That is when transforming from/into a BoundCRS whose 
> which has a unique Helmert transformation to WGS84 that matches the 
> transformation of the BoundCRS, it uses by default only the BaseCRS 
> (can be disabled with OSR_CT_USE_DEFAULT_EPSG_TOWGS84=YES). But this 
> is for example not sufficient for EPSG:27700, because it has several 
> Helmert transformations. So as suggested in 
> https://github.com/OSGeo/gdal/issues/2219, a broader fix would be for 
> the PROJ database to have a GDAL2 authority that would store the 
> TOWGS84 parameters historically used by GDAL 2.
>
> Even
>
> -- 
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From gdt at lexort.com  Tue Mar 31 09:05:35 2020
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 31 Mar 2020 12:05:35 -0400
Subject: [gdal-dev] Dealing with "default" TOWGS84 values
In-Reply-To: <3645694.ToKyIBH2vB@even-i700> (Even Rouault's message of "Tue,
 31 Mar 2020 16:21:39 +0200")
References: <3645694.ToKyIBH2vB@even-i700>
Message-ID: <rmir1x88q7k.fsf@s1.lexort.com>

Even Rouault <even.rouault at spatialys.com> writes:

> I wanted to get opinions on a topic related to TOWGS84 7-parameter transforms. In the GDAL 
> 1.x/2.x & PROJ 4.x/5.x era, having TOWGS84 values attached to CRS definitions was critical to 
> get correct datum transformation.

> In GDAL 3, when such file is read, a BoundCRS object is returned, that is a CRS that has a base 
> CRS (potentially with a EPSG code attached. e.g EPSG:27700) + the definition of its 
> transformation to WGS84 (which corresponds to the transformation with larger area of use). 
> Software like QGIS will then use this BoundCRS (since that's what GDAL returns for the 
> dataset CRS) when reprojecting to a target CRS, which will cause the TOWGS84 parameters 
> from the file to be used (PROJ >= 6 will honour the TOWGS84 parameters of a BoundCRS 
> when transforming from/into it), rather than potentially more accurate transformations 
> (typically grid based transformations) from the base CRS to the target CRS.

It seems the crucial point is whether one intends

  to refer to a particular CRS, by just the codepoint, and therefore use
  the most precise transform, following modern best practices, or

  to refer sort of to a particular CRS, but with an inline definition of
  it (the towgs84 params) to be used instead of the modern normal way

That second method is not even what I think was ever really intended by
most, but an artifact of how it was intended to be.

So I would be inclined to ignore the towgs84 parameters when reading a
CRS, if the codepoint is in the current database, unless an option has
been given stating they should be used.

I can see what you are saying about insisting that the towgs84 values
are the standard ones in order to ignore them, but it also seems like a
file with a crs codepoint and other towgs84 values is broken.   I would
think it's better to allow it to be edited to change the CRS reference
to note that it's custom, since such a file isn't really using the
stated CRS.

Matching and skipping also feels fragile, rather than not using and
having people that want to use them have to be explicit.

From piyush.agram at jpl.nasa.gov  Tue Mar 31 09:38:37 2020
From: piyush.agram at jpl.nasa.gov (Agram, Piyush S (US 334K))
Date: Tue, 31 Mar 2020 16:38:37 +0000
Subject: [gdal-dev] HDF5 and CF conventions
Message-ID: <53127D7D-9D7C-4075-B2E8-46287C9583F0@jpl.nasa.gov>

Hi everyone,
       Wanted to run a couple of ideas by the group here.

We are considering extending the HDF5 driver to support CF conventions. All the logic exists as part of the netcdf driver (pretty much) and it should not take a really long time to add that support to HDF5 driver as well.


  1.  Working towards this, would it be ok to move  the “CF_*” defines / constants to its own CF.h header file? That will then let us use it in other drivers as well.
  2.  CF conventions 1.7+ supports an attribute called “crs_wkt”. GDAL has traditionally referred to this attribute as “spatial_ref”. Would it be ok to update netcdf driver to look for crs_wkt first and then fall back to usual spatial_ref attribute when it is not found?
  3.  If one were to add CF support for HDF5, would it be preferable to make this its own driver like KEA/BAG (say H5CF) or part of the HDF5imagedataset core like CosmoSkymed / KompSAT products?

Piyush
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200331/17319ae6/attachment.html>

From even.rouault at spatialys.com  Tue Mar 31 10:33:55 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Mar 2020 19:33:55 +0200
Subject: [gdal-dev] HDF5 and CF conventions
In-Reply-To: <53127D7D-9D7C-4075-B2E8-46287C9583F0@jpl.nasa.gov>
References: <53127D7D-9D7C-4075-B2E8-46287C9583F0@jpl.nasa.gov>
Message-ID: <2242195.acWk5IyetZ@even-i700>

Piyush,

> We are considering extending the HDF5 driver to support CF conventions.

My main question is :
Why... ? Why the netCDF driver on a netCDF v4 / HDF5 file doesn't do the job already ? I'm 
quite concerned by the CF logic being duplicated in several drivers.

> All the logic exists as part of the netcdf driver (pretty much) and it should not take a really 
long time to add that support to HDF5 driver as well.

I love your optimism :-)

> 1.  Working towards this, would it be ok to move  the “CF_*” defines / constants to its own 
CF.h header file? That will then let us use it in other drivers as well.

Constants are only one part of the equation. The whole logic to build the 
OGRSpatialReference object from attributes is also something that would be great to have 
coded just once. To reuse it in multiple drivers would require to abstract the way to query 
attributes. Which brings me to thinking that the new multidim API could potentially be of use 
to have a driver-independent CF CRS decoding logic.

> 2.  CF conventions 1.7+ supports an attribute
> called “crs_wkt”. GDAL has traditionally referred to this attribute as
> “spatial_ref”. Would it be ok to update netcdf driver to look for crs_wkt
> first and then fall back to usual spatial_ref attribute when it is not
> found?

Sounds good to me. Could/should be a separate pull request.

> 3.  If one were to add CF support for HDF5, would it be preferable
> to make this its own driver like KEA/BAG (say H5CF) or part of the
> HDF5imagedataset core like CosmoSkymed / KompSAT products? 

I'd say more in the existing HDF5 driver to limit the amount of new code.
KEA & BAG are really very specialized profiles of HDF5.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200331/1eba1357/attachment-0001.html>

From piyush.agram at jpl.nasa.gov  Tue Mar 31 11:38:47 2020
From: piyush.agram at jpl.nasa.gov (Agram, Piyush S (US 334K))
Date: Tue, 31 Mar 2020 18:38:47 +0000
Subject: [gdal-dev] [EXTERNAL] Re:  HDF5 and CF conventions
In-Reply-To: <2242195.acWk5IyetZ@even-i700>
References: <53127D7D-9D7C-4075-B2E8-46287C9583F0@jpl.nasa.gov>
 <2242195.acWk5IyetZ@even-i700>
Message-ID: <C6F1B0A1-1BD9-4EBC-B3E2-5137ACBB812C@jpl.nasa.gov>

Hi Even,


My main question is :

Why... ? Why the netCDF driver on a netCDF v4 / HDF5 file doesn't do the job already ? I'm quite concerned by the CF logic being duplicated in several drivers.

Ans: Unfortunately, we have a data volume problem with handling large SAR datasets. HDF5 allows us to work with float16 and one-bit/ two-bit masks while using a single file with hierarchical organization within it. Currently, we just append the .nc extension and test the code with the netcdf driver when not using any of the custom HDF5 features. We would have to use the advanced HDF5 features for managing data volumes moving ahead.


I love your optimism :-)

Ans: Fingers crossed. I could be digging myself a hole here. But thanks to Julien and David B., we were able to get netcdf group support in. Hoping that the amount of effort is roughly the same.



Constants are only one part of the equation. The whole logic to build the OGRSpatialReference object from attributes is also something that would be great to have coded just once. To reuse it in multiple drivers would require to abstract the way to query attributes. Which brings me to thinking that the new multidim API could potentially be of use to have a driver-independent CF CRS decoding logic.

Ans: I agree. A simplified structure that holds the current dataset id, group id and root id could potentially be specified for netcdf and HDF5? This simplified structure could reside within CF.h and be specialized  in the netcdf and hdf5 dataset cpp files. The logic for searching the groups / traversing the tree could all be local to the CF.h / CF.cpp file then.

Will issue a separate PR for “crs_wkt”. This will make the datasets generated using pyproj.CRS.to_cf() readable with GDAL.

Piyush


From: Even Rouault <even.rouault at spatialys.com>
Date: Tuesday, March 31, 2020 at 10:34 AM
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Cc: "Agram, Piyush S (US 334K)" <piyush.agram at jpl.nasa.gov>
Subject: [EXTERNAL] Re: [gdal-dev] HDF5 and CF conventions


Piyush,



> We are considering extending the HDF5 driver to support CF conventions.



My main question is :

Why... ? Why the netCDF driver on a netCDF v4 / HDF5 file doesn't do the job already ? I'm quite concerned by the CF logic being duplicated in several drivers.



> All the logic exists as part of the netcdf driver (pretty much) and it should not take a really long time to add that support to HDF5 driver as well.



I love your optimism :-)



> 1. Working towards this, would it be ok to move the “CF_*” defines / constants to its own CF.h header file? That will then let us use it in other drivers as well.



Constants are only one part of the equation. The whole logic to build the OGRSpatialReference object from attributes is also something that would be great to have coded just once. To reuse it in multiple drivers would require to abstract the way to query attributes. Which brings me to thinking that the new multidim API could potentially be of use to have a driver-independent CF CRS decoding logic.



> 2. CF conventions 1.7+ supports an attribute

> called “crs_wkt”. GDAL has traditionally referred to this attribute as

> “spatial_ref”. Would it be ok to update netcdf driver to look for crs_wkt

> first and then fall back to usual spatial_ref attribute when it is not

> found?



Sounds good to me. Could/should be a separate pull request.



> 3. If one were to add CF support for HDF5, would it be preferable

> to make this its own driver like KEA/BAG (say H5CF) or part of the

> HDF5imagedataset core like CosmoSkymed / KompSAT products?



I'd say more in the existing HDF5 driver to limit the amount of new code.

KEA & BAG are really very specialized profiles of HDF5.



Even





--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200331/0bd5c3d7/attachment.html>

