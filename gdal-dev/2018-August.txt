From even.rouault at spatialys.com  Wed Aug  1 00:57:54 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 01 Aug 2018 09:57:54 +0200
Subject: [gdal-dev] Cannot call InvGeoTransform due to too many values
	to unpack
In-Reply-To: <CADHfsK2JJOA--fdncY8wPiBiG8DJCdCM65+i_E+6ADOHj4pyxw@mail.gmail.com>
References: <CADHfsK2JJOA--fdncY8wPiBiG8DJCdCM65+i_E+6ADOHj4pyxw@mail.gmail.com>
Message-ID: <28416875.mEoDfzlE7h@even-i700>

Jacky,

> t = dataset.GetGeoTransform()
> success,tInverse = gdal.InvGeoTransform(t)

There's no success flag, so
tInverse = gdal.InvGeoTransform(t)
This will return None in case of failure

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jackynguyen.km at gmail.com  Wed Aug  1 02:49:16 2018
From: jackynguyen.km at gmail.com (Jacky Nguyen)
Date: Wed, 1 Aug 2018 17:49:16 +0800
Subject: [gdal-dev] Cannot call InvGeoTransform due to too many values
	to unpack
In-Reply-To: <28416875.mEoDfzlE7h@even-i700>
References: <CADHfsK2JJOA--fdncY8wPiBiG8DJCdCM65+i_E+6ADOHj4pyxw@mail.gmail.com>
 <28416875.mEoDfzlE7h@even-i700>
Message-ID: <CADHfsK3k0s5Xng5H1eUvbmSgQpx5bKcN8Ba__2Ltwy4OieSnaQ@mail.gmail.com>

Hi Even,

Ahhh, so the code from the book is a bit outdated. Remove the success flag
works now

Thank you!

Jacky

On Wed, Aug 1, 2018 at 3:57 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Jacky,
>
> > t = dataset.GetGeoTransform()
> > success,tInverse = gdal.InvGeoTransform(t)
>
> There's no success flag, so
> tInverse = gdal.InvGeoTransform(t)
> This will return None in case of failure
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180801/9e1b37ad/attachment.html>

From erin.nagel at gmail.com  Wed Aug  1 12:10:49 2018
From: erin.nagel at gmail.com (erin nagel)
Date: Wed, 1 Aug 2018 15:10:49 -0400
Subject: [gdal-dev] Unexpected performance drop when using gdal.Grid()
	invdistnn vs. invdist
Message-ID: <CA+t_YKoP5Cof=SOCmAiubRTfSCih-QGUv9hYkfDReUHWp5WB5A@mail.gmail.com>

Using python-bindings gdal.Grid() to interpolate scattered points to a
regular grid using CSV and VRT for over 700,000 points.

When testing invdist and invdistnn algorithms, invdistnn showed a decrease
in performance. According to https://trac.osgeo.org/gdal/ticket/6038,
invdistnn should have improved performance.
Python 3.6.4, GDAL version 2.2.2

*gdal.Grid()*

*Runtime*
invdist

6 min
invdistnn

45 min
Command Line, GDAL version 2.2.1

*gdal_grid*

*Runtime*

invdist

4 min

invdistnn

22 min



Python

ugrid_invdist = gdal.Grid('ugrid_ invdist.tiff', 'gomofs_u.vrt',
format='GTIFF', width=1248, height=861, algorithm="invdist:power=2.0:s
moothing=0.0:radius1=0.06:radius2=0.06:angle=0.0:max_points=4:min_points=2:nodata=0.0",
zfield="u")

ugrid_invdistnn = gdal.Grid('ugrid_ invdistnn.tiff', 'gomofs_u.vrt',
format='GTIFF', width=1248, height=861, algorithm="invdistnn:power=2.0
:smoothing=0.0:radius1=0.06:radius2=0.06:angle=0.0:max_points=4:min_points=2:nodata=0.0",
zfield="u")

Command Line

gdal_grid -zfield "u" -a invdist:power=2.0:smoothing=0.
0:radius1=0.06:radius2=0.06:angle=0.0:max_points=4:min_points=2:nodata=0.0
-zfield "u" -outsize 1248 861 -of GTiff gomofs_u.vrt ugrid_invdist.tiff
gdal_grid -zfield "u" -a invdistnn:power=2.0:smoothing=
0.0:radius1=0.06:radius2=0.06:angle=0.0:max_points=4:min_points=2:nodata=0.0
-zfield "u" -outsize 1248 861 -of GTiff gomofs_u.vrt ugrid_invdistnn.tiff

Any ideas on why the performance suffers with invdistnn vs. invdist as well
as Python vs. command-line?

Thank you
 gomofs.csv
<https://drive.google.com/file/d/1PbT8mLKfC0TEwrCCKtZdAm9ibY4BI02y/view?usp=drive_web>
 gomofs_u.vrt
<https://drive.google.com/file/d/1dsStgDkEAX6bN4oCs2777f2TdU-76bs7/view?usp=drive_web>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180801/3509dc90/attachment.html>

From jerome.seigneuret at gmail.com  Thu Aug  2 07:52:19 2018
From: jerome.seigneuret at gmail.com (=?UTF-8?Q?J=C3=A9r=C3=B4me_Seigneuret?=)
Date: Thu, 2 Aug 2018 16:52:19 +0200
Subject: [gdal-dev] edit geometry with query where
Message-ID: <CAATqEenBCC-YjkgXZ__m2hjW0oOEK9yu_4ALZX7_Ek4uBJdZbw@mail.gmail.com>

Hi,

I use QGIS to edit layers and in this soft there is no possibility to edit
geometry if query where exist. QGIS use OGR driver to read and write
geometry. I am also an ArcGIS user and I don't have any problem for editing
my data with query where definition.

OGR can't really work for editing geometry on shapefile when a query
definition is set?

Thanks

-- 
Jérôme Seigneuret
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180802/eae8027c/attachment.html>

From even.rouault at spatialys.com  Thu Aug  2 07:58:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 Aug 2018 16:58:53 +0200
Subject: [gdal-dev] edit geometry with query where
In-Reply-To: <CAATqEenBCC-YjkgXZ__m2hjW0oOEK9yu_4ALZX7_Ek4uBJdZbw@mail.gmail.com>
References: <CAATqEenBCC-YjkgXZ__m2hjW0oOEK9yu_4ALZX7_Ek4uBJdZbw@mail.gmail.com>
Message-ID: <9854289.NHJM8budGk@even-i700>

On jeudi 2 août 2018 16:52:19 CEST Jérôme Seigneuret wrote:
> Hi,
> 
> I use QGIS to edit layers and in this soft there is no possibility to edit
> geometry if query where exist. QGIS use OGR driver to read and write
> geometry. I am also an ArcGIS user and I don't have any problem for editing
> my data with query where definition.
> 
> OGR can't really work for editing geometry on shapefile when a query
> definition is set?

That should generally work. The limitation is rather on the QGIS side and 
should be reported in its bug tracker, if not already reported.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jerome.seigneuret at gmail.com  Thu Aug  2 08:03:15 2018
From: jerome.seigneuret at gmail.com (=?UTF-8?Q?J=C3=A9r=C3=B4me_Seigneuret?=)
Date: Thu, 2 Aug 2018 17:03:15 +0200
Subject: [gdal-dev] edit geometry with query where
In-Reply-To: <9854289.NHJM8budGk@even-i700>
References: <CAATqEenBCC-YjkgXZ__m2hjW0oOEK9yu_4ALZX7_Ek4uBJdZbw@mail.gmail.com>
 <9854289.NHJM8budGk@even-i700>
Message-ID: <CAATqEe=+RE3yhTO=--bDuHHG=s9K0atXda3KgeKtRCpoTymXww@mail.gmail.com>

Thanks!

I have create a bug report. Response is actually reversed to yours
http://issues.qgis.org/issues/19529

Are you also dev on QGIS?

Le jeu. 2 août 2018 16:58, Even Rouault <even.rouault at spatialys.com> a
écrit :

> On jeudi 2 août 2018 16:52:19 CEST Jérôme Seigneuret wrote:
> > Hi,
> >
> > I use QGIS to edit layers and in this soft there is no possibility to
> edit
> > geometry if query where exist. QGIS use OGR driver to read and write
> > geometry. I am also an ArcGIS user and I don't have any problem for
> editing
> > my data with query where definition.
> >
> > OGR can't really work for editing geometry on shapefile when a query
> > definition is set?
>
> That should generally work. The limitation is rather on the QGIS side and
> should be reported in its bug tracker, if not already reported.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180802/3ef94455/attachment.html>

From kokoalberti at fastmail.com  Thu Aug  2 12:00:47 2018
From: kokoalberti at fastmail.com (Koko Alberti)
Date: Thu, 02 Aug 2018 21:00:47 +0200
Subject: [gdal-dev] Predictor creation option with ZSTD GeoTIFF compression
Message-ID: <1533236447.492535.1461558976.1E534D8E@webmail.messagingengine.com>

Hi,

With ZSTD compression available in GDAL 2.3 I was running some tests to compare it with the other alternatives. According to the docs the PREDICTOR creation option can be used with COMPRESS=ZSTD, but when I run a quick comparison it seems to have no effect on the output file size. Is this correct or is something else going on?

For example, the following commands (GDAL 2.3.1) create output files that all have exactly the same size:

gdal_translate -co COMPRESS=ZSTD -co PREDICTOR=1 test.tif zstd_p1.tif
gdal_translate -co COMPRESS=ZSTD -co PREDICTOR=2 test.tif zstd_p2.tif
gdal_translate -co COMPRESS=ZSTD -co PREDICTOR=3 test.tif zstd_p3.tif

I would expect some differences though, as for other algorithms which support predictor (deflate, lzw) choosing the right value can have quite a big effect on the compression ratio. Tested with files with different data types as well (Byte, Int16, and Float32) with the same effect.

Thanks for any insights.

cheers,
Koko

From jukka.rahkonen at maanmittauslaitos.fi  Thu Aug  2 13:17:53 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 2 Aug 2018 20:17:53 +0000
Subject: [gdal-dev] How to copy the EXIF metadata?
Message-ID: <b768d5e10622441bae4e08ac080e720a@C119S212VM042.msvyvi.vaha.local>

Hi,

Referring to this question on gis.stackexchange https://gis.stackexchange.com/questions/291554/how-to-retrieve-exif-tags-from-a-geotiff-with-gdal.

The GTiff driver manual https://www.gdal.org/frmt_gtiff.html informs me that "Starting with GDAL 1.10, EXIF metadata can be extracted from the file, and will be stored the EXIF metadata domain"  but is there any example about how to do it? I had a try by downloading  this image from GDAL autotests https://raw.githubusercontent.com/OSGeo/gdal/master/autotest/gcore/data/exif_and_gps.tif.

If I run 
gdal_translate -of GTiff exif_and_gps.tif exif_and_gps_copy.tif

and test the result with
gdalinfo -listmdd exif_and_gps_copy.tif

it seems that the EXIF metadata domain and tags are dropped.

Test made with GDAL 2.4.0dev.

-Jukka Rahkonen-

From even.rouault at spatialys.com  Thu Aug  2 13:24:17 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 Aug 2018 22:24:17 +0200
Subject: [gdal-dev] Fwd: [Projects] OSGeo Annual General Meeting - projects
	please join and report (August 30 2018)
Message-ID: <2539454.tP65fyxpZY@even-i700>

Hi,

see below the request from the OSGeo board for a quick (2 minute) project
update for GDAL. I won't be in Dar. Is there anyone from the community that 
will be there and willing to give this update ? (I can help with preparing the 
material if needed)

Even


----------  Forwarded Message  ----------

Subject: [Projects] OSGeo Annual General Meeting - projects please join and 
report (August 30 2018)
Date: jeudi 2 août 2018, 22:13:51 CEST
From: Astrid Emde (OSGeo Secretary) <secretary at osgeo.org>
To: Projects <projects at lists.osgeo.org>

Dear OSGeo projects & project officers,

the OSGeo Annual General Meeting (AGM) is scheduled for Thursday morning 
August 30 at 8:00-9:00 in Dar Es Salaam (Tansania).

As Project/Committee officer we ask that you attend, or send a delegate 
from your community. The FOSS4G organizers have given us one hour for 
the meeting, leaving us each with around 2 mins!

This update is about your project and community, rather than about your 
software. We are interested in how your community is doing, the 
opportunities and challenges ahead, and how OSGeo can help.

The shared slide deck is available here (request edit access if 
required):

* 
https://docs.google.com/presentation/d/
1imiG7x09ry7lGvmS15FCVq2Z7yaICY00fcpXBK27TXY/edit?usp=sharing

These slides replace the "Annual General Report" 
(https://github.com/geotools/geotools/wiki/GeoTools-Annual-Report-2017) 
used previously, you may wish to borrow that format for inspiration. You 
still can make an annual report page with extended information if you 
like and link to it.

If you are unable to attend we ask that you submit an annual general 
report to the board email list and attend an IRC board meeting by 
November 2018.

We are coordinating activities on the OSGeo Wiki 
(https://wiki.osgeo.org/wiki/Annual_General_Meeting_2018). Please add 
your project and name to the wiki if you can attend.

Best regards

Astrid Emde (OSGeo Secretary)

-- 
-------------------------------------------------------------
Astrid Emde
OSGeo Board Member and OSGeo Secretary
Open Source Geospatial Foundation
https://www.osgeo.org/member/astrid-emde/
astrid_emde at osgeo.org

_______________________________________________
Projects mailing list
Projects at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/projects

-----------------------------------------
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug  2 13:25:35 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 Aug 2018 22:25:35 +0200
Subject: [gdal-dev] Predictor creation option with ZSTD GeoTIFF
	compression
In-Reply-To: <1533236447.492535.1461558976.1E534D8E@webmail.messagingengine.com>
References: <1533236447.492535.1461558976.1E534D8E@webmail.messagingengine.com>
Message-ID: <6663353.H5flfYiZAN@even-i700>

On jeudi 2 août 2018 21:00:47 CEST Koko Alberti wrote:
> Hi,
> 
> With ZSTD compression available in GDAL 2.3 I was running some tests to
> compare it with the other alternatives. According to the docs the PREDICTOR
> creation option can be used with COMPRESS=ZSTD, but when I run a quick
> comparison it seems to have no effect on the output file size. Is this
> correct or is something else going on?

Support for PREDICTOR and ZSTD has been implemented in master / 2.4.0dev

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug  2 13:28:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 Aug 2018 22:28:46 +0200
Subject: [gdal-dev] How to copy the EXIF metadata?
In-Reply-To: <b768d5e10622441bae4e08ac080e720a@C119S212VM042.msvyvi.vaha.local>
References: <b768d5e10622441bae4e08ac080e720a@C119S212VM042.msvyvi.vaha.local>
Message-ID: <4940180.JPuXPr2vWA@even-i700>

On jeudi 2 août 2018 20:17:53 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> Referring to this question on gis.stackexchange
> https://gis.stackexchange.com/questions/291554/how-to-retrieve-exif-tags-fr
> om-a-geotiff-with-gdal.
> 
> The GTiff driver manual https://www.gdal.org/frmt_gtiff.html informs me that
> "Starting with GDAL 1.10, EXIF metadata can be extracted from the file, and
> will be stored the EXIF metadata domain"  but is there any example about
> how to do it? I had a try by downloading  this image from GDAL autotests
> https://raw.githubusercontent.com/OSGeo/gdal/master/autotest/gcore/data/exi
> f_and_gps.tif.
> 
> If I run
> gdal_translate -of GTiff exif_and_gps.tif exif_and_gps_copy.tif
> 
> and test the result with
> gdalinfo -listmdd exif_and_gps_copy.tif
> 
> it seems that the EXIF metadata domain and tags are dropped.

Jukka,

Yes, this is read-only support for EXIF in the GTiff driver. Write-support in 
the JPEG driver was added in 2.3.0

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Thu Aug  2 15:39:56 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 2 Aug 2018 22:39:56 +0000
Subject: [gdal-dev] Problem with CSV when using both SQLite dialect and -oo
 GEOM_POSSIBLE_NAMES
Message-ID: <f24222a4a39c44cf98b984c9d2256de6@C119S212VM042.msvyvi.vaha.local>

Hi,

I can reproduce this https://gis.stackexchange.com/questions/287767/ogrinfo-unable-to-use-sqlite-dialect-with-oo-geom-possible-names-open-option with GDAL 2.4.0dev but I do not undesrtand what happens.

-Jukka Rahkonen-

From even.rouault at spatialys.com  Fri Aug  3 01:41:19 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 03 Aug 2018 10:41:19 +0200
Subject: [gdal-dev] Problem with CSV when using both SQLite dialect and
	-oo GEOM_POSSIBLE_NAMES
In-Reply-To: <f24222a4a39c44cf98b984c9d2256de6@C119S212VM042.msvyvi.vaha.local>
References: <f24222a4a39c44cf98b984c9d2256de6@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1929143.CvU5HFdbLg@even-i700>

On jeudi 2 août 2018 22:39:56 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> I can reproduce this
> https://gis.stackexchange.com/questions/287767/ogrinfo-unable-to-use-sqlite
> -dialect-with-oo-geom-possible-names-open-option with GDAL 2.4.0dev but I do
> not undesrtand what happens.

When doing  -oo GEOM_POSSIBLE_NAMES=geom , there are both a text attribute 
field and a geometry field named geom in the layer definition, and when using 
the SQLite dialect, they conflict together.
The solution is to also add -oo KEEP_GEOM_COLUMNS=NO (which is poorly named 
after reflection), so that the text attribute field is not reported.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dementievda at gmail.com  Fri Aug  3 03:18:57 2018
From: dementievda at gmail.com (gis_wild)
Date: Fri, 3 Aug 2018 03:18:57 -0700 (MST)
Subject: [gdal-dev] Recalculate pixel value based on stats
Message-ID: <1533291537887-0.post@n6.nabble.com>

I want to recalculate pixel values of raster based on raster stats. In terms
of gdal, I want to use gdal_calc together with gdal_stats. Is it possible to
somehow pass an output of gdal_stats into gdal_calc?

In particular, I need to recalculate pixel value based on standard deviation
value



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cpaulik at vandersat.com  Fri Aug  3 03:44:08 2018
From: cpaulik at vandersat.com (Christoph Paulik)
Date: Fri, 03 Aug 2018 12:44:08 +0200
Subject: [gdal-dev] VRT of VRTs with overviews. They do not seem to be used.
Message-ID: <87bmaj91c7.fsf@vandersat.com>


Hi,

I have a use case where I would like to update some parts of my dataset
and not have to re-render all the overviews for all the other parts of
the globe. My idea was to use 5x5 degree boxes for which I would create
overviews of levels e.g. 2, 4, 8, 16. Then I would use a global VRT of
these VRT files to create the higher level overviews 32, 64 and so on.
So I I update a part of the dataset I only have to create the overviews
for the new part and the high level overviews which I thought would be
fast since the lower level overviews are already there.

But that does not seem to work since gdal seems to go back to the
original files even when the overviews are already there.

This simplified example might illustrate my problem:

This is the input file I took for illustration purposes

$ gdal-config --version
2.3.1

$ gdalinfo test.tif 
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 1000, 1000
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (10.000000000000000,10.000000000000000)
Pixel Size = (0.010000000000000,-0.010000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  10.0000000,  10.0000000) ( 10d 0' 0.00"E, 10d 0' 0.00"N)
Lower Left  (  10.0000000,   0.0000000) ( 10d 0' 0.00"E,  0d 0' 0.01"N)
Upper Right (  20.0000000,  10.0000000) ( 20d 0' 0.00"E, 10d 0' 0.00"N)
Lower Right (  20.0000000,   0.0000000) ( 20d 0' 0.00"E,  0d 0' 0.01"N)
Center      (  15.0000000,   5.0000000) ( 15d 0' 0.00"E,  5d 0' 0.00"N)
Band 1 Block=256x256 Type=Float64, ColorInterp=Gray

$ gdalbuildvrt first_level.vrt test.tif 
$ gdaladdo test.tif 2 4 8 16
$ export CPL_DEBUG=ON
$ gdalbuildvrt second_level.vrt first_level.vrt
GNM: GNMRegisterAllInternal
GNM: RegisterGNMFile
GNM: RegisterGNMdatabase
0...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: GDALOpen(first_level.vrt, this=0xb88140) succeeds as VRT.
GDAL: GDALClose(first_level.vrt, this=0xb88140)
GDAL: In GDALDestroy - unloading GDAL shared library.

$ gdaladdo second_level.vrt 32
GNM: GNMRegisterAllInternal
GNM: RegisterGNMFile
GNM: RegisterGNMdatabase
GDAL: GDALOpen(second_level.vrt, this=0x11990c0) succeeds as VRT.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALOpen(second_level.vrt.ovr, this=0x1159950) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
0GDAL: GDALOpen(first_level.vrt, this=0x11abd90) succeeds as VRT.
GDAL: GDALOpen(test.tif, this=0x11aef80) succeeds as GTiff.
GDAL: GDAL_CACHEMAX = 785 MB
...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: GDALClose(second_level.vrt.ovr, this=0x1159950)
GDAL: GDALOpen(second_level.vrt.ovr, this=0x1159950) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(second_level.vrt, this=0x11990c0)
GDAL: GDALClose(test.tif, this=0x11aef80)
GDAL: GDALClose(first_level.vrt, this=0x11abd90)
GDAL: GDALClose(second_level.vrt.ovr, this=0x1159950)
GDAL: In GDALDestroy - unloading GDAL shared library.

What is also strange that gdalinfo of the first_level.vrt file does not
list all the overviews that are there:

gdalinfo first_level.vrt 
GNM: GNMRegisterAllInternal
GNM: RegisterGNMFile
GNM: RegisterGNMdatabase
GDAL: GDALOpen(first_level.vrt, this=0xac2d20) succeeds as VRT.
Driver: VRT/Virtual Raster
GDAL: GDALDefaultOverviews::OverviewScan()
Files: first_level.vrt
       test.tif
Size is 1000, 1000
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (10.000000000000000,10.000000000000000)
Pixel Size = (0.010000000000000,-0.010000000000000)
OGRCT: PROJ >= 4.8.0 features enabled
OGRCT: Using locale-safe proj version
OGRCT: Source: +proj=longlat +datum=WGS84 +no_defs
OGRCT: Target: +proj=longlat +datum=WGS84 +no_defs
Corner Coordinates:
Upper Left  (  10.0000000,  10.0000000) ( 10d 0' 0.00"E, 10d 0' 0.00"N)
Lower Left  (  10.0000000,   0.0000000) ( 10d 0' 0.00"E,  0d 0' 0.01"N)
Upper Right (  20.0000000,  10.0000000) ( 20d 0' 0.00"E, 10d 0' 0.00"N)
Lower Right (  20.0000000,   0.0000000) ( 20d 0' 0.00"E,  0d 0' 0.01"N)
Center      (  15.0000000,   5.0000000) ( 15d 0' 0.00"E,  5d 0' 0.00"N)
Band 1 Block=128x128 Type=Float64, ColorInterp=Gray
GDAL: GDALOpen(test.tif, this=0xa83930) succeeds as GTiff.
GTiff: ScanDirectories()
GTiff: Opened 500x500 overview.
GTiff: Opened 250x250 overview.
GTiff: Opened 125x125 overview.
GTiff: Opened 63x63 overview.
  Overviews: 500x500, 250x250
GDAL: GDALClose(first_level.vrt, this=0xac2d20)
GDAL: GDALClose(test.tif, this=0xa83930)
GDAL: In GDALDestroy - unloading GDAL shared library.

All the best,
Christoph



-- 

-------------------------------------------------------
Christoph Paulik
VanderSat // Satellite observed water data. Globally. Daily.
Wilhelminastraat 43a, 2011 VK, Haarlem (NL), The Netherlands
W: www.vandersat.com
M: +31 (0) 6 1827 1928
PGP: 8CFC D7DF 2867 B2DC 749B  1B0A 6E3B A262 5186 A0AC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180803/d58727b8/attachment-0001.sig>

From jmckenna at gatewaygeomatics.com  Fri Aug  3 05:00:57 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 3 Aug 2018 09:00:57 -0300
Subject: [gdal-dev] Fwd: [Projects] OSGeo Annual General Meeting -
 projects please join and report (August 30 2018)
In-Reply-To: <2539454.tP65fyxpZY@even-i700>
References: <2539454.tP65fyxpZY@even-i700>
Message-ID: <8e0d39de-9de6-cc8b-56f4-9041a9a07cfd@gatewaygeomatics.com>

Hi Even, I'll be there and don't mind helping.  -jeff



On 2018-08-02 5:24 PM, Even Rouault wrote:
> Hi,
> 
> see below the request from the OSGeo board for a quick (2 minute) project
> update for GDAL. I won't be in Dar. Is there anyone from the community that
> will be there and willing to give this update ? (I can help with preparing the
> material if needed)
> 
> Even
> 
> 
> ----------  Forwarded Message  ----------
> 
> Subject: [Projects] OSGeo Annual General Meeting - projects please join and
> report (August 30 2018)
> Date: jeudi 2 août 2018, 22:13:51 CEST
> From: Astrid Emde (OSGeo Secretary) <secretary at osgeo.org>
> To: Projects <projects at lists.osgeo.org>
> 
> Dear OSGeo projects & project officers,
> 
> the OSGeo Annual General Meeting (AGM) is scheduled for Thursday morning
> August 30 at 8:00-9:00 in Dar Es Salaam (Tansania).
> 
> As Project/Committee officer we ask that you attend, or send a delegate
> from your community. The FOSS4G organizers have given us one hour for
> the meeting, leaving us each with around 2 mins!
> 
> This update is about your project and community, rather than about your
> software. We are interested in how your community is doing, the
> opportunities and challenges ahead, and how OSGeo can help.
> 
> The shared slide deck is available here (request edit access if
> required):
> 
> *
> https://docs.google.com/presentation/d/
> 1imiG7x09ry7lGvmS15FCVq2Z7yaICY00fcpXBK27TXY/edit?usp=sharing
> 
> These slides replace the "Annual General Report"
> (https://github.com/geotools/geotools/wiki/GeoTools-Annual-Report-2017)
> used previously, you may wish to borrow that format for inspiration. You
> still can make an annual report page with extended information if you
> like and link to it.
> 
> If you are unable to attend we ask that you submit an annual general
> report to the board email list and attend an IRC board meeting by
> November 2018.
> 
> We are coordinating activities on the OSGeo Wiki
> (https://wiki.osgeo.org/wiki/Annual_General_Meeting_2018). Please add
> your project and name to the wiki if you can attend.
> 
> Best regards
> 
> Astrid Emde (OSGeo Secretary)
> 

From even.rouault at spatialys.com  Fri Aug  3 09:17:45 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 03 Aug 2018 18:17:45 +0200
Subject: [gdal-dev] VRT of VRTs with overviews. They do not seem to be
	used.
In-Reply-To: <87bmaj91c7.fsf@vandersat.com>
References: <87bmaj91c7.fsf@vandersat.com>
Message-ID: <41448110.iVdW87JiOr@even-i700>

Christoph,

gdaladdo always start from the full resolution layer (or the preceding 
overview in case of cascading overview), hence what you observe. And even if 
it did start from the nearest existing overview level, in your full scenario 
of a VRT of VRT, with each 'bottom-level' VRT having overviews, that wouldn't 
ause the overall VRT to be able to expose overview bands.

That said, there's a trick you can use

If you do:

gdal_translate second_level.vrt tmp.tif  -outsize 3.125% 3.125% -of GTiff
mv tmp.tif second_level.vrt.ovr

you'll get a 1/32 overview, and this will be able to use the overviews of the 
bottom-level VRTs

and you can then run gdaladdo on second_level.vrt.ovr

Regarding the fact the gdalinfo first_level.vrt only reports overviews of size 
500x500, 250x250, this is because of an optimization of the VRT driver that do
not report overviews smaller than 128x128.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From patrick.mckendree.young at gmail.com  Fri Aug  3 11:45:41 2018
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Fri, 3 Aug 2018 12:45:41 -0600
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
Message-ID: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>

Hi all,

I've been trying to figure out a good format to store some very large
vector data in.  Basically, its a bunch of really dense polygons describing
the cutlines that compose a mosaic.  We've had reasonable success using
zipped shapefiles, but on the larger guys we're exceeding the 2GB file
size, so a more modern alternative is desired.

FileGBD worked alright but having to build GDAL with the ESRI driver to
write them is not desirable.  We also tried a GeoPackage, but it seemed a
little slow to read in QGIS.

The dream would be a nicely compressed format that can be spatially indexed
so that we can serve them up efficiently with mapserver.  Any
recommendations are greatly appreciated!

Thanks,
Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180803/a698db33/attachment.html>

From jmckenna at gatewaygeomatics.com  Fri Aug  3 11:52:19 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 3 Aug 2018 15:52:19 -0300
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
Message-ID: <1ec27125-574f-6c03-6be0-c9d67d074712@gatewaygeomatics.com>

Hi Patrick,

In terms of speed and MapServer, considering you have large vector data 
and require good indexing, I always use and recommend PostGIS.

(of course if you asked this on the MapServer-users list you would get a 
whole lot of different opinions)

But that is my initial recommendation, for your stated needs.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/



On 2018-08-03 3:45 PM, Patrick Young wrote:
> Hi all,
> 
> I've been trying to figure out a good format to store some very large 
> vector data in.  Basically, its a bunch of really dense polygons 
> describing the cutlines that compose a mosaic.  We've had reasonable 
> success using zipped shapefiles, but on the larger guys we're exceeding 
> the 2GB file size, so a more modern alternative is desired.
> 
> FileGBD worked alright but having to build GDAL with the ESRI driver to 
> write them is not desirable.  We also tried a GeoPackage, but it seemed 
> a little slow to read in QGIS.
> 
> The dream would be a nicely compressed format that can be spatially 
> indexed so that we can serve them up efficiently with mapserver.  Any 
> recommendations are greatly appreciated!
> 
> Thanks,
> Patrick
> 
> 

From patrick.mckendree.young at gmail.com  Fri Aug  3 12:08:57 2018
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Fri, 3 Aug 2018 13:08:57 -0600
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <1ec27125-574f-6c03-6be0-c9d67d074712@gatewaygeomatics.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
 <1ec27125-574f-6c03-6be0-c9d67d074712@gatewaygeomatics.com>
Message-ID: <CADXYQQ7vjO6WiYeM7GkpbZEnJH3L6eTCXHfiULyNBupeGkc_Cw@mail.gmail.com>

Ah right of course!  I should have said that we deliver these things to
customers, so a file format is needed.  We've have had good luck serving
simplified versions of these things out of zipped shapefiles from S3 via
mapserver so the thought was maybe the same trick would work with the right
format without having to import them into the DB.

P

On Fri, Aug 3, 2018 at 12:52 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com
> wrote:

> Hi Patrick,
>
> In terms of speed and MapServer, considering you have large vector data
> and require good indexing, I always use and recommend PostGIS.
>
> (of course if you asked this on the MapServer-users list you would get a
> whole lot of different opinions)
>
> But that is my initial recommendation, for your stated needs.
>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> https://gatewaygeomatics.com/
>
>
>
>
> On 2018-08-03 3:45 PM, Patrick Young wrote:
>
>> Hi all,
>>
>> I've been trying to figure out a good format to store some very large
>> vector data in.  Basically, its a bunch of really dense polygons describing
>> the cutlines that compose a mosaic.  We've had reasonable success using
>> zipped shapefiles, but on the larger guys we're exceeding the 2GB file
>> size, so a more modern alternative is desired.
>>
>> FileGBD worked alright but having to build GDAL with the ESRI driver to
>> write them is not desirable.  We also tried a GeoPackage, but it seemed a
>> little slow to read in QGIS.
>>
>> The dream would be a nicely compressed format that can be spatially
>> indexed so that we can serve them up efficiently with mapserver.  Any
>> recommendations are greatly appreciated!
>>
>> Thanks,
>> Patrick
>>
>>
>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180803/c8a836e7/attachment.html>

From jmckenna at gatewaygeomatics.com  Fri Aug  3 12:16:42 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 3 Aug 2018 16:16:42 -0300
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <CADXYQQ7vjO6WiYeM7GkpbZEnJH3L6eTCXHfiULyNBupeGkc_Cw@mail.gmail.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
 <1ec27125-574f-6c03-6be0-c9d67d074712@gatewaygeomatics.com>
 <CADXYQQ7vjO6WiYeM7GkpbZEnJH3L6eTCXHfiULyNBupeGkc_Cw@mail.gmail.com>
Message-ID: <de2d96f4-89e2-3cdc-9397-094fd7b8a299@gatewaygeomatics.com>

My next choice for customers (in cases of a hard file requirement) is 
always Spatialite (sqlite3 + libspatialite wrapped into a single file). 
I still prefer and use that to deliver, over the heavier GPK format. 
(again, everyone has their own preferences, I'm just sharing my 18+ 
years of MapServer experience with you here ha).

Have a nice weekend,

-jeff



On 2018-08-03 4:08 PM, Patrick Young wrote:
> Ah right of course!  I should have said that we deliver these things to 
> customers, so a file format is needed.  We've have had good luck serving 
> simplified versions of these things out of zipped shapefiles from S3 via 
> mapserver so the thought was maybe the same trick would work with the 
> right format without having to import them into the DB.
> 
> P
> 
> On Fri, Aug 3, 2018 at 12:52 PM, Jeff McKenna 
> <jmckenna at gatewaygeomatics.com <mailto:jmckenna at gatewaygeomatics.com>> 
> wrote:
> 
>     Hi Patrick,
> 
>     In terms of speed and MapServer, considering you have large vector
>     data and require good indexing, I always use and recommend PostGIS.
> 
>     (of course if you asked this on the MapServer-users list you would
>     get a whole lot of different opinions)
> 
>     But that is my initial recommendation, for your stated needs.
> 
>     -jeff
> 
> 
> 
>     -- 
>     Jeff McKenna
>     MapServer Consulting and Training Services
>     https://gatewaygeomatics.com/
> 
> 
> 
> 
>     On 2018-08-03 3:45 PM, Patrick Young wrote:
> 
>         Hi all,
> 
>         I've been trying to figure out a good format to store some very
>         large vector data in.  Basically, its a bunch of really dense
>         polygons describing the cutlines that compose a mosaic.  We've
>         had reasonable success using zipped shapefiles, but on the
>         larger guys we're exceeding the 2GB file size, so a more modern
>         alternative is desired.
> 
>         FileGBD worked alright but having to build GDAL with the ESRI
>         driver to write them is not desirable.  We also tried a
>         GeoPackage, but it seemed a little slow to read in QGIS.
> 
>         The dream would be a nicely compressed format that can be
>         spatially indexed so that we can serve them up efficiently with
>         mapserver.  Any recommendations are greatly appreciated!
> 
>         Thanks,
>         Patrick
> 
> 


From even.rouault at spatialys.com  Fri Aug  3 12:49:24 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 03 Aug 2018 21:49:24 +0200
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <de2d96f4-89e2-3cdc-9397-094fd7b8a299@gatewaygeomatics.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
 <CADXYQQ7vjO6WiYeM7GkpbZEnJH3L6eTCXHfiULyNBupeGkc_Cw@mail.gmail.com>
 <de2d96f4-89e2-3cdc-9397-094fd7b8a299@gatewaygeomatics.com>
Message-ID: <8677342.B9eQ0rrbQq@even-i700>

> I still prefer and use that to deliver, over the heavier GPK format.

Sizes of GeoPackage and Spatialite DBs should be very similar in most cases. 
They differ only by the geometry encoding, which in both cases is more or less 
a header + WKB or a variant of WKB. Spatialite DBs can be significantly 
smaller only if using compressed geometries (-lco COMPRESS_GEOM=YES)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Sun Aug  5 10:15:51 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sun, 5 Aug 2018 10:15:51 -0700 (MST)
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
Message-ID: <1533489351140-0.post@n6.nabble.com>

Patrick Young wrote
> We also tried a GeoPackage, but it seemed a little slow to read in QGIS.

Hi,

Could you give some more details about your GeoPackage and what you mean
with "little slow"? I have pretty good experiences about using GeoPackage as
data source for MapServer.  I also just tried how a polygon layer with 1.1
million polygons behaves with QGIS and panning and zooming is pretty much
immediate when the map scale is reasonable. With reasonable scale I mean
that roughly 50000 polygons or less fits the map view so that the spatial
index can drop most of the records.

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From idan at miara.com  Mon Aug  6 08:38:22 2018
From: idan at miara.com (Idan Miara)
Date: Mon, 6 Aug 2018 18:38:22 +0300
Subject: [gdal-dev] gdal wms
Message-ID: <CAEDrt3_CJr=MOuyP9rHpvebP5wJ3sTZa-_=3mh1o8rt-D5RLLw@mail.gmail.com>

Hi,

I'm trying to use the gdal_wms driver.
One of the parameters that I need is the raster size (Width+Height).

I succeeded using the driver with a GeoTIF that I served via geoserver, so
I could use gdalinfo to get that info.

How can I retrieve the raster size for a layer that I don't have a backend
raster to use with gdalinfo? The size doesn't appear in the GetCapabilities
of the wms service.

Kind Regards,
Idan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180806/ee8bea52/attachment.html>

From ijturton at gmail.com  Mon Aug  6 09:50:11 2018
From: ijturton at gmail.com (Ian Turton)
Date: Mon, 6 Aug 2018 17:50:11 +0100
Subject: [gdal-dev] gdal wms
In-Reply-To: <CAEDrt3_CJr=MOuyP9rHpvebP5wJ3sTZa-_=3mh1o8rt-D5RLLw@mail.gmail.com>
References: <CAEDrt3_CJr=MOuyP9rHpvebP5wJ3sTZa-_=3mh1o8rt-D5RLLw@mail.gmail.com>
Message-ID: <CA+=cGJnDcz_tiWPpbjyq0X7_zRxv0Vh4i=Y06ewd-cVwMtkd9g@mail.gmail.com>

You just specify the size of the image of the map that you would like, this
is unrelated to the size of the original file.

Ian

On Mon, 6 Aug 2018 at 16:38, Idan Miara <idan at miara.com> wrote:

> Hi,
>
> I'm trying to use the gdal_wms driver.
> One of the parameters that I need is the raster size (Width+Height).
>
> I succeeded using the driver with a GeoTIF that I served via geoserver, so
> I could use gdalinfo to get that info.
>
> How can I retrieve the raster size for a layer that I don't have a backend
> raster to use with gdalinfo? The size doesn't appear in the GetCapabilities
> of the wms service.
>
> Kind Regards,
> Idan.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Ian Turton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180806/03d65246/attachment.html>

From xenon at alphapixel.com  Mon Aug  6 12:40:25 2018
From: xenon at alphapixel.com (Chris Hanson)
Date: Mon, 6 Aug 2018 21:40:25 +0200
Subject: [gdal-dev] Building GDAL with PROJ4 on Android
Message-ID: <CAGoufmai6XqzRJnnNqqGuUxWN2UOrUgnL909nva4HX7mc9aBrw@mail.gmail.com>

We have been struggling for months to get osgEarth ( http://osgearth.org/ )
working on Android using a PROJ4 equipped GDAL 2.x build. We have it
working with a scratch-built GDAL, but it lacks the PROJ4 capabilities.

GDAL reports lacking PROJ4 at runtime. The --with-static-proj option is
said to be deprecated.

Has anyone successfully built a GDAL 2.x with PROJ4 on Android?

-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
http://www.alphapixel.com/
Training • Consulting • Contracting
3D • Scene Graphs (Open Scene Graph/OSG) • OpenGL 2 • OpenGL 3 • OpenGL 4 •
GLSL • OpenGL ES 1 • OpenGL ES 2 • OpenCL
Legal/IP • Forensics • Imaging • UAVs • GIS • GPS •
osgEarth • Terrain • Telemetry • Cryptography • LIDAR • Embedded • Mobile •
iPhone/iPad/iOS • Android
@alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180806/f84c5c66/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug  6 14:18:37 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 6 Aug 2018 14:18:37 -0700 (MST)
Subject: [gdal-dev] gdal wms
In-Reply-To: <CAEDrt3_CJr=MOuyP9rHpvebP5wJ3sTZa-_=3mh1o8rt-D5RLLw@mail.gmail.com>
References: <CAEDrt3_CJr=MOuyP9rHpvebP5wJ3sTZa-_=3mh1o8rt-D5RLLw@mail.gmail.com>
Message-ID: <1533590317608-0.post@n6.nabble.com>

Idan Miara wrote
> How can I retrieve the raster size for a layer that I don't have a backend
> raster to use with gdalinfo? The size doesn't appear in the
> GetCapabilities
> of the wms service.

Hi,

In WMS 1.3.0 it is possible, but not necassary, to include resx and resy in
GetCapabities.

<BoundingBox CRS="EPSG:26986"
minx="189000" miny="834000" maxx="285000" maxy="962000" resx="1" resy="1" />

If they are included you can use them for calculating the sixe of the layer
as pixels. If resx and resy are missing you can just make a good guess about
the native resolution of the layer.

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From idan at miara.com  Mon Aug  6 14:24:58 2018
From: idan at miara.com (Idan Miara)
Date: Tue, 7 Aug 2018 00:24:58 +0300
Subject: [gdal-dev] gdal wms
In-Reply-To: <1533590317608-0.post@n6.nabble.com>
References: <CAEDrt3_CJr=MOuyP9rHpvebP5wJ3sTZa-_=3mh1o8rt-D5RLLw@mail.gmail.com>
 <1533590317608-0.post@n6.nabble.com>
Message-ID: <CAEDrt3_oGkwVERA==cxUxn01ncwxS28ZpQ69QJBZisAwM0Ra=g@mail.gmail.com>

Thank you both for your answers!

On Tue, 7 Aug 2018, 00:18 jratike80, <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

> Idan Miara wrote
> > How can I retrieve the raster size for a layer that I don't have a
> backend
> > raster to use with gdalinfo? The size doesn't appear in the
> > GetCapabilities
> > of the wms service.
>
> Hi,
>
> In WMS 1.3.0 it is possible, but not necassary, to include resx and resy in
> GetCapabities.
>
> <BoundingBox CRS="EPSG:26986"
> minx="189000" miny="834000" maxx="285000" maxy="962000" resx="1" resy="1"
> />
>
> If they are included you can use them for calculating the sixe of the layer
> as pixels. If resx and resy are missing you can just make a good guess
> about
> the native resolution of the layer.
>
> -Jukka Rahkonen-
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/02e016fc/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Aug  7 03:22:20 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 7 Aug 2018 10:22:20 +0000
Subject: [gdal-dev] Adding subdataset into GeoPackage raster with -a_srs
 requires also RASTER_TABLE
Message-ID: <e16357b9ca9a4f77abc6764c5d957ce1@C119S212VM042.msvyvi.vaha.local>

Hi,

I was doing some tests with GeoPackage rasters and found that if I define -a_srs then also -co RASTER_TABLE is required which feels unnecessary.
Steps to reproduce:

Create initial gpkg
gdal_translate -of GPKG global_mosaic_0.png raster.gpkg -a_srs epsg:4326

Try to add a subdataset and assign srs for that too
gdal_translate -of GPKG global_mosaic_1.png raster.gpkg -a_srs epsg:4326 -co APPEND_SUBDATASET=YES
0ERROR 1: RASTER_TABLE must be set to a non empty value

Append subdataset without -a_srs succeeds even if I do not give the name for the raster table.

I know that the corner coordinates which are reported from the whole GeoPackage which contains several subdatasets are meaningless, but I still wonder why it reports just range 0-512 which does not fit with any of my raster tables nor with the pixel space used by the tiles. Is it a hardcoded value?

gdalinfo raster.gpkg
...
Size is 512, 512
Coordinate System is `'
Subdatasets:
  SUBDATASET_1_NAME=GPKG:raster.gpkg:raster
  SUBDATASET_1_DESC=raster - raster
  SUBDATASET_2_NAME=GPKG:raster.gpkg:global_mosaic_1
  SUBDATASET_2_DESC=global_mosaic_1 - global_mosaic_1

Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/ffcc72a2/attachment.html>

From renehh at gmail.com  Tue Aug  7 03:37:05 2018
From: renehh at gmail.com (=?UTF-8?B?UmVuw6kgSGFuc2Vu?=)
Date: Tue, 7 Aug 2018 12:37:05 +0200
Subject: [gdal-dev] Building GDAL with PROJ4 on Android
In-Reply-To: <CAGoufmai6XqzRJnnNqqGuUxWN2UOrUgnL909nva4HX7mc9aBrw@mail.gmail.com>
References: <CAGoufmai6XqzRJnnNqqGuUxWN2UOrUgnL909nva4HX7mc9aBrw@mail.gmail.com>
Message-ID: <CAB-60ngqjjqFc_h4mENKXnCt-z2SObFvJSk=1HE-d9RsLZR-zg@mail.gmail.com>

Hey Chris,


>From a previous yak-shaving-adventure, I've dabbled in building Proj and
Geos for Android, because they were dependencies of Spatialite, which I'm
using for an app.

That resulted in a homegrown build system based on docker, aptly named:
Building for Android with Docker. It is meant as a repository for working
build sets for various native libs.

I didn't previously have GDAL in there, but decided to give it a shot and
add it, to see how much effort was required. Not much as it were.

I've added GDAL now, with a compile-time dependency for Proj, so it
shouldn't be more of a hassle than simply checking out the repo and then
"make gdal".

Instructions for how to extract the libraries from the container, is in the
readme. Here's the link to the repo:

https://github.com/rhardih/bad

I've built and tried a very simple Android app, and added some of the
source from https://gdal.org/gdalinfo.c.html, to see if the libs actually
loaded up and Proj was supported. It seems to work just fine. You can find
the example app, source and output here:

https://github.com/rhardih/gdal-proj-android

So far I've only used this project for personal consumption, and I need to
do a lot of grooming and test/writing before it's really ready for public
use, but this might solve your problem in this instance.


Best regards,

René Hansen



On Mon, 6 Aug 2018 at 21:40 Chris Hanson <xenon at alphapixel.com> wrote:

> We have been struggling for months to get osgEarth ( http://osgearth.org/
> ) working on Android using a PROJ4 equipped GDAL 2.x build. We have it
> working with a scratch-built GDAL, but it lacks the PROJ4 capabilities.
>
> GDAL reports lacking PROJ4 at runtime. The --with-static-proj option is
> said to be deprecated.
>
> Has anyone successfully built a GDAL 2.x with PROJ4 on Android?
>
> --
> Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
> http://www.alphapixel.com/
> Training • Consulting • Contracting
> 3D • Scene Graphs (Open Scene Graph/OSG) • OpenGL 2 • OpenGL 3 • OpenGL 4
> • GLSL • OpenGL ES 1 • OpenGL ES 2 • OpenCL
> Legal/IP • Forensics • Imaging • UAVs • GIS • GPS •
> osgEarth • Terrain • Telemetry • Cryptography • LIDAR • Embedded • Mobile •
> iPhone/iPad/iOS • Android
> @alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
> 623-PIXL [7495]
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/7fc72388/attachment-0001.html>

From renehh at gmail.com  Tue Aug  7 03:40:20 2018
From: renehh at gmail.com (=?UTF-8?B?UmVuw6kgSGFuc2Vu?=)
Date: Tue, 7 Aug 2018 12:40:20 +0200
Subject: [gdal-dev] Building GDAL with PROJ4 on Android
In-Reply-To: <CAB-60ngqjjqFc_h4mENKXnCt-z2SObFvJSk=1HE-d9RsLZR-zg@mail.gmail.com>
References: <CAGoufmai6XqzRJnnNqqGuUxWN2UOrUgnL909nva4HX7mc9aBrw@mail.gmail.com>
 <CAB-60ngqjjqFc_h4mENKXnCt-z2SObFvJSk=1HE-d9RsLZR-zg@mail.gmail.com>
Message-ID: <CAB-60ngNp9feViHgurgE1Z91GZQUT1kGxVZi95bK65_d_RYpeQ@mail.gmail.com>

I forgot to mention, my test device is a Samsung Galaxy S5 running Android
6.0. I haven't tested on other devices so ymmv.

/René

On Tue, 7 Aug 2018 at 12:37 René Hansen <renehh at gmail.com> wrote:

> Hey Chris,
>
>
> From a previous yak-shaving-adventure, I've dabbled in building Proj and
> Geos for Android, because they were dependencies of Spatialite, which I'm
> using for an app.
>
> That resulted in a homegrown build system based on docker, aptly named:
> Building for Android with Docker. It is meant as a repository for working
> build sets for various native libs.
>
> I didn't previously have GDAL in there, but decided to give it a shot and
> add it, to see how much effort was required. Not much as it were.
>
> I've added GDAL now, with a compile-time dependency for Proj, so it
> shouldn't be more of a hassle than simply checking out the repo and then
> "make gdal".
>
> Instructions for how to extract the libraries from the container, is in
> the readme. Here's the link to the repo:
>
> https://github.com/rhardih/bad
>
> I've built and tried a very simple Android app, and added some of the
> source from https://gdal.org/gdalinfo.c.html, to see if the libs actually
> loaded up and Proj was supported. It seems to work just fine. You can find
> the example app, source and output here:
>
> https://github.com/rhardih/gdal-proj-android
>
> So far I've only used this project for personal consumption, and I need to
> do a lot of grooming and test/writing before it's really ready for public
> use, but this might solve your problem in this instance.
>
>
> Best regards,
>
> René Hansen
>
>
>
> On Mon, 6 Aug 2018 at 21:40 Chris Hanson <xenon at alphapixel.com> wrote:
>
>> We have been struggling for months to get osgEarth ( http://osgearth.org/
>> ) working on Android using a PROJ4 equipped GDAL 2.x build. We have it
>> working with a scratch-built GDAL, but it lacks the PROJ4 capabilities.
>>
>> GDAL reports lacking PROJ4 at runtime. The --with-static-proj option is
>> said to be deprecated.
>>
>> Has anyone successfully built a GDAL 2.x with PROJ4 on Android?
>>
>> --
>> Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
>> http://www.alphapixel.com/
>> Training • Consulting • Contracting
>> 3D • Scene Graphs (Open Scene Graph/OSG) • OpenGL 2 • OpenGL 3 • OpenGL 4
>> • GLSL • OpenGL ES 1 • OpenGL ES 2 • OpenCL
>> Legal/IP • Forensics • Imaging • UAVs • GIS • GPS •
>> osgEarth • Terrain • Telemetry • Cryptography • LIDAR • Embedded • Mobile •
>> iPhone/iPad/iOS • Android
>> @alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
>> 623-PIXL [7495]
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/c3e36a82/attachment.html>

From even.rouault at spatialys.com  Tue Aug  7 03:42:39 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 07 Aug 2018 12:42:39 +0200
Subject: [gdal-dev] Adding subdataset into GeoPackage raster with -a_srs
	requires also RASTER_TABLE
In-Reply-To: <e16357b9ca9a4f77abc6764c5d957ce1@C119S212VM042.msvyvi.vaha.local>
References: <e16357b9ca9a4f77abc6764c5d957ce1@C119S212VM042.msvyvi.vaha.local>
Message-ID: <15050157.1gfxRGmo8R@even-i700>

Hi Jukka,

> 
> I was doing some tests with GeoPackage rasters and found that if I define
> -a_srs then also -co RASTER_TABLE is required which feels unnecessary.
> Steps to reproduce:
> 
> Create initial gpkg
> gdal_translate -of GPKG global_mosaic_0.png raster.gpkg -a_srs epsg:4326
> 
> Try to add a subdataset and assign srs for that too
> gdal_translate -of GPKG global_mosaic_1.png raster.gpkg -a_srs epsg:4326 -co
> APPEND_SUBDATASET=YES 0ERROR 1: RASTER_TABLE must be set to a non empty
> value
> 
> Append subdataset without -a_srs succeeds even if I do not give the name for
> the raster table.

I just fixed it in master.

> 
> I know that the corner coordinates which are reported from the whole
> GeoPackage which contains several subdatasets are meaningless, but I still
> wonder why it reports just range 0-512 which does not fit with any of my
> raster tables nor with the pixel space used by the tiles. Is it a hardcoded
> value?

Yes, this is the intialization value in the GDALDataset class. This hasn't 
changed since the first version of the GDALDataset class 20 years ago :-)
I'm not sure why this is not zero. Could probably be changed. That's an easy 
exercice if someone wants to try and observe if that breaks things in the test 
suite (hopefully not). And then we could make gdalinfo to stop reporting 
corner coordinates in that case.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From demonbusov1 at yandex.ru  Tue Aug  7 05:34:54 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Tue, 7 Aug 2018 05:34:54 -0700 (MST)
Subject: [gdal-dev] GDALTranslateOptions: how to send "--config
 GDAL_TIFF_INTERNAL_MASK YES"
In-Reply-To: <1632582.GSZFfuOo05@even-i700>
References: <1529465132291-0.post@n6.nabble.com> <1632582.GSZFfuOo05@even-i700>
Message-ID: <1533645294892-0.post@n6.nabble.com>

Hi! I was wrong, everything I've tried before does not work. I'm using С# and
still could not make it work correctly. Please, tell me what bindings are
required?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From demonbusov1 at yandex.ru  Tue Aug  7 05:43:43 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Tue, 7 Aug 2018 05:43:43 -0700 (MST)
Subject: [gdal-dev] GDALTranslateOptions: how to send "--config
 GDAL_TIFF_INTERNAL_MASK YES"
In-Reply-To: <1632582.GSZFfuOo05@even-i700>
References: <1529465132291-0.post@n6.nabble.com> <1632582.GSZFfuOo05@even-i700>
Message-ID: <1533645823649-0.post@n6.nabble.com>

see alse https://github.com/OSGeo/gdal/issues/689

It seems that it is reproduced on the python, too.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From demonbusov1 at yandex.ru  Tue Aug  7 05:44:39 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Tue, 7 Aug 2018 05:44:39 -0700 (MST)
Subject: [gdal-dev] GDALTranslateOptions: how to send "--config
 GDAL_TIFF_INTERNAL_MASK YES"
In-Reply-To: <1632582.GSZFfuOo05@even-i700>
References: <1529465132291-0.post@n6.nabble.com> <1632582.GSZFfuOo05@even-i700>
Message-ID: <1533645879811-0.post@n6.nabble.com>

see also https://github.com/OSGeo/gdal/issues/689

It seems that it is reproduced on the python, too.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From demonbusov1 at yandex.ru  Tue Aug  7 06:23:28 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Tue, 7 Aug 2018 06:23:28 -0700 (MST)
Subject: [gdal-dev] GDALTranslateOptions: how to send "--config
 GDAL_TIFF_INTERNAL_MASK YES"
In-Reply-To: <1632582.GSZFfuOo05@even-i700>
References: <1529465132291-0.post@n6.nabble.com> <1632582.GSZFfuOo05@even-i700>
Message-ID: <1533648208930-0.post@n6.nabble.com>

see also
https://github.com/mapbox/rasterio/blob/master/docs/topics/image_options.rst

There is a similar for C#:

*.Env(GDAL_TIFF_INTERNAL_MASK=True)*

?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From patrick.mckendree.young at gmail.com  Tue Aug  7 13:36:45 2018
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Tue, 7 Aug 2018 14:36:45 -0600
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <1533489351140-0.post@n6.nabble.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
 <1533489351140-0.post@n6.nabble.com>
Message-ID: <CADXYQQ6ufzDVWrfkqiRoViz718Vg5D4KpwWB-2JiGFLASnR7PQ@mail.gmail.com>

Yeah it's not the geopackage format but that the polygons are just huge,
sorry about that.  There is ~1000 polygons but each one is a ton of
vertices (~100k), so zoomed out the redraw takes a little while (seconds).
This is true with fileGBD too, which feels slower than the gpkg FWIW.  In
practice we have a simplified version of the data we usually deal with and
that is plenty fast.

I guess the dream is a format that has "overviews" but for vector data.
Maybe gpkg already supports this idea? I haven't really dug into either
format, so apologies for my naivety.

On Sun, Aug 5, 2018 at 11:15 AM, jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Patrick Young wrote
> > We also tried a GeoPackage, but it seemed a little slow to read in QGIS.
>
> Hi,
>
> Could you give some more details about your GeoPackage and what you mean
> with "little slow"? I have pretty good experiences about using GeoPackage
> as
> data source for MapServer.  I also just tried how a polygon layer with 1.1
> million polygons behaves with QGIS and panning and zooming is pretty much
> immediate when the map scale is reasonable. With reasonable scale I mean
> that roughly 50000 polygons or less fits the map view so that the spatial
> index can drop most of the records.
>
> -Jukka Rahkonen-
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/cf43748c/attachment.html>

From Benjamin.Stadin at heidelberg-mobil.com  Tue Aug  7 14:35:17 2018
From: Benjamin.Stadin at heidelberg-mobil.com (Benjamin Stadin)
Date: Tue, 7 Aug 2018 21:35:17 +0000
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <CADXYQQ6ufzDVWrfkqiRoViz718Vg5D4KpwWB-2JiGFLASnR7PQ@mail.gmail.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
 <1533489351140-0.post@n6.nabble.com>
 <CADXYQQ6ufzDVWrfkqiRoViz718Vg5D4KpwWB-2JiGFLASnR7PQ@mail.gmail.com>
Message-ID: <F07D7561-40CC-4015-ADC7-B64E1D5E634B@heidelberg-mobil.com>

Geopackage is not very space efficient, due to the required compatibility with the spec and the „ST*“ methods matching their postgres counterparts. Check the header which is carried over for each geometry:
https://github.com/opengeospatial/geopackage/blob/master/spec/2a_features.adoc

For an example, the  version and SRS is already defined as part of the meta table, but still need to be part of each and every geometry due to technical details.

We do have a proprietary indexed vector tile format which I‘m considering to open source. Though the interest has been rather low in the past to justify putting effort into it. It works like a tile pyramid, using same zoom levels as OSM, but it is projection independent using midpoints of geometries to store vector data into a sinusoidal grid. The grid is used as the tile pyramid storage, the actual projection used by the geometries does not matter other than a projection step between loading and visualization is required. Large line strings like roads are split when writing the data to the storage tiles, and connected dynamically at load time when loading the tiles. Polygons are not split, you‘ll always get a full polygon when querying the tile store (there is additional complexity though for implementing the loading mechanism,into a client app, because it also deals with overlapping polygons. E.g. you could have tiles 1,2,3 in direct „sight“ but the loading mechanism might have to load a tile 5 which overlaps tile 2, which is known as part of the meta info in tile 2).
Storing polygons of different levels of detail for different zoom levels is of course supported. The geometries are wkb-like, but more close to GeoJson (with properties / tags). The storage format for the tiles is described as Google FlatBuffer.

Ben

Am 07.08.2018 um 22:37 schrieb Patrick Young <patrick.mckendree.young at gmail.com<mailto:patrick.mckendree.young at gmail.com>>:

Yeah it's not the geopackage format but that the polygons are just huge, sorry about that.  There is ~1000 polygons but each one is a ton of vertices (~100k), so zoomed out the redraw takes a little while (seconds).  This is true with fileGBD too, which feels slower than the gpkg FWIW.  In practice we have a simplified version of the data we usually deal with and that is plenty fast.

I guess the dream is a format that has "overviews" but for vector data.  Maybe gpkg already supports this idea? I haven't really dug into either format, so apologies for my naivety.

On Sun, Aug 5, 2018 at 11:15 AM, jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Patrick Young wrote
> We also tried a GeoPackage, but it seemed a little slow to read in QGIS.

Hi,

Could you give some more details about your GeoPackage and what you mean
with "little slow"? I have pretty good experiences about using GeoPackage as
data source for MapServer.  I also just tried how a polygon layer with 1.1
million polygons behaves with QGIS and panning and zooming is pretty much
immediate when the map scale is reasonable. With reasonable scale I mean
that roughly 50000 polygons or less fits the map view so that the spatial
index can drop most of the records.

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/15d9373d/attachment.html>

From Benjamin.Stadin at heidelberg-mobil.com  Tue Aug  7 15:02:52 2018
From: Benjamin.Stadin at heidelberg-mobil.com (Benjamin Stadin)
Date: Tue, 7 Aug 2018 22:02:52 +0000
Subject: [gdal-dev] Recommended OGR Driver For Very Large Vector Data
In-Reply-To: <F07D7561-40CC-4015-ADC7-B64E1D5E634B@heidelberg-mobil.com>
References: <CADXYQQ6bX+vAiY0LhcyXQVAtsPV_VyZkPSkR6Zt5Oi+55hYbNg@mail.gmail.com>
 <1533489351140-0.post@n6.nabble.com>
 <CADXYQQ6ufzDVWrfkqiRoViz718Vg5D4KpwWB-2JiGFLASnR7PQ@mail.gmail.com>,
 <F07D7561-40CC-4015-ADC7-B64E1D5E634B@heidelberg-mobil.com>
Message-ID: <038C53B6-C59D-4068-A17E-DD950BAF2AC8@heidelberg-mobil.com>

... I should have said Geopackage is „not optimal“ in regards to space efficiency. It‘s still not bad at all when compared to other formats.


Am 07.08.2018 um 23:35 schrieb Benjamin Stadin <Benjamin.Stadin at heidelberg-mobil.com<mailto:Benjamin.Stadin at heidelberg-mobil.com>>:

Geopackage is not very space efficient, due to the required compatibility with the spec and the „ST*“ methods matching their postgres counterparts. Check the header which is carried over for each geometry:
https://github.com/opengeospatial/geopackage/blob/master/spec/2a_features.adoc

For an example, the  version and SRS is already defined as part of the meta table, but still need to be part of each and every geometry due to technical details.

We do have a proprietary indexed vector tile format which I‘m considering to open source. Though the interest has been rather low in the past to justify putting effort into it. It works like a tile pyramid, using same zoom levels as OSM, but it is projection independent using midpoints of geometries to store vector data into a sinusoidal grid. The grid is used as the tile pyramid storage, the actual projection used by the geometries does not matter other than a projection step between loading and visualization is required. Large line strings like roads are split when writing the data to the storage tiles, and connected dynamically at load time when loading the tiles. Polygons are not split, you‘ll always get a full polygon when querying the tile store (there is additional complexity though for implementing the loading mechanism,into a client app, because it also deals with overlapping polygons. E.g. you could have tiles 1,2,3 in direct „sight“ but the loading mechanism might have to load a tile 5 which overlaps tile 2, which is known as part of the meta info in tile 2).
Storing polygons of different levels of detail for different zoom levels is of course supported. The geometries are wkb-like, but more close to GeoJson (with properties / tags). The storage format for the tiles is described as Google FlatBuffer.

Ben

Am 07.08.2018 um 22:37 schrieb Patrick Young <patrick.mckendree.young at gmail.com<mailto:patrick.mckendree.young at gmail.com>>:

Yeah it's not the geopackage format but that the polygons are just huge, sorry about that.  There is ~1000 polygons but each one is a ton of vertices (~100k), so zoomed out the redraw takes a little while (seconds).  This is true with fileGBD too, which feels slower than the gpkg FWIW.  In practice we have a simplified version of the data we usually deal with and that is plenty fast.

I guess the dream is a format that has "overviews" but for vector data.  Maybe gpkg already supports this idea? I haven't really dug into either format, so apologies for my naivety.

On Sun, Aug 5, 2018 at 11:15 AM, jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Patrick Young wrote
> We also tried a GeoPackage, but it seemed a little slow to read in QGIS.

Hi,

Could you give some more details about your GeoPackage and what you mean
with "little slow"? I have pretty good experiences about using GeoPackage as
data source for MapServer.  I also just tried how a polygon layer with 1.1
million polygons behaves with QGIS and panning and zooming is pretty much
immediate when the map scale is reasonable. With reasonable scale I mean
that roughly 50000 polygons or less fits the map view so that the spatial
index can drop most of the records.

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180807/fb5049da/attachment-0001.html>

From demonbusov1 at yandex.ru  Tue Aug  7 20:19:58 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Tue, 7 Aug 2018 20:19:58 -0700 (MST)
Subject: [gdal-dev] Is there "--config GDAL_TIFF_INTERNAL_MASK YES" C#
	equivalent???
Message-ID: <1533698398673-0.post@n6.nabble.com>

How to use a bunch:

Dataset image = Gdal.OpenShared(sourceCopy, Access.GA_ReadOnly);
Gdal.wrapper_GDALTranslate(translatedFile, image, options, null, null);

to create a JPEG-compressed TIFF with internal mask from a RGBA dataset (in
C#)?

I'm interested in the C# equivalent of a call *--config
GDAL_TIFF_INTERNAL_MASK YES*.

Please, help.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue Aug  7 23:33:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 08 Aug 2018 08:33:09 +0200
Subject: [gdal-dev] Is there "--config GDAL_TIFF_INTERNAL_MASK YES" C#
	equivalent???
In-Reply-To: <1533698398673-0.post@n6.nabble.com>
References: <1533698398673-0.post@n6.nabble.com>
Message-ID: <2064023.DPzEfEM4B6@even-i700>

On mardi 7 août 2018 20:19:58 CEST Dmitriy T. wrote:
> How to use a bunch:
> 
> Dataset image = Gdal.OpenShared(sourceCopy, Access.GA_ReadOnly);
> Gdal.wrapper_GDALTranslate(translatedFile, image, options, null, null);
> 
> to create a JPEG-compressed TIFF with internal mask from a RGBA dataset (in
> C#)?
> 
> I'm interested in the C# equivalent of a call *--config
> GDAL_TIFF_INTERNAL_MASK YES*.
> 

In a previous reply, I missed the fact that --config x y isn't expanded by 
utility-as-a-library-function, but only by the binaries

So you have to call

Gdal.SetConfigOption("GDAL_TIFF_INTERNAL_MASK", "YES")

or set is as an environment variable

before calling

Gdal.wrapper_GDALTranslate()

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From demonbusov1 at yandex.ru  Wed Aug  8 00:17:09 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Wed, 8 Aug 2018 00:17:09 -0700 (MST)
Subject: [gdal-dev] Is there "--config GDAL_TIFF_INTERNAL_MASK YES" C#
 equivalent???
In-Reply-To: <2064023.DPzEfEM4B6@even-i700>
References: <1533698398673-0.post@n6.nabble.com> <2064023.DPzEfEM4B6@even-i700>
Message-ID: <1533712629070-0.post@n6.nabble.com>

Thanks .

I did as you said, but could you explain why I get a different result:

Before:

...
string translateOptions = options + translatedFileName + "--config
GDAL_TIFF_INTERNAL_MASK YES";
var gdalTranslateProc = new ProcessStartInfo
{
	Arguments = translateOptions,
	FileName = GdalDir + "\\gdal_translate.exe",
	WindowStyle = ProcessWindowStyle.Hidden,
	CreateNoWindow = true,
	UseShellExecute = true
};

using (Process proc = Process.Start(gdalTranslateProc))
	proc?.WaitForExit();

	
After:

...
string[] translateOptions = options.Split(' ');
var options = new GDALTranslateOptions(translateOptions);

Gdal.SetConfigOption("GDAL_TIFF_INTERNAL_MASK", "YES");
Gdal.wrapper_GDALTranslate(translatedFileName, image, options, null, null);


Next is the call:

var str = " -dstnodata 255 -r bilinear -co PHOTOMETRIC=YCBCR" +
		  " -co COMPRESS=JPEG -co JPEG_QUALITY=100 -co BIGTIFF=YES -co TILED=YES"
+
		  " -tps" + 
		  " -s_srs " + "\"" + proj4SourceStr + "\"" +
		  " -t_srs " + "\"" + proj4TargetStr + "\"" +
		  " \"" + translatedFileName + "\" \"" + warpedFile + "\"";

var gdalWarpProc = new ProcessStartInfo
{
	Arguments = str,
	FileName = GdalDir + "\\gdalwarp.exe",
	WindowStyle = ProcessWindowStyle.Hidden,
	CreateNoWindow = true,
	UseShellExecute = true
};

The "Before" code causes the TRANSPARENT PART of the source .png image to
become white.

But for some reason:
The "After" code causes the ENTIRE of the source .png image to become white.

How to make the "after" code to work as the "before" code?


The common goal is to get rid of an explicit call gdal_translate.exe and
work with c# wrapper (because it does not support the .ecw plugin).

Or an alternative question: why the code "After" supports the .ecw format
automatically, 
but the code "Before" does not support?
How to force the code "Before" to see and to use the .ecw plugin?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From james.mcclain at gmail.com  Wed Aug  8 04:49:27 2018
From: james.mcclain at gmail.com (James McClain)
Date: Wed, 8 Aug 2018 07:49:27 -0400
Subject: [gdal-dev] HDF5 and NetCDF now have VSI support
Message-ID: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>

Hello,

Support for use of /vsi paths to HDF5 and NetCDF files has just been merged
into master (please see here https://github.com/OSGeo/gdal/pull/786 ).

We believe that this will be helpful for many people because it is now
possible to work with remote files of those formats on an on-demand basis
rather than being required to download them.  For example, with an
installation built from current master, is now possible to type

gdalinfo
'/vsis3/nasanex/NEX-GDDP/BCSD/rcp85/day/atmos/tasmax/r1i1p1/v1.0/tasmax_day_BCSD_rcp85_r1i1p1_inmcm4_2100.nc'

and receive the appropriate output, or such a path can be used from within
a program.  All of the various VSI drivers should work (e.g. /vsicurl,
/vsitar, et cetera).

There are a few caveats to mention.  First, this capability makes use of
the userfaultfd (user mode page fault handling) capability in recent Linux
kernels so you will need Linux 4.3 or later.

Also, this capability is read-only at this time.

Also, for NetCDF support, you will need libnetcdf 4.5 or later.

Also, because files are mapped into virtual memory, users might want to
impose a (soft) limit on the number of virtual memory pages that can be
consumed by any given file.  That is done by setting the GDAL_UFFD_LIMIT
configuration option to some integer value indicating the number of pages.

One should be careful when using GDAL_UFFD_LIMIT: because it makes use of
custom signal handlers for SIGSEGV and SIGBUS, it is important not to do
anything in another thread in the same process that also changes the
behaviour of those signals while actively using a dataset backed by the
uffd machinery.  A concrete example: you should probably not setup a
/vsimem asset from one thread while another thread is reading a uffd backed
asset (it is, however, perfectly safe to do use /vsimem from one thread and
uffd-backed assets from another as long as the /vsimem setup [when the
changes to signal handling happen] does not overlap in time with the
uffd-backed reads).

I would like to personally thank Even for his patience and accommodation
during this work and for his contributions to it.

Thanks,
James McClain

-- 
"I prayed for freedom for twenty years, but received no answer until I
prayed with my legs."
     -- Frederick Douglass
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180808/8c42f7c5/attachment.html>

From even.rouault at spatialys.com  Wed Aug  8 05:30:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 08 Aug 2018 14:30:56 +0200
Subject: [gdal-dev] HDF5 and NetCDF now have VSI support
In-Reply-To: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>
References: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>
Message-ID: <2220969.4del49mWYV@even-i700>

> A concrete example: you should probably not setup a
> /vsimem asset from one thread while another thread is reading a uffd backed
> asset 

Just a small correction: James meant here not to mix uffd with the use of the 
API in cpl_virtualmem.h ( CPLVirtualMemNew() and the like ).

/vsimem/ itself has nothing to do with cpl_virtualmem.h and so can be used 
with uffd without problem.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From james.mcclain at gmail.com  Wed Aug  8 06:08:22 2018
From: james.mcclain at gmail.com (James McClain)
Date: Wed, 8 Aug 2018 09:08:22 -0400
Subject: [gdal-dev] HDF5 and NetCDF now have VSI support
In-Reply-To: <2220969.4del49mWYV@even-i700>
References: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>
 <2220969.4del49mWYV@even-i700>
Message-ID: <CAD5SdwKuV=2bK2dpt4ZcrYN5JjGOOKD=VmD6Cy0AYSMS32pcXQ@mail.gmail.com>

Ah yes, my apologies.


On Wed, Aug 8, 2018 at 8:30 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> > A concrete example: you should probably not setup a
> > /vsimem asset from one thread while another thread is reading a uffd
> backed
> > asset
>
> Just a small correction: James meant here not to mix uffd with the use of
> the
> API in cpl_virtualmem.h ( CPLVirtualMemNew() and the like ).
>
> /vsimem/ itself has nothing to do with cpl_virtualmem.h and so can be used
> with uffd without problem.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
"I prayed for freedom for twenty years, but received no answer until I
prayed with my legs."
     -- Frederick Douglass
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180808/3e30d199/attachment.html>

From nicolas.cadieux at archeotec.ca  Wed Aug  8 13:18:38 2018
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Wed, 8 Aug 2018 16:18:38 -0400
Subject: [gdal-dev] Reading raw bin raster. Need help with .vrt please.
Message-ID: <7a62d943-967b-2871-67f6-cdcb25bb8737@archeotec.ca>

Hi,

I need help setting up the .vrt file to read a raw bin file. This is 
what I figured out about the files:

3601 row x 3601 columns, big endian byte order, 2-byte unsigned 
integer.  Some files are 2-byte signed integer or byte.  They have the 
following Extent. -72.0001388888888840,-1.0001388888888889 : 
-70.9998611111111018,0.0001388888888889.  Perhaps Georeferencing should 
be done in another step or can it be done in the .vrt?

I figure the file would look like this but I need help with the big 
endian, 2-byte unsigned int and ByteOrder.

<VRTDataset rasterXSize="3601" rasterYSize="3601">
     <VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
         <SourceFilename 
relativetoVRT="1">s01w072_slope.bin</SourceFilename>
         <ImageOffset>????</ImageOffset>
         <PixelOffset>????</PixelOffset>
         <LineOffset>?????</LineOffset>
         <ByteOrder>????</ByteOrder>
     </VRTRasterBand>
</VRTDataset>

Thanks in advance.

Nicolas Cadieux


From demonbusov1 at yandex.ru  Wed Aug  8 20:05:49 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Wed, 8 Aug 2018 20:05:49 -0700 (MST)
Subject: [gdal-dev] Gdal translate ECW to TIF.
Message-ID: <1533783949257-0.post@n6.nabble.com>

I took the following steps:


1) Download http://download.osgeo.org/gdal/2.3.0/gdal230.zip

2) Unzip to C:\gdal_ecw\gdal-2.3.0

3) Download, unzip and install
https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-0
to C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0

4) In C:\gdal_ecw\gdal-2.3.0\nmake.opt edit:

# Uncomment the following and update to enable ECW read support with the 5.0
SDK
#ECWDIR  =  "c:\Intergraph\ecwsdk5"
#ECWFLAGS = -DECWSDK_VERSION=50 \
#       -I$(ECWDIR)\include \
#       -I$(ECWDIR)\include/NCSECW/api -I$(ECWDIR)\include/NCSECW/jp2 \
#       -I$(ECWDIR)\include/NCSECW/ecw
#ECWLIB  =  $(ECWDIR)\lib\vc90\win32\NCSEcw.lib

to

# Uncomment the following and update to enable ECW read support with the 5.0
SDK
ECWDIR  =  "C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0"
ECWFLAGS = -DECWSDK_VERSION=50 \
      -I$(ECWDIR)\include \
      -I$(ECWDIR)\include/NCSECW/api -I$(ECWDIR)\include/NCSECW/jp2 \
      -I$(ECWDIR)\include/NCSECW/ecw
ECWLIB  =  $(ECWDIR)\lib\vc90\win32\NCSEcw.lib

5) In cmd as admin execute:
copy "C:\Intergraph\ERDAS ECW JPEG 2000 SDK
5.0\redistributable\vc90\win32\*.dll" C:\windows\system32
yes

6) In 86 Native Tools Command Prompt for VS 2017 cmd as admin execute:

A) cd C:\gdal_ecw\gdal-2.3.0
B) nmake -f makefile.vc
C) nmake /f makefile.vc install
D) nmake -f makefile.vc devinstall

7) Add in C:\gdal\gdal-2.3.0\apps:

A) from.png
B) from.ecw
C) C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0\bin\vc90\win32\NCSEcw.dll
D) C:\gdal\gdal-2.3.0\gdal203.dll

8) cd C:\gdal\gdal-2.3.0\apps
gdalinfo --formats

output:
...
PNG -raster- (rwv): Portable Network Graphics
...
ECW -raster- (rov): ERDAS Compressed Wavelets (SDK 5.0)
...

9) In cmd as admin:
gdal_translate -of GTiff -co "TILED=YES" from.png to.tif

result:
A) output message:
Input file size is 800, 1000
0...10...20...30...40...50...60...70...80...90...100 - done.
B) to.tif

10) In cmd as admin:
gdal_translate -of GTiff -co "TILED=YES" from.ecw to.tif

result:
A) output message: <no output message and no errors, but gdal_translate
completed>
B) no to.tif

Why ecw to tif not translated? Please help me.




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From kokoalberti at fastmail.com  Thu Aug  9 01:43:17 2018
From: kokoalberti at fastmail.com (Koko Alberti)
Date: Thu, 09 Aug 2018 10:43:17 +0200
Subject: [gdal-dev] Reading raw bin raster. Need help with .vrt please.
In-Reply-To: <7a62d943-967b-2871-67f6-cdcb25bb8737@archeotec.ca>
References: <7a62d943-967b-2871-67f6-cdcb25bb8737@archeotec.ca>
Message-ID: <1533804197.3146079.1468442856.4E164E5F@webmail.messagingengine.com>

Hi Nicolas,

You can add georeferencing information in separate <SRS> and <GeoTransform> nodes underneath the <VRTDataset>, that should work in one step.

For the data type of the <VRTRasterBand> you can use Byte or UInt16 for a 2 byte unsigned integer, or any of the other GDAL data types. Also, if you know the file size and the number of rows/columns but not datatype you can also work backwards to find the number of bytes used for a single pixel.

ImageOffset is usually 0, ByteOrder usually 'LSB'. PixelOffset 1 for Byte and 2 for Uint16, LineOffset is usually the number of columns multiplied by the PixelOffset.

See also https://www.gdal.org/gdal_vrttut.html for more info.


On Wed, Aug 8, 2018, at 10:18 PM, Nicolas Cadieux wrote:
> Hi,
> 
> I need help setting up the .vrt file to read a raw bin file. This is 
> what I figured out about the files:
> 
> 3601 row x 3601 columns, big endian byte order, 2-byte unsigned 
> integer.  Some files are 2-byte signed integer or byte.  They have the 
> following Extent. -72.0001388888888840,-1.0001388888888889 : 
> -70.9998611111111018,0.0001388888888889.  Perhaps Georeferencing should 
> be done in another step or can it be done in the .vrt?
> 
> I figure the file would look like this but I need help with the big 
> endian, 2-byte unsigned int and ByteOrder.
> 
> <VRTDataset rasterXSize="3601" rasterYSize="3601">
>      <VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
>          <SourceFilename 
> relativetoVRT="1">s01w072_slope.bin</SourceFilename>
>          <ImageOffset>????</ImageOffset>
>          <PixelOffset>????</PixelOffset>
>          <LineOffset>?????</LineOffset>
>          <ByteOrder>????</ByteOrder>
>      </VRTRasterBand>
> </VRTDataset>
> 
> Thanks in advance.
> 
> Nicolas Cadieux
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Thu Aug  9 01:56:43 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 09 Aug 2018 10:56:43 +0200
Subject: [gdal-dev] Gdal translate ECW to TIF.
In-Reply-To: <1533783949257-0.post@n6.nabble.com>
References: <1533783949257-0.post@n6.nabble.com>
Message-ID: <1911894.7nKOO9GVlz@even-i700>

On mercredi 8 août 2018 20:05:49 CEST Dmitriy T. wrote:
> I took the following steps:
> 
> 
> 1) Download http://download.osgeo.org/gdal/2.3.0/gdal230.zip
> 
> 2) Unzip to C:\gdal_ecw\gdal-2.3.0
> 
> 3) Download, unzip and install
> https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-0
> to C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0
> 
> 4) In C:\gdal_ecw\gdal-2.3.0\nmake.opt edit:
> 
> # Uncomment the following and update to enable ECW read support with the 5.0
> SDK
> #ECWDIR  =  "c:\Intergraph\ecwsdk5"
> #ECWFLAGS = -DECWSDK_VERSION=50 \
> #       -I$(ECWDIR)\include \
> #       -I$(ECWDIR)\include/NCSECW/api -I$(ECWDIR)\include/NCSECW/jp2 \
> #       -I$(ECWDIR)\include/NCSECW/ecw
> #ECWLIB  =  $(ECWDIR)\lib\vc90\win32\NCSEcw.lib

vc90 is for MSVC 2008. You should try to match with the version of your compiler
Looking at the information at http://gisinternals.com/stable.php, I'm not sure there is
a version for VS2017 since it uses the old ECW 3.3
(http://gisinternals.com/packageinfo.php?file=release-1911-gdal-2-3-mapserver-7-2.zip)
but the VS2015 package uses SDK 5.3:
http://gisinternals.com/packageinfo.php?file=release-1900-gdal-2-3-mapserver-7-2.zip

In that later case, if you look at the build log of VS2015
http://build2.gisinternals.com/sdk/build-output/vc14-20180809-9-42-22-78-vc14-stable-2.3-7-2.txt
accessible from http://gisinternals.com/status.php,
you could likely try linking against the $(ECWDIR)\lib\vc140\win32\NCSEcw.lib

Or just use the ready-made packages at
http://gisinternals.com/stable.php

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From glen.rice at noaa.gov  Thu Aug  9 05:42:57 2018
From: glen.rice at noaa.gov (Glen Rice - NOAA Federal)
Date: Thu, 9 Aug 2018 08:42:57 -0400
Subject: [gdal-dev] ImportFromESRIStatePlaneWKT access from python
Message-ID: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>

Hello,

I am looking for any hints for how to access ImportFromESRIStatePlaneWKT in
the OGRSpatialReference class through the python bindings.  I am working
with xyz text files where the header contains a FIPS zone reference and I
would like to convert it to another system.

Regards,
Glen


-- 
Glen Rice
Hydrographic Systems and Technology Branch
Office of Coast Survey / Coast Survey Development Laboratory
603-862-1397
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180809/66dabacc/attachment.html>

From even.rouault at spatialys.com  Thu Aug  9 06:02:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 09 Aug 2018 15:02:09 +0200
Subject: [gdal-dev] ImportFromESRIStatePlaneWKT access from python
In-Reply-To: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>
References: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>
Message-ID: <19202671.FZO2J5DEgd@even-i700>

On jeudi 9 août 2018 08:42:57 CEST Glen Rice - NOAA Federal wrote:
> Hello,
> 
> I am looking for any hints for how to access ImportFromESRIStatePlaneWKT in
> the OGRSpatialReference class through the python bindings.  I am working
> with xyz text files where the header contains a FIPS zone reference and I
> would like to convert it to another system.

You can't from Python. This method is only available from C++.

But perhaps the osr.SetStatePlane(int zone, int is_nad83 = 1, char const 
*unitsname = "", double units = 0.0) that corresponds to
OGRSpatialReference::SetStatePlane() will do the job ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From glen.rice at noaa.gov  Thu Aug  9 06:27:43 2018
From: glen.rice at noaa.gov (Glen Rice - NOAA Federal)
Date: Thu, 9 Aug 2018 09:27:43 -0400
Subject: [gdal-dev] ImportFromESRIStatePlaneWKT access from python
In-Reply-To: <19202671.FZO2J5DEgd@even-i700>
References: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>
 <19202671.FZO2J5DEgd@even-i700>
Message-ID: <CAGm0ZKeQWjsLDUVtbnkJ83Me2dXtt6ZZ5=Yo=8sx+iuf4G4Fxw@mail.gmail.com>

Thanks Even,

>From the SetStatePlane docs
<https://www.gdal.org/classOGRSpatialReference.html#a4e0f1e23207c157f72388717c35be88c>
it says
"""
nZone State plane zone number, in the USGS numbering scheme (as distinct
from the Arc/Info and Erdas numbering scheme."""
which would seem to indicate that using the FIPS code in place of the USGS
numbering scheme will lead to erroneous results.  It appears that my best
path forward with FIPS within GDAL with python would be to read
the Lib/site-packages/osgeo/data/gdal/esri_StatePlane_extra.wkt file
directly and build a small converter utility.

Glen

On Thu, Aug 9, 2018 at 9:02 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 9 août 2018 08:42:57 CEST Glen Rice - NOAA Federal wrote:
> > Hello,
> >
> > I am looking for any hints for how to access ImportFromESRIStatePlaneWKT
> in
> > the OGRSpatialReference class through the python bindings.  I am working
> > with xyz text files where the header contains a FIPS zone reference and I
> > would like to convert it to another system.
>
> You can't from Python. This method is only available from C++.
>
> But perhaps the osr.SetStatePlane(int zone, int is_nad83 = 1, char const
> *unitsname = "", double units = 0.0) that corresponds to
> OGRSpatialReference::SetStatePlane() will do the job ?
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Glen Rice
Hydrographic Systems and Technology Branch
Office of Coast Survey / Coast Survey Development Laboratory
603-862-1397
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180809/9b0e23e0/attachment-0001.html>

From even.rouault at spatialys.com  Thu Aug  9 06:40:28 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 09 Aug 2018 15:40:28 +0200
Subject: [gdal-dev] ImportFromESRIStatePlaneWKT access from python
In-Reply-To: <CAGm0ZKeQWjsLDUVtbnkJ83Me2dXtt6ZZ5=Yo=8sx+iuf4G4Fxw@mail.gmail.com>
References: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>
 <19202671.FZO2J5DEgd@even-i700>
 <CAGm0ZKeQWjsLDUVtbnkJ83Me2dXtt6ZZ5=Yo=8sx+iuf4G4Fxw@mail.gmail.com>
Message-ID: <1629322.Vu8L7YAxQ7@even-i700>

On jeudi 9 août 2018 09:27:43 CEST Glen Rice - NOAA Federal wrote:
> Thanks Even,
> 
> From the SetStatePlane docs
> <https://www.gdal.org/classOGRSpatialReference.html#a4e0f1e23207c157f7238871
> 7c35be88c> it says
> """
> nZone State plane zone number, in the USGS numbering scheme (as distinct
> from the Arc/Info and Erdas numbering scheme."""
> which would seem to indicate that using the FIPS code in place of the USGS
> numbering scheme will lead to erroneous results. 

The mapping from USGS (left column) to ESRI (right column) zone number is at:
https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogr_srs_esri.cpp#L134
and ultimately this reads the data/stateplane.csv with the USGS zone number as 
a key.


> It appears that my best
> path forward with FIPS within GDAL with python would be to read
> the Lib/site-packages/osgeo/data/gdal/esri_StatePlane_extra.wkt file
> directly and build a small converter utility.

Sounds reasonable

> 
> Glen
> 
> On Thu, Aug 9, 2018 at 9:02 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > On jeudi 9 août 2018 08:42:57 CEST Glen Rice - NOAA Federal wrote:
> > > Hello,
> > > 
> > > I am looking for any hints for how to access ImportFromESRIStatePlaneWKT
> > 
> > in
> > 
> > > the OGRSpatialReference class through the python bindings.  I am working
> > > with xyz text files where the header contains a FIPS zone reference and
> > > I
> > > would like to convert it to another system.
> > 
> > You can't from Python. This method is only available from C++.
> > 
> > But perhaps the osr.SetStatePlane(int zone, int is_nad83 = 1, char const
> > *unitsname = "", double units = 0.0) that corresponds to
> > OGRSpatialReference::SetStatePlane() will do the job ?
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Fri Aug 10 06:00:28 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 10 Aug 2018 10:00:28 -0300
Subject: [gdal-dev] Gdal translate ECW to TIF.
In-Reply-To: <1533783949257-0.post@n6.nabble.com>
References: <1533783949257-0.post@n6.nabble.com>
Message-ID: <55643073-e984-cdf6-260a-8127513d97e9@gatewaygeomatics.com>

Hi Dmitriy,

Another package that includes ECW support is MS4W (read more at 
https://ms4w.com/README_INSTALL.html#ecw)

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/



On 2018-08-09 12:05 AM, Dmitriy T. wrote:
> I took the following steps:
> 
> 
> 1) Download http://download.osgeo.org/gdal/2.3.0/gdal230.zip
> 
> 2) Unzip to C:\gdal_ecw\gdal-2.3.0
> 
> 3) Download, unzip and install
> https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-0
> to C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0
> 
> 4) In C:\gdal_ecw\gdal-2.3.0\nmake.opt edit:
> 
> # Uncomment the following and update to enable ECW read support with the 5.0
> SDK
> #ECWDIR  =  "c:\Intergraph\ecwsdk5"
> #ECWFLAGS = -DECWSDK_VERSION=50 \
> #       -I$(ECWDIR)\include \
> #       -I$(ECWDIR)\include/NCSECW/api -I$(ECWDIR)\include/NCSECW/jp2 \
> #       -I$(ECWDIR)\include/NCSECW/ecw
> #ECWLIB  =  $(ECWDIR)\lib\vc90\win32\NCSEcw.lib
> 
> to
> 
> # Uncomment the following and update to enable ECW read support with the 5.0
> SDK
> ECWDIR  =  "C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0"
> ECWFLAGS = -DECWSDK_VERSION=50 \
>        -I$(ECWDIR)\include \
>        -I$(ECWDIR)\include/NCSECW/api -I$(ECWDIR)\include/NCSECW/jp2 \
>        -I$(ECWDIR)\include/NCSECW/ecw
> ECWLIB  =  $(ECWDIR)\lib\vc90\win32\NCSEcw.lib
> 
> 5) In cmd as admin execute:
> copy "C:\Intergraph\ERDAS ECW JPEG 2000 SDK
> 5.0\redistributable\vc90\win32\*.dll" C:\windows\system32
> yes
> 
> 6) In 86 Native Tools Command Prompt for VS 2017 cmd as admin execute:
> 
> A) cd C:\gdal_ecw\gdal-2.3.0
> B) nmake -f makefile.vc
> C) nmake /f makefile.vc install
> D) nmake -f makefile.vc devinstall
> 
> 7) Add in C:\gdal\gdal-2.3.0\apps:
> 
> A) from.png
> B) from.ecw
> C) C:\Intergraph\ERDAS ECW JPEG 2000 SDK 5.0\bin\vc90\win32\NCSEcw.dll
> D) C:\gdal\gdal-2.3.0\gdal203.dll
> 
> 8) cd C:\gdal\gdal-2.3.0\apps
> gdalinfo --formats
> 
> output:
> ...
> PNG -raster- (rwv): Portable Network Graphics
> ...
> ECW -raster- (rov): ERDAS Compressed Wavelets (SDK 5.0)
> ...
> 
> 9) In cmd as admin:
> gdal_translate -of GTiff -co "TILED=YES" from.png to.tif
> 
> result:
> A) output message:
> Input file size is 800, 1000
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> B) to.tif
> 
> 10) In cmd as admin:
> gdal_translate -of GTiff -co "TILED=YES" from.ecw to.tif
> 
> result:
> A) output message: <no output message and no errors, but gdal_translate
> completed>
> B) no to.tif
> 
> Why ecw to tif not translated? Please help me.
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From crooney at pdx.edu  Mon Aug 13 16:44:24 2018
From: crooney at pdx.edu (Colleen Rooney)
Date: Mon, 13 Aug 2018 16:44:24 -0700
Subject: [gdal-dev] pthread_setspecific() failed error
Message-ID: <CAMV_qPQvvaOkP1oCwawyLLrbygwcOyuhfTCBgjnSjrMT1nZcyg@mail.gmail.com>

Hello,

I am attempting to build gdal version 2.3.1 from source. I am using gcc
7.2.0, and enabling support for proj4 version 5.1.0, grass version 7.4.0,
xerces-C version 3.1, hdf5 version 1.10.2, netcdf version 4.4.1.1, python
version 3.6.4, and perl version 5.16.3. Configure, make, and make install
all complete. However when the resulting executables are run I get an error
such as the following:

$ ./gdalinfo --version
GDAL 2.3.1, released 2018/06/22
CPLGetTLSList(): pthread_setspecific() failed!
CPLGetTLSList(): pthread_setspecific() failed!

I have hit a wall trying to figure out what is causing this error. Any help
would be appreciated, let me know any additional information you require!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180813/2e0ce143/attachment.html>

From demonbusov1 at yandex.ru  Mon Aug 13 19:07:17 2018
From: demonbusov1 at yandex.ru (Dmitriy T.)
Date: Mon, 13 Aug 2018 19:07:17 -0700 (MST)
Subject: [gdal-dev] Gdal translate ECW to TIF.
In-Reply-To: <1911894.7nKOO9GVlz@even-i700>
References: <1533783949257-0.post@n6.nabble.com> <1911894.7nKOO9GVlz@even-i700>
Message-ID: <1534212437831-0.post@n6.nabble.com>

Thank you, Even Rouault-2!

Your comment:

"Or just use the ready-made packages at 
http://gisinternals.com/stable.php"

saved me. This is the best way.




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Aug 13 23:01:30 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Aug 2018 08:01:30 +0200
Subject: [gdal-dev] pthread_setspecific() failed error
In-Reply-To: <CAMV_qPQvvaOkP1oCwawyLLrbygwcOyuhfTCBgjnSjrMT1nZcyg@mail.gmail.com>
References: <CAMV_qPQvvaOkP1oCwawyLLrbygwcOyuhfTCBgjnSjrMT1nZcyg@mail.gmail.com>
Message-ID: <4688679.PmenBAxceU@even-i700>

On lundi 13 août 2018 16:44:24 CEST Colleen Rooney wrote:
> Hello,
> 
> I am attempting to build gdal version 2.3.1 from source. I am using gcc
> 7.2.0, and enabling support for proj4 version 5.1.0, grass version 7.4.0,
> xerces-C version 3.1, hdf5 version 1.10.2, netcdf version 4.4.1.1, python
> version 3.6.4, and perl version 5.16.3. Configure, make, and make install
> all complete. However when the resulting executables are run I get an error
> such as the following:
> 
> $ ./gdalinfo --version
> GDAL 2.3.1, released 2018/06/22
> CPLGetTLSList(): pthread_setspecific() failed!
> CPLGetTLSList(): pthread_setspecific() failed!
> 
> I have hit a wall trying to figure out what is causing this error. Any help
> would be appreciated, let me know any additional information you require!

This is a weird one. Which operating system is this ?
Can you retry building GDAL without any of the dependency at all and see if 
that makes a difference ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From crooney at pdx.edu  Wed Aug 15 16:57:15 2018
From: crooney at pdx.edu (Colleen Rooney)
Date: Wed, 15 Aug 2018 16:57:15 -0700
Subject: [gdal-dev] pthread_setspecific() failed error
In-Reply-To: <4688679.PmenBAxceU@even-i700>
References: <CAMV_qPQvvaOkP1oCwawyLLrbygwcOyuhfTCBgjnSjrMT1nZcyg@mail.gmail.com>
 <4688679.PmenBAxceU@even-i700>
Message-ID: <CAMV_qPT7o0ZaZauMWwweY_GcjAQFm0K4w8AxFkZwhyEztRzHZQ@mail.gmail.com>

The grass 7.4.0 dependency is causing the error. Compiling without grass
support produces binaries that do not have this issue. I'm not sure yet if
this is an issue with the grass build, the way I compiled gdal to support
it, or something else. I will provide an update if I find out.

The operating system is CentOS 7
-Colleen

On Mon, Aug 13, 2018 at 11:01 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On lundi 13 août 2018 16:44:24 CEST Colleen Rooney wrote:
> > Hello,
> >
> > I am attempting to build gdal version 2.3.1 from source. I am using gcc
> > 7.2.0, and enabling support for proj4 version 5.1.0, grass version 7.4.0,
> > xerces-C version 3.1, hdf5 version 1.10.2, netcdf version 4.4.1.1, python
> > version 3.6.4, and perl version 5.16.3. Configure, make, and make install
> > all complete. However when the resulting executables are run I get an
> error
> > such as the following:
> >
> > $ ./gdalinfo --version
> > GDAL 2.3.1, released 2018/06/22
> > CPLGetTLSList(): pthread_setspecific() failed!
> > CPLGetTLSList(): pthread_setspecific() failed!
> >
> > I have hit a wall trying to figure out what is causing this error. Any
> help
> > would be appreciated, let me know any additional information you require!
>
> This is a weird one. Which operating system is this ?
> Can you retry building GDAL without any of the dependency at all and see
> if
> that makes a difference ?
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180815/5d1d231f/attachment.html>

From even.rouault at spatialys.com  Thu Aug 16 00:26:14 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 Aug 2018 09:26:14 +0200
Subject: [gdal-dev] pthread_setspecific() failed error
In-Reply-To: <CAMV_qPT7o0ZaZauMWwweY_GcjAQFm0K4w8AxFkZwhyEztRzHZQ@mail.gmail.com>
References: <CAMV_qPQvvaOkP1oCwawyLLrbygwcOyuhfTCBgjnSjrMT1nZcyg@mail.gmail.com>
 <4688679.PmenBAxceU@even-i700>
 <CAMV_qPT7o0ZaZauMWwweY_GcjAQFm0K4w8AxFkZwhyEztRzHZQ@mail.gmail.com>
Message-ID: <1561470.m1rPNUXZAE@even-i700>

On mercredi 15 août 2018 16:57:15 CEST you wrote:
> The grass 7.4.0 dependency is causing the error. Compiling without grass
> support produces binaries that do not have this issue. I'm not sure yet if
> this is an issue with the grass build, the way I compiled gdal to support
> it, or something else. I will provide an update if I find out.

Ah interesting, a reason might be that your GRASS binaries are not compiled 
with the GDAL version you build, hence chaos at runtime.

The normal procedure would be:
1) build GDAL without GRASS support
2) build GRASS against the above compiled GDAL
3) build GDAL again with GRASS support or build the GDAL-GRASS plugin

Even

> 
> The operating system is CentOS 7
> -Colleen
> 
> On Mon, Aug 13, 2018 at 11:01 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > On lundi 13 août 2018 16:44:24 CEST Colleen Rooney wrote:
> > > Hello,
> > > 
> > > I am attempting to build gdal version 2.3.1 from source. I am using gcc
> > > 7.2.0, and enabling support for proj4 version 5.1.0, grass version
> > > 7.4.0,
> > > xerces-C version 3.1, hdf5 version 1.10.2, netcdf version 4.4.1.1,
> > > python
> > > version 3.6.4, and perl version 5.16.3. Configure, make, and make
> > > install
> > > all complete. However when the resulting executables are run I get an
> > 
> > error
> > 
> > > such as the following:
> > > 
> > > $ ./gdalinfo --version
> > > GDAL 2.3.1, released 2018/06/22
> > > CPLGetTLSList(): pthread_setspecific() failed!
> > > CPLGetTLSList(): pthread_setspecific() failed!
> > > 
> > > I have hit a wall trying to figure out what is causing this error. Any
> > 
> > help
> > 
> > > would be appreciated, let me know any additional information you
> > > require!
> > 
> > This is a weird one. Which operating system is this ?
> > Can you retry building GDAL without any of the dependency at all and see
> > if
> > that makes a difference ?
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From glen.rice at noaa.gov  Fri Aug 17 13:54:42 2018
From: glen.rice at noaa.gov (Glen Rice - NOAA Federal)
Date: Fri, 17 Aug 2018 16:54:42 -0400
Subject: [gdal-dev] ImportFromESRIStatePlaneWKT access from python
In-Reply-To: <1629322.Vu8L7YAxQ7@even-i700>
References: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>
 <19202671.FZO2J5DEgd@even-i700>
 <CAGm0ZKeQWjsLDUVtbnkJ83Me2dXtt6ZZ5=Yo=8sx+iuf4G4Fxw@mail.gmail.com>
 <1629322.Vu8L7YAxQ7@even-i700>
Message-ID: <CAGm0ZKejMFqSv4znTnu+rgz3_vahGNjSJdTi6qf_n8OoYZ6t9Q@mail.gmail.com>

This is a followup comment for completeness in case someone else tries to
go down the same path of ingesting the ImportFromESRIStatePlaneWKT file
directly.

I found that when I used the resulting wkt directly in an instance
of osr.CoordinateTransformation I got the following error:
"""
ERROR 6: No translation for Lambert_Conformal_Conic to PROJ.4 format is
known.
Wrong number or type of arguments for overloaded function
'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])
    OSRCoordinateTransformationShadow::TransformPoint(double
[3],double,double,double)
"""

After some mucking around I found that updating the PROJECTION from
"Lambert_Conformal_Conic" to "Lambert_Conformal_Conic_2SP" fixed the
problem.

Kind regards,
Glen

On Thu, Aug 9, 2018 at 9:40 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 9 août 2018 09:27:43 CEST Glen Rice - NOAA Federal wrote:
> > Thanks Even,
> >
> > From the SetStatePlane docs
> > <https://www.gdal.org/classOGRSpatialReference.html#
> a4e0f1e23207c157f7238871
> > 7c35be88c> it says
> > """
> > nZone State plane zone number, in the USGS numbering scheme (as distinct
> > from the Arc/Info and Erdas numbering scheme."""
> > which would seem to indicate that using the FIPS code in place of the
> USGS
> > numbering scheme will lead to erroneous results.
>
> The mapping from USGS (left column) to ESRI (right column) zone number is
> at:
> https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogr_srs_esri.cpp#L134
> and ultimately this reads the data/stateplane.csv with the USGS zone
> number as
> a key.
>
>
> > It appears that my best
> > path forward with FIPS within GDAL with python would be to read
> > the Lib/site-packages/osgeo/data/gdal/esri_StatePlane_extra.wkt file
> > directly and build a small converter utility.
>
> Sounds reasonable
>
> >
> > Glen
> >
> > On Thu, Aug 9, 2018 at 9:02 AM, Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > On jeudi 9 août 2018 08:42:57 CEST Glen Rice - NOAA Federal wrote:
> > > > Hello,
> > > >
> > > > I am looking for any hints for how to access
> ImportFromESRIStatePlaneWKT
> > >
> > > in
> > >
> > > > the OGRSpatialReference class through the python bindings.  I am
> working
> > > > with xyz text files where the header contains a FIPS zone reference
> and
> > > > I
> > > > would like to convert it to another system.
> > >
> > > You can't from Python. This method is only available from C++.
> > >
> > > But perhaps the osr.SetStatePlane(int zone, int is_nad83 = 1, char
> const
> > > *unitsname = "", double units = 0.0) that corresponds to
> > > OGRSpatialReference::SetStatePlane() will do the job ?
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Glen Rice
Hydrographic Systems and Technology Branch
Office of Coast Survey / Coast Survey Development Laboratory
603-862-1397
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180817/65d17764/attachment.html>

From even.rouault at spatialys.com  Fri Aug 17 14:41:21 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 Aug 2018 23:41:21 +0200
Subject: [gdal-dev] ImportFromESRIStatePlaneWKT access from python
In-Reply-To: <CAGm0ZKejMFqSv4znTnu+rgz3_vahGNjSJdTi6qf_n8OoYZ6t9Q@mail.gmail.com>
References: <CAGm0ZKdYpRtY_bbcyY11MdadtFSZBB6DzbH9gPHQHFkBBtp2Cw@mail.gmail.com>
 <1629322.Vu8L7YAxQ7@even-i700>
 <CAGm0ZKejMFqSv4znTnu+rgz3_vahGNjSJdTi6qf_n8OoYZ6t9Q@mail.gmail.com>
Message-ID: <3324380.lPBjzboBGo@even-i700>

On vendredi 17 août 2018 16:54:42 CEST Glen Rice - NOAA Federal wrote:
> This is a followup comment for completeness in case someone else tries to
> go down the same path of ingesting the ImportFromESRIStatePlaneWKT file
> directly.
> 
> I found that when I used the resulting wkt directly in an instance
> of osr.CoordinateTransformation I got the following error:
> """
> ERROR 6: No translation for Lambert_Conformal_Conic to PROJ.4 format is
> known.
> Wrong number or type of arguments for overloaded function
> 'CoordinateTransformation_TransformPoint'.
>   Possible C/C++ prototypes are:
>     OSRCoordinateTransformationShadow::TransformPoint(double [3])
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [3],double,double,double)
> """
> 
> After some mucking around I found that updating the PROJECTION from
> "Lambert_Conformal_Conic" to "Lambert_Conformal_Conic_2SP" fixed the
> problem.

ImportFromESRIStatePlaneWKT() likely brings you a WKT in ESRI variant format, 
which isn't understood by other parts of GDAL.
The 'clean' way is to massage it into the more standard OGC WKT v1 with 
OGRSpatialReference::morphFromESRI(), which will among other things will 
transform "Lambert_Conformal_Conic" to "Lambert_Conformal_Conic_2SP"

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mswope at gmail.com  Sun Aug 19 07:39:44 2018
From: mswope at gmail.com (Mike)
Date: Sun, 19 Aug 2018 08:39:44 -0600
Subject: [gdal-dev] ogr2ogr -sql on a dataset level
Message-ID: <CAKTSvBiOdzHusSgdx=5VHepS-gHEV2uo1SGAGaGq3cb4BWJRcA@mail.gmail.com>

I'm looking to see if there is a way to do a sql statement on a dataset
level instead of a layer level.

Basically, I have a bash script, and wish to merge a bunch of
esrifilegeodatabase.zip into a geopackage.

I can do something like this

ogr2ogr -F GPKG dest.gpkg -append -update $zip -sql "SELECT *, '$filen' as
filename FROM Layer"

However I'm curious if there is a way to do this without knowing beforehand
what layers are present?

While I can do this in python, I'm trying to do this as a bash shell
script.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180819/df365210/attachment.html>

From bradh at frogmouth.net  Sun Aug 19 15:57:56 2018
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Mon, 20 Aug 2018 08:57:56 +1000
Subject: [gdal-dev] ogr2ogr -sql on a dataset level
In-Reply-To: <CAKTSvBiOdzHusSgdx=5VHepS-gHEV2uo1SGAGaGq3cb4BWJRcA@mail.gmail.com>
References: <CAKTSvBiOdzHusSgdx=5VHepS-gHEV2uo1SGAGaGq3cb4BWJRcA@mail.gmail.com>
Message-ID: <000b01d43810$127d22d0$37776870$@frogmouth.net>

Maybe you could just use ogrinfo to extract the layers, and then iterate over those using a bash for loop.

 

Brad

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180820/68339724/attachment.html>

From r_e_lang at hotmail.com  Mon Aug 20 21:44:11 2018
From: r_e_lang at hotmail.com (richard lang)
Date: Tue, 21 Aug 2018 04:44:11 +0000
Subject: [gdal-dev] GDAL with podofo can't process pdf documents generated
	by ArcGIS
Message-ID: <ME2PR01MB36508B3AAC067D80AD12322CDC310@ME2PR01MB3650.ausprd01.prod.outlook.com>

Hi all,

I'm currently working on a map viewer application that uses GDAL for processing geo-referenced map images.  Up till now I've been successfully using the poppler library for PDF support, but am currently trying to shift to the podofo/poppler hybrid approach (podofo library with poppler pdftoppm utility) to work around poppler's GPL licence restrictions.

I have a collection of sample map PDF documents generated by ESRI ArcMap 10 (different documents from different releases in the 10.x release family), which I could successfully process with GDAL/poppler, but most of which fail to load with GDAL/podofo.  The document loading also fails with the stand-alone podofo pdftoppm utility, both with a version that I've built from podofo 0.9.6 source and with the 0.9.3 version installed onto my ubuntu xenial machine from the APT package repository.

The typical error message is as follows:


Error: An error 5 ocurred during uncompressing the pdf file.


PoDoFo encounter an error. Error: 5 ePdfError_UnexpectedEOF
    Error Description: End of file was reached unxexpectedly.
    Callstack:
    #0 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:226
        Information: Unable to load objects from file.
    #1 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:334
        Information: Unable to load xref entries.
    #2 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:738
    #3 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfTokenizer.cpp:339

which seems to indicate an invalid xref table.




I don't think this is a podofo bug as such, as various online pdf validators I've tried also flag the documents as problematic, but several other bits of pdf software I've tried (notably the poppler library utilities) seem to treat it as a non-fatal recoverable error.

Has anyone else come across this and come up with a work-around or fix?

Example problem file to be found at https://www.dropbox.com/s/khlzgz8o2gxq89y/6090_harvest.pdf?dl=0


thanks

Richard.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180821/56dff8b3/attachment.html>

From ao at t-kartor.se  Mon Aug 20 23:11:00 2018
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Tue, 21 Aug 2018 08:11:00 +0200
Subject: [gdal-dev] GDAL with podofo can't process pdf documents
 generated by ArcGIS
In-Reply-To: <ME2PR01MB36508B3AAC067D80AD12322CDC310@ME2PR01MB3650.ausprd01.prod.outlook.com>
References: <ME2PR01MB36508B3AAC067D80AD12322CDC310@ME2PR01MB3650.ausprd01.prod.outlook.com>
Message-ID: <acc48376-2bd5-bce1-d504-4ce400ed5d09@t-kartor.se>

Hi

I have also encountered similar issues with PDFs from other Windows 
softwares.
The workaround I use is to recreate the PDF in any available software 
which ignores missing EOFs, endstreams etc.
Programmatically, this can be done as described in 
https://codedprojects.wordpress.com/2017/06/09/how-to-fix-pypdf-error-eof-marker-not-found/

> Hi all,
>
> I'm currently working on a map viewer application that uses GDAL for 
> processing geo-referenced map images.  Up till now I've been 
> successfully using the poppler library for PDF support, but am 
> currently trying to shift to the podofo/poppler hybrid approach 
> (podofo library with poppler pdftoppm utility) to work around 
> poppler's GPL licence restrictions.
>
> I have a collection of sample map PDF documents generated by ESRI 
> ArcMap 10 (different documents from different releases in the 10.x 
> release family), which I could successfully process with GDAL/poppler, 
> but most of which fail to load with GDAL/podofo.  The document loading 
> also fails with the stand-alone podofo pdftoppm utility, both with a 
> version that I've built from podofo 0.9.6 source and with the 0.9.3 
> version installed onto my ubuntu xenial machine from the APT package 
> repository.
>
> The typical error message is as follows:
>
>
> Error: An error 5 ocurred during uncompressing the pdf file.
>
>
> PoDoFo encounter an error. Error: 5 ePdfError_UnexpectedEOF
>     Error Description: End of file was reached unxexpectedly.
>     Callstack:
>     #0 Error Source: 
> /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:226
>         Information: Unable to load objects from file.
>     #1 Error Source: 
> /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:334
>         Information: Unable to load xref entries.
>     #2 Error Source: 
> /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:738
>     #3 Error Source: 
> /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfTokenizer.cpp:339
>
> which seems to indicate an invalid xref table.
>
>
>
>
> I don't think this is a podofo bug as such, as various online pdf 
> validators I've tried also flag the documents as problematic, but 
> several other bits of pdf software I've tried (notably the poppler 
> library utilities) seem to treat it as a non-fatal recoverable error.
>
> Has anyone else come across this and come up with a work-around or fix?
>
> Example problem file to be found at 
> https://www.dropbox.com/s/khlzgz8o2gxq89y/6090_harvest.pdf?dl=0
>
>
> thanks
>
> Richard.
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180821/698b0db5/attachment.html>

From r_e_lang at hotmail.com  Mon Aug 20 23:56:30 2018
From: r_e_lang at hotmail.com (richard lang)
Date: Tue, 21 Aug 2018 06:56:30 +0000
Subject: [gdal-dev] GDAL with podofo can't process pdf documents
 generated by ArcGIS
In-Reply-To: <acc48376-2bd5-bce1-d504-4ce400ed5d09@t-kartor.se>
References: <ME2PR01MB36508B3AAC067D80AD12322CDC310@ME2PR01MB3650.ausprd01.prod.outlook.com>
 <acc48376-2bd5-bce1-d504-4ce400ed5d09@t-kartor.se>
Message-ID: <ME2PR01MB3650BA14B36CA442CD8757C0DC310@ME2PR01MB3650.ausprd01.prod.outlook.com>

Yeah, was considering a similar approach, but hoping there might be a less hacky way of handling it.

Initial experiments indicate that the poppler pdfunite utility invoked with a single input argument just round trips the specified document, cleaning up the issue I'm seeing on the way.

On 21 August 2018 at 18:11, Andreas Oxenstierna <ao at t-kartor.se<mailto:ao at t-kartor.se>> wrote:
Hi

I have also encountered similar issues with PDFs from other Windows softwares.
The workaround I use is to recreate the PDF in any available software which ignores missing EOFs, endstreams etc.
Programmatically, this can be done as described in https://codedprojects.wordpress.com/2017/06/09/how-to-fix-pypdf-error-eof-marker-not-found/

Hi all,

I'm currently working on a map viewer application that uses GDAL for processing geo-referenced map images.  Up till now I've been successfully using the poppler library for PDF support, but am currently trying to shift to the podofo/poppler hybrid approach (podofo library with poppler pdftoppm utility) to work around poppler's GPL licence restrictions.

I have a collection of sample map PDF documents generated by ESRI ArcMap 10 (different documents from different releases in the 10.x release family), which I could successfully process with GDAL/poppler, but most of which fail to load with GDAL/podofo.  The document loading also fails with the stand-alone podofo pdftoppm utility, both with a version that I've built from podofo 0.9.6 source and with the 0.9.3 version installed onto my ubuntu xenial machine from the APT package repository.

The typical error message is as follows:


Error: An error 5 ocurred during uncompressing the pdf file.


PoDoFo encounter an error. Error: 5 ePdfError_UnexpectedEOF
    Error Description: End of file was reached unxexpectedly.
    Callstack:
    #0 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:226
        Information: Unable to load objects from file.
    #1 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:334
        Information: Unable to load xref entries.
    #2 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfParser.cpp:738
    #3 Error Source: /build/libpodofo-NltoF1/libpodofo-0.9.3/src/base/PdfTokenizer.cpp:339

which seems to indicate an invalid xref table.




I don't think this is a podofo bug as such, as various online pdf validators I've tried also flag the documents as problematic, but several other bits of pdf software I've tried (notably the poppler library utilities) seem to treat it as a non-fatal recoverable error.

Has anyone else come across this and come up with a work-around or fix?

Example problem file to be found at https://www.dropbox.com/s/khlzgz8o2gxq89y/6090_harvest.pdf?dl=0


thanks

Richard.





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
mobile: +46 733 206831
mailto: ao at t-kartor.se<mailto:ao at t-kartor.se>
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180821/cc399392/attachment-0001.html>

From kotthoff.kurt at gmail.com  Wed Aug 22 11:00:34 2018
From: kotthoff.kurt at gmail.com (Kurt Kotthoff)
Date: Wed, 22 Aug 2018 20:00:34 +0200
Subject: [gdal-dev] GDAL ogr2ogr OracleSpatial to Shape: Multipolygons with
 wholes/multiparts are missing
Message-ID: <609b7259-b1cd-a206-651b-6a6b2778f97a@gmail.com>

Hello GDAL-DEV-Team,

recently I faced a problem, which I wasn't able to solve. It regards to 
ogr2ogr Oracle Spatial to Shape-file convertion:



We're holding geodata in an Orcale database (11g) with spatial 
extension. I want to unload specific polygons and convert them into 
Shape for further local processing.

The table where I'm unloading from holds polygons/multipolygons: Oracle 
Spatial GeomTypes are 4003 and 4007 (4D-Polygon and 4D-Multipolygon - 
third and fourth axis are not used however).

For unloading and conversion I use this command within a python-script:

/ogr2ogr.main(["", "-f", "ESRI Shapefile", result_path + query_result, 
connection_params,"-nlt", "MULTIPOLYGON", "-sql", the_sql_query_here])/


Connection and full conversion only seems to work for polygons with 
GeomType 4003 however. The geometry-parts of multipartpolygons or 
polygons with wholes (GeomType 4007) are completely missing in the 
shape-file (white gaps within the map). Non-spatial attributes and 
values of these objects appear in the shape-file object-table though. I 
already tried to rerun the command above with /POLYGON/ or 
P/ROMOTE_TO_MULTI/ instead of /MULTIPOLYGON/ and /POLYGON/. No change in 
the result though.

As an example I provide the geometry of an Oracle-Spatial-object, whose 
geometry could not be converted (its a two-part multipolygon):

/MDSYS.SDO_GEOMETRY(4007,NULL,NULL,MDSYS.SDO_ELEM_INFO_ARRAY(1,1005,5,1,2,1,5,2,1,9,2,1,13,2,1,17,2,1,25,1005,5,25,2,1,29,2,1,33,2,1,37,2,1,41,2,1),MDSYS.SDO_ORDINATE_ARRAY(33433109.145,5711835.706,9999.9999,0,33433166.721,5711687.09,9999.9999,0,33433229.435,5711904.544,9999.9999,0,33433205.628,5711904.647,9999.9999,0,33433175.618,5711821.022,9999.9999,0,33433109.145,5711835.706,9999.9999,0,33433020.391,5711673.812,9999.9999,0,33433153.215,5711635.136,9999.9999,0,33433164.011,5711674.531,9999.9999,0,33433099.673,5711838.076,9999.9999,0,33433071.502,5711844.871,9999.9999,0,33433020.391,5711673.812,9999.9999,0))/

You can find more information, including pictures, here:
/
//https://gis.stackexchange.com/questions/292942/gdal-ogr2ogr-oraclespatial-to-shape-multipolygons-with-wholes-multiparts-are-mi/

My GDAL is v2.1.2. Any known caveats or workarounds regarding this problem?


Thank you very much and best regards,
knutella

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180822/89ab33d1/attachment.html>

From even.rouault at spatialys.com  Wed Aug 22 11:41:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 22 Aug 2018 20:41:06 +0200
Subject: [gdal-dev] Fwd: [Projects] OSGeo Annual General Meeting -
	projects please join and report (August 30 2018)
In-Reply-To: <8e0d39de-9de6-cc8b-56f4-9041a9a07cfd@gatewaygeomatics.com>
References: <2539454.tP65fyxpZY@even-i700>
 <8e0d39de-9de6-cc8b-56f4-9041a9a07cfd@gatewaygeomatics.com>
Message-ID: <2543225.AtcJpPruxY@even-i700>

Hi all,

I've drafted a slide with the GDAL project status for the OSGeo AGM:
https://docs.google.com/presentation/d/1imiG7x09ry7lGvmS15FCVq2Z7yaICY00fcpXBK27TXY/edit#slide=id.g3fdcab0c8e_22_0

Let me know if you see corrections / additions (to balance with removals!) to it

Jeff, if your offer still holds, we'd be happy if you could present
the slide on behalf of the GDAL project.

Best regards,

Even


> Hi Even, I'll be there and don't mind helping.  -jeff
> 
> On 2018-08-02 5:24 PM, Even Rouault wrote:
> > Hi,
> > 
> > see below the request from the OSGeo board for a quick (2 minute) project
> > update for GDAL. I won't be in Dar. Is there anyone from the community
> > that
> > will be there and willing to give this update ? (I can help with preparing
> > the material if needed)
> > 
> > Even
> > 
> > 
> > ----------  Forwarded Message  ----------
> > 
> > Subject: [Projects] OSGeo Annual General Meeting - projects please join
> > and
> > report (August 30 2018)
> > Date: jeudi 2 août 2018, 22:13:51 CEST
> > From: Astrid Emde (OSGeo Secretary) <secretary at osgeo.org>
> > To: Projects <projects at lists.osgeo.org>
> > 
> > Dear OSGeo projects & project officers,
> > 
> > the OSGeo Annual General Meeting (AGM) is scheduled for Thursday morning
> > August 30 at 8:00-9:00 in Dar Es Salaam (Tansania).
> > 
> > As Project/Committee officer we ask that you attend, or send a delegate
> > from your community. The FOSS4G organizers have given us one hour for
> > the meeting, leaving us each with around 2 mins!
> > 
> > This update is about your project and community, rather than about your
> > software. We are interested in how your community is doing, the
> > opportunities and challenges ahead, and how OSGeo can help.
> > 
> > The shared slide deck is available here (request edit access if
> > required):
> > 
> > *
> > https://docs.google.com/presentation/d/
> > 1imiG7x09ry7lGvmS15FCVq2Z7yaICY00fcpXBK27TXY/edit?usp=sharing
> > 
> > These slides replace the "Annual General Report"
> > (https://github.com/geotools/geotools/wiki/GeoTools-Annual-Report-2017)
> > used previously, you may wish to borrow that format for inspiration. You
> > still can make an annual report page with extended information if you
> > like and link to it.
> > 
> > If you are unable to attend we ask that you submit an annual general
> > report to the board email list and attend an IRC board meeting by
> > November 2018.
> > 
> > We are coordinating activities on the OSGeo Wiki
> > (https://wiki.osgeo.org/wiki/Annual_General_Meeting_2018). Please add
> > your project and name to the wiki if you can attend.
> > 
> > Best regards
> > 
> > Astrid Emde (OSGeo Secretary)
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Wed Aug 22 12:15:10 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 22 Aug 2018 16:15:10 -0300
Subject: [gdal-dev] Fwd: [Projects] OSGeo Annual General Meeting -
 projects please join and report (August 30 2018)
In-Reply-To: <2543225.AtcJpPruxY@even-i700>
References: <2539454.tP65fyxpZY@even-i700>
 <8e0d39de-9de6-cc8b-56f4-9041a9a07cfd@gatewaygeomatics.com>
 <2543225.AtcJpPruxY@even-i700>
Message-ID: <6b7726ad-56a4-7ddf-f9e1-c2ad0a1c99f8@gatewaygeomatics.com>

Thanks Even, the slide looks good, lots of great details.  My pleasure! 
Thank you again.

-jeff



On 2018-08-22 3:41 PM, Even Rouault wrote:
> Hi all,
> 
> I've drafted a slide with the GDAL project status for the OSGeo AGM:
> https://docs.google.com/presentation/d/1imiG7x09ry7lGvmS15FCVq2Z7yaICY00fcpXBK27TXY/edit#slide=id.g3fdcab0c8e_22_0
> 
> Let me know if you see corrections / additions (to balance with removals!) to it
> 
> Jeff, if your offer still holds, we'd be happy if you could present
> the slide on behalf of the GDAL project.
> 
> Best regards,
> 
> Even
> 
> 
>> Hi Even, I'll be there and don't mind helping.  -jeff
>>
>> On 2018-08-02 5:24 PM, Even Rouault wrote:
>>> Hi,
>>>
>>> see below the request from the OSGeo board for a quick (2 minute) project
>>> update for GDAL. I won't be in Dar. Is there anyone from the community
>>> that
>>> will be there and willing to give this update ? (I can help with preparing
>>> the material if needed)
>>>
>>> Even
>>>
>>>
>>> ----------  Forwarded Message  ----------
>>>
>>> Subject: [Projects] OSGeo Annual General Meeting - projects please join
>>> and
>>> report (August 30 2018)
>>> Date: jeudi 2 août 2018, 22:13:51 CEST
>>> From: Astrid Emde (OSGeo Secretary) <secretary at osgeo.org>
>>> To: Projects <projects at lists.osgeo.org>
>>>
>>> Dear OSGeo projects & project officers,
>>>
>>> the OSGeo Annual General Meeting (AGM) is scheduled for Thursday morning
>>> August 30 at 8:00-9:00 in Dar Es Salaam (Tansania).
>>>
>>> As Project/Committee officer we ask that you attend, or send a delegate
>>> from your community. The FOSS4G organizers have given us one hour for
>>> the meeting, leaving us each with around 2 mins!
>>>
>>> This update is about your project and community, rather than about your
>>> software. We are interested in how your community is doing, the
>>> opportunities and challenges ahead, and how OSGeo can help.
>>>
>>> The shared slide deck is available here (request edit access if
>>> required):
>>>
>>> *
>>> https://docs.google.com/presentation/d/
>>> 1imiG7x09ry7lGvmS15FCVq2Z7yaICY00fcpXBK27TXY/edit?usp=sharing
>>>
>>> These slides replace the "Annual General Report"
>>> (https://github.com/geotools/geotools/wiki/GeoTools-Annual-Report-2017)
>>> used previously, you may wish to borrow that format for inspiration. You
>>> still can make an annual report page with extended information if you
>>> like and link to it.
>>>
>>> If you are unable to attend we ask that you submit an annual general
>>> report to the board email list and attend an IRC board meeting by
>>> November 2018.
>>>
>>> We are coordinating activities on the OSGeo Wiki
>>> (https://wiki.osgeo.org/wiki/Annual_General_Meeting_2018). Please add
>>> your project and name to the wiki if you can attend.
>>>
>>> Best regards
>>>
>>> Astrid Emde (OSGeo Secretary)
>>

From guyd at satellogic.com  Wed Aug 22 23:29:27 2018
From: guyd at satellogic.com (Guy Doulberg)
Date: Thu, 23 Aug 2018 09:29:27 +0300
Subject: [gdal-dev] Offsets in url of geotiff
Message-ID: <CAJ18MZp-P2KTF1TDpFXgFtg6=VVi8X4_iai3wCGPbZSNiSLtrA@mail.gmail.com>

Hi

I want to share with you an idea I had,

I am storing rasters as cloud optimized GeoTiff, these rasters can cover
very big areas.

I was thinking it could be super, if I could share a link to my colleagues
of a raster with the offset they need encoded in the raster.

for example:

url = "/vsicur/http://location/#srcwin=(xoff,yoff,szie,ysize)"

if you will execute

gdalinfo url

you will get the same info to the output raster of

gdal_translate -srcwin xoff yoff xsize ysize


using that url you will be able to execute any gdal command that run on a
raster, and using the cog gdal will read only the relevant data.

That could be very useful for me, cause then I could decouple easily the
raster I store on my cloudstorage and the raster I share.

WDYT?
Guy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180823/9a9606e5/attachment.html>

From even.rouault at spatialys.com  Thu Aug 23 00:25:29 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Aug 2018 09:25:29 +0200
Subject: [gdal-dev] Offsets in url of geotiff
In-Reply-To: <CAJ18MZp-P2KTF1TDpFXgFtg6=VVi8X4_iai3wCGPbZSNiSLtrA@mail.gmail.com>
References: <CAJ18MZp-P2KTF1TDpFXgFtg6=VVi8X4_iai3wCGPbZSNiSLtrA@mail.gmail.com>
Message-ID: <1668612.uxfCr1aOU0@even-i700>

On jeudi 23 août 2018 09:29:27 CEST Guy Doulberg wrote:
> Hi
> 
> I want to share with you an idea I had,
> 
> I am storing rasters as cloud optimized GeoTiff, these rasters can cover
> very big areas.
> 
> I was thinking it could be super, if I could share a link to my colleagues
> of a raster with the offset they need encoded in the raster.
> 
> for example:
> 
> url = "/vsicur/http://location/#srcwin=(xoff,yoff,szie,ysize)"

That mixes completely different levels of abstractions. The source window is a 
high level concept, whereas the resource is at the byte level.

One possibility would be that you share the VRT file resulting from 
gdal_translate -srcwin [...] /vsicurl/.... windowed.vrt -of VRT

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From guyd at satellogic.com  Thu Aug 23 00:51:55 2018
From: guyd at satellogic.com (Guy Doulberg)
Date: Thu, 23 Aug 2018 10:51:55 +0300
Subject: [gdal-dev] Offsets in url of geotiff
In-Reply-To: <1668612.uxfCr1aOU0@even-i700>
References: <CAJ18MZp-P2KTF1TDpFXgFtg6=VVi8X4_iai3wCGPbZSNiSLtrA@mail.gmail.com>
 <1668612.uxfCr1aOU0@even-i700>
Message-ID: <CAJ18MZqS8WxK3VfO+z_1cSEOta=tsVj-xg-MOh5zdGNxP5Cxiw@mail.gmail.com>

Thanks,

that will do exactly what I wanted, I wasn't ware of the behavior in VRT


On Thu, Aug 23, 2018 at 10:25 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 23 août 2018 09:29:27 CEST Guy Doulberg wrote:
> > Hi
> >
> > I want to share with you an idea I had,
> >
> > I am storing rasters as cloud optimized GeoTiff, these rasters can cover
> > very big areas.
> >
> > I was thinking it could be super, if I could share a link to my
> colleagues
> > of a raster with the offset they need encoded in the raster.
> >
> > for example:
> >
> > url = "/vsicur/http://location/#srcwin=(xoff,yoff,szie,ysize)"
>
> That mixes completely different levels of abstractions. The source window
> is a
> high level concept, whereas the resource is at the byte level.
>
> One possibility would be that you share the VRT file resulting from
> gdal_translate -srcwin [...] /vsicurl/.... windowed.vrt -of VRT
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180823/beea781f/attachment.html>

From sebastien.guimmara.external at airbus.com  Fri Aug 24 00:52:04 2018
From: sebastien.guimmara.external at airbus.com (=?iso-8859-1?Q?GUIMMARA=2C_S=E9bastien_=28External=29_=5BFR=5D?=)
Date: Fri, 24 Aug 2018 07:52:04 +0000
Subject: [gdal-dev] VRT schema integer types serialization
Message-ID: <A1DABC8AB3291742B3D4C714F72B2F8E727FB126@tlswinmbx02.toulouse.spotimage.int>

Hi all,

When trying to generate C# classes from the VRT schema provided with GDAL (gdalvrt.xsd), I came accross a known issue with XSD that doesn't map the xs:nonNegativeInteger type to a native integer type, but instead maps it to a string.

See this question for the rationale : https://stackoverflow.com/questions/9616040/why-does-xsd-exe-generate-string-property-for-xsinteger

To summarize, since nonNegativeInteger is unbounded, it is not possible to map it to a (bounded) native type (such as Uint32). Ironically, the VRT schema defines a custom type named "nonNegativeInteger32" that should exactly map to Uint32, but since it inherits from nonNegativeInteger, it still maps to a string.

My question is : would it be acceptable to modify the VRT schema to replace the unbounded integer types by appropriate bounded types (xs:int, xs:long, xs:unsignedInt, etc.), or would it break existing behaviour ?

See https://www.w3schools.com/xml/schema_dtypes_numeric.asp for available XSD datatypes.

Sébastien

Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des informations confidentielles et/ou protégées ou dont la diffusion est restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en avertir immédiatement l'expéditeur et d'effacer ce courriel de votre système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar virus, d'altération ou de falsification de ce courriel lors de sa transmission par voie électronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180824/a17cea5f/attachment.html>

From even.rouault at spatialys.com  Fri Aug 24 01:35:59 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Aug 2018 10:35:59 +0200
Subject: [gdal-dev] VRT schema integer types serialization
In-Reply-To: <A1DABC8AB3291742B3D4C714F72B2F8E727FB126@tlswinmbx02.toulouse.spotimage.int>
References: <A1DABC8AB3291742B3D4C714F72B2F8E727FB126@tlswinmbx02.toulouse.spotimage.int>
Message-ID: <16357740.xcx8PR1FBs@even-i700>

On vendredi 24 août 2018 07:52:04 CEST GUIMMARA, Sébastien (External) [FR] 
wrote:
> xs:unsignedInt

Replacing uses of xs:nonNegativeInteger with the custom nonNegativeInteger32 
would be fine, and modifying that one to be base on xs:unsignedInt sounds good 
too


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastien.guimmara.external at airbus.com  Fri Aug 24 01:54:08 2018
From: sebastien.guimmara.external at airbus.com (=?iso-8859-1?Q?GUIMMARA=2C_S=E9bastien_=28External=29_=5BFR=5D?=)
Date: Fri, 24 Aug 2018 08:54:08 +0000
Subject: [gdal-dev] VRT schema integer types serialization
In-Reply-To: <16357740.xcx8PR1FBs@even-i700>
References: <A1DABC8AB3291742B3D4C714F72B2F8E727FB126@tlswinmbx02.toulouse.spotimage.int>
 <16357740.xcx8PR1FBs@even-i700>
Message-ID: <A1DABC8AB3291742B3D4C714F72B2F8E727FB13D@tlswinmbx02.toulouse.spotimage.int>

Thanks for the reply.

Did you mean it is fine to do so on my side, or would it be fine to have in the official GDAL source ?

-----Message d'origine-----
De : Even Rouault [mailto:even.rouault at spatialys.com]
Envoyé : vendredi 24 août 2018 10:36
À : gdal-dev at lists.osgeo.org
Cc : GUIMMARA, Sébastien (External) [FR]
Objet : Re: [gdal-dev] VRT schema integer types serialization

On vendredi 24 août 2018 07:52:04 CEST GUIMMARA, Sébastien (External) [FR]
wrote:
> xs:unsignedInt

Replacing uses of xs:nonNegativeInteger with the custom nonNegativeInteger32
would be fine, and modifying that one to be base on xs:unsignedInt sounds good
too


--
Spatialys - Geospatial professional services
http://www.spatialys.com
Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des informations confidentielles et/ou protégées ou dont la diffusion est restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en avertir immédiatement l'expéditeur et d'effacer ce courriel de votre système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar virus, d'altération ou de falsification de ce courriel lors de sa transmission par voie électronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.

From even.rouault at spatialys.com  Fri Aug 24 02:02:31 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Aug 2018 11:02:31 +0200
Subject: [gdal-dev] VRT schema integer types serialization
In-Reply-To: <A1DABC8AB3291742B3D4C714F72B2F8E727FB13D@tlswinmbx02.toulouse.spotimage.int>
References: <A1DABC8AB3291742B3D4C714F72B2F8E727FB126@tlswinmbx02.toulouse.spotimage.int>
 <16357740.xcx8PR1FBs@even-i700>
 <A1DABC8AB3291742B3D4C714F72B2F8E727FB13D@tlswinmbx02.toulouse.spotimage.int>
Message-ID: <15691191.8FuurfPfPY@even-i700>

On vendredi 24 août 2018 08:54:08 CEST GUIMMARA, Sébastien (External) [FR] 
wrote:
> Thanks for the reply.
> 
> Did you mean it is fine to do so on my side, or would it be fine to have in
> the official GDAL source ?

That would be a reasonable change to contribute to the upstream project (as a 
pull request preferably)

Even

> 
> -----Message d'origine-----
> De : Even Rouault [mailto:even.rouault at spatialys.com]
> Envoyé : vendredi 24 août 2018 10:36
> À : gdal-dev at lists.osgeo.org
> Cc : GUIMMARA, Sébastien (External) [FR]
> Objet : Re: [gdal-dev] VRT schema integer types serialization
> 
> On vendredi 24 août 2018 07:52:04 CEST GUIMMARA, Sébastien (External) [FR]
> 
> wrote:
> > xs:unsignedInt
> 
> Replacing uses of xs:nonNegativeInteger with the custom nonNegativeInteger32
> would be fine, and modifying that one to be base on xs:unsignedInt sounds
> good too
> 
> 
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> Please consider the environment before printing this email message.
> 
> ________________________________
> 
> Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des
> informations confidentielles et/ou protégées ou dont la diffusion est
> restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le
> copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en
> avertir immédiatement l'expéditeur et d'effacer ce courriel de votre
> système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar
> virus, d'altération ou de falsification de ce courriel lors de sa
> transmission par voie électronique.
> 
> This email (including any attachments) may contain confidential and/or
> privileged information or information otherwise protected from disclosure.
> If you are not the intended recipient, please notify the sender
> immediately, do not copy this message or any attachments and do not use it
> for any purpose or disclose its content to any person, but delete this
> message and any attachments from your system. Airbus DS Geo disclaims any
> and all liability if this email transmission was virus corrupted, altered
> or falsified.
> 
> ________________________________
> 
> Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des
> Satellites, 31400 Toulouse, France.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastien.guimmara.external at airbus.com  Fri Aug 24 02:03:37 2018
From: sebastien.guimmara.external at airbus.com (=?iso-8859-1?Q?GUIMMARA=2C_S=E9bastien_=28External=29_=5BFR=5D?=)
Date: Fri, 24 Aug 2018 09:03:37 +0000
Subject: [gdal-dev] VRT schema integer types serialization
In-Reply-To: <15691191.8FuurfPfPY@even-i700>
References: <A1DABC8AB3291742B3D4C714F72B2F8E727FB126@tlswinmbx02.toulouse.spotimage.int>
 <16357740.xcx8PR1FBs@even-i700>
 <A1DABC8AB3291742B3D4C714F72B2F8E727FB13D@tlswinmbx02.toulouse.spotimage.int>
 <15691191.8FuurfPfPY@even-i700>
Message-ID: <A1DABC8AB3291742B3D4C714F72B2F8E727FB150@tlswinmbx02.toulouse.spotimage.int>

Thanks, I'll see what I can do (my dev box is not connected to the internet, so not easy to push anything to github).

Sébastien

-----Message d'origine-----
De : Even Rouault [mailto:even.rouault at spatialys.com]
Envoyé : vendredi 24 août 2018 11:03
À : GUIMMARA, Sébastien (External) [FR]
Cc : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] VRT schema integer types serialization

On vendredi 24 août 2018 08:54:08 CEST GUIMMARA, Sébastien (External) [FR]
wrote:
> Thanks for the reply.
>
> Did you mean it is fine to do so on my side, or would it be fine to have in
> the official GDAL source ?

That would be a reasonable change to contribute to the upstream project (as a
pull request preferably)

Even

>
> -----Message d'origine-----
> De : Even Rouault [mailto:even.rouault at spatialys.com]
> Envoyé : vendredi 24 août 2018 10:36
> À : gdal-dev at lists.osgeo.org
> Cc : GUIMMARA, Sébastien (External) [FR]
> Objet : Re: [gdal-dev] VRT schema integer types serialization
>
> On vendredi 24 août 2018 07:52:04 CEST GUIMMARA, Sébastien (External) [FR]
>
> wrote:
> > xs:unsignedInt
>
> Replacing uses of xs:nonNegativeInteger with the custom nonNegativeInteger32
> would be fine, and modifying that one to be base on xs:unsignedInt sounds
> good too
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> Please consider the environment before printing this email message.
>
> ________________________________
>
> Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des
> informations confidentielles et/ou protégées ou dont la diffusion est
> restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le
> copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en
> avertir immédiatement l'expéditeur et d'effacer ce courriel de votre
> système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar
> virus, d'altération ou de falsification de ce courriel lors de sa
> transmission par voie électronique.
>
> This email (including any attachments) may contain confidential and/or
> privileged information or information otherwise protected from disclosure.
> If you are not the intended recipient, please notify the sender
> immediately, do not copy this message or any attachments and do not use it
> for any purpose or disclose its content to any person, but delete this
> message and any attachments from your system. Airbus DS Geo disclaims any
> and all liability if this email transmission was virus corrupted, altered
> or falsified.
>
> ________________________________
>
> Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des
> Satellites, 31400 Toulouse, France.


--
Spatialys - Geospatial professional services
http://www.spatialys.com
Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des informations confidentielles et/ou protégées ou dont la diffusion est restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en avertir immédiatement l'expéditeur et d'effacer ce courriel de votre système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar virus, d'altération ou de falsification de ce courriel lors de sa transmission par voie électronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.

From peroc79 at gmail.com  Fri Aug 24 05:35:46 2018
From: peroc79 at gmail.com (Pere Roca Ristol)
Date: Fri, 24 Aug 2018 05:35:46 -0700 (MST)
Subject: [gdal-dev] ogr2ogr from postGIS to shapefile not clipping
Message-ID: <1535114146727-0.post@n6.nabble.com>

I want to run a SQL query, in postgis 2.3.2, converting the result in a
shapefile (using OGR2OGR) This is the SQL query that* perfectly works* from
pgADmin:

select geom,a_code as code,ST_Area(ST_Transform(ST_Intersection(TABLE1.geom, 
 ST_GeomFromText('POLYGON((31.7 -13.1, 31.6 
 -13.04,31.96 -13.04,31.9 -13.1,31.7 
 -13.1))',4326) ),32736))*0.0001::double precision as area from TABLE1
where...

Trying go execute in ogr2ogr (see below), the '*clipping*' part doesn't
work,so I get the *full* postGIS table (but in the saved shapefile)

ogr2ogr -f 'ESRI Shapefile' unzipped/test_sql.shp PG:'host=myhost user=user 
dbname=dbname password=ww!' -sql 'select geom,a_code as 
code,ST_Area(ST_Transform(ST_Intersection(TABLE1.geom, 
ST_GeomFromText('POLYGON((31.7 -13.1, 31.6 
-13.04,31.96 -13.04,31.9 -13.1,31.7 -13.1))',4326) 
),32736))*0.0001::double precision as area from TABLE1 where...'

Later i discovered parameters like...

[-clipsrc [xmin ymin xmax ymax]|WKT|datasource|spat_extent]
           [-clipsrcsql sql_statement] [-clipsrclayer layer]
           [-clipsrcwhere expression]
           [-clipdst [xmin ymin xmax ymax]|WKT|datasource]
           [-clipdstsql sql_statement] [-clipdstlayer layer]

but I don't think any of this parameters may fit my needs, because as you
can see on the SQL code, i am reprojecting on the fly to calculate the area
for each code that is being clipped by the bounding box... so I am afraid I
need the complete postGIS SQL. In any case I tried also without calculating
the areas at the clip doesn't work either.

If this cannot be done via ogr2ogr, could you suggest me another tool? (*to
be executed programatically,* like a command line via PHP...)

thanks in advance



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Aug 24 07:25:17 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Aug 2018 16:25:17 +0200
Subject: [gdal-dev] ogr2ogr from postGIS to shapefile not clipping
In-Reply-To: <1535114146727-0.post@n6.nabble.com>
References: <1535114146727-0.post@n6.nabble.com>
Message-ID: <3356871.adGFULcb6t@even-i700>

On vendredi 24 août 2018 05:35:46 CEST Pere Roca Ristol wrote:
> I want to run a SQL query, in postgis 2.3.2, converting the result in a
> shapefile (using OGR2OGR) This is the SQL query that* perfectly works* from
> pgADmin:
> 
> select geom,a_code as code,ST_Area(ST_Transform(ST_Intersection(TABLE1.geom,
> ST_GeomFromText('POLYGON((31.7 -13.1, 31.6
>  -13.04,31.96 -13.04,31.9 -13.1,31.7
>  -13.1))',4326) ),32736))*0.0001::double precision as area from TABLE1
> where...
> 
> Trying go execute in ogr2ogr (see below), the '*clipping*' part doesn't
> work,so I get the *full* postGIS table (but in the saved shapefile)

What do you call the 'clipping part' : the ST_Intersection uses inside the 
ST_Area ? That clips only for the purpose of ST_Area operation, but not in the 
geom column that is selected. So it is expected that your geometries in the 
geom column are not clipped (neither in pgadmin, ogr2ogr or whatever other 
tool)

> 
> ogr2ogr -f 'ESRI Shapefile' unzipped/test_sql.shp PG:'host=myhost user=user
> dbname=dbname password=ww!' -sql 'select geom,a_code as
> code,ST_Area(ST_Transform(ST_Intersection(TABLE1.geom,
> ST_GeomFromText('POLYGON((31.7 -13.1, 31.6
> -13.04,31.96 -13.04,31.9 -13.1,31.7 -13.1))',4326)
> ),32736))*0.0001::double precision as area from TABLE1 where...'
> 
> Later i discovered parameters like...
> 
> [-clipsrc [xmin ymin xmax ymax]|WKT|datasource|spat_extent]
>            [-clipsrcsql sql_statement] [-clipsrclayer layer]
>            [-clipsrcwhere expression]
>            [-clipdst [xmin ymin xmax ymax]|WKT|datasource]
>            [-clipdstsql sql_statement] [-clipdstlayer layer]

Those will only operate on the source or target SRS. If you need to clip in a 
intermediate SRS, then you need to do the clipping in SQL with ST_Transform 
and ST_Intersection in the column that selects the geometry.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From peroc79 at gmail.com  Fri Aug 24 07:47:14 2018
From: peroc79 at gmail.com (Pere Roca Ristol)
Date: Fri, 24 Aug 2018 07:47:14 -0700 (MST)
Subject: [gdal-dev] ogr2ogr from postGIS to shapefile not clipping
In-Reply-To: <3356871.adGFULcb6t@even-i700>
References: <1535114146727-0.post@n6.nabble.com> <3356871.adGFULcb6t@even-i700>
Message-ID: <1535122034837-0.post@n6.nabble.com>

Oh, yes, sorry... I forgot to do the intersection on the geom field! below
works perfectly, thanks!

 select ST_Intersection(TABLE1.geom, 
 ST_GeomFromText('POLYGON((31.7 -13.1, 31.6 
  -13.04,31.96 -13.04,31.9 -13.1,31.7 
  -13.1))',4326) ) as geom,

  a_code as code,ST_Area(ST_Transform(ST_Intersection(TABLE1.geom, 
  ST_GeomFromText('POLYGON((31.7 -13.1, 31.6 
  -13.04,31.96 -13.04,31.9 -13.1,31.7 
  -13.1))',4326) ),32736))*0.0001::double precision as area from TABLE1 
 where 

 ST_Intersection(TABLE1.geom, 
  ST_GeomFromText('POLYGON((31.7 -13.1, 31.6 
  -13.04,31.96 -13.04,31.9 -13.1,31.7 
  -13.1))',4326) )



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Sun Aug 26 12:07:42 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 26 Aug 2018 21:07:42 +0200
Subject: [gdal-dev] HDF5 and NetCDF now have VSI support
In-Reply-To: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>
References: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>
Message-ID: <2388908.4tma7dVdV9@even-i700>

Hi,

I've pushed a change in master that now enables /vsi support for HDF5 for all 
operating systems, and not just Linux >= 4.3. This uses the HDF5 Virtual File 
Driver mechanism:
https://support.hdfgroup.org/HDF5/doc/TechNotes/VFL.html
which allows to plug a custom low-level I/O layer

(In theory, as netCDF V4 uses HDF5 underneath, this could be available for it 
too, but the use of HDF5 is hidden by the netCDF API, so this would require 
patching libnetcdf)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastien.guimmara.external at airbus.com  Mon Aug 27 02:17:32 2018
From: sebastien.guimmara.external at airbus.com (=?iso-8859-1?Q?GUIMMARA=2C_S=E9bastien_=28External=29_=5BFR=5D?=)
Date: Mon, 27 Aug 2018 09:17:32 +0000
Subject: [gdal-dev] VRT band datatype issue
Message-ID: <A1DABC8AB3291742B3D4C714F72B2F8E727FB17D@tlswinmbx02.toulouse.spotimage.int>

Hi all,

I am creating a VRT that translate from a 16bit dataset to a 8bit. Here is the raster band :

<VRTRasterBand dataType="Byte" band="1">
      <ComplexSource>
      ...
      <Exponent>0.75</Exponent>
      <SrcMin>0</SrcMin>
      <SrcMax>65535</SrcMax>
      <DstMin>0</DstMin>
      <DstMax>255</DstMax>
      <SourceProperties DataType="UInt16"/>
      </ComplexSource>
</VRTRasterBand>

However, gdal_info 2.2 tells me that this VRT has DataType=Byte (OK), but the min/max are still 0/65535 instead of 0/255.

How is it possible ?

Sébastien

Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des informations confidentielles et/ou protégées ou dont la diffusion est restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en avertir immédiatement l'expéditeur et d'effacer ce courriel de votre système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar virus, d'altération ou de falsification de ce courriel lors de sa transmission par voie électronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180827/3b3f089f/attachment.html>

From james.mcclain at gmail.com  Mon Aug 27 03:58:09 2018
From: james.mcclain at gmail.com (James McClain)
Date: Mon, 27 Aug 2018 06:58:09 -0400
Subject: [gdal-dev] HDF5 and NetCDF now have VSI support
In-Reply-To: <2388908.4tma7dVdV9@even-i700>
References: <CAD5SdwL1CkTXCseg+o+9cahF7_wOq4iogHLwfswXy1D_f5C8_w@mail.gmail.com>
 <2388908.4tma7dVdV9@even-i700>
Message-ID: <CAD5Sdw+KVWiPmOzHxKgfutoKxJ_KmPGA=E+0yXaecXf9bOZ--Q@mail.gmail.com>

That is good news, I am glad to see that that capability is now available
to more people.

On Sun, Aug 26, 2018 at 3:07 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I've pushed a change in master that now enables /vsi support for HDF5 for
> all
> operating systems, and not just Linux >= 4.3. This uses the HDF5 Virtual
> File
> Driver mechanism:
> https://support.hdfgroup.org/HDF5/doc/TechNotes/VFL.html
> which allows to plug a custom low-level I/O layer
>
> (In theory, as netCDF V4 uses HDF5 underneath, this could be available for
> it
> too, but the use of HDF5 is hidden by the netCDF API, so this would
> require
> patching libnetcdf)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
"I prayed for freedom for twenty years, but received no answer until I
prayed with my legs."
     -- Frederick Douglass
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180827/5edd81ea/attachment.html>

From even.rouault at spatialys.com  Mon Aug 27 04:34:13 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Aug 2018 13:34:13 +0200
Subject: [gdal-dev] VRT band datatype issue
In-Reply-To: <A1DABC8AB3291742B3D4C714F72B2F8E727FB17D@tlswinmbx02.toulouse.spotimage.int>
References: <A1DABC8AB3291742B3D4C714F72B2F8E727FB17D@tlswinmbx02.toulouse.spotimage.int>
Message-ID: <8604376.6EQYDnk3NB@even-i700>

On lundi 27 août 2018 09:17:32 CEST GUIMMARA, Sébastien (External) [FR] wrote:
> Hi all,
> 
> I am creating a VRT that translate from a 16bit dataset to a 8bit. Here is
> the raster band :
> 
> <VRTRasterBand dataType="Byte" band="1">
>       <ComplexSource>
>       ...
>       <Exponent>0.75</Exponent>
>       <SrcMin>0</SrcMin>
>       <SrcMax>65535</SrcMax>
>       <DstMin>0</DstMin>
>       <DstMax>255</DstMax>
>       <SourceProperties DataType="UInt16"/>
>       </ComplexSource>
> </VRTRasterBand>
> 
> However, gdal_info 2.2 tells me that this VRT has DataType=Byte (OK), but
> the min/max are still 0/65535 instead of 0/255.
> 
> How is it possible ?

An inappropriate optimization that didn't take into account exponential 
scaling.
Fixed per
https://github.com/OSGeo/gdal/commit/c2b188a49baef70e4e05614be14caaa520341302

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastien.guimmara.external at airbus.com  Mon Aug 27 04:48:04 2018
From: sebastien.guimmara.external at airbus.com (=?iso-8859-1?Q?GUIMMARA=2C_S=E9bastien_=28External=29_=5BFR=5D?=)
Date: Mon, 27 Aug 2018 11:48:04 +0000
Subject: [gdal-dev] VRT band datatype issue
In-Reply-To: <8604376.6EQYDnk3NB@even-i700>
References: <A1DABC8AB3291742B3D4C714F72B2F8E727FB17D@tlswinmbx02.toulouse.spotimage.int>
 <8604376.6EQYDnk3NB@even-i700>
Message-ID: <A1DABC8AB3291742B3D4C714F72B2F8E727FB191@tlswinmbx02.toulouse.spotimage.int>

Thanks for the quick fix !

-----Message d'origine-----
De : Even Rouault [mailto:even.rouault at spatialys.com]
Envoyé : lundi 27 août 2018 13:34
À : gdal-dev at lists.osgeo.org
Cc : GUIMMARA, Sébastien (External) [FR]
Objet : Re: [gdal-dev] VRT band datatype issue

On lundi 27 août 2018 09:17:32 CEST GUIMMARA, Sébastien (External) [FR] wrote:
> Hi all,
>
> I am creating a VRT that translate from a 16bit dataset to a 8bit. Here is
> the raster band :
>
> <VRTRasterBand dataType="Byte" band="1">
>       <ComplexSource>
>       ...
>       <Exponent>0.75</Exponent>
>       <SrcMin>0</SrcMin>
>       <SrcMax>65535</SrcMax>
>       <DstMin>0</DstMin>
>       <DstMax>255</DstMax>
>       <SourceProperties DataType="UInt16"/>
>       </ComplexSource>
> </VRTRasterBand>
>
> However, gdal_info 2.2 tells me that this VRT has DataType=Byte (OK), but
> the min/max are still 0/65535 instead of 0/255.
>
> How is it possible ?

An inappropriate optimization that didn't take into account exponential
scaling.
Fixed per
https://github.com/OSGeo/gdal/commit/c2b188a49baef70e4e05614be14caaa520341302

Even

--
Spatialys - Geospatial professional services
http://www.spatialys.com
Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des informations confidentielles et/ou protégées ou dont la diffusion est restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en avertir immédiatement l'expéditeur et d'effacer ce courriel de votre système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar virus, d'altération ou de falsification de ce courriel lors de sa transmission par voie électronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.

From luis.de.sousa at protonmail.ch  Tue Aug 28 03:52:16 2018
From: luis.de.sousa at protonmail.ch (=?UTF-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 28 Aug 2018 10:52:16 +0000
Subject: [gdal-dev] Issue 1688
Message-ID: <n6-x8_QGLY7fDoZFz2ZVNUSJ0HKgxpdwTYacXGkp9alE1MsNFEQ5yIfHX3ZkRls5XqZvnIDuddAShbEoj79qeQ==@protonmail.ch>

Hi all,

I appear to have come accross issue 1688 [0] with GDAL 2.2.3 (installed from ubuntu-gis). I am warpping a 70 MB tif file into another CRS and the resulting tif occupies 850 MB. If instead I perform the warpping without compression and compress à posteriori with gdal_translate the resulting tif takes only 50 MB. Having to do this operation in two steps does no bother me, however, the intermediate uncompressed tif is really large: 20 GB; this could become a problem.

Was issue 1688 fully fixed? Or are these results expected?

Thank you.

[0] https://trac.osgeo.org/gdal/ticket/1688

--
Luís Moreira de Sousa
Email: luis.de.sousa at protonmail.ch
RingID: ring:7ca91d83f4f9dec82fec9f1144b8e5c1ef2a110c
URL: https://ldesousa.github.io

Sent with [ProtonMail](https://protonmail.com) Secure Email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180828/698ea713/attachment.html>

From even.rouault at spatialys.com  Tue Aug 28 04:00:33 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 28 Aug 2018 13:00:33 +0200
Subject: [gdal-dev] Issue 1688
In-Reply-To: <n6-x8_QGLY7fDoZFz2ZVNUSJ0HKgxpdwTYacXGkp9alE1MsNFEQ5yIfHX3ZkRls5XqZvnIDuddAShbEoj79qeQ==@protonmail.ch>
References: <n6-x8_QGLY7fDoZFz2ZVNUSJ0HKgxpdwTYacXGkp9alE1MsNFEQ5yIfHX3ZkRls5XqZvnIDuddAShbEoj79qeQ==@protonmail.ch>
Message-ID: <1686842.hTYQHiZ5FT@even-i700>

Luí­s,

See
https://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-coCOMPRESSisbroken
for several solutions

Even

> Hi all,
> 
> I appear to have come accross issue 1688 [0] with GDAL 2.2.3 (installed from
> ubuntu-gis). I am warpping a 70 MB tif file into another CRS and the
> resulting tif occupies 850 MB. If instead I perform the warpping without
> compression and compress à posteriori with gdal_translate the resulting tif
> takes only 50 MB. Having to do this operation in two steps does no bother
> me, however, the intermediate uncompressed tif is really large: 20 GB; this
> could become a problem.
> 
> Was issue 1688 fully fixed? Or are these results expected?
> 
> Thank you.
> 
> [0] https://trac.osgeo.org/gdal/ticket/1688
> 
> --
> Luís Moreira de Sousa
> Email: luis.de.sousa at protonmail.ch
> RingID: ring:7ca91d83f4f9dec82fec9f1144b8e5c1ef2a110c
> URL: https://ldesousa.github.io
> 
> Sent with [ProtonMail](https://protonmail.com) Secure Email.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Aug 29 12:41:50 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 Aug 2018 21:41:50 +0200
Subject: [gdal-dev] Support for S-100 and S-102
In-Reply-To: <CACmBxyvULGdrr1fwEjWs4d_DyaL5Od00LZOzjAhE5BEgiTXWaw@mail.gmail.com>
References: <DFDA8B91111F2E40833202CAE291FC95013302A95E@EMP-EXMR201.corp.leidos.com>
 <2391908.kjktXhKX3H@even-i700>
 <CACmBxyvULGdrr1fwEjWs4d_DyaL5Od00LZOzjAhE5BEgiTXWaw@mail.gmail.com>
Message-ID: <1866531.Ipc4VqCxAG@even-i700>

All,

I've committed in GDAL master various improvements in the BAG driver, around 
two main directions:
- read support for variable resolution BAG, with resampling and interpolation 
options
- creating of (single resolution) BAG files from other GDAL datasets

Updated documentation available at https://gdal.org/frmt_bag.html

This work has been made possible through NOAA funding.

Best regards,

Even


> I'd be happy to connect anyone with the folks at NOAA, CCOM-JHC, and
> elsewhere who have been participating in drafting S-10x.  I only sat in on
> a few of the meetings long ago.
> 
> Specs should eventually end up here...
> https://www.iho.int/iho_pubs/IHO_Download.htm#S-100
> 
> On Thu, Jul 5, 2018 at 10:43 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Kelly,
> > 
> > > I know GDAL/OGR supports S-57 format, but could not see where it
> > > supports
> > > S-100.
> > > 
> > > Is there a plan to support the latest IHO S-100 and S-102 standards in
> > 
> > the
> > 
> > > near future?
> > 
> > I'm not aware of anyone working on that currently.
> > 
> > I had difficulties finding concrete documentation about those standards
> > (specification and test products). From my quick search, it looks like :
> > - S-100 is a conceptual model,
> > - S-101 is for ENC encoding, a successor of S-57. Apparently still using
> > ISO-8211 for low level encoding.
> > - S-102 is bathymetric grid encoding in GeoTIFF or in BAG. So should be
> > already handled by GDAL
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Thu Aug 30 02:44:10 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 30 Aug 2018 11:44:10 +0200
Subject: [gdal-dev] PG driver: apply custom sql files together with loading
	data in one transaction
Message-ID: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>

Hi,

I have a Python application which loads data into PostGIS DB using
GDAL Python API. Input files are processed in one transaction (done on
datasource level). After loading data there some custom SQL files
applied (currently implemented using psycopg2). There is a request to
perform loading data and customization SQL files in one transaction.
Is there any option how to apply SQL custom files on data source level
using GDAL API?

Thanks for any tips/pointers! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From kusala9 at googlemail.com  Thu Aug 30 03:27:28 2018
From: kusala9 at googlemail.com (kusala nine)
Date: Thu, 30 Aug 2018 11:27:28 +0100
Subject: [gdal-dev] Support for S-100 and S-102
In-Reply-To: <1866531.Ipc4VqCxAG@even-i700>
References: <DFDA8B91111F2E40833202CAE291FC95013302A95E@EMP-EXMR201.corp.leidos.com>
 <2391908.kjktXhKX3H@even-i700>
 <CACmBxyvULGdrr1fwEjWs4d_DyaL5Od00LZOzjAhE5BEgiTXWaw@mail.gmail.com>
 <1866531.Ipc4VqCxAG@even-i700>
Message-ID: <CAOn9mqfk9OwOYP_2OrDZ9Ejanxg9650bnnGe_uiF6bq9KmjPkw@mail.gmail.com>

The biggest work item for S-100 compatibility would be an update to the
GDAL/OGR drivers for iso8211 in order to parse the S-101 iso8211 encoding.
S-101 is the candidate replacement for S-57 ENC data - so, at some point
all of NOAA's S-57 marine data will be available as S-101 datasets too.
There's various improvements in S-101 over the old S-57 standard including
dynamic feature catalogues and complex attributes on features but the main
issue is that the iso8211 encoding uses concatenated iso8211 data
structures (where you can have repeated field/subfields concatenated with
simple (i.e non-repeating ones)). The current GDAL I believe doesn't parse
these correctly so can't be used to parse S-101 data. I am invovled with
the IHO team developing the standard but the main data format/spec and
encoding are all pretty much done and there are converters/datasets
available if anyone is able to take on the work - not sure if there's NOAA
funding for it? It would be a huge step forward in the rollout to have an
open source parser for this data....

Jonathan.

On 29 August 2018 at 20:41, Even Rouault <even.rouault at spatialys.com> wrote:

> All,
>
> I've committed in GDAL master various improvements in the BAG driver,
> around
> two main directions:
> - read support for variable resolution BAG, with resampling and
> interpolation
> options
> - creating of (single resolution) BAG files from other GDAL datasets
>
> Updated documentation available at https://gdal.org/frmt_bag.html
>
> This work has been made possible through NOAA funding.
>
> Best regards,
>
> Even
>
>
> > I'd be happy to connect anyone with the folks at NOAA, CCOM-JHC, and
> > elsewhere who have been participating in drafting S-10x.  I only sat in
> on
> > a few of the meetings long ago.
> >
> > Specs should eventually end up here...
> > https://www.iho.int/iho_pubs/IHO_Download.htm#S-100
> >
> > On Thu, Jul 5, 2018 at 10:43 AM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Kelly,
> > >
> > > > I know GDAL/OGR supports S-57 format, but could not see where it
> > > > supports
> > > > S-100.
> > > >
> > > > Is there a plan to support the latest IHO S-100 and S-102 standards
> in
> > >
> > > the
> > >
> > > > near future?
> > >
> > > I'm not aware of anyone working on that currently.
> > >
> > > I had difficulties finding concrete documentation about those standards
> > > (specification and test products). From my quick search, it looks like
> :
> > > - S-100 is a conceptual model,
> > > - S-101 is for ENC encoding, a successor of S-57. Apparently still
> using
> > > ISO-8211 for low level encoding.
> > > - S-102 is bathymetric grid encoding in GeoTIFF or in BAG. So should be
> > > already handled by GDAL
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180830/cbffcf34/attachment.html>

From mswope at gmail.com  Thu Aug 30 06:29:12 2018
From: mswope at gmail.com (Mike)
Date: Thu, 30 Aug 2018 07:29:12 -0600
Subject: [gdal-dev] Support for S-100 and S-102
In-Reply-To: <CAOn9mqfk9OwOYP_2OrDZ9Ejanxg9650bnnGe_uiF6bq9KmjPkw@mail.gmail.com>
References: <DFDA8B91111F2E40833202CAE291FC95013302A95E@EMP-EXMR201.corp.leidos.com>
 <2391908.kjktXhKX3H@even-i700>
 <CACmBxyvULGdrr1fwEjWs4d_DyaL5Od00LZOzjAhE5BEgiTXWaw@mail.gmail.com>
 <1866531.Ipc4VqCxAG@even-i700>
 <CAOn9mqfk9OwOYP_2OrDZ9Ejanxg9650bnnGe_uiF6bq9KmjPkw@mail.gmail.com>
Message-ID: <CAKTSvBik76m4e1L-TgkDcz0pHTuG3194J-eKbbCFbDFUgX_35w@mail.gmail.com>

The multiple field/subfields - I think gdal already does this for S-57 on
DSID. It just prefixes the subfields with the field name.

However -side note:  it seems the DSID_ISDT (issue date) is incorrect, it
just has the same value as DSID_UADT (update application date).

On Thu, Aug 30, 2018, 4:27 AM kusala nine <kusala9 at googlemail.com> wrote:

> The biggest work item for S-100 compatibility would be an update to the
> GDAL/OGR drivers for iso8211 in order to parse the S-101 iso8211 encoding.
> S-101 is the candidate replacement for S-57 ENC data - so, at some point
> all of NOAA's S-57 marine data will be available as S-101 datasets too.
> There's various improvements in S-101 over the old S-57 standard including
> dynamic feature catalogues and complex attributes on features but the main
> issue is that the iso8211 encoding uses concatenated iso8211 data
> structures (where you can have repeated field/subfields concatenated with
> simple (i.e non-repeating ones)). The current GDAL I believe doesn't parse
> these correctly so can't be used to parse S-101 data. I am invovled with
> the IHO team developing the standard but the main data format/spec and
> encoding are all pretty much done and there are converters/datasets
> available if anyone is able to take on the work - not sure if there's NOAA
> funding for it? It would be a huge step forward in the rollout to have an
> open source parser for this data....
>
> Jonathan.
>
> On 29 August 2018 at 20:41, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> All,
>>
>> I've committed in GDAL master various improvements in the BAG driver,
>> around
>> two main directions:
>> - read support for variable resolution BAG, with resampling and
>> interpolation
>> options
>> - creating of (single resolution) BAG files from other GDAL datasets
>>
>> Updated documentation available at https://gdal.org/frmt_bag.html
>>
>> This work has been made possible through NOAA funding.
>>
>> Best regards,
>>
>> Even
>>
>>
>> > I'd be happy to connect anyone with the folks at NOAA, CCOM-JHC, and
>> > elsewhere who have been participating in drafting S-10x.  I only sat in
>> on
>> > a few of the meetings long ago.
>> >
>> > Specs should eventually end up here...
>> > https://www.iho.int/iho_pubs/IHO_Download.htm#S-100
>> >
>> > On Thu, Jul 5, 2018 at 10:43 AM, Even Rouault <
>> even.rouault at spatialys.com>
>> >
>> > wrote:
>> > > Kelly,
>> > >
>> > > > I know GDAL/OGR supports S-57 format, but could not see where it
>> > > > supports
>> > > > S-100.
>> > > >
>> > > > Is there a plan to support the latest IHO S-100 and S-102 standards
>> in
>> > >
>> > > the
>> > >
>> > > > near future?
>> > >
>> > > I'm not aware of anyone working on that currently.
>> > >
>> > > I had difficulties finding concrete documentation about those
>> standards
>> > > (specification and test products). From my quick search, it looks
>> like :
>> > > - S-100 is a conceptual model,
>> > > - S-101 is for ENC encoding, a successor of S-57. Apparently still
>> using
>> > > ISO-8211 for low level encoding.
>> > > - S-102 is bathymetric grid encoding in GeoTIFF or in BAG. So should
>> be
>> > > already handled by GDAL
>> > >
>> > > Even
>> > >
>> > > --
>> > > Spatialys - Geospatial professional services
>> > > http://www.spatialys.com
>> > > _______________________________________________
>> > > gdal-dev mailing list
>> > > gdal-dev at lists.osgeo.org
>> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180830/7a75c2ef/attachment-0001.html>

From even.rouault at spatialys.com  Thu Aug 30 07:28:37 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Aug 2018 16:28:37 +0200
Subject: [gdal-dev] PG driver: apply custom sql files together with
	loading data in one transaction
In-Reply-To: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>
References: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>
Message-ID: <2565769.eSPfGLNmZN@even-i700>

On jeudi 30 août 2018 11:44:10 CEST Martin Landa wrote:
> Hi,
> 
> I have a Python application which loads data into PostGIS DB using
> GDAL Python API. Input files are processed in one transaction (done on
> datasource level). After loading data there some custom SQL files
> applied (currently implemented using psycopg2). There is a request to
> perform loading data and customization SQL files in one transaction.
> Is there any option how to apply SQL custom files on data source level
> using GDAL API?

With unmodified GDALVectorTranslate() it isn't really possible. So you don't 
have much options than using StartTransaction(), using the OGR CreateFeature() 
API by yourself to do ogr2ogr-like ingestion, and then ExecuteSQL() for your 
customizations.

It could be desirable to have a way to instruct GDALVectorTranslate() not to 
mess at all with transactions. Like a "-gt none" syntax. There shouldn't be 
much change to implement that.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug 30 07:54:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Aug 2018 16:54:53 +0200
Subject: [gdal-dev] Support for S-100 and S-102
In-Reply-To: <CAKTSvBik76m4e1L-TgkDcz0pHTuG3194J-eKbbCFbDFUgX_35w@mail.gmail.com>
References: <DFDA8B91111F2E40833202CAE291FC95013302A95E@EMP-EXMR201.corp.leidos.com>
 <CAOn9mqfk9OwOYP_2OrDZ9Ejanxg9650bnnGe_uiF6bq9KmjPkw@mail.gmail.com>
 <CAKTSvBik76m4e1L-TgkDcz0pHTuG3194J-eKbbCFbDFUgX_35w@mail.gmail.com>
Message-ID: <40439125.YnQnMH14zB@even-i700>

On jeudi 30 août 2018 07:29:12 CEST Mike wrote:
> The multiple field/subfields - I think gdal already does this for S-57 on
> DSID. It just prefixes the subfields with the field name.
> 
> However -side note:  it seems the DSID_ISDT (issue date) is incorrect, it
> just has the same value as DSID_UADT (update application date).

From a quick look at the driver code, I can't see an obvious copy&paste-like 
error. If you believe there's a bug in the driver, and that's just not how the 
dataset metadata is filled, please file an issue at
https://github.com/OSGeo/gdal/issues with an attached or linked dataset.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kusala9 at googlemail.com  Thu Aug 30 08:38:07 2018
From: kusala9 at googlemail.com (kusala nine)
Date: Thu, 30 Aug 2018 16:38:07 +0100
Subject: [gdal-dev] Support for S-100 and S-102
In-Reply-To: <CAKTSvBik76m4e1L-TgkDcz0pHTuG3194J-eKbbCFbDFUgX_35w@mail.gmail.com>
References: <DFDA8B91111F2E40833202CAE291FC95013302A95E@EMP-EXMR201.corp.leidos.com>
 <2391908.kjktXhKX3H@even-i700>
 <CACmBxyvULGdrr1fwEjWs4d_DyaL5Od00LZOzjAhE5BEgiTXWaw@mail.gmail.com>
 <1866531.Ipc4VqCxAG@even-i700>
 <CAOn9mqfk9OwOYP_2OrDZ9Ejanxg9650bnnGe_uiF6bq9KmjPkw@mail.gmail.com>
 <CAKTSvBik76m4e1L-TgkDcz0pHTuG3194J-eKbbCFbDFUgX_35w@mail.gmail.com>
Message-ID: <CAOn9mqddmawohtb50mRXtm=6oRPr1_0_wFNUdbpAybbUiUfh_Q@mail.gmail.com>

ah - the situation you're describing is subtly different. That's when you
have two 8211 fields concatenated together, so e.g the DSID/DSSI are
concatenated into a single 8211 record at the head of a standard S-57 ENC.

What I'm talking about is when a single 8211 field has repeating subfield
groups. So, for instance in an S-101 ENC the "Information Association field
" (INAS) has the specifier (in the record DDR)

*RRNM!RRID!NIAC!NARC!IUIN\\*NATC!ATIX!PAIX!ATIN!ATVL*

which represents a single set of RRNM,RRID,NIAC,NARC,IUIN subfields
followed by a set of potentially repeating NATC,PAIX,ATIN,ATVL fields.
These types of subfield specifiers simply don't exist in S-57 ENCs
(although I believe there are isolated examples in the S-57 defence
extension AML). And, of course fields are still concatenated togehter. The
good news is that the whole iso8211 layer is much better documented in the
S-101 spec and these specifiers make a lot more sense than the original
S-57 document. the issue I was describing is that records with these
repeating subfields aren't parsable with the current ogr based GDAL
libraries (I think, at least they weren't the last time I tried it).  Hope
that explains it better.... :-)

J

On 30 August 2018 at 14:29, Mike <mswope at gmail.com> wrote:

> The multiple field/subfields - I think gdal already does this for S-57 on
> DSID. It just prefixes the subfields with the field name.
>
> However -side note:  it seems the DSID_ISDT (issue date) is incorrect, it
> just has the same value as DSID_UADT (update application date).
>
> On Thu, Aug 30, 2018, 4:27 AM kusala nine <kusala9 at googlemail.com> wrote:
>
>> The biggest work item for S-100 compatibility would be an update to the
>> GDAL/OGR drivers for iso8211 in order to parse the S-101 iso8211 encoding.
>> S-101 is the candidate replacement for S-57 ENC data - so, at some point
>> all of NOAA's S-57 marine data will be available as S-101 datasets too.
>> There's various improvements in S-101 over the old S-57 standard including
>> dynamic feature catalogues and complex attributes on features but the main
>> issue is that the iso8211 encoding uses concatenated iso8211 data
>> structures (where you can have repeated field/subfields concatenated with
>> simple (i.e non-repeating ones)). The current GDAL I believe doesn't parse
>> these correctly so can't be used to parse S-101 data. I am invovled with
>> the IHO team developing the standard but the main data format/spec and
>> encoding are all pretty much done and there are converters/datasets
>> available if anyone is able to take on the work - not sure if there's NOAA
>> funding for it? It would be a huge step forward in the rollout to have an
>> open source parser for this data....
>>
>> Jonathan.
>>
>> On 29 August 2018 at 20:41, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> All,
>>>
>>> I've committed in GDAL master various improvements in the BAG driver,
>>> around
>>> two main directions:
>>> - read support for variable resolution BAG, with resampling and
>>> interpolation
>>> options
>>> - creating of (single resolution) BAG files from other GDAL datasets
>>>
>>> Updated documentation available at https://gdal.org/frmt_bag.html
>>>
>>> This work has been made possible through NOAA funding.
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>>
>>> > I'd be happy to connect anyone with the folks at NOAA, CCOM-JHC, and
>>> > elsewhere who have been participating in drafting S-10x.  I only sat
>>> in on
>>> > a few of the meetings long ago.
>>> >
>>> > Specs should eventually end up here...
>>> > https://www.iho.int/iho_pubs/IHO_Download.htm#S-100
>>> >
>>> > On Thu, Jul 5, 2018 at 10:43 AM, Even Rouault <
>>> even.rouault at spatialys.com>
>>> >
>>> > wrote:
>>> > > Kelly,
>>> > >
>>> > > > I know GDAL/OGR supports S-57 format, but could not see where it
>>> > > > supports
>>> > > > S-100.
>>> > > >
>>> > > > Is there a plan to support the latest IHO S-100 and S-102
>>> standards in
>>> > >
>>> > > the
>>> > >
>>> > > > near future?
>>> > >
>>> > > I'm not aware of anyone working on that currently.
>>> > >
>>> > > I had difficulties finding concrete documentation about those
>>> standards
>>> > > (specification and test products). From my quick search, it looks
>>> like :
>>> > > - S-100 is a conceptual model,
>>> > > - S-101 is for ENC encoding, a successor of S-57. Apparently still
>>> using
>>> > > ISO-8211 for low level encoding.
>>> > > - S-102 is bathymetric grid encoding in GeoTIFF or in BAG. So should
>>> be
>>> > > already handled by GDAL
>>> > >
>>> > > Even
>>> > >
>>> > > --
>>> > > Spatialys - Geospatial professional services
>>> > > http://www.spatialys.com
>>> > > _______________________________________________
>>> > > gdal-dev mailing list
>>> > > gdal-dev at lists.osgeo.org
>>> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>> --
>>> Spatialys - Geospatial professional services
>>> http://www.spatialys.com
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180830/0dce8ce0/attachment.html>

From mswope at gmail.com  Thu Aug 30 08:51:16 2018
From: mswope at gmail.com (Mike)
Date: Thu, 30 Aug 2018 09:51:16 -0600
Subject: [gdal-dev] Support for S-100 and S-102
In-Reply-To: <40439125.YnQnMH14zB@even-i700>
References: <DFDA8B91111F2E40833202CAE291FC95013302A95E@EMP-EXMR201.corp.leidos.com>
 <CAOn9mqfk9OwOYP_2OrDZ9Ejanxg9650bnnGe_uiF6bq9KmjPkw@mail.gmail.com>
 <CAKTSvBik76m4e1L-TgkDcz0pHTuG3194J-eKbbCFbDFUgX_35w@mail.gmail.com>
 <40439125.YnQnMH14zB@even-i700>
Message-ID: <CAKTSvBh8K-JA9foHbR+iw4PjFqCdc5AGM0hQjsaR+Xcb8PbY9Q@mail.gmail.com>

I can't get to it right now, but the new date would be found in the update
file. So this would only occur on cells with updates. If I open an update
file (.001+) in a text editor, I see the date on the second line.

I'm just using the first cell found @
www.charts.noaa.gov/ENCs/ENCsIndv.shtml (US1AK90M). That page also tells
you the update application date and issue date.

I can try to submit an issue later today.



On Thu, Aug 30, 2018, 8:54 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 30 août 2018 07:29:12 CEST Mike wrote:
> > The multiple field/subfields - I think gdal already does this for S-57 on
> > DSID. It just prefixes the subfields with the field name.
> >
> > However -side note:  it seems the DSID_ISDT (issue date) is incorrect, it
> > just has the same value as DSID_UADT (update application date).
>
> From a quick look at the driver code, I can't see an obvious
> copy&paste-like
> error. If you believe there's a bug in the driver, and that's just not how
> the
> dataset metadata is filled, please file an issue at
> https://github.com/OSGeo/gdal/issues with an attached or linked dataset.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180830/9dbde5fb/attachment.html>

From landa.martin at gmail.com  Fri Aug 31 00:44:27 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 31 Aug 2018 09:44:27 +0200
Subject: [gdal-dev] PG driver: apply custom sql files together with
 loading data in one transaction
In-Reply-To: <2565769.eSPfGLNmZN@even-i700>
References: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>
 <2565769.eSPfGLNmZN@even-i700>
Message-ID: <CA+Ei1OfBTFj40KDofeLHjeemnWxDbGH5pSnjRF=3fwik7WRe1Q@mail.gmail.com>

Hi,

čt 30. 8. 2018 v 16:28 odesílatel Even Rouault
<even.rouault at spatialys.com> napsal:
> With unmodified GDALVectorTranslate() it isn't really possible. So you don't

thanks for pointers.

Another option which came to my mind (untested, just a wild guess). By
PGDump driver could be prepared temporary SQL file with loaded data,
content of customization files would be appended, and this file
applied by psycopg2 as a one transaction. It's workaround but could
work out.

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Fri Aug 31 01:20:49 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 31 Aug 2018 10:20:49 +0200
Subject: [gdal-dev] PG driver: apply custom sql files together with
 loading data in one transaction
In-Reply-To: <2565769.eSPfGLNmZN@even-i700>
References: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>
 <2565769.eSPfGLNmZN@even-i700>
Message-ID: <CA+Ei1Oc73oehi--a7+sFhLy4QOgu0PBdMbDS_4MaBeK2LixwSw@mail.gmail.com>

Hi,

čt 30. 8. 2018 v 16:28 odesílatel Even Rouault
<even.rouault at spatialys.com> napsal:
> API by yourself to do ogr2ogr-like ingestion, and then ExecuteSQL() for your
> customizations.

great, first tests with ExecuteSQL(fd.read()) went well. Unfortunately
the method returns always None regardless of success or failure. Is
there any way how to catch up errors when executing SQL commands by
ExecuteSQL()?

Thanks, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Fri Aug 31 01:31:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 31 Aug 2018 10:31:46 +0200
Subject: [gdal-dev] PG driver: apply custom sql files together with
	loading data in one transaction
In-Reply-To: <CA+Ei1Oc73oehi--a7+sFhLy4QOgu0PBdMbDS_4MaBeK2LixwSw@mail.gmail.com>
References: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>
 <2565769.eSPfGLNmZN@even-i700>
 <CA+Ei1Oc73oehi--a7+sFhLy4QOgu0PBdMbDS_4MaBeK2LixwSw@mail.gmail.com>
Message-ID: <4902774.kNolcggssI@even-i700>

On vendredi 31 août 2018 10:20:49 CEST Martin Landa wrote:
> Hi,
> 
> čt 30. 8. 2018 v 16:28 odesílatel Even Rouault
> 
> <even.rouault at spatialys.com> napsal:
> > API by yourself to do ogr2ogr-like ingestion, and then ExecuteSQL() for
> > your customizations.
> 
> great, first tests with ExecuteSQL(fd.read()) went well. Unfortunately
> the method returns always None regardless of success or failure.

Yes it will return either None either a result set layer if the command is 
typically a SELECT or something that returns rows.

> Is
> there any way how to catch up errors when executing SQL commands by
> ExecuteSQL()?

testing CPLGetLastErrorType() != CE_None

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nicolas.cadieux at archeotec.ca  Fri Aug 31 06:45:02 2018
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Fri, 31 Aug 2018 09:45:02 -0400
Subject: [gdal-dev] Suggestion to create drivers for a new raster format
Message-ID: <8A9F96D4-9770-4CE1-8371-F7BAF8294675@archeotec.ca>

Hi,

How do we proceed if we want GDAL team to create drivers for a new raster format?  I would like gdal to be able to read .byn and .bin Geoid files.  I don’t think these files can be simply read using the bin vrt format.  I have the file format specifications.

Nicolas Cadieux

From landa.martin at gmail.com  Fri Aug 31 10:09:29 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 31 Aug 2018 19:09:29 +0200
Subject: [gdal-dev] PG driver: apply custom sql files together with
 loading data in one transaction
In-Reply-To: <4902774.kNolcggssI@even-i700>
References: <CA+Ei1Oec47FSnAH2vvgqbKaZRHrY2S1GZQ5oNTAQ2KnvjipyXw@mail.gmail.com>
 <2565769.eSPfGLNmZN@even-i700>
 <CA+Ei1Oc73oehi--a7+sFhLy4QOgu0PBdMbDS_4MaBeK2LixwSw@mail.gmail.com>
 <4902774.kNolcggssI@even-i700>
Message-ID: <CA+Ei1OdJ36xhpHKPAw5QxN6C=61mviCF-Ofgv64-DDtcX4Xkeg@mail.gmail.com>

Hi,

pá 31. 8. 2018 v 10:31 odesílatel Even Rouault
<even.rouault at spatialys.com> napsal:
> > Is
> > there any way how to catch up errors when executing SQL commands by
> > ExecuteSQL()?
>
> testing CPLGetLastErrorType() != CE_None

great, works perfectly! Thanks a lot, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

