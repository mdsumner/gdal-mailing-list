From jonas.ardo at nateko.lu.se  Wed Nov  2 03:53:04 2022
From: jonas.ardo at nateko.lu.se (=?UTF-8?Q?Jonas_Ard=c3=b6?=)
Date: Wed, 2 Nov 2022 11:53:04 +0100
Subject: [gdal-dev] Command line /python syntax differences
Message-ID: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>

Dear gdal-gurus,

I am new to using gdal via Python.

As the command line arguments/keywords differ from command prompt mode 
and Python-mode (for example for example is *-r* in gdal_translate? the 
same? as *resampleAlg* in gdal.Translate in Python).
I find it tricky to find arguments/keywords in Python.

How can all options/full syntax for gdal-pythons commands be listed as 
done here 
<https://gis.stackexchange.com/questions/352643/gdal-translate-in-python-where-do-i-find-how-to-convert-the-command-line-argum> 
?
Where they also refer tohttps://gdal.org/python/ which do not exist.
Any other (full/completed) online resource for this?
Can "pydoc -g osgeo" be used?
Are the The gdal-dev Archives searchable?


Regards

/Jonas, Lund University, Sweden
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221102/150dde52/attachment.htm>

From kirk.waters at noaa.gov  Wed Nov  2 04:01:45 2022
From: kirk.waters at noaa.gov (Kirk Waters - NOAA Federal)
Date: Wed, 2 Nov 2022 07:01:45 -0400
Subject: [gdal-dev] Command line /python syntax differences
In-Reply-To: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>
References: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>
Message-ID: <CADm=QrRQMd_YW0_=53=LOyDJtNnkORwtiPaH-ANy4NGz4kkPGA@mail.gmail.com>

Jonas,
I believe the information is under the python API section
<https://gdal.org/api/python/osgeo.gdal.html> of the gdal.org site. For
example, the description of the translate options is at
https://gdal.org/api/python/osgeo.gdal.html#osgeo.gdal.TranslateOptions.

Kirk Waters, PhD
NOAA Office for Coastal Management
Applied Sciences Program
?Phone: 843-284-6962? (New as of 2022)
coast.noaa.gov/digitalcoast




On Wed, Nov 2, 2022 at 6:54 AM Jonas Ard? via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Dear gdal-gurus,
>
> I am new to using gdal via Python.
>
> As the command line arguments/keywords differ from command prompt mode and
> Python-mode (for example for example is *-r* in gdal_translate  the same
> as *resampleAlg* in gdal.Translate in Python).
> I find it tricky to find arguments/keywords in Python.
>
> How can all options/full syntax for gdal-pythons commands be listed as
> done here
> <https://gis.stackexchange.com/questions/352643/gdal-translate-in-python-where-do-i-find-how-to-convert-the-command-line-argum>
> ?
> Where they also refer to https://gdal.org/python/ which do not exist.
> Any other (full/completed) online resource for this?
> Can "pydoc -g osgeo" be used?
> Are the The gdal-dev Archives searchable?
>
>
> Regards
>
> /Jonas, Lund University, Sweden
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221102/0cd04a31/attachment.htm>

From even.rouault at spatialys.com  Wed Nov  2 04:03:54 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Nov 2022 12:03:54 +0100
Subject: [gdal-dev] Command line /python syntax differences
In-Reply-To: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>
References: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>
Message-ID: <7c74da9d-48e6-2ae9-ce01-c3dd39536117@spatialys.com>

Jonas,

The doc is at:

https://gdal.org/api/python/osgeo.gdal.html#osgeo.gdal.TranslateOptions

Even

Le 02/11/2022 ? 11:53, Jonas Ard? via gdal-dev a ?crit?:
> Dear gdal-gurus,
>
> I am new to using gdal via Python.
>
> As the command line arguments/keywords differ from command prompt mode 
> and Python-mode (for example for example is *-r* in gdal_translate? 
> the same? as *resampleAlg* in gdal.Translate in Python).
> I find it tricky to find arguments/keywords in Python.
>
> How can all options/full syntax for gdal-pythons commands be listed as 
> done here 
> <https://gis.stackexchange.com/questions/352643/gdal-translate-in-python-where-do-i-find-how-to-convert-the-command-line-argum> 
> ?
> Where they also refer tohttps://gdal.org/python/ which do not exist.
> Any other (full/completed) online resource for this?
> Can "pydoc -g osgeo" be used?
> Are the The gdal-dev Archives searchable?
>
>
> Regards
> /Jonas, Lund University, Sweden
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221102/be5ef93b/attachment.htm>

From jonas.ardo at nateko.lu.se  Wed Nov  2 07:29:38 2022
From: jonas.ardo at nateko.lu.se (=?UTF-8?Q?Jonas_Ard=c3=b6?=)
Date: Wed, 2 Nov 2022 15:29:38 +0100
Subject: [gdal-dev] Command line /python syntax differences
In-Reply-To: <7c74da9d-48e6-2ae9-ce01-c3dd39536117@spatialys.com>
References: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>
 <7c74da9d-48e6-2ae9-ce01-c3dd39536117@spatialys.com>
Message-ID: <23b17c1a-3548-a5ba-a811-79cc04572dee@nateko.lu.se>

Thanks Even,

Still some discrepancy.

*Python (don't work but no error and no output ):
*src_ds = gdal.Open("I:\indata\VPDsc\VPD_scalar.tif")
 ??? #1 GDALWARP to warp all bands in one go
 ??? options = gdal.WarpOptions(options=srcSRS="EPSG:4326", 
dstSRS="EPSG:32628", xRes=20.0, yRes=20.0, resampleAlg="bilinear", 
format='GTiff', outputBounds=[453123, 1702425, 454123, 1703425])
 ??? newfile = gdal.Warp(out_path+"tmp.tif", src_ds, options=options)

*Command line work ok:*
 ??? gdalwarp -s_srs EPSG:4326 -t_srs EPSG:32628 -overwrite -tr 20 20 
-wm 9000 -multi -r near -te 453123 1702425 454123 1703425 -te_srs 
EPSG:32628 /cygdrive/i/indata/VPDsc/VPD_scalar.tif 
/cygdrive/i/data/SNDHR/VPDsc/VPD_scalar_test.tif

Assuming using -te_srs and -t_srs are redundant?
("*outputBoundsSRS* ? SRS in which output bounds are expressed, in the 
case they are not expressed in dstSRS")

Regards
/Jonas
On 02/11/2022 12:03, Even Rouault wrote:
>
> Jonas,
>
> The doc is at:
>
> https://gdal.org/api/python/osgeo.gdal.html#osgeo.gdal.TranslateOptions
>
> Even
>
> Le 02/11/2022 ? 11:53, Jonas Ard? via gdal-dev a ?crit?:
>> Dear gdal-gurus,
>>
>> I am new to using gdal via Python.
>>
>> As the command line arguments/keywords differ from command prompt 
>> mode and Python-mode (for example for example is *-r* in 
>> gdal_translate? the same? as *resampleAlg* in gdal.Translate in Python).
>> I find it tricky to find arguments/keywords in Python.
>>
>> How can all options/full syntax for gdal-pythons commands be listed 
>> as done here 
>> <https://gis.stackexchange.com/questions/352643/gdal-translate-in-python-where-do-i-find-how-to-convert-the-command-line-argum> 
>> ?
>> Where they also refer tohttps://gdal.org/python/ which do not exist.
>> Any other (full/completed) online resource for this?
>> Can "pydoc -g osgeo" be used?
>> Are the The gdal-dev Archives searchable?
>>
>>
>> Regards
>> /Jonas, Lund University, Sweden
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
Jonas Ard?
Physical Geography and Ecosystem Science
Lund University
S?lvegatan 12 22362 Lund Sweden
+46462224031
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221102/6e2a721a/attachment.htm>

From csmemoe at aquaveo.com  Wed Nov  2 09:46:43 2022
From: csmemoe at aquaveo.com (Chris Smemoe)
Date: Wed, 2 Nov 2022 10:46:43 -0600
Subject: [gdal-dev] Command line /python syntax differences
In-Reply-To: <23b17c1a-3548-a5ba-a811-79cc04572dee@nateko.lu.se>
References: <f1cdb631-c0e3-f42d-7495-731201416a03@nateko.lu.se>
 <7c74da9d-48e6-2ae9-ce01-c3dd39536117@spatialys.com>
 <23b17c1a-3548-a5ba-a811-79cc04572dee@nateko.lu.se>
Message-ID: <003101d8eeda$b0f53210$12df9630$@aquaveo.com>

Jonas,

 

I think your formatting of the arguments is not correct.  There are lots of ways to do what you need to do.  You can just use your commandline options directly in the python gdal.Translate options or you can call gdal_translate directly using the python subprocess.call command. There are plenty of examples if you just search for it.  I think you can just do something like this for what you need:

 

from osgeo import gdal

ds = gdal.Warp(out_path+?tmp.tif?, [?I:\\indata\\VPDsc\\VPD_scalar.tif?], options=?-s_srs EPSG:4326 -t_srs EPSG:32628 -overwrite -tr 20 20 -wm 9000 -multi -r near -te 453123 1702425 454123 1703425 -te_srs EPSG:32628?)

 

See the documentation sent earlier.  Also, this example might help you:

 

https://gis.stackexchange.com/a/380429/53019

 

Regards,

 

Chris

 

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jonas Ard? via gdal-dev
Sent: Wednesday, November 02, 2022 8:30 AM
To: Even Rouault; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Command line /python syntax differences

 

Thanks Even,

Still some discrepancy.

Python (don't work but no error and no output ):
    src_ds = gdal.Open("I:\indata\VPDsc\VPD_scalar.tif")
    #1 GDALWARP to warp all bands in one go
    options = gdal.WarpOptions(options=srcSRS="EPSG:4326", dstSRS="EPSG:32628", xRes=20.0, yRes=20.0, resampleAlg="bilinear", format='GTiff', outputBounds=[453123, 1702425, 454123, 1703425])
    newfile = gdal.Warp(out_path+"tmp.tif", src_ds, options=options)

Command line work ok:
    gdalwarp -s_srs EPSG:4326 -t_srs EPSG:32628 -overwrite -tr 20 20 -wm 9000 -multi -r near -te 453123 1702425 454123 1703425 -te_srs EPSG:32628 /cygdrive/i/indata/VPDsc/VPD_scalar.tif /cygdrive/i/data/SNDHR/VPDsc/VPD_scalar_test.tif 

Assuming using -te_srs and -t_srs are redundant?
("outputBoundsSRS ? SRS in which output bounds are expressed, in the case they are not expressed in dstSRS")

Regards
/Jonas
On 02/11/2022 12:03, Even Rouault wrote:

Jonas,

The doc is at:

https://gdal.org/api/python/osgeo.gdal.html#osgeo.gdal.TranslateOptions

Even

Le 02/11/2022 ? 11:53, Jonas Ard? via gdal-dev a ?crit :

Dear gdal-gurus,

I am new to using gdal via Python.

As the command line arguments/keywords differ from command prompt mode and Python-mode (for example for example is -r in gdal_translate  the same  as resampleAlg in gdal.Translate in Python). 
I find it tricky to find arguments/keywords in Python.

How can all options/full syntax for gdal-pythons commands be listed as done here <https://gis.stackexchange.com/questions/352643/gdal-translate-in-python-where-do-i-find-how-to-convert-the-command-line-argum>  ?
Where they also refer to https://gdal.org/python/ <https://gdal.org/python/>  which do not exist.
Any other (full/completed) online resource for this?
Can "pydoc -g osgeo" be used?
Are the The gdal-dev Archives searchable?


Regards 

/Jonas, Lund University, Sweden





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.





-- 
Jonas Ard?
Physical Geography and Ecosystem Science
Lund University
S?lvegatan 12 22362 Lund Sweden
+46462224031
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221102/ffa999bb/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Nov  3 10:51:28 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Nov 2022 18:51:28 +0100
Subject: [gdal-dev] GDAL 3.6.0 release candidate available
Message-ID: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.6.0 release candidate.

NEWS at:

 ? https://github.com/OSGeo/gdal/blob/v3.6.0RC1/NEWS.md

Note the first item about the new CMake build system build the only one 
now available.

Testing is much appreciated as usual, particularly for not super popular 
raster drivers,
since the removal of _GetProjectionRef() compatibility layer may have cause
regressions in CRS reading/writing, not caught up by tests (when they 
exist at all).

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.6.0/gdal360rc1.zip

A snapshot of the gdalautotest suite is also available :

https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc1.zip

A snapshot of the documentation is at:

 ? https://download.osgeo.org/gdal/3.6.0/gdal360doc.zip

I'll call for a vote promoting it to next week if no serious problems 
are reported before.

The "release/3.6" branch has been created for all bug fixes related to 
3.6.x. master is now targetting 3.7.0dev.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Thu Nov  3 11:18:58 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 3 Nov 2022 19:18:58 +0100
Subject: [gdal-dev] GDAL 3.6.0 release candidate available
In-Reply-To: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>
References: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>
Message-ID: <bd6a5757-68b7-98b3-1060-311261b56df4@xs4all.nl>

On 11/3/22 18:51, Even Rouault wrote:
> Note the first item about the new CMake build system build the only one 
> now available.

BUILDING.md only mentions that autoconf is deprecated.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From bheberlein at wisc.edu  Fri Nov  4 06:22:30 2022
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Fri, 4 Nov 2022 13:22:30 +0000
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation
 Arrays
Message-ID: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>

Hello,

I would like to be able to warp an image dataset using a geolocation array, while specifying the grid to which the output dataset is sampled. Specifically, I want to be able to warp the dataset to a grid which is not oriented North-up.

Can GDAL support this currently? Or, what is the likelihood this could be supported in the future?

I primarily rely on the Python bindings, so a solution within that framework would be ideal for me.

Thanks!
     ? Brendan


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221104/299c9163/attachment.htm>

From ni_hao88 at hotmail.com  Fri Nov  4 07:28:31 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Fri, 4 Nov 2022 14:28:31 +0000
Subject: [gdal-dev] NetCDF-4
Message-ID: <DM5PR02MB3862D22AD38278D7BC054787F13B9@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

Is Sentinel-3's NetCDF-4 format supported in GDAL?
It consists of many *.nc files and 'xfdumanifest.xml'
If so, since which version?

Thank you!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221104/b96bd7f5/attachment.htm>

From j1 at jimenezshaw.com  Fri Nov  4 08:52:29 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 4 Nov 2022 16:52:29 +0100
Subject: [gdal-dev] GDAL 3.6.0 release candidate available
In-Reply-To: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>
References: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>
Message-ID: <CADRrdKsitnJ5v0KkhO8y5-VKiwsq4pppW20pWUAR_a=eNNLKTw@mail.gmail.com>

Thanks Even

I tested it in Ubuntu 20.04, 22.04, Windows and Macos without any problem
(including Macos ARM M1).
However I do not use any exotic raster driver, so probably not very helpful.

Cheers.
Javier

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Thu, 3 Nov 2022 at 18:51, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I have prepared a GDAL/OGR 3.6.0 release candidate.
>
> NEWS at:
>
>    https://github.com/OSGeo/gdal/blob/v3.6.0RC1/NEWS.md
>
> Note the first item about the new CMake build system build the only one
> now available.
>
> Testing is much appreciated as usual, particularly for not super popular
> raster drivers,
> since the removal of _GetProjectionRef() compatibility layer may have cause
> regressions in CRS reading/writing, not caught up by tests (when they
> exist at all).
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc1.tar.xz
>    https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc1.tar.gz
>    https://download.osgeo.org/gdal/3.6.0/gdal360rc1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
> https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc1.tar.gz
>    https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc1.zip
>
> A snapshot of the documentation is at:
>
>    https://download.osgeo.org/gdal/3.6.0/gdal360doc.zip
>
> I'll call for a vote promoting it to next week if no serious problems
> are reported before.
>
> The "release/3.6" branch has been created for all bug fixes related to
> 3.6.x. master is now targetting 3.7.0dev.
>
> Best regards,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221104/c3295803/attachment-0001.htm>

From mdsumner at gmail.com  Fri Nov  4 16:41:35 2022
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 5 Nov 2022 10:41:35 +1100
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
Message-ID: <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>

that's exactly what the warper does with geolocation arrays, set the target
extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.

python will have those analogous controls for the warper.

Cheers, Mike



On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hello,
>
> I would like to be able to warp an image dataset using a geolocation
> array, while specifying the grid to which the output dataset is sampled.
> Specifically, I want to be able to warp the dataset to a grid which is not
> oriented North-up.
>
> Can GDAL support this currently? Or, what is the likelihood this could be
> supported in the future?
>
> I primarily rely on the Python bindings, so a solution within that
> framework would be ideal for me.
>
> Thanks!
>      ? Brendan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221105/cf5abb16/attachment.htm>

From bheberlein at wisc.edu  Fri Nov  4 16:50:42 2022
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Fri, 4 Nov 2022 23:50:42 +0000
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
Message-ID: <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>

Hi Mike,

thanks for the response.

Can you clarify how I would go about specifying the grid orientation for the output raster? None of -te, -ts or -t_srs address this.


________________________________
From: Michael Sumner <mdsumner at gmail.com>
Sent: Friday, November 4, 2022 6:41 PM
To: Brendan Heberlein <bheberlein at wisc.edu>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation Arrays

that's exactly what the warper does with geolocation arrays, set the target extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.

python will have those analogous controls for the warper.

Cheers, Mike



On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hello,

I would like to be able to warp an image dataset using a geolocation array, while specifying the grid to which the output dataset is sampled. Specifically, I want to be able to warp the dataset to a grid which is not oriented North-up.

Can GDAL support this currently? Or, what is the likelihood this could be supported in the future?

I primarily rely on the Python bindings, so a solution within that framework would be ideal for me.

Thanks!
     ? Brendan


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221104/8136cf84/attachment.htm>

From mdsumner at gmail.com  Fri Nov  4 16:57:51 2022
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 5 Nov 2022 10:57:51 +1100
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
Message-ID: <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>

well, the map projection does this - there are many possibilities. Or, do
you have another geolocation array you want as the target?

If you have an example I'm happy to try a few things, but I'd assumed you
had a target map projection in mind. What kind of crs to choose depends on
your goal, or is purely to not have north up?

Perhaps there's something terminology wise I'm missing ...

Mike

On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu> wrote:

> Hi Mike,
>
> thanks for the response.
>
> Can you clarify how I would go about specifying the grid orientation for
> the output raster? None of -te, -ts or -t_srs address this.
>
>
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Friday, November 4, 2022 6:41 PM
> *To:* Brendan Heberlein <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
> Geolocation Arrays
>
> that's exactly what the warper does with geolocation arrays, set the
> target extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.
>
> python will have those analogous controls for the warper.
>
> Cheers, Mike
>
>
>
> On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <
> gdal-dev at lists.osgeo.org> wrote:
>
> Hello,
>
> I would like to be able to warp an image dataset using a geolocation
> array, while specifying the grid to which the output dataset is sampled.
> Specifically, I want to be able to warp the dataset to a grid which is not
> oriented North-up.
>
> Can GDAL support this currently? Or, what is the likelihood this could be
> supported in the future?
>
> I primarily rely on the Python bindings, so a solution within that
> framework would be ideal for me.
>
> Thanks!
>      ? Brendan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221105/8d1dfa3a/attachment-0001.htm>

From bheberlein at wisc.edu  Fri Nov  4 20:21:12 2022
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Sat, 5 Nov 2022 03:21:12 +0000
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
Message-ID: <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>

Hi Mike,

regardless of the map projection, it may be desirable to have the grid oriented in one direction or another, e.g. due to the spatial distribution of data points. Although the CRS/SRS designates the coordinate axes, these are not always aligned with the desired grid orientation.

So, basically I want to be able to specify an arbitrary geotransform array for the output grid. This would allow the grid to be assigned an arbitrary orientation within the CRS frame.

Thanks,
Brendan
________________________________
From: Michael Sumner <mdsumner at gmail.com>
Sent: Friday, November 4, 2022 6:57 PM
To: Brendan Heberlein <bheberlein at wisc.edu>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation Arrays

well, the map projection does this - there are many possibilities. Or, do you have another geolocation array you want as the target?

If you have an example I'm happy to try a few things, but I'd assumed you had a target map projection in mind. What kind of crs to choose depends on your goal, or is purely to not have north up?

Perhaps there's something terminology wise I'm missing ...

Mike

On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu<mailto:bheberlein at wisc.edu>> wrote:
Hi Mike,

thanks for the response.

Can you clarify how I would go about specifying the grid orientation for the output raster? None of -te, -ts or -t_srs address this.


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Friday, November 4, 2022 6:41 PM
To: Brendan Heberlein <bheberlein at wisc.edu<mailto:bheberlein at wisc.edu>>
Cc: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation Arrays

that's exactly what the warper does with geolocation arrays, set the target extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.

python will have those analogous controls for the warper.

Cheers, Mike



On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hello,

I would like to be able to warp an image dataset using a geolocation array, while specifying the grid to which the output dataset is sampled. Specifically, I want to be able to warp the dataset to a grid which is not oriented North-up.

Can GDAL support this currently? Or, what is the likelihood this could be supported in the future?

I primarily rely on the Python bindings, so a solution within that framework would be ideal for me.

Thanks!
     ? Brendan


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221105/f00bc2bf/attachment.htm>

From mdsumner at gmail.com  Fri Nov  4 20:33:39 2022
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 5 Nov 2022 14:33:39 +1100
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
 <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>
Message-ID: <CAAcGz98Qbvqep=Qt_mLtva+CwPJmoiRVOBE-NfMsQ+DAtc-5KA@mail.gmail.com>

yes I see, well you can probably set a target GeoTIFF with the geotransform
that you want - and gdalwarp to that as the target.  I don't believe you
can do that with gdalwarp directly, and I have no idea with python - and
finally I'm sorry to add irrelevant discussion - but this is interesting
and I'm going to try it out in R and C++ and would love to see a python
example too.

Cheers, Mike





On Sat, Nov 5, 2022 at 2:21 PM Brendan Heberlein <bheberlein at wisc.edu>
wrote:

> Hi Mike,
>
> regardless of the map projection, it may be desirable to have the grid
> oriented in one direction or another, e.g. due to the spatial distribution
> of data points. Although the CRS/SRS designates the coordinate axes, these
> are not always aligned with the desired grid orientation.
>
> So, basically I want to be able to specify an arbitrary geotransform array
> for the output grid. This would allow the grid to be assigned an arbitrary
> orientation within the CRS frame.
>
> Thanks,
> Brendan
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Friday, November 4, 2022 6:57 PM
> *To:* Brendan Heberlein <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
> Geolocation Arrays
>
> well, the map projection does this - there are many possibilities. Or, do
> you have another geolocation array you want as the target?
>
> If you have an example I'm happy to try a few things, but I'd assumed you
> had a target map projection in mind. What kind of crs to choose depends on
> your goal, or is purely to not have north up?
>
> Perhaps there's something terminology wise I'm missing ...
>
> Mike
>
> On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu> wrote:
>
> Hi Mike,
>
> thanks for the response.
>
> Can you clarify how I would go about specifying the grid orientation for
> the output raster? None of -te, -ts or -t_srs address this.
>
>
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Friday, November 4, 2022 6:41 PM
> *To:* Brendan Heberlein <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
> Geolocation Arrays
>
> that's exactly what the warper does with geolocation arrays, set the
> target extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.
>
> python will have those analogous controls for the warper.
>
> Cheers, Mike
>
>
>
> On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <
> gdal-dev at lists.osgeo.org> wrote:
>
> Hello,
>
> I would like to be able to warp an image dataset using a geolocation
> array, while specifying the grid to which the output dataset is sampled.
> Specifically, I want to be able to warp the dataset to a grid which is not
> oriented North-up.
>
> Can GDAL support this currently? Or, what is the likelihood this could be
> supported in the future?
>
> I primarily rely on the Python bindings, so a solution within that
> framework would be ideal for me.
>
> Thanks!
>      ? Brendan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221105/5b4d5a09/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Nov  5 02:36:38 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Nov 2022 10:36:38 +0100
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <CAAcGz98Qbvqep=Qt_mLtva+CwPJmoiRVOBE-NfMsQ+DAtc-5KA@mail.gmail.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
 <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz98Qbvqep=Qt_mLtva+CwPJmoiRVOBE-NfMsQ+DAtc-5KA@mail.gmail.com>
Message-ID: <8858d546-cf8b-2739-de14-081fc6531cb5@spatialys.com>


Le 05/11/2022 ? 04:33, Michael Sumner a ?crit?:
> yes I see, well you can probably set a target GeoTIFF with the 
> geotransform that you want - and gdalwarp to that as the target.

something like

out_ds = gdal.GetDriverByName("GTiff").Create("output.tif", width, 
height, number_of_bands, data_type, options = ["TILED=YES"])

out_ds.SetGeoTransform([ some geotransform with rotational terms ])

srs = osr.SpatialReference()

srs.ImportFromEPSG( xxx ) / srs.ImportFromWkt( xxx )

out_ds.SetSpatialRef( srs )

gdal.Warp(out_ds, src_ds, .... )



> I don't believe you can do that with gdalwarp directly, and I have no 
> idea with python - and finally I'm sorry to add irrelevant discussion 
> - but this is interesting and I'm going to try it out in?R and C++ and 
> would love to see a python example too.
>
> Cheers, Mike
>
>
>
>
>
> On Sat, Nov 5, 2022 at 2:21 PM Brendan Heberlein <bheberlein at wisc.edu> 
> wrote:
>
>     Hi Mike,
>
>     regardless of the map projection, it may be desirable to have the
>     grid oriented in one direction or another, e.g. due to the spatial
>     distribution of data points. Although the CRS/SRS designates the
>     coordinate axes, these are not always aligned with the desired
>     grid orientation.
>
>     So, basically I want to be able to specify an arbitrary
>     geotransform array for the output grid. This would allow the grid
>     to be assigned an arbitrary orientation within the CRS frame.
>
>     Thanks,
>     Brendan
>     ------------------------------------------------------------------------
>     *From:* Michael Sumner <mdsumner at gmail.com>
>     *Sent:* Friday, November 4, 2022 6:57 PM
>     *To:* Brendan Heberlein <bheberlein at wisc.edu>
>     *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
>     *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp()
>     with Geolocation Arrays
>     well, the map projection does this - there are many possibilities.
>     Or, do you have another geolocation array you want as the target?
>
>     If you have an example I'm happy to try a few things, but I'd
>     assumed you had a target map projection in mind. What kind of crs
>     to choose depends on your goal, or is purely to not have north up?
>
>     Perhaps there's something terminology wise I'm missing ...
>
>     Mike
>
>     On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu>
>     wrote:
>
>         Hi Mike,
>
>         thanks for the response.
>
>         Can you clarify how I would go about specifying the grid
>         orientation for the output raster? None of -te, -ts or -t_srs
>         address this.
>
>
>         ------------------------------------------------------------------------
>         *From:* Michael Sumner <mdsumner at gmail.com>
>         *Sent:* Friday, November 4, 2022 6:41 PM
>         *To:* Brendan Heberlein <bheberlein at wisc.edu>
>         *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
>         *Subject:* Re: [gdal-dev] Specify Grid Rotation for
>         gdal.Warp() with Geolocation Arrays
>         that's exactly what the warper does with geolocation arrays,
>         set the target extent, dimension, and crs with -te, -ts,
>         -t_srs with gdalwarp.
>
>         python will have those analogous controls for the warper.
>
>         Cheers, Mike
>
>
>
>         On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev,
>         <gdal-dev at lists.osgeo.org> wrote:
>
>             Hello,
>
>             I would like to be able to warp an image dataset using a
>             geolocation array, while specifying the grid to which the
>             output dataset is sampled. Specifically, I want to be able
>             to warp the dataset to a grid which is not oriented North-up.
>
>             Can GDAL support this currently? Or, what is the
>             likelihood this could be supported in the future?
>
>             I primarily rely on the Python bindings, so a solution
>             within that framework would be ideal for me.
>
>             Thanks!
>             ? ?? Brendan
>
>
>             _______________________________________________
>             gdal-dev mailing list
>             gdal-dev at lists.osgeo.org
>             https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221105/8d408263/attachment.htm>

From even.rouault at spatialys.com  Sun Nov  6 12:38:03 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 6 Nov 2022 21:38:03 +0100
Subject: [gdal-dev] GDAL 3.6.0 rc2 available (was Re: GDAL 3.6.0 release
 candidate available)
In-Reply-To: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>
References: <d7ac164a-c9e9-f369-0c63-a6e5c9ec3a20@spatialys.com>
Message-ID: <b3e67da1-ef9f-3ab0-2dc2-3d920a925ba1@spatialys.com>

Hi,

I've prepared a 2nd release candidate with a few fixes. The diffs are:
- BUILDING.md: update status of build systems
- NITF: fix heap-buffer-overflow on corrupted images (introduced in 
3.6.0). Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=53006
- GRIB2: fix crash and invalid metadata when processing index .idx file 
with sub-messages (fixes #6613)
- OGRMergeGeometryTypesEx(): do not consider different type of 
MultiGeometries (ie MultiPoint, MultiLineString, MultiPolygon) as being 
mergeable as GeometryCollections. Affect GML driver (fixes #6616)
- swig/include/gdal.i: fix GDT_TypeCount value (affects C# and Java 
bindings)
- HDF5 multidim: fix crash on 'gdalmdiminfo 
HDF5:autotest/gdrivers/data/netcdf/alldatatypes.nc'
- CMake: fix Win32 csharp build (#6620)
- Fix VS2017 broken builds (#6624)
- GPKG: add compatibility with GPKG 1.0 gpkg_data_column_constraints table
- Add missing #include <algorithm> for std::min/std::max uses, and 
#include <limits> for std::numeric_limits<>
- 2 minor cppcheck fixes

The new archives are at:

 ? https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.6.0/gdal360rc2.zip
https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc2.zip

Even

Le 03/11/2022 ? 18:51, Even Rouault a ?crit?:
> Hi,
>
> I have prepared a GDAL/OGR 3.6.0 release candidate.
>
> NEWS at:
>
> ? https://github.com/OSGeo/gdal/blob/v3.6.0RC1/NEWS.md
>
> Note the first item about the new CMake build system build the only 
> one now available.
>
> Testing is much appreciated as usual, particularly for not super 
> popular raster drivers,
> since the removal of _GetProjectionRef() compatibility layer may have 
> cause
> regressions in CRS reading/writing, not caught up by tests (when they 
> exist at all).
>
> Pick up an archive among the following ones (by ascending size):
>
> ? https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc1.tar.xz
> ? https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.6.0/gdal360rc1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
> https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0rc1.zip
>
> A snapshot of the documentation is at:
>
> ? https://download.osgeo.org/gdal/3.6.0/gdal360doc.zip
>
> I'll call for a vote promoting it to next week if no serious problems 
> are reported before.
>
> The "release/3.6" branch has been created for all bug fixes related to 
> 3.6.x. master is now targetting 3.7.0dev.
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Nov  8 02:42:48 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Nov 2022 11:42:48 +0100
Subject: [gdal-dev] Call for discussion on RFC 87: Signed int8 data type for
 raster
Message-ID: <1f57bfe7-3e9c-0e95-5e10-ac84c5149b4a@spatialys.com>

Hi,

I've posted in https://github.com/OSGeo/gdal/pull/6634 a new RFC to add 
a new GDT_Int8 data type, for signed 8-bit integer data, to the 
GDALDataType enumeration, which cleans up the current support we already 
have for that data type.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From schwehr at gmail.com  Tue Nov  8 04:45:22 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 8 Nov 2022 04:45:22 -0800
Subject: [gdal-dev] Call for discussion on RFC 87: Signed int8 data type
 for raster
In-Reply-To: <1f57bfe7-3e9c-0e95-5e10-ac84c5149b4a@spatialys.com>
References: <1f57bfe7-3e9c-0e95-5e10-ac84c5149b4a@spatialys.com>
Message-ID: <CACmBxyuWo1U4G+4iJMCuUAC7ANiepypYPeoskT=SV-otZ9FfiQ@mail.gmail.com>

Yes please!  The friction from not having GDT_Int8 keeps coming up again
and again.  It is extra rough on beginners who hit this case.

But I would like to hear any voices for not doing this incase there is
something I haven't thought of.

On Tue, Nov 8, 2022 at 2:43 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I've posted in https://github.com/OSGeo/gdal/pull/6634 a new RFC to add
> a new GDT_Int8 data type, for signed 8-bit integer data, to the
> GDALDataType enumeration, which cleans up the current support we already
> have for that data type.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221108/9f0e7937/attachment.htm>

From even.rouault at spatialys.com  Tue Nov  8 12:27:43 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Nov 2022 21:27:43 +0100
Subject: [gdal-dev] NetCDF-4
In-Reply-To: <DM5PR02MB3862D22AD38278D7BC054787F13B9@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB3862D22AD38278D7BC054787F13B9@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <c116f4a6-834e-afac-bc84-a90af3204771@spatialys.com>


Le 04/11/2022 ? 15:28, ni hao a ?crit?:
> Hi list,
>
> Is Sentinel-3's NetCDF-4 format supported in GDAL?
It can be read with the generic netCDF driver
> It consists of many *.nc files and 'xfdumanifest.xml'
The manifest file is not read
> If so, since which version?
Forever
>
> Thank?you!
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221108/f93a3963/attachment.htm>

From sean.gillies at gmail.com  Tue Nov  8 15:58:02 2022
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 8 Nov 2022 16:58:02 -0700
Subject: [gdal-dev] [OSGeo/gdal] Add GDT_Int8 support (RFC 87) (PR #6633)
In-Reply-To: <OSGeo/gdal/pull/6633/c1307736762@github.com>
References: <OSGeo/gdal/pull/6633@github.com>
 <OSGeo/gdal/pull/6633/c1307736762@github.com>
Message-ID: <CAOodmJpyon6tGBg4rs8w9Rzmy4LmgQQw4Fa8eaW-k4yjPhBS1A@mail.gmail.com>

Sorry, please disregard my previous email (from my phone at lunch). I had a
poor recollection of the GDALDataType enum.

Changing GDT_Byte to unsigned char is too big of a change, I guess? I can
work with that.

Is there any advantage to a GDT_UInt8 type that can't be changed by a
PIXELTYPE option?

On Tue, Nov 8, 2022 at 12:39 PM Even Rouault <notifications at github.com>
wrote:

> Ubyte (same as uint8) vs byte?
>
> what do you suggest exactly: keep GDT_Byte in the enumeration and add #define
> GDT_UByte GDT_Byte to create the alias ?
>
> ?
> Reply to this email directly, view it on GitHub
> <https://github.com/OSGeo/gdal/pull/6633#issuecomment-1307736762>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AAAIHIKG7X65SX4OULJMUFTWHKT5TANCNFSM6AAAAAAR2E6MJY>
> .
> You are receiving this because you commented.Message ID:
> <OSGeo/gdal/pull/6633/c1307736762 at github.com>
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221108/2ecba5b9/attachment.htm>

From even.rouault at spatialys.com  Tue Nov  8 16:04:39 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Nov 2022 01:04:39 +0100
Subject: [gdal-dev] [OSGeo/gdal] Add GDT_Int8 support (RFC 87) (PR #6633)
In-Reply-To: <CAOodmJpyon6tGBg4rs8w9Rzmy4LmgQQw4Fa8eaW-k4yjPhBS1A@mail.gmail.com>
References: <OSGeo/gdal/pull/6633@github.com>
 <OSGeo/gdal/pull/6633/c1307736762@github.com>
 <CAOodmJpyon6tGBg4rs8w9Rzmy4LmgQQw4Fa8eaW-k4yjPhBS1A@mail.gmail.com>
Message-ID: <3b6dc35d-1fe6-a562-9118-5fe506b9f1b0@spatialys.com>

Sean,
>
> Changing GDT_Byte to unsigned char is too big of a change, I guess? I 
> can work with that.
GDT_Byte semantic is already unsigned char / uint8. What did you mean?
>
> Is there any advantage to a GDT_UInt8 type that can't be changed by a 
> PIXELTYPE option?

That would be super confusing if we had both GDT_Byte and GDT_UInt8 and 
they are not just simple aliases.

The PIXELTYPE option should die. The RFC proposes to make it die on the 
reading side (as a metadata item).

We could also make it die on the writing side as a creation option, but 
I didn't dare to do it right now and just propose this is considered a 
legacy deprecated way. Would certainly be something worth doing for a 
GDAL 4.0 if such thing ever happened.

>
> On Tue, Nov 8, 2022 at 12:39 PM Even Rouault 
> <notifications at github.com> wrote:
>
>         Ubyte (same as uint8) vs byte?
>
>     what do you suggest exactly: keep GDT_Byte in the enumeration and
>     add |#define GDT_UByte GDT_Byte| to create the alias ?
>
>     ?
>     Reply to this email directly, view it on GitHub
>     <https://github.com/OSGeo/gdal/pull/6633#issuecomment-1307736762>,
>     or unsubscribe
>     <https://github.com/notifications/unsubscribe-auth/AAAIHIKG7X65SX4OULJMUFTWHKT5TANCNFSM6AAAAAAR2E6MJY>.
>     You are receiving this because you commented.Message ID:
>     <OSGeo/gdal/pull/6633/c1307736762 at github.com>
>
>
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/599d3b8f/attachment.htm>

From sean.gillies at gmail.com  Tue Nov  8 16:08:36 2022
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 8 Nov 2022 17:08:36 -0700
Subject: [gdal-dev] [OSGeo/gdal] Add GDT_Int8 support (RFC 87) (PR #6633)
In-Reply-To: <3b6dc35d-1fe6-a562-9118-5fe506b9f1b0@spatialys.com>
References: <OSGeo/gdal/pull/6633@github.com>
 <OSGeo/gdal/pull/6633/c1307736762@github.com>
 <CAOodmJpyon6tGBg4rs8w9Rzmy4LmgQQw4Fa8eaW-k4yjPhBS1A@mail.gmail.com>
 <3b6dc35d-1fe6-a562-9118-5fe506b9f1b0@spatialys.com>
Message-ID: <CAOodmJpqSV3wT1wqXG6RDDy7DfE4Uo=n7i7MCFmm+amXRA2HNg@mail.gmail.com>

Even,

Argh, I typed "unsigned char" when I meant "signed". Changing GDT_Byte to
*signed char* is too big of a change, I guess?

I like the plan for PIXELTYPE.

Sorry about the noise, everybody!

On Tue, Nov 8, 2022 at 5:04 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sean,
>
>
> Changing GDT_Byte to unsigned char is too big of a change, I guess? I can
> work with that.
>
> GDT_Byte semantic is already unsigned char / uint8. What did you mean?
>
>
> Is there any advantage to a GDT_UInt8 type that can't be changed by a
> PIXELTYPE option?
>
> That would be super confusing if we had both GDT_Byte and GDT_UInt8 and
> they are not just simple aliases.
>
> The PIXELTYPE option should die. The RFC proposes to make it die on the
> reading side (as a metadata item).
>
> We could also make it die on the writing side as a creation option, but I
> didn't dare to do it right now and just propose this is considered a legacy
> deprecated way. Would certainly be something worth doing for a GDAL 4.0 if
> such thing ever happened.
>
>
> On Tue, Nov 8, 2022 at 12:39 PM Even Rouault <notifications at github.com>
> wrote:
>
>> Ubyte (same as uint8) vs byte?
>>
>> what do you suggest exactly: keep GDT_Byte in the enumeration and add #define
>> GDT_UByte GDT_Byte to create the alias ?
>>
>> ?
>> Reply to this email directly, view it on GitHub
>> <https://github.com/OSGeo/gdal/pull/6633#issuecomment-1307736762>, or
>> unsubscribe
>> <https://github.com/notifications/unsubscribe-auth/AAAIHIKG7X65SX4OULJMUFTWHKT5TANCNFSM6AAAAAAR2E6MJY>
>> .
>> You are receiving this because you commented.Message ID:
>> <OSGeo/gdal/pull/6633/c1307736762 at github.com>
>>
>
>
> --
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221108/2615aa73/attachment.htm>

From even.rouault at spatialys.com  Tue Nov  8 16:32:14 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Nov 2022 01:32:14 +0100
Subject: [gdal-dev] [OSGeo/gdal] Add GDT_Int8 support (RFC 87) (PR #6633)
In-Reply-To: <CAOodmJpqSV3wT1wqXG6RDDy7DfE4Uo=n7i7MCFmm+amXRA2HNg@mail.gmail.com>
References: <OSGeo/gdal/pull/6633@github.com>
 <OSGeo/gdal/pull/6633/c1307736762@github.com>
 <CAOodmJpyon6tGBg4rs8w9Rzmy4LmgQQw4Fa8eaW-k4yjPhBS1A@mail.gmail.com>
 <3b6dc35d-1fe6-a562-9118-5fe506b9f1b0@spatialys.com>
 <CAOodmJpqSV3wT1wqXG6RDDy7DfE4Uo=n7i7MCFmm+amXRA2HNg@mail.gmail.com>
Message-ID: <f9171dc2-7433-4a86-9fd5-a61abf1be31a@spatialys.com>

Sean,

Le 09/11/2022 ? 01:08, Sean Gillies a ?crit?:
>
> Argh, I typed "unsigned char" when I meant "signed". Changing GDT_Byte 
> to *signed char* is too big of a change, I guess?

I don't believe that would be something reasonable to consider. The 
impact of such a change would be huge on the GDAL code base and also 
super disturbing for all GDAL users (users would have headaches to make 
their code base to work with GDAL versions before and after such a 
change). That could only go in a major release (GDAL 4.0), but it 
doesn't seem to me that's such a change is really desirable. There's 
just no universal convention on the signedness of something called 
"byte": in Java and numpy, byte is signed; in CSharp and Go, it is 
unsigned...

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Nov  9 01:31:03 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Nov 2022 10:31:03 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.0RC2 as final 3.6.0 release
Message-ID: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>

Hi,

Motion:

Adopt GDAL 3.6.0RC2 as final 3.6.0 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Thorsten.Leber at hensoldt.net  Wed Nov  9 03:02:16 2022
From: Thorsten.Leber at hensoldt.net (Leber, Thorsten)
Date: Wed, 9 Nov 2022 11:02:16 +0000
Subject: [gdal-dev] org2org
Message-ID: <412305ff559641248820b5be82e0ef84@hensoldt.net>

Hi All,
I am trying to use org2org with the following command:

ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp PG:"host=10.49.20.42 port=5432 user=tilemill password=test dbname=nextgen" -sql "SELECT "name", "left", top, "right", bottom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT ST_Touches(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8

I expect in the output folder 5 files

[cid:image001.png at 01D8F432.E187B8A0]

But I receive a warning:

Warning 1: layer names ignored in combination with -sql.

And get only 3 files

[cid:image002.png at 01D8F433.27BC9750]

I am missing the .shp and the .shx file. Is there something wrong in my command?

KR

Thorsten


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/e6dcfab6/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3261 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/e6dcfab6/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2071 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/e6dcfab6/attachment-0001.png>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov  9 03:21:29 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 9 Nov 2022 11:21:29 +0000
Subject: [gdal-dev] org2org
In-Reply-To: <412305ff559641248820b5be82e0ef84@hensoldt.net>
References: <412305ff559641248820b5be82e0ef84@hensoldt.net>
Message-ID: <AM0PR09MB3219DFCA1A510D0EAB32BAD5FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Does the SQL part work with a tool like pgAdmin? Notice that the inner double quotes must be escaped as \" in the ogr2ogr command or otherwise they will truncate the -sql parameter. And it seems that you did not select the geometry field. Generally I would suggest to start with a simple SQL and add complexity once you have gotten a good result. Suggestion includes testing with easy table names first before forwarding to names like countries.geometries_boundary_buffer_10km('and').

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Leber, Thorsten
L?hetetty: keskiviikko 9. marraskuuta 2022 13.02
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] org2org

Hi All,
I am trying to use org2org with the following command:

ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp PG:"host=10.49.20.42 port=5432 user=tilemill password=test dbname=nextgen" -sql "SELECT "name", "left", top, "right", bottom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT ST_Touches(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8

I expect in the output folder 5 files

[cid:image001.png at 01D8F43D.E8366150]

But I receive a warning:

Warning 1: layer names ignored in combination with -sql.

And get only 3 files

[cid:image002.png at 01D8F43D.E8366150]

I am missing the .shp and the .shx file. Is there something wrong in my command?

KR

Thorsten


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/454671e8/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3261 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/454671e8/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2071 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/454671e8/attachment-0003.png>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov  9 05:53:20 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 9 Nov 2022 13:53:20 +0000
Subject: [gdal-dev] org2org
In-Reply-To: <d548c09021584e12baf04f2360a154c1@hensoldt.net>
References: <412305ff559641248820b5be82e0ef84@hensoldt.net>
 <AM0PR09MB3219DFCA1A510D0EAB32BAD5FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <155e5c5b48d248318a300a45a50601b3@hensoldt.net>
 <AM0PR09MB321974216CCB778ED4E1D9E2FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <d548c09021584e12baf04f2360a154c1@hensoldt.net>
Message-ID: <AM0PR09MB3219EAD83D5330CD8BD2E03FFD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

You are selecting data from table grids.grid_1_25grad. I suppose that table contains grid polygons. By your image you seem to want some buffered geometry. Spend some time for thinking about what data do you want and where to get it. You can test your queries with for example pgAdmin that can preview the geometries. Or use OpenJUMP that is an excellent tool for visualizing PostGIS query results.

-Jukka Rahkonen-

L?hett?j?: Leber, Thorsten <Thorsten.Leber at hensoldt.net>
L?hetetty: keskiviikko 9. marraskuuta 2022 15.46
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: AW: org2org

Hi Jukka,

with geometry al 5 files are created

ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp PG:"host=10.49.20.42 port=5432 user=tilemill password=test dbname=nextgen" -sql "SELECT \""name\"", \""left\"", top, \""right\"", bottom, geom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT ST_Touches(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and')))" -s_srs "EPSG:4326" -t_srs "EPSG:4326" -overwrite -lco ENCODING=utf8

but it looks strange

[cid:image001.png at 01D8F453.5C84F570]

I would expect this

[cid:image002.png at 01D8F453.5C84F570]

Thorsten

Von: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Gesendet: Mittwoch, 9. November 2022 13:10
An: Leber, Thorsten <Thorsten.Leber at hensoldt.net<mailto:Thorsten.Leber at hensoldt.net>>
Betreff: Re: org2org


This message was sent from outside of HENSOLDT. Please do not click on links or open attachments unless you validate the source of this email and know the content is safe.

Hi,

Try to add a geometry into the selection -sql "SELECT \""name\"", \""left\"", top, \""right\"", bottom FROM..

-Jukka-


L?hett?j?: Leber, Thorsten <Thorsten.Leber at hensoldt.net<mailto:Thorsten.Leber at hensoldt.net>>
L?hetetty: keskiviikko 9. marraskuuta 2022 13.53
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Aihe: AW: org2org

ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp PG:"host=10.49.20.42 port=5432 user=tilemill password=test dbname=nextgen" -sql "SELECT \""name\"", \""left\"", top, \""right\"", bottom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT ST_Touches(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8

this works now without any warning but still only 3 files in output folder

Von: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Gesendet: Mittwoch, 9. November 2022 12:21
An: Leber, Thorsten <Thorsten.Leber at hensoldt.net<mailto:Thorsten.Leber at hensoldt.net>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Betreff: Re: org2org


This message was sent from outside of HENSOLDT. Please do not click on links or open attachments unless you validate the source of this email and know the content is safe.

Hi,

Does the SQL part work with a tool like pgAdmin? Notice that the inner double quotes must be escaped as \" in the ogr2ogr command or otherwise they will truncate the -sql parameter. And it seems that you did not select the geometry field. Generally I would suggest to start with a simple SQL and add complexity once you have gotten a good result. Suggestion includes testing with easy table names first before forwarding to names like countries.geometries_boundary_buffer_10km('and').

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Leber, Thorsten
L?hetetty: keskiviikko 9. marraskuuta 2022 13.02
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] org2org

Hi All,
I am trying to use org2org with the following command:

ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp PG:"host=10.49.20.42 port=5432 user=tilemill password=test dbname=nextgen" -sql "SELECT "name", "left", top, "right", bottom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT ST_Touches(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8

I expect in the output folder 5 files

[cid:image003.png at 01D8F453.5C84F570]

But I receive a warning:

Warning 1: layer names ignored in combination with -sql.

And get only 3 files

[cid:image004.png at 01D8F453.5C84F570]

I am missing the .shp and the .shx file. Is there something wrong in my command?

KR

Thorsten


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/93783724/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 1618 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/93783724/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 12636 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/93783724/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3261 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/93783724/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 2071 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/93783724/attachment-0007.png>

From howard at hobu.co  Wed Nov  9 06:09:38 2022
From: howard at hobu.co (Howard Butler)
Date: Wed, 9 Nov 2022 08:09:38 -0600
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.0RC2 as final 3.6.0 release
In-Reply-To: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>
References: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>
Message-ID: <EE6805C5-13AB-4B44-A801-D11AE109776F@hobu.co>



> On Nov 9, 2022, at 3:31 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> Motion:
> 
> Adopt GDAL 3.6.0RC2 as final 3.6.0 release
> 
> Starting with my +1

+1



From terrafrost at gmail.com  Wed Nov  9 08:54:57 2022
From: terrafrost at gmail.com (Terra Frost)
Date: Wed, 9 Nov 2022 10:54:57 -0600
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
Message-ID: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>

I have two TIFs that I'm able to run gdal2tiles on without issue, however,
when I do gdal_merge I am unable to do gdal2tiles on the result. When I did
gdal_merge on the two TIFs I got this warning:

Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF keys
is not the same as the one from the EPSG registry, which may cause issues
during reprojection operations. Set GTIFF_SRS_SOURCE configuration option
to EPSG to use official parameters (overriding the ones from GeoTIFF keys),
or to GEOKEYS to use custom values from GeoTIFF keys and drop the EPSG code.
Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF keys
is not the same as the one from the EPSG registry, which may cause issues
during reprojection operations. Set GTIFF_SRS_SOURCE configuration option
to EPSG to use official parameters (overriding the ones from GeoTIFF keys),
or to GEOKEYS to use custom values from GeoTIFF keys and drop the EPSG code.
0...10...20...30...40...50...60...70...80...90...100 - done.


Despite the warning the two TIFs merged without issue, however, when I try
to run gdal2tiles on the merged TIF I get this error:

Traceback (most recent call last):
  File "/usr/bin/gdal2tiles.py", line 16, in <module>
    sys.exit(main(sys.argv))
  File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
3314, in main
    single_threaded_tiling(input_file, output_folder, options)
  File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
3229, in single_threaded_tiling
    conf, tile_details = worker_tile_details(input_file, output_folder,
options)
  File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
3145, in worker_tile_details
    gdal2tiles.open_input()
  File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
1797, in open_input
    self.warped_input_dataset = reproject_dataset(
  File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
987, in reproject_dataset
    to_dataset = gdal.AutoCreateWarpedVRT(from_dataset,
  File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 3976, in
AutoCreateWarpedVRT
    return _gdal.AutoCreateWarpedVRT(*args)
RuntimeError: Cannot find coordinate operations from
`ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere",EDATUM[""],CS[Cartesian,2],AXIS["easting",east,ORDER[1],LENGTHUNIT["metre",1,ID["EPSG",9001]]],AXIS["northing",north,ORDER[2],LENGTHUNIT["metre",1,ID["EPSG",9001]]]]'
to `EPSG:3857'
free(): invalid pointer
Aborted


When I do gdalinfo on the merged TIF I get this:

Corner Coordinates:
Upper Left  (-10880978.065, 3538629.874)
Lower Left  (-10880978.065, 3537702.774)
Upper Right (-10880302.765, 3538629.874)
Lower Right (-10880302.765, 3537702.774)
Center      (-10880640.415, 3538166.324)

When I do gdalinfo on the two TIFs that I merged I get this:

Upper Left  (-10880811.355, 3538629.874)
Lower Left  (-10880811.355, 3538052.574)
Upper Right (-10880302.755, 3538629.874)
Lower Right (-10880302.755, 3538052.574)
Center      (-10880557.055, 3538341.224)


...and...

Upper Left  (-10880978.065, 3538273.090)
Lower Left  (-10880978.065, 3537702.790)
Upper Right (-10880474.265, 3538273.090)
Lower Right (-10880474.265, 3537702.790)
Center      (-10880726.165, 3537987.940)


Any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/f827e616/attachment.htm>

From even.rouault at spatialys.com  Wed Nov  9 09:01:28 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Nov 2022 18:01:28 +0100
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
In-Reply-To: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>
References: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>
Message-ID: <df2fdc3c-9c20-263f-3221-f423a2f2ce4e@spatialys.com>

Terra,

you didn't specify how you got GDAL and PROJ, and which versions of 
those you use.

Make sure to solve the "proj_create_from_database: Cannot find proj.db" 
error. Check if the PROJ_LIB environment is set and if it points to the 
directory where proj.db is placed

The "free(): invalid pointer" error could also suggest that you have 
several PROJ versions that are linked at runtime by GDAL.

Even

Le 09/11/2022 ? 17:54, Terra Frost a ?crit?:
> I have two TIFs that I'm able to run gdal2tiles on without issue, 
> however, when I do gdal_merge I am unable to do gdal2tiles on the 
> result. When I did gdal_merge on the two TIFs I got this warning:
>
>     Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>     Warning 1: The definition of projected CRS EPSG:3857 got from
>     GeoTIFF keys is not the same as the one from the EPSG registry,
>     which may cause issues during reprojection operations. Set
>     GTIFF_SRS_SOURCE configuration option to EPSG to use official
>     parameters (overriding the ones from GeoTIFF keys), or to GEOKEYS
>     to use custom values from GeoTIFF keys and drop the EPSG code.
>     Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>     Warning 1: The definition of projected CRS EPSG:3857 got from
>     GeoTIFF keys is not the same as the one from the EPSG registry,
>     which may cause issues during reprojection operations. Set
>     GTIFF_SRS_SOURCE configuration option to EPSG to use official
>     parameters (overriding the ones from GeoTIFF keys), or to GEOKEYS
>     to use custom values from GeoTIFF keys and drop the EPSG code.
>     0...10...20...30...40...50...60...70...80...90...100 - done.
>
>
> Despite the warning the two TIFs merged without issue, however, when I 
> try to run gdal2tiles on the merged TIF I get this error:
>
>     Traceback (most recent call last):
>     ? File "/usr/bin/gdal2tiles.py", line 16, in <module>
>     ? ? sys.exit(main(sys.argv))
>     ? File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>     line 3314, in main
>     single_threaded_tiling(input_file, output_folder, options)
>     ? File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>     line 3229, in single_threaded_tiling
>     ? ? conf, tile_details = worker_tile_details(input_file,
>     output_folder, options)
>     ? File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>     line 3145, in worker_tile_details
>     ? ? gdal2tiles.open_input()
>     ? File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>     line 1797, in open_input
>     ? ? self.warped_input_dataset = reproject_dataset(
>     ? File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>     line 987, in reproject_dataset
>     ? ? to_dataset = gdal.AutoCreateWarpedVRT(from_dataset,
>     ? File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 3976,
>     in AutoCreateWarpedVRT
>     ? ? return _gdal.AutoCreateWarpedVRT(*args)
>     RuntimeError: Cannot find coordinate operations from
>     `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere",EDATUM[""],CS[Cartesian,2],AXIS["easting",east,ORDER[1],LENGTHUNIT["metre",1,ID["EPSG",9001]]],AXIS["northing",north,ORDER[2],LENGTHUNIT["metre",1,ID["EPSG",9001]]]]'
>     to `EPSG:3857'
>     free(): invalid pointer
>     Aborted
>
>
> When I do gdalinfo on the merged TIF I get this:
>
>     Corner Coordinates:
>     Upper Left ?(-10880978.065, 3538629.874)
>     Lower Left ?(-10880978.065, 3537702.774)
>     Upper Right (-10880302.765, 3538629.874)
>     Lower Right (-10880302.765, 3537702.774)
>     Center ? ? ?(-10880640.415, 3538166.324)
>
> When I do gdalinfo on the two TIFs that I merged I get this:
>
>     Upper Left ?(-10880811.355, 3538629.874)
>     Lower Left ?(-10880811.355, 3538052.574)
>     Upper Right (-10880302.755, 3538629.874)
>     Lower Right (-10880302.755, 3538052.574)
>     Center ? ? ?(-10880557.055, 3538341.224)
>
>
> ...and...
>
>     Upper Left ?(-10880978.065, 3538273.090)
>     Lower Left ?(-10880978.065, 3537702.790)
>     Upper Right (-10880474.265, 3538273.090)
>     Lower Right (-10880474.265, 3537702.790)
>     Center ? ? ?(-10880726.165, 3537987.940)
>
>
> Any ideas?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/3cee6ea3/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov  9 10:09:23 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 9 Nov 2022 18:09:23 +0000
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.0RC2 as final 3.6.0 release
In-Reply-To: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>
References: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>
Message-ID: <AM0PR09MB32192D50DE7A23A0208C8283FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault
L?hetetty: keskiviikko 9. marraskuuta 2022 11.31
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: Adopt GDAL 3.6.0RC2 as final 3.6.0 release

Hi,

Motion:

Adopt GDAL 3.6.0RC2 as final 3.6.0 release

Starting with my +1

Even

-- 
https://eur06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cfb085d51fa0646d3e7f708dac2352d12%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638035830892669160%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=HnhMXQNJpjIqd6sHuJcAxq79zAb%2FDBvD2M9BXUNGDwc%3D&amp;reserved=0
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cfb085d51fa0646d3e7f708dac2352d12%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638035830892669160%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=ESS2fiKTIXbmyVS%2BW93qhqA8e%2ByFY9qGw%2BNe50tdeuE%3D&amp;reserved=0

From bo.victor.thomsen at gmail.com  Wed Nov  9 12:55:25 2022
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Wed, 9 Nov 2022 21:55:25 +0100
Subject: [gdal-dev] org2org
In-Reply-To: <AM0PR09MB3219EAD83D5330CD8BD2E03FFD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <412305ff559641248820b5be82e0ef84@hensoldt.net>
 <AM0PR09MB3219DFCA1A510D0EAB32BAD5FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <155e5c5b48d248318a300a45a50601b3@hensoldt.net>
 <AM0PR09MB321974216CCB778ED4E1D9E2FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <d548c09021584e12baf04f2360a154c1@hensoldt.net>
 <AM0PR09MB3219EAD83D5330CD8BD2E03FFD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <c644eedf-518e-4947-1916-4c2c8a814d59@gmail.com>

Thorsten -

It seems that your workstation has QGIS installed (The picture of file 
explorer shows a QGIS icon for one of the shape files). Why dont you use 
the DBManager function in QGIS to test your SQL ?

Sanitized version of the select:

*--

SELECT
 ??? name,
 ? ? left,
 ? ? top,
 ? ? right,
 ? ? bottom,
 ? ? geom
FROM grids.grid_1_25grad
WHERE
 ??? ST_Intersects(geom, (SELECT geom FROM 
countries.geometries_boundary_buffer_10km('and'))) AND NOT
 ??? ST_Touches?? (geom, (SELECT geom FROM 
countries.geometries_boundary_buffer_10km('and')))*

--

  * You are selecting features from table /grids.grid_1_25grad/. The
    name of the table indicates it contains grid cells - like the ones
    you show in the picture.

  * The SQL where-part? contains a combination of st_intersects (geom,
    /..some geometry resulting funtion../) and not st_touches (geom,
    /..same geometry resulting funtion../)
    "intersects" and "not touches" is equivalent to "within", so you can
    probably rewrite the where part to: *

    WHERE ST_Within(geom, (SELECT geom FROM
    countries.geometries_boundary_buffer_10km('and')))*

*
*

Med venlig hilsen / Best regards

Bo Victor Thomsen

Den 09-11-2022 kl. 14:53 skrev Rahkonen Jukka:
>
> Hi,
>
> You are selecting data from table grids.grid_1_25grad. I suppose that 
> table contains grid polygons. By your image you seem to want some 
> buffered geometry. Spend some time for thinking about what data do you 
> want and where to get it. You can test your queries with for example 
> pgAdmin that can preview the geometries. Or use OpenJUMP that is an 
> excellent tool for visualizing PostGIS query results.
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*Leber, Thorsten <Thorsten.Leber at hensoldt.net>
> *L?hetetty:* keskiviikko 9. marraskuuta 2022 15.46
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Aihe:* AW: org2org
>
> Hi Jukka,
>
> with geometry al 5 files are created
>
> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp 
> PG:"host=10.49.20.42 port=5432 user=tilemill password=test 
> dbname=nextgen" -sql "SELECT \""name\"", \""left\"", top, \""right\"", 
> bottom, geom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, 
> (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) 
> AND NOT ST_Touches(geom, (SELECT geom FROM 
> countries.geometries_boundary_buffer_10km('and')))" -s_srs "EPSG:4326" 
> -t_srs "EPSG:4326" -overwrite -lco ENCODING=utf8
>
> but it looks strange
>
> I would expect this
>
> Thorsten
>
> *Von:*Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Gesendet:* Mittwoch, 9. November 2022 13:10
> *An:* Leber, Thorsten <Thorsten.Leber at hensoldt.net>
> *Betreff:* Re: org2org
>
> This message was sent from outside of HENSOLDT. Please do not click on 
> links or open attachments unless you validate the source of this email 
> and know the content is safe.
>
> Hi,
>
> Try to add a geometry into the selection -sql "SELECT \""name\"", 
> \""left\"", top, \""right\"", bottom FROM..
>
> -Jukka-
>
> *L?hett?j?:*Leber, Thorsten <Thorsten.Leber at hensoldt.net>
> *L?hetetty:* keskiviikko 9. marraskuuta 2022 13.53
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Aihe:* AW: org2org
>
> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp 
> PG:"host=10.49.20.42 port=5432 user=tilemill password=test 
> dbname=nextgen" -sql "SELECT \""name\"", \""left\"", top, \""right\"", 
> bottom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom 
> FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT 
> ST_Touches(geom, (SELECT geom FROM 
> countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 
> -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8
>
> this works now without any warning but still only 3 files in output folder
>
> *Von:*Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Gesendet:* Mittwoch, 9. November 2022 12:21
> *An:* Leber, Thorsten <Thorsten.Leber at hensoldt.net>; 
> gdal-dev at lists.osgeo.org
> *Betreff:* Re: org2org
>
> This message was sent from outside of HENSOLDT. Please do not click on 
> links or open attachments unless you validate the source of this email 
> and know the content is safe.
>
> Hi,
>
> Does the SQL part work with a tool like pgAdmin? Notice that the inner 
> double quotes must be escaped as \? in the ogr2ogr command or 
> otherwise they will truncate the -sql parameter. And it seems that you 
> did not select the geometry field. Generally I would suggest to start 
> with a simple SQL and add complexity once you have gotten a good 
> result. Suggestion includes testing with easy table names first before 
> forwarding to names like countries.geometries_boundary_buffer_10km('and').
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta 
> *Leber, Thorsten
> *L?hetetty:* keskiviikko 9. marraskuuta 2022 13.02
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] org2org
>
> Hi All,
>
> I am trying to use org2org with the following command:
>
> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp 
> PG:"host=10.49.20.42 port=5432 user=tilemill password=test 
> dbname=nextgen" -sql "SELECT "name", "left", top, "right", bottom FROM 
> grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM 
> countries.geometries_boundary_buffer_10km('and'))) AND NOT 
> ST_Touches(geom, (SELECT geom FROM 
> countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 
> -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8
>
> I expect in the output folder 5 files
>
> But I receive a warning:
>
> Warning 1: layer names ignored in combination with -sql.
>
> And get only 3 files
>
> I am missing the .shp and the .shx file. Is there something wrong in 
> my command?
>
> KR
>
> Thorsten
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/ae1ee3f0/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 1618 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/ae1ee3f0/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 12636 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/ae1ee3f0/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3261 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/ae1ee3f0/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 2071 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/ae1ee3f0/attachment-0007.png>

From terrafrost at gmail.com  Wed Nov  9 14:13:15 2022
From: terrafrost at gmail.com (Terra Frost)
Date: Wed, 9 Nov 2022 16:13:15 -0600
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
In-Reply-To: <df2fdc3c-9c20-263f-3221-f423a2f2ce4e@spatialys.com>
References: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>
 <df2fdc3c-9c20-263f-3221-f423a2f2ce4e@spatialys.com>
Message-ID: <CAKY7Jh5ebpyBG3WyVAQWAKMoup+kn_JOxNB+1opb6A8jAUwHHA@mail.gmail.com>

I installed the GDAL suite of tools by doing the following:

sudo add-apt-repository ppa:ubuntugis/ppa
sudo apt-get update
sudo apt-get install gdal-bin
sudo apt-get install libgdal-dev

I'm running Ubuntu 20.04 and when I do gdal2tiles --version I get "GDAL
3.4.3, released 2022/04/22"

On Wed, Nov 9, 2022 at 11:01 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Terra,
>
> you didn't specify how you got GDAL and PROJ, and which versions of those
> you use.
>
> Make sure to solve the "proj_create_from_database: Cannot find proj.db"
> error. Check if the PROJ_LIB environment is set and if it points to the
> directory where proj.db is placed
>
> The "free(): invalid pointer" error could also suggest that you have
> several PROJ versions that are linked at runtime by GDAL.
>
> Even
> Le 09/11/2022 ? 17:54, Terra Frost a ?crit :
>
> I have two TIFs that I'm able to run gdal2tiles on without issue,
> however, when I do gdal_merge I am unable to do gdal2tiles on the result.
> When I did gdal_merge on the two TIFs I got this warning:
>
> Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
> Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF keys
> is not the same as the one from the EPSG registry, which may cause issues
> during reprojection operations. Set GTIFF_SRS_SOURCE configuration option
> to EPSG to use official parameters (overriding the ones from GeoTIFF keys),
> or to GEOKEYS to use custom values from GeoTIFF keys and drop the EPSG code.
> Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
> Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF keys
> is not the same as the one from the EPSG registry, which may cause issues
> during reprojection operations. Set GTIFF_SRS_SOURCE configuration option
> to EPSG to use official parameters (overriding the ones from GeoTIFF keys),
> or to GEOKEYS to use custom values from GeoTIFF keys and drop the EPSG code.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>
> Despite the warning the two TIFs merged without issue, however, when I try
> to run gdal2tiles on the merged TIF I get this error:
>
> Traceback (most recent call last):
>   File "/usr/bin/gdal2tiles.py", line 16, in <module>
>     sys.exit(main(sys.argv))
>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
> 3314, in main
>     single_threaded_tiling(input_file, output_folder, options)
>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
> 3229, in single_threaded_tiling
>     conf, tile_details = worker_tile_details(input_file, output_folder,
> options)
>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
> 3145, in worker_tile_details
>     gdal2tiles.open_input()
>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
> 1797, in open_input
>     self.warped_input_dataset = reproject_dataset(
>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
> 987, in reproject_dataset
>     to_dataset = gdal.AutoCreateWarpedVRT(from_dataset,
>   File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 3976, in
> AutoCreateWarpedVRT
>     return _gdal.AutoCreateWarpedVRT(*args)
> RuntimeError: Cannot find coordinate operations from
> `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere",EDATUM[""],CS[Cartesian,2],AXIS["easting",east,ORDER[1],LENGTHUNIT["metre",1,ID["EPSG",9001]]],AXIS["northing",north,ORDER[2],LENGTHUNIT["metre",1,ID["EPSG",9001]]]]'
> to `EPSG:3857'
> free(): invalid pointer
> Aborted
>
>
> When I do gdalinfo on the merged TIF I get this:
>
> Corner Coordinates:
> Upper Left  (-10880978.065, 3538629.874)
> Lower Left  (-10880978.065, 3537702.774)
> Upper Right (-10880302.765, 3538629.874)
> Lower Right (-10880302.765, 3537702.774)
> Center      (-10880640.415, 3538166.324)
>
> When I do gdalinfo on the two TIFs that I merged I get this:
>
> Upper Left  (-10880811.355, 3538629.874)
> Lower Left  (-10880811.355, 3538052.574)
> Upper Right (-10880302.755, 3538629.874)
> Lower Right (-10880302.755, 3538052.574)
> Center      (-10880557.055, 3538341.224)
>
>
> ...and...
>
> Upper Left  (-10880978.065, 3538273.090)
> Lower Left  (-10880978.065, 3537702.790)
> Upper Right (-10880474.265, 3538273.090)
> Lower Right (-10880474.265, 3537702.790)
> Center      (-10880726.165, 3537987.940)
>
>
> Any ideas?
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/e133965a/attachment.htm>

From terrafrost at gmail.com  Wed Nov  9 14:20:35 2022
From: terrafrost at gmail.com (Terra Frost)
Date: Wed, 9 Nov 2022 16:20:35 -0600
Subject: [gdal-dev] not enough disk space for gdal_merge even though I have
 ~1TB free
Message-ID: <CAKY7Jh7tBM+SKRiDu7LHeS_J62qpKNnHotPFeuoJK6dqD1hf4w@mail.gmail.com>

When I do "gdal_merge -o result.tif bottom.tif top.tif" I get the following
error:

ERROR 3: result.tif: Free disk space available is 1011663560704 bytes,
whereas 61588097799713184 are at least necessary. You can disable this
check by defining the CHECK_DISK_FREE_SPACE configuration option to FALSE.
Creation failed, terminating gdal_merge.


I don't understand. The two TIFs I'm trying to merge are 1.27GB and 64MB
and it's saying 61588097799713184 bytes are needed? That's 61.58 PB. Why
would gdal_merge think it'd need 61.58 PB?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/c6dc9961/attachment.htm>

From even.rouault at spatialys.com  Wed Nov  9 14:24:21 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Nov 2022 23:24:21 +0100
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
In-Reply-To: <CAKY7Jh5ebpyBG3WyVAQWAKMoup+kn_JOxNB+1opb6A8jAUwHHA@mail.gmail.com>
References: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>
 <df2fdc3c-9c20-263f-3221-f423a2f2ce4e@spatialys.com>
 <CAKY7Jh5ebpyBG3WyVAQWAKMoup+kn_JOxNB+1opb6A8jAUwHHA@mail.gmail.com>
Message-ID: <7197bddf-a254-2808-cb0c-fb03f30415ab@spatialys.com>

The GDAL version from ppa:ubuntugis/ppa on Ubuntu 20.04 is:

GDAL 3.3.2, released 2021/09/01

So there must be a mix of GDAL versions on your system if you have GDAL 
3.4.3

Le 09/11/2022 ? 23:13, Terra Frost a ?crit?:
> I installed the GDAL suite of tools by doing the following:
>
> sudo add-apt-repository ppa:ubuntugis/ppa
> sudo apt-get update
> sudo apt-get install gdal-bin
> sudo apt-get install libgdal-dev
>
> I'm running Ubuntu 20.04 and when I do gdal2tiles --version I get 
> "GDAL 3.4.3, released 2022/04/22"
>
> On Wed, Nov 9, 2022 at 11:01 AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Terra,
>
>     you didn't specify how you got GDAL and PROJ, and which versions
>     of those you use.
>
>     Make sure to solve the "proj_create_from_database: Cannot find
>     proj.db" error. Check if the PROJ_LIB environment is set and if it
>     points to the directory where proj.db is placed
>
>     The "free(): invalid pointer" error could also suggest that you
>     have several PROJ versions that are linked at runtime by GDAL.
>
>     Even
>
>     Le 09/11/2022 ? 17:54, Terra Frost a ?crit?:
>>     I have two TIFs that I'm able to run gdal2tiles on without issue,
>>     however, when I do gdal_merge I am unable to do gdal2tiles on the
>>     result. When I did gdal_merge on the two TIFs I got this warning:
>>
>>         Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>>         Warning 1: The definition of projected CRS EPSG:3857 got from
>>         GeoTIFF keys is not the same as the one from the EPSG
>>         registry, which may cause issues during reprojection
>>         operations. Set GTIFF_SRS_SOURCE configuration option to EPSG
>>         to use official parameters (overriding the ones from GeoTIFF
>>         keys), or to GEOKEYS to use custom values from GeoTIFF keys
>>         and drop the EPSG code.
>>         Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>>         Warning 1: The definition of projected CRS EPSG:3857 got from
>>         GeoTIFF keys is not the same as the one from the EPSG
>>         registry, which may cause issues during reprojection
>>         operations. Set GTIFF_SRS_SOURCE configuration option to EPSG
>>         to use official parameters (overriding the ones from GeoTIFF
>>         keys), or to GEOKEYS to use custom values from GeoTIFF keys
>>         and drop the EPSG code.
>>         0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>>
>>     Despite the warning the two TIFs merged without issue, however,
>>     when I try to run gdal2tiles on the merged TIF I get this error:
>>
>>         Traceback (most recent call last):
>>         ? File "/usr/bin/gdal2tiles.py", line 16, in <module>
>>         sys.exit(main(sys.argv))
>>         ? File
>>         "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>>         line 3314, in main
>>         single_threaded_tiling(input_file, output_folder, options)
>>         ? File
>>         "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>>         line 3229, in single_threaded_tiling
>>         ? ? conf, tile_details = worker_tile_details(input_file,
>>         output_folder, options)
>>         ? File
>>         "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>>         line 3145, in worker_tile_details
>>         gdal2tiles.open_input()
>>         ? File
>>         "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>>         line 1797, in open_input
>>         self.warped_input_dataset = reproject_dataset(
>>         ? File
>>         "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py",
>>         line 987, in reproject_dataset
>>         ? ? to_dataset = gdal.AutoCreateWarpedVRT(from_dataset,
>>         ? File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line
>>         3976, in AutoCreateWarpedVRT
>>         ? ? return _gdal.AutoCreateWarpedVRT(*args)
>>         RuntimeError: Cannot find coordinate operations from
>>         `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere",EDATUM[""],CS[Cartesian,2],AXIS["easting",east,ORDER[1],LENGTHUNIT["metre",1,ID["EPSG",9001]]],AXIS["northing",north,ORDER[2],LENGTHUNIT["metre",1,ID["EPSG",9001]]]]'
>>         to `EPSG:3857'
>>         free(): invalid pointer
>>         Aborted
>>
>>
>>     When I do gdalinfo on the merged TIF I get this:
>>
>>         Corner Coordinates:
>>         Upper Left ?(-10880978.065, 3538629.874)
>>         Lower Left ?(-10880978.065, 3537702.774)
>>         Upper Right (-10880302.765, 3538629.874)
>>         Lower Right (-10880302.765, 3537702.774)
>>         Center ?(-10880640.415, 3538166.324)
>>
>>     When I do gdalinfo on the two TIFs that I merged I get this:
>>
>>         Upper Left ?(-10880811.355, 3538629.874)
>>         Lower Left ?(-10880811.355, 3538052.574)
>>         Upper Right (-10880302.755, 3538629.874)
>>         Lower Right (-10880302.755, 3538052.574)
>>         Center ?(-10880557.055, 3538341.224)
>>
>>
>>     ...and...
>>
>>         Upper Left ?(-10880978.065, 3538273.090)
>>         Lower Left ?(-10880978.065, 3537702.790)
>>         Upper Right (-10880474.265, 3538273.090)
>>         Lower Right (-10880474.265, 3537702.790)
>>         Center ?(-10880726.165, 3537987.940)
>>
>>
>>     Any ideas?
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/f2b18352/attachment-0001.htm>

From terrafrost at gmail.com  Wed Nov  9 15:25:24 2022
From: terrafrost at gmail.com (Terra Frost)
Date: Wed, 9 Nov 2022 17:25:24 -0600
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
In-Reply-To: <7197bddf-a254-2808-cb0c-fb03f30415ab@spatialys.com>
References: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>
 <df2fdc3c-9c20-263f-3221-f423a2f2ce4e@spatialys.com>
 <CAKY7Jh5ebpyBG3WyVAQWAKMoup+kn_JOxNB+1opb6A8jAUwHHA@mail.gmail.com>
 <7197bddf-a254-2808-cb0c-fb03f30415ab@spatialys.com>
Message-ID: <CAKY7Jh5WBi02bUQUOAQG5nT8NTBKBPfc7pSvF0V-BXvHY14bkg@mail.gmail.com>

So I just tried the above commands on a brand new Ubuntu 22.04 install.
When I did "sudo add-apt-repository ppa:ubuntugis/ppa" I got this error:

E: The repository 'https://ppa.launchpadcontent.net/ubuntugis/ppa/ubuntu jammy
Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore
disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration
details.

All the other commands worked but I guess they used another repo.
https://pastebin.com/CkXUf3Si is the output I got back when I did the sudo
apt-get install stuff (I tried to add it as an attachment to the email but
apparently mailman rejects messages with attachments > 100kb).

Anyway, after all that, I'm still getting the same error.

I can make a video, from start to finish, showing the issue. I install
Ubuntu 22.04 on WSL2 from the Windows App Store and then I tell Ubuntu what
username I want to use and then I type in the commands. And then I copy the
TIF into the shared directory (\\wsl.localhost\Ubuntu-22.04\home\ubuntu)
and then I try the gdal2tiles command...

On Wed, Nov 9, 2022 at 4:24 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> The GDAL version from ppa:ubuntugis/ppa on Ubuntu 20.04 is:
>
> GDAL 3.3.2, released 2021/09/01
>
> So there must be a mix of GDAL versions on your system if you have GDAL
> 3.4.3
> Le 09/11/2022 ? 23:13, Terra Frost a ?crit :
>
> I installed the GDAL suite of tools by doing the following:
>
> sudo add-apt-repository ppa:ubuntugis/ppa
> sudo apt-get update
> sudo apt-get install gdal-bin
> sudo apt-get install libgdal-dev
>
> I'm running Ubuntu 20.04 and when I do gdal2tiles --version I get "GDAL
> 3.4.3, released 2022/04/22"
>
> On Wed, Nov 9, 2022 at 11:01 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Terra,
>>
>> you didn't specify how you got GDAL and PROJ, and which versions of those
>> you use.
>>
>> Make sure to solve the "proj_create_from_database: Cannot find proj.db"
>> error. Check if the PROJ_LIB environment is set and if it points to the
>> directory where proj.db is placed
>>
>> The "free(): invalid pointer" error could also suggest that you have
>> several PROJ versions that are linked at runtime by GDAL.
>>
>> Even
>> Le 09/11/2022 ? 17:54, Terra Frost a ?crit :
>>
>> I have two TIFs that I'm able to run gdal2tiles on without issue,
>> however, when I do gdal_merge I am unable to do gdal2tiles on the
>> result. When I did gdal_merge on the two TIFs I got this warning:
>>
>> Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>> Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF
>> keys is not the same as the one from the EPSG registry, which may cause
>> issues during reprojection operations. Set GTIFF_SRS_SOURCE configuration
>> option to EPSG to use official parameters (overriding the ones from GeoTIFF
>> keys), or to GEOKEYS to use custom values from GeoTIFF keys and drop the
>> EPSG code.
>> Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>> Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF
>> keys is not the same as the one from the EPSG registry, which may cause
>> issues during reprojection operations. Set GTIFF_SRS_SOURCE configuration
>> option to EPSG to use official parameters (overriding the ones from GeoTIFF
>> keys), or to GEOKEYS to use custom values from GeoTIFF keys and drop the
>> EPSG code.
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>>
>> Despite the warning the two TIFs merged without issue, however, when I
>> try to run gdal2tiles on the merged TIF I get this error:
>>
>> Traceback (most recent call last):
>>   File "/usr/bin/gdal2tiles.py", line 16, in <module>
>>     sys.exit(main(sys.argv))
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 3314, in main
>>     single_threaded_tiling(input_file, output_folder, options)
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 3229, in single_threaded_tiling
>>     conf, tile_details = worker_tile_details(input_file, output_folder,
>> options)
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 3145, in worker_tile_details
>>     gdal2tiles.open_input()
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 1797, in open_input
>>     self.warped_input_dataset = reproject_dataset(
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 987, in reproject_dataset
>>     to_dataset = gdal.AutoCreateWarpedVRT(from_dataset,
>>   File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 3976, in
>> AutoCreateWarpedVRT
>>     return _gdal.AutoCreateWarpedVRT(*args)
>> RuntimeError: Cannot find coordinate operations from
>> `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere",EDATUM[""],CS[Cartesian,2],AXIS["easting",east,ORDER[1],LENGTHUNIT["metre",1,ID["EPSG",9001]]],AXIS["northing",north,ORDER[2],LENGTHUNIT["metre",1,ID["EPSG",9001]]]]'
>> to `EPSG:3857'
>> free(): invalid pointer
>> Aborted
>>
>>
>> When I do gdalinfo on the merged TIF I get this:
>>
>> Corner Coordinates:
>> Upper Left  (-10880978.065, 3538629.874)
>> Lower Left  (-10880978.065, 3537702.774)
>> Upper Right (-10880302.765, 3538629.874)
>> Lower Right (-10880302.765, 3537702.774)
>> Center      (-10880640.415, 3538166.324)
>>
>> When I do gdalinfo on the two TIFs that I merged I get this:
>>
>> Upper Left  (-10880811.355, 3538629.874)
>> Lower Left  (-10880811.355, 3538052.574)
>> Upper Right (-10880302.755, 3538629.874)
>> Lower Right (-10880302.755, 3538052.574)
>> Center      (-10880557.055, 3538341.224)
>>
>>
>> ...and...
>>
>> Upper Left  (-10880978.065, 3538273.090)
>> Lower Left  (-10880978.065, 3537702.790)
>> Upper Right (-10880474.265, 3538273.090)
>> Lower Right (-10880474.265, 3537702.790)
>> Center      (-10880726.165, 3537987.940)
>>
>>
>> Any ideas?
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/d2709504/attachment.htm>

From andreaerdna at libero.it  Wed Nov  9 16:14:36 2022
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Thu, 10 Nov 2022 01:14:36 +0100
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
Message-ID: <d9d84d2a-c294-7761-3183-1859b29f9d22@libero.it>

> *Terra Frost*
> /Wed Nov 9 15:25:24 PST 2022/
> ------------------------------------------------------------------------
> So I just tried the above commands on a brand new Ubuntu 22.04 install.
> When I did "sudo add-apt-repository ppa:ubuntugis/ppa" I got this error:
>
> E: The repository 'https://ppa.launchpadcontent.net/ubuntugis/ppa/ubuntu  jammy
> Release' does not have a Release file.

Hi Terra,
as the error says, the ubuntugis ppa [1] does not have packages for 
Ubuntu 22.04 Jammy Jellyfish.
GDAL 3.4.3 is available in the ubuntugis-unstable repository for Jammy [2].
GDAL 3.4.1 is available in the ubuntu repository for Jammy [3].

Best regards.

Andrea Giudiceandrea


[1] https://launchpad.net/~ubuntugis/+archive/ubuntu/ppa
[2] https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable
[3] https://packages.ubuntu.com/jammy/gdal-bin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/c875dd29/attachment-0001.htm>

From ujaval at spatialthoughts.com  Wed Nov  9 23:20:54 2022
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Thu, 10 Nov 2022 07:20:54 +0000
Subject: [gdal-dev] not enough disk space for gdal_merge even though I
 have ~1TB free
In-Reply-To: <CAKY7Jh7tBM+SKRiDu7LHeS_J62qpKNnHotPFeuoJK6dqD1hf4w@mail.gmail.com>
References: <CAKY7Jh7tBM+SKRiDu7LHeS_J62qpKNnHotPFeuoJK6dqD1hf4w@mail.gmail.com>
Message-ID: <fd505a90-5731-4990-0091-391d7fd6f0ce@spatialthoughts.com>

Your inputs must be compressed and you are trying to write uncompressed output.
Add?-co COMPRESS=DEFLATE and it should work. Also I find that instead of using
gdal_merge.py for merging large files, creating a virtual raster first and then
using gdal_translate to convert to geotiff is much more efficient. See the
workflow at?https://courses.spatialthoughts.com/gdal-tools.html#merging-tiles
[https://courses.spatialthoughts.com/gdal-tools.html#merging-tiles]

---
Ujaval Gandhi
Spatial Thoughts
www.spatialthoughts.com [http://www.spatialthoughts.com]




[data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=3D]
On Thu, Nov 10, 2022 at 3:50 AM Terra Frost <terrafrost at gmail.com> wrote:

> When I do "gdal_merge -o result.tif bottom.tif top.tif" I get the following
> error:
> 
> 
> > ERROR 3: result.tif: Free disk space available is 1011663560704 bytes,
> > whereas 61588097799713184 are at least necessary. You can disable this check
> > by defining the CHECK_DISK_FREE_SPACE configuration option to FALSE.
> > Creation failed, terminating gdal_merge.
> 
> 
> 
> I don't understand. The two TIFs I'm trying to merge are 1.27GB and 64MB and
> it's saying?61588097799713184 bytes are needed? That's 61.58 PB. Why would
> gdal_merge think it'd need 61.58 PB?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org [gdal-dev at lists.osgeo.org]
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> [https://lists.osgeo.org/mailman/listinfo/gdal-dev]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/03446702/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov  9 23:25:15 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 10 Nov 2022 07:25:15 +0000
Subject: [gdal-dev] not enough disk space for gdal_merge even though I
 have ~1TB free
In-Reply-To: <CAKY7Jh7tBM+SKRiDu7LHeS_J62qpKNnHotPFeuoJK6dqD1hf4w@mail.gmail.com>
References: <CAKY7Jh7tBM+SKRiDu7LHeS_J62qpKNnHotPFeuoJK6dqD1hf4w@mail.gmail.com>
Message-ID: <AM0PR09MB32192787DCEA81085D052517FD019@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Maybe the images are far apart and the merged image would need to contain huge amounts of nodata for filling the gap. Please provide gdalinfo from bottom.tif and top.tif.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Terra Frost
L?hetetty: torstai 10. marraskuuta 2022 0.21
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] not enough disk space for gdal_merge even though I have ~1TB free

When I do "gdal_merge -o result.tif bottom.tif top.tif" I get the following error:

ERROR 3: result.tif: Free disk space available is 1011663560704 bytes, whereas 61588097799713184 are at least necessary. You can disable this check by defining the CHECK_DISK_FREE_SPACE configuration option to FALSE.
Creation failed, terminating gdal_merge.

I don't understand. The two TIFs I'm trying to merge are 1.27GB and 64MB and it's saying 61588097799713184 bytes are needed? That's 61.58 PB. Why would gdal_merge think it'd need 61.58 PB?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/0e1502be/attachment.htm>

From bo.victor.thomsen at gmail.com  Thu Nov 10 00:25:58 2022
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Thu, 10 Nov 2022 09:25:58 +0100
Subject: [gdal-dev] org2org
In-Reply-To: <c644eedf-518e-4947-1916-4c2c8a814d59@gmail.com>
References: <412305ff559641248820b5be82e0ef84@hensoldt.net>
 <AM0PR09MB3219DFCA1A510D0EAB32BAD5FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <155e5c5b48d248318a300a45a50601b3@hensoldt.net>
 <AM0PR09MB321974216CCB778ED4E1D9E2FD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <d548c09021584e12baf04f2360a154c1@hensoldt.net>
 <AM0PR09MB3219EAD83D5330CD8BD2E03FFD3E9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <c644eedf-518e-4947-1916-4c2c8a814d59@gmail.com>
Message-ID: <f43c4a5e-d265-5523-c089-3c66e8849ea1@gmail.com>

Sorry to pollute this list (again !) with non GDAL related information, 
however -

I made a mistake in my answer about the SQL statement and the nerd part 
of my brain just won't let go. So:

  * The SQL where-part? contains a combination of st_intersects (geom,
    /..some geometry resulting function../) and not st_touches (geom,
    /..same geometry resulting function../)
    "intersects" and "not touches" is equivalent to "within", so you can
    probably rewrite the where part to: *

    WHERE ST_Within(geom, (SELECT geom FROM
    countries.geometries_boundary_buffer_10km('and')*))

The above is /not/ correct. The equivalent to "intersects and not 
touches" is "within or overlaps". The where statement should be:

*WHERE ST_Within(geom, (SELECT geom FROM 
countries.geometries_boundary_buffer_10km('and')*)) *OR*
*ST_Overlaps(geom, (SELECT geom FROM 
countries.geometries_boundary_buffer_10km('and')*))

Which is marginally better than the original where.

But if you read the entire SQL statement, I would assume the purpose 
would be something like: "/Fetch all gridcells that is wihtin a 10 km. 
distance from a set of countries"//./

In that case the where part could? be simplified (and running 
considerably faster) by using ST_DWithin:

*SELECT
 ??? a.name,
 ? ? a.left,
 ? ? a.top,
 ? ? a.right,
 ? ? a.bottom,
 ? ? a.geom
FROM grids.grid_1_25grad a
JOIN countries.table_with_countries b ON ST_DWIthin (a.geom, b.geom, 
10000.0)*

If the 2 tables involved has the same SRID (using meters as distance 
unit) and the spatial columns is of type geometry
**


**


Med venlig hilsen / Best regards

Bo Victor Thomsen

Den 09-11-2022 kl. 21:55 skrev Bo Victor Thomsen:
>
> Thorsten -
>
> It seems that your workstation has QGIS installed (The picture of file 
> explorer shows a QGIS icon for one of the shape files). Why dont you 
> use the DBManager function in QGIS to test your SQL ?
>
> Sanitized version of the select:
>
> *--
>
> SELECT
> ??? name,
> ? ? left,
> ? ? top,
> ? ? right,
> ? ? bottom,
> ? ? geom
> FROM grids.grid_1_25grad
> WHERE
> ??? ST_Intersects(geom, (SELECT geom FROM 
> countries.geometries_boundary_buffer_10km('and'))) AND NOT
> ??? ST_Touches?? (geom, (SELECT geom FROM 
> countries.geometries_boundary_buffer_10km('and')))*
>
> --
>
>   * You are selecting features from table /grids.grid_1_25grad/. The
>     name of the table indicates it contains grid cells - like the ones
>     you show in the picture.
>
>   * The SQL where-part? contains a combination of st_intersects (geom,
>     /..some geometry resulting funtion../) and not st_touches (geom,
>     /..same geometry resulting funtion../)
>     "intersects" and "not touches" is equivalent to "within", so you
>     can probably rewrite the where part to: *
>
>     WHERE ST_Within(geom, (SELECT geom FROM
>     countries.geometries_boundary_buffer_10km('and')))*
>
> *
> *
>
> Med venlig hilsen / Best regards
>
> Bo Victor Thomsen
>
> Den 09-11-2022 kl. 14:53 skrev Rahkonen Jukka:
>>
>> Hi,
>>
>> You are selecting data from table grids.grid_1_25grad. I suppose that 
>> table contains grid polygons. By your image you seem to want some 
>> buffered geometry. Spend some time for thinking about what data do 
>> you want and where to get it. You can test your queries with for 
>> example pgAdmin that can preview the geometries. Or use OpenJUMP that 
>> is an excellent tool for visualizing PostGIS query results.
>>
>> -Jukka Rahkonen-
>>
>> *L?hett?j?:*Leber, Thorsten <Thorsten.Leber at hensoldt.net>
>> *L?hetetty:* keskiviikko 9. marraskuuta 2022 15.46
>> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Aihe:* AW: org2org
>>
>> Hi Jukka,
>>
>> with geometry al 5 files are created
>>
>> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp 
>> PG:"host=10.49.20.42 port=5432 user=tilemill password=test 
>> dbname=nextgen" -sql "SELECT \""name\"", \""left\"", top, 
>> \""right\"", bottom, geom FROM grids.grid_1_25grad WHERE 
>> ST_Intersects(geom, (SELECT geom FROM 
>> countries.geometries_boundary_buffer_10km('and'))) AND NOT 
>> ST_Touches(geom, (SELECT geom FROM 
>> countries.geometries_boundary_buffer_10km('and')))" -s_srs 
>> "EPSG:4326" -t_srs "EPSG:4326" -overwrite -lco ENCODING=utf8
>>
>> but it looks strange
>>
>> I would expect this
>>
>> Thorsten
>>
>> *Von:*Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Gesendet:* Mittwoch, 9. November 2022 13:10
>> *An:* Leber, Thorsten <Thorsten.Leber at hensoldt.net>
>> *Betreff:* Re: org2org
>>
>> This message was sent from outside of HENSOLDT. Please do not click 
>> on links or open attachments unless you validate the source of this 
>> email and know the content is safe.
>>
>> Hi,
>>
>> Try to add a geometry into the selection -sql "SELECT \""name\"", 
>> \""left\"", top, \""right\"", bottom FROM..
>>
>> -Jukka-
>>
>> *L?hett?j?:*Leber, Thorsten <Thorsten.Leber at hensoldt.net>
>> *L?hetetty:* keskiviikko 9. marraskuuta 2022 13.53
>> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Aihe:* AW: org2org
>>
>> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp 
>> PG:"host=10.49.20.42 port=5432 user=tilemill password=test 
>> dbname=nextgen" -sql "SELECT \""name\"", \""left\"", top, 
>> \""right\"", bottom FROM grids.grid_1_25grad WHERE 
>> ST_Intersects(geom, (SELECT geom FROM 
>> countries.geometries_boundary_buffer_10km('and'))) AND NOT 
>> ST_Touches(geom, (SELECT geom FROM 
>> countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 
>> -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8
>>
>> this works now without any warning but still only 3 files in output 
>> folder
>>
>> *Von:*Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Gesendet:* Mittwoch, 9. November 2022 12:21
>> *An:* Leber, Thorsten <Thorsten.Leber at hensoldt.net>; 
>> gdal-dev at lists.osgeo.org
>> *Betreff:* Re: org2org
>>
>> This message was sent from outside of HENSOLDT. Please do not click 
>> on links or open attachments unless you validate the source of this 
>> email and know the content is safe.
>>
>> Hi,
>>
>> Does the SQL part work with a tool like pgAdmin? Notice that the 
>> inner double quotes must be escaped as \? in the ogr2ogr command or 
>> otherwise they will truncate the -sql parameter. And it seems that 
>> you did not select the geometry field. Generally I would suggest to 
>> start with a simple SQL and add complexity once you have gotten a 
>> good result. Suggestion includes testing with easy table names first 
>> before forwarding to names like 
>> countries.geometries_boundary_buffer_10km('and').
>>
>> -Jukka Rahkonen-
>>
>> *L?hett?j?:*gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta 
>> *Leber, Thorsten
>> *L?hetetty:* keskiviikko 9. marraskuuta 2022 13.02
>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>> *Aihe:* [gdal-dev] org2org
>>
>> Hi All,
>>
>> I am trying to use org2org with the following command:
>>
>> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp 
>> PG:"host=10.49.20.42 port=5432 user=tilemill password=test 
>> dbname=nextgen" -sql "SELECT "name", "left", top, "right", bottom 
>> FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM 
>> countries.geometries_boundary_buffer_10km('and'))) AND NOT 
>> ST_Touches(geom, (SELECT geom FROM 
>> countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 
>> -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8
>>
>> I expect in the output folder 5 files
>>
>> But I receive a warning:
>>
>> Warning 1: layer names ignored in combination with -sql.
>>
>> And get only 3 files
>>
>> I am missing the .shp and the .shx file. Is there something wrong in 
>> my command?
>>
>> KR
>>
>> Thorsten
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/b00d3699/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 1618 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/b00d3699/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 12636 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/b00d3699/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3261 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/b00d3699/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 2071 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221110/b00d3699/attachment-0007.png>

From terrafrost at gmail.com  Wed Nov  9 15:23:06 2022
From: terrafrost at gmail.com (Terra Frost)
Date: Wed, 9 Nov 2022 17:23:06 -0600
Subject: [gdal-dev] gdal2tiles: RuntimeError: Cannot find coordinate
 operations from `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere"
In-Reply-To: <7197bddf-a254-2808-cb0c-fb03f30415ab@spatialys.com>
References: <CAKY7Jh5G_zkCcRJ4h4pKryUw5-yUnvyw3xR66CKtsKc=uxotkw@mail.gmail.com>
 <df2fdc3c-9c20-263f-3221-f423a2f2ce4e@spatialys.com>
 <CAKY7Jh5ebpyBG3WyVAQWAKMoup+kn_JOxNB+1opb6A8jAUwHHA@mail.gmail.com>
 <7197bddf-a254-2808-cb0c-fb03f30415ab@spatialys.com>
Message-ID: <CAKY7Jh4oHO4aAqn6R3ADULPAOTrKe40=nW9N1yTHGQ2_pZugjA@mail.gmail.com>

So I just tried the above commands on a brand new Ubuntu 22.04 install.
When I did "sudo add-apt-repository ppa:ubuntugis/ppa" I got this error:

E: The repository 'https://ppa.launchpadcontent.net/ubuntugis/ppa/ubuntu
jammy Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore
disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration
details.

All the other commands worked but I guess they used another repo. The
attached output.txt is the output I got back when I did the sudo apt-get
install stuff.

Anyway, after all that, I'm still getting the same error.

I can make a video, from start to finish, showing the issue. I install
Ubuntu 22.04 on WSL2 from the Windows App Store and then I tell Ubuntu what
username I want to use and then I type in the commands. And then I copy the
TIF into the shared directory (\\wsl.localhost\Ubuntu-22.04\home\ubuntu)
and then I try the gdal2tiles command...

On Wed, Nov 9, 2022 at 4:24 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> The GDAL version from ppa:ubuntugis/ppa on Ubuntu 20.04 is:
>
> GDAL 3.3.2, released 2021/09/01
>
> So there must be a mix of GDAL versions on your system if you have GDAL
> 3.4.3
> Le 09/11/2022 ? 23:13, Terra Frost a ?crit :
>
> I installed the GDAL suite of tools by doing the following:
>
> sudo add-apt-repository ppa:ubuntugis/ppa
> sudo apt-get update
> sudo apt-get install gdal-bin
> sudo apt-get install libgdal-dev
>
> I'm running Ubuntu 20.04 and when I do gdal2tiles --version I get "GDAL
> 3.4.3, released 2022/04/22"
>
> On Wed, Nov 9, 2022 at 11:01 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Terra,
>>
>> you didn't specify how you got GDAL and PROJ, and which versions of those
>> you use.
>>
>> Make sure to solve the "proj_create_from_database: Cannot find proj.db"
>> error. Check if the PROJ_LIB environment is set and if it points to the
>> directory where proj.db is placed
>>
>> The "free(): invalid pointer" error could also suggest that you have
>> several PROJ versions that are linked at runtime by GDAL.
>>
>> Even
>> Le 09/11/2022 ? 17:54, Terra Frost a ?crit :
>>
>> I have two TIFs that I'm able to run gdal2tiles on without issue,
>> however, when I do gdal_merge I am unable to do gdal2tiles on the
>> result. When I did gdal_merge on the two TIFs I got this warning:
>>
>> Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>> Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF
>> keys is not the same as the one from the EPSG registry, which may cause
>> issues during reprojection operations. Set GTIFF_SRS_SOURCE configuration
>> option to EPSG to use official parameters (overriding the ones from GeoTIFF
>> keys), or to GEOKEYS to use custom values from GeoTIFF keys and drop the
>> EPSG code.
>> Warning 1: PROJ: proj_create_from_database: Cannot find proj.db
>> Warning 1: The definition of projected CRS EPSG:3857 got from GeoTIFF
>> keys is not the same as the one from the EPSG registry, which may cause
>> issues during reprojection operations. Set GTIFF_SRS_SOURCE configuration
>> option to EPSG to use official parameters (overriding the ones from GeoTIFF
>> keys), or to GEOKEYS to use custom values from GeoTIFF keys and drop the
>> EPSG code.
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>>
>> Despite the warning the two TIFs merged without issue, however, when I
>> try to run gdal2tiles on the merged TIF I get this error:
>>
>> Traceback (most recent call last):
>>   File "/usr/bin/gdal2tiles.py", line 16, in <module>
>>     sys.exit(main(sys.argv))
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 3314, in main
>>     single_threaded_tiling(input_file, output_folder, options)
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 3229, in single_threaded_tiling
>>     conf, tile_details = worker_tile_details(input_file, output_folder,
>> options)
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 3145, in worker_tile_details
>>     gdal2tiles.open_input()
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 1797, in open_input
>>     self.warped_input_dataset = reproject_dataset(
>>   File "/usr/lib/python3/dist-packages/osgeo_utils/gdal2tiles.py", line
>> 987, in reproject_dataset
>>     to_dataset = gdal.AutoCreateWarpedVRT(from_dataset,
>>   File "/usr/lib/python3/dist-packages/osgeo/gdal.py", line 3976, in
>> AutoCreateWarpedVRT
>>     return _gdal.AutoCreateWarpedVRT(*args)
>> RuntimeError: Cannot find coordinate operations from
>> `ENGCRS["WGS_1984_Web_Mercator_Auxiliary_Sphere",EDATUM[""],CS[Cartesian,2],AXIS["easting",east,ORDER[1],LENGTHUNIT["metre",1,ID["EPSG",9001]]],AXIS["northing",north,ORDER[2],LENGTHUNIT["metre",1,ID["EPSG",9001]]]]'
>> to `EPSG:3857'
>> free(): invalid pointer
>> Aborted
>>
>>
>> When I do gdalinfo on the merged TIF I get this:
>>
>> Corner Coordinates:
>> Upper Left  (-10880978.065, 3538629.874)
>> Lower Left  (-10880978.065, 3537702.774)
>> Upper Right (-10880302.765, 3538629.874)
>> Lower Right (-10880302.765, 3537702.774)
>> Center      (-10880640.415, 3538166.324)
>>
>> When I do gdalinfo on the two TIFs that I merged I get this:
>>
>> Upper Left  (-10880811.355, 3538629.874)
>> Lower Left  (-10880811.355, 3538052.574)
>> Upper Right (-10880302.755, 3538629.874)
>> Lower Right (-10880302.755, 3538052.574)
>> Center      (-10880557.055, 3538341.224)
>>
>>
>> ...and...
>>
>> Upper Left  (-10880978.065, 3538273.090)
>> Lower Left  (-10880978.065, 3537702.790)
>> Upper Right (-10880474.265, 3538273.090)
>> Lower Right (-10880474.265, 3537702.790)
>> Center      (-10880726.165, 3537987.940)
>>
>>
>> Any ideas?
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221109/495d9f4b/attachment-0001.htm>
-------------- next part --------------
ubuntu at LAPTOP-STNJQ05O:~$ sudo apt-get install gdal-bin
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  fontconfig-config fonts-dejavu-core gdal-data libaec0 libaom3 libarmadillo10 libarpack2 libblas3 libblosc1
  libcfitsio9 libcharls2 libdav1d5 libde265-0 libdeflate0 libfontconfig1 libfreetype6 libfreexl1 libfyba0 libgdal30
  libgeos-c1v5 libgeos3.10.2 libgeotiff5 libgfortran5 libgif7 libhdf4-0-alt libhdf5-103-1 libhdf5-hl-100 libheif1
  libjbig0 libjpeg-turbo8 libjpeg8 libkmlbase1 libkmldom1 libkmlengine1 liblapack3 liblcms2-2 libltdl7 libminizip1
  libmysqlclient21 libnetcdf19 libnspr4 libnss3 libodbc2 libodbcinst2 libogdi4.1 libopenjp2-7 libpoppler118 libpq5
  libproj22 libqhull-r8.0 libquadmath0 librttopo1 libsnappy1v5 libspatialite7 libsuperlu5 libsz2 libtiff5
  liburiparser1 libwebp7 libx265-199 libxerces-c3.2 mysql-common poppler-data proj-bin proj-data python3-gdal
  python3-numpy unixodbc-common
Suggested packages:
  libgdal-grass geotiff-bin libgeotiff-epsg libhdf4-doc libhdf4-alt-dev hdf4-tools liblcms2-utils odbc-postgresql
  tdsodbc ogdi-bin poppler-utils ghostscript fonts-japanese-mincho | fonts-ipafont-mincho fonts-japanese-gothic
  | fonts-ipafont-gothic fonts-arphic-ukai fonts-arphic-uming fonts-nanum gcc gfortran python-numpy-doc python3-dev
  python3-pytest
The following NEW packages will be installed:
  fontconfig-config fonts-dejavu-core gdal-bin gdal-data libaec0 libaom3 libarmadillo10 libarpack2 libblas3 libblosc1
  libcfitsio9 libcharls2 libdav1d5 libde265-0 libdeflate0 libfontconfig1 libfreetype6 libfreexl1 libfyba0 libgdal30
  libgeos-c1v5 libgeos3.10.2 libgeotiff5 libgfortran5 libgif7 libhdf4-0-alt libhdf5-103-1 libhdf5-hl-100 libheif1
  libjbig0 libjpeg-turbo8 libjpeg8 libkmlbase1 libkmldom1 libkmlengine1 liblapack3 liblcms2-2 libltdl7 libminizip1
  libmysqlclient21 libnetcdf19 libnspr4 libnss3 libodbc2 libodbcinst2 libogdi4.1 libopenjp2-7 libpoppler118 libpq5
  libproj22 libqhull-r8.0 libquadmath0 librttopo1 libsnappy1v5 libspatialite7 libsuperlu5 libsz2 libtiff5
  liburiparser1 libwebp7 libx265-199 libxerces-c3.2 mysql-common poppler-data proj-bin proj-data python3-gdal
  python3-numpy unixodbc-common
0 upgraded, 69 newly installed, 0 to remove and 19 not upgraded.
Need to get 48.2 MB of archives.
After this operation, 182 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://archive.ubuntu.com/ubuntu jammy/main amd64 poppler-data all 0.4.11-1 [2171 kB]
Get:2 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-dejavu-core all 2.37-2build1 [1041 kB]
Get:3 http://archive.ubuntu.com/ubuntu jammy/main amd64 fontconfig-config all 2.13.1-4.2ubuntu5 [29.1 kB]
Get:4 http://archive.ubuntu.com/ubuntu jammy/main amd64 libblas3 amd64 3.10.0-2ubuntu1 [228 kB]
Get:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libquadmath0 amd64 12.1.0-2ubuntu1~22.04 [154 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgfortran5 amd64 12.1.0-2ubuntu1~22.04 [882 kB]
Get:7 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblapack3 amd64 3.10.0-2ubuntu1 [2504 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 python3-numpy amd64 1:1.21.5-1build2 [3464 kB]
Get:9 http://archive.ubuntu.com/ubuntu jammy/universe amd64 gdal-data all 3.4.1+dfsg-1build4 [216 kB]
Get:10 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libarpack2 amd64 3.8.0-1 [92.4 kB]
Get:11 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libsuperlu5 amd64 5.3.0+dfsg1-2 [183 kB]
Get:12 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libarmadillo10 amd64 1:10.8.2+dfsg-1 [105 kB]
Get:13 http://archive.ubuntu.com/ubuntu jammy/main amd64 libsnappy1v5 amd64 1.1.8-1build3 [17.5 kB]
Get:14 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libblosc1 amd64 1.21.1+ds2-2 [35.8 kB]
Get:15 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcfitsio9 amd64 4.0.0-1 [519 kB]
Get:16 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcharls2 amd64 2.3.4-1 [87.0 kB]
Get:17 http://archive.ubuntu.com/ubuntu jammy/main amd64 libdeflate0 amd64 1.10-2 [70.9 kB]
Get:18 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libfreexl1 amd64 1.0.6-1 [33.5 kB]
Get:19 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libfyba0 amd64 4.1.1-7 [113 kB]
Get:20 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgeos3.10.2 amd64 3.10.2-1 [713 kB]
Get:21 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgeos-c1v5 amd64 3.10.2-1 [82.5 kB]
Get:22 http://archive.ubuntu.com/ubuntu jammy/universe amd64 proj-data all 8.2.1-1 [10.0 MB]
Get:23 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjbig0 amd64 2.1-3.1build3 [28.9 kB]
Get:24 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg-turbo8 amd64 2.1.2-0ubuntu1 [134 kB]
Get:25 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg8 amd64 8c-2ubuntu10 [2264 B]
Get:26 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwebp7 amd64 1.2.2-2 [206 kB]
Get:27 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtiff5 amd64 4.3.0-6ubuntu0.2 [184 kB]
Get:28 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libproj22 amd64 8.2.1-1 [1257 kB]
Get:29 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgeotiff5 amd64 1.7.0-2build1 [67.1 kB]
Get:30 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgif7 amd64 5.1.9-2build2 [33.8 kB]
Get:31 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf4-0-alt amd64 4.2.15-4 [290 kB]
Get:32 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libaec0 amd64 1.0.6-1 [20.1 kB]
Get:33 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libsz2 amd64 1.0.6-1 [5354 B]
Get:34 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-103-1 amd64 1.10.7+repack-4ubuntu2 [1295 kB]
Get:35 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libaom3 amd64 3.3.0-1 [1748 kB]
Get:36 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libdav1d5 amd64 0.9.2-1 [463 kB]
Get:37 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libde265-0 amd64 1.0.8-1 [243 kB]
Get:38 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libx265-199 amd64 3.5-2 [1170 kB]
Get:39 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libheif1 amd64 1.12.0-2build1 [196 kB]
Get:40 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libminizip1 amd64 1.1-8build1 [20.2 kB]
Get:41 http://archive.ubuntu.com/ubuntu jammy/universe amd64 liburiparser1 amd64 0.9.6+dfsg-1 [36.4 kB]
Get:42 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkmlbase1 amd64 1.3.0-9 [45.0 kB]
Get:43 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkmldom1 amd64 1.3.0-9 [150 kB]
Get:44 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkmlengine1 amd64 1.3.0-9 [71.7 kB]
Get:45 http://archive.ubuntu.com/ubuntu jammy/main amd64 mysql-common all 5.8+1.0.8 [7212 B]
Get:46 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libmysqlclient21 amd64 8.0.31-0ubuntu0.22.04.1 [1301 kB]
Get:47 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-hl-100 amd64 1.10.7+repack-4ubuntu2 [59.1 kB]
Get:48 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libnetcdf19 amd64 1:4.8.1-1 [456 kB]
Get:49 http://archive.ubuntu.com/ubuntu jammy/main amd64 libltdl7 amd64 2.4.6-15build2 [39.6 kB]
Get:50 http://archive.ubuntu.com/ubuntu jammy/main amd64 libodbc2 amd64 2.3.9-5 [159 kB]
Get:51 http://archive.ubuntu.com/ubuntu jammy/main amd64 unixodbc-common all 2.3.9-5 [9228 B]
Get:52 http://archive.ubuntu.com/ubuntu jammy/main amd64 libodbcinst2 amd64 2.3.9-5 [31.9 kB]
Get:53 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libogdi4.1 amd64 4.1.0+ds-5 [197 kB]
Get:54 http://archive.ubuntu.com/ubuntu jammy/main amd64 libopenjp2-7 amd64 2.4.0-6 [158 kB]
Get:55 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libfreetype6 amd64 2.11.1+dfsg-1ubuntu0.1 [389 kB]
Get:56 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfontconfig1 amd64 2.13.1-4.2ubuntu5 [131 kB]
Get:57 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblcms2-2 amd64 2.12~rc1-2build2 [159 kB]
Get:58 http://archive.ubuntu.com/ubuntu jammy/main amd64 libnspr4 amd64 2:4.32-3build1 [119 kB]
Get:59 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libnss3 amd64 2:3.68.2-0ubuntu1.1 [1280 kB]
Get:60 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpoppler118 amd64 22.02.0-2ubuntu0.1 [1077 kB]
Get:61 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpq5 amd64 14.5-0ubuntu0.22.04.1 [140 kB]
Get:62 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libqhull-r8.0 amd64 2020.2-4 [196 kB]
Get:63 http://archive.ubuntu.com/ubuntu jammy/universe amd64 librttopo1 amd64 1.1.0-2 [178 kB]
Get:64 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libspatialite7 amd64 5.0.1-2build2 [2092 kB]
Get:65 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libxerces-c3.2 amd64 3.2.3+debian-3build1 [930 kB]
Get:66 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgdal30 amd64 3.4.1+dfsg-1build4 [7642 kB]
Get:67 http://archive.ubuntu.com/ubuntu jammy/universe amd64 python3-gdal amd64 3.4.1+dfsg-1build4 [673 kB]
Get:68 http://archive.ubuntu.com/ubuntu jammy/universe amd64 gdal-bin amd64 3.4.1+dfsg-1build4 [241 kB]
Get:69 http://archive.ubuntu.com/ubuntu jammy/universe amd64 proj-bin amd64 8.2.1-1 [154 kB]
Fetched 48.2 MB in 3s (17.3 MB/s)
Extracting templates from packages: 100%
Selecting previously unselected package poppler-data.
(Reading database ... 24075 files and directories currently installed.)
Preparing to unpack .../00-poppler-data_0.4.11-1_all.deb ...
Unpacking poppler-data (0.4.11-1) ...
Selecting previously unselected package fonts-dejavu-core.
Preparing to unpack .../01-fonts-dejavu-core_2.37-2build1_all.deb ...
Unpacking fonts-dejavu-core (2.37-2build1) ...
Selecting previously unselected package fontconfig-config.
Preparing to unpack .../02-fontconfig-config_2.13.1-4.2ubuntu5_all.deb ...
Unpacking fontconfig-config (2.13.1-4.2ubuntu5) ...
Selecting previously unselected package libblas3:amd64.
Preparing to unpack .../03-libblas3_3.10.0-2ubuntu1_amd64.deb ...
Unpacking libblas3:amd64 (3.10.0-2ubuntu1) ...
Selecting previously unselected package libquadmath0:amd64.
Preparing to unpack .../04-libquadmath0_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libquadmath0:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libgfortran5:amd64.
Preparing to unpack .../05-libgfortran5_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libgfortran5:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package liblapack3:amd64.
Preparing to unpack .../06-liblapack3_3.10.0-2ubuntu1_amd64.deb ...
Unpacking liblapack3:amd64 (3.10.0-2ubuntu1) ...
Selecting previously unselected package python3-numpy.
Preparing to unpack .../07-python3-numpy_1%3a1.21.5-1build2_amd64.deb ...
Unpacking python3-numpy (1:1.21.5-1build2) ...
Selecting previously unselected package gdal-data.
Preparing to unpack .../08-gdal-data_3.4.1+dfsg-1build4_all.deb ...
Unpacking gdal-data (3.4.1+dfsg-1build4) ...
Selecting previously unselected package libarpack2:amd64.
Preparing to unpack .../09-libarpack2_3.8.0-1_amd64.deb ...
Unpacking libarpack2:amd64 (3.8.0-1) ...
Selecting previously unselected package libsuperlu5:amd64.
Preparing to unpack .../10-libsuperlu5_5.3.0+dfsg1-2_amd64.deb ...
Unpacking libsuperlu5:amd64 (5.3.0+dfsg1-2) ...
Selecting previously unselected package libarmadillo10.
Preparing to unpack .../11-libarmadillo10_1%3a10.8.2+dfsg-1_amd64.deb ...
Unpacking libarmadillo10 (1:10.8.2+dfsg-1) ...
Selecting previously unselected package libsnappy1v5:amd64.
Preparing to unpack .../12-libsnappy1v5_1.1.8-1build3_amd64.deb ...
Unpacking libsnappy1v5:amd64 (1.1.8-1build3) ...
Selecting previously unselected package libblosc1:amd64.
Preparing to unpack .../13-libblosc1_1.21.1+ds2-2_amd64.deb ...
Unpacking libblosc1:amd64 (1.21.1+ds2-2) ...
Selecting previously unselected package libcfitsio9:amd64.
Preparing to unpack .../14-libcfitsio9_4.0.0-1_amd64.deb ...
Unpacking libcfitsio9:amd64 (4.0.0-1) ...
Selecting previously unselected package libcharls2:amd64.
Preparing to unpack .../15-libcharls2_2.3.4-1_amd64.deb ...
Unpacking libcharls2:amd64 (2.3.4-1) ...
Selecting previously unselected package libdeflate0:amd64.
Preparing to unpack .../16-libdeflate0_1.10-2_amd64.deb ...
Unpacking libdeflate0:amd64 (1.10-2) ...
Selecting previously unselected package libfreexl1:amd64.
Preparing to unpack .../17-libfreexl1_1.0.6-1_amd64.deb ...
Unpacking libfreexl1:amd64 (1.0.6-1) ...
Selecting previously unselected package libfyba0:amd64.
Preparing to unpack .../18-libfyba0_4.1.1-7_amd64.deb ...
Unpacking libfyba0:amd64 (4.1.1-7) ...
Selecting previously unselected package libgeos3.10.2:amd64.
Preparing to unpack .../19-libgeos3.10.2_3.10.2-1_amd64.deb ...
Unpacking libgeos3.10.2:amd64 (3.10.2-1) ...
Selecting previously unselected package libgeos-c1v5:amd64.
Preparing to unpack .../20-libgeos-c1v5_3.10.2-1_amd64.deb ...
Unpacking libgeos-c1v5:amd64 (3.10.2-1) ...
Selecting previously unselected package proj-data.
Preparing to unpack .../21-proj-data_8.2.1-1_all.deb ...
Unpacking proj-data (8.2.1-1) ...
Selecting previously unselected package libjbig0:amd64.
Preparing to unpack .../22-libjbig0_2.1-3.1build3_amd64.deb ...
Unpacking libjbig0:amd64 (2.1-3.1build3) ...
Selecting previously unselected package libjpeg-turbo8:amd64.
Preparing to unpack .../23-libjpeg-turbo8_2.1.2-0ubuntu1_amd64.deb ...
Unpacking libjpeg-turbo8:amd64 (2.1.2-0ubuntu1) ...
Selecting previously unselected package libjpeg8:amd64.
Preparing to unpack .../24-libjpeg8_8c-2ubuntu10_amd64.deb ...
Unpacking libjpeg8:amd64 (8c-2ubuntu10) ...
Selecting previously unselected package libwebp7:amd64.
Preparing to unpack .../25-libwebp7_1.2.2-2_amd64.deb ...
Unpacking libwebp7:amd64 (1.2.2-2) ...
Selecting previously unselected package libtiff5:amd64.
Preparing to unpack .../26-libtiff5_4.3.0-6ubuntu0.2_amd64.deb ...
Unpacking libtiff5:amd64 (4.3.0-6ubuntu0.2) ...
Selecting previously unselected package libproj22:amd64.
Preparing to unpack .../27-libproj22_8.2.1-1_amd64.deb ...
Unpacking libproj22:amd64 (8.2.1-1) ...
Selecting previously unselected package libgeotiff5:amd64.
Preparing to unpack .../28-libgeotiff5_1.7.0-2build1_amd64.deb ...
Unpacking libgeotiff5:amd64 (1.7.0-2build1) ...
Selecting previously unselected package libgif7:amd64.
Preparing to unpack .../29-libgif7_5.1.9-2build2_amd64.deb ...
Unpacking libgif7:amd64 (5.1.9-2build2) ...
Selecting previously unselected package libhdf4-0-alt.
Preparing to unpack .../30-libhdf4-0-alt_4.2.15-4_amd64.deb ...
Unpacking libhdf4-0-alt (4.2.15-4) ...
Selecting previously unselected package libaec0:amd64.
Preparing to unpack .../31-libaec0_1.0.6-1_amd64.deb ...
Unpacking libaec0:amd64 (1.0.6-1) ...
Selecting previously unselected package libsz2:amd64.
Preparing to unpack .../32-libsz2_1.0.6-1_amd64.deb ...
Unpacking libsz2:amd64 (1.0.6-1) ...
Selecting previously unselected package libhdf5-103-1:amd64.
Preparing to unpack .../33-libhdf5-103-1_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-103-1:amd64 (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libaom3:amd64.
Preparing to unpack .../34-libaom3_3.3.0-1_amd64.deb ...
Unpacking libaom3:amd64 (3.3.0-1) ...
Selecting previously unselected package libdav1d5:amd64.
Preparing to unpack .../35-libdav1d5_0.9.2-1_amd64.deb ...
Unpacking libdav1d5:amd64 (0.9.2-1) ...
Selecting previously unselected package libde265-0:amd64.
Preparing to unpack .../36-libde265-0_1.0.8-1_amd64.deb ...
Unpacking libde265-0:amd64 (1.0.8-1) ...
Selecting previously unselected package libx265-199:amd64.
Preparing to unpack .../37-libx265-199_3.5-2_amd64.deb ...
Unpacking libx265-199:amd64 (3.5-2) ...
Selecting previously unselected package libheif1:amd64.
Preparing to unpack .../38-libheif1_1.12.0-2build1_amd64.deb ...
Unpacking libheif1:amd64 (1.12.0-2build1) ...
Selecting previously unselected package libminizip1:amd64.
Preparing to unpack .../39-libminizip1_1.1-8build1_amd64.deb ...
Unpacking libminizip1:amd64 (1.1-8build1) ...
Selecting previously unselected package liburiparser1:amd64.
Preparing to unpack .../40-liburiparser1_0.9.6+dfsg-1_amd64.deb ...
Unpacking liburiparser1:amd64 (0.9.6+dfsg-1) ...
Selecting previously unselected package libkmlbase1:amd64.
Preparing to unpack .../41-libkmlbase1_1.3.0-9_amd64.deb ...
Unpacking libkmlbase1:amd64 (1.3.0-9) ...
Selecting previously unselected package libkmldom1:amd64.
Preparing to unpack .../42-libkmldom1_1.3.0-9_amd64.deb ...
Unpacking libkmldom1:amd64 (1.3.0-9) ...
Selecting previously unselected package libkmlengine1:amd64.
Preparing to unpack .../43-libkmlengine1_1.3.0-9_amd64.deb ...
Unpacking libkmlengine1:amd64 (1.3.0-9) ...
Selecting previously unselected package mysql-common.
Preparing to unpack .../44-mysql-common_5.8+1.0.8_all.deb ...
Unpacking mysql-common (5.8+1.0.8) ...
Selecting previously unselected package libmysqlclient21:amd64.
Preparing to unpack .../45-libmysqlclient21_8.0.31-0ubuntu0.22.04.1_amd64.deb ...
Unpacking libmysqlclient21:amd64 (8.0.31-0ubuntu0.22.04.1) ...
Selecting previously unselected package libhdf5-hl-100:amd64.
Preparing to unpack .../46-libhdf5-hl-100_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-hl-100:amd64 (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libnetcdf19:amd64.
Preparing to unpack .../47-libnetcdf19_1%3a4.8.1-1_amd64.deb ...
Unpacking libnetcdf19:amd64 (1:4.8.1-1) ...
Selecting previously unselected package libltdl7:amd64.
Preparing to unpack .../48-libltdl7_2.4.6-15build2_amd64.deb ...
Unpacking libltdl7:amd64 (2.4.6-15build2) ...
Selecting previously unselected package libodbc2:amd64.
Preparing to unpack .../49-libodbc2_2.3.9-5_amd64.deb ...
Unpacking libodbc2:amd64 (2.3.9-5) ...
Selecting previously unselected package unixodbc-common.
Preparing to unpack .../50-unixodbc-common_2.3.9-5_all.deb ...
Unpacking unixodbc-common (2.3.9-5) ...
Selecting previously unselected package libodbcinst2:amd64.
Preparing to unpack .../51-libodbcinst2_2.3.9-5_amd64.deb ...
Unpacking libodbcinst2:amd64 (2.3.9-5) ...
Selecting previously unselected package libogdi4.1.
Preparing to unpack .../52-libogdi4.1_4.1.0+ds-5_amd64.deb ...
Unpacking libogdi4.1 (4.1.0+ds-5) ...
Selecting previously unselected package libopenjp2-7:amd64.
Preparing to unpack .../53-libopenjp2-7_2.4.0-6_amd64.deb ...
Unpacking libopenjp2-7:amd64 (2.4.0-6) ...
Selecting previously unselected package libfreetype6:amd64.
Preparing to unpack .../54-libfreetype6_2.11.1+dfsg-1ubuntu0.1_amd64.deb ...
Unpacking libfreetype6:amd64 (2.11.1+dfsg-1ubuntu0.1) ...
Selecting previously unselected package libfontconfig1:amd64.
Preparing to unpack .../55-libfontconfig1_2.13.1-4.2ubuntu5_amd64.deb ...
Unpacking libfontconfig1:amd64 (2.13.1-4.2ubuntu5) ...
Selecting previously unselected package liblcms2-2:amd64.
Preparing to unpack .../56-liblcms2-2_2.12~rc1-2build2_amd64.deb ...
Unpacking liblcms2-2:amd64 (2.12~rc1-2build2) ...
Selecting previously unselected package libnspr4:amd64.
Preparing to unpack .../57-libnspr4_2%3a4.32-3build1_amd64.deb ...
Unpacking libnspr4:amd64 (2:4.32-3build1) ...
Selecting previously unselected package libnss3:amd64.
Preparing to unpack .../58-libnss3_2%3a3.68.2-0ubuntu1.1_amd64.deb ...
Unpacking libnss3:amd64 (2:3.68.2-0ubuntu1.1) ...
Selecting previously unselected package libpoppler118:amd64.
Preparing to unpack .../59-libpoppler118_22.02.0-2ubuntu0.1_amd64.deb ...
Unpacking libpoppler118:amd64 (22.02.0-2ubuntu0.1) ...
Selecting previously unselected package libpq5:amd64.
Preparing to unpack .../60-libpq5_14.5-0ubuntu0.22.04.1_amd64.deb ...
Unpacking libpq5:amd64 (14.5-0ubuntu0.22.04.1) ...
Selecting previously unselected package libqhull-r8.0:amd64.
Preparing to unpack .../61-libqhull-r8.0_2020.2-4_amd64.deb ...
Unpacking libqhull-r8.0:amd64 (2020.2-4) ...
Selecting previously unselected package librttopo1:amd64.
Preparing to unpack .../62-librttopo1_1.1.0-2_amd64.deb ...
Unpacking librttopo1:amd64 (1.1.0-2) ...
Selecting previously unselected package libspatialite7:amd64.
Preparing to unpack .../63-libspatialite7_5.0.1-2build2_amd64.deb ...
Unpacking libspatialite7:amd64 (5.0.1-2build2) ...
Selecting previously unselected package libxerces-c3.2:amd64.
Preparing to unpack .../64-libxerces-c3.2_3.2.3+debian-3build1_amd64.deb ...
Unpacking libxerces-c3.2:amd64 (3.2.3+debian-3build1) ...
Selecting previously unselected package libgdal30.
Preparing to unpack .../65-libgdal30_3.4.1+dfsg-1build4_amd64.deb ...
Unpacking libgdal30 (3.4.1+dfsg-1build4) ...
Selecting previously unselected package python3-gdal.
Preparing to unpack .../66-python3-gdal_3.4.1+dfsg-1build4_amd64.deb ...
Unpacking python3-gdal (3.4.1+dfsg-1build4) ...
Selecting previously unselected package gdal-bin.
Preparing to unpack .../67-gdal-bin_3.4.1+dfsg-1build4_amd64.deb ...
Unpacking gdal-bin (3.4.1+dfsg-1build4) ...
Selecting previously unselected package proj-bin.
Preparing to unpack .../68-proj-bin_8.2.1-1_amd64.deb ...
Unpacking proj-bin (8.2.1-1) ...
Setting up liblcms2-2:amd64 (2.12~rc1-2build2) ...
Setting up libgeos3.10.2:amd64 (3.10.2-1) ...
Setting up libaom3:amd64 (3.3.0-1) ...
Setting up mysql-common (5.8+1.0.8) ...
update-alternatives: using /etc/mysql/my.cnf.fallback to provide /etc/mysql/my.cnf (my.cnf) in auto mode
Setting up libmysqlclient21:amd64 (8.0.31-0ubuntu0.22.04.1) ...
Setting up libxerces-c3.2:amd64 (3.2.3+debian-3build1) ...
Setting up proj-data (8.2.1-1) ...
Setting up libogdi4.1 (4.1.0+ds-5) ...
Setting up libcharls2:amd64 (2.3.4-1) ...
Setting up libminizip1:amd64 (1.1-8build1) ...
Setting up libpq5:amd64 (14.5-0ubuntu0.22.04.1) ...
Setting up libdeflate0:amd64 (1.10-2) ...
Setting up libqhull-r8.0:amd64 (2020.2-4) ...
Setting up libjbig0:amd64 (2.1-3.1build3) ...
Setting up libaec0:amd64 (1.0.6-1) ...
Setting up gdal-data (3.4.1+dfsg-1build4) ...
Setting up libsnappy1v5:amd64 (1.1.8-1build3) ...
Setting up poppler-data (0.4.11-1) ...
Setting up libcfitsio9:amd64 (4.0.0-1) ...
Setting up libblas3:amd64 (3.10.0-2ubuntu1) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/blas/libblas.so.3 to provide /usr/lib/x86_64-linux-gnu/libblas.so.3 (libblas.so.3-x86_64-linux-gnu) in auto mode
Setting up libfreetype6:amd64 (2.11.1+dfsg-1ubuntu0.1) ...
Setting up libnspr4:amd64 (2:4.32-3build1) ...
Setting up libquadmath0:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up libgeos-c1v5:amd64 (3.10.2-1) ...
Setting up fonts-dejavu-core (2.37-2build1) ...
Setting up unixodbc-common (2.3.9-5) ...
Setting up libjpeg-turbo8:amd64 (2.1.2-0ubuntu1) ...
Setting up libltdl7:amd64 (2.4.6-15build2) ...
Setting up libgfortran5:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up libx265-199:amd64 (3.5-2) ...
Setting up libwebp7:amd64 (1.2.2-2) ...
Setting up libgif7:amd64 (5.1.9-2build2) ...
Setting up libodbc2:amd64 (2.3.9-5) ...
Setting up liburiparser1:amd64 (0.9.6+dfsg-1) ...
Setting up librttopo1:amd64 (1.1.0-2) ...
Setting up libfreexl1:amd64 (1.0.6-1) ...
Setting up libfyba0:amd64 (4.1.1-7) ...
Setting up libkmlbase1:amd64 (1.3.0-9) ...
Setting up libblosc1:amd64 (1.21.1+ds2-2) ...
Setting up libopenjp2-7:amd64 (2.4.0-6) ...
Setting up libdav1d5:amd64 (0.9.2-1) ...
Setting up libde265-0:amd64 (1.0.8-1) ...
Setting up libsz2:amd64 (1.0.6-1) ...
Setting up libkmldom1:amd64 (1.3.0-9) ...
Setting up libjpeg8:amd64 (8c-2ubuntu10) ...
Setting up libodbcinst2:amd64 (2.3.9-5) ...
Setting up liblapack3:amd64 (3.10.0-2ubuntu1) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3 to provide /usr/lib/x86_64-linux-gnu/liblapack.so.3 (liblapack.so.3-x86_64-linux-gnu) in auto mode
Setting up libkmlengine1:amd64 (1.3.0-9) ...
Setting up fontconfig-config (2.13.1-4.2ubuntu5) ...
Setting up libheif1:amd64 (1.12.0-2build1) ...
Setting up libarpack2:amd64 (3.8.0-1) ...
Setting up libsuperlu5:amd64 (5.3.0+dfsg1-2) ...
Setting up libnss3:amd64 (2:3.68.2-0ubuntu1.1) ...
Setting up python3-numpy (1:1.21.5-1build2) ...
Setting up libhdf4-0-alt (4.2.15-4) ...
Setting up libhdf5-103-1:amd64 (1.10.7+repack-4ubuntu2) ...
Setting up libtiff5:amd64 (4.3.0-6ubuntu0.2) ...
Setting up libfontconfig1:amd64 (2.13.1-4.2ubuntu5) ...
Setting up libhdf5-hl-100:amd64 (1.10.7+repack-4ubuntu2) ...
Setting up libarmadillo10 (1:10.8.2+dfsg-1) ...
Setting up libproj22:amd64 (8.2.1-1) ...
Setting up libgeotiff5:amd64 (1.7.0-2build1) ...
Setting up libpoppler118:amd64 (22.02.0-2ubuntu0.1) ...
Setting up libnetcdf19:amd64 (1:4.8.1-1) ...
Setting up libspatialite7:amd64 (5.0.1-2build2) ...
Setting up proj-bin (8.2.1-1) ...
Setting up libgdal30 (3.4.1+dfsg-1build4) ...
Setting up python3-gdal (3.4.1+dfsg-1build4) ...
Setting up gdal-bin (3.4.1+dfsg-1build4) ...
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
/sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link

ubuntu at LAPTOP-STNJQ05O:~$ sudo apt-get install libgdal-dev
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  autoconf automake autotools-dev bzip2 cpp cpp-11 curl default-libmysqlclient-dev gcc gcc-11 gcc-11-base hdf5-helpers
  icu-devtools libaec-dev libaom-dev libarmadillo-dev libarpack2-dev libasan6 libatomic1 libblas-dev libblosc-dev
  libboost-dev libboost1.74-dev libc-dev-bin libc-devtools libc6-dev libcc1-0 libcfitsio-dev libcfitsio-doc
  libcharls-dev libcrypt-dev libcurl4 libcurl4-openssl-dev libdav1d-dev libde265-dev libdeflate-dev libdpkg-perl
  libexpat1-dev libfile-fcntllock-perl libfreexl-dev libfyba-dev libgcc-11-dev libgd3 libgeos-dev libgeotiff-dev
  libgif-dev libgomp1 libhdf4-alt-dev libhdf5-cpp-103-1 libhdf5-dev libhdf5-fortran-102 libhdf5-hl-cpp-100
  libhdf5-hl-fortran-100 libheif-dev libicu-dev libisl23 libitm1 libjbig-dev libjpeg-dev libjpeg-turbo8-dev
  libjpeg8-dev libjson-c-dev libkml-dev libkmlconvenience1 libkmlregionator1 libkmlxsd1 liblapack-dev liblsan0
  libltdl-dev liblz4-dev liblzma-dev libminizip-dev libmpc3 libmysqlclient-dev libnetcdf-dev libnsl-dev libodbccr2
  libogdi-dev libopenjp2-7-dev libpcre2-16-0 libpcre2-32-0 libpcre2-dev libpcre2-posix3 libpng-dev libpng-tools
  libpoppler-dev libpoppler-private-dev libpq-dev libproj-dev libqhull-dev libqhull8.0 libqhullcpp8.0 librttopo-dev
  libspatialite-dev libsqlite3-0 libsqlite3-dev libssl-dev libssl3 libstdc++-11-dev libsuperlu-dev libtiff-dev
  libtiffxx5 libtirpc-dev libtool libtsan0 libubsan1 liburiparser-dev libwebp-dev libwebpdemux2 libwebpmux3
  libx265-dev libxerces-c-dev libxml2-dev libxpm4 libzstd-dev linux-libc-dev m4 manpages-dev pkg-config rpcsvc-proto
  unixodbc-dev zlib1g-dev
Suggested packages:
  autoconf-archive gnu-standards autoconf-doc gettext bzip2-doc cpp-doc gcc-11-locales gcc-multilib make flex bison
  gdb gcc-doc gcc-11-multilib gcc-11-doc libitpp-dev liblapack-doc libboost-doc libboost1.74-doc
  libboost-atomic1.74-dev libboost-chrono1.74-dev libboost-container1.74-dev libboost-context1.74-dev
  libboost-contract1.74-dev libboost-coroutine1.74-dev libboost-date-time1.74-dev libboost-exception1.74-dev
  libboost-fiber1.74-dev libboost-filesystem1.74-dev libboost-graph1.74-dev libboost-graph-parallel1.74-dev
  libboost-iostreams1.74-dev libboost-locale1.74-dev libboost-log1.74-dev libboost-math1.74-dev libboost-mpi1.74-dev
  libboost-mpi-python1.74-dev libboost-numpy1.74-dev libboost-program-options1.74-dev libboost-python1.74-dev
  libboost-random1.74-dev libboost-regex1.74-dev libboost-serialization1.74-dev libboost-stacktrace1.74-dev
  libboost-system1.74-dev libboost-test1.74-dev libboost-thread1.74-dev libboost-timer1.74-dev
  libboost-type-erasure1.74-dev libboost-wave1.74-dev libboost1.74-tools-dev libmpfrc++-dev libntl-dev
  libboost-nowide1.74-dev glibc-doc libcurl4-doc libidn11-dev libkrb5-dev libldap2-dev librtmp-dev libssh2-1-dev
  debian-keyring bzr libgd-tools libgdal-doc libgeotiff-epsg libhdf5-doc icu-doc libtool-doc liblzma-doc netcdf-bin
  netcdf-doc libfreetype6-dev postgresql-doc-14 sqlite3-doc libssl-doc libstdc++-11-doc libsuperlu-doc gfortran
  | fortran95-compiler gcj-jdk libx265-doc libxerces-c-doc m4-doc dpkg-dev
The following NEW packages will be installed:
  autoconf automake autotools-dev bzip2 cpp cpp-11 default-libmysqlclient-dev gcc gcc-11 gcc-11-base hdf5-helpers
  icu-devtools libaec-dev libaom-dev libarmadillo-dev libarpack2-dev libasan6 libatomic1 libblas-dev libblosc-dev
  libboost-dev libboost1.74-dev libc-dev-bin libc-devtools libc6-dev libcc1-0 libcfitsio-dev libcfitsio-doc
  libcharls-dev libcrypt-dev libcurl4-openssl-dev libdav1d-dev libde265-dev libdeflate-dev libdpkg-perl libexpat1-dev
  libfile-fcntllock-perl libfreexl-dev libfyba-dev libgcc-11-dev libgd3 libgdal-dev libgeos-dev libgeotiff-dev
  libgif-dev libgomp1 libhdf4-alt-dev libhdf5-cpp-103-1 libhdf5-dev libhdf5-fortran-102 libhdf5-hl-cpp-100
  libhdf5-hl-fortran-100 libheif-dev libicu-dev libisl23 libitm1 libjbig-dev libjpeg-dev libjpeg-turbo8-dev
  libjpeg8-dev libjson-c-dev libkml-dev libkmlconvenience1 libkmlregionator1 libkmlxsd1 liblapack-dev liblsan0
  libltdl-dev liblz4-dev liblzma-dev libminizip-dev libmpc3 libmysqlclient-dev libnetcdf-dev libnsl-dev libodbccr2
  libogdi-dev libopenjp2-7-dev libpcre2-16-0 libpcre2-32-0 libpcre2-dev libpcre2-posix3 libpng-dev libpng-tools
  libpoppler-dev libpoppler-private-dev libpq-dev libproj-dev libqhull-dev libqhull8.0 libqhullcpp8.0 librttopo-dev
  libspatialite-dev libsqlite3-dev libssl-dev libstdc++-11-dev libsuperlu-dev libtiff-dev libtiffxx5 libtirpc-dev
  libtool libtsan0 libubsan1 liburiparser-dev libwebp-dev libwebpdemux2 libwebpmux3 libx265-dev libxerces-c-dev
  libxml2-dev libxpm4 libzstd-dev linux-libc-dev m4 manpages-dev pkg-config rpcsvc-proto unixodbc-dev zlib1g-dev
The following packages will be upgraded:
  curl libcurl4 libsqlite3-0 libssl3
4 upgraded, 119 newly installed, 0 to remove and 15 not upgraded.
Need to get 119 MB of archives.
After this operation, 613 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libssl3 amd64 3.0.2-0ubuntu1.7 [1899 kB]
Get:2 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libsqlite3-0 amd64 3.37.2-2ubuntu0.1 [641 kB]
Get:3 http://archive.ubuntu.com/ubuntu jammy/main amd64 m4 amd64 1.4.18-5ubuntu2 [199 kB]
Get:4 http://archive.ubuntu.com/ubuntu jammy/main amd64 autoconf all 2.71-2 [338 kB]
Get:5 http://archive.ubuntu.com/ubuntu jammy/main amd64 autotools-dev all 20220109.1 [44.9 kB]
Get:6 http://archive.ubuntu.com/ubuntu jammy/main amd64 automake all 1:1.16.5-1.3 [558 kB]
Get:7 http://archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]
Get:8 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11-base amd64 11.3.0-1ubuntu1~22.04 [20.8 kB]
Get:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 libisl23 amd64 0.24-2build1 [727 kB]
Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmpc3 amd64 1.2.1-2build1 [46.9 kB]
Get:11 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 cpp-11 amd64 11.3.0-1ubuntu1~22.04 [9967 kB]
Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 cpp amd64 4:11.2.0-1ubuntu1 [27.7 kB]
Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 curl amd64 7.81.0-1ubuntu1.6 [194 kB]
Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcurl4 amd64 7.81.0-1ubuntu1.6 [290 kB]
Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libssl-dev amd64 3.0.2-0ubuntu1.7 [2372 kB]
Get:16 http://archive.ubuntu.com/ubuntu jammy/main amd64 libzstd-dev amd64 1.4.8+dfsg-3build1 [401 kB]
Get:17 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-dev-bin amd64 2.35-0ubuntu3.1 [20.4 kB]
Get:18 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 linux-libc-dev amd64 5.15.0-52.58 [1319 kB]
Get:19 http://archive.ubuntu.com/ubuntu jammy/main amd64 libcrypt-dev amd64 1:4.4.27-1 [112 kB]
Get:20 http://archive.ubuntu.com/ubuntu jammy/main amd64 rpcsvc-proto amd64 1.4.2-0ubuntu6 [68.5 kB]
Get:21 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtirpc-dev amd64 1.3.2-2ubuntu0.1 [192 kB]
Get:22 http://archive.ubuntu.com/ubuntu jammy/main amd64 libnsl-dev amd64 1.3.0-2build2 [71.3 kB]
Get:23 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc6-dev amd64 2.35-0ubuntu3.1 [2099 kB]
Get:24 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 zlib1g-dev amd64 1:1.2.11.dfsg-2ubuntu9.2 [164 kB]
Get:25 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libmysqlclient-dev amd64 8.0.31-0ubuntu0.22.04.1 [1654 kB]
Get:26 http://archive.ubuntu.com/ubuntu jammy/main amd64 default-libmysqlclient-dev amd64 1.0.8 [3586 B]
Get:27 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcc1-0 amd64 12.1.0-2ubuntu1~22.04 [47.4 kB]
Get:28 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgomp1 amd64 12.1.0-2ubuntu1~22.04 [126 kB]
Get:29 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libitm1 amd64 12.1.0-2ubuntu1~22.04 [30.2 kB]
Get:30 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libatomic1 amd64 12.1.0-2ubuntu1~22.04 [10.4 kB]
Get:31 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libasan6 amd64 11.3.0-1ubuntu1~22.04 [2284 kB]
Get:32 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 liblsan0 amd64 12.1.0-2ubuntu1~22.04 [1069 kB]
Get:33 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtsan0 amd64 11.3.0-1ubuntu1~22.04 [2262 kB]
Get:34 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libubsan1 amd64 12.1.0-2ubuntu1~22.04 [976 kB]
Get:35 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgcc-11-dev amd64 11.3.0-1ubuntu1~22.04 [2517 kB]
Get:36 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11 amd64 11.3.0-1ubuntu1~22.04 [20.1 MB]
Get:37 http://archive.ubuntu.com/ubuntu jammy/main amd64 gcc amd64 4:11.2.0-1ubuntu1 [5112 B]
Get:38 http://archive.ubuntu.com/ubuntu jammy/universe amd64 hdf5-helpers amd64 1.10.7+repack-4ubuntu2 [14.2 kB]
Get:39 http://archive.ubuntu.com/ubuntu jammy/main amd64 icu-devtools amd64 70.1-2 [197 kB]
Get:40 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libaom-dev amd64 3.3.0-1 [2094 kB]
Get:41 http://archive.ubuntu.com/ubuntu jammy/main amd64 libblas-dev amd64 3.10.0-2ubuntu1 [164 kB]
Get:42 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblapack-dev amd64 3.10.0-2ubuntu1 [4774 kB]
Get:43 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libarpack2-dev amd64 3.8.0-1 [105 kB]
Get:44 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-fortran-102 amd64 1.10.7+repack-4ubuntu2 [90.9 kB]
Get:45 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-hl-fortran-100 amd64 1.10.7+repack-4ubuntu2 [33.8 kB]
Get:46 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-cpp-103-1 amd64 1.10.7+repack-4ubuntu2 [129 kB]
Get:47 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-hl-cpp-100 amd64 1.10.7+repack-4ubuntu2 [10.6 kB]
Get:48 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg-turbo8-dev amd64 2.1.2-0ubuntu1 [257 kB]
Get:49 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg8-dev amd64 8c-2ubuntu10 [1476 B]
Get:50 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg-dev amd64 8c-2ubuntu10 [1472 B]
Get:51 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libaec-dev amd64 1.0.6-1 [17.9 kB]
Get:52 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcurl4-openssl-dev amd64 7.81.0-1ubuntu1.6 [385 kB]
Get:53 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf5-dev amd64 1.10.7+repack-4ubuntu2 [2684 kB]
Get:54 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libsuperlu-dev amd64 5.3.0+dfsg1-2 [20.0 kB]
Get:55 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libarmadillo-dev amd64 1:10.8.2+dfsg-1 [399 kB]
Get:56 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libblosc-dev amd64 1.21.1+ds2-2 [44.1 kB]
Get:57 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libstdc++-11-dev amd64 11.3.0-1ubuntu1~22.04 [2087 kB]
Get:58 http://archive.ubuntu.com/ubuntu jammy/main amd64 libboost1.74-dev amd64 1.74.0-14ubuntu3 [9609 kB]
Get:59 http://archive.ubuntu.com/ubuntu jammy/main amd64 libboost-dev amd64 1.74.0.3ubuntu7 [3490 B]
Get:60 http://archive.ubuntu.com/ubuntu jammy/main amd64 libxpm4 amd64 1:3.5.12-1build2 [36.2 kB]
Get:61 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgd3 amd64 2.3.0-2ubuntu2 [129 kB]
Get:62 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-devtools amd64 2.35-0ubuntu3.1 [28.9 kB]
Get:63 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcfitsio-dev amd64 4.0.0-1 [591 kB]
Get:64 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcfitsio-doc all 4.0.0-1 [2053 kB]
Get:65 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcharls-dev amd64 2.3.4-1 [22.4 kB]
Get:66 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libdav1d-dev amd64 0.9.2-1 [24.1 kB]
Get:67 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libde265-dev amd64 1.0.8-1 [11.8 kB]
Get:68 http://archive.ubuntu.com/ubuntu jammy/main amd64 libdeflate-dev amd64 1.10-2 [59.2 kB]
Get:69 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libdpkg-perl all 1.21.1ubuntu2.1 [237 kB]
Get:70 http://archive.ubuntu.com/ubuntu jammy/main amd64 libexpat1-dev amd64 2.4.7-1 [147 kB]
Get:71 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfile-fcntllock-perl amd64 0.22-3build7 [33.9 kB]
Get:72 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libfyba-dev amd64 4.1.1-7 [166 kB]
Get:73 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgeos-dev amd64 3.10.2-1 [46.6 kB]
Get:74 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgif-dev amd64 5.1.9-2build2 [22.4 kB]
Get:75 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libx265-dev amd64 3.5-2 [1374 kB]
Get:76 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libheif-dev amd64 1.12.0-2build1 [26.4 kB]
Get:77 http://archive.ubuntu.com/ubuntu jammy/main amd64 libicu-dev amd64 70.1-2 [11.6 MB]
Get:78 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkmlconvenience1 amd64 1.3.0-9 [45.1 kB]
Get:79 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkmlregionator1 amd64 1.3.0-9 [19.9 kB]
Get:80 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkmlxsd1 amd64 1.3.0-9 [27.3 kB]
Get:81 http://archive.ubuntu.com/ubuntu jammy/main amd64 libltdl-dev amd64 2.4.6-15build2 [169 kB]
Get:82 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libminizip-dev amd64 1.1-8build1 [26.7 kB]
Get:83 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libnetcdf-dev amd64 1:4.8.1-1 [50.3 kB]
Get:84 http://archive.ubuntu.com/ubuntu jammy/main amd64 libodbccr2 amd64 2.3.9-5 [16.9 kB]
Get:85 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libogdi-dev amd64 4.1.0+ds-5 [22.1 kB]
Get:86 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpcre2-16-0 amd64 10.39-3ubuntu0.1 [203 kB]
Get:87 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpcre2-32-0 amd64 10.39-3ubuntu0.1 [194 kB]
Get:88 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpcre2-posix3 amd64 10.39-3ubuntu0.1 [6130 B]
Get:89 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpcre2-dev amd64 10.39-3ubuntu0.1 [730 kB]
Get:90 http://archive.ubuntu.com/ubuntu jammy/main amd64 libpng-dev amd64 1.6.37-3build5 [192 kB]
Get:91 http://archive.ubuntu.com/ubuntu jammy/main amd64 libpng-tools amd64 1.6.37-3build5 [28.7 kB]
Get:92 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpoppler-dev amd64 22.02.0-2ubuntu0.1 [5182 B]
Get:93 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpoppler-private-dev amd64 22.02.0-2ubuntu0.1 [198 kB]
Get:94 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpq-dev amd64 14.5-0ubuntu0.22.04.1 [147 kB]
Get:95 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libqhull8.0 amd64 2020.2-4 [193 kB]
Get:96 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libqhullcpp8.0 amd64 2020.2-4 [53.0 kB]
Get:97 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libqhull-dev amd64 2020.2-4 [502 kB]
Get:98 http://archive.ubuntu.com/ubuntu jammy/universe amd64 librttopo-dev amd64 1.1.0-2 [220 kB]
Get:99 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libsqlite3-dev amd64 3.37.2-2ubuntu0.1 [846 kB]
Get:100 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjbig-dev amd64 2.1-3.1build3 [27.3 kB]
Get:101 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblzma-dev amd64 5.2.5-2ubuntu1 [159 kB]
Get:102 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtiffxx5 amd64 4.3.0-6ubuntu0.2 [5734 B]
Get:103 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtiff-dev amd64 4.3.0-6ubuntu0.2 [314 kB]
Get:104 http://archive.ubuntu.com/ubuntu jammy/main amd64 libtool all 2.4.6-15build2 [164 kB]
Get:105 http://archive.ubuntu.com/ubuntu jammy/universe amd64 liburiparser-dev amd64 0.9.6+dfsg-1 [12.2 kB]
Get:106 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwebpdemux2 amd64 1.2.2-2 [9966 B]
Get:107 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwebpmux3 amd64 1.2.2-2 [20.5 kB]
Get:108 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libxerces-c-dev amd64 3.2.3+debian-3build1 [1820 kB]
Get:109 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libxml2-dev amd64 2.9.13+dfsg-1ubuntu0.1 [803 kB]
Get:110 http://archive.ubuntu.com/ubuntu jammy/main amd64 manpages-dev all 5.10-1ubuntu1 [2309 kB]
Get:111 http://archive.ubuntu.com/ubuntu jammy/main amd64 pkg-config amd64 0.29.2-1ubuntu3 [48.2 kB]
Get:112 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libfreexl-dev amd64 1.0.6-1 [31.4 kB]
Get:113 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libproj-dev amd64 8.2.1-1 [1594 kB]
Get:114 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgeotiff-dev amd64 1.7.0-2build1 [92.4 kB]
Get:115 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libhdf4-alt-dev amd64 4.2.15-4 [406 kB]
Get:116 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libjson-c-dev amd64 0.15-3~ubuntu1.22.04.1 [60.5 kB]
Get:117 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libkml-dev amd64 1.3.0-9 [933 kB]
Get:118 http://archive.ubuntu.com/ubuntu jammy/main amd64 liblz4-dev amd64 1.9.3-2build2 [80.7 kB]
Get:119 http://archive.ubuntu.com/ubuntu jammy/main amd64 libopenjp2-7-dev amd64 2.4.0-6 [245 kB]
Get:120 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libspatialite-dev amd64 5.0.1-2build2 [2397 kB]
Get:121 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwebp-dev amd64 1.2.2-2 [297 kB]
Get:122 http://archive.ubuntu.com/ubuntu jammy/main amd64 unixodbc-dev amd64 2.3.9-5 [248 kB]
Get:123 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libgdal-dev amd64 3.4.1+dfsg-1build4 [10.6 MB]
Fetched 119 MB in 9s (13.3 MB/s)
Extracting templates from packages: 100%
Preconfiguring packages ...
(Reading database ... 26361 files and directories currently installed.)
Preparing to unpack .../libssl3_3.0.2-0ubuntu1.7_amd64.deb ...
Unpacking libssl3:amd64 (3.0.2-0ubuntu1.7) over (3.0.2-0ubuntu1.6) ...
Setting up libssl3:amd64 (3.0.2-0ubuntu1.7) ...
(Reading database ... 26361 files and directories currently installed.)
Preparing to unpack .../000-libsqlite3-0_3.37.2-2ubuntu0.1_amd64.deb ...
Unpacking libsqlite3-0:amd64 (3.37.2-2ubuntu0.1) over (3.37.2-2) ...
Selecting previously unselected package m4.
Preparing to unpack .../001-m4_1.4.18-5ubuntu2_amd64.deb ...
Unpacking m4 (1.4.18-5ubuntu2) ...
Selecting previously unselected package autoconf.
Preparing to unpack .../002-autoconf_2.71-2_all.deb ...
Unpacking autoconf (2.71-2) ...
Selecting previously unselected package autotools-dev.
Preparing to unpack .../003-autotools-dev_20220109.1_all.deb ...
Unpacking autotools-dev (20220109.1) ...
Selecting previously unselected package automake.
Preparing to unpack .../004-automake_1%3a1.16.5-1.3_all.deb ...
Unpacking automake (1:1.16.5-1.3) ...
Selecting previously unselected package bzip2.
Preparing to unpack .../005-bzip2_1.0.8-5build1_amd64.deb ...
Unpacking bzip2 (1.0.8-5build1) ...
Selecting previously unselected package gcc-11-base:amd64.
Preparing to unpack .../006-gcc-11-base_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking gcc-11-base:amd64 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libisl23:amd64.
Preparing to unpack .../007-libisl23_0.24-2build1_amd64.deb ...
Unpacking libisl23:amd64 (0.24-2build1) ...
Selecting previously unselected package libmpc3:amd64.
Preparing to unpack .../008-libmpc3_1.2.1-2build1_amd64.deb ...
Unpacking libmpc3:amd64 (1.2.1-2build1) ...
Selecting previously unselected package cpp-11.
Preparing to unpack .../009-cpp-11_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking cpp-11 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package cpp.
Preparing to unpack .../010-cpp_4%3a11.2.0-1ubuntu1_amd64.deb ...
Unpacking cpp (4:11.2.0-1ubuntu1) ...
Preparing to unpack .../011-curl_7.81.0-1ubuntu1.6_amd64.deb ...
Unpacking curl (7.81.0-1ubuntu1.6) over (7.81.0-1ubuntu1.4) ...
Preparing to unpack .../012-libcurl4_7.81.0-1ubuntu1.6_amd64.deb ...
Unpacking libcurl4:amd64 (7.81.0-1ubuntu1.6) over (7.81.0-1ubuntu1.4) ...
Selecting previously unselected package libssl-dev:amd64.
Preparing to unpack .../013-libssl-dev_3.0.2-0ubuntu1.7_amd64.deb ...
Unpacking libssl-dev:amd64 (3.0.2-0ubuntu1.7) ...
Selecting previously unselected package libzstd-dev:amd64.
Preparing to unpack .../014-libzstd-dev_1.4.8+dfsg-3build1_amd64.deb ...
Unpacking libzstd-dev:amd64 (1.4.8+dfsg-3build1) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../015-libc-dev-bin_2.35-0ubuntu3.1_amd64.deb ...
Unpacking libc-dev-bin (2.35-0ubuntu3.1) ...
Selecting previously unselected package linux-libc-dev:amd64.
Preparing to unpack .../016-linux-libc-dev_5.15.0-52.58_amd64.deb ...
Unpacking linux-libc-dev:amd64 (5.15.0-52.58) ...
Selecting previously unselected package libcrypt-dev:amd64.
Preparing to unpack .../017-libcrypt-dev_1%3a4.4.27-1_amd64.deb ...
Unpacking libcrypt-dev:amd64 (1:4.4.27-1) ...
Selecting previously unselected package rpcsvc-proto.
Preparing to unpack .../018-rpcsvc-proto_1.4.2-0ubuntu6_amd64.deb ...
Unpacking rpcsvc-proto (1.4.2-0ubuntu6) ...
Selecting previously unselected package libtirpc-dev:amd64.
Preparing to unpack .../019-libtirpc-dev_1.3.2-2ubuntu0.1_amd64.deb ...
Unpacking libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...
Selecting previously unselected package libnsl-dev:amd64.
Preparing to unpack .../020-libnsl-dev_1.3.0-2build2_amd64.deb ...
Unpacking libnsl-dev:amd64 (1.3.0-2build2) ...
Selecting previously unselected package libc6-dev:amd64.
Preparing to unpack .../021-libc6-dev_2.35-0ubuntu3.1_amd64.deb ...
Unpacking libc6-dev:amd64 (2.35-0ubuntu3.1) ...
Selecting previously unselected package zlib1g-dev:amd64.
Preparing to unpack .../022-zlib1g-dev_1%3a1.2.11.dfsg-2ubuntu9.2_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu9.2) ...
Selecting previously unselected package libmysqlclient-dev.
Preparing to unpack .../023-libmysqlclient-dev_8.0.31-0ubuntu0.22.04.1_amd64.deb ...
Unpacking libmysqlclient-dev (8.0.31-0ubuntu0.22.04.1) ...
Selecting previously unselected package default-libmysqlclient-dev:amd64.
Preparing to unpack .../024-default-libmysqlclient-dev_1.0.8_amd64.deb ...
Unpacking default-libmysqlclient-dev:amd64 (1.0.8) ...
Selecting previously unselected package libcc1-0:amd64.
Preparing to unpack .../025-libcc1-0_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libcc1-0:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libgomp1:amd64.
Preparing to unpack .../026-libgomp1_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libgomp1:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libitm1:amd64.
Preparing to unpack .../027-libitm1_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libitm1:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libatomic1:amd64.
Preparing to unpack .../028-libatomic1_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libatomic1:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libasan6:amd64.
Preparing to unpack .../029-libasan6_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libasan6:amd64 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package liblsan0:amd64.
Preparing to unpack .../030-liblsan0_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking liblsan0:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libtsan0:amd64.
Preparing to unpack .../031-libtsan0_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libtsan0:amd64 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libubsan1:amd64.
Preparing to unpack .../032-libubsan1_12.1.0-2ubuntu1~22.04_amd64.deb ...
Unpacking libubsan1:amd64 (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libgcc-11-dev:amd64.
Preparing to unpack .../033-libgcc-11-dev_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libgcc-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package gcc-11.
Preparing to unpack .../034-gcc-11_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking gcc-11 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package gcc.
Preparing to unpack .../035-gcc_4%3a11.2.0-1ubuntu1_amd64.deb ...
Unpacking gcc (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package hdf5-helpers.
Preparing to unpack .../036-hdf5-helpers_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking hdf5-helpers (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package icu-devtools.
Preparing to unpack .../037-icu-devtools_70.1-2_amd64.deb ...
Unpacking icu-devtools (70.1-2) ...
Selecting previously unselected package libaom-dev:amd64.
Preparing to unpack .../038-libaom-dev_3.3.0-1_amd64.deb ...
Unpacking libaom-dev:amd64 (3.3.0-1) ...
Selecting previously unselected package libblas-dev:amd64.
Preparing to unpack .../039-libblas-dev_3.10.0-2ubuntu1_amd64.deb ...
Unpacking libblas-dev:amd64 (3.10.0-2ubuntu1) ...
Selecting previously unselected package liblapack-dev:amd64.
Preparing to unpack .../040-liblapack-dev_3.10.0-2ubuntu1_amd64.deb ...
Unpacking liblapack-dev:amd64 (3.10.0-2ubuntu1) ...
Selecting previously unselected package libarpack2-dev:amd64.
Preparing to unpack .../041-libarpack2-dev_3.8.0-1_amd64.deb ...
Unpacking libarpack2-dev:amd64 (3.8.0-1) ...
Selecting previously unselected package libhdf5-fortran-102:amd64.
Preparing to unpack .../042-libhdf5-fortran-102_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-fortran-102:amd64 (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libhdf5-hl-fortran-100:amd64.
Preparing to unpack .../043-libhdf5-hl-fortran-100_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-hl-fortran-100:amd64 (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libhdf5-cpp-103-1:amd64.
Preparing to unpack .../044-libhdf5-cpp-103-1_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-cpp-103-1:amd64 (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libhdf5-hl-cpp-100:amd64.
Preparing to unpack .../045-libhdf5-hl-cpp-100_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-hl-cpp-100:amd64 (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libjpeg-turbo8-dev:amd64.
Preparing to unpack .../046-libjpeg-turbo8-dev_2.1.2-0ubuntu1_amd64.deb ...
Unpacking libjpeg-turbo8-dev:amd64 (2.1.2-0ubuntu1) ...
Selecting previously unselected package libjpeg8-dev:amd64.
Preparing to unpack .../047-libjpeg8-dev_8c-2ubuntu10_amd64.deb ...
Unpacking libjpeg8-dev:amd64 (8c-2ubuntu10) ...
Selecting previously unselected package libjpeg-dev:amd64.
Preparing to unpack .../048-libjpeg-dev_8c-2ubuntu10_amd64.deb ...
Unpacking libjpeg-dev:amd64 (8c-2ubuntu10) ...
Selecting previously unselected package libaec-dev:amd64.
Preparing to unpack .../049-libaec-dev_1.0.6-1_amd64.deb ...
Unpacking libaec-dev:amd64 (1.0.6-1) ...
Selecting previously unselected package libcurl4-openssl-dev:amd64.
Preparing to unpack .../050-libcurl4-openssl-dev_7.81.0-1ubuntu1.6_amd64.deb ...
Unpacking libcurl4-openssl-dev:amd64 (7.81.0-1ubuntu1.6) ...
Selecting previously unselected package libhdf5-dev.
Preparing to unpack .../051-libhdf5-dev_1.10.7+repack-4ubuntu2_amd64.deb ...
Unpacking libhdf5-dev (1.10.7+repack-4ubuntu2) ...
Selecting previously unselected package libsuperlu-dev:amd64.
Preparing to unpack .../052-libsuperlu-dev_5.3.0+dfsg1-2_amd64.deb ...
Unpacking libsuperlu-dev:amd64 (5.3.0+dfsg1-2) ...
Selecting previously unselected package libarmadillo-dev.
Preparing to unpack .../053-libarmadillo-dev_1%3a10.8.2+dfsg-1_amd64.deb ...
Unpacking libarmadillo-dev (1:10.8.2+dfsg-1) ...
Selecting previously unselected package libblosc-dev.
Preparing to unpack .../054-libblosc-dev_1.21.1+ds2-2_amd64.deb ...
Unpacking libblosc-dev (1.21.1+ds2-2) ...
Selecting previously unselected package libstdc++-11-dev:amd64.
Preparing to unpack .../055-libstdc++-11-dev_11.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libstdc++-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libboost1.74-dev:amd64.
Preparing to unpack .../056-libboost1.74-dev_1.74.0-14ubuntu3_amd64.deb ...
Unpacking libboost1.74-dev:amd64 (1.74.0-14ubuntu3) ...
Selecting previously unselected package libboost-dev:amd64.
Preparing to unpack .../057-libboost-dev_1.74.0.3ubuntu7_amd64.deb ...
Unpacking libboost-dev:amd64 (1.74.0.3ubuntu7) ...
Selecting previously unselected package libxpm4:amd64.
Preparing to unpack .../058-libxpm4_1%3a3.5.12-1build2_amd64.deb ...
Unpacking libxpm4:amd64 (1:3.5.12-1build2) ...
Selecting previously unselected package libgd3:amd64.
Preparing to unpack .../059-libgd3_2.3.0-2ubuntu2_amd64.deb ...
Unpacking libgd3:amd64 (2.3.0-2ubuntu2) ...
Selecting previously unselected package libc-devtools.
Preparing to unpack .../060-libc-devtools_2.35-0ubuntu3.1_amd64.deb ...
Unpacking libc-devtools (2.35-0ubuntu3.1) ...
Selecting previously unselected package libcfitsio-dev:amd64.
Preparing to unpack .../061-libcfitsio-dev_4.0.0-1_amd64.deb ...
Unpacking libcfitsio-dev:amd64 (4.0.0-1) ...
Selecting previously unselected package libcfitsio-doc.
Preparing to unpack .../062-libcfitsio-doc_4.0.0-1_all.deb ...
Unpacking libcfitsio-doc (4.0.0-1) ...
Selecting previously unselected package libcharls-dev:amd64.
Preparing to unpack .../063-libcharls-dev_2.3.4-1_amd64.deb ...
Unpacking libcharls-dev:amd64 (2.3.4-1) ...
Selecting previously unselected package libdav1d-dev:amd64.
Preparing to unpack .../064-libdav1d-dev_0.9.2-1_amd64.deb ...
Unpacking libdav1d-dev:amd64 (0.9.2-1) ...
Selecting previously unselected package libde265-dev:amd64.
Preparing to unpack .../065-libde265-dev_1.0.8-1_amd64.deb ...
Unpacking libde265-dev:amd64 (1.0.8-1) ...
Selecting previously unselected package libdeflate-dev:amd64.
Preparing to unpack .../066-libdeflate-dev_1.10-2_amd64.deb ...
Unpacking libdeflate-dev:amd64 (1.10-2) ...
Selecting previously unselected package libdpkg-perl.
Preparing to unpack .../067-libdpkg-perl_1.21.1ubuntu2.1_all.deb ...
Unpacking libdpkg-perl (1.21.1ubuntu2.1) ...
Selecting previously unselected package libexpat1-dev:amd64.
Preparing to unpack .../068-libexpat1-dev_2.4.7-1_amd64.deb ...
Unpacking libexpat1-dev:amd64 (2.4.7-1) ...
Selecting previously unselected package libfile-fcntllock-perl.
Preparing to unpack .../069-libfile-fcntllock-perl_0.22-3build7_amd64.deb ...
Unpacking libfile-fcntllock-perl (0.22-3build7) ...
Selecting previously unselected package libfyba-dev:amd64.
Preparing to unpack .../070-libfyba-dev_4.1.1-7_amd64.deb ...
Unpacking libfyba-dev:amd64 (4.1.1-7) ...
Selecting previously unselected package libgeos-dev.
Preparing to unpack .../071-libgeos-dev_3.10.2-1_amd64.deb ...
Unpacking libgeos-dev (3.10.2-1) ...
Selecting previously unselected package libgif-dev.
Preparing to unpack .../072-libgif-dev_5.1.9-2build2_amd64.deb ...
Unpacking libgif-dev (5.1.9-2build2) ...
Selecting previously unselected package libx265-dev:amd64.
Preparing to unpack .../073-libx265-dev_3.5-2_amd64.deb ...
Unpacking libx265-dev:amd64 (3.5-2) ...
Selecting previously unselected package libheif-dev:amd64.
Preparing to unpack .../074-libheif-dev_1.12.0-2build1_amd64.deb ...
Unpacking libheif-dev:amd64 (1.12.0-2build1) ...
Selecting previously unselected package libicu-dev:amd64.
Preparing to unpack .../075-libicu-dev_70.1-2_amd64.deb ...
Unpacking libicu-dev:amd64 (70.1-2) ...
Selecting previously unselected package libkmlconvenience1:amd64.
Preparing to unpack .../076-libkmlconvenience1_1.3.0-9_amd64.deb ...
Unpacking libkmlconvenience1:amd64 (1.3.0-9) ...
Selecting previously unselected package libkmlregionator1:amd64.
Preparing to unpack .../077-libkmlregionator1_1.3.0-9_amd64.deb ...
Unpacking libkmlregionator1:amd64 (1.3.0-9) ...
Selecting previously unselected package libkmlxsd1:amd64.
Preparing to unpack .../078-libkmlxsd1_1.3.0-9_amd64.deb ...
Unpacking libkmlxsd1:amd64 (1.3.0-9) ...
Selecting previously unselected package libltdl-dev:amd64.
Preparing to unpack .../079-libltdl-dev_2.4.6-15build2_amd64.deb ...
Unpacking libltdl-dev:amd64 (2.4.6-15build2) ...
Selecting previously unselected package libminizip-dev:amd64.
Preparing to unpack .../080-libminizip-dev_1.1-8build1_amd64.deb ...
Unpacking libminizip-dev:amd64 (1.1-8build1) ...
Selecting previously unselected package libnetcdf-dev.
Preparing to unpack .../081-libnetcdf-dev_1%3a4.8.1-1_amd64.deb ...
Unpacking libnetcdf-dev (1:4.8.1-1) ...
Selecting previously unselected package libodbccr2:amd64.
Preparing to unpack .../082-libodbccr2_2.3.9-5_amd64.deb ...
Unpacking libodbccr2:amd64 (2.3.9-5) ...
Selecting previously unselected package libogdi-dev.
Preparing to unpack .../083-libogdi-dev_4.1.0+ds-5_amd64.deb ...
Unpacking libogdi-dev (4.1.0+ds-5) ...
Selecting previously unselected package libpcre2-16-0:amd64.
Preparing to unpack .../084-libpcre2-16-0_10.39-3ubuntu0.1_amd64.deb ...
Unpacking libpcre2-16-0:amd64 (10.39-3ubuntu0.1) ...
Selecting previously unselected package libpcre2-32-0:amd64.
Preparing to unpack .../085-libpcre2-32-0_10.39-3ubuntu0.1_amd64.deb ...
Unpacking libpcre2-32-0:amd64 (10.39-3ubuntu0.1) ...
Selecting previously unselected package libpcre2-posix3:amd64.
Preparing to unpack .../086-libpcre2-posix3_10.39-3ubuntu0.1_amd64.deb ...
Unpacking libpcre2-posix3:amd64 (10.39-3ubuntu0.1) ...
Selecting previously unselected package libpcre2-dev:amd64.
Preparing to unpack .../087-libpcre2-dev_10.39-3ubuntu0.1_amd64.deb ...
Unpacking libpcre2-dev:amd64 (10.39-3ubuntu0.1) ...
Selecting previously unselected package libpng-dev:amd64.
Preparing to unpack .../088-libpng-dev_1.6.37-3build5_amd64.deb ...
Unpacking libpng-dev:amd64 (1.6.37-3build5) ...
Selecting previously unselected package libpng-tools.
Preparing to unpack .../089-libpng-tools_1.6.37-3build5_amd64.deb ...
Unpacking libpng-tools (1.6.37-3build5) ...
Selecting previously unselected package libpoppler-dev:amd64.
Preparing to unpack .../090-libpoppler-dev_22.02.0-2ubuntu0.1_amd64.deb ...
Unpacking libpoppler-dev:amd64 (22.02.0-2ubuntu0.1) ...
Selecting previously unselected package libpoppler-private-dev:amd64.
Preparing to unpack .../091-libpoppler-private-dev_22.02.0-2ubuntu0.1_amd64.deb ...
Unpacking libpoppler-private-dev:amd64 (22.02.0-2ubuntu0.1) ...
Selecting previously unselected package libpq-dev.
Preparing to unpack .../092-libpq-dev_14.5-0ubuntu0.22.04.1_amd64.deb ...
Unpacking libpq-dev (14.5-0ubuntu0.22.04.1) ...
Selecting previously unselected package libqhull8.0:amd64.
Preparing to unpack .../093-libqhull8.0_2020.2-4_amd64.deb ...
Unpacking libqhull8.0:amd64 (2020.2-4) ...
Selecting previously unselected package libqhullcpp8.0:amd64.
Preparing to unpack .../094-libqhullcpp8.0_2020.2-4_amd64.deb ...
Unpacking libqhullcpp8.0:amd64 (2020.2-4) ...
Selecting previously unselected package libqhull-dev:amd64.
Preparing to unpack .../095-libqhull-dev_2020.2-4_amd64.deb ...
Unpacking libqhull-dev:amd64 (2020.2-4) ...
Selecting previously unselected package librttopo-dev:amd64.
Preparing to unpack .../096-librttopo-dev_1.1.0-2_amd64.deb ...
Unpacking librttopo-dev:amd64 (1.1.0-2) ...
Selecting previously unselected package libsqlite3-dev:amd64.
Preparing to unpack .../097-libsqlite3-dev_3.37.2-2ubuntu0.1_amd64.deb ...
Unpacking libsqlite3-dev:amd64 (3.37.2-2ubuntu0.1) ...
Selecting previously unselected package libjbig-dev:amd64.
Preparing to unpack .../098-libjbig-dev_2.1-3.1build3_amd64.deb ...
Unpacking libjbig-dev:amd64 (2.1-3.1build3) ...
Selecting previously unselected package liblzma-dev:amd64.
Preparing to unpack .../099-liblzma-dev_5.2.5-2ubuntu1_amd64.deb ...
Unpacking liblzma-dev:amd64 (5.2.5-2ubuntu1) ...
Selecting previously unselected package libtiffxx5:amd64.
Preparing to unpack .../100-libtiffxx5_4.3.0-6ubuntu0.2_amd64.deb ...
Unpacking libtiffxx5:amd64 (4.3.0-6ubuntu0.2) ...
Selecting previously unselected package libtiff-dev:amd64.
Preparing to unpack .../101-libtiff-dev_4.3.0-6ubuntu0.2_amd64.deb ...
Unpacking libtiff-dev:amd64 (4.3.0-6ubuntu0.2) ...
Selecting previously unselected package libtool.
Preparing to unpack .../102-libtool_2.4.6-15build2_all.deb ...
Unpacking libtool (2.4.6-15build2) ...
Selecting previously unselected package liburiparser-dev.
Preparing to unpack .../103-liburiparser-dev_0.9.6+dfsg-1_amd64.deb ...
Unpacking liburiparser-dev (0.9.6+dfsg-1) ...
Selecting previously unselected package libwebpdemux2:amd64.
Preparing to unpack .../104-libwebpdemux2_1.2.2-2_amd64.deb ...
Unpacking libwebpdemux2:amd64 (1.2.2-2) ...
Selecting previously unselected package libwebpmux3:amd64.
Preparing to unpack .../105-libwebpmux3_1.2.2-2_amd64.deb ...
Unpacking libwebpmux3:amd64 (1.2.2-2) ...
Selecting previously unselected package libxerces-c-dev:amd64.
Preparing to unpack .../106-libxerces-c-dev_3.2.3+debian-3build1_amd64.deb ...
Unpacking libxerces-c-dev:amd64 (3.2.3+debian-3build1) ...
Selecting previously unselected package libxml2-dev:amd64.
Preparing to unpack .../107-libxml2-dev_2.9.13+dfsg-1ubuntu0.1_amd64.deb ...
Unpacking libxml2-dev:amd64 (2.9.13+dfsg-1ubuntu0.1) ...
Selecting previously unselected package manpages-dev.
Preparing to unpack .../108-manpages-dev_5.10-1ubuntu1_all.deb ...
Unpacking manpages-dev (5.10-1ubuntu1) ...
Selecting previously unselected package pkg-config.
Preparing to unpack .../109-pkg-config_0.29.2-1ubuntu3_amd64.deb ...
Unpacking pkg-config (0.29.2-1ubuntu3) ...
Selecting previously unselected package libfreexl-dev:amd64.
Preparing to unpack .../110-libfreexl-dev_1.0.6-1_amd64.deb ...
Unpacking libfreexl-dev:amd64 (1.0.6-1) ...
Selecting previously unselected package libproj-dev:amd64.
Preparing to unpack .../111-libproj-dev_8.2.1-1_amd64.deb ...
Unpacking libproj-dev:amd64 (8.2.1-1) ...
Selecting previously unselected package libgeotiff-dev:amd64.
Preparing to unpack .../112-libgeotiff-dev_1.7.0-2build1_amd64.deb ...
Unpacking libgeotiff-dev:amd64 (1.7.0-2build1) ...
Selecting previously unselected package libhdf4-alt-dev.
Preparing to unpack .../113-libhdf4-alt-dev_4.2.15-4_amd64.deb ...
Unpacking libhdf4-alt-dev (4.2.15-4) ...
Selecting previously unselected package libjson-c-dev:amd64.
Preparing to unpack .../114-libjson-c-dev_0.15-3~ubuntu1.22.04.1_amd64.deb ...
Unpacking libjson-c-dev:amd64 (0.15-3~ubuntu1.22.04.1) ...
Selecting previously unselected package libkml-dev:amd64.
Preparing to unpack .../115-libkml-dev_1.3.0-9_amd64.deb ...
Unpacking libkml-dev:amd64 (1.3.0-9) ...
Selecting previously unselected package liblz4-dev:amd64.
Preparing to unpack .../116-liblz4-dev_1.9.3-2build2_amd64.deb ...
Unpacking liblz4-dev:amd64 (1.9.3-2build2) ...
Selecting previously unselected package libopenjp2-7-dev:amd64.
Preparing to unpack .../117-libopenjp2-7-dev_2.4.0-6_amd64.deb ...
Unpacking libopenjp2-7-dev:amd64 (2.4.0-6) ...
Selecting previously unselected package libspatialite-dev:amd64.
Preparing to unpack .../118-libspatialite-dev_5.0.1-2build2_amd64.deb ...
Unpacking libspatialite-dev:amd64 (5.0.1-2build2) ...
Selecting previously unselected package libwebp-dev:amd64.
Preparing to unpack .../119-libwebp-dev_1.2.2-2_amd64.deb ...
Unpacking libwebp-dev:amd64 (1.2.2-2) ...
Selecting previously unselected package unixodbc-dev:amd64.
Preparing to unpack .../120-unixodbc-dev_2.3.9-5_amd64.deb ...
Unpacking unixodbc-dev:amd64 (2.3.9-5) ...
Selecting previously unselected package libgdal-dev.
Preparing to unpack .../121-libgdal-dev_3.4.1+dfsg-1build4_amd64.deb ...
Unpacking libgdal-dev (3.4.1+dfsg-1build4) ...
Setting up libpoppler-dev:amd64 (22.02.0-2ubuntu0.1) ...
Setting up gcc-11-base:amd64 (11.3.0-1ubuntu1~22.04) ...
Setting up librttopo-dev:amd64 (1.1.0-2) ...
Setting up manpages-dev (5.10-1ubuntu1) ...
Setting up libcharls-dev:amd64 (2.3.4-1) ...
Setting up libcfitsio-dev:amd64 (4.0.0-1) ...
Setting up libzstd-dev:amd64 (1.4.8+dfsg-3build1) ...
Setting up libxpm4:amd64 (1:3.5.12-1build2) ...
Setting up hdf5-helpers (1.10.7+repack-4ubuntu2) ...
Setting up libkmlconvenience1:amd64 (1.3.0-9) ...
Setting up libpng-tools (1.6.37-3build5) ...
Setting up libqhull8.0:amd64 (2020.2-4) ...
Setting up libfile-fcntllock-perl (0.22-3build7) ...
Setting up libblosc-dev (1.21.1+ds2-2) ...
Setting up libjson-c-dev:amd64 (0.15-3~ubuntu1.22.04.1) ...
Setting up libfreexl-dev:amd64 (1.0.6-1) ...
Setting up libfyba-dev:amd64 (4.1.1-7) ...
Setting up libwebpdemux2:amd64 (1.2.2-2) ...
Setting up libpoppler-private-dev:amd64 (22.02.0-2ubuntu0.1) ...
Setting up libsqlite3-0:amd64 (3.37.2-2ubuntu0.1) ...
Setting up libaec-dev:amd64 (1.0.6-1) ...
Setting up libjbig-dev:amd64 (2.1-3.1build3) ...
Setting up linux-libc-dev:amd64 (5.15.0-52.58) ...
Setting up m4 (1.4.18-5ubuntu2) ...
Setting up libgomp1:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up bzip2 (1.0.8-5build1) ...
Setting up libpcre2-16-0:amd64 (10.39-3ubuntu0.1) ...
Setting up libasan6:amd64 (11.3.0-1ubuntu1~22.04) ...
Setting up liburiparser-dev (0.9.6+dfsg-1) ...
Setting up libaom-dev:amd64 (3.3.0-1) ...
Setting up libminizip-dev:amd64 (1.1-8build1) ...
Setting up autotools-dev (20220109.1) ...
Setting up libpcre2-32-0:amd64 (10.39-3ubuntu0.1) ...
Setting up libhdf5-hl-cpp-100:amd64 (1.10.7+repack-4ubuntu2) ...
Setting up libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...
Setting up rpcsvc-proto (1.4.2-0ubuntu6) ...
Setting up libde265-dev:amd64 (1.0.8-1) ...
Setting up libopenjp2-7-dev:amd64 (2.4.0-6) ...
Setting up libkmlregionator1:amd64 (1.3.0-9) ...
Setting up libgeos-dev (3.10.2-1) ...
Setting up libdav1d-dev:amd64 (0.9.2-1) ...
Setting up libx265-dev:amd64 (3.5-2) ...
Setting up libgd3:amd64 (2.3.0-2ubuntu2) ...
Setting up libssl-dev:amd64 (3.0.2-0ubuntu1.7) ...
Setting up libmpc3:amd64 (1.2.1-2build1) ...
Setting up libatomic1:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up libhdf5-fortran-102:amd64 (1.10.7+repack-4ubuntu2) ...
Setting up icu-devtools (70.1-2) ...
Setting up liblz4-dev:amd64 (1.9.3-2build2) ...
Setting up libqhullcpp8.0:amd64 (2020.2-4) ...
Setting up libqhull-dev:amd64 (2020.2-4) ...
Setting up libdpkg-perl (1.21.1ubuntu2.1) ...
Setting up autoconf (2.71-2) ...
Setting up liblzma-dev:amd64 (5.2.5-2ubuntu1) ...
Setting up libubsan1:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up libpcre2-posix3:amd64 (10.39-3ubuntu0.1) ...
Setting up libnsl-dev:amd64 (1.3.0-2build2) ...
Setting up libgif-dev (5.1.9-2build2) ...
Setting up libcrypt-dev:amd64 (1:4.4.27-1) ...
Setting up libhdf5-cpp-103-1:amd64 (1.10.7+repack-4ubuntu2) ...
Setting up libhdf5-hl-fortran-100:amd64 (1.10.7+repack-4ubuntu2) ...
Setting up libcurl4:amd64 (7.81.0-1ubuntu1.6) ...
Setting up curl (7.81.0-1ubuntu1.6) ...
Setting up libisl23:amd64 (0.24-2build1) ...
Setting up libc-dev-bin (2.35-0ubuntu3.1) ...
Setting up libwebpmux3:amd64 (1.2.2-2) ...
Setting up libdeflate-dev:amd64 (1.10-2) ...
Setting up libogdi-dev (4.1.0+ds-5) ...
Setting up libcfitsio-doc (4.0.0-1) ...
Setting up libcc1-0:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up liblsan0:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up libblas-dev:amd64 (3.10.0-2ubuntu1) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/blas/libblas.so to provide /usr/lib/x86_64-linux-gnu/libblas.so (libblas.so-x86_64-linux-gnu) in auto mode
Setting up libitm1:amd64 (12.1.0-2ubuntu1~22.04) ...
Setting up libkmlxsd1:amd64 (1.3.0-9) ...
Setting up libtiffxx5:amd64 (4.3.0-6ubuntu0.2) ...
Setting up libc-devtools (2.35-0ubuntu3.1) ...
Setting up libodbccr2:amd64 (2.3.9-5) ...
Setting up libtsan0:amd64 (11.3.0-1ubuntu1~22.04) ...
Setting up automake (1:1.16.5-1.3) ...
update-alternatives: using /usr/bin/automake-1.16 to provide /usr/bin/automake (automake) in auto mode
Setting up cpp-11 (11.3.0-1ubuntu1~22.04) ...
Setting up libheif-dev:amd64 (1.12.0-2build1) ...
Setting up libpq-dev (14.5-0ubuntu0.22.04.1) ...
Setting up libltdl-dev:amd64 (2.4.6-15build2) ...
Setting up libwebp-dev:amd64 (1.2.2-2) ...
Setting up libcurl4-openssl-dev:amd64 (7.81.0-1ubuntu1.6) ...
Setting up liblapack-dev:amd64 (3.10.0-2ubuntu1) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/lapack/liblapack.so to provide /usr/lib/x86_64-linux-gnu/liblapack.so (liblapack.so-x86_64-linux-gnu) in auto mode
Setting up pkg-config (0.29.2-1ubuntu3) ...
Setting up libgcc-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...
Setting up gcc-11 (11.3.0-1ubuntu1~22.04) ...
Setting up cpp (4:11.2.0-1ubuntu1) ...
Setting up libc6-dev:amd64 (2.35-0ubuntu3.1) ...
Setting up libsuperlu-dev:amd64 (5.3.0+dfsg1-2) ...
Setting up libicu-dev:amd64 (70.1-2) ...
Setting up unixodbc-dev:amd64 (2.3.9-5) ...
Setting up libjpeg-turbo8-dev:amd64 (2.1.2-0ubuntu1) ...
Setting up libarpack2-dev:amd64 (3.8.0-1) ...
Setting up libpcre2-dev:amd64 (10.39-3ubuntu0.1) ...
Setting up libtool (2.4.6-15build2) ...
Setting up gcc (4:11.2.0-1ubuntu1) ...
Setting up libxml2-dev:amd64 (2.9.13+dfsg-1ubuntu0.1) ...
Setting up libexpat1-dev:amd64 (2.4.7-1) ...
Setting up libsqlite3-dev:amd64 (3.37.2-2ubuntu0.1) ...
Setting up libxerces-c-dev:amd64 (3.2.3+debian-3build1) ...
Setting up libstdc++-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...
Setting up zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu9.2) ...
Setting up libjpeg8-dev:amd64 (8c-2ubuntu10) ...
Setting up libmysqlclient-dev (8.0.31-0ubuntu0.22.04.1) ...
Setting up default-libmysqlclient-dev:amd64 (1.0.8) ...
Setting up libboost1.74-dev:amd64 (1.74.0-14ubuntu3) ...
Setting up libpng-dev:amd64 (1.6.37-3build5) ...
Setting up libjpeg-dev:amd64 (8c-2ubuntu10) ...
Setting up libtiff-dev:amd64 (4.3.0-6ubuntu0.2) ...
Setting up libhdf5-dev (1.10.7+repack-4ubuntu2) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/pkgconfig/hdf5-serial.pc to provide /usr/lib/x86_64-linux-gnu/pkgconfig/hdf5.pc (hdf5.pc) in auto mode
Setting up libproj-dev:amd64 (8.2.1-1) ...
Setting up libnetcdf-dev (1:4.8.1-1) ...
Setting up libspatialite-dev:amd64 (5.0.1-2build2) ...
Setting up libboost-dev:amd64 (1.74.0.3ubuntu7) ...
Setting up libkml-dev:amd64 (1.3.0-9) ...
Setting up libgeotiff-dev:amd64 (1.7.0-2build1) ...
Setting up libarmadillo-dev (1:10.8.2+dfsg-1) ...
Setting up libhdf4-alt-dev (4.2.15-4) ...
Setting up libgdal-dev (3.4.1+dfsg-1build4) ...
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
/sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link

Processing triggers for man-db (2.10.2-1) ...
Processing triggers for install-info (6.8-4build1) ...

From lists at home.gofferje.net  Thu Nov 10 11:26:52 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Thu, 10 Nov 2022 21:26:52 +0200
Subject: [gdal-dev] Bug/feature: OGR VSICURL does not handle gzip compression
Message-ID: <5557916.LvFx2qVVIh@andromeda.gofferje.net>

Hi,

I'm trying to import traffic situation data in GeoJSON format from the Finnish 
Road Administration at

https://tie.digitraffic.fi/api/v3/data/traffic-messages/simple?
inactiveHours=0&includeAreaGeometry=false&situationType=TRAFFIC_ANNOUNCEMENT

Unfortunately, the server is configured so that it only accepts requests with 
"Accept-encoding: gzip" set - which vsicurl can't/won't handle. It would 
probably generally be useful if vsicurl would offer gzip encoding because most 
servers can handle it and it does save quite a bit of traffic on text-based 
data like GeoJSON.

BR: Stefan

-- 
 (o_   Stefan Gofferje            | SCLT, MCP, CCSA
 //\   Reg'd Linux User #247167   | VCP #2263
 V_/_  https://www.gofferje.net   | https://www.saakeskus.fi 




From osgeo.mailinglist at gmail.com  Thu Nov 10 18:59:55 2022
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Fri, 11 Nov 2022 03:59:55 +0100
Subject: [gdal-dev] Bug/feature: OGR VSICURL does not handle gzip
 compression
In-Reply-To: <5557916.LvFx2qVVIh@andromeda.gofferje.net>
References: <5557916.LvFx2qVVIh@andromeda.gofferje.net>
Message-ID: <CACPZzQ329BoE5ED=+pv0YDQ_W+wFqxV-2KU2pFMidk9QN28yAA@mail.gmail.com>

Hi,

Use the CURL option available through GDAL e.g
https://trac.osgeo.org/gdal/wiki/ConfigOptions#CPL_CURL_GZIP (also
documented at https://gdal.org/user/configoptions.html)

To illustrate, try the following

ogrinfo -so --config CPL_CURL_GZIP YES "
https://tie.digitraffic.fi/api/v3/data/traffic-messages/simple?inactiveHours=0&includeAreaGeometry=false&situationType=TRAFFIC_ANNOUNCEMENT"
OGRGeoJSON


Regards

Thomas Gratier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221111/1ef86c7e/attachment.htm>

From code at christianroth.dev  Thu Nov 10 22:28:39 2022
From: code at christianroth.dev (Christian Roth)
Date: Fri, 11 Nov 2022 07:28:39 +0100
Subject: [gdal-dev] Parallel s3 requests with vsis3?
Message-ID: <1F4E7CF2-3458-4B30-ACBC-0970EB94C104@christianroth.dev>

Hi,

I am trying to understand whether it is possible to read with parallel requests when using the vsis3 virtual file system - I am currently experimenting with a regular gtiff file and have not yet found a way to read with speeds beyond s3 single-read bandwidth.

I am no expert in http communication, so I would be very happy if you point out misconceptions. My thought process is:

As s3 does not support multiple ranges per request (see https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObject.html), I assume that GDAL_HTTP_MULTIPLEX would not be an option.

The old documentation (https://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_HTTP_MULTIRANGE) made me hopeful that maybe I can convince gdal to generate multi-range requests, which it then could send in parallel as single-range request via several HTTP connections.
> (GDAL >= 2.3) Can be set to SINGLE_GET, SERIAL or YES. Defaults to YES. Controls how ReadMultiRange() requests emitted by the GeoTIFF driver are satisfied. SINGLE_GET means that several ranges will be expressed in the Range header of a single GET requests, which is not supported by a majority of servers (including AWS S3 or Google GCS). SERIAL means that each range will be requested sequentially. YES means that each range will be requested in parallel, using HTTP/2 multiplexing or several HTTP connections.

(Option seems to still exist, but uses PARALLEL and SERIAL now - found here: https://github.com/OSGeo/gdal/blob/8633aa6f0c57d38b768059ac5dc137531421b9d7/port/cpl_vsil_curl.cpp#L3405)

I tried playing around with GDAL_HTTP_VERSION and GDAL_HTTP_MULTIRANGE, but it doesn?t seem they change the parallelism (at least I don?t seem to be able to get beyond ~20Mb/s even with optimal reading conditions).

Is currently at all possible to get parallel reads from S3 - if so what settings would I need?

Thanks so much,
Christian 





From lists at home.gofferje.net  Fri Nov 11 00:43:27 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Fri, 11 Nov 2022 10:43:27 +0200
Subject: [gdal-dev] Bug/feature: OGR VSICURL does not handle gzip
 compression
In-Reply-To: <CACPZzQ329BoE5ED=+pv0YDQ_W+wFqxV-2KU2pFMidk9QN28yAA@mail.gmail.com>
References: <5557916.LvFx2qVVIh@andromeda.gofferje.net>
 <CACPZzQ329BoE5ED=+pv0YDQ_W+wFqxV-2KU2pFMidk9QN28yAA@mail.gmail.com>
Message-ID: <8dcd9d62-a367-6af9-a481-a53b7dc9e7b7@home.gofferje.net>

Hi,

On 11/11/22 04:59, Thomas Gratier wrote:
> Use the CURL option available through GDAL e.g 
> https://trac.osgeo.org/gdal/wiki/ConfigOptions#CPL_CURL_GZIP 
> <https://trac.osgeo.org/gdal/wiki/ConfigOptions#CPL_CURL_GZIP> (also 
> documented at https://gdal.org/user/configoptions.html 
> <https://gdal.org/user/configoptions.html>)
> 
> To illustrate, try the following
> 
> ogrinfo -so --config CPL_CURL_GZIP YES 
> "https://tie.digitraffic.fi/api/v3/data/traffic-messages/simple?inactiveHours=0&includeAreaGeometry=false&situationType=TRAFFIC_ANNOUNCEMENT <https://tie.digitraffic.fi/api/v3/data/traffic-messages/simple?inactiveHours=0&includeAreaGeometry=false&situationType=TRAFFIC_ANNOUNCEMENT>" OGRGeoJSON

That works from the command line but I haven't found a way to pass 
options when using VSICURL in mapserver or QGIS.

-Stefan

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From even.rouault at spatialys.com  Fri Nov 11 02:41:01 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Nov 2022 11:41:01 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.0RC2 as final 3.6.0 release
In-Reply-To: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>
References: <ff2e7ece-6f9b-5baf-43d7-5be2df7f3ba5@spatialys.com>
Message-ID: <54b50666-70c6-065d-25bf-e0ab40ce1d1a@spatialys.com>

Hi,

I declare this motion passed with +1 from PSC members HowardB, JukkaR 
and me.

Even

Le 09/11/2022 ? 10:31, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.6.0RC2 as final 3.6.0 release
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Nov 11 03:04:20 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Nov 2022 12:04:20 +0100
Subject: [gdal-dev] GDAL 3.6.0 is released
Message-ID: <58a56b4e-ecfd-30ee-f1cc-86cd6d7557af@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 3.6.0. GDAL/OGR is a C++ geospatial data
access library for raster and vector file formats, databases and web 
services.
It includes bindings for several languages, and a variety of command line
tools.

 ?? http://gdal.org/

The 3.6.0 release is a new feature release with the following highlights:

* CMake is the only build system available in-tree. autoconf and nmake 
build systems have been removed
* [OpenFileGDB](https://gdal.org/drivers/vector/openfilegdb.html): write 
and update support (v10.x format only), without requiring any external 
dependency, with same (and actually larger) functional scope as write 
side of the FileGDB driver
* [RFC 
86](https://gdal.org/development/rfc/rfc86_column_oriented_api.html): 
Column-oriented read API for vector layers.
 ? Implemented in core, Arrow, Parquet, GPKG and FlatGeoBuf drivers
* Add read/write raster [JPEGXL 
driver](https://gdal.org/drivers/raster/jpegxl.html) for standalone 
JPEG-XL files. Requires libjxl
* Add [KTX2](https://gdal.org/drivers/raster/ktx2.html) and 
[BASISU](https://gdal.org/drivers/raster/basisu.html) read/write raster 
drivers for texture formats. Require [(forked) 
basisu](https://github.com/rouault/basis_universal/tree/cmake) library
* Vector layer API: table relationship discovery & creation, Upsert() 
operation
* GeoTIFF: add multi-threaded read capabilities (reqiures NUM_THREADS 
open option or GDAL_NUM_THREADS configuration option to be set)
* Multiple performance improvements in GPKG driver
* ogr_layer_algebra.py: promoted to official script (#1581)
* Code linting and security fixes
* Bump of shared lib major version
* Full release notes at https://github.com/OSGeo/gdal/blob/v3.6.0/NEWS.md

More complete information on the new features and fixes in the 3.6.0 
release can be found at:

 ? https://github.com/OSGeo/gdal/blob/v3.6.0/NEWS.md

The release can be downloaded from:
 ? * https://download.osgeo.org/gdal/3.6.0/gdal360.zip - source as a zip
 ? * https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0.tar.gz - source as 
.tar.gz
 ? * https://download.osgeo.org/gdal/3.6.0/gdal-3.6.0.tar.xz - source as 
.tar.xz
 ? * https://download.osgeo.org/gdal/3.6.0/gdalautotest-3.6.0.tar.gz - 
test suite
 ? * https://download.osgeo.org/gdal/3.6.0/gdal360doc.zip - 
documentation / website

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew.terry at centremaps.co.uk  Fri Nov 11 05:53:44 2022
From: andrew.terry at centremaps.co.uk (Andrew Terry)
Date: Fri, 11 Nov 2022 13:53:44 +0000
Subject: [gdal-dev] openfilegdb export
Message-ID: <AM6PR01MB49467E091B8F0E7873395177A1009@AM6PR01MB4946.eurprd01.prod.exchangelabs.com>

Hi,

Trying out the export to OpenFileGDB, using GDAL 3.7.0dev-5a6f99a78b installed with OSGeo4W

ogr2ogr -f "OpenFileGDB" test_filegdb.gdb PG:"dbname=dbname port=5432 host=dbhost user=dbusr" --optfile sql_filter.sql

This works for SHP and GeoPackage and the output is a EPSG 27700 Polygon geometries.

I get the following error:

ERROR 6: Unsupported geometry type
ERROR 1: Terminating translation prematurely after failed
translation from sql statement.

What geometry type is expected? I did try ST_Multi and ST_Force3D to see whether multipolygons etc are expected.

Hopefully I'm not missing something too obvious.

Thanks

Andy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221111/4d620cf7/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Nov 11 06:07:11 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Nov 2022 15:07:11 +0100
Subject: [gdal-dev] openfilegdb export
In-Reply-To: <AM6PR01MB49467E091B8F0E7873395177A1009@AM6PR01MB4946.eurprd01.prod.exchangelabs.com>
References: <AM6PR01MB49467E091B8F0E7873395177A1009@AM6PR01MB4946.eurprd01.prod.exchangelabs.com>
Message-ID: <acf51013-26e8-2aeb-46bc-bc8e899be27f@spatialys.com>

Andrew,

Can you paste the output of

ogrinfo -al -so PG:"dbname=dbname port=5432 host=dbhost user=dbusr" 
--optfile sql_filter.sql

so we can see the layer geometry type. I presume it is unknown.

GeoPackage supports geometry columns with unknown geometry type.

Shapefile requires a precise geometry type, but the shapefile driver has 
a heuristics to use the geometry type of the first feature as the layer 
geometry type, when the declared layer geometry type is unknown. The 
OpenFileGDB driver doesn't have that heuristics.

It is likely you need to add an explicit -nlt POLYGON or -nlt 
MULTIPOLYGON to your ogr2ogr invokation

Even


Le 11/11/2022 ? 14:53, Andrew Terry a ?crit?:
>
> Hi,
>
> Trying out the export to OpenFileGDB, using GDAL 3.7.0dev-5a6f99a78b 
> installed with OSGeo4W
>
> ogr2ogr -f "OpenFileGDB" test_filegdb.gdb PG:"dbname=dbname port=5432 
> host=dbhost user=dbusr" --optfile sql_filter.sql
>
> This works for SHP and GeoPackage and the output is a EPSG 27700 
> Polygon geometries.
>
> I get the following error:
>
> ERROR 6: Unsupported geometry type
>
> ERROR 1: Terminating translation prematurely after failed
>
> translation from sql statement.
>
> What geometry type is expected? I did try ST_Multi and ST_Force3D to 
> see whether multipolygons etc are expected.
>
> Hopefully I?m not missing something too obvious.
>
> Thanks
>
> Andy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221111/967c0d35/attachment.htm>

From andrew.terry at centremaps.co.uk  Fri Nov 11 06:27:10 2022
From: andrew.terry at centremaps.co.uk (Andrew Terry)
Date: Fri, 11 Nov 2022 14:27:10 +0000
Subject: [gdal-dev] openfilegdb export
In-Reply-To: <acf51013-26e8-2aeb-46bc-bc8e899be27f@spatialys.com>
References: <AM6PR01MB49467E091B8F0E7873395177A1009@AM6PR01MB4946.eurprd01.prod.exchangelabs.com>
 <acf51013-26e8-2aeb-46bc-bc8e899be27f@spatialys.com>
Message-ID: <AM6PR01MB4946DEF447E4F62FB3ED464AA1009@AM6PR01MB4946.eurprd01.prod.exchangelabs.com>

Thanks Even, -nlt POLYGON did indeed work for me.

Huge thanks as always for your (and every contributor?s) amazing work.

Andy


From: Even Rouault <even.rouault at spatialys.com>
Sent: 11 November 2022 14:07
To: Andrew Terry <andrew.terry at centremaps.co.uk>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] openfilegdb export


Andrew,

Can you paste the output of

ogrinfo -al -so PG:"dbname=dbname port=5432 host=dbhost user=dbusr" --optfile sql_filter.sql

so we can see the layer geometry type. I presume it is unknown.

GeoPackage supports geometry columns with unknown geometry type.

Shapefile requires a precise geometry type, but the shapefile driver has a heuristics to use the geometry type of the first feature as the layer geometry type, when the declared layer geometry type is unknown. The OpenFileGDB driver doesn't have that heuristics.

It is likely you need to add an explicit -nlt POLYGON or -nlt MULTIPOLYGON to your ogr2ogr invokation

Even


Le 11/11/2022 ? 14:53, Andrew Terry a ?crit :
Hi,

Trying out the export to OpenFileGDB, using GDAL 3.7.0dev-5a6f99a78b installed with OSGeo4W

ogr2ogr -f "OpenFileGDB" test_filegdb.gdb PG:"dbname=dbname port=5432 host=dbhost user=dbusr" --optfile sql_filter.sql

This works for SHP and GeoPackage and the output is a EPSG 27700 Polygon geometries.

I get the following error:

ERROR 6: Unsupported geometry type
ERROR 1: Terminating translation prematurely after failed
translation from sql statement.

What geometry type is expected? I did try ST_Multi and ST_Force3D to see whether multipolygons etc are expected.

Hopefully I?m not missing something too obvious.

Thanks

Andy




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221111/5b230513/attachment.htm>

From j1 at jimenezshaw.com  Fri Nov 11 10:12:19 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 11 Nov 2022 19:12:19 +0100
Subject: [gdal-dev] Save min/max values in TIFF
Message-ID: <CADRrdKsMrFbmBwNsvJiTyDKog83Ru6QKWGvrZdx0Tr5tyAUgig@mail.gmail.com>

Hi

I am creating a GeoTIFF file with C++. It is a large DSM (one band of
Float32). Because I am generating it, I already know the min and max values.
I would like to store the min and max values directly in the TIFF, not in a
sidecar file. Is there any gdal metadata (stored in the TIFF) that can be
used? That way, when I open it in QGIS, the range of the band will be
accurate.

Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221111/0fb67799/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Nov 11 10:25:32 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Nov 2022 19:25:32 +0100
Subject: [gdal-dev] Save min/max values in TIFF
In-Reply-To: <CADRrdKsMrFbmBwNsvJiTyDKog83Ru6QKWGvrZdx0Tr5tyAUgig@mail.gmail.com>
References: <CADRrdKsMrFbmBwNsvJiTyDKog83Ru6QKWGvrZdx0Tr5tyAUgig@mail.gmail.com>
Message-ID: <5c587b91-e8a1-22ee-6d6d-76527a1e8515@spatialys.com>


Le 11/11/2022 ? 19:12, Javier Jimenez Shaw a ?crit?:
> Hi
>
> I am creating a GeoTIFF file with C++. It is a large DSM (one band of 
> Float32). Because I am generating it, I already know the min and max 
> values.
> I would like to store the min and max values directly in the TIFF, not 
> in a sidecar file. Is there any gdal metadata (stored in the TIFF) 
> that can be used? That way, when I open it in QGIS, the range of the 
> band will be accurate.

yep, see https://gdal.org/user/raster_data_model.html#raster-band

Demo:

$ python
from osgeo import gdal
ds = gdal.GetDriverByName('GTiff').Create('test.tif', 1, 1)
ds.GetRasterBand(1).SetMetadataItem('STATISTICS_MINIMUM', '0')
ds.GetRasterBand(1).SetMetadataItem('STATISTICS_MAXIMUM', '1')
ds.GetRasterBand(1).SetMetadataItem('STATISTICS_MEAN', '2')
ds.GetRasterBand(1).SetMetadataItem('STATISTICS_STDDEV', '3')


$ gdalinfo test.tif
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 1, 1
Image Structure Metadata:
 ? INTERLEAVE=BAND
Corner Coordinates:
Upper Left? (??? 0.0,??? 0.0)
Lower Left? (??? 0.0,??? 1.0)
Upper Right (??? 1.0,??? 0.0)
Lower Right (??? 1.0,??? 1.0)
Center????? (??? 0.5,??? 0.5)
Band 1 Block=1x1 Type=Byte, ColorInterp=Gray
 ? Min=0.000 Max=1.000
 ? Minimum=0.000, Maximum=1.000, Mean=2.000, StdDev=3.000
 ? Metadata:
 ??? STATISTICS_MAXIMUM=1
 ??? STATISTICS_MEAN=2
 ??? STATISTICS_MINIMUM=0
 ??? STATISTICS_STDDEV=3

$ tiffdump -m 1000 test.tif
test.tif:
Magic: 0x4949 <little-endian> Version: 0x2a <ClassicTIFF>
Directory 0: offset 8 (0x8) next 0 (0)
ImageWidth (256) SHORT (3) 1<1>
ImageLength (257) SHORT (3) 1<1>
BitsPerSample (258) SHORT (3) 1<8>
Compression (259) SHORT (3) 1<1>
Photometric (262) SHORT (3) 1<1>
StripOffsets (273) LONG (4) 1<402>
SamplesPerPixel (277) SHORT (3) 1<1>
RowsPerStrip (278) SHORT (3) 1<1>
StripByteCounts (279) LONG (4) 1<1>
PlanarConfig (284) SHORT (3) 1<1>
SampleFormat (339) SHORT (3) 1<1>
42112 (0xa480) ASCII (2) 244<<GDALMetadata>\n? <Item 
name="STATISTICS_MAXIMUM" sample="0">1</Item>\n? <Item 
name="STATISTICS_MEAN" sample="0">2</Item>\n? <Item 
name="STATISTICS_MINIMUM" sample="0">0</Item>\n? <Item 
name="STATISTICS_STDDEV" sample="0">3</Item>\n</GDALMetadata>\n\0>

Even

>
> Thanks.
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221111/66cb9ebb/attachment.htm>

From even.rouault at spatialys.com  Fri Nov 11 17:07:08 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Nov 2022 02:07:08 +0100
Subject: [gdal-dev] GDAL 3.6.0 patch for building on iOS (and Mac
 Catalyst)
In-Reply-To: <AC8525AB-B8E3-4458-98E4-85BACBA084B7@nixanz.com>
References: <58a56b4e-ecfd-30ee-f1cc-86cd6d7557af@spatialys.com>
 <AC8525AB-B8E3-4458-98E4-85BACBA084B7@nixanz.com>
Message-ID: <d5205a96-36cb-81c7-25f7-b01580dc40b5@spatialys.com>


Le 12/11/2022 ? 02:00, Nik Sands a ?crit?:
> Hi GDAL devs
>
> It appears as though ?pread64?, introduced in 3.6.0, has broken building on iOS in the same way that other ??64? errors used to occur on version 3.5.0 before being patched for 3.5.2.
>
> The attached patch (text content also pasted below) allows the build to continue past that point for iOS (and Mac Catalyst).  I?m just an ignorant hobbyist who doesn?t really understand a lot of this stuff, so please check that what I?ve done here is correct!  :-)  If it?s all OK, then please apply this (or similar) patch for the next release.

Patch queued in https://github.com/OSGeo/gdal/pull/6673

Thanks

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Nov 11 17:12:52 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Nov 2022 02:12:52 +0100
Subject: [gdal-dev] GDAL 3.6.0 patch for building on iOS (and Mac
 Catalyst)
In-Reply-To: <d5205a96-36cb-81c7-25f7-b01580dc40b5@spatialys.com>
References: <58a56b4e-ecfd-30ee-f1cc-86cd6d7557af@spatialys.com>
 <AC8525AB-B8E3-4458-98E4-85BACBA084B7@nixanz.com>
 <d5205a96-36cb-81c7-25f7-b01580dc40b5@spatialys.com>
Message-ID: <3e8fcf75-eb9a-365a-321d-6b2893a9055a@spatialys.com>

Nik,

actually I've just modified it to the following that still tries to 
detect pread(). Can you test and report?

diff --git a/cmake/helpers/configure.cmake b/cmake/helpers/configure.cmake
index f52ea47db3..0939ffadda 100644
--- a/cmake/helpers/configure.cmake
+++ b/cmake/helpers/configure.cmake
@@ -241,16 +241,6 @@ else ()
 ?? check_type_size("off_t" SIZEOF_OFF_T)

 ?? check_function_exists(pread64 HAVE_PREAD64)
-? if( NOT HAVE_PREAD64 )
-??? check_c_source_compiles(
-????? "
-???????? #include <sys/types.h>
-???????? #include <sys/uio.h>
-???????? #include <unistd.h>
-???????? int main() { pread(0, NULL, 0, 0); return 0; }
-??????? "
-????? HAVE_PREAD_BSD)
-? endif()

 ?? check_function_exists(ftruncate64 HAVE_FTRUNCATE64)
 ?? if (HAVE_FTRUNCATE64)
@@ -280,6 +270,19 @@ else ()
 ???? unset(HAVE_FSEEK64 CACHE)
 ???? unset(HAVE_STATVFS64)
 ???? unset(HAVE_STATVFS64 CACHE)
+??? unset(HAVE_PREAD64)
+??? unset(HAVE_PREAD64 CACHE)
+? endif()
+
+? if( NOT HAVE_PREAD64 )
+??? check_c_source_compiles(
+????? "
+???????? #include <sys/types.h>
+???????? #include <sys/uio.h>
+???????? #include <unistd.h>
+???????? int main() { pread(0, NULL, 0, 0); return 0; }
+??????? "
+????? HAVE_PREAD_BSD)
 ?? endif()

 ?? set(UNIX_STDIO_64 TRUE)

Le 12/11/2022 ? 02:07, Even Rouault a ?crit?:
>
> Le 12/11/2022 ? 02:00, Nik Sands a ?crit?:
>> Hi GDAL devs
>>
>> It appears as though ?pread64?, introduced in 3.6.0, has broken 
>> building on iOS in the same way that other ??64? errors used to occur 
>> on version 3.5.0 before being patched for 3.5.2.
>>
>> The attached patch (text content also pasted below) allows the build 
>> to continue past that point for iOS (and Mac Catalyst). I?m just an 
>> ignorant hobbyist who doesn?t really understand a lot of this stuff, 
>> so please check that what I?ve done here is correct!? :-)? If it?s 
>> all OK, then please apply this (or similar) patch for the next release.
>
> Patch queued in https://github.com/OSGeo/gdal/pull/6673
>
> Thanks
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From nik at nixanz.com  Fri Nov 11 17:00:34 2022
From: nik at nixanz.com (Nik Sands)
Date: Sat, 12 Nov 2022 12:00:34 +1100
Subject: [gdal-dev] GDAL 3.6.0 patch for building on iOS (and Mac Catalyst)
In-Reply-To: <58a56b4e-ecfd-30ee-f1cc-86cd6d7557af@spatialys.com>
References: <58a56b4e-ecfd-30ee-f1cc-86cd6d7557af@spatialys.com>
Message-ID: <AC8525AB-B8E3-4458-98E4-85BACBA084B7@nixanz.com>

Hi GDAL devs

It appears as though ?pread64?, introduced in 3.6.0, has broken building on iOS in the same way that other ??64? errors used to occur on version 3.5.0 before being patched for 3.5.2.

The attached patch (text content also pasted below) allows the build to continue past that point for iOS (and Mac Catalyst).  I?m just an ignorant hobbyist who doesn?t really understand a lot of this stuff, so please check that what I?ve done here is correct!  :-)  If it?s all OK, then please apply this (or similar) patch for the next release.

(I?ll post my next error in a seperate email, shortly.)

(PS.  I?m VERY excited to be able to create/update fGDBs with 3.6.0!!!  Thanks so much for all the work you guys do on this.)

Cheers,
Nik.


--- configure.cmake.orig	2022-11-07 07:09:20
+++ configure.cmake	2022-11-12 11:39:42
@@ -280,6 +280,7 @@
     unset(HAVE_FSEEK64 CACHE)
     unset(HAVE_STATVFS64)
     unset(HAVE_STATVFS64 CACHE)
+    unset(HAVE_PREAD64 CACHE)
   endif()
 
   set(UNIX_STDIO_64 TRUE)


-------------- next part --------------
A non-text attachment was scrubbed...
Name: configure.cmake.PATCH
Type: application/octet-stream
Size: 267 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221112/adbd4967/attachment.obj>

From nik at nixanz.com  Fri Nov 11 17:32:57 2022
From: nik at nixanz.com (Nik Sands)
Date: Sat, 12 Nov 2022 12:32:57 +1100
Subject: [gdal-dev] Build 3.6.0 for iOS fails - _sqlite3_progress_handler
 error
Message-ID: <6D6DFF7F-AFF3-464B-AF84-F079B13BF69E@nixanz.com>

After patching GDAL 3.6.0 for ?pread64? issue when building for iOS (see previous email), the build now progresses to the 100% mark, but then fails with the _sqlite3_progress_handler error below.

I?m afraid that I don?t even know where to start with this one.  How should I proceed?

Cheers,
Nik.



[100%] Built target check_swq_parser_md5
Consolidate compiler generated dependencies of target my_test_sqlite3_ext
[100%] Built target my_test_sqlite3_ext
[100%] Built target check_ods_formula_parser_md5
Consolidate compiler generated dependencies of target test_gdal_fuzzer
[100%] Linking CXX executable test_gdal_fuzzer.app/test_gdal_fuzzer
Undefined symbols for architecture arm64:
  "_sqlite3_progress_handler", referenced from:
      OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int (*)(double, char const*, void*), void*) in libgdal.a(ogrgeopackagetablelayer.cpp.o)
ld: symbol(s) not found for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [fuzzers/tests/test_gdal_fuzzer.app/test_gdal_fuzzer] Error 1
make[1]: *** [fuzzers/tests/CMakeFiles/test_gdal_fuzzer.dir/all] Error 2
make: *** [all] Error 2

From even.rouault at spatialys.com  Fri Nov 11 17:45:47 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Nov 2022 02:45:47 +0100
Subject: [gdal-dev] Build 3.6.0 for iOS fails -
 _sqlite3_progress_handler error
In-Reply-To: <6D6DFF7F-AFF3-464B-AF84-F079B13BF69E@nixanz.com>
References: <6D6DFF7F-AFF3-464B-AF84-F079B13BF69E@nixanz.com>
Message-ID: <24625330-3191-0bda-af31-628587f6cd55@spatialys.com>

Weird. So it would seem the SQLite3 build on iOS lacks 
sqlite3_progress_handler()

As this is not critical for operations, I've added a CMake configure 
check for the presence of this function to conditionally enable it.

Can you try https://github.com/OSGeo/gdal/pull/6675 ?

Even

Le 12/11/2022 ? 02:32, Nik Sands a ?crit?:
> After patching GDAL 3.6.0 for ?pread64? issue when building for iOS (see previous email), the build now progresses to the 100% mark, but then fails with the _sqlite3_progress_handler error below.
>
> I?m afraid that I don?t even know where to start with this one.  How should I proceed?
>
> Cheers,
> Nik.
>
>
>
> [100%] Built target check_swq_parser_md5
> Consolidate compiler generated dependencies of target my_test_sqlite3_ext
> [100%] Built target my_test_sqlite3_ext
> [100%] Built target check_ods_formula_parser_md5
> Consolidate compiler generated dependencies of target test_gdal_fuzzer
> [100%] Linking CXX executable test_gdal_fuzzer.app/test_gdal_fuzzer
> Undefined symbols for architecture arm64:
>    "_sqlite3_progress_handler", referenced from:
>        OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int (*)(double, char const*, void*), void*) in libgdal.a(ogrgeopackagetablelayer.cpp.o)
> ld: symbol(s) not found for architecture arm64
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> make[2]: *** [fuzzers/tests/test_gdal_fuzzer.app/test_gdal_fuzzer] Error 1
> make[1]: *** [fuzzers/tests/CMakeFiles/test_gdal_fuzzer.dir/all] Error 2
> make: *** [all] Error 2
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From nik at nixanz.com  Fri Nov 11 18:51:50 2022
From: nik at nixanz.com (Nik Sands)
Date: Sat, 12 Nov 2022 13:51:50 +1100
Subject: [gdal-dev] Build 3.6.0 for iOS fails -
 _sqlite3_progress_handler error
In-Reply-To: <24625330-3191-0bda-af31-628587f6cd55@spatialys.com>
References: <6D6DFF7F-AFF3-464B-AF84-F079B13BF69E@nixanz.com>
 <24625330-3191-0bda-af31-628587f6cd55@spatialys.com>
Message-ID: <A00C8DF9-27FD-45AB-A95A-4DDFFEABB660@nixanz.com>

Hi Even,

Sorry, I should have mentioned that I?m not using the standard iOS/macOS SQLite (because it does not include RTREE extension which seems to be required for GDAL).

I?m using a CMAKE compatible SQLite from:  https://github.com/azadkuh/sqlite-amalgamation (which was working fine with GDAL 3.5.2)

I tried building SQLite with:
		-DSQLITE_OMIT_PROGRESS_CALLBACK=OFF
but it logged that it was ignoring this (not sure why, when it works OK when I specify other options similarly, such as -DSQLITE_OMIT_DECLTYPE=OFF)

Anyhow?

The patch build of GDAL did not resolve the problem, although the output is slightly different.  I still got this error (re-pasted from current build, below).

I?m also trying to figure out how to get SQLITE_OMIT_PROGRESS_CALLBACK disabled in my SQLite build, which may be a better way to go?  Got to figure out the right CMakeLists.txt changes (in SQLite) for this.

Cheers,
Nik.


Consolidate compiler generated dependencies of target gdal_unit_test
[ 94%] Linking CXX executable gdal_unit_test.app/gdal_unit_test
Undefined symbols for architecture arm64:
  "_sqlite3_progress_handler", referenced from:
      OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int (*)(double, char const*, void*), void*) in libgdal.a(ogrgeopackagetablelayer.cpp.o)
ld: symbol(s) not found for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [autotest/cpp/gdal_unit_test.app/gdal_unit_test] Error 1
make[1]: *** [autotest/cpp/CMakeFiles/gdal_unit_test.dir/all] Error 2
make: *** [all] Error 2


> On 12 Nov 2022, at 12:45 pm, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Weird. So it would seem the SQLite3 build on iOS lacks sqlite3_progress_handler()
> 
> As this is not critical for operations, I've added a CMake configure check for the presence of this function to conditionally enable it.
> 
> Can you try https://github.com/OSGeo/gdal/pull/6675 ?
> 
> Even
> 
> Le 12/11/2022 ? 02:32, Nik Sands a ?crit :
>> After patching GDAL 3.6.0 for ?pread64? issue when building for iOS (see previous email), the build now progresses to the 100% mark, but then fails with the _sqlite3_progress_handler error below.
>> 
>> I?m afraid that I don?t even know where to start with this one.  How should I proceed?
>> 
>> Cheers,
>> Nik.
>> 
>> 
>> 
>> [100%] Built target check_swq_parser_md5
>> Consolidate compiler generated dependencies of target my_test_sqlite3_ext
>> [100%] Built target my_test_sqlite3_ext
>> [100%] Built target check_ods_formula_parser_md5
>> Consolidate compiler generated dependencies of target test_gdal_fuzzer
>> [100%] Linking CXX executable test_gdal_fuzzer.app/test_gdal_fuzzer
>> Undefined symbols for architecture arm64:
>>   "_sqlite3_progress_handler", referenced from:
>>       OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int (*)(double, char const*, void*), void*) in libgdal.a(ogrgeopackagetablelayer.cpp.o)
>> ld: symbol(s) not found for architecture arm64
>> clang: error: linker command failed with exit code 1 (use -v to see invocation)
>> make[2]: *** [fuzzers/tests/test_gdal_fuzzer.app/test_gdal_fuzzer] Error 1
>> make[1]: *** [fuzzers/tests/CMakeFiles/test_gdal_fuzzer.dir/all] Error 2
>> make: *** [all] Error 2
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


========================================================
NIK SANDS
Line Tamer | Time Traveller | Space Cadet

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221112/c9077307/attachment-0001.htm>

From nik at nixanz.com  Fri Nov 11 19:04:09 2022
From: nik at nixanz.com (Nik Sands)
Date: Sat, 12 Nov 2022 14:04:09 +1100
Subject: [gdal-dev] GDAL 3.6.0 patch for building on iOS (and Mac
 Catalyst)
In-Reply-To: <3e8fcf75-eb9a-365a-321d-6b2893a9055a@spatialys.com>
References: <58a56b4e-ecfd-30ee-f1cc-86cd6d7557af@spatialys.com>
 <AC8525AB-B8E3-4458-98E4-85BACBA084B7@nixanz.com>
 <d5205a96-36cb-81c7-25f7-b01580dc40b5@spatialys.com>
 <3e8fcf75-eb9a-365a-321d-6b2893a9055a@spatialys.com>
Message-ID: <180E812C-A5AB-4FD6-BA8E-72BC51ADF63F@nixanz.com>

Hi Even,

This patch worked fine to resolve the ?pread64? error on iOS and Mac Catalyst.

Thank you.
-Nik

> On 12 Nov 2022, at 12:12 pm, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Nik,
> 
> actually I've just modified it to the following that still tries to detect pread(). Can you test and report?
> 
> diff --git a/cmake/helpers/configure.cmake b/cmake/helpers/configure.cmake
> index f52ea47db3..0939ffadda 100644
> --- a/cmake/helpers/configure.cmake
> +++ b/cmake/helpers/configure.cmake
> @@ -241,16 +241,6 @@ else ()
>    check_type_size("off_t" SIZEOF_OFF_T)
> 
>    check_function_exists(pread64 HAVE_PREAD64)
> -  if( NOT HAVE_PREAD64 )
> -    check_c_source_compiles(
> -      "
> -         #include <sys/types.h>
> -         #include <sys/uio.h>
> -         #include <unistd.h>
> -         int main() { pread(0, NULL, 0, 0); return 0; }
> -        "
> -      HAVE_PREAD_BSD)
> -  endif()
> 
>    check_function_exists(ftruncate64 HAVE_FTRUNCATE64)
>    if (HAVE_FTRUNCATE64)
> @@ -280,6 +270,19 @@ else ()
>      unset(HAVE_FSEEK64 CACHE)
>      unset(HAVE_STATVFS64)
>      unset(HAVE_STATVFS64 CACHE)
> +    unset(HAVE_PREAD64)
> +    unset(HAVE_PREAD64 CACHE)
> +  endif()
> +
> +  if( NOT HAVE_PREAD64 )
> +    check_c_source_compiles(
> +      "
> +         #include <sys/types.h>
> +         #include <sys/uio.h>
> +         #include <unistd.h>
> +         int main() { pread(0, NULL, 0, 0); return 0; }
> +        "
> +      HAVE_PREAD_BSD)
>    endif()
> 
>    set(UNIX_STDIO_64 TRUE)
> 
> Le 12/11/2022 ? 02:07, Even Rouault a ?crit :
>> 
>> Le 12/11/2022 ? 02:00, Nik Sands a ?crit :
>>> Hi GDAL devs
>>> 
>>> It appears as though ?pread64?, introduced in 3.6.0, has broken building on iOS in the same way that other ??64? errors used to occur on version 3.5.0 before being patched for 3.5.2.
>>> 
>>> The attached patch (text content also pasted below) allows the build to continue past that point for iOS (and Mac Catalyst). I?m just an ignorant hobbyist who doesn?t really understand a lot of this stuff, so please check that what I?ve done here is correct!  :-)  If it?s all OK, then please apply this (or similar) patch for the next release.
>> 
>> Patch queued in https://github.com/OSGeo/gdal/pull/6673
>> 
>> Thanks
>> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 


========================================================
NIK SANDS
Line Tamer | Time Traveller | Space Cadet

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221112/e094de34/attachment.htm>

From nik at nixanz.com  Fri Nov 11 19:17:52 2022
From: nik at nixanz.com (Nik Sands)
Date: Sat, 12 Nov 2022 14:17:52 +1100
Subject: [gdal-dev] Build 3.6.0 for iOS fails -
 _sqlite3_progress_handler error
In-Reply-To: <A00C8DF9-27FD-45AB-A95A-4DDFFEABB660@nixanz.com>
References: <6D6DFF7F-AFF3-464B-AF84-F079B13BF69E@nixanz.com>
 <24625330-3191-0bda-af31-628587f6cd55@spatialys.com>
 <A00C8DF9-27FD-45AB-A95A-4DDFFEABB660@nixanz.com>
Message-ID: <EB1DA58A-4626-4B6F-B9BC-512B93366B93@nixanz.com>

Hi again,

I have now resolved this issue by rebuilding SQLite with the SQLITE_OMIT_PROGRESS_CALLBACK=OFF

GDAL 3.6.0 will now build successfully with my updated buiild of SQLite.

Sorry to have troubled you with this one.

NB:  This may still be worth pursuing within GDAL, since SQLite explicitly recommend building with this omitted, as per:  https://www.sqlite.org/compile.html

If you still wished to pursue a GDAL fix for possibility of missing sqlite3_progress_handler, then it?s worth noting that it?s not an iOS issue, as far as I know, since I was not using iOS default SQLite.

Cheers,
Nik.


> On 12 Nov 2022, at 1:51 pm, Nik Sands <nik at nixanz.com> wrote:
> 
> Hi Even,
> 
> Sorry, I should have mentioned that I?m not using the standard iOS/macOS SQLite (because it does not include RTREE extension which seems to be required for GDAL).
> 
> I?m using a CMAKE compatible SQLite from:  https://github.com/azadkuh/sqlite-amalgamation (which was working fine with GDAL 3.5.2)
> 
> I tried building SQLite with:
> 		-DSQLITE_OMIT_PROGRESS_CALLBACK=OFF
> but it logged that it was ignoring this (not sure why, when it works OK when I specify other options similarly, such as -DSQLITE_OMIT_DECLTYPE=OFF)
> 
> Anyhow?
> 
> The patch build of GDAL did not resolve the problem, although the output is slightly different.  I still got this error (re-pasted from current build, below).
> 
> I?m also trying to figure out how to get SQLITE_OMIT_PROGRESS_CALLBACK disabled in my SQLite build, which may be a better way to go?  Got to figure out the right CMakeLists.txt changes (in SQLite) for this.
> 
> Cheers,
> Nik.
> 
> 
> Consolidate compiler generated dependencies of target gdal_unit_test
> [ 94%] Linking CXX executable gdal_unit_test.app/gdal_unit_test
> Undefined symbols for architecture arm64:
>   "_sqlite3_progress_handler", referenced from:
>       OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int (*)(double, char const*, void*), void*) in libgdal.a(ogrgeopackagetablelayer.cpp.o)
> ld: symbol(s) not found for architecture arm64
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> make[2]: *** [autotest/cpp/gdal_unit_test.app/gdal_unit_test] Error 1
> make[1]: *** [autotest/cpp/CMakeFiles/gdal_unit_test.dir/all] Error 2
> make: *** [all] Error 2
> 
> 
>> On 12 Nov 2022, at 12:45 pm, Even Rouault <even.rouault at spatialys.com> wrote:
>> 
>> Weird. So it would seem the SQLite3 build on iOS lacks sqlite3_progress_handler()
>> 
>> As this is not critical for operations, I've added a CMake configure check for the presence of this function to conditionally enable it.
>> 
>> Can you try https://github.com/OSGeo/gdal/pull/6675 ?
>> 
>> Even
>> 
>> Le 12/11/2022 ? 02:32, Nik Sands a ?crit :
>>> After patching GDAL 3.6.0 for ?pread64? issue when building for iOS (see previous email), the build now progresses to the 100% mark, but then fails with the _sqlite3_progress_handler error below.
>>> 
>>> I?m afraid that I don?t even know where to start with this one.  How should I proceed?
>>> 
>>> Cheers,
>>> Nik.
>>> 
>>> 
>>> 
>>> [100%] Built target check_swq_parser_md5
>>> Consolidate compiler generated dependencies of target my_test_sqlite3_ext
>>> [100%] Built target my_test_sqlite3_ext
>>> [100%] Built target check_ods_formula_parser_md5
>>> Consolidate compiler generated dependencies of target test_gdal_fuzzer
>>> [100%] Linking CXX executable test_gdal_fuzzer.app/test_gdal_fuzzer
>>> Undefined symbols for architecture arm64:
>>>   "_sqlite3_progress_handler", referenced from:
>>>       OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int (*)(double, char const*, void*), void*) in libgdal.a(ogrgeopackagetablelayer.cpp.o)
>>> ld: symbol(s) not found for architecture arm64
>>> clang: error: linker command failed with exit code 1 (use -v to see invocation)
>>> make[2]: *** [fuzzers/tests/test_gdal_fuzzer.app/test_gdal_fuzzer] Error 1
>>> make[1]: *** [fuzzers/tests/CMakeFiles/test_gdal_fuzzer.dir/all] Error 2
>>> make: *** [all] Error 2
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> ========================================================
> NIK SANDS
> Line Tamer | Time Traveller | Space Cadet
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


========================================================
NIK SANDS
Line Tamer | Time Traveller | Space Cadet

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221112/29797ea1/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Nov 12 02:00:58 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Nov 2022 11:00:58 +0100
Subject: [gdal-dev] Build 3.6.0 for iOS fails -
 _sqlite3_progress_handler error
In-Reply-To: <EB1DA58A-4626-4B6F-B9BC-512B93366B93@nixanz.com>
References: <6D6DFF7F-AFF3-464B-AF84-F079B13BF69E@nixanz.com>
 <24625330-3191-0bda-af31-628587f6cd55@spatialys.com>
 <A00C8DF9-27FD-45AB-A95A-4DDFFEABB660@nixanz.com>
 <EB1DA58A-4626-4B6F-B9BC-512B93366B93@nixanz.com>
Message-ID: <719bb94a-9490-426e-43f5-5634c4ce0905@spatialys.com>

Nik,

weird that the patch didn't work for you. It did for me on a SQLite3 
build with -DSQLITE_OMIT_PROGRESS_CALLBACK=1 . I've just reworked it to 
amend the commit message and comment not to mention iOS

But https://www.sqlite.org/compile.html doesn't say that this is 
recommended, it says it is "recommended for applications that are able 
to use them [...]. Not all of these compile-time options are usable by 
every application".

And typically you *don't* want to build SQLite3 with SQLITE_THREADSAFE=0 
as that "means that SQLite can never be used by more than a single 
thread at a time", which would break GDAL multithreaded usage.

Even

Le 12/11/2022 ? 04:17, Nik Sands a ?crit?:
> Hi again,
>
> I have now resolved this issue by rebuilding SQLite with the 
> SQLITE_OMIT_PROGRESS_CALLBACK=OFF
>
> GDAL 3.6.0 will now build successfully with my updated buiild of SQLite.
>
> Sorry to have troubled you with this one.
>
> NB: ?This may still be worth pursuing within GDAL, since SQLite 
> explicitly recommend building with this omitted, as per: 
> https://www.sqlite.org/compile.html
>
> If you still wished to pursue a GDAL fix for possibility of missing 
> sqlite3_progress_handler, then it?s worth noting that it?s not an iOS 
> issue, as far as I know, since I was not using iOS default SQLite.
>
> Cheers,
> Nik.
>
>
>> On 12 Nov 2022, at 1:51 pm, Nik Sands <nik at nixanz.com> wrote:
>>
>> Hi Even,
>>
>> Sorry, I should have mentioned that I?m not using the standard 
>> iOS/macOS SQLite (because it does not include RTREE extension which 
>> seems to be required for GDAL).
>>
>> I?m using a CMAKE compatible SQLite from: 
>> https://github.com/azadkuh/sqlite-amalgamation?(which was working 
>> fine with GDAL 3.5.2)
>>
>> I tried building SQLite with:
>> -DSQLITE_OMIT_PROGRESS_CALLBACK=OFF
>> but it logged that it was ignoring this (not sure why, when it works 
>> OK when I specify other options similarly, such as 
>> -DSQLITE_OMIT_DECLTYPE=OFF)
>>
>> Anyhow?
>>
>> The patch build of GDAL did not resolve the problem, although the 
>> output is slightly different. ?I still got this error (re-pasted from 
>> current build, below).
>>
>> I?m also trying to figure out how to get 
>> SQLITE_OMIT_PROGRESS_CALLBACK disabled in my SQLite build, which may 
>> be a better way to go? ?Got to figure out the right CMakeLists.txt 
>> changes (in SQLite) for this.
>>
>> Cheers,
>> Nik.
>>
>>
>> Consolidate compiler generated dependencies of target gdal_unit_test
>> [ 94%] Linking CXX executable gdal_unit_test.app/gdal_unit_test
>> Undefined symbols for architecture arm64:
>> ? "_sqlite3_progress_handler", referenced from:
>> OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int 
>> (*)(double, char const*, void*), void*) in 
>> libgdal.a(ogrgeopackagetablelayer.cpp.o)
>> ld: symbol(s) not found for architecture arm64
>> clang: error: linker command failed with exit code 1 (use -v to see 
>> invocation)
>> make[2]: *** [autotest/cpp/gdal_unit_test.app/gdal_unit_test] Error 1
>> make[1]: *** [autotest/cpp/CMakeFiles/gdal_unit_test.dir/all] Error 2
>> make: *** [all] Error 2
>>
>>
>>> On 12 Nov 2022, at 12:45 pm, Even Rouault 
>>> <even.rouault at spatialys.com> wrote:
>>>
>>> Weird. So it would seem the SQLite3 build on iOS lacks 
>>> sqlite3_progress_handler()
>>>
>>> As this is not critical for operations, I've added a CMake configure 
>>> check for the presence of this function to conditionally enable it.
>>>
>>> Can you try https://github.com/OSGeo/gdal/pull/6675 ?
>>>
>>> Even
>>>
>>> Le 12/11/2022 ? 02:32, Nik Sands a ?crit?:
>>>> After patching GDAL 3.6.0 for ?pread64? issue when building for iOS 
>>>> (see previous email), the build now progresses to the 100% mark, 
>>>> but then fails with the _sqlite3_progress_handler error below.
>>>>
>>>> I?m afraid that I don?t even know where to start with this one. 
>>>> ?How should I proceed?
>>>>
>>>> Cheers,
>>>> Nik.
>>>>
>>>>
>>>>
>>>> [100%] Built target check_swq_parser_md5
>>>> Consolidate compiler generated dependencies of target 
>>>> my_test_sqlite3_ext
>>>> [100%] Built target my_test_sqlite3_ext
>>>> [100%] Built target check_ods_formula_parser_md5
>>>> Consolidate compiler generated dependencies of target test_gdal_fuzzer
>>>> [100%] Linking CXX executable test_gdal_fuzzer.app/test_gdal_fuzzer
>>>> Undefined symbols for architecture arm64:
>>>> ??"_sqlite3_progress_handler", referenced from:
>>>> ??????OGRGeoPackageTableLayer::GetGeometryTypes(int, int, int&, int 
>>>> (*)(double, char const*, void*), void*) in 
>>>> libgdal.a(ogrgeopackagetablelayer.cpp.o)
>>>> ld: symbol(s) not found for architecture arm64
>>>> clang: error: linker command failed with exit code 1 (use -v to see 
>>>> invocation)
>>>> make[2]: *** [fuzzers/tests/test_gdal_fuzzer.app/test_gdal_fuzzer] 
>>>> Error 1
>>>> make[1]: *** [fuzzers/tests/CMakeFiles/test_gdal_fuzzer.dir/all] 
>>>> Error 2
>>>> make: *** [all] Error 2
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> -- 
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> ========================================================
>> NIK SANDS
>> Line Tamer | Time Traveller | Space Cadet
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ========================================================
> NIK SANDS
> Line Tamer | Time Traveller | Space Cadet
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221112/fad940f5/attachment-0001.htm>

From j1 at jimenezshaw.com  Sat Nov 12 02:33:33 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 12 Nov 2022 11:33:33 +0100
Subject: [gdal-dev] Save min/max values in TIFF
In-Reply-To: <5c587b91-e8a1-22ee-6d6d-76527a1e8515@spatialys.com>
References: <CADRrdKsMrFbmBwNsvJiTyDKog83Ru6QKWGvrZdx0Tr5tyAUgig@mail.gmail.com>
 <5c587b91-e8a1-22ee-6d6d-76527a1e8515@spatialys.com>
Message-ID: <CADRrdKvEHUbkSud2_mKPbxXymTt5XnYXCBiRyrFE+Ws2bqNc1g@mail.gmail.com>

Thanks!
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Fri, 11 Nov 2022 at 19:25, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 11/11/2022 ? 19:12, Javier Jimenez Shaw a ?crit :
>
> Hi
>
> I am creating a GeoTIFF file with C++. It is a large DSM (one band of
> Float32). Because I am generating it, I already know the min and max values.
> I would like to store the min and max values directly in the TIFF, not in
> a sidecar file. Is there any gdal metadata (stored in the TIFF) that can be
> used? That way, when I open it in QGIS, the range of the band will be
> accurate.
>
> yep, see https://gdal.org/user/raster_data_model.html#raster-band
>
> Demo:
>
> $ python
> from osgeo import gdal
> ds = gdal.GetDriverByName('GTiff').Create('test.tif', 1, 1)
> ds.GetRasterBand(1).SetMetadataItem('STATISTICS_MINIMUM', '0')
> ds.GetRasterBand(1).SetMetadataItem('STATISTICS_MAXIMUM', '1')
> ds.GetRasterBand(1).SetMetadataItem('STATISTICS_MEAN', '2')
> ds.GetRasterBand(1).SetMetadataItem('STATISTICS_STDDEV', '3')
>
>
> $ gdalinfo test.tif
> Driver: GTiff/GeoTIFF
> Files: test.tif
> Size is 1, 1
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,    1.0)
> Upper Right (    1.0,    0.0)
> Lower Right (    1.0,    1.0)
> Center      (    0.5,    0.5)
> Band 1 Block=1x1 Type=Byte, ColorInterp=Gray
>   Min=0.000 Max=1.000
>   Minimum=0.000, Maximum=1.000, Mean=2.000, StdDev=3.000
>   Metadata:
>     STATISTICS_MAXIMUM=1
>     STATISTICS_MEAN=2
>     STATISTICS_MINIMUM=0
>     STATISTICS_STDDEV=3
>
> $ tiffdump -m 1000 test.tif
> test.tif:
> Magic: 0x4949 <little-endian> Version: 0x2a <ClassicTIFF>
> Directory 0: offset 8 (0x8) next 0 (0)
> ImageWidth (256) SHORT (3) 1<1>
> ImageLength (257) SHORT (3) 1<1>
> BitsPerSample (258) SHORT (3) 1<8>
> Compression (259) SHORT (3) 1<1>
> Photometric (262) SHORT (3) 1<1>
> StripOffsets (273) LONG (4) 1<402>
> SamplesPerPixel (277) SHORT (3) 1<1>
> RowsPerStrip (278) SHORT (3) 1<1>
> StripByteCounts (279) LONG (4) 1<1>
> PlanarConfig (284) SHORT (3) 1<1>
> SampleFormat (339) SHORT (3) 1<1>
> 42112 (0xa480) ASCII (2) 244<<GDALMetadata>\n  <Item
> name="STATISTICS_MAXIMUM" sample="0">1</Item>\n  <Item
> name="STATISTICS_MEAN" sample="0">2</Item>\n  <Item
> name="STATISTICS_MINIMUM" sample="0">0</Item>\n  <Item
> name="STATISTICS_STDDEV" sample="0">3</Item>\n</GDALMetadata>\n\0>
>
> Even
>
>
> Thanks.
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221112/544bff98/attachment.htm>

From haoliang.yu at outlook.com  Sat Nov 12 12:24:19 2022
From: haoliang.yu at outlook.com (Haoliang Yu)
Date: Sat, 12 Nov 2022 15:24:19 -0500
Subject: [gdal-dev] How to copy gdal executables and artifacts from the
 official gdal docker image
Message-ID: <MN2PR06MB6608C9C1477BF326B540CA33F5039@MN2PR06MB6608.namprd06.prod.outlook.com>

Hi, I wonder if it is possible to copy gdal executables and artifacts from the official gdal docker image in a multi-stage build process. Essentially, I want to implement a dockerfile like this

```
// download the official gdal image
FROM osgeo/gdal:alpine-normal-3.6.0 as gdal

// this is a nodejs application that calls gdal commands
FROM node:18-alpine as app

COPY ?from=gdal /path/to/gdal /path/to/gdal

// other code to install gdal dependencies and bootstrap the node application 
```

Thanks

Haoliang

From andrew at aitchison.me.uk  Sun Nov 13 06:08:59 2022
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Sun, 13 Nov 2022 14:08:59 +0000 (GMT)
Subject: [gdal-dev] org2org
In-Reply-To: <412305ff559641248820b5be82e0ef84@hensoldt.net>
References: <412305ff559641248820b5be82e0ef84@hensoldt.net>
Message-ID: <e741480f-0b45-cc7e-e0a0-7f75d987e4a2@aitchison.me.uk>

On Wed, 9 Nov 2022, Leber, Thorsten wrote:

> Hi All,
> I am trying to use org2org with the following command:
>
> ogr2ogr -f "ESRI Shapefile" C:\RenderTest\raster_clipper_and.shp PG:"host=10.49.20.42 port=5432 user=tilemill password=test dbname=nextgen" -sql "SELECT "name", "left", top, "right", bottom FROM grids.grid_1_25grad WHERE ST_Intersects(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and'))) AND NOT ST_Touches(geom, (SELECT geom FROM countries.geometries_boundary_buffer_10km('and')))" -s_srs EPSG:4326 -t_srs EPSG:4326 -overwrite -lco ENCODING=utf8

Are the quotes in
     SELECT "name", "left", top, "right", bottom FROM
significant ? top and bottom are not quoted, but the other 3 out of 5 are.

> I expect in the output folder 5 files
>
> [cid:image001.png at 01D8F432.E187B8A0]
>
> But I receive a warning:
>
> Warning 1: layer names ignored in combination with -sql.
>
> And get only 3 files
>
> [cid:image002.png at 01D8F433.27BC9750]
>
> I am missing the .shp and the .shx file. Is there something wrong in my command?

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From cguedas at gmail.com  Mon Nov 14 01:28:07 2022
From: cguedas at gmail.com (=?UTF-8?Q?Christophe_Gu=C3=A9das?=)
Date: Mon, 14 Nov 2022 10:28:07 +0100
Subject: [gdal-dev] gdalbuildvrt : addalpha adds a new band even if not
 needed
Message-ID: <CAAq8SZ0NkFpaoPTZTND4qBf2X9vv4FndBKbgZfi-gHkxYsDkEQ@mail.gmail.com>

Hello,
I'm using gdalbuildvrt to create a virtual raster from multiple tiff tiles.
I need the output virtual raster to have an alpha band, and as I do not
know beforehand if the input rasters will contain one or not, I use the
'addalpha' option of gdalbuildvrt to add one if needed.
As I understand the documentation of gdalbuildvrt, 'Adds an alpha mask band
to the VRT when the source raster have none' means that if the source
rasters already have an alpha band, no new band should be added.
However, when I run the following command on the attached test files (that
already contain an alpha band) :
gdalbuildvrt -addalpha test.vrt 1.tiff 2.tiff
The result vrt contains a fifth band, and thus two alpha bands.

Do I misunderstand the gdalbuildvrt documentation, or is there a problem
with my input files ?

I tested this with GDAL v3.0.4 provided in the ubuntu 20.04 repository, as
well as with GDAL v3.6.0dev-cc78d80d5df3750db317b96d93013d5f70ef6f0a from
the osgeo/gdal:latest docker image.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/7a96ddb0/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 1.tiff
Type: image/tiff
Size: 1512 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/7a96ddb0/attachment.tiff>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2.tiff
Type: image/tiff
Size: 1512 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/7a96ddb0/attachment-0001.tiff>

From even.rouault at spatialys.com  Mon Nov 14 04:22:11 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Nov 2022 13:22:11 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for raster
Message-ID: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>

Hi,

I feel the discussion phase has finished. There were a few questions 
about the existing GDT_Byte unsigned 8-bit integer type, if it should be 
renamed/aliased/etc, but no obvious conclusion emerged from this, and 
I'd suggest we keep with the status-quo with GDT_Byte, and the RFC 
remains on just adding GDT_Int8 for signed 8-bit integer.

Motion:

Adopt RFC 87: Signed int8 data type for raster 
(https://github.com/OSGeo/gdal/pull/6634)

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From schwehr at gmail.com  Mon Nov 14 06:40:39 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 14 Nov 2022 06:40:39 -0800
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
Message-ID: <CACmBxyufo41BBXPOfRjx0memKx70YvhKSiVa4bW0coiKqoLi7Q@mail.gmail.com>

+1 KurtS

On Mon, Nov 14, 2022, 4:22 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I feel the discussion phase has finished. There were a few questions
> about the existing GDT_Byte unsigned 8-bit integer type, if it should be
> renamed/aliased/etc, but no obvious conclusion emerged from this, and
> I'd suggest we keep with the status-quo with GDT_Byte, and the RFC
> remains on just adding GDT_Int8 for signed 8-bit integer.
>
> Motion:
>
> Adopt RFC 87: Signed int8 data type for raster
> (https://github.com/OSGeo/gdal/pull/6634)
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/95ad8dcd/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 14 07:19:10 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 14 Nov 2022 15:19:10 +0000
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
Message-ID: <AM0PR09MB3219D35E3AB3BDA434CB7244FD059@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault
L?hetetty: maanantai 14. marraskuuta 2022 14.22
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for raster

Hi,

I feel the discussion phase has finished. There were a few questions about the existing GDT_Byte unsigned 8-bit integer type, if it should be renamed/aliased/etc, but no obvious conclusion emerged from this, and I'd suggest we keep with the status-quo with GDT_Byte, and the RFC remains on just adding GDT_Int8 for signed 8-bit integer.

Motion:

Adopt RFC 87: Signed int8 data type for raster
(https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fpull%2F6634&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7265db03bddf49c0fbfc08dac63ae958%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638040253568201472%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=kcuymWBJ1ZKiWoPL9BpqpNYp6PXP6LuEbguBd14JHr0%3D&amp;reserved=0)

Starting with my +1,

Even

--
https://eur06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7265db03bddf49c0fbfc08dac63ae958%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638040253568201472%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=hStEk96nUCiuUvSxD88dhfW0De%2F%2FoLEMNy%2F%2F%2BT9BJ%2BI%3D&amp;reserved=0
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7265db03bddf49c0fbfc08dac63ae958%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638040253568357728%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=QcBH2TUsoP76aeuK6CojMC%2FneC5PkRLHLAGw%2BS6TYPA%3D&amp;reserved=0

From mateusz at loskot.net  Mon Nov 14 07:22:18 2022
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 14 Nov 2022 16:22:18 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
Message-ID: <CABUeae883+5e=+o0NnFxuLwkefJQV=A6KbNqbeyTEf32NoEvbQ@mail.gmail.com>

+1 Mateusz

p. s.  An alias wouldn't hurt, not a substantial change but could be
useful, could be just tossed in.



On Mon, 14 Nov 2022, 13:22 Even Rouault, <even.rouault at spatialys.com> wrote:

> Hi,
>
> I feel the discussion phase has finished. There were a few questions
> about the existing GDT_Byte unsigned 8-bit integer type, if it should be
> renamed/aliased/etc, but no obvious conclusion emerged from this, and
> I'd suggest we keep with the status-quo with GDT_Byte, and the RFC
> remains on just adding GDT_Int8 for signed 8-bit integer.
>
> Motion:
>
> Adopt RFC 87: Signed int8 data type for raster
> (https://github.com/OSGeo/gdal/pull/6634)
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/83774ad0/attachment-0001.htm>

From howard at hobu.co  Mon Nov 14 07:45:07 2022
From: howard at hobu.co (Howard Butler)
Date: Mon, 14 Nov 2022 09:45:07 -0600
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
Message-ID: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>

Dear PSC,

As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Alessandro Pasotti as a contracted GDAL maintainer for the period beginning on November 21st, 2022 and ending November 21st, 2023.

Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html

The terms of the contract are for a maximum of 250 hours at 110 ?/hr.

Alessandro will plan to focus on GDAL tasks that make it easier to developer GUI applications like QGIS (of which he is also a very active contributor). This includes testing, APIs, and driver hardening.

Howard

PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.

From dmorissette at mapgears.com  Mon Nov 14 11:24:16 2022
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 14 Nov 2022 14:24:16 -0500
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
In-Reply-To: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
References: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
Message-ID: <34606796-6e1e-0b95-9d8a-753bccf020d2@mapgears.com>

+1

Daniel



On 2022-11-14 10:45, Howard Butler wrote:
> Dear PSC,
> 
> As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Alessandro Pasotti as a contracted GDAL maintainer for the period beginning on November 21st, 2022 and ending November 21st, 2023.
> 
> Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
> 
> The terms of the contract are for a maximum of 250 hours at 110 ?/hr.
> 
> Alessandro will plan to focus on GDAL tasks that make it easier to developer GUI applications like QGIS (of which he is also a very active contributor). This includes testing, APIs, and driver hardening.
> 
> Howard
> 
> PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From szekerest at gmail.com  Mon Nov 14 11:29:21 2022
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 14 Nov 2022 20:29:21 +0100
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
In-Reply-To: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
References: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
Message-ID: <CACALY+QXcXDRDFrPhtViW0TKm6=3FGoLswmYxzmQfJ_Ld78Q1A@mail.gmail.com>

+1

Tamas

Howard Butler <howard at hobu.co> ezt ?rta (id?pont: 2022. nov. 14., H, 16:45):

> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a
> financial conduit, it is my pleasure to put forward a motion to approve
> Alessandro Pasotti as a contracted GDAL maintainer for the period beginning
> on November 21st, 2022 and ending November 21st, 2023.
>
> Details of the maintenance tasking and duties can be found at the
> previously approved RFC 83
> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for a maximum of 250 hours at 110 ?/hr.
>
> Alessandro will plan to focus on GDAL tasks that make it easier to
> developer GUI applications like QGIS (of which he is also a very active
> contributor). This includes testing, APIs, and driver hardening.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL
> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
> Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/c307f90b/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 14 11:29:54 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Nov 2022 20:29:54 +0100
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
In-Reply-To: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
References: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
Message-ID: <6239bb2e-4eea-dd9e-c42f-36c9703d1e4d@spatialys.com>

+1 Even

Le 14/11/2022 ? 16:45, Howard Butler a ?crit?:
> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Alessandro Pasotti as a contracted GDAL maintainer for the period beginning on November 21st, 2022 and ending November 21st, 2023.
>
> Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for a maximum of 250 hours at 110 ?/hr.
>
> Alessandro will plan to focus on GDAL tasks that make it easier to developer GUI applications like QGIS (of which he is also a very active contributor). This includes testing, APIs, and driver hardening.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 14 12:04:22 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 14 Nov 2022 20:04:22 +0000
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
In-Reply-To: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
References: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
Message-ID: <AM0PR09MB3219C5E2032AD0F6B569D0C7FD059@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Howard Butler
L?hetetty: maanantai 14. marraskuuta 2022 17.45
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer

Dear PSC,

As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Alessandro Pasotti as a contracted GDAL maintainer for the period beginning on November 21st, 2022 and ending November 21st, 2023.

Details of the maintenance tasking and duties can be found at the previously approved RFC 83 https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdevelopment%2Frfc%2Frfc83_use_of_project_sponsorship.html&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C5334d2067891462cd95d08dac65748d2%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638040375428929035%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=uF2Ts%2F3TyKfxYmDpxorb0EK93VvgoWP0%2F3l21PRvCdA%3D&amp;reserved=0

The terms of the contract are for a maximum of 250 hours at 110 ?/hr.

Alessandro will plan to focus on GDAL tasks that make it easier to developer GUI applications like QGIS (of which he is also a very active contributor). This includes testing, APIs, and driver hardening.

Howard

PS I will coordinating the contracting activity in my role as the GDAL NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary. Please contact us directly with any comments or concerns.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C5334d2067891462cd95d08dac65748d2%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638040375428929035%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=fxW5P5aT82yDOH5pCFgQIKwfZpSo0AvqTPtFHthoHfU%3D&amp;reserved=0

From mateusz at loskot.net  Mon Nov 14 12:58:39 2022
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 14 Nov 2022 21:58:39 +0100
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
In-Reply-To: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
References: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
Message-ID: <CABUeae8=OC=M10em7yOcypdKwcuqH7pfqRULq1X5_VT63uqpNg@mail.gmail.com>

+1 Mateusz


On Mon, 14 Nov 2022, 16:45 Howard Butler, <howard at hobu.co> wrote:

> Dear PSC,
>
> As a result of our fundraising activity and development of NumFOCUS as a
> financial conduit, it is my pleasure to put forward a motion to approve
> Alessandro Pasotti as a contracted GDAL maintainer for the period beginning
> on November 21st, 2022 and ending November 21st, 2023.
>
> Details of the maintenance tasking and duties can be found at the
> previously approved RFC 83
> https://gdal.org/development/rfc/rfc83_use_of_project_sponsorship.html
>
> The terms of the contract are for a maximum of 250 hours at 110 ?/hr.
>
> Alessandro will plan to focus on GDAL tasks that make it easier to
> developer GUI applications like QGIS (of which he is also a very active
> contributor). This includes testing, APIs, and driver hardening.
>
> Howard
>
> PS I will coordinating the contracting activity in my role as the GDAL
> NumFOCUS contracting liaison, with Frank Warmerdam acting as the secondary.
> Please contact us directly with any comments or concerns.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221114/a9cd3e28/attachment.htm>

From echterhoff at interactive-instruments.de  Tue Nov 15 04:04:52 2022
From: echterhoff at interactive-instruments.de (Johannes Echterhoff)
Date: Tue, 15 Nov 2022 12:04:52 +0000
Subject: [gdal-dev] GML driver - gml:xlink resolving - just embedding?
Message-ID: <GV1P193MB2232B523304B81154C2F1CB5FC049@GV1P193MB2232.EURP193.PROD.OUTLOOK.COM>

Hello,

Does resolving of xlink:href by the GML driver (when GML_SKIP_RESOLVE_ELEMS is used, i.e., set to NONE or HUGE) simply mean that the referenced resource is copied into the XML element that contains the xlink:href XML attribute? Tests seem to support this, but I'd really like to double-check on this list.

My somewhat naive assumption was that if the reference pointed to another GML object, then that would be recognized somehow (though the exact "how" is probably the issue; document-internal reference via @gml:id could work, but not an external reference), and duplication of objects avoided. The resolving also seems to remove the xlink:href attributes for resolved references, and the gml:id attributes on the elements that are copied into the main GML file. That, in fact, creates duplicate objects in my test case.

Best regards,
Johannes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/888629cf/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Nov 15 04:26:56 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Nov 2022 13:26:56 +0100
Subject: [gdal-dev] GML driver - gml:xlink resolving - just embedding?
In-Reply-To: <GV1P193MB2232B523304B81154C2F1CB5FC049@GV1P193MB2232.EURP193.PROD.OUTLOOK.COM>
References: <GV1P193MB2232B523304B81154C2F1CB5FC049@GV1P193MB2232.EURP193.PROD.OUTLOOK.COM>
Message-ID: <2d872019-709b-7de0-eaff-d9f9b26e6639@spatialys.com>

Johannes,

> Does resolving of xlink:href by the GML driver (when 
> GML_SKIP_RESOLVE_ELEMS is used, i.e., set to NONE or HUGE) simply mean 
> that the referenced resource is copied into the XML element that 
> contains the xlink:href XML attribute? Tests seem to support this, but 
> I?d really like to double-check on this list.
>
Yes, that's my recollection of how it works.
>
> My somewhat naive assumption was that if the reference pointed to 
> another GML object, then that would be recognized somehow (though the 
> exact ?how? is probably the issue; document-internal reference via 
> @gml:id could work, but not an external reference), and duplication of 
> objects avoided. The resolving also seems to remove the xlink:href 
> attributes for resolved references, and the gml:id attributes on the 
> elements that are copied into the main GML file. That, in fact, 
> creates duplicate objects in my test case.
>
Complex GML is a pain to deal with and the "classic" GML driver is close 
its maximum potential. I believe the GML_SKIP_RESOLVE_ELEMS feature was 
mostly used to deal with geometry elements (like part of a boundary 
being used in different geometries, in particular use of GML topology 
elements), for which the current copy&paste strategy is fine to 
reconstruct a simple feature geometry. When xlink:href points at 
objects/features, then the ideal strategy is indeed much harder to define.

For anything advanced, using GMLAS 
(https://gdal.org/drivers/vector/gmlas.html#vector-gmlas) is suggested. 
I won't say recommended to avoid people complaining that? it goes to the 
other extreme of returning an output that is (supposed to be) fully 
lossless regarding the original content but hard to comprehend.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/7ca956b3/attachment.htm>

From echterhoff at interactive-instruments.de  Tue Nov 15 04:56:28 2022
From: echterhoff at interactive-instruments.de (Johannes Echterhoff)
Date: Tue, 15 Nov 2022 12:56:28 +0000
Subject: [gdal-dev] GML driver - gml:xlink resolving - just embedding?
In-Reply-To: <2d872019-709b-7de0-eaff-d9f9b26e6639@spatialys.com>
References: <GV1P193MB2232B523304B81154C2F1CB5FC049@GV1P193MB2232.EURP193.PROD.OUTLOOK.COM>
 <2d872019-709b-7de0-eaff-d9f9b26e6639@spatialys.com>
Message-ID: <GV1P193MB22324E6A61E3020D16F25674FC049@GV1P193MB2232.EURP193.PROD.OUTLOOK.COM>

Even,
Thanks ? also for the additional background info!
Johannes

Von: Even Rouault <even.rouault at spatialys.com>
Gesendet: Dienstag, 15. November 2022 13:27
An: Johannes Echterhoff <echterhoff at interactive-instruments.de>; gdal-dev at lists.osgeo.org
Betreff: Re: [gdal-dev] GML driver - gml:xlink resolving - just embedding?


Johannes,

Does resolving of xlink:href by the GML driver (when GML_SKIP_RESOLVE_ELEMS is used, i.e., set to NONE or HUGE) simply mean that the referenced resource is copied into the XML element that contains the xlink:href XML attribute? Tests seem to support this, but I?d really like to double-check on this list.
Yes, that's my recollection of how it works.


My somewhat naive assumption was that if the reference pointed to another GML object, then that would be recognized somehow (though the exact ?how? is probably the issue; document-internal reference via @gml:id could work, but not an external reference), and duplication of objects avoided. The resolving also seems to remove the xlink:href attributes for resolved references, and the gml:id attributes on the elements that are copied into the main GML file. That, in fact, creates duplicate objects in my test case.

Complex GML is a pain to deal with and the "classic" GML driver is close its maximum potential. I believe the GML_SKIP_RESOLVE_ELEMS feature was mostly used to deal with geometry elements (like part of a boundary being used in different geometries, in particular use of GML topology elements), for which the current copy&paste strategy is fine to reconstruct a simple feature geometry. When xlink:href points at objects/features, then the ideal strategy is indeed much harder to define.

For anything advanced, using GMLAS (https://gdal.org/drivers/vector/gmlas.html#vector-gmlas) is suggested. I won't say recommended to avoid people complaining that  it goes to the other extreme of returning an output that is (supposed to be) fully lossless regarding the original content but hard to comprehend.

Even

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/a3d40339/attachment.htm>

From aborruso at gmail.com  Tue Nov 15 14:00:36 2022
From: aborruso at gmail.com (andy)
Date: Tue, 15 Nov 2022 23:00:36 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
Message-ID: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>

Hi,
if I run

ogrinfo -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where "subject LIKE
'Impianti e strutture ricettive'"

I have 22 items in the result. But no one of those have in the subject the
string "'Impianti e strutture ricettive".
Why don't I have zero results?

Thank you

-- 


Andrea Borruso
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/1617eb54/attachment.htm>

From even.rouault at spatialys.com  Tue Nov 15 14:21:54 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Nov 2022 23:21:54 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
Message-ID: <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>

Andrea,

It seems to me that the server ignores the filter, which is likely a bug 
given that its GetCapabilies response includes a 
<ogc:ComparisonOperator>Like</ogc:ComparisonOperator>.

Looking at GDAL logs, it emits a request equivalent to

$ curl -X POST -H "Content-Type: application/xml; charset=UTF-8" -d 
'<?xml version="1.0" encoding="UTF-8"?><csw:GetRecords resultType="hits" 
service="CSW" version="2.0.2" 
xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" 
xmlns:gml="http://www.opengis.net/gml" 
xmlns:dc="http://purl.org/dc/elements/1.1/" 
xmlns:dct="http://purl.org/dc/terms/" 
xmlns:ogc="http://www.opengis.net/ogc" 
xmlns:ows="http://www.opengis.net/ows" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2 
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query 
typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint 
version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" 
singleChar="_" escapeChar="X" 
matchCase="true"><ogc:PropertyName>dc:subject</ogc:PropertyName><ogc:Literal>Impianti 
e strutture 
ricettive</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>' 
https://geodati.gov.it/RNDT/csw

which includes the filter specified in -where, but the server answers:

<?xml version="1.0" encoding="UTF-8"?><csw:GetRecordsResponse 
xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" 
xmlns:dc="http://purl.org/dc/elements/1.1/" 
xmlns:dcmiBox="http://dublincore.org/documents/2000/07/11/dcmi-box/" 
xmlns:dct="http://purl.org/dc/terms/" 
xmlns:gml="http://www.opengis.net/gml" 
xmlns:ows="http://www.opengis.net/ows" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<csw:SearchStatus timestamp="2022-11-15T23:19:01+01:00"/>
<csw:SearchResults elementSet="full" nextRecord="1" 
numberOfRecordsMatched="22" numberOfRecordsReturned="0" 
recordSchema="http://www.opengis.net/cat/csw/2.0.2"/>

Even

Le 15/11/2022 ? 23:00, andy a ?crit?:
> Hi,
> if I run
>
> ogrinfo -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where "subject 
> LIKE 'Impianti e strutture ricettive'"
>
> I have 22 items in the result. But no one of those have in the subject 
> the string "'Impianti e strutture ricettive".
> Why don't I have zero results?
>
> Thank you
>
> -- 
>
>
> Andrea Borruso
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/45dcd003/attachment.htm>

From aborruso at gmail.com  Tue Nov 15 14:47:41 2022
From: aborruso at gmail.com (andy)
Date: Tue, 15 Nov 2022 23:47:41 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
Message-ID: <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>

Ho Evan,
how can I get that log?

If I remove "-al" I have 0 results.
But I do not understand why

Il mar 15 nov 2022, 23:21 Even Rouault <even.rouault at spatialys.com> ha
scritto:

> Andrea,
>
> It seems to me that the server ignores the filter, which is likely a bug
> given that its GetCapabilies response includes a
> <ogc:ComparisonOperator>Like</ogc:ComparisonOperator>.
>
> Looking at GDAL logs, it emits a request equivalent to
>
> $ curl -X POST -H "Content-Type: application/xml; charset=UTF-8" -d '<?xml
> version="1.0" encoding="UTF-8"?><csw:GetRecords resultType="hits"
> service="CSW" version="2.0.2" xmlns:csw=
> "http://www.opengis.net/cat/csw/2.0.2"
> <http://www.opengis.net/cat/csw/2.0.2> xmlns:gml=
> "http://www.opengis.net/gml" <http://www.opengis.net/gml> xmlns:dc=
> "http://purl.org/dc/elements/1.1/" <http://purl.org/dc/elements/1.1/>
> xmlns:dct="http://purl.org/dc/terms/" <http://purl.org/dc/terms/>
> xmlns:ogc="http://www.opengis.net/ogc" <http://www.opengis.net/ogc>
> xmlns:ows="http://www.opengis.net/ows" <http://www.opengis.net/ows>
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> <http://www.w3.org/2001/XMLSchema-instance> xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2
> http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"
> <http://www.opengis.net/cat/csw/2.0.2http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd>><csw:Query
> typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint
> version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" singleChar="_"
> escapeChar="X"
> matchCase="true"><ogc:PropertyName>dc:subject</ogc:PropertyName><ogc:Literal>Impianti
> e strutture
> ricettive</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>'
> https://geodati.gov.it/RNDT/csw
>
> which includes the filter specified in -where, but the server answers:
>
> <?xml version="1.0" encoding="UTF-8"?><csw:GetRecordsResponse xmlns:csw=
> "http://www.opengis.net/cat/csw/2.0.2"
> <http://www.opengis.net/cat/csw/2.0.2> xmlns:dc=
> "http://purl.org/dc/elements/1.1/" <http://purl.org/dc/elements/1.1/>
> xmlns:dcmiBox="http://dublincore.org/documents/2000/07/11/dcmi-box/"
> <http://dublincore.org/documents/2000/07/11/dcmi-box/> xmlns:dct=
> "http://purl.org/dc/terms/" <http://purl.org/dc/terms/> xmlns:gml=
> "http://www.opengis.net/gml" <http://www.opengis.net/gml> xmlns:ows=
> "http://www.opengis.net/ows" <http://www.opengis.net/ows> xmlns:xsd=
> "http://www.w3.org/2001/XMLSchema" <http://www.w3.org/2001/XMLSchema>>
> <csw:SearchStatus timestamp="2022-11-15T23:19:01+01:00"/>
> <csw:SearchResults elementSet="full" nextRecord="1"
> numberOfRecordsMatched="22" numberOfRecordsReturned="0" recordSchema=
> "http://www.opengis.net/cat/csw/2.0.2"
> <http://www.opengis.net/cat/csw/2.0.2>/>
>
> Even
> Le 15/11/2022 ? 23:00, andy a ?crit :
>
> Hi,
> if I run
>
> ogrinfo -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where "subject LIKE
> 'Impianti e strutture ricettive'"
>
> I have 22 items in the result. But no one of those have in the subject the
> string "'Impianti e strutture ricettive".
> Why don't I have zero results?
>
> Thank you
>
> --
>
>
> Andrea Borruso
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/3c44f2df/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Nov 15 14:51:19 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Nov 2022 23:51:19 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
 <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>
Message-ID: <fe75a369-da4e-9663-97fc-f69ee6449b62@spatialys.com>

Add --debug on . You will get only the requests. The answers aren't logged.

Le 15/11/2022 ? 23:47, andy a ?crit?:
> Ho Evan,
> how can I get that log?
>
> If I remove "-al" I have 0 results.
> But I do not understand why
>
> Il mar 15 nov 2022, 23:21 Even Rouault <even.rouault at spatialys.com> ha 
> scritto:
>
>     Andrea,
>
>     It seems to me that the server ignores the filter, which is likely
>     a bug given that its GetCapabilies response includes a
>     <ogc:ComparisonOperator>Like</ogc:ComparisonOperator>.
>
>     Looking at GDAL logs, it emits a request equivalent to
>
>     $ curl -X POST -H "Content-Type: application/xml; charset=UTF-8"
>     -d '<?xml version="1.0" encoding="UTF-8"?><csw:GetRecords
>     resultType="hits" service="CSW" version="2.0.2"
>     xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"
>     <http://www.opengis.net/cat/csw/2.0.2>
>     xmlns:gml="http://www.opengis.net/gml"
>     <http://www.opengis.net/gml>
>     xmlns:dc="http://purl.org/dc/elements/1.1/"
>     <http://purl.org/dc/elements/1.1/>
>     xmlns:dct="http://purl.org/dc/terms/" <http://purl.org/dc/terms/>
>     xmlns:ogc="http://www.opengis.net/ogc"
>     <http://www.opengis.net/ogc>
>     xmlns:ows="http://www.opengis.net/ows"
>     <http://www.opengis.net/ows>
>     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>     <http://www.w3.org/2001/XMLSchema-instance>
>     xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2
>     http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"
>     <http://www.opengis.net/cat/csw/2.0.2http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd>><csw:Query
>     typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint
>     version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*"
>     singleChar="_" escapeChar="X"
>     matchCase="true"><ogc:PropertyName>dc:subject</ogc:PropertyName><ogc:Literal>Impianti
>     e strutture
>     ricettive</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>'
>     https://geodati.gov.it/RNDT/csw
>
>     which includes the filter specified in -where, but the server answers:
>
>     <?xml version="1.0" encoding="UTF-8"?><csw:GetRecordsResponse
>     xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"
>     <http://www.opengis.net/cat/csw/2.0.2>
>     xmlns:dc="http://purl.org/dc/elements/1.1/"
>     <http://purl.org/dc/elements/1.1/>
>     xmlns:dcmiBox="http://dublincore.org/documents/2000/07/11/dcmi-box/"
>     <http://dublincore.org/documents/2000/07/11/dcmi-box/>
>     xmlns:dct="http://purl.org/dc/terms/" <http://purl.org/dc/terms/>
>     xmlns:gml="http://www.opengis.net/gml"
>     <http://www.opengis.net/gml>
>     xmlns:ows="http://www.opengis.net/ows"
>     <http://www.opengis.net/ows>
>     xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>     <http://www.w3.org/2001/XMLSchema>>
>     <csw:SearchStatus timestamp="2022-11-15T23:19:01+01:00"/>
>     <csw:SearchResults elementSet="full" nextRecord="1"
>     numberOfRecordsMatched="22" numberOfRecordsReturned="0"
>     recordSchema="http://www.opengis.net/cat/csw/2.0.2"
>     <http://www.opengis.net/cat/csw/2.0.2>/>
>
>     Even
>
>     Le 15/11/2022 ? 23:00, andy a ?crit?:
>>     Hi,
>>     if I run
>>
>>     ogrinfo -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where
>>     "subject LIKE 'Impianti e strutture ricettive'"
>>
>>     I have 22 items in the result. But no one of those have in the
>>     subject the string "'Impianti e strutture ricettive".
>>     Why don't I have zero results?
>>
>>     Thank you
>>
>>     -- 
>>
>>
>>     Andrea Borruso
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221115/6b80eb20/attachment.htm>

From bradh at frogmouth.net  Tue Nov 15 15:11:45 2022
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 16 Nov 2022 10:11:45 +1100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
Message-ID: <12093558.O9o76ZdvQC@audax>

On Wednesday, 16 November 2022 9:21:54 AM AEDT Even Rouault wrote:
> Andrea,
> 
> It seems to me that the server ignores the filter, which is likely a bug
> given that its GetCapabilies response includes a
> <ogc:ComparisonOperator>Like</ogc:ComparisonOperator>.

It looks like the filter is doing something (since without it, I get about a 
thousand times the results - 22700 vs 22).

However its not clear its working well:

ogrinfo -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where "subject LIKE 
'commerciale'"
INFO: Open of `CSW:http://geodati.gov.it/RNDT/csw'
      using driver `CSW' successful.

Layer name: records
Geometry: Polygon
Feature Count: 1
Extent: (6.620000, 44.060000) - (9.210000, 46.459999)
Layer SRS WKT:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
Geometry Column = boundingbox
identifier: String (0.0)
other_identifiers: StringList (0.0)
type: String (0.0)
subject: String (0.0)
other_subjects: StringList (0.0)
references: String (0.0)
other_references: StringList (0.0)
modified: String (0.0)
abstract: String (0.0)
date: String (0.0)
language: String (0.0)
rights: String (0.0)
format: String (0.0)
other_formats: StringList (0.0)
creator: String (0.0)
source: String (0.0)
anytext: String (0.0)
OGRFeature(records):1
  identifier (String) = r_piemon:982e8c65-99df-4c7a-a8fe-0908fd06ad6f
  other_identifiers (StringList) = (1:{CC884939-E2DC-4313-BEE0-7A9AEAD98ED6})
  type (String) = downloadableData
  subject (String) = RNDT
  other_subjects (StringList) = 
(9:EU,edificato,residenziale,produttivo,commerciale,ppr,opendata,Regionale,planningCadastre)
  references (String) = https://www.datigeo-piem-download.it/direct/
Geoportale/RegionePiemonte/PPR/edifici_PPR_corretto.zip
  other_references (StringList) = (2:https://www.geoportale.piemonte.it/
geonetwork/srv/api/records/r_piemon:982e8c65-99df-4c7a-a8fe-0908fd06ad6f/
attachments/edifici_ppr_corretto_s.png,https://geodati.gov.it/geoportalRNDTPA/
csw?getxml=%7BCC884939-E2DC-4313-BEE0-7A9AEAD98ED6%7D)
  modified (String) = 2022-11-15T14:51:16+01:00
  abstract (String) = Il dato contiene l'aggiornamento degli edifici e altri 
manufatti derivati dalle diverse edizioni della CTRN. I dati sono stati 
prodotti a partire da una selezione di elementi derivati dalla CTRN (edifici 
residenziali, edifici produttivi commerciali, cimiteri) e successivamente 
aggiornati attraverso fotointerpretazione di ortofoto. Il dataset deriva dallo 
shape file elaborato dal CSI per il Progetto Rapporto Stato Territorio ed ? 
stato modificato dal Settore Territorio e Paesaggio selezionando soltanto 
l'edificato residenziale e produttivo-commerciale ed apportando alcune modifiche
  source (String) = {FE705F35-5AD1-4570-A0FD-E1E882A89496}
  POLYGON ((6.62 44.06,9.21 44.06,9.21 46.4599990844727,6.62 
46.4599990844727,6.62 44.06))


So its perhaps matching other_subjects or abstract field instead?

Brad



From stefano.iacovella at gmail.com  Wed Nov 16 01:00:22 2022
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Wed, 16 Nov 2022 10:00:22 +0100
Subject: [gdal-dev] Working with IFC files
Message-ID: <CAG9OqYoOFXX3=3HtK2kEcGzX2pjSqQmjNi+_dGRAeb1xcjje=g@mail.gmail.com>

Hi all,

I am working with BIM data to integrate them in a geodatabase.
Data are delivered in IFC format (1)
I am curious about the possibility to ingest them using OGR.
As far as I know there's no driver available.
Is there someone in the list who has had some experience in a similar
scenario?

Thank you

Stefano





1) https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/f5ce9241/attachment.htm>

From jrmorreale_ml at enoreth.net  Wed Nov 16 02:22:45 2022
From: jrmorreale_ml at enoreth.net (Jean-Roc Morreale (ml))
Date: Wed, 16 Nov 2022 11:22:45 +0100
Subject: [gdal-dev] Working with IFC files
In-Reply-To: <CAG9OqYoOFXX3=3HtK2kEcGzX2pjSqQmjNi+_dGRAeb1xcjje=g@mail.gmail.com>
References: <CAG9OqYoOFXX3=3HtK2kEcGzX2pjSqQmjNi+_dGRAeb1xcjje=g@mail.gmail.com>
Message-ID: <ad704c947b28fe70140bb60fd4d14086bf55c6bd.camel@enoreth.net>

Hi, we sponsored a feasability study for ifc support in qgis/gdal in
2021, it is in in french but I'll try to sum it up asap

Le mercredi 16 novembre 2022 ? 10:00 +0100, Stefano Iacovella a ?crit?:
> Hi all,
> 
> I am working with BIM data to integrate them in a geodatabase.
> Data are delivered in IFC format (1)
> I am curious about the possibility to ingest them using OGR.
> As far as I know there's no driver available.
> Is there someone in the list who has had some experience in a similar
> scenario?
> 
> Thank you
> 
> Stefano
> 
> 
> 
> 
> 
> 1) https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From aborruso at gmail.com  Wed Nov 16 02:32:14 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 11:32:14 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <fe75a369-da4e-9663-97fc-f69ee6449b62@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
 <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>
 <fe75a369-da4e-9663-97fc-f69ee6449b62@spatialys.com>
Message-ID: <CAHEdGZOjoROmx-sv=SCm+goh3xaXw6mtBU6ZCNk_e0Zqscvgjg@mail.gmail.com>

Hi Even,
I need to run a CSW query using exact strings.

Via curl it's in this way '<ogc:Literal>"Impianti e strutture
ricettive"</ogc:Literal>' (using the double quotes inside):

curl -X POST -H "Content-Type: application/xml; charset=UTF-8" -d '<?xml
version="1.0" encoding="UTF-8"?><csw:GetRecords resultType="results"
service="CSW" version="2.0.2" xmlns:csw="
http://www.opengis.net/cat/csw/2.0.2" xmlns:gml="http://www.opengis.net/gml"
xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="
http://purl.org/dc/terms/" xmlns:ogc="http://www.opengis.net/ogc"
xmlns:ows="http://www.opengis.net/ows" xmlns:xsi="
http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.opengis.net/cat/csw/2.0.2
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query
typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint
version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" singleChar="_"
escapeChar="!"><ogc:PropertyName>dc:Subject</ogc:PropertyName><ogc:Literal>"Impianti
e strutture
ricettive"</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>'
https://geodati.gov.it/RNDT/csw

Ho to write and get it in ogr?
There is surely a way to escape the double quotes, but I do not find the
way to do it.

It's not

ogrinfo --debug on -ro -q -al "CSW:http://geodati.gov.it/RNDT/csw" -where
"abstract LIKE '\"Impianti e strutture ricettive\"'"

Thank you

>

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/4b1979fc/attachment-0001.htm>

From aborruso at gmail.com  Wed Nov 16 02:45:54 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 11:45:54 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
Message-ID: <CAHEdGZPiEHH1NWp4NqpE6UXs=KbnVsuVvc9JmYyoPoepZNLobg@mail.gmail.com>

Hi Brad,

It looks like the filter is doing something (since without it, I get about
> a thousand times the results - 22700 vs 22).


I think that when I have more words, it works in OR.
I don't know if this is the right/standard way to work.

If I apply double quotes - <ogc:Literal>"Impianti e strutture
ricettive"</ogc:Literal> - I have 0 results, that is the right result:

curl -X POST -H "Content-Type: application/xml; charset=UTF-8" -d '<?xml
version="1.0" encoding="UTF-8"?><csw:GetRecords resultType="results"
service="CSW" version="2.0.2" xmlns:csw="
http://www.opengis.net/cat/csw/2.0.2" xmlns:gml="http://www.opengis.net/gml"
xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="
http://purl.org/dc/terms/" xmlns:ogc="http://www.opengis.net/ogc"
xmlns:ows="http://www.opengis.net/ows" xmlns:xsi="
http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.opengis.net/cat/csw/2.0.2
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query
typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint
version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" singleChar="_"
escapeChar="!"><ogc:PropertyName>dc:Subject</ogc:PropertyName><ogc:Literal>"Impianti
e strutture
ricettive"</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>'
https://geodati.gov.it/RNDT/csw

>

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/d99b6e08/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 02:51:27 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 11:51:27 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZOjoROmx-sv=SCm+goh3xaXw6mtBU6ZCNk_e0Zqscvgjg@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
 <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>
 <fe75a369-da4e-9663-97fc-f69ee6449b62@spatialys.com>
 <CAHEdGZOjoROmx-sv=SCm+goh3xaXw6mtBU6ZCNk_e0Zqscvgjg@mail.gmail.com>
Message-ID: <240272ec-d2f5-4d55-750e-4474b2f2da82@spatialys.com>

Hi,
> I need to run a CSW query using exact strings.
>
> Via curl it's in this way '<ogc:Literal>"Impianti e strutture 
> ricettive"</ogc:Literal>' (using the double quotes inside):

hum, well you actually hit a bug in the OGR OGC Filter code I've just 
fixed per https://github.com/OSGeo/gdal/pull/6713

With the fix the query sent is now:

HTTP: These POSTFIELDS were sent:<?xml version="1.0" 
encoding="UTF-8"?><csw:GetRecords resultType="results" service="CSW" 
version="2.0.2" startPosition="1" maxRecords="500" 
xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" 
xmlns:gml="http://www.opengis.net/gml" 
xmlns:dc="http://purl.org/dc/elements/1.1/" 
xmlns:dct="http://purl.org/dc/terms/" 
xmlns:ogc="http://www.opengis.net/ogc" 
xmlns:ows="http://www.opengis.net/ows" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2 
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query 
typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint 
version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard='*' 
singleChar='_' escapeChar='!' 
matchCase='true'><ogc:PropertyName>dct:abstract</ogc:PropertyName><ogc:Literal>&quot;Impianti 
e strutture 
ricettive&quot;</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>

That returns zero feature. That said, I'm not sure that is what you want 
to do, since the server should really look for a dc:subject whose value 
is "Impianti e strutture ricettive", with the double quotes.

Probably -where "abstract = 'Impianti e strutture ricettive'"? is more 
what you want. But that returns also 0 features

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From aborruso at gmail.com  Wed Nov 16 03:37:22 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 12:37:22 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <240272ec-d2f5-4d55-750e-4474b2f2da82@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
 <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>
 <fe75a369-da4e-9663-97fc-f69ee6449b62@spatialys.com>
 <CAHEdGZOjoROmx-sv=SCm+goh3xaXw6mtBU6ZCNk_e0Zqscvgjg@mail.gmail.com>
 <240272ec-d2f5-4d55-750e-4474b2f2da82@spatialys.com>
Message-ID: <CAHEdGZNq44efBvVGE_UC7DmsH_=bbZkEQ=aadGpcFoXZ_q9vmA@mail.gmail.com>

Even
first of all thank you

On Wed, 16 Nov 2022 at 11:51, Even Rouault <even.rouault at spatialys.com>
wrote:

> That returns zero feature. That said, I'm not sure that is what you want
> to do, since the server should really look for a dc:subject whose value
> is "Impianti e strutture ricettive", with the double quotes.
>
> Probably -where "abstract = 'Impianti e strutture ricettive'"  is more
> what you want. But that returns also 0 features
>

I look for  `Impianti e strutture ricettive` both in abstract and subject.

But I didn't imagine that write this

ogrinfo --debug on -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where
"abstract LIKE 'Impianti e strutture ricettive'"

was a search in OR: Impianti OR e OR strutture OR ricettive, because since
it's some kind of SQL command, to me it meant exactly the whole string
`Impianti e strutture ricettive`.
But I understand that this is not an error, and that command expects that
type of OR search, unless you put everything in double quotes. Am I right?

Thank you


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/61170132/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 04:03:20 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 13:03:20 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZNq44efBvVGE_UC7DmsH_=bbZkEQ=aadGpcFoXZ_q9vmA@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <b894c038-6eab-d511-20d5-0ba0454f773b@spatialys.com>
 <CAHEdGZN0s90mHjcvYDMAZgkXbSTJqdTEQ0ox+hFAdf5jf=6j_w@mail.gmail.com>
 <fe75a369-da4e-9663-97fc-f69ee6449b62@spatialys.com>
 <CAHEdGZOjoROmx-sv=SCm+goh3xaXw6mtBU6ZCNk_e0Zqscvgjg@mail.gmail.com>
 <240272ec-d2f5-4d55-750e-4474b2f2da82@spatialys.com>
 <CAHEdGZNq44efBvVGE_UC7DmsH_=bbZkEQ=aadGpcFoXZ_q9vmA@mail.gmail.com>
Message-ID: <81e680ad-5810-0f82-d6cc-c0431bd95844@spatialys.com>

>
> But I didn't imagine that write this
>
> ogrinfo --debug on -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where 
> "abstract LIKE 'Impianti e strutture ricettive'"
>
> was a search in OR: Impianti OR e OR strutture OR ricettive,?because 
> since it's some kind of SQL command,?to me it meant exactly the whole 
> string? `Impianti e strutture ricettive`.
Yes, it should.
> But I understand that this is not an error, and that command expects 
> that type of OR search,?unless you put everything in double quotes. Am 
> I right?

I'd assume this is a server-specific behavior/bug. But maybe this is a 
documented behavior of CSW, which would be odd to me (since the OR 
behaviour can be cleanly modeled with OGC filters). But I'm not a 
specialist of CSW, so I let you read the spec :-)

Even

>
> Thank you
>
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/867c91da/attachment.htm>

From aborruso at gmail.com  Wed Nov 16 04:08:04 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 13:08:04 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
Message-ID: <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>

Hi,
I'm adding another related question.

In the CSW server I'm using, we have some element that I can query, as
"subject" and "abstract".

In the documentation I read that I can run a query using both OGC ISO AP
names and Dublin core names.

In example `apiso:subject` and `dc:subject`.

If I run

ogrinfo --debug on -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where
"subject LIKE 'inventario'"

OGR creates for me <ogc:PropertyName>dc:subject</ogc:PropertyName>, then I
have `dc:subject`.

In the manual of my CSW server I read that I can query it using also
`apiso:title`.
How can I write a ogrinfo that runs a query based on `apiso:title`?

The only way is to write the XML query?

Because if I run something like this

ogrinfo --debug on -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where
"apiso:title LIKE 'inventario'"

I have

ERROR 1: SQL Expression Parsing Error: syntax error, unexpected $undefined,
expecting end of string. Occurred around : apiso:title LIKE 'inventario'

FAILURE: SetAttributeFilter(apiso:title LIKE 'inventario') failed.

And I have errors also if I write `-where "'apiso:title' LIKE 'inventario'"`

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/1fbad9e3/attachment-0001.htm>

From aborruso at gmail.com  Wed Nov 16 04:41:12 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 13:41:12 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
Message-ID: <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>

Here another example:
http://www.pcn.minambiente.it/geoportal/csw?request=getCapabilities&service=csw

In the SupportedISOQueryables I have `apiso:Title`.

Is it possible to use ogrinfo and search using a where condition based on
the `apiso:Title` field?

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/fe739f91/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 04:59:59 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 13:59:59 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
Message-ID: <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>


Le 16/11/2022 ? 13:41, andy a ?crit?:
> Here another example:
> http://www.pcn.minambiente.it/geoportal/csw?request=getCapabilities&service=csw 
> <http://www.pcn.minambiente.it/geoportal/csw?request=getCapabilities&service=csw>
>
> In the?SupportedISOQueryables?I have `apiso:Title`.
>
> Is it possible to use ogrinfo and search using a where condition?based 
> on the `apiso:Title` field?

No, that's not currently implemented in the driver. It hardcodes 
"subject" to "dc:subject" and "title" to "dc:title", and doesn't use 
SupportedISOQueryables.

Enhancement left as an exercice to contributors :-)

>
> Thank you
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/6bbe4f52/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 05:03:52 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 14:03:52 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
Message-ID: <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>

I declare this motion passed with +1 from PSC members KurtS, JukkaR, 
MateuszL and me.

Even

Le 14/11/2022 ? 13:22, Even Rouault a ?crit?:
> Hi,
>
> I feel the discussion phase has finished. There were a few questions 
> about the existing GDT_Byte unsigned 8-bit integer type, if it should 
> be renamed/aliased/etc, but no obvious conclusion emerged from this, 
> and I'd suggest we keep with the status-quo with GDT_Byte, and the RFC 
> remains on just adding GDT_Int8 for signed 8-bit integer.
>
> Motion:
>
> Adopt RFC 87: Signed int8 data type for raster 
> (https://github.com/OSGeo/gdal/pull/6634)
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From aborruso at gmail.com  Wed Nov 16 05:07:53 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 14:07:53 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
Message-ID: <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>

Hi Even,

On Wed, 16 Nov 2022 at 14:00, Even Rouault <even.rouault at spatialys.com>
wrote:

> No, that's not currently implemented in the driver. It hardcodes "subject"
> to "dc:subject" and "title" to "dc:title", and doesn't use
> SupportedISOQueryables.
>
If I use `dc:title` in this XML query

curl -X POST -H "Content-Type: application/xml; charset=UTF-8" -d '<?xml
version="1.0" encoding="UTF-8"?><csw:GetRecords resultType="results"
service="CSW" version="2.0.2" xmlns:csw="
http://www.opengis.net/cat/csw/2.0.2" xmlns:gml="http://www.opengis.net/gml"
xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="
http://purl.org/dc/terms/" xmlns:ogc="http://www.opengis.net/ogc"
xmlns:ows="http://www.opengis.net/ows" xmlns:xsi="
http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.opengis.net/cat/csw/2.0.2
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query
typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint
version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" singleChar="_"
escapeChar="!"><ogc:PropertyName>dc:title</ogc:PropertyName><ogc:Literal>strutture</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>'
https://geodati.gov.it/RNDT/csw

I have some results.

If I use OGR

ogrinfo --debug on -ro -al "CSW:http://www.pcn.minambiente.it/geoportal/csw"
-where "title LIKE 'strutture'"

I have this error:

ERROR 1: "title" not recognised as an available field.

as if title were not interpreted as `dc:title`.

Is this a bug in the server?

Than you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/7b808e0d/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 05:17:21 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 14:17:21 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
Message-ID: <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>


Le 16/11/2022 ? 14:07, andy a ?crit?:
> Hi Even,
>
> On Wed, 16 Nov 2022 at 14:00, Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     No, that's not currently implemented in the driver. It hardcodes
>     "subject" to "dc:subject" and "title" to "dc:title", and doesn't
>     use SupportedISOQueryables.
>
> If I use `dc:title` in this XML query
>
> curl -X POST -H "Content-Type: application/xml; charset=UTF-8" -d 
> '<?xml version="1.0" encoding="UTF-8"?><csw:GetRecords 
> resultType="results" service="CSW" version="2.0.2" 
> xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" 
> xmlns:gml="http://www.opengis.net/gml" 
> xmlns:dc="http://purl.org/dc/elements/1.1/" 
> xmlns:dct="http://purl.org/dc/terms/" 
> xmlns:ogc="http://www.opengis.net/ogc" 
> xmlns:ows="http://www.opengis.net/ows" 
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
> xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2 
> http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query 
> typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint 
> version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" 
> singleChar="_" 
> escapeChar="!"><ogc:PropertyName>dc:title</ogc:PropertyName><ogc:Literal>strutture</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>' 
> https://geodati.gov.it/RNDT/csw
>
> I have some results.
>
> If I use OGR
>
> ogrinfo --debug on -ro -al 
> "CSW:http://www.pcn.minambiente.it/geoportal/csw" -where "title LIKE 
> 'strutture'"
>
> I have this error:
>
> ERROR 1: "title" not recognised as an available field.
>
> as if title were not interpreted as `dc:title`.
>
> Is this a bug in the server?

No, title is not in the lists of hardcoded fields by the OGR CSW driver. 
Probably a fix/improvement to do in the driver.

If I recall well from git history, I coded the driver on a rainy sunday 
afternoon 7 years ago, and it didn't receive much love afterwards :-) 
There are certainly room for a lot of improvements.

>
> Than you
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/b3ae1878/attachment-0001.htm>

From aborruso at gmail.com  Wed Nov 16 05:33:02 2022
From: aborruso at gmail.com (andy)
Date: Wed, 16 Nov 2022 14:33:02 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
Message-ID: <CAHEdGZOWqKdZb1059kBoKN2_=c2heoJ0qOFMTd9YnwtDxBh-=g@mail.gmail.com>

Hi Even,

On Wed, 16 Nov 2022 at 14:17, Even Rouault <even.rouault at spatialys.com>
wrote:

> No, title is not in the lists of hardcoded fields by the OGR CSW driver.
> Probably a fix/improvement to do in the driver.
>
> If I recall well from git history, I coded the driver on a rainy sunday
> afternoon 7 years ago, and it didn't receive much love afterwards :-) There
> are certainly room for a lot of improvements.
>

I would like to help you write the code, but I don't know how to do it. But
I can do tests and write tutorials.
Today I discovered a bug a find a useful fix.

My love probably has no value for you, but what you've been doing for years
is something extraordinary, and I love you for it :)

Thank you again


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/38e97a74/attachment.htm>

From hermann.rodrigues at gmail.com  Wed Nov 16 08:32:08 2022
From: hermann.rodrigues at gmail.com (Hermann Rodrigues)
Date: Wed, 16 Nov 2022 11:32:08 -0500
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
Message-ID: <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>

Hi,

I am a bit late for this discussion, but can someone please clarify if this
is a breaking change? Is this keeping the old behavior in place when
reading GDT_Byte or replacing it completely when reading rasters storing
8-bit pixels?

Best,

hermann

----------------------------------------------------------------------
Hermann Rodrigues
hermann.rodrigues at gmail.com
hermann at csr.ufmg.br
Twitter: @horodrigues | @dinamica_ego
Centro de Sensoriamento Remoto / UFMG
https://csr.ufmg.br | https://dinamicaego.com


On Wed, Nov 16, 2022 at 8:04 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> I declare this motion passed with +1 from PSC members KurtS, JukkaR,
> MateuszL and me.
>
> Even
>
> Le 14/11/2022 ? 13:22, Even Rouault a ?crit :
> > Hi,
> >
> > I feel the discussion phase has finished. There were a few questions
> > about the existing GDT_Byte unsigned 8-bit integer type, if it should
> > be renamed/aliased/etc, but no obvious conclusion emerged from this,
> > and I'd suggest we keep with the status-quo with GDT_Byte, and the RFC
> > remains on just adding GDT_Int8 for signed 8-bit integer.
> >
> > Motion:
> >
> > Adopt RFC 87: Signed int8 data type for raster
> > (https://github.com/OSGeo/gdal/pull/6634)
> >
> > Starting with my +1,
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/d0afe72a/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 08:38:54 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 17:38:54 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
Message-ID: <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>


Le 16/11/2022 ? 17:32, Hermann Rodrigues a ?crit?:
> Hi,
>
> I am a bit late for this discussion, but can someone please clarify if 
> this is a breaking change? Is this keeping the old behavior in place 
> when reading GDT_Byte or replacing it completely when reading rasters 
> storing 8-bit pixels?

This doesn't affect GDT_Byte rasters that were really unsigned 8-bit pixels.

For signed 8-bit pixels, 
https://gdal.org/development/rfc/rfc87_signed_int8.html#backward-compatibility 
should answer your question

>
> Best,
>
> hermann
>
> ----------------------------------------------------------------------
> Hermann Rodrigues
> hermann.rodrigues at gmail.com
> hermann at csr.ufmg.br
> Twitter: @horodrigues | @dinamica_ego
> Centro de Sensoriamento Remoto / UFMG
> https://csr.ufmg.br | https://dinamicaego.com
>
>
> On Wed, Nov 16, 2022 at 8:04 AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     I declare this motion passed with +1 from PSC members KurtS, JukkaR,
>     MateuszL and me.
>
>     Even
>
>     Le 14/11/2022 ? 13:22, Even Rouault a ?crit?:
>     > Hi,
>     >
>     > I feel the discussion phase has finished. There were a few
>     questions
>     > about the existing GDT_Byte unsigned 8-bit integer type, if it
>     should
>     > be renamed/aliased/etc, but no obvious conclusion emerged from
>     this,
>     > and I'd suggest we keep with the status-quo with GDT_Byte, and
>     the RFC
>     > remains on just adding GDT_Int8 for signed 8-bit integer.
>     >
>     > Motion:
>     >
>     > Adopt RFC 87: Signed int8 data type for raster
>     > (https://github.com/OSGeo/gdal/pull/6634)
>     >
>     > Starting with my +1,
>     >
>     > Even
>     >
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/ffc7bd98/attachment.htm>

From hermann.rodrigues at gmail.com  Wed Nov 16 09:08:46 2022
From: hermann.rodrigues at gmail.com (Hermann Rodrigues)
Date: Wed, 16 Nov 2022 12:08:46 -0500
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
Message-ID: <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>

Hi,

So based on that RFC it is a breaking change when reading signed images. I
confess that this type of silent behavor change scares me.

Why dont make this an opt-in behavior instead of just breaking application
code silently? Otherwise, I would rather have GDT_Byte removed so that
application code would not compile against new versions of GDAL. At least
that makes migration to new versions less risky.

Best,

hermann

----------------------------------------------------------------------
Hermann Rodrigues
hermann.rodrigues at gmail.com
hermann at csr.ufmg.br
Twitter: @horodrigues | @dinamica_ego
Centro de Sensoriamento Remoto / UFMG
https://csr.ufmg.br | https://dinamicaego.com


On Wed, Nov 16, 2022 at 11:38 AM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 16/11/2022 ? 17:32, Hermann Rodrigues a ?crit :
>
> Hi,
>
> I am a bit late for this discussion, but can someone please clarify if
> this is a breaking change? Is this keeping the old behavior in place when
> reading GDT_Byte or replacing it completely when reading rasters storing
> 8-bit pixels?
>
> This doesn't affect GDT_Byte rasters that were really unsigned 8-bit
> pixels.
>
> For signed 8-bit pixels,
> https://gdal.org/development/rfc/rfc87_signed_int8.html#backward-compatibility
> should answer your question
>
>
> Best,
>
> hermann
>
> ----------------------------------------------------------------------
> Hermann Rodrigues
> hermann.rodrigues at gmail.com
> hermann at csr.ufmg.br
> Twitter: @horodrigues | @dinamica_ego
> Centro de Sensoriamento Remoto / UFMG
> https://csr.ufmg.br | https://dinamicaego.com
>
>
> On Wed, Nov 16, 2022 at 8:04 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> I declare this motion passed with +1 from PSC members KurtS, JukkaR,
>> MateuszL and me.
>>
>> Even
>>
>> Le 14/11/2022 ? 13:22, Even Rouault a ?crit :
>> > Hi,
>> >
>> > I feel the discussion phase has finished. There were a few questions
>> > about the existing GDT_Byte unsigned 8-bit integer type, if it should
>> > be renamed/aliased/etc, but no obvious conclusion emerged from this,
>> > and I'd suggest we keep with the status-quo with GDT_Byte, and the RFC
>> > remains on just adding GDT_Int8 for signed 8-bit integer.
>> >
>> > Motion:
>> >
>> > Adopt RFC 87: Signed int8 data type for raster
>> > (https://github.com/OSGeo/gdal/pull/6634)
>> >
>> > Starting with my +1,
>> >
>> > Even
>> >
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/3174004d/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Nov 16 09:38:16 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 18:38:16 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
Message-ID: <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>


>
> So based on that RFC it is a breaking change when reading signed 
> images. I confess that this type of silent behavor change scares me.
It is documented in 
https://github.com/OSGeo/gdal/blob/master/MIGRATION_GUIDE.TXT which is 
always referenced in the release notes.
>
> Why dont make this an opt-in behavior instead of just breaking 
> application code silently?
Opt-in behaviour would mean clutering the GDAL code base even more, to 
implement both the legacy and the new behavior. One of the purposes of 
the RFC was to de-clutter the GDAL code base.
> Otherwise, I would rather have GDT_Byte removed so that application 
> code would not compile against new versions of GDAL. At least that 
> makes migration to new versions less risky.

Removing GDT_Byte would have enormous breaking implications! Signed Byte 
is I believe a marginal feature not commonly used by GDAL based 
applications, partly because the support for it before RFC87 was clunky 
and partial.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Nov 16 10:42:26 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 19:42:26 +0100
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework for
 C/C++ unit tests
Message-ID: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>

Hi,

As this is RFC season. I've prepared RFC88: Use GoogleTest framework for 
C/C++ unit tests

Text at https://github.com/OSGeo/gdal/pull/6720

Summary:

The document proposes and describes conversion of the existing C/C++
autotest suite to use the `GoogleTest
framework <https://github.com/google/googletest>`__.

GoogleTest is a popular and maintained framework for C/C++ test
writing, that is a better replacement for the `TUT framework
<https://github.com/mrzechonek/tut-framework>`__ that we use currently.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From hermann.rodrigues at gmail.com  Wed Nov 16 11:23:53 2022
From: hermann.rodrigues at gmail.com (Hermann Rodrigues)
Date: Wed, 16 Nov 2022 14:23:53 -0500
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
Message-ID: <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>

Hi

>

> > So based on that RFC it is a breaking change when reading signed
> > images. I confess that this type of silent behavor change scares me.
> It is documented in
> https://github.com/OSGeo/gdal/blob/master/MIGRATION_GUIDE.TXT which is
> always referenced in the release notes.
> >
> > Why dont make this an opt-in behavior instead of just breaking
> > application code silently?
> Opt-in behaviour would mean clutering the GDAL code base even more, to
> implement both the legacy and the new behavior. One of the purposes of
> the RFC was to de-clutter the GDAL code base.
>

I understand the idea of decluttering the code base and I think it is a
valid point and I agree that not having to check PIXELTYPE when reading or
writing images is better. What I still don't understand is why break code
in a way that the compiler would not help at all when just compiling a
library or application against the new GDAL version.

I think long term compatibility is a very desirable feature, and several
applications just use GDAL as part of their code base without even being
aware of what is happening in the GDAL development front. The same is true
for several other libraries, given the fact the use of package managers
(VCPKG, conan etc) are becoming more common. For some code bases, GDAL is
just a small cog, and I believe it is very easy for the developers to
simply download the next version from the package manager thinking that
they are getting mostly bug fixes and not being aware of new silent
incompatibilities.


> > Otherwise, I would rather have GDT_Byte removed so that application
> > code would not compile against new versions of GDAL. At least that
> > makes migration to new versions less risky.
>
> Removing GDT_Byte would have enormous breaking implications! Signed Byte
> is I believe a marginal feature not commonly used by GDAL based
> applications, partly because the support for it before RFC87 was clunky
> and partial.
>

Sorry, but I think it is funny that you mention removing GDT_Byte would
have breaking implications, since I am expressing my reservations against a
change that will have breaking implications. :)

I don't understand what limitations you are referring to. Perhaps the
support was broken to some types of raster files? In my field, signed 8-bit
images representing categorical images are very common, given the fact they
can be used fully decompressed and represent a null value/nodata in very
convenient way (as a negative value).

Best,

hermann

----------------------------------------------------------------------
Hermann Rodrigues
hermann.rodrigues at gmail.com
hermann at csr.ufmg.br
Twitter: @horodrigues | @dinamica_ego
Centro de Sensoriamento Remoto / UFMG
https://csr.ufmg.br | https://dinamicaego.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/94109a2b/attachment.htm>

From schwehr at gmail.com  Wed Nov 16 11:28:10 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 16 Nov 2022 11:28:10 -0800
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
Message-ID: <CACmBxyvGSoXXK0NduRapBcg-Nt2Bw9S8p8oaE6Mq_0GZ_Dc1hQ@mail.gmail.com>

I am +1 for this switch, but I'm definitely biased by working at Google.
My thoughts:

tut definitely gets the job done, but I found it a bit awkward too.  But I
think the updates and the additional features of GoogleTest are probably
worth it.  I especially like the distinction between ASSERT.* that
immediately stops a test when it finds and issue and EXPECT that lets the
test move forward until the end of that test so that I can see all of the
results of EXPECTS.  The formerly separate "mock" capabilities are really
handy too.

I wrote a bunch of C++ GDAL tests using GoogleTests in the 2013-207 time
frame (Even used a bit of that work as starters to the tests in PROJ, but
he went way beyond what I had).  I have a lot of the tests in github, but
they are written against very old versions of GDAL.  And, the GoogleTest
ability to work with newer versions of C++ has gotten a lot stronger.
C++17 wasn't even available when I wrote a lot of the test code.  We have
been upgrading GDAL and improving the tests, so if there is interest, I can
try to do some updates to the repo.  If any of the autotest2 code is used,
the license should be switched from Apache 2.0 to the MIT style
license mentioned
here
<https://github.com/OSGeo/gdal/blob/a394f9cb299b2c3c2159098483d1fece3a464fda/LICENSE.TXT#L15>
.

https://github.com/schwehr/gdal-autotest2/tree/master/cpp

-Kurt


On Wed, Nov 16, 2022 at 10:42 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> As this is RFC season. I've prepared RFC88: Use GoogleTest framework for
> C/C++ unit tests
>
> Text at https://github.com/OSGeo/gdal/pull/6720
>
> Summary:
>
> The document proposes and describes conversion of the existing C/C++
> autotest suite to use the `GoogleTest
> framework <https://github.com/google/googletest>`__.
>
> GoogleTest is a popular and maintained framework for C/C++ test
> writing, that is a better replacement for the `TUT framework
> <https://github.com/mrzechonek/tut-framework>`__ that we use currently.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/f38213d0/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 11:38:59 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 20:38:59 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
Message-ID: <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>


>
> I think long term compatibility is a very desirable feature, and 
> several applications just use GDAL as part of their code base without 
> even being aware of what is happening in the GDAL development front. 
> The same is true for several other libraries, given the fact the use 
> of package managers (VCPKG, conan etc) are becoming more common. For 
> some code bases, GDAL is just a small cog, and I believe it is very 
> easy for the developers to simply download the next version from the 
> package manager thinking that they are getting mostly bug fixes and 
> not being aware of new silent incompatibilities.
>
We try to avoid breakage or silent breakage when reasonable, but 
sometimes it is the best thing to do. People/software who depends on the 
past functionality will see the tests related to their code testing 
GetMetadataItem("PIXELTYPE", "IMAGE_STRUCTURE") == "SIGNEDBYTE" break 
and will probably figure out they should read GDAL release notes to 
understand what happens. It is not the first time nor the last one we 
will do that.
>
> Sorry, but I think it is funny that you mention removing GDT_Byte 
> would have breaking implications, since I am expressing my 
> reservations against a change that will have breaking implications. :)
My perception is that > 90% of current uses of GDT_Byte are for the 
unsigned usage. Of course their might be some domains where this is not 
the case.
>
> I don't understand what limitations you are referring to. Perhaps the 
> support was broken to some types of raster files?
This is described in the RFC: " the absence of a proper data type means 
that it is easy to forget to test the PIXELTYPE=SIGNEDBYTE metadata item 
in all places where the value of pixels is taken into account. There 
were special cases for statistics computations, but most of the other 
code, such as the overview or warping computation code had no provision 
for it, and consequently mis-interpreted negative values in the range 
[-128,-1] as positive values in the range [128,255]." . So current 
support of signed 8-byte within GDAL was broken in a number of places, 
and the new GDT_Int8 data type enables to fix it. One could argue that 
the past behavior of reporting a metadata item that altered the 
semantics of GDT_Byte was a silent breakage of the API promise of 
GDT_Byte being unsigned.
> In my field, signed 8-bit images representing categorical images are 
> very common, given the fact they can be used fully decompressed and 
> represent a null value/nodata in very convenient way (as a negative 
> value).

You should have a better experience with GDAL 3.7 then, pending perhaps 
a few changes in your code.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/cc8925d9/attachment-0001.htm>

From schwehr at gmail.com  Wed Nov 16 11:41:44 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 16 Nov 2022 11:41:44 -0800
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
 <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
Message-ID: <CACmBxyvqcoScEFTYxxF_ZFqESHGS1dhY5N8N0urusofPg8VosA@mail.gmail.com>

Hermann,

Speaking to GDAL being one (not very small) piece of an ecosystem of
libraries and tools:

This is exactly what unit tests are for.  A well done tool or library
should have the tests that cover their critical uses of libraries they
depend on.  It's often referred to as the "Beyonce rule": "If you liked it,
you should have put a test on it." (c.f. here
<https://www.oreilly.com/library/view/software-engineering-at/9781492082781/ch01.html>
)

Now is a great time to make sure that your workflow has a check for proper
handling of 8-bit rasters.

-kurt

On Wed, Nov 16, 2022 at 11:39 AM Even Rouault <even.rouault at spatialys.com>
wrote:

>
>
> I think long term compatibility is a very desirable feature, and several
> applications just use GDAL as part of their code base without even being
> aware of what is happening in the GDAL development front. The same is true
> for several other libraries, given the fact the use of package managers
> (VCPKG, conan etc) are becoming more common. For some code bases, GDAL is
> just a small cog, and I believe it is very easy for the developers to
> simply download the next version from the package manager thinking that
> they are getting mostly bug fixes and not being aware of new silent
> incompatibilities.
>
> We try to avoid breakage or silent breakage when reasonable, but sometimes
> it is the best thing to do. People/software who depends on the past
> functionality will see the tests related to their code testing
> GetMetadataItem("PIXELTYPE", "IMAGE_STRUCTURE") == "SIGNEDBYTE" break and
> will probably figure out they should read GDAL release notes to understand
> what happens. It is not the first time nor the last one we will do that.
>
>
> Sorry, but I think it is funny that you mention removing GDT_Byte would
> have breaking implications, since I am expressing my reservations against a
> change that will have breaking implications. :)
>
> My perception is that > 90% of current uses of GDT_Byte are for the
> unsigned usage. Of course their might be some domains where this is not the
> case.
>
>
> I don't understand what limitations you are referring to. Perhaps the
> support was broken to some types of raster files?
>
> This is described in the RFC: " the absence of a proper data type means
> that it is easy to forget to test the PIXELTYPE=SIGNEDBYTE metadata item in
> all places where the value of pixels is taken into account. There were
> special cases for statistics computations, but most of the other code, such
> as the overview or warping computation code had no provision for it, and
> consequently mis-interpreted negative values in the range [-128,-1] as
> positive values in the range [128,255]." . So current support of signed
> 8-byte within GDAL was broken in a number of places, and the new GDT_Int8
> data type enables to fix it. One could argue that the past behavior of
> reporting a metadata item that altered the semantics of GDT_Byte was a
> silent breakage of the API promise of GDT_Byte being unsigned.
>
> In my field, signed 8-bit images representing categorical images are very
> common, given the fact they can be used fully decompressed and represent a
> null value/nodata in very convenient way (as a negative value).
>
> You should have a better experience with GDAL 3.7 then, pending perhaps a
> few changes in your code.
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/a39a4a5c/attachment.htm>

From hermann.rodrigues at gmail.com  Wed Nov 16 12:11:39 2022
From: hermann.rodrigues at gmail.com (Hermann Rodrigues)
Date: Wed, 16 Nov 2022 15:11:39 -0500
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CACmBxyvqcoScEFTYxxF_ZFqESHGS1dhY5N8N0urusofPg8VosA@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
 <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
 <CACmBxyvqcoScEFTYxxF_ZFqESHGS1dhY5N8N0urusofPg8VosA@mail.gmail.com>
Message-ID: <CADnw22YozUQXesrW4CFvoCdf3MNcHjByCxQD3OFAwrcL3cG5yQ@mail.gmail.com>

Kurt,

In the ideal world, everything has a unit test. In the real world, there
are a lot of applications that keep things turning around that were not
developed with the same level of care. And yet, we use them everyday. We
have unit tests and a lot of them, but not everybody or everything does.

The RFC approval was voted by a number of developers that I don't believe
represents the number of developers using GDAL as part of their
applications. Perhaps breaking chances should require a more significant
number of votes.

I dare to say that, if we are following this path, maybe GDAL should start
marketing itself as a set of command line tools and not as a library, given
that breaking compatibility just because we can is not something a library
developer should do, IMHO.

Best,

hermann

----------------------------------------------------------------------
Hermann Rodrigues
hermann.rodrigues at gmail.com
hermann at csr.ufmg.br
Twitter: @horodrigues | @dinamica_ego
Centro de Sensoriamento Remoto / UFMG
https://csr.ufmg.br | https://dinamicaego.com


On Wed, Nov 16, 2022 at 2:41 PM Kurt Schwehr <schwehr at gmail.com> wrote:

> Hermann,
>
> Speaking to GDAL being one (not very small) piece of an ecosystem of
> libraries and tools:
>
> This is exactly what unit tests are for.  A well done tool or library
> should have the tests that cover their critical uses of libraries they
> depend on.  It's often referred to as the "Beyonce rule": "If you liked it,
> you should have put a test on it." (c.f. here
> <https://www.oreilly.com/library/view/software-engineering-at/9781492082781/ch01.html>
> )
>
> Now is a great time to make sure that your workflow has a check for proper
> handling of 8-bit rasters.
>
> -kurt
>
> On Wed, Nov 16, 2022 at 11:39 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>>
>>
>> I think long term compatibility is a very desirable feature, and several
>> applications just use GDAL as part of their code base without even being
>> aware of what is happening in the GDAL development front. The same is true
>> for several other libraries, given the fact the use of package managers
>> (VCPKG, conan etc) are becoming more common. For some code bases, GDAL is
>> just a small cog, and I believe it is very easy for the developers to
>> simply download the next version from the package manager thinking that
>> they are getting mostly bug fixes and not being aware of new silent
>> incompatibilities.
>>
>> We try to avoid breakage or silent breakage when reasonable, but
>> sometimes it is the best thing to do. People/software who depends on the
>> past functionality will see the tests related to their code testing
>> GetMetadataItem("PIXELTYPE", "IMAGE_STRUCTURE") == "SIGNEDBYTE" break and
>> will probably figure out they should read GDAL release notes to understand
>> what happens. It is not the first time nor the last one we will do that.
>>
>>
>> Sorry, but I think it is funny that you mention removing GDT_Byte would
>> have breaking implications, since I am expressing my reservations against a
>> change that will have breaking implications. :)
>>
>> My perception is that > 90% of current uses of GDT_Byte are for the
>> unsigned usage. Of course their might be some domains where this is not the
>> case.
>>
>>
>> I don't understand what limitations you are referring to. Perhaps the
>> support was broken to some types of raster files?
>>
>> This is described in the RFC: " the absence of a proper data type means
>> that it is easy to forget to test the PIXELTYPE=SIGNEDBYTE metadata item in
>> all places where the value of pixels is taken into account. There were
>> special cases for statistics computations, but most of the other code, such
>> as the overview or warping computation code had no provision for it, and
>> consequently mis-interpreted negative values in the range [-128,-1] as
>> positive values in the range [128,255]." . So current support of signed
>> 8-byte within GDAL was broken in a number of places, and the new GDT_Int8
>> data type enables to fix it. One could argue that the past behavior of
>> reporting a metadata item that altered the semantics of GDT_Byte was a
>> silent breakage of the API promise of GDT_Byte being unsigned.
>>
>> In my field, signed 8-bit images representing categorical images are very
>> common, given the fact they can be used fully decompressed and represent a
>> null value/nodata in very convenient way (as a negative value).
>>
>> You should have a better experience with GDAL 3.7 then, pending perhaps a
>> few changes in your code.
>> Even
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221116/58e9a6d3/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 16 14:42:39 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Nov 2022 23:42:39 +0100
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CADnw22YozUQXesrW4CFvoCdf3MNcHjByCxQD3OFAwrcL3cG5yQ@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
 <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
 <CACmBxyvqcoScEFTYxxF_ZFqESHGS1dhY5N8N0urusofPg8VosA@mail.gmail.com>
 <CADnw22YozUQXesrW4CFvoCdf3MNcHjByCxQD3OFAwrcL3cG5yQ@mail.gmail.com>
Message-ID: <d1dea5d7-12a2-7a7e-d7e0-59234c5c2362@spatialys.com>

Hermann,

> I dare to say that, if we are following this path, maybe GDAL should 
> start marketing itself as a set of command line tools and not as a 
> library, given that breaking compatibility just because we can is not 
> something a library developer should do, IMHO.

I believe your words aren't reflecting the reality. We don't break 
things just to annoy people or because we can. We do it when we estimate 
it is in the best interest of the GDAL code base and its users, in the 
long term. There are adaptation costs for each side that can certainly 
felt as painful in the short/near term. That's life. There are past 
choices that turn out to be not ideal 15 years later down the road.

Regarding silent breakage, just have a look at 
https://gist.github.com/rouault/9d58bee0ceea111bd9913a03c9f13331 which 
shows an interesting change of behavior between C++03 and C++11. Or 
Python 2 vs Python 3 ( 2 / 3 = 0 vs 2 / 3 = 0.666667 ), or ... put it 
very long list here of software with long existence and that try to 
adapt themselves to remain relevant for their users and maintainable for 
their contributors ...

That said, https://github.com/OSGeo/gdal/pull/6722 should help 
addressing your concerns about silent breakage.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov 16 23:51:03 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 17 Nov 2022 07:51:03 +0000
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CADnw22YozUQXesrW4CFvoCdf3MNcHjByCxQD3OFAwrcL3cG5yQ@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
 <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
 <CACmBxyvqcoScEFTYxxF_ZFqESHGS1dhY5N8N0urusofPg8VosA@mail.gmail.com>
 <CADnw22YozUQXesrW4CFvoCdf3MNcHjByCxQD3OFAwrcL3cG5yQ@mail.gmail.com>
Message-ID: <AM0PR09MB32197A246A013E8563A321A5FD069@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Hermann Rodrigues wrote:

> I dare to say that, if we are following this path, maybe GDAL should start marketing itself as a set of command line tools and not as a
> library, given that breaking compatibility just because we can is not something a library developer should do, IMHO.

Hyperbola is a fine rhetoric device but IMHO gdal-dev mailing list is not a good forum to practice with it. You know how it goes: someone says something that is aimed to irritate, opposing party gets irritated and gives back something that is as much of no use, like "fork or write your own libraries then". I do not want to play that game. Of course it is possible that you meant what you wrote and in that case I apologize.

If our main aim was to break compatibility we probably would not write the Request For Comment documents https://gdal.org/development/rfc/ and announce them on the mailing lists. However, we are going to use the RFC mechanism also in the future.

Regards,

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/98434267/attachment-0001.htm>

From idan at miara.com  Thu Nov 17 00:47:18 2022
From: idan at miara.com (Idan Miara)
Date: Thu, 17 Nov 2022 10:47:18 +0200
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
 <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
Message-ID: <CADmqiFX3joUfufmder770osXk=iN8fiypJbad_0y8Gw4Lxe9aA@mail.gmail.com>

Just adding my two cents...

I highly support adding the signed int8 datatype - this would probably lead
to downstream projects that support different raster datatypes to
eventually fully support int8 rasters as a first class citizen.
Yes - downstream projects would need to invest some time adapting but the
result would be a PROPER support for int8 rasters.
 (I would imagine that searching the code for some key search words would
yield most places that need fixing),
Nobody is forced to upgrade a major version and sometimes a downstream
effort is required to support the evolution of the upstream project.

I was a maintainer of an app that used signed int8 data vastly and wanted
to incorporate save/load/calc rasters using GDAL.
After spending countless hours of trying to use the signed byte flag
properly in every case I ended up changing the logic of the application to
use only unsigned byte rasters since there were too many cases where the
signed byte flag was not honored or caused weird outputs (for instance, I
think that QGIS didn't fully support int8 rasters properly).

Even, Thanks for investing the time to make this right,
Idan

On Wed, 16 Nov 2022 at 21:39, Even Rouault <even.rouault at spatialys.com>
wrote:

>
>
> I think long term compatibility is a very desirable feature, and several
> applications just use GDAL as part of their code base without even being
> aware of what is happening in the GDAL development front. The same is true
> for several other libraries, given the fact the use of package managers
> (VCPKG, conan etc) are becoming more common. For some code bases, GDAL is
> just a small cog, and I believe it is very easy for the developers to
> simply download the next version from the package manager thinking that
> they are getting mostly bug fixes and not being aware of new silent
> incompatibilities.
>
> We try to avoid breakage or silent breakage when reasonable, but sometimes
> it is the best thing to do. People/software who depends on the past
> functionality will see the tests related to their code testing
> GetMetadataItem("PIXELTYPE", "IMAGE_STRUCTURE") == "SIGNEDBYTE" break and
> will probably figure out they should read GDAL release notes to understand
> what happens. It is not the first time nor the last one we will do that.
>
>
> Sorry, but I think it is funny that you mention removing GDT_Byte would
> have breaking implications, since I am expressing my reservations against a
> change that will have breaking implications. :)
>
> My perception is that > 90% of current uses of GDT_Byte are for the
> unsigned usage. Of course their might be some domains where this is not the
> case.
>
>
> I don't understand what limitations you are referring to. Perhaps the
> support was broken to some types of raster files?
>
> This is described in the RFC: " the absence of a proper data type means
> that it is easy to forget to test the PIXELTYPE=SIGNEDBYTE metadata item in
> all places where the value of pixels is taken into account. There were
> special cases for statistics computations, but most of the other code, such
> as the overview or warping computation code had no provision for it, and
> consequently mis-interpreted negative values in the range [-128,-1] as
> positive values in the range [128,255]." . So current support of signed
> 8-byte within GDAL was broken in a number of places, and the new GDT_Int8
> data type enables to fix it. One could argue that the past behavior of
> reporting a metadata item that altered the semantics of GDT_Byte was a
> silent breakage of the API promise of GDT_Byte being unsigned.
>
> In my field, signed 8-bit images representing categorical images are very
> common, given the fact they can be used fully decompressed and represent a
> null value/nodata in very convenient way (as a negative value).
>
> You should have a better experience with GDAL 3.7 then, pending perhaps a
> few changes in your code.
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/f7426417/attachment.htm>

From aborruso at gmail.com  Thu Nov 17 02:50:02 2022
From: aborruso at gmail.com (andy)
Date: Thu, 17 Nov 2022 11:50:02 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
Message-ID: <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>

Hi Even,
another question.

On Wed, 16 Nov 2022 at 14:17, Even Rouault <even.rouault at spatialys.com>
wrote:

> No, title is not in the lists of hardcoded fields by the OGR CSW driver.
> Probably a fix/improvement to do in the driver.
>

What's the list  of the hardcoded fields that I can use in OGR?

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/f05bea10/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 17 03:02:50 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Nov 2022 12:02:50 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
 <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>
Message-ID: <4c0b0718-f724-305d-673b-fc6ab3d3a409@spatialys.com>


Le 17/11/2022 ? 11:50, andy a ?crit?:
> Hi Even,
> another question.
>
> On Wed, 16 Nov 2022 at 14:17, Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     No, title is not in the lists of hardcoded fields by the OGR CSW
>     driver. Probably a fix/improvement to do in the driver.
>
>
> What's the list? of the?hardcoded fields that I can use in OGR?
All the ones returned by ogrinfo 
CSW:http://www.pcn.minambiente.it/geoportal/csw -al -so
>
> Thank you
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/061190fe/attachment.htm>

From Jon.Morris at jbarisk.com  Thu Nov 17 03:59:42 2022
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Thu, 17 Nov 2022 11:59:42 +0000
Subject: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for
 raster
In-Reply-To: <CADmqiFX3joUfufmder770osXk=iN8fiypJbad_0y8Gw4Lxe9aA@mail.gmail.com>
References: <d7fa8cfc-2e0a-087e-cc17-b7b5eea1a48a@spatialys.com>
 <d4893fb4-0b04-474f-8917-697cb368634f@spatialys.com>
 <CADnw22aYUnQrc9yhhRheKupknV+43eHvU4cmbQ=d2+TWAexqaA@mail.gmail.com>
 <a9b2c165-a634-ba43-bffb-6e6a8e1ac192@spatialys.com>
 <CADnw22YER_ZLyyYfoG7PN0HgOeD6nd+TZ3=8c_CVQwFzdcO0vg@mail.gmail.com>
 <d2e3b6f7-222f-8b11-5d41-df7cc6cfbe51@spatialys.com>
 <CADnw22bz-y78R8t+HwgatO25kBshb3xTA1eaYi28u5LkuWHp5g@mail.gmail.com>
 <f28fcef9-1d6c-7722-16ee-244c3fc27667@spatialys.com>
 <CADmqiFX3joUfufmder770osXk=iN8fiypJbad_0y8Gw4Lxe9aA@mail.gmail.com>
Message-ID: <LO2P123MB48619A9E0E10A40459985A7182069@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>

I concur that signed byte data is fairly common and we have to handle it in our Python application. The recent addition of Int64 types actually broke the dictionary-based way we were converting between numpy and GDAL datatypes and we had to implement a more robust solution.

Is it the case that gdal.GetDataTypeName and gdal.GetDataTypeByName currently return the wrong values ? they suggest np.int8 is equivalent to gdal.GDT_Byte when it should be np.uint8. Hopefully adding a signed 8bit type should clear this up. Having to also check the PIXELTYPE metadata isn?t always convenient so it will be better to have a more consistent conversion.

Jon


e: Jon.Morris at jbarisk.com
d:+44 (0)1756 587229
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Idan Miara
Sent: 17 November 2022 08:47
To: Even Rouault <even.rouault at spatialys.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Motion: adopt RFC 87: Signed int8 data type for raster

CAUTION: This email originated from outside of JBA and contains one or more links. DO NOT click links unless you recognise the sender's email address and are absolutely certain that the content is safe.
See the Phishing page on IMS on SP for more information about how to spot and report suspicious messages.
WARNING: This email contains one or more attachments with links within the attachment(s). Please take extra care when handling the attachments.
Just adding my two cents...

I highly support adding the signed int8 datatype - this would probably lead to downstream projects that support different raster datatypes to eventually fully support int8 rasters as a first class citizen.
Yes - downstream projects would need to invest some time adapting but the result would be a PROPER support for int8 rasters.
 (I would imagine that searching the code for some key search words would yield most places that need fixing),
Nobody is forced to upgrade a major version and sometimes a downstream effort is required to support the evolution of the upstream project.

I was a maintainer of an app that used signed int8 data vastly and wanted to incorporate save/load/calc rasters using GDAL.
After spending countless hours of trying to use the signed byte flag properly in every case I ended up changing the logic of the application to use only unsigned byte rasters since there were too many cases where the signed byte flag was not honored or caused weird outputs (for instance, I think that QGIS didn't fully support int8 rasters properly).

Even, Thanks for investing the time to make this right,
Idan

On Wed, 16 Nov 2022 at 21:39, Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> wrote:



I think long term compatibility is a very desirable feature, and several applications just use GDAL as part of their code base without even being aware of what is happening in the GDAL development front. The same is true for several other libraries, given the fact the use of package managers (VCPKG, conan etc) are becoming more common. For some code bases, GDAL is just a small cog, and I believe it is very easy for the developers to simply download the next version from the package manager thinking that they are getting mostly bug fixes and not being aware of new silent incompatibilities.

We try to avoid breakage or silent breakage when reasonable, but sometimes it is the best thing to do. People/software who depends on the past functionality will see the tests related to their code testing GetMetadataItem("PIXELTYPE", "IMAGE_STRUCTURE") == "SIGNEDBYTE" break and will probably figure out they should read GDAL release notes to understand what happens. It is not the first time nor the last one we will do that.


Sorry, but I think it is funny that you mention removing GDT_Byte would have breaking implications, since I am expressing my reservations against a change that will have breaking implications. :)
My perception is that > 90% of current uses of GDT_Byte are for the unsigned usage. Of course their might be some domains where this is not the case.


I don't understand what limitations you are referring to. Perhaps the support was broken to some types of raster files?
This is described in the RFC: " the absence of a proper data type means that it is easy to forget to test the PIXELTYPE=SIGNEDBYTE metadata item in all places where the value of pixels is taken into account. There were special cases for statistics computations, but most of the other code, such as the overview or warping computation code had no provision for it, and consequently mis-interpreted negative values in the range [-128,-1] as positive values in the range [128,255]." . So current support of signed 8-byte within GDAL was broken in a number of places, and the new GDT_Int8 data type enables to fix it. One could argue that the past behavior of reporting a metadata item that altered the semantics of GDT_Byte was a silent breakage of the API promise of GDT_Byte being unsigned.

In my field, signed 8-bit images representing categorical images are very common, given the fact they can be used fully decompressed and represent a null value/nodata in very convenient way (as a negative value).

You should have a better experience with GDAL 3.7 then, pending perhaps a few changes in your code.
Even


--

http://www.spatialys.com

My software is free, but my time generally not.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/6d1cf802/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image553391.png
Type: image/png
Size: 9321 bytes
Desc: image553391.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/6d1cf802/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image038714.png
Type: image/png
Size: 651 bytes
Desc: image038714.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/6d1cf802/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image994012.png
Type: image/png
Size: 715 bytes
Desc: image994012.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/6d1cf802/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image270771.png
Type: image/png
Size: 966 bytes
Desc: image270771.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/6d1cf802/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image039784.png
Type: image/png
Size: 784 bytes
Desc: image039784.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/6d1cf802/attachment-0009.png>

From bheberlein at wisc.edu  Thu Nov 17 07:01:14 2022
From: bheberlein at wisc.edu (Brendan Heberlein)
Date: Thu, 17 Nov 2022 15:01:14 +0000
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <8858d546-cf8b-2739-de14-081fc6531cb5@spatialys.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
 <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz98Qbvqep=Qt_mLtva+CwPJmoiRVOBE-NfMsQ+DAtc-5KA@mail.gmail.com>
 <8858d546-cf8b-2739-de14-081fc6531cb5@spatialys.com>
Message-ID: <DM6PR06MB437799108116972CA9F3DBE4BA3D9@DM6PR06MB4377.namprd06.prod.outlook.com>

Thank you, Mike & Even.

Supposing I wanted to have the output grid origin & dimensions computed automatically, but with a specified rotation angle, is that possible?

Anyway I can calculate these parameters myself, so it is not a big issue. Your suggestion worked for me.

Cheers!
Brendan

________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Saturday, November 5, 2022 4:36 AM
To: Michael Sumner <mdsumner at gmail.com>; Brendan Heberlein <bheberlein at wisc.edu>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation Arrays



Le 05/11/2022 ? 04:33, Michael Sumner a ?crit :
yes I see, well you can probably set a target GeoTIFF with the geotransform that you want - and gdalwarp to that as the target.

something like

out_ds = gdal.GetDriverByName("GTiff").Create("output.tif", width, height, number_of_bands, data_type, options = ["TILED=YES"])

out_ds.SetGeoTransform([ some geotransform with rotational terms ])

srs = osr.SpatialReference()

srs.ImportFromEPSG( xxx ) / srs.ImportFromWkt( xxx )

out_ds.SetSpatialRef( srs )

gdal.Warp(out_ds, src_ds, .... )



I don't believe you can do that with gdalwarp directly, and I have no idea with python - and finally I'm sorry to add irrelevant discussion - but this is interesting and I'm going to try it out in R and C++ and would love to see a python example too.

Cheers, Mike





On Sat, Nov 5, 2022 at 2:21 PM Brendan Heberlein <bheberlein at wisc.edu<mailto:bheberlein at wisc.edu>> wrote:
Hi Mike,

regardless of the map projection, it may be desirable to have the grid oriented in one direction or another, e.g. due to the spatial distribution of data points. Although the CRS/SRS designates the coordinate axes, these are not always aligned with the desired grid orientation.

So, basically I want to be able to specify an arbitrary geotransform array for the output grid. This would allow the grid to be assigned an arbitrary orientation within the CRS frame.

Thanks,
Brendan
________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Friday, November 4, 2022 6:57 PM
To: Brendan Heberlein <bheberlein at wisc.edu<mailto:bheberlein at wisc.edu>>
Cc: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation Arrays

well, the map projection does this - there are many possibilities. Or, do you have another geolocation array you want as the target?

If you have an example I'm happy to try a few things, but I'd assumed you had a target map projection in mind. What kind of crs to choose depends on your goal, or is purely to not have north up?

Perhaps there's something terminology wise I'm missing ...

Mike

On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu<mailto:bheberlein at wisc.edu>> wrote:
Hi Mike,

thanks for the response.

Can you clarify how I would go about specifying the grid orientation for the output raster? None of -te, -ts or -t_srs address this.


________________________________
From: Michael Sumner <mdsumner at gmail.com<mailto:mdsumner at gmail.com>>
Sent: Friday, November 4, 2022 6:41 PM
To: Brendan Heberlein <bheberlein at wisc.edu<mailto:bheberlein at wisc.edu>>
Cc: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with Geolocation Arrays

that's exactly what the warper does with geolocation arrays, set the target extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.

python will have those analogous controls for the warper.

Cheers, Mike



On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hello,

I would like to be able to warp an image dataset using a geolocation array, while specifying the grid to which the output dataset is sampled. Specifically, I want to be able to warp the dataset to a grid which is not oriented North-up.

Can GDAL support this currently? Or, what is the likelihood this could be supported in the future?

I primarily rely on the Python bindings, so a solution within that framework would be ideal for me.

Thanks!
     ? Brendan


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com<mailto:mdsumner at gmail.com>



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/d7a2fd9e/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Nov 17 07:07:55 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Nov 2022 16:07:55 +0100
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <DM6PR06MB437799108116972CA9F3DBE4BA3D9@DM6PR06MB4377.namprd06.prod.outlook.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
 <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz98Qbvqep=Qt_mLtva+CwPJmoiRVOBE-NfMsQ+DAtc-5KA@mail.gmail.com>
 <8858d546-cf8b-2739-de14-081fc6531cb5@spatialys.com>
 <DM6PR06MB437799108116972CA9F3DBE4BA3D9@DM6PR06MB4377.namprd06.prod.outlook.com>
Message-ID: <3b3b7b36-a214-9274-b6f5-9185bb0de98a@spatialys.com>


Le 17/11/2022 ? 16:01, Brendan Heberlein a ?crit?:
> Thank you, Mike & Even.
>
> Supposing I wanted to have the output grid origin & dimensions 
> computed automatically, but with a specified rotation angle, is that 
> possible?

There's no API in GDAL for it. You indeed have to set something like the 
following


gt[1] = cos(angle) * pixel_x_size

gt[2] = -sin(angle) * pixel_x_size

gt[4] = sin(angle) * pixel_y_size

gt[5] = cos(angle) * pixel_y_size


I assume the above only works if the origin (gt[0], gt[3]) is the 
lower-left corner coordinate, not the upper-one. And I might certainly 
have got some signs wrong :-)


Slightly related code in the ENVI driver to transform the rotation angle 
from its header file to a geotransform matrix (but conventions might be 
slightly different):

https://github.com/OSGeo/gdal/blob/66d9fe0b1a34a8992c804c2444f7f23c2436b937/frmts/raw/envidataset.cpp#L1536

>
> Anyway I can calculate these parameters myself, so it is not a big 
> issue. Your suggestion worked for me.
>
> Cheers!
> Brendan
>
> ------------------------------------------------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* Saturday, November 5, 2022 4:36 AM
> *To:* Michael Sumner <mdsumner at gmail.com>; Brendan Heberlein 
> <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with 
> Geolocation Arrays
>
>
> Le 05/11/2022 ? 04:33, Michael Sumner a ?crit?:
>> yes I see, well you can probably set a target GeoTIFF with the 
>> geotransform that you want - and gdalwarp to that as the target.
>
> something like
>
> out_ds = gdal.GetDriverByName("GTiff").Create("output.tif", width, 
> height, number_of_bands, data_type, options = ["TILED=YES"])
>
> out_ds.SetGeoTransform([ some geotransform with rotational terms ])
>
> srs = osr.SpatialReference()
>
> srs.ImportFromEPSG( xxx ) / srs.ImportFromWkt( xxx )
>
> out_ds.SetSpatialRef( srs )
>
> gdal.Warp(out_ds, src_ds, .... )
>
>
>
>> I don't believe you can do that with gdalwarp directly, and I have no 
>> idea with python - and finally I'm sorry to add irrelevant discussion 
>> - but this is interesting and I'm going to try it out in?R and C++ 
>> and would love to see a python example too.
>>
>> Cheers, Mike
>>
>>
>>
>>
>>
>> On Sat, Nov 5, 2022 at 2:21 PM Brendan Heberlein <bheberlein at wisc.edu 
>> <mailto:bheberlein at wisc.edu>> wrote:
>>
>>     Hi Mike,
>>
>>     regardless of the map projection, it may be desirable to have the
>>     grid oriented in one direction or another, e.g. due to the
>>     spatial distribution of data points. Although the CRS/SRS
>>     designates the coordinate axes, these are not always aligned with
>>     the desired grid orientation.
>>
>>     So, basically I want to be able to specify an arbitrary
>>     geotransform array for the output grid. This would allow the grid
>>     to be assigned an arbitrary orientation within the CRS frame.
>>
>>     Thanks,
>>     Brendan
>>     ------------------------------------------------------------------------
>>     *From:* Michael Sumner <mdsumner at gmail.com
>>     <mailto:mdsumner at gmail.com>>
>>     *Sent:* Friday, November 4, 2022 6:57 PM
>>     *To:* Brendan Heberlein <bheberlein at wisc.edu
>>     <mailto:bheberlein at wisc.edu>>
>>     *Cc:* gdal-dev <gdal-dev at lists.osgeo.org
>>     <mailto:gdal-dev at lists.osgeo.org>>
>>     *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp()
>>     with Geolocation Arrays
>>     well, the map projection does this - there are many
>>     possibilities. Or, do you have another geolocation array you want
>>     as the target?
>>
>>     If you have an example I'm happy to try a few things, but I'd
>>     assumed you had a target map projection in mind. What kind of crs
>>     to choose depends on your goal, or is purely to not have north up?
>>
>>     Perhaps there's something terminology wise I'm missing ...
>>
>>     Mike
>>
>>     On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu
>>     <mailto:bheberlein at wisc.edu>> wrote:
>>
>>         Hi Mike,
>>
>>         thanks for the response.
>>
>>         Can you clarify how I would go about specifying the grid
>>         orientation for the output raster? None of -te, -ts or -t_srs
>>         address this.
>>
>>
>>         ------------------------------------------------------------------------
>>         *From:* Michael Sumner <mdsumner at gmail.com
>>         <mailto:mdsumner at gmail.com>>
>>         *Sent:* Friday, November 4, 2022 6:41 PM
>>         *To:* Brendan Heberlein <bheberlein at wisc.edu
>>         <mailto:bheberlein at wisc.edu>>
>>         *Cc:* gdal-dev <gdal-dev at lists.osgeo.org
>>         <mailto:gdal-dev at lists.osgeo.org>>
>>         *Subject:* Re: [gdal-dev] Specify Grid Rotation for
>>         gdal.Warp() with Geolocation Arrays
>>         that's exactly what the warper does with geolocation arrays,
>>         set the target extent, dimension, and crs with -te, -ts,
>>         -t_srs with gdalwarp.
>>
>>         python will have those analogous controls for the warper.
>>
>>         Cheers, Mike
>>
>>
>>
>>         On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev,
>>         <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>>
>>         wrote:
>>
>>             Hello,
>>
>>             I would like to be able to warp an image dataset using a
>>             geolocation array, while specifying the grid to which the
>>             output dataset is sampled. Specifically, I want to be
>>             able to warp the dataset to a grid which is not oriented
>>             North-up.
>>
>>             Can GDAL support this currently? Or, what is the
>>             likelihood this could be supported in the future?
>>
>>             I primarily rely on the Python bindings, so a solution
>>             within that framework would be ideal for me.
>>
>>             Thanks!
>>             ? ? ?? Brendan
>>
>>
>>             _______________________________________________
>>             gdal-dev mailing list
>>             gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>             https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>             <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>
>>
>> -- 
>> Michael Sumner
>> Software and Database Engineer
>> Australian Antarctic Division
>> Hobart, Australia
>> e-mail: mdsumner at gmail.com <mailto:mdsumner at gmail.com>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/7cc246bd/attachment-0001.htm>

From alansnow21 at gmail.com  Thu Nov 17 07:11:36 2022
From: alansnow21 at gmail.com (Alan Snow)
Date: Thu, 17 Nov 2022 09:11:36 -0600
Subject: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
 Geolocation Arrays
In-Reply-To: <3b3b7b36-a214-9274-b6f5-9185bb0de98a@spatialys.com>
References: <DM6PR06MB4377DC78A29BBB3CCF031BABBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz9_1zkQe_iyQNrq=g=kvSu9ZjvRkdZxwrjLn0f2WDD1OEA@mail.gmail.com>
 <DM6PR06MB4377F31C5F7A99F76699706DBA3B9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz996_YJtwwzyBmWOBp=wZwm-oRewkZskA8SFtdMai44uQw@mail.gmail.com>
 <DM6PR06MB4377A3725AF82B2369DC7006BA3A9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <CAAcGz98Qbvqep=Qt_mLtva+CwPJmoiRVOBE-NfMsQ+DAtc-5KA@mail.gmail.com>
 <8858d546-cf8b-2739-de14-081fc6531cb5@spatialys.com>
 <DM6PR06MB437799108116972CA9F3DBE4BA3D9@DM6PR06MB4377.namprd06.prod.outlook.com>
 <3b3b7b36-a214-9274-b6f5-9185bb0de98a@spatialys.com>
Message-ID: <CAGybdFSZyHezmPPXCRE0wZzLXn5Ty35y7=PoS+Z03ZYwWksPvQ@mail.gmail.com>

This may be a helpful resource: https://github.com/rasterio/affine

On Thu, Nov 17, 2022, 9:08 AM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 17/11/2022 ? 16:01, Brendan Heberlein a ?crit :
>
> Thank you, Mike & Even.
>
> Supposing I wanted to have the output grid origin & dimensions computed
> automatically, but with a specified rotation angle, is that possible?
>
> There's no API in GDAL for it. You indeed have to set something like the
> following
>
>
> gt[1] = cos(angle) * pixel_x_size
>
> gt[2] = -sin(angle) * pixel_x_size
>
> gt[4] = sin(angle) * pixel_y_size
>
> gt[5] = cos(angle) * pixel_y_size
>
>
> I assume the above only works if the origin (gt[0], gt[3]) is the
> lower-left corner coordinate, not the upper-one. And I might certainly have
> got some signs wrong :-)
>
>
> Slightly related code in the ENVI driver to transform the rotation angle
> from its header file to a geotransform matrix (but conventions might be
> slightly different):
>
>
> https://github.com/OSGeo/gdal/blob/66d9fe0b1a34a8992c804c2444f7f23c2436b937/frmts/raw/envidataset.cpp#L1536
>
>
> Anyway I can calculate these parameters myself, so it is not a big issue.
> Your suggestion worked for me.
>
> Cheers!
> Brendan
>
> ------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> <even.rouault at spatialys.com>
> *Sent:* Saturday, November 5, 2022 4:36 AM
> *To:* Michael Sumner <mdsumner at gmail.com> <mdsumner at gmail.com>; Brendan
> Heberlein <bheberlein at wisc.edu> <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
> Geolocation Arrays
>
>
>
> Le 05/11/2022 ? 04:33, Michael Sumner a ?crit :
>
> yes I see, well you can probably set a target GeoTIFF with the
> geotransform that you want - and gdalwarp to that as the target.
>
> something like
>
> out_ds = gdal.GetDriverByName("GTiff").Create("output.tif", width, height,
> number_of_bands, data_type, options = ["TILED=YES"])
>
> out_ds.SetGeoTransform([ some geotransform with rotational terms ])
>
> srs = osr.SpatialReference()
>
> srs.ImportFromEPSG( xxx ) / srs.ImportFromWkt( xxx )
>
> out_ds.SetSpatialRef( srs )
> gdal.Warp(out_ds, src_ds, .... )
>
>
>
> I don't believe you can do that with gdalwarp directly, and I have no idea
> with python - and finally I'm sorry to add irrelevant discussion - but this
> is interesting and I'm going to try it out in R and C++ and would love to
> see a python example too.
>
> Cheers, Mike
>
>
>
>
>
> On Sat, Nov 5, 2022 at 2:21 PM Brendan Heberlein <bheberlein at wisc.edu>
> wrote:
>
> Hi Mike,
>
> regardless of the map projection, it may be desirable to have the grid
> oriented in one direction or another, e.g. due to the spatial distribution
> of data points. Although the CRS/SRS designates the coordinate axes, these
> are not always aligned with the desired grid orientation.
>
> So, basically I want to be able to specify an arbitrary geotransform array
> for the output grid. This would allow the grid to be assigned an arbitrary
> orientation within the CRS frame.
>
> Thanks,
> Brendan
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Friday, November 4, 2022 6:57 PM
> *To:* Brendan Heberlein <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
> Geolocation Arrays
>
> well, the map projection does this - there are many possibilities. Or, do
> you have another geolocation array you want as the target?
>
> If you have an example I'm happy to try a few things, but I'd assumed you
> had a target map projection in mind. What kind of crs to choose depends on
> your goal, or is purely to not have north up?
>
> Perhaps there's something terminology wise I'm missing ...
>
> Mike
>
> On Sat, 5 Nov 2022, 10:50 Brendan Heberlein, <bheberlein at wisc.edu> wrote:
>
> Hi Mike,
>
> thanks for the response.
>
> Can you clarify how I would go about specifying the grid orientation for
> the output raster? None of -te, -ts or -t_srs address this.
>
>
> ------------------------------
> *From:* Michael Sumner <mdsumner at gmail.com>
> *Sent:* Friday, November 4, 2022 6:41 PM
> *To:* Brendan Heberlein <bheberlein at wisc.edu>
> *Cc:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Specify Grid Rotation for gdal.Warp() with
> Geolocation Arrays
>
> that's exactly what the warper does with geolocation arrays, set the
> target extent, dimension, and crs with -te, -ts, -t_srs with gdalwarp.
>
> python will have those analogous controls for the warper.
>
> Cheers, Mike
>
>
>
> On Sat, 5 Nov 2022, 01:23 Brendan Heberlein via gdal-dev, <
> gdal-dev at lists.osgeo.org> wrote:
>
> Hello,
>
> I would like to be able to warp an image dataset using a geolocation
> array, while specifying the grid to which the output dataset is sampled.
> Specifically, I want to be able to warp the dataset to a grid which is not
> oriented North-up.
>
> Can GDAL support this currently? Or, what is the likelihood this could be
> supported in the future?
>
> I primarily rely on the Python bindings, so a solution within that
> framework would be ideal for me.
>
> Thanks!
>      ? Brendan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221117/9626f865/attachment-0001.htm>

From mateusz at loskot.net  Thu Nov 17 09:02:36 2022
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 17 Nov 2022 18:02:36 +0100
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
Message-ID: <CABUeae_ro2jSVnZ3jZ89WSFHb4FzHstH9H1OFKNaCxWx6q3YNQ@mail.gmail.com>

On Wed, 16 Nov 2022 at 19:42, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Text at https://github.com/OSGeo/gdal/pull/6720
>
> The document proposes and describes conversion of the existing C/C++
> autotest suite to use the `GoogleTest
> framework <https://github.com/google/googletest>`__.
>
> GoogleTest is a popular and maintained framework for C/C++ test
> writing, that is a better replacement for the `TUT framework
> <https://github.com/mrzechonek/tut-framework>`__ that we use currently.

+1 Mateusz

It was me who 'polluted' GDAL with TUT and here it is why I did it:
It was a very long time ago to support porting GDAL (and GEOS too)
to Windows CE platform which was very limited in terms of C and C++
support. And. we also had to develop some C library routines
https://wcelibcex.sourceforge.net/
And, Python for Windows CE was very limited.
And, it was much easier to debug C/C++ than Python,
So, I decided to start C/C++ counterpart of the autotest suite.
At that time, TUT was small, portable, feature-complete
framework that we incorporated by copying its single header.

Since the C++ autotest is still alive, switching to a modern test
framework is much desired and Google Test is sensible choice.
I see no reason to stay with TUT, which is rather a niche
library nowadays.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Thu Nov 17 09:25:44 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Nov 2022 18:25:44 +0100
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <CABUeae_ro2jSVnZ3jZ89WSFHb4FzHstH9H1OFKNaCxWx6q3YNQ@mail.gmail.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
 <CABUeae_ro2jSVnZ3jZ89WSFHb4FzHstH9H1OFKNaCxWx6q3YNQ@mail.gmail.com>
Message-ID: <88198488-e57e-8de4-b3e7-80492d50c55f@spatialys.com>

Hi Mateusz,

TUT was a very sensible choice at the time you implemented it, and it 
has been very useful up to now !

Even

Le 17/11/2022 ? 18:02, Mateusz Loskot a ?crit?:
> On Wed, 16 Nov 2022 at 19:42, Even Rouault <even.rouault at spatialys.com> wrote:
>> Text at https://github.com/OSGeo/gdal/pull/6720
>>
>> The document proposes and describes conversion of the existing C/C++
>> autotest suite to use the `GoogleTest
>> framework <https://github.com/google/googletest>`__.
>>
>> GoogleTest is a popular and maintained framework for C/C++ test
>> writing, that is a better replacement for the `TUT framework
>> <https://github.com/mrzechonek/tut-framework>`__ that we use currently.
> +1 Mateusz
>
> It was me who 'polluted' GDAL with TUT and here it is why I did it:
> It was a very long time ago to support porting GDAL (and GEOS too)
> to Windows CE platform which was very limited in terms of C and C++
> support. And. we also had to develop some C library routines
> https://wcelibcex.sourceforge.net/
> And, Python for Windows CE was very limited.
> And, it was much easier to debug C/C++ than Python,
> So, I decided to start C/C++ counterpart of the autotest suite.
> At that time, TUT was small, portable, feature-complete
> framework that we incorporated by copying its single header.
>
> Since the C++ autotest is still alive, switching to a modern test
> framework is much desired and Google Test is sensible choice.
> I see no reason to stay with TUT, which is rather a niche
> library nowadays.
>
> Best regards,

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From aborruso at gmail.com  Fri Nov 18 00:02:53 2022
From: aborruso at gmail.com (andy)
Date: Fri, 18 Nov 2022 09:02:53 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <4c0b0718-f724-305d-673b-fc6ab3d3a409@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
 <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>
 <4c0b0718-f724-305d-673b-fc6ab3d3a409@spatialys.com>
Message-ID: <CAHEdGZPMFojyYx75ojhE9QshSmvLJeUYGUvUHwEGLE29Dn9voQ@mail.gmail.com>

Hi,
I think this is a small bug, but not if it depends on OGR or the server I
query.

If I run

ogrinfo --debug on -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where
"subject LIKE 'salute'"

I have the below XML query:

<?xml version="1.0" encoding="UTF-8"?>
<csw:GetRecords resultType="results" service="CSW" version="2.0.2"
startPosition="1" maxRecords="500" xmlns:csw="
http://www.opengis.net/cat/csw/2.0.2" xmlns:gml="http://www.opengis.net/gml"
xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="
http://purl.org/dc/terms/" xmlns:ogc="http://www.opengis.net/ogc"
xmlns:ows="http://www.opengis.net/ows" xmlns:xsi="
http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.opengis.net/cat/csw/2.0.2
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd">
  <csw:Query typeNames="csw:Record">
    <csw:ElementSetName>full</csw:ElementSetName>
    <csw:Constraint version="1.1.0">
      <ogc:Filter>
        <ogc:PropertyIsLike wildCard='*' singleChar='_' escapeChar='!'>
          <ogc:PropertyName>dc:subject</ogc:PropertyName>
          <ogc:Literal>salute</ogc:Literal>
        </ogc:PropertyIsLike>
      </ogc:Filter>
    </csw:Constraint>
  </csw:Query>
</csw:GetRecords>

As you can see we have single quotes in
<ogc:PropertyIsLike wildCard='*' singleChar='_' escapeChar='!'>

For reasons of uniformity and consistency I think here too there should be
double quotes.
Am I wrong?
If not, could I open an issue?

Thank you

>

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221118/b0dfda70/attachment.htm>

From even.rouault at spatialys.com  Fri Nov 18 04:01:26 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Nov 2022 13:01:26 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <CAHEdGZPMFojyYx75ojhE9QshSmvLJeUYGUvUHwEGLE29Dn9voQ@mail.gmail.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
 <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>
 <4c0b0718-f724-305d-673b-fc6ab3d3a409@spatialys.com>
 <CAHEdGZPMFojyYx75ojhE9QshSmvLJeUYGUvUHwEGLE29Dn9voQ@mail.gmail.com>
Message-ID: <0af57743-e990-2dcc-1229-d4b005c4cc54@spatialys.com>

This is mostly an implementation detail that should have no 
consequences. If you really want to change that, I'd suggest you to 
submit a pull request with the change directly.

Hint:? go to 
https://github.com/OSGeo/gdal/edit/master/ogr/ogrsf_frmts/wfs/ogrwfsfilter.cpp 
, do the change and use the UI to submit it as pull request

Le 18/11/2022 ? 09:02, andy a ?crit?:
> Hi,
> I think this is a small bug,?but not if it depends on OGR or the 
> server I query.
>
> If I run
>
> ogrinfo --debug on -ro -al "CSW:http://geodati.gov.it/RNDT/csw" -where 
> "subject LIKE 'salute'"
>
> I have the below XML query:
>
> <?xml version="1.0" encoding="UTF-8"?>
> <csw:GetRecords resultType="results" service="CSW" version="2.0.2" 
> startPosition="1" maxRecords="500" 
> xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" 
> xmlns:gml="http://www.opengis.net/gml" 
> xmlns:dc="http://purl.org/dc/elements/1.1/" 
> xmlns:dct="http://purl.org/dc/terms/" 
> xmlns:ogc="http://www.opengis.net/ogc" 
> xmlns:ows="http://www.opengis.net/ows" 
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
> xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2 
> http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd">
> ? <csw:Query typeNames="csw:Record">
> <csw:ElementSetName>full</csw:ElementSetName>
> ? ? <csw:Constraint version="1.1.0">
> ? ? ? <ogc:Filter>
> ? ? ? ? <ogc:PropertyIsLike wildCard='*' singleChar='_' escapeChar='!'>
> <ogc:PropertyName>dc:subject</ogc:PropertyName>
> ? ? ? ? ? <ogc:Literal>salute</ogc:Literal>
> ? ? ? ? </ogc:PropertyIsLike>
> ? ? ? </ogc:Filter>
> ? ? </csw:Constraint>
> ? </csw:Query>
> </csw:GetRecords>
>
> As you can see we have single quotes in
> <ogc:PropertyIsLike wildCard='*' singleChar='_' escapeChar='!'>
>
> For reasons of uniformity and consistency I think here too there 
> should be double quotes.
> Am I wrong?
> If not, could I open an issue?
>
> Thank you
>
>
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221118/789f1e3c/attachment.htm>

From aborruso at gmail.com  Fri Nov 18 04:18:25 2022
From: aborruso at gmail.com (andy)
Date: Fri, 18 Nov 2022 13:18:25 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <0af57743-e990-2dcc-1229-d4b005c4cc54@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
 <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>
 <4c0b0718-f724-305d-673b-fc6ab3d3a409@spatialys.com>
 <CAHEdGZPMFojyYx75ojhE9QshSmvLJeUYGUvUHwEGLE29Dn9voQ@mail.gmail.com>
 <0af57743-e990-2dcc-1229-d4b005c4cc54@spatialys.com>
Message-ID: <CAHEdGZNthWp3cCa4y+xj-BFNB=tC8JPX21FFUby1fn-Sn0iv7A@mail.gmail.com>

Hi Even,

On Fri, 18 Nov 2022 at 13:01, Even Rouault <even.rouault at spatialys.com>
wrote:

> This is mostly an implementation detail that should have no consequences.
> If you really want to change that, I'd suggest you to submit a pull request
> with the change directly.
>

since it is not possible to query using the title field, and since I can't
use double quotes for literals query, for me it was very useful to have the
debug XML query output.
Starting from it, I can use curl and run something like

curl -s -k -X POST -H "Content-Type: application/xml; charset=UTF-8" -d
'<?xml version="1.0" encoding="UTF-8"?><csw:GetRecords resultType="results"
service="CSW" version="2.0.2" startPosition="1" maxRecords="500" xmlns:csw="
http://www.opengis.net/cat/csw/2.0.2" xmlns:gml="http://www.opengis.net/gml"
xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="
http://purl.org/dc/terms/" xmlns:ogc="http://www.opengis.net/ogc"
xmlns:ows="http://www.opengis.net/ows" xmlns:xsi="
http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.opengis.net/cat/csw/2.0.2
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd"><csw:Query
typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint
version="1.1.0"><ogc:Filter><ogc:PropertyIsLike wildCard="*" singleChar="_"
escapeChar="!"><ogc:PropertyName>dc:subject</ogc:PropertyName><ogc:Literal>salute</ogc:Literal></ogc:PropertyIsLike></ogc:Filter></csw:Constraint></csw:Query></csw:GetRecords>'
https://geodati.gov.it/RNDT/csw

But to write this command, I can't copy and paste from ogr output, I have
to remember first to standardize the use of quotes.

I will try a PR.

Thank you


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221118/4b901638/attachment-0001.htm>

From howard at hobu.co  Fri Nov 18 04:56:05 2022
From: howard at hobu.co (Howard Butler)
Date: Fri, 18 Nov 2022 06:56:05 -0600
Subject: [gdal-dev] Motion: Add Alessandro Pasotti as GDAL maintainer
In-Reply-To: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
References: <826C7EBC-337E-4319-A77D-FF78818B4753@hobu.co>
Message-ID: <E2FF8779-1C19-4FA9-B7CF-13D6B95A3598@hobu.co>


> On Nov 14, 2022, at 9:45 AM, Howard Butler <howard at hobu.co> wrote:
> 
> As a result of our fundraising activity and development of NumFOCUS as a financial conduit, it is my pleasure to put forward a motion to approve Alessandro Pasotti as a contracted GDAL maintainer for the period beginning on November 21st, 2022 and ending November 21st, 2023.

Declaring this motion passed with +1s from Mateusz, Daniel, Jukka, and Even.

Howard

From aborruso at gmail.com  Fri Nov 18 05:36:33 2022
From: aborruso at gmail.com (andy)
Date: Fri, 18 Nov 2022 14:36:33 +0100
Subject: [gdal-dev] A CSW query that seems to me works badly
In-Reply-To: <0af57743-e990-2dcc-1229-d4b005c4cc54@spatialys.com>
References: <CAHEdGZMxfEdZN4LD0csp6kud2ZdQzDf6=NB8tafdgnseaLA_WQ@mail.gmail.com>
 <CAHEdGZOq22oVu7yxPoVfAHgx71T1ZLJMjB=7oTf9jS9yFaUZ2w@mail.gmail.com>
 <CAHEdGZOozdgQX3WOQ4uPDeohuH0ysrcv9QcrRSTupMKjZhEvpw@mail.gmail.com>
 <78413bd9-aebd-f63f-8916-698a4f27f89b@spatialys.com>
 <CAHEdGZN80oTUBtgcSSD9dyC_fQ_EJX+fEBOpWO8idLoP2SkTJw@mail.gmail.com>
 <df66aea8-c070-bac7-7097-a57db76e3678@spatialys.com>
 <CAHEdGZM8FFtDq48qgR=iBs6zsg5JKiu4_yChLFddtoU54Oz6cQ@mail.gmail.com>
 <4c0b0718-f724-305d-673b-fc6ab3d3a409@spatialys.com>
 <CAHEdGZPMFojyYx75ojhE9QshSmvLJeUYGUvUHwEGLE29Dn9voQ@mail.gmail.com>
 <0af57743-e990-2dcc-1229-d4b005c4cc54@spatialys.com>
Message-ID: <CAHEdGZOLHy7H3znwN3fLfB3ru_cjCu=E-HvgJaWyp-q_tcxHzA@mail.gmail.com>

My PR https://github.com/OSGeo/gdal/pull/6734/files

Thank you Even


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221118/da606fb5/attachment.htm>

From jrmorreale_ml at enoreth.net  Fri Nov 18 09:13:14 2022
From: jrmorreale_ml at enoreth.net (Jean-Roc Morreale (ml))
Date: Fri, 18 Nov 2022 18:13:14 +0100
Subject: [gdal-dev] Working with IFC files
In-Reply-To: <ad704c947b28fe70140bb60fd4d14086bf55c6bd.camel@enoreth.net>
References: <CAG9OqYoOFXX3=3HtK2kEcGzX2pjSqQmjNi+_dGRAeb1xcjje=g@mail.gmail.com>
 <ad704c947b28fe70140bb60fd4d14086bf55c6bd.camel@enoreth.net>
Message-ID: <1727853a3aef5336daa33a5dd118ea3928e39084.camel@enoreth.net>

In this study, after talking with Even, the full support of IFC was
deemed to exceed the functionalities of GDAL but the transformation of
a limited subset to the Simple Feature model could be supported (such
as the outer hull of a building, the shape of the floor, etc.).

We did not pursue this track as we wanted a full support in QGIS (which
isn't straightforward either).

Le mercredi 16 novembre 2022 ? 11:22 +0100, Jean-Roc Morreale (ml) a
?crit?:
> Hi, we sponsored a feasability study for ifc support in qgis/gdal in
> 2021, it is in in french but I'll try to sum it up asap
> 
> Le mercredi 16 novembre 2022 ? 10:00 +0100, Stefano Iacovella a
> ?crit?:
> > Hi all,
> > 
> > I am working with BIM data to integrate them in a geodatabase.
> > Data are delivered in IFC format (1)
> > I am curious about the possibility to ingest them using OGR.
> > As far as I know there's no driver available.
> > Is there someone in the list who has had some experience in a
> > similar
> > scenario?
> > 
> > Thank you
> > 
> > Stefano
> > 
> > 
> > 
> > 
> > 
> > 1) https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From j1 at jimenezshaw.com  Fri Nov 18 11:27:11 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 18 Nov 2022 20:27:11 +0100
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <CACmBxyvGSoXXK0NduRapBcg-Nt2Bw9S8p8oaE6Mq_0GZ_Dc1hQ@mail.gmail.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
 <CACmBxyvGSoXXK0NduRapBcg-Nt2Bw9S8p8oaE6Mq_0GZ_Dc1hQ@mail.gmail.com>
Message-ID: <CADRrdKvJvpFQhZ2GAO-_No=TjtaiYa45xAeA5K=GCrdL8STXSg@mail.gmail.com>

I am not in the PSC, but this RFC sounds very good. Thanks!

Now that the tests are going to change, maybe it is a good idea to apply
clang-format to them.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Wed, 16 Nov 2022 at 20:28, Kurt Schwehr <schwehr at gmail.com> wrote:

> I am +1 for this switch, but I'm definitely biased by working at Google.
> My thoughts:
>
> tut definitely gets the job done, but I found it a bit awkward too.  But I
> think the updates and the additional features of GoogleTest are probably
> worth it.  I especially like the distinction between ASSERT.* that
> immediately stops a test when it finds and issue and EXPECT that lets the
> test move forward until the end of that test so that I can see all of the
> results of EXPECTS.  The formerly separate "mock" capabilities are really
> handy too.
>
> I wrote a bunch of C++ GDAL tests using GoogleTests in the 2013-207 time
> frame (Even used a bit of that work as starters to the tests in PROJ, but
> he went way beyond what I had).  I have a lot of the tests in github, but
> they are written against very old versions of GDAL.  And, the GoogleTest
> ability to work with newer versions of C++ has gotten a lot stronger.
> C++17 wasn't even available when I wrote a lot of the test code.  We have
> been upgrading GDAL and improving the tests, so if there is interest, I can
> try to do some updates to the repo.  If any of the autotest2 code is used,
> the license should be switched from Apache 2.0 to the MIT style license mentioned
> here
> <https://github.com/OSGeo/gdal/blob/a394f9cb299b2c3c2159098483d1fece3a464fda/LICENSE.TXT#L15>
> .
>
> https://github.com/schwehr/gdal-autotest2/tree/master/cpp
>
> -Kurt
>
>
> On Wed, Nov 16, 2022 at 10:42 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> As this is RFC season. I've prepared RFC88: Use GoogleTest framework for
>> C/C++ unit tests
>>
>> Text at https://github.com/OSGeo/gdal/pull/6720
>>
>> Summary:
>>
>> The document proposes and describes conversion of the existing C/C++
>> autotest suite to use the `GoogleTest
>> framework <https://github.com/google/googletest>`__.
>>
>> GoogleTest is a popular and maintained framework for C/C++ test
>> writing, that is a better replacement for the `TUT framework
>> <https://github.com/mrzechonek/tut-framework>`__ that we use currently.
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221118/9bab2f99/attachment.htm>

From ashley_c_mort at raytheon.com  Fri Nov 18 15:16:33 2022
From: ashley_c_mort at raytheon.com (Ashley Mort)
Date: Fri, 18 Nov 2022 23:16:33 +0000
Subject: [gdal-dev] jp2openjpeg: gdal build not finding openjpeg
Message-ID: <BN2P110MB1256BD5D463F46D09CE8D740CA099@BN2P110MB1256.NAMP110.PROD.OUTLOOK.COM>

I am trying to get jp2openjpeg in my GDAL build.  This is in a docker image running CentOS7.  I have successfully installed other libraries with GDAL (PROJ, Expat, LibTIFF, etc.) so I'm not sure why it's not finding OpenJPEG.

Can anyone provide any advice on how to get the jp2openjpeg driver going for my GDAL build?  My Linux & GDAL build knowledge is mediocre at best.  I am willing to change GDAL version or try to use it as a plugin if necessary but I'm just not sure what I need to be investigating.  Any ideas?

Thanks!
Ashley

/usr/local/lib has:
-rw-r--r--. 1 root root    564662 Nov 18 18:59 libopenjp2.a
lrwxrwxrwx. 1 root root        15 Nov 18 18:59 libopenjp2.so -> libopenjp2.so.7
-rwxr-xr-x. 1 root root    458888 Nov 18 18:59 libopenjp2.so.2.5.0
lrwxrwxrwx. 1 root root        19 Nov 18 18:59 libopenjp2.so.7 -> libopenjp2.so.2.5.0

GDAL ./configure output shows:
checking for OPENJPEG... no

OpenJPEG support:          no

Dockerfile parts:
#install OpenJPEG (GDAL JP2OpenJPEG jpeg2000 support for reading JPEG2000 compressed NITF files)
ADD https://dev-server:8443/openjpeg/openjpeg-2.5.0.tar.gz /
RUN tar xzf openjpeg-2.5.0.tar.gz && \
    rm openjpeg-2.5.0.tar.gz && \
    cd openjpeg-2.5.0 && \
    cmake -DCMAKE_BUILD_TYPE=Release && \
   make -j6 && \
    make -j6 install

ENV LD_LIBRARY_PATH=/usr/local/lib:/usr/local/lib64

#install GDAL
ADD https://dev-server:8443/artifactory/com/gdal/gdal/3.4.1/gdal-3.4.1.tar.gz /
RUN tar xzf gdal-3.4.1.tar.gz && \
    rm gdal-3.4.1.tar.gz && \
    cd gdal-3.4.1 && \
    ./configure --with-openjpeg --with-proj && \
    make -j6 && \
    make -j6 install

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221118/427f6985/attachment.htm>

From michael.smith.erdc at gmail.com  Sat Nov 19 06:02:04 2022
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Sat, 19 Nov 2022 09:02:04 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
Message-ID: <FCC68A05-3303-4A94-BE89-F4F778080B86@gmail.com>

Just recently I?m seeing errors using iam profile authentication using /vsis3 drivers in gdal (over multiple versions). 

 gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia-dtm-5m.tif
HTTP: Fetch(http://169.254.169.254/latest/api/token)
HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 nghttp2/1.47.0
HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds: 10
HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)
AWS: Storing AIM credentials until 2022-11-19T19:39:17Z
gdalinfo failed - unable to open '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia-dtm-5m.tif'.

You can see it fetching the credentials. And if I manually fetch the credentials and set the AWS_ variables (access/secret/session) then it all works

Mike

Michael Smith
US Army Corps RSGIS Center

From even.rouault at spatialys.com  Sat Nov 19 06:26:00 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Nov 2022 15:26:00 +0100
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <FCC68A05-3303-4A94-BE89-F4F778080B86@gmail.com>
References: <FCC68A05-3303-4A94-BE89-F4F778080B86@gmail.com>
Message-ID: <26d4aa00-f829-12c1-d3c5-856307d88e70@spatialys.com>

Hi Mike,

could you send the output of

curl 
http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3

Slightly redacted of course, but with the exact formatting. This part of 
thee code currently uses a "simple JSON parser" 
(https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), 
which is actually just a non JSON-aware string tokenizer, and I suspect 
it could be defeated by a new formatting of S3 or something specific to 
your credentials.

It could also be that something unhandled by that parser appears inside 
quoted strings, like an escaped double quote or some other JSON escaped 
character (like an escaped forward slash \/ )

If that was the case we should likely switch to proper JSON 
deserialization (that part of the code must predate libjson-c being a 
build requirement of GDAL).

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From michael.smith.erdc at gmail.com  Sat Nov 19 06:35:44 2022
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Sat, 19 Nov 2022 09:35:44 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <26d4aa00-f829-12c1-d3c5-856307d88e70@spatialys.com>
References: <26d4aa00-f829-12c1-d3c5-856307d88e70@spatialys.com>
Message-ID: <13544A4C-C1AA-4F57-8A88-6F44D46B3D01@gmail.com>

 curl http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
{
  "Code" : "Success",
  "LastUpdated" : "2022-11-19T14:30:52Z",
  "Type" : "AWS-HMAC",
  "AccessKeyId" : "xxxxxxxxxxxxxxxxxxx",
  "SecretAccessKey" : "xxxxxxxxxxxxxxxxx/1ssuwVLuUevA",
  "Token" : "xxxxxxxxxz6ZANvixZ/Qhohaj8vlEORbiS12Wy0viYSL+mtg+SODus9XagS8uSovjDnFfM+a2iqP71TklhI5q18xhOFySsZCVT8RUXvgu9GlhyJrKFkvqgJXkd5qq0kAry8j6y5vRFn50Pvf/Ox/7tI0FYnYK5WUlk5AnT8+jurcHtHmpfOKNJfhCxxvwMh3Gfgbv+CaKeEnd/1ob3JURxgmOEllc8kmFj5ouixIkG7+tt2bXWCXlWof5zps+usJ4vaqdkbNSy4W8kzV4/c0OB5FGgpuZIFdQ7lleRDkis6wgixBcDWw/I95ivnL2VGyuv1r/ZsPMaWhi/JjET+spokZLmT9GGDawiZAmrdaz7BqnpoXKGq6XllO7uGCYFCvdBkSkRY90YDKzmgxEHrZ9hC09GmZy4jrCXKvuygILzSmnisNZaZw1CyNglXjx1C0ZGOnmxv6OOdWCaLRz0ps7wx8kZR5GeGwUcy6pLipQFr8DGJ2a8lv7StRGUJxND5rUoq8suZlhEI8LQ20APB4LH1Jf4H8smFIlVyTCS0eObBjqoAWYctYsxOeQG57+FFrQf0iTHpHS15Fx1LB7SJ2y99CYU63DRgJGWmKAN7oSCqbYkparZXlNAToLBiAYSezFAYCZtByavWXxsFwmqhG5SYbIWHmMlKhtEanFZUtNRpbEUD66XmwqO7h4GgY45s8iBrBou8d65UfnAULjcmfzLQvn/XSLylgOjv2qYKnm9crbqtSmaHovtiiyt7kTnLFxh+7ey6xbGan0owA==",
  "Expiration" : "2022-11-19T20:37:09Z"
}

I didn?t see anything odd in there but a json parsing issue would explain it. 

Mike

> On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> ?Hi Mike,
> 
> could you send the output of
> 
> curl http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
> 
> Slightly redacted of course, but with the exact formatting. This part of thee code currently uses a "simple JSON parser" (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), which is actually just a non JSON-aware string tokenizer, and I suspect it could be defeated by a new formatting of S3 or something specific to your credentials.
> 
> It could also be that something unhandled by that parser appears inside quoted strings, like an escaped double quote or some other JSON escaped character (like an escaped forward slash \/ )
> 
> If that was the case we should likely switch to proper JSON deserialization (that part of the code must predate libjson-c being a build requirement of GDAL).
> 
> Even
> 
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/e158cf75/attachment-0001.htm>

From michael.smith.erdc at gmail.com  Sat Nov 19 06:40:22 2022
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Sat, 19 Nov 2022 09:40:22 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <26d4aa00-f829-12c1-d3c5-856307d88e70@spatialys.com>
References: <26d4aa00-f829-12c1-d3c5-856307d88e70@spatialys.com>
Message-ID: <8F735EF0-188A-4F70-A9C7-6B3CD9ACD718@gmail.com>

I?m seeing that it?s getting a 206 response code, so wouldn?t that indicate auth is working?

 gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
HTTP: Fetch(http://169.254.169.254/latest/api/token)
HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 nghttp2/1.47.0
HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds: 10
HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)
AWS: Storing AIM credentials until 2022-11-19T20:42:58Z
S3: Downloading 0-16383 (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...
S3: Got response_code=206
gdalinfo failed - unable to open '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.


Mike



> On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> ?Hi Mike,
> 
> could you send the output of
> 
> curl http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
> 
> Slightly redacted of course, but with the exact formatting. This part of thee code currently uses a "simple JSON parser" (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), which is actually just a non JSON-aware string tokenizer, and I suspect it could be defeated by a new formatting of S3 or something specific to your credentials.
> 
> It could also be that something unhandled by that parser appears inside quoted strings, like an escaped double quote or some other JSON escaped character (like an escaped forward slash \/ )
> 
> If that was the case we should likely switch to proper JSON deserialization (that part of the code must predate libjson-c being a build requirement of GDAL).
> 
> Even
> 
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/4cd70e93/attachment.htm>

From even.rouault at spatialys.com  Sat Nov 19 06:48:58 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Nov 2022 15:48:58 +0100
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <8F735EF0-188A-4F70-A9C7-6B3CD9ACD718@gmail.com>
References: <26d4aa00-f829-12c1-d3c5-856307d88e70@spatialys.com>
 <8F735EF0-188A-4F70-A9C7-6B3CD9ACD718@gmail.com>
Message-ID: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>

Yes, a 206 response code means success here as we are requesting only 
bytes 0-16383. So maybe the file is not a valid TIFF ?

( "grid-dev-publiclidar" must not be so public I guess, because when 
trying with my credentials, I get a Access Denied)

Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit?:
> I?m seeing that it?s getting a 206 response code, so wouldn?t that 
> indicate auth is working?
>
> ?gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
> HTTP: Fetch(http://169.254.169.254/latest/api/token)
> HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 
> nghttp2/1.47.0
> HTTP: These HTTP headers were set: 
> X-aws-ec2-metadata-token-ttl-seconds: 10
> HTTP: 
> Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
> HTTP: 
> Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)
> AWS: Storing AIM credentials until 2022-11-19T20:42:58Z
> S3: Downloading 0-16383 
> (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...
> S3: Got response_code=206
> gdalinfo failed - unable to open 
> '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.
>
>
> Mike
>
>
>
>> On Nov 19, 2022, at 9:26 AM, Even Rouault 
>> <even.rouault at spatialys.com> wrote:
>>
>> ?Hi Mike,
>>
>> could you send the output of
>>
>> curl 
>> http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
>>
>> Slightly redacted of course, but with the exact formatting. This part 
>> of thee code currently uses a "simple JSON parser" 
>> (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), 
>> which is actually just a non JSON-aware string tokenizer, and I 
>> suspect it could be defeated by a new formatting of S3 or something 
>> specific to your credentials.
>>
>> It could also be that something unhandled by that parser appears 
>> inside quoted strings, like an escaped double quote or some other 
>> JSON escaped character (like an escaped forward slash \/ )
>>
>> If that was the case we should likely switch to proper JSON 
>> deserialization (that part of the code must predate libjson-c being a 
>> build requirement of GDAL).
>>
>> Even
>>
>>
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/941cc51d/attachment.htm>

From michael.smith.erdc at gmail.com  Sat Nov 19 07:00:12 2022
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Sat, 19 Nov 2022 10:00:12 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
Message-ID: <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/01f0df23/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Nov 19 07:08:09 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Nov 2022 16:08:09 +0100
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
Message-ID: <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>


Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit?:
> Correct, not a public bucket, which is why the IAM credentials are 
> needed. If I set them manually, it all works fine.

That's super weird if the result of a range request changes depending on 
how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON env 
variable and diff the logs ?

You could also try the gdal_cp.py sample script at 
https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py 
, which is a cp-like utility working with GDAL virtual file systems, 
with the 2 authentication methods

python gdal_cp.py 
/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif

(you can interrupt it with ctrl-c after a few seconds. that will be 
enough to get the first bytes)

you might need to run an hexadecimal editor to inspect a bit the content.

>
> [ u02]$ export AWS_ACCESS_KEY_ID=xxxxx
>
> Yes, a 206 response code means success here as we are requesting only 
> bytes 0-16383. So maybe the file is not a valid TIFF ?
>
> ( "grid-dev-publiclidar" must not be so public I guess, because when 
> trying with my credentials, I get a Access Denied)
>
> Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit?:
>> I?m seeing that it?s getting a 206 response code, so wouldn?t that 
>> indicate auth is working?
>>
>> ?gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
>> HTTP: Fetch(http://169.254.169.254/latest/api/token)
>> HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 
>> nghttp2/1.47.0
>> HTTP: These HTTP headers were set: 
>> X-aws-ec2-metadata-token-ttl-seconds: 10
>> HTTP: 
>> Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
>> HTTP: 
>> Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)
>> AWS: Storing AIM credentials until 2022-11-19T20:42:58Z
>> S3: Downloading 0-16383 
>> (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...
>> S3: Got response_code=206
>> gdalinfo failed - unable to open 
>> '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.
>>
>>
>> Mike
>>
>>
>>
>>> On Nov 19, 2022, at 9:26 AM, Even Rouault 
>>> <even.rouault at spatialys.com> wrote:
>>>
>>> ?Hi Mike,
>>>
>>> could you send the output of
>>>
>>> curl 
>>> http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
>>>
>>> Slightly redacted of course, but with the exact formatting. This 
>>> part of thee code currently uses a "simple JSON parser" 
>>> (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), 
>>> which is actually just a non JSON-aware string tokenizer, and I 
>>> suspect it could be defeated by a new formatting of S3 or something 
>>> specific to your credentials.
>>>
>>> It could also be that something unhandled by that parser appears 
>>> inside quoted strings, like an escaped double quote or some other 
>>> JSON escaped character (like an escaped forward slash \/ )
>>>
>>> If that was the case we should likely switch to proper JSON 
>>> deserialization (that part of the code must predate libjson-c being 
>>> a build requirement of GDAL).
>>>
>>> Even
>>>
>>>
>>> -- 
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
>>>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/92703a05/attachment.htm>

From michael.smith.erdc at gmail.com  Sat Nov 19 07:36:38 2022
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sat, 19 Nov 2022 10:36:38 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
 <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
Message-ID: <2D4EFC4C-0511-4B4A-BC2E-61D5FC45F137@gmail.com>

Using gdal_cp.py, it copies using IAM credentials (and using key credentials from the curl call). Now I?m even more confused.

 

I was able to replicate with the docker image osgeo/gdal:latest, so its not just my own docker image although it could be my own environment.

 

Will continue to debug.

 

Mike

 

From: Even Rouault <even.rouault at spatialys.com>
Date: Saturday, November 19, 2022 at 10:08 AM
To: <michael.smith.erdc at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] errors using IAM instance profile auth in s3

 

 

Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit :

Correct, not a public bucket, which is why the IAM credentials are needed. If I set them manually, it all works fine.

That's super weird if the result of a range request changes depending on how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON env variable and diff the logs ?

You could also try the gdal_cp.py sample script at https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py , which is a cp-like utility working with GDAL virtual file systems, with the 2 authentication methods

python gdal_cp.py /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif

(you can interrupt it with ctrl-c after a few seconds. that will be enough to get the first bytes)

you might need to run an hexadecimal editor to inspect a bit the content.

 

[ u02]$ export AWS_ACCESS_KEY_ID=xxxxx

Yes, a 206 response code means success here as we are requesting only bytes 0-16383. So maybe the file is not a valid TIFF ?

( "grid-dev-publiclidar" must not be so public I guess, because when trying with my credentials, I get a Access Denied)

Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit :

I?m seeing that it?s getting a 206 response code, so wouldn?t that indicate auth is working? 

 

 gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif

HTTP: Fetch(http://169.254.169.254/latest/api/token)

HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 nghttp2/1.47.0

HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds: 10

HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)

HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)

AWS: Storing AIM credentials until 2022-11-19T20:42:58Z

S3: Downloading 0-16383 (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...

S3: Got response_code=206

gdalinfo failed - unable to open '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.

 

 

Mike

 

 




On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com> wrote:

?Hi Mike,

could you send the output of

curl http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3

Slightly redacted of course, but with the exact formatting. This part of thee code currently uses a "simple JSON parser" (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), which is actually just a non JSON-aware string tokenizer, and I suspect it could be defeated by a new formatting of S3 or something specific to your credentials.

It could also be that something unhandled by that parser appears inside quoted strings, like an escaped double quote or some other JSON escaped character (like an escaped forward slash \/ )

If that was the case we should likely switch to proper JSON deserialization (that part of the code must predate libjson-c being a build requirement of GDAL).

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/56cb8f2f/attachment-0001.htm>

From ashley_c_mort at raytheon.com  Sat Nov 19 15:07:19 2022
From: ashley_c_mort at raytheon.com (Ashley Mort)
Date: Sat, 19 Nov 2022 23:07:19 +0000
Subject: [gdal-dev] jp2openjpeg: gdal build not finding openjpeg
In-Reply-To: <BN2P110MB1256BD5D463F46D09CE8D740CA099@BN2P110MB1256.NAMP110.PROD.OUTLOOK.COM>
References: <BN2P110MB1256BD5D463F46D09CE8D740CA099@BN2P110MB1256.NAMP110.PROD.OUTLOOK.COM>
Message-ID: <BN2P110MB1256E62FA5FBB7B2E9FB4FA2CA089@BN2P110MB1256.NAMP110.PROD.OUTLOOK.COM>

I found an old post from Even that mentioned PKG_CONFIG_PATH so I added the follow and everything works now:

ENV PKG_CONFIG_PATH=/usr/local/lib/pkgconfig

Ashley Mort
Sr. Software Engineer
972-638-6317 office
814-571-3039 cell

From: Ashley Mort
Sent: Friday, November 18, 2022 5:17 PM
To: gdal-dev at lists.osgeo.org
Subject: jp2openjpeg: gdal build not finding openjpeg

I am trying to get jp2openjpeg in my GDAL build.  This is in a docker image running CentOS7.  I have successfully installed other libraries with GDAL (PROJ, Expat, LibTIFF, etc.) so I'm not sure why it's not finding OpenJPEG.

Can anyone provide any advice on how to get the jp2openjpeg driver going for my GDAL build?  My Linux & GDAL build knowledge is mediocre at best.  I am willing to change GDAL version or try to use it as a plugin if necessary but I'm just not sure what I need to be investigating.  Any ideas?

Thanks!
Ashley

/usr/local/lib has:
-rw-r--r--. 1 root root    564662 Nov 18 18:59 libopenjp2.a
lrwxrwxrwx. 1 root root        15 Nov 18 18:59 libopenjp2.so -> libopenjp2.so.7
-rwxr-xr-x. 1 root root    458888 Nov 18 18:59 libopenjp2.so.2.5.0
lrwxrwxrwx. 1 root root        19 Nov 18 18:59 libopenjp2.so.7 -> libopenjp2.so.2.5.0

GDAL ./configure output shows:
checking for OPENJPEG... no

OpenJPEG support:          no

Dockerfile parts:
#install OpenJPEG (GDAL JP2OpenJPEG jpeg2000 support for reading JPEG2000 compressed NITF files)
ADD https://dev-server:8443/openjpeg/openjpeg-2.5.0.tar.gz /
RUN tar xzf openjpeg-2.5.0.tar.gz && \
    rm openjpeg-2.5.0.tar.gz && \
    cd openjpeg-2.5.0 && \
    cmake -DCMAKE_BUILD_TYPE=Release && \
   make -j6 && \
    make -j6 install

ENV LD_LIBRARY_PATH=/usr/local/lib:/usr/local/lib64

#install GDAL
ADD https://dev-server:8443/artifactory/com/gdal/gdal/3.4.1/gdal-3.4.1.tar.gz /
RUN tar xzf gdal-3.4.1.tar.gz && \
    rm gdal-3.4.1.tar.gz && \
    cd gdal-3.4.1 && \
    ./configure --with-openjpeg --with-proj && \
    make -j6 && \
    make -j6 install

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221119/c2db9f90/attachment.htm>

From michael.smith.erdc at gmail.com  Sun Nov 20 05:47:13 2022
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 20 Nov 2022 08:47:13 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
 <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
Message-ID: <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>

Is there a reason why OpenEx would work but Open wouldn?t?

 

In [1]: from osgeo import gdal

In [2]: pszFilename = "/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"

In [3]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)

In [4]: hDataset

In [5]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)

In [6]: hDataset

Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at 0x7f827217c450> >

In [7]: hDataset.GetGeoTransform()

Out[7]: (365000.0, 5.0, 0.0, 6635000.0, 0.0, -5.0)

 

Mike

 

 

From: Even Rouault <even.rouault at spatialys.com>
Date: Saturday, November 19, 2022 at 10:08 AM
To: <michael.smith.erdc at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] errors using IAM instance profile auth in s3

 

 

Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit :

Correct, not a public bucket, which is why the IAM credentials are needed. If I set them manually, it all works fine.

That's super weird if the result of a range request changes depending on how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON env variable and diff the logs ?

You could also try the gdal_cp.py sample script at https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py , which is a cp-like utility working with GDAL virtual file systems, with the 2 authentication methods

python gdal_cp.py /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif

(you can interrupt it with ctrl-c after a few seconds. that will be enough to get the first bytes)

you might need to run an hexadecimal editor to inspect a bit the content.

 

[ u02]$ export AWS_ACCESS_KEY_ID=xxxxx

Yes, a 206 response code means success here as we are requesting only bytes 0-16383. So maybe the file is not a valid TIFF ?

( "grid-dev-publiclidar" must not be so public I guess, because when trying with my credentials, I get a Access Denied)

Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit :

I?m seeing that it?s getting a 206 response code, so wouldn?t that indicate auth is working? 

 

 gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif

HTTP: Fetch(http://169.254.169.254/latest/api/token)

HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 nghttp2/1.47.0

HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds: 10

HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)

HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)

AWS: Storing AIM credentials until 2022-11-19T20:42:58Z

S3: Downloading 0-16383 (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...

S3: Got response_code=206

gdalinfo failed - unable to open '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.

 

 

Mike

 

 




On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com> wrote:

?Hi Mike,

could you send the output of

curl http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3

Slightly redacted of course, but with the exact formatting. This part of thee code currently uses a "simple JSON parser" (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), which is actually just a non JSON-aware string tokenizer, and I suspect it could be defeated by a new formatting of S3 or something specific to your credentials.

It could also be that something unhandled by that parser appears inside quoted strings, like an escaped double quote or some other JSON escaped character (like an escaped forward slash \/ )

If that was the case we should likely switch to proper JSON deserialization (that part of the code must predate libjson-c being a build requirement of GDAL).

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/520d5678/attachment-0001.htm>

From michael.smith.erdc at gmail.com  Sun Nov 20 05:53:53 2022
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 20 Nov 2022 08:53:53 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
 <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
 <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>
Message-ID: <CAOTq7m7jsTgb9v6ERzvFeiakhs6+SHFyd+V2Ke=dLamUVboG0A@mail.gmail.com>

Oh, its just the second open that works

In [1]: from osgeo import gdal
In [2]: pszFilename =
"/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"
In [3]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)
In [4]: hDataset
In [5]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)
In [6]: hDataset
Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type
'GDALDatasetShadow *' at 0x7fef5b3fe1c0> >
In [7]: hDataset.GetProjectionRef()
Out[7]: 'PROJCS["Estonian Coordinate System of
1997",GEOGCS["EST97",DATUM["Estonia_1997",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG","6180"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4180"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["latitude_of_origin",57.5175539305556],PARAMETER["central_meridian",24],PARAMETER["standard_parallel_1",59.3333333333333],PARAMETER["standard_parallel_2",58],PARAMETER["false_easting",500000],PARAMETER["false_northing",6375000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Northing",NORTH],AXIS["Easting",EAST],AUTHORITY["EPSG","3301"]]'

On Sun, Nov 20, 2022 at 8:47 AM Michael Smith <michael.smith.erdc at gmail.com>
wrote:

> Is there a reason why OpenEx would work but Open wouldn?t?
>
>
>
> In [1]: from osgeo import gdal
>
> In [2]: pszFilename =
> "/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"
>
> In [3]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)
>
> In [4]: hDataset
>
> In [5]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)
>
> In [6]: hDataset
>
> Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type
> 'GDALDatasetShadow *' at 0x7f827217c450> >
>
> In [7]: hDataset.GetGeoTransform()
>
> Out[7]: (365000.0, 5.0, 0.0, 6635000.0, 0.0, -5.0)
>
>
>
> Mike
>
>
>
>
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Saturday, November 19, 2022 at 10:08 AM
> *To: *<michael.smith.erdc at gmail.com>
> *Cc: *gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] errors using IAM instance profile auth in s3
>
>
>
>
>
> Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit :
>
> Correct, not a public bucket, which is why the IAM credentials are needed.
> If I set them manually, it all works fine.
>
> That's super weird if the result of a range request changes depending on
> how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON env
> variable and diff the logs ?
>
> You could also try the gdal_cp.py sample script at
> https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py
> , which is a cp-like utility working with GDAL virtual file systems, with
> the 2 authentication methods
>
> python gdal_cp.py
> /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif
>
> (you can interrupt it with ctrl-c after a few seconds. that will be enough
> to get the first bytes)
>
> you might need to run an hexadecimal editor to inspect a bit the content.
>
>
>
> [ u02]$ export AWS_ACCESS_KEY_ID=xxxxx
>
> Yes, a 206 response code means success here as we are requesting only
> bytes 0-16383. So maybe the file is not a valid TIFF ?
>
> ( "grid-dev-publiclidar" must not be so public I guess, because when
> trying with my credentials, I get a Access Denied)
>
> Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit :
>
> I?m seeing that it?s getting a 206 response code, so wouldn?t that
> indicate auth is working?
>
>
>
>  gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
>
> HTTP: Fetch(http://169.254.169.254/latest/api/token)
>
> HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0
> nghttp2/1.47.0
>
> HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds: 10
>
> HTTP: Fetch(
> http://169.254.169.254/latest/meta-data/iam/security-credentials/)
>
> HTTP: Fetch(
> http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
> )
>
> AWS: Storing AIM credentials until 2022-11-19T20:42:58Z
>
> S3: Downloading 0-16383 (
> https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif
> )...
>
> S3: Got response_code=206
>
> gdalinfo failed - unable to open
> '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.
>
>
>
>
>
> Mike
>
>
>
>
>
>
>
> On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com>
> <even.rouault at spatialys.com> wrote:
>
> ?Hi Mike,
>
> could you send the output of
>
> curl
> http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
>
> Slightly redacted of course, but with the exact formatting. This part of
> thee code currently uses a "simple JSON parser" (
> https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554),
> which is actually just a non JSON-aware string tokenizer, and I suspect it
> could be defeated by a new formatting of S3 or something specific to your
> credentials.
>
> It could also be that something unhandled by that parser appears inside
> quoted strings, like an escaped double quote or some other JSON escaped
> character (like an escaped forward slash \/ )
>
> If that was the case we should likely switch to proper JSON
> deserialization (that part of the code must predate libjson-c being a build
> requirement of GDAL).
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> --
>
> http://www.spatialys.com
>
> My software is free, but my time generally not.
>
> --
>
> http://www.spatialys.com
>
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/0637504f/attachment.htm>

From michael.smith.erdc at gmail.com  Sun Nov 20 05:56:52 2022
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 20 Nov 2022 08:56:52 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <CAOTq7m7jsTgb9v6ERzvFeiakhs6+SHFyd+V2Ke=dLamUVboG0A@mail.gmail.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
 <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
 <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>
 <CAOTq7m7jsTgb9v6ERzvFeiakhs6+SHFyd+V2Ke=dLamUVboG0A@mail.gmail.com>
Message-ID: <CAOTq7m7BmxqJXDUv3Cu38b4QQL8sKq_r4aHD8Xuma0vhZotCBA@mail.gmail.com>

If I duplicate the open line in gdalinfo.py,

    hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)
    hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)

python
/opt/conda/envs/grid/lib/python3.11/site-packages/osgeo_utils/samples/gdalinfo.py
/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
Driver: GTiff/GeoTIFF
Files: /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
Size is 75000, 52000
Coordinate System is:
PROJCS["Estonian Coordinate System of 1997",
    GEOGCS["EST97",
        DATUM["Estonia_1997",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6180"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4180"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["latitude_of_origin",57.5175539305556],
    PARAMETER["central_meridian",24],
    PARAMETER["standard_parallel_1",59.3333333333333],
    PARAMETER["standard_parallel_2",58],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",6375000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Northing",NORTH],
    AXIS["Easting",EAST],
    AUTHORITY["EPSG","3301"]]
Origin = (365000.000000000000000,6635000.000000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
  LAYOUT=COG
Corner Coordinates:
Upper Left  (  365000.000, 6635000.000) (  1d39'11.60"W, 60d49'17.85"N)
Lower Left  (  365000.000, 6375000.000) (  0d52'55.22"W, 59d32'29.94"N)
Upper Right (  740000.000, 6635000.000) (  0d11'58.07"E, 61d58' 8.49"N)
Lower Right (  740000.000, 6375000.000) (  1d 0'53.53"E, 60d39'59.57"N)
Center      (  552500.000, 6505000.000) (  0d19'56.63"W, 60d44'44.22"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
  NoData Value=-9999
  Overviews: 37500x26000, 18750x13000, 9375x6500, 4688x3250, 2344x1625,
1172x813, 586x407, 293x204

On Sun, Nov 20, 2022 at 8:53 AM Michael Smith <michael.smith.erdc at gmail.com>
wrote:

> Oh, its just the second open that works
>
> In [1]: from osgeo import gdal
> In [2]: pszFilename =
> "/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"
> In [3]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)
> In [4]: hDataset
> In [5]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)
> In [6]: hDataset
> Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type
> 'GDALDatasetShadow *' at 0x7fef5b3fe1c0> >
> In [7]: hDataset.GetProjectionRef()
> Out[7]: 'PROJCS["Estonian Coordinate System of
> 1997",GEOGCS["EST97",DATUM["Estonia_1997",SPHEROID["GRS
> 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG","6180"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4180"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["latitude_of_origin",57.5175539305556],PARAMETER["central_meridian",24],PARAMETER["standard_parallel_1",59.3333333333333],PARAMETER["standard_parallel_2",58],PARAMETER["false_easting",500000],PARAMETER["false_northing",6375000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Northing",NORTH],AXIS["Easting",EAST],AUTHORITY["EPSG","3301"]]'
>
> On Sun, Nov 20, 2022 at 8:47 AM Michael Smith <
> michael.smith.erdc at gmail.com> wrote:
>
>> Is there a reason why OpenEx would work but Open wouldn?t?
>>
>>
>>
>> In [1]: from osgeo import gdal
>>
>> In [2]: pszFilename =
>> "/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"
>>
>> In [3]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)
>>
>> In [4]: hDataset
>>
>> In [5]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)
>>
>> In [6]: hDataset
>>
>> Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type
>> 'GDALDatasetShadow *' at 0x7f827217c450> >
>>
>> In [7]: hDataset.GetGeoTransform()
>>
>> Out[7]: (365000.0, 5.0, 0.0, 6635000.0, 0.0, -5.0)
>>
>>
>>
>> Mike
>>
>>
>>
>>
>>
>> *From: *Even Rouault <even.rouault at spatialys.com>
>> *Date: *Saturday, November 19, 2022 at 10:08 AM
>> *To: *<michael.smith.erdc at gmail.com>
>> *Cc: *gdal-dev <gdal-dev at lists.osgeo.org>
>> *Subject: *Re: [gdal-dev] errors using IAM instance profile auth in s3
>>
>>
>>
>>
>>
>> Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit :
>>
>> Correct, not a public bucket, which is why the IAM credentials are
>> needed. If I set them manually, it all works fine.
>>
>> That's super weird if the result of a range request changes depending on
>> how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON env
>> variable and diff the logs ?
>>
>> You could also try the gdal_cp.py sample script at
>> https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py
>> , which is a cp-like utility working with GDAL virtual file systems, with
>> the 2 authentication methods
>>
>> python gdal_cp.py
>> /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif
>>
>> (you can interrupt it with ctrl-c after a few seconds. that will be
>> enough to get the first bytes)
>>
>> you might need to run an hexadecimal editor to inspect a bit the content.
>>
>>
>>
>> [ u02]$ export AWS_ACCESS_KEY_ID=xxxxx
>>
>> Yes, a 206 response code means success here as we are requesting only
>> bytes 0-16383. So maybe the file is not a valid TIFF ?
>>
>> ( "grid-dev-publiclidar" must not be so public I guess, because when
>> trying with my credentials, I get a Access Denied)
>>
>> Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit :
>>
>> I?m seeing that it?s getting a 206 response code, so wouldn?t that
>> indicate auth is working?
>>
>>
>>
>>  gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
>>
>> HTTP: Fetch(http://169.254.169.254/latest/api/token)
>>
>> HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0
>> nghttp2/1.47.0
>>
>> HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds:
>> 10
>>
>> HTTP: Fetch(
>> http://169.254.169.254/latest/meta-data/iam/security-credentials/)
>>
>> HTTP: Fetch(
>> http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
>> )
>>
>> AWS: Storing AIM credentials until 2022-11-19T20:42:58Z
>>
>> S3: Downloading 0-16383 (
>> https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif
>> )...
>>
>> S3: Got response_code=206
>>
>> gdalinfo failed - unable to open
>> '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.
>>
>>
>>
>>
>>
>> Mike
>>
>>
>>
>>
>>
>>
>>
>> On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com>
>> <even.rouault at spatialys.com> wrote:
>>
>> ?Hi Mike,
>>
>> could you send the output of
>>
>> curl
>> http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
>>
>> Slightly redacted of course, but with the exact formatting. This part of
>> thee code currently uses a "simple JSON parser" (
>> https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554),
>> which is actually just a non JSON-aware string tokenizer, and I suspect it
>> could be defeated by a new formatting of S3 or something specific to your
>> credentials.
>>
>> It could also be that something unhandled by that parser appears inside
>> quoted strings, like an escaped double quote or some other JSON escaped
>> character (like an escaped forward slash \/ )
>>
>> If that was the case we should likely switch to proper JSON
>> deserialization (that part of the code must predate libjson-c being a build
>> requirement of GDAL).
>>
>> Even
>>
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> --
>>
>> http://www.spatialys.com
>>
>> My software is free, but my time generally not.
>>
>> --
>>
>> http://www.spatialys.com
>>
>> My software is free, but my time generally not.
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/5f0f2271/attachment-0001.htm>

From even.rouault at spatialys.com  Sun Nov 20 09:52:47 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 20 Nov 2022 18:52:47 +0100
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
 <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
 <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>
Message-ID: <477ab4d3-2912-1e43-18e6-f64a3062633b@spatialys.com>

Mike,

I've ended up firing a EC2 instance and I did replicate with my private 
bucket too.

With a EC2 Ubuntu 22.04 instance, on a minimal GDAL master debug build, 
things work fine with IAM authentication, in the VM itself

But if I run inside a ubuntu:22.04 Docker image the same build (mounting 
my home directory), then I got exactly the same symptoms as you!

I finally figured out that the "curl -X PUT 
"http://169.254.169.254/latest/api/token" -H 
"X-aws-ec2-metadata-token-ttl-seconds: 10" request for IDMSv2 was 
failing inside Docker but not in the outside EC2 VM. Known (intended) 
issue according to 
https://community.grafana.com/t/imdsv2-is-not-working-from-docker/65944

The solution/workaround is to run docker with --network=host (I guess it 
could be possible to restrict it a bit to just 169.254.169.254)

In https://github.com/OSGeo/gdal/pull/6752, I've pushed a proper fix, 
that makes sure that the fallback to IDMSv1 works by clearing the GDAL 
error state (which was the reason for the weird behaviour that 
GDALOpen() only worked the second time), and emits a hopefully debug 
hint when it sees that IDMSv2 fails on timeout inside a Docker container.

With the fix, when trying inside a Docker with default networking rules:

# gdalinfo /vsis3/XXXXXXX/byte.tif --debug on
AWS: AWS_ROLE_ARN configuration option not defined
HTTP: Fetch(http://169.254.169.254/latest/api/token)
HTTP: libcurl/7.81.0 GnuTLS/3.7.3 zlib/1.2.11 brotli/1.0.9 zstd/1.4.8 
libidn2/2.3.2 libpsl/0.21.0 (+libidn2/2.3.2) libssh/0.9.6/openssl/zlib 
nghttp2/1.43.0 librtmp/2.3 OpenLDAP/2.5.13
HTTP: Fetch(http://169.254.169.254/latest/meta-data)
S3: /latest/api/token EC2 IDMSv2 request timed out, but /latest/metadata 
succeeded. Trying with IDMSv1. Try running your Docker container with 
--network=host.
HTTP: 
Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
HTTP: 
Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/ec2_s3)
AWS: Storing AIM credentials until 2022-11-20T23:38:10Z
S3: Switching to region eu-central-1
S3: Downloading 0-1796 (https://XXXXXXX.s3.amazonaws.com/byte.tif)...
S3: Got response_code=206
GDAL: GDALOpen(/vsis3/XXXXXXX/byte.tif, this=0x5599cfbce470) succeeds as 
GTiff.

It was an "interesting" bug...

Even

Le 20/11/2022 ? 14:47, Michael Smith a ?crit?:
>
> Is there a reason why OpenEx would work but Open wouldn?t?
>
> In [1]: from osgeo import gdal
>
> In [2]: pszFilename = 
> "/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"
>
> In [3]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)
>
> In [4]: hDataset
>
> In [5]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)
>
> In [6]: hDataset
>
> Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type 
> 'GDALDatasetShadow *' at 0x7f827217c450> >
>
> In [7]: hDataset.GetGeoTransform()
>
> Out[7]: (365000.0, 5.0, 0.0, 6635000.0, 0.0, -5.0)
>
> Mike
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Saturday, November 19, 2022 at 10:08 AM
> *To: *<michael.smith.erdc at gmail.com>
> *Cc: *gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] errors using IAM instance profile auth in s3
>
> Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit?:
>
>     Correct, not a public bucket, which is why the IAM credentials are
>     needed. If I set them manually, it all works fine.
>
> That's super weird if the result of a range request changes depending 
> on how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON 
> env variable and diff the logs ?
>
> You could also try the gdal_cp.py sample script at 
> https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py 
> , which is a cp-like utility working with GDAL virtual file systems, 
> with the 2 authentication methods
>
> python gdal_cp.py 
> /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif
>
> (you can interrupt it with ctrl-c after a few seconds. that will be 
> enough to get the first bytes)
>
> you might need to run an hexadecimal editor to inspect a bit the content.
>
>     [ u02]$ export AWS_ACCESS_KEY_ID=xxxxx
>
>     Yes, a 206 response code means success here as we are requesting
>     only bytes 0-16383. So maybe the file is not a valid TIFF ?
>
>     ( "grid-dev-publiclidar" must not be so public I guess, because
>     when trying with my credentials, I get a Access Denied)
>
>     Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit?:
>
>         I?m seeing that it?s getting a 206 response code, so wouldn?t
>         that indicate auth is working?
>
>         ?gdalinfo
>         /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif
>
>         HTTP: Fetch(http://169.254.169.254/latest/api/token)
>
>         HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0
>         nghttp2/1.47.0
>
>         HTTP: These HTTP headers were set:
>         X-aws-ec2-metadata-token-ttl-seconds: 10
>
>         HTTP:
>         Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
>
>         HTTP:
>         Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)
>
>         AWS: Storing AIM credentials until 2022-11-19T20:42:58Z
>
>         S3: Downloading 0-16383
>         (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...
>
>         S3: Got response_code=206
>
>         gdalinfo failed - unable to open
>         '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.
>
>         Mike
>
>
>
>             On Nov 19, 2022, at 9:26 AM, Even Rouault
>             <even.rouault at spatialys.com>
>             <mailto:even.rouault at spatialys.com> wrote:
>
>             ?Hi Mike,
>
>             could you send the output of
>
>             curl
>             http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3
>
>             Slightly redacted of course, but with the exact
>             formatting. This part of thee code currently uses a
>             "simple JSON parser"
>             (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554),
>             which is actually just a non JSON-aware string tokenizer,
>             and I suspect it could be defeated by a new formatting of
>             S3 or something specific to your credentials.
>
>             It could also be that something unhandled by that parser
>             appears inside quoted strings, like an escaped double
>             quote or some other JSON escaped character (like an
>             escaped forward slash \/ )
>
>             If that was the case we should likely switch to proper
>             JSON deserialization (that part of the code must predate
>             libjson-c being a build requirement of GDAL).
>
>             Even
>
>
>             -- 
>             http://www.spatialys.com
>             My software is free, but my time generally not.
>
>     -- 
>
>     http://www.spatialys.com
>
>     My software is free, but my time generally not.
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/9e32b780/attachment-0001.htm>

From michael.smith.erdc at gmail.com  Sun Nov 20 10:20:28 2022
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 20 Nov 2022 13:20:28 -0500
Subject: [gdal-dev] errors using IAM instance profile auth in s3
In-Reply-To: <477ab4d3-2912-1e43-18e6-f64a3062633b@spatialys.com>
References: <a1c40730-c65d-421e-b1da-60c74247d572@spatialys.com>
 <D84600C8-F681-4BA9-B610-FDBA35DBA758@gmail.com>
 <d831baae-1483-2167-f3f6-062f1b4a4fb1@spatialys.com>
 <EA855DA6-53F8-446E-97CA-ABF415E0B5AB@gmail.com>
 <477ab4d3-2912-1e43-18e6-f64a3062633b@spatialys.com>
Message-ID: <FD1FDAEE-446C-4A23-9D51-63C6AB1DAD34@gmail.com>

Cool, I was looking at the PR and trying to decide if it was the same error. The error state being cleared and then working did sound like the same issue. It all makes sense now. Thanks for the fix!

 

Mike

 

 

-- 

Michael Smith

US Army Corps / Remote Sensing GIS Center

 

 

 

From: Even Rouault <even.rouault at spatialys.com>
Date: Sunday, November 20, 2022 at 12:52 PM
To: Michael Smith <michael.smith.erdc at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] errors using IAM instance profile auth in s3

 

Mike,

I've ended up firing a EC2 instance and I did replicate with my private bucket too.

With a EC2 Ubuntu 22.04 instance, on a minimal GDAL master debug build, things work fine with IAM authentication, in the VM itself

But if I run inside a ubuntu:22.04 Docker image the same build (mounting my home directory), then I got exactly the same symptoms as you!

I finally figured out that the "curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 10" request for IDMSv2 was failing inside Docker but not in the outside EC2 VM. Known (intended) issue according to https://community.grafana.com/t/imdsv2-is-not-working-from-docker/65944 

The solution/workaround is to run docker with --network=host (I guess it could be possible to restrict it a bit to just 169.254.169.254)

In https://github.com/OSGeo/gdal/pull/6752, I've pushed a proper fix, that makes sure that the fallback to IDMSv1 works by clearing the GDAL error state (which was the reason for the weird behaviour that GDALOpen() only worked the second time), and emits a hopefully debug hint when it sees that IDMSv2 fails on timeout inside a Docker container.

With the fix, when trying inside a Docker with default networking rules:

# gdalinfo /vsis3/XXXXXXX/byte.tif --debug on
AWS: AWS_ROLE_ARN configuration option not defined
HTTP: Fetch(http://169.254.169.254/latest/api/token)
HTTP: libcurl/7.81.0 GnuTLS/3.7.3 zlib/1.2.11 brotli/1.0.9 zstd/1.4.8 libidn2/2.3.2 libpsl/0.21.0 (+libidn2/2.3.2) libssh/0.9.6/openssl/zlib nghttp2/1.43.0 librtmp/2.3 OpenLDAP/2.5.13
HTTP: Fetch(http://169.254.169.254/latest/meta-data)
S3: /latest/api/token EC2 IDMSv2 request timed out, but /latest/metadata succeeded. Trying with IDMSv1. Try running your Docker container with --network=host.
HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)
HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/ec2_s3)
AWS: Storing AIM credentials until 2022-11-20T23:38:10Z
S3: Switching to region eu-central-1
S3: Downloading 0-1796 (https://XXXXXXX.s3.amazonaws.com/byte.tif)...
S3: Got response_code=206
GDAL: GDALOpen(/vsis3/XXXXXXX/byte.tif, this=0x5599cfbce470) succeeds as GTiff.

It was an "interesting" bug...

Even

Le 20/11/2022 ? 14:47, Michael Smith a ?crit :

Is there a reason why OpenEx would work but Open wouldn?t?

 

In [1]: from osgeo import gdal

In [2]: pszFilename = "/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif"

In [3]: hDataset = gdal.Open(pszFilename, gdal.GA_ReadOnly)

In [4]: hDataset

In [5]: hDataset = gdal.OpenEx(pszFilename, gdal.GA_ReadOnly)

In [6]: hDataset

Out[6]: <osgeo.gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at 0x7f827217c450> >

In [7]: hDataset.GetGeoTransform()

Out[7]: (365000.0, 5.0, 0.0, 6635000.0, 0.0, -5.0)

 

Mike

 

 

From: Even Rouault <even.rouault at spatialys.com>
Date: Saturday, November 19, 2022 at 10:08 AM
To: <michael.smith.erdc at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] errors using IAM instance profile auth in s3

 

 

Le 19/11/2022 ? 16:00, michael.smith.erdc at gmail.com a ?crit :

Correct, not a public bucket, which is why the IAM credentials are needed. If I set them manually, it all works fine.

That's super weird if the result of a range request changes depending on how credentials have been set... Perhaps enable CPL_CURL_VERBOSE=ON env variable and diff the logs ?

You could also try the gdal_cp.py sample script at https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_cp.py , which is a cp-like utility working with GDAL virtual file systems, with the 2 authentication methods

python gdal_cp.py /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif out.tif

(you can interrupt it with ctrl-c after a few seconds. that will be enough to get the first bytes)

you might need to run an hexadecimal editor to inspect a bit the content.

 

[ u02]$ export AWS_ACCESS_KEY_ID=xxxxx

Yes, a 206 response code means success here as we are requesting only bytes 0-16383. So maybe the file is not a valid TIFF ?

( "grid-dev-publiclidar" must not be so public I guess, because when trying with my credentials, I get a Access Denied)

Le 19/11/2022 ? 15:40, michael.smith.erdc at gmail.com a ?crit :

I?m seeing that it?s getting a 206 response code, so wouldn?t that indicate auth is working? 

 

 gdalinfo /vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif

HTTP: Fetch(http://169.254.169.254/latest/api/token)

HTTP: libcurl/7.86.0 OpenSSL/3.0.7 zlib/1.2.13 libssh2/1.10.0 nghttp2/1.47.0

HTTP: These HTTP headers were set: X-aws-ec2-metadata-token-ttl-seconds: 10

HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/)

HTTP: Fetch(http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3)

AWS: Storing AIM credentials until 2022-11-19T20:42:58Z

S3: Downloading 0-16383 (https://grid-dev-publiclidar.s3.amazonaws.com/estonia/dtm/estonia_dtm_5m.tif)...

S3: Got response_code=206

gdalinfo failed - unable to open '/vsis3/grid-dev-publiclidar/estonia/dtm/estonia_dtm_5m.tif'.

 

 

Mike

 

 





On Nov 19, 2022, at 9:26 AM, Even Rouault <even.rouault at spatialys.com> wrote:

?Hi Mike,

could you send the output of

curl http://169.254.169.254/latest/meta-data/iam/security-credentials/iam-grid-s3

Slightly redacted of course, but with the exact formatting. This part of thee code currently uses a "simple JSON parser" (https://github.com/OSGeo/gdal/blob/c61d116a469821b769630a112dee7f1a61fed885/port/cpl_aws.cpp#L554), which is actually just a non JSON-aware string tokenizer, and I suspect it could be defeated by a new formatting of S3 or something specific to your credentials.

It could also be that something unhandled by that parser appears inside quoted strings, like an escaped double quote or some other JSON escaped character (like an escaped forward slash \/ )

If that was the case we should likely switch to proper JSON deserialization (that part of the code must predate libjson-c being a build requirement of GDAL).

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/7b1c94d2/attachment.htm>

From warmerdam at pobox.com  Sun Nov 20 17:07:35 2022
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 20 Nov 2022 20:07:35 -0500
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <CADRrdKvJvpFQhZ2GAO-_No=TjtaiYa45xAeA5K=GCrdL8STXSg@mail.gmail.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
 <CACmBxyvGSoXXK0NduRapBcg-Nt2Bw9S8p8oaE6Mq_0GZ_Dc1hQ@mail.gmail.com>
 <CADRrdKvJvpFQhZ2GAO-_No=TjtaiYa45xAeA5K=GCrdL8STXSg@mail.gmail.com>
Message-ID: <CA+YzLBfCM5Naezt-PT+EykFDQuNKeYuF2mg4iVJBVcLiaQEOEw@mail.gmail.com>

Even,

I'm not a huge GoogleTest fan but then I'm also not saying it *worse* than
any alternative, but the reasons are reasonably convincing, and I'm happy
if those running and contributing tests are happy!

Should I understand from the RFC that
https://github.com/rouault/gdal/tree/gtest implements the migration?  (ie.
we have already done the work to migrate, we just need to agree on it?)

Best regards,
Frank


On Fri, Nov 18, 2022 at 2:27 PM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> I am not in the PSC, but this RFC sounds very good. Thanks!
>
> Now that the tests are going to change, maybe it is a good idea to apply
> clang-format to them.
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Wed, 16 Nov 2022 at 20:28, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> I am +1 for this switch, but I'm definitely biased by working at Google.
>> My thoughts:
>>
>> tut definitely gets the job done, but I found it a bit awkward too.  But
>> I think the updates and the additional features of GoogleTest are probably
>> worth it.  I especially like the distinction between ASSERT.* that
>> immediately stops a test when it finds and issue and EXPECT that lets the
>> test move forward until the end of that test so that I can see all of the
>> results of EXPECTS.  The formerly separate "mock" capabilities are really
>> handy too.
>>
>> I wrote a bunch of C++ GDAL tests using GoogleTests in the 2013-207 time
>> frame (Even used a bit of that work as starters to the tests in PROJ, but
>> he went way beyond what I had).  I have a lot of the tests in github, but
>> they are written against very old versions of GDAL.  And, the GoogleTest
>> ability to work with newer versions of C++ has gotten a lot stronger.
>> C++17 wasn't even available when I wrote a lot of the test code.  We have
>> been upgrading GDAL and improving the tests, so if there is interest, I can
>> try to do some updates to the repo.  If any of the autotest2 code is used,
>> the license should be switched from Apache 2.0 to the MIT style license mentioned
>> here
>> <https://github.com/OSGeo/gdal/blob/a394f9cb299b2c3c2159098483d1fece3a464fda/LICENSE.TXT#L15>
>> .
>>
>> https://github.com/schwehr/gdal-autotest2/tree/master/cpp
>>
>> -Kurt
>>
>>
>> On Wed, Nov 16, 2022 at 10:42 AM Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> Hi,
>>>
>>> As this is RFC season. I've prepared RFC88: Use GoogleTest framework for
>>> C/C++ unit tests
>>>
>>> Text at https://github.com/OSGeo/gdal/pull/6720
>>>
>>> Summary:
>>>
>>> The document proposes and describes conversion of the existing C/C++
>>> autotest suite to use the `GoogleTest
>>> framework <https://github.com/google/googletest>`__.
>>>
>>> GoogleTest is a popular and maintained framework for C/C++ test
>>> writing, that is a better replacement for the `TUT framework
>>> <https://github.com/mrzechonek/tut-framework>`__ that we use currently.
>>>
>>> Even
>>>
>>> --
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/b6b64318/attachment.htm>

From even.rouault at spatialys.com  Sun Nov 20 17:21:39 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Nov 2022 02:21:39 +0100
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <CA+YzLBfCM5Naezt-PT+EykFDQuNKeYuF2mg4iVJBVcLiaQEOEw@mail.gmail.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
 <CACmBxyvGSoXXK0NduRapBcg-Nt2Bw9S8p8oaE6Mq_0GZ_Dc1hQ@mail.gmail.com>
 <CADRrdKvJvpFQhZ2GAO-_No=TjtaiYa45xAeA5K=GCrdL8STXSg@mail.gmail.com>
 <CA+YzLBfCM5Naezt-PT+EykFDQuNKeYuF2mg4iVJBVcLiaQEOEw@mail.gmail.com>
Message-ID: <ed858df8-4d10-61f0-ee65-4406985d4521@spatialys.com>

Hi Frank,
>
> I'm not a huge GoogleTest fan but then I'm also not saying it *worse* 
> than any alternative, but the reasons are reasonably convincing, and 
> I'm happy if those running?and contributing tests are happy!
Just curious what you don't like with GoogleTest ?
>
> Should I understand from the RFC that 
> https://github.com/rouault/gdal/tree/gtest implements the migration?? 
> (ie. we have already done the work to migrate, we just need to agree 
> on it?)

Yes the implementation is ready in 
https://github.com/OSGeo/gdal/pull/6732 . I find it more convincing when 
there's an implementation backing a RFC (it was partial when I submitted 
the RFC and I finished it as the initial feedback was positive)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/4ccc603b/attachment.htm>

From warmerdam at pobox.com  Sun Nov 20 17:28:40 2022
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 20 Nov 2022 20:28:40 -0500
Subject: [gdal-dev] Call for discussion: RFC88: Use GoogleTest framework
 for C/C++ unit tests
In-Reply-To: <ed858df8-4d10-61f0-ee65-4406985d4521@spatialys.com>
References: <471ccad9-e8d4-1137-edf1-dafa714e92cf@spatialys.com>
 <CACmBxyvGSoXXK0NduRapBcg-Nt2Bw9S8p8oaE6Mq_0GZ_Dc1hQ@mail.gmail.com>
 <CADRrdKvJvpFQhZ2GAO-_No=TjtaiYa45xAeA5K=GCrdL8STXSg@mail.gmail.com>
 <CA+YzLBfCM5Naezt-PT+EykFDQuNKeYuF2mg4iVJBVcLiaQEOEw@mail.gmail.com>
 <ed858df8-4d10-61f0-ee65-4406985d4521@spatialys.com>
Message-ID: <CA+YzLBeXZRjOhcWJw3+jiGK0kW50z5G0v8rNYoGNsQfMEAJ1UQ@mail.gmail.com>

On Sun, Nov 20, 2022 at 8:21 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Frank,
>
>
> I'm not a huge GoogleTest fan but then I'm also not saying it *worse* than
> any alternative, but the reasons are reasonably convincing, and I'm happy
> if those running and contributing tests are happy!
>
> Just curious what you don't like with GoogleTest ?
>

Even,

There is nothing meaningful to offer.  I've been mildly annoyed by the
dependencies it implied in other projects (ie. PixelLoom), but really this
is not material.  My point was more along the line of "I hate every test
environment / ticket system / language / ...", but that given that I do not
find it worse than most. :-)

Should I understand from the RFC that
> https://github.com/rouault/gdal/tree/gtest implements the migration?
> (ie. we have already done the work to migrate, we just need to agree on it?)
>
> Yes the implementation is ready in https://github.com/OSGeo/gdal/pull/6732
> . I find it more convincing when there's an implementation backing a RFC
> (it was partial when I submitted the RFC and I finished it as the initial
> feedback was positive)
>

Awesome.  While sometimes it is a bit "heavy" to implement an idea before
proposing it, it does make it much easier to adopt knowing the
implementation is waiting in the wings.

Best regards,
Frank

> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221120/0cf6a95f/attachment.htm>

From mcalzado at carto.com  Mon Nov 21 01:20:35 2022
From: mcalzado at carto.com (Moises Calzado)
Date: Mon, 21 Nov 2022 10:20:35 +0100
Subject: [gdal-dev] Latest GDAL version not transforming lat/lng into geom
 column
Message-ID: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>

Hello everyone,

We've just updated to the latest GDAL version (v3.6.0) and it seems that
something is not working correctly when trying to obtain a geom column from
a CSV containing latitudes and longitudes.

This is the command that is being used:

ogr2ogr -f CSV -skipfailures -makevalid /vsistdout/ CSV:my_file.csv
> -simplify 0.00001 -dim XY -t_srs EPSG:4326 -lco GEOMETRY=AS_WKT -lco
> GEOMETRY_NAME=geom -lco CREATE_CSVT=YES -s_srs EPSG:4326 -oo
> KEEP_GEOM_COLUMNS=NO -oo
> X_POSSIBLE_NAMES=point_longitude,longitude,longitud,lon,Lon,Longitude,longitudedecimal,decimallongitude,decimallong,lng,long,Lng
> -oo
> Y_POSSIBLE_NAMES=latitude,latitud,lati,lat,Latitude,decimallat,decimallatitude,latitudedecimal,point_latitude
> -oo
> GEOM_POSSIBLE_NAMES=geom,Geom,geometry,the_geom,wkt,wkb,wkt_geometry,wkb_geometry
> -oo EMPTY_STRING_AS_NULL=YES -oo QUOTED_FIELDS_AS_STRING=NO -lco
> PRECISION=NO -oo AUTODETECT_SIZE_LIMIT=500000


The file that is being processed contains a column called lat and another
one called lon, and when I execute the same process on a docker container
running the version 3.5.1 of GDAL it works like a charm. We've also tried
to execute this process on the 3.5.3 version, and it also fails. Is that
expected?

Looking forward to your response,
Regards!

-- 
*Moises Calzado*

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com
<https://www.carto.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/15b3e361/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 21 01:28:15 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 21 Nov 2022 09:28:15 +0000
Subject: [gdal-dev] Latest GDAL version not transforming lat/lng into
 geom column
In-Reply-To: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>
References: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>
Message-ID: <AM0PR09MB3219CCB33ED49EDAD5F82F00FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Please add a one line test file "my_file.csv" so we can try to reproduce. Confirm first that it fails with your GDAL version.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Moises Calzado via gdal-dev
L?hetetty: maanantai 21. marraskuuta 2022 11.21
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hello everyone,

We've just updated to the latest GDAL version (v3.6.0) and it seems that something is not working correctly when trying to obtain a geom column from a CSV containing latitudes and longitudes.

This is the command that is being used:

ogr2ogr -f CSV -skipfailures -makevalid /vsistdout/ CSV:my_file.csv -simplify 0.00001 -dim XY -t_srs EPSG:4326 -lco GEOMETRY=AS_WKT -lco GEOMETRY_NAME=geom -lco CREATE_CSVT=YES -s_srs EPSG:4326 -oo KEEP_GEOM_COLUMNS=NO -oo X_POSSIBLE_NAMES=point_longitude,longitude,longitud,lon,Lon,Longitude,longitudedecimal,decimallongitude,decimallong,lng,long,Lng -oo Y_POSSIBLE_NAMES=latitude,latitud,lati,lat,Latitude,decimallat,decimallatitude,latitudedecimal,point_latitude -oo GEOM_POSSIBLE_NAMES=geom,Geom,geometry,the_geom,wkt,wkb,wkt_geometry,wkb_geometry -oo EMPTY_STRING_AS_NULL=YES -oo QUOTED_FIELDS_AS_STRING=NO -lco PRECISION=NO -oo AUTODETECT_SIZE_LIMIT=500000

The file that is being processed contains a column called lat and another one called lon, and when I execute the same process on a docker container running the version 3.5.1 of GDAL it works like a charm. We've also tried to execute this process on the 3.5.3 version, and it also fails. Is that expected?

Looking forward to your response,
Regards!

--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[https://storage.googleapis.com/carto-it-files/signature/default-signature.png]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cd1e743f3f6e1426d2b6608dacba1bb9d%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046192744569448%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=NTmsAq57hnuviEyreG4QGZ6m%2F0lKaUk3CeSBD7q47Uk%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/168eca51/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 21 03:06:31 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 21 Nov 2022 11:06:31 +0000
Subject: [gdal-dev] Latest GDAL version not transforming lat/lng into
 geom column
In-Reply-To: <CAObRW4TuJ3o9YgQA3v3HbDa-ZrCEfTACdMECNiAUc6OuS=s4-g@mail.gmail.com>
References: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>
 <AM0PR09MB3219CCB33ED49EDAD5F82F00FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAObRW4TuJ3o9YgQA3v3HbDa-ZrCEfTACdMECNiAUc6OuS=s4-g@mail.gmail.com>
Message-ID: <AM0PR09MB3219C8FFC58CF2845D1564C6FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I could reproduce with OSGeo4W version GDAL 3.6.0, released 2022/11/06.  I have also a bit older version GDAL 3.6.0dev from gisinternals.com, probably installed 2022-05-16, and that version finds the geometries. So if it is not because of differences in build systems then something has happened after mid of May 2022.

-Jukka Rahkonen-


L?hett?j?: Moises Calzado <mcalzado at carto.com>
L?hetetty: maanantai 21. marraskuuta 2022 11.50
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hi Jukka,

Thanks so much for taking a look at this.

This is the result when running the command in the 3.5.1 version:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
WKT,String,String,String,String,String
geom,CD_MES,store_id,date_id,ticket_id,hour_id
"POINT (-99 19)","202112","101",04/12/21,"1","11"
"POINT (-99 19)","202112","101",25/12/21,"31","15"

And this is what I obtained in the 3.6.0 version:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
WKT,String,String,String,String,String
geom,CD_MES,store_id,date_id,ticket_id,hour_id
,"202112","101",04/12/21,"1","11"
,"202112","101",25/12/21,"31","15"

That's the file that I've used for testing: https://storage.googleapis.com/import-testing-stream/my_file.csv<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstorage.googleapis.com%2Fimport-testing-stream%2Fmy_file.csv&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C441c954352a04df6ad6f08dacba5d857%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046210417564932%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=3O0YOllZheOXjVbEU9F5lvM6cRr8Xb9XUHouNVnr6FU%3D&reserved=0>



El lun, 21 nov 2022 a las 10:28, Rahkonen Jukka (<jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>) escribi?:
Hi,

Please add a one line test file "my_file.csv" so we can try to reproduce. Confirm first that it fails with your GDAL version.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Moises Calzado via gdal-dev
L?hetetty: maanantai 21. marraskuuta 2022 11.21
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hello everyone,

We've just updated to the latest GDAL version (v3.6.0) and it seems that something is not working correctly when trying to obtain a geom column from a CSV containing latitudes and longitudes.

This is the command that is being used:

ogr2ogr -f CSV -skipfailures -makevalid /vsistdout/ CSV:my_file.csv -simplify 0.00001 -dim XY -t_srs EPSG:4326 -lco GEOMETRY=AS_WKT -lco GEOMETRY_NAME=geom -lco CREATE_CSVT=YES -s_srs EPSG:4326 -oo KEEP_GEOM_COLUMNS=NO -oo X_POSSIBLE_NAMES=point_longitude,longitude,longitud,lon,Lon,Longitude,longitudedecimal,decimallongitude,decimallong,lng,long,Lng -oo Y_POSSIBLE_NAMES=latitude,latitud,lati,lat,Latitude,decimallat,decimallatitude,latitudedecimal,point_latitude -oo GEOM_POSSIBLE_NAMES=geom,Geom,geometry,the_geom,wkt,wkb,wkt_geometry,wkb_geometry -oo EMPTY_STRING_AS_NULL=YES -oo QUOTED_FIELDS_AS_STRING=NO -lco PRECISION=NO -oo AUTODETECT_SIZE_LIMIT=500000

The file that is being processed contains a column called lat and another one called lon, and when I execute the same process on a docker container running the version 3.5.1 of GDAL it works like a charm. We've also tried to execute this process on the 3.5.3 version, and it also fails. Is that expected?

Looking forward to your response,
Regards!

--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C441c954352a04df6ad6f08dacba5d857%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046210417721191%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Y163AGNFYXfmAucocdyZpIfkqZC2J1sihZ4IzmftVYo%3D&reserved=0>


--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C441c954352a04df6ad6f08dacba5d857%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046210417721191%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Y163AGNFYXfmAucocdyZpIfkqZC2J1sihZ4IzmftVYo%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/4da81630/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ~WRD0001.jpg
Type: image/jpeg
Size: 823 bytes
Desc: ~WRD0001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/4da81630/attachment-0001.jpg>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 21 03:16:05 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 21 Nov 2022 11:16:05 +0000
Subject: [gdal-dev] Latest GDAL version not transforming lat/lng into
 geom column
In-Reply-To: <AM0PR09MB3219C8FFC58CF2845D1564C6FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>
 <AM0PR09MB3219CCB33ED49EDAD5F82F00FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAObRW4TuJ3o9YgQA3v3HbDa-ZrCEfTACdMECNiAUc6OuS=s4-g@mail.gmail.com>
 <AM0PR09MB3219C8FFC58CF2845D1564C6FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <AM0PR09MB32194E0B1E11CCB2E258C593FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Did you ever notice that the result from GDAL 3.5.1 is wrong as well? You csv file has coordinates with a comma as a decimal separator and enclosed between double quotes
my_file.csv
=========
CD_MES,store_id,date_id,ticket_id,hour_id,lat,lon
202112,101,04/12/21,1,11,"19,38358","-99,183735"
202112,101,25/12/21,31,15,"19,38066","-99,183405"

The result that you considered right cuts the decimals
"POINT (-99 19)","202112","101",04/12/21,"1","11"
and I think that it is worse result that not getting coordinates at all.

Editing the csv file to present coordinates as numbers with point as a decimal separator gives correct result
my_file.csv
=========
CD_MES,store_id,date_id,ticket_id,hour_id,lat,lon
202112,101,04/12/21,1,11,19.38358,-99.183735
202112,101,25/12/21,31,15,19.38066,-99.183405
ogrinfo
======
"POINT (-99.183735 19.38358)","202112","101",04/12/21,"1","11"
"POINT (-99.183405 19.38066)","202112","101",25/12/21,"31","15"

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Rahkonen Jukka
L?hetetty: maanantai 21. marraskuuta 2022 13.07
Vastaanottaja: Moises Calzado <mcalzado at carto.com>
Kopio: 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hi,

I could reproduce with OSGeo4W version GDAL 3.6.0, released 2022/11/06.  I have also a bit older version GDAL 3.6.0dev from gisinternals.com, probably installed 2022-05-16, and that version finds the geometries. So if it is not because of differences in build systems then something has happened after mid of May 2022.

-Jukka Rahkonen-


L?hett?j?: Moises Calzado <mcalzado at carto.com<mailto:mcalzado at carto.com>>
L?hetetty: maanantai 21. marraskuuta 2022 11.50
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Aihe: Re: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hi Jukka,

Thanks so much for taking a look at this.

This is the result when running the command in the 3.5.1 version:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
WKT,String,String,String,String,String
geom,CD_MES,store_id,date_id,ticket_id,hour_id
"POINT (-99 19)","202112","101",04/12/21,"1","11"
"POINT (-99 19)","202112","101",25/12/21,"31","15"

And this is what I obtained in the 3.6.0 version:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
WKT,String,String,String,String,String
geom,CD_MES,store_id,date_id,ticket_id,hour_id
,"202112","101",04/12/21,"1","11"
,"202112","101",25/12/21,"31","15"

That's the file that I've used for testing: https://storage.googleapis.com/import-testing-stream/my_file.csv<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstorage.googleapis.com%2Fimport-testing-stream%2Fmy_file.csv&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7597a8d011e749c72a0a08dacbb0844e%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046256280278841%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=XU3u4Oy0HUhuyLS%2FBuDD6XSWoNzVqNYuv57zudr29yU%3D&reserved=0>



El lun, 21 nov 2022 a las 10:28, Rahkonen Jukka (<jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>) escribi?:
Hi,

Please add a one line test file "my_file.csv" so we can try to reproduce. Confirm first that it fails with your GDAL version.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Moises Calzado via gdal-dev
L?hetetty: maanantai 21. marraskuuta 2022 11.21
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hello everyone,

We've just updated to the latest GDAL version (v3.6.0) and it seems that something is not working correctly when trying to obtain a geom column from a CSV containing latitudes and longitudes.

This is the command that is being used:

ogr2ogr -f CSV -skipfailures -makevalid /vsistdout/ CSV:my_file.csv -simplify 0.00001 -dim XY -t_srs EPSG:4326 -lco GEOMETRY=AS_WKT -lco GEOMETRY_NAME=geom -lco CREATE_CSVT=YES -s_srs EPSG:4326 -oo KEEP_GEOM_COLUMNS=NO -oo X_POSSIBLE_NAMES=point_longitude,longitude,longitud,lon,Lon,Longitude,longitudedecimal,decimallongitude,decimallong,lng,long,Lng -oo Y_POSSIBLE_NAMES=latitude,latitud,lati,lat,Latitude,decimallat,decimallatitude,latitudedecimal,point_latitude -oo GEOM_POSSIBLE_NAMES=geom,Geom,geometry,the_geom,wkt,wkb,wkt_geometry,wkb_geometry -oo EMPTY_STRING_AS_NULL=YES -oo QUOTED_FIELDS_AS_STRING=NO -lco PRECISION=NO -oo AUTODETECT_SIZE_LIMIT=500000

The file that is being processed contains a column called lat and another one called lon, and when I execute the same process on a docker container running the version 3.5.1 of GDAL it works like a charm. We've also tried to execute this process on the 3.5.3 version, and it also fails. Is that expected?

Looking forward to your response,
Regards!

--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7597a8d011e749c72a0a08dacbb0844e%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046256280278841%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=1A8HxLvT6%2FV0p9wIm6AReJJebpOPu3t%2Br6WRm6mRhN8%3D&reserved=0>


--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7597a8d011e749c72a0a08dacbb0844e%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046256280278841%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=1A8HxLvT6%2FV0p9wIm6AReJJebpOPu3t%2Br6WRm6mRhN8%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/e569f225/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 823 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/e569f225/attachment-0001.jpg>

From even.rouault at spatialys.com  Mon Nov 21 03:40:37 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Nov 2022 12:40:37 +0100
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for C/C++
 unit tests
Message-ID: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>

Hi,

Motion:

Adopt RFC88: Use GoogleTest framework for C/C++ unit 
tests(https://github.com/OSGeo/gdal/pull/6720)

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From runette at gmail.com  Mon Nov 21 03:40:30 2022
From: runette at gmail.com (Paul Harwood)
Date: Mon, 21 Nov 2022 11:40:30 +0000
Subject: [gdal-dev] GDAL Seg Fault - for info
Message-ID: <CAE8nN5OPu4Wri2WyeLn92BcN5dkbJfo1-LG5RAX5QrdKmtwY_g@mail.gmail.com>

This may not be a GDAL bug and as such I have not raised it as an issue but
I wanted to put it here for anyone else who comes across the same problem.

There does appear to be some interference between, at least the conda
distribution of, GDAL and something else within Python causing a
segmentation fault.

----------------------------------------
SYMPTOMS

I have a Python application that uses GDAL (and PDAL Python and MDAL Python
and PyProj) wrapped in Kivy - so it is relatively complicated.

I was just clearing tech debt / updating etc. GDAL to 3.6 but also the
other apps to latest versions (including kivy).

BEFORE - if I tried to open an unrecognised file in GDAL I got an Exception
(using UseExceptions() ). This is related to Python Duck Typing

AFTER - I get a seg fault and no debug info.

This happened in exactly the same way on two machines - one Mac and one
Windows - so I don't  think it is a bad config. Attempts to create a
minimum example do not work - suggesting that it is a complicated
interaction between the various components

I am using conda as the environment manager.

------------------------------------------

ULTIMATE(-ish) SOLUTION

After getting some diagnostic data and some experimentation, it turned out
that the fault is coming in the error handling. I managed to avoid the
segmentation fault by creating and registering a dedicated error handler
for GDAL.

--------------------------------------------
DEEPER DISCUSSION

I found some discussion from a couple of years ago about a problem that
sounds similar (see https://github.com/conda-forge/gdal-feedstock/issues/365)
- it was not solved but was not very reproducible so was closed.

This suggests an interference between requests and gdal - depending on the
order in which they are imported. Certainly - kivy (or more precisely
kivyMD) is using requests but I was not able to solve the problem by
changing import orders (kivy has a lot of asynch and event based things
happening and the app is very modular so it is not that simple).

However - if the interference is in the error handler - then that would
explain why it was difficult to reproduce (need to hit the right exception
in the right way).

Not sure if we can fix this one - but if anyone else does come across a
similar problem I would suggest to try and create a custom error handler to
see if the problem is there.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/87e0af6c/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 21 03:43:12 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 21 Nov 2022 11:43:12 +0000
Subject: [gdal-dev] Latest GDAL version not transforming lat/lng into
 geom column
In-Reply-To: <CAObRW4TjcKTJSbfxLgmZ0i4KAdGYsCSnUaVGerRjGgVPrD6SiQ@mail.gmail.com>
References: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>
 <AM0PR09MB3219CCB33ED49EDAD5F82F00FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAObRW4TuJ3o9YgQA3v3HbDa-ZrCEfTACdMECNiAUc6OuS=s4-g@mail.gmail.com>
 <AM0PR09MB3219C8FFC58CF2845D1564C6FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <AM0PR09MB32194E0B1E11CCB2E258C593FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAObRW4TjcKTJSbfxLgmZ0i4KAdGYsCSnUaVGerRjGgVPrD6SiQ@mail.gmail.com>
Message-ID: <AM0PR09MB3219F3FD3085F2454B441EE3FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I found only an issue with having comma as a decimal separator. When I fixed that I got correct results both with GDAL 3.5.1 and with GDAL 3.6.0. Please tell if you have still some problem when the decimal separator is correct and present a new exact test case.

-Jukka Rahkonen-

L?hett?j?: Moises Calzado <mcalzado at carto.com>
L?hetetty: maanantai 21. marraskuuta 2022 13.27
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Yes, we noticed that!
I just shared a dataset with the wrong limiter. Sorry about that!

We've downgraded GDAL for the moment to the 3.5.1 version. Should I open an issue on GDAL repository, or is this one already being handled?
Thanks so much for your prompt help!


El lun, 21 nov 2022 a las 12:16, Rahkonen Jukka (<jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>) escribi?:
Hi,

Did you ever notice that the result from GDAL 3.5.1 is wrong as well? You csv file has coordinates with a comma as a decimal separator and enclosed between double quotes
my_file.csv
=========
CD_MES,store_id,date_id,ticket_id,hour_id,lat,lon
202112,101,04/12/21,1,11,"19,38358","-99,183735"
202112,101,25/12/21,31,15,"19,38066","-99,183405"

The result that you considered right cuts the decimals
"POINT (-99 19)","202112","101",04/12/21,"1","11"
and I think that it is worse result that not getting coordinates at all.

Editing the csv file to present coordinates as numbers with point as a decimal separator gives correct result
my_file.csv
=========
CD_MES,store_id,date_id,ticket_id,hour_id,lat,lon
202112,101,04/12/21,1,11,19.38358,-99.183735
202112,101,25/12/21,31,15,19.38066,-99.183405
ogrinfo
======
"POINT (-99.183735 19.38358)","202112","101",04/12/21,"1","11"
"POINT (-99.183405 19.38066)","202112","101",25/12/21,"31","15"

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Rahkonen Jukka
L?hetetty: maanantai 21. marraskuuta 2022 13.07
Vastaanottaja: Moises Calzado <mcalzado at carto.com<mailto:mcalzado at carto.com>>
Kopio: 'gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>' (gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>) <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Aihe: Re: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hi,

I could reproduce with OSGeo4W version GDAL 3.6.0, released 2022/11/06.  I have also a bit older version GDAL 3.6.0dev from gisinternals.com<https://eur06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fgisinternals.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cd1b3cdc76e5f4ac1c4d508dacbb36468%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046268606136045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=CdQC5ZIzPDzsMh1gVQLiIwTdFH1wy3ExoIa9dRPzhSg%3D&reserved=0>, probably installed 2022-05-16, and that version finds the geometries. So if it is not because of differences in build systems then something has happened after mid of May 2022.

-Jukka Rahkonen-


L?hett?j?: Moises Calzado <mcalzado at carto.com<mailto:mcalzado at carto.com>>
L?hetetty: maanantai 21. marraskuuta 2022 11.50
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Aihe: Re: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hi Jukka,

Thanks so much for taking a look at this.

This is the result when running the command in the 3.5.1 version:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
WKT,String,String,String,String,String
geom,CD_MES,store_id,date_id,ticket_id,hour_id
"POINT (-99 19)","202112","101",04/12/21,"1","11"
"POINT (-99 19)","202112","101",25/12/21,"31","15"

And this is what I obtained in the 3.6.0 version:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
WKT,String,String,String,String,String
geom,CD_MES,store_id,date_id,ticket_id,hour_id
,"202112","101",04/12/21,"1","11"
,"202112","101",25/12/21,"31","15"

That's the file that I've used for testing: https://storage.googleapis.com/import-testing-stream/my_file.csv<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstorage.googleapis.com%2Fimport-testing-stream%2Fmy_file.csv&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cd1b3cdc76e5f4ac1c4d508dacbb36468%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046268606136045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=sdpdqcmMRLkwBoHKdEk0Ap%2BU%2Bkv%2FsqkoB%2BpG3%2B9FeQc%3D&reserved=0>



El lun, 21 nov 2022 a las 10:28, Rahkonen Jukka (<jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>) escribi?:
Hi,

Please add a one line test file "my_file.csv" so we can try to reproduce. Confirm first that it fails with your GDAL version.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Moises Calzado via gdal-dev
L?hetetty: maanantai 21. marraskuuta 2022 11.21
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Latest GDAL version not transforming lat/lng into geom column

Hello everyone,

We've just updated to the latest GDAL version (v3.6.0) and it seems that something is not working correctly when trying to obtain a geom column from a CSV containing latitudes and longitudes.

This is the command that is being used:

ogr2ogr -f CSV -skipfailures -makevalid /vsistdout/ CSV:my_file.csv -simplify 0.00001 -dim XY -t_srs EPSG:4326 -lco GEOMETRY=AS_WKT -lco GEOMETRY_NAME=geom -lco CREATE_CSVT=YES -s_srs EPSG:4326 -oo KEEP_GEOM_COLUMNS=NO -oo X_POSSIBLE_NAMES=point_longitude,longitude,longitud,lon,Lon,Longitude,longitudedecimal,decimallongitude,decimallong,lng,long,Lng -oo Y_POSSIBLE_NAMES=latitude,latitud,lati,lat,Latitude,decimallat,decimallatitude,latitudedecimal,point_latitude -oo GEOM_POSSIBLE_NAMES=geom,Geom,geometry,the_geom,wkt,wkb,wkt_geometry,wkb_geometry -oo EMPTY_STRING_AS_NULL=YES -oo QUOTED_FIELDS_AS_STRING=NO -lco PRECISION=NO -oo AUTODETECT_SIZE_LIMIT=500000

The file that is being processed contains a column called lat and another one called lon, and when I execute the same process on a docker container running the version 3.5.1 of GDAL it works like a charm. We've also tried to execute this process on the 3.5.3 version, and it also fails. Is that expected?

Looking forward to your response,
Regards!

--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cd1b3cdc76e5f4ac1c4d508dacbb36468%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046268606136045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mX7wdfy1GwL%2FArdFu81HrxNBU6UclvyOnWmhbet84Jk%3D&reserved=0>


--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cd1b3cdc76e5f4ac1c4d508dacbb36468%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046268606136045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mX7wdfy1GwL%2FArdFu81HrxNBU6UclvyOnWmhbet84Jk%3D&reserved=0>


--
Moises Calzado

Support Engineer

(US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com<mailto:mcalzado at carto.com>
[L?hett?j? poisti kuvan.]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cd1b3cdc76e5f4ac1c4d508dacbb36468%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046268606136045%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mX7wdfy1GwL%2FArdFu81HrxNBU6UclvyOnWmhbet84Jk%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/d1039684/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 823 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/d1039684/attachment-0001.jpg>

From mateusz at loskot.net  Mon Nov 21 03:42:59 2022
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 21 Nov 2022 12:42:59 +0100
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
Message-ID: <CABUeae-xBYXq6vTdMgzUyziL-OTRNJhesY_tNettu2kTkpa=4g@mail.gmail.com>

+1   Mateusz

On Mon, 21 Nov 2022 at 12:40, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> Motion:
>
> Adopt RFC88: Use GoogleTest framework for C/C++ unit
> tests(https://github.com/OSGeo/gdal/pull/6720)
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Mon Nov 21 04:07:30 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Nov 2022 13:07:30 +0100
Subject: [gdal-dev] Latest GDAL version not transforming lat/lng into
 geom column
In-Reply-To: <AM0PR09MB32194E0B1E11CCB2E258C593FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAObRW4QMJVzHsWR2HmQbEw3yWqPwMM8sGOb+oJLxSMkp=MzVaw@mail.gmail.com>
 <AM0PR09MB3219CCB33ED49EDAD5F82F00FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAObRW4TuJ3o9YgQA3v3HbDa-ZrCEfTACdMECNiAUc6OuS=s4-g@mail.gmail.com>
 <AM0PR09MB3219C8FFC58CF2845D1564C6FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <AM0PR09MB32194E0B1E11CCB2E258C593FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <081b03ff-15df-1e83-7e5a-ca0087fa694f@spatialys.com>

Should be fixed per https://github.com/OSGeo/gdal/pull/6756

Le 21/11/2022 ? 12:16, Rahkonen Jukka a ?crit?:
>
> Hi,
>
> Did you ever notice that the result from GDAL 3.5.1 is wrong as well? 
> You csv file has coordinates with a comma as a decimal separator and 
> enclosed between double quotes
>
> my_file.csv
>
> =========
>
> CD_MES,store_id,date_id,ticket_id,hour_id,lat,lon
>
> 202112,101,04/12/21,1,11,"19,38358","-99,183735"
>
> 202112,101,25/12/21,31,15,"19,38066","-99,183405"
>
> The result that you considered right cuts the decimals
>
> "POINT (-99 19)","202112","101",04/12/21,"1","11"
> and I think that it is worse result that not getting coordinates at all.
>
> Editing the csv file to present coordinates as numbers with point as a 
> decimal separator gives correct result
>
> my_file.csv
>
> =========
>
> CD_MES,store_id,date_id,ticket_id,hour_id,lat,lon
>
> 202112,101,04/12/21,1,11,19.38358,-99.183735
>
> 202112,101,25/12/21,31,15,19.38066,-99.183405
> ogrinfo
>
> ======
> "POINT (-99.183735 19.38358)","202112","101",04/12/21,"1","11"
>
> "POINT (-99.183405 19.38066)","202112","101",25/12/21,"31","15"
>
> -Jukka Rahkonen-
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta 
> *Rahkonen Jukka
> *L?hetetty:* maanantai 21. marraskuuta 2022 13.07
> *Vastaanottaja:* Moises Calzado <mcalzado at carto.com>
> *Kopio:* 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) 
> <gdal-dev at lists.osgeo.org>
> *Aihe:* Re: [gdal-dev] Latest GDAL version not transforming lat/lng 
> into geom column
>
> Hi,
>
> I could reproduce with OSGeo4W version GDAL 3.6.0, released 
> 2022/11/06.? I have also a bit older version GDAL 3.6.0dev from 
> gisinternals.com, probably installed 2022-05-16, and that version 
> finds the geometries. So if it is not because of differences in build 
> systems then something has happened after mid of May 2022.
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*Moises Calzado <mcalzado at carto.com>
> *L?hetetty:* maanantai 21. marraskuuta 2022 11.50
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Aihe:* Re: [gdal-dev] Latest GDAL version not transforming lat/lng 
> into geom column
>
> Hi Jukka,
>
> Thanks so much for taking a look at this.
>
> This is the result when running the command in the 3.5.1 version:
>
>     GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>     84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
>     WKT,String,String,String,String,String
>     geom,CD_MES,store_id,date_id,ticket_id,hour_id
>     "POINT (-99 19)","202112","101",04/12/21,"1","11"
>     "POINT (-99 19)","202112","101",25/12/21,"31","15"
>
> And this is what I obtained in the 3.6.0 version:
>
>     GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>     84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]
>     WKT,String,String,String,String,String
>     geom,CD_MES,store_id,date_id,ticket_id,hour_id
>     ,"202112","101",04/12/21,"1","11"
>     ,"202112","101",25/12/21,"31","15"
>
> That's the file that I've used for testing: 
> https://storage.googleapis.com/import-testing-stream/my_file.csv 
> <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstorage.googleapis.com%2Fimport-testing-stream%2Fmy_file.csv&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7597a8d011e749c72a0a08dacbb0844e%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046256280278841%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=XU3u4Oy0HUhuyLS%2FBuDD6XSWoNzVqNYuv57zudr29yU%3D&reserved=0> 
>
>
> El lun, 21 nov 2022 a las 10:28, Rahkonen Jukka 
> (<jukka.rahkonen at maanmittauslaitos.fi>) escribi?:
>
>     Hi,
>
>     Please add a one line test file ?my_file.csv? so we can try to
>     reproduce. Confirm first that it fails with your GDAL version.
>
>     -Jukka Rahkonen-
>
>     *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta
>     *Moises Calzado via gdal-dev
>     *L?hetetty:* maanantai 21. marraskuuta 2022 11.21
>     *Vastaanottaja:* gdal-dev at lists.osgeo.org
>     *Aihe:* [gdal-dev] Latest GDAL version not transforming lat/lng
>     into geom column
>
>     Hello everyone,
>
>     We've just updated to the latest GDAL version (v3.6.0) and it
>     seems that something is not working correctly when trying to
>     obtain a geom column from a CSV containing latitudes and longitudes.
>
>     This is the command that is being used:
>
>         ogr2ogr -f CSV -skipfailures -makevalid /vsistdout/
>         CSV:my_file.csv -simplify 0.00001 -dim XY -t_srs EPSG:4326
>         -lco GEOMETRY=AS_WKT -lco GEOMETRY_NAME=geom -lco
>         CREATE_CSVT=YES -s_srs EPSG:4326 -oo KEEP_GEOM_COLUMNS=NO -oo
>         X_POSSIBLE_NAMES=point_longitude,longitude,longitud,lon,Lon,Longitude,longitudedecimal,decimallongitude,decimallong,lng,long,Lng
>         -oo
>         Y_POSSIBLE_NAMES=latitude,latitud,lati,lat,Latitude,decimallat,decimallatitude,latitudedecimal,point_latitude
>         -oo
>         GEOM_POSSIBLE_NAMES=geom,Geom,geometry,the_geom,wkt,wkb,wkt_geometry,wkb_geometry
>         -oo EMPTY_STRING_AS_NULL=YES -oo QUOTED_FIELDS_AS_STRING=NO
>         -lco PRECISION=NO -oo AUTODETECT_SIZE_LIMIT=500000
>
>     The file that is being processed contains a column called lat and
>     another one called lon, and when I execute the same process on a
>     docker container running the version 3.5.1 of GDAL it works like a
>     charm. We've also tried to execute this process on the 3.5.3
>     version, and it also fails. Is that expected?
>
>     Looking forward to your response,
>
>     Regards!
>
>     -- 
>
>     *Moises Calzado*
>
>     Support Engineer
>
>     (US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com
>
>     L?hett?j? poisti kuvan.
>     <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7597a8d011e749c72a0a08dacbb0844e%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046256280278841%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=1A8HxLvT6%2FV0p9wIm6AReJJebpOPu3t%2Br6WRm6mRhN8%3D&reserved=0>
>
>
> -- 
>
> *Moises Calzado*
>
> Support Engineer
>
> (US) +1 917 463 3232 | (ES) +34 911 165 823 | mcalzado at carto.com
>
> L?hett?j? poisti kuvan. 
> <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.carto.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C7597a8d011e749c72a0a08dacbb0844e%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046256280278841%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=1A8HxLvT6%2FV0p9wIm6AReJJebpOPu3t%2Br6WRm6mRhN8%3D&reserved=0>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/d7fdcaa3/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 823 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/d7fdcaa3/attachment-0001.jpg>

From even.rouault at spatialys.com  Mon Nov 21 04:37:25 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Nov 2022 13:37:25 +0100
Subject: [gdal-dev] GDAL Seg Fault - for info
In-Reply-To: <CAE8nN5OPu4Wri2WyeLn92BcN5dkbJfo1-LG5RAX5QrdKmtwY_g@mail.gmail.com>
References: <CAE8nN5OPu4Wri2WyeLn92BcN5dkbJfo1-LG5RAX5QrdKmtwY_g@mail.gmail.com>
Message-ID: <2ff04cc3-b8d9-d918-78c7-cd7fddc9071a@spatialys.com>

Paul,

Looking at 
https://stackoverflow.com/questions/63161532/python-segmentation-fault-when-using-zipfile-while-gdal-package-loaded

shows an interesting thing in a gdb backtrace

|#0 0x00007ffff7e3aa50 in free () from /usr/lib/libc.so.6 #1 
0x00007ffff485ae0f in inflateReset2 () from /usr/lib/libcfitsio.so.9 #2 
0x00007ffff39ec1a4 in inflateInit2_ () from /usr/lib/libz.so.1 |
||

One can see that libz inflateInit2_() ends up calling libcfitsio's 
inflateReset2(), but libcfitsio is not a dependency of libz ! That's the 
reverse. Which suggests that some builds of libcfitsio use an internal 
outdated copy of libz, without symbol renaming. Looking at conda-forge 
cfitsio recipe I see 
https://github.com/conda-forge/cfitsio-feedstock/blob/main/recipe/unvendor_zlib.patch 
(added per https://github.com/conda-forge/cfitsio-feedstock/pull/22) 
which changes cfitsio to use conda-forge zlib, to avoid such issue.

With latest conda-forge gdal, requests, openpyxl, I can't trigger 
crashes with the reproducers of the various mentioned tickets.

I'd suggest you run your code under gdb or Valgrind and look if there 
are not funny symbol calls like the above.

Also if use pip module, avoid using their binary wheels. For example to 
make sure that pyproj's embedded PROJ doesn't conflict with the PROJ 
used by GDAL, to avoid similar issues where you'd have 2 versions of the 
same lib in the same process.

Even

Le 21/11/2022 ? 12:40, Paul Harwood a ?crit?:
> This may not be a GDAL bug and as such I have not raised it as an 
> issue but I wanted to put it here for anyone else who comes across the 
> same problem.
>
> There does appear to be some interference between, at least the conda 
> distribution of, GDAL and something else within Python causing a 
> segmentation fault.
>
> ----------------------------------------
> SYMPTOMS
>
> I have a Python application that uses GDAL (and PDAL Python and MDAL 
> Python and PyProj) wrapped in Kivy - so it is relatively complicated.
>
> I was just clearing tech debt / updating etc. GDAL to 3.6 but also the 
> other apps to?latest?versions (including kivy).
>
> BEFORE - if I tried to open an unrecognised file in GDAL I got an 
> Exception (using UseExceptions() ). This is related to Python Duck Typing
>
> AFTER - I get a seg fault?and no debug info.
>
> This happened in exactly the same way on two machines - one Mac and 
> one Windows - so I don't? think it is a bad config. Attempts to create 
> a minimum example do not work - suggesting that it is a complicated 
> interaction between the various components
>
> I am using conda as the environment manager.
>
> ------------------------------------------
>
> ULTIMATE(-ish) SOLUTION
>
> After getting some diagnostic data and some experimentation, it turned 
> out that the fault is coming in the error handling. I managed to avoid 
> the segmentation fault by creating and registering a dedicated error 
> handler for GDAL.
>
> --------------------------------------------
> DEEPER DISCUSSION
>
> I found some discussion from a couple of years ago about a problem 
> that sounds similar (see 
> https://github.com/conda-forge/gdal-feedstock/issues/365) - it was not 
> solved but was not very reproducible?so was closed.
>
> This suggests an interference between requests and gdal - depending on 
> the order in which they are imported. Certainly - kivy (or more 
> precisely kivyMD) is using requests but I was not able to solve the 
> problem by changing import orders (kivy has a lot of asynch and event 
> based things happening and the app is very modular so it is not that 
> simple).
>
> However - if the interference is in the error handler - then that 
> would explain why it was difficult to reproduce (need to hit the right 
> exception in the right way).
>
> Not sure if we can fix this one - but if anyone else does come across 
> a similar problem I would suggest to try and create a custom error 
> handler to see if the problem is there.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/6ad490d5/attachment.htm>

From howard at hobu.co  Mon Nov 21 06:06:33 2022
From: howard at hobu.co (Howard Butler)
Date: Mon, 21 Nov 2022 08:06:33 -0600
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <CABUeae-xBYXq6vTdMgzUyziL-OTRNJhesY_tNettu2kTkpa=4g@mail.gmail.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
 <CABUeae-xBYXq6vTdMgzUyziL-OTRNJhesY_tNettu2kTkpa=4g@mail.gmail.com>
Message-ID: <E4A836F8-0B06-47AB-A3E3-4FDA799E2779@hobu.co>

+1 Howard

> On Nov 21, 2022, at 5:42 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
> +1   Mateusz
> 
> On Mon, 21 Nov 2022 at 12:40, Even Rouault <even.rouault at spatialys.com> wrote:
>> 
>> Hi,
>> 
>> Motion:
>> 
>> Adopt RFC88: Use GoogleTest framework for C/C++ unit
>> tests(https://github.com/OSGeo/gdal/pull/6720)
>> 
>> Starting with my +1,
>> 
>> Even
>> 
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 21 06:08:03 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 21 Nov 2022 14:08:03 +0000
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
Message-ID: <AM0PR09MB3219CB05D0FB376C30715970FD0A9@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault
L?hetetty: maanantai 21. marraskuuta 2022 13.41
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for C/C++ unit tests

Hi,

Motion:

Adopt RFC88: Use GoogleTest framework for C/C++ unit 
tests(https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fpull%2F6720&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cce5c25f1969c40117f0008dacbb541ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046276594867542%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=olRaXAqdPTcUtN%2B%2FQBx5cO%2B0NBTpMwt0N565Bof8dP0%3D&amp;reserved=0)

Starting with my +1,

Even

-- 
https://eur06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cce5c25f1969c40117f0008dacbb541ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046276594867542%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=2ZLySGjBX5MAh2rjTgINvCsBZ9dHk9hoH%2FH6pSMu78U%3D&amp;reserved=0
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&amp;data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7Cce5c25f1969c40117f0008dacbb541ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638046276594867542%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=cHY%2ByDPE%2Fh76A3srKWpn5LwbfWv7w1jLYSWjZVE7edY%3D&amp;reserved=0

From schwehr at gmail.com  Mon Nov 21 06:17:37 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 21 Nov 2022 06:17:37 -0800
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
Message-ID: <CACmBxys7vS3CCUiudafxFxwZP0qJO4Jq4fGkFnLJDpbmsKiJ6g@mail.gmail.com>

+1 KurtS

On Mon, Nov 21, 2022, 5:43 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Motion:
>
> Adopt RFC88: Use GoogleTest framework for C/C++ unit
> tests(https://github.com/OSGeo/gdal/pull/6720)
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/b340d855/attachment-0001.htm>

From Stefan.Blumentrath at gmx.de  Mon Nov 21 06:26:17 2022
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Mon, 21 Nov 2022 15:26:17 +0100
Subject: [gdal-dev] MSSQL ODBC and password security
Message-ID: <trinity-91e8a9f0-01f1-46d7-bb36-c44cf61d05d4-1669040777868@3c-app-gmx-bap29>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/d51c37c4/attachment.htm>

From warmerdam at pobox.com  Mon Nov 21 06:58:04 2022
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 21 Nov 2022 09:58:04 -0500
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <CACmBxys7vS3CCUiudafxFxwZP0qJO4Jq4fGkFnLJDpbmsKiJ6g@mail.gmail.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
 <CACmBxys7vS3CCUiudafxFxwZP0qJO4Jq4fGkFnLJDpbmsKiJ6g@mail.gmail.com>
Message-ID: <CA+YzLBeqD9vHV-umCxRvjqzf9CTK7sbczE+ewmqsJaz4oSn1Kw@mail.gmail.com>

+1 FrankW

On Mon, Nov 21, 2022 at 9:17 AM Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 KurtS
>
> On Mon, Nov 21, 2022, 5:43 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> Motion:
>>
>> Adopt RFC88: Use GoogleTest framework for C/C++ unit
>> tests(https://github.com/OSGeo/gdal/pull/6720)
>>
>> Starting with my +1,
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221121/ac8aa872/attachment.htm>

From dmorissette at mapgears.com  Mon Nov 21 07:41:46 2022
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 21 Nov 2022 10:41:46 -0500
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
Message-ID: <973ef8c9-92bb-21ed-5066-b2407ff25d11@mapgears.com>

+1

Daniel

On 2022-11-21 06:40, Even Rouault wrote:
> Hi,
> 
> Motion:
> 
> Adopt RFC88: Use GoogleTest framework for C/C++ unit 
> tests(https://github.com/OSGeo/gdal/pull/6720)
> 
> Starting with my +1,
> 
> Even
> 

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From even.rouault at spatialys.com  Mon Nov 21 15:05:49 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Nov 2022 00:05:49 +0100
Subject: [gdal-dev] GDAL Seg Fault - for info
In-Reply-To: <2ff04cc3-b8d9-d918-78c7-cd7fddc9071a@spatialys.com>
References: <CAE8nN5OPu4Wri2WyeLn92BcN5dkbJfo1-LG5RAX5QrdKmtwY_g@mail.gmail.com>
 <2ff04cc3-b8d9-d918-78c7-cd7fddc9071a@spatialys.com>
Message-ID: <45916289-d2e4-0834-7414-51dca6c49877@spatialys.com>

I've come up with a quicky&dirty script 
https://github.com/rouault/symbol_clash_detector/blob/master/symbol_clash_detector.py 
that works only for Linux and attempts to find C symbol clashes in the 
.so files loaded in a process (C++ is trickier because due to template & 
inline code, functions from the standard library are duplicated in C++ 
libraries)

When run on Conda gdal-3.6.0, it outputs:

$ PYTHONPATH=/home/even/symbol_clash_detector python -c "from osgeo 
import gdal; import symbol_clash_detector"
WARNING: libVersionPoint present in 
/home/even/miniconda3/envs/test/lib/libplc4.so is also present in 
/home/even/miniconda3/envs/test/lib/libnspr4.so
WARNING: locale_charset present in 
/home/even/miniconda3/envs/test/lib/libiconv.so.2.6.1 is also present in 
/home/even/miniconda3/envs/test/lib/libcharset.so.1.0.0
WARNING: libVersionPoint present in 
/home/even/miniconda3/envs/test/lib/libplds4.so is also present in 
/home/even/miniconda3/envs/test/lib/libnspr4.so

I'm not knowledgeable enough to assess if those 3 instances are 
problematic (symbols with same name and content are OK), hopefully not, 
as there are more or less system libraries.

When run on my dev GDAL build with drivers using proprietary SDKs, it 
does find real symbol clashes that I was aware of, due to those SDKs 
embedding symbol libraries (like libxml2 in FileGDB SDK, lcms in ECW 
SDK, ...)

Le 21/11/2022 ? 13:37, Even Rouault a ?crit?:
>
> Paul,
>
> Looking at 
> https://stackoverflow.com/questions/63161532/python-segmentation-fault-when-using-zipfile-while-gdal-package-loaded
>
> shows an interesting thing in a gdb backtrace
>
> |#0 0x00007ffff7e3aa50 in free () from /usr/lib/libc.so.6 #1 
> 0x00007ffff485ae0f in inflateReset2 () from /usr/lib/libcfitsio.so.9 
> #2 0x00007ffff39ec1a4 in inflateInit2_ () from /usr/lib/libz.so.1 |
> ||
>
> One can see that libz inflateInit2_() ends up calling libcfitsio's 
> inflateReset2(), but libcfitsio is not a dependency of libz ! That's 
> the reverse. Which suggests that some builds of libcfitsio use an 
> internal outdated copy of libz, without symbol renaming. Looking at 
> conda-forge cfitsio recipe I see 
> https://github.com/conda-forge/cfitsio-feedstock/blob/main/recipe/unvendor_zlib.patch 
> (added per https://github.com/conda-forge/cfitsio-feedstock/pull/22) 
> which changes cfitsio to use conda-forge zlib, to avoid such issue.
>
> With latest conda-forge gdal, requests, openpyxl, I can't trigger 
> crashes with the reproducers of the various mentioned tickets.
>
> I'd suggest you run your code under gdb or Valgrind and look if there 
> are not funny symbol calls like the above.
>
> Also if use pip module, avoid using their binary wheels. For example 
> to make sure that pyproj's embedded PROJ doesn't conflict with the 
> PROJ used by GDAL, to avoid similar issues where you'd have 2 versions 
> of the same lib in the same process.
>
> Even
>
> Le 21/11/2022 ? 12:40, Paul Harwood a ?crit?:
>> This may not be a GDAL bug and as such I have not raised it as an 
>> issue but I wanted to put it here for anyone else who comes across 
>> the same problem.
>>
>> There does appear to be some interference between, at least the conda 
>> distribution of, GDAL and something else within Python causing a 
>> segmentation fault.
>>
>> ----------------------------------------
>> SYMPTOMS
>>
>> I have a Python application that uses GDAL (and PDAL Python and MDAL 
>> Python and PyProj) wrapped in Kivy - so it is relatively complicated.
>>
>> I was just clearing tech debt / updating etc. GDAL to 3.6 but also 
>> the other apps to?latest?versions (including kivy).
>>
>> BEFORE - if I tried to open an unrecognised file in GDAL I got an 
>> Exception (using UseExceptions() ). This is related to Python Duck Typing
>>
>> AFTER - I get a seg fault?and no debug info.
>>
>> This happened in exactly the same way on two machines - one Mac and 
>> one Windows - so I don't? think it is a bad config. Attempts to 
>> create a minimum example do not work - suggesting that it is a 
>> complicated interaction between the various components
>>
>> I am using conda as the environment manager.
>>
>> ------------------------------------------
>>
>> ULTIMATE(-ish) SOLUTION
>>
>> After getting some diagnostic data and some experimentation, it 
>> turned out that the fault is coming in the error handling. I managed 
>> to avoid the segmentation fault by creating and registering a 
>> dedicated error handler for GDAL.
>>
>> --------------------------------------------
>> DEEPER DISCUSSION
>>
>> I found some discussion from a couple of years ago about a problem 
>> that sounds similar (see 
>> https://github.com/conda-forge/gdal-feedstock/issues/365) - it was 
>> not solved but was not very reproducible?so was closed.
>>
>> This suggests an interference between requests and gdal - depending 
>> on the order in which they are imported. Certainly - kivy (or more 
>> precisely kivyMD) is using requests but I was not able to solve the 
>> problem by changing import orders (kivy has a lot of asynch and event 
>> based things happening and the app is very modular so it is not that 
>> simple).
>>
>> However - if the interference is in the error handler - then that 
>> would explain why it was difficult to reproduce (need to hit the 
>> right exception in the right way).
>>
>> Not sure if we can fix this one - but if anyone else does come across 
>> a similar problem I would suggest to try and create a custom error 
>> handler to see if the problem is there.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221122/df78cb7e/attachment.htm>

From stefano.iacovella at gmail.com  Wed Nov 23 00:57:53 2022
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Wed, 23 Nov 2022 09:57:53 +0100
Subject: [gdal-dev] Working with IFC files
In-Reply-To: <1727853a3aef5336daa33a5dd118ea3928e39084.camel@enoreth.net>
References: <CAG9OqYoOFXX3=3HtK2kEcGzX2pjSqQmjNi+_dGRAeb1xcjje=g@mail.gmail.com>
 <ad704c947b28fe70140bb60fd4d14086bf55c6bd.camel@enoreth.net>
 <1727853a3aef5336daa33a5dd118ea3928e39084.camel@enoreth.net>
Message-ID: <CAG9OqYo9ruJxw+VKgjSWBzFo5o+iEj=tOHBA2EFHObeuPJMHoA@mail.gmail.com>

Thank you Jean-Roc for your information.
I am afraid I will have to stick to proprietary ESRI procedures to ingest
IFC files.

All the best

Stefano

Il giorno ven 18 nov 2022 alle ore 18:14 Jean-Roc Morreale (ml) <
jrmorreale_ml at enoreth.net> ha scritto:

> In this study, after talking with Even, the full support of IFC was
> deemed to exceed the functionalities of GDAL but the transformation of
> a limited subset to the Simple Feature model could be supported (such
> as the outer hull of a building, the shape of the floor, etc.).
>
> We did not pursue this track as we wanted a full support in QGIS (which
> isn't straightforward either).
>
> Le mercredi 16 novembre 2022 ? 11:22 +0100, Jean-Roc Morreale (ml) a
> ?crit :
> > Hi, we sponsored a feasability study for ifc support in qgis/gdal in
> > 2021, it is in in french but I'll try to sum it up asap
> >
> > Le mercredi 16 novembre 2022 ? 10:00 +0100, Stefano Iacovella a
> > ?crit :
> > > Hi all,
> > >
> > > I am working with BIM data to integrate them in a geodatabase.
> > > Data are delivered in IFC format (1)
> > > I am curious about the possibility to ingest them using OGR.
> > > As far as I know there's no driver available.
> > > Is there someone in the list who has had some experience in a
> > > similar
> > > scenario?
> > >
> > > Thank you
> > >
> > > Stefano
> > >
> > >
> > >
> > >
> > >
> > > 1) https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221123/1c85c8cf/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 23 04:54:07 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Nov 2022 13:54:07 +0100
Subject: [gdal-dev] Motion: adopt RFC88: Use GoogleTest framework for
 C/C++ unit tests
In-Reply-To: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
References: <039204fc-0d98-3be5-4761-5203c2a07251@spatialys.com>
Message-ID: <2efab880-e76b-4a64-cd25-4535bef69752@spatialys.com>

Hi,

I declare this motion passed with +1 from PSC members MateuszL, HowardB, 
JukkaR, KurtS , FrankW, DanielM and me.

Even

Le 21/11/2022 ? 12:40, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> Adopt RFC88: Use GoogleTest framework for C/C++ unit 
> tests(https://github.com/OSGeo/gdal/pull/6720)
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From elpaso at itopen.it  Thu Nov 24 00:39:48 2022
From: elpaso at itopen.it (ElPaso)
Date: Thu, 24 Nov 2022 09:39:48 +0100
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
Message-ID: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>

Hi,

Motion:

Adopt RFC88: RFC69 C/C++ Code Formatting [1]

I have updated the RFC [1] to use pre-commit and I have created a draft 
implementation of the pre-commit hook and the CI integration with a GH 
workflow [2].

If adopted, we still have to agree on which coding style to apply (for 
now I used a clang-format file I've found under gdal/scripts), but the 
biggest decision is wether proceed with an initial "Big Reformat" or an 
incremental one, my draft implementation supports both.


Kind regards.


[1] 
https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
[2] https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival

-- 
Alessandro Pasotti
w3: www.itopen.it

From johannespaul92 at gmail.com  Thu Nov 24 01:32:56 2022
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Thu, 24 Nov 2022 10:32:56 +0100
Subject: [gdal-dev] Compilation error with JP2KAK driver
Message-ID: <CACcmK9bS2GEq8SWQ_aZ3oOp1R3hAqM8bnSOLqOji9vn+1yt8cw@mail.gmail.com>

Hello,
I'm having trouble compiling GDAL 3.6.0 on Centos7 with JP2KAK driver using
Kakadu 8.2.
I'm following the below instructions to compile KDU
https://trac.osgeo.org/gdal/wiki/JP2KAK
And I'm using the following cmake options to compile GDAL
-DGDAL_USE_KDU=ON -DKDU_INCLUDE_DIR="${INSTALLDIR}"
-DKDU_LIBRARY="${INSTALLDIR}"/lib/libkdu_v82R.so
-DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu.a
-DGDAL_ENABLE_DRIVER_JP2KAK:BOOL=ON
Everything goes fine until Linking CXX shared library libgdal.so
where I get multiple errors type jp2kakdataset.cpp:(.text+0x396): undefined
reference to `kdu_supp...

I've noticed the issue has a
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/ead7d1de/attachment.htm>

From johannespaul92 at gmail.com  Thu Nov 24 01:35:12 2022
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Thu, 24 Nov 2022 10:35:12 +0100
Subject: [gdal-dev] Compilation error with JP2KAK driver
Message-ID: <CACcmK9ZRZMhH5z_F5gBRQHL1y9xyjPt8BmA-z92uPVh2x=V_RQ@mail.gmail.com>

Hello,

I'm having trouble compiling GDAL 3.6.0 on Centos7 with JP2KAK driver using
Kakadu 8.2.

I'm following the below instructions to compile KDU
https://trac.osgeo.org/gdal/wiki/JP2KAK
And I'm using the following cmake options to compile GDAL
-DGDAL_USE_KDU=ON -DKDU_INCLUDE_DIR="${INSTALLDIR}"
-DKDU_LIBRARY="${INSTALLDIR}"/lib/libkdu_v82R.so
-DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu.a
-DGDAL_ENABLE_DRIVER_JP2KAK:BOOL=ON

Everything goes fine until Linking CXX shared library libgdal.so
where I get multiple errors type jp2kakdataset.cpp:(.text+0x396): undefined
reference to `kdu_supp...

I've noticed the issue has already been addressed, unfortunately it does
not solve my problem ...
https://github.com/OSGeo/gdal/issues/4306

Thanks for your help
Johannes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/99e381ca/attachment.htm>

From andrew at aitchison.me.uk  Thu Nov 24 01:55:41 2022
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 24 Nov 2022 09:55:41 +0000 (GMT)
Subject: [gdal-dev] SortIncludes was Re: Motion: adopt RFC69 C/C++ Code
 Formatting
In-Reply-To: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
Message-ID: <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>

On Thu, 24 Nov 2022, ElPaso wrote:

> Hi,
>
> Motion:
>
> Adopt RFC88: RFC69 C/C++ Code Formatting [1]
>
> I have updated the RFC [1] to use pre-commit and I have created a draft 
> implementation of the pre-commit hook and the CI integration with a GH 
> workflow [2].
>
> If adopted, we still have to agree on which coding style to apply (for now I 
> used a clang-format file I've found under gdal/scripts), but the biggest 
> decision is wether proceed with an initial "Big Reformat" or an incremental 
> one, my draft implementation supports both.
>
> Kind regards.
>
> [1] 
> https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
> [2] https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival

I have just tried this on my driver code and am concerned that the
default sets --sort-includes.

man md5 suggests
 	#include <sys/types.h>
 	#include <md5.h>

but on Ubuntu 22.10/kinetic

>clang-format-11 --version
Ubuntu clang-format version 11.1.0-6build1
>cat include_md5.cpp
#include <sys/types.h>
#include <md5.h>
>clang-format-11 include_md5.cpp
#include <md5.h>
#include <sys/types.h>
>
>clang-format-11 --sort-includes=FALSE include_md5.cpp

#include <sys/types.h>
#include <md5.h>
>

So without tweaking, clang-format is potentially breaking my code.
I fear that we need a project .clang-formats file with atleast
SortIncludes:    false

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From elpaso at itopen.it  Thu Nov 24 02:21:16 2022
From: elpaso at itopen.it (ElPaso)
Date: Thu, 24 Nov 2022 11:21:16 +0100
Subject: [gdal-dev] SortIncludes was Re: Motion: adopt RFC69 C/C++ Code
 Formatting
In-Reply-To: <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>
Message-ID: <f943fdef-c159-a50b-5b32-d9b3c3c8f765@itopen.it>

Il 24/11/22 10:55, Andrew C Aitchison ha scritto:
> On Thu, 24 Nov 2022, ElPaso wrote:
>
>> Hi,
>>
>> Motion:
>>
>> Adopt RFC88: RFC69 C/C++ Code Formatting [1]
>>
>> I have updated the RFC [1] to use pre-commit and I have created a 
>> draft implementation of the pre-commit hook and the CI integration 
>> with a GH workflow [2].
>>
>> If adopted, we still have to agree on which coding style to apply 
>> (for now I used a clang-format file I've found under gdal/scripts), 
>> but the biggest decision is wether proceed with an initial "Big 
>> Reformat" or an incremental one, my draft implementation supports both.
>>
>> Kind regards.
>>
>> [1] 
>> https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
>> [2] 
>> https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival
>
> I have just tried this on my driver code and am concerned that the
> default sets --sort-includes.

[...]


> So without tweaking, clang-format is potentially breaking my code.
> I fear that we need a project .clang-formats file with atleast
> SortIncludes:??? false
>

Good point, added: 
https://github.com/elpaso/gdal/commit/c54d54d209ce28c2017b3ebb0bcc1d23c5472693


-- 
Alessandro Pasotti
w3: www.itopen.it


From j1 at jimenezshaw.com  Thu Nov 24 03:24:49 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 24 Nov 2022 12:24:49 +0100
Subject: [gdal-dev] SortIncludes was Re: Motion: adopt RFC69 C/C++ Code
 Formatting
In-Reply-To: <f943fdef-c159-a50b-5b32-d9b3c3c8f765@itopen.it>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>
 <f943fdef-c159-a50b-5b32-d9b3c3c8f765@itopen.it>
Message-ID: <CADRrdKur5U_t_Aosyu8eegBYWazA7S5qb-4enVJ=S+vw+wC2Sg@mail.gmail.com>

In my opinion if the order of the includes affects the output there is
something wrong in the code. I hope md5 is not recommending the order.

I find the ordering feature very useful as a way to detect those errors
(not definitive because it is not testing every combination, but a fixed
criterion is good).

In case you insist on keeping the order defined by the user (more for
aesthetic reasons usually) you can just add a newline to separate the
includes in blocks. Clang-format keeps the contiguous blocks independent.

On Thu, 24 Nov 2022, 11:21 ElPaso, <elpaso at itopen.it> wrote:

> Il 24/11/22 10:55, Andrew C Aitchison ha scritto:
> > On Thu, 24 Nov 2022, ElPaso wrote:
> >
> >> Hi,
> >>
> >> Motion:
> >>
> >> Adopt RFC88: RFC69 C/C++ Code Formatting [1]
> >>
> >> I have updated the RFC [1] to use pre-commit and I have created a
> >> draft implementation of the pre-commit hook and the CI integration
> >> with a GH workflow [2].
> >>
> >> If adopted, we still have to agree on which coding style to apply
> >> (for now I used a clang-format file I've found under gdal/scripts),
> >> but the biggest decision is wether proceed with an initial "Big
> >> Reformat" or an incremental one, my draft implementation supports both.
> >>
> >> Kind regards.
> >>
> >> [1]
> >>
> https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
> >> [2]
> >> https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival
> >
> > I have just tried this on my driver code and am concerned that the
> > default sets --sort-includes.
>
> [...]
>
>
> > So without tweaking, clang-format is potentially breaking my code.
> > I fear that we need a project .clang-formats file with atleast
> > SortIncludes:    false
> >
>
> Good point, added:
>
> https://github.com/elpaso/gdal/commit/c54d54d209ce28c2017b3ebb0bcc1d23c5472693
>
>
> --
> Alessandro Pasotti
> w3: www.itopen.it
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/0f762603/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Nov 24 05:11:56 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Nov 2022 14:11:56 +0100
Subject: [gdal-dev] SortIncludes was Re: Motion: adopt RFC69 C/C++ Code
 Formatting
In-Reply-To: <CADRrdKur5U_t_Aosyu8eegBYWazA7S5qb-4enVJ=S+vw+wC2Sg@mail.gmail.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>
 <f943fdef-c159-a50b-5b32-d9b3c3c8f765@itopen.it>
 <CADRrdKur5U_t_Aosyu8eegBYWazA7S5qb-4enVJ=S+vw+wC2Sg@mail.gmail.com>
Message-ID: <a1bb32fb-5708-f5c5-7037-b0d54e18e8d0@spatialys.com>

I'm pretty sure that in the past I've fought against issues related to 
include orders, at least on some platforms, and some things were beyond 
our control (system headers or dependency headers), so I think it is 
best to exclude it for now as Alessandro just did for something that is 
intended to be stylistic only and should have zero influence on the 
resulting binary code.

Le 24/11/2022 ? 12:24, Javier Jimenez Shaw a ?crit?:
> In my opinion if the order of the includes affects the output there is 
> something wrong in the code. I hope md5 is not recommending the order.
>
> I find the ordering feature very useful as a way to detect those 
> errors (not definitive because it is not testing every combination, 
> but a fixed criterion is good).
>
> In case you insist on keeping the order defined by the user (more for 
> aesthetic reasons usually) you can just add a newline to separate the 
> includes in blocks. Clang-format keeps the contiguous blocks independent.
>
> On Thu, 24 Nov 2022, 11:21 ElPaso, <elpaso at itopen.it> wrote:
>
>     Il 24/11/22 10:55, Andrew C Aitchison ha scritto:
>     > On Thu, 24 Nov 2022, ElPaso wrote:
>     >
>     >> Hi,
>     >>
>     >> Motion:
>     >>
>     >> Adopt RFC88: RFC69 C/C++ Code Formatting [1]
>     >>
>     >> I have updated the RFC [1] to use pre-commit and I have created a
>     >> draft implementation of the pre-commit hook and the CI integration
>     >> with a GH workflow [2].
>     >>
>     >> If adopted, we still have to agree on which coding style to apply
>     >> (for now I used a clang-format file I've found under
>     gdal/scripts),
>     >> but the biggest decision is wether proceed with an initial "Big
>     >> Reformat" or an incremental one, my draft implementation
>     supports both.
>     >>
>     >> Kind regards.
>     >>
>     >> [1]
>     >>
>     https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
>     >> [2]
>     >>
>     https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival
>     >
>     > I have just tried this on my driver code and am concerned that the
>     > default sets --sort-includes.
>
>     [...]
>
>
>     > So without tweaking, clang-format is potentially breaking my code.
>     > I fear that we need a project .clang-formats file with atleast
>     > SortIncludes:??? false
>     >
>
>     Good point, added:
>     https://github.com/elpaso/gdal/commit/c54d54d209ce28c2017b3ebb0bcc1d23c5472693
>
>
>     -- 
>     Alessandro Pasotti
>     w3: www.itopen.it <http://www.itopen.it>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/b15ad674/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 24 05:14:27 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Nov 2022 14:14:27 +0100
Subject: [gdal-dev] Compilation error with JP2KAK driver
In-Reply-To: <CACcmK9ZRZMhH5z_F5gBRQHL1y9xyjPt8BmA-z92uPVh2x=V_RQ@mail.gmail.com>
References: <CACcmK9ZRZMhH5z_F5gBRQHL1y9xyjPt8BmA-z92uPVh2x=V_RQ@mail.gmail.com>
Message-ID: <937590a8-0412-c5bb-2403-8d787ff7874d@spatialys.com>

The value of KDU_AUX_LIBRARY is wrong. See 
https://gdal.org/development/building_from_source.html#cmdoption-arg-KDU_AUX_LIBRARY

It should be -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu_a82R.so"

Even

Le 24/11/2022 ? 10:35, Johannes Paul a ?crit?:
> Hello,
>
> I'm having trouble compiling GDAL 3.6.0 on Centos7 with JP2KAK driver 
> using Kakadu 8.2.
>
> I'm following the below instructions to compile KDU
> https://trac.osgeo.org/gdal/wiki/JP2KAK
> And I'm using the following cmake options to compile GDAL
> -DGDAL_USE_KDU=ON -DKDU_INCLUDE_DIR="${INSTALLDIR}" 
> -DKDU_LIBRARY="${INSTALLDIR}"/lib/libkdu_v82R.so 
> -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu.a?-DGDAL_ENABLE_DRIVER_JP2KAK:BOOL=ON
>
> Everything goes fine until Linking CXX shared library libgdal.so
> where I get multiple errors type jp2kakdataset.cpp:(.text+0x396): 
> undefined reference to `kdu_supp...
>
> I've noticed the issue has already been addressed, unfortunately it 
> does not solve my problem ...
> https://github.com/OSGeo/gdal/issues/4306
>
> Thanks for your help
> Johannes
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From johannespaul92 at gmail.com  Thu Nov 24 05:37:07 2022
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Thu, 24 Nov 2022 14:37:07 +0100
Subject: [gdal-dev] Compilation error with JP2KAK driver
In-Reply-To: <937590a8-0412-c5bb-2403-8d787ff7874d@spatialys.com>
References: <CACcmK9ZRZMhH5z_F5gBRQHL1y9xyjPt8BmA-z92uPVh2x=V_RQ@mail.gmail.com>
 <937590a8-0412-c5bb-2403-8d787ff7874d@spatialys.com>
Message-ID: <CACcmK9Yzrz3_sG5YM7WVVSbHa=+X7SF1T3CmoJBzvuCKunMPmA@mail.gmail.com>

Hello Even,
Thanks for your reply, i did notice that, however libkdu_a82R.so is not
generated at kakadu compilation.
I only get libkdu_v82R.so and libkdu.a
Rgds,
Johannes

Le jeu. 24 nov. 2022 ? 14:14, Even Rouault <even.rouault at spatialys.com> a
?crit :

> The value of KDU_AUX_LIBRARY is wrong. See
>
> https://gdal.org/development/building_from_source.html#cmdoption-arg-KDU_AUX_LIBRARY
>
> It should be -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu_a82R.so"
>
> Even
>
> Le 24/11/2022 ? 10:35, Johannes Paul a ?crit :
> > Hello,
> >
> > I'm having trouble compiling GDAL 3.6.0 on Centos7 with JP2KAK driver
> > using Kakadu 8.2.
> >
> > I'm following the below instructions to compile KDU
> > https://trac.osgeo.org/gdal/wiki/JP2KAK
> > And I'm using the following cmake options to compile GDAL
> > -DGDAL_USE_KDU=ON -DKDU_INCLUDE_DIR="${INSTALLDIR}"
> > -DKDU_LIBRARY="${INSTALLDIR}"/lib/libkdu_v82R.so
> >
> -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu.a -DGDAL_ENABLE_DRIVER_JP2KAK:BOOL=ON
> >
> > Everything goes fine until Linking CXX shared library libgdal.so
> > where I get multiple errors type jp2kakdataset.cpp:(.text+0x396):
> > undefined reference to `kdu_supp...
> >
> > I've noticed the issue has already been addressed, unfortunately it
> > does not solve my problem ...
> > https://github.com/OSGeo/gdal/issues/4306
> >
> > Thanks for your help
> > Johannes
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/3e792bd1/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 24 05:42:28 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Nov 2022 14:42:28 +0100
Subject: [gdal-dev] Compilation error with JP2KAK driver
In-Reply-To: <CACcmK9Yzrz3_sG5YM7WVVSbHa=+X7SF1T3CmoJBzvuCKunMPmA@mail.gmail.com>
References: <CACcmK9ZRZMhH5z_F5gBRQHL1y9xyjPt8BmA-z92uPVh2x=V_RQ@mail.gmail.com>
 <937590a8-0412-c5bb-2403-8d787ff7874d@spatialys.com>
 <CACcmK9Yzrz3_sG5YM7WVVSbHa=+X7SF1T3CmoJBzvuCKunMPmA@mail.gmail.com>
Message-ID: <59bc21d9-7168-15ca-8903-12b6184c7bc4@spatialys.com>

Refer to Kakadu docs & support for that. There's definitely a way of 
generating it, but Kakadu build system is .... ahem ... "particular"

Le 24/11/2022 ? 14:37, Johannes Paul a ?crit?:
> Hello Even,
> Thanks for your reply, i did notice that, however libkdu_a82R.so is 
> not generated at kakadu compilation.
> I only get libkdu_v82R.so and libkdu.a
> Rgds,
> Johannes
>
> Le jeu. 24 nov. 2022 ? 14:14, Even Rouault 
> <even.rouault at spatialys.com> a ?crit?:
>
>     The value of KDU_AUX_LIBRARY is wrong. See
>     https://gdal.org/development/building_from_source.html#cmdoption-arg-KDU_AUX_LIBRARY
>
>     It should be -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu_a82R.so"
>
>     Even
>
>     Le 24/11/2022 ? 10:35, Johannes Paul a ?crit?:
>     > Hello,
>     >
>     > I'm having trouble compiling GDAL 3.6.0 on Centos7 with JP2KAK
>     driver
>     > using Kakadu 8.2.
>     >
>     > I'm following the below instructions to compile KDU
>     > https://trac.osgeo.org/gdal/wiki/JP2KAK
>     > And I'm using the following cmake options to compile GDAL
>     > -DGDAL_USE_KDU=ON -DKDU_INCLUDE_DIR="${INSTALLDIR}"
>     > -DKDU_LIBRARY="${INSTALLDIR}"/lib/libkdu_v82R.so
>     >
>     -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu.a?-DGDAL_ENABLE_DRIVER_JP2KAK:BOOL=ON
>     >
>     > Everything goes fine until Linking CXX shared library libgdal.so
>     > where I get multiple errors type jp2kakdataset.cpp:(.text+0x396):
>     > undefined reference to `kdu_supp...
>     >
>     > I've noticed the issue has already been addressed, unfortunately it
>     > does not solve my problem ...
>     > https://github.com/OSGeo/gdal/issues/4306
>     >
>     > Thanks for your help
>     > Johannes
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/d4c651d5/attachment-0001.htm>

From michael.smith.erdc at gmail.com  Thu Nov 24 09:56:56 2022
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Thu, 24 Nov 2022 12:56:56 -0500
Subject: [gdal-dev] Is there a way to create a spatial index in FGB if
 created without?
References: <86C3B9F3-A3C2-4520-9992-9AE274F8207C@gmail.com>
Message-ID: <06E632AE-15BB-4E38-A4A0-D42D45EB0151@gmail.com>

Basically, can one create a spatial index in a flatgeobuf file if the source does not have one? 
 
Also, when trying to just create a new flatgeobuf with a spatial index from one without (using ogr2ogr), I get a lot of

ERROR 2: ICreateFeature: Too big feature
 
Mike
 
 
-- 
Michael Smith
US Army Corps / Remote Sensing GIS Center

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/aa09cd2b/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 24 10:12:22 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Nov 2022 19:12:22 +0100
Subject: [gdal-dev] Is there a way to create a spatial index in FGB if
 created without?
In-Reply-To: <06E632AE-15BB-4E38-A4A0-D42D45EB0151@gmail.com>
References: <86C3B9F3-A3C2-4520-9992-9AE274F8207C@gmail.com>
 <06E632AE-15BB-4E38-A4A0-D42D45EB0151@gmail.com>
Message-ID: <089af468-5e02-6765-7da6-c3150fe8feba@spatialys.com>

Mike,

Le 24/11/2022 ? 18:56, michael.smith.erdc at gmail.com a ?crit?:
>
> Basically, can one create a spatial index in a flatgeobuf file if the 
> source does not have one?
>
yes, through ogr2ogr by creating a new file, as you did
>
> Also, when trying to just create a new flatgeobuf with a spatial index 
> from one without (using ogr2ogr), I get a lot of
>
>
> ERROR 2: ICreateFeature: Too big feature
>
It could be either a huuuuge feature whose serialized form exceeds 2GB 
(unlikely, and even more if you convert from an existing flatgeobuf file 
which enforces this limit). Or that you have lots of features and a 
modest amount of RAM. The creation of the spatial index requires an 
amount of RAM proportional to the number of features (maybe 80 bytes or 
so per feature). In this later case, the error message is misleading 
currently. I've just changed it to "ICreateFeature: Memory allocation 
failure" in master.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/53ac2fb3/attachment.htm>

From michael.smith.erdc at gmail.com  Thu Nov 24 10:18:58 2022
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Thu, 24 Nov 2022 13:18:58 -0500
Subject: [gdal-dev] Is there a way to create a spatial index in FGB if
 created without?
In-Reply-To: <089af468-5e02-6765-7da6-c3150fe8feba@spatialys.com>
References: <089af468-5e02-6765-7da6-c3150fe8feba@spatialys.com>
Message-ID: <96451436-10CA-41D7-818F-4BC1B3B62675@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/0d2a3688/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 24 10:31:11 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Nov 2022 19:31:11 +0100
Subject: [gdal-dev] Is there a way to create a spatial index in FGB if
 created without?
In-Reply-To: <96451436-10CA-41D7-818F-4BC1B3B62675@gmail.com>
References: <089af468-5e02-6765-7da6-c3150fe8feba@spatialys.com>
 <96451436-10CA-41D7-818F-4BC1B3B62675@gmail.com>
Message-ID: <3080ad07-a9d3-85b5-5283-53ced54e9ca3@spatialys.com>


Le 24/11/2022 ? 19:18, michael.smith.erdc at gmail.com a ?crit?:
> I don?t believe these are huge features, its OSM building for the 
> world. Must be the memory constraint since it is a lot of features. 
> This doesn?t happen (i think, am retesting now) if created from the 
> osm pbf file directly but does from the fgb created from the pbf.
Hum, it might be that the FGB reader is a bit gready in its memory usage 
then. Bj?rn might be able to comment more
>
> Do either of the columnar formats (arrow, geoparquet) support spatial 
> access window selections yet (via ogr2ogr) or is that still forthcoming?

There is no spatial index specification for those formats (yet ? it 
isn't obvious how to stick one into them, in a clean and backward 
compatible way, but I believe this is a subject of research). So for now 
spatial filtering involves scanning all features geometries (there are a 
few optimizations to make it as efficient as possible, but you 
definitely won't get a great performance if repeatedly selecting small 
amounts of features with different extents)


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew at aitchison.me.uk  Thu Nov 24 11:34:21 2022
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 24 Nov 2022 19:34:21 +0000 (GMT)
Subject: [gdal-dev] SortIncludes was Re: Motion: adopt RFC69 C/C++ Code
 Formatting
In-Reply-To: <CADRrdKur5U_t_Aosyu8eegBYWazA7S5qb-4enVJ=S+vw+wC2Sg@mail.gmail.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>
 <f943fdef-c159-a50b-5b32-d9b3c3c8f765@itopen.it>
 <CADRrdKur5U_t_Aosyu8eegBYWazA7S5qb-4enVJ=S+vw+wC2Sg@mail.gmail.com>
Message-ID: <9c06959b-46d0-9341-529b-2e9dc8685c6f@aitchison.me.uk>

On Thu, 24 Nov 2022, Javier Jimenez Shaw wrote:

> In my opinion if the order of the includes affects the output there is
> something wrong in the code. I hope md5 is not recommending the order.

It turns out that although 'man md5' says:
      #include <sys/types.h>
      #include <md5.h>

the header file /usr/include/md5.h includes <sys/types.h> very early,
so there is no actual problem, at least on this platform - Ubuntu 
22.10/kinetic.

> In case you insist on keeping the order defined by the user
>  ... you can just add a newline to separate the includes in blocks.
> Clang-format keeps the contiguous blocks independent.

There are times when setting environment variables changes the
effects of a header, so it is a relief to hear that clang-format
wont reorder includes around that.

I find it interesting to note that, by default, flake8 wants python code
to put 'Stdlib' and 'Third Party' imports to be in separate groups,
whilst clang-format wants to sort
   #include <>
and
   #include ""
into one alphabetical list.

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From j1 at jimenezshaw.com  Thu Nov 24 12:47:32 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 24 Nov 2022 21:47:32 +0100
Subject: [gdal-dev] SortIncludes was Re: Motion: adopt RFC69 C/C++ Code
 Formatting
In-Reply-To: <9c06959b-46d0-9341-529b-2e9dc8685c6f@aitchison.me.uk>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5a841d94-11db-1ef4-438c-f07ab3327da0@aitchison.me.uk>
 <f943fdef-c159-a50b-5b32-d9b3c3c8f765@itopen.it>
 <CADRrdKur5U_t_Aosyu8eegBYWazA7S5qb-4enVJ=S+vw+wC2Sg@mail.gmail.com>
 <9c06959b-46d0-9341-529b-2e9dc8685c6f@aitchison.me.uk>
Message-ID: <CADRrdKsnNjRrqLTDPHeizPY-1=7T1P-xO1V8jBad-u4RKDD-Sw@mail.gmail.com>

clang-format keeps the blocks independent, yes. We usually divide in three
(or more) blocks: internal headers, third party, std. But it is a matter of
taste, of course.
This is the example of a file that uses gdal:

#pragma once

#include "CommandOptions.h"

#include <gdal_priv.h>
#include <gdal_utils.h>
#include <ogr_feature.h>
#include <ogr_spatialref.h>
#include <ogrsf_frmts.h>

#include <memory>
#include <stdexcept>

Some includes may have special conditions. Then just use blocks to keep
things in order. Also aesthetic order.
Or use  // clang-format off/on to not order something that is very special.

Anyhow, all this is a mater of taste. But I am really happy when the file
is automagically nicely formatted just when I save it.

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Thu, 24 Nov 2022 at 20:34, Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

> On Thu, 24 Nov 2022, Javier Jimenez Shaw wrote:
>
> > In my opinion if the order of the includes affects the output there is
> > something wrong in the code. I hope md5 is not recommending the order.
>
> It turns out that although 'man md5' says:
>       #include <sys/types.h>
>       #include <md5.h>
>
> the header file /usr/include/md5.h includes <sys/types.h> very early,
> so there is no actual problem, at least on this platform - Ubuntu
> 22.10/kinetic.
>
> > In case you insist on keeping the order defined by the user
> >  ... you can just add a newline to separate the includes in blocks.
> > Clang-format keeps the contiguous blocks independent.
>
> There are times when setting environment variables changes the
> effects of a header, so it is a relief to hear that clang-format
> wont reorder includes around that.
>
> I find it interesting to note that, by default, flake8 wants python code
> to put 'Stdlib' and 'Third Party' imports to be in separate groups,
> whilst clang-format wants to sort
>    #include <>
> and
>    #include ""
> into one alphabetical list.
>
> --
> Andrew C. Aitchison                      Kendal, UK
>                     andrew at aitchison.me.uk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221124/0f3dd77e/attachment.htm>

From johannespaul92 at gmail.com  Fri Nov 25 00:43:04 2022
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Fri, 25 Nov 2022 09:43:04 +0100
Subject: [gdal-dev] Compilation error with JP2KAK driver
In-Reply-To: <59bc21d9-7168-15ca-8903-12b6184c7bc4@spatialys.com>
References: <CACcmK9ZRZMhH5z_F5gBRQHL1y9xyjPt8BmA-z92uPVh2x=V_RQ@mail.gmail.com>
 <937590a8-0412-c5bb-2403-8d787ff7874d@spatialys.com>
 <CACcmK9Yzrz3_sG5YM7WVVSbHa=+X7SF1T3CmoJBzvuCKunMPmA@mail.gmail.com>
 <59bc21d9-7168-15ca-8903-12b6184c7bc4@spatialys.com>
Message-ID: <CACcmK9Z1atQ1F8OMBg=PXbwXTcJzvgFJJi5q4KCzm962gJB0Wg@mail.gmail.com>

Ok I finally managed to get GDAL 3.6.0 compiled with JP2KAK driver v8.2.
Indeed my Kakadu complation was incomplete.
For the record, in addition to the following instructions
https://trac.osgeo.org/gdal/wiki/JP2KAK I had to :
- install java-openjdk-devel
- set JAVA_HOME environment variable
- After building subtree *coresys* &  *apps*, subtree *managed* must be
built (cd managed/make; make -f Makefile-Linux-x86-64-gcc)
Then I get my libkdu_a82R.so generated for the GDAL -DKDU_AUX_LIBRARY cmake
option.
Thanks!

On Thu, 24 Nov 2022 at 14:42, Even Rouault <even.rouault at spatialys.com>
wrote:

> Refer to Kakadu docs & support for that. There's definitely a way of
> generating it, but Kakadu build system is .... ahem ... "particular"
> Le 24/11/2022 ? 14:37, Johannes Paul a ?crit :
>
> Hello Even,
> Thanks for your reply, i did notice that, however libkdu_a82R.so is not
> generated at kakadu compilation.
> I only get libkdu_v82R.so and libkdu.a
> Rgds,
> Johannes
>
> Le jeu. 24 nov. 2022 ? 14:14, Even Rouault <even.rouault at spatialys.com> a
> ?crit :
>
>> The value of KDU_AUX_LIBRARY is wrong. See
>>
>> https://gdal.org/development/building_from_source.html#cmdoption-arg-KDU_AUX_LIBRARY
>>
>> It should be -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu_a82R.so"
>>
>> Even
>>
>> Le 24/11/2022 ? 10:35, Johannes Paul a ?crit :
>> > Hello,
>> >
>> > I'm having trouble compiling GDAL 3.6.0 on Centos7 with JP2KAK driver
>> > using Kakadu 8.2.
>> >
>> > I'm following the below instructions to compile KDU
>> > https://trac.osgeo.org/gdal/wiki/JP2KAK
>> > And I'm using the following cmake options to compile GDAL
>> > -DGDAL_USE_KDU=ON -DKDU_INCLUDE_DIR="${INSTALLDIR}"
>> > -DKDU_LIBRARY="${INSTALLDIR}"/lib/libkdu_v82R.so
>> >
>> -DKDU_AUX_LIBRARY="${INSTALLDIR}"/lib/libkdu.a -DGDAL_ENABLE_DRIVER_JP2KAK:BOOL=ON
>> >
>> > Everything goes fine until Linking CXX shared library libgdal.so
>> > where I get multiple errors type jp2kakdataset.cpp:(.text+0x396):
>> > undefined reference to `kdu_supp...
>> >
>> > I've noticed the issue has already been addressed, unfortunately it
>> > does not solve my problem ...
>> > https://github.com/OSGeo/gdal/issues/4306
>> >
>> > Thanks for your help
>> > Johannes
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221125/987df4c5/attachment.htm>

From Stefan.Blumentrath at gmx.de  Fri Nov 25 07:11:52 2022
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Fri, 25 Nov 2022 16:11:52 +0100
Subject: [gdal-dev] MSSQL ODBC and password security
In-Reply-To: <trinity-91e8a9f0-01f1-46d7-bb36-c44cf61d05d4-1669040777868@3c-app-gmx-bap29>
References: <trinity-91e8a9f0-01f1-46d7-bb36-c44cf61d05d4-1669040777868@3c-app-gmx-bap29>
Message-ID: <trinity-e335db5a-391f-438b-b0c3-51aeb55c5b72-1669389112948@3c-app-gmx-bs71>

Hi again,

I saw that my previous email (below) got mangled after my web-mailer newly defaults to HTML format.

Following up, I want to let you know that I now opened a PR:
https://github.com/OSGeo/gdal/pull/6797
in order to address the issue I encountered with login credentials on the command line, when connecting to MS SQL without TrustedConnection.

I am no C++ dev, so any feedback would be greatly appreciated. On my dev setup I currently have no access to MS SQL, so I have not tested the logic yet, but plan to do so early next week.

Feedback, on the principle implementation, obvious coding mistakes or documentation and the like can be addressed also before...

Kind regards, and thanks for keeping GDAL great!

Stefan
?
?
?

Gesendet:?Montag, 21. November 2022 um 15:26 Uhr
Von:?"Stefan Blumentrath" <Stefan.Blumentrath at gmx.de>
An:?gdal-dev at lists.osgeo.org
Betreff:?[gdal-dev] MSSQL ODBC and password security

Hi,
?
recently I have been struggling with secure handling of my username and password in ODBC connections to MS SQL when using GDAL/OGR.
?
>From my understanding, username and password are not read from odbc.ini files, so I cannot specify a DSN where username and password are predefined in that file...
?
So, the only alternatives are
a) using trusted connctions and?kerberos or
b) provide username and password in the connection string.
?
Unfortunately, a) is not available to me.?While a file name with username and password is not ideal, providing username and password on the commandline seems worse, as it leaks many places.
I guess not reading username and password from odbc.ini is a?limitation that originates from unixODBC / FreeTDS.
However, it would be great to avoid providing password on the command line in GDAL.
?
If could use environment variables or a passwordfile (like .pgpass with PostgreSQL) that would be great.
My question is, did I overlook an option to securly handle login info in MSSQL ODBC connections in GDAL??
?
Cheers
Stefan
?_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev

From cliveswan at gmail.com  Mon Nov 28 04:57:51 2022
From: cliveswan at gmail.com (Clive Swan)
Date: Mon, 28 Nov 2022 12:57:51 +0000
Subject: [gdal-dev] Update mosiac tiles
Message-ID: <CA+kQ3muhyfjfxTyQrp5L-VFUE5Ld600_dhrwvxL9pBMcDboPrQ@mail.gmail.com>

I need to merge/update existing raster mosaic tile directories, with new
data.
Is gdal_merge still the best gdal library to use??

-- 

 Regards,


Clive Swan

--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/26b46f52/attachment.htm>

From johannespaul92 at gmail.com  Mon Nov 28 06:55:03 2022
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Mon, 28 Nov 2022 15:55:03 +0100
Subject: [gdal-dev] GDAL compilation with driver OGR_PG
Message-ID: <CACcmK9YbFQPStYQrBV8WsUwm=AaYZTYNh0M=WZq2JG9tW5G5Kw@mail.gmail.com>

Hello,
i'm having trouble getting GDAL compiled on Centos 7 and 8 with OGR
PostgreSQL driver.
I used to compile GDAL using configure --with-pg=yes, which was working
fine, however since v3.6.0 cmake shall be used, and I can't get OGR_PG
driver enabled using the following cmake options:

cmake3 .. -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_*
-DOGR_BUILD_OPTIONAL_DRIVERS=OFF -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF
-DCMAKE_INSTALL_PREFIX="${INSTALLDIR}" -DCMAKE_PREFIX_PATH="${INSTALLDIR}"
-DCMAKE_BUILD_TYPE=Release -DGDAL_USE_INTERNAL_LIBS=WHEN_NO_EXTERNAL
-DGDAL_USE_CURL=ON -DGDAL_USE_PNG=ON -DGDAL_USE_PNG_INTERNAL=OFF
-DPostgreSQL_INCLUDE_DIR="${INSTALLDIR}"/include
-DPostgreSQL_LIBRARY_RELEASE="${INSTALLDIR}"/lib/libpq.so
-DGDAL_USE_POSTGRESQL=ON -DGDAL_USE_SQLITE3=ON -DGDAL_USE_ZLIB=ON
-DGDAL_USE_ZLIB_INTERNAL=OFF -DBUILD_TESTING=OFF
-DBUILD_PYTHON_BINDINGS=OFF -DBUILD_JAVA_BINDINGS=OFF
-DBUILD_CSHARP_BINDINGS=OFF -DOGR_ENABLE_DRIVER_GPKG=ON
-DOGR_ENABLE_DRIVER_SQLITE=ON -DOGR_ENABLE_DRIVER_PG=ON
-DGDAL_ENABLE_DRIVER_PNG=ON

I do get -- Found PostgreSQL: /opt/i4d/lib/libpq.so (found version "13.3"),
however OGR_PG is still disabled.
If I remove -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_*
-DOGR_BUILD_OPTIONAL_DRIVERS=OFF -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF, I do
get the driver enabled however I'm expecting a minimal GDAL configuration,
only with the drivers I need for the build.

Thanks,
Johannes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/a2193c62/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 28 07:16:02 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Nov 2022 16:16:02 +0100
Subject: [gdal-dev] GDAL compilation with driver OGR_PG
In-Reply-To: <CACcmK9YbFQPStYQrBV8WsUwm=AaYZTYNh0M=WZq2JG9tW5G5Kw@mail.gmail.com>
References: <CACcmK9YbFQPStYQrBV8WsUwm=AaYZTYNh0M=WZq2JG9tW5G5Kw@mail.gmail.com>
Message-ID: <49d1e163-6094-895d-9d10-8f119a78a72e@spatialys.com>

Johannes,

minimum or near-minimum builds are tricky because of inter-driver 
dependencies.

You also need to add -DOGR_ENABLE_DRIVER_PGDUMP=ON

Cf 
https://github.com/OSGeo/gdal/blob/b2c689436208e72518f4cd60fb5e27d6d985a621/ogr/ogrsf_frmts/CMakeLists.txt#L87:

{{{

ogr_dependent_driver(pg PostGIS 
"GDAL_USE_POSTGRESQL;OGR_ENABLE_DRIVER_PGDUMP")

}}}

Even

Le 28/11/2022 ? 15:55, Johannes Paul a ?crit?:
> Hello,
> i'm having trouble getting GDAL compiled on Centos 7 and 8 with OGR 
> PostgreSQL driver.
> I used to compile GDAL using configure --with-pg=yes, which was 
> working fine, however since v3.6.0 cmake shall be used, and I can't 
> get OGR_PG driver enabled using the following cmake options:
>
> cmake3 .. -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_* 
> -DOGR_BUILD_OPTIONAL_DRIVERS=OFF -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF 
> -DCMAKE_INSTALL_PREFIX="${INSTALLDIR}" 
> -DCMAKE_PREFIX_PATH="${INSTALLDIR}" -DCMAKE_BUILD_TYPE=Release 
> -DGDAL_USE_INTERNAL_LIBS=WHEN_NO_EXTERNAL -DGDAL_USE_CURL=ON 
> -DGDAL_USE_PNG=ON -DGDAL_USE_PNG_INTERNAL=OFF 
> -DPostgreSQL_INCLUDE_DIR="${INSTALLDIR}"/include 
> -DPostgreSQL_LIBRARY_RELEASE="${INSTALLDIR}"/lib/libpq.so 
> -DGDAL_USE_POSTGRESQL=ON -DGDAL_USE_SQLITE3=ON -DGDAL_USE_ZLIB=ON 
> -DGDAL_USE_ZLIB_INTERNAL=OFF -DBUILD_TESTING=OFF 
> -DBUILD_PYTHON_BINDINGS=OFF -DBUILD_JAVA_BINDINGS=OFF 
> -DBUILD_CSHARP_BINDINGS=OFF -DOGR_ENABLE_DRIVER_GPKG=ON 
> -DOGR_ENABLE_DRIVER_SQLITE=ON -DOGR_ENABLE_DRIVER_PG=ON 
> -DGDAL_ENABLE_DRIVER_PNG=ON
>
> I do get?-- Found PostgreSQL: /opt/i4d/lib/libpq.so (found version 
> "13.3"), however OGR_PG is still disabled.
> If I remove -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_* 
> -DOGR_BUILD_OPTIONAL_DRIVERS=OFF -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF, I 
> do get the driver enabled however I'm expecting a minimal GDAL 
> configuration, only with the drivers I need for the build.
>
> Thanks,
> Johannes
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/b3f2571a/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 28 08:08:58 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Nov 2022 17:08:58 +0100
Subject: [gdal-dev] Proposal of a -json output for ogrinfo
Message-ID: <c97b5186-d417-0a4e-b185-09fbcdc39462@spatialys.com>

Hi,

I've implemented a -json switch for ogrinfo

Cf https://github.com/OSGeo/gdal/pull/6812

This should be useful to those using currently grep, sed, awk, and the 
like to extract metadata information on a OGR dataset.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Nov 28 08:14:19 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Nov 2022 17:14:19 +0100
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
In-Reply-To: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
Message-ID: <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>

Hi,

+1 and I'm very much for the "Big reformat", otherwise as discussed with 
Alessandro, I'm afraid occasional contributors will mix substantial and 
formatting changes in the same commit. The Big reformat commit itself 
should be done with a dedicated github account, like we did with the 
"git mv gdal/* ." tree-reorganisation to avoid unfair commit statistics.

I've just tested successfully the proposed clang-format pre-commit hook 
on Windows, so this shouldn't be an obstacle to contributors whatever 
their development environment.

Even

Le 24/11/2022 ? 09:39, ElPaso a ?crit?:
> Hi,
>
> Motion:
>
> Adopt RFC88: RFC69 C/C++ Code Formatting [1]
>
> I have updated the RFC [1] to use pre-commit and I have created a 
> draft implementation of the pre-commit hook and the CI integration 
> with a GH workflow [2].
>
> If adopted, we still have to agree on which coding style to apply (for 
> now I used a clang-format file I've found under gdal/scripts), but the 
> biggest decision is wether proceed with an initial "Big Reformat" or 
> an incremental one, my draft implementation supports both.
>
>
> Kind regards.
>
>
> [1] 
> https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
> [2] 
> https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From johannespaul92 at gmail.com  Mon Nov 28 08:47:01 2022
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Mon, 28 Nov 2022 17:47:01 +0100
Subject: [gdal-dev] GDAL compilation with driver OGR_PG
In-Reply-To: <49d1e163-6094-895d-9d10-8f119a78a72e@spatialys.com>
References: <CACcmK9YbFQPStYQrBV8WsUwm=AaYZTYNh0M=WZq2JG9tW5G5Kw@mail.gmail.com>
 <49d1e163-6094-895d-9d10-8f119a78a72e@spatialys.com>
Message-ID: <CACcmK9a-brZnVFtTPUNzFNgqJZ6-1TRY9eTkfYC_f+52fmCYtQ@mail.gmail.com>

Perfect ! Thank you very much.
Johannes

On Mon, 28 Nov 2022 at 16:16, Even Rouault <even.rouault at spatialys.com>
wrote:

> Johannes,
>
> minimum or near-minimum builds are tricky because of inter-driver
> dependencies.
>
> You also need to add -DOGR_ENABLE_DRIVER_PGDUMP=ON
>
> Cf
> https://github.com/OSGeo/gdal/blob/b2c689436208e72518f4cd60fb5e27d6d985a621/ogr/ogrsf_frmts/CMakeLists.txt#L87
> :
>
> {{{
>
> ogr_dependent_driver(pg PostGIS
> "GDAL_USE_POSTGRESQL;OGR_ENABLE_DRIVER_PGDUMP")
>
> }}}
>
> Even
> Le 28/11/2022 ? 15:55, Johannes Paul a ?crit :
>
> Hello,
> i'm having trouble getting GDAL compiled on Centos 7 and 8 with OGR
> PostgreSQL driver.
> I used to compile GDAL using configure --with-pg=yes, which was working
> fine, however since v3.6.0 cmake shall be used, and I can't get OGR_PG
> driver enabled using the following cmake options:
>
> cmake3 .. -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_*
> -DOGR_BUILD_OPTIONAL_DRIVERS=OFF -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF
> -DCMAKE_INSTALL_PREFIX="${INSTALLDIR}" -DCMAKE_PREFIX_PATH="${INSTALLDIR}"
> -DCMAKE_BUILD_TYPE=Release -DGDAL_USE_INTERNAL_LIBS=WHEN_NO_EXTERNAL
> -DGDAL_USE_CURL=ON -DGDAL_USE_PNG=ON -DGDAL_USE_PNG_INTERNAL=OFF
> -DPostgreSQL_INCLUDE_DIR="${INSTALLDIR}"/include
> -DPostgreSQL_LIBRARY_RELEASE="${INSTALLDIR}"/lib/libpq.so
> -DGDAL_USE_POSTGRESQL=ON -DGDAL_USE_SQLITE3=ON -DGDAL_USE_ZLIB=ON
> -DGDAL_USE_ZLIB_INTERNAL=OFF -DBUILD_TESTING=OFF
> -DBUILD_PYTHON_BINDINGS=OFF -DBUILD_JAVA_BINDINGS=OFF
> -DBUILD_CSHARP_BINDINGS=OFF -DOGR_ENABLE_DRIVER_GPKG=ON
> -DOGR_ENABLE_DRIVER_SQLITE=ON -DOGR_ENABLE_DRIVER_PG=ON
> -DGDAL_ENABLE_DRIVER_PNG=ON
>
> I do get -- Found PostgreSQL: /opt/i4d/lib/libpq.so (found version
> "13.3"), however OGR_PG is still disabled.
> If I remove -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_*
> -DOGR_BUILD_OPTIONAL_DRIVERS=OFF -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF, I do
> get the driver enabled however I'm expecting a minimal GDAL configuration,
> only with the drivers I need for the build.
>
> Thanks,
> Johannes
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/fc306e4c/attachment-0001.htm>

From j1 at jimenezshaw.com  Mon Nov 28 09:17:41 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 28 Nov 2022 18:17:41 +0100
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
In-Reply-To: <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
Message-ID: <CADRrdKvMg1ZHn0LArAbvh_vyzY-4t2VLNCdcFKAiNdPoh3vuqw@mail.gmail.com>

Which version of clang-format are we using? (I saw 3.8 somewhere n the
code?) Older versions are not easy to get in modern operating systems. In
Ubuntu 22.04 the default is clang-format-14. It is specially hard in MacOS,
friends told me.

About the blame problems, we can do this:
https://akrabat.com/ignoring-revisions-with-git-blame/

Thanks for the work!

On Mon, 28 Nov 2022, 17:14 Even Rouault, <even.rouault at spatialys.com> wrote:

> Hi,
>
> +1 and I'm very much for the "Big reformat", otherwise as discussed with
> Alessandro, I'm afraid occasional contributors will mix substantial and
> formatting changes in the same commit. The Big reformat commit itself
> should be done with a dedicated github account, like we did with the
> "git mv gdal/* ." tree-reorganisation to avoid unfair commit statistics.
>
> I've just tested successfully the proposed clang-format pre-commit hook
> on Windows, so this shouldn't be an obstacle to contributors whatever
> their development environment.
>
> Even
>
> Le 24/11/2022 ? 09:39, ElPaso a ?crit :
> > Hi,
> >
> > Motion:
> >
> > Adopt RFC88: RFC69 C/C++ Code Formatting [1]
> >
> > I have updated the RFC [1] to use pre-commit and I have created a
> > draft implementation of the pre-commit hook and the CI integration
> > with a GH workflow [2].
> >
> > If adopted, we still have to agree on which coding style to apply (for
> > now I used a clang-format file I've found under gdal/scripts), but the
> > biggest decision is wether proceed with an initial "Big Reformat" or
> > an incremental one, my draft implementation supports both.
> >
> >
> > Kind regards.
> >
> >
> > [1]
> >
> https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting-text-only/doc/source/development/rfc/rfc69_cplusplus_formatting.rst
> > [2]
> > https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/e6669c53/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 28 09:35:03 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Nov 2022 18:35:03 +0100
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
In-Reply-To: <CADRrdKvMg1ZHn0LArAbvh_vyzY-4t2VLNCdcFKAiNdPoh3vuqw@mail.gmail.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
 <CADRrdKvMg1ZHn0LArAbvh_vyzY-4t2VLNCdcFKAiNdPoh3vuqw@mail.gmail.com>
Message-ID: <94e72404-3419-f3f4-5c40-85a8358ec1e1@spatialys.com>


Le 28/11/2022 ? 18:17, Javier Jimenez Shaw a ?crit?:
> Which version of clang-format are we using?
15.0.4 currently, pinned in the pre-commit configuration file. cf 
https://github.com/OSGeo/gdal/pull/6787#issuecomment-1327416250 . It is 
installed automatically when running pre-commit. Works fine for me on 
Ubuntu 20.04 or Windows 10
> (I saw 3.8 somewhere n the code?)

Ah yes the initial version of the RFC mentioned an older release. It 
should be adjusted.


> About the blame problems, we can do this:
> https://akrabat.com/ignoring-revisions-with-git-blame/

Regarding my mention of a dedicated account to do the big reformat, I 
was more thinking to attribution statistics of 
https://github.com/OSGeo/gdal/graphs/contributors

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Mon Nov 28 09:45:38 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 28 Nov 2022 18:45:38 +0100
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
In-Reply-To: <94e72404-3419-f3f4-5c40-85a8358ec1e1@spatialys.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
 <CADRrdKvMg1ZHn0LArAbvh_vyzY-4t2VLNCdcFKAiNdPoh3vuqw@mail.gmail.com>
 <94e72404-3419-f3f4-5c40-85a8358ec1e1@spatialys.com>
Message-ID: <CADRrdKs7uMSTQ-hrj=UKqQhBizUX5S0OmS2zVKYqL1oOmRssfQ@mail.gmail.com>

Yes, those are two different issues: attribution and "blame", that is
really bothering when you want to see the history. Your comment reminded me
that other.

(Sorry for the format, I'm having problems with my phone)

On Mon, 28 Nov 2022, 18:35 Even Rouault, <even.rouault at spatialys.com> wrote:

>
> Le 28/11/2022 ? 18:17, Javier Jimenez Shaw a ?crit :
>
>
> > About the blame problems, we can do this:
> > https://akrabat.com/ignoring-revisions-with-git-blame/
>
> Regarding my mention of a dedicated account to do the big reformat, I
> was more thinking to attribution statistics of
> https://github.com/OSGeo/gdal/graphs/contributors
>
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/87541290/attachment.htm>

From schwehr at gmail.com  Mon Nov 28 10:23:22 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 28 Nov 2022 10:23:22 -0800
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
In-Reply-To: <CADRrdKs7uMSTQ-hrj=UKqQhBizUX5S0OmS2zVKYqL1oOmRssfQ@mail.gmail.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
 <CADRrdKvMg1ZHn0LArAbvh_vyzY-4t2VLNCdcFKAiNdPoh3vuqw@mail.gmail.com>
 <94e72404-3419-f3f4-5c40-85a8358ec1e1@spatialys.com>
 <CADRrdKs7uMSTQ-hrj=UKqQhBizUX5S0OmS2zVKYqL1oOmRssfQ@mail.gmail.com>
Message-ID: <CACmBxyvB3QKkzo_zXja4ZFcMo1LvsOyN4JUd=HzAFdqf2s2K_w@mail.gmail.com>

+1. Having the hooks makes this feasible.

Thank you for pickup the work that I let fall on the floor so long ago!

On Mon, Nov 28, 2022 at 9:46 AM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> Yes, those are two different issues: attribution and "blame", that is
> really bothering when you want to see the history. Your comment reminded me
> that other.
>
> (Sorry for the format, I'm having problems with my phone)
>
> On Mon, 28 Nov 2022, 18:35 Even Rouault, <even.rouault at spatialys.com>
> wrote:
>
>>
>> Le 28/11/2022 ? 18:17, Javier Jimenez Shaw a ?crit :
>>
>>
>> > About the blame problems, we can do this:
>> > https://akrabat.com/ignoring-revisions-with-git-blame/
>>
>> Regarding my mention of a dedicated account to do the big reformat, I
>> was more thinking to attribution statistics of
>> https://github.com/OSGeo/gdal/graphs/contributors
>>
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/27e4d305/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 28 14:49:15 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Nov 2022 23:49:15 +0100
Subject: [gdal-dev] GDAL compilation with driver OGR_PG
In-Reply-To: <CACcmK9a-brZnVFtTPUNzFNgqJZ6-1TRY9eTkfYC_f+52fmCYtQ@mail.gmail.com>
References: <CACcmK9YbFQPStYQrBV8WsUwm=AaYZTYNh0M=WZq2JG9tW5G5Kw@mail.gmail.com>
 <49d1e163-6094-895d-9d10-8f119a78a72e@spatialys.com>
 <CACcmK9a-brZnVFtTPUNzFNgqJZ6-1TRY9eTkfYC_f+52fmCYtQ@mail.gmail.com>
Message-ID: <a8cf9041-68bd-c284-f765-14a18d55e7c5@spatialys.com>

https://github.com/OSGeo/gdal/pull/6816 should make it much more obvious 
with an explicit fatal error when explicitly enabling a driver whose 
requirements are not met.

Le 28/11/2022 ? 17:47, Johannes Paul a ?crit?:
> Perfect ! Thank you very much.
> Johannes
>
> On Mon, 28 Nov 2022 at 16:16, Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Johannes,
>
>     minimum or near-minimum builds are tricky because of inter-driver
>     dependencies.
>
>     You also need to add -DOGR_ENABLE_DRIVER_PGDUMP=ON
>
>     Cf
>     https://github.com/OSGeo/gdal/blob/b2c689436208e72518f4cd60fb5e27d6d985a621/ogr/ogrsf_frmts/CMakeLists.txt#L87:
>
>     {{{
>
>     ogr_dependent_driver(pg PostGIS
>     "GDAL_USE_POSTGRESQL;OGR_ENABLE_DRIVER_PGDUMP")
>
>     }}}
>
>     Even
>
>     Le 28/11/2022 ? 15:55, Johannes Paul a ?crit?:
>>     Hello,
>>     i'm having trouble getting GDAL compiled on Centos 7 and 8 with
>>     OGR PostgreSQL driver.
>>     I used to compile GDAL using configure --with-pg=yes, which was
>>     working fine, however since v3.6.0 cmake shall be used, and I
>>     can't get OGR_PG driver enabled using the following cmake options:
>>
>>     cmake3 .. -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_*
>>     -DOGR_BUILD_OPTIONAL_DRIVERS=OFF
>>     -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF
>>     -DCMAKE_INSTALL_PREFIX="${INSTALLDIR}"
>>     -DCMAKE_PREFIX_PATH="${INSTALLDIR}" -DCMAKE_BUILD_TYPE=Release
>>     -DGDAL_USE_INTERNAL_LIBS=WHEN_NO_EXTERNAL -DGDAL_USE_CURL=ON
>>     -DGDAL_USE_PNG=ON -DGDAL_USE_PNG_INTERNAL=OFF
>>     -DPostgreSQL_INCLUDE_DIR="${INSTALLDIR}"/include
>>     -DPostgreSQL_LIBRARY_RELEASE="${INSTALLDIR}"/lib/libpq.so
>>     -DGDAL_USE_POSTGRESQL=ON -DGDAL_USE_SQLITE3=ON -DGDAL_USE_ZLIB=ON
>>     -DGDAL_USE_ZLIB_INTERNAL=OFF -DBUILD_TESTING=OFF
>>     -DBUILD_PYTHON_BINDINGS=OFF -DBUILD_JAVA_BINDINGS=OFF
>>     -DBUILD_CSHARP_BINDINGS=OFF -DOGR_ENABLE_DRIVER_GPKG=ON
>>     -DOGR_ENABLE_DRIVER_SQLITE=ON -DOGR_ENABLE_DRIVER_PG=ON
>>     -DGDAL_ENABLE_DRIVER_PNG=ON
>>
>>     I do get?-- Found PostgreSQL: /opt/i4d/lib/libpq.so (found
>>     version "13.3"), however OGR_PG is still disabled.
>>     If I remove -UGDAL_ENABLE_DRIVER_* -UOGR_ENABLE_DRIVER_*
>>     -DOGR_BUILD_OPTIONAL_DRIVERS=OFF
>>     -DGDAL_BUILD_OPTIONAL_DRIVERS=OFF, I do get the driver enabled
>>     however I'm expecting a minimal GDAL configuration, only with the
>>     drivers I need for the build.
>>
>>     Thanks,
>>     Johannes
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221128/7dd50729/attachment.htm>

From mniemyjski at cloudferro.com  Tue Nov 29 02:23:51 2022
From: mniemyjski at cloudferro.com (Marcin Niemyjski)
Date: Tue, 29 Nov 2022 10:23:51 +0000
Subject: [gdal-dev] get data from one s3 bucket,
 process and upload to another bucket as docker container
Message-ID: <AS1PR03MB8149FF433B678378D5CF5E9BA8129@AS1PR03MB8149.eurprd03.prod.outlook.com>

Hello,

First of all, thank you for providing awesome open-source tools, my work would not be possible without it ^^

I'm looking for an effective way/workflow to get data from s3 bucket, then generate COG and VRT from it into another S3 bucket. Everything should be working as containerized python application.

The main problem is that I do not know how to transfer processed data (COG, VRT) into another bucket.

Best,
Macin Niemyjski

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221129/59599da8/attachment.htm>

From hyoklee at hdfgroup.org  Tue Nov 29 06:43:29 2022
From: hyoklee at hdfgroup.org (H. Joe Lee)
Date: Tue, 29 Nov 2022 08:43:29 -0600
Subject: [gdal-dev] get data from one s3 bucket,
 process and upload to another bucket as docker container
In-Reply-To: <AS1PR03MB8149FF433B678378D5CF5E9BA8129@AS1PR03MB8149.eurprd03.prod.outlook.com>
References: <AS1PR03MB8149FF433B678378D5CF5E9BA8129@AS1PR03MB8149.eurprd03.prod.outlook.com>
Message-ID: <CADeM3-ytO2Ljkv9CZ3C-si-scgM8mjK08T-+8VotVvxo-zB6jA@mail.gmail.com>

I had some success with geolambda [1] a few years ago.
I used the S3 trigger [2].

[1] https://github.com/developmentseed/geolambda
[2] https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html

- Joe
---
Build the Metaverse w/ HDF.

On Tue, Nov 29, 2022 at 4:23 AM Marcin Niemyjski via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Hello,
>
> First of all, thank you for providing awesome open-source tools, my work would not be possible without it ^^
>
> I'm looking for an effective way/workflow to get data from s3 bucket, then generate COG and VRT from it into another S3 bucket. Everything should be working as containerized python application.
>
> The main problem is that I do not know how to transfer processed data (COG, VRT) into another bucket.
>
> Best,
> Macin Niemyjski
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From cliveswan at gmail.com  Tue Nov 29 11:12:41 2022
From: cliveswan at gmail.com (Clive Swan)
Date: Tue, 29 Nov 2022 19:12:41 +0000
Subject: [gdal-dev] gdal_merge
Message-ID: <CA+kQ3mtX4z=U_U-qKNf8idH6yDSW2YqSna=bZH_tVPT=4JDcyA@mail.gmail.com>

Greetings,

I am trying to select band 1 and then use gdal_merge to merge two tiff
files in an AWS bucket.
Getting odd errors.

gdal_merge.py -o
/vsis3/summer-outputs/3_dataupdated/rcp26-2020-coastal_flood-NA-false.tif
/vsis3/summer-outputs/3_data_ready_for_spectra/coastal-undefended-rcp26-2020.tif

 /vsis3/summer-outputs/5_UK_prod_rasters/coastal-undefended-rcp26-2020.tif
 -of GTiff  -co -b 1  -co CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE=YES -co
NUM_THREADS=ALL_CPUS --config AWS_ACCESS_KEY_ID KEY_ID --config
AWS_SECRET_ACCESS_KEY ACCESS_KEY

ERRORS
  `1' not recognized as a supported file
format.
<< band 1
Warning 6: creation option '-b' is not formatted with the key=value
format
<< band 1
Warning 6: *driver GTiff does not support creation option
*CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE
<< Get an error if leave this out
ERROR 1: *w+ not supported for /vsis3, unless*
CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE is set to YES             << Get an
error
ERROR 4: Attempt to create new tiff file
`/vsis3/summer-outputs/3_data_ready/updated/rcp26-2020-coastal_flood-NA-false.tif'
failed: *Permission denied  << *added the security key, etc
*Creation failed, terminating gdal_merge.*

-- 

 Regards,


Clive Swan

--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221129/794eb08d/attachment.htm>

From daniel.fred.evans at gmail.com  Tue Nov 29 11:24:19 2022
From: daniel.fred.evans at gmail.com (Daniel Evans)
Date: Tue, 29 Nov 2022 19:24:19 +0000
Subject: [gdal-dev] get data from one s3 bucket,
 process and upload to another bucket as docker container
In-Reply-To: <AS1PR03MB8149FF433B678378D5CF5E9BA8129@AS1PR03MB8149.eurprd03.prod.outlook.com>
References: <AS1PR03MB8149FF433B678378D5CF5E9BA8129@AS1PR03MB8149.eurprd03.prod.outlook.com>
Message-ID: <CANnaQabKfyxC2dQKKLNVt8ATwNXUeCyMDRLXHwK498GzLSiigA@mail.gmail.com>

Hi Marcin,

For writing the data to an S3 bucket, two options come to mind:

1) Write directly from GDAL, using the /vsis3/ virtual file system
2) Write the data locally from GDAL, and then copy to S3 using another
Python library (e.g. boto3, s3fs) or the AWS CLI

Option 2 is quite widely adopted. While it seems more complex, writing COGs
directly to S3 is difficult (impossible?), because it requires random write
access, while S3 only supports sequential writes.

Another option I've seen is to use rasterio, the Pythonic GDAL wrapper, to
write to an in-memory buffer, and then give this as a byte steam for boto3
to copy to S3. This avoids use of the local filesystem, but won't scale to
very large rasters. I'm unsure how easy it would be to achieve this from
the plain GDAL Python library.

Regards,
Daniel

On Tue, 29 Nov 2022, 10:24 Marcin Niemyjski via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hello,
>
> First of all, thank you for providing awesome open-source tools, my work
> would not be possible without it ^^
>
> I'm looking for an effective way/workflow to get data from s3 bucket, then
> generate COG and VRT from it into another S3 bucket. Everything should be
> working as containerized python application.
>
> The main problem is that I do not know how to transfer processed data
> (COG, VRT) into another bucket.
>
> Best,
> Macin Niemyjski
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221129/95a89adf/attachment.htm>

From even.rouault at spatialys.com  Tue Nov 29 12:10:22 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Nov 2022 21:10:22 +0100
Subject: [gdal-dev] gdal_merge
In-Reply-To: <CA+kQ3mtX4z=U_U-qKNf8idH6yDSW2YqSna=bZH_tVPT=4JDcyA@mail.gmail.com>
References: <CA+kQ3mtX4z=U_U-qKNf8idH6yDSW2YqSna=bZH_tVPT=4JDcyA@mail.gmail.com>
Message-ID: <8f2d8c2d-a3b9-ac81-7667-1f817fa41add@spatialys.com>

Clive,

CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE is a configuration option / 
environment variable, so you have to pass it with --config 
CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE YES

Even

Le 29/11/2022 ? 20:12, Clive Swan a ?crit?:
> Greetings,
>
> I am trying to select band 1 and then use gdal_merge to merge two tiff 
> files in an AWS bucket.
> Getting odd errors.
>
> gdal_merge.py -o 
> /vsis3/summer-outputs/3_dataupdated/rcp26-2020-coastal_flood-NA-false.tif 
> /vsis3/summer-outputs/3_data_ready_for_spectra/coastal-undefended-rcp26-2020.tif 
> ?/vsis3/summer-outputs/5_UK_prod_rasters/coastal-undefended-rcp26-2020.tif 
> ?-of GTiff ?-co -b 1 ?-co CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE=YES 
> -co NUM_THREADS=ALL_CPUS --config AWS_ACCESS_KEY_ID KEY_ID --config 
> AWS_SECRET_ACCESS_KEY ACCESS_KEY
>
> ERRORS
> ? `1' not recognized as a supported file format. << band 1
> Warning 6: creation option '-b' is not formatted with the key=value 
> format << band 1
> Warning 6: *driver GTiff does not support creation option 
> *CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE << Get an error if leave this out
> ERROR 1: *w+ not supported for /vsis3, unless* 
> CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE is set to YES???????????? << 
> Get an error
> ERROR 4: Attempt to create new tiff file 
> `/vsis3/summer-outputs/3_data_ready/updated/rcp26-2020-coastal_flood-NA-false.tif' 
> failed: *Permission denied? << *added the security key, etc
> *Creation failed, terminating gdal_merge.*
>
> -- 
>
> ?Regards,
>
>
> Clive Swan
>
> --
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221129/d860bb9a/attachment.htm>

From robert.coup at koordinates.com  Tue Nov 29 13:45:05 2022
From: robert.coup at koordinates.com (Robert Coup)
Date: Tue, 29 Nov 2022 21:45:05 +0000
Subject: [gdal-dev] Motion: adopt RFC69 C/C++ Code Formatting
In-Reply-To: <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
References: <a5aa47e0-2b1f-f745-25ba-24a8452e7e20@itopen.it>
 <5f391ddb-e54b-488b-dcdd-c015aa98449b@spatialys.com>
Message-ID: <CAFLLRp+3yzyty2H6jtSGGGgqaMFTFwNR9EcuNUKe+cUx4uUqCA@mail.gmail.com>

Hi Even,

On Mon, 28 Nov 2022 at 16:14, Even Rouault <even.rouault at spatialys.com>
wrote:

> The Big reformat commit itself
> should be done with a dedicated github account, like we did with the
> "git mv gdal/* ." tree-reorganisation to avoid unfair commit statistics.


Git supports blame-ignore files [1], which will "Ignore changes made by the
revision when assigning blame, as if the change never happened. Lines that
were changed or added by an ignored commit will be blamed on the previous
commit that changed that line or nearby lines."[2]

Which isn't in the RFC, but should definitely be used. Also means changes
don't have to be a single commit.

I don't know how it affects Github/etc statistics, but presumably it
wouldn't be too difficult to check.

Rob :)

[1]
https://git-scm.com/docs/git-config#Documentation/git-config.txt-blameignoreRevsFile
[2]
https://git-scm.com/docs/git-blame#Documentation/git-blame.txt---ignore-revltrevgt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221129/ad942e83/attachment.htm>

From aborruso at gmail.com  Wed Nov 30 04:00:10 2022
From: aborruso at gmail.com (andy)
Date: Wed, 30 Nov 2022 13:00:10 +0100
Subject: [gdal-dev] PostGIS and ogrinfo: not able to view all the tables of
 a PostGIS schema
Message-ID: <CAHEdGZOy+hGA9XvrX4JHq_i+_DHGPcDPnriX2CUrmHvxZHjEKg@mail.gmail.com>

Hi,
if I run

ogrinfo -ro -so PG:"dbname='arpa_db' host='192.168.xxx.xxx' port='5432'
user='postgres' password='xxxx' schemas=public"

I see 3 tables in the list. The real list contains 32 tables.

If I explore the same schema, with the same credentials, using pgAdmin 4 I
see all 32 tables.

If I run ogrinfo pointing to a table that ogr does not see, I read the info
of that table.

What am I doing wrong using OGR? Why does it not list all 32 tables?

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221130/8958dfaa/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 30 04:53:56 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 30 Nov 2022 13:53:56 +0100
Subject: [gdal-dev] PostGIS and ogrinfo: not able to view all the tables
 of a PostGIS schema
In-Reply-To: <CAHEdGZOy+hGA9XvrX4JHq_i+_DHGPcDPnriX2CUrmHvxZHjEKg@mail.gmail.com>
References: <CAHEdGZOy+hGA9XvrX4JHq_i+_DHGPcDPnriX2CUrmHvxZHjEKg@mail.gmail.com>
Message-ID: <606ae5c9-f6f3-48d9-c9d9-41a10bff1984@spatialys.com>

try adding -oo LIST_ALL_TABLES=YES

cf https://gdal.org/drivers/vector/pg.html#dataset-open-options

Le 30/11/2022 ? 13:00, andy a ?crit?:
> Hi,
> if I run
>
> ogrinfo -ro -so PG:"dbname='arpa_db' host='192.168.xxx.xxx' 
> port='5432' user='postgres' password='xxxx' schemas=public"
>
> I see 3 tables in the list. The real list contains 32 tables.
>
> If I explore the same schema, with the same credentials, using pgAdmin 
> 4 I see all 32 tables.
>
> If I run?ogrinfo pointing to a table that ogr does not see, I read the 
> info of that table.
>
> What am I doing wrong using?OGR? Why does it not list all 32 tables?
>
> Thank you
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221130/11863c4f/attachment.htm>

From aborruso at gmail.com  Wed Nov 30 05:16:22 2022
From: aborruso at gmail.com (andy)
Date: Wed, 30 Nov 2022 14:16:22 +0100
Subject: [gdal-dev] PostGIS and ogrinfo: not able to view all the tables
 of a PostGIS schema
In-Reply-To: <606ae5c9-f6f3-48d9-c9d9-41a10bff1984@spatialys.com>
References: <CAHEdGZOy+hGA9XvrX4JHq_i+_DHGPcDPnriX2CUrmHvxZHjEKg@mail.gmail.com>
 <606ae5c9-f6f3-48d9-c9d9-41a10bff1984@spatialys.com>
Message-ID: <CAHEdGZP==kdDHdP7AjxzygnWmzE+uta0PwikOqw0H1DyMVdYNg@mail.gmail.com>

Thank you

On Wed, 30 Nov 2022 at 13:53, Even Rouault <even.rouault at spatialys.com>
wrote:

> try adding -oo LIST_ALL_TABLES=YES
>

Good answer, to stupid question!


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221130/e84fae5d/attachment-0001.htm>

From daniel.mannarino at gmail.com  Wed Nov 30 07:12:13 2022
From: daniel.mannarino at gmail.com (Daniel Mannarino)
Date: Wed, 30 Nov 2022 10:12:13 -0500
Subject: [gdal-dev] Trouble using TEMPORARY=ON with ogr2ogr
Message-ID: <CAO8qHHGKVmgVGVjr63Pi9R7E5jC7pgHe-QirFbRiRcgj9nsM_g@mail.gmail.com>

Hello!


I'm having trouble using the temporary table option of ogr2ogr:
https://gdal.org/drivers/vector/pg.html#layer-creation-options

Ultimately I am trying to load data from a Shapefile into a temporary
table, enrich the rows in the temporary table, and then copy from the
temporary table into a final table. However I cannot get Postgres and
ogr2ogr to work together. It sounds to me from the logs that they disagree
on the table name. In my example code below I have removed everything that
is to happen after loading the data (enriching, copying) for clarity.


Very little is said about the temporary table option on the web, but from
the source (and Postgres logs) it looks like ogr2ogr assumes a schema of
"pg_temp_1":
https://github.com/OSGeo/gdal/blob/dc39f7d68095621842a2547ab06c60a03fd34a19/ogr/ogrsf_frmts/pg/ogrpgdatasource.cpp#L1865-L1872


It sounds to me from the Postgres docs this isn't safe to assume, but let's
say it is for the moment.


Here is my simplified script:

#!/bin/bash

set -e


PGHOST="<host>"

PGDATABASE="<db>"

PGUSER="<user>"

PGPASSWORD="<pass>"

PGPORT=<port>


LOCAL_FILE="/vsizip/test.shp.zip"

SRC_LAYER="test"

FID_NAME="gfw_fid"

GEOMETRY_NAME="geom"

TEMP_SCHEMA="pg_temp_1"

TEMP_TABLE="bazinga"



ogr2ogr -f "PostgreSQL" PG:"password=$PGPASSWORD host=$PGHOST port=$PGPORT
dbname=$PGDATABASE user=$PGUSER" \

    "$LOCAL_FILE" "$SRC_LAYER" \

    -lco GEOMETRY_NAME="$GEOMETRY_NAME" \

    -lco SPATIAL_INDEX=NONE \

    -lco FID="$FID_NAME" \

    -lco TEMPORARY=ON \

    -nlt PROMOTE_TO_MULTI \

    -nln "$TEMP_SCHEMA.$TEMP_TABLE" \

   -t_srs EPSG:4326 \

    --config PG_USE_COPY YES \

    -makevalid -update


# End of script



Here is the Postgres log from attempting to run this script with the
Shapefile in the PS:


# START LOG

2022-11-28 21:16:51.206 UTC [504] LOG:  statement: set client_encoding to
'UTF8'

2022-11-28 21:16:51.209 UTC [504] LOG:  execute <unnamed>: SHOW
client_encoding

2022-11-28 21:16:51.239 UTC [504] LOG:  execute <unnamed>: SELECT n.nspname
FROM pg_proc p JOIN pg_namespace n ON n.oid = p.pronamespace WHERE proname
= 'postgis_version'

2022-11-28 21:16:51.245 UTC [504] LOG:  execute <unnamed>: SELECT version()

2022-11-28 21:16:51.246 UTC [504] LOG:  execute <unnamed>: SHOW
standard_conforming_strings

2022-11-28 21:16:51.250 UTC [504] LOG:  execute <unnamed>: SELECT oid,
typname FROM pg_type WHERE typname IN ('geometry', 'geography') AND
typtype='b'

2022-11-28 21:16:51.323 UTC [504] LOG:  execute <unnamed>: SELECT
postgis_version()

2022-11-28 21:16:51.326 UTC [504] LOG:  execute <unnamed>: SET
ENABLE_SEQSCAN = ON

2022-11-28 21:16:51.342 UTC [504] LOG:  execute <unnamed>: SELECT 1 FROM
information_schema.tables WHERE table_name = 'geometry_columns' LIMIT 1

2022-11-28 21:16:51.345 UTC [504] LOG:  execute <unnamed>: SELECT 1 FROM
information_schema.tables WHERE table_name = 'spatial_ref_sys' LIMIT 1

2022-11-28 21:16:51.354 UTC [504] LOG:  execute <unnamed>: SELECT
ST_Srid('POINT EMPTY'::GEOMETRY)

2022-11-28 21:16:51.356 UTC [504] LOG:  execute <unnamed>: SELECT
current_schema()

2022-11-28 21:16:51.394 UTC [504] LOG:  execute <unnamed>: BEGIN

2022-11-28 21:16:51.415 UTC [504] LOG:  execute <unnamed>: SELECT c.oid
FROM pg_class c JOIN pg_namespace n ON c.relnamespace=n.oid WHERE c.relname
= 'bazinga' AND n.nspname = 'pg_temp_1'

2022-11-28 21:16:51.418 UTC [504] LOG:  execute <unnamed>: SELECT c.oid
FROM pg_class c JOIN pg_namespace n ON c.relnamespace=n.oid WHERE c.relname
= 'bazinga' AND n.nspname = 'pg_temp_1'

2022-11-28 21:16:51.439 UTC [504] LOG:  execute <unnamed>: SELECT
c.relname, n.nspname, c.relkind, a.attname, t.typname,
postgis_typmod_dims(a.atttypmod) dim, postgis_typmod_srid(a.atttypmod)
srid, postgis_typmod_type(a.atttypmod)::text geomtyp,
array_agg(pg_get_constraintdef(s.oid))::text att_constraints, a.attnotnull,
d.description FROM pg_class c JOIN pg_attribute a ON a.attrelid=c.oid JOIN
pg_namespace n ON c.relnamespace = n.oid AND c.relkind in ('r','v','m','f')
AND NOT ( n.nspname = 'public' AND c.relname = 'raster_columns' ) JOIN
pg_type t ON a.atttypid = t.oid AND (t.typname = 'geometry'::name OR
t.typname = 'geography'::name) LEFT JOIN pg_constraint s ON s.connamespace
= n.oid AND s.conrelid = c.oid AND a.attnum = ANY (s.conkey) AND
(pg_get_constraintdef(s.oid) LIKE '%geometrytype(% = %' OR
pg_get_constraintdef(s.oid) LIKE '%ndims(% = %' OR
pg_get_constraintdef(s.oid) LIKE '%srid(% = %') LEFT JOIN pg_description d
ON d.objoid = c.oid AND d.classoid = 'pg_class'::regclass::oid AND
d.objsubid = 0 GROUP BY c.relname, n.nspname, c.relkind, a.attname,
t.typname, dim, srid, geomtyp, a.attnotnull, c.oid, a.attnum, d.description
ORDER BY c.oid, a.attnum

2022-11-28 21:16:51.452 UTC [504] LOG:  execute <unnamed>: SELECT srid FROM
spatial_ref_sys WHERE auth_name = 'EPSG' AND auth_srid = 4326

2022-11-28 21:16:51.545 UTC [504] LOG:  execute <unnamed>: CREATE TEMPORARY
TABLE "bazinga" ( "gfw_fid" SERIAL, PRIMARY KEY ("gfw_fid"), "fid"
NUMERIC(11,0), "geom" geometry(MULTIPOLYGON,4326) )

2022-11-28 21:16:51.575 UTC [504] LOG:  execute <unnamed>: COMMENT ON TABLE
"pg_temp_1"."bazinga" IS NULL

2022-11-28 21:16:51.575 UTC [504] ERROR:  relation "pg_temp_1.bazinga" does
not exist

2022-11-28 21:16:51.575 UTC [504] STATEMENT:  COMMENT ON TABLE
"pg_temp_1"."bazinga" IS NULL

2022-11-28 21:16:51.585 UTC [504] ERROR:  current transaction is aborted,
commands ignored until end of transaction block

2022-11-28 21:16:51.585 UTC [504] STATEMENT:  COPY "pg_temp_1"."bazinga"
("geom", "fid") FROM STDIN;

2022-11-28 21:16:51.587 UTC [504] LOG:  execute <unnamed>: ROLLBACK


# END LOG



I have tried many variations of quoting the table and schema name to no
avail (including

    -nln "\"$TEMP_SCHEMA\".\"$TEMP_TABLE\"" \

).


I also tried wrapping the whole thing in a transaction by specifying

    -doo PRELUDE_STATEMENTS="BEGIN;" \

    -doo CLOSING_STATEMENTS="COMMIT;" \


Can anyone explain how to get this to work? I actually first tried to
create a temporary table by myself with -doo, but ran into other problems
and will leave that for another thread.


Thanks!

Daniel Mannarino


PS: Here's the Shapefile I'm using:
https://github.com/wri/gfw-data-api/blob/master/tests/fixtures/test.shp.zip

PPS: I am running PostgreSQL 12 (specifically the
postgis/postgis:12-2.5-alpine Docker image) and running ogr2ogr from
Homebrew's GDAL 3.5.3 package on MacOS 12.6 (amd64).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20221130/e6c91da3/attachment.htm>

