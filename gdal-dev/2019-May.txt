From even.rouault at spatialys.com  Wed May  1 07:56:03 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 01 May 2019 16:56:03 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
Message-ID: <9733826.WLrWr22Inj@even-i700>

Hi,

Motion: GDAL/OGR 2.5.0 rc1 is promoted to be the official 2.5.0 final release.

-------

My vote: +1

-------

A few bugs were discovered since rc1 (one of them in the new TileDB driver), 
but none of them are 2.5 specific regressions, so this is just business as 
usual and fixes will go into the first micro release.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Wed May  1 09:20:32 2019
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 1 May 2019 10:20:32 -0600
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <9733826.WLrWr22Inj@even-i700>
References: <9733826.WLrWr22Inj@even-i700>
Message-ID: <CADPhZXwyfRR3GKJmtDHo1KO+-Ah7jp+WaJZb_dpeTx=OLmwvRQ@mail.gmail.com>

Even,

Did you give any more thought to calling this release 3.0 because of the
breaking changes? Too late for that?

On Wed, May 1, 2019 at 8:56 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Motion: GDAL/OGR 2.5.0 rc1 is promoted to be the official 2.5.0 final
> release.
>
> -------
>
> My vote: +1
>
> -------
>
> A few bugs were discovered since rc1 (one of them in the new TileDB
> driver),
> but none of them are 2.5 specific regressions, so this is just business as
> usual and fixes will go into the first micro release.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/5b707e99/attachment.html>

From norman.barker at gmail.com  Wed May  1 10:05:20 2019
From: norman.barker at gmail.com (Norman Barker)
Date: Wed, 1 May 2019 12:05:20 -0500
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <9733826.WLrWr22Inj@even-i700>
References: <9733826.WLrWr22Inj@even-i700>
Message-ID: <CAN_Dn-HqE11+V1SOHPm39dCm_5oQktJAAWp0LBtzjJTDHteh+g@mail.gmail.com>

Hi Even,

who is eligible to vote? FWIW I am +1 if I am eligible.

Norman

On Wed, May 1, 2019 at 9:56 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Motion: GDAL/OGR 2.5.0 rc1 is promoted to be the official 2.5.0 final
> release.
>
> -------
>
> My vote: +1
>
> -------
>
> A few bugs were discovered since rc1 (one of them in the new TileDB
> driver),
> but none of them are 2.5 specific regressions, so this is just business as
> usual and fixes will go into the first micro release.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/d93476ac/attachment.html>

From jmckenna at gatewaygeomatics.com  Wed May  1 10:06:57 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 1 May 2019 14:06:57 -0300
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <9733826.WLrWr22Inj@even-i700>
References: <9733826.WLrWr22Inj@even-i700>
Message-ID: <d0e54a51-3f81-670a-f79d-b56db7b53e4f@gatewaygeomatics.com>

On 2019-05-01 11:56 AM, Even Rouault wrote:
> Hi,
> 
> Motion: GDAL/OGR 2.5.0 rc1 is promoted to be the official 2.5.0 final release.
> 

+1  jeff





From schwehr at gmail.com  Wed May  1 10:07:47 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 1 May 2019 10:07:47 -0700
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <9733826.WLrWr22Inj@even-i700>
References: <9733826.WLrWr22Inj@even-i700>
Message-ID: <CACmBxyuMWmiPbrHHn31drz5yVVC5xMkP-0n7pLFZKSdq0VqAdA@mail.gmail.com>

+1 kurt

On Wed, May 1, 2019 at 7:56 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Motion: GDAL/OGR 2.5.0 rc1 is promoted to be the official 2.5.0 final
> release.
>
> -------
>
> My vote: +1
>
> -------
>
> A few bugs were discovered since rc1 (one of them in the new TileDB
> driver),
> but none of them are 2.5 specific regressions, so this is just business as
> usual and fixes will go into the first micro release.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/5ac4ca60/attachment.html>

From even.rouault at spatialys.com  Wed May  1 10:09:22 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 01 May 2019 19:09:22 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <CADPhZXwyfRR3GKJmtDHo1KO+-Ah7jp+WaJZb_dpeTx=OLmwvRQ@mail.gmail.com>
References: <9733826.WLrWr22Inj@even-i700>
 <CADPhZXwyfRR3GKJmtDHo1KO+-Ah7jp+WaJZb_dpeTx=OLmwvRQ@mail.gmail.com>
Message-ID: <4765005.AECipGI93Y@even-i700>

Sean,

> 
> Did you give any more thought to calling this release 3.0 because of the
> breaking changes? Too late for that?

Yes, that would be a bit annoying to rename it now, at least in terms of 
communication since GDAL 2.5 is already known to be the version with the SRS 
revamp. Would have been more appropriate to raise this at the time RFC 73 was 
discussed.

Re-reading our HOWTO-RELEASE, we should indeed probably have named it GDAL 
3.0. But even if we add kept the few functions that have been removed, the 
change of behaviour of a few ones is an interesting case of what is considered 
part of the API or not...

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed May  1 10:11:42 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 01 May 2019 19:11:42 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <CAN_Dn-HqE11+V1SOHPm39dCm_5oQktJAAWp0LBtzjJTDHteh+g@mail.gmail.com>
References: <9733826.WLrWr22Inj@even-i700>
 <CAN_Dn-HqE11+V1SOHPm39dCm_5oQktJAAWp0LBtzjJTDHteh+g@mail.gmail.com>
Message-ID: <1674673.Gjll1up0LB@even-i700>

On mercredi 1 mai 2019 12:05:20 CEST Norman Barker wrote:
> Hi Even,
> 
> who is eligible to vote? FWIW I am +1 if I am eligible.

This is mentionned in the project steering committee rules of
https://trac.osgeo.org/gdal/wiki/rfc1_pmc

"6. Anyone may comment on proposals on the list, but only members of the 
Project Management Committee's votes will be counted."

So your feedback is welcome.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dmorissette at mapgears.com  Wed May  1 11:22:37 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 1 May 2019 14:22:37 -0400
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <4765005.AECipGI93Y@even-i700>
References: <9733826.WLrWr22Inj@even-i700>
 <CADPhZXwyfRR3GKJmtDHo1KO+-Ah7jp+WaJZb_dpeTx=OLmwvRQ@mail.gmail.com>
 <4765005.AECipGI93Y@even-i700>
Message-ID: <7186fc91-8825-5ad7-e06c-d5068c232a56@mapgears.com>

I have been wondering about calling it 3.0 as well. How much 
communication about 2.5 are you alluding to?

Is it more work to relay that 2.5 had a very short lifespan (i.e. never 
released) and then we went straight to 3.0, or to spend the next few 
years explaining why 2.4 and 2.5 are not compatible?


On 2019-05-01 13:09, Even Rouault wrote:
> Sean,
> 
>>
>> Did you give any more thought to calling this release 3.0 because of the
>> breaking changes? Too late for that?
> 
> Yes, that would be a bit annoying to rename it now, at least in terms of
> communication since GDAL 2.5 is already known to be the version with the SRS
> revamp. Would have been more appropriate to raise this at the time RFC 73 was
> discussed.
> 
> Re-reading our HOWTO-RELEASE, we should indeed probably have named it GDAL
> 3.0. But even if we add kept the few functions that have been removed, the
> change of behaviour of a few ones is an interesting case of what is considered
> part of the API or not...
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From even.rouault at spatialys.com  Wed May  1 11:44:54 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 01 May 2019 20:44:54 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <7186fc91-8825-5ad7-e06c-d5068c232a56@mapgears.com>
References: <9733826.WLrWr22Inj@even-i700> <4765005.AECipGI93Y@even-i700>
 <7186fc91-8825-5ad7-e06c-d5068c232a56@mapgears.com>
Message-ID: <3366643.dUF2krkeID@even-i700>

On mercredi 1 mai 2019 14:22:37 CEST Daniel Morissette wrote:
> I have been wondering about calling it 3.0 as well. How much
> communication about 2.5 are you alluding to?

Here, a few blog posts, twitter, a few bug trackers of other projects. Not a 
massive PR campaign on TV for sure :-)

> 
> Is it more work to relay that 2.5 had a very short lifespan (i.e. never
> released) and then we went straight to 3.0, or to spend the next few
> years explaining why 2.4 and 2.5 are not compatible?

Point taken. I'm going to start a dedicated thread about that.

Even

> 
> On 2019-05-01 13:09, Even Rouault wrote:
> > Sean,
> > 
> >> Did you give any more thought to calling this release 3.0 because of the
> >> breaking changes? Too late for that?
> > 
> > Yes, that would be a bit annoying to rename it now, at least in terms of
> > communication since GDAL 2.5 is already known to be the version with the
> > SRS revamp. Would have been more appropriate to raise this at the time
> > RFC 73 was discussed.
> > 
> > Re-reading our HOWTO-RELEASE, we should indeed probably have named it GDAL
> > 3.0. But even if we add kept the few functions that have been removed, the
> > change of behaviour of a few ones is an interesting case of what is
> > considered part of the API or not...
> > 
> > Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed May  1 11:56:08 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 May 2019 20:56:08 +0200
Subject: [gdal-dev] Should the next version (previously 2.5) be called GDAL
	3.0 ?
Message-ID: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>

Hi,


As a feedback from the previous motion, it appears that GDAL 3.0 would

probably better reflect the API & behaviour changes that have been done,
and

be in accordance with our HOWTO-RELEASE procedure and semantic versionning

rules.


I'm OK with that change.


If we decide for that, the plan would probably be:

- change in docs & other materials the references to 2.5 to 3.0

- create a release/3.0 branch from the HEAD of release/2.5

- abandon release/2.5 branch (that is: backports would be done in
release/3.0,

and for longer support in release/2.4 when appropriate)

- issue a 3.0.0RC1 from that

- call master 3.1dev


Thoughts ?


Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/19b5a0e0/attachment.html>

From warmerdam at pobox.com  Wed May  1 12:09:05 2019
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 1 May 2019 12:09:05 -0700
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
Message-ID: <CA+YzLBdmMsqtacnXz-5kPWxeaytA564r7Y=az0JtPtOArhgvAQ@mail.gmail.com>

Even,

I think calling it 3.0 would be reasonable.

Best regards,
Frank


On Wed, May 1, 2019 at 11:56 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
>
> As a feedback from the previous motion, it appears that GDAL 3.0 would
>
> probably better reflect the API & behaviour changes that have been done,
> and
>
> be in accordance with our HOWTO-RELEASE procedure and semantic versionning
>
> rules.
>
>
> I'm OK with that change.
>
>
> If we decide for that, the plan would probably be:
>
> - change in docs & other materials the references to 2.5 to 3.0
>
> - create a release/3.0 branch from the HEAD of release/2.5
>
> - abandon release/2.5 branch (that is: backports would be done in
> release/3.0,
>
> and for longer support in release/2.4 when appropriate)
>
> - issue a 3.0.0RC1 from that
>
> - call master 3.1dev
>
>
> Thoughts ?
>
>
> Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows |
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/f975b221/attachment.html>

From schwehr at gmail.com  Wed May  1 13:29:46 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 1 May 2019 13:29:46 -0700
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <CA+YzLBdmMsqtacnXz-5kPWxeaytA564r7Y=az0JtPtOArhgvAQ@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
 <CA+YzLBdmMsqtacnXz-5kPWxeaytA564r7Y=az0JtPtOArhgvAQ@mail.gmail.com>
Message-ID: <CACmBxys2nGbO565eQV9Lxun2PNVnJH7sxqBXyWkQLUshsKCcnw@mail.gmail.com>

+1 Calling it 3.0 would definitely help non-developers understand how
different/better things are.

On Wed, May 1, 2019 at 12:09 PM Frank Warmerdam <warmerdam at pobox.com> wrote:

> Even,
>
> I think calling it 3.0 would be reasonable.
>
> Best regards,
> Frank
>
>
> On Wed, May 1, 2019 at 11:56 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>>
>> As a feedback from the previous motion, it appears that GDAL 3.0 would
>>
>> probably better reflect the API & behaviour changes that have been done,
>> and
>>
>> be in accordance with our HOWTO-RELEASE procedure and semantic
>> versionning
>>
>> rules.
>>
>>
>> I'm OK with that change.
>>
>>
>> If we decide for that, the plan would probably be:
>>
>> - change in docs & other materials the references to 2.5 to 3.0
>>
>> - create a release/3.0 branch from the HEAD of release/2.5
>>
>> - abandon release/2.5 branch (that is: backports would be done in
>> release/3.0,
>>
>> and for longer support in release/2.4 when appropriate)
>>
>> - issue a 3.0.0RC1 from that
>>
>> - call master 3.1dev
>>
>>
>> Thoughts ?
>>
>>
>> Even
>>
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows |
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/8dd2c69f/attachment.html>

From jmckenna at gatewaygeomatics.com  Wed May  1 13:36:56 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 1 May 2019 17:36:56 -0300
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
Message-ID: <d73e0e69-0c04-726d-6cba-03308d9ef917@gatewaygeomatics.com>

I like 3.0 as well.  -jeff



On 2019-05-01 3:56 PM, Even Rouault wrote:
> Hi,
> 
> 
> As a feedback from the previous motion, it appears that GDAL 3.0 would
> 
> probably better reflect the API & behaviour changes that have been done, 
> and
> 
> be in accordance with our HOWTO-RELEASE procedure and semantic versionning
> 
> rules.
> 
> 
> I'm OK with that change.
> 
> 
> If we decide for that, the plan would probably be:
> 
> - change in docs & other materials the references to 2.5 to 3.0
> 
> - create a release/3.0 branch from the HEAD of release/2.5
> 
> - abandon release/2.5 branch (that is: backports would be done in 
> release/3.0,
> 
> and for longer support in release/2.4 when appropriate)
> 
> - issue a 3.0.0RC1 from that
> 
> - call master 3.1dev
> 
> 
> Thoughts ?
> 
> 
> Even
> 
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/

From mateusz at loskot.net  Wed May  1 13:46:19 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 1 May 2019 22:46:19 +0200
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
Message-ID: <CABUeae9x2EeUctSpTqESt_1r1wD3-+grrCUXVWzVReqh3kMJJQ@mail.gmail.com>

On Wed, 1 May 2019, 20:56 Even Rouault, <even.rouault at spatialys.com> wrote:

> Hi,
>
>
> As a feedback from the previous motion, it appears that GDAL 3.0 would
>
> probably better reflect the API & behaviour changes that have been done,
> and
>
> be in accordance with our HOWTO-RELEASE procedure and semantic versionning
>
> rules.
>
>
> I'm OK with that change
>


I'm not claiming right to vote here.
Although I haven't been too active as contributor for quite some time, I'm
not indifferent. I'm active user and I do
monitor what's happening and I think calling the next release 3.0 is a good
idea.


Mateusz Loskot, mateusz at loskot.net
(Sent from mobile)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190501/9b6da6ed/attachment.html>

From nyall.dawson at gmail.com  Wed May  1 15:07:04 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 2 May 2019 08:07:04 +1000
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
Message-ID: <CAB28Ash-5vaGa-roWi9mDabW1Z39njir+gevgMNNtohxG7N0=Q@mail.gmail.com>

On Thu, 2 May 2019 at 04:56, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
>
> As a feedback from the previous motion, it appears that GDAL 3.0 would
>
> probably better reflect the API & behaviour changes that have been done, and
>
> be in accordance with our HOWTO-RELEASE procedure and semantic versionning

I'm +1 for this -- I also think that API has changed with the proj
upgrade. Even the removal of support files like the gcs.csv file has
impact on downstream projects which rightly or wrongly depend on this
file (e.g. QGIS).

Is there any other api breaking changes planned if the version does
get bumped to 3.0? Or is it restricted solely to the projection
related api?

Nyall

From dmorissette at mapgears.com  Wed May  1 18:50:22 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 1 May 2019 21:50:22 -0400
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
Message-ID: <b704e6cf-3404-598c-46a1-cc5e4e14157a@mapgears.com>

+1 to calling it 3.0 and to your proposed plan.

Thank you Even.

Daniel


On 2019-05-01 14:56, Even Rouault wrote:
> Hi,
> 
> 
> As a feedback from the previous motion, it appears that GDAL 3.0 would
> 
> probably better reflect the API & behaviour changes that have been done, 
> and
> 
> be in accordance with our HOWTO-RELEASE procedure and semantic versionning
> 
> rules.
> 
> 
> I'm OK with that change.
> 
> 
> If we decide for that, the plan would probably be:
> 
> - change in docs & other materials the references to 2.5 to 3.0
> 
> - create a release/3.0 branch from the HEAD of release/2.5
> 
> - abandon release/2.5 branch (that is: backports would be done in 
> release/3.0,
> 
> and for longer support in release/2.4 when appropriate)
> 
> - issue a 3.0.0RC1 from that
> 
> - call master 3.1dev
> 
> 
> Thoughts ?
> 
> 
> Even
> 
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From me at komzpa.net  Wed May  1 22:00:15 2019
From: me at komzpa.net (=?UTF-8?Q?Darafei_=22Kom=D1=8Fpa=22_Praliaskouski?=)
Date: Thu, 2 May 2019 08:00:15 +0300
Subject: [gdal-dev] Should the next version (previously 2.5) be called
 GDAL 3.0 ?
In-Reply-To: <b704e6cf-3404-598c-46a1-cc5e4e14157a@mapgears.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
 <b704e6cf-3404-598c-46a1-cc5e4e14157a@mapgears.com>
Message-ID: <CAC8Q8tKkZeL_izFZM1n2nKWZ6t+ruJqaB6Cn2RPg870oy10_qQ@mail.gmail.com>

It's a year of major version bump in GIS. Proj 6 (2x3), PostGIS 3, possibly
pgRouting 3. Three is a popular GIS version number this year.

I'd +1. Only question is whether you have plans for even more major API
breaks this year, so that 3.0 sticks for a little while.

On Thu, May 2, 2019 at 4:56 AM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1 to calling it 3.0 and to your proposed plan.
>
> Thank you Even.
>
> Daniel
>
>
> On 2019-05-01 14:56, Even Rouault wrote:
> > Hi,
> >
> >
> > As a feedback from the previous motion, it appears that GDAL 3.0 would
> >
> > probably better reflect the API & behaviour changes that have been done,
> > and
> >
> > be in accordance with our HOWTO-RELEASE procedure and semantic
> versionning
> >
> > rules.
> >
> >
> > I'm OK with that change.
> >
> >
> > If we decide for that, the plan would probably be:
> >
> > - change in docs & other materials the references to 2.5 to 3.0
> >
> > - create a release/3.0 branch from the HEAD of release/2.5
> >
> > - abandon release/2.5 branch (that is: backports would be done in
> > release/3.0,
> >
> > and for longer support in release/2.4 when appropriate)
> >
> > - issue a 3.0.0RC1 from that
> >
> > - call master 3.1dev
> >
> >
> > Thoughts ?
> >
> >
> > Even
> >
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Darafei Praliaskouski
Support me: http://patreon.com/komzpa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190502/29e2b218/attachment.html>

From even.rouault at spatialys.com  Thu May  2 00:43:37 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 May 2019 09:43:37 +0200
Subject: [gdal-dev] Should the next version (previously 2.5) be called
	GDAL 3.0 ?
In-Reply-To: <CAB28Ash-5vaGa-roWi9mDabW1Z39njir+gevgMNNtohxG7N0=Q@mail.gmail.com>
References: <CALxNk+=CTmHnunU9eNpTdob3PvdWsRaac5bz2d6LJoNa_29+Aw@mail.gmail.com>
 <CAB28Ash-5vaGa-roWi9mDabW1Z39njir+gevgMNNtohxG7N0=Q@mail.gmail.com>
Message-ID: <2169567.NonPqLXrtK@even-i700>

> Is there any other api breaking changes planned if the version does
> get bumped to 3.0? Or is it restricted solely to the projection
> related api?

Well, I was about *releasing* the version, and don't intend to postpone it 
significantly, so no there won't be any surprise last-minute changes than the 
ones already documented in MIGRATION_GUIDE.TXT. After all, major version 
numbers are cheap, so if during the next dev cycle 3.1dev turns out to need 
API breaks, it will be 4.0 ...

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu May  2 00:45:03 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 May 2019 09:45:03 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.5.0 rc1 for release
In-Reply-To: <9733826.WLrWr22Inj@even-i700>
References: <9733826.WLrWr22Inj@even-i700>
Message-ID: <2569078.3VACuzBghn@even-i700>

On mercredi 1 mai 2019 16:56:03 CEST Even Rouault wrote:
> Hi,
> 
> Motion: GDAL/OGR 2.5.0 rc1 is promoted to be the official 2.5.0 final
> release.
> 

Due to the discussion about adopting 3.0 as version number instead, I change 
my vote to -1 and withdraw this motion.

I'll prepare a 3.0.0RC1

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mncedlayiya at gmail.com  Thu May  2 06:11:03 2019
From: mncedlayiya at gmail.com (Mncedi Dlayiya)
Date: Thu, 2 May 2019 15:11:03 +0200
Subject: [gdal-dev] Fwd: ogr2ogr
In-Reply-To: <CAF3eCOQE73HcGH-w2VJV5y7TxNfBRJnGiFnEzAMQsvoMcMMx4A@mail.gmail.com>
References: <CAF3eCOQE73HcGH-w2VJV5y7TxNfBRJnGiFnEzAMQsvoMcMMx4A@mail.gmail.com>
Message-ID: <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>

Hello everyone,

I am new in GDAL so I'm struggling to convert a wfs to shapefile using
ogr2ogr.

my command is as follows:

C:\>ogr2ogr -f "ESRI SHAPEFILE" ec_pensioners WFS:"
http://localhost:8080/geoserver/osw?" pensioners


   - ec_pensioners is the name of the wfs layer
   - pensioners is the output layer
   - " http://localhost:8080/geoserver/osw?" is where the layer is hosted


The error message I get:

FAILURE:
Unable to open datasource `WFS: http://localhost:8080/geoserver/osw?' with
the following drivers.
  -> `JP2ECW'
  -> `OCI'
  -> `SOSI'
  -> `PCIDSK'
  -> `netCDF'
  -> `JP2OpenJPEG'
  -> `PDF'
  -> `MBTiles'
  -> `EEDA'
  -> `DB2ODBC'
  -> `ESRI Shapefile'
  -> `MapInfo File'
  -> `UK .NTF'
  -> `OGR_SDTS'
  -> `S57'
  -> `DGN'
  -> `OGR_VRT'
  -> `REC'
  -> `Memory'
  -> `BNA'
  -> `CSV'
  -> `NAS'
  -> `GML'
  -> `GPX'
  -> `LIBKML'
  -> `KML'
  -> `GeoJSON'
  -> `GeoJSONSeq'
  -> `ESRIJSON'
  -> `TopoJSON'
  -> `Interlis 1'
  -> `Interlis 2'
  -> `OGR_GMT'
  -> `GPKG'
  -> `SQLite'
  -> `ODBC'
  -> `WAsP'
  -> `PGeo'
  -> `MSSQLSpatial'
  -> `OGR_OGDI'
  -> `PostgreSQL'
  -> `MySQL'
  -> `OpenFileGDB'
  -> `XPlane'
  -> `DXF'
  -> `CAD'
  -> `Geoconcept'
  -> `GeoRSS'
  -> `GPSTrackMaker'
  -> `VFK'
  -> `PGDUMP'
  -> `OSM'
  -> `GPSBabel'
  -> `SUA'
  -> `OpenAir'
  -> `OGR_PDS'
  -> `WFS'
  -> `WFS3'
  -> `HTF'
  -> `AeronavFAA'
  -> `Geomedia'
  -> `EDIGEO'
  -> `GFT'
  -> `SVG'
  -> `CouchDB'
  -> `Cloudant'
  -> `Idrisi'
  -> `ARCGEN'
  -> `SEGUKOOA'
  -> `SEGY'
  -> `XLS'
  -> `ODS'
  -> `XLSX'
  -> `ElasticSearch'
  -> `Walk'
  -> `Carto'
  -> `AmigoCloud'
  -> `SXF'
  -> `Selafin'
  -> `JML'
  -> `PLSCENES'
  -> `CSW'
  -> `VDV'
  -> `GMLAS'
  -> `MVT'
  -> `TIGER'
  -> `AVCBin'
  -> `AVCE00'
  -> `NGW'
  -> `HTTP'

Thank you in advance

Mncedi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190502/96e4f0d9/attachment.html>

From even.rouault at spatialys.com  Thu May  2 06:20:51 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 May 2019 15:20:51 +0200
Subject: [gdal-dev] Fwd: ogr2ogr
In-Reply-To: <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>
References: <CAF3eCOQE73HcGH-w2VJV5y7TxNfBRJnGiFnEzAMQsvoMcMMx4A@mail.gmail.com>
 <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>
Message-ID: <19224155.BLj9PEoWJn@even-i700>

On jeudi 2 mai 2019 15:11:03 CEST Mncedi Dlayiya wrote:
> Hello everyone,
> 
> I am new in GDAL so I'm struggling to convert a wfs to shapefile using
> ogr2ogr.

>From the error message, it seems there's an extra space between WFS: ad 
http:// . Try to quote the whole WFS connection string

"WFS:http://localhost:8080/geoserver/osw?"

And the osw entry point is suspicious. Shouldn't that be ows (acronym for OGC 
Web Services) instead ?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Thu May  2 06:47:14 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 2 May 2019 06:47:14 -0700 (MST)
Subject: [gdal-dev] Fwd: ogr2ogr
In-Reply-To: <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>
References: <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>
Message-ID: <1556804834651-0.post@n6.nabble.com>

Mncedi Dlayiya wrote
> Hello everyone,
> 
> I am new in GDAL so I'm struggling to convert a wfs to shapefile using
> ogr2ogr.
> 
> my command is as follows:
> 
> C:\>ogr2ogr -f "ESRI SHAPEFILE" ec_pensioners WFS:"
> http://localhost:8080/geoserver/osw?" pensioners

Hi,

And my command that works with the demo layer "states" (actually
"topp:states") is

ogr2ogr -f "ESRI Shapefile" test.shp 
WFS:"http://localhost:8080/geoserver/ows?" states 

Notices:

- Check the url of your service (osw vs. ows)
- Output name "test" should perhaps work and create a new directory and
insert shapefile into that. However, I got a directory "test" and an empty
file "topp" inside it. If your intention is not to write into a named
directory use "ec_pensioners.shp" as output.

-Jukka Rahkonen-





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Thu May  2 06:57:45 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 2 May 2019 10:57:45 -0300
Subject: [gdal-dev] Fwd: ogr2ogr
In-Reply-To: <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>
References: <CAF3eCOQE73HcGH-w2VJV5y7TxNfBRJnGiFnEzAMQsvoMcMMx4A@mail.gmail.com>
 <CAF3eCOROfht5FkrfNNFQHD8evk+2FLs3wzqkNu2w79tExdX=Jg@mail.gmail.com>
Message-ID: <5c5bee8a-1daf-ce94-0cf8-42ff2260b536@gatewaygeomatics.com>

Hi Mncedi,

Welcome to GDAL !

Here is how I recommend working through that (using a working example) :

Step 1:  ogrinfo
----------------

Always always start with an ogrinfo command, to see the available layer 
names:

	ogrinfo WFS:https://demo.gatewaygeomatics.com/cgi-bin/wfs_gateway


	returns:

		using driver `WFS' successful.
		1: ms:park

Great! We now know the layer name is called "ms:park"

Step 2: ogrinfo + layername
---------------------------

Next, see if ogrinfo can return info about that ms:park layer:

	ogrinfo WFS:https://demo.gatewaygeomatics.com/cgi-bin/wfs_gateway 
ms:park -summary

	returns:

		using driver `WFS' successful.
		Layer name: ms:park
			Metadata:
   				TITLE=Parks
				Geometry: Unknown (any)
				Feature Count: 46
				Extent: (-2346804.000000, -67422.421875) - (2840366.000000, 
3830124.250000)
				Layer SRS WKT:
				PROJCS["NAD83 / Canada Atlas Lambert"

Great! ogrinfo gave us info about our layer

Step 3: ogr2ogr + layername
---------------------------

Notice that the syntax is something like:  ogr2ogr output input layername :

	ogr2ogr -f "ESRI Shapefile" parks.shp 
WFS:https://demo.gatewaygeomatics.com/cgi-bin/wfs_gateway ms:park



Tested using MS4W 4.0 https://ms4w.com

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/

On 2019-05-02 10:11 AM, Mncedi Dlayiya wrote:
> Hello everyone,
> 
> I am new in GDAL so I'm struggling to convert a wfs to shapefile using 
> ogr2ogr.
> 
> my command is as follows:
> 
> C:\>ogr2ogr -f "ESRI SHAPEFILE" ec_pensioners WFS:" 
> http://localhost:8080/geoserver/osw?" pensioners
> 
>   * ec_pensioners is the name of the wfs layer
>   * pensioners is the output layer
>   * " http://localhost:8080/geoserver/osw?" is where the layer is hosted 
> 
> 
> The error message I get:
> 
> FAILURE:
> Unable to open datasource `WFS: http://localhost:8080/geoserver/osw?' 
> with the following drivers.
>    -> `JP2ECW'
>    -> `OCI'
>    -> `SOSI'
>    -> `PCIDSK'
>    -> `netCDF'
>    -> `JP2OpenJPEG'
>    -> `PDF'
>    -> `MBTiles'
>    -> `EEDA'
>    -> `DB2ODBC'
>    -> `ESRI Shapefile'
>    -> `MapInfo File'
>    -> `UK .NTF'
>    -> `OGR_SDTS'
>    -> `S57'
>    -> `DGN'
>    -> `OGR_VRT'
>    -> `REC'
>    -> `Memory'
>    -> `BNA'
>    -> `CSV'
>    -> `NAS'
>    -> `GML'
>    -> `GPX'
>    -> `LIBKML'
>    -> `KML'
>    -> `GeoJSON'
>    -> `GeoJSONSeq'
>    -> `ESRIJSON'
>    -> `TopoJSON'
>    -> `Interlis 1'
>    -> `Interlis 2'
>    -> `OGR_GMT'
>    -> `GPKG'
>    -> `SQLite'
>    -> `ODBC'
>    -> `WAsP'
>    -> `PGeo'
>    -> `MSSQLSpatial'
>    -> `OGR_OGDI'
>    -> `PostgreSQL'
>    -> `MySQL'
>    -> `OpenFileGDB'
>    -> `XPlane'
>    -> `DXF'
>    -> `CAD'
>    -> `Geoconcept'
>    -> `GeoRSS'
>    -> `GPSTrackMaker'
>    -> `VFK'
>    -> `PGDUMP'
>    -> `OSM'
>    -> `GPSBabel'
>    -> `SUA'
>    -> `OpenAir'
>    -> `OGR_PDS'
>    -> `WFS'
>    -> `WFS3'
>    -> `HTF'
>    -> `AeronavFAA'
>    -> `Geomedia'
>    -> `EDIGEO'
>    -> `GFT'
>    -> `SVG'
>    -> `CouchDB'
>    -> `Cloudant'
>    -> `Idrisi'
>    -> `ARCGEN'
>    -> `SEGUKOOA'
>    -> `SEGY'
>    -> `XLS'
>    -> `ODS'
>    -> `XLSX'
>    -> `ElasticSearch'
>    -> `Walk'
>    -> `Carto'
>    -> `AmigoCloud'
>    -> `SXF'
>    -> `Selafin'
>    -> `JML'
>    -> `PLSCENES'
>    -> `CSW'
>    -> `VDV'
>    -> `GMLAS'
>    -> `MVT'
>    -> `TIGER'
>    -> `AVCBin'
>    -> `AVCE00'
>    -> `NGW'
>    -> `HTTP'
> 
> Thank you in advance
> 
> Mncedi
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From even.rouault at spatialys.com  Thu May  2 10:01:32 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 May 2019 19:01:32 +0200
Subject: [gdal-dev] GDAL 3.0.0 RC1 available
Message-ID: <14419329.i7XOGsPGoD@even-i700>

Hi,

I've issued a release candidate for GDAL 3.0.0.

The changes sinces 2.5.0RC1 are:
* TileDB: set row-major reads and removed adviseread (fixes #1479)
* TileDB: Added support for raster band metadata
* TileDB: recreated test array for band re-order (fixes #1490)
* gdal_contour: remove explicit width/precision=12/3 of the elev field (fixes 
#1487)
* GTiff: do not generate a TIFFTAG_GDAL_METADATA with color interpretation 
information for JPEG YCbCr compression
* OGR_PDS: fix heap-buffer-overflow in error code path. Fixes https://
bugs.chromium.org/p/oss-fuzz/issues/detail?id=14512. Credit to OSS Fuzz
* Change mentions of GDAL 2.5 to GDAL 3.0
* gcore/gdal_version.h.in: set to 3.0.0
* GeoJSON: report 3D layer geometry types (fixes #1495)
* GTiff driver: ensure that main dataset and overviews share the same lock, so 
as to avoid crashing concurrent access (fixes #1488)
* GPKG, MBTiles, PostgisRaster drivers: share lock of overview dataset with 
parent dataset (refs #1488)

The source is available at:

    http://download.osgeo.org/gdal/3.0.0/gdal-3.0.0rc1.tar.xz
    http://download.osgeo.org/gdal/3.0.0/gdal-3.0.0rc1.tar.gz
    http://download.osgeo.org/gdal/3.0.0/gdal300rc1.zip

A snapshot of the Python autotest suite can be downloaded from:

    http://download.osgeo.org/gdal/3.0.0/gdalautotest-3.0.0rc1.tar.gz
    http://download.osgeo.org/gdal/3.0.0/gdalautotest-3.0.0rc1.zip

The GDAL-GRASS plugin:

    http://download.osgeo.org/gdal/3.0.0/gdal-grass-3.0.0.tar.gz

Snapshot of the documentation :

    http://download.osgeo.org/gdal/3.0.0/gdal300doc.zip

The NEWS page has been updated:

   https://trac.osgeo.org/gdal/wiki/Release/3.0.0-News


I'll call for a vote to promote it to final beginning of next week if nothing 
serious is reported before.

As stated in the previous thread about 3.0, the release/2.5 branch is now 
abandonned (I've setup a branch protection rule on GitHub which should prevent 
anyone from pushing into it) and release/3.0 should be used instead.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri May  3 01:04:36 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 03 May 2019 10:04:36 +0200
Subject: [gdal-dev] Upcoming Cloud Optimized Geotiff (COG) related
	enhancements
Message-ID: <42081947.AsHn9XMMPI@even-i700>

Hi,

I wanted to mention COG related enhancements (*) that I will work on in GDAL 
in the coming weeks, so interested parties are aware of them and can 
potentially react.

1) Creation of a dedicated COG creation-only driver simplifying the creation 
workflow. Currently, creating a COG involves a number of steps, using gdaladdo 
and gdal_translate with the right arguments. For very large COG files, 
invoking gdaladdo in an efficient way can be tricky (.ovr.ovr trick: https://
github.com/OSGeo/gdal/issues/1442). The driver will take care of creating 
needed temporary overviews.

2) The driver will offer integrated reprojection capabilities, and in 
particular a WebMercator/GoogleMapsCompatible tiling scheme profile (as 
defined in WMTS), so that TIFF tiles exactly match GoogleMapsCompatible ones. 
This will be similar to the corresponding option of GeoPackage. With a 
subtelty that due to how GeoTIFF overviews work, it is not possible to have 
this alignment on the tiling scheme for all zoom levels. So the user will 
define how many zoom levels starting from the full resolution image must be 
aligned (if N is the number of aligned levels, up to 2^N padding tiles in 
horizontal and vertical dimensions are needed for the full resolution image, 
so N should be kept reasonably small)

3) gdalwarp will be enhanced to allow output to drivers that have only 
CreateCopy() capabilities such as the COG driver. It will try to avoid 
materializing the intermediate file when possible by using VRT capabilities, 
otherwise it will have to create a temporary TIFF file before creating 
CreateCopy()

4) Optimizations specific to JPEG-compressed imagery (YCbCr color space) with 
a 1-bit transparency channel, to minimize the number of HTTP range requests 
needed to read them.
As JPEG compression cannot include the transparency information, two TIFF IFD 
have to be created: one for YCbCr, and another one for alpha. Currently the 
COPY_SRC_OVERVIEWS=YES creation option of the GeoTIFF driver separates data 
for all the tiles of the color channels from data for all the tiles of the 
transparency channel. In practice, readers will generally want to access, for 
a same location, to data of both color and transparency channels. I will 
modify the writer to interleave blocks so that color and transparency 
information are contiguous. If COLOR_X_Y designates the tile with color 
information at coordinates X,Y (in tile coordinate space), the layout of data 
in the file will be: COLOR_0_0, TRANSPARENCY_0_0, COLOR_1_0, TRANSPARENCY_1_0, 
etc. The GeoTIFF driver will be improved to fetch together the color and 
transparency channel when such a layout is detected.

A further improvement is to be able to avoid completely to read the 
TileByteCount array of the color channel, and the TileByteCount & TileOffset 
arrays of the transparency channel. The trick is to reserve 4 bytes before the 
start of each COLOR_X_Y tile to indicate its size (those bytes will be 
'ghost', that is not in the range of data pointed by TileByCount&TileOffset). 
An optimized reader wanting to read tile i=Y*nb_tiles_in_width+X will start by 
reading the offsets of tile i and i+1: TileOffset_color[i] and 
TileOffset_color[i+1]. It will then seek to TileOffset_color[i] – 4 and read 4 
+ TileOffset_color[i+1] – TileOffset_color[i] bytes in a buffer. The first 4 
bytes of this buffer will indicate the number of bytes of the color tile, and 
thus it is possible to deduce the offset and size of the mask tile that is 
located at the end of the buffer. A TIFF metadata item will be written to 
indicate that such layout has been used (with an indication of the file size 
so as to be able to detect if the file has been later be altered in a non-
optimized way), so that optimized readers can adopt the above described 
behavior. This will require to extend the libtiff interface so that the user 
can directly provide the input buffer to decompress.
As the file will remain fully TIFF/BIGTIFF compliant, non-optimized readers 
(such as newer GDAL builds against an older external libtiff version, or 
previous GDAL versions) will still be able read it, loading values from the 4 
arrays instead of just one. 
Note: for other compressions types, a simpler version of the above 
optimization can still be done, by using TileOffset[i] and TileOffset[i+1], 
and saving the read of TileByteCount[i]
To sum up, with the improvements of this task, once the initial loading of 
metadata has been done, a GDAL ReadBlock(x,y) request will cause only two 
networks range requests: one to read TileOffset[i] and TileOffset[i+1] 
(potentially already cached if neighboring tiles have been previously accessed 
in the same process), and another one to read the imagery (+mask) data. 
Whereas currently, 6 might be needed for JPEG YcbCr+mask.

5) Optimizing the layout of the header of a COG file

The current layout of the header part of COG file is:
- TIFF / BigTIFF signature, followed by the offset of the first IFD (Image 
File Directory)
- IFD of full resolution image, that is the list of the tags and their value 
when it consists of a single numeric value, followed by the offset of the next 
- IFD. Its size is 2 + number_of_tags * 12 + 4 (or 2 + number_of_tags * 20 + 
8) bytes, so typically 200 bytes maximum
- Values of TIFF tags that don't fit inline in the IFD directory, such as 
TileOffsets and TileByteCounts arrays and GeoTIFF keys 
- IFD of first overview (typically subsampled by a factor of 2)
- Values of its tags that don't fit inline 
- ...
-IFD of last overview
- Values of its tags that don't fit inline 

When the COG file is not too large, the fact of having the TileOffsets and 
TileByteCounts between IFD descriptors is not an issue since they are not too 
large, and most TIFF readers will load their values when opening the IFD. But 
for an optimized reader such as GDAL with internal libtiff support (or with 
external libtiff after the optimization of task 4), loading the values of the 
TileOffsets/TileByteCounts arrays is only needed when accessing imagery.

A more efficient layout for network access is :
- TIFF / BigTIFF signature, followed by the offset of the first IFD
- IFD of full resolution image, followed by the value of its non-inline tags, 
except  TileOffsets/TileByteCounts
- IFD of first overview followed by the value of its non-inline tags, except  
- TileOffsets/TileByteCounts
- IFD of last overview followed by the value of its non-inline tags, except  
TileOffsets/TileByteCounts
- Values of the TileOffsets/TileByteCounts arrays of IFD of full resolution 
image
- Values of the TileOffsets/TileByteCounts arrays of IFD of first overview
- ...
- Values of the TileOffsets/TileByteCounts arrays of IFD of last overview

With such a structure, the initial reading of 16 KB at the start of the file 
will be able to load the IFD descriptors of all overviews (and masks, which 
are actually interleaved in between when present). So, combined together with 
task 4, a cold read of a tile at any zoom level (ie opening the file + tile 
request) could result in just 3 network range requests: one to get the IFD 
descriptors at the start of the file, one to read the location of the tile 
from the TileOffsets array and one to read the tile data.
The proposed structure itself is still fully TIFF compliant. The script that 
validates the COG structure will be adapted to accept that new variant of the 
header structure.

Even

(*) Funding by Land Information New Zealand / https://www.linz.govt.nz/

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From esther.cardoso at terras.agr.br  Fri May  3 04:47:43 2019
From: esther.cardoso at terras.agr.br (E.C)
Date: Fri, 3 May 2019 04:47:43 -0700 (MST)
Subject: [gdal-dev] Convert Gray scale large multiband geotiff file to
 multiband RGBA with Python
Message-ID: <1556884063102-0.post@n6.nabble.com>

Hello,

I'm new to GIS/GDAL. I'm working with 33-band geotiff files, with each band
representing data from 1 year. Currently, our application accesses a local
color map, which isn't efficient enough, so I'm trying to find a quick way
(Shell or Python) to apply color and categories to the tiff files. I have
tried 2 approaches:
First, I tried editing the vrt file with a python script, then converting it
back to tiff, but received the error "Unable to export color table to
GeoTIFF file. Color tables can only be written to 1 band or 2 bands Byte or
UInt16 GeoTIFF files.".
Then, I tried separating each band, then merging them together, but the
categories disappeared from the output file.
Is there any way to do that conversion?

Here's a sample of the data I'm working with:
original file:
https://drive.google.com/open?id=1-eFqk-6UJ9yQn1aEt1OJ_ElWmcAEvE9-

1-band vrt file with desirable output: 
https://drive.google.com/open?id=1Cf7EVavyN6mmPoxLlO560Jpxyyks1VTt

Best regards.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From vincent.sarago at gmail.com  Fri May  3 05:40:37 2019
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Fri, 3 May 2019 08:40:37 -0400
Subject: [gdal-dev] Upcoming Cloud Optimized Geotiff (COG) related
 enhancements
In-Reply-To: <42081947.AsHn9XMMPI@even-i700>
References: <42081947.AsHn9XMMPI@even-i700>
Message-ID: <6D713FDF-D039-4E41-912F-B29F536237D8@gmail.com>

Hi Even,
This looks great and I’m really looking for point 4 and 5.

> Le 3 mai 2019 à 04:04, Even Rouault <even.rouault at spatialys.com> a écrit :
> 
> Hi,
> 
> I wanted to mention COG related enhancements (*) that I will work on in GDAL 
> in the coming weeks, so interested parties are aware of them and can 
> potentially react.
> 
> 1) Creation of a dedicated COG creation-only driver simplifying the creation 
> workflow. Currently, creating a COG involves a number of steps, using gdaladdo 
> and gdal_translate with the right arguments. For very large COG files, 
> invoking gdaladdo in an efficient way can be tricky (.ovr.ovr trick: https://
> github.com/OSGeo/gdal/issues/1442). The driver will take care of creating 
> needed temporary overviews.
> 
> 2) The driver will offer integrated reprojection capabilities, and in 
> particular a WebMercator/GoogleMapsCompatible tiling scheme profile (as 
> defined in WMTS), so that TIFF tiles exactly match GoogleMapsCompatible ones. 
> This will be similar to the corresponding option of GeoPackage. With a 
> subtelty that due to how GeoTIFF overviews work, it is not possible to have 
> this alignment on the tiling scheme for all zoom levels. So the user will 
> define how many zoom levels starting from the full resolution image must be 
> aligned (if N is the number of aligned levels, up to 2^N padding tiles in 
> horizontal and vertical dimensions are needed for the full resolution image, 
> so N should be kept reasonably small)
> 
> 3) gdalwarp will be enhanced to allow output to drivers that have only 
> CreateCopy() capabilities such as the COG driver. It will try to avoid 
> materializing the intermediate file when possible by using VRT capabilities, 
> otherwise it will have to create a temporary TIFF file before creating 
> CreateCopy()

About point 1, 2, 3 I have mixed feeling because to me it seems that we will introduce a new driver to replace the combination of gdal commands (disclaimer as one of the creator of rio-cogeo I may not be fully objective here). 


> 4) Optimizations specific to JPEG-compressed imagery (YCbCr color space) with 
> a 1-bit transparency channel, to minimize the number of HTTP range requests 
> needed to read them.
> As JPEG compression cannot include the transparency information, two TIFF IFD 
> have to be created: one for YCbCr, and another one for alpha. Currently the 
> COPY_SRC_OVERVIEWS=YES creation option of the GeoTIFF driver separates data 
> for all the tiles of the color channels from data for all the tiles of the 
> transparency channel. In practice, readers will generally want to access, for 
> a same location, to data of both color and transparency channels. I will 
> modify the writer to interleave blocks so that color and transparency 
> information are contiguous. If COLOR_X_Y designates the tile with color 
> information at coordinates X,Y (in tile coordinate space), the layout of data 
> in the file will be: COLOR_0_0, TRANSPARENCY_0_0, COLOR_1_0, TRANSPARENCY_1_0, 
> etc. The GeoTIFF driver will be improved to fetch together the color and 
> transparency channel when such a layout is detected.

Why this is specific to JPEG compression, what about other compressed format with internal mask ? 

> A further improvement is to be able to avoid completely to read the 
> TileByteCount array of the color channel, and the TileByteCount & TileOffset 
> arrays of the transparency channel. The trick is to reserve 4 bytes before the 
> start of each COLOR_X_Y tile to indicate its size (those bytes will be 
> 'ghost', that is not in the range of data pointed by TileByCount&TileOffset). 
> An optimized reader wanting to read tile i=Y*nb_tiles_in_width+X will start by 
> reading the offsets of tile i and i+1: TileOffset_color[i] and 
> TileOffset_color[i+1]. It will then seek to TileOffset_color[i] – 4 and read 4 
> + TileOffset_color[i+1] – TileOffset_color[i] bytes in a buffer. The first 4 
> bytes of this buffer will indicate the number of bytes of the color tile, and 
> thus it is possible to deduce the offset and size of the mask tile that is 
> located at the end of the buffer. A TIFF metadata item will be written to 
> indicate that such layout has been used (with an indication of the file size 
> so as to be able to detect if the file has been later be altered in a non-
> optimized way), so that optimized readers can adopt the above described 
> behavior. This will require to extend the libtiff interface so that the user 
> can directly provide the input buffer to decompress.
> As the file will remain fully TIFF/BIGTIFF compliant, non-optimized readers 
> (such as newer GDAL builds against an older external libtiff version, or 
> previous GDAL versions) will still be able read it, loading values from the 4 
> arrays instead of just one. 
> Note: for other compressions types, a simpler version of the above 
> optimization can still be done, by using TileOffset[i] and TileOffset[i+1], 
> and saving the read of TileByteCount[i]
> To sum up, with the improvements of this task, once the initial loading of 
> metadata has been done, a GDAL ReadBlock(x,y) request will cause only two 
> networks range requests: one to read TileOffset[i] and TileOffset[i+1] 
> (potentially already cached if neighboring tiles have been previously accessed 
> in the same process), and another one to read the imagery (+mask) data. 
> Whereas currently, 6 might be needed for JPEG YcbCr+mask.
> 
> 5) Optimizing the layout of the header of a COG file
> 
> The current layout of the header part of COG file is:
> - TIFF / BigTIFF signature, followed by the offset of the first IFD (Image 
> File Directory)
> - IFD of full resolution image, that is the list of the tags and their value 
> when it consists of a single numeric value, followed by the offset of the next 
> - IFD. Its size is 2 + number_of_tags * 12 + 4 (or 2 + number_of_tags * 20 + 
> 8) bytes, so typically 200 bytes maximum
> - Values of TIFF tags that don't fit inline in the IFD directory, such as 
> TileOffsets and TileByteCounts arrays and GeoTIFF keys 
> - IFD of first overview (typically subsampled by a factor of 2)
> - Values of its tags that don't fit inline 
> - ...
> -IFD of last overview
> - Values of its tags that don't fit inline 
> 
> When the COG file is not too large, the fact of having the TileOffsets and 
> TileByteCounts between IFD descriptors is not an issue since they are not too 
> large, and most TIFF readers will load their values when opening the IFD. But 
> for an optimized reader such as GDAL with internal libtiff support (or with 
> external libtiff after the optimization of task 4), loading the values of the 
> TileOffsets/TileByteCounts arrays is only needed when accessing imagery.
> 
> A more efficient layout for network access is :
> - TIFF / BigTIFF signature, followed by the offset of the first IFD
> - IFD of full resolution image, followed by the value of its non-inline tags, 
> except  TileOffsets/TileByteCounts
> - IFD of first overview followed by the value of its non-inline tags, except  
> - TileOffsets/TileByteCounts
> - IFD of last overview followed by the value of its non-inline tags, except  
> TileOffsets/TileByteCounts
> - Values of the TileOffsets/TileByteCounts arrays of IFD of full resolution 
> image
> - Values of the TileOffsets/TileByteCounts arrays of IFD of first overview
> - ...
> - Values of the TileOffsets/TileByteCounts arrays of IFD of last overview
> 
> With such a structure, the initial reading of 16 KB at the start of the file 
> will be able to load the IFD descriptors of all overviews (and masks, which 
> are actually interleaved in between when present). So, combined together with 
> task 4, a cold read of a tile at any zoom level (ie opening the file + tile 
> request) could result in just 3 network range requests: one to get the IFD 
> descriptors at the start of the file, one to read the location of the tile 
> from the TileOffsets array and one to read the tile data.
> The proposed structure itself is still fully TIFF compliant. The script that 
> validates the COG structure will be adapted to accept that new variant of the 
> header structure.
> 
> Even
> 
> (*) Funding by Land Information New Zealand / https://www.linz.govt.nz/
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190503/6b9fadde/attachment-0001.html>

From even.rouault at spatialys.com  Fri May  3 09:43:39 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 03 May 2019 18:43:39 +0200
Subject: [gdal-dev] Upcoming Cloud Optimized Geotiff (COG) related
	enhancements
In-Reply-To: <6D713FDF-D039-4E41-912F-B29F536237D8@gmail.com>
References: <42081947.AsHn9XMMPI@even-i700>
 <6D713FDF-D039-4E41-912F-B29F536237D8@gmail.com>
Message-ID: <1705894.4emUKxEDrY@even-i700>

> About point 1, 2, 3 I have mixed feeling because to me it seems that we will
> introduce a new driver to replace the combination of gdal commands
> (disclaimer as one of the creator of rio-cogeo I may not be fully objective
> here).

Yes, the COG driver will clearly have overlap with rio-cogeo. I can imagine 
that there are use cases where having it available directly as a GDAL driver 
might be more convenient.

> Why this is specific to JPEG compression, what about other compressed format
> with internal mask ?

There's nothing specific indeed. This is just the main use case where internal 
mask is really needed (other compression types can generally handle alpha as a 
4th regular band), but yes we can generalize this optimization to any 
compression type.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun May  5 03:10:37 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 05 May 2019 12:10:37 +0200
Subject: [gdal-dev] GDAL 3.0.0 RC2 available
Message-ID: <3450451.j6T0dZ37i0@even-i700>

Hi,

I've issued a second release candidate for GDAL 3.0.0.

The main reason for it was a fix for a regression in the HDF5 I've just 
noticed.
The other change since RC1 is a switch in the EEDA driver to the Earth Engine 
v1alpha API (https://github.com/OSGeo/gdal/pull/1506)

The source is available at:

    http://download.osgeo.org/gdal/3.0.0/gdal-3.0.0rc2.tar.xz
    http://download.osgeo.org/gdal/3.0.0/gdal-3.0.0rc2.tar.gz
    http://download.osgeo.org/gdal/3.0.0/gdal300rc2.zip

A snapshot of the Python autotest suite can be downloaded from:

    http://download.osgeo.org/gdal/3.0.0/gdalautotest-3.0.0rc2.tar.gz
    http://download.osgeo.org/gdal/3.0.0/gdalautotest-3.0.0rc2.zip

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gbburkhardt at gmail.com  Sun May  5 08:54:56 2019
From: gbburkhardt at gmail.com (Glenn Burkhardt)
Date: Sun, 5 May 2019 11:54:56 -0400
Subject: [gdal-dev] gdalwarper destination alpha mask
Message-ID: <2e9b4b4f-c6ce-0e9f-ca4a-891b41a4f19f@gmail.com>

I'm trying to track down a discrepancy between GDAL 1.7.2 and GDAL 
2.4.0.  The NASA Worldwind code makes a call to gdal.ReprojectImage() 
using a dataset generated from an input file to a working destination 
dataset that's empty, except that the alpha band has been filled with 
0xFF.  In the case I'm examining, the projection is 1 to 1; no change.  
The source file has an appropriate alpha mask to clip the image so only 
relevant data is shown.

When using the 1.7.2 release, the image is shown with a proper overlay 
on the lower priority layers, with the portions with alpha mask of 0 
being completely transparent.  But the more recent 2.4.0 release has a 
black boundary around the image, indicating that the alpha mask was set 
to 0xff for the whole image.

It looks like there's a difference in behavior in the Java call

                         gdal.ReprojectImage(srcDS, destDS, s_srs_wkt, 
t_srs_wkt, gdalconst.GRA_Average);

For the 1.7.2 release, the alpha mask in the destination data set is 
filled in correctly, matching the alpha band in the source. But in the 
2.4.0 release, the destination alpha band is filled with 0xFF, which 
sort of explains the black boundary.  Curiously, for the 1.7.2 release, 
it doesn't matter if the destination alpha band was filled with zeros or 
0xFF.  For the 2.4.0 release, if the destination dataset alpha band is 
filled with zeros, the image displays correctly, and the reprojected 
destination dataset alpha band matches the source.

I'm trying to understand what the purpose is of the destination alpha 
density mask in 'gdalwarpper.cpp'.  In the file 'gdalwarpoperation.cpp', 
I see a note that says "Note that detailed semantics of the masks should 
be found in

GDALWarpKernel."  And in 'gdalwarpkernel.cpp': "A detailed explanation 
of the semantics of the validity and density masks, and their effects on 
resampling kernels is needed here."

So if there's a place where the semantics are explained, please send me 
link.  And, if this rings a bell about a change that was made some time 
between the 1.7.2 (April 23, 2010) and the 2.4.0, please let me know.

Thanks.


From even.rouault at spatialys.com  Sun May  5 10:16:38 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 05 May 2019 19:16:38 +0200
Subject: [gdal-dev] gdalwarper destination alpha mask
In-Reply-To: <2e9b4b4f-c6ce-0e9f-ca4a-891b41a4f19f@gmail.com>
References: <2e9b4b4f-c6ce-0e9f-ca4a-891b41a4f19f@gmail.com>
Message-ID: <10478539.9RPRXXOQkn@even-i700>

Glenn,

> I'm trying to track down a discrepancy between GDAL 1.7.2 and GDAL
> 2.4.0.  The NASA Worldwind code makes a call to gdal.ReprojectImage()
> using a dataset generated from an input file to a working destination
> dataset that's empty, except that the alpha band has been filled with
> 0xFF.  In the case I'm examining, the projection is 1 to 1; no change. 
> The source file has an appropriate alpha mask to clip the image so only
> relevant data is shown.
> 
> When using the 1.7.2 release, the image is shown with a proper overlay
> on the lower priority layers, with the portions with alpha mask of 0
> being completely transparent.  But the more recent 2.4.0 release has a
> black boundary around the image, indicating that the alpha mask was set
> to 0xff for the whole image.
> 
> It looks like there's a difference in behavior in the Java call
> 
>                          gdal.ReprojectImage(srcDS, destDS, s_srs_wkt,
> t_srs_wkt, gdalconst.GRA_Average);
> 
> For the 1.7.2 release, the alpha mask in the destination data set is
> filled in correctly, matching the alpha band in the source. But in the
> 2.4.0 release, the destination alpha band is filled with 0xFF, which
> sort of explains the black boundary.  Curiously, for the 1.7.2 release,
> it doesn't matter if the destination alpha band was filled with zeros or
> 0xFF.  For the 2.4.0 release, if the destination dataset alpha band is
> filled with zeros, the image displays correctly, and the reprojected
> destination dataset alpha band matches the source.
> 
> I'm trying to understand what the purpose is of the destination alpha
> density mask in 'gdalwarpper.cpp'.  In the file 'gdalwarpoperation.cpp',
> I see a note that says "Note that detailed semantics of the masks should
> be found in
> 
> GDALWarpKernel."  And in 'gdalwarpkernel.cpp': "A detailed explanation
> of the semantics of the validity and density masks, and their effects on
> resampling kernels is needed here."
> 
> So if there's a place where the semantics are explained, please send me
> link.  And, if this rings a bell about a change that was made some time
> between the 1.7.2 (April 23, 2010) and the 2.4.0, please let me know.

Looking at the NEWS file, the change of behaviour likely dates back to GDAL 
1.8.0:
 * GDALReprojectImage() : correctly assign nSrcAlphaBand and nDstAlphaBand 
(#3821) --> https://trac.osgeo.org/gdal/ticket/3821

Previously the source and target alpha bands were treated as regular bands.
If the target alpha band is initialized to 0xFF, then it means that all target 
pixels are valid, and thus they will remain the same if there is no 
corresponding source pixel, or if they have source_alpha = 0.

The maths involved with destination density are in:
https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdalwarpkernel.cpp#L1330
https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdalwarpkernel.cpp#L1414
Basically this is for alpha blending of source onto target.

That said, looking at the above mentionned change in GDALReprojectImage(), I 
noticed there was something slightly wrong, which I just fixed, in which the 
alpha bands were treated both as regular bands and alpha bands. So I'm not 
sure what the effect was exactly. That said, the difference in results seemed 
minimal when warping over a target image initialized with alpha = 0.

So all in all, you should initialize your target image with alpha = 0 as you 
noticed.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue May  7 02:19:50 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 07 May 2019 11:19:50 +0200
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
Message-ID: <6798886.d0DQZE10Dy@even-i700>

Hi,

Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final release.

-------

My vote: +1

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Tue May  7 02:40:39 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 7 May 2019 02:40:39 -0700 (MST)
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <1557222039872-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-



Even Rouault-2 wrote
> Hi,
> 
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final
> release.
> 
> -------
> 
> My vote: +1
> 
> Even





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From tobias.wendorff at tu-dortmund.de  Tue May  7 02:55:14 2019
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Tue, 7 May 2019 11:55:14 +0200
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <8FE29E61-5C07-4366-AD8D-BC3D61CA5846@tu-dortmund.de>

+0.9999998

— 
Von einem iPhone gesendet und wird daher Fehler enthalten.

> Am 07.05.2019 um 11:19 schrieb Even Rouault <even.rouault at spatialys.com>:
> 
> Hi,
> 
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final release.
> 
> -------
> 
> My vote: +1
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jmckenna at gatewaygeomatics.com  Tue May  7 04:04:00 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 7 May 2019 08:04:00 -0300
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <e8685a12-60eb-d59b-6dec-ce68da1190ef@gatewaygeomatics.com>

+1 jeff




On 2019-05-07 6:19 AM, Even Rouault wrote:
> Hi,
> 
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final release.
> 

From howard at hobu.co  Tue May  7 06:43:46 2019
From: howard at hobu.co (Howard Butler)
Date: Tue, 7 May 2019 08:43:46 -0500
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <A8218B55-5610-4768-9226-287FD2C43D1D@hobu.co>



> On May 7, 2019, at 4:19 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final release.
> 
> -------
> 
> My vote: +1

+1

Howard


From dmorissette at mapgears.com  Tue May  7 06:58:09 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 7 May 2019 09:58:09 -0400
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <a3512629-c832-0223-0964-157a26771d73@mapgears.com>

+1

Daniel

On 2019-05-07 05:19, Even Rouault wrote:
> Hi,
> 
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final release.
> 
> -------
> 
> My vote: +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From sean at mapbox.com  Tue May  7 12:29:10 2019
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 7 May 2019 13:29:10 -0600
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <CADPhZXym36EaZqkUiSBFB272OqnX=b+MVb4j3M8BQ8_3rB_jyA@mail.gmail.com>

Excellent, Even. Thank you for the version name change.

On Tue, May 7, 2019 at 3:19 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final
> release.
>
> -------
>
> My vote: +1
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/bb2a1b38/attachment.html>

From simon.eves at omnisci.com  Tue May  7 14:14:01 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Tue, 7 May 2019 14:14:01 -0700
Subject: [gdal-dev] Lame question,
	but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
Message-ID: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>

I have never had trouble with this before, most recently Proj 5.2 and GDAL
2.4.1, but the same build workflow doesn't work with the newest stuff...

I have a complete build of Proj 6.0.0 from a default ./configure (although
to a local --prefix)

I then do our standard ./configure of GDAL 3.0.0RC2...

--without-geos --with-kml=<known good KML install> --with-proj=<local Proj
install>

The build works all the way up to and including lib-target, and I see the
.a and .so and related symlinks in the .libs subdir.

It's apps-target that falls over. Every app build fails when linking
against libgdal.so with "undefined reference" against a bunch (perhaps all)
of "proj_<blah>" symbols.

config.log and make.log attached.

I am undoubtedly doing something stupid, but I can't see what! :(

This is on Ubuntu 18.04 with GCC 7.4.0

I saw http://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev but I don't
think it applies any more.

The <local Proj install> path is in $LD_LIBRARY_PATH

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/d8603782/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: config.log.gz
Type: application/gzip
Size: 22389 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/d8603782/attachment-0002.gz>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: make.log.gz
Type: application/gzip
Size: 4194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/d8603782/attachment-0003.gz>

From even.rouault at spatialys.com  Tue May  7 14:21:39 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 07 May 2019 23:21:39 +0200
Subject: [gdal-dev] Lame question,
	but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
Message-ID: <1692104.ijcIiCbu5s@even-i700>

> The <local Proj install> path is in $LD_LIBRARY_PATH

For $LD_LIBRARY_PATH, this should be <local Proj install>/lib


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simon.eves at omnisci.com  Tue May  7 16:42:41 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Tue, 7 May 2019 16:42:41 -0700
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <1692104.ijcIiCbu5s@even-i700>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
Message-ID: <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>

That's what I have, even if that's not what I wrote.

simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
/home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/local/mapd-deps/lib:/usr/local/cuda/lib64:
simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure --without-geos
--with-libkml=/usr/local/mapd-deps
--with-proj=/home/simon.eves/scratch/gdal3/install
...
simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
...
(cd apps; make)
make[1]: Entering directory '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
/bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
--silent g++  gdalinfo_bin.lo  /home/simon.eves/scratch/gdal3/gdal-3.0.0/
libgdal.la  -o gdalinfo
/home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
reference to `proj_alter_name'
[etc.]

On Tue, May 7, 2019 at 2:21 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> > The <local Proj install> path is in $LD_LIBRARY_PATH
>
> For $LD_LIBRARY_PATH, this should be <local Proj install>/lib
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/7d31da42/attachment.html>

From bellengj at gmail.com  Tue May  7 17:05:30 2019
From: bellengj at gmail.com (Jim Bellenger)
Date: Tue, 7 May 2019 20:05:30 -0400
Subject: [gdal-dev] Problem using ST_Centroid
Message-ID: <CAGtt-47F93L_04b9ARauyOppuFO57RKCO3ztGn6joOfpv4Km5g@mail.gmail.com>

I am trying to use a call like

ogr2ogr centroid.shp plaque_area.shp -dialect sqlite -sql "SELECT
ST_Centroid(geometry), * from plaque_area"

but I get the following error

ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT ST_Centroid(geometry),
* from plaque_area):
  no such function: ST_Centroid

I am compiling GDAL from source and installing in non-standard
directories.  I am using gdal-2.4.0, geos-3.7.2, and sqlite-3.028
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/74384383/attachment.html>

From bradh at frogmouth.net  Tue May  7 17:07:59 2019
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Wed, 8 May 2019 10:07:59 +1000
Subject: [gdal-dev] Problem using ST_Centroid
In-Reply-To: <CAGtt-47F93L_04b9ARauyOppuFO57RKCO3ztGn6joOfpv4Km5g@mail.gmail.com>
References: <CAGtt-47F93L_04b9ARauyOppuFO57RKCO3ztGn6joOfpv4Km5g@mail.gmail.com>
Message-ID: <00e701d50532$18c672a0$4a5357e0$@frogmouth.net>

Possibly you need to build with spatialite support?

 

Brad

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/49665f3d/attachment.html>

From pschmitt at gmail.com  Tue May  7 20:25:10 2019
From: pschmitt at gmail.com (Peter Schmitt)
Date: Tue, 7 May 2019 21:25:10 -0600
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
Message-ID: <CACkcqcWvWYTg1V6XOCPBGQLhmvqvV=fxC1wi+ZMQYEx6RR8AhQ@mail.gmail.com>

> make[1]: Entering directory
'/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
> /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
--silent g++  gdalinfo_bin.lo  /home/simon.eves/scratch/gdal3/gdal-3.0.0/
libgdal.la  -o gdalinfo
> /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
reference to `proj_alter_name'

I had a similar problems linking recently. I was building GDAL against a
version of libcurl I built myself & got "undefined reference" to a few curl
symbols. I was able to get past the link errors by running "configure
--without-libtool ....". Later, I revisited the problem and found a
potentially better solution: I made sure to uninstall my OS libcurl, build
my own curl, then built GDAL. If the OS libcurl made it back onto the
system after install, I needed to set
LD_LIBRARY_PATH=/path/to/my/libcurl/lib:$LD_LIBRARY_PATH to avoid runtime
errors.

Hope that helps!
Pete
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190507/fed5caf2/attachment.html>

From even.rouault at spatialys.com  Wed May  8 00:41:21 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 08 May 2019 09:41:21 +0200
Subject: [gdal-dev] Lame question,
	but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
Message-ID: <2465452.Pbc1c8lu4F@even-i700>

On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
> That's what I have, even if that's not what I wrote.
> 
> simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
> ocal/mapd-deps/lib:/usr/local/cuda/lib64:
> simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure --without-geos
> --with-libkml=/usr/local/mapd-deps
> --with-proj=/home/simon.eves/scratch/gdal3/install
> ...
> simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
> ...
> (cd apps; make)
> make[1]: Entering directory '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
> /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
> --silent g++  gdalinfo_bin.lo  /home/simon.eves/scratch/gdal3/gdal-3.0.0/
> libgdal.la  -o gdalinfo
> /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
> reference to `proj_alter_name'
> [etc.]

Look at the output of

ldd /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so | grep proj

It should normally point to the libproj.so.15 of
/home/simon.eves/scratch/gdal3/install/lib

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From robert.coup at koordinates.com  Wed May  8 02:55:44 2019
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 8 May 2019 10:55:44 +0100
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>

Hi all,

On Tue, 7 May 2019 at 10:19, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final
> release.
>

(I'm not a PSC member)

1. I agree with bumping to 3.0 with the significant changes

2. If we're bumping a major version, shouldn't we take that opportunity to
swap some other backwards-incompatible defaults rather than wait for
several more years to do it? Off the top of my head I'm thinking things
like:

   - Python's UseExceptions() defaulting to true
   - Python's object lifecycle management (I guess in theory this can be
   fixed in a compatible way?)
   - GeoJSON defaulting to 2008 instead of RFC7946
   - I'm sure there's a pile of others.

Feels like 3.0 has been chosen for good reasons, but without stepping back
to go "what other longstanding warts do we want to address at 3.0?". I
don't know if there's a major rush on to get a release out in time for some
cutoff date? Otherwise I suggest we take an opportunity to step back and
swap some odd defaults that have been hanging around for years for
compatibility.

Cheers,

Rob :)

-- 

Chief Technology Officer Koordinates

+44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/5427b171/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed May  8 03:26:49 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 8 May 2019 03:26:49 -0700 (MST)
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>
References: <6798886.d0DQZE10Dy@even-i700>
 <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>
Message-ID: <1557311209586-0.post@n6.nabble.com>

Hi,

Even answered in a mail on Thu May 2 00:43:37 PDT 2019:

"Well, I was about *releasing* the version, and don't intend to postpone it 
significantly, so no there won't be any surprise last-minute changes than
the 
ones already documented in MIGRATION_GUIDE.TXT. After all, major version 
numbers are cheap, so if during the next dev cycle 3.1dev turns out to need 
API breaks, it will be 4.0 ..."


-Jukka Rahkonen-



Robert Coup wrote
> Hi all,
> 
> On Tue, 7 May 2019 at 10:19, Even Rouault &lt;

> even.rouault@

> &gt;
> wrote:
> 
>>
>> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final
>> release.
>>
> 
> (I'm not a PSC member)
> 
> 1. I agree with bumping to 3.0 with the significant changes
> 
> 2. If we're bumping a major version, shouldn't we take that opportunity to
> swap some other backwards-incompatible defaults rather than wait for
> several more years to do it? Off the top of my head I'm thinking things
> like:
> 
>    - Python's UseExceptions() defaulting to true
>    - Python's object lifecycle management (I guess in theory this can be
>    fixed in a compatible way?)
>    - GeoJSON defaulting to 2008 instead of RFC7946
>    - I'm sure there's a pile of others.
> 
> Feels like 3.0 has been chosen for good reasons, but without stepping back
> to go "what other longstanding warts do we want to address at 3.0?". I
> don't know if there's a major rush on to get a release out in time for
> some
> cutoff date? Otherwise I suggest we take an opportunity to step back and
> swap some odd defaults that have been hanging around for years for
> compatibility.
> 
> Cheers,
> 
> Rob :)
> 
> -- 
> 
> Chief Technology Officer Koordinates
> 
> +44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
> &lt;https://twitter.com/koordinates&gt;
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed May  8 03:36:14 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 08 May 2019 12:36:14 +0200
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>
References: <6798886.d0DQZE10Dy@even-i700>
 <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>
Message-ID: <41010249.r8zTzju1ye@even-i700>

Robert,

> 2. If we're bumping a major version, shouldn't we take that opportunity to
> swap some other backwards-incompatible defaults rather than wait for
> several more years to do it? Off the top of my head I'm thinking things
> like:
> 
>    - Python's UseExceptions() defaulting to true

I bet upgrading autotest for that will be painful (unless we use 
DontUseExceptions()). There might be impacts on GDAL python utilities that can 
recover from some errors by testing for None (I wouldn't necessarily trust 
autotest to uncover all those. Careful code review will be needed)

>    - Python's object lifecycle management (I guess in theory this can be
>    fixed in a compatible way?)

Unfortunately no. From my memories from many years ago when I looked at that 
(there must a patch attached to some Trac ticket), if you do currently

ds = gdal.Create(filename, ..)
band = ds.GetRasterBand(1)
ds = None
os.unlink(filename)

that will succeed on Windows. If we fix reference counting, then the band 
object will still maintain the C++ GDALDataset object opened, and the unlink() 
will fail. This is/was a common pattern in autotest.

>    - GeoJSON defaulting to 2008 instead of RFC7946
>    - I'm sure there's a pile of others.
> 
> Feels like 3.0 has been chosen for good reasons, but without stepping back
> to go "what other longstanding warts do we want to address at 3.0?". I
> don't know if there's a major rush on to get a release out in time for some
> cutoff date? Otherwise I suggest we take an opportunity to step back and
> swap some odd defaults that have been hanging around for years for
> compatibility.

I'd like GDAL 3.0 to be out soon. Most Linux distros can't ship PROJ 6 until 
GDAL 3.0 is released, since PROJ 6 + libgeotiff 1.5 + GDAL 3.0 are kind of a 
combo.

Nothing prevents us from deciding that 3.1dev will be released as 4.0

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From robert.coup at koordinates.com  Wed May  8 03:58:27 2019
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 8 May 2019 11:58:27 +0100
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <1557311209586-0.post@n6.nabble.com>
References: <6798886.d0DQZE10Dy@even-i700>
 <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>
 <1557311209586-0.post@n6.nabble.com>
Message-ID: <CAFLLRpJ4mFXiu5j6E5pCWmfWBWm=mfzzJWCKdgVDFDbY8TMtbQ@mail.gmail.com>

Hi Jukka,

On Wed, 8 May 2019 at 11:26, jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

>
> Even answered in a mail on Thu May 2 00:43:37 PDT 2019:
>
> "Well, I was about *releasing* the version, and don't intend to postpone
> it
> significantly, so no there won't be any surprise last-minute changes than
> the
> ones already documented in MIGRATION_GUIDE.TXT. After all, major version
> numbers are cheap, so if during the next dev cycle 3.1dev turns out to
> need
> API breaks, it will be 4.0 ..."
>

Sure, numbers are cheap, but requiring users to stop & take the time to
work through their codebases to check for and address a set of incompatible
changes are the opposite — I don't think we want to be continually doing
that.

For us at least, GDAL minor X.Y -> X.Y+1 upgrades are relatively
straightforward: read the changelog, review things that look possibly
problematic, reapply any patches we still need, build, run our test suites,
QA, stage through to release.

I'm not majorly hung up on it, just something I wanted people to consider

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/e98b8ebf/attachment.html>

From robert.coup at koordinates.com  Wed May  8 04:07:00 2019
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 8 May 2019 12:07:00 +0100
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <41010249.r8zTzju1ye@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
 <CAFLLRpKGME6i3hmBcZK6MZ0D0XRVzw4wAgqJCzDwPVExZyem3A@mail.gmail.com>
 <41010249.r8zTzju1ye@even-i700>
Message-ID: <CAFLLRpJ+hWBhSFO6snuF0zw+nhB_qvLX7b77sUaktSGLTG=A4Q@mail.gmail.com>

Hi Even,

Oh, I know nothing is super-easy and it takes non-trivial time to make
these changes. And (I looked) there doesn't seem to be a good
pending-deprecation/defaults-to-change list ready to go either, which is
why those 3x were off the top of my head.

I'd like GDAL 3.0 to be out soon. Most Linux distros can't ship PROJ 6
> until
> GDAL 3.0 is released, since PROJ 6 + libgeotiff 1.5 + GDAL 3.0 are kind of
> a
> combo.


Understood, makes sense.

Nothing prevents us from deciding that 3.1dev will be released as 4.0


User attention is finite though — see my reply to Jukka.

Anyway, I thought  it was worth bringing up :)

I bet upgrading autotest for that will be painful (unless we
> use DontUseExceptions()). There might be impacts on GDAL python utilities
> that can recover from some errors by testing for None (I wouldn't
> necessarily trust autotest to uncover all those. Careful code review will
> be needed)


Feels to me like for things we know are deprecated (ie. everyone should be
using UseExceptions()) that the GDAL codebase + tests should use the common
behaviour and only test the old way strictly for compatibility (not
functionality).

Thanks,

Rob :)

On Wed, 8 May 2019 at 11:36, Even Rouault <even.rouault at spatialys.com>
wrote:

> Robert,
>
> > 2. If we're bumping a major version, shouldn't we take that opportunity
> to
> > swap some other backwards-incompatible defaults rather than wait for
> > several more years to do it? Off the top of my head I'm thinking things
> > like:
> >
> >    - Python's UseExceptions() defaulting to true
>
> I bet upgrading autotest for that will be painful (unless we use
> DontUseExceptions()). There might be impacts on GDAL python utilities that
> can
> recover from some errors by testing for None (I wouldn't necessarily trust
> autotest to uncover all those. Careful code review will be needed)
>
> >    - Python's object lifecycle management (I guess in theory this can be
> >    fixed in a compatible way?)
>
> Unfortunately no. From my memories from many years ago when I looked at
> that
> (there must a patch attached to some Trac ticket), if you do currently
>
> ds = gdal.Create(filename, ..)
> band = ds.GetRasterBand(1)
> ds = None
> os.unlink(filename)
>
> that will succeed on Windows. If we fix reference counting, then the band
> object will still maintain the C++ GDALDataset object opened, and the
> unlink()
> will fail. This is/was a common pattern in autotest.
>
> >    - GeoJSON defaulting to 2008 instead of RFC7946
> >    - I'm sure there's a pile of others.
> >
> > Feels like 3.0 has been chosen for good reasons, but without stepping
> back
> > to go "what other longstanding warts do we want to address at 3.0?". I
> > don't know if there's a major rush on to get a release out in time for
> some
> > cutoff date? Otherwise I suggest we take an opportunity to step back and
> > swap some odd defaults that have been hanging around for years for
> > compatibility.
>
> I'd like GDAL 3.0 to be out soon. Most Linux distros can't ship PROJ 6
> until
> GDAL 3.0 is released, since PROJ 6 + libgeotiff 1.5 + GDAL 3.0 are kind of
> a
> combo.
>
> Nothing prevents us from deciding that 3.1dev will be released as 4.0
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 

Chief Technology Officer Koordinates

+44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/35f42a72/attachment.html>

From even.rouault at spatialys.com  Wed May  8 06:23:55 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 08 May 2019 15:23:55 +0200
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <CAFLLRpJ+hWBhSFO6snuF0zw+nhB_qvLX7b77sUaktSGLTG=A4Q@mail.gmail.com>
References: <6798886.d0DQZE10Dy@even-i700> <41010249.r8zTzju1ye@even-i700>
 <CAFLLRpJ+hWBhSFO6snuF0zw+nhB_qvLX7b77sUaktSGLTG=A4Q@mail.gmail.com>
Message-ID: <1719264.poIUvJFUUf@even-i700>

On mercredi 8 mai 2019 12:07:00 CEST Robert Coup wrote:
> Hi Even,
> 
> Oh, I know nothing is super-easy and it takes non-trivial time to make
> these changes. And (I looked) there doesn't seem to be a good
> pending-deprecation/defaults-to-change list ready to go either, which is
> why those 3x were off the top of my head.

That reminds me of some recent tweet I saw which said that having a todo list 
was not necessarily a good idea and had the effect of discouraging 
contributions: people could take it for granted that someone was going to 
implement them and there was funding backing those ideas. That said, part of 
https://trac.osgeo.org/gdal/wiki/GDAL20Changes is probably still valid (at 
least from a technical point of view. Not necessarily things we really want/
need to change)

Anyway regarding 3.0 release, I would also have preferred to know in advance 
this was going to be 3.0 rather than at the last minute, so there was 
opportunity to slip other things into it. Partly my own fault since I should 
have anticipated that at RFC73 time. Partly community fault to not have raised 
that earlier too (the breaking changes were mentionned in the RFC)

The thing is that it is difficult to plan the content of a major release since 
a lot of the ideas that make a major release are not 5-minute changes, and so 
require to have secured availability/funding for them in advance. And a number 
of breaking changes will be welcomed in different ways depending on users. 
Existing users (who are the most likely to be able to fund changes since they 
depend on the software and thus can make a case it contributes to their chain 
value) don't necessarily need them since they are happy with existing things 
(or have coped with them). They are more for new users who haven't yet adopted 
the software and stumble on its historic oddities. At least, that's my own 
perception of how things work. There are also changes you don't initially plan 
to be breaking and that turn out to be breaking, sometimes in a marginal way, 
during implementation. So bumping the major version number is sometimes more a 
logical consequence than an intention.

And actually if you look at all the GDAL 2.X releases, all of them have been 
breaking in some ways. Just look at MIGRATION_GUIDE.TXT. Most of the time in 
ways not detectable at compilation time (the 2.0 -> 2.1 and 2.1 -> 2.2 
transitions are examples of that). That could have justify a bump of the major 
version number for all of them.

> 
> User attention is finite though

My availability as release manager too :-)

There are 2 situations regarding updates:
- you depend on GDAL being shipped with an external distribution mechanism 
(Linux distro, OSGeo4W, homebrew, etc.), so you have little choice and must 
update whenever a new version is made available
- you build and ship your own GDAL. So you can decide if you do all X -> Y -> 
Z transitions, or just X -> Z.

Updating for a lot of breaking changes at the same time can be quite 
discouraging. I personnaly prefer incremental upgrades where, before entering 
the tunnel, you can already see the light at the other end.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From varchar2 at gmail.com  Wed May  8 07:39:43 2019
From: varchar2 at gmail.com (varchar)
Date: Wed, 8 May 2019 07:39:43 -0700 (MST)
Subject: [gdal-dev] gdal2tiles.py doesn't transparent raster png
Message-ID: <1557326383944-0.post@n6.nabble.com>

The transparent color of PNG is 255,255,255.
 
GDALINFO on the PNG file is
Driver: PNG/Portable Network Graphics
Size is 12800, 12800
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,12800.0)
Upper Right (12800.0,    0.0)
Lower Right (12800.0,12800.0)
Center      ( 6400.0, 6400.0)
Band 1 Block=12800x1 Type=Byte, ColorInterp=Red
    Computed Min/Max=0.000,255.000
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=12800x1 Type=Byte, ColorInterp=Green
    Computed Min/Max=0.000,255.000
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=12800x1 Type=Byte, ColorInterp=Blue
    Computed Min/Max=0.000,255.000
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=12800x1 Type=Byte, ColorInterp=Alpha
    Computed Min/Max=255.000,255.000

Having tried various command lines as below, I am still see the png files
within background in tiles folder. 
python gdal2tiles.py -p raster input.png tiles -a 255,255,255
python gdal2tiles.py -p raster input.png tiles -a 255,255,255,255
python gdal2tiles.py -p raster input.jpg tiles -a 255,255,255
python gdal2tiles.py -p raster input.tif tiles -a 255,255,255,255

Did I miss something at somewhere?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From simon.eves at omnisci.com  Wed May  8 09:03:02 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Wed, 8 May 2019 09:03:02 -0700
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <2465452.Pbc1c8lu4F@even-i700>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
 <2465452.Pbc1c8lu4F@even-i700>
Message-ID: <CAJf0KTT=qD0xLW-=d9U-Ld=dnehGAtjFnNXT4wwgwPHf-q=R9A@mail.gmail.com>

No, it shows /usr/lib/x86_64-linux-gnu/libproj.sso.12 (the system-installed
Proj 5.2.0)

I did not expect the system libs to come into play at all if I used
--with-proj for the GDAL configure, and $LD_LIBRARY_PATH had the Proj 6 DSO
directory first.

I'll try it all again from scratch.

Simon

On Wed, May 8, 2019 at 12:41 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
> > That's what I have, even if that's not what I wrote.
> >
> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
> >
> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
> > ocal/mapd-deps/lib:/usr/local/cuda/lib64:
> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure
> --without-geos
> > --with-libkml=/usr/local/mapd-deps
> > --with-proj=/home/simon.eves/scratch/gdal3/install
> > ...
> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
> > ...
> > (cd apps; make)
> > make[1]: Entering directory
> '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
> > /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
> > --silent g++  gdalinfo_bin.lo  /home/simon.eves/scratch/gdal3/gdal-3.0.0/
> > libgdal.la  -o gdalinfo
> > /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
> > reference to `proj_alter_name'
> > [etc.]
>
> Look at the output of
>
> ldd /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so | grep proj
>
> It should normally point to the libproj.so.15 of
> /home/simon.eves/scratch/gdal3/install/lib
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/bda0800c/attachment.html>

From simon.eves at omnisci.com  Wed May  8 09:25:51 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Wed, 8 May 2019 09:25:51 -0700
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <2465452.Pbc1c8lu4F@even-i700>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
 <2465452.Pbc1c8lu4F@even-i700>
Message-ID: <CAJf0KTQNz9va0HpXLnhf1wdbOqeMfwRXo3Fmwmr648R2bs_7QA@mail.gmail.com>

No, it shows /usr/lib/x86_64-linux-gnu/libproj.sso.12 (the system-installed
Proj 5.2.0)

I just did it all again from scratch...

$ echo $LD_LIBRARY_PATH
/home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/local/mapd-deps/lib:/usr/local/cuda/lib64
$ cd /home/simon.eves/scratch/gdal3/
$ rm -rf gdal-3.0.0 proj-6.0.0 install/*
$ tar xzvf proj-6.0.0.tar.gz
$ cd proj-6.0.0/
$ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
$ make -j12
[completes]
$ make install
[completes]
$ cd ..
$ tar xvf gdal-3.0.0rc2.tar
$ cd gdal-3.0.0/
$ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
--without-geos --with-kml=/usr/local/mapd-deps
--with-proj=/home/simon.eves/scratch/gdal3/install
[completes, shows Proj >= 6.0 yes]
$ make -j12
[fails in first app as before]
$ ldd .libs/libgdal.so | grep proj
libproj.so.12 => /usr/lib/x86_64-linux-gnu/libproj.so.12
(0x00007f3d98cb3000)

What am I doing wrong, such that the combination of $LD_LIBRARY_PATH
priority and --with-proj still isn't making GDAL see the local Proj before
the system one?

Simon

On Wed, May 8, 2019 at 12:41 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
> > That's what I have, even if that's not what I wrote.
> >
> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
> >
> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
> > ocal/mapd-deps/lib:/usr/local/cuda/lib64:
> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure
> --without-geos
> > --with-libkml=/usr/local/mapd-deps
> > --with-proj=/home/simon.eves/scratch/gdal3/install
> > ...
> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
> > ...
> > (cd apps; make)
> > make[1]: Entering directory
> '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
> > /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
> > --silent g++  gdalinfo_bin.lo  /home/simon.eves/scratch/gdal3/gdal-3.0.0/
> > libgdal.la  -o gdalinfo
> > /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
> > reference to `proj_alter_name'
> > [etc.]
>
> Look at the output of
>
> ldd /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so | grep proj
>
> It should normally point to the libproj.so.15 of
> /home/simon.eves/scratch/gdal3/install/lib
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/e380e7af/attachment.html>

From simon.eves at omnisci.com  Wed May  8 09:29:22 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Wed, 8 May 2019 09:29:22 -0700
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <CAJf0KTQNz9va0HpXLnhf1wdbOqeMfwRXo3Fmwmr648R2bs_7QA@mail.gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
 <2465452.Pbc1c8lu4F@even-i700>
 <CAJf0KTQNz9va0HpXLnhf1wdbOqeMfwRXo3Fmwmr648R2bs_7QA@mail.gmail.com>
Message-ID: <CAJf0KTSHfhdGB1myoQy8x0pfyBS2uHD6i_KZyvjjbSz4GuVWpA@mail.gmail.com>

$ ls -l /home/simon.eves/scratch/gdal3/install/lib/
total 107536
-rw-r--r-- 1 simon.eves mapd 79490260 May  8 09:06 libproj.a
-rwxr-xr-x 1 simon.eves mapd      998 May  8 09:06 libproj.la
lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so ->
libproj.so.15.0.0
lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so.15 ->
libproj.so.15.0.0
-rwxr-xr-x 1 simon.eves mapd 30610584 May  8 09:06 libproj.so.15.0.0
drwxr-xr-x 2 simon.eves mapd     4096 May  8 09:06 pkgconfig


On Wed, May 8, 2019 at 9:25 AM Simon Eves <simon.eves at omnisci.com> wrote:

> No, it shows /usr/lib/x86_64-linux-gnu/libproj.sso.12 (the
> system-installed Proj 5.2.0)
>
> I just did it all again from scratch...
>
> $ echo $LD_LIBRARY_PATH
>
> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/local/mapd-deps/lib:/usr/local/cuda/lib64
> $ cd /home/simon.eves/scratch/gdal3/
> $ rm -rf gdal-3.0.0 proj-6.0.0 install/*
> $ tar xzvf proj-6.0.0.tar.gz
> $ cd proj-6.0.0/
> $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
> $ make -j12
> [completes]
> $ make install
> [completes]
> $ cd ..
> $ tar xvf gdal-3.0.0rc2.tar
> $ cd gdal-3.0.0/
> $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
> --without-geos --with-kml=/usr/local/mapd-deps
> --with-proj=/home/simon.eves/scratch/gdal3/install
> [completes, shows Proj >= 6.0 yes]
> $ make -j12
> [fails in first app as before]
> $ ldd .libs/libgdal.so | grep proj
> libproj.so.12 => /usr/lib/x86_64-linux-gnu/libproj.so.12
> (0x00007f3d98cb3000)
>
> What am I doing wrong, such that the combination of $LD_LIBRARY_PATH
> priority and --with-proj still isn't making GDAL see the local Proj before
> the system one?
>
> Simon
>
> On Wed, May 8, 2019 at 12:41 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
>> > That's what I have, even if that's not what I wrote.
>> >
>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
>> >
>> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
>> > ocal/mapd-deps/lib:/usr/local/cuda/lib64:
>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure
>> --without-geos
>> > --with-libkml=/usr/local/mapd-deps
>> > --with-proj=/home/simon.eves/scratch/gdal3/install
>> > ...
>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
>> > ...
>> > (cd apps; make)
>> > make[1]: Entering directory
>> '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
>> > /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
>> > --silent g++  gdalinfo_bin.lo
>> /home/simon.eves/scratch/gdal3/gdal-3.0.0/
>> > libgdal.la  -o gdalinfo
>> > /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
>> > reference to `proj_alter_name'
>> > [etc.]
>>
>> Look at the output of
>>
>> ldd /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so | grep proj
>>
>> It should normally point to the libproj.so.15 of
>> /home/simon.eves/scratch/gdal3/install/lib
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
> --
> <http://www.omnisci.com/>
> Simon Eves
> Senior Graphics Engineer, Rendering Group
> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>
>

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/9475d5ae/attachment-0001.html>

From simon.eves at omnisci.com  Wed May  8 16:54:12 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Wed, 8 May 2019 16:54:12 -0700
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <CAJf0KTSHfhdGB1myoQy8x0pfyBS2uHD6i_KZyvjjbSz4GuVWpA@mail.gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
 <2465452.Pbc1c8lu4F@even-i700>
 <CAJf0KTQNz9va0HpXLnhf1wdbOqeMfwRXo3Fmwmr648R2bs_7QA@mail.gmail.com>
 <CAJf0KTSHfhdGB1myoQy8x0pfyBS2uHD6i_KZyvjjbSz4GuVWpA@mail.gmail.com>
Message-ID: <CAJf0KTQqcEavuCm3CQJUsK5bq=ZZf3BUkboOBwnKj=kUxrA_iA@mail.gmail.com>

I removed the system libgdal-dev and proj-bin, and then this sequence
worked, with ldd showing the local proj, and the apps all compile.

Still convinced I'm doing something stupid and n00b, but what? Why didn't
the local proj DSO take priority before?

On Wed, May 8, 2019 at 9:29 AM Simon Eves <simon.eves at omnisci.com> wrote:

> $ ls -l /home/simon.eves/scratch/gdal3/install/lib/
> total 107536
> -rw-r--r-- 1 simon.eves mapd 79490260 May  8 09:06 libproj.a
> -rwxr-xr-x 1 simon.eves mapd      998 May  8 09:06 libproj.la
> lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so ->
> libproj.so.15.0.0
> lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so.15 ->
> libproj.so.15.0.0
> -rwxr-xr-x 1 simon.eves mapd 30610584 May  8 09:06 libproj.so.15.0.0
> drwxr-xr-x 2 simon.eves mapd     4096 May  8 09:06 pkgconfig
>
>
> On Wed, May 8, 2019 at 9:25 AM Simon Eves <simon.eves at omnisci.com> wrote:
>
>> No, it shows /usr/lib/x86_64-linux-gnu/libproj.sso.12 (the
>> system-installed Proj 5.2.0)
>>
>> I just did it all again from scratch...
>>
>> $ echo $LD_LIBRARY_PATH
>>
>> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/local/mapd-deps/lib:/usr/local/cuda/lib64
>> $ cd /home/simon.eves/scratch/gdal3/
>> $ rm -rf gdal-3.0.0 proj-6.0.0 install/*
>> $ tar xzvf proj-6.0.0.tar.gz
>> $ cd proj-6.0.0/
>> $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
>> $ make -j12
>> [completes]
>> $ make install
>> [completes]
>> $ cd ..
>> $ tar xvf gdal-3.0.0rc2.tar
>> $ cd gdal-3.0.0/
>> $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
>> --without-geos --with-kml=/usr/local/mapd-deps
>> --with-proj=/home/simon.eves/scratch/gdal3/install
>> [completes, shows Proj >= 6.0 yes]
>> $ make -j12
>> [fails in first app as before]
>> $ ldd .libs/libgdal.so | grep proj
>> libproj.so.12 => /usr/lib/x86_64-linux-gnu/libproj.so.12
>> (0x00007f3d98cb3000)
>>
>> What am I doing wrong, such that the combination of $LD_LIBRARY_PATH
>> priority and --with-proj still isn't making GDAL see the local Proj before
>> the system one?
>>
>> Simon
>>
>> On Wed, May 8, 2019 at 12:41 AM Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
>>> > That's what I have, even if that's not what I wrote.
>>> >
>>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
>>> >
>>> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
>>> > ocal/mapd-deps/lib:/usr/local/cuda/lib64:
>>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure
>>> --without-geos
>>> > --with-libkml=/usr/local/mapd-deps
>>> > --with-proj=/home/simon.eves/scratch/gdal3/install
>>> > ...
>>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
>>> > ...
>>> > (cd apps; make)
>>> > make[1]: Entering directory
>>> '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
>>> > /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
>>> > --silent g++  gdalinfo_bin.lo
>>> /home/simon.eves/scratch/gdal3/gdal-3.0.0/
>>> > libgdal.la  -o gdalinfo
>>> > /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
>>> > reference to `proj_alter_name'
>>> > [etc.]
>>>
>>> Look at the output of
>>>
>>> ldd /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so | grep
>>> proj
>>>
>>> It should normally point to the libproj.so.15 of
>>> /home/simon.eves/scratch/gdal3/install/lib
>>>
>>> --
>>> Spatialys - Geospatial professional services
>>> http://www.spatialys.com
>>>
>>
>>
>> --
>> <http://www.omnisci.com/>
>> Simon Eves
>> Senior Graphics Engineer, Rendering Group
>> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>>
>>
>> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>>
>>
>
> --
> <http://www.omnisci.com/>
> Simon Eves
> Senior Graphics Engineer, Rendering Group
> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>
>

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190508/38a6f9c5/attachment.html>

From even.rouault at spatialys.com  Thu May  9 03:33:58 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 09 May 2019 12:33:58 +0200
Subject: [gdal-dev] Motion: Promote GDAL 3.0.0 rc2 for release
In-Reply-To: <6798886.d0DQZE10Dy@even-i700>
References: <6798886.d0DQZE10Dy@even-i700>
Message-ID: <14833746.cyXppcQ9H8@even-i700>

On mardi 7 mai 2019 11:19:50 CEST Even Rouault wrote:
> Hi,
> 
> Motion: GDAL/OGR 3.0.0 rc2 is promoted to be the official 3.0.0 final
> release.
> 
> -------

I declare this motion passed with +1 from PSC members JukkaR, HowardB, DanielM 
and myself

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu May  9 03:54:25 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 09 May 2019 12:54:25 +0200
Subject: [gdal-dev] GDAL 3.0.0 is released
Message-ID: <3037250.eOVqE48M2k@even-i700>

Hi,

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 3.0.0.  GDAL/OGR is a C++ geospatial
data access library for raster and vector file formats, databases and
web services.  It includes bindings for several languages, and a variety
of command line tools.

   http://www.gdal.org/

The 3.0.0 release is a new feature release with the following highlights:

 * Implement RFC 73: Integration of PROJ6 for WKT2, late binding capabilities, 
time-support and unified CRS database.
    ==> PROJ >= 6 is now a build requirement
    https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
 * New GDAL drivers:
  - DAAS: read driver for Airbus DS Intelligence Data As A Service
  - TileDB: read/write driver for https://www.tiledb.io (#1402)
 * New OGR drivers:
  - MongoDBv3: read/write driver using libmongocxx v3.4.0 client (for MongoDB 
>= 4.0)
 * Improved drivers:
   - FITS: read/write support for scale, offset and CRS
   - netCDF: read support for groups
   - PDF: add a COMPOSITION_FILE creation option to generate a complex 
document
   - PDS4: subdataset creation support, read/write table/vector support
 * Support for minimal builds on Unix (#1250)
 * Add a docker/ directory with Dockerfile for different configurations
 * Continued code linting

More complete information on the new features and fixes in the 3.0.0
release can be found at:

  http://trac.osgeo.org/gdal/wiki/Release/3.0.0-News

The release can be downloaded from:
  * http://download.osgeo.org/gdal/3.0.0/gdal300.zip - source as a zip
  * http://download.osgeo.org/gdal/3.0.0/gdal-3.0.0.tar.gz - source as .tar.gz
  * http://download.osgeo.org/gdal/3.0.0/gdal-3.0.0.tar.xz - source as .tar.xz
  * http://download.osgeo.org/gdal/3.0.0/gdal-grass-3.0.0.tar.gz - GDAL-GRASS 
plugin
  * http://download.osgeo.org/gdal/3.0.0/gdalautotest-3.0.0.tar.gz - test 
suite
  * http://download.osgeo.org/gdal/3.0.0/gdal300doc.zip - documentation / 
website

The migration guide can be found at  :
      https://github.com/OSGeo/gdal/blob/release/3.0/gdal/MIGRATION_GUIDE.TXT

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shubhambaranwal2000 at gmail.com  Thu May  9 19:14:11 2019
From: shubhambaranwal2000 at gmail.com (Shubham Baranwal)
Date: Fri, 10 May 2019 07:44:11 +0530
Subject: [gdal-dev] Volume Calculation of Digital Elevation Model
Message-ID: <CANZsunsG3T2vdyR-Yuv9hYgfmM+eUWuBaDfZpE92ikzi51Rikg@mail.gmail.com>

Hi team,

I just wanted to know whether is there any way to calculate the volume of
the whole Digital Elevation Model?

Thanks,

Shubham Baranwal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190510/aa62a789/attachment.html>

From neteler at osgeo.org  Fri May 10 01:28:13 2019
From: neteler at osgeo.org (Markus Neteler)
Date: Fri, 10 May 2019 10:28:13 +0200
Subject: [gdal-dev] Volume Calculation of Digital Elevation Model
In-Reply-To: <CANZsunsG3T2vdyR-Yuv9hYgfmM+eUWuBaDfZpE92ikzi51Rikg@mail.gmail.com>
References: <CANZsunsG3T2vdyR-Yuv9hYgfmM+eUWuBaDfZpE92ikzi51Rikg@mail.gmail.com>
Message-ID: <CALFmHhtoWDVe+TSc7ZhQ2T0XXppZ--3uMWZ=bPssOtkd+SOE0A@mail.gmail.com>

Hi,

On Fri, May 10, 2019 at 4:14 AM Shubham Baranwal
<shubhambaranwal2000 at gmail.com> wrote:
>
> Hi team,
>
> I just wanted to know whether is there any way to calculate the volume of the whole Digital Elevation Model?

Not a GDAL solution but GRASS GIS can do that:

https://grass.osgeo.org/grass76/manuals/r.volume.html#example

Markus

From shubhambaranwal2000 at gmail.com  Sat May 11 00:16:48 2019
From: shubhambaranwal2000 at gmail.com (Shubham Baranwal)
Date: Sat, 11 May 2019 12:46:48 +0530
Subject: [gdal-dev] Extract information of a polygon from DEM
Message-ID: <CANZsunt_XMYr2pQothUxi2B2RPD=ufHEy-q2-7cGaXjr0ewtfQ@mail.gmail.com>

Hi team,

I need to know is there any way to extract the elevation values from DEM of
a polygon.
I have pixel points of my polygon of DEM. I want to extract the elevation
values of that polygon.

Thanks and Regards,
Shubham
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190511/06a2f81a/attachment.html>

From lars.schylberg at blixtmail.se  Sat May 11 03:31:53 2019
From: lars.schylberg at blixtmail.se (Lars Schylberg)
Date: Sat, 11 May 2019 12:31:53 +0200
Subject: [gdal-dev] Extract information of a polygon from DEM
Message-ID: <97ba7126-d90c-147c-0266-8dcf0568e23d@blixtmail.se>

Have a look at:

https://www.gdal.org/gdallocationinfo.html

This page gives examples how to script it for a polygon:

https://gis.stackexchange.com/questions/317213/gdal-gdallocationinfo-of-cgiar-mosaic-elevation-data

Have fun

/Lars Schylberg





From rayg at daylongraphics.com  Sat May 11 11:13:56 2019
From: rayg at daylongraphics.com (Ray Gardener)
Date: Sat, 11 May 2019 11:13:56 -0700
Subject: [gdal-dev] Volume Calculation of Digital Elevation Model
In-Reply-To: <CANZsunsG3T2vdyR-Yuv9hYgfmM+eUWuBaDfZpE92ikzi51Rikg@mail.gmail.com>
References: <CANZsunsG3T2vdyR-Yuv9hYgfmM+eUWuBaDfZpE92ikzi51Rikg@mail.gmail.com>
Message-ID: <1adeb357-6767-aafe-f6c1-579720b5d06c@daylongraphics.com>

If you need an interactive solution that also supports masking, Leveller 
can do that.

http://www.daylongraphics.com/images/volume.png

Ray


On 5/9/2019 7:14 PM, Shubham Baranwal wrote:
> Hi team,
>
> I just wanted to know whether is there any way to calculate the volume 
> of the whole Digital Elevation Model?
>
> Thanks,
>
> Shubham Baranwal
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190511/3043cc2e/attachment.html>

From SEHAH at vestas.com  Tue May 14 22:53:30 2019
From: SEHAH at vestas.com (Seonghyeon Hahn)
Date: Wed, 15 May 2019 05:53:30 +0000
Subject: [gdal-dev] gdal_contour: 2.2.4 vs. 2.4.1
In-Reply-To: <AM0PR04MB4722D3AD9557BFF1323B1DCCC4080@AM0PR04MB4722.eurprd04.prod.outlook.com>
References: <AM0PR04MB4722D3AD9557BFF1323B1DCCC4080@AM0PR04MB4722.eurprd04.prod.outlook.com>
Message-ID: <AM0PR04MB4722D755F09F7C10F785F71AC4090@AM0PR04MB4722.eurprd04.prod.outlook.com>

Hello,

We've been using gdal v2.2.4 for a while. In particular, we've been frequently using the "gdal_contour" command
for raster-to-vector conversion from the Golden Software ASCII Grid (GSAG) into the WAsP .map format
in the following way:

% gdal_contour ./input.grd ./output.map -i 10.0 -f WAsP

This has been working fine with gdal2.2.4, but recently upgraded gdal2.4.1 doesn't seem to work. If I run it
in the verbose mode by setting CPL_DEBUG=ON, it writes the following error messages:

% gdal_contour ./input.grd ./output.map -i 10.0 -f WAsP --config CPL_DEBUG ON
GDAL: GDALOpen(./input.grd, this=0x1e9dee0) succeeds as GSAG.
GDAL: GDALDriver::Create(WAsP,./output.map,0,0,0,Unknown,(nil))
0GDAL: GDAL_CACHEMAX = 794 MB
ERROR 6: No field defined and no Z coordinate
ERROR 1: cannot write linestring
ERROR 6: No field defined and no Z coordinate
ERROR 1: cannot write linestring
...
More than 1000 errors or warnings have been reported. No more will be reported from now.
40...50...60...70...80...90...GDAL: GDALClose(./output.map, this=0x1e9dc60)
GDAL: GDALClose(./input.grd, this=0x1e9dee0)
100 - done.

Googling wasn't very helpful for this issue. Can anyone help me with this?

Thanks in advance.

Classification: Restricted



From vincent.loppin at diginext.fr  Wed May 15 03:02:16 2019
From: vincent.loppin at diginext.fr (vincent.loppin)
Date: Wed, 15 May 2019 10:02:16 +0000
Subject: [gdal-dev] Fail to open DBF without SHAPE_RESTORE_SHX options
Message-ID: <452e13a931b9438d933dac9203ebfba6@diginext.fr>

Hello,

This mail is related to https://github.com/OSGeo/gdal/issues/1525

Quick recall :

We try to open DBF file using shapefile driver, but in our dataset we have empty SHP & SHX files (provided by customers, so we can't remove it).
To be able to open it, we use the SHAPE_RESTORE_SHX option to bypass shp reading.

This option usage sounds to be a bit dirty workaround, especially when there are a parameter bForceSingleFileDataSource   on OGRShapeDataSource::Open() method.

https://github.com/OSGeo/gdal/blob/0d7d762895f268d0c3ddaed5ddac3605c727e501/gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp#L150

Maybe an open option could help us to deal with this case ? (FORCE_SINGLE_FILE_DATA_SOURCE)

Thanks,

--
Vincent Loppin
VirtualGeo SDK Technical Expert
DIGINEXT - Virtual Reality Division
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/0c4061a4/attachment.html>

From even.rouault at spatialys.com  Wed May 15 05:20:14 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 May 2019 07:20:14 -0500
Subject: [gdal-dev] Fail to open DBF without SHAPE_RESTORE_SHX options
In-Reply-To: <452e13a931b9438d933dac9203ebfba6@diginext.fr>
References: <452e13a931b9438d933dac9203ebfba6@diginext.fr>
Message-ID: <12368747.ESaTSmAmxq@even-i700>

Vincent,

> Hello,
> 
> This mail is related to https://github.com/OSGeo/gdal/issues/1525
> 
> Quick recall :
> 
> We try to open DBF file using shapefile driver, but in our dataset we have
> empty SHP & SHX files (provided by customers, so we can't remove it). To be
> able to open it, we use the SHAPE_RESTORE_SHX option to bypass shp reading.
> 
> This option usage sounds to be a bit dirty workaround, especially when there
> are a parameter bForceSingleFileDataSource   on OGRShapeDataSource::Open()
> method.

Yes, a bit confusing. It means that you have a single layer dataset instead of 
opening a directory of several shapefiles.

> 
> https://github.com/OSGeo/gdal/blob/0d7d762895f268d0c3ddaed5ddac3605c727e501/
> gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp#L150
> 
> Maybe an open option could help us to deal with this case ?
> (FORCE_SINGLE_FILE_DATA_SOURCE)

This is a super particular use case to have 0-byte large .shp & .shx files 
alongside a valid .dbf. Not sure we really want to support this, and I guess 
other implementations would probably not like such datasets.

Another possibility is that you copy the .dbf file in a temporary directory 
and open it. Or if you don't want to create a temporary file on the regular 
filesystem, you could ingest it into RAM in a /vsimem/temp.dbf file and open 
that one. You can use VSIIngestFile() for that.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed May 15 05:47:21 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 May 2019 07:47:21 -0500
Subject: [gdal-dev] gdal_contour: 2.2.4 vs. 2.4.1
In-Reply-To: <AM0PR04MB4722D755F09F7C10F785F71AC4090@AM0PR04MB4722.eurprd04.prod.outlook.com>
References: <AM0PR04MB4722D3AD9557BFF1323B1DCCC4080@AM0PR04MB4722.eurprd04.prod.outlook.com>
 <AM0PR04MB4722D755F09F7C10F785F71AC4090@AM0PR04MB4722.eurprd04.prod.outlook.com>
Message-ID: <5669460.qh9NRvkihM@even-i700>

On mercredi 15 mai 2019 05:53:30 CDT Seonghyeon Hahn wrote:
> Hello,
> 
> We've been using gdal v2.2.4 for a while. In particular, we've been
> frequently using the "gdal_contour" command for raster-to-vector conversion
> from the Golden Software ASCII Grid (GSAG) into the WAsP .map format in the
> following way:
> 
> % gdal_contour ./input.grd ./output.map -i 10.0 -f WAsP
> 
> This has been working fine with gdal2.2.4, but recently upgraded gdal2.4.1
> doesn't seem to work. 

OK, I've reproduced the issue. I've just submitted a fix for the WaSP driver 
to the master, 3.0 and 2.4 branches.
You can workaround the bug by doing a 2-step process:
1) output to shapefile (or whatever other format which supports 3D) with 
gdal_contour, with an explicit -3d flag:

	$ gdal_contour input.grd tmp.shp -3d -i 10.0

2) convert to WaSP:

	$ ogr2ogr output.map tmp.shp -f WAsP

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed May 15 07:03:44 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 May 2019 09:03:44 -0500
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
Message-ID: <2667407.srByZYhLEU@even-i700>

Hi,

I propose to add Norman Barker to the GDAL project steering committee.

Norman has been active as a contributor to the GDAL project since more than 10 
years and has contributed to various areas of the project, in particular the 
JPIPKAK driver and the progressive rendering API, the OGR Cloudand driver, the 
WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he would be 
a good asset for the project.

Motion: To add Norman Barker to the GDAL PSC.

+1 from me.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Wed May 15 08:10:37 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 15 May 2019 12:10:37 -0300
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <2667407.srByZYhLEU@even-i700>
References: <2667407.srByZYhLEU@even-i700>
Message-ID: <d2583a35-8979-228a-4d5d-7d13e64edda1@gatewaygeomatics.com>

+1 jeff





On 2019-05-15 11:03 AM, Even Rouault wrote:
> Hi,
> 
> I propose to add Norman Barker to the GDAL project steering committee.
> 
> Norman has been active as a contributor to the GDAL project since more than 10
> years and has contributed to various areas of the project, in particular the
> JPIPKAK driver and the progressive rendering API, the OGR Cloudand driver, the
> WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he would be
> a good asset for the project.
> 
> Motion: To add Norman Barker to the GDAL PSC.
> 
> +1 from me.
> 
> Even
> 

From dmorissette at mapgears.com  Wed May 15 09:45:34 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 15 May 2019 11:45:34 -0500
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <2667407.srByZYhLEU@even-i700>
References: <2667407.srByZYhLEU@even-i700>
Message-ID: <4108d38d-1e9f-295c-8b82-cd4ef75f0904@mapgears.com>

+1

Daniel


On 2019-05-15 09:03, Even Rouault wrote:
> Hi,
> 
> I propose to add Norman Barker to the GDAL project steering committee.
> 
> Norman has been active as a contributor to the GDAL project since more than 10
> years and has contributed to various areas of the project, in particular the
> JPIPKAK driver and the progressive rendering API, the OGR Cloudand driver, the
> WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he would be
> a good asset for the project.
> 
> Motion: To add Norman Barker to the GDAL PSC.
> 
> +1 from me.
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From warmerdam at pobox.com  Wed May 15 10:00:45 2019
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 15 May 2019 10:00:45 -0700
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <4108d38d-1e9f-295c-8b82-cd4ef75f0904@mapgears.com>
References: <2667407.srByZYhLEU@even-i700>
 <4108d38d-1e9f-295c-8b82-cd4ef75f0904@mapgears.com>
Message-ID: <CA+YzLBeK1iA8v3JDjXSjQT1Xnj0CbuFrxakVu_LC6=uDNnUCRA@mail.gmail.com>

+1 Frank

On Wed, May 15, 2019 at 9:45 AM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1
>
> Daniel
>
>
> On 2019-05-15 09:03, Even Rouault wrote:
> > Hi,
> >
> > I propose to add Norman Barker to the GDAL project steering committee.
> >
> > Norman has been active as a contributor to the GDAL project since more
> than 10
> > years and has contributed to various areas of the project, in particular
> the
> > JPIPKAK driver and the progressive rendering API, the OGR Cloudand
> driver, the
> > WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he
> would be
> > a good asset for the project.
> >
> > Motion: To add Norman Barker to the GDAL PSC.
> >
> > +1 from me.
> >
> > Even
> >
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows |
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/b3cb1799/attachment.html>

From schwehr at gmail.com  Wed May 15 10:01:25 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 15 May 2019 10:01:25 -0700
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <CA+YzLBeK1iA8v3JDjXSjQT1Xnj0CbuFrxakVu_LC6=uDNnUCRA@mail.gmail.com>
References: <2667407.srByZYhLEU@even-i700>
 <4108d38d-1e9f-295c-8b82-cd4ef75f0904@mapgears.com>
 <CA+YzLBeK1iA8v3JDjXSjQT1Xnj0CbuFrxakVu_LC6=uDNnUCRA@mail.gmail.com>
Message-ID: <CACmBxyvCw4T2CALWsxRMhrstZx5ko2YkUBOXVdnoToLO5qqCAQ@mail.gmail.com>

+1 Kurt

On Wed, May 15, 2019 at 10:01 AM Frank Warmerdam <warmerdam at pobox.com>
wrote:

> +1 Frank
>
> On Wed, May 15, 2019 at 9:45 AM Daniel Morissette <
> dmorissette at mapgears.com> wrote:
>
>> +1
>>
>> Daniel
>>
>>
>> On 2019-05-15 09:03, Even Rouault wrote:
>> > Hi,
>> >
>> > I propose to add Norman Barker to the GDAL project steering committee.
>> >
>> > Norman has been active as a contributor to the GDAL project since more
>> than 10
>> > years and has contributed to various areas of the project, in
>> particular the
>> > JPIPKAK driver and the progressive rendering API, the OGR Cloudand
>> driver, the
>> > WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he
>> would be
>> > a good asset for the project.
>> >
>> > Motion: To add Norman Barker to the GDAL PSC.
>> >
>> > +1 from me.
>> >
>> > Even
>> >
>>
>>
>> --
>> Daniel Morissette
>> Mapgears Inc
>> T: +1 418-696-5056 #201
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows |
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/77d3d79d/attachment.html>

From szekerest at gmail.com  Wed May 15 10:10:20 2019
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 15 May 2019 19:10:20 +0200
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <2667407.srByZYhLEU@even-i700>
References: <2667407.srByZYhLEU@even-i700>
Message-ID: <CACALY+TWPmSNqpMmBJXc_vDSgwOg=x_NX7fo99RLCpmR2_jpqg@mail.gmail.com>

+1

Tamas

Even Rouault <even.rouault at spatialys.com> ezt írta (időpont: 2019. máj.
15., Sze, 16:04):

> Hi,
>
> I propose to add Norman Barker to the GDAL project steering committee.
>
> Norman has been active as a contributor to the GDAL project since more
> than 10
> years and has contributed to various areas of the project, in particular
> the
> JPIPKAK driver and the progressive rendering API, the OGR Cloudand driver,
> the
> WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he would
> be
> a good asset for the project.
>
> Motion: To add Norman Barker to the GDAL PSC.
>
> +1 from me.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/00998f96/attachment.html>

From patrick.mckendree.young at gmail.com  Wed May 15 10:17:57 2019
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 15 May 2019 11:17:57 -0600
Subject: [gdal-dev] Extracting Subsampled Mask Band from VRT Returning 1st
 Band Rather Than Mask Band
Message-ID: <CADXYQQ4GspVBdmPKJTvHtWt-G_5CmZEJSYw8sNoPY8t96gBm=g@mail.gmail.com>

Hi all,

I'm experiencing some strange behavior when extracting a mask band using
gdal_translate from a VRT vs the source GTiff at a reduced resolution.  I
have a 3 band, 8 bit JPEG compressed (YCbCR) RGB geotiff with an internal
no data mask and with internal overviews.  Making a VRT of this and running

gdal_translate -b mask in.vrt mask.tif


Returns the expected no data mask.

However, if I add in "-outsize 10% 0", I instead get the first band back as
the mask tif rather than the mask band.  Any -outsize setting has the same
effect.

Repeating this with the source geotiff rather than the vrt works as
expected.

Interestingly, running

gdalinfo -oo OVERVIEW_LEVEL=1 in.vrt

reports no mask flags set at all (they are reported without the -oo
option), but running on the original geotiff rather than the vrt does
report the mask flags.

Anyone have thoughts on what the VRT driver is doing?

Thanks,
Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/c8223aad/attachment.html>

From patrick.mckendree.young at gmail.com  Wed May 15 10:28:35 2019
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 15 May 2019 11:28:35 -0600
Subject: [gdal-dev] Extracting Subsampled Mask Band from VRT Returning
 1st Band Rather Than Mask Band
In-Reply-To: <CADXYQQ4GspVBdmPKJTvHtWt-G_5CmZEJSYw8sNoPY8t96gBm=g@mail.gmail.com>
References: <CADXYQQ4GspVBdmPKJTvHtWt-G_5CmZEJSYw8sNoPY8t96gBm=g@mail.gmail.com>
Message-ID: <CADXYQQ5+8RvnJy6cSxwmK5nVcg6xXrp17CSXjtLzxkgDg47=rQ@mail.gmail.com>

An additional data point; loading the VRT in QGIS, everything looks correct
at full resolution (e.g. alpha as transparency in the right spot) but as
you zoom out, alpha suddenly becomes the first band and the transparency is
bonkers.

On Wed, May 15, 2019 at 11:17 AM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> Hi all,
>
> I'm experiencing some strange behavior when extracting a mask band using
> gdal_translate from a VRT vs the source GTiff at a reduced resolution.  I
> have a 3 band, 8 bit JPEG compressed (YCbCR) RGB geotiff with an internal
> no data mask and with internal overviews.  Making a VRT of this and running
>
> gdal_translate -b mask in.vrt mask.tif
>
>
> Returns the expected no data mask.
>
> However, if I add in "-outsize 10% 0", I instead get the first band back
> as the mask tif rather than the mask band.  Any -outsize setting has the
> same effect.
>
> Repeating this with the source geotiff rather than the vrt works as
> expected.
>
> Interestingly, running
>
> gdalinfo -oo OVERVIEW_LEVEL=1 in.vrt
>
> reports no mask flags set at all (they are reported without the -oo
> option), but running on the original geotiff rather than the vrt does
> report the mask flags.
>
> Anyone have thoughts on what the VRT driver is doing?
>
> Thanks,
> Patrick
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/60375392/attachment-0001.html>

From howard at hobu.co  Wed May 15 12:49:51 2019
From: howard at hobu.co (Howard Butler)
Date: Wed, 15 May 2019 14:49:51 -0500
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <CACALY+TWPmSNqpMmBJXc_vDSgwOg=x_NX7fo99RLCpmR2_jpqg@mail.gmail.com>
References: <2667407.srByZYhLEU@even-i700>
 <CACALY+TWPmSNqpMmBJXc_vDSgwOg=x_NX7fo99RLCpmR2_jpqg@mail.gmail.com>
Message-ID: <765A7D80-3ABF-4AC7-B671-0AEE6EB1D899@hobu.co>

+1

Howard

> On May 15, 2019, at 12:10 PM, Tamas Szekeres <szekerest at gmail.com> wrote:
> 
> +1
> 
> Tamas
> 
> Even Rouault <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> ezt írta (időpont: 2019. máj. 15., Sze, 16:04):
> Hi,
> 
> I propose to add Norman Barker to the GDAL project steering committee.
> 
> Norman has been active as a contributor to the GDAL project since more than 10 
> years and has contributed to various areas of the project, in particular the 
> JPIPKAK driver and the progressive rendering API, the OGR Cloudand driver, the 
> WEBP codec for GeoTIFF, and recently the TileDB driver. I believe he would be 
> a good asset for the project.
> 
> Motion: To add Norman Barker to the GDAL PSC.
> 
> +1 from me.
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com <http://www.spatialys.com/>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/3c0e5383/attachment.html>

From patrick.mckendree.young at gmail.com  Wed May 15 12:51:00 2019
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 15 May 2019 13:51:00 -0600
Subject: [gdal-dev] Extracting Subsampled Mask Band from VRT Returning
 1st Band Rather Than Mask Band
In-Reply-To: <CADXYQQ4GspVBdmPKJTvHtWt-G_5CmZEJSYw8sNoPY8t96gBm=g@mail.gmail.com>
References: <CADXYQQ4GspVBdmPKJTvHtWt-G_5CmZEJSYw8sNoPY8t96gBm=g@mail.gmail.com>
Message-ID: <CADXYQQ6XaD6KDJ3zTcX=CaSfZrfXfBQJvq2ZMGxvycSXUu9NKw@mail.gmail.com>

Sorry for the multiple messages, but one more data point.

If the VRT is composed of more than one image, everything seems to work.  I
can literally do a "gdalbuildvrt out.vrt in.tif in.tif" and "gdalinfo
out.vrt" on the multiple image VRT does not report the existence of
overviews (it does for the single image VRT).  Extracting the nodata mask
on out.vrt works (e.g. its not returning the first band of the image),
although I'm not sure if its just doing a nearest neighbor resampling of
the full resolution mask or if its implicitly cracking open the underlying
geotiff's overview level.  I suppose it's the former or I wouldn't see a
difference in behavior.

Is there some optimization in the VRT driver for when their is just a
single image in the source?  Even's blog post (
http://erouault.blogspot.com/2014/10/warping-overviews-and-warped-overviews.html)
on warped VRTs (see the last section of the post) makes me think its going
straight to the overviews in the single image case, but this is turned off
when more than one image composes the VRT.  Presumably the handling of
masks in the former case is where the problem lies.

Thanks for any clues!
Patrick

On Wed, May 15, 2019 at 11:17 AM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> Hi all,
>
> I'm experiencing some strange behavior when extracting a mask band using
> gdal_translate from a VRT vs the source GTiff at a reduced resolution.  I
> have a 3 band, 8 bit JPEG compressed (YCbCR) RGB geotiff with an internal
> no data mask and with internal overviews.  Making a VRT of this and running
>
> gdal_translate -b mask in.vrt mask.tif
>
>
> Returns the expected no data mask.
>
> However, if I add in "-outsize 10% 0", I instead get the first band back
> as the mask tif rather than the mask band.  Any -outsize setting has the
> same effect.
>
> Repeating this with the source geotiff rather than the vrt works as
> expected.
>
> Interestingly, running
>
> gdalinfo -oo OVERVIEW_LEVEL=1 in.vrt
>
> reports no mask flags set at all (they are reported without the -oo
> option), but running on the original geotiff rather than the vrt does
> report the mask flags.
>
> Anyone have thoughts on what the VRT driver is doing?
>
> Thanks,
> Patrick
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/65bf393a/attachment.html>

From klassen.js at gmail.com  Wed May 15 12:52:48 2019
From: klassen.js at gmail.com (Jim Klassen)
Date: Wed, 15 May 2019 14:52:48 -0500
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <CAJf0KTQqcEavuCm3CQJUsK5bq=ZZf3BUkboOBwnKj=kUxrA_iA@mail.gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
 <2465452.Pbc1c8lu4F@even-i700>
 <CAJf0KTQNz9va0HpXLnhf1wdbOqeMfwRXo3Fmwmr648R2bs_7QA@mail.gmail.com>
 <CAJf0KTSHfhdGB1myoQy8x0pfyBS2uHD6i_KZyvjjbSz4GuVWpA@mail.gmail.com>
 <CAJf0KTQqcEavuCm3CQJUsK5bq=ZZf3BUkboOBwnKj=kUxrA_iA@mail.gmail.com>
Message-ID: <47edff21-64f9-d0f0-c2fd-8900f2db3faf@gmail.com>

I know I am late to the party, but I ran into the same thing today 
(Building Proj 6, GDAL 3 on Debian Stretch).  I got around it by setting 
LDFLAGS before running ./configure so the linker finds the proj 6 
install first.  Without setting LDFLAGS, ./configure would find the new 
proj, but libtool would try to link to the system one (by full path no 
less, not just -lproj).

So assuming proj 6 (and GDAL) is installed in $INSTALL_DIR:

export LDFLAGS="-L${INSTALL_DIR}/lib -Wl,-rpath,${INSTALL_DIR}/lib"
./configure \
                 --prefix="${INSTALL_DIR}" \
                 --with-proj="${INSTALL_DIR}"

I'm not sure if it matters, but I also set 
CMAKE_INSTALL_RPATH=$INSTALL_DIR when I build proj.


On 5/8/19 6:54 PM, Simon Eves wrote:
> I removed the system libgdal-dev and proj-bin, and then this sequence 
> worked, with ldd showing the local proj, and the apps all compile.
>
> Still convinced I'm doing something stupid and n00b, but what? Why 
> didn't the local proj DSO take priority before?
>
> On Wed, May 8, 2019 at 9:29 AM Simon Eves <simon.eves at omnisci.com 
> <mailto:simon.eves at omnisci.com>> wrote:
>
>     $ ls -l /home/simon.eves/scratch/gdal3/install/lib/
>     total 107536
>     -rw-r--r-- 1 simon.eves mapd 79490260 May  8 09:06 libproj.a
>     -rwxr-xr-x 1 simon.eves mapd      998 May  8 09:06 libproj.la
>     <http://libproj.la>
>     lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so ->
>     libproj.so.15.0.0
>     lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so.15
>     -> libproj.so.15.0.0
>     -rwxr-xr-x 1 simon.eves mapd 30610584 May  8 09:06 libproj.so.15.0.0
>     drwxr-xr-x 2 simon.eves mapd     4096 May  8 09:06 pkgconfig
>
>
>     On Wed, May 8, 2019 at 9:25 AM Simon Eves <simon.eves at omnisci.com
>     <mailto:simon.eves at omnisci.com>> wrote:
>
>         No, it shows /usr/lib/x86_64-linux-gnu/libproj.sso.12 (the
>         system-installed Proj 5.2.0)
>
>         I just did it all again from scratch...
>
>         $ echo $LD_LIBRARY_PATH
>         /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/local/mapd-deps/lib:/usr/local/cuda/lib64
>         $ cd /home/simon.eves/scratch/gdal3/
>         $ rm -rf gdal-3.0.0 proj-6.0.0 install/*
>         $ tar xzvf proj-6.0.0.tar.gz
>         $ cd proj-6.0.0/
>         $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
>         $ make -j12
>         [completes]
>         $ make install
>         [completes]
>         $ cd ..
>         $ tar xvf gdal-3.0.0rc2.tar
>         $ cd gdal-3.0.0/
>         $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
>         --without-geos --with-kml=/usr/local/mapd-deps
>         --with-proj=/home/simon.eves/scratch/gdal3/install
>         [completes, shows Proj >= 6.0 yes]
>         $ make -j12
>         [fails in first app as before]
>         $ ldd .libs/libgdal.so | grep proj
>         libproj.so.12 => /usr/lib/x86_64-linux-gnu/libproj.so.12
>         (0x00007f3d98cb3000)
>
>         What am I doing wrong, such that the combination of
>         $LD_LIBRARY_PATH priority and --with-proj still isn't making
>         GDAL see the local Proj before the system one?
>
>         Simon
>
>         On Wed, May 8, 2019 at 12:41 AM Even Rouault
>         <even.rouault at spatialys.com
>         <mailto:even.rouault at spatialys.com>> wrote:
>
>             On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
>             > That's what I have, even if that's not what I wrote.
>             >
>             > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo
>             $LD_LIBRARY_PATH
>             >
>             /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
>             > ocal/mapd-deps/lib:/usr/local/cuda/lib64:
>             > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$
>             ./configure --without-geos
>             > --with-libkml=/usr/local/mapd-deps
>             > --with-proj=/home/simon.eves/scratch/gdal3/install
>             > ...
>             > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
>             > ...
>             > (cd apps; make)
>             > make[1]: Entering directory
>             '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
>             > /bin/bash
>             /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool --mode=link
>             > --silent g++  gdalinfo_bin.lo
>             /home/simon.eves/scratch/gdal3/gdal-3.0.0/
>             > libgdal.la <http://libgdal.la> -o gdalinfo
>             >
>             /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so:
>             undefined
>             > reference to `proj_alter_name'
>             > [etc.]
>
>             Look at the output of
>
>             ldd
>             /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so
>             | grep proj
>
>             It should normally point to the libproj.so.15 of
>             /home/simon.eves/scratch/gdal3/install/lib
>
>             -- 
>             Spatialys - Geospatial professional services
>             http://www.spatialys.com
>
>
>
>         -- 
>         <http://www.omnisci.com/>
>         	
>         Simon Eves
>         Senior Graphics Engineer, Rendering Group
>         OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
>         	
>         Email: simon.eves at omnisci.com
>         <mailto:simon.eves at omnisci.com> | Cell: 	415.902.1996
>
>
>
>
>
>     -- 
>     <http://www.omnisci.com/>
>     	
>     Simon Eves
>     Senior Graphics Engineer, Rendering Group
>     OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
>     	
>     Email: simon.eves at omnisci.com <mailto:simon.eves at omnisci.com> |
>     Cell: 	415.902.1996
>
>
>
>
>
> -- 
> <http://www.omnisci.com/>
> 	
> Simon Eves
> Senior Graphics Engineer, Rendering Group
> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
> 	
> Email: simon.eves at omnisci.com <mailto:simon.eves at omnisci.com> | Cell: 
> 415.902.1996
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190515/994052e1/attachment-0001.html>

From josh at cesium.com  Wed May 15 13:27:29 2019
From: josh at cesium.com (joshl)
Date: Wed, 15 May 2019 13:27:29 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
Message-ID: <1557952049376-0.post@n6.nabble.com>

Hello,

I'm having trouble getting gdal to build with proj on linux. They are both
brought in as git submodules in a git repo and get built via cmake.

To get proj 6.0.0 to build, I had to add a small modification to its
CMakeLists.txt where it uses both the src and include folders for the
include_directories command (did not have include folder originally):
/include_directories(${PROJ4_SOURCE_DIR}/src ${PROJ4_SOURCE_DIR}/include)/

If I don't do this it will error with the following since proj/common.hpp is
in the include folder:
<proj path>/src/proj_internal.h:61:27: fatal error: proj/common.hpp: No such
file or directory

For gdal, an error occurs during the configure step. If I manually run our
configure command (or a stripped down version just using just  -with-proj)
in the gdal dir, it will fail trying to find symbols for proj:
checking for PROJ >= 6 library... checking for proj_create_from_wkt in
-lproj... no
checking for proj_create_from_wkt in -lproj... no
checking for internal_proj_create_from_wkt in -lproj... no
checking for internal_proj_create_from_wkt in -lproj... no
checking for internal_proj_create_from_wkt in -linternalproj... no
checking for internal_proj_create_from_wkt in -linternalproj... (cached) no
configure: error: PROJ 6 symbols not found

A similar failure is seen on this stack exchange post here:
https://gis.stackexchange.com/questions/317109/build-gdal-with-proj-version-6

The most common solution I found googling around seems to be using
--with-static-proj4 but that is no longer recognized as a configure script
option in gdal 3. I checked out the commit hash for gdal 2.4.1 and tried to
use --with-static-proj4 but I got the same error. 

A team member had suggested that maybe proj wasn't built with all the
necessary features for gdal so it can't find those require symbols...

Not sure what the right move is from here so any suggestions are
appreciated.

-Josh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From josh at cesium.com  Wed May 15 13:33:28 2019
From: josh at cesium.com (joshl)
Date: Wed, 15 May 2019 13:33:28 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1557952049376-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
Message-ID: <1557952408979-0.post@n6.nabble.com>

Sorry, just saw the other thread regarding this issue. At a glance didn't
seem to have the same build issue as I did but I'll comb through when I have
more time later to see it any of those suggestions moves the needle.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From klassen.js at gmail.com  Wed May 15 13:38:08 2019
From: klassen.js at gmail.com (Jim Klassen)
Date: Wed, 15 May 2019 15:38:08 -0500
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1557952049376-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
Message-ID: <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>

Did you set ./configure --with-proj=${INSTALL_DIR}?

Where INSTALL_DIR is the install directory (prefix) of proj/gdal.

I also had to set:

export LDFLAGS="-L${INSTALL_DIR}/lib -Wl,-rpath,${INSTALL_DIR}/lib"

to get gdal to actually link against the new proj (vs the system 
installed one).


On 5/15/19 3:27 PM, joshl wrote:
> Hello,
>
> I'm having trouble getting gdal to build with proj on linux. They are both
> brought in as git submodules in a git repo and get built via cmake.
>
> To get proj 6.0.0 to build, I had to add a small modification to its
> CMakeLists.txt where it uses both the src and include folders for the
> include_directories command (did not have include folder originally):
> /include_directories(${PROJ4_SOURCE_DIR}/src ${PROJ4_SOURCE_DIR}/include)/
>
> If I don't do this it will error with the following since proj/common.hpp is
> in the include folder:
> <proj path>/src/proj_internal.h:61:27: fatal error: proj/common.hpp: No such
> file or directory
>
> For gdal, an error occurs during the configure step. If I manually run our
> configure command (or a stripped down version just using just  -with-proj)
> in the gdal dir, it will fail trying to find symbols for proj:
> checking for PROJ >= 6 library... checking for proj_create_from_wkt in
> -lproj... no
> checking for proj_create_from_wkt in -lproj... no
> checking for internal_proj_create_from_wkt in -lproj... no
> checking for internal_proj_create_from_wkt in -lproj... no
> checking for internal_proj_create_from_wkt in -linternalproj... no
> checking for internal_proj_create_from_wkt in -linternalproj... (cached) no
> configure: error: PROJ 6 symbols not found
>
> A similar failure is seen on this stack exchange post here:
> https://gis.stackexchange.com/questions/317109/build-gdal-with-proj-version-6
>
> The most common solution I found googling around seems to be using
> --with-static-proj4 but that is no longer recognized as a configure script
> option in gdal 3. I checked out the commit hash for gdal 2.4.1 and tried to
> use --with-static-proj4 but I got the same error.
>
> A team member had suggested that maybe proj wasn't built with all the
> necessary features for gdal so it can't find those require symbols...
>
> Not sure what the right move is from here so any suggestions are
> appreciated.
>
> -Josh
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From mbu at teleplan.no  Thu May 16 00:18:47 2019
From: mbu at teleplan.no (Matsamentet)
Date: Thu, 16 May 2019 00:18:47 -0700 (MST)
Subject: [gdal-dev] CreateCopy() does not copy overviews of dataset?
Message-ID: <1557991127701-0.post@n6.nabble.com>

Hi all! 

I'm trying to do the following using Python: Take a GeoTIFF file as input,
and build an in-memory GeoPackage. Then build overviews on the GeoPackage,
and finally writing it out to disk. 

Before the last step, I have confirmed that the dataset contains overviews
by using GetOverviewCount() on one of its bands. I then use CreateCopy() to
write the dataset to file, but the file which is written does not contain
any overviews. Is this the intended behaviour of CreateCopy() ? If so, is
there another way to go about this? 


This is my code:

---

srcfile = 'input.tif'
outputvsimem = '/vsimem/output.gpkg'

warpoptions = gdal.WarpOptions(format='GPKG',
warpOptions='SKIP_NOSOURCE=YES', \
                                           dstAlpha=False, multithread=True)
gpkg = gdal.Warp(outputvsimem, srcfile, options=warpoptions)

overviews = [2,4,8,16,32,64,128]
gpkg.BuildOverviews('AVERAGE',overviews)

gpkgdriver = gdal.GetDriverByName('GPKG')
outputdataset = gpkgdriver.CreateCopy(outputfile, gpkg, strict=0)

outputdataset = None
gpkg = None
gdal.Unlink(outputvsimem)



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu May 16 05:56:44 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 May 2019 07:56:44 -0500
Subject: [gdal-dev] CreateCopy() does not copy overviews of dataset?
In-Reply-To: <1557991127701-0.post@n6.nabble.com>
References: <1557991127701-0.post@n6.nabble.com>
Message-ID: <2465594.Q9Lvkmzn4U@even-i700>

On jeudi 16 mai 2019 00:18:47 CDT Matsamentet wrote:
> Hi all!
> 
> I'm trying to do the following using Python: Take a GeoTIFF file as input,
> and build an in-memory GeoPackage. Then build overviews on the GeoPackage,
> and finally writing it out to disk.
> 
> Before the last step, I have confirmed that the dataset contains overviews
> by using GetOverviewCount() on one of its bands. I then use CreateCopy() to
> write the dataset to file, but the file which is written does not contain
> any overviews. Is this the intended behaviour of CreateCopy() ? If so, is
> there another way to go about this?

CreateCopy() generally don't copy overviews present in the source dataset (the 
only exception is the GTiff driver if you use the COPY_SRC_OVERVIEWS=YES 
creation option).

Your use case is just file copying.
Something along the following lines (untested) should work:

gpkg = None # to properly flush data and close the dataset
f = gdal.VSIFOpenL(outputvsimem, 'rb')
data = gdal.VSIFReadL(1, gdal.VSIStatL(outputvsimem).size, f)
gdal.VSIFCloseL(f)
with open(outputfile, 'wb') as f:
	f.write(data)
gdal.Unlink(outputvsimem)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From josh at cesium.com  Thu May 16 07:53:44 2019
From: josh at cesium.com (joshl)
Date: Thu, 16 May 2019 07:53:44 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
Message-ID: <1558018424715-0.post@n6.nabble.com>

Tried doing the LDFLAGS export but got the same errors. My full manual
./configure command (just running on command line) that I'm testing (to at
least get past this error) in the gdal git submodule dir is here:

*projInstallDir*='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4'
*gdalInstallDir*='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/gdal'
export LDFLAGS="-L$*projInstallDir*/lib -Wl,-rpath,$*projInstallDir*/lib"

./configure \
--with-proj=$*projInstallDir*/lib \
--prefix=$*gdalInstallDir*


James Klassen-2 wrote
> export LDFLAGS="-L${INSTALL_DIR}/lib -Wl,-rpath,${INSTALL_DIR}/lib"





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rdmailings at duif.net  Thu May 16 08:02:17 2019
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 16 May 2019 17:02:17 +0200
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558018424715-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
Message-ID: <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>

On 16/05/2019 16.53, joshl wrote:
> Tried doing the LDFLAGS export but got the same errors. My full manual
> ./configure command (just running on command line) that I'm testing (to at
> least get past this error) in the gdal git submodule dir is here:
> 
> *projInstallDir*='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4'
> *gdalInstallDir*='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/gdal'
> export LDFLAGS="-L$*projInstallDir*/lib -Wl,-rpath,$*projInstallDir*/lib"
> 
> ./configure \
> --with-proj=$*projInstallDir*/lib \
> --prefix=$*gdalInstallDir*
> 
> James Klassen-2 wrote
>> export LDFLAGS="-L${INSTALL_DIR}/lib -Wl,-rpath,${INSTALL_DIR}/lib"

Hi James,

Not sure if it is comparable with your setup, but I was just able to
compile QGIS with GDAL 3.0.0 with Proj 6.0.0 on Debian testing, by doing
this 'renaming' trick:

https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev

checking if libgdal.so was indeed linked to libinternalproj.

and then ( as Even proposed in
https://lists.osgeo.org/pipermail/qgis-developer/2019-May/057309.html )
using -DCMAKE_CXX_FLAGS=-DPROJ_RENAME_SYMBOLS in the ccmake of QGIS

( but as said, maybe your setup is more complex, and I understand just
half what I'm doing :-) )

Regards,

Richard Duivenvoorde

From simon.eves at omnisci.com  Thu May 16 09:29:01 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Thu, 16 May 2019 09:29:01 -0700
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
Message-ID: <CAJf0KTSafnNCFF0_VyY4LNRwx2sNGG_P6nG6C1r+Wn5cic75Gw@mail.gmail.com>

Well, I'm glad it's not just me. I was getting worried there for a while...

On Thu, May 16, 2019 at 8:02 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 16/05/2019 16.53, joshl wrote:
> > Tried doing the LDFLAGS export but got the same errors. My full manual
> > ./configure command (just running on command line) that I'm testing (to
> at
> > least get past this error) in the gdal git submodule dir is here:
> >
> >
> *projInstallDir*='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4'
> >
> *gdalInstallDir*='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/gdal'
> > export LDFLAGS="-L$*projInstallDir*/lib -Wl,-rpath,$*projInstallDir*/lib"
> >
> > ./configure \
> > --with-proj=$*projInstallDir*/lib \
> > --prefix=$*gdalInstallDir*
> >
> > James Klassen-2 wrote
> >> export LDFLAGS="-L${INSTALL_DIR}/lib -Wl,-rpath,${INSTALL_DIR}/lib"
>
> Hi James,
>
> Not sure if it is comparable with your setup, but I was just able to
> compile QGIS with GDAL 3.0.0 with Proj 6.0.0 on Debian testing, by doing
> this 'renaming' trick:
>
> https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev
>
> checking if libgdal.so was indeed linked to libinternalproj.
>
> and then ( as Even proposed in
> https://lists.osgeo.org/pipermail/qgis-developer/2019-May/057309.html )
> using -DCMAKE_CXX_FLAGS=-DPROJ_RENAME_SYMBOLS in the ccmake of QGIS
>
> ( but as said, maybe your setup is more complex, and I understand just
> half what I'm doing :-) )
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190516/733914f3/attachment-0001.html>

From josh at cesium.com  Thu May 16 10:35:22 2019
From: josh at cesium.com (joshl)
Date: Thu, 16 May 2019 10:35:22 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
Message-ID: <1558028122210-0.post@n6.nabble.com>

Thanks for the info Richard.

Right now I'm having issues running proj's ./configure. We build sqlite3
statically using the sqlite-amalgamation, the version we use is 3.26.0.

Using https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev as a guide,
the configure script is unable to find sqlite3. 

The error is:
checking for SQLITE3... configure: error: Package requirements (sqlite3 >=
3.7) were not met:
No package 'sqlite3' found
Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.
Alternatively, you may set the environment variables SQLITE3_CFLAGS
and SQLITE3_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.


The manual test commands I am using:
projSubmoduleDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/ThirdParty/proj.4'
cd $projSubmoduleDir
sqlite3InstallDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build'
ls $sqlite3InstallDir/lib
libsqlite3.a  libz.a

./autogen.sh
projInstallDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4'
CXXFLAGS="-DPROJ_RENAME_SYMBOLS -O2"
CFLAGS=$CXXFLAGS
LDFLAGS="-L$sqlite3InstallDir/lib"
./configure --prefix=$projInstallDir

--disable-static wasn't listed in ./configure -h but I think the same thing
can be had with --enable-static=no. Either way I still get the sqlite3
error.





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu May 16 10:58:32 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 May 2019 12:58:32 -0500
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558028122210-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com>
Message-ID: <11807534.YbRhbdbDNq@even-i700>

On jeudi 16 mai 2019 10:35:22 CDT joshl wrote:
> Thanks for the info Richard.
> 
> Right now I'm having issues running proj's ./configure. We build sqlite3
> statically using the sqlite-amalgamation, the version we use is 3.26.0.
> 
> Using https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev as a guide,
> the configure script is unable to find sqlite3.
> 
> The error is:
> checking for SQLITE3... configure: error: Package requirements (sqlite3 >=
> 3.7) were not met:
> No package 'sqlite3' found
> Consider adjusting the PKG_CONFIG_PATH environment variable if you
> installed software in a non-standard prefix.
> Alternatively, you may set the environment variables SQLITE3_CFLAGS
> and SQLITE3_LIBS to avoid the need to call pkg-config.
> See the pkg-config man page for more details.
> 
> 
> The manual test commands I am using:
> projSubmoduleDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/ThirdPart
> y/proj.4' cd $projSubmoduleDir
> sqlite3InstallDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build'
> ls $sqlite3InstallDir/lib
> libsqlite3.a  libz.a
> 
> ./autogen.sh
> projInstallDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/Third
> Party/proj.4' CXXFLAGS="-DPROJ_RENAME_SYMBOLS -O2"
> CFLAGS=$CXXFLAGS
> LDFLAGS="-L$sqlite3InstallDir/lib"
> ./configure --prefix=$projInstallDir
> 
> --disable-static wasn't listed in ./configure -h but I think the same thing
> can be had with --enable-static=no. Either way I still get the sqlite3
> error.

Did you try the hints given in the error message

That is set

PKG_CONFIG_PATH="$sqlite3InstallDir/lib/pkgconfig"

or

SQLITE3_CFLAGS="-I$sqlite3InstallDir/include"
SQLITE3_LIBS="-L$sqlite3InstallDir/lib -lsqlite3"

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From josh at cesium.com  Thu May 16 11:46:53 2019
From: josh at cesium.com (joshl)
Date: Thu, 16 May 2019 11:46:53 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <11807534.YbRhbdbDNq@even-i700>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
Message-ID: <1558032413607-0.post@n6.nabble.com>

Thanks Even, setting up the two SQLITE3 vars seemed to get past one of the
sqlite errors, but now I need to find out where our manually built sqlite3
binary is since its complaining about that now. Though I'm not sure which
flags that info will need to get passed to.

current error output:
checking for SQLITE3... yes
checking for sqlite3... no
configure: error: Please install sqlite3 binary.

current PROJ 6 manual install test commands:
projDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/ThirdParty/proj.4'
projInstallDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4'
sqlite3Dir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/ThirdParty/sqlite-amalgamation'
sqlite3InstallDir='/home/loshjawrence/clonesRedo/agi-asset-pipeline/build'

ls $sqlite3InstallDir/lib
libsqlite3.a  libz.a

ls $sqlite3Dir
CMakeLists.txt  shell.c  sqlite3.c  sqlite3.h  sqlite3ext.h

cd $projDir

./autogen.sh
export CXXFLAGS="-DPROJ_RENAME_SYMBOLS -O2"
export CFLAGS=$CXXFLAGS
export SQLITE3_CFLAGS="-I$sqlite3Dir"
export SQLITE3_LIBS="-L$sqlite3InstallDir/lib -lsqlite3"
./configure --prefix=$projInstallDir




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu May 16 11:59:14 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 May 2019 13:59:14 -0500
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558032413607-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
 <11807534.YbRhbdbDNq@even-i700> <1558032413607-0.post@n6.nabble.com>
Message-ID: <9115585.oWlhjAZBIX@even-i700>

On jeudi 16 mai 2019 11:46:53 CDT joshl wrote:
> Thanks Even, setting up the two SQLITE3 vars seemed to get past one of the
> sqlite errors, but now I need to find out where our manually built sqlite3
> binary is since its complaining about that now. Though I'm not sure which
> flags that info will need to get passed to.

Just make sure the PATH contains the directory where the sqlite3 binary is, so 
likely

PATH="$sqlite3InstallDir/bin:"$PATH"

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From josh at cesium.com  Thu May 16 12:37:07 2019
From: josh at cesium.com (joshl)
Date: Thu, 16 May 2019 12:37:07 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <9115585.oWlhjAZBIX@even-i700>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
Message-ID: <1558035427231-0.post@n6.nabble.com>

We have a sqlite3_shell binary that gets built, not sure if this is
interchangeable / same thing as the sqlite3 binary that it wants. 

ls $sqlite3InstallDir/bin
sqlite3_shell




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri May 17 07:12:40 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 May 2019 09:12:40 -0500
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <2667407.srByZYhLEU@even-i700>
References: <2667407.srByZYhLEU@even-i700>
Message-ID: <1746774.secO0clFFj@even-i700>

Hi,

> Motion: To add Norman Barker to the GDAL PSC.

I declare this motion passed with +1 from PSC members: DanielM, FrankW, KurtS, 
ThamasS, HowardB and me.

Welcome aboard Norman !

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From norman.barker at gmail.com  Fri May 17 07:23:41 2019
From: norman.barker at gmail.com (Norman Barker)
Date: Fri, 17 May 2019 09:23:41 -0500
Subject: [gdal-dev] Motion: Add Norman Barker to GDAL PSC
In-Reply-To: <1746774.secO0clFFj@even-i700>
References: <2667407.srByZYhLEU@even-i700> <1746774.secO0clFFj@even-i700>
Message-ID: <CAN_Dn-Hu-OFG3PDT9npyeaHJ6EoD5h61JpG4ONczMJbW4EA=6w@mail.gmail.com>

Even,

thank you! I am looking forward to contributing more to the project.

Norman

On Fri, May 17, 2019 at 9:13 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> > Motion: To add Norman Barker to the GDAL PSC.
>
> I declare this motion passed with +1 from PSC members: DanielM, FrankW,
> KurtS,
> ThamasS, HowardB and me.
>
> Welcome aboard Norman !
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190517/2055403d/attachment.html>

From josh at cesium.com  Fri May 17 11:46:43 2019
From: josh at cesium.com (joshl)
Date: Fri, 17 May 2019 11:46:43 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558035427231-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com>
Message-ID: <1558118803143-0.post@n6.nabble.com>

For the error:
checking for SQLITE3... yes
checking for sqlite3... no
configure: error: Please install sqlite3 binary.

I first tried adding the install dir of our sqlite3 shell executable to the
$PATH var:
> ls $sqlite3InstallDir/bin
sqlite3_shell
> PATH="$sqlite3InstallDir/bin:$PATH"
> echo $PATH | sed 's#\:#\n#g' | grep build/bin
/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/bin

Still got the error, so I tried actually installing sqlite3 to see what the
name of the official executable was:
>sudo apt-get update 
>sudo apt-get install sqlite3
>ls -la /usr/bin | grep sqlite3
sqlite3

With the real one installed I tried running again just to see if it could
find it but still got the error (verified $PATH included /usr/bin). I also
tried renaming our cmake generated SQLITE3_EXE named sqlite3_shell to
sqlite3 to see if it could find it, but it did not.

So at the moment I am unsure how to get the configure script to discover an
executable named sqlite3...






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From josh at cesium.com  Fri May 17 13:29:07 2019
From: josh at cesium.com (joshl)
Date: Fri, 17 May 2019 13:29:07 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558118803143-0.post@n6.nabble.com>
References: <1557952049376-0.post@n6.nabble.com>
 <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com> <1558118803143-0.post@n6.nabble.com>
Message-ID: <1558124947504-0.post@n6.nabble.com>

Ok, was able to get the proj configure script to go all the way through with
the official sqlite3 binary installed via apt-get and using our generated
libsqlite3.a and the amalgamation files for the include files

Now I just need to figure out how to get the proj configure script to use a
user generated sqlite3 binary.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From josh at cesium.com  Fri May 17 14:08:09 2019
From: josh at cesium.com (joshl)
Date: Fri, 17 May 2019 14:08:09 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558124947504-0.post@n6.nabble.com>
References: <156c61c4-e50e-cd90-b588-ce8b1f38e42d@gmail.com>
 <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com> <1558118803143-0.post@n6.nabble.com>
 <1558124947504-0.post@n6.nabble.com>
Message-ID: <1558127289477-0.post@n6.nabble.com>

I removed the official sqlite3 binary. Then I renamed our sqlite3_shell
(binary we generate but for some reason has a _shell appended)but like
before, configure couldn't discover it.

I did a 
sudo mv $sqlite3InstallDir/bin/sqlite3 /usr/bin 
and it was able to find it. I tried other directories listed for echo $PATH
and it was able to find it. Even though the full path of
$sqlite3InstallDir/bin was listed in echo $PATH, configure couldn't discover
it. 

I guessed this meant what I saw for $PATH from the command line was
different than what configure saw for $PATH, so I stuck an export in front
of PATH="$sqlite3InstallDir/bin":$PATH and then it was able to find it.
Hopefully not many more issues ahead of me...





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From lucianpls at yahoo.com  Fri May 17 14:14:21 2019
From: lucianpls at yahoo.com (Lucian Plesea)
Date: Fri, 17 May 2019 21:14:21 +0000 (UTC)
Subject: [gdal-dev] COG w/JPEG YCbCr mask
References: <1178626121.1923027.1558127661802.ref@mail.yahoo.com>
Message-ID: <1178626121.1923027.1558127661802@mail.yahoo.com>

Hi Even,
I just read your COG notice from May 3rd.  Are you aware of the approach I've used to achieve the same outcome in MRF JPEG?
Most of the code is in https://github.com/OSGeo/gdal/blob/master/gdal/frmts/mrf/JPEG_band.cppIt inserts an RLE encoded bit mask in theJPEG itself as an application specific chunk (Zen) instead of having it as aseparate entity.  I usesthe mask to only keep the locations with zero fixed (thus the Zen name),instead of exposing the mask to GDAL.  Then the zero value can be declared as NoData, eliminating the noisy JPEG edge issue.This service uses it: http://www.arcgis.com/home/webmap/viewer.html?useExisting=1&layers=c1c4c750a2154842ae523c984cc14fa5

The Zen chunk could be exposed as a mask, but then you have the headache of getting themask and the normal bands read and written together, which is not trivial asfar as I can tell.  It could also be exposed as a full alpha band.  As far as I can tell, the NoData approach has significantly less overhead, no extra band blocks to handle.  The Zen chunk in JPEG is ignored by older decoders, so it is backwards compatible.

Lucian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190517/b1336696/attachment-0001.html>

From even.rouault at spatialys.com  Fri May 17 19:50:06 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 May 2019 21:50:06 -0500
Subject: [gdal-dev] COG w/JPEG YCbCr mask
In-Reply-To: <1178626121.1923027.1558127661802@mail.yahoo.com>
References: <1178626121.1923027.1558127661802.ref@mail.yahoo.com>
 <1178626121.1923027.1558127661802@mail.yahoo.com>
Message-ID: <2191218.bXCyWf5t2y@even-i700>

Hi Lucian,

thanks for sharing your thoughts about this. I considered initially something 
pretty much identical to your proposal. The GDAL JPEG driver has actually a 
probably not so known feature where a zlib-compressed transparency mask can be 
appended after the JPEG payload (it is not nicer as using a JFIF marker as you 
suggest). But as TIFF has an official way of encoding a transparency mask, I 
think it is better for interoperability to use that mechanism. What I proposed 
should achieve pretty much the same performance level as what you suggest, 
except that it requires to write an additional IFD and its TileOffsets & 
TileByteCounts arrays that a smart reader can avoid reading.

Even

> Hi Even,
> I just read your COG notice from May 3rd.  Are you aware of the approach
> I've used to achieve the same outcome in MRF JPEG? Most of the code is in
> https://github.com/OSGeo/gdal/blob/master/gdal/frmts/mrf/JPEG_band.cppIt
> inserts an RLE encoded bit mask in theJPEG itself as an application
> specific chunk (Zen) instead of having it as aseparate entity.  I usesthe
> mask to only keep the locations with zero fixed (thus the Zen name),instead
> of exposing the mask to GDAL.  Then the zero value can be declared as
> NoData, eliminating the noisy JPEG edge issue.This service uses it:
> http://www.arcgis.com/home/webmap/viewer.html?useExisting=1&layers=c1c4c750
> a2154842ae523c984cc14fa5
> 
> The Zen chunk could be exposed as a mask, but then you have the headache of
> getting themask and the normal bands read and written together, which is
> not trivial asfar as I can tell.  It could also be exposed as a full alpha
> band.  As far as I can tell, the NoData approach has significantly less
> overhead, no extra band blocks to handle.  The Zen chunk in JPEG is ignored
> by older decoders, so it is backwards compatible.
> 
> Lucian


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From davidmck at austin.rr.com  Fri May 17 21:43:54 2019
From: davidmck at austin.rr.com (David McKenzie)
Date: Fri, 17 May 2019 23:43:54 -0500
Subject: [gdal-dev] COG w/JPEG YCbCr mask
In-Reply-To: <1178626121.1923027.1558127661802@mail.yahoo.com>
References: <1178626121.1923027.1558127661802.ref@mail.yahoo.com>
 <1178626121.1923027.1558127661802@mail.yahoo.com>
Message-ID: <3F80D69D17A245E39EF9CFC47BB09F46@Win8Pro>

Please remove this address for David McKenzie from your mailing list.
He passed away December 2016.
Thank you,
M.H. McKenzie
May 2019

From: Lucian Plesea 
Sent: Friday, May 17, 2019 4:14 PM
To: gdal-dev at lists.osgeo.org ; Even Rouault 
Subject: [gdal-dev] COG w/JPEG YCbCr mask

Hi Even,

I just read your COG notice from May 3rd.  Are you aware of the approach I've used to achieve the same outcome in MRF JPEG?

Most of the code is in https://github.com/OSGeo/gdal/blob/master/gdal/frmts/mrf/JPEG_band.cpp
It inserts an RLE encoded bit mask in the JPEG itself as an application specific chunk (Zen) instead of having it as a separate entity.  I uses the mask to only keep the locations with zero fixed (thus the Zen name), instead of exposing the mask to GDAL.  Then the zero value can be declared as NoData, eliminating the noisy JPEG edge issue.
This service uses it: http://www.arcgis.com/home/webmap/viewer.html?useExisting=1&layers=c1c4c750a2154842ae523c984cc14fa5



The Zen chunk could be exposed as a mask, but then you have the headache of getting the mask and the normal bands read and written together, which is not trivial as far as I can tell.  It could also be exposed as a full alpha band.  As far as I can tell, the NoData approach has significantly less overhead, no extra band blocks to handle.  The Zen chunk in JPEG is ignored by older decoders, so it is backwards compatible.


Lucian



--------------------------------------------------------------------------------
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190517/00627551/attachment.html>

From howard at hobu.co  Sun May 19 09:54:52 2019
From: howard at hobu.co (Howard Butler)
Date: Sun, 19 May 2019 11:54:52 -0500
Subject: [gdal-dev] RFC 74: Migrate gdal.org to Sphinx
Message-ID: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>

All,

A successful OSGeo Community Sprint [1] saw myself, Even Rouault, Mateusz Loskot, and Dan Baston furiously migrating and organizing gdal.org <http://gdal.org/> content into a Sphinx-based organization. An example of that effort can be seen on https://gdal.dev <https://gdal.dev/> It is an architecture modeled on other projects such as proj4.org <http://proj4.org/>, gdal.org <http://gdal.org/>, and mapserver.org <http://mapserver.org/> that leverages continuous integration for rendering of the content, GitHub pages for the content delivery, and GitHub for the content management. 

RFC 74 formalizes the migration, provides its justification, and gives more details on the effort. 

https://trac.osgeo.org/gdal/wiki/rfc74_sphinx <https://trac.osgeo.org/gdal/wiki/rfc74_sphinx>

Howard


[1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2019 <https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2019>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190519/15150b13/attachment.html>

From schwehr at gmail.com  Sun May 19 10:02:13 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 19 May 2019 10:02:13 -0700
Subject: [gdal-dev] RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
References: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
Message-ID: <CACmBxyubkfMNOiZUfjStvtJAoHPr1RHoDXPu=tu=zjVPzsOspg@mail.gmail.com>

Awesome!

On Sun, May 19, 2019, 9:55 AM Howard Butler <howard at hobu.co> wrote:

> All,
>
> A successful OSGeo Community Sprint [1] saw myself, Even Rouault, Mateusz
> Loskot, and Dan Baston furiously migrating and organizing gdal.org content
> into a Sphinx-based organization. An example of that effort can be seen on
> https://gdal.dev It is an architecture modeled on other projects such as
> proj4.org, gdal.org, and mapserver.org that leverages continuous
> integration for rendering of the content, GitHub pages for the content
> delivery, and GitHub for the content management.
>
> RFC 74 formalizes the migration, provides its justification, and gives
> more details on the effort.
>
> https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
>
> Howard
>
>
> [1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2019
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190519/55a70199/attachment.html>

From vincent.sarago at gmail.com  Sun May 19 10:51:05 2019
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Sun, 19 May 2019 13:51:05 -0400
Subject: [gdal-dev] RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
References: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
Message-ID: <4257E308-469B-44EE-B9A5-B6021111916F@gmail.com>

Thanks for working on this, it looks awesome! 

> Le 19 mai 2019 à 12:54, Howard Butler <howard at hobu.co> a écrit :
> 
> All,
> 
> A successful OSGeo Community Sprint [1] saw myself, Even Rouault, Mateusz Loskot, and Dan Baston furiously migrating and organizing gdal.org <http://gdal.org/> content into a Sphinx-based organization. An example of that effort can be seen on https://gdal.dev <https://gdal.dev/> It is an architecture modeled on other projects such as proj4.org <http://proj4.org/>, gdal.org <http://gdal.org/>, and mapserver.org <http://mapserver.org/> that leverages continuous integration for rendering of the content, GitHub pages for the content delivery, and GitHub for the content management. 
> 
> RFC 74 formalizes the migration, provides its justification, and gives more details on the effort. 
> 
> https://trac.osgeo.org/gdal/wiki/rfc74_sphinx <https://trac.osgeo.org/gdal/wiki/rfc74_sphinx>
> 
> Howard
> 
> 
> [1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2019 <https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2019>_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190519/d22c21f3/attachment.html>

From nyall.dawson at gmail.com  Sun May 19 17:39:34 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 20 May 2019 10:39:34 +1000
Subject: [gdal-dev] RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
References: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
Message-ID: <CAB28Asi2YHCtOH8FpdUktrXa_AkQsNZeb8u9KZr=u39KJz9OGw@mail.gmail.com>

On Mon, 20 May 2019 at 02:55, Howard Butler <howard at hobu.co> wrote:
>
> All,
>
> A successful OSGeo Community Sprint [1] saw myself, Even Rouault, Mateusz Loskot, and Dan Baston furiously migrating and organizing gdal.org content into a Sphinx-based organization. An example of that effort can be seen on https://gdal.dev It is an architecture modeled on other projects such as proj4.org, gdal.org, and mapserver.org that leverages continuous integration for rendering of the content, GitHub pages for the content delivery, and GitHub for the content management.
>
> RFC 74 formalizes the migration, provides its justification, and gives more details on the effort.
>
> https://trac.osgeo.org/gdal/wiki/rfc74_sphinx

That's a **huge** improvement, well done!

Nyall

From aurelien.vila at delair.aero  Mon May 20 03:04:55 2019
From: aurelien.vila at delair.aero (Aurelien Vila)
Date: Mon, 20 May 2019 12:04:55 +0200
Subject: [gdal-dev] 3D transformation of DSM
Message-ID: <CAL7JBY_nVKYenma+MWc+yw3r+cNYpP8FU4yL0AupdXxCbGcd3w@mail.gmail.com>

Hello All,

I have to transform a DSM from a local CRS such as those produced by the
trimble site calibration process ( :
https://help.trimblegeospatial.com/TrimbleAccess/2018.10/en/Calibration.htm),
to WGS84 ellipsoidal coordinates.
The local CRS is defined by a projection (in this case transverse mercator)
plus vertical and horizontal adjustment. Horizontal adjustment is a 2D
similarity and thus can be described with a 2D Helmert transform. Vertical
adjustement is a geoid model in the form of an inclined plane thus it could
be described using an affine transform.
I have written a proj pipeline able to realize this transformation. It
works great for vector file transformations (thanks to the new GDAL 3
release) but it doesn't work for DSM transformation since the affine
transform step used for the vertical adjustment seems to be not supported
by gdalwarp (the pixels values stay unchanged).
I guess that gdalwarp only support vertical grid shift to handle pixel
value modifications, but anybody can confirm me this ?
If no, which method can accomplish this DSM transformation ? If yes, do you
plan to support other 3D transformation with gdalwarp at short or mid terms
?

Best regards


<http://bit.ly/delair-home-signature>
<http://bit.ly/delair-twitter> <http://bit.ly/delair-linkedin>
<http://bit.ly/delair-facebook> <http://bit.ly/delair-youtube>
<http://bit.ly/delair-instagram>

Aurélien Vila
Computer Vision Engineer

676, Rue Max Planck – 31670 Labège - FRANCE
Tel: +33 9 71 16 99 01

www.delair.aero <http://bit.ly/delair-home-signature>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190520/fee57667/attachment.html>

From josh at cesium.com  Mon May 20 11:18:59 2019
From: josh at cesium.com (joshl)
Date: Mon, 20 May 2019 11:18:59 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558127289477-0.post@n6.nabble.com>
References: <1558018424715-0.post@n6.nabble.com>
 <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com> <1558118803143-0.post@n6.nabble.com>
 <1558124947504-0.post@n6.nabble.com> <1558127289477-0.post@n6.nabble.com>
Message-ID: <1558376339125-0.post@n6.nabble.com>

Looking at the solution on
https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev

I was only able to build proj 6 as a static library. There was an error when
I tried to use --enable-shared=yes:
 -Wl,libproj.so.15 -o .libs/libproj.so.15.1.0
/usr/bin/x86_64-linux-gnu-ld:
/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/lib/libsqlite3.a(sqlite3.c.o):
relocation R_X86_64_PC32 against symbol `sqlite3_free' can not be used when
making a shared object; recompile with -fPIC

I tried adding -fPIC to the export CXXFLAGS= command before running the proj
configure script but that didn't resolve the error generated during make -j4

I also tried continuing on with the static prog library (without doing those
other renaming and patchelf commands) but kept getting the same errors about
gdal's configure script not being able to find proj. 

Is a shared proj libarary required for this to work?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From hyoklee at hdfgroup.org  Mon May 20 11:45:49 2019
From: hyoklee at hdfgroup.org (Joe Lee)
Date: Mon, 20 May 2019 18:45:49 +0000
Subject: [gdal-dev] Does /vsis3 work for HDF4?
Message-ID: <CADeM3-xPjsZfMjX9j0yGU8Px05CPawTzVcjHfMKvw3R0Ln8YtQ@mail.gmail.com>

Hi,

  I have a quick question.
  I know that /vsis3 work for HDF5.

  How about HDF4?
  Does /vsis3 also work for HDF4?

  Regards,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190520/abbda203/attachment.html>

From jmcclain at azavea.com  Mon May 20 12:35:35 2019
From: jmcclain at azavea.com (James McClain)
Date: Mon, 20 May 2019 15:35:35 -0400
Subject: [gdal-dev] Does /vsis3 work for HDF4?
In-Reply-To: <CADeM3-xPjsZfMjX9j0yGU8Px05CPawTzVcjHfMKvw3R0Ln8YtQ@mail.gmail.com>
References: <CADeM3-xPjsZfMjX9j0yGU8Px05CPawTzVcjHfMKvw3R0Ln8YtQ@mail.gmail.com>
Message-ID: <CADWHhRhP_jC2TmCze=_D-Lma6vn7c-_+14vHW1uy9gskpA0e5w@mail.gmail.com>

Hello,

I don't believe that it does currently.

Originally, support for HDF5 and NetCDF both used the cpl_userfaultfd
mechanism
https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_userfaultfd.cpp).
The thing that prevented HDF4 from using that mechanism was that its
underlying library did not have the ability to operate on a block of memory
(the cpl_userfaultfd provides a user-mode page fault handler that fills
pages on demand using the VSI mechanism).

It is my recollection that a more direct method was found for HDF5 so that
it no longer uses cpl_userfaultfd; perhaps a similarly more direct
mechanism exists in HDF4?  I do not know whether it does or does not.

Sincerely,
James McClain


On Mon, May 20, 2019 at 2:45 PM Joe Lee <hyoklee at hdfgroup.org> wrote:

> Hi,
>
>   I have a quick question.
>   I know that /vsis3 work for HDF5.
>
>   How about HDF4?
>   Does /vsis3 also work for HDF4?
>
>   Regards,
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
James McClain
Software Developer
Azavea  |  990 Spring Garden Street, 5th Floor, Philadelphia, PA 19123
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190520/8744bdd3/attachment.html>

From josh at cesium.com  Mon May 20 13:48:11 2019
From: josh at cesium.com (joshl)
Date: Mon, 20 May 2019 13:48:11 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558376339125-0.post@n6.nabble.com>
References: <4af90bab-c4a8-4f2d-ca13-a91336ca5cad@duif.net>
 <1558028122210-0.post@n6.nabble.com> <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com> <1558118803143-0.post@n6.nabble.com>
 <1558124947504-0.post@n6.nabble.com> <1558127289477-0.post@n6.nabble.com>
 <1558376339125-0.post@n6.nabble.com>
Message-ID: <1558385291656-0.post@n6.nabble.com>

Trying to go through the instructions as-is (apt-get install sqlite3 bin and
lib, rename proj's .so libs, run patchelf, etc.) from
https://trac.osgeo.org/gdal/wiki/BuildingOnUnixGDAL25dev

The gdal configure script is still unable to find proj. Looking through the
config.log, I see there are two -lproj flags in some gcc command involved
with test compile with a proj function, wonder if that's causing issues.
Also it thinks it should link statically so I guess it's not detecting the
shared lib from any provided path?

Part of config.log where it starts to do the test compiles:
configure:34790: checking how to link PROJ library
configure:34831: result: link statically.
configure:34954: checking for proj_create in -lproj
configure:34979: gcc -o conftest -DHAVE_AVX_AT_COMPILE_TIME
-DHAVE_SSSE3_AT_COMPILE_TIME -DHAVE_SSE_AT_COMPILE_TIME -g -O2 -fPIC  
conftest.c -lproj 
-L/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4/lib
-lproj  -lsqlite3 -lexpat -ljpeg -lpng -lz -lpthread -lm -lrt -ldl  -lpcre
>&5
/usr/bin/x86_64-linux-gnu-ld: cannot find -lproj
/usr/bin/x86_64-linux-gnu-ld: cannot find -lproj
collect2: error: ld returned 1 exit status
configure:34979: $? = 1



> ls
> /home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4/lib
libinternalproj.so  libinternalproj.so.15  libinternalproj.so.15.1.0 
pkgconfig



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon May 20 14:54:40 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 20 May 2019 23:54:40 +0200
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
Message-ID: <1815853.Hg7EJSKe9E@even-i700>

Hi,

I believe we are now in a state where the prototype new website is functional 
and should have content at least equivalent to the current one, so I motion to 
adopt RFC74: Migrate gdal.org to Sphinx:

	https://trac.osgeo.org/gdal/wiki/rfc74_sphinx

-----------

Starting with my +1

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Mon May 20 15:52:40 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 20 May 2019 15:52:40 -0700
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <1815853.Hg7EJSKe9E@even-i700>
References: <1815853.Hg7EJSKe9E@even-i700>
Message-ID: <CACmBxyvpz_sMA0n5tqwVRM383ELu591+1345DEUHb17PMy1z+w@mail.gmail.com>

+1 KurtS

On Mon, May 20, 2019 at 2:55 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I believe we are now in a state where the prototype new website is
> functional
> and should have content at least equivalent to the current one, so I
> motion to
> adopt RFC74: Migrate gdal.org to Sphinx:
>
>         https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
>
> -----------
>
> Starting with my +1
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190520/7f50a6ce/attachment.html>

From howard at hobu.co  Mon May 20 19:57:13 2019
From: howard at hobu.co (Howard Butler)
Date: Mon, 20 May 2019 21:57:13 -0500
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <CACmBxyvpz_sMA0n5tqwVRM383ELu591+1345DEUHb17PMy1z+w@mail.gmail.com>
References: <1815853.Hg7EJSKe9E@even-i700>
 <CACmBxyvpz_sMA0n5tqwVRM383ELu591+1345DEUHb17PMy1z+w@mail.gmail.com>
Message-ID: <B57D1AAE-7A86-4C2B-965A-40305FE45B0D@hobu.co>

+1 Howard

> On May 20, 2019, at 5:52 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
> 
> +1 KurtS
> 
> On Mon, May 20, 2019 at 2:55 PM Even Rouault <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
> Hi,
> 
> I believe we are now in a state where the prototype new website is functional 
> and should have content at least equivalent to the current one, so I motion to 
> adopt RFC74: Migrate gdal.org <http://gdal.org/> to Sphinx:
> 
>         https://trac.osgeo.org/gdal/wiki/rfc74_sphinx <https://trac.osgeo.org/gdal/wiki/rfc74_sphinx>
> 
> -----------
> 
> Starting with my +1
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com <http://www.spatialys.com/>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> 
> -- 
> --
> http://schwehr.org <http://schwehr.org/>_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190520/67a62c97/attachment.html>

From dmorissette at mapgears.com  Mon May 20 19:59:43 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 20 May 2019 22:59:43 -0400
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <1815853.Hg7EJSKe9E@even-i700>
References: <1815853.Hg7EJSKe9E@even-i700>
Message-ID: <075e002f-7ab5-2e02-6d64-50f7f90e4e4a@mapgears.com>

+1

Daniel

On 2019-05-20 16:54, Even Rouault wrote:
> Hi,
> 
> I believe we are now in a state where the prototype new website is functional
> and should have content at least equivalent to the current one, so I motion to
> adopt RFC74: Migrate gdal.org to Sphinx:
> 
> 	https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
> 
> -----------
> 
> Starting with my +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From norman.barker at gmail.com  Mon May 20 20:07:46 2019
From: norman.barker at gmail.com (Norman Barker)
Date: Mon, 20 May 2019 22:07:46 -0500
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <075e002f-7ab5-2e02-6d64-50f7f90e4e4a@mapgears.com>
References: <1815853.Hg7EJSKe9E@even-i700>
 <075e002f-7ab5-2e02-6d64-50f7f90e4e4a@mapgears.com>
Message-ID: <CAN_Dn-FchRRdwDHHngXRKfGzWKX5-ARvdqUovmmzqM8df4rcwQ@mail.gmail.com>

+1 Norman

On Mon, May 20, 2019 at 9:59 PM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1
>
> Daniel
>
> On 2019-05-20 16:54, Even Rouault wrote:
> > Hi,
> >
> > I believe we are now in a state where the prototype new website is
> functional
> > and should have content at least equivalent to the current one, so I
> motion to
> > adopt RFC74: Migrate gdal.org to Sphinx:
> >
> >       https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
> >
> > -----------
> >
> > Starting with my +1
> >
> > Even
> >
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190520/7517d797/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 20 23:37:59 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 20 May 2019 23:37:59 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <1815853.Hg7EJSKe9E@even-i700>
References: <1815853.Hg7EJSKe9E@even-i700>
Message-ID: <1558420679568-0.post@n6.nabble.com>

+1

-Jukka-


Even Rouault-2 wrote
> Hi,
> 
> I believe we are now in a state where the prototype new website is
> functional 
> and should have content at least equivalent to the current one, so I
> motion to 
> adopt RFC74: Migrate gdal.org to Sphinx:
> 
> 	https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
> 
> -----------
> 
> Starting with my +1
> 
> Even





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue May 21 03:11:11 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 May 2019 12:11:11 +0200
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <CACqBkM-PPkcbgT066-ju1WSHNRCSCjLwmdkS9oiGvGmQJd3qpA@mail.gmail.com>
References: <1815853.Hg7EJSKe9E@even-i700>
 <CACmBxyvpz_sMA0n5tqwVRM383ELu591+1345DEUHb17PMy1z+w@mail.gmail.com>
 <CACqBkM-PPkcbgT066-ju1WSHNRCSCjLwmdkS9oiGvGmQJd3qpA@mail.gmail.com>
Message-ID: <53744963.HR4udXjkxf@even-i700>

On lundi 20 mai 2019 16:16:03 CEST Eli Adam wrote:
> Hi Even,
> 
> It will be exciting to have documentation all together!  I often referenced
> https://trac.osgeo.org/gdal/wiki/ConfigOptions and
> https://trac.osgeo.org/gdal/wiki/BuildHints to go with other
> documentation.

Except a few exceptions, we haven't migrated wiki content, so help
from the larger community to add/migrate more content will be appreciated.

> Are there any existing urls (like
> https://gdal.org/ogr_formats.html) that are widely linked to from the rest
> of the internet that would be worth trying to preserve instead of replace (
> https://gdal.dev/drivers/vector/index.html)? 

Yes, we've put in place redirects for a number of pages:
https://github.com/hobu/gdal/blob/doc-sprint/gdal/doc/source/_extensions/redirects.py#L27

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Tue May 21 04:20:52 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 21 May 2019 08:20:52 -0300
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <1815853.Hg7EJSKe9E@even-i700>
References: <1815853.Hg7EJSKe9E@even-i700>
Message-ID: <5b27a5f9-ef3d-3f8a-75e7-96b7dc966def@gatewaygeomatics.com>

+1 jeff



On 2019-05-20 6:54 PM, Even Rouault wrote:
> Hi,
> 
> I believe we are now in a state where the prototype new website is functional
> and should have content at least equivalent to the current one, so I motion to
> adopt RFC74: Migrate gdal.org to Sphinx:
> 
> 	https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
>

From josh at cesium.com  Tue May 21 08:35:20 2019
From: josh at cesium.com (joshl)
Date: Tue, 21 May 2019 08:35:20 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558385291656-0.post@n6.nabble.com>
References: <1558028122210-0.post@n6.nabble.com>
 <11807534.YbRhbdbDNq@even-i700> <1558032413607-0.post@n6.nabble.com>
 <9115585.oWlhjAZBIX@even-i700> <1558035427231-0.post@n6.nabble.com>
 <1558118803143-0.post@n6.nabble.com> <1558124947504-0.post@n6.nabble.com>
 <1558127289477-0.post@n6.nabble.com> <1558376339125-0.post@n6.nabble.com>
 <1558385291656-0.post@n6.nabble.com>
Message-ID: <1558452920175-0.post@n6.nabble.com>

I tried copying the body the test program that the configure script uses to
see if the specified proj is usable. Running the gcc command manually:
gcc testprogram.c -o testprogram -L$projInstallDir/lib
-Wl,-rpath,$projInstallDir/lib -I$projDir/include -I$projDir/src

Using -L -Wl -rpath to specify the proj library got passed the "cannot find
-lproj error" but now it can't find the reference for proj_create function
(which is in $projDir/src/proj.h):

/tmp/cc4Ky0RR.o: In function `main':
testprogram.c:(.text+0xa): undefined reference to `proj_create'
collect2: error: ld returned 1 exit status



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From josh at cesium.com  Tue May 21 09:21:29 2019
From: josh at cesium.com (joshl)
Date: Tue, 21 May 2019 09:21:29 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558452920175-0.post@n6.nabble.com>
References: <11807534.YbRhbdbDNq@even-i700>
 <1558032413607-0.post@n6.nabble.com> <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com> <1558118803143-0.post@n6.nabble.com>
 <1558124947504-0.post@n6.nabble.com> <1558127289477-0.post@n6.nabble.com>
 <1558376339125-0.post@n6.nabble.com> <1558385291656-0.post@n6.nabble.com>
 <1558452920175-0.post@n6.nabble.com>
Message-ID: <1558455689911-0.post@n6.nabble.com>

Nevermind, got it to run with minimal flags.
> gcc testprogram.c -o testprogram -L$projInstallDir/lib -lproj
> ldd testprogram
        linux-vdso.so.1 (0x00007fffcb57f000)
        libproj.so.15 =>
/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4/lib/libproj.so.15
(0x00007f3f9db1b000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f3f9d720000)
        libsqlite3.so.0 => /usr/lib/x86_64-linux-gnu/libsqlite3.so.0
(0x00007f3f9d410000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0
(0x00007f3f9d1f0000)
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6
(0x00007f3f9ce60000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f3f9cac0000)
        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1
(0x00007f3f9c890000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f3f9e400000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f3f9c680000)



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From markus.metz.giswork at gmail.com  Tue May 21 12:50:31 2019
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Tue, 21 May 2019 21:50:31 +0200
Subject: [gdal-dev] Geopackage precision issues
Message-ID: <CAG+h=FHw9jrbH0gwGENRJb8HUusEQcebPOXksshZwt=4TLSNtg@mail.gmail.com>

Extents and spatial filter settings with Geopackage are unprecise such that
they are unusable.

For example I created a Geopackage with a single point: 176418.99585285,
317579.62751027
ogrinfo reports extents of
Extent: (176419.000000, 317580.000000) - (176419.000000, 317580.000000)
I think this can happen if the coordinates are converted to float or
converted to a string with something like %.6g or %.g.
Thus the point in the Geopackage is outside the extents of the Geopackage.
If I adjust the extents of the Geopackage to
minx: 176418.823581
maxx: 176419.176419
miny: 317579.682420
maxy: 317580.317580
and use this as a spatial filter, the point is still excluded. A possible
explanation is that the adjusted extents in the spatial filter are
similarly converted, resulting in
minx: 176419.000000
maxx: 176419.000000
miny: 317580.000000
maxy: 317580.000000
which excludes the point in the Geopackage.

Not the reason for this, but another precision issue is at
https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L3544

                SQLEscapeName(pszC).c_str(), sEnvelope.MinX - 1e-11,

with sEnvelope.MinX = 176418.823581 or similar, subtracting 1e-11 will not
make a difference, it should rather be
                SQLEscapeName(pszC).c_str(), sEnvelope.MinX -
fabs(sEnvelope.MinX * 1e-11),
same for following lines. If this is again converted to float or converted
to a string with something like %.6g or %.g, this will not work and you
need something like
                SQLEscapeName(pszC).c_str(), sEnvelope.MinX -
fabs(sEnvelope.MinX * 2e-6),
to account for single precision floating point limits.

I would like to provide a fix, but I did not find out where this conversion
takes place.

Markus M
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190521/350cb369/attachment.html>

From even.rouault at spatialys.com  Tue May 21 13:16:22 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 May 2019 22:16:22 +0200
Subject: [gdal-dev] Geopackage precision issues
In-Reply-To: <CAG+h=FHw9jrbH0gwGENRJb8HUusEQcebPOXksshZwt=4TLSNtg@mail.gmail.com>
References: <CAG+h=FHw9jrbH0gwGENRJb8HUusEQcebPOXksshZwt=4TLSNtg@mail.gmail.com>
Message-ID: <1784953.SyR6MTNhZR@even-i700>

Makus,

> Extents and spatial filter settings with Geopackage are unprecise such that
> they are unusable.
> 
> For example I created a Geopackage with a single point: 176418.99585285,
> 317579.62751027
> ogrinfo reports extents of
> Extent: (176419.000000, 317580.000000) - (176419.000000, 317580.000000)
> I think this can happen if the coordinates are converted to float or
> converted to a string with something like %.6g or %.g.

Ah indeed. Fixed per 
https://github.com/OSGeo/gdal/commit/0f28425fe8a2c70061b8896748f40182aff3f2ee

> Thus the point in the Geopackage is outside the extents of the Geopackage.
> If I adjust the extents of the Geopackage to
> minx: 176418.823581
> maxx: 176419.176419
> miny: 317579.682420
> maxy: 317580.317580
> and use this as a spatial filter, the point is still excluded.

Yes, that's expected: your miny_filter > y_geometry. You probably meant 
miny=317579.582420

> Not the reason for this, but another precision issue is at
> https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrsf_frmts/gpkg/ogrgeopa
> ckagetablelayer.cpp#L3544
> 
>                 SQLEscapeName(pszC).c_str(), sEnvelope.MinX - 1e-11,

I'm not sure if those bbox extension are needed at all. They don't seem 
necessary if trying

printf 'id,WKT\n1,"POINT(176418.99585285 317579.62751027)"\n' > point.csv
ogr2ogr point.gpkg point.csv
ogrinfo point.gpkg -al \
    -spat 176418.99585285 317579.62751027 176418.99585285 317579.62751027

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue May 21 13:29:11 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 May 2019 22:29:11 +0200
Subject: [gdal-dev] Does /vsis3 work for HDF4?
In-Reply-To: <CADeM3-xPjsZfMjX9j0yGU8Px05CPawTzVcjHfMKvw3R0Ln8YtQ@mail.gmail.com>
References: <CADeM3-xPjsZfMjX9j0yGU8Px05CPawTzVcjHfMKvw3R0Ln8YtQ@mail.gmail.com>
Message-ID: <7759462.nqqpRlfid8@even-i700>

> 
>   How about HDF4?
>   Does /vsis3 also work for HDF4?

Not directly, as to the best of my knowledge, but you're likely more in a 
postion o confirm, libhdf4 has no I/O abstraction layer.
On Linux, you might try the vsipreload trick:
https://lists.osgeo.org/pipermail/gdal-dev/2013-May/036359.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From zhiyong.weng at gmail.com  Tue May 21 21:44:57 2019
From: zhiyong.weng at gmail.com (redheli)
Date: Tue, 21 May 2019 21:44:57 -0700 (MST)
Subject: [gdal-dev] gdal raster gpkg CreateCopy create tiles for no data area
Message-ID: <1558500297404-0.post@n6.nabble.com>

I have a raster gpkg with only two tiles (size 1000x1000 meter),

one tile is locate in Singapore, and the second tile is in Boston.


so the problem happen, when try to use CreateCopy (C++ gdal 2.4.0) to append
the above gpkg to another one.

the CreateCopy try to create all tiles between Singapore and Boston, and it
takes forever.

Is it the expected behavior of "CreateCopy"?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From markus.metz.giswork at gmail.com  Wed May 22 00:02:53 2019
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Wed, 22 May 2019 09:02:53 +0200
Subject: [gdal-dev] Geopackage precision issues
In-Reply-To: <1784953.SyR6MTNhZR@even-i700>
References: <CAG+h=FHw9jrbH0gwGENRJb8HUusEQcebPOXksshZwt=4TLSNtg@mail.gmail.com>
 <1784953.SyR6MTNhZR@even-i700>
Message-ID: <CAG+h=FEO0K6atTggezgjFkA_60=8UsGZn9ZoAivW-+TWLCR0ZQ@mail.gmail.com>

On Tue, May 21, 2019 at 10:16 PM Even Rouault <even.rouault at spatialys.com>
wrote:
>
> Makus,
>
> > Extents and spatial filter settings with Geopackage are unprecise such
that
> > they are unusable.
> >
> > For example I created a Geopackage with a single point: 176418.99585285,
> > 317579.62751027
> > ogrinfo reports extents of
> > Extent: (176419.000000, 317580.000000) - (176419.000000, 317580.000000)
> > I think this can happen if the coordinates are converted to float or
> > converted to a string with something like %.6g or %.g.
>
> Ah indeed. Fixed per
>
https://github.com/OSGeo/gdal/commit/0f28425fe8a2c70061b8896748f40182aff3f2ee

Thanks for the quick fix! BTW, there are many more instances of %g in other
OGR drivers, not sure if some of them need adjustment as well.
>
> > Thus the point in the Geopackage is outside the extents of the
Geopackage.
> > If I adjust the extents of the Geopackage to
> > minx: 176418.823581
> > maxx: 176419.176419
> > miny: 317579.682420
> > maxy: 317580.317580
> > and use this as a spatial filter, the point is still excluded.
>
> Yes, that's expected: your miny_filter > y_geometry. You probably meant
> miny=317579.582420

Oops, yes of course, that works, that means it was only the extents
suffering from loss of precision.

Markus M
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190522/5702fb76/attachment.html>

From andrew.bell.ia at gmail.com  Wed May 22 06:31:57 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 22 May 2019 09:31:57 -0400
Subject: [gdal-dev] OGR Transformation Clarification
Message-ID: <CACJ51z0b-n3d6qiUSSvCih35Ff5pEybJMJFpw1xmbDm=vmKDiw@mail.gmail.com>

Hi,

Can someone please explain in some more detail what is meant by this
statement in the description of OCTNewCoordinateTransformation() ?

"This will honour the axis order advertized by the source and target SRS,
as well as their "data axis to SRS axis mapping". To have a behaviour
similar to GDAL < 3.0, the OGR_CT_FORCE_TRADITIONAL_GIS_ORDER configuration
option can be set to YES."

I'm trying to understand what the difference is from GDAL < 3.0 and how I
might know that I'm seeing an issue and need to use the specified
configuration option.

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190522/1d92110d/attachment.html>

From even.rouault at spatialys.com  Wed May 22 06:41:28 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 22 May 2019 15:41:28 +0200
Subject: [gdal-dev] OGR Transformation Clarification
In-Reply-To: <CACJ51z0b-n3d6qiUSSvCih35Ff5pEybJMJFpw1xmbDm=vmKDiw@mail.gmail.com>
References: <CACJ51z0b-n3d6qiUSSvCih35Ff5pEybJMJFpw1xmbDm=vmKDiw@mail.gmail.com>
Message-ID: <7188055.RmyfYhOjN5@even-i700>

Andrew,

> 
> Can someone please explain in some more detail what is meant by this
> statement in the description of OCTNewCoordinateTransformation() ?
> 
> "This will honour the axis order advertized by the source and target SRS,
> as well as their "data axis to SRS axis mapping". To have a behaviour
> similar to GDAL < 3.0, the OGR_CT_FORCE_TRADITIONAL_GIS_ORDER configuration
> option can be set to YES."
> 
> I'm trying to understand what the difference is from GDAL < 3.0 and how I
> might know that I'm seeing an issue and need to use the specified
> configuration option.

See https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn#Axisorderissues

Basically OGR_CT_FORCE_TRADITIONAL_GIS_ORDER forces 
SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER) on the copies of the source 
and target CRS used by OGRCoordinateTransformation

If you use EPSG:4326 or any geographic CRS imported from EPSG, as well as some 
projected CRS with a northing,easting order from EPSG, you'll see differences 
between GDAL < and >= 3.0. You may cope with that either by switching the 
order of coordinates you provide to / get from OGRCoordinateTransformation, or 
if you want to continue working with the order of coordinates you used to 
have, you can set OGR_CT_FORCE_TRADITIONAL_GIS_ORDER=YES, or call 
SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER) on the source & target CRS

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From josh at cesium.com  Wed May 22 10:16:22 2019
From: josh at cesium.com (joshl)
Date: Wed, 22 May 2019 10:16:22 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558455689911-0.post@n6.nabble.com>
References: <1558032413607-0.post@n6.nabble.com>
 <9115585.oWlhjAZBIX@even-i700> <1558035427231-0.post@n6.nabble.com>
 <1558118803143-0.post@n6.nabble.com> <1558124947504-0.post@n6.nabble.com>
 <1558127289477-0.post@n6.nabble.com> <1558376339125-0.post@n6.nabble.com>
 <1558385291656-0.post@n6.nabble.com> <1558452920175-0.post@n6.nabble.com>
 <1558455689911-0.post@n6.nabble.com>
Message-ID: <1558545382689-0.post@n6.nabble.com>

If I try to run the gdal configure script with a --with-proj targeting a
static proj 6 lib I get complaints about not being able to find proj 6
symbols named internal_proj* when the configure script does various test
compiles for proj. These functions don't seem to exist in src and include
directories. Is this what the CXXFLAGS="-DPROJ_RENAME_SYMBOLS -O2" is for?




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From soonhui.ngu at gmail.com  Wed May 22 17:54:39 2019
From: soonhui.ngu at gmail.com (Soon Hui Ngu)
Date: Thu, 23 May 2019 08:54:39 +0800
Subject: [gdal-dev] How to properly reorder the raster data from bottom up
	to top down?
Message-ID: <CANuCbjS=9efXb_Luu=5qd1NnOYfyVd1HST_c8zWTRh73Q2AGTA@mail.gmail.com>

When creating a raster I set the lower-left x/y values, and asc file has
the following "header":

ncols        1731
nrows        1863
xllcorner    17548488.944545675069
yllcorner    -8069349.376163828187
dx           500.162987955558
dy           500.081943659035

Note that the raster data is going from bottom to top.

However, now it seems that I need to reorder the raster data so that my
raster data will appear from top to bottom, instead of bottom to top. In
the above case, I want the dy to assume negative value.

What is the best way to do it?

Of course I can do the thing in a manual, hard way, ie:

  using (var ds = Gdal.Open(demInputTiff, Access.GA_Update))
    {
        var nCol = ds.RasterXSize;
        var nRow = ds.RasterYSize;
        double[] geoTransform = new double[6];
        ds.GetGeoTransform(geoTransform);

        if (geoTransform[5] < 0)
            return; //no need transformation

        geoTransform[3] += geoTransform[5] * (nRow -1);
        geoTransform[5] *= -1;

        ds.SetGeoTransform(geoTransform);

        Band band = ds.GetRasterBand(1);
        var allValues = new int[nCol * nRow];
        var noData = band.NoDataValue();
        band.ReadRaster(0, 0, nCol, nRow, allValues, nCol, nRow, 0, 0);

        //manual reordering, crude way of iterating through the array
        var allValues2 = new int[nCol * nRow];
        for (int i = 0; i < nRow; i++)
        {
            for (int j = 0; j < nCol; j++)
            {
                allValues2[(nRow - i - 1) * nCol + j] = allValues[i * nCol + j];
            }
        }

        band.WriteRaster(0, 0, nCol, nRow, allValues2, nCol, nRow, 0, 0);


        ds.FlushCache();
    }

But is there a built-in function for this? Will converting to other formats
like AAIGRID and back and forth correct for the orientation?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190523/e679af2c/attachment.html>

From even.rouault at spatialys.com  Thu May 23 02:27:24 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 May 2019 11:27:24 +0200
Subject: [gdal-dev] Motion: adopt RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <1815853.Hg7EJSKe9E@even-i700>
References: <1815853.Hg7EJSKe9E@even-i700>
Message-ID: <9808416.ioLMlC8NZf@even-i700>

On lundi 20 mai 2019 23:54:40 CEST Even Rouault wrote:
> Hi,
> 
> I believe we are now in a state where the prototype new website is
> functional and should have content at least equivalent to the current one,
> so I motion to adopt RFC74: Migrate gdal.org to Sphinx:
> 
> 	https://trac.osgeo.org/gdal/wiki/rfc74_sphinx
> 
> -----------

I declare this motion passed with +1 from PSC members KurtS, HowardB, DanielM, 
NormanB, JukkaR and me.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From howard at hobu.co  Thu May 23 09:29:52 2019
From: howard at hobu.co (Howard Butler)
Date: Thu, 23 May 2019 11:29:52 -0500
Subject: [gdal-dev] gdal.org Migration to Sphinx is complete
Message-ID: <4D12522B-74D4-4DD3-9548-9F3748EB9D53@hobu.co>

All,

Per the RFC 74 effort at the OSGeo Community Sprint last week, we have migrated the primary content of the gdal.org <http://gdal.org/> website to Sphinx. As your DNS updates, you should see the content newly reorganized and available in HTML and PDF formats.

We have attempted to take care to preserve most of the format URLs with redirects, but if you find any that do not properly redirect, please file a ticket. Additionally, each page now has an "Edit on Github" link you can use to make Pull Requests to adapt and modify documentation as necessary. We hope this adoption of Sphinx and ReadTheDocs will spur some more documentation contribution, and we hope it is easier to find what you need in the GDAL doc tree (currently a 900 page PDF and mobile-friendly HTML site!) in this new organization.

Even Rouault, Mateusz Loskot, and Dan Baston deserve kudos on the bulk of the content port and organization. This effort would not have made it to completion without their contributions.

Howard


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190523/73312439/attachment.html>

From tom.kralidis at canada.ca  Thu May 23 10:03:09 2019
From: tom.kralidis at canada.ca (Kralidis, Tom (EC))
Date: Thu, 23 May 2019 17:03:09 +0000
Subject: [gdal-dev] gdal.org Migration to Sphinx is complete
In-Reply-To: <4D12522B-74D4-4DD3-9548-9F3748EB9D53@hobu.co>
References: <4D12522B-74D4-4DD3-9548-9F3748EB9D53@hobu.co>
Message-ID: <mailman.21.1558631590.17181.gdal-dev@lists.osgeo.org>

Excellent work here - congratulations looks great!

..Tom

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Howard Butler
Sent: May 23, 2019 12:30
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] gdal.org Migration to Sphinx is complete

All,

Per the RFC 74 effort at the OSGeo Community Sprint last week, we have migrated the primary content of the http://gdal.org website to Sphinx. As your DNS updates, you should see the content newly reorganized and available in HTML and PDF formats.

We have attempted to take care to preserve most of the format URLs with redirects, but if you find any that do not properly redirect, please file a ticket. Additionally, each page now has an "Edit on Github" link you can use to make Pull Requests to adapt and modify documentation as necessary. We hope this adoption of Sphinx and ReadTheDocs will spur some more documentation contribution, and we hope it is easier to find what you need in the GDAL doc tree (currently a 900 page PDF and mobile-friendly HTML site!) in this new organization.

Even Rouault, Mateusz Loskot, and Dan Baston deserve kudos on the bulk of the content port and organization. This effort would not have made it to completion without their contributions.

Howard



From even.rouault at spatialys.com  Thu May 23 15:05:57 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 May 2019 00:05:57 +0200
Subject: [gdal-dev] Migration of RFCs to Sphinx ?
Message-ID: <2024853.hssYHTo5Ll@even-i700>

Hi,

Other projects like MapServer or PROJ have their RFCs as part of their Sphinx 
documentation, so I've prepared the migration of GDAL RFCs as well (*) in
https://github.com/OSGeo/gdal/pull/1567

Questions:
- OK with that ?
- if so, what should we do with https://trac.osgeo.org/gdal/wiki/RfcList. My 
thinking would be to empty the content of this page and just put a link into 
it to the equivalent https://gdal.org/development/rfc/index.html , and leave 
the individual existing rfc documents without any pointer to them.

Even

(*) using the convert() method of
https://github.com/moimael/trac-to-gitlab/blob/master/trac2down/Trac2Down.py 
to convert from Trac wiki to github markdown and then pandoc to convert to 
ReST + some manual tweaking

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Thu May 23 15:35:31 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 24 May 2019 00:35:31 +0200
Subject: [gdal-dev] Migration of RFCs to Sphinx ?
In-Reply-To: <2024853.hssYHTo5Ll@even-i700>
References: <2024853.hssYHTo5Ll@even-i700>
Message-ID: <CABUeae-dut2cTHMH6ECTAGeLbtMjxDC4FqjGqzVrSbHeoixs4Q@mail.gmail.com>

On Fri, 24 May 2019 at 00:06, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Other projects like MapServer or PROJ have their RFCs as part of their Sphinx
> documentation, so I've prepared the migration of GDAL RFCs as well (*) in
> https://github.com/OSGeo/gdal/pull/1567
>
> Questions:
> - OK with that ?

To me, this is a very good idea.

> - if so, what should we do with https://trac.osgeo.org/gdal/wiki/RfcList. My
> thinking would be to empty the content of this page and just put a link into
> it to the equivalent https://gdal.org/development/rfc/index.html , and leave
> the individual existing rfc documents without any pointer to them.

Good idea as well, or even delete the pages.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Fri May 24 01:48:33 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 24 May 2019 10:48:33 +0200
Subject: [gdal-dev] RFC 74: Migrate gdal.org to Sphinx
In-Reply-To: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
References: <04CE6B75-B8C9-42B1-B835-781F43C8368B@hobu.co>
Message-ID: <CABUeae_wPSrqy_-EW_2Qni5zP_Ezpv+51QR0ThdTH+-XnYLCcA@mail.gmail.com>

On Sun, 19 May 2019 at 18:54, Howard Butler <howard at hobu.co> wrote:
>
> A successful OSGeo Community Sprint [1] saw myself, Even Rouault, Mateusz Loskot, and Dan Baston furiously migrating and organizing gdal.org content into a Sphinx-based organization. An example of that effort can be seen on https://gdal.dev It is an architecture modeled on other projects such as proj4.org, gdal.org, and mapserver.org that leverages continuous integration for rendering of the content, GitHub pages for the content delivery, and GitHub for the content management.
>
> RFC 74 formalizes the migration, provides its justification, and gives more details on the effort.
>
> https://trac.osgeo.org/gdal/wiki/rfc74_sphinx

FYI, I have renamed the pipeline on AzP from "OSGeo.gdal" to "OSGeo.gdal.doc" .
The new name makes PR status checks clearer.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ycycy1990 at hotmail.com  Fri May 24 03:45:46 2019
From: ycycy1990 at hotmail.com (YANG CAN)
Date: Fri, 24 May 2019 10:45:46 +0000
Subject: [gdal-dev] Problem with writing Python interface using swig
In-Reply-To: <DB6PR01MB3878942AD3B233FFD08442E0B7020@DB6PR01MB3878.eurprd01.prod.exchangelabs.com>
References: <DB6PR01MB3878942AD3B233FFD08442E0B7020@DB6PR01MB3878.eurprd01.prod.exchangelabs.com>
Message-ID: <DB6PR01MB3878A90919C279B25997033CB7020@DB6PR01MB3878.eurprd01.prod.exchangelabs.com>

Dear all,

I have a C++ project where I used GDAL OGR geometry as the basic data type. When I try to write a python interface for my project using Swig but I encountered a problem that the length and number of points returned from OGRLinestring become some strange values.

I reproduce the error below.

The c++ code as a file `mygdal.hpp`

```
#include "gdal/ogrsf_frmts.h" // C++ API for GDAL
#include <iostream>
#include <stdio.h>

void test()
{
    OGRLineString* cutoffline = new OGRLineString();
    cutoffline->addPoint(2.0,1.0);
    cutoffline->addPoint(2.0,0.0);
    cutoffline->addPoint(3.0,0.5);
    std::cout<<"Number of points "<< cutoffline->getNumPoints()<<"\n";
    std::cout<<"Length "<< cutoffline->get_Length()<<"\n";
    delete cutoffline;
};
```

The swig interface code as a file `mygdal.i`
```
%module mygdal

%{
/* Put header files here or function declarations like below */
#include "mygdal.hpp"
%}

%include "mygdal.hpp"
```

The command to build the program
```
swig -python -c++ mygdal.i
g++ -O2 -fpic -std=c++11 -c mygdal.hpp mygdal_wrap.cxx -I/usr/include/python2.7 -lgdal
g++ -shared mygdal_wrap.o -o _mygdal.so -lgdal
```
However, the python code shows
```
$ python -c "import mygdal;mygdal.test()"
Number of points 40483584
Length 0
```

After I run the python code with valgrind, it shows

```
==23332== Invalid write of size 8
==23332==    at 0x76016AC: setX (ogr_geometry.h:304)
==23332==    by 0x76016AC: OGRSimpleCurve::getPoint(int, OGRPoint*) const (ogrlinestring.cpp:298)
==23332==    by 0x698CA59: test() (in /home/cyang/workspace/fmm/python/_mygdal.so)
```

I guess the problem is this line:
https://github.com/OSGeo/gdal/blob/01de5188008b589b33bf1bb3c1a24fe77137882c/gdal/ogr/ogrlinestring.cpp#L320

I am new to swig so I am not sure if I make some stupid mistake, so can anyone help to fix this problem?

Best regards,
Can Yang






-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/6a3e2a94/attachment.html>

From jmckenna at gatewaygeomatics.com  Fri May 24 04:46:16 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 24 May 2019 08:46:16 -0300
Subject: [gdal-dev] Migration of RFCs to Sphinx ?
In-Reply-To: <2024853.hssYHTo5Ll@even-i700>
References: <2024853.hssYHTo5Ll@even-i700>
Message-ID: <6e226599-0a62-7f41-5903-df6ae50619be@gatewaygeomatics.com>

Hi Even,

I agree with emptying the old wiki page and placing a link there, to the 
new site.  Soon we should also disabling editing on that trac instance 
as well (as we discussed here before).

-jeff



On 2019-05-23 7:05 PM, Even Rouault wrote:
> Hi,
> 
> Other projects like MapServer or PROJ have their RFCs as part of their Sphinx
> documentation, so I've prepared the migration of GDAL RFCs as well (*) in
> https://github.com/OSGeo/gdal/pull/1567
> 
> Questions:
> - OK with that ?
> - if so, what should we do with https://trac.osgeo.org/gdal/wiki/RfcList. My
> thinking would be to empty the content of this page and just put a link into
> it to the equivalent https://gdal.org/development/rfc/index.html , and leave
> the individual existing rfc documents without any pointer to them.
> 
> Even
> 
> (*) using the convert() method of
> https://github.com/moimael/trac-to-gitlab/blob/master/trac2down/Trac2Down.py
> to convert from Trac wiki to github markdown and then pandoc to convert to
> ReST + some manual tweaking
> 


-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/

From robert.coup at koordinates.com  Fri May 24 06:54:10 2019
From: robert.coup at koordinates.com (Robert Coup)
Date: Fri, 24 May 2019 14:54:10 +0100
Subject: [gdal-dev] gdal.org Migration to Sphinx is complete
In-Reply-To: <4D12522B-74D4-4DD3-9548-9F3748EB9D53@hobu.co>
References: <4D12522B-74D4-4DD3-9548-9F3748EB9D53@hobu.co>
Message-ID: <CAFLLRpKTXLh4Cxem_V=EB0cndsK0HGxYZOmtAwAvrah2YJAOeA@mail.gmail.com>

Hi Howard,

Awesome work, well done :)

FYI, https://www.gdal.org is returning a cert error, maybe needs removing &
re-adding to trigger the certificate again
<https://help.github.com/en/articles/troubleshooting-custom-domains#https-errors>
? https://github.com/OSGeo/gdal/issues/1574

Cheers,

Rob :)


On Thu, 23 May 2019 at 17:30, Howard Butler <howard at hobu.co> wrote:

> All,
>
> Per the RFC 74 effort at the OSGeo Community Sprint last week, we have
> migrated the primary content of the gdal.org website to Sphinx. As your
> DNS updates, you should see the content newly reorganized and available in
> HTML and PDF formats.
>
> We have attempted to take care to preserve most of the format URLs with
> redirects, but if you find any that do not properly redirect, please file a
> ticket. Additionally, each page now has an "Edit on Github" link you can
> use to make Pull Requests to adapt and modify documentation as necessary.
> We hope this adoption of Sphinx and ReadTheDocs will spur some more
> documentation contribution, and we hope it is easier to find what you need
> in the GDAL doc tree (currently a 900 page PDF and mobile-friendly HTML
> site!) in this new organization.
>
> Even Rouault, Mateusz Loskot, and Dan Baston deserve kudos on the bulk of
> the content port and organization. This effort would not have made it to
> completion without their contributions.
>
> Howard
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Chief Technology Officer Koordinates

+44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/4b7ddfd1/attachment-0001.html>

From andrew.bell.ia at gmail.com  Fri May 24 07:33:02 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 24 May 2019 10:33:02 -0400
Subject: [gdal-dev] WKT Interpretation Change
Message-ID: <CACJ51z21AzZMGnfzrTYK6yrjuWKPUJBsSmVneYTBx9Dj-ebsRQ@mail.gmail.com>

Hi,

I'm trying to figure out what rule changes have taken place that have
apparently invalidated my SRS.  I suppose that this was valid WKT1 but not
WKT2.  Can anyone provide some more detail?

Thanks,

With GDAL 2.4 I get the following:

(gdaltest) $ gdalsrsinfo
"PROJCS[\"unnamed\",GEOGCS[\"unknown\",DATUM[\"unknown\",SPHEROID[\"GRS
1980\",6378137,298.2572221010042,AUTHORITY[\"EPSG\",\"7019\"]]],PRIMEM[\"Greenwich\",0],UNIT[,0.0174532925199433]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",24.333333333],PARAMETER[\"central_meridian\",-81],PARAMETER[\"scale_factor\",0.999941],PARAMETER[\"false_easting\",200000],PARAMETER[\"false_northing\",0],UNIT[\"US
survey foot\",0.3048006096012192,AUTHORITY[\"EPSG\",\"9003\"]]]"

PROJ.4 : +proj=tmerc +lat_0=24.333333333 +lon_0=-81 +k=0.999941
+x_0=60960.12192024384 +y_0=0 +ellps=GRS80 +units=us-ft +no_defs

OGC WKT :
PROJCS["unnamed",
    GEOGCS["unknown",
        DATUM["unknown",
            SPHEROID["GRS 1980",6378137,298.2572221010042,
                AUTHORITY["EPSG","7019"]]],
        PRIMEM["Greenwich",0],
        UNIT[,0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",24.333333333],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.999941],
    PARAMETER["false_easting",200000],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]]]

With GDAL 3.0 I get:

(gdal3) $ gdalsrsinfo
"PROJCS[\"unnamed\",GEOGCS[\"unknown\",DATUM[\"unknown\",SPHEROID[\"GRS
1980\",6378137,298.2572221010042,AUTHORITY[\"EPSG\",\"7019\"]]],PRIMEM[\"Greenwich\",0],UNIT[,0.0174532925199433]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",24.333333333],PARAMETER[\"central_meridian\",-81],PARAMETER[\"scale_factor\",0.999941],PARAMETER[\"false_easting\",200000],PARAMETER[\"false_northing\",0],UNIT[\"US
survey foot\",0.3048006096012192,AUTHORITY[\"EPSG\",\"9003\"]]]"

ERROR 1: ERROR - failed to load SRS definition from ...input SRS repeated...

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/94884ddf/attachment.html>

From even.rouault at spatialys.com  Fri May 24 07:41:12 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 May 2019 16:41:12 +0200
Subject: [gdal-dev] WKT Interpretation Change
In-Reply-To: <CACJ51z21AzZMGnfzrTYK6yrjuWKPUJBsSmVneYTBx9Dj-ebsRQ@mail.gmail.com>
References: <CACJ51z21AzZMGnfzrTYK6yrjuWKPUJBsSmVneYTBx9Dj-ebsRQ@mail.gmail.com>
Message-ID: <17519460.RVdOh0iBC2@even-i700>

projinfo returns
input string: parsing of user string failed: buildCS: missing UNIT

And indeed:
> 
> (gdaltest) $ gdalsrsinfo
> "PROJCS[\"unnamed\",GEOGCS[\"unknown\",DATUM[\"unknown\",SPHEROID[\"GRS
> 1980\",6378137,298.2572221010042,AUTHORITY[\"EPSG\",\"7019\"]]],PRIMEM[\"Gre
> enwich\",0],UNIT[,0.0174532925199433]],PROJECTION[\"Transverse_Mercator\"],P

					   ^ lacks a unit name (degree) here before the comma

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri May 24 08:00:35 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 May 2019 17:00:35 +0200
Subject: [gdal-dev] "RFC 75: Multidimensional arrays" available for
	preliminary review
Message-ID: <1607841.VsNMmxJ7cT@even-i700>

Hi,

I've prepared a preliminary version of a new RFC to add support for multidimensional arrays

https://github.com/rouault/gdal/blob/rfc75_text/gdal/doc/source/development/rfc/rfc75_multidimensional_arrays.rst

If you want to comment it inline, it is also available as a pull request at
https://github.com/OSGeo/gdal/pull/1580

This is preliminary content to give an idea of the general directions I have in mind for now.
Not backed by any implementation yet (should start soon hopefully), so API details will likely change,
but early feedback is welcome.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From josh at cesium.com  Fri May 24 09:34:03 2019
From: josh at cesium.com (joshl)
Date: Fri, 24 May 2019 09:34:03 -0700 (MST)
Subject: [gdal-dev] Building GDAL 3.0.0 with Proj 6.0.0
In-Reply-To: <1558545382689-0.post@n6.nabble.com>
References: <9115585.oWlhjAZBIX@even-i700>
 <1558035427231-0.post@n6.nabble.com> <1558118803143-0.post@n6.nabble.com>
 <1558124947504-0.post@n6.nabble.com> <1558127289477-0.post@n6.nabble.com>
 <1558376339125-0.post@n6.nabble.com> <1558385291656-0.post@n6.nabble.com>
 <1558452920175-0.post@n6.nabble.com> <1558455689911-0.post@n6.nabble.com>
 <1558545382689-0.post@n6.nabble.com>
Message-ID: <1558715643899-0.post@n6.nabble.com>

When the configure script checks for the proj library it fails because it
can't find the "proj.h" file,even though the proj.h files directory was
specifically included in the cxxflags.

checking for PROJ >= 6 library... checking for proj_create_from_wkt in
-lproj... no
...
checking for internal_proj_create_from_wkt in -lproj... yes
configure: error: proj.h not found

The spot in the config.log for this error is pasted below. The g++ command
has the correct -I arg as the proj.h file is in that directory so I don't
know why it can't see it? Is there an obvious reason why it wouldn't be able
to find it? I would do a manual test of the g++ command but the body of the
test program it fails on is not printed in this case (like it usually is).

configure:24274: checking for internal_proj_create_from_wkt in -lproj
configure:24299: g++ -o conftest -DHAVE_AVX_AT_COMPILE_TIME
-DHAVE_SSSE3_AT_COMPILE_TIME -DHAVE_SSE_AT_COMPILE_TIME
-I/home/loshjawrence/clonesRedo/agi-asset-pipeline/ThirdParty/proj.4/src
-fPIC   conftest.cpp -lproj 
-L/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/proj.4/lib
-lproj -lsqlite3 -lz
-L/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/zlib
-L/home/loshjawrence/clonesRedo/agi-asset-pipeline/build/ThirdParty/zlib/lib
-lpthread -lm -lrt -ldl  >&5
configure:24299: $? = 0
configure:24308: result: yes
configure:24453: error: proj.h not found




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From schwehr at gmail.com  Fri May 24 09:43:29 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 24 May 2019 09:43:29 -0700
Subject: [gdal-dev] Migration of RFCs to Sphinx ?
In-Reply-To: <6e226599-0a62-7f41-5903-df6ae50619be@gatewaygeomatics.com>
References: <2024853.hssYHTo5Ll@even-i700>
 <6e226599-0a62-7f41-5903-df6ae50619be@gatewaygeomatics.com>
Message-ID: <CACmBxyuq7GpuF9UZn6ciDDr7L=J8x2M+P9vKYB9xQ-eYW_xPgQ@mail.gmail.com>

+1

If possible: Rather than deleting old pages, they should link or redirect
to the new location at there are many places that link to the old locations.

On Fri, May 24, 2019 at 4:46 AM Jeff McKenna <jmckenna at gatewaygeomatics.com>
wrote:

> Hi Even,
>
> I agree with emptying the old wiki page and placing a link there, to the
> new site.  Soon we should also disabling editing on that trac instance
> as well (as we discussed here before).
>
> -jeff
>
>
>
> On 2019-05-23 7:05 PM, Even Rouault wrote:
> > Hi,
> >
> > Other projects like MapServer or PROJ have their RFCs as part of their
> Sphinx
> > documentation, so I've prepared the migration of GDAL RFCs as well (*) in
> > https://github.com/OSGeo/gdal/pull/1567
> >
> > Questions:
> > - OK with that ?
> > - if so, what should we do with https://trac.osgeo.org/gdal/wiki/RfcList.
> My
> > thinking would be to empty the content of this page and just put a link
> into
> > it to the equivalent https://gdal.org/development/rfc/index.html , and
> leave
> > the individual existing rfc documents without any pointer to them.
> >
> > Even
> >
> > (*) using the convert() method of
> >
> https://github.com/moimael/trac-to-gitlab/blob/master/trac2down/Trac2Down.py
> > to convert from Trac wiki to github markdown and then pandoc to convert
> to
> > ReST + some manual tweaking
> >
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> https://gatewaygeomatics.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/ff0cae66/attachment.html>

From dncarreira at gmail.com  Fri May 24 09:56:33 2019
From: dncarreira at gmail.com (Duarte Carreira)
Date: Fri, 24 May 2019 17:56:33 +0100
Subject: [gdal-dev] error in gdal.org certificate
Message-ID: <CAHE-9zCmSDBGUpC2ZkCyZPo1b0g0+wvYO810SjaHFBJm_-0hhA@mail.gmail.com>

Maybe this is known, but www.gdal.org is giving me a
ERR_CERT_COMMON_NAME_INVALID error on chrome/win.

Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/3b0d6c17/attachment.html>

From jmckenna at gatewaygeomatics.com  Fri May 24 10:43:31 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 24 May 2019 14:43:31 -0300
Subject: [gdal-dev] error in gdal.org certificate
In-Reply-To: <CAHE-9zCmSDBGUpC2ZkCyZPo1b0g0+wvYO810SjaHFBJm_-0hhA@mail.gmail.com>
References: <CAHE-9zCmSDBGUpC2ZkCyZPo1b0g0+wvYO810SjaHFBJm_-0hhA@mail.gmail.com>
Message-ID: <e5e7beea-3386-59c7-881b-b8e3b464d9a5@gatewaygeomatics.com>

On 2019-05-24 1:56 PM, Duarte Carreira wrote:
> Maybe this is known, but www.gdal.org <http://www.gdal.org> is giving me 
> a ERR_CERT_COMMON_NAME_INVALID error on chrome/win.
> 

https://github.com/OSGeo/gdal/issues/1574

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/

From simon.eves at omnisci.com  Fri May 24 13:35:40 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Fri, 24 May 2019 13:35:40 -0700
Subject: [gdal-dev] GDAL 3.0.0 / Proj 6.1.0 Shapefile import coordinates X/Y
	transposed?
Message-ID: <CAJf0KTTQFndk9d5jYcR4+ebxMdB-QgoErwOrKYJwtpDu-zKLXg@mail.gmail.com>

I feel like I'm asking a really dumb and naive question again, but here
goes...

Our geo importer loads polygons in what I assume is a very standard way.
The importer code has not changed in some time, and works fine built
against GDAL 2.3.2 and Proj 5.1, and also against GDAL 2.4.1 and Proj 5.2.

When I build our system against GDAL 3.0.0 and Proj 6.1.0, everything seems
to work fine, and GeoJSON and KML files import correctly, but Shapefiles
result in all the geo being transposed in X/Y!

Simplified code...

sr = new OGRSpatialReference();
sr->importFromEPSG(4326);
ds = GDALOpenEx(file, GDAL_OF_VECTOR, nullptr, nullptr, nullptr);
layer = ds.GetLayer(0)
layer.ResetReading();
f = layer.GetNextFeature();
OGRGeometry* g = f->GetGeometryRef();
if (g->getSpatialReference()) {
  g->transformTo(sr);
}
// omitting code that determines that it's a MULTIPOLYGON
mp = dynamic_cast<OGRMultiPolygon*>(g);
mp->getNumGeometries();
mpg = mp->getGeometryRef(0);
er = mpg->getExteriorRing();
OGRPoint p;
er->getPoint(0, &p);
x = p.getX();
y = p.getY();

and 'x' and 'y' are transposed!

An ogrinfo dump on the command-line displays the correct values.

What did I miss?!

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/ae9fca89/attachment.html>

From even.rouault at spatialys.com  Fri May 24 13:49:54 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 May 2019 22:49:54 +0200
Subject: [gdal-dev] GDAL 3.0.0 / Proj 6.1.0 Shapefile import coordinates
	X/Y transposed?
In-Reply-To: <CAJf0KTTQFndk9d5jYcR4+ebxMdB-QgoErwOrKYJwtpDu-zKLXg@mail.gmail.com>
References: <CAJf0KTTQFndk9d5jYcR4+ebxMdB-QgoErwOrKYJwtpDu-zKLXg@mail.gmail.com>
Message-ID: <2138204.ObhGzK5ovJ@even-i700>

On vendredi 24 mai 2019 13:35:40 CEST Simon Eves wrote:
> I feel like I'm asking a really dumb and naive question again, but here
> goes...
> 
> Our geo importer loads polygons in what I assume is a very standard way.
> The importer code has not changed in some time, and works fine built
> against GDAL 2.3.2 and Proj 5.1, and also against GDAL 2.4.1 and Proj 5.2.
> 
> When I build our system against GDAL 3.0.0 and Proj 6.1.0, everything seems
> to work fine, and GeoJSON and KML files import correctly, but Shapefiles
> result in all the geo being transposed in X/Y!
> 
> Simplified code...
> 
> sr = new OGRSpatialReference();
> sr->importFromEPSG(4326);

EPSG:4326 has lat,long order enforced by default in GDAL 3.0
So either cope with it with the x,y you get.
Or add sr->SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER);



-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Fri May 24 14:00:40 2019
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 24 May 2019 15:00:40 -0600
Subject: [gdal-dev] GDAL 3.0.0 / Proj 6.1.0 Shapefile import coordinates
 X/Y transposed?
In-Reply-To: <2138204.ObhGzK5ovJ@even-i700>
References: <CAJf0KTTQFndk9d5jYcR4+ebxMdB-QgoErwOrKYJwtpDu-zKLXg@mail.gmail.com>
 <2138204.ObhGzK5ovJ@even-i700>
Message-ID: <CADPhZXyNHUmmCrHi0RM8NnsTLdAtrruiLxUZ9zwXfcmwWfMy3A@mail.gmail.com>

Even,

To be clear, would replacing

    sr->importFromEPSG(4326);

with

    sr->SetFromUserInput("urn:ogc:def:crs:OGC:1.3:CRS84");

also restore the old behavior? CRS84 is the formally correct identifier for
what we've been calling EPSG:4326, right?


On Fri, May 24, 2019 at 2:50 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On vendredi 24 mai 2019 13:35:40 CEST Simon Eves wrote:
> > I feel like I'm asking a really dumb and naive question again, but here
> > goes...
> >
> > Our geo importer loads polygons in what I assume is a very standard way.
> > The importer code has not changed in some time, and works fine built
> > against GDAL 2.3.2 and Proj 5.1, and also against GDAL 2.4.1 and Proj
> 5.2.
> >
> > When I build our system against GDAL 3.0.0 and Proj 6.1.0, everything
> seems
> > to work fine, and GeoJSON and KML files import correctly, but Shapefiles
> > result in all the geo being transposed in X/Y!
> >
> > Simplified code...
> >
> > sr = new OGRSpatialReference();
> > sr->importFromEPSG(4326);
>
> EPSG:4326 has lat,long order enforced by default in GDAL 3.0
> So either cope with it with the x,y you get.
> Or add sr->SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER);
>
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/d439cd89/attachment.html>

From even.rouault at spatialys.com  Fri May 24 14:21:22 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 May 2019 23:21:22 +0200
Subject: [gdal-dev] GDAL 3.0.0 / Proj 6.1.0 Shapefile import coordinates
	X/Y transposed?
In-Reply-To: <CADPhZXyNHUmmCrHi0RM8NnsTLdAtrruiLxUZ9zwXfcmwWfMy3A@mail.gmail.com>
References: <CAJf0KTTQFndk9d5jYcR4+ebxMdB-QgoErwOrKYJwtpDu-zKLXg@mail.gmail.com>
 <2138204.ObhGzK5ovJ@even-i700>
 <CADPhZXyNHUmmCrHi0RM8NnsTLdAtrruiLxUZ9zwXfcmwWfMy3A@mail.gmail.com>
Message-ID: <1909092.hCGO2kxKGP@even-i700>

On vendredi 24 mai 2019 15:00:40 CEST Sean Gillies wrote:
> Even,
> 
> To be clear, would replacing
> 
>     sr->importFromEPSG(4326);
> 
> with
> 
>     sr->SetFromUserInput("urn:ogc:def:crs:OGC:1.3:CRS84");
> 
> also restore the old behavior? CRS84 is the formally correct identifier for
> what we've been calling EPSG:4326, right?

Could indeed work for that particular case, but for all other EPSG geographic 
CRS, or some EPSG projected CRS with northing,easting axis order, you need 
either to comply with the EPSG axis order, or revert to the "GIS friendly 
order" with SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simon.eves at omnisci.com  Fri May 24 14:25:44 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Fri, 24 May 2019 14:25:44 -0700
Subject: [gdal-dev] GDAL 3.0.0 / Proj 6.1.0 Shapefile import coordinates
 X/Y transposed?
In-Reply-To: <2138204.ObhGzK5ovJ@even-i700>
References: <CAJf0KTTQFndk9d5jYcR4+ebxMdB-QgoErwOrKYJwtpDu-zKLXg@mail.gmail.com>
 <2138204.ObhGzK5ovJ@even-i700>
Message-ID: <CAJf0KTSrdtNOFgaRs3qPMix5zFeWCBGA0ddkfW7t_paTa1_FbA@mail.gmail.com>

That would explain it.

I just found RFC 73 and some other stuff in the docs, but perhaps you could
put it in the main 3.0 Release Notes? :)

Thank you.

Simon

On Fri, May 24, 2019 at 1:50 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On vendredi 24 mai 2019 13:35:40 CEST Simon Eves wrote:
> > I feel like I'm asking a really dumb and naive question again, but here
> > goes...
> >
> > Our geo importer loads polygons in what I assume is a very standard way.
> > The importer code has not changed in some time, and works fine built
> > against GDAL 2.3.2 and Proj 5.1, and also against GDAL 2.4.1 and Proj
> 5.2.
> >
> > When I build our system against GDAL 3.0.0 and Proj 6.1.0, everything
> seems
> > to work fine, and GeoJSON and KML files import correctly, but Shapefiles
> > result in all the geo being transposed in X/Y!
> >
> > Simplified code...
> >
> > sr = new OGRSpatialReference();
> > sr->importFromEPSG(4326);
>
> EPSG:4326 has lat,long order enforced by default in GDAL 3.0
> So either cope with it with the x,y you get.
> Or add sr->SetAxisMappingStrategy(OAMS_TRADITIONAL_GIS_ORDER);
>
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190524/d9a353f7/attachment-0001.html>

From andrea.aime at geo-solutions.it  Mon May 27 01:38:49 2019
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 27 May 2019 10:38:49 +0200
Subject: [gdal-dev] Is there a reference documentation for GDALMetadata
	structure?
Message-ID: <CA+nxMTus55ceM9zpqYGfhMyu5Cvedzqg-UuEy897DV754KLXOg@mail.gmail.com>

Hi,
I was wondering if there is any documentation on what a GDALMetadata XML
structure might contain, both in terms
of element/attributes, and key names?

Online I've found this example:
https://www.awaresystems.be/imaging/tiff/tifftags/gdal_metadata.html

But checking some files I have laying around there is more variety, for
example:

<GDALMetadata>.
    <Item name="Band_1">Max Band_1</Item>.
    <Item name="Band_2">Min Band_1</Item>.
    <Item name="Band_3">Mean Band_1</Item>.
    <Item name="Band_4">SD Band_1</Item>.
    <Item name="Band_5">MASD Band_1</Item>.
    <Item name="Band_6">Valid Inputs</Item>.
    <Item name="OFFSET" sample="0" role="offset">0</Item>.
    <Item name="SCALE" sample="0"
role="scale">0.000100000000000000005</Item>.
    <Item name="OFFSET" sample="1" role="offset">0</Item>.
    <Item name="SCALE" sample="1"
role="scale">0.000100000000000000005</Item>.
    <Item name="OFFSET" sample="2" role="offset">0</Item>.
    <Item name="SCALE" sample="2"
role="scale">0.000100000000000000005</Item>.
    <Item name="OFFSET" sample="3" role="offset">0</Item>.
    <Item name="SCALE" sample="3"
role="scale">0.000100000000000000005</Item>.
    <Item name="OFFSET" sample="4" role="offset">0</Item>.
    <Item name="SCALE" sample="4"
role="scale">0.000100000000000000005</Item>.
    <Item name="OFFSET" sample="5" role="offset">0</Item>.
    <Item name="SCALE" sample="5"
role="scale">0.000100000000000000005</Item>.
</GDALMetadata>.

but also:

<GDALMetadata>.
    <Item name="lat#units">degrees_north</Item>.
    <Item name="LatLon_Projection#earth_radius">6371229</Item>.
    <Item
name="LatLon_Projection#grid_mapping_name">latitude_longitude</Item>.
    <Item name="lon#units">degrees_east</Item>.
    <Item
name="NC_GLOBAL#Analysis_or_forecast_generating_process_identifier_defined_by_originating_centre">Coastal
Ocean Circulation Model</Item>.
    <Item name="NC_GLOBAL#Conventions">CF-1.6</Item>.
    <Item name="NC_GLOBAL#featureType">GRID</Item>.
    <Item name="NC_GLOBAL#file_format">GRIB-2</Item>.
    <Item name="NC_GLOBAL#GRIB_table_version">2,1</Item>.
    <Item name="NC_GLOBAL#history">Read using CDM IOSP GribCollection
v3</Item>.
    <Item name="NC_GLOBAL#Originating_or_generating_Center">US National
Weather Service, National Centres for Environmental Prediction
(NCEP)</Item>.
    <Item name="NC_GLOBAL#Originating_or_generating_Subcenter">0</Item>.
    <Item name="NC_GLOBAL#Type_of_generating_process">Forecast</Item>.
    <Item name="NETCDF_DIM_EXTRA">{time}</Item>.
    <Item name="NETCDF_DIM_time_DEF">{1,6}</Item>.
    <Item name="NETCDF_DIM_time_VALUES">3</Item>.
    <Item name="time#calendar">proleptic_gregorian</Item>.
    <Item name="time#long_name">GRIB forecast or observation time</Item>.
    <Item name="time#standard_name">time</Item>.
    <Item name="time#units">Hour since 2014-01-23T00:00:00Z</Item>.
    <Item name="u-component_of_current_surface#abbreviation">UOGRD</Item>.
    <Item name="u-component_of_current_surface#coordinates">reftime time
lat lon </Item>.
    <Item
name="u-component_of_current_surface#Grib2_Generating_Process_Type">Forecast</Item>.

    <Item name="u-component_of_current_surface#Grib2_Level_Type">Ground or
water surface</Item>.
    <Item
name="u-component_of_current_surface#Grib2_Parameter">{10,1,2}</Item>.
    <Item
name="u-component_of_current_surface#Grib2_Parameter_Category">Currents</Item>.

    <Item
name="u-component_of_current_surface#Grib2_Parameter_Discipline">Oceanographic
products</Item>.
    <Item
name="u-component_of_current_surface#Grib2_Parameter_Name">u-component of
current</Item>.
    <Item
name="u-component_of_current_surface#Grib_Variable_Id">VAR_10-1-2_L1</Item>.

    <Item
name="u-component_of_current_surface#grid_mapping">LatLon_Projection</Item>.

    <Item name="u-component_of_current_surface#long_name">u-component of
current @ Ground or water surface</Item>.
    <Item name="u-component_of_current_surface#missing_value">nan</Item>.
    <Item name="u-component_of_current_surface#units">m/s</Item>.
    <Item name="abbreviation" sample="0">UOGRD</Item>.
    <Item name="coordinates" sample="0">reftime time lat lon </Item>.
    <Item name="Grib2_Generating_Process_Type" sample="0">Forecast</Item>.
    <Item name="Grib2_Level_Type" sample="0">Ground or water
surface</Item>.
    <Item name="Grib2_Parameter" sample="0">{10,1,2}</Item>.
    <Item name="Grib2_Parameter_Category" sample="0">Currents</Item>.
    <Item name="Grib2_Parameter_Discipline" sample="0">Oceanographic
products</Item>.
    <Item name="Grib2_Parameter_Name" sample="0">u-component of
current</Item>.
    <Item name="Grib_Variable_Id" sample="0">VAR_10-1-2_L1</Item>.
    <Item name="grid_mapping" sample="0">LatLon_Projection</Item>.
    <Item name="long_name" sample="0">u-component of current @ Ground or
water surface</Item>.
    <Item name="missing_value" sample="0">nan</Item>.
    <Item name="NETCDF_DIM_time" sample="0">3</Item>.
    <Item name="NETCDF_VARNAME"
sample="0">u-component_of_current_surface</Item>.
    <Item name="units" sample="0">m/s</Item>.
    <Item name="UNITTYPE" sample="0" role="unittype">m/s</Item>.
</GDALMetadata>

The periods at the end of the line are not valid, not sure where they are
coming from, exiftool reports them out
of one tiff file I have handy, which was converted out of a grib file a few
years ago

Cheers
Andrea

== GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
(LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
“GDPR” - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/4c90c3cd/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 27 04:11:02 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 27 May 2019 04:11:02 -0700 (MST)
Subject: [gdal-dev] Is there a reference documentation for GDALMetadata
 structure?
In-Reply-To: <CA+nxMTus55ceM9zpqYGfhMyu5Cvedzqg-UuEy897DV754KLXOg@mail.gmail.com>
References: <CA+nxMTus55ceM9zpqYGfhMyu5Cvedzqg-UuEy897DV754KLXOg@mail.gmail.com>
Message-ID: <1558955462098-0.post@n6.nabble.com>

Hi,

Perhaps here
https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdalpamdataset.cpp

-Jukka Rahkonen-


geowolf wrote
> Hi,
> I was wondering if there is any documentation on what a GDALMetadata XML
> structure might contain, both in terms
> of element/attributes, and key names?
> ...





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cdelancy at blackfangtechnologies.com  Mon May 27 06:17:32 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Mon, 27 May 2019 06:17:32 -0700 (MST)
Subject: [gdal-dev] Willing to Pay for Help Building GDAL 3 on WIndows
Message-ID: <1558963052192-0.post@n6.nabble.com>

I am willing to pay someone more experienced with GDAL and PROJ to guide me
through the build process.

I am trying to update some software I am developing from depending on
version 2.4 to the latest. This requires me being able to build GDAL 3,
which I am currently not able to do on my own. This seems to be because I am
not able to build PROJ 6.0. I have spent several days on this now and am at
my wit's end.

If interested, contact me at cdelancy at blackfangtechnologies and name your
price.




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrea.aime at geo-solutions.it  Mon May 27 08:58:34 2019
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 27 May 2019 17:58:34 +0200
Subject: [gdal-dev] Is there a reference documentation for GDALMetadata
	structure?
In-Reply-To: <1558955462098-0.post@n6.nabble.com>
References: <CA+nxMTus55ceM9zpqYGfhMyu5Cvedzqg-UuEy897DV754KLXOg@mail.gmail.com>
 <1558955462098-0.post@n6.nabble.com>
Message-ID: <CA+nxMTswzdL3T8zJk3xsda9=wa12BC-NqtzKK447-=ornkkZeQ@mail.gmail.com>

Hi Jukka,
thank you for following up. I believe that provides information for the PAM
dataset, which
is normally a sidecar containing statistical information such as
min/max/histograms.
The GDAL metadata TIFF tag instead normally contains other information,
such as scale/offset,
band names, units, and uses a XML that has a different structure.

Looking into the code there is something around here:
https://github.com/OSGeo/gdal/blob/master/gdal/frmts/gtiff/geotiff.cpp#L13726

I see explicit treatment for scale/offset and a few others, not sure if
there is anything else?
Like, if a band had a custom name, would it show up in the GDALMetadata
structure in a significant way?
>From my previous example, things like:

 <Item name="Band_1">Max Band_1</Item>.
    <Item name="Band_2">Min Band_1</Item>.
    <Item name="Band_3">Mean Band_1</Item>.
    <Item name="Band_4">SD Band_1</Item>.
    <Item name="Band_5">MASD Band_1</Item>.
    <Item name="Band_6">Valid Inputs</Item>.

are they actually used or just treated as "random strings"?
Looking at a GDALInfo output it looks like of the second, but maybe I'm
missing something:

Metadata:
  AREA_OR_POINT=Area
*  Band_1=Max Band_1*
  Band_2=Min Band_1
  Band_3=Mean Band_1
  Band_4=SD Band_1
  Band_5=MASD Band_1
  Band_6=Valid Inputs
  UNITS=m
...
*Band 1* Block=10x10 Type=Int32, ColorInterp=Gray
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 2 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 3 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 4 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 5 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 6 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001


Cheers
Andrea

On Mon, May 27, 2019 at 1:11 PM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> Perhaps here
> https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdalpamdataset.cpp
>
> -Jukka Rahkonen-
>
>
> geowolf wrote
> > Hi,
> > I was wondering if there is any documentation on what a GDALMetadata XML
> > structure might contain, both in terms
> > of element/attributes, and key names?
> > ...
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Regards, Andrea Aime == GeoServer Professional Services from the experts!
Visit http://goo.gl/it488V for more information. == Ing. Andrea Aime
@geowolf Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054
Massarosa (LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339
8844549 http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
“GDPR” - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/b625b00f/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 27 09:37:38 2019
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 27 May 2019 16:37:38 +0000
Subject: [gdal-dev] Something wrong with redirect?
Message-ID: <6f904ef4f8b541f4a34c5312c23cbf17@C119S212VM042.msvyvi.vaha.local>

Hi,

I am getting Not found errors by clicking the links from the web search results because browser seems to be directed to addresses like

https://gdal.orgdrivers/raster/gtiff.html

Notice the missing "/" after gdal.org

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/f5fb92ef/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 27 10:17:24 2019
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 27 May 2019 17:17:24 +0000
Subject: [gdal-dev] Is there a reference documentation for GDALMetadata
 structure?
Message-ID: <df0a65ec2f7b482695905e6820db5c5c@C119S212VM042.msvyvi.vaha.local>

Hi Andrea,

I have understood that PAM may contain any metadata that cannot be stored into the file format itself.

I made a test but I honestly do not know what it proves, if anything.  However, if I tell GDAL to handle GeoTIFF as read-only and make some edits with

gdal_edit -ro -mo DATUM=WGS84 test.tif
gdal_edit -ro -scale 299 -offset 10 test.tif

then I get a tif.aux.xml file that contains

<PAMDataset>
  <Metadata>
    <MDI key="DATUM">WGS84</MDI>
  </Metadata>
  <PAMRasterBand band="1">
    <Offset>10</Offset>
    <Scale>299</Scale>
  </PAMRasterBand>
  <PAMRasterBand band="2">
    <Offset>10</Offset>
    <Scale>299</Scale>
  </PAMRasterBand>
  <PAMRasterBand band="3">
    <Offset>10</Offset>
    <Scale>299</Scale>
  </PAMRasterBand>
</PAMDataset>

If I run the commands without -ro then the tags of the GeoTIFF file are edited and no sidecar file appears.

-Jukka-



Lähettäjä: Andrea Aime <andrea.aime at geo-solutions.it>
Lähetetty: maanantai 27. toukokuuta 2019 18.59
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] Is there a reference documentation for GDALMetadata structure?

Hi Jukka,
thank you for following up. I believe that provides information for the PAM dataset, which
is normally a sidecar containing statistical information such as min/max/histograms.
The GDAL metadata TIFF tag instead normally contains other information, such as scale/offset,
band names, units, and uses a XML that has a different structure.

Looking into the code there is something around here:
https://github.com/OSGeo/gdal/blob/master/gdal/frmts/gtiff/geotiff.cpp#L13726

I see explicit treatment for scale/offset and a few others, not sure if there is anything else?
Like, if a band had a custom name, would it show up in the GDALMetadata structure in a significant way?
From my previous example, things like:

 <Item name="Band_1">Max Band_1</Item>.
    <Item name="Band_2">Min Band_1</Item>.
    <Item name="Band_3">Mean Band_1</Item>.
    <Item name="Band_4">SD Band_1</Item>.
    <Item name="Band_5">MASD Band_1</Item>.
    <Item name="Band_6">Valid Inputs</Item>.

are they actually used or just treated as "random strings"?
Looking at a GDALInfo output it looks like of the second, but maybe I'm missing something:

Metadata:
  AREA_OR_POINT=Area
  Band_1=Max Band_1
  Band_2=Min Band_1
  Band_3=Mean Band_1
  Band_4=SD Band_1
  Band_5=MASD Band_1
  Band_6=Valid Inputs
  UNITS=m
...
Band 1 Block=10x10 Type=Int32, ColorInterp=Gray
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 2 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 3 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 4 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 5 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001
Band 6 Block=10x10 Type=Int32, ColorInterp=Undefined
  NoData Value=-9999
  Offset: 0,   Scale:0.0001


Cheers
Andrea

On Mon, May 27, 2019 at 1:11 PM jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Perhaps here
https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdalpamdataset.cpp

-Jukka Rahkonen-


geowolf wrote
> Hi,
> I was wondering if there is any documentation on what a GDALMetadata XML
> structure might contain, both in terms
> of element/attributes, and key names?
> ...





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--

Regards, Andrea Aime == GeoServer Professional Services from the experts! Visit http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa (LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549 http://www.geo-solutions.it http://twitter.com/geosolutions_it ------------------------------------------------------- Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 - Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni circostanza inerente alla presente email (il suo contenuto, gli eventuali allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le sarei comunque grato se potesse darmene notizia. This email is intended only for the person or entity to which it is addressed and may contain information that is privileged, confidential or otherwise protected from disclosure. We remind that - as provided by European Regulation 2016/679 “GDPR” - copying, dissemination or use of this e-mail or the information herein by anyone other than the intended recipient is prohibited. If you have received this email by mistake, please notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/d92884b6/attachment-0001.html>

From mateusz at loskot.net  Mon May 27 10:20:36 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 27 May 2019 19:20:36 +0200
Subject: [gdal-dev] Something wrong with redirect?
In-Reply-To: <6f904ef4f8b541f4a34c5312c23cbf17@C119S212VM042.msvyvi.vaha.local>
References: <6f904ef4f8b541f4a34c5312c23cbf17@C119S212VM042.msvyvi.vaha.local>
Message-ID: <CABUeae_qFQGrHVxJr9dTa04p_rUnsm6FbAtq+8G2jf0dZJe78g@mail.gmail.com>

On Mon, 27 May 2019 at 18:37, Rahkonen Jukka (MML)
<jukka.rahkonen at maanmittauslaitos.fi> wrote:
> I am getting Not found errors by clicking the links from the web search results because browser seems to be directed to addresses like
>
> https://gdal.orgdrivers/raster/gtiff.html
>
> Notice the missing ”/” after gdal.org

I assume you mean redirect for https://gdal.org/frmt_gtiff.html
It works for me, redirects to https://gdal.org/drivers/raster/gtiff.html

I just web searched and

1. https://www.google.com/search?q=frmt_gtiff
hit the first item in the results and the redirect works as expected

2. https://duckduckgo.com/?q=frmt_gtiff
and the old page is returned as 4th item in the result
I hit it and it redirects me to `https://gdal.orgfrmt_gtiff.html/`
without the forward slash.

I'm not sure how to interpret those observations.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 27 10:33:28 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 27 May 2019 10:33:28 -0700 (MST)
Subject: [gdal-dev] Something wrong with redirect?
In-Reply-To: <CABUeae_qFQGrHVxJr9dTa04p_rUnsm6FbAtq+8G2jf0dZJe78g@mail.gmail.com>
References: <6f904ef4f8b541f4a34c5312c23cbf17@C119S212VM042.msvyvi.vaha.local>
 <CABUeae_qFQGrHVxJr9dTa04p_rUnsm6FbAtq+8G2jf0dZJe78g@mail.gmail.com>
Message-ID: <1558978408516-0.post@n6.nabble.com>

Mateusz Loskot wrote
> On Mon, 27 May 2019 at 18:37, Rahkonen Jukka (MML)
> &lt;

> jukka.rahkonen@

> &gt; wrote:
>> I am getting Not found errors by clicking the links from the web search
>> results because browser seems to be directed to addresses like
>>
>> https://gdal.orgdrivers/raster/gtiff.html
>>
>> Notice the missing ”/” after gdal.org
> 
> I assume you mean redirect for https://gdal.org/frmt_gtiff.html
> It works for me, redirects to https://gdal.org/drivers/raster/gtiff.html
> 
> I just web searched and
> 
> 1. https://www.google.com/search?q=frmt_gtiff
> hit the first item in the results and the redirect works as expected
> 
> 2. https://duckduckgo.com/?q=frmt_gtiff
> and the old page is returned as 4th item in the result
> I hit it and it redirects me to `https://gdal.orgfrmt_gtiff.html/`
> without the forward slash.
> 
> I'm not sure how to interpret those observations.
> 
> Best regards,
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev

Right, the link was  https://gdal.org/frmt_gtiff.html and indeed accessed
through the duckduckgo results.

-Jukka-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon May 27 10:40:37 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 May 2019 19:40:37 +0200
Subject: [gdal-dev] Something wrong with redirect?
In-Reply-To: <6f904ef4f8b541f4a34c5312c23cbf17@C119S212VM042.msvyvi.vaha.local>
References: <6f904ef4f8b541f4a34c5312c23cbf17@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1719041.hVfTCjCPWD@even-i700>

On lundi 27 mai 2019 16:37:38 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> I am getting Not found errors by clicking the links from the web search
> results because browser seems to be directed to addresses like
> 
> https://gdal.orgdrivers/raster/gtiff.html
> 
> Notice the missing "/" after gdal.org

Reported to https://trac.osgeo.org/osgeo/ticket/2311#comment:4

> 
> -Jukka Rahkonen-


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon May 27 10:51:51 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 May 2019 19:51:51 +0200
Subject: [gdal-dev] Is there a reference documentation for GDALMetadata
	structure?
In-Reply-To: <CA+nxMTswzdL3T8zJk3xsda9=wa12BC-NqtzKK447-=ornkkZeQ@mail.gmail.com>
References: <CA+nxMTus55ceM9zpqYGfhMyu5Cvedzqg-UuEy897DV754KLXOg@mail.gmail.com>
 <1558955462098-0.post@n6.nabble.com>
 <CA+nxMTswzdL3T8zJk3xsda9=wa12BC-NqtzKK447-=ornkkZeQ@mail.gmail.com>
Message-ID: <1816539.AOsUqiQ3bq@even-i700>

On lundi 27 mai 2019 17:58:34 CEST Andrea Aime wrote:
> Hi Jukka,
> thank you for following up. I believe that provides information for the PAM
> dataset, which
> is normally a sidecar containing statistical information such as
> min/max/histograms.
> The GDAL metadata TIFF tag instead normally contains other information,
> such as scale/offset,
> band names, units, and uses a XML that has a different structure.
> 
> Looking into the code there is something around here:
> https://github.com/OSGeo/gdal/blob/master/gdal/frmts/gtiff/geotiff.cpp#L1372
> 6

Andrea,

If you're looking for the specification of the GDAL metadata TIFF tag (which 
is different from PAM .aux.xml), then the code will be your best friend as I 
don't think there's a document describing it, together with experimentation

Here's how to set the names of a 2-band TIFF

<GDALMetadata>
  <Item name="DESCRIPTION" sample="0" role="description">my_band_1_name</Item>
  <Item name="DESCRIPTION" sample="1" role="description">my_band_2_name</Item>
</GDALMetadata>

The output of gdalinfo will be:

Band 1 Block=20x20 Type=Byte, ColorInterp=Gray
  Description = my_band_1_name
Band 2 Block=20x20 Type=Byte, ColorInterp=Gray
  Description = my_band_2_name

The samples with '.' you mention are corrupted. GDAL shouldn't produce such 
files.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon May 27 13:11:37 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 May 2019 22:11:37 +0200
Subject: [gdal-dev] Willing to Pay for Help Building GDAL 3 on WIndows
In-Reply-To: <1558963052192-0.post@n6.nabble.com>
References: <1558963052192-0.post@n6.nabble.com>
Message-ID: <3080804.NfcRZvIpG9@even-i700>

On lundi 27 mai 2019 06:17:32 CEST CDelancy wrote:
> I am willing to pay someone more experienced with GDAL and PROJ to guide me
> through the build process.
> 
> I am trying to update some software I am developing from depending on
> version 2.4 to the latest. This requires me being able to build GDAL 3,
> which I am currently not able to do on my own. This seems to be because I am
> not able to build PROJ 6.0. I have spent several days on this now and am at
> my wit's end.
> 
> If interested, contact me at cdelancy at blackfangtechnologies and name your
> price.

You may first look at the build recipees in
https://github.com/OSGeo/proj.4/blob/master/appveyor.yml
https://github.com/OSGeo/gdal/blob/master/appveyor.yml

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 27 13:34:44 2019
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 27 May 2019 20:34:44 +0000
Subject: [gdal-dev] Document typo fix suggestion
Message-ID: <c06408c544af4b1c876b490695bd63b0@C119S212VM042.msvyvi.vaha.local>

Hi,

There are 7 occasions of "persitant" in the GDAL documentation but I do not know how to fix them into "persistent" simply with one pull request. Advice about how to do that appreciated but I won't get angry if someone just makes the fix.

https://github.com/OSGeo/gdal/search?q=persitant&unscoped_q=persitant

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/cf910dde/attachment.html>

From mateusz at loskot.net  Mon May 27 13:40:42 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 27 May 2019 22:40:42 +0200
Subject: [gdal-dev] Document typo fix suggestion
In-Reply-To: <c06408c544af4b1c876b490695bd63b0@C119S212VM042.msvyvi.vaha.local>
References: <c06408c544af4b1c876b490695bd63b0@C119S212VM042.msvyvi.vaha.local>
Message-ID: <CABUeae9jmbxLznq+eVJNvunc2BOcjViGQjfHBd2FXSEfq5X7fA@mail.gmail.com>

Simply, submit pull request.

Mateusz Loskot, mateusz at loskot.net
(Sent from mobile)

On Mon, 27 May 2019, 22:34 Rahkonen Jukka (MML), <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
>
>
> There are 7 occasions of ”persitant” in the GDAL documentation but I do
> not know how to fix them into “persistent” simply with one pull request.
> Advice about how to do that appreciated but I won’t get angry if someone
> just makes the fix.
>
>
>
> https://github.com/OSGeo/gdal/search?q=persitant&unscoped_q=persitant
>
>
>
> -Jukka Rahkonen-
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/6d960246/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 27 13:59:22 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 27 May 2019 13:59:22 -0700 (MST)
Subject: [gdal-dev] Document typo fix suggestion
In-Reply-To: <CABUeae9jmbxLznq+eVJNvunc2BOcjViGQjfHBd2FXSEfq5X7fA@mail.gmail.com>
References: <c06408c544af4b1c876b490695bd63b0@C119S212VM042.msvyvi.vaha.local>
 <CABUeae9jmbxLznq+eVJNvunc2BOcjViGQjfHBd2FXSEfq5X7fA@mail.gmail.com>
Message-ID: <1558990762123-0.post@n6.nabble.com>

Well, there is a shortcut button "Edit on GitHub" on every document page
https://gdal.org/drivers/raster/jpeg2000.html. That't simple to use but it
creates a new branch for each edit. I was hoping to use that easy-edit
button for collecting all edits into one pull request. But I can do that in
my own fork.

-Jukka-


Mateusz Loskot wrote
> Simply, submit pull request.
> 
> Mateusz Loskot, 

> mateusz@

> (Sent from mobile)
> 
> On Mon, 27 May 2019, 22:34 Rahkonen Jukka (MML), <

> jukka.rahkonen@

>> wrote:
> 
>> Hi,
>>
>>
>>
>> There are 7 occasions of ”persitant” in the GDAL documentation but I do
>> not know how to fix them into “persistent” simply with one pull request.
>> Advice about how to do that appreciated but I won’t get angry if someone
>> just makes the fix.
>>
>>
>>
>> https://github.com/OSGeo/gdal/search?q=persitant&unscoped_q=persitant
>>
>>
>>
>> -Jukka Rahkonen-
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mateusz at loskot.net  Mon May 27 14:12:54 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 27 May 2019 23:12:54 +0200
Subject: [gdal-dev] Document typo fix suggestion
In-Reply-To: <1558990762123-0.post@n6.nabble.com>
References: <c06408c544af4b1c876b490695bd63b0@C119S212VM042.msvyvi.vaha.local>
 <CABUeae9jmbxLznq+eVJNvunc2BOcjViGQjfHBd2FXSEfq5X7fA@mail.gmail.com>
 <1558990762123-0.post@n6.nabble.com>
Message-ID: <CABUeae-T+c2ntj_AUXFOBz024jjh_kP3OK+4hhFoZ5Tm8_r7Qw@mail.gmail.com>

The button is for a single page edits only, I think.
Yes, it creates a new branch as that's GitHub convention or best practice
to always submit new PR from a topic branch.
I'd recommended to work on patches in traditional way, locally.

Mateusz Loskot, mateusz at loskot.net
(Sent from mobile)

On Mon, 27 May 2019, 22:59 jratike80, <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

> Well, there is a shortcut button "Edit on GitHub" on every document page
> https://gdal.org/drivers/raster/jpeg2000.html. That't simple to use but it
> creates a new branch for each edit. I was hoping to use that easy-edit
> button for collecting all edits into one pull request. But I can do that in
> my own fork.
>
> -Jukka-
>
>
> Mateusz Loskot wrote
> > Simply, submit pull request.
> >
> > Mateusz Loskot,
>
> > mateusz@
>
> > (Sent from mobile)
> >
> > On Mon, 27 May 2019, 22:34 Rahkonen Jukka (MML), <
>
> > jukka.rahkonen@
>
> >> wrote:
> >
> >> Hi,
> >>
> >>
> >>
> >> There are 7 occasions of ”persitant” in the GDAL documentation but I do
> >> not know how to fix them into “persistent” simply with one pull request.
> >> Advice about how to do that appreciated but I won’t get angry if someone
> >> just makes the fix.
> >>
> >>
> >>
> >> https://github.com/OSGeo/gdal/search?q=persitant&unscoped_q=persitant
> >>
> >>
> >>
> >> -Jukka Rahkonen-
> >> _______________________________________________
> >> gdal-dev mailing list
> >>
>
> > gdal-dev at .osgeo
>
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/0fbb0a08/attachment.html>

From me at komzpa.net  Mon May 27 17:58:30 2019
From: me at komzpa.net (=?UTF-8?Q?Darafei_=22Kom=D1=8Fpa=22_Praliaskouski?=)
Date: Mon, 27 May 2019 17:58:30 -0700
Subject: [gdal-dev] Document typo fix suggestion
In-Reply-To: <1558990762123-0.post@n6.nabble.com>
References: <c06408c544af4b1c876b490695bd63b0@C119S212VM042.msvyvi.vaha.local>
 <CABUeae9jmbxLznq+eVJNvunc2BOcjViGQjfHBd2FXSEfq5X7fA@mail.gmail.com>
 <1558990762123-0.post@n6.nabble.com>
Message-ID: <CAC8Q8t+gQGZr+r+QgifJM6mRk4NmEZX_S4feAuFV3t2Wm8A2jg@mail.gmail.com>

After you submit your pull request, go to your own fork and select newly
created branch. Edit button in it will append changes to the pull request.

пн, 27 мая 2019, 1:59 PM карыстальнік jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> напісаў:

> Well, there is a shortcut button "Edit on GitHub" on every document page
> https://gdal.org/drivers/raster/jpeg2000.html. That't simple to use but it
> creates a new branch for each edit. I was hoping to use that easy-edit
> button for collecting all edits into one pull request. But I can do that in
> my own fork.
>
> -Jukka-
>
>
> Mateusz Loskot wrote
> > Simply, submit pull request.
> >
> > Mateusz Loskot,
>
> > mateusz@
>
> > (Sent from mobile)
> >
> > On Mon, 27 May 2019, 22:34 Rahkonen Jukka (MML), <
>
> > jukka.rahkonen@
>
> >> wrote:
> >
> >> Hi,
> >>
> >>
> >>
> >> There are 7 occasions of ”persitant” in the GDAL documentation but I do
> >> not know how to fix them into “persistent” simply with one pull request.
> >> Advice about how to do that appreciated but I won’t get angry if someone
> >> just makes the fix.
> >>
> >>
> >>
> >> https://github.com/OSGeo/gdal/search?q=persitant&unscoped_q=persitant
> >>
> >>
> >>
> >> -Jukka Rahkonen-
> >> _______________________________________________
> >> gdal-dev mailing list
> >>
>
> > gdal-dev at .osgeo
>
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190527/fd1f9b4e/attachment-0001.html>

From cdelancy at blackfangtechnologies.com  Mon May 27 21:29:30 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Mon, 27 May 2019 21:29:30 -0700 (MST)
Subject: [gdal-dev] Willing to Pay for Help Building GDAL 3 on WIndows
In-Reply-To: <3080804.NfcRZvIpG9@even-i700>
References: <1558963052192-0.post@n6.nabble.com> <3080804.NfcRZvIpG9@even-i700>
Message-ID: <1559017770452-0.post@n6.nabble.com>

Thank you for your reply. 

Unfortunately, I had never heard of a .yml file before your post and I would
not know what to do with what you have linked. My attempts to research it
haven't yielded anything useful.

Is 100 USD per hour worth anyone's time?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mateusz at loskot.net  Mon May 27 23:12:08 2019
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 28 May 2019 08:12:08 +0200
Subject: [gdal-dev] Willing to Pay for Help Building GDAL 3 on WIndows
In-Reply-To: <1559017770452-0.post@n6.nabble.com>
References: <1558963052192-0.post@n6.nabble.com> <3080804.NfcRZvIpG9@even-i700>
 <1559017770452-0.post@n6.nabble.com>
Message-ID: <CABUeae-w7Yx6XZ+3EoN7b7qPvJNLo4cMxmEwdgprtN+sr64bJw@mail.gmail.com>

On Tue, 28 May 2019, 06:29 CDelancy, <cdelancy at blackfangtechnologies.com>
wrote:

> Thank you for your reply.
>
> Unfortunately, I had never heard of a .yml file before your post and I
> would
> not know what to do with what you have linked. My attempts to research it
> haven't yielded anything useful.
>

It's plain text file with specification of steps to build GDAL used by CI
servers.
The steps are plain to commands for Windows Command Prompt and/or
PowerShell.

For example, NMAKE. EXE invocation
https://github.com/OSGeo/gdal/blob/master/appveyor.yml#L158

Simpky, you read it and replicate the same steps locally.

If you've ever compiled C/C++ software on Windows, iy all should look
familiar.



-- 
Mateusz Loskot, mateusz at loskot.net
(Sent from mobile)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190528/ab10634b/attachment.html>

From raphael.das.gupta at hsr.ch  Tue May 28 05:48:41 2019
From: raphael.das.gupta at hsr.ch (Raphael Das Gupta)
Date: Tue, 28 May 2019 14:48:41 +0200
Subject: [gdal-dev] YAML,
 AppVeyor and the perks of continuous integration (Re: Willing to
 Pay for Help Building GDAL 3 on WIndows)
In-Reply-To: <1559017770452-0.post@n6.nabble.com>
References: <1558963052192-0.post@n6.nabble.com>
 <3080804.NfcRZvIpG9@even-i700> <1559017770452-0.post@n6.nabble.com>
Message-ID: <7b83456f-ba0a-1dd2-c092-ed0530e47dd4@hsr.ch>

On 28.05.19 06:29, CDelancy wrote:
> Unfortunately, I had never heard of a .yml file before your post and I would
> not know what to do with what you have linked. My attempts to research it
> haven't yielded anything useful.
.yml is one of the file extensions for the text-based YAML 
data-serialization language <https://en.wikipedia.org/wiki/YAML>. (The 
other one being .yaml)

It is usually used for configuration files of various kinds that have to 
be parsed by software but should also be as readable as possible for humans.

AppVeyor <https://www.appveyor.com/> is a continuous integration 
service, that is, it can be made to automatically build software from 
source and/or to execute linting and other checks or functional tests on 
it. Because the steps needed differ from one software project to 
another, they need to be configurable. That configuration is done in YAML.

The GDAL and PROJ.4 projects also seems to use that service. And as the 
builds there are known to work (they run regularly and people get 
notified when they break and will usually try to fix them ASAP), the 
steps as configured in the respective YAML files are worth trying when 
you try to build them yourself.

Because the YAML syntax is inspired by well-known and easy-to-comprehend 
conventions (similar e.g. to how bullet lists are represented in 
plaintext emails or other plaintext documents), you don't even need to 
really know the YAML file format to understand most of the configuration 
content. (I.e., understand what the build steps are command-wise. What 
each step does in detail or when and why it is needed might of course 
need more knowledge to understand.)

Good luck and kind regards,
Raphael

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190528/d20f1aa5/attachment.html>

From simon.eves at omnisci.com  Tue May 28 10:16:35 2019
From: simon.eves at omnisci.com (Simon Eves)
Date: Tue, 28 May 2019 10:16:35 -0700
Subject: [gdal-dev] Lame question,
 but failing to build GDAL 3.0.0RC2 against Proj 6.0.0
In-Reply-To: <47edff21-64f9-d0f0-c2fd-8900f2db3faf@gmail.com>
References: <CAJf0KTRY63D64auFshwo=X8vvTTeBFYebUiA5kTMo50UT_7o=g@mail.gmail.com>
 <1692104.ijcIiCbu5s@even-i700>
 <CAJf0KTQg64+kOPLByr1PxXGXr=WjBKunFAPtLMiL+CAbk2x8OA@mail.gmail.com>
 <2465452.Pbc1c8lu4F@even-i700>
 <CAJf0KTQNz9va0HpXLnhf1wdbOqeMfwRXo3Fmwmr648R2bs_7QA@mail.gmail.com>
 <CAJf0KTSHfhdGB1myoQy8x0pfyBS2uHD6i_KZyvjjbSz4GuVWpA@mail.gmail.com>
 <CAJf0KTQqcEavuCm3CQJUsK5bq=ZZf3BUkboOBwnKj=kUxrA_iA@mail.gmail.com>
 <47edff21-64f9-d0f0-c2fd-8900f2db3faf@gmail.com>
Message-ID: <CAJf0KTScr=qbjJ_2+84YZzCpK=KGQJCa+TO7p0G0Lwcxwtc3sQ@mail.gmail.com>

Confirming that setting LDFLAGS as above just for the GDAL
configure-and-build resolves the problem.

Our build guy thinks it's a little hacky, so I'd like to ask again what
changed that made this necessary.

This was all on Ubuntu 18.04, by the way. I need to try it on our other
supported Linux flavors too...


On Wed, May 15, 2019 at 12:52 PM Jim Klassen <klassen.js at gmail.com> wrote:

> I know I am late to the party, but I ran into the same thing today
> (Building Proj 6, GDAL 3 on Debian Stretch).  I got around it by setting
> LDFLAGS before running ./configure so the linker finds the proj 6 install
> first.  Without setting LDFLAGS, ./configure would find the new proj, but
> libtool would try to link to the system one (by full path no less, not just
> -lproj).
>
> So assuming proj 6 (and GDAL) is installed in $INSTALL_DIR:
>
> export LDFLAGS="-L${INSTALL_DIR}/lib -Wl,-rpath,${INSTALL_DIR}/lib"
> ./configure \
>                 --prefix="${INSTALL_DIR}" \
>                 --with-proj="${INSTALL_DIR}"
>
> I'm not sure if it matters, but I also set
> CMAKE_INSTALL_RPATH=$INSTALL_DIR when I build proj.
>
>
> On 5/8/19 6:54 PM, Simon Eves wrote:
>
> I removed the system libgdal-dev and proj-bin, and then this sequence
> worked, with ldd showing the local proj, and the apps all compile.
>
> Still convinced I'm doing something stupid and n00b, but what? Why didn't
> the local proj DSO take priority before?
>
> On Wed, May 8, 2019 at 9:29 AM Simon Eves <simon.eves at omnisci.com> wrote:
>
>> $ ls -l /home/simon.eves/scratch/gdal3/install/lib/
>> total 107536
>> -rw-r--r-- 1 simon.eves mapd 79490260 May  8 09:06 libproj.a
>> -rwxr-xr-x 1 simon.eves mapd      998 May  8 09:06 libproj.la
>> lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so ->
>> libproj.so.15.0.0
>> lrwxrwxrwx 1 simon.eves mapd       17 May  8 09:06 libproj.so.15 ->
>> libproj.so.15.0.0
>> -rwxr-xr-x 1 simon.eves mapd 30610584 May  8 09:06 libproj.so.15.0.0
>> drwxr-xr-x 2 simon.eves mapd     4096 May  8 09:06 pkgconfig
>>
>>
>> On Wed, May 8, 2019 at 9:25 AM Simon Eves <simon.eves at omnisci.com> wrote:
>>
>>> No, it shows /usr/lib/x86_64-linux-gnu/libproj.sso.12 (the
>>> system-installed Proj 5.2.0)
>>>
>>> I just did it all again from scratch...
>>>
>>> $ echo $LD_LIBRARY_PATH
>>>
>>> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/local/mapd-deps/lib:/usr/local/cuda/lib64
>>> $ cd /home/simon.eves/scratch/gdal3/
>>> $ rm -rf gdal-3.0.0 proj-6.0.0 install/*
>>> $ tar xzvf proj-6.0.0.tar.gz
>>> $ cd proj-6.0.0/
>>> $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
>>> $ make -j12
>>> [completes]
>>> $ make install
>>> [completes]
>>> $ cd ..
>>> $ tar xvf gdal-3.0.0rc2.tar
>>> $ cd gdal-3.0.0/
>>> $ ./configure --prefix=/home/simon.eves/scratch/gdal3/install
>>> --without-geos --with-kml=/usr/local/mapd-deps
>>> --with-proj=/home/simon.eves/scratch/gdal3/install
>>> [completes, shows Proj >= 6.0 yes]
>>> $ make -j12
>>> [fails in first app as before]
>>> $ ldd .libs/libgdal.so | grep proj
>>> libproj.so.12 => /usr/lib/x86_64-linux-gnu/libproj.so.12
>>> (0x00007f3d98cb3000)
>>>
>>> What am I doing wrong, such that the combination of $LD_LIBRARY_PATH
>>> priority and --with-proj still isn't making GDAL see the local Proj before
>>> the system one?
>>>
>>> Simon
>>>
>>> On Wed, May 8, 2019 at 12:41 AM Even Rouault <even.rouault at spatialys.com>
>>> wrote:
>>>
>>>> On mardi 7 mai 2019 16:42:41 CEST Simon Eves wrote:
>>>> > That's what I have, even if that's not what I wrote.
>>>> >
>>>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ echo $LD_LIBRARY_PATH
>>>> >
>>>> /home/simon.eves/scratch/gdal3/install/lib:/usr/local/mapd-deps/lib64:/usr/l
>>>> > ocal/mapd-deps/lib:/usr/local/cuda/lib64:
>>>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ ./configure
>>>> --without-geos
>>>> > --with-libkml=/usr/local/mapd-deps
>>>> > --with-proj=/home/simon.eves/scratch/gdal3/install
>>>> > ...
>>>> > simon.eves at football:~/scratch/gdal3/gdal-3.0.0$ make
>>>> > ...
>>>> > (cd apps; make)
>>>> > make[1]: Entering directory
>>>> '/home/simon.eves/scratch/gdal3/gdal-3.0.0/apps'
>>>> > /bin/bash /home/simon.eves/scratch/gdal3/gdal-3.0.0/libtool
>>>> --mode=link
>>>> > --silent g++  gdalinfo_bin.lo
>>>> /home/simon.eves/scratch/gdal3/gdal-3.0.0/
>>>> > libgdal.la  -o gdalinfo
>>>> > /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so: undefined
>>>> > reference to `proj_alter_name'
>>>> > [etc.]
>>>>
>>>> Look at the output of
>>>>
>>>> ldd /home/simon.eves/scratch/gdal3/gdal-3.0.0/.libs/libgdal.so | grep
>>>> proj
>>>>
>>>> It should normally point to the libproj.so.15 of
>>>> /home/simon.eves/scratch/gdal3/install/lib
>>>>
>>>> --
>>>> Spatialys - Geospatial professional services
>>>> http://www.spatialys.com
>>>>
>>>
>>>
>>> --
>>> <http://www.omnisci.com/>
>>> Simon Eves
>>> Senior Graphics Engineer, Rendering Group
>>> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>>>
>>>
>>> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>>>
>>>
>>
>> --
>> <http://www.omnisci.com/>
>> Simon Eves
>> Senior Graphics Engineer, Rendering Group
>> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>>
>>
>> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>>
>>
>
> --
> <http://www.omnisci.com/>
> Simon Eves
> Senior Graphics Engineer, Rendering Group
> OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA
>
>
> Email: simon.eves at omnisci.com | Cell:  415.902.1996
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
OmniSci, 1 Front St. #2650, San Francisco, CA 94111, USA


Email: simon.eves at omnisci.com | Cell:  415.902.1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190528/03d51f25/attachment-0001.html>

From soonhui.ngu at gmail.com  Tue May 28 17:50:21 2019
From: soonhui.ngu at gmail.com (nsoonhui)
Date: Tue, 28 May 2019 17:50:21 -0700 (MST)
Subject: [gdal-dev] How to properly reorder the raster data from bottom
 up to top down?
In-Reply-To: <CANuCbjS=9efXb_Luu=5qd1NnOYfyVd1HST_c8zWTRh73Q2AGTA@mail.gmail.com>
References: <CANuCbjS=9efXb_Luu=5qd1NnOYfyVd1HST_c8zWTRh73Q2AGTA@mail.gmail.com>
Message-ID: <1559091021112-0.post@n6.nabble.com>

Anyone has any idea on this?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cdelancy at blackfangtechnologies.com  Tue May 28 18:41:36 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Tue, 28 May 2019 18:41:36 -0700 (MST)
Subject: [gdal-dev] YAML,
 AppVeyor and the perks of continuous integration (Re: Willing to
 Pay for Help Building GDAL 3 on WIndows)
In-Reply-To: <7b83456f-ba0a-1dd2-c092-ed0530e47dd4@hsr.ch>
References: <1558963052192-0.post@n6.nabble.com>
 <3080804.NfcRZvIpG9@even-i700> <1559017770452-0.post@n6.nabble.com>
 <7b83456f-ba0a-1dd2-c092-ed0530e47dd4@hsr.ch>
Message-ID: <1559094096354-0.post@n6.nabble.com>

Thank you so much for the explanation, however, I fear it will not help my
problem. 

You see, I cannot build GDAL3 without PROJ4 6.0, and I wouldn't want to
because important functionality would be missing. However, I cannot build
PROJ because it depends on SQLite3. I cannot build SQlite3 because there
appear to be errors in the instructions provided here:
https://sqlite.org/src/doc/trunk/README.md

"For example:

    mkdir bld
    cd bld
    nmake /f Makefile.msc TOP=..\sqlite
    nmake /f Makefile.msc sqlite3.c TOP=..\sqlite
    nmake /f Makefile.msc sqlite3.dll TOP=..\sqlite
    nmake /f Makefile.msc sqlite3.exe TOP=..\sqlite
    nmake /f Makefile.msc test TOP=..\sqlite"

However, there is no Makefile in the bld directory that was just created, so
"fatal error U1052: file 'Makefile.msc' not found" results.

If I alter the instructions to cd back into the parent sqlite folder where a
makefile is located, I get 

"        tclsh ..\sqlite\tool\mkopcodec.tcl opcodes.h > opcodes.c
'tclsh' is not recognized as an internal or external command,
operable program or batch file.
NMAKE : fatal error U1077: 'tclsh' : return code '0x1'
Stop."

So I Google "tclsh" and now I'm off on in search for a program called
ActiveTcl. The quest for dependencies has no end in sight. 

After installing that program, I return to trying to build sqlite3 with the
modified command dicuseed previously, the new result is:

"sqlite3.c
sqlite3.c(19711): error C2065: 'OPFLG_INITIALIZER': undeclared identifier
sqlite3.c(19711): error C2099: initializer is not a constant
sqlite3.c(76038): error C2065: 'OP_Init': undeclared identifier
sqlite3.c(76263): error C2065: 'OP_Goto': undeclared identifier
sqlite3.c(76270): error C2065: 'OP_String8': undeclared identifier
sqlite3.c(76292): error C2065: 'OP_Null': undeclared identifier
sqlite3.c(76292): error C2065: 'OP_String8': undeclared identifier
sqlite3.c(76294): error C2065: 'OP_Integer': undeclared identifier
sqlite3.c(76299): error C2065: 'OP_ResultRow': undeclared identifier
sqlite3.c(76384): error C2065: 'OP_Explain': undeclared identifier
sqlite3.c(76412): error C2065: 'OP_ParseSchema': undeclared identifier"

Lines like this continue until 

"sqlite3.c(85452): fatal error C1003: error count exceeds 100; stopping
compilation
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\HostX86\x86\cl.EXE"' :
return code '0x2'
Stop."

So, here I am at a dead end.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From joshua.geoghegan at mornpen.vic.gov.au  Tue May 28 18:49:21 2019
From: joshua.geoghegan at mornpen.vic.gov.au (Joshua Geoghegan)
Date: Wed, 29 May 2019 01:49:21 +0000
Subject: [gdal-dev] Issues with Running ogr2ogr Script from SQL Server or
	Task Scheduler
Message-ID: <MEAPR01MB440750DAE7754669D78A3AD0EC1F0@MEAPR01MB4407.ausprd01.prod.outlook.com>

Hi all,

I've have an ogr2ogr script (attached) that creates a kml from a sql database. This works fine, but if I run the batch file from SQL Server using xp_cmdshell I get the following message twice

ERROR 1: Can't load requested DLL: \\gissrv.ad.mps\data\ogr2ogr\gdalplugins\ogr_MSSQLSpatial.dll
126: The specified module could not be found.

The kml is created but without the geometries and smaller file size.

I ended up deciding on creating a scheduled task on our production server to run the batch every few hours, and the same problem occurs, the file is smaller without geometries.
I set environment path variables for GDAL, GDAL_DATA and GDAL_DRIVER but the problem remains.
The ogr2ogr files live on our GIS server, so I also tested by copying them locally on the Production server with no luck.

I then tested the scheduled task on our development server and it runs fine. I see there are some dll's on C:\System32 on dev that aren't in prod, including

  *   SQLServerSpatial100,120,140, although 110 is on both servers.
  *   Msodbcsql11 - I installed the driver but no luck
  *   adalsql - I installed the driver but no luck


I am happy to go with the scheduled task on Development as I've spent a lot of time trying to get this working, but what would cause production to fail and why can't I get it to work as SQL stored procedure?
Ideally I'd like the SQL option so the user can have the data on the fly.

Regards,


[MPS]

JOSHUA GEOGHEGAN | GIS Specialist
Email: joshua.geoghegan at mornpen.vic.gov.au<mailto:joshua.geoghegan at mornpen.vic.gov.au>
Phone: 03 5950 1321
Private Bag 1000, Rosebud VIC 3939 | 90 Besgrove Street, Rosebud VIC 3939
Follow us on social media!
[mornpen.vic.gov.au]<https://www.mornpen.vic.gov.au/>[Facebook]<https://www.facebook.com/mornpenshire>[Instagram]<https://www.instagram.com/ourpeninsula/>[Twitter]<http://twitter.com/MornPenShire>
[Latest News]<https://www.mornpen.vic.gov.au/emailcampaign>
Mornington Peninsula Shire acknowledges and pays respect to the Boon Wurrung/Bunurong people,
the traditional custodians of these lands and waters.
We are committed to carbon neutrality.



DISCLAIMER: This email (and attachments) is for the intended recipient only and may contain privileged, confidential or copyright information. If received in error, please notify sender immediately and delete. Any other use is prohibited. Shire accepts no liability for damage caused by this email (and attachments) due to viruses, corruption, delay, interruption, unauthorised access or use. Views expressed are those of the individual and not necessarily Shire. Shire will only collect personal information from you with your prior consent, use it for the purpose collected or as reasonably expected and not disclose without consent, except if required by law/regulation. For further information see our privacy policy:
[Arrow] mornpen.vic.gov.au/privacystatement<https://www.mornpen.vic.gov.au/privacystatement>

[Consider the Environment]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 4821 bytes
Desc: image001.gif
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0005.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.gif
Type: image/gif
Size: 257 bytes
Desc: image002.gif
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0006.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.gif
Type: image/gif
Size: 201 bytes
Desc: image003.gif
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0007.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.gif
Type: image/gif
Size: 289 bytes
Desc: image004.gif
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0008.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.gif
Type: image/gif
Size: 199 bytes
Desc: image005.gif
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0009.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.jpg
Type: image/jpeg
Size: 17377 bytes
Desc: image006.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0001.jpg>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: GMSC_Bushland_WMAExport.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/fdcbd4d0/attachment-0001.txt>

From chris.marsh at usask.ca  Tue May 28 20:06:16 2019
From: chris.marsh at usask.ca (Marsh, Chris)
Date: Wed, 29 May 2019 03:06:16 +0000
Subject: [gdal-dev] YAML,
 AppVeyor and the perks of continuous integration (Re: Willing to
 Pay for Help Building GDAL 3 on WIndows)
In-Reply-To: <1559094096354-0.post@n6.nabble.com>
References: <1558963052192-0.post@n6.nabble.com>
 <3080804.NfcRZvIpG9@even-i700> <1559017770452-0.post@n6.nabble.com>
 <7b83456f-ba0a-1dd2-c092-ed0530e47dd4@hsr.ch>
 <1559094096354-0.post@n6.nabble.com>
Message-ID: <CAFgDerGFAfdhexSRwgAWFK3_soSkxdTsd7Ehn7PSbq4uMmiHhg@mail.gmail.com>

Sorry to hear you're having these issues. I unfortunately don't do windows dev, so I'm not really sure what to suggest build wise.

However, if you're stuck on the build proj4 step of building gdal, I would suggest you try their mailing list. I've had good luck there. Especially if they have errors in their build documentation.
https://proj4.org/community/channels.html

Cheers
Chris

On Tue, May 28, 2019 at 7:41 PM CDelancy <cdelancy at blackfangtechnologies.com<mailto:cdelancy at blackfangtechnologies.com>> wrote:
Thank you so much for the explanation, however, I fear it will not help my
problem.

You see, I cannot build GDAL3 without PROJ4 6.0, and I wouldn't want to
because important functionality would be missing. However, I cannot build
PROJ because it depends on SQLite3. I cannot build SQlite3 because there
appear to be errors in the instructions provided here:
https://sqlite.org/src/doc/trunk/README.md

"For example:

    mkdir bld
    cd bld
    nmake /f Makefile.msc TOP=..\sqlite
    nmake /f Makefile.msc sqlite3.c TOP=..\sqlite
    nmake /f Makefile.msc sqlite3.dll TOP=..\sqlite
    nmake /f Makefile.msc sqlite3.exe TOP=..\sqlite
    nmake /f Makefile.msc test TOP=..\sqlite"

However, there is no Makefile in the bld directory that was just created, so
"fatal error U1052: file 'Makefile.msc' not found" results.

If I alter the instructions to cd back into the parent sqlite folder where a
makefile is located, I get

"        tclsh ..\sqlite\tool\mkopcodec.tcl opcodes.h > opcodes.c
'tclsh' is not recognized as an internal or external command,
operable program or batch file.
NMAKE : fatal error U1077: 'tclsh' : return code '0x1'
Stop."

So I Google "tclsh" and now I'm off on in search for a program called
ActiveTcl. The quest for dependencies has no end in sight.

After installing that program, I return to trying to build sqlite3 with the
modified command dicuseed previously, the new result is:

"sqlite3.c
sqlite3.c(19711): error C2065: 'OPFLG_INITIALIZER': undeclared identifier
sqlite3.c(19711): error C2099: initializer is not a constant
sqlite3.c(76038): error C2065: 'OP_Init': undeclared identifier
sqlite3.c(76263): error C2065: 'OP_Goto': undeclared identifier
sqlite3.c(76270): error C2065: 'OP_String8': undeclared identifier
sqlite3.c(76292): error C2065: 'OP_Null': undeclared identifier
sqlite3.c(76292): error C2065: 'OP_String8': undeclared identifier
sqlite3.c(76294): error C2065: 'OP_Integer': undeclared identifier
sqlite3.c(76299): error C2065: 'OP_ResultRow': undeclared identifier
sqlite3.c(76384): error C2065: 'OP_Explain': undeclared identifier
sqlite3.c(76412): error C2065: 'OP_ParseSchema': undeclared identifier"

Lines like this continue until

"sqlite3.c(85452): fatal error C1003: error count exceeds 100; stopping
compilation
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\HostX86\x86\cl.EXE"' :
return code '0x2'
Stop."

So, here I am at a dead end.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/522c16a9/attachment.html>

From athomas at thinkspatial.com.au  Tue May 28 23:40:16 2019
From: athomas at thinkspatial.com.au (Alan Thomas)
Date: Wed, 29 May 2019 16:40:16 +1000
Subject: [gdal-dev] YAML,
 AppVeyor and the perks of continuous integration (Re: Willing to
 Pay for Help Building GDAL 3 on WIndows)
In-Reply-To: <1559094096354-0.post@n6.nabble.com>
References: <1558963052192-0.post@n6.nabble.com> <3080804.NfcRZvIpG9@even-i700>
 <1559017770452-0.post@n6.nabble.com>
 <7b83456f-ba0a-1dd2-c092-ed0530e47dd4@hsr.ch>
 <1559094096354-0.post@n6.nabble.com>
Message-ID: <CALhO07ywG1NTW7RW3mDzJhV1hKvWP0xip2mOxHcejVZOemQQgw@mail.gmail.com>

Is there a particular reason why you are building PROJ and SQLite from
scratch? Unless you have a special reason to build these tools (e.g.
custom code), you can download the pre-built binaries (.dll and .lib
files) of these tools from Tamas Szekeres at
http://gisinternals.com/sdk.php. Then, in your gdal/nmake.local file
(you may need to create it if it does not exist), add

# Include PROJ support
# These variables should point to paths in the GIS Internals Development Kit
PROJ_INCLUDE = -I"c:\path\to\release-1xxx-x64\include\proj6"
PROJ_LIBRARY = c:\path\to\release-1xxx-x64\lib\proj_6_0.lib

In particular I highly doubt there is a reason that you need to build
SQLite from scratch...

Alan

On Wed, 29 May 2019 at 11:41, CDelancy
<cdelancy at blackfangtechnologies.com> wrote:
>
> Thank you so much for the explanation, however, I fear it will not help my
> problem.
>
> You see, I cannot build GDAL3 without PROJ4 6.0, and I wouldn't want to
> because important functionality would be missing. However, I cannot build
> PROJ because it depends on SQLite3. I cannot build SQlite3 because there
> appear to be errors in the instructions provided here:
> https://sqlite.org/src/doc/trunk/README.md
>
> "For example:
>
>     mkdir bld
>     cd bld
>     nmake /f Makefile.msc TOP=..\sqlite
>     nmake /f Makefile.msc sqlite3.c TOP=..\sqlite
>     nmake /f Makefile.msc sqlite3.dll TOP=..\sqlite
>     nmake /f Makefile.msc sqlite3.exe TOP=..\sqlite
>     nmake /f Makefile.msc test TOP=..\sqlite"
>
> However, there is no Makefile in the bld directory that was just created, so
> "fatal error U1052: file 'Makefile.msc' not found" results.
>
> If I alter the instructions to cd back into the parent sqlite folder where a
> makefile is located, I get
>
> "        tclsh ..\sqlite\tool\mkopcodec.tcl opcodes.h > opcodes.c
> 'tclsh' is not recognized as an internal or external command,
> operable program or batch file.
> NMAKE : fatal error U1077: 'tclsh' : return code '0x1'
> Stop."
>
> So I Google "tclsh" and now I'm off on in search for a program called
> ActiveTcl. The quest for dependencies has no end in sight.
>
> After installing that program, I return to trying to build sqlite3 with the
> modified command dicuseed previously, the new result is:
>
> "sqlite3.c
> sqlite3.c(19711): error C2065: 'OPFLG_INITIALIZER': undeclared identifier
> sqlite3.c(19711): error C2099: initializer is not a constant
> sqlite3.c(76038): error C2065: 'OP_Init': undeclared identifier
> sqlite3.c(76263): error C2065: 'OP_Goto': undeclared identifier
> sqlite3.c(76270): error C2065: 'OP_String8': undeclared identifier
> sqlite3.c(76292): error C2065: 'OP_Null': undeclared identifier
> sqlite3.c(76292): error C2065: 'OP_String8': undeclared identifier
> sqlite3.c(76294): error C2065: 'OP_Integer': undeclared identifier
> sqlite3.c(76299): error C2065: 'OP_ResultRow': undeclared identifier
> sqlite3.c(76384): error C2065: 'OP_Explain': undeclared identifier
> sqlite3.c(76412): error C2065: 'OP_ParseSchema': undeclared identifier"
>
> Lines like this continue until
>
> "sqlite3.c(85452): fatal error C1003: error count exceeds 100; stopping
> compilation
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> Studio\2017\Community\VC\Tools\MSVC\14.16.27023\bin\HostX86\x86\cl.EXE"' :
> return code '0x2'
> Stop."
>
> So, here I am at a dead end.
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Alan Thomas
Software Developer
ThinkSpatial
http://www.thinkspatial.com.au

From even.rouault at spatialys.com  Wed May 29 06:48:46 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 May 2019 15:48:46 +0200
Subject: [gdal-dev] Upcoming Cloud Optimized Geotiff (COG) related
	enhancements
In-Reply-To: <42081947.AsHn9XMMPI@even-i700>
References: <42081947.AsHn9XMMPI@even-i700>
Message-ID: <5574227.TDbNqEBEyc@even-i700>

Hi,

I've submitted a PR per https://github.com/OSGeo/gdal/pull/1600 which 
implements the low-level work of below points 4) and 5). To get all benefits, 
this requires GDAL to be built against internal libtiff or libtiff master 
after https://gitlab.com/libtiff/libtiff/merge_requests/81 and https://
gitlab.com/libtiff/libtiff/merge_requests/82 have been merged. Starting with 
libtiff 4.0.11 in which this changes will appear, there won't be any specific 
behaviour of building against internal libtiff (currently this is required to 
avoid loading the whole tile indexes)

As I anticipated, reading a single tile from a COG, generated and read with 
this PR, now requires just 3 GET range requests: one to get the header and 
IFDs (without the tile array indices), one to get the offset of the tile and 
its successor, and one to get the tile data. That for images with or without 
transparency mask.

To describe the specific layout of those COG files, I've decided to include a 
description of the features used at the beginning of the file, so that 
optimized readers (like GDAL) can use them and take shortcuts. I've decided to 
include them as ASCII strings "hidden" just after the 8 first bytes of a 
ClassicTIFF (or after the 16 first ons for a BigTIFF). That is the first IFD 
starts just after those strings. This is completely valid to have 'ghost' 
areas like this in a TIFF file, and readers will normally skip over them. So 
for a COG file with a transparency mask, those strings will be:
GDAL_STRUCTURAL_METADATA_SIZE=000177 bytes\n
LAYOUT=IFDS_BEFORE_DATA\n
STRILE_ORDER=ROW_MAJOR\n
STRILE_LEADER=SIZE_AS_UINT4\n
STRILE_TRAILER=LAST_4_BYTES_REPEATED\n
KNOWN_INCOMPATIBLE_EDITION=NO\n
MASK_INTERLEAVED_WITH_IMAGERY=YES\n

For a COG without mask, the last item will not be present of course.

So it starts with GDAL_STRUCTURAL_METADATA_SIZE=XXXXXX bytes\n where XXXXXX 
describes the size of this whole section (starting at the beginning of 
GDAL_STRUCTURAL_METADATA_SIZE).

- LAYOUT=IFDS_BEFORE_DATA: the IFDs are located at the beginning of the file. 
GDAL with this PR will also makes sure that the tile index arrays are written 
just after the IFDs and before the imagery, so that a first range request of 
16 KB will always get all the IFDs

- STRILE_ORDER=ROW_MAJOR: (strile is a contraction of 'strip or tile') the 
data for tiles is written in increasing tile id order. Future enhancements 
could possibly implement other layouts, like Z_ORDER or HILBERT_CURVE

- STRILE_LEADER=SIZE_AS_UINT4: each tile data is preceded by 4 bytes, in a 
'ghost' area as well, indicating the real tile size (in little endian order). 
TileOffset[i] points to the real tile data, that is, just after those 4 bytes. 
An optimized reader seeing this metadata item will thus look for TileOffset[i] 
and TileOffset[i+1] to deduce it must fetch the data starting at 
offset=TileOffset[i] - 4 and of size=TileOffset[i+1]-TileOffset[i]+4. It then 
checks the 4 first bytes to see if the size in this leader marker is 
consistent with TileOffset[i+1]-TileOffset[i]. When there is no mask, they 
should normally be equal (modulo the size taken by STRILE_LEADER and 
STRILE_TRAILER). In the case where there is a mask and 
MASK_INTERLEAVED_WITH_IMAGERY=YES, then the tile size indicated in the leader 
will be < TileOffset[i+1]-TileOffset[i] since the data for the mask will 
follow the imagery data (see MASK_INTERLEAVED_WITH_IMAGERY=YES)

- STRILE_TRAILER=LAST_4_BYTES_REPEATED: just after the tile data, the last 4 
bytes of the tile data are repeated. This is a way if optimized readers to 
check that TIFF writers not aware of those optimizations have modified the 
TIFF file in a way that breaks the optimizations. If an optimized reader 
detects an inconsistency, it then fallback to the regular/slow method if using 
TileOffset[i] + TileByteCount[i]. I've hesitated about using something like a 
CRC32, but checking for the last 4 bytes is probably sufficient with 
compression schemes to detect if STRILE_LEADER is valid.

- KNOWN_INCOMPATIBLE_EDITION=NO: when a COG is generated this is always 
written. If GDAL is then used to modify the COG file, as most of the changes 
done on an existing COG file, will break the optimized structure, GDAL will 
change this metadata item to KNOWN_INCOMPATIBLE_EDITION=YES, and issue a 
warning on writing, and when reopening such file, so that users know they have 
'broken' their COG file

- MASK_INTERLEAVED_WITH_IMAGERY=YES: signals that mask data immediately 
follows imagery data. So when reading data at offset=TileOffset[i] - 4 and 
size=TileOffset[i+1]-TileOffset[i]+4, you'll get a buffer with:
	* leader with imagery tile size (4 bytes)
   * imagery data (starting at TileOffset[i] and of size TileByteCount[i])
   * trailer of imagery (4 bytes)
   * leader with mask tilesize (4 bytes)
   * mask data (starting at mask.TileOffset[i] and of size 
mask.TileByteCount[i], but none of them actually need to be read)
   * trailer of mask data (4 bytes)

One point I hesitated about was how to write those structural metadata. Other 
possibilities would have been to include them in the GDAL_METADATA TIFF tag 
which contains user visible metadata serialized as XML. But I prefered those 
structural details to remain mostly hidden. There are really low level details 
not describing the image content. A possibility based on GDAL_METADATA would 
have been to use a dedicated metadata domain to hold them, but a utility that 
would for example copy TIFF to TIFF could propagate the content of this tag 
while not including the needed leader & trailer that would be unknown of it.
One could also have introduced a new (or several) TIFF tag(s) to describe 
them, but that would have require to register them and caused warnings to be 
emitted when reading them with older GDAL versions. The only drawback I can 
think of about the solution I implemented is that if using only libtiff API 
those structural metadata cannot be discovered. Let me know if you believe 
that this could cause issues and what other solution would be preferred.

One other thought I had is that we could actually potentially save the reading 
of TileOffset[i] and TileOffset[i+1]. For uncompressed data, this would be 
trivial since only TileOffset[0] is needed to deduce the location of other 
tiles when STRILE_ORDER=ROW_MAJOR. But uncompressed data for COG must not be a 
very common use case. For compressed data, we could imagine to take the 
maximum compressed size of a tile, which would be written as a new metadata 
item, and adding padding to smaller tiles to get to that size. So that would 
require doing a first pass to compute that maximum tile size, and then the 
real one to write the file, so basically a x2 slowdown on generation. For JPEG 
compression, one could imagine to avoid most of that initial pass, by exmining 
just a few random samples in the source raster to compute the mean compressed 
tile size and its standard deviation, and use that to determine a maximum 
compressed tile. It could happen that some tiles would still be larger, in 
which case the writer would need to remove the higher frequencies of the tile 
data until the compressed data fits in the maximum allowed size. Another 
drawback is also potential significant lost space in the file if there a lot 
of variations in the compression rate among tiles. The criticity of this 
depends on how the file size vs the number of requests is seen as important 
(depends on cloud storage fees and use patterns).
And we could also potentially save the reading of the header (IFD description) 
of the file is the calling code could provide it to the GTiff reader (cases 
where it would always read the same COG and so could hardcode its header)
Anyway, those ideas are perhaps unneeded overcomplications and are not part of 
my current scheduled tasks, but I wanted to share them in case that seems of 
interest to anyone.

Even

> 
> 4) Optimizations specific to JPEG-compressed imagery (YCbCr color space)
> with a 1-bit transparency channel, to minimize the number of HTTP range
> requests needed to read them.
> As JPEG compression cannot include the transparency information, two TIFF
> IFD have to be created: one for YCbCr, and another one for alpha. Currently
> the COPY_SRC_OVERVIEWS=YES creation option of the GeoTIFF driver separates
> data for all the tiles of the color channels from data for all the tiles of
> the transparency channel. In practice, readers will generally want to
> access, for a same location, to data of both color and transparency
> channels. I will modify the writer to interleave blocks so that color and
> transparency information are contiguous. If COLOR_X_Y designates the tile
> with color information at coordinates X,Y (in tile coordinate space), the
> layout of data in the file will be: COLOR_0_0, TRANSPARENCY_0_0, COLOR_1_0,
> TRANSPARENCY_1_0, etc. The GeoTIFF driver will be improved to fetch
> together the color and transparency channel when such a layout is detected.
> 
> A further improvement is to be able to avoid completely to read the
> TileByteCount array of the color channel, and the TileByteCount & TileOffset
> arrays of the transparency channel. The trick is to reserve 4 bytes before
> the start of each COLOR_X_Y tile to indicate its size (those bytes will be
> 'ghost', that is not in the range of data pointed by
> TileByCount&TileOffset). An optimized reader wanting to read tile
> i=Y*nb_tiles_in_width+X will start by reading the offsets of tile i and
> i+1: TileOffset_color[i] and
> TileOffset_color[i+1]. It will then seek to TileOffset_color[i] – 4 and read
> 4 + TileOffset_color[i+1] – TileOffset_color[i] bytes in a buffer. The
> first 4 bytes of this buffer will indicate the number of bytes of the color
> tile, and thus it is possible to deduce the offset and size of the mask
> tile that is located at the end of the buffer. A TIFF metadata item will be
> written to indicate that such layout has been used (with an indication of
> the file size so as to be able to detect if the file has been later be
> altered in a non- optimized way), so that optimized readers can adopt the
> above described behavior. This will require to extend the libtiff interface
> so that the user can directly provide the input buffer to decompress.
> As the file will remain fully TIFF/BIGTIFF compliant, non-optimized readers
> (such as newer GDAL builds against an older external libtiff version, or
> previous GDAL versions) will still be able read it, loading values from the
> 4 arrays instead of just one.
> Note: for other compressions types, a simpler version of the above
> optimization can still be done, by using TileOffset[i] and TileOffset[i+1],
> and saving the read of TileByteCount[i]
> To sum up, with the improvements of this task, once the initial loading of
> metadata has been done, a GDAL ReadBlock(x,y) request will cause only two
> networks range requests: one to read TileOffset[i] and TileOffset[i+1]
> (potentially already cached if neighboring tiles have been previously
> accessed in the same process), and another one to read the imagery (+mask)
> data. Whereas currently, 6 might be needed for JPEG YcbCr+mask.
> 
> 5) Optimizing the layout of the header of a COG file
> 
> The current layout of the header part of COG file is:
> - TIFF / BigTIFF signature, followed by the offset of the first IFD (Image
> File Directory)
> - IFD of full resolution image, that is the list of the tags and their value
> when it consists of a single numeric value, followed by the offset of the
> next - IFD. Its size is 2 + number_of_tags * 12 + 4 (or 2 + number_of_tags
> * 20 + 8) bytes, so typically 200 bytes maximum
> - Values of TIFF tags that don't fit inline in the IFD directory, such as
> TileOffsets and TileByteCounts arrays and GeoTIFF keys
> - IFD of first overview (typically subsampled by a factor of 2)
> - Values of its tags that don't fit inline
> - ...
> -IFD of last overview
> - Values of its tags that don't fit inline
> 
> When the COG file is not too large, the fact of having the TileOffsets and
> TileByteCounts between IFD descriptors is not an issue since they are not
> too large, and most TIFF readers will load their values when opening the
> IFD. But for an optimized reader such as GDAL with internal libtiff support
> (or with external libtiff after the optimization of task 4), loading the
> values of the TileOffsets/TileByteCounts arrays is only needed when
> accessing imagery.
> 
> A more efficient layout for network access is :
> - TIFF / BigTIFF signature, followed by the offset of the first IFD
> - IFD of full resolution image, followed by the value of its non-inline
> tags, except  TileOffsets/TileByteCounts
> - IFD of first overview followed by the value of its non-inline tags, except
> - TileOffsets/TileByteCounts
> - IFD of last overview followed by the value of its non-inline tags, except
> TileOffsets/TileByteCounts
> - Values of the TileOffsets/TileByteCounts arrays of IFD of full resolution
> image
> - Values of the TileOffsets/TileByteCounts arrays of IFD of first overview
> - ...
> - Values of the TileOffsets/TileByteCounts arrays of IFD of last overview
> 
> With such a structure, the initial reading of 16 KB at the start of the file
> will be able to load the IFD descriptors of all overviews (and masks, which
> are actually interleaved in between when present). So, combined together
> with task 4, a cold read of a tile at any zoom level (ie opening the file +
> tile request) could result in just 3 network range requests: one to get the
> IFD descriptors at the start of the file, one to read the location of the
> tile from the TileOffsets array and one to read the tile data.
> The proposed structure itself is still fully TIFF compliant. The script that
> validates the COG structure will be adapted to accept that new variant of
> the header structure.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vincent.sarago at gmail.com  Wed May 29 06:56:21 2019
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Wed, 29 May 2019 09:56:21 -0400
Subject: [gdal-dev] Upcoming Cloud Optimized Geotiff (COG) related
 enhancements
In-Reply-To: <5574227.TDbNqEBEyc@even-i700>
References: <42081947.AsHn9XMMPI@even-i700> <5574227.TDbNqEBEyc@even-i700>
Message-ID: <74821FD0-67E4-4AD6-A1A5-8E9539458EFC@gmail.com>

Thanks for the hard work Even. 

> Le 29 mai 2019 à 09:48, Even Rouault <even.rouault at spatialys.com> a écrit :
> 
> Hi,
> 
> I've submitted a PR per https://github.com/OSGeo/gdal/pull/1600 which 
> implements the low-level work of below points 4) and 5). To get all benefits, 
> this requires GDAL to be built against internal libtiff or libtiff master 
> after https://gitlab.com/libtiff/libtiff/merge_requests/81 and https://
> gitlab.com/libtiff/libtiff/merge_requests/82 have been merged. Starting with 
> libtiff 4.0.11 in which this changes will appear, there won't be any specific 
> behaviour of building against internal libtiff (currently this is required to 
> avoid loading the whole tile indexes)
> 
> As I anticipated, reading a single tile from a COG, generated and read with 
> this PR, now requires just 3 GET range requests: one to get the header and 
> IFDs (without the tile array indices), one to get the offset of the tile and 
> its successor, and one to get the tile data. That for images with or without 
> transparency mask.
> 
> To describe the specific layout of those COG files, I've decided to include a 
> description of the features used at the beginning of the file, so that 
> optimized readers (like GDAL) can use them and take shortcuts. I've decided to 
> include them as ASCII strings "hidden" just after the 8 first bytes of a 
> ClassicTIFF (or after the 16 first ons for a BigTIFF). That is the first IFD 
> starts just after those strings. This is completely valid to have 'ghost' 
> areas like this in a TIFF file, and readers will normally skip over them. So 
> for a COG file with a transparency mask, those strings will be:
> GDAL_STRUCTURAL_METADATA_SIZE=000177 bytes\n
> LAYOUT=IFDS_BEFORE_DATA\n
> STRILE_ORDER=ROW_MAJOR\n
> STRILE_LEADER=SIZE_AS_UINT4\n
> STRILE_TRAILER=LAST_4_BYTES_REPEATED\n
> KNOWN_INCOMPATIBLE_EDITION=NO\n
> MASK_INTERLEAVED_WITH_IMAGERY=YES\n
> 
> For a COG without mask, the last item will not be present of course.
> 
> So it starts with GDAL_STRUCTURAL_METADATA_SIZE=XXXXXX bytes\n where XXXXXX 
> describes the size of this whole section (starting at the beginning of 
> GDAL_STRUCTURAL_METADATA_SIZE).
> 
> - LAYOUT=IFDS_BEFORE_DATA: the IFDs are located at the beginning of the file. 
> GDAL with this PR will also makes sure that the tile index arrays are written 
> just after the IFDs and before the imagery, so that a first range request of 
> 16 KB will always get all the IFDs
> 
> - STRILE_ORDER=ROW_MAJOR: (strile is a contraction of 'strip or tile') the 
> data for tiles is written in increasing tile id order. Future enhancements 
> could possibly implement other layouts, like Z_ORDER or HILBERT_CURVE
> 
> - STRILE_LEADER=SIZE_AS_UINT4: each tile data is preceded by 4 bytes, in a 
> 'ghost' area as well, indicating the real tile size (in little endian order). 
> TileOffset[i] points to the real tile data, that is, just after those 4 bytes. 
> An optimized reader seeing this metadata item will thus look for TileOffset[i] 
> and TileOffset[i+1] to deduce it must fetch the data starting at 
> offset=TileOffset[i] - 4 and of size=TileOffset[i+1]-TileOffset[i]+4. It then 
> checks the 4 first bytes to see if the size in this leader marker is 
> consistent with TileOffset[i+1]-TileOffset[i]. When there is no mask, they 
> should normally be equal (modulo the size taken by STRILE_LEADER and 
> STRILE_TRAILER). In the case where there is a mask and 
> MASK_INTERLEAVED_WITH_IMAGERY=YES, then the tile size indicated in the leader 
> will be < TileOffset[i+1]-TileOffset[i] since the data for the mask will 
> follow the imagery data (see MASK_INTERLEAVED_WITH_IMAGERY=YES)
> 
> - STRILE_TRAILER=LAST_4_BYTES_REPEATED: just after the tile data, the last 4 
> bytes of the tile data are repeated. This is a way if optimized readers to 
> check that TIFF writers not aware of those optimizations have modified the 
> TIFF file in a way that breaks the optimizations. If an optimized reader 
> detects an inconsistency, it then fallback to the regular/slow method if using 
> TileOffset[i] + TileByteCount[i]. I've hesitated about using something like a 
> CRC32, but checking for the last 4 bytes is probably sufficient with 
> compression schemes to detect if STRILE_LEADER is valid.
> 
> - KNOWN_INCOMPATIBLE_EDITION=NO: when a COG is generated this is always 
> written. If GDAL is then used to modify the COG file, as most of the changes 
> done on an existing COG file, will break the optimized structure, GDAL will 
> change this metadata item to KNOWN_INCOMPATIBLE_EDITION=YES, and issue a 
> warning on writing, and when reopening such file, so that users know they have 
> 'broken' their COG file
> 
> - MASK_INTERLEAVED_WITH_IMAGERY=YES: signals that mask data immediately 
> follows imagery data. So when reading data at offset=TileOffset[i] - 4 and 
> size=TileOffset[i+1]-TileOffset[i]+4, you'll get a buffer with:
> 	* leader with imagery tile size (4 bytes)
>   * imagery data (starting at TileOffset[i] and of size TileByteCount[i])
>   * trailer of imagery (4 bytes)
>   * leader with mask tilesize (4 bytes)
>   * mask data (starting at mask.TileOffset[i] and of size 
> mask.TileByteCount[i], but none of them actually need to be read)
>   * trailer of mask data (4 bytes)
> 
> One point I hesitated about was how to write those structural metadata. Other 
> possibilities would have been to include them in the GDAL_METADATA TIFF tag 
> which contains user visible metadata serialized as XML. But I prefered those 
> structural details to remain mostly hidden. There are really low level details 
> not describing the image content. A possibility based on GDAL_METADATA would 
> have been to use a dedicated metadata domain to hold them, but a utility that 
> would for example copy TIFF to TIFF could propagate the content of this tag 
> while not including the needed leader & trailer that would be unknown of it.
> One could also have introduced a new (or several) TIFF tag(s) to describe 
> them, but that would have require to register them and caused warnings to be 
> emitted when reading them with older GDAL versions. The only drawback I can 
> think of about the solution I implemented is that if using only libtiff API 
> those structural metadata cannot be discovered. Let me know if you believe 
> that this could cause issues and what other solution would be preferred.
> 
> One other thought I had is that we could actually potentially save the reading 
> of TileOffset[i] and TileOffset[i+1]. For uncompressed data, this would be 
> trivial since only TileOffset[0] is needed to deduce the location of other 
> tiles when STRILE_ORDER=ROW_MAJOR. But uncompressed data for COG must not be a 
> very common use case. For compressed data, we could imagine to take the 
> maximum compressed size of a tile, which would be written as a new metadata 
> item, and adding padding to smaller tiles to get to that size. So that would 
> require doing a first pass to compute that maximum tile size, and then the 
> real one to write the file, so basically a x2 slowdown on generation. For JPEG 
> compression, one could imagine to avoid most of that initial pass, by exmining 
> just a few random samples in the source raster to compute the mean compressed 
> tile size and its standard deviation, and use that to determine a maximum 
> compressed tile. It could happen that some tiles would still be larger, in 
> which case the writer would need to remove the higher frequencies of the tile 
> data until the compressed data fits in the maximum allowed size. Another 
> drawback is also potential significant lost space in the file if there a lot 
> of variations in the compression rate among tiles. The criticity of this 
> depends on how the file size vs the number of requests is seen as important 
> (depends on cloud storage fees and use patterns).
> And we could also potentially save the reading of the header (IFD description) 
> of the file is the calling code could provide it to the GTiff reader (cases 
> where it would always read the same COG and so could hardcode its header)
> Anyway, those ideas are perhaps unneeded overcomplications and are not part of 
> my current scheduled tasks, but I wanted to share them in case that seems of 
> interest to anyone.
> 
> Even
> 
>> 
>> 4) Optimizations specific to JPEG-compressed imagery (YCbCr color space)
>> with a 1-bit transparency channel, to minimize the number of HTTP range
>> requests needed to read them.
>> As JPEG compression cannot include the transparency information, two TIFF
>> IFD have to be created: one for YCbCr, and another one for alpha. Currently
>> the COPY_SRC_OVERVIEWS=YES creation option of the GeoTIFF driver separates
>> data for all the tiles of the color channels from data for all the tiles of
>> the transparency channel. In practice, readers will generally want to
>> access, for a same location, to data of both color and transparency
>> channels. I will modify the writer to interleave blocks so that color and
>> transparency information are contiguous. If COLOR_X_Y designates the tile
>> with color information at coordinates X,Y (in tile coordinate space), the
>> layout of data in the file will be: COLOR_0_0, TRANSPARENCY_0_0, COLOR_1_0,
>> TRANSPARENCY_1_0, etc. The GeoTIFF driver will be improved to fetch
>> together the color and transparency channel when such a layout is detected.
>> 
>> A further improvement is to be able to avoid completely to read the
>> TileByteCount array of the color channel, and the TileByteCount & TileOffset
>> arrays of the transparency channel. The trick is to reserve 4 bytes before
>> the start of each COLOR_X_Y tile to indicate its size (those bytes will be
>> 'ghost', that is not in the range of data pointed by
>> TileByCount&TileOffset). An optimized reader wanting to read tile
>> i=Y*nb_tiles_in_width+X will start by reading the offsets of tile i and
>> i+1: TileOffset_color[i] and
>> TileOffset_color[i+1]. It will then seek to TileOffset_color[i] – 4 and read
>> 4 + TileOffset_color[i+1] – TileOffset_color[i] bytes in a buffer. The
>> first 4 bytes of this buffer will indicate the number of bytes of the color
>> tile, and thus it is possible to deduce the offset and size of the mask
>> tile that is located at the end of the buffer. A TIFF metadata item will be
>> written to indicate that such layout has been used (with an indication of
>> the file size so as to be able to detect if the file has been later be
>> altered in a non- optimized way), so that optimized readers can adopt the
>> above described behavior. This will require to extend the libtiff interface
>> so that the user can directly provide the input buffer to decompress.
>> As the file will remain fully TIFF/BIGTIFF compliant, non-optimized readers
>> (such as newer GDAL builds against an older external libtiff version, or
>> previous GDAL versions) will still be able read it, loading values from the
>> 4 arrays instead of just one.
>> Note: for other compressions types, a simpler version of the above
>> optimization can still be done, by using TileOffset[i] and TileOffset[i+1],
>> and saving the read of TileByteCount[i]
>> To sum up, with the improvements of this task, once the initial loading of
>> metadata has been done, a GDAL ReadBlock(x,y) request will cause only two
>> networks range requests: one to read TileOffset[i] and TileOffset[i+1]
>> (potentially already cached if neighboring tiles have been previously
>> accessed in the same process), and another one to read the imagery (+mask)
>> data. Whereas currently, 6 might be needed for JPEG YcbCr+mask.
>> 
>> 5) Optimizing the layout of the header of a COG file
>> 
>> The current layout of the header part of COG file is:
>> - TIFF / BigTIFF signature, followed by the offset of the first IFD (Image
>> File Directory)
>> - IFD of full resolution image, that is the list of the tags and their value
>> when it consists of a single numeric value, followed by the offset of the
>> next - IFD. Its size is 2 + number_of_tags * 12 + 4 (or 2 + number_of_tags
>> * 20 + 8) bytes, so typically 200 bytes maximum
>> - Values of TIFF tags that don't fit inline in the IFD directory, such as
>> TileOffsets and TileByteCounts arrays and GeoTIFF keys
>> - IFD of first overview (typically subsampled by a factor of 2)
>> - Values of its tags that don't fit inline
>> - ...
>> -IFD of last overview
>> - Values of its tags that don't fit inline
>> 
>> When the COG file is not too large, the fact of having the TileOffsets and
>> TileByteCounts between IFD descriptors is not an issue since they are not
>> too large, and most TIFF readers will load their values when opening the
>> IFD. But for an optimized reader such as GDAL with internal libtiff support
>> (or with external libtiff after the optimization of task 4), loading the
>> values of the TileOffsets/TileByteCounts arrays is only needed when
>> accessing imagery.
>> 
>> A more efficient layout for network access is :
>> - TIFF / BigTIFF signature, followed by the offset of the first IFD
>> - IFD of full resolution image, followed by the value of its non-inline
>> tags, except  TileOffsets/TileByteCounts
>> - IFD of first overview followed by the value of its non-inline tags, except
>> - TileOffsets/TileByteCounts
>> - IFD of last overview followed by the value of its non-inline tags, except
>> TileOffsets/TileByteCounts
>> - Values of the TileOffsets/TileByteCounts arrays of IFD of full resolution
>> image
>> - Values of the TileOffsets/TileByteCounts arrays of IFD of first overview
>> - ...
>> - Values of the TileOffsets/TileByteCounts arrays of IFD of last overview
>> 
>> With such a structure, the initial reading of 16 KB at the start of the file
>> will be able to load the IFD descriptors of all overviews (and masks, which
>> are actually interleaved in between when present). So, combined together
>> with task 4, a cold read of a tile at any zoom level (ie opening the file +
>> tile request) could result in just 3 network range requests: one to get the
>> IFD descriptors at the start of the file, one to read the location of the
>> tile from the TileOffsets array and one to read the tile data.
>> The proposed structure itself is still fully TIFF compliant. The script that
>> validates the COG structure will be adapted to accept that new variant of
>> the header structure.
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From sshuair at gmail.com  Wed May 29 07:49:54 2019
From: sshuair at gmail.com (Shuai Wang)
Date: Wed, 29 May 2019 22:49:54 +0800
Subject: [gdal-dev] GDAL Virtual File Systems Support for Minio.
Message-ID: <CABSDehjJ6a4co7WKFoWd1mP1HYBAQcFZTz8rbck05zn7tbN3Tg@mail.gmail.com>

I have read a release note.
<https://github.com/OSGeo/gdal/blob/master/gdal/NEWS#L1122>

* /vsis3/: make multipart upload work with Minio


Does this mean GDAL he supports Minio <https://github.com/minio/minio>
Object Storage?

If not, what does it mean? Is there a plan to support Minio?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/ed43ca3e/attachment.html>

From edzer.pebesma at uni-muenster.de  Wed May 29 08:04:03 2019
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 29 May 2019 17:04:03 +0200
Subject: [gdal-dev] "RFC 75: Multidimensional arrays" available for
 preliminary review
In-Reply-To: <1607841.VsNMmxJ7cT@even-i700>
References: <1607841.VsNMmxJ7cT@even-i700>
Message-ID: <14994046-3bb7-0cb9-8135-29d034ea8cac@uni-muenster.de>

Thanks for that, Even, looks good!

I have a couple of questions:

- what would be the advantage to GDAL users using this interface, as
opposed to reading/writing directly using the HDF or NetCDF4 interfaces?
Will it for instance be able to figure out coordinate reference systems,
and identify which dimensions are spatial dimensions?

- will this interface also give access to e.g. irregular dimensions (for
rectlinear grids), bounds of dimensions, or two-dimensional dimension
values like longitude values for each grid cell (for curvilinear grids)?

- will handling of time values follow the netcdf pattern (e.g. integer
values, along with a udunits2 time unit), or be like a double
representing seconds since 1970-01-01, or be something more higher level
like it is in OGR's OFTDateTime?

- will it also be possible to read e.g. spatial raster bands on a lower
than native spatial resolution, like RasterIO() does?

On 5/24/19 5:00 PM, Even Rouault wrote:
> Hi,
> 
> I've prepared a preliminary version of a new RFC to add support for multidimensional arrays
> 
> https://github.com/rouault/gdal/blob/rfc75_text/gdal/doc/source/development/rfc/rfc75_multidimensional_arrays.rst
> 
> If you want to comment it inline, it is also available as a pull request at
> https://github.com/OSGeo/gdal/pull/1580
> 
> This is preliminary content to give an idea of the general directions I have in mind for now.
> Not backed by any implementation yet (should start soon hopefully), so API details will likely change,
> but early feedback is welcome.
> 
> Even
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pEpkey.asc
Type: application/pgp-keys
Size: 2472 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/1159ffd9/attachment-0001.key>

From even.rouault at spatialys.com  Wed May 29 09:04:32 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 May 2019 18:04:32 +0200
Subject: [gdal-dev] "RFC 75: Multidimensional arrays" available for
	preliminary review
In-Reply-To: <14994046-3bb7-0cb9-8135-29d034ea8cac@uni-muenster.de>
References: <1607841.VsNMmxJ7cT@even-i700>
 <14994046-3bb7-0cb9-8135-29d034ea8cac@uni-muenster.de>
Message-ID: <2220573.nZ021Igglo@even-i700>

Hi Edzer,

Thanks for the feedback

> - what would be the advantage to GDAL users using this interface, as
> opposed to reading/writing directly using the HDF or NetCDF4 interfaces?

libnetcdf only handle netCDF datasets (and compatible HDF5 files). libhdf4 
only handles HDF4 files. libhdf5 only handles HDF5 files, etc. So the idea is 
to have an abstract data model, like the 2D raster side, so that users do not 
need to deal with the particular API of each underlying library.

> Will it for instance be able to figure out coordinate reference systems,
> and identify which dimensions are spatial dimensions?

When possible (like with netCDF CF conventions), yes

One feedback I got was that the GDALDimension object should have some metadata 
to indicate the nature of the dimension, when it is known, like X, Y, 
Elevation, Time., that's a goal

> - will this interface also give access to e.g. irregular dimensions (for
> rectlinear grids), bounds of dimensions,

What do you mean exactly by irregular dimensions / bounds of dimensions ? Can 
you link to dataset samples ?

> or two-dimensional dimension
> values like longitude values for each grid cell (for curvilinear grids)?

Yes, the link from the dimension to the variable 
(GDALDimenson::indexing_ariable) should also support two-dimensional 
variables.

> 
> - will handling of time values follow the netcdf pattern (e.g. integer
> values, along with a udunits2 time unit), or be like a double
> representing seconds since 1970-01-01, or be something more higher level
> like it is in OGR's OFTDateTime?

I guess that we will reflect the choice of the data producer / format 
constraints. Not sure if we can / must always convert to Unix epoch (with 
double precision). Perhaps we could have an open option where we would 
normalize to Unix epoch when possible, or otherwise preserve the raw values.

> 
> - will it also be possible to read e.g. spatial raster bands on a lower
> than native spatial resolution, like RasterIO() does?

Yes, that's the purpose of the array_stride argument of 
GDALAbstractMDArray::Read(). If set to something different from NULL or [1, 1, 
1...], subsampling will occur. I don't intend to provide other than nearest 
neighbour resampling at that point.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jason.roberts at duke.edu  Wed May 29 11:37:45 2019
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed, 29 May 2019 18:37:45 +0000
Subject: [gdal-dev] "RFC 75: Multidimensional arrays" available
	for	preliminary review
In-Reply-To: <1607841.VsNMmxJ7cT@even-i700>
References: <1607841.VsNMmxJ7cT@even-i700>
Message-ID: <BN8PR05MB6450A23D462AFAB45D12E805871F0@BN8PR05MB6450.namprd05.prod.outlook.com>

Dear Even,

Thank you for exploring the possibility of making GDAL more multidimensional. In the 10+ years I've lurked on this list I recall this coming up periodically. It's a hard problem; perhaps now will be the time to actually do it!

Over that period, I have worked with a lot of 3D (x,y,z and x,y,time) and 4D (x,y,z,time) datasets from the ocean remote sensing and modeling communities. I'm a marine spatial ecologist; most of my work involves trying to explain or predict distributions of marine species from observations or models of oceanographic variables such as sea surface temperature (SST) or chlorophyll concentration. I want to describe two of the most common scenarios involving multidimensional data in the hope that it can inform your thinking about ways to enhance GDAL's API to be multidimensional. Hopefully you'll find this useful; apologies if not!

Scenario 1: Sampling a 3D or 4D raster dataset with a vector dataset:

In this scenario, we have vector features, usually points, for which we want to obtain values from a 3D or 4D raster dataset. For example, the vector features might be points representing the locations of satellite-tracked animals, of survey vessels, or hauls of fishing gear. The vectors usually have a datetime attribute, and possibly a depth attribute. The raster dataset might be a time series of satellite SST images with dimensions lon, lat, and time, or a time+depth series of water temperature from a 4D ocean model with dimensions lon, lat, depth, and time. We need to match up each point to the closest 2D slice based on time and/or depth, and then index into the image with lon and lat and extract the value of the cell to an attribute of the point. From there we can perform statistical analysis on the sampled values.

Usually the vectors are points, but occasionally we may have lines or polygons over which we'd like to summarize the raster data, e.g. find the mean value of the raster inside each polygon or along a line. This is much more complicated and, in my experience, is much less commonly done than points. Also, just as "bilinear interpolation" might be used to interpolate a value from a point on a 2D raster, we occasionally want to extend this to do "trilinear interpolation" on, say, an x,y,t image, so that the interpolated value is based on the 8 surrounding cells (or 16 surrounding cells with x,y,z,t).

Scenario 2: Summarizing 3D or 4D raster datasets into 2D summary images:

In this scenario, we have a time series of images, either x,y,t or x,y,z,t, that occur at some high temporal frequency, e.g. one image per day, and we want to statistically summarize them at a lower frequency. For example, we might want to take daily SST images and create monthly averages (365 images/year --> 12 images/year) or even monthly climatological averages (365 images/year * n years --> 12 rasters, one for each month averaged across all years).

Implications for GDAL's API:

These scenarios are very high level, and I would not expect GDAL's API to expose methods for performing them. These are geoprocessing operations that should be implemented at some higher layer that itself would make use of GDAL. So the question is: what should GDAL's API provide, if anything, to help facilitate implementation of the scenarios by that higher layer? Here are some things to consider.

1. Aggregating a series of low dimension datasets into a single virtual higher dimension dataset (e.g. 2D to 3D):

In the communities I work with, it is fairly rare for someone to release a single multidimensional file that spans more than one time slice. For example, it is rare for someone to release a single netCDF of SST with dimensions x,y,t with the length of t being 365, representing one year of daily images. Instead they will release 365 netCDFs, each containing a 2D dataset, or perhaps a 3D dataset with a single time slice. As new data are collected, they issue new files.

To use such data for scenarios 1 and 2 (and others), it is very convenient for these series of low dimension datasets to be aggregated into a single virtual high dimension dataset that can then be operated over. netCDF has long had special facilities for this, such as thredds/opendap and NcML <aggregation>. The GDAL API could expose a similar capability that would allow aggregation of arbitrary raster data in this way (rather than just netCDFs).

This capability would be a challenge to implement, no doubt, but it would provide a lot of value to users of the GDAL API. There could be some synergy with the .vrt driver. Particularly valuable would be the ability to point GDAL to a directory tree of datasets and have it aggregate them.

2. Special handling for aggregations of periodic datasets:

Many data providers produce datasets that have a regular periodicity. For example, they might release one image per day from a polar orbiting satellite. For these datasets, when performing calculations on the time dimension, it is convenient to assume that there will always be 365 time slices per year (or 366 on leap years). But, sadly, data providers occasionally experience problems and sometimes do not release time slices. Now, suddenly, there are not 365 images with the year 2017, but only 362 because 3 were not produced. Users regularly get tripped up by this. For example, in the popular HYCOM ocean model, inquiries about this happen on their mailing list every few months, prompting the HYCOM team to prepare a multi-page FAQ just on this issue.

There are also datasets that could described as semi-regular. In the oceanographic community, it is common to have rasters that span 8 days. But these datasets often "start over" on 1 January every year, such that the first dataset spans 1-8 January, the second 9-16 January, etc. The 46th one usually spans days 361-365 (or 366) or maybe includes 2-3 days of the new year, but then the next year starts again at 1 January.  

So, assuming GDAL were capable of performing aggregations, it would be useful to describe to GDAL (or have it otherwise deduce) the periodicity of datasets and then itself generate missing time slices virtually. These slices would just be filled with the "no data" value. 

It would also be useful for the API provide an abstraction for the concept of periodicity, so that a caller can get/set it. I fully recognize this is difficult, in that there are so many ways that datasets can be periodic, and that it might not be possible to invent a scheme for representing them all. But there are many datasets that fall under common schemes (e.g. one image every day, 8-days, month, year, etc.) and this might be a situation in which a simple solution can cover 95% of the datasets out there and provide good value.

A lot of these issues about time have been considered before by others, e.g. by those developing netCDF metadata standards. This raises the question: should GDAL even consider getting involved in this area? Isn't it really tricky? Yes, probably. But if GDAL treats time completely generically, the new API might not provide that much value of what can already be done, e.g. with subdatasets. (But I do recognize that this is a potential minefield.)

3. Lazy evaluation:

If an aggregate dataset is spread across many files, it would be good if GDAL could avoid iterating over all of those files unless absolutely necessary. For example, it would be unfortunate if GDAL could only determine the time or depth coordinate of a file by opening it and reading a netCDF attribute. Consider a 3D dataset of daily SST images composed of 10,000 netCDF files. It would be very slow if GDAL had to open each one in order to return an array of time dimension values. In some cases this might be unavoidable, but GDAL should provide the means to avoid it, if possible, e.g. by telling GDAL how to parse the times from the file names. You are probably well aware of these issues in developing the .vrt driver and similar projects.

I hope this helps. Thanks for your time and consideration.

Jason

> -----Original Message-----
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even
> Rouault
> Sent: Friday, May 24, 2019 11:01 AM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] "RFC 75: Multidimensional arrays" available for
> preliminary review
> 
> Hi,
> 
> I've prepared a preliminary version of a new RFC to add support for
> multidimensional arrays
> 
> https://urldefense.proofpoint.com/v2/url?u=https-
> 3A__github.com_rouault_gdal_blob_rfc75-
> 5Ftext_gdal_doc_source_development_rfc_rfc75-5Fmultidimensional-
> 5Farrays.rst&d=DwIGaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=cJfJ
> 4ejc1xbg_qb47Pg1OoRq1GfFGvWbDD2PT7-
> fBKk&m=z4DIC0ByQfvEPOoQULwLWJUCYSJ_rD9wnK56bSk-088&s=QoB-
> _CuLOE_hxDlvaGk9pf_1E6LVycCraOPSTwANhCk&e=
> 
> If you want to comment it inline, it is also available as a pull request
> at https://urldefense.proofpoint.com/v2/url?u=https-
> 3A__github.com_OSGeo_gdal_pull_1580&d=DwIGaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1
> i6YHLR0Sj_gZ4adc&r=cJfJ4ejc1xbg_qb47Pg1OoRq1GfFGvWbDD2PT7-
> fBKk&m=z4DIC0ByQfvEPOoQULwLWJUCYSJ_rD9wnK56bSk-
> 088&s=5ZZMNYskn0v4Jzk4QvfTKYSArMmQZEZTTiH3uxtCVAI&e=
> 
> This is preliminary content to give an idea of the general directions I
> have in mind for now.
> Not backed by any implementation yet (should start soon hopefully), so API
> details will likely change, but early feedback is welcome.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services
> https://urldefense.proofpoint.com/v2/url?u=http-
> 3A__www.spatialys.com&d=DwIGaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4a
> dc&r=cJfJ4ejc1xbg_qb47Pg1OoRq1GfFGvWbDD2PT7-
> fBKk&m=z4DIC0ByQfvEPOoQULwLWJUCYSJ_rD9wnK56bSk-088&s=vEHFxJLIKrMqTFFYqD_x-
> oa1BtTCt8ppUhHU1HakMoA&e=
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://urldefense.proofpoint.com/v2/url?u=https-
> 3A__lists.osgeo.org_mailman_listinfo_gdal-
> 2Ddev&d=DwIGaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=cJfJ4ejc1xb
> g_qb47Pg1OoRq1GfFGvWbDD2PT7-
> fBKk&m=z4DIC0ByQfvEPOoQULwLWJUCYSJ_rD9wnK56bSk-
> 088&s=tUoKHatLSi1xtfDf1EYAGTrYwf99aV9Ky_Sa95QU54w&e=

From even.rouault at spatialys.com  Wed May 29 12:37:02 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 May 2019 21:37:02 +0200
Subject: [gdal-dev] "RFC 75: Multidimensional arrays" available for
	preliminary review
In-Reply-To: <BN8PR05MB6450A23D462AFAB45D12E805871F0@BN8PR05MB6450.namprd05.prod.outlook.com>
References: <1607841.VsNMmxJ7cT@even-i700>
 <BN8PR05MB6450A23D462AFAB45D12E805871F0@BN8PR05MB6450.namprd05.prod.outlook.com>
Message-ID: <1559164500.V8bUFW08n5@even-i700>

Jason,

thanks for describing those use cases. For this first round of implementation, 
I just want to get basic API and functionnality working, mostly centered 
around I/O access. It is certain that later adjustments and enhancements will 
be needed. Advanced considerations regarding time management would need to be 
built on top of that.

To answer a few specific points:
 
> To use such data for scenarios 1 and 2 (and others), it is very convenient
> for these series of low dimension datasets to be aggregated into a single
> virtual high dimension dataset that can then be operated over. netCDF has
> long had special facilities for this, such as thredds/opendap and NcML
> <aggregation>. The GDAL API could expose a similar capability that would
> allow aggregation of arbitrary raster data in this way (rather than just
> netCDFs).
 
> This capability would be a challenge to implement, no doubt, but it would
> provide a lot of value to users of the GDAL API. There could be some
> synergy with the .vrt driver. Particularly valuable would be the ability to
> point GDAL to a directory tree of datasets and have it aggregate them.

Yes I'm thinking about extending VRT to allow this. Not sure gdalbuildvrt will 
be updated for that first round, so manual construction might be needed

 
> 2. Special handling for aggregations of periodic datasets:
> 
> Many data providers produce datasets that have a regular periodicity. For
> example, they might release one image per day from a polar orbiting
> satellite. For these datasets, when performing calculations on the time
> dimension, it is convenient to assume that there will always be 365 time
> slices per year (or 366 on leap years). But, sadly, data providers
> occasionally experience problems and sometimes do not release time slices.
> Now, suddenly, there are not 365 images with the year 2017, but only 362
> because 3 were not produced. Users regularly get tripped up by this. For
> example, in the popular HYCOM ocean model, inquiries about this happen on
> their mailing list every few months, prompting the HYCOM team to prepare a
> multi-page FAQ just on this issue.
 
> There are also datasets that could described as semi-regular. In the
> oceanographic community, it is common to have rasters that span 8 days. But
> these datasets often "start over" on 1 January every year, such that the
> first dataset spans 1-8 January, the second 9-16 January, etc. The 46th one
> usually spans days 361-365 (or 366) or maybe includes 2-3 days of the new
> year, but then the next year starts again at 1 January.  
 
> So, assuming GDAL were capable of performing aggregations, it would be
> useful to describe to GDAL (or have it otherwise deduce) the periodicity of
> datasets and then itself generate missing time slices virtually. These
> slices would just be filled with the "no data" value. 

Could be done throught VRT as well I think.

> If an aggregate dataset is spread across many files, it would be good if
> GDAL could avoid iterating over all of those files unless absolutely
> necessary. For example, it would be unfortunate if GDAL could only
> determine the time or depth coordinate of a file by opening it and reading
> a netCDF attribute. Consider a 3D dataset of daily SST images composed of
> 10,000 netCDF files. It would be very slow if GDAL had to open each one in
> order to return an array of time dimension values. In some cases this might
> be unavoidable, but GDAL should provide the means to avoid it, if possible,
> e.g. by telling GDAL how to parse the times from the file names. You are
> probably well aware of these issues in developing the .vrt driver and
> similar projects.

The <DstRect> element of VRT, generalized for multidimensional arrays, should 
contain the information needed to open only the relevant sources intersecting 
the cube of the Read() request processed.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Wed May 29 17:38:02 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 29 May 2019 20:38:02 -0400
Subject: [gdal-dev] EPSG code with vertical datum
Message-ID: <CACJ51z3vNtqgkkC9KBXGX197KWAM+aip_HKdk5SgfXe9RyfJzg@mail.gmail.com>

In earlier GDAL versions I could call

SetFromUserInput("EPSG:4326+4326");

without error.  I now get the following error:

(Error) GDAL failure (1) SetCompoundCS() fails, vertical component is not
VERT_CS.

Was this a failure to detect a problem in older GDAL versions or is this a
regression in version 3.0?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190529/900c9199/attachment.html>

From even.rouault at spatialys.com  Thu May 30 02:06:24 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 May 2019 11:06:24 +0200
Subject: [gdal-dev] EPSG code with vertical datum
In-Reply-To: <CACJ51z3vNtqgkkC9KBXGX197KWAM+aip_HKdk5SgfXe9RyfJzg@mail.gmail.com>
References: <CACJ51z3vNtqgkkC9KBXGX197KWAM+aip_HKdk5SgfXe9RyfJzg@mail.gmail.com>
Message-ID: <1985032.dzLfuo1TGB@even-i700>

On mercredi 29 mai 2019 20:38:02 CEST Andrew Bell wrote:
> In earlier GDAL versions I could call
> 
> SetFromUserInput("EPSG:4326+4326");
> 
> without error.  I now get the following error:
> 
> (Error) GDAL failure (1) SetCompoundCS() fails, vertical component is not
> VERT_CS.
> 
> Was this a failure to detect a problem in older GDAL versions

Yes. EPSG:4326+4326 doesn't make any sense from a geodesic point of view. If 
you need WGS84 as a Geographic 3D CRS, you need to use EPSG:4979

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu May 30 02:19:07 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 May 2019 11:19:07 +0200
Subject: [gdal-dev] Upcoming Cloud Optimized Geotiff (COG) related
	enhancements
In-Reply-To: <CADPhZXzmsYchxmNj3E8HcyQe22mQUEtCY9rDc=vmOPadXzm17Q@mail.gmail.com>
References: <42081947.AsHn9XMMPI@even-i700> <5574227.TDbNqEBEyc@even-i700>
 <CADPhZXzmsYchxmNj3E8HcyQe22mQUEtCY9rDc=vmOPadXzm17Q@mail.gmail.com>
Message-ID: <5513397.uV7dgvTO6C@even-i700>

> 
> I find "STRILE" slightly jarring when reading the spec because it is a
> non-word with no obvious meaning. It's also distractingly close to
> "sterile". What would you think about "BLOCK" or "CHUNK"?

Ah, that's lingo used in libtiff, but BLOCK sounds good. Will change to that.

> Older versions of GDAL will remove the COG layout optimizations without any
> warning, no?

Yes (if you edit the file, not on read-only situations of course).
The updated validate_cloud_optimize_geotiff.py script checks if the advertized 
optimizations in the ghost header are valid.

> And will they also copy the ghost region of the file?

Not sure which copy operation you exactly meant, but if you do:

gdal_translate_of_gdal_2.4 cog_of_gdal_3.1.tif cog_of_gdal_2.4.tif
       -co COPY_SRC_OVERVIEWS=YES

the specific layout of GDAL 3.1 and the ghost regions will be lost.

> Is that
> why the existence or absence of the new metadata can't by itself indicate
> that a file is a valid COG?

Well, the definition of what is a valid COG is a bit fuzzy, and evolves over 
time. There are more or less optimized COGs.
The presence of the new metadata by itself doesn't mean that the file is fully 
optimized since non-COG aware TIFF editors could make changes, valid from a 
TIFF point of view, that would break the optimizations. For example if you 
edit a tile in a compressed COG, and that the new compressed size is larger 
than the previous one, TIFF writers will write the new compressed data at the 
end of the file, which will break the STRILE_ORDER=ROW_MAJOR optimization. 
GDAL 3.1 as a TIFF writer will know that it will break the optimization and 
then set KNOWN_INCOMPATIBLE_EDITION=YES. Other writers won't touch that ghost 
area at all.
Or even if the rewritten tile is smaller than the previous version and you can 
rewrite at the same location, a non COG aware writer will not update the 
leader and trailer bytes, which for imagery+mask breaks the optimized reading.
That's why I've added those leader and trailer bytes: with them, GDAL 3.1 can 
double check if the advertized optimizations are really valid.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Thu May 30 07:17:35 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 30 May 2019 10:17:35 -0400
Subject: [gdal-dev] EPSG code with vertical datum
In-Reply-To: <1985032.dzLfuo1TGB@even-i700>
References: <CACJ51z3vNtqgkkC9KBXGX197KWAM+aip_HKdk5SgfXe9RyfJzg@mail.gmail.com>
 <1985032.dzLfuo1TGB@even-i700>
Message-ID: <CACJ51z1d5kjpEwu4HGbGKVb6AUmJjRsAAky4zKCfFqQMwqok2g@mail.gmail.com>

On Thu, May 30, 2019 at 5:06 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 29 mai 2019 20:38:02 CEST Andrew Bell wrote:
> > In earlier GDAL versions I could call
> >
> > SetFromUserInput("EPSG:4326+4326");
> >
> > without error.  I now get the following error:
> >
> > (Error) GDAL failure (1) SetCompoundCS() fails, vertical component is not
> > VERT_CS.
> >
> > Was this a failure to detect a problem in older GDAL versions
>
> Yes. EPSG:4326+4326 doesn't make any sense from a geodesic point of view.
> If
> you need WGS84 as a Geographic 3D CRS, you need to use EPSG:4979
>

So is the syntax "EPSG:<horizontal crs>+<vertical datum>" supported?  I've
tried, for example, "EPSG:4326+5103" and also gotten a failure.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190530/6c8b5db0/attachment.html>

From even.rouault at spatialys.com  Thu May 30 07:27:41 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 May 2019 16:27:41 +0200
Subject: [gdal-dev] EPSG code with vertical datum
In-Reply-To: <CACJ51z1d5kjpEwu4HGbGKVb6AUmJjRsAAky4zKCfFqQMwqok2g@mail.gmail.com>
References: <CACJ51z3vNtqgkkC9KBXGX197KWAM+aip_HKdk5SgfXe9RyfJzg@mail.gmail.com>
 <1985032.dzLfuo1TGB@even-i700>
 <CACJ51z1d5kjpEwu4HGbGKVb6AUmJjRsAAky4zKCfFqQMwqok2g@mail.gmail.com>
Message-ID: <1643394.0CM3E2KXQG@even-i700>

On jeudi 30 mai 2019 10:17:35 CEST Andrew Bell wrote:
> On Thu, May 30, 2019 at 5:06 AM Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > On mercredi 29 mai 2019 20:38:02 CEST Andrew Bell wrote:
> > > In earlier GDAL versions I could call
> > > 
> > > SetFromUserInput("EPSG:4326+4326");
> > > 
> > > without error.  I now get the following error:
> > > 
> > > (Error) GDAL failure (1) SetCompoundCS() fails, vertical component is
> > > not
> > > VERT_CS.
> > > 
> > > Was this a failure to detect a problem in older GDAL versions
> > 
> > Yes. EPSG:4326+4326 doesn't make any sense from a geodesic point of view.
> > If
> > you need WGS84 as a Geographic 3D CRS, you need to use EPSG:4979
> 
> So is the syntax "EPSG:<horizontal crs>+<vertical datum>" supported?  

Yes

> I've
> tried, for example, "EPSG:4326+5103" and also gotten a failure.

Doesn't work either in GDAL 2.4. EPSG:5103 doesn't exist. Perhaps you meant 
EPSG:5703 / NAVD88 height.

Then it works:

$ gdalsrsinfo EPSG:4326+5703

PROJ.4 : +proj=longlat +datum=WGS84 +vunits=m +no_defs

OGC WKT2:2018 :
COMPOUNDCRS["WGS 84 + NAVD88 height",
    GEOGCRS["WGS 84",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        CS[ellipsoidal,2],
            AXIS["geodetic latitude (Lat)",north,
                ORDER[1],
                ANGLEUNIT["degree",0.0174532925199433]],
            AXIS["geodetic longitude (Lon)",east,
                ORDER[2],
                ANGLEUNIT["degree",0.0174532925199433]],
        USAGE[
            SCOPE["unknown"],
            AREA["World"],
            BBOX[-90,-180,90,180]],
        ID["EPSG",4326]],
    VERTCRS["NAVD88 height",
        VDATUM["North American Vertical Datum 1988"],
        CS[vertical,1],
            AXIS["gravity-related height (H)",up,
                LENGTHUNIT["metre",1]],
        USAGE[
            SCOPE["unknown"],
            AREA["North America - Mexico and USA - onshore"],
            BBOX[14.51,172.42,71.4,-66.91]],
        ID["EPSG",5703]]]


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu May 30 07:34:13 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 May 2019 16:34:13 +0200
Subject: [gdal-dev] EPSG code with vertical datum
In-Reply-To: <1643394.0CM3E2KXQG@even-i700>
References: <CACJ51z3vNtqgkkC9KBXGX197KWAM+aip_HKdk5SgfXe9RyfJzg@mail.gmail.com>
 <CACJ51z1d5kjpEwu4HGbGKVb6AUmJjRsAAky4zKCfFqQMwqok2g@mail.gmail.com>
 <1643394.0CM3E2KXQG@even-i700>
Message-ID: <36264918.zC2Wt4SK1T@even-i700>

On jeudi 30 mai 2019 16:27:41 CEST Even Rouault wrote:
> On jeudi 30 mai 2019 10:17:35 CEST Andrew Bell wrote:
> > On Thu, May 30, 2019 at 5:06 AM Even Rouault <even.rouault at spatialys.com>
> > 
> > wrote:
> > > On mercredi 29 mai 2019 20:38:02 CEST Andrew Bell wrote:
> > > > In earlier GDAL versions I could call
> > > > 
> > > > SetFromUserInput("EPSG:4326+4326");
> > > > 
> > > > without error.  I now get the following error:
> > > > 
> > > > (Error) GDAL failure (1) SetCompoundCS() fails, vertical component is
> > > > not
> > > > VERT_CS.
> > > > 
> > > > Was this a failure to detect a problem in older GDAL versions
> > > 
> > > Yes. EPSG:4326+4326 doesn't make any sense from a geodesic point of
> > > view.
> > > If
> > > you need WGS84 as a Geographic 3D CRS, you need to use EPSG:4979
> > 
> > So is the syntax "EPSG:<horizontal crs>+<vertical datum>" supported?
> 
> Yes
> 
> > I've
> > tried, for example, "EPSG:4326+5103" and also gotten a failure.
> 
> Doesn't work either in GDAL 2.4. EPSG:5103 doesn't exist.

More exacly, EPSG:5103 is not a vertical CRS, but a vertical datum.
EPSG:XXXX+YYYY requires XXXX to be a horizontal geographic/projected CRS and 
YYYY to be a vertical CRS (not a vertical datum)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cdelancy at blackfangtechnologies.com  Thu May 30 08:15:33 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Thu, 30 May 2019 08:15:33 -0700 (MST)
Subject: [gdal-dev] I can't get GDAL 2.4 to link with PROJ 5.2 (Windows)
Message-ID: <1559229333861-0.post@n6.nabble.com>

I can't seem to get GDAL to statically link to PROJ when building.

In the nmake.opt file I changed PROJ_INCLUDE to point to my local copy of
the proj source and PROJ_LIBRARY to the exact path of the static lib I built
from Proj source, while uncommenting both lines.

Still, when I try to use ogr coordinate transformations, I recieve error 6
with the message that Proj4 wasn't found. 

Has anyone here had success building gdal on windows with proj statically
linked?
Do you have any advice for me on things to try?
Can you post the NMake command you used?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jluis at ualg.pt  Thu May 30 08:24:18 2019
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Thu, 30 May 2019 15:24:18 +0000
Subject: [gdal-dev] I can't get GDAL 2.4 to link with PROJ 5.2 (Windows)
In-Reply-To: <1559229333861-0.post@n6.nabble.com>
References: <1559229333861-0.post@n6.nabble.com>
Message-ID: <DB8PR04MB65071A12B5F385BC15F61AF9A6180@DB8PR04MB6507.eurprd04.prod.outlook.com>

Craig,

Notice that the recipe I gave you to build sqlite3 builds a dynamic lib, not a static one. Might that be the cause?

Joaquim

|>-----Original Message-----
|>From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of CDelancy
|>Sent: Thursday, May 30, 2019 4:16 PM
|>To: gdal-dev at lists.osgeo.org
|>Subject: [gdal-dev] I can't get GDAL 2.4 to link with PROJ 5.2 (Windows)
|>
|>I can't seem to get GDAL to statically link to PROJ when building.
|>
|>In the nmake.opt file I changed PROJ_INCLUDE to point to my local copy of the
|>proj source and PROJ_LIBRARY to the exact path of the static lib I built from
|>Proj source, while uncommenting both lines.
|>
|>Still, when I try to use ogr coordinate transformations, I recieve error 6 with the
|>message that Proj4 wasn't found.
|>
|>Has anyone here had success building gdal on windows with proj statically
|>linked?
|>Do you have any advice for me on things to try?
|>Can you post the NMake command you used?
|>
|>
|>
|>--
|>Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
|>_______________________________________________
|>gdal-dev mailing list
|>gdal-dev at lists.osgeo.org
|>https://lists.osgeo.org/mailman/listinfo/gdal-dev

From cdelancy at blackfangtechnologies.com  Thu May 30 08:49:25 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Thu, 30 May 2019 08:49:25 -0700 (MST)
Subject: [gdal-dev] I can't get GDAL 2.4 to link with PROJ 5.2 (Windows)
In-Reply-To: <DB8PR04MB65071A12B5F385BC15F61AF9A6180@DB8PR04MB6507.eurprd04.prod.outlook.com>
References: <1559229333861-0.post@n6.nabble.com>
 <DB8PR04MB65071A12B5F385BC15F61AF9A6180@DB8PR04MB6507.eurprd04.prod.outlook.com>
Message-ID: <1559231365483-0.post@n6.nabble.com>

Thank you for your reply. PROJ version 5.2 builds successfully and never
pestered me for sqlite, so I don't think that would be the problem.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cchhnhk at gmail.com  Thu May 30 21:59:11 2019
From: cchhnhk at gmail.com (Changhai Chen)
Date: Fri, 31 May 2019 12:59:11 +0800
Subject: [gdal-dev] Coordinate transform from coordinate reference systems
 with different datum error in GDAL3.0.0
Message-ID: <CAOLjhNmbVNu53=1_B2bdtW+6PjujFp7SRLkPkwBox79=OAteJA@mail.gmail.com>

Hello, I would like to ask:
When I use GDAL 2.3.3 with proj4_4.9.3, I can convert the coordinate from
EPSG:4326 to EPSG:4326+5773(egm96_15.gtx) correctly with elevation value.
But when I use GDAL 3.0.0 with proj4_6.1.0, the elevation value of
coordinate unchange (Proj.db and egm file are found). The problem occur
when I convert from WGS84 to Beijing54 too.

Function use:
              OGRCoordinateTransformation -> Transform()
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190531/72b20d2c/attachment.html>

From even.rouault at spatialys.com  Fri May 31 02:09:12 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 31 May 2019 11:09:12 +0200
Subject: [gdal-dev] Coordinate transform from coordinate reference
	systems with different datum error in GDAL3.0.0
In-Reply-To: <CAOLjhNmbVNu53=1_B2bdtW+6PjujFp7SRLkPkwBox79=OAteJA@mail.gmail.com>
References: <CAOLjhNmbVNu53=1_B2bdtW+6PjujFp7SRLkPkwBox79=OAteJA@mail.gmail.com>
Message-ID: <4371598.lurEH4R4QE@even-i700>

On vendredi 31 mai 2019 12:59:11 CEST Changhai Chen wrote:
> Hello, I would like to ask:
> When I use GDAL 2.3.3 with proj4_4.9.3, I can convert the coordinate from
> EPSG:4326 to EPSG:4326+5773(egm96_15.gtx) correctly with elevation value.
> But when I use GDAL 3.0.0 with proj4_6.1.0, the elevation value of
> coordinate unchange (Proj.db and egm file are found). The problem occur
> when I convert from WGS84 to Beijing54 too.

Use EPSG:4979 (WGS84 3D) as source CRS.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cdelancy at blackfangtechnologies.com  Fri May 31 03:41:45 2019
From: cdelancy at blackfangtechnologies.com (CDelancy)
Date: Fri, 31 May 2019 03:41:45 -0700 (MST)
Subject: [gdal-dev] What is the correct way to call OSRSetPROJSearchPaths?
Message-ID: <1559299305078-0.post@n6.nabble.com>

Using GDAL 3 and PROJ 6, it seems this is the function I must call to point
proj to the location of the proj.db file it needs. However, any time I call
this function, it results in an access violation.

Does anyone have an example of how to call this?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri May 31 04:00:49 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 31 May 2019 13:00:49 +0200
Subject: [gdal-dev] What is the correct way to call
	OSRSetPROJSearchPaths?
In-Reply-To: <1559299305078-0.post@n6.nabble.com>
References: <1559299305078-0.post@n6.nabble.com>
Message-ID: <7059487.xYP8lQvbFy@even-i700>

On vendredi 31 mai 2019 03:41:45 CEST CDelancy wrote:
> Using GDAL 3 and PROJ 6, it seems this is the function I must call to point
> proj to the location of the proj.db file it needs. However, any time I call
> this function, it results in an access violation.

Is the array of strings you provide as argument terminated by a NULL pointer ?

> 
> Does anyone have an example of how to call this?

https://github.com/OSGeo/gdal/blob/master/autotest/cpp/
test_osr_set_proj_search_paths.cpp

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jluis at ualg.pt  Fri May 31 16:49:09 2019
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Fri, 31 May 2019 23:49:09 +0000
Subject: [gdal-dev] vsicurl access to a netcdf file does not see the
	coordinates
Message-ID: <DB8PR04MB650719CF6CEAA51CA7660010A6190@DB8PR04MB6507.eurprd04.prod.outlook.com>

Hi,

GDAL master here

When I run gdalinfo on a remote nc file, instead of reporting the coordinates it prints the array size

gdalinfo /vsicurl/http://w3.ualg.pt/~jluis/ftp/tmp/idades_v2012.grd
Driver: HDF5Image/HDF5 Dataset
Files: none associated
Size is 2029, 1168
Metadata:
  Conventions=COARDS
  description=File written from Matlab
  node_offset=0
  Source_Software=Mirone
  title=Grid computed inside Mirone
  _nc3_strict=1
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1168.0)
Upper Right ( 2029.0,    0.0)
Lower Right ( 2029.0, 1168.0)
Center      ( 1014.5,  584.0)
Band 1 Block=1015x584 Type=Float32, ColorInterp=Undefined
  NoData Value=nan
  Metadata:
    z_actual_range=-0.0558451935648918 181.299896240234
    z_long_name=z
    z_units=unknown
    z__FillValue=-nan(ind)


However, if I download the file and run it locally, then the result is correct


gdalinfo idades_v2012.grd
Driver: netCDF/Network Common Data Format
Files: idades_v2012.grd
Size is 2029, 1168
Origin = (-42.658333333333331,48.208333333333336)
Pixel Size = (0.016666666666667,-0.016666666666667)
Metadata:
  latitude#actual_range={28.75,48.2}
  latitude#long_name=latitude
  latitude#units=degrees_north
  longitude#actual_range={-42.65,-8.849999999999994}
  longitude#long_name=longitude
  longitude#units=degrees_east
  NC_GLOBAL#Conventions=COARDS
  NC_GLOBAL#description=File written from Matlab
  NC_GLOBAL#node_offset=0
  NC_GLOBAL#Source_Software=Mirone
  NC_GLOBAL#title=Grid computed inside Mirone
  z#actual_range={-0.05584519356489182,181.2998962402344}
  z#long_name=z
  z#units=unknown
  z#_FillValue=-nan(ind)
Corner Coordinates:
Upper Left  ( -42.6583333,  48.2083333)
Lower Left  ( -42.6583333,  28.7416667)
Upper Right (  -8.8416667,  48.2083333)
Lower Right (  -8.8416667,  28.7416667)
Center      ( -25.7500000,  38.4750000)
Band 1 Block=2029x1 Type=Float32, ColorInterp=Undefined
  NoData Value=nan
  Unit Type: unknown
  Metadata:
    actual_range={-0.05584519356489182,181.2998962402344}
    long_name=z
    NETCDF_VARNAME=z
    units=unknown
    _FillValue=-nan(ind)


Joaquim

