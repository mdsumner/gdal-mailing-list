From ahmettemiz88 at gmail.com  Fri Apr  1 06:37:11 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Apr  1 06:37:14 2011
Subject: [gdal-dev] gdal python binding problem
Message-ID: <AANLkTimkm8bELw9tvpEnMvy3vsQyaiwqKUHCqQ-v7_yK@mail.gmail.com>

Hello

I got this error message in postgis configuration with gdal ( nightly
source code):

GDAL Python bindings with NumPy array support
required by raster2pgsql.py loader.


In gdal side what I did wrong.

What do I have to do in swig/python directory ?

regards


-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From jorge.arevalo at deimos-space.com  Fri Apr  1 06:47:15 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Apr  1 06:47:39 2011
Subject: [gdal-dev] gdal python binding problem
In-Reply-To: <AANLkTimkm8bELw9tvpEnMvy3vsQyaiwqKUHCqQ-v7_yK@mail.gmail.com>
References: <AANLkTimkm8bELw9tvpEnMvy3vsQyaiwqKUHCqQ-v7_yK@mail.gmail.com>
Message-ID: <AANLkTi=WA9TmZbJVvewvbEjeS+AYA4sNh7K=dmnXqLLQ@mail.gmail.com>

Replied here: http://postgis.refractions.net/pipermail/postgis-users/2011-April/029332.html

2011/4/1 ahmet temiz <ahmettemiz88@gmail.com>:
> Hello
>
> I got this error message in postgis configuration with gdal ( nightly
> source code):
>
> GDAL Python bindings with NumPy array support
> required by raster2pgsql.py loader.
>
>
> In gdal side what I did wrong.
>
> What do I have to do in swig/python directory ?
>
> regards
>
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From icephase26 at gmail.com  Fri Apr  1 10:00:12 2011
From: icephase26 at gmail.com (Florian Mueller)
Date: Fri Apr  1 10:00:14 2011
Subject: [gdal-dev] netCDF metadata writing problem
Message-ID: <AANLkTik9UYc9Qk6Rtf5DQRxkXOZ_vL+Xqb0a4MjzyqfE@mail.gmail.com>

Hi all,

I have a GTiff with 2 Bands and want to copy it into a netCDF with 2
subsets using the C-API. Copying it works without any problem, but I
cannot change the names of the subsets in the metadata of the subsets.
I tried it by using GDALSetMetadata(hout2 ,test, "SUBDATASETS"), which
has no effect (return value is 0). With GDALGetMetadata( hout2,
"SUBDATASETS" ) I can read the metadata information without any
problem. Also GDALSetMetadata( hout2 ,test, "" ) allows me to write
into the metadata of the netCDF file, but how can I change (write)
metadata of the subdata sets?

Here are parts of my code:

char **test;

hDriver2 = GDALGetDriverByName ("netCDF");
if ((hout2 = GDALCreateCopy( hDriver2, ofilename, hout, TRUE,NULL,
NULL, NULL )) == NULL)
{
                printf("Cannot create output file <%s>\n",ofilename);
}

test = GDALGetMetadata( hout2, "SUBDATASETS" );                 //
returns the metadata of the subdatasets
sprintf( test[0], "SUBDATASET_1_NAME=TEST" );
GDALSetMetadata( hout2 ,test, "SUBDATASETS" );         // no effect

Any idea how to write metadata to the subdata sets using the netCDF driver?

Best regards,
Florian
From even.rouault at mines-paris.org  Fri Apr  1 13:56:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  1 13:56:45 2011
Subject: [gdal-dev] Re: OGR/Spatialite patches
In-Reply-To: <4D960316.6080305@lqt.it>
References: <4D9307D1.1000403@lqt.it>
	<201103302207.13463.even.rouault@mines-paris.org>
	<4D960316.6080305@lqt.it>
Message-ID: <201104011956.37319.even.rouault@mines-paris.org>

(dropping all individual names from the CC list to avoid gdal-dev bouncing 
back the email. hopefully they are subscribed to gdal-dev, or at least they 
can read the archives)

Just a few more comments :

> 
> If GDAL is released under the X/MIT terms, I agree to release my
> patches too under the same license.
> Yes, I'll be happy to include my own copyright; that's not all,
> a small disclaimer would be required so to acknowledge Tuscany
> Region for financing my job.

No problem to acknowledge anyone support

> 
> very good; so we can imagine the following schema:
> A) no libspatialite support: the datasource is assumed to be
>     a READ-ONLY one.
> B) WRITE mode could be enabled only if libspatialite support is
>     actually available.
> all this sounds very reasonable and absolutely safe.

Yes, but of course, this should only apply to spatialite databases, not 
regular sqlite databases.

> 
> > 4) We must be aware that using the ALTER TABLE ... ADD COLUMN ... stuff
> > will produce databases (even regular SQLite ones) that will not be
> > compatible with the latest FWTools for Windows that uses an ancient
> > sqlite versions. Might not be a big deal however because I somehow
> > remember that dropping a new version of sqlite3.dll in the bin directory
> > make it work again.
> 
> a) compiling sqlite3 is a trivial task on any platform [this
>     including MSVC]
> b) using obsolete versions of sqlite3 never is a safe practice;
>     i.e. according to SQLite own docs:
>     "Version 3.7.5 of SQLite is recommended for all new development.
>     Upgrading from all prior SQLite versions is recommended."
> 
> New versions not only support 'cool' features: very often they
> resolve critical bugs, and offers better performances.
> As a general rule, SQLite releases more than ten new versions for
> each year: so using a very obsolete version (one released several
> years ago) doesn't seems a good thing anyway.
> And for my personal experience, I never noticed any issue
> deriving from upgrading to a subsequent SQLite version.

Yes I understand your point. My point was that there are old software in the 
wild that can by faced to data produced by newer software. But I think it is 
OK to say that at that point reading the new databases require a minimum 
version of sqlite3.

> 
> > 5) Would you be willing to update/extend the autotest/ogr/ogr_sqlite.py
> > test to ensure that it still passes and add some tests for all the new
> > stuff, particularly the 3D geometry support.
> 
> yes, of course: any hint from you about this topic is welcome.

If you have specific questions, I can help. The best is to look at the existing 
code and imitate. If you have some Python experience, that should be easy. 
Otherwise it should be also manageable : I had never read any book or course 
about Python and was still able to extend the GDAL autotest suite ;-)

> 
> > 8) I've seen you have removed the tests to detect int overflows, for
> > example "if( nPointCount<  0 || nPointCount>  INT_MAX / (2 * 8))" has
> > become "if( nPointCount<  0)". Could you justify it ? I still think that
> > they are necessary to avoid issues in lines below if the nPointCount
> > value is huge enough.
> 
> I suspected that "nPointCount > INT_MAX / (2 * 8))" was intended
> to be an anti-overflow check. Anyway, all this is quite meaningless.
> The above check completely relies upon the assumption that INT
> correctly represents a memory address; but that's not always true.
> On 64 bit platforms addresses are obviously 64 bit (much more
> extended than a 32 bit INT).
> And on 32 bit platforms addresses actually are UINT, not INT.
> That's not all: AFAIK there is no platform supporting memory
> allocations as wide as the word length theoretically can allow:
> e.g. on Win32 there is absolutely no way to perform a successful
> malloc() when the required size exceeds 1.5GB; but very often
> a malloc() will actually fail even when the required size
> exceeds 500MB.
> Accordingly to all this, I've removed the above checks simply
> because I strongly doubted of their actual correctness: in
> other worlds, "nPointCount > 10000000" seems to be an alternative
> heuristic anti-overflow criterion not more arbitrary than the
> other one.

The memory allocation has already been done from the total buffer size when we 
reach that code. The only stuff to worry about is in fact that the if (nBytes - 
8 < 2 * 8 * nPointCount )  doesn't manage to catch an invalid value of 
nPointCount. If nPointCount is too big, 2 * 8 * nPointCoint will be a negative 
value and the code execution will go on, leading to reading outside of the 
pabyData buffer at some point in the loop. I didn't want to impose an arbitrary 
value for the maximum number of points (if someone creates a record large 
enough to contain 100 million points and the memory allocation success, 
there's no reason to prevent it from reading it). So I decided to stick to the 
signed 32bit limit, even if on 64bit platforms it could be considered as an 
arbitrary threshold... Well, could we decide that you keep the existing tests 
in the existing code and do whatever you feel appropriate in your new code ?

> 
> > 9) About your [3c] patch. Yes indeed this is a painfull issue with
> > shapefiles (the format I mean, not the driver) where we cannot know in
> > advance if it only contains LINESTRING or MULTILINESTRING. Currently the
> > shapefile driver chooses to report the layer as having LINESTRING
> > geometry type. Maybe Frank can comment about this. I imagine this was
> > decided because some application software wouldn't know to deal with
> > multi-geometry.
> 
> this one is a really annoying Shapefile own idiosyncrasy:
> my personal approach (used on spatialite own tools) is reading
> first *any* geometry contained into the Shapefile, so to
> correctly detect if all them are 'single' (LINESTRING, POLYGON)
> or 'multi' (MULTILINESTRING, MULTIPOLYGON).
> obviously, when a mix of both 'single' and 'multi' is found
> then casting 'singles' to 'multi' is absolutely required.
> please note: performing a two-pass read on the shapefile doesn't
> adversely affect performance as you can expect.
> this is because a 'warm cache' effect will arise: so the second
> pass will easily retrieve any data directly from RAM buffers
> avoiding at all any physical access to the HDD.
> anyway I haven't the slightest idea about how much difficult
> supporting such a 'two steps' strategy could be for OGR.

Technically this would be doable, but there are use cases where you will want 
to read only 1 feature in a shapefile of 10 million features... So imposing the 
cost of reading the whole shapefile to determine the overall layer geometry 
type doesn't sound appropriate...

Ah, and I also forgot a topic. Perhaps the sqlite driver HTML page will need 
some updates to reflect the fact that editing spatialite DBs will now require 
linking to libspatialite. That could also be a good place to credit your 
financial supporters if you want or need to do so (see 
http://gdal.org/frmt_usgsdem.html or http://gdal.org/ogr/drv_oci.html)
From even.rouault at mines-paris.org  Fri Apr  1 14:01:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  1 14:01:11 2011
Subject: [gdal-dev] netCDF metadata writing problem
In-Reply-To: <AANLkTik9UYc9Qk6Rtf5DQRxkXOZ_vL+Xqb0a4MjzyqfE@mail.gmail.com>
References: <AANLkTik9UYc9Qk6Rtf5DQRxkXOZ_vL+Xqb0a4MjzyqfE@mail.gmail.com>
Message-ID: <201104012001.04315.even.rouault@mines-paris.org>

Le vendredi 01 avril 2011 16:00:12, Florian Mueller a ?crit :
> Hi all,
> 
> I have a GTiff with 2 Bands and want to copy it into a netCDF with 2
> subsets using the C-API. Copying it works without any problem, but I
> cannot change the names of the subsets in the metadata of the subsets.
> I tried it by using GDALSetMetadata(hout2 ,test, "SUBDATASETS"), which
> has no effect (return value is 0). With GDALGetMetadata( hout2,
> "SUBDATASETS" ) I can read the metadata information without any
> problem. Also GDALSetMetadata( hout2 ,test, "" ) allows me to write
> into the metadata of the netCDF file, but how can I change (write)
> metadata of the subdata sets?
> 
> Here are parts of my code:
> 
> char **test;
> 
> hDriver2 = GDALGetDriverByName ("netCDF");
> if ((hout2 = GDALCreateCopy( hDriver2, ofilename, hout, TRUE,NULL,
> NULL, NULL )) == NULL)
> {
>                 printf("Cannot create output file <%s>\n",ofilename);
> }
> 
> test = GDALGetMetadata( hout2, "SUBDATASETS" );                 //
> returns the metadata of the subdatasets
> sprintf( test[0], "SUBDATASET_1_NAME=TEST" );
> GDALSetMetadata( hout2 ,test, "SUBDATASETS" );         // no effect
> 
> Any idea how to write metadata to the subdata sets using the netCDF driver?

You can't. SUBDATASETS are a trick used in a few drivers to report strings 
that can be used to open a "real" subdataset. The driver forgets the 
SUBDATASET name and description from the avalailble characteristics, and to my 
knowledge, no GDAL driver supports altering the names choosen by the driver.

What you can do if you want to handle a "true" filesystem name is to translate 
the subdataset in a VRT for example.

gdal_translate -of VRT NECDF:"foo.nc":bar test.vrt

> 
> Best regards,
> Florian
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From massimodisasha at gmail.com  Fri Apr  1 14:47:30 2011
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Fri Apr  1 14:53:06 2011
Subject: [gdal-dev] gdal-grass plugin build failed
Message-ID: <1301683650.5502.4.camel@stereo1>

hi All

tring to rebuild the gdal-grass plugin on my linux (debian sid) 
but i'm having this error 

epifanio@epybox:/etc/ld.so.conf.d$ cat grass.conf 
#/usr/local/grass-7.0.svn/lib
/usr/local/grass-6.5.svn/lib

epifanio@epybox: export LD_LIBRARY_PATH=/usr/local/grass-6.5.svn/lib
epifanio@epybox:/etc/ld.so.conf.d$ sudo ldconfig

epifanio@epybox:/usr/local/src/gis/gdal/frmts/grass/gdal-grass-1.9.0
$ ./configure --with-gdal=/usr/local/bin/gdal-config
--with-grass=/usr/local/grass-6.5.svn
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
user supplied gdal-config (/usr/local/bin/gdal-config)
using /usr/local/lib/gdalplugins as GDAL shared library autoload
directory
checking for G_asprintf in -lgrass_gis... no
checking for G_putenv in -lgrass_gis.7.0.svn... no
configure: error: --with-grass=/usr/local/grass-6.5.svn requested, but
libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
include /usr/local/grass-6.5.svn/lib?

have you any clue ? the error happens if i try to build the gdal-grass
plugin using grass 6.5 ... instead using the 7.0 it build fine.


the config.log file contents : http://paste.debian.net/112667/ 
it can't find lib .. but they exists


thanks for any hints!

Massimo.



From massimodisasha at gmail.com  Fri Apr  1 14:52:54 2011
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Fri Apr  1 14:53:09 2011
Subject: [gdal-dev] gdal-grass plugin build failed
Message-ID: <1301683974.5659.0.camel@stereo1>

hi All

tring to rebuild the gdal-grass plugin on my linux (debian sid) 
but i'm having this error 

epifanio@epybox:/etc/ld.so.conf.d$ cat grass.conf 
#/usr/local/grass-7.0.svn/lib
/usr/local/grass-6.5.svn/lib

epifanio@epybox: export LD_LIBRARY_PATH=/usr/local/grass-6.5.svn/lib
epifanio@epybox:/etc/ld.so.conf.d$ sudo ldconfig

epifanio@epybox:/usr/local/src/gis/gdal/frmts/grass/gdal-grass-1.9.0
$ ./configure --with-gdal=/usr/local/bin/gdal-config
--with-grass=/usr/local/grass-6.5.svn
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
user supplied gdal-config (/usr/local/bin/gdal-config)
using /usr/local/lib/gdalplugins as GDAL shared library autoload
directory
checking for G_asprintf in -lgrass_gis... no
checking for G_putenv in -lgrass_gis.7.0.svn... no
configure: error: --with-grass=/usr/local/grass-6.5.svn requested, but
libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
include /usr/local/grass-6.5.svn/lib?

have you any clue ? the error happens if i try to build the gdal-grass
plugin using grass 6.5 ... instead using the 7.0 it build fine.


the config.log file contents : http://paste.debian.net/112667/ 
it can't find lib .. but they exists


thanks for any hints!

Massimo.




From haileyeckstrand at gmail.com  Fri Apr  1 17:06:02 2011
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Fri Apr  1 17:06:05 2011
Subject: [gdal-dev] SpatialPoints to SpatialGridDataFrame problems
In-Reply-To: <AANLkTi==wKZry6bXTwn4th_1n5u4M=MXGhYe+1Yr7Yku@mail.gmail.com>
References: <AANLkTi==wKZry6bXTwn4th_1n5u4M=MXGhYe+1Yr7Yku@mail.gmail.com>
Message-ID: <AANLkTi=O7J-0RXwEFEwDHeLHRGL6_=wsQxYfdMRNsmZJ@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: spatial_coords.dbf
Type: application/octet-stream
Size: 1812 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/181aa758/spatial_coords-0004.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: spatial_coords.prj
Type: application/octet-stream
Size: 413 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/181aa758/spatial_coords-0005.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: spatial_coords.shp
Type: application/octet-stream
Size: 1080 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/181aa758/spatial_coords-0006.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: spatial_coords.shx
Type: application/octet-stream
Size: 379 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/181aa758/spatial_coords-0007.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: points_to_sgdf.JPG
Type: image/jpeg
Size: 12893 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/181aa758/points_to_sgdf-0001.jpe
From haileyeckstrand at gmail.com  Fri Apr  1 17:14:38 2011
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Fri Apr  1 17:14:41 2011
Subject: [gdal-dev] SpatialPoints to SpatialGridDataFrame problems
In-Reply-To: <AANLkTi==wKZry6bXTwn4th_1n5u4M=MXGhYe+1Yr7Yku@mail.gmail.com>
References: <AANLkTi==wKZry6bXTwn4th_1n5u4M=MXGhYe+1Yr7Yku@mail.gmail.com>
Message-ID: <AANLkTi=xFt0_JqZ8YNtrD4F7FWxHmsUS3H8sMKykY9Pu@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: points_to_sgdf.JPG
Type: image/jpeg
Size: 24360 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/238f9b75/points_to_sgdf-0001.jpe
From even.rouault at mines-paris.org  Fri Apr  1 17:23:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  1 17:23:55 2011
Subject: [gdal-dev] SpatialPoints to SpatialGridDataFrame problems
In-Reply-To: <AANLkTi=xFt0_JqZ8YNtrD4F7FWxHmsUS3H8sMKykY9Pu@mail.gmail.com>
References: <AANLkTi==wKZry6bXTwn4th_1n5u4M=MXGhYe+1Yr7Yku@mail.gmail.com>
	<AANLkTi=xFt0_JqZ8YNtrD4F7FWxHmsUS3H8sMKykY9Pu@mail.gmail.com>
Message-ID: <201104012323.47965.even.rouault@mines-paris.org>

Le vendredi 01 avril 2011 23:14:38, Hailey Eckstrand a ?crit :
> Hello All,
> My first email came through all messed up, so I am trying to post this
> again..
> I am trying to convert some points to a SpatialGridDataFrame and am running
> into difficulties.
> When I convert the SpatialPointsDataFrame into a gridded object, it gives
> many warning messages

Hum, not sure if gdal-dev can help you on this. My 10 seconds of googling 
shows that SpatialGridDataFrame seems to be a R stuff. So perhaps posting on 
some R mailing list might be more appropriate.

From haileyeckstrand at gmail.com  Fri Apr  1 17:37:15 2011
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Fri Apr  1 17:37:17 2011
Subject: [gdal-dev] SpatialPoints to SpatialGridDataFrame problems
In-Reply-To: <201104012323.47965.even.rouault@mines-paris.org>
References: <AANLkTi==wKZry6bXTwn4th_1n5u4M=MXGhYe+1Yr7Yku@mail.gmail.com>
	<AANLkTi=xFt0_JqZ8YNtrD4F7FWxHmsUS3H8sMKykY9Pu@mail.gmail.com>
	<201104012323.47965.even.rouault@mines-paris.org>
Message-ID: <AANLkTineoSPkLNCedR8osWNW2GCe=K2i3984h285-W4Z@mail.gmail.com>

Wrong mailing list. My apologies.

On Fri, Apr 1, 2011 at 2:23 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le vendredi 01 avril 2011 23:14:38, Hailey Eckstrand a ?crit :
> > Hello All,
> > My first email came through all messed up, so I am trying to post this
> > again..
> > I am trying to convert some points to a SpatialGridDataFrame and am
> running
> > into difficulties.
> > When I convert the SpatialPointsDataFrame into a gridded object, it gives
> > many warning messages
>
> Hum, not sure if gdal-dev can help you on this. My 10 seconds of googling
> shows that SpatialGridDataFrame seems to be a R stuff. So perhaps posting
> on
> some R mailing list might be more appropriate.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110401/c817a1bb/attachment.html
From glynn at gclements.plus.com  Sat Apr  2 18:56:11 2011
From: glynn at gclements.plus.com (Glynn Clements)
Date: Sat Apr  2 18:56:16 2011
Subject: [gdal-dev] Re: [GRASS-dev] gdal-grass plugin build failed
In-Reply-To: <1301683974.5659.0.camel@stereo1>
References: <1301683974.5659.0.camel@stereo1>
Message-ID: <19863.43403.605640.397067@cerise.gclements.plus.com>


Massimo Di Stefano wrote:

> tring to rebuild the gdal-grass plugin on my linux (debian sid) 
> but i'm having this error 

> checking for G_asprintf in -lgrass_gis... no
> checking for G_putenv in -lgrass_gis.7.0.svn... no
> configure: error: --with-grass=/usr/local/grass-6.5.svn requested, but
> libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
> include /usr/local/grass-6.5.svn/lib?
> 
> have you any clue ? the error happens if i try to build the gdal-grass
> plugin using grass 6.5 ... instead using the 7.0 it build fine.
> 
> 
> the config.log file contents : http://paste.debian.net/112667/ 

	configure:2969: gcc -o conftest -O2    conftest.c -lgrass_gis
	-L/usr/local/grass-6.5.svn/lib -lgrass_I -lgrass_vask -lgrass_gmath
	-lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect
	-lgrass_dbmibase -lgrass_dbmiclient -lgrass_dgl -lgrass_dig2
	-lgrass_rtree -lgrass_linkm -L/usr/local/lib -lgdal  >&5
	/usr/bin/ld: cannot find -lgrass_gis
	/usr/bin/ld: cannot find -lgrass_I
	...

> it can't find lib .. but they exists

The 6.x build system no longer generates the unversioned symlinks,
which the configure script requires.

This has long been the case for the 7.0 build system, but the
gdal-grass configure script explicitly checks for the versioned names
for 7.0.

You could just generate the symlinks yourself, e.g.:

	cd /usr/local/grass-6.5.svn/lib
	for file in libgrass_*.so ; do ln -s $file ${file%.6.5.svn.so}.so ; done

-- 
Glynn Clements <glynn@gclements.plus.com>
From tihonovsson at gmail.com  Sun Apr  3 09:01:19 2011
From: tihonovsson at gmail.com (igorti)
Date: Sun Apr  3 09:01:21 2011
Subject: [gdal-dev] Convert Shape file to GeoJSON with gdal-ruby
Message-ID: <1301835679751-6234850.post@n2.nabble.com>

I have compiled GDAL 1.8 with ruby bindings(ruby 1.8.7) on Ubuntu 10.10.

I'm trying to convert shape or tab files with code like this:

require 'gdal/ogr'
ds = Gdal::Ogr.open("point.shp")
drv = Gdal::Ogr.get_driver_by_name("GeoJSON")
drv.copy_data_source(ds, "point.json")

It works perfectly fine when I run this code from irb. 

Then I try to integrate this code with Ruby on Rails application.
Functionality is as follows - user uploads a zip with shape file. On the
serverside file is being unzipped and with the code above should be
converted to GeoJSON. Unzipped file is perfectly fine - I checked it with
QGIS 

The problem I'm running into is that when I'm converting shape file driver
creates an empty GeoJSON file. Though exact same file with exact same code
produces a valid GeoJSON when running from irb.

Any ideas why that's happening? Running same code in different processes
should not produce different results.

Any ideas highly appreciated! Thanks in advance!




--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Convert-Shape-file-to-GeoJSON-with-gdal-ruby-tp6234850p6234850.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ragi at burhum.com  Sun Apr  3 23:05:25 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Sun Apr  3 23:05:27 2011
Subject: [gdal-dev] FileGDB OGR driver test
Message-ID: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>

Hello list,

I am trying to test a new version of the FileGDB driver for OGR, but I lack
enough FileGDBs to test :)
If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB driver
(and report back), feel free to grab a gdal-trunk binary I made for Windows.

All I want to know is if it works with polygons and lines, so feel free to
test it with those types.

Known issues with build / FileGDB driver

- (driver issue) blobs and date fields are not handled at all
- (driver issue) read-only (for now)
- (build issue) I didn't include geos (means spatial operations will be
bounding-box based)
- (build issue) I didn't include the proj libraries (means a change of
coordinate system will not work)

you can use it like this:

//create kml from FileGDB class
ogr2ogr -f "KML" out2.kml
C:\Users\rburhum\Desktop\FileGDB_API_VS2008_1_0beta3\samples\data\ExecuteSQL.gdb
"Cities"

//create shapefile
ogr2ogr -f "ESRI Shapefile" myshape.shp
C:\Users\rburhum\Desktop\FileGDB_API_VS2008_1_0beta3\samples\data\ExecuteSQL.gdb
"Cities"

You can find the test binaries at

http://bit.ly/gdZqar

Best Regards,

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110403/c3df3568/attachment.html
From brian at wildsong.biz  Mon Apr  4 01:43:19 2011
From: brian at wildsong.biz (Brian Wilson)
Date: Mon Apr  4 01:43:21 2011
Subject: [gdal-dev] kml superoverlay help request
Message-ID: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>

I received a batch of files that are in a kml format that looks like the
"KML SUPEROVERLAY" that gdal supports.
There is a kmz flle which when unzipped contains a batch of JPEGs and a file
called doc.kml that describes them.

My "gdalinfo --formats" command says "KMLSUPEROVERLAY (rwv): Kml Super
Overlay" but I don't know how to feed it the files.
I tried the KMZ, the unpacked directory, and the doc file

ERROR 4: `nc4806-50.kmz' not recognised as a supported file format.
ERROR 4: `nc4806-50' not recognised as a supported file format.
ERROR 4: `nc4806-50/doc.kml' not recognised as a supported file format.

Or maybe I am wrong about what a kml super overlay is?
My google searches only turned up help with writing the kml files, but I am
assuming the formats "rwv" means it can read, write, and also do something
else starting with the letter 'v' -- always wondered about those codes like
rw+ maybe the + means update or append?? (And "rov" means remotely operated
vehicle? oops context shift sorry)

Thanks in advance

Brian Wilson
Corvallis OR
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110403/76bcba00/attachment.html
From ahmettemiz88 at gmail.com  Mon Apr  4 03:47:05 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Mon Apr  4 03:47:07 2011
Subject: [gdal-dev] compilation problem
Message-ID: <BANLkTikKx_0-5+-03NTrSg+xZarH-WmTHQ@mail.gmail.com>

hello

hello I encountered this problem when I compiled  "gdal-svn-trunk-2011.03.27"

sr/local/gdal/frmts/envisat/EnvisatFile.c:1046: undefined reference to
`__stack_chk_fail_local'
/usr/local/gdal/frmts/o/EnvisatFile.o:/usr/local/gdal/frmts/envisat/EnvisatFile.c:419:
more undefined references to `__stack_chk_fail_local' follow

what can I do ?

regards
-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From chaitanya.ch at gmail.com  Mon Apr  4 03:53:16 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr  4 03:53:20 2011
Subject: [gdal-dev] compilation problem
In-Reply-To: <BANLkTikKx_0-5+-03NTrSg+xZarH-WmTHQ@mail.gmail.com>
References: <BANLkTikKx_0-5+-03NTrSg+xZarH-WmTHQ@mail.gmail.com>
Message-ID: <BANLkTi=kawGbCkiropSfGaHa9u5=+9by1w@mail.gmail.com>

Ahmet,

These kind of compilation errors usually resolve themselves if you perform a
"make clean" or start with a fresh copy. Probably caused by 'make' not
seeing a modification of file or due to an interrupted compilation. Also, I
noticed some problems when running make with the --jobs option.

2011/4/4 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> hello I encountered this problem when I compiled
>  "gdal-svn-trunk-2011.03.27"
>
> sr/local/gdal/frmts/envisat/EnvisatFile.c:1046: undefined reference to
> `__stack_chk_fail_local'
>
> /usr/local/gdal/frmts/o/EnvisatFile.o:/usr/local/gdal/frmts/envisat/EnvisatFile.c:419:
> more undefined references to `__stack_chk_fail_local' follow
>
> what can I do ?
>
> regards
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110404/5837ec10/attachment.html
From mweinelt at ifm-geomar.de  Mon Apr  4 07:00:59 2011
From: mweinelt at ifm-geomar.de (Martin Weinelt)
Date: Mon Apr  4 07:17:14 2011
Subject: [gdal-dev] EPSG:3388 (Caspian Sea Mercator)) Projection Parameter
 incorectly set 
Message-ID: <fbae35801c179.4d99c10b@ifm-geomar.de>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110404/df5db7e1/attachment.html
From Volker.Wichmann at uibk.ac.at  Mon Apr  4 09:11:21 2011
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Mon Apr  4 09:11:32 2011
Subject: [gdal-dev] problem with decimal precision (SAGA driver)
Message-ID: <4D99C379.2070800@uibk.ac.at>

Hi,

we encountered a problem with decimal precision when converting a SAGA 
grid to ESRI ASCII.

I expect the problem arising from ASCII to double conversion by atof() 
and/or from the Geotransform (pixel as point to pixel as area).

The SAGA header looks like

POSITION_XMIN   = 12181.8000000000
POSITION_YMIN   = 219184.8800000000
CELLSIZE        = 1.0000000000

The final ESRI ASCII header looks like

xllcorner    12181.299999999999
yllcorner    219184.380000000005

instead of
xllcorner    12181.3
yllcorner    219184.38

How is this problem handled in other drivers (using strtod(), 
stringstream, ...)?

The relevant lines of code in sagadataset.cpp 
(http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp) 
are:

406 
<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp#L406>  
           dXmin = atof(papszTokens[1]);
408 
<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp#L408>  
           dYmin = atof(papszTokens[1]);
410 
<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp#L410>  
           dCellsize = atof(papszTokens[1]);

601 
<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp#L601>  
       padfGeoTransform[0] = poGRB->m_Xmin - poGRB->m_Cellsize / 2;
602 
<http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp#L602>  
       padfGeoTransform[3] = poGRB->m_Ymin + (nRasterYSize - 1) 
* poGRB->m_Cellsize + poGRB->m_Cellsize / 2;



Thanks,
Volker

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110404/781d7f71/attachment.html
From rush at winkey.org  Mon Apr  4 12:23:16 2011
From: rush at winkey.org (brian)
Date: Mon Apr  4 12:23:19 2011
Subject: [gdal-dev] kml superoverlay help request
In-Reply-To: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
References: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
Message-ID: <1301934196.22771.12.camel@winkey.org>

Brian

IIRC the superoverlay driver is read only.

Reading images from knls are problematic at best.

Can you give me some info on the stucture of the kmz's?

Brian



On Sun, 2011-04-03 at 22:43 -0700, Brian Wilson wrote:
> I received a batch of files that are in a kml format that looks like
> the "KML SUPEROVERLAY" that gdal supports.
> There is a kmz flle which when unzipped contains a batch of JPEGs and
> a file called doc.kml that describes them.
> 
> My "gdalinfo --formats" command says "KMLSUPEROVERLAY (rwv): Kml Super
> Overlay" but I don't know how to feed it the files.
> I tried the KMZ, the unpacked directory, and the doc file
> 
> ERROR 4: `nc4806-50.kmz' not recognised as a supported file format.
> ERROR 4: `nc4806-50' not recognised as a supported file format.
> ERROR 4: `nc4806-50/doc.kml' not recognised as a supported file
> format.
> 
> Or maybe I am wrong about what a kml super overlay is?
> My google searches only turned up help with writing the kml files, but
> I am assuming the formats "rwv" means it can read, write, and also do
> something else starting with the letter 'v' -- always wondered about
> those codes like rw+ maybe the + means update or append?? (And "rov"
> means remotely operated vehicle? oops context shift sorry)
> 
> Thanks in advance
> 
> Brian Wilson
> Corvallis OR
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Govind.Harsh at geoeye.com  Mon Apr  4 12:51:54 2011
From: Govind.Harsh at geoeye.com (Harsh Govind)
Date: Mon Apr  4 12:51:58 2011
Subject: [gdal-dev] kml superoverlay help request
In-Reply-To: <1301934196.22771.12.camel@winkey.org>
References: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
	<1301934196.22771.12.camel@winkey.org>
Message-ID: <4B3B3C35D34C9345BC8914C199882E281DEF277F29@SPATCEX003.spadac.com>

Brian,
I had responded earlier but for some reason my email was rejected by list maybe because my official ID changed. In any case below is my response.

What version of gdal is this? KMLSUPEROVERLAY driver creates a hierarchy of regions that can be used to efficiently serve large set of imagery. As few points near higher resolution tiles are loaded. KMLSUPEROVERLAY driver generates kmz with this command:

Gdal_translate.exe -of KMLSUPEROVERLAY c:\my.tif c:\myResult.kmz -co FORMAT=PNG

I have not implemented read for KMLSUPEROVERLAY. Ogrinfo should be able to read kml but not gdal. Let me know if you have more questions.

"v" gets appended for formats supporting virtual IO.

Harsh Govind


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of brian
Sent: Monday, April 04, 2011 12:23 PM
To: Brian Wilson
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] kml superoverlay help request

Brian

IIRC the superoverlay driver is read only.

Reading images from knls are problematic at best.

Can you give me some info on the stucture of the kmz's?

Brian



On Sun, 2011-04-03 at 22:43 -0700, Brian Wilson wrote:
> I received a batch of files that are in a kml format that looks like
> the "KML SUPEROVERLAY" that gdal supports.
> There is a kmz flle which when unzipped contains a batch of JPEGs and
> a file called doc.kml that describes them.
> 
> My "gdalinfo --formats" command says "KMLSUPEROVERLAY (rwv): Kml Super
> Overlay" but I don't know how to feed it the files.
> I tried the KMZ, the unpacked directory, and the doc file
> 
> ERROR 4: `nc4806-50.kmz' not recognised as a supported file format.
> ERROR 4: `nc4806-50' not recognised as a supported file format.
> ERROR 4: `nc4806-50/doc.kml' not recognised as a supported file
> format.
> 
> Or maybe I am wrong about what a kml super overlay is?
> My google searches only turned up help with writing the kml files, but
> I am assuming the formats "rwv" means it can read, write, and also do
> something else starting with the letter 'v' -- always wondered about
> those codes like rw+ maybe the + means update or append?? (And "rov"
> means remotely operated vehicle? oops context shift sorry)
> 
> Thanks in advance
> 
> Brian Wilson
> Corvallis OR
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From rush at winkey.org  Mon Apr  4 12:56:45 2011
From: rush at winkey.org (brian)
Date: Mon Apr  4 12:56:48 2011
Subject: [gdal-dev] kml superoverlay help request
In-Reply-To: <4B3B3C35D34C9345BC8914C199882E281DEF277F29@SPATCEX003.spadac.com>
References: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
	<1301934196.22771.12.camel@winkey.org>
	<4B3B3C35D34C9345BC8914C199882E281DEF277F29@SPATCEX003.spadac.com>
Message-ID: <1301936205.23469.1.camel@winkey.org>


Harsh,

Depending on how its layed out, I have a way to read these.

Brian


On Mon, 2011-04-04 at 12:51 -0400, Harsh Govind wrote:
> Brian,
> I had responded earlier but for some reason my email was rejected by list maybe because my official ID changed. In any case below is my response.
> 
> What version of gdal is this? KMLSUPEROVERLAY driver creates a hierarchy of regions that can be used to efficiently serve large set of imagery. As few points near higher resolution tiles are loaded. KMLSUPEROVERLAY driver generates kmz with this command:
> 
> Gdal_translate.exe -of KMLSUPEROVERLAY c:\my.tif c:\myResult.kmz -co FORMAT=PNG
> 
> I have not implemented read for KMLSUPEROVERLAY. Ogrinfo should be able to read kml but not gdal. Let me know if you have more questions.
> 
> "v" gets appended for formats supporting virtual IO.
> 
> Harsh Govind
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of brian
> Sent: Monday, April 04, 2011 12:23 PM
> To: Brian Wilson
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] kml superoverlay help request
> 
> Brian
> 
> IIRC the superoverlay driver is read only.
> 
> Reading images from knls are problematic at best.
> 
> Can you give me some info on the stucture of the kmz's?
> 
> Brian
> 
> 
> 
> On Sun, 2011-04-03 at 22:43 -0700, Brian Wilson wrote:
> > I received a batch of files that are in a kml format that looks like
> > the "KML SUPEROVERLAY" that gdal supports.
> > There is a kmz flle which when unzipped contains a batch of JPEGs and
> > a file called doc.kml that describes them.
> > 
> > My "gdalinfo --formats" command says "KMLSUPEROVERLAY (rwv): Kml Super
> > Overlay" but I don't know how to feed it the files.
> > I tried the KMZ, the unpacked directory, and the doc file
> > 
> > ERROR 4: `nc4806-50.kmz' not recognised as a supported file format.
> > ERROR 4: `nc4806-50' not recognised as a supported file format.
> > ERROR 4: `nc4806-50/doc.kml' not recognised as a supported file
> > format.
> > 
> > Or maybe I am wrong about what a kml super overlay is?
> > My google searches only turned up help with writing the kml files, but
> > I am assuming the formats "rwv" means it can read, write, and also do
> > something else starting with the letter 'v' -- always wondered about
> > those codes like rw+ maybe the + means update or append?? (And "rov"
> > means remotely operated vehicle? oops context shift sorry)
> > 
> > Thanks in advance
> > 
> > Brian Wilson
> > Corvallis OR
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Govind.Harsh at geoeye.com  Mon Apr  4 13:02:48 2011
From: Govind.Harsh at geoeye.com (Harsh Govind)
Date: Mon Apr  4 13:02:51 2011
Subject: [gdal-dev] kml superoverlay help request
In-Reply-To: <1301936205.23469.1.camel@winkey.org>
References: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
	<1301934196.22771.12.camel@winkey.org>
	<4B3B3C35D34C9345BC8914C199882E281DEF277F29@SPATCEX003.spadac.com>
	<1301936205.23469.1.camel@winkey.org>
Message-ID: <4B3B3C35D34C9345BC8914C199882E281DEF277F30@SPATCEX003.spadac.com>

Yes, definitely. I meant to say that using KLSUPEROVERLAY driver you cannot read kmz. Thanks for pointing that out.

Harsh Govind


-----Original Message-----
From: brian [mailto:rush@winkey.org] 
Sent: Monday, April 04, 2011 12:57 PM
To: Harsh Govind
Cc: Brian Wilson; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] kml superoverlay help request


Harsh,

Depending on how its layed out, I have a way to read these.

Brian


On Mon, 2011-04-04 at 12:51 -0400, Harsh Govind wrote:
> Brian,
> I had responded earlier but for some reason my email was rejected by list maybe because my official ID changed. In any case below is my response.
> 
> What version of gdal is this? KMLSUPEROVERLAY driver creates a hierarchy of regions that can be used to efficiently serve large set of imagery. As few points near higher resolution tiles are loaded. KMLSUPEROVERLAY driver generates kmz with this command:
> 
> Gdal_translate.exe -of KMLSUPEROVERLAY c:\my.tif c:\myResult.kmz -co FORMAT=PNG
> 
> I have not implemented read for KMLSUPEROVERLAY. Ogrinfo should be able to read kml but not gdal. Let me know if you have more questions.
> 
> "v" gets appended for formats supporting virtual IO.
> 
> Harsh Govind
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of brian
> Sent: Monday, April 04, 2011 12:23 PM
> To: Brian Wilson
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] kml superoverlay help request
> 
> Brian
> 
> IIRC the superoverlay driver is read only.
> 
> Reading images from knls are problematic at best.
> 
> Can you give me some info on the stucture of the kmz's?
> 
> Brian
> 
> 
> 
> On Sun, 2011-04-03 at 22:43 -0700, Brian Wilson wrote:
> > I received a batch of files that are in a kml format that looks like
> > the "KML SUPEROVERLAY" that gdal supports.
> > There is a kmz flle which when unzipped contains a batch of JPEGs and
> > a file called doc.kml that describes them.
> > 
> > My "gdalinfo --formats" command says "KMLSUPEROVERLAY (rwv): Kml Super
> > Overlay" but I don't know how to feed it the files.
> > I tried the KMZ, the unpacked directory, and the doc file
> > 
> > ERROR 4: `nc4806-50.kmz' not recognised as a supported file format.
> > ERROR 4: `nc4806-50' not recognised as a supported file format.
> > ERROR 4: `nc4806-50/doc.kml' not recognised as a supported file
> > format.
> > 
> > Or maybe I am wrong about what a kml super overlay is?
> > My google searches only turned up help with writing the kml files, but
> > I am assuming the formats "rwv" means it can read, write, and also do
> > something else starting with the letter 'v' -- always wondered about
> > those codes like rw+ maybe the + means update or append?? (And "rov"
> > means remotely operated vehicle? oops context shift sorry)
> > 
> > Thanks in advance
> > 
> > Brian Wilson
> > Corvallis OR
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From BCassanova at weather.com  Mon Apr  4 17:05:44 2011
From: BCassanova at weather.com (Cassanova, Bill)
Date: Mon Apr  4 17:21:00 2011
Subject: [gdal-dev] Building a resizable polygon
Message-ID: <AFBF0FD253136F4ABD241011F70F8690010A0E48@PRTMB01.corp.weather.com>

Hi All,

I am looking for some direction on if GDAL has the capability has the ability to build a super-polygon from a series of small polygons...I have played a bit with the OGR Geometry classes but I can't
seem to quite get what I need.

Let's start with a simply example.

Polygon A has vertices in (X,Y) format of <0, 0>, < 0,1>, <1,0>, <1,1>
Polygon B has vertices in (x,y) format of < 1,0 >, <1,1>, <2,0>, <2,1>

Since Polygon A and B share a common side with vertices < <1,0> and <1,1> I want to build super polygon that contains the coordinates of the outer perimeter of the points.
When complete the new polygon C will thus have points <0,0>,<0,1>,<2,0>, <2,1>

I had first looked at OGRPolygon.AddRing wherein A and B above would be OGRLinearRings and then by making a call to C.getExteriorRing() but this seem to report the first ring added.

Am I heading in the correct direction or is this something that I will essentially have to do manually by first creating a OGRLinearRing from the vertices of polygon A, then creating a OGRPolygon to which I execute addRing.
Then interrogating that ring to see which line segments are common between A and B and removing the ones that are common and adding the line segments that aren't common.

Thanks,
Bill
++++

William Cassanova | Senior GFS Developer | The Weather Channel | 770.226.2368 | bcassanova@weather.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110404/f9c53859/attachment.html
From chaitanya.ch at gmail.com  Mon Apr  4 17:44:21 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr  4 17:44:30 2011
Subject: [gdal-dev] Building a resizable polygon
In-Reply-To: <AFBF0FD253136F4ABD241011F70F8690010A0E48@PRTMB01.corp.weather.com>
References: <AFBF0FD253136F4ABD241011F70F8690010A0E48@PRTMB01.corp.weather.com>
Message-ID: <BANLkTin9h9MUFCN=_7F9E4a9dT1HNfqwWA@mail.gmail.com>

Bill,

Either of OGRGeometry::Union() and OGRGeometry::UnionCascaded() should help
you.

I would choose the latter if there are more than two polygons. It operates
on an OGRMultiPolygon object.

On Tue, Apr 5, 2011 at 2:35 AM, Cassanova, Bill <BCassanova@weather.com>wrote:

>  Hi All,
>
>
>
> I am looking for some direction on if GDAL has the capability has the
> ability to build a super-polygon from a series of small polygons?I have
> played a bit with the OGR Geometry classes but I can?t
>
> seem to quite get what I need.
>
>
>
> Let?s start with a simply example.
>
>
>
> Polygon A has vertices in (X,Y) format of <0, 0>, < 0,1>, <1,0>, <1,1>
>
> Polygon B has vertices in (x,y) format of < 1,0 >, <1,1>, <2,0>, <2,1>
>
>
>
> Since Polygon A and B share a common side with vertices < <1,0> and <1,1> I
> want to build super polygon that contains the coordinates of the outer
> perimeter of the points.
>
> When complete the new polygon C will thus have points <0,0>,<0,1>,<2,0>,
> <2,1>
>
>
>
> I had first looked at OGRPolygon.AddRing wherein A and B above would be
> OGRLinearRings and then by making a call to C.getExteriorRing() but this
> seem to report the first ring added.
>
>
>
> Am I heading in the correct direction or is this something that I will
> essentially have to do manually by first creating a OGRLinearRing from the
> vertices of polygon A, then creating a OGRPolygon to which I execute
> addRing.
>
> Then interrogating that ring to see which line segments are common between
> A and B and removing the ones that are common and adding the line segments
> that aren?t common.
>
>
>
> Thanks,
>
> Bill
>
> ++++
>
>
>
> William Cassanova | Senior GFS Developer | The Weather Channel |
> 770.226.2368 | bcassanova@weather.com
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/a2425d71/attachment-0001.html
From brian at wildsong.biz  Mon Apr  4 21:09:49 2011
From: brian at wildsong.biz (Brian Wilson)
Date: Mon Apr  4 21:09:51 2011
Subject: Fwd: [gdal-dev] kml superoverlay help request
In-Reply-To: <BANLkTi=TaP=G-nnO=w+4dtBFN+FPTegu6w@mail.gmail.com>
References: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
	<1301934196.22771.12.camel@winkey.org>
	<4B3B3C35D34C9345BC8914C199882E281DEF277F29@SPATCEX003.spadac.com>
	<BANLkTi=TaP=G-nnO=w+4dtBFN+FPTegu6w@mail.gmail.com>
Message-ID: <BANLkTim+uwKibqDC71_0jNFCDdix5kSjFw@mail.gmail.com>

Darn -- meant this to go to the list not just to Harsh

---------- Forwarded message ----------
From: Brian Wilson <brian@wildsong.biz>
Date: Mon, Apr 4, 2011 at 11:10 AM
Subject: Re: [gdal-dev] kml superoverlay help request
To: Harsh Govind <Govind.Harsh@geoeye.com>

Okay, so I cannot read KMZ w/gdal. I am using version 1.8 running on Ubuntu.
Mostly I wanted to confirm that. I hate duplicating other people's work just
because I am too dense to understand docs. :-)

I never looked at a KMLSUPEROVERLAY before yesterday so I don't know how
much variation there is in one. (Though there is XML involved so there could
be LOTS of variation... :-)

I started to describe the files in this message and decided a URL is easier.


http://hupi.org/map/vietnam/50k/

For example, nc4806-50/ <http://hupi.org/map/vietnam/50k/nc4806-50/> is the
unzipped version of nc4806-50.zip<http://hupi.org/map/vietnam/50k/nc4806-50.zip>

(FYI this project is for the Vietnam Helicopter Pilot Association
vhpa.organd the rasters are scans of Vietnam war era paper maps.)

Brian Wilson
Corvallis OR
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110404/2b5cefd0/attachment.html
From jgomezdans at gmail.com  Tue Apr  5 07:51:30 2011
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Apr  5 07:51:32 2011
Subject: [gdal-dev] Gap-filling rasters
Message-ID: <BANLkTimEKPp3zJbcK_wRi_F=CMZhyKoCjw@mail.gmail.com>

Hi,

I was wondering whether GDAL has the ability to interpolate multiband
rasters. I have a NxMxL cube (ie, a raster with L bands :D), and a mask of
the same size. The locations of my data cube where the associated mask is
zero (say) need to be interpolated from the surrounding pixels in the cube,
using something simple (not too bothered about the interpolation), such as
nearest neighbour or bilinear interpolation.

Anyone got any suggestions?
J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/e7c5f97b/attachment.html
From chaitanya.ch at gmail.com  Tue Apr  5 09:04:40 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  5 09:04:42 2011
Subject: [gdal-dev] Gap-filling rasters
In-Reply-To: <BANLkTimEKPp3zJbcK_wRi_F=CMZhyKoCjw@mail.gmail.com>
References: <BANLkTimEKPp3zJbcK_wRi_F=CMZhyKoCjw@mail.gmail.com>
Message-ID: <BANLkTikpcZ3t+HFecOh9K1S3+8aOSL3nKg@mail.gmail.com>

Jose,

Perhaps the python script, gdal_fillnodata.py, can help you.
http://www.gdal.org/gdal_fillnodata.html
You will need GDAL's python bindings to run this.

On Tue, Apr 5, 2011 at 5:21 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:

> Hi,
>
> I was wondering whether GDAL has the ability to interpolate multiband
> rasters. I have a NxMxL cube (ie, a raster with L bands :D), and a mask of
> the same size. The locations of my data cube where the associated mask is
> zero (say) need to be interpolated from the surrounding pixels in the cube,
> using something simple (not too bothered about the interpolation), such as
> nearest neighbour or bilinear interpolation.
>
> Anyone got any suggestions?
> J
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/f728d291/attachment.html
From chaitanya.ch at gmail.com  Tue Apr  5 09:54:34 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  5 09:54:38 2011
Subject: [gdal-dev] Building a resizable polygon
In-Reply-To: <AFBF0FD253136F4ABD241011F70F8690010A10D7@PRTMB01.corp.weather.com>
References: <AFBF0FD253136F4ABD241011F70F8690010A0E48@PRTMB01.corp.weather.com>
	<BANLkTin9h9MUFCN=_7F9E4a9dT1HNfqwWA@mail.gmail.com>
	<AFBF0FD253136F4ABD241011F70F8690010A10D7@PRTMB01.corp.weather.com>
Message-ID: <BANLkTimakE+ukoYVfMkom8Du8FRX3B47Vw@mail.gmail.com>

Bill,

OGR's UnionCascaded() method is built on the GEOS library. There may be an
example in the autotest suite but it may not be as useful or necessary. I am
not sure which geometry type it accepts and returns, so you may have to
fiddle a bit.

Loop through all your polygons to fill them into an
OGRMultiPolygon object using addGeometryDirectly().
Note that the union result may be a MultiPolygon.

On Tue, Apr 5, 2011 at 6:41 PM, Cassanova, Bill <BCassanova@weather.com>wrote:

>  Thanks Chaitanya.  I will take a look.
>
>
>
> Do you know if GDAL has any example code buried somewhere within the source
> tree?  I am sure I will need to use UnionCascaded because there will be many
> polygons added and at first glance the
>
> Doxygen documentation doesn?t really provide a good starting place.
>
>
>
> So in my original example do I first need to create a OGRPolygon A, and
> OGRPolygon B, and then an OGRMultiPolygon C and then call
> C.addGeometryDirectly passing in a pointer to A and B
>
> And then call C.UnionCascaded?  The result of UnionCascased is a
> OGRGeometry object which I assume you would cast to OGRPolygon and then make
> calls into getX and getY to extract the new points?
>
>
>
>
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Monday, April 04, 2011 5:44 PM
> *To:* Cassanova, Bill
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Building a resizable polygon
>
>
>
> Bill,
>
> Either of OGRGeometry::Union() and OGRGeometry::UnionCascaded() should help
> you.
>
> I would choose the latter if there are more than two polygons. It operates
> on an OGRMultiPolygon object.
>
> On Tue, Apr 5, 2011 at 2:35 AM, Cassanova, Bill <BCassanova@weather.com>
> wrote:
>
> Hi All,
>
>
>
> I am looking for some direction on if GDAL has the capability has the
> ability to build a super-polygon from a series of small polygons?I have
> played a bit with the OGR Geometry classes but I can?t
>
> seem to quite get what I need.
>
>
>
> Let?s start with a simply example.
>
>
>
> Polygon A has vertices in (X,Y) format of <0, 0>, < 0,1>, <1,0>, <1,1>
>
> Polygon B has vertices in (x,y) format of < 1,0 >, <1,1>, <2,0>, <2,1>
>
>
>
> Since Polygon A and B share a common side with vertices < <1,0> and <1,1> I
> want to build super polygon that contains the coordinates of the outer
> perimeter of the points.
>
> When complete the new polygon C will thus have points <0,0>,<0,1>,<2,0>,
> <2,1>
>
>
>
> I had first looked at OGRPolygon.AddRing wherein A and B above would be
> OGRLinearRings and then by making a call to C.getExteriorRing() but this
> seem to report the first ring added.
>
>
>
> Am I heading in the correct direction or is this something that I will
> essentially have to do manually by first creating a OGRLinearRing from the
> vertices of polygon A, then creating a OGRPolygon to which I execute
> addRing.
>
> Then interrogating that ring to see which line segments are common between
> A and B and removing the ones that are common and adding the line segments
> that aren?t common.
>
>
>
> Thanks,
>
> Bill
>
> ++++
>
>
>
> William Cassanova | Senior GFS Developer | The Weather Channel |
> 770.226.2368 | bcassanova@weather.com
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/ca1d169e/attachment.html
From jgomezdans at gmail.com  Tue Apr  5 10:00:49 2011
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Apr  5 10:00:50 2011
Subject: [gdal-dev] Gap-filling rasters
In-Reply-To: <BANLkTikpcZ3t+HFecOh9K1S3+8aOSL3nKg@mail.gmail.com>
References: <BANLkTimEKPp3zJbcK_wRi_F=CMZhyKoCjw@mail.gmail.com>
	<BANLkTikpcZ3t+HFecOh9K1S3+8aOSL3nKg@mail.gmail.com>
Message-ID: <BANLkTikjG3Jedis_fbQ1ibEJm80bVN-k-Q@mail.gmail.com>

Hi,

Maybe I could look into updating it so it can deal with multi-band datasets
(ie, interpolate in 3D rather than in 2D)?

On 5 April 2011 14:04, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:

> Jose,
>
> Perhaps the python script, gdal_fillnodata.py, can help you.
> http://www.gdal.org/gdal_fillnodata.html
> You will need GDAL's python bindings to run this.
>
> On Tue, Apr 5, 2011 at 5:21 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:
>
>> Hi,
>>
>> I was wondering whether GDAL has the ability to interpolate multiband
>> rasters. I have a NxMxL cube (ie, a raster with L bands :D), and a mask of
>> the same size. The locations of my data cube where the associated mask is
>> zero (say) need to be interpolated from the surrounding pixels in the cube,
>> using something simple (not too bothered about the interpolation), such as
>> nearest neighbour or bilinear interpolation.
>>
>> Anyone got any suggestions?
>> J
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/7e35da54/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Apr  5 10:26:08 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  5 10:26:13 2011
Subject: [gdal-dev] Gap-filling rasters
In-Reply-To: <BANLkTikjG3Jedis_fbQ1ibEJm80bVN-k-Q@mail.gmail.com>
References: <BANLkTimEKPp3zJbcK_wRi_F=CMZhyKoCjw@mail.gmail.com>
	<BANLkTikpcZ3t+HFecOh9K1S3+8aOSL3nKg@mail.gmail.com>
	<BANLkTikjG3Jedis_fbQ1ibEJm80bVN-k-Q@mail.gmail.com>
Message-ID: <BANLkTi=eSS0ds=FEg4VK7GuHpJtw2=6NAQ@mail.gmail.com>

Jose,

I didn't realize you were going to interpolate between bands as well. Is
this temperol data? This operation is actually performed by GDALFillNodata()
method. So, modifying the script is not going to work.

You can look at the source of GDALFillNodata() method and decide on what to
do.

On Tue, Apr 5, 2011 at 7:30 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:

> Hi,
>
> Maybe I could look into updating it so it can deal with multi-band datasets
> (ie, interpolate in 3D rather than in 2D)?
>
>
> On 5 April 2011 14:04, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
>
>> Jose,
>>
>> Perhaps the python script, gdal_fillnodata.py, can help you.
>> http://www.gdal.org/gdal_fillnodata.html
>> You will need GDAL's python bindings to run this.
>>
>> On Tue, Apr 5, 2011 at 5:21 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:
>>
>>> Hi,
>>>
>>> I was wondering whether GDAL has the ability to interpolate multiband
>>> rasters. I have a NxMxL cube (ie, a raster with L bands :D), and a mask of
>>> the same size. The locations of my data cube where the associated mask is
>>> zero (say) need to be interpolated from the surrounding pixels in the cube,
>>> using something simple (not too bothered about the interpolation), such as
>>> nearest neighbour or bilinear interpolation.
>>>
>>> Anyone got any suggestions?
>>> J
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/6bc9f5ca/attachment.html
From marcel.derrien at meteo.fr  Tue Apr  5 10:05:04 2011
From: marcel.derrien at meteo.fr (Marcel Derrien)
Date: Tue Apr  5 10:31:46 2011
Subject: [gdal-dev] help for including category names 
Message-ID: <4D9B2190.2060504@meteo.fr>

Hello,
I am new with gdal, and it is my first post here.
I have a gdal 1.8.0 installed on a cenOS Linux x86_64 ,with libtiff 
3.9.4 and libgeotiff 1.3.0.
I try the translation of a raster dataset to geotiff through a 
VRTRawRasterBand described in a VRT file using gdal_translate.
gdal_translate test.vrt test.tif
The VRT file includes a category list description that I would like to 
get in the resulting geotiff.
The geotiff produced is correct but the only thing that is missing is 
the category names that I can't see with gdalinfo.
It seems as if the category list was not managed, as the resulting file 
size is the same with and without the categorynames section in the VRT.
I suspect my gdal installation or maybe I have a bad understanding of 
the way to manage this option.
Could somebody help to find an explanation ?

gdal-config --version
1.8.0
gdal-config --dep-libs
-lsqlite3 -L/usr/lib64/lib -lexpat -lgif -ljpeg 
-L/export/util/libgeotiff-1.3.0/lib -lgeotiff 
-L/export/util/tiff-3.9.4/lib -ltiff -lpng -L/export/util/netcdf-3.6.2 
-L/export/util/netcdf-3.6.2/lib -lnetcdf -lz -lpthread -lm -lrt -ldl 
-L/usr/kerberos/lib64 -lcurl -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err 
-lresolv -ldl -lidn -lssl -lcrypto -lz


gdalinfo t.tif

Driver: GTiff/GeoTIFF
Files: t.tif
Size is 3712, 3712
Coordinate System is:
PROJCS["Geostationary_Satellite",
    GEOGCS["GCS_unnamed ellipse",
        DATUM["D_unknown",
            SPHEROID["Unknown",6378169,295.4880658970008]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Geostationary_Satellite"],
    PARAMETER["central_meridian",0],
    PARAMETER["satellite_height",35785831],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (-5570248.832537000067532,5570248.832537000067532)
Pixel Size = (3000.403357000000142,-3000.403357000000142)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-5570248.833, 5570248.833)
Lower Left  (-5570248.833,-5567248.429)
Upper Right ( 5567248.429, 5570248.833)
Lower Right ( 5567248.429,-5567248.429)
Center      (   -1500.202,    1500.202)
Band 1 Block=3712x2 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 100,100,100,255
....

Here is the VRT file content:
<VRTDataset rasterXSize="3712" rasterYSize="3712">
    <GeoTransform>-5570248.832537, 3000.403357, 0.000000, 
5570248.832537, 0.000000, -3000.403357</GeoTransform>
    
<SRS>PROJCS[&quot;Geostationary_Satellite&quot;,GEOGCS[&quot;GCS_unnamed 
ellipse&quot;,DATUM[&quot;D_unknown&quot;,SPHEROID[&quot;Unknown&quot;,6378169,295.4880658970008]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433]],PROJECTION[&quot;Geostationary_Satellite&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;satellite_height&quot;,35785831],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1]]</SRS>
    <Metadata>
    <MDI key="AREA_OR_POINT">Area</MDI>
    </Metadata>
    <Description>Cloud Type Layer</Description>
    <VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
        <ColorInterp>Palette</ColorInterp>
            <ColorTable>
                <Entry c1="100" c2="100" c3="100"/>
                <Entry ...
                ...
            </ColorTable>
        <CategoryNames>
            <Category>Not processed</Category>
            <Category>Cloud-free land</Category>
             ...
            </CategoryNames>
        <SourceFilename relativetoVRT="1">t.fis</SourceFilename>
        <ImageOffset>7424</ImageOffset>
        <PixelOffset>1</PixelOffset>
        <LineOffset>3712</LineOffset>
        <ByteOrder>LSB</ByteOrder>
    </VRTRasterBand>
</VRTDataset>



Thanks in advance,
---
Marcel Derrien

-------------- next part --------------
A non-text attachment was scrubbed...
Name: marcel_derrien.vcf
Type: text/x-vcard
Size: 375 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/fa3c40a4/marcel_derrien.vcf
From jormarfe at gmail.com  Tue Apr  5 11:01:31 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Tue Apr  5 11:01:35 2011
Subject: [gdal-dev] [gdal-users] Mapserver-OGR mysql and WFS Intersect
Message-ID: <BANLkTikzCiGPwQphTvpxHuOG-HoTt6acbw@mail.gmail.com>

Hello,

I Have been playing around with mapserver OGR setting a layer of points
comming from two different sources, first a mysql spatial table, and then a
postgis table, and I have seen that the WFS operation Intersect behaves
weird when using mysql (it works ok with postgres). I am not sure if OGR is
involved in this, I already asked in the mapserver list with no answerd, so,
thanks for reading, and please forgive me if I am asking in the wrong place.

PROBLEM:

In wfs layer where the data is retrieved from a mysql table, the intersect
filter only returns a result list when the first feature(the first inserted
record in the table) is part of the result set. If the filter shall return
results, but the first feature is not among them, then we get not list of
features:

<?xml version='1.0' encoding="ISO-8859-1" ?> <wfs:FeatureCollection...>

      <gml:boundedBy>

        <gml:Box srsName="EPSG:4326">

                <gml:coordinates>-1.000000,-1.000000
-1.000000,-1.000000</gml:coordinates>

        </gml:Box>

      </gml:boundedBy>

</wfs:FeatureCollection>



Which is diffrent to when a query shall not return any resultst:



<?xml version='1.0' encoding="ISO-8859-1" ?> <wfs:FeatureCollection...">

   <gml:boundedBy>

      <gml:null>missing</gml:null>

   </gml:boundedBy>

</wfs:FeatureCollection>





TEST:



1. Create Spatial Data



CREATE DATABASE mmi_spatial_db;

USE mmi_spatial_db;

CREATE TABLE positionReal (oid LONG, point POINT); INSERT INTO
positionReal(oid, point) VALUES (3, GeomFromText('POINT(-10 -10)',4326));
INSERT INTO positionReal(oid, point) VALUES (2, GeomFromText('POINT(10
10)',4326)); INSERT INTO positionReal(oid, point) VALUES (1,
GeomFromText('POINT(0 20)',4326));



2. Map file:



MAP

  NAME MMI_WFS

  UNITS METERS

  TRANSPARENT ON

  IMAGECOLOR 0 0 0

  IMAGETYPE PNG

  SHAPEPATH "."

  SYMBOLSET "../symbols.sym"

  STATUS ON



WEB

  IMAGEPATH "/opt/fsg/tmp/"

  IMAGEURL "/opt/fsg/"

  METADATA

    "wfs_title"                  "WFS MMI Server for MapServer" ## REQUIRED

    "wfs_onlineresource"         "http://localhost:8080/cgi-bin/mywfs?" ##
Recommended

    "wfs_srs"                    "EPSG:4326"## Recommended

    "wfs_abstract"               "This text describes my WFS service." ##
Recommended

    "wfs_schemas_location"       "http://schemas.opengeospatial.net"

  END

END



PROJECTION

  "init=epsg:4326"

END



LAYER

  NAME "PositionReal"

  STATUS ON

  TYPE POINT



  CONNECTIONTYPE OGR

  CONNECTION
"MySQL:mmi_spatial_db,user=mmi,password=*****,host=127.0.0.1,port=3306"

  DATA "SELECT point from positionReal"

  #CONNECTIONTYPE POSTGIS

  #CONNECTION "host=127.0.0.1 port=5432 dbname=mmi_db user=postgres
password=postgres"

  #DATA "point from positionreal"



  DUMP TRUE             ## REQUIRED

  #TOLERANCE 200

  #TOLERANCEUNITS PIXELS



  METADATA

      #"wfs_featureid" "oid"

      "wfs_srs" "epsg:4326"

      "wfs_onlineresource"         "http://localhost:8080/cgi-bin/mywfs?" ##
Recommended

      "wfs_title" "PositionReal"

      "gml_include_items"     "all" ## Optional (serves all attributes for
lay

      "gml_surface_occurances" "0,UNBOUNDED"

      "wfs_extent"      "-180 -90 180 90"

      "gml_include_items" "all"

  END

END



END # Map File



3. Intersect Filter:



- This one works because point (-10,-10) is part of the resultset.

http://localhost:8080/cgi-bin/mywfs?SERVICE=WFS&VERSION=1.0.0&request=getfeature&typename=PositionReal&Filter
=

<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="
http://www.opengis.net/gml"><Intersects><PropertyName>point</PropertyName>

<gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>-180,-90
-180,90 180,90 180,-90
-180,-90</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></Intersects></Filter>



- This one works, point (-10,-10) is part of the resultset
http://localhost:8080/cgi-bin/mywfs?SERVICE=WFS&VERSION=1.0.0&request=getfeature&typename=PositionReal&Filter
=

<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="
http://www.opengis.net/gml"><Intersects><PropertyName>point</PropertyName>

<gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>-11,-11
-11,-9 -9,-9 -9,-11
-11,-11</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></Intersects></Filter>



- This query fails, it should return one feature, but we get the weird
behavior because point (-10,-10) is not part of the resultset
http://localhost:8080/cgi-bin/mywfs?SERVICE=WFS&VERSION=1.0.0&request=getfeature&typename=PositionReal&Filter
=

<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="
http://www.opengis.net/gml"><Intersects><PropertyName>point</PropertyName>

<gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>9,9 9,11
11,11 11,9
9,9</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></Intersects></Filter>



Notice that I use gml:polygon instead of gml:box to be able to test this
with mapserver in trunk (which works with gml:box) but also with mapserver
5.6.3 (fgs-installer, which dont work with intersect and gml:box)



The problem does not ocurr if the database in use is postgres



./createdb -U postgres -T template_postgis mmi_db; CREATE TABLE positionReal
(oid int); SELECT AddGeometryColumn('positionreal', 'point',
4326,'POINT',2); INSERT INTO positionReal(oid, point) VALUES (3,
GeomFromText('POINT(-10 -10)',4326)); INSERT INTO positionReal(oid, point)
VALUES (2, GeomFromText('POINT(10 10)',4326)); INSERT INTO positionReal(oid,
point) VALUES (1, GeomFromText('POINT(0 20)',4326));



SYSTEMS:

I tested this in the following systems:



OpenSuse 11

fgs-mapserver_basic_5.6.3-fgs_9.5-linux-i386.bin and building from the
sources (branch 5-6) mysql  Ver 14.12 Distrib 5.0.67, for suse-linux-gnu
(i686) using readline 5.2 and mysql 5.5 too



SLES 11

fgs-mapserver_basic_5.6.3-fgs_9.5-linux-i386.bin

mysql  Ver 14.14 Distrib 5.1.43, for unknown-linux-gnu (x86_64) using
readline 5.1



Ubunut

fgs-mapserver_basic_5.6.3-fgs_9.5-linux-i386.bin

mysql 5.1



Best regards,

Jorge and Joaquin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/5fe04316/attachment-0001.html
From rush at winkey.org  Tue Apr  5 15:03:25 2011
From: rush at winkey.org (brian)
Date: Tue Apr  5 14:05:59 2011
Subject: Fwd: [gdal-dev] kml superoverlay help request
In-Reply-To: <BANLkTim+uwKibqDC71_0jNFCDdix5kSjFw@mail.gmail.com>
References: <BANLkTimNqQ38+JOSX6mrTLLkxPqQK12dPw@mail.gmail.com>
	<1301934196.22771.12.camel@winkey.org>
	<4B3B3C35D34C9345BC8914C199882E281DEF277F29@SPATCEX003.spadac.com>
	<BANLkTi=TaP=G-nnO=w+4dtBFN+FPTegu6w@mail.gmail.com>
	<BANLkTim+uwKibqDC71_0jNFCDdix5kSjFw@mail.gmail.com>
Message-ID: <1302030205.4414.4.camel@winkey.org>

Brian

Basicly you need to build a vrt out of every image in the level of
intrest, in this case they seem to be the 7th level.

attatched is a script to do so.



Brian


On Mon, 2011-04-04 at 18:09 -0700, Brian Wilson wrote:
> Darn -- meant this to go to the list not just to Harsh
> 
> ---------- Forwarded message ----------
> From: Brian Wilson <brian@wildsong.biz>
> Date: Mon, Apr 4, 2011 at 11:10 AM
> Subject: Re: [gdal-dev] kml superoverlay help request
> To: Harsh Govind <Govind.Harsh@geoeye.com>
> 
> Okay, so I cannot read KMZ w/gdal. I am using version 1.8 running on
> Ubuntu. Mostly I wanted to confirm that. I hate duplicating other
> people's work just because I am too dense to understand docs. :-)
> 
> I never looked at a KMLSUPEROVERLAY before yesterday so I don't know
> how much variation there is in one. (Though there is XML involved so
> there could be LOTS of variation... :-)
> 
> I started to describe the files in this message and decided a URL is
> easier. 
> 
> http://hupi.org/map/vietnam/50k/
> 
> For example, nc4806-50/ is the unzipped version of nc4806-50.zip
> 
> (FYI this project is for the Vietnam Helicopter Pilot Association
> vhpa.org and the rasters are scans of Vietnam war era paper maps.)
> 
> Brian Wilson
> Corvallis OR
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: super.bash
Type: application/x-shellscript
Size: 2329 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110405/f7618f13/super.bin
From even.rouault at mines-paris.org  Tue Apr  5 14:06:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr  5 14:06:52 2011
Subject: [gdal-dev] help for including category names
In-Reply-To: <4D9B2190.2060504@meteo.fr>
References: <4D9B2190.2060504@meteo.fr>
Message-ID: <201104052006.43975.even.rouault@mines-paris.org>

Marcel,

I guess that category name is a rarely used features by GDAL users and it 
wasn't actually supported by the custom CreateCopy() implementation of the 
GTiff driver.

I've just pushed into svn trunk (r22120) a fix so that 
GTiffDataset::CreateCopy() copies the category names from the source dataset. 
But note that the geotiff/tiff format makes no provision for category names, so 
the effect of this is to copy the data in a .aux.xml file next to the geotiff 
file. The .aux.xml file is a GDAL specific format.

In the meantime, you can generate the .aux.xml file by yourself. For example :

<PAMDataset>
  <PAMRasterBand band="1">
    <CategoryNames>
      <Category>Not processed</Category>
      <Category>Cloud-free land</Category>
    </CategoryNames>
  </PAMRasterBand>
</PAMDataset>

GDAL 1.8.0 will be able to fetch the category names from it.

Another possibility to avoid the .aux.xml file would be to extend the 
capabilities of the GDAL's specific TIFFTAG_GDAL_METADATA. Currently it only 
holds dataset and rasterband level metadata, but not category names. But such 
a change would be a bit more involved. Another issue to take into account is 
that maximum size of the content that can be written in the tag is limited to 
32000 bytes.

Best regards,

Even


Le mardi 05 avril 2011 16:05:04, Marcel Derrien a ?crit :
> Hello,
> I am new with gdal, and it is my first post here.
> I have a gdal 1.8.0 installed on a cenOS Linux x86_64 ,with libtiff
> 3.9.4 and libgeotiff 1.3.0.
> I try the translation of a raster dataset to geotiff through a
> VRTRawRasterBand described in a VRT file using gdal_translate.
> gdal_translate test.vrt test.tif
> The VRT file includes a category list description that I would like to
> get in the resulting geotiff.
> The geotiff produced is correct but the only thing that is missing is
> the category names that I can't see with gdalinfo.
> It seems as if the category list was not managed, as the resulting file
> size is the same with and without the categorynames section in the VRT.
> I suspect my gdal installation or maybe I have a bad understanding of
> the way to manage this option.
> Could somebody help to find an explanation ?
> 
> gdal-config --version
> 1.8.0
> gdal-config --dep-libs
> -lsqlite3 -L/usr/lib64/lib -lexpat -lgif -ljpeg
> -L/export/util/libgeotiff-1.3.0/lib -lgeotiff
> -L/export/util/tiff-3.9.4/lib -ltiff -lpng -L/export/util/netcdf-3.6.2
> -L/export/util/netcdf-3.6.2/lib -lnetcdf -lz -lpthread -lm -lrt -ldl
> -L/usr/kerberos/lib64 -lcurl -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err
> -lresolv -ldl -lidn -lssl -lcrypto -lz
> 
> 
> gdalinfo t.tif
> 
> Driver: GTiff/GeoTIFF
> Files: t.tif
> Size is 3712, 3712
> Coordinate System is:
> PROJCS["Geostationary_Satellite",
>     GEOGCS["GCS_unnamed ellipse",
>         DATUM["D_unknown",
>             SPHEROID["Unknown",6378169,295.4880658970008]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Geostationary_Satellite"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["satellite_height",35785831],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1]]
> Origin = (-5570248.832537000067532,5570248.832537000067532)
> Pixel Size = (3000.403357000000142,-3000.403357000000142)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-5570248.833, 5570248.833)
> Lower Left  (-5570248.833,-5567248.429)
> Upper Right ( 5567248.429, 5570248.833)
> Lower Right ( 5567248.429,-5567248.429)
> Center      (   -1500.202,    1500.202)
> Band 1 Block=3712x2 Type=Byte, ColorInterp=Palette
>   Color Table (RGB with 256 entries)
>     0: 100,100,100,255
> ....
> 
> Here is the VRT file content:
> <VRTDataset rasterXSize="3712" rasterYSize="3712">
>     <GeoTransform>-5570248.832537, 3000.403357, 0.000000,
> 5570248.832537, 0.000000, -3000.403357</GeoTransform>
> 
> <SRS>PROJCS[&quot;Geostationary_Satellite&quot;,GEOGCS[&quot;GCS_unnamed
> ellipse&quot;,DATUM[&quot;D_unknown&quot;,SPHEROID[&quot;Unknown&quot;,6378
> 169,295.4880658970008]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&q
> uot;,0.0174532925199433]],PROJECTION[&quot;Geostationary_Satellite&quot;],P
> ARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;satellite_height&q
> uot;,35785831],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false
> _northing&quot;,0],UNIT[&quot;metre&quot;,1]]</SRS> <Metadata>
>     <MDI key="AREA_OR_POINT">Area</MDI>
>     </Metadata>
>     <Description>Cloud Type Layer</Description>
>     <VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
>         <ColorInterp>Palette</ColorInterp>
>             <ColorTable>
>                 <Entry c1="100" c2="100" c3="100"/>
>                 <Entry ...
>                 ...
>             </ColorTable>
>         <CategoryNames>
>             <Category>Not processed</Category>
>             <Category>Cloud-free land</Category>
>              ...
>             </CategoryNames>
>         <SourceFilename relativetoVRT="1">t.fis</SourceFilename>
>         <ImageOffset>7424</ImageOffset>
>         <PixelOffset>1</PixelOffset>
>         <LineOffset>3712</LineOffset>
>         <ByteOrder>LSB</ByteOrder>
>     </VRTRasterBand>
> </VRTDataset>
> 
> 
> 
> Thanks in advance,
> ---
> Marcel Derrien
From knutfrodesoppel at hotmail.com  Wed Apr  6 03:51:42 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed Apr  6 03:51:58 2011
Subject: [gdal-dev] GDAL drivers written in Python
Message-ID: <inh62e$8bm$2@dough.gmane.org>

Hi,

Our group is looking at the possibility to use GDAL with Python bindings 
for our work with satellite data. One limitation seems however to be 
missing/incomplete drivers, as we have no capacity to implement new 
drivers in C.

It seems however to me that the Python API allows to create GDAL 
Datasets from data which in principle could be read by any non-GDAL 
functions, e.g. PyHDF or self-made Python readers.

My question is therefore: is there in principle any important 
differences or limitations with datasets created this way, compared to 
datasets read with native GDAL drivers?

Best regards from Knut-Frode

From antonio.valentino at tiscali.it  Wed Apr  6 04:13:38 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Apr  6 04:20:24 2011
Subject: [gdal-dev] GDAL drivers written in Python
In-Reply-To: <inh62e$8bm$2@dough.gmane.org>
References: <inh62e$8bm$2@dough.gmane.org>
Message-ID: <20110406101338.5542de2b@asigrid01>

Hi Knut-Frode,

Il giorno Wed, 06 Apr 2011 09:51:42 +0200
Knut-Frode Dagestad <knutfrodesoppel@hotmail.com> ha scritto:

> Hi,
> 
> Our group is looking at the possibility to use GDAL with Python
> bindings for our work with satellite data. One limitation seems
> however to be missing/incomplete drivers, as we have no capacity to
> implement new drivers in C.

It would be interesting to know which are the missing formats and the
missing features in existing drivers.
I use GDAL Python bindings to read satellite data of SAR missions and
I'm very interested GDAL to have the best possible support for this
kind of data.
So maybe I could help in some way if you provide some more info.

> It seems however to me that the Python API allows to create GDAL 
> Datasets from data which in principle could be read by any non-GDAL 
> functions, e.g. PyHDF or self-made Python readers.

Yes, correct

> My question is therefore: is there in principle any important 
> differences or limitations with datasets created this way, compared
> to datasets read with native GDAL drivers?
> 
> Best regards from Knut-Frode

GDAL dataset are an abstraction of the real datasets on file so, once
created, there is no difference between datasets.

IMHO, also depending on the version of GDAL you, python bindings
could miss some function that is present in the C/C++ API so creating a
new dataset from scratch with the Python API could be a little harder
in some very particular case.

regards

-- 
Antonio Valentino
From knutfrodesoppel at hotmail.com  Wed Apr  6 05:58:28 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed Apr  6 05:58:42 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <20110406101338.5542de2b@asigrid01>
References: <inh62e$8bm$2@dough.gmane.org> <20110406101338.5542de2b@asigrid01>
Message-ID: <inhdg4$ihl$1@dough.gmane.org>

Thank you for useful comments, Antonio.

I agree with you that the ideal thing would be to improve the support of 
GDAL for our satellite data formats of interest. It would be great if we 
could combine efforts and get some momentum on this.

Several formats (e.g. TerraSAR-X, Envisat ASAR, MERIS and AATSR) are 
read, but not georeferenced. To my understanding this must be due to 
bugs in the drivers, as listed in some tickets (#3709, #3160)
Since Radarsat-2 is georeferenced, I assume it should also be possible 
to georeference other formats which are not projected, but have only 
many GCPs.
I tried the Alos/Palsar driver, but it did not seem to work at all. The 
drivers are also rather minimalistic, and does e.g. not read the Doppler 
Grid of Envisat ASAR. However, from your answer, I assume it is 
straightforward to read such kind of extra data with supplementary 
Python code. I am also not sure how easy it is to get support and 
geocoding for range-projected Single Look Complex data(?)
Finally, we would also ideally like to have immediate (pre release) 
support for upcoming satellites such as the ESA Sentinel satellites.

We consider a solution to use ESA Beam and NEST Java APIs for additional 
readers. But it is getting a bit messy to mix Python, C and Java in a 
multi-platform environment (Linux, Mac and Windows).

Best regards from Knut-Frode



On 06.04.2011 10:13, Antonio Valentino wrote:
> Hi Knut-Frode,
>
> Il giorno Wed, 06 Apr 2011 09:51:42 +0200
> Knut-Frode Dagestad<knutfrodesoppel@hotmail.com>  ha scritto:
>
>> Hi,
>>
>> Our group is looking at the possibility to use GDAL with Python
>> bindings for our work with satellite data. One limitation seems
>> however to be missing/incomplete drivers, as we have no capacity to
>> implement new drivers in C.
>
> It would be interesting to know which are the missing formats and the
> missing features in existing drivers.
> I use GDAL Python bindings to read satellite data of SAR missions and
> I'm very interested GDAL to have the best possible support for this
> kind of data.
> So maybe I could help in some way if you provide some more info.
>
>> It seems however to me that the Python API allows to create GDAL
>> Datasets from data which in principle could be read by any non-GDAL
>> functions, e.g. PyHDF or self-made Python readers.
>
> Yes, correct
>
>> My question is therefore: is there in principle any important
>> differences or limitations with datasets created this way, compared
>> to datasets read with native GDAL drivers?
>>
>> Best regards from Knut-Frode
>
> GDAL dataset are an abstraction of the real datasets on file so, once
> created, there is no difference between datasets.
>
> IMHO, also depending on the version of GDAL you, python bindings
> could miss some function that is present in the C/C++ API so creating a
> new dataset from scratch with the Python API could be a little harder
> in some very particular case.
>
> regards
>


From antonio.valentino at tiscali.it  Wed Apr  6 07:09:05 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Apr  6 07:09:11 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <inhdg4$ihl$1@dough.gmane.org>
References: <inh62e$8bm$2@dough.gmane.org> <20110406101338.5542de2b@asigrid01>
	<inhdg4$ihl$1@dough.gmane.org>
Message-ID: <20110406130905.39ed66c5@asigrid01>

Hi Knut-Frode,

Il giorno Wed, 06 Apr 2011 11:58:28 +0200
Knut-Frode Dagestad <knutfrodesoppel@hotmail.com> ha scritto:

> Thank you for useful comments, Antonio.
> 
> I agree with you that the ideal thing would be to improve the support
> of GDAL for our satellite data formats of interest. It would be great
> if we could combine efforts and get some momentum on this.
> 
> Several formats (e.g. TerraSAR-X, Envisat ASAR, MERIS and AATSR) are 

OK, we have more or less the same target sensors

> read, but not georeferenced. To my understanding this must be due to 
> bugs in the drivers, as listed in some tickets (#3709, #3160)
> Since Radarsat-2 is georeferenced, I assume it should also be
> possible to georeference other formats which are not projected, but
> have only many GCPs.

I'm not sure to understand. GDAL reads data from the product. If the
product is not geo-referenced you will get data that are not
geo-referenced.

In this case you could use GDAL tools to interpolate data in a
geographic grid but you need to know geographic info and/or parameters
that are stored in the product itself.

In the case of ENVISAT product (but for stripline ones #3160) you
should be able to perform the re-projection e.g. using gdalwarp with
the -tps option (I never tested it personally).

In other cases, such as complex products in slant-range projection, the
problem is by far more complex since you need to know state vectors,
Doppler parameter, etc., and GDAL do not provide, as far a I know, the
possibility to interpolate complex data.


> I tried the Alos/Palsar driver, but it did not seem to work at all.

If you find a bug please file a bug report on the GDAL issue tracker.
Also please set me in cc if the bug is related to SAR products.

> The drivers are also rather minimalistic, and does e.g. not read the
> Doppler Grid of Envisat ASAR. 

Yes, in many cases GDAL reads only a subset of the metadata available
in the product. I could contribute some code for reading additional
metadata but, for example, it is not obvious how ENVISAT Doppler Grids
should be represented in GDAL. Any hint from GDAL developers?


> However, from your answer, I assume it
> is straightforward to read such kind of extra data with supplementary 
> Python code.

No, you should use python code to read metadata directly from the
original product and then you can store them into a GDAL objects using
the SetMetadataIterm, SetGCPs, etc.

In the case of ENVISAT products you could use the pyepr library

http://pypi.python.org/pypi/pyepr

I published recently to read easily any kind of metadata associated to
ENVISAT product.

For HDF5 products you could use pytable or h5py, etc.

In other cases (Radarsat2 and TerraSAR-X) it is just a meter of parsing
an xml file.

ALOS, unfortunately, is in CEOS format so you should implement a CEOS
parser in python or file a feature request to improve the GDAL CEOS
driver (even in this case maybe I can help in some way).

> I am also not sure how easy it is to get support and 
> geocoding for range-projected Single Look Complex data(?)

See the comment above

> Finally, we would also ideally like to have immediate (pre release) 
> support for upcoming satellites such as the ESA Sentinel satellites.

This is very interesting.
Can you point me to product specifications of Sentinel data?

> We consider a solution to use ESA Beam and NEST Java APIs for
> additional readers. But it is getting a bit messy to mix Python, C
> and Java in a multi-platform environment (Linux, Mac and Windows).
> 
> Best regards from Knut-Frode
> 
> 
> 
> On 06.04.2011 10:13, Antonio Valentino wrote:
> > Hi Knut-Frode,
> >
> > Il giorno Wed, 06 Apr 2011 09:51:42 +0200
> > Knut-Frode Dagestad<knutfrodesoppel@hotmail.com>  ha scritto:
> >
> >> Hi,
> >>
> >> Our group is looking at the possibility to use GDAL with Python
> >> bindings for our work with satellite data. One limitation seems
> >> however to be missing/incomplete drivers, as we have no capacity to
> >> implement new drivers in C.
> >
> > It would be interesting to know which are the missing formats and
> > the missing features in existing drivers.
> > I use GDAL Python bindings to read satellite data of SAR missions
> > and I'm very interested GDAL to have the best possible support for
> > this kind of data.
> > So maybe I could help in some way if you provide some more info.
> >
> >> It seems however to me that the Python API allows to create GDAL
> >> Datasets from data which in principle could be read by any non-GDAL
> >> functions, e.g. PyHDF or self-made Python readers.
> >
> > Yes, correct
> >
> >> My question is therefore: is there in principle any important
> >> differences or limitations with datasets created this way, compared
> >> to datasets read with native GDAL drivers?
> >>
> >> Best regards from Knut-Frode
> >
> > GDAL dataset are an abstraction of the real datasets on file so,
> > once created, there is no difference between datasets.
> >
> > IMHO, also depending on the version of GDAL you, python bindings
> > could miss some function that is present in the C/C++ API so
> > creating a new dataset from scratch with the Python API could be a
> > little harder in some very particular case.
> >
> > regards
> >
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Antonio Valentino
From rodolfobonnin at suremptec.com.ar  Wed Apr  6 11:02:02 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Wed Apr  6 11:02:05 2011
Subject: [gdal-dev] Libgdal Compilation with MinGW
In-Reply-To: <BANLkTimm-ESLrKfYZw3jS4mEQXGCw+2fNw@mail.gmail.com>
References: <BANLkTimm-ESLrKfYZw3jS4mEQXGCw+2fNw@mail.gmail.com>
Message-ID: <BANLkTikBKv7vE_hVm4qJr4NYEEzXY4g33Q@mail.gmail.com>

Hello all,

I am trying to compile gdal using CMake with MinGW 4.4, and had the
following errors:

______________________________
[...]libkml-1.2.0/src/kml/base/file_win32.cc:3
5:19: error: xstring: No such file or directory
[...]libkml-1.2.0/src/kml/base/file_win32.cc:4
3:35: error: empty character constant
______________________________

So I changed the file_win32 , obtaining the following diff:
____________________________________
--- src/kml/base/file_win32.cc ? ? Wed Jan 13 21:16:30 2010
+++ src/kml/base/file_win32.cc ? Wed Apr ?6 10:50:27 2011
@@ -32,7 +32,6 @@
?#include "kml/base/file.h"
?#include <windows.h>
?#include <tchar.h>
-#include <xstring>
?#include <algorithm>

?namespace kmlbase {
@@ -40,7 +39,7 @@
?// Internal to the win32 file class. We need a conversion from string to
?// LPCWSTR.
?static std::wstring Str2Wstr(const string& str) {
- ?std::wstring wstr(str.length(), L'');
+ ?std::wstring wstr(str.length(), L' ');
? std::copy(str.begin(), str.end(), wstr.begin());
? return wstr;
?}

_________________________________________________

After that the library compiled OK.

This was a quick fix, and I have to check it for correctness, any
comments are welcome regarding a better way to fix the compilation
(Conditional code to check for MinGW before including xstring for
example)

Regards and thanks in advance.

--
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From marcel.derrien at meteo.fr  Wed Apr  6 11:14:46 2011
From: marcel.derrien at meteo.fr (Marcel Derrien)
Date: Wed Apr  6 11:15:08 2011
Subject: [gdal-dev] help for including category names
In-Reply-To: <201104052006.43975.even.rouault@mines-paris.org>
References: <4D9B2190.2060504@meteo.fr>
	<201104052006.43975.even.rouault@mines-paris.org>
Message-ID: <4D9C8366.3030501@meteo.fr>

Even,
Many thanks for your clear answer that helps the understanding, I will 
directly associate an .aux.xml instead of using the VRT file for 
managing category names.
I agree that avoiding the .aux.xml  would be more convenient.
Best regards,
---
Marcel


Even Rouault a ?crit :
> Marcel,
>
> I guess that category name is a rarely used features by GDAL users and it 
> wasn't actually supported by the custom CreateCopy() implementation of the 
> GTiff driver.
>
> I've just pushed into svn trunk (r22120) a fix so that 
> GTiffDataset::CreateCopy() copies the category names from the source dataset. 
> But note that the geotiff/tiff format makes no provision for category names, so 
> the effect of this is to copy the data in a .aux.xml file next to the geotiff 
> file. The .aux.xml file is a GDAL specific format.
>
> In the meantime, you can generate the .aux.xml file by yourself. For example :
>
> <PAMDataset>
>   <PAMRasterBand band="1">
>     <CategoryNames>
>       <Category>Not processed</Category>
>       <Category>Cloud-free land</Category>
>     </CategoryNames>
>   </PAMRasterBand>
> </PAMDataset>
>
> GDAL 1.8.0 will be able to fetch the category names from it.
>
> Another possibility to avoid the .aux.xml file would be to extend the 
> capabilities of the GDAL's specific TIFFTAG_GDAL_METADATA. Currently it only 
> holds dataset and rasterband level metadata, but not category names. But such 
> a change would be a bit more involved. Another issue to take into account is 
> that maximum size of the content that can be written in the tag is limited to 
> 32000 bytes.
>
> Best regards,
>
> Even
>
>
> Le mardi 05 avril 2011 16:05:04, Marcel Derrien a ??crit :
>   
>> Hello,
>> I am new with gdal, and it is my first post here.
>> I have a gdal 1.8.0 installed on a cenOS Linux x86_64 ,with libtiff
>> 3.9.4 and libgeotiff 1.3.0.
>> I try the translation of a raster dataset to geotiff through a
>> VRTRawRasterBand described in a VRT file using gdal_translate.
>> gdal_translate test.vrt test.tif
>> The VRT file includes a category list description that I would like to
>> get in the resulting geotiff.
>> The geotiff produced is correct but the only thing that is missing is
>> the category names that I can't see with gdalinfo.
>> It seems as if the category list was not managed, as the resulting file
>> size is the same with and without the categorynames section in the VRT.
>> I suspect my gdal installation or maybe I have a bad understanding of
>> the way to manage this option.
>> Could somebody help to find an explanation ?
>>
>> gdal-config --version
>> 1.8.0
>> gdal-config --dep-libs
>> -lsqlite3 -L/usr/lib64/lib -lexpat -lgif -ljpeg
>> -L/export/util/libgeotiff-1.3.0/lib -lgeotiff
>> -L/export/util/tiff-3.9.4/lib -ltiff -lpng -L/export/util/netcdf-3.6.2
>> -L/export/util/netcdf-3.6.2/lib -lnetcdf -lz -lpthread -lm -lrt -ldl
>> -L/usr/kerberos/lib64 -lcurl -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err
>> -lresolv -ldl -lidn -lssl -lcrypto -lz
>>
>>
>> gdalinfo t.tif
>>
>> Driver: GTiff/GeoTIFF
>> Files: t.tif
>> Size is 3712, 3712
>> Coordinate System is:
>> PROJCS["Geostationary_Satellite",
>>     GEOGCS["GCS_unnamed ellipse",
>>         DATUM["D_unknown",
>>             SPHEROID["Unknown",6378169,295.4880658970008]],
>>         PRIMEM["Greenwich",0],
>>         UNIT["Degree",0.017453292519943295]],
>>     PROJECTION["Geostationary_Satellite"],
>>     PARAMETER["central_meridian",0],
>>     PARAMETER["satellite_height",35785831],
>>     PARAMETER["false_easting",0],
>>     PARAMETER["false_northing",0],
>>     UNIT["Meter",1]]
>> Origin = (-5570248.832537000067532,5570248.832537000067532)
>> Pixel Size = (3000.403357000000142,-3000.403357000000142)
>> Metadata:
>>   AREA_OR_POINT=Area
>> Image Structure Metadata:
>>   INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (-5570248.833, 5570248.833)
>> Lower Left  (-5570248.833,-5567248.429)
>> Upper Right ( 5567248.429, 5570248.833)
>> Lower Right ( 5567248.429,-5567248.429)
>> Center      (   -1500.202,    1500.202)
>> Band 1 Block=3712x2 Type=Byte, ColorInterp=Palette
>>   Color Table (RGB with 256 entries)
>>     0: 100,100,100,255
>> ....
>>
>> Here is the VRT file content:
>> <VRTDataset rasterXSize="3712" rasterYSize="3712">
>>     <GeoTransform>-5570248.832537, 3000.403357, 0.000000,
>> 5570248.832537, 0.000000, -3000.403357</GeoTransform>
>>
>> <SRS>PROJCS[&quot;Geostationary_Satellite&quot;,GEOGCS[&quot;GCS_unnamed
>> ellipse&quot;,DATUM[&quot;D_unknown&quot;,SPHEROID[&quot;Unknown&quot;,6378
>> 169,295.4880658970008]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&q
>> uot;,0.0174532925199433]],PROJECTION[&quot;Geostationary_Satellite&quot;],P
>> ARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;satellite_height&q
>> uot;,35785831],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false
>> _northing&quot;,0],UNIT[&quot;metre&quot;,1]]</SRS> <Metadata>
>>     <MDI key="AREA_OR_POINT">Area</MDI>
>>     </Metadata>
>>     <Description>Cloud Type Layer</Description>
>>     <VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
>>         <ColorInterp>Palette</ColorInterp>
>>             <ColorTable>
>>                 <Entry c1="100" c2="100" c3="100"/>
>>                 <Entry ...
>>                 ...
>>             </ColorTable>
>>         <CategoryNames>
>>             <Category>Not processed</Category>
>>             <Category>Cloud-free land</Category>
>>              ...
>>             </CategoryNames>
>>         <SourceFilename relativetoVRT="1">t.fis</SourceFilename>
>>         <ImageOffset>7424</ImageOffset>
>>         <PixelOffset>1</PixelOffset>
>>         <LineOffset>3712</LineOffset>
>>         <ByteOrder>LSB</ByteOrder>
>>     </VRTRasterBand>
>> </VRTDataset>
>>
>>
>>
>> Thanks in advance,
>> ---
>> Marcel Derrien
>>     
>
>   
-------------- next part --------------
A non-text attachment was scrubbed...
Name: marcel_derrien.vcf
Type: text/x-vcard
Size: 375 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110406/433c457b/marcel_derrien.vcf
From candini at meeo.it  Wed Apr  6 12:04:10 2011
From: candini at meeo.it (canduc17)
Date: Wed Apr  6 12:04:12 2011
Subject: [gdal-dev] Catch a GDALOpen exception
Message-ID: <1302105850175-6246599.post@n2.nabble.com>

I have this incorrect code:
try
	{
	myDataset = (GDALDataset *) GDALOpen( "myimg", GA_ReadOnly );
	}
	catch(int n)
	{
		cout << "File not existent!" << endl;
                return 14;
	}


I would like to catch the exception thrown by GDALOpen if the file is not
existent and manage it in a way to return an integer that I want and not the
default 134.

How can I achieve this?

Thanks in advance!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Catch-a-GDALOpen-exception-tp6246599p6246599.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hobu.inc at gmail.com  Wed Apr  6 12:09:42 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Apr  6 12:09:48 2011
Subject: [gdal-dev] Catch a GDALOpen exception
In-Reply-To: <1302105850175-6246599.post@n2.nabble.com>
References: <1302105850175-6246599.post@n2.nabble.com>
Message-ID: <B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>


On Apr 6, 2011, at 11:04 AM, canduc17 wrote:

> I have this incorrect code:
> try
> 	{
> 	myDataset = (GDALDataset *) GDALOpen( "myimg", GA_ReadOnly );
> 	}
> 	catch(int n)
> 	{
> 		cout << "File not existent!" << endl;
>                return 14;
> 	}
> 


You need to implement your own error handler if you want GDAL to throw exceptions when it can open something.

The following example throws an error if there was a CE_Failure or CE_Fatal and merely puts out the debug message if there is debug info.

> #include <gdal.h>
> #include <stdexcept>
> #include <sstream>
> #include <iostream>
> void CPL_STDCALL HobusGDALErrorHandler(CPLErr eErrClass, int err_no, const char *msg);
> 
> void CPL_STDCALL HobusGDALErrorHandler(CPLErr eErrClass, int err_no, const char *msg)
> {
>     std::ostringstream oss;
>     
>     if (eErrClass == CE_Failure || eErrClass == CE_Fatal) {
>         oss <<"GDAL Failure number=" << err_no << ": " << msg;
>         throw exception(oss.str());
>     } else if (eErrClass == CE_Debug) {
>         std::cout << "GDAL Debug: " << msg << std::endl;
>     } else {
>         return;
>     }
> }

Hope this helps,

Howard
From even.rouault at mines-paris.org  Wed Apr  6 13:53:22 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 13:53:34 2011
Subject: [gdal-dev] Catch a GDALOpen exception
In-Reply-To: <B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>
References: <1302105850175-6246599.post@n2.nabble.com>
	<B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>
Message-ID: <201104061953.22936.even.rouault@mines-paris.org>

Le mercredi 06 avril 2011 18:09:42, Howard Butler a ?crit :
> On Apr 6, 2011, at 11:04 AM, canduc17 wrote:
> > I have this incorrect code:
> > try
> > 
> > 	{
> > 	myDataset = (GDALDataset *) GDALOpen( "myimg", GA_ReadOnly );
> > 	}
> > 	catch(int n)
> > 	{
> > 	
> > 		cout << "File not existent!" << endl;
> > 		
> >                return 14;
> > 	
> > 	}

This cannot work. The C (and C++) API of GDAL doesn't throw C++ exceptions.

> 
> You need to implement your own error handler if you want GDAL to throw
> exceptions when it can open something.

I would recommand *against* doing that. Throwing exceptions from the GDAL 
error handler can lead to memory leaks and/or file descriptor leaks because the 
GDAL drivers will not be able to release memory/file descriptors (there's no 
guarantee that the GDAL error is emitted before the cleanup of ressources has 
been done).

You can simply test that the handle returned by GDALOpen() is not NULL. And 
you can also call CPLGetLastErrorMsg() / CPLGetLastErrorType()  after the 
GDALOpen() call.
Or If you really want to use your own error handler, you can use it to store 
the error into some list for example and examine it afterwards.

> 
> The following example throws an error if there was a CE_Failure or CE_Fatal
> and merely puts out the debug message if there is debug info.
> 
> > #include <gdal.h>
> > #include <stdexcept>
> > #include <sstream>
> > #include <iostream>
> > void CPL_STDCALL HobusGDALErrorHandler(CPLErr eErrClass, int err_no,
> > const char *msg);
> > 
> > void CPL_STDCALL HobusGDALErrorHandler(CPLErr eErrClass, int err_no,
> > const char *msg) {
> > 
> >     std::ostringstream oss;
> >     
> >     if (eErrClass == CE_Failure || eErrClass == CE_Fatal) {
> >     
> >         oss <<"GDAL Failure number=" << err_no << ": " << msg;
> >         throw exception(oss.str());
> >     
> >     } else if (eErrClass == CE_Debug) {
> >     
> >         std::cout << "GDAL Debug: " << msg << std::endl;
> >     
> >     } else {
> >     
> >         return;
> >     
> >     }
> > 
> > }
> 
> Hope this helps,
> 
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Apr  6 14:21:45 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 14:21:56 2011
Subject: [gdal-dev] GDAL drivers written in Python
In-Reply-To: <inh62e$8bm$2@dough.gmane.org>
References: <inh62e$8bm$2@dough.gmane.org>
Message-ID: <201104062021.45540.even.rouault@mines-paris.org>

Le mercredi 06 avril 2011 09:51:42, Knut-Frode Dagestad a ?crit :
> Hi,
> 
> Our group is looking at the possibility to use GDAL with Python bindings
> for our work with satellite data. One limitation seems however to be
> missing/incomplete drivers, as we have no capacity to implement new
> drivers in C.
> 
> It seems however to me that the Python API allows to create GDAL
> Datasets from data which in principle could be read by any non-GDAL
> functions, e.g. PyHDF or self-made Python readers.
> 
> My question is therefore: is there in principle any important
> differences or limitations with datasets created this way, compared to
> datasets read with native GDAL drivers?

You cannot write a regular GDAL driver in Python or in any other binding 
language (*). They have to be written in C++ 

You can certainly write a (non-GDAL) reader in Python, but of course, you 
won't be able to benefit from the GDAL API with the "dataset" returned by your 
reader, or using them in software that use the GDAL API.

There are possible workarounds if the base GDAL driver recognizes the imagery 
but not the georeferencing. In that case, you can try adding .aux.xml files 
(might not work in all cases. really depend if the driver fallbacks to the PAM 
mechanism), or wrapping the imagery into a VRT file to add the georeferencing 
(will work in all cases at the expense of a small overhead, generally 
unnoticeable)

Of course, the best for the good of the GDAL community and project would be to 
contribute (or contract someone) to improving the existing drivers if they 
have defects or need improvements.

Best regards,

Even

(*) It is not currently possible. Technically I imagine this could be possible 
since most languages have ways to invoke them from C/C++. I know for sure this 
is possible for Python and Java. But it would be quite involved to add the 
generic glue sufficient to write an arbitrary driver in Python/Java/etc.. The 
technical challenge aside, I'm also wondering if the project really wants to 
go into that direction (it would make the deployment of a GDAL installation 
quite complicated), although I've a bit crossed that line recently by adding 
the (optional) OGR MDB driver that relies on a Java lib for doing the "hard 
work" (see http://gdal.org/ogr/drv_mdb.html). But this still remains a regular 
OGR C++ driver which happens, as a detail of implementation, to invoke Java, 
to be opposed to a pure Java driver.

> 
> Best regards from Knut-Frode
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Apr  6 14:25:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 14:25:24 2011
Subject: [gdal-dev] Libgdal Compilation with MinGW
In-Reply-To: <BANLkTikBKv7vE_hVm4qJr4NYEEzXY4g33Q@mail.gmail.com>
References: <BANLkTimm-ESLrKfYZw3jS4mEQXGCw+2fNw@mail.gmail.com>
	<BANLkTikBKv7vE_hVm4qJr4NYEEzXY4g33Q@mail.gmail.com>
Message-ID: <201104062025.12908.even.rouault@mines-paris.org>

Looks to me as if it is a problem with libkml compilation, not GDAL... So a 
libkml mailing list might be a better place to ask advice and/or report bugs.
From rodolfobonnin at suremptec.com.ar  Wed Apr  6 14:27:10 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Wed Apr  6 14:27:13 2011
Subject: [gdal-dev] Libgdal Compilation with MinGW
In-Reply-To: <201104062025.12908.even.rouault@mines-paris.org>
References: <BANLkTimm-ESLrKfYZw3jS4mEQXGCw+2fNw@mail.gmail.com>
	<BANLkTikBKv7vE_hVm4qJr4NYEEzXY4g33Q@mail.gmail.com>
	<201104062025.12908.even.rouault@mines-paris.org>
Message-ID: <BANLkTimjfn=J6D1LLkKmrfZsKsqwbxYF2A@mail.gmail.com>

I apologize, I've suscribed to many mailing lists the past days, and I
confused the destination.

Regards.

2011/4/6 Even Rouault <even.rouault@mines-paris.org>:
> Looks to me as if it is a problem with libkml compilation, not GDAL... So a
> libkml mailing list might be a better place to ask advice and/or report bugs.
>



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From mateusz at loskot.net  Wed Apr  6 15:34:42 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  6 15:34:46 2011
Subject: [gdal-dev] Catch a GDALOpen exception
In-Reply-To: <201104061953.22936.even.rouault@mines-paris.org>
References: <1302105850175-6246599.post@n2.nabble.com>
	<B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>
	<201104061953.22936.even.rouault@mines-paris.org>
Message-ID: <6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>

Even Rouault wrote:
> Le mercredi 06 avril 2011 18:09:42, Howard Butler a ?crit :
>> You need to implement your own error handler if you want GDAL to throw
>> exceptions when it can open something.
>
> I would recommand *against* doing that. Throwing exceptions from the GDAL
> error handler can lead to memory leaks and/or file descriptor leaks
> because the GDAL drivers will not be able to release memory/file
> descriptors

Even,

This is interesting. Could you give example?
How is checking if GDALOpen returned NULL and prematurely exiting
different to throwing exception?

It should be possible to react on GDAL errors and throw exception
as long as certain cleanup is performed.

> (there's no guarantee that the GDAL error is emitted
> before the cleanup of ressources has been done).

What error emission you mean? Returning NULL? Call to abort()?

I have written code intensively throwing exceptions around GDAL,
even CPLErr is used one of exception type. Code is well-tested
and I haven't noticed problems.

Hobu's solution might be incomplete, but gives rough idea which is valid
if used properly. In any case, details are needed to be able to judge.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From even.rouault at mines-paris.org  Wed Apr  6 15:52:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 15:52:53 2011
Subject: [gdal-dev] Catch a GDALOpen exception
In-Reply-To: <6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>
References: <1302105850175-6246599.post@n2.nabble.com>
	<201104061953.22936.even.rouault@mines-paris.org>
	<6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>
Message-ID: <201104062152.41688.even.rouault@mines-paris.org>

> This is interesting. Could you give example?
> How is checking if GDALOpen returned NULL and prematurely exiting
> different to throwing exception?

Mateusz,

The ::Open() method of GDAL drivers is supposed to make all necessary 
cleanups, even in case of errors, before returning NULL.

But if you install a custom CPL error handler that throws a C++ exception, and 
a CPLError() is emitted in GDAL driver code, it will directly unwind to the 
matching catch( xx ) { } in your code. This might not be a big deal in most 
situations, but in theory, there could be cases where some cleanups haven't 
been yet done.

... After a few seconds of digging, here's an example (and I'm sure there are 
many other similar cases). Let's look at the Open() method of the BMP driver

You have :

    if  (poDS->nRasterXSize <= 0 || poDS->nRasterYSize <= 0)
    {
        CPLError( CE_Failure, CPLE_AppDefined, 
                  "Invalid dimensions : %d x %d", 
                  poDS->nRasterXSize, poDS->nRasterYSize); 
        delete poDS;
        return NULL;
    }

So if in your custom error handler you throw a C++ exception, the dataset will 
not be destroyed, which means both a memory leak and a file descriptor leak in 
that instance.

> 
> It should be possible to react on GDAL errors and throw exception
> as long as certain cleanup is performed.
> 
> > (there's no guarantee that the GDAL error is emitted
> > before the cleanup of ressources has been done).
> 
> What error emission you mean? Returning NULL? Call to abort()?

An error emitted by CPLError().

> 
> I have written code intensively throwing exceptions around GDAL,
> even CPLErr is used one of exception type. Code is well-tested
> and I haven't noticed problems.
> 
> Hobu's solution might be incomplete, but gives rough idea which is valid
> if used properly. In any case, details are needed to be able to judge.
> 
> Best regards,
From mateusz at loskot.net  Wed Apr  6 16:15:12 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  6 16:15:16 2011
Subject: [gdal-dev] Catch a GDALOpen exception
In-Reply-To: <201104062152.41688.even.rouault@mines-paris.org>
References: <1302105850175-6246599.post@n2.nabble.com>
	<201104061953.22936.even.rouault@mines-paris.org>
	<6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>
	<201104062152.41688.even.rouault@mines-paris.org>
Message-ID: <2643015ebb89568db15950cdec1dc683.squirrel@loskot.net>

Even Rouault wrote:
> Mateusz Loskot wrote:
>> This is interesting. Could you give example?
>> How is checking if GDALOpen returned NULL and prematurely exiting
>> different to throwing exception?
>
> The ::Open() method of GDAL drivers is supposed to make all necessary
> cleanups, even in case of errors, before returning NULL.
>
> But if you install a custom CPL error handler that throws a C++ exception,
> and a CPLError() is emitted in GDAL driver code, it will directly
> unwind to the matching catch( xx ) { } in your code.
> [...]
> Let's look at the Open() method of the BMP driver
>
> You have :
>
>     if  (poDS->nRasterXSize <= 0 || poDS->nRasterYSize <= 0)
>     {
>         CPLError( CE_Failure, CPLE_AppDefined,
>                   "Invalid dimensions : %d x %d",
>                   poDS->nRasterXSize, poDS->nRasterYSize);
>         delete poDS;
>         return NULL;
>     }

Even,

Yes, you are right. I missed you mean the CPLError. In case of custom
throwing handler it will jump out of the context. I do throw exceptions
reacting on GDAL errors, but not from within GDAL internal context,
like the custom handler.

>> It should be possible to react on GDAL errors and throw exception
>> as long as certain cleanup is performed.
>>
>> > (there's no guarantee that the GDAL error is emitted
>> > before the cleanup of ressources has been done).
>>
>> What error emission you mean? Returning NULL? Call to abort()?
>
> An error emitted by CPLError().

Yes, that's what I was missing.

But, now this "before" should read "after", I think:
"no guarantee that the GDAL error is emitted after the cleanup of
ressources has been done", so leaks possible.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From even.rouault at mines-paris.org  Wed Apr  6 16:34:35 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 16:34:48 2011
Subject: [gdal-dev] Catch a GDALOpen exception
In-Reply-To: <2643015ebb89568db15950cdec1dc683.squirrel@loskot.net>
References: <1302105850175-6246599.post@n2.nabble.com>
	<201104062152.41688.even.rouault@mines-paris.org>
	<2643015ebb89568db15950cdec1dc683.squirrel@loskot.net>
Message-ID: <201104062234.35783.even.rouault@mines-paris.org>

> Even,
> 
> Yes, you are right. I missed you mean the CPLError. In case of custom
> throwing handler it will jump out of the context. I do throw exceptions
> reacting on GDAL errors, but not from within GDAL internal context,
> like the custom handler.

Yes, of course you are free to emit C++ exceptions in your code. The only 
unsafe part is when you do this in a GDAL custom error handler, during a call 
of a GDAL function that expects that the execution will continue to the 
instruction following the CPLError() call ...

I see that http://gdal.org/cpl__error_8h.html#74d0e649d58180e621540bf73b58e4a2 
states that "If the error handler function is passed a CE_Fatal class error 
and returns, then CPLError() will call abort(). Applications wanting to 
interrupt this fatal behaviour will have to use longjmp(), or a C++ exception 
to indirectly exit the function.". This is technically true, but CE_Fatal is 
really rarely used, since aborting isn't a good idea for a library. But anyway 
this doesn't specify what is allowed/recommanded in the CE_Warning or 
CE_Failure cases. Perhaps some words would be needed to discourage using 
longjmp() or throwing C++ exceptions.

Ah, and GDALOpen() isn't the only case where throwing a C++ exception in the 
custom error handler is a bad idea. Doing that in a RasterIO() call would lead 
to similar issues (block cache leaks and/or locks not being released).

> 
> >> It should be possible to react on GDAL errors and throw exception
> >> as long as certain cleanup is performed.
> >> 
> >> > (there's no guarantee that the GDAL error is emitted
> >> > before the cleanup of ressources has been done).
> >> 
> >> What error emission you mean? Returning NULL? Call to abort()?
> > 
> > An error emitted by CPLError().
> 
> Yes, that's what I was missing.
> 
> But, now this "before" should read "after", I think:
> "no guarantee that the GDAL error is emitted after the cleanup of
> ressources has been done", so leaks possible.

Yes sorry for the bad wording : it should indeed read "after".

> 
> Best regards,
From Jennings.Jay at geoeye.com  Wed Apr  6 16:51:17 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Wed Apr  6 16:52:12 2011
Subject: [gdal-dev] Geometry.ExportToWKT : numeric precision ?
Message-ID: <44EADB1AC2F19449B528A17643F417B9A2F8F10321@MS1.geoeye.com>

Hello list,
Does anyone know of a way to set the numeric precision on a Geometry.ExportToWKT() call ?   For the SRS, we are using EPSG:4326 (WGS-84) so the multipolygon coordinates are in latitude/longitude, and most of the coordinate strings seem to carry 15 digits past the decimal point !!   For our needs, 7 or 8 digits would be sufficient, so this seems wasteful, especially when the string is stored in a database.  I examined the OGR documentation but I don't see any variation of ExportToWKT nor any other means of setting the numeric precision.

I estimate using 7 digits of precision instead of 15 could reduce total storage by about 40%.  I realize I could post-process the string produced by ExportToWKT() to reduce all coordinates to the desired precision.  But did I miss anything in OGR capabilities ?

BTW we are using GDAL/OGR 1.8.0 with C# bindings.

Jay Jennings
GeoEye, Inc.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110406/c0bef52f/attachment.html
From even.rouault at mines-paris.org  Wed Apr  6 17:04:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 17:04:41 2011
Subject: [gdal-dev] Geometry.ExportToWKT : numeric precision ?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F8F10321@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F8F10321@MS1.geoeye.com>
Message-ID: <201104062304.30842.even.rouault@mines-paris.org>

Le mercredi 06 avril 2011 22:51:17, Jay Jennings a ?crit :
> Hello list,
> Does anyone know of a way to set the numeric precision on a
> Geometry.ExportToWKT() call ?   For the SRS, we are using EPSG:4326
> (WGS-84) so the multipolygon coordinates are in latitude/longitude, and
> most of the coordinate strings seem to carry 15 digits past the decimal
> point !!   For our needs, 7 or 8 digits would be sufficient, so this seems
> wasteful, especially when the string is stored in a database.  I examined
> the OGR documentation but I don't see any variation of ExportToWKT nor any
> other means of setting the numeric precision.
> 
> I estimate using 7 digits of precision instead of 15 could reduce total
> storage by about 40%.  I realize I could post-process the string produced
> by ExportToWKT() to reduce all coordinates to the desired precision.  But
> did I miss anything in OGR capabilities ?
> 
> BTW we are using GDAL/OGR 1.8.0 with C# bindings.

No, there's no way of specifying the number of digits. However if you can 
afford patching and recompiling the code, it is a trivial change.

You could just change the following definition in ogr/ogr_p.h

void OGRFormatDouble( char *pszBuffer, int nBufferLen, double dfVal, char 
chDecimalSep, int nPrecision = 15 );

If you need a value that can be configured, you might instead 
changeOGRMakeWktCoordinate() in ogr/ogrutils.cpp

Index: ogr/ogrutils.cpp
===================================================================
--- ogr/ogrutils.cpp	(r?vision 22117)
+++ ogr/ogrutils.cpp	(copie de travail)
@@ -176,6 +176,8 @@
 
     int nLenX, nLenY;
 
+    int nPrecision = atoi(CPLGetConfigOption("OGR_WKT_PRECISION", "15"));
+
     if( x == (int) x && y == (int) y )
     {
         snprintf( szX, bufSize, "%d", (int) x );
@@ -183,8 +185,8 @@
     }
     else
     {
-        OGRFormatDouble( szX, bufSize, x, '.' );
-        OGRFormatDouble( szY, bufSize, y, '.' );
+        OGRFormatDouble( szX, bufSize, x, '.', nPrecision );
+        OGRFormatDouble( szY, bufSize, y, '.', nPrecision );
     }
 
     nLenX = strlen(szX);
@@ -198,7 +200,7 @@
         }
         else
         {
-            OGRFormatDouble( szZ, bufSize, z, '.' );
+            OGRFormatDouble( szZ, bufSize, z, '.', nPrecision );
         }
     }



> 
> Jay Jennings
> GeoEye, Inc.
From Jennings.Jay at geoeye.com  Wed Apr  6 17:58:27 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Wed Apr  6 17:58:17 2011
Subject: [gdal-dev] Geometry.ExportToWKT : numeric precision ?
In-Reply-To: <201104062304.30842.even.rouault@mines-paris.org>
References: <44EADB1AC2F19449B528A17643F417B9A2F8F10321@MS1.geoeye.com>
	<201104062304.30842.even.rouault@mines-paris.org>
Message-ID: <44EADB1AC2F19449B528A17643F417B9A2F8F103B2@MS1.geoeye.com>

Even, thanks for the excellent info.  I think we may pursue the first option.

BTW setting the default precision to (for example) 8 instead of 15 would increase the chance of consecutive identical coordinates in the output string. Do you think ExportToWKT would be smart enough to condense to a single coordinate in such a case ?



-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday, April 06, 2011 5:05 PM
To: gdal-dev@lists.osgeo.org
Cc: Jay Jennings
Subject: Re: [gdal-dev] Geometry.ExportToWKT : numeric precision ?

Le mercredi 06 avril 2011 22:51:17, Jay Jennings a ?crit :
> Hello list,
> Does anyone know of a way to set the numeric precision on a
> Geometry.ExportToWKT() call ?   For the SRS, we are using EPSG:4326
> (WGS-84) so the multipolygon coordinates are in latitude/longitude, and
> most of the coordinate strings seem to carry 15 digits past the decimal
> point !!   For our needs, 7 or 8 digits would be sufficient, so this seems
> wasteful, especially when the string is stored in a database.  I examined
> the OGR documentation but I don't see any variation of ExportToWKT nor any
> other means of setting the numeric precision.
> 
> I estimate using 7 digits of precision instead of 15 could reduce total
> storage by about 40%.  I realize I could post-process the string produced
> by ExportToWKT() to reduce all coordinates to the desired precision.  But
> did I miss anything in OGR capabilities ?
> 
> BTW we are using GDAL/OGR 1.8.0 with C# bindings.

No, there's no way of specifying the number of digits. However if you can 
afford patching and recompiling the code, it is a trivial change.

You could just change the following definition in ogr/ogr_p.h

void OGRFormatDouble( char *pszBuffer, int nBufferLen, double dfVal, char 
chDecimalSep, int nPrecision = 15 );

If you need a value that can be configured, you might instead 
changeOGRMakeWktCoordinate() in ogr/ogrutils.cpp

Index: ogr/ogrutils.cpp
===================================================================
--- ogr/ogrutils.cpp	(r?vision 22117)
+++ ogr/ogrutils.cpp	(copie de travail)
@@ -176,6 +176,8 @@
 
     int nLenX, nLenY;
 
+    int nPrecision = atoi(CPLGetConfigOption("OGR_WKT_PRECISION", "15"));
+
     if( x == (int) x && y == (int) y )
     {
         snprintf( szX, bufSize, "%d", (int) x );
@@ -183,8 +185,8 @@
     }
     else
     {
-        OGRFormatDouble( szX, bufSize, x, '.' );
-        OGRFormatDouble( szY, bufSize, y, '.' );
+        OGRFormatDouble( szX, bufSize, x, '.', nPrecision );
+        OGRFormatDouble( szY, bufSize, y, '.', nPrecision );
     }
 
     nLenX = strlen(szX);
@@ -198,7 +200,7 @@
         }
         else
         {
-            OGRFormatDouble( szZ, bufSize, z, '.' );
+            OGRFormatDouble( szZ, bufSize, z, '.', nPrecision );
         }
     }



> 
> Jay Jennings
> GeoEye, Inc.
From even.rouault at mines-paris.org  Wed Apr  6 18:06:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 18:06:37 2011
Subject: [gdal-dev] Geometry.ExportToWKT : numeric precision ?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F8F103B2@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F8F10321@MS1.geoeye.com>
	<201104062304.30842.even.rouault@mines-paris.org>
	<44EADB1AC2F19449B528A17643F417B9A2F8F103B2@MS1.geoeye.com>
Message-ID: <201104070006.28591.even.rouault@mines-paris.org>

Le mercredi 06 avril 2011 23:58:27, Jay Jennings a ?crit :
> Even, thanks for the excellent info.  I think we may pursue the first
> option.
> 
> BTW setting the default precision to (for example) 8 instead of 15 would
> increase the chance of consecutive identical coordinates in the output
> string. Do you think ExportToWKT would be smart enough to condense to a
> single coordinate in such a case ?
> 

No, ExportToWKT() is just plain stupid ;-) I haven't checked the OGC simple 
feature spec, but I think that nothing prevents the user from specifying 2 
consecutive identical points in a linestring.
From vishal.mehta at sei-us.org  Wed Apr  6 18:39:59 2011
From: vishal.mehta at sei-us.org (Vishal Mehta)
Date: Wed Apr  6 18:50:36 2011
Subject: [gdal-dev] ogr2ogr: problems converting from shapefile to kml
Message-ID: <9961B237F2DEEF4CBC2CF7E885151AD41CF0298521@MAILSC005.mail.lan>

Hi all,

I'm having some trouble with a simple conversion from shapefile to kml.
Description
1. I need to have a points file in kml that is is EPSG 3857 (the mercator that Google uses)
2. I have a points file in both shapefile as well as kml format, in EPSG 4326
3. Here are the things i tried using ogr2ogr - all failed (in all cases except first, result was a kml file in EPSG 4326

a. projecting from kml (in 4326) to kml (in 3857) : result is warning message with no file generated
vishal@SEI-Davis:~/Bangalore$ ogr2ogr -t_srs EPSG:3857 borewells_3857 borewells.kml
Warning 6: Normalized/laundered field name: 'Description' to 'Descriptio'

b. projecting the original shp (4326) to shp (3857), then transforming the  shp (3857) to kml(3857)
- here, in the first step the projection occurred, but the shp had no SRS defined(!)
- so i assigned an srs to the projected shp creating a new shp

vishal@SEI-Davis:~/Bangalore$ ogr2ogr -s_srs EPSG:3857 -t_srs EPSG:3857 vectors/borewells_proj.shp vectors/borewells_proj2.shp
vishal@SEI-Davis:~/Bangalore$ ogrinfo -al vectors/borewells_proj2.shp |head -35
INFO: Open of `vectors/borewells_proj2.shp'
      using driver `ESRI Shapefile' successful.

Layer name: borewells_proj2
Geometry: Point
Feature Count: 472
Extent: (8631985.036287, 1453323.352994) - (8640606.797279, 1460268.097365)
Layer SRS WKT:
PROJCS["WGS_84_Pseudo_Mercator",
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_1984",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1],
    PARAMETER["latitude_of_origin",0.0]]
UTM_X_: Real (16.6)
UTM_Y_: Real (16.6)
Code_No: String (254.0)
Water_Leve: Real (16.6)
OGRFeature(borewells_proj2):0
  UTM_X_ (Real) =    779330.000000
  UTM_Y_ (Real) =   1437291.000000
  Code_No (String) = BN1
  Water_Leve (Real) =         6.550000
  POINT (8635605.072968550026417 1458434.537971410667524)
...

- then i tried converting borewells_proj2.shp to kml
ogr2ogr -f KML borewells_proj2.kml vectors/borewells_proj2.shp

- but, the kml file is STILL in EPSG 4326 and is also missing the Z field

vishal@SEI-Davis:~/Bangalore$ ogrinfo -al borewells_proj2.kml |head -35
Had to open data source read-only.
INFO: Open of `borewells_proj2.kml'
      using driver `KML' successful.

Layer name: borewells_proj2
Geometry: Point
Feature Count: 472
Extent: (77.542441, 13.028161) - (77.619892, 13.089322)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Name: String (0.0)
Description: String (0.0)
OGRFeature(borewells_proj2):0
  Name (String) = 
  Description (String) = 
  POINT (77.574960246677222 13.073175653949869)
...

Help?
Vishal
From even.rouault at mines-paris.org  Wed Apr  6 19:02:25 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  6 19:02:32 2011
Subject: [gdal-dev] ogr2ogr: problems converting from shapefile to kml
In-Reply-To: <9961B237F2DEEF4CBC2CF7E885151AD41CF0298521@MAILSC005.mail.lan>
References: <9961B237F2DEEF4CBC2CF7E885151AD41CF0298521@MAILSC005.mail.lan>
Message-ID: <201104070102.26008.even.rouault@mines-paris.org>

Le jeudi 07 avril 2011 00:39:59, Vishal Mehta a ?crit :
> Hi all,
> 
> I'm having some trouble with a simple conversion from shapefile to kml.
> Description
> 1. I need to have a points file in kml that is is EPSG 3857 (the mercator
> that Google uses)

I'm afraid that you are loosing your time. KML coordinates must be expressed 
in EPSG:4326 per the spec.

See http://code.google.com/intl/fr/apis/kml/documentation/kmlreference.html 
and specifically :

"""<Location>
    Specifies the exact coordinates of the Model's origin in latitude, 
longitude, and altitude. Latitude and longitude measurements are standard lat-
lon projection with WGS84 datum. """

This is also reminded in the OGR KML doc : see 
http://gdal.org/ogr/drv_kml.html
From jmckenna at gatewaygeomatics.com  Wed Apr  6 19:30:41 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed Apr  6 19:30:45 2011
Subject: [gdal-dev] ogr2ogr: problems converting from shapefile to kml
In-Reply-To: <201104070102.26008.even.rouault@mines-paris.org>
References: <9961B237F2DEEF4CBC2CF7E885151AD41CF0298521@MAILSC005.mail.lan>
	<201104070102.26008.even.rouault@mines-paris.org>
Message-ID: <4D9CF7A1.6090907@gatewaygeomatics.com>

On 11-04-06 8:02 PM, Even Rouault wrote:
> I'm afraid that you are loosing your time. KML coordinates must be expressed
> in EPSG:4326 per the spec.
>
> See http://code.google.com/intl/fr/apis/kml/documentation/kmlreference.html
> and specifically :

Just for the record, the actual (software-independent) KML spec is found 
on the OGC website: 
http://portal.opengeospatial.org/modules/admin/license_agreement.php?suppressHeaders=0&access_license_id=3&target=http://portal.opengeospatial.org/files/?artifact_id=27810


-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From vishal.mehta at sei-us.org  Wed Apr  6 19:34:39 2011
From: vishal.mehta at sei-us.org (Vishal Mehta)
Date: Wed Apr  6 19:34:48 2011
Subject: [gdal-dev] ogr2ogr: problems converting from shapefile to kml
In-Reply-To: <201104070102.26008.even.rouault@mines-paris.org>
References: <9961B237F2DEEF4CBC2CF7E885151AD41CF0298521@MAILSC005.mail.lan>
	<201104070102.26008.even.rouault@mines-paris.org>
Message-ID: <9961B237F2DEEF4CBC2CF7E885151AD41CF032F8C7@MAILSC005.mail.lan>

Thanks Even,
I was trying to overlay the kml on top of my crowdmap which uses OpenStreetMaps (which is in EPSG 900913 or 3857) as baselayer. When my kml did not appear, I thought I had to reproject it to the projection of the baselayer..

Looks like the problem lies elsewhere - maybe the ogr2ogr-output kml is missing a scale or size tag for the points...or something like that

best,
Vishal
 
-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday, April 06, 2011 4:02 PM
To: gdal-dev@lists.osgeo.org
Cc: Vishal Mehta
Subject: Re: [gdal-dev] ogr2ogr: problems converting from shapefile to kml

Le jeudi 07 avril 2011 00:39:59, Vishal Mehta a ?crit :
> Hi all,
> 
> I'm having some trouble with a simple conversion from shapefile to kml.
> Description
> 1. I need to have a points file in kml that is is EPSG 3857 (the mercator
> that Google uses)

I'm afraid that you are loosing your time. KML coordinates must be expressed 
in EPSG:4326 per the spec.

See http://code.google.com/intl/fr/apis/kml/documentation/kmlreference.html 
and specifically :

"""<Location>
    Specifies the exact coordinates of the Model's origin in latitude, 
longitude, and altitude. Latitude and longitude measurements are standard lat-
lon projection with WGS84 datum. """

This is also reminded in the OGR KML doc : see 
http://gdal.org/ogr/drv_kml.html
From candini at meeo.it  Thu Apr  7 03:04:44 2011
From: candini at meeo.it (canduc17)
Date: Thu Apr  7 03:04:46 2011
Subject: [gdal-dev] Re: Catch a GDALOpen exception
In-Reply-To: <201104062234.35783.even.rouault@mines-paris.org>
References: <1302105850175-6246599.post@n2.nabble.com>
	<B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>
	<201104061953.22936.even.rouault@mines-paris.org>
	<6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>
	<201104062152.41688.even.rouault@mines-paris.org>
	<2643015ebb89568db15950cdec1dc683.squirrel@loskot.net>
	<201104062234.35783.even.rouault@mines-paris.org>
Message-ID: <1302159884448-6248874.post@n2.nabble.com>

Ok. So if I have well understood the most safe thing to do is the following:
myDataset = (GDALDataset *) GDALOpen( "myFile.tif", GA_ReadOnly );
	if(myDataset == NULL )
	{
		return 14;
	}

Indeed it works and I obtain 14 as returning value of my program...

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Catch-a-GDALOpen-exception-tp6246599p6248874.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From goocreations at gmail.com  Thu Apr  7 04:26:44 2011
From: goocreations at gmail.com (Goo Creations)
Date: Thu Apr  7 04:26:45 2011
Subject: [gdal-dev] Can't read transformation coefficients from tiff
Message-ID: <BANLkTi=OTuP4xWizzpHOzrPyHzu6kjyCKA@mail.gmail.com>

Hi all

I tried to read the transformation coefficients by using
GDALDataset::GetGeoTransform. This function however returned CE_Failure, so
i assume that the values are not stored in the metadat.
When I view the image, the image is rotated. There is no world file or
anything that could cause the rotation.

So my question: If these values are not stored in the metadata, how does
GDAL handle the rotation, pixel size, etc?

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110407/a272892d/attachment.html
From chaitanya.ch at gmail.com  Thu Apr  7 04:34:49 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr  7 04:34:51 2011
Subject: [gdal-dev] Can't read transformation coefficients from tiff
In-Reply-To: <BANLkTi=OTuP4xWizzpHOzrPyHzu6kjyCKA@mail.gmail.com>
References: <BANLkTi=OTuP4xWizzpHOzrPyHzu6kjyCKA@mail.gmail.com>
Message-ID: <BANLkTimPij8UitXXFj6vEuKCrrox7DdY=g@mail.gmail.com>

Chris,

What did you use to view the image? Were you able to read any other Geo
related data with that?

On Thu, Apr 7, 2011 at 1:56 PM, Goo Creations <goocreations@gmail.com>wrote:

> Hi all
>
> I tried to read the transformation coefficients by using
> GDALDataset::GetGeoTransform. This function however returned CE_Failure, so
> i assume that the values are not stored in the metadat.
> When I view the image, the image is rotated. There is no world file or
> anything that could cause the rotation.
>
> So my question: If these values are not stored in the metadata, how does
> GDAL handle the rotation, pixel size, etc?
>
> Chris
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110407/0c3e39b9/attachment.html
From knutfrodesoppel at hotmail.com  Thu Apr  7 05:50:04 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Thu Apr  7 05:50:23 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <201104062021.45540.even.rouault@mines-paris.org>
References: <inh62e$8bm$2@dough.gmane.org>
	<201104062021.45540.even.rouault@mines-paris.org>
Message-ID: <ink1cd$1qj$1@dough.gmane.org>

Hi Even,

On 06.04.2011 20:21, Even Rouault wrote:
> You can certainly write a (non-GDAL) reader in Python, but of course, you
> won't be able to benefit from the GDAL API with the "dataset" returned by your
> reader, or using them in software that use the GDAL API.

But if I use the GDAL API to create a GDAL Dataset and then insert a 
matrix of data (read with non-GDAL code), and further add some 
georeferencing or tie-points, it seems to me that I then can utilize 
GDAL API functionality for e.g. reprojecting, subsetting and exporting, 
just the same way as if it was read with a GDAL-driver?

> There are possible workarounds if the base GDAL driver recognizes the imagery
> but not the georeferencing. In that case, you can try adding .aux.xml files
> (might not work in all cases. really depend if the driver fallbacks to the PAM
> mechanism), or wrapping the imagery into a VRT file to add the georeferencing
> (will work in all cases at the expense of a small overhead, generally
> unnoticeable)

Thank you for useful suggestions, I will look into these features.

> Of course, the best for the good of the GDAL community and project would be to
> contribute (or contract someone) to improving the existing drivers if they
> have defects or need improvements.

I agree this is ideal. Since we must focus on downstream applications 
(geophysical algorithms) we cannot dig too deep into the core driver 
programming. But hopefully it is still manageable, it is anyway good to 
see that Antonio has very similar needs and interests as our group.

Best regards from Knut-Frode

From chaitanya.ch at gmail.com  Thu Apr  7 05:51:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr  7 05:51:22 2011
Subject: [gdal-dev] Can't read transformation coefficients from tiff
In-Reply-To: <BANLkTi=tqYdwMd9Rc-+Vw2mZzajyU8NO9A@mail.gmail.com>
References: <BANLkTi=OTuP4xWizzpHOzrPyHzu6kjyCKA@mail.gmail.com>
	<BANLkTimPij8UitXXFj6vEuKCrrox7DdY=g@mail.gmail.com>
	<BANLkTimAENTjUshsCBWK1Hebh=x7q+c8eg@mail.gmail.com>
	<BANLkTi=tqYdwMd9Rc-+Vw2mZzajyU8NO9A@mail.gmail.com>
Message-ID: <BANLkTi=TKcQV5kQWRdKGmzJDWGOKsZ_wJg@mail.gmail.com>

Chris,

Can you provide the gdalinfo output of the geotiff?

On Thu, Apr 7, 2011 at 2:29 PM, Goo Creations <goocreations@gmail.com>wrote:

> I've worked through some QGis code and noticed that if this happens,
> GDALAutoCreateWarpedVRT is called on the image to create a copy. So
> GDALAutoCreateWarpedVRT somehow retrieves some sort of metadata to
> accomplish this.
>
>
>
>
> On Thu, Apr 7, 2011 at 10:44 AM, Goo Creations <goocreations@gmail.com>wrote:
>
>> A couple of different apps, such as QGis and Monteverdi (who rotated the
>> image). If I view the image in a normal image viewer (or application not
>> built on top of GDAL, the image is not rotated). Hence there must be some
>> metadata from GDAL these applications use to rotate the image.
>>
>> And yes, I can read other metadata.
>>
>> Chris
>>
>>
>>
>>
>> On Thu, Apr 7, 2011 at 10:34 AM, Chaitanya kumar CH <chaitanya.ch@
>> gmail.com> wrote:
>>
>>> Chris,
>>>
>>> What did you use to view the image? Were you able to read any other Geo
>>> related data with that?
>>>
>>> On Thu, Apr 7, 2011 at 1:56 PM, Goo Creations <goocreations@gmail.com>wrote:
>>>
>>>> Hi all
>>>>
>>>> I tried to read the transformation coefficients by using
>>>> GDALDataset::GetGeoTransform. This function however returned CE_Failure, so
>>>> i assume that the values are not stored in the metadat.
>>>> When I view the image, the image is rotated. There is no world file or
>>>> anything that could cause the rotation.
>>>>
>>>> So my question: If these values are not stored in the metadata, how does
>>>> GDAL handle the rotation, pixel size, etc?
>>>>
>>>> Chris
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110407/98ac5bfe/attachment.html
From knutfrodesoppel at hotmail.com  Thu Apr  7 06:03:24 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Thu Apr  7 06:03:40 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <20110406130905.39ed66c5@asigrid01>
References: <inh62e$8bm$2@dough.gmane.org>
	<20110406101338.5542de2b@asigrid01>	<inhdg4$ihl$1@dough.gmane.org>
	<20110406130905.39ed66c5@asigrid01>
Message-ID: <ink25c$6aa$1@dough.gmane.org>

Antonio,

On 06.04.2011 13:09, Antonio Valentino wrote:
> I'm not sure to understand. GDAL reads data from the product. If the
> product is not geo-referenced you will get data that are not
> geo-referenced.
>
> In this case you could use GDAL tools to interpolate data in a
> geographic grid but you need to know geographic info and/or parameters
> that are stored in the product itself.
>
> In the case of ENVISAT product (but for stripline ones #3160) you
> should be able to perform the re-projection e.g. using gdalwarp with
> the -tps option (I never tested it personally).

It could be that I do not properly understand the term "georeferenced".
For the example of Envisat ASAR, the image data is read perfectly, and 
also GCP's are read relating rows and columns to latitude and longitude 
(though not correct, #3709).
When the datum is given (WGS84) should this product then not be 
georeferenced?

Nevertheless, Envisat is marked as not georeferenced in the table of 
supported raster formats, and reprojecting with gdalwarp does also not 
work for me.

>> Finally, we would also ideally like to have immediate (pre release)
>> support for upcoming satellites such as the ESA Sentinel satellites.
>
> This is very interesting.
> Can you point me to product specifications of Sentinel data?

I have not looked at this yet, but is seems like the format for 
Sentinel-1 will be Geotiff and XML, so it should then not be a problem 
at all:
http://www.terrafirma.eu.com/Documents/Workshops/WS%206/ESA%20SAR%20Products%20for%20Interferometry.pdf


Best regards from Knut-Frode

From antonio.valentino at tiscali.it  Thu Apr  7 06:21:50 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Apr  7 06:21:55 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <ink25c$6aa$1@dough.gmane.org>
References: <inh62e$8bm$2@dough.gmane.org> <20110406101338.5542de2b@asigrid01>
	<inhdg4$ihl$1@dough.gmane.org> <20110406130905.39ed66c5@asigrid01>
	<ink25c$6aa$1@dough.gmane.org>
Message-ID: <20110407122150.712abcaf@asigrid01>

Hi Knut-Frode,

Il giorno Thu, 07 Apr 2011 12:03:24 +0200
Knut-Frode Dagestad <knutfrodesoppel@hotmail.com> ha scritto:

> Antonio,
> 
> On 06.04.2011 13:09, Antonio Valentino wrote:
> > I'm not sure to understand. GDAL reads data from the product. If the
> > product is not geo-referenced you will get data that are not
> > geo-referenced.
> >
> > In this case you could use GDAL tools to interpolate data in a
> > geographic grid but you need to know geographic info and/or
> > parameters that are stored in the product itself.
> >
> > In the case of ENVISAT product (but for stripline ones #3160) you
> > should be able to perform the re-projection e.g. using gdalwarp with
> > the -tps option (I never tested it personally).
> 
> It could be that I do not properly understand the term
> "georeferenced". For the example of Envisat ASAR, the image data is
> read perfectly, and also GCP's are read relating rows and columns to
> latitude and longitude (though not correct, #3709).
> When the datum is given (WGS84) should this product then not be 
> georeferenced?

Oh sorry, my english is very poor.
I used the term "georefernced" to intend products that are sampled on a
regular geographic grid, oriented to north, etc. (e.g ENVISAT IMG
products).
Products like ENVISAT IMS or IMP have an associated reference ellipsoid
but are not sampled on a regular geographic grid.


> Nevertheless, Envisat is marked as not georeferenced in the table of 
> supported raster formats, and reprojecting with gdalwarp does also
> not work for me.
> 
> >> Finally, we would also ideally like to have immediate (pre release)
> >> support for upcoming satellites such as the ESA Sentinel
> >> satellites.
> >
> > This is very interesting.
> > Can you point me to product specifications of Sentinel data?
> 
> I have not looked at this yet, but is seems like the format for 
> Sentinel-1 will be Geotiff and XML, so it should then not be a
> problem at all:
> http://www.terrafirma.eu.com/Documents/Workshops/WS%206/ESA%20SAR%20Products%20for%20Interferometry.pdf
> 

Thank you very much

> 
> Best regards from Knut-Frode
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Antonio Valentino
From chaitanya.ch at gmail.com  Thu Apr  7 07:22:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr  7 07:22:20 2011
Subject: [gdal-dev] Can't read transformation coefficients from tiff
In-Reply-To: <BANLkTikhm3gLVMm9LgqW403FrxHdEmS6yA@mail.gmail.com>
References: <BANLkTi=OTuP4xWizzpHOzrPyHzu6kjyCKA@mail.gmail.com>
	<BANLkTimPij8UitXXFj6vEuKCrrox7DdY=g@mail.gmail.com>
	<BANLkTimAENTjUshsCBWK1Hebh=x7q+c8eg@mail.gmail.com>
	<BANLkTi=tqYdwMd9Rc-+Vw2mZzajyU8NO9A@mail.gmail.com>
	<BANLkTi=TKcQV5kQWRdKGmzJDWGOKsZ_wJg@mail.gmail.com>
	<BANLkTikhm3gLVMm9LgqW403FrxHdEmS6yA@mail.gmail.com>
Message-ID: <BANLkTiniKitzETX8Pownci=By1QCdS0c_Q@mail.gmail.com>

Chris,

GDAL is using the GCPs for location information.

On Thu, Apr 7, 2011 at 4:08 PM, Goo Creations <goocreations@gmail.com>wrote:

> Yes, here it is:
>
>
>
> Size is 8415, 1368
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> GCP[  0]: Id=1, Info=
>           (1,1) -> (1.09027789320281,36.5294598527946,0)
> GCP[  1]: Id=2, Info=
>           (8415,1) -> (1.69376245781042,36.497946615707,0)
> GCP[  2]: Id=3, Info=
>           (8415,1368) -> (1.68268551099186,36.5851791048298,0)
> GCP[  3]: Id=4, Info=
>           (1,1368) -> (1.06532262333098,36.6082043228718,0)
> Metadata:
>   TIFFTAG_DATETIME=2010:10:05 06:46:58
>   AREA_OR_POINT=Point
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 1368.0)
> Upper Right ( 8415.0,    0.0)
> Lower Right ( 8415.0, 1368.0)
> Center      ( 4207.5,  684.0)
> Band 1 Block=8415x128 Type=UInt16, ColorInterp=Gray
>
>
>
>
>
>
>
>
> On Thu, Apr 7, 2011 at 11:51 AM, Chaitanya kumar CH <chaitanya.ch@
> gmail.com> wrote:
>
>> Chris,
>>
>> Can you provide the gdalinfo output of the geotiff?
>>
>>
>> On Thu, Apr 7, 2011 at 2:29 PM, Goo Creations <goocreations@gmail.com>wrote:
>>
>>> I've worked through some QGis code and noticed that if this happens,
>>> GDALAutoCreateWarpedVRT is called on the image to create a copy. So
>>> GDALAutoCreateWarpedVRT somehow retrieves some sort of metadata to
>>> accomplish this.
>>>
>>>
>>>
>>>
>>> On Thu, Apr 7, 2011 at 10:44 AM, Goo Creations <goocreations@gmail.com>wrote:
>>>
>>>> A couple of different apps, such as QGis and Monteverdi (who rotated the
>>>> image). If I view the image in a normal image viewer (or application not
>>>> built on top of GDAL, the image is not rotated). Hence there must be some
>>>> metadata from GDAL these applications use to rotate the image.
>>>>
>>>> And yes, I can read other metadata.
>>>>
>>>> Chris
>>>>
>>>>
>>>>
>>>>
>>>> On Thu, Apr 7, 2011 at 10:34 AM, Chaitanya kumar CH <chaitanya.ch@
>>>> gmail.com> wrote:
>>>>
>>>>> Chris,
>>>>>
>>>>> What did you use to view the image? Were you able to read any other Geo
>>>>> related data with that?
>>>>>
>>>>> On Thu, Apr 7, 2011 at 1:56 PM, Goo Creations <goocreations@gmail.com>wrote:
>>>>>
>>>>>> Hi all
>>>>>>
>>>>>> I tried to read the transformation coefficients by using
>>>>>> GDALDataset::GetGeoTransform. This function however returned CE_Failure, so
>>>>>> i assume that the values are not stored in the metadat.
>>>>>> When I view the image, the image is rotated. There is no world file or
>>>>>> anything that could cause the rotation.
>>>>>>
>>>>>> So my question: If these values are not stored in the metadata, how
>>>>>> does GDAL handle the rotation, pixel size, etc?
>>>>>>
>>>>>> Chris
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>> /t?a???nj?/ /k?m?r/
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110407/78efa4ac/attachment.html
From even.rouault at mines-paris.org  Thu Apr  7 07:31:45 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr  7 07:31:54 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <ink1cd$1qj$1@dough.gmane.org>
References: <inh62e$8bm$2@dough.gmane.org>
	<201104062021.45540.even.rouault@mines-paris.org>
	<ink1cd$1qj$1@dough.gmane.org>
Message-ID: <1302175905.4d9da0a19dbdb@webmail.free.fr>

Selon Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>:

> Hi Even,
>
> On 06.04.2011 20:21, Even Rouault wrote:
> > You can certainly write a (non-GDAL) reader in Python, but of course, you
> > won't be able to benefit from the GDAL API with the "dataset" returned by
> your
> > reader, or using them in software that use the GDAL API.
>
> But if I use the GDAL API to create a GDAL Dataset and then insert a
> matrix of data (read with non-GDAL code), and further add some
> georeferencing or tie-points, it seems to me that I then can utilize
> GDAL API functionality for e.g. reprojecting, subsetting and exporting,
> just the same way as if it was read with a GDAL-driver?

Ok, I didn't understand well what you meant before. You could for example create
a MEM dataset ( http://gdal.org/frmt_mem.html ) and feed it with matrix of data
and georeferencing. If your data is too big and cannot fit entirely into RAM,
then you'll have to go with a temporary file, such as geotiff.
From knutfrodesoppel at hotmail.com  Thu Apr  7 09:22:35 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Thu Apr  7 09:22:56 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <1302175905.4d9da0a19dbdb@webmail.free.fr>
References: <inh62e$8bm$2@dough.gmane.org>	<201104062021.45540.even.rouault@mines-paris.org>	<ink1cd$1qj$1@dough.gmane.org>
	<1302175905.4d9da0a19dbdb@webmail.free.fr>
Message-ID: <inkdqr$cpv$1@dough.gmane.org>

Even,

Thank you. That clarifies, and motivates use of the MEM format.
I gradually start to understand that GDAL is generally more 
file-oriented than memory-oriented.

Then I have one last question for this thread:
As mentioned in another post, for some formats (e.g. Envisat) both the 
image data and GCP's are read by GDAL.
What is then the reason why reprojecting with API or gdalwarp does not 
work, and why this (and other) format is classified as "not 
georeferenced" in the table of supported raster formats?

My theory is that this is because polynomial fit between row/col and 
lon/lat does not work since there are errors (contradictions) in the 
list of GCP's (e.g.: http://trac.osgeo.org/gdal/ticket/3709).
Or is there another explanation?

Best regards from Knut-Frode




On 07.04.2011 13:31, Even Rouault wrote:
> Selon Knut-Frode Dagestad<knutfrodesoppel@hotmail.com>:
>
>> Hi Even,
>>
>> On 06.04.2011 20:21, Even Rouault wrote:
>>> You can certainly write a (non-GDAL) reader in Python, but of course, you
>>> won't be able to benefit from the GDAL API with the "dataset" returned by
>> your
>>> reader, or using them in software that use the GDAL API.
>>
>> But if I use the GDAL API to create a GDAL Dataset and then insert a
>> matrix of data (read with non-GDAL code), and further add some
>> georeferencing or tie-points, it seems to me that I then can utilize
>> GDAL API functionality for e.g. reprojecting, subsetting and exporting,
>> just the same way as if it was read with a GDAL-driver?
>
> Ok, I didn't understand well what you meant before. You could for example create
> a MEM dataset ( http://gdal.org/frmt_mem.html ) and feed it with matrix of data
> and georeferencing. If your data is too big and cannot fit entirely into RAM,
> then you'll have to go with a temporary file, such as geotiff.


From Simon.Payne at 1spatial.com  Thu Apr  7 11:07:05 2011
From: Simon.Payne at 1spatial.com (Simon Payne)
Date: Thu Apr  7 11:12:33 2011
Subject: [gdal-dev] OGR feature style spec and LABEL style parts - not
	working apparently
Message-ID: <429DEE3AFCAF8C46BFA090371D8FB1C00B4049F784@inductor.1spatial.local>

Hi all,

I am using GDAL v. 1.7.1 to programmatically generate MapInfo TAB files to record sets of features (mainly point geometries).  The file generation is being done within Java code, using the .  I would like to label each point based on a field in the feature, as is said to be possible in the OGR Feature Style Specification documentation at http://www.gdal.org/ogr/ogr_feature_style.html.  However, the generated TAB files don't contain a trace of LABEL styling.  On the contrary, when I use SYMBOL styling, this works fine.

To clarify, I would like to view the generated TAB files using MapInfo v. 8.5.  The SYMBOL styling appears OK but no trace of LABELs.  And when I run ogrinfo against the TAB file, again there is no sign of the LABEL.  It seems that it doesn't work for me.

Here is the style string I have been trying to get working:

LABEL(f:"Arial, Helvetica", s:12pt, t:"Hello World!")

I thought I'd start simple, before trying to factor in the dynamic field value lookup.

Please can anyone advise if there is something I am unaware of, that needs to be configured to get the LABEL styling to be written correctly to file?  Could the OGR MapInfo driver be incompatible in some extent with the FSS?

Many thanks.

Regards,

Simon Payne



1Spatial: Steering you towards efficient and reliable location-based data with the 1Spatial Data Improvement Process

http://www.1spatial.com/improve_your_data/

1Spatial Group Limited; Registered in England No. 4785688 VAT Reg. No. 816329821; Registered Office: Tennyson House; Cambridge Business Park; Cambridge; CB4 0WZ; United Kingdom


IMPORTANT NOTICE
 
This e-mail and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this e-mail in error please notify the sender immediately and delete this e-mail from your system. Please note that any views or opinions presented in this e-mail are solely those of the author and do not necessarily represent those of 1Spatial Group Limited, its subsidiaries or associated companies, except where the author specifically states them to be the views of 1Spatial Group Limited, its subsidiaries or associated companies. 
 
1Spatial Group Limited, its subsidiaries and associated companies will not be held liable for any legally binding obligations that are not the subject of an official 1Spatial purchase order or as part of a contract signed by a director of one of the aforementioned companies.
 
Although the company has taken reasonable precautions to ensure no viruses are present in this email, the company cannot accept responsibility for any loss or damage arising from the use of this email or attachments. You should understand and accept that, when communicating with us by e-mail, it is not a totally secure communications medium.

From mateusz at loskot.net  Thu Apr  7 12:53:59 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr  7 12:54:09 2011
Subject: [gdal-dev] Re: Catch a GDALOpen exception
In-Reply-To: <1302159884448-6248874.post@n2.nabble.com>
References: <1302105850175-6246599.post@n2.nabble.com>	<B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>	<201104061953.22936.even.rouault@mines-paris.org>	<6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>	<201104062152.41688.even.rouault@mines-paris.org>	<2643015ebb89568db15950cdec1dc683.squirrel@loskot.net>	<201104062234.35783.even.rouault@mines-paris.org>
	<1302159884448-6248874.post@n2.nabble.com>
Message-ID: <4D9DEC27.4060903@loskot.net>

On 07/04/11 08:04, canduc17 wrote:
> Ok. So if I have well understood the most safe thing to do is the following:
> myDataset = (GDALDataset *) GDALOpen( "myFile.tif", GA_ReadOnly );
> 	if(myDataset == NULL )
> 	{
> 		return 14;
> 	}

Depends on what you consider as "most safe".
In terms of exception safety and safe management of resources in C++,
safe version of your code is:

// Using either C++0x or Boost shared_ptr implementation
typedef std::shared_ptr<GDALDataset> dataset_t;

dataset_t make_dataset(GDALDataset* pds)
{
     dataset_t ds(pds, ::GDALClose);
     return ds;
}

dataset_t open_dataset(char const* const file)
{
     dataset_t ds(make_dataset(
         static_cast<GDALDataset*>(
             ::GDALOpen(file, ::GA_ReadOnly))));
     if(!ds)
     {
         // or return ds and let user to test against nullptr
         throw std::runtime_error("failed to open dataset");
     }
     return ds;
}

dataset_t myDataset(open_dataset("myFile.tif"));
// if open_dataset throws, no need to test against nullptr

Best regards
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From candini at meeo.it  Thu Apr  7 14:06:25 2011
From: candini at meeo.it (canduc17)
Date: Thu Apr  7 14:06:27 2011
Subject: [gdal-dev] Re: Catch a GDALOpen exception
In-Reply-To: <4D9DEC27.4060903@loskot.net>
References: <1302105850175-6246599.post@n2.nabble.com>
	<B72013F2-784C-40B5-8BD1-4C8655A1BBD5@gmail.com>
	<201104061953.22936.even.rouault@mines-paris.org>
	<6ff3aec735cc93026ac8ed1e9ab329b4.squirrel@loskot.net>
	<201104062152.41688.even.rouault@mines-paris.org>
	<2643015ebb89568db15950cdec1dc683.squirrel@loskot.net>
	<201104062234.35783.even.rouault@mines-paris.org>
	<1302159884448-6248874.post@n2.nabble.com>
	<4D9DEC27.4060903@loskot.net>
Message-ID: <1302199585252-6251016.post@n2.nabble.com>

Very interesting...

I'm not a C++ expert, but I'm always curious to learn possibilities like
this, thank you!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Catch-a-GDALOpen-exception-tp6246599p6251016.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From silyko at gmail.com  Thu Apr  7 15:54:43 2011
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Thu Apr  7 15:54:45 2011
Subject: [gdal-dev] ogr - layer extent weirdness after geometry update
Message-ID: <BANLkTikeD8CLtRPMpNh+zwjYtn8qehXNrQ@mail.gmail.com>

Hi List,

  I have observed a puzzling behaviour of the reported extent of an ogr
layer after geometries of features have been modified, with the file opened
in update mode. I use gdal 1.7 via the pyhton bindings, open a dataset with
ogr.Open(fname,update=True), then loop through layers and features and
modify geometries like:
geom=feature.GetGeometryRef(), new_geom=some_modification(geom),
feature.SetGeometry(new_geom), layer.SetFeature(feature). However, ogr (and
Qgis, which uses ogr for that I suppose) reports the new layer extent as,
the "minimal bounding box" of the new and old extents. So somehow, the
extent before geometry modification is still stored somewhere in the
dataset. The same observations also hold for a dataset which is modified by
hand using the editing tools in Qgis! Consider the following ogrinfo output
from a file with one layer, containing one point:
INFO: Open of `qgis_test.shp'
      using driver `ESRI Shapefile' successful.

Layer name: qgis_test
Geometry: Point
Feature Count: 1
Extent: (0.077586, 0.577586) - (10.670690, 31.805172)
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_1984",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["Degree",0.017453292519943295]]
test: String (80.0)
OGRFeature(qgis_test):0
  test (String) = nothing
  POINT (10.670689655172414 31.805172413793112)

Even though the point clearly lies at (10.67,31.80) the previous position is
still included in the extent. Is this a bug or is there some reasoning
behind this behaviour?

Best Regards,
Simon. National Survey and Cadastre of Denmark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110407/c5cb0ae6/attachment.html
From izzybitsie at gmail.com  Thu Apr  7 17:36:23 2011
From: izzybitsie at gmail.com (Dori)
Date: Thu Apr  7 17:36:25 2011
Subject: [gdal-dev] Fwd: gdal_translate gif ->gtiff
In-Reply-To: <BANLkTikeMJvoM+bBwDmQgvhAMLEfHRt14Q@mail.gmail.com>
References: <BANLkTikeMJvoM+bBwDmQgvhAMLEfHRt14Q@mail.gmail.com>
Message-ID: <BANLkTi=QNDdnV-GteekXF4fbWaiyUy90jg@mail.gmail.com>

Hi,

I am trying to convert a GIF image into a georeference tiff image.  Since I
don't know the exact projection used to create the original image I
downloaded from a website, I am trying to use various projections in an
attempt to get the right one. On an ealier post it was suggested to use
cs2cs command to convert the lat/lon corner points to projected coordinates
I could assign to -a_ullr when creating the tiff.

I am running cs2cs and gdal_translate included in  FWTools-2.0.6 in a RedHat
Linux host.

These are the 2 commands I run to create the gtiff assuming the projection
is Polar Stereographic with central meridian=-98.19:
1) *cs2cs +proj=latlon +to +proj=stere +lat_0=90 +lat_ts=70 +lon_0=-98.19
-r<<EOF >stere98pts.dat
+44.0  135.0W
+20.0 74.0W
EOF*

where Upper Left map corner: 44N 135W
          Lower Right map corner: 20N 74W

2) using the points created by command 1) and assigning them to ulx, uly,
lrx, and lry respectively I run:

*ulx=-3150617.86
uly=-4209985.73
lrx=3545943.53
lry=-7893766.64
gdal_translate -of GTiff -co PROFILE=GEOTIFF -co INTERLEAVE=PIXEL -a_srs
'+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-98.19' -a_ullr $ulx $uly $lrx $lry
my_image.gif my_image_stere98.tif*

The info for the tiff image looks like:
*Driver: GTiff/GeoTIFF
Files: my_image_stere98.tif
Size is 864, 526
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,298.2572235629972]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",70],
    PARAMETER["central_meridian",-98.19],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-3150617.859999999869615,-4209985.730000000447035)
Pixel Size = (7750.649756944443652,-7003.385760456272692)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-3150617.860,-4209985.730) (135d 0'0.00"W, 44d 0'0.00"N)
Lower Left  (-3150617.860,-7893766.640) (119d56'53.85"W, 20d58'17.68"N)
Upper Right ( 3545943.530,-4209985.730) ( 58d 5'0.89"W, 42d 4'44.10"N)
Lower Right ( 3545943.530,-7893766.640) ( 74d 0'0.00"W, 20d 0'0.00"N)
Center      (  197662.835,-6051876.185) ( 96d19'9.49"W, 37d52'39.33"N)
Band 1 Block=864x9 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 0,255,255,255
    2: 153,153,102,255
    3: 204,204,204,255
    4: 255,0,0,255
    5: 51,153,204,255*
........ color table follow here .......


Unfortunately, I cannot see this image using a third party software that
allows me to see other conversions of this same GIF using lcc and lcc2
conversions.

*Q1: Am I converting lat/lon points correctly?

Q2: Am I using gdal_translate correctly?
*

I'd appreciate it any help to determine what I am doing wrong with this
stereographic conversion.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110407/c3672665/attachment.html
From dmorissette at mapgears.com  Thu Apr  7 20:31:24 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Apr  7 20:31:31 2011
Subject: [gdal-dev] OGR feature style spec and LABEL style parts - not
	working apparently
In-Reply-To: <429DEE3AFCAF8C46BFA090371D8FB1C00B4049F784@inductor.1spatial.local>
References: <429DEE3AFCAF8C46BFA090371D8FB1C00B4049F784@inductor.1spatial.local>
Message-ID: <4D9E575C.3000109@mapgears.com>

Hi Simon,

It is possible that this may be a limitation of the MITAB driver. I 
don't have time to check now, and won't have time for the next two weeks 
at least, but if you bring this up again at the end of April then I 
could have a look and see how involved that would be to support.

On 11-04-07 11:07 AM, Simon Payne wrote:
> Hi all,
>
> I am using GDAL v. 1.7.1 to programmatically generate MapInfo TAB files to record sets of features (mainly point geometries).  The file generation is being done within Java code, using the .  I would like to label each point based on a field in the feature, as is said to be possible in the OGR Feature Style Specification documentation at http://www.gdal.org/ogr/ogr_feature_style.html.  However, the generated TAB files don't contain a trace of LABEL styling.  On the contrary, when I use SYMBOL styling, this works fine.
>
> To clarify, I would like to view the generated TAB files using MapInfo v. 8.5.  The SYMBOL styling appears OK but no trace of LABELs.  And when I run ogrinfo against the TAB file, again there is no sign of the LABEL.  It seems that it doesn't work for me.
>
> Here is the style string I have been trying to get working:
>
> LABEL(f:"Arial, Helvetica", s:12pt, t:"Hello World!")
>
> I thought I'd start simple, before trying to factor in the dynamic field value lookup.
>
> Please can anyone advise if there is something I am unaware of, that needs to be configured to get the LABEL styling to be written correctly to file?  Could the OGR MapInfo driver be incompatible in some extent with the FSS?
>
> Many thanks.
>
> Regards,
>
> Simon Payne
>
>
>
> 1Spatial: Steering you towards efficient and reliable location-based data with the 1Spatial Data Improvement Process
>
> http://www.1spatial.com/improve_your_data/
>
> 1Spatial Group Limited; Registered in England No. 4785688 VAT Reg. No. 816329821; Registered Office: Tennyson House; Cambridge Business Park; Cambridge; CB4 0WZ; United Kingdom
>
>
> IMPORTANT NOTICE
>
> This e-mail and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this e-mail in error please notify the sender immediately and delete this e-mail from your system. Please note that any views or opinions presented in this e-mail are solely those of the author and do not necessarily represent those of 1Spatial Group Limited, its subsidiaries or associated companies, except where the author specifically states them to be the views of 1Spatial Group Limited, its subsidiaries or associated companies.
>
> 1Spatial Group Limited, its subsidiaries and associated companies will not be held liable for any legally binding obligations that are not the subject of an official 1Spatial purchase order or as part of a contract signed by a director of one of the aforementioned companies.
>
> Although the company has taken reasonable precautions to ensure no viruses are present in this email, the company cannot accept responsibility for any loss or damage arising from the use of this email or attachments. You should understand and accept that, when communicating with us by e-mail, it is not a totally secure communications medium.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000
From even.rouault at mines-paris.org  Fri Apr  8 05:40:02 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  8 05:40:11 2011
Subject: [gdal-dev] ogr - layer extent weirdness after geometry update
In-Reply-To: <BANLkTikeD8CLtRPMpNh+zwjYtn8qehXNrQ@mail.gmail.com>
References: <BANLkTikeD8CLtRPMpNh+zwjYtn8qehXNrQ@mail.gmail.com>
Message-ID: <1302255602.4d9ed7f2c5152@webmail.free.fr>

Selon Simon Lyngby Kokkendorff <silyko@gmail.com>:

Yes indeed, you've precisely described the behaviour of the code of the OGR
shapefile driver. The shapefile format stores the extent of the shapes stored in
the shapefile.
When you append a new shape in a shapefile, the shapefile driver will extend the
layer extent with the shape bounding box. This works well and efficiently when
creating a shapefile from scratch.
The same algorithm is also used when updating an existing shapefile, and it's in
that case you can get the weird behaviour you see if you move a shape that was
touching the layer extent. In that case the shapefile driver should invalidate
the layer extent and recompute it entirely by iterating over all the shapes,
which could be costly if the shapefile is big. But the current situation is not
very satisfactory. And a an optimization, the invalidation could be only done if
the bounding box of the old shape touches the layer extent.
The deletion of a feature could also lead to the same behaviour.

Could you file a ticket about this in GDAL trac ?

> Hi List,
>
>   I have observed a puzzling behaviour of the reported extent of an ogr
> layer after geometries of features have been modified, with the file opened
> in update mode. I use gdal 1.7 via the pyhton bindings, open a dataset with
> ogr.Open(fname,update=True), then loop through layers and features and
> modify geometries like:
> geom=feature.GetGeometryRef(), new_geom=some_modification(geom),
> feature.SetGeometry(new_geom), layer.SetFeature(feature). However, ogr (and
> Qgis, which uses ogr for that I suppose) reports the new layer extent as,
> the "minimal bounding box" of the new and old extents. So somehow, the
> extent before geometry modification is still stored somewhere in the
> dataset. The same observations also hold for a dataset which is modified by
> hand using the editing tools in Qgis! Consider the following ogrinfo output
> from a file with one layer, containing one point:
> INFO: Open of `qgis_test.shp'
>       using driver `ESRI Shapefile' successful.
>
> Layer name: qgis_test
> Geometry: Point
> Feature Count: 1
> Extent: (0.077586, 0.577586) - (10.670690, 31.805172)
> Layer SRS WKT:
> GEOGCS["GCS_WGS_1984",
>     DATUM["WGS_1984",
>         SPHEROID["WGS_1984",6378137,298.257223563]],
>     PRIMEM["Greenwich",0],
>     UNIT["Degree",0.017453292519943295]]
> test: String (80.0)
> OGRFeature(qgis_test):0
>   test (String) = nothing
>   POINT (10.670689655172414 31.805172413793112)
>
> Even though the point clearly lies at (10.67,31.80) the previous position is
> still included in the extent. Is this a bug or is there some reasoning
> behind this behaviour?
>
> Best Regards,
> Simon. National Survey and Cadastre of Denmark
>


From even.rouault at mines-paris.org  Fri Apr  8 05:46:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  8 05:46:18 2011
Subject: [gdal-dev] Re: GDAL drivers written in Python
In-Reply-To: <inkdqr$cpv$1@dough.gmane.org>
References: <inh62e$8bm$2@dough.gmane.org>
	<201104062021.45540.even.rouault@mines-paris.org>
	<ink1cd$1qj$1@dough.gmane.org>
	<1302175905.4d9da0a19dbdb@webmail.free.fr>
	<inkdqr$cpv$1@dough.gmane.org>
Message-ID: <1302255970.4d9ed96245289@webmail.free.fr>

Selon Knut-Frode Dagestad <knutfrodesoppel@hotmail.com>:

> Even,
>
> Thank you. That clarifies, and motivates use of the MEM format.
> I gradually start to understand that GDAL is generally more
> file-oriented than memory-oriented.
>
> Then I have one last question for this thread:
> As mentioned in another post, for some formats (e.g. Envisat) both the
> image data and GCP's are read by GDAL.
> What is then the reason why reprojecting with API or gdalwarp does not
> work, and why this (and other) format is classified as "not
> georeferenced" in the table of supported raster formats?

Ah, the doc is sometimes incorrect or lags behind the code. If you see
inconsistencies, please file a ticket.

>
> My theory is that this is because polynomial fit between row/col and
> lon/lat does not work since there are errors (contradictions) in the
> list of GCP's (e.g.: http://trac.osgeo.org/gdal/ticket/3709).
> Or is there another explanation?

Yes, this is a possibility. If the GCPs are incorrect, the algorithm may not
manage to "invert" the transformation. But I would have assumed that this would
lead to a more explicit error message than the one you get.

Perhaps you can try playing with the -tps or -order option of gdalwarp, but if
the GCPs are incorrect, it is a bit useless of course...

>
> Best regards from Knut-Frode
>
>
>
>
> On 07.04.2011 13:31, Even Rouault wrote:
> > Selon Knut-Frode Dagestad<knutfrodesoppel@hotmail.com>:
> >
> >> Hi Even,
> >>
> >> On 06.04.2011 20:21, Even Rouault wrote:
> >>> You can certainly write a (non-GDAL) reader in Python, but of course, you
> >>> won't be able to benefit from the GDAL API with the "dataset" returned by
> >> your
> >>> reader, or using them in software that use the GDAL API.
> >>
> >> But if I use the GDAL API to create a GDAL Dataset and then insert a
> >> matrix of data (read with non-GDAL code), and further add some
> >> georeferencing or tie-points, it seems to me that I then can utilize
> >> GDAL API functionality for e.g. reprojecting, subsetting and exporting,
> >> just the same way as if it was read with a GDAL-driver?
> >
> > Ok, I didn't understand well what you meant before. You could for example
> create
> > a MEM dataset ( http://gdal.org/frmt_mem.html ) and feed it with matrix of
> data
> > and georeferencing. If your data is too big and cannot fit entirely into
> RAM,
> > then you'll have to go with a temporary file, such as geotiff.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From silyko at gmail.com  Fri Apr  8 06:19:29 2011
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Fri Apr  8 06:19:32 2011
Subject: [gdal-dev] ogr - layer extent weirdness after geometry update
In-Reply-To: <1302255602.4d9ed7f2c5152@webmail.free.fr>
References: <BANLkTikeD8CLtRPMpNh+zwjYtn8qehXNrQ@mail.gmail.com>
	<1302255602.4d9ed7f2c5152@webmail.free.fr>
Message-ID: <BANLkTinv4a6V66oF-E7jZ20TH2dc1TSOwA@mail.gmail.com>

Hi Even,

  Thanks for the clarification. I'll try to file a ticket about the issue,
have to learn how to do that anyway :-) It is not a serious issue of course,
the most "annoying" thing about it, from my experience, is that when you use
Qgis (which uses ogr) to "zoom to layer extent" on a modified layer you
might end up with a view, where your data is a tiny (or invisible) blob in
one of the corners.

  Best regards,
  Simon


On Fri, Apr 8, 2011 at 11:40 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Simon Lyngby Kokkendorff <silyko@gmail.com>:
>
> Yes indeed, you've precisely described the behaviour of the code of the OGR
> shapefile driver. The shapefile format stores the extent of the shapes
> stored in
> the shapefile.
> When you append a new shape in a shapefile, the shapefile driver will
> extend the
> layer extent with the shape bounding box. This works well and efficiently
> when
> creating a shapefile from scratch.
> The same algorithm is also used when updating an existing shapefile, and
> it's in
> that case you can get the weird behaviour you see if you move a shape that
> was
> touching the layer extent. In that case the shapefile driver should
> invalidate
> the layer extent and recompute it entirely by iterating over all the
> shapes,
> which could be costly if the shapefile is big. But the current situation is
> not
> very satisfactory. And a an optimization, the invalidation could be only
> done if
> the bounding box of the old shape touches the layer extent.
> The deletion of a feature could also lead to the same behaviour.
>
> Could you file a ticket about this in GDAL trac ?
>
> > Hi List,
> >
> >   I have observed a puzzling behaviour of the reported extent of an ogr
> > layer after geometries of features have been modified, with the file
> opened
> > in update mode. I use gdal 1.7 via the pyhton bindings, open a dataset
> with
> > ogr.Open(fname,update=True), then loop through layers and features and
> > modify geometries like:
> > geom=feature.GetGeometryRef(), new_geom=some_modification(geom),
> > feature.SetGeometry(new_geom), layer.SetFeature(feature). However, ogr
> (and
> > Qgis, which uses ogr for that I suppose) reports the new layer extent as,
> > the "minimal bounding box" of the new and old extents. So somehow, the
> > extent before geometry modification is still stored somewhere in the
> > dataset. The same observations also hold for a dataset which is modified
> by
> > hand using the editing tools in Qgis! Consider the following ogrinfo
> output
> > from a file with one layer, containing one point:
> > INFO: Open of `qgis_test.shp'
> >       using driver `ESRI Shapefile' successful.
> >
> > Layer name: qgis_test
> > Geometry: Point
> > Feature Count: 1
> > Extent: (0.077586, 0.577586) - (10.670690, 31.805172)
> > Layer SRS WKT:
> > GEOGCS["GCS_WGS_1984",
> >     DATUM["WGS_1984",
> >         SPHEROID["WGS_1984",6378137,298.257223563]],
> >     PRIMEM["Greenwich",0],
> >     UNIT["Degree",0.017453292519943295]]
> > test: String (80.0)
> > OGRFeature(qgis_test):0
> >   test (String) = nothing
> >   POINT (10.670689655172414 31.805172413793112)
> >
> > Even though the point clearly lies at (10.67,31.80) the previous position
> is
> > still included in the extent. Is this a bug or is there some reasoning
> > behind this behaviour?
> >
> > Best Regards,
> > Simon. National Survey and Cadastre of Denmark
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110408/06c5b703/attachment.html
From radim.blazek at gmail.com  Fri Apr  8 07:25:57 2011
From: radim.blazek at gmail.com (Radim Blazek)
Date: Fri Apr  8 07:25:58 2011
Subject: [gdal-dev] OGR_L_SetSpatialRef
Message-ID: <BANLkTime3Y3kn5BO_JKreR+QqhUUZwo1yw@mail.gmail.com>

Hi,
is there a way to assign a CRS to an existing OGR layer.
I would like to open for example a shapefile without .prj in write
mode, set a CRS and save it with .prj without creating a new layer.

Radim
From ahmettemiz88 at gmail.com  Fri Apr  8 07:39:57 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Apr  8 07:40:01 2011
Subject: [gdal-dev] regular expression in ogr2ogr
Message-ID: <BANLkTimCTuLXR+Stn+HcK2--nWnCnG3srQ@mail.gmail.com>

hello

how can I use regular expression in ogr2ogr -sql "   "

something like :
ogr2ogr -sql "select il,ilce,koy,etkili_nak from kd_nakil where il
???~ ???  'kastamonu'"  kasta2_kd_nakil.shp  kd_nakil.shp

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From even.rouault at mines-paris.org  Fri Apr  8 08:02:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  8 08:02:27 2011
Subject: [gdal-dev] OGR_L_SetSpatialRef
In-Reply-To: <BANLkTime3Y3kn5BO_JKreR+QqhUUZwo1yw@mail.gmail.com>
References: <BANLkTime3Y3kn5BO_JKreR+QqhUUZwo1yw@mail.gmail.com>
Message-ID: <1302264139.4d9ef94b454fb@webmail.free.fr>

Selon Radim Blazek <radim.blazek@gmail.com>:

Radim,

there's no API in OGR to alter the SRS of an existing layer.

However in the particular case of a shapefile, you just need to generate the
.prj file. You can do that quite easily with the OSR API. See
http://gdal.org/ogr/ogr__srs__api_8h.html

Basically, something like :

OGRSpatialReferenceH hSRS = OSRNewSpatialReference ( NULL );
OSRImportFromXXXXX(hSRS, YYYYYY);
OSRMorphToESRI(hSRS); /* this is the important stuff for shapefile .prj */
char* pszOutWkt = NULL;
OSRExportToWkt(hSRS, &pszOutWkt);
OSRDestroySpatialReference(hSRS);
fprintf(fp, "%s", pszOutWkt);
CPLFree(pszOutWkt);

> Hi,
> is there a way to assign a CRS to an existing OGR layer.
> I would like to open for example a shapefile without .prj in write
> mode, set a CRS and save it with .prj without creating a new layer.
>
> Radim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Fri Apr  8 08:06:46 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  8 08:06:54 2011
Subject: [gdal-dev] regular expression in ogr2ogr
In-Reply-To: <BANLkTimCTuLXR+Stn+HcK2--nWnCnG3srQ@mail.gmail.com>
References: <BANLkTimCTuLXR+Stn+HcK2--nWnCnG3srQ@mail.gmail.com>
Message-ID: <1302264406.4d9efa56891c3@webmail.free.fr>

Selon ahmet temiz <ahmettemiz88@gmail.com>:

The SQL engine of OGR has not support for general-purpose regular expressions,
but it sounds what you need is the LIKE operator. You can find the documentation
here : http://gdal.org/ogr/ogr_sql.html.

> hello
>
> how can I use regular expression in ogr2ogr -sql "   "
>
> something like :
> ogr2ogr -sql "select il,ilce,koy,etkili_nak from kd_nakil where il
> ???~ ???  'kastamonu'"  kasta2_kd_nakil.shp  kd_nakil.shp
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From hilmyh at gmail.com  Fri Apr  8 09:12:04 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Fri Apr  8 09:12:26 2011
Subject: [gdal-dev] Wrong parameter value for EPSG:3168 and EPSG:3375 (RSO)
Message-ID: <BANLkTikWS9gwrkodWMs2znNR3+puohibMw@mail.gmail.com>

Hi list,

I assigned geotiff raster an srs using gdal_translate with the EPSG number
as follows:

  gdal_translate -a_srs EPSG:3168 sourcefile destinationfile

Using gdalinfo, I notice that the false_easting parameter is 0 where it
should be 804670.24

Coordinate System is:
PROJCS["Kertau (RSO) / RSO Malaya (m)",
    GEOGCS["Kertau (RSO)",
        DATUM["Kertau_RSO",
            SPHEROID["Everest 1830 (RSO
1969)",6377295.664,300.8017000000015,
                AUTHORITY["EPSG","7056"]],
            AUTHORITY["EPSG","6751"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4751"]],
    PROJECTION["Hotine_Oblique_Mercator"],
    PARAMETER["latitude_of_center",4],
    PARAMETER["longitude_of_center",102.25],
    PARAMETER["azimuth",323.0257905],
    PARAMETER["rectified_grid_angle",323.1301023611111],
    PARAMETER["scale_factor",0.99984],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3168"]]

I am using OSGeo4W on Windows 7 64 bit (Gdal 1.4.5.0) shell. It is the same
with gdal 1.6, 1.7, gdal-dev, gdal 1.7.2 on Ubuntu 10.04 and QGis 1.7 (gdal
1.8).

I checked the OSGeo4W\share\proj\epsg file, but the values there are
correct. The anomaly also affects EPSG:3375 which uses the same projection.
QGis or Geoserver doesn't have a problem displaying the raster with the
assigned srs, so it looks like its just a problem with gdalinfo.

regards

*Hilmy*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110408/f81bedde/attachment-0001.html
From even.rouault at mines-paris.org  Sat Apr  9 04:50:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr  9 04:50:51 2011
Subject: [gdal-dev] Wrong parameter value for EPSG:3168 and EPSG:3375 (RSO)
In-Reply-To: <BANLkTikWS9gwrkodWMs2znNR3+puohibMw@mail.gmail.com>
References: <BANLkTikWS9gwrkodWMs2znNR3+puohibMw@mail.gmail.com>
Message-ID: <1302339042.4da01de27ee52@webmail.free.fr>

Selon Hilmy Hashim <hilmyh@gmail.com>:

I can confirm the bug. It is in fact a bug in libgeotiff. I have reported it as
http://trac.osgeo.org/geotiff/ticket/38 with an attached patch to fix it.

> Hi list,
>
> I assigned geotiff raster an srs using gdal_translate with the EPSG number
> as follows:
>
>   gdal_translate -a_srs EPSG:3168 sourcefile destinationfile
>
> Using gdalinfo, I notice that the false_easting parameter is 0 where it
> should be 804670.24
>
> Coordinate System is:
> PROJCS["Kertau (RSO) / RSO Malaya (m)",
>     GEOGCS["Kertau (RSO)",
>         DATUM["Kertau_RSO",
>             SPHEROID["Everest 1830 (RSO
> 1969)",6377295.664,300.8017000000015,
>                 AUTHORITY["EPSG","7056"]],
>             AUTHORITY["EPSG","6751"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4751"]],
>     PROJECTION["Hotine_Oblique_Mercator"],
>     PARAMETER["latitude_of_center",4],
>     PARAMETER["longitude_of_center",102.25],
>     PARAMETER["azimuth",323.0257905],
>     PARAMETER["rectified_grid_angle",323.1301023611111],
>     PARAMETER["scale_factor",0.99984],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3168"]]
>
> I am using OSGeo4W on Windows 7 64 bit (Gdal 1.4.5.0) shell. It is the same
> with gdal 1.6, 1.7, gdal-dev, gdal 1.7.2 on Ubuntu 10.04 and QGis 1.7 (gdal
> 1.8).
>
> I checked the OSGeo4W\share\proj\epsg file, but the values there are
> correct. The anomaly also affects EPSG:3375 which uses the same projection.
> QGis or Geoserver doesn't have a problem displaying the raster with the
> assigned srs, so it looks like its just a problem with gdalinfo.
>
> regards
>
> *Hilmy*
>


From hilmyh at gmail.com  Sat Apr  9 06:01:49 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Sat Apr  9 06:02:13 2011
Subject: [gdal-dev] Wrong parameter value for EPSG:3168 and EPSG:3375 (RSO)
In-Reply-To: <1302339042.4da01de27ee52@webmail.free.fr>
References: <BANLkTikWS9gwrkodWMs2znNR3+puohibMw@mail.gmail.com>
	<1302339042.4da01de27ee52@webmail.free.fr>
Message-ID: <BANLkTincPCi1y9VAnTGXu5BBAgmF7zsC5g@mail.gmail.com>

Thanks very much Even. Good to know where the error is.

*Hilmy*


On Sat, Apr 9, 2011 at 4:50 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Hilmy Hashim <hilmyh@gmail.com>:
>
> I can confirm the bug. It is in fact a bug in libgeotiff. I have reported
> it as
> http://trac.osgeo.org/geotiff/ticket/38 with an attached patch to fix it.
>
> > Hi list,
> >
> > I assigned geotiff raster an srs using gdal_translate with the EPSG
> number
> > as follows:
> >
> >   gdal_translate -a_srs EPSG:3168 sourcefile destinationfile
> >
> > Using gdalinfo, I notice that the false_easting parameter is 0 where it
> > should be 804670.24
> >
> > Coordinate System is:
> > PROJCS["Kertau (RSO) / RSO Malaya (m)",
> >     GEOGCS["Kertau (RSO)",
> >         DATUM["Kertau_RSO",
> >             SPHEROID["Everest 1830 (RSO
> > 1969)",6377295.664,300.8017000000015,
> >                 AUTHORITY["EPSG","7056"]],
> >             AUTHORITY["EPSG","6751"]],
> >         PRIMEM["Greenwich",0],
> >         UNIT["degree",0.0174532925199433],
> >         AUTHORITY["EPSG","4751"]],
> >     PROJECTION["Hotine_Oblique_Mercator"],
> >     PARAMETER["latitude_of_center",4],
> >     PARAMETER["longitude_of_center",102.25],
> >     PARAMETER["azimuth",323.0257905],
> >     PARAMETER["rectified_grid_angle",323.1301023611111],
> >     PARAMETER["scale_factor",0.99984],
> >     PARAMETER["false_easting",0],
> >     PARAMETER["false_northing",0],
> >     UNIT["metre",1,
> >         AUTHORITY["EPSG","9001"]],
> >     AUTHORITY["EPSG","3168"]]
> >
> > I am using OSGeo4W on Windows 7 64 bit (Gdal 1.4.5.0) shell. It is the
> same
> > with gdal 1.6, 1.7, gdal-dev, gdal 1.7.2 on Ubuntu 10.04 and QGis 1.7
> (gdal
> > 1.8).
> >
> > I checked the OSGeo4W\share\proj\epsg file, but the values there are
> > correct. The anomaly also affects EPSG:3375 which uses the same
> projection.
> > QGis or Geoserver doesn't have a problem displaying the raster with the
> > assigned srs, so it looks like its just a problem with gdalinfo.
> >
> > regards
> >
> > *Hilmy*
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110409/8dc2fd08/attachment.html
From mxocak at gmail.com  Sat Apr  9 07:08:32 2011
From: mxocak at gmail.com (mxocak)
Date: Sat Apr  9 07:08:33 2011
Subject: [gdal-dev] Re: VMAP Problems - Correct Posting.
In-Reply-To: <e66a4dbf0804251518q754ad37ckc063ae9c4dd027dd@mail.gmail.com>
References: <e66a4dbf0804250858y6328578agb553dc9540b2bc33@mail.gmail.com>
	<futinl$e62$1@osprey.mgras.de> <futj0p$ugo$1@osprey.mgras.de>
	<e66a4dbf0804251518q754ad37ckc063ae9c4dd027dd@mail.gmail.com>
Message-ID: <1302347312672-6256629.post@n2.nabble.com>

Did you find a solution for this problem? I'm working on the same thing and
need a solution.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/VMAP-Problems-Correct-Posting-tp2034131p6256629.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hilmyh at gmail.com  Sun Apr 10 00:51:26 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Sun Apr 10 00:51:50 2011
Subject: [gdal-dev] Missing +gamma parameter for RSO
Message-ID: <BANLkTi=j0XzmM-9hCxY+MecuijG+7Qv9hQ@mail.gmail.com>

The RSO projection method for Malaysia is now classified by
epsg-registry.org as Hotine Oblique Mercator (variant A) EPSG:9812. This
affects the following projections - EPSG:3168, EPSG:3375, EPSG:3376 among
others.

At the moment, I get the following outputs from epsg_tr.py:

epsg_tr.py -proj4 3618
# Kertau (RSO) / RSO Malaya (m)
<3168> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257905 +k=0.99984
+x_0=804670.24 +y_0=0 +a=6377295.664 +b=6356094.667915204 +units=m +no_defs
 <>

epsg_tr.py -proj4 3375
<3375> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257964666666 +k=0.99984
+x_0=804671 +y_0=0 +ellps=GRS80 +units=m +no_defs  <>

which are missing the +gamma parameter. This parameter (Rectified Grid
Angle) is already included in the share/proj/epsg database:

# Kertau (RSO) / RSO Malaya (m)
<3168> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257905 +k=0.99984
+x_0=804670.24 +y_0=0 +gamma=323.1301023611111 +a=6377295.664
+b=6356094.667915204 +units=m +no_defs  <>

# GDM2000 / Peninsula RSO
<3375> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257964666666 +k=0.99984
+x_0=804671 +y_0=0 +gamma=323.1301023611111 +ellps=GRS80 +units=m +no_defs
 <>

Can this parameter be added to these projections as it is being applied in
the latest proj4 omerc.c?

Thanks

*Hilmy*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110410/3362562c/attachment.html
From jmckenna at gatewaygeomatics.com  Sun Apr 10 13:43:15 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sun Apr 10 13:43:19 2011
Subject: [gdal-dev] Windows link issue with Poppler/PDF
Message-ID: <4DA1EC33.1010102@gatewaygeomatics.com>

Hello,

On windows using Visual Studio 2008 I have compiled poppler.lib (from 
poppler-0.16.4, using cmake), excellent, and if I cd to /frmts/pdf and 
'nmake /f makefile.vc' there are no problems; however during GDAL's link 
I get the following error:

*******
poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain@12 already 
defined in gdaldllmain.
obj
    Creating library gdal_i.lib and object gdal_i.exp
gdal19dev.dll : fatal error LNK1169: one or more multiply defined 
symbols found
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
9.0\VC\BIN\link.EXE"
' : return code '0x491'
Stop.
*******

(I have tried both GDAL-1.8.0 and trunk, same error)

Anyone see what I am doing wrong, or give me some hints as to how to 
solve this "DLLMain already defined" problem?  Thanks.

-jeff

-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/






From jluis at ualg.pt  Sun Apr 10 13:52:20 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Apr 10 13:52:43 2011
Subject: [gdal-dev] Windows link issue with Poppler/PDF
In-Reply-To: <4DA1EC33.1010102@gatewaygeomatics.com>
References: <4DA1EC33.1010102@gatewaygeomatics.com>
Message-ID: <4DA1EE54.3010600@ualg.pt>

Jeff,

I get the same thing (VS2010 ). I could only link the 0.14 built for 32 
bits. For 64 there were some other problems that I don't remember anymore.

Joaquim

> Hello,
>
> On windows using Visual Studio 2008 I have compiled poppler.lib (from 
> poppler-0.16.4, using cmake), excellent, and if I cd to /frmts/pdf and 
> 'nmake /f makefile.vc' there are no problems; however during GDAL's 
> link I get the following error:
>
> *******
> poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain@12 already 
> defined in gdaldllmain.
> obj
>    Creating library gdal_i.lib and object gdal_i.exp
> gdal19dev.dll : fatal error LNK1169: one or more multiply defined 
> symbols found
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
> 9.0\VC\BIN\link.EXE"
> ' : return code '0x491'
> Stop.
> *******
>
> (I have tried both GDAL-1.8.0 and trunk, same error)
>
> Anyone see what I am doing wrong, or give me some hints as to how to 
> solve this "DLLMain already defined" problem?  Thanks.
>
> -jeff
>

From jmckenna at gatewaygeomatics.com  Sun Apr 10 14:03:16 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sun Apr 10 14:03:20 2011
Subject: [gdal-dev] Windows link issue with Poppler/PDF
In-Reply-To: <4DA1EE54.3010600@ualg.pt>
References: <4DA1EC33.1010102@gatewaygeomatics.com> <4DA1EE54.3010600@ualg.pt>
Message-ID: <4DA1F0E4.8080506@gatewaygeomatics.com>

Hello Joaquim,

Oh ok thanks, I will try with poppler 0.14.x as you recommend.

(I can add to the GDAL linker flags "/FORCE:MULTIPLE" and it will 
compile, but that is not good practice I imagine)

Should I file this issue in GDAL Trac?

-jeff



On 11-04-10 2:52 PM, Joaquim Luis wrote:
> Jeff,
>
> I get the same thing (VS2010 ). I could only link the 0.14 built for 32
> bits. For 64 there were some other problems that I don't remember anymore.
>
> Joaquim
>
>> Hello,
>>
>> On windows using Visual Studio 2008 I have compiled poppler.lib (from
>> poppler-0.16.4, using cmake), excellent, and if I cd to /frmts/pdf and
>> 'nmake /f makefile.vc' there are no problems; however during GDAL's
>> link I get the following error:
>>
>> *******
>> poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain@12 already
>> defined in gdaldllmain.
>> obj
>> Creating library gdal_i.lib and object gdal_i.exp
>> gdal19dev.dll : fatal error LNK1169: one or more multiply defined
>> symbols found
>> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
>> 9.0\VC\BIN\link.EXE"
>> ' : return code '0x491'
>> Stop.
>> *******
>>
>> (I have tried both GDAL-1.8.0 and trunk, same error)
>>
>> Anyone see what I am doing wrong, or give me some hints as to how to
>> solve this "DLLMain already defined" problem? Thanks.
>>
>> -jeff
>>
>
>


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From jluis at ualg.pt  Sun Apr 10 14:07:54 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Apr 10 14:07:58 2011
Subject: [gdal-dev] Windows link issue with Poppler/PDF
In-Reply-To: <4DA1F0E4.8080506@gatewaygeomatics.com>
References: <4DA1EC33.1010102@gatewaygeomatics.com> <4DA1EE54.3010600@ualg.pt>
	<4DA1F0E4.8080506@gatewaygeomatics.com>
Message-ID: <4DA1F1FA.60203@ualg.pt>

On 10-04-2011 19:03, Jeff McKenna wrote:
> Hello Joaquim,
>
> Oh ok thanks, I will try with poppler 0.14.x as you recommend.
>
> (I can add to the GDAL linker flags "/FORCE:MULTIPLE" and it will 
> compile, but that is not good practice I imagine)
>
> Should I file this issue in GDAL Trac?


Perhaps, but maybe Tamas has something to say about this.

Joaquim

>
> -jeff
>
>
>
> On 11-04-10 2:52 PM, Joaquim Luis wrote:
>> Jeff,
>>
>> I get the same thing (VS2010 ). I could only link the 0.14 built for 32
>> bits. For 64 there were some other problems that I don't remember 
>> anymore.
>>
>> Joaquim
>>
>>> Hello,
>>>
>>> On windows using Visual Studio 2008 I have compiled poppler.lib (from
>>> poppler-0.16.4, using cmake), excellent, and if I cd to /frmts/pdf and
>>> 'nmake /f makefile.vc' there are no problems; however during GDAL's
>>> link I get the following error:
>>>
>>> *******
>>> poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain@12 already
>>> defined in gdaldllmain.
>>> obj
>>> Creating library gdal_i.lib and object gdal_i.exp
>>> gdal19dev.dll : fatal error LNK1169: one or more multiply defined
>>> symbols found
>>> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
>>> 9.0\VC\BIN\link.EXE"
>>> ' : return code '0x491'
>>> Stop.
>>> *******
>>>
>>> (I have tried both GDAL-1.8.0 and trunk, same error)
>>>
>>> Anyone see what I am doing wrong, or give me some hints as to how to
>>> solve this "DLLMain already defined" problem? Thanks.
>>>
>>> -jeff
>>>
>>
>>
>
>

From szekerest at gmail.com  Sun Apr 10 16:42:34 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Apr 10 16:42:37 2011
Subject: [gdal-dev] Windows link issue with Poppler/PDF
In-Reply-To: <4DA1F1FA.60203@ualg.pt>
References: <4DA1EC33.1010102@gatewaygeomatics.com> <4DA1EE54.3010600@ualg.pt>
	<4DA1F0E4.8080506@gatewaygeomatics.com> <4DA1F1FA.60203@ualg.pt>
Message-ID: <BANLkTimwJUMYf-0Pt5=sdHdp4cOhAedVag@mail.gmail.com>

You may require to set: 'ENABLE_RELOCATABLE:BOOL=OFF' in CMakeCache.txt

Best regards,

Tamas


2011/4/10 Joaquim Luis <jluis@ualg.pt>

> On 10-04-2011 19:03, Jeff McKenna wrote:
>
>> Hello Joaquim,
>>
>> Oh ok thanks, I will try with poppler 0.14.x as you recommend.
>>
>> (I can add to the GDAL linker flags "/FORCE:MULTIPLE" and it will compile,
>> but that is not good practice I imagine)
>>
>> Should I file this issue in GDAL Trac?
>>
>
>
> Perhaps, but maybe Tamas has something to say about this.
>
> Joaquim
>
>
>
>> -jeff
>>
>>
>>
>> On 11-04-10 2:52 PM, Joaquim Luis wrote:
>>
>>> Jeff,
>>>
>>> I get the same thing (VS2010 ). I could only link the 0.14 built for 32
>>> bits. For 64 there were some other problems that I don't remember
>>> anymore.
>>>
>>> Joaquim
>>>
>>>  Hello,
>>>>
>>>> On windows using Visual Studio 2008 I have compiled poppler.lib (from
>>>> poppler-0.16.4, using cmake), excellent, and if I cd to /frmts/pdf and
>>>> 'nmake /f makefile.vc' there are no problems; however during GDAL's
>>>> link I get the following error:
>>>>
>>>> *******
>>>> poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain@12 already
>>>> defined in gdaldllmain.
>>>> obj
>>>> Creating library gdal_i.lib and object gdal_i.exp
>>>> gdal19dev.dll : fatal error LNK1169: one or more multiply defined
>>>> symbols found
>>>> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
>>>> 9.0\VC\BIN\link.EXE"
>>>> ' : return code '0x491'
>>>> Stop.
>>>> *******
>>>>
>>>> (I have tried both GDAL-1.8.0 and trunk, same error)
>>>>
>>>> Anyone see what I am doing wrong, or give me some hints as to how to
>>>> solve this "DLLMain already defined" problem? Thanks.
>>>>
>>>> -jeff
>>>>
>>>>
>>>
>>>
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110410/5ab070f7/attachment.html
From yang3kui at gmail.com  Mon Apr 11 02:40:36 2011
From: yang3kui at gmail.com (kui yang)
Date: Mon Apr 11 02:40:38 2011
Subject: [gdal-dev] gdal_translation interpolation
Message-ID: <BANLkTin3JvLFq4Q7ct11DpcBSDhLQpSv=Q@mail.gmail.com>

hi,
What's  the interpolation method used in gdal_translate
when the size of the input dataset is changed with the
-outsize flag?

Are there different interpolation methods that can be used?
If yes, what are they and the flags to use?

Thanks in advance.

yang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/362b5151/attachment.html
From chaitanya.ch at gmail.com  Mon Apr 11 03:57:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 11 03:57:21 2011
Subject: [gdal-dev] gdal_translation interpolation
In-Reply-To: <BANLkTin3JvLFq4Q7ct11DpcBSDhLQpSv=Q@mail.gmail.com>
References: <BANLkTin3JvLFq4Q7ct11DpcBSDhLQpSv=Q@mail.gmail.com>
Message-ID: <BANLkTindkCo_yqvMg1rQaUKVq_06qc_xow@mail.gmail.com>

Yang,

gdalwarp provides a much better control over the interpolation of the data.
http://www.gdal.org/gdalwarp.html

On Mon, Apr 11, 2011 at 12:10 PM, kui yang <yang3kui@gmail.com> wrote:

> hi,
> What's  the interpolation method used in gdal_translate
> when the size of the input dataset is changed with the
> -outsize flag?
>
> Are there different interpolation methods that can be used?
> If yes, what are they and the flags to use?
>
> Thanks in advance.
>
> yang
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/ec08c0e7/attachment.html
From SnapeM at rpsgroup.com  Mon Apr 11 07:20:08 2011
From: SnapeM at rpsgroup.com (Matthew Snape)
Date: Mon Apr 11 07:30:13 2011
Subject: [gdal-dev] rotate raster cells
Message-ID: <605F55D8070C094AA2E2A9CBA2767A3C0BA47647@EXMB1.eur.rpsgroup.com>

I have a raster that I wish to rotate.  I would like to retain the
projection but create grid cells that are not aligned in the X and Y
planes.  Is it possible to use GDAL to make such a translation, and do
drivers have support for representing data in such a way?

This e-mail message and any attached file is the property of the sender and is sent in confidence to the addressee only.
Internet communications are not secure and RPS is not responsible for their abuse by third parties, any alteration or corruption in transmission or for any loss or damage caused by a virus or by other means.
 
Any advice contained in this e-mail is for information purposes only.

RPS Planning and Development Limited, company number: 02947164 (England). Registered office: Centurion Court, 85 Milton Park Abingdon Oxfordshire OX14 4RY.
RPS Group Plc web link: <http://www.rpsgroup.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/b497b6a4/attachment-0001.html
From jmckenna at gatewaygeomatics.com  Mon Apr 11 08:32:01 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Apr 11 08:32:06 2011
Subject: [gdal-dev] Windows link issue with Poppler/PDF
In-Reply-To: <BANLkTimwJUMYf-0Pt5=sdHdp4cOhAedVag@mail.gmail.com>
References: <4DA1EC33.1010102@gatewaygeomatics.com>	<4DA1EE54.3010600@ualg.pt>	<4DA1F0E4.8080506@gatewaygeomatics.com>	<4DA1F1FA.60203@ualg.pt>
	<BANLkTimwJUMYf-0Pt5=sdHdp4cOhAedVag@mail.gmail.com>
Message-ID: <4DA2F4C1.3050103@gatewaygeomatics.com>

On 11-04-10 5:42 PM, Tamas Szekeres wrote:
> You may require to set: 'ENABLE_RELOCATABLE:BOOL=OFF' in CMakeCache.txt

Hello Tamas,

That worked, now I am able to compile GDAL with Poppler 0.16.4 through 
cmake.  Thanks!

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From chaitanya.ch at gmail.com  Mon Apr 11 09:42:33 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 11 09:42:41 2011
Subject: [gdal-dev] rotate raster cells
In-Reply-To: <605F55D8070C094AA2E2A9CBA2767A3C0BA47647@EXMB1.eur.rpsgroup.com>
References: <605F55D8070C094AA2E2A9CBA2767A3C0BA47647@EXMB1.eur.rpsgroup.com>
Message-ID: <BANLkTimvq7LL9AwwvrEe=WZ1XhhA1jC8LQ@mail.gmail.com>

Matthew,

I did not understand exactly what you need but you may be able to use the
affine transformation coordinates. They can be adjusted for displacement and
rotation of the raster.

See the documentation for GDALDataset::GetGeoTransform()

On Mon, Apr 11, 2011 at 4:50 PM, Matthew Snape <SnapeM@rpsgroup.com> wrote:

>  I have a raster that I wish to rotate.  I would like to retain the
> projection but create grid cells that are not aligned in the X and Y
> planes.  Is it possible to use GDAL to make such a translation, and do
> drivers have support for representing data in such a way?
>
> This e-mail message and any attached file is the property of the sender and
> is sent in confidence to the addressee only.
>
> Internet communications are not secure and RPS is not responsible for their
> abuse by third parties, any alteration or corruption in transmission or for
> any loss or damage caused by a virus or by any other means.
> RPS Planning and Development Limited, company number: 02947164 (England).
> Registered office: Centurion Court, 85 Milton Park Abingdon Oxfordshire OX14
> 4RY.
>
> RPS Group Plc web link: http://www.rpsgroup.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/0150c265/attachment.html
From radim.blazek at gmail.com  Mon Apr 11 11:23:29 2011
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon Apr 11 11:23:31 2011
Subject: [gdal-dev] OGR_L_SetSpatialRef
In-Reply-To: <1302264139.4d9ef94b454fb@webmail.free.fr>
References: <BANLkTime3Y3kn5BO_JKreR+QqhUUZwo1yw@mail.gmail.com>
	<1302264139.4d9ef94b454fb@webmail.free.fr>
Message-ID: <BANLkTi=KNM2CLj+rA1=t+YzDUhQRqrXKLA@mail.gmail.com>

Hi,
thanks for the suggestion.
I have created enhancement ticket for that
http://trac.osgeo.org/gdal/ticket/4032 .

Radim

On Fri, Apr 8, 2011 at 2:02 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Selon Radim Blazek <radim.blazek@gmail.com>:
>
> Radim,
>
> there's no API in OGR to alter the SRS of an existing layer.
>
> However in the particular case of a shapefile, you just need to generate the
> .prj file. You can do that quite easily with the OSR API. See
> http://gdal.org/ogr/ogr__srs__api_8h.html
>
> Basically, something like :
>
> OGRSpatialReferenceH hSRS = OSRNewSpatialReference ( NULL );
> OSRImportFromXXXXX(hSRS, YYYYYY);
> OSRMorphToESRI(hSRS); /* this is the important stuff for shapefile .prj */
> char* pszOutWkt = NULL;
> OSRExportToWkt(hSRS, &pszOutWkt);
> OSRDestroySpatialReference(hSRS);
> fprintf(fp, "%s", pszOutWkt);
> CPLFree(pszOutWkt);
>
>> Hi,
>> is there a way to assign a CRS to an existing OGR layer.
>> I would like to open for example a shapefile without .prj in write
>> mode, set a CRS and save it with .prj without creating a new layer.
>>
>> Radim
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
From michael.smith at usace.army.mil  Mon Apr 11 12:21:55 2011
From: michael.smith at usace.army.mil (Smith, Michael D ERDC-CRREL-NH)
Date: Mon Apr 11 12:21:58 2011
Subject: [gdal-dev] OGR2OGR PGeo reprojection with -sql
In-Reply-To: <C9C85AC3.220B7%michael.smith@usace.army.mil>
Message-ID: <C9C8A2E3.362A2%michael.smith@usace.army.mil>

All,

Using GDAL  trunk, I can read and reproject a personal geodatabase using the
internal projection as the source projection. However, when I use ?sql (as I
need to add a new field to the output), the source projection can no longer
be read.

C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
CL_01_LDS_20101201_A.mdb CL_01_LDS_20101201_A_Contour_Smoothed
Warning 6: Normalized/laundered field name: 'Shape_Length' to 'Shape_Leng'

C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
CL_01_LDS_20101201_A.mdb  -sql "select * from
CL_01_LDS_20101201_A_Contour_Smoothed"
Can't transform coordinates, source layer has no coordinate system.  Use
-s_srs to set one.

Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/284f501c/attachment.html
From chaitanya.ch at gmail.com  Mon Apr 11 12:47:16 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 11 12:47:19 2011
Subject: [gdal-dev] OGR2OGR PGeo reprojection with -sql
In-Reply-To: <C9C8A2E3.362A2%michael.smith@usace.army.mil>
References: <C9C85AC3.220B7%michael.smith@usace.army.mil>
	<C9C8A2E3.362A2%michael.smith@usace.army.mil>
Message-ID: <BANLkTikSOOQkb2_9nXAemgSTmUtxTKvROA@mail.gmail.com>

Mike,

Can you provide the version number and perhaps a sample dataset that shows
this problem?

On Mon, Apr 11, 2011 at 9:51 PM, Smith, Michael D ERDC-CRREL-NH <
michael.smith@usace.army.mil> wrote:

>  All,
>
> Using GDAL  trunk, I can read and reproject a personal geodatabase using
> the internal projection as the source projection. However, when I use ?sql
> (as I need to add a new field to the output), the source projection can no
> longer be read.
>
> C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
> CL_01_LDS_20101201_A.mdb CL_01_LDS_20101201_A_Contour_Smoothed
> Warning 6: Normalized/laundered field name: 'Shape_Length' to 'Shape_Leng'
>
> C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
> CL_01_LDS_20101201_A.mdb  -sql "select * from
> CL_01_LDS_20101201_A_Contour_Smoothed"
> Can't transform coordinates, source layer has no coordinate system.  Use
> -s_srs to set one.
>
> Mike
>
>
> --
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/819e06aa/attachment.html
From even.rouault at mines-paris.org  Mon Apr 11 13:29:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 11 13:28:40 2011
Subject: [gdal-dev] OGR2OGR PGeo reprojection with -sql
In-Reply-To: <BANLkTikSOOQkb2_9nXAemgSTmUtxTKvROA@mail.gmail.com>
References: <C9C85AC3.220B7%michael.smith@usace.army.mil>
	<C9C8A2E3.362A2%michael.smith@usace.army.mil>
	<BANLkTikSOOQkb2_9nXAemgSTmUtxTKvROA@mail.gmail.com>
Message-ID: <201104111929.15183.even.rouault@mines-paris.org>

Le lundi 11 avril 2011 18:47:16, Chaitanya kumar CH a ?crit :
> Mike,
> 
> Can you provide the version number and perhaps a sample dataset that shows
> this problem?

No, need for it. This is the "expected" behaviour by looking at the code of 
the PGEO driver. It will be able to fetch the SRS only when working directly 
with layers, not with SQL requests. You could try specifying the -dialect 
OGRSQL option to ogr2ogr, in which case the SQL will be evaluated by OGR SQL 
engine and not by the ODBC engine. The OGRSQL engine should be able to 
retrieve the SRS from the layer.

> 
> On Mon, Apr 11, 2011 at 9:51 PM, Smith, Michael D ERDC-CRREL-NH <
> 
> michael.smith@usace.army.mil> wrote:
> >  All,
> > 
> > Using GDAL  trunk, I can read and reproject a personal geodatabase using
> > the internal projection as the source projection. However, when I use
> > ?sql (as I need to add a new field to the output), the source projection
> > can no longer be read.
> > 
> > C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
> > CL_01_LDS_20101201_A.mdb CL_01_LDS_20101201_A_Contour_Smoothed
> > Warning 6: Normalized/laundered field name: 'Shape_Length' to
> > 'Shape_Leng'
> > 
> > C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
> > CL_01_LDS_20101201_A.mdb  -sql "select * from
> > CL_01_LDS_20101201_A_Contour_Smoothed"
> > Can't transform coordinates, source layer has no coordinate system.  Use
> > -s_srs to set one.
> > 
> > Mike
> > 
> > 
> > --
> > Michael Smith
> > Remote Sensing/GIS Center
> > US Army Corps of Engineers
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From izzybitsie at gmail.com  Mon Apr 11 13:28:44 2011
From: izzybitsie at gmail.com (Dori)
Date: Mon Apr 11 13:28:47 2011
Subject: [gdal-dev] gdal_translate gif ->gtiff
Message-ID: <BANLkTikb2Lh9cb_HsNCFe6rWsdWRxyH5RA@mail.gmail.com>

Hi,

I am trying to convert a gif map downloaded from
http://aviationweather.gov/data/products/swl/ll_12_0_cl_new.gif to
georeferenced tiff.  I found out that the Projection used to create this GIF
map is Polar Stereographic from the North Pole (90.0), center meridian 97W
and height of 0.

Map corners:
Upper Left = 44.5 N 135 W
Lower Right = 19.9N 74W

I used cs2cs in FWTools-2.0.6 to obtain the points for -a_ullr in
gdal_translate command:

*cs2cs +proj=latlon +to +proj=stere +lat_0=90 +lon_0=-97 -r <<EOF
>pts_stere_xy.dat
+44.5  135.0W
+19.9 74.0W
EOF*

Points created:
* cat pts_stere_xy.dat
-3297702.30     -4220866.46 0.00
3492766.64      -8228442.54 0.00*

Then I used gdal_translate to create the geotiff image:
*ulx=-3297702.30
uly=-4220866.46
lrx=3492766.64
lry=-8228442.54

gdal_translate -of GTiff -co PROFILE=GEOTIFF -co INTERLEAVE=PIXEL -a_srs
'+proj=stere +lat_0=90 +lon_0=-97' -a_ullr $ulx $uly $lrx $lry
../maps/my_image.gif ../maps/my_image_sterePts.tif*



geotiff image information:
*Driver: GTiff/GeoTIFF
Files: my_image_sterePts.tif
Size is 864, 526
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,298.2572235629972]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",90],
    PARAMETER["central_meridian",-97],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-3297702.299999999813735,-4220866.459999999962747)
Pixel Size = (7859.339050925926131,-7618.965931558935154)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-3297702.300,-4220866.460) (135d 0'0.00"W, 44d30'0.00"N)
Lower Left  (-3297702.300,-8228442.540) (118d50'21.73"W, 20d21'8.25"N)
Upper Right ( 3492766.640,-4220866.460) ( 57d23'32.09"W, 43d34'2.00"N)
Lower Right ( 3492766.640,-8228442.540) ( 74d 0'0.00"W, 19d54'0.00"N)
Center      (   97532.170,-6224654.500) ( 96d 6'8.37"W, 38d 0'27.51"N)
Band 1 Block=864x9 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
....... color table continues .....*


*Q1: Could someone let me know if the commands I used look OK?*
I am able to display the image using openev, however I cannot display it
using another proprietary software.
I am no expert so, I may be using the tools incorrectly or something of the
like.

*Q2: Does the image info show anything seriously wrong I don't see?*

*Q3: Any suggestion on how to perform the conversion differently?*

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110411/76dcb700/attachment.html
From michael.smith at usace.army.mil  Mon Apr 11 14:32:53 2011
From: michael.smith at usace.army.mil (Smith, Michael D ERDC-CRREL-NH)
Date: Mon Apr 11 14:32:57 2011
Subject: [gdal-dev] OGR2OGR PGeo reprojection with -sql
In-Reply-To: <201104111929.15183.even.rouault@mines-paris.org>
Message-ID: <C9C8C195.362C1%michael.smith@usace.army.mil>

Thanks Even, that worked perfectly.

Mike


On 4/11/11  1:29 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:

> Le lundi 11 avril 2011 18:47:16, Chaitanya kumar CH a ?crit :
>> Mike,
>> 
>> Can you provide the version number and perhaps a sample dataset that shows
>> this problem?
> 
> No, need for it. This is the "expected" behaviour by looking at the code of
> the PGEO driver. It will be able to fetch the SRS only when working directly
> with layers, not with SQL requests. You could try specifying the -dialect
> OGRSQL option to ogr2ogr, in which case the SQL will be evaluated by OGR SQL
> engine and not by the ODBC engine. The OGRSQL engine should be able to
> retrieve the SRS from the layer.
> 
>> 
>> On Mon, Apr 11, 2011 at 9:51 PM, Smith, Michael D ERDC-CRREL-NH <
>> 
>> michael.smith@usace.army.mil> wrote:
>>>  All,
>>> 
>>> Using GDAL  trunk, I can read and reproject a personal geodatabase using
>>> the internal projection as the source projection. However, when I use
>>> ?sql (as I need to add a new field to the output), the source projection
>>> can no longer be read.
>>> 
>>> C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
>>> CL_01_LDS_20101201_A.mdb CL_01_LDS_20101201_A_Contour_Smoothed
>>> Warning 6: Normalized/laundered field name: 'Shape_Length' to
>>> 'Shape_Leng'
>>> 
>>> C:\temp>ogr2ogr -t_srs EPSG:4326 -f "ESRI Shapefile" temp1.shp
>>> CL_01_LDS_20101201_A.mdb  -sql "select * from
>>> CL_01_LDS_20101201_A_Contour_Smoothed"
>>> Can't transform coordinates, source layer has no coordinate system.  Use
>>> -s_srs to set one.
>>> 
>>> Mike
>>> 
>>> 
>>> --
>>> Michael Smith
>>> Remote Sensing/GIS Center
>>> US Army Corps of Engineers
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From alexander.bruy at gmail.com  Mon Apr 11 15:01:35 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Mon Apr 11 15:01:39 2011
Subject: [gdal-dev] Problems building GDAL 1.8.0 from sources
Message-ID: <BANLkTi=cDZ0d8CK=EWAb-U1+MdT6Hg-YQQ@mail.gmail.com>

Hi all,

I try to build GDAL 1.8.0 under Salckware 13.1 with GRASS support.
As first step I build GDAL without GRASS support with this options
./configure --prefix=/usr \
  --exec-prefix=$PKG/usr \
  --with-pymoddir=/usr/lib/python/site-packages \
  --with-libtiff=/usr/lib \
  --with-geotiff=/usr/lib \
  --with-geos=yes \
  --with-jasper=yes \
  --with-sqlite3=/usr \
  --with-poppler=yes \
  --with-static-proj4 \
  --with-python \
  --program-prefix= \
  --program-suffix= \
  --build=$CHOST-slackware-linux

With this options GDAL uses system (external) libs and libtiff without BigTIFF
LIBTIFF support:           external (BigTIFF=no)

But ./configure script can't find SQLite

checking for sqlite3_open in -lsqlite3... no
checking for SQLite3 library >= 3.0.0... disabled

SQLite 3.6.23.1 installed and all libs and includes available.
I think this is because libdl - the dynamic linker library don't
automatically supported on Slackware. This is first issue.

Ok, I build GDAL without SQLite, then I build and install
GRASS 6.4.1RC1. Now when I try to configure GDAL
with GRASS as
./configure --prefix=/usr \
  --exec-prefix=$PKG/usr \
  --with-pymoddir=/usr/lib/python/site-packages \
  --with-libtiff=/usr/lib \
  --with-geotiff=/usr/lib \
  --with-geos=yes \
  --with-jasper=yes \
  --with-sqlite3=/usr \
  --with-poppler=yes \
  --with-grass=/usr/grass-6.4.1RC1 \
  --with-static-proj4 \
  --with-python \
  --program-prefix= \
  --program-suffix= \
  --build=$CHOST-slackware-linux

I get strange output about libtiff support
LIBTIFF support:           external (BigTIFF=yes)

Strange, previous build have BigTIFF=no...
Also building with this config failed with errors

geotiff.cpp: In member function ?virtual CPLErr
GTiffRasterBand::SetColorTable(GDALColorTable*)?:
geotiff.cpp:1383: error: ?TIFFUnsetField? was not declared in this scope
geotiff.cpp: In member function ?void GTiffDataset::WriteGeoTIFFInfo()?:
geotiff.cpp:4183: error: ?TIFFUnsetField? was not declared in this scope
geotiff.cpp: In static member function ?static int
GTiffDataset::WriteMetadata(GDALDataset*, TIFF*, int, const char*,
const char*, char**, int)?:
geotiff.cpp:4635: error: ?TIFFUnsetField? was not declared in this scope
make[2]: *** [../o/geotiff.lo] Error 1
make[2]: Leaving directory `/tmp/txz/gdal-1.8.0/frmts/gtiff'
make[1]: *** [gtiff-install-obj] Error 2
make[1]: Leaving directory `/tmp/txz/gdal-1.8.0/frmts'
make: *** [frmts-target] Error 2

Any thoughts why this happens and how can be fixed?

Thanks
-- 
Alexander Bruy
From chaitanya.ch at gmail.com  Mon Apr 11 15:17:42 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 11 15:17:44 2011
Subject: [gdal-dev] Problems building GDAL 1.8.0 from sources
In-Reply-To: <BANLkTi=cDZ0d8CK=EWAb-U1+MdT6Hg-YQQ@mail.gmail.com>
References: <BANLkTi=cDZ0d8CK=EWAb-U1+MdT6Hg-YQQ@mail.gmail.com>
Message-ID: <BANLkTi=EHc0GCkB6xGO+wS3DhAUCQ8um7w@mail.gmail.com>

Alexander,

Changing the configuration can sometimes mess up the build process. Try your
latest configure command on a fresh source and build again.

On Tue, Apr 12, 2011 at 12:31 AM, Alexander Bruy
<alexander.bruy@gmail.com>wrote:

> Hi all,
>
> I try to build GDAL 1.8.0 under Salckware 13.1 with GRASS support.
> As first step I build GDAL without GRASS support with this options
> ./configure --prefix=/usr \
>  --exec-prefix=$PKG/usr \
>  --with-pymoddir=/usr/lib/python/site-packages \
>  --with-libtiff=/usr/lib \
>  --with-geotiff=/usr/lib \
>  --with-geos=yes \
>  --with-jasper=yes \
>  --with-sqlite3=/usr \
>  --with-poppler=yes \
>  --with-static-proj4 \
>  --with-python \
>  --program-prefix= \
>  --program-suffix= \
>  --build=$CHOST-slackware-linux
>
> With this options GDAL uses system (external) libs and libtiff without
> BigTIFF
> LIBTIFF support:           external (BigTIFF=no)
>
> But ./configure script can't find SQLite
>
> checking for sqlite3_open in -lsqlite3... no
> checking for SQLite3 library >= 3.0.0... disabled
>
> SQLite 3.6.23.1 installed and all libs and includes available.
> I think this is because libdl - the dynamic linker library don't
> automatically supported on Slackware. This is first issue.
>
> Ok, I build GDAL without SQLite, then I build and install
> GRASS 6.4.1RC1. Now when I try to configure GDAL
> with GRASS as
> ./configure --prefix=/usr \
>  --exec-prefix=$PKG/usr \
>  --with-pymoddir=/usr/lib/python/site-packages \
>  --with-libtiff=/usr/lib \
>  --with-geotiff=/usr/lib \
>  --with-geos=yes \
>  --with-jasper=yes \
>  --with-sqlite3=/usr \
>  --with-poppler=yes \
>  --with-grass=/usr/grass-6.4.1RC1 \
>  --with-static-proj4 \
>  --with-python \
>  --program-prefix= \
>  --program-suffix= \
>  --build=$CHOST-slackware-linux
>
> I get strange output about libtiff support
> LIBTIFF support:           external (BigTIFF=yes)
>
> Strange, previous build have BigTIFF=no...
> Also building with this config failed with errors
>
> geotiff.cpp: In member function ?virtual CPLErr
> GTiffRasterBand::SetColorTable(GDALColorTable*)?:
> geotiff.cpp:1383: error: ?TIFFUnsetField? was not declared in this scope
> geotiff.cpp: In member function ?void GTiffDataset::WriteGeoTIFFInfo()?:
> geotiff.cpp:4183: error: ?TIFFUnsetField? was not declared in this scope
> geotiff.cpp: In static member function ?static int
> GTiffDataset::WriteMetadata(GDALDataset*, TIFF*, int, const char*,
> const char*, char**, int)?:
> geotiff.cpp:4635: error: ?TIFFUnsetField? was not declared in this scope
> make[2]: *** [../o/geotiff.lo] Error 1
> make[2]: Leaving directory `/tmp/txz/gdal-1.8.0/frmts/gtiff'
> make[1]: *** [gtiff-install-obj] Error 2
> make[1]: Leaving directory `/tmp/txz/gdal-1.8.0/frmts'
> make: *** [frmts-target] Error 2
>
> Any thoughts why this happens and how can be fixed?
>
> Thanks
> --
> Alexander Bruy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/ff876959/attachment.html
From goocreations at gmail.com  Tue Apr 12 03:17:32 2011
From: goocreations at gmail.com (Goo Creations)
Date: Tue Apr 12 03:17:34 2011
Subject: [gdal-dev] Removing GCPs from tiff
Message-ID: <BANLkTi=fOFWUR-skZn5-1ZL3o1hDEp77mw@mail.gmail.com>

Hi all

I've got a tiff file with a number of stored GCPs. How can I remove these
GCPs from the file?

I've tried:

 SetGCPs<http://www.gdal.org/classGDALDataset.html#3c812b05467213f05055c1f18438d874>(int
nGCPCount, const GDAL_GCP
<http://www.gdal.org/structGDAL__GCP.html>*pasGCPList, const char
*pszGCPProjection)

with the first parameter of 0, but without luck. Seems like SetGCPs only
adds the GCPs, rather than re-assigns the entire stored set.

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/9f870e88/attachment.html
From aperezcarro at yahoo.es  Tue Apr 12 03:26:45 2011
From: aperezcarro at yahoo.es (Antonio P.)
Date: Tue Apr 12 03:24:38 2011
Subject: [gdal-dev] About the legality of import - export 
References: <BANLkTi=cDZ0d8CK=EWAb-U1+MdT6Hg-YQQ@mail.gmail.com>
Message-ID: <8D77EEA1939341968EB4622F13D29AFA@zalmanpc>

What are your experience about this topic?
For example, we have dwg, shp, pdf files : 
Can I distribute a program that import an export data in these formats ?
And what about writing data into an existing files ?

What legal implications we have to be in mind?
Thanks
From jukka.rahkonen at mmmtike.fi  Tue Apr 12 03:29:13 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Apr 12 03:29:29 2011
Subject: [gdal-dev] Re: Removing GCPs from tiff
References: <BANLkTi=fOFWUR-skZn5-1ZL3o1hDEp77mw@mail.gmail.com>
Message-ID: <loom.20110412T092513-860@post.gmane.org>

Goo Creations <goocreations <at> gmail.com> writes:

> 
> Hi allI've got a tiff file with a number of stored GCPs. How can I remove
these GCPs from the file?I've tried:?SetGCPs(int nGCPCount, const GDAL_GCP
*pasGCPList, const char *pszGCPProjection)with the first parameter of 0, but
without luck. Seems like SetGCPs only adds the GCPs, rather than re-assigns the
entire stored set.Chris

If you just want to do the job, use gdal_translate and write a new tiff file by
using -co PROFILE=BASELINE. If you want to program I can't unfortunately help.

-Jukka Rahkonen-

From natashachatterjee at rediffmail.com  Tue Apr 12 06:35:20 2011
From: natashachatterjee at rediffmail.com (natasha  chatterjee)
Date: Tue Apr 12 06:42:38 2011
Subject: [gdal-dev] Problems in building java bindings
Message-ID: <20110412103520.9631.qmail@f4mail-235-143.rediffmail.com>

Hello
        I need to build GDAL in java.
        I already followed the steps mentioned in 
        
        http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructions

        I am successful till compiling GDAL but I am stuck from the 
        next step --Build java bindings

         Please guide me how to proceed further.what are the steps I 
         need to follow(what all settings are required?what does this line mean "use nmake/cl.exe to build the C++ side of the Java bindings and ANT/javac") 

Do I need to set these files(gdal.jar, gdalconstjni.dll, gdaljni.dll, ogrjni.dll and osrjni.dll.) prior to generation of java bindings or these'll get created after I run nmake /f makefile.vc java automatically.
 
can anyone
           please elaborate the steps 
         from "Build java bindings" onwards(That'll be truely helpful.

         Kindly reply back soon as I am not able to move ahead.

Thanks & Regards
Natasha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/218e1a6f/attachment.html
From warmerdam at pobox.com  Tue Apr 12 09:24:55 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 12 09:24:59 2011
Subject: [gdal-dev] About the legality of import - export
In-Reply-To: <8D77EEA1939341968EB4622F13D29AFA@zalmanpc>
References: <BANLkTi=cDZ0d8CK=EWAb-U1+MdT6Hg-YQQ@mail.gmail.com>
	<8D77EEA1939341968EB4622F13D29AFA@zalmanpc>
Message-ID: <4DA452A7.1010509@pobox.com>

On 11-04-12 03:26 AM, Antonio P. wrote:
> What are your experience about this topic?
> For example, we have dwg, shp, pdf files : Can I distribute a program that
> import an export data in these formats ?
> And what about writing data into an existing files ?
>
> What legal implications we have to be in mind?
> Thanks

Antionio,

There are no legal issues with reading and writing shapefiles.  The format
is public and GDAL/OGR does not use any code with unusual licensing for this
format.

For PDF I am guessing you are using the Poppler based PDF driver in GDAL.
If you build with Poppler you should review it's licensing information which
is, I believe, GPL.  So if you distribute a program using GDAL/OGR and Poppler
there are legal ramifications for your program.  Essentially you would need to
provide source code for the program linked with GDAL.

For DWG, I'm not sure what you are planning on.  GDAL/OGR does not currently
read DWG.  There is some discussion of a DWG reader based on the Open Design
Alliance libraries.  If that comes to fruition there will be special legal
issues due to their proprietary licensing.

Note that the above addresses responsibility for software distribution.
For any given file there may be other restrictions on it from the creator
or distributor of the data.  I can't address that here.  But generally
ensuring those requirements are followed will be the responsibility of
whoever accepts the data - not the software distributor.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Apr 12 09:25:43 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 12 09:25:46 2011
Subject: [gdal-dev] Removing GCPs from tiff
In-Reply-To: <BANLkTi=fOFWUR-skZn5-1ZL3o1hDEp77mw@mail.gmail.com>
References: <BANLkTi=fOFWUR-skZn5-1ZL3o1hDEp77mw@mail.gmail.com>
Message-ID: <4DA452D7.2040802@pobox.com>

On 11-04-12 03:17 AM, Goo Creations wrote:
> Hi all
>
> I've got a tiff file with a number of stored GCPs. How can I remove these GCPs
> from the file?
>
> I've tried:
>
> SetGCPs
> <http://www.gdal.org/classGDALDataset.html#3c812b05467213f05055c1f18438d874>(int nGCPCount,
> const GDAL_GCP <http://www.gdal.org/structGDAL__GCP.html> *pasGCPList, const
> char *pszGCPProjection)
>
> with the first parameter of 0, but without luck. Seems like SetGCPs only adds
> the GCPs, rather than re-assigns the entire stored set.

Chris,

Jukka's suggestion is good.  I would also encourage you to file a ticket on
this.  Calling SetGCPs() with zero GCPs *ought* to clear them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Apr  7 07:27:45 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 12 09:46:16 2011
Subject: Fwd: [gdal-dev] problem with decimal precision (SAGA driver)
In-Reply-To: <4D9D7807.4070507@laserdata.at>
References: <4D9D7807.4070507@laserdata.at>
Message-ID: <1302175665.4d9d9fb1107df@webmail.free.fr>

Selon Volker Wichmann <wichmann@laserdata.at>:

Well, is this really a problem... ? I mean 12181.299999999999 = 12181.3 for most
purposes. Sometimes you can have different decimal representations for the same
IEEE number... I'm not sure this is really something adressed in GDAL drivers.

But if you are really annoyed with this, you could look at OGRFormatDouble()
(ogr/ogrutils.cpp) that has some ugly and fragile (needed tweaking because MSVC
or GCC don't behave the same when printing a floating point number) logic to
detect and remove trailing 999999x or 000000x. It is used when outputting
coordinates into WKT, GML or KML.

> Hi Even,
>
> since you helped so much to implement the SAGA driver, I'm writing to
> you directly (I got no reply on the mailing list yet). Do you have an
> idea on how to circumvent this problem?
>
> Thanks,
> Volker
>
>
>
>
> -------- Original Message --------
> Subject: 	[gdal-dev] problem with decimal precision (SAGA driver)
> Date: 	Mon, 04 Apr 2011 15:11:21 +0200
> From: 	Volker Wichmann <Volker.Wichmann@uibk.ac.at>
> To: 	gdal-dev <gdal-dev@lists.osgeo.org>
>
>
> Hi,
>
> we encountered a problem with decimal precision when converting a SAGA
> grid to ESRI ASCII.
>
> I expect the problem arising from ASCII to double conversion by atof()
> and/or from the Geotransform (pixel as point to pixel as area).
>
> The SAGA header looks like
>
> POSITION_XMIN   = 12181.8000000000
> POSITION_YMIN   = 219184.8800000000
> CELLSIZE        = 1.0000000000
>
> The final ESRI ASCII header looks like
>
> xllcorner    12181.299999999999
> yllcorner    219184.380000000005
>
> instead of
> xllcorner    12181.3
> yllcorner    219184.38
>
> How is this problem handled in other drivers (using strtod(),
> stringstream, ...)?
>
> The relevant lines of code in sagadataset.cpp
> (http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/saga/sagadataset.cpp)
> are:
>
> 406            dXmin = atof(papszTokens[1]);
> 408            dYmin = atof(papszTokens[1]);
> 410            dCellsize = atof(papszTokens[1]);
>
> 601        padfGeoTransform[0] = poGRB->m_Xmin - poGRB->m_Cellsize / 2;
> 602        padfGeoTransform[3] = poGRB->m_Ymin + (nRasterYSize - 1) *
> poGRB->m_Cellsize + poGRB->m_Cellsize / 2;
>
>
>
> Thanks,
> Volker
>
>
>


From aborruso at tin.it  Tue Apr 12 10:16:47 2011
From: aborruso at tin.it (iomeneandrei)
Date: Tue Apr 12 10:16:49 2011
Subject: [gdal-dev] OGR and spatialite View
Message-ID: <1302617807950-6265313.post@n2.nabble.com>

Dear all,
I have created a spatialite View and ogrinfo does not see any spatialite
View.

Is there some error in my data? Is it OGR able to read spatialite View?

Thank you,

a

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-and-spatialite-View-tp6265313p6265313.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From kingkastle4004 at gmail.com  Tue Apr 12 10:24:35 2011
From: kingkastle4004 at gmail.com (kingkastle)
Date: Tue Apr 12 10:24:38 2011
Subject: [gdal-dev] gdalinfo doesn't show GEOS projection info
Message-ID: <1302618275587-6265339.post@n2.nabble.com>

Greetings,

I'm working with hdf5 file  with the following attributes:

(obtained with hdfview)
http://osgeo-org.1803224.n2.nabble.com/file/n6265339/hdf5view.bmp 

However, when I gdalinfo the file, I get the following information:
Driver: HDF5Image/HDF5 Dataset
Files: none associated
Size is 1701, 651
Coordinate System is:
GEOGCS["WGS 84",
   DATUM["WGS_1984",
       SPHEROID["WGS 84",6378137,298.257223563,
           AUTHORITY["EPSG","7030"]],
       TOWGS84[0,0,0,0,0,0,0],
       AUTHORITY["EPSG","6326"]],
   PRIMEM["Greenwich",0,
       AUTHORITY["EPSG","8901"]],
   UNIT["degree",0.0174532925199433,
       AUTHORITY["EPSG","9108"]],
   AUTHORITY["EPSG","4326"]]
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  651.0)
Upper Right ( 1701.0,    0.0)
Lower Right ( 1701.0,  651.0)
Center      (  850.5,  325.5)
Band 1 Block=1701x1 Type=Int16, ColorInterp=Undefined
 Metadata:
   DSSF:CLASS=Data
   DSSF:PRODUCT=DSSF
   DSSF:PRODUCT_ID=111
   DSSF:N_COLS=1701
   DSSF:N_LINES=651
   DSSF:NB_BYTES=2
   DSSF:SCALING_FACTOR=10
   DSSF:OFFSET=0
   DSSF:MISSING_VALUE=-1
   DSSF:UNITS=W/m**2
   DSSF:CAL_SLOPE=1
   DSSF:CAL_OFFSET=0

So, basically I can't see in the gdalinfo the following information:

+) Proyection used
+) Origin
+) Pixel size

In fact, when I do gdal-translate the file created is not georeferenced
rightly.

In my opinion, the problem is that the hdf5 attributes are imcomplete or not
rightly defined, 

Please let me know your opinion

Many thanks in advance and best regards,

Rafa


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdalinfo-doesn-t-show-GEOS-projection-info-tp6265339p6265339.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From DCarreira at edia.pt  Tue Apr 12 10:33:39 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue Apr 12 10:42:46 2011
Subject: [gdal-dev] ArcSDE: connection times too long
Message-ID: <58C383B0A191E747BE79503F3EEA22BF7630A161C7@beja012.edia.pt>

Hi listers.

I'm seing a very long delay while connecting to ArcSDE. Even if I just do ogrinfo on a single layer I still have to wait a few minutes before I get anything back.

Any parameter I can use?

Thanks,
Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/03219632/attachment.html
From warmerdam at pobox.com  Tue Apr 12 10:44:06 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 12 10:44:12 2011
Subject: [gdal-dev] gdalinfo doesn't show GEOS projection info
In-Reply-To: <1302618275587-6265339.post@n2.nabble.com>
References: <1302618275587-6265339.post@n2.nabble.com>
Message-ID: <4DA46536.9080306@pobox.com>

On 11-04-12 10:24 AM, kingkastle wrote:
> Greetings,
>
> I'm working with hdf5 file  with the following attributes:
>
> (obtained with hdfview)
> http://osgeo-org.1803224.n2.nabble.com/file/n6265339/hdf5view.bmp
>
> However, when I gdalinfo the file, I get the following information:
> Driver: HDF5Image/HDF5 Dataset
> Files: none associated
> Size is 1701, 651
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  651.0)
> Upper Right ( 1701.0,    0.0)
> Lower Right ( 1701.0,  651.0)
> Center      (  850.5,  325.5)
...
> So, basically I can't see in the gdalinfo the following information:
>
> +) Proyection used
> +) Origin
> +) Pixel size
>
> In fact, when I do gdal-translate the file created is not georeferenced
> rightly.
>
> In my opinion, the problem is that the hdf5 attributes are imcomplete or not
> rightly defined,
>
> Please let me know your opinion
>
> Many thanks in advance and best regards,

Rafa,

One challenge with HDF5 (and HDF4) products is that coordinate system
and other georeferencing metadata may be included in a wide variety of
forms.  This aspect is not well standardized - or at least the standards
that exist are often not followed.  So, in this case, GDAL is not able
to deduce the coordinate system or geotransform.  It seems like there
*might* be enough metadata available to construct coordinate system
information for this dataset but it would likely require a fair amount
of fooling around to implement and verify.

If the data is public you might want to file a GDAL ticket with a pointer
to the dataset and the metadata report along with a request to support
this georeferencing format.  But I must confess I am unlikely to work
on it unless I have client interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ricardo.garcia.silva at gmail.com  Tue Apr 12 10:45:12 2011
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue Apr 12 10:45:35 2011
Subject: [gdal-dev] gdalinfo doesn't show GEOS projection info
In-Reply-To: <1302618275587-6265339.post@n2.nabble.com>
References: <1302618275587-6265339.post@n2.nabble.com>
Message-ID: <BANLkTinL9WCb90fvUZ3L1ZRH_AHqdw25_g@mail.gmail.com>

Hi Rafa

According to my research on this matter, these HDF5 files (from
LANDSAF, I presume) are not georeferenced in a way that GDAL can
recognize.

There is in fact some information regarding the coordinate system in
the HDF5 file, but it is stored on the metadata of the root of the
HDF5 file, which is something that GDAL can't read (at least my 1.7.3
version can't). The solution I have found for this is to use some
other program (in my case, the pytables python module) to extract this
information.
After having this info it is still necessary to add some GCPs to the
files, in order to georeference them (still with the GEOS projection)
in a way that is understandable by GDAL. In order to obtain the
coordinates of the GCPs, I am using some reference formulas from the
LANDSAF PUMs, which will convert from pixel coordinate to latlon and
then proj4's cs2cs utility to convert them to the GEOS projection.
Finally I use the gdal_translate utility to add the GCPs to the file.

In the end, a gdalwarp can be used to reproject the file from GEOS
projection to another projection.

This is basically what I am doing in the script that I sent you
(off-list). If someone has another technique for georeferencing
LANDSAF HDF5 files I'd also be very interesetd in it ;)

Best regards


On Tue, Apr 12, 2011 at 3:24 PM, kingkastle <kingkastle4004@gmail.com> wrote:
> Greetings,
>
> I'm working with hdf5 file ?with the following attributes:
>
> (obtained with hdfview)
> http://osgeo-org.1803224.n2.nabble.com/file/n6265339/hdf5view.bmp
>
> However, when I gdalinfo the file, I get the following information:
> Driver: HDF5Image/HDF5 Dataset
> Files: none associated
> Size is 1701, 651
> Coordinate System is:
> GEOGCS["WGS 84",
> ? DATUM["WGS_1984",
> ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? AUTHORITY["EPSG","7030"]],
> ? ? ? TOWGS84[0,0,0,0,0,0,0],
> ? ? ? AUTHORITY["EPSG","6326"]],
> ? PRIMEM["Greenwich",0,
> ? ? ? AUTHORITY["EPSG","8901"]],
> ? UNIT["degree",0.0174532925199433,
> ? ? ? AUTHORITY["EPSG","9108"]],
> ? AUTHORITY["EPSG","4326"]]
> Corner Coordinates:
> Upper Left ?( ? ?0.0, ? ?0.0)
> Lower Left ?( ? ?0.0, ?651.0)
> Upper Right ( 1701.0, ? ?0.0)
> Lower Right ( 1701.0, ?651.0)
> Center ? ? ?( ?850.5, ?325.5)
> Band 1 Block=1701x1 Type=Int16, ColorInterp=Undefined
> ?Metadata:
> ? DSSF:CLASS=Data
> ? DSSF:PRODUCT=DSSF
> ? DSSF:PRODUCT_ID=111
> ? DSSF:N_COLS=1701
> ? DSSF:N_LINES=651
> ? DSSF:NB_BYTES=2
> ? DSSF:SCALING_FACTOR=10
> ? DSSF:OFFSET=0
> ? DSSF:MISSING_VALUE=-1
> ? DSSF:UNITS=W/m**2
> ? DSSF:CAL_SLOPE=1
> ? DSSF:CAL_OFFSET=0
>
> So, basically I can't see in the gdalinfo the following information:
>
> +) Proyection used
> +) Origin
> +) Pixel size
>
> In fact, when I do gdal-translate the file created is not georeferenced
> rightly.
>
> In my opinion, the problem is that the hdf5 attributes are imcomplete or not
> rightly defined,
>
> Please let me know your opinion
>
> Many thanks in advance and best regards,
>
> Rafa
>
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdalinfo-doesn-t-show-GEOS-projection-info-tp6265339p6265339.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
___________________________ ___ __
Ricardo Garcia Silva
From warmerdam at pobox.com  Tue Apr 12 10:47:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 12 10:47:31 2011
Subject: [gdal-dev] ArcSDE: connection times too long
In-Reply-To: <58C383B0A191E747BE79503F3EEA22BF7630A161C7@beja012.edia.pt>
References: <58C383B0A191E747BE79503F3EEA22BF7630A161C7@beja012.edia.pt>
Message-ID: <4DA46600.7070000@pobox.com>

On 11-04-12 10:33 AM, Duarte Carreira wrote:
> Hi listers.
>
> I?m seing a very long delay while connecting to ArcSDE. Even if I just do
> ogrinfo on a single layer I still have to wait a few minutes before I get
> anything back.
>
> Any parameter I can use?

Duarte,

The SDE driver docs at http://www.gdal.org/ogr/drv_sde.html says:

"If the layer parameter is specified then the SDE driver is able to skip 
reading the summary metadata for each layer; skipping this step can be a 
significant time savings."

So try listing the layer of interest in the connection string.


   SDE:server,instance,database,username,password,layer

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Tue Apr 12 10:49:16 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 12 10:49:20 2011
Subject: [gdal-dev] OGR and spatialite View
In-Reply-To: <1302617807950-6265313.post@n2.nabble.com>
References: <1302617807950-6265313.post@n2.nabble.com>
Message-ID: <BANLkTim__k8u4EASKs68UD5yFE4VU5eu4w@mail.gmail.com>

Andrea,

Try to explicitly ask for the view as a layer with ogrinfo. You can also try
to set the SQLITE_LIST_ALL_TABLES environment variable to TRUE.

On Tue, Apr 12, 2011 at 7:46 PM, iomeneandrei <aborruso@tin.it> wrote:

> Dear all,
> I have created a spatialite View and ogrinfo does not see any spatialite
> View.
>
> Is there some error in my data? Is it OGR able to read spatialite View?
>
> Thank you,
>
> a
>
> -----
> Andrea Borruso
>
> ----------------------------------------------------
> email: aborruso@tin.it
> website: http://blog.spaziogis.it
> my 2.0 life: http://aborruso.spaziogis.it
> feed: http://feeds2.feedburner.com/Tanto
> 38? 7' 48" N, 13? 21' 9" E
> ----------------------------------------------------
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/OGR-and-spatialite-View-tp6265313p6265313.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/f76a6ec9/attachment.html
From EAdam at co.lincoln.or.us  Tue Apr 12 11:26:02 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Tue Apr 12 11:26:57 2011
Subject: [gdal-dev] ftp user and password with vsizip/vsicurl
References: <4DA39127020000CE00044191@mail.co.lincoln.or.us>
	<4DA40C9A020000CE000441A7@mail.co.lincoln.or.us>
Message-ID: <4DA40C96.4F75.00CE.0@co.lincoln.or.us>

Is it possible to use vsizip and vsicurl on a password protected ftp site?  

Something like this command with user and password passed somehow:

ogrinfo -ro -al -so /vsizip/vsicurl/ftp://example.com/foldername/file.zip/example.shp 

I rather hopefully tried some switches, -user:user -password:password, which did not work.

Thanks for the vsi support, it is awesome!  For vsizip/gz/tar, I find this wiki page very useful, http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip  I can find all the gdal drivers that support virtual files by following the directions on that page (driver marked with 'v' when running 'gdalinfo --formats').  I tried a similar approach for ogr (ogrinfo --formats and looked for 'v') without learning much.  Is there a way to determine virtual file support in ogr?  I found that shp is supported by successfully testing it and recalling an IRC mention.  

Most of what I find for vsicurl is here, http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News  Is there somewhere else that I should look for documentation on vsicurl?  I gave a shot at adding information to the vsizip wiki page, can someone review it to make sure that I am not spreading false information and correct or delete it if needed?  I added to the vsizip page rather than making a different page since vsicurl is often used with vsizip.  Currently, the example commands that I put there give an error claiming that the .shx is corrupt.  For instance, ogrinfo -ro -al -so /vsicurl/http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/data/poly.shp


Any help appreciated, Eli

From ampouillle at gmail.com  Tue Apr 12 11:44:11 2011
From: ampouillle at gmail.com (Christophe B)
Date: Tue Apr 12 11:44:13 2011
Subject: [gdal-dev] Connection to SQL Server 2008
Message-ID: <BANLkTi=rL+n0U4sEN5qfCFTcvwsnZzpS=w@mail.gmail.com>

Hello List,

We have encountered a problem on version 1.7 of QGIS (dev) can support the
connection to SQL Server 2008.

When it connects to the base layer does not contain any vector object and
the attribute table contains the correct columns and many rows, but they all
contain "ERROR" ...

Same problem on version 1.8 of GDAL :

When it connects to the base layer for export table to shapefile, error is :


Unable to open datasource
`MSSQL:server=.\SQLSERVER;database=ObservatoireCommerce;tables=dbo.T_
CommuneGeographie;trusted_connection=yes' with the fo
llowing drivers.

One of you has it managed to run this connection?

Thank you!

Christophe Baume

Code :

the sql table(2008) is defined as :

CREATE TABLE [dbo].[T_CommuneGeographie](

      [COMGEO_Id] [uniqueidentifier] ROWGUIDCOL  NOT NULL,

      [COMGEO_Commune_COM_Id] [uniqueidentifier] NOT NULL,

      [COMGEO_Geographie] [geography] NOT NULL,

      [COMGEO_DateDebut] [date] NULL,

      [COMGEO_DateFin] [date] NULL,

CONSTRAINT [PK_T_CommuneGeographie] PRIMARY KEY CLUSTERED

(

      [COMGEO_Id] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF
, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

) ON [PRIMARY]



the lines entered into the console:


ogr2ogr -overwrite -f "ESRI Shapefile" "c:/test/test.shp"
"MSSQL:server=.\SQLSERVER;database=ObservatoireCommerce;tables=dbo.T_CommuneGeographie;trusted_connection=yes"

the lines entered into the python console:
conn_string =
"MSSQL:server=.\SQLExpress;database=ObservatoireCommerce;trusted_connection=yes;tables=dbo.T_CommuneGeographie"


qgis.utils.iface.addVectorLayer(conn_string,'test','ogr')
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/4c4b8414/attachment.html
From DCarreira at edia.pt  Tue Apr 12 12:12:35 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue Apr 12 12:21:43 2011
Subject: [gdal-dev] ArcSDE: connection times too long
In-Reply-To: <4DA46600.7070000@pobox.com>
References: <58C383B0A191E747BE79503F3EEA22BF7630A161C7@beja012.edia.pt>
	<4DA46600.7070000@pobox.com>
Message-ID: <58C383B0A191E747BE79503F3EEA22BF7630A161F8@beja012.edia.pt>

Hi Frank.

I do that already:
ogrinfo -so -ro SDE:server,5151,,user,pdw user.featureclass

Notice that I separate the layer name with a blank space. Using a comma does not work for me (wonder if the docs are right on that??).

I still wait quite a bit. This is a mid-sized db, with some 1200 feature classes...

Duarte

-----Mensagem original-----
De: Frank Warmerdam [mailto:warmerdam@pobox.com]
Enviada: ter?a-feira, 12 de Abril de 2011 15:47
Para: gdal-dev@lists.osgeo.org
Assunto: Re: [gdal-dev] ArcSDE: connection times too long

On 11-04-12 10:33 AM, Duarte Carreira wrote:
> Hi listers.
>
> I'm seing a very long delay while connecting to ArcSDE. Even if I just do
> ogrinfo on a single layer I still have to wait a few minutes before I get
> anything back.
>
> Any parameter I can use?

Duarte,

The SDE driver docs at http://www.gdal.org/ogr/drv_sde.html says:

"If the layer parameter is specified then the SDE driver is able to skip
reading the summary metadata for each layer; skipping this step can be a
significant time savings."

So try listing the layer of interest in the connection string.


   SDE:server,instance,database,username,password,layer

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Apr 12 12:31:50 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 12 12:31:56 2011
Subject: [gdal-dev] ArcSDE: connection times too long
In-Reply-To: <58C383B0A191E747BE79503F3EEA22BF7630A161F8@beja012.edia.pt>
References: <58C383B0A191E747BE79503F3EEA22BF7630A161C7@beja012.edia.pt>
	<4DA46600.7070000@pobox.com>
	<58C383B0A191E747BE79503F3EEA22BF7630A161F8@beja012.edia.pt>
Message-ID: <4DA47E76.2030709@pobox.com>

On 11-04-12 12:12 PM, Duarte Carreira wrote:
> Hi Frank.
>
> I do that already: ogrinfo -so -ro SDE:server,5151,,user,pdw
> user.featureclass
>
> Notice that I separate the layer name with a blank space. Using a comma does
> not work for me (wonder if the docs are right on that??).
>
> I still wait quite a bit. This is a mid-sized db, with some 1200 feature
> classes...

Duarte,

In your case you are passing user.featureclass as the layer name to
ogrinfo telling it that you only want to report on that layer.  But
to avoid opening all layers, you should also include it in the connection
string.

eg.

ogrinfo -so -ro SDE:server,5151,,user,pdw,user.featureclass user.featureclass

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From DCarreira at edia.pt  Tue Apr 12 12:38:09 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue Apr 12 12:47:19 2011
Subject: [gdal-dev] ArcSDE: connection times too long
In-Reply-To: <4DA47E76.2030709@pobox.com>
References: <58C383B0A191E747BE79503F3EEA22BF7630A161C7@beja012.edia.pt>
	<4DA46600.7070000@pobox.com>
	<58C383B0A191E747BE79503F3EEA22BF7630A161F8@beja012.edia.pt>
	<4DA47E76.2030709@pobox.com>
Message-ID: <58C383B0A191E747BE79503F3EEA22BF7630A16208@beja012.edia.pt>

That never occurred to me!

Ok, so I measured 48secs sharp to get ogrinfo results, by including the featureclass name in the connection and after that too (like you pointed out).

Then got 45secs with just the name in the connection, and got all layers listed.

Don't know what to make of this...

Duarte


-----Mensagem original-----
De: Frank Warmerdam [mailto:warmerdam@pobox.com]
Enviada: ter?a-feira, 12 de Abril de 2011 17:32
Para: Duarte Carreira
Cc: gdal-dev@lists.osgeo.org
Assunto: Re: [gdal-dev] ArcSDE: connection times too long

On 11-04-12 12:12 PM, Duarte Carreira wrote:
> Hi Frank.
>
> I do that already: ogrinfo -so -ro SDE:server,5151,,user,pdw
> user.featureclass
>
> Notice that I separate the layer name with a blank space. Using a comma does
> not work for me (wonder if the docs are right on that??).
>
> I still wait quite a bit. This is a mid-sized db, with some 1200 feature
> classes...

Duarte,

In your case you are passing user.featureclass as the layer name to
ogrinfo telling it that you only want to report on that layer.  But
to avoid opening all layers, you should also include it in the connection
string.

eg.

ogrinfo -so -ro SDE:server,5151,,user,pdw,user.featureclass user.featureclass

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From peifer at gmx.eu  Tue Apr 12 13:08:24 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Apr 12 13:08:30 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
Message-ID: <4DA48708.8000105@gmx.eu>

On 04/04/2011 05:05, Ragi Burhum wrote:
> Hello list,
>
> I am trying to test a new version of the FileGDB driver for OGR, but I
> lack enough FileGDBs to test :)

Is the lack of FileGDBs still an issue? At work, we have several 
hundreds of them and I could check if I can make some available.

> If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB
> driver (and report back), feel free to grab a gdal-trunk binary I made
> for Windows.

A related question: will there ever be a FileGDB driver for a 
non-Windows OS? Is this feasible at all?

Hermann
From michael.smith at usace.army.mil  Tue Apr 12 13:10:15 2011
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Tue Apr 12 13:10:18 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <4DA48708.8000105@gmx.eu>
Message-ID: <C9C9FFB7.221D9%michael.smith@usace.army.mil>

Hermann,

You can use the FileGDB driver with Linux. The FileGDB api has been
available on Linux since Beta 2.

I plan to do some testing in the next couple of days.

Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 4/12/11 1:08 PM, "Hermann Peifer" <peifer@gmx.eu> wrote:

> On 04/04/2011 05:05, Ragi Burhum wrote:
>> Hello list,
>> 
>> I am trying to test a new version of the FileGDB driver for OGR, but I
>> lack enough FileGDBs to test :)
> 
> Is the lack of FileGDBs still an issue? At work, we have several
> hundreds of them and I could check if I can make some available.
> 
>> If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB
>> driver (and report back), feel free to grab a gdal-trunk binary I made
>> for Windows.
> 
> A related question: will there ever be a FileGDB driver for a
> non-Windows OS? Is this feasible at all?
> 
> Hermann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From aborruso at tin.it  Tue Apr 12 13:37:52 2011
From: aborruso at tin.it (iomeneandrei)
Date: Tue Apr 12 13:37:55 2011
Subject: [gdal-dev] Re: OGR and spatialite View
In-Reply-To: <BANLkTim__k8u4EASKs68UD5yFE4VU5eu4w@mail.gmail.com>
References: <1302617807950-6265313.post@n2.nabble.com>
	<BANLkTim__k8u4EASKs68UD5yFE4VU5eu4w@mail.gmail.com>
Message-ID: <1302629872786-6266042.post@n2.nabble.com>

Chaitanya,

Chaitanya kumar CH wrote:
> 
> Try to explicitly ask for the view as a layer with ogrinfo. You can also
> try
> to set the SQLITE_LIST_ALL_TABLES environment variable to TRUE.
> 

I have set the SQLITE_LIST_ALL_TABLES environment variable to TRUE, and now
it works. 

Thank you very much,

Andrea


-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-and-spatialite-View-tp6265313p6266042.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Tue Apr 12 13:41:13 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Apr 12 13:47:56 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmU6IE9HUi9TcGF0aWFsaXRlIHBhdGNoZXM=?=
In-Reply-To: <201103302207.13463.even.rouault@mines-paris.org>
References: <4D9307D1.1000403@lqt.it>
	<201103302207.13463.even.rouault@mines-paris.org>
Message-ID: <20110412174113.15031.qmail@s466.sureserver.com>

Hi there.

Since Berkeley DB is SQLite API compatible, does anybody has experience with using Berkeley DB + Spatialite ? Would that be possible to work?

Thanks,

Ivan


>  -------Original Message-------
>  From: Even Rouault <even.rouault@mines-paris.org>
>  To: Alessandro Furieri <a.furieri@lqt.it>, Frank Warmerdam <warmerdam@pobox.com>
>  Cc: Andrea Peri <andrea.peri@regione.toscana.it>, gdal-dev@lists.osgeo.org, Paolo Cavallini <cavallini@faunalia.it>, Sandro Santilli <strk@keybit.net>, Maurizio Napolitano <napo@fbk.eu>, Alex Mandel <tech_dev@wildintellect.com>
>  Subject: [gdal-dev] Re: OGR/Spatialite patches
>  Sent: Mar 30 '11 15:07
>  
>  Hi Alessandro,
>  
>  (CC'ing gdal-dev)
>  
>  Impressive work !
>  
>  My remarks and questions:
>  
>  1) Could you confirm that all this work might be included under the usual GDAL
>  X/MIT licence ? Due to the significant code addition for the 3D geometry
>  support, you might want to add your copyright in the header of
>  ogrsqlitelayer.cpp.
>  
>  2) It would be really convenient to have different patches for the different
>  issues that could be applied sequentially. Applying all this stuff in a single
>  gulp will make bisection and analysis of the changes quite painfull. I've
>  skimmed quickly through the whole diff and your README and I can see several
>  patches, preferably in the following order (if possible) :
>  1) 3D geometry support
>  2) use the spatialite SQL functions and drop the manual workarounds to
>  avoid using spatialite functions
>  3) general cleanup to remove the use of ancient sqlite API (that seem not
>  to be directly related to spatialite support)
>  
>  I'd be in favor of dropping the stuff related to #ifdef SPATIALITE_AMALGAMATION
>  for now. Or it might be traced under a different ticket
>  
>  3) From your patch I can see that my efforts to produce a spatialite database
>  without linking to spatialite were vain. I'm not that surprised however.... So
>  the question is : is there really an interest in allowing the user to create a
>  spatialite database without linking to spatialite if that database cannot be
>  directly used by other spatialite-enabled software ant that the user must
>  "repair" it afterwards with the procedure at the end of your README.txt. This
>  really sounds to be compatible with only super power users... We might also
>  want to be sure that no write/update/delete operations can happen to a
>  spatialite database if it is opened with a driver not linked against
>  libspatialite to avoid corrupting it.
>  However I think it is still desirable to be able to read a spatialite database
>  without requiring linking to spatialite.
>  
>  4) We must be aware that using the ALTER TABLE ... ADD COLUMN ... stuff will
>  produce databases (even regular SQLite ones) that will not be compatible with
>  the latest FWTools for Windows that uses an ancient sqlite versions. Might not
>  be a big deal however because I somehow remember that dropping a new version
>  of sqlite3.dll in the bin directory make it work again.
>  
>  5) Would you be willing to update/extend the autotest/ogr/ogr_sqlite.py test
>  to ensure that it still passes and add some tests for all the new stuff,
>  particularly the 3D geometry support.
>  
>  6) From your README.TXT, can I assume that your changes have been tested
>  against regular libsqlite3 (without linking to spatialite) with a spatialite
>  database (and also a regular sqlite database not using spatialite geometries),
>  and against libspatialite 2.3.1 and libspatialite 2.4.0 for spatialite
>  databases ?
>  
>  7) A minor code note : it could be interesting to replace the magic values for
>  the geometry types by appropriate #define with symbolic names.
>  
>  8) I've seen you have removed the tests to detect int overflows, for example
>  "if( nPointCount < 0 || nPointCount > INT_MAX / (2 * 8))" has become "if(
>  nPointCount < 0)". Could you justify it ? I still think that they are
>  necessary to avoid issues in lines below if the nPointCount value is huge
>  enough.
>  
>  9) About your [3c] patch. Yes indeed this is a painfull issue with shapefiles
>  (the format I mean, not the driver) where we cannot know in advance if it only
>  contains LINESTRING or MULTILINESTRING. Currently the shapefile driver chooses
>  to report the layer as having LINESTRING geometry type. Maybe Frank can
>  comment about this. I imagine this was decided because some application
>  software wouldn't know to deal with multi-geometry. But I can confirm that
>  inserting such shapefiles with mixed linestring/multilinestring geometries into
>  Postgis requires a -nlt flag to the ogr2ogr command line. To get back to your
>  patch, I'm wondering what will happen if we try to insert a feature with a
>  LINESTRING geometry into a layer created with the LINESTRING geometry type,
>  that has been "promoted" to MULTILINESTRING by the driver ?
>  
>  Best regards,
>  
>  Even
>  
>  Le mercredi 30 mars 2011 12:37:05, Alessandro Furieri a ?crit :
>  > Hi All,
>  >
>  > I know for sure that all you are strongly
>  > interested in both SpatiaLite and GDAL/OGR:
>  > so I'm glad to submit to your attention a
>  > patch-set intended to enhance the OGR/spatialite
>  > driver.
>  >
>  > - correcting several issues found into the current
>  >????implementation
>  > - supporting the most recent features introduced
>  >???? by v.2.4.0 [3D Geometries and so on]
>  >
>  > You'll find everything within the attached zipfile:
>  > - source code
>  > - svn diff
>  > - detailed explanations on README.txt
>  >
>  > Please note: the current patch-set (although quite
>  > thoroughly tested and debugged by myself) simply
>  > represents a preliminary interim version.
>  > I suppose some further (small) optimization would
>  > be required before actually committing into the
>  > SVN trunk.
>  > Any suggestion, useful hint, criticism and testing
>  > coming from you surely will be warmly welcome and
>  > highly appreciated.
>  >
>  > bye
>  > Sando
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From srp at geo.ku.dk  Tue Apr 12 13:54:00 2011
From: srp at geo.ku.dk (Simon R. Proud)
Date: Tue Apr 12 13:57:04 2011
Subject: [gdal-dev] Reading of MSG Native Data
Message-ID: <4DA4ADD80200004000054A8E@smtp.geo.ku.dk>

Hi,
I've been testing GDAL with Native (.nat) format data from the MSG satellite, and have a slight problem.
gdal_translate fails to process the high resolution channel (Band 12, image size is variable but for my data 5568x4176).

The .nat files I'm working with only contain the HRV data, not the low res channels - but when I run gdalinfo the data I see listed looks like it is for the low res channels (image size of 3712x3712 and pixel size of 3km).
It may also be reading the wrong satellite position (0 degrees instead of 9.5E) although this may be a problem with the actual .nat file.
gdalinfo also displays an error (ERROR 1: tolerance condition error) for the corner coordinates of the image..

Is this a known issue? It would be great if there is a work-around for it.

All the best,
Simon.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/0017579b/attachment-0001.html
From even.rouault at mines-paris.org  Tue Apr 12 14:11:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 12 14:10:36 2011
Subject: [gdal-dev] ftp user and password with vsizip/vsicurl
In-Reply-To: <4DA40C96.4F75.00CE.0@co.lincoln.or.us>
References: <4DA39127020000CE00044191@mail.co.lincoln.or.us>
	<4DA40C9A020000CE000441A7@mail.co.lincoln.or.us>
	<4DA40C96.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <201104122011.20768.even.rouault@mines-paris.org>

Le mardi 12 avril 2011 17:26:02, Eli Adam a ?crit :
> Is it possible to use vsizip and vsicurl on a password protected ftp site?
> 
> Something like this command with user and password passed somehow:
> 
> ogrinfo -ro -al -so
> /vsizip/vsicurl/ftp://example.com/foldername/file.zip/example.shp
> 
> I rather hopefully tried some switches, -user:user -password:password,
> which did not work.

I've just tried with an FTP site and ogrinfo -ro -al -so 
/vsizip/vsicurl/ftp://user:password@example.com/foldername/file.zip/example.shp 
works

> 
> Thanks for the vsi support, it is awesome!  For vsizip/gz/tar, I find this
> wiki page very useful, http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip 
> I can find all the gdal drivers that support virtual files by following
> the directions on that page (driver marked with 'v' when running 'gdalinfo
> --formats').  I tried a similar approach for ogr (ogrinfo --formats and
> looked for 'v') without learning much.  Is there a way to determine
> virtual file support in ogr?  I found that shp is supported by
> successfully testing it and recalling an IRC mention.

No, there's no easy way of knowing if an OGR driver supports VSI virtual file 
handlers such as vsizip, vsicurl etc...

From a quick "grep -r VSILFILE ogr/ogrsf_frmts/", I can see in current trunk 
(might not be the case for all drivers in GDAL 1.8.0 as a few have been 
converted since the release), that CSV, PGDUMP (well, this is just write-
only),  SVG, KML, HTF, DXF, PDS, VRT, GPX, AERONAVFAA, GTM, EDIGEO, SHAPE, 
OPENAIR, LIBKML, GEORSS, GPSBABEL, BNA, GEOJSON, XPLANE, GMT, GML, SUA and S57 
use the VSI virtual file API at least partially. Caution : It doesn't mean that 
they are all fully vetted to be compatible with it.

> 
> Most of what I find for vsicurl is here,
> http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News  Is there somewhere
> else that I should look for documentation on vsicurl?  I gave a shot at
> adding information to the vsizip wiki page, can someone review it to make
> sure that I am not spreading false information and correct or delete it if
> needed?  I added to the vsizip page rather than making a different page
> since vsicurl is often used with vsizip. 

There's some info in the doc of VSIInstallCurlFileHandler() here 
http://gdal.org/cpl__vsi_8h.html#4f791960f2d86713d16e99e9c0c36258

You might want to add the link to it, like it is done for the other special 
file handlers in the page.

> Currently, the example commands
> that I put there give an error claiming that the .shx is corrupt.  For
> instance, ogrinfo -ro -al -so
> /vsicurl/http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/data/poly.s
> hp

This was just a bad URL. ogrinfo -ro -al -so 
/vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp works

> 
> 
> Any help appreciated, Eli
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Apr 12 14:28:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 12 14:27:54 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <4DA48708.8000105@gmx.eu>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4DA48708.8000105@gmx.eu>
Message-ID: <201104122028.40038.even.rouault@mines-paris.org>

Le mardi 12 avril 2011 19:08:24, Hermann Peifer a ?crit :
> On 04/04/2011 05:05, Ragi Burhum wrote:
> > Hello list,
> > 
> > I am trying to test a new version of the FileGDB driver for OGR, but I
> > lack enough FileGDBs to test :)
> 
> Is the lack of FileGDBs still an issue? At work, we have several
> hundreds of them and I could check if I can make some available.

ArcGIS 10 FileGDB's right ?

Yes "real" data would be usefull. But it would also be usefull if you (or 
anyone else) could provide small and freely redistribuable 
samples (potentially "fake" data) with different types of 
geometries (1 feature for each geometry type is enough in theory), column 
types (integer, single, double, string, date), etc.. so that it can be 
included in the GDAL/OGR autotest suite. 

> 
> > If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB
> > driver (and report back), feel free to grab a gdal-trunk binary I made
> > for Windows.
> 
> A related question: will there ever be a FileGDB driver for a
> non-Windows OS? Is this feasible at all?

Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit. Too bad 
ESRI doesn't provide any 64bit build of the FileGDB API (yet... ?)

> 
> Hermann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From michael.smith at usace.army.mil  Tue Apr 12 14:37:06 2011
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Tue Apr 12 14:37:10 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <201104122028.40038.even.rouault@mines-paris.org>
Message-ID: <C9CA1412.221FF%michael.smith@usace.army.mil>

Even,

How do you configure gdal/ogr to build with the linux api?

I'm working on getting some example datasets together.

Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 4/12/11 2:28 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:

> Le mardi 12 avril 2011 19:08:24, Hermann Peifer a ?crit :
>> On 04/04/2011 05:05, Ragi Burhum wrote:
>>> Hello list,
>>> 
>>> I am trying to test a new version of the FileGDB driver for OGR, but I
>>> lack enough FileGDBs to test :)
>> 
>> Is the lack of FileGDBs still an issue? At work, we have several
>> hundreds of them and I could check if I can make some available.
> 
> ArcGIS 10 FileGDB's right ?
> 
> Yes "real" data would be usefull. But it would also be usefull if you (or
> anyone else) could provide small and freely redistribuable
> samples (potentially "fake" data) with different types of
> geometries (1 feature for each geometry type is enough in theory), column
> types (integer, single, double, string, date), etc.. so that it can be
> included in the GDAL/OGR autotest suite.
> 
>> 
>>> If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB
>>> driver (and report back), feel free to grab a gdal-trunk binary I made
>>> for Windows.
>> 
>> A related question: will there ever be a FileGDB driver for a
>> non-Windows OS? Is this feasible at all?
> 
> Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit. Too bad
> ESRI doesn't provide any 64bit build of the FileGDB API (yet... ?)
> 
>> 
>> Hermann
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From matt.wilkie at gov.yk.ca  Tue Apr 12 14:40:58 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Apr 12 14:40:59 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <201104122028.40038.even.rouault@mines-paris.org>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>	<4DA48708.8000105@gmx.eu>
	<201104122028.40038.even.rouault@mines-paris.org>
Message-ID: <4DA49CBA.8030309@gov.yk.ca>

 > ArcGIS 10 FileGDB's right ?

If the api allows for using gdb's from different versions then the test 
suite should have different versions too. In any case I can make v10 gdb's.

> Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit. Too bad
> ESRI doesn't provide any 64bit build of the FileGDB API (yet... ?)

"""
We are working on a Linux 64-bit release of the File Geodatabase API. It 
will not release with the 1.0 release of the API, but as a part of a 
follow on release later this year.

Lance Shipman
Geodatabase Product Engineer, File Geodatabase
esri
"""
-- 
http://forums.arcgis.com/threads/22223-Cross-plattform-API?p=89593&viewfull=1#post89593

-matt
From even.rouault at mines-paris.org  Tue Apr 12 14:47:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 12 14:46:34 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <C9CA1412.221FF%michael.smith@usace.army.mil>
References: <C9CA1412.221FF%michael.smith@usace.army.mil>
Message-ID: <201104122047.20004.even.rouault@mines-paris.org>

Le mardi 12 avril 2011 20:37:06, Smith, Michael ERDC-CRREL-NH a ?crit :
> Even,
> 
> How do you configure gdal/ogr to build with the linux api?

This is a bit involved since there's no ./configure support yet, so I compile 
it "at hand" as a plugin

Here's the line I use from GDAL root source directory :

g++ -Wall -g ogr/ogrsf_frmts/filegdb/*.c* -shared -o ogr_filegdb.so -Iport -
Igcore -Iogr -Iogr/ogrsf_frmts -Iogr/ogrsf_frmts/filegdb -L. -lgdal -
I/home/even/filegdb/dist/include -L/home/even/filegdb/dist/lib  -
I/home/even/filegdb/dist/src/FileGDBEngine/include/FileGDBLinux -lFileGDBAPI

You must change the /home/even/filegdb/ paths to where you uncompress the 
filegdb API

And you must define the GDAL_DRIVER_PATH environmenet variable to point to the 
path where ogr_filegdb.so is

> 
> I'm working on getting some example datasets together.
> 
> Mike
> 
> > Le mardi 12 avril 2011 19:08:24, Hermann Peifer a ?crit :
> >> On 04/04/2011 05:05, Ragi Burhum wrote:
> >>> Hello list,
> >>> 
> >>> I am trying to test a new version of the FileGDB driver for OGR, but I
> >>> lack enough FileGDBs to test :)
> >> 
> >> Is the lack of FileGDBs still an issue? At work, we have several
> >> hundreds of them and I could check if I can make some available.
> > 
> > ArcGIS 10 FileGDB's right ?
> > 
> > Yes "real" data would be usefull. But it would also be usefull if you (or
> > anyone else) could provide small and freely redistribuable
> > samples (potentially "fake" data) with different types of
> > geometries (1 feature for each geometry type is enough in theory), column
> > types (integer, single, double, string, date), etc.. so that it can be
> > included in the GDAL/OGR autotest suite.
> > 
> >>> If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB
> >>> driver (and report back), feel free to grab a gdal-trunk binary I made
> >>> for Windows.
> >> 
> >> A related question: will there ever be a FileGDB driver for a
> >> non-Windows OS? Is this feasible at all?
> > 
> > Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit.
> > Too bad ESRI doesn't provide any 64bit build of the FileGDB API (yet...
> > ?)
> > 
> >> Hermann
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Apr 12 14:48:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 12 14:47:59 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <4DA49CBA.8030309@gov.yk.ca>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<201104122028.40038.even.rouault@mines-paris.org>
	<4DA49CBA.8030309@gov.yk.ca>
Message-ID: <201104122048.45061.even.rouault@mines-paris.org>

Le mardi 12 avril 2011 20:40:58, Matt Wilkie a ?crit :
>  > ArcGIS 10 FileGDB's right ?
> 
> If the api allows for using gdb's from different versions then the test
> suite should have different versions too. In any case I can make v10 gdb's.

No, the FileGDB API only reads v10 gdb's.

> 
> > Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit.
> > Too bad ESRI doesn't provide any 64bit build of the FileGDB API (yet...
> > ?)
> 
> """
> We are working on a Linux 64-bit release of the File Geodatabase API. It
> will not release with the 1.0 release of the API, but as a part of a
> follow on release later this year.
> 
> Lance Shipman
> Geodatabase Product Engineer, File Geodatabase
> esri
> """
From EAdam at co.lincoln.or.us  Tue Apr 12 15:21:49 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Tue Apr 12 15:22:22 2011
Subject: [gdal-dev] ftp user and password with vsizip/vsicurl
In-Reply-To: <201104122011.20768.even.rouault@mines-paris.org>
References: <4DA39127020000CE00044191@mail.co.lincoln.or.us>
	<4DA40C9A020000CE000441A7@mail.co.lincoln.or.us>
	<4DA40C96.4F75.00CE.0@co.lincoln.or.us>
	<201104122011.20768.even.rouault@mines-paris.org>
Message-ID: <4DA443D8.4F75.00CE.0@co.lincoln.or.us>

Even,

      I've added most of this to the wiki.  I've also corrected the
urls that were incorrect. 
http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip#vsicurl-toreadfromHTTPorFTPfilespartialdownloading

Thanks, Eli

>>> On 4/12/2011 at 11:11 AM, in message
<201104122011.20768.even.rouault@mines-paris.org>, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mardi 12 avril 2011 17:26:02, Eli Adam a ?crit :
>> Is it possible to use vsizip and vsicurl on a password protected ftp
site?
>> 
>> Something like this command with user and password passed somehow:
>> 
>> ogrinfo -ro -al -so
>> /vsizip/vsicurl/ftp://example.com/foldername/file.zip/example.shp 
>> 
>> I rather hopefully tried some switches, -user:user
-password:password,
>> which did not work.
> 
> I've just tried with an FTP site and ogrinfo -ro -al -so 
>
/vsizip/vsicurl/ftp://user:password@example.com/foldername/file.zip/example.
> shp 
> works
> 
>> 
>> Thanks for the vsi support, it is awesome!  For vsizip/gz/tar, I
find this
>> wiki page very useful,
http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip 
>> I can find all the gdal drivers that support virtual files by
following
>> the directions on that page (driver marked with 'v' when running
'gdalinfo
>> --formats').  I tried a similar approach for ogr (ogrinfo --formats
and
>> looked for 'v') without learning much.  Is there a way to determine
>> virtual file support in ogr?  I found that shp is supported by
>> successfully testing it and recalling an IRC mention.
> 
> No, there's no easy way of knowing if an OGR driver supports VSI
virtual 
> file 
> handlers such as vsizip, vsicurl etc...
> 
> From a quick "grep -r VSILFILE ogr/ogrsf_frmts/", I can see in
current trunk 
> (might not be the case for all drivers in GDAL 1.8.0 as a few have
been 
> converted since the release), that CSV, PGDUMP (well, this is just
write-
> only),  SVG, KML, HTF, DXF, PDS, VRT, GPX, AERONAVFAA, GTM, EDIGEO,
SHAPE, 
> OPENAIR, LIBKML, GEORSS, GPSBABEL, BNA, GEOJSON, XPLANE, GMT, GML,
SUA and 
> S57 
> use the VSI virtual file API at least partially. Caution : It doesn't
mean 
> that 
> they are all fully vetted to be compatible with it.
> 
>> 
>> Most of what I find for vsicurl is here,
>> http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News  Is there
somewhere
>> else that I should look for documentation on vsicurl?  I gave a shot
at
>> adding information to the vsizip wiki page, can someone review it to
make
>> sure that I am not spreading false information and correct or delete
it if
>> needed?  I added to the vsizip page rather than making a different
page
>> since vsicurl is often used with vsizip. 
> 
> There's some info in the doc of VSIInstallCurlFileHandler() here 
> http://gdal.org/cpl__vsi_8h.html#4f791960f2d86713d16e99e9c0c36258 
> 
> You might want to add the link to it, like it is done for the other
special 
> file handlers in the page.
> 
>> Currently, the example commands
>> that I put there give an error claiming that the .shx is corrupt. 
For
>> instance, ogrinfo -ro -al -so
>>
/vsicurl/http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/data/poly.s
>> hp
> 
> This was just a bad URL. ogrinfo -ro -al -so 
> /vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp
works
> 
>> 
>> 
>> Any help appreciated, Eli
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From michael.smith at usace.army.mil  Tue Apr 12 15:45:25 2011
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Tue Apr 12 15:45:29 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <201104122048.45061.even.rouault@mines-paris.org>
Message-ID: <C9CA2415.2220D%michael.smith@usace.army.mil>

I have a test v10 filegdb with points, lines, polygons (all with Z and M but
I think the measures aren't populated). There are also some non geometry
tables and some relationship classes.

Its available at 

http://12.189.158.78:8081/downloads/test_fgdb.gdb.zip

Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 4/12/11 2:48 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:

> Le mardi 12 avril 2011 20:40:58, Matt Wilkie a ?crit :
>>> ArcGIS 10 FileGDB's right ?
>> 
>> If the api allows for using gdb's from different versions then the test
>> suite should have different versions too. In any case I can make v10 gdb's.
> 
> No, the FileGDB API only reads v10 gdb's.
> 
>> 
>>> Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit.
>>> Too bad ESRI doesn't provide any 64bit build of the FileGDB API (yet...
>>> ?)
>> 
>> """
>> We are working on a Linux 64-bit release of the File Geodatabase API. It
>> will not release with the 1.0 release of the API, but as a part of a
>> follow on release later this year.
>> 
>> Lance Shipman
>> Geodatabase Product Engineer, File Geodatabase
>> esri
>> """
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jsimpson at wxtrends.com  Tue Apr 12 15:59:08 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Tue Apr 12 16:06:37 2011
Subject: [gdal-dev] Dateline gap
Message-ID: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>

Hello:

I stopped by the #gdal channel on IRC to ask this question.  Thank you
for the help provided there.  I thought it might be better if I asked
a question here so I can better explain what's going on in one spot
and not flood the channel.
I understand this is a pixel center vs pixel edge issue.

My ultimate goal is to get from a netCDF file to a google map overlay contour.
The general steps I've taken, which work all the way up to about
178.29 then it just cuts off.

netCDF -> color-relief PNG using "gdaldem color-relief ...  "
PNG -> Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
tried this with just "-180 90 180 -90"
PNG -> tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
the Geocoded PNG
I guess first question, is my methodology sound?  Maybe there's a
better way/tool to approach the problem.

Following is the output from gdalinfo, other than that, what
information might I be able to provide that could help?

Thank you,

Jerl

gdalinfo for the source netcdf: (My apologies, I'm not certain what is
relevant so I'm including most everything.)

Driver: netCDF/Network Common Data Format
Files: test.nc
Size is 721, 361
Coordinate System is `'
Origin = (-180.250000000000000,90.250000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#cdm_data_type=GRID
  NC_GLOBAL#file_format=GEMPAK
  NC_GLOBAL#location=test.grd
  NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
  NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
  UVIN_NONE#long_name=testdata
  UVIN_NONE#units=
  UVIN_NONE#missing_value=-9.999000e+03
  UVIN_NONE#VectorComponentFlag=gridRelative
  time#long_name=forecast time
  time#units=minute since 2011-04-12T00:00:00Z
  time#_CoordinateAxisType=Time
  lat#units=degrees_north
  lat#long_name=latitude coordinate
  lat#standard_name=latitude
  lat#grid_spacing=0.5 degrees_north
  lat#_CoordinateAxisType=Lat
  lon#units=degrees_east
  lon#long_name=longitude coordinate
  lon#standard_name=longitude
  lon#grid_spacing=0.5 degrees_east
  lon#_CoordinateAxisType=Lon
Corner Coordinates:
Upper Left  (-180.2500000,  90.2500000)
Lower Left  (-180.2500000, -90.2500000)
Upper Right ( 180.2500000,  90.2500000)
Lower Right ( 180.2500000, -90.2500000)
Center      (   0.0000000,   0.0000000)

gdalinfo of geocoded PNG:

Driver: PNG/Portable Network Graphics
Files: testWorld.png
       testWorld.png.aux.xml
Size is 4096, 4096
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.01745329251994328,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,90.000000000000000)
Pixel Size = (0.087890625000000,-0.043945312500000)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha



-- 
This communication is privileged and may contain confidential
information. ?It's intended only for the use of the person or entity
named above. If you are not the intended recipient, do not distribute
or copy this communication. If you have received this communication in
error, please notify the sender immediately and return the original to
the email address above. ? Copyright 2011 Weather Trends
International, Inc.
From brian at wildsong.biz  Tue Apr 12 18:07:58 2011
From: brian at wildsong.biz (Brian Wilson)
Date: Tue Apr 12 18:08:02 2011
Subject: [gdal-dev] gdal datum shift
Message-ID: <BANLkTinZDXuFJgyG0tKcfApOYMmb8SpDxA@mail.gmail.com>

Trying to get a raster to go from NAD83 to NAD27 with gdalwarp. Can't see
any way to tell how it is choosing to do it. Is this documented anywhere?
Is there any way to make it verbose so I can tell if it's trying?

I ran it through strace and watched it open a file called gdal_datum.csv but
of course can't tell what it's trying to do.

I found this post from Frank which implies it tries to be smart and figure
out the transforms without my help:
http://fwarmerdam.blogspot.com/2010/03/in-last-few-weeks-i-believe-i-have-made.html

But it's not working and since I don't know how to tell what it's doing I
can't intelligently ask for help. :-)

Thanks for your patience with a n00by

Brian

Command I am using:

gdalwarp -of HFA -co COMPRESSED=YES -t_srs
ESRI::NAD_1927_StatePlane_Oregon_North_FIPS_3601.prj 11s5w34f_color_ne.sid
11s5w34f_color_ne_nad27.img

Output is in the right coordinate space (it's moved from meters to feet) but
has that familiar 10 or so meter shift we get around like the NAD83-NAD27
transform failed.

The input file SRS looks like this

Coordinate System is:
PROJCS["NAD_1983_HARN_StatePlane_Oregon_North_FIPS_3601",
    GEOGCS["GCS_North_American_1983_HARN",
        DATUM["NAD83_High_Accuracy_Regional_Network",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["False_Easting",2500000],
    PARAMETER["False_Northing",0],
    PARAMETER["Central_Meridian",-120.5],
    PARAMETER["Standard_Parallel_1",44.33333333333334],
    PARAMETER["Standard_Parallel_2",46],
    PARAMETER["Latitude_Of_Origin",43.66666666666666],
    UNIT["Meter",1],
    AUTHORITY["EPSG","102326"]]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/e938e2ed/attachment.html
From matt.wilkie at gov.yk.ca  Tue Apr 12 14:36:01 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Apr 12 18:36:06 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <4DA48708.8000105@gmx.eu>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4DA48708.8000105@gmx.eu>
Message-ID: <4DA49B91.8080505@gov.yk.ca>

Hi Hermann,  it's so good to hear there is active work on this!

>> I am trying to test a new version of the FileGDB driver for OGR, but I
>> lack enough FileGDBs to test :)

Ho many do you need, what kind of contents should they have, and how 
big? e.g. feature classes, feature datasets, topologies, attribute 
domains, sub-types, relationship classes, feature representations, etc.

For gdb's to test volume, 
ftp://ftp2.cits.nrcan.gc.ca/pub/canvec/canada_fgdb/ has up to 10gb in size.

I have a gdb using a relationship class which can be made available with 
a bit of work. And another with feature representations due in a couple 
of months, but I can make private subset release early if it's helpful.

I'm willing to create and share other kinds for testing, just let me 
know what you're looking for.


cheers,

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------








From jluis at ualg.pt  Tue Apr 12 20:24:25 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Apr 12 20:24:33 2011
Subject: [gdal-dev] Dateline gap
In-Reply-To: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
References: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
Message-ID: <4DA4ED39.2070202@ualg.pt>

Jerl,

I would do that with GMT. By using ps2raster you can convert any GMT 
figure (in geogs of course) into KML, and GMT has excellent care of date 
line transition issues.

Joaquim

> Hello:
>
> I stopped by the #gdal channel on IRC to ask this question.  Thank you
> for the help provided there.  I thought it might be better if I asked
> a question here so I can better explain what's going on in one spot
> and not flood the channel.
> I understand this is a pixel center vs pixel edge issue.
>
> My ultimate goal is to get from a netCDF file to a google map overlay contour.
> The general steps I've taken, which work all the way up to about
> 178.29 then it just cuts off.
>
> netCDF ->  color-relief PNG using "gdaldem color-relief ...  "
> PNG ->  Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
> 4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
> tried this with just "-180 90 180 -90"
> PNG ->  tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
> the Geocoded PNG
> I guess first question, is my methodology sound?  Maybe there's a
> better way/tool to approach the problem.
>
> Following is the output from gdalinfo, other than that, what
> information might I be able to provide that could help?
>
> Thank you,
>
> Jerl
>
> gdalinfo for the source netcdf: (My apologies, I'm not certain what is
> relevant so I'm including most everything.)
>
> Driver: netCDF/Network Common Data Format
> Files: test.nc
> Size is 721, 361
> Coordinate System is `'
> Origin = (-180.250000000000000,90.250000000000000)
> Pixel Size = (0.500000000000000,-0.500000000000000)
> Metadata:
>    NC_GLOBAL#Conventions=CF-1.0
>    NC_GLOBAL#cdm_data_type=GRID
>    NC_GLOBAL#file_format=GEMPAK
>    NC_GLOBAL#location=test.grd
>    NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
>    NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
>    UVIN_NONE#long_name=testdata
>    UVIN_NONE#units=
>    UVIN_NONE#missing_value=-9.999000e+03
>    UVIN_NONE#VectorComponentFlag=gridRelative
>    time#long_name=forecast time
>    time#units=minute since 2011-04-12T00:00:00Z
>    time#_CoordinateAxisType=Time
>    lat#units=degrees_north
>    lat#long_name=latitude coordinate
>    lat#standard_name=latitude
>    lat#grid_spacing=0.5 degrees_north
>    lat#_CoordinateAxisType=Lat
>    lon#units=degrees_east
>    lon#long_name=longitude coordinate
>    lon#standard_name=longitude
>    lon#grid_spacing=0.5 degrees_east
>    lon#_CoordinateAxisType=Lon
> Corner Coordinates:
> Upper Left  (-180.2500000,  90.2500000)
> Lower Left  (-180.2500000, -90.2500000)
> Upper Right ( 180.2500000,  90.2500000)
> Lower Right ( 180.2500000, -90.2500000)
> Center      (   0.0000000,   0.0000000)
>
> gdalinfo of geocoded PNG:
>
> Driver: PNG/Portable Network Graphics
> Files: testWorld.png
>         testWorld.png.aux.xml
> Size is 4096, 4096
> Coordinate System is:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.01745329251994328,
>          AUTHORITY["EPSG","9122"]],
>      AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000000000000,90.000000000000000)
> Pixel Size = (0.087890625000000,-0.043945312500000)
> Image Structure Metadata:
>    INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
> Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
> Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
> Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
> Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
>    Mask Flags: PER_DATASET ALPHA
> Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
>    Mask Flags: PER_DATASET ALPHA
> Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
>    Mask Flags: PER_DATASET ALPHA
> Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha
>
>
>

From jsimpson at wxtrends.com  Tue Apr 12 20:31:35 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Tue Apr 12 20:31:39 2011
Subject: [gdal-dev] Dateline gap
In-Reply-To: <4DA4ED39.2070202@ualg.pt>
References: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
	<4DA4ED39.2070202@ualg.pt>
Message-ID: <BANLkTinSYQ1YNyNRU_WymT6spKXJzDTBrw@mail.gmail.com>

Thanks for the GMT suggestions. I've never used it, I'll try it out.

Thanks!!

Typed with thumbs...
On Apr 12, 2011 7:24 PM, "Joaquim Luis" <jluis@ualg.pt> wrote:
> Jerl,
>
> I would do that with GMT. By using ps2raster you can convert any GMT
> figure (in geogs of course) into KML, and GMT has excellent care of date
> line transition issues.
>
> Joaquim
>
>> Hello:
>>
>> I stopped by the #gdal channel on IRC to ask this question. Thank you
>> for the help provided there. I thought it might be better if I asked
>> a question here so I can better explain what's going on in one spot
>> and not flood the channel.
>> I understand this is a pixel center vs pixel edge issue.
>>
>> My ultimate goal is to get from a netCDF file to a google map overlay
contour.
>> The general steps I've taken, which work all the way up to about
>> 178.29 then it just cuts off.
>>
>> netCDF -> color-relief PNG using "gdaldem color-relief ... "
>> PNG -> Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
>> 4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
>> tried this with just "-180 90 180 -90"
>> PNG -> tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
>> the Geocoded PNG
>> I guess first question, is my methodology sound? Maybe there's a
>> better way/tool to approach the problem.
>>
>> Following is the output from gdalinfo, other than that, what
>> information might I be able to provide that could help?
>>
>> Thank you,
>>
>> Jerl
>>
>> gdalinfo for the source netcdf: (My apologies, I'm not certain what is
>> relevant so I'm including most everything.)
>>
>> Driver: netCDF/Network Common Data Format
>> Files: test.nc
>> Size is 721, 361
>> Coordinate System is `'
>> Origin = (-180.250000000000000,90.250000000000000)
>> Pixel Size = (0.500000000000000,-0.500000000000000)
>> Metadata:
>> NC_GLOBAL#Conventions=CF-1.0
>> NC_GLOBAL#cdm_data_type=GRID
>> NC_GLOBAL#file_format=GEMPAK
>> NC_GLOBAL#location=test.grd
>> NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
>> NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
>> UVIN_NONE#long_name=testdata
>> UVIN_NONE#units=
>> UVIN_NONE#missing_value=-9.999000e+03
>> UVIN_NONE#VectorComponentFlag=gridRelative
>> time#long_name=forecast time
>> time#units=minute since 2011-04-12T00:00:00Z
>> time#_CoordinateAxisType=Time
>> lat#units=degrees_north
>> lat#long_name=latitude coordinate
>> lat#standard_name=latitude
>> lat#grid_spacing=0.5 degrees_north
>> lat#_CoordinateAxisType=Lat
>> lon#units=degrees_east
>> lon#long_name=longitude coordinate
>> lon#standard_name=longitude
>> lon#grid_spacing=0.5 degrees_east
>> lon#_CoordinateAxisType=Lon
>> Corner Coordinates:
>> Upper Left (-180.2500000, 90.2500000)
>> Lower Left (-180.2500000, -90.2500000)
>> Upper Right ( 180.2500000, 90.2500000)
>> Lower Right ( 180.2500000, -90.2500000)
>> Center ( 0.0000000, 0.0000000)
>>
>> gdalinfo of geocoded PNG:
>>
>> Driver: PNG/Portable Network Graphics
>> Files: testWorld.png
>> testWorld.png.aux.xml
>> Size is 4096, 4096
>> Coordinate System is:
>> GEOGCS["WGS 84",
>> DATUM["WGS_1984",
>> SPHEROID["WGS 84",6378137,298.257223563,
>> AUTHORITY["EPSG","7030"]],
>> AUTHORITY["EPSG","6326"]],
>> PRIMEM["Greenwich",0,
>> AUTHORITY["EPSG","8901"]],
>> UNIT["degree",0.01745329251994328,
>> AUTHORITY["EPSG","9122"]],
>> AUTHORITY["EPSG","4326"]]
>> Origin = (-180.000000000000000,90.000000000000000)
>> Pixel Size = (0.087890625000000,-0.043945312500000)
>> Image Structure Metadata:
>> INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left (-180.0000000, 90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
>> Lower Left (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
>> Upper Right ( 180.0000000, 90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
>> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
>> Center ( 0.0000000, 0.0000000) ( 0d 0'0.01"E, 0d 0'0.01"N)
>> Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
>> Mask Flags: PER_DATASET ALPHA
>> Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
>> Mask Flags: PER_DATASET ALPHA
>> Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
>> Mask Flags: PER_DATASET ALPHA
>> Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110412/abc4607d/attachment.html
From ao at t-kartor.se  Wed Apr 13 03:46:55 2011
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Wed Apr 13 03:53:21 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
Message-ID: <4DA554EF.6090501@t-kartor.se>

Need to include GDAL support for GeoServer 2.1 on Linux 64-bit. However, 
it seems that the link to the native libraries 
onhttp://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz  
is broken. Can I get the gdal1.4.5b-linux64-base.tar.gz from somewhere 
else or do I need to build it from the source files?

-- 
Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao@t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/70c010a2/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Apr 13 04:20:37 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr 13 04:20:40 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <4DA554EF.6090501@t-kartor.se>
References: <4DA554EF.6090501@t-kartor.se>
Message-ID: <BANLkTi=JFLbA5U64Evx8t1QHF+ahqUEsEw@mail.gmail.com>

Andreas,

The file exists. However, the GDAL 1.4 branch is no longer supported. The
latest stable version is 1.8 although 1.7 is also supported. Why don't you
use the 1.7 version.
http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/

On Wed, Apr 13, 2011 at 1:16 PM, Andreas Oxenstierna <ao@t-kartor.se> wrote:

>  Need to include GDAL support for GeoServer 2.1 on Linux 64-bit. However,
> it seems that the link to the native libraries on
> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz
> is broken. Can I get the gdal1.4.5b-linux64-base.tar.gz from somewhere else
> or do I need to build it from the source files?
>
>  --
> Andreas Oxenstierna
> T-Kartan Produkt AB
> mobile: +46 733 206831
> mailto: ao@t-kartor.sehttp://www.t-kartor.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/9b6889a6/attachment.html
From ao at t-kartor.se  Wed Apr 13 04:29:17 2011
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Wed Apr 13 04:28:57 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <BANLkTi=JFLbA5U64Evx8t1QHF+ahqUEsEw@mail.gmail.com>
References: <4DA554EF.6090501@t-kartor.se>
	<BANLkTi=JFLbA5U64Evx8t1QHF+ahqUEsEw@mail.gmail.com>
Message-ID: <4DA55EDD.9000500@t-kartor.se>

If I am interpreting the information correctly on 
http://docs.geoserver.org/latest/en/user/data/gdal.html
GeoServer is using Image I/O-Ext 1.0.8 which is using GDAL 1.4.5, that 
is my reason.

How can I get access to the file gdal1.4.5b-linux64-base.tar.gz 
<http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz> 
? I cannot download it from the link below with any tested browser, 
instead getting a message "The page you were looking for doesn't exist".

Andreas

> Andreas,
>
> The file exists. However, the GDAL 1.4 branch is no longer supported. 
> The latest stable version is 1.8 although 1.7 is also supported. Why 
> don't you use the 1.7 version.
> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/
>
> On Wed, Apr 13, 2011 at 1:16 PM, Andreas Oxenstierna <ao@t-kartor.se 
> <mailto:ao@t-kartor.se>> wrote:
>
>     Need to include GDAL support for GeoServer 2.1 on Linux 64-bit.
>     However, it seems that the link to the native libraries
>     onhttp://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz 
>     is broken. Can I get the gdal1.4.5b-linux64-base.tar.gz from
>     somewhere else or do I need to build it from the source files?
>
>     -- 
>     Andreas Oxenstierna
>     T-Kartan Produkt AB
>     mobile: +46 733 206831
>     mailto:ao@t-kartor.se  <mailto:ao@t-kartor.se>
>     http://www.t-kartor.com
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E


-- 
Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao@t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/6f5f2693/attachment.html
From chaitanya.ch at gmail.com  Wed Apr 13 05:02:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr 13 05:02:15 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <4DA55EDD.9000500@t-kartor.se>
References: <4DA554EF.6090501@t-kartor.se>
	<BANLkTi=JFLbA5U64Evx8t1QHF+ahqUEsEw@mail.gmail.com>
	<4DA55EDD.9000500@t-kartor.se>
Message-ID: <BANLkTimX-Ab8WOAw0Jdq9k6mU-hmnC68_w@mail.gmail.com>

The site also shows the GDAL 1.7.3 version in the dependencies and the file
exists. Perhaps imageio-ext 1.0.8 does support gdal1.7.3

On Wed, Apr 13, 2011 at 1:59 PM, Andreas Oxenstierna <ao@t-kartor.se> wrote:

>  If I am interpreting the information correctly on
> http://docs.geoserver.org/latest/en/user/data/gdal.html
> GeoServer is using Image I/O-Ext 1.0.8 which is using GDAL 1.4.5, that is
> my reason.
>
> How can I get access to the file gdal1.4.5b-linux64-base.tar.gz<http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz>? I cannot download it from the link below with any tested browser, instead
> getting a message "The page you were looking for doesn't exist".
>
> Andreas
>
>
> Andreas,
>
> The file exists. However, the GDAL 1.4 branch is no longer supported. The
> latest stable version is 1.8 although 1.7 is also supported. Why don't you
> use the 1.7 version.
>
> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/
>
> On Wed, Apr 13, 2011 at 1:16 PM, Andreas Oxenstierna <ao@t-kartor.se>wrote:
>
>>  Need to include GDAL support for GeoServer 2.1 on Linux 64-bit. However,
>> it seems that the link to the native libraries on
>> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz
>> is broken. Can I get the gdal1.4.5b-linux64-base.tar.gz from somewhere else
>> or do I need to build it from the source files?
>>
>>  --
>> Andreas Oxenstierna
>> T-Kartan Produkt AB
>> mobile: +46 733 206831
>> mailto: ao@t-kartor.sehttp://www.t-kartor.com
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
> --
> Andreas Oxenstierna
> T-Kartan Produkt AB
> mobile: +46 733 206831
> mailto: ao@t-kartor.sehttp://www.t-kartor.com
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/be71b0f7/attachment.html
From daniele.romagnoli at geo-solutions.it  Wed Apr 13 05:46:03 2011
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed Apr 13 05:46:06 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <BANLkTimX-Ab8WOAw0Jdq9k6mU-hmnC68_w@mail.gmail.com>
References: <4DA554EF.6090501@t-kartor.se>
	<BANLkTi=JFLbA5U64Evx8t1QHF+ahqUEsEw@mail.gmail.com>
	<4DA55EDD.9000500@t-kartor.se>
	<BANLkTimX-Ab8WOAw0Jdq9k6mU-hmnC68_w@mail.gmail.com>
Message-ID: <BANLkTimJ1E5kRnoKRjW4ZAsyirvHGjdkCQ@mail.gmail.com>

Hi all,
the ImageIO-Ext 1.0.8 uses GDAL 1.4.5.
GDAL 1.7.3 is needed by ImageIO-Ext 1.1.x (which is not yet used by
GeoServer 2.2.x... I'm still working on this, these days)

About the broken link, I think there is some issue on the new site based on
Kenai. Not sure why/how it has been broken since these files have been
already downloaded several times. (It seems that several links now reports
"not found")
I have uploaded it again the file you are looking for. (I will check which
files are now unavailable and then redeploy them if needed)

Hope this helps.
Regards,
Daniele

On Wed, Apr 13, 2011 at 11:02 AM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> The site also shows the GDAL 1.7.3 version in the dependencies and the file
> exists. Perhaps imageio-ext 1.0.8 does support gdal1.7.3
>
>
> On Wed, Apr 13, 2011 at 1:59 PM, Andreas Oxenstierna <ao@t-kartor.se>wrote:
>
>>  If I am interpreting the information correctly on
>> http://docs.geoserver.org/latest/en/user/data/gdal.html
>> GeoServer is using Image I/O-Ext 1.0.8 which is using GDAL 1.4.5, that is
>> my reason.
>>
>> How can I get access to the file gdal1.4.5b-linux64-base.tar.gz<http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz>? I cannot download it from the link below with any tested browser, instead
>> getting a message "The page you were looking for doesn't exist".
>>
>> Andreas
>>
>>
>> Andreas,
>>
>> The file exists. However, the GDAL 1.4 branch is no longer supported. The
>> latest stable version is 1.8 although 1.7 is also supported. Why don't you
>> use the 1.7 version.
>>
>> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/
>>
>> On Wed, Apr 13, 2011 at 1:16 PM, Andreas Oxenstierna <ao@t-kartor.se>wrote:
>>
>>>  Need to include GDAL support for GeoServer 2.1 on Linux 64-bit.
>>> However, it seems that the link to the native libraries on
>>> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz
>>> is broken. Can I get the gdal1.4.5b-linux64-base.tar.gz from somewhere else
>>> or do I need to build it from the source files?
>>>
>>>  --
>>> Andreas Oxenstierna
>>> T-Kartan Produkt AB
>>> mobile: +46 733 206831
>>> mailto: ao@t-kartor.sehttp://www.t-kartor.com
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>>
>> --
>> Andreas Oxenstierna
>> T-Kartan Produkt AB
>> mobile: +46 733 206831
>> mailto: ao@t-kartor.sehttp://www.t-kartor.com
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
GeoSolutions S.A.S.
Software Engineer

Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584 962313
fax:      +39 0584 962313
mob:   +39 328 0559267

http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.youtube.com/user/GeoSolutionsIT
http://it.linkedin.com/in/danieleromagnoli


-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/9eecb68a/attachment-0001.html
From ao at t-kartor.se  Wed Apr 13 06:40:06 2011
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Wed Apr 13 06:39:37 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <BANLkTimJ1E5kRnoKRjW4ZAsyirvHGjdkCQ@mail.gmail.com>
References: <4DA554EF.6090501@t-kartor.se>	<BANLkTi=JFLbA5U64Evx8t1QHF+ahqUEsEw@mail.gmail.com>	<4DA55EDD.9000500@t-kartor.se>	<BANLkTimX-Ab8WOAw0Jdq9k6mU-hmnC68_w@mail.gmail.com>
	<BANLkTimJ1E5kRnoKRjW4ZAsyirvHGjdkCQ@mail.gmail.com>
Message-ID: <4DA57D86.2060401@t-kartor.se>

File downloaded, thanks a lot

Andreas

> Hi all,
> the ImageIO-Ext 1.0.8 uses GDAL 1.4.5.
> GDAL 1.7.3 is needed by ImageIO-Ext 1.1.x (which is not yet used by 
> GeoServer 2.2.x... I'm still working on this, these days)
>
> About the broken link, I think there is some issue on the new site 
> based on Kenai. Not sure why/how it has been broken since these files 
> have been already downloaded several times. (It seems that several 
> links now reports "not found")
> I have uploaded it again the file you are looking for. (I will check 
> which files are now unavailable and then redeploy them if needed)
>
> Hope this helps.
> Regards,
> Daniele
>
> On Wed, Apr 13, 2011 at 11:02 AM, Chaitanya kumar CH <chaitanya.ch 
> <http://chaitanya.ch>@gmail.com <http://gmail.com>> wrote:
>
>     The site also shows the GDAL 1.7.3 version in the dependencies and
>     the file exists. Perhaps imageio-ext 1.0.8 does support gdal1.7.3
>
>
>     On Wed, Apr 13, 2011 at 1:59 PM, Andreas Oxenstierna
>     <ao@t-kartor.se <mailto:ao@t-kartor.se>> wrote:
>
>         If I am interpreting the information correctly on
>         http://docs.geoserver.org/latest/en/user/data/gdal.html
>         GeoServer is using Image I/O-Ext 1.0.8 which is using GDAL
>         1.4.5, that is my reason.
>
>         How can I get access to the file
>         gdal1.4.5b-linux64-base.tar.gz
>         <http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz>
>         ? I cannot download it from the link below with any tested
>         browser, instead getting a message "The page you were looking
>         for doesn't exist".
>
>         Andreas
>
>
>>         Andreas,
>>
>>         The file exists. However, the GDAL 1.4 branch is no longer
>>         supported. The latest stable version is 1.8 although 1.7 is
>>         also supported. Why don't you use the 1.7 version.
>>         http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/
>>
>>         On Wed, Apr 13, 2011 at 1:16 PM, Andreas Oxenstierna
>>         <ao@t-kartor.se <mailto:ao@t-kartor.se>> wrote:
>>
>>             Need to include GDAL support for GeoServer 2.1 on Linux
>>             64-bit. However, it seems that the link to the native
>>             libraries
>>             onhttp://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux64/gdal1.4.5b-linux64-base.tar.gz 
>>             is broken. Can I get the gdal1.4.5b-linux64-base.tar.gz
>>             from somewhere else or do I need to build it from the
>>             source files?
>>
>>             -- 
>>             Andreas Oxenstierna
>>             T-Kartan Produkt AB
>>             mobile:+46 733 206831  <tel:%2B46%20733%20206831>
>>             mailto:ao@t-kartor.se  <mailto:ao@t-kartor.se>
>>             http://www.t-kartor.com
>>
>>
>>             _______________________________________________
>>             gdal-dev mailing list
>>             gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>             http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>         -- 
>>         Best regards,
>>         Chaitanya kumar CH.
>>         /t?a???nj?/ /k?m?r/
>>         +91-9494447584 <tel:%2B91-9494447584>
>>         17.2416N 80.1426E
>
>
>         -- 
>         Andreas Oxenstierna
>         T-Kartan Produkt AB
>         mobile:+46 733 206831  <tel:%2B46%20733%20206831>
>         mailto:ao@t-kartor.se  <mailto:ao@t-kartor.se>
>         http://www.t-kartor.com
>
>
>
>
>     -- 
>     Best regards,
>     Chaitanya kumar CH.
>     /t?a???nj?/ /k?m?r/
>     +91-9494447584 <tel:%2B91-9494447584>
>     17.2416N 80.1426E
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> -------------------------------------------------------
> Ing. Daniele Romagnoli
> GeoSolutions S.A.S.
> Software Engineer
>
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
>
> phone: +39 0584 962313
> fax:      +39 0584 962313
> mob:   +39 328 0559267
>
> http://www.geo-solutions.it <http://www.geo-solutions.it/>
> http://geo-solutions.blogspot.com/
> http://www.youtube.com/user/GeoSolutionsIT
> http://it.linkedin.com/in/danieleromagnoli
>
>
> -------------------------------------------------------
>


-- 
Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao@t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/5a3acb84/attachment.html
From warmerdam at pobox.com  Wed Apr 13 12:01:21 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 13 12:01:26 2011
Subject: [gdal-dev] gdal datum shift
In-Reply-To: <BANLkTinZDXuFJgyG0tKcfApOYMmb8SpDxA@mail.gmail.com>
References: <BANLkTinZDXuFJgyG0tKcfApOYMmb8SpDxA@mail.gmail.com>
Message-ID: <4DA5C8D1.9070706@pobox.com>

On 11-04-12 06:07 PM, Brian Wilson wrote:
> Trying to get a raster to go from NAD83 to NAD27 with gdalwarp. Can't see any
> way to tell how it is choosing to do it. Is this documented anywhere?  Is there
> any way to make it verbose so I can tell if it's trying?
>
> I ran it through strace and watched it open a file called gdal_datum.csv but of
> course can't tell what it's trying to do.
>
> I found this post from Frank which implies it tries to be smart and figure out
> the transforms without my help:
> http://fwarmerdam.blogspot.com/2010/03/in-last-few-weeks-i-believe-i-have-made.html
>
> But it's not working and since I don't know how to tell what it's doing I can't
> intelligently ask for help. :-)
>
> Thanks for your patience with a n00by
>
> Brian
>
> Command I am using:
>
> gdalwarp -of HFA -co COMPRESSED=YES -t_srs
> ESRI::NAD_1927_StatePlane_Oregon_North_FIPS_3601.prj 11s5w34f_color_ne.sid
> 11s5w34f_color_ne_nad27.img
>
> Output is in the right coordinate space (it's moved from meters to feet) but
> has that familiar 10 or so meter shift we get around like the NAD83-NAD27
> transform failed.
>
> The input file SRS looks like this
>
> Coordinate System is:
> PROJCS["NAD_1983_HARN_StatePlane_Oregon_North_FIPS_3601",
>      GEOGCS["GCS_North_American_1983_HARN",
>          DATUM["NAD83_High_Accuracy_Regional_Network",
>              SPHEROID["GRS_1980",6378137,298.257222101]],
>          PRIMEM["Greenwich",0],
>          UNIT["Degree",0.017453292519943295]],
>      PROJECTION["Lambert_Conformal_Conic_2SP"],
>      PARAMETER["False_Easting",2500000],
>      PARAMETER["False_Northing",0],
>      PARAMETER["Central_Meridian",-120.5],
>      PARAMETER["Standard_Parallel_1",44.33333333333334],
>      PARAMETER["Standard_Parallel_2",46],
>      PARAMETER["Latitude_Of_Origin",43.66666666666666],
>      UNIT["Meter",1],
>      AUTHORITY["EPSG","102326"]]

Brian,

I believe the problem is the source datum name
"NAD83_High_Accuracy_Regional_Network".  I believe
this is *not* recognised as essentially NAD83 and so
the source datum is treated as unknown and no datum
shifts are done.

It can be helpful to run gdalwarp with the commandline
option "--debug on" in which case the debug output should
include the PROJ.4 rendering of the source and destination
coordinate system.

At a very low level you can also define the PROJ_DEBUG environment
variable to the value ON and PROJ.4 will report some details on what
datum files are opened.

I think you are going to have to provide a source coordinate
system with the -s_srs commandline switch to gdalwarp that
defines a more conventional NAD83 based coordinate system.  You
might also want to file a ticket on this issue.  Ideally we
would be smarter about treating NAD83 HARN as equivelent to NAD83
for most purposes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Wed Apr 13 14:13:55 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Wed Apr 13 14:13:56 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
Message-ID: <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>

Perfect. Thank you Michael.

- Ragi


> Date: Tue, 12 Apr 2011 15:45:25 -0400
> From: "Smith, Michael ERDC-CRREL-NH" <michael.smith@usace.army.mil>
> Subject: Re: [gdal-dev] Re: FileGDB OGR driver test
> To: Even Rouault <even.rouault@mines-paris.org>,
>        <gdal-dev@lists.osgeo.org>
> Message-ID: <C9CA2415.2220D%michael.smith@usace.army.mil>
> Content-Type: text/plain;       charset="ISO-8859-1"
>
> I have a test v10 filegdb with points, lines, polygons (all with Z and M
> but
> I think the measures aren't populated). There are also some non geometry
> tables and some relationship classes.
>
> Its available at
>
> http://12.189.158.78:8081/downloads/test_fgdb.gdb.zip
>
> Mike
>
>
> --
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
>
>
> On 4/12/11 2:48 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>
> > Le mardi 12 avril 2011 20:40:58, Matt Wilkie a ?crit :
> >>> ArcGIS 10 FileGDB's right ?
> >>
> >> If the api allows for using gdb's from different versions then the test
> >> suite should have different versions too. In any case I can make v10
> gdb's.
> >
> > No, the FileGDB API only reads v10 gdb's.
> >
> >>
> >>> Current GDAL trunk builds against FileGDB API beta3 under Linux 32bit.
> >>> Too bad ESRI doesn't provide any 64bit build of the FileGDB API (yet...
> >>> ?)
> >>
> >> """
> >> We are working on a Linux 64-bit release of the File Geodatabase API. It
> >> will not release with the 1.0 release of the API, but as a part of a
> >> follow on release later this year.
> >>
> >> Lance Shipman
> >> Geodatabase Product Engineer, File Geodatabase
> >> esri
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/6997f9d6/attachment.html
From EAdam at co.lincoln.or.us  Wed Apr 13 15:00:42 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Wed Apr 13 15:01:21 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>
References: <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>
Message-ID: <4DA59069.4F75.00CE.0@co.lincoln.or.us>

Ragi,

     I tested the driver on just one FileGDB which included a date
field.  You stated, 

Known issues with build / FileGDB driver
- (driver issue) blobs and date fields are not handled at all

Here is what I did and successfully got the data.  The date field was
made a double and populated with 0, however, since it says that date
fields are not handled, it is nice that the rest of the process still
worked on the other fields and the data was exported.  

ogr2ogr ODF_Lincoln_Roads.shp West_Oregon_Roads.gdb
"ODF_Lincoln_Roads"
Warning 6: Field RDSRCDATE create as date field, though DateTime
requested.

Warning 6: Normalized/laundered field name: 'CONSTRUCTED' to
'CONSTRUCTE'
Warning 6: Normalized/laundered field name: 'Shape_Length' to
'Shape_Leng'
Warning 1: Row id: 4 col:10 has unhandled col type (11). Setting to
NULL.
ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
long:-2147217395
ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
long:-2147217395

Thanks for the work on this.

Eli




>>> On 4/13/2011 at 11:13 AM, in message
<BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>, Ragi Burhum
<ragi@burhum.com> wrote:
> Perfect. Thank you Michael.
> 
> - Ragi
> 
> 
>> Date: Tue, 12 Apr 2011 15:45:25 -0400
>> From: "Smith, Michael ERDC-CRREL-NH" <michael.smith@usace.army.mil>
>> Subject: Re: [gdal-dev] Re: FileGDB OGR driver test
>> To: Even Rouault <even.rouault@mines-paris.org>,
>>        <gdal-dev@lists.osgeo.org>
>> Message-ID: <C9CA2415.2220D%michael.smith@usace.army.mil>
>> Content-Type: text/plain;       charset="ISO-8859-1"
>>
>> I have a test v10 filegdb with points, lines, polygons (all with Z
and M
>> but
>> I think the measures aren't populated). There are also some non
geometry
>> tables and some relationship classes.
>>
>> Its available at
>>
>> http://12.189.158.78:8081/downloads/test_fgdb.gdb.zip 
>>
>> Mike
>>
>>
>> --
>> Michael Smith
>> Remote Sensing/GIS Center
>> US Army Corps of Engineers
>>
>>
>>
>> On 4/12/11 2:48 PM, "Even Rouault" <even.rouault@mines-paris.org>
wrote:
>>
>> > Le mardi 12 avril 2011 20:40:58, Matt Wilkie a ?crit :
>> >>> ArcGIS 10 FileGDB's right ?
>> >>
>> >> If the api allows for using gdb's from different versions then
the test
>> >> suite should have different versions too. In any case I can make
v10
>> gdb's.
>> >
>> > No, the FileGDB API only reads v10 gdb's.
>> >
>> >>
>> >>> Current GDAL trunk builds against FileGDB API beta3 under Linux
32bit.
>> >>> Too bad ESRI doesn't provide any 64bit build of the FileGDB API
(yet...
>> >>> ?)
>> >>
>> >> """
>> >> We are working on a Linux 64-bit release of the File Geodatabase
API. It
>> >> will not release with the 1.0 release of the API, but as a part
of a
>> >> follow on release later this year.
>> >>
>> >> Lance Shipman
>> >> Geodatabase Product Engineer, File Geodatabase
>> >> esri
>>
From even.rouault at mines-paris.org  Wed Apr 13 15:16:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 13 15:16:10 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <4DA59069.4F75.00CE.0@co.lincoln.or.us>
References: <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>
	<4DA59069.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <201104132116.00790.even.rouault@mines-paris.org>

Le mercredi 13 avril 2011 21:00:42, Eli Adam a ?crit :
> Ragi,
> 
>      I tested the driver on just one FileGDB which included a date
> field.  You stated,
> 
> Known issues with build / FileGDB driver
> - (driver issue) blobs and date fields are not handled at all

Yesterday, with the Michael Smith's test filegdb, I fixed the handling of date 
fields, so if you just update from SVN, it should work now.

An example with blobs would be usefull

> 
> Here is what I did and successfully got the data.  The date field was
> made a double and populated with 0, however, since it says that date
> fields are not handled, it is nice that the rest of the process still
> worked on the other fields and the data was exported.
> 
> ogr2ogr ODF_Lincoln_Roads.shp West_Oregon_Roads.gdb
> "ODF_Lincoln_Roads"
> Warning 6: Field RDSRCDATE create as date field, though DateTime
> requested.
> 
> Warning 6: Normalized/laundered field name: 'CONSTRUCTED' to
> 'CONSTRUCTE'
> Warning 6: Normalized/laundered field name: 'Shape_Length' to
> 'Shape_Leng'
> Warning 1: Row id: 4 col:10 has unhandled col type (11). Setting to
> NULL.
> ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
> long:-2147217395
> ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
> long:-2147217395
> 
> Thanks for the work on this.
> 
> Eli
> 
> >>> On 4/13/2011 at 11:13 AM, in message
> 
> <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>, Ragi Burhum
> 
> <ragi@burhum.com> wrote:
> > Perfect. Thank you Michael.
> > 
> > - Ragi
> > 
> >> Date: Tue, 12 Apr 2011 15:45:25 -0400
> >> From: "Smith, Michael ERDC-CRREL-NH" <michael.smith@usace.army.mil>
> >> Subject: Re: [gdal-dev] Re: FileGDB OGR driver test
> >> To: Even Rouault <even.rouault@mines-paris.org>,
> >> 
> >>        <gdal-dev@lists.osgeo.org>
> >> 
> >> Message-ID: <C9CA2415.2220D%michael.smith@usace.army.mil>
> >> Content-Type: text/plain;       charset="ISO-8859-1"
> >> 
> >> I have a test v10 filegdb with points, lines, polygons (all with Z
> 
> and M
> 
> >> but
> >> I think the measures aren't populated). There are also some non
> 
> geometry
> 
> >> tables and some relationship classes.
> >> 
> >> Its available at
> >> 
> >> http://12.189.158.78:8081/downloads/test_fgdb.gdb.zip
> >> 
> >> Mike
> >> 
> >> 
> >> --
> >> Michael Smith
> >> Remote Sensing/GIS Center
> >> US Army Corps of Engineers
> >> 
> >> 
> >> 
> >> On 4/12/11 2:48 PM, "Even Rouault" <even.rouault@mines-paris.org>
> 
> wrote:
> >> > Le mardi 12 avril 2011 20:40:58, Matt Wilkie a ?crit :
> >> >>> ArcGIS 10 FileGDB's right ?
> >> >> 
> >> >> If the api allows for using gdb's from different versions then
> 
> the test
> 
> >> >> suite should have different versions too. In any case I can make
> 
> v10
> 
> >> gdb's.
> >> 
> >> > No, the FileGDB API only reads v10 gdb's.
> >> > 
> >> >>> Current GDAL trunk builds against FileGDB API beta3 under Linux
> 
> 32bit.
> 
> >> >>> Too bad ESRI doesn't provide any 64bit build of the FileGDB API
> 
> (yet...
> 
> >> >>> ?)
> >> >> 
> >> >> """
> >> >> We are working on a Linux 64-bit release of the File Geodatabase
> 
> API. It
> 
> >> >> will not release with the 1.0 release of the API, but as a part
> 
> of a
> 
> >> >> follow on release later this year.
> >> >> 
> >> >> Lance Shipman
> >> >> Geodatabase Product Engineer, File Geodatabase
> >> >> esri
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From martin.krueger at gmx.com  Wed Apr 13 15:29:42 2011
From: martin.krueger at gmx.com (=?ISO-8859-1?Q?Martin_Kr=FCger?=)
Date: Wed Apr 13 15:47:32 2011
Subject: [gdal-dev] Cleaning up the tilefilename generation in gdal2tiles.py
Message-ID: <4DA5F9A6.6090509@gmx.com>

Hello
I was in need to generate tiles from a geotiff to publish the image as a
tms-service. So i was happy to find the gdal2tiles.py script which does
the job.

The only issue i stumbled over:
gdal2tiles.py generates the tiles in the google format(0,0=top-left) , i
need the tms format(0,0=bottom-left). I  looked at the script  and found
 something not  so nice:
The generation of the tile-filename is with redundancy of 3 times  in
the script.

So i wrote a little patch to keep the generation of the tile-filename in
a single place.  This is a better base for further development of the
script.

best regards
   martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cleanup_tilefilename.patch
Type: text/x-patch
Size: 1693 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/1f3ea2b1/cleanup_tilefilename.bin
From brian at wildsong.biz  Wed Apr 13 16:54:09 2011
From: brian at wildsong.biz (Brian Wilson)
Date: Wed Apr 13 16:54:11 2011
Subject: [gdal-dev] gdal datum shift
In-Reply-To: <4DA5C8D1.9070706@pobox.com>
References: <BANLkTinZDXuFJgyG0tKcfApOYMmb8SpDxA@mail.gmail.com>
	<4DA5C8D1.9070706@pobox.com>
Message-ID: <BANLkTinsX6MqjWs3gNb13pjd03iHntsh7A@mail.gmail.com>

Thanks Frank

I had guessed that I might have to use -s_srs but doing I saw no tangible
results hence my request for more verbose output. "--debug on" was very
useful as was PROJ_DEBUG.

As you surmised, the datum "NAD83_High_Accuracy_Regional_Network" is not
recognized as +datum=NAD83

Then I found that I had missed the step in building Proj.4 of downloading
separately the datum shift zip file. Upon fixing that I am now able to
reproject correctly! HURRAH!

Brian

It can be helpful to run gdalwarp with the commandline
> option "--debug on" in which case the debug output should
> include the PROJ.4 rendering of the source and destination
> coordinate system.
>
> At a very low level you can also define the PROJ_DEBUG environment
> variable to the value ON and PROJ.4 will report some details on what
> datum files are opened.
>
> I think you are going to have to provide a source coordinate
> system with the -s_srs commandline switch to gdalwarp that
> defines a more conventional NAD83 based coordinate system.  You
> might also want to file a ticket on this issue.  Ideally we
> would be smarter about treating NAD83 HARN as equivelent to NAD83
> for most purposes.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110413/e2ada625/attachment-0001.html
From hilmyh at gmail.com  Thu Apr 14 03:09:14 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Thu Apr 14 03:09:36 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
Message-ID: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>

Sorry to bring this up again. I've been looking for why epsg_tr.py -proj4 is
not including the +gamma (RectifiedToSkew angle) parameter for the
+proj=omerc projection as used in EPSG:3168, EPSG:3375, etc. It seems that
it is not set in
https://svn.osgeo.org/fdo/trunk/Thirdparty/gdal/ogr/ogr_srs_proj4.cpp:

else if( EQUAL(pszProj,"omerc") )

    {
        SetHOM( OSR_GDV( papszNV, "lat_0", 0.0 ),
                OSR_GDV( papszNV, "lonc", 0.0 ),
                OSR_GDV( papszNV, "alpha", 0.0 ),
                0.0, /* ??? */
                OSR_GDV( papszNV, "k", 1.0 ),
                OSR_GDV( papszNV, "x_0", 0.0 ),
                OSR_GDV( papszNV, "y_0", 0.0 ) );
    }

...


        else
        {
            sprintf( szProj4+strlen(szProj4),
                     "+proj=omerc +lat_0=%.16g +lonc=%.16g +alpha=%.16g"
                     " +k=%.16g +x_0=%.16g +y_0=%.16g ",
                     GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
                     GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
                     GetNormProjParm(SRS_PP_AZIMUTH,0.0),
                     GetNormProjParm(SRS_PP_SCALE_FACTOR,1.0),
                     GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
                     GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
        }

There seems to be some uncertainty about this parameter. How can this be
resolved and how can I help?

Thanks.

*Hilmy*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110414/3cd27e22/attachment.html
From even.rouault at mines-paris.org  Thu Apr 14 03:27:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 14 03:27:39 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
Message-ID: <1302766049.4da6a1e1e8f0c@webmail.free.fr>

Selon Hilmy Hashim <hilmyh@gmail.com>:

> Sorry to bring this up again. I've been looking for why epsg_tr.py -proj4 is
> not including the +gamma (RectifiedToSkew angle) parameter for the
> +proj=omerc projection as used in EPSG:3168, EPSG:3375, etc. It seems that
> it is not set in
> https://svn.osgeo.org/fdo/trunk/Thirdparty/gdal/ogr/ogr_srs_proj4.cpp:

--> You are not looking to the right repository (the one above is an import of
an older GDAL version by the FDO project). The main GDAL repository is located
at http://svn.osgeo.org/gdal/trunk.

I can see that a fix for the gamma parameter in
http://trac.osgeo.org/gdal/changeset/18950. This is in GDAL 1.8.0 and the
testepsg utility gives :

PROJ.4 rendering of [EPSG:3168] = +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0
257905 +k=0.99984 +x_0=804670.24 +y_0=0 +gamma=323.1301023611111 +a=6377295.664
+b=6356094.667915204 +units=m +no_defs

>
> else if( EQUAL(pszProj,"omerc") )
>
>     {
>         SetHOM( OSR_GDV( papszNV, "lat_0", 0.0 ),
>                 OSR_GDV( papszNV, "lonc", 0.0 ),
>                 OSR_GDV( papszNV, "alpha", 0.0 ),
>                 0.0, /* ??? */
>                 OSR_GDV( papszNV, "k", 1.0 ),
>                 OSR_GDV( papszNV, "x_0", 0.0 ),
>                 OSR_GDV( papszNV, "y_0", 0.0 ) );
>     }
>
> ...
>
>
>         else
>         {
>             sprintf( szProj4+strlen(szProj4),
>                      "+proj=omerc +lat_0=%.16g +lonc=%.16g +alpha=%.16g"
>                      " +k=%.16g +x_0=%.16g +y_0=%.16g ",
>                      GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
>                      GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
>                      GetNormProjParm(SRS_PP_AZIMUTH,0.0),
>                      GetNormProjParm(SRS_PP_SCALE_FACTOR,1.0),
>                      GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
>                      GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
>         }
>
> There seems to be some uncertainty about this parameter. How can this be
> resolved and how can I help?
>
> Thanks.
>
> *Hilmy*
>


From hilmyh at gmail.com  Thu Apr 14 03:37:47 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Thu Apr 14 03:38:09 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <1302766049.4da6a1e1e8f0c@webmail.free.fr>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
	<1302766049.4da6a1e1e8f0c@webmail.free.fr>
Message-ID: <BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>

Merci Even,

Didn't know which one is the effective code, there are so many versions
around. It's good to know that changes have been made.

I'm using QGis 1.7 dev and the About say it's using GDAL/OGR 1.8.0. How come
the +gamma is not included there?

Regards

*Hilmy*


On Thu, Apr 14, 2011 at 3:27 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Hilmy Hashim <hilmyh@gmail.com>:
>
> > Sorry to bring this up again. I've been looking for why epsg_tr.py -proj4
> is
> > not including the +gamma (RectifiedToSkew angle) parameter for the
> > +proj=omerc projection as used in EPSG:3168, EPSG:3375, etc. It seems
> that
> > it is not set in
> > https://svn.osgeo.org/fdo/trunk/Thirdparty/gdal/ogr/ogr_srs_proj4.cpp:
>
> --> You are not looking to the right repository (the one above is an import
> of
> an older GDAL version by the FDO project). The main GDAL repository is
> located
> at http://svn.osgeo.org/gdal/trunk.
>
> I can see that a fix for the gamma parameter in
> http://trac.osgeo.org/gdal/changeset/18950. This is in GDAL 1.8.0 and the
> testepsg utility gives :
>
> PROJ.4 rendering of [EPSG:3168] = +proj=omerc +lat_0=4 +lonc=102.25
> +alpha=323.0
> 257905 +k=0.99984 +x_0=804670.24 +y_0=0 +gamma=323.1301023611111
> +a=6377295.664
> +b=6356094.667915204 +units=m +no_defs
>
> >
> > else if( EQUAL(pszProj,"omerc") )
> >
> >     {
> >         SetHOM( OSR_GDV( papszNV, "lat_0", 0.0 ),
> >                 OSR_GDV( papszNV, "lonc", 0.0 ),
> >                 OSR_GDV( papszNV, "alpha", 0.0 ),
> >                 0.0, /* ??? */
> >                 OSR_GDV( papszNV, "k", 1.0 ),
> >                 OSR_GDV( papszNV, "x_0", 0.0 ),
> >                 OSR_GDV( papszNV, "y_0", 0.0 ) );
> >     }
> >
> > ...
> >
> >
> >         else
> >         {
> >             sprintf( szProj4+strlen(szProj4),
> >                      "+proj=omerc +lat_0=%.16g +lonc=%.16g +alpha=%.16g"
> >                      " +k=%.16g +x_0=%.16g +y_0=%.16g ",
> >                      GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
> >                      GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
> >                      GetNormProjParm(SRS_PP_AZIMUTH,0.0),
> >                      GetNormProjParm(SRS_PP_SCALE_FACTOR,1.0),
> >                      GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
> >                      GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
> >         }
> >
> > There seems to be some uncertainty about this parameter. How can this be
> > resolved and how can I help?
> >
> > Thanks.
> >
> > *Hilmy*
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110414/4187b8d8/attachment.html
From even.rouault at mines-paris.org  Thu Apr 14 03:51:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 14 03:52:04 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
	<1302766049.4da6a1e1e8f0c@webmail.free.fr>
	<BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>
Message-ID: <1302767514.4da6a79aec90f@webmail.free.fr>

Selon Hilmy Hashim <hilmyh@gmail.com>:

> Merci Even,
>
> Didn't know which one is the effective code, there are so many versions
> around. It's good to know that changes have been made.
>
> I'm using QGis 1.7 dev and the About say it's using GDAL/OGR 1.8.0. How come
> the +gamma is not included there?

I know they have updated very recently their srs.db to sync it with GDAL 1.8.0.
Perhaps you should also update to the latest svn version of qgis ?

A comment in the GDAL code also shows that the +gamma parameter is only
understood by PROJ 4.8.0 (so the svn version as 4.8.0 is unreleased yet).

But one thing is definitely weird and should be investigated first : epsg_tr.py
-proj4 3168 *should* show the +gamma parameter (whatever your proj version is).
If you don't see it, it's a clear sign you don't use GDAL 1.8.0.

What does epsg_tr.py --version return ?

>
> Regards
>
> *Hilmy*
>
>
> On Thu, Apr 14, 2011 at 3:27 PM, Even Rouault
> <even.rouault@mines-paris.org>wrote:
>
> > Selon Hilmy Hashim <hilmyh@gmail.com>:
> >
> > > Sorry to bring this up again. I've been looking for why epsg_tr.py -proj4
> > is
> > > not including the +gamma (RectifiedToSkew angle) parameter for the
> > > +proj=omerc projection as used in EPSG:3168, EPSG:3375, etc. It seems
> > that
> > > it is not set in
> > > https://svn.osgeo.org/fdo/trunk/Thirdparty/gdal/ogr/ogr_srs_proj4.cpp:
> >
> > --> You are not looking to the right repository (the one above is an import
> > of
> > an older GDAL version by the FDO project). The main GDAL repository is
> > located
> > at http://svn.osgeo.org/gdal/trunk.
> >
> > I can see that a fix for the gamma parameter in
> > http://trac.osgeo.org/gdal/changeset/18950. This is in GDAL 1.8.0 and the
> > testepsg utility gives :
> >
> > PROJ.4 rendering of [EPSG:3168] = +proj=omerc +lat_0=4 +lonc=102.25
> > +alpha=323.0
> > 257905 +k=0.99984 +x_0=804670.24 +y_0=0 +gamma=323.1301023611111
> > +a=6377295.664
> > +b=6356094.667915204 +units=m +no_defs
> >
> > >
> > > else if( EQUAL(pszProj,"omerc") )
> > >
> > >     {
> > >         SetHOM( OSR_GDV( papszNV, "lat_0", 0.0 ),
> > >                 OSR_GDV( papszNV, "lonc", 0.0 ),
> > >                 OSR_GDV( papszNV, "alpha", 0.0 ),
> > >                 0.0, /* ??? */
> > >                 OSR_GDV( papszNV, "k", 1.0 ),
> > >                 OSR_GDV( papszNV, "x_0", 0.0 ),
> > >                 OSR_GDV( papszNV, "y_0", 0.0 ) );
> > >     }
> > >
> > > ...
> > >
> > >
> > >         else
> > >         {
> > >             sprintf( szProj4+strlen(szProj4),
> > >                      "+proj=omerc +lat_0=%.16g +lonc=%.16g +alpha=%.16g"
> > >                      " +k=%.16g +x_0=%.16g +y_0=%.16g ",
> > >                      GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
> > >                      GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
> > >                      GetNormProjParm(SRS_PP_AZIMUTH,0.0),
> > >                      GetNormProjParm(SRS_PP_SCALE_FACTOR,1.0),
> > >                      GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
> > >                      GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
> > >         }
> > >
> > > There seems to be some uncertainty about this parameter. How can this be
> > > resolved and how can I help?
> > >
> > > Thanks.
> > >
> > > *Hilmy*
> > >
> >
> >
> >
>


From hilmyh at gmail.com  Thu Apr 14 04:15:24 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Thu Apr 14 04:15:49 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <1302767514.4da6a79aec90f@webmail.free.fr>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
	<1302766049.4da6a1e1e8f0c@webmail.free.fr>
	<BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>
	<1302767514.4da6a79aec90f@webmail.free.fr>
Message-ID: <BANLkTikezDF0eBZm+wJY8Pp7y6z6Zo-M-Q@mail.gmail.com>

I'm using OSGeo4W on Windows 7. I just checked using the OSGeo4W shell and
setting gdaldev environment epsg_tr does give me +gamma. On my Ubuntu 10.04
box with GDAL 1.7.3, the gamma is not there.

I've just updated QGis 1.7.0-114 and I don't get the gamma in the CRS
listing.

Thanks

*Hilmy*


On Thu, Apr 14, 2011 at 3:51 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon Hilmy Hashim <hilmyh@gmail.com>:
>
> > Merci Even,
> >
> > Didn't know which one is the effective code, there are so many versions
> > around. It's good to know that changes have been made.
> >
> > I'm using QGis 1.7 dev and the About say it's using GDAL/OGR 1.8.0. How
> come
> > the +gamma is not included there?
>
> I know they have updated very recently their srs.db to sync it with GDAL
> 1.8.0.
> Perhaps you should also update to the latest svn version of qgis ?
>
> A comment in the GDAL code also shows that the +gamma parameter is only
> understood by PROJ 4.8.0 (so the svn version as 4.8.0 is unreleased yet).
>
> But one thing is definitely weird and should be investigated first :
> epsg_tr.py
> -proj4 3168 *should* show the +gamma parameter (whatever your proj version
> is).
> If you don't see it, it's a clear sign you don't use GDAL 1.8.0.
>
> What does epsg_tr.py --version return ?
>
> >
> > Regards
> >
> > *Hilmy*
> >
> >
> > On Thu, Apr 14, 2011 at 3:27 PM, Even Rouault
> > <even.rouault@mines-paris.org>wrote:
> >
> > > Selon Hilmy Hashim <hilmyh@gmail.com>:
> > >
> > > > Sorry to bring this up again. I've been looking for why epsg_tr.py
> -proj4
> > > is
> > > > not including the +gamma (RectifiedToSkew angle) parameter for the
> > > > +proj=omerc projection as used in EPSG:3168, EPSG:3375, etc. It seems
> > > that
> > > > it is not set in
> > > >
> https://svn.osgeo.org/fdo/trunk/Thirdparty/gdal/ogr/ogr_srs_proj4.cpp:
> > >
> > > --> You are not looking to the right repository (the one above is an
> import
> > > of
> > > an older GDAL version by the FDO project). The main GDAL repository is
> > > located
> > > at http://svn.osgeo.org/gdal/trunk.
> > >
> > > I can see that a fix for the gamma parameter in
> > > http://trac.osgeo.org/gdal/changeset/18950. This is in GDAL 1.8.0 and
> the
> > > testepsg utility gives :
> > >
> > > PROJ.4 rendering of [EPSG:3168] = +proj=omerc +lat_0=4 +lonc=102.25
> > > +alpha=323.0
> > > 257905 +k=0.99984 +x_0=804670.24 +y_0=0 +gamma=323.1301023611111
> > > +a=6377295.664
> > > +b=6356094.667915204 +units=m +no_defs
> > >
> > > >
> > > > else if( EQUAL(pszProj,"omerc") )
> > > >
> > > >     {
> > > >         SetHOM( OSR_GDV( papszNV, "lat_0", 0.0 ),
> > > >                 OSR_GDV( papszNV, "lonc", 0.0 ),
> > > >                 OSR_GDV( papszNV, "alpha", 0.0 ),
> > > >                 0.0, /* ??? */
> > > >                 OSR_GDV( papszNV, "k", 1.0 ),
> > > >                 OSR_GDV( papszNV, "x_0", 0.0 ),
> > > >                 OSR_GDV( papszNV, "y_0", 0.0 ) );
> > > >     }
> > > >
> > > > ...
> > > >
> > > >
> > > >         else
> > > >         {
> > > >             sprintf( szProj4+strlen(szProj4),
> > > >                      "+proj=omerc +lat_0=%.16g +lonc=%.16g
> +alpha=%.16g"
> > > >                      " +k=%.16g +x_0=%.16g +y_0=%.16g ",
> > > >                      GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
> > > >                      GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
> > > >                      GetNormProjParm(SRS_PP_AZIMUTH,0.0),
> > > >                      GetNormProjParm(SRS_PP_SCALE_FACTOR,1.0),
> > > >                      GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
> > > >                      GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
> > > >         }
> > > >
> > > > There seems to be some uncertainty about this parameter. How can this
> be
> > > > resolved and how can I help?
> > > >
> > > > Thanks.
> > > >
> > > > *Hilmy*
> > > >
> > >
> > >
> > >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110414/3be9503d/attachment-0001.html
From jef at norbit.de  Thu Apr 14 06:28:22 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu Apr 14 06:28:54 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <1302767514.4da6a79aec90f@webmail.free.fr>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
	<1302766049.4da6a1e1e8f0c@webmail.free.fr>
	<BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>
	<1302767514.4da6a79aec90f@webmail.free.fr>
Message-ID: <20110414102822.GA18583@norbit.de>

Hi Even,

On Thu, 14. Apr 2011 at 09:51:54 +0200, Even Rouault wrote:
> I know they have updated very recently their srs.db to sync it with GDAL 1.8.0.
> Perhaps you should also update to the latest svn version of qgis ?

OSGeo4W has the qgis-dev package which is a nightly build of trunk.

But the sync was with PROJ and not with GDAL.  And I think that was wrong.

What's the process to update the SRS databases?  I found a README from Frank in
that it seems that geotiff is updated first,  gdal from that and from there
proj and postgis. 

Not sure what or if the metacrs project adds to the picture...


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From warmerdam at pobox.com  Thu Apr 14 06:30:11 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 14 06:30:16 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <BANLkTikezDF0eBZm+wJY8Pp7y6z6Zo-M-Q@mail.gmail.com>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
	<1302766049.4da6a1e1e8f0c@webmail.free.fr>
	<BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>
	<1302767514.4da6a79aec90f@webmail.free.fr>
	<BANLkTikezDF0eBZm+wJY8Pp7y6z6Zo-M-Q@mail.gmail.com>
Message-ID: <4DA6CCB3.8040002@pobox.com>

On 11-04-14 04:15 AM, Hilmy Hashim wrote:
> I'm using OSGeo4W on Windows 7. I just checked using the OSGeo4W shell and
> setting gdaldev environment epsg_tr does give me +gamma. On my Ubuntu 10.04 box
> with GDAL 1.7.3, the gamma is not there.
>
> I've just updated QGis 1.7.0-114 and I don't get the gamma in the CRS listing.

Hilmy,

For reference, in my OSGeo4W install I see:

C:\warmerda>epsg_tr -proj4 3168
# Kertau (RSO) / RSO Malaya (m)
<3168> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257905 +k=0.99984 +x_0=8046
70.24 +y_0=0 +gamma=323.1301023611111 +a=6377295.664 +b=6356094.667915204 +units
=m +no_defs  <>

C:\warmerda>epsg_tr --version
GDAL 1.8.0, released 2011/01/12

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hilmyh at gmail.com  Thu Apr 14 07:39:28 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Thu Apr 14 07:39:51 2011
Subject: [gdal-dev] Gamma parameter not set in proj4 string for RSO
	projections
In-Reply-To: <4DA6CCB3.8040002@pobox.com>
References: <BANLkTi=FxTeZvkMAYqnuwOLbpo=jkBHnNA@mail.gmail.com>
	<1302766049.4da6a1e1e8f0c@webmail.free.fr>
	<BANLkTin-0=oFotyahATjSTabSmZ80=cb4A@mail.gmail.com>
	<1302767514.4da6a79aec90f@webmail.free.fr>
	<BANLkTikezDF0eBZm+wJY8Pp7y6z6Zo-M-Q@mail.gmail.com>
	<4DA6CCB3.8040002@pobox.com>
Message-ID: <BANLkTinkV9n5oqB+D1OhU8L9h0gHa7V8zw@mail.gmail.com>

Frank,

I now get the gamma with epsg_tr. The issue that remains is that the srs.db
that qgis uses is not synced with the latest gdal.

Thanks

*Hilmy*


On Thu, Apr 14, 2011 at 6:30 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-04-14 04:15 AM, Hilmy Hashim wrote:
>
>> I'm using OSGeo4W on Windows 7. I just checked using the OSGeo4W shell and
>> setting gdaldev environment epsg_tr does give me +gamma. On my Ubuntu
>> 10.04 box
>> with GDAL 1.7.3, the gamma is not there.
>>
>> I've just updated QGis 1.7.0-114 and I don't get the gamma in the CRS
>> listing.
>>
>
> Hilmy,
>
> For reference, in my OSGeo4W install I see:
>
> C:\warmerda>epsg_tr -proj4 3168
> # Kertau (RSO) / RSO Malaya (m)
> <3168> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257905 +k=0.99984
> +x_0=8046
>
> 70.24 +y_0=0 +gamma=323.1301023611111 +a=6377295.664 +b=6356094.667915204
> +units
> =m +no_defs  <>
>
> C:\warmerda>epsg_tr --version
> GDAL 1.8.0, released 2011/01/12
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110414/f5528c78/attachment.html
From jsimpson at wxtrends.com  Thu Apr 14 08:38:43 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Apr 14 08:38:46 2011
Subject: [gdal-dev] Dateline gap
In-Reply-To: <4DA4ED39.2070202@ualg.pt>
References: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
	<4DA4ED39.2070202@ualg.pt>
Message-ID: <BANLkTim=v5Kamo04+MQ7cSVi1O2W3zRp1A@mail.gmail.com>

Hello:

I'm having a hard time getting anything to work with the files I have.
 Maybe the files need to be changed or translated?  Joaquim mentioned
they need to be in geogs but I'm not sure how to go about checking for
that or converting to that if need be.  I've included output from one
of the tests I ran.  It works the same way with all my files no matter
what the data inside is.  One thing I thought was strange was that I
used the -A option, and in the error message it tells me to use the -A
options.

Command:
ps2raster -A -D./tests -E720 -TG -V -W+k testNETCDF.nc

Output:
ps2raster: Processing testNETCDF.nc: Find HiResBoundingBox Error:
/undefined in CDF
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--
--nostringval--   2   %stopped_push   --nostringval--
--nostringval--   --nostringval--   false   1   %stopped_push   1878
1   3   %oparray_pop   1877   1   3   %oparray_pop   1861   1   3
%oparray_pop   1755   1   3   %oparray_pop   --nostringval--
%errorexec_pop   .runexec2   --nostringval--   --nostringval--
--nostringval--   2   %stopped_push   --nostringval--
Dictionary stack:
   --dict:1151/1684(ro)(G)--   --dict:0/20(G)--   --dict:70/200(L)--
Current allocation mode is local
Current file position is 5
ps2raster: GMT FATAL ERROR: The file testNETCDF.nc has no BoundingBox
in the first 20 lines or last 256 bytes. Use -A option.


gdalinfo for netcdf:
Driver: netCDF/Network Common Data Format
Files: testNETCDF.nc
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#Conventions=COARDS
  NC_GLOBAL#calendar=standard
  NC_GLOBAL#comments=File
  NC_GLOBAL#model=geos/das
  NC_GLOBAL#center=gsfc
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"testNETCDF.nc":max_temp
  SUBDATASET_1_DESC=[15x601x1201] max_temp (32-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"testNETCDF.nc":min_temp
  SUBDATASET_2_DESC=[15x601x1201] min_temp (32-bit floating-point)
  SUBDATASET_3_NAME=NETCDF:"testNETCDF.nc":prcp
  SUBDATASET_3_DESC=[15x601x1201] prcp (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

Thank you,

Jerl

On Tue, Apr 12, 2011 at 7:24 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> Jerl,
>
> I would do that with GMT. By using ps2raster you can convert any GMT figure
> (in geogs of course) into KML, and GMT has excellent care of date line
> transition issues.
>
> Joaquim
>
>> Hello:
>>
>> I stopped by the #gdal channel on IRC to ask this question. ?Thank you
>> for the help provided there. ?I thought it might be better if I asked
>> a question here so I can better explain what's going on in one spot
>> and not flood the channel.
>> I understand this is a pixel center vs pixel edge issue.
>>
>> My ultimate goal is to get from a netCDF file to a google map overlay
>> contour.
>> The general steps I've taken, which work all the way up to about
>> 178.29 then it just cuts off.
>>
>> netCDF -> ?color-relief PNG using "gdaldem color-relief ... ?"
>> PNG -> ?Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
>> 4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
>> tried this with just "-180 90 180 -90"
>> PNG -> ?tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
>> the Geocoded PNG
>> I guess first question, is my methodology sound? ?Maybe there's a
>> better way/tool to approach the problem.
>>
>> Following is the output from gdalinfo, other than that, what
>> information might I be able to provide that could help?
>>
>> Thank you,
>>
>> Jerl
>>
>> gdalinfo for the source netcdf: (My apologies, I'm not certain what is
>> relevant so I'm including most everything.)
>>
>> Driver: netCDF/Network Common Data Format
>> Files: test.nc
>> Size is 721, 361
>> Coordinate System is `'
>> Origin = (-180.250000000000000,90.250000000000000)
>> Pixel Size = (0.500000000000000,-0.500000000000000)
>> Metadata:
>> ? NC_GLOBAL#Conventions=CF-1.0
>> ? NC_GLOBAL#cdm_data_type=GRID
>> ? NC_GLOBAL#file_format=GEMPAK
>> ? NC_GLOBAL#location=test.grd
>> ? NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
>> ? NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
>> ? UVIN_NONE#long_name=testdata
>> ? UVIN_NONE#units=
>> ? UVIN_NONE#missing_value=-9.999000e+03
>> ? UVIN_NONE#VectorComponentFlag=gridRelative
>> ? time#long_name=forecast time
>> ? time#units=minute since 2011-04-12T00:00:00Z
>> ? time#_CoordinateAxisType=Time
>> ? lat#units=degrees_north
>> ? lat#long_name=latitude coordinate
>> ? lat#standard_name=latitude
>> ? lat#grid_spacing=0.5 degrees_north
>> ? lat#_CoordinateAxisType=Lat
>> ? lon#units=degrees_east
>> ? lon#long_name=longitude coordinate
>> ? lon#standard_name=longitude
>> ? lon#grid_spacing=0.5 degrees_east
>> ? lon#_CoordinateAxisType=Lon
>> Corner Coordinates:
>> Upper Left ?(-180.2500000, ?90.2500000)
>> Lower Left ?(-180.2500000, -90.2500000)
>> Upper Right ( 180.2500000, ?90.2500000)
>> Lower Right ( 180.2500000, -90.2500000)
>> Center ? ? ?( ? 0.0000000, ? 0.0000000)
>>
>> gdalinfo of geocoded PNG:
>>
>> Driver: PNG/Portable Network Graphics
>> Files: testWorld.png
>> ? ? ? ?testWorld.png.aux.xml
>> Size is 4096, 4096
>> Coordinate System is:
>> GEOGCS["WGS 84",
>> ? ? DATUM["WGS_1984",
>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> ? ? PRIMEM["Greenwich",0,
>> ? ? ? ? AUTHORITY["EPSG","8901"]],
>> ? ? UNIT["degree",0.01745329251994328,
>> ? ? ? ? AUTHORITY["EPSG","9122"]],
>> ? ? AUTHORITY["EPSG","4326"]]
>> Origin = (-180.000000000000000,90.000000000000000)
>> Pixel Size = (0.087890625000000,-0.043945312500000)
>> Image Structure Metadata:
>> ? INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left ?(-180.0000000, ?90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
>> Lower Left ?(-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
>> Upper Right ( 180.0000000, ?90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
>> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
>> Center ? ? ?( ? 0.0000000, ? 0.0000000) ( ?0d 0'0.01"E, ?0d 0'0.01"N)
>> Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
>> ? Mask Flags: PER_DATASET ALPHA
>> Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
>> ? Mask Flags: PER_DATASET ALPHA
>> Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
>> ? Mask Flags: PER_DATASET ALPHA
>> Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha
>>
>>
>>
>
>



-- 
This communication is privileged and may contain confidential
information. ?It's intended only for the use of the person or entity
named above. If you are not the intended recipient, do not distribute
or copy this communication. If you have received this communication in
error, please notify the sender immediately and return the original to
the email address above. ? Copyright 2011 Weather Trends
International, Inc.
From jluis at ualg.pt  Thu Apr 14 09:06:06 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 14 09:06:23 2011
Subject: [gdal-dev] Dateline gap
In-Reply-To: <BANLkTim=v5Kamo04+MQ7cSVi1O2W3zRp1A@mail.gmail.com>
References: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>	<4DA4ED39.2070202@ualg.pt>
	<BANLkTim=v5Kamo04+MQ7cSVi1O2W3zRp1A@mail.gmail.com>
Message-ID: <4DA6F13E.4020400@ualg.pt>

Jerl,

I suggested the ps2raster way because it's one that I know well (I'm 
supposed to) but probably there is also a GDAL solution (that I don't 
know). Since ps2raster is a GMT program I suggest that you make this 
questions in the GMT list. However, since I kind of start this I'll give 
some further infos here.
Regarding the error message you got the explanation is simple. ps2raster 
takes a POSTSCRIPT file and converts it into other formats using 
ghoscript. If the ps file was created by GMT, it will detect the 
projection information stored as PS comments and use it to create a kml 
file (or geotiff btw). That means in principle ANY figure created with 
GMT and using plain geographical coordinates can be converted to KML. 
But you used ps2raster directly with the netcdf file, which is not 
possible at all. Finally, the netcdf file is a bit strange too. What are 
the coordinates?
0 512
0 512
doesn't sound like real coordinates.

Joaquim

> Hello:
>
> I'm having a hard time getting anything to work with the files I have.
>   Maybe the files need to be changed or translated?  Joaquim mentioned
> they need to be in geogs but I'm not sure how to go about checking for
> that or converting to that if need be.  I've included output from one
> of the tests I ran.  It works the same way with all my files no matter
> what the data inside is.  One thing I thought was strange was that I
> used the -A option, and in the error message it tells me to use the -A
> options.
>
> Command:
> ps2raster -A -D./tests -E720 -TG -V -W+k testNETCDF.nc
>
> Output:
> ps2raster: Processing testNETCDF.nc: Find HiResBoundingBox Error:
> /undefined in CDF
> Operand stack:
>
> Execution stack:
>     %interp_exit   .runexec2   --nostringval--   --nostringval--
> --nostringval--   2   %stopped_push   --nostringval--
> --nostringval--   --nostringval--   false   1   %stopped_push   1878
> 1   3   %oparray_pop   1877   1   3   %oparray_pop   1861   1   3
> %oparray_pop   1755   1   3   %oparray_pop   --nostringval--
> %errorexec_pop   .runexec2   --nostringval--   --nostringval--
> --nostringval--   2   %stopped_push   --nostringval--
> Dictionary stack:
>     --dict:1151/1684(ro)(G)--   --dict:0/20(G)--   --dict:70/200(L)--
> Current allocation mode is local
> Current file position is 5
> ps2raster: GMT FATAL ERROR: The file testNETCDF.nc has no BoundingBox
> in the first 20 lines or last 256 bytes. Use -A option.
>
>
> gdalinfo for netcdf:
> Driver: netCDF/Network Common Data Format
> Files: testNETCDF.nc
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>    NC_GLOBAL#Conventions=COARDS
>    NC_GLOBAL#calendar=standard
>    NC_GLOBAL#comments=File
>    NC_GLOBAL#model=geos/das
>    NC_GLOBAL#center=gsfc
> Subdatasets:
>    SUBDATASET_1_NAME=NETCDF:"testNETCDF.nc":max_temp
>    SUBDATASET_1_DESC=[15x601x1201] max_temp (32-bit floating-point)
>    SUBDATASET_2_NAME=NETCDF:"testNETCDF.nc":min_temp
>    SUBDATASET_2_DESC=[15x601x1201] min_temp (32-bit floating-point)
>    SUBDATASET_3_NAME=NETCDF:"testNETCDF.nc":prcp
>    SUBDATASET_3_DESC=[15x601x1201] prcp (32-bit floating-point)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
> Thank you,
>
> Jerl
>
> On Tue, Apr 12, 2011 at 7:24 PM, Joaquim Luis<jluis@ualg.pt>  wrote:
>> Jerl,
>>
>> I would do that with GMT. By using ps2raster you can convert any GMT figure
>> (in geogs of course) into KML, and GMT has excellent care of date line
>> transition issues.
>>
>> Joaquim
>>
>>> Hello:
>>>
>>> I stopped by the #gdal channel on IRC to ask this question.  Thank you
>>> for the help provided there.  I thought it might be better if I asked
>>> a question here so I can better explain what's going on in one spot
>>> and not flood the channel.
>>> I understand this is a pixel center vs pixel edge issue.
>>>
>>> My ultimate goal is to get from a netCDF file to a google map overlay
>>> contour.
>>> The general steps I've taken, which work all the way up to about
>>> 178.29 then it just cuts off.
>>>
>>> netCDF ->    color-relief PNG using "gdaldem color-relief ...  "
>>> PNG ->    Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
>>> 4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
>>> tried this with just "-180 90 180 -90"
>>> PNG ->    tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
>>> the Geocoded PNG
>>> I guess first question, is my methodology sound?  Maybe there's a
>>> better way/tool to approach the problem.
>>>
>>> Following is the output from gdalinfo, other than that, what
>>> information might I be able to provide that could help?
>>>
>>> Thank you,
>>>
>>> Jerl
>>>
>>> gdalinfo for the source netcdf: (My apologies, I'm not certain what is
>>> relevant so I'm including most everything.)
>>>
>>> Driver: netCDF/Network Common Data Format
>>> Files: test.nc
>>> Size is 721, 361
>>> Coordinate System is `'
>>> Origin = (-180.250000000000000,90.250000000000000)
>>> Pixel Size = (0.500000000000000,-0.500000000000000)
>>> Metadata:
>>>    NC_GLOBAL#Conventions=CF-1.0
>>>    NC_GLOBAL#cdm_data_type=GRID
>>>    NC_GLOBAL#file_format=GEMPAK
>>>    NC_GLOBAL#location=test.grd
>>>    NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
>>>    NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
>>>    UVIN_NONE#long_name=testdata
>>>    UVIN_NONE#units=
>>>    UVIN_NONE#missing_value=-9.999000e+03
>>>    UVIN_NONE#VectorComponentFlag=gridRelative
>>>    time#long_name=forecast time
>>>    time#units=minute since 2011-04-12T00:00:00Z
>>>    time#_CoordinateAxisType=Time
>>>    lat#units=degrees_north
>>>    lat#long_name=latitude coordinate
>>>    lat#standard_name=latitude
>>>    lat#grid_spacing=0.5 degrees_north
>>>    lat#_CoordinateAxisType=Lat
>>>    lon#units=degrees_east
>>>    lon#long_name=longitude coordinate
>>>    lon#standard_name=longitude
>>>    lon#grid_spacing=0.5 degrees_east
>>>    lon#_CoordinateAxisType=Lon
>>> Corner Coordinates:
>>> Upper Left  (-180.2500000,  90.2500000)
>>> Lower Left  (-180.2500000, -90.2500000)
>>> Upper Right ( 180.2500000,  90.2500000)
>>> Lower Right ( 180.2500000, -90.2500000)
>>> Center      (   0.0000000,   0.0000000)
>>>
>>> gdalinfo of geocoded PNG:
>>>
>>> Driver: PNG/Portable Network Graphics
>>> Files: testWorld.png
>>>         testWorld.png.aux.xml
>>> Size is 4096, 4096
>>> Coordinate System is:
>>> GEOGCS["WGS 84",
>>>      DATUM["WGS_1984",
>>>          SPHEROID["WGS 84",6378137,298.257223563,
>>>              AUTHORITY["EPSG","7030"]],
>>>          AUTHORITY["EPSG","6326"]],
>>>      PRIMEM["Greenwich",0,
>>>          AUTHORITY["EPSG","8901"]],
>>>      UNIT["degree",0.01745329251994328,
>>>          AUTHORITY["EPSG","9122"]],
>>>      AUTHORITY["EPSG","4326"]]
>>> Origin = (-180.000000000000000,90.000000000000000)
>>> Pixel Size = (0.087890625000000,-0.043945312500000)
>>> Image Structure Metadata:
>>>    INTERLEAVE=PIXEL
>>> Corner Coordinates:
>>> Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
>>> Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
>>> Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
>>> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
>>> Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
>>> Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
>>>    Mask Flags: PER_DATASET ALPHA
>>> Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
>>>    Mask Flags: PER_DATASET ALPHA
>>> Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
>>>    Mask Flags: PER_DATASET ALPHA
>>> Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha
>>>
>>>
>>>
>>
>
>

From jsimpson at wxtrends.com  Thu Apr 14 09:18:30 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Apr 14 09:18:34 2011
Subject: [gdal-dev] Dateline gap
In-Reply-To: <4DA6F13E.4020400@ualg.pt>
References: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
	<4DA4ED39.2070202@ualg.pt>
	<BANLkTim=v5Kamo04+MQ7cSVi1O2W3zRp1A@mail.gmail.com>
	<4DA6F13E.4020400@ualg.pt>
Message-ID: <BANLkTi=1XdDWNuPBXj4cRQ2J36_tgNX1Pw@mail.gmail.com>

Joaquim:

Ok that makes more sense now.  You answered some of the questions I
was having, like how can ps2raster do anything with a necdf anyway?

I just used the info for that one test file, because the contents were
shorted.

It happens with others as well like this one that has these coordinates:
Corner Coordinates:
Upper Left  (-180.2500000,  90.2500000)
Lower Left  (-180.2500000, -90.2500000)
Upper Right ( 180.2500000,  90.2500000)
Lower Right ( 180.2500000, -90.2500000)
Center      (   0.0000000,   0.0000000)

I'll post questions on the GMT list as well.

Thanks

Jerl

On Thu, Apr 14, 2011 at 8:06 AM, Joaquim Luis <jluis@ualg.pt> wrote:
> Jerl,
>
> I suggested the ps2raster way because it's one that I know well (I'm
> supposed to) but probably there is also a GDAL solution (that I don't know).
> Since ps2raster is a GMT program I suggest that you make this questions in
> the GMT list. However, since I kind of start this I'll give some further
> infos here.
> Regarding the error message you got the explanation is simple. ps2raster
> takes a POSTSCRIPT file and converts it into other formats using ghoscript.
> If the ps file was created by GMT, it will detect the projection information
> stored as PS comments and use it to create a kml file (or geotiff btw). That
> means in principle ANY figure created with GMT and using plain geographical
> coordinates can be converted to KML. But you used ps2raster directly with
> the netcdf file, which is not possible at all. Finally, the netcdf file is a
> bit strange too. What are the coordinates?
> 0 512
> 0 512
> doesn't sound like real coordinates.
>
> Joaquim
>
>> Hello:
>>
>> I'm having a hard time getting anything to work with the files I have.
>> ?Maybe the files need to be changed or translated? ?Joaquim mentioned
>> they need to be in geogs but I'm not sure how to go about checking for
>> that or converting to that if need be. ?I've included output from one
>> of the tests I ran. ?It works the same way with all my files no matter
>> what the data inside is. ?One thing I thought was strange was that I
>> used the -A option, and in the error message it tells me to use the -A
>> options.
>>
>> Command:
>> ps2raster -A -D./tests -E720 -TG -V -W+k testNETCDF.nc
>>
>> Output:
>> ps2raster: Processing testNETCDF.nc: Find HiResBoundingBox Error:
>> /undefined in CDF
>> Operand stack:
>>
>> Execution stack:
>> ? ?%interp_exit ? .runexec2 ? --nostringval-- ? --nostringval--
>> --nostringval-- ? 2 ? %stopped_push ? --nostringval--
>> --nostringval-- ? --nostringval-- ? false ? 1 ? %stopped_push ? 1878
>> 1 ? 3 ? %oparray_pop ? 1877 ? 1 ? 3 ? %oparray_pop ? 1861 ? 1 ? 3
>> %oparray_pop ? 1755 ? 1 ? 3 ? %oparray_pop ? --nostringval--
>> %errorexec_pop ? .runexec2 ? --nostringval-- ? --nostringval--
>> --nostringval-- ? 2 ? %stopped_push ? --nostringval--
>> Dictionary stack:
>> ? ?--dict:1151/1684(ro)(G)-- ? --dict:0/20(G)-- ? --dict:70/200(L)--
>> Current allocation mode is local
>> Current file position is 5
>> ps2raster: GMT FATAL ERROR: The file testNETCDF.nc has no BoundingBox
>> in the first 20 lines or last 256 bytes. Use -A option.
>>
>>
>> gdalinfo for netcdf:
>> Driver: netCDF/Network Common Data Format
>> Files: testNETCDF.nc
>> Size is 512, 512
>> Coordinate System is `'
>> Metadata:
>> ? NC_GLOBAL#Conventions=COARDS
>> ? NC_GLOBAL#calendar=standard
>> ? NC_GLOBAL#comments=File
>> ? NC_GLOBAL#model=geos/das
>> ? NC_GLOBAL#center=gsfc
>> Subdatasets:
>> ? SUBDATASET_1_NAME=NETCDF:"testNETCDF.nc":max_temp
>> ? SUBDATASET_1_DESC=[15x601x1201] max_temp (32-bit floating-point)
>> ? SUBDATASET_2_NAME=NETCDF:"testNETCDF.nc":min_temp
>> ? SUBDATASET_2_DESC=[15x601x1201] min_temp (32-bit floating-point)
>> ? SUBDATASET_3_NAME=NETCDF:"testNETCDF.nc":prcp
>> ? SUBDATASET_3_DESC=[15x601x1201] prcp (32-bit floating-point)
>> Corner Coordinates:
>> Upper Left ?( ? ?0.0, ? ?0.0)
>> Lower Left ?( ? ?0.0, ?512.0)
>> Upper Right ( ?512.0, ? ?0.0)
>> Lower Right ( ?512.0, ?512.0)
>> Center ? ? ?( ?256.0, ?256.0)
>>
>> Thank you,
>>
>> Jerl
>>
>> On Tue, Apr 12, 2011 at 7:24 PM, Joaquim Luis<jluis@ualg.pt> ?wrote:
>>>
>>> Jerl,
>>>
>>> I would do that with GMT. By using ps2raster you can convert any GMT
>>> figure
>>> (in geogs of course) into KML, and GMT has excellent care of date line
>>> transition issues.
>>>
>>> Joaquim
>>>
>>>> Hello:
>>>>
>>>> I stopped by the #gdal channel on IRC to ask this question. ?Thank you
>>>> for the help provided there. ?I thought it might be better if I asked
>>>> a question here so I can better explain what's going on in one spot
>>>> and not flood the channel.
>>>> I understand this is a pixel center vs pixel edge issue.
>>>>
>>>> My ultimate goal is to get from a netCDF file to a google map overlay
>>>> contour.
>>>> The general steps I've taken, which work all the way up to about
>>>> 178.29 then it just cuts off.
>>>>
>>>> netCDF -> ? ?color-relief PNG using "gdaldem color-relief ... ?"
>>>> PNG -> ? ?Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
>>>> 4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
>>>> tried this with just "-180 90 180 -90"
>>>> PNG -> ? ?tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
>>>> the Geocoded PNG
>>>> I guess first question, is my methodology sound? ?Maybe there's a
>>>> better way/tool to approach the problem.
>>>>
>>>> Following is the output from gdalinfo, other than that, what
>>>> information might I be able to provide that could help?
>>>>
>>>> Thank you,
>>>>
>>>> Jerl
>>>>
>>>> gdalinfo for the source netcdf: (My apologies, I'm not certain what is
>>>> relevant so I'm including most everything.)
>>>>
>>>> Driver: netCDF/Network Common Data Format
>>>> Files: test.nc
>>>> Size is 721, 361
>>>> Coordinate System is `'
>>>> Origin = (-180.250000000000000,90.250000000000000)
>>>> Pixel Size = (0.500000000000000,-0.500000000000000)
>>>> Metadata:
>>>> ? NC_GLOBAL#Conventions=CF-1.0
>>>> ? NC_GLOBAL#cdm_data_type=GRID
>>>> ? NC_GLOBAL#file_format=GEMPAK
>>>> ? NC_GLOBAL#location=test.grd
>>>> ? NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
>>>> ? NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
>>>> ? UVIN_NONE#long_name=testdata
>>>> ? UVIN_NONE#units=
>>>> ? UVIN_NONE#missing_value=-9.999000e+03
>>>> ? UVIN_NONE#VectorComponentFlag=gridRelative
>>>> ? time#long_name=forecast time
>>>> ? time#units=minute since 2011-04-12T00:00:00Z
>>>> ? time#_CoordinateAxisType=Time
>>>> ? lat#units=degrees_north
>>>> ? lat#long_name=latitude coordinate
>>>> ? lat#standard_name=latitude
>>>> ? lat#grid_spacing=0.5 degrees_north
>>>> ? lat#_CoordinateAxisType=Lat
>>>> ? lon#units=degrees_east
>>>> ? lon#long_name=longitude coordinate
>>>> ? lon#standard_name=longitude
>>>> ? lon#grid_spacing=0.5 degrees_east
>>>> ? lon#_CoordinateAxisType=Lon
>>>> Corner Coordinates:
>>>> Upper Left ?(-180.2500000, ?90.2500000)
>>>> Lower Left ?(-180.2500000, -90.2500000)
>>>> Upper Right ( 180.2500000, ?90.2500000)
>>>> Lower Right ( 180.2500000, -90.2500000)
>>>> Center ? ? ?( ? 0.0000000, ? 0.0000000)
>>>>
>>>> gdalinfo of geocoded PNG:
>>>>
>>>> Driver: PNG/Portable Network Graphics
>>>> Files: testWorld.png
>>>> ? ? ? ?testWorld.png.aux.xml
>>>> Size is 4096, 4096
>>>> Coordinate System is:
>>>> GEOGCS["WGS 84",
>>>> ? ? DATUM["WGS_1984",
>>>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>>>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>>>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>>>> ? ? PRIMEM["Greenwich",0,
>>>> ? ? ? ? AUTHORITY["EPSG","8901"]],
>>>> ? ? UNIT["degree",0.01745329251994328,
>>>> ? ? ? ? AUTHORITY["EPSG","9122"]],
>>>> ? ? AUTHORITY["EPSG","4326"]]
>>>> Origin = (-180.000000000000000,90.000000000000000)
>>>> Pixel Size = (0.087890625000000,-0.043945312500000)
>>>> Image Structure Metadata:
>>>> ? INTERLEAVE=PIXEL
>>>> Corner Coordinates:
>>>> Upper Left ?(-180.0000000, ?90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
>>>> Lower Left ?(-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
>>>> Upper Right ( 180.0000000, ?90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
>>>> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
>>>> Center ? ? ?( ? 0.0000000, ? 0.0000000) ( ?0d 0'0.01"E, ?0d 0'0.01"N)
>>>> Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
>>>> ? Mask Flags: PER_DATASET ALPHA
>>>> Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
>>>> ? Mask Flags: PER_DATASET ALPHA
>>>> Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
>>>> ? Mask Flags: PER_DATASET ALPHA
>>>> Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha
>>>>
>>>>
>>>>
>>>
>>
>>
>
>



-- 
This communication is privileged and may contain confidential
information. ?It's intended only for the use of the person or entity
named above. If you are not the intended recipient, do not distribute
or copy this communication. If you have received this communication in
error, please notify the sender immediately and return the original to
the email address above. ? Copyright 2011 Weather Trends
International, Inc.
From warmerdam at pobox.com  Thu Apr 14 09:38:31 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 14 09:38:35 2011
Subject: [gdal-dev] Abstracts for FOSS4G 2011 are due tomorrow
Message-ID: <4DA6F8D7.8050500@pobox.com>

Folks,

FOSS4G 2011 presentation abstracts are due by tomorrow, April 15th.
If you are thinking of attending FOSS4G 2011 in Denver and have
something related to free geospatial software that you would like
to present (30 minute slots including questions) then write up an
abstract and submit it promptly.

  http://2011.foss4g.org/abstracts/

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jsimpson at wxtrends.com  Thu Apr 14 09:41:01 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Apr 14 09:41:04 2011
Subject: [gdal-dev] Re: Dateline gap
In-Reply-To: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
References: <BANLkTik7XTM3c7zOWyuMXPbMr_jLxqD5Kw@mail.gmail.com>
Message-ID: <BANLkTi=A9t-1C_+rn-E_rXsRYdYQbar_Zw@mail.gmail.com>

Does anyone on the GDAL team have any suggestions on how to do this?


Thank you,

Jerl


On Tue, Apr 12, 2011 at 2:59 PM, Jerl Simpson <jsimpson@wxtrends.com> wrote:
> Hello:
>
> I stopped by the #gdal channel on IRC to ask this question. ?Thank you
> for the help provided there. ?I thought it might be better if I asked
> a question here so I can better explain what's going on in one spot
> and not flood the channel.
> I understand this is a pixel center vs pixel edge issue.
>
> My ultimate goal is to get from a netCDF file to a google map overlay contour.
> The general steps I've taken, which work all the way up to about
> 178.29 then it just cuts off.
>
> netCDF -> color-relief PNG using "gdaldem color-relief ... ?"
> PNG -> Geocoded PNG using "gdal_translate -a_srs EPSG:4326 -outsize
> 4096 4096 -a_ullr -180.25 90.25 180.25 -90.25" on the PNG (Have also
> tried this with just "-180 90 180 -90"
> PNG -> tiles using "gdal2tiles.py -s EPSG:4326 -z 0 -n -w google" on
> the Geocoded PNG
> I guess first question, is my methodology sound? ?Maybe there's a
> better way/tool to approach the problem.
>
> Following is the output from gdalinfo, other than that, what
> information might I be able to provide that could help?
>
> Thank you,
>
> Jerl
>
> gdalinfo for the source netcdf: (My apologies, I'm not certain what is
> relevant so I'm including most everything.)
>
> Driver: netCDF/Network Common Data Format
> Files: test.nc
> Size is 721, 361
> Coordinate System is `'
> Origin = (-180.250000000000000,90.250000000000000)
> Pixel Size = (0.500000000000000,-0.500000000000000)
> Metadata:
> ?NC_GLOBAL#Conventions=CF-1.0
> ?NC_GLOBAL#cdm_data_type=GRID
> ?NC_GLOBAL#file_format=GEMPAK
> ?NC_GLOBAL#location=test.grd
> ?NC_GLOBAL#history=Direct read of GEMPAK into NetCDF-Java 4.0 API
> ?NC_GLOBAL#_CoordinateModelRunDate=2011-04-12T00:00:00Z
> ?UVIN_NONE#long_name=testdata
> ?UVIN_NONE#units=
> ?UVIN_NONE#missing_value=-9.999000e+03
> ?UVIN_NONE#VectorComponentFlag=gridRelative
> ?time#long_name=forecast time
> ?time#units=minute since 2011-04-12T00:00:00Z
> ?time#_CoordinateAxisType=Time
> ?lat#units=degrees_north
> ?lat#long_name=latitude coordinate
> ?lat#standard_name=latitude
> ?lat#grid_spacing=0.5 degrees_north
> ?lat#_CoordinateAxisType=Lat
> ?lon#units=degrees_east
> ?lon#long_name=longitude coordinate
> ?lon#standard_name=longitude
> ?lon#grid_spacing=0.5 degrees_east
> ?lon#_CoordinateAxisType=Lon
> Corner Coordinates:
> Upper Left ?(-180.2500000, ?90.2500000)
> Lower Left ?(-180.2500000, -90.2500000)
> Upper Right ( 180.2500000, ?90.2500000)
> Lower Right ( 180.2500000, -90.2500000)
> Center ? ? ?( ? 0.0000000, ? 0.0000000)
>
> gdalinfo of geocoded PNG:
>
> Driver: PNG/Portable Network Graphics
> Files: testWorld.png
> ? ? ? testWorld.png.aux.xml
> Size is 4096, 4096
> Coordinate System is:
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?AUTHORITY["EPSG","6326"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.01745329251994328,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000000000000,90.000000000000000)
> Pixel Size = (0.087890625000000,-0.043945312500000)
> Image Structure Metadata:
> ?INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left ?(-180.0000000, ?90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
> Lower Left ?(-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
> Upper Right ( 180.0000000, ?90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
> Center ? ? ?( ? 0.0000000, ? 0.0000000) ( ?0d 0'0.01"E, ?0d 0'0.01"N)
> Band 1 Block=4096x1 Type=Byte, ColorInterp=Red
> ?Mask Flags: PER_DATASET ALPHA
> Band 2 Block=4096x1 Type=Byte, ColorInterp=Green
> ?Mask Flags: PER_DATASET ALPHA
> Band 3 Block=4096x1 Type=Byte, ColorInterp=Blue
> ?Mask Flags: PER_DATASET ALPHA
> Band 4 Block=4096x1 Type=Byte, ColorInterp=Alpha
>
>
>
> --
> This communication is privileged and may contain confidential
> information. ?It's intended only for the use of the person or entity
> named above. If you are not the intended recipient, do not distribute
> or copy this communication. If you have received this communication in
> error, please notify the sender immediately and return the original to
> the email address above. ? Copyright 2011 Weather Trends
> International, Inc.
>



-- 
This communication is privileged and may contain confidential
information. ?It's intended only for the use of the person or entity
named above. If you are not the intended recipient, do not distribute
or copy this communication. If you have received this communication in
error, please notify the sender immediately and return the original to
the email address above. ? Copyright 2011 Weather Trends
International, Inc.
From jukka.rahkonen at mmmtike.fi  Thu Apr 14 09:46:48 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Apr 14 09:47:06 2011
Subject: [gdal-dev] Re: Cleaning up the tilefilename generation in
	gdal2tiles.py
References: <4DA5F9A6.6090509@gmx.com>
Message-ID: <loom.20110414T153944-762@post.gmane.org>

Martin Kr?ger <martin.krueger <at> gmx.com> writes:

> 
> Hello
> I was in need to generate tiles from a geotiff to publish the image as a
> tms-service. So i was happy to find the gdal2tiles.py script which does
> the job.
> 
> The only issue i stumbled over:
> gdal2tiles.py generates the tiles in the google format(0,0=top-left) , i
> need the tms format(0,0=bottom-left).

Are you sure about that? I do believe that gdal2tiles.py and MapTiler program
based on gdal2tiles are particularly generating TMS tiles.

-Jukka Rahkonen-




From EAdam at co.lincoln.or.us  Thu Apr 14 10:50:16 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Apr 14 10:50:43 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <201104122047.20004.even.rouault@mines-paris.org>
References: <C9CA1412.221FF%michael.smith@usace.army.mil>
	<201104122047.20004.even.rouault@mines-paris.org>
Message-ID: <4DA6A736.4F75.00CE.0@co.lincoln.or.us>

I tried compiling the FileGDB OGR driver on ubuntu 8.04 and got a few
errors.  On the first step I got:

eadam@lgis0229ubuntu:/usr/local/src/gdal$ g++ -Wall -g
ogr/ogrsf_frmts/filegdb/*.c* -shared -o ogr_filegdb.so -Iport -Igcore
-Iogr -Iogr/ogrsf_frmts -Iogr/ogrsf_frmts/filegdb -L. -lgdal
-I/home/eadam/filegdb/dist/include -L/home/eadam/filegdb/dist/lib 
-I/home/eadam/filegdb/dist/src/FileGDBEngine/include/FileGDBLinux
-lFileGDBAPI
In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
                 from ogr/ogrsf_frmts/filegdb/FGdbDatasource.cpp:29:
/home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
#pragma warning 
In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
                 from ogr/ogrsf_frmts/filegdb/FGdbDriver.cpp:29:
/home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
#pragma warning 
In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
                 from ogr/ogrsf_frmts/filegdb/FGdbLayer.cpp:29:
/home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
#pragma warning 
In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
                 from ogr/ogrsf_frmts/filegdb/FGdbUtils.h:33,
                 from ogr/ogrsf_frmts/filegdb/FGdbUtils.cpp:29:
/home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
#pragma warning 
/home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
#pragma warning 

Then I added to ~.bashrc:
GDAL_DRIVER_PATH=/usr/local/src/gdal
export GDAL_DRIVER_PATH

then: 
eadam@lgis0229ubuntu:/usr/local/src/gdal$ ogrinfo --formats
ERROR 1: libFileGDBAPI.so: cannot open shared object file: No such file
or directory
ERROR 1: libFileGDBAPI.so: cannot open shared object file: No such file
or directory
Supported Formats:
 -> "ESRI Shapefile" (read/write)
  -> "MapInfo File" (read/write)
  -> "UK .NTF" (readonly)
  -> "SDTS" (readonly)
  -> "TIGER" (read/write)
...
...

Any suggestions?  I've been tracking trunk of gdal for about a year,
although always in a simple fashion (no plugins etc).  I would not
necessarily catch something basic.

Best Regards, Eli


>>> On 4/12/2011 at 11:47 AM, in message
<201104122047.20004.even.rouault@mines-paris.org>, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mardi 12 avril 2011 20:37:06, Smith, Michael ERDC-CRREL-NH a ?crit
:
>> Even,
>> 
>> How do you configure gdal/ogr to build with the linux api?
> 
> This is a bit involved since there's no ./configure support yet, so I

> compile 
> it "at hand" as a plugin
> 
> Here's the line I use from GDAL root source directory :
> 
> g++ -Wall -g ogr/ogrsf_frmts/filegdb/*.c* -shared -o ogr_filegdb.so
-Iport -
> Igcore -Iogr -Iogr/ogrsf_frmts -Iogr/ogrsf_frmts/filegdb -L. -lgdal
-
> I/home/even/filegdb/dist/include -L/home/even/filegdb/dist/lib  -
> I/home/even/filegdb/dist/src/FileGDBEngine/include/FileGDBLinux
-lFileGDBAPI
> 
> You must change the /home/even/filegdb/ paths to where you uncompress
the 
> filegdb API
> 
> And you must define the GDAL_DRIVER_PATH environmenet variable to
point to 
> the 
> path where ogr_filegdb.so is
> 
>> 
>> I'm working on getting some example datasets together.
>> 
>> Mike
>> 
>> > Le mardi 12 avril 2011 19:08:24, Hermann Peifer a ?crit :
>> >> On 04/04/2011 05:05, Ragi Burhum wrote:
>> >>> Hello list,
>> >>> 
>> >>> I am trying to test a new version of the FileGDB driver for OGR,
but I
>> >>> lack enough FileGDBs to test :)
>> >> 
>> >> Is the lack of FileGDBs still an issue? At work, we have several
>> >> hundreds of them and I could check if I can make some available.
>> > 
>> > ArcGIS 10 FileGDB's right ?
>> > 
>> > Yes "real" data would be usefull. But it would also be usefull if
you (or
>> > anyone else) could provide small and freely redistribuable
>> > samples (potentially "fake" data) with different types of
>> > geometries (1 feature for each geometry type is enough in theory),
column
>> > types (integer, single, double, string, date), etc.. so that it
can be
>> > included in the GDAL/OGR autotest suite.
>> > 
>> >>> If you have an *ArcGIS 10* FileGDB and would like to test the
FileGDB
>> >>> driver (and report back), feel free to grab a gdal-trunk binary
I made
>> >>> for Windows.
>> >> 
>> >> A related question: will there ever be a FileGDB driver for a
>> >> non-Windows OS? Is this feasible at all?
>> > 
>> > Current GDAL trunk builds against FileGDB API beta3 under Linux
32bit.
>> > Too bad ESRI doesn't provide any 64bit build of the FileGDB API
(yet...
>> > ?)
>> > 
>> >> Hermann
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org 
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>> > 
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org 
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
From EAdam at co.lincoln.or.us  Thu Apr 14 11:02:36 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Apr 14 11:03:31 2011
Subject: [gdal-dev] gdaladdo creates very large files in 1.8 but not trunk
References: <4D9DD8B5020000CE00043EF3@mail.co.lincoln.or.us>
	<4D9DE018020000CE00043EFC@mail.co.lincoln.or.us>
	<4D9DEED6020000CE00043F2C@mail.co.lincoln.or.us>
	<4D9DF848020000CE00043F3B@mail.co.lincoln.or.us>
	<4DA46479020000CE00044220@mail.co.lincoln.or.us>
	<4DA56425020000CE000442A4@mail.co.lincoln.or.us>
	<4DA6AA1C020000CE000443C4@mail.co.lincoln.or.us>
Message-ID: <4DA6AA1A.4F75.00CE.0@co.lincoln.or.us>

This is an informational report only, there are not problems in trunk.  

Using 1.8.0 from OSGeo4W on XP, I made a mosaic of about 1200 uncompressed tifs totally 80G.  

gdalbuildvrt mosaic.vrt *.tif

Then gdal_translated that to a compressed tif of about 8G

gdal_translate mosaic.vrt mosaic_ycbcr_big.tif -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR -co TILED=YES -co BIGTIFF=YES --config GDAL_CACHEMAX 800

Last step was to add some overviews:

gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config BIGTIFF_OVERVIEW YES --config GDAL_CACHEMAX 800 -r average -ro mosaic_ycbcr_big.tif 2 4 8 16 32 64 128

It works (at least in OpenEV it displays quickly like it is using overviews), except the file sizes for the overviews seem odd and too large.    

The tiles are about 80G, the result of gdal_translate is 8G, the result of gdaladdo, mosaic_ycbcr_big.tif.ovr,  is 375G!  That was using 1.8.0.

I tested on trunk on ubuntu and XP from here, http://vbkto.dyndns.org/sdk/ which produce reasonable results.  The ovr is about 3G.  

A dif of gdalinfo on the .tif and .ovr are the same.

(I hope that is not the result of a typo when I initially typed the command.  I unfortunately don't have the shell around any more but took the above listed commands from some notes I took.)

I have tried making the overviews internal and external with similar results.  I also tried making the overviews on the uncompressed files (the vrt) with the same results.  Then I made the overviews 1 level at a time and those results seemed reasonable.  

I didn't find any tickets about this in trac, but don't experience this in trunk so apparently it is fixed.  Just reporting in case it is useful.  

Do you want any other information?  

Thanks, Eli




From even.rouault at mines-paris.org  Thu Apr 14 13:11:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 14 13:11:45 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <4DA6A736.4F75.00CE.0@co.lincoln.or.us>
References: <C9CA1412.221FF%michael.smith@usace.army.mil>
	<201104122047.20004.even.rouault@mines-paris.org>
	<4DA6A736.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <201104141911.34121.even.rouault@mines-paris.org>

Le jeudi 14 avril 2011 16:50:16, Eli Adam a ?crit :
> I tried compiling the FileGDB OGR driver on ubuntu 8.04 and got a few
> errors.  On the first step I got:
> 
> eadam@lgis0229ubuntu:/usr/local/src/gdal$ g++ -Wall -g
> ogr/ogrsf_frmts/filegdb/*.c* -shared -o ogr_filegdb.so -Iport -Igcore
> -Iogr -Iogr/ogrsf_frmts -Iogr/ogrsf_frmts/filegdb -L. -lgdal
> -I/home/eadam/filegdb/dist/include -L/home/eadam/filegdb/dist/lib
> -I/home/eadam/filegdb/dist/src/FileGDBEngine/include/FileGDBLinux
> -lFileGDBAPI
> In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
>                  from ogr/ogrsf_frmts/filegdb/FGdbDatasource.cpp:29:
> /home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
> #pragma warning
> In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
>                  from ogr/ogrsf_frmts/filegdb/FGdbDriver.cpp:29:
> /home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
> #pragma warning
> In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
>                  from ogr/ogrsf_frmts/filegdb/FGdbLayer.cpp:29:
> /home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
> #pragma warning
> In file included from ogr/ogrsf_frmts/filegdb/ogr_fgdb.h:51,
>                  from ogr/ogrsf_frmts/filegdb/FGdbUtils.h:33,
>                  from ogr/ogrsf_frmts/filegdb/FGdbUtils.cpp:29:
> /home/eadam/filegdb/dist/include/Geodatabase.h:237: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:238: warning: ignoring
> #pragma warning
> /home/eadam/filegdb/dist/include/Geodatabase.h:242: warning: ignoring
> #pragma warning

Just warnings due to a #pragma in filegdb headers. Although it is a bit 
annoying, nothing to worry about

> 
> Then I added to ~.bashrc:
> GDAL_DRIVER_PATH=/usr/local/src/gdal
> export GDAL_DRIVER_PATH
> 
> then:
> eadam@lgis0229ubuntu:/usr/local/src/gdal$ ogrinfo --formats
> ERROR 1: libFileGDBAPI.so: cannot open shared object file: No such file
> or directory
> ERROR 1: libFileGDBAPI.so: cannot open shared object file: No such file
> or directory
> Supported Formats:
>  -> "ESRI Shapefile" (read/write)
>   -> "MapInfo File" (read/write)
>   -> "UK .NTF" (readonly)
>   -> "SDTS" (readonly)
>   -> "TIGER" (read/write)
> ...

Just add /home/eadam/filegdb/dist/lib to your LD_LIBRARY_PATH

> ...
> 
> Any suggestions?  I've been tracking trunk of gdal for about a year,
> although always in a simple fashion (no plugins etc).  I would not
> necessarily catch something basic.

Yes I agree. At some point, it would be desirable for the driver to be 
integrated properly to the build system

> 
> Best Regards, Eli
> 

From EAdam at co.lincoln.or.us  Thu Apr 14 13:21:01 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Apr 14 13:21:30 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
References: <4DA6C84D020000CE00044402@mail.co.lincoln.or.us>
	<4DA6CA8D020000CE00044405@mail.co.lincoln.or.us>
Message-ID: <4DA6CA8C.4F75.00CE.0@co.lincoln.or.us>

I reviewed this a little further.  I was mistaken in my first report,
the field RDSRCDATE was created as DATE (as opposed to DateTime) and
populated with null.  

I had mistakenly checked and reported on the field CONST_DATE which is
created as an Integer and populated with null.  (I don't know if the
field is populated in the fgdb.)


eadam@lgis0229ubuntu:/usr/local/src/gdal$ ogrinfo --formats
ERROR 1: libFileGDBAPI.so: cannot open shared object file: No such
file
or directory
ERROR 1: libFileGDBAPI.so: cannot open shared object file: No such
file
or directory
Supported Formats:
 -> "ESRI Shapefile" (read/write)
  -> "MapInfo File" (read/write)
  -> "UK .NTF" (readonly)
  -> "SDTS" (readonly)
  -> "TIGER" (read/write)
...
...

Any suggestions?  I've been tracking trunk of gdal for about a year,
although always in a simple fashion (no plugins etc).  I would not
necessarily catch something basic.

Based on reading this two sites,
http://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-su
and
http://replay.waybackmachine.org/20090301081221/http://www.linux.org/docs/ldp/howto/Program-Library-HOWTO/shared-libraries.html

I fixed this by calling it this way,  
eadam@lgis0229ubuntu:~$ LD_LIBRARY_PATH=.:/home/eadam/filegdb/dist/lib
ogrinfo --formats

Now I get eadam@lgis0229ubuntu:~$
LD_LIBRARY_PATH=.:/home/eadam/filegdb/dist/lib ogr2ogr
ODF_Lincoln_Roads_v2.shp ~/Desktop/West_Oregon_Roads.gdb
"ODF_Lincoln_Roads"
Warning 6: Field RDSRCDATE create as date field, though DateTime
requested.

Warning 6: Normalized/laundered field name: 'CONSTRUCTED' to
'CONSTRUCTE'
Warning 6: Normalized/laundered field name: 'Shape_Length' to
'Shape_Leng'
ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
long:-2147217395
ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
long:-2147217395

RDSRCDATE has dates in it now.  So it looks like this was a DateTime
field and got successfully demoted to a date field.  

Thanks, Eli



>>> On 4/12/2011 at 11:47 AM, in message
<201104122047.20004.even.rouault@mines-paris.org>, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mardi 12 avril 2011 20:37:06, Smith, Michael ERDC-CRREL-NH a
?crit
:
>> Even,
>> 
>> How do you configure gdal/ogr to build with the linux api?
> 
> This is a bit involved since there's no ./configure support yet, so
I

> compile 
> it "at hand" as a plugin
> 
> Here's the line I use from GDAL root source directory :
> 
> g++ -Wall -g ogr/ogrsf_frmts/filegdb/*.c* -shared -o ogr_filegdb.so
-Iport -
> Igcore -Iogr -Iogr/ogrsf_frmts -Iogr/ogrsf_frmts/filegdb -L. -lgdal
-
> I/home/even/filegdb/dist/include -L/home/even/filegdb/dist/lib  -
> I/home/even/filegdb/dist/src/FileGDBEngine/include/FileGDBLinux
-lFileGDBAPI
> 
> You must change the /home/even/filegdb/ paths to where you
uncompress
the 
> filegdb API
> 
> And you must define the GDAL_DRIVER_PATH environmenet variable to
point to 
> the 
> path where ogr_filegdb.so is
> 
>> 
>> I'm working on getting some example datasets together.
>> 
>> Mike
>> 
>> > Le mardi 12 avril 2011 19:08:24, Hermann Peifer a ?crit :
>> >> On 04/04/2011 05:05, Ragi Burhum wrote:
>> >>> Hello list,
>> >>> 
>> >>> I am trying to test a new version of the FileGDB driver for
OGR,
but I
>> >>> lack enough FileGDBs to test :)
>> >> 
>> >> Is the lack of FileGDBs still an issue? At work, we have several
>> >> hundreds of them and I could check if I can make some available.
>> > 
>> > ArcGIS 10 FileGDB's right ?
>> > 
>> > Yes "real" data would be usefull. But it would also be usefull if
you (or
>> > anyone else) could provide small and freely redistribuable
>> > samples (potentially "fake" data) with different types of
>> > geometries (1 feature for each geometry type is enough in
theory),
column
>> > types (integer, single, double, string, date), etc.. so that it
can be
>> > included in the GDAL/OGR autotest suite.
>> > 
>> >>> If you have an *ArcGIS 10* FileGDB and would like to test the
FileGDB
>> >>> driver (and report back), feel free to grab a gdal-trunk binary
I made
>> >>> for Windows.
>> >> 
>> >> A related question: will there ever be a FileGDB driver for a
>> >> non-Windows OS? Is this feasible at all?
>> > 
>> > Current GDAL trunk builds against FileGDB API beta3 under Linux
32bit.
>> > Too bad ESRI doesn't provide any 64bit build of the FileGDB API
(yet...
>> > ?)
>> > 
>> >> Hermann
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org 
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>> > 
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org 
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Apr 14 13:46:32 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 14 13:46:43 2011
Subject: [gdal-dev] gdaladdo creates very large files in 1.8 but not trunk
In-Reply-To: <4DA6AA1A.4F75.00CE.0@co.lincoln.or.us>
References: <4D9DD8B5020000CE00043EF3@mail.co.lincoln.or.us>
	<4DA6AA1C020000CE000443C4@mail.co.lincoln.or.us>
	<4DA6AA1A.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <201104141946.32949.even.rouault@mines-paris.org>

Le jeudi 14 avril 2011 17:02:36, Eli Adam a ?crit :

I'm not aware of any recent change in the GTiff driver that could have "solved" 
the issue you've seen. This is a bit surprising.

Could you also try with the -stable builds (based on 1.8 branch) from 
http://vbkto.dyndns.org/sdk/ to compare ?

> This is an informational report only, there are not problems in trunk.
> 
> Using 1.8.0 from OSGeo4W on XP, I made a mosaic of about 1200 uncompressed
> tifs totally 80G.
> 
> gdalbuildvrt mosaic.vrt *.tif
> 
> Then gdal_translated that to a compressed tif of about 8G
> 
> gdal_translate mosaic.vrt mosaic_ycbcr_big.tif -co COMPRESS=JPEG -co
> PHOTOMETRIC=YCBCR -co TILED=YES -co BIGTIFF=YES --config GDAL_CACHEMAX 800
> 
> Last step was to add some overviews:
> 
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
> YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config BIGTIFF_OVERVIEW YES
> --config GDAL_CACHEMAX 800 -r average -ro mosaic_ycbcr_big.tif 2 4 8 16 32
> 64 128
> 
> It works (at least in OpenEV it displays quickly like it is using
> overviews), except the file sizes for the overviews seem odd and too
> large.
> 
> The tiles are about 80G, the result of gdal_translate is 8G, the result of
> gdaladdo, mosaic_ycbcr_big.tif.ovr,  is 375G!  That was using 1.8.0.
> 
> I tested on trunk on ubuntu and XP from here, http://vbkto.dyndns.org/sdk/
> which produce reasonable results.  The ovr is about 3G.
> 
> A dif of gdalinfo on the .tif and .ovr are the same.
> 
> (I hope that is not the result of a typo when I initially typed the
> command.  I unfortunately don't have the shell around any more but took
> the above listed commands from some notes I took.)
> 
> I have tried making the overviews internal and external with similar
> results.  I also tried making the overviews on the uncompressed files (the
> vrt) with the same results.  Then I made the overviews 1 level at a time
> and those results seemed reasonable.
> 
> I didn't find any tickets about this in trac, but don't experience this in
> trunk so apparently it is fixed.  Just reporting in case it is useful.
> 
> Do you want any other information?
> 
> Thanks, Eli
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Thu Apr 14 14:30:36 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Apr 14 14:30:52 2011
Subject: [gdal-dev] Re: gdaladdo creates very large files in 1.8 but not
	trunk
References: <4D9DD8B5020000CE00043EF3@mail.co.lincoln.or.us>
	<4D9DE018020000CE00043EFC@mail.co.lincoln.or.us>
	<4D9DEED6020000CE00043F2C@mail.co.lincoln.or.us>
	<4D9DF848020000CE00043F3B@mail.co.lincoln.or.us>
	<4DA46479020000CE00044220@mail.co.lincoln.or.us>
	<4DA56425020000CE000442A4@mail.co.lincoln.or.us>
	<4DA6AA1C020000CE000443C4@mail.co.lincoln.or.us>
	<4DA6AA1A.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <loom.20110414T202634-664@post.gmane.org>

Eli Adam <EAdam <at> co.lincoln.or.us> writes:


> 
> It works (at least in OpenEV it displays quickly like it is using overviews),
except the file sizes for the
> overviews seem odd and too large.    

Hi,

You can check which kind of overview file you really have with gdalinfo if you
first rename the .ovr file to something.tif. Gdalinfo then shows the compression
method used and sizes of overviews.  No need to do guessing with OpenEV.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Thu Apr 14 14:34:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 14 14:35:03 2011
Subject: [gdal-dev] Re: gdaladdo creates very large files in 1.8 but not
	trunk
In-Reply-To: <loom.20110414T202634-664@post.gmane.org>
References: <4D9DD8B5020000CE00043EF3@mail.co.lincoln.or.us>
	<4DA6AA1A.4F75.00CE.0@co.lincoln.or.us>
	<loom.20110414T202634-664@post.gmane.org>
Message-ID: <201104142034.54476.even.rouault@mines-paris.org>


> You can check which kind of overview file you really have with gdalinfo if
> you first rename the .ovr file to something.tif. Gdalinfo then shows the
> compression method used and sizes of overviews.  No need to do guessing
> with OpenEV.

You don't even need to rename the file. GDAL doesn't care about the extension 
to recognized TIFF files

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ragi at burhum.com  Thu Apr 14 15:42:10 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Thu Apr 14 15:42:12 2011
Subject: [gdal-dev] Re: FileGDB OGR driver test
In-Reply-To: <201104132116.00790.even.rouault@mines-paris.org>
References: <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>
	<4DA59069.4F75.00CE.0@co.lincoln.or.us>
	<201104132116.00790.even.rouault@mines-paris.org>
Message-ID: <BANLkTi=V-EtD5woAS5o1h0smWa-xDtKraA@mail.gmail.com>

Even,

The I have a feeling that the handling of blobs may be a little more
involved. The blobs in ESRI GeoDatabases are serialized COM SafeArrays that
contain the actual binary information. So in order to *really* access the
blob, one would have to strip the safearray portion out and expose the blob
for reads, and wrap it with safearrays for writes so that it plays nice with
the GDB. In all honesty, I am not sure, so I would have to write some tests
to verify this, that is why I punted it.

As far as the date fields go, filegdb uses date-time fields... thanks for
extending to make them work.

- Ragi

On Wed, Apr 13, 2011 at 12:16 PM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le mercredi 13 avril 2011 21:00:42, Eli Adam a ?crit :
> > Ragi,
> >
> >      I tested the driver on just one FileGDB which included a date
> > field.  You stated,
> >
> > Known issues with build / FileGDB driver
> > - (driver issue) blobs and date fields are not handled at all
>
> Yesterday, with the Michael Smith's test filegdb, I fixed the handling of
> date
> fields, so if you just update from SVN, it should work now.
>
> An example with blobs would be usefull
>
> >
> > Here is what I did and successfully got the data.  The date field was
> > made a double and populated with 0, however, since it says that date
> > fields are not handled, it is nice that the rest of the process still
> > worked on the other fields and the data was exported.
> >
> > ogr2ogr ODF_Lincoln_Roads.shp West_Oregon_Roads.gdb
> > "ODF_Lincoln_Roads"
> > Warning 6: Field RDSRCDATE create as date field, though DateTime
> > requested.
> >
> > Warning 6: Normalized/laundered field name: 'CONSTRUCTED' to
> > 'CONSTRUCTE'
> > Warning 6: Normalized/laundered field name: 'Shape_Length' to
> > 'Shape_Leng'
> > Warning 1: Row id: 4 col:10 has unhandled col type (11). Setting to
> > NULL.
> > ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
> > long:-2147217395
> > ERROR 1: GDB Error: Failed to determine value for column CONST_DATE
> > long:-2147217395
> >
> > Thanks for the work on this.
> >
> > Eli
> >
> > >>> On 4/13/2011 at 11:13 AM, in message
> >
> > <BANLkTimiTsqYJfixFRyS05JKEibyA+tf3A@mail.gmail.com>, Ragi Burhum
> >
> > <ragi@burhum.com> wrote:
> > > Perfect. Thank you Michael.
> > >
> > > - Ragi
> > >
> > >> Date: Tue, 12 Apr 2011 15:45:25 -0400
> > >> From: "Smith, Michael ERDC-CRREL-NH" <michael.smith@usace.army.mil>
> > >> Subject: Re: [gdal-dev] Re: FileGDB OGR driver test
> > >> To: Even Rouault <even.rouault@mines-paris.org>,
> > >>
> > >>        <gdal-dev@lists.osgeo.org>
> > >>
> > >> Message-ID: <C9CA2415.2220D%michael.smith@usace.army.mil>
> > >> Content-Type: text/plain;       charset="ISO-8859-1"
> > >>
> > >> I have a test v10 filegdb with points, lines, polygons (all with Z
> >
> > and M
> >
> > >> but
> > >> I think the measures aren't populated). There are also some non
> >
> > geometry
> >
> > >> tables and some relationship classes.
> > >>
> > >> Its available at
> > >>
> > >> http://12.189.158.78:8081/downloads/test_fgdb.gdb.zip
> > >>
> > >> Mike
> > >>
> > >>
> > >> --
> > >> Michael Smith
> > >> Remote Sensing/GIS Center
> > >> US Army Corps of Engineers
> > >>
> > >>
> > >>
> > >> On 4/12/11 2:48 PM, "Even Rouault" <even.rouault@mines-paris.org>
> >
> > wrote:
> > >> > Le mardi 12 avril 2011 20:40:58, Matt Wilkie a ?crit :
> > >> >>> ArcGIS 10 FileGDB's right ?
> > >> >>
> > >> >> If the api allows for using gdb's from different versions then
> >
> > the test
> >
> > >> >> suite should have different versions too. In any case I can make
> >
> > v10
> >
> > >> gdb's.
> > >>
> > >> > No, the FileGDB API only reads v10 gdb's.
> > >> >
> > >> >>> Current GDAL trunk builds against FileGDB API beta3 under Linux
> >
> > 32bit.
> >
> > >> >>> Too bad ESRI doesn't provide any 64bit build of the FileGDB API
> >
> > (yet...
> >
> > >> >>> ?)
> > >> >>
> > >> >> """
> > >> >> We are working on a Linux 64-bit release of the File Geodatabase
> >
> > API. It
> >
> > >> >> will not release with the 1.0 release of the API, but as a part
> >
> > of a
> >
> > >> >> follow on release later this year.
> > >> >>
> > >> >> Lance Shipman
> > >> >> Geodatabase Product Engineer, File Geodatabase
> > >> >> esri
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110414/6e7f2d20/attachment-0001.html
From ruitao.dong at gmail.com  Thu Apr 14 17:59:43 2011
From: ruitao.dong at gmail.com (Rui-Tao Dong)
Date: Thu Apr 14 17:59:48 2011
Subject: [gdal-dev] PCIDSK Write Endian Fix
Message-ID: <4da76e51.6ec2ec0a.72d7.66e4@mx.google.com>


PCIDSK doesn't always write in network order.  I believe that it is
missing a SwapPixel.  Here is a trivial patch against 1.8.0.

--- cpixelinterleavedchannel.cpp~	2011-01-13 21:19:05.000000000 -0800
+++ cpixelinterleavedchannel.cpp	2011-04-13 16:43:36.447932521 -0700
@@ -254,6 +254,8 @@
 /* -------------------------------------------------------------------- */
 /*      Do byte swapping if needed.                                     */
 /* -------------------------------------------------------------------- */
+    if( needs_swap )
+        SwapPixels( buffer, pixel_type, width);
 
     return 1;
 }

Regards,

-- 

	Rui-Tao Dong, Ph.D			Neos Geosolutions
	Principal System Architect		100 Bayview Circle, Suite 300
	(949)885-9979(O)			Newport Beach, CA 92660
	(949)287-1077(M)			rdong@neosgeo.com

From EAdam at co.lincoln.or.us  Thu Apr 14 18:35:34 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Apr 14 18:36:08 2011
Subject: [gdal-dev] gdaladdo creates very large files in 1.8 but not trunk
In-Reply-To: <201104141946.32949.even.rouault@mines-paris.org>
References: <4D9DD8B5020000CE00043EF3@mail.co.lincoln.or.us>
	<4DA6AA1C020000CE000443C4@mail.co.lincoln.or.us>
	<4DA6AA1A.4F75.00CE.0@co.lincoln.or.us>
	<201104141946.32949.even.rouault@mines-paris.org>
Message-ID: <4DA71445.4F75.00CE.0@co.lincoln.or.us>

> I'm not aware of any recent change in the GTiff driver that could have 
> "solved" 
> the issue you've seen. This is a bit surprising.
> 
> Could you also try with the -stable builds (based on 1.8 branch) from 
> http://vbkto.dyndns.org/sdk/ to compare ?

I am trying it with, http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1500-gdal-1-8-mapserver-5-6.zip 

Although not finished, based on progress so far, it looks to be working properly and on track to create a 3G ovr.  That is consistent with trunk.  I'll provide more information when it finishes.  

Eli


> 
>> This is an informational report only, there are not problems in trunk.
>> 
>> Using 1.8.0 from OSGeo4W on XP, I made a mosaic of about 1200 uncompressed
>> tifs totally 80G.
>> 
>> gdalbuildvrt mosaic.vrt *.tif
>> 
>> Then gdal_translated that to a compressed tif of about 8G
>> 
>> gdal_translate mosaic.vrt mosaic_ycbcr_big.tif -co COMPRESS=JPEG -co
>> PHOTOMETRIC=YCBCR -co TILED=YES -co BIGTIFF=YES --config GDAL_CACHEMAX 800
>> 
>> Last step was to add some overviews:
>> 
>> gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
>> YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config BIGTIFF_OVERVIEW YES
>> --config GDAL_CACHEMAX 800 -r average -ro mosaic_ycbcr_big.tif 2 4 8 16 32
>> 64 128
>> 
>> It works (at least in OpenEV it displays quickly like it is using
>> overviews), except the file sizes for the overviews seem odd and too
>> large.
>> 
>> The tiles are about 80G, the result of gdal_translate is 8G, the result of
>> gdaladdo, mosaic_ycbcr_big.tif.ovr,  is 375G!  That was using 1.8.0.
>> 
>> I tested on trunk on ubuntu and XP from here, http://vbkto.dyndns.org/sdk/ 
>> which produce reasonable results.  The ovr is about 3G.
>> 
>> A dif of gdalinfo on the .tif and .ovr are the same.
>> 
>> (I hope that is not the result of a typo when I initially typed the
>> command.  I unfortunately don't have the shell around any more but took
>> the above listed commands from some notes I took.)
>> 
>> I have tried making the overviews internal and external with similar
>> results.  I also tried making the overviews on the uncompressed files (the
>> vrt) with the same results.  Then I made the overviews 1 level at a time
>> and those results seemed reasonable.
>> 
>> I didn't find any tickets about this in trac, but don't experience this in
>> trunk so apparently it is fixed.  Just reporting in case it is useful.
>> 
>> Do you want any other information?
>> 
>> Thanks, Eli
>> 
>> 
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From peter.hopfgartner at r3-gis.com  Fri Apr 15 02:48:49 2011
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Fri Apr 15 02:55:51 2011
Subject: [gdal-dev] Copyright notices for SWIG/PHP
Message-ID: <20110415064849.60B0F1678215@mail.r3-gis.com>

http://wiki.osgeo.org/wiki/GDAL_Provenance_Review lists the PHP bindings as lacking copyright headers. If I got it right, this prevents Fedora to build those bindings.
Is there any chance to get those copyright into the headers? Has the original author been MIA?

Thanks,

Peter
 
R3 GIS Srl - GmbH
http://www.r3-gis.com


From eadam at co.lincoln.or.us  Fri Apr 15 05:01:12 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri Apr 15 05:02:16 2011
Subject: [gdal-dev] gdaladdo creates very large files in 1.8 but not trunk
Message-ID: <4DA7A6E8020000CE000444C7@mail.co.lincoln.or.us>

>>  I'm not aware of any recent change in the GTiff driver that could have 
>> "solved" 
>> the issue you've seen. This is a bit surprising.
>> 
>> Could you also try with the -stable builds (based on 1.8 branch) from 
>> http://vbkto.dyndns.org/sdk/ to compare ?
> 
> I am trying it with, 
> http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1500-gdal-1-8-mapserver-5- 
> 6.zip 
> 
> Although not finished, based on progress so far, it looks to be working 
> properly and on track to create a 3G ovr.  That is consistent with trunk.  
> I'll provide more information when it finishes.  

Yes, this produced the expected results.  Here is some information on that, (comments of creation included too)

E:\Orthos>dir mosaic_ycbcr_big*
04/06/2011  11:24 AM     7,780,934,363 mosaic_ycbcr_big.tif
04/11/2011  08:43 PM     3,262,697,247 mosaic_ycbcr_big.tif.ovr (created from svn a few days ago on ubuntu)
04/06/2011  11:24 AM     7,780,934,363 mosaic_ycbcr_big_1_8.tif 
04/14/2011  09:47 PM     3,260,246,941 mosaic_ycbcr_big_1_8.tif.ovr (created from http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1500-gdal-1-8-mapserver-5-6.zip downloaded today or yesterday)
04/06/2011  11:24 AM     7,780,934,363 mosaic_ycbcr_big_addo_v2.tif
04/07/2011  03:55 AM   385,580,179,214 mosaic_ycbcr_big_addo_v2.tif.ovr (Created from OSGEO4W 1.8.0)
04/06/2011  11:24 AM     7,780,934,363 mosaic_ycbcr_big_win.tif
04/12/2011  08:17 PM     3,260,246,941 mosaic_ycbcr_big_win.tif.ovr (created from a trunk version download from Tamas's site from a few days ago)

gdalinfo for mosaic_ycbcr_big.tif and mosaic_ycbcr_big_addo_v2.tif produces identical results (diff'ed).  Here is one for reference.
Driver: GTiff/GeoTIFF
Files: mosaic_ycbcr_big_addo_v2.tif
       mosaic_ycbcr_big_addo_v2.tif.ovr
Size is 141400, 280500
Coordinate System is:
PROJCS["NAD83(HARN) / Oregon North (ft)",
    GEOGCS["NAD83(HARN)",
        DATUM["NAD83_High_Accuracy_Regional_Network",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6152"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4152"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",46],
    PARAMETER["standard_parallel_2",44.33333333333334],
    PARAMETER["latitude_of_origin",43.66666666666666],
    PARAMETER["central_meridian",-120.5],
    PARAMETER["false_easting",8202099.738],
    PARAMETER["false_northing",0],
    UNIT["foot",0.3048,
        AUTHORITY["EPSG","9002"]],
    AUTHORITY["EPSG","2913"]]
Origin = (7255000.000467186800000,522299.999999974850000)
Pixel Size = (1.000000000000018,-1.000000000000018)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  SOURCE_COLOR_SPACE=YCbCr
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 7255000.000,  522300.000) (124d 9'55.56"W, 45d 2'25.33"N)
Lower Left  ( 7255000.000,  241800.000) (124d 7' 0.72"W, 44d16'18.24"N)
Upper Right ( 7396400.000,  522300.000) (123d37' 7.62"W, 45d 3'23.93"N)
Lower Right ( 7396400.000,  241800.000) (123d34'38.80"W, 44d17'16.07"N)
Center      ( 7325700.000,  382050.000) (123d52'10.27"W, 44d39'52.08"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Overviews: 70700x140250, 35350x70125, 17675x35063, 8838x17532, 4419x8766, 2210
x4383, 1105x2192
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Overviews: 70700x140250, 35350x70125, 17675x35063, 8838x17532, 4419x8766, 2210
x4383, 1105x2192
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Overviews: 70700x140250, 35350x70125, 17675x35063, 8838x17532, 4419x8766, 2210
x4383, 1105x2192


gdalinfo for mosaic_ycbcr_big.tif.ovr and mosaic_ycbcr_big_addo_v2.tif.ovr produces identical results.  Here for reference too.

Driver: GTiff/GeoTIFF
Files: mosaic_ycbcr_big_addo_v2.tif.ovr
Size is 70700, 140250
Coordinate System is `'
Image Structure Metadata:
  SOURCE_COLOR_SPACE=YCbCr
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,140250.0)
Upper Right (70700.0,    0.0)
Lower Right (70700.0,140250.0)
Center      (35350.0,70125.0)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
  Overviews: 35350x70125, 17675x35063, 8838x17532, 4419x8766, 2210x4383, 1105x21
92
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
  Overviews: 35350x70125, 17675x35063, 8838x17532, 4419x8766, 2210x4383, 1105x21
92
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
  Overviews: 35350x70125, 17675x35063, 8838x17532, 4419x8766, 2210x4383, 1105x21
92

I can run more tests, although for results you will have to wait since it takes a long time to run these.  Wait, this is easier, it is reproducible with OSGEO4W 1.8.0 and http://svn.osgeo.org/gdal/trunk/autotest/warp/data/test3658.tif  (I don't know what this tif is designed to test, so hopefully it isn't causing problems.)

C:\Documents and Settings\eadam\Desktop>gdaladdo -ro test3658.tif 2
0...10...20...30...40...50...60...70...80...90...100 - done.

dir test*
04/15/2011  01:32 AM             8,071 test3658.tif
04/15/2011  01:32 AM            49,568 test3658.tif.ovr

Once again, I get normal sized results from trunk.  I only get consistently unexpectedly large files in OSGEO4W 1.8.  I do not get consistently expected or unexpected results from a recent 1.8 from Tamas's site.  That may depend on whether it is a BIG_TIFF or not and whether the designation of BIG_TIFF was correct.  I'll try looking into that more later.  

Preliminarily it seems that with recent 1.8 from Tamas's site, the results are as expected when BIG_TIFF is specified and correct and otherwise, the results are unexpectedly large.  I have some long running operations right now and need to reboot before looking into this more.  It may be a few days for a reboot opportunity.   

Bests, Eli


> 
> Eli
> 
> 
>> 
>>> This is an informational report only, there are not problems in trunk.
>>> 
>>> Using 1.8.0 from OSGeo4W on XP, I made a mosaic of about 1200 uncompressed
>>> tifs totally 80G.
>>> 
>>> gdalbuildvrt mosaic.vrt *.tif
>>> 
>>> Then gdal_translated that to a compressed tif of about 8G
>>> 
>>> gdal_translate mosaic.vrt mosaic_ycbcr_big.tif -co COMPRESS=JPEG -co
>>> PHOTOMETRIC=YCBCR -co TILED=YES -co BIGTIFF=YES --config GDAL_CACHEMAX 800
>>> 
>>> Last step was to add some overviews:
>>> 
>>> gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
>>> YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config BIGTIFF_OVERVIEW YES
>>> --config GDAL_CACHEMAX 800 -r average -ro mosaic_ycbcr_big.tif 2 4 8 16 32
>>> 64 128
>>> 
>>> It works (at least in OpenEV it displays quickly like it is using
>>> overviews), except the file sizes for the overviews seem odd and too
>>> large.
>>> 
>>> The tiles are about 80G, the result of gdal_translate is 8G, the result of
>>> gdaladdo, mosaic_ycbcr_big.tif.ovr,  is 375G!  That was using 1.8.0.
>>> 
>>> I tested on trunk on ubuntu and XP from here, http://vbkto.dyndns.org/sdk/ 
>>> which produce reasonable results.  The ovr is about 3G.
>>> 
>>> A dif of gdalinfo on the .tif and .ovr are the same.
>>> 
>>> (I hope that is not the result of a typo when I initially typed the
>>> command.  I unfortunately don't have the shell around any more but took
>>> the above listed commands from some notes I took.)
>>> 
>>> I have tried making the overviews internal and external with similar
>>> results.  I also tried making the overviews on the uncompressed files (the
>>> vrt) with the same results.  Then I made the overviews 1 level at a time
>>> and those results seemed reasonable.
>>> 
>>> I didn't find any tickets about this in trac, but don't experience this in
>>> trunk so apparently it is fixed.  Just reporting in case it is useful.
>>> 
>>> Do you want any other information?
>>> 
>>> Thanks, Eli
>>> 
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org 
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 

From edwarddes at gmail.com  Fri Apr 15 15:09:07 2011
From: edwarddes at gmail.com (edwarddes)
Date: Fri Apr 15 15:09:08 2011
Subject: [gdal-dev] ogr2ogr clipping issue
Message-ID: <1302894547046-6277378.post@n2.nabble.com>

I am trying to clip a dxf to a region, using the following command:
ogr2ogr -f DXF -clipdst $w $e $s $n ./tmp/${BASE}_avg_05_unbuffered.dxf
./tmp/${BASE}_avg_05.dxf
where w,e,s,n are defined as follows:
echo $w $e $s $n
225000 229000 902000 906000

The data is properly clipped on the north and west side, but on the south
and east side, no clipping takes place.  The source file has extents that
are 100units larger in each direction

Any suggestions?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-clipping-issue-tp6277378p6277378.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Fri Apr 15 15:36:27 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 15 15:36:31 2011
Subject: [gdal-dev] ogr2ogr clipping issue
In-Reply-To: <1302894547046-6277378.post@n2.nabble.com>
References: <1302894547046-6277378.post@n2.nabble.com>
Message-ID: <4DA89E3B.5040301@pobox.com>

On 11-04-15 03:09 PM, edwarddes wrote:
> I am trying to clip a dxf to a region, using the following command:
> ogr2ogr -f DXF -clipdst $w $e $s $n ./tmp/${BASE}_avg_05_unbuffered.dxf
> ./tmp/${BASE}_avg_05.dxf
> where w,e,s,n are defined as follows:
> echo $w $e $s $n
> 225000 229000 902000 906000
>
> The data is properly clipped on the north and west side, but on the south
> and east side, no clipping takes place.  The source file has extents that
> are 100units larger in each direction

Edward,

 From the usage message I see:

   [-clipdst [xmin ymin xmax ymax]|WKT|datasource]

I think you need

   -clipdst $w $s $e $n

That is, you have the arguments in the wrong order.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From martin.krueger at gmx.com  Sat Apr 16 12:52:20 2011
From: martin.krueger at gmx.com (=?UTF-8?B?TWFydGluIEtyw7xnZXI=?=)
Date: Sat Apr 16 12:50:31 2011
Subject: [gdal-dev] Re: Cleaning up the tilefilename generation
	in	gdal2tiles.py
In-Reply-To: <loom.20110414T153944-762@post.gmane.org>
References: <4DA5F9A6.6090509@gmx.com>
	<loom.20110414T153944-762@post.gmane.org>
Message-ID: <4DA9C944.30501@gmx.com>


>> I was in need to generate tiles from a geotiff to publish the image as a
>> tms-service. So i was happy to find the gdal2tiles.py script which does
>> the job.
>>
>> The only issue i stumbled over:
>> gdal2tiles.py generates the tiles in the google format(0,0=top-left) , i
>> need the tms format(0,0=bottom-left).
>>      
> Are you sure about that? I do believe that gdal2tiles.py and MapTiler program
> based on gdal2tiles are particularly generating TMS tiles.
>
>    
You are right ,i am surprised that josm expects the tiles in 
google-format when loading backgrounds from  a  tms-url.

best regards
    martin kr?ger
From warmerdam at pobox.com  Sat Apr 16 13:03:52 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 16 13:03:56 2011
Subject: [gdal-dev] Shapefile (DBF) Code Page Handling
Message-ID: <4DA9CBF8.6080007@pobox.com>

Folks,

I have implemented some preliminary support for encoding/decoding of string
attributes to/from DBF files in trunk.  Changes are:

   http://trac.osgeo.org/gdal/changeset/22176

Some notes at:

   http://trac.osgeo.org/gdal/ticket/882#comment:11

Testing and example files are welcome, especially those with associated .cpg
files.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sfkeller at gmail.com  Sat Apr 16 20:12:08 2011
From: sfkeller at gmail.com (Stefan Keller)
Date: Sat Apr 16 20:12:10 2011
Subject: [gdal-dev] LAS format driver for OGR?
Message-ID: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>

Hi,

Can GDAL/OGR read/write the ASPRS LAS format versions 1.0 .. 1.3
(defined here: http://liblas.org/ )?

I tried to read LIDAR data in LAS format from LAStools
(http://www.cs.unc.edu/~isenburg/lastools/ ) but without success using
gdalinfo and ogrinfo. Even the Python LAS->shapefile converter
(http://code.google.com/p/pylas/ ) failed ("TypeError...").

Scanning this mailing list I could not find an answer except to use
LAStools. But since LAS is essentially just a simple vector point data
I can't imagine why OGR should not be able to support that.

Yours, Stefan
From mateusz at loskot.net  Sat Apr 16 20:22:11 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 16 20:22:13 2011
Subject: [gdal-dev] LAS format driver for OGR?
In-Reply-To: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
References: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
Message-ID: <07618bab97dac4160c464fedca861d95.squirrel@loskot.net>

Stefan Keller wrote:
> I tried to read LIDAR data in LAS format from LAStools
> (http://www.cs.unc.edu/~isenburg/lastools/ ) but without success using
> gdalinfo and ogrinfo. Even the Python LAS->shapefile converter
> (http://code.google.com/p/pylas/ ) failed ("TypeError...").

Some time ago I have written a tool to dump LAS data to virtually
any OGR dataset:

http://liblas.org/utilities/las2ogr.html

> Scanning this mailing list I could not find an answer except to use
> LAStools. But since LAS is essentially just a simple vector point data

Considering point clouds in terms of (only) a simple vector point data is
a misunderstanding.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From even.rouault at mines-paris.org  Sat Apr 16 20:24:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 16 20:24:25 2011
Subject: [gdal-dev] LAS format driver for OGR?
In-Reply-To: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
References: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
Message-ID: <201104170224.17950.even.rouault@mines-paris.org>

Le dimanche 17 avril 2011 02:12:08, Stefan Keller a ?crit :
> Hi,
> 
> Can GDAL/OGR read/write the ASPRS LAS format versions 1.0 .. 1.3
> (defined here: http://liblas.org/ )?

No

> 
> I tried to read LIDAR data in LAS format from LAStools
> (http://www.cs.unc.edu/~isenburg/lastools/ ) but without success using
> gdalinfo and ogrinfo. Even the Python LAS->shapefile converter
> (http://code.google.com/p/pylas/ ) failed ("TypeError...").
> 
> Scanning this mailing list I could not find an answer except to use
> LAStools. But since LAS is essentially just a simple vector point data
> I can't imagine why OGR should not be able to support that.

OGR could perhaps support it, but it is really libLAS job and I don't think it 
would be wise to reimplement what it does... I'm not sure if a OGR driver 
using libLAS would make sense, and it might be difficult for technical reasons, 
liblas depending - optionnaly - itself on GDAL for SRS support.

Anyway, there's a las2ogr utility in liblas to make the bridge. If you have 
problems, you'd better report them to liblas mailing list.

> 
> Yours, Stefan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From sfkeller at gmail.com  Sun Apr 17 06:56:39 2011
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Apr 17 06:56:42 2011
Subject: [gdal-dev] LAS format driver for OGR?
In-Reply-To: <07618bab97dac4160c464fedca861d95.squirrel@loskot.net>
References: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
	<07618bab97dac4160c464fedca861d95.squirrel@loskot.net>
Message-ID: <BANLkTimmpVHTpgfKPGFDY=t4rcCnjMkuNw@mail.gmail.com>

Mateusz,

Thanks for your replies (also to Even). Your answered:
> Some time ago I have written a tool to dump LAS data to virtually
> any OGR dataset:
>
> http://liblas.org/utilities/las2ogr.html

I'll have a look at http://liblas.org/utilities/las2ogr.html

My goal is to import it in PostGIS and a Java program.

>> Scanning this mailing list I could not find an answer except to use
>> LAStools. But since LAS is essentially just a simple vector point data
>
> Considering point clouds in terms of (only) a simple vector point data is
> a misunderstanding.

You're right. I should have written:
LAS is essentially vector point data plus a (more or less?) fixed
number of properties like color.

Yours, S.

2011/4/17 Mateusz Loskot <mateusz@loskot.net>:
> Stefan Keller wrote:
>> I tried to read LIDAR data in LAS format from LAStools
>> (http://www.cs.unc.edu/~isenburg/lastools/ ) but without success using
>> gdalinfo and ogrinfo. Even the Python LAS->shapefile converter
>> (http://code.google.com/p/pylas/ ) failed ("TypeError...").
>
> Some time ago I have written a tool to dump LAS data to virtually
> any OGR dataset:
>
> http://liblas.org/utilities/las2ogr.html
>
>> Scanning this mailing list I could not find an answer except to use
>> LAStools. But since LAS is essentially just a simple vector point data
>
> Considering point clouds in terms of (only) a simple vector point data is
> a misunderstanding.
>
> Best regards,
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
>
From cdedels at gmail.com  Sun Apr 17 16:10:57 2011
From: cdedels at gmail.com (Christopher Dedels)
Date: Sun Apr 17 16:10:58 2011
Subject: [gdal-dev] gdal_grid inverts y axis
Message-ID: <BANLkTimTNVqyRNcwRhrF7YS+PzztXa+==A@mail.gmail.com>

I am using gdal_grid to create a grid from a point shapefile.  gdalinfo
reports inverted y-axis coordinates for the output raster.  The command I am
running is:

gdal_grid -ot Float32 -outsize 800 600 -l sites -zfield elev sites.shp
/tmp/sites.tif

I am using gdal 1.8.0.  the output of gdalinfo for sites.tif is:

Driver: GTiff/GeoTIFF
Files: /tmp/sites.tif
Size is 800, 600
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-123.860031127930000,38.011638641357401)
Pixel Size = (0.033339290618897,0.026156539916992)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-123.8600311,  38.0116386) (123d51'36.11"W, 38d 0'41.90"N)
Lower Left  (-123.8600311,  53.7055626) (123d51'36.11"W, 53d42'20.03"N)
Upper Right ( -97.1885986,  38.0116386) ( 97d11'18.96"W, 38d 0'41.90"N)
Lower Right ( -97.1885986,  53.7055626) ( 97d11'18.96"W, 53d42'20.03"N)
Center      (-110.5243149,  45.8586006) (110d31'27.53"W, 45d51'30.96"N)
Band 1 Block=800x2 Type=Float32, ColorInterp=Gray

Is there any way to invert the y-axis back?  Thanks for the help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110417/b07d414b/attachment.html
From even.rouault at mines-paris.org  Sun Apr 17 16:52:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 17 16:52:22 2011
Subject: [gdal-dev] gdal_grid inverts y axis
In-Reply-To: <BANLkTimTNVqyRNcwRhrF7YS+PzztXa+==A@mail.gmail.com>
References: <BANLkTimTNVqyRNcwRhrF7YS+PzztXa+==A@mail.gmail.com>
Message-ID: <201104172252.15414.even.rouault@mines-paris.org>

Le dimanche 17 avril 2011 22:10:57, Christopher Dedels a ?crit :
> I am using gdal_grid to create a grid from a point shapefile.  gdalinfo
> reports inverted y-axis coordinates for the output raster.  The command I
> am running is:
> 
> gdal_grid -ot Float32 -outsize 800 600 -l sites -zfield elev sites.shp
> /tmp/sites.tif

> Is there any way to invert the y-axis back?  Thanks for the help.

Yes, 2 possibilities:

1) After gdal_grid, just run "gdalwarp sites.tif sites_inverted.tif" and this 
will correct the y-axis order to the usual order.

2) Or run gdal_grid by specifying the -tye option in the "-tye ymax ymin" 
order.

From mateusz at loskot.net  Sun Apr 17 17:29:13 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 17 17:29:15 2011
Subject: [gdal-dev] Re: LAS format driver for OGR?
In-Reply-To: <BANLkTimmpVHTpgfKPGFDY=t4rcCnjMkuNw@mail.gmail.com>
References: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
	<07618bab97dac4160c464fedca861d95.squirrel@loskot.net>
	<BANLkTimmpVHTpgfKPGFDY=t4rcCnjMkuNw@mail.gmail.com>
Message-ID: <1303075753416-6281849.post@n2.nabble.com>


Stefan Keller wrote:
> 
>> Some time ago I have written a tool to dump LAS data to virtually
>> any OGR dataset:
>>
>> http://liblas.org/utilities/las2ogr.html
> 
> I'll have a look at http://liblas.org/utilities/las2ogr.html
> 
> My goal is to import it in PostGIS and a Java program.
> 

las2ogr should work here.


Stefan Keller wrote:
> 
>>> Scanning this mailing list I could not find an answer except to use
>>> LAStools. But since LAS is essentially just a simple vector point data
>>
>> Considering point clouds in terms of (only) a simple vector point data is
>> a misunderstanding.
> 
> You're right. I should have written:
> LAS is essentially vector point data plus a (more or less?) fixed
> number of properties like color.
> 

The extra properties are not the case here. The point is that it is not a
vector data.
A point cloud is neither vector nor raster. It is a raw point cloud which
can be processed depending on your needs, to form of vector or form of
raster.

Dumping a point cloud to PostGIS and trying to make a vector sense of it
without any relevant processing has very little sense, IMHO.

-----
-- 
Mateusz Loskot
http://mateusz.loskot.net
--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-LAS-format-driver-for-OGR-tp6280076p6281849.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From cdedels at gmail.com  Sun Apr 17 18:22:27 2011
From: cdedels at gmail.com (Christopher Dedels)
Date: Sun Apr 17 18:22:29 2011
Subject: [gdal-dev] gdal_grid inverts y axis
In-Reply-To: <201104172252.15414.even.rouault@mines-paris.org>
References: <BANLkTimTNVqyRNcwRhrF7YS+PzztXa+==A@mail.gmail.com>
	<201104172252.15414.even.rouault@mines-paris.org>
Message-ID: <BANLkTimhAFccZ4o5-OppswUEzTM_cf6U1Q@mail.gmail.com>

Thanks.  That worked for me.

Chris


On Sun, Apr 17, 2011 at 4:52 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le dimanche 17 avril 2011 22:10:57, Christopher Dedels a ?crit :
> > I am using gdal_grid to create a grid from a point shapefile.  gdalinfo
> > reports inverted y-axis coordinates for the output raster.  The command I
> > am running is:
> >
> > gdal_grid -ot Float32 -outsize 800 600 -l sites -zfield elev sites.shp
> > /tmp/sites.tif
>
> > Is there any way to invert the y-axis back?  Thanks for the help.
>
> Yes, 2 possibilities:
>
> 1) After gdal_grid, just run "gdalwarp sites.tif sites_inverted.tif" and
> this
> will correct the y-axis order to the usual order.
>
> 2) Or run gdal_grid by specifying the -tye option in the "-tye ymax ymin"
> order.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110417/adba95a1/attachment.html
From ivan at sanchezortega.es  Sun Apr 17 19:17:25 2011
From: ivan at sanchezortega.es (=?utf-8?q?Iv=C3=A1n_S=C3=A1nchez_Ortega?=)
Date: Sun Apr 17 19:17:15 2011
Subject: [gdal-dev] Trouble with python+gdal+sqlite+utf-8
Message-ID: <201104180117.26052.ivan@sanchezortega.es>

Hi all,

I'm working with a script to do some data translation, and it seems it's 
failing when trying to set the value of a string attribute field to a UTF-8 
string.

I'm attaching a small script that reproduces the error (notice the "?" in 
"Calle Garb?"). If someone can point me to the right way to put a UTF-8 string 
into a SQLite string field, I'll pay him/her a beer during FOSS4G :-)


Best,
-- 
----------------------------------
Iv?n S?nchez Ortega <ivan@sanchezortega.es> <ivan@geonerd.org>

Intento ahogar mis penas... pero las jodidas flotan!
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_gdal_sqlite_utf8.py
Type: text/x-python
Size: 526 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/8103792a/test_gdal_sqlite_utf8.py
From sfkeller at gmail.com  Sun Apr 17 19:54:19 2011
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Apr 17 19:54:21 2011
Subject: [gdal-dev] Re: LAS format driver for OGR?
In-Reply-To: <1303075753416-6281849.post@n2.nabble.com>
References: <BANLkTinBZA2EhOYMQ7yRiHNABmZpMK7qRQ@mail.gmail.com>
	<07618bab97dac4160c464fedca861d95.squirrel@loskot.net>
	<BANLkTimmpVHTpgfKPGFDY=t4rcCnjMkuNw@mail.gmail.com>
	<1303075753416-6281849.post@n2.nabble.com>
Message-ID: <BANLkTi=JpspBBboMGjtA5sTAYa4aefX9vA@mail.gmail.com>

Mateeusz wrote:
> Dumping a point cloud to PostGIS and trying to make a vector sense of it
> without any relevant processing has very little sense, IMHO.

Agreed.

>> My goal is to import it in PostGIS and a Java program.
>>
>
> las2ogr should work here.

PostGIS yes, but Java only e.g. via an 'intermediate' format like CSV
OGR writer and AS_WKT option?

Yours, Stefan

2011/4/17 Mateusz Loskot <mateusz@loskot.net>:
>
> Stefan Keller wrote:
>>
>>> Some time ago I have written a tool to dump LAS data to virtually
>>> any OGR dataset:
>>>
>>> http://liblas.org/utilities/las2ogr.html
>>
>> I'll have a look at http://liblas.org/utilities/las2ogr.html
>>
>> My goal is to import it in PostGIS and a Java program.
>>
>
> las2ogr should work here.
>
>
> Stefan Keller wrote:
>>
>>>> Scanning this mailing list I could not find an answer except to use
>>>> LAStools. But since LAS is essentially just a simple vector point data
>>>
>>> Considering point clouds in terms of (only) a simple vector point data is
>>> a misunderstanding.
>>
>> You're right. I should have written:
>> LAS is essentially vector point data plus a (more or less?) fixed
>> number of properties like color.
>>
>
> The extra properties are not the case here. The point is that it is not a
> vector data.
> A point cloud is neither vector nor raster. It is a raw point cloud which
> can be processed depending on your needs, to form of vector or form of
> raster.
>
> Dumping a point cloud to PostGIS and trying to make a vector sense of it
> without any relevant processing has very little sense, IMHO.
>
> -----
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-LAS-format-driver-for-OGR-tp6280076p6281849.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Luke.Pinner at environment.gov.au  Sun Apr 17 19:51:18 2011
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Sun Apr 17 20:06:24 2011
Subject: [gdal-dev] Trouble with python+gdal+sqlite+utf-8
	[SEC=UNCLASSIFIED]
In-Reply-To: <201104180117.26052.ivan@sanchezortega.es>
References: <201104180117.26052.ivan@sanchezortega.es>
Message-ID: <64102B2FB850C345B04D09C82018F45F056E4E7F@ACT01VEXCCL04.internal.govt>

newFeature.SetField('name', u"Calle Garb?, 2".encode('utf-8'))

Luke  

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Iv?n S?nchez Ortega
Sent: Monday, 18 April 2011 9:17 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Trouble with python+gdal+sqlite+utf-8

Hi all,

I'm working with a script to do some data translation, and it seems it's 
failing when trying to set the value of a string attribute field to a UTF-8 
string.

I'm attaching a small script that reproduces the error (notice the "?" in 
"Calle Garb?"). If someone can point me to the right way to put a UTF-8 string 
into a SQLite string field, I'll pay him/her a beer during FOSS4G :-)


Best,
-- 
----------------------------------
Iv?n S?nchez Ortega <ivan@sanchezortega.es> <ivan@geonerd.org>

Intento ahogar mis penas... pero las jodidas flotan!

If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.
From nmayer31000 at gmail.com  Mon Apr 18 04:30:06 2011
From: nmayer31000 at gmail.com (Nicolas Mayer)
Date: Mon Apr 18 04:30:27 2011
Subject: [gdal-dev] GeoTiff and the 4th band
Message-ID: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>

Hello

I have a problem with the geotiff (GTiff) driver.

I create a 4-bands raster image in a c++ program. The fourth band was
considered as an alpha band in the geotiff image (actually, it is near
infrared : NIR)

$ gdalinfo new_geotiff.tif
Driver: GTiff/GeoTIFF
Files: new__geotiff.tif
Size is 100, 100
(...)
Band 1 Block=100x20 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=100x20 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=100x20 Type=Byte, ColorInterp=Alpha

How to remove the Color interpretation 'alpha' and the mask flags ?

I want to have :

Band 1 Block=100x20 Type=Byte, ColorInterp=Red
Band 2 Block=100x20 Type=Byte, ColorInterp=Green
Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined

I already tryed :
pDS->GetRasterBand(4)->SetColorInterpretation(GCI_Undefined );

I tryed too to set the creation option : "ALPHA" to "NO".


Thanks in advance for any help.

Nicky
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/1e9575b2/attachment-0001.html
From even.rouault at mines-paris.org  Mon Apr 18 04:56:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 18 04:57:01 2011
Subject: [gdal-dev] GeoTiff and the 4th band
In-Reply-To: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
References: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
Message-ID: <1303117011.4dabfcd3cf494@webmail.free.fr>

Selon Nicolas Mayer <nmayer31000@gmail.com>:

Retry by setting the PHOTOMETRIC creation option to MINISBLACK. Otherwise, by
default, without specifying it, GDAL assumes that the PHOTOMETRIC is RGB and
that the 4th band is an alpha band.

You should get :
Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined

There's no way in the TIFF format to really specify the color interpretation of
each band. The way GDAL builds the color interpretation when reading a TIFF file
is a combination of the value of the PHOTOMETRIC and EXTRASAMPLES tag.

> Hello
>
> I have a problem with the geotiff (GTiff) driver.
>
> I create a 4-bands raster image in a c++ program. The fourth band was
> considered as an alpha band in the geotiff image (actually, it is near
> infrared : NIR)
>
> $ gdalinfo new_geotiff.tif
> Driver: GTiff/GeoTIFF
> Files: new__geotiff.tif
> Size is 100, 100
> (...)
> Band 1 Block=100x20 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=100x20 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=100x20 Type=Byte, ColorInterp=Alpha
>
> How to remove the Color interpretation 'alpha' and the mask flags ?
>
> I want to have :
>
> Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
>
> I already tryed :
> pDS->GetRasterBand(4)->SetColorInterpretation(GCI_Undefined );
>
> I tryed too to set the creation option : "ALPHA" to "NO".
>
>
> Thanks in advance for any help.
>
> Nicky
>


From nmayer31000 at gmail.com  Mon Apr 18 05:35:42 2011
From: nmayer31000 at gmail.com (Nicolas Mayer)
Date: Mon Apr 18 05:36:04 2011
Subject: [gdal-dev] GeoTiff and the 4th band
In-Reply-To: <1303117011.4dabfcd3cf494@webmail.free.fr>
References: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
	<1303117011.4dabfcd3cf494@webmail.free.fr>
Message-ID: <BANLkTi=MfVW04Mu9zt_5T1fsHCx_=pD4QA@mail.gmail.com>

Even, thank you very much for answering me so quicly

With the PHOTOMETRIC creation option to MINISBLACK, I get now :
Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined

Does this option change anything in the metadatas or in the headers of the
written file ?

But I try to make the same thing as an exemple file I have, which has this
interpretation whith gdalinfo (GDAL 1.7.3) :

Metadata:
  TIFFTAG_IMAGEDESCRIPTION=B3 B2 B1 B4
  TIFFTAG_DATETIME=20050824 18:08:22
  AREA_OR_POINT=Point
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 3000.0)
Upper Right ( 3000.0,    0.0)
Lower Right ( 3000.0, 3000.0)
Center      ( 1500.0, 1500.0)
Band 1 Block=3000x500 Type=Byte, ColorInterp=Red
Band 2 Block=3000x500 Type=Byte, ColorInterp=Green
Band 3 Block=3000x500 Type=Byte, ColorInterp=Blue
Band 4 Block=3000x500 Type=Byte, ColorInterp=Undefined

My goal is to have an "RGB-Undefined" color interpretation.
Have you any idea of the creation option (or driver option ?) to set to have
the same color interpretations ?

Thank you in advance

Nicky



2011/4/18 Even Rouault <even.rouault@mines-paris.org>

> Selon Nicolas Mayer <nmayer31000@gmail.com>:
>
> Retry by setting the PHOTOMETRIC creation option to MINISBLACK. Otherwise,
> by
> default, without specifying it, GDAL assumes that the PHOTOMETRIC is RGB
> and
> that the 4th band is an alpha band.
>
> You should get :
> Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
> Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
> Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
> Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
>
> There's no way in the TIFF format to really specify the color
> interpretation of
> each band. The way GDAL builds the color interpretation when reading a TIFF
> file
> is a combination of the value of the PHOTOMETRIC and EXTRASAMPLES tag.
>
> > Hello
> >
> > I have a problem with the geotiff (GTiff) driver.
> >
> > I create a 4-bands raster image in a c++ program. The fourth band was
> > considered as an alpha band in the geotiff image (actually, it is near
> > infrared : NIR)
> >
> > $ gdalinfo new_geotiff.tif
> > Driver: GTiff/GeoTIFF
> > Files: new__geotiff.tif
> > Size is 100, 100
> > (...)
> > Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> >   Mask Flags: PER_DATASET ALPHA
> > Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> >   Mask Flags: PER_DATASET ALPHA
> > Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> >   Mask Flags: PER_DATASET ALPHA
> > Band 4 Block=100x20 Type=Byte, ColorInterp=Alpha
> >
> > How to remove the Color interpretation 'alpha' and the mask flags ?
> >
> > I want to have :
> >
> > Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> > Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> > Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> > Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
> >
> > I already tryed :
> > pDS->GetRasterBand(4)->SetColorInterpretation(GCI_Undefined );
> >
> > I tryed too to set the creation option : "ALPHA" to "NO".
> >
> >
> > Thanks in advance for any help.
> >
> > Nicky
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/c7316686/attachment.html
From gistdt08 at hotmail.es  Mon Apr 18 05:45:53 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 05:46:55 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
Message-ID: <blu150-w65CBC084AE3308F2D8B188A9910@phx.gbl>


Dear friends,
I'm reading the GDAL documentation, and I'm trying to represent a ECW image into a Bitmap in C#.
The problem is that when I try to load it, it give me an error of Image not recognized or bad extension.
Do I need anything else to load this images using GDAL?
Thanks in advanced.
Francisco J. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/0232fee9/attachment.html
From even.rouault at mines-paris.org  Mon Apr 18 05:47:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 18 05:48:07 2011
Subject: [gdal-dev] GeoTiff and the 4th band
In-Reply-To: <BANLkTi=MfVW04Mu9zt_5T1fsHCx_=pD4QA@mail.gmail.com>
References: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
	<1303117011.4dabfcd3cf494@webmail.free.fr>
	<BANLkTi=MfVW04Mu9zt_5T1fsHCx_=pD4QA@mail.gmail.com>
Message-ID: <1303120079.4dac08cf61232@webmail.free.fr>

Selon Nicolas Mayer <nmayer31000@gmail.com>:

> Even, thank you very much for answering me so quicly
>
> With the PHOTOMETRIC creation option to MINISBLACK, I get now :
> Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
> Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
> Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
> Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
>
> Does this option change anything in the metadatas or in the headers of the
> written file ?

Yes of course, otherwise how would you explain you get a difference ;-) ? This
change the value of the PHOTOMETRIC tiff tag in TIFF file.

>
> But I try to make the same thing as an exemple file I have, which has this
> interpretation whith gdalinfo (GDAL 1.7.3) :
>
> Metadata:
>   TIFFTAG_IMAGEDESCRIPTION=B3 B2 B1 B4
>   TIFFTAG_DATETIME=20050824 18:08:22
>   AREA_OR_POINT=Point
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 3000.0)
> Upper Right ( 3000.0,    0.0)
> Lower Right ( 3000.0, 3000.0)
> Center      ( 1500.0, 1500.0)
> Band 1 Block=3000x500 Type=Byte, ColorInterp=Red
> Band 2 Block=3000x500 Type=Byte, ColorInterp=Green
> Band 3 Block=3000x500 Type=Byte, ColorInterp=Blue
> Band 4 Block=3000x500 Type=Byte, ColorInterp=Undefined
>
> My goal is to have an "RGB-Undefined" color interpretation.
> Have you any idea of the creation option (or driver option ?) to set to have
> the same color interpretations ?

Actually after looking more precisely at the code and a bit of testing, I see
you can obtain the behaviour you wish by specifying both PHOTOMETRIC=RGB and
ALPHA=NO. (ALPHA=NO only will not be sufficient)

>
> Thank you in advance
>
> Nicky
>
>
>
> 2011/4/18 Even Rouault <even.rouault@mines-paris.org>
>
> > Selon Nicolas Mayer <nmayer31000@gmail.com>:
> >
> > Retry by setting the PHOTOMETRIC creation option to MINISBLACK. Otherwise,
> > by
> > default, without specifying it, GDAL assumes that the PHOTOMETRIC is RGB
> > and
> > that the 4th band is an alpha band.
> >
> > You should get :
> > Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
> > Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
> > Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
> > Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
> >
> > There's no way in the TIFF format to really specify the color
> > interpretation of
> > each band. The way GDAL builds the color interpretation when reading a TIFF
> > file
> > is a combination of the value of the PHOTOMETRIC and EXTRASAMPLES tag.
> >
> > > Hello
> > >
> > > I have a problem with the geotiff (GTiff) driver.
> > >
> > > I create a 4-bands raster image in a c++ program. The fourth band was
> > > considered as an alpha band in the geotiff image (actually, it is near
> > > infrared : NIR)
> > >
> > > $ gdalinfo new_geotiff.tif
> > > Driver: GTiff/GeoTIFF
> > > Files: new__geotiff.tif
> > > Size is 100, 100
> > > (...)
> > > Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> > >   Mask Flags: PER_DATASET ALPHA
> > > Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> > >   Mask Flags: PER_DATASET ALPHA
> > > Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> > >   Mask Flags: PER_DATASET ALPHA
> > > Band 4 Block=100x20 Type=Byte, ColorInterp=Alpha
> > >
> > > How to remove the Color interpretation 'alpha' and the mask flags ?
> > >
> > > I want to have :
> > >
> > > Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> > > Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> > > Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> > > Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
> > >
> > > I already tryed :
> > > pDS->GetRasterBand(4)->SetColorInterpretation(GCI_Undefined );
> > >
> > > I tryed too to set the creation option : "ALPHA" to "NO".
> > >
> > >
> > > Thanks in advance for any help.
> > >
> > > Nicky
> > >
> >
> >
> >
>


From nmayer31000 at gmail.com  Mon Apr 18 05:57:47 2011
From: nmayer31000 at gmail.com (Nicolas Mayer)
Date: Mon Apr 18 05:58:09 2011
Subject: [gdal-dev] GeoTiff and the 4th band
In-Reply-To: <1303120079.4dac08cf61232@webmail.free.fr>
References: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
	<1303117011.4dabfcd3cf494@webmail.free.fr>
	<BANLkTi=MfVW04Mu9zt_5T1fsHCx_=pD4QA@mail.gmail.com>
	<1303120079.4dac08cf61232@webmail.free.fr>
Message-ID: <BANLkTim7wyj2nyQEKp8=XPa8PGBy8DzhEw@mail.gmail.com>

Even, Thank you very much !

With the two creation options : PHOTOMETRIC=RGB and ALPHA=NO, I obtain the
same behaviour I whish.

Can you explain me where you found this answer ? (to help me to become more
autonomous with GDAL)

Thank you again

Nicky



2011/4/18 Even Rouault <even.rouault@mines-paris.org>

> Selon Nicolas Mayer <nmayer31000@gmail.com>:
>
> > Even, thank you very much for answering me so quicly
> >
> > With the PHOTOMETRIC creation option to MINISBLACK, I get now :
> > Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
> > Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
> > Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
> > Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
> >
> > Does this option change anything in the metadatas or in the headers of
> the
> > written file ?
>
> Yes of course, otherwise how would you explain you get a difference ;-) ?
> This
> change the value of the PHOTOMETRIC tiff tag in TIFF file.
>
> >
> > But I try to make the same thing as an exemple file I have, which has
> this
> > interpretation whith gdalinfo (GDAL 1.7.3) :
> >
> > Metadata:
> >   TIFFTAG_IMAGEDESCRIPTION=B3 B2 B1 B4
> >   TIFFTAG_DATETIME=20050824 18:08:22
> >   AREA_OR_POINT=Point
> > Image Structure Metadata:
> >   INTERLEAVE=BAND
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0, 3000.0)
> > Upper Right ( 3000.0,    0.0)
> > Lower Right ( 3000.0, 3000.0)
> > Center      ( 1500.0, 1500.0)
> > Band 1 Block=3000x500 Type=Byte, ColorInterp=Red
> > Band 2 Block=3000x500 Type=Byte, ColorInterp=Green
> > Band 3 Block=3000x500 Type=Byte, ColorInterp=Blue
> > Band 4 Block=3000x500 Type=Byte, ColorInterp=Undefined
> >
> > My goal is to have an "RGB-Undefined" color interpretation.
> > Have you any idea of the creation option (or driver option ?) to set to
> have
> > the same color interpretations ?
>
> Actually after looking more precisely at the code and a bit of testing, I
> see
> you can obtain the behaviour you wish by specifying both PHOTOMETRIC=RGB
> and
> ALPHA=NO. (ALPHA=NO only will not be sufficient)
>
> >
> > Thank you in advance
> >
> > Nicky
> >
> >
> >
> > 2011/4/18 Even Rouault <even.rouault@mines-paris.org>
> >
> > > Selon Nicolas Mayer <nmayer31000@gmail.com>:
> > >
> > > Retry by setting the PHOTOMETRIC creation option to MINISBLACK.
> Otherwise,
> > > by
> > > default, without specifying it, GDAL assumes that the PHOTOMETRIC is
> RGB
> > > and
> > > that the 4th band is an alpha band.
> > >
> > > You should get :
> > > Band 1 Block=100x20 Type=Byte, ColorInterp=Gray
> > > Band 2 Block=100x20 Type=Byte, ColorInterp=Undefined
> > > Band 3 Block=100x20 Type=Byte, ColorInterp=Undefined
> > > Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
> > >
> > > There's no way in the TIFF format to really specify the color
> > > interpretation of
> > > each band. The way GDAL builds the color interpretation when reading a
> TIFF
> > > file
> > > is a combination of the value of the PHOTOMETRIC and EXTRASAMPLES tag.
> > >
> > > > Hello
> > > >
> > > > I have a problem with the geotiff (GTiff) driver.
> > > >
> > > > I create a 4-bands raster image in a c++ program. The fourth band was
> > > > considered as an alpha band in the geotiff image (actually, it is
> near
> > > > infrared : NIR)
> > > >
> > > > $ gdalinfo new_geotiff.tif
> > > > Driver: GTiff/GeoTIFF
> > > > Files: new__geotiff.tif
> > > > Size is 100, 100
> > > > (...)
> > > > Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> > > >   Mask Flags: PER_DATASET ALPHA
> > > > Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> > > >   Mask Flags: PER_DATASET ALPHA
> > > > Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> > > >   Mask Flags: PER_DATASET ALPHA
> > > > Band 4 Block=100x20 Type=Byte, ColorInterp=Alpha
> > > >
> > > > How to remove the Color interpretation 'alpha' and the mask flags ?
> > > >
> > > > I want to have :
> > > >
> > > > Band 1 Block=100x20 Type=Byte, ColorInterp=Red
> > > > Band 2 Block=100x20 Type=Byte, ColorInterp=Green
> > > > Band 3 Block=100x20 Type=Byte, ColorInterp=Blue
> > > > Band 4 Block=100x20 Type=Byte, ColorInterp=Undefined
> > > >
> > > > I already tryed :
> > > > pDS->GetRasterBand(4)->SetColorInterpretation(GCI_Undefined );
> > > >
> > > > I tryed too to set the creation option : "ALPHA" to "NO".
> > > >
> > > >
> > > > Thanks in advance for any help.
> > > >
> > > > Nicky
> > > >
> > >
> > >
> > >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/35ef073b/attachment-0001.html
From jrepetto at free.fr  Mon Apr 18 05:59:21 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Apr 18 05:59:30 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <blu150-w65CBC084AE3308F2D8B188A9910@phx.gbl>
References: <blu150-w65CBC084AE3308F2D8B188A9910@phx.gbl>
Message-ID: <4DAC0B79.8080506@free.fr>

Le 18/04/2011 11:45, Francisco Jos? Reyes Peralta a ?crit :
> Dear friends,
>
> I'm reading the GDAL documentation, and I'm trying to represent a ECW
> image into a Bitmap in C#.
>
> The problem is that when I try to load it, it give me an error of Image
> not recognized or bad extension.
>
> Do I need anything else to load this images using GDAL?

Hello,
What OS are you using ?
What version of GDAL are you using ?
Did you compile GDAL yourself, or did you use a precompiled binary package ?

Jean-Claude
From gistdt08 at hotmail.es  Mon Apr 18 06:14:51 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 06:14:53 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
In-Reply-To: <20110418095812.74D22E020B9@lists.osgeo.org>
References: <20110418095812.74D22E020B9@lists.osgeo.org>
Message-ID: <BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>


Dear Jean-Claude,I'm using GDAL 1.8.0, with the csharp dlls loaded into my project.I can load another images but ECW I cannot load into my project.I copy the gdal folder into my bin project folder, I reference the gdal_csharp.dll in it, and activate the gdal in the code:            Dim gdal As String = ";"
            Dim ruta As String = Environment.GetEnvironmentVariable("PATH")
            gdal &= Application.StartupPath & "\GDALx86"
            ruta &= ";" & gdal
            Environment.SetEnvironmentVariable("PATH", ruta)Is needed another dll as the libecwj2.dll?Is supported by GDAL this images actually? In the support formats you can find ECW file supported.Thanks in advanced.Francisco J.
Le 18/04/2011 11:45, Francisco Jos? Reyes Peralta a ?crit :
> Dear friends,
>
> I'm reading the GDAL documentation, and I'm trying to represent a ECW
> image into a Bitmap in C#.
>
> The problem is that when I try to load it, it give me an error of Image
> not recognized or bad extension.
>
> Do I need anything else to load this images using GDAL?

Hello,
What OS are you using ?
What version of GDAL are you using ?
Did you compile GDAL yourself, or did you use a precompiled binary package ?

Jean-Claude 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/a645ca28/attachment.html
From gistdt08 at hotmail.es  Mon Apr 18 06:26:21 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 06:26:24 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
In-Reply-To: <BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
Message-ID: <BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>


Dear Jean-Claude,I'm using GDAL 1.8.0, with the csharp dlls loaded into my project.I can load another images but ECW I cannot load into my project.I copy the gdal folder into my bin project folder, I reference the gdal_csharp.dll in it, and activate the gdal in the code:            Dim gdal As String = ";"
            Dim ruta As String = Environment.GetEnvironmentVariable("PATH")
            gdal &= Application.StartupPath & "\GDALx86"
            ruta &= ";" & gdal
            Environment.SetEnvironmentVariable("PATH", ruta)Is needed another dll as the libecwj2.dll?Is supported by GDAL this images actually? In the support formats you can find ECW file supported.I'm using WindowsXP 32bits, and OsGeo.Gdal, OsGeo.OGR, y OsGeo.OSR namespaces.Thanks in advanced.Francisco J.
Le 18/04/2011 11:45, Francisco Jos? Reyes Peralta a ?crit :
> Dear friends,
>
> I'm reading the GDAL documentation, and I'm trying to represent a ECW
> image into a Bitmap in C#.
>
> The problem is that when I try to load it, it give me an error of Image
> not recognized or bad extension.
>
> Do I need anything else to load this images using GDAL?

Hello,
What OS are you using ?
What version of GDAL are you using ?
Did you compile GDAL yourself, or did you use a precompiled binary package ?

Jean-Claude 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/c401766a/attachment.html
From even.rouault at mines-paris.org  Mon Apr 18 06:53:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 18 06:53:46 2011
Subject: [gdal-dev] GeoTiff and the 4th band
In-Reply-To: <BANLkTim7wyj2nyQEKp8=XPa8PGBy8DzhEw@mail.gmail.com>
References: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
	<1303117011.4dabfcd3cf494@webmail.free.fr>
	<BANLkTi=MfVW04Mu9zt_5T1fsHCx_=pD4QA@mail.gmail.com>
	<1303120079.4dac08cf61232@webmail.free.fr>
	<BANLkTim7wyj2nyQEKp8=XPa8PGBy8DzhEw@mail.gmail.com>
Message-ID: <1303124018.4dac1832029fd@webmail.free.fr>

Selon Nicolas Mayer <nmayer31000@gmail.com>:

> Even, Thank you very much !
>
> With the two creation options : PHOTOMETRIC=RGB and ALPHA=NO, I obtain the
> same behaviour I whish.
>
> Can you explain me where you found this answer ? (to help me to become more
> autonomous with GDAL)
>

Well, for an advanced question like this... by looking directly at the logic
exposed in the source code : between the lines 6809 and 6960 of
http://trac.osgeo.org/gdal/export/22203/trunk/gdal/frmts/gtiff/geotiff.cpp
From nmayer31000 at gmail.com  Mon Apr 18 07:09:57 2011
From: nmayer31000 at gmail.com (Nicolas Mayer)
Date: Mon Apr 18 07:10:18 2011
Subject: [gdal-dev] GeoTiff and the 4th band
In-Reply-To: <1303124018.4dac1832029fd@webmail.free.fr>
References: <BANLkTinpRpzPQHfvUF0Y44d=h69MtSPz2A@mail.gmail.com>
	<1303117011.4dabfcd3cf494@webmail.free.fr>
	<BANLkTi=MfVW04Mu9zt_5T1fsHCx_=pD4QA@mail.gmail.com>
	<1303120079.4dac08cf61232@webmail.free.fr>
	<BANLkTim7wyj2nyQEKp8=XPa8PGBy8DzhEw@mail.gmail.com>
	<1303124018.4dac1832029fd@webmail.free.fr>
Message-ID: <BANLkTinbgL=0QNva2Pu-LRS2+O=Ud0+ihQ@mail.gmail.com>

OK. Thank you very much.
Nicky


2011/4/18 Even Rouault <even.rouault@mines-paris.org>

> Selon Nicolas Mayer <nmayer31000@gmail.com>:
>
> > Even, Thank you very much !
> >
> > With the two creation options : PHOTOMETRIC=RGB and ALPHA=NO, I obtain
> the
> > same behaviour I whish.
> >
> > Can you explain me where you found this answer ? (to help me to become
> more
> > autonomous with GDAL)
> >
>
> Well, for an advanced question like this... by looking directly at the
> logic
> exposed in the source code : between the lines 6809 and 6960 of
> http://trac.osgeo.org/gdal/export/22203/trunk/gdal/frmts/gtiff/geotiff.cpp
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/d30a03af/attachment.html
From jrepetto at free.fr  Mon Apr 18 08:19:42 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Apr 18 08:19:50 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>
Message-ID: <4DAC2C5E.40901@free.fr>

Le 18/04/2011 12:26, Francisco Jos? Reyes Peralta a ?crit :
>
> I'm using GDAL 1.8.0, with the csharp dlls loaded into my project.
>
> I can load another images but ECW I cannot load into my project.
>
> Is needed another dll as the*libecwj2.dll*?
>
> Is supported by GDAL this images actually? In the support formats you can find ECW file supported.
>
> I'm using WindowsXP 32bits, and OsGeo.Gdal, OsGeo.OGR, y OsGeo.OSR namespaces.

Francisco,

Try to install gdal-18-1600-core.msi and gdal-18-1600-ecw.msi that 
you'll find on the page :
<http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1600-gdal-1-8-0-mapserver-5-6-6.zip>

Jean-Claude

From gistdt08 at hotmail.es  Mon Apr 18 10:28:21 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 10:28:24 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <4DAC2C5E.40901@free.fr>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>, <4DAC2C5E.40901@free.fr>
Message-ID: <BLU150-w466E42C2FA7F3434D06D4A9910@phx.gbl>


Many thanks Jean-Claude,
I will try it and comment here.
Francisco J.

> Date: Mon, 18 Apr 2011 14:19:42 +0200
> From: jrepetto@free.fr
> To: gdal-dev@lists.osgeo.org
> CC: gistdt08@hotmail.es
> Subject: Re: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
> 
> Le 18/04/2011 12:26, Francisco Jos? Reyes Peralta a ?crit :
> >
> > I'm using GDAL 1.8.0, with the csharp dlls loaded into my project.
> >
> > I can load another images but ECW I cannot load into my project.
> >
> > Is needed another dll as the*libecwj2.dll*?
> >
> > Is supported by GDAL this images actually? In the support formats you can find ECW file supported.
> >
> > I'm using WindowsXP 32bits, and OsGeo.Gdal, OsGeo.OGR, y OsGeo.OSR namespaces.
> 
> Francisco,
> 
> Try to install gdal-18-1600-core.msi and gdal-18-1600-ecw.msi that 
> you'll find on the page :
> <http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1600-gdal-1-8-0-mapserver-5-6-6.zip>
> 
> Jean-Claude
> 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/6dc3d8d1/attachment.html
From gistdt08 at hotmail.es  Mon Apr 18 11:01:46 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 11:01:48 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <4DAC2C5E.40901@free.fr>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>, <4DAC2C5E.40901@free.fr>
Message-ID: <BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>


Dear friend,
Using, to try gdal 1.8, the following code i cannot find the ECW driver in the list of drivers.

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load        Dim GDAL As String = ";"        GDAL &= Application.StartupPath & "\GDAL"        Dim CAMINO As String = Environment.GetEnvironmentVariable("PATH")        CAMINO &= ";" & GDAL        Environment.SetEnvironmentVariable("PATH", CAMINO)        OSGeo.GDAL.Gdal.AllRegister()
        Dim drvcount As Integer = OSGeo.GDAL.Gdal.GetDriverCount        Dim listadrivers As New List(Of String)
        For i As Integer = 0 To drvcount - 1            listadrivers.Add(OSGeo.GDAL.Gdal.GetDriver(i).LongName)
        Next
        listadrivers.Sort()

        For Each item In listadrivers            ComboBox1.Items.Add(item.ToString)        Next
    End Sub
I put in the Bin\Debug\ folder the GDAL and reference de gdal_csharp.dll file in my CSharp project and doesn't work.
Anybody have the same problem?
I install the exe that you tell me and copy later the gdal folder into my project. Also I reference and activate gdal in my form_load event.
Thanks in advanced.
Francisco J.
> Date: Mon, 18 Apr 2011 14:19:42 +0200
> From: jrepetto@free.fr
> To: gdal-dev@lists.osgeo.org
> CC: gistdt08@hotmail.es
> Subject: Re: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
> 
> Le 18/04/2011 12:26, Francisco Jos? Reyes Peralta a ?crit :
> >
> > I'm using GDAL 1.8.0, with the csharp dlls loaded into my project.
> >
> > I can load another images but ECW I cannot load into my project.
> >
> > Is needed another dll as the*libecwj2.dll*?
> >
> > Is supported by GDAL this images actually? In the support formats you can find ECW file supported.
> >
> > I'm using WindowsXP 32bits, and OsGeo.Gdal, OsGeo.OGR, y OsGeo.OSR namespaces.
> 
> Francisco,
> 
> Try to install gdal-18-1600-core.msi and gdal-18-1600-ecw.msi that 
> you'll find on the page :
> <http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1600-gdal-1-8-0-mapserver-5-6-6.zip>
> 
> Jean-Claude
> 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/9c4a347c/attachment-0001.html
From gistdt08 at hotmail.es  Mon Apr 18 12:05:04 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 12:05:05 2011
Subject: [gdal-dev] How to reference the GDAL downloaded folder into my
 CSharp application?
Message-ID: <blu150-w6565EFDFB498B2C6F6A652A9910@phx.gbl>


Dear friends,
I downloaded the files from
http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1600-gdal-1-8-0-mapserver-5-6-6.zip
I install in C:\Archivos de Programa\GDAL folder.
Later I create a CSharp program and add the gdal_csharp.dll, ogr_csharp.dll and osr_csharp.dll into my references.
At last time I put the GDAL into my BIN\DEBUG folder but how can I proceed to recognize the ECW plugins folder and all needed to work  with GDAL, OSR, and OGR items?
I'm viewing something SetEnviromentVariable and so much but I don't understand very well how reference GDAL with these options.
Thanks in advanced.
Francisco J. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/8674e233/attachment.html
From jrepetto at free.fr  Mon Apr 18 12:12:36 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Apr 18 12:12:44 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>,
	<4DAC2C5E.40901@free.fr> <BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>
Message-ID: <4DAC62F4.50601@free.fr>

Le 18/04/2011 17:01, Francisco Jos? Reyes Peralta a ?crit :
> Dear friend,
>
> Using, to try gdal 1.8, the following code i cannot find the ECW driver
> in the list of drivers.

Have you checked if the command :
gdalinfo --formats
reports that the ECW format is supported ?
From gistdt08 at hotmail.es  Mon Apr 18 12:14:51 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 12:14:52 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <4DAC62F4.50601@free.fr>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>, <4DAC2C5E.40901@free.fr>
	<BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>,<4DAC62F4.50601@free.fr>
Message-ID: <BLU150-w195E5CACF518532432E902A9910@phx.gbl>


Dear Jean-Claude,
How can I put this command?
If i run a for loop for all drivers, I cannot find the ECW plugin.
I put another post to learn how can I install into my application the GDAL plugins to recognize all formats.
Thanks for your help.
Francisco J.

> Date: Mon, 18 Apr 2011 18:12:36 +0200
> From: jrepetto@free.fr
> To: gistdt08@hotmail.es
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
> 
> Le 18/04/2011 17:01, Francisco Jos? Reyes Peralta a ?crit :
> > Dear friend,
> >
> > Using, to try gdal 1.8, the following code i cannot find the ECW driver
> > in the list of drivers.
> 
> Have you checked if the command :
> gdalinfo --formats
> reports that the ECW format is supported ?
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/7dbfbf0f/attachment.html
From gistdt08 at hotmail.es  Mon Apr 18 12:17:15 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Mon Apr 18 12:17:17 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <4DAC62F4.50601@free.fr>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>, <4DAC2C5E.40901@free.fr>
	<BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>,<4DAC62F4.50601@free.fr>
Message-ID: <BLU150-w50A12D2623968850BC9C2EA9910@phx.gbl>


I put this commadn in my cmd and it returns ecw plugins.
But how can I setup into my CSharp application?
I installed all GDAL installers in c:\archivos de programa\gdal       folder.
Thanks in advanced.Francisco J.

> Date: Mon, 18 Apr 2011 18:12:36 +0200
> From: jrepetto@free.fr
> To: gistdt08@hotmail.es
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
> 
> Le 18/04/2011 17:01, Francisco Jos? Reyes Peralta a ?crit :
> > Dear friend,
> >
> > Using, to try gdal 1.8, the following code i cannot find the ECW driver
> > in the list of drivers.
> 
> Have you checked if the command :
> gdalinfo --formats
> reports that the ECW format is supported ?
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/6457e85c/attachment.html
From jrepetto at free.fr  Mon Apr 18 13:35:07 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Apr 18 13:35:16 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <BLU150-w50A12D2623968850BC9C2EA9910@phx.gbl>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>,
	<4DAC2C5E.40901@free.fr>	<BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>,
	<4DAC62F4.50601@free.fr> <BLU150-w50A12D2623968850BC9C2EA9910@phx.gbl>
Message-ID: <4DAC764B.9020501@free.fr>

On 04/18/11 18:17, Francisco Jos? Reyes Peralta wrote:
> I put this commadn in my cmd and it returns ecw plugins.
>
> But how can I setup into my CSharp application?

Have you set the GDAL_DRIVER_PATH environment variable ?
I dont know if it is necessary for C# bindings, but it is for Python 
bindings.

Jean-Claude
From nhatzop at gmail.com  Mon Apr 18 17:52:01 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Mon Apr 18 17:52:03 2011
Subject: [gdal-dev] modis level1b files
Message-ID: <BANLkTimMwNixHaTL_WLFPpmW4rkg4Ys5Xw@mail.gmail.com>

Hi,

I have a mod03 hdf file which has the geolocation of level1b modis file
and I have a mod02 hdf file which has the bands
how it's possible to combine this two files in order to have a nice geotif?

an hdfeos file has the bands and the geolocation, in my case the data are
separate.

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/8134ce65/attachment.html
From gistdt08 at hotmail.es  Tue Apr 19 02:00:39 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 02:00:40 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <4DAC764B.9020501@free.fr>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>, <4DAC2C5E.40901@free.fr>
	<BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>,<4DAC62F4.50601@free.fr>
	<BLU150-w50A12D2623968850BC9C2EA9910@phx.gbl>,
	<4DAC764B.9020501@free.fr>
Message-ID: <BLU150-w54A1FBE2F8BE6CD71B451CA9900@phx.gbl>


Dear friends, anybody can help me to setup the GDAL_DRIVER_PATH environment and GDAL_DATA_PATH and others variables?
I don't know how can I do.
Thanks.Francisco J.

> Date: Mon, 18 Apr 2011 19:35:07 +0200
> From: jrepetto@free.fr
> To: gistdt08@hotmail.es; gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
> 
> On 04/18/11 18:17, Francisco Jos? Reyes Peralta wrote:
> > I put this commadn in my cmd and it returns ecw plugins.
> >
> > But how can I setup into my CSharp application?
> 
> Have you set the GDAL_DRIVER_PATH environment variable ?
> I dont know if it is necessary for C# bindings, but it is for Python 
> bindings.
> 
> Jean-Claude
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/0d66fa67/attachment.html
From jrepetto at free.fr  Tue Apr 19 02:13:14 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Apr 19 02:13:24 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <BLU150-w54A1FBE2F8BE6CD71B451CA9900@phx.gbl>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>,
	<4DAC2C5E.40901@free.fr>	<BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>,
	<4DAC62F4.50601@free.fr>	<BLU150-w50A12D2623968850BC9C2EA9910@phx.gbl>,
	<4DAC764B.9020501@free.fr>
	<BLU150-w54A1FBE2F8BE6CD71B451CA9900@phx.gbl>
Message-ID: <4DAD27FA.7070709@free.fr>

On 04/19/11 08:00, Francisco Jos? Reyes Peralta wrote:
> Dear friends, anybody can help me to setup the GDAL_DRIVER_PATH
> environment and GDAL_DATA_PATH and others variables?
>
> I don't know how can I do.

You can find these informations in the Windows XP documentation.
From nhatzop at gmail.com  Tue Apr 19 02:17:36 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Apr 19 02:17:42 2011
Subject: [gdal-dev] Modis data level1b
Message-ID: <BANLkTikz3vsg=NSHvWks96ce7zCVWau7ag@mail.gmail.com>

Hi,

I have modis level1b data and I have two hdf files a mod03 with the
georeference
and a mod02 with the bands how I can combine these files to make a nice
geotif in gdal?

note: hdfeos files are files with the georeference and the bands but for
disk space reasons I have two files

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110418/51917b4d/attachment-0001.html
From gistdt08 at hotmail.es  Tue Apr 19 02:24:45 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 02:24:48 2011
Subject: [gdal-dev] How can I do to load into a Bitmap an ECW image from
	GDAL?
In-Reply-To: <4DAD27FA.7070709@free.fr>
References: <20110418095812.74D22E020B9@lists.osgeo.org>,
	<BLU150-w321CB67E3F74E4FD73BCF0A9910@phx.gbl>
	<BLU150-w229627D93ED3FE7B96AFC1A9910@phx.gbl>, <4DAC2C5E.40901@free.fr>
	<BLU150-w96BB2FE6EE4AC68046A72A9910@phx.gbl>,<4DAC62F4.50601@free.fr>
	<BLU150-w50A12D2623968850BC9C2EA9910@phx.gbl>,
	<4DAC764B.9020501@free.fr>
	<BLU150-w54A1FBE2F8BE6CD71B451CA9900@phx.gbl>,
	<4DAD27FA.7070709@free.fr>
Message-ID: <BLU150-w2A2A9FD6F96048164F5CAA9900@phx.gbl>


Dear friend,
I got it finally
        Dim gdal_bin_path As String = "c:\myGdalFolder\GDAL\"        Dim gdal_driver_path As String = "c:\myGdalFolder\GDAL\gdalplugins"        Dim path = Environment.GetEnvironmentVariable("PATH")        If Not (path.Contains(gdal_bin_path)) Then            Environment.SetEnvironmentVariable("PATH", gdal_bin_path & ";" & path)        End If
        OSGeo.GDAL.Gdal.SetConfigOption("GDAL_DRIVER_PATH", gdal_driver_path)
        OSGeo.GDAL.Gdal.AllRegister()
        Dim lista As New List(Of String)        For i As Integer = 0 To OSGeo.GDAL.Gdal.GetDriverCount - 1            lista.Add(OSGeo.GDAL.Gdal.GetDriver(i).ShortName)        Next
        lista.Sort()

        For Each item In lista            ListBox1.Items.Add(item)        Next
Many thanks.
Francisco J.
> Date: Tue, 19 Apr 2011 08:13:14 +0200
> From: jrepetto@free.fr
> To: gistdt08@hotmail.es; gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] How can I do to load into a Bitmap an ECW image from GDAL?
> 
> On 04/19/11 08:00, Francisco Jos? Reyes Peralta wrote:
> > Dear friends, anybody can help me to setup the GDAL_DRIVER_PATH
> > environment and GDAL_DATA_PATH and others variables?
> >
> > I don't know how can I do.
> 
> You can find these informations in the Windows XP documentation.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/0a22fd83/attachment.html
From Josh.Vote at csiro.au  Tue Apr 19 05:01:21 2011
From: Josh.Vote at csiro.au (Josh.Vote@csiro.au)
Date: Tue Apr 19 05:02:28 2011
Subject: [gdal-dev] gdal_translate segfault with large netCDF
Message-ID: <379916DAEE752C49BC25377067B2B8ED261DE06DC5@EXWA-MBX01.nexus.csiro.au>

Hi,

I'm new to GDAL so please forgive any glaring ignorance :)

Currently I have an 8GB ER Mapper (ERS) dataset that I want to convert to a NetCDF file with gdal_translate which always results in a segfault when using the following command.

gdal_translate -of netCDF input.ers output.nc

Whereas translating only a small <4B subset of the dataset works fine.

Now I've been doing a bit of reading and I know that netcdf 3.6.2 and below doesn't support variables greater than 4GB however I've been doing the translations with the Debian libnetcdf6 package (which I believe includes netCDF 4.1.1 and running 'ncgen -version' confirms this). I am operating under the impression that netCDF 4.1.1 should be able to handle netCDF files of this size without trouble.

Now I've tested gdal_translate from a variety of builds and they all produce the same problem

*         gdal-trunk revision 22206 - built from source

*         gdal 1.8 - built from source

*         Using the Debian stable/testing gdal-bin binary packages which bundle gdal 1.6.3-4 and gdal 1.7.3-2 respectively.
Am I doing anything wrong/operating under incorrect pretenses regarding netCDF > 4GB files or is this a genuine problem with gdal_translate? Also are there any logs I could examine for more information?

Thanks for any help
Josh Vote



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/1140d42b/attachment.html
From gistdt08 at hotmail.es  Tue Apr 19 05:37:25 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 05:37:27 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
Message-ID: <BLU150-w312FED217D822A9A253552A9900@phx.gbl>


Dear friends,

I'm vieweing the GDALDatasetRasterIO.cs from the Csharp samples of GDAL and I'm getting an error in the following line

Bitmap bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);

In the pixelFormat argument.

I'm trying to load an ECW image into a BitMap.

Anybody can help me about this error?

This line is related with the pixelFormat = PixelFormat.Format24bppRgb; line

Thanks in advanced.

Francisco J. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/6523a1b6/attachment.html
From mickamusset at gmail.com  Tue Apr 19 06:31:58 2011
From: mickamusset at gmail.com (Micka)
Date: Tue Apr 19 06:32:01 2011
Subject: [gdal-dev] geos for windows ce
In-Reply-To: <BANLkTi=gV0ugs_-MidNbuYqUHYQ+q=50sA@mail.gmail.com>
References: <BANLkTi=gV0ugs_-MidNbuYqUHYQ+q=50sA@mail.gmail.com>
Message-ID: <BANLkTimxWpKN9x0JTso+UfrY1cxHKYdJng@mail.gmail.com>

Hello everyone, i would like to know if geos will be enabled one day for
GDAL on windows ce ?

I was planning to develop my shapefile viewer on windows ce.

I was able to open a shapefile without problem, but because there is too
much of vector inside it takes a lot of time to read it.

I was planning to use the object: polygon as a window and detect with the
function contain if the linestring is inside of my windows, if it was the
case, i was planning to draw the linestring.


but because geos is not enabled on GDAL 1.4 ( windows ce ) , i can't use
this method.


thx anyway,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/119beab3/attachment.html
From szekerest at gmail.com  Tue Apr 19 06:48:54 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr 19 06:48:56 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BLU150-w312FED217D822A9A253552A9900@phx.gbl>
References: <BLU150-w312FED217D822A9A253552A9900@phx.gbl>
Message-ID: <BANLkTi=A6Ydr=0XbHxG020BcaUSsCDZMZw@mail.gmail.com>

2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>

>  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp
> samples of GDAL and I'm getting an error in the following line *Bitmap
> bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the *
> pixelFormat* argument.
>

Hi,

What is the error message specifically?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
From gistdt08 at hotmail.es  Tue Apr 19 06:56:30 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 06:56:32 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
Message-ID: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>


The parameter is not valid is the error that I get.I use an adaptation of the source .cs code in VB.NET.Here is part of the code:
        Dim pixelFormat As PixelFormat	Dim dataType As DataType
        Dim pixelSpace As Integer

        If isIndexed Then
            pixelFormat = PixelFormat.Format8bppIndexed
            dataType = DataType.GDT_Byte
            pixelSpace = 1
        Else
            If channelCount = 1 Then
                If channelSize > 8 Then
                    pixelFormat = PixelFormat.Format16bppGrayScale
                    dataType = DataType.GDT_Int16
                    pixelSpace = 2
                Else
                    pixelFormat = PixelFormat.Format24bppRgb
                    channelCount = 3
                    dataType = DataType.GDT_Byte
                    pixelSpace = 3
                End If
            Else
                If hasAlpha Then
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format64bppArgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 8
                    Else
                        pixelFormat = PixelFormat.Format32bppArgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 4
                    End If
                    channelCount = 4
                Else
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format48bppRgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 6
                    Else
                        pixelFormat = PixelFormat.Format24bppRgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 3
                    End If
                    channelCount = 3
                End If
            End If
        End If

And the Error is in the following line:
Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
Is possible to read the dataset and write to a bitmap or picturebox without save as file?
Thanks for your reply.
Francisco J.

2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es>

>  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp
> samples of GDAL and I'm getting an error in the following line *Bitmap
> bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the *
> pixelFormat* argument.
>

Hi,

What is the error message specifically?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/73155457/attachment.html
From aborruso at tin.it  Tue Apr 19 07:41:09 2011
From: aborruso at tin.it (iomeneandrei)
Date: Tue Apr 19 07:41:11 2011
Subject: [gdal-dev] ogr2ogr and spatialite
Message-ID: <1303213269682-6286920.post@n2.nabble.com>

Dear all,
I'm using ogr2ogr (GDAL 1.8.0) to import a shapefile in a spatialite db.

If I use spatialite gui to make it (without check "with spatial index"
option), I have only a new one table in my sqlite db.

If I use ogr2ogr "ogr2ogr -append -s_srs EPSG:3004 -t_srs EPSG:3004 -f
SQLite -dsco SPATIALITE=NO db.sqlite input.shp", I have as output also the
spatial index tables. Is it normal?
Is it possible to use ogr2ogr without have in the db the spatial index
tables?

Best regards,

Andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-and-spatialite-tp6286920p6286920.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Tue Apr 19 07:48:23 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr 19 07:48:26 2011
Subject: [gdal-dev] Windows SDK support (at vbkto.dyndns.org) site has been
	relocated
Message-ID: <BANLkTik4GHc7HuTNapnDVavGfeRuKP-sxQ@mail.gmail.com>

Looks like my account on dyndns has been lost :-(  Since I'm getting tired
to update the account in every month, I've already registered a domain to
point to this location which is:

http://www.gisinternals.com/sdk/

If you have any links or bookmarks to point to the support site then update
them to refer to this new location. The old URL is considered to be
deprecated from now.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/6aea6e7b/attachment.html
From even.rouault at mines-paris.org  Tue Apr 19 07:53:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 19 07:53:37 2011
Subject: [gdal-dev] ogr2ogr and spatialite
In-Reply-To: <1303213269682-6286920.post@n2.nabble.com>
References: <1303213269682-6286920.post@n2.nabble.com>
Message-ID: <1303214008.4dad77b90016a@webmail.free.fr>

Selon iomeneandrei <aborruso@tin.it>:

> Dear all,
> I'm using ogr2ogr (GDAL 1.8.0) to import a shapefile in a spatialite db.
>
> If I use spatialite gui to make it (without check "with spatial index"
> option), I have only a new one table in my sqlite db.
>
> If I use ogr2ogr "ogr2ogr -append -s_srs EPSG:3004 -t_srs EPSG:3004 -f
> SQLite -dsco SPATIALITE=NO db.sqlite input.shp", I have as output also the
> spatial index tables. Is it normal?
> Is it possible to use ogr2ogr without have in the db the spatial index
> tables?

I'm a bit confused by what you are trying to do, probably because I'm at the
right side of the wire ;-).

Well if I've well understood, before running ogr2ogr, the db.sqlite file is a
file created by spatiliate gui, right ?

ok, then, as the output dataset of ogr2ogr is already existing, dataset creation
options ( specified with -dsco ) have of course no effect and I'm not sure why
you specified it if your database is already spatialite ... It can't "revert" a
spatialite database into a "regular" sqlite one.

Now, as indicated in http://gdal.org/ogr/drv_sqlite.html, the creation of
spatial index for spatialite databases depends on the value of the SPATIAL_INDEX
*layer* creation option (so specificed with -lco), and when not specified, it
defaults to YES.

So try replacing -dsco SPATIALITE=NO with -lco SPATIAL_INDEX=NO

>
> Best regards,
>
> Andrea
>
> -----
> Andrea Borruso
>
> ----------------------------------------------------
> email: aborruso@tin.it
> website: http://blog.spaziogis.it
> my 2.0 life: http://aborruso.spaziogis.it
> feed: http://feeds2.feedburner.com/Tanto
> 38?? 7' 48" N, 13?? 21' 9" E
> ----------------------------------------------------
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-and-spatialite-tp6286920p6286920.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From aborruso at tin.it  Tue Apr 19 08:27:24 2011
From: aborruso at tin.it (iomeneandrei)
Date: Tue Apr 19 08:27:26 2011
Subject: [gdal-dev] Re: ogr2ogr and spatialite
In-Reply-To: <1303214008.4dad77b90016a@webmail.free.fr>
References: <1303213269682-6286920.post@n2.nabble.com>
	<1303214008.4dad77b90016a@webmail.free.fr>
Message-ID: <1303216044611-6287059.post@n2.nabble.com>

Hi Even,

Even Rouault wrote:
> 
> So try replacing -dsco SPATIALITE=NO with -lco SPATIAL_INDEX=NO
> 

my fault, I'm stupid :)

Thank you very much


-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-and-spatialite-tp6286920p6287059.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Apr 19 10:00:27 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 19 10:00:32 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>
Message-ID: <BANLkTinKTMCDUZ0woWBHObBpXGV9wjkLPw@mail.gmail.com>

Francisco,

Can you provide the whole file?

2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>

>  The parameter is not valid is the error that I get.
>
> I use an adaptation of the source .cs code in VB.NET.
>
> Here is part of the code:
>
>
>         Dim pixelFormat As PixelFormat
>
> 	Dim dataType As DataType
>         Dim pixelSpace As Integer
>
>         If isIndexed Then
>             pixelFormat = PixelFormat.Format8bppIndexed
>             dataType = DataType.GDT_Byte
>             pixelSpace = 1
>         Else
>             If channelCount = 1 Then
>                 If channelSize > 8 Then
>                     pixelFormat = PixelFormat.Format16bppGrayScale
>                     dataType = DataType.GDT_Int16
>                     pixelSpace = 2
>                 Else
>                     pixelFormat = PixelFormat.Format24bppRgb
>                     channelCount = 3
>                     dataType = DataType.GDT_Byte
>                     pixelSpace = 3
>                 End If
>             Else
>                 If hasAlpha Then
>                     If channelSize > 8 Then
>                         pixelFormat = PixelFormat.Format64bppArgb
>                         dataType = DataType.GDT_UInt16
>                         pixelSpace = 8
>                     Else
>                         pixelFormat = PixelFormat.Format32bppArgb
>                         dataType = DataType.GDT_Byte
>                         pixelSpace = 4
>                     End If
>                     channelCount = 4
>                 Else
>                     If channelSize > 8 Then
>                         pixelFormat = PixelFormat.Format48bppRgb
>                         dataType = DataType.GDT_UInt16
>                         pixelSpace = 6
>                     Else
>                         pixelFormat = PixelFormat.Format24bppRgb
>                         dataType = DataType.GDT_Byte
>                         pixelSpace = 3
>                     End If
>                     channelCount = 3
>                 End If
>             End If
>         End If
> *
>
> And the Error is in the following line:
>
> *
>
>
> Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
>
>
> Is possible to read the dataset and write to a bitmap or picturebox without save as file?
>
>
> Thanks for your reply.
>
>
> Francisco J.
>
>
>
> 2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es <http://lists.osgeo.org/mailman/listinfo/gdal-dev>>
>
> >*  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp*>* samples of GDAL and I'm getting an error in the following line *Bitmap*>* bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the **>* pixelFormat* argument.*>**
> Hi,
>
> What is the error message specifically?
>
> Best regards,
>
> Tamas
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/710cd667/attachment-0001.html
From szekerest at gmail.com  Tue Apr 19 10:10:27 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr 19 10:10:32 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>
Message-ID: <BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>

Not sure what is the actual value of 'pixelFormat__1' in your program.

Best regards,

Tamas


2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>

>  The parameter is not valid is the error that I get.
>
> I use an adaptation of the source .cs code in VB.NET.
>
> Here is part of the code:
>
>
>         Dim pixelFormat As PixelFormat
>
> 	Dim dataType As DataType
>         Dim pixelSpace As Integer
>
>         If isIndexed Then
>             pixelFormat = PixelFormat.Format8bppIndexed
>             dataType = DataType.GDT_Byte
>             pixelSpace = 1
>         Else
>             If channelCount = 1 Then
>                 If channelSize > 8 Then
>                     pixelFormat = PixelFormat.Format16bppGrayScale
>                     dataType = DataType.GDT_Int16
>                     pixelSpace = 2
>                 Else
>                     pixelFormat = PixelFormat.Format24bppRgb
>                     channelCount = 3
>                     dataType = DataType.GDT_Byte
>                     pixelSpace = 3
>                 End If
>             Else
>                 If hasAlpha Then
>                     If channelSize > 8 Then
>                         pixelFormat = PixelFormat.Format64bppArgb
>                         dataType = DataType.GDT_UInt16
>                         pixelSpace = 8
>                     Else
>                         pixelFormat = PixelFormat.Format32bppArgb
>                         dataType = DataType.GDT_Byte
>                         pixelSpace = 4
>                     End If
>                     channelCount = 4
>                 Else
>                     If channelSize > 8 Then
>                         pixelFormat = PixelFormat.Format48bppRgb
>                         dataType = DataType.GDT_UInt16
>                         pixelSpace = 6
>                     Else
>                         pixelFormat = PixelFormat.Format24bppRgb
>                         dataType = DataType.GDT_Byte
>                         pixelSpace = 3
>                     End If
>                     channelCount = 3
>                 End If
>             End If
>         End If
> *
>
> And the Error is in the following line:
>
> *
>
>
> Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
>
>
> Is possible to read the dataset and write to a bitmap or picturebox without save as file?
>
>
> Thanks for your reply.
>
>
> Francisco J.
>
>
>
> 2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es <http://lists.osgeo.org/mailman/listinfo/gdal-dev>>
>
> >*  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp*>* samples of GDAL and I'm getting an error in the following line *Bitmap*>* bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the **>* pixelFormat* argument.*>**
> Hi,
>
> What is the error message specifically?
>
> Best regards,
>
> Tamas
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/a21155de/attachment.html
From gistdt08 at hotmail.es  Tue Apr 19 10:41:54 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 10:41:56 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>,
	<BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
Message-ID: <BLU150-w38A09700B0BE0B28908762A9900@phx.gbl>


Sorry, tomorrow in the morning pass you the entire code and the value of pixelFormat__1 because the code is in my office.
Thanks for your reply.
Francisco J.
Date: Tue, 19 Apr 2011 16:10:27 +0200
Subject: Re: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
From: szekerest@gmail.com
To: gistdt08@hotmail.es
CC: gdal-dev@lists.osgeo.org

Not sure what is the actual value of 'pixelFormat__1' in your program.

Best regards,

Tamas


2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>






The parameter is not valid is the error that I get.I use an adaptation of the source .cs code in VB.NET.
Here is part of the code:
        Dim pixelFormat As PixelFormat	Dim dataType As DataType
        Dim pixelSpace As Integer

        If isIndexed Then
            pixelFormat = PixelFormat.Format8bppIndexed
            dataType = DataType.GDT_Byte
            pixelSpace = 1
        Else
            If channelCount = 1 Then
                If channelSize > 8 Then
                    pixelFormat = PixelFormat.Format16bppGrayScale
                    dataType = DataType.GDT_Int16
                    pixelSpace = 2
                Else
                    pixelFormat = PixelFormat.Format24bppRgb
                    channelCount = 3
                    dataType = DataType.GDT_Byte
                    pixelSpace = 3
                End If
            Else
                If hasAlpha Then
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format64bppArgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 8
                    Else
                        pixelFormat = PixelFormat.Format32bppArgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 4
                    End If
                    channelCount = 4
                Else
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format48bppRgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 6
                    Else
                        pixelFormat = PixelFormat.Format24bppRgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 3
                    End If
                    channelCount = 3
                End If
            End If
        End If

And the Error is in the following line:
Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
Is possible to read the dataset and write to a bitmap or picturebox without save as file?

Thanks for your reply.
Francisco J.

2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es>

>  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp
> samples of GDAL and I'm getting an error in the following line *Bitmap
> bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the *
> pixelFormat* argument.
>

Hi,

What is the error message specifically?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
 		 	   		  

_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev


 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/355f992c/attachment.html
From warmerdam at pobox.com  Tue Apr 19 11:57:51 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 19 11:57:55 2011
Subject: [gdal-dev] gdal_translate segfault with large netCDF
In-Reply-To: <379916DAEE752C49BC25377067B2B8ED261DE06DC5@EXWA-MBX01.nexus.csiro.au>
References: <379916DAEE752C49BC25377067B2B8ED261DE06DC5@EXWA-MBX01.nexus.csiro.au>
Message-ID: <4DADB0FF.8050001@pobox.com>

On 11-04-19 05:01 AM, Josh.Vote@csiro.au wrote:
> Hi,
>
> I?m new to GDAL so please forgive any glaring ignorance J
>
> Currently I have an 8GB ER Mapper (ERS) dataset that I want to convert to a
> NetCDF file with gdal_translate which always results in a segfault when using
> the following command.
>
> gdal_translate -of netCDF input.ers output.nc
>
> Whereas translating only a small <4B subset of the dataset works fine.
>
> Now I?ve been doing a bit of reading and I know that netcdf 3.6.2 and below
> doesn?t support variables greater than 4GB however I?ve been doing the
> translations with the Debian libnetcdf6 package (which I believe includes
> netCDF 4.1.1 and running ?ncgen ?version? confirms this). I am operating under
> the impression that netCDF 4.1.1 should be able to handle netCDF files of this
> size without trouble.
>
> Now I?ve tested gdal_translate from a variety of builds and they all produce
> the same problem

Josh,

I don't see any immediately obvious problems in the way we call the netcdf
API in netcdfdataset.cpp's CreateCopy method.  I would suggest you file a
ticket on the issue, and a developer can try to reproduce the problem.

I would like to suggest that you do a gdal_translate from a subset of the
ERS file at the bottom right corner of the source just to ensure that it
isn't a problem with reading past the 4GB mark in the ERS file.

I seem to have 3.6.3 of the netcdf library so I can't trivially check
this on my system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From knutfrodesoppel at hotmail.com  Tue Apr 19 13:24:24 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Tue Apr 19 13:24:38 2011
Subject: [gdal-dev] dev-version of HDF4
Message-ID: <iokgg8$qr6$1@dough.gmane.org>

I am trying to compile GDAL from source with support for HDF4 with:

./configure --with-hdf4

but get complaints about missing libraries, see extract from config.log:

ld: library not found for -lmfhdfalt
...
ld: library not found for -lmfhdf
...
ld: library not found for -lhdf4
...
ld: library not found for -lmfhdf
configure:19940: checking for SDreaddata in -lmfhdf
configure:19965: gcc -o conftest -g -O2   conftest.c -lmfhdf -ldf -lsz 
-ljpeg -lz -lz -lpthread -ldl  >&5
ld: library not found for -lmfhdf
configure:20009: error: HDF4 support requested with arg "yes", but 
neither hdf4 nor mfhdf lib found


Similar errors are also reported by others, e.g. this one using 
mapserver: 
http://osgeo-org.1803224.n2.nabble.com/cannot-find-lmfhdf-td5286909.html

I have tried with various versions of HDF4, both binaries and compiled 
from source. The link above (and also 
http://trac.osgeo.org/gdal/wiki/BuildingOnUnix) suggests to try a 
"hdf-dev" version. But where can I find such "dev-versions", in my case 
for Mac OS X 10.6.7?

Would it be possible to update GDAL to work with standard HDF4 libraries?


Best regards from Knut-Frode

From ksshannon at gmail.com  Tue Apr 19 14:35:27 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Apr 19 14:35:45 2011
Subject: [gdal-dev] gdal_translate segfault with large netCDF
In-Reply-To: <4DADB0FF.8050001@pobox.com>
References: <379916DAEE752C49BC25377067B2B8ED261DE06DC5@EXWA-MBX01.nexus.csiro.au>
	<4DADB0FF.8050001@pobox.com>
Message-ID: <BANLkTik7m=aC0ebUS=K-C1bGuJ-4qv-WDQ@mail.gmail.com>

Josh,
As frank said, file a ticket and provide the output of ncdump -h
yourfile.ncwith the ticket.  I will take a look at it as soon as I
can, although I am
pretty busy.  Thanks.

kss

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */




On Tue, Apr 19, 2011 at 09:57, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 11-04-19 05:01 AM, Josh.Vote@csiro.au wrote:
>
>> Hi,
>>
>> I?m new to GDAL so please forgive any glaring ignorance J
>>
>> Currently I have an 8GB ER Mapper (ERS) dataset that I want to convert to
>> a
>> NetCDF file with gdal_translate which always results in a segfault when
>> using
>> the following command.
>>
>> gdal_translate -of netCDF input.ers output.nc
>>
>> Whereas translating only a small <4B subset of the dataset works fine.
>>
>> Now I?ve been doing a bit of reading and I know that netcdf 3.6.2 and
>> below
>> doesn?t support variables greater than 4GB however I?ve been doing the
>> translations with the Debian libnetcdf6 package (which I believe includes
>> netCDF 4.1.1 and running ?ncgen ?version? confirms this). I am operating
>> under
>> the impression that netCDF 4.1.1 should be able to handle netCDF files of
>> this
>> size without trouble.
>>
>> Now I?ve tested gdal_translate from a variety of builds and they all
>> produce
>> the same problem
>>
>
> Josh,
>
> I don't see any immediately obvious problems in the way we call the netcdf
> API in netcdfdataset.cpp's CreateCopy method.  I would suggest you file a
> ticket on the issue, and a developer can try to reproduce the problem.
>
> I would like to suggest that you do a gdal_translate from a subset of the
> ERS file at the bottom right corner of the source just to ensure that it
> isn't a problem with reading past the 4GB mark in the ERS file.
>
> I seem to have 3.6.3 of the netcdf library so I can't trivially check
> this on my system.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/4f7763cc/attachment.html
From gistdt08 at hotmail.es  Tue Apr 19 15:27:52 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 15:27:54 2011
Subject: [gdal-dev] How load in memory bitmap without save a GDAL image
	local file?
In-Reply-To: <BANLkTimZhvExgz43KYnwmbWqwc4vwzxC+g@mail.gmail.com>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>,
	<BANLkTinKTMCDUZ0woWBHObBpXGV9wjkLPw@mail.gmail.com>,
	<BLU150-w1151ED72615F5A4592EC28A9900@phx.gbl>,
	<BANLkTimZhvExgz43KYnwmbWqwc4vwzxC+g@mail.gmail.com>
Message-ID: <BLU150-w19CBD964BE73A21107DC70A9900@phx.gbl>


Dear friends,
In the csharp sample files located in the path gdal\swig\csharp\apps\ as GDARead.cs, GDALReadDirect.cs and so much, the developer always store in a local file.
Is possible to save in a Bitmap without need of a physical file location? It is because if you need to load an up to 2GB file, how can we do it?
Thanks.Francisco J. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/32fbf2ab/attachment.html
From gistdt08 at hotmail.es  Tue Apr 19 15:33:28 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Tue Apr 19 15:33:31 2011
Subject: [gdal-dev] How load in memory bitmap without save a GDAL image
	local file?
Message-ID: <BLU150-w54AB7C2B889AFA3CF1F04FA9900@phx.gbl>


Dear friends,
In the csharp sample files located in the path gdal\swig\csharp\apps\ as GDARead.cs, GDALReadDirect.cs and so much, the developer always store in a local file.
Is possible to save in a Bitmap without need of a physical file location? It is because if you need to load an up to 2GB file, how can we do it?
Thanks.Francisco J. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/ed269cda/attachment.html
From nhatzop at gmail.com  Tue Apr 19 15:51:07 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Apr 19 15:51:10 2011
Subject: [gdal-dev] dev-version of HDF4
In-Reply-To: <iokgg8$qr6$1@dough.gmane.org>
References: <iokgg8$qr6$1@dough.gmane.org>
Message-ID: <BANLkTinpvM73b9BMNNoj5GiUCWamruLKkw@mail.gmail.com>

hdf4 libraries not found that's what the log says :)
do a
locate libhdf4
to see where the library is


On Tue, Apr 19, 2011 at 10:24 AM, Knut-Frode Dagestad <
knutfrodesoppel@hotmail.com> wrote:

> I am trying to compile GDAL from source with support for HDF4 with:
>
> ./configure --with-hdf4
>
> but get complaints about missing libraries, see extract from config.log:
>
> ld: library not found for -lmfhdfalt
> ...
> ld: library not found for -lmfhdf
> ...
> ld: library not found for -lhdf4
> ...
> ld: library not found for -lmfhdf
> configure:19940: checking for SDreaddata in -lmfhdf
> configure:19965: gcc -o conftest -g -O2   conftest.c -lmfhdf -ldf -lsz
> -ljpeg -lz -lz -lpthread -ldl  >&5
> ld: library not found for -lmfhdf
> configure:20009: error: HDF4 support requested with arg "yes", but neither
> hdf4 nor mfhdf lib found
>
>
> Similar errors are also reported by others, e.g. this one using mapserver:
> http://osgeo-org.1803224.n2.nabble.com/cannot-find-lmfhdf-td5286909.html
>
> I have tried with various versions of HDF4, both binaries and compiled from
> source. The link above (and also
> http://trac.osgeo.org/gdal/wiki/BuildingOnUnix) suggests to try a
> "hdf-dev" version. But where can I find such "dev-versions", in my case for
> Mac OS X 10.6.7?
>
> Would it be possible to update GDAL to work with standard HDF4 libraries?
>
>
> Best regards from Knut-Frode
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/64b92969/attachment.html
From nhatzop at gmail.com  Tue Apr 19 16:00:04 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Apr 19 16:00:07 2011
Subject: [gdal-dev] gdal_translate segfault with large netCDF
In-Reply-To: <BANLkTik7m=aC0ebUS=K-C1bGuJ-4qv-WDQ@mail.gmail.com>
References: <379916DAEE752C49BC25377067B2B8ED261DE06DC5@EXWA-MBX01.nexus.csiro.au>
	<4DADB0FF.8050001@pobox.com>
	<BANLkTik7m=aC0ebUS=K-C1bGuJ-4qv-WDQ@mail.gmail.com>
Message-ID: <BANLkTimuO9ToQQNUF8MAJ0Q_m7FsocKonw@mail.gmail.com>

What kind of netcdf file is causing the problem? is a netcdf4 or netcdf3
file?

there is a compiling option in netcdf4  --enable-netcdf-4


On Tue, Apr 19, 2011 at 11:35 AM, Kyle Shannon <ksshannon@gmail.com> wrote:

> Josh,
> As frank said, file a ticket and provide the output of ncdump -h
> yourfile.nc with the ticket.  I will take a look at it as soon as I can,
> although I am pretty busy.  Thanks.
>
> kss
>
> /**
>  *
>  * Kyle Shannon
>  * ksshannon@gmail.com
>  *
>  */
>
>
>
>
> On Tue, Apr 19, 2011 at 09:57, Frank Warmerdam <warmerdam@pobox.com>wrote:
>
>> On 11-04-19 05:01 AM, Josh.Vote@csiro.au wrote:
>>
>>> Hi,
>>>
>>> I?m new to GDAL so please forgive any glaring ignorance J
>>>
>>> Currently I have an 8GB ER Mapper (ERS) dataset that I want to convert to
>>> a
>>> NetCDF file with gdal_translate which always results in a segfault when
>>> using
>>> the following command.
>>>
>>> gdal_translate -of netCDF input.ers output.nc
>>>
>>> Whereas translating only a small <4B subset of the dataset works fine.
>>>
>>> Now I?ve been doing a bit of reading and I know that netcdf 3.6.2 and
>>> below
>>> doesn?t support variables greater than 4GB however I?ve been doing the
>>> translations with the Debian libnetcdf6 package (which I believe includes
>>> netCDF 4.1.1 and running ?ncgen ?version? confirms this). I am operating
>>> under
>>> the impression that netCDF 4.1.1 should be able to handle netCDF files of
>>> this
>>> size without trouble.
>>>
>>> Now I?ve tested gdal_translate from a variety of builds and they all
>>> produce
>>> the same problem
>>>
>>
>> Josh,
>>
>> I don't see any immediately obvious problems in the way we call the netcdf
>> API in netcdfdataset.cpp's CreateCopy method.  I would suggest you file a
>> ticket on the issue, and a developer can try to reproduce the problem.
>>
>> I would like to suggest that you do a gdal_translate from a subset of the
>> ERS file at the bottom right corner of the source just to ensure that it
>> isn't a problem with reading past the 4GB mark in the ERS file.
>>
>> I seem to have 3.6.3 of the netcdf library so I can't trivially check
>> this on my system.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/897f538c/attachment-0001.html
From jstoffer at rscusa.com  Tue Apr 19 16:55:28 2011
From: jstoffer at rscusa.com (Jordan Stoffer)
Date: Tue Apr 19 16:56:37 2011
Subject: [gdal-dev] GDAL / OGR 64bit - PINVOKE Exception
Message-ID: <075999D45025444ABA4EABC79E581FE737B6F272@EX01.sbs.local>

Hello,

I am getting the message "The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception." in my C# program that is referencing the ogr_csharp.dll file.  When trying to instantiate a class that is extended from the OGR.Geometry class . After doing some research it appears that the issue is being caused by 64bit vs. 32bit architecture. I am running a 64bit Windows 7 machine using Visual Studio 2010. I have tried switching the project / solution configuration to be x86 as well as Any CPU with the same results. I have also used the 64bit builds on http://www.gisinternals.com/sdk/ with the same results. The full stack trace is below. Any ideas?


System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unhandled exception</Description><AppDomain>SimDBI.vshost.exe</AppDomain><Exception><ExceptionType>System.TypeInitializationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32 jarg3, IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type)
   at SimDBI.Coordinate..ctor() in C:\Projects\SimDBI\SimDBI\Coordinate.cs:line 42
   at SimDBI.Test.Main() in C:\Projects\SimDBI\SimDBI\Test.cs:line 16
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</StackTrace><ExceptionString>System.TypeInitializationException: The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception. ---&amp;gt; System.TypeInitializationException: The type initializer for 'SWIGExceptionHelper' threw an exception. ---&amp;gt; System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32 jarg3, IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type)
   at SimDBI.Coordinate..ctor() in C:\Projects\SimDBI\SimDBI\Coordinate.cs:line 42
   at SimDBI.Test.Main() in C:\Projects\SimDBI\SimDBI\Test.cs:line 16
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</ExceptionString><InnerException><ExceptionType>System.TypeInitializationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The type initializer for 'SWIGExceptionHelper' threw an exception.</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()</StackTrace><ExceptionString>System.TypeInitializationException: The type initializer for 'SWIGExceptionHelper' threw an exception. ---&amp;gt; System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()</ExceptionString><InnerException><ExceptionType>System.DllNotFoundException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()</StackTrace><ExceptionString>System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()</ExceptionString></InnerException></InnerException></Exception></TraceRecord>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/3a7ae6f0/attachment.html
From jstoffer at rscusa.com  Tue Apr 19 17:40:35 2011
From: jstoffer at rscusa.com (Jordan Stoffer)
Date: Tue Apr 19 17:40:39 2011
Subject: [gdal-dev] RE: GDAL / OGR 64bit - PINVOKE Exception
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F909A970@MS1.geoeye.com>
References: <075999D45025444ABA4EABC79E581FE737B6F272@EX01.sbs.local>
	<44EADB1AC2F19449B528A17643F417B9A2F909A970@MS1.geoeye.com>
Message-ID: <075999D45025444ABA4EABC79E581FE737B6F2FD@EX01.sbs.local>

Thanks for the response Jay. Unfourtunately, I have already tried each configuration (x64, Any CPU, and x86) with the same results. I have also tried both Release and Debug mode for each configuration. Still no luck...

From: Jay Jennings [mailto:Jennings.Jay@geoeye.com]
Sent: Tuesday, April 19, 2011 2:06 PM
To: Jordan Stoffer
Subject: RE: GDAL / OGR 64bit - PINVOKE Exception

I have the same setup as you (64-bit Win7, VS2010) and when I had that same msg (albeit with GDAL, not OGR), the fix was to go to the Properties page of the executable, Build tab, and set "Platform Target" to "Any CPU".  Good luck.
.........................................................
Jay Jennings
Senior Software Developer
(NASDAQ: GEOY)


From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jordan Stoffer
Sent: Tuesday, April 19, 2011 4:55 PM
To: gdal-dev@lists.osgeo.org
Cc: Kris Pribadi
Subject: [gdal-dev] GDAL / OGR 64bit - PINVOKE Exception

Hello,

I am getting the message "The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception." in my C# program that is referencing the ogr_csharp.dll file.  When trying to instantiate a class that is extended from the OGR.Geometry class . After doing some research it appears that the issue is being caused by 64bit vs. 32bit architecture. I am running a 64bit Windows 7 machine using Visual Studio 2010. I have tried switching the project / solution configuration to be x86 as well as Any CPU with the same results. I have also used the 64bit builds on http://www.gisinternals.com/sdk/ with the same results. The full stack trace is below. Any ideas?


System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unhandled exception</Description><AppDomain>SimDBI.vshost.exe</AppDomain><Exception><ExceptionType>System.TypeInitializationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32 jarg3, IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type)
   at SimDBI.Coordinate..ctor() in C:\Projects\SimDBI\SimDBI\Coordinate.cs:line 42
   at SimDBI.Test.Main() in C:\Projects\SimDBI\SimDBI\Test.cs:line 16
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</StackTrace><ExceptionString>System.TypeInitializationException: The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception. ---&amp;gt; System.TypeInitializationException: The type initializer for 'SWIGExceptionHelper' threw an exception. ---&amp;gt; System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32 jarg3, IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type)
   at SimDBI.Coordinate..ctor() in C:\Projects\SimDBI\SimDBI\Coordinate.cs:line 42
   at SimDBI.Test.Main() in C:\Projects\SimDBI\SimDBI\Test.cs:line 16
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</ExceptionString><InnerException><ExceptionType>System.TypeInitializationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The type initializer for 'SWIGExceptionHelper' threw an exception.</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()</StackTrace><ExceptionString>System.TypeInitializationException: The type initializer for 'SWIGExceptionHelper' threw an exception. ---&amp;gt; System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()</ExceptionString><InnerException><ExceptionType>System.DllNotFoundException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()</StackTrace><ExceptionString>System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()</ExceptionString></InnerException></InnerException></Exception></TraceRecord>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/6c478d7e/attachment-0001.html
From jstoffer at rscusa.com  Tue Apr 19 19:39:30 2011
From: jstoffer at rscusa.com (Jordan Stoffer)
Date: Tue Apr 19 19:39:33 2011
Subject: [gdal-dev] GDAL / OGR 64bit - PINVOKE Exception
Message-ID: <075999D45025444ABA4EABC79E581FE737B6F3EB@EX01.sbs.local>



From: Jordan Stoffer
Sent: Tuesday, April 19, 2011 4:38 PM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: RE: GDAL / OGR 64bit - PINVOKE Exception

Here is an example of the code we are using. It is a very simple example and breaks as soon as we try to register the GDAL driver. Hopefully this can provide some insight as to what is happening. Thanks!

            OSGeo.GDAL.Gdal.AllRegister();
            OSGeo.GDAL.Dataset me = OSGeo.GDAL.Gdal.Open(@"C:\Projects\LEAPdbI\demo\Data\PHXr14c27.tif", Access.GA_ReadOnly);

This code breaks on the very first line.
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jordan Stoffer
Sent: Tuesday, April 19, 2011 2:41 PM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] RE: GDAL / OGR 64bit - PINVOKE Exception

Thanks for the response Jay. Unfourtunately, I have already tried each configuration (x64, Any CPU, and x86) with the same results. I have also tried both Release and Debug mode for each configuration. Still no luck...

From: Jay Jennings [mailto:Jennings.Jay@geoeye.com]
Sent: Tuesday, April 19, 2011 2:06 PM
To: Jordan Stoffer
Subject: RE: GDAL / OGR 64bit - PINVOKE Exception

I have the same setup as you (64-bit Win7, VS2010) and when I had that same msg (albeit with GDAL, not OGR), the fix was to go to the Properties page of the executable, Build tab, and set "Platform Target" to "Any CPU".  Good luck.
.........................................................
Jay Jennings
Senior Software Developer
(NASDAQ: GEOY)


From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jordan Stoffer
Sent: Tuesday, April 19, 2011 4:55 PM
To: gdal-dev@lists.osgeo.org
Cc: Kris Pribadi
Subject: [gdal-dev] GDAL / OGR 64bit - PINVOKE Exception

Hello,

I am getting the message "The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception." in my C# program that is referencing the ogr_csharp.dll file.  When trying to instantiate a class that is extended from the OGR.Geometry class . After doing some research it appears that the issue is being caused by 64bit vs. 32bit architecture. I am running a 64bit Windows 7 machine using Visual Studio 2010. I have tried switching the project / solution configuration to be x86 as well as Any CPU with the same results. I have also used the 64bit builds on http://www.gisinternals.com/sdk/ with the same results. The full stack trace is below. Any ideas?


System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unhandled exception</Description><AppDomain>SimDBI.vshost.exe</AppDomain><Exception><ExceptionType>System.TypeInitializationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32 jarg3, IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type)
   at SimDBI.Coordinate..ctor() in C:\Projects\SimDBI\SimDBI\Coordinate.cs:line 42
   at SimDBI.Test.Main() in C:\Projects\SimDBI\SimDBI\Test.cs:line 16
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</StackTrace><ExceptionString>System.TypeInitializationException: The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception. ---&amp;gt; System.TypeInitializationException: The type initializer for 'SWIGExceptionHelper' threw an exception. ---&amp;gt; System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32 jarg3, IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type)
   at SimDBI.Coordinate..ctor() in C:\Projects\SimDBI\SimDBI\Coordinate.cs:line 42
   at SimDBI.Test.Main() in C:\Projects\SimDBI\SimDBI\Test.cs:line 16
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()</ExceptionString><InnerException><ExceptionType>System.TypeInitializationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>The type initializer for 'SWIGExceptionHelper' threw an exception.</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()</StackTrace><ExceptionString>System.TypeInitializationException: The type initializer for 'SWIGExceptionHelper' threw an exception. ---&amp;gt; System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()</ExceptionString><InnerException><ExceptionType>System.DllNotFoundException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)</Message><StackTrace>   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()</StackTrace><ExceptionString>System.DllNotFoundException: Unable to load DLL 'ogr_wrap': The operating system cannot run . (Exception from HRESULT: 0x800700B6)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Ogr(ExceptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate, ExceptionDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()</ExceptionString></InnerException></InnerException></Exception></TraceRecord>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/69aee003/attachment-0001.html
From Josh.Vote at csiro.au  Tue Apr 19 20:21:13 2011
From: Josh.Vote at csiro.au (Josh.Vote@csiro.au)
Date: Tue Apr 19 20:22:22 2011
Subject: [gdal-dev] gdal_translate segfault with large netCDF
In-Reply-To: <4DADB0FF.8050001@pobox.com>
References: <379916DAEE752C49BC25377067B2B8ED261DE06DC5@EXWA-MBX01.nexus.csiro.au>
	<4DADB0FF.8050001@pobox.com>
Message-ID: <379916DAEE752C49BC25377067B2B8ED261DE06DC6@EXWA-MBX01.nexus.csiro.au>

Thanks for the suggestions -

> I would like to suggest that you do a gdal_translate from a subset of the
> ERS file at the bottom right corner of the source just to ensure that it
> isn't a problem with reading past the 4GB mark in the ERS file.

I just managed to run 'gdal_translate -of netCDF -srcwin 50000 40000 100 100 input.ers output.nc' without issue (the input ERS dataset is 50592 x 41876)

> Josh,
> As frank said, file a ticket and provide the output of ncdump -h 
> yourfile.nc with the ticket.  I will take a look at it as soon as I can, 
> although I am pretty busy.  Thanks.

I may have misled people with the subject of the message, sorry about that. The issue is translating a large ER Mapper file into an equally large netCDF file (reading .ers and writing .nc)

http://trac.osgeo.org/gdal/ticket/4047

I've attached the ERS dataset header to the issue for reference, please let me know if you need more info.

> What kind of netcdf file is causing the problem? is a netcdf4 or netcdf3 file?
> 
> there is a compiling option in netcdf4  --enable-netcdf-4

Will this affect writing a netCDF? Sorry again if I've misled you, the issue is reading an ER Mapper (.ers) file and writing a NetCDF.

Thanks again everyone for your assistance.
Josh Vote
From gistdt08 at hotmail.es  Wed Apr 20 02:13:43 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Wed Apr 20 02:13:51 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>,
	<BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
Message-ID: <BLU150-w46C8507B0BDB0E9ACE64BEA9930@phx.gbl>


The value of pixelFormat is Format24bppRGB
Here is the code that I use, but I cannot load into a Bitmap. Maybe I don't undesrtand really how to translate the datasource into a bitmap.
Public Sub GuardarBitmap(ByRef bmp As Bitmap, ds As Dataset, xOff As Integer, yOff As Integer, width As Integer, height As Integer, _                             imageWidth As Integer, imageHeight As Integer)
        Dim bands As Integer() = New Integer(3) {1, 1, 1, 1}        Dim alpha As Boolean = False        Dim index As Boolean = False        Dim numChannels As Integer = 1        Dim channelSize As Integer = 8        Dim ctable As ColorTable = Nothing
        For i As Integer = 0 To ds.RasterCount - 1            Dim band As Band = ds.GetRasterBand(i + 1)            If Gdal.GetDataTypeSize(band.DataType) > 8 Then                channelSize = 16            End If            Select Case band.GetRasterColorInterpretation()                Case ColorInterp.GCI_AlphaBand                    numChannels = 4                    alpha = True                    bands(3) = i + 1                    Exit Select                Case ColorInterp.GCI_BlueBand                    If numChannels < 3 Then                        numChannels = 3                    End If                    bands(0) = i + 1                    Exit Select                Case ColorInterp.GCI_RedBand                    If numChannels < 3 Then                        numChannels = 3                    End If                    bands(2) = i + 1                    Exit Select                Case ColorInterp.GCI_GreenBand                    If numChannels < 3 Then                        numChannels = 3                    End If                    bands(1) = i + 1                    Exit Select                Case ColorInterp.GCI_PaletteIndex                    ctable = band.GetRasterColorTable()                    index = True                    bands(0) = i + 1                    Exit Select                Case ColorInterp.GCI_GrayIndex                    index = True                    bands(0) = i + 1                    Exit Select                Case Else                    If i < 4 AndAlso bands(i) = 0 Then                        If numChannels < i Then                            numChannels = i                        End If                        bands(i) = i + 1                    End If                    Exit Select            End Select        Next
        Dim pixelFormat__1 As PixelFormat        Dim dataType__2 As DataType        Dim pixelSpace As Integer
        If index Then            pixelFormat__1 = PixelFormat.Format8bppIndexed            dataType__2 = DataType.GDT_Byte            pixelSpace = 1        Else            If numChannels = 1 Then                If channelSize > 8 Then                    pixelFormat__1 = PixelFormat.Format16bppGrayScale                    dataType__2 = DataType.GDT_Int16                    pixelSpace = 2                Else                    pixelFormat__1 = PixelFormat.Format24bppRgb                    numChannels = 3                    dataType__2 = DataType.GDT_Byte                    pixelSpace = 3                End If            Else                If alpha Then                    If channelSize > 8 Then                        pixelFormat__1 = PixelFormat.Format64bppArgb                        dataType__2 = DataType.GDT_UInt16                        pixelSpace = 8                    Else                        pixelFormat__1 = PixelFormat.Format32bppArgb                        dataType__2 = DataType.GDT_Byte                        pixelSpace = 4                    End If                    numChannels = 4                Else                    If channelSize > 8 Then                        pixelFormat__1 = PixelFormat.Format48bppRgb                        dataType__2 = DataType.GDT_UInt16                        pixelSpace = 6                    Else                        pixelFormat__1 = PixelFormat.Format24bppRgb                        dataType__2 = DataType.GDT_Byte                        pixelSpace = 3                    End If                    numChannels = 3                End If            End If        End If

        Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
        If index Then            If ctable IsNot Nothing Then                Dim iCol As Integer = ctable.GetCount()                Dim pal As ColorPalette = bitmap.Palette                For i As Integer = 0 To iCol - 1                    Dim ce As ColorEntry = ctable.GetColorEntry(i)                    pal.Entries(i) = Color.FromArgb(ce.c4, ce.c1, ce.c2, ce.c3)                Next                bitmap.Palette = pal            Else                Dim pal As ColorPalette = bitmap.Palette                For i As Integer = 0 To 255                    pal.Entries(i) = Color.FromArgb(255, i, i, i)                Next                bitmap.Palette = pal            End If        End If
        Dim bitmapData As BitmapData = bitmap.LockBits(New Rectangle(0, 0, imageWidth, imageHeight), ImageLockMode.ReadWrite, pixelFormat__1)
        Try            Dim strideBMD As Integer = bitmapData.Stride            Dim buf As IntPtr = bitmapData.Scan0
            ds.ReadRaster(xOff, yOff, width, height, buf, imageWidth, _             imageHeight, dataType__2, numChannels, bands, pixelSpace, strideBMD, _             1)        Finally            bitmap.UnlockBits(bitmapData)        End Try
        bmp = bitmap
    End Sub
Thanks in advanced.
Francisco J.

Date: Tue, 19 Apr 2011 16:10:27 +0200
Subject: Re: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
From: szekerest@gmail.com
To: gistdt08@hotmail.es
CC: gdal-dev@lists.osgeo.org

Not sure what is the actual value of 'pixelFormat__1' in your program.

Best regards,

Tamas


2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>






The parameter is not valid is the error that I get.I use an adaptation of the source .cs code in VB.NET.
Here is part of the code:
        Dim pixelFormat As PixelFormat	Dim dataType As DataType
        Dim pixelSpace As Integer

        If isIndexed Then
            pixelFormat = PixelFormat.Format8bppIndexed
            dataType = DataType.GDT_Byte
            pixelSpace = 1
        Else
            If channelCount = 1 Then
                If channelSize > 8 Then
                    pixelFormat = PixelFormat.Format16bppGrayScale
                    dataType = DataType.GDT_Int16
                    pixelSpace = 2
                Else
                    pixelFormat = PixelFormat.Format24bppRgb
                    channelCount = 3
                    dataType = DataType.GDT_Byte
                    pixelSpace = 3
                End If
            Else
                If hasAlpha Then
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format64bppArgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 8
                    Else
                        pixelFormat = PixelFormat.Format32bppArgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 4
                    End If
                    channelCount = 4
                Else
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format48bppRgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 6
                    Else
                        pixelFormat = PixelFormat.Format24bppRgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 3
                    End If
                    channelCount = 3
                End If
            End If
        End If

And the Error is in the following line:
Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
Is possible to read the dataset and write to a bitmap or picturebox without save as file?

Thanks for your reply.
Francisco J.

2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es>

>  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp
> samples of GDAL and I'm getting an error in the following line *Bitmap
> bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the *
> pixelFormat* argument.
>

Hi,

What is the error message specifically?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
 		 	   		  

_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev


 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/6a2b7023/attachment-0001.html
From gistdt08 at hotmail.es  Wed Apr 20 03:03:00 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Wed Apr 20 03:03:03 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>,
	<BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
Message-ID: <BLU150-w5016A7BE13CAA65DC9535AA9930@phx.gbl>


Using the following code I only can read aproximately 500 x 500 pixels.
        Dim ecwDS As Dataset = Gdal.Open("C:\h10_1024_1-2.ecw", Access.GA_ReadOnly)        Dim banda As Band = ecwDS.GetRasterBand(1)        Dim bmp As Bitmap = New Bitmap(ecwDS.RasterXSize, ecwDS.RasterYSize, PixelFormat.Format8bppIndexed)        Dim bmpData As BitmapData = bmp.LockBits(New Rectangle(0, 0, ecwDS.RasterXSize, ecwDS.RasterYSize), ImageLockMode.ReadOnly, PixelFormat.Format8bppIndexed)        Try            Dim pal As ColorPalette = bmp.Palette            For i As Integer = 0 To 255                pal.Entries(i) = Color.FromArgb(255, i, i, i)            Next            bmp.Palette = pal
            Dim stride As Integer = bmpData.Stride            Dim buf As IntPtr = bmpData.Scan0
            banda.ReadRaster(0, 0, ecwDS.RasterXSize, ecwDS.RasterYSize, buf, ecwDS.RasterXSize, _             ecwDS.RasterYSize, DataType.GDT_Byte, 1, stride)        Finally            bmp.UnlockBits(bmpData)        End Try
        PictureBox1.Image = bmp
If I change the ecwDS.RasterXSize and ecwDS.RasterYSize to 500 pixels i can get the rasterband into my picturebox.
I obtain a memory exception. Not enough memory!

Date: Tue, 19 Apr 2011 16:10:27 +0200
Subject: Re: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
From: szekerest@gmail.com
To: gistdt08@hotmail.es
CC: gdal-dev@lists.osgeo.org

Not sure what is the actual value of 'pixelFormat__1' in your program.

Best regards,

Tamas


2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>






The parameter is not valid is the error that I get.I use an adaptation of the source .cs code in VB.NET.
Here is part of the code:
        Dim pixelFormat As PixelFormat	Dim dataType As DataType
        Dim pixelSpace As Integer

        If isIndexed Then
            pixelFormat = PixelFormat.Format8bppIndexed
            dataType = DataType.GDT_Byte
            pixelSpace = 1
        Else
            If channelCount = 1 Then
                If channelSize > 8 Then
                    pixelFormat = PixelFormat.Format16bppGrayScale
                    dataType = DataType.GDT_Int16
                    pixelSpace = 2
                Else
                    pixelFormat = PixelFormat.Format24bppRgb
                    channelCount = 3
                    dataType = DataType.GDT_Byte
                    pixelSpace = 3
                End If
            Else
                If hasAlpha Then
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format64bppArgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 8
                    Else
                        pixelFormat = PixelFormat.Format32bppArgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 4
                    End If
                    channelCount = 4
                Else
                    If channelSize > 8 Then
                        pixelFormat = PixelFormat.Format48bppRgb
                        dataType = DataType.GDT_UInt16
                        pixelSpace = 6
                    Else
                        pixelFormat = PixelFormat.Format24bppRgb
                        dataType = DataType.GDT_Byte
                        pixelSpace = 3
                    End If
                    channelCount = 3
                End If
            End If
        End If

And the Error is in the following line:
Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
Is possible to read the dataset and write to a bitmap or picturebox without save as file?

Thanks for your reply.
Francisco J.

2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es>

>  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp
> samples of GDAL and I'm getting an error in the following line *Bitmap
> bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the *
> pixelFormat* argument.
>

Hi,

What is the error message specifically?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
 		 	   		  

_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev


 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/36dcbf36/attachment.html
From chaitanya.ch at gmail.com  Wed Apr 20 03:24:36 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr 20 03:24:39 2011
Subject: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
In-Reply-To: <BLU150-w46C8507B0BDB0E9ACE64BEA9930@phx.gbl>
References: <BLU150-w479726BBCF37C3C7E41D71A9900@phx.gbl>
	<BANLkTikFPCffbHksLYO3Og8EQrFeZywMBQ@mail.gmail.com>
	<BLU150-w46C8507B0BDB0E9ACE64BEA9930@phx.gbl>
Message-ID: <BANLkTi=goJUJBbwo8adAcjxtyb1ogtwiHA@mail.gmail.com>

Francisco,

I can't tell why you got the "Parameter is invalid" error. Perhaps you
should try some VB.net forums.

2011/4/20 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>

>  The value of pixelFormat is *Format24bppRGB*
>
> **Here is the code that I use, but I cannot load into a Bitmap. Maybe I
> don't undesrtand really how to translate the datasource into a bitmap.
>
> Public Sub GuardarBitmap(ByRef bmp As Bitmap, ds As Dataset, xOff As
> Integer, yOff As Integer, width As Integer, height As Integer, _
>                              imageWidth As Integer, imageHeight As Integer)
>
>         Dim bands As Integer() = New Integer(3) {1, 1, 1, 1}
>         Dim alpha As Boolean = False
>         Dim index As Boolean = False
>         Dim numChannels As Integer = 1
>         Dim channelSize As Integer = 8
>         Dim ctable As ColorTable = Nothing
>
>         For i As Integer = 0 To ds.RasterCount - 1
>             Dim band As Band = ds.GetRasterBand(i + 1)
>             If Gdal.GetDataTypeSize(band.DataType) > 8 Then
>                 channelSize = 16
>             End If
>             Select Case band.GetRasterColorInterpretation()
>                 Case ColorInterp.GCI_AlphaBand
>                     numChannels = 4
>                     alpha = True
>                     bands(3) = i + 1
>                     Exit Select
>                 Case ColorInterp.GCI_BlueBand
>                     If numChannels < 3 Then
>                         numChannels = 3
>                     End If
>                     bands(0) = i + 1
>                     Exit Select
>                 Case ColorInterp.GCI_RedBand
>                     If numChannels < 3 Then
>                         numChannels = 3
>                     End If
>                     bands(2) = i + 1
>                     Exit Select
>                 Case ColorInterp.GCI_GreenBand
>                     If numChannels < 3 Then
>                         numChannels = 3
>                     End If
>                     bands(1) = i + 1
>                     Exit Select
>                 Case ColorInterp.GCI_PaletteIndex
>                     ctable = band.GetRasterColorTable()
>                     index = True
>                     bands(0) = i + 1
>                     Exit Select
>                 Case ColorInterp.GCI_GrayIndex
>                     index = True
>                     bands(0) = i + 1
>                     Exit Select
>                 Case Else
>                     If i < 4 AndAlso bands(i) = 0 Then
>                         If numChannels < i Then
>                             numChannels = i
>                         End If
>                         bands(i) = i + 1
>                     End If
>                     Exit Select
>             End Select
>         Next
>
>         Dim pixelFormat__1 As PixelFormat
>         Dim dataType__2 As DataType
>         Dim pixelSpace As Integer
>
>         If index Then
>             pixelFormat__1 = PixelFormat.Format8bppIndexed
>             dataType__2 = DataType.GDT_Byte
>             pixelSpace = 1
>         Else
>             If numChannels = 1 Then
>                 If channelSize > 8 Then
>                     pixelFormat__1 = PixelFormat.Format16bppGrayScale
>                     dataType__2 = DataType.GDT_Int16
>                     pixelSpace = 2
>                 Else
>                     pixelFormat__1 = PixelFormat.Format24bppRgb
>                     numChannels = 3
>                     dataType__2 = DataType.GDT_Byte
>                     pixelSpace = 3
>                 End If
>             Else
>                 If alpha Then
>                     If channelSize > 8 Then
>                         pixelFormat__1 = PixelFormat.Format64bppArgb
>                         dataType__2 = DataType.GDT_UInt16
>                         pixelSpace = 8
>                     Else
>                         pixelFormat__1 = PixelFormat.Format32bppArgb
>                         dataType__2 = DataType.GDT_Byte
>                         pixelSpace = 4
>                     End If
>                     numChannels = 4
>                 Else
>                     If channelSize > 8 Then
>                         pixelFormat__1 = PixelFormat.Format48bppRgb
>                         dataType__2 = DataType.GDT_UInt16
>                         pixelSpace = 6
>                     Else
>                         pixelFormat__1 = PixelFormat.Format24bppRgb
>                         dataType__2 = DataType.GDT_Byte
>                         pixelSpace = 3
>                     End If
>                     numChannels = 3
>                 End If
>             End If
>         End If
>
>
>         Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
>
>         If index Then
>             If ctable IsNot Nothing Then
>                 Dim iCol As Integer = ctable.GetCount()
>                 Dim pal As ColorPalette = bitmap.Palette
>                 For i As Integer = 0 To iCol - 1
>                     Dim ce As ColorEntry = ctable.GetColorEntry(i)
>                     pal.Entries(i) = Color.FromArgb(ce.c4, ce.c1, ce.c2,
> ce.c3)
>                 Next
>                 bitmap.Palette = pal
>             Else
>                 Dim pal As ColorPalette = bitmap.Palette
>                 For i As Integer = 0 To 255
>                     pal.Entries(i) = Color.FromArgb(255, i, i, i)
>                 Next
>                 bitmap.Palette = pal
>             End If
>         End If
>
>         Dim bitmapData As BitmapData = bitmap.LockBits(New Rectangle(0, 0,
> imageWidth, imageHeight), ImageLockMode.ReadWrite, pixelFormat__1)
>
>         Try
>             Dim strideBMD As Integer = bitmapData.Stride
>             Dim buf As IntPtr = bitmapData.Scan0
>
>             ds.ReadRaster(xOff, yOff, width, height, buf, imageWidth, _
>              imageHeight, dataType__2, numChannels, bands, pixelSpace,
> strideBMD, _
>              1)
>         Finally
>             bitmap.UnlockBits(bitmapData)
>         End Try
>
>         bmp = bitmap
>
>     End Sub
>
> Thanks in advanced.
>
> Francisco J.
>
> Date: Tue, 19 Apr 2011 16:10:27 +0200
>
> Subject: Re: [gdal-dev] Problem with GDALDatasetRasterIO.cs and ECW files
> From: szekerest@gmail.com
> To: gistdt08@hotmail.es
> CC: gdal-dev@lists.osgeo.org
>
>
> Not sure what is the actual value of 'pixelFormat__1' in your program.
>
> Best regards,
>
> Tamas
>
>
> 2011/4/19 Francisco Jos? Reyes Peralta <gistdt08@hotmail.es>
>
>  The parameter is not valid is the error that I get.
>
> I use an adaptation of the source .cs code in VB.NET.
>
> Here is part of the code:
>
>
>         Dim pixelFormat As PixelFormat
>
> 	Dim dataType As DataType
>         Dim pixelSpace As Integer
>
>         If isIndexed Then
>             pixelFormat = PixelFormat.Format8bppIndexed
>             dataType = DataType.GDT_Byte
>             pixelSpace = 1
>         Else
>             If channelCount = 1 Then
>                 If channelSize > 8 Then
>                     pixelFormat = PixelFormat.Format16bppGrayScale
>                     dataType = DataType.GDT_Int16
>                     pixelSpace = 2
>                 Else
>                     pixelFormat = PixelFormat.Format24bppRgb
>                     channelCount = 3
>                     dataType = DataType.GDT_Byte
>                     pixelSpace = 3
>                 End If
>             Else
>                 If hasAlpha Then
>                     If channelSize > 8 Then
>                         pixelFormat = PixelFormat.Format64bppArgb
>                         dataType = DataType.GDT_UInt16
>                         pixelSpace = 8
>                     Else
>                         pixelFormat = PixelFormat.Format32bppArgb
>                         dataType = DataType.GDT_Byte
>                         pixelSpace = 4
>                     End If
>                     channelCount = 4
>                 Else
>                     If channelSize > 8 Then
>                         pixelFormat = PixelFormat.Format48bppRgb
>                         dataType = DataType.GDT_UInt16
>                         pixelSpace = 6
>                     Else
>                         pixelFormat = PixelFormat.Format24bppRgb
>                         dataType = DataType.GDT_Byte
>                         pixelSpace = 3
>                     End If
>                     channelCount = 3
>                 End If
>             End If
>         End If
> *
>
> And the Error is in the following line:
>
> *
>
>
> Dim bitmap As New Bitmap(imageWidth, imageHeight, pixelFormat__1)
>
>
> Is possible to read the dataset and write to a bitmap or picturebox without save as file?
>
>
> Thanks for your reply.
>
>
> Francisco J.
>
>
>
> 2011/4/19 Francisco Jos? Reyes Peralta <gistdt08 at hotmail.es <http://lists.osgeo.org/mailman/listinfo/gdal-dev>>
>
> >*  Dear friends, I'm vieweing the *GDALDatasetRasterIO.cs* from the Csharp*>* samples of GDAL and I'm getting an error in the following line *Bitmap*>* bitmap = new Bitmap(imageWidth, imageHeight, pixelFormat);* In the **>* pixelFormat* argument.*>**
> Hi,
>
> What is the error message specifically?
>
> Best regards,
>
> Tamas
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110419/cc8baab2/attachment-0001.html
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/7d82c9f4/attachment-0001.html
From mateusz at loskot.net  Wed Apr 20 06:44:19 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr 20 06:44:26 2011
Subject: [gdal-dev] Re: Fwd: geos for windows ce
In-Reply-To: <BANLkTimUQ8HuJ3fi1QqHHiprSQbXA8R=kw@mail.gmail.com>
References: <BANLkTi=gV0ugs_-MidNbuYqUHYQ+q=50sA@mail.gmail.com>	<BANLkTimxWpKN9x0JTso+UfrY1cxHKYdJng@mail.gmail.com>
	<BANLkTimUQ8HuJ3fi1QqHHiprSQbXA8R=kw@mail.gmail.com>
Message-ID: <4DAEB903.3090709@loskot.net>

(cross-posted to gdal-dev and geos-devel)

On 20/04/11 08:13, Micka wrote:
> ---------- Forwarded message ----------
> From: *Micka* <mickamusset@gmail.com <mailto:mickamusset@gmail.com>>
> Date: Tue, Apr 19, 2011 at 12:31 PM
> Subject: geos for windows ce
> To: gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>
>
> Hello everyone, i would like to know if geos will be enabled one day for
> GDAL on windows ce ?

Micka,

I no longer maintain GDAL for Windows CE.
IMHO, Windows CE is practically a dead platform.

Regarding GEOS, just try to build it
I developed CMake configuration for GEOS, but you may need to create 
Visual Studio project files from scratch as I have no idea if CMake
can generate Visual Studio projects for Windows CE.

Here you can find some of my old stuff related to Windows CE support in 
GEOS and GDAL projects:

http://mateusz.loskot.net/projects/geos/

http://mateusz.loskot.net/projects/gdal/

Simply, try to configure and build those projects from sources
and see where it stops. If it stops with error, post GDAL issues to 
gdal-dev and GEOS issues to geos-devel, and we will see if
possible to help you.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From chaitanya.ch at gmail.com  Wed Apr 20 08:13:44 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr 20 08:13:46 2011
Subject: [gdal-dev] Re: RasterizeLayer using attribute
In-Reply-To: <27126443.29371.1303298892266.JavaMail.nabble@jim.nabble.com>
References: <27126443.29371.1303298892266.JavaMail.nabble@jim.nabble.com>
Message-ID: <BANLkTiksiLffs0uGmobkJ8CV79aC8HuZaA@mail.gmail.com>

Jonathan,

I didn't quite get what your problem is. Do you get all the pixels set to
255?

Also, you should probably check if you really want to burn the id value into
the raster.

On Wed, Apr 20, 2011 at 4:58 PM, <dr_jonathan_ball@hotmail.co.uk> wrote:

> Hi,
>
> I read your thread on using gdal.RasterizeLayer() in Python to rasterize
> vector polygons by attribute.  I have the same problem as you did.  Can you
> tell me how you resolved it please?
>
> My code is almost identical to yours and my key line is:
> err = gdal.RasterizeLayer( target_ds, [1], vector_lyr,
>                               options = ["ATTRIBUTE=id",
> "ALL_TOUCHED=TRUE"] )
>
> The rasterize process seems to ignore my options. Like you, I get an output
> raster with all no-data values set to 255.  I get a zero error value.
>
> Your insights would be very welcome.  Many thanks in advance.
>
> Regards
>
> Jonathan
>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/a6a464dc/attachment.html
From knutfrodesoppel at hotmail.com  Wed Apr 20 09:11:55 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed Apr 20 09:12:13 2011
Subject: [gdal-dev] Re: dev-version of HDF4
In-Reply-To: <BANLkTinpvM73b9BMNNoj5GiUCWamruLKkw@mail.gmail.com>
References: <iokgg8$qr6$1@dough.gmane.org>
	<BANLkTinpvM73b9BMNNoj5GiUCWamruLKkw@mail.gmail.com>
Message-ID: <iomm2r$fp$1@dough.gmane.org>

I forgot to say, but I have also tried by specifying the location of 
HDF4, with similar error:

...
checking for SDreaddata in -lmfhdfalt... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
configure: error: HDF4 support requested with arg 
"/Users/knutfd/Software/hdf-4.2.5/", but neither hdf4 nor mfhdf lib found
...

HDF4 library is there, but somehow configure is not able to detect it. 
HDF4 is compiled without SLIB, so that should not be the problem.
I have also tried with older version of HDF4 (4.2r1), other installation 
points, and prebuilt binaries. And I compiled with options 
--disable-fortran --disable-netcdf --with-pic, as suggested on 
http://osgeo-org.1803224.n2.nabble.com/Error-in-GDAL-compiling-with-HDF4-td3351437.html
It has been suggested to use a "dev" version of HDF4, but I don't know 
if that would solve this problem?

Best regards from Knut-Frode




On 19/04/2011 21:51, Nikolaos Hatzopoulos wrote:
> hdf4 libraries not found that's what the log says :)
> do a
> locate libhdf4
> to see where the library is
>
>
> On Tue, Apr 19, 2011 at 10:24 AM, Knut-Frode Dagestad
> <knutfrodesoppel@hotmail.com <mailto:knutfrodesoppel@hotmail.com>> wrote:
>
>     I am trying to compile GDAL from source with support for HDF4 with:
>
>     ./configure --with-hdf4
>
>     but get complaints about missing libraries, see extract from config.log:
>
>     ld: library not found for -lmfhdfalt
>     ...
>     ld: library not found for -lmfhdf
>     ...
>     ld: library not found for -lhdf4
>     ...
>     ld: library not found for -lmfhdf
>     configure:19940: checking for SDreaddata in -lmfhdf
>     configure:19965: gcc -o conftest -g -O2   conftest.c -lmfhdf -ldf
>     -lsz -ljpeg -lz -lz -lpthread -ldl >&5
>     ld: library not found for -lmfhdf
>     configure:20009: error: HDF4 support requested with arg "yes", but
>     neither hdf4 nor mfhdf lib found
>
>
>     Similar errors are also reported by others, e.g. this one using
>     mapserver:
>     http://osgeo-org.1803224.n2.nabble.com/cannot-find-lmfhdf-td5286909.html
>
>     I have tried with various versions of HDF4, both binaries and
>     compiled from source. The link above (and also
>     http://trac.osgeo.org/gdal/wiki/BuildingOnUnix) suggests to try a
>     "hdf-dev" version. But where can I find such "dev-versions", in my
>     case for Mac OS X 10.6.7?
>
>     Would it be possible to update GDAL to work with standard HDF4
>     libraries?
>
>
>     Best regards from Knut-Frode
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nhatzop at gmail.com  Wed Apr 20 11:03:22 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed Apr 20 11:03:23 2011
Subject: [gdal-dev] Re: dev-version of HDF4
In-Reply-To: <iomm2r$fp$1@dough.gmane.org>
References: <iokgg8$qr6$1@dough.gmane.org>
	<BANLkTinpvM73b9BMNNoj5GiUCWamruLKkw@mail.gmail.com>
	<iomm2r$fp$1@dough.gmane.org>
Message-ID: <BANLkTimjj+nF4GY+1wo9LrK9UodCcZr8jA@mail.gmail.com>

when does the gcc ....
you must have: -L/Users/knutfd/Software/hdf-4.2.5/lib
in order to find the lib

so you need to do before the compile:
export LDFLAGS="$LDFLAGS -L/Users/knutfd/Software/hdf-4.2.5/lib"
and obviously you are going to need the include files also:
export CPPFLAGS="$CPPFLAGS -I/Users/knutfd/Software/hdf-4.2.5/include"

I am not quite sure if export is going to work or setenv
in setenv you don't need the equal I am not an expert in c shell

this kind of problem is because the tools are not install in a standard path
library
like /usr/lib and /usr/include so you have to define compilation flags



On Wed, Apr 20, 2011 at 6:11 AM, Knut-Frode Dagestad <
knutfrodesoppel@hotmail.com> wrote:

> I forgot to say, but I have also tried by specifying the location of HDF4,
> with similar error:
>
> ...
> checking for SDreaddata in -lmfhdfalt... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lhdf4... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lmfhdf... no
> configure: error: HDF4 support requested with arg
> "/Users/knutfd/Software/hdf-4.2.5/", but neither hdf4 nor mfhdf lib found
> ...
>
> HDF4 library is there, but somehow configure is not able to detect it. HDF4
> is compiled without SLIB, so that should not be the problem.
> I have also tried with older version of HDF4 (4.2r1), other installation
> points, and prebuilt binaries. And I compiled with options --disable-fortran
> --disable-netcdf --with-pic, as suggested on
> http://osgeo-org.1803224.n2.nabble.com/Error-in-GDAL-compiling-with-HDF4-td3351437.html
> It has been suggested to use a "dev" version of HDF4, but I don't know if
> that would solve this problem?
>
>
> Best regards from Knut-Frode
>
>
>
>
> On 19/04/2011 21:51, Nikolaos Hatzopoulos wrote:
>
>> hdf4 libraries not found that's what the log says :)
>> do a
>> locate libhdf4
>> to see where the library is
>>
>>
>> On Tue, Apr 19, 2011 at 10:24 AM, Knut-Frode Dagestad
>> <knutfrodesoppel@hotmail.com <mailto:knutfrodesoppel@hotmail.com>> wrote:
>>
>>    I am trying to compile GDAL from source with support for HDF4 with:
>>
>>    ./configure --with-hdf4
>>
>>    but get complaints about missing libraries, see extract from
>> config.log:
>>
>>    ld: library not found for -lmfhdfalt
>>    ...
>>    ld: library not found for -lmfhdf
>>    ...
>>    ld: library not found for -lhdf4
>>    ...
>>    ld: library not found for -lmfhdf
>>    configure:19940: checking for SDreaddata in -lmfhdf
>>    configure:19965: gcc -o conftest -g -O2   conftest.c -lmfhdf -ldf
>>    -lsz -ljpeg -lz -lz -lpthread -ldl >&5
>>    ld: library not found for -lmfhdf
>>    configure:20009: error: HDF4 support requested with arg "yes", but
>>    neither hdf4 nor mfhdf lib found
>>
>>
>>    Similar errors are also reported by others, e.g. this one using
>>    mapserver:
>>
>> http://osgeo-org.1803224.n2.nabble.com/cannot-find-lmfhdf-td5286909.html
>>
>>    I have tried with various versions of HDF4, both binaries and
>>    compiled from source. The link above (and also
>>    http://trac.osgeo.org/gdal/wiki/BuildingOnUnix) suggests to try a
>>    "hdf-dev" version. But where can I find such "dev-versions", in my
>>    case for Mac OS X 10.6.7?
>>
>>    Would it be possible to update GDAL to work with standard HDF4
>>    libraries?
>>
>>
>>    Best regards from Knut-Frode
>>
>>    _______________________________________________
>>    gdal-dev mailing list
>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>
>>    http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/f188db92/attachment.html
From knutfrodesoppel at hotmail.com  Wed Apr 20 11:27:37 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode)
Date: Wed Apr 20 11:24:57 2011
Subject: [gdal-dev] Re: dev-version of HDF4
In-Reply-To: <BANLkTimjj+nF4GY+1wo9LrK9UodCcZr8jA@mail.gmail.com>
References: <iokgg8$qr6$1@dough.gmane.org>	<BANLkTinpvM73b9BMNNoj5GiUCWamruLKkw@mail.gmail.com>	<iomm2r$fp$1@dough.gmane.org>
	<BANLkTimjj+nF4GY+1wo9LrK9UodCcZr8jA@mail.gmail.com>
Message-ID: <iomtrk$hj1$1@dough.gmane.org>

The paths are taken care of by configure, and they are checked to be ok. 
I also tried with standard installation folders (/usr/lib/ /usr/include/ 
etc) but no difference. I did not compile, since configure fails.
So I believe it must be some incompatibility with the GDAL configure 
script and the standard HDF4-libraries I have used. The "lib not found" 
message from GDAL configure seems to be misleading.

Best regards from Knut-Frode



Den 20.04.2011 17:03, skrev Nikolaos Hatzopoulos:
> when does the gcc ....
> you must have: -L/Users/knutfd/Software/hdf-4.2.5/lib
> in order to find the lib
>
> so you need to do before the compile:
> export LDFLAGS="$LDFLAGS -L/Users/knutfd/Software/hdf-4.2.5/lib"
> and obviously you are going to need the include files also:
> export CPPFLAGS="$CPPFLAGS -I/Users/knutfd/Software/hdf-4.2.5/include"
>
> I am not quite sure if export is going to work or setenv
> in setenv you don't need the equal I am not an expert in c shell
>
> this kind of problem is because the tools are not install in a standard
> path library
> like /usr/lib and /usr/include so you have to define compilation flags
>
>
>
> On Wed, Apr 20, 2011 at 6:11 AM, Knut-Frode Dagestad
> <knutfrodesoppel@hotmail.com <mailto:knutfrodesoppel@hotmail.com>> wrote:
>
>     I forgot to say, but I have also tried by specifying the location of
>     HDF4, with similar error:
>
>     ...
>     checking for SDreaddata in -lmfhdfalt... no
>     checking for SDreaddata in -lmfhdf... no
>     checking for SDreaddata in -lhdf4... no
>     checking for SDreaddata in -lmfhdf... no
>     checking for SDreaddata in -lmfhdf... no
>     configure: error: HDF4 support requested with arg
>     "/Users/knutfd/Software/hdf-4.2.5/", but neither hdf4 nor mfhdf lib
>     found
>     ...
>
>     HDF4 library is there, but somehow configure is not able to detect
>     it. HDF4 is compiled without SLIB, so that should not be the problem.
>     I have also tried with older version of HDF4 (4.2r1), other
>     installation points, and prebuilt binaries. And I compiled with
>     options --disable-fortran --disable-netcdf --with-pic, as suggested
>     on
>     http://osgeo-org.1803224.n2.nabble.com/Error-in-GDAL-compiling-with-HDF4-td3351437.html
>     It has been suggested to use a "dev" version of HDF4, but I don't
>     know if that would solve this problem?
>
>
>     Best regards from Knut-Frode
>
>
>
>
>     On 19/04/2011 21:51, Nikolaos Hatzopoulos wrote:
>
>         hdf4 libraries not found that's what the log says :)
>         do a
>         locate libhdf4
>         to see where the library is
>
>
>         On Tue, Apr 19, 2011 at 10:24 AM, Knut-Frode Dagestad
>         <knutfrodesoppel@hotmail.com
>         <mailto:knutfrodesoppel@hotmail.com>
>         <mailto:knutfrodesoppel@hotmail.com
>         <mailto:knutfrodesoppel@hotmail.com>>> wrote:
>
>             I am trying to compile GDAL from source with support for
>         HDF4 with:
>
>             ./configure --with-hdf4
>
>             but get complaints about missing libraries, see extract from
>         config.log:
>
>             ld: library not found for -lmfhdfalt
>             ...
>             ld: library not found for -lmfhdf
>             ...
>             ld: library not found for -lhdf4
>             ...
>             ld: library not found for -lmfhdf
>             configure:19940: checking for SDreaddata in -lmfhdf
>             configure:19965: gcc -o conftest -g -O2   conftest.c -lmfhdf
>         -ldf
>             -lsz -ljpeg -lz -lz -lpthread -ldl >&5
>             ld: library not found for -lmfhdf
>             configure:20009: error: HDF4 support requested with arg
>         "yes", but
>             neither hdf4 nor mfhdf lib found
>
>
>             Similar errors are also reported by others, e.g. this one using
>             mapserver:
>         http://osgeo-org.1803224.n2.nabble.com/cannot-find-lmfhdf-td5286909.html
>
>             I have tried with various versions of HDF4, both binaries and
>             compiled from source. The link above (and also
>         http://trac.osgeo.org/gdal/wiki/BuildingOnUnix) suggests to try a
>         "hdf-dev" version. But where can I find such "dev-versions", in my
>             case for Mac OS X 10.6.7?
>
>             Would it be possible to update GDAL to work with standard HDF4
>             libraries?
>
>
>             Best regards from Knut-Frode
>
>             _______________________________________________
>             gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         <mailto:gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>>
>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From gistdt08 at hotmail.es  Wed Apr 20 11:32:03 2011
From: gistdt08 at hotmail.es (=?iso-8859-1?B?RnJhbmNpc2NvIEpvc+kgUmV5ZXMgUGVyYWx0YQ==?=)
Date: Wed Apr 20 11:32:05 2011
Subject: [gdal-dev] How detect the BlockSize to make tiles of my dataset to
	open it?
Message-ID: <BLU150-w53925F8DE0B8C4444386FCA9930@phx.gbl>


Dear friends,
Using gdalinfo and my dataset i obtain the following data:
Size: 35000, 20000

Pixel Size: 0.5, -0.5

Band 1 Block = 35000x1
Type=Byte, ColorInterp=Red

Overviews:
17500x10000, 8750x5000, 4375x2500, 2187x1250, 1093x625, 546x312, 273x156

Band 2 Block = 35000x1
Type=Byte, ColorInterp=Green

Overviews:
17500x10000, 8750x5000, 4375x2500, 2187x1250, 1093x625, 546x312, 273x156

Band 3 Block = 35000x1
Type=Byte, ColorInterp=Blue

Overviews:
17500x10000, 8750x5000, 4375x2500, 2187x1250, 1093x625, 546x312, 273x156
How can I recognize my optimal blocksize to open a 250 MB ecw file in TILES mode because if I read all the dataset I obtain an outofmemory exception.
Thanks in advanced.
Francisco J. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/8333277b/attachment.html
From nhatzop at gmail.com  Wed Apr 20 11:42:20 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed Apr 20 11:42:22 2011
Subject: [gdal-dev] Re: dev-version of HDF4
In-Reply-To: <iomtrk$hj1$1@dough.gmane.org>
References: <iokgg8$qr6$1@dough.gmane.org>
	<BANLkTinpvM73b9BMNNoj5GiUCWamruLKkw@mail.gmail.com>
	<iomm2r$fp$1@dough.gmane.org>
	<BANLkTimjj+nF4GY+1wo9LrK9UodCcZr8jA@mail.gmail.com>
	<iomtrk$hj1$1@dough.gmane.org>
Message-ID: <BANLkTi=jWz74cjRSmo+Cbx43haJsRgNXig@mail.gmail.com>

this might help to fix you configure:

sed -i 's|-lmfhdf -ldf|-L$libdir/hdf -lmfhdf -ldf|g' configure



On Wed, Apr 20, 2011 at 8:27 AM, Knut-Frode <knutfrodesoppel@hotmail.com>wrote:

> The paths are taken care of by configure, and they are checked to be ok. I
> also tried with standard installation folders (/usr/lib/ /usr/include/ etc)
> but no difference. I did not compile, since configure fails.
> So I believe it must be some incompatibility with the GDAL configure script
> and the standard HDF4-libraries I have used. The "lib not found" message
> from GDAL configure seems to be misleading.
>
> Best regards from Knut-Frode
>
>
>
> Den 20.04.2011 17:03, skrev Nikolaos Hatzopoulos:
>
>> when does the gcc ....
>> you must have: -L/Users/knutfd/Software/hdf-4.2.5/lib
>> in order to find the lib
>>
>> so you need to do before the compile:
>> export LDFLAGS="$LDFLAGS -L/Users/knutfd/Software/hdf-4.2.5/lib"
>> and obviously you are going to need the include files also:
>> export CPPFLAGS="$CPPFLAGS -I/Users/knutfd/Software/hdf-4.2.5/include"
>>
>> I am not quite sure if export is going to work or setenv
>> in setenv you don't need the equal I am not an expert in c shell
>>
>> this kind of problem is because the tools are not install in a standard
>> path library
>> like /usr/lib and /usr/include so you have to define compilation flags
>>
>>
>>
>> On Wed, Apr 20, 2011 at 6:11 AM, Knut-Frode Dagestad
>> <knutfrodesoppel@hotmail.com <mailto:knutfrodesoppel@hotmail.com>> wrote:
>>
>>    I forgot to say, but I have also tried by specifying the location of
>>    HDF4, with similar error:
>>
>>    ...
>>    checking for SDreaddata in -lmfhdfalt... no
>>    checking for SDreaddata in -lmfhdf... no
>>    checking for SDreaddata in -lhdf4... no
>>    checking for SDreaddata in -lmfhdf... no
>>    checking for SDreaddata in -lmfhdf... no
>>    configure: error: HDF4 support requested with arg
>>    "/Users/knutfd/Software/hdf-4.2.5/", but neither hdf4 nor mfhdf lib
>>    found
>>    ...
>>
>>    HDF4 library is there, but somehow configure is not able to detect
>>    it. HDF4 is compiled without SLIB, so that should not be the problem.
>>    I have also tried with older version of HDF4 (4.2r1), other
>>    installation points, and prebuilt binaries. And I compiled with
>>    options --disable-fortran --disable-netcdf --with-pic, as suggested
>>    on
>>
>> http://osgeo-org.1803224.n2.nabble.com/Error-in-GDAL-compiling-with-HDF4-td3351437.html
>>    It has been suggested to use a "dev" version of HDF4, but I don't
>>    know if that would solve this problem?
>>
>>
>>    Best regards from Knut-Frode
>>
>>
>>
>>
>>    On 19/04/2011 21:51, Nikolaos Hatzopoulos wrote:
>>
>>        hdf4 libraries not found that's what the log says :)
>>        do a
>>        locate libhdf4
>>        to see where the library is
>>
>>
>>        On Tue, Apr 19, 2011 at 10:24 AM, Knut-Frode Dagestad
>>        <knutfrodesoppel@hotmail.com
>>        <mailto:knutfrodesoppel@hotmail.com>
>>        <mailto:knutfrodesoppel@hotmail.com
>>        <mailto:knutfrodesoppel@hotmail.com>>> wrote:
>>
>>            I am trying to compile GDAL from source with support for
>>        HDF4 with:
>>
>>            ./configure --with-hdf4
>>
>>            but get complaints about missing libraries, see extract from
>>        config.log:
>>
>>            ld: library not found for -lmfhdfalt
>>            ...
>>            ld: library not found for -lmfhdf
>>            ...
>>            ld: library not found for -lhdf4
>>            ...
>>            ld: library not found for -lmfhdf
>>            configure:19940: checking for SDreaddata in -lmfhdf
>>            configure:19965: gcc -o conftest -g -O2   conftest.c -lmfhdf
>>        -ldf
>>            -lsz -ljpeg -lz -lz -lpthread -ldl >&5
>>            ld: library not found for -lmfhdf
>>            configure:20009: error: HDF4 support requested with arg
>>        "yes", but
>>            neither hdf4 nor mfhdf lib found
>>
>>
>>            Similar errors are also reported by others, e.g. this one using
>>            mapserver:
>>
>> http://osgeo-org.1803224.n2.nabble.com/cannot-find-lmfhdf-td5286909.html
>>
>>            I have tried with various versions of HDF4, both binaries and
>>            compiled from source. The link above (and also
>>        http://trac.osgeo.org/gdal/wiki/BuildingOnUnix) suggests to try a
>>        "hdf-dev" version. But where can I find such "dev-versions", in my
>>            case for Mac OS X 10.6.7?
>>
>>            Would it be possible to update GDAL to work with standard HDF4
>>            libraries?
>>
>>
>>            Best regards from Knut-Frode
>>
>>            _______________________________________________
>>            gdal-dev mailing list
>>        gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>        <mailto:gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org
>> >>
>>
>>        http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>        _______________________________________________
>>        gdal-dev mailing list
>>        gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>        http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>    _______________________________________________
>>    gdal-dev mailing list
>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>    http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/f5b783db/attachment.html
From warmerdam at pobox.com  Wed Apr 20 13:33:32 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 20 13:33:36 2011
Subject: [gdal-dev] How detect the BlockSize to make tiles of my dataset
	to open it?
In-Reply-To: <BLU150-w53925F8DE0B8C4444386FCA9930@phx.gbl>
References: <BLU150-w53925F8DE0B8C4444386FCA9930@phx.gbl>
Message-ID: <4DAF18EC.4020501@pobox.com>

On 11-04-20 11:32 AM, Francisco Jos? Reyes Peralta wrote:
> Dear friends,
>
> Using gdalinfo and my dataset i obtain the following data:
>
> *Size: 35000, 20000*
>
> *Pixel Size: 0.5, -0.5*
>
> *Band 1 Block = 35000x1 Type=Byte, ColorInterp=Red*
>
> *Overviews: 17500x10000, 8750x5000, 4375x2500, 2187x1250, 1093x625, 546x312,
> 273x156*
>
> *Band 2 Block = 35000x1 Type=Byte, ColorInterp=Green*
>
> *Overviews: 17500x10000, 8750x5000, 4375x2500, 2187x1250, 1093x625, 546x312,
> 273x156*
>
> *Band 3 Block = 35000x1 Type=Byte, ColorInterp=Blue*
>
> *Overviews: 17500x10000, 8750x5000, 4375x2500, 2187x1250, 1093x625, 546x312,
> 273x156*
>
>
> How can I recognize my optimal blocksize to open a 250 MB ecw file in TILES
> mode because if I read all the dataset I obtain an outofmemory exception.

Francisco,

I believe you will get the best performance reading it one scanline at a time
with all bands at once.  There is a special optimized case in the driver for
this.  But you would need to use the GDALDataset::RasterIO() method to read
all three bands at once instead of reading them each separately.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gistdt08 at hotmail.es  Wed Apr 20 14:43:06 2011
From: gistdt08 at hotmail.es (gistdt08)
Date: Wed Apr 20 14:43:09 2011
Subject: [gdal-dev] Re: How detect the BlockSize to make tiles of my dataset
 to open it?
In-Reply-To: <4DAF18EC.4020501@pobox.com>
References: <BLU150-w53925F8DE0B8C4444386FCA9930@phx.gbl>
	<4DAF18EC.4020501@pobox.com>
Message-ID: <1303324986886-6291815.post@n2.nabble.com>

Many thanks Frank,

Could be useful it for avoid OutMemoryException?

Regards.

Francisco J.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-How-detect-the-BlockSize-to-make-tiles-of-my-dataset-to-open-it-tp6291160p6291815.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Apr 20 15:13:41 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 20 15:13:44 2011
Subject: [gdal-dev] Re: How detect the BlockSize to make tiles of my
	dataset to open it?
In-Reply-To: <1303324986886-6291815.post@n2.nabble.com>
References: <BLU150-w53925F8DE0B8C4444386FCA9930@phx.gbl>
	<4DAF18EC.4020501@pobox.com> <1303324986886-6291815.post@n2.nabble.com>
Message-ID: <4DAF3065.7050206@pobox.com>

On 11-04-20 02:43 PM, gistdt08 wrote:
> Many thanks Frank,
>
> Could be useful it for avoid OutMemoryException?

Francisco,

Reading the image one scanline at a time can be accomplished in a modest
amount of memory.  Attempting to read the whole image at once would take
... lots of memory.  So, yes I imagine so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From danf at nac.net  Wed Apr 20 16:11:14 2011
From: danf at nac.net (spalt)
Date: Wed Apr 20 16:11:16 2011
Subject: [gdal-dev] cropping a tif with lat/lon
Message-ID: <1303330274947-6292065.post@n2.nabble.com>

Hi there!

Please forgive this terribly newbie question.  Been searching all day and I
just don't get it.

I have a geotiff VFR image from the FAA with the following coordinates as
reported by gdalinfo:

Upper Left  ( -143411.876,   94058.326) ( 78d44'4.05"W, 39d49'53.24"N)
Lower Left  ( -143411.876,  -93607.521) ( 78d41'40.46"W, 38d 7'55.46"N)
Upper Right (  111698.876,   94058.326) ( 75d44'16.70"W, 39d50'10.29"N)
Lower Right (  111698.876,  -93607.521) ( 75d46'8.55"W, 38d 8'12.11"N)
Center      (  -15856.500,     225.403) ( 77d14'2.52"W, 38d59'36.84"N)

I would like to crop the file as follows:
West_Bounding_Coordinate: -78.734457
East_Bounding_Coordinate: -75.737971
North_Bounding_Coordinate: 39.843493
South_Bounding_Coordinate: 38.132073

I guess the problem is I need to convert the -78.734457 into paramaters for
gdal_translate, but when I run this it gives an error:

gdal_translate -projwin -78.734457 39.843493 -75.737971 38.132073 in.tif
out.tif

What am I missing?  Thanks!!

-Dan

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6292065.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Apr 20 16:22:19 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Apr 20 16:22:28 2011
Subject: [gdal-dev] cropping a tif with lat/lon
In-Reply-To: <1303330274947-6292065.post@n2.nabble.com>
References: <1303330274947-6292065.post@n2.nabble.com>
Message-ID: <4DAF407B.4020209@free.fr>

On 04/20/11 22:11, spalt wrote:
> I guess the problem is I need to convert the -78.734457 into paramaters for
> gdal_translate, but when I run this it gives an error:
>
> gdal_translate -projwin -78.734457 39.843493 -75.737971 38.132073 in.tif
> out.tif
>

What error ?
BTW, you are right, you must use the projected coordinates.
From danf at nac.net  Wed Apr 20 16:39:32 2011
From: danf at nac.net (spalt)
Date: Wed Apr 20 16:39:34 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <4DAF407B.4020209@free.fr>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr>
Message-ID: <1303331972376-6292152.post@n2.nabble.com>

Sorry, error is 

Input file size is 8000, 5885
Computed -srcwin 4494 2948 0 0 from projected window.
-srcwin 4494 2948 0 0 falls outside raster size of 8000x5885
or is otherwise illegal.

I am not sure I understand how to project the lat/lon.

-Dan

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6292152.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Apr 20 16:45:02 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Apr 20 16:45:11 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <1303331972376-6292152.post@n2.nabble.com>
References: <1303330274947-6292065.post@n2.nabble.com>	<4DAF407B.4020209@free.fr>
	<1303331972376-6292152.post@n2.nabble.com>
Message-ID: <4DAF45CE.1000203@free.fr>

On 04/20/11 22:39, spalt wrote:
> I am not sure I understand how to project the lat/lon.

That won't be necessary. Open your file with QGIS (or similar desktop 
application), and it will display the projected coordinates.
From danf at nac.net  Wed Apr 20 17:04:37 2011
From: danf at nac.net (spalt)
Date: Wed Apr 20 17:04:39 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <4DAF45CE.1000203@free.fr>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr>
	<1303331972376-6292152.post@n2.nabble.com>
	<4DAF45CE.1000203@free.fr>
Message-ID: <1303333477379-6292227.post@n2.nabble.com>

Thanks Jean-Claude, that works -- in QGIS i can see the border I want to crop
is -110270 89629 110288 -88560 -- but I guess what I am asking is if there
is any way to do this programmatically.. i.e. automatically turn the lat/lon
coordinates into these values. 
-Dan

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6292227.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From brian at wildsong.biz  Wed Apr 20 18:24:05 2011
From: brian at wildsong.biz (Brian Wilson)
Date: Wed Apr 20 18:24:07 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <4DAF45CE.1000203@free.fr>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr>
	<1303331972376-6292152.post@n2.nabble.com>
	<4DAF45CE.1000203@free.fr>
Message-ID: <BANLkTikVWxLmiWRq1fRVEvtmwHLJA02tZA@mail.gmail.com>

I am a newby too so I will share what I have learned lately. You can convert
from one srs to the other using the cs2cs tool from proj.4 which is probably
already installed if you have gdal.

To test it I typed this lengthy command all

cs2cs +proj=lcc +lat_1=44.33333333333334 +lat_2=46 +lat_0=43.66666666666666
\
+lon_0=-120.5 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +to +proj=latlong \
+datum=WGS84

The program starts listening on stdin and I can feed it coordinate pairs in
meters for my neighborhood by typing this on a line and hitting "Enter".
2280696 101184

It responds on stdout with the pair converted to latlong as I have
requested..
123d15'36.84"W  44d32'36.644"N 0.000

Next I use control-D to exit. Then I can go the other direction by adding
the -'I' option to the cs2cs command and I feed it the latlong pair. ('-I'
just saves me some typing.)  It responded with
2280696.01      101184.01 0.00

This is reasonably close to what I started with. (What's 1 cm among
friends?)

To make it work, you would have to know the projection that your FAA chart
is in (UTM zone something right?), convert it into the funny format that
proj.4 understands, and build a command line. Then you could put your
latlong corners into a file, feed them into cs2cs, get the corners back in
the FAA space and feed them to the gdal command. Taking a stab at it, for
zone 10N where I live I would try this

+proj=utm +zone=10 +north +ellps=GRS80 +units=m

I looked up the projection stuff with grep because I happen to know the EPSG
code for it is 102326. Then I cut and pasted. The latlong part came from
google and the cs2cs manpage.

grep 102326 /usr/local/share/proj/esri
<102326> +proj=lcc +lat_1=44.33333333333334 +lat_2=46
+lat_0=43.66666666666666 +lon_0=-120.5 +x_0=2500000 +y_0=0 +ellps=GRS80
+units=m  no_defs <>

Anyway - if I needed to do this TODAY that's what I would do because it's
now in my meager skill set. Someone inspired by my clumsiness might be
inspired now to chime in with a more elegant way to do this.

Hope this helps

Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/e7651a07/attachment.html
From danf at nac.net  Wed Apr 20 22:15:03 2011
From: danf at nac.net (spalt)
Date: Wed Apr 20 22:15:04 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <BANLkTikVWxLmiWRq1fRVEvtmwHLJA02tZA@mail.gmail.com>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr>
	<1303331972376-6292152.post@n2.nabble.com>
	<4DAF45CE.1000203@free.fr>
	<BANLkTikVWxLmiWRq1fRVEvtmwHLJA02tZA@mail.gmail.com>
Message-ID: <1303352103187-6293047.post@n2.nabble.com>

Hi Brian-
Thanks so much for your help.  That works, though I feel a little silly now
because I am realizing the lat/lon the FAA provides with these is the
corners of the entire map image, not the map itself (these maps have a lot
of white borders around them, which is what I am trying to crop).  I guess
it is back to the drawing board.  Anyway, thanks again.
-Dan

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6293047.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tian.jay at gmail.com  Wed Apr 20 22:56:26 2011
From: tian.jay at gmail.com (Tian, Jie)
Date: Wed Apr 20 22:56:28 2011
Subject: [gdal-dev] Utils problem
Message-ID: <BANLkTikzjT4k0yww2+_WePCf95OcL2dk4g@mail.gmail.com>

Hello everyone,

I'm very new to OSGeo. I just had a question. Why do I get error of "no
module named utils" when I include a line of "import utils". I'm using
OGGeo4w.
Thank you for your help.

Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/7004ced0/attachment-0001.html
From tian.jay at gmail.com  Wed Apr 20 23:00:09 2011
From: tian.jay at gmail.com (Tian, Jie)
Date: Wed Apr 20 23:00:12 2011
Subject: [gdal-dev] Utils module problem
Message-ID: <BANLkTinC6VtFrOSDtxnMPndncyBxv50WZg@mail.gmail.com>

Hello everyone,

I'm very new to OSGeo. I just had a question. Why do I get error of "no
module named utils" when I include a line of "import utils". I'm using
OGGeo4w.
Thank you for your help.

Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110420/41a67509/attachment.html
From rush at winkey.org  Thu Apr 21 00:39:38 2011
From: rush at winkey.org (Brian Case)
Date: Thu Apr 21 00:39:47 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <1303352103187-6293047.post@n2.nabble.com>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr> <1303331972376-6292152.post@n2.nabble.com>
	<4DAF45CE.1000203@free.fr>
	<BANLkTikVWxLmiWRq1fRVEvtmwHLJA02tZA@mail.gmail.com>
	<1303352103187-6293047.post@n2.nabble.com>
Message-ID: <1303360778.25589.3.camel@octopi>

Dan

use nearblack to add a alpha or mask band, and collar the image

Brian


On Wed, 2011-04-20 at 19:15 -0700, spalt wrote:
> Hi Brian-
> Thanks so much for your help.  That works, though I feel a little silly now
> because I am realizing the lat/lon the FAA provides with these is the
> corners of the entire map image, not the map itself (these maps have a lot
> of white borders around them, which is what I am trying to crop).  I guess
> it is back to the drawing board.  Anyway, thanks again.
> -Dan
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6293047.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From kiren.zahra at gmail.com  Thu Apr 21 03:07:52 2011
From: kiren.zahra at gmail.com (kiren zahra)
Date: Thu Apr 21 03:07:53 2011
Subject: [gdal-dev] gdal Map viewer
Message-ID: <BANLkTikuM7jYO8EwLFSVPwG1ZXBRkyKBdg@mail.gmail.com>

hi, i  want to ask* How can i display a 3 D mesh in C# ...when i have values
of LONGITUDE , LATITUDE AND ELEVATION ?*
kindly help me plz
regards,
kiren
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110421/b96cc942/attachment.html
From chaitanya.ch at gmail.com  Thu Apr 21 07:32:22 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 21 07:32:27 2011
Subject: [gdal-dev] gdal Map viewer
In-Reply-To: <BANLkTikuM7jYO8EwLFSVPwG1ZXBRkyKBdg@mail.gmail.com>
References: <BANLkTikuM7jYO8EwLFSVPwG1ZXBRkyKBdg@mail.gmail.com>
Message-ID: <BANLkTimt3ZmZs=LHX8-4yi3RPLGZskfKLA@mail.gmail.com>

Kiren,

To display 3D data, first you have to select a library that handles 3D
rendering. OpenGL is a good starting point for selections.

Get back to this list if you have any problem retrieving the long/lat/elev
data from the data source.

On Thu, Apr 21, 2011 at 12:37 PM, kiren zahra <kiren.zahra@gmail.com> wrote:

> hi, i  want to ask* How can i display a 3 D mesh in C# ...when i have
> values of LONGITUDE , LATITUDE AND ELEVATION ?*
> kindly help me plz
> regards,
> kiren
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110421/06f8c4c1/attachment.html
From rajjad at gmail.com  Thu Apr 21 07:33:10 2011
From: rajjad at gmail.com (Imran Rajjad)
Date: Thu Apr 21 07:33:11 2011
Subject: [gdal-dev] looking for executable binaries for solaris10
Message-ID: <BANLkTi=wFsSQk9vO+VNg6cjpt_+hVQSp_g@mail.gmail.com>

hi,

is there any executable binary version for solaris 10?

regards,
Imran

-- 
I.R
From warmerdam at pobox.com  Thu Apr 21 08:00:47 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 21 08:00:51 2011
Subject: [gdal-dev] Utils module problem
In-Reply-To: <BANLkTinC6VtFrOSDtxnMPndncyBxv50WZg@mail.gmail.com>
References: <BANLkTinC6VtFrOSDtxnMPndncyBxv50WZg@mail.gmail.com>
Message-ID: <4DB01C6F.7050406@pobox.com>

On 11-04-20 11:00 PM, Tian, Jie wrote:
> Hello everyone,
>
> I'm very new to OSGeo. I just had a question. Why do I get error of "no module
> named utils" when I include a line of "import utils". I'm using OGGeo4w.
> Thank you for your help.

Jay,

I am not familiar with a utils module.  I don't have it on other
Python installations either.  Evidently it means pretty much what it
says - that such a module does not exist.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From creta.kano at gmail.com  Thu Apr 21 09:08:43 2011
From: creta.kano at gmail.com (Sophia Parafina)
Date: Thu Apr 21 08:53:54 2011
Subject: [gdal-dev] looking for executable binaries for solaris10
In-Reply-To: <BANLkTi=wFsSQk9vO+VNg6cjpt_+hVQSp_g@mail.gmail.com>
References: <BANLkTi=wFsSQk9vO+VNg6cjpt_+hVQSp_g@mail.gmail.com>
Message-ID: <0424FED9-7CC8-4F87-8817-A96ECDE98511@gmail.com>

I don't there are any prebuilt binaries for Solaris. I've built gdal using the tool chain (gcc, bison, etc) from here http://www.sunfreeware.com/

sophia


On Apr 21, 2011, at 4:33 AM, Imran Rajjad <rajjad@gmail.com> wrote:

> hi,
> 
> is there any executable binary version for solaris 10?
> 
> regards,
> Imran
> 
> -- 
> I.R
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From rajjad at gmail.com  Thu Apr 21 08:55:54 2011
From: rajjad at gmail.com (Imran Rajjad)
Date: Thu Apr 21 08:55:57 2011
Subject: [gdal-dev] looking for executable binaries for solaris10
In-Reply-To: <0424FED9-7CC8-4F87-8817-A96ECDE98511@gmail.com>
References: <BANLkTi=wFsSQk9vO+VNg6cjpt_+hVQSp_g@mail.gmail.com>
	<0424FED9-7CC8-4F87-8817-A96ECDE98511@gmail.com>
Message-ID: <BANLkTi=spfw-CtjTHqWZ6sAusmQSidTk+w@mail.gmail.com>

hi Sophia,

is there any proper walk through or tutorial with steps?

regards,
Imran

On Thu, Apr 21, 2011 at 6:08 PM, Sophia Parafina <creta.kano@gmail.com> wrote:
> I don't there are any prebuilt binaries for Solaris. I've built gdal using the tool chain (gcc, bison, etc) from here http://www.sunfreeware.com/
>
> sophia
>
>
> On Apr 21, 2011, at 4:33 AM, Imran Rajjad <rajjad@gmail.com> wrote:
>
>> hi,
>>
>> is there any executable binary version for solaris 10?
>>
>> regards,
>> Imran
>>
>> --
>> I.R
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
I.R
From creta.kano at gmail.com  Thu Apr 21 09:20:26 2011
From: creta.kano at gmail.com (Sophia Parafina)
Date: Thu Apr 21 09:05:50 2011
Subject: [gdal-dev] looking for executable binaries for solaris10
In-Reply-To: <BANLkTi=spfw-CtjTHqWZ6sAusmQSidTk+w@mail.gmail.com>
References: <BANLkTi=wFsSQk9vO+VNg6cjpt_+hVQSp_g@mail.gmail.com>
	<0424FED9-7CC8-4F87-8817-A96ECDE98511@gmail.com>
	<BANLkTi=spfw-CtjTHqWZ6sAusmQSidTk+w@mail.gmail.com>
Message-ID: <56BFA542-3308-4EF7-A8FF-0231CBFF6AF0@gmail.com>

Not that I know of, I recall you need to install gcc, bison, and readline at minimum. Running ./configure will tell you what you are missing. When it stops complaining, run make :)

sophia



On Apr 21, 2011, at 5:55 AM, Imran Rajjad <rajjad@gmail.com> wrote:

> hi Sophia,
> 
> is there any proper walk through or tutorial with steps?
> 
> regards,
> Imran
> 
> On Thu, Apr 21, 2011 at 6:08 PM, Sophia Parafina <creta.kano@gmail.com> wrote:
>> I don't there are any prebuilt binaries for Solaris. I've built gdal using the tool chain (gcc, bison, etc) from here http://www.sunfreeware.com/
>> 
>> sophia
>> 
>> 
>> On Apr 21, 2011, at 4:33 AM, Imran Rajjad <rajjad@gmail.com> wrote:
>> 
>>> hi,
>>> 
>>> is there any executable binary version for solaris 10?
>>> 
>>> regards,
>>> Imran
>>> 
>>> --
>>> I.R
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 
> 
> 
> -- 
> I.R
From b.morabito at tdnet.it  Thu Apr 21 09:43:56 2011
From: b.morabito at tdnet.it (morabit)
Date: Thu Apr 21 09:44:04 2011
Subject: [gdal-dev] Resampling with GDAL Warp API
Message-ID: <1303393436155-6293952.post@n2.nabble.com>

Hi All,
  in our project we have to resample some datasets
(specifically dted tiles) and we want to use the
GDAL Warp API.
>From the API tutorial in the online documentation
is not clear how to accomplish this task.
Another complication is due to the fact that
we want to produce the result of resampling
in a memory buffer to perform some custom
post-processing specifc of our application.
Could you send us some snippet of code 
using the Warp API for this specific task 
or some hints on the matter?
To obtain the "in memory" result we could
use the GDALWarpOperation.warpRegionToBuffer?
Thank you in advance for the attention.

Bruno M.

    

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Resampling-with-GDAL-Warp-API-tp6293952p6293952.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jsimpson at wxtrends.com  Thu Apr 21 11:50:28 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Apr 21 11:50:31 2011
Subject: [gdal-dev] gdal2tiles.py issue
Message-ID: <BANLkTi=NqHnLt6K1Y=JkHeJA5n3=6NnZMg@mail.gmail.com>

Hi guys:

I posted a similar question a week or so ago, but have slightly
different information that might help me reach a solution.

I'm using gdal2tiles.py to tile up an image for google maps.  It works
great right up to the 180th meridian.  That's where it introduces a
transparent strip on the edge of the image.
Here's the original image:  http://maps.craniumjuice.com/TMXF.png
Here's a screen shot showing the gap:  http://maps.craniumjuice.com/gap.png

If I slice up the original file using imagemagick, there's no gap at
the border. It takes forever and I didn't get a screen shot.  Plus the
Y values are flipped so it doesn't overlay properly, it was just a
proof of concept that the full image is really there, it definitely
is.

Any ideas what could be causing the transparent strip at the end?

This gdal2tiles.py command gives me the gap from the screen shot:
gdal2tiles.py -s EPSG:4326 -z 2 TMXF.png .

I also tried treating it as just a raster file and got really bizarre results:
gdal2tiles.py -p raster -z 2 TMXF.png .

If I use an image that's the size of the original data, I don't get
all the images.

If I use gdal_translate to make it a 4096x4096 image, it gives me all
the tiles, but they're not right either.  That gives me a 64x64 image
with the rest of the 256x256 of the image transparent.
http://maps.craniumjuice.com/1.png

I'm sure there's some setting or something I can do to get the full
image tiled up with out adding these transparent stripes around the
tile, I just can't find it.

I'm using GDAL 1.8.0, released 2011/01/12

I appreciate any insight you might be able to give.

Thanks

Jerl
From brian at wildsong.biz  Thu Apr 21 12:45:06 2011
From: brian at wildsong.biz (Brian Wilson)
Date: Thu Apr 21 12:45:09 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <1303352103187-6293047.post@n2.nabble.com>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr>
	<1303331972376-6292152.post@n2.nabble.com>
	<4DAF45CE.1000203@free.fr>
	<BANLkTikVWxLmiWRq1fRVEvtmwHLJA02tZA@mail.gmail.com>
	<1303352103187-6293047.post@n2.nabble.com>
Message-ID: <BANLkTik_uYhauJFTVZjRKYxZ4mgbZTHeYg@mail.gmail.com>

I keep a lot of my memory on a wiki because I am so forgetful.
This page might help you.

http://wildsong.biz/index.php?title=Mapping_Vietnam

A couple months ago I was working with decollaring GeoPDF files from scanned
maps of Vietnam. They are set up the same way as you describe, with one set
of corner points indicates the edge of the paper map with collar attached
and a second set is a polygon around the actual map area.

I think the write up is good enough not to copy it here. Please look at it
and let me know.

Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110421/d751d2a3/attachment.html
From Cameron.Ackerman at usace.army.mil  Thu Apr 21 13:26:44 2011
From: Cameron.Ackerman at usace.army.mil (Ackerman, Cameron T HEC)
Date: Thu Apr 21 13:26:49 2011
Subject: [gdal-dev] help (UNCLASSIFIED)
Message-ID: <C9460F989F791542863F5B5488B6F70E36DFA7@iwr-ml1cpc.iwr.ds.usace.army.mil>

Classification: UNCLASSIFIED
Caveats: NONE



Cameron Ackerman, P.E., D.WRE
Senior Hydraulic Engineer
US Army Corps of Engineers | Institute for Water Resources | Hydrologic
Engineering Center
609 Second St., Davis CA 95616
530.756.1104
 
cameron.ackerman@usace.army.mil
www.hec.usace.army.mil


Classification: UNCLASSIFIED
Caveats: NONE


From dhdeangelis.listas at gmail.com  Thu Apr 21 13:31:00 2011
From: dhdeangelis.listas at gmail.com (=?ISO-8859-1?Q?Hern=E1n_De_Angelis?=)
Date: Thu Apr 21 13:31:02 2011
Subject: [gdal-dev] Modis data level1b
In-Reply-To: <BANLkTikz3vsg=NSHvWks96ce7zCVWau7ag@mail.gmail.com>
References: <BANLkTikz3vsg=NSHvWks96ce7zCVWau7ag@mail.gmail.com>
Message-ID: <BANLkTi=oPqZ1R9_bB8_L_muoJZxKzFU+gw@mail.gmail.com>

You need mrtswath, the MODIS reprojection tool:

https://lpdaac.usgs.gov/lpdaac/tools/modis_reprojection_tool_swath


good luck,

H.


2011/4/19 Nikolaos Hatzopoulos <nhatzop@gmail.com>:
> Hi,
>
> I have modis level1b data and I have two hdf files a mod03 with the
> georeference
> and a mod02 with the bands how I can combine these files to make a nice
> geotif in gdal?
>
> note: hdfeos files are files with the georeference and the bands but for
> disk space reasons I have two files
>
> --Nikos Hatzopoulos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From viswaug at yahoo.com  Thu Apr 21 15:25:05 2011
From: viswaug at yahoo.com (viswaug)
Date: Thu Apr 21 15:25:06 2011
Subject: [gdal-dev] Getting GDAL to work with proj.4 on windows
Message-ID: <1303413905219-6295300.post@n2.nabble.com>

Hi all,

I am trying to setup a windows for development with GDAL and PROJ.4 with
python bindings. I am running Python2.5 on the machine. 

I got the GDAL binaries from here
http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

and the GDAL python bindings from here
http://pypi.python.org/packages/2.5/G/GDAL/GDAL-1.6.0.win32-py2.5.exe#md5=1e0ff5c2da337a6ac9af3e5320aa3366

I also installed PROJ.4 binaries from here
http://download.osgeo.org/proj/proj446_win32_bin.zip

I also installed the pyproj bindings from here
http://code.google.com/p/pyproj/downloads/detail?name=pyproj-1.8.8-1.win32-py2.5.exe&can=2&q=

I am trying not to mess with the environment variables and system variables
on the machine. So, I copied the GDAL binaries into the 'osgeo' folder of
the python site-pacakge. This seemed to do the trick and I was able to fire
up my python interpreter and work with GDAL. I also copied the proj.dll from
the PROJ.4 binaries and copied it to the osgeo folder. But I am not able to
transform coordinates in GDAL. When I try to transform coordinates, I end up
with the error

"unable to load proj.4 library (proj.dll), creation of
OGRCoordinateTransformation failed"

Any thoughts/ideas on what I am doing wrong here? Any help with this issue
would be greatly appreciated.

Thank You,
Vish

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Getting-GDAL-to-work-with-proj-4-on-windows-tp6295300p6295300.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From danf at nac.net  Thu Apr 21 15:27:10 2011
From: danf at nac.net (spalt)
Date: Thu Apr 21 15:27:13 2011
Subject: [gdal-dev] Re: cropping a tif with lat/lon
In-Reply-To: <BANLkTik_uYhauJFTVZjRKYxZ4mgbZTHeYg@mail.gmail.com>
References: <1303330274947-6292065.post@n2.nabble.com>
	<4DAF407B.4020209@free.fr>
	<1303331972376-6292152.post@n2.nabble.com>
	<4DAF45CE.1000203@free.fr>
	<BANLkTikVWxLmiWRq1fRVEvtmwHLJA02tZA@mail.gmail.com>
	<1303352103187-6293047.post@n2.nabble.com>
	<BANLkTik_uYhauJFTVZjRKYxZ4mgbZTHeYg@mail.gmail.com>
Message-ID: <1303414030681-6295306.post@n2.nabble.com>

That's a great resource, thx!  I think what I'm missing in order to do the
collar thing is a polygon from the FAA that goes around the actual map
portion of the image.  I've scoured the FAA site and its just not there. 
(They have a set of DVD's that contain this same map data that you need to
pay $$$ for to so my suspicion is its there..)

Anyway, what I've been doing is opening each map in QGPS, manually pointing
to the corners and recording them in a database.  Kind of a pain but the
area plotted in the maps doesn't change much so I will only need to do it
once.  Then I can quickly process the whole set without any trouble.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6295306.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From nhatzop at gmail.com  Thu Apr 21 18:49:27 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Apr 21 18:49:30 2011
Subject: [gdal-dev] Getting GDAL to work with proj.4 on windows
In-Reply-To: <1303413905219-6295300.post@n2.nabble.com>
References: <1303413905219-6295300.post@n2.nabble.com>
Message-ID: <BANLkTimUoiaASa25Xu4HuzN2rwm2n-f1Zw@mail.gmail.com>

I think you need to setup the environmental variable:
PROJ_LIB=$FWTOOLS_HOME/share/proj

--Nikos Hatzopoulos

On Thu, Apr 21, 2011 at 12:25 PM, viswaug <viswaug@yahoo.com> wrote:

> Hi all,
>
> I am trying to setup a windows for development with GDAL and PROJ.4 with
> python bindings. I am running Python2.5 on the machine.
>
> I got the GDAL binaries from here
> http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip
>
> and the GDAL python bindings from here
>
> http://pypi.python.org/packages/2.5/G/GDAL/GDAL-1.6.0.win32-py2.5.exe#md5=1e0ff5c2da337a6ac9af3e5320aa3366
>
> I also installed PROJ.4 binaries from here
> http://download.osgeo.org/proj/proj446_win32_bin.zip
>
> I also installed the pyproj bindings from here
>
> http://code.google.com/p/pyproj/downloads/detail?name=pyproj-1.8.8-1.win32-py2.5.exe&can=2&q=
>
> I am trying not to mess with the environment variables and system variables
> on the machine. So, I copied the GDAL binaries into the 'osgeo' folder of
> the python site-pacakge. This seemed to do the trick and I was able to fire
> up my python interpreter and work with GDAL. I also copied the proj.dll
> from
> the PROJ.4 binaries and copied it to the osgeo folder. But I am not able to
> transform coordinates in GDAL. When I try to transform coordinates, I end
> up
> with the error
>
> "unable to load proj.4 library (proj.dll), creation of
> OGRCoordinateTransformation failed"
>
> Any thoughts/ideas on what I am doing wrong here? Any help with this issue
> would be greatly appreciated.
>
> Thank You,
> Vish
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Getting-GDAL-to-work-with-proj-4-on-windows-tp6295300p6295300.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110421/09dc3ccf/attachment.html
From nhatzop at gmail.com  Thu Apr 21 18:52:06 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Apr 21 18:52:09 2011
Subject: [gdal-dev] Modis data level1b
In-Reply-To: <BANLkTi=oPqZ1R9_bB8_L_muoJZxKzFU+gw@mail.gmail.com>
References: <BANLkTikz3vsg=NSHvWks96ce7zCVWau7ag@mail.gmail.com>
	<BANLkTi=oPqZ1R9_bB8_L_muoJZxKzFU+gw@mail.gmail.com>
Message-ID: <BANLkTimHOeHcX6SYiY0stBfianA=poT90Q@mail.gmail.com>

yes I was looking to do the processing though gdal which has better
development
environment for image processing :)

2011/4/21 Hern?n De Angelis <dhdeangelis.listas@gmail.com>

> You need mrtswath, the MODIS reprojection tool:
>
> https://lpdaac.usgs.gov/lpdaac/tools/modis_reprojection_tool_swath
>
>
> good luck,
>
> H.
>
>
> 2011/4/19 Nikolaos Hatzopoulos <nhatzop@gmail.com>:
> > Hi,
> >
> > I have modis level1b data and I have two hdf files a mod03 with the
> > georeference
> > and a mod02 with the bands how I can combine these files to make a nice
> > geotif in gdal?
> >
> > note: hdfeos files are files with the georeference and the bands but for
> > disk space reasons I have two files
> >
> > --Nikos Hatzopoulos
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110421/0359edc6/attachment.html
From chaitanya.ch at gmail.com  Fri Apr 22 04:11:31 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Apr 22 04:11:34 2011
Subject: [gdal-dev] cropping a tif with lat/lon
In-Reply-To: <1303330274947-6292065.post@n2.nabble.com>
References: <1303330274947-6292065.post@n2.nabble.com>
Message-ID: <BANLkTin4RY8ggNQtfRS9TeyNk8xur3SiPw@mail.gmail.com>

Dan,

Can you tell what your error message was?

On Thu, Apr 21, 2011 at 1:41 AM, spalt <danf@nac.net> wrote:

> Hi there!
>
> Please forgive this terribly newbie question.  Been searching all day and I
> just don't get it.
>
> I have a geotiff VFR image from the FAA with the following coordinates as
> reported by gdalinfo:
>
> Upper Left  ( -143411.876,   94058.326) ( 78d44'4.05"W, 39d49'53.24"N)
> Lower Left  ( -143411.876,  -93607.521) ( 78d41'40.46"W, 38d 7'55.46"N)
> Upper Right (  111698.876,   94058.326) ( 75d44'16.70"W, 39d50'10.29"N)
> Lower Right (  111698.876,  -93607.521) ( 75d46'8.55"W, 38d 8'12.11"N)
> Center      (  -15856.500,     225.403) ( 77d14'2.52"W, 38d59'36.84"N)
>
> I would like to crop the file as follows:
> West_Bounding_Coordinate: -78.734457
> East_Bounding_Coordinate: -75.737971
> North_Bounding_Coordinate: 39.843493
> South_Bounding_Coordinate: 38.132073
>
> I guess the problem is I need to convert the -78.734457 into paramaters for
> gdal_translate, but when I run this it gives an error:
>
> gdal_translate -projwin -78.734457 39.843493 -75.737971 38.132073 in.tif
> out.tif
>
> What am I missing?  Thanks!!
>
> -Dan
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/cropping-a-tif-with-lat-lon-tp6292065p6292065.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110422/9fe64010/attachment-0001.html
From matthew.pettis at gmail.com  Fri Apr 22 09:22:39 2011
From: matthew.pettis at gmail.com (Matthew Pettis)
Date: Fri Apr 22 09:22:41 2011
Subject: [gdal-dev] Extract Extent or Bounding Box for a subset of shapes
	for a shapefile
Message-ID: <BANLkTikEaFnySc1daLuzhHQ8ZNK71XdL-w@mail.gmail.com>

Hi All,

I think this is the right list for the question below, as I cannot find a
different list that matches my question better.

I'm using ogr2ogr and ogrinfo (v1.4), and I want to extract the extent from
the result of a subsetting where argument.  I have a solution here that
works but I'm wondering if I'm missing some more obvious solution.  In a
bash script, I do the following (the core snippet only, as I took out the
shebang and option-getting/setting code:)

---------------------------
rm -rf /tmp/tmpshpfile.*

ogr2ogr -where "$WHERECLAUSE" /tmp/tmpshpfile.shp "$FILE"

ogrinfo -ro -so -al /tmp/tmpshpfile.shp | \
    grep Extent | \
    tr -d '[:alpha:]:() -' | \
    tr ',' ' '

rm -rf /tmp/tmpshpfile.*
---------------------------

I can use it as follows:

---------------------------
$ ./bbox.sh -f /path/to/shp/shp_counties.shp -w "COUNTY_NAME='Yellow
Medicine'"
226206.484375 4934737.000000313007.250000 4979500.500000
---------------------------

Where the argument to '-w' is put into the '$WHERECLAUSE' variable in the
script.

This works.  As I wrote, though, am I missing something obvious in
command-line switches to either of these programs that would simplify this
so I wouldn't have to use this script?  Or is there some other, better way
of doing this?  Also, is there a way to pipe the output of ogr2ogr on stdout
directly to the stdin of ogrinfo?

Thanks,
Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110422/92494b4b/attachment.html
From sigfrido at tiscali.it  Fri Apr 22 10:14:46 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri Apr 22 10:14:51 2011
Subject: [gdal-dev] Extract Extent or Bounding Box for a subset of
	shapes for a shapefile
In-Reply-To: <BANLkTikEaFnySc1daLuzhHQ8ZNK71XdL-w@mail.gmail.com>
References: <BANLkTikEaFnySc1daLuzhHQ8ZNK71XdL-w@mail.gmail.com>
Message-ID: <1303481686.2194.35.camel@GOLEM>


Hi Matthew,

Your question is interesting. ogrinfo -where seemed to be the answer,
but...

I tried ogrinfo with the -where "sql where" option with both MapInfo and
PostGIS layers. In your case it should be:

ogrinfo -ro -so -al -where "$WHERECLAUSE" "whole_shapefile.shp"

The returned extent is always the same, regardless of the presence or
composition of the -where clause, so it refers to the whole layer rather
than to the selected features.
(I'm using GDAL 1.9 dev)

Is this the expected behaviour of ogrinfo -where "..."? Or sould -where
affect the returned Extent too?

Thank you all

Sig

Il giorno ven, 22/04/2011 alle 08.22 -0500, Matthew Pettis ha scritto:
> Hi All, 
> 
> 
> I think this is the right list for the question below, as I cannot
> find a different list that matches my question better.
> 
> 
> I'm using ogr2ogr and ogrinfo (v1.4), and I want to extract the extent
> from the result of a subsetting where argument.  I have a solution
> here that works but I'm wondering if I'm missing some more obvious
> solution.  In a bash script, I do the following (the core snippet
> only, as I took out the shebang and option-getting/setting code:)
> 
> 
> ---------------------------
> rm -rf /tmp/tmpshpfile.*
> 
> 
> ogr2ogr -where "$WHERECLAUSE" /tmp/tmpshpfile.shp "$FILE"
> 
> 
> ogrinfo -ro -so -al /tmp/tmpshpfile.shp | \
>     grep Extent | \
>     tr -d '[:alpha:]:() -' | \
>     tr ',' ' '
> 
> 
> rm -rf /tmp/tmpshpfile.*
> ---------------------------
> 
> 
> I can use it as follows:
> 
> 
> ---------------------------
> $ ./bbox.sh -f /path/to/shp/shp_counties.shp -w "COUNTY_NAME='Yellow
> Medicine'"
> 226206.484375 4934737.000000313007.250000 4979500.500000
> ---------------------------
> 
> 
> Where the argument to '-w' is put into the '$WHERECLAUSE' variable in
> the script.
> 
> 
> This works.  As I wrote, though, am I missing something obvious in
> command-line switches to either of these programs that would simplify
> this so I wouldn't have to use this script?  Or is there some other,
> better way of doing this?  Also, is there a way to pipe the output of
> ogr2ogr on stdout directly to the stdin of ogrinfo?
> 
> 
> Thanks,
> Matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Fri Apr 22 10:50:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Apr 22 10:50:20 2011
Subject: [gdal-dev] Extract Extent or Bounding Box for a subset of shapes
	for a shapefile
In-Reply-To: <1303481686.2194.35.camel@GOLEM>
References: <BANLkTikEaFnySc1daLuzhHQ8ZNK71XdL-w@mail.gmail.com>
	<1303481686.2194.35.camel@GOLEM>
Message-ID: <BANLkTik-7FqFRjeD2O7YCd+7AgTCc=RPGQ@mail.gmail.com>

Sig,

ogrinfo doesn't force the recomputation of extent. It is considered as a
costly operation. ogrinfo just reports the stored extent.
Whereas in ogr2ogr, creating a new file automatically computes the extents.

On Fri, Apr 22, 2011 at 7:44 PM, Luca Sigfrido Percich
<sigfrido@tiscali.it>wrote:

>
> Hi Matthew,
>
> Your question is interesting. ogrinfo -where seemed to be the answer,
> but...
>
> I tried ogrinfo with the -where "sql where" option with both MapInfo and
> PostGIS layers. In your case it should be:
>
> ogrinfo -ro -so -al -where "$WHERECLAUSE" "whole_shapefile.shp"
>
> The returned extent is always the same, regardless of the presence or
> composition of the -where clause, so it refers to the whole layer rather
> than to the selected features.
> (I'm using GDAL 1.9 dev)
>
> Is this the expected behaviour of ogrinfo -where "..."? Or sould -where
> affect the returned Extent too?
>
> Thank you all
>
> Sig
>
> Il giorno ven, 22/04/2011 alle 08.22 -0500, Matthew Pettis ha scritto:
> > Hi All,
> >
> >
> > I think this is the right list for the question below, as I cannot
> > find a different list that matches my question better.
> >
> >
> > I'm using ogr2ogr and ogrinfo (v1.4), and I want to extract the extent
> > from the result of a subsetting where argument.  I have a solution
> > here that works but I'm wondering if I'm missing some more obvious
> > solution.  In a bash script, I do the following (the core snippet
> > only, as I took out the shebang and option-getting/setting code:)
> >
> >
> > ---------------------------
> > rm -rf /tmp/tmpshpfile.*
> >
> >
> > ogr2ogr -where "$WHERECLAUSE" /tmp/tmpshpfile.shp "$FILE"
> >
> >
> > ogrinfo -ro -so -al /tmp/tmpshpfile.shp | \
> >     grep Extent | \
> >     tr -d '[:alpha:]:() -' | \
> >     tr ',' ' '
> >
> >
> > rm -rf /tmp/tmpshpfile.*
> > ---------------------------
> >
> >
> > I can use it as follows:
> >
> >
> > ---------------------------
> > $ ./bbox.sh -f /path/to/shp/shp_counties.shp -w "COUNTY_NAME='Yellow
> > Medicine'"
> > 226206.484375 4934737.000000313007.250000 4979500.500000
> > ---------------------------
> >
> >
> > Where the argument to '-w' is put into the '$WHERECLAUSE' variable in
> > the script.
> >
> >
> > This works.  As I wrote, though, am I missing something obvious in
> > command-line switches to either of these programs that would simplify
> > this so I wouldn't have to use this script?  Or is there some other,
> > better way of doing this?  Also, is there a way to pipe the output of
> > ogr2ogr on stdout directly to the stdin of ogrinfo?
> >
> >
> > Thanks,
> > Matt
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110422/d1cadc24/attachment.html
From sigfrido at tiscali.it  Fri Apr 22 11:39:24 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri Apr 22 11:39:31 2011
Subject: [gdal-dev] Extract Extent or Bounding Box for a subset of
	shapes for a shapefile
In-Reply-To: <BANLkTik-7FqFRjeD2O7YCd+7AgTCc=RPGQ@mail.gmail.com>
References: <BANLkTikEaFnySc1daLuzhHQ8ZNK71XdL-w@mail.gmail.com>
	<1303481686.2194.35.camel@GOLEM>
	<BANLkTik-7FqFRjeD2O7YCd+7AgTCc=RPGQ@mail.gmail.com>
Message-ID: <1303486764.2194.74.camel@GOLEM>

Thank you Chaitanya.

I think that this makes great sense when dealing with a summary of the
whole layer, especially because a lot of formats store the extent in the
layer metadata/header.

But if I need to dump all the features, or to get a dump or summary of a
filtered set of features (in which case I presume ogr will scan all the
features to apply the filter), checking for boundary limits shouldn't
add much cost to the already expensive operation.

Probably this goes beyond the intended scope of ogrinfo. And Matthew's
workaround works fine.

Thanks again

Sig



Il giorno ven, 22/04/2011 alle 20.20 +0530, Chaitanya kumar CH ha
scritto:
> Sig,
> 
> ogrinfo doesn't force the recomputation of extent. It is considered as
> a costly operation. ogrinfo just reports the stored extent.
> Whereas in ogr2ogr, creating a new file automatically computes the
> extents.

From Jennings.Jay at geoeye.com  Fri Apr 22 11:40:23 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Fri Apr 22 11:40:12 2011
Subject: [gdal-dev] Polygonize from C# ?
Message-ID: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>

Hi list,
Can anyone point to any guidance or (preferably) examples on using GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there are some unexplained parameters, e.g. "string[] options".

My eventual goal is to open a raster and produce a WKT POLYGON string enclosing the "good" (non-NoData) area of the raster.  Thanks.

.........................................................
Jay Jennings
Senior Software Developer
(NASDAQ: GEOY)
jennings.jay@geoeye.com




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110422/f7339635/attachment-0001.html
From even.rouault at mines-paris.org  Fri Apr 22 11:44:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 22 11:45:00 2011
Subject: [gdal-dev] Polygonize from C# ?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
Message-ID: <1303487092.4db1a2742f448@webmail.free.fr>

Selon Jay Jennings <Jennings.Jay@geoeye.com>:

Generally, refering to the C/C++ doc is a good way of finding the info :

See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1

> Hi list,
> Can anyone point to any guidance or (preferably) examples on using
> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there
> are some unexplained parameters, e.g. "string[] options".
>
> My eventual goal is to open a raster and produce a WKT POLYGON string
> enclosing the "good" (non-NoData) area of the raster.  Thanks.
>
> .........................................................
> Jay Jennings
> Senior Software Developer
> (NASDAQ: GEOY)
> jennings.jay@geoeye.com
>
>
>
>
>


From jsimpson at wxtrends.com  Fri Apr 22 13:32:55 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Fri Apr 22 13:32:58 2011
Subject: [gdal-dev] gdal2tiles.py issue
In-Reply-To: <BANLkTinnjSU9bpGivCGYTO1aGzFq6yUWfg@mail.gmail.com>
References: <BANLkTi=NqHnLt6K1Y=JkHeJA5n3=6NnZMg@mail.gmail.com>
	<BANLkTinnjSU9bpGivCGYTO1aGzFq6yUWfg@mail.gmail.com>
Message-ID: <BANLkTikwr+MnyVXLq2GfoG02n6q7+2GKEQ@mail.gmail.com>

Thank you thank you thank you,  GREATLY appreciated!

Typed with thumbs...
On Apr 22, 2011 12:25 PM, "Klokan Petr Pridal" <klokan@klokan.cz> wrote:
> Hi Jerl,
>
> please read this issue report:
>
> http://code.google.com/p/maptiler/issues/detail?id=6
>
> It gives you also explanation and also workaround for this problem
>
> Best regards,
>
> Petr alias Klokan
>
> On Thu, Apr 21, 2011 at 5:50 PM, Jerl Simpson <jsimpson@wxtrends.com>
wrote:
>> Hi guys:
>>
>> I posted a similar question a week or so ago, but have slightly
>> different information that might help me reach a solution.
>>
>> I'm using gdal2tiles.py to tile up an image for google maps.  It works
>> great right up to the 180th meridian.  That's where it introduces a
>> transparent strip on the edge of the image.
>> Here's the original image:  http://maps.craniumjuice.com/TMXF.png
>> Here's a screen shot showing the gap:
http://maps.craniumjuice.com/gap.png
>>
>> If I slice up the original file using imagemagick, there's no gap at
>> the border. It takes forever and I didn't get a screen shot.  Plus the
>> Y values are flipped so it doesn't overlay properly, it was just a
>> proof of concept that the full image is really there, it definitely
>> is.
>>
>> Any ideas what could be causing the transparent strip at the end?
>>
>> This gdal2tiles.py command gives me the gap from the screen shot:
>> gdal2tiles.py -s EPSG:4326 -z 2 TMXF.png .
>>
>> I also tried treating it as just a raster file and got really bizarre
results:
>> gdal2tiles.py -p raster -z 2 TMXF.png .
>>
>> If I use an image that's the size of the original data, I don't get
>> all the images.
>>
>> If I use gdal_translate to make it a 4096x4096 image, it gives me all
>> the tiles, but they're not right either.  That gives me a 64x64 image
>> with the rest of the 256x256 of the image transparent.
>> http://maps.craniumjuice.com/1.png
>>
>> I'm sure there's some setting or something I can do to get the full
>> image tiled up with out adding these transparent stripes around the
>> tile, I just can't find it.
>>
>> I'm using GDAL 1.8.0, released 2011/01/12
>>
>> I appreciate any insight you might be able to give.
>>
>> Thanks
>>
>> Jerl
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> http://blog.klokan.cz/
> http://www.maptiler.org/
> http://www.oldmapsonline.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110422/cb729a36/attachment.html
From Jennings.Jay at geoeye.com  Fri Apr 22 13:45:51 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Fri Apr 22 13:45:39 2011
Subject: [gdal-dev] Polygonize from C# ?
In-Reply-To: <1303487092.4db1a2742f448@webmail.free.fr>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
	<1303487092.4db1a2742f448@webmail.free.fr>
Message-ID: <44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>

I see, thanks.  But since I have satellite images, this part of the doc is alarming: "...For non-thematic raster data (such as satellite images) 
the result will essentially be one small polygon per pixel, and memory and output layer sizes will be substantial. The algorithm is primarily 
intended for relatively simple thematic imagery, masks, and classification results".

I just want one polygon enclosing the non-zero pixels (or alternatively, enclosing the zero pixels, then I could do a geometric 
difference).  Is there any way to trick the method into doing that, to maybe avoid the heavy resource needs ?


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, April 22, 2011 11:45 AM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Polygonize from C# ?

Selon Jay Jennings <Jennings.Jay@geoeye.com>:

Generally, refering to the C/C++ doc is a good way of finding the info :

See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1

> Hi list,
> Can anyone point to any guidance or (preferably) examples on using
> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there
> are some unexplained parameters, e.g. "string[] options".
>
> My eventual goal is to open a raster and produce a WKT POLYGON string
> enclosing the "good" (non-NoData) area of the raster.  Thanks.
>
> .........................................................
> Jay Jennings
> Senior Software Developer
> (NASDAQ: GEOY)
> jennings.jay@geoeye.com
>
>
>
>
>


From elijah at villagis.com  Fri Apr 22 14:06:46 2011
From: elijah at villagis.com (Elijah Robison)
Date: Fri Apr 22 14:06:56 2011
Subject: [gdal-dev] Polygonize from C# ?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>	<1303487092.4db1a2742f448@webmail.free.fr>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>
Message-ID: <4DB1C3B6.4010104@villagis.com>

Jay, do you basically want a footprint shape of the useful data in the 
Sat images (say, without the collar), or is the problem more complex, 
where perhaps you have a mosaic of several images and, like swiss 
cheese, there are no-data holes within the image?

It sounds to me like you just want a footprint of the collarless area; 
is this correct? 

/Elijah

Jay Jennings wrote:
> I see, thanks.  But since I have satellite images, this part of the doc is alarming: "...For non-thematic raster data (such as satellite images) 
> the result will essentially be one small polygon per pixel, and memory and output layer sizes will be substantial. The algorithm is primarily 
> intended for relatively simple thematic imagery, masks, and classification results".
>
> I just want one polygon enclosing the non-zero pixels (or alternatively, enclosing the zero pixels, then I could do a geometric 
> difference).  Is there any way to trick the method into doing that, to maybe avoid the heavy resource needs ?
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
> Sent: Friday, April 22, 2011 11:45 AM
> To: Jay Jennings
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Polygonize from C# ?
>
> Selon Jay Jennings <Jennings.Jay@geoeye.com>:
>
> Generally, refering to the C/C++ doc is a good way of finding the info :
>
> See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1
>
>   
>> Hi list,
>> Can anyone point to any guidance or (preferably) examples on using
>> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there
>> are some unexplained parameters, e.g. "string[] options".
>>
>> My eventual goal is to open a raster and produce a WKT POLYGON string
>> enclosing the "good" (non-NoData) area of the raster.  Thanks.
>>
>> .........................................................
>> Jay Jennings
>> Senior Software Developer
>> (NASDAQ: GEOY)
>> jennings.jay@geoeye.com
>>
>>
>>
>>
>>
>>     
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>   
From Jennings.Jay at geoeye.com  Fri Apr 22 14:44:50 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Fri Apr 22 14:44:39 2011
Subject: [gdal-dev] Polygonize from C# ?
In-Reply-To: <4DB1C3B6.4010104@villagis.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
	<1303487092.4db1a2742f448@webmail.free.fr>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>
	<4DB1C3B6.4010104@villagis.com>
Message-ID: <44EADB1AC2F19449B528A17643F417B9A2F90FC816@MS1.geoeye.com>

Correct, we just need the footprint of the "good" (non-NODATA) area, which will often approximate a simple 4-point polygon with no holes.

-----Original Message-----
From: Elijah Robison [mailto:elijah@villagis.com] 
Sent: Friday, April 22, 2011 2:07 PM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Polygonize from C# ?

Jay, do you basically want a footprint shape of the useful data in the 
Sat images (say, without the collar), or is the problem more complex, 
where perhaps you have a mosaic of several images and, like swiss 
cheese, there are no-data holes within the image?

It sounds to me like you just want a footprint of the collarless area; 
is this correct? 

/Elijah

Jay Jennings wrote:
> I see, thanks.  But since I have satellite images, this part of the doc is alarming: "...For non-thematic raster data (such as satellite images) 
> the result will essentially be one small polygon per pixel, and memory and output layer sizes will be substantial. The algorithm is primarily 
> intended for relatively simple thematic imagery, masks, and classification results".
>
> I just want one polygon enclosing the non-zero pixels (or alternatively, enclosing the zero pixels, then I could do a geometric 
> difference).  Is there any way to trick the method into doing that, to maybe avoid the heavy resource needs ?
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
> Sent: Friday, April 22, 2011 11:45 AM
> To: Jay Jennings
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Polygonize from C# ?
>
> Selon Jay Jennings <Jennings.Jay@geoeye.com>:
>
> Generally, refering to the C/C++ doc is a good way of finding the info :
>
> See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1
>
>   
>> Hi list,
>> Can anyone point to any guidance or (preferably) examples on using
>> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there
>> are some unexplained parameters, e.g. "string[] options".
>>
>> My eventual goal is to open a raster and produce a WKT POLYGON string
>> enclosing the "good" (non-NoData) area of the raster.  Thanks.
>>
>> .........................................................
>> Jay Jennings
>> Senior Software Developer
>> (NASDAQ: GEOY)
>> jennings.jay@geoeye.com
>>
>>
>>
>>
>>
>>     
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>   
From elijah at villagis.com  Fri Apr 22 15:05:02 2011
From: elijah at villagis.com (Elijah Robison)
Date: Fri Apr 22 15:05:06 2011
Subject: [gdal-dev] Polygonize from C# ?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F90FC816@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>	<1303487092.4db1a2742f448@webmail.free.fr>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>
	<4DB1C3B6.4010104@villagis.com>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC816@MS1.geoeye.com>
Message-ID: <4DB1D15E.8020002@villagis.com>

Hi Jay, you might want to review the following thread (Get extent from 
rasters).  Based on a cursory read of his advice, I believe Trent offers 
a solution that might accommodate your task:  
http://lists.maptools.org/pipermail/fwtools/2010-October/001886.html

/Elijah


Jay Jennings wrote:
> Correct, we just need the footprint of the "good" (non-NODATA) area, which will often approximate a simple 4-point polygon with no holes.
>
> -----Original Message-----
> From: Elijah Robison [mailto:elijah@villagis.com] 
> Sent: Friday, April 22, 2011 2:07 PM
> To: Jay Jennings
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Polygonize from C# ?
>
> Jay, do you basically want a footprint shape of the useful data in the 
> Sat images (say, without the collar), or is the problem more complex, 
> where perhaps you have a mosaic of several images and, like swiss 
> cheese, there are no-data holes within the image?
>
> It sounds to me like you just want a footprint of the collarless area; 
> is this correct? 
>
> /Elijah
>
> Jay Jennings wrote:
>   
>> I see, thanks.  But since I have satellite images, this part of the doc is alarming: "...For non-thematic raster data (such as satellite images) 
>> the result will essentially be one small polygon per pixel, and memory and output layer sizes will be substantial. The algorithm is primarily 
>> intended for relatively simple thematic imagery, masks, and classification results".
>>
>> I just want one polygon enclosing the non-zero pixels (or alternatively, enclosing the zero pixels, then I could do a geometric 
>> difference).  Is there any way to trick the method into doing that, to maybe avoid the heavy resource needs ?
>>
>>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
>> Sent: Friday, April 22, 2011 11:45 AM
>> To: Jay Jennings
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] Polygonize from C# ?
>>
>> Selon Jay Jennings <Jennings.Jay@geoeye.com>:
>>
>> Generally, refering to the C/C++ doc is a good way of finding the info :
>>
>> See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1
>>
>>   
>>     
>>> Hi list,
>>> Can anyone point to any guidance or (preferably) examples on using
>>> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there
>>> are some unexplained parameters, e.g. "string[] options".
>>>
>>> My eventual goal is to open a raster and produce a WKT POLYGON string
>>> enclosing the "good" (non-NoData) area of the raster.  Thanks.
>>>
>>> .........................................................
>>> Jay Jennings
>>> Senior Software Developer
>>> (NASDAQ: GEOY)
>>> jennings.jay@geoeye.com
>>>
>>>
>>>
>>>
>>>
>>>     
>>>       
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>   
>>     
>
>   
From motta.luiz at gmail.com  Fri Apr 22 15:05:58 2011
From: motta.luiz at gmail.com (Luiz Motta)
Date: Fri Apr 22 15:06:01 2011
Subject: [gdal-dev] Polygonize from C# ?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F90FC816@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
	<1303487092.4db1a2742f448@webmail.free.fr>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>
	<4DB1C3B6.4010104@villagis.com>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC816@MS1.geoeye.com>
Message-ID: <BANLkTimymZQLpwbCCVeXwe+Md63UONda-A@mail.gmail.com>

Jay,

I made the plugin for QGIS, where, calculate the  boundary of image
with pixel value upper to zero, i believe is what you want,
"footprint shape".

The plugin read all images of directories and create one vector layer
with all boundary of images.

For calculate, the background of image need have pixel value equal a zero.

I wrote the program with  Python, but, i called the GDAL  functions
for calculus.

The name of plugin is "Image Boundary", and you can install inside
QGIS(contributed repository), or read the source by
http://spatialserver.net/pyqgis_1.0/contributed/imgboundary.zip

Regards,
Luiz Motta

2011/4/22 Jay Jennings <Jennings.Jay@geoeye.com>:
> Correct, we just need the footprint of the "good" (non-NODATA) area, which will often approximate a simple 4-point polygon with no holes.
>
> -----Original Message-----
> From: Elijah Robison [mailto:elijah@villagis.com]
> Sent: Friday, April 22, 2011 2:07 PM
> To: Jay Jennings
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Polygonize from C# ?
>
> Jay, do you basically want a footprint shape of the useful data in the
> Sat images (say, without the collar), or is the problem more complex,
> where perhaps you have a mosaic of several images and, like swiss
> cheese, there are no-data holes within the image?
>
> It sounds to me like you just want a footprint of the collarless area;
> is this correct?
>
> /Elijah
>
> Jay Jennings wrote:
>> I see, thanks. ?But since I have satellite images, this part of the doc is alarming: "...For non-thematic raster data (such as satellite images)
>> the result will essentially be one small polygon per pixel, and memory and output layer sizes will be substantial. The algorithm is primarily
>> intended for relatively simple thematic imagery, masks, and classification results".
>>
>> I just want one polygon enclosing the non-zero pixels (or alternatively, enclosing the zero pixels, then I could do a geometric
>> difference). ?Is there any way to trick the method into doing that, to maybe avoid the heavy resource needs ?
>>
>>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault@mines-paris.org]
>> Sent: Friday, April 22, 2011 11:45 AM
>> To: Jay Jennings
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] Polygonize from C# ?
>>
>> Selon Jay Jennings <Jennings.Jay@geoeye.com>:
>>
>> Generally, refering to the C/C++ doc is a good way of finding the info :
>>
>> See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1
>>
>>
>>> Hi list,
>>> Can anyone point to any guidance or (preferably) examples on using
>>> GDAL.Polygonize() with C# bindings ? ?I see what the interface is, but there
>>> are some unexplained parameters, e.g. "string[] options".
>>>
>>> My eventual goal is to open a raster and produce a WKT POLYGON string
>>> enclosing the "good" (non-NoData) area of the raster. ?Thanks.
>>>
>>> .........................................................
>>> Jay Jennings
>>> Senior Software Developer
>>> (NASDAQ: GEOY)
>>> jennings.jay@geoeye.com
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mariusjigmond at hotmail.com  Fri Apr 22 17:53:29 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Fri Apr 22 17:54:46 2011
Subject: [gdal-dev] Extract Extent or Bounding Box for a subset of
	shapes for a shapefile
In-Reply-To: <1303486764.2194.74.camel@GOLEM>
References: <BANLkTikEaFnySc1daLuzhHQ8ZNK71XdL-w@mail.gmail.com>
	<1303481686.2194.35.camel@GOLEM>
	<BANLkTik-7FqFRjeD2O7YCd+7AgTCc=RPGQ@mail.gmail.com>
	<1303486764.2194.74.camel@GOLEM>
Message-ID: <BLU0-SMTP188F247D333DF0DB3BCE5EFB2950@phx.gbl>

Luca,

You can also loop through the features with relatively simple Python
code to get the extents. See sample below (adapt at will):

def findPoints(geometry, results):
  for i in range(geometry.GetPointCount()):
    x,y,z = geometry.GetPoint(i)
    if results['north'] == None or results['north'][1] < y:
      results['north'] = (x,y)
    if results['south'] == None or results['south'][1] > y:
      results['south'] = (x,y)
    if results['east'] == None or results['east'][0] < x:
      results['east'] = (x,y)
    if results['west'] == None or results['west'][0] > x:
      results['west'] = (x,y)
  for i in range(geometry.GetGeometryCount()):
    findPoints(geometry.GetGeometryRef(i), results)

inSHP = 'test.shp'
shapefile = osgeo.ogr.Open(inSHP)
layer = shapefile.GetLayer(0)
for feat in range(layer.GetFeatureCount()):
	feature = layer.GetFeature(feat)
	geometry = feature.GetGeometryRef()
	results = {'north' : None, 'south' : None, 'east' : None, 'west' :
None}
	findPoints(geometry, results)

-marius

On Fri, 2011-04-22 at 17:39 +0200, Luca Sigfrido Percich wrote:
> Thank you Chaitanya.
> 
> I think that this makes great sense when dealing with a summary of the
> whole layer, especially because a lot of formats store the extent in the
> layer metadata/header.
> 
> But if I need to dump all the features, or to get a dump or summary of a
> filtered set of features (in which case I presume ogr will scan all the
> features to apply the filter), checking for boundary limits shouldn't
> add much cost to the already expensive operation.
> 
> Probably this goes beyond the intended scope of ogrinfo. And Matthew's
> workaround works fine.
> 
> Thanks again
> 
> Sig
> 
> 
> 
> Il giorno ven, 22/04/2011 alle 20.20 +0530, Chaitanya kumar CH ha
> scritto:
> > Sig,
> > 
> > ogrinfo doesn't force the recomputation of extent. It is considered as
> > a costly operation. ogrinfo just reports the stored extent.
> > Whereas in ogr2ogr, creating a new file automatically computes the
> > extents.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From alexander.bruy at gmail.com  Sat Apr 23 04:50:47 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sat Apr 23 04:50:49 2011
Subject: [gdal-dev] Merge rasters by bands
Message-ID: <BANLkTimReAVdfUh3gMtghH9ZHwwVWxrNbA@mail.gmail.com>

Hi all,

is it possible to merge several multiband rasters in single multiband raster
by bands? For example, merge two 6-bands rasters into single 12-bands
raster.

Using gdal_merge.py I get only 2 bands with or without "-separate" option.

Any hints how to do this?

Thanks
-- 
Alexander Bruy
From chaitanya.ch at gmail.com  Sat Apr 23 05:33:28 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Apr 23 05:33:32 2011
Subject: [gdal-dev] Merge rasters by bands
In-Reply-To: <BANLkTimReAVdfUh3gMtghH9ZHwwVWxrNbA@mail.gmail.com>
References: <BANLkTimReAVdfUh3gMtghH9ZHwwVWxrNbA@mail.gmail.com>
Message-ID: <BANLkTimajpjUgQaPour3=___ji=ThhQqFg@mail.gmail.com>

Alexander,

I am not sure what a 'stacked band' is but obviously the script is
consolidating all the 6 bands into one.

There is a work around.
Separate all the bands into individual files using the -b option in
gdal_translate.
Then use gdal_merge.py with the -separate option on all of the individual
files.

On Sat, Apr 23, 2011 at 2:20 PM, Alexander Bruy <alexander.bruy@gmail.com>wrote:

> Hi all,
>
> is it possible to merge several multiband rasters in single multiband
> raster
> by bands? For example, merge two 6-bands rasters into single 12-bands
> raster.
>
> Using gdal_merge.py I get only 2 bands with or without "-separate" option.
>
> Any hints how to do this?
>
> Thanks
> --
> Alexander Bruy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110423/abda5150/attachment.html
From gcpp.kalxas at gmail.com  Sun Apr 24 07:32:42 2011
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Sun Apr 24 07:32:46 2011
Subject: [gdal-dev] Classification Accuracy Utility
Message-ID: <BANLkTi=bh0VW15KMh__=83fLqpcPT_=TQw@mail.gmail.com>

Hi everyone,

I recently needed to compute classification accuracy measures (completeness,
correctness, quality) for a journal paper.
So I took some time to write the following utility:
http://users.ntua.gr/tzotsos/code/gdal_accuracy.py

I would be very happy if it could be included in gdal utilities.
Please let me know of any ideas, comments etc.

Regards,
Angelos

-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110424/3977ec23/attachment.html
From marvin.offiah at googlemail.com  Sun Apr 24 13:37:07 2011
From: marvin.offiah at googlemail.com (MarvinCO)
Date: Sun Apr 24 13:37:09 2011
Subject: [gdal-dev] Using the GDAL/OGR Java bindings with the OSGeo4W
	environment
Message-ID: <1303666627153-6301272.post@n2.nabble.com>

Hi,

I have installed GDAL and GDAL for Jave with the OSGeo4W installer.

I am using an Eclipse project and have set the JRE that was installed by the
OSGeo4W installer as the JRE to use in my project. I have also added the
gdal.java from OSGeo4W (in the "lib" directory) to the java class path.

Now I'm trying to run this:

System.loadLibrary("gdal18");
ogr.RegisterAll();
ogr.Open(ds, 0);

where "ds" is a certain data source. Unfortunately, I am getting this error:




Native library load failed.
java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
Native library load failed.
java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.ogr.ogrJNI.Open__SWIG_0(Ljava/lang/String;I)J
	at org.gdal.ogr.ogrJNI.Open__SWIG_0(Native Method)
	at org.gdal.ogr.ogr.Open(ogr.java:127)





Why? Can anyone help? As said, I have used the OSGeo4W installer to install
GDAL and GDAL for Java. The installer is supposed to automatically add the
necessary dependencies?

Thanks in advance
Marvin

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-the-GDAL-OGR-Java-bindings-with-the-OSGeo4W-environment-tp6301272p6301272.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Apr 24 14:40:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 24 14:40:18 2011
Subject: [gdal-dev] Using the GDAL/OGR Java bindings with the OSGeo4W
	environment
In-Reply-To: <1303666627153-6301272.post@n2.nabble.com>
References: <1303666627153-6301272.post@n2.nabble.com>
Message-ID: <201104242040.11530.even.rouault@mines-paris.org>

Marvin,

I think you just have to add the directory where gdaljni.dll, ogrjni.dll, 
etc.. are to your system PATH, or if you don't want to alter it, to the 
java.library.path JVM variable.

Ah, and you don't need to call System.loadLibrary("gdal18"); 
It should be loaded implicitely when the GDAL jni dlls are loaded.

Best regards,

Even

> Hi,
> 
> I have installed GDAL and GDAL for Jave with the OSGeo4W installer.
> 
> I am using an Eclipse project and have set the JRE that was installed by
> the OSGeo4W installer as the JRE to use in my project. I have also added
> the gdal.java from OSGeo4W (in the "lib" directory) to the java class
> path.
> 
> Now I'm trying to run this:
> 
> System.loadLibrary("gdal18");
> ogr.RegisterAll();
> ogr.Open(ds, 0);
> 
> where "ds" is a certain data source. Unfortunately, I am getting this
> error:
> 
> 
> 
> 
> Native library load failed.
> java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
> Native library load failed.
> java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.HasThreadSupport()I
> Exception in thread "main" java.lang.UnsatisfiedLinkError:
> org.gdal.ogr.ogrJNI.Open__SWIG_0(Ljava/lang/String;I)J
> 	at org.gdal.ogr.ogrJNI.Open__SWIG_0(Native Method)
> 	at org.gdal.ogr.ogr.Open(ogr.java:127)
> 
> 
> 
> 
> 
> Why? Can anyone help? As said, I have used the OSGeo4W installer to install
> GDAL and GDAL for Java. The installer is supposed to automatically add the
> necessary dependencies?
> 
> Thanks in advance
> Marvin
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Using-the-GDAL-OGR-Java-bindings-wi
> th-the-OSGeo4W-environment-tp6301272p6301272.html Sent from the GDAL - Dev
> mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From marvin.offiah at googlemail.com  Sun Apr 24 15:46:45 2011
From: marvin.offiah at googlemail.com (MarvinCO)
Date: Sun Apr 24 15:46:47 2011
Subject: [gdal-dev] Re: Using the GDAL/OGR Java bindings with the OSGeo4W
	environment
In-Reply-To: <201104242040.11530.even.rouault@mines-paris.org>
References: <1303666627153-6301272.post@n2.nabble.com>
	<201104242040.11530.even.rouault@mines-paris.org>
Message-ID: <1303674405567-6301448.post@n2.nabble.com>

Hi Even,

thanks. I have now done that. Could only do that via "Add External Class
Folder" and by choosing "C:\OSGeo4W\bin".

In addition to that, I expanded the "JRE System Library" entry (which is set
to "C:\OSGeo4W") and set the "Native Library location" to "C:\OSGeo4W\bin"
(which is where those DLLs are located).

I even removed the System.loadLibrary("gdal18"), since you said it is
redundant.

But I'm still getting the same error.

What could the problem be? Why "HasThreadSupport"? And what library loads
failed? I though the OSGeo4W installer has already taken care of downloading
dependent libraries. If they are found but still fail to be loaded, why so?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-the-GDAL-OGR-Java-bindings-with-the-OSGeo4W-environment-tp6301272p6301448.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Apr 24 16:56:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 24 16:56:41 2011
Subject: [gdal-dev] Re: Using the GDAL/OGR Java bindings with the OSGeo4W
	environment
In-Reply-To: <1303674405567-6301448.post@n2.nabble.com>
References: <1303666627153-6301272.post@n2.nabble.com>
	<201104242040.11530.even.rouault@mines-paris.org>
	<1303674405567-6301448.post@n2.nabble.com>
Message-ID: <201104242256.33867.even.rouault@mines-paris.org>

Le dimanche 24 avril 2011 21:46:45, MarvinCO a ?crit :

Hum, ok, I've now tested a bit OSGeo4W and it appears that there's a packaging 
error in the java-1.6.0_17-1.tar.bz2 package that includes an ancient version 
of GDAL 1.4 and its binding libraries, which then conflicts with the gdal-java 
package.

So I have cleaned my whole c:\OSGeo4W directory, installed the java package 
only. Then I've removed manually all the gdal*, ogr*, osr* stuff in C:
\OSGeo4W\bin . Then I have installed the gdal-java package.

And now I can run "java -cp c:\osgeo4w\lib\gdal.jar;. gdalinfo" from c:
\OSGeo4W\share\gdal

You should file a ticket to OSGeo4W trac about the remaining GDAL stuff in the 
java package.

> Hi Even,
> 
> thanks. I have now done that. Could only do that via "Add External Class
> Folder" and by choosing "C:\OSGeo4W\bin".
> 
> In addition to that, I expanded the "JRE System Library" entry (which is
> set to "C:\OSGeo4W") and set the "Native Library location" to
> "C:\OSGeo4W\bin" (which is where those DLLs are located).
> 
> I even removed the System.loadLibrary("gdal18"), since you said it is
> redundant.
> 
> But I'm still getting the same error.
> 
> What could the problem be? Why "HasThreadSupport"? And what library loads
> failed? I though the OSGeo4W installer has already taken care of
> downloading dependent libraries. If they are found but still fail to be
> loaded, why so?
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Using-the-GDAL-OGR-Java-bindings-wi
> th-the-OSGeo4W-environment-tp6301272p6301448.html Sent from the GDAL - Dev
> mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Jennings.Jay at geoeye.com  Mon Apr 25 15:17:48 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Mon Apr 25 15:17:39 2011
Subject: [gdal-dev] Polygonize via Python on Windows
In-Reply-To: <4DB1D15E.8020002@villagis.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
	<1303487092.4db1a2742f448@webmail.free.fr>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC78C@MS1.geoeye.com>
	<4DB1C3B6.4010104@villagis.com>
	<44EADB1AC2F19449B528A17643F417B9A2F90FC816@MS1.geoeye.com>
	<4DB1D15E.8020002@villagis.com>
Message-ID: <44EADB1AC2F19449B528A17643F417B9A2F90FCF77@MS1.geoeye.com>

Thanks Elijah, that thread does look promising.  But it involves using gdal_polygonize.py, which is giving me trouble (we haven't tried GDAL/Python options before).  Initial attempt at gdal_polygonize.py gives the error "ImportError: No module named gdal".  After researching the archives, I found some advice from Howard Butler in October 2007 to go to the 'swig' directory and do 'nmake -f makefile.vc python'.  Tried that, and it processed for awhile then quit with this error msg:

"error: Python was built with Visual Studio 2003;
extensions must be built with a compiler than can generate compatible binaries.
Visual Studio 2003 was not found on this system. If you have Cygwin installed,
you can try compiling with MingW32, by passing "-c mingw32" to setup.py.
NMAKE : fatal error U1077: 'C:\Python25\python.exe' : return code '0x1'
Stop. "

It's true, I don't have VS 2003, but I do have VS 2008 and VS 2010.

Does anyone have setup advice on using gdal_polygonize.py on Windows 7 64-bit with GDAL 1.8.0 ?  I have a feeling I'm missing something simple.  We have GDAL 1.8.0 built from source, which works well, but we've never used the Python options.  Most of the GDAL/Python discussions in the archives seem to be about Linux or Apple OS.  Thanks for any guidance.
PS I have Python 2.5 installed.
--JJ

-----Original Message-----
From: Elijah Robison [mailto:elijah@villagis.com] 
Sent: Friday, April 22, 2011 3:05 PM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Polygonize from C# ?

Hi Jay, you might want to review the following thread (Get extent from 
rasters).  Based on a cursory read of his advice, I believe Trent offers 
a solution that might accommodate your task:  
http://lists.maptools.org/pipermail/fwtools/2010-October/001886.html

/Elijah


Jay Jennings wrote:
> Correct, we just need the footprint of the "good" (non-NODATA) area, which will often approximate a simple 4-point polygon with no holes.
>
> -----Original Message-----
> From: Elijah Robison [mailto:elijah@villagis.com] 
> Sent: Friday, April 22, 2011 2:07 PM
> To: Jay Jennings
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Polygonize from C# ?
>
> Jay, do you basically want a footprint shape of the useful data in the 
> Sat images (say, without the collar), or is the problem more complex, 
> where perhaps you have a mosaic of several images and, like swiss 
> cheese, there are no-data holes within the image?
>
> It sounds to me like you just want a footprint of the collarless area; 
> is this correct? 
>
> /Elijah
>
> Jay Jennings wrote:
>   
>> I see, thanks.  But since I have satellite images, this part of the doc is alarming: "...For non-thematic raster data (such as satellite images) 
>> the result will essentially be one small polygon per pixel, and memory and output layer sizes will be substantial. The algorithm is primarily 
>> intended for relatively simple thematic imagery, masks, and classification results".
>>
>> I just want one polygon enclosing the non-zero pixels (or alternatively, enclosing the zero pixels, then I could do a geometric 
>> difference).  Is there any way to trick the method into doing that, to maybe avoid the heavy resource needs ?
>>
>>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
>> Sent: Friday, April 22, 2011 11:45 AM
>> To: Jay Jennings
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] Polygonize from C# ?
>>
>> Selon Jay Jennings <Jennings.Jay@geoeye.com>:
>>
>> Generally, refering to the C/C++ doc is a good way of finding the info :
>>
>> See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1
>>
>>   
>>     
>>> Hi list,
>>> Can anyone point to any guidance or (preferably) examples on using
>>> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but there
>>> are some unexplained parameters, e.g. "string[] options".
>>>
>>> My eventual goal is to open a raster and produce a WKT POLYGON string
>>> enclosing the "good" (non-NoData) area of the raster.  Thanks.
>>>
>>> .........................................................
>>> Jay Jennings
>>> jennings.jay@geoeye.com
>>>
>>>
>>>
>>>
>>>
>>>     
>>>       
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Apr 25 15:22:34 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 25 15:22:43 2011
Subject: [gdal-dev] Polygonize via Python on Windows
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9A2F90FCF77@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B9A2F90FC656@MS1.geoeye.com>
	<4DB1D15E.8020002@villagis.com>
	<44EADB1AC2F19449B528A17643F417B9A2F90FCF77@MS1.geoeye.com>
Message-ID: <201104252122.34715.even.rouault@mines-paris.org>

Le lundi 25 avril 2011 21:17:48, Jay Jennings a ?crit :

If you have VS2008, I tunk you need to upgrade your Python version to Python 
2.6. Because when building Python native modules, you must use a version of 
Visual Studio compatible with the version that was used to build the Python 
interpreter.

> Thanks Elijah, that thread does look promising.  But it involves using
> gdal_polygonize.py, which is giving me trouble (we haven't tried
> GDAL/Python options before).  Initial attempt at gdal_polygonize.py gives
> the error "ImportError: No module named gdal".  After researching the
> archives, I found some advice from Howard Butler in October 2007 to go to
> the 'swig' directory and do 'nmake -f makefile.vc python'.  Tried that,
> and it processed for awhile then quit with this error msg:
> 
> "error: Python was built with Visual Studio 2003;
> extensions must be built with a compiler than can generate compatible
> binaries. Visual Studio 2003 was not found on this system. If you have
> Cygwin installed, you can try compiling with MingW32, by passing "-c
> mingw32" to setup.py. NMAKE : fatal error U1077: 'C:\Python25\python.exe'
> : return code '0x1' Stop. "
> 
> It's true, I don't have VS 2003, but I do have VS 2008 and VS 2010.
> 
> Does anyone have setup advice on using gdal_polygonize.py on Windows 7
> 64-bit with GDAL 1.8.0 ?  I have a feeling I'm missing something simple. 
> We have GDAL 1.8.0 built from source, which works well, but we've never
> used the Python options.  Most of the GDAL/Python discussions in the
> archives seem to be about Linux or Apple OS.  Thanks for any guidance. PS
> I have Python 2.5 installed.
> --JJ
> 
> -----Original Message-----
> From: Elijah Robison [mailto:elijah@villagis.com]
> Sent: Friday, April 22, 2011 3:05 PM
> To: Jay Jennings
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Polygonize from C# ?
> 
> Hi Jay, you might want to review the following thread (Get extent from
> rasters).  Based on a cursory read of his advice, I believe Trent offers
> a solution that might accommodate your task:
> http://lists.maptools.org/pipermail/fwtools/2010-October/001886.html
> 
> /Elijah
> 
> Jay Jennings wrote:
> > Correct, we just need the footprint of the "good" (non-NODATA) area,
> > which will often approximate a simple 4-point polygon with no holes.
> > 
> > -----Original Message-----
> > From: Elijah Robison [mailto:elijah@villagis.com]
> > Sent: Friday, April 22, 2011 2:07 PM
> > To: Jay Jennings
> > Cc: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] Polygonize from C# ?
> > 
> > Jay, do you basically want a footprint shape of the useful data in the
> > Sat images (say, without the collar), or is the problem more complex,
> > where perhaps you have a mosaic of several images and, like swiss
> > cheese, there are no-data holes within the image?
> > 
> > It sounds to me like you just want a footprint of the collarless area;
> > is this correct?
> > 
> > /Elijah
> > 
> > Jay Jennings wrote:
> >> I see, thanks.  But since I have satellite images, this part of the doc
> >> is alarming: "...For non-thematic raster data (such as satellite
> >> images) the result will essentially be one small polygon per pixel, and
> >> memory and output layer sizes will be substantial. The algorithm is
> >> primarily intended for relatively simple thematic imagery, masks, and
> >> classification results".
> >> 
> >> I just want one polygon enclosing the non-zero pixels (or alternatively,
> >> enclosing the zero pixels, then I could do a geometric difference).  Is
> >> there any way to trick the method into doing that, to maybe avoid the
> >> heavy resource needs ?
> >> 
> >> 
> >> -----Original Message-----
> >> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> >> Sent: Friday, April 22, 2011 11:45 AM
> >> To: Jay Jennings
> >> Cc: gdal-dev@lists.osgeo.org
> >> Subject: Re: [gdal-dev] Polygonize from C# ?
> >> 
> >> Selon Jay Jennings <Jennings.Jay@geoeye.com>:
> >> 
> >> Generally, refering to the C/C++ doc is a good way of finding the info :
> >> 
> >> See http://gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1
> >> 
> >>> Hi list,
> >>> Can anyone point to any guidance or (preferably) examples on using
> >>> GDAL.Polygonize() with C# bindings ?  I see what the interface is, but
> >>> there are some unexplained parameters, e.g. "string[] options".
> >>> 
> >>> My eventual goal is to open a raster and produce a WKT POLYGON string
> >>> enclosing the "good" (non-NoData) area of the raster.  Thanks.
> >>> 
> >>> .........................................................
> >>> Jay Jennings
> >>> jennings.jay@geoeye.com
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jed at 59A2.org  Mon Apr 25 19:24:51 2011
From: jed at 59A2.org (Jed Brown)
Date: Mon Apr 25 19:24:54 2011
Subject: [gdal-dev] How to sample raster data at unstructured points?
Message-ID: <BANLkTinbDGSm=_uu245-i6c5ZwoW3kO7ig@mail.gmail.com>

I have a bunch of unstructured points, typically quadrature nodes of an
unstructured mesh, and I want to sample a raster field at those points. I
have plenty of spatial locality, but not any specific regular structure.
Maybe I'm missing something, but I don't see an API for this direction.

There is GDALCreateTPSTransformer which would seem to be a reasonable way to
go from an unstructured mesh to a raster. But it's not easy to go the other
way since it would involve, e.g. defining a (bad) quadrature using the
raster and then do a Galerkin projection into the unstructured finite
element basis, then evaluate that basis at the unstructured quadrature
nodes. Alternatively, we could make tiny regular patches in the unstructured
grid and do lots of independent projections, but I worry that this would be
a performance issue.

Is there a recommended way to sample a raster field at unstructured points?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110426/b8796348/attachment.html
From woklist at kyngchaos.com  Mon Apr 25 20:20:13 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr 25 20:20:17 2011
Subject: [gdal-dev] Split apart MULTI* problem
Message-ID: <5968733A-AB44-4466-980D-C7E7497DEA15@kyngchaos.com>

I can't get ogr2ogr to split MULTI* shapefiles to non-multi features.  I'm sure I've done this in the past (it's been a while).

ie, the Natural Earth shapefiles, coastline file - has a mix of LINESTRING and MULTILINESTRING.  I run:

ogr2ogr . 50m_coastline.shp -nln 50m_coastline-l -nlt LINESTRING

It leaves the MULTILINESTRINGs as is.

Same happens with mixed POLYGON and MULTIPOLYGON shapefiles, like the NE admin_0_countries.

I've done something similar more recently importing shapefiles into PostGIS, forcing MULTI types to avoid errors in mixed multi/non-multi shapefiles.  That works.

GDAL 1.8.0, OSX 10.6.7

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From sigfrido at tiscali.it  Tue Apr 26 04:50:10 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Tue Apr 26 04:52:58 2011
Subject: [gdal-dev] Split apart MULTI* problem
Message-ID: <1303807810.2654.17.camel@GOLEM>

Hi William,

converting a single linestring or polygon into a multi- geometry simply
wraps the single geom into a collection. Like in the U.K., when you see
a single person waiting at a bus stop, it's actually a queue made of a
single person :)

Splitting a multi geometry would result in multiple records - one per
element, probably with the same original attribute values, but with
different fids, which could be a problem if the original shape already
had valid primary key values. I'm not sure ogr2ogr can do that, but
probably there's an appropriate tool around, or you can explode the
multi geometries in PostGIS.

Best regards

Sig

Da: William Kyngesburye [woklist@kyngchaos.com], 26/04/2011 2.20

> I can't get ogr2ogr to split MULTI* shapefiles to non-multi features.  I'm sure I've done this in the past (it's been a while).
> 

_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

-- 
This email was Anti Virus checked by Astaro Security Gateway. http://www.amat-mi.it
From georgec_511 at yahoo.com  Tue Apr 26 07:10:15 2011
From: georgec_511 at yahoo.com (georgec_511@yahoo.com)
Date: Tue Apr 26 07:10:17 2011
Subject: [gdal-dev] GDAL and HRE
Message-ID: <16780323.31300.1303816215166.JavaMail.nabble@jim.nabble.com>

hello,

I saw your message on osgeo-org with the subject line NGA High Resolution Elevation (HRE) data problem?

did you ever get the HRE files parsed with GDAL?  I'm working on the same sort of thing and was just wondering?  I'm just starting out.

my email is georgec_511@yahoo.com

Thanks,
George
From woklist at kyngchaos.com  Tue Apr 26 09:27:05 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 26 09:27:08 2011
Subject: [gdal-dev] Split apart MULTI* problem
In-Reply-To: <1303807810.2654.17.camel@GOLEM>
References: <1303807810.2654.17.camel@GOLEM>
Message-ID: <62B50BB1-A935-4012-A5A8-4AA78B488F69@kyngchaos.com>

I just remembered that what I've done in the past wasn't splitting multi features, but dropping the z from 3D shapefiles.  So I don't know if the multi splitting is possible.

And yes, forcing features to multi into PostGIS is different from splitting multi features into a shapefile.

I suppose I'll have to write a python script...

On Apr 26, 2011, at 3:50 AM, Luca Sigfrido Percich wrote:

> Hi William,
> 
> converting a single linestring or polygon into a multi- geometry simply
> wraps the single geom into a collection. Like in the U.K., when you see
> a single person waiting at a bus stop, it's actually a queue made of a
> single person :)
> 
> Splitting a multi geometry would result in multiple records - one per
> element, probably with the same original attribute values, but with
> different fids, which could be a problem if the original shape already
> had valid primary key values. I'm not sure ogr2ogr can do that, but
> probably there's an appropriate tool around, or you can explode the
> multi geometries in PostGIS.
> 
> Best regards
> 
> Sig
> 
> Da: William Kyngesburye [woklist@kyngchaos.com], 26/04/2011 2.20
> 
>> I can't get ogr2ogr to split MULTI* shapefiles to non-multi features.  I'm sure I've done this in the past (it's been a while).
>> 
> 
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
> 
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
> 
> -- 
> This email was Anti Virus checked by Astaro Security Gateway. http://www.amat-mi.it
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From julien.malik at c-s.fr  Tue Apr 26 12:36:45 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Tue Apr 26 13:01:26 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <4CF3D018.5080401@c-s.fr>
References: <4CF3A679.5020400@c-s.fr>	<1291042318.4cf3be0e7f6ce@webmail.free.fr>
	<4CF3D018.5080401@c-s.fr>
Message-ID: <4DB6F49D.4050003@c-s.fr>

Hello,

As it seems like the gdal 1.8 debian package is not out yet, maybe there 
is still some time left to tackle this issue for the next gdal debian 
package.

To sum up the current situation when reading TIFF files with gdal :
- this program : 
http://hg.orfeo-toolbox.org/OTB/file/1e0e2f87aa59/CMake/TestGDALOpen.cxx 
segfaults on Debian when linked with "-lgeotiff -lgdal" but not when 
linked with "-lgdal -lgeotiff". It runs fine on Ubuntu
- this program : 
http://hg.orfeo-toolbox.org/OTB/file/1e0e2f87aa59/CMake/TestXTIFFOpen.cxx segfaults 
on Ubuntu when linked with "-lgdal -lgeotiff -ltiff" but runs fine when 
geotiff comes before gdal.

For now, we managed to provide binary packages for the Orfeo Toolbox 
applications on Ubuntu by ensuring geotiff comes before gdal in the link 
list (see https://launchpad.net/~otb). This works because we manage the 
build from begining to end.

But this is a showstopper for our efforts to provide QGis plugins based 
on Orfeo Toolbox : even with the (fragile) solution we ended up with 
(ensuring the order geotiff-gdal in all our link commands), our qgis 
plugins crash as soon as they read a TIFF file on Ubuntu.
So we are stuck and cannot release binaries of those plugins.


What can we do to help find a solution (what kind of modification to the 
gdal debian package would you agree to make to solve this issue) ?
Do you have pointers on those "versioned symbols" you were referring to ?
Are you still against the redefinition of the internal tiff/geotiff 
symbols or is this an option for you (for libtiff, there is already a 
working solution in the InsightToolkit) ? It seems to be the safest 
solution to me.
Are we still the only people on Earth linking programs with both gdal 
and geotiff ;) ?


Regards,
Julien



Le 29/11/2010 17:08, Julien Malik a ?crit :
> Hello Even,
>
> Thank you for your answer.
>
> Le 29/11/2010 15:51, Even Rouault a ?crit :
>> Julien,
>>
>> To be fair, I think that --with-hide-internal-symbols just does what it
>> advertizes : it hides GDAL internal symbols (internal libtiff, internal
>> libgeotiff) to applications that link with libgdal. I mean that they 
>> cannot use
>> those symbols (if they only link to libgdal). The advantage is that 
>> it speed-ups
>> the loading of the library and the resolving of its symbols.
>> However, it doesn't do what we could expect : in the case the 
>> application links
>> with several libraries that define the same symbol (exported or not), 
>> it has no
>> influence on how the symbols are resolved by the dynamic linker. So 
>> depending on
>> the linking order of -lgdal -lgeotiff or -lgeotiff or -lgdal, the symbol
>> resolver will choose either the one from GDAL or the one from 
>> libgeotiff.
> OK, I see your point. It works at link time, but not at "load time"... 
> Too bad !
>
>> By the way, are you sure that --with-hide-internal-symbols actually 
>> worsens the
>> situation ? I'd have bet you'd got the same/similar issues with a 
>> build that
>> doesn't use --with-hide-internal-symbols.
> No I'm not sure, I didn't test.
> So in fact the problem does not come really from 
> hide-internal-symbols, but from the simple fact that geotiff is 
> included in gdal with a different .
>
>
>> I tried recently to use some trickery based on #define for the 
>> internal libtiff.
>> The internal libtiff would have lines (in tif_config.h or in a 
>> specific header
>> file imported by it) which would redefine each symbol like #define 
>> TIFFGetField
>> GDAL_TIFFGetField. This was easily done with a simple script that 
>> parsed the
>> output of nm/objdump -T on libtiff. It mostly worked but I couldn't 
>> get to work
>> it completely without modifying the libtiff files, due to their use 
>> of #define
>> mechanisms inside libtiff in a few places (in tif_swab.c and
>> tif_jpeg.c/tif_jpeg_12.c). And it isn't reasonable to modify the 
>> libtiff files
>> as they are directly imported from upstream libtiff. So that effort 
>> is mostly
>> stalled for now.
> This is the procedure I know as "mangling".
> I know Insight Toolkit does that (http://www.itk.org) for the internal 
> libtiff version, but there are probably some modifications in the 
> libtiff code.
> If this is not an option for you, then I think we're stuck.
>
>>   As far as using ld versionned symbols as Francesco Lovergine
>> suggested, I've no experience with that mechanism. Perhaps you could 
>> investigate
>> on that side.
>
> I don't know about it neither, but I can imagine what "versioned 
> symbols" can mean.
> But it does not solve my problem (I want to use the packaged version 
> of gdal in Debian and Ubuntu...)
>
>
> Thanks,
> Julien
>
>> Even
>>
>>> Hello,
>>>
>>> I'm reviving an already known problem about the gdal packages for
>>> Ubuntu/Debian, related to the use of the hide-internal-symbols 
>>> configure
>>> option.
>>>
>>> To sum it up, we get into troubles with the gdal packages since we also
>>> use the geotiff API.
>>>
>>> Until recently, we knew only about a problem with Debian. It had been
>>> reported for example :
>>> - http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg04966.html
>>> - http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=558733
>>>
>>> A similar issue now appears on Ubuntu.
>>> Attached are two little tests showing up the problem, with an 
>>> associated
>>> CMakeLists.
>>> test.cxx uses the geotiff and tiff API.
>>> test2.cxx is the test program reported in the debian bug tracker
>>>
>>> both programs are simple executable taking one tiff file as input.
>>>
>>> test.cxx produces segfault when the link line has gdal before geotiff,
>>> and runs ok in the other cases (tiff does not seem involved).
>>> The segfault appears in the TIFFGetField call, probably because the
>>> TIFF* returned by XTIFFOpen comes from the gdal internal geotiff
>>> implementation and not the system geotiff lib, thus returning an
>>> incompatible pointer.
>>>
>>> test2.cxx does not segfault (though it does on Debian systems when gdal
>>> is before geotiff).
>>>
>>> I see the Ubuntu problems on at least two systems :
>>> - Ubuntu 10.04 with official packages (gdal 1.6.3)
>>> - Ubuntu 10.10 with gdal package from UbuntuGIS-unstable
>>>
>>> There seems to be a bug with the hide-internal-symbols which, well...,
>>> does not really hide internal symbols.
>>> Is there a known solution to these problems (apart from hand-made gdal
>>> recompilation which is not a solution for our end-users) ?
>>> Has the mangling of the internal tiff/geotiff libs already been 
>>> studied ?
>>>
>>>
>>> Best regards,
>>> Julien
>>>
>>>
>>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Tue Apr 26 13:33:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 26 13:34:11 2011
Subject: [gdal-dev] Split apart MULTI* problem
In-Reply-To: <62B50BB1-A935-4012-A5A8-4AA78B488F69@kyngchaos.com>
References: <1303807810.2654.17.camel@GOLEM>
	<62B50BB1-A935-4012-A5A8-4AA78B488F69@kyngchaos.com>
Message-ID: <201104261933.59177.even.rouault@mines-paris.org>

Le mardi 26 avril 2011 15:27:05, William Kyngesburye a ?crit :
> I just remembered that what I've done in the past wasn't splitting multi
> features, but dropping the z from 3D shapefiles.  So I don't know if the
> multi splitting is possible.
> 
> And yes, forcing features to multi into PostGIS is different from splitting
> multi features into a shapefile.
> 
> I suppose I'll have to write a python script...

Or use the -explodecollections flag of ogr2ogr ?
From woklist at kyngchaos.com  Tue Apr 26 13:38:56 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 26 13:39:27 2011
Subject: [gdal-dev] Split apart MULTI* problem
In-Reply-To: <201104261933.59177.even.rouault@mines-paris.org>
References: <1303807810.2654.17.camel@GOLEM>
	<62B50BB1-A935-4012-A5A8-4AA78B488F69@kyngchaos.com>
	<201104261933.59177.even.rouault@mines-paris.org>
Message-ID: <2FE83531-2D33-4A8C-A8FA-790C031ADBD3@kyngchaos.com>

On Apr 26, 2011, at 12:33 PM, Even Rouault wrote:

> Le mardi 26 avril 2011 15:27:05, William Kyngesburye a ?crit :
>> I just remembered that what I've done in the past wasn't splitting multi
>> features, but dropping the z from 3D shapefiles.  So I don't know if the
>> multi splitting is possible.
>> 
>> And yes, forcing features to multi into PostGIS is different from splitting
>> multi features into a shapefile.
>> 
>> I suppose I'll have to write a python script...
> 
> Or use the -explodecollections flag of ogr2ogr ?

Oh.  I missed that, it's not described in the long help.  That works.

thanks

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From even.rouault at mines-paris.org  Tue Apr 26 13:48:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 26 13:48:45 2011
Subject: [gdal-dev] GDAL and HRE
In-Reply-To: <16780323.31300.1303816215166.JavaMail.nabble@jim.nabble.com>
References: <16780323.31300.1303816215166.JavaMail.nabble@jim.nabble.com>
Message-ID: <201104261948.33410.even.rouault@mines-paris.org>

Le mardi 26 avril 2011 13:10:15, georgec_511@yahoo.com a ?crit :
> hello,
> 
> I saw your message on osgeo-org with the subject line NGA High Resolution
> Elevation (HRE) data problem?
> 
> did you ever get the HRE files parsed with GDAL?  I'm working on the same
> sort of thing and was just wondering?  I'm just starting out.

Do you refer to the HRE files in NITF format ? They are successfully read by 
GDAL, but the samples available show a vertical flip. However GDAL 
interpretation of georeferencing contained in the file seems correct, so either 
the samples are incorrect, either there's a subtelty that GDAL doesn't 
understand...

> 
> my email is georgec_511@yahoo.com
> 
> Thanks,
> George
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Apr 26 13:55:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 26 13:55:13 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <4DB6F49D.4050003@c-s.fr>
References: <4CF3A679.5020400@c-s.fr> <4CF3D018.5080401@c-s.fr>
	<4DB6F49D.4050003@c-s.fr>
Message-ID: <201104261955.00163.even.rouault@mines-paris.org>

Le mardi 26 avril 2011 18:36:45, Julien Malik a ?crit :
> Hello,
> 
> As it seems like the gdal 1.8 debian package is not out yet, maybe there
> is still some time left to tackle this issue for the next gdal debian
> package.
> 
> To sum up the current situation when reading TIFF files with gdal :
> - this program :
> http://hg.orfeo-toolbox.org/OTB/file/1e0e2f87aa59/CMake/TestGDALOpen.cxx
> segfaults on Debian when linked with "-lgeotiff -lgdal" but not when
> linked with "-lgdal -lgeotiff". It runs fine on Ubuntu
> - this program :
> http://hg.orfeo-toolbox.org/OTB/file/1e0e2f87aa59/CMake/TestXTIFFOpen.cxx
> segfaults on Ubuntu when linked with "-lgdal -lgeotiff -ltiff" but runs
> fine when geotiff comes before gdal.
> 
> For now, we managed to provide binary packages for the Orfeo Toolbox
> applications on Ubuntu by ensuring geotiff comes before gdal in the link
> list (see https://launchpad.net/~otb). This works because we manage the
> build from begining to end.
> 
> But this is a showstopper for our efforts to provide QGis plugins based
> on Orfeo Toolbox : even with the (fragile) solution we ended up with
> (ensuring the order geotiff-gdal in all our link commands), our qgis
> plugins crash as soon as they read a TIFF file on Ubuntu.
> So we are stuck and cannot release binaries of those plugins.

Stupid question (that won't solve the root cause of the problem): why do you 
need direct access to libtiff and libgeotiff ? Can't you do what you need to do 
with the GDAL GTiff driver ?

> 
> 
> What can we do to help find a solution (what kind of modification to the
> gdal debian package would you agree to make to solve this issue) ?

I'm not sure the solution is really in the debian packaging...

There are indeed very few (safe and easy) options :
- build the GDAL package to link with system/external libtiff and libgeotiff. 
But then you loose bigtiff support
- or make libtiff 4.X the system libtiff version (as in debian experimental)

> Do you have pointers on those "versioned symbols" you were referring to ?

Not better that what you can find with a search with your favorite search 
engine...

> Are you still against the redefinition of the internal tiff/geotiff
> symbols or is this an option for you (for libtiff, there is already a
> working solution in the InsightToolkit) ? It seems to be the safest
> solution to me.

I haven't watched what InsightToolkit does. Do you have some info ?

If you can come with a solution that doesn't involve modifying the source code 
of libtiff/libgeotiff after it is imported in GDAL source tree, that might be 
worth considering it.

Otherwise if you have a minimum invasive patch that could be upstreamed to the 
libtiff and libgeotiff projects, and conditionnaly enabled with some #ifdef that 
could be turned on when included in GDAL, that could perhaps be a viable 
solution. Provided that libtiff/libgeotiff mainteners are OK with that.

> Are we still the only people on Earth linking programs with both gdal
> and geotiff ;) ?

Eh eh, I'd say "yes", just so that it becomes a motivation for you to come 
with patch(es) ;-) That's how FOSS evolves...

Best regards,

Even
From frankie at debian.org  Tue Apr 26 14:34:28 2011
From: frankie at debian.org (Francesco P. Lovergine)
Date: Tue Apr 26 14:57:55 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <201104261955.00163.even.rouault@mines-paris.org>
References: <4CF3A679.5020400@c-s.fr> <4CF3D018.5080401@c-s.fr>
	<4DB6F49D.4050003@c-s.fr>
	<201104261955.00163.even.rouault@mines-paris.org>
Message-ID: <20110426183427.GA2212@frankie.is-a-geek.org>

On Tue, Apr 26, 2011 at 07:55:00PM +0200, Even Rouault wrote:
> > What can we do to help find a solution (what kind of modification to the
> > gdal debian package would you agree to make to solve this issue) ?
> 
> I'm not sure the solution is really in the debian packaging...
> 
> There are indeed very few (safe and easy) options :
> - build the GDAL package to link with system/external libtiff and libgeotiff. 
> But then you loose bigtiff support
> - or make libtiff 4.X the system libtiff version (as in debian experimental)
> 
> > Do you have pointers on those "versioned symbols" you were referring to ?
> 

Here we go:

http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html#id293268

of course this is a possibile solution to avoid symbol collision among
different libraries. It is not a os-independent solution even, so I would
consider it to solve problems in Debian, not a general (upstream) solution.
This is exactly what I'm going to provide in 1.8/experimental for next
library transition.

-- 
Francesco P. Lovergine
From julien.malik at c-s.fr  Tue Apr 26 15:27:52 2011
From: julien.malik at c-s.fr (MALIK Julien)
Date: Tue Apr 26 15:27:58 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <201104261955.00163.even.rouault@mines-paris.org>
References: <4CF3A679.5020400@c-s.fr> <4CF3D018.5080401@c-s.fr>
	<4DB6F49D.4050003@c-s.fr>
	<201104261955.00163.even.rouault@mines-paris.org>
Message-ID: <20110426212752.1238747kqs5jaawo@messagerie.si.c-s.fr>

Hi Even,


Quoting Even Rouault <even.rouault@mines-paris.org>:

> Le mardi 26 avril 2011 18:36:45, Julien Malik a ?crit :
>> Hello,
>>
>> As it seems like the gdal 1.8 debian package is not out yet, maybe there
>> is still some time left to tackle this issue for the next gdal debian
>> package.
>>
>> To sum up the current situation when reading TIFF files with gdal :
>> - this program :
>> http://hg.orfeo-toolbox.org/OTB/file/1e0e2f87aa59/CMake/TestGDALOpen.cxx
>> segfaults on Debian when linked with "-lgeotiff -lgdal" but not when
>> linked with "-lgdal -lgeotiff". It runs fine on Ubuntu
>> - this program :
>> http://hg.orfeo-toolbox.org/OTB/file/1e0e2f87aa59/CMake/TestXTIFFOpen.cxx
>> segfaults on Ubuntu when linked with "-lgdal -lgeotiff -ltiff" but runs
>> fine when geotiff comes before gdal.
>>
>> For now, we managed to provide binary packages for the Orfeo Toolbox
>> applications on Ubuntu by ensuring geotiff comes before gdal in the link
>> list (see https://launchpad.net/~otb). This works because we manage the
>> build from begining to end.
>>
>> But this is a showstopper for our efforts to provide QGis plugins based
>> on Orfeo Toolbox : even with the (fragile) solution we ended up with
>> (ensuring the order geotiff-gdal in all our link commands), our qgis
>> plugins crash as soon as they read a TIFF file on Ubuntu.
>> So we are stuck and cannot release binaries of those plugins.
>
> Stupid question (that won't solve the root cause of the problem): why do you
> need direct access to libtiff and libgeotiff ? Can't you do what you  
> need to do
> with the GDAL GTiff driver ?
>

All this comes from the fact that Orfeo Toolbox has ossim as one of  
its main dependency, and ossim handles TIFF via libgeotiff and not via  
gdal.
For example :
http://trac.osgeo.org/ossim/browser/trunk/ossim/src/ossim/support_data/ossimGeoTiff.cpp
which makes extensive use of the geotiff API.
Other TIFF/GeoTIFF related files are :
imaging/ossimTiffOverviewBuilder.cpp
imaging/ossimTiffWriter.cpp
imaging/ossimTiffTileSource.cpp


>>
>>
>> What can we do to help find a solution (what kind of modification to the
>> gdal debian package would you agree to make to solve this issue) ?
>
> I'm not sure the solution is really in the debian packaging...
>
> There are indeed very few (safe and easy) options :
> - build the GDAL package to link with system/external libtiff and libgeotiff.
> But then you loose bigtiff support

I'm not sure this is an option. Any GIS/remote sensing user dealing  
with TIFF files want bigtiff support I think.

> - or make libtiff 4.X the system libtiff version (as in debian experimental)

OK. What prevents from it ? Is it API/ABI incompatible with previous  
versions ?
For example, could libtiff 4.X be packaged in ubuntugis repository and  
not break other packages ?


>
>> Do you have pointers on those "versioned symbols" you were referring to ?
>
> Not better that what you can find with a search with your favorite search
> engine...
>
>> Are you still against the redefinition of the internal tiff/geotiff
>> symbols or is this an option for you (for libtiff, there is already a
>> working solution in the InsightToolkit) ? It seems to be the safest
>> solution to me.
>
> I haven't watched what InsightToolkit does. Do you have some info ?
>
> If you can come with a solution that doesn't involve modifying the  
> source code
> of libtiff/libgeotiff after it is imported in GDAL source tree, that might be
> worth considering it.

Sadly, I think it involves modification of libtiff sources.


>
> Otherwise if you have a minimum invasive patch that could be  
> upstreamed to the
> libtiff and libgeotiff projects, and conditionnaly enabled with some  
> #ifdef that
> could be turned on when included in GDAL, that could perhaps be a viable
> solution. Provided that libtiff/libgeotiff mainteners are OK with that.

This crazy idea came to my mind also : a configure option which would  
allow prefixing all symbols exported by libtiff and libgeotiff.
But this means 2 projects to modify. Surely harder to achieve than  
other solution.

>
>> Are we still the only people on Earth linking programs with both gdal
>> and geotiff ;) ?
>
> Eh eh, I'd say "yes", just so that it becomes a motivation for you to come
> with patch(es) ;-) That's how FOSS evolves...
>
> Best regards,
>
> Even
>
>

Thanks a lot for your comments,
Julien





----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From even.rouault at mines-paris.org  Tue Apr 26 15:34:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 26 15:34:30 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <20110426212752.1238747kqs5jaawo@messagerie.si.c-s.fr>
References: <4CF3A679.5020400@c-s.fr>
	<201104261955.00163.even.rouault@mines-paris.org>
	<20110426212752.1238747kqs5jaawo@messagerie.si.c-s.fr>
Message-ID: <201104262134.17528.even.rouault@mines-paris.org>


> All this comes from the fact that Orfeo Toolbox has ossim as one of
> its main dependency, and ossim handles TIFF via libgeotiff and not via
> gdal.
> For example :
> http://trac.osgeo.org/ossim/browser/trunk/ossim/src/ossim/support_data/ossi
> mGeoTiff.cpp which makes extensive use of the geotiff API.
> Other TIFF/GeoTIFF related files are :
> imaging/ossimTiffOverviewBuilder.cpp
> imaging/ossimTiffWriter.cpp
> imaging/ossimTiffTileSource.cpp

ok, I guess it is their native tiff reader/writer.

> > - or make libtiff 4.X the system libtiff version (as in debian
> > experimental)
> 
> OK. What prevents from it ? Is it API/ABI incompatible with previous
> versions ?
> For example, could libtiff 4.X be packaged in ubuntugis repository and
> not break other packages ?

No, libtiff 3.X and 4.X are not ABI compatible, and have also a few API 
differences (but that are small enough so that the GDAL GTiff driver can be 
built against both)

> This crazy idea came to my mind also : a configure option which would
> allow prefixing all symbols exported by libtiff and libgeotiff.
> But this means 2 projects to modify. Surely harder to achieve than
> other solution.

The whole question is how to implement such a configuration option.
From julien.malik at c-s.fr  Tue Apr 26 15:39:21 2011
From: julien.malik at c-s.fr (MALIK Julien)
Date: Tue Apr 26 15:39:24 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <20110426183427.GA2212@frankie.is-a-geek.org>
References: <4CF3A679.5020400@c-s.fr> <4CF3D018.5080401@c-s.fr>
	<4DB6F49D.4050003@c-s.fr>
	<201104261955.00163.even.rouault@mines-paris.org>
	<20110426183427.GA2212@frankie.is-a-geek.org>
Message-ID: <20110426213921.41647emfsc3v71pl@messagerie.si.c-s.fr>

Quoting "Francesco P. Lovergine" <frankie@debian.org>:

> On Tue, Apr 26, 2011 at 07:55:00PM +0200, Even Rouault wrote:
>> > What can we do to help find a solution (what kind of modification to the
>> > gdal debian package would you agree to make to solve this issue) ?
>>
>> I'm not sure the solution is really in the debian packaging...
>>
>> There are indeed very few (safe and easy) options :
>> - build the GDAL package to link with system/external libtiff and  
>> libgeotiff.
>> But then you loose bigtiff support
>> - or make libtiff 4.X the system libtiff version (as in debian experimental)
>>
>> > Do you have pointers on those "versioned symbols" you were referring to ?
>>
>
> Here we go:
>
> http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html#id293268
>
> of course this is a possibile solution to avoid symbol collision among
> different libraries. It is not a os-independent solution even, so I would
> consider it to solve problems in Debian, not a general (upstream) solution.
> This is exactly what I'm going to provide in 1.8/experimental for next
> library transition.

Oh GREAT !
So I guess the issue will be closed soon. Very, very good news for us  
OrfeoToolbox users.

Thanks so much for considering this !

>
> --
> Francesco P. Lovergine
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From frankie at debian.org  Tue Apr 26 16:04:32 2011
From: frankie at debian.org (Francesco P. Lovergine)
Date: Tue Apr 26 16:04:38 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <20110426213921.41647emfsc3v71pl@messagerie.si.c-s.fr>
References: <4CF3A679.5020400@c-s.fr> <4CF3D018.5080401@c-s.fr>
	<4DB6F49D.4050003@c-s.fr>
	<201104261955.00163.even.rouault@mines-paris.org>
	<20110426183427.GA2212@frankie.is-a-geek.org>
	<20110426213921.41647emfsc3v71pl@messagerie.si.c-s.fr>
Message-ID: <20110426200432.GC2212@frankie.is-a-geek.org>

On Tue, Apr 26, 2011 at 09:39:21PM +0200, MALIK Julien wrote:
> >
> >Here we go:
> >
> >http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html#id293268
> >
> >of course this is a possibile solution to avoid symbol collision among
> >different libraries. It is not a os-independent solution even, so I would
> >consider it to solve problems in Debian, not a general (upstream) solution.
> >This is exactly what I'm going to provide in 1.8/experimental for next
> >library transition.
> 
> Oh GREAT !
> So I guess the issue will be closed soon. Very, very good news for
> us OrfeoToolbox users.
> 
> Thanks so much for considering this !
> 

Note that it will sacrify binary compatibility against casual builds.
You will need to build against the Debian version of GDAL, not third
parties builds. 

-- 
Francesco P. Lovergine
From julien.malik at c-s.fr  Wed Apr 27 03:50:50 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Wed Apr 27 03:50:53 2011
Subject: [gdal-dev] geotiff conflict
In-Reply-To: <20110426200432.GC2212@frankie.is-a-geek.org>
References: <4CF3A679.5020400@c-s.fr> <4CF3D018.5080401@c-s.fr>
	<4DB6F49D.4050003@c-s.fr>
	<201104261955.00163.even.rouault@mines-paris.org>
	<20110426183427.GA2212@frankie.is-a-geek.org>
	<20110426213921.41647emfsc3v71pl@messagerie.si.c-s.fr>
	<20110426200432.GC2212@frankie.is-a-geek.org>
Message-ID: <4DB7CADA.7050907@c-s.fr>


> Note that it will sacrify binary compatibility against casual builds.
> You will need to build against the Debian version of GDAL, not third
> parties builds.

For casual builds, we have another solution : don't use 
hide-internal-symbols, and install the tiff/geotiff headers from gdal 
source tree. Our configuration process manages the fact that libgdal.so 
can be also the geotiff and tiff library. By the way, it is currently 
the only option available to have a TIFF-capable OTB on a Debian system.

Anyway, IMHO, it seems relevant to include this build option upstream. 
If I build gdal myself, I would probably like to benefit from this, as 
long as the linker I use support the feature.
In the doc, they even give the code snippet to integrate to 
configure.ac, and say that the libdshconfig library implements the 
configure-time check to state if the OS supports it.

What are the reasons not to do so ?


Thanks again,
Julien





From elijah at villagis.com  Wed Apr 27 10:36:17 2011
From: elijah at villagis.com (Elijah Robison)
Date: Wed Apr 27 10:36:24 2011
Subject: [gdal-dev] validate/clean geometry with OGR?
Message-ID: <4DB829E1.9030703@villagis.com>

Hey devs, is anyone aware of an OGR approach to validate/clean 
geometries, for instance, as they are being converted from SHP to 
PostGRESql? 

It's not uncommon to have a handful of invalid geometries (usually 
self-intersecting polygons) in a parcel dataset, and it's impractical to 
correct them manually.  In most situations I use the "Clean Geometries" 
function in ArcGIS, which does fix the problem.  However this one 
functionality is my main reason to retain Arc in my primary tool chain.

I've never found a scripting approach by trolling the search engines so 
I thought I'd ask here.

Thanks, Elijah
From woodbri at swoodbridge.com  Wed Apr 27 10:55:06 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Apr 27 10:57:32 2011
Subject: [gdal-dev] validate/clean geometry with OGR?
In-Reply-To: <4DB829E1.9030703@villagis.com>
References: <4DB829E1.9030703@villagis.com>
Message-ID: <4DB82E4A.1010207@swoodbridge.com>

On 4/27/2011 10:36 AM, Elijah Robison wrote:
> Hey devs, is anyone aware of an OGR approach to validate/clean
> geometries, for instance, as they are being converted from SHP to
> PostGRESql?
> It's not uncommon to have a handful of invalid geometries (usually
> self-intersecting polygons) in a parcel dataset, and it's impractical to
> correct them manually. In most situations I use the "Clean Geometries"
> function in ArcGIS, which does fix the problem. However this one
> functionality is my main reason to retain Arc in my primary tool chain.
>
> I've never found a scripting approach by trolling the search engines so
> I thought I'd ask here.

This would be an interesting tool and you might want to check the 
postgis list as I think there have been some tools posted there to clean 
check tables in the database.

Since I use the shp2pgsql data loader, my standard check and clean is:

update mytable set the_geom=buffer(the_geom, 0.0) where not 
isvalid(the_geom);

-- at this point anything that is not valid probably need to be looked
-- at or needs something like a dump the polygon as line segments and
-- then st_build_area() on the line segments.

select count(*) from mytable where not isvalid(the_geom);
select gid from mytable where not isvalid(the_geom);

But this is all postgis related and not GEOS related, but you might be 
able to do the same thing directly in GEOS if you know what strategies 
work in postgis.

-Steve W
From bfraser at geoanalytic.com  Wed Apr 27 11:03:03 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Apr 27 11:03:09 2011
Subject: [gdal-dev] validate/clean geometry with OGR?
In-Reply-To: <4DB829E1.9030703@villagis.com>
References: <4DB829E1.9030703@villagis.com>
Message-ID: <4DB83027.9080900@geoanalytic.com>

Elijah,

   I've used GEOS Buffer function available via the OGR API 
(http://www.gdal.org/ogr/classOGRGeometry.html) to clean polygons:

OGRGeometry *poTempGeometry = poGeometry->Buffer(0.0);  // Let Geos fix 
the problem.


Best Regards,
Brent Fraser


On 4/27/2011 8:36 AM, Elijah Robison wrote:
> Hey devs, is anyone aware of an OGR approach to validate/clean 
> geometries, for instance, as they are being converted from SHP to 
> PostGRESql?
> It's not uncommon to have a handful of invalid geometries (usually 
> self-intersecting polygons) in a parcel dataset, and it's impractical 
> to correct them manually.  In most situations I use the "Clean 
> Geometries" function in ArcGIS, which does fix the problem.  However 
> this one functionality is my main reason to retain Arc in my primary 
> tool chain.
>
> I've never found a scripting approach by trolling the search engines 
> so I thought I'd ask here.
>
> Thanks, Elijah
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From EAdam at co.lincoln.or.us  Wed Apr 27 11:05:05 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Wed Apr 27 11:05:50 2011
Subject: [gdal-dev] validate/clean geometry with OGR?
In-Reply-To: <4DB82E4A.1010207@swoodbridge.com>
References: <4DB829E1.9030703@villagis.com> <4DB82E4A.1010207@swoodbridge.com>
Message-ID: <4DB7CE31.4F75.00CE.0@co.lincoln.or.us>

Since you are going to PostGIS anyway cleaning in PostGIS is possible.  

Here is the 2.0 PostGIS doc, http://postgis.refractions.net/documentation/manual-svn/ST_MakeValid.html

I think that this PostGIS 2.0 function grows out of an old contrib.  I've used the contrib with great success in the past.  Here are a few links on that, http://linfiniti.com/2010/07/cleaning-geometries-inside-postgis/
http://trac.osgeo.org/postgis/wiki/UsersWikiCleanPolygons

Eli

>>> On 4/27/2011 at 7:55 AM, in message <4DB82E4A.1010207@swoodbridge.com>, Stephen
Woodbridge <woodbri@swoodbridge.com> wrote:
> On 4/27/2011 10:36 AM, Elijah Robison wrote:
>> Hey devs, is anyone aware of an OGR approach to validate/clean
>> geometries, for instance, as they are being converted from SHP to
>> PostGRESql?
>> It's not uncommon to have a handful of invalid geometries (usually
>> self-intersecting polygons) in a parcel dataset, and it's impractical to
>> correct them manually. In most situations I use the "Clean Geometries"
>> function in ArcGIS, which does fix the problem. However this one
>> functionality is my main reason to retain Arc in my primary tool chain.
>>
>> I've never found a scripting approach by trolling the search engines so
>> I thought I'd ask here.
> 
> This would be an interesting tool and you might want to check the 
> postgis list as I think there have been some tools posted there to clean 
> check tables in the database.
> 
> Since I use the shp2pgsql data loader, my standard check and clean is:
> 
> update mytable set the_geom=buffer(the_geom, 0.0) where not 
> isvalid(the_geom);
> 
> -- at this point anything that is not valid probably need to be looked
> -- at or needs something like a dump the polygon as line segments and
> -- then st_build_area() on the line segments.
> 
> select count(*) from mytable where not isvalid(the_geom);
> select gid from mytable where not isvalid(the_geom);
> 
> But this is all postgis related and not GEOS related, but you might be 
> able to do the same thing directly in GEOS if you know what strategies 
> work in postgis.
> 
> -Steve W
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From matt.wilkie at gov.yk.ca  Wed Apr 27 11:57:26 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Apr 27 11:57:25 2011
Subject: [gdal-dev] nearblack troubles
Message-ID: <4DB83CE6.3070504@gov.yk.ca>

Hi All,

The geotiff here 
(http://www.maphew.com/Itches/Decollaring_with_nearblack) has two 
collars to be removed. The outermost consists of pure black (0,0,0) 
while the innermost is off-white (ranges from 240 thru 255). I used 
gdalsetnull[1] to change 0,0,0 to nodata, then ran `nearblack -white` on 
the result. I detect no difference in the output image even with a very 
large fuzz factor (-near 50) .

What am I doing wrong?

{{{
d:\>cmd /version
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

d:\>gdalinfo --version
GDAL 1.8.0, released 2011/01/12

d:\>gdalinfo to-be-decollared.tif
...snip....
Band 1 Block=375x7 Type=Byte, ColorInterp=Red
Band 2 Block=375x7 Type=Byte, ColorInterp=Green
Band 3 Block=375x7 Type=Byte, ColorInterp=Blue

d:\>copy to-be-decollared.tif 0-is-nodata.tif

d:\>gdalsetnull 0-is-nodata.tif
Initial nodata for band  1      None
Output nodata for band  1       0.0
Initial nodata for band  2      0.0
Output nodata for band  2       0.0
Initial nodata for band  3      0.0
Output nodata for band  3       0.0

d:\>gdalinfo 0-is-nodata.tif
...snip....
Band 1 Block=375x7 Type=Byte, ColorInterp=Red
    NoData Value=0
Band 2 Block=375x7 Type=Byte, ColorInterp=Green
    NoData Value=0
Band 3 Block=375x7 Type=Byte, ColorInterp=Blue
    NoData Value=0

d:\>nearblack -white -near 50 -o no-collar-white.tif 0-is-nodata.tif

d:\>gdalinfo no-collar-white.tif
...snip...
Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
    Description = Layer_1
    Metadata:
      LAYER_TYPE=athematic
Band 2 Block=64x64 Type=Byte, ColorInterp=Undefined
    Description = Layer_2
    Metadata:
      LAYER_TYPE=athematic
Band 3 Block=64x64 Type=Byte, ColorInterp=Undefined
    Description = Layer_3
    Metadata:
      LAYER_TYPE=athematic
}}}


[1] 
http://code.google.com/p/maphew/source/browse/trunk/gis/o4w_extras/bin/gdalsetnull.py

thanks in advance for your time and thoughts,

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From even.rouault at mines-paris.org  Wed Apr 27 13:26:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 27 13:26:42 2011
Subject: [gdal-dev] nearblack troubles
In-Reply-To: <4DB83CE6.3070504@gov.yk.ca>
References: <4DB83CE6.3070504@gov.yk.ca>
Message-ID: <201104271926.29002.even.rouault@mines-paris.org>

Le mercredi 27 avril 2011 17:57:26, Matt Wilkie a ?crit :
> Hi All,
> 
> The geotiff here
> (http://www.maphew.com/Itches/Decollaring_with_nearblack) has two
> collars to be removed. The outermost consists of pure black (0,0,0)
> while the innermost is off-white (ranges from 240 thru 255). I used
> gdalsetnull[1] to change 0,0,0 to nodata,

nearblack doesn't take into account the nodata values. It just look at the 
pixel values.

> then ran `nearblack -white` on
> the result. I detect no difference in the output image even with a very
> large fuzz factor (-near 50) .

Yes, nearblack -white will stop as soon it encounters a black pixel...

> 
> What am I doing wrong?

Nothing, nearblack isn't designed for your use case. However it would be not 
difficult to hack the ProcessLine() method in nearblack.cpp to do both the white 
and black cases.

> 
> {{{
> d:\>cmd /version
> Microsoft Windows [Version 6.1.7600]
> Copyright (c) 2009 Microsoft Corporation.  All rights reserved.
> 
> d:\>gdalinfo --version
> GDAL 1.8.0, released 2011/01/12
> 
> d:\>gdalinfo to-be-decollared.tif
> ...snip....
> Band 1 Block=375x7 Type=Byte, ColorInterp=Red
> Band 2 Block=375x7 Type=Byte, ColorInterp=Green
> Band 3 Block=375x7 Type=Byte, ColorInterp=Blue
> 
> d:\>copy to-be-decollared.tif 0-is-nodata.tif
> 
> d:\>gdalsetnull 0-is-nodata.tif
> Initial nodata for band  1      None
> Output nodata for band  1       0.0
> Initial nodata for band  2      0.0
> Output nodata for band  2       0.0
> Initial nodata for band  3      0.0
> Output nodata for band  3       0.0
> 
> d:\>gdalinfo 0-is-nodata.tif
> ...snip....
> Band 1 Block=375x7 Type=Byte, ColorInterp=Red
>     NoData Value=0
> Band 2 Block=375x7 Type=Byte, ColorInterp=Green
>     NoData Value=0
> Band 3 Block=375x7 Type=Byte, ColorInterp=Blue
>     NoData Value=0
> 
> d:\>nearblack -white -near 50 -o no-collar-white.tif 0-is-nodata.tif
> 
> d:\>gdalinfo no-collar-white.tif
> ...snip...
> Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
>     Description = Layer_1
>     Metadata:
>       LAYER_TYPE=athematic
> Band 2 Block=64x64 Type=Byte, ColorInterp=Undefined
>     Description = Layer_2
>     Metadata:
>       LAYER_TYPE=athematic
> Band 3 Block=64x64 Type=Byte, ColorInterp=Undefined
>     Description = Layer_3
>     Metadata:
>       LAYER_TYPE=athematic
> }}}
> 
> 
> [1]
> http://code.google.com/p/maphew/source/browse/trunk/gis/o4w_extras/bin/gdal
> setnull.py
> 
> thanks in advance for your time and thoughts,
From mark1 at pml.ac.uk  Wed Apr 27 14:42:25 2011
From: mark1 at pml.ac.uk (Mark Warren)
Date: Wed Apr 27 14:46:15 2011
Subject: [gdal-dev] gdalwarp vertical datum shift question
Message-ID: <7546D505C3AF304280B10C3D8B8DFD3903E2804A@burgh.npm.ac.uk>

Hi, I have a question regarding gdalwarp.

We would like to update gdalwarp to be able to be used for DEM files
such that a vertical datum shift can be added to the files, as well as
the horizontal warp. Especially we would want to be able to use the
geoidgrids vertical grid shift option.

As an experiment I have edited a line in the gdalwarpkernal.cpp file in
the function:

static CPLErr GWKNearestNoMasksFloat( GDALWarpKernel *poWK )

((float *)poWK->papabyDstImage[iBand])[iDstOffset] =
    ((float *)poWK->papabySrcImage[iBand])[iSrcOffset]-padfZ[iDstX];

such that instead of assigning the src image value, it assigns that
value with the Z coordinate transform value subtracted. I have checked
this with some warp transformations from WGS84 to OSGB36 and it appears
to work to a certain accuracy (within 10's of cm).

One thing I'm unsure of is whether the fact that the transformation from
destination grid to source grid with the Z value =0 is going to be
inaccurate or not. Should the "proper" way be to assign this the actual
Z value from the source file prior to calculating the transformed
values? This seems that it may be difficult to do as it is using a
backwards transformation (dest to src) so we don't know the src pixel
that relates to the dest pixel until after the transformation.

Another obvious issue would be that we would only want this to happen for 
images with a vertical datum associated (like DEMs) and not for other 
georeferenced imagery that we may want to warp.

So before we go down this route too far (since a lot of changes may be
needed to the code) - does anyone think that this is a feasible idea or
have any other suggestions (other than using a GIS :) )?

Thanks,
Mark

--------------------------------------------------------------------------------
Plymouth Marine Laboratory
 
Registered Office:
Prospect Place 
The Hoe
Plymouth  PL1 3DH
 
Website: www.pml.ac.uk
Click here for PML Annual Review 2010
Registered Charity No. 1091222
PML is a company limited by guarantee
registered in England & Wales
company number 4178503

Please think before you print

--------------------------------------------------------------------------------
This e-mail, its content and any file attachments are confidential.

If you have received this e-mail in error please do not copy, disclose it to any third party or use the contents or attachments in any way. Please notify the sender by replying to this e-mail or e-mail forinfo@pml.ac.uk and then delete the email without making any copies or using it in any other way.

The content of this message may contain personal views which are not the views of Plymouth Marine Laboratory unless specifically stated.

You are reminded that e-mail communications are not secure and may contain viruses. Plymouth Marine Laboratory accepts no liability for any loss or damage which may be caused by viruses.
--------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110427/5a42454a/attachment.html
From Luke.Pinner at environment.gov.au  Wed Apr 27 19:19:28 2011
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Apr 27 19:19:33 2011
Subject: [gdal-dev] nearblack troubles [SEC=UNCLASSIFIED]
In-Reply-To: <4DB83CE6.3070504@gov.yk.ca>
References: <4DB83CE6.3070504@gov.yk.ca>
Message-ID: <64102B2FB850C345B04D09C82018F45F056E4E9A@ACT01VEXCCL04.internal.govt>

Worked for me using the following:

#Change black to white
gdalbuildvrt -srcnodata 0 -vrtnodata 255 to-be-decollared.vrt
to-be-decollared.tif 
#Run nearblack -white 
nearblack -white -o decollared.tif to-be-decollared.vrt

Luke

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Wilkie
Sent: Thursday, 28 April 2011 1:57 AM
To: gdal-dev
Subject: [gdal-dev] nearblack troubles

Hi All,

The geotiff here 
(http://www.maphew.com/Itches/Decollaring_with_nearblack) has two 
collars to be removed. The outermost consists of pure black (0,0,0) 
while the innermost is off-white (ranges from 240 thru 255). I used 
gdalsetnull[1] to change 0,0,0 to nodata, then ran `nearblack -white` on

the result. I detect no difference in the output image even with a very 
large fuzz factor (-near 50) .

What am I doing wrong?

{{{
d:\>cmd /version
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

d:\>gdalinfo --version
GDAL 1.8.0, released 2011/01/12

d:\>gdalinfo to-be-decollared.tif
...snip....
Band 1 Block=375x7 Type=Byte, ColorInterp=Red
Band 2 Block=375x7 Type=Byte, ColorInterp=Green
Band 3 Block=375x7 Type=Byte, ColorInterp=Blue

d:\>copy to-be-decollared.tif 0-is-nodata.tif

d:\>gdalsetnull 0-is-nodata.tif
Initial nodata for band  1      None
Output nodata for band  1       0.0
Initial nodata for band  2      0.0
Output nodata for band  2       0.0
Initial nodata for band  3      0.0
Output nodata for band  3       0.0

d:\>gdalinfo 0-is-nodata.tif
...snip....
Band 1 Block=375x7 Type=Byte, ColorInterp=Red
    NoData Value=0
Band 2 Block=375x7 Type=Byte, ColorInterp=Green
    NoData Value=0
Band 3 Block=375x7 Type=Byte, ColorInterp=Blue
    NoData Value=0

d:\>nearblack -white -near 50 -o no-collar-white.tif 0-is-nodata.tif

d:\>gdalinfo no-collar-white.tif
...snip...
Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
    Description = Layer_1
    Metadata:
      LAYER_TYPE=athematic
Band 2 Block=64x64 Type=Byte, ColorInterp=Undefined
    Description = Layer_2
    Metadata:
      LAYER_TYPE=athematic
Band 3 Block=64x64 Type=Byte, ColorInterp=Undefined
    Description = Layer_3
    Metadata:
      LAYER_TYPE=athematic
}}}


[1] 
http://code.google.com/p/maphew/source/browse/trunk/gis/o4w_extras/bin/g
dalsetnull.py

thanks in advance for your time and thoughts,

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.
From pramsey at cleverelephant.ca  Wed Apr 27 20:11:30 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Apr 27 20:11:32 2011
Subject: [gdal-dev] FGDB Opening Sample File
Message-ID: <BANLkTimHrNHvcTB4e1v5h=bg5hzuLtNBBA@mail.gmail.com>

Hi FGDB'ers, just getting started... I'm just trying out ogrinfo under
Linux against various sample data and want to confirm some results...
the file that Michael Smith sent gives me this result:

[pramsey@localhost test-data]$ ogrinfo test_fgdb.gdb
ERROR 1: GDB Error: Error opening \base2_some_lines_relationship
long:-2147220655
ERROR 1: GDB Error: Error opening \more_relationships long:-2147220655
ERROR 1: GDB Error: Error opening \even_more_rlcs long:-2147220655
ERROR 1: GDB Error: Error opening \b_relation_ship long:-2147220655
ERROR 1: GDB Error: Failed at getting table definition for
\another_relationship long:-2147211775
ERROR 1: GDB Error: Error initializing OGRLayer for \another_relationship long:0
ERROR 1: GDB Error: Error opening \a_relation_ship long:-2147220655
INFO: Open of `test_fgdb.gdb'
      using driver `FileGDB' successful.
1: basetable_2 (None)
2: basetable (None)
3: base_table1 (None)
4: test_lines (3D Multi Line String)
5: more_test_lines (3D Multi Line String)
6: test_points (3D Point)
7: test_areas (3D Multi Polygon)

I assume the failures are relationships we don't handle yet (or ever
and will need to be silenced).

There is a test file in the FGDB API itself, and it fails to open
entirely, which seems odd,

[pramsey@localhost data]$ ogrinfo ./TestData.gdb
ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
FAILURE:
Unable to open datasource `./TestData.gdb' with the following drivers.

Do other folks have trouble opening the ESRI sample file? The error
code doesn't make much sense, it is supposed to mean "If the path is
seriously in error, say pointing to the wrong drive, a -2147467259
(E_FAIL) error is returned" and relates to the CreateGeodatabase
method, not the OpenGeodatabase method.

Thoughts, ideas?

Paul
From candini at meeo.it  Thu Apr 28 03:30:02 2011
From: candini at meeo.it (canduc17)
Date: Thu Apr 28 03:30:05 2011
Subject: [gdal-dev] Mask and GEOTiff
Message-ID: <1303975802481-6312284.post@n2.nabble.com>

Hi everyone.

Is there a way to crop a GEOTiff image using a Mask of the same dimension?

For example, a mask with a filled circle: every pixel inside the circle is 1
and the others are 0.
I would like to obtain a new GEOTiff with only the pixel inside the circle
visible and the other set to 0.

Is that possible with tools like gdal_translate or other ones?

Thanks in advance!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Mask-and-GEOTiff-tp6312284p6312284.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Apr 28 05:15:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 28 05:15:21 2011
Subject: [gdal-dev] Mask and GEOTiff
In-Reply-To: <1303975802481-6312284.post@n2.nabble.com>
References: <1303975802481-6312284.post@n2.nabble.com>
Message-ID: <BANLkTikAbJ7-4muXkLpXJrgfEs2hze7kDw@mail.gmail.com>

Alessandro,

You can combine the tiff and the mask using GDAL's VRT format or by using
the -separate option in gdal_merge.py script. The extra band should be set
as a nodata mask or alpha band.

http://www.gdal.org/gdal_vrttut.html
http://www.gdal.org/gdalbuildvrt.html

http://www.gdal.org/gdal_merge.html

On Thu, Apr 28, 2011 at 1:00 PM, canduc17 <candini@meeo.it> wrote:

> Hi everyone.
>
> Is there a way to crop a GEOTiff image using a Mask of the same dimension?
>
> For example, a mask with a filled circle: every pixel inside the circle is
> 1
> and the others are 0.
> I would like to obtain a new GEOTiff with only the pixel inside the circle
> visible and the other set to 0.
>
> Is that possible with tools like gdal_translate or other ones?
>
> Thanks in advance!
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Mask-and-GEOTiff-tp6312284p6312284.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110428/022e1ccd/attachment.html
From candini at meeo.it  Thu Apr 28 05:30:09 2011
From: candini at meeo.it (canduc17)
Date: Thu Apr 28 05:30:14 2011
Subject: [gdal-dev] Re: Mask and GEOTiff
In-Reply-To: <BANLkTikAbJ7-4muXkLpXJrgfEs2hze7kDw@mail.gmail.com>
References: <1303975802481-6312284.post@n2.nabble.com>
	<BANLkTikAbJ7-4muXkLpXJrgfEs2hze7kDw@mail.gmail.com>
Message-ID: <1303983009921-6312590.post@n2.nabble.com>

I think gdal merge is the easier way.

But with a command like this:
gdal_merge.py -of GTiff -separate -o cropped.tif orig.tif mask.tif

I obtainn a GEOTiff with two bands: the first is the original image and the
second is the mask.
This is not what I want.

I would like to obtain a single band GEOTiff with visible only the pixels of
original image filtered by the mask.

Is that possible with a further passage or with another tool?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Mask-and-GEOTiff-tp6312284p6312590.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From candini at meeo.it  Thu Apr 28 06:30:42 2011
From: candini at meeo.it (canduc17)
Date: Thu Apr 28 06:30:43 2011
Subject: [gdal-dev] Re: Cropping raster by vector files
In-Reply-To: <1295863684732-5954709.post@n2.nabble.com>
References: <1278623198275-5271977.post@n2.nabble.com>
	<1295863684732-5954709.post@n2.nabble.com>
Message-ID: <1303986642140-6312752.post@n2.nabble.com>

Ok.

But if I have a separate shapefile (.shp) and a GEOTiff image, which command
line tool can I use to obtain the first image of your howto?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Cropping-raster-by-vector-files-tp5271977p6312752.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu Apr 28 06:34:22 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 28 06:34:29 2011
Subject: [gdal-dev] gdalwarp vertical datum shift question
In-Reply-To: <7546D505C3AF304280B10C3D8B8DFD3903E2804A@burgh.npm.ac.uk>
References: <7546D505C3AF304280B10C3D8B8DFD3903E2804A@burgh.npm.ac.uk>
Message-ID: <4DB942AE.3080907@pobox.com>

On 11-04-27 02:42 PM, Mark Warren wrote:
> So before we go down this route too far (since a lot of changes may be
> needed to the code) - does anyone think that this is a feasible idea or
> have any other suggestions (other than using a GIS :) )?

Mark,

Honestly, I think it would be better to implement a distinct utility
that applies vertical datum offsets rather than to incorporate it into
gdalwarp.  I suspect it will significantly complicate the gdalwarp code
to have vertical offsets mixed in to all the interpolation code - assuming
you are ultimately hoping for something suitable to incorporate back into the
core.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Thu Apr 28 11:49:48 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Apr 28 11:49:50 2011
Subject: [gdal-dev] nearblack troubles [SEC=UNCLASSIFIED]
In-Reply-To: <64102B2FB850C345B04D09C82018F45F056E4E9A@ACT01VEXCCL04.internal.govt>
References: <4DB83CE6.3070504@gov.yk.ca>
	<64102B2FB850C345B04D09C82018F45F056E4E9A@ACT01VEXCCL04.internal.govt>
Message-ID: <4DB98C9C.3080806@gov.yk.ca>

 > Worked for me using the following:
 >
 > #Change black to white
 > gdalbuildvrt -srcnodata 0 -vrtnodata 255 to-be-decollared.vrt
 > to-be-decollared.tif
 > #Run nearblack -white
 > nearblack -white -o decollared.tif to-be-decollared.vrt

Luke, once again I thank you. :)


matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
From jaadfoo at gmail.com  Thu Apr 28 12:53:48 2011
From: jaadfoo at gmail.com (Jamie Adams)
Date: Thu Apr 28 12:53:50 2011
Subject: [gdal-dev] Re: Mask and GEOTiff
In-Reply-To: <1303983009921-6312590.post@n2.nabble.com>
References: <1303975802481-6312284.post@n2.nabble.com>
	<BANLkTikAbJ7-4muXkLpXJrgfEs2hze7kDw@mail.gmail.com>
	<1303983009921-6312590.post@n2.nabble.com>
Message-ID: <BANLkTimgPfAH7BbcAsZwQiZeY6MjQj4tTQ@mail.gmail.com>

You could run gdal_polygonize on the mask geotiff and then use the output
vector with gdal_rasterize.  That's the only way I can think of without
writing a python script to do the pixel comparisons.

Jamie

On Thu, Apr 28, 2011 at 2:30 AM, canduc17 <candini@meeo.it> wrote:

> I think gdal merge is the easier way.
>
> But with a command like this:
> gdal_merge.py -of GTiff -separate -o cropped.tif orig.tif mask.tif
>
> I obtainn a GEOTiff with two bands: the first is the original image and the
> second is the mask.
> This is not what I want.
>
> I would like to obtain a single band GEOTiff with visible only the pixels
> of
> original image filtered by the mask.
>
> Is that possible with a further passage or with another tool?
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Mask-and-GEOTiff-tp6312284p6312590.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110428/a7530d26/attachment.html
From even.rouault at mines-paris.org  Thu Apr 28 13:14:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 28 13:14:54 2011
Subject: [gdal-dev] nearblack troubles [SEC=UNCLASSIFIED]
In-Reply-To: <4DB98C9C.3080806@gov.yk.ca>
References: <4DB83CE6.3070504@gov.yk.ca>
	<64102B2FB850C345B04D09C82018F45F056E4E9A@ACT01VEXCCL04.internal.govt>
	<4DB98C9C.3080806@gov.yk.ca>
Message-ID: <201104281914.28493.even.rouault@mines-paris.org>

Le jeudi 28 avril 2011 17:49:48, Matt Wilkie a ?crit :
>  > Worked for me using the following:
>  > 
>  > #Change black to white
>  > gdalbuildvrt -srcnodata 0 -vrtnodata 255 to-be-decollared.vrt
>  > to-be-decollared.tif
>  > #Run nearblack -white
>  > nearblack -white -o decollared.tif to-be-decollared.vrt
> 
> Luke, once again I thank you. :)

There's one thing you must be aware of with the above process. The 
gdalbuildvrt step will replace all 0 values by 255, but band per band, to be 
opposite to detecting the triplet (0,0,0). So this might alter colors that 
have least one component to 0 inside the raster.

> 
> 
> matt wilkie
> --------------------------------------------
> Geomatics Analyst
> Information Management and Technology
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Apr 28 13:19:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 28 13:20:08 2011
Subject: [gdal-dev] FGDB Opening Sample File
In-Reply-To: <BANLkTimHrNHvcTB4e1v5h=bg5hzuLtNBBA@mail.gmail.com>
References: <BANLkTimHrNHvcTB4e1v5h=bg5hzuLtNBBA@mail.gmail.com>
Message-ID: <201104281919.48604.even.rouault@mines-paris.org>

Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ?crit :
> 
> I assume the failures are relationships we don't handle yet (or ever
> and will need to be silenced).
> 

Not sure what those relations things are.

> There is a test file in the FGDB API itself, and it fails to open
> entirely, which seems odd,
> 
> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
> FAILURE:
> Unable to open datasource `./TestData.gdb' with the following drivers.
> 
> Do other folks have trouble opening the ESRI sample file? The error
> code doesn't make much sense, it is supposed to mean "If the path is
> seriously in error, say pointing to the wrong drive, a -2147467259
> (E_FAIL) error is returned" and relates to the CreateGeodatabase
> method, not the OpenGeodatabase method.

Yes I did notice that issue too. I assume either the example is corrupted, 
either it is a bug in the FileGDB API, either... Perhaps reporting to ESRI 
might be usefull. Or perhaps Ragi has some clues.

Even
From michael.smith at usace.army.mil  Thu Apr 28 13:26:24 2011
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu Apr 28 13:26:29 2011
Subject: [gdal-dev] FGDB Opening Sample File
In-Reply-To: <201104281919.48604.even.rouault@mines-paris.org>
Message-ID: <C9DF1B80.22DBB%michael.smith@usace.army.mil>

Relations are joins to non-spatial tables containing domain values etc. They
are relational tables.

Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 4/28/11 1:19 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:

> Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ?crit :
>> 
>> I assume the failures are relationships we don't handle yet (or ever
>> and will need to be silenced).
>> 
> 
> Not sure what those relations things are.
> 
>> There is a test file in the FGDB API itself, and it fails to open
>> entirely, which seems odd,
>> 
>> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>> FAILURE:
>> Unable to open datasource `./TestData.gdb' with the following drivers.
>> 
>> Do other folks have trouble opening the ESRI sample file? The error
>> code doesn't make much sense, it is supposed to mean "If the path is
>> seriously in error, say pointing to the wrong drive, a -2147467259
>> (E_FAIL) error is returned" and relates to the CreateGeodatabase
>> method, not the OpenGeodatabase method.
> 
> Yes I did notice that issue too. I assume either the example is corrupted,
> either it is a bug in the FileGDB API, either... Perhaps reporting to ESRI
> might be usefull. Or perhaps Ragi has some clues.
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From pramsey at opengeo.org  Thu Apr 28 17:30:41 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Apr 28 17:30:43 2011
Subject: [gdal-dev] FGDB Opening Sample File
In-Reply-To: <C9DF1B80.22DBB%michael.smith@usace.army.mil>
References: <201104281919.48604.even.rouault@mines-paris.org>
	<C9DF1B80.22DBB%michael.smith@usace.army.mil>
Message-ID: <BANLkTikkD955Wfao4QOKFhZD8yQBPxE2vg@mail.gmail.com>

Are they tables or links between tables?  I can see this is going to
be a hard project to do without ArcGIS handy :)

P.

On Thu, Apr 28, 2011 at 10:26 AM, Smith, Michael ERDC-CRREL-NH
<michael.smith@usace.army.mil> wrote:
> Relations are joins to non-spatial tables containing domain values etc. They
> are relational tables.
>
> Mike
>
>
> --
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
>
>
> On 4/28/11 1:19 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>
>> Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ?crit :
>>>
>>> I assume the failures are relationships we don't handle yet (or ever
>>> and will need to be silenced).
>>>
>>
>> Not sure what those relations things are.
>>
>>> There is a test file in the FGDB API itself, and it fails to open
>>> entirely, which seems odd,
>>>
>>> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
>>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>>> FAILURE:
>>> Unable to open datasource `./TestData.gdb' with the following drivers.
>>>
>>> Do other folks have trouble opening the ESRI sample file? The error
>>> code doesn't make much sense, it is supposed to mean "If the path is
>>> seriously in error, say pointing to the wrong drive, a -2147467259
>>> (E_FAIL) error is returned" and relates to the CreateGeodatabase
>>> method, not the OpenGeodatabase method.
>>
>> Yes I did notice that issue too. I assume either the example is corrupted,
>> either it is a bug in the FileGDB API, either... Perhaps reporting to ESRI
>> might be usefull. Or perhaps Ragi has some clues.
>>
>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jason.roberts at duke.edu  Thu Apr 28 17:42:56 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Apr 28 17:47:01 2011
Subject: [gdal-dev] FGDB Opening Sample File
In-Reply-To: <BANLkTikkD955Wfao4QOKFhZD8yQBPxE2vg@mail.gmail.com>
References: <201104281919.48604.even.rouault@mines-paris.org>
	<C9DF1B80.22DBB%michael.smith@usace.army.mil>
	<BANLkTikkD955Wfao4QOKFhZD8yQBPxE2vg@mail.gmail.com>
Message-ID: <022a01cc05ed$3cecc640$b6c652c0$@roberts@duke.edu>

FWIW, the error code -2147467259 is probably a Microsoft HRESULT. In hex, it
is 0x80004005, which is a generic "access is denied" error. Not that this is
much of a clue about what is going on. You could check for some kind of
permissions or access problem...

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Thursday, April 28, 2011 5:31 PM
To: Smith, Michael ERDC-CRREL-NH
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] FGDB Opening Sample File

Are they tables or links between tables?  I can see this is going to
be a hard project to do without ArcGIS handy :)

P.

On Thu, Apr 28, 2011 at 10:26 AM, Smith, Michael ERDC-CRREL-NH
<michael.smith@usace.army.mil> wrote:
> Relations are joins to non-spatial tables containing domain values etc.
They
> are relational tables.
>
> Mike
>
>
> --
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
>
>
> On 4/28/11 1:19 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>
>> Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ?crit :
>>>
>>> I assume the failures are relationships we don't handle yet (or ever
>>> and will need to be silenced).
>>>
>>
>> Not sure what those relations things are.
>>
>>> There is a test file in the FGDB API itself, and it fails to open
>>> entirely, which seems odd,
>>>
>>> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
>>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>>> FAILURE:
>>> Unable to open datasource `./TestData.gdb' with the following drivers.
>>>
>>> Do other folks have trouble opening the ESRI sample file? The error
>>> code doesn't make much sense, it is supposed to mean "If the path is
>>> seriously in error, say pointing to the wrong drive, a -2147467259
>>> (E_FAIL) error is returned" and relates to the CreateGeodatabase
>>> method, not the OpenGeodatabase method.
>>
>> Yes I did notice that issue too. I assume either the example is
corrupted,
>> either it is a bug in the FileGDB API, either... Perhaps reporting to
ESRI
>> might be usefull. Or perhaps Ragi has some clues.
>>
>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mariusjigmond at hotmail.com  Thu Apr 28 19:13:46 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu Apr 28 19:13:53 2011
Subject: [gdal-dev] Mask and GEOTiff
In-Reply-To: <1303975802481-6312284.post@n2.nabble.com>
References: <1303975802481-6312284.post@n2.nabble.com>
Message-ID: <BLU0-SMTP148060E9FC34A834E6B3CBCB29B0@phx.gbl>

In QGIS you can use Raster Calculator to multiply the rasters.

-marius

On Thu, 2011-04-28 at 00:30 -0700, canduc17 wrote:
> Hi everyone.
> 
> Is there a way to crop a GEOTiff image using a Mask of the same dimension?
> 
> For example, a mask with a filled circle: every pixel inside the circle is 1
> and the others are 0.
> I would like to obtain a new GEOTiff with only the pixel inside the circle
> visible and the other set to 0.
> 
> Is that possible with tools like gdal_translate or other ones?
> 
> Thanks in advance!
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Mask-and-GEOTiff-tp6312284p6312284.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From mariusjigmond at hotmail.com  Thu Apr 28 19:21:50 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu Apr 28 19:22:57 2011
Subject: [gdal-dev] FGDB Opening Sample File
In-Reply-To: <BANLkTikkD955Wfao4QOKFhZD8yQBPxE2vg@mail.gmail.com>
References: <201104281919.48604.even.rouault@mines-paris.org>
	<C9DF1B80.22DBB%michael.smith@usace.army.mil>
	<BANLkTikkD955Wfao4QOKFhZD8yQBPxE2vg@mail.gmail.com>
Message-ID: <BLU0-SMTP1528E899A080AF411751872B29B0@phx.gbl>

They are links between tables. Usually, between the attribute table of a
feature class and a simple (non-spatial, as Mike said) table. But you
can relate any kind of attribute tables.

-marius

On Thu, 2011-04-28 at 14:30 -0700, Paul Ramsey wrote:
> Are they tables or links between tables?  I can see this is going to
> be a hard project to do without ArcGIS handy :)
> 
> P.
> 
> On Thu, Apr 28, 2011 at 10:26 AM, Smith, Michael ERDC-CRREL-NH
> <michael.smith@usace.army.mil> wrote:
> > Relations are joins to non-spatial tables containing domain values etc. They
> > are relational tables.
> >
> > Mike
> >
> >
> > --
> > Michael Smith
> > Remote Sensing/GIS Center
> > US Army Corps of Engineers
> >
> >
> >
> > On 4/28/11 1:19 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
> >
> >> Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ?crit :
> >>>
> >>> I assume the failures are relationships we don't handle yet (or ever
> >>> and will need to be silenced).
> >>>
> >>
> >> Not sure what those relations things are.
> >>
> >>> There is a test file in the FGDB API itself, and it fails to open
> >>> entirely, which seems odd,
> >>>
> >>> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
> >>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
> >>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
> >>> FAILURE:
> >>> Unable to open datasource `./TestData.gdb' with the following drivers.
> >>>
> >>> Do other folks have trouble opening the ESRI sample file? The error
> >>> code doesn't make much sense, it is supposed to mean "If the path is
> >>> seriously in error, say pointing to the wrong drive, a -2147467259
> >>> (E_FAIL) error is returned" and relates to the CreateGeodatabase
> >>> method, not the OpenGeodatabase method.
> >>
> >> Yes I did notice that issue too. I assume either the example is corrupted,
> >> either it is a bug in the FileGDB API, either... Perhaps reporting to ESRI
> >> might be usefull. Or perhaps Ragi has some clues.
> >>
> >> Even
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From ragi at burhum.com  Fri Apr 29 03:27:20 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Fri Apr 29 03:27:23 2011
Subject: [gdal-dev] FGDB Opening Sample File
Message-ID: <BANLkTimZdJVogHE5NHtZaNw5A1Xmi6A=tw@mail.gmail.com>

There seems to be some misunderstandings about Relationship Classes,
so I may as well explain.

Relationship Classes come in two types

1.- Simple Relationship Classes
2.- Attributed Relationship Classes

Conceptually, they just relate one (or more) column(s) in one field to
another column(s) in another table. Besides also including cardinality
information, and enforcing referential integrity (when the underlying
db doesn't support it), they are used inside ArcGIS for display and
editing purposes. The fact that the may or may not have domains
associated with them is orthogonal to this discussion.

For the first kind (simple), they only exist in metadata tables - they
don't map to any physical tables on the db and thus should not be
mapped to anything inside OGR.

For the second kind (attributed), they do refer to actual non-spatial
tables on the db - we could map those to a non-spatial OGR table.

So bug #1 is skip simple relationship classes and enhancement #2 is
map attributed relationship classes to OGR non-spatial tables.

As far as TestData.gdb, none of the ESRI samples use it and just
calling open through the FileGDB API on it, fails, so it is corrupted
or a bug in the FileGDB beta 3 API - nothing that we can do about
that. The error returned, -2147467259 is E_FAIL (like you diagnosed
earlier Paul), and it is the most generic kind of COM Error... most of
the ESRI code relies on custom COM errors, but every once in awhile,
those errors are not propagated down the stack and the fall back when
no custom error is detected is E_FAIL. So basically, it just means
"error - that is all I can tell you sorry".

- Ragi


> Date: Thu, 28 Apr 2011 18:21:50 -0500
> From: Marius Jigmond <mariusjigmond@hotmail.com>
> Subject: Re: [gdal-dev] FGDB Opening Sample File
> To: Paul Ramsey <pramsey@opengeo.org>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID: <BLU0-SMTP1528E899A080AF411751872B29B0@phx.gbl>
> Content-Type: text/plain; charset="UTF-8"
>
> They are links between tables. Usually, between the attribute table of a
> feature class and a simple (non-spatial, as Mike said) table. But you
> can relate any kind of attribute tables.
>
> -marius
>
> On Thu, 2011-04-28 at 14:30 -0700, Paul Ramsey wrote:
>> Are they tables or links between tables? ?I can see this is going to
>> be a hard project to do without ArcGIS handy :)
>>
>> P.
>>
>> On Thu, Apr 28, 2011 at 10:26 AM, Smith, Michael ERDC-CRREL-NH
>> <michael.smith@usace.army.mil> wrote:
>> > Relations are joins to non-spatial tables containing domain values etc. They
>> > are relational tables.
>> >
>> > Mike
>> >
>> >
>> > --
>> > Michael Smith
>> > Remote Sensing/GIS Center
>> > US Army Corps of Engineers
>> >
>> >
>> >
>> > On 4/28/11 1:19 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>> >
>> >> Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ??crit :
>> >>>
>> >>> I assume the failures are relationships we don't handle yet (or ever
>> >>> and will need to be silenced).
>> >>>
>> >>
>> >> Not sure what those relations things are.
>> >>
>> >>> There is a test file in the FGDB API itself, and it fails to open
>> >>> entirely, which seems odd,
>> >>>
>> >>> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
>> >>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>> >>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>> >>> FAILURE:
>> >>> Unable to open datasource `./TestData.gdb' with the following drivers.
>> >>>
>> >>> Do other folks have trouble opening the ESRI sample file? The error
>> >>> code doesn't make much sense, it is supposed to mean "If the path is
>> >>> seriously in error, say pointing to the wrong drive, a -2147467259
>> >>> (E_FAIL) error is returned" and relates to the CreateGeodatabase
>> >>> method, not the OpenGeodatabase method.
>> >>
>> >> Yes I did notice that issue too. I assume either the example is corrupted,
>> >> either it is a bug in the FileGDB API, either... Perhaps reporting to ESRI
>> >> might be usefull. Or perhaps Ragi has some clues.
>> >>
>> >> Even
>> >> _______________________________________________
>
From michael.smith at usace.army.mil  Fri Apr 29 06:49:33 2011
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Fri Apr 29 06:49:38 2011
Subject: [gdal-dev] FGDB Opening Sample File
In-Reply-To: <BANLkTikkD955Wfao4QOKFhZD8yQBPxE2vg@mail.gmail.com>
Message-ID: <C9E00FFD.22E3D%michael.smith@usace.army.mil>

Paul,

They are tables and the links between them (as far as I can tell).

See 
http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#/Relationship_c
lass_properties/004t00000004000000/

Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers


On 4/28/11 5:30 PM, "Paul Ramsey" <pramsey@opengeo.org> wrote:

> Are they tables or links between tables?  I can see this is going to
> be a hard project to do without ArcGIS handy :)
> 
> P.
> 
> On Thu, Apr 28, 2011 at 10:26 AM, Smith, Michael ERDC-CRREL-NH
> <michael.smith@usace.army.mil> wrote:
>> Relations are joins to non-spatial tables containing domain values etc. They
>> are relational tables.
>> 
>> Mike
>> 
>> 
>> --
>> Michael Smith
>> Remote Sensing/GIS Center
>> US Army Corps of Engineers
>> 
>> 
>> 
>> On 4/28/11 1:19 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>> 
>>> Le jeudi 28 avril 2011 02:11:30, Paul Ramsey a ?crit :
>>>> 
>>>> I assume the failures are relationships we don't handle yet (or ever
>>>> and will need to be silenced).
>>>> 
>>> 
>>> Not sure what those relations things are.
>>> 
>>>> There is a test file in the FGDB API itself, and it fails to open
>>>> entirely, which seems odd,
>>>> 
>>>> [pramsey@localhost data]$ ogrinfo ./TestData.gdb
>>>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>>>> ERROR 1: GDB Error: Failed to open Geodatabase long:-2147467259
>>>> FAILURE:
>>>> Unable to open datasource `./TestData.gdb' with the following drivers.
>>>> 
>>>> Do other folks have trouble opening the ESRI sample file? The error
>>>> code doesn't make much sense, it is supposed to mean "If the path is
>>>> seriously in error, say pointing to the wrong drive, a -2147467259
>>>> (E_FAIL) error is returned" and relates to the CreateGeodatabase
>>>> method, not the OpenGeodatabase method.
>>> 
>>> Yes I did notice that issue too. I assume either the example is corrupted,
>>> either it is a bug in the FileGDB API, either... Perhaps reporting to ESRI
>>> might be usefull. Or perhaps Ragi has some clues.
>>> 
>>> Even
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 

From zoltans at geograph.co.za  Fri Apr 29 08:25:38 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri Apr 29 08:47:16 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
Message-ID: <4DBAAE42.2060500@geograph.co.za>

Hi All,
I am trying to convert a bunch of MapInfo MID-MIF files to MapInfo TAB 
files, because GeoMedia 6.1 will not "connect" to MIDMIF files.
Using this script on Ubuntu 10.04, ogr2ogr from GDAL 1.8.0, released 
2011/01/12



for m in `ls *.mif` ; do n=`echo $m | awk -F . ' { print $1".tab" } ' ` 
; echo "******************** Starting $m" ; ogr2ogr -F "MapInfo File" $n 
$m ; done

(Basically: ogr2ogr -F "MapInfo File" boundaries.tab boundaries.mif )




When I load the resulting .TAB, .ID, .MAP and .DAT files into GeoMedia, 
I get coarse boxes and diagonal lines, albeit in the correct LatLong region.

When I use a very old "imutgui" from an old MapInfo to convert the same 
MID MIFs to SHAPE, I can (correctly) load the SHAPEs into GeoMedia.

I cannot use the SHAPEfile route as the field names are truncated when 
converting from MIDMIF to SHAPE.


Any idea why the TAB route messes up the geometries?

TIA,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1209 / Virus Database: 1500/3603 - Release Date: 04/28/11

From sigfrido at tiscali.it  Fri Apr 29 08:58:35 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri Apr 29 09:04:15 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
In-Reply-To: <4DBAAE42.2060500@geograph.co.za>
References: <4DBAAE42.2060500@geograph.co.za>
Message-ID: <1304081915.6854.14.camel@GOLEM>

Hi Zoltan,

I have MapInfo installed, if you post a mif/mid file I can test it
before/after conversion with ogr2ogr, imut (which is based on FME) and
MapInfo Import command.

Have you tried to open in geomedia the Shape generated by ogr2og2, at
least to see if its geom is ok?

All the best

Sig


Il giorno ven, 29/04/2011 alle 14.25 +0200, Zoltan Szecsei ha scritto:
> Hi All,
> I am trying to convert a bunch of MapInfo MID-MIF files to MapInfo TAB 
> files, because GeoMedia 6.1 will not "connect" to MIDMIF files.
> Using this script on Ubuntu 10.04, ogr2ogr from GDAL 1.8.0, released 
> 2011/01/12
> 
> 
> 
> for m in `ls *.mif` ; do n=`echo $m | awk -F . ' { print $1".tab" } ' ` 
> ; echo "******************** Starting $m" ; ogr2ogr -F "MapInfo File" $n 
> $m ; done
> 
> (Basically: ogr2ogr -F "MapInfo File" boundaries.tab boundaries.mif )
> 
> 
> 
> 
> When I load the resulting .TAB, .ID, .MAP and .DAT files into GeoMedia, 
> I get coarse boxes and diagonal lines, albeit in the correct LatLong region.
> 
> When I use a very old "imutgui" from an old MapInfo to convert the same 
> MID MIFs to SHAPE, I can (correctly) load the SHAPEs into GeoMedia.
> 
> I cannot use the SHAPEfile route as the field names are truncated when 
> converting from MIDMIF to SHAPE.
> 
> 
> Any idea why the TAB route messes up the geometries?
> 
> TIA,
> Zoltan
> 

From zoltans at geograph.co.za  Fri Apr 29 09:25:41 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri Apr 29 09:25:39 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
In-Reply-To: <1304081915.6854.14.camel@GOLEM>
References: <4DBAAE42.2060500@geograph.co.za> <1304081915.6854.14.camel@GOLEM>
Message-ID: <4DBABC55.8060605@geograph.co.za>

On 2011-04-29 14:58, Luca Sigfrido Percich wrote:
> Hi Zoltan,
>
> I have MapInfo installed, if you post a mif/mid file I can test it
>    
I will send you one off-list.
Thanks & regards,
Zoltan
> before/after conversion with ogr2ogr, imut (which is based on FME) and
> MapInfo Import command.
>
> Have you tried to open in geomedia the Shape generated by ogr2og2, at
> least to see if its geom is ok?
>    
Yes, it works fine - barring the truncation plus the odd geometry problems:
******************** Starting CULT_PUBLIC.mif
Warning 6: Normalized/laundered field name: 'FEAT_TYPE_ID' to 'FEAT_TYPE_'
Warning 6: Normalized/laundered field name: 'SUB_TYPE_ID' to 'SUB_TYPE_I'
Warning 6: Normalized/laundered field name: 'SYMBOL_ORIENTATION' to 
'SYMBOL_ORI'
Warning 6: Normalized/laundered field name: 'EST_REVISION_DATE' to 
'EST_REVISI'
Warning 6: Normalized/laundered field name: 'FEATURE_RELIABILITY_DATE' 
to 'FEATURE_RE'
Warning 6: Normalized/laundered field name: 'ATTR_RELIABILITY_DATE' to 
'ATTR_RELIA'
Warning 6: Normalized/laundered field name: 'CAPTURE_SOURCE_TYPE_ID' to 
'CAPTURE_SO'
Warning 6: Normalized/laundered field name: 'CAPTURE_METHOD_ID' to 
'CAPTURE_ME'
Warning 6: Normalized/laundered field name: 'SOURCE_DESCRIPTION' to 
'SOURCE_DES'
Warning 6: Normalized/laundered field name: 'SOURCE_CURRENCY' to 
'SOURCE_CUR'
Warning 6: Normalized/laundered field name: 'SOURCE_ACCURACY' to 
'SOURCE_ACC'
Warning 6: Normalized/laundered field name: 'ENTITY_NAME' to 'ENTITY_NAM'
Warning 6: Normalized/laundered field name: 'GEOMETRY_TYPE' to 'GEOMETRY_T'
Warning 6: Normalized/laundered field name: 'OLD_GDO_GID' to 'OLD_GDO_GI'
Warning 6: Normalized/laundered field name: 'WHEN_UPDATED' to 'WHEN_UPDAT'
Warning 6: Normalized/laundered field name: 'LOCKED_FLAG' to 'LOCKED_FLA'
Warning 6: Normalized/laundered field name: 'AUD_LAST_USER' to 'AUD_LAST_U'
Warning 6: Normalized/laundered field name: 'AUD_LAST_DATE' to 'AUD_LAST_D'
Warning 6: Normalized/laundered field name: 'REFERENCE_50' to 'REFERENCE_'
Warning 6: Normalized/laundered field name: 'REFERENCE_10' to 'REFERENC_1'
Warning 6: Normalized/laundered field name: 'LTT_FEATURE_ID' to 'LTT_FEATUR'
Warning 6: Normalized/laundered field name: 'LTT_CURRENT_REVSET_ID' to 
'LTT_CURREN'
ERROR 1: Attempt to write non-point (POLYGON) geometry to point shapefile.
ERROR 1: Terminating translation prematurely after failed
translation of layer CULT_PUBLIC (use -skipfailures to skip errors)

> All the best
>
> Sig
>
>
> Il giorno ven, 29/04/2011 alle 14.25 +0200, Zoltan Szecsei ha scritto:
>    
>> Hi All,
>> I am trying to convert a bunch of MapInfo MID-MIF files to MapInfo TAB
>> files, because GeoMedia 6.1 will not "connect" to MIDMIF files.
>> Using this script on Ubuntu 10.04, ogr2ogr from GDAL 1.8.0, released
>> 2011/01/12
>>
>>
>>
>> for m in `ls *.mif` ; do n=`echo $m | awk -F . ' { print $1".tab" } ' `
>> ; echo "******************** Starting $m" ; ogr2ogr -F "MapInfo File" $n
>> $m ; done
>>
>> (Basically: ogr2ogr -F "MapInfo File" boundaries.tab boundaries.mif )
>>
>>
>>
>>
>> When I load the resulting .TAB, .ID, .MAP and .DAT files into GeoMedia,
>> I get coarse boxes and diagonal lines, albeit in the correct LatLong region.
>>
>> When I use a very old "imutgui" from an old MapInfo to convert the same
>> MID MIFs to SHAPE, I can (correctly) load the SHAPEs into GeoMedia.
>>
>> I cannot use the SHAPEfile route as the field names are truncated when
>> converting from MIDMIF to SHAPE.
>>
>>
>> Any idea why the TAB route messes up the geometries?
>>
>> TIA,
>> Zoltan
>>
>>      
>    


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1209 / Virus Database: 1500/3603 - Release Date: 04/28/11

From warmerdam at pobox.com  Fri Apr 29 10:03:59 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 29 10:04:02 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
In-Reply-To: <4DBAAE42.2060500@geograph.co.za>
References: <4DBAAE42.2060500@geograph.co.za>
Message-ID: <4DBAC54F.9070606@pobox.com>

On 11-04-29 08:25 AM, Zoltan Szecsei wrote:
> Hi All,
> I am trying to convert a bunch of MapInfo MID-MIF files to MapInfo TAB files,
> because GeoMedia 6.1 will not "connect" to MIDMIF files.
> Using this script on Ubuntu 10.04, ogr2ogr from GDAL 1.8.0, released 2011/01/12
>
>
>
> for m in `ls *.mif` ; do n=`echo $m | awk -F . ' { print $1".tab" } ' ` ; echo
> "******************** Starting $m" ; ogr2ogr -F "MapInfo File" $n $m ; done
>
> (Basically: ogr2ogr -F "MapInfo File" boundaries.tab boundaries.mif )
>
>
>
>
> When I load the resulting .TAB, .ID, .MAP and .DAT files into GeoMedia, I get
> coarse boxes and diagonal lines, albeit in the correct LatLong region.
>
> When I use a very old "imutgui" from an old MapInfo to convert the same MID
> MIFs to SHAPE, I can (correctly) load the SHAPEs into GeoMedia.
>
> I cannot use the SHAPEfile route as the field names are truncated when
> converting from MIDMIF to SHAPE.
>
>
> Any idea why the TAB route messes up the geometries?

Zoltan,

As discussed in http://www.gdal.org/ogr/drv_mitab.html the driver needs to
set a bounds for coordinates which determines precision.  If it doesn't
know the coordinate system it won't know that the bounds should be small
(and hence the precision high) for latitudes and longitudes.   Try adding
-a_srs WGS84 to your ogr2ogr command to tell OGR that the coordinate system
is geographic.


eg.

ogr2ogr -f "MapInfo File" -a_srs WGS84 $n $m

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From zoltans at geograph.co.za  Fri Apr 29 10:27:31 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri Apr 29 10:45:50 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
In-Reply-To: <4DBAC54F.9070606@pobox.com>
References: <4DBAAE42.2060500@geograph.co.za> <4DBAC54F.9070606@pobox.com>
Message-ID: <4DBACAD3.5060905@geograph.co.za>

On 2011-04-29 16:03, Frank Warmerdam wrote:
> On 11-04-29 08:25 AM, Zoltan Szecsei wrote:
>> Any idea why the TAB route messes up the geometries?
>
> As discussed in http://www.gdal.org/ogr/drv_mitab.html the driver 
> needs to
> set a bounds for coordinates which determines precision.  If it doesn't
> know the coordinate system it won't know that the bounds should be small
> (and hence the precision high) for latitudes and longitudes.   Try adding
> -a_srs WGS84 to your ogr2ogr command to tell OGR that the coordinate 
> system
> is geographic.
>
>
> eg.
>
> ogr2ogr -f "MapInfo File" -a_srs WGS84 $n $m

Spot on, Frank - thank you. (it works as desired, now).
I'm not sure if anything is mentioned in the overview docs or help area, 
but perhaps that comment regarding assumed precision could be added 
somewhere obvious even to skip-readers like me?
[just to save you having to repeat yourself too often :-) ]


BTW - any idea why the organizePolygons() routine bellows?
Does it suggest an open polygon in my data-set, which then maybe engulfs 
the other polygons?
Presumably 3-point polygons are classified as errors because the first 
and last points are counted as "2" ?

Is there a way to get a coordinate or some debugging info to assist in 
finding the offending geometries?

Thanks & regards,
Zoltan


geograph@gs0:/mnt/geo_lvm0/gisdata/NGIQ04x/midmif_toNGI/20110428/q041_1/ogr$ 
./mif2tab
******************** Starting ADMN_GEONAMES.mif
******************** Starting CULT_BARRIERS.mif
******************** Starting CULT_EDUCATIONAL.mif
******************** Starting CULT_INDUSTRIAL.mif
******************** Starting CULT_PUBLIC.mif
******************** Starting CULT_RECREATIONAL.mif
******************** Starting CULT_UTILITIES.mif
******************** Starting GEOD_TRIG_STATIONS.mif
ERROR 6: Error during reading Record.
******************** Starting HYDR_AREAS.mif
******************** Starting HYDR_LINES.mif
******************** Starting HYDR_POINTS.mif
******************** Starting HYPS_ELEVATION_LINES.mif
******************** Starting HYPS_ELEVATION_POINTS.mif
******************** Starting LCLU_LANDCOVER.mif
Warning 1: organizePolygons() received an unexpected geometry.
Either a polygon with interior rings, or a polygon with less than 4 points,
or a non-Polygon geometry.  Return arguments as a collection.
Warning 1: Geometry of polygon cannot be translated to Simple Geometry. 
All polygons will be contained in a multipolygon.

Warning 1: organizePolygons() received an unexpected geometry.
Either a polygon with interior rings, or a polygon with less than 4 points,
or a non-Polygon geometry.  Return arguments as a collection.
Warning 1: Geometry of polygon cannot be translated to Simple Geometry. 
All polygons will be contained in a multipolygon.

******************** Starting LCLU_LANDUSE.mif
Warning 1: organizePolygons() received an unexpected geometry.
Either a polygon with interior rings, or a polygon with less than 4 points,
or a non-Polygon geometry.  Return arguments as a collection.
Warning 1: Geometry of polygon cannot be translated to Simple Geometry. 
All polygons will be contained in a multipolygon.

Warning 1: organizePolygons() received an unexpected geometry.
Either a polygon with interior rings, or a polygon with less than 4 points,
or a non-Polygon geometry.  Return arguments as a collection.
Warning 1: Geometry of polygon cannot be translated to Simple Geometry. 
All polygons will be contained in a multipolygon.

******************** Starting PHYS_LANDFORM_ARTIFIC.mif
******************** Starting PHYS_LANDFORM_NATURAL.mif
******************** Starting q041_new_ADMN_BOUNDARIES_AREA.mif
******************** Starting TRAN_CROSSINGS.mif
******************** Starting TRAN_FACILITIES.mif
******************** Starting TRAN_RAILWAY_LINES.mif
******************** Starting TRAN_ROADS.mif
geograph@gs0:/mnt/geo_lvm0/gisdata/NGIQ04x/midmif_toNGI/20110428/q041_1/ogr$ 


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1209 / Virus Database: 1500/3603 - Release Date: 04/28/11

From warmerdam at pobox.com  Fri Apr 29 10:59:21 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 29 10:59:28 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
In-Reply-To: <4DBACAD3.5060905@geograph.co.za>
References: <4DBAAE42.2060500@geograph.co.za> <4DBAC54F.9070606@pobox.com>
	<4DBACAD3.5060905@geograph.co.za>
Message-ID: <4DBAD249.1070801@pobox.com>

On 11-04-29 10:27 AM, Zoltan Szecsei wrote:
> Spot on, Frank - thank you. (it works as desired, now).
> I'm not sure if anything is mentioned in the overview docs or help area, but
> perhaps that comment regarding assumed precision could be added somewhere
> obvious even to skip-readers like me?
> [just to save you having to repeat yourself too often :-) ]

Zoltan,

The issue is discussed in the user docs for the MapInfo driver.
The problem is TAB format specific so it doesn't belong anywhere
more general IMHO.

> BTW - any idea why the organizePolygons() routine bellows?
> Does it suggest an open polygon in my data-set, which then maybe engulfs the
> other polygons?
> Presumably 3-point polygons are classified as errors because the first and last
> points are counted as "2" ?
>
> Is there a way to get a coordinate or some debugging info to assist in finding
> the offending geometries?
...
> ******************** Starting LCLU_LANDCOVER.mif
> Warning 1: organizePolygons() received an unexpected geometry.
> Either a polygon with interior rings, or a polygon with less than 4 points,
> or a non-Polygon geometry. Return arguments as a collection.
> Warning 1: Geometry of polygon cannot be translated to Simple Geometry. All
> polygons will be contained in a multipolygon.
>
> Warning 1: organizePolygons() received an unexpected geometry.
> Either a polygon with interior rings, or a polygon with less than 4 points,
> or a non-Polygon geometry. Return arguments as a collection.
> Warning 1: Geometry of polygon cannot be translated to Simple Geometry. All
> polygons will be contained in a multipolygon.
>

It is not immediately obvious why there are problems.  If the files are
small you might inspect the geometries with ogrinfo to see if there are
some odd ones.  Adding "--debug on" to the commandline of ogr2ogr may
give some useful details on the translation failure.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sigfrido at tiscali.it  Fri Apr 29 12:33:09 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri Apr 29 12:39:50 2011
Subject: [gdal-dev] ogr2ogr midmif to tab format conversion
In-Reply-To: <4DBAC54F.9070606@pobox.com>
References: <4DBAAE42.2060500@geograph.co.za>  <4DBAC54F.9070606@pobox.com>
Message-ID: <1304094789.2437.40.camel@GOLEM>

Hi all,

Zoltan sent me a couple of MIF files. The problem is that the Coordinate
System declaration in the MIF file is wrong, because it says it's
unreferenced cartesian with units=meters, while the coordinates are in
decimal degrees (probably WGS84). When the coordsys declaration is
corrected in the mif file, ogr2ogr converts it perfectly; otherwise, the
-a_srs option can be successfully used to override the bad SRS
declaration.

Cheers

Sig



Il giorno ven, 29/04/2011 alle 10.03 -0400, Frank Warmerdam ha scritto:

> Zoltan,
> 
> As discussed in http://www.gdal.org/ogr/drv_mitab.html the driver needs to
> set a bounds for coordinates which determines precision.  If it doesn't
> know the coordinate system it won't know that the bounds should be small
> (and hence the precision high) for latitudes and longitudes.   Try adding
> -a_srs WGS84 to your ogr2ogr command to tell OGR that the coordinate system
> is geographic.
> 
> 
> eg.
> 
> ogr2ogr -f "MapInfo File" -a_srs WGS84 $n $m
> 
> Best regards,

From roland.duhaime at gmail.com  Fri Apr 29 14:27:39 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Fri Apr 29 14:27:41 2011
Subject: [gdal-dev] Gdal_Translate KMLSUPEROVERLAY
Message-ID: <BANLkTikp-NbsnnxPp1EifmqWXaAZQh_DGg@mail.gmail.com>

I need to change the drawOrder of the KMZ files that are created using
GDAL_Translate -of KMLSUPEROVERLAY...  I have been looking at the source
code of "kmlsuperoverlaydataset.cpp" and noticed that the draw order appears
to be tied to the variable "zoom."  Does anyone know if I have control over
drawOrder value using the gdal_translate "-co" options?

    VSIFPrintfL(fp, "\t\t\t<drawOrder>%d</drawOrder>\n", zoom);

Thanks,
Roland
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110429/4091bea4/attachment.html
From greenberg at ucdavis.edu  Sat Apr 30 11:34:28 2011
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Sat Apr 30 11:34:31 2011
Subject: [gdal-dev] gdalbuildvrt, gdal_translate, and MODIS HDF files
Message-ID: <BANLkTimCw48aypw8M0duaDWwM21Hxa_S2g@mail.gmail.com>

GDALers:

I have recently come across the mosaicking magic that is 1) build a vrt usin
gdalbuildvrt and then 2) gdal_translate the vrt to whatever format I want --
I'm noticing this is a crazy-fast way to do mosaicking compared to some
other techniques.  My current issue is that I have a set of MODIS HDF4
files, and I'd like (if possible) to repeat this process, using a specific
layer in the HDF to be mosaicked.  What is the trick to doing this?  As far
as I know, all the tiles have the same subdataset name.  I suppose I can
gdal_translate each tile first, then build the vrt, then re-export the vrt,
but I wanted to know if there was a faster way to do this (e.g. skipping the
initial gdal_translate)?

Here's the gdalinfo dump of one of the tiles.  I'm interested in mosaicking
the HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:Lai_1km
subdataset layer:

###: gdalinfo MCD15A2.A2002185.h14v10.005.2007172042412.
hdfDriver: HDF4/Hierarchical Data Format Release 4
Files: MCD15A2.A2002185.h14v10.005.2007172042412.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  LOCALGRANULEID=MCD15A2.A2002185.h14v10.005.2007172042412.hdf
  PRODUCTIONDATETIME=2007-06-21T04:24:12.000Z
  DAYNIGHTFLAG=Day
  REPROCESSINGACTUAL=reprocessed
  LOCALVERSIONID=5.0.4
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=No automatic quality assessment is
performed in the PGE
  AUTOMATICQUALITYFLAG=Passed
  SCIENCEQUALITYFLAGEXPLANATION=See
http://landweb.nascom/nasa.gov/cgi-bin/QA_WWW/qaFlagPage.cgi?sat=aqua the
product Science Quality status.
  QAPERCENTMISSINGDATA=73
  QAPERCENTOUTOFBOUNDSDATA=73
  QAPERCENTCLOUDCOVER=0
  QAPERCENTINTERPOLATEDDATA=0
  PARAMETERNAME=MCD15A2
  VERSIONID=5
  SHORTNAME=MCD15A2
  INPUTPOINTER=MYD15A1.A2002192.h14v10.005.2007162224424.hdf,
MYD15A1.A2002191.h14v10.005.2007162021523.hdf,
MYD15A1.A2002190.h14v10.005.2007162064621.hdf,
MYD15A1.A2002189.h14v10.005.2007161180206.hdf,
MYD15A1.A2002188.h14v10.005.2007161104011.hdf,
MYD15A1.A2002187.h14v10.005.2007161081610.hdf,
MYD15A1.A2002186.h14v10.005.2007161021530.hdf,
MYD15A1.A2002185.h14v10.005.2007161135159.hdf,
MOD15A1.A2002192.h14v10.005.2007163004523.hdf,
MOD15A1.A2002191.h14v10.005.2007162203231.hdf,
MOD15A1.A2002190.h14v10.005.2007162172200.hdf,
MOD15A1.A2002189.h14v10.005.2007161191040.hdf,
MOD15A1.A2002188.h14v10.005.2007161154154.hdf,
MOD15A1.A2002187.h14v10.005.2007160165004.hdf,
MOD15A1.A2002186.h14v10.005.2007152173622.hdf,
MOD15A1.A2002185.h14v10.005.2007152013424.hdf, MCD15A2_ANC_RI4.hdf
  GRINGPOINTLONGITUDE=-42.5671108947282, -40.6221556245858,
-30.3392715091937, -31.788282014663
  GRINGPOINTLATITUDE=-19.9999999982039, -9.95544626171464,
-9.96538589070632, -20.0096690902906
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2002-07-11
  RANGEENDINGTIME=23:59:59
  RANGEBEGINNINGDATE=2002-07-04
  RANGEBEGINNINGTIME=00:00:00
  PGEVERSION=5.0.6
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Aqua
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  QAPERCENTGOODQUALITY=100
  QAPERCENTOTHERQUALITY=100
  HORIZONTALTILENUMBER=14
  VERTICALTILENUMBER=10
  TileID=51014010
  NDAYS_COMPOSITED=16
  QAPERCENTGOODFPAR=100
  QAPERCENTGOODLAI=100
  QAPERCENTMAINMETHOD=100
  QAPERCENTEMPIRICALMODEL=0
  NORTHBOUNDINGCOORDINATE=-9.99999999910197
  SOUTHBOUNDINGCOORDINATE=-19.9999999982039
  EASTBOUNDINGCOORDINATE=-30.4543364653209
  WESTBOUNDINGCOORDINATE=-42.5671108947282
  ALGORITHMPACKAGEACCEPTANCEDATE=10-01-2004
  ALGORITHMPACKAGEMATURITYCODE=Normal
  ALGORITHMPACKAGENAME=MCDPR_15A2
  ALGORITHMPACKAGEVERSION=5
  GEOANYABNORMAL=False
  GEOESTMAXRMSERROR=50.0
  LONGNAME=MODIS/Terra+Aqua Leaf Area Index/FPAR 8-Day L4 Global 1km SIN
Grid
  PROCESSINGCENTER=MODAPS
  SYSTEMFILENAME=MYD15A1.A2002192.h14v10.005.2007162224424.hdf,
MYD15A1.A2002191.h14v10.005.2007162021523.hdf,
MYD15A1.A2002190.h14v10.005.2007162064621.hdf,
MYD15A1.A2002189.h14v10.005.2007161180206.hdf,
MYD15A1.A2002188.h14v10.005.2007161104011.hdf,
MYD15A1.A2002187.h14v10.005.2007161081610.hdf,
MYD15A1.A2002186.h14v10.005.2007161021530.hdf,
MYD15A1.A2002185.h14v10.005.2007161135159.hdf,
MOD15A1.A2002192.h14v10.005.2007163004523.hdf,
MOD15A1.A2002191.h14v10.005.2007162203231.hdf,
MOD15A1.A2002190.h14v10.005.2007162172200.hdf,
MOD15A1.A2002189.h14v10.005.2007161191040.hdf,
MOD15A1.A2002188.h14v10.005.2007161154154.hdf,
MOD15A1.A2002187.h14v10.005.2007160165004.hdf,
MOD15A1.A2002186.h14v10.005.2007152173622.hdf,
MOD15A1.A2002185.h14v10.005.2007152013424.hdf
  NUMBEROFGRANULES=1
  GRANULEDAYNIGHTFLAG=Day
  GRANULEBEGINNINGDATETIME=2007-06-01T01:34:24.000Z
  GRANULEENDINGDATETIME=2007-06-01T01:34:24.000Z
  CHARACTERISTICBINANGULARSIZE=30.0
  CHARACTERISTICBINSIZE=926.625433055556
  DATACOLUMNS=1200
  DATAROWS=1200
  GLOBALGRIDCOLUMNS=43200
  GLOBALGRIDROWS=21600
  NADIRDATARESOLUTION=1km
  MAXIMUMOBSERVATIONS=1
  SPSOPARAMETERS=5367, 2680
  PROCESSINGENVIRONMENT=IRIX64 mtvs3 6.5 10070055 IP35
  DESCRREVISION=5.0
  ENGINEERING_DATA=
# MOD_PR15A2 (Vers 5.0.4 Rele 10.18.2006 23:59)
# MUM API Vers 2.5.8 Rev 104 Rel. 11.15.2000 10:49 (pgs)
# (c) 2000 J.M. Glassy, NTSG,LLSD
# portions of MUM API by Petr Votava,NTSG Lab,U.Montana
# HOST ECS_PGS_VirtualHost PROCESS 19540618
# PLATFORM Sys genericunix Vers unknown Release unknown Node (no nodename
available)
# INIT-TIME Thu Jun 21 00:20:57 2007

YEARDAY 185 COMPOSITE_PERIOD  24 FIRSTDAY_IN_PERIOD 185
SDS[PGE34_ISG_MBRLUT] ID 268697600 Rank   2 (664 120)
SDS[PGE34_OUTFIELD_PROP] ID 268697601 Rank   2 (78 179)
SDS[PGE34_BROWSEFIELD_PROP] ID 268697602 Rank   2 (77 164)
READANC SDS[PGE34_ISG_MBRLUT] RANK 2 (664 120)
READANC SDS[PGE34_OUTFIELD_PROP] RANK 2 (78 179)
READANC SDS[PGE34_BROWSEFIELD_PROP] RANK 2 (77 164)
READANC SDS[PGE34_ECSMETA_DICT] RANK 2 (73 110)
READANC SDS[PGE34_RELEASE_NOTES] RANK 2 (84 98)
FLDPROP SDSnam(PGE34_OUTFIELD_PROP)MoleName(PGE34_OUTFIELD_PROP)Status 3
Nelem 13962
BROWSE cvlBrwMol 0 Nelem 57600 Type 21 Status 3
BROWSE cvlBrwMol 1 Nelem 57600 Type 21 Status 3
BROWSE cvlBrwMol 2 Nelem 57600 Type 21 Status 3
BROWSE cvlBrwMol 3 Nelem 57600 Type 21 Status 3
BROWSE: NEW GRID ID 4194320
BROWSEFIELD  0 Sum 11624775 Average 201.819
BROWSEFIELD  1 Sum 10990909 Average 190.814
BROWSEFIELD  2 Sum 6674796 Average 115.882
BROWSEFIELD  3 Sum 12968582 Average 225.149
BROWSE-DONE: N-Pixels 57600 Invalid offsets: 0 OutOfRange 0

COMPOSITING FPAR FREQUENCIES
FPAR   1        1
FPAR   2        2
FPAR   3        8
FPAR   5        4
FPAR   6       43
FPAR   7       55
FPAR   8       17
FPAR   9        9
FPAR  10       16
FPAR  11       14
FPAR  12       28
FPAR  13       61
FPAR  14       93
FPAR  15      114
FPAR  16      170
FPAR  17      375
FPAR  18      366
FPAR  19      184
FPAR  20      621
FPAR  21     1153
FPAR  22     1289
FPAR  23     2079
FPAR  24     1463
FPAR  25     1750
FPAR  26     1965
FPAR  27     1348
FPAR  28     2267
FPAR  29     1767
FPAR  30     1574
FPAR  31     1694
FPAR  32     2034
FPAR  33     3242
FPAR  34     2321
FPAR  35     3852
FPAR  36     5306
FPAR  37     3021
FPAR  38     3375
FPAR  39     3638
FPAR  40     3515
FPAR  41     4767
FPAR  42     5222
FPAR  43     5311
FPAR  44     4328
FPAR  45     7095
FPAR  46     8477
FPAR  47     6921
FPAR  48     6735
FPAR  49     7156
FPAR  50     7538
FPAR  51     7987
FPAR  52     7312
FPAR  53     8821
FPAR  54     9578
FPAR  55     7597
FPAR  56     7286
FPAR  57     7807
FPAR  58     9353
FPAR  59    10033
FPAR  60    10641
FPAR  61     7511
FPAR  62     6059
FPAR  63     6827
FPAR  64     8920
FPAR  65     8734
FPAR  66     9089
FPAR  67     7182
FPAR  68     7034
FPAR  69     6825
FPAR  70     6537
FPAR  71     7120
FPAR  72     6787
FPAR  73     5149
FPAR  74     3936
FPAR  75     4889
FPAR  76     4595
FPAR  77     3668
FPAR  78     3217
FPAR  79     2873
FPAR  80     2761
FPAR  81     1903
FPAR  82     2136
FPAR  83     1844
FPAR  84     1890
FPAR  85     2402
FPAR  86     2431
FPAR  87     3272
FPAR  88     6673
FPAR  89    17104
FPAR  90    22741
FPAR  91     3463
FPAR  92      281
FPAR  93      289
FPAR  94      265
FPAR  95      129
FPAR  96      199
FPAR  97       34
FPAR  98        8
FPAR  99        6
FPAR 100        1

COMPOSITING LAI FREQUENCIES
LAI    0        5
LAI    1      126
LAI    2      223
LAI    3     3792
LAI    4     3701
LAI    5     8619
LAI    6    15817
LAI    7    17725
LAI    8    15205
LAI    9    14949
LAI   10    21129
LAI   11    17474
LAI   12    20907
LAI   13    16603
LAI   14    19435
LAI   15    16694
LAI   16    22393
LAI   17    11756
LAI   18    13977
LAI   19    15366
LAI   20    10954
LAI   21    12089
LAI   22    10016
LAI   23     6847
LAI   24     6915
LAI   25     5407
LAI   26     3744
LAI   27     3839
LAI   28     2933
LAI   29     1831
LAI   30     1874
LAI   31     1544
LAI   32     1186
LAI   33      983
LAI   34      954
LAI   35      801
LAI   36      636
LAI   37      647
LAI   38      716
LAI   39      734
LAI   40      857
LAI   41      883
LAI   42      721
LAI   43      671
LAI   44      621
LAI   45      702
LAI   46      675
LAI   47      583
LAI   48      836
LAI   49     1586
LAI   50     1400
LAI   51     1691
LAI   52     1138
LAI   53     2045
LAI   54     2664
LAI   55     3030
LAI   56     5066
LAI   57     4948
LAI   58     3758
LAI   59     3402
LAI   60    11126
LAI   61     1281
LAI   62     1050
LAI   63      994
LAI   64     1179
LAI   65      290
LAI   66      501
LAI   67     2130
LAI   68      323
LAI   69      885
LAI   70        1

COMPOSITING DAY INDEX FREQUENCIES
TILE-INDEX    0 Selection Frequency:    33506
TILE-INDEX    1 Selection Frequency:    27444
TILE-INDEX    2 Selection Frequency:    28516
TILE-INDEX    3 Selection Frequency:    44464
TILE-INDEX    4 Selection Frequency:    85306
TILE-INDEX    5 Selection Frequency:    10838
TILE-INDEX    6 Selection Frequency:     9263
TILE-INDEX    7 Selection Frequency:    11868
TILE-INDEX    8 Selection Frequency:     8091
TILE-INDEX    9 Selection Frequency:    28505
TILE-INDEX   10 Selection Frequency:    46391
TILE-INDEX   11 Selection Frequency:    34697
TILE-INDEX   12 Selection Frequency:    11913
TILE-INDEX   13 Selection Frequency:     6210
TILE-INDEX   14 Selection Frequency:      551
TILE-INDEX   15 Selection Frequency:       20

LOCALGRANULEID [MCD15A2.A2002185.h14v10.005.2007172042412.hdf]
ECS QC PERCENT N valid (demominator) : 387583.000000
ECS Total Pixels       (denominator) : 1440000

QAPERCENTxx PSA BEFORE CALC
QAPERCENTINTERPOLATEDDATA: 0
QAPERCENTMISSINGDATA     : 1052417
QAPERCENTOUTOFBOUNDSDATA : 1052417
QAPERCENTCLOUDCOVER      : 4371
QAPERCENTNOTPRODUCEDCLOUD: 0
QAPERCENTNOTPRODUCEDOTHER: 0
QAPERCENTGOODQUALITY     : 386463
QAPERCENTOTHERQUALITY    : 1053537
QAPERCENTGOODFPAR        : 386463
QAPERCENTGOODLAI         : 386463
QAPERCENTMAINMETHOD      : 386463
QAPERCENTEMPIRICALMODEL  : 1120
QAPERCENTNDAYSCOMPOSITED : 16
QAPERCENTTERRA           : 250364


QAPERCENTxx PSA AFTER CALC
QAPERCENTINTERPOLATEDDATA: 0
QAPERCENTMISSINGDATA     : 73
QAPERCENTOUTOFBOUNDSDATA : 73
QAPERCENTCLOUDCOVER      : 0
QAPERCENTNOTPRODUCEDCLOUD: 0
QAPERCENTNOTPRODUCEDOTHER: 0
QAPERCENTGOODQUALITY     : 100
QAPERCENTOTHERQUALITY    : 100
QAPERCENTGOODFPAR        : 100
QAPERCENTGOODLAI         : 100
QAPERCENTMAINMETHOD      : 100
QAPERCENTEMPIRICALMODEL  : 0
QAPERCENTNDAYSCOMPOSITED : 16


SESSION ENGINEERING SUMMARY FOR PGE34 8-day FPAR,LAI
UM_VERSION U.MONTANA MODIS PGE34 Vers 5.0.4 Rev 4 Release 10.18.2006 23:59
Candidate Days: 16

N. invalid loads      : 0
Pixels failing best day : 1052417
Pixels set to fill      : 0
Pixels skipped (disqual): 17304768
Unclassified Pixels     : 1052417
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002185.h14v10.005.2007152013424.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002186.h14v10.005.2007152173622.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002187.h14v10.005.2007160165004.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002188.h14v10.005.2007161154154.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002189.h14v10.005.2007161191040.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002190.h14v10.005.2007162172200.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002191.h14v10.005.2007162203231.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MOD15A1.A2002192.h14v10.005.2007163004523.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002185.h14v10.005.2007161135159.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002186.h14v10.005.2007161021530.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002187.h14v10.005.2007161081610.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002188.h14v10.005.2007161104011.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002189.h14v10.005.2007161180206.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002190.h14v10.005.2007162064621.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002191.h14v10.005.2007162021523.hdf
MOD15A1 DAILY Input:
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MYD15A1.A2002192.h14v10.005.2007162224424.hdf

PGE34 Output       :
/MODAPSops3/archive/f29/running/AMPM_L10/16119717/MCD15A2.1.2002-185T00:00:00.000000Z.51014010.18515503.215230_1.hdf
MOD15A2 ANCILLARY    : /MODAPSops3/PGE/AMPM/coeff/PGE34/MCD15A2_ANC_RI4.hdf

QAPERCENTxx PSA AFTER CALC
QAPERCENTINTERPOLATEDDATA: 0
QAPERCENTMISSINGDATA     : 73
QAPERCENTOUTOFBOUNDSDATA : 73
QAPERCENTCLOUDCOVER      : 0
QAPERCENTTERRA          : 65
QAPERCENTGOODQUALITY     : 100
QAPERCENTOTHERQUALITY    : 100
QAPERCENTGOODFPAR        : 100
QAPERCENTGOODLAI         : 100
QAPERCENTMAINMETHOD      : 100
QAPERCENTEMPIRICALMODEL  : 0
QAPERCENTNDAYSCOMPOSITED : 16


Started Thu Jun 21 00:20:57 2007  Ended Thu Jun 21 00:24:12 2007
Elapsed Time         195 Sec (       3.25 Min)
  MOD15A2_FILLVALUE_DOC=MOD15A2 FILL VALUE LEGEND
255 = _Fillvalue, assigned when:
    * the MODAGAGG suf. reflectance for channel VIS, NIR was assigned its
_Fillvalue, or
    * land cover pixel itself was assigned _Fillvalus 255 or 254.
254 = land cover assigned as perennial salt or inland fresh water.
253 = land cover assigned as barren, sparse vegetation (rock, tundra,
desert.)
252 = land cover assigned as perennial snow, ice.
251 = land cover assigned as "permanent" wetlands/inundated marshlands.
250 = land cover assigned as urban/built-up.
249 = land cover assigned as "unclassified" or not able to determine.

  MOD15A2_FparLai_QC_DOC=
FparLai_QC 5 BITFIELDS IN 8 BITWORD
MODLAND_QC START 0 END 0 VALIDS 2
MODLAND_QC   0 = Good Quality (main algorithm with or without saturation)
MODLAND_QC   1 = Other Quality (back-up algorithm or fill value)
SENSOR START 1 END 1 VALIDS 2
SENSOR       0  = Terra
SENSOR       1  = Aqua
DEADDETECTOR START 2 END 2 VALIDS 2
DEADDETECTOR 0 = Detectors apparently fine for up to 50% of channels 1,2
DEADDETECTOR 1 = Dead detectors caused >50% adjacent detector retrieval
CLOUDSTATE START 3 END 4 VALIDS 4 (this inherited from Aggregate_QC bits
{0,1} cloud state)
CLOUDSTATE   00 = 0 Significant clouds NOT present (clear)
CLOUDSTATE   01 = 1 Significant clouds WERE present
CLOUDSTATE   10 = 2 Mixed cloud present on pixel
CLOUDSTATE   11 = 3 Cloud state not defined,assumed clear
SCF_QC START 5 END 7 VALIDS 5
SCF_QC       000=0 Main (RT) algorithm used, best result possible (no
saturation)
SCF_QC       001=1 Main (RT) algorithm used, saturation occured. Good, very
usable.
SCF_QC       010=2 Main algorithm failed due to bad geometry, empirical
algorithm used
SCF_QC       011=3 Main algorithm faild due to problems other than geometry,
empirical algorithm used
SCF_QC       100=4 Pixel not produced at all, value coudn't be retrieved
(possible reasons: bad L1B data, unusable MODAGAGG data)

  MOD15A2_FparExtra_QC_DOC=
FparExtra_QC 6 BITFIELDS IN 8 BITWORD
LANDSEA PASS-THROUGH START 0 END 1 VALIDS 4
LANDSEA   00 = 0 LAND       AggrQC(3,5)values{001}
LANDSEA   01 = 1 SHORE      AggrQC(3,5)values{000,010,100}
LANDSEA   10 = 2 FRESHWATER AggrQC(3,5)values{011,101}
LANDSEA   11 = 3 OCEAN      AggrQC(3,5)values{110,111}
SNOW_ICE (from Aggregate_QC bits) START 2 END 2 VALIDS 2
SNOW_ICE  0 = No snow/ice detected
SNOW_ICE  1 = Snow/ice were detected
AEROSOL START 3 END 3 VALIDS 2
AEROSOL   0 = No or low atmospheric aerosol levels detected
AEROSOL   1 = Average or high aerosol levels detected
CIRRUS (from Aggregate_QC bits {8,9} ) START 4 END 4 VALIDS 2
CIRRUS    0 = No cirrus detected
CIRRUS    1 = Cirrus was detected
INTERNAL_CLOUD_MASK START 5 END 5 VALIDS 2
INTERNAL_CLOUD_MASK 0 = No clouds
INTERNAL_CLOUD_MASK 1 = Clouds were detected
CLOUD_SHADOW START 6 END 6 VALIDS 2
CLOUD_SHADOW        0 = No cloud shadow detected
CLOUD_SHADOW        1 = Cloud shadow detected
SCF_BIOME_MASK START 7 END 7 VALIDS 2
SCF_BIOME_MASK  0 = Biome outside interval <1,4>
SCF_BIOME_MASK  1 = Biome in interval <1,4>

  MOD15A2_StdDev_QC_DOC=MOD15A2 STANDARD DEVIATION FILL VALUE LEGEND
255 = _Fillvalue, assigned when:
    * the MODAGAGG suf. reflectance for channel VIS, NIR was assigned its
_Fillvalue, or
    * land cover pixel itself was assigned _Fillvalus 255 or 254.
254 = land cover assigned as perennial salt or inland fresh water.
253 = land cover assigned as barren, sparse vegetation (rock, tundra,
desert.)
252 = land cover assigned as perennial snow, ice.
251 = land cover assigned as "permanent" wetlands/inundated marshlands.
250 = land cover assigned as urban/built-up.
249 = land cover assigned as "unclassified" or not able to determine.
248 = no standard deviation available, pixel produced using backup method.

  MOD15A1_ANC_BUILD_CERT=mtAncUtil v. 1.8 Rel. 09.11.2000 17:36 API v. 2.5.6
release 09.14.2000 16:33 Rev.Index 102 (J.Glassy)

  UM_VERSION=U.MONTANA MODIS PGE34 Vers 5.0.4 Rev 4 Release 10.18.2006 23:59
Subdatasets:

SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:Fpar_1km
  SUBDATASET_1_DESC=[1200x1200] Fpar_1km MOD_Grid_MOD15A2 (8-bit unsigned
integer)

SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:Lai_1km
  SUBDATASET_2_DESC=[1200x1200] Lai_1km MOD_Grid_MOD15A2 (8-bit unsigned
integer)

SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:FparLai_QC
  SUBDATASET_3_DESC=[1200x1200] FparLai_QC MOD_Grid_MOD15A2 (8-bit unsigned
integer)

SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:FparExtra_QC
  SUBDATASET_4_DESC=[1200x1200] FparExtra_QC MOD_Grid_MOD15A2 (8-bit
unsigned integer)

SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:FparStdDev_1km
  SUBDATASET_5_DESC=[1200x1200] FparStdDev_1km MOD_Grid_MOD15A2 (8-bit
unsigned integer)

SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid_MOD15A2:LaiStdDev_1km
  SUBDATASET_6_DESC=[1200x1200] LaiStdDev_1km MOD_Grid_MOD15A2 (8-bit
unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


-- 
Jonathan A. Greenberg, PhD
Assistant Project Scientist
Center for Spatial Technologies and Remote Sensing (CSTARS)
Department of Land, Air and Water Resources
University of California, Davis
One Shields Avenue
Davis, CA 95616
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110430/9c0cb7e8/attachment-0001.html
From even.rouault at mines-paris.org  Sat Apr 30 14:26:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 30 14:26:16 2011
Subject: [gdal-dev] gdalbuildvrt, gdal_translate, and MODIS HDF files
In-Reply-To: <BANLkTimCw48aypw8M0duaDWwM21Hxa_S2g@mail.gmail.com>
References: <BANLkTimCw48aypw8M0duaDWwM21Hxa_S2g@mail.gmail.com>
Message-ID: <201104302026.12727.even.rouault@mines-paris.org>

Le samedi 30 avril 2011 17:34:28, Jonathan Greenberg a ?crit :
> GDALers:
> 
> I have recently come across the mosaicking magic that is 1) build a vrt
> usin gdalbuildvrt and then 2) gdal_translate the vrt to whatever format I
> want -- I'm noticing this is a crazy-fast way to do mosaicking compared to
> some other techniques.  My current issue is that I have a set of MODIS
> HDF4 files, and I'd like (if possible) to repeat this process, using a
> specific layer in the HDF to be mosaicked.  What is the trick to doing
> this?  As far as I know, all the tiles have the same subdataset name.  I
> suppose I can gdal_translate each tile first, then build the vrt, then
> re-export the vrt, but I wanted to know if there was a faster way to do
> this (e.g. skipping the initial gdal_translate)?
> 
> Here's the gdalinfo dump of one of the tiles.  I'm interested in mosaicking
> the
> HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid
> _MOD15A2:Lai_1km subdataset layer:

You should be able to use directly the subdataset name as an input dataset 
name for gdalbuildvrt. No need for it to be a "real" filename.
From greenberg at ucdavis.edu  Sat Apr 30 17:01:18 2011
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Sat Apr 30 17:01:22 2011
Subject: [gdal-dev] gdalbuildvrt, gdal_translate, and MODIS HDF files
In-Reply-To: <201104302026.12727.even.rouault@mines-paris.org>
References: <BANLkTimCw48aypw8M0duaDWwM21Hxa_S2g@mail.gmail.com>
	<201104302026.12727.even.rouault@mines-paris.org>
Message-ID: <BANLkTi=3sZYnnWrP-1h5=ppYz0mL8=dVCA@mail.gmail.com>

Even:

Thanks: how would I "wildcard" this into a gdalbuildvrt?  The files all
follow the pattern MCD15A2.A2002185.h14v10.005*

--j

On Sat, Apr 30, 2011 at 11:26 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le samedi 30 avril 2011 17:34:28, Jonathan Greenberg a ?crit :
> > GDALers:
> >
> > I have recently come across the mosaicking magic that is 1) build a vrt
> > usin gdalbuildvrt and then 2) gdal_translate the vrt to whatever format I
> > want -- I'm noticing this is a crazy-fast way to do mosaicking compared
> to
> > some other techniques.  My current issue is that I have a set of MODIS
> > HDF4 files, and I'd like (if possible) to repeat this process, using a
> > specific layer in the HDF to be mosaicked.  What is the trick to doing
> > this?  As far as I know, all the tiles have the same subdataset name.  I
> > suppose I can gdal_translate each tile first, then build the vrt, then
> > re-export the vrt, but I wanted to know if there was a faster way to do
> > this (e.g. skipping the initial gdal_translate)?
> >
> > Here's the gdalinfo dump of one of the tiles.  I'm interested in
> mosaicking
> > the
> >
> HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Grid
> > _MOD15A2:Lai_1km subdataset layer:
>
> You should be able to use directly the subdataset name as an input dataset
> name for gdalbuildvrt. No need for it to be a "real" filename.
>



-- 
Jonathan A. Greenberg, PhD
Assistant Project Scientist
Center for Spatial Technologies and Remote Sensing (CSTARS)
Department of Land, Air and Water Resources
University of California, Davis
One Shields Avenue
Davis, CA 95616
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110430/dc5b9404/attachment.html
From even.rouault at mines-paris.org  Sat Apr 30 17:09:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 30 17:09:32 2011
Subject: [gdal-dev] gdalbuildvrt, gdal_translate, and MODIS HDF files
In-Reply-To: <BANLkTi=3sZYnnWrP-1h5=ppYz0mL8=dVCA@mail.gmail.com>
References: <BANLkTimCw48aypw8M0duaDWwM21Hxa_S2g@mail.gmail.com>
	<201104302026.12727.even.rouault@mines-paris.org>
	<BANLkTi=3sZYnnWrP-1h5=ppYz0mL8=dVCA@mail.gmail.com>
Message-ID: <201104302309.29049.even.rouault@mines-paris.org>

Le samedi 30 avril 2011 23:01:18, Jonathan Greenberg a ?crit :
> Even:
> 
> Thanks: how would I "wildcard" this into a gdalbuildvrt?  The files all
> follow the pattern MCD15A2.A2002185.h14v10.005*

On Linux, you could try :

for i in MCD15A2.A2002185.h14v10.005*; do echo HDF4_EOS:EOS_GRID:
\"$i\":MOD_Grid_MOD15A2:Lai_1km; done | xargs gdalbuildvrt mosaic.vrt

On Windows, I'm not sure how you would do that.

> 
> --j
> 
> On Sat, Apr 30, 2011 at 11:26 AM, Even Rouault
> <even.rouault@mines-paris.org
> 
> > wrote:
> > 
> > Le samedi 30 avril 2011 17:34:28, Jonathan Greenberg a ?crit :
> > > GDALers:
> > > 
> > > I have recently come across the mosaicking magic that is 1) build a vrt
> > > usin gdalbuildvrt and then 2) gdal_translate the vrt to whatever format
> > > I want -- I'm noticing this is a crazy-fast way to do mosaicking
> > > compared
> > 
> > to
> > 
> > > some other techniques.  My current issue is that I have a set of MODIS
> > > HDF4 files, and I'd like (if possible) to repeat this process, using a
> > > specific layer in the HDF to be mosaicked.  What is the trick to doing
> > > this?  As far as I know, all the tiles have the same subdataset name. 
> > > I suppose I can gdal_translate each tile first, then build the vrt,
> > > then re-export the vrt, but I wanted to know if there was a faster way
> > > to do this (e.g. skipping the initial gdal_translate)?
> > > 
> > > Here's the gdalinfo dump of one of the tiles.  I'm interested in
> > 
> > mosaicking
> > 
> > > the
> > 
> > HDF4_EOS:EOS_GRID:"MCD15A2.A2002185.h14v10.005.2007172042412.hdf":MOD_Gri
> > d
> > 
> > > _MOD15A2:Lai_1km subdataset layer:
> > You should be able to use directly the subdataset name as an input
> > dataset name for gdalbuildvrt. No need for it to be a "real" filename.
