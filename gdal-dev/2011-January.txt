From rajjad at gmail.com  Sat Jan  1 04:52:43 2011
From: rajjad at gmail.com (Imran Rajjad)
Date: Sat Jan  1 04:52:44 2011
Subject: [gdal-dev] help with gdaladdo overviews resolution
Message-ID: <AANLkTik=Dc4AA2ibmvN5jTYbhRKYAtOczk_dx0De2bSA@mail.gmail.com>

Hi list,

I`m trying to add overview to a geotiff files that is to be served
through geoserver's image mosaic plugin. I have generated overview of
the file but I`m not sure about what resoltuions to put in the
plugin's properties files.

this is my gdalinfo result of the file

D:\data\coverages>gdalinfo gt1.tif
Driver: GTiff/GeoTIFF
Files: gt1.tif
Size is 11765, 10031
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (74.288700237628234,31.564984425149991)
Pixel Size = (0.000002286186497,-0.000002286186497)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=ERDAS IMAGINE
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  74.2887002,  31.5649844)
Lower Left  (  74.2887002,  31.5420517)
Upper Right (  74.3155972,  31.5649844)
Lower Right (  74.3155972,  31.5420517)
Center      (  74.3021487,  31.5535181)
Band 1 Block=11765x1 Type=Byte, ColorInterp=Red
  Overviews: 5883x5016, 2942x2508, 1471x1254, 736x627
  Metadata:
    LAYER_TYPE=athematic
Band 2 Block=11765x1 Type=Byte, ColorInterp=Green
  Overviews: 5883x5016, 2942x2508, 1471x1254, 736x627
  Metadata:
    LAYER_TYPE=athematic
Band 3 Block=11765x1 Type=Byte, ColorInterp=Blue
  Overviews: 5883x5016, 2942x2508, 1471x1254, 736x627
  Metadata:
    LAYER_TYPE=athematic



previously this is how I added over views
D:\data\coverages>gdaladdo -r average gt1.tif 2 4 8 16


now I have to give a resolution for the imagic mosiac plugin for each
overview, is there anyway I can find the pixel resultion for each
overview.

regards,
Imran


-- 
I.R
From even.rouault at mines-paris.org  Sat Jan  1 05:47:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan  1 05:47:15 2011
Subject: [gdal-dev] Problem with gdal 1.8 -- segmentation fault on large
	image with gdaladdo
In-Reply-To: <AANLkTimC_yAw37mDbNQoBai1kck6vD0Nj6UTmexWzs7f@mail.gmail.com>
References: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
	<201012311738.31636.even.rouault@mines-paris.org>
	<AANLkTimC_yAw37mDbNQoBai1kck6vD0Nj6UTmexWzs7f@mail.gmail.com>
Message-ID: <1293878826.4d1f062ace912@webmail.free.fr>

>
> What's the new ceiling on image size for overview calculation?

The same as before hopefully. I'm not sure what the limit is. From a quick look
at the code, I'd say perhaps if the raster_width * 64 > 2 billion. This could be
probably overcomeby modifying the algorithm if it became a limit in real use
cases, but I'm not aware of someone having reported it up to here...

>
> Steve
>
>
>
> On Fri, Dec 31, 2010 at 11:38 AM, Even Rouault <even.rouault@mines-paris.org
> > wrote:
>
> > Stephen,
> >
> > this should be fixed now in SVN.
> >
> > This was indeed something wrong in a recent optimization in overview
> > computation. This could cause integer overflow, that was triggered when
> > dealing
> > with a dataset where width * height > 2 billion.
> >
> > Thanks for reporting !
> >
>


From even.rouault at mines-paris.org  Sat Jan  1 05:49:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan  1 05:49:48 2011
Subject: [gdal-dev] help with gdaladdo overviews resolution
In-Reply-To: <AANLkTik=Dc4AA2ibmvN5jTYbhRKYAtOczk_dx0De2bSA@mail.gmail.com>
References: <AANLkTik=Dc4AA2ibmvN5jTYbhRKYAtOczk_dx0De2bSA@mail.gmail.com>
Message-ID: <1293878979.4d1f06c307d15@webmail.free.fr>

Imran,

You'd probably get more helpful advice on the geoserver mailing list.

From rajjad at gmail.com  Sat Jan  1 06:54:49 2011
From: rajjad at gmail.com (Imran Rajjad)
Date: Sat Jan  1 06:54:51 2011
Subject: [gdal-dev] help with gdaladdo overviews resolution
In-Reply-To: <1293878979.4d1f06c307d15@webmail.free.fr>
References: <AANLkTik=Dc4AA2ibmvN5jTYbhRKYAtOczk_dx0De2bSA@mail.gmail.com>
	<1293878979.4d1f06c307d15@webmail.free.fr>
Message-ID: <AANLkTimam_50HNk06gLtHKkum6dT2vt0FVBG1H527DNt@mail.gmail.com>

hmmm..

well  I think I kind of figured it out, we need to multiply the
orginal resolution with the respective overview number. Thanks anyway

regards.
Imran
On Sat, Jan 1, 2011 at 3:49 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Imran,
>
> You'd probably get more helpful advice on the geoserver mailing list.
>
>



-- 
I.R
From mather.stephen at gmail.com  Sat Jan  1 11:34:57 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Sat Jan  1 11:34:27 2011
Subject: [gdal-dev] Problem with gdal 1.8 -- segmentation fault on large
	image with gdaladdo
In-Reply-To: <1293878826.4d1f062ace912@webmail.free.fr>
References: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
	<201012311738.31636.even.rouault@mines-paris.org>
	<AANLkTimC_yAw37mDbNQoBai1kck6vD0Nj6UTmexWzs7f@mail.gmail.com>
	<1293878826.4d1f062ace912@webmail.free.fr>
Message-ID: <341D2915-840A-4BE5-AED1-7C41BA78B6E3@gmail.com>

Seems large enough for me.

Stephen Mather

On Jan 1, 2011, at 5:47 AM, Even Rouault <even.rouault@mines-paris.org> wrote:

>> 
>> What's the new ceiling on image size for overview calculation?
> 
> The same as before hopefully. I'm not sure what the limit is. From a quick look
> at the code, I'd say perhaps if the raster_width * 64 > 2 billion. This could be
> probably overcomeby modifying the algorithm if it became a limit in real use
> cases, but I'm not aware of someone having reported it up to here...
> 
>> 
>> Steve
>> 
>> 
>> 
>> On Fri, Dec 31, 2010 at 11:38 AM, Even Rouault <even.rouault@mines-paris.org
>>> wrote:
>> 
>>> Stephen,
>>> 
>>> this should be fixed now in SVN.
>>> 
>>> This was indeed something wrong in a recent optimization in overview
>>> computation. This could cause integer overflow, that was triggered when
>>> dealing
>>> with a dataset where width * height > 2 billion.
>>> 
>>> Thanks for reporting !
>>> 
>> 
> 
> 
From haavard.kongsgaard at gmail.com  Sat Jan  1 13:08:23 2011
From: haavard.kongsgaard at gmail.com (=?ISO-8859-1?Q?H=E5vard_Wahl_Kongsg=E5rd?=)
Date: Sat Jan  1 13:08:25 2011
Subject: [gdal-dev] Deleting fields OGR
Message-ID: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>

Hi, in gdal/ogr is there a function to delete fields(like CreateField())?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110101/354012ce/attachment.html
From even.rouault at mines-paris.org  Sat Jan  1 13:10:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan  1 13:10:45 2011
Subject: [gdal-dev] Deleting fields OGR
In-Reply-To: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>
References: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>
Message-ID: <201101011910.42153.even.rouault@mines-paris.org>

Le samedi 01 janvier 2011 19:08:23, H?vard Wahl Kongsg?rd a ?crit :
> Hi, in gdal/ogr is there a function to delete fields(like CreateField())?

Not yet, but this has been discussed in http://trac.osgeo.org/gdal/ticket/2671
From haavard.kongsgaard at gmail.com  Sat Jan  1 13:15:52 2011
From: haavard.kongsgaard at gmail.com (=?ISO-8859-1?Q?H=E5vard_Wahl_Kongsg=E5rd?=)
Date: Sat Jan  1 13:15:54 2011
Subject: [gdal-dev] Deleting fields OGR
In-Reply-To: <201101011910.42153.even.rouault@mines-paris.org>
References: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>
	<201101011910.42153.even.rouault@mines-paris.org>
Message-ID: <AANLkTik_2GMPxfLbB_0Vb2c63Xi7w0tP3aCz=kbydwES@mail.gmail.com>

OK; what it the best alternative method in Python etc. to delete shapefile
fields? Using the shapefile functions in R (via python is one alternative).

2011/1/1 Even Rouault <even.rouault@mines-paris.org>

> Le samedi 01 janvier 2011 19:08:23, H?vard Wahl Kongsg?rd a ?crit :
> > Hi, in gdal/ogr is there a function to delete fields(like CreateField())?
>
> Not yet, but this has been discussed in
> http://trac.osgeo.org/gdal/ticket/2671
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110101/c0bc1e2e/attachment.html
From chaitanya.ch at gmail.com  Sat Jan  1 13:26:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jan  1 13:26:20 2011
Subject: [gdal-dev] Deleting fields OGR
In-Reply-To: <AANLkTik_2GMPxfLbB_0Vb2c63Xi7w0tP3aCz=kbydwES@mail.gmail.com>
References: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>
	<201101011910.42153.even.rouault@mines-paris.org>
	<AANLkTik_2GMPxfLbB_0Vb2c63Xi7w0tP3aCz=kbydwES@mail.gmail.com>
Message-ID: <AANLkTi=hM5xsbmBV_fQvwv4gn0ydbb_cXg5OrjT+wfzx@mail.gmail.com>

H?vard,

You can create a copy of the dataset while skipping the field. For
shapefiles you won't have to mention the .shp file. Opening just the .dbf
file will be enough.
Similar thing can be done using ogr2ogr by specifying the -select option
without the specified field's name. http://www.gdal.org/ogr2ogr.html

2011/1/1 H?vard Wahl Kongsg?rd <haavard.kongsgaard@gmail.com>

> OK; what it the best alternative method in Python etc. to delete shapefile
> fields? Using the shapefile functions in R (via python is one alternative).
>
> 2011/1/1 Even Rouault <even.rouault@mines-paris.org>
>
> Le samedi 01 janvier 2011 19:08:23, H?vard Wahl Kongsg?rd a ?crit :
>> > Hi, in gdal/ogr is there a function to delete fields(like
>> CreateField())?
>>
>> Not yet, but this has been discussed in
>> http://trac.osgeo.org/gdal/ticket/2671
>>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110101/9e965340/attachment.html
From haavard.kongsgaard at gmail.com  Sat Jan  1 13:58:35 2011
From: haavard.kongsgaard at gmail.com (=?ISO-8859-1?Q?H=E5vard_Wahl_Kongsg=E5rd?=)
Date: Sat Jan  1 13:58:39 2011
Subject: [gdal-dev] Deleting fields OGR
In-Reply-To: <AANLkTi==G88Oz22LHNqQa4T=fnwiPoKD587OUC+=CTKD@mail.gmail.com>
References: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>
	<201101011910.42153.even.rouault@mines-paris.org>
	<AANLkTik_2GMPxfLbB_0Vb2c63Xi7w0tP3aCz=kbydwES@mail.gmail.com>
	<AANLkTi=hM5xsbmBV_fQvwv4gn0ydbb_cXg5OrjT+wfzx@mail.gmail.com>
	<AANLkTi==G88Oz22LHNqQa4T=fnwiPoKD587OUC+=CTKD@mail.gmail.com>
Message-ID: <AANLkTi=dWeUqVX8G=3MApgPAHLGQbehu_m-Ju-=c7NUh@mail.gmail.com>

With ogr2ogr is it also possible to deselect("reverse selecting") fields?


> 2011/1/1 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
> H?vard,
>>
>> You can create a copy of the dataset while skipping the field. For
>> shapefiles you won't have to mention the .shp file. Opening just the .dbf
>> file will be enough.
>> Similar thing can be done using ogr2ogr by specifying the -select option
>> without the specified field's name. http://www.gdal.org/ogr2ogr.html
>>
>> 2011/1/1 H?vard Wahl Kongsg?rd <haavard.kongsgaard@gmail.com>
>>
>>>  OK; what it the best alternative method in Python etc. to delete
>>> shapefile fields? Using the shapefile functions in R (via python is one
>>> alternative).
>>>
>>> 2011/1/1 Even Rouault <even.rouault@mines-paris.org>
>>>
>>> Le samedi 01 janvier 2011 19:08:23, H?vard Wahl Kongsg?rd a ?crit :
>>>> > Hi, in gdal/ogr is there a function to delete fields(like
>>>> CreateField())?
>>>>
>>>> Not yet, but this has been discussed in
>>>> http://trac.osgeo.org/gdal/ticket/2671
>>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> H?vard Wahl Kongsg?rd
> Peace Research Institute Oslo (PRIO)
>
> http://havard.security-review.net/
>
>


-- 
H?vard Wahl Kongsg?rd
Peace Research Institute Oslo (PRIO)

http://havard.security-review.net/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110101/29a40000/attachment.html
From chaitanya.ch at gmail.com  Sun Jan  2 00:29:05 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jan  2 00:36:47 2011
Subject: [gdal-dev] Deleting fields OGR
In-Reply-To: <AANLkTi=dWeUqVX8G=3MApgPAHLGQbehu_m-Ju-=c7NUh@mail.gmail.com>
References: <AANLkTikg1pWd=cC4je0ME-6ZgWxUwEk0U3o6n_m72i3p@mail.gmail.com>
	<201101011910.42153.even.rouault@mines-paris.org>
	<AANLkTik_2GMPxfLbB_0Vb2c63Xi7w0tP3aCz=kbydwES@mail.gmail.com>
	<AANLkTi=hM5xsbmBV_fQvwv4gn0ydbb_cXg5OrjT+wfzx@mail.gmail.com>
	<AANLkTi==G88Oz22LHNqQa4T=fnwiPoKD587OUC+=CTKD@mail.gmail.com>
	<AANLkTi=dWeUqVX8G=3MApgPAHLGQbehu_m-Ju-=c7NUh@mail.gmail.com>
Message-ID: <AANLkTinWntx6t952jNAeY2USy9ee06iLHTyO7WnYUKpW@mail.gmail.com>

H?vard,

Currently there is no option for this in ogr2ogr but this looks like a
usable feature. You can file a ticket at
http://trac.osgeo.org/gdal/newticket for this enhancement.

2011/1/2 H?vard Wahl Kongsg?rd <haavard.kongsgaard@gmail.com>

> With ogr2ogr is it also possible to deselect("reverse selecting") fields?
>
>
>
>> 2011/1/1 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>
>> H?vard,
>>>
>>> You can create a copy of the dataset while skipping the field. For
>>> shapefiles you won't have to mention the .shp file. Opening just the .dbf
>>> file will be enough.
>>> Similar thing can be done using ogr2ogr by specifying the -select option
>>> without the specified field's name. http://www.gdal.org/ogr2ogr.html
>>>
>>> 2011/1/1 H?vard Wahl Kongsg?rd <haavard.kongsgaard@gmail.com>
>>>
>>>>  OK; what it the best alternative method in Python etc. to delete
>>>> shapefile fields? Using the shapefile functions in R (via python is one
>>>> alternative).
>>>>
>>>> 2011/1/1 Even Rouault <even.rouault@mines-paris.org>
>>>>
>>>> Le samedi 01 janvier 2011 19:08:23, H?vard Wahl Kongsg?rd a ?crit :
>>>>> > Hi, in gdal/ogr is there a function to delete fields(like
>>>>> CreateField())?
>>>>>
>>>>> Not yet, but this has been discussed in
>>>>> http://trac.osgeo.org/gdal/ticket/2671
>>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>>
>> --
>> H?vard Wahl Kongsg?rd
>> Peace Research Institute Oslo (PRIO)
>>
>> http://havard.security-review.net/
>>
>>
>
>
> --
> H?vard Wahl Kongsg?rd
> Peace Research Institute Oslo (PRIO)
>
> http://havard.security-review.net/
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110102/e92b7d6c/attachment-0001.html
From shashishaw at gmail.com  Mon Jan  3 09:52:36 2011
From: shashishaw at gmail.com (shashishaw)
Date: Mon Jan  3 09:52:38 2011
Subject: [gdal-dev] Re: PCIDSK .pix feature attribute information not
 visible in geomatica.
In-Reply-To: <1293528231423-5871388.post@n2.nabble.com>
References: <1293528231423-5871388.post@n2.nabble.com>
Message-ID: <1294066356313-5880861.post@n2.nabble.com>


Hi,
I'm still not able to get past this problem. Can someone suggest any
pointers as to which aspect of the conversion should I look into.. Any help
is appreciated.

Thanks,
Shashi
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5880861.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From aborruso at tin.it  Mon Jan  3 11:59:00 2011
From: aborruso at tin.it (iomeneandrei)
Date: Mon Jan  3 11:59:03 2011
Subject: [gdal-dev] Mosaic the output of gdal2tiles
Message-ID: <1294073940503-5881014.post@n2.nabble.com>


Hi all,
I have a folder with a gdal2tiles output: 6 levels of zoom (and folders),
with subfolders and  the .png tiles.

Is there a gdal tool to merge in a single geotiff file these .png tiles?

Thank you very much,

Andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Mosaic-the-output-of-gdal2tiles-tp5881014p5881014.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dmorissette at mapgears.com  Mon Jan  3 15:39:32 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan  3 16:21:22 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0beta1 Released
In-Reply-To: <AANLkTimbE_64=_KjHnYveVN_4VUf=vE_25UsjwjrnPws@mail.gmail.com>
References: <AANLkTimbE_64=_KjHnYveVN_4VUf=vE_25UsjwjrnPws@mail.gmail.com>
Message-ID: <4D223404.1090006@mapgears.com>

On 10-12-25 02:15 PM, Frank Warmerdam wrote:
>
> I somehow got busy with the holidays and didn't get the
> GDAL/OGR 1.8.0 beta1 out last weekend.  I've taken a few
> minutes to prepare a beta1 snapshot and put it up.  I'd
> appreciate bug reports via Trac.
>
>    http://download.osgeo.org/gdal/gdal-1.8.0beta1.tar.gz
>    http://download.osgeo.org/gdal/gdal-1.8.0beta1.tar.gz.md5
>


FYI I tested the beta quickly here with FGS/MapServer and it builds and 
works fine for the little tests I made (Ubuntu 10.10 x86_64 / FGS)

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From ksshannon at gmail.com  Mon Jan  3 18:40:19 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Mon Jan  3 18:40:36 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
Message-ID: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>

Hello all,
I was working on #3890 and the ticket issuer reported gdalinfo version as:


gdalinfo --version
>
>  GDAL 1.7.0b2, FWTools 2.4.7, released 2010/01/19
>
I downloaded FWTools 2.4.7 for windows and verified the version.  I may be
confused with the GDAL version, but assuming b2 is beta 2, wasn't this
version was retracted?  Does anyone know if beta 2 was released before the
commit that caused the HFA issue?  Just wondering if the FWTools should be
upgraded to 1.7.x.  Thanks.

kss


# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110103/6dd31da3/attachment.html
From warmerdam at pobox.com  Mon Jan  3 22:12:14 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  3 22:12:05 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
Message-ID: <4D22900E.10003@pobox.com>

On 11-01-03 06:40 PM, Kyle Shannon wrote:
> Hello all,
> I was working on #3890 and the ticket issuer reported gdalinfo version as:
>
>
>     gdalinfo --version
>
>     GDAL 1.7.0b2, FWTools 2.4.7, released 2010/01/19
>
> I downloaded FWTools 2.4.7 for windows and verified the version.  I may be
> confused with the GDAL version, but assuming b2 is beta 2, wasn't this version
> was retracted?  Does anyone know if beta 2 was released before the commit that
> caused the HFA issue?  Just wondering if the FWTools should be upgraded to
> 1.7.x.  Thanks.

Kyle,

FWTools was built at random intervals from GDAL trunk.  It appears that
last release was around the 1.7 release point.  I haven't really tried to
keep producing new FWTools releases over the last year and I'm not sure
I've retained enough of the materials for it to produce a new one.  I
might revisit this at some point.  In the meantime I mostly try to point
people to OSGeo4W now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Mon Jan  3 23:25:16 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan  3 23:25:17 2011
Subject: [gdal-dev] Re: PCIDSK .pix feature attribute information not
	visible in geomatica.
In-Reply-To: <1294066356313-5880861.post@n2.nabble.com>
References: <1293528231423-5871388.post@n2.nabble.com>
	<1294066356313-5880861.post@n2.nabble.com>
Message-ID: <AANLkTimE8fbrcvMj0HWO=vdRiBN7-yNATs5wbBgRnKu5@mail.gmail.com>

Shashi,

Did you try the ogr2ogr utility?

On Mon, Jan 3, 2011 at 8:22 PM, shashishaw <shashishaw@gmail.com> wrote:

>
> Hi,
> I'm still not able to get past this problem. Can someone suggest any
> pointers as to which aspect of the conversion should I look into.. Any help
> is appreciated.
>
> Thanks,
> Shashi
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5880861.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110104/eff347cd/attachment.html
From mather.stephen at gmail.com  Tue Jan  4 00:46:34 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Tue Jan  4 00:46:37 2011
Subject: [gdal-dev] RE: Mosaic the output of gdal2tiles (iomeneandrei)
Message-ID: <AANLkTin30S6TOnrbLC6rzyhumA-b4_sGqgrVVuSMu5w7@mail.gmail.com>

>
> Hi all,
> I have a folder with a gdal2tiles output: 6 levels of zoom (and folders),
> with subfolders and  the .png tiles.
>
> Is there a gdal tool to merge in a single geotiff file these .png tiles?
>
>
Hi Andrea,
     Probably the simplest way to handle this is with a virtual dataset.
Rather than a direct mosaic, you create a virtual mosaic and then use
gdal_translate to convert to a geotiff, e.g.

1)
gdalbuildvrt test.vrt *.png

2)
gdal_translate test.vrt test.tif

Simple as that.  You'll want to perform this on your highest resolution
tile, I'm guessing.  It is good practice to provide overviews for
performance sake, so run gdaladdo:

3)
gdaladdo -r average test.tif  2 4 6 8 16 32 64 128

If you want to really optimize (and here others can probably make better
recommendations) you'll want to use internal tiling when you create the tif
(only applies to max resolution, but good to do nonetheless), e.g. replace
step two with:

2)
gdal_translate -co "TILED=YES" test.vrt test.tif

Steve Mather
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110104/4cb4db11/attachment.html
From shashishaw at gmail.com  Tue Jan  4 02:26:34 2011
From: shashishaw at gmail.com (shashishaw)
Date: Tue Jan  4 02:26:36 2011
Subject: [gdal-dev] Re: PCIDSK .pix feature attribute information not
 visible in geomatica.
In-Reply-To: <AANLkTimE8fbrcvMj0HWO=vdRiBN7-yNATs5wbBgRnKu5@mail.gmail.com>
References: <1293528231423-5871388.post@n2.nabble.com>
	<1294066356313-5880861.post@n2.nabble.com>
	<AANLkTimE8fbrcvMj0HWO=vdRiBN7-yNATs5wbBgRnKu5@mail.gmail.com>
Message-ID: <AANLkTinaiLnZXoMT8iA38kwnY9mQNC8WyyEmiuDceaEh@mail.gmail.com>


Hi,
Apologies for the delay in replying and thanks for the response.

 @Frank: I did try to open the "ogr_polygon.pix" in geomatica. The different
attribute fields are empty, when viewing in the attribute manager.

@Chaitanya: Yes I did try using the ogr2ogr Utility. For the sake of test, I
used the utility to convert a .shp file to .pix and back to .shp. During the
transformation, the attribute information is lost.

Thanks,
Shashi.





On Tue, Jan 4, 2011 at 9:57 AM, Chaitanya kumar CH [via OSGeo.org] <
ml-node+5887620-911473961-309993@n2.nabble.com<ml-node%2B5887620-911473961-309993@n2.nabble.com>
> wrote:

> Shashi,
>
> Did you try the ogr2ogr utility?
>
>  On Mon, Jan 3, 2011 at 8:22 PM, shashishaw <[hidden email]<http://user/SendEmail.jtp?type=node&node=5887620&i=0>
> > wrote:
>
>>
>> Hi,
>> I'm still not able to get past this problem. Can someone suggest any
>> pointers as to which aspect of the conversion should I look into.. Any
>> help
>> is appreciated.
>>
>> Thanks,
>> Shashi
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5880861.html<http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5880861.html?by-user=t>
>>   Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=5887620&i=1>
>>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=5887620&i=2>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
> View message @
> http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5887620.html
>
> To unsubscribe from PCIDSK .pix feature attribute information not visible
> in geomatica., click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5871388&code=c2hhc2hpc2hhd0BnbWFpbC5jb218NTg3MTM4OHwtMjAxODE2NTU3Ng==>.
>
>

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5887836.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110103/3542a180/attachment-0001.html
From aborruso at tin.it  Tue Jan  4 05:53:51 2011
From: aborruso at tin.it (iomeneandrei)
Date: Tue Jan  4 05:53:55 2011
Subject: [gdal-dev] RE: Mosaic the output of gdal2tiles (iomeneandrei)
In-Reply-To: <AANLkTin30S6TOnrbLC6rzyhumA-b4_sGqgrVVuSMu5w7@mail.gmail.com>
References: <AANLkTin30S6TOnrbLC6rzyhumA-b4_sGqgrVVuSMu5w7@mail.gmail.com>
Message-ID: <1294138431733-5888231.post@n2.nabble.com>


Hi Stephen,
thank you for your reply.

Stephen Mather wrote:
> 
> Hi Andrea,
>      Probably the simplest way to handle this is with a virtual dataset.
> Rather than a direct mosaic, you create a virtual mosaic and then use
> gdal_translate to convert to a geotiff, e.g.
> 

It seems to me (I'm not an expert) that gdalbuildvrt needs geospatial files
as source. The output of gdal2tiles are files and folders following OSGeo
Tile Map Service Specification. The single png created from gdal2tiles does
not contain any geospatial information. I know the bounding box of the
mosaic of my tiles, the SRS, and the resolution of every zoom level.
Then gdalbuildvrt - I think - is not able to associate any spatial
information to the single .png file I have, and it cannot build a virtual
image.

This is an example of the structure of the output files and folders of
gdal2tiles:
http://www.friendpaste.com/10wUZr6XB8SZqhuMYnCyhi

Thank you,

Andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-RE-Mosaic-the-output-of-gdal2tiles-iomeneandrei-tp5887707p5888231.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Tue Jan  4 09:33:28 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Jan  4 09:33:50 2011
Subject: [gdal-dev] Re: Mosaic the output of gdal2tiles
References: <1294073940503-5881014.post@n2.nabble.com>
Message-ID: <loom.20110104T153007-391@post.gmane.org>

iomeneandrei <aborruso <at> tin.it> writes:

> 
> 
> Hi all,
> I have a folder with a gdal2tiles output: 6 levels of zoom (and folders),
> with subfolders and  the .png tiles.
> 
> Is there a gdal tool to merge in a single geotiff file these .png tiles?

I have a feeling that gdal wms driver might be able to do it.  See
examples at http://gdal.org/frmt_wms.html

-Jukka Rahkonen-

From warmerdam at pobox.com  Tue Jan  4 20:39:54 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  4 20:39:38 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0 Beta2 Released
Message-ID: <4D23CBEA.2000101@pobox.com>

Folks,

I have prepared a new beta release.  There were few issues identified with
the beta1, but there are some improvements and bug fixes.  Notable ones
include:

  - Support for the ECW 4.1 SDK.
  - Support for the MrSID V8 SDK.
  - Fixes for tricky jpeg-in-tiff bugs.
  - Various improvements to GML/NAS drivers.
  - Added -stats option to gdal_translate
  - Avoid copying statistics/histogram in gdal_translate when altering image.
  - Various improvements to PDF driver.
  - Added AeronavFAA driver to OGR.
  - Fixes for VSI buffered io handler.
  - ESRI JSON improvements to GeoJSON driver.
  - PostGIS 2.0 compatability changes to postgis driver.
  - XML handling fixes for GeoRaster driver.

The full 1.8 release NEWS is available in the gdal/NEWS file in the
release source.  The code can be downloaded from:

   http://download.osgeo.org/gdal/gdal-1.8.0beta2.tar.gz
   http://download.osgeo.org/gdal/gdal180beta2.zip

Bug reports on regressions since 1.7 are of particular interest, but any
and all testing and bug reporting is helpful.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yehil at rafael.co.il  Wed Jan  5 00:26:17 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Jan  5 00:26:49 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>

Hi Frank
I personally will be happy to see FWTOOLS updated at least for major Gdal releases. I find it to be a much simpler way to distribute Gdal to my end users.
I agree that OSGeo4W is more complete, but I think that for many users the simplicity of FWTOOLS wins.

Thanks
Yehiyam Livneh

From: "Frank Warmerdam"
Subject: Re: [gdal-dev] FWTools and GDAL 1.7.0
Date: 04 ????? 2011 05:11

On 11-01-03 06:40 PM, Kyle Shannon wrote:
> Hello all,
> I was working on #3890 and the ticket issuer reported gdalinfo version as:
>
>
> gdalinfo --version
>
> GDAL 1.7.0b2, FWTools 2.4.7, released 2010/01/19
>
> I downloaded FWTools 2.4.7 for windows and verified the version. I may be
> confused with the GDAL version, but assuming b2 is beta 2, wasn't this version
> was retracted? Does anyone know if beta 2 was released before the commit that
> caused the HFA issue? Just wondering if the FWTools should be upgraded to
> 1.7.x. Thanks.

Kyle,

FWTools was built at random intervals from GDAL trunk. It appears that
last release was around the 1.7 release point. I haven't really tried to
keep producing new FWTools releases over the last year and I'm not sure
I've retained enough of the materials for it to produce a new one. I
might revisit this at some point. In the meantime I mostly try to point
people to OSGeo4W now.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/8aa20629/attachment.html
From zoltans at geograph.co.za  Wed Jan  5 01:31:51 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Jan  5 01:47:10 2011
Subject: [gdal-dev] 3D Viewer
Message-ID: <4D241057.5070705@geograph.co.za>

Hi,
Can anyone point me to a simple 3D viewer that can read simple DXF, and 
maybe even a space separated (4 columns) ASCII file (DEM points: X Y Z 
TYPE)?
Would be great to be able to rotate the view. No editing required, just 
viewing.
Ideally should work in ubuntu, but both Win & Linux platforms would be 
great.

TIA,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1191 / Virus Database: 1435/3359 - Release Date: 01/04/11

From Ralf.Suhr at itc-halle.de  Wed Jan  5 04:22:25 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Jan  5 04:22:32 2011
Subject: [gdal-dev] 3D Viewer
In-Reply-To: <4D241057.5070705@geograph.co.za>
References: <4D241057.5070705@geograph.co.za>
Message-ID: <201101051022.26977.Ralf.Suhr@itc-halle.de>

Hi Zoltan,

the grass Nviz modul can do this.
http://grass.fbk.eu/grass65/manuals/html65_user/wxGUI.Nviz.html

Gr
Ralf

Am Mittwoch 05 Januar 2011, 07:31:51 schrieb Zoltan Szecsei:
> Hi,
> Can anyone point me to a simple 3D viewer that can read simple DXF, and
> maybe even a space separated (4 columns) ASCII file (DEM points: X Y Z
> TYPE)?
> Would be great to be able to rotate the view. No editing required, just
> viewing.
> Ideally should work in ubuntu, but both Win & Linux platforms would be
> great.
> 
> TIA,
> Zoltan

From aborruso at tin.it  Wed Jan  5 06:41:30 2011
From: aborruso at tin.it (iomeneandrei)
Date: Wed Jan  5 06:41:32 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
Message-ID: <1294227690320-5891689.post@n2.nabble.com>


Hi all,
for what is worth also for me the simplicity of FWTOOLS wins.

Best regards,

andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-FWTools-and-GDAL-1-7-0-tp5887121p5891689.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Wed Jan  5 09:05:29 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  5 09:05:32 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
Message-ID: <AANLkTi=JQ6JdmJcz=oDBmPthgZkbVLT+3rf7_+uRSH3Q@mail.gmail.com>

2011/1/5 Livneh Yehiyam <yehil@rafael.co.il>

> I personally will be happy to see FWTOOLS updated at least for major Gdal
> releases. I find it to be a much simpler way to distribute Gdal to my end
> users.
> I agree that OSGeo4W is more complete, but I think that for many users the
> simplicity of FWTOOLS wins.
>
>
What do you mean by 'simplicity'? Is this related to the installer which is
simpler to use? In this regard would it be much simpler to pick up the
required files and distribute that to the end used in a single .zip package?

As far as I know FWTools is based on the development version while OSGeo4W
and ms4w are mostly compiled against the stable branches (OSGeo4W may also
contain -dev packages though). This may strongly define which one is more
suitable for a particual use case. A development version contains the recent
features up to the time when the package has been built, but it may also
contain a high number of bugs temporarily, which should be fixed until the
next stable release.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/1e1cc7f1/attachment.html
From sebastian.ovide at gmail.com  Wed Jan  5 11:13:45 2011
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Jan  5 11:14:08 2011
Subject: [gdal-dev] ogr gml
Message-ID: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>

Hi All,

ogrinfo is skiping some fields my gml files....

for example the
fields addressStatus, matchStatus, physicalStatus, positionalQuality
and structureType are not read...

<osgb:addressPointMember>
<osgb:AddressPoint fid='osgb1000002193000088'>
<osgb:version>11</osgb:version>
<osgb:versionDate>2009-10-12</osgb:versionDate>
<osgb:theme>Address</osgb:theme>
<osgb:addressStatus>
<osgb:matchStatus>Matched</osgb:matchStatus>
<osgb:physicalStatus>Existing</osgb:physicalStatus>
<osgb:positionalQuality accuracy='Surveyed'>Final</osgb:positionalQuality>
<osgb:structureType>Permanent Building</osgb:structureType>
</osgb:addressStatus>
<osgb:OSAPR>AP6DJK8352W7DAUGJG</osgb:OSAPR>
<osgb:point>
<gml:Point srsName='osgb:BNG'>
<gml:coordinates>405525.600,628349.000</gml:coordinates>
</gml:Point>
</osgb:point>
<osgb:postalAddress>
<osgb:buildingNumber>16</osgb:buildingNumber>
<osgb:thoroughfare>WEST END</osgb:thoroughfare>
<osgb:dependentLocality>CHATTON</osgb:dependentLocality>
<osgb:postTown>ALNWICK</osgb:postTown>
<osgb:postCode type='Small'>NE66 5PP</osgb:postCode>
<osgb:deliveryPointSuffix>1Z</osgb:deliveryPointSuffix>
</osgb:postalAddress>
<osgb:postalAddressDate>2003-04-18</osgb:postalAddressDate>
<osgb:referenceToTopographicArea xlink:href='#osgb1000036885604'/>
</osgb:AddressPoint>
</osgb:addressPointMember>

any ideas ?
-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/14b55481/attachment-0001.html
From even.rouault at mines-paris.org  Wed Jan  5 11:26:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  5 11:26:36 2011
Subject: [gdal-dev] ogr gml
In-Reply-To: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>
References: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>
Message-ID: <1294244788.4d249bb4ca856@webmail.free.fr>

Sebastian,

you didn't mention the GDAL version you are using. There has been a lot of
improvements done in the GML driver in GDAL trunk over the last few months and
theoritically you should now be able to see the fields that are not immediate
children of the Feature element. You can try GDAL 1.8.0beta2 (or if you're not
in a position to compile code by yourself : gdal-dev in OSGEO4W or Tamas
Szekeres daily builds at http://vbkto.dyndns.org/sdk/ (the -devel packages) if
you're on windows, or FWTools 3.0.1 if you're on Linux)

Best regards,

Even

> Hi All,
>
> ogrinfo is skiping some fields my gml files....
>
> for example the
> fields addressStatus, matchStatus, physicalStatus, positionalQuality
> and structureType are not read...
>
> <osgb:addressPointMember>
> <osgb:AddressPoint fid='osgb1000002193000088'>
> <osgb:version>11</osgb:version>
> <osgb:versionDate>2009-10-12</osgb:versionDate>
> <osgb:theme>Address</osgb:theme>
> <osgb:addressStatus>
> <osgb:matchStatus>Matched</osgb:matchStatus>
> <osgb:physicalStatus>Existing</osgb:physicalStatus>
> <osgb:positionalQuality accuracy='Surveyed'>Final</osgb:positionalQuality>
> <osgb:structureType>Permanent Building</osgb:structureType>
> </osgb:addressStatus>
> <osgb:OSAPR>AP6DJK8352W7DAUGJG</osgb:OSAPR>
> <osgb:point>
> <gml:Point srsName='osgb:BNG'>
> <gml:coordinates>405525.600,628349.000</gml:coordinates>
> </gml:Point>
> </osgb:point>
> <osgb:postalAddress>
> <osgb:buildingNumber>16</osgb:buildingNumber>
> <osgb:thoroughfare>WEST END</osgb:thoroughfare>
> <osgb:dependentLocality>CHATTON</osgb:dependentLocality>
> <osgb:postTown>ALNWICK</osgb:postTown>
> <osgb:postCode type='Small'>NE66 5PP</osgb:postCode>
> <osgb:deliveryPointSuffix>1Z</osgb:deliveryPointSuffix>
> </osgb:postalAddress>
> <osgb:postalAddressDate>2003-04-18</osgb:postalAddressDate>
> <osgb:referenceToTopographicArea xlink:href='#osgb1000036885604'/>
> </osgb:AddressPoint>
> </osgb:addressPointMember>
>
> any ideas ?
> --
> Sebastian E. Ovide
>


From Chris.Barker at noaa.gov  Wed Jan  5 11:48:48 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Jan  5 11:48:50 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <1294227690320-5891689.post@n2.nabble.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
Message-ID: <4D24A0F0.3090308@noaa.gov>

On 1/5/11 3:41 AM, iomeneandrei wrote:
> for what is worth also for me the simplicity of FWTOOLS wins.

FWTools is nice, but I think with OSgeo4win, not really important.

However, for simplicity, a one-click installer for just GDAL/OGR for 
Windows, complete with command line tools and ready for use with the 
python bindings (and others language bindings?) would be great.

I've found it painful to find appropriate Windows executables every time 
I've need to upgrade to the latest.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From christopher.schmidt at nokia.com  Wed Jan  5 11:19:41 2011
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Wed Jan  5 11:53:02 2011
Subject: [gdal-dev] ogr gml
In-Reply-To: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>
References: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>
Message-ID: <C4FBA776-E137-4F92-8078-A352CFEA6877@nokia.com>


On Jan 5, 2011, at 11:13 AM, ext Sebastian E. Ovide wrote:

> Hi All,
> 
> ogrinfo is skiping some fields my gml files.... 
> 
> for example the fields addressStatus, matchStatus, physicalStatus, positionalQuality and structureType are not read...

Those are complex fields, which OGR doesn't handle.

-- Chris

> <osgb:addressPointMember>
> <osgb:AddressPoint fid='osgb1000002193000088'>
> <osgb:version>11</osgb:version>
> <osgb:versionDate>2009-10-12</osgb:versionDate>
> <osgb:theme>Address</osgb:theme>
> <osgb:addressStatus>
> <osgb:matchStatus>Matched</osgb:matchStatus>
> <osgb:physicalStatus>Existing</osgb:physicalStatus>
> <osgb:positionalQuality accuracy='Surveyed'>Final</osgb:positionalQuality>
> <osgb:structureType>Permanent Building</osgb:structureType>
> </osgb:addressStatus>
> <osgb:OSAPR>AP6DJK8352W7DAUGJG</osgb:OSAPR>
> <osgb:point>
> <gml:Point srsName='osgb:BNG'>
> <gml:coordinates>405525.600,628349.000</gml:coordinates>
> </gml:Point>
> </osgb:point>
> <osgb:postalAddress>
> <osgb:buildingNumber>16</osgb:buildingNumber>
> <osgb:thoroughfare>WEST END</osgb:thoroughfare>
> <osgb:dependentLocality>CHATTON</osgb:dependentLocality>
> <osgb:postTown>ALNWICK</osgb:postTown>
> <osgb:postCode type='Small'>NE66 5PP</osgb:postCode>
> <osgb:deliveryPointSuffix>1Z</osgb:deliveryPointSuffix>
> </osgb:postalAddress>
> <osgb:postalAddressDate>2003-04-18</osgb:postalAddressDate>
> <osgb:referenceToTopographicArea xlink:href='#osgb1000036885604'/>
> </osgb:AddressPoint>
> </osgb:addressPointMember>
> 
> any ideas ?
> -- 
> Sebastian E. Ovide
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Ralf.Suhr at itc-halle.de  Wed Jan  5 12:02:28 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Jan  5 12:02:36 2011
Subject: [gdal-dev] ogr gml
In-Reply-To: <C4FBA776-E137-4F92-8078-A352CFEA6877@nokia.com>
References: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>
	<C4FBA776-E137-4F92-8078-A352CFEA6877@nokia.com>
Message-ID: <201101051802.29439.Ralf.Suhr@itc-halle.de>

Hi Chris,

if you have a newer gdal version (1.8). ogrinfo will produce:

Layer name: AddressPoint
Geometry: Point
Feature Count: 1
Extent: (405525.600000, 628349.000000) - (405525.600000, 628349.000000)
Layer SRS WKT:
(unknown)
version: Integer (0.0)
versionDate: String (10.0)
theme: String (7.0)
matchStatus: String (7.0)
physicalStatus: String (8.0)
positionalQuality: String (5.0)
structureType: String (18.0)
OSAPR: String (18.0)
buildingNumber: Integer (0.0)
thoroughfare: String (8.0)
dependentLocality: String (7.0)
postTown: String (7.0)
postCode: String (8.0)
deliveryPointSuffix: String (2.0)
postalAddressDate: String (10.0)
OGRFeature(AddressPoint):0
  version (Integer) = 11
  versionDate (String) = 2009-10-12
  theme (String) = Address
  matchStatus (String) = Matched
  physicalStatus (String) = Existing
  positionalQuality (String) = Final
  structureType (String) = Permanent Building
  OSAPR (String) = AP6DJK8352W7DAUGJG
  buildingNumber (Integer) = 16
  thoroughfare (String) = WEST END
  dependentLocality (String) = CHATTON
  postTown (String) = ALNWICK
  postCode (String) = NE66 5PP
  deliveryPointSuffix (String) = 1Z
  postalAddressDate (String) = 2003-04-18
  POINT (405525.6 628349.0)

Gr
Ralf

Am Mittwoch 05 Januar 2011, 17:19:41 schrieb christopher.schmidt@nokia.com:
> On Jan 5, 2011, at 11:13 AM, ext Sebastian E. Ovide wrote:
> > Hi All,
> > 
> > ogrinfo is skiping some fields my gml files....
> > 
> > for example the fields addressStatus, matchStatus, physicalStatus,
> > positionalQuality and structureType are not read...
> 
> Those are complex fields, which OGR doesn't handle.
> 
> -- Chris
> 
> > <osgb:addressPointMember>
> > <osgb:AddressPoint fid='osgb1000002193000088'>
> > <osgb:version>11</osgb:version>
> > <osgb:versionDate>2009-10-12</osgb:versionDate>
> > <osgb:theme>Address</osgb:theme>
> > <osgb:addressStatus>
> > <osgb:matchStatus>Matched</osgb:matchStatus>
> > <osgb:physicalStatus>Existing</osgb:physicalStatus>
> > <osgb:positionalQuality
> > accuracy='Surveyed'>Final</osgb:positionalQuality>
> > <osgb:structureType>Permanent Building</osgb:structureType>
> > </osgb:addressStatus>
> > <osgb:OSAPR>AP6DJK8352W7DAUGJG</osgb:OSAPR>
> > <osgb:point>
> > <gml:Point srsName='osgb:BNG'>
> > <gml:coordinates>405525.600,628349.000</gml:coordinates>
> > </gml:Point>
> > </osgb:point>
> > <osgb:postalAddress>
> > <osgb:buildingNumber>16</osgb:buildingNumber>
> > <osgb:thoroughfare>WEST END</osgb:thoroughfare>
> > <osgb:dependentLocality>CHATTON</osgb:dependentLocality>
> > <osgb:postTown>ALNWICK</osgb:postTown>
> > <osgb:postCode type='Small'>NE66 5PP</osgb:postCode>
> > <osgb:deliveryPointSuffix>1Z</osgb:deliveryPointSuffix>
> > </osgb:postalAddress>
> > <osgb:postalAddressDate>2003-04-18</osgb:postalAddressDate>
> > <osgb:referenceToTopographicArea xlink:href='#osgb1000036885604'/>
> > </osgb:AddressPoint>
> > </osgb:addressPointMember>
> > 
> > any ideas ?
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Konstantin.Baumann at autodesk.com  Wed Jan  5 12:09:37 2011
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Wed Jan  5 12:09:41 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24A0F0.3090308@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
Message-ID: <7DE0E5A9710AFC4896275865DABC86DA2C871B@005-TK5MPN1-002.MGDADSK.autodesk.com>

And add x64 support to that list, too...

Kosta

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christopher Barker
Sent: Wednesday, January 05, 2011 5:49 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

On 1/5/11 3:41 AM, iomeneandrei wrote:
> for what is worth also for me the simplicity of FWTOOLS wins.

FWTools is nice, but I think with OSgeo4win, not really important.

However, for simplicity, a one-click installer for just GDAL/OGR for 
Windows, complete with command line tools and ready for use with the 
python bindings (and others language bindings?) would be great.

I've found it painful to find appropriate Windows executables every time 
I've need to upgrade to the latest.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jef at norbit.de  Wed Jan  5 12:42:22 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed Jan  5 12:42:47 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24A0F0.3090308@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
Message-ID: <20110105174222.GA8417@norbit.de>

Hi Christopher,

On Wed, 05. Jan 2011 at 08:48:48 -0800, Christopher Barker wrote:
> However, for simplicity, a one-click installer for just GDAL/OGR for  
> Windows, complete with command line tools and ready for use with the  
> python bindings (and others language bindings?) would be great.

The QGIS standalone NSIS installer is made from OSGeo4W binaries with
creatensis.pl[1].

It starts from the qgis-full/qgis-dev package and collects the dependencies
from OSGeo4W, extracts them and repackages them to a single NSIS installer.

Adapting it to do the same for gdal17 shouldn't be too difficult.


J?rgen


[1] http://trac.osgeo.org/qgis/browser/trunk/qgis/ms-windows/osgeo4w/creatensis.pl

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From szekerest at gmail.com  Wed Jan  5 12:44:37 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  5 12:44:40 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24A0F0.3090308@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
Message-ID: <AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>

2011/1/5 Christopher Barker <Chris.Barker@noaa.gov>

> However, for simplicity, a one-click installer for just GDAL/OGR for
> Windows, complete with command line tools and ready for use with the python
> bindings (and others language bindings?) would be great.
>

I've found it painful to find appropriate Windows executables every time
> I've need to upgrade to the latest.
>
>
Supporting multiple vesions (development/stable branches/releases, x32/x64,
multiple MSVC CRT dependencies) is quite a difficult task in a single
installer. With regards to the development version it would also be
reasonable to provide a build quite frequently to be in sync with the latest
changes in trunk. These are the main reasons I've originally set up
http://vbkto.dyndns.org/sdk/ to provide most of the resonable combinations
as daily built packages.

I also wanted to include these files in an installer (or multiple
installers) but at the moment I don't see the real benefit of this over
extracting a single zip package, since these libraries don't require
significant preparation (like regkey entries) during the deployment. Any
further consideration in this topic would be helpful, as I may have missed
something that would also be important by a windows user.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/2968e982/attachment.html
From dmorissette at mapgears.com  Wed Jan  5 12:50:48 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Jan  5 12:50:50 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
Message-ID: <4D24AF78.6020804@mapgears.com>

On 11-01-05 12:44 PM, Tamas Szekeres wrote:
>
> I also wanted to include these files in an installer (or multiple
> installers) but at the moment I don't see the real benefit of this over
> extracting a single zip package, since these libraries don't require
> significant preparation (like regkey entries) during the deployment. Any
> further consideration in this topic would be helpful, as I may have
> missed something that would also be important by a windows user.
>

Tamas,

I agree with you, but it seems that an [OK] button (even if it doesn't 
do anything) makes Windows users feel so much better.  :)

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From ksshannon at gmail.com  Wed Jan  5 12:49:00 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Jan  5 12:56:26 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <20110105174222.GA8417@norbit.de>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<20110105174222.GA8417@norbit.de>
Message-ID: <AANLkTinvwa2gMmK32mChBs5SyOLiA7H3oUo=qu1++mG0@mail.gmail.com>

I guess my worry was if someone uses the FWTools libs to link against.
1.7.0 had that serious bug for writing HFA files:

*ALERT: The GDAL/OGR 1.7.0 release has been discovered to have a serious bug
which results in all Erdas Imagine files (HFA driver) being generated in a
way that is unreadable by non-GDAL software. Due to this bug, the GDAL/OGR
project has retracted the 1.7.0 release, and has issued it's replacement
with the 1.7.1 bug fix release. See
http://trac.osgeo.org/gdal/ticket/3382for details.

*If it was worth retracting the release and pushing 1.7.1 out, maybe we
shouldn't have it available in binary form either.  Maybe I am missing
something.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Wed, Jan 5, 2011 at 10:42, J?rgen E. <jef@norbit.de> wrote:

> Hi Christopher,
>
> On Wed, 05. Jan 2011 at 08:48:48 -0800, Christopher Barker wrote:
> > However, for simplicity, a one-click installer for just GDAL/OGR for
> > Windows, complete with command line tools and ready for use with the
> > python bindings (and others language bindings?) would be great.
>
> The QGIS standalone NSIS installer is made from OSGeo4W binaries with
> creatensis.pl[1].
>
> It starts from the qgis-full/qgis-dev package and collects the dependencies
> from OSGeo4W, extracts them and repackages them to a single NSIS installer.
>
> Adapting it to do the same for gdal17 shouldn't be too difficult.
>
>
> J?rgen
>
>
> [1]
> http://trac.osgeo.org/qgis/browser/trunk/qgis/ms-windows/osgeo4w/creatensis.pl
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> http://www.norbit.de
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/1344093b/attachment-0001.html
From Chris.Barker at noaa.gov  Wed Jan  5 13:28:36 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Jan  5 13:28:38 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
Message-ID: <4D24B854.5060104@noaa.gov>

On 1/5/11 9:44 AM, Tamas Szekeres wrote:

> Supporting multiple vesions (development/stable branches/releases,
> x32/x64, multiple MSVC CRT dependencies) is quite a difficult task in a
> single installer.

yes, a Major pain. I don't know that we need a single installer, but 
there is a lot to support.

> These are the main reasons I've originally set
> up http://vbkto.dyndns.org/sdk/ to provide most of the resonable
> combinations as daily built packages.

Actually, that is a GREAT resource. At the moment, I can't remember why 
it's been difficult for me to use, but a few thoughts:

First -- I use GDAL from Python and with the command line tools, so 
that's my perspective.

1) It would be nice to have binaries for the latest release front and 
center at the main GDAL site -- having to poke around to find Tamas's 
site is not a big deal, but not always obvious.

2) A standard install location would be good. As I've messed with this 
each time, I never know where stuff should go -- maybe installers would 
help with that

3) If there is a standard install location, then "easy_install gdal" (or 
setup.py build, or...) could work for the python bindings.

Another option is to have a binary installer for the python bindings 
that includes gdal and the gdal utilities -- that would be great for 
users like me, but I don't know how common my use case is. In that case, 
you'd want to support a few recent pythons versions, the python.org 
binaries: 2.6, 2.7, 3.1 (maybe 2.5 too).

One of the tricks here is which numpy to support, etc. numpy has been 
pretty good with binary compatibility lately (except for one mistake 
recently that was corrected)

However, I DON'T want gdal to give me  Python -- I use Python for too 
many other things for that.

4) it might be nice if the install location for the utilities got put on 
the user's PATH -- I don't know how hard that is in an installer -- 
Windows really sucks in that regard.

> I also wanted to include these files in an installer (or multiple
> installers) but at the moment I don't see the real benefit of this over
> extracting a single zip package, since these libraries don't require
> significant preparation (like regkey entries) during the deployment.

An installer would better enforce a standard install location. You could 
also have a custom DOS box with a menu entry that set up the environment 
for the command line tools (maybe only PATH?), provide an uninstaller, 
and of course, give the Windows users a nice warm and fuzzy feeling.

With regard to Python, an installer could see what Python the user has 
and install the bindings for that version. Not that I have any idea how 
to build that!

Inno Setup is a very nice free installer, by the way.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From mykillk at gmail.com  Wed Jan  5 16:06:38 2011
From: mykillk at gmail.com (MyKillK)
Date: Wed Jan  5 16:06:42 2011
Subject: [gdal-dev] Combining TIFFs w/ different color palettes
Message-ID: <1294261598752-5893567.post@n2.nabble.com>


Hello all,

My question is simple. Is it possible to combine two GeoTIFFs, each with its
own unique color palette into a single image that is properly color mapped?
Each image only has 16 colors so I feel like it should be possible to copy
Image #1's color table straight into indexes 0-15 and then remap Image #2's
color table to indexes 16-31. For the life of I can't figure out how this
can be done, it always wants to use Image #1's color table alone in the
merged TIFF.

Thanks,
Michael
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Combining-TIFFs-w-different-color-palettes-tp5893567p5893567.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Michael.Buchoff at caemilusa.com  Wed Jan  5 16:09:52 2011
From: Michael.Buchoff at caemilusa.com (Michael Buchoff)
Date: Wed Jan  5 16:11:39 2011
Subject: [gdal-dev] Trouble handling HFA histogram (.img file)
Message-ID: <4064B6E43A2FA546858C82DAF82702FA042177DA@srv509.caemilusa.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalinfoRound1
Type: application/octet-stream
Size: 11132 bytes
Desc: gdalinfoRound1
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/eaba804a/gdalinfoRound1-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalinfoRound2
Type: application/octet-stream
Size: 11132 bytes
Desc: gdalinfoRound2
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/eaba804a/gdalinfoRound2-0001.obj
From szekerest at gmail.com  Wed Jan  5 16:37:15 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  5 16:37:19 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24B854.5060104@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
Message-ID: <AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>

2011/1/5 Christopher Barker <Chris.Barker@noaa.gov>

>
> 1) It would be nice to have binaries for the latest release front and
> center at the main GDAL site -- having to poke around to find Tamas's site
> is not a big deal, but not always obvious.
>
>
Chris,

With regards to the comment above, while I'm not sure about the objectives
but I don't think the GDAL site would intend to be a hosting provider of
various binary packages, the most reasonable thing is to put the references
pointing the user to the correct locations which has already been done, see
the "Downloads" section at http://www.gdal.org/

2) A standard install location would be good. As I've messed with this each
> time, I never know where stuff should go -- maybe installers would help with
> that
>
>
This doesn't seem to be decisive requirement to me. We may also create a
definite location in the hard drive to host such files (which can be
remembered later). Or some other folks may prefer installing these files
along with their applications or keep such files in separate - project
specific - directories. We may also have a requirement to deploy and run
these applications from portable locations (ie. from CD or a flash drive).
Another issue of an installer may be due to a single product key along with
the setup which would prevent from installing multiple versions side by side
in the same environment.


> 3) If there is a standard install location, then "easy_install gdal" (or
> setup.py build, or...) could work for the python bindings.
>
>
I admit I don't have enough knowledge about the 'magic' tricks related to
python-ish way installing applications. I expect that most 'magic' are
implemented by copying the files at certain locations, setting some
environment variables or regkey entries. However I might also consider
running a custom application with gdal not necessarily be the responsibility
of a GDAL package. You might also want to install python from a separate
installer (either ActivePython, python.org whatever) and run the application
direcly from a command prompt where the environments are set to run the gdal
applications properly. Most of these packages provide the required .bat file
to setup the environment this way.


> Another option is to have a binary installer for the python bindings that
> includes gdal and the gdal utilities -- that would be great for users like
> me, but I don't know how common my use case is. In that case, you'd want to
> support a few recent pythons versions, the python.org binaries: 2.6, 2.7,
> 3.1 (maybe 2.5 too).
>
>
I don't know much about this either. This may however be doable for those
guys who know the Python packaging approach well enough. I don't think eiter
of the packages referred at
http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries would support this
feature though.



> One of the tricks here is which numpy to support, etc. numpy has been
> pretty good with binary compatibility lately (except for one mistake
> recently that was corrected)
>
>
Not sure how this be related to a GDAL binary distribution, as far as I
remember numpy can be installed to the Python deployment directly.



> However, I DON'T want gdal to give me  Python -- I use Python for too many
> other things for that.
>
>
Yes, adding more runtime environments to a simple GDAL package makes it more
heavy weighted. Would also be reasonable to include the Perl environment or
a .NET framework installer for example to make it more complete. However, in
many cases it's more reasonable to let the application (using the GDAL
binaries) decide how to make a proper installer to run their application
smoothly.



> 4) it might be nice if the install location for the utilities got put on
> the user's PATH -- I don't know how hard that is in an installer -- Windows
> really sucks in that regard.
>
>
I don't think it would be beneficial in most cases. This could easily break
other applications (using the dll-s with the same names) to fail
unexpectedly. I would prefer to keep the applications isolated (setting the
environment variables specifically to the process and not the user/system)
as much as possible.

An installer would better enforce a standard install location. You could
> also have a custom DOS box with a menu entry that set up the environment for
> the command line tools (maybe only PATH?), provide an uninstaller, and of
> course, give the Windows users a nice warm and fuzzy feeling.
>
>
The 'nice warm and fuzzy feeling' is a good objective indeed, setting up an
entry on the start menu instead of a running the batch file directly may
also be an advantage. While I'm not sure starting a DOS prompt would
validate an installer by it's own, I can see this requirement to be valid in
most cases.



> With regard to Python, an installer could see what Python the user has and
> install the bindings for that version. Not that I have any idea how to build
> that!
>
>
Agreed, but I have no idea either.


> Inno Setup is a very nice free installer, by the way.
>
>
I would also add Wix <http://wix.sourceforge.net/> to the list.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/30250b8a/attachment.html
From szekerest at gmail.com  Wed Jan  5 16:43:54 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  5 16:43:57 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24AF78.6020804@mapgears.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24AF78.6020804@mapgears.com>
Message-ID: <AANLkTi=Nmf8HKE+3ZwF=9HO5w_pQMkTFxo9E0m65tAnW@mail.gmail.com>

2011/1/5 Daniel Morissette <dmorissette@mapgears.com>

> I agree with you, but it seems that an [OK] button (even if it doesn't do
> anything) makes Windows users feel so much better.  :)
>
>
Daniel,

:-)   And sometimes we wonder what a heck is being done behind an OK button
on Windows which takes so long (or lasts forever ;-)

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/c1656386/attachment.html
From warmerdam at pobox.com  Wed Jan  5 17:12:40 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  5 17:12:45 2011
Subject: [gdal-dev] Combining TIFFs w/ different color palettes
In-Reply-To: <1294261598752-5893567.post@n2.nabble.com>
References: <1294261598752-5893567.post@n2.nabble.com>
Message-ID: <4D24ECD8.8050901@pobox.com>

On 11-01-05 04:06 PM, MyKillK wrote:
>
> Hello all,
>
> My question is simple. Is it possible to combine two GeoTIFFs, each with its
> own unique color palette into a single image that is properly color mapped?
> Each image only has 16 colors so I feel like it should be possible to copy
> Image #1's color table straight into indexes 0-15 and then remap Image #2's
> color table to indexes 16-31. For the life of I can't figure out how this
> can be done, it always wants to use Image #1's color table alone in the
> merged TIFF.

Michael,

I am not aware of any existing GDAL application to do this.  You  could
use pct2rgb.py on each image, merge the RGB images, and then use rgb2pct.py
to produce a paletted image from the result that would likely have 32 colors.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Wed Jan  5 17:25:01 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Jan  5 17:25:10 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
Message-ID: <4D24EFBD.1050201@noaa.gov>

It may well be that GDAL has too many different use cases to even have a 
"standard" install, but...

On 1/5/11 1:37 PM, Tamas Szekeres wrote:
> 2011/1/5 Christopher Barker <Chris.Barker@noaa.gov
>     1) It would be nice to have binaries for the latest release front
>     and center at the main GDAL site -- having to poke around to find
>     Tamas's site is not a big deal, but not always obvious.

> With regards to the comment above, while I'm not sure about the
> objectives but I don't think the GDAL site would intend to be a hosting
> provider of various binary packages,

Well, many (most?) open source packages have "official" binaries hosted 
on its site. It's pretty common to go to a project's site and expect to 
find a way to download binaries right then and there.

>     2) A standard install location would be good. As I've messed with
>     this each time, I never know where stuff should go -- maybe
>     installers would help with that
>
> This doesn't seem to be decisive requirement to me.

It's not a strong requirement, but standard defaults do make things 
easier for everyone.

> Or some other folks may prefer installing these files
> along with their applications or keep such files in separate - project
> specific - directories.

Well, users should certainly be able to do something custom if they 
want. This is all about use-cases -- if you are building a custom app 
linked against GDAL, then you probably want to control where you put things.

However, if you are interested in the command line tools, and using GDAL 
via Python or Perl or ??, then it makes it easier to have a standard 
location.

 > Another issue of an installer may be due to a single product key
> along with the setup which would prevent from installing multiple
> versions side by side in the same environment.

Surely there are ways to accommodate that? though "dll hell" is in the 
lexicon for a reason!

>     3) If there is a standard install location, then "easy_install gdal"
>     (or setup.py build, or...) could work for the python bindings.

> I admit I don't have enough knowledge about the 'magic' tricks related
> to python-ish way installing applications.

That's the thing -- there is no magic here. If you are building a python 
extension, you need to tell the build system where its dependencies lie. 
If you are installing a pre-built python extension, then the 
dependencies need to be in a known place (or maybe on the right PATHS -- 
Windows is pretty ugly this way). Which is why a "standard" install 
location would be a good idea.

> I might also consider
> running a custom application with gdal not necessarily be the
> responsibility of a GDAL package.

well, that depends on whether you consider Python bindings a "custom 
application". In any case, I think it helps third party packages to have 
standard default install locations.

Oh for *nix -- this would be easier if we just could just put stuff in 
/usr/local/...

> You might also want to install python
> from a separate installer (either ActivePython, python.org
> <http://python.org> whatever)

True -- but it is very much a standard for third party packages to 
provide binaries for the python.org python build. Again, I'm not 
suggesting that folks should be prevented (or even discouraged) from 
doing various sorts of custom installs, just that there should be 
defaults, so that it's clear an easy for a newbie to know what to to to 
get things to "just work".

>     Another option is to have a binary installer for the python bindings
>     that includes gdal and the gdal utilities -- that would be great for
>     users like me, but I don't know how common my use case is. In that
>     case, you'd want to support a few recent pythons versions, the
>     python.org <http://python.org> binaries: 2.6, 2.7, 3.1 (maybe 2.5 too).
>
> I don't know much about this either. This may however be doable for
> those guys who know the Python packaging approach well enough.

It's not that hard (at lest once GDAL is built), but it is work.

> I don't
> think eiter of the packages referred at
> http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries would support
> this feature though.

Agreed -- that's my point!

>     One of the tricks here is which numpy to support, etc. numpy has
>     been pretty good with binary compatibility lately (except for one
>     mistake recently that was corrected)
>
>
> Not sure how this be related to a GDAL binary distribution, as far as I
> remember numpy can be installed to the Python deployment directly.

yes, but the Python bindings are built against a particular numpy. 
That's OK for version so numpy that are binary compatible, but it 
potentially fragile. Note that with the new extended buffer interface, 
it should be possible to build GDAL with full numpy support, but not 
have to compile against numpy. But I think that's only good for 2.7 and 3.*

>     However, I DON'T want gdal to give me  Python -- I use Python for
>     too many other things for that.
>
> Yes, adding more runtime environments to a simple GDAL package makes it
> more heavy weighted.

right -- I think we're talking about lightweight, GDAL only packages here.

> in many cases it's more reasonable to let the
> application (using the GDAL binaries) decide how to make a proper
> installer to run their application smoothly.

Hmm -- that's the trick -- are the Python (and Perl, and...) bindings an 
"application (using the GDAL binaries)", or are they part of GDAL? In 
many cases, the python bindings are a completely separate project from 
the library they bind, so it's a clear distinction, but not in this case.

This makes me think, though -- maybe I should think about this 
differently -- I'm trying to get the GDAL command line tools, and the 
Python bindings. Maybe I should simply consider those as separate issues 
altogether -- they don't need to share the same binaries. In that case, 
maybe the python bindings should be statically linked, or deliver the 
dlls with the bindings, and be available as an entirely stand-alone 
installer.

Indeed, having said that, I'm looking around and see that someone is 
doing that:

http://www.lfd.uci.edu/~gohlke/pythonlibs/

very nice -- I'll have to give those a test.

>     4) it might be nice if the install location for the utilities got
>     put on the user's PATH -- I don't know how hard that is in an
>     installer -- Windows really sucks in that regard.
>
> I don't think it would be beneficial in most cases. This could easily
> break other applications (using the dll-s with the same names) to fail
> unexpectedly.

I was thinking the executable utilities, not the dlls, but Windows does 
conflate those PATHs, doesn't it? (sigh)

Anyway, next time I update my Windows system (which I'll need to do 
soon), I'll think about these issues some more.

A couple notes on:

http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries

Looking again at that page, I'm reminded why this has seemed painful. 
Under the Windows section:

"""
Minimalist windows executables are available at:

      http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip
"""

these are out of date -- if they are going to exist, they really should 
be updated. They are hosted by osgeo, and thus look "official".

"""
Other plugins will be added in the same location (such as Oracle/OCI):

      http://download.osgeo.org/gdal/win32/
"""

How well maintained is this set?

"""
A more featureful set of windows binaries, including python, proj and c# 
support is available as part of the  FWTools package.
"""

no longer kept up to date, either.

"""
Windows binaries built in MinGW are available at:

      http://map.hut.fi/files/Geoinformatica/win32/

The Geoinformatica-yy-mm-dd.zip contains GDAL (usually a development 
version), Perl-GDAL, Perl, and many other things.
"""

good for MinGW users, I suppose -- I remember them not working for me, 
tough I can't recall how or why not. They also suffer from perhaps 
trying to be too much (though if it all worked, I wouldn't care, I have 
a fast network and large hard drive)


"""
Tamas Szekeres maintains a complete set of Win32 and Win64 binary 
packages (compiled with VC2003/VC2005/VC2008) available at the following 
location.

      http://vbkto.dyndns.org/sdk/
"""

These are fabulous -- maybe they should be first on the list? Though 
there is a LOT there -- you need to know what you are looking for.

"""
  OSGeo4W is a binary distribution of a broad set of open source 
geospatial software for Win32 environments (Windows XP, Vista, etc). 
OSGeo4W includes GDAL/OGR,  GRASS, MapServer?,  OpenEV,  uDig, as well 
as many other packages (about 70 as of summer 2008).
"""

I think for folks that are primarily FOSS4G folks, this is great. A bit 
of a mess if you just want GDAL though.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From aborruso at tin.it  Wed Jan  5 17:29:42 2011
From: aborruso at tin.it (iomeneandrei)
Date: Wed Jan  5 17:29:44 2011
Subject: [gdal-dev] Re: Mosaic the output of gdal2tiles
In-Reply-To: <loom.20110104T153007-391@post.gmane.org>
References: <1294073940503-5881014.post@n2.nabble.com>
	<loom.20110104T153007-391@post.gmane.org>
Message-ID: <1294266582312-5893838.post@n2.nabble.com>


Hi Rahkonen,
thank you.

Rahkonen Jukka wrote:
> 
> I have a feeling that gdal wms driver might be able to do it.  See
> examples at http://gdal.org/frmt_wms.html
> 
This seems the right solution.

best regards

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Mosaic-the-output-of-gdal2tiles-tp5881014p5893838.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/45cfd9c7/attachment.html
From warmerdam at pobox.com  Wed Jan  5 17:32:42 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  5 17:32:46 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
Message-ID: <4D24F18A.60700@pobox.com>

Folks,

Wow, what a lot of discussion.

 From my perspective, I'm pleased with Tamas' provided binaries as a source
for developers who want a GDAL SDK for a particular compiler version and
choice of win32/win64.

I like Jurgen's idea of building a stock GDAL binaries package with an
installer (similar to FWTools) from OSGeo4W packages.

Like some others, I'm also confused by the "correct" way of providing
python binaries.  I'm inclined to provide an included python in a self
installer similar to FWTools, but I'd be pleased if the hardcore
Pythonistas can get the magic ways of producing python binaries for any
Python version working.

Is there someone that wants to take on producing official GDAL binaries
from OSGeo4W with a self installer sort of similar to FWTools, likely
using the mechanism Jurgen described?  I'm interested, but interest hasn't
turned into action over quite a few months of interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jason.roberts at duke.edu  Wed Jan  5 17:43:53 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Jan  5 17:43:59 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
Message-ID: <027e01cbad2a$07da2680$178e7380$@roberts@duke.edu>

Specifically regarding Python programmers who primarily or exclusively use
Windows:

 

The majority of popular Python packages are delivered to Windows users by
one of two mechanisms:

 

1.    A stand-alone installation program (either a .exe or .msi file) that
the user just downloads and runs, often built with the Python "distutils"
technology.

2.    The easy_install mechanism, in which the user starts a shell and types
"easy_install xxxxx".

 

Most Windows users are not familiar with the UNIX way of doing things, in
which the package is compiled and installed from a script. Most Windows
users do not even have a C compiler on their machine.

 

As evidence for the popularity of #1, just look at the installation
statistics for popular packages such as scipy or numpy. For example, the
Python 2.6 .exe installer for scipy 0.8.0 currently has 28417 downloads,
while the source code (.tar.gz file) currently has 14403 downloads. As UNIX
users will be downloading the source code and not the Windows executable,
the 14403 is likely to be a lot of UNIX users and few Windows users. As you
can see, the vast majority of Windows scipy users prefer to install it via
the GUI installation program rather than the source code.

 

Right now, to install the latest GDAL for Python on Windows, the user has to
download a zip file from http://vbkto.dyndns.org/sdk/, drill in to find the
Python files, copy them to C:\PythonXX\Lib\site-packages, drill into find
the GDAL binaries and related files, copy them to a directory such as
C:\GDAL, set the PATH and GDAL environment variables, and so on. And there
are no obvious instructions anywhere about how to do this. Python
programmers are programmers after all, so they can generally figure that out
and accomplish it. But it is not what they are used to doing if they are a
Windows programmer. This is why Chris basically says that he has to remember
/ relearn how to do it every time he upgrades GDAL.

 

It would be really helpful to Windows Python programmers who want to use
GDAL-probably a large number of potential GDAL users-for the GDAL team to
offer installation via one or both of the mechanisms I mentioned above.

 

Best,

Jason

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tamas Szekeres
Sent: Wednesday, January 05, 2011 4:37 PM
To: Christopher Barker
Cc: gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

 

 

2011/1/5 Christopher Barker <Chris.Barker@noaa.gov>


1) It would be nice to have binaries for the latest release front and center
at the main GDAL site -- having to poke around to find Tamas's site is not a
big deal, but not always obvious.


Chris,

With regards to the comment above, while I'm not sure about the objectives
but I don't think the GDAL site would intend to be a hosting provider of
various binary packages, the most reasonable thing is to put the references
pointing the user to the correct locations which has already been done, see
the "Downloads" section at http://www.gdal.org/

2) A standard install location would be good. As I've messed with this each
time, I never know where stuff should go -- maybe installers would help with
that


This doesn't seem to be decisive requirement to me. We may also create a
definite location in the hard drive to host such files (which can be
remembered later). Or some other folks may prefer installing these files
along with their applications or keep such files in separate - project
specific - directories. We may also have a requirement to deploy and run
these applications from portable locations (ie. from CD or a flash drive).
Another issue of an installer may be due to a single product key along with
the setup which would prevent from installing multiple versions side by side
in the same environment.
 

3) If there is a standard install location, then "easy_install gdal" (or
setup.py build, or...) could work for the python bindings.


I admit I don't have enough knowledge about the 'magic' tricks related to
python-ish way installing applications. I expect that most 'magic' are
implemented by copying the files at certain locations, setting some
environment variables or regkey entries. However I might also consider
running a custom application with gdal not necessarily be the responsibility
of a GDAL package. You might also want to install python from a separate
installer (either ActivePython, python.org whatever) and run the application
direcly from a command prompt where the environments are set to run the gdal
applications properly. Most of these packages provide the required .bat file
to setup the environment this way.
 

Another option is to have a binary installer for the python bindings that
includes gdal and the gdal utilities -- that would be great for users like
me, but I don't know how common my use case is. In that case, you'd want to
support a few recent pythons versions, the python.org binaries: 2.6, 2.7,
3.1 (maybe 2.5 too).


I don't know much about this either. This may however be doable for those
guys who know the Python packaging approach well enough. I don't think eiter
of the packages referred at
http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries would support this
feature though.

 

One of the tricks here is which numpy to support, etc. numpy has been pretty
good with binary compatibility lately (except for one mistake recently that
was corrected)


Not sure how this be related to a GDAL binary distribution, as far as I
remember numpy can be installed to the Python deployment directly. 

 

However, I DON'T want gdal to give me  Python -- I use Python for too many
other things for that.


Yes, adding more runtime environments to a simple GDAL package makes it more
heavy weighted. Would also be reasonable to include the Perl environment or
a .NET framework installer for example to make it more complete. However, in
many cases it's more reasonable to let the application (using the GDAL
binaries) decide how to make a proper installer to run their application
smoothly.

 

4) it might be nice if the install location for the utilities got put on the
user's PATH -- I don't know how hard that is in an installer -- Windows
really sucks in that regard.

 


I don't think it would be beneficial in most cases. This could easily break
other applications (using the dll-s with the same names) to fail
unexpectedly. I would prefer to keep the applications isolated (setting the
environment variables specifically to the process and not the user/system)
as much as possible.

An installer would better enforce a standard install location. You could
also have a custom DOS box with a menu entry that set up the environment for
the command line tools (maybe only PATH?), provide an uninstaller, and of
course, give the Windows users a nice warm and fuzzy feeling.


The 'nice warm and fuzzy feeling' is a good objective indeed, setting up an
entry on the start menu instead of a running the batch file directly may
also be an advantage. While I'm not sure starting a DOS prompt would
validate an installer by it's own, I can see this requirement to be valid in
most cases.

 

With regard to Python, an installer could see what Python the user has and
install the bindings for that version. Not that I have any idea how to build
that!


Agreed, but I have no idea either.
 

Inno Setup is a very nice free installer, by the way.

 


I would also add Wix <http://wix.sourceforge.net/>  to the list.
 

Best regards,

Tamas



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/499a4129/attachment-0001.html
From szekerest at gmail.com  Wed Jan  5 18:12:29 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  5 18:12:32 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <-1046229538008938668@unknownmsgid>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
Message-ID: <AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>

2011/1/5 Jason Roberts <jason.roberts@duke.edu>

>
> Right now, to install the latest GDAL for Python on Windows, the user has
> to download a zip file from http://vbkto.dyndns.org/sdk/, drill in to find
> the Python files, copy them to C:\PythonXX\Lib\site-packages, drill into
> find the GDAL binaries and related files, copy them to a directory such as
> C:\GDAL, set the PATH and GDAL environment variables, and so on. And there
> are no obvious instructions anywhere about how to do this. Python
> programmers are programmers after all, so they can generally figure that out
> and accomplish it. But it is not what they are used to doing if they are a
> Windows programmer. This is why Chris basically says that he has to remember
> / relearn how to do it every time he upgrades GDAL.
>
>
>
> It would be really helpful to Windows Python programmers who want to use
> GDAL?probably a large number of potential GDAL users?for the GDAL team to
> offer installation via one or both of the mechanisms I mentioned above.
>
>

Jason,

Maybe this is due to my lack of knowledge in Python, but why is it a
requirement to place the files to such specific locations to run a python
app with gdal on Windows? As far as I remember setting up the following
environment variables properly (in a command prompt) does the right thing
from arbitrary locations (at least when running the autotest suite for
GDAL):

PROJ_LIB
GDAL_DRIVER_PATH
GDAL_DATA
PYTHONPATH
PATH

Certainly one should find out the location of the python.exe which might
also be included in PATH for convenience.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/ef0a7bc9/attachment.html
From szekerest at gmail.com  Wed Jan  5 18:18:03 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  5 18:18:07 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24EFBD.1050201@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
Message-ID: <AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>

Chris,

Good points below, but having the compiled gdal binaries (and the binaries
of the dependent libraries) in hand, which is the right way to install those
files on Windows? (Assuming we don't provide python.exe and the related
files in the package)? I mean which install actions should be done in
detail?

Best regards,

Tamas



2011/1/5 Christopher Barker <Chris.Barker@noaa.gov>

> It may well be that GDAL has too many different use cases to even have a
> "standard" install, but...
>
>
> On 1/5/11 1:37 PM, Tamas Szekeres wrote:
>
>> 2011/1/5 Christopher Barker <Chris.Barker@noaa.gov
>>    1) It would be nice to have binaries for the latest release front
>>    and center at the main GDAL site -- having to poke around to find
>>    Tamas's site is not a big deal, but not always obvious.
>>
>
>  With regards to the comment above, while I'm not sure about the
>> objectives but I don't think the GDAL site would intend to be a hosting
>> provider of various binary packages,
>>
>
> Well, many (most?) open source packages have "official" binaries hosted on
> its site. It's pretty common to go to a project's site and expect to find a
> way to download binaries right then and there.
>
>
>     2) A standard install location would be good. As I've messed with
>>    this each time, I never know where stuff should go -- maybe
>>    installers would help with that
>>
>> This doesn't seem to be decisive requirement to me.
>>
>
> It's not a strong requirement, but standard defaults do make things easier
> for everyone.
>
>
>  Or some other folks may prefer installing these files
>> along with their applications or keep such files in separate - project
>> specific - directories.
>>
>
> Well, users should certainly be able to do something custom if they want.
> This is all about use-cases -- if you are building a custom app linked
> against GDAL, then you probably want to control where you put things.
>
> However, if you are interested in the command line tools, and using GDAL
> via Python or Perl or ??, then it makes it easier to have a standard
> location.
>
>
> > Another issue of an installer may be due to a single product key
>
>> along with the setup which would prevent from installing multiple
>> versions side by side in the same environment.
>>
>
> Surely there are ways to accommodate that? though "dll hell" is in the
> lexicon for a reason!
>
>
>     3) If there is a standard install location, then "easy_install gdal"
>>    (or setup.py build, or...) could work for the python bindings.
>>
>
>  I admit I don't have enough knowledge about the 'magic' tricks related
>> to python-ish way installing applications.
>>
>
> That's the thing -- there is no magic here. If you are building a python
> extension, you need to tell the build system where its dependencies lie. If
> you are installing a pre-built python extension, then the dependencies need
> to be in a known place (or maybe on the right PATHS -- Windows is pretty
> ugly this way). Which is why a "standard" install location would be a good
> idea.
>
>
>  I might also consider
>> running a custom application with gdal not necessarily be the
>> responsibility of a GDAL package.
>>
>
> well, that depends on whether you consider Python bindings a "custom
> application". In any case, I think it helps third party packages to have
> standard default install locations.
>
> Oh for *nix -- this would be easier if we just could just put stuff in
> /usr/local/...
>
>  You might also want to install python
>> from a separate installer (either ActivePython, python.org
>> <http://python.org> whatever)
>>
>
> True -- but it is very much a standard for third party packages to provide
> binaries for the python.org python build. Again, I'm not suggesting that
> folks should be prevented (or even discouraged) from doing various sorts of
> custom installs, just that there should be defaults, so that it's clear an
> easy for a newbie to know what to to to get things to "just work".
>
>     Another option is to have a binary installer for the python bindings
>>    that includes gdal and the gdal utilities -- that would be great for
>>    users like me, but I don't know how common my use case is. In that
>>    case, you'd want to support a few recent pythons versions, the
>>    python.org <http://python.org> binaries: 2.6, 2.7, 3.1 (maybe 2.5
>> too).
>>
>>
>> I don't know much about this either. This may however be doable for
>> those guys who know the Python packaging approach well enough.
>>
>
> It's not that hard (at lest once GDAL is built), but it is work.
>
>
>  I don't
>> think eiter of the packages referred at
>> http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries would support
>> this feature though.
>>
>
> Agreed -- that's my point!
>
>
>     One of the tricks here is which numpy to support, etc. numpy has
>>    been pretty good with binary compatibility lately (except for one
>>    mistake recently that was corrected)
>>
>>
>> Not sure how this be related to a GDAL binary distribution, as far as I
>> remember numpy can be installed to the Python deployment directly.
>>
>
> yes, but the Python bindings are built against a particular numpy. That's
> OK for version so numpy that are binary compatible, but it potentially
> fragile. Note that with the new extended buffer interface, it should be
> possible to build GDAL with full numpy support, but not have to compile
> against numpy. But I think that's only good for 2.7 and 3.*
>
>
>     However, I DON'T want gdal to give me  Python -- I use Python for
>>    too many other things for that.
>>
>> Yes, adding more runtime environments to a simple GDAL package makes it
>> more heavy weighted.
>>
>
> right -- I think we're talking about lightweight, GDAL only packages here.
>
>
>  in many cases it's more reasonable to let the
>> application (using the GDAL binaries) decide how to make a proper
>> installer to run their application smoothly.
>>
>
> Hmm -- that's the trick -- are the Python (and Perl, and...) bindings an
> "application (using the GDAL binaries)", or are they part of GDAL? In many
> cases, the python bindings are a completely separate project from the
> library they bind, so it's a clear distinction, but not in this case.
>
> This makes me think, though -- maybe I should think about this differently
> -- I'm trying to get the GDAL command line tools, and the Python bindings.
> Maybe I should simply consider those as separate issues altogether -- they
> don't need to share the same binaries. In that case, maybe the python
> bindings should be statically linked, or deliver the dlls with the bindings,
> and be available as an entirely stand-alone installer.
>
> Indeed, having said that, I'm looking around and see that someone is doing
> that:
>
> http://www.lfd.uci.edu/~gohlke/pythonlibs/<http://www.lfd.uci.edu/%7Egohlke/pythonlibs/>
>
> very nice -- I'll have to give those a test.
>
>
>     4) it might be nice if the install location for the utilities got
>>    put on the user's PATH -- I don't know how hard that is in an
>>    installer -- Windows really sucks in that regard.
>>
>> I don't think it would be beneficial in most cases. This could easily
>> break other applications (using the dll-s with the same names) to fail
>> unexpectedly.
>>
>
> I was thinking the executable utilities, not the dlls, but Windows does
> conflate those PATHs, doesn't it? (sigh)
>
> Anyway, next time I update my Windows system (which I'll need to do soon),
> I'll think about these issues some more.
>
> A couple notes on:
>
>
> http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
>
> Looking again at that page, I'm reminded why this has seemed painful. Under
> the Windows section:
>
> """
> Minimalist windows executables are available at:
>
>     http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip
> """
>
> these are out of date -- if they are going to exist, they really should be
> updated. They are hosted by osgeo, and thus look "official".
>
> """
> Other plugins will be added in the same location (such as Oracle/OCI):
>
>     http://download.osgeo.org/gdal/win32/
> """
>
> How well maintained is this set?
>
> """
> A more featureful set of windows binaries, including python, proj and c#
> support is available as part of the  FWTools package.
> """
>
> no longer kept up to date, either.
>
> """
> Windows binaries built in MinGW are available at:
>
>     http://map.hut.fi/files/Geoinformatica/win32/
>
> The Geoinformatica-yy-mm-dd.zip contains GDAL (usually a development
> version), Perl-GDAL, Perl, and many other things.
> """
>
> good for MinGW users, I suppose -- I remember them not working for me,
> tough I can't recall how or why not. They also suffer from perhaps trying to
> be too much (though if it all worked, I wouldn't care, I have a fast network
> and large hard drive)
>
>
> """
> Tamas Szekeres maintains a complete set of Win32 and Win64 binary packages
> (compiled with VC2003/VC2005/VC2008) available at the following location.
>
>
>     http://vbkto.dyndns.org/sdk/
> """
>
> These are fabulous -- maybe they should be first on the list? Though there
> is a LOT there -- you need to know what you are looking for.
>
> """
>  OSGeo4W is a binary distribution of a broad set of open source geospatial
> software for Win32 environments (Windows XP, Vista, etc). OSGeo4W includes
> GDAL/OGR,  GRASS, MapServer?,  OpenEV,  uDig, as well as many other packages
> (about 70 as of summer 2008).
> """
>
> I think for folks that are primarily FOSS4G folks, this is great. A bit of
> a mess if you just want GDAL though.
>
>
> -Chris
>
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/3dab7b3e/attachment-0001.html
From jason.roberts at duke.edu  Wed Jan  5 18:46:31 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Jan  5 18:46:37 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
Message-ID: <029e01cbad32$c7a8a740$56f9f5c0$@roberts@duke.edu>

Tamas,

 

I have a decent amount of experience programming with Python (6 years,
develop my own extension modules, etc) and I have never seen a package that
recommends you install it to a directory of your choice and then modify the
PYTHONPATH environment variable. The standard installation location is the
"site-packages" directory. See http://www.python.org/dev/peps/pep-0250/ for
some background on that.

 

The GDAL team certainly could publish instructions that said "copy the
release-1500-dev\gdal\swig\python\*.py and the osgeo subdirectory directory
to a location of your choice and modify set the PYTHONPATH environment
variable to include that location" but it would be very unusual. GDAL would
likely be the only package that the user encounters with those instructions.
The PYTHONPATH environment variable would likely not even be defined
already. (Although if they have ArcGIS, it would be, because ArcGIS includes
some Python extensions that live in the ArcGIS installation dir.)

 

So, in sum, you could make PYTHONPATH your official solution but it would be
weird. The more traditional route would be to modify the GDAL build scripts
to invoke the existing setup.py with the arguments "bdist --formats=wininst"
to build a Windows installation package (see
http://docs.python.org/distutils/builtdist.html). Ideally, it would also
include a post-install script that could install the GDAL binaries somewhere
(such as a subdir inside \PythonXX\Lib\site-packages\gdal) and set PATH,
PROJ_LIB, GDAL_DRIVER_PATH, and GDAL_DATA to the correct things. I could
potentially help you develop that. It looks like most of what is needed is
already there.

 

Jason

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Wednesday, January 05, 2011 6:12 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org; Christopher Barker
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

 

 

2011/1/5 Jason Roberts <jason.roberts@duke.edu>

 

Right now, to install the latest GDAL for Python on Windows, the user has to
download a zip file from http://vbkto.dyndns.org/sdk/, drill in to find the
Python files, copy them to C:\PythonXX\Lib\site-packages, drill into find
the GDAL binaries and related files, copy them to a directory such as
C:\GDAL, set the PATH and GDAL environment variables, and so on. And there
are no obvious instructions anywhere about how to do this. Python
programmers are programmers after all, so they can generally figure that out
and accomplish it. But it is not what they are used to doing if they are a
Windows programmer. This is why Chris basically says that he has to remember
/ relearn how to do it every time he upgrades GDAL.

 

It would be really helpful to Windows Python programmers who want to use
GDAL-probably a large number of potential GDAL users-for the GDAL team to
offer installation via one or both of the mechanisms I mentioned above.



Jason,

Maybe this is due to my lack of knowledge in Python, but why is it a
requirement to place the files to such specific locations to run a python
app with gdal on Windows? As far as I remember setting up the following
environment variables properly (in a command prompt) does the right thing
from arbitrary locations (at least when running the autotest suite for
GDAL):

PROJ_LIB
GDAL_DRIVER_PATH
GDAL_DATA
PYTHONPATH
PATH

Certainly one should find out the location of the python.exe which might
also be included in PATH for convenience.

Best regards,

Tamas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110105/19558a93/attachment.html
From Chris.Barker at noaa.gov  Wed Jan  5 18:55:47 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Jan  5 18:55:51 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24F18A.60700@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24F18A.60700@pobox.com>
Message-ID: <4D250503.9080405@noaa.gov>

On 1/5/11 2:32 PM, Frank Warmerdam wrote:
>  From my perspective, I'm pleased with Tamas' provided binaries as a source
> for developers who want a GDAL SDK for a particular compiler version and
> choice of win32/win64.

yes, those are great!

> Like some others, I'm also confused by the "correct" way of providing
> python binaries. I'm inclined to provide an included python in a self
> installer similar to FWTools,

This is really nice for folks that aren't using Python for other things, 
but if GDAL is only part of your Python tools stack, not so great.

> but I'd be pleased if the hardcore
> Pythonistas can get the magic ways of producing python binaries for any
> Python version working.

I think it's possible, though I'm not sure about "any"! maybe "the most 
common"

> Is there someone that wants to take on producing official GDAL binaries
> from OSGeo4W

I'm confused about what "from OSGeo4w" means, and I don't know that I 
can "take it on", but I've spent enough time on this thread already, I 
should help out!

On 1/5/11 2:43 PM, Jason Roberts wrote:
> The majority of popular Python packages are delivered to Windows users
> by one of two mechanisms:
>
> 1.A stand-alone installation program (either a .exe or .msi file) that
> the user just downloads and runs, often built with the Python
> ?distutils? technology.
>
> 2.The easy_install mechanism, in which the user starts a shell and types
> ?easy_install xxxxx?.

absolutely true. It's also not that hard to do one of those, once you've 
got the other. Once you've got the .msi building, building a binary egg 
is pretty easy, and then you just have to make sure pypi has the right 
links in place so that people get it with easy_install.

In short, we have one problem to solve, not two.

> Right now, to install the latest GDAL for Python on Windows, the user
> has to download a zip file from http://vbkto.dyndns.org/sdk/, drill in
> to find the Python files, copy them to C:\PythonXX\Lib\site-packages,
> drill into find the GDAL binaries and related files, copy them to a
> directory such as C:\GDAL, set the PATH and GDAL environment variables,
> and so on. And there are no obvious instructions anywhere about how to
> do this. Python programmers are programmers after all, so they can
> generally figure that out and accomplish it. But it is not what they are
> used to doing if they are a Windows programmer. This is why Chris
> basically says that he has to remember / relearn how to do it every time
> he upgrades GDAL.

Good summary -- yes, that's pretty much it.

Which is why I'm saying that if we had a "standard" way that GDAL 
binaries got installed, it would be a lot easier. Then it would be:

1) install GDAL binaries
2) either:
   a) download the source for the python bindings and "setup.py build"
or
   b) run "easy_install gdal" (which would download the source and build 
the binary)

> It would be really helpful to Windows Python programmers who want to use
> GDAL?probably a large number of potential GDAL users?for the GDAL team
> to offer installation via one or both of the mechanisms I mentioned above.

yup.

On 1/5/11 3:12 PM, Tamas Szekeres wrote:
> Maybe this is due to my lack of knowledge in Python, but why is it a
> requirement to place the files to such specific locations to run a
> python app with gdal on Windows?

well, it's not the only way to do it, but it is the most common way.

> As far as I remember setting up the
> following environment variables properly (in a command prompt) does the
> right thing from arbitrary locations (at least when running the autotest
> suite for GDAL):
>
> PROJ_LIB
> GDAL_DRIVER_PATH
> GDAL_DATA
> PYTHONPATH
> PATH

well -- first of all, setting environment variables on Windows is a 
PITA, second of all, is setting all that up easier than what Jason 
described?, and third, PYTHONPATH is a problem, particularly if you have 
more than one version of python installed.

So I think Jason's way is a better option, but it really would be nice 
to do an installer.

so what to do?

This is all complicated because GDAL is many things:
  - a lib that can be used to build your own C/C++, etc. apps
  - a set of command line utilities
  - a python package
  - a package for various other languages
  - a set up utilities written in Python, also.

Being a Pythonista, I'll focus on the Python bits

Question 1:

   Do we want:
a) a binary package for the python bindings that is completely 
stand-alone -- i.e. has its own copy of everything GDAL that it needs, 
and does not share the dlls with anythign else.

b) (a) but sharing the dlls with other things that may need gdal? (other 
language bindings, mapserver, what have you)

c) (a) or (b) plus the python command line tools

d) (a), (b), or (c) plus the compiled command line tools.


As I write this, I realize that maybe using or following OSGeo4w is the 
way to go -- put the gdal binaries wherever OSGeo4w puts them, and 
building the python bindings against that. Essentially letting OSGeo4w 
establish the standard.

To Tamas:

I wonder if there is some confusion about how the python bindings are 
used. You've referred to "setting up an application", making me think 
that you're talking about how to install an application, written in 
Python, that uses GDAL. IN that case I think you've got it right.

However, what I'm thinking of is python developers, casual scripters. In 
this case you want to install python-gdal, and be able to fire up the 
interpreter and type "from osgeo import gdal" and away you go. For that 
use case, Jason has described the install process quite well.

I'm going to do an upgrade/install on my Windows box (actually, I'm 
going to try a VM...) and keep notes to see if I can get it boiled down 
to a precise and repeatable process.

-Chris








-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jef at norbit.de  Wed Jan  5 23:13:19 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed Jan  5 23:13:46 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24F18A.60700@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24F18A.60700@pobox.com>
Message-ID: <20110106041319.GA18401@norbit.de>

Hi Frank,

On Wed, 05. Jan 2011 at 17:32:42 -0500, Frank Warmerdam wrote:
> Is there someone that wants to take on producing official GDAL binaries
> from OSGeo4W with a self installer sort of similar to FWTools, likely
> using the mechanism Jurgen described?  I'm interested, but interest hasn't
> turned into action over quite a few months of interest.

A starting point could be [1].  It's result is [2].


J?rgen 

[1] http://qgis.org/~jef/creatensis.tar.bz2
[2] http://qgis.org/~jef/GDAL-OSGeo4W-1.7.3-Setup.exe

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From sebastian.ovide at gmail.com  Thu Jan  6 04:27:44 2011
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Jan  6 04:28:06 2011
Subject: [gdal-dev] ogr gml
In-Reply-To: <201101051802.29439.Ralf.Suhr@itc-halle.de>
References: <AANLkTik6qqOd2QC+8OiA2hdxvS3M0B92SyzmgXtEm4ao@mail.gmail.com>
	<C4FBA776-E137-4F92-8078-A352CFEA6877@nokia.com>
	<201101051802.29439.Ralf.Suhr@itc-halle.de>
Message-ID: <AANLkTi=pfQwdPUPb+ehs6_zdwt_3cQwdwhtBgogWaTWt@mail.gmail.com>

That is a good news !

On Wed, Jan 5, 2011 at 5:02 PM, Ralf Suhr <Ralf.Suhr@itc-halle.de> wrote:

> Hi Chris,
>
> if you have a newer gdal version (1.8). ogrinfo will produce:
>
> Layer name: AddressPoint
> Geometry: Point
> Feature Count: 1
> Extent: (405525.600000, 628349.000000) - (405525.600000, 628349.000000)
> Layer SRS WKT:
> (unknown)
> version: Integer (0.0)
> versionDate: String (10.0)
> theme: String (7.0)
> matchStatus: String (7.0)
> physicalStatus: String (8.0)
> positionalQuality: String (5.0)
> structureType: String (18.0)
> OSAPR: String (18.0)
> buildingNumber: Integer (0.0)
> thoroughfare: String (8.0)
> dependentLocality: String (7.0)
> postTown: String (7.0)
> postCode: String (8.0)
> deliveryPointSuffix: String (2.0)
> postalAddressDate: String (10.0)
> OGRFeature(AddressPoint):0
>  version (Integer) = 11
>  versionDate (String) = 2009-10-12
>  theme (String) = Address
>  matchStatus (String) = Matched
>  physicalStatus (String) = Existing
>  positionalQuality (String) = Final
>  structureType (String) = Permanent Building
>  OSAPR (String) = AP6DJK8352W7DAUGJG
>  buildingNumber (Integer) = 16
>  thoroughfare (String) = WEST END
>  dependentLocality (String) = CHATTON
>  postTown (String) = ALNWICK
>  postCode (String) = NE66 5PP
>  deliveryPointSuffix (String) = 1Z
>  postalAddressDate (String) = 2003-04-18
>  POINT (405525.6 628349.0)
>
> Gr
> Ralf
>
> Am Mittwoch 05 Januar 2011, 17:19:41 schrieb christopher.schmidt@nokia.com
> :
> > On Jan 5, 2011, at 11:13 AM, ext Sebastian E. Ovide wrote:
> > > Hi All,
> > >
> > > ogrinfo is skiping some fields my gml files....
> > >
> > > for example the fields addressStatus, matchStatus, physicalStatus,
> > > positionalQuality and structureType are not read...
> >
> > Those are complex fields, which OGR doesn't handle.
> >
> > -- Chris
> >
> > > <osgb:addressPointMember>
> > > <osgb:AddressPoint fid='osgb1000002193000088'>
> > > <osgb:version>11</osgb:version>
> > > <osgb:versionDate>2009-10-12</osgb:versionDate>
> > > <osgb:theme>Address</osgb:theme>
> > > <osgb:addressStatus>
> > > <osgb:matchStatus>Matched</osgb:matchStatus>
> > > <osgb:physicalStatus>Existing</osgb:physicalStatus>
> > > <osgb:positionalQuality
> > > accuracy='Surveyed'>Final</osgb:positionalQuality>
> > > <osgb:structureType>Permanent Building</osgb:structureType>
> > > </osgb:addressStatus>
> > > <osgb:OSAPR>AP6DJK8352W7DAUGJG</osgb:OSAPR>
> > > <osgb:point>
> > > <gml:Point srsName='osgb:BNG'>
> > > <gml:coordinates>405525.600,628349.000</gml:coordinates>
> > > </gml:Point>
> > > </osgb:point>
> > > <osgb:postalAddress>
> > > <osgb:buildingNumber>16</osgb:buildingNumber>
> > > <osgb:thoroughfare>WEST END</osgb:thoroughfare>
> > > <osgb:dependentLocality>CHATTON</osgb:dependentLocality>
> > > <osgb:postTown>ALNWICK</osgb:postTown>
> > > <osgb:postCode type='Small'>NE66 5PP</osgb:postCode>
> > > <osgb:deliveryPointSuffix>1Z</osgb:deliveryPointSuffix>
> > > </osgb:postalAddress>
> > > <osgb:postalAddressDate>2003-04-18</osgb:postalAddressDate>
> > > <osgb:referenceToTopographicArea xlink:href='#osgb1000036885604'/>
> > > </osgb:AddressPoint>
> > > </osgb:addressPointMember>
> > >
> > > any ideas ?
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/7e9c6d38/attachment-0001.html
From clement.tisseuil at gmail.com  Thu Jan  6 04:48:31 2011
From: clement.tisseuil at gmail.com (=?UTF-8?Q?Cl=C3=A9ment_Tisseuil?=)
Date: Thu Jan  6 04:48:34 2011
Subject: [gdal-dev] SAGA: problem to convert grid from ETRS 89 / ETRS-LAEA
	to WGS84 CRS
Message-ID: <AANLkTineNCTBvVhaGUci5NmfvJAoWMDjk9JEV1942rRL@mail.gmail.com>

Dear all,

I try to convert a SAGA grid (SAGA), from a ETRS 89 / ETRS-LAEA  to WGS84
CRS , but I get the following error message:

gdalwarp -s_srs "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000
+ellps=GRS80 +units=m +no_defs" -t_srs "+proj=longlat +ellps=WGS84
+datum=WGS84 +no_defs" -r near -of SAGA hdr.sdat ./tmp/hdr.sdat

Creating output file that is 39901P x 15248L.
ERROR 1: Invalid dataset dimensions : -25635 x 15248

Any ideas ?

Thanks in advance.

-- 
Cl?ment
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/e2f536b1/attachment.html
From ari.jolma at gmail.com  Thu Jan  6 05:15:30 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Jan  6 05:15:35 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
Message-ID: <4D259642.7000309@gmail.com>

On 01/06/2011 01:18 AM, Tamas Szekeres wrote:
> Chris,
>
> Good points below, but having the compiled gdal binaries (and the 
> binaries of the dependent libraries) in hand, which is the right way 
> to install those files on Windows? (Assuming we don't provide 
> python.exe and the related files in the package)? I mean which install 
> actions should be done in detail?

>
>
> 2011/1/5 Christopher Barker:
>
>     """
>     Windows binaries built in MinGW are available at:
>
>     http://map.hut.fi/files/Geoinformatica/win32/
>
>     The Geoinformatica-yy-mm-dd.zip contains GDAL (usually a
>     development version), Perl-GDAL, Perl, and many other things.
>     """
>
>     good for MinGW users, I suppose -- I remember them not working for
>     me, tough I can't recall how or why not. They also suffer from
>     perhaps trying to be too much (though if it all worked, I wouldn't
>     care, I have a fast network and large hard drive)
>

I found it impossible to deliver a Windows binary solution, which would 
depend on the three main packages (Perl, GTK+, and GDAL) to be retrieved 
as binaries from some standard location - that's why I bundle them all 
together into a quite large (32MB) package.

When I started there was only ActivePerl for Windows that was usable, 
but it turned out impossible for me to use because they use MS 
compilers. Now there is Strawberry Perl, which I might try again (or pay 
someone to try). It is good because it uses MinGW.

There are binary installers for GTK+ for Windows, which install them 
into a shared location - but there are problems still and some pieces 
are missing that I need (Glade for example). The official GTK+ site has 
a long list of zips containing binaries. Despite the shared nature of 
GTK+, many projects include own binaries of them in Windows due to 
version mismatches etc.

GDAL is available but again typically as MS compiler builds - which 
should not be a problem in theory because the bindings use it through 
the C API. I've tried to use those a couple of times without luck 
(compiling the bindings in MinGW was the problem). Maybe I should try 
again using binaries from Tamas' site.

I agree that there could be a one main site for GDAL Windows binaries 
(something like http://www.gtk.org/download-windows.html). Tamas' site 
looks good but I'd like to have dev packages also (the SDK packages 
there look old) - just the header files should be enough.

Then there could also be a more end-user type Windows installation 
package project for GDAL, which installs the stuff into some standard 
location (c:\Program Files\share?). For GTK+ that's provided by some 
folks at http://sourceforge.net/projects/gtk-win/

It would be neat to be able to just put to the Geoinformatica Windows 
installer subinstallations, which go and get Perl, GTK+ and GDAL for the 
user if she does not yet have them or has too old ones. In fact 
Geoinformatica should be simply installable through Perl's cpan 
application - but that does not even work in Linux yet :( (the reason is 
that the GDAL Perl module installation script is not intelligent enough 
and the version of the module in CPAN is horribly old and I really suck 
at managing that)

Best regards,

Ari

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/b393bbdd/attachment.html
From szekerest at gmail.com  Thu Jan  6 06:38:36 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 06:38:40 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D259642.7000309@gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
Message-ID: <AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>

2011/1/6 Ari Jolma <ari.jolma@gmail.com>

>
> GDAL is available but again typically as MS compiler builds - which should
> not be a problem in theory because the bindings use it through the C API.
> I've tried to use those a couple of times without luck (compiling the
> bindings in MinGW was the problem). Maybe I should try again using binaries
> from Tamas' site.
>
> I agree that there could be a one main site for GDAL Windows binaries
> (something like http://www.gtk.org/download-windows.html). Tamas' site
> looks good but I'd like to have dev packages also (the SDK packages there
> look old) - just the header files should be enough.
>
>
Ari,

The SDK packages from http://vbkto.dyndns.org/sdk/ are exactly the same
which have been used to compile the daily builds, so it should be up to
date. The only thing may have to be done is to download the required version
of the gdal sources in the root folder, because not all of the versions
included in the package in order to keep the size as small as possible.

BTW: What is the desired practice to install the gdal files + bindings along
with a pre-installed perl runtime on Windows? Something like we have been
discussing for python in this thread, do we have some desired install
locations, environment settings or packaging conventions?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/74448967/attachment.html
From j.l.h.hartmann at uva.nl  Thu Jan  6 07:00:26 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Jan  6 07:21:07 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D24F18A.60700@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24F18A.60700@pobox.com>
Message-ID: <4D25AEDA.7000302@uva.nl>

Three months ago I put an announcement on the MapServer-Users list about 
a shell script I wrote to compile the whole MapServer-GDAL-PostGIS-PLR 
suite, with and without PHP/Python, in a separate user directory using 
only two commands. Separate installations can coexist in separate 
directory trees and all parameters of all programs can be adapted for 
eacht installation. Apache, PHP, PostGIS and Python are installed for 
each installation separately. The binaries can be transported to 
computers with the same system libraries. Since then,I tried it out on 
dozens of Virtual Machines in a Cloud virtual environment on Suse, 
Fedora and (prefered) Debian virtual machines, and it works for me 
without glitches. It's something like a low-level replacement for 
FWTools (actually, I wrote it when I heard from Frank that FWTools 
wasn't supported at the moment). It's Linux-only, although porting it to 
Windows should be possible with a msys/cygwin shell, even for native 
compiles.

Since then I got no (zero) replies, so I don't know whether it doesn't 
work, isn't interesting, or people just didn't look at it. If it's worth 
your time and answers some of the questions from this discussion, please 
have a look and let me know what you think of it. And that includes 
"doesn't work, not interesting, not adaptable enough, downright stupid". 
Here is the MS-Users posting:

http://lists.osgeo.org/pipermail/mapserver-users/2010-October/066898.html

Cheers,

Jan

On 01/05/11 23:32, Frank Warmerdam wrote:
> Folks,
>
> Wow, what a lot of discussion.
>
> From my perspective, I'm pleased with Tamas' provided binaries as a 
> source
> for developers who want a GDAL SDK for a particular compiler version and
> choice of win32/win64.
>
> I like Jurgen's idea of building a stock GDAL binaries package with an
> installer (similar to FWTools) from OSGeo4W packages.
>
> Like some others, I'm also confused by the "correct" way of providing
> python binaries.  I'm inclined to provide an included python in a self
> installer similar to FWTools, but I'd be pleased if the hardcore
> Pythonistas can get the magic ways of producing python binaries for any
> Python version working.
>
> Is there someone that wants to take on producing official GDAL binaries
> from OSGeo4W with a self installer sort of similar to FWTools, likely
> using the mechanism Jurgen described?  I'm interested, but interest 
> hasn't
> turned into action over quite a few months of interest.
>
> Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/6e67e298/attachment.html
From szekerest at gmail.com  Thu Jan  6 07:24:17 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 07:24:21 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <1214917644023838416@unknownmsgid>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
	<1214917644023838416@unknownmsgid>
Message-ID: <AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>

Jason,

I appreciate the expertise for all of you along with this thread, I could
already gather quite some useful information from here for this reason. I
must mention that my programming practice in Python can be considered as
zero, this is the main reason that my issues may have trivial solutions for
the hardcore pythonists but not trivial to me. Apologies for this
inconvenience :-)

Getting back to the original topic, you mention that the gdal binaries
should be installed somewhere an set PATH, GDAL_DATA, PROJ_LIB and
GDAL_DRIVER_PATH as a systemwide setting. This is where the problems of mine
are starting. Modifying the PATH globally is a bad practice in 99% of the
cases. The only case I'm aware of which may not be a problem when we make
sure that only one version of such files (dll-s and executables) will ever
be installed to a particular system. But this is not the case with the gdal
binaries as I would expect at least a development or a stable version (and
their x86/x64 variants) to coexist which should be used by the same user.
The same problem may arise when we would like to install multiple versions
to the site packages directory, how the versions of the files are maintained
by the python runtime? In this regard I could mention something like what
have been done with the .NET framework with the multiple versions of the
packages installed simultaneously in the global assembly cache. The
individual packages may specify the required minimum version of the referred
packages loaded by the .NET runtime. Is this something that can be done with
the python environment as well?

(As opposed to this, the dumb solution of having a starting script to open a
command prompt (and setting PYTHONPATH properly) would ensure multiple
versions to be used at the same time, since those settings are applyed to
the cmd process solely.)

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/0bc58a03/attachment-0001.html
From Volker.Wichmann at uibk.ac.at  Thu Jan  6 07:27:01 2011
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Thu Jan  6 07:29:30 2011
Subject: [gdal-dev] SAGA: problem to convert grid from ETRS 89 / ETRS-LAEA
	to WGS84 CRS
In-Reply-To: <AANLkTineNCTBvVhaGUci5NmfvJAoWMDjk9JEV1942rRL@mail.gmail.com>
References: <AANLkTineNCTBvVhaGUci5NmfvJAoWMDjk9JEV1942rRL@mail.gmail.com>
Message-ID: <4D25B515.3090804@uibk.ac.at>

This seems to me like an integer overflow - looking at the GDAL 1.7.2 
sources I see, that the WriteHeader() method of sagadataset.cpp is using

GInt16 nXSize, GInt16 nYSize

Most likely this should be changed to

int nXSize, int nYSize


Best regards,
Volker



Am 06.01.2011 10:48, schrieb Cl?ment Tisseuil:
> Dear all,
>
> I try to convert a SAGA grid (SAGA), from a ETRS 89 / ETRS-LAEA  to
> WGS84 CRS , but I get the following error message:
>
> gdalwarp -s_srs "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
> +y_0=3210000 +ellps=GRS80 +units=m +no_defs" -t_srs "+proj=longlat
> +ellps=WGS84 +datum=WGS84 +no_defs" -r near -of SAGA hdr.sdat ./tmp/hdr.sdat
>
> Creating output file that is 39901P x 15248L.
> ERROR 1: Invalid dataset dimensions : -25635 x 15248
>
> Any ideas ?
>
> Thanks in advance.
>
> --
> Cl?ment
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Thu Jan  6 08:01:45 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 08:01:47 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D250503.9080405@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24F18A.60700@pobox.com> <4D250503.9080405@noaa.gov>
Message-ID: <AANLkTikvVwD_eV8oV0PC74+CXQYxfDqPH4ZL=RFYgpow@mail.gmail.com>

2011/1/6 Christopher Barker <Chris.Barker@noaa.gov>

>
> On 1/5/11 3:12 PM, Tamas Szekeres wrote:
>
>> As far as I remember setting up the
>> following environment variables properly (in a command prompt) does the
>> right thing from arbitrary locations (at least when running the autotest
>> suite for GDAL):
>>
>> PROJ_LIB
>> GDAL_DRIVER_PATH
>> GDAL_DATA
>> PYTHONPATH
>> PATH
>>
>
> well -- first of all, setting environment variables on Windows is a PITA,
> second of all, is setting all that up easier than what Jason described?, and
> third, PYTHONPATH is a problem, particularly if you have more than one
> version of python installed.
>
>


Chris,

I did mention to set the environment for the cmd process solely, and not by
a systemwide setting. In this regard it doesn't matter how many python
runtime is installed on a particular system, the only issue is to refer to
the desired one (by setting the PATH to the python executable or using
absolute path when running python) from the command prompt.




> As I write this, I realize that maybe using or following OSGeo4w is the way
> to go -- put the gdal binaries wherever OSGeo4w puts them, and building the
> python bindings against that. Essentially letting OSGeo4w establish the
> standard.
>
>
The main issue I'm encountering with OSGeo4w is the problem supporting
multiple versions side by side which may trigger some problem for the
packages, for example:

1. If we would provide both x32 and x64 binaries how to ensure that each dll
or executable would load the corresponding version (by setting the PATH,
GDAL_DIVER_PATH in a different way whatever).
2. Most packages are from different sources so when compiling my package (ie
mapserver) I should rely on the dependent packages (like gdal) to compile
mapserver and then submit my package to the OSGeo4w repository. It wouldn't
be a best pactice to use my version of gdal at compile time, and let the
user rely on another version at run time. When upgrading gdal we should make
sure to upgrade the compilation of mapserver or provide having the older
version of gdal side by side which confuses the user.
3. Similar issue may exist with the multiple CRT dependencies privided by
the packages, for example when I would package my vesion of mapserver
compiled with MSVC2008 but we have only gdal-dev packages compiled with
MSVC2003 out there.


I wonder if there is some confusion about how the python bindings are used.
> You've referred to "setting up an application", making me think that you're
> talking about how to install an application, written in Python, that uses
> GDAL. IN that case I think you've got it right.
>
> However, what I'm thinking of is python developers, casual scripters. In
> this case you want to install python-gdal, and be able to fire up the
> interpreter and type "from osgeo import gdal" and away you go. For that use
> case, Jason has described the install process quite well.
>
>
Hmmm.. only for that reason fireing up the interpreter from a command prompt
(where PYTHONPATH has already been set) would probably work as well. But
indeed we may speak about different things, you may probably want to install
a single version of the gdal packages throughout the system, while I'd be
curious about the desired approach to host multiple versions side by side.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/9ab15a1a/attachment.html
From ari.jolma at gmail.com  Thu Jan  6 08:10:33 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Jan  6 08:10:37 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
Message-ID: <4D25BF49.4020207@gmail.com>

On 01/06/2011 01:38 PM, Tamas Szekeres wrote:
>
> 2011/1/6 Ari Jolma <ari.jolma@gmail.com <mailto:ari.jolma@gmail.com>>
>
>
>     GDAL is available but again typically as MS compiler builds -
>     which should not be a problem in theory because the bindings use
>     it through the C API. I've tried to use those a couple of times
>     without luck (compiling the bindings in MinGW was the problem).
>     Maybe I should try again using binaries from Tamas' site.
>
>     I agree that there could be a one main site for GDAL Windows
>     binaries (something like
>     http://www.gtk.org/download-windows.html). Tamas' site looks good
>     but I'd like to have dev packages also (the SDK packages there
>     look old) - just the header files should be enough.
>
>
> Ari,
>
> The SDK packages from http://vbkto.dyndns.org/sdk/ are exactly the 
> same which have been used to compile the daily builds, so it should be 
> up to date. The only thing may have to be done is to download the 
> required version of the gdal sources in the root folder, because not 
> all of the versions included in the package in order to keep the size 
> as small as possible.

By the age I meant that the SDK packages are old releases (from 1310 to 
1600 and not trunk for example - do I understand the release names 
correctly?)

>
> BTW: What is the desired practice to install the gdal files + bindings 
> along with a pre-installed perl runtime on Windows? Something like we 
> have been discussing for python in this thread, do we have some 
> desired install locations, environment settings or packaging conventions?

CPAN has only sources, thus cpan application which is the standard to 
download and install perl modules expects you to have a compiler.

ActivePerl (in fact ActiveState, the company) maintains a repository of 
perl modules in binary versions, from where they can be simply 
downloaded and installed with another program. ActivePerl has tools for 
developing those binary packages. That's very similar to what Python 
has. I think ActiveState maintains its repository by itself - so if I 
just make the CPAN module intelligent enough it may end up there 
eventually. I think my Geo::Shapelib module was/is there.

I think it would not make sense to include GDAL into such a binary perl 
module package. Thus GDAL would need to be separately installable - the 
module installer could probably be made to offer install it for the user 
if it existed somewhere.

In short /me thinks the requirements are: 1) /me develop the perl 
bindings configure & make procedure better 2) we make GDAL-dev.msi 
available at an URL.

Ari

>
>
> Best regards,
>
> Tamas
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/30d61e29/attachment.html
From szekerest at gmail.com  Thu Jan  6 08:25:23 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 08:25:28 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D25BF49.4020207@gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
	<4D25BF49.4020207@gmail.com>
Message-ID: <AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>

2011/1/6 Ari Jolma <ari.jolma@gmail.com>

>
> By the age I meant that the SDK packages are old releases (from 1310 to
> 1600 and not trunk for example - do I understand the release names
> correctly?)
>
>
>
Ari,

Those numbers are MSVC compiler numbers (according to
http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt) not gdal version
numbers.

CPAN has only sources, thus cpan application which is the standard to
> download and install perl modules expects you to have a compiler.
>
> ActivePerl (in fact ActiveState, the company) maintains a repository of
> perl modules in binary versions, from where they can be simply downloaded
> and installed with another program. ActivePerl has tools for developing
> those binary packages. That's very similar to what Python has. I think
> ActiveState maintains its repository by itself - so if I just make the CPAN
> module intelligent enough it may end up there eventually. I think my
> Geo::Shapelib module was/is there.
>
> I think it would not make sense to include GDAL into such a binary perl
> module package. Thus GDAL would need to be separately installable - the
> module installer could probably be made to offer install it for the user if
> it existed somewhere.
>
>
This is also the case with python and the other bindings: the gdal dll-s and
dependencies should also be installed somewhere. Assuming we install the
gdal-perl modules in a standard location (not sure where it is), do we have
a common mechanism in the perl runtime to find the dependent dlls without
having to violate system wide settings (like the PATH environment variable)?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/4ffc89d1/attachment-0001.html
From ari.jolma at gmail.com  Thu Jan  6 08:49:22 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Jan  6 08:49:25 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>	<4D259642.7000309@gmail.com>	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>	<4D25BF49.4020207@gmail.com>
	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
Message-ID: <4D25C862.4040601@gmail.com>

On 01/06/2011 03:25 PM, Tamas Szekeres wrote:
>
> Assuming we install the gdal-perl modules in a standard location (not 
> sure where it is), do we have a common mechanism in the perl runtime 
> to find the dependent dlls without having to violate system wide 
> settings (like the PATH environment variable)?

:) I'm not completely satisfied (I'm also not sure I really understand 
the whole f* issue) with how Perl searches for dll's - especially dll 
import libs - in Windows.

But that's configure/compile time issue. In compile time a Perl GDAL dll 
(for the bindings) is created and put into some location, which is known 
to Perl and Perl knows how to find it in runtime.

Assuming I've built the binaries, then in runtime (when the GDAL module 
is called for) I think somebody (because the Perl GDAL module dll has a 
link to GDAL dll that was put there in compile time) asks for the GDAL 
dll's and they simply need to be available. Thus, if there is GDAL in 
the system (for example in c:\Program Files\Share\GDAL\bin) then that 
path needs to be in the PATH - I don't think there is a way around that. 
The PATH may be a temporary PATH set by somebody for Perl programs, but 
I think the policy should be that when you run GDAL.msi, the system 
default PATH is modified to have the path to the GDAL binaries.

Best regards,

Ari

From szekerest at gmail.com  Thu Jan  6 09:50:46 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 09:50:50 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D25C862.4040601@gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
	<4D25BF49.4020207@gmail.com>
	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
	<4D25C862.4040601@gmail.com>
Message-ID: <AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>

Ari

The only wokaround which is satisfactory to me is to set the required
enviroment at run time before the gdal bindings are used. In csharp we can
do something like:

                    string path =
Environment.GetEnvironmentVariable("PATH");
                    if (!path.Contains(gdal_bin_path))
                    {
                        Environment.SetEnvironmentVariable("PATH",
gdal_bin_path + ";" + path);
                    }
                    Gdal.SetConfigOption("GDAL_DRIVER_PATH",
gdal_driver_path);

But it requires that loading the gdal dll is happening when the interface is
used actually (in Gdal.SetConfigOption with the code above). This is the
case with the .NET runtime,  but I'm not sure how do we stand with the other
bindings in this regard.

Futher problem with this solution is that this startup code should be placed
in the user's script and not sure how this could be implemented in the gdal
bindings itself.

Best regards,

Tamas




2011/1/6 Ari Jolma <ari.jolma@gmail.com>

> On 01/06/2011 03:25 PM, Tamas Szekeres wrote:
>
>>
>> Assuming we install the gdal-perl modules in a standard location (not sure
>> where it is), do we have a common mechanism in the perl runtime to find the
>> dependent dlls without having to violate system wide settings (like the PATH
>> environment variable)?
>>
>
> :) I'm not completely satisfied (I'm also not sure I really understand the
> whole f* issue) with how Perl searches for dll's - especially dll import
> libs - in Windows.
>
> But that's configure/compile time issue. In compile time a Perl GDAL dll
> (for the bindings) is created and put into some location, which is known to
> Perl and Perl knows how to find it in runtime.
>
> Assuming I've built the binaries, then in runtime (when the GDAL module is
> called for) I think somebody (because the Perl GDAL module dll has a link to
> GDAL dll that was put there in compile time) asks for the GDAL dll's and
> they simply need to be available. Thus, if there is GDAL in the system (for
> example in c:\Program Files\Share\GDAL\bin) then that path needs to be in
> the PATH - I don't think there is a way around that. The PATH may be a
> temporary PATH set by somebody for Perl programs, but I think the policy
> should be that when you run GDAL.msi, the system default PATH is modified to
> have the path to the GDAL binaries.
>
> Best regards,
>
> Ari
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/07282900/attachment.html
From jason.roberts at duke.edu  Thu Jan  6 10:25:00 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 10:25:07 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
	<1214917644023838416@unknownmsgid>
	<AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>
Message-ID: <02e801cbadb5$e2823120$a7869360$@roberts@duke.edu>

Tamas,

 

Apologies in advance for repeating stuff below that you already know.

 

Assuming we have the scenario of a Windows Python programmer wants to use
GDAL from Python like he uses other Python packages, and is not interested
in running GDAL command-line utilities or accessing GDAL by other means,
then all he needs is the GDAL Python bindings coupled with the GDAL DLLs and
associated supporting files. He doesn't really care about those DLLs and
supporting files; he just wants the Python bindings to work with a minimum
of steps. Ideally, he would just be able to start the GDAL installer, click
Next the next button four times, accepting all the default choices like he
does with any other Python package installer, watch the progress bar, and
then be able to import the osgeo modules from Python when it is complete.

 

In this scenario, Python is already installed. Multiple versions of it may
be installed. Python supports side-by-side installation of any number and
combination of versions. The default installation location is C:\PythonXY
where XY are the major and minor version numbers. If the user accepted the
defaults when he installed Python itself, that's where it will be. (That
somewhat violates Microsoft's best practice of storing programs in
C:\Program Files. I'm sure there's a long thread on that somewhere in the
Python mailing list archives, but I've never seen it.) Certain applications
that embed Python may choose a different location. For example, ArcGIS 10
includes a copy of Python 2.6 and ESRI decided to store it in
C:\Python26\ArcGIS10.0. I'm not sure what that was done, but it doesn't
really matter.

 

Python's installer maintains a list of which versions are installed and the
installation locations in the Windows Registry (a system-wide database of
config info). When a package installation program runs, assuming it was
built with the standard Python distutils technology I mentioned, it prompts
the user with a list of installed Python instances and asks which one he
wants to install he package to. The user picks one and the package files are
installed to the "site-packages" directory within that Python instance. This
will be, for example, C:\Python26\Lib\site-packages.

 

If a Python package includes extension modules, i.e. Python modules written
in C/C++ rather than Python, they are compiled by Python to .pyd files.
These are actually DLLs; they just have the extension .pyd rather than .dll
and must contain a certain entry point that Python can call after loading
them. GDAL includes several of these, such as _gdal.pyd, _gdal_array.pyd,
and so on. These modules "implicltly" link to the GDAL DLLs such as
gdal17.dll. Therefore, in order for Python to successfully load _gdal.pyd
when the Python program imports the osgeo.gdal package, gdal17.dll has to be
locatable by Windows, along with the other modules that gdal17.dll itself
depends on.

 

There are several ways that gdal17.dll might be locatable. Here is what
Windows does:
http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx.
Unfortunately, none of those are optimal for GDAL's Python bindings. Under
the first option, the executable module will typically but not always be
C:\PythonXY\python.exe. If an embedding application loads the Python
interpreter, it will be whatever executable that program is (e.g. C:\Program
Files\ArcGIS\bin\ArcMap.exe). So this is not a good choice.

 

The second choice, the current directory, might be something to try. The
GDAL Python bindings, e.g. gdal.py, could be modified to call a Python
function to change the current directory to wherever the GDAL DLLs are, then
import the _gdal.pyd, then change directory back.

 

The Windows system directory (C:\Windows\system32) and Windows directory
(C:\Windows) are probably not good. You guys don't want to put all of your
DLLs in there.

 

The directories listed in the PATH environment variable are the typical
solution. This is probably what most Python programmers do these days, based
on instructions from the GDAL team. They put GDAL in C:\gdal17 or something
and use the Windows Control Panel to modify the system PATH variable, so
that all Windows processes will have C:\gdal17 in the PATH. But in our
scenario, the Python programmer doesn't really care about the GDAL DLLs.
He's not planning to build something in another language that links to them.
He just wants his Python stuff to work with a minimum of fuss. So this is
less than optimal from his point of view.

 

Here are some possible alternatives:

 

1.    The minimum case: build an installation package for the Python
bindings but still require the user to manually store the GDAL binaries
someplace and set PATH, PROJ_LIB, GDAL_DATA, etc. This will at least give a
GUI installer to get the bindings installed, even if they still have to
manually install GDAL.

 

2.    Build an installation package as above. Have it install the GDAL DLLs
as a subdirectory of the osgeo directory, e.g.
C:\PythonXY\Lib\site-packages\osgeo\bin. Modify gdal.py to set
os.environ['PATH'] = os.environ['PATH'] + ';' gdalInstallDir to modify the
PATH to include that directory prior to importing _gdal.pyd. The PATH will
be modified for the running process only, for the duration of that process.

 

3.    Same as #2 but rather than modifying gdal.py to set the PATH variable,
instead create a new Python extension module called _gdal_dll_helper.pyd.
The job of this C extension module is simply to get gdal.dll and other DLLs
loaded without resorting to modifying the system PATH which can sometimes
have weird consequences (I can explain more if needed). The extension module
would call the Windows SetDllDirectory
<http://msdn.microsoft.com/en-us/library/ms686203%28v=vs.85%29.aspx>
function, call LoadLibrary to explicitly load gdal17.dll into the current
process, then call SetDllDirectory again to set the DLL directory back to
what it was previously. Then, when gdal.py wants to load _gdal.pyd,
gdal17.dll is already loaded and the binding succeeds.

 

4.    Statically link all necessary code to _gdal.pyd, _gdal_array.pyd, etc.
This would eliminate the need to store the GDAL DLLs on the machine at all,
as all code would be in the bindings .pyd DLLs. This would likely be a big
job, and probably not even possible given the variety of libraries that GDAL
leverages.

 

I know #2 and #3 sound scary but they can be done cleanly. I currently use a
variation of #3 in my own project that embeds GDAL and its Python bindings.

 

You also asked:

 

The individual packages may specify the required minimum version of the
referred packages loaded by the .NET runtime. Is this something that can be
done with the python environment as well?

 

As far as I know, there is not really a clean, standardized way to do that.
There are some innovations related to the "easy_install" thing I mentioned
earlier, but nothing has become standard in Python itself, at least with the
2.x releases.

 

Jason

 

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Thursday, January 06, 2011 7:24 AM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org; Christopher Barker
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

 

Jason,

I appreciate the expertise for all of you along with this thread, I could
already gather quite some useful information from here for this reason. I
must mention that my programming practice in Python can be considered as
zero, this is the main reason that my issues may have trivial solutions for
the hardcore pythonists but not trivial to me. Apologies for this
inconvenience :-)

Getting back to the original topic, you mention that the gdal binaries
should be installed somewhere an set PATH, GDAL_DATA, PROJ_LIB and
GDAL_DRIVER_PATH as a systemwide setting. This is where the problems of mine
are starting. Modifying the PATH globally is a bad practice in 99% of the
cases. The only case I'm aware of which may not be a problem when we make
sure that only one version of such files (dll-s and executables) will ever
be installed to a particular system. But this is not the case with the gdal
binaries as I would expect at least a development or a stable version (and
their x86/x64 variants) to coexist which should be used by the same user.
The same problem may arise when we would like to install multiple versions
to the site packages directory, how the versions of the files are maintained
by the python runtime? In this regard I could mention something like what
have been done with the .NET framework with the multiple versions of the
packages installed simultaneously in the global assembly cache. The
individual packages may specify the required minimum version of the referred
packages loaded by the .NET runtime. Is this something that can be done with
the python environment as well?

(As opposed to this, the dumb solution of having a starting script to open a
command prompt (and setting PYTHONPATH properly) would ensure multiple
versions to be used at the same time, since those settings are applyed to
the cmd process solely.)

Best regards,

Tamas



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/32beaeb5/attachment-0001.html
From szekerest at gmail.com  Thu Jan  6 11:07:07 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 11:07:10 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <767950673915584940@unknownmsgid>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
	<1214917644023838416@unknownmsgid>
	<AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>
	<767950673915584940@unknownmsgid>
Message-ID: <AANLkTimLm+x2X386_xA2MUp0J7MzEwRLAnTPPURvMuUX@mail.gmail.com>

2011/1/6 Jason Roberts <jason.roberts@duke.edu>

> 2.    Build an installation package as above. Have it install the GDAL
> DLLs as a subdirectory of the osgeo directory, e.g.
> C:\PythonXY\Lib\site-packages\osgeo\bin. Modify gdal.py to set
> os.environ['PATH'] = os.environ['PATH'] + ';' gdalInstallDir to modify the
> PATH to include that directory prior to importing _gdal.pyd. The PATH will
> be modified for the running process only, for the duration of that process.
>
>
>
> 3.    Same as #2 but rather than modifying gdal.py to set the PATH
> variable, instead create a new Python extension module called
> _gdal_dll_helper.pyd. The job of this C extension module is simply to get
> gdal.dll and other DLLs loaded without resorting to modifying the system
> PATH which can sometimes have weird consequences (I can explain more if
> needed). The extension module would call the Windows SetDllDirectory<http://msdn.microsoft.com/en-us/library/ms686203%28v=vs.85%29.aspx>function, call LoadLibrary to explicitly load gdal17.dll into the current
> process, then call SetDllDirectory again to set the DLL directory back to
> what it was previously. Then, when gdal.py wants to load _gdal.pyd,
> gdal17.dll is already loaded and the binding succeeds.
> I know #2 and #3 sound scary but they can be done cleanly. I currently use
> a variation of #3 in my own project that embeds GDAL and its Python
> bindings.
>
>
>
>
Jason,

Good writeup, thanks for that. You mention #2 and #3 which is exactly the
same I have in my mind. Already posted a code for #2 related to the csharp
bindings to demonstrate this option.

#2 would be fairly transparent for the user (no additional modules
imported), the only thing we could add is how gdal.py would find out the
install location of the gdal files. This may probably set in the registry
added by the installer. Not sure how this addition would affect the gdal
binding on other platforms (if we implement this in gdal)

#3 seems to be better for gdal (doesn't require to modify the bindings)
however the user will require to use an additional module (which is not
required normally when using gdal.py)


I would personally vote on having an extension (like #3) which is imported
by gdal.py in case if it is installed. If this extension is not installed,
gdal.py would work as before. This extension would scan the registry to find
out the install location of the corresponding files (probably based on an
unique key) and perform the required actions to make the dll-s loadable.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/ba816310/attachment.html
From mohammedrashadkm at gmail.com  Thu Jan  6 11:53:06 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Jan  6 11:53:09 2011
Subject: [gdal-dev] ogr shapefile viewer
Message-ID: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>

Anyone plea se provide a source code of just a simple shapefile viewer in
C/C++ or python
-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/93625906/attachment.html
From mateusz at loskot.net  Thu Jan  6 12:01:43 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jan  6 11:58:09 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
Message-ID: <4D25F577.9090105@loskot.net>

On 06/01/11 16:53, Mohammed Rashad wrote:
>
> Anyone plea se provide a source code of just a simple shapefile viewer
> in C/C++ or python

http://www.codeproject.com/KB/openGL/RenderSHP.aspx

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mohammedrashadkm at gmail.com  Thu Jan  6 11:58:55 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Jan  6 11:58:59 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <4D25F577.9090105@loskot.net>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
Message-ID: <AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>

i checked it. Its not working properly and uses openGL

On Thu, Jan 6, 2011 at 10:31 PM, Mateusz Loskot <mateusz@loskot.net> wrote:

> On 06/01/11 16:53, Mohammed Rashad wrote:
>
>>
>> Anyone plea se provide a source code of just a simple shapefile viewer
>> in C/C++ or python
>>
>
> http://www.codeproject.com/KB/openGL/RenderSHP.aspx
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>



-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/8f9b4f26/attachment.html
From mateusz at loskot.net  Thu Jan  6 12:07:06 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jan  6 12:03:31 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
Message-ID: <4D25F6BA.5040405@loskot.net>

On 06/01/11 16:58, Mohammed Rashad wrote:
> i checked it. Its not working properly and uses openGL

You didn't mention it can not be based on OpenGL or any other rendering 
API. No idea what you mean "not working properly",

The code provides good example on how to read vectors from Shapefile
and pass to renderer. Just translate it to your renderer, Windows GDI, 
GTK+, whatever.
If you want to use OGR, but not Shapelib, learn from OGR tutorial and do 
the same thing.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mohammedrashadkm at gmail.com  Thu Jan  6 12:19:09 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Jan  6 12:19:12 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <4D25F8CA.9080004@loskot.net>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
Message-ID: <AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>

On Thu, Jan 6, 2011 at 10:45 PM, Mateusz Loskot <mateusz@loskot.net> wrote:

>
> On 06/01/11 17:06, Mohammed Rashad wrote:
>
>> when the window resize the size of shapefile is also changed. by "not
>>  working" I mean its not displaying shapefile correctly.
>>
>
> This is a very simple example, it does not have to handle all UI events,
> react on windows resize, etc.
> I can't believe size of Shapefile does change. It can't change as it's a
> file on disk, so unless you edit vectors in file, its size never changes.
> You probably mean size of vectors displayed. Again, it's simple example,
> loads Shapefile, creates a window, draws vectors from Shapefile in this
> window. That's it.
>
> You wanted simple, this is simple.
>
>
>  can you point me to some other example with any api OpenGL also no
>> problem
>>
>
> Just google, there is plenty.
>
> Instead of looking for code, I'd rather suggest to sit down and think
> what you need. I assure you, all you need you have in OGR tutorial on
> gdal.org/ogr website. The only thing you need more is to pass vector
> data/point to rendering API you want to use.
>
> yes Mateusz Loskot, i need this part. passing the vector data/point to a
rendering API.


Anyone can provide a simple example other than
http://www.codeproject.com/KB/openGL/RenderSHP.aspx

> p.s. please, do not reply privately to folks from mailing lists,
> reply to mailing list.
>
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>



-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/07e11a1c/attachment.html
From jason.roberts at duke.edu  Thu Jan  6 12:25:49 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 12:25:56 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimLm+x2X386_xA2MUp0J7MzEwRLAnTPPURvMuUX@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
	<1214917644023838416@unknownmsgid>
	<AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>
	<767950673915584940@unknownmsgid>
	<AANLkTimLm+x2X386_xA2MUp0J7MzEwRLAnTPPURvMuUX@mail.gmail.com>
Message-ID: <030401cbadc6$c37a8eb0$4a6fac10$@roberts@duke.edu>

Tamas,

 

I think with either option #2 or #3, gdal.py will have to be modified in
order for everything to be invisible to the user. In #2, gdal.py would have
to modify the PATH variable. In #3, it would have to import the
_gdal_dll_helper module. In either case, it would just be a few lines of
code at the top of the file that occurs before any other GDAL extension
modules are loaded (_gdal, _gdal_array, etc). It would also need to be done
for other modules such as ogr.py, osr.py, or whatever also imports GDAL
extension modules (unless those ones also import gdal.py first).

 

So #3 is not better by virtue of not having to modify the bindings; it does
have to modify the bindings. But #3 is appealing because setting the PATH
from Python code sometimes has weird issues. For example, when I tried it in
my code, it produced a weird problem when I tried to use the "nose" Python
testing framework to run test cases that involved calling Python modules
from GDAL and ArcGIS. The problem there may ultimately be a Microsoft issue
in which the environment settings for a process are maintained by the
Microsoft C runtime library (msvcrt*.dll) and Python, ArcGIS, and GDAL may
use different versions of that library. I do not want to digress into this
here, but suffice to say, I prefer #3 to #2 because it did not have this
problem.

 

Here is an outline of tasks. We probably should put it in an RFC to keep
track.

 

1.    Modify the makefiles for your SDK so that it runs
release-XXXX-dev\gdal\swig\python\setup.py with the "bdist
--formats=wininst" option. This will produce an installation program such as
gdal-1.7.3.win32-py2.5.exe. This is what the user will run to install the
Python bindings together with a private copy of the GDAL DLLs used just by
those bindings. On Python 2.6 and later, we probably want "bdist
--formats=msi" to produce a .msi file rather than a .exe, because Windows
likes .msi files much better than .exes for security purposes. IIRC, Python
2.5 and earlier do not have the msi option.

 

2.    Modify release-XXXX-dev\gdal\swig\python\setup.py to include the GDAL
DLLs and data files in the data_files list that is passed to the setup()
function. Make sure it is only done for Windows (Python code can check
that). The goal is to have the installation program create the following
kind of installation:

 

Existing Python bindings:

 

C:\PythonXX\Lib\site-packages\osgeo\gdal.py

C:\PythonXX\Lib\site-packages\osgeo\ogr.py

C:\PythonXX\Lib\site-packages\osgeo\...

C:\PythonXX\Lib\site-packages\osgeo\_gdal.pyd

C:\PythonXX\Lib\site-packages\osgeo\_ogr.pyd

C:\PythonXX\Lib\site-packages\osgeo\...

 

New bin, data, and plugins directories, which are private to this
installation of the bindings:

 

C:\PythonXX\Lib\site-packages\osgeo\bin\gdal17.dll

C:\PythonXX\Lib\site-packages\osgeo\bin\proj.dll

C:\PythonXX\Lib\site-packages\osgeo\bin\...

 

C:\PythonXX\Lib\site-packages\osgeo\bin\gdal-data\coordinate_axis.csv

C:\PythonXX\Lib\site-packages\osgeo\bin\gdal-data\...

 

C:\PythonXX\Lib\site-packages\osgeo\bin\gdal-plugins\ogr_PG.dll

C:\PythonXX\Lib\site-packages\osgeo\bin\gdal-plugins\...

 

3.    Introduce a new file
release-XXXX-dev\gdal\swig\python\extensions\_gdal_dll_loader.cpp. This file
will call GetDllDirectory to find the current DLL directory setting, call
SetDllDirectory to C:\PythonXX\Lib\site-packages\osgeo\bin (or wherever the
Python instance is installed), call LoadLibrary("gdal17.dll"), and call
SetDllDirectory back to what it was before. There are more details to
consider. For example, we might want to have it call LoadLibrary first to
see if it can load the GDAL DLL from the PATH, allowing the user to use
their own GDAL DLLs without having to overwrite the ones in the Python
directory. Or we might not want to do that, with the idea that the GDAL
Python bindings must be tightly coupled to a particular version of GDAL's
DLLs.

 

4.    Modify setup.py to compile _gdal_dll_loader.cpp, only for Windows.
This will result in _gdal_dll_loader.pyd alongside the other .pyd files.

 

5.    Modify gdal.py, osr.py, and so on to do something like this:

 

import sys

if sys.platform == 'win32':     # TODO: add check for Windows x64 as well

    try:

        import osgeo._gdal_dll_loader          # As part of this, Python
will call an "init" function inside. That function will do the
SetDllDirectory, etc.

    except:

        pass

 

6.    Do whatever is necessary to ensure the GDAL_DATA etc are properly set
up inside GDAL. I can't remember if this will "just work" using directories
named gdal-data, gdal-plugins, or if it is necessary for the
_gdal_dll_loader.pyd to call some GDAL functions to make it happen.

 

Does that sound like the right direction?

 

Jason

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Thursday, January 06, 2011 11:07 AM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

 

 

2011/1/6 Jason Roberts <jason.roberts@duke.edu>

2.    Build an installation package as above. Have it install the GDAL DLLs
as a subdirectory of the osgeo directory, e.g.
C:\PythonXY\Lib\site-packages\osgeo\bin. Modify gdal.py to set
os.environ['PATH'] = os.environ['PATH'] + ';' gdalInstallDir to modify the
PATH to include that directory prior to importing _gdal.pyd. The PATH will
be modified for the running process only, for the duration of that process.

 

3.    Same as #2 but rather than modifying gdal.py to set the PATH variable,
instead create a new Python extension module called _gdal_dll_helper.pyd.
The job of this C extension module is simply to get gdal.dll and other DLLs
loaded without resorting to modifying the system PATH which can sometimes
have weird consequences (I can explain more if needed). The extension module
would call the Windows SetDllDirectory
<http://msdn.microsoft.com/en-us/library/ms686203%28v=vs.85%29.aspx>
function, call LoadLibrary to explicitly load gdal17.dll into the current
process, then call SetDllDirectory again to set the DLL directory back to
what it was previously. Then, when gdal.py wants to load _gdal.pyd,
gdal17.dll is already loaded and the binding succeeds.

I know #2 and #3 sound scary but they can be done cleanly. I currently use a
variation of #3 in my own project that embeds GDAL and its Python bindings.

 

 


Jason,

Good writeup, thanks for that. You mention #2 and #3 which is exactly the
same I have in my mind. Already posted a code for #2 related to the csharp
bindings to demonstrate this option.

#2 would be fairly transparent for the user (no additional modules
imported), the only thing we could add is how gdal.py would find out the
install location of the gdal files. This may probably set in the registry
added by the installer. Not sure how this addition would affect the gdal
binding on other platforms (if we implement this in gdal)

#3 seems to be better for gdal (doesn't require to modify the bindings)
however the user will require to use an additional module (which is not
required normally when using gdal.py)


I would personally vote on having an extension (like #3) which is imported
by gdal.py in case if it is installed. If this extension is not installed,
gdal.py would work as before. This extension would scan the registry to find
out the install location of the corresponding files (probably based on an
unique key) and perform the required actions to make the dll-s loadable.


Best regards,

Tamas




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/a1b52e8a/attachment-0001.html
From Chris.Barker at noaa.gov  Thu Jan  6 12:39:03 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan  6 12:39:06 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
	<AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
Message-ID: <4D25FE37.7080406@noaa.gov>

On 1/6/11 9:19 AM, Mohammed Rashad wrote:
>     Instead of looking for code, I'd rather suggest to sit down and think
>     what you need. I assure you, all you need you have in OGR tutorial
>     on gdal.org/ogr <http://gdal.org/ogr> website. The only thing you
>     need more is to pass vector data/point to rendering API you want to use.
>
> yes Mateusz Loskot, i need this part. passing the vector data/point to a
> rendering API.

It's still not clear quite what you want. If you just want to look at 
shape files, I'd use an off-the-shelf desktop GIS, there are lots, QGIS 
is pretty nice.

You can also render shapefiles with mapnik or mapserver -- both are 
highly customizable and produce very nice output.

If you want a library you can embed in your own app, and maybe 
customize, that's a different story.

For Python you could use wxPython and my wx.lib.floatcanvas. It doesn't 
understand shape files, but with OGR reading them, it's very easy to 
throw points, lines and polygons on the canvas, and be able to zoom and 
pan around to look at them.

We've also got the "maproom" project:

https://bitbucket.org/dhelfman/maproom/overview

It's a bit stalled out now, but will be revived. It is designed to be a 
general purpose lib and application for interactive map data viewing and 
manipulation. It doesn't actually support shape files at the moment, but 
it does use GDAL/OGR and has support for points and polygons, so not 
hard to write a new plugin for shape.

It's also using OpenGL for speedy rendering.

HTH,

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From mohammedrashadkm at gmail.com  Thu Jan  6 12:47:07 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Jan  6 12:47:10 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <4D25FE37.7080406@noaa.gov>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
	<AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
	<4D25FE37.7080406@noaa.gov>
Message-ID: <AANLkTi=y07gW7YgfUTGk7bT4Mo7Wq5pyPx4JL2A=sh5-@mail.gmail.com>

On Thu, Jan 6, 2011 at 11:09 PM, Christopher Barker
<Chris.Barker@noaa.gov>wrote:

> On 1/6/11 9:19 AM, Mohammed Rashad wrote:
>
>>    Instead of looking for code, I'd rather suggest to sit down and think
>>    what you need. I assure you, all you need you have in OGR tutorial
>>    on gdal.org/ogr <http://gdal.org/ogr> website. The only thing you
>>
>>    need more is to pass vector data/point to rendering API you want to
>> use.
>>
>> yes Mateusz Loskot, i need this part. passing the vector data/point to a
>> rendering API.
>>
>
> It's still not clear quite what you want. If you just want to look at shape
> files, I'd use an off-the-shelf desktop GIS, there are lots, QGIS is pretty
> nice.
>
> You can also render shapefiles with mapnik or mapserver -- both are highly
> customizable and produce very nice output.
>
> If you want a library you can embed in your own app, and maybe customize,
> that's a different story.
>
I need a c++ library to just display an OGR shapefile. i need to embed this
C++ library in my application that what I need. Is that clear? If you need
any further details i will provide.

>
> For Python you could use wxPython and my wx.lib.floatcanvas. It doesn't
> understand shape files, but with OGR reading them, it's very easy to throw
> points, lines and polygons on the canvas, and be able to zoom and pan around
> to look at them.
>
> We've also got the "maproom" project:
>
> https://bitbucket.org/dhelfman/maproom/overview
>
> It's a bit stalled out now, but will be revived. It is designed to be a
> general purpose lib and application for interactive map data viewing and
> manipulation. It doesn't actually support shape files at the moment, but it
> does use GDAL/OGR and has support for points and polygons, so not hard to
> write a new plugin for shape.
>
> It's also using OpenGL for speedy rendering.
>
> HTH,
>
> -Chris
>
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
>



-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/fa18c96f/attachment.html
From chaitanya.ch at gmail.com  Thu Jan  6 13:12:11 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  6 13:12:13 2011
Subject: [gdal-dev] ogr shapefile viewer
In-Reply-To: <AANLkTi=y07gW7YgfUTGk7bT4Mo7Wq5pyPx4JL2A=sh5-@mail.gmail.com>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
	<AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
	<4D25FE37.7080406@noaa.gov>
	<AANLkTi=y07gW7YgfUTGk7bT4Mo7Wq5pyPx4JL2A=sh5-@mail.gmail.com>
Message-ID: <AANLkTik+4mFtk5cLDuSVtSA=DAV_yxiEDyJzMESQBpzC@mail.gmail.com>

Rashad,

I assume you are looking for a simple viewer for non-changing shapefiles.
You can use the GDAL library and the code from the gdal_rasterize utility.

On Thu, Jan 6, 2011 at 11:17 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

>
>
> On Thu, Jan 6, 2011 at 11:09 PM, Christopher Barker <Chris.Barker@noaa.gov
> > wrote:
>
>> On 1/6/11 9:19 AM, Mohammed Rashad wrote:
>>
>>>    Instead of looking for code, I'd rather suggest to sit down and think
>>>    what you need. I assure you, all you need you have in OGR tutorial
>>>    on gdal.org/ogr <http://gdal.org/ogr> website. The only thing you
>>>
>>>    need more is to pass vector data/point to rendering API you want to
>>> use.
>>>
>>> yes Mateusz Loskot, i need this part. passing the vector data/point to a
>>> rendering API.
>>>
>>
>> It's still not clear quite what you want. If you just want to look at
>> shape files, I'd use an off-the-shelf desktop GIS, there are lots, QGIS is
>> pretty nice.
>>
>> You can also render shapefiles with mapnik or mapserver -- both are highly
>> customizable and produce very nice output.
>>
>> If you want a library you can embed in your own app, and maybe customize,
>> that's a different story.
>>
> I need a c++ library to just display an OGR shapefile. i need to embed this
> C++ library in my application that what I need. Is that clear? If you need
> any further details i will provide.
>
>>
>> For Python you could use wxPython and my wx.lib.floatcanvas. It doesn't
>> understand shape files, but with OGR reading them, it's very easy to throw
>> points, lines and polygons on the canvas, and be able to zoom and pan around
>> to look at them.
>>
>> We've also got the "maproom" project:
>>
>> https://bitbucket.org/dhelfman/maproom/overview
>>
>> It's a bit stalled out now, but will be revived. It is designed to be a
>> general purpose lib and application for interactive map data viewing and
>> manipulation. It doesn't actually support shape files at the moment, but it
>> does use GDAL/OGR and has support for points and polygons, so not hard to
>> write a new plugin for shape.
>>
>> It's also using OpenGL for speedy rendering.
>>
>> HTH,
>>
>> -Chris
>>
>>
>>
>> --
>> Christopher Barker, Ph.D.
>> Oceanographer
>>
>> Emergency Response Division
>> NOAA/NOS/OR&R            (206) 526-6959   voice
>> 7600 Sand Point Way NE   (206) 526-6329   fax
>> Seattle, WA  98115       (206) 526-6317   main reception
>>
>> Chris.Barker@noaa.gov
>>
>
>
>
> --
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/efd25dc8/attachment.html
From even.rouault at mines-paris.org  Thu Jan  6 14:11:32 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan  6 14:11:39 2011
Subject: [gdal-dev] SAGA: problem to convert grid from ETRS 89 / ETRS-LAEA
	to WGS84 CRS
In-Reply-To: <4D25B515.3090804@uibk.ac.at>
References: <AANLkTineNCTBvVhaGUci5NmfvJAoWMDjk9JEV1942rRL@mail.gmail.com>
	<4D25B515.3090804@uibk.ac.at>
Message-ID: <201101062011.32620.even.rouault@mines-paris.org>

Le jeudi 06 janvier 2011 13:27:01, Volker Wichmann a ?crit :
> This seems to me like an integer overflow - looking at the GDAL 1.7.2
> sources I see, that the WriteHeader() method of sagadataset.cpp is using
> 
> GInt16 nXSize, GInt16 nYSize
> 
> Most likely this should be changed to
> 
> int nXSize, int nYSize

Fixed by ticket http://trac.osgeo.org/gdal/ticket/3899.

> 
> 
> Best regards,
> Volker
> 
> Am 06.01.2011 10:48, schrieb Cl?ment Tisseuil:
> > Dear all,
> > 
> > I try to convert a SAGA grid (SAGA), from a ETRS 89 / ETRS-LAEA  to
> > WGS84 CRS , but I get the following error message:
> > 
> > gdalwarp -s_srs "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
> > +y_0=3210000 +ellps=GRS80 +units=m +no_defs" -t_srs "+proj=longlat
> > +ellps=WGS84 +datum=WGS84 +no_defs" -r near -of SAGA hdr.sdat
> > ./tmp/hdr.sdat
> > 
> > Creating output file that is 39901P x 15248L.
> > ERROR 1: Invalid dataset dimensions : -25635 x 15248
> > 
> > Any ideas ?
> > 
> > Thanks in advance.
> > 
> > --
> > Cl?ment
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Chris.Barker at noaa.gov  Thu Jan  6 14:48:47 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan  6 14:48:50 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D259642.7000309@gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
Message-ID: <4D261C9F.4050200@noaa.gov>

Lots of stuff in this thread, I'll try to contribute what I can inline:

On 1/6/11 2:15 AM, Ari Jolma wrote:
> When I started there was only ActivePerl for Windows that was usable,
> but it turned out impossible for me to use because they use MS
> compilers. Now there is Strawberry Perl, which I might try again (or pay
> someone to try). It is good because it uses MinGW.

The situation is a bit different for Python -- the Python.org binaries 
are almost universal (and I think the ActiveState ones are compatible). 
So it's the obvious choice to build against. They are built with MS 
compilers, but you can compile extensions with MinGW (at least for 2.6 
and above). However, ideally the MS compilers are users -- there are 
freely available versions that work (not Open source though!)

> Then there could also be a more end-user type Windows installation
> package project for GDAL, which installs the stuff into some standard
> location (c:\Program Files\share?).

I think so too, but it's a bit unclear to me what's best as far as the 
various language bindings go...given all the versions of Python (and I 
assume others) it's a bit messy.

>  In fact
> Geoinformatica should be simply installable through Perl's cpan
> application - but that does not even work in Linux yet :( (the reason is
> that the GDAL Perl module installation script is not intelligent enough
> and the version of the module in CPAN is horribly old and I really suck
> at managing that)

Wow! given how much folks rave about CPAN, it sounds like PyPi is better 
in this regard, at least for binary packages.

On 1/6/11 4:00 AM, Jan Hartmann wrote:
> Three months ago I put an announcement on the MapServer-Users list about
> a shell script I wrote to compile the whole MapServer-GDAL-PostGIS-PLR
> suite, with and without PHP/Python,

Did you provide Python, to use an existing python.org build?

> Since then I got no (zero) replies, so I don't know whether it doesn't
> work, isn't interesting, or people just didn't look at it.

well, for what it's worth, on LInux, users can go a long way with distro 
packages and the plain old ./configure; make.. dance.

Binaries on Windows are in much higher demand.

On 1/6/11 4:24 AM, Tamas Szekeres wrote:
> Modifying the PATH globally is a bad practice in 99%
> of the cases.

really? for command line tools, I do it all the time! It seems the ay to 
go if you want it to just work". Maybe it makes for more dll hell?

> I would expect at least a development or a
> stable version (and their x86/x64 variants) to coexist which should be
> used by the same user.

This is mostly an issue for developers, and you are smart enough to take 
care of yourselves... As for me, I usually have a system wide default 
for things like GDAL on the PATH, and then will have a startup script or 
something that re-sets things if I want to run test versions, or I just 
call the exe I want explicitly

Anyway, putting a binary in a "standard" location is separate from 
having an installer modify the users PATH -- that second step should be 
optional, or just leave it for the user to do manually if they want.

> The same problem may arise when we would like to
> install multiple versions to the site packages directory, how the
> versions of the files are maintained by the python runtime?

Python is very weak in that regard, There are three ways to handl eit now:

1)a roll-your-open version selection mechanism -- wxPython and I think 
PyGTK do this.

2) virtualenv, or similar -- they set up a "virtual" python install, so 
that you can have multiple installs, each with different versions of 
packages

3) setuptools provides some mechanism for egg version selection, though 
i've never really figure out how to use it.

I think (2) is the best recommendation -- the nice thing about it is 
that the packager doesn't have to do anything special -- it's handled by 
how the user installs a package -- if they use setup.py or easy_install, 
or pip, it just works -- maybe not with an msi, though.

So this points to building binary eggs, ideally.

>  The individual packages may
> specify the required minimum version of the referred packages loaded by
> the .NET runtime. Is this something that can be done with the python
> environment as well?

That's kind of what setuptools provides, but it's pretty kludgy.

> (As opposed to this, the dumb solution of having a starting script to
> open a command prompt (and setting PYTHONPATH properly) would ensure
> multiple versions to be used at the same time, since those settings are
> applied to the cmd process solely.)

I suspect that's how virtualenv works, more or less.

On 1/6/11 5:01 AM, Tamas Szekeres wrote:
> I did mention to set the environment for the cmd process solely, and not
> by a systemwide setting. In this regard it doesn't matter how many
> python runtime is installed on a particular system, the only issue is to
> refer to the desired one (by setting the PATH to the python executable
> or using absolute path when running python) from the command prompt.

This is a fine solution for sophisticated developers, but believe Jason 
and me when we tell you that that's simply not how most Python users 
work. I think the goal here to to provide something that fits well into 
the common work flow.

> 3. Similar issue may exist with the multiple CRT dependencies privided
> by the packages, for example when I would package my vesion of mapserver
> compiled with MSVC2008 but we have only gdal-dev packages compiled with
> MSVC2003 out there.

This is a big Python issue -- extensions must be compiled with the same 
CRT as the interpreter -- that's  MSVC2008 for 2.6 and 2.7 (and 3.8??), 
I think 2.5 is MSVC2003 (but that may be 2.4, my memory is fading...). 
Interestingly, MingGW is OK, too.

Which is why I love your binaries that specify what they were built with!

 > But indeed we may speak about different things, you may probably
> want to install a single version of the gdal packages throughout the
> system, while I'd be curious about the desired approach to host multiple
> versions side by side.

see above -- virtualenv is probably the most common way to handle that now.

On 1/6/11 5:10 AM, Ari Jolma wrote:

> I think it would not make sense to include GDAL into such a binary perl
> module package. Thus GDAL would need to be separately installable -

This is a key question for Python, too. I lean toward having GDAL 
separate, and ideally it would then provide the command line tools, as 
well as the support for Perl, Python, etc...

2) we make GDAL-dev.msi  available at an URL.

yup.

I think having a python binary depend on a GDAL install is OK, as long 
as there is a simple installer to point folks to to get it.

On 1/6/11 5:49 AM, Ari Jolma wrote:
> :) I'm not completely satisfied (I'm also not sure I really understand
> the whole f* issue) with how Perl searches for dll's - especially dll
> import libs - in Windows.

me neither, with Python (or anything Windows, for that matter). Maybe 
Jason knows better, but I *think* we should be OK with a standard 
location for GDAL. But could you have:

Program Files\GDAL\1.6\gdal.dll
  and
Program Files\GDAL\1.6\gdal.dll

and have one Python binding find 1.6, and one find 1.7 -- I'm not sure 
how to do that, but it SHOULD be doable! OH what i'd give for a symlink!

On 1/6/11 6:50 AM, Tamas Szekeres wrote:
> The only wokaround which is satisfactory to me is to set the required
> enviroment at run time before the gdal bindings are used. In csharp we
> can do something like:
>
>                      string path =
> Environment.GetEnvironmentVariable("PATH");
>                      if (!path.Contains(gdal_bin_path))
>                      {
>                          Environment.SetEnvironmentVariable("PATH",
> gdal_bin_path + ";" + path);
>                      }
>                      Gdal.SetConfigOption("GDAL_DRIVER_PATH",
> gdal_driver_path);
>
> But it requires that loading the gdal dll is happening when the
> interface is used actually (in Gdal.SetConfigOption with the code
> above). This is the case with the .NET runtime,  but I'm not sure how do
> we stand with the other bindings in this regard.

I'm pretty sure the entry point for gdal on Python is a python file, so 
you could do something similar, before the binary module is loaded. But 
I don't know if that is standard practice.

On 1/6/11 7:25 AM, Jason Roberts wrote:

> Apologies in advance for repeating stuff below that you already know.

Great summary -- thanks! And you clearly have a better grasp that I on 
Windows dll hell.


> 1.The minimum case: build an installation package for the Python
> bindings but still require the user to manually store the GDAL binaries
> someplace and set PATH, PROJ_LIB, GDAL_DATA, etc.

I think this is a pretty sub-optimal approach, maybe not worth doing. 
(And maybe what Howard already has?)

> 2.Build an installation package as above. Have it install the GDAL DLLs
> as a subdirectory of the osgeo directory, e.g.
> C:\PythonXY\Lib\site-packages\osgeo\bin.

This is a good option if we decide to make the python bindings stand 
alone -- though I'm not sure if that's the best goal, but it may be.

> Modify gdal.py to set
> os.environ['PATH'] = os.environ['PATH'] + ';' gdalInstallDir to modify
> the PATH to include that directory prior to importing _gdal.pyd. The
> PATH will be modified for the running process only, for the duration of
> that process.

I didn't think that was required, if the dll is in the same place as the 
*.pyd, but maybe it is. And it seems it would work fine. Might it mess 
things up if someone where to do a system call from Python? Also, would 
that support py2exe?

I wonder what is donefor theones here:

http://www.lfd.uci.edu/~gohlke/pythonlibs/

No time to poke into that right now, sorry. We should look at them 
though, maybe He's solved our problems for us!

> 3.Same as #2 but rather than modifying gdal.py to set the PATH variable,
> instead create a new Python extension module called
> _gdal_dll_helper.pyd. The job of this C extension module is simply to
> get gdal.dll and other DLLs loaded without resorting to modifying the
> system PATH which can sometimes have weird consequences (I can explain
> more if needed). The extension module would call the Windows
> SetDllDirectory
> <http://msdn.microsoft.com/en-us/library/ms686203%28v=vs.85%29.aspx>
> function, call LoadLibrary to explicitly load gdal17.dll into the
> current process, then call SetDllDirectory again to set the DLL
> directory back to what it was previously. Then, when gdal.py wants to
> load _gdal.pyd, gdal17.dll is already loaded and the binding succeeds.

could all that be done with some ctypes calls, rather than another 
extension?

> 4.Statically link all necessary code to _gdal.pyd, _gdal_array.pyd, etc.
> This would eliminate the need to store the GDAL DLLs on the machine at
> all, as all code would be in the bindings .pyd DLLs. This would likely
> be a big job, and probably not even possible given the variety of
> libraries that GDAL leverages.

But is a good way to go if possible -- we try to do that for all 
Macintosh python binaries. Though I don't anyone has succeeded (or even 
tried) for GDAL.

On 1/6/11 8:07 AM, Tamas Szekeres wrote:
> I would personally vote on having an extension (like #3) which is
> imported by gdal.py in case if it is installed. If this extension is not
> installed, gdal.py would work as before. This extension would scan the
> registry to find out the install location of the corresponding files
> (probably based on an unique key) and perform the required actions to
> make the dll-s loadable.

I like that, except for the registry part -- I am fearful of the 
registry anyway, and it wouldn't work well for easy_install, etc.

Maybe the GDAL paths could just be put in a config file (or python file, 
for that matter) in the osgeo package dir.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From xiaodong.zhang2 at und.edu  Thu Jan  6 14:25:48 2011
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Thu Jan  6 14:53:45 2011
Subject: [gdal-dev] gdal_polygonize.py binding error
In-Reply-To: <4D25FE37.7080406@noaa.gov>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
	<AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
	<4D25FE37.7080406@noaa.gov>
Message-ID: <4D26173C.2000302@und.edu>

Hi,

I just updated the older version  of gdal (1.4.2) with the latest 
version of gdal (1.7.3) on x64 RedHat. Got an error when using 
gdal_polygonize.py for a test image

gdal_polyzonize.py t2.tif -f "ESRI Shapefile" pt2

gdal.Polyzonize() not available. You are likely using "old gen" bindings 
or an older version of the next gen bindings.

I found the previous threads on this issue, but could not find an answer.

Any idea? Thanks

Xiaodong
From ari.jolma at gmail.com  Thu Jan  6 15:13:32 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Jan  6 15:13:37 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>	<4D259642.7000309@gmail.com>	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>	<4D25BF49.4020207@gmail.com>	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>	<4D25C862.4040601@gmail.com>
	<AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>
Message-ID: <4D26226C.3010000@gmail.com>

Tamas,

In Perl the programmer can postpone loading the external DLL required by 
a module. Thus a similar approach is viable in Perl. But that's not how 
it's usually done. If you have a DLL in a system that is meant for 
shared use then it should be in the system PATH. Thus I believe the 
policy should be to set the PATH if GDAL is installed into a system (as 
such - not as a part of something else). Only if a package installs a 
private GDAL, it should be kept out of PATH and the package executables 
need to take care of setting the PATH or other env vars as appropriate 
(in Geoinformatica I do this - the Geoinformatica installer is basically 
a file copy and no env vars are changed).

Ari

6.1.2011 16:50, Tamas Szekeres kirjoitti:
> Ari
>
> The only wokaround which is satisfactory to me is to set the required 
> enviroment at run time before the gdal bindings are used. In csharp we 
> can do something like:
>
>                     string path = 
> Environment.GetEnvironmentVariable("PATH");
>                     if (!path.Contains(gdal_bin_path))
>                     {
>                         Environment.SetEnvironmentVariable("PATH", 
> gdal_bin_path + ";" + path);
>                     }
>                     Gdal.SetConfigOption("GDAL_DRIVER_PATH", 
> gdal_driver_path);
>
> But it requires that loading the gdal dll is happening when the 
> interface is used actually (in Gdal.SetConfigOption with the code 
> above). This is the case with the .NET runtime,  but I'm not sure how 
> do we stand with the other bindings in this regard.
>
> Futher problem with this solution is that this startup code should be 
> placed in the user's script and not sure how this could be implemented 
> in the gdal bindings itself.
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/1/6 Ari Jolma <ari.jolma@gmail.com <mailto:ari.jolma@gmail.com>>
>
>     On 01/06/2011 03:25 PM, Tamas Szekeres wrote:
>
>
>         Assuming we install the gdal-perl modules in a standard
>         location (not sure where it is), do we have a common mechanism
>         in the perl runtime to find the dependent dlls without having
>         to violate system wide settings (like the PATH environment
>         variable)?
>
>
>     :) I'm not completely satisfied (I'm also not sure I really
>     understand the whole f* issue) with how Perl searches for dll's -
>     especially dll import libs - in Windows.
>
>     But that's configure/compile time issue. In compile time a Perl
>     GDAL dll (for the bindings) is created and put into some location,
>     which is known to Perl and Perl knows how to find it in runtime.
>
>     Assuming I've built the binaries, then in runtime (when the GDAL
>     module is called for) I think somebody (because the Perl GDAL
>     module dll has a link to GDAL dll that was put there in compile
>     time) asks for the GDAL dll's and they simply need to be
>     available. Thus, if there is GDAL in the system (for example in
>     c:\Program Files\Share\GDAL\bin) then that path needs to be in the
>     PATH - I don't think there is a way around that. The PATH may be a
>     temporary PATH set by somebody for Perl programs, but I think the
>     policy should be that when you run GDAL.msi, the system default
>     PATH is modified to have the path to the GDAL binaries.
>
>     Best regards,
>
>     Ari
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/010eada6/attachment.html
From even.rouault at mines-paris.org  Thu Jan  6 15:17:34 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan  6 15:17:41 2011
Subject: [gdal-dev] GDAL autotest optional/slow tests
Message-ID: <201101062117.34479.even.rouault@mines-paris.org>

Hi,

For those running the GDAL autotest suite, I just wanted to notify that I have 
added a mechanism to add 'slow' tests that aren't normaly run to avoid making 
a run of the autotest suite to last for too long. If the environment variable 
GDAL_RUN_SLOW_TESTS is set to YES when running the autotest, those tests will 
be run, otherwise they will be skipped (currently, there are just 2 such 
tests)

The justificiation is that some tests that trigger particular bugs, or that try 
to be exhaustive when testing some feature, cannot be written in a way where 
they will run fast (because of the algorithmic complexity, or the need to 
create big files, to use lots of memory, etc...) But it is a pity not to be 
able to test them on request, hence that mechanism.

Disclaimer : slow tests ... may be really slow ;-)

Best regards,

Even
From Chris.Barker at noaa.gov  Thu Jan  6 15:20:02 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan  6 15:20:05 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D26226C.3010000@gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
	<4D25BF49.4020207@gmail.com>
	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
	<4D25C862.4040601@gmail.com>
	<AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>
	<4D26226C.3010000@gmail.com>
Message-ID: <4D2623F2.9020906@noaa.gov>

On 1/6/11 12:13 PM, Ari Jolma wrote:
>  If you have a DLL in a system that is meant for
> shared use then it should be in the system PATH. Thus I believe the
> policy should be to set the PATH if GDAL is installed into a system

I notice on my system, the dll is "gdal17.dll"

That is, the version is part of the file name, so there shouldn't be a 
problem with different versions installed in the PATH.

WE could even use a longer filename, like *nix systems, we're not 
restricted to 8.3 anymore, are we?

gdal-1.7.1-a.dll

for instance.

Though maybe setting up the build to do that is more trouble that it's 
worth.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jason.roberts at duke.edu  Thu Jan  6 15:31:37 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 15:31:43 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D261C9F.4050200@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
Message-ID: <035501cbade0$b84091b0$28c1b510$@roberts@duke.edu>

Chris,

Here are some comments on specific parts of your mail:

> me neither, with Python (or anything Windows, for that matter). Maybe 
> Jason knows better, but I *think* we should be OK with a standard 
> location for GDAL. But could you have:
>
> Program Files\GDAL\1.6\gdal.dll
>   and
> Program Files\GDAL\1.6\gdal.dll
>
> and have one Python binding find 1.6, and one find 1.7 -- I'm not sure 
> how to do that, but it SHOULD be doable! OH what i'd give for a symlink!

Those would be reasonable locations for GDAL to live if the GDAL team
decided to distribute the GDAL binaries using an installer that adhered to
the best practices on Windows. But putting them there would not mean they
would be automatically added to the PATH. The GDAL Python bindings would
still have to use one of the options I mentioned to load the binaries there
(e.g. modify the PATH).

Incidentally, Windows does support both symbolic and hard links, although it
is not widely known, and I'm not sure I'd recommend their use for this
particular problem.

> I think 2.5 is MSVC2003 (but that may be 2.4, my memory is fading...).

I believe both 2.4 and 2.5 used MSVC2003.

> Great summary -- thanks! And you clearly have a better grasp that I on 
> Windows dll hell.

I used to work for Microsoft, back in the day... :-)

>> Modify gdal.py to set
>> os.environ['PATH'] = os.environ['PATH'] + ';' gdalInstallDir to modify
>> the PATH to include that directory prior to importing _gdal.pyd. The
>> PATH will be modified for the running process only, for the duration of
>> that process.
>
> I didn't think that was required, if the dll is in the same place as the 
> *.pyd, but maybe it is. And it seems it would work fine. Might it mess 
> things up if someone where to do a system call from Python? Also, would 
> that support py2exe?

Unfortunately, it is not sufficient to simply put the GDAL DLLs in the same
directory as the GDAL .pyd files. When the .pyd tries to load the GDAL DLL
through "implicit" linking, Windows checks the locations described in
http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx.

You are probably thinking of the first rule in that list, "the directory
where the executable module for the current process is located", i.e. the
.exe file. In most cases, this is C:\PythonXY\python.exe. C:\PythonXY is
probably not an appropriate location for the GDAL DLLs. Plus it would not
work for other executables that host the Python interpreter, such as
C:\Program Files\ArcGIS\Bin\ArcMap.exe.

Incidentally, the Python interpreter itself is in a DLL that Python installs
in C:\Windows\system32, which is always very high up in the PATH. GDAL could
put its binaries there. But that might be very risky because GDAL ships a
lot of DLLs that other apps might also use. For example, GDAL optionally
includes xerces-c, which MATLAB and ArcGIS also use, among others. Plunking
GDAL's own copy of xerces-c into the PATH will screw up those apps.

> I wonder what is donefor theones here:
>
> http://www.lfd.uci.edu/~gohlke/pythonlibs/

I have been meaning to look at that since you originally sent it. It
probably gives an example of the kinds of stuff I mentioned. I wonder if it
is statically linked. Rgdal is one example where someone has statically
linked GDAL into their own project.

> could all that be done with some ctypes calls, rather than another 
> extension?

Yes I believe you are absolutely right. I always forget about ctypes because
I'm working on something that must be compatible back to Python 2.4 and
ctypes was not included in 2.4.

Jason


From Chris.Barker at noaa.gov  Thu Jan  6 16:42:07 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan  6 16:42:14 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
Message-ID: <4D26372F.4070906@noaa.gov>

On 1/6/11 12:31 PM, Jason Roberts wrote:
> Here are some comments on specific parts of your mail:
>> Program Files\GDAL\1.6\gdal.dll
>>    and
>> Program Files\GDAL\1.6\gdal.dll

> Those would be reasonable locations for GDAL to live if the GDAL team
> decided to distribute the GDAL binaries using an installer that adhered to
> the best practices on Windows.

I *think* we're heading for a consensus to do that, but not many people 
have been on this thread.

> Incidentally, Windows does support both symbolic and hard links, although it
> is not widely known, and I'm not sure I'd recommend their use for this
> particular problem.

I've heard that, but never seen it done.

> You are probably thinking of the first rule in that list, "the directory
> where the executable module for the current process is located", i.e. the
> .exe file. In most cases, this is C:\PythonXY\python.exe. C:\PythonXY is
> probably not an appropriate location for the GDAL DLLs. Plus it would not
> work for other executables that host the Python interpreter, such as
> C:\Program Files\ArcGIS\Bin\ArcMap.exe.

What about C:\PYTHON26\libs ?

or is that for the main python distro only?

> Incidentally, the Python interpreter itself is in a DLL that Python installs
> in C:\Windows\system32, which is always very high up in the PATH. GDAL could
> put its binaries there. But that might be very risky because GDAL ships a
> lot of DLLs that other apps might also use.

I agree -- and Tamas would never go for it! ;-)

>> I wonder what is donefor theones here:
>>
>> http://www.lfd.uci.edu/~gohlke/pythonlibs/
>
> I have been meaning to look at that since you originally sent it.

let us now what you find -- I really can't spend any more time on this 
right now!

> Rgdal is one example where someone has statically
> linked GDAL into their own project.

so we know it can be done -- but with all the third party libs (xerces, 
etc, etc) that could be ugly/impossible.

>> could all that be done with some ctypes calls, rather than another
>> extension?
>
> Yes I believe you are absolutely right. I always forget about ctypes because
> I'm working on something that must be compatible back to Python 2.4 and
> ctypes was not included in 2.4.

I've never actually used it, but it does seem made for this sort of thing.

As for versions, I don't know if GDAL has a policy about what versions 
to support, but I'd think we could dump 2.4 (and maybe even 2.5...), and 
that means only one MS compiler to support.

Thanks for your work on this,

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From szekerest at gmail.com  Thu Jan  6 16:51:39 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 16:51:42 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D2623F2.9020906@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
	<4D25BF49.4020207@gmail.com>
	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
	<4D25C862.4040601@gmail.com>
	<AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>
	<4D26226C.3010000@gmail.com> <4D2623F2.9020906@noaa.gov>
Message-ID: <AANLkTinfECXDsdbf+x6-7iXuWDzaMLBz8aLYxDsa4rKL@mail.gmail.com>

2011/1/6 Christopher Barker <Chris.Barker@noaa.gov>

> I notice on my system, the dll is "gdal17.dll"
>
> That is, the version is part of the file name, so there shouldn't be a
> problem with different versions installed in the PATH.
>
> WE could even use a longer filename, like *nix systems, we're not
> restricted to 8.3 anymore, are we?
>
> gdal-1.7.1-a.dll
>
>
Chris,

This is where a typical dll hell problem is starting. The application is
happy to load a common dll let's say a gdal17.dll, zlib1.dll, libcurl.dll
whatever, but is not the same at it is expected to be (for example it
depends on different CRT libraries). The issue is that you rarely get a
clear error message what the problem is, but your application is failing
with access violations in certain conditions.

To make sure about the issue I did a quick test on my devserver with a
whereis.bat containing the following script, trying to find the location of
some common dlls (used by gdal):

@for %%e in (%PATHEXT%;.dll) do @for %%i in (%1%%e) do @if NOT
"%%~$PATH:i"=="" echo %%~$PATH:i


E:\builds>whereis zlib1
C:\Program Files (x86)\Mono-1.2.6\bin\zlib1.dll

E:\builds>whereis ssleay32
C:\Program Files (x86)\Subversion\ssleay32.dll

Depending on the location of my entry in the PATH may break both
applications or these files may break mine.

Not sure this causes an issue in this particular case but, it makes the
things fragile well enough.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/c2721a51/attachment.html
From warmerdam at pobox.com  Thu Jan  6 17:00:31 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  6 17:00:45 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D26372F.4070906@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov>
Message-ID: <4D263B7F.4030205@pobox.com>

On 11-01-06 04:42 PM, Christopher Barker wrote:
> On 1/6/11 12:31 PM, Jason Roberts wrote:
>> Here are some comments on specific parts of your mail:
>>> Program Files\GDAL\1.6\gdal.dll
>>> and
>>> Program Files\GDAL\1.6\gdal.dll
>
>> Those would be reasonable locations for GDAL to live if the GDAL team
>> decided to distribute the GDAL binaries using an installer that adhered to
>> the best practices on Windows.
>
> I *think* we're heading for a consensus to do that, but not many people have
> been on this thread.

Jason / Christopher,

I have no objection to using \Program Files\GDAL\<major>.<minor>\ as a
standard location for GDAL stuff on windows.  If this is done, the GDAL
data search location should be compiled in for this location on windows,
much as it defaults to /usr/share/gdal (or /usr/local/share/gdal) on
linux.

Note that this means point releases cannot coexist on a system.  I think
that is mostly a good thing, in that upgrading to a new point release
should not change the ABI and should be a transparent change for any
applications.  That is also why we do not encode the point release values
in the DLL name.  That is the GDAL17.DLL from GDAL 1.7.3 should be a drop
in replacement for the GDAL17.DLL from GDAL 1.7.2.   If the DLL name was
more specific then applications would be forced to relink to use the new
version.

On the other hand, we do want major relases (1.7.x vs. 1.8.x) to coexist
and it is decision that applications need to make which they want to use.
So the proposed structure handles that well.

I'm going to stay out of the Python specific aspects.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Thu Jan  6 17:02:44 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan  6 17:02:50 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTinfECXDsdbf+x6-7iXuWDzaMLBz8aLYxDsa4rKL@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
	<4D25BF49.4020207@gmail.com>
	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
	<4D25C862.4040601@gmail.com>
	<AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>
	<4D26226C.3010000@gmail.com> <4D2623F2.9020906@noaa.gov>
	<AANLkTinfECXDsdbf+x6-7iXuWDzaMLBz8aLYxDsa4rKL@mail.gmail.com>
Message-ID: <4D263C04.9020808@noaa.gov>

On 1/6/11 1:51 PM, Tamas Szekeres wrote:
> 2011/1/6 Christopher Barker <Chris.Barker@noaa.gov
> This is where a typical dll hell problem is starting. The application is
> happy to load a common dll let's say a gdal17.dll, zlib1.dll,
> libcurl.dll whatever, but is not the same at it is expected to be (for
> example it depends on different CRT libraries).

yup -- it seems long, descriptive file names would help, but that 
doesn't seem to be the Windows way...

OS_X hard-codes the path to shared libs when linking, which causes its 
own problems, but not these ones.

I think Jason has some good ideas, though.

> To make sure about the issue I did a quick test on my devserver with a
> whereis.bat containing the following script, trying to find the location
> of some common dlls (used by gdal):
>
> @for %%e in (%PATHEXT%;.dll) do @for %%i in (%1%%e) do @if NOT
> "%%~$PATH:i"=="" echo %%~$PATH:i
>
>
> E:\builds>whereis zlib1
> C:\Program Files (x86)\Mono-1.2.6\bin\zlib1.dll
>
> E:\builds>whereis ssleay32
> C:\Program Files (x86)\Subversion\ssleay32.dll

so your gdal depends on Mono's zlib and Subversion's ssleay? that does 
seem fragile!

Or do you mean that you have these somewhere for gdal, and they are ALSO 
in those other locations?

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jason.roberts at duke.edu  Thu Jan  6 17:10:02 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 17:10:08 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D263B7F.4030205@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
Message-ID: <037401cbadee$77fdbb10$67f93130$@roberts@duke.edu>

Frank,

Thanks for sharing your opinion. I do have one question that I hope you will
weigh in on. Which of the following two options seems better to you:

1. The GDAL libraries (possibly accompanied with executable programs) are
installed as a separately from the GDAL Python bindings. The libraries are
installed to \Program Files as you describe and the Python bindings are
installed in the standard Python location. A Windows Python programmer
wanting to use GDAL would perform two installs: one for the GDAL libraries,
the other for the bindings.

2. The GDAL Python bindings include a private copy of the GDAL libraries
(with no executable programs). These are installed to a private subdirectory
with the bindings. A Windows Python programmer wanting to use GDAL only
needs to perform one install: the bindings.

#1 is essentially how things are done now, just not following Windows best
practices (not using \Program files) and without any automation to ease the
process (no regularly maintained installer for the Python bindings).

I was proposing #2, basically under the argument that a Windows Python
programmer who needs to use GDAL will rarely ever need to use GDAL for some
other purpose, and therefore not want to install and think about a separate
installation of the GDAL libraries themselves. But if you don't believe
that, or think it is important that the libraries remain distinct from the
bindings in this scenario for some other reason, then we would appreciate
your opinion.

Thanks,
Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Thursday, January 06, 2011 5:01 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

On 11-01-06 04:42 PM, Christopher Barker wrote:
> On 1/6/11 12:31 PM, Jason Roberts wrote:
>> Here are some comments on specific parts of your mail:
>>> Program Files\GDAL\1.6\gdal.dll
>>> and
>>> Program Files\GDAL\1.6\gdal.dll
>
>> Those would be reasonable locations for GDAL to live if the GDAL team
>> decided to distribute the GDAL binaries using an installer that adhered
to
>> the best practices on Windows.
>
> I *think* we're heading for a consensus to do that, but not many people
have
> been on this thread.

Jason / Christopher,

I have no objection to using \Program Files\GDAL\<major>.<minor>\ as a
standard location for GDAL stuff on windows.  If this is done, the GDAL
data search location should be compiled in for this location on windows,
much as it defaults to /usr/share/gdal (or /usr/local/share/gdal) on
linux.

Note that this means point releases cannot coexist on a system.  I think
that is mostly a good thing, in that upgrading to a new point release
should not change the ABI and should be a transparent change for any
applications.  That is also why we do not encode the point release values
in the DLL name.  That is the GDAL17.DLL from GDAL 1.7.3 should be a drop
in replacement for the GDAL17.DLL from GDAL 1.7.2.   If the DLL name was
more specific then applications would be forced to relink to use the new
version.

On the other hand, we do want major relases (1.7.x vs. 1.8.x) to coexist
and it is decision that applications need to make which they want to use.
So the proposed structure handles that well.

I'm going to stay out of the Python specific aspects.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Thu Jan  6 17:25:01 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 17:25:03 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D263C04.9020808@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com>
	<AANLkTi=vykF_kZdbgqZXhh64gGXO1HpcdpbNNbgXZ7Sh@mail.gmail.com>
	<4D25BF49.4020207@gmail.com>
	<AANLkTimwDwp-knExOPGr2dXpyzrJ1FcCtE1Q-G6h4Nk7@mail.gmail.com>
	<4D25C862.4040601@gmail.com>
	<AANLkTi=JrcZdsmC+VjyZ1VfhGAU5i1LRZCZmLuQCuEEq@mail.gmail.com>
	<4D26226C.3010000@gmail.com> <4D2623F2.9020906@noaa.gov>
	<AANLkTinfECXDsdbf+x6-7iXuWDzaMLBz8aLYxDsa4rKL@mail.gmail.com>
	<4D263C04.9020808@noaa.gov>
Message-ID: <AANLkTimo0GT2_QpPnVAJdE=ZfkiAv5CZ4eNRSvDOPOyE@mail.gmail.com>

2011/1/6 Christopher Barker <Chris.Barker@noaa.gov>

> yup -- it seems long, descriptive file names would help, but that doesn't
> seem to be the Windows way...
>
>
It would be true, but it's not a common practice of the libraries currently
(assuming we keep the original dll name of each dependency). However we
could probably rename our custom dlls with a random name during the build
process. Pretty odd, but workable.



> so your gdal depends on Mono's zlib and Subversion's ssleay? that does seem
> fragile!
>
>
Or do you mean that you have these somewhere for gdal, and they are ALSO in
> those other locations?
>
>
I must say a common gdal build (either FWTools, OSGeo4w, ms4w whatever) may
use dll-s with the same names as many other libraries a user may install. In
my particular case mono and subversion is just a live example. but we could
find many others that use zlib libpng libcurl whatever (these are widely
used libraries in the world). I don't actually suffer from this problem
because I never rely on the PATH environment to load the GDAL dependencies
and I would evangelize against this practice when trying to find out a
reasonable setup approach here also.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/6b017d2e/attachment.html
From warmerdam at pobox.com  Thu Jan  6 17:49:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  6 17:49:37 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <037401cbadee$77fdbb10$67f93130$@roberts@duke.edu>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$@roberts@duke.edu>
Message-ID: <4D2646EF.1080308@pobox.com>

On 11-01-06 05:10 PM, Jason Roberts wrote:
> Frank,
>
> Thanks for sharing your opinion. I do have one question that I hope you will
> weigh in on. Which of the following two options seems better to you:
>
> 1. The GDAL libraries (possibly accompanied with executable programs) are
> installed as a separately from the GDAL Python bindings. The libraries are
> installed to \Program Files as you describe and the Python bindings are
> installed in the standard Python location. A Windows Python programmer
> wanting to use GDAL would perform two installs: one for the GDAL libraries,
> the other for the bindings.
>
> 2. The GDAL Python bindings include a private copy of the GDAL libraries
> (with no executable programs). These are installed to a private subdirectory
> with the bindings. A Windows Python programmer wanting to use GDAL only
> needs to perform one install: the bindings.
>
> #1 is essentially how things are done now, just not following Windows best
> practices (not using \Program files) and without any automation to ease the
> process (no regularly maintained installer for the Python bindings).
>
> I was proposing #2, basically under the argument that a Windows Python
> programmer who needs to use GDAL will rarely ever need to use GDAL for some
> other purpose, and therefore not want to install and think about a separate
> installation of the GDAL libraries themselves. But if you don't believe
> that, or think it is important that the libraries remain distinct from the
> bindings in this scenario for some other reason, then we would appreciate
> your opinion.

Jason,

I don't have a strong position on this, but I would note that beyond
real Python programmers wanting to use the bindings, they are also needed
just to run the python commandline utilities (such as rgb2pct.py).  So
there is definately a large body of folks who would benefit from having
working python for the python utilities, and the regular commandline
executables.

Another benefit of even Python using GDAL from a standard location is
things like format plugins could be easily handled in one place.

Actually, the more I think about it, the more I prefer even the Python
bindings to use the GDAL under \Program Files\GDAL.

If the Pythonistas really want to have their own copy of GDAL then
we really don't need to have this conversation.  They can do their
own thing, in their own place and there is no need for meaningful
cooperation with the core project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Thu Jan  6 17:56:22 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  6 17:56:26 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <-1353947568404632782@unknownmsgid>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
	<1214917644023838416@unknownmsgid>
	<AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>
	<767950673915584940@unknownmsgid>
	<AANLkTimLm+x2X386_xA2MUp0J7MzEwRLAnTPPURvMuUX@mail.gmail.com>
	<-1353947568404632782@unknownmsgid>
Message-ID: <AANLkTimv3ZosUdt4UnuKs4WiqHOr1ECm-kPKUBBGgdp+@mail.gmail.com>

2011/1/6 Jason Roberts <jason.roberts@duke.edu>


>
> So #3 is not better by virtue of not having to modify the bindings; it does
> have to modify the bindings. But #3 is appealing because setting the PATH
> from Python code sometimes has weird issues. For example, when I tried it in
> my code, it produced a weird problem when I tried to use the ?nose? Python
> testing framework to run test cases that involved calling Python modules
> from GDAL and ArcGIS. The problem there may ultimately be a Microsoft issue
> in which the environment settings for a process are maintained by the
> Microsoft C runtime library (msvcrt*.dll) and Python, ArcGIS, and GDAL may
> use different versions of that library. I do not want to digress into this
> here, but suffice to say, I prefer #3 to #2 because it did not have this
> problem.
>
>
>

This is quite a common issue the getenv/_putenv CRT functions operate only
on the data structures accessible to the run-time library (CRT) and not on
the environment "segment" created for the process by the operating system.
In this regard the libraries work only on a snapshot of the variables that
have been set during the CRT startup. In this case we should probably find a
function that invokes the
SetEnvironmentVariable<http://msdn.microsoft.com/en-us/library/ms686206%28v=vs.85%29.aspx>API
instead.



>
>
> 1.    Modify the makefiles for your SDK so that it runs
> release-XXXX-dev\gdal\swig\python\setup.py with the ?bdist
> --formats=wininst? option. This will produce an installation program such as
> gdal-1.7.3.win32-py2.5.exe. This is what the user will run to install the
> Python bindings together with a private copy of the GDAL DLLs used just by
> those bindings. On Python 2.6 and later, we probably want ?bdist
> --formats=msi? to produce a .msi file rather than a .exe, because Windows
> likes .msi files much better than .exes for security purposes. IIRC, Python
> 2.5 and earlier do not have the msi option.
>
>
>
This can be done fairly easily. Does this mean we would require each build
for multiple python versions?


> 2.    Modify release-XXXX-dev\gdal\swig\python\setup.py to include the
> GDAL DLLs and data files in the data_files list that is passed to the
> setup() function. Make sure it is only done for Windows (Python code can
> check that). The goal is to have the installation program create the
> following kind of installation:
>
>
>
Hmmm. I'm keen to avoid any local modifications in the compiled files
throughout the build system. Do we have some option to load this infromation
from an external file (which is probably loaded by setup.py if exists)? Or I
must write a custom setup2.py containing this customization.



> 3.    Introduce a new file
> release-XXXX-dev\gdal\swig\python\extensions\_gdal_dll_loader.cpp. This file
> will call GetDllDirectory to find the current DLL directory setting, call
> SetDllDirectory to C:\PythonXX\Lib\site-packages\osgeo\bin (or wherever the
> Python instance is installed), call LoadLibrary("gdal17.dll"), and call
> SetDllDirectory back to what it was before. There are more details to
> consider. For example, we might want to have it call LoadLibrary first to
> see if it can load the GDAL DLL from the PATH, allowing the user to use
> their own GDAL DLLs without having to overwrite the ones in the Python
> directory. Or we might *not* want to do that, with the idea that the GDAL
> Python bindings must be tightly coupled to a particular version of GDAL?s
> DLLs.
>
>
>
That seems to be quite complicated, not sure it that's working for those
libraries using LoadLibrary binding at run time. Wouldn't that be better
getting back to add the location to the PATH of the process in a loader.py
(using SetEnvironmentVariable).


> 5.    Modify gdal.py, osr.py, and so on to do something like this:
>
>
>
> import sys
>
> if sys.platform == 'win32':     # TODO: add check for Windows x64 as well
>
>     try:
>
>         import osgeo._gdal_dll_loader          # As part of this, Python
> will call an ?init? function inside. That function will do the
> SetDllDirectory, etc.
>
>     except:
>
>         pass
>
>
Such changes can be done in the SWIG interface files easily.


>
>
> 6.    Do whatever is necessary to ensure the GDAL_DATA etc are properly
> set up inside GDAL. I can?t remember if this will ?just work? using
> directories named gdal-data, gdal-plugins, or if it is necessary for the
> _gdal_dll_loader.pyd to call some GDAL functions to make it happen.
>
>
>

I guess this could also be set form a python script (probably from
loader.py)


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/e236bf09/attachment.html
From jluis at ualg.pt  Thu Jan  6 18:03:42 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Jan  6 18:03:48 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D26372F.4070906@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>	<4D259642.7000309@gmail.com>
	<4D261C9F.4050200@noaa.gov>	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov>
Message-ID: <4D264A4E.8070001@ualg.pt>

On 06-01-2011 21:42, Christopher Barker wrote:
> On 1/6/11 12:31 PM, Jason Roberts wrote:
>> Here are some comments on specific parts of your mail:
>>> Program Files\GDAL\1.6\gdal.dll
>>>    and
>>> Program Files\GDAL\1.6\gdal.dll
>
>> Those would be reasonable locations for GDAL to live if the GDAL team
>> decided to distribute the GDAL binaries using an installer that 
>> adhered to
>> the best practices on Windows.
>
> I *think* we're heading for a consensus to do that, but not many 
> people have been on this thread.

Hi,

I have been following this with attention and sometimes I thought I had 
something to say but than it has many python specific issues, which I'm 
not versed at all. My experience with other installers is GMT & Mirone.  
Here I simply put the gdal dll and ALL its dependencies (determined by 
careful Dependency Walker analysis) in the same directory as the other 
exes. Since this must be in the PATH, the gdal package goes along. But 
this solution normally doesn't care about the gdal exes.
Also a word about the "best practice on Windows". I really don't see 
anything not even good in that practice to put them in "Program Files". 
Having directories with blanks in their name give nothing but future 
problems when running command line programs (I have seen that happen 
many times). The GMT & Mirone installs propose as default a C:\programs 
diectory. Let me remember that "Program Files" is not a unique name. For 
example in Portugues Win versions it is called "O Meus Programas" 
(Horror). Remember also that MS used to have "Documents and Settings" 
but now on Win7 it's only "Users".


>> Incidentally, Windows does support both symbolic and hard links, 
>> although it
>> is not widely known, and I'm not sure I'd recommend their use for this
>> particular problem.
>
> I've heard that, but never seen it done.

It works pretty well, the command is mklink and works much like on *nix 
BUT exists only on Vista and Win7.

Time to time, it has been raised also the hypothesis to put the dlls in 
windowes\system32. PLEASE, PLEASE don't even think on that. It's the 
easiest way of making the worst dll-hell. I learned that after spending 
many hours trying to understand why GDAL was not working in the 
classroom computers. It turned out to be an very old zlib1.dll put there 
by ArcS*


Joaquim


From jason.roberts at duke.edu  Thu Jan  6 18:43:19 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 18:43:25 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D2646EF.1080308@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com>
Message-ID: <038f01cbadfb$7fcd7940$7f686bc0$@roberts@duke.edu>

Frank,

Thanks for your thoughts. Based on them, I'd recommend the following two
things be created.

1. GDAL windows installation program, or at minimum, a wiki page that says
how to install the GDAL libraries and utilities (executables and Python
scripts) to \Program Files\GDAL\... Perhaps a quick compromise would be for
Tamas's build system to produce a .zip that would have everything in a
suitable directory structure and for wiki page to instruct the user "just
unzip this to \Program Files\GDAL\...".

2. GDAL Python bindings installation program. This could be easily created
using the standard Python distutils stuff I've been mentioning, and would
install the bindings to the normal Python place. The bindings would ideally
be modified to check for and explicitly load libraries from \Program
Files\GDAL\... This would eliminate the need to modify the PATH variable.

A Windows Python programmer would just install those two things and they're
done. No questions about what goes where. No need to set any environment
variables.

People like me who embed GDAL in their own application would now have a new
alternative: rather than including GDAL libraries we could instruct the user
to download an official GDAL build and install it, and then just use it from
there.

What do you think?

Jason

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, January 06, 2011 5:49 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

On 11-01-06 05:10 PM, Jason Roberts wrote:
> Frank,
>
> Thanks for sharing your opinion. I do have one question that I hope you
will
> weigh in on. Which of the following two options seems better to you:
>
> 1. The GDAL libraries (possibly accompanied with executable programs) are
> installed as a separately from the GDAL Python bindings. The libraries are
> installed to \Program Files as you describe and the Python bindings are
> installed in the standard Python location. A Windows Python programmer
> wanting to use GDAL would perform two installs: one for the GDAL
libraries,
> the other for the bindings.
>
> 2. The GDAL Python bindings include a private copy of the GDAL libraries
> (with no executable programs). These are installed to a private
subdirectory
> with the bindings. A Windows Python programmer wanting to use GDAL only
> needs to perform one install: the bindings.
>
> #1 is essentially how things are done now, just not following Windows best
> practices (not using \Program files) and without any automation to ease
the
> process (no regularly maintained installer for the Python bindings).
>
> I was proposing #2, basically under the argument that a Windows Python
> programmer who needs to use GDAL will rarely ever need to use GDAL for
some
> other purpose, and therefore not want to install and think about a
separate
> installation of the GDAL libraries themselves. But if you don't believe
> that, or think it is important that the libraries remain distinct from the
> bindings in this scenario for some other reason, then we would appreciate
> your opinion.

Jason,

I don't have a strong position on this, but I would note that beyond
real Python programmers wanting to use the bindings, they are also needed
just to run the python commandline utilities (such as rgb2pct.py).  So
there is definately a large body of folks who would benefit from having
working python for the python utilities, and the regular commandline
executables.

Another benefit of even Python using GDAL from a standard location is
things like format plugins could be easily handled in one place.

Actually, the more I think about it, the more I prefer even the Python
bindings to use the GDAL under \Program Files\GDAL.

If the Pythonistas really want to have their own copy of GDAL then
we really don't need to have this conversation.  They can do their
own thing, in their own place and there is no need for meaningful
cooperation with the core project.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jason.roberts at duke.edu  Thu Jan  6 18:54:38 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 18:54:45 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimv3ZosUdt4UnuKs4WiqHOr1ECm-kPKUBBGgdp+@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<-1046229538008938668@unknownmsgid>
	<AANLkTimXNFU4iCQJCyw88X9wwEQ6Li9mJSiJdXM4tzDw@mail.gmail.com>
	<1214917644023838416@unknownmsgid>
	<AANLkTimf6ZfP-X4MN-7VQxOj5kBg8SEDQ6WbMVYUTSCw@mail.gmail.com>
	<767950673915584940@unknownmsgid>
	<AANLkTimLm+x2X386_xA2MUp0J7MzEwRLAnTPPURvMuUX@mail.gmail.com>
	<-1353947568404632782@unknownmsgid>
	<AANLkTimv3ZosUdt4UnuKs4WiqHOr1ECm-kPKUBBGgdp+@mail.gmail.com>
Message-ID: <039001cbadfd$14d33bf0$3e79b3d0$@roberts@duke.edu>

 

1.    Modify the makefiles for your SDK so that it runs
release-XXXX-dev\gdal\swig\python\setup.py with the "bdist
--formats=wininst" option. This will produce an installation program such as
gdal-1.7.3.win32-py2.5.exe. This is what the user will run to install the
Python bindings together with a private copy of the GDAL DLLs used just by
those bindings. On Python 2.6 and later, we probably want "bdist
--formats=msi" to produce a .msi file rather than a .exe, because Windows
likes .msi files much better than .exes for security purposes. IIRC, Python
2.5 and earlier do not have the msi option.

 

This can be done fairly easily. Does this mean we would require each build
for multiple python versions?

 

Yes, it would mean that. One build for Python 2.5, one for 2.6, one for 2.7,
etc. This is how it is typically done.

 

 

2.    Modify release-XXXX-dev\gdal\swig\python\setup.py to include the GDAL
DLLs and data files in the data_files list that is passed to the setup()
function. Make sure it is only done for Windows (Python code can check
that). The goal is to have the installation program create the following
kind of installation:

 

Hmmm. I'm keen to avoid any local modifications in the compiled files
throughout the build system. Do we have some option to load this infromation
from an external file (which is probably loaded by setup.py if exists)? Or I
must write a custom setup2.py containing this customization.



I was not saying that setup.py be forked and a special copy exist for
windows. I was saying that setup.py should internally check whether it was
being executed on Windows (check Python's sys.platform variable), and then
perform special logic. But this may be moot because it sounded like Frank
was not keen on my suggestion of enclosing a private copy of the GDAL DLLs
with the Python bindings. If we avoid my suggestion then we are left with
the idea of putting them in \Program Files\GDAL. In that case, we would not
need to modify setup.py for this purpose. 


 

3.    Introduce a new file
release-XXXX-dev\gdal\swig\python\extensions\_gdal_dll_loader.cpp. This file
will call GetDllDirectory to find the current DLL directory setting, call
SetDllDirectory to C:\PythonXX\Lib\site-packages\osgeo\bin (or wherever the
Python instance is installed), call LoadLibrary("gdal17.dll"), and call
SetDllDirectory back to what it was before. There are more details to
consider. For example, we might want to have it call LoadLibrary first to
see if it can load the GDAL DLL from the PATH, allowing the user to use
their own GDAL DLLs without having to overwrite the ones in the Python
directory. Or we might not want to do that, with the idea that the GDAL
Python bindings must be tightly coupled to a particular version of GDAL's
DLLs.

 

That seems to be quite complicated, not sure it that's working for those
libraries using LoadLibrary binding at run time. Wouldn't that be better
getting back to add the location to the PATH of the process in a loader.py
(using SetEnvironmentVariable).

I do not think it would be good to tamper with setting the PATH. I am not
certain, but I think Python's environment handler may call _putenv rather
than SetEnvironmentVariable, or something like that, which can cause some
problems. It might be better just to use SetDllDirectory. Also, as Chris
pointed out, the Python ctypes module can be used to call win32 APIs. This
would eliminate the need for a new _gdal_dll_loader module. Instead, the
try/except block that I described below would just call win32 directly via
ctypes. It could do the necessary SetDllDirectory/LoadLibrary/etc itself.

 

 

5.    Modify gdal.py, osr.py, and so on to do something like this:

 

import sys

if sys.platform == 'win32':     # TODO: add check for Windows x64 as well

    try:

        import osgeo._gdal_dll_loader          # As part of this, Python
will call an "init" function inside. That function will do the
SetDllDirectory, etc.

    except:

        pass


Such changes can be done in the SWIG interface files easily.

 

Sounds good to me.


 

 

6.    Do whatever is necessary to ensure the GDAL_DATA etc are properly set
up inside GDAL. I can't remember if this will "just work" using directories
named gdal-data, gdal-plugins, or if it is necessary for the
_gdal_dll_loader.pyd to call some GDAL functions to make it happen.

 


I guess this could also be set form a python script (probably from
loader.py)

If we follow the \Program Files\GDAL suggestion, then I further suggest that
GDAL itself be modified to use that location as the default for GDAL_DATA,
GDAL_PLUGINS, etc. That way the user does not have to set ANY environment
variables for GDAL to work. That would be a major plus because, frankly,
Windows users rarely have to set environment variables.





Best regards,

Tamas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/76b04a99/attachment-0001.html
From jef at norbit.de  Thu Jan  6 18:56:58 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu Jan  6 18:57:30 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D263B7F.4030205@pobox.com>
References: <AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
Message-ID: <20110106235658.GA5866@norbit.de>

Hi Frank,

On Thu, 06. Jan 2011 at 17:00:31 -0500, Frank Warmerdam wrote:
> I have no objection to using \Program Files\GDAL\<major>.<minor>\ as a
> standard location for GDAL stuff on windows.  If this is done, the GDAL
> data search location should be compiled in for this location on windows,
> much as it defaults to /usr/share/gdal (or /usr/local/share/gdal) on
> linux.

Just one remark (I don't follow all the python stuff ;)):

The program files directory is usually localized so %PROGRAMFILES% should be
used and the drive letter isn't necessarily C.

Windows 7 might actually be different - perhaps they now even now use symlinks
to point a localized path to a hidden "Program Files".


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From mykillk at gmail.com  Thu Jan  6 19:02:53 2011
From: mykillk at gmail.com (Michael Koehmstedt)
Date: Thu Jan  6 19:02:55 2011
Subject: [gdal-dev] Combining TIFFs w/ different color palettes
In-Reply-To: <4D24ECD8.8050901@pobox.com>
References: <1294261598752-5893567.post@n2.nabble.com>
	<4D24ECD8.8050901@pobox.com>
Message-ID: <AANLkTinEBd0e73YeZ9V-akUMDGGtD+p1+=w9FOq0mzsS@mail.gmail.com>

That's a shame. I just might have to write my own GDAL tool to accomplish
this then (should be a fun way to learn the GDAL library as well). I've
tried converting to RGB and going from there, but the resulting file sizes
become very large in comparison and take hours to merge.

On Wed, Jan 5, 2011 at 2:12 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 11-01-05 04:06 PM, MyKillK wrote:
>
>>
>> Hello all,
>>
>> My question is simple. Is it possible to combine two GeoTIFFs, each with
>> its
>> own unique color palette into a single image that is properly color
>> mapped?
>> Each image only has 16 colors so I feel like it should be possible to copy
>> Image #1's color table straight into indexes 0-15 and then remap Image
>> #2's
>> color table to indexes 16-31. For the life of I can't figure out how this
>> can be done, it always wants to use Image #1's color table alone in the
>> merged TIFF.
>>
>
> Michael,
>
> I am not aware of any existing GDAL application to do this.  You  could
> use pct2rgb.py on each image, merge the RGB images, and then use rgb2pct.py
> to produce a paletted image from the result that would likely have 32
> colors.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Michael Koehmstedt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110106/c3035472/attachment.html
From Chris.Barker at noaa.gov  Thu Jan  6 19:04:49 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan  6 19:04:54 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D264A4E.8070001@ualg.pt>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D264A4E.8070001@ualg.pt>
Message-ID: <4D2658A1.3050307@noaa.gov>

On 1/6/11 3:03 PM, Joaquim Luis wrote:
> Also a word about the "best practice on Windows". I really don't see
> anything not even good in that practice to put them in "Program Files".
> Having directories with blanks in their name give nothing but future
> problems when running command line programs (I have seen that happen
> many times).

True, I'm still quite amazed how MS has ignored the command line for 
years. Sure, we geeks are a small fraction of Windows users, but a small 
fraction of a huge userbase is still a LOT.

Perhaps that's why the standard place for Python is NOT in "Program Files"

That being said, "Program Files" does seem to work fine for me most of 
the time.

> Time to time, it has been raised also the hypothesis to put the dlls in
> windowes\system32. PLEASE, PLEASE don't even think on that.

That, we do have a consensus on!

By the way, isn't there some new stuff about "side by side" installs or 
something -- that's supposed to help dll hell?

On 1/6/11 2:49 PM, Frank Warmerdam wrote:
> I don't have a strong position on this, but I would note that beyond
> real Python programmers wanting to use the bindings, they are also needed
> just to run the python commandline utilities (such as rgb2pct.py). So
> there is definately a large body of folks who would benefit from having
> working python for the python utilities, and the regular commandline
> executables.

yup. Also, I use gdal command line utilities and python bindings. It's 
actually really nice to know that they are using the exact same 
versions, as I can test stuff with the utilities and compare results.

> Another benefit of even Python using GDAL from a standard location is
> things like format plugins could be easily handled in one place.

Yes, and then Perl, and who knows what else can share the same install.

> Actually, the more I think about it, the more I prefer even the Python
> bindings to use the GDAL under \Program Files\GDAL.

+1 from me, too.

I winder where Howard is? But anyway, the gdal PyPi site (which I think 
Howard wrote/maintained) says:

"""
Windows

You will need the following items to complete an install of the GDAL 
Python bindings on Windows:

     * GDAL Windows Binaries The basic install requires the 
gdalwin32exe###.zip (### is the version number). Other files you see in 
the directory are for various optional plugins and development 
headers/include files. After downloading the zip file, extract it to the 
directory of your choosing.
"""

** the problem here is that that zip file hasn'tbeen maintained for a while.

"""
     * GDAL Python Bindings available at the Python Cheeseshop. An 
executable installer is available for both Python 2.4 or 2.5 or as a 
Python egg.
"""
** this is pretty much what Jason is suggeting - a binary egg dependent 
on a certain gdal install.

"""
As explained in the README_EXE.txt file, after unzipping the GDAL 
binaries you will need to modify your system path and variables. If 
you're not sure how to do this, read the Microsoft KnowledgeBase doc

    1. Add the installation directory bin folder to your system PATH, 
remember to put a semicolon in front of it before you add to the 
existing path.

       C:\gdalwin32-1.7\bin

    2. Create a new user or system variable with the data folder from 
your installation.

       Name : GDAL_DATA
       Path : C:\gdalwin32-1.7\data
"""

It would be nice to remove these steps. Again, I think Jason's got some 
good ideas for that.


By the way -- it is fairly common for python packages to include command 
line utilities. There are tools in distutils and setuptools to support 
that -- they get installed in a Scripts directory in the Python install. 
Should the Python-based gdal utilities go there?

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jef at norbit.de  Thu Jan  6 19:06:43 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu Jan  6 19:07:11 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D264A4E.8070001@ualg.pt>
References: <AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D264A4E.8070001@ualg.pt>
Message-ID: <20110107000643.GB5866@norbit.de>

Hi Joaquim,

On Thu, 06. Jan 2011 at 23:03:42 +0000, Joaquim Luis wrote:
> Time to time, it has been raised also the hypothesis to put the dlls in  
> windowes\system32. PLEASE, PLEASE don't even think on that. It's the  
> easiest way of making the worst dll-hell.

Yes, please don't.  system32 is even checked before %PATH% - apparently there's
no way around the updating the DLL in system32 (potentially breaking other
stuff) or putting the right DLL into the same directory then the DLL/EXE
referencing it.  Been there with OSGeo4W (see [1]) - still there is the
problem, that there might already be conflicting DLLs in system32 that take
precedence.



J?rgen

[1] http://trac.osgeo.org/osgeo4w/ticket/35

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From jluis at ualg.pt  Thu Jan  6 19:25:51 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Jan  6 19:25:57 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D2658A1.3050307@noaa.gov>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>	<4D259642.7000309@gmail.com>
	<4D261C9F.4050200@noaa.gov>	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>	<4D26372F.4070906@noaa.gov>
	<4D264A4E.8070001@ualg.pt> <4D2658A1.3050307@noaa.gov>
Message-ID: <4D265D8F.6040704@ualg.pt>


> Perhaps that's why the standard place for Python is NOT in "Program 
> Files"

Yes,  there is wisdom.

>
> That being said, "Program Files" does seem to work fine for me most of 
> the time.

And for the (1 - "most") times that it didn't work you knew how to fix 
it (enclosing the full path with "") but many people don't know it.

> By the way, isn't there some new stuff about "side by side" installs 
> or something -- that's supposed to help dll hell?

I think you are referring to the "manifests" but here also MS has 
changed their mind (aleluia). VC2010 doesn't have them anymore which IMO 
is a compelling reason to use this compiler whenever possible.

Joaquim
From jason.roberts at duke.edu  Thu Jan  6 20:44:23 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan  6 20:44:30 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <20110106235658.GA5866@norbit.de>
References: <AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<20110106235658.GA5866@norbit.de>
Message-ID: <03a701cbae0c$69cbb6f0$3d6324d0$@roberts@duke.edu>

> Windows 7 might actually be different - perhaps they now even now use
symlinks
> to point a localized path to a hidden "Program Files".

Good point. In Vista, Microsoft introduced a "virtualization" feature that
silently redirects write attempts to Program Files. This is part of the very
complicated, much maligned User Account Control (UAC) system that improved
security but resulted in numerous popups from the o/s asking for permission
to do things. This was improved in Windows 7 but that virtualization thing
still exists and causes pain for app developers.

It can be circumvented by using the "Run As Administrator" option when
installing something (you must do it even when your account is, in fact, an
administrator). Installation programs can request a certain level of
privilege that makes it unnecessary for the user to do it.

For more on this, search for "Windows virtual store" (with no quotes).

The consequence for GDAL is that if GDAL is going to develop an installer
for the GDAL libraries and utilities, it would be best if that installer
technology was aware of these issues. For example, creating a .msi installer
with Microsoft Visual Studio is likely to give good success, while
hand-crafting an installation .exe yourself is likely to not work as
intended.

Jason

From warmerdam at pobox.com  Thu Jan  6 22:55:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  6 22:55:54 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <038f01cbadfb$7fcd7940$7f686bc0$@roberts@duke.edu>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com>
	<038f01cbadfb$7fcd7940$7f686bc0$@roberts@duke.edu>
Message-ID: <4D268EB6.5050601@pobox.com>

On 11-01-06 06:43 PM, Jason Roberts wrote:
> Frank,
>
> Thanks for your thoughts. Based on them, I'd recommend the following two
> things be created.
>
> 1. GDAL windows installation program, or at minimum, a wiki page that says
> how to install the GDAL libraries and utilities (executables and Python
> scripts) to \Program Files\GDAL\... Perhaps a quick compromise would be for
> Tamas's build system to produce a .zip that would have everything in a
> suitable directory structure and for wiki page to instruct the user "just
> unzip this to \Program Files\GDAL\...".
...
> What do you think?

Jason,

I'm supportive, but not necessarily willing to take it as action item
for myself.

I would suggest building it as an installer .exe, perhaps using NSIS as
I did for FWTools, or perhaps the method mentioned by Jurgen produces
a nice installer.

One question not discussed is whether GDAL should be minimalist or
maximalist.  That is, do we want to include as many formats as possible
despite the fact that it drags in lots of supporting libraries?  If we
just use whatever decision OSGeo4W uses then we will have a fairly
maximalist solution which is ok I suppose but might make integration of
the resulting GDAL in other complex applications messy.

I would like to suggest production of such an installer be done in such
a way that the generating scripts live in SVN somewhere, and with
instructions for the process in the wiki so it isn't all tied to one
person (as FWTools was).

Man, I'm really tempted to leap into this myself but I have so many
other outstanding items right now.  I am willing to assist in an
effort by a small (2-3 people?) team.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Thu Jan  6 23:11:08 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  6 23:11:09 2011
Subject: [gdal-dev] gdal_polygonize.py binding error
In-Reply-To: <4D26173C.2000302@und.edu>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
	<AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
	<4D25FE37.7080406@noaa.gov> <4D26173C.2000302@und.edu>
Message-ID: <AANLkTi=KZzzg+GTZBZHo5P3dbxMQ5stTuJE+tCokugn0@mail.gmail.com>

 Xiaodong,

Check again after setting the environment variable PYTHONPATH to the path to
the new python bindings.

On Fri, Jan 7, 2011 at 12:55 AM, Xiaodong Zhang <xiaodong.zhang2@und.edu>wrote:

> Hi,
>
> I just updated the older version  of gdal (1.4.2) with the latest version
> of gdal (1.7.3) on x64 RedHat. Got an error when using gdal_polygonize.py
> for a test image
>
> gdal_polyzonize.py t2.tif -f "ESRI Shapefile" pt2
>
> gdal.Polyzonize() not available. You are likely using "old gen" bindings or
> an older version of the next gen bindings.
>
> I found the previous threads on this issue, but could not find an answer.
>
> Any idea? Thanks
>
> Xiaodong
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/7f2334c2/attachment.html
From warmerdam at pobox.com  Thu Jan  6 23:20:45 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  6 23:21:03 2011
Subject: [gdal-dev] Trouble handling HFA histogram (.img file)
In-Reply-To: <4064B6E43A2FA546858C82DAF82702FA042177DA@srv509.caemilusa.com>
References: <4064B6E43A2FA546858C82DAF82702FA042177DA@srv509.caemilusa.com>
Message-ID: <4D26949D.3030800@pobox.com>

On 11-01-05 04:09 PM, Michael Buchoff wrote:
> We are trying to convert a 16-bit img into an 8-bit tif. Unfortunately, the
> colors appear VERY dark (not downconverted, but just plain dark). I suspect
> that this has something to do with the histogram. The gdalinfo of the original
> image can be found here <http://pastebin.com/cmVxRJyE>.
>
> When I tell GDAL to convert straight from 16-bit to 8-bit with:
>
> gdal_translate -ot Byte -of GTiff 28jan09_worldview_tucumcari_nm.img output.tif
>
> I get what looks like the original image with clouds covering it? almost solid
> white. (See the gdalinfo here <http://pastebin.com/ike52mMp>)

Michael,

Note that the above gdal_translate is just truncating all values
above 255 to 255 so it is not surprising that you got bad results.

> When I scale around 16-bits:
>
> gdal_translate -ot Byte -of GTiff *-scale 0 65535 0 255*
> 28jan09_worldview_tucumcari_nm.img output.tif
>
> I get a solid black image. (See the gdalinfo here <http://pastebin.com/XpJL6AQY>)

Not surprising given that the data is all in the range
117 to 2047.

> When I scale around the extents specified by the histogram:
>
> gdal_translate -ot Byte -of GTiff *-scale 117 2047* 0 255
> 28jan09_worldview_tucumcari_nm.img output.tif
>
> I get the dark image described above. (See the gdalinfo here
> <http://pastebin.com/Ju4azd47>)
>
> I suspect if we can get GDAL to process and remove the histogram, we will not
> have these issues. Any help in doing this or further diagnosing the issue would
> be greatly appreciated.

I don't believe the histogram is coming into it.  gdal_translate always
does a linear scaling.  I think you need to either fool around with the
scaling range to get a more pleasing result or consider moving to a
non-linear scaling - perhaps a histogram equalization stretch.  For
a non-linear scaling you will need to consider another tool than
gdal_translate.  I produced a histogram equalization and downscaler
from 16bit to 8bit as "gdal/apps/gdalenhance.cpp" but I didn't really
finish to a broadly useful level.  Nevertheless you might find it
of some use, or a good starting point if you want to write something
yourself.

Of course, other software like GRASS, and OSSIM no doubt have
non-linear scaling options available for your use case.  The
world is bigger than GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jef at norbit.de  Thu Jan  6 23:23:23 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu Jan  6 23:23:50 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <20110106041319.GA18401@norbit.de> <4D268EB6.5050601@pobox.com>
References: <4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <4D268EB6.5050601@pobox.com>
Message-ID: <20110107042323.GA25934@norbit.de>

Hi Frank,

On Thu, 06. Jan 2011 at 22:55:34 -0500, Frank Warmerdam wrote:
> I would suggest building it as an installer .exe, perhaps using NSIS as
> I did for FWTools, or perhaps the method mentioned by Jurgen produces
> a nice installer.

> Man, I'm really tempted to leap into this myself but I have so many
> other outstanding items right now.  I am willing to assist in an
> effort by a small (2-3 people?) team.

Not sure if everyone noticed
http://lists.osgeo.org/pipermail/gdal-dev/2011-January/027253.html.  4
downloads of [1] and 5 of [2] so far?

That's pretty close I think.

The nsi could need some finishing touches (version handling on upgrades and
some artwork).  But apart from that it seems to work.  You get a desktop link
and a start menu entry that both opens a command line window from where you can
use GDAL and start python with gdal available.

But that's as far as it gets with repacking OSGeo4W.  With that we don't
support different/other pythons, perl, compilers...



J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From Jonathan.Shaw at gdc4s.com  Fri Jan  7 00:06:06 2011
From: Jonathan.Shaw at gdc4s.com (Jonathan.Shaw@gdc4s.com)
Date: Fri Jan  7 00:07:12 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
References: <4D24EFBD.1050201@noaa.gov><AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com><4D259642.7000309@gmail.com>
	<4D261C9F.4050200@noaa.gov><035501cbade0$b84091b0$28c1b510$%roberts@duke.edu><4D26372F.4070906@noaa.gov>
	<4D263B7F.4030205@pobox.com><037401cbadee$77fdbb10$67f93130$%roberts@duke.edu><4D2646EF.1080308@pobox.com>
	<4D268EB6.5050601@pobox.com> <20110107042323.GA25934@norbit.de>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF7016E8016@AZ25EXM03.gddsi.com>

J?rgen,
 
I think this is a terrific start!
 
To bring this up to the capabilities that I already use from FWTools, how would an end user like myself add in support for additional formats (e.g. JPEG2000, MrSID) and .NET bindings?
 
Thanks,
Jonathan

________________________________

From: gdal-dev-bounces@lists.osgeo.org on behalf of J?rgen E. Fischer
Sent: Thu 1/6/2011 9:23 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] FWTools and GDAL 1.7.0



Hi Frank,

On Thu, 06. Jan 2011 at 22:55:34 -0500, Frank Warmerdam wrote:
> I would suggest building it as an installer .exe, perhaps using NSIS as
> I did for FWTools, or perhaps the method mentioned by Jurgen produces
> a nice installer.

> Man, I'm really tempted to leap into this myself but I have so many
> other outstanding items right now.  I am willing to assist in an
> effort by a small (2-3 people?) team.

Not sure if everyone noticed
http://lists.osgeo.org/pipermail/gdal-dev/2011-January/027253.html.  4
downloads of [1] and 5 of [2] so far?

That's pretty close I think.

The nsi could need some finishing touches (version handling on upgrades and
some artwork).  But apart from that it seems to work.  You get a desktop link
and a start menu entry that both opens a command line window from where you can
use GDAL and start python with gdal available.

But that's as far as it gets with repacking OSGeo4W.  With that we don't
support different/other pythons, perl, compilers...



J?rgen

--
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de <http://www.norbit.de/> 

--
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Fri Jan  7 05:26:07 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan  7 05:26:11 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <1588135365192677390@unknownmsgid>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
Message-ID: <AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>

2011/1/7 Jason Roberts <jason.roberts@duke.edu>

> Thanks for your thoughts. Based on them, I'd recommend the following two
> things be created.
>
> 1. GDAL windows installation program, or at minimum, a wiki page that says
> how to install the GDAL libraries and utilities (executables and Python
> scripts) to \Program Files\GDAL\... Perhaps a quick compromise would be for
> Tamas's build system to produce a .zip that would have everything in a
> suitable directory structure and for wiki page to instruct the user "just
> unzip this to \Program Files\GDAL\...".
>
>
Jason,

What would be the suitable directory structure? I'm keen to provide an
installer which could place the files to the right location. By using
WIX<http://wix.sourceforge.net/>it's could be generated automatically
by the command line tools candle.exe
and light.exe during the build process easily.

However naming the install root folder to GDAL doesn't seem to be a right
thing as we provide other packages like mapserver as well. For the sake of
simplicitly I could imagine to place everything in a common folder (like
SDKBuilds) and add a shortcut for invoking a command prompt (for starting
the commandline tools) and a shortcut to uninstall the package. I would also
mention OSGeo as the root, but I'm not sure how it will violate the files if
a similar installer will ever derived from an OSGeo4W bundle. (We may
probably warn the user not to install both versions side by side)

I may also be mention that by default referring to the programsfolder in the
installation process may select different folders depending on the
architecture (Win32/Win64) or the OS version. I don't think it would be a
good way to force everything to be in  "C:\Program Files" which contains the
x64 binaries on x64 platforms for example or it may reside in various
logical drives on a particular system. It would probably be reasonable to
use something like
SHGetSpecialFolderLocation<http://msdn.microsoft.com/en-us/library/bb762203%28v=vs.85%29.aspx>to
retrieve the current location in the loader program.



> 2. GDAL Python bindings installation program. This could be easily created
> using the standard Python distutils stuff I've been mentioning, and would
> install the bindings to the normal Python place. The bindings would ideally
> be modified to check for and explicitly load libraries from \Program
> Files\GDAL\... This would eliminate the need to modify the PATH variable.
>
>
That's ok with me as a separate installer provided by distutils.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/7470654c/attachment.html
From ahmettemiz88 at gmail.com  Fri Jan  7 07:10:34 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Jan  7 07:10:36 2011
Subject: [gdal-dev] to create "transparent" image
Message-ID: <AANLkTinsxP5FpDBJAqtDy2dZdTXHMPTUMdJRGY5rzgjF@mail.gmail.com>

hello

Could you possibly give me an idea to create a "transparent" image
from a shape file ?

how can I do that ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From jef at norbit.de  Fri Jan  7 07:40:25 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri Jan  7 07:40:51 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <0873B50412231C47AFF7ECE2B4226CF7016E8016@AZ25EXM03.gddsi.com>
References: <4D268EB6.5050601@pobox.com> <20110107042323.GA25934@norbit.de>
	<0873B50412231C47AFF7ECE2B4226CF7016E8016@AZ25EXM03.gddsi.com>
Message-ID: <20110107124025.GA9081@norbit.de>

Hi Jonathan,

On Thu, 06. Jan 2011 at 22:06:06 -0700, Jonathan.Shaw@gdc4s.com wrote:
> To bring this up to the capabilities that I already use from FWTools, how
> would an end user like myself add in support for additional formats (e.g.
> JPEG2000, MrSID) and .NET bindings?

If the ECW and MrSID DLLs are added into the addons directory creatensis.pl
would include them in the installer along with the gdal17-ecw and gdal17-mrsid
packages from OSGeo4W.  The standalone QGIS installer already does that.

No idea about the .NET bindings.  Those should probably be put into OSGeo4W
first.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From chaitanya.ch at gmail.com  Fri Jan  7 08:26:58 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan  7 08:27:00 2011
Subject: [gdal-dev] to create "transparent" image
In-Reply-To: <AANLkTinsxP5FpDBJAqtDy2dZdTXHMPTUMdJRGY5rzgjF@mail.gmail.com>
References: <AANLkTinsxP5FpDBJAqtDy2dZdTXHMPTUMdJRGY5rzgjF@mail.gmail.com>
Message-ID: <AANLkTimaMmjz1wYxeU5dbCkkPhhvjAvqqdBDmWdcbD0J@mail.gmail.com>

Ahmet,

Use the gdal_rasterize utility with a combination of the command line
options -a_nodata and -init with the same value.
To achieve transparency with the alpha band, give a fourth value for the
-burn option and make sure to include the fourth band with the -b option.

2011/1/7 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> Could you possibly give me an idea to create a "transparent" image
> from a shape file ?
>
> how can I do that ?
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/448aee8f/attachment.html
From antonio.rocha at deimos.com.pt  Fri Jan  7 09:15:07 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Fri Jan  7 09:14:17 2011
Subject: [gdal-dev] Strange printed lines for binary gdalinfo16 in Windows
Message-ID: <4D271FEB.60802@deimos.com.pt>

Greetings

I have just downloaded from here 
http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip, GDAL16 for 
Windows.
When I do gdalinfo.exe for a GRIB file before it prints the header of 
the file it prints:
ID 1 Class 14 Type 9 Stream 1025 Ver 0001, Octet-50 0, Octet-51 0 SectLen 52
repeatedly (nearly 1400). Is this a bug? Because I imagine that this is 
not an expected print...

Thanks
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5766 (20110107) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From jason.roberts at duke.edu  Fri Jan  7 09:20:14 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Jan  7 09:20:20 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D268EB6.5050601@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com>
	<038f01cbadfb$7fcd7940$7f686bc0$%roberts@duke.edu>
	<4D268EB6.5050601@pobox.com>
Message-ID: <03b701cbae76$00cf7140$026e53c0$@roberts@duke.edu>

Frank,

> I would suggest building it as an installer .exe, perhaps using NSIS as
> I did for FWTools, or perhaps the method mentioned by Jurgen produces
> a nice installer.

If possible, I would suggest the final output be a .msi (Windows Installer
package) rather than a .exe. In an effort to make the average user more
secure, Microsoft continues to clamp down on the flexibility afforded to
.exe installers, due to the trouble of disambiguating them from malicious
programs. It was a big shock when Windows Vista was introduced and it
prevented .exe installers from truly running with administrative rights even
if the logged on user was an administrator. Everybody knows about that issue
now and has learned how to modify their .exe to request those rights
(causing the user to be prompted for confirmation) but who knows what
Microsoft will do next. For that reason, I believe it would be better to
bite the bullet and adhere to their recommended installation format.

Microsoft's Visual Studio has long had an easy mechanism for building .msi
installers. It is what I would recommend for this, unless you prefer to use
a FOSS alternative, in which case I cannot advise on what would be good.
There are many. Perhaps J?rgen has a better idea.

> One question not discussed is whether GDAL should be minimalist or
> maximalist.  That is, do we want to include as many formats as possible
> despite the fact that it drags in lots of supporting libraries?  If we
> just use whatever decision OSGeo4W uses then we will have a fairly
> maximalist solution which is ok I suppose but might make integration of
> the resulting GDAL in other complex applications messy.

IMO, there are two primary goals of this packaging of GDAL: provide easy
access to just the GDAL command line utilities (separate from larger tool
suites such as FWTools and OSGeo4W), and provide the GDAL libraries in a
well-known location so they can be located by the various GDAL bindings. I
think a secondary goal is to provide GDAL libraries in a well-known location
for integration by arbitrary applications. Because the GDAL binaries will
not normally be in the PATH, only when the user is wanting to use the GDAL
utilities, the mere presence of a large number of supporting libraries will
not be an issue. As you noted, it is when it comes to integration that there
is a problem.

I don't think there's an easy answer for the minimalist/maximalist question.
I think it would be best to err on the maximimalist side, with the idea of
providing as fully-functional command line suite as possible. But if there
are particular libraries that are known to cause problems for popular
integration scenarios but are rarely used by command-line users, then leave
them out. I don't know how to identify such libraries; the GDAL team and
power users are the best source of that info. Over time, you can hopefully
ease any problems by moving things to plugins that are only loaded on
demand, allowing someone to integrate without hitting a problem unless the
plugin is loaded.  In the end, integrators are likely to be skilled
programmers and their fallback position will be to build a private copy of
GDAL with the select dependencies they need.

> I would like to suggest production of such an installer be done in such
> a way that the generating scripts live in SVN somewhere, and with
> instructions for the process in the wiki so it isn't all tied to one
> person (as FWTools was).
>
> Man, I'm really tempted to leap into this myself but I have so many
> other outstanding items right now.  I am willing to assist in an
> effort by a small (2-3 people?) team.

I would be happy offer opinions, review, and test but am not available to
lead at this point. As the developer of the primary source of Windows builds
of GDAL, I think Tamas is the logical leader for this if he is available.

Thank you for seeing this as an important priority.

Jason


From chaitanya.ch at gmail.com  Fri Jan  7 09:55:59 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan  7 09:56:01 2011
Subject: [gdal-dev] Strange printed lines for binary gdalinfo16 in Windows
In-Reply-To: <4D271FEB.60802@deimos.com.pt>
References: <4D271FEB.60802@deimos.com.pt>
Message-ID: <AANLkTi=hb1yu7R9q5kE9o86A-hig2meZAD=bS-cRea53@mail.gmail.com>

Ant?nio,

This is not a bug. This is the debugging information printed by the grib
driver. The code to print this has been commented out by Even a while ago.
Try a later version of GDAL for less verbosity.

2011/1/7 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Greetings
>
> I have just downloaded from here
> http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip, GDAL16 for
> Windows.
> When I do gdalinfo.exe for a GRIB file before it prints the header of the
> file it prints:
> ID 1 Class 14 Type 9 Stream 1025 Ver 0001, Octet-50 0, Octet-51 0 SectLen
> 52
> repeatedly (nearly 1400). Is this a bug? Because I imagine that this is not
> an expected print...
>
> Thanks
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5766 (20110107) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/b7364308/attachment.html
From jason.roberts at duke.edu  Fri Jan  7 10:07:57 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Jan  7 10:08:05 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
Message-ID: <03b801cbae7c$ab45b0c0$01d11240$@roberts@duke.edu>

Tamas,

 

WIX looks like a great technology for building the installation package.
I've never used it but I took a quick look and it seems to provide what is
needed.

 

As I understand it, you are pondering whether it would be better to have
GDAL in Program Files\OSGeo\GDAL or in Program Files\GDAL. Is it simply a
question aesthetics or principle, in which it seems proper to put all OSgeo
projects under Program Files\OSGeo, but there could be problems coordinating
the efforts of multiple projects to adhere to that carefully and not mash
each other's files? If that summarizes the issue, then I'd recommend going
with the more practical, less principled approach: put GDAL in Program
Files\GDAL, and OSGeo4W in Program Files\OSGeo4W. It could get messy if both
installers have to be able to create the Program Files\OSGeo directory but
not necessarily delete it when they are uninstalled, because there could be
another OSGeo project in there.

 

Along those lines, I would suggest that if GDAL plans to support
side-by-side installations of GDAL itself, then we need to contemplate
carefully whether to use Program Files\GDAL\GDAL-X.Y or Program
Files\GDAL-X.Y. I think either one would be ok, so long as whoever writes
the installer thinks out all the side-by-side installation/uninstallation
scenarios.

 

Another question, also already raised, is whether to have just two or all
three version numbers in the installation directory. I think that question
depends on whether you ever need to support bugfix releases installed
side-by-side (e.g. 1.8.0 and 1.8.1), and also whether the bindings and other
integrators will need to bind to specific bugfix releases or not. For
example, if you guarantee that all 1.8.x releases will have compatible
ABIs-that you will never introduce a change that will break the binary
interface without increasing the minor build number-then it would be ok to
just use X.Y in the directory name. But if that cannot be guaranteed, then
you need to support X.Y.Z so that bindings and other integrators can locate
the specific bugfix release that they are compatible with.

 

Following up on that point: I think we've agreed that we do not want the
user to have to set the PATH in order to have the GDAL bindings work.
Therefore the bindings must be changed to look for the GDAL libraries in the
well-known location. Because they currently use implicit linking, they are
tightly coupled to a particular version of the libraries. The user will have
to be aware that they must install a compatible pair of bindings + GDAL. The
GDAL team should decide right now about the X.Y vs. X.Y.Z compatibility
question.

 

Regarding x86 vs. x64. The GDAL installer should follow the standard
Microsoft convention. On an x64 machine, the x64 GDAL utils/libs should go
in \Program Files and the x86 utils/libs should go in \Program Files (x86).
The bindings and other integrators must be aware of x86 vs. x64 and locate
libs from the correct directory.

 

I agree that calling SHGetSpecialFolderLocation with an appropriate CSIDL is
an appropriate way to find the Program Files directory (addressing issue
noted by Joaquim and others that Program Files is localized). It is probably
ok to use the ProgramFiles and ProgramFiles(x86) environment variables if
calling the Win32 API is not easy for particular bindings.

 

Jason

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Friday, January 07, 2011 5:26 AM
To: Jason Roberts
Cc: Frank Warmerdam; gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

 

 

2011/1/7 Jason Roberts <jason.roberts@duke.edu>

Thanks for your thoughts. Based on them, I'd recommend the following two
things be created.

1. GDAL windows installation program, or at minimum, a wiki page that says
how to install the GDAL libraries and utilities (executables and Python
scripts) to \Program Files\GDAL\... Perhaps a quick compromise would be for
Tamas's build system to produce a .zip that would have everything in a
suitable directory structure and for wiki page to instruct the user "just
unzip this to \Program Files\GDAL\...".


Jason,

What would be the suitable directory structure? I'm keen to provide an
installer which could place the files to the right location. By using WIX
<http://wix.sourceforge.net/>  it's could be generated automatically by the
command line tools candle.exe and light.exe during the build process easily.

However naming the install root folder to GDAL doesn't seem to be a right
thing as we provide other packages like mapserver as well. For the sake of
simplicitly I could imagine to place everything in a common folder (like
SDKBuilds) and add a shortcut for invoking a command prompt (for starting
the commandline tools) and a shortcut to uninstall the package. I would also
mention OSGeo as the root, but I'm not sure how it will violate the files if
a similar installer will ever derived from an OSGeo4W bundle. (We may
probably warn the user not to install both versions side by side)

I may also be mention that by default referring to the programsfolder in the
installation process may select different folders depending on the
architecture (Win32/Win64) or the OS version. I don't think it would be a
good way to force everything to be in  "C:\Program Files" which contains the
x64 binaries on x64 platforms for example or it may reside in various
logical drives on a particular system. It would probably be reasonable to
use something like SHGetSpecialFolderLocation
<http://msdn.microsoft.com/en-us/library/bb762203%28v=vs.85%29.aspx>  to
retrieve the current location in the loader program. 

 

2. GDAL Python bindings installation program. This could be easily created
using the standard Python distutils stuff I've been mentioning, and would
install the bindings to the normal Python place. The bindings would ideally
be modified to check for and explicitly load libraries from \Program
Files\GDAL\... This would eliminate the need to modify the PATH variable.


That's ok with me as a separate installer provided by distutils.

 

Best regards,

Tamas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/8542e6b6/attachment-0001.html
From jluis at ualg.pt  Fri Jan  7 10:26:33 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Jan  7 10:26:53 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <03b801cbae7c$ab45b0c0$01d11240$@roberts@duke.edu>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>	<1294227690320-5891689.post@n2.nabble.com>	<4D24A0F0.3090308@noaa.gov>	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>	<4D24B854.5060104@noaa.gov>	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>	<4D24EFBD.1050201@noaa.gov>	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>	<4D259642.7000309@gmail.com>
	<4D261C9F.4050200@noaa.gov>	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>	<4D26372F.4070906@noaa.gov>
	<4D263B7F.4030205@pobox.com>	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>	<4D2646EF.1080308@pobox.com>
	<1588135365192677390@unknownmsgid>	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
	<03b801cbae7c$ab45b0c0$01d11240$@roberts@duke.edu>
Message-ID: <4D2730A9.80302@ualg.pt>

On 07-01-2011 15:07, Jason Roberts wrote:
>
> Tamas,
>
> WIX looks like a great technology for building the installation 
> package. I've never used it but I took a quick look and it seems to 
> provide what is needed.
>
> As I understand it, you are pondering whether it would be better to 
> have GDAL in Program Files\OSGeo\GDAL or in Program Files\GDAL. Is it 
> simply a question aesthetics or principle, in which it seems proper to 
> put all OSgeo projects under Program Files\OSGeo, but there could be 
> problems coordinating the efforts of multiple projects to adhere to 
> that carefully and not mash each other's files? If that summarizes the 
> issue, then I'd recommend going with the more practical, less 
> principled approach: put GDAL in Program Files\GDAL, and OSGeo4W in 
> Program Files\OSGeo4W. It could get messy if both installers have to 
> be able to create the Program Files\OSGeo directory but not 
> necessarily delete it when they are uninstalled, because there could 
> be another OSGeo project in there.
>

Let me just recall that OSGeo4W proposes the default install directory 
as C:\OSGeo4W
This is just my opinion and I feel quite at rest because I'm able to 
build GDAL and install it wherever I wont, but I would really hate that 
an installer would force me to install in a location contrary to my 
will. In particular when that location has blanks in the name (Program 
Files).
But, as I said it's just my private view.


Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/397a694b/attachment.html
From warmerdam at pobox.com  Fri Jan  7 10:28:37 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  7 10:29:02 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <03b801cbae7c$ab45b0c0$01d11240$@roberts@duke.edu>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
	<03b801cbae7c$ab45b0c0$01d11240$@roberts@duke.edu>
Message-ID: <4D273125.8010303@pobox.com>

On 11-01-07 10:07 AM, Jason Roberts wrote:
>put GDAL in Program Files\GDAL, and
> OSGeo4W in Program Files\OSGeo4W.

Jason,

I would note that OSGeo4W installs in C:\OSGeo4W by default, and there are
no plans currently to change this.  OSGeo4W will continue to use it's
internal copy of GDAL.

 > It could get messy if both installers have to
> be able to create the Program Files\OSGeo directory but not necessarily delete
> it when they are uninstalled, because there could be another OSGeo project in
> there.

I would prefer to stick to C:\Program Files\GDAL.

> Along those lines, I would suggest that if GDAL plans to support side-by-side
> installations of GDAL itself, then we need to contemplate carefully whether to
> use Program Files\GDAL\GDAL-X.Y or Program Files\GDAL-X.Y. I think either one
> would be ok, so long as whoever writes the installer thinks out all the
> side-by-side installation/uninstallation scenarios.

I prefer to just use the major.minor version as the subdirectory name.

C:\Program Files\GDAL\1.7\

> Another question, also already raised, is whether to have just two or all three
> version numbers in the installation directory. I think that question depends on
> whether you ever need to support bugfix releases installed side-by-side (e.g.
> 1.8.0 and 1.8.1), and also whether the bindings and other integrators will need
> to bind to specific bugfix releases or not. For example, if you guarantee that
> all 1.8.x releases will have compatible ABIs?that you will never introduce a
> change that will break the binary interface without increasing the minor build
> number?then it would be ok to just use X.Y in the directory name. But if that
> cannot be guaranteed, then you need to support X.Y.Z so that bindings and other
> integrators can locate the specific bugfix release that they are compatible with.

It is an explicit guarantee that point releases do not change the C *or* C++
public ABI.  It is an explicit intention that a point release can be installed
over a previous release without impacting any applications using GDAL.  This
extends to the point that plugins should be compatible across point releases.

> Following up on that point: I think we?ve agreed that we do not want the user
> to have to set the PATH in order to have the GDAL bindings work.

I do *not* agree that installing GDAL would necessarily insert it into the
global PATH.  It might, or might not, but I'm still very concerned about
possible interference with other applications using GDAL.  I'm not saying
I will never agree to it, but I remain very cautious about interference
in the global space.  Particularly since we are likely to carry along lots
of other DLLs (zlib, xerces, etc).

If this installer is to be a product of the project, I would suggest you
write up a proposal as an RFC and we work from that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jason.roberts at duke.edu  Fri Jan  7 10:37:34 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Jan  7 10:37:42 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D2730A9.80302@ualg.pt>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
	<03b801cbae7c$ab45b0c0$01d11240$%roberts@duke.edu>
	<4D2730A9.80302@ualg.pt>
Message-ID: <03d101cbae80$ce7cbf80$6b763e80$@roberts@duke.edu>

Joaquim,

 

I hear your pain about having the space in the name. It would probably not
be too much trouble for the installer to allow the user to change the
installation directory. That is a basic option of most installers so it
would probably not be hard to implement with a WIX-built installer.

 

But I should reiterate that a requirement of this package is that the GDAL
bindings (installed as separate packages) must be able to locate the GDAL
libraries. The one approach mentioned so far is to put the binaries in a
well-known location. If the bindings were designed to look for the libraries
in a well-known location, they would be broken if the user installed them to
a different location. Therefore it is important to pick a default location
and recommend that only very knowledgeable users select a different place.
My view is that adhering to Microsoft's best practice of using \Program
Files outweighs the convenience of using a directory off a root partition
that does not have a space in the name. 

 

An alternative idea is to store the location of the GDAL libraries in the
registry and then permitting them to be installed anywhere with no
consequences. The bindings would read the registry to determine their
location. This is also a fairly standard way to do things on Windows, but it
would be slightly more complicated for the bindings.

 

Jason

 

From: Joaquim Luis [mailto:jluis@ualg.pt] 
Sent: Friday, January 07, 2011 10:27 AM
To: Jason Roberts
Cc: 'Tamas Szekeres'; gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

 

On 07-01-2011 15:07, Jason Roberts wrote: 

Tamas,

 

WIX looks like a great technology for building the installation package.
I've never used it but I took a quick look and it seems to provide what is
needed.

 

As I understand it, you are pondering whether it would be better to have
GDAL in Program Files\OSGeo\GDAL or in Program Files\GDAL. Is it simply a
question aesthetics or principle, in which it seems proper to put all OSgeo
projects under Program Files\OSGeo, but there could be problems coordinating
the efforts of multiple projects to adhere to that carefully and not mash
each other's files? If that summarizes the issue, then I'd recommend going
with the more practical, less principled approach: put GDAL in Program
Files\GDAL, and OSGeo4W in Program Files\OSGeo4W. It could get messy if both
installers have to be able to create the Program Files\OSGeo directory but
not necessarily delete it when they are uninstalled, because there could be
another OSGeo project in there.


Let me just recall that OSGeo4W proposes the default install directory as
C:\OSGeo4W
This is just my opinion and I feel quite at rest because I'm able to build
GDAL and install it wherever I wont, but I would really hate that an
installer would force me to install in a location contrary to my will. In
particular when that location has blanks in the name (Program Files).
But, as I said it's just my private view.


Joaquim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/b43aee46/attachment.html
From szekerest at gmail.com  Fri Jan  7 10:54:17 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan  7 10:54:22 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4892022356696473730@unknownmsgid>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
	<4892022356696473730@unknownmsgid>
Message-ID: <AANLkTi=Yk-iBgiwq2V2s_Wq34q5y2kQ7giDHsk9RfPz1@mail.gmail.com>

2011/1/7 Jason Roberts <jason.roberts@duke.edu>

> WIX looks like a great technology for building the installation package.
> I?ve never used it but I took a quick look and it seems to provide what is
> needed.
>
>
>

Jason,

I've already used WIX many times and I'm very satisfied with it.


> As I understand it, you are pondering whether it would be better to have
> GDAL in Program Files\OSGeo\GDAL or in Program Files\GDAL. Is it simply a
> question aesthetics or principle, in which it seems proper to put all OSgeo
> projects under Program Files\OSGeo, but there could be problems coordinating
> the efforts of multiple projects to adhere to that carefully and not mash
> each other?s files? If that summarizes the issue, then I?d recommend going
> with the more practical, less principled approach: put GDAL in Program
> Files\GDAL, and OSGeo4W in Program Files\OSGeo4W. It could get messy if both
> installers have to be able to create the Program Files\OSGeo directory but
> not necessarily delete it when they are uninstalled, because there could be
> another OSGeo project in there.
>
>
>
> Along those lines, I would suggest that if GDAL plans to support
> side-by-side installations of GDAL itself, then we need to contemplate
> carefully whether to use Program Files\GDAL\GDAL-X.Y or Program
> Files\GDAL-X.Y. I think either one would be ok, so long as whoever writes
> the installer thinks out all the side-by-side installation/uninstallation
> scenarios.
>
>
Just by thinking about the details if we implement a smart dll loader which
could in fact work with any locations to load the dll-s why do we require to
use a specific folder as the install location? The installer may create a
registry entry or a config file in a specific place where the necessary
dependencies are installed actually. The  loader would be responsible to
query for a compatible entry and use that location when loading the
dependent dll-s. If no entries found the loader would provide an error that
a dependent setup should also be executed.



>
>
> Another question, also already raised, is whether to have just two or all
> three version numbers in the installation directory. I think that question
> depends on whether you ever need to support bugfix releases installed
> side-by-side (e.g. 1.8.0 and 1.8.1), and also whether the bindings and other
> integrators will need to bind to specific bugfix releases or not. For
> example, if you guarantee that all 1.8.x releases will have compatible
> ABIs?that you will never introduce a change that will break the binary
> interface without increasing the minor build number?then it would be ok to
> just use X.Y in the directory name. But if that cannot be guaranteed, then
> you need to support X.Y.Z so that bindings and other integrators can locate
> the specific bugfix release that they are compatible with.
>
>
>

It would not be a problem in the scope of my comments above. The user could
install multiple versions anywhere and the loader would be responsible to
find out the corresponding version at run time.


> Regarding x86 vs. x64. The GDAL installer should follow the standard
> Microsoft convention. On an x64 machine, the x64 GDAL utils/libs should go
> in \Program Files and the x86 utils/libs should go in \Program Files (x86).
> The bindings and other integrators must be aware of x86 vs. x64 and locate
> libs from the correct directory.
>
>
>
> I agree that calling SHGetSpecialFolderLocation with an appropriate CSIDL
> is an appropriate way to find the Program Files directory (addressing issue
> noted by Joaquim and others that Program Files is localized). It is probably
> ok to use the ProgramFiles and ProgramFiles(x86) environment variables if
> calling the Win32 API is not easy for particular bindings.
>
>
We could probably implement the loader in C an use SWIG to map the functions
to the various languages. The implementation would be the same for all
languages in this regard.
The only issue here is that where to place the loader.dll (providing the
core implementation) which would also rely on the Windows dll search rules.
For python you could easily say to create a pyd installed along with the
python files, but in may not be so trivial for the other languages. I'm
tending to think that this part should probably be implemented in a generic
way (which doesn't change frequently) and be installed in a common folder
available in the PATH.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/b68f5485/attachment-0001.html
From jluis at ualg.pt  Fri Jan  7 11:21:24 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Jan  7 11:21:41 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <03d101cbae80$ce7cbf80$6b763e80$@roberts@duke.edu>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
	<03b801cbae7c$ab45b0c0$01d11240$%roberts@duke.edu>
	<4D2730A9.80302@ualg.pt>
	<03d101cbae80$ce7cbf80$6b763e80$@roberts@duke.edu>
Message-ID: <4D273D84.8010404@ualg.pt>

Jason,

I understand all that (though not necessarily agree). Possibly part of 
my reluctance stands also from the no-understanding of the degree of 
potential evilness attributed to PATH changes. Remember that path 
changes can be done on local profiles only or system wide but most of 
all, path changes are APPENDED to previous value of PATH not PREPEND (at 
least that's my experience with the Inno Setup) so it will not disrupt 
any other previously program that uses dll with same names. In the worst 
case what may happen is that that GDAL install would not work due to 
incompatibilities with previously installed libs. But that is essence of 
the dll-hell for which an universal solution is yet to come.

Joaquim

> Joaquim,
>
> I hear your pain about having the space in the name. It would probably 
> not be too much trouble for the installer to allow the user to change 
> the installation directory. That is a basic option of most installers 
> so it would probably not be hard to implement with a WIX-built installer.
>
> But I should reiterate that a requirement of this package is that the 
> GDAL bindings (installed as separate packages) must be able to locate 
> the GDAL libraries. The one approach mentioned so far is to put the 
> binaries in a well-known location. If the bindings were designed to 
> look for the libraries in a well-known location, they would be broken 
> if the user installed them to a different location. Therefore it is 
> important to pick a default location and recommend that only very 
> knowledgeable users select a different place. My view is that adhering 
> to Microsoft's best practice of using \Program Files outweighs the 
> convenience of using a directory off a root partition that does not 
> have a space in the name.
>
> An alternative idea is to store the location of the GDAL libraries in 
> the registry and then permitting them to be installed anywhere with no 
> consequences. The bindings would read the registry to determine their 
> location. This is also a fairly standard way to do things on Windows, 
> but it would be slightly more complicated for the bindings.
>
> Jason
>
> *From:*Joaquim Luis [mailto:jluis@ualg.pt]
> *Sent:* Friday, January 07, 2011 10:27 AM
> *To:* Jason Roberts
> *Cc:* 'Tamas Szekeres'; gdal-dev@lists.osgeo.org
> *Subject:* Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
>
> On 07-01-2011 15:07, Jason Roberts wrote:
>
> Tamas,
>
> WIX looks like a great technology for building the installation 
> package. I've never used it but I took a quick look and it seems to 
> provide what is needed.
>
> As I understand it, you are pondering whether it would be better to 
> have GDAL in Program Files\OSGeo\GDAL or in Program Files\GDAL. Is it 
> simply a question aesthetics or principle, in which it seems proper to 
> put all OSgeo projects under Program Files\OSGeo, but there could be 
> problems coordinating the efforts of multiple projects to adhere to 
> that carefully and not mash each other's files? If that summarizes the 
> issue, then I'd recommend going with the more practical, less 
> principled approach: put GDAL in Program Files\GDAL, and OSGeo4W in 
> Program Files\OSGeo4W. It could get messy if both installers have to 
> be able to create the Program Files\OSGeo directory but not 
> necessarily delete it when they are uninstalled, because there could 
> be another OSGeo project in there.
>
>
> Let me just recall that OSGeo4W proposes the default install directory 
> as C:\OSGeo4W
> This is just my opinion and I feel quite at rest because I'm able to 
> build GDAL and install it wherever I wont, but I would really hate 
> that an installer would force me to install in a location contrary to 
> my will. In particular when that location has blanks in the name 
> (Program Files).
> But, as I said it's just my private view.
>
>
> Joaquim
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/3a8a07aa/attachment.html
From Jonathan.Shaw at gdc4s.com  Fri Jan  7 11:35:28 2011
From: Jonathan.Shaw at gdc4s.com (Jonathan.Shaw@gdc4s.com)
Date: Fri Jan  7 11:35:35 2011
Subject: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <20110107124025.GA9081@norbit.de>
References: <4D268EB6.5050601@pobox.com>
	<20110107042323.GA25934@norbit.de><0873B50412231C47AFF7ECE2B4226CF7016E8016@AZ25EXM03.gddsi.com>
	<20110107124025.GA9081@norbit.de>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF702B8C49C@AZ25EXM03.gddsi.com>

So far, it sounds like I will have to build GDAL, with various options, third party plugins, and libraries configured for the build, in order to get the capabilities that I currently use from FWTools. (Unless a new release of FWTools is made, but that seems unlikely to occur at this point.)

The idea of a GDAL installer for Windows is definitely appealing. As an end product integrator, I won't be able to use the proposed Windows installer unless I continue to have a way to use GDAL's C, C++, and .NET APIs, and to add-in drivers that weren't included in the Windows installer.

Anyway, I'm just wish listing. :)

Jonathan


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of J?rgen E. Fischer
Sent: Friday, January 07, 2011 5:40 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] FWTools and GDAL 1.7.0

Hi Jonathan,

On Thu, 06. Jan 2011 at 22:06:06 -0700, Jonathan.Shaw@gdc4s.com wrote:
> To bring this up to the capabilities that I already use from FWTools, how
> would an end user like myself add in support for additional formats (e.g.
> JPEG2000, MrSID) and .NET bindings?

If the ECW and MrSID DLLs are added into the addons directory creatensis.pl
would include them in the installer along with the gdal17-ecw and gdal17-mrsid
packages from OSGeo4W.  The standalone QGIS installer already does that.

No idea about the .NET bindings.  Those should probably be put into OSGeo4W
first.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From xiaodong.zhang2 at und.edu  Fri Jan  7 12:47:47 2011
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Fri Jan  7 13:48:24 2011
Subject: [gdal-dev] gdal_polygonize.py binding error
In-Reply-To: <AANLkTi=KZzzg+GTZBZHo5P3dbxMQ5stTuJE+tCokugn0@mail.gmail.com>
References: <AANLkTimwtqM77fcovvA5sVYb6yJoOTctECoJEVHtrqvw@mail.gmail.com>
	<4D25F577.9090105@loskot.net>
	<AANLkTimZvtbsoCUNYvwGDu-tco9muntHbxh0WxPTE_M9@mail.gmail.com>
	<4D25F6BA.5040405@loskot.net>
	<AANLkTinYSS3z=48uNRZy3Wq0s_eoy73D87hmiyYC42+b@mail.gmail.com>
	<4D25F8CA.9080004@loskot.net>
	<AANLkTinhjxLk8EOV5676Ca_SeKumv7oEgod18OsUZuqo@mail.gmail.com>
	<4D25FE37.7080406@noaa.gov> <4D26173C.2000302@und.edu>
	<AANLkTi=KZzzg+GTZBZHo5P3dbxMQ5stTuJE+tCokugn0@mail.gmail.com>
Message-ID: <4D2751C3.7090209@und.edu>

Hi Chaitanya,

Setting PYTHONPATH did solve the problem. The new gdal-python bindings 
were installed under /user/local/lib64/python2.4/site-packages and the 
path was not set automatically. It would be nice if the sys.path is 
modified automatically by gdal installation.

Thanks
Xiaodong

Xiaodong Zhang, Ph. D
Associate Professor
Department of Earth System Science and Policy
University of North Dakota
Tel: (701) 777-6087
http://www.und.edu/instruct/zhang


On 1/6/2011 10:11 PM, Chaitanya kumar CH wrote:
> Xiaodong,
>
> Check again after setting the environment variable PYTHONPATH to the 
> path to the new python bindings.
>
> On Fri, Jan 7, 2011 at 12:55 AM, Xiaodong Zhang 
> <xiaodong.zhang2@und.edu <mailto:xiaodong.zhang2@und.edu>> wrote:
>
>     Hi,
>
>     I just updated the older version  of gdal (1.4.2) with the latest
>     version of gdal (1.7.3) on x64 RedHat. Got an error when using
>     gdal_polygonize.py for a test image
>
>     gdal_polyzonize.py t2.tif -f "ESRI Shapefile" pt2
>
>     gdal.Polyzonize() not available. You are likely using "old gen"
>     bindings or an older version of the next gen bindings.
>
>     I found the previous threads on this issue, but could not find an
>     answer.
>
>     Any idea? Thanks
>
>     Xiaodong
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110107/12c88422/attachment.html
From jason.roberts at duke.edu  Fri Jan  7 14:19:21 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Jan  7 14:19:27 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D273125.8010303@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com>
	<4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com> <1588135365192677390@unknownmsgid>
	<AANLkTimsYinaoVdFPLsa+OjWkouuVX0h=n+y2tmsU+Rq@mail.gmail.com>
	<03b801cbae7c$ab45b0c0$01d11240$%roberts@duke.edu>
	<4D273125.8010303@pobox.com>
Message-ID: <041101cbae9f$ca0290f0$5e07b2d0$@roberts@duke.edu>

Frank,

Thanks for the clarification of the various issues. I will start an RFC for
this next week.

Jason

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Friday, January 07, 2011 10:29 AM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0

On 11-01-07 10:07 AM, Jason Roberts wrote:
>put GDAL in Program Files\GDAL, and
> OSGeo4W in Program Files\OSGeo4W.

Jason,

I would note that OSGeo4W installs in C:\OSGeo4W by default, and there are
no plans currently to change this.  OSGeo4W will continue to use it's
internal copy of GDAL.

 > It could get messy if both installers have to
> be able to create the Program Files\OSGeo directory but not necessarily
delete
> it when they are uninstalled, because there could be another OSGeo project
in
> there.

I would prefer to stick to C:\Program Files\GDAL.

> Along those lines, I would suggest that if GDAL plans to support
side-by-side
> installations of GDAL itself, then we need to contemplate carefully
whether to
> use Program Files\GDAL\GDAL-X.Y or Program Files\GDAL-X.Y. I think either
one
> would be ok, so long as whoever writes the installer thinks out all the
> side-by-side installation/uninstallation scenarios.

I prefer to just use the major.minor version as the subdirectory name.

C:\Program Files\GDAL\1.7\

> Another question, also already raised, is whether to have just two or all
three
> version numbers in the installation directory. I think that question
depends on
> whether you ever need to support bugfix releases installed side-by-side
(e.g.
> 1.8.0 and 1.8.1), and also whether the bindings and other integrators will
need
> to bind to specific bugfix releases or not. For example, if you guarantee
that
> all 1.8.x releases will have compatible ABIs-that you will never introduce
a
> change that will break the binary interface without increasing the minor
build
> number-then it would be ok to just use X.Y in the directory name. But if
that
> cannot be guaranteed, then you need to support X.Y.Z so that bindings and
other
> integrators can locate the specific bugfix release that they are
compatible with.

It is an explicit guarantee that point releases do not change the C *or* C++
public ABI.  It is an explicit intention that a point release can be
installed
over a previous release without impacting any applications using GDAL.  This
extends to the point that plugins should be compatible across point
releases.

> Following up on that point: I think we've agreed that we do not want the
user
> to have to set the PATH in order to have the GDAL bindings work.

I do *not* agree that installing GDAL would necessarily insert it into the
global PATH.  It might, or might not, but I'm still very concerned about
possible interference with other applications using GDAL.  I'm not saying
I will never agree to it, but I remain very cautious about interference
in the global space.  Particularly since we are likely to carry along lots
of other DLLs (zlib, xerces, etc).

If this installer is to be a product of the project, I would suggest you
write up a proposal as an RFC and we work from that.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Chris.Barker at noaa.gov  Fri Jan  7 15:03:47 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Jan  7 15:03:53 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D268EB6.5050601@pobox.com>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com>
	<038f01cbadfb$7fcd7940$7f686bc0$%roberts@duke.edu>
	<4D268EB6.5050601@pobox.com>
Message-ID: <4D2771A3.8010708@noaa.gov>

On 1/6/11 7:55 PM, Frank Warmerdam wrote:

> One question not discussed is whether GDAL should be minimalist or
> maximalist. That is, do we want to include as many formats as possible
> despite the fact that it drags in lots of supporting libraries?

+1 for Maximalist. We want as many things as possible to "just work"

> If we
> just use whatever decision OSGeo4W uses then we will have a fairly
> maximalist solution which is ok I suppose but might make integration of
> the resulting GDAL in other complex applications messy.

People that are integrating into complex apps will likely roll their own 
anyway.

> I would like to suggest production of such an installer be done in such
> a way that the generating scripts live in SVN somewhere, and with
> instructions for the process in the wiki so it isn't all tied to one
> person (as FWTools was).

Absolutely!

On 1/6/11 8:23 PM, J?rgen E. Fischer wrote:
> You get a desktop link
> and a start menu entry that both opens a command line window from where you can
> use GDAL

very nice.

> and start python with gdal available.

what Python gets started? Can you start Python from any other command 
line and have it work, or do you need ENV VARS set up?

On 1/7/11 2:26 AM, Tamas Szekeres wrote:
> However naming the install root folder to GDAL doesn't seem to be a
> right thing as we provide other packages like mapserver as well.

well, either you can have GDAL in GDAL, and mapserver in MapServer. or...

 > I would also mention OSGeo as the root,

If there are a number of things under the OSGeo umbrella provided by the 
same people, then OSGeo is a fine root. Note that I'd have:

Program Files\OSGeo\GDAL
Program Files\OSGeo\Mapserver
....

rather than dumping everything directly in OSGeo\ -- though maybe a 
shared "bin" does make sense? Oh for some standards!

> but I'm not sure how it
> will violate the files if a similar installer will ever derived from an
> OSGeo4W bundle. (We may probably warn the user not to install both
> versions side by side)

Ideally, the OSGEo4W bundle will be compatible -- that really would be 
better --i.e. a GDAL binary is a subset of an OSGeo install. But if 
that's not possible, then we'll just have to use a different name than 
OSGeo4W does.


> IMO, there are two primary goals of this packaging of GDAL: provide easy
> access to just the GDAL command line utilities (separate from larger tool
> suites such as FWTools and OSGeo4W), and provide the GDAL libraries in a
> well-known location so they can be located by the various GDAL bindings. I
> think a secondary goal is to provide GDAL libraries in a well-known location
> for integration by arbitrary applications.

good summary.


 > For example, if you guarantee that all 1.8.x releases
> will have compatible ABIs?that you will never introduce a change that
> will break the binary interface

guarantee is a strong word, but that is the idea as I understand it.

> Therefore the bindings must be changed to look for the GDAL libraries in
> the well-known location.

(or more than one, but I think one is a good start). It seems on *nix, 
for instance, this would generally happen in the build stage (actually 
configure) -- the builder specifies where they want it installed, and 
everything is built to match that. That's a fine model to follow. I 
don't know if there is any equivalent of ./configure for Windows 
building, but a simple script could at least do this bit easily enough.

> The
> user will have to be aware that they must install a compatible pair of
> bindings + GDAL. The GDAL team should decide right now about the X.Y vs.
> X.Y.Z compatibility question.

yes -- and If we go with X.Y, then you should be able to drop an updated 
point release of GDAL in, without updating the bindings. Is that good, 
however, or are the bindings also updated, and tightly related? I think 
you could do X.Y, but have the bindings check for point version 
compatibility, so you'd get a Warning if you were using a mismatched 
binding.

> Let me just recall that OSGeo4W proposes the default install directory
> as C:\OSGeo4W

not a bad option either, but is that difficult/impossible/ugly with 
recent MS security policies (still on XP here...)? Ugly though it is, 
there is a lot to be said for conforming to MS recommended practice.

>> Following up on that point: I think we?ve agreed that we do not want
>> the user
>> to have to set the PATH in order to have the GDAL bindings work.
>
> I do *not* agree that installing GDAL would necessarily insert it into the
> global PATH.

I think we have ways of getting the bindings to work without global PATH.

> It might, or might not, but I'm still very concerned about
> possible interference with other applications using GDAL.

I'd want global PATH settings for command line tool usage. using it for 
finding dlls seems like a really bad idea. With that in mind, perhaps 
the command line tools should be in a different dir from the dlls, so 
that you can put the former on your global PATH without breaking any 
linking.

Whether the executable path is added to the PATH by the installer is 
open for discussion -- I'd appreciate a selectable option to do so, but 
it's not a big deal -- hopefully anyone using command line tools has 
figure out how to set PATH.


> An alternative idea is to store the location of the GDAL libraries in
> the registry and then permitting them to be installed anywhere with no
> consequences.

I think this is an uglier piece of Windows-ism that spaces in file 
names, but that's just MHO...


> Just by thinking about the details if we implement a smart dll loader
> which could in fact work with any locations to load the dll-s why do we
> require to use a specific folder as the install location?

Standardized defaults are still a good idea -- makes it much easier to 
debug newbie install problems...

> The installer may create a registry entry or a config

Where would that go? And you already know what i think of the registry 
solution. This also puts a bunch more platform specific code in the 
bindings, not a huge deal, but a deal non the less.

>  I'm tending to think that this part should probably be
> implemented in a generic way (which doesn't change frequently) and be
> installed in a common folder available in the PATH.

Now we're back to common, standard locations again -- why not just put 
GDAL there?


> I will start an RFC for this next week.


Thanks for all your work on this!

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jef at norbit.de  Fri Jan  7 15:19:02 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri Jan  7 15:20:03 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D2771A3.8010708@noaa.gov>
References: <4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov> <4D263B7F.4030205@pobox.com>
	<037401cbadee$77fdbb10$67f93130$%roberts@duke.edu>
	<4D2646EF.1080308@pobox.com>
	<038f01cbadfb$7fcd7940$7f686bc0$%roberts@duke.edu>
	<4D268EB6.5050601@pobox.com> <4D2771A3.8010708@noaa.gov>
Message-ID: <20110107201902.GA12358@norbit.de>

Hi Chris,

On Fri, 07. Jan 2011 at 12:03:47 -0800, Christopher Barker wrote:
> On 1/6/11 8:23 PM, J?rgen E. Fischer wrote:
>> You get a desktop link and a start menu entry that both opens a command line
>> window from where you can use GDAL

> very nice.

>> and start python with gdal available.

> what Python gets started? Can you start Python from any other command  
> line and have it work, or do you need ENV VARS set up?

The python shipped with the installer (just like in OSGeo4W).

> On 1/7/11 2:26 AM, Tamas Szekeres wrote:
>> IMO, there are two primary goals of this packaging of GDAL: provide easy
>> access to just the GDAL command line utilities (separate from larger tool
>> suites such as FWTools and OSGeo4W), and provide the GDAL libraries in a
>> well-known location so they can be located by the various GDAL bindings. I
>> think a secondary goal is to provide GDAL libraries in a well-known location
>> for integration by arbitrary applications.

> good summary.

hm, just an idea - creatensis.pl could even be generized to pick an arbitrary
OSGeo4W package and produce a NSIS installer with all the necessary
dependencies (even as CGI - I created the package on Linux).

If the GDAL package in OSGeo4W did provide a desktop and start link and start
menu link the nsi wouldn't need to create those and the extra batch file could
be dropped.  So the current customization wouldn't be needed anymore.

That also would work for meta package (eg. something like gdal-min and
gdal-max).


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From hiebert at uvic.ca  Fri Jan  7 16:18:20 2011
From: hiebert at uvic.ca (James Hiebert)
Date: Fri Jan  7 16:34:45 2011
Subject: [gdal-dev] Problem using gdalwarp to reproject Lambert Conformal
 Conic (LCC) to longlat
Message-ID: <20110107211820.GF5208@basalt.uvic.ca>

All,

Below is a question/probelm from one of my co-workers (who doesn't (yet)
want to subscribe to the list).

~James Hiebert


From: Hailey Eckstrand <haileye@uvic.ca>
Date: Fri, 7 Jan 2011 13:05:10 -0800

Hello all,
I am trying to reproject a geotif using gdalwarp:
gdalwarp -t_srs "+proj=longlat" -s_srs "+proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000" -r bilinear -srcnodata "1e20" -dstnodata "1e20" -tr 0.5 0.5 -te -137.812943839532 33.8985446218588 -102.312943839532 63.3985446218588 mm5i-lcc.tif  mm5i-latlong.tif

ERROR 1: Translating source or target SRS failed:
+proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000

When I use the proj/invproj unix command, it works fine:

invproj +proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000 << EOF
800000 800000
850000 800000
900000 800000
EOF
125d15'53.681"W 20d51'29.908"N
124d50'5.035"W  21d0'18.418"N
124d24'10.336"W 21d8'59.642"N

Any idea where the problem is?

Here is my gdal build info:
$ svn info
Path: .
URL: https://svn.osgeo.org/gdal/trunk/gdal
Repository Root: https://svn.osgeo.org/gdal
Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
Revision: 21425
Node Kind: directory
Schedule: normal
Last Changed Author: warmerdam
Last Changed Rev: 21425
Last Changed Date: 2011-01-07 11:36:23 -0800 (Fri, 07 Jan 2011)
revision number 21425

Hailey Eckstrand haileye@uvic.ca<mailto:haileye@uvic.ca>
GIS Analyst
Pacific Climate Impacts Consortium
www.PacificClimate.Org<http://www.PacificClimate.Org>
C198 Segdewick Building, University of Victoria
PO Box 1700 Sta CSC, Victoria, BC V8V 2Y2
Tel: (250) 472-5591 Fax: (250) 472-4830



----- End forwarded message -----

-- 
James Hiebert
Lead, Computational Support
Pacific Climate Impacts Consortium
http://www.pacificclimate.org
C178 Segdewick Building, University of Victoria
PO Box 1700 Sta CSC, Victoria, BC V8V 2Y2
E-mail: hiebert@uvic.ca
Tel: (250) 472-4521
Fax: (250) 472-4830
From jrepetto at free.fr  Fri Jan  7 16:35:50 2011
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Fri Jan  7 16:35:59 2011
Subject: [gdal-dev] Improved support of OziExplorer datums
Message-ID: <4D278736.7060001@free.fr>

Hello,

Now that GDAL supports the OZF2 and OZFx3 formats, I think it is time to 
improve the processing of the .map files.
The current implementation supports only 3 datums, while OziExplorer 
supports 123 datums.

I have added the support for all OziExplorer datums, but before sending 
the patch, Even Rouault suggested me to post this message, so that 
anybody can send comments.

I have created two files in the GDAL data directory :
- gdal_ellips.csv contains the ellipsoid definitions
- gdal_datum.csv contains the datum definitions


The structure of gdal_ellips.csv is straightforward :

   ELLIPSOID_CODE,NAME,A,INVF
   0,Airy 1830,6377563.396,299.3249646
   1,Modified Airy,6377340.189,299.3249646
   ...


The structure of gdal_datum.csv deserves some explanations :

   NAME,EPSG_DATUM_CODE,ELLIPSOID_CODE,DELTAX,DELTAY,DELTAZ
   Adindan,4201,5,-162,-12,206	# Africa - Eritrea, Ethiopia and Sudan
   ...
   DOS 1968,,14,230,-199,-752              # Gizo Island
   Easter Island 1967,4719,14,211,147,111
   Egypt,,14,-130,-117,-151                # EPSG 4199
   ...
   Hermannskogel,3906,3,653,-212,449       # GDAL uses 682,-203,480
   ...
   NAD27 Alaska,,4,-5,135,172    # EPSG:1176 Coordinate Transformation
   NAD27 Bahamas,,4,-4,154,178   # EPSG:1177 Coordinate Transformation
   ...
   South Asia,,8,7,-10,-26       # Singapore (unknown EPSG code)

The second column contains the EPSG code, but the following columns also 
contain the ellipsoid code and the 3-parameters transformation values.
This is necessary, because for some datums used in OziExplorer :
- either there is no equivalent EPSG code : South Asia (Singapore)
- either GDAL doesn't know the 3 parameters : Egypt (EPSG:4199)
- either there are several transformation parameters, and GDAL and 
OziExplorer are not using the same ones : DOS 1968 (Solomon Islands), 
where OziExplorer uses the transformation for the Gizo island 
(EPSG:15805), while GDAL uses the transformation for the Guadalcanal 
island (EPSG:15807)
- or there are several transformations for the same datum, and it is not 
possible for GDAL to know from the EPSG code which transformation must 
be used : NAD27, Narwhan, ED50, etc...

Storing the datums in data files instead of source code has two advantages :
- users can add custom datums and ellipsoids (they can do it in OziExplorer)
- users can get exactly the same results with GDAL than with 
OziExplorer, if they wish. For example, for the Hermannskogel datum, the 
transformation parameters differ. If a user wants GDAL to use the 
OziExplorer parameters, all he has to do is to remove the EPSG code from 
the ozi_datum.csv file :
    Hermannskogel,,3,653,-212,449
and GDAL will use 653,-212,449 instead of 682,-203,480 .

Best regards,

Jean-Claude
From warmerdam at pobox.com  Fri Jan  7 16:48:42 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  7 16:49:12 2011
Subject: [gdal-dev] Improved support of OziExplorer datums
In-Reply-To: <4D278736.7060001@free.fr>
References: <4D278736.7060001@free.fr>
Message-ID: <4D278A3A.6010302@pobox.com>

On 11-01-07 04:35 PM, Jean-Claude REPETTO wrote:
> Hello,
>
> Now that GDAL supports the OZF2 and OZFx3 formats, I think it is time to
> improve the processing of the .map files.
> The current implementation supports only 3 datums, while OziExplorer supports
> 123 datums.
>
> I have added the support for all OziExplorer datums, but before sending the
> patch, Even Rouault suggested me to post this message, so that anybody can send
> comments.
>
> I have created two files in the GDAL data directory :
> - gdal_ellips.csv contains the ellipsoid definitions
> - gdal_datum.csv contains the datum definitions

Jean-Claude,

I have two comments:

1) Please call the files ozi_ellips.csv and ozi_datum.csv

2) What is the origin of these files?  What is their licensing?  We
can't just take files from other software packages and release them as
part of GDAL unless they are under a compatible license, or the copyright
holder gives us explicit permission to release them under the GDAL license.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan  7 16:51:05 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  7 16:51:34 2011
Subject: [gdal-dev] Problem using gdalwarp to reproject Lambert Conformal
	Conic (LCC) to longlat
In-Reply-To: <20110107211820.GF5208@basalt.uvic.ca>
References: <20110107211820.GF5208@basalt.uvic.ca>
Message-ID: <4D278AC9.8080402@pobox.com>

On 11-01-07 04:18 PM, James Hiebert wrote:
> All,
>
> Below is a question/probelm from one of my co-workers (who doesn't (yet)
> want to subscribe to the list).
>
> ~James Hiebert
>
>
> From: Hailey Eckstrand<haileye@uvic.ca>
> Date: Fri, 7 Jan 2011 13:05:10 -0800
>
> Hello all,
> I am trying to reproject a geotif using gdalwarp:
> gdalwarp -t_srs "+proj=longlat" -s_srs "+proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000" -r bilinear -srcnodata "1e20" -dstnodata "1e20" -tr 0.5 0.5 -te -137.812943839532 33.8985446218588 -102.312943839532 63.3985446218588 mm5i-lcc.tif  mm5i-latlong.tif
>
> ERROR 1: Translating source or target SRS failed:
> +proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000
>
> When I use the proj/invproj unix command, it works fine:
>
> invproj +proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000<<  EOF

James,

I would suggest you collegue be more explicit about the earth models.
PROJ.4 definitions passed to GDAL utility are parsed by GDAL, converted
to WKT, and then later converted back to PROJ.4 format and so not all
definitions supported by PROJ.4 are necessarily supported by GDAL.

In this case I suspect GDAL is confused by the lack of a +b value for
the lcc projection.  It may also not handle a missing earth model on the
geographic coordinate system well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Fri Jan  7 16:54:04 2011
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Fri Jan  7 16:54:12 2011
Subject: [gdal-dev] Problem using gdalwarp to reproject Lambert Conformal
	Conic (LCC) to longlat
In-Reply-To: <20110107211820.GF5208@basalt.uvic.ca>
References: <20110107211820.GF5208@basalt.uvic.ca>
Message-ID: <4D278B7C.5060605@free.fr>

On 01/07/11 22:18, James Hiebert wrote:
> I am trying to reproject a geotif using gdalwarp:
> gdalwarp -t_srs "+proj=longlat" -s_srs "+proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000" -r bilinear -srcnodata "1e20" -dstnodata "1e20" -tr 0.5 0.5 -te -137.812943839532 33.8985446218588 -102.312943839532 63.3985446218588 mm5i-lcc.tif  mm5i-latlong.tif
>
> ERROR 1: Translating source or target SRS failed:
> +proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000

Hi,

Your SRS definition is incomplete, because you haven't defined 
completely the ellispoid. Try to add one of the "+b", "+rf" , "+f", "+e" 
or "+es" parameters, and it should work.

Jean-Claude
From hiebert at uvic.ca  Fri Jan  7 17:20:46 2011
From: hiebert at uvic.ca (James Hiebert)
Date: Fri Jan  7 17:20:49 2011
Subject: [gdal-dev] Problem using gdalwarp to reproject Lambert
	Conformal Conic (LCC) to longlat
In-Reply-To: <4D278AC9.8080402@pobox.com>
References: <20110107211820.GF5208@basalt.uvic.ca> <4D278AC9.8080402@pobox.com>
Message-ID: <20110107222046.GK5208@basalt.uvic.ca>

Thanks for the quick response.  It was definitely the missing +b.  It seems
that proj will fill in the +b with the same value if +a is given.  Adding +b
to the s_srs flag did the trick.

~James

On Fri, Jan 07, 2011 at 04:51:05PM -0500, Frank Warmerdam wrote:
> On 11-01-07 04:18 PM, James Hiebert wrote:
> > All,
> >
> > Below is a question/probelm from one of my co-workers (who doesn't (yet)
> > want to subscribe to the list).
> >
> > ~James Hiebert
> >
> >
> > From: Hailey Eckstrand<haileye@uvic.ca>
> > Date: Fri, 7 Jan 2011 13:05:10 -0800
> >
> > Hello all,
> > I am trying to reproject a geotif using gdalwarp:
> > gdalwarp -t_srs "+proj=longlat" -s_srs "+proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000" -r bilinear -srcnodata "1e20" -dstnodata "1e20" -tr 0.5 0.5 -te -137.812943839532 33.8985446218588 -102.312943839532 63.3985446218588 mm5i-lcc.tif  mm5i-latlong.tif
> >
> > ERROR 1: Translating source or target SRS failed:
> > +proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000
> >
> > When I use the proj/invproj unix command, it works fine:
> >
> > invproj +proj=lcc +lat_0=47.5 +lat_1=30.0 +y_0=3200000.0 +lat_2=60.0 +x_0=3825000.0 +lon_0=-97.0 +a=6370000<<  EOF
> 
> James,
> 
> I would suggest you collegue be more explicit about the earth models.
> PROJ.4 definitions passed to GDAL utility are parsed by GDAL, converted
> to WKT, and then later converted back to PROJ.4 format and so not all
> definitions supported by PROJ.4 are necessarily supported by GDAL.
> 
> In this case I suspect GDAL is confused by the lack of a +b value for
> the lcc projection.  It may also not handle a missing earth model on the
> geographic coordinate system well.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
James Hiebert
Lead, Computational Support
Pacific Climate Impacts Consortium
http://www.pacificclimate.org
C178 Segdewick Building, University of Victoria
PO Box 1700 Sta CSC, Victoria, BC V8V 2Y2
E-mail: hiebert@uvic.ca
Tel: (250) 472-4521
Fax: (250) 472-4830
From jrepetto at free.fr  Fri Jan  7 17:43:52 2011
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Fri Jan  7 17:43:59 2011
Subject: [gdal-dev] Improved support of OziExplorer datums
In-Reply-To: <4D278A3A.6010302@pobox.com>
References: <4D278736.7060001@free.fr> <4D278A3A.6010302@pobox.com>
Message-ID: <4D279728.9030104@free.fr>

On 01/07/11 22:48, Frank Warmerdam wrote:
>
> I have two comments:
>
> 1) Please call the files ozi_ellips.csv and ozi_datum.csv

Sorry, it was a typo. Obviously, the names are ozi_ellips.csv and 
ozi_datum.csv.

> 2) What is the origin of these files? What is their licensing? We
> can't just take files from other software packages and release them as
> part of GDAL unless they are under a compatible license, or the copyright
> holder gives us explicit permission to release them under the GDAL license.

I have created both files.

The ellipsoid parameters are standard, and ellipsoid names have exactly 
the same spelling as in the Online-Help page of OziExplorer ("Adding 
User Datums"). But it not necessary, it is just for cosmetic reasons. 
The ellipsoid names could even be removed, but it would be less easy for 
users to add custom datums.

The datums names are exactly the sames as those displayed by OziExplorer 
(Menu : Display, Datum Parameters). This is necessary for the string 
comparisons to succeed when parsing .map files. The datum names have 
been copied manually to the ozi_datum.csv file.
The EPSG numbers are coming from the EPSG database.
The 3-parameters transformation value are those displayed by OziExplorer 
  (Menu : Display, Datum Parameters). They have been copied manually to 
the ozi_datums.csv file. Most of these parameters (and the datum names) 
are the same as in the datum list from the NGA, I think this is where 
the OziExplorer author took them.

Regards,
Jean-Claude

From Chris.Barker at noaa.gov  Sat Jan  8 12:05:23 2011
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Sat Jan  8 12:05:23 2011
Subject: Fwd: Re: [gdal-dev] FWTools and GDAL 1.7.0
In-Reply-To: <4D265D8F.6040704@ualg.pt>
References: <AANLkTimYf-GpSVkVoN+nE9TR_1T3S-GV38oAz0k5hdie@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AF@MAILBOXSERVER.rf.local>
	<1294227690320-5891689.post@n2.nabble.com> <4D24A0F0.3090308@noaa.gov>
	<AANLkTiknWBA_O9sQac27WDpy9RFzeWaZABjqcA5b1vaN@mail.gmail.com>
	<4D24B854.5060104@noaa.gov>
	<AANLkTi=jQFKfT0cE68Kuc9X_V8EDpUxJivBcDA2wowAx@mail.gmail.com>
	<4D24EFBD.1050201@noaa.gov>
	<AANLkTi=6=8m6paL4Ew8VY2gFHyraMqsPzXuVidzi0=vk@mail.gmail.com>
	<4D259642.7000309@gmail.com> <4D261C9F.4050200@noaa.gov>
	<035501cbade0$b84091b0$28c1b510$%roberts@duke.edu>
	<4D26372F.4070906@noaa.gov>
	<4D264A4E.8070001@ualg.pt> <4D2658A1.3050307@noaa.gov>
	<4D265D8F.6040704@ualg.pt>
Message-ID: <4D289953.2080509@noaa.gov>

On 1/6/2011 4:25 PM, Joaquim Luis wrote:
>> By the way, isn't there some new stuff about "side by side" installs
>> or something -- that's supposed to help dll hell?
>
> I think you are referring to the "manifests" but here also MS has
> changed their mind (aleluia). VC2010 doesn't have them anymore which IMO
> is a compelling reason to use this compiler whenever possible.

This is what I was talking about:

http://msdn.microsoft.com/en-us/library/aa376307%28VS.85%29.aspx

It does look like it is (or was) MS's solution to dll hell -- however, I 
remember it causing much pain for wxPython (particularly for py2exe), 
and I'm happy to defer to the experts here that seem to know that the 
cure was worse than the disease.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From szekerest at gmail.com  Sun Jan  9 07:51:35 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jan  9 07:51:38 2011
Subject: [gdal-dev] GDAL windows installers available
Message-ID: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>

Folks,

Upon the inspiration on the recent conversation in this topic I've put some
efforts to automate the creation of a generic GDAL installer derived from
the distributions available at http://vbkto.dyndns.org/sdk/.

Currently the following options are available from this site to install and
use GDAL:

1. Download the .zip package extract it in some location and run
SDKShell.bat to run the commandline tools (this is the former approach)
2. Use the core msi installer to install GDAL and use the installed shortcut
to run the command line tools.  Python users should install the python
bindings installer as well.

In order to have the bindings work the location of the core files should be
added to the PATH manually (this requirement will probably be removed in the
future when the automatic loader approach is implemented at the bindings)

The core installer places an entry in the registry (currently in HKCU)
containing the install location which will allow the loader to find the
required components.

This task is not yet complete, the following issues are to be handled or
reviewed in some way.

1. Side by side installation of the multiple versions is not yet supported.
2. Must review the license agreement (currently taken from the GDAL site)
3. Must review the product name
4. Must review the installer design
5. Must review the selectable features
6. Loader approach to be implemented for the bindings
7. Versioning rules should be clarified (should synchronize the registry
entries among the versions)
8. Further fixes


The core installer is provided as a single wix
<http://wix.sourceforge.net/>project file the build process is
executed by the command line apps
(candle.exe and light.exe). I will make the whole approach public as part to
the -dev packages at http://vbkto.dyndns.org/sdk/. By using this addition
one can easily rebuild the installer after creating a customized GDAL build.

The wix project file could also be included in GDAL source tree and a new
target could be added in the gdal makefile for creating the installer (the
CRT redistributable merge modules and the dependent dlls must be available
during the build). Having the locations of the OSGeo4w files in place, this
approach could easily generate the same installer for the OSGeo4w bundle.


Any testing efforts / comments / wishes are graciously accepted.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110109/63b09247/attachment.html
From mdsumner at gmail.com  Sun Jan  9 08:52:00 2011
From: mdsumner at gmail.com (Michael Sumner)
Date: Sun Jan  9 08:52:06 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
Message-ID: <AANLkTimz0xh90MbSsharD_wYB8WhE2aYh=-pU0c2B2y-@mail.gmail.com>

Awesome, thanks for this - I've really enjoyed the discussion too, a
great deal of good information there.

I downloaded and ran
http://vbkto.dyndns.org/sdk/Download.aspx?file=release-1600-x64-gdal-mapserver\gdal-18dev-1600-x64-core.msi
on Windows 7 64-bit. I removed an existing path reference to a build
from your site, then started the installed "GDAL 18dev (MSVC 2010
Win64) Command Prompt" shortcut. On running "gdalinfo" I get two
repeated popup errors:

---------------------------
gdalinfo.exe - System Error
---------------------------
The program can't start because OCI.dll is missing from your computer.
Try reinstalling the program to fix this problem.
---------------------------
OK
---------------------------

and this in the command window:


C:\Program Files\GDAL>gdalinfo
ERROR 1: Can't load requested DLL: C:\Program
Files\GDAL\gdalplugins\gdal_GEOR.dll
126: The specified module could not be found.

ERROR 1: Can't load requested DLL: C:\Program
Files\GDAL\gdalplugins\gdal_GEOR.dll
126: The specified module could not be found.

Usage: gdalinfo [--help-general] [-mm] [-stats] [-hist] [-nogcp] [-nomd]
                [-norat] [-noct] [-checksum] [-mdd domain]* datasetname

Otherwise it reports fine on a basic GeoTIFF.

Thanks again, and I hope that small detail is of some use.

Cheers, Mike.

On Sun, Jan 9, 2011 at 11:51 PM, Tamas Szekeres <szekerest@gmail.com> wrote:
> Folks,
>
> Upon the inspiration on the recent conversation in this topic I've put some
> efforts to automate the creation of a generic GDAL installer derived from
> the distributions available at http://vbkto.dyndns.org/sdk/.
>
> Currently the following options are available from this site to install and
> use GDAL:
>
> 1. Download the .zip package extract it in some location and run
> SDKShell.bat to run the commandline tools (this is the former approach)
> 2. Use the core msi installer to install GDAL and use the installed shortcut
> to run the command line tools.? Python users should install the python
> bindings installer as well.
>
> In order to have the bindings work the location of the core files should be
> added to the PATH manually (this requirement will probably be removed in the
> future when the automatic loader approach is implemented at the bindings)
>
> The core installer places an entry in the registry (currently in HKCU)
> containing the install location which will allow the loader to find the
> required components.
>
> This task is not yet complete, the following issues are to be handled or
> reviewed in some way.
>
> 1. Side by side installation of the multiple versions is not yet supported.
> 2. Must review the license agreement (currently taken from the GDAL site)
> 3. Must review the product name
> 4. Must review the installer design
> 5. Must review the selectable features
> 6. Loader approach to be implemented for the bindings
> 7. Versioning rules should be clarified (should synchronize the registry
> entries among the versions)
> 8. Further fixes
>
>
> The core installer is provided as a single wix project file the build
> process is executed by the command line apps (candle.exe and light.exe). I
> will make the whole approach public as part to the -dev packages at
> http://vbkto.dyndns.org/sdk/. By using this addition one can easily rebuild
> the installer after creating a customized GDAL build.
>
> The wix project file could also be included in GDAL source tree and a new
> target could be added in the gdal makefile for creating the installer (the
> CRT redistributable merge modules and the dependent dlls must be available
> during the build). Having the locations of the OSGeo4w files in place, this
> approach could easily generate the same installer for the OSGeo4w bundle.
>
>
> Any testing efforts / comments / wishes are graciously accepted.
>
> Best regards,
>
> Tamas
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner@gmail.com
From szekerest at gmail.com  Sun Jan  9 09:03:27 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jan  9 09:03:31 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <AANLkTimz0xh90MbSsharD_wYB8WhE2aYh=-pU0c2B2y-@mail.gmail.com>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
	<AANLkTimz0xh90MbSsharD_wYB8WhE2aYh=-pU0c2B2y-@mail.gmail.com>
Message-ID: <AANLkTikw1nvK=G4Wi0A7S5+-Uc2CuNNst+1tsR8mogC9@mail.gmail.com>

Michael,

You probably did a full install which is not recommended if the Oracle
environment is not in place. Try removing the OCI plugin by the add/remove
option.

Best regards,

Tamas



2011/1/9 Michael Sumner <mdsumner@gmail.com>

> Awesome, thanks for this - I've really enjoyed the discussion too, a
> great deal of good information there.
>
> I downloaded and ran
>
> http://vbkto.dyndns.org/sdk/Download.aspx?file=release-1600-x64-gdal-mapserver\gdal-18dev-1600-x64-core.msi<http://vbkto.dyndns.org/sdk/Download.aspx?file=release-1600-x64-gdal-mapserver%5Cgdal-18dev-1600-x64-core.msi>
> on Windows 7 64-bit. I removed an existing path reference to a build
> from your site, then started the installed "GDAL 18dev (MSVC 2010
> Win64) Command Prompt" shortcut. On running "gdalinfo" I get two
> repeated popup errors:
>
> ---------------------------
> gdalinfo.exe - System Error
> ---------------------------
> The program can't start because OCI.dll is missing from your computer.
> Try reinstalling the program to fix this problem.
> ---------------------------
> OK
> ---------------------------
>
> and this in the command window:
>
>
> C:\Program Files\GDAL>gdalinfo
> ERROR 1: Can't load requested DLL: C:\Program
> Files\GDAL\gdalplugins\gdal_GEOR.dll
> 126: The specified module could not be found.
>
> ERROR 1: Can't load requested DLL: C:\Program
> Files\GDAL\gdalplugins\gdal_GEOR.dll
> 126: The specified module could not be found.
>
> Usage: gdalinfo [--help-general] [-mm] [-stats] [-hist] [-nogcp] [-nomd]
>                [-norat] [-noct] [-checksum] [-mdd domain]* datasetname
>
> Otherwise it reports fine on a basic GeoTIFF.
>
> Thanks again, and I hope that small detail is of some use.
>
> Cheers, Mike.
>
> On Sun, Jan 9, 2011 at 11:51 PM, Tamas Szekeres <szekerest@gmail.com>
> wrote:
> > Folks,
> >
> > Upon the inspiration on the recent conversation in this topic I've put
> some
> > efforts to automate the creation of a generic GDAL installer derived from
> > the distributions available at http://vbkto.dyndns.org/sdk/.
> >
> > Currently the following options are available from this site to install
> and
> > use GDAL:
> >
> > 1. Download the .zip package extract it in some location and run
> > SDKShell.bat to run the commandline tools (this is the former approach)
> > 2. Use the core msi installer to install GDAL and use the installed
> shortcut
> > to run the command line tools.  Python users should install the python
> > bindings installer as well.
> >
> > In order to have the bindings work the location of the core files should
> be
> > added to the PATH manually (this requirement will probably be removed in
> the
> > future when the automatic loader approach is implemented at the bindings)
> >
> > The core installer places an entry in the registry (currently in HKCU)
> > containing the install location which will allow the loader to find the
> > required components.
> >
> > This task is not yet complete, the following issues are to be handled or
> > reviewed in some way.
> >
> > 1. Side by side installation of the multiple versions is not yet
> supported.
> > 2. Must review the license agreement (currently taken from the GDAL site)
> > 3. Must review the product name
> > 4. Must review the installer design
> > 5. Must review the selectable features
> > 6. Loader approach to be implemented for the bindings
> > 7. Versioning rules should be clarified (should synchronize the registry
> > entries among the versions)
> > 8. Further fixes
> >
> >
> > The core installer is provided as a single wix project file the build
> > process is executed by the command line apps (candle.exe and light.exe).
> I
> > will make the whole approach public as part to the -dev packages at
> > http://vbkto.dyndns.org/sdk/. By using this addition one can easily
> rebuild
> > the installer after creating a customized GDAL build.
> >
> > The wix project file could also be included in GDAL source tree and a new
> > target could be added in the gdal makefile for creating the installer
> (the
> > CRT redistributable merge modules and the dependent dlls must be
> available
> > during the build). Having the locations of the OSGeo4w files in place,
> this
> > approach could easily generate the same installer for the OSGeo4w bundle.
> >
> >
> > Any testing efforts / comments / wishes are graciously accepted.
> >
> > Best regards,
> >
> > Tamas
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Michael Sumner
> Institute for Marine and Antarctic Studies, University of Tasmania
> Hobart, Australia
> e-mail: mdsumner@gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110109/864710bf/attachment-0001.html
From even.rouault at mines-paris.org  Sun Jan  9 10:29:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan  9 10:29:13 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
Message-ID: <201101091629.04915.even.rouault@mines-paris.org>

Tamas,

When running the autotest suite against the installed GDAL by the installer, 
I've noticed that a few files that are in gdal/data aren't included in gdal-
data :
* header.dxf
* trailer.dxf 
* pci_datum.txt
* pci_ellips.txt

Best regards,

Even
From antonio.rocha at deimos.com.pt  Mon Jan 10 04:31:11 2011
From: antonio.rocha at deimos.com.pt (=?UTF-8?B?QW50w7NuaW8gUm9jaGE=?=)
Date: Mon Jan 10 04:30:23 2011
Subject: [gdal-dev] Strange printed lines for binary gdalinfo16 in Windows
In-Reply-To: <AANLkTi=hb1yu7R9q5kE9o86A-hig2meZAD=bS-cRea53@mail.gmail.com>
References: <4D271FEB.60802@deimos.com.pt>
	<AANLkTi=hb1yu7R9q5kE9o86A-hig2meZAD=bS-cRea53@mail.gmail.com>
Message-ID: <4D2AD1DF.8060104@deimos.com.pt>

Hi
Thanks for the information. Where can I get a newer verasion of GDAL-BIn 
for Windows?
THanks
Chaitanya kumar CH wrote:
> Ant?nio,
>
> This is not a bug. This is the debugging information printed by the 
> grib driver. The code to print this has been commented out by Even a 
> while ago. Try a later version of GDAL for less verbosity.



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5772 (20110109) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From chaitanya.ch at gmail.com  Mon Jan 10 05:10:41 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan 10 05:10:43 2011
Subject: [gdal-dev] Strange printed lines for binary gdalinfo16 in Windows
In-Reply-To: <4D2AD1DF.8060104@deimos.com.pt>
References: <4D271FEB.60802@deimos.com.pt>
	<AANLkTi=hb1yu7R9q5kE9o86A-hig2meZAD=bS-cRea53@mail.gmail.com>
	<4D2AD1DF.8060104@deimos.com.pt>
Message-ID: <AANLkTimk5cdi1Wwx35X4cycKT=BSUs4NbqEvZJQ9TGni@mail.gmail.com>

Ant?nio,

Tamas Szekeres provided a selection of GDAL and MapServer binaries at
http://vbkto.dyndns.org/sdk/

2011/1/10 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Hi
> Thanks for the information. Where can I get a newer verasion of GDAL-BIn
> for Windows?
> THanks
>
> Chaitanya kumar CH wrote:
>
>> Ant?nio,
>>
>> This is not a bug. This is the debugging information printed by the grib
>> driver. The code to print this has been commented out by Even a while ago.
>> Try a later version of GDAL for less verbosity.
>>
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5772 (20110109) __________
>
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/4d715c33/attachment.html
From mdsumner at gmail.com  Mon Jan 10 05:43:33 2011
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon Jan 10 05:43:35 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <AANLkTikw1nvK=G4Wi0A7S5+-Uc2CuNNst+1tsR8mogC9@mail.gmail.com>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
	<AANLkTimz0xh90MbSsharD_wYB8WhE2aYh=-pU0c2B2y-@mail.gmail.com>
	<AANLkTikw1nvK=G4Wi0A7S5+-Uc2CuNNst+1tsR8mogC9@mail.gmail.com>
Message-ID: <AANLkTi=rKOWyOgRHpNy64VDPTq30Sw_bQx7eJYZQ4eLv@mail.gmail.com>

Ah, yes - a Typical mistake on my part. All good, thanks a lot!

Cheers, Mike.

On Mon, Jan 10, 2011 at 1:03 AM, Tamas Szekeres <szekerest@gmail.com> wrote:
> Michael,
>
> You probably did a full install which is not recommended if the Oracle
> environment is not in place. Try removing the OCI plugin by the add/remove
> option.
>
> Best regards,
>
> Tamas
>
>
>
> 2011/1/9 Michael Sumner <mdsumner@gmail.com>
>>
>> Awesome, thanks for this - I've really enjoyed the discussion too, a
>> great deal of good information there.
>>
>> I downloaded and ran
>>
>> http://vbkto.dyndns.org/sdk/Download.aspx?file=release-1600-x64-gdal-mapserver\gdal-18dev-1600-x64-core.msi
>> on Windows 7 64-bit. I removed an existing path reference to a build
>> from your site, then started the installed "GDAL 18dev (MSVC 2010
>> Win64) Command Prompt" shortcut. On running "gdalinfo" I get two
>> repeated popup errors:
>>
>> ---------------------------
>> gdalinfo.exe - System Error
>> ---------------------------
>> The program can't start because OCI.dll is missing from your computer.
>> Try reinstalling the program to fix this problem.
>> ---------------------------
>> OK
>> ---------------------------
>>
>> and this in the command window:
>>
>>
>> C:\Program Files\GDAL>gdalinfo
>> ERROR 1: Can't load requested DLL: C:\Program
>> Files\GDAL\gdalplugins\gdal_GEOR.dll
>> 126: The specified module could not be found.
>>
>> ERROR 1: Can't load requested DLL: C:\Program
>> Files\GDAL\gdalplugins\gdal_GEOR.dll
>> 126: The specified module could not be found.
>>
>> Usage: gdalinfo [--help-general] [-mm] [-stats] [-hist] [-nogcp] [-nomd]
>> ? ? ? ? ? ? ? ?[-norat] [-noct] [-checksum] [-mdd domain]* datasetname
>>
>> Otherwise it reports fine on a basic GeoTIFF.
>>
>> Thanks again, and I hope that small detail is of some use.
>>
>> Cheers, Mike.
>>
>> On Sun, Jan 9, 2011 at 11:51 PM, Tamas Szekeres <szekerest@gmail.com>
>> wrote:
>> > Folks,
>> >
>> > Upon the inspiration on the recent conversation in this topic I've put
>> > some
>> > efforts to automate the creation of a generic GDAL installer derived
>> > from
>> > the distributions available at http://vbkto.dyndns.org/sdk/.
>> >
>> > Currently the following options are available from this site to install
>> > and
>> > use GDAL:
>> >
>> > 1. Download the .zip package extract it in some location and run
>> > SDKShell.bat to run the commandline tools (this is the former approach)
>> > 2. Use the core msi installer to install GDAL and use the installed
>> > shortcut
>> > to run the command line tools.? Python users should install the python
>> > bindings installer as well.
>> >
>> > In order to have the bindings work the location of the core files should
>> > be
>> > added to the PATH manually (this requirement will probably be removed in
>> > the
>> > future when the automatic loader approach is implemented at the
>> > bindings)
>> >
>> > The core installer places an entry in the registry (currently in HKCU)
>> > containing the install location which will allow the loader to find the
>> > required components.
>> >
>> > This task is not yet complete, the following issues are to be handled or
>> > reviewed in some way.
>> >
>> > 1. Side by side installation of the multiple versions is not yet
>> > supported.
>> > 2. Must review the license agreement (currently taken from the GDAL
>> > site)
>> > 3. Must review the product name
>> > 4. Must review the installer design
>> > 5. Must review the selectable features
>> > 6. Loader approach to be implemented for the bindings
>> > 7. Versioning rules should be clarified (should synchronize the registry
>> > entries among the versions)
>> > 8. Further fixes
>> >
>> >
>> > The core installer is provided as a single wix project file the build
>> > process is executed by the command line apps (candle.exe and light.exe).
>> > I
>> > will make the whole approach public as part to the -dev packages at
>> > http://vbkto.dyndns.org/sdk/. By using this addition one can easily
>> > rebuild
>> > the installer after creating a customized GDAL build.
>> >
>> > The wix project file could also be included in GDAL source tree and a
>> > new
>> > target could be added in the gdal makefile for creating the installer
>> > (the
>> > CRT redistributable merge modules and the dependent dlls must be
>> > available
>> > during the build). Having the locations of the OSGeo4w files in place,
>> > this
>> > approach could easily generate the same installer for the OSGeo4w
>> > bundle.
>> >
>> >
>> > Any testing efforts / comments / wishes are graciously accepted.
>> >
>> > Best regards,
>> >
>> > Tamas
>> >
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>>
>>
>> --
>> Michael Sumner
>> Institute for Marine and Antarctic Studies, University of Tasmania
>> Hobart, Australia
>> e-mail: mdsumner@gmail.com
>
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner@gmail.com
From jason.roberts at duke.edu  Mon Jan 10 09:48:35 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Jan 10 09:48:41 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
Message-ID: <002701cbb0d5$76525160$62f6f420$@roberts@duke.edu>

Tamas,

 

Nice job getting something out so quickly. You remind me of this Dilbert
cartoon
<http://dilbert.com/dyn/str_strip/000000000/00000000/0000000/000000/10000/80
00/400/18402/18402.strip.zoom.gif>  from back in the day.

 

Due to various deadlines I won't be able to look at this until Wednesday but
hope to get you some comments by that time. We should probably follow
through on Frank's request for an RFC, so the design can be reviewed and
approved according to the normal procedure.

 

I do have one request/requirement: unattended install. It would be really
great if I could include eventually include or dynamically download a copy
of the GDAL msi in my own software, and then invoke msiexec to install it
automatically. Can you make sure this is possible with your msi package?

 

BTW, when we get to the Python bindings installer, this is another reason to
build the Python bindings installer as a .msi rather than a .exe. That is
possible with Python 2.5 and later.

 

Thanks,

Jason 

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tamas Szekeres
Sent: Sunday, January 09, 2011 7:52 AM
To: gdal-dev
Subject: [gdal-dev] GDAL windows installers available

 

Folks,

Upon the inspiration on the recent conversation in this topic I've put some
efforts to automate the creation of a generic GDAL installer derived from
the distributions available at http://vbkto.dyndns.org/sdk/.

Currently the following options are available from this site to install and
use GDAL:

1. Download the .zip package extract it in some location and run
SDKShell.bat to run the commandline tools (this is the former approach)
2. Use the core msi installer to install GDAL and use the installed shortcut
to run the command line tools.  Python users should install the python
bindings installer as well.

In order to have the bindings work the location of the core files should be
added to the PATH manually (this requirement will probably be removed in the
future when the automatic loader approach is implemented at the bindings)

The core installer places an entry in the registry (currently in HKCU)
containing the install location which will allow the loader to find the
required components.

This task is not yet complete, the following issues are to be handled or
reviewed in some way.

1. Side by side installation of the multiple versions is not yet supported.
2. Must review the license agreement (currently taken from the GDAL site)
3. Must review the product name
4. Must review the installer design
5. Must review the selectable features
6. Loader approach to be implemented for the bindings
7. Versioning rules should be clarified (should synchronize the registry
entries among the versions)
8. Further fixes 


The core installer is provided as a single wix <http://wix.sourceforge.net/>
project file the build process is executed by the command line apps
(candle.exe and light.exe). I will make the whole approach public as part to
the -dev packages at http://vbkto.dyndns.org/sdk/. By using this addition
one can easily rebuild the installer after creating a customized GDAL build.

The wix project file could also be included in GDAL source tree and a new
target could be added in the gdal makefile for creating the installer (the
CRT redistributable merge modules and the dependent dlls must be available
during the build). Having the locations of the OSGeo4w files in place, this
approach could easily generate the same installer for the OSGeo4w bundle.


Any testing efforts / comments / wishes are graciously accepted.

Best regards,

Tamas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/2758a9b6/attachment.html
From szekerest at gmail.com  Mon Jan 10 11:15:03 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 10 11:15:10 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <2763257845799345883@unknownmsgid>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
	<2763257845799345883@unknownmsgid>
Message-ID: <AANLkTikiAuP3D6sRn_jsp=Y9EbKgr2E8BKD=XfDU49bY@mail.gmail.com>

2011/1/10 Jason Roberts <jason.roberts@duke.edu>

>
> Nice job getting something out so quickly. You remind me of this Dilbert
> cartoon<http://dilbert.com/dyn/str_strip/000000000/00000000/0000000/000000/10000/8000/400/18402/18402.strip.zoom.gif>from back in the day.
>

:-)


>
>
> Due to various deadlines I won?t be able to look at this until Wednesday
> but hope to get you some comments by that time. We should probably follow
> through on Frank?s request for an RFC, so the design can be reviewed and
> approved according to the normal procedure.
>
>
>

No problem, I will only be able to implement any modifications by the end of
this week, probably. This is something to be let alone for a while before
outlining the best solution to be written. I'm also thinking about how this
approach could provide the same installers from the osgeo4w bundle by using
the same wix configuration file. The windows makefile in GDAL could also be
extended with the targets of creating the installer as part of the GDAL
build process.


> I do have one request/requirement: unattended install. It would be really
> great if I could include eventually include or dynamically download a copy
> of the GDAL msi in my own software, and then invoke msiexec to install it
> automatically. Can you make sure this is possible with your msi package?
>
>
>

Good idea, I will also include a shortcut to perform update directly from
web in passive mode. It would be a convenient way to keep the installation
up to date with the frequent changes provided by the buildsystem. It would
however be reasonable to get some file hosting capabilities at some other
servers to be able to provide the number of downloads are happening this
way.


> BTW, when we get to the Python bindings installer, this is another reason
> to build the Python bindings installer as a .msi rather than a .exe. That is
> possible with Python 2.5 and later.
>
>
>

I didn't find this option working with my Python installation (2.5 and 2.6),
is that something which have been added in a recent point release?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/5b53b02d/attachment-0001.html
From jason.roberts at duke.edu  Mon Jan 10 11:33:56 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Jan 10 11:34:01 2011
Subject: [gdal-dev] GDAL windows installers available
In-Reply-To: <AANLkTikiAuP3D6sRn_jsp=Y9EbKgr2E8BKD=XfDU49bY@mail.gmail.com>
References: <AANLkTi=p88zTrsyQvrdTcj8DjwEZLENKnOPgnESgSZKG@mail.gmail.com>
	<2763257845799345883@unknownmsgid>
	<AANLkTikiAuP3D6sRn_jsp=Y9EbKgr2E8BKD=XfDU49bY@mail.gmail.com>
Message-ID: <003f01cbb0e4$2d91c0f0$88b542d0$@roberts@duke.edu>

BTW, when we get to the Python bindings installer, this is another reason to
build the Python bindings installer as a .msi rather than a .exe. That is
possible with Python 2.5 and later. 

I didn't find this option working with my Python installation (2.5 and 2.6),
is that something which have been added in a recent point release? 



It exists in Python 2.5 (at least in my 2.5.4) but is not documented until
later versions, maybe 2.7. Look for
Python25\Lib\distutils\command\bdist_msi.py. I have never used it. This
early email
<http://mail.python.org/pipermail/tutor/2007-February/052633.html>  might
help; it appears reference the original prototype (see link to
uni-potsdam.de) by Martin v. L?wis, is a long-time Python contributor.

One reason I?ve never used it is that it did not appear to support
pre-install and post-install scripts (scripts that run before and after the
Python files are installed). Or maybe it supported post-install but not
pre-install. Anyway, those are handy if you need to do something other than
get the Python code installed on the machine, which I need to do. I don?t
think you?ll need to do that for the Python bindings, so it shouldn?t be an
issue.

Jason

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/c409120f/attachment.html
From abausch at nova.whrc.org  Mon Jan 10 13:19:24 2011
From: abausch at nova.whrc.org (Adam Bausch)
Date: Mon Jan 10 13:36:11 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
Message-ID: <4D2B4DAC.6090200@nova.whrc.org>

Hi All,
I am attempting to process a large volume of MERIS mosaic data obtained 
from ENVISAT in HDF-EOS2 format, however, I continue to get a "not a 
supported format" error when I try to run it.  I have installed the 
HDF-4 (libdf), HDF-5 (libhdf5) and NetCDF libraries and checked with our 
Linux/Unix administrator to try and identify the problem with no 
resolution.  I was wondering if anyone else has had this problem or if 
there is a fix.
Best,
Adam

From nhatzop at gmail.com  Mon Jan 10 15:31:15 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Mon Jan 10 15:31:19 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
In-Reply-To: <4D2B4DAC.6090200@nova.whrc.org>
References: <4D2B4DAC.6090200@nova.whrc.org>
Message-ID: <AANLkTinVGivwMxsicMU0GGMSdCrC+3dcahDbiaf8B0x-@mail.gmail.com>

what gdalinfo gives you?
this is a very helpful link http://www.gdal.org/frmt_hdf4.html



On Mon, Jan 10, 2011 at 10:19 AM, Adam Bausch <abausch@nova.whrc.org> wrote:

> Hi All,
> I am attempting to process a large volume of MERIS mosaic data obtained
> from ENVISAT in HDF-EOS2 format, however, I continue to get a "not a
> supported format" error when I try to run it.  I have installed the HDF-4
> (libdf), HDF-5 (libhdf5) and NetCDF libraries and checked with our
> Linux/Unix administrator to try and identify the problem with no resolution.
>  I was wondering if anyone else has had this problem or if there is a fix.
> Best,
> Adam
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/91ec867e/attachment.html
From james.j.manzione at usace.army.mil  Mon Jan 10 16:36:29 2011
From: james.j.manzione at usace.army.mil (manzione)
Date: Mon Jan 10 16:36:32 2011
Subject: [gdal-dev] installing GDAL for pythonwin: can import and use gdal,
 but not gdaltransform
Message-ID: <1294695389775-5908686.post@n2.nabble.com>


Greetings all, 

I have been able to successfully download and use GDAL 1.7.3 in PythonWin,
but am not able to use gdaltransform.  I understand that gdaltransform is an
executable that requires additional installation steps before it can be
implemented.  Can someone please provide me a link to where I can download
gdaltransform.exe and documentation on how to set it up I would be truly
grateful. 

Thank in advance for your time in response! 

-James

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdaltransform-tp5908686p5908686.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From kmckelvey at lizardtech.com  Mon Jan 10 20:05:21 2011
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Mon Jan 10 20:05:36 2011
Subject: [gdal-dev] mrsid nmake.opt
Message-ID: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>

All,

I have made a change to simplify build configuration for the mrsid driver on the trunk (r21458).  If you regularly build this driver, especially if you have a vested interest in maintaining compatibility with a particular historical MrSID SDK release, please give it a whirl and let me know if you have any trouble with it.

Previously it was a manual and iterative process to get the MRSID_* vars correct for a given SDK release - especially if it was an older one.  Now you should just have to set MRSID_DIR and that's it, even using older MrSID SDKs.

The work is done in a new file, frmts/mrsid/nmake.opt, which is !INCLUDEd from gdal/nmake.opt.  If you have an interest in the windows build harness and the patience to examine this file I would appreciate hearing any feedback or concerns about the approach I took.

Tamas, from what I understand you have tweaked the layout of the MrSID SDK used in your daily windows builds.  Depending on the details this might work for you anyway; if it doesn't, let me know.

Thanks,

Kirk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/2b2370c4/attachment.html
From nhatzop at gmail.com  Mon Jan 10 22:54:45 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Mon Jan 10 22:54:48 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
In-Reply-To: <4D2B7200.4050301@nova.whrc.org>
References: <4D2B4DAC.6090200@nova.whrc.org>
	<AANLkTinVGivwMxsicMU0GGMSdCrC+3dcahDbiaf8B0x-@mail.gmail.com>
	<4D2B7200.4050301@nova.whrc.org>
Message-ID: <AANLkTi=W7OdLLhrHeNazmQsbQCO7Zqdkzt7BU76C+5wf@mail.gmail.com>

from here:
http://www.brockmann-consult.de/cms/web/beam/meris-products

I download this file which is level2 data:
http://www.brockmann-consult.de/beam/data/products/MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.zip

gdalinfo gives me:


Driver: ESAT/Envisat Image Format
Files: MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
Size is 2241, 2241
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0.5,0.5) -> (10.599538,56.49672,0)
....
Metadata:
  MPH_PRODUCT=MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
  MPH_PROC_STAGE=N
  MPH_REF_DOC=PO-RS-MDA-GS2009_11_3J
  MPH_ACQUISITION_STATION=PDHS-K
  MPH_PROC_CENTER=E-PAC
  MPH_PROC_TIME=04-AUG-2003 15:12:31.508420
  MPH_SOFTWARE_VER=MERIS/4.06
  MPH_SENSING_START=14-JUL-2003 10:26:32.276537
  MPH_SENSING_STOP=14-JUL-2003 10:32:37.452300
  MPH_PHASE=2
  MPH_CYCLE=+018
  MPH_REL_ORBIT=+00094
  MPH_ABS_ORBIT=+07162
  MPH_STATE_VECTOR_TIME=14-JUL-2003 10:27:00.000000
  MPH_DELTA_UT1=-.359896
  MPH_X_POSITION=+2948879.180
  MPH_Y_POSITION=+0636697.527
  MPH_Z_POSITION=+6488093.331
  MPH_X_VELOCITY=+6793.676563
  MPH_Y_VELOCITY=-1452.749368
  MPH_Z_VELOCITY=-2938.824735
  MPH_VECTOR_SOURCE=FR
  MPH_UTC_SBT_TIME=14-JUL-2003 10:18:36.710154
  MPH_SAT_BINARY_TIME=+2483253760
  MPH_CLOCK_STEP=+3906249805
  MPH_LEAP_UTC=17-OCT-2001 00:00:00.000000
  MPH_LEAP_SIGN=+001
  MPH_LEAP_ERR=0
  MPH_PRODUCT_ERR=1
  SPH_SPH_DESCRIPTOR=MER_FR__2P SPECIFIC HEADER
  SPH_STRIPLINE_CONTINUITY_INDICATOR=+000
  SPH_SLICE_POSITION=+001
  SPH_NUM_SLICES=+001
  SPH_FIRST_LINE_TIME=14-JUL-2003 10:29:18.385327
  SPH_LAST_LINE_TIME=14-JUL-2003 10:30:56.938607
  SPH_FIRST_FIRST_LAT=+0056496720
  SPH_FIRST_FIRST_LONG=+0010599537
  SPH_FIRST_MID_LAT=+0057382170
  SPH_FIRST_MID_LONG=+0006097018
  SPH_FIRST_LAST_LAT=+0058099238
  SPH_FIRST_LAST_LONG=+0001394104
  SPH_LAST_FIRST_LAT=+0050903410
  SPH_LAST_FIRST_LONG=+0007084803
  SPH_LAST_MID_LAT=+0051698757
  SPH_LAST_MID_LONG=+0003106173
  SPH_LAST_LAST_LAT=+0052354870
  SPH_LAST_LAST_LONG=-0001001598
  SPH_TRANS_ERR_FLAG=0
  SPH_FORMAT_ERR_FLAG=0
  SPH_DATABASE_FLAG=0
  SPH_COARSE_ERR_FLAG=1
  SPH_ECMWF_TYPE=1
  SPH_NUM_TRANS_ERR=+0000000000
  SPH_NUM_FORMAT_ERR=+0000000000
  SPH_TRANS_ERR_THRESH=+0.00000000E+00
  SPH_FORMAT_ERR_THRESH=+0.00000000E+00
  SPH_NUM_BANDS=+015

SPH_BAND_WAVELEN=+0000412545+0000442401+0000489744+0000509700+0000559634+00006
19620+0000664640+0000680902+0000708426+0000753472+0000761606+0000778498+00008648
33+0000884849+0000899860

SPH_BANDWIDTH=+09930+09946+09965+09971+09983+09991+09994+07493+09996+07493+037
42+15000+19999+09990+09989
  SPH_INST_FOV=+0000019159
  SPH_PROC_MODE=1
  SPH_OFFSET_COMP=1
  SPH_LINE_TIME_INTERVAL=+0000043997
  SPH_LINE_LENGTH=+02241
  SPH_LINES_PER_TIE_PT=+064
  SPH_SAMPLES_PER_TIE_PT=+064
  SPH_COLUMN_SPACING=+2.60000000E+02

DS_LEVEL_1B_PRODUCT_NAME=MER_FR__1PNEPA20030714_102918_000000982018_00094_0716
2_0120.N1

DS_AEROSOL_CLIMATOLOGY_FILE_NAME=MER_AER_AXVIEC20030620_120000_20020321_193100
_20200101_000000

DS_PROCESSING_PARAMS_L2_FILE_NAME=MER_CP2_AXVIEC20030620_120000_20021224_12144
5_20121224_121445

DS_ATMOSPHERIC_PARAMETERS_FILE_NAME=MER_ATP_AXVIEC20030620_120000_20021224_121
445_20121224_121445

DS_WATER_VAPOUR_PARAMETERS_FILE_NAME=MER_WVP_AXVIEC20030620_120000_20020321_19
3100_20120321_193100

DS_OCEAN_AEROSOLS_PARAMS_FILE_NAME=MER_OAP_AXVIEC20030620_120001_20020321_1931
00_20120321_193100

DS_LAND_AEROSOLS_PARAMS_FILE_NAME=MER_LAP_AXVIEC20030715_151450_20020321_19310
0_20120321_193100

DS_OCEAN_I_PARAMETERS_FILE_NAME=MER_OC1_AXVIEC20030620_120000_20020321_193100_
20120321_193100

DS_OCEAN_II_PARAMETERS_FILE_NAME=MER_OC2_AXVIEC20030620_120000_20020321_193100
_20120624_174339

DS_CLOUD_MEASUREMENT_FILE_NAME=MER_CMP_AXVIEC20030620_120000_20021224_121445_2
0120321_193100

DS_LAND_VEGETATION_INDEX_FILE_NAME=MER_LVI_AXVIEC20030620_120000_20020321_1931
00_20130224_164916
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 2241.0)
Upper Right ( 2241.0,    0.0)
Lower Right ( 2241.0, 2241.0)
Center      ( 1120.5, 1120.5)
Band 1 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(1)
Band 2 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(2)
Band 3 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(3)
Band 4 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(4)
Band 5 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(5)
Band 6 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(6)
Band 7 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(7)
Band 8 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(8)
Band 9 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(9)
Band 10 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(10)
Band 11 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(11)
Band 12 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(12)
Band 13 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Norm. rho_surf - MDS(13)
Band 14 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = YS, SPM, Rect. Rho- MDS(16)
Band 15 Block=2241x1 Type=UInt16, ColorInterp=Undefined
  Description = Epsilon, OPT   - MDS(19)

I am using centos linux


On Mon, Jan 10, 2011 at 12:54 PM, Adam Bausch <abausch@nova.whrc.org> wrote:

>  Hi,
> I get the following error.
> GDALOpen failed - 4
> `H29V13.hdf' not recognised as a supported file format.
> Thanks for the link.
> Adam
>
>
> On 1/10/11 3:31 PM, Nikolaos Hatzopoulos wrote:
>
> what gdalinfo gives you?
> this is a very helpful link http://www.gdal.org/frmt_hdf4.html
>
>
>
> On Mon, Jan 10, 2011 at 10:19 AM, Adam Bausch <abausch@nova.whrc.org>wrote:
>
>> Hi All,
>> I am attempting to process a large volume of MERIS mosaic data obtained
>> from ENVISAT in HDF-EOS2 format, however, I continue to get a "not a
>> supported format" error when I try to run it.  I have installed the HDF-4
>> (libdf), HDF-5 (libhdf5) and NetCDF libraries and checked with our
>> Linux/Unix administrator to try and identify the problem with no resolution.
>>  I was wondering if anyone else has had this problem or if there is a fix.
>> Best,
>> Adam
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110110/bb5c65cd/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Jan 11 03:23:03 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 11 03:23:06 2011
Subject: [gdal-dev] installing GDAL for pythonwin: can import and use
	gdal, but not gdaltransform
In-Reply-To: <1294695389775-5908686.post@n2.nabble.com>
References: <1294695389775-5908686.post@n2.nabble.com>
Message-ID: <AANLkTinMmYYCmRDOw=EJYsv9y8nivQ8EFY-_-vDu404-@mail.gmail.com>

James,

gdaltransform and some other command line utilities are a part of the GDAL
project. It comes with the GDAL library.
You should be able to use it from the commandline after setting some env
variables.
LD_LIBRARY_PATH should direct to the folder contain the GDAL library.
GDAL_DATA to the gdal's data folder.
You might also need to set the PATH variable to the gdal apps folder.

OSGeo4W and FWTools packages do these things automatically.

On Tue, Jan 11, 2011 at 3:06 AM, manzione
<james.j.manzione@usace.army.mil>wrote:

>
> Greetings all,
>
> I have been able to successfully download and use GDAL 1.7.3 in PythonWin,
> but am not able to use gdaltransform.  I understand that gdaltransform is
> an
> executable that requires additional installation steps before it can be
> implemented.  Can someone please provide me a link to where I can download
> gdaltransform.exe and documentation on how to set it up I would be truly
> grateful.
>
> Thank in advance for your time in response!
>
> -James
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdaltransform-tp5908686p5908686.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110111/cb17e6a4/attachment.html
From jmckenna at gatewaygeomatics.com  Tue Jan 11 08:08:42 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jan 11 08:08:46 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
Message-ID: <4D2C565A.8090808@gatewaygeomatics.com>

Thanks Kirk, I'll give it a whirl.

Also, I wonder if we need to update anything on the MrSID wiki page: 
http://trac.osgeo.org/gdal/wiki/MrSID

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




On 11-01-10 9:05 PM, Kirk McKelvey wrote:
> All,
>
> I have made a change to simplify build configuration for the mrsid
> driver on the trunk (r21458). If you regularly build this driver,
> especially if you have a vested interest in maintaining compatibility
> with a particular historical MrSID SDK release, please give it a whirl
> and let me know if you have any trouble with it.
>
> Previously it was a manual and iterative process to get the MRSID_* vars
> correct for a given SDK release ? especially if it was an older one. Now
> you should just have to set MRSID_DIR and that?s it, even using older
> MrSID SDKs.
>
> The work is done in a new file, frmts/mrsid/nmake.opt, which is
> !INCLUDEd from gdal/nmake.opt. If you have an interest in the windows
> build harness and the patience to examine this file I would appreciate
> hearing any feedback or concerns about the approach I took.
>
> Tamas, from what I understand you have tweaked the layout of the MrSID
> SDK used in your daily windows builds. Depending on the details this
> might work for you anyway; if it doesn?t, let me know.
>

From abausch at nova.whrc.org  Tue Jan 11 09:20:47 2011
From: abausch at nova.whrc.org (Adam Bausch)
Date: Tue Jan 11 09:20:51 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
In-Reply-To: <AANLkTi=W7OdLLhrHeNazmQsbQCO7Zqdkzt7BU76C+5wf@mail.gmail.com>
References: <4D2B4DAC.6090200@nova.whrc.org>	<AANLkTinVGivwMxsicMU0GGMSdCrC+3dcahDbiaf8B0x-@mail.gmail.com>	<4D2B7200.4050301@nova.whrc.org>
	<AANLkTi=W7OdLLhrHeNazmQsbQCO7Zqdkzt7BU76C+5wf@mail.gmail.com>
Message-ID: <4D2C673F.7050001@nova.whrc.org>

Hi Nikolaos,
I wish I were using the level 2 product in .N1 format but the level 3 
MERIS mosaics are processed to .hdf - EOS2.  I can work with N1 data 
just fine if that were the case, but batch processing with BEAM doesn't 
support what I am trying to do with HDF's (unless I could program in 
Java..yikes)
Best,
Adam


On 1/10/11 10:54 PM, Nikolaos Hatzopoulos wrote:
> from here:
> http://www.brockmann-consult.de/cms/web/beam/meris-products
>
> I download this file which is level2 data:
> http://www.brockmann-consult.de/beam/data/products/MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.zip
>
> gdalinfo gives me:
>
>
> Driver: ESAT/Envisat Image Format
> Files: MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
> Size is 2241, 2241
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> GCP[  0]: Id=1, Info=
>           (0.5,0.5) -> (10.599538,56.49672,0)
> ....
> Metadata:
>   
> MPH_PRODUCT=MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
>   MPH_PROC_STAGE=N
>   MPH_REF_DOC=PO-RS-MDA-GS2009_11_3J
>   MPH_ACQUISITION_STATION=PDHS-K
>   MPH_PROC_CENTER=E-PAC
>   MPH_PROC_TIME=04-AUG-2003 15:12:31.508420
>   MPH_SOFTWARE_VER=MERIS/4.06
>   MPH_SENSING_START=14-JUL-2003 10:26:32.276537
>   MPH_SENSING_STOP=14-JUL-2003 10:32:37.452300
>   MPH_PHASE=2
>   MPH_CYCLE=+018
>   MPH_REL_ORBIT=+00094
>   MPH_ABS_ORBIT=+07162
>   MPH_STATE_VECTOR_TIME=14-JUL-2003 10:27:00.000000
>   MPH_DELTA_UT1=-.359896
>   MPH_X_POSITION=+2948879.180
>   MPH_Y_POSITION=+0636697.527
>   MPH_Z_POSITION=+6488093.331
>   MPH_X_VELOCITY=+6793.676563
>   MPH_Y_VELOCITY=-1452.749368
>   MPH_Z_VELOCITY=-2938.824735
>   MPH_VECTOR_SOURCE=FR
>   MPH_UTC_SBT_TIME=14-JUL-2003 10:18:36.710154
>   MPH_SAT_BINARY_TIME=+2483253760
>   MPH_CLOCK_STEP=+3906249805
>   MPH_LEAP_UTC=17-OCT-2001 00:00:00.000000
>   MPH_LEAP_SIGN=+001
>   MPH_LEAP_ERR=0
>   MPH_PRODUCT_ERR=1
>   SPH_SPH_DESCRIPTOR=MER_FR__2P SPECIFIC HEADER
>   SPH_STRIPLINE_CONTINUITY_INDICATOR=+000
>   SPH_SLICE_POSITION=+001
>   SPH_NUM_SLICES=+001
>   SPH_FIRST_LINE_TIME=14-JUL-2003 10:29:18.385327
>   SPH_LAST_LINE_TIME=14-JUL-2003 10:30:56.938607
>   SPH_FIRST_FIRST_LAT=+0056496720
>   SPH_FIRST_FIRST_LONG=+0010599537
>   SPH_FIRST_MID_LAT=+0057382170
>   SPH_FIRST_MID_LONG=+0006097018
>   SPH_FIRST_LAST_LAT=+0058099238
>   SPH_FIRST_LAST_LONG=+0001394104
>   SPH_LAST_FIRST_LAT=+0050903410
>   SPH_LAST_FIRST_LONG=+0007084803
>   SPH_LAST_MID_LAT=+0051698757
>   SPH_LAST_MID_LONG=+0003106173
>   SPH_LAST_LAST_LAT=+0052354870
>   SPH_LAST_LAST_LONG=-0001001598
>   SPH_TRANS_ERR_FLAG=0
>   SPH_FORMAT_ERR_FLAG=0
>   SPH_DATABASE_FLAG=0
>   SPH_COARSE_ERR_FLAG=1
>   SPH_ECMWF_TYPE=1
>   SPH_NUM_TRANS_ERR=+0000000000
>   SPH_NUM_FORMAT_ERR=+0000000000
>   SPH_TRANS_ERR_THRESH=+0.00000000E+00
>   SPH_FORMAT_ERR_THRESH=+0.00000000E+00
>   SPH_NUM_BANDS=+015
>   
> SPH_BAND_WAVELEN=+0000412545+0000442401+0000489744+0000509700+0000559634+00006
> 19620+0000664640+0000680902+0000708426+0000753472+0000761606+0000778498+00008648
> 33+0000884849+0000899860
>   
> SPH_BANDWIDTH=+09930+09946+09965+09971+09983+09991+09994+07493+09996+07493+037
> 42+15000+19999+09990+09989
>   SPH_INST_FOV=+0000019159
>   SPH_PROC_MODE=1
>   SPH_OFFSET_COMP=1
>   SPH_LINE_TIME_INTERVAL=+0000043997
>   SPH_LINE_LENGTH=+02241
>   SPH_LINES_PER_TIE_PT=+064
>   SPH_SAMPLES_PER_TIE_PT=+064
>   SPH_COLUMN_SPACING=+2.60000000E+02
>   
> DS_LEVEL_1B_PRODUCT_NAME=MER_FR__1PNEPA20030714_102918_000000982018_00094_0716
> 2_0120.N1
>   
> DS_AEROSOL_CLIMATOLOGY_FILE_NAME=MER_AER_AXVIEC20030620_120000_20020321_193100
> _20200101_000000
>   
> DS_PROCESSING_PARAMS_L2_FILE_NAME=MER_CP2_AXVIEC20030620_120000_20021224_12144
> 5_20121224_121445
>   
> DS_ATMOSPHERIC_PARAMETERS_FILE_NAME=MER_ATP_AXVIEC20030620_120000_20021224_121
> 445_20121224_121445
>   
> DS_WATER_VAPOUR_PARAMETERS_FILE_NAME=MER_WVP_AXVIEC20030620_120000_20020321_19
> 3100_20120321_193100
>   
> DS_OCEAN_AEROSOLS_PARAMS_FILE_NAME=MER_OAP_AXVIEC20030620_120001_20020321_1931
> 00_20120321_193100
>   
> DS_LAND_AEROSOLS_PARAMS_FILE_NAME=MER_LAP_AXVIEC20030715_151450_20020321_19310
> 0_20120321_193100
>   
> DS_OCEAN_I_PARAMETERS_FILE_NAME=MER_OC1_AXVIEC20030620_120000_20020321_193100_
> 20120321_193100
>   
> DS_OCEAN_II_PARAMETERS_FILE_NAME=MER_OC2_AXVIEC20030620_120000_20020321_193100
> _20120624_174339
>   
> DS_CLOUD_MEASUREMENT_FILE_NAME=MER_CMP_AXVIEC20030620_120000_20021224_121445_2
> 0120321_193100
>   
> DS_LAND_VEGETATION_INDEX_FILE_NAME=MER_LVI_AXVIEC20030620_120000_20020321_1931
> 00_20130224_164916
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 2241.0)
> Upper Right ( 2241.0,    0.0)
> Lower Right ( 2241.0, 2241.0)
> Center      ( 1120.5, 1120.5)
> Band 1 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(1)
> Band 2 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(2)
> Band 3 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(3)
> Band 4 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(4)
> Band 5 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(5)
> Band 6 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(6)
> Band 7 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(7)
> Band 8 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(8)
> Band 9 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(9)
> Band 10 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(10)
> Band 11 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(11)
> Band 12 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(12)
> Band 13 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(13)
> Band 14 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = YS, SPM, Rect. Rho- MDS(16)
> Band 15 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Epsilon, OPT   - MDS(19)
>
> I am using centos linux
>
>
> On Mon, Jan 10, 2011 at 12:54 PM, Adam Bausch <abausch@nova.whrc.org 
> <mailto:abausch@nova.whrc.org>> wrote:
>
>     Hi,
>     I get the following error.
>     GDALOpen failed - 4
>     `H29V13.hdf' not recognised as a supported file format.
>     Thanks for the link.
>     Adam
>
>
>     On 1/10/11 3:31 PM, Nikolaos Hatzopoulos wrote:
>>     what gdalinfo gives you?
>>     this is a very helpful link http://www.gdal.org/frmt_hdf4.html
>>
>>
>>
>>     On Mon, Jan 10, 2011 at 10:19 AM, Adam Bausch
>>     <abausch@nova.whrc.org <mailto:abausch@nova.whrc.org>> wrote:
>>
>>         Hi All,
>>         I am attempting to process a large volume of MERIS mosaic
>>         data obtained from ENVISAT in HDF-EOS2 format, however, I
>>         continue to get a "not a supported format" error when I try
>>         to run it.  I have installed the HDF-4 (libdf), HDF-5
>>         (libhdf5) and NetCDF libraries and checked with our
>>         Linux/Unix administrator to try and identify the problem with
>>         no resolution.  I was wondering if anyone else has had this
>>         problem or if there is a fix.
>>         Best,
>>         Adam
>>
>>         _______________________________________________
>>         gdal-dev mailing list
>>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110111/742b3e18/attachment-0001.html
From szekerest at gmail.com  Tue Jan 11 09:27:00 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan 11 09:27:03 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
Message-ID: <AANLkTim3q9nygC+VLXN5mpsdbQFVE9fr3w5XUEsm72LG@mail.gmail.com>

2011/1/11 Kirk McKelvey <kmckelvey@lizardtech.com>

>
> Tamas, from what I understand you have tweaked the layout of the MrSID SDK
> used in your daily windows builds.  Depending on the details this might work
> for you anyway; if it doesn?t, let me know.
>
>
Kirk,

The changed were breaking, I'm about to fix that in some way. I would have
the following questions:

1. Do we officially drop support for the older dsdk-s for example:
Geo_DSDK-7.0.0.2167.win32-vc7 which use a different directory layout as
expected by the new nmake.opt. For example the recent SDK is no available
for MSVC2003 and therefore we should probably use this older version.

2. Am I right that all the magic in the new nmake.opt is related how to set
MSRID_LIB, MRSID_INCLUDE and MRSID_FLAGS dynamically which I could also set
manually by not specifying MRSID_DIR in the builds?

3. Do we have a reason to include geotiff in the mrsid makefile?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110111/51737ac0/attachment.html
From nhatzop at gmail.com  Tue Jan 11 11:04:11 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Jan 11 11:04:13 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
In-Reply-To: <4D2C6285.5010500@gmail.com>
References: <4D2B4DAC.6090200@nova.whrc.org>
	<AANLkTinVGivwMxsicMU0GGMSdCrC+3dcahDbiaf8B0x-@mail.gmail.com>
	<4D2B7200.4050301@nova.whrc.org>
	<AANLkTi=W7OdLLhrHeNazmQsbQCO7Zqdkzt7BU76C+5wf@mail.gmail.com>
	<4D2C6285.5010500@gmail.com>
Message-ID: <AANLkTikkpmSbpjbgbkxZKmJUMy_0eoZkykpcgwCW9zFt@mail.gmail.com>

is there any sample of these data online?

On Tue, Jan 11, 2011 at 6:00 AM, abausch <adam.bausch@gmail.com> wrote:

>  Hi Nikolaos,
> I wish I were using the level 2 product in .N1 format but the level 3 MERIS
> mosaics are processed to .hdf - EOS2.  I can work with N1 data just fine if
> that were the case, but batch processing with BEAM doesn't support what I am
> trying to do with HDF's (unless I could program in Java..yikes)
> Best,
> Adam
>
>
> On 1/10/11 10:54 PM, Nikolaos Hatzopoulos wrote:
>
> from here:
> http://www.brockmann-consult.de/cms/web/beam/meris-products
>
> I download this file which is level2 data:
>
> http://www.brockmann-consult.de/beam/data/products/MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.zip
>
> gdalinfo gives me:
>
>
> Driver: ESAT/Envisat Image Format
> Files: MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
> Size is 2241, 2241
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> GCP[  0]: Id=1, Info=
>           (0.5,0.5) -> (10.599538,56.49672,0)
> ....
> Metadata:
>
> MPH_PRODUCT=MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
>   MPH_PROC_STAGE=N
>   MPH_REF_DOC=PO-RS-MDA-GS2009_11_3J
>   MPH_ACQUISITION_STATION=PDHS-K
>   MPH_PROC_CENTER=E-PAC
>   MPH_PROC_TIME=04-AUG-2003 15:12:31.508420
>   MPH_SOFTWARE_VER=MERIS/4.06
>   MPH_SENSING_START=14-JUL-2003 10:26:32.276537
>   MPH_SENSING_STOP=14-JUL-2003 10:32:37.452300
>   MPH_PHASE=2
>   MPH_CYCLE=+018
>   MPH_REL_ORBIT=+00094
>   MPH_ABS_ORBIT=+07162
>   MPH_STATE_VECTOR_TIME=14-JUL-2003 10:27:00.000000
>   MPH_DELTA_UT1=-.359896
>   MPH_X_POSITION=+2948879.180
>   MPH_Y_POSITION=+0636697.527
>   MPH_Z_POSITION=+6488093.331
>   MPH_X_VELOCITY=+6793.676563
>   MPH_Y_VELOCITY=-1452.749368
>   MPH_Z_VELOCITY=-2938.824735
>   MPH_VECTOR_SOURCE=FR
>   MPH_UTC_SBT_TIME=14-JUL-2003 10:18:36.710154
>   MPH_SAT_BINARY_TIME=+2483253760
>   MPH_CLOCK_STEP=+3906249805
>   MPH_LEAP_UTC=17-OCT-2001 00:00:00.000000
>   MPH_LEAP_SIGN=+001
>   MPH_LEAP_ERR=0
>   MPH_PRODUCT_ERR=1
>   SPH_SPH_DESCRIPTOR=MER_FR__2P SPECIFIC HEADER
>   SPH_STRIPLINE_CONTINUITY_INDICATOR=+000
>   SPH_SLICE_POSITION=+001
>   SPH_NUM_SLICES=+001
>   SPH_FIRST_LINE_TIME=14-JUL-2003 10:29:18.385327
>   SPH_LAST_LINE_TIME=14-JUL-2003 10:30:56.938607
>   SPH_FIRST_FIRST_LAT=+0056496720
>   SPH_FIRST_FIRST_LONG=+0010599537
>   SPH_FIRST_MID_LAT=+0057382170
>   SPH_FIRST_MID_LONG=+0006097018
>   SPH_FIRST_LAST_LAT=+0058099238
>   SPH_FIRST_LAST_LONG=+0001394104
>   SPH_LAST_FIRST_LAT=+0050903410
>   SPH_LAST_FIRST_LONG=+0007084803
>   SPH_LAST_MID_LAT=+0051698757
>   SPH_LAST_MID_LONG=+0003106173
>   SPH_LAST_LAST_LAT=+0052354870
>   SPH_LAST_LAST_LONG=-0001001598
>   SPH_TRANS_ERR_FLAG=0
>   SPH_FORMAT_ERR_FLAG=0
>   SPH_DATABASE_FLAG=0
>   SPH_COARSE_ERR_FLAG=1
>   SPH_ECMWF_TYPE=1
>   SPH_NUM_TRANS_ERR=+0000000000
>   SPH_NUM_FORMAT_ERR=+0000000000
>   SPH_TRANS_ERR_THRESH=+0.00000000E+00
>   SPH_FORMAT_ERR_THRESH=+0.00000000E+00
>   SPH_NUM_BANDS=+015
>
> SPH_BAND_WAVELEN=+0000412545+0000442401+0000489744+0000509700+0000559634+00006
>
> 19620+0000664640+0000680902+0000708426+0000753472+0000761606+0000778498+00008648
> 33+0000884849+0000899860
>
> SPH_BANDWIDTH=+09930+09946+09965+09971+09983+09991+09994+07493+09996+07493+037
> 42+15000+19999+09990+09989
>   SPH_INST_FOV=+0000019159
>   SPH_PROC_MODE=1
>   SPH_OFFSET_COMP=1
>   SPH_LINE_TIME_INTERVAL=+0000043997
>   SPH_LINE_LENGTH=+02241
>   SPH_LINES_PER_TIE_PT=+064
>   SPH_SAMPLES_PER_TIE_PT=+064
>   SPH_COLUMN_SPACING=+2.60000000E+02
>
> DS_LEVEL_1B_PRODUCT_NAME=MER_FR__1PNEPA20030714_102918_000000982018_00094_0716
> 2_0120.N1
>
> DS_AEROSOL_CLIMATOLOGY_FILE_NAME=MER_AER_AXVIEC20030620_120000_20020321_193100
> _20200101_000000
>
> DS_PROCESSING_PARAMS_L2_FILE_NAME=MER_CP2_AXVIEC20030620_120000_20021224_12144
> 5_20121224_121445
>
> DS_ATMOSPHERIC_PARAMETERS_FILE_NAME=MER_ATP_AXVIEC20030620_120000_20021224_121
> 445_20121224_121445
>
> DS_WATER_VAPOUR_PARAMETERS_FILE_NAME=MER_WVP_AXVIEC20030620_120000_20020321_19
> 3100_20120321_193100
>
> DS_OCEAN_AEROSOLS_PARAMS_FILE_NAME=MER_OAP_AXVIEC20030620_120001_20020321_1931
> 00_20120321_193100
>
> DS_LAND_AEROSOLS_PARAMS_FILE_NAME=MER_LAP_AXVIEC20030715_151450_20020321_19310
> 0_20120321_193100
>
> DS_OCEAN_I_PARAMETERS_FILE_NAME=MER_OC1_AXVIEC20030620_120000_20020321_193100_
> 20120321_193100
>
> DS_OCEAN_II_PARAMETERS_FILE_NAME=MER_OC2_AXVIEC20030620_120000_20020321_193100
> _20120624_174339
>
> DS_CLOUD_MEASUREMENT_FILE_NAME=MER_CMP_AXVIEC20030620_120000_20021224_121445_2
> 0120321_193100
>
> DS_LAND_VEGETATION_INDEX_FILE_NAME=MER_LVI_AXVIEC20030620_120000_20020321_1931
> 00_20130224_164916
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 2241.0)
> Upper Right ( 2241.0,    0.0)
> Lower Right ( 2241.0, 2241.0)
> Center      ( 1120.5, 1120.5)
> Band 1 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(1)
> Band 2 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(2)
> Band 3 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(3)
> Band 4 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(4)
> Band 5 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(5)
> Band 6 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(6)
> Band 7 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(7)
> Band 8 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(8)
> Band 9 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(9)
> Band 10 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(10)
> Band 11 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(11)
> Band 12 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(12)
> Band 13 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Norm. rho_surf - MDS(13)
> Band 14 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = YS, SPM, Rect. Rho- MDS(16)
> Band 15 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>   Description = Epsilon, OPT   - MDS(19)
>
> I am using centos linux
>
>
> On Mon, Jan 10, 2011 at 12:54 PM, Adam Bausch <abausch@nova.whrc.org>wrote:
>
>>  Hi,
>> I get the following error.
>> GDALOpen failed - 4
>> `H29V13.hdf' not recognised as a supported file format.
>> Thanks for the link.
>>  Adam
>>
>>
>> On 1/10/11 3:31 PM, Nikolaos Hatzopoulos wrote:
>>
>> what gdalinfo gives you?
>> this is a very helpful link http://www.gdal.org/frmt_hdf4.html
>>
>>
>>
>> On Mon, Jan 10, 2011 at 10:19 AM, Adam Bausch <abausch@nova.whrc.org>wrote:
>>
>>> Hi All,
>>> I am attempting to process a large volume of MERIS mosaic data obtained
>>> from ENVISAT in HDF-EOS2 format, however, I continue to get a "not a
>>> supported format" error when I try to run it.  I have installed the HDF-4
>>> (libdf), HDF-5 (libhdf5) and NetCDF libraries and checked with our
>>> Linux/Unix administrator to try and identify the problem with no resolution.
>>>  I was wondering if anyone else has had this problem or if there is a fix.
>>> Best,
>>> Adam
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110111/dae21a63/attachment.html
From warmerdam at pobox.com  Tue Jan 11 12:35:20 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 11 12:35:23 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
In-Reply-To: <4D2B4DAC.6090200@nova.whrc.org>
References: <4D2B4DAC.6090200@nova.whrc.org>
Message-ID: <4D2C94D8.5010700@pobox.com>

On 11-01-10 01:19 PM, Adam Bausch wrote:
> Hi All,
> I am attempting to process a large volume of MERIS mosaic data obtained from
> ENVISAT in HDF-EOS2 format, however, I continue to get a "not a supported
> format" error when I try to run it. I have installed the HDF-4 (libdf), HDF-5
> (libhdf5) and NetCDF libraries and checked with our Linux/Unix administrator to
> try and identify the problem with no resolution. I was wondering if anyone else
> has had this problem or if there is a fix.

Adam,

Please ensure that GDAL has the hdf4 driver configured.  You can do:

   gdalinfo --format hdf4

I was able to install the hdf4 development libraries and include files on
my system, rebuild GDAL --with-hdf4 and then I could open the file and
extract a data subproduct.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Tue Jan 11 18:24:27 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan 11 18:24:30 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <AANLkTim3q9nygC+VLXN5mpsdbQFVE9fr3w5XUEsm72LG@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
	<AANLkTim3q9nygC+VLXN5mpsdbQFVE9fr3w5XUEsm72LG@mail.gmail.com>
Message-ID: <AANLkTinKNo_AVyvTLdF6y2HWqrqxmujOboAsda1pC-Qd@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: nmake.opt.patch
Type: application/octet-stream
Size: 3001 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/3c014b7b/nmake.opt.obj
From nhatzop at gmail.com  Tue Jan 11 23:07:21 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Jan 11 23:07:23 2011
Subject: [gdal-dev] Hierarchical Data Format-EOS 2 conversion in Gdal
In-Reply-To: <AANLkTikkpmSbpjbgbkxZKmJUMy_0eoZkykpcgwCW9zFt@mail.gmail.com>
References: <4D2B4DAC.6090200@nova.whrc.org>
	<AANLkTinVGivwMxsicMU0GGMSdCrC+3dcahDbiaf8B0x-@mail.gmail.com>
	<4D2B7200.4050301@nova.whrc.org>
	<AANLkTi=W7OdLLhrHeNazmQsbQCO7Zqdkzt7BU76C+5wf@mail.gmail.com>
	<4D2C6285.5010500@gmail.com>
	<AANLkTikkpmSbpjbgbkxZKmJUMy_0eoZkykpcgwCW9zFt@mail.gmail.com>
Message-ID: <AANLkTim7B+i-GvZvW52QmsWrVFsd8jW5O5RPvus6BjvG@mail.gmail.com>

for me it's working

gdalinfo GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf


Driver: HDF4/Hierarchical Data Format Release 4
Files: GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.12
Subdatasets:

SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_1
  SUBDATASET_1_DESC=[1800x1800] MEAN_1 POSTEL (16-bit integer)

SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_2
  SUBDATASET_2_DESC=[1800x1800] MEAN_2 POSTEL (16-bit integer)

SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_3
  SUBDATASET_3_DESC=[1800x1800] MEAN_3 POSTEL (16-bit integer)

SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_4
  SUBDATASET_4_DESC=[1800x1800] MEAN_4 POSTEL (16-bit integer)

SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_5
  SUBDATASET_5_DESC=[1800x1800] MEAN_5 POSTEL (16-bit integer)

SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_6
  SUBDATASET_6_DESC=[1800x1800] MEAN_6 POSTEL (16-bit integer)

SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_7
  SUBDATASET_7_DESC=[1800x1800] MEAN_7 POSTEL (16-bit integer)

SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_8
  SUBDATASET_8_DESC=[1800x1800] MEAN_8 POSTEL (16-bit integer)

SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_9
  SUBDATASET_9_DESC=[1800x1800] MEAN_9 POSTEL (16-bit integer)

SUBDATASET_10_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_10
  SUBDATASET_10_DESC=[1800x1800] MEAN_10 POSTEL (16-bit integer)

SUBDATASET_11_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_12
  SUBDATASET_11_DESC=[1800x1800] MEAN_12 POSTEL (16-bit integer)

SUBDATASET_12_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_13
  SUBDATASET_12_DESC=[1800x1800] MEAN_13 POSTEL (16-bit integer)

SUBDATASET_13_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:MEAN_14
  SUBDATASET_13_DESC=[1800x1800] MEAN_14 POSTEL (16-bit integer)

SUBDATASET_14_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:NMOD
  SUBDATASET_14_DESC=[1800x1800] NMOD POSTEL (8-bit unsigned integer)

SUBDATASET_15_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:SM
  SUBDATASET_15_DESC=[1800x1800] SM POSTEL (16-bit unsigned integer)

SUBDATASET_16_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_1
  SUBDATASET_16_DESC=[1800x1800] ERR_1 POSTEL (8-bit unsigned integer)

SUBDATASET_17_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_2
  SUBDATASET_17_DESC=[1800x1800] ERR_2 POSTEL (8-bit unsigned integer)

SUBDATASET_18_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_3
  SUBDATASET_18_DESC=[1800x1800] ERR_3 POSTEL (8-bit unsigned integer)

SUBDATASET_19_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_4
  SUBDATASET_19_DESC=[1800x1800] ERR_4 POSTEL (8-bit unsigned integer)

SUBDATASET_20_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_5
  SUBDATASET_20_DESC=[1800x1800] ERR_5 POSTEL (8-bit unsigned integer)

SUBDATASET_21_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_6
  SUBDATASET_21_DESC=[1800x1800] ERR_6 POSTEL (8-bit unsigned integer)

SUBDATASET_22_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_7
  SUBDATASET_22_DESC=[1800x1800] ERR_7 POSTEL (8-bit unsigned integer)

SUBDATASET_23_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_8
  SUBDATASET_23_DESC=[1800x1800] ERR_8 POSTEL (8-bit unsigned integer)

SUBDATASET_24_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_9
  SUBDATASET_24_DESC=[1800x1800] ERR_9 POSTEL (8-bit unsigned integer)

SUBDATASET_25_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_10
  SUBDATASET_25_DESC=[1800x1800] ERR_10 POSTEL (8-bit unsigned integer)

SUBDATASET_26_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_12
  SUBDATASET_26_DESC=[1800x1800] ERR_12 POSTEL (8-bit unsigned integer)

SUBDATASET_27_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_13
  SUBDATASET_27_DESC=[1800x1800] ERR_13 POSTEL (8-bit unsigned integer)

SUBDATASET_28_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:ERR_14
  SUBDATASET_28_DESC=[1800x1800] ERR_14 POSTEL (8-bit unsigned integer)

SUBDATASET_29_NAME=HDF4_EOS:EOS_GRID:"GLOBCOVER-L3_MOSAIC_2005_V2.0_ANNUAL_H35V15.hdf":POSTEL:NDVI
  SUBDATASET_29_DESC=[1800x1800] NDVI POSTEL (8-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

something is going wrong with your hdf library or it's not linked well
or the compilation is not correct of gdal

I will repeat again I am using elgis for centos linux I don't know what's
going on
on Ubuntu

On Tue, Jan 11, 2011 at 8:04 AM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> is there any sample of these data online?
>
>
> On Tue, Jan 11, 2011 at 6:00 AM, abausch <adam.bausch@gmail.com> wrote:
>
>>  Hi Nikolaos,
>> I wish I were using the level 2 product in .N1 format but the level 3
>> MERIS mosaics are processed to .hdf - EOS2.  I can work with N1 data just
>> fine if that were the case, but batch processing with BEAM doesn't support
>> what I am trying to do with HDF's (unless I could program in Java..yikes)
>> Best,
>> Adam
>>
>>
>> On 1/10/11 10:54 PM, Nikolaos Hatzopoulos wrote:
>>
>> from here:
>> http://www.brockmann-consult.de/cms/web/beam/meris-products
>>
>> I download this file which is level2 data:
>>
>> http://www.brockmann-consult.de/beam/data/products/MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.zip
>>
>> gdalinfo gives me:
>>
>>
>> Driver: ESAT/Envisat Image Format
>> Files: MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
>> Size is 2241, 2241
>> Coordinate System is `'
>> GCP Projection =
>> GEOGCS["WGS 84",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563,
>>             AUTHORITY["EPSG","7030"]],
>>         TOWGS84[0,0,0,0,0,0,0],
>>         AUTHORITY["EPSG","6326"]],
>>     PRIMEM["Greenwich",0,
>>         AUTHORITY["EPSG","8901"]],
>>     UNIT["degree",0.0174532925199433,
>>         AUTHORITY["EPSG","9108"]],
>>     AUTHORITY["EPSG","4326"]]
>> GCP[  0]: Id=1, Info=
>>           (0.5,0.5) -> (10.599538,56.49672,0)
>> ....
>> Metadata:
>>
>> MPH_PRODUCT=MER_FR__2PNEPA20030714_102918_000000982018_00094_07162_0053.N1
>>   MPH_PROC_STAGE=N
>>   MPH_REF_DOC=PO-RS-MDA-GS2009_11_3J
>>   MPH_ACQUISITION_STATION=PDHS-K
>>   MPH_PROC_CENTER=E-PAC
>>   MPH_PROC_TIME=04-AUG-2003 15:12:31.508420
>>   MPH_SOFTWARE_VER=MERIS/4.06
>>   MPH_SENSING_START=14-JUL-2003 10:26:32.276537
>>   MPH_SENSING_STOP=14-JUL-2003 10:32:37.452300
>>   MPH_PHASE=2
>>   MPH_CYCLE=+018
>>   MPH_REL_ORBIT=+00094
>>   MPH_ABS_ORBIT=+07162
>>   MPH_STATE_VECTOR_TIME=14-JUL-2003 10:27:00.000000
>>   MPH_DELTA_UT1=-.359896
>>   MPH_X_POSITION=+2948879.180
>>   MPH_Y_POSITION=+0636697.527
>>   MPH_Z_POSITION=+6488093.331
>>   MPH_X_VELOCITY=+6793.676563
>>   MPH_Y_VELOCITY=-1452.749368
>>   MPH_Z_VELOCITY=-2938.824735
>>   MPH_VECTOR_SOURCE=FR
>>   MPH_UTC_SBT_TIME=14-JUL-2003 10:18:36.710154
>>   MPH_SAT_BINARY_TIME=+2483253760
>>   MPH_CLOCK_STEP=+3906249805
>>   MPH_LEAP_UTC=17-OCT-2001 00:00:00.000000
>>   MPH_LEAP_SIGN=+001
>>   MPH_LEAP_ERR=0
>>   MPH_PRODUCT_ERR=1
>>   SPH_SPH_DESCRIPTOR=MER_FR__2P SPECIFIC HEADER
>>   SPH_STRIPLINE_CONTINUITY_INDICATOR=+000
>>   SPH_SLICE_POSITION=+001
>>   SPH_NUM_SLICES=+001
>>   SPH_FIRST_LINE_TIME=14-JUL-2003 10:29:18.385327
>>   SPH_LAST_LINE_TIME=14-JUL-2003 10:30:56.938607
>>   SPH_FIRST_FIRST_LAT=+0056496720
>>   SPH_FIRST_FIRST_LONG=+0010599537
>>   SPH_FIRST_MID_LAT=+0057382170
>>   SPH_FIRST_MID_LONG=+0006097018
>>   SPH_FIRST_LAST_LAT=+0058099238
>>   SPH_FIRST_LAST_LONG=+0001394104
>>   SPH_LAST_FIRST_LAT=+0050903410
>>   SPH_LAST_FIRST_LONG=+0007084803
>>   SPH_LAST_MID_LAT=+0051698757
>>   SPH_LAST_MID_LONG=+0003106173
>>   SPH_LAST_LAST_LAT=+0052354870
>>   SPH_LAST_LAST_LONG=-0001001598
>>   SPH_TRANS_ERR_FLAG=0
>>   SPH_FORMAT_ERR_FLAG=0
>>   SPH_DATABASE_FLAG=0
>>   SPH_COARSE_ERR_FLAG=1
>>   SPH_ECMWF_TYPE=1
>>   SPH_NUM_TRANS_ERR=+0000000000
>>   SPH_NUM_FORMAT_ERR=+0000000000
>>   SPH_TRANS_ERR_THRESH=+0.00000000E+00
>>   SPH_FORMAT_ERR_THRESH=+0.00000000E+00
>>   SPH_NUM_BANDS=+015
>>
>> SPH_BAND_WAVELEN=+0000412545+0000442401+0000489744+0000509700+0000559634+00006
>>
>> 19620+0000664640+0000680902+0000708426+0000753472+0000761606+0000778498+00008648
>> 33+0000884849+0000899860
>>
>> SPH_BANDWIDTH=+09930+09946+09965+09971+09983+09991+09994+07493+09996+07493+037
>> 42+15000+19999+09990+09989
>>   SPH_INST_FOV=+0000019159
>>   SPH_PROC_MODE=1
>>   SPH_OFFSET_COMP=1
>>   SPH_LINE_TIME_INTERVAL=+0000043997
>>   SPH_LINE_LENGTH=+02241
>>   SPH_LINES_PER_TIE_PT=+064
>>   SPH_SAMPLES_PER_TIE_PT=+064
>>   SPH_COLUMN_SPACING=+2.60000000E+02
>>
>> DS_LEVEL_1B_PRODUCT_NAME=MER_FR__1PNEPA20030714_102918_000000982018_00094_0716
>> 2_0120.N1
>>
>> DS_AEROSOL_CLIMATOLOGY_FILE_NAME=MER_AER_AXVIEC20030620_120000_20020321_193100
>> _20200101_000000
>>
>> DS_PROCESSING_PARAMS_L2_FILE_NAME=MER_CP2_AXVIEC20030620_120000_20021224_12144
>> 5_20121224_121445
>>
>> DS_ATMOSPHERIC_PARAMETERS_FILE_NAME=MER_ATP_AXVIEC20030620_120000_20021224_121
>> 445_20121224_121445
>>
>> DS_WATER_VAPOUR_PARAMETERS_FILE_NAME=MER_WVP_AXVIEC20030620_120000_20020321_19
>> 3100_20120321_193100
>>
>> DS_OCEAN_AEROSOLS_PARAMS_FILE_NAME=MER_OAP_AXVIEC20030620_120001_20020321_1931
>> 00_20120321_193100
>>
>> DS_LAND_AEROSOLS_PARAMS_FILE_NAME=MER_LAP_AXVIEC20030715_151450_20020321_19310
>> 0_20120321_193100
>>
>> DS_OCEAN_I_PARAMETERS_FILE_NAME=MER_OC1_AXVIEC20030620_120000_20020321_193100_
>> 20120321_193100
>>
>> DS_OCEAN_II_PARAMETERS_FILE_NAME=MER_OC2_AXVIEC20030620_120000_20020321_193100
>> _20120624_174339
>>
>> DS_CLOUD_MEASUREMENT_FILE_NAME=MER_CMP_AXVIEC20030620_120000_20021224_121445_2
>> 0120321_193100
>>
>> DS_LAND_VEGETATION_INDEX_FILE_NAME=MER_LVI_AXVIEC20030620_120000_20020321_1931
>> 00_20130224_164916
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0, 2241.0)
>> Upper Right ( 2241.0,    0.0)
>> Lower Right ( 2241.0, 2241.0)
>> Center      ( 1120.5, 1120.5)
>> Band 1 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(1)
>> Band 2 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(2)
>> Band 3 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(3)
>> Band 4 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(4)
>> Band 5 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(5)
>> Band 6 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(6)
>> Band 7 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(7)
>> Band 8 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(8)
>> Band 9 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(9)
>> Band 10 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(10)
>> Band 11 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(11)
>> Band 12 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(12)
>> Band 13 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Norm. rho_surf - MDS(13)
>> Band 14 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = YS, SPM, Rect. Rho- MDS(16)
>> Band 15 Block=2241x1 Type=UInt16, ColorInterp=Undefined
>>   Description = Epsilon, OPT   - MDS(19)
>>
>> I am using centos linux
>>
>>
>> On Mon, Jan 10, 2011 at 12:54 PM, Adam Bausch <abausch@nova.whrc.org>wrote:
>>
>>>  Hi,
>>> I get the following error.
>>> GDALOpen failed - 4
>>> `H29V13.hdf' not recognised as a supported file format.
>>> Thanks for the link.
>>>  Adam
>>>
>>>
>>> On 1/10/11 3:31 PM, Nikolaos Hatzopoulos wrote:
>>>
>>> what gdalinfo gives you?
>>> this is a very helpful link http://www.gdal.org/frmt_hdf4.html
>>>
>>>
>>>
>>> On Mon, Jan 10, 2011 at 10:19 AM, Adam Bausch <abausch@nova.whrc.org>wrote:
>>>
>>>> Hi All,
>>>> I am attempting to process a large volume of MERIS mosaic data obtained
>>>> from ENVISAT in HDF-EOS2 format, however, I continue to get a "not a
>>>> supported format" error when I try to run it.  I have installed the HDF-4
>>>> (libdf), HDF-5 (libhdf5) and NetCDF libraries and checked with our
>>>> Linux/Unix administrator to try and identify the problem with no resolution.
>>>>  I was wondering if anyone else has had this problem or if there is a fix.
>>>> Best,
>>>> Adam
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110111/c1be5226/attachment-0001.html
From j.l.h.hartmann at uva.nl  Wed Jan 12 08:53:11 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Jan 12 08:53:35 2011
Subject: [gdal-dev] gdalwarp with gauss resampling
In-Reply-To: <20110107222046.GK5208@basalt.uvic.ca>
References: <20110107211820.GF5208@basalt.uvic.ca> <4D278AC9.8080402@pobox.com>
	<20110107222046.GK5208@basalt.uvic.ca>
Message-ID: <4D2DB247.8070008@uva.nl>

Is it possible to use gauss resampling with gdalwarp? The current 
resampling options (cubic, bilinear etc) work very well as long as the 
pixels in input and output rasters are about the same size, but not very 
well when downsampling to a much coarser scale. Gdaladdo has gauss 
resampling, but only for overviews of an existing file. I want to 
combine many mapsheets into one large map at a much lower resolution 
using gauss resampling. Would it make sense/be possible to add gauss 
resampling to gdalwarp itself/ Alternatively, is it possible to extract 
the overviews from a gdaladdo-ed file als regular rasters?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/a0f0d946/attachment.html
From sebastian.ovide at gmail.com  Wed Jan 12 10:57:40 2011
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Jan 12 10:58:02 2011
Subject: [gdal-dev] python: read pixel from raster
Message-ID: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>

Hi All,

what would be the simpler way to read a pixel value from a raster using
python ?

something like  pixelvalue=read(x,y) where x,y and in the raster coordinate
system

thanks

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/209a8bfb/attachment.html
From jorge.arevalo at deimos-space.com  Wed Jan 12 11:07:30 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Wed Jan 12 11:07:53 2011
Subject: [gdal-dev] python: read pixel from raster
In-Reply-To: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
References: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
Message-ID: <AANLkTikSNp2iXm6f-oV3-DxPK6dPcdTcGMNY+L+T00RO@mail.gmail.com>

On Wed, Jan 12, 2011 at 4:57 PM, Sebastian E. Ovide
<sebastian.ovide@gmail.com> wrote:
> Hi All,
> what would be the simpler way to read a pixel value from a raster using
> python ?
> something like ?pixelvalue=read(x,y) where x,y and in the raster coordinate
> system
> thanks
>
> --
> Sebastian E. Ovide
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi Sebastian,

This may help you:
https://svn.osgeo.org/postgis/trunk/raster/scripts/python/pixval.py

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From chaitanya.ch at gmail.com  Wed Jan 12 11:20:20 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jan 12 11:20:30 2011
Subject: [gdal-dev] python: read pixel from raster
In-Reply-To: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
References: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
Message-ID: <AANLkTikmWNhiAnJj6NgQ18OjrMGoCkX1SZeXTDJB2iPD@mail.gmail.com>

Sebastian,

Refer the GDAL raster API tutorial at http://www.gdal.org/gdal_tutorial.html
It describes how to read a line of pixels using the ReadRaster() function in
Python. You can change the arguments to read just one pixel. Look at the
documentation for GDALRasterBand::RasterIO() which is essentially the same
in C++.

On Wed, Jan 12, 2011 at 9:27 PM, Sebastian E. Ovide <
sebastian.ovide@gmail.com> wrote:

> Hi All,
>
> what would be the simpler way to read a pixel value from a raster using
> python ?
>
> something like  pixelvalue=read(x,y) where x,y and in the raster coordinate
> system
>
> thanks
>
> --
> Sebastian E. Ovide
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/bc3bb87d/attachment.html
From anders.moe at geocap.no  Wed Jan 12 11:21:35 2011
From: anders.moe at geocap.no (Anders Moe)
Date: Wed Jan 12 11:21:58 2011
Subject: [gdal-dev] OGR : Shapefile driver limits column name to 10 chars
Message-ID: <AANLkTinmNsGomGO6KuYBtaur2fmSo=FnfHc08XyxWi4V@mail.gmail.com>

Hi all

The OGR shapefile driver has a documentet caveat in that column names can
not exceed 10 characters:

http://www.gdal.org/ogr/drv_shapefile.html

<http://www.gdal.org/ogr/drv_shapefile.html>Does anyone know if this is an
inherent limitation of the shapefile format or within the OGR driver ? Any
possibility that this will be lifted ? I'm using GDAL 1.7,

Regards,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/f7635ccd/attachment.html
From even.rouault at mines-paris.org  Wed Jan 12 11:28:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan 12 11:29:05 2011
Subject: [gdal-dev] OGR : Shapefile driver limits column name to 10 chars
In-Reply-To: <AANLkTinmNsGomGO6KuYBtaur2fmSo=FnfHc08XyxWi4V@mail.gmail.com>
References: <AANLkTinmNsGomGO6KuYBtaur2fmSo=FnfHc08XyxWi4V@mail.gmail.com>
Message-ID: <1294849736.4d2dd6c88437c@webmail.free.fr>

Selon Anders Moe <anders.moe@geocap.no>:

Try looking for "dbf field names limited to 10 characters" in your favorite
search engine and you should get the answer ;-)

The OGR shapefile driver mentions just before "Shapefile feature attributes are
stored in an associated .dbf file, and so attributes suffer a number of
limitations". That also gives you an hint on where the limitation comes from...

> Hi all
>
> The OGR shapefile driver has a documentet caveat in that column names can
> not exceed 10 characters:
>
> http://www.gdal.org/ogr/drv_shapefile.html
>
> <http://www.gdal.org/ogr/drv_shapefile.html>Does anyone know if this is an
> inherent limitation of the shapefile format or within the OGR driver ? Any
> possibility that this will be lifted ? I'm using GDAL 1.7,
>
> Regards,
> Anders
>


From aperezcarro at yahoo.es  Wed Jan 12 12:30:00 2011
From: aperezcarro at yahoo.es (Antonio P)
Date: Wed Jan 12 12:33:17 2011
Subject: [gdal-dev] Test and a question about gdal_warp and gdal_translate
Message-ID: <004101cbb27e$57434180$0a00a8c0@PIV>

Hello : 
(I dont know if this email are going to be accepted by the list manager. So, this is a 'test' )
I have a question about gdal_warp and gdal_translate utilities. 
I want to re-scale to 50% a serie of images.
I cannot use gdal_translate with % outsize parameters 
      gdal_translate -of JPEG  -outsize 25% 25% DSC02699.jpg 02699.jpg     >> does nothing (i view the options of gdal_translate)
What kind of resampling method use gdal_translate?

I 'd like to use gdal_warp simply to rescale an image to 50% 50% ? Can anyone tell me the command line syntax ?

I miss more information, more examples or more tutorials on how to use the command line utilities. Any good link ?
Thanks, Antonio 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/9c864ffe/attachment.html
From jorge.arevalo at deimos-space.com  Wed Jan 12 12:49:53 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Wed Jan 12 12:50:16 2011
Subject: [gdal-dev] Test and a question about gdal_warp and gdal_translate
In-Reply-To: <004101cbb27e$57434180$0a00a8c0@PIV>
References: <004101cbb27e$57434180$0a00a8c0@PIV>
Message-ID: <AANLkTinzcDUE+xrPmoPitJuvtOEqBt-gUpyqmhKB0ant@mail.gmail.com>

On Wed, Jan 12, 2011 at 6:30 PM, Antonio P <aperezcarro@yahoo.es> wrote:
> Hello :
> (I dont know if this email are going to be accepted by the list manager. So,
> this is?a 'test'?)
> I have a question about gdal_warp and gdal_translate utilities.
> I want to re-scale to 50% a serie of images.
> I cannot use gdal_translate with % outsize parameters
> ????? gdal_translate -of JPEG? -outsize 25% 25% DSC02699.jpg 02699.jpg
>>> does nothing (i view the options of gdal_translate)
> What kind of resampling method use?gdal_translate?
>
> I?'d like?to use gdal_warp?simply?to rescale an image to 50% 50% ? Can
> anyone tell me the command line syntax ?
>
> I miss more information, more examples or more tutorials on how to use the
> command line utilities. Any good link ?
> Thanks, Antonio
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi Antonio,

What does exactly mean "does nothing"? Don't show an error message?

Are you putting the source and destination files in the right place?
First source and then destination.

gdal_translate -of JPEG -outsize 50% 50% source_file.jpg dst_file.jpg

You can read the doc page for gdal_translate here:
http://www.gdal.org/gdal_translate.html, and more stuff at
http://www.gdal.org/

Best regards,
-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From sebastian.ovide at gmail.com  Wed Jan 12 12:57:04 2011
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Jan 12 12:57:31 2011
Subject: [gdal-dev] python: read pixel from raster
In-Reply-To: <AANLkTikSNp2iXm6f-oV3-DxPK6dPcdTcGMNY+L+T00RO@mail.gmail.com>
References: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
	<AANLkTikSNp2iXm6f-oV3-DxPK6dPcdTcGMNY+L+T00RO@mail.gmail.com>
Message-ID: <AANLkTinwFrx6CUXdAr3FnUyUsFwpscj-KoR_oZ4VMp-g@mail.gmail.com>

thanks for that...

What I'm looking for is something like ReadRaster but using the coordinates
system used by the raster... (it could be lat,long etc...)

otherwise I would need to do something like

cs=read_raster_coordinate_system()
(x,y)= cs.convert_from_cs_to_pixel_xy(x,y)
pixel=ReadRaster

is there any single line command to do that ?

2011/1/12 Jorge Ar?valo <jorge.arevalo@deimos-space.com>

> On Wed, Jan 12, 2011 at 4:57 PM, Sebastian E. Ovide
> <sebastian.ovide@gmail.com> wrote:
> > Hi All,
> > what would be the simpler way to read a pixel value from a raster using
> > python ?
> > something like  pixelvalue=read(x,y) where x,y and in the raster
> coordinate
> > system
> > thanks
> >
> > --
> > Sebastian E. Ovide
> >
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> Hi Sebastian,
>
> This may help you:
> https://svn.osgeo.org/postgis/trunk/raster/scripts/python/pixval.py
>
> Best regards,
>
> --
> Jorge Ar?valo
> Internet & Mobilty Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://mobility.grupodeimos.com/
> http://gis4free.wordpress.com
> http://geohash.org/ezjqgrgzz0g
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/d1115a0c/attachment.html
From pcorti at gmail.com  Wed Jan 12 13:04:58 2011
From: pcorti at gmail.com (Paolo Corti)
Date: Wed Jan 12 13:05:31 2011
Subject: [gdal-dev] python: read pixel from raster
In-Reply-To: <AANLkTinwFrx6CUXdAr3FnUyUsFwpscj-KoR_oZ4VMp-g@mail.gmail.com>
References: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
	<AANLkTikSNp2iXm6f-oV3-DxPK6dPcdTcGMNY+L+T00RO@mail.gmail.com>
	<AANLkTinwFrx6CUXdAr3FnUyUsFwpscj-KoR_oZ4VMp-g@mail.gmail.com>
Message-ID: <AANLkTikCa-tAnFb_Uw63kju6zwcJd5G4H10Zz4Fgjuhg@mail.gmail.com>

2011/1/12 Sebastian E. Ovide <sebastian.ovide@gmail.com>:
> thanks for that...
> What I'm looking for is something like?ReadRaster but using the coordinates
> system used by the raster...?(it could be lat,long etc...)
> otherwise I would need to do something like
> cs=read_raster_coordinate_system()
> (x,y)= cs.convert_from_cs_to_pixel_xy(x,y)
> pixel=ReadRaster
> is there any single line command to do that ?

Hi Sebastian
what about using gdallocationinfo [0] (it is a new command line utility)?
You may run it directly or get inspiration from its code (in cpp, but
easily understandable for converting it in python)

best regards
P

[0] http://www.gdal.org/gdallocationinfo.html

-- 
Paolo Corti
GIS specialist and web developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From sebastian.ovide at gmail.com  Wed Jan 12 13:47:32 2011
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Jan 12 13:47:54 2011
Subject: [gdal-dev] python: read pixel from raster
In-Reply-To: <AANLkTinwFrx6CUXdAr3FnUyUsFwpscj-KoR_oZ4VMp-g@mail.gmail.com>
References: <AANLkTi=Q6hdHvRR2UaAXxAwWF4S3rPFCPZhNa7=z_WNV@mail.gmail.com>
	<AANLkTikSNp2iXm6f-oV3-DxPK6dPcdTcGMNY+L+T00RO@mail.gmail.com>
	<AANLkTinwFrx6CUXdAr3FnUyUsFwpscj-KoR_oZ4VMp-g@mail.gmail.com>
Message-ID: <AANLkTinbyCnyUxxENz7CS+VWqTSrtxq1RMYQmqvbgFoQ@mail.gmail.com>

http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides4.pdf

2011/1/12 Sebastian E. Ovide <sebastian.ovide@gmail.com>

> thanks for that...
>
> What I'm looking for is something like ReadRaster but using the
> coordinates system used by the raster... (it could be lat,long etc...)
>
> otherwise I would need to do something like
>
> cs=read_raster_coordinate_system()
> (x,y)= cs.convert_from_cs_to_pixel_xy(x,y)
> pixel=ReadRaster
>
> is there any single line command to do that ?
>
> 2011/1/12 Jorge Ar?valo <jorge.arevalo@deimos-space.com>
>
> On Wed, Jan 12, 2011 at 4:57 PM, Sebastian E. Ovide
>> <sebastian.ovide@gmail.com> wrote:
>> > Hi All,
>> > what would be the simpler way to read a pixel value from a raster using
>> > python ?
>> > something like  pixelvalue=read(x,y) where x,y and in the raster
>> coordinate
>> > system
>> > thanks
>> >
>> > --
>> > Sebastian E. Ovide
>> >
>> >
>> >
>> >
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>> Hi Sebastian,
>>
>> This may help you:
>> https://svn.osgeo.org/postgis/trunk/raster/scripts/python/pixval.py
>>
>> Best regards,
>>
>> --
>> Jorge Ar?valo
>> Internet & Mobilty Division, DEIMOS
>> jorge.arevalo@deimos-space.com
>> http://mobility.grupodeimos.com/
>> http://gis4free.wordpress.com
>> http://geohash.org/ezjqgrgzz0g
>>
>
>
>
> --
> Sebastian E. Ovide
>
>
>
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/02fa5be7/attachment-0001.html
From warmerdam at pobox.com  Wed Jan 12 14:17:37 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 12 14:17:41 2011
Subject: [gdal-dev] gdalwarp with gauss resampling
In-Reply-To: <4D2DB247.8070008@uva.nl>
References: <20110107211820.GF5208@basalt.uvic.ca>
	<4D278AC9.8080402@pobox.com> <20110107222046.GK5208@basalt.uvic.ca>
	<4D2DB247.8070008@uva.nl>
Message-ID: <4D2DFE51.1020201@pobox.com>

On 11-01-12 08:53 AM, Jan Hartmann wrote:
> Is it possible to use gauss resampling with gdalwarp? The current resampling
> options (cubic, bilinear etc) work very well as long as the pixels in input and
> output rasters are about the same size, but not very well when downsampling to
> a much coarser scale. Gdaladdo has gauss resampling, but only for overviews of
> an existing file. I want to combine many mapsheets into one large map at a much
> lower resolution using gauss resampling. Would it make sense/be possible to add
> gauss resampling to gdalwarp itself/ Alternatively, is it possible to extract
> the overviews from a gdaladdo-ed file als regular rasters?

Jan,

No, gdalwarp does not support gaussian resampling.

Yes, it might be desirable to add it though by it's nature gdalwarp isn't
a great engine to severely downsample images as part of a warp.

Yes, you can dump overviews to a standalone file using the "dumpoverviews"
commandline application.  I don't think it is built by default so you might
need to go into gdal/apps and make it explicitly.

You could also do a gdal_translate at the resolution of an overview and
it should essentially just extract the overview though that might not be
a completely sure thing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From aperezcarro at yahoo.es  Wed Jan 12 16:30:35 2011
From: aperezcarro at yahoo.es (Antonio P)
Date: Wed Jan 12 16:30:41 2011
Subject: [gdal-dev] Test and a question about gdal_warp and gdal_translate
Message-ID: <002f01cbb29f$f37dc040$0a00a8c0@PIV>

Hello again : ( I dont know if my question was sent to the list ....)

I cannot use gdal_translate with % outsize parameters :

      gdal_translate -of JPEG  -outsize 25% 25% DSC02699.jpg 02699.jpg        
      >> does nothing (I view the use options of gdal_translate, it seems as I wrote a wrong parameter )
      gdal_translate -of JPEG  -outsize 25 25 DSC02699.jpg 02699.jpg     works ok (I get a 25 x25 pixels image)
     
      I use gdal 7.7.0b2 provided by FWTools 2.4.7

Any idea ? 


Also , I 'd like to use gdal_warp simply to rescale an image to 50% 50% ? Can anyone tell me the command line syntax ?
(i'd like to use  resampling options ...)

And .... I miss more information, more examples or more tutorials on how to use the command line utilities. Any good link ?
Thanks , Antonio

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110112/f84135fd/attachment.html
From james.j.manzione at usace.army.mil  Wed Jan 12 16:36:15 2011
From: james.j.manzione at usace.army.mil (manzione)
Date: Wed Jan 12 16:36:17 2011
Subject: [gdal-dev] Problems with passing parameters into gdalwrap in Python
Message-ID: <1294868175796-5916192.post@n2.nabble.com>


Greetings All, 
I am a student who has been having a difficult time passing in source
parameters into gdalwrap in Python, and would truly appreciate any insight
that great minds like you might have on my simple problem. 

First off, I am attempting to reproject a Tiff image that was generated from
a Grib2 rasterband by using the subprocess.call(cmd) method.  My cmd
statement is as follows: 

cmd = ["gdalwarp", "-t_srs", "EPSG:4326", in_Src, target_Src]

The "in_Src" parameter represents the input source file, and the
"target_Src" parameter is an empty temporary file. 

I've seen (and tried) a lot of examples where instead of calling an object
in the cmd line they call a string that references the name of the image
file. 

Example:  subprocess.call(["gdalwarp", "-t_srs", "EPSG:4326", "input.tif",
"output.tif"])

However each time I attempt this technique gdalwarp returns an error message
that states that it cannot locate the source file.  I've tried replacing the
names with path locations and yet I still get the same error returned. 

If someone would be kind enough to show me how to get over this issue I
would be incredibly grateful! 

Thank you in advance, 

-James
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problems-with-passing-parameters-into-gdalwrap-in-Python-tp5916192p5916192.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Jan 12 18:38:26 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 12 18:38:28 2011
Subject: [gdal-dev] Test and a question about gdal_warp and gdal_translate
In-Reply-To: <002f01cbb29f$f37dc040$0a00a8c0@PIV>
References: <002f01cbb29f$f37dc040$0a00a8c0@PIV>
Message-ID: <4D2E3B72.2070206@pobox.com>

On 11-01-12 04:30 PM, Antonio P wrote:
> Hello again : ( I dont know if my question was sent to the list ....)

Antonio,

I believe it already went through and there were some responses.
You can check the list archives after a bit to see if a message has
gone through.

> I cannot use gdal_translate with % outsize parameters :
> gdal_translate -of JPEG -outsize 25% 25% DSC02699.jpg 02699.jpg
>  >> does nothing (I view the use options of gdal_translate, it seems as I wrote
> a wrong parameter )
> gdal_translate -of JPEG -outsize 25 25 DSC02699.jpg 02699.jpg works ok (I get a
> 25 x25 pixels image)
> I use gdal 7.7.0b2 provided by FWTools 2.4.7

You still haven't answered the easier question about what "does nothing"
means in the regard.  But I'm guessing you will have problems using
percentage characters on the commandline on windows without some sort
of escaping or quoting.  % normally instructs Window's CMD.EXE to
substitute in an environment variable.

> Any idea ?
> Also , I 'd like to use gdal_warp simply to rescale an image to 50% 50% ? Can
> anyone tell me the command line syntax ?

I do not believe there is an equivelent to the percentage thing. But
you can request a particular output size in pixels and lines using
-ts.  Just use gdalinfo to find the size of the input image in pixels
and lines, and divide by two and use them with -ts.

eg.
gdalwarp -ts 1000 1000 in.tif out.tif


> (i'd like to use resampling options ...)
> And .... I miss more information, more examples or more tutorials on how to use
> the command line utilities. Any good link ?
> Thanks , Antonio

There is some useful information at:

   http://trac.osgeo.org/gdal/wiki/UserDocs

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kmckelvey at lizardtech.com  Wed Jan 12 19:26:19 2011
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Jan 12 19:26:24 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <4D2C565A.8090808@gatewaygeomatics.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
	<4D2C565A.8090808@gatewaygeomatics.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE85010672151A@sea-srv-mail.lizardtech.com>

Good call Jeff, I will revise the MrSID wiki.

> -----Message d'origine-----
> De?: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] De la part de Jeff McKenna
> Envoy??: Tuesday, January 11, 2011 5:09 AM
> ??: gdal-dev@lists.osgeo.org
> Objet?: Re: [gdal-dev] mrsid nmake.opt
> 
> Thanks Kirk, I'll give it a whirl.
> 
> Also, I wonder if we need to update anything on the MrSID wiki page:
> http://trac.osgeo.org/gdal/wiki/MrSID
> 
> -jeff
> 
> 
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
> 
> 
> 
> 
> On 11-01-10 9:05 PM, Kirk McKelvey wrote:
> > All,
> >
> > I have made a change to simplify build configuration for the mrsid
> > driver on the trunk (r21458). If you regularly build this driver,
> > especially if you have a vested interest in maintaining compatibility
> > with a particular historical MrSID SDK release, please give it a whirl
> > and let me know if you have any trouble with it.
> >
> > Previously it was a manual and iterative process to get the MRSID_* vars
> > correct for a given SDK release - especially if it was an older one. Now
> > you should just have to set MRSID_DIR and that's it, even using older
> > MrSID SDKs.
> >
> > The work is done in a new file, frmts/mrsid/nmake.opt, which is
> > !INCLUDEd from gdal/nmake.opt. If you have an interest in the windows
> > build harness and the patience to examine this file I would appreciate
> > hearing any feedback or concerns about the approach I took.
> >
> > Tamas, from what I understand you have tweaked the layout of the MrSID
> > SDK used in your daily windows builds. Depending on the details this
> > might work for you anyway; if it doesn't, let me know.
> >
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Wed Jan 12 22:20:34 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jan 12 22:20:37 2011
Subject: [gdal-dev] Problems with passing parameters into gdalwrap in
	Python
In-Reply-To: <1294868175796-5916192.post@n2.nabble.com>
References: <1294868175796-5916192.post@n2.nabble.com>
Message-ID: <AANLkTins3Tq-hgDeAJ0GXFZ61Ke7GrORn-kubekWOA8h@mail.gmail.com>

James,

Instead of passing the arguments as array elements, try to pass the
arguments in the same string, separated by a space.
http://trac.osgeo.org/gdal/browser/trunk/autotest/warp/warp.py#L481

On Thu, Jan 13, 2011 at 3:06 AM, manzione
<james.j.manzione@usace.army.mil>wrote:

>
> Greetings All,
> I am a student who has been having a difficult time passing in source
> parameters into gdalwrap in Python, and would truly appreciate any insight
> that great minds like you might have on my simple problem.
>
> First off, I am attempting to reproject a Tiff image that was generated
> from
> a Grib2 rasterband by using the subprocess.call(cmd) method.  My cmd
> statement is as follows:
>
> cmd = ["gdalwarp", "-t_srs", "EPSG:4326", in_Src, target_Src]
>
> The "in_Src" parameter represents the input source file, and the
> "target_Src" parameter is an empty temporary file.
>
> I've seen (and tried) a lot of examples where instead of calling an object
> in the cmd line they call a string that references the name of the image
> file.
>
> Example:  subprocess.call(["gdalwarp", "-t_srs", "EPSG:4326", "input.tif",
> "output.tif"])
>
> However each time I attempt this technique gdalwarp returns an error
> message
> that states that it cannot locate the source file.  I've tried replacing
> the
> names with path locations and yet I still get the same error returned.
>
> If someone would be kind enough to show me how to get over this issue I
> would be incredibly grateful!
>
> Thank you in advance,
>
> -James
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Problems-with-passing-parameters-into-gdalwrap-in-Python-tp5916192p5916192.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/9e571e81/attachment-0001.html
From warmerdam at pobox.com  Wed Jan 12 22:20:44 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 12 22:20:49 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0RC1 Release Candidate Prepared
Message-ID: <4D2E6F8C.1010600@pobox.com>

Folks,

I have prepared a release candidate for GDAL/OGR 1.8.0.  The source,
testsuite and documentation can be found at:

   http://download.osgeo.org/gdal/gdal-1.8.0RC1.tar.gz
   http://download.osgeo.org/gdal/gdal180RC1.zip
   http://download.osgeo.org/gdal/gdal180doc.zip
   http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz

I would appreciate broad testing of the release candidate and reporting
problems via Trac tickets:

   http://trac.osgeo.org/gdal/

If things seem respectible I will introduce a motion to promote this
release candidate as a final 1.8.0 release in the next day or two.

Note that as part of the 1.8.0 release candidate process I have established
a GDAL/OGR 1.8 stable branch, and tagged the source used for the release
candidate as 1.8.0:

   http://svn.osgeo.org/gdal/branches/1.8
   http://svn.osgeo.org/gdal/tags/1.8.0

Any bug fixes intended for 1.8.x releases, including a possible 1.8.0RC2
need to be ported into the 1.8 stable branch starting now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Wed Jan 12 23:18:34 2011
From: gregcoats at mac.com (Greg Coats)
Date: Thu Jan 13 00:18:54 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0RC1 Release Candidate Prepared
In-Reply-To: <4D2E6F8C.1010600@pobox.com>
References: <4D2E6F8C.1010600@pobox.com>
Message-ID: <2D884498-28A9-4CB2-AC0C-52D62339AC0F@mac.com>

ls shows that every file and directory has the same (false) modification date and time. This makes it impossible to see when a particular source code file was actually last updated. Can the final GDAL source code be released with accurate modification dates and times? Greg

On Jan 12, 2011, at 10:20 PM, Frank Warmerdam wrote:

> Folks,
> 
> I have prepared a release candidate for GDAL/OGR 1.8.0.  The source,
> testsuite and documentation can be found at:
> 
>  http://download.osgeo.org/gdal/gdal-1.8.0RC1.tar.gz
>  http://download.osgeo.org/gdal/gdal180RC1.zip
>  http://download.osgeo.org/gdal/gdal180doc.zip
>  http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz
> 
> I would appreciate broad testing of the release candidate and reporting
> problems via Trac tickets:
> 
>  http://trac.osgeo.org/gdal/
> 
> If things seem respectible I will introduce a motion to promote this
> release candidate as a final 1.8.0 release in the next day or two.
> 
> Note that as part of the 1.8.0 release candidate process I have established
> a GDAL/OGR 1.8 stable branch, and tagged the source used for the release
> candidate as 1.8.0:
> 
>  http://svn.osgeo.org/gdal/branches/1.8
>  http://svn.osgeo.org/gdal/tags/1.8.0
> 
> Any bug fixes intended for 1.8.x releases, including a possible 1.8.0RC2
> need to be ported into the 1.8 stable branch starting now.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From daniele.romagnoli at geo-solutions.it  Thu Jan 13 05:07:24 2011
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu Jan 13 05:07:27 2011
Subject: [gdal-dev] gdalwarp to VRT. How to set "-multi" option? How to get
 best performances when chaining gdal operations?
Message-ID: <AANLkTimEG72WhncbeK0f-ZLfeAyAfJ4ko_tdWHzcHN_s@mail.gmail.com>

Hi list,
I have a thousand of file with SRS A which I will to mosaic, reproject to
SRS B and then retile (I will use GDAL 1.7.2).

What I will do is:
1- setting up a VRT using gdalbuildvrt on top of the original TIF files.
2- reprojecting it to an intermediary VRT using gdalwarp (to SRS B).
3- retiling the reprojected VRT as 32768x32768 (or something smallers)
geotiffs with gdal_retile by also adding JPEG compression, inner 512x512
tiling and bicubic interpolation on intermediate levels

How can I get best performances with this operations chaining?
>From [1], I see I can play with "--config GDAL_CACHEMAX xxxx -wm xxxx" when
invoking gdalwarp. (I will set GDAL_CACHEMAX as an environment var)
I see that the wm parameter as well as inner tiling are set on the
reprojected.vrt as GDALWarpOptions.
Is there a way to set the "-multi" parameter in the reprojected vrt too to
make use of this feature to separate thread for I/O and thread for
computation?

Regards,
Daniele

[1]: http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp


-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584962313
fax:     +39 0584962313
mob:   +39 328 0559267


http://www.geo-solutions.it
http://geo-solutions.blogspot.com/

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/75e4d6c8/attachment.html
From warmerdam at pobox.com  Thu Jan 13 08:48:30 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 13 08:48:32 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0RC1 Release Candidate Prepared
In-Reply-To: <2D884498-28A9-4CB2-AC0C-52D62339AC0F@mac.com>
References: <4D2E6F8C.1010600@pobox.com>
	<2D884498-28A9-4CB2-AC0C-52D62339AC0F@mac.com>
Message-ID: <4D2F02AE.7080003@pobox.com>

On 11-01-12 11:18 PM, Greg Coats wrote:
> ls shows that every file and directory has the same (false) modification
> date and time. This makes it impossible to see when a particular source code
> file was actually last updated. Can the final GDAL source code be released
> with accurate modification dates and times? Greg

Greg,

We use "svn checkout" to get the source trip that will be packed up.  It
appears that svn checkout set the date on everything based on the checkout
time.  I have a vague recollection of trying to meet your need in the past
in some fashion but that the result was fragile in some way - perhaps it
depend on a particular version of svn or something.

In any event, I do not consider accurate "last update date" dates as a
valuable feature in a release source package and I am not inclined to
try and produce it.

I would strongly suggest you utilize svn (or svn via trac) to identify
changes between different releases or recent changes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kmckelvey at lizardtech.com  Thu Jan 13 14:58:16 2011
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Jan 13 14:58:22 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <AANLkTinKNo_AVyvTLdF6y2HWqrqxmujOboAsda1pC-Qd@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com><AANLkTim3q9nygC+VLXN5mpsdbQFVE9fr3w5XUEsm72LG@mail.gmail.com>
	<AANLkTinKNo_AVyvTLdF6y2HWqrqxmujOboAsda1pC-Qd@mail.gmail.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE85010672155C@sea-srv-mail.lizardtech.com>

So sorry for the delay, Tamas.  For some reason your messages were going into my spam filter.

1. Do we officially drop support for the older dsdk-s for example: Geo_DSDK-7.0.0.2167.win32-vc7 which use a different directory layout as expected by the new nmake.opt. For example the recent SDK is no available for MSVC2003 and therefore we should probably use this older version.

No - the frmts/mrsid/nmake.opt file should support older SDKs dating back to 4.0 (however the driver itself no longer builds under SDKs that old - I think it builds against 5.0 though).  It should tolerate the differences in directory layouts there have been over the years of SDK releases.

2. Am I right that all the magic in the new nmake.opt is related how to set MSRID_LIB, MRSID_INCLUDE and MRSID_FLAGS dynamically which I could also set manually by not specifying MRSID_DIR in the builds?

Yes - all the magic is to set those three macros.  You can set them explicitly in gdal/nmake.opt instead of MRSID_DIR in order to bypass the autodetect mechanism.

3. Do we have a reason to include geotiff in the mrsid makefile?

Yes - though the reason is obscure.  It is to build the mrsid driver as a plugin when linking against the MrSID SDK statically (e.g., older SDKs).  Most of the GDAL symbols referenced from the MrSID SDK are satisfied by gdal18.dll on the plugin link line, but two symbols that it needs are not exported from gdal18.dll, namely _TIFFmemcpy and __geotiff_size.  The alternative to bringing in these symbols manually from the GDAL build or configured TIFF/GeoTIFF would be to link in gdal.lib statically, but that seemed heavy-handed.  If you have any better ideas, I am open to suggestion.

1. I've found a syntax error in the line: !ELSE IF EXIST("$(R700)"), It may be due to the content of $(R700) probably.

Thanks for pointing this out.  I was overzealous in allowing spaces in the path and ended up doubling the quotes.  There are other locations that have the same issue and I will fix this.

2. Auto detection of MRSID_JP2 is not working. Need to comment out "MRSID_JP2 =  NO" at the beginning

Thanks, I will fix this as well.

3. I would also require the dll names to be detected (MRSID_DLL, LIDAR_DLL)

Yes I think this is a good addition - I am guessing it is to be able to install those DLLs?

It would also be a good thing to detect the dll versions first if MRSID_RDLLBUILD and MRSID_LDLLBUILD are not specified. This doesn't seem to work according to the spec at the beginning of nmake.opt (with a preference for the DLL if both are found)

I will double-check my logic in that section.  What specific MrSID DSDK version are you using?

Thanks for all the useful review!

Kirk.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/0c7a9166/attachment.html
From szekerest at gmail.com  Thu Jan 13 15:55:05 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 13 15:55:09 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <C55473998E248B4DAEC5342D698DFE85010672155C@sea-srv-mail.lizardtech.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
	<AANLkTim3q9nygC+VLXN5mpsdbQFVE9fr3w5XUEsm72LG@mail.gmail.com>
	<AANLkTinKNo_AVyvTLdF6y2HWqrqxmujOboAsda1pC-Qd@mail.gmail.com>
	<C55473998E248B4DAEC5342D698DFE85010672155C@sea-srv-mail.lizardtech.com>
Message-ID: <AANLkTikEFjFYnOFJVLPSo4+Lmweu8VpDHrpBU=JunReg@mail.gmail.com>

2011/1/13 Kirk McKelvey <kmckelvey@lizardtech.com>

> 3. Do we have a reason to include geotiff in the mrsid makefile?
>
> Yes ? though the reason is obscure.  It is to build the mrsid driver as a
> plugin when linking against the MrSID SDK statically (e.g., older SDKs).
> Most of the GDAL symbols referenced from the MrSID SDK are satisfied by
> gdal18.dll on the plugin link line, but two symbols that it needs are not
> exported from gdal18.dll, namely _TIFFmemcpy and __geotiff_size.  The
> alternative to bringing in these symbols manually from the GDAL build or
> configured TIFF/GeoTIFF would be to link in gdal.lib statically, but that
> seemed heavy-handed.  If you have any better ideas, I am open to suggestion.
>
>
Kirk,

I don't think we will forcibly insist on linking to MrSID statically it
could probably be phased out in the future versions.



>
> 3. I would also require the dll names to be detected (MRSID_DLL, LIDAR_DLL)
>
> Yes I think this is a good addition ? I am guessing it is to be able to
> install those DLLs?
>
>
>
> It would also be a good thing to detect the dll versions first if
> MRSID_RDLLBUILD and MRSID_LDLLBUILD are not specified. This doesn't seem to
> work according to the spec at the beginning of nmake.opt (with a preference
> for the DLL if both are found)
>
> I will double-check my logic in that section.  What specific MrSID DSDK
> version are you using?
>
>
I'm now woking with a modified version of your nmake.opt locally (thanks
again for providing that) so I'm not in sore need of committing this back in
GDAL. I'm using this option to compile and create an installer for the mrsid
part of GDAL and in this regard I require both the full path to the dll-s
and the name of the dll-s (since the names are changing between SDK
versions)

I'm compiling binaries with several compiler versions from MSVC2003 up to
MSVC2010 (Win32 and Win64). In this regard I'm using the following versions
of the SDKs:

for compiling with gdal 1.8:
Unified_DSDK_8.0_win64-vs10
Unified_DSDK_8.0_win32-vs10
Unified_DSDK_8.0_win64-vc9
Unified_DSDK_8.0_win32-vc9
Raster_DSDK_8.0_win64-vc8
Raster_DSDK_8.0_win32-vc8
Geo_DSDK-7.0.0.2167.win32-vc7

for compiling with gdal 1.7:
Geo_DSDK-7.0.0.2181.win64-vc9
Geo_DSDK-7.0.0.2181.win32-vc9
Geo_DSDK-7.0.0.2167.win64-vc8
Geo_DSDK-7.0.0.2167.win32-vc8
Geo_DSDK-7.0.0.2167.win32-vc7


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/107109bb/attachment.html
From jrepetto at free.fr  Thu Jan 13 16:03:57 2011
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Jan 13 16:04:05 2011
Subject: [gdal-dev] gdal_translate drops overviews
Message-ID: <4D2F68BD.1090300@free.fr>

Hello,
I would like to translate an OZI file to TIFF. The input file contains 
several overviews. But the output file doesn't contain any overview.

Is there a solution to keep the overviews ?

Jean-Claude



From even.rouault at mines-paris.org  Thu Jan 13 16:13:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 13 16:13:43 2011
Subject: [gdal-dev] gdal_translate drops overviews
In-Reply-To: <4D2F68BD.1090300@free.fr>
References: <4D2F68BD.1090300@free.fr>
Message-ID: <201101132213.53617.even.rouault@mines-paris.org>

Le jeudi 13 janvier 2011 22:03:57, Jean-Claude REPETTO a ?crit :
> Hello,
> I would like to translate an OZI file to TIFF. The input file contains
> several overviews. But the output file doesn't contain any overview.
> 
> Is there a solution to keep the overviews ?

Yes, you can use the COPY_SRC_OVERVIEWS creation option of the GTiff driver : 
http://gdal.org/frmt_gtiff.html. However, be aware that if you use any option 
of gdal_translate that needs an intermediate VRT (basically almost any option 
except the driver creation options), the source overviews will not be seen by 
the GTiff driver.

> 
> Jean-Claude
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Jan 13 16:14:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 13 16:14:39 2011
Subject: [gdal-dev] gdalwarp to VRT. How to set "-multi" option? How to
	get best performances when chaining gdal operations?
In-Reply-To: <AANLkTimEG72WhncbeK0f-ZLfeAyAfJ4ko_tdWHzcHN_s@mail.gmail.com>
References: <AANLkTimEG72WhncbeK0f-ZLfeAyAfJ4ko_tdWHzcHN_s@mail.gmail.com>
Message-ID: <201101132214.51218.even.rouault@mines-paris.org>

Daniele,

It is not possible to use -multi with warped VRT. The VRTWarpedDataset uses a 
lower-level API than the gdalwarp utility. The gdalwarp utility processing the 
whole dataset (or a subwindow known in advance), it can optimize things by 
fetching the input data from the next chunk while the current one is heating 
your CPU... On the contrary the VRTWarpedDataset warps the blocks only when 
there are requested, so there's no trivial possibility to optimize this.

Best regards,

Even

Le jeudi 13 janvier 2011 11:07:24, Daniele Romagnoli a ?crit :
> Hi list,
> I have a thousand of file with SRS A which I will to mosaic, reproject to
> SRS B and then retile (I will use GDAL 1.7.2).
> 
> What I will do is:
> 1- setting up a VRT using gdalbuildvrt on top of the original TIF files.
> 2- reprojecting it to an intermediary VRT using gdalwarp (to SRS B).
> 3- retiling the reprojected VRT as 32768x32768 (or something smallers)
> geotiffs with gdal_retile by also adding JPEG compression, inner 512x512
> tiling and bicubic interpolation on intermediate levels
> 
> How can I get best performances with this operations chaining?
> 
> >From [1], I see I can play with "--config GDAL_CACHEMAX xxxx -wm xxxx"
> >when
> 
> invoking gdalwarp. (I will set GDAL_CACHEMAX as an environment var)
> I see that the wm parameter as well as inner tiling are set on the
> reprojected.vrt as GDALWarpOptions.
> Is there a way to set the "-multi" parameter in the reprojected vrt too to
> make use of this feature to separate thread for I/O and thread for
> computation?
> 
> Regards,
> Daniele
> 
> [1]: http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp
From j.l.h.hartmann at uva.nl  Thu Jan 13 16:14:35 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Jan 13 16:15:03 2011
Subject: [gdal-dev] gdalwarp with gauss resampling
In-Reply-To: <4D2DFE51.1020201@pobox.com>
References: <20110107211820.GF5208@basalt.uvic.ca>	<4D278AC9.8080402@pobox.com>
	<20110107222046.GK5208@basalt.uvic.ca>	<4D2DB247.8070008@uva.nl>
	<4D2DFE51.1020201@pobox.com>
Message-ID: <4D2F6B3B.5080209@uva.nl>



On 01/12/11 20:17, Frank Warmerdam wrote:
>
> Yes, you can dump overviews to a standalone file using the 
> "dumpoverviews"
> commandline application.  I don't think it is built by default so you 
> might
> need to go into gdal/apps and make it explicitly.
>
>
Yes, this works after compiling: I get a standalone, gauss-resampled 
version of the original file at a lower resolution. For larger areas I 
would need to combine several raster files with gdal_merge, run gdaladdo 
on the large file, dump the overviews and throw the original combination 
file away. It's a long shot, but is it possible to run gdaladdo on a 
vrt-file that only has pointers to the datasets? I don't need the 
original merged file, only the derived downsampled ones.

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/10ae38e7/attachment.html
From even.rouault at mines-paris.org  Thu Jan 13 16:18:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 13 16:17:55 2011
Subject: [gdal-dev] gdalwarp with gauss resampling
In-Reply-To: <4D2F6B3B.5080209@uva.nl>
References: <20110107211820.GF5208@basalt.uvic.ca>
	<4D2DFE51.1020201@pobox.com> <4D2F6B3B.5080209@uva.nl>
Message-ID: <201101132218.05609.even.rouault@mines-paris.org>

> is it possible to run gdaladdo on a
> vrt-file that only has pointers to the datasets? I don't need the
> original merged file, only the derived downsampled ones.

Sometimes you just need to try and enjoy ;-)

> 
> Jan
From jrepetto at free.fr  Thu Jan 13 16:33:41 2011
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Jan 13 16:33:48 2011
Subject: [gdal-dev] gdal_translate drops overviews
In-Reply-To: <201101132213.53617.even.rouault@mines-paris.org>
References: <4D2F68BD.1090300@free.fr>
	<201101132213.53617.even.rouault@mines-paris.org>
Message-ID: <4D2F6FB5.30304@free.fr>

On 01/13/11 22:13, Even Rouault wrote:
> Le jeudi 13 janvier 2011 22:03:57, Jean-Claude REPETTO a ?crit :
>> Hello,
>> I would like to translate an OZI file to TIFF. The input file contains
>> several overviews. But the output file doesn't contain any overview.
>>
>> Is there a solution to keep the overviews ?
>
> Yes, you can use the COPY_SRC_OVERVIEWS creation option of the GTiff driver :
> http://gdal.org/frmt_gtiff.html. However, be aware that if you use any option
> of gdal_translate that needs an intermediate VRT (basically almost any option
> except the driver creation options), the source overviews will not be seen by
> the GTiff driver.

Thanks for your answer. Unfortunately, I get an error message :

$ gdal_translate -co COPY_SRC_OVERVIEWS=YES 314-Calvi_ozf.map 314-Calvi.tif
Input file size is 3303, 3080
0ERROR 1: Input and output dataset sizes or band counts do not
match in GDALDatasetCopyWholeRaster()
From j.l.h.hartmann at uva.nl  Thu Jan 13 16:45:26 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Jan 13 16:45:53 2011
Subject: [gdal-dev] gdalwarp with gauss resampling
In-Reply-To: <201101132218.05609.even.rouault@mines-paris.org>
References: <20110107211820.GF5208@basalt.uvic.ca>
	<4D2DFE51.1020201@pobox.com> <4D2F6B3B.5080209@uva.nl>
	<201101132218.05609.even.rouault@mines-paris.org>
Message-ID: <4D2F7276.4050601@uva.nl>

<bangs his head against the wall>

Oh, you mean gdalbuildvrt?

</bangs his head against the wall>

  I say it in your previous posting. I did try it out and it solves my 
problem. No need at all for a separate gauss-flag to gdalwarp. The whole 
idea of chaining pipelined operations this way is brilliant!

Thanks,

Jan

On 01/13/11 22:18, Even Rouault wrote:
>> is it possible to run gdaladdo on a
>> vrt-file that only has pointers to the datasets? I don't need the
>> original merged file, only the derived downsampled ones.
> Sometimes you just need to try and enjoy ;-)
>
>> Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/05b2a20a/attachment.html
From even.rouault at mines-paris.org  Thu Jan 13 18:02:24 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 13 18:02:12 2011
Subject: [gdal-dev] gdal_translate drops overviews
In-Reply-To: <4D2F6FB5.30304@free.fr>
References: <4D2F68BD.1090300@free.fr>
	<201101132213.53617.even.rouault@mines-paris.org>
	<4D2F6FB5.30304@free.fr>
Message-ID: <201101140002.24135.even.rouault@mines-paris.org>

Le jeudi 13 janvier 2011 22:33:41, Jean-Claude REPETTO a ?crit :

> Thanks for your answer. Unfortunately, I get an error message :
> 
> $ gdal_translate -co COPY_SRC_OVERVIEWS=YES 314-Calvi_ozf.map 314-Calvi.tif
> Input file size is 3303, 3080
> 0ERROR 1: Input and output dataset sizes or band counts do not
> match in GDALDatasetCopyWholeRaster()

Fixed by http://trac.osgeo.org/gdal/ticket/3905

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From kmckelvey at lizardtech.com  Thu Jan 13 19:14:53 2011
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Jan 13 19:14:58 2011
Subject: [gdal-dev] mrsid nmake.opt
In-Reply-To: <AANLkTikEFjFYnOFJVLPSo4+Lmweu8VpDHrpBU=JunReg@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE850106721483@sea-srv-mail.lizardtech.com>
	<AANLkTim3q9nygC+VLXN5mpsdbQFVE9fr3w5XUEsm72LG@mail.gmail.com>
	<AANLkTinKNo_AVyvTLdF6y2HWqrqxmujOboAsda1pC-Qd@mail.gmail.com>
	<C55473998E248B4DAEC5342D698DFE85010672155C@sea-srv-mail.lizardtech.com>
	<AANLkTikEFjFYnOFJVLPSo4+Lmweu8VpDHrpBU=JunReg@mail.gmail.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE850106721591@sea-srv-mail.lizardtech.com>

I've addressed the syntax error issue under http://trac.osgeo.org/gdal/ticket/3906 for 1.8. Since you are happy building with a local mod the other items do not seem necessary in 1.8 - instead I will incorporate them on trunk for a future release.  Thanks for the suggestions.

I'm now woking with a modified version of your nmake.opt locally (thanks again for providing that) so I'm not in sore need of committing this back in GDAL.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110113/356bb85f/attachment.html
From warmerdam at pobox.com  Fri Jan 14 00:33:50 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 14 00:33:54 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0RC2 Release Candidate Prepared
Message-ID: <4D2FE03E.6080906@pobox.com>

Folks,

Some problems were discovered with the Python bindings in the RC
being out of date, and the generated perl bindings being complete
missing.  I have prepared a new release candidate for GDAL/OGR 1.8.0.
The source, testsuite and documentation can be found at:

   http://download.osgeo.org/gdal/gdal-1.8.0RC2.tar.gz
   http://download.osgeo.org/gdal/gdal180RC2.zip
   http://download.osgeo.org/gdal/gdal180doc.zip
   http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz

I would appreciate broad testing of the release candidate and reporting
problems via Trac tickets:

   http://trac.osgeo.org/gdal/

If things seem respectable I will introduce a motion to promote this
release candidate as a final 1.8.0 release in the next day or two.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Fri Jan 14 02:41:42 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Jan 14 02:41:50 2011
Subject: [gdal-dev] gdal_translate drops overviews
In-Reply-To: <201101140002.24135.even.rouault@mines-paris.org>
References: <4D2F68BD.1090300@free.fr>
	<201101132213.53617.even.rouault@mines-paris.org>
	<4D2F6FB5.30304@free.fr>
	<201101140002.24135.even.rouault@mines-paris.org>
Message-ID: <4D2FFE36.8090601@free.fr>

On 01/14/11 00:02, Even Rouault wrote:
> Le jeudi 13 janvier 2011 22:33:41, Jean-Claude REPETTO a ?crit :
>
>> Thanks for your answer. Unfortunately, I get an error message :
>>
>> $ gdal_translate -co COPY_SRC_OVERVIEWS=YES 314-Calvi_ozf.map 314-Calvi.tif
>> Input file size is 3303, 3080
>> 0ERROR 1: Input and output dataset sizes or band counts do not
>> match in GDALDatasetCopyWholeRaster()
>
> Fixed by http://trac.osgeo.org/gdal/ticket/3905
>

Thanks for the fix. Now, the overviews are created. But the 
georeferencing is lost :

$ gdalinfo  -noct 314-Calvi_ozf.map
Driver: OZI/OZI
Files: 314-Calvi_ozf.map
Size is 3303, 3080
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=, Info=
           (1424.8,1814.4) -> (8.993495,42.6204233333333,0)
GCP[  1]: Id=, Info=
           (2517.6,128) -> (9.38468166666667,43.0045783333333,0)
GCP[  2]: Id=, Info=
           (3032,2982.4) -> (9.48353166666667,42.3152916666667,0)
GCP[  3]: Id=, Info=
           (424.8,2998.4) -> (8.64604166666667,42.3554333333333,0)
GCP[  4]: Id=, Info=
           (634.4,2276.8) -> (8.726415,42.524225,0)
GCP[  5]: Id=, Info=
           (2463.2,1112) -> (9.34382,42.77031,0)
GCP[  6]: Id=, Info=
           (2902.4,1976) -> (9.46631333333333,42.5577266666667,0)
GCP[  7]: Id=, Info=
           (1676.8,2932.8) -> (9.05197166666667,42.3517083333333,0)
GCP[  8]: Id=, Info=
           (1985.6,2004.8) -> (9.17002,42.5658716666667,0)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 3080.0)
Upper Right ( 3303.0,    0.0)
Lower Right ( 3303.0, 3080.0)
Center      ( 1651.5, 1540.0)
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
   Overviews: 826x770, 330x308, 165x154, 83x77
   Color Table (RGB with 256 entries)


$ gdalinfo -noct 314-Calvi.tif
Driver: GTiff/GeoTIFF
Files: 314-Calvi.tif
Size is 3303, 3080
Coordinate System is `'
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 3080.0)
Upper Right ( 3303.0,    0.0)
Lower Right ( 3303.0, 3080.0)
Center      ( 1651.5, 1540.0)
Band 1 Block=3303x2 Type=Byte, ColorInterp=Palette
   Overviews: 826x770, 330x308, 165x154, 83x77
   Color Table (RGB with 256 entries)


Regards,
Jean-Claude
From tom.holderness at ncl.ac.uk  Fri Jan 14 08:45:39 2011
From: tom.holderness at ncl.ac.uk (hairymapper)
Date: Fri Jan 14 08:45:41 2011
Subject: [gdal-dev] GDAL WriteArray Memory Error (Python)
Message-ID: <1295012739611-5921724.post@n2.nabble.com>


Hi,

When doing the following in Windows XP, I get an error:

dst_ds.GetRasterBand(band_num).WriteArray ( rasterarray )

Traceback (most recent call last)
...
 File "C:\Python26\lib\site-packages\osgeo\gdal_array.py", line 160, in
BandWriteArray
    array = array.astype( numpy.float64 )
MemoryError

The data being written is a Numpy matrix of byte values (Landsat image
~75mb) and the output dst_ds GDAL data type has been set to byte.

The Windows machine is 32-bit/2GB Ram VirtualBox. 
Initially I though this was due to a lack of ram, so I increased the RAM and
swap file amounts (RAM@4GB) but there was no difference. Secondly I ran the
test on a Linux machine (32-bit/2GBRam) and it worked fine. 

There's obviously some memory allocation error, what's interesting is the
"array.astype( numpy.float64 )" statement despite the Numpy matrix and
destination dataset both having byte data types. I also wouldn't have
expected to see this kind of error with a relatively small Landsat image.

gdal.VersionInfo() = '1604'
numpy.__version__ = '1.5.0'

Any help would be appreciated,

Thanks.



-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WriteArray-Memory-Error-Python-tp5921724p5921724.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tappenbeck at widemann.de  Fri Jan 14 10:04:21 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Fri Jan 14 10:11:18 2011
Subject: [gdal-dev] Problem with gdalwarp and resampling_method
Message-ID: <4D3065F5.6000805@widemann.de>



  HI !

i will translate a tif-image between two systems and use following command

gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 
D:\XXXX\Orthophotos\2616_5806_RGB.tif 
D:\XXXX\Orthophotos\2616_5806_RGB_GK.tif

then i get following message...

Usage: gdalwarp [--help-general] [--formats]
     [-s_srs srs_def] [-t_srs srs_def] [-to "NAME=VALUE"]
     [-order n] [-tps] [-rpc] [-geoloc] [-et err_threshold]
     [-te xmin ymin xmax ymax] [-tr xres yres] [-ts width height]
     [-wo "NAME=VALUE"] [-ot Byte/Int16/...] [-wt Byte/Int16]
     [-srcnodata "value [value...]"] [-dstnodata "value [value...]"] 
-dstalpha
     [-r resampling_method] [-wm memory_in_mb] [-multi] [-q]
     [-cutline datasource] [-cl layer] [-cwhere expression]
     [-csql statement] [-cblend dist_in_pixels]
     [-of format] [-co "NAME=VALUE"]*
     srcfile* dstfile

Available resampling methods:
     near (default), bilinear, cubic, cubicspline, lanczos.

when i modify the command to ....

gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r near D:\XXXX\Orthophot ...
or
gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r bilinear 
D:\XXXX\Orthophot ...
or
gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r cubic D:\XXXX\Orthophot ...
or
gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r cubicspline 
D:\XXXX\Orthophot ...
or
gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r lanczos 
D:\XXXX\Orthophot ...

it resonse the same message and nothing will happen!

the image-informations are...

C:\Program Files (x86)\FWTools2.4.7>gdalinfo D:\XXXX\Orthophotos\2616_5806_
RGB.tif
Driver: GTiff/GeoTIFF
Files: D:\Wolfsburg\Orthophotos\2616_5806_RGB.tif
        D:\Wolfsburg\Orthophotos\2616_5806_RGB.tfw
Size is 10000, 10000
Coordinate System is `'
Origin = (616000.000000000000000,5807000.000000000000000)
Pixel Size = (0.100000000000000,-0.100000000000000)
Metadata:
   TIFFTAG_SOFTWARE=IrfanView
   TIFFTAG_XRESOLUTION=0
   TIFFTAG_YRESOLUTION=0
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  616000.000, 5807000.000)
Lower Left  (  616000.000, 5806000.000)
Upper Right (  617000.000, 5807000.000)
Lower Right (  617000.000, 5806000.000)
Center      (  616500.000, 5806500.000)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue

regards Jan :-)


From daniele.romagnoli at geo-solutions.it  Fri Jan 14 10:15:34 2011
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Fri Jan 14 10:15:37 2011
Subject: [gdal-dev] Problem with gdalwarp and resampling_method
In-Reply-To: <4D3065F5.6000805@widemann.de>
References: <4D3065F5.6000805@widemann.de>
Message-ID: <AANLkTi=-vU11OvE+t=4OOVPTpCy_XRxtNHDO9Y8nkvra@mail.gmail.com>

Hi Jan,
There is a simple TYPO in your commands:

-s_src EPSG:25832 -t_src EPSG:31468

you should use:
-s_srs EPSG:25832 -t_srs EPSG:31468

Note the last char for the referencing options, is an "s" instead of a "c".
Then -s_srs instead of -s_src and -t_srs instead of -t_src :)

Hope this helps :)
Daniele




On Fri, Jan 14, 2011 at 4:04 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>  HI !
>
> i will translate a tif-image between two systems and use following command
>
> gdalwarp -s_src EPSG:25832 -t_src EPSG:31468
> D:\XXXX\Orthophotos\2616_5806_RGB.tif
> D:\XXXX\Orthophotos\2616_5806_RGB_GK.tif
>
> then i get following message...
>
> Usage: gdalwarp [--help-general] [--formats]
>    [-s_srs srs_def] [-t_srs srs_def] [-to "NAME=VALUE"]
>    [-order n] [-tps] [-rpc] [-geoloc] [-et err_threshold]
>    [-te xmin ymin xmax ymax] [-tr xres yres] [-ts width height]
>    [-wo "NAME=VALUE"] [-ot Byte/Int16/...] [-wt Byte/Int16]
>    [-srcnodata "value [value...]"] [-dstnodata "value [value...]"]
> -dstalpha
>    [-r resampling_method] [-wm memory_in_mb] [-multi] [-q]
>    [-cutline datasource] [-cl layer] [-cwhere expression]
>    [-csql statement] [-cblend dist_in_pixels]
>    [-of format] [-co "NAME=VALUE"]*
>    srcfile* dstfile
>
> Available resampling methods:
>    near (default), bilinear, cubic, cubicspline, lanczos.
>
> when i modify the command to ....
>
> gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r near D:\XXXX\Orthophot ...
> or
> gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r bilinear D:\XXXX\Orthophot
> ...
> or
> gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r cubic D:\XXXX\Orthophot ...
> or
> gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r cubicspline
> D:\XXXX\Orthophot ...
> or
> gdalwarp -s_src EPSG:25832 -t_src EPSG:31468 -r lanczos D:\XXXX\Orthophot
> ...
>
> it resonse the same message and nothing will happen!
>
> the image-informations are...
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo D:\XXXX\Orthophotos\2616_5806_
> RGB.tif
> Driver: GTiff/GeoTIFF
> Files: D:\Wolfsburg\Orthophotos\2616_5806_RGB.tif
>       D:\Wolfsburg\Orthophotos\2616_5806_RGB.tfw
> Size is 10000, 10000
> Coordinate System is `'
> Origin = (616000.000000000000000,5807000.000000000000000)
> Pixel Size = (0.100000000000000,-0.100000000000000)
> Metadata:
>  TIFFTAG_SOFTWARE=IrfanView
>  TIFFTAG_XRESOLUTION=0
>  TIFFTAG_YRESOLUTION=0
>  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  616000.000, 5807000.000)
> Lower Left  (  616000.000, 5806000.000)
> Upper Right (  617000.000, 5807000.000)
> Lower Right (  617000.000, 5806000.000)
> Center      (  616500.000, 5806500.000)
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
> regards Jan :-)
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584962313
fax:     +39 0584962313
mob:   +39 328 0559267


http://www.geo-solutions.it
http://geo-solutions.blogspot.com/

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110114/42b2ee65/attachment.html
From ahh34 at cam.ac.uk  Fri Jan 14 10:15:03 2011
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Fri Jan 14 10:31:20 2011
Subject: [gdal-dev] [ogr] Unexplained third dimension in linear ring
Message-ID: <4D306877.9010704@cam.ac.uk>

Dear all,

I am using OGR 1.7.3 to create polygons in C++.

The polygons end up as "Polygon ZM" instead of "Polygon".

The problem seems to be that adding a 2D OGRPoint  to a 2D OGRLinearRing 
results in a 3D OGRLinearRing.

Can somebody explain?

Thanks, Alex

//test.cpp
#include <ogr_geometry.h>
#include <iostream>

int main()
{
     OGRLinearRing* ring = ( OGRLinearRing* ) 
OGRGeometryFactory::createGeometry( wkbLinearRing );
     OGRPoint* point = ( OGRPoint* ) OGRGeometryFactory::createGeometry( 
wkbPoint );
     point->setX( 1.0 );
     point->setY( 1.0 );

     std::cout << "Point before: " << point->getCoordinateDimension() << 
"D" << std::endl;
     std::cout << "Ring before: " << ring->getCoordinateDimension() << 
"D" << std::endl;

     ring->addPoint(point);

     std::cout << "Ring after: " << ring->getCoordinateDimension() << 
"D" <<  std::endl;

     return 1;
}

Output:
Point before: 2D
Ring before: 2D
Ring after: 3D

-- 
Alex Hagen-Zanker

From ahh34 at cam.ac.uk  Fri Jan 14 10:57:02 2011
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Fri Jan 14 10:57:04 2011
Subject: [gdal-dev] [ogr] Unexplained third dimension in linear ring
In-Reply-To: <4D306877.9010704@cam.ac.uk>
References: <4D306877.9010704@cam.ac.uk>
Message-ID: <4D30724E.1070408@cam.ac.uk>


> The problem seems to be that adding a 2D OGRPoint  to a 2D 
> OGRLinearRing results in a 3D OGRLinearRing.

Sorry to bother you with this, I found it myself.
It is the following function in ogrlinestring.cpp that looks like a bug 
to me:

void OGRLineString::setPoint( int iPoint, double xIn, double yIn, double 
zIn )

{
     if( getCoordinateDimension() == 2 )
         Make3D();

     if( iPoint >= nPointCount )
         setNumPoints( iPoint+1 );

     paoPoints[iPoint].x = xIn;
     paoPoints[iPoint].y = yIn;

     if( zIn != 0.0 )
     {
         Make3D();
         padfZ[iPoint] = zIn;
     }
     else if( getCoordinateDimension() == 3 )
     {
         padfZ[iPoint] = 0.0;
     }
}

How about changing it to this:

void OGRLineString::setPoint( int iPoint, double xIn, double yIn, double 
zIn )

{
     if( iPoint >= nPointCount )
         setNumPoints( iPoint+1 );

     paoPoints[iPoint].x = xIn;
     paoPoints[iPoint].y = yIn;

     if( zIn != 0.0 &&  getCoordinateDimension() < 3 )
         Make3D();

     if( getCoordinateDimension() == 3 )
         padfZ[iPoint] = zln;
}


From chaitanya.ch at gmail.com  Fri Jan 14 10:54:48 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan 14 11:01:15 2011
Subject: [gdal-dev] [ogr] Unexplained third dimension in linear ring
In-Reply-To: <4D306877.9010704@cam.ac.uk>
References: <4D306877.9010704@cam.ac.uk>
Message-ID: <AANLkTi=ZqWFFLQnYjr8wxGdMbTKCW2GACyNAEuAXYWi2@mail.gmail.com>

Alex,

But, for now, the addPoint() method does not check the dimension of the
point being passed and forces the geometry to 3D. You can overcome this by
calling the method like this:

ring->addPoint( poPoint->getX(), poPoint->getY() );

This sounds like a reasonable feature. Please file a ticket at
http://trac.osgeo.org/gdal/newticket for this. Since this change has a
potential to introduce errors in existing applications, this may not be
released before gdal1.9

On Fri, Jan 14, 2011 at 8:45 PM, Alex Hagen-Zanker <ahh34@cam.ac.uk> wrote:

> Dear all,
>
> I am using OGR 1.7.3 to create polygons in C++.
>
> The polygons end up as "Polygon ZM" instead of "Polygon".
>
> The problem seems to be that adding a 2D OGRPoint  to a 2D OGRLinearRing
> results in a 3D OGRLinearRing.
>
> Can somebody explain?
>
> Thanks, Alex
>
> //test.cpp
> #include <ogr_geometry.h>
> #include <iostream>
>
> int main()
> {
>    OGRLinearRing* ring = ( OGRLinearRing* )
> OGRGeometryFactory::createGeometry( wkbLinearRing );
>    OGRPoint* point = ( OGRPoint* ) OGRGeometryFactory::createGeometry(
> wkbPoint );
>    point->setX( 1.0 );
>    point->setY( 1.0 );
>
>    std::cout << "Point before: " << point->getCoordinateDimension() << "D"
> << std::endl;
>    std::cout << "Ring before: " << ring->getCoordinateDimension() << "D" <<
> std::endl;
>
>    ring->addPoint(point);
>
>    std::cout << "Ring after: " << ring->getCoordinateDimension() << "D" <<
>  std::endl;
>
>    return 1;
> }
>
> Output:
> Point before: 2D
> Ring before: 2D
> Ring after: 3D
>
> --
> Alex Hagen-Zanker
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110114/82216e36/attachment.html
From chaitanya.ch at gmail.com  Fri Jan 14 11:07:56 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan 14 11:08:01 2011
Subject: [gdal-dev] [ogr] Unexplained third dimension in linear ring
In-Reply-To: <4D30724E.1070408@cam.ac.uk>
References: <4D306877.9010704@cam.ac.uk>
	<4D30724E.1070408@cam.ac.uk>
Message-ID: <AANLkTimqtyZ=38np-P3x_sxQLOg05yK2a_uE7Tn8ApXt@mail.gmail.com>

Alex,

I thought of pretty much the same modification. But it could potentially
break some software. It may be added in 1.8 which is in the process of being
released but I doubt it. Please file the ticket.

On Fri, Jan 14, 2011 at 9:27 PM, Alex Hagen-Zanker <ahh34@cam.ac.uk> wrote:

>
>  The problem seems to be that adding a 2D OGRPoint  to a 2D OGRLinearRing
>> results in a 3D OGRLinearRing.
>>
>
> Sorry to bother you with this, I found it myself.
> It is the following function in ogrlinestring.cpp that looks like a bug to
> me:
>
> void OGRLineString::setPoint( int iPoint, double xIn, double yIn, double
> zIn )
>
> {
>    if( getCoordinateDimension() == 2 )
>        Make3D();
>
>    if( iPoint >= nPointCount )
>        setNumPoints( iPoint+1 );
>
>    paoPoints[iPoint].x = xIn;
>    paoPoints[iPoint].y = yIn;
>
>    if( zIn != 0.0 )
>    {
>        Make3D();
>        padfZ[iPoint] = zIn;
>    }
>    else if( getCoordinateDimension() == 3 )
>    {
>        padfZ[iPoint] = 0.0;
>    }
> }
>
> How about changing it to this:
>
> void OGRLineString::setPoint( int iPoint, double xIn, double yIn, double
> zIn )
>
> {
>    if( iPoint >= nPointCount )
>        setNumPoints( iPoint+1 );
>
>    paoPoints[iPoint].x = xIn;
>    paoPoints[iPoint].y = yIn;
>
>    if( zIn != 0.0 &&  getCoordinateDimension() < 3 )
>        Make3D();
>
>    if( getCoordinateDimension() == 3 )
>        padfZ[iPoint] = zln;
>
> }
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110114/0c9fd9d6/attachment-0001.html
From ahh34 at cam.ac.uk  Fri Jan 14 11:29:10 2011
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Fri Jan 14 11:29:12 2011
Subject: [gdal-dev] [ogr] Unexplained third dimension in linear ring
In-Reply-To: <AANLkTimqtyZ=38np-P3x_sxQLOg05yK2a_uE7Tn8ApXt@mail.gmail.com>
References: <4D306877.9010704@cam.ac.uk>	<4D30724E.1070408@cam.ac.uk>
	<AANLkTimqtyZ=38np-P3x_sxQLOg05yK2a_uE7Tn8ApXt@mail.gmail.com>
Message-ID: <4D3079D6.8000507@cam.ac.uk>

Thanks for your clear explanation and easy workaround.

I filed the ticket: http://trac.osgeo.org/gdal/ticket/3907


On 14/01/2011 16:07, Chaitanya kumar CH wrote:
> Alex,
>
> I thought of pretty much the same modification. But it could potentially
> break some software. It may be added in 1.8 which is in the process of being
> released but I doubt it. Please file the ticket.
>
> On Fri, Jan 14, 2011 at 9:27 PM, Alex Hagen-Zanker<ahh34@cam.ac.uk>  wrote:
>
>>   The problem seems to be that adding a 2D OGRPoint  to a 2D OGRLinearRing
>>> results in a 3D OGRLinearRing.
>>>
>> Sorry to bother you with this, I found it myself.
>> It is the following function in ogrlinestring.cpp that looks like a bug to
>> me:
>>
>> void OGRLineString::setPoint( int iPoint, double xIn, double yIn, double
>> zIn )
>>
>> {
>>     if( getCoordinateDimension() == 2 )
>>         Make3D();
>>
>>     if( iPoint>= nPointCount )
>>         setNumPoints( iPoint+1 );
>>
>>     paoPoints[iPoint].x = xIn;
>>     paoPoints[iPoint].y = yIn;
>>
>>     if( zIn != 0.0 )
>>     {
>>         Make3D();
>>         padfZ[iPoint] = zIn;
>>     }
>>     else if( getCoordinateDimension() == 3 )
>>     {
>>         padfZ[iPoint] = 0.0;
>>     }
>> }
>>
>> How about changing it to this:
>>
>> void OGRLineString::setPoint( int iPoint, double xIn, double yIn, double
>> zIn )
>>
>> {
>>     if( iPoint>= nPointCount )
>>         setNumPoints( iPoint+1 );
>>
>>     paoPoints[iPoint].x = xIn;
>>     paoPoints[iPoint].y = yIn;
>>
>>     if( zIn != 0.0&&   getCoordinateDimension()<  3 )
>>         Make3D();
>>
>>     if( getCoordinateDimension() == 3 )
>>         padfZ[iPoint] = zln;
>>
>> }
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Alex Hagen-Zanker
University of Cambridge, Department of Architecture,  1-5 Scroope Terrace, Cambridge, CB2 1PX, United Kingdom
Tel: +44(0) 1223 330573

From even.rouault at mines-paris.org  Fri Jan 14 13:20:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 14 13:20:08 2011
Subject: [gdal-dev] gdal_translate drops overviews
In-Reply-To: <4D2FFE36.8090601@free.fr>
References: <4D2F68BD.1090300@free.fr>
	<201101140002.24135.even.rouault@mines-paris.org>
	<4D2FFE36.8090601@free.fr>
Message-ID: <201101141920.26436.even.rouault@mines-paris.org>

Le vendredi 14 janvier 2011 08:41:42, Jean-Claude Repetto a ?crit :
> On 01/14/11 00:02, Even Rouault wrote:
> > Le jeudi 13 janvier 2011 22:33:41, Jean-Claude REPETTO a ?crit :
> >> Thanks for your answer. Unfortunately, I get an error message :
> >> 
> >> $ gdal_translate -co COPY_SRC_OVERVIEWS=YES 314-Calvi_ozf.map
> >> 314-Calvi.tif Input file size is 3303, 3080
> >> 0ERROR 1: Input and output dataset sizes or band counts do not
> >> match in GDALDatasetCopyWholeRaster()
> > 
> > Fixed by http://trac.osgeo.org/gdal/ticket/3905
> 
> Thanks for the fix. Now, the overviews are created. But the
> georeferencing is lost :

Jean-Claude,

This works for me. I get the 9 GCPs and the GCP projection as expected in the 
output GeoTIFF.

> 
> 
> Regards,
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From henderson.the.rain.king at gmail.com  Fri Jan 14 13:41:32 2011
From: henderson.the.rain.king at gmail.com (The Rain King)
Date: Fri Jan 14 13:41:35 2011
Subject: [gdal-dev] [Q] gdal2tiles.py hack for 16-bit data
Message-ID: <AANLkTimFNUcY+7Sfy9upODdWGT_VfxTQeDXunEKJWwBw@mail.gmail.com>

Hi All,

As far as I can tell, there is a discussion about extending gdal2tiles
to accommodate more data types.  Is this correct?

In the near-term, is there a hack or a beta version that will allow me
to output tiles besides 8-bit PNGs?

Thanks in Advance.
/trk
From heng.feng at aircominternational.com  Sat Jan 15 10:38:13 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Sat Jan 15 10:38:15 2011
Subject: [gdal-dev] An issue about using GDALWARP to do
	theNTv2transformation
In-Reply-To: <1293133614782-5862681.post@n2.nabble.com>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293133614782-5862681.post@n2.nabble.com>
Message-ID: <C3257D068EB03E4498BAC3A96344256803B31C4208@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Hi Uwe,

Hope you had a wonderful Christmas break.

Regarding the issue about the NTv2 transformation, the map data provider has confirmed that the raster data do cover some areas which are outside the Germany map, hence the area of the grid shift file.  I have taken your second suggestion and ignore the coordinates outside BeTA2007 grid.  However,  by running the suggested command on some raster data, this time I have got the message "Inverse grid shift iteration failed, presumably at grid edge. Using first approximation." Do you know why I am having this message? Do I need to worry about it?

Thanks & BR,
Heng
From: Uwe Schmitz [via OSGeo.org] [mailto:ml-node+5862681-1425697383-308251@n2.nabble.com]
Sent: 23 December 2010 19:47
To: Heng Feng
Subject: RE: [gdal-dev] An issue about using GDALWARP to do theNTv2transformation

Heng,
heng.feng wrote:
Hi Uwe,

Thanks for your reply. The l0.tif file does not contain any georeferenced information. However, I have run the GDALINFO command on another raster data file which is in the same map data set provided by the customer and hence is supposed to be georeferenced in the way as the l0.tif file. The command output is sent as attached. As mentioned before, I also did the NTv2 transformation on  this raster data file (Notrufzonen_50m_v11_6_EPOS.tif) with the same GDALWARP command and the same grid shift file. I also got a lot of error messages saying that some coordinates are outside the area of the grid shift file. And with the "+x_0=500000" parameter, the output error messages are much less than the ones with the "+x_0=4500000" parameter.

Thanks for your help again.
from your screenshot I see that georeference information
of your file seems to be OK. So forget about my comment
about missing meridian prefixes, that's not the case.

But ..., your file is very large (the extent, not the size).
Please notice, that due to the nature of the NTv2 approach
it is not possible to calculate coordinates outside the
extent of the grid. The BeTA2007 grid covers longitudes
between 5d30' to 15d40' East. Your Screenshot of gdalinfo
shows that the longitude of the upper left corner is
4d54'45.24" East and hence outside the BeTA2007 grid.

OK, what can you do? BeTA2007 has submeter accuracy and
I believe, that you don't need it for you data (one pixel
covers 50m*50m). So you can try the 7-Parameter Helmert
approach described by EPSG::1776 with "+towgs84=..."
Parameter instead of "+nadgrids=...". This will result in
errors of max. 3m in comparison to BeTA2007. Not that
bad for your data ;-)

Another way is to specify the "null" grid as fall back for
coordinates outside the BeTA2007 grid, like so:

   ... +nadgrids=C:\fh\comar ch\BETA2007.gsb,null

But be aware that coordinates outside the BeTA2007 grid experience
no datum shift. This may result in errors up to 200m.

Hope that helps.

Regards
Uwe
________________________________
View message @ http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5862681.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
Mobile World Congress 2011, 14-17 February
Stand 1B14, Barcelona, Spain
Click mailto:events@aircominternational.com?subject=Mobile%20World%20Congress%20'11%20meeting%20-%20%Appointement%20%Booking to book a meeting

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5924890.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110115/a052ceeb/attachment.html
From woklist at kyngchaos.com  Sat Jan 15 16:51:54 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Jan 15 16:51:59 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0RC2 Release Candidate Prepared
In-Reply-To: <4D2FE03E.6080906@pobox.com>
References: <4D2FE03E.6080906@pobox.com>
Message-ID: <09C0EBAD-343E-4B0C-BFED-B291D0D479FA@kyngchaos.com>

Looks mostly good here.

I submitted a couple build bugs (1 fixed already) and autotest bugs.

I'm having problems in the warp tests.  Diffs are a lot greater than from GDAL 1.7, including a few failures.  I don't know if it's just something different on my system from when I last compiled GDAL 1.7 or if there were some big changes in the code.  Any ideas before I submit a bug report on this?

On Jan 13, 2011, at 11:33 PM, Frank Warmerdam wrote:

> Folks,
> 
> Some problems were discovered with the Python bindings in the RC
> being out of date, and the generated perl bindings being complete
> missing.  I have prepared a new release candidate for GDAL/OGR 1.8.0.
> The source, testsuite and documentation can be found at:
> 
>  http://download.osgeo.org/gdal/gdal-1.8.0RC2.tar.gz
>  http://download.osgeo.org/gdal/gdal180RC2.zip
>  http://download.osgeo.org/gdal/gdal180doc.zip
>  http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz
> 
> I would appreciate broad testing of the release candidate and reporting
> problems via Trac tickets:
> 
>  http://trac.osgeo.org/gdal/
> 
> If things seem respectable I will introduce a motion to promote this
> release candidate as a final 1.8.0 release in the next day or two.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From woklist at kyngchaos.com  Sat Jan 15 17:17:25 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Jan 15 17:17:29 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0RC2 Release Candidate Prepared
In-Reply-To: <09C0EBAD-343E-4B0C-BFED-B291D0D479FA@kyngchaos.com>
References: <4D2FE03E.6080906@pobox.com>
	<09C0EBAD-343E-4B0C-BFED-B291D0D479FA@kyngchaos.com>
Message-ID: <8FC598BC-9675-45EB-A8AA-B67DE83AF1BA@kyngchaos.com>

Oh, right after sending I poked around in the alg/ source folder.  And remembered enabling OpenCL.  After disabling OpenCL, the warp errors returned to normal (a few minor diffs).

On Jan 15, 2011, at 3:51 PM, William Kyngesburye wrote:

> Looks mostly good here.
> 
> I submitted a couple build bugs (1 fixed already) and autotest bugs.
> 
> I'm having problems in the warp tests.  Diffs are a lot greater than from GDAL 1.7, including a few failures.  I don't know if it's just something different on my system from when I last compiled GDAL 1.7 or if there were some big changes in the code.  Any ideas before I submit a bug report on this?
> 
> On Jan 13, 2011, at 11:33 PM, Frank Warmerdam wrote:
> 
>> Folks,
>> 
>> Some problems were discovered with the Python bindings in the RC
>> being out of date, and the generated perl bindings being complete
>> missing.  I have prepared a new release candidate for GDAL/OGR 1.8.0.
>> The source, testsuite and documentation can be found at:
>> 
>> http://download.osgeo.org/gdal/gdal-1.8.0RC2.tar.gz
>> http://download.osgeo.org/gdal/gdal180RC2.zip
>> http://download.osgeo.org/gdal/gdal180doc.zip
>> http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz
>> 
>> I would appreciate broad testing of the release candidate and reporting
>> problems via Trac tickets:
>> 
>> http://trac.osgeo.org/gdal/
>> 
>> If things seem respectable I will introduce a motion to promote this
>> release candidate as a final 1.8.0 release in the next day or two.
>> 
>> Best regards,
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
> 
> - the wisdom of Tarzan
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From mohammedrashadkm at gmail.com  Sun Jan 16 01:26:03 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sun Jan 16 01:26:46 2011
Subject: [gdal-dev] OGR read polygon
Message-ID: <AANLkTim5Ny-K_yrumon9DGh_it6msbkua-Wr18ed=ek+@mail.gmail.com>

how to read a polygon from wkbPolygon geometry type. how read its set of
points or points that make up the polygon

-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110116/0d80dcf7/attachment.html
From chaitanya.ch at gmail.com  Sun Jan 16 02:20:01 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jan 16 02:20:09 2011
Subject: [gdal-dev] OGR read polygon
In-Reply-To: <AANLkTim5Ny-K_yrumon9DGh_it6msbkua-Wr18ed=ek+@mail.gmail.com>
References: <AANLkTim5Ny-K_yrumon9DGh_it6msbkua-Wr18ed=ek+@mail.gmail.com>
Message-ID: <AANLkTikfGjKiOw93QNrJKHgijSKz26NPKN+VK8Rz9Mp=@mail.gmail.com>

Rashad,

Refer to http://www.opengeospatial.org/standards/sfa for the official
specification.
You can use the wkb format for more clarity, but at the cost of more
computation.

On Sun, Jan 16, 2011 at 11:56 AM, Mohammed Rashad <
mohammedrashadkm@gmail.com> wrote:

> how to read a polygon from wkbPolygon geometry type. how read its set of
> points or points that make up the polygon
>
> --
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110116/a2e9fdf9/attachment.html
From mohammedrashadkm at gmail.com  Sun Jan 16 02:25:39 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sun Jan 16 02:26:22 2011
Subject: [gdal-dev] OGR read polygon
In-Reply-To: <AANLkTikfGjKiOw93QNrJKHgijSKz26NPKN+VK8Rz9Mp=@mail.gmail.com>
References: <AANLkTim5Ny-K_yrumon9DGh_it6msbkua-Wr18ed=ek+@mail.gmail.com>
	<AANLkTikfGjKiOw93QNrJKHgijSKz26NPKN+VK8Rz9Mp=@mail.gmail.com>
Message-ID: <AANLkTimbHEq1uYcT6=_6-m-aE2FEnn3OqnVupEv1ewip@mail.gmail.com>

but i can read points and lines directly without wkb. problem is in reading
polygon
if( poGeometry != NULL
            && wkbFlatten(poGeometry->getGeometryType()) == wkbLineString  )
        {
            OGRLineString *poPoint = (OGRLineString *) poGeometry;

for(int i=0;i<poPoint->getNumPoints();i++)
{

cout << poPoint->getX(i) << "::" << poPoint->getY(i) << endl;
}
}

On Sun, Jan 16, 2011 at 12:50 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Rashad,
>
> Refer to http://www.opengeospatial.org/standards/sfa for the official
> specification.
> You can use the wkb format for more clarity, but at the cost of more
> computation.
>
> On Sun, Jan 16, 2011 at 11:56 AM, Mohammed Rashad <
> mohammedrashadkm@gmail.com> wrote:
>
>> how to read a polygon from wkbPolygon geometry type. how read its set of
>> points or points that make up the polygon
>>
>> --
>> Rashad
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110116/722a0105/attachment.html
From chaitanya.ch at gmail.com  Sun Jan 16 08:00:31 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jan 16 08:00:38 2011
Subject: [gdal-dev] OGR read polygon
In-Reply-To: <AANLkTimbHEq1uYcT6=_6-m-aE2FEnn3OqnVupEv1ewip@mail.gmail.com>
References: <AANLkTim5Ny-K_yrumon9DGh_it6msbkua-Wr18ed=ek+@mail.gmail.com>
	<AANLkTikfGjKiOw93QNrJKHgijSKz26NPKN+VK8Rz9Mp=@mail.gmail.com>
	<AANLkTimbHEq1uYcT6=_6-m-aE2FEnn3OqnVupEv1ewip@mail.gmail.com>
Message-ID: <AANLkTikZjZXXCN+gbBOxTQcj5b00ya4quztmNAq7V9d4@mail.gmail.com>

Rashad,

Polygons are made of one or more linear rings. A linear ring can be read
pretty much the same as a linestring.
http://www.gdal.org/ogr/classOGRGeometry.html

On Sun, Jan 16, 2011 at 12:55 PM, Mohammed Rashad <
mohammedrashadkm@gmail.com> wrote:

> but i can read points and lines directly without wkb. problem is in reading
> polygon
> if( poGeometry != NULL
>             && wkbFlatten(poGeometry->getGeometryType()) == wkbLineString
>  )
>         {
>             OGRLineString *poPoint = (OGRLineString *) poGeometry;
>
> for(int i=0;i<poPoint->getNumPoints();i++)
> {
>
> cout << poPoint->getX(i) << "::" << poPoint->getY(i) << endl;
> }
> }
>
> On Sun, Jan 16, 2011 at 12:50 PM, Chaitanya kumar CH <chaitanya.ch@
> gmail.com> wrote:
>
>> Rashad,
>>
>> Refer to http://www.opengeospatial.org/standards/sfa for the official
>> specification.
>> You can use the wkb format for more clarity, but at the cost of more
>> computation.
>>
>> On Sun, Jan 16, 2011 at 11:56 AM, Mohammed Rashad <
>> mohammedrashadkm@gmail.com> wrote:
>>
>>> how to read a polygon from wkbPolygon geometry type. how read its set of
>>> points or points that make up the polygon
>>>
>>> --
>>> Rashad
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110116/a874201a/attachment-0001.html
From ben at vterrain.org  Sun Jan 16 23:10:48 2011
From: ben at vterrain.org (Ben Discoe)
Date: Sun Jan 16 23:14:37 2011
Subject: [gdal-dev] support for libpng 1.5.0
Message-ID: <002d01cbb5fc$85f827d0$91e87770$@org>

I tried building GDAL 1.7.3 this evening and found that it did not support the new libpng 1.5.0.
I also looked at the archive for GDAL 1.8.0 RC2, and it seems to have the same code in question.

The changes are small, just a few like this:

<    VSIFFlushL( (png_FILE_p) png_get_io_ptr(png_ptr->io_ptr) );
>    VSIFFlushL( (png_FILE_p) png_get_io_ptr(png_ptr) );

And one like this:

<    jmp_buf* psSetJmpContext = (jmp_buf*) png_ptr->error_ptr;
>    jmp_buf* psSetJmpContext = (jmp_buf*) png_get_error_ptr(png_ptr);

On a personal note, it feels good to be back here again, building GDAL.  I started with GDAL back at the dawn of time, mid-2000, and it's been a long, happy relationship.

-Ben


From uwe.schmitz at bezreg-koeln.nrw.de  Mon Jan 17 04:21:40 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Mon Jan 17 04:21:54 2011
Subject: AW: [gdal-dev] An issue about using GDALWARP to
	dotheNTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A96344256803B31C4208@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>

Heng,

> Hi Uwe,
> 
> Hope you had a wonderful Christmas break.

Yes, thank you (but I have the impression that mine has 
been shorter than yours ;-))

> Regarding the issue about the NTv2 transformation, 
> the map data provider has confirmed that the raster 
> data do cover some areas which are outside the Germany 
> map, hence the area of the grid shift file.  I have 
> taken your second suggestion and ignore the coordinates 
> outside BeTA2007 grid.  However,  by running the suggested 
> command on some raster data, this time I have got the 
>  message "Inverse grid shift iteration failed, presumably 
> at grid edge. Using first approximation." Do you know 
> why I am having this message? Do I need to worry about it?
>
No! NTv2 is based on a grid of shift values from System A
to System B (DHDN -> ETRS89 in your case). For the other
direction (B->A, or ETRS89->DHDN) the shift value is 
calculated by an iterative approach. Near the grid edges it's
possible that during the iteartion the coordinates fall 
outside the grid. I would imagine that this is the case
for the message you see.

Assuming you don't need precise transformation results 
outside the BeTA2007 grid, you can safely ignore this 
message.

Regards
Uwe
From markus.u.mueller at zoho.com  Mon Jan 17 02:25:32 2011
From: markus.u.mueller at zoho.com (=?ISO-8859-1?Q?=22Dr=2E_Markus_M=FCller=22?=)
Date: Mon Jan 17 06:37:46 2011
Subject: [gdal-dev] Importing and exporting shapefiles in mySQL with OGR
Message-ID: <4D33EEEC.6000503@zoho.com>

Dear listers,

I am trying to get shapefiles in and out of a mySQL database using OGR. 
I found some example commands for importing and succeeded in doing this. 
But getting the syntax together to get a spatial dataset out of mySQL db 
seems to be over my head.

Can anybody supply an example command to convert from mySQL to shape? Or 
is it just not possible to export geodata from mySQL into shapefiles 
using OGR?


Thanx and best regards

Markus



From tom.holderness at ncl.ac.uk  Mon Jan 17 06:46:11 2011
From: tom.holderness at ncl.ac.uk (hairymapper)
Date: Mon Jan 17 06:46:12 2011
Subject: [gdal-dev] Re: GDAL WriteArray Memory Error (Python)
In-Reply-To: <1295012739611-5921724.post@n2.nabble.com>
References: <1295012739611-5921724.post@n2.nabble.com>
Message-ID: <1295264771235-5931519.post@n2.nabble.com>


Solved. The error in my previous post occurs because of the way
gdal_array.BandWriteArray() tries to catch unknown datatype errors.

If gdal.BandWriteArray() receives an numpy array with an unrecognized data
type it defaults to using numpy.float64 data type for the output (presumably
in the hope that by using such a large data type no data will be lost in the
output). However, my Windows box can't create such large arrays of float64
type, thus creating a memory error (works fine in Ubuntu). I've included a
code snippet from the function below, showing the definition of this. 

This is what was happening for me due to a difference in the definition of
"byte" data type in Numpy and GDAL:
nump.byte = 8bit integer, gdal.GDT_Byte = 8bit un-signed integer. I fixed by
manually specifying numpy  numpy.dtype('u1').
GDAL wasn't getting the expected datatype and was faling back to
numpy.float64.

# snippet from gdal_array.py
# \osgeo\gdal_array.py bandwritearray()
...
 # if we receive some odd type, like int64, try casting to a very
    # generic type we do support (#2285)
    if not datatype:
        gdal.Debug( 'gdal_array', 'force array to float64' )
        array = array.astype( numpy.float64 )
        datatype = NumericTypeCodeToGDALTypeCode( array.dtype.type )
...
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WriteArray-Memory-Error-Python-tp5921724p5931519.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Mon Jan 17 08:07:27 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan 17 08:07:35 2011
Subject: [gdal-dev] gdaltransform and cs2cs don't agree ...
Message-ID: <4D343F0F.6040700@free.fr>

Hello,
I have found a case where gdaltransform and cs2cs don't give the same 
results :

$ gdaltransform -s_srs +init=IGNF:MILLER -t_srs EPSG:4326
-20037504 10018752
179.798600354466 72.943850852954 12400.9953186931

$ cs2cs  -f "%.11f" +init=IGNF:MILLER +to +init=epsg:4326
-20037504 10018752
-179.99996098806	72.78284247593 0.00000000000


Can somebody confirm the bug ? If it is not a bug, is there an explanation ?

I am using PROJ-4.7.0 and GDAL-1.8.0.

Regards,
Jean-Claude
From chaitanya.ch at gmail.com  Mon Jan 17 08:30:04 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan 17 08:30:07 2011
Subject: [gdal-dev] Importing and exporting shapefiles in mySQL with OGR
In-Reply-To: <4D33EEEC.6000503@zoho.com>
References: <4D33EEEC.6000503@zoho.com>
Message-ID: <AANLkTinM=7v8JPe89w7nHQQfTkEZktpEh+R48Z3iQV94@mail.gmail.com>

Markus,

Run the ogrinfo utility on the MySQL database created from the shapefile and
the original MySQL database and compare them. You should be able to build a
command according to the differences.

On Mon, Jan 17, 2011 at 12:55 PM, "Dr. Markus M?ller" <
markus.u.mueller@zoho.com> wrote:

> Dear listers,
>
> I am trying to get shapefiles in and out of a mySQL database using OGR. I
> found some example commands for importing and succeeded in doing this. But
> getting the syntax together to get a spatial dataset out of mySQL db seems
> to be over my head.
>
> Can anybody supply an example command to convert from mySQL to shape? Or is
> it just not possible to export geodata from mySQL into shapefiles using OGR?
>
>
> Thanx and best regards
>
> Markus
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110117/685279ab/attachment.html
From heng.feng at aircominternational.com  Mon Jan 17 08:45:48 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Mon Jan 17 08:45:50 2011
Subject: [gdal-dev] An issue about using GDALWARP to
	dotheNTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293133614782-5862681.post@n2.nabble.com>
	<C3257D068EB03E4498BAC3A96344256803B31C4208@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A96344256803B324BB7E@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Brilliant. Thanks a lot, Uwe. This is all I want to know.

Yes, you are right that I only recently started working on these data again although I have only got one day off for Christmas (in China) :)

From: Schmitz, Uwe [via OSGeo.org] [mailto:ml-node+5931200-375580391-308251@n2.nabble.com]
Sent: 17 January 2011 09:22
To: Heng Feng
Subject: AW: [gdal-dev] An issue about using GDALWARP to dotheNTv2transformation

Heng,

> Hi Uwe,
>
> Hope you had a wonderful Christmas break.

Yes, thank you (but I have the impression that mine has
been shorter than yours ;-))

> Regarding the issue about the NTv2 transformation,
> the map data provider has confirmed that the raster
> data do cover some areas which are outside the Germany
> map, hence the area of the grid shift file.  I have
> taken your second suggestion and ignore the coordinates
> outside BeTA2007 grid.  However,  by running the suggested
> command on some raster data, this time I have got the
>  message "Inverse grid shift iteration failed, presumably
> at grid edge. Using first approximation." Do you know
> why I am having this message? Do I need to worry about it?
>
No! NTv2 is based on a grid of shift values from System A
to System B (DHDN -> ETRS89 in your case). For the other
direction (B->A, or ETRS89->DHDN) the shift value is
calculated by an iterative approach. Near the grid edges it's
possible that during the iteartion the coordinates fall
outside the grid. I would imagine that this is the case
for the message you see.

Assuming you don't need precise transformation results
outside the BeTA2007 grid, you can safely ignore this
message.

Regards
Uwe
_______________________________________________
gdal-dev mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=5931200&i=0>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________
View message @ http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5931200.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
Mobile World Congress 2011, 14-17 February
Stand 1B14, Barcelona, Spain
Click mailto:events@aircominternational.com?subject=Mobile%20World%20Congress%20'11%20meeting%20-%20%Appointement%20%Booking to book a meeting

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5931827.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110117/12b0d7b4/attachment-0001.html
From even.rouault at mines-paris.org  Mon Jan 17 10:55:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan 17 10:55:55 2011
Subject: [gdal-dev] gdaltransform and cs2cs don't agree ...
In-Reply-To: <4D343F0F.6040700@free.fr>
References: <4D343F0F.6040700@free.fr>
Message-ID: <1295279744.4d34668044321@webmail.free.fr>

Selon Jean-Claude Repetto <jrepetto@free.fr>:

Jean-Claude,

I've investigated a bit. Here are my findings.

gdaltransform asks PROJ.4 to expand the SRS definition "+init=IGNF:MILLER" into
a full PROJ.4 string.

The lookup in the IGNF file results in :
+proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000
+a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000
+units=m +no_defs

Then OSR interprets the string to build its WKT representation, which leads to :
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,298.257222101],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Miller_Cylindrical"],
    PARAMETER["latitude_of_center",0],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]

Which is OK up to that point.

Now when building the transformation between the 2 SRS, OSR builds a new PROJ.4
string from the WKT (not using the original IGNF:MILLER expansion) and here what
we get :
+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +R_A +ellps=GRS80
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs

The difference (+a=6378137.0000 +rf=298.2572221010000) vs +ellps=GRS80 is OK
since those are 2 equivalent definitions.

The issue is the added +R_A which is not found in the original IGNF file.

Now if I test(note the removed +R_A and the added +wktext) :

gdaltransform -s_srs "+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=GRS80
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs +wktext" -t_srs EPSG:4326

I get the same results as in the cs2cs command line.

I have no idea why we add +R_A when writting the PROJ.4 string of a Miller
projection. SVN history points to a commit that dates back to 10 years ago :
http://trac.osgeo.org/gdal/changeset/1862/trunk/ogr/ogr_srs_proj4.cpp

Perhaps Frank will remember... ?

In any case, you can open a Trac ticket to record the issue.

Best regards,

Even


> Hello,
> I have found a case where gdaltransform and cs2cs don't give the same
> results :
>
> $ gdaltransform -s_srs +init=IGNF:MILLER -t_srs EPSG:4326
> -20037504 10018752
> 179.798600354466 72.943850852954 12400.9953186931
>
> $ cs2cs  -f "%.11f" +init=IGNF:MILLER +to +init=epsg:4326
> -20037504 10018752
> -179.99996098806	72.78284247593 0.00000000000
>
>
> Can somebody confirm the bug ? If it is not a bug, is there an explanation ?
>
> I am using PROJ-4.7.0 and GDAL-1.8.0.
>
> Regards,
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Mon Jan 17 11:02:12 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 17 11:02:15 2011
Subject: [gdal-dev] Importing and exporting shapefiles in mySQL with OGR
In-Reply-To: <4D33EEEC.6000503@zoho.com>
References: <4D33EEEC.6000503@zoho.com>
Message-ID: <4D346804.4000509@pobox.com>

On 11-01-17 02:25 AM, "Dr. Markus M?ller" wrote:
> Dear listers,
>
> I am trying to get shapefiles in and out of a mySQL database using OGR. I found
> some example commands for importing and succeeded in doing this. But getting
> the syntax together to get a spatial dataset out of mySQL db seems to be over
> my head.
>
> Can anybody supply an example command to convert from mySQL to shape? Or is it
> just not possible to export geodata from mySQL into shapefiles using OGR?

Markus,

It could be as simple as:

   ogr2ogr out_dir MYSQL:mydbname

This would dump all spatial tables to shapefiles in a newly created
directory "out_dir" from a MySQL database named "mydbname".

If you want to only extract particular tables, then just list them at the
end.

eg.
   ogr2ogr out_dir MYSQL:mydbname roads intersections

For more options, such as custom queries, spatial restrictions and so forth
see the ogr2ogr docs:

   http://www.gdal.org/ogr2ogr.html

Or perhaps I'm missing the gist of your problem?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From annaauge at web.de  Mon Jan 17 11:15:05 2011
From: annaauge at web.de (anna auge)
Date: Mon Jan 17 11:21:20 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
Message-ID: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110117/7e6846f0/attachment.html
From jormarfe at gmail.com  Mon Jan 17 11:56:16 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Mon Jan 17 11:56:19 2011
Subject: [gdal-dev] Create a shape file with polygons
Message-ID: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>

Hi,


I`m new developing software with GDAL and OGR libraries. I has used the code
from the OGR web that read and write a shapefile (points). What I really
want is to read and write shapefiles with polygons.

There is any code that could help me to begin this program?


Many Thanks,

Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110117/91d4677b/attachment.html
From pcorti at gmail.com  Mon Jan 17 12:18:17 2011
From: pcorti at gmail.com (Paolo Corti)
Date: Mon Jan 17 12:18:59 2011
Subject: [gdal-dev] Create a shape file with polygons
In-Reply-To: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
References: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
Message-ID: <AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>

> I`m new developing software with GDAL and OGR libraries. I has used the code
> from the OGR web that read and write a shapefile (points). What I really
> want is to read and write shapefiles with polygons.

Hi Jorge
if you are using Python this [0] is the best resource out there.
Look at the sample in week 2 of the tutorial for effectively writing
(and reading) a Polygon shapefile.
If you are not using Python you should not have too much problems for
converting the Python code to the language you are using.
Another very good resource is to look at the source code: again,
supposing that you are using Python, this sample [1] should work for
you

ciao
P

[0] http://www.gis.usu.edu/~chrisg/python/2009/
[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/assemblepoly.py

-- 
Paolo Corti
GIS specialist and web developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From jormarfe at gmail.com  Mon Jan 17 12:31:26 2011
From: jormarfe at gmail.com (Jorge)
Date: Mon Jan 17 12:31:35 2011
Subject: [gdal-dev] Create a shape file with polygons
In-Reply-To: <AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>
References: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
	<AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>
Message-ID: <B101402B-F773-4D2F-AA90-715F8B5BE9D1@gmail.com>

Hi, 

Thank you very much in advance. I am developing with C++, but I will try to understand the code. I think it will easy.

Thank you.

Jorge

El 17/01/2011, a las 18:18, Paolo Corti <pcorti@gmail.com> escribi?:

>> I`m new developing software with GDAL and OGR libraries. I has used the code
>> from the OGR web that read and write a shapefile (points). What I really
>> want is to read and write shapefiles with polygons.
> 
> Hi Jorge
> if you are using Python this [0] is the best resource out there.
> Look at the sample in week 2 of the tutorial for effectively writing
> (and reading) a Polygon shapefile.
> If you are not using Python you should not have too much problems for
> converting the Python code to the language you are using.
> Another very good resource is to look at the source code: again,
> supposing that you are using Python, this sample [1] should work for
> you
> 
> ciao
> P
> 
> [0] http://www.gis.usu.edu/~chrisg/python/2009/
> [1] http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/assemblepoly.py
> 
> -- 
> Paolo Corti
> GIS specialist and web developer
> web: http://www.paolocorti.net
> twitter: @paolo_corti
From warmerdam at pobox.com  Mon Jan 17 12:40:25 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 17 12:40:27 2011
Subject: [gdal-dev] gdaltransform and cs2cs don't agree ...
In-Reply-To: <1295279744.4d34668044321@webmail.free.fr>
References: <4D343F0F.6040700@free.fr>
	<1295279744.4d34668044321@webmail.free.fr>
Message-ID: <4D347F09.6090200@pobox.com>

On 11-01-17 10:55 AM, Even Rouault wrote:
> I get the same results as in the cs2cs command line.
>
> I have no idea why we add +R_A when writting the PROJ.4 string of a Miller
> projection. SVN history points to a commit that dates back to 10 years ago :
> http://trac.osgeo.org/gdal/changeset/1862/trunk/ogr/ogr_srs_proj4.cpp
>
> Perhaps Frank will remember... ?
>
> In any case, you can open a Trac ticket to record the issue.

Even,

A bit of digging shows that +R_A tells PROJ.4 to use a spherical radius that
gives a sphere with the same surface area as the original ellipsoid.  I
imagine I added this while trying to get the results to match PCI's GCTP
based implementation though the history isn't clear on the details.

Likely I should not be inserting that though I'm not clear what radius
is chosen by default for spherical projections like this.  Certainly there
is no ambiguity if the coordinate system is actually using a sphere.

I'm not going to take any action without a ticket and I'm not absolutely
positive what I would do with one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jmckenna at gatewaygeomatics.com  Mon Jan 17 13:13:13 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Jan 17 13:13:17 2011
Subject: [gdal-dev] Importing and exporting shapefiles in mySQL with OGR
In-Reply-To: <4D33EEEC.6000503@zoho.com>
References: <4D33EEEC.6000503@zoho.com>
Message-ID: <4D3486B9.5060202@gatewaygeomatics.com>

On 11-01-17 3:25 AM, "Dr. Markus M?ller" wrote:
> Dear listers,
>
> I am trying to get shapefiles in and out of a mySQL database using OGR.
> I found some example commands for importing and succeeded in doing this.
> But getting the syntax together to get a spatial dataset out of mySQL db
> seems to be over my head.
>
> Can anybody supply an example command to convert from mySQL to shape? Or
> is it just not possible to export geodata from mySQL into shapefiles
> using OGR?

The MapServer project includes some good examples of using the ogrinfo 
utility on mySQL databases: 
http://www.mapserver.org/input/vector/mysql.html#test-connection-with-ogrinfo 


I would start there, then execute the commands that Frank mentions.

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From warmerdam at pobox.com  Mon Jan 17 13:46:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 17 13:46:39 2011
Subject: [gdal-dev] Motion: Adopt GDAL/OGR RC2 as 1.8.0 Release
Message-ID: <4D348E8C.6010407@pobox.com>


Motion: Adopt GDAL/OGR 1.8.0 RC2 as GDAL/OGR 1.8.0 Final Release

Folks,

There don't seem to be any serious issues with the RC2, so I'd like to
adopt it as our 1.8.0 release.   I'll start the voting with:

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Mon Jan 17 13:48:07 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan 17 13:48:11 2011
Subject: [gdal-dev] Motion: Adopt GDAL/OGR RC2 as 1.8.0 Release
In-Reply-To: <4D348E8C.6010407@pobox.com>
References: <4D348E8C.6010407@pobox.com>
Message-ID: <4D348EE7.1040707@mapgears.com>

On 11-01-17 01:46 PM, Frank Warmerdam wrote:
>
> Motion: Adopt GDAL/OGR 1.8.0 RC2 as GDAL/OGR 1.8.0 Final Release
>

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From szekerest at gmail.com  Mon Jan 17 14:22:38 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 17 14:22:42 2011
Subject: [gdal-dev] Motion: Adopt GDAL/OGR RC2 as 1.8.0 Release
In-Reply-To: <4D348E8C.6010407@pobox.com>
References: <4D348E8C.6010407@pobox.com>
Message-ID: <AANLkTimy6OixFLzkANwdoOY+t+by-RPb=_cyyshgiHvj@mail.gmail.com>

+1

Tamas



2011/1/17 Frank Warmerdam <warmerdam@pobox.com>

>
> Motion: Adopt GDAL/OGR 1.8.0 RC2 as GDAL/OGR 1.8.0 Final Release
>
> Folks,
>
> There don't seem to be any serious issues with the RC2, so I'd like to
> adopt it as our 1.8.0 release.   I'll start the voting with:
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110117/a80f3f12/attachment.html
From even.rouault at mines-paris.org  Mon Jan 17 14:31:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan 17 14:31:53 2011
Subject: [gdal-dev] Motion: Adopt GDAL/OGR RC2 as 1.8.0 Release
In-Reply-To: <4D348E8C.6010407@pobox.com>
References: <4D348E8C.6010407@pobox.com>
Message-ID: <201101172031.44499.even.rouault@mines-paris.org>

> Motion: Adopt GDAL/OGR 1.8.0 RC2 as GDAL/OGR 1.8.0 Final Release
> 
+1 Even
From hobu.inc at gmail.com  Mon Jan 17 15:40:54 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Jan 17 15:40:59 2011
Subject: [gdal-dev] Motion: Adopt GDAL/OGR RC2 as 1.8.0 Release
In-Reply-To: <201101172031.44499.even.rouault@mines-paris.org>
References: <4D348E8C.6010407@pobox.com>
	<201101172031.44499.even.rouault@mines-paris.org>
Message-ID: <E28854EF-7A5C-4A91-BB2F-10467548087F@gmail.com>

> Motion: Adopt GDAL/OGR 1.8.0 RC2 as GDAL/OGR 1.8.0 Final Release

+1 Howard


From jrepetto at free.fr  Mon Jan 17 15:43:36 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan 17 15:43:44 2011
Subject: [gdal-dev] gdaltransform and cs2cs don't agree ...
In-Reply-To: <4D347F09.6090200@pobox.com>
References: <4D343F0F.6040700@free.fr>	<1295279744.4d34668044321@webmail.free.fr>
	<4D347F09.6090200@pobox.com>
Message-ID: <4D34A9F8.5060606@free.fr>

On 01/17/11 18:40, Frank Warmerdam wrote:
>
> A bit of digging shows that +R_A tells PROJ.4 to use a spherical radius
> that
> gives a sphere with the same surface area as the original ellipsoid. I
> imagine I added this while trying to get the results to match PCI's GCTP
> based implementation though the history isn't clear on the details.
>
> Likely I should not be inserting that though I'm not clear what radius
> is chosen by default for spherical projections like this. Certainly there
> is no ambiguity if the coordinate system is actually using a sphere.
>
> I'm not going to take any action without a ticket and I'm not absolutely
> positive what I would do with one.

Frank, Even,

Thanks for the clarification. I have found that there are two different 
definitions of the Miller projection in use in PROJ.4 : esri:54003 which 
uses the authalic radius, and IGNF:MILLER, which uses the major axis.
There is probably no other solution than to use the +wktext parameter to 
differentiate both variants, so I won't file a ticket.

Regards,
Jean-Claude

From markus.u.mueller at zoho.com  Mon Jan 17 21:14:06 2011
From: markus.u.mueller at zoho.com (=?ISO-8859-1?Q?=22Dr=2E_Markus_M=FCller=22?=)
Date: Mon Jan 17 21:14:13 2011
Subject: [gdal-dev] Importing and exporting shapefiles in mySQL with OGR
In-Reply-To: <4D3486B9.5060202@gatewaygeomatics.com>
References: <4D33EEEC.6000503@zoho.com> <4D3486B9.5060202@gatewaygeomatics.com>
Message-ID: <4D34F76E.70702@zoho.com>

Frank and Jeff,

thanks to both of you, that did the trick.


Markus


On 18/01/2011 1:13, Jeff McKenna wrote:
> On 11-01-17 3:25 AM, "Dr. Markus M?ller" wrote:
>> Dear listers,
>>
>> I am trying to get shapefiles in and out of a mySQL database using OGR.
>> I found some example commands for importing and succeeded in doing this.
>> But getting the syntax together to get a spatial dataset out of mySQL db
>> seems to be over my head.
>>
>> Can anybody supply an example command to convert from mySQL to shape? Or
>> is it just not possible to export geodata from mySQL into shapefiles
>> using OGR?
>
> The MapServer project includes some good examples of using the ogrinfo 
> utility on mySQL databases: 
> http://www.mapserver.org/input/vector/mysql.html#test-connection-with-ogrinfo 
>
>
> I would start there, then execute the commands that Frank mentions.
>
> -jeff
>
>


From jrepetto at free.fr  Tue Jan 18 02:06:32 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Jan 18 02:06:41 2011
Subject: [gdal-dev] gdal_translate drops overviews
In-Reply-To: <201101141920.26436.even.rouault@mines-paris.org>
References: <4D2F68BD.1090300@free.fr>
	<201101140002.24135.even.rouault@mines-paris.org>
	<4D2FFE36.8090601@free.fr>
	<201101141920.26436.even.rouault@mines-paris.org>
Message-ID: <4D353BF8.8030104@free.fr>

On 01/14/11 19:20, Even Rouault wrote:
>> Thanks for the fix. Now, the overviews are created. But the
>> georeferencing is lost :
>
> Jean-Claude,
>
> This works for me. I get the 9 GCPs and the GCP projection as expected in the
> output GeoTIFF.

After reinstalling the trunk version of GDAL, it is working. I don't 
know what happened previously.

Thanks,
Jean-Claude
From aperezcarro at yahoo.es  Tue Jan 18 05:13:15 2011
From: aperezcarro at yahoo.es (Antonio P)
Date: Tue Jan 18 05:13:17 2011
Subject: [gdal-dev] Newbie... need some tutorials about use gdal 
Message-ID: <004201cbb6f8$52b77310$0a00a8c0@PIV>

Hello everybody:
I have read carefully all the documentation avalaible at gdal web page, but I have not found any tutorial to use gdal in c++.
(neither on the web) 
I dont know if I have to compile a dll or use any avalaible...
 
If anyone can tell me some link  I'll be extremely grateful.
(A basic program to open a simple jpg will be sufficient...)
Thanks Antonio 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/1ad18e0a/attachment.html
From jrepetto at free.fr  Tue Jan 18 05:21:09 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Jan 18 05:50:09 2011
Subject: [gdal-dev] Newbie... need some tutorials about use gdal
In-Reply-To: <004201cbb6f8$52b77310$0a00a8c0@PIV>
References: <004201cbb6f8$52b77310$0a00a8c0@PIV>
Message-ID: <4D356995.10100@free.fr>

Le 18/01/2011 11:13, Antonio P a ?crit :
> Hello everybody:
> I have read carefully all the documentation avalaible at gdal web page,
> but I have not found any tutorial to use gdal in c++.

http://www.gdal.org/gdal_tutorial.html
From gavin at afrispatial.co.za  Tue Jan 18 06:15:11 2011
From: gavin at afrispatial.co.za (Gavin)
Date: Tue Jan 18 06:15:41 2011
Subject: [gdal-dev] gdalwarp EPSG not being applied
Message-ID: <1295349311.31540.680.camel@study>

gdalwarp with -t_srs 'EPSG:3857' produces expected output on one system
but not on another. It seems gdal can't find the projection definition
on System 2 (below). System 2 is the one where I need it to work and
where I ultimately need to publish as 900913 through geoserver.  

What am I missing?

This command was run on both systems (both have gdal 1.7 and proj
4.9.1):

gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=27 +k=1 +x_0=0 +y_0=0
+ellps=WGS84 +datum=WGS84 +units=m +no_defs" -t_srs 'EPSG:3857' -r near
-multi -dstnodata "0 0 0" -dstnodata "0 0 0" -dstalpha -co
COMPRESS="DEFLATE" -co "TILED=YES" -of GTiff
2627BB_05_1117_RGB_RECT.TIF /tmp/test900913.tif

Geotiff header output:

System1 (Ubuntu 10.10):


        Driver: GTiff/GeoTIFF
        Files: /tmp/test.tif
        Size is 10749, 11713
        Coordinate System is:
        PROJCS["WGS 84 / Pseudo-Mercator",
            GEOGCS["WGS 84",
                DATUM["WGS_1984",
                    SPHEROID["WGS 84",6378137,298.257223563,
                        AUTHORITY["EPSG","7030"]],
                    AUTHORITY["EPSG","6326"]],
                PRIMEM["Greenwich",0],
                UNIT["degree",0.0174532925199433],
                AUTHORITY["EPSG","4326"]],
            PROJECTION["Mercator_1SP"],
            PARAMETER["central_meridian",0],
            PARAMETER["scale_factor",1],
            PARAMETER["false_easting",0],
            PARAMETER["false_northing",0],
            AUTHORITY["EPSG","3857"],
            EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137
        +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m
        +nadgrids=@null +wktext  +no_defs"],
            UNIT["metre",1,
                AUTHORITY["EPSG","9001"]]]
        Origin = (3111167.042467535007745,-2998912.428198689594865)
        Pixel Size = (0.557611099232479,-0.557611099232479)
        Metadata:
          AREA_OR_POINT=Area
        Image Structure Metadata:
          COMPRESSION=DEFLATE
          INTERLEAVE=PIXEL
        Corner Coordinates:
        Upper Left  ( 3111167.042,-2998912.428) ( 27d56'53.12"E,
        25d59'55.10"S)
        Lower Left  ( 3111167.042,-3005443.727) ( 27d56'53.12"E, 26d
        3'4.90"S)
        Upper Right ( 3117160.804,-2998912.428) ( 28d 0'6.95"E,
        25d59'55.10"S)
        Lower Right ( 3117160.804,-3005443.727) ( 28d 0'6.95"E, 26d
        3'4.90"S)
        Center      ( 3114163.923,-3002178.078) ( 27d58'30.04"E, 26d
        1'30.01"S)


System 2 (Fedora 10):


        Driver: GTiff/GeoTIFF
        Files: test3857.tif
        Size is 10749, 11713
        Coordinate System is:
        PROJCS["unnamed",
            GEOGCS[,
                DATUM["unknown",
                    SPHEROID["unretrievable - using
        WGS84",6378137,298.257223563]],
                PRIMEM["Greenwich",0],
                UNIT["degree",0.0174532925199433]],
            UNIT["metre",1,
                AUTHORITY["EPSG","9001"]],
            AUTHORITY["EPSG","3857"]]
        Origin = (3111167.042467534542084,-2998912.428198689594865)
        Pixel Size = (0.557611099232459,-0.557611099232459)
        Metadata:
          AREA_OR_POINT=Area
        Image Structure Metadata:
          COMPRESSION=DEFLATE
          INTERLEAVE=PIXEL
        Corner Coordinates:
        Upper Left  ( 3111167.042,-2998912.428) 
        Lower Left  ( 3111167.042,-3005443.727) 
        Upper Right ( 3117160.804,-2998912.428) 
        Lower Right ( 3117160.804,-3005443.727) 
        Center      ( 3114163.923,-3002178.078)



thanks

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/c5920405/attachment.html
From nicolas.simon at spw.wallonie.be  Tue Jan 18 06:21:04 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Tue Jan 18 06:45:22 2011
Subject: [gdal-dev] Newbie... need some tutorials about use gdal
In-Reply-To: <4D356995.10100@free.fr>
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926AA7@DGA-EXC01.mrw.wallonie.int>

Hello,
	Since you're interested in shape file (which is vector format), you should look at 
	http://www.gdal.org/ogr/ogr_apitut.html
 
	Nicolas


> -----Message d'origine-----
> De : gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org]De la part de Jean-Claude
> Repetto
> Envoy? : mardi 18 janvier 2011 11:21
> ? : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] Newbie... need some tutorials about use gdal
> 
> 
> Le 18/01/2011 11:13, Antonio P a ?crit :
> > Hello everybody:
> > I have read carefully all the documentation avalaible at 
> gdal web page,
> > but I have not found any tutorial to use gdal in c++.
> 
> http://www.gdal.org/gdal_tutorial.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 


From massimo.costantini at gmail.com  Tue Jan 18 08:24:27 2011
From: massimo.costantini at gmail.com (massimo costantini)
Date: Tue Jan 18 08:24:29 2011
Subject: [gdal-dev] Problem with ogrinfo and KML files
Message-ID: <AANLkTint2qoXj52fy8yokDKfYzqi5ALh7rorQo_JHCXg@mail.gmail.com>

Hi,
I've try to analize KML files with ogrinfo but it seems to not
recognize the format. Gdal is compiled with expat support.
Someone can tell me the reason and the solution for this problem?

thanks

Massimo Costantini
From chaitanya.ch at gmail.com  Tue Jan 18 08:36:20 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 18 08:42:00 2011
Subject: [gdal-dev] Problem with ogrinfo and KML files
In-Reply-To: <AANLkTint2qoXj52fy8yokDKfYzqi5ALh7rorQo_JHCXg@mail.gmail.com>
References: <AANLkTint2qoXj52fy8yokDKfYzqi5ALh7rorQo_JHCXg@mail.gmail.com>
Message-ID: <AANLkTi=7-99DF0hUejOfT3uYLHyG9PYF7UOz7be8TTAR@mail.gmail.com>

Massimo,

Do you see KML in the list of formats shown when you run the command
"ogrinfo --formats"?
What was the error message you got? Can you provide a sample file?

On Tue, Jan 18, 2011 at 6:54 PM, massimo costantini <
massimo.costantini@gmail.com> wrote:

> Hi,
> I've try to analize KML files with ogrinfo but it seems to not
> recognize the format. Gdal is compiled with expat support.
> Someone can tell me the reason and the solution for this problem?
>
> thanks
>
> Massimo Costantini
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/5a9e74c4/attachment.html
From aperezcarro at yahoo.es  Tue Jan 18 08:42:50 2011
From: aperezcarro at yahoo.es (Antonio P)
Date: Tue Jan 18 08:44:59 2011
Subject: [gdal-dev] Newbie... need some tutorials about use gdal
References: <8C7DAE7B21100F4CABDD600FAAD339D005926AA7@DGA-EXC01.mrw.wallonie.int>
Message-ID: <002501cbb715$99d795f0$0a00a8c0@PIV>

Thanks-
When I said "I have not found any tutorial to use gdal in c++." I wanted to 
say :
I don't  know nothing about which elements of Gdal have I to download, 
use,etc .
There is a general dll for windows platform? statically ? dinamycally? and 
the sources ? Must I use them ?
I'm totally lost (also i'm begginer using c++) and sincerely I dont know how 
to start.

A extended 'Hello world' for gdal  may be very useful....
Today is typical to find tutorials for almost everything....from begginer to 
advanced...
Keep on needing help ...
Antonio





----- Original Message ----- 
From: "Nicolas Simon" <nicolas.simon@spw.wallonie.be>
To: <gdal-dev@lists.osgeo.org>
Sent: Tuesday, January 18, 2011 12:21 PM
Subject: RE: [gdal-dev] Newbie... need some tutorials about use gdal


Hello,
Since you're interested in shape file (which is vector format), you should 
look at
http://www.gdal.org/ogr/ogr_apitut.html

Nicolas


> -----Message d'origine-----
> De : gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org]De la part de Jean-Claude
> Repetto
> Envoy? : mardi 18 janvier 2011 11:21
> ? : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] Newbie... need some tutorials about use gdal
>
>
> Le 18/01/2011 11:13, Antonio P a ?crit :
> > Hello everybody:
> > I have read carefully all the documentation avalaible at
> gdal web page,
> > but I have not found any tutorial to use gdal in c++.
>
> http://www.gdal.org/gdal_tutorial.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

From massimo.costantini at gmail.com  Tue Jan 18 08:45:58 2011
From: massimo.costantini at gmail.com (massimo costantini)
Date: Tue Jan 18 08:45:59 2011
Subject: [gdal-dev] Problem with ogrinfo and KML files
In-Reply-To: <AANLkTi=7-99DF0hUejOfT3uYLHyG9PYF7UOz7be8TTAR@mail.gmail.com>
References: <AANLkTint2qoXj52fy8yokDKfYzqi5ALh7rorQo_JHCXg@mail.gmail.com>
	<AANLkTi=7-99DF0hUejOfT3uYLHyG9PYF7UOz7be8TTAR@mail.gmail.com>
Message-ID: <AANLkTimZXXc+Lj5aJ322EhXgCk50VK2U=xi8Gj4nLkAn@mail.gmail.com>

KML is in the list of supported formats.

the error is:
Unable to open datasource `comuni2001.kml' with the following drivers.
...
-> KML
...

i tryed on this:

<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Paths</name>
    <description>Examples of paths. Note that the tessellate tag is by default
      set to 0. If you want to create tessellated lines, they must be authored
      (or edited) directly in KML.</description>
    <Style id="yellowLineGreenPoly">
      <LineStyle>
        <color>7f00ffff</color>
        <width>4</width>
      </LineStyle>
      <PolyStyle>
        <color>7f00ff00</color>
      </PolyStyle>
    </Style>
    <Placemark>
      <name>Absolute Extruded</name>
      <description>Transparent green wall with yellow outlines</description>
      <styleUrl>#yellowLineGreenPoly</styleUrl>
      <LineString>
        <extrude>1</extrude>
        <tessellate>1</tessellate>
        <altitudeMode>absolute</altitudeMode>
        <coordinates> -112.2550785337791,36.07954952145647,2357
          -112.2549277039738,36.08117083492122,2357
          -112.2552505069063,36.08260761307279,2357
          -112.2564540158376,36.08395660588506,2357
          -112.2580238976449,36.08511401044813,2357
          -112.2595218489022,36.08584355239394,2357
          -112.2608216347552,36.08612634548589,2357
          -112.262073428656,36.08626019085147,2357
          -112.2633204928495,36.08621519860091,2357
          -112.2644963846444,36.08627897945274,2357
          -112.2656969554589,36.08649599090644,2357
        </coordinates>
      </LineString>
    </Placemark>
  </Document>
</kml>

and on a KML file created by ogr2ogr from a shape file

On Tue, Jan 18, 2011 at 2:36 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Massimo,
>
> Do you see KML in the list of formats shown when you run the command
> "ogrinfo --formats"?
> What was the error message you got? Can you provide a sample file?
>
> On Tue, Jan 18, 2011 at 6:54 PM, massimo costantini
> <massimo.costantini@gmail.com> wrote:
>>
>> Hi,
>> I've try to analize KML files with ogrinfo but it seems to not
>> recognize the format. Gdal is compiled with expat support.
>> Someone can tell me the reason and the solution for this problem?
>>
>> thanks
>>
>> Massimo Costantini
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From jmckenna at gatewaygeomatics.com  Tue Jan 18 09:12:35 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jan 18 09:12:39 2011
Subject: [gdal-dev] support for libpng 1.5.0
In-Reply-To: <002d01cbb5fc$85f827d0$91e87770$@org>
References: <002d01cbb5fc$85f827d0$91e87770$@org>
Message-ID: <4D359FD3.5020709@gatewaygeomatics.com>

Hi Ben,

A few weeks ago I also had troubles compiling gdal-trunk with 
libpng-1.5.0 on Windows and decided against upgrading my libpng...so I 
am also curious to know if that version of libpng is supported by GDAL yet.

-jeff

-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




On 11-01-17 12:10 AM, Ben Discoe wrote:
> I tried building GDAL 1.7.3 this evening and found that it did not support the new libpng 1.5.0.
> I also looked at the archive for GDAL 1.8.0 RC2, and it seems to have the same code in question.
>
> The changes are small, just a few like this:
>
> <     VSIFFlushL( (png_FILE_p) png_get_io_ptr(png_ptr->io_ptr) );
>>     VSIFFlushL( (png_FILE_p) png_get_io_ptr(png_ptr) );
>
> And one like this:
>
> <     jmp_buf* psSetJmpContext = (jmp_buf*) png_ptr->error_ptr;
>>     jmp_buf* psSetJmpContext = (jmp_buf*) png_get_error_ptr(png_ptr);
>
> On a personal note, it feels good to be back here again, building GDAL.  I started with GDAL back at the dawn of time, mid-2000, and it's been a long, happy relationship.

From warmerdam at pobox.com  Tue Jan 18 10:03:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 18 10:03:23 2011
Subject: [gdal-dev] support for libpng 1.5.0
In-Reply-To: <4D359FD3.5020709@gatewaygeomatics.com>
References: <002d01cbb5fc$85f827d0$91e87770$@org>
	<4D359FD3.5020709@gatewaygeomatics.com>
Message-ID: <4D35ABB7.9080000@pobox.com>

On 11-01-18 09:12 AM, Jeff McKenna wrote:
> Hi Ben,
>
> A few weeks ago I also had troubles compiling gdal-trunk with libpng-1.5.0 on
> Windows and decided against upgrading my libpng...so I am also curious to know
> if that version of libpng is supported by GDAL yet.

Ben / Jeff,

Even has corrected this and created a ticket on the issue:

   http://trac.osgeo.org/gdal/ticket/3914

Note that it is not corrected in GDAL/OGR 1.5.0 RC2, currently up for
adoption as 1.8.0 final.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jormarfe at gmail.com  Tue Jan 18 11:28:26 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Tue Jan 18 11:28:59 2011
Subject: [gdal-dev] Create a shape file with polygons
In-Reply-To: <B101402B-F773-4D2F-AA90-715F8B5BE9D1@gmail.com>
References: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
	<AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>
	<B101402B-F773-4D2F-AA90-715F8B5BE9D1@gmail.com>
Message-ID: <AANLkTikzVS6zQUn0bOztdPEL7msnynkpnD5f_y7-mvmV@mail.gmail.com>

Hello,

I've tried to develope the program that create a shape file with polygons.
But the GIS open the shp but there is nothing inside only the attributes,
not the polygons. I have the code from Python but I do not know the problem.

Here I paste the code:

int write_shapefilePolygon() {


const char *pszDriverName = "ESRI Shapefile";
OGRSFDriver *poDriver;

OGRRegisterAll();

poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszDriverName);

if( poDriver == NULL )
{
 printf( "%s driver not available.\n", pszDriverName );
exit( 1 );
 }

OGRDataSource *poDS;

poDS = poDriver->CreateDataSource( "Polygon.shp", NULL );

       if( poDS == NULL )
{
 printf( "Creation of output file failed.\n" );
exit( 1 );
 }

OGRLayer *poLayer;

 poLayer = poDS->CreateLayer( "countries", NULL, wkbPolygon, NULL );

          if( poLayer == NULL )
 {
printf( "Layer creation failed.\n" );
exit( 1 );
}

OGRFieldDefn oField( "Name", OFTString );

oField.SetWidth(32);

 if( poLayer->CreateField( &oField ) != OGRERR_NONE )
        {
printf( "Creating Name field failed.\n" );
 exit( 1 );
}

double x, y;
string szName;


 char Line[4000];
char *tmp;


 ifstream infile ("/home/jjmf/Desktop/Shape
files/polygon/ospy_data2/ut_counties.txt", ifstream::in);

while(infile.getline(Line,4000))
 {

 OGRPolygon myPoligon;

tmp = strtok (Line, ":");

szName = string (tmp);


       while (tmp != NULL)
           {


       OGRLinearRing MyRing;// = (OGRLinearRing*)
OGRGeometryFactory::createGeometry(wkbLinearRing);

        tmp = strtok (NULL, ",");

        if(tmp)
        {

               string Coords = string(tmp);

              size_t pos = Coords.find(" ");

              string CoordX = Coords.substr(0,pos);
              string CoordY = Coords.substr(pos);

              x = atof(CoordX.c_str());
               y = atof(CoordY.c_str());

MyRing.addPoint(x,y);


        }

        myPoligon.addRing(&MyRing);

    }

    OGRFeature *poFeature;



      poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );


       poFeature->SetField( "Name", szName.c_str() );


      poFeature->SetGeometry(&myPoligon);


       if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
       {
     printf( "Failed to create feature in shapefile.\n" );
     exit( 1 );
        }

        OGRFeature::DestroyFeature( poFeature );
  }

OGRDataSource::DestroyDataSource( poDS );



 infile.close();

 exit( 0 );



}




Thanks,

Jorge
2011/1/17 Jorge <jormarfe@gmail.com>

> Hi,
>
> Thank you very much in advance. I am developing with C++, but I will try to
> understand the code. I think it will easy.
>
> Thank you.
>
> Jorge
>
> El 17/01/2011, a las 18:18, Paolo Corti <pcorti@gmail.com> escribi?:
>
> >> I`m new developing software with GDAL and OGR libraries. I has used the
> code
> >> from the OGR web that read and write a shapefile (points). What I really
> >> want is to read and write shapefiles with polygons.
> >
> > Hi Jorge
> > if you are using Python this [0] is the best resource out there.
> > Look at the sample in week 2 of the tutorial for effectively writing
> > (and reading) a Polygon shapefile.
> > If you are not using Python you should not have too much problems for
> > converting the Python code to the language you are using.
> > Another very good resource is to look at the source code: again,
> > supposing that you are using Python, this sample [1] should work for
> > you
> >
> > ciao
> > P
> >
> > [0] http://www.gis.usu.edu/~chrisg/python/2009/
> > [1]
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/assemblepoly.py
> >
> > --
> > Paolo Corti
> > GIS specialist and web developer
> > web: http://www.paolocorti.net
> > twitter: @paolo_corti
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/af84b322/attachment-0001.html
From ksshannon at gmail.com  Tue Jan 18 12:06:34 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Jan 18 12:06:52 2011
Subject: [gdal-dev] gdalwarp EPSG not being applied
In-Reply-To: <1295349311.31540.680.camel@study>
References: <1295349311.31540.680.camel@study>
Message-ID: <AANLkTinrcbufjF5VvFNFWqS47hGHL70-806wXc8t+Xq3@mail.gmail.com>

Gavin,
Is GDAL_DATA environment variable set on the Fedora system?

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Tue, Jan 18, 2011 at 04:15, Gavin <gavin@afrispatial.co.za> wrote:

>  gdalwarp with -t_srs 'EPSG:3857' produces expected output on one system
> but not on another. It seems gdal can't find the projection definition on
> System 2 (below). System 2 is the one where I need it to work and where I
> ultimately need to publish as 900913 through geoserver.
>
> What am I missing?
>
> This command was run on both systems (both have gdal 1.7 and proj 4.9.1):
>
> gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=27 +k=1 +x_0=0 +y_0=0
> +ellps=WGS84 +datum=WGS84 +units=m +no_defs" -t_srs 'EPSG:3857' -r near
> -multi -dstnodata "0 0 0" -dstnodata "0 0 0" -dstalpha -co
> COMPRESS="DEFLATE" -co "TILED=YES" -of GTiff 2627BB_05_1117_RGB_RECT.TIF
> /tmp/test900913.tif
>
> Geotiff header output:
>
> System1 (Ubuntu 10.10):
>
>  Driver: GTiff/GeoTIFF
> Files: /tmp/test.tif
> Size is 10749, 11713
> Coordinate System is:
> PROJCS["WGS 84 / Pseudo-Mercator",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     AUTHORITY["EPSG","3857"],
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
> +no_defs"],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Origin = (3111167.042467535007745,-2998912.428198689594865)
> Pixel Size = (0.557611099232479,-0.557611099232479)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=DEFLATE
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 3111167.042,-2998912.428) ( 27d56'53.12"E, 25d59'55.10"S)
> Lower Left  ( 3111167.042,-3005443.727) ( 27d56'53.12"E, 26d 3'4.90"S)
> Upper Right ( 3117160.804,-2998912.428) ( 28d 0'6.95"E, 25d59'55.10"S)
> Lower Right ( 3117160.804,-3005443.727) ( 28d 0'6.95"E, 26d 3'4.90"S)
> Center      ( 3114163.923,-3002178.078) ( 27d58'30.04"E, 26d 1'30.01"S)
>
>
> System 2 (Fedora 10):
>
>  Driver: GTiff/GeoTIFF
> Files: test3857.tif
> Size is 10749, 11713
> Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS[,
>         DATUM["unknown",
>             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3857"]]
> Origin = (3111167.042467534542084,-2998912.428198689594865)
> Pixel Size = (0.557611099232459,-0.557611099232459)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=DEFLATE
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 3111167.042,-2998912.428)
> Lower Left  ( 3111167.042,-3005443.727)
> Upper Right ( 3117160.804,-2998912.428)
> Lower Right ( 3117160.804,-3005443.727)
> Center      ( 3114163.923,-3002178.078)
>
>
>
> thanks
>
> Gavin
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/2188d40b/attachment.html
From chaitanya.ch at gmail.com  Tue Jan 18 12:09:06 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 18 12:09:08 2011
Subject: [gdal-dev] Problem with ogrinfo and KML files
In-Reply-To: <AANLkTimZXXc+Lj5aJ322EhXgCk50VK2U=xi8Gj4nLkAn@mail.gmail.com>
References: <AANLkTint2qoXj52fy8yokDKfYzqi5ALh7rorQo_JHCXg@mail.gmail.com>
	<AANLkTi=7-99DF0hUejOfT3uYLHyG9PYF7UOz7be8TTAR@mail.gmail.com>
	<AANLkTimZXXc+Lj5aJ322EhXgCk50VK2U=xi8Gj4nLkAn@mail.gmail.com>
Message-ID: <AANLkTik14B4ivDZLJ3ojixHkvXoFUzGS9Fd_tx_YLC=V@mail.gmail.com>

Massimo,

Check if your configure script recognised the expat library.
This is what I got for "ogrinfo -al -so a.kml":
Had to open data source read-only.
INFO: Open of `a.kml'
      using driver `KML' successful.

Layer name: Paths
Geometry: 3D Line String
Feature Count: 1
Extent: (-112.265697, 36.079550) - (-112.254928, 36.086496)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Name: String (0.0)
Description: String (0.0)


On Tue, Jan 18, 2011 at 7:15 PM, massimo costantini <
massimo.costantini@gmail.com> wrote:

> KML is in the list of supported formats.
>
> the error is:
> Unable to open datasource `comuni2001.kml' with the following drivers.
> ...
> -> KML
> ...
>
> i tryed on this:
>
> <?xml version="1.0" encoding="UTF-8"?>
> <kml xmlns="http://www.opengis.net/kml/2.2">
>  <Document>
>    <name>Paths</name>
>


>      </LineString>
>    </Placemark>
>  </Document>
> </kml>
>
> and on a KML file created by ogr2ogr from a shape file
>
> On Tue, Jan 18, 2011 at 2:36 PM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
> > Massimo,
> >
> > Do you see KML in the list of formats shown when you run the command
> > "ogrinfo --formats"?
> > What was the error message you got? Can you provide a sample file?
> >
> > On Tue, Jan 18, 2011 at 6:54 PM, massimo costantini
> > <massimo.costantini@gmail.com> wrote:
> >>
> >> Hi,
> >> I've try to analize KML files with ogrinfo but it seems to not
> >> recognize the format. Gdal is compiled with expat support.
> >> Someone can tell me the reason and the solution for this problem?
> >>
> >> thanks
> >>
> >> Massimo Costantini
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/d9ae7e37/attachment.html
From warmerdam at pobox.com  Tue Jan 18 12:10:59 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 18 12:11:02 2011
Subject: [gdal-dev] Create a shape file with polygons
In-Reply-To: <AANLkTikzVS6zQUn0bOztdPEL7msnynkpnD5f_y7-mvmV@mail.gmail.com>
References: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
	<AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>
	<B101402B-F773-4D2F-AA90-715F8B5BE9D1@gmail.com>
	<AANLkTikzVS6zQUn0bOztdPEL7msnynkpnD5f_y7-mvmV@mail.gmail.com>
Message-ID: <4D35C9A3.4050502@pobox.com>

On 11-01-18 11:28 AM, Jorge Martin wrote:
> OGRPolygon myPoligon;
>
> tmp = strtok (Line, ":");
>
> szName = string (tmp);
>
>
>         while (tmp != NULL)
>             {
>
>         OGRLinearRing MyRing;// = (OGRLinearRing*)
> OGRGeometryFactory::createGeometry(wkbLinearRing);
>
>          tmp = strtok (NULL, ",");
>
>          if(tmp)
>          {
>
>                 string Coords = string(tmp);
>
>                size_t pos = Coords.find(" ");
>
>                string CoordX = Coords.substr(0,pos);
>                string CoordY = Coords.substr(pos);
>
>                x = atof(CoordX.c_str());
>                 y = atof(CoordY.c_str());
>
> MyRing.addPoint(x,y);
>
>
>          }
>
>          myPoligon.addRing(&MyRing);
>
>      }

Jorge,

The essence of your problem is that you are creating a new
ring for each point instead of creating one ring for the
polygon and adding all the points to that ring before adding
the ring to the polygon.  A slightly altered form of the core
that works looks like:

         OGRPolygon myPoligon;
         OGRLinearRing MyRing;// = (OGRLinearRing*)

         tmp = strtok (Line, ":");
         szName = string (tmp);
         while (tmp != NULL)
         {
             OGRGeometryFactory::createGeometry(wkbLinearRing);

             tmp = strtok (NULL, ",");

             if(tmp)
             {
                 string Coords = string(tmp);

                 size_t pos = Coords.find(" ");

                 string CoordX = Coords.substr(0,pos);
                 string CoordY = Coords.substr(pos);

                 x = atof(CoordX.c_str());
                 y = atof(CoordY.c_str());

                 MyRing.addPoint(x,y);
             }
         }

         myPoligon.addRing(&MyRing);

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gavin at afrispatial.co.za  Tue Jan 18 13:45:31 2011
From: gavin at afrispatial.co.za (Gavin)
Date: Tue Jan 18 13:46:07 2011
Subject: [gdal-dev] gdalwarp EPSG not being applied
In-Reply-To: <AANLkTinrcbufjF5VvFNFWqS47hGHL70-806wXc8t+Xq3@mail.gmail.com>
References: <1295349311.31540.680.camel@study>
	<AANLkTinrcbufjF5VvFNFWqS47hGHL70-806wXc8t+Xq3@mail.gmail.com>
Message-ID: <1295376331.31540.1400.camel@study>



On Tue, 2011-01-18 at 10:06 -0700, Kyle Shannon wrote:

> Gavin,
> Is GDAL_DATA environment variable set on the Fedora system?


yip: GDAL_DATA=/opt/gdal_data


> 
> 
> 
> On Tue, Jan 18, 2011 at 04:15, Gavin <gavin@afrispatial.co.za> wrote:
> 
>         gdalwarp with -t_srs 'EPSG:3857' produces expected output on
>         one system but not on another. It seems gdal can't find the
>         projection definition on System 2 (below). System 2 is the one
>         where I need it to work and where I ultimately need to publish
>         as 900913 through geoserver.  
>         
>         What am I missing?
>         
>         This command was run on both systems (both have gdal 1.7 and
>         proj 4.9.1):
>         
>         gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=27 +k=1 +x_0=0
>         +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs" -t_srs
>         'EPSG:3857' -r near -multi -dstnodata "0 0 0" -dstnodata "0 0
>         0" -dstalpha -co COMPRESS="DEFLATE" -co "TILED=YES" -of GTiff
>         2627BB_05_1117_RGB_RECT.TIF /tmp/test900913.tif
>         
>         Geotiff header output:
>         
>         System1 (Ubuntu 10.10):
>         
>         
>                 Driver: GTiff/GeoTIFF
>                 Files: /tmp/test.tif
>                 Size is 10749, 11713
>                 Coordinate System is:
>                 PROJCS["WGS 84 / Pseudo-Mercator",
>                     GEOGCS["WGS 84",
>                         DATUM["WGS_1984",
>                             SPHEROID["WGS 84",6378137,298.257223563,
>                                 AUTHORITY["EPSG","7030"]],
>                             AUTHORITY["EPSG","6326"]],
>                         PRIMEM["Greenwich",0],
>                         UNIT["degree",0.0174532925199433],
>                         AUTHORITY["EPSG","4326"]],
>                     PROJECTION["Mercator_1SP"],
>                     PARAMETER["central_meridian",0],
>                     PARAMETER["scale_factor",1],
>                     PARAMETER["false_easting",0],
>                     PARAMETER["false_northing",0],
>                     AUTHORITY["EPSG","3857"],
>                     EXTENSION["PROJ4","+proj=merc +a=6378137
>                 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0
>                 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],
>                     UNIT["metre",1,
>                         AUTHORITY["EPSG","9001"]]]
>                 Origin =
>                 (3111167.042467535007745,-2998912.428198689594865)
>                 Pixel Size = (0.557611099232479,-0.557611099232479)
>                 Metadata:
>                   AREA_OR_POINT=Area
>                 Image Structure Metadata:
>                   COMPRESSION=DEFLATE
>                   INTERLEAVE=PIXEL
>                 Corner Coordinates:
>                 Upper Left  ( 3111167.042,-2998912.428)
>                 ( 27d56'53.12"E, 25d59'55.10"S)
>                 Lower Left  ( 3111167.042,-3005443.727)
>                 ( 27d56'53.12"E, 26d 3'4.90"S)
>                 Upper Right ( 3117160.804,-2998912.428) ( 28d
>                 0'6.95"E, 25d59'55.10"S)
>                 Lower Right ( 3117160.804,-3005443.727) ( 28d
>                 0'6.95"E, 26d 3'4.90"S)
>                 Center      ( 3114163.923,-3002178.078)
>                 ( 27d58'30.04"E, 26d 1'30.01"S)
>         
>         
>         System 2 (Fedora 10):
>         
>         
>                 Driver: GTiff/GeoTIFF
>                 Files: test3857.tif
>                 Size is 10749, 11713
>                 Coordinate System is:
>                 PROJCS["unnamed",
>                     GEOGCS[,
>                         DATUM["unknown",
>                             SPHEROID["unretrievable - using
>                 WGS84",6378137,298.257223563]],
>                         PRIMEM["Greenwich",0],
>                         UNIT["degree",0.0174532925199433]],
>                     UNIT["metre",1,
>                         AUTHORITY["EPSG","9001"]],
>                     AUTHORITY["EPSG","3857"]]
>                 Origin =
>                 (3111167.042467534542084,-2998912.428198689594865)
>                 Pixel Size = (0.557611099232459,-0.557611099232459)
>                 Metadata:
>                   AREA_OR_POINT=Area
>                 Image Structure Metadata:
>                   COMPRESSION=DEFLATE
>                   INTERLEAVE=PIXEL
>                 Corner Coordinates:
>                 Upper Left  ( 3111167.042,-2998912.428) 
>                 Lower Left  ( 3111167.042,-3005443.727) 
>                 Upper Right ( 3117160.804,-2998912.428) 
>                 Lower Right ( 3117160.804,-3005443.727) 
>                 Center      ( 3114163.923,-3002178.078)
>         
>         
>         
>         thanks
>         
>         Gavin
>         
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/03eda5fb/attachment-0001.html
From sritchie09 at gmail.com  Tue Jan 18 14:20:05 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Tue Jan 18 14:20:28 2011
Subject: [gdal-dev] GDAL Java Bindings and HDF4 File format
Message-ID: <AANLkTimUh90mdEUorRee2dXrGj-Y2kPV8UCX3mAwg7hB@mail.gmail.com>

Hey all,

Short question first, then the longer explanation.

*QUESTION*: My java SWIG bindings, generated from source, can't read the
HDF4 format. How can I fix this?

*CONTEXT*:
I've spent the last couple of days trying to generate java bindings for gdal
that will allow me, essentially, to run this piece of java code --

https://svn.osgeo.org/fdo/tags/3.4_G032/Thirdparty/gdal/swig/java/apps/gdalinfo.java

gdal.AllRegister() works great, but I can't get past gdal.Open(), as the
bindings don't recognize HDF4.

My final goal is to create a maven package that has gdal.java and the native
dependencies bundled up together. This way, I can run jobs on NASA's MODIS
tiles on Elastic MapReduce, simply by making sure the MapReduce nodes have
gdal and hdf4 installed locally (using apt-get gdal-lib).

I built from source, using ./configure --with-hdf4=/opt/local/
--with-hdf5=/opt/local/ (macports versions). I CDed into swig, ran make,
then CDed into java, and ran make again. This gave me gdal.java, plus all of
the native dependencies as dylibs, which I moved to a directory on
java.library.path.

I wrote this piece of code to test my setup: https://gist.github.com/784850

Now, that code, as it runs now, returns this-  "(my file path)

It doesn't recognize the HDF file, even though I specified --with-hdf4.

*So, my question is,* *what special things do I need to do to get make java
swig-bindings to recognize these damn formats?* Do I have to specify
something about swig when I run ./configure initially? (BTW, I'm running on
Mac OS X, and also had to tweak the java path settings inside java.opt.

ALL I need to be able to do, really, is open up the hdf file and extract the
subdatasets. I plan on writing an article describing how to run GDAL on
Amazon's Elastic MapReduce, after I'm done with all of this stuff.

Thanks in advance, everyone!

---
Sam Ritchie
Forest Monitoring for Action
http://www.cgdev.org/section/initiatives/_active/forestmonitoringforactionforma
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/3f2f61a7/attachment.html
From warmerdam at pobox.com  Tue Jan 18 14:35:13 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 18 14:35:18 2011
Subject: [gdal-dev] gdalwarp EPSG not being applied
In-Reply-To: <1295376331.31540.1400.camel@study>
References: <1295349311.31540.680.camel@study>
	<AANLkTinrcbufjF5VvFNFWqS47hGHL70-806wXc8t+Xq3@mail.gmail.com>
	<1295376331.31540.1400.camel@study>
Message-ID: <4D35EB71.1000104@pobox.com>

On 11-01-18 01:45 PM, Gavin wrote:
>
>
> On Tue, 2011-01-18 at 10:06 -0700, Kyle Shannon wrote:
..
>>     System 2 (Fedora 10):
>>
>>         Driver: GTiff/GeoTIFF
>>         Files: test3857.tif
>>         Size is 10749, 11713
>>         Coordinate System is:
>>         PROJCS["unnamed",
>>         GEOGCS[,
>>         DATUM["unknown",
>>         SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>>         PRIMEM["Greenwich",0],
>>         UNIT["degree",0.0174532925199433]],
>>         UNIT["metre",1,
>>         AUTHORITY["EPSG","9001"]],
>>         AUTHORITY["EPSG","3857"]]
>>         Origin = (3111167.042467534542084,-2998912.428198689594865)

Gavin,

This problem really does sound like some supporting data files not being
found.  For GeoTIFF it can also be important that the GeoTIFF csv files
be findable.  They are usually in /usr/local/share/epsg_csv and can be
placed elsewhere as long as the GEOTIFF_CSV environment points to them.

Also, in some cases GDAL will fallback to using the PROJ.4 init files
for definitions, found via the PROJ_LIB environment variable if they are
not in /usr/local/share/proj.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Jan 18 14:37:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 18 14:37:55 2011
Subject: [gdal-dev] GDAL Java Bindings and HDF4 File format
In-Reply-To: <AANLkTimUh90mdEUorRee2dXrGj-Y2kPV8UCX3mAwg7hB@mail.gmail.com>
References: <AANLkTimUh90mdEUorRee2dXrGj-Y2kPV8UCX3mAwg7hB@mail.gmail.com>
Message-ID: <201101182037.55143.even.rouault@mines-paris.org>

Le mardi 18 janvier 2011 20:20:05, Sam Ritchie a ?crit :
> Hey all,
> 
> Short question first, then the longer explanation.
> 
> *QUESTION*: My java SWIG bindings, generated from source, can't read the
> HDF4 format. How can I fix this?

Sam,

The fact that you can't read HDF4 files is very likely unrelated with the use 
of the Java bindings. You should concentrate on making GDAL standard command 
line utilities, such as gdalinfo, to recognize your HDF4 file first.

Does gdalinfo --format HDF4 returns something like :

Format Details:
  Short Name: HDF4
  Long Name: Hierarchical Data Format Release 4
  Help Topic: frmt_hdf4.html

This would be a sign that your GDAL build is correctly configured.

If so, you can try "gdalinfo yourfile.hdf". If it works, you can then move on 
the Java side. If not, well, you've got a file that isn't handled by the HDF4 
driver and this would probably deserve a Trac ticket with a link to it.

I'd node that https://svn.osgeo.org/fdo/tags/3.4_G032/Thirdparty/gdal isn't 
the official repository of GDAL. It looks like an import of GDAL 1.6.0 made by 
the FDO project. I'd encourage you migrating to GDAL 1.7.3 or the soon-to-be-
released GDAL 1.8.0 as many bugfixing occured in the Java bindings starting 
with GDAL 1.7.0.

Best regards,

Even
From sritchie09 at gmail.com  Tue Jan 18 14:48:32 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Tue Jan 18 14:48:56 2011
Subject: [gdal-dev] GDAL Java Bindings and HDF4 File format
In-Reply-To: <201101182037.55143.even.rouault@mines-paris.org>
References: <AANLkTimUh90mdEUorRee2dXrGj-Y2kPV8UCX3mAwg7hB@mail.gmail.com>
	<201101182037.55143.even.rouault@mines-paris.org>
Message-ID: <AANLkTinCOkT8rxq6kRRxF8swpCuuzCDv1AFc3oAw82B0@mail.gmail.com>

Even, great point, and of course this makes sense, as the java bindings
simply refer to these other libraries. My other reply explains what should
have been my initial question, I suppose.

Going off of my other answer, now -- am I correct in assuming that if I
build the source on a linux instance with "./configure
--with-hdf4=(hdf4path) --with-hdf5=(hdf5path)", and generate the native
dependencies from that source code, I can rely on the java bindings working
for any machine where the hdf4 and hdf5 libraries sit at the same path? This
would probably work great, and would allow me to post the results for anyone
interested, as it wouldn't be so coupled to my particular system.

Also, point taken about that java file I linked to. I've just realized that
the swig/java/apps/gdalinfo.java is more up to date. I really only needed to
copy that file up until the Open() step, just to make sure that was all
working fine.

I can now read HDF4 locally; the next step is to think about a package that
I can deploy on EMR. The reason for this is that I'd like to be able to run
a single jar file for my whole MapReduce flow. This requires me to keep the
dependencies for that jar quite minimal -- I can't bundle up gdal, but if I
can at least bundle the bindings, and their native dependencies for each
architecture, then I should be able to release this tool to the community.

On Tue, Jan 18, 2011 at 2:37 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mardi 18 janvier 2011 20:20:05, Sam Ritchie a ?crit :
> > Hey all,
> >
> > Short question first, then the longer explanation.
> >
> > *QUESTION*: My java SWIG bindings, generated from source, can't read the
> > HDF4 format. How can I fix this?
>
> Sam,
>
> The fact that you can't read HDF4 files is very likely unrelated with the
> use
> of the Java bindings. You should concentrate on making GDAL standard
> command
> line utilities, such as gdalinfo, to recognize your HDF4 file first.
>
> Does gdalinfo --format HDF4 returns something like :
>
> Format Details:
>  Short Name: HDF4
>  Long Name: Hierarchical Data Format Release 4
>  Help Topic: frmt_hdf4.html
>
> This would be a sign that your GDAL build is correctly configured.
>
> If so, you can try "gdalinfo yourfile.hdf". If it works, you can then move
> on
> the Java side. If not, well, you've got a file that isn't handled by the
> HDF4
> driver and this would probably deserve a Trac ticket with a link to it.
>
> I'd node that https://svn.osgeo.org/fdo/tags/3.4_G032/Thirdparty/gdalisn't
> the official repository of GDAL. It looks like an import of GDAL 1.6.0 made
> by
> the FDO project. I'd encourage you migrating to GDAL 1.7.3 or the
> soon-to-be-
> released GDAL 1.8.0 as many bugfixing occured in the Java bindings starting
> with GDAL 1.7.0.
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/79419c59/attachment.html
From sritchie09 at gmail.com  Tue Jan 18 14:53:38 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Tue Jan 18 14:54:00 2011
Subject: [gdal-dev] Generating GDAL Native Dependencies
Message-ID: <AANLkTi=Y39PWRt887dVkj7uKmPbsy88oVsd2QOesro5k@mail.gmail.com>

One final question, moved to its own thread.

Is there a simple way to generate GDAL's native java dependencies
(libgdalconstjni.*, libgdaljni.*, libogrjni.*, libosrjni.*, where * depends
on the architecture) without having to build the rest of the gdal source
code? I'm going to dig around the source code myself, of course, but it
would be quite handy if one could build these native dependencies for other
architectures.

Are they available, for the compiled binary of gdal? Or is the only solution
really to build the source code with all relevant options, and then make
inside swig, then make in java?

Thanks so much, all,
Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/02997052/attachment.html
From even.rouault at mines-paris.org  Tue Jan 18 15:00:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 18 15:00:11 2011
Subject: [gdal-dev] Generating GDAL Native Dependencies
In-Reply-To: <AANLkTi=Y39PWRt887dVkj7uKmPbsy88oVsd2QOesro5k@mail.gmail.com>
References: <AANLkTi=Y39PWRt887dVkj7uKmPbsy88oVsd2QOesro5k@mail.gmail.com>
Message-ID: <201101182100.11889.even.rouault@mines-paris.org>

Le mardi 18 janvier 2011 20:53:38, Sam Ritchie a ?crit :
> One final question, moved to its own thread.
> 
> Is there a simple way to generate GDAL's native java dependencies
> (libgdalconstjni.*, libgdaljni.*, libogrjni.*, libosrjni.*, where * depends
> on the architecture) without having to build the rest of the gdal source
> code? I'm going to dig around the source code myself, of course, but it
> would be quite handy if one could build these native dependencies for other
> architectures.

I don't think it is possible. The libgdaljni.so/dylib/dll and the 3 other 
bindings libraries link to libgdal.so/dylib/dll, so you probably need to 
rebuild the whole GDAL library the and Java bindings for each architecture you 
want to target.
From nhatzop at gmail.com  Tue Jan 18 19:33:43 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Jan 18 19:33:44 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
Message-ID: <AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>

You are right, I notice that there isn't any difference from the
band_1.tiff and band_1_warp.tiff

--Nikos Hatzopoulos

On Mon, Jan 17, 2011 at 8:15 AM, anna auge <annaauge@web.de> wrote:

> Hi all,
>
> I am trying to convert modis level 1B data (type SWATH) to geotiff
> following these steps.
>
> 1) Examining the HDF
> gdalinfo d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf
> gdalinfo
> HDF4_EOS:EOS_SWATH:"d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> 2) Extracting the 1. band of the subdataset
> MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> gdal_translate -of GTiff -b 1
> HDF4_EOS:EOS_SWATH:"d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> d:\modis\1b\band_1.tiff
> 4) Warping the image to WGS84
> gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff
> d:\modis\1b\band_1_warp.tiff
>
> The example dataset, which i am using, can be downloaded here
>
> ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
>
> And now to my problem: I get always an certain shift (
> http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/),
> which is avoided if i am using the "Georeference MODIS" option in ENVI (
> http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
> I also tried a few workarounds, f.g.
> http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but nothing
> worked properly.
> As far as I understand gdal supports Modis L1B SWATH, so what I am doing
> wrong? Any help is appreciated.
>
> Regards Anna
>
> P.S. I am using FWTools 2.4.7 on Windows
>
>
> WEB.DE DSL Doppel-Flat ab 19,99 ?/mtl.! Jetzt mit
> gratis Handy-Flat! *http://produkte.web.de/go/DSL_Doppel_Flatrate/2*<http://produkte.web.de/go/DSL_Doppel_Flatrate/2>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/76d6069c/attachment.html
From james.j.manzione at usace.army.mil  Tue Jan 18 20:26:45 2011
From: james.j.manzione at usace.army.mil (manzione)
Date: Tue Jan 18 20:26:47 2011
Subject: [gdal-dev] Grib2 band to Geo Tiff
Message-ID: <1295400405405-5937919.post@n2.nabble.com>


Greetings and thank you for looking at my post,

I am converting a Grib2 file into a geo tiff file and then reprojecting it
in python.  When I reproject the tiff file it states it is "unable to
compute a transformation between pixel/line and georeferenced coordinates"
for my converted tiff file because "there is no affine transformation and no
GCPs."

I ran some tests and am under the assumption that my script is not embedding
any georefferencing information into the tiff file.  Any suggestions on how
to do this?  I am new to gdal and could use the help.  Below is my code for
the conversion.

Thank you in advance for your advice,
-James

Script:

    dataset = gdal.Open( Rpath, GA_ReadOnly )

    xsize = dataset.RasterXSize
    ysize = dataset.RasterYSize
    pixels = xsize * ysize
    
    num_bands = dataset.RasterCount
    for band_num in range(1, num_bands + 1):
        band = dataset.GetRasterBand(band_num)
        meta = band.GetMetadata()
        bandName = str(meta['GRIB_COMMENT'].split()[0])
        tiffImagePath = str(pngPath + bandName + '.tiff')

        ct = color_table(str(table))
        
        buf = dataset.ReadRaster( 0, 0, xsize, ysize, None, None, None, [
band_num ] )
        outBand = tiff.Create( tiffImagePath, xsize, ysize, 1, GDT_Byte)
        if outBand is None:
            sys.exit(1)
        
        outBand.GetRasterBand(1).SetRasterColorTable(ct)
        outbuf = []

        for offset in range(0, pixels):
            val = int(struct.unpack_from('d', buf, offset * 8)[0])
            if val > 255: val = 255
            if val < 0: val = 0
            outbuf.append('%c' % val)
        buffo = ''.join(outbuf)
        outBand.WriteRaster( 0, 0, xsize, ysize, buffo, xsize, ysize,
GDT_Byte )

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Grib2-band-to-Geo-Tiff-tp5937919p5937919.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Jan 18 23:36:12 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 18 23:36:13 2011
Subject: [gdal-dev] Grib2 band to Geo Tiff
In-Reply-To: <1295400405405-5937919.post@n2.nabble.com>
References: <1295400405405-5937919.post@n2.nabble.com>
Message-ID: <AANLkTinOmZzAyjVzJDsCZwi002uVXe-a26Fhc4TeA1_y@mail.gmail.com>

James,

You can use the GDALDriver::CreateCopy() method to translate a dataset if
you don't plan to perform any reprojection during translation.
If you don't need the intermediate geotiff file, you can look at the
ogr2ogr.py [0] script to perform the reprojection and translation in one go.

[0]
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/ogr2ogr.py

On Wed, Jan 19, 2011 at 6:56 AM, manzione
<james.j.manzione@usace.army.mil>wrote:

>
> Greetings and thank you for looking at my post,
>
> I am converting a Grib2 file into a geo tiff file and then reprojecting it
> in python.  When I reproject the tiff file it states it is "unable to
> compute a transformation between pixel/line and georeferenced coordinates"
> for my converted tiff file because "there is no affine transformation and
> no
> GCPs."
>
> I ran some tests and am under the assumption that my script is not
> embedding
> any georefferencing information into the tiff file.  Any suggestions on how
> to do this?  I am new to gdal and could use the help.  Below is my code for
> the conversion.
>
> Thank you in advance for your advice,
> -James
>
> Script:
>
>    dataset = gdal.Open( Rpath, GA_ReadOnly )
>
>    xsize = dataset.RasterXSize
>    ysize = dataset.RasterYSize
>    pixels = xsize * ysize
>
>    num_bands = dataset.RasterCount
>    for band_num in range(1, num_bands + 1):
>        band = dataset.GetRasterBand(band_num)
>        meta = band.GetMetadata()
>        bandName = str(meta['GRIB_COMMENT'].split()[0])
>        tiffImagePath = str(pngPath + bandName + '.tiff')
>
>        ct = color_table(str(table))
>
>        buf = dataset.ReadRaster( 0, 0, xsize, ysize, None, None, None, [
> band_num ] )
>        outBand = tiff.Create( tiffImagePath, xsize, ysize, 1, GDT_Byte)
>        if outBand is None:
>            sys.exit(1)
>
>        outBand.GetRasterBand(1).SetRasterColorTable(ct)
>        outbuf = []
>
>        for offset in range(0, pixels):
>            val = int(struct.unpack_from('d', buf, offset * 8)[0])
>            if val > 255: val = 255
>            if val < 0: val = 0
>            outbuf.append('%c' % val)
>        buffo = ''.join(outbuf)
>        outBand.WriteRaster( 0, 0, xsize, ysize, buffo, xsize, ysize,
> GDT_Byte )
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Grib2-band-to-Geo-Tiff-tp5937919p5937919.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110119/def1c33a/attachment.html
From gavin at afrispatial.co.za  Wed Jan 19 00:59:31 2011
From: gavin at afrispatial.co.za (Gavin)
Date: Wed Jan 19 00:59:59 2011
Subject: [gdal-dev] gdalwarp EPSG not being applied
In-Reply-To: <4D35EB71.1000104@pobox.com>
References: <1295349311.31540.680.camel@study>
	<AANLkTinrcbufjF5VvFNFWqS47hGHL70-806wXc8t+Xq3@mail.gmail.com>
	<1295376331.31540.1400.camel@study>  <4D35EB71.1000104@pobox.com>
Message-ID: <1295416771.19187.19.camel@study>

On Tue, 2011-01-18 at 14:35 -0500, Frank Warmerdam wrote:

> On 11-01-18 01:45 PM, Gavin wrote:
> >
> >
> > On Tue, 2011-01-18 at 10:06 -0700, Kyle Shannon wrote:
> ..
> >>     System 2 (Fedora 10):
> >>
> >>         Driver: GTiff/GeoTIFF
> >>         Files: test3857.tif
> >>         Size is 10749, 11713
> >>         Coordinate System is:
> >>         PROJCS["unnamed",
> >>         GEOGCS[,
> >>         DATUM["unknown",
> >>         SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
> >>         PRIMEM["Greenwich",0],
> >>         UNIT["degree",0.0174532925199433]],
> >>         UNIT["metre",1,
> >>         AUTHORITY["EPSG","9001"]],
> >>         AUTHORITY["EPSG","3857"]]
> >>         Origin = (3111167.042467534542084,-2998912.428198689594865)
> 
> Gavin,
> 
> This problem really does sound like some supporting data files not being
> found.  For GeoTIFF it can also be important that the GeoTIFF csv files
> be findable.  They are usually in /usr/local/share/epsg_csv and can be
> placed elsewhere as long as the GEOTIFF_CSV environment points to them.
> 
> Also, in some cases GDAL will fallback to using the PROJ.4 init files
> for definitions, found via the PROJ_LIB environment variable if they are
> not in /usr/local/share/proj.
> 
> Best regards,


Frank

libgeotiff was not installed (no epsg_csv) so I installed it and set

GEOTIFF_CSV=/usr/share/epsg_csv

proj init files are in place:

ls /usr/local/share/proj
epsg  esri.extra  IGNF   nad83    other.extra   world
esri  GL27        nad27  nad.lst  proj_def.dat

but still I get the same result.

and am still getting a bunch of these warnings:

Warning 1: TIFFFetchNormalTag:ASCII value for tag "Software" contains
null byte in value; value incorrectly truncated during reading due to
implementation limitations

regards

Gavin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110119/06f162ef/attachment.html
From annaauge at web.de  Wed Jan 19 02:53:39 2011
From: annaauge at web.de (anna auge)
Date: Wed Jan 19 02:53:43 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>,
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
Message-ID: <320653926.4697125.1295423619575.JavaMail.fmail@mwmweb077>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110119/1a945933/attachment-0001.html
From massimo.costantini at gmail.com  Wed Jan 19 02:54:12 2011
From: massimo.costantini at gmail.com (massimo costantini)
Date: Wed Jan 19 02:54:14 2011
Subject: [gdal-dev] Problem with ogrinfo and KML files
In-Reply-To: <AANLkTik14B4ivDZLJ3ojixHkvXoFUzGS9Fd_tx_YLC=V@mail.gmail.com>
References: <AANLkTint2qoXj52fy8yokDKfYzqi5ALh7rorQo_JHCXg@mail.gmail.com>
	<AANLkTi=7-99DF0hUejOfT3uYLHyG9PYF7UOz7be8TTAR@mail.gmail.com>
	<AANLkTimZXXc+Lj5aJ322EhXgCk50VK2U=xi8Gj4nLkAn@mail.gmail.com>
	<AANLkTik14B4ivDZLJ3ojixHkvXoFUzGS9Fd_tx_YLC=V@mail.gmail.com>
Message-ID: <AANLkTi=5SfKGBNfskyp42qBgLm5fUkj7V0PxkdY-hfcb@mail.gmail.com>

Problem solved, thank for your answers.
there was an error in linking the expat library.

On Tue, Jan 18, 2011 at 6:09 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Massimo,
>
> Check if your configure script recognised the expat library.
> This is what I got for "ogrinfo -al -so a.kml":
> Had to open data source read-only.
> INFO: Open of `a.kml'
> ????? using driver `KML' successful.
>
> Layer name: Paths
> Geometry: 3D Line String
> Feature Count: 1
> Extent: (-112.265697, 36.079550) - (-112.254928, 36.086496)
> Layer SRS WKT:
> GEOGCS["WGS 84",
> ??? DATUM["WGS_1984",
> ??????? SPHEROID["WGS 84",6378137,298.257223563,
> ??????????? AUTHORITY["EPSG","7030"]],
> ??????? TOWGS84[0,0,0,0,0,0,0],
> ??????? AUTHORITY["EPSG","6326"]],
> ??? PRIMEM["Greenwich",0,
> ??????? AUTHORITY["EPSG","8901"]],
> ??? UNIT["degree",0.0174532925199433,
> ??????? AUTHORITY["EPSG","9108"]],
> ??? AUTHORITY["EPSG","4326"]]
> Name: String (0.0)
> Description: String (0.0)
>
>
> On Tue, Jan 18, 2011 at 7:15 PM, massimo costantini
> <massimo.costantini@gmail.com> wrote:
>>
>> KML is in the list of supported formats.
>>
>> the error is:
>> Unable to open datasource `comuni2001.kml' with the following drivers.
>> ...
>> -> KML
>> ...
>>
>> i tryed on this:
>>
>> <?xml version="1.0" encoding="UTF-8"?>
>> <kml xmlns="http://www.opengis.net/kml/2.2">
>> ?<Document>
>> ? ?<name>Paths</name>
>
>
>>
>> ? ? ?</LineString>
>> ? ?</Placemark>
>> ?</Document>
>> </kml>
>>
>> and on a KML file created by ogr2ogr from a shape file
>>
>> On Tue, Jan 18, 2011 at 2:36 PM, Chaitanya kumar CH
>> <chaitanya.ch@gmail.com> wrote:
>> > Massimo,
>> >
>> > Do you see KML in the list of formats shown when you run the command
>> > "ogrinfo --formats"?
>> > What was the error message you got? Can you provide a sample file?
>> >
>> > On Tue, Jan 18, 2011 at 6:54 PM, massimo costantini
>> > <massimo.costantini@gmail.com> wrote:
>> >>
>> >> Hi,
>> >> I've try to analize KML files with ogrinfo but it seems to not
>> >> recognize the format. Gdal is compiled with expat support.
>> >> Someone can tell me the reason and the solution for this problem?
>> >>
>> >> thanks
>> >>
>> >> Massimo Costantini
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From jormarfe at gmail.com  Wed Jan 19 03:15:54 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Wed Jan 19 03:15:56 2011
Subject: [gdal-dev] Create a shape file with polygons
In-Reply-To: <4D35C9A3.4050502@pobox.com>
References: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
	<AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>
	<B101402B-F773-4D2F-AA90-715F8B5BE9D1@gmail.com>
	<AANLkTikzVS6zQUn0bOztdPEL7msnynkpnD5f_y7-mvmV@mail.gmail.com>
	<4D35C9A3.4050502@pobox.com>
Message-ID: <AANLkTim8kksJmTPMy44UNyv6v9+09JaNPC40VmQ=4V=u@mail.gmail.com>

Hello Frank,


I have made your change and it works, I can open the .shp with my GIS. Many
thanks for your help.

Best Regards,

Jorge

2011/1/18 Frank Warmerdam <warmerdam@pobox.com>

> On 11-01-18 11:28 AM, Jorge Martin wrote:
>
>> OGRPolygon myPoligon;
>>
>> tmp = strtok (Line, ":");
>>
>> szName = string (tmp);
>>
>>
>>        while (tmp != NULL)
>>            {
>>
>>        OGRLinearRing MyRing;// = (OGRLinearRing*)
>> OGRGeometryFactory::createGeometry(wkbLinearRing);
>>
>>         tmp = strtok (NULL, ",");
>>
>>         if(tmp)
>>         {
>>
>>                string Coords = string(tmp);
>>
>>               size_t pos = Coords.find(" ");
>>
>>               string CoordX = Coords.substr(0,pos);
>>               string CoordY = Coords.substr(pos);
>>
>>               x = atof(CoordX.c_str());
>>                y = atof(CoordY.c_str());
>>
>> MyRing.addPoint(x,y);
>>
>>
>>         }
>>
>>         myPoligon.addRing(&MyRing);
>>
>>     }
>>
>
> Jorge,
>
> The essence of your problem is that you are creating a new
> ring for each point instead of creating one ring for the
> polygon and adding all the points to that ring before adding
> the ring to the polygon.  A slightly altered form of the core
> that works looks like:
>
>        OGRPolygon myPoligon;
>        OGRLinearRing MyRing;// = (OGRLinearRing*)
>
>
>        tmp = strtok (Line, ":");
>        szName = string (tmp);
>        while (tmp != NULL)
>        {
>            OGRGeometryFactory::createGeometry(wkbLinearRing);
>
>            tmp = strtok (NULL, ",");
>
>            if(tmp)
>            {
>                string Coords = string(tmp);
>
>                size_t pos = Coords.find(" ");
>
>                string CoordX = Coords.substr(0,pos);
>                string CoordY = Coords.substr(pos);
>
>                x = atof(CoordX.c_str());
>                y = atof(CoordY.c_str());
>
>                MyRing.addPoint(x,y);
>            }
>        }
>
>        myPoligon.addRing(&MyRing);
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110119/22297d9a/attachment.html
From chaitanya.ch at gmail.com  Wed Jan 19 04:13:49 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jan 19 04:13:52 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <320653926.4697125.1295423619575.JavaMail.fmail@mwmweb077>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
	<320653926.4697125.1295423619575.JavaMail.fmail@mwmweb077>
Message-ID: <AANLkTimXgPmEwaUdhKS_BVbQ1_bFBDPr+3yT__-qeES1@mail.gmail.com>

Anna,

Check a couple of GCPs to rule out bad data. If they are OK, file a ticket
at http://trac.osgeo.org/gdal/newticket

On Wed, Jan 19, 2011 at 1:23 PM, anna auge <annaauge@web.de> wrote:

>
> So it is a problem with gdalwarp and the GCPs ?n the GeoTiff. Do you have
> any hints how to go on with this problem?
> Cheers, Anna
>
>  ------------------------------
> *Von:* "Nikolaos Hatzopoulos" <nhatzop@gmail.com>
> *Gesendet:* 19.01.2011 01:33:43
> *An:* "anna auge" <annaauge@web.de>
> *Betreff:* Re: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
>
>
> You are right, I notice that there isn't any difference from the
> band_1.tiff and band_1_warp.tiff
>
> --Nikos Hatzopoulos
>
> On Mon, Jan 17, 2011 at 8:15 AM, anna auge <annaauge@web.de> wrote:
>
>>  Hi all,
>>
>> I am trying to convert modis level 1B data (type SWATH) to geotiff
>> following these steps.
>>
>> 1) Examining the HDF
>> gdalinfo d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf
>> gdalinfo
>> HDF4_EOS:EOS_SWATH:"d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>> 2) Extracting the 1. band of the subdataset
>> MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>> gdal_translate -of GTiff -b 1
>> HDF4_EOS:EOS_SWATH:"d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>> d:\modis\1b\band_1.tiff
>> 4) Warping the image to WGS84
>> gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff
>> d:\modis\1b\band_1_warp.tiff
>>
>> The example dataset, which i am using, can be downloaded here
>>
>> ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
>>
>> And now to my problem: I get always an certain shift (
>> http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/),
>> which is avoided if i am using the "Georeference MODIS" option in ENVI (
>> http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
>> I also tried a few workarounds, f.g.
>> http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but nothing
>> worked properly.
>> As far as I understand gdal supports Modis L1B SWATH, so what I am doing
>> wrong? Any help is appreciated.
>>
>> Regards Anna
>>
>> P.S. I am using FWTools 2.4.7 on Windows
>>
>>
>>    WEB.DE DSL Doppel-Flat ab 19,99 ?/mtl.! Jetzt mit
>> gratis Handy-Flat! *http://produkte.web.de/go/DSL_Doppel_Flatrate/2*<http://produkte.web.de/go/DSL_Doppel_Flatrate/2>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> NEU: FreePhone - kostenlos mobil telefonieren und surfen!
> Jetzt informieren: *http://produkte.web.de/go/webdefreephone*<http://produkte.web.de/go/webdefreephone>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110119/ec8a1829/attachment.html
From dfuhry at gmail.com  Wed Jan 19 12:42:33 2011
From: dfuhry at gmail.com (Dave Fuhry)
Date: Wed Jan 19 12:58:40 2011
Subject: [gdal-dev] set dbf header date to current date on modification
Message-ID: <AANLkTimHqqMecyvaXs6J036Wnc2AA3TtRPRp+aXYFY7M@mail.gmail.com>

Patch to ogr/ogrsf_frmts/shape/dbfopen.c attached, which sets the dbf
header's date to the current date on modification.  Old code had the
dbf header's date hardcoded to 07/26/95.

Tested on Linux.  Hope it can make its way into OGR.

-Dave
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dbfopen_set_correct_date.v1.patch
Type: text/x-patch
Size: 1230 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110119/64f6ee45/dbfopen_set_correct_date.v1.bin
From chaitanya.ch at gmail.com  Wed Jan 19 14:16:37 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jan 19 14:23:01 2011
Subject: [gdal-dev] set dbf header date to current date on modification
In-Reply-To: <AANLkTimHqqMecyvaXs6J036Wnc2AA3TtRPRp+aXYFY7M@mail.gmail.com>
References: <AANLkTimHqqMecyvaXs6J036Wnc2AA3TtRPRp+aXYFY7M@mail.gmail.com>
Message-ID: <AANLkTinz8JE=srkAnfxfwzK5-XzhtfdeDQ6bcPSU4Pr1@mail.gmail.com>

Dave,

Can you file an enhancement ticket and attach the patch to it? (
http://trac.osgeo.org/gdal/newticket)

On Wed, Jan 19, 2011 at 11:12 PM, Dave Fuhry <dfuhry@gmail.com> wrote:

> Patch to ogr/ogrsf_frmts/shape/dbfopen.c attached, which sets the dbf
> header's date to the current date on modification.  Old code had the
> dbf header's date hardcoded to 07/26/95.
>
> Tested on Linux.  Hope it can make its way into OGR.
>
> -Dave
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110120/a1b975dd/attachment.html
From jrepetto at free.fr  Wed Jan 19 16:14:18 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jan 19 16:14:30 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMS server ?
Message-ID: <4D37542A.2010102@free.fr>

Hello,

I am looking for a method to create a pyramidal TIFF file containing 
tiles downloaded from a TMS server.

I thought I could achieve that goal with the gdal_translate command and 
the COPY_SRC_OVERVIEWS=YES option, but unfortunately it doesn't work (cf 
<http://trac.osgeo.org/gdal/ticket/3917>).

Is there another way ?

Thanks,
Jean-Claude
From jrepetto at free.fr  Thu Jan 20 08:25:15 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Jan 20 08:25:21 2011
Subject: AW: [gdal-dev] How to create TIFF with overview from a TMS server
	?
In-Reply-To: <BA25E6A9A6B2B54EB96F4F12F3683E030D0566@dlrexmbx02.intra.dlr.de>
References: <4D37542A.2010102@free.fr>
	<BA25E6A9A6B2B54EB96F4F12F3683E030D0566@dlrexmbx02.intra.dlr.de>
Message-ID: <4D3837BB.3060401@free.fr>

Le 20/01/2011 13:57, C.Strobl@dlr.de a ?crit :
>
> maybe it is easier to try something like this after gdal_translate
>
> gdaladdo -r average my_iamge.tif 2 4 8 16
>

Hi Christian,

Thanks for your answer. Unfortunately, it is not what I want, not at all.

For example, if the base map is composed of these four tiles :
http://c.tile.openstreetmap.org/17/68090/47886.png
http://c.tile.openstreetmap.org/17/68091/47886.png
http://c.tile.openstreetmap.org/17/68090/47887.png
http://c.tile.openstreetmap.org/17/68091/47887.png

I want that the overview looks like :
http://a.tile.openstreetmap.org/16/34045/23943.png

It is completely different from an average of the four tiles.

Regards,
Jean-Claude


From jrepetto at free.fr  Thu Jan 20 08:48:23 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Jan 20 08:48:58 2011
Subject: AW: AW: [gdal-dev] How to create TIFF with overview from a TMS
	server ?
In-Reply-To: <BA25E6A9A6B2B54EB96F4F12F3683E030D066E@dlrexmbx02.intra.dlr.de>
References: <4D37542A.2010102@free.fr>
	<BA25E6A9A6B2B54EB96F4F12F3683E030D0566@dlrexmbx02.intra.dlr.de>
	<4D3837BB.3060401@free.fr>
	<BA25E6A9A6B2B54EB96F4F12F3683E030D066E@dlrexmbx02.intra.dlr.de>
Message-ID: <4D383D27.2080706@free.fr>

Le 20/01/2011 14:33, C.Strobl@dlr.de a ?crit :
>
> so you can use gdal_merge or gdalwarp. i thought your problem was the
> pyramid building

I know that I can assemble the 4 tiles with gdalwarp or gdal_merge. But 
how do I assemble the resulting 1024x1024 image (level 17) with the 
256x256 image (level 16) to form a pyramid ?

Regards,
Jean-Claude


From jrepetto at free.fr  Thu Jan 20 08:57:23 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Jan 20 08:57:27 2011
Subject: AW: AW: [gdal-dev] How to create TIFF with overview from a TMS
	server ?
In-Reply-To: <4D383D27.2080706@free.fr>
References: <4D37542A.2010102@free.fr>	<BA25E6A9A6B2B54EB96F4F12F3683E030D0566@dlrexmbx02.intra.dlr.de>	<4D3837BB.3060401@free.fr>	<BA25E6A9A6B2B54EB96F4F12F3683E030D066E@dlrexmbx02.intra.dlr.de>
	<4D383D27.2080706@free.fr>
Message-ID: <4D383F43.50602@free.fr>

Le 20/01/2011 14:48, Jean-Claude Repetto a ?crit :

> I know that I can assemble the 4 tiles with gdalwarp or gdal_merge. But
> how do I assemble the resulting 1024x1024 image (level 17) with the
> 256x256 image (level 16) to form a pyramid ?

Sorry ; please read 512x512 instead of 1024x1024.
From Ralf.Suhr at itc-halle.de  Thu Jan 20 09:01:00 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Jan 20 09:01:07 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMSserver ?
In-Reply-To: <4D383D27.2080706@free.fr>
References: <4D37542A.2010102@free.fr>
	<BA25E6A9A6B2B54EB96F4F12F3683E030D066E@dlrexmbx02.intra.dlr.de>
	<4D383D27.2080706@free.fr>
Message-ID: <201101201501.00605.Ralf.Suhr@itc-halle.de>

Hi Jean-Claude,

you can use "gdalbuildvrt level16.vrt level17/*.tif". Pyramids from level 17 
are accessed transparently without building a new file.

Gr
Ralf

On Thursday 20 January 2011 14:48:23 Jean-Claude Repetto wrote:
> Le 20/01/2011 14:33, C.Strobl@dlr.de a ?crit :
> > so you can use gdal_merge or gdalwarp. i thought your problem was the
> > pyramid building
> 
> I know that I can assemble the 4 tiles with gdalwarp or gdal_merge. But
> how do I assemble the resulting 1024x1024 image (level 17) with the
> 256x256 image (level 16) to form a pyramid ?
> 
> Regards,
> Jean-Claude
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jrepetto at free.fr  Thu Jan 20 09:36:27 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Jan 20 09:36:32 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMSserver
 ?
In-Reply-To: <201101201501.00605.Ralf.Suhr@itc-halle.de>
References: <4D37542A.2010102@free.fr>
	<BA25E6A9A6B2B54EB96F4F12F3683E030D066E@dlrexmbx02.intra.dlr.de>
	<4D383D27.2080706@free.fr>
	<201101201501.00605.Ralf.Suhr@itc-halle.de>
Message-ID: <4D38486B.7030109@free.fr>

Le 20/01/2011 15:01, Ralf Suhr a ?crit :
> Hi Jean-Claude,
>
> you can use "gdalbuildvrt level16.vrt level17/*.tif". Pyramids from level 17
> are accessed transparently without building a new file.
>

Hi Ralf,

Thanks for your answer, but I can't see the input file of level 16 in 
your command. Did you mean :
gdalbuildvrt level16.vrt level16.tif level17/*.tif ?

I tried that command, but it did not create a pyramid.

Regards,
Jean-Claude
From nowak at xpam.de  Thu Jan 20 09:38:11 2011
From: nowak at xpam.de (Adam Nowacki)
Date: Thu Jan 20 09:38:54 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMS server
 ?
In-Reply-To: <4D37542A.2010102@free.fr>
References: <4D37542A.2010102@free.fr>
Message-ID: <4D3848D3.6020702@xpam.de>

Easiest would be to just gdal_translate -co COPY_SRC_OVERVIEWS=YES from 
properly setup gdalwms source, see http://gdal.org/frmt_wms.html . Local 
files can be accessed by using "file:///..." in in ServerURL.

On 2011-01-19 22:14, Jean-Claude Repetto wrote:
> Hello,
>
> I am looking for a method to create a pyramidal TIFF file containing
> tiles downloaded from a TMS server.
>
> I thought I could achieve that goal with the gdal_translate command and
> the COPY_SRC_OVERVIEWS=YES option, but unfortunately it doesn't work (cf
> <http://trac.osgeo.org/gdal/ticket/3917>).
>
> Is there another way ?
>
> Thanks,
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From Ralf.Suhr at itc-halle.de  Thu Jan 20 10:08:16 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Jan 20 10:08:29 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMSserver ?
In-Reply-To: <4D38486B.7030109@free.fr>
References: <4D37542A.2010102@free.fr>
	<201101201501.00605.Ralf.Suhr@itc-halle.de>
	<4D38486B.7030109@free.fr>
Message-ID: <201101201608.16972.Ralf.Suhr@itc-halle.de>

Hi Jean-Claude,

I assume the directory named level17 is containing the downloaded tiles 
processed with gdaladdo -r average tile_xy.tif 2 4 8 16.

Gr
Ralf

On Thursday 20 January 2011 15:36:27 Jean-Claude Repetto wrote:
> Le 20/01/2011 15:01, Ralf Suhr a ?crit :
> > Hi Jean-Claude,
> > 
> > you can use "gdalbuildvrt level16.vrt level17/*.tif". Pyramids from level
> > 17 are accessed transparently without building a new file.
> 
> Hi Ralf,
> 
> Thanks for your answer, but I can't see the input file of level 16 in
> your command. Did you mean :
> gdalbuildvrt level16.vrt level16.tif level17/*.tif ?
> 
> I tried that command, but it did not create a pyramid.
> 
> Regards,
> Jean-Claude
From Ralf.Suhr at itc-halle.de  Thu Jan 20 11:02:39 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Jan 20 11:02:45 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMSserver ?
In-Reply-To: <4D3857CC.1050203@free.fr>
References: <4D37542A.2010102@free.fr>
	<201101201608.16972.Ralf.Suhr@itc-halle.de>
	<4D3857CC.1050203@free.fr>
Message-ID: <201101201702.40295.Ralf.Suhr@itc-halle.de>

Hi Jean-Claude,

now I'am sure we are talking about different things. A pyramid is the same 
raster in smaller resolution. You want a new raster tile from same tms server.

http://www.gdal.org/frmt_wms.html can be used as source. If the raster covers 
not the details of information you want, you can finetuning by changing the 
source-window and destination size.

Gr
Ralf

On Thursday 20 January 2011 16:42:04 Jean-Claude Repetto wrote:
> Le 20/01/2011 16:08, Ralf Suhr a ?crit :
> > Hi Jean-Claude,
> > 
> > I assume the directory named level17 is containing the downloaded tiles
> > processed with gdaladdo -r average tile_xy.tif 2 4 8 16.
> > 
> > Gr
> > Ralf
> 
> I am not sure you have understood what I want to do.
> 
> I have attached two files to this message :
> small.tif is an overview of large.tif .
> 
> How can I create a pyramid ?
From jrepetto at free.fr  Thu Jan 20 11:24:19 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Jan 20 11:24:57 2011
Subject: [gdal-dev] How to create TIFF with overview from a TMS server
 ?
In-Reply-To: <4D3848D3.6020702@xpam.de>
References: <4D37542A.2010102@free.fr> <4D3848D3.6020702@xpam.de>
Message-ID: <4D3861B3.6060807@free.fr>

Le 20/01/2011 15:38, Adam Nowacki a ?crit :
> Easiest would be to just gdal_translate -co COPY_SRC_OVERVIEWS=YES from
> properly setup gdalwms source, see http://gdal.org/frmt_wms.html . Local
> files can be accessed by using "file:///..." in in ServerURL.

Yes, that should work. I didn't think about using file:///... (not 
documented on the page http://gdal.org/frmt_wms.html).

Thanks !
Jean-Claude
From dfuhry at gmail.com  Thu Jan 20 11:55:40 2011
From: dfuhry at gmail.com (Dave Fuhry)
Date: Thu Jan 20 11:55:57 2011
Subject: [gdal-dev] set dbf header date to current date on modification
In-Reply-To: <AANLkTinz8JE=srkAnfxfwzK5-XzhtfdeDQ6bcPSU4Pr1@mail.gmail.com>
References: <AANLkTimHqqMecyvaXs6J036Wnc2AA3TtRPRp+aXYFY7M@mail.gmail.com>
	<AANLkTinz8JE=srkAnfxfwzK5-XzhtfdeDQ6bcPSU4Pr1@mail.gmail.com>
Message-ID: <AANLkTi=Nufd8dV-jCGZ8a7WEEK76+M1gZyTEfDoYa_MC@mail.gmail.com>

Sure, I created ticket 3919.

http://trac.osgeo.org/gdal/ticket/3919

Thanks,

Dave


On Wed, Jan 19, 2011 at 2:16 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Dave,
>
> Can you file an enhancement ticket and attach the patch to it?
> (http://trac.osgeo.org/gdal/newticket)
>
> On Wed, Jan 19, 2011 at 11:12 PM, Dave Fuhry <dfuhry@gmail.com> wrote:
>>
>> Patch to ogr/ogrsf_frmts/shape/dbfopen.c attached, which sets the dbf
>> header's date to the current date on modification. ?Old code had the
>> dbf header's date hardcoded to 07/26/95.
>>
>> Tested on Linux. ?Hope it can make its way into OGR.
>>
>> -Dave
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From mafunk at nmsu.edu  Thu Jan 20 16:38:22 2011
From: mafunk at nmsu.edu (Matt Funk)
Date: Thu Jan 20 16:38:58 2011
Subject: [gdal-dev] question about reading grib2 file
Message-ID: <4D38AB4E.4080806@nmsu.edu>

Hi,

i am somewhat new to gdal and the grib format.
I need to read in a grib2 file which contains latitude longitude and
elevation.
So i do:
ds = gdal.Open(filename)
and
print "ds.GetRasterCount(): %s" % ds.GetRasterCount()
gives: 1

I can proceed to read in this band, but all the data that i get is the
elevation.
Not sure if this is an incredibly stupid question, but how do i access
the latitude/longitude data?

I know that there is latitude/longitude since when outputting things to
a csv file via the wgrib2 utility i get lat/lon and elevation?

thanks for any advice
matt
From mafunk at nmsu.edu  Thu Jan 20 17:19:38 2011
From: mafunk at nmsu.edu (Matt Funk)
Date: Thu Jan 20 17:19:16 2011
Subject: [gdal-dev] question about reading grib2 file
In-Reply-To: <4D38AB4E.4080806@nmsu.edu>
References: <4D38AB4E.4080806@nmsu.edu>
Message-ID: <4D38B4FA.4000903@nmsu.edu>

One more comment,

when i use the wgrib2 with the -spread flag i get lat/lon/elevation.
When i use the -text flag instead i only get the elevation (which is the
same data i get through python/gdal).

One thing that did occur to me is that it is possible that the wgrib2
utility computes the lat/lon when given the -spread flag.
Anyway, maybe this is not a gdal issue after all.

thanks
matt


On 1/20/2011 2:38 PM, Matt Funk wrote:
> Hi,
>
> i am somewhat new to gdal and the grib format.
> I need to read in a grib2 file which contains latitude longitude and
> elevation.
> So i do:
> ds = gdal.Open(filename)
> and
> print "ds.GetRasterCount(): %s" % ds.GetRasterCount()
> gives: 1
>
> I can proceed to read in this band, but all the data that i get is the
> elevation.
> Not sure if this is an incredibly stupid question, but how do i access
> the latitude/longitude data?
>
> I know that there is latitude/longitude since when outputting things to
> a csv file via the wgrib2 utility i get lat/lon and elevation?
>
> thanks for any advice
> matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From BCassanova at weather.com  Thu Jan 20 17:24:45 2011
From: BCassanova at weather.com (Cassanova, Bill)
Date: Thu Jan 20 17:40:25 2011
Subject: [gdal-dev] question about reading grib2 file
In-Reply-To: <4D38AB4E.4080806@nmsu.edu>
References: <4D38AB4E.4080806@nmsu.edu>
Message-ID: <AFBF0FD253136F4ABD241011F70F86909A44@PRTMB01.corp.weather.com>

Hi Matt,

Can you be a little more explicit about what you are asking?  Generally speaking GRIB2 files do not contain explicit lat-lon information.
GRIB2's contain a projection and within that projection the bounding box including the number of points along each axis is contained.

As an experiment run gdalinfo on your grib2 file and you will see output similar to the below:

gdalinfo foo.grib2
Driver: GRIB/GRIdded Binary (.grb)
Files: foo.grib2
Size is 720, 361
Coordinate System is:
GEOGCS["Coordinate System imported from GRIB file",
    DATUM["unknown",
        SPHEROID["Sphere",6371229,0]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (0.000000000000000,270.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Corner Coordinates:
Upper Left  (       0.000,     270.000) (  0d 0'0.01"E,270d 0'0.00"N)
Lower Left  (   0.0000000,  89.5000000) (  0d 0'0.01"E, 89d30'0.00"N)
Upper Right (     360.000,     270.000) (360d 0'0.00"E,270d 0'0.00"N)
Lower Right (     360.000,      89.500) (360d 0'0.00"E, 89d30'0.00"N)
Center      (     180.000,     179.750) (180d 0'0.00"E,179d45'0.00"N)
Band 1 Block=720x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
  Metadata:
    GRIB_UNIT=[K]
    GRIB_COMMENT=Temperature [K]
    GRIB_ELEMENT=TMP
    GRIB_SHORT_NAME=0-SFC
    GRIB_REF_TIME=  1295481600 sec UTC
    GRIB_VALID_TIME=  1296151200 sec UTC
    GRIB_FORECAST_SECONDS=669600 sec
    GRIB_PDS_PDTN=0
    GRIB_PDS_TEMPLATE_NUMBERS=0 0 2 0 96 0 0 0 1 0 0 0 186 1 0 0 0 0 0 255 0 0 0 0 0

If you are trying to read the values contained in Upper Left, Lower Left, etc?

If this is the case you need to get the geo_transform using code similar to the C-code below:

GDALAllRegister();


   GDALDatasetH my_data_set;

   int my_x_size, my_y_size;
   int my_raster_bands;

   GDALRasterBandH my_raster_band;

   double my_geo_transform[6];

   std::string my_projection_ref;

   my_data_set = NULL;
   my_raster_band = NULL;
   my_x_size = my_y_size = my_raster_bands = 0;

   ACE_LOG_MSG->log(LM_INFO, "%D %n Opening %s \n", input_grib2_file.c_str());

   my_data_set = GDALOpen(input_grib2_file.c_str(), GA_ReadOnly);


   if (NULL == my_data_set)
   {
      ACE_LOG_MSG->log(LM_INFO, "%D %n NULL GDALDatasetH pointer for file %s, "
                       "file invalid, quitting\n", input_grib2_file.c_str());
      return (1);
   }

   GDALGetGeoTransform(my_data_set, my_geo_transform);

   my_x_size = GDALGetRasterXSize(my_data_set);

   my_y_size = GDALGetRasterYSize(my_data_set);

   my_raster_bands = GDALGetRasterCount(my_data_set);

   ACE_LOG_MSG->log(LM_INFO,
                    "%D %n Data Set: x_size = %d y_size = %d raster_bands = %d origin = %f, %f, pixel_size=%f, %f\n",
                    my_x_size, my_y_size, my_raster_bands, my_geo_transform[0],
                    my_geo_transform[3], my_geo_transform[1],
                    my_geo_transform[5]);

>From this information you can calculate the lat-lon of each point within the file.

To answer your other question about wgrib2 -spread....wgrib2 calculates the lat-lon coordinates on the fly and does not store these explicitly in the file...Unless they are put there as a wgrib2 data segment which most people don't do.


Hope this helps,
Bill

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Funk
Sent: Thursday, January 20, 2011 4:38 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] question about reading grib2 file

Hi,

i am somewhat new to gdal and the grib format.
I need to read in a grib2 file which contains latitude longitude and
elevation.
So i do:
ds = gdal.Open(filename)
and
print "ds.GetRasterCount(): %s" % ds.GetRasterCount()
gives: 1

I can proceed to read in this band, but all the data that i get is the
elevation.
Not sure if this is an incredibly stupid question, but how do i access
the latitude/longitude data?

I know that there is latitude/longitude since when outputting things to
a csv file via the wgrib2 utility i get lat/lon and elevation?

thanks for any advice
matt
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mafunk at nmsu.edu  Thu Jan 20 17:52:50 2011
From: mafunk at nmsu.edu (Matt Funk)
Date: Thu Jan 20 17:52:22 2011
Subject: [gdal-dev] question about reading grib2 file
In-Reply-To: <AFBF0FD253136F4ABD241011F70F86909A44@PRTMB01.corp.weather.com>
References: <4D38AB4E.4080806@nmsu.edu>
	<AFBF0FD253136F4ABD241011F70F86909A44@PRTMB01.corp.weather.com>
Message-ID: <4D38BCC2.9030203@nmsu.edu>

Hi Bill,

thank you. That information helps a lot.
Sorry, as i said, i am pretty new with this stuff.

But it makes sense now.

thanks
matt


On 1/20/2011 3:24 PM, Cassanova, Bill wrote:
> Hi Matt,
>
> Can you be a little more explicit about what you are asking?  Generally speaking GRIB2 files do not contain explicit lat-lon information.
> GRIB2's contain a projection and within that projection the bounding box including the number of points along each axis is contained.
>
> As an experiment run gdalinfo on your grib2 file and you will see output similar to the below:
>
> gdalinfo foo.grib2
> Driver: GRIB/GRIdded Binary (.grb)
> Files: foo.grib2
> Size is 720, 361
> Coordinate System is:
> GEOGCS["Coordinate System imported from GRIB file",
>     DATUM["unknown",
>         SPHEROID["Sphere",6371229,0]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> Origin = (0.000000000000000,270.000000000000000)
> Pixel Size = (0.500000000000000,-0.500000000000000)
> Corner Coordinates:
> Upper Left  (       0.000,     270.000) (  0d 0'0.01"E,270d 0'0.00"N)
> Lower Left  (   0.0000000,  89.5000000) (  0d 0'0.01"E, 89d30'0.00"N)
> Upper Right (     360.000,     270.000) (360d 0'0.00"E,270d 0'0.00"N)
> Lower Right (     360.000,      89.500) (360d 0'0.00"E, 89d30'0.00"N)
> Center      (     180.000,     179.750) (180d 0'0.00"E,179d45'0.00"N)
> Band 1 Block=720x1 Type=Float64, ColorInterp=Undefined
>   Description = 0[-] SFC="Ground or water surface"
>   Metadata:
>     GRIB_UNIT=[K]
>     GRIB_COMMENT=Temperature [K]
>     GRIB_ELEMENT=TMP
>     GRIB_SHORT_NAME=0-SFC
>     GRIB_REF_TIME=  1295481600 sec UTC
>     GRIB_VALID_TIME=  1296151200 sec UTC
>     GRIB_FORECAST_SECONDS=669600 sec
>     GRIB_PDS_PDTN=0
>     GRIB_PDS_TEMPLATE_NUMBERS=0 0 2 0 96 0 0 0 1 0 0 0 186 1 0 0 0 0 0 255 0 0 0 0 0
>
> If you are trying to read the values contained in Upper Left, Lower Left, etc?
>
> If this is the case you need to get the geo_transform using code similar to the C-code below:
>
> GDALAllRegister();
>
>
>    GDALDatasetH my_data_set;
>
>    int my_x_size, my_y_size;
>    int my_raster_bands;
>
>    GDALRasterBandH my_raster_band;
>
>    double my_geo_transform[6];
>
>    std::string my_projection_ref;
>
>    my_data_set = NULL;
>    my_raster_band = NULL;
>    my_x_size = my_y_size = my_raster_bands = 0;
>
>    ACE_LOG_MSG->log(LM_INFO, "%D %n Opening %s \n", input_grib2_file.c_str());
>
>    my_data_set = GDALOpen(input_grib2_file.c_str(), GA_ReadOnly);
>
>
>    if (NULL == my_data_set)
>    {
>       ACE_LOG_MSG->log(LM_INFO, "%D %n NULL GDALDatasetH pointer for file %s, "
>                        "file invalid, quitting\n", input_grib2_file.c_str());
>       return (1);
>    }
>
>    GDALGetGeoTransform(my_data_set, my_geo_transform);
>
>    my_x_size = GDALGetRasterXSize(my_data_set);
>
>    my_y_size = GDALGetRasterYSize(my_data_set);
>
>    my_raster_bands = GDALGetRasterCount(my_data_set);
>
>    ACE_LOG_MSG->log(LM_INFO,
>                     "%D %n Data Set: x_size = %d y_size = %d raster_bands = %d origin = %f, %f, pixel_size=%f, %f\n",
>                     my_x_size, my_y_size, my_raster_bands, my_geo_transform[0],
>                     my_geo_transform[3], my_geo_transform[1],
>                     my_geo_transform[5]);
>
> >From this information you can calculate the lat-lon of each point within the file.
>
> To answer your other question about wgrib2 -spread....wgrib2 calculates the lat-lon coordinates on the fly and does not store these explicitly in the file...Unless they are put there as a wgrib2 data segment which most people don't do.
>
>
> Hope this helps,
> Bill
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Funk
> Sent: Thursday, January 20, 2011 4:38 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] question about reading grib2 file
>
> Hi,
>
> i am somewhat new to gdal and the grib format.
> I need to read in a grib2 file which contains latitude longitude and
> elevation.
> So i do:
> ds = gdal.Open(filename)
> and
> print "ds.GetRasterCount(): %s" % ds.GetRasterCount()
> gives: 1
>
> I can proceed to read in this band, but all the data that i get is the
> elevation.
> Not sure if this is an incredibly stupid question, but how do i access
> the latitude/longitude data?
>
> I know that there is latitude/longitude since when outputting things to
> a csv file via the wgrib2 utility i get lat/lon and elevation?
>
> thanks for any advice
> matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From jrepetto at free.fr  Fri Jan 21 04:52:50 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Jan 21 04:52:57 2011
Subject: [gdal-dev] [SOLVED] How to create TIFF with overview from a TMS
	server ?
In-Reply-To: <4D383D27.2080706@free.fr>
References: <4D37542A.2010102@free.fr>	<BA25E6A9A6B2B54EB96F4F12F3683E030D0566@dlrexmbx02.intra.dlr.de>	<4D3837BB.3060401@free.fr>	<BA25E6A9A6B2B54EB96F4F12F3683E030D066E@dlrexmbx02.intra.dlr.de>
	<4D383D27.2080706@free.fr>
Message-ID: <4D395772.9010303@free.fr>

Le 20/01/2011 14:48, Jean-Claude Repetto a ?crit :
> Le 20/01/2011 14:33, C.Strobl@dlr.de a ?crit :
>>
>> so you can use gdal_merge or gdalwarp. i thought your problem was the
>> pyramid building
>
> I know that I can assemble the 4 tiles with gdalwarp or gdal_merge. But
> how do I assemble the resulting 512x512 image (level 17) with the
> 256x256 image (level 16) to form a pyramid ?


Finally, I have found a work-around. Here is an example that shows how 
to create a pyramidal TIFF containing the level 0, 1 and 2 of OSM :

$ gdal_translate -outsize 256 256 frmt_wms_openstreetmap_tms.xml level0.tif
Input file size is 134217728, 134217728
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdal_translate -outsize 512 512 frmt_wms_openstreetmap_tms.xml level1.tif
Input file size is 134217728, 134217728
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdal_translate -outsize 1024 1024 frmt_wms_openstreetmap_tms.xml 
level2.tif
Input file size is 134217728, 134217728
0...10...20...30...40...50...60...70...80...90...100 - done.

$ mv level1.tif level2.tif.ovr

$ mv level0.tif level2.tif.ovr.ovr

$ gdal_translate -co COPY_SRC_OVERVIEWS=YES level2.tif pyramid.tif
Input file size is 1024, 1024
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo pyramid.tif
Driver: GTiff/GeoTIFF
Files: pyramid.tif
Size is 1024, 1024
Coordinate System is:
PROJCS["Google Maps Global Mercator",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-20037508.339999999850988,20037508.339999999850988)
Pixel Size = (39135.758476562499709,-39135.758476562499709)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-20037508.340,20037508.340) (180d 0' 0.00"W, 85d 5' 2.61"N)
Lower Left  (-20037508.340,-20037508.340) (180d 0' 0.00"W, 85d 5' 2.61"S)
Upper Right (20037508.340,20037508.340) (180d 0' 0.00"E, 85d 5' 2.61"N)
Lower Right (20037508.340,-20037508.340) (180d 0' 0.00"E, 85d 5' 2.61"S)
Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Band 1 Block=1024x2 Type=Byte, ColorInterp=Red
   Overviews: 512x512, 256x256
Band 2 Block=1024x2 Type=Byte, ColorInterp=Green
   Overviews: 512x512, 256x256
Band 3 Block=1024x2 Type=Byte, ColorInterp=Blue
   Overviews: 512x512, 256x256

From mohammedrashadkm at gmail.com  Fri Jan 21 09:49:10 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 21 09:49:53 2011
Subject: [gdal-dev] create attribute table
Message-ID: <AANLkTingE2XscrBByuCimtUuQtTJGkR-iTz-5nJs3cs9@mail.gmail.com>

how to create attribute table for vector using ogr?

-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110121/681553ab/attachment.html
From warmerdam at pobox.com  Fri Jan 21 10:01:53 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 21 10:01:56 2011
Subject: [gdal-dev] create attribute table
In-Reply-To: <AANLkTingE2XscrBByuCimtUuQtTJGkR-iTz-5nJs3cs9@mail.gmail.com>
References: <AANLkTingE2XscrBByuCimtUuQtTJGkR-iTz-5nJs3cs9@mail.gmail.com>
Message-ID: <4D399FE1.7020004@pobox.com>

On 11-01-21 09:49 AM, Mohammed Rashad wrote:
> how to create attribute table for vector using ogr?
>

Mohammed,

New attribute fields are created on a vector layer in OGR using the
CreateField() method on the layer.  This is covered in the read/write
tutorial (search for CreateField about 2/3 of the way down):

   http://www.gdal.org/ogr/ogr_apitut.html

See also:

   http://www.gdal.org/ogr/classOGRLayer.html#00b1376a1eabb1298ef278f92f6d84be

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mohammedrashadkm at gmail.com  Fri Jan 21 10:12:30 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 21 10:13:16 2011
Subject: [gdal-dev] create attribute table
In-Reply-To: <4D399FE1.7020004@pobox.com>
References: <AANLkTingE2XscrBByuCimtUuQtTJGkR-iTz-5nJs3cs9@mail.gmail.com>
	<4D399FE1.7020004@pobox.com>
Message-ID: <AANLkTi=30yd3+1_2XKFu5+WwO-Wk-G4zPH0Zbpwg+qeF@mail.gmail.com>

thanks Frank. i mailed without looking the api tutorial. sorry

On Fri, Jan 21, 2011 at 8:31 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-01-21 09:49 AM, Mohammed Rashad wrote:
>
>> how to create attribute table for vector using ogr?
>>
>>
> Mohammed,
>
> New attribute fields are created on a vector layer in OGR using the
> CreateField() method on the layer.  This is covered in the read/write
> tutorial (search for CreateField about 2/3 of the way down):
>
>  http://www.gdal.org/ogr/ogr_apitut.html
>
> See also:
>
>
> http://www.gdal.org/ogr/classOGRLayer.html#00b1376a1eabb1298ef278f92f6d84be
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110121/a467af89/attachment.html
From brfr at metrico.lu  Fri Jan 21 10:41:41 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Fri Jan 21 11:03:26 2011
Subject: [gdal-dev] OGR Layer string representation
Message-ID: <4D39A935.2050808@metrico.lu>

Hello,

Is it possible to get a string representation of text-datasources (gml, 
geojson, etc.) from a OGRLayer or OGRDatasource? Is it maybe possible to 
write to STDOUT instead of a file?

Many thanks for tipps

Frank
From mohammedrashadkm at gmail.com  Fri Jan 21 12:47:54 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 21 12:48:36 2011
Subject: [gdal-dev] segfault on importFromWkt
Message-ID: <AANLkTimdXCqGm6QvgJ=sfOTJkvP-2PttEavkmMMCLcMx@mail.gmail.com>

#include "ogrsf_frmts.h"

#include <stdio.h>

int main()
{
    const char *pszDriverName = "ESRI Shapefile";
    OGRSFDriver *poDriver;

    OGRRegisterAll();
 OGRDataSource       *poDS;

    poDS = OGRSFDriverRegistrar::Open( "point_out.shp", FALSE );
    if( poDS == NULL )
    {
       cout <<  "Open failed."  << endl;

    }

    OGRLayer  *poLayer;

    poLayer = poDS->GetLayerByName( "point_out" );

    OGRFeature *poFeature;

    poLayer->ResetReading();

        OGRGeometry *OLGeometry;
 char *geom = "POINT(6 10)";

        OLGeometry->importFromWkt(&geom);
}

if the line   OLGeometry->importFromWkt(&geom); is not included it works
without segfault

here is the code which creates the shapefile

const char *pszDriverName = "ESRI Shapefile";
    OGRSFDriver *poDriver;

    OGRRegisterAll();

    poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
                pszDriverName );

    OGRDataSource *poDS;

    poDS = poDriver->CreateDataSource( "point_out.shp", NULL );


    OGRLayer *poLayer;

    poLayer = poDS->CreateLayer( "point_out", NULL, wkbPoint, NULL );
    OGRDataSource::DestroyDataSource( poDS );


-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110121/34081176/attachment.html
From warmerdam at pobox.com  Fri Jan 21 13:11:24 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 21 13:11:31 2011
Subject: [gdal-dev] segfault on importFromWkt
In-Reply-To: <AANLkTimdXCqGm6QvgJ=sfOTJkvP-2PttEavkmMMCLcMx@mail.gmail.com>
References: <AANLkTimdXCqGm6QvgJ=sfOTJkvP-2PttEavkmMMCLcMx@mail.gmail.com>
Message-ID: <4D39CC4C.909@pobox.com>

On 11-01-21 12:47 PM, Mohammed Rashad wrote:
>          OGRGeometry *OLGeometry;
>   char *geom = "POINT(6 10)";
>
>          OLGeometry->importFromWkt(&geom);
> }

Rashad,

The problem is that OLGeometry is an unitialized pointer as opposed to
being a valid geometry object on which a method could be invoked.

I would suggest changing this to:

   OGRGeometry *OLGeometry = NULL;
   char *geom = "POINT(6 10)";

   OGRGeometryFactory::createFromWkt( &geom, NULL, &OLGeometry );

Note that the documentation on OGRGeometry::importFromWkt() says:

  * The object must have already been instantiated as the correct derived
  * type of geometry object to match the text type.  This method is used
  * by the OGRGeometryFactory class, but not normally called by application
  * code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mohammedrashadkm at gmail.com  Fri Jan 21 14:01:34 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 21 14:02:18 2011
Subject: [gdal-dev] append features to shapefile
Message-ID: <AANLkTim0KUnfqTQgsG9H=4T3TuJEBN6NryAHusb1jp+h@mail.gmail.com>

How can I add features to a shapefile using OGR?
-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110122/6b7c136b/attachment.html
From chaitanya.ch at gmail.com  Sat Jan 22 01:21:09 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jan 22 01:21:11 2011
Subject: [gdal-dev] append features to shapefile
In-Reply-To: <AANLkTim0KUnfqTQgsG9H=4T3TuJEBN6NryAHusb1jp+h@mail.gmail.com>
References: <AANLkTim0KUnfqTQgsG9H=4T3TuJEBN6NryAHusb1jp+h@mail.gmail.com>
Message-ID: <AANLkTinqaidUrzdB9FJHn9WbHfAEEnReM0pR0p0kJHrv@mail.gmail.com>

Rashad,

Refer to the OGR API tutorial, especially the topic "Writing to OGR". You
can add features to already existing data source, including shapefiles.

On Sat, Jan 22, 2011 at 12:31 AM, Mohammed Rashad <
mohammedrashadkm@gmail.com> wrote:

>
> How can I add features to a shapefile using OGR?
> --
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110122/92774748/attachment.html
From mohammedrashadkm at gmail.com  Sat Jan 22 05:20:48 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sat Jan 22 05:21:31 2011
Subject: [gdal-dev] write to GML
Message-ID: <AANLkTin_juDRkE4vs2ij=VtPvKP9bWqeaw6R=6LjMD=J@mail.gmail.com>

this works
poDS = OGRSFDriverRegistrar::Open( "point_out.xml", FALSE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n" );
    }
but the following is not working
poDS = OGRSFDriverRegistrar::Open( "point_out.xml", TRUE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n" );
    }
this given
an Open failed error.  what I am missing?

-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110122/d0d27e86/attachment.html
From even.rouault at mines-paris.org  Sat Jan 22 05:27:36 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 22 05:27:45 2011
Subject: [gdal-dev] write to GML
In-Reply-To: <AANLkTin_juDRkE4vs2ij=VtPvKP9bWqeaw6R=6LjMD=J@mail.gmail.com>
References: <AANLkTin_juDRkE4vs2ij=VtPvKP9bWqeaw6R=6LjMD=J@mail.gmail.com>
Message-ID: <201101221127.36577.even.rouault@mines-paris.org>

Le samedi 22 janvier 2011 11:20:48, Mohammed Rashad a ?crit :
> this works
> poDS = OGRSFDriverRegistrar::Open( "point_out.xml", FALSE );
>     if( poDS == NULL )
>     {
>         printf( "Open failed.\n" );
>     }
> but the following is not working
> poDS = OGRSFDriverRegistrar::Open( "point_out.xml", TRUE );
>     if( poDS == NULL )
>     {
>         printf( "Open failed.\n" );
>     }
> this given
> an Open failed error.  what I am missing?

Nothing, this is expected behaviour. The GML driver doesn't support updating 
existing files. It can only create a new GML file.
From even.rouault at mines-paris.org  Sat Jan 22 10:42:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 22 10:42:58 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <4CB48DF7.2080302@pobox.com>
References: <4CB43D98.1030906@geograph.co.za>
	<A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>
	<4CB48DF7.2080302@pobox.com>
Message-ID: <201101221642.49718.even.rouault@mines-paris.org>

Hi,

I've just added a read-only geomedia driver in GDAL trunk (GDAL 1.9.0dev). 
Testing is appreciated.

It would be usefull if someone could provide a small and freely redistribuable 
geomedia .mdb (possibly hand-made with fake data) with different types of 
geometries (1 feature for each geometry type is enough) so that it can be 
included in the autotest suite. For now, it has just been tested with the 
MMSDTestDB.zip attachment found on http://forum.manifold.net/forum/t106539.11

What is mainly missing is SRS support. I see that the GCoordSystem contains 
all the info. For the above example :

  Stor2CompMatrix1 (Real) = 0.3048
  GeodeticDatum (Integer) = 0
  Ellipsoid (Integer) = 21
  EquatorialRadius (Real) = 6378407.621
  InverseFlattening (Real) = 298.269875040474
  ProjAlgorithm (Integer) = 2
  AzimuthAngle (Real) = (null)
  FalseX (Real) = 247193.2944
  FalseY (Real) = 0
  Hemisphere (Integer) = (null)
  LatOfOrigin (Real) = 41.75
  LatOfTrueScale (Real) = (null)
  LonOfOrigin (Real) = -89.4222222222222
  RadOfStandCircle (Real) = (null)
  ScaleReductFact (Real) = 1
  StandPar1 (Real) = 42.9083333333333
  StandPar2 (Real) = 43.2305555555556

But the GeodeticDatum, Ellipsoid and ProjAlgorithm fields presumably map to 
enumerations, so examples of databases using various SRS (starting with the 
most common ones like lat/long WGS84 and UTM WGS84) with the "text" 
description of the SRS would be necessary to establish this mapping. Unless 
someone knows where to find a spec of this ?

From the above sample and a bit of googling, I've deduced this is equivalent 
to the following ESRI WKT :

PROJCS["NAD_1983_HARN_Adj_WI_Dane_Feet",GEOGCS["GCS_NAD_1983_HARN_Adj_WI_Dane",DATUM["D_NAD_1983_HARN_Adj_WI_DN",SPHEROID["GRS_1980_Adj_WI_DN",6378407.621,298.269876997368]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",811000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-89.42222222222223],PARAMETER["Standard_Parallel_1",42.90833333333333],PARAMETER["Standard_Parallel_2",43.23055555555555],PARAMETER["Latitude_Of_Origin",41.75],UNIT["Foot_US",0.3048006096012192]]

So ProjAlgorithm 2 is likely meaning Lambert_Conformal_Conic_2SP and Ellipsoid 
= 21 = GRS_1980_Adj_WI_DN ?

Best regards,

Even

Le mardi 12 octobre 2010 18:33:59, Frank Warmerdam a ?crit :
> Moskovitz, Bob wrote:
> > Frank,
> > 
> > I'm also interested in seeing a Geomedia driver for gdal.  Btw, gvSIG has
> > a Geomedia plugin (see https://code.google.com/p/extmdb ).  This might
> > help you figure out how to make a driver for gdal.
> 
> Bob,
> 
> Interesting.  Using the extmdb MDBGeometryAdapter.java code it should be
> possible to fairly easily implement geomedia feature reading in OGR.
> 
> Anyone interested in taking the task on or funding it?
> 
> Best regards,
From gcpp.kalxas at gmail.com  Sat Jan 22 10:58:27 2011
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Sat Jan 22 10:58:36 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <201101221642.49718.even.rouault@mines-paris.org>
References: <4CB43D98.1030906@geograph.co.za>	<A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>	<4CB48DF7.2080302@pobox.com>
	<201101221642.49718.even.rouault@mines-paris.org>
Message-ID: <4D3AFEA3.8040506@gmail.com>

Hi Even.

Good work.
I can provide a sample mdb file made from GeoMedia. Is there any 
particular shapefile, you would like me to translate?
Perhaps we can include the US Sample Data as provided by Intergraph.

Best regards,
Angelos

On 01/22/2011 05:42 PM, Even Rouault wrote:
> Hi,
>
> I've just added a read-only geomedia driver in GDAL trunk (GDAL 1.9.0dev).
> Testing is appreciated.
>
> It would be usefull if someone could provide a small and freely redistribuable
> geomedia .mdb (possibly hand-made with fake data) with different types of
> geometries (1 feature for each geometry type is enough) so that it can be
> included in the autotest suite. For now, it has just been tested with the
> MMSDTestDB.zip attachment found on http://forum.manifold.net/forum/t106539.11
>
> What is mainly missing is SRS support. I see that the GCoordSystem contains
> all the info. For the above example :
>
>    Stor2CompMatrix1 (Real) = 0.3048
>    GeodeticDatum (Integer) = 0
>    Ellipsoid (Integer) = 21
>    EquatorialRadius (Real) = 6378407.621
>    InverseFlattening (Real) = 298.269875040474
>    ProjAlgorithm (Integer) = 2
>    AzimuthAngle (Real) = (null)
>    FalseX (Real) = 247193.2944
>    FalseY (Real) = 0
>    Hemisphere (Integer) = (null)
>    LatOfOrigin (Real) = 41.75
>    LatOfTrueScale (Real) = (null)
>    LonOfOrigin (Real) = -89.4222222222222
>    RadOfStandCircle (Real) = (null)
>    ScaleReductFact (Real) = 1
>    StandPar1 (Real) = 42.9083333333333
>    StandPar2 (Real) = 43.2305555555556
>
> But the GeodeticDatum, Ellipsoid and ProjAlgorithm fields presumably map to
> enumerations, so examples of databases using various SRS (starting with the
> most common ones like lat/long WGS84 and UTM WGS84) with the "text"
> description of the SRS would be necessary to establish this mapping. Unless
> someone knows where to find a spec of this ?
>
>  From the above sample and a bit of googling, I've deduced this is equivalent
> to the following ESRI WKT :
>
> PROJCS["NAD_1983_HARN_Adj_WI_Dane_Feet",GEOGCS["GCS_NAD_1983_HARN_Adj_WI_Dane",DATUM["D_NAD_1983_HARN_Adj_WI_DN",SPHEROID["GRS_1980_Adj_WI_DN",6378407.621,298.269876997368]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",811000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-89.42222222222223],PARAMETER["Standard_Parallel_1",42.90833333333333],PARAMETER["Standard_Parallel_2",43.23055555555555],PARAMETER["Latitude_Of_Origin",41.75],UNIT["Foot_US",0.3048006096012192]]
>
> So ProjAlgorithm 2 is likely meaning Lambert_Conformal_Conic_2SP and Ellipsoid
> = 21 = GRS_1980_Adj_WI_DN ?
>
> Best regards,
>
> Even
>
> Le mardi 12 octobre 2010 18:33:59, Frank Warmerdam a ?crit :
>> Moskovitz, Bob wrote:
>>> Frank,
>>>
>>> I'm also interested in seeing a Geomedia driver for gdal.  Btw, gvSIG has
>>> a Geomedia plugin (see https://code.google.com/p/extmdb ).  This might
>>> help you figure out how to make a driver for gdal.
>> Bob,
>>
>> Interesting.  Using the extmdb MDBGeometryAdapter.java code it should be
>> possible to fairly easily implement geomedia feature reading in OGR.
>>
>> Anyone interested in taking the task on or funding it?
>>
>> Best regards,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos

From zoltans at geograph.co.za  Sat Jan 22 11:00:27 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Jan 22 11:00:32 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <201101221642.49718.even.rouault@mines-paris.org>
References: <4CB43D98.1030906@geograph.co.za>
	<A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>
	<4CB48DF7.2080302@pobox.com>
	<201101221642.49718.even.rouault@mines-paris.org>
Message-ID: <4D3AFF1B.9070406@geograph.co.za>

Hi Even,
Your timing is brilliant!! :-)

I have a meeting on Monday, where I am about to confess failure in 
converting mdb to (multiple) shape files.

I sadly have no time today (it's almost 18h00 here)  but will be in 
tomorrow as I have a deadline for Monday.

I have just looked at www.gdal.org and not found a link to your version.

If you can spoonfeed me I can test it for you tomorrow (on a reasonable 
size & complexity of data).

I either need a WinVista binary, or sourcecode & instructions (ie 
dependencies) on how to compile and use it to covert mdb to SHP, on 
Ubuntu 10.04.
Linux is preferable. GDAL is not yet installed on this box. (but build 
essentials is).

If you can do this for me, I will test it tomorrow.

Thanks & regards,
Zoltan
PS: I tried with gvsig on windows, could open & view the mdb, query & 
zoom around it, but could not save it as shape files. IIRC, the error 
was due to NULL entries in the attribute tables.



On 2011-01-22 17:42, Even Rouault wrote:
> Hi,
>
> I've just added a read-only geomedia driver in GDAL trunk (GDAL 1.9.0dev).
> Testing is appreciated.
>
> It would be usefull if someone could provide a small and freely redistribuable
> geomedia .mdb (possibly hand-made with fake data) with different types of
> geometries (1 feature for each geometry type is enough) so that it can be
> included in the autotest suite. For now, it has just been tested with the
> MMSDTestDB.zip attachment found on http://forum.manifold.net/forum/t106539.11
>
> What is mainly missing is SRS support. I see that the GCoordSystem contains
> all the info. For the above example :
>
>    Stor2CompMatrix1 (Real) = 0.3048
>    GeodeticDatum (Integer) = 0
>    Ellipsoid (Integer) = 21
>    EquatorialRadius (Real) = 6378407.621
>    InverseFlattening (Real) = 298.269875040474
>    ProjAlgorithm (Integer) = 2
>    AzimuthAngle (Real) = (null)
>    FalseX (Real) = 247193.2944
>    FalseY (Real) = 0
>    Hemisphere (Integer) = (null)
>    LatOfOrigin (Real) = 41.75
>    LatOfTrueScale (Real) = (null)
>    LonOfOrigin (Real) = -89.4222222222222
>    RadOfStandCircle (Real) = (null)
>    ScaleReductFact (Real) = 1
>    StandPar1 (Real) = 42.9083333333333
>    StandPar2 (Real) = 43.2305555555556
>
> But the GeodeticDatum, Ellipsoid and ProjAlgorithm fields presumably map to
> enumerations, so examples of databases using various SRS (starting with the
> most common ones like lat/long WGS84 and UTM WGS84) with the "text"
> description of the SRS would be necessary to establish this mapping. Unless
> someone knows where to find a spec of this ?
>
>  From the above sample and a bit of googling, I've deduced this is equivalent
> to the following ESRI WKT :
>
> PROJCS["NAD_1983_HARN_Adj_WI_Dane_Feet",GEOGCS["GCS_NAD_1983_HARN_Adj_WI_Dane",DATUM["D_NAD_1983_HARN_Adj_WI_DN",SPHEROID["GRS_1980_Adj_WI_DN",6378407.621,298.269876997368]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",811000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-89.42222222222223],PARAMETER["Standard_Parallel_1",42.90833333333333],PARAMETER["Standard_Parallel_2",43.23055555555555],PARAMETER["Latitude_Of_Origin",41.75],UNIT["Foot_US",0.3048006096012192]]
>
> So ProjAlgorithm 2 is likely meaning Lambert_Conformal_Conic_2SP and Ellipsoid
> = 21 = GRS_1980_Adj_WI_DN ?
>
> Best regards,
>
> Even
>
> Le mardi 12 octobre 2010 18:33:59, Frank Warmerdam a ?crit :
>    
>> Moskovitz, Bob wrote:
>>      
>>> Frank,
>>>
>>> I'm also interested in seeing a Geomedia driver for gdal.  Btw, gvSIG has
>>> a Geomedia plugin (see https://code.google.com/p/extmdb ).  This might
>>> help you figure out how to make a driver for gdal.
>>>        
>> Bob,
>>
>> Interesting.  Using the extmdb MDBGeometryAdapter.java code it should be
>> possible to fairly easily implement geomedia feature reading in OGR.
>>
>> Anyone interested in taking the task on or funding it?
>>
>> Best regards,
>>      


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1191 / Virus Database: 1435/3395 - Release Date: 01/21/11

From even.rouault at mines-paris.org  Sat Jan 22 11:17:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 22 11:18:05 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <4D3AFF1B.9070406@geograph.co.za>
References: <4CB43D98.1030906@geograph.co.za>
	<201101221642.49718.even.rouault@mines-paris.org>
	<4D3AFF1B.9070406@geograph.co.za>
Message-ID: <201101221717.58048.even.rouault@mines-paris.org>

Le samedi 22 janvier 2011 17:00:27, Zoltan Szecsei a ?crit :

> I have just looked at www.gdal.org and not found a link to your version.

Yeah, the doc will appears in a few hours when the web site is regenerated.

> 
> If you can spoonfeed me I can test it for you tomorrow (on a reasonable
> size & complexity of data).
> 
> I either need a WinVista binary, or sourcecode & instructions (ie
> dependencies) on how to compile and use it to covert mdb to SHP, on
> Ubuntu 10.04.
> Linux is preferable. GDAL is not yet installed on this box. (but build
> essentials is).

The windows binary should be available in the tomorrow nightly builds of Tamas 
: http://vbkto.dyndns.org/sdk/ (the -developement packages, revision >= 
r21548)

As far as Linux is concerned, like for the PGeo driver, we are constrainted by 
the MDBTools library that provides the MDB ODBC driver, but it has been 
unmaintained for many years and I find it to be quite buggy (especially when it 
fetches 'big' geometry binary blobs ).

To solve this, I'm currently working on a (not yet commited) OGR driver that 
relies on the Jackcess Java library ( http://jackcess.sourceforge.net/ ) 
through JNI invocation to read MDB databases. It works quite well. Should be 
ready soon hopefully.

> 
> If you can do this for me, I will test it tomorrow.
> 
> Thanks & regards,
> Zoltan
> PS: I tried with gvsig on windows, could open & view the mdb, query &
> zoom around it, but could not save it as shape files. IIRC, the error
> was due to NULL entries in the attribute tables.
From even.rouault at mines-paris.org  Sat Jan 22 11:26:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 22 11:26:08 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <4D3AFEA3.8040506@gmail.com>
References: <4CB43D98.1030906@geograph.co.za>
	<201101221642.49718.even.rouault@mines-paris.org>
	<4D3AFEA3.8040506@gmail.com>
Message-ID: <201101221726.00284.even.rouault@mines-paris.org>

Le samedi 22 janvier 2011 16:58:27, Angelos Tzotsos a ?crit :
> Hi Even.
> 
> Good work.
> I can provide a sample mdb file made from GeoMedia. Is there any
> particular shapefile, you would like me to translate?
> Perhaps we can include the US Sample Data as provided by Intergraph.
> 

If the samples provided by intergraph are licenced as being freely 
redistribuable,  that's OK. But fake geometries drawn at hand (one point, one 
line, one polygon, one polygon with a hole, one multipolygon, one geometry 
collection, etc...) would be preferred to be on the safe side (and to have a 
small file).
From gcpp.kalxas at gmail.com  Sat Jan 22 12:29:25 2011
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Sat Jan 22 12:29:33 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <201101221726.00284.even.rouault@mines-paris.org>
References: <4CB43D98.1030906@geograph.co.za>
	<201101221642.49718.even.rouault@mines-paris.org>
	<4D3AFEA3.8040506@gmail.com>
	<201101221726.00284.even.rouault@mines-paris.org>
Message-ID: <4D3B13F5.9010707@gmail.com>

I am checking with some old colleagues at Intergraph to see if the data 
are free to redistribute.

On 01/22/2011 06:26 PM, Even Rouault wrote:
> Le samedi 22 janvier 2011 16:58:27, Angelos Tzotsos a ?crit :
>> Hi Even.
>>
>> Good work.
>> I can provide a sample mdb file made from GeoMedia. Is there any
>> particular shapefile, you would like me to translate?
>> Perhaps we can include the US Sample Data as provided by Intergraph.
>>
> If the samples provided by intergraph are licenced as being freely
> redistribuable,  that's OK. But fake geometries drawn at hand (one point, one
> line, one polygon, one polygon with a hole, one multipolygon, one geometry
> collection, etc...) would be preferred to be on the safe side (and to have a
> small file).
>


-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos

From conputer at free.fr  Sun Jan 23 10:12:01 2011
From: conputer at free.fr (conpie)
Date: Sun Jan 23 10:12:03 2011
Subject: [gdal-dev] Re: Geomedia mdb files
In-Reply-To: <201101221726.00284.even.rouault@mines-paris.org>
References: <4CB43D98.1030906@geograph.co.za> <4CB477D6.2020806@pobox.com>
	<A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>
	<4CB48DF7.2080302@pobox.com>
	<201101221642.49718.even.rouault@mines-paris.org>
	<4D3AFEA3.8040506@gmail.com>
	<201101221726.00284.even.rouault@mines-paris.org>
Message-ID: <1295795521988-5952862.post@n2.nabble.com>


Hi Even,
i'll check with colleagues to see if it possible to provide some fake
geometries just like you mentionned.
Thanks for this work!

Even Rouault wrote:
> 
> If the samples provided by intergraph are licenced as being freely 
> redistribuable,  that's OK. But fake geometries drawn at hand (one point,
> one 
> line, one polygon, one polygon with a hole, one multipolygon, one geometry 
> collection, etc...) would be preferred to be on the safe side (and to have
> a 
> small file).
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Geomedia-mdb-files-tp5626254p5952862.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From conputer at free.fr  Sun Jan 23 10:12:01 2011
From: conputer at free.fr (conpie)
Date: Sun Jan 23 10:12:05 2011
Subject: [gdal-dev] Re: Geomedia mdb files
In-Reply-To: <201101221726.00284.even.rouault@mines-paris.org>
References: <4CB43D98.1030906@geograph.co.za> <4CB477D6.2020806@pobox.com>
	<A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>
	<4CB48DF7.2080302@pobox.com>
	<201101221642.49718.even.rouault@mines-paris.org>
	<4D3AFEA3.8040506@gmail.com>
	<201101221726.00284.even.rouault@mines-paris.org>
Message-ID: <1295795521841-5952861.post@n2.nabble.com>


Hi Even,
i'll check with colleagues to see if it possible to provide some fake
geometries just like you mentionned.
Thanks for this work!

Even Rouault wrote:
> 
> If the samples provided by intergraph are licenced as being freely 
> redistribuable,  that's OK. But fake geometries drawn at hand (one point,
> one 
> line, one polygon, one polygon with a hole, one multipolygon, one geometry 
> collection, etc...) would be preferred to be on the safe side (and to have
> a 
> small file).
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Geomedia-mdb-files-tp5626254p5952861.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Sun Jan 23 11:25:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 23 11:26:05 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0 Released
Message-ID: <4D3C5694.1000700@pobox.com>

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 1.8.0.  GDAL/OGR is a C++ geospatial
data access library for raster and vector file formats, databases and
web services.  It includes bindings for several languages, and a variety
of command line tools.

   http://www.gdal.org/

The 1.8.0 release is a major new feature release with the following
highlights:

  * New GDAL drivers : GTX, HF2, JPEGLS, JP2OpenJPEG, JPIPKAK,
                       KMLSUPEROVERLAY, LOS/LAS, MG4Lidar, NTv2,
                       OZI, PDF, RASDAMAN, XYZ
  * New OGR drivers : AeronavFAA, ArcObjects, GPSBabel, HTF, LIBKML,
                      MSSQLSpatial, NAS, OpenAir, PDS, PGDump, SOSI, SUA, WFS
  * Significantly improved OGR drivers : DXF, GML
  * New implemented RFCs:
    - RFC 7: Use VSILFILE for VSI*L Functions
    - RFC 24: Progressive data support in GDAL
    - RFC 28: OGR SQL Generalized Expressions
    - RFC 29: OGR Set Ignored Fields
    - RFC 30: Unicode Filenames
    - RFC 33: GTIFF - Corrected PixelIsPoint Interpretation
  * New utility : gdallocationinfo

More complete information on the new features and fixes in the 1.8.0
release can be found at:

   http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News

Source code, documentation and the test suite can be downloaded from:

  http://download.osgeo.org/gdal/gdal180.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.8.0.tar.gz - source as .tar.gz
  http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz - test suite
  http://download.osgeo.org/gdal/gdal180doc.zip - docs / web site

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Sun Jan 23 14:58:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 23 14:58:06 2011
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <201101221717.58048.even.rouault@mines-paris.org>
References: <4CB43D98.1030906@geograph.co.za> <4D3AFF1B.9070406@geograph.co.za>
	<201101221717.58048.even.rouault@mines-paris.org>
Message-ID: <201101232058.00264.even.rouault@mines-paris.org>

> 
> To solve this, I'm currently working on a (not yet commited) OGR driver
> that relies on the Jackcess Java library (
> http://jackcess.sourceforge.net/ ) through JNI invocation to read MDB
> databases. It works quite well. Should be ready soon hopefully.

The MDB driver that uses Jackcess is in trunk now. 
http://gdal.org/ogr/drv_mdb.html contains instruction to build it and to use 
it.
From matt at mattblackler.com  Sun Jan 23 17:19:16 2011
From: matt at mattblackler.com (Matthew Blackler)
Date: Sun Jan 23 17:19:21 2011
Subject: [gdal-dev] MSSQL GDAL 1.8.0 Feature problem
Message-ID: <AANLkTin0Ve23nqOeL4F4_Bxe+d+7fYDPun7HrscxiGPC@mail.gmail.com>

Dear all,

I have downloaded v1.8.0 and am using .net CSharp bindings to connect into
MSSQL such:

"MSSQL:SERVER=MATT-ACERPC\\SQLExpress;tables=categ(geom);Initial
Catalog=Crown_GIS;Integrated Security=True";

I am able to connect and retrieve the driver ok.  I am able to get the Layer
"Categ" from the datasource, no problem.  However, the extent of the layer,
feature counts, and even the "get" of features using the nextfeature cursor
fails to retrieve any features or information for me.

Any obvious pointers as to why iterating through a layer with a known number
of features (4,000 ish) would result in returning nothing (i.e. no feature
back from the getnextfeature), or why the extent of a layer would be
reported as being 0,0,0,0?

Any help would be much appreciated.  Looking forward to leveraging OGR to
making our apps datasource independant, and throwing away the shackles of
ArcObjects!

Thanks in advance,

Matthew Blackler

-- 
Email: matt@mattblackler.com
Homepage: http://www.mattblackler.com
Twitter: @mattblacklercom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110123/2e11dfef/attachment.html
From szekerest at gmail.com  Sun Jan 23 18:05:42 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jan 23 18:05:47 2011
Subject: [gdal-dev] MSSQL GDAL 1.8.0 Feature problem
In-Reply-To: <AANLkTin0Ve23nqOeL4F4_Bxe+d+7fYDPun7HrscxiGPC@mail.gmail.com>
References: <AANLkTin0Ve23nqOeL4F4_Bxe+d+7fYDPun7HrscxiGPC@mail.gmail.com>
Message-ID: <AANLkTimHcGqmnqBwB5G4_Onb-dudZdhUgUpcFm70p1u3@mail.gmail.com>

Matthew,

Could you provide a sample data to reproduce this problem?
How the layer and the features are displayed by the ogrinfo command tool?

Best regards,

Tamas




2011/1/23 Matthew Blackler <matt@mattblackler.com>

> Dear all,
>
> I have downloaded v1.8.0 and am using .net CSharp bindings to connect into
> MSSQL such:
>
> "MSSQL:SERVER=MATT-ACERPC\\SQLExpress;tables=categ(geom);Initial
> Catalog=Crown_GIS;Integrated Security=True";
>
> I am able to connect and retrieve the driver ok.  I am able to get the
> Layer "Categ" from the datasource, no problem.  However, the extent of the
> layer, feature counts, and even the "get" of features using the nextfeature
> cursor fails to retrieve any features or information for me.
>
> Any obvious pointers as to why iterating through a layer with a known
> number of features (4,000 ish) would result in returning nothing (i.e. no
> feature back from the getnextfeature), or why the extent of a layer would be
> reported as being 0,0,0,0?
>
> Any help would be much appreciated.  Looking forward to leveraging OGR to
> making our apps datasource independant, and throwing away the shackles of
> ArcObjects!
>
> Thanks in advance,
>
> Matthew Blackler
>
> --
> Email: matt@mattblackler.com
> Homepage: http://www.mattblackler.com
> Twitter: @mattblacklercom
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/0378f6c3/attachment.html
From heng.feng at aircominternational.com  Mon Jan 24 01:22:28 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Mon Jan 24 01:22:31 2011
Subject: [gdal-dev] An issue about using GDALWARP to
	dotheNTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293133614782-5862681.post@n2.nabble.com>
	<C3257D068EB03E4498BAC3A96344256803B31C4208@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A963442568054645389F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Hi Uwe,

I have been trying to use gdal_merge.py to merge a few 8 bit colored .tif tiles together. Having tried all sorts of options for this command, I always ended up with a merged 8-bit grayscale picture. I did a search on the internet and found a couple of posts related to this, however it seemed to me that the gdal_merge.py just does not have the ability to preserve the color. Did I get the wrong idea about this? Do you have any suggestion to solve this problem?

Not sure if I should post a separate message for this gdal_merge.py issue.  I just thought this would be the quickest way to get the help :)

Thanks,
Heng
________________________________
From: Schmitz, Uwe [via OSGeo.org] [ml-node+5931200-375580391-308251@n2.nabble.com]
Sent: 17 January 2011 09:22
To: Heng Feng
Subject: AW: [gdal-dev] An issue about using GDALWARP to dotheNTv2transformation

Heng,

> Hi Uwe,
>
> Hope you had a wonderful Christmas break.

Yes, thank you (but I have the impression that mine has
been shorter than yours ;-))

> Regarding the issue about the NTv2 transformation,
> the map data provider has confirmed that the raster
> data do cover some areas which are outside the Germany
> map, hence the area of the grid shift file.  I have
> taken your second suggestion and ignore the coordinates
> outside BeTA2007 grid.  However,  by running the suggested
> command on some raster data, this time I have got the
>  message "Inverse grid shift iteration failed, presumably
> at grid edge. Using first approximation." Do you know
> why I am having this message? Do I need to worry about it?
>
No! NTv2 is based on a grid of shift values from System A
to System B (DHDN -> ETRS89 in your case). For the other
direction (B->A, or ETRS89->DHDN) the shift value is
calculated by an iterative approach. Near the grid edges it's
possible that during the iteartion the coordinates fall
outside the grid. I would imagine that this is the case
for the message you see.

Assuming you don't need precise transformation results
outside the BeTA2007 grid, you can safely ignore this
message.

Regards
Uwe
_______________________________________________
gdal-dev mailing list
[hidden email]<UrlBlockedError.aspx>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________
View message @ http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5931200.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
Mobile World Congress 2011, 14-17 February
Stand 1B14, Barcelona, Spain
Click mailto:events@aircominternational.com?subject=Mobile%20World%20Congress%20'11%20meeting%20-%20%Appointement%20%Booking to book a meeting

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5954287.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110123/92c71843/attachment.html
From matt at mattblackler.com  Mon Jan 24 03:19:36 2011
From: matt at mattblackler.com (Matthew Blackler)
Date: Mon Jan 24 03:19:41 2011
Subject: [gdal-dev] MSSQL GDAL 1.8.0 Feature problem
In-Reply-To: <AANLkTimHcGqmnqBwB5G4_Onb-dudZdhUgUpcFm70p1u3@mail.gmail.com>
References: <AANLkTin0Ve23nqOeL4F4_Bxe+d+7fYDPun7HrscxiGPC@mail.gmail.com>
	<AANLkTimHcGqmnqBwB5G4_Onb-dudZdhUgUpcFm70p1u3@mail.gmail.com>
Message-ID: <AANLkTi=RxXo1x5LqFVXBCPMMgN2yK_UFJD4-tfyMT+zj@mail.gmail.com>

Thanks for you prompt response Tamas!

Well, after having used the ogrinfo tool (thanks for the hint - first time
user of ogr/gdal you see), I tested the connection string mutliple times -
and it turns out it was because I was using Initial Catalog parameter,
instead of the Database parameter.

So - handy hint for the day - Don't use the Initial Catalog parameter in
your SQL Server 2008 connection string with OGR.  Use the Database
parameter.

Cheers Tamas!

On Sun, Jan 23, 2011 at 11:05 PM, Tamas Szekeres <szekerest@gmail.com>wrote:

> Matthew,
>
> Could you provide a sample data to reproduce this problem?
> How the layer and the features are displayed by the ogrinfo command tool?
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/1/23 Matthew Blackler <matt@mattblackler.com>
>
>> Dear all,
>>
>> I have downloaded v1.8.0 and am using .net CSharp bindings to connect into
>> MSSQL such:
>>
>> "MSSQL:SERVER=MATT-ACERPC\\SQLExpress;tables=categ(geom);Initial
>> Catalog=Crown_GIS;Integrated Security=True";
>>
>> I am able to connect and retrieve the driver ok.  I am able to get the
>> Layer "Categ" from the datasource, no problem.  However, the extent of the
>> layer, feature counts, and even the "get" of features using the nextfeature
>> cursor fails to retrieve any features or information for me.
>>
>> Any obvious pointers as to why iterating through a layer with a known
>> number of features (4,000 ish) would result in returning nothing (i.e. no
>> feature back from the getnextfeature), or why the extent of a layer would be
>> reported as being 0,0,0,0?
>>
>> Any help would be much appreciated.  Looking forward to leveraging OGR to
>> making our apps datasource independant, and throwing away the shackles of
>> ArcObjects!
>>
>> Thanks in advance,
>>
>> Matthew Blackler
>>
>> --
>> Email: matt@mattblackler.com
>> Homepage: http://www.mattblackler.com
>> Twitter: @mattblacklercom
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Email: matt@mattblackler.com
Homepage: http://www.mattblackler.com
Twitter: @mattblacklercom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/8cec595c/attachment-0001.html
From uwe.schmitz at bezreg-koeln.nrw.de  Mon Jan 24 04:24:24 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Mon Jan 24 04:24:33 2011
Subject: AW: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A963442568054645389F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBB55@sebulba.bezreg-koeln.nrw.de>

Heng,
> 
> Hi Uwe, 
> 
> I have been trying to use gdal_merge.py to merge 
> a few 8 bit colored .tif tiles together. Having 
> tried all sorts of options for this command, I 
> always ended up with a merged 8-bit grayscale picture. 
> I did a search on the internet and found a couple of 
> posts related to this, however it seemed to me that 
> the gdal_merge.py just does not have the ability 
> to preserve the color. Did I get the wrong idea about 
> this? Do you have any suggestion to solve this problem? 
>
you have to specify "-pct" to grab the color table
of the first merged tile for the result file.
And, very important, all input tiles need to have
the *same* color table, because merging is done
on pixel values (that means channels).

> Not sure if I should post a separate message for 
> this gdal_merge.py issue.  I just thought this would 
> be the quickest way to get the help :) 
>
Yes, IMO a seperate post would have been better and
addressing it to me wouldn't always help to get a fast
response ;-)

Regards
Uwe
From jorgepsantos2002 at gmail.com  Mon Jan 24 05:08:04 2011
From: jorgepsantos2002 at gmail.com (jorgepsantos2002)
Date: Mon Jan 24 05:08:06 2011
Subject: [gdal-dev] Re: Cropping raster by vector files
In-Reply-To: <1278623198275-5271977.post@n2.nabble.com>
References: <1278623198275-5271977.post@n2.nabble.com>
Message-ID: <1295863684732-5954709.post@n2.nabble.com>


Hi,

Another option is make a subset by mask with GDAL using three algorithms:
gdal_translate, gdal_rasterize and gdalwarp.

1 - Original Full Raster + ROI in shapefile format:

http://osgeo-org.1803224.n2.nabble.com/file/n5954709/ftolls0.png 

2 - Generate a Raster Black with gdal translate:

In Ftools prompt, past a code below to generate a black raster (replace de
subdirectories):

gdal_translate D:\GDAL\LS5_20100208_216_075_RGB.tif D:\GDAL\LS_SCALE.tif
-scale 0 255 0 0.01

http://osgeo-org.1803224.n2.nabble.com/file/n5954709/ftools4.png 

* LS5_20100208_216_075_RGB.tif is the original raster.
* LS_SCALE.tif is the name I gave to the opaque raster.

3 - Create a Raster Mask with gdal_rasterize:

Paste new commandline in Ftools prompt:

gdal_rasterize -b 1 -b 2 -b 3 -burn 255 -burn 255 -burn 255 -l VETOR_SHP
D:/GDAL/VETOR_SHP.shp D:/GDAL/LS_SCALE.tif

http://osgeo-org.1803224.n2.nabble.com/file/n5954709/ftools2.png 

4 - Finally, generate the image subset with gdalwarp:

gdalwarp D:/GDAL/LS_SCALE.tif -srcnodata "255"
D:\GDAL\LS5_20100208_216_075_RGB.tif

http://osgeo-org.1803224.n2.nabble.com/file/n5954709/ftools3.png 

The NoDATA value is zero. Since the algorithm gdalwarp not generate a third
image, you must delete any .AUX and .RRD files after unning this command.
This prevents the GIS (ArcGIS, Quantum GIS, etc) remains continuously
displaying the entire image in the editing area.

Full article in my blog Processamento Digital:

http://processamentodigital.blogspot.com/2011/01/recorte-irregular-em-arquivos-raster.html 
http://processamentodigital.blogspot.com/2011/01/recorte-irregular-em-arquivos-raster.html 

Regards,

_________________
Jorge Santos
T?c. em Geod?sia e Cartografia
http://processamentodigital.blogspot.com/
http://processamentodigital.blogspot.com/ 
http://twitter.com/jpsantos2002 http://twitter.com/jpsantos2002 
Skype: jorgepsantos2002

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Cropping-raster-by-vector-files-tp5271977p5954709.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From heng.feng at aircominternational.com  Mon Jan 24 07:56:21 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Mon Jan 24 07:56:23 2011
Subject: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB55@sebulba.bezreg-koeln.nrw.de>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293133614782-5862681.post@n2.nabble.com>
	<C3257D068EB03E4498BAC3A96344256803B31C4208@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A963442568054645389F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB55@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A96344256805464538A3@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Thanks for your quick response, Uwe. Yes, all the tif files have got the same color table. I checked that and added the -pct option. But I think I forgot to remove the old merged one I generated without the -pct option. Now that I have removed the old merged one, a merged colored tif file is successfully generated after running the same command :)
________________________________
From: Schmitz, Uwe [via OSGeo.org] [ml-node+5954610-1691648657-308251@n2.nabble.com]
Sent: 24 January 2011 09:24
To: Heng Feng
Subject: AW: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation

Heng,

>
> Hi Uwe,
>
> I have been trying to use gdal_merge.py to merge
> a few 8 bit colored .tif tiles together. Having
> tried all sorts of options for this command, I
> always ended up with a merged 8-bit grayscale picture.
> I did a search on the internet and found a couple of
> posts related to this, however it seemed to me that
> the gdal_merge.py just does not have the ability
> to preserve the color. Did I get the wrong idea about
> this? Do you have any suggestion to solve this problem?
>
you have to specify "-pct" to grab the color table
of the first merged tile for the result file.
And, very important, all input tiles need to have
the *same* color table, because merging is done
on pixel values (that means channels).

> Not sure if I should post a separate message for
> this gdal_merge.py issue.  I just thought this would
> be the quickest way to get the help :)
>
Yes, IMO a seperate post would have been better and
addressing it to me wouldn't always help to get a fast
response ;-)

Regards
Uwe
_______________________________________________
gdal-dev mailing list
[hidden email]<UrlBlockedError.aspx>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5954610.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
Mobile World Congress 2011, 14-17 February
Stand 1B14, Barcelona, Spain
Click mailto:events@aircominternational.com?subject=Mobile%20World%20Congress%20'11%20meeting%20-%20Appointement%20Booking to book a meeting

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5955057.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/1af7714f/attachment.html
From szekerest at gmail.com  Mon Jan 24 10:10:15 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 24 10:10:54 2011
Subject: [gdal-dev] MSSQL GDAL 1.8.0 Feature problem
In-Reply-To: <AANLkTi=RxXo1x5LqFVXBCPMMgN2yK_UFJD4-tfyMT+zj@mail.gmail.com>
References: <AANLkTin0Ve23nqOeL4F4_Bxe+d+7fYDPun7HrscxiGPC@mail.gmail.com>
	<AANLkTimHcGqmnqBwB5G4_Onb-dudZdhUgUpcFm70p1u3@mail.gmail.com>
	<AANLkTi=RxXo1x5LqFVXBCPMMgN2yK_UFJD4-tfyMT+zj@mail.gmail.com>
Message-ID: <AANLkTikAE6tfird=np=Z4CdtxYmtb2MUEHMUNisjZ1L9@mail.gmail.com>

Yes, it seems the ODBC SQL driver doesn't support the 'Initial Catalog'
parameter. I've modified the driver documentation accordingly.

Best regards,

Tamas




2011/1/24 Matthew Blackler <matt@mattblackler.com>

> Thanks for you prompt response Tamas!
>
> Well, after having used the ogrinfo tool (thanks for the hint - first time
> user of ogr/gdal you see), I tested the connection string mutliple times -
> and it turns out it was because I was using Initial Catalog parameter,
> instead of the Database parameter.
>
> So - handy hint for the day - Don't use the Initial Catalog parameter in
> your SQL Server 2008 connection string with OGR.  Use the Database
> parameter.
>
> Cheers Tamas!
>
>
> On Sun, Jan 23, 2011 at 11:05 PM, Tamas Szekeres <szekerest@gmail.com>wrote:
>
>> Matthew,
>>
>> Could you provide a sample data to reproduce this problem?
>> How the layer and the features are displayed by the ogrinfo command tool?
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>>
>> 2011/1/23 Matthew Blackler <matt@mattblackler.com>
>>
>>>  Dear all,
>>>
>>> I have downloaded v1.8.0 and am using .net CSharp bindings to connect
>>> into MSSQL such:
>>>
>>> "MSSQL:SERVER=MATT-ACERPC\\SQLExpress;tables=categ(geom);Initial
>>> Catalog=Crown_GIS;Integrated Security=True";
>>>
>>> I am able to connect and retrieve the driver ok.  I am able to get the
>>> Layer "Categ" from the datasource, no problem.  However, the extent of the
>>> layer, feature counts, and even the "get" of features using the nextfeature
>>> cursor fails to retrieve any features or information for me.
>>>
>>> Any obvious pointers as to why iterating through a layer with a known
>>> number of features (4,000 ish) would result in returning nothing (i.e. no
>>> feature back from the getnextfeature), or why the extent of a layer would be
>>> reported as being 0,0,0,0?
>>>
>>> Any help would be much appreciated.  Looking forward to leveraging OGR to
>>> making our apps datasource independant, and throwing away the shackles of
>>> ArcObjects!
>>>
>>> Thanks in advance,
>>>
>>> Matthew Blackler
>>>
>>> --
>>> Email: matt@mattblackler.com
>>> Homepage: http://www.mattblackler.com
>>> Twitter: @mattblacklercom
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
>
> --
> Email: matt@mattblackler.com
> Homepage: http://www.mattblackler.com
> Twitter: @mattblacklercom
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/aca9eaf1/attachment.html
From a.neumann at carto.net  Mon Jan 24 14:31:00 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Jan 24 14:48:20 2011
Subject: [gdal-dev] GDAL/OGR 1.8.0 Released
In-Reply-To: <4D3C5694.1000700@pobox.com>
References: <4D3C5694.1000700@pobox.com>
Message-ID: <4D3DD374.9090402@carto.net>

Thanks to all on the gdal/ogr team who worked hard to make this release 
happen!

gdal/ogr is getting better and better and is one of the most important 
corner stones of Open Source GIS! The rapid success of Open Source 
Desktop and Web-GIS (like QGIS, gvSIG, OpenLayers, and to a certain 
extent also GRASS) is only possible because of the very good base libraries.

Congrats,
Andreas

On 1/23/11 5:25 PM, Frank Warmerdam wrote:
> On behalf of the GDAL/OGR development team and community, I am pleased to
> announce the release of GDAL/OGR 1.8.0.  GDAL/OGR is a C++ geospatial
> data access library for raster and vector file formats, databases and
> web services.  It includes bindings for several languages, and a variety
> of command line tools.
>
>   http://www.gdal.org/
>
> The 1.8.0 release is a major new feature release with the following
> highlights:
>
>  * New GDAL drivers : GTX, HF2, JPEGLS, JP2OpenJPEG, JPIPKAK,
>                       KMLSUPEROVERLAY, LOS/LAS, MG4Lidar, NTv2,
>                       OZI, PDF, RASDAMAN, XYZ
>  * New OGR drivers : AeronavFAA, ArcObjects, GPSBabel, HTF, LIBKML,
>                      MSSQLSpatial, NAS, OpenAir, PDS, PGDump, SOSI, 
> SUA, WFS
>  * Significantly improved OGR drivers : DXF, GML
>  * New implemented RFCs:
>    - RFC 7: Use VSILFILE for VSI*L Functions
>    - RFC 24: Progressive data support in GDAL
>    - RFC 28: OGR SQL Generalized Expressions
>    - RFC 29: OGR Set Ignored Fields
>    - RFC 30: Unicode Filenames
>    - RFC 33: GTIFF - Corrected PixelIsPoint Interpretation
>  * New utility : gdallocationinfo
>
> More complete information on the new features and fixes in the 1.8.0
> release can be found at:
>
>   http://trac.osgeo.org/gdal/wiki/Release/1.8.0-News
>
> Source code, documentation and the test suite can be downloaded from:
>
>  http://download.osgeo.org/gdal/gdal180.zip - source as a zip
>  http://download.osgeo.org/gdal/gdal-1.8.0.tar.gz - source as .tar.gz
>  http://download.osgeo.org/gdal/gdalautotest-1.8.0.tar.gz - test suite
>  http://download.osgeo.org/gdal/gdal180doc.zip - docs / web site
>
> Best regards,

From sritchie09 at gmail.com  Mon Jan 24 15:32:51 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Mon Jan 24 15:33:14 2011
Subject: [gdal-dev] HDF4 file in byte array results in "not recognised" error
Message-ID: <AANLkTik3qV8OuKNJmVjSDYBoG-v9BwLx-mBRWxzBPmZ=@mail.gmail.com>

Hey all,

I'm working on an app that needs to pass HDF4 files (MODIS tiles) around as
byte arrays, and then open them up using gdal#Open, from java. Open works
great when I pass in the filepath, so I know that my gdal setup is solid.

The problem is, when I turn the HDF4 file into a byte array and try to use

gdal.FileFromMemBuffer("/vsimem/test.hdf", bytearray);
DataSet data = gdal.Open("/vsimem/test.hdf");

I get an error that reads: "`/vsimem/test.hdf' not recognised as a supported
file format."

I tried something similar, by converting

<VRTDataset rasterXSize=\"1\" rasterYSize=\"1\">
  <GeoTransform>100,1,0,100,0,-1</GeoTransform>
  <VRTRasterBand dataType=\"Byte\" band=\"1\">
  </VRTRasterBand>
</VRTDataset>

to a byte array and reading it in, and that worked great.

Any ideas on how to deal with this issue? I'll note that open SEES the file
in the /vsimem/ directory, it just doesn't recognize it as a valid file. Is
this an issue with HDF4 files, or with large binary sequences? Any ideas on
how to get around this?

Thanks, all,
Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/6716bf73/attachment.html
From even.rouault at mines-paris.org  Mon Jan 24 15:54:35 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan 24 15:54:29 2011
Subject: [gdal-dev] HDF4 file in byte array results in "not recognised"
	error
In-Reply-To: <AANLkTik3qV8OuKNJmVjSDYBoG-v9BwLx-mBRWxzBPmZ=@mail.gmail.com>
References: <AANLkTik3qV8OuKNJmVjSDYBoG-v9BwLx-mBRWxzBPmZ=@mail.gmail.com>
Message-ID: <201101242154.35487.even.rouault@mines-paris.org>

Sam,

not all drivers support the vsi virtual file systems, such as /vsimem. And HDF4 
is one of those drivers (the HDF4 libs need a "real" filename). You can 
generally check if a file system supports vsi virtual file systems by issuing 
"gdalinfo --format name_of_driver"

For a compatible driver (such as VRT, but not HDF4), you'll see :
  Supports: Virtual IO - eg. /vsimem/

> Hey all,
> 
> I'm working on an app that needs to pass HDF4 files (MODIS tiles) around as
> byte arrays, and then open them up using gdal#Open, from java. Open works
> great when I pass in the filepath, so I know that my gdal setup is solid.
> 
> The problem is, when I turn the HDF4 file into a byte array and try to use
> 
> gdal.FileFromMemBuffer("/vsimem/test.hdf", bytearray);
> DataSet data = gdal.Open("/vsimem/test.hdf");
> 
> I get an error that reads: "`/vsimem/test.hdf' not recognised as a
> supported file format."
> 
> I tried something similar, by converting
> 
> <VRTDataset rasterXSize=\"1\" rasterYSize=\"1\">
>   <GeoTransform>100,1,0,100,0,-1</GeoTransform>
>   <VRTRasterBand dataType=\"Byte\" band=\"1\">
>   </VRTRasterBand>
> </VRTDataset>
> 
> to a byte array and reading it in, and that worked great.
> 
> Any ideas on how to deal with this issue? I'll note that open SEES the file
> in the /vsimem/ directory, it just doesn't recognize it as a valid file. Is
> this an issue with HDF4 files, or with large binary sequences? Any ideas on
> how to get around this?
> 
> Thanks, all,
> Sam
From sritchie09 at gmail.com  Mon Jan 24 15:59:35 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Mon Jan 24 15:59:57 2011
Subject: [gdal-dev] HDF4 file in byte array results in "not recognised"
	error
In-Reply-To: <201101242154.35487.even.rouault@mines-paris.org>
References: <AANLkTik3qV8OuKNJmVjSDYBoG-v9BwLx-mBRWxzBPmZ=@mail.gmail.com>
	<201101242154.35487.even.rouault@mines-paris.org>
Message-ID: <AANLkTimY8QdiXaksCr9z+VuG0M+p7zivpHwcthqhov9S@mail.gmail.com>

Even, thanks for this. I'll proceed by copying the byte array to a temp
file.

Best,
Sam

On Mon, Jan 24, 2011 at 3:54 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Sam,
>
> not all drivers support the vsi virtual file systems, such as /vsimem. And
> HDF4
> is one of those drivers (the HDF4 libs need a "real" filename). You can
> generally check if a file system supports vsi virtual file systems by
> issuing
> "gdalinfo --format name_of_driver"
>
> For a compatible driver (such as VRT, but not HDF4), you'll see :
>  Supports: Virtual IO - eg. /vsimem/
>
> > Hey all,
> >
> > I'm working on an app that needs to pass HDF4 files (MODIS tiles) around
> as
> > byte arrays, and then open them up using gdal#Open, from java. Open works
> > great when I pass in the filepath, so I know that my gdal setup is solid.
> >
> > The problem is, when I turn the HDF4 file into a byte array and try to
> use
> >
> > gdal.FileFromMemBuffer("/vsimem/test.hdf", bytearray);
> > DataSet data = gdal.Open("/vsimem/test.hdf");
> >
> > I get an error that reads: "`/vsimem/test.hdf' not recognised as a
> > supported file format."
> >
> > I tried something similar, by converting
> >
> > <VRTDataset rasterXSize=\"1\" rasterYSize=\"1\">
> >   <GeoTransform>100,1,0,100,0,-1</GeoTransform>
> >   <VRTRasterBand dataType=\"Byte\" band=\"1\">
> >   </VRTRasterBand>
> > </VRTDataset>
> >
> > to a byte array and reading it in, and that worked great.
> >
> > Any ideas on how to deal with this issue? I'll note that open SEES the
> file
> > in the /vsimem/ directory, it just doesn't recognize it as a valid file.
> Is
> > this an issue with HDF4 files, or with large binary sequences? Any ideas
> on
> > how to get around this?
> >
> > Thanks, all,
> > Sam
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/882ec95f/attachment.html
From ragi at burhum.com  Mon Jan 24 18:18:06 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Mon Jan 24 18:18:09 2011
Subject: [gdal-dev] FileGDB API support for OGR
Message-ID: <AANLkTikjEebMF+jr6=uitQwCMtjpQeSUFLMo425Sh=eS@mail.gmail.com>

Hello list,

I checked it a **very alpha** version of a driver that uses the FileGDB API
http://resources.arcgis.com/content/geodatabases/10.0/file-gdb-api

It was mostly plumbing work, so right now it is very limited:

- Only works with Points (it is all the samples where doing). The "API"
published the spec for the binary format, but the accessor methods only
provide access to the binary array, which means
that there still needs a lot more of binary tinkering and more sample files
to get it right.
- Readonly (even though it can be extended to do write support).
- Currently, ESRI's FileGDB API only exposes the schema through a new XML
format available in 10, which probably means that it will only work with
FileGDBs 10 or higher.

Don't use it with production data! Feel free to tinker with it, let me know
how it goes.

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110124/a2630638/attachment.html
From acembro at yahoo.com  Tue Jan 25 10:25:10 2011
From: acembro at yahoo.com (Alain Cembro)
Date: Tue Jan 25 10:31:52 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
Message-ID: <617649.14230.qm@web120402.mail.ne1.yahoo.com>

Hello list,
I have written a Python program to create ECW files. It is working fine under Linux, but not under Windows XP.
I have installed :
- Python 2.6.6 (the official version)
- gdal-18-1500-core.msi
- gdal-18-1500-ecw.msi
- GDAL-1.8.0.win32-py2.6.exe
I downloaded the last three files at http://vbkto.dyndns.org/sdk/

GDAL is working :
- gdalinfo lists the ECW format as available (rw).
- I can create ECW files with gdal_translate.

But in a Python console, osgeo.gdal.getDriverByName("ECW") return None.
Is it a known problem, or is there something wrong in my installation ?

Thanks for any help.



      
From ivan.lucena at pmldnet.com  Tue Jan 25 10:56:56 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Jan 25 10:56:59 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHJvYmxlbSB3aXRoIEdEQUwgUHl0aG9uIGJpbmRpbmdzIGFuZCBFQ1cgZm9ybWF0IHVuZGVyIFdpbmRvd3M=?=
In-Reply-To: <617649.14230.qm@web120402.mail.ne1.yahoo.com>
References: <617649.14230.qm@web120402.mail.ne1.yahoo.com>
Message-ID: <20110125155657.26195.qmail@s466.sureserver.com>

Alain,

Do you have the GDAL_DRIVER_PATH environment variable set on your Windows system?

C:\>echo %GDAL_DRIVER_PATH%
C:\Apps\GDAL\bin\gdalplugins

That is what going to make the GDAL dll inside the Python process to find the plugins. GDAL command line tools doesn't need that because they get it from a default path relative to where they are installed ".\gdalplugins".

Regards,

Ivan


>  -------Original Message-------
>  From: Alain Cembro <acembro@yahoo.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under Windows
>  Sent: Jan 25 '11 10:25
>  
>  Hello list,
>  I have written a Python program to create ECW files. It is working fine under Linux, but not under Windows XP.
>  I have installed :
>  - Python 2.6.6 (the official version)
>  - gdal-18-1500-core.msi
>  - gdal-18-1500-ecw.msi
>  - GDAL-1.8.0.win32-py2.6.exe
>  I downloaded the last three files at http://vbkto.dyndns.org/sdk/
>  
>  GDAL is working :
>  - gdalinfo lists the ECW format as available (rw).
>  - I can create ECW files with gdal_translate.
>  
>  But in a Python console, osgeo.gdal.getDriverByName("ECW") return None.
>  Is it a known problem, or is there something wrong in my installation ?
>  
>  Thanks for any help.
>  
>  
>  
>  ??????
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From acembro at yahoo.com  Tue Jan 25 11:31:11 2011
From: acembro at yahoo.com (Alain Cembro)
Date: Tue Jan 25 11:31:14 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <20110125155657.26195.qmail@s466.sureserver.com>
Message-ID: <11540.78493.qm@web120419.mail.ne1.yahoo.com>

--- On Tue, 1/25/11, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:

> Do you have the GDAL_DRIVER_PATH environment variable set
> on your Windows system?
> 
> C:\>echo %GDAL_DRIVER_PATH%
> C:\Apps\GDAL\bin\gdalplugins

Ivan,
You are right, I forgot to set that variable. Now it is working. Thank you very much !

Tamas,
Could you improve the Windows GDAL installer, so that it automatically sets the environment variables (GDAL_DATA and GDAL_DRIVER_PATH), and adds the GDAL binaries path to the PATH environment variable ?

Thanks !


      
From jason.roberts at duke.edu  Tue Jan 25 11:47:08 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 25 11:47:11 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format
	under	Windows
In-Reply-To: <11540.78493.qm@web120419.mail.ne1.yahoo.com>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
Message-ID: <06fc01cbbcaf$81b78da0$8526a8e0$@roberts@duke.edu>

Alain

I think the solution that Tamas proposed for that problem is not to
automatically set the environment variables, but instead to modify the GDAL
core installer to store the installation location in the registry and then
have the Python bindings read it and initialize GDAL by calling appropriate
GDAL functions. This solution would eliminate the need to set the
environment variables. For more information, review the long discussion on
the gdal-dev list for this from a couple of weeks ago.

(Tamas, correct me if I'm wrong about your proposal. And sorry I have not
had time to test it myself yet...)

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Alain Cembro
Sent: Tuesday, January 25, 2011 11:31 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem with GDAL Python bindings and ECW format
under Windows

--- On Tue, 1/25/11, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:

> Do you have the GDAL_DRIVER_PATH environment variable set
> on your Windows system?
> 
> C:\>echo %GDAL_DRIVER_PATH%
> C:\Apps\GDAL\bin\gdalplugins

Ivan,
You are right, I forgot to set that variable. Now it is working. Thank you
very much !

Tamas,
Could you improve the Windows GDAL installer, so that it automatically sets
the environment variables (GDAL_DATA and GDAL_DRIVER_PATH), and adds the
GDAL binaries path to the PATH environment variable ?

Thanks !


      
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Tue Jan 25 15:03:14 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan 25 15:03:17 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <2959251669171452546@unknownmsgid>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
Message-ID: <AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>

2011/1/25 Jason Roberts <jason.roberts@duke.edu>

> Tamas,
> Could you improve the Windows GDAL installer, so that it automatically sets
> the environment variables (GDAL_DATA and GDAL_DRIVER_PATH), and adds the
> GDAL binaries path to the PATH environment variable ?
>
>

I will  do some improvements in the installers to make the things easier.
Modifying the environment should only be happen upon the user's request and
shouldn't be done automatically in my opinion. I would create a custom
dialog in the installer where the user can allow this setting to be happen.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110125/2b771180/attachment.html
From jason.roberts at duke.edu  Tue Jan 25 15:11:14 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 25 15:11:17 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
Message-ID: <072d01cbbccc$04bb5fd0$0e321f70$@roberts@duke.edu>

Tamas,

 

Are you still planning to implement the registry-based approach? I ask because you seemed in favor of avoiding modifying PATH, if at all possible (a position I agree with), and the registry approach would eliminate that need while still making GDAL + bindings ?just work?.

 

Thanks,

jason

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Tuesday, January 25, 2011 3:03 PM
To: Jason Roberts
Cc: Alain Cembro; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem with GDAL Python bindings and ECW format under Windows

 

 

2011/1/25 Jason Roberts <jason.roberts@duke.edu>

Tamas,
Could you improve the Windows GDAL installer, so that it automatically sets
the environment variables (GDAL_DATA and GDAL_DRIVER_PATH), and adds the
GDAL binaries path to the PATH environment variable ?



I will  do some improvements in the installers to make the things easier. Modifying the environment should only be happen upon the user's request and shouldn't be done automatically in my opinion. I would create a custom dialog in the installer where the user can allow this setting to be happen.

Best regards,

Tamas



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110125/d1b363e3/attachment.html
From fernando.cacciola at gmail.com  Tue Jan 25 15:09:16 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Tue Jan 25 15:15:08 2011
Subject: [gdal-dev] Problem with GEOTIFF
Message-ID: <ihnalc$7ea$1@dough.gmane.org>

Hello,

I have a geotiff image which, according to its accompaning htm, uses the 
WGS_1984 Datum.

However, when I call GDALGetProjectionRef() it fails, returning
"GCS tag not found", plus

ENR_L01.tif (from ENR_L01.zip)
Failed to setup Geographic Coordinate System
FAILED with error: 2


gdalinfo reports:

Driver: GTiff/GeoTIFF
Files: enr_p01.tif
        enr_p01.tif.aux.xml
Size is 20000, 7998
Coordinate System is `'
Metadata:
   TIFFTAG_SOFTWARE=GPL Ghostscript 8.71
   TIFFTAG_DATETIME=2010:12:29 07:58:38
   TIFFTAG_XRESOLUTION=400
   TIFFTAG_YRESOLUTION=400
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
   COMPRESSION=LZW
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 7998.0)
Upper Right (20000.0,    0.0)
Lower Right (20000.0, 7998.0)
Center      (10000.0, 3999.0)
Band 1 Block=20000x1 Type=Byte, ColorInterp=Red
Band 2 Block=20000x1 Type=Byte, ColorInterp=Green
Band 3 Block=20000x1 Type=Byte, ColorInterp=Blue


What can I do?

TIA

-- 
---
Fernando Cacciola
SciSoft Consulting, Founder
http://www.scisoft-consulting.com

From szekerest at gmail.com  Tue Jan 25 17:30:16 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan 25 17:30:20 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <-3208867389057209030@unknownmsgid>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
	<-3208867389057209030@unknownmsgid>
Message-ID: <AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>

2011/1/25 Jason Roberts <jason.roberts@duke.edu>

> Tamas,
>
>
>
> Are you still planning to implement the registry-based approach? I ask
> because you seemed in favor of avoiding modifying PATH, if at all possible
> (a position I agree with), and the registry approach would eliminate that
> need while still making GDAL + bindings ?just work?.
>
>

Jason,

As the time permits, I'll do some tests in this regard. Since not only the
PATH, but other environment settings should also be applied, I consider a
bootstrap dll to be implemented for all bindings. The only issue is that
where to place this dll file to make it available for all for all bindings
to load. May be into the system directory (?)

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110125/46139017/attachment.html
From jason.roberts at duke.edu  Tue Jan 25 17:57:25 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 25 17:57:28 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
	<-3208867389057209030@unknownmsgid>
	<AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>
Message-ID: <075001cbbce3$3bfee630$b3fcb290$@roberts@duke.edu>

Rather than introduce a DLL into the system directory, why not statically link the code into the bindings themselves, when possible? Or document the appropriate logic for doing it with win32 functions (registry functions, LoadLibrary, GetProcAddress) and allow the bindings to make those calls themselves? Most languages have a way to access win32 functions. It just seems unnecessarily risky and complicated to create a new DLL and put it in the system directory, IMHO.

 

Jason

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Tuesday, January 25, 2011 5:30 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem with GDAL Python bindings and ECW format under Windows

 

2011/1/25 Jason Roberts <jason.roberts@duke.edu>

Tamas,

 

Are you still planning to implement the registry-based approach? I ask because you seemed in favor of avoiding modifying PATH, if at all possible (a position I agree with), and the registry approach would eliminate that need while still making GDAL + bindings ?just work?.

 

Jason,

As the time permits, I'll do some tests in this regard. Since not only the PATH, but other environment settings should also be applied, I consider a bootstrap dll to be implemented for all bindings. The only issue is that where to place this dll file to make it available for all for all bindings to load. May be into the system directory (?)

Best regards,

Tamas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110125/7a8c30d6/attachment-0001.html
From kmichael.aye at gmail.com  Tue Jan 25 18:00:30 2011
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Tue Jan 25 18:00:53 2011
Subject: [gdal-dev] GDALGetRandomRasterSample in gdalinfo.py
Message-ID: <ihnkme$tah$1@dough.gmane.org>

Dear all,

I am puzzled how this function works in the current gdalinfo.py from here:

http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/gdalinfo.py

because I can't see any 'import' that would make this function known?

Could somebody lift the veil for me? ;)

Best regards,
Michael 


From Chris.Barker at noaa.gov  Tue Jan 25 18:19:52 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jan 25 18:19:56 2011
Subject: [gdal-dev] GDALGetRandomRasterSample in gdalinfo.py
In-Reply-To: <ihnkme$tah$1@dough.gmane.org>
References: <ihnkme$tah$1@dough.gmane.org>
Message-ID: <4D3F5A98.5070402@noaa.gov>

On 1/25/11 3:00 PM, K.-Michael Aye wrote:
> Dear all,
>
> I am puzzled how this function works in the current gdalinfo.py from here:
>
> http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/gdalinfo.py
>
> because I can't see any 'import' that would make this function known?
>
> Could somebody lift the veil for me? ;)

I only see that in commented out code -- so that may be from when gdal 
was imported differently.

Though I don't see it in the gdal namespace, either. Maybe it is no 
longer exposed in the Bindings?

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ricardo.garcia.silva at gmail.com  Tue Jan 25 18:20:50 2011
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue Jan 25 18:21:14 2011
Subject: [gdal-dev] accessing HDF5 metadata
Message-ID: <AANLkTi=UFSDopUy0AXR=vF4h8hnb6W=CyK_7wJT-gBNE@mail.gmail.com>

Hi list
I am using the python bindings to handle some HDF5 data.
Up until now I had been using another python module (pytables) to
access the file's metadata and then GDAL to do some further
processing, but I am trying to depend only on GDAL for this issue, as
it seems it might be enough for the task I'm trying to perform.

The problem: I can't seem to read the attributes of the root node in
my HDF5 files, although I can access them at the band level.
I've found a ticket[1] that is indirectly referring to this subject.
However, I am not clear if the issue discussed in the ticket has been
resolved (probably in the new GDAL 1.8) and wether its resolution
would have the (great, at least for me) side-effect of allowing the
displaying of attributes at the root node. I have posted an online[2]
HDF5 file, in case it is helpful.

Can someone please elaborate a bit on this matter? Thanks

[1] - http://trac.osgeo.org/gdal/ticket/2412
[2] - http://ubuntuone.com/p/a9z/

-- 
___________________________ ___ __
Ricardo Garcia Silva
From kmichael.aye at gmail.com  Tue Jan 25 18:34:00 2011
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Tue Jan 25 18:34:17 2011
Subject: [gdal-dev] Re: GDALGetRandomRasterSample in gdalinfo.py
References: <ihnkme$tah$1@dough.gmane.org> <4D3F5A98.5070402@noaa.gov>
Message-ID: <ihnml8$7nr$1@dough.gmane.org>

On 2011-01-26 00:19:52 +0100, Christopher Barker said:

> 
> I only see that in commented out code -- so that may be from when gdal 
> was imported differently.

Uff, sorry for the noise. It's late here, need to go to bed.

But thanks for the help!

Michael



From Chris.Barker at noaa.gov  Tue Jan 25 18:50:25 2011
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jan 25 18:50:31 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <075001cbbce3$3bfee630$b3fcb290$%roberts@duke.edu>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
	<-3208867389057209030@unknownmsgid>
	<AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>
	<075001cbbce3$3bfee630$b3fcb290$%roberts@duke.edu>
Message-ID: <4D3F61C1.7060103@noaa.gov>

On 1/25/11 2:57 PM, Jason Roberts wrote:
> Rather than introduce a DLL into the system directory, why not
> statically link the code into the bindings themselves, when possible?

we did go through that, and it's one option, but for those of us that 
use gdal with C programs, python, with the utilities, all -- it's nice 
to know that you're using the exact same version for everything.

> document the appropriate logic for doing it with win32 functions
> (registry functions, LoadLibrary, GetProcAddress) and allow the bindings
> to make those calls themselves? Most languages have a way to access
> win32 functions.

yeah, but ugly and platform dependent. (of course, I just have a 
distaste for the registry)

I thought we had more or less come up with a consensus that the language 
bindings (Python, anyway) would take care of finding gdal and setting up 
the environment, and that we would facility things "just working" by 
using standard install locations.

This would let casual users have a simple "run the installers and it 
works" experience, but more sophisticated users could easily customize 
their systems, have multiple versions installed, etc.

And no installers would set anything up system wide.

(though I have no problem with a "check this if you want the Environment 
set up" box in the gdal installer)



> It just seems unnecessarily risky and complicated to
> create a new DLL and put it in the system directory, IMHO.

agreed.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jason.roberts at duke.edu  Tue Jan 25 19:07:10 2011
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 25 19:07:16 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format
	under	Windows
In-Reply-To: <4D3F61C1.7060103@noaa.gov>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
	<-3208867389057209030@unknownmsgid>
	<AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>
	<075001cbbce3$3bfee630$b3fcb290$%roberts@duke.edu>
	<4D3F61C1.7060103@noaa.gov>
Message-ID: <077001cbbcec$fa8e88e0$efab9aa0$@roberts@duke.edu>

I didn't think we were discussing platform-independent solution for linking bindings with the GDAL libs, as different operating systems have radically different installation locations. The existing platform-independent way to do it is to put GDAL's binary directory in the PATH. That is what I thought we were trying to get away from on Windows, in an attempt to solve DLL hell and the "just works" requirement at the same time. If we eliminate environment variables from the candidate solutions, the only other two that have been discussed in any detail are using the registry (Tamas's suggestion) and what I called "documenting the appropriate logic". That latter approach might also be called "checking in a well known location" or something like that.

Anyway, this is why we need an RFC, as Frank requested. I still intend to write one when I can get free from my day job responsibilities, assuming someone else doesn't write one first...

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christopher Barker
Sent: Tuesday, January 25, 2011 6:50 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem with GDAL Python bindings and ECW format under Windows

On 1/25/11 2:57 PM, Jason Roberts wrote:
> Rather than introduce a DLL into the system directory, why not
> statically link the code into the bindings themselves, when possible?

we did go through that, and it's one option, but for those of us that 
use gdal with C programs, python, with the utilities, all -- it's nice 
to know that you're using the exact same version for everything.

> document the appropriate logic for doing it with win32 functions
> (registry functions, LoadLibrary, GetProcAddress) and allow the bindings
> to make those calls themselves? Most languages have a way to access
> win32 functions.

yeah, but ugly and platform dependent. (of course, I just have a 
distaste for the registry)

I thought we had more or less come up with a consensus that the language 
bindings (Python, anyway) would take care of finding gdal and setting up 
the environment, and that we would facility things "just working" by 
using standard install locations.

This would let casual users have a simple "run the installers and it 
works" experience, but more sophisticated users could easily customize 
their systems, have multiple versions installed, etc.

And no installers would set anything up system wide.

(though I have no problem with a "check this if you want the Environment 
set up" box in the gdal installer)



> It just seems unnecessarily risky and complicated to
> create a new DLL and put it in the system directory, IMHO.

agreed.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From antonio.valentino at tiscali.it  Wed Jan 26 03:48:54 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Jan 26 03:55:37 2011
Subject: [gdal-dev] accessing HDF5 metadata
In-Reply-To: <AANLkTi=UFSDopUy0AXR=vF4h8hnb6W=CyK_7wJT-gBNE@mail.gmail.com>
References: <AANLkTi=UFSDopUy0AXR=vF4h8hnb6W=CyK_7wJT-gBNE@mail.gmail.com>
Message-ID: <20110126094854.711c6a60@asigrid01>

Hi Ricardo,

Il giorno Tue, 25 Jan 2011 23:20:50 +0000
Ricardo Filipe Soares Garcia da <ricardo.garcia.silva@gmail.com> ha
scritto:

> Hi list
> I am using the python bindings to handle some HDF5 data.
> Up until now I had been using another python module (pytables) to
> access the file's metadata and then GDAL to do some further
> processing, but I am trying to depend only on GDAL for this issue, as
> it seems it might be enough for the task I'm trying to perform.
> 
> The problem: I can't seem to read the attributes of the root node in
> my HDF5 files, although I can access them at the band level.
> I've found a ticket[1] that is indirectly referring to this subject.
> However, I am not clear if the issue discussed in the ticket has been
> resolved (probably in the new GDAL 1.8) and wether its resolution
> would have the (great, at least for me) side-effect of allowing the
> displaying of attributes at the root node. I have posted an online[2]
> HDF5 file, in case it is helpful.
> 
> Can someone please elaborate a bit on this matter? Thanks
> 
> [1] - http://trac.osgeo.org/gdal/ticket/2412
> [2] - http://ubuntuone.com/p/a9z/

The ticket you mentioned includes a patch that probably provides the
functionality you are looking for but it is still not included in GDAL.

It would be nice if you could give it a try and report us if it
actually has the expected behavior or if you need something different.

Please let me know if the patch still applies clearly to the current
trunk or if it needs an update.

regards

-- 
Antonio Valentino
From szekerest at gmail.com  Wed Jan 26 04:19:38 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan 26 04:19:41 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <-5460010739520579096@unknownmsgid>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
	<-3208867389057209030@unknownmsgid>
	<AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>
	<-5460010739520579096@unknownmsgid>
Message-ID: <AANLkTinYP4MD+n595xvYUvNzqcEZsLnRPU2b4oB7ksmq@mail.gmail.com>

2011/1/25 Jason Roberts <jason.roberts@duke.edu>

> Rather than introduce a DLL into the system directory, why not statically
> link the code into the bindings themselves, when possible? Or document the
> appropriate logic for doing it with win32 functions (registry functions,
> LoadLibrary, GetProcAddress) and allow the bindings to make those calls
> themselves? Most languages have a way to access win32 functions. It just
> seems unnecessarily risky and complicated to create a new DLL and put it in
> the system directory, IMHO.
>
>
Jason,

I think it would be more compicated to be familiar with all languages and
implement the same thing in several ways. Creating a dll which can be loaded
for all languages would be a more trivial solution IMHO. Unfortunately I
don't think I have enough knowledge to implement such things in a language
specific way.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110126/d3cd0137/attachment.html
From ahmettemiz88 at gmail.com  Wed Jan 26 05:15:45 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Wed Jan 26 05:15:47 2011
Subject: [gdal-dev] confused about using gdal_rasterize
Message-ID: <AANLkTinos_+FM8gDHpShR0P6coTsms6Z3QJJm4Z5Gtei@mail.gmail.com>

hello I am confused about using gdal_rasterize

I want to rasterize a geological map (vector polygons)
and having one attributes and making nodata areas
as transparent.

how can I do that ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From b.morabito at tdnet.it  Wed Jan 26 08:33:16 2011
From: b.morabito at tdnet.it (morabit)
Date: Wed Jan 26 08:33:17 2011
Subject: [gdal-dev] projection in external file
Message-ID: <1296048796463-5962689.post@n2.nabble.com>


Hi All,
 In our project we have to support the loading of tiff images 
that will be geo-referenced by means of external companion
files containing the affine geo transformation and projection
information (WKT).
We have tested that GDAL supports external geo-transform
using .tfw files, but we are not able to load WKT info included
in companion .proj or .wkt files. 
Does GDAL support this kind of feature? 
Perhaps it supports this feature using some other format (aux.xml)? 
In case of positive answer, what is the right way to accomplish this?

Thank you for your attention
Bruno    
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/projection-in-external-file-tp5962689p5962689.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Wed Jan 26 11:13:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jan 26 11:13:12 2011
Subject: [gdal-dev] confused about using gdal_rasterize
In-Reply-To: <AANLkTinos_+FM8gDHpShR0P6coTsms6Z3QJJm4Z5Gtei@mail.gmail.com>
References: <AANLkTinos_+FM8gDHpShR0P6coTsms6Z3QJJm4Z5Gtei@mail.gmail.com>
Message-ID: <AANLkTikRbTyr+j68QME_86upiGAFazCTz9XBMbXq9t92@mail.gmail.com>

Ahmet,

Transparency can be easily set using the alpha channel in RGBA images. Use
the -init option to set the background to transparent. Make sure this is
equal to the value set as nodata.
You can set the nodata value using the -a_nodata option.
Make the rasterized areas visible by setting the alpha channel to 255 (or
the maximum value of that data type).

If you are burning the values using an attribute or the Z values, you will
have to create the alpha channel as a separate image and combine the images.

2011/1/26 ahmet temiz <ahmettemiz88@gmail.com>

> hello I am confused about using gdal_rasterize
>
> I want to rasterize a geological map (vector polygons)
> and having one attributes and making nodata areas
> as transparent.
>
> how can I do that ?
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110126/c79fbb5b/attachment.html
From matt.wilkie at gov.yk.ca  Wed Jan 26 13:45:12 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Jan 26 13:46:21 2011
Subject: [gdal-dev] FileGDB API beta opens
Message-ID: <4D406BB8.10902@gov.yk.ca>

Hi All,

The File Geodatabase API - Beta is now open. [1] Accessing the api 
download and fgdb-api forum requires an ESRI global account (free). The 
licensing agreement is voluminous, almost 5 thousand words.[2] I've 
scanned through it as best I could looking for show-stoppers. I don't 
_think_ I saw any; more eyes should have a look to make sure. There are 
phrases like "Licensee may not share or release Feedback or results of 
Beta testing with any third party." which could be constricting.

[1] http://resources.arcgis.com/content/geodatabases/10.0/file-gdb-api
[2] http://resources.arcgis.com/node/agreement/3193

cheers,

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From warmerdam at pobox.com  Wed Jan 26 18:07:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 26 18:08:01 2011
Subject: [gdal-dev] projection in external file
In-Reply-To: <1296048796463-5962689.post@n2.nabble.com>
References: <1296048796463-5962689.post@n2.nabble.com>
Message-ID: <4D40A94D.5020205@pobox.com>

On 11-01-26 08:33 AM, morabit wrote:
>
> Hi All,
>   In our project we have to support the loading of tiff images
> that will be geo-referenced by means of external companion
> files containing the affine geo transformation and projection
> information (WKT).
> We have tested that GDAL supports external geo-transform
> using .tfw files, but we are not able to load WKT info included
> in companion .proj or .wkt files.
> Does GDAL support this kind of feature?
> Perhaps it supports this feature using some other format (aux.xml)?
> In case of positive answer, what is the right way to accomplish this?

Bruno,

Yes, it should be possible to embed a coordinate system in an .aux.xml file
and have GDAL utilize it transparently for GeoTIFF files.  I have attached
an example .aux.xml file with a coordinate system and geotransform in it.
Note that the coordinate system is in WKT, but with XML encoding of special
characters like quotes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
A non-text attachment was scrubbed...
Name: out.tif.aux.xml
Type: text/xml
Size: 983 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110126/d5b1d21c/out.tif.aux.xml
From warmerdam at pobox.com  Wed Jan 26 21:16:38 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 26 21:16:41 2011
Subject: [gdal-dev] Problem with GEOTIFF
In-Reply-To: <ihnalc$7ea$1@dough.gmane.org>
References: <ihnalc$7ea$1@dough.gmane.org>
Message-ID: <4D40D586.5010603@pobox.com>

On 11-01-25 03:09 PM, Fernando Cacciola wrote:
> Hello,
>
> I have a geotiff image which, according to its accompaning htm, uses the
> WGS_1984 Datum.
>
> However, when I call GDALGetProjectionRef() it fails, returning
> "GCS tag not found", plus
>
> ENR_L01.tif (from ENR_L01.zip)
> Failed to setup Geographic Coordinate System
> FAILED with error: 2
...
>
>
> What can I do?

Fernando,

It might be helpful to see a listgeo report on the tiff file.  Listgeo
is a utility associated with libgeotiff and might already be available on
your system or easily installed.

I haven't been able to identify where the "GCS tag not found" error message
is coming from.  It does not seem to be part of the OGRSpatialReference,
GeoTIFF driver, or libgeotiff code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fernando.cacciola at gmail.com  Wed Jan 26 22:26:03 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Wed Jan 26 22:26:18 2011
Subject: [gdal-dev] Re: Problem with GEOTIFF
In-Reply-To: <4D40D586.5010603@pobox.com>
References: <ihnalc$7ea$1@dough.gmane.org> <4D40D586.5010603@pobox.com>
Message-ID: <ihqok7$v4m$1@dough.gmane.org>

Hi Frank,

Thanks for the reply.

On 1/26/2011 11:16 PM, Frank Warmerdam wrote:
> On 11-01-25 03:09 PM, Fernando Cacciola wrote:
>> Hello,
>>
>> I have a geotiff image which, according to its accompaning htm, uses the
>> WGS_1984 Datum.
>>
>> However, when I call GDALGetProjectionRef() it fails, returning
>> "GCS tag not found", plus
>>
>> ENR_L01.tif (from ENR_L01.zip)
>> Failed to setup Geographic Coordinate System
>> FAILED with error: 2
> ...
>>
>>
>> What can I do?
>
> Fernando,
>
> It might be helpful to see a listgeo report on the tiff file. Listgeo
> is a utility associated with libgeotiff and might already be available on
> your system or easily installed.
>
OK, I have it already so here is the information:

Corner Coordinates:
  ... unable to transform points between pixel/line and PCS space
Geotiff_Information:
    Version: 1
    Key_Revision: 1.0
    Tagged_Information:
       End_Of_Tags.
    Keyed_Information:
       End_Of_Keys.
    End_Of_Geotiff.

I noticed that this dataset is made of 4 files:

enr_p01.aux
enr_p01.tfwx
enr_p01.tif
enr_p01.tif.aux.xml

Oddly, the xml file contains this tag:

<WKT>PROJCS[&quot;Pac_chart&quot;,GEOGCS[&quot;GCS_WGS_1984&quot;,DATUM[&quot;D_WGS_1984&quot;.....

so it seems like the data is there after all.

> I haven't been able to identify where the "GCS tag not found" error message
> is coming from. It does not seem to be part of the OGRSpatialReference,

That is the content of the string returned by GDALGetProjectionRef()

Best

-- 
---
Fernando Cacciola
SciSoft Consulting, Founder
http://www.scisoft-consulting.com

From gregcorradini at gmail.com  Wed Jan 26 22:29:16 2011
From: gregcorradini at gmail.com (Greg Corradini)
Date: Wed Jan 26 22:29:19 2011
Subject: [gdal-dev] gdal-config file lists different directories for libodbc
	and libodbcinst
Message-ID: <AANLkTimN4rR-6=zfxi-=5KG2dSHNK-qsX2KbNxAWiPsm@mail.gmail.com>

Hello,

I'm trying to understand why my gdal-config file says libodbc(-lodbc) and
libodbcinst(-lodbcinst) are located in /usr/local/lib:

CONFIG_LIBS="-L/usr/local/lib -lgdal"
CONFIG_DEP_LIBS=" -L/usr/local/lib -lgeos_c  -lsqlite3 -lodbc -lodbcinst
-lxerces-c -lpthread -ljasper -lhdf5 -lmfhdfalt -ldfalt -lgif -ljpeg -lpng
-lnetcdf -L/usr/lib -lpq -lz -lpthread -lm -lrt -ldl    -lcurl
-Wl,-Bsymbolic-functions


This doesn't make sense considering this:

$ sudo find /usr -name libodbc*

/usr/lib32/libodbcinst.so.1
/usr/lib32/libodbccr.so
/usr/lib32/odbc/libodbcpsqlS.so
/usr/lib32/odbc/libodbctxtS.so
/usr/lib32/odbc/libodbcminiS.so
/usr/lib32/odbc/libodbcmyS.so
/usr/lib32/odbc/libodbcnnS.so
/usr/lib32/odbc/libodbcdrvcfg2S.so
/usr/lib32/odbc/libodbcdrvcfg1S.so
/usr/lib32/libodbccr.so.1
/usr/lib32/libodbccr.so.1.0.0
/usr/lib32/libodbc.so.1
/usr/lib32/libodbcinst.so
/usr/lib32/wine/libodbccp32.def
/usr/lib32/wine/libodbc32.def
/usr/lib32/libodbc.so
/usr/lib32/libodbcinst.so.1.0.0
/usr/lib32/libodbc.so.1.0.0
/usr/lib/libodbcinst.so.1
/usr/lib/libodbcinstQ.so.1
/usr/lib/odbc/libodbcpsqlS.so
/usr/lib/odbc/libodbctxtS.so
/usr/lib/odbc/libodbcminiS.so
/usr/lib/odbc/libodbcmyS.so
/usr/lib/odbc/libodbcnnS.so
/usr/lib/odbc/libodbcdrvcfg2S.so
/usr/lib/odbc/libodbcdrvcfg1S.so
/usr/lib/libodbccr.so.1
/usr/lib/libodbccr.so.1.0.0
/usr/lib/libodbc.so.1
/usr/lib/libodbcinstQ.so.1.0.0
/usr/lib/libodbcinst.so.1.0.0
/usr/lib/libodbc.so.1.0.0
/usr/share/doc/libodbcinstq1c2

Or considering the output of the following 'ldconfig' line  puts them in the
same place as 'find' above

$ ldconfig -v >/tmp/ldconfig.output.txt 2>&1

I built GDAL 1.8.0 from source on Ubuntu 10.10

any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110126/2c6eb513/attachment.html
From warmerdam at pobox.com  Wed Jan 26 22:32:21 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 26 22:32:28 2011
Subject: [gdal-dev] Re: Problem with GEOTIFF
In-Reply-To: <ihqok7$v4m$1@dough.gmane.org>
References: <ihnalc$7ea$1@dough.gmane.org> <4D40D586.5010603@pobox.com>
	<ihqok7$v4m$1@dough.gmane.org>
Message-ID: <4D40E745.2020000@pobox.com>

On 11-01-26 10:26 PM, Fernando Cacciola wrote:
> OK, I have it already so here is the information:
>
> Corner Coordinates:
> ... unable to transform points between pixel/line and PCS space
> Geotiff_Information:
> Version: 1
> Key_Revision: 1.0
> Tagged_Information:
> End_Of_Tags.
> Keyed_Information:
> End_Of_Keys.
> End_Of_Geotiff.

Fernando,

The above tells us there is no coordinate system in the .tif itself.

> I noticed that this dataset is made of 4 files:
>
> enr_p01.aux
> enr_p01.tfwx
> enr_p01.tif
> enr_p01.tif.aux.xml
>
> Oddly, the xml file contains this tag:
>
> <WKT>PROJCS[&quot;Pac_chart&quot;,GEOGCS[&quot;GCS_WGS_1984&quot;,DATUM[&quot;D_WGS_1984&quot;.....
>
>
> so it seems like the data is there after all.

Ah.  I suspect this is a problem with having both an .aux and .aux.xml file.
I suppose the .aux file is being used and the .aux.xml file is ignored.
Try moving the .aux file somewhere out of the way and see if things
behave more properly.

If you can make the dataset available I  might be able to improve the
robustness of the logic for the case with a .aux and .aux.xml file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jan 26 22:39:20 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 26 22:39:24 2011
Subject: [gdal-dev] gdal-config file lists different directories for
	libodbc and libodbcinst
In-Reply-To: <AANLkTimN4rR-6=zfxi-=5KG2dSHNK-qsX2KbNxAWiPsm@mail.gmail.com>
References: <AANLkTimN4rR-6=zfxi-=5KG2dSHNK-qsX2KbNxAWiPsm@mail.gmail.com>
Message-ID: <4D40E8E8.6060505@pobox.com>

On 11-01-26 10:29 PM, Greg Corradini wrote:
> Hello,
>
> I'm trying to understand why my gdal-config file says libodbc(-lodbc) and
> libodbcinst(-lodbcinst) are located in /usr/local/lib:
>
> CONFIG_LIBS="-L/usr/local/lib -lgdal"
> CONFIG_DEP_LIBS=" -L/usr/local/lib -lgeos_c  -lsqlite3 -lodbc -lodbcinst
> -lxerces-c -lpthread -ljasper -lhdf5 -lmfhdfalt -ldfalt -lgif -ljpeg -lpng
> -lnetcdf -L/usr/lib -lpq -lz -lpthread -lm -lrt -ldl    -lcurl
> -Wl,-Bsymbolic-functions

Greg,

You are misreading the above.  The -L/usr/local/lib directive tells
the linker to look *first* in /usr/local/lib for libraries and then fallback
to the usual locations - normally /usr/lib.  It does not mean that all the
following libraries are expected to be found in /usr/local/lib.  Often the
configure logic puts a mismash of -L directives in the link directives
which can result in link time problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcorradini at gmail.com  Wed Jan 26 22:45:49 2011
From: gregcorradini at gmail.com (gregcorradini)
Date: Wed Jan 26 22:45:50 2011
Subject: [gdal-dev] Re: gdal-config file lists different directories for
 libodbc and libodbcinst
In-Reply-To: <4D40E8E8.6060505@pobox.com>
References: <AANLkTimN4rR-6=zfxi-=5KG2dSHNK-qsX2KbNxAWiPsm@mail.gmail.com>
	<4D40E8E8.6060505@pobox.com>
Message-ID: <1296099949848-5965120.post@n2.nabble.com>


Thnx for explaining Frank ;)
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdal-config-file-lists-different-directories-for-libodbc-and-libodbcinst-tp5965096p5965120.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From fernando.cacciola at gmail.com  Wed Jan 26 22:53:03 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Wed Jan 26 22:53:12 2011
Subject: [gdal-dev] Re: Problem with GEOTIFF
In-Reply-To: <4D40E745.2020000@pobox.com>
References: <ihnalc$7ea$1@dough.gmane.org>
	<4D40D586.5010603@pobox.com>	<ihqok7$v4m$1@dough.gmane.org>
	<4D40E745.2020000@pobox.com>
Message-ID: <ihqq6q$3q7$2@dough.gmane.org>

Hi Frank,

>> so it seems like the data is there after all.
>
> Ah. I suspect this is a problem with having both an .aux and .aux.xml file.
> I suppose the .aux file is being used and the .aux.xml file is ignored.
> Try moving the .aux file somewhere out of the way and see if things
> behave more properly.
>
That was a very good guess, but unfortunately it didn't change anything :(

> If you can make the dataset available I might be able to improve the
> robustness of the logic for the case with a .aux and .aux.xml file.
>
It'd be great if you can take a look at it.

Though even zipped is too big for an attachment. Do I email it to you?

Best regards

-- 
---
Fernando Cacciola
SciSoft Consulting, Founder
http://www.scisoft-consulting.com

From fernando.cacciola at gmail.com  Wed Jan 26 23:04:20 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Wed Jan 26 23:04:30 2011
Subject: [gdal-dev] Re: Problem with GEOTIFF
In-Reply-To: <4D40E745.2020000@pobox.com>
References: <ihnalc$7ea$1@dough.gmane.org>
	<4D40D586.5010603@pobox.com>	<ihqok7$v4m$1@dough.gmane.org>
	<4D40E745.2020000@pobox.com>
Message-ID: <ihqqrv$6oe$1@dough.gmane.org>

Hi Frank,

>
> If you can make the dataset available I might be able to improve the
> robustness of the logic for the case with a .aux and .aux.xml file.
>

Here's a link to the dataset from my dropbox account:

http://dl.dropbox.com/u/938865/ENR_P01.zip

Best regards,

-- 
Fernando Cacciola
SciSoft Consulting, Founder
http://www.scisoft-consulting.com

From Chris.Barker at noaa.gov  Wed Jan 26 23:31:37 2011
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Wed Jan 26 23:31:40 2011
Subject: [gdal-dev] Problem with GDAL Python bindings and ECW format under
	Windows
In-Reply-To: <077001cbbcec$fa8e88e0$efab9aa0$%roberts@duke.edu>
References: <20110125155657.26195.qmail@s466.sureserver.com>
	<11540.78493.qm@web120419.mail.ne1.yahoo.com>
	<2959251669171452546@unknownmsgid>
	<AANLkTimWjbh+L=Q=GGt5yj76PDc4VkoXeVGdpcXFedCF@mail.gmail.com>
	<-3208867389057209030@unknownmsgid>
	<AANLkTi=VHfj8tu4jZ751N+J4UuMb9D4weH0SsAk9JKRV@mail.gmail.com>
	<075001cbbce3$3bfee630$b3fcb290$%roberts@duke.edu>
	<4D3F61C1.7060103@noaa.gov>
	<077001cbbcec$fa8e88e0$efab9aa0$%roberts@duke.edu>
Message-ID: <4D40F529.4060401@noaa.gov>

On 1/25/11 4:07 PM, Jason Roberts wrote:
> I didn't think we were discussing platform-independent solution for
> linking bindings with the GDAL libs, as different operating systems
> have radically different installation locations.

sure, but pure python that points to a path, it a lot easier than 
looking in the registry for something.
> The existing
> platform-independent way to do it is to put GDAL's binary directory
> in the PATH.  That is what I thought we were trying to get away from
> on Windows, in an attempt to solve DLL hell and the "just works"
> requirement at the same time.

I thought having python set the PATH at the beginning o of the import 
was idea -- that way it wouldn't mess up anything else.


> Anyway, this is why we need an RFC, as Frank requested.

yup

> I still
> intend to write one when I can get free from my day job
> responsibilities, assuming someone else doesn't write one first...

I'm waiting for you... ;-)

Thanks,

-Chris



> Jason
>
> -----Original Message----- From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christopher
> Barker Sent: Tuesday, January 25, 2011 6:50 PM To:
> gdal-dev@lists.osgeo.org Subject: Re: [gdal-dev] Problem with GDAL
> Python bindings and ECW format under Windows
>
> On 1/25/11 2:57 PM, Jason Roberts wrote:
>> Rather than introduce a DLL into the system directory, why not
>> statically link the code into the bindings themselves, when
>> possible?
>
> we did go through that, and it's one option, but for those of us
> that use gdal with C programs, python, with the utilities, all --
> it's nice to know that you're using the exact same version for
> everything.
>
>> document the appropriate logic for doing it with win32 functions
>> (registry functions, LoadLibrary, GetProcAddress) and allow the
>> bindings to make those calls themselves? Most languages have a way
>> to access win32 functions.
>
> yeah, but ugly and platform dependent. (of course, I just have a
> distaste for the registry)
>
> I thought we had more or less come up with a consensus that the
> language bindings (Python, anyway) would take care of finding gdal
> and setting up the environment, and that we would facility things
> "just working" by using standard install locations.
>
> This would let casual users have a simple "run the installers and it
> works" experience, but more sophisticated users could easily
> customize their systems, have multiple versions installed, etc.
>
> And no installers would set anything up system wide.
>
> (though I have no problem with a "check this if you want the
> Environment set up" box in the gdal installer)
>
>
>
>> It just seems unnecessarily risky and complicated to create a new
>> DLL and put it in the system directory, IMHO.
>
> agreed.
>
> -Chris
>
>
>

From fernando.cacciola at gmail.com  Thu Jan 27 00:12:35 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Thu Jan 27 00:12:46 2011
Subject: [gdal-dev] General geotiff question
In-Reply-To: <ihnalc$7ea$1@dough.gmane.org>
References: <ihnalc$7ea$1@dough.gmane.org>
Message-ID: <ihqurv$la7$1@dough.gmane.org>

Hi,

I have a general question (and I don't know where else to ask, sorry if this is 
off-topic)

Can I assume that in practice the transformations from PCS to raster space are 
lineal?

That is, cropping a TIFF given 4 lat/lon corners amount to *simply* mapping the 
corners to (x,y) pairs?

IIUC this is not neccesarily true in terms of the GEOTIFF spec, but how is it in 
practice?

TIA

Fernando Cacciola

From fernando.cacciola at gmail.com  Thu Jan 27 00:14:13 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Thu Jan 27 00:15:07 2011
Subject: [gdal-dev] Re: General geotiff question
In-Reply-To: <ihqurv$la7$1@dough.gmane.org>
References: <ihnalc$7ea$1@dough.gmane.org> <ihqurv$la7$1@dough.gmane.org>
Message-ID: <ihquv0$la7$2@dough.gmane.org>

Ouch... on top of being off-topic, I hit Reply instead of Compose Message.

I'll get my coat.

-- 
---
Fernando Cacciola
SciSoft Consulting, Founder
http://www.scisoft-consulting.com

From ahmettemiz88 at gmail.com  Thu Jan 27 04:06:51 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Thu Jan 27 04:06:54 2011
Subject: [gdal-dev] to make black areas transparent
Message-ID: <AANLkTinEi1Ebr0Ad8ap9-TAqMOfW2oUJ2kAcd3gBSE7+@mail.gmail.com>

I want to make black areas transparent, and used:

gdalwarp -overwrite  -dstnodata 0 -dstalpha geobk_jeo.tif geobk_jeo2.png

it didn't make them transparent.

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From emmiolla at gmail.com  Thu Jan 27 04:10:12 2011
From: emmiolla at gmail.com (Emmiolla Emmiolla)
Date: Thu Jan 27 04:10:15 2011
Subject: [gdal-dev] copy features to empty shp file: extent problem
Message-ID: <AANLkTimpQND_M8NK9rsK6G=3Oq53=T1Km9pTz0TF98XT@mail.gmail.com>

Hello, all!

I need to copy features to the empty shp file.

The code is really simple:

    const char *pszDriverName = "ESRI Shapefile";
    OGRSFDriver *poDriver;

    OGRRegisterAll();

    poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
                pszDriverName );
    if( poDriver == NULL )
    {
        printf( "%s driver not available.\n", pszDriverName );
        exit( 1 );
    }

    OGRDataSource       *poDS;
    poDS = OGRSFDriverRegistrar::Open(
"C:\\ArcProjects\\Untamo\\Test\\test.shp", TRUE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n" );
        exit( 1 );
    }

        OGRLayer  *poLayer;
    poLayer = poDS->GetLayerByName( "test" );


        OGRDataSource       *poDS1;
    poDS1 = OGRSFDriverRegistrar::Open(
"C:\\ArcProjects\\Untamo\\Test\\arbukle0ot.shp", FALSE );
    if( poDS1 == NULL )
    {
        printf( "Open failed.\n" );
        exit( 1 );
    }

        OGRLayer  *featuresLayer;
    featuresLayer = poDS1->GetLayerByName( "arbukle0ot" );

    OGRFeature *poFeature;
    featuresLayer->ResetReading();
    while( (poFeature = featuresLayer->GetNextFeature()) != NULL )
    {

        OGRFeature *newFeature;

        newFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
        newFeature->SetField( "ID", 1);
                newFeature->SetGeometry(poFeature->GetGeometryRef());

        if( poLayer->CreateFeature(newFeature ) != OGRERR_NONE )
        {
           printf( "Failed to create feature in shapefile.\n" );
           exit( 1 );
        }

                 OGRFeature::DestroyFeature( newFeature );
         OGRFeature::DestroyFeature( poFeature );
    }

        OGRDataSource::DestroyDataSource( poDS );
        OGRDataSource::DestroyDataSource( poDS1 );
}

arbukle0ot.shp contains features,
test is empty shp file, that is created with ArcCatalog.

Now if you run this code, features will be copied, however the extent of the
shp file will be strange, as the MinX and MinY will be 0 and 0. (however it
should not be, the extent of each feature differs from zero)

The most interesting thing, that if you will take this test.shp, draw some
features in ArcMap, check extent (it will be the right one), than delete
this features to make shp file again empty, and run the code, the extent of
the output file be the correct!

I wonder, what is a problem?

emmiolla
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110127/2f1cd006/attachment.html
From P.Halls at york.ac.uk  Thu Jan 27 04:16:21 2011
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Jan 27 04:17:48 2011
Subject: [gdal-dev] copy features to empty shp file: extent problem
In-Reply-To: <AANLkTimpQND_M8NK9rsK6G=3Oq53=T1Km9pTz0TF98XT@mail.gmail.com>
References: <AANLkTimpQND_M8NK9rsK6G=3Oq53=T1Km9pTz0TF98XT@mail.gmail.com>
Message-ID: <4D4137E5.9060609@york.ac.uk>

Emmiolla,

    the problem is that OGR does not rewrite the extents when updating a 
dataset; it only calculates and writes the extents when creating a new dataset. 
  This is documented behaviour.  You are creating the dataset in ArcCatalog and 
then updating it with OGR, hence your problem.

    Is there any reason why you cannot create the dataset from OGR?  I do this 
regularly and have never had problems with ArcGIS reading this output.  It would 
require a few extra lines of code to define the attribute data, but these are 
very straightforward.

Best wishes,

Peter

Emmiolla Emmiolla wrote:
> Hello, all!
> 
> I need to copy features to the empty shp file.
> 
> The code is really simple:
> 
>     const char *pszDriverName = "ESRI Shapefile";
>     OGRSFDriver *poDriver;
> 
>     OGRRegisterAll();
> 
>     poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
>                 pszDriverName );
>     if( poDriver == NULL )
>     {
>         printf( "%s driver not available.\n", pszDriverName );
>         exit( 1 );
>     }
> 
>     OGRDataSource       *poDS;
>     poDS = OGRSFDriverRegistrar::Open(
> "C:\\ArcProjects\\Untamo\\Test\\test.shp", TRUE );
>     if( poDS == NULL )
>     {
>         printf( "Open failed.\n" );
>         exit( 1 );
>     }
> 
>         OGRLayer  *poLayer;
>     poLayer = poDS->GetLayerByName( "test" );
> 
> 
>         OGRDataSource       *poDS1;
>     poDS1 = OGRSFDriverRegistrar::Open(
> "C:\\ArcProjects\\Untamo\\Test\\arbukle0ot.shp", FALSE );
>     if( poDS1 == NULL )
>     {
>         printf( "Open failed.\n" );
>         exit( 1 );
>     }
> 
>         OGRLayer  *featuresLayer;
>     featuresLayer = poDS1->GetLayerByName( "arbukle0ot" );
> 
>     OGRFeature *poFeature;
>     featuresLayer->ResetReading();
>     while( (poFeature = featuresLayer->GetNextFeature()) != NULL )
>     {
> 
>         OGRFeature *newFeature;
> 
>         newFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
>         newFeature->SetField( "ID", 1);
>                 newFeature->SetGeometry(poFeature->GetGeometryRef());
> 
>         if( poLayer->CreateFeature(newFeature ) != OGRERR_NONE )
>         {
>            printf( "Failed to create feature in shapefile.\n" );
>            exit( 1 );
>         }
> 
>                  OGRFeature::DestroyFeature( newFeature );
>          OGRFeature::DestroyFeature( poFeature );
>     }
> 
>         OGRDataSource::DestroyDataSource( poDS );
>         OGRDataSource::DestroyDataSource( poDS1 );
> }
> 
> arbukle0ot.shp contains features,
> test is empty shp file, that is created with ArcCatalog.
> 
> Now if you run this code, features will be copied, however the extent of the
> shp file will be strange, as the MinX and MinY will be 0 and 0. (however it
> should not be, the extent of each feature differs from zero)
> 
> The most interesting thing, that if you will take this test.shp, draw some
> features in ArcMap, check extent (it will be the right one), than delete
> this features to make shp file again empty, and run the code, the extent of
> the output file be the correct!
> 
> I wonder, what is a problem?
> 
> emmiolla
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Acting Team Leader Applications Support Group,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: C/O IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From emmiolla at gmail.com  Thu Jan 27 05:08:57 2011
From: emmiolla at gmail.com (Emmiolla Emmiolla)
Date: Thu Jan 27 05:09:00 2011
Subject: [gdal-dev] copy features to empty shp file: extent problem
In-Reply-To: <4D4137E5.9060609@york.ac.uk>
References: <AANLkTimpQND_M8NK9rsK6G=3Oq53=T1Km9pTz0TF98XT@mail.gmail.com>
	<4D4137E5.9060609@york.ac.uk>
Message-ID: <AANLkTimYWsWe3EKYQoYbYL_m-D3uP5aprx5gXn9NSg=R@mail.gmail.com>

Hey, Peter!

Thank you for the hint.

Actually no much reason, i can remake my code to create a new shp file in
ogr.

Thank you!
emmiolla.

On Thu, Jan 27, 2011 at 11:16 AM, Peter J Halls <P.Halls@york.ac.uk> wrote:

> Emmiolla,
>
>   the problem is that OGR does not rewrite the extents when updating a
> dataset; it only calculates and writes the extents when creating a new
> dataset.  This is documented behaviour.  You are creating the dataset in
> ArcCatalog and then updating it with OGR, hence your problem.
>
>   Is there any reason why you cannot create the dataset from OGR?  I do
> this regularly and have never had problems with ArcGIS reading this output.
>  It would require a few extra lines of code to define the attribute data,
> but these are very straightforward.
>
> Best wishes,
>
> Peter
>
> Emmiolla Emmiolla wrote:
>
>> Hello, all!
>>
>> I need to copy features to the empty shp file.
>>
>> The code is really simple:
>>
>>    const char *pszDriverName = "ESRI Shapefile";
>>    OGRSFDriver *poDriver;
>>
>>    OGRRegisterAll();
>>
>>    poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
>>                pszDriverName );
>>    if( poDriver == NULL )
>>    {
>>        printf( "%s driver not available.\n", pszDriverName );
>>        exit( 1 );
>>    }
>>
>>    OGRDataSource       *poDS;
>>    poDS = OGRSFDriverRegistrar::Open(
>> "C:\\ArcProjects\\Untamo\\Test\\test.shp", TRUE );
>>    if( poDS == NULL )
>>    {
>>        printf( "Open failed.\n" );
>>        exit( 1 );
>>    }
>>
>>        OGRLayer  *poLayer;
>>    poLayer = poDS->GetLayerByName( "test" );
>>
>>
>>        OGRDataSource       *poDS1;
>>    poDS1 = OGRSFDriverRegistrar::Open(
>> "C:\\ArcProjects\\Untamo\\Test\\arbukle0ot.shp", FALSE );
>>    if( poDS1 == NULL )
>>    {
>>        printf( "Open failed.\n" );
>>        exit( 1 );
>>    }
>>
>>        OGRLayer  *featuresLayer;
>>    featuresLayer = poDS1->GetLayerByName( "arbukle0ot" );
>>
>>    OGRFeature *poFeature;
>>    featuresLayer->ResetReading();
>>    while( (poFeature = featuresLayer->GetNextFeature()) != NULL )
>>    {
>>
>>        OGRFeature *newFeature;
>>
>>        newFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
>>        newFeature->SetField( "ID", 1);
>>                newFeature->SetGeometry(poFeature->GetGeometryRef());
>>
>>        if( poLayer->CreateFeature(newFeature ) != OGRERR_NONE )
>>        {
>>           printf( "Failed to create feature in shapefile.\n" );
>>           exit( 1 );
>>        }
>>
>>                 OGRFeature::DestroyFeature( newFeature );
>>         OGRFeature::DestroyFeature( poFeature );
>>    }
>>
>>        OGRDataSource::DestroyDataSource( poDS );
>>        OGRDataSource::DestroyDataSource( poDS1 );
>> }
>>
>> arbukle0ot.shp contains features,
>> test is empty shp file, that is created with ArcCatalog.
>>
>> Now if you run this code, features will be copied, however the extent of
>> the
>> shp file will be strange, as the MinX and MinY will be 0 and 0. (however
>> it
>> should not be, the extent of each feature differs from zero)
>>
>> The most interesting thing, that if you will take this test.shp, draw some
>> features in ArcMap, check extent (it will be the right one), than delete
>> this features to make shp file again empty, and run the code, the extent
>> of
>> the output file be the correct!
>>
>> I wonder, what is a problem?
>>
>> emmiolla
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> --
>
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor & Acting Team Leader Applications Support Group,
>               Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: C/O IT Services, University of York, Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
> --------------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110127/a264b513/attachment.html
From fernando.cacciola at gmail.com  Thu Jan 27 07:23:49 2011
From: fernando.cacciola at gmail.com (Fernando Cacciola)
Date: Thu Jan 27 07:24:02 2011
Subject: [gdal-dev] Re: General geotiff question
In-Reply-To: <ihqurv$la7$1@dough.gmane.org>
References: <ihnalc$7ea$1@dough.gmane.org> <ihqurv$la7$1@dough.gmane.org>
Message-ID: <ihro4h$uj7$1@dough.gmane.org>

On 1/27/2011 2:12 AM, Fernando Cacciola wrote:
> Hi,
>
> I have a general question (and I don't know where else to ask, sorry if this is
> off-topic)
>
> Can I assume that in practice the transformations from PCS to raster space are
> lineal?
>
Never mind me... while this is true for, say, a normal mercator projection, it 
is not for a, say, transverse mercator projection, so in practice that's just wrong.

I'll just sample the unit square at a fixed high-enough resolution.

Best

-- 
---
Fernando Cacciola
SciSoft Consulting, Founder
http://www.scisoft-consulting.com

From jormarfe at gmail.com  Tue Jan 18 11:27:10 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Thu Jan 27 09:23:12 2011
Subject: Fwd: [gdal-dev] Create a shape file with polygons
In-Reply-To: <AANLkTi=NKFaj3Rt3AGYe2YLOAhpov8qSD2nQzO04PoeA@mail.gmail.com>
References: <AANLkTikDMfB3+gK2o0-kZt2EPv9y0nGCVTxAakKXBi6q@mail.gmail.com>
	<AANLkTi=OTwMKOnVqVgJUrhZk4xVP4QL+7NBEeXAwC7T8@mail.gmail.com>
	<B101402B-F773-4D2F-AA90-715F8B5BE9D1@gmail.com>
	<AANLkTi=NKFaj3Rt3AGYe2YLOAhpov8qSD2nQzO04PoeA@mail.gmail.com>
Message-ID: <AANLkTiksLfwZ6rRJKK24418DTF-vStU3iL2tBWvJ5H6b@mail.gmail.com>

Hello,

I've tried to develope the program that create a shape file with polygons.
But the GIS open the shp but there is nothing inside only the attributes,
not the polygons. I have the code from Python but I do not know the problem.

Here I paste the code:

int write_shapefilePolygon() {


const char *pszDriverName = "ESRI Shapefile";
 OGRSFDriver *poDriver;

OGRRegisterAll();

poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszDriverName);

if( poDriver == NULL )
{
 printf( "%s driver not available.\n", pszDriverName );
 exit( 1 );
 }

OGRDataSource *poDS;

poDS = poDriver->CreateDataSource( "Polygon.shp", NULL );

       if( poDS == NULL )
{
 printf( "Creation of output file failed.\n" );
 exit( 1 );
 }

OGRLayer *poLayer;

 poLayer = poDS->CreateLayer( "countries", NULL, wkbPolygon, NULL );

          if( poLayer == NULL )
 {
printf( "Layer creation failed.\n" );
 exit( 1 );
}

OGRFieldDefn oField( "Name", OFTString );

oField.SetWidth(32);

 if( poLayer->CreateField( &oField ) != OGRERR_NONE )
        {
printf( "Creating Name field failed.\n" );
 exit( 1 );
 }

double x, y;
string szName;


 char Line[4000];
char *tmp;


 ifstream infile ("/home/jjmf/Desktop/Shape
files/polygon/ospy_data2/ut_counties.txt", ifstream::in);

while(infile.getline(Line,4000))
  {

 OGRPolygon myPoligon;

tmp = strtok (Line, ":");

szName = string (tmp);


       while (tmp != NULL)
           {


       OGRLinearRing MyRing;// = (OGRLinearRing*)
OGRGeometryFactory::createGeometry(wkbLinearRing);

        tmp = strtok (NULL, ",");

        if(tmp)
        {

               string Coords = string(tmp);

              size_t pos = Coords.find(" ");

              string CoordX = Coords.substr(0,pos);
              string CoordY = Coords.substr(pos);

              x = atof(CoordX.c_str());
               y = atof(CoordY.c_str());

MyRing.addPoint(x,y);


        }

        myPoligon.addRing(&MyRing);

    }

    OGRFeature *poFeature;



      poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );


       poFeature->SetField( "Name", szName.c_str() );


      poFeature->SetGeometry(&myPoligon);


       if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
       {
     printf( "Failed to create feature in shapefile.\n" );
      exit( 1 );
        }

        OGRFeature::DestroyFeature( poFeature );
  }

OGRDataSource::DestroyDataSource( poDS );



 infile.close();

 exit( 0 );



}




Thanks,

Jorge

2011/1/17 Jorge <jormarfe@gmail.com>

Hi,
>
> Thank you very much in advance. I am developing with C++, but I will try to
> understand the code. I think it will easy.
>
> Thank you.
>
> Jorge
>
> El 17/01/2011, a las 18:18, Paolo Corti <pcorti@gmail.com> escribi?:
>
> >> I`m new developing software with GDAL and OGR libraries. I has used the
> code
> >> from the OGR web that read and write a shapefile (points). What I really
> >> want is to read and write shapefiles with polygons.
> >
> > Hi Jorge
> > if you are using Python this [0] is the best resource out there.
> > Look at the sample in week 2 of the tutorial for effectively writing
> > (and reading) a Polygon shapefile.
> > If you are not using Python you should not have too much problems for
> > converting the Python code to the language you are using.
> > Another very good resource is to look at the source code: again,
> > supposing that you are using Python, this sample [1] should work for
> > you
> >
> > ciao
> > P
> >
> > [0] http://www.gis.usu.edu/~chrisg/python/2009/
> > [1]
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/assemblepoly.py
> >
> > --
> > Paolo Corti
> > GIS specialist and web developer
> > web: http://www.paolocorti.net
> > twitter: @paolo_corti
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110118/7ab6efbb/attachment-0001.html
From warmerdam at pobox.com  Thu Jan 27 09:53:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 27 09:53:58 2011
Subject: [gdal-dev] to make black areas transparent
In-Reply-To: <AANLkTinEi1Ebr0Ad8ap9-TAqMOfW2oUJ2kAcd3gBSE7+@mail.gmail.com>
References: <AANLkTinEi1Ebr0Ad8ap9-TAqMOfW2oUJ2kAcd3gBSE7+@mail.gmail.com>
Message-ID: <4D418704.5060803@pobox.com>

On 11-01-27 04:06 AM, ahmet temiz wrote:
> I want to make black areas transparent, and used:
>
> gdalwarp -overwrite  -dstnodata 0 -dstalpha geobk_jeo.tif geobk_jeo2.png
>
> it didn't make them transparent.

Ahmet,

Try -srcnodata 0 instead of -dstnodata 0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From w.reiche at hotmail.com  Thu Jan 27 12:44:56 2011
From: w.reiche at hotmail.com (Werner Reiche)
Date: Thu Jan 27 12:45:57 2011
Subject: [gdal-dev] gdal_grid - cannot get interpolation to work
In-Reply-To: <BLU140-W257ACC632711FD9455CFFC86FE0@phx.gbl>
References: <9AC967FED721B94BA9D47B71BA8AD12803C21A80@NCRX11.ncr.int.ec.gc.ca>,
	<BLU140-W257ACC632711FD9455CFFC86FE0@phx.gbl>
Message-ID: <BLU140-W6992F6DE3E2A767CBC76086FE0@phx.gbl>



I'm trying to use gdal_grid to generate a .tiff file from a .csv file.
 
The problem I am encountering is that output file always contains 'no-data' values.
 
The command I am using is:
 
gdal_grid -txe -51.428009 -43.153992 -tye 46.112598 51.347198 -outsize 1024 796 \ 
          -a nearest:radius1=10.0:radius2=10.0:angle=0.0:nodata=0.0 \ 
          -l rs2_file_1 -l rs2_file_2 -l rs2_file_3 \ 
          -of GTiff -ot Byte rs2_file.vrt test.tiff 
 
I have also tried the following interpolation parameters:
 
# Results in all black 
# -a nearest:radius1=1.0:radius2=1.0:angle=0.0:nodata=0.0 \ 
# -a average:radius1=1.0:radius2=1.0:angle=0.0:min_points=1:nodata=0.0 \ 
# -a invdist:radius1=1.0:radius2=1.0:angle=0.0:max_points=1:min_points=1:nodata=0.0 \ 
 
# Results in all one shade of grey (average of entire image)
# -a invdist:radius1=0.0:radius2=0.0:angle=0.0:max_points=10:min_points=1:nodata=0.0 \ 

The .vrt and csv file used are shown below.
 
rs2_file.vrt 
:::::::::::::: 
<OGRVRTDataSource> 
<OGRVRTLayer name="rs2_file_1"> 
<SrcDataSource>rs2_file_1.csv</SrcDataSource> 
<GeometryType>wkbPoint25D</GeometryType> 
<GeometryField encoding="PointFromColumns" x="lon" y="lat" z="red"/> 
</OGRVRTLayer> 
<OGRVRTLayer name="rs2_file_2"> 
<SrcDataSource>rs2_file_2.csv</SrcDataSource> 
<GeometryType>wkbPoint25D</GeometryType> 
<GeometryField encoding="PointFromColumns" x="lon" y="lat" z="green"/> 
</OGRVRTLayer> 
<OGRVRTLayer name="rs2_file_3"> 
<SrcDataSource>rs2_file_3.csv</SrcDataSource> 
<GeometryType>wkbPoint25D</GeometryType> 
<GeometryField encoding="PointFromColumns" x="lon" y="lat" z="blue"/> 
</OGRVRTLayer> 
</OGRVRTDataSource> 
rs2_file.vrt (partial) 
:::::::::::::: 
lat,lon,red,green,blue 
-51.428009,50.522499,0,0,143 
-50.049011,50.720699,0,0,143 
-48.660004,50.902401,0,159,255 
-47.260010,51.067501,0,239,255 
-45.851013,51.215900,255,255,15 
-44.433014,51.347198,255,191,0 
-50.433014,50.657600,255,255,0 
-49.046997,50.844200,255,223,0 
-47.649994,51.014301,255,159,0 
-46.243988,51.167599,255,191,0 
-44.829010,51.303799,255,255,15 
-50.816010,50.593800,255,255,0 
-49.433014,50.784698,255,175,0 
-48.040009,50.959202,255,239,0 
-46.635986,51.117100,255,191,0 
-45.222992,51.257999,255,223,0 
-51.197998,50.528301,255,175,0 
-49.819000,50.724098,255,191,0 
-48.428009,50.903500,255,223,0 
-47.028015,51.066299,255,207,0 
-45.618011,51.211800,255,255,0 
-44.199005,51.340199,255,255,0 
-50.203003,50.661999,223,255,47 
-48.816010,50.845798,255,223,0 
-47.417999,51.013000,255,191,0 
-46.010986,51.163502,255,207,0 
-44.595001,51.297001,255,255,15 
-50.585999,50.598900,255,191,0 
-49.201996,50.787601,255,255,0 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110127/9cc4b5e1/attachment.html
From mike.axelrod at pictometry.com  Thu Jan 27 13:43:54 2011
From: mike.axelrod at pictometry.com (Mike Axelrod)
Date: Thu Jan 27 13:58:00 2011
Subject: [gdal-dev] Can I use ogr2ogr to postgresql with security?
Message-ID: <225359692369D14887515DB978A6A01E2E99888609@Aurora>

Does ogr2ogr (and ogrinfo) natively support secure connections to postgresql?

I need to run ogrinfo and ogr2ogr where the target is a postgresql server elsewhere on the network (in a different domain) and secure the communication.

Mike

Mike Axelrod, Software Engineer
Pictometry International Corp.
Suite A, 100 Town Centre Drive, Rochester, NY 14623
Phone: 585-775-7711
E-mail: mike.axelrod@pictometry.com Web: http://www.Pictometry.com/<http://www.pictometry.com/>


NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110127/29f4a254/attachment.html
From chaitanya.ch at gmail.com  Thu Jan 27 14:55:52 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 27 14:55:54 2011
Subject: [gdal-dev] Can I use ogr2ogr to postgresql with security?
In-Reply-To: <225359692369D14887515DB978A6A01E2E99888609@Aurora>
References: <225359692369D14887515DB978A6A01E2E99888609@Aurora>
Message-ID: <AANLkTimM7LnE+hCwBodSu41rdS+HMzkEf1QPv4pw1rbY@mail.gmail.com>

Mike,

OGR's postgresql/postgis driver makes the connection using PQconnectdb()
method from the libpq library.
You can set the option 'sslmode' to 'require', 'verify-ca' or 'verify-full'
for a secure connection. Look for the documentation of PQconnectdb() for
further details.

On Fri, Jan 28, 2011 at 12:13 AM, Mike Axelrod
<mike.axelrod@pictometry.com>wrote:

>  Does ogr2ogr (and ogrinfo) natively support secure connections to
> postgresql?
>
>
>
> I need to run ogrinfo and ogr2ogr where the target is a postgresql server
> elsewhere on the network (in a different domain) and secure the
> communication.
>
>
>
> Mike
>
> Mike Axelrod, Software Engineer
> Pictometry International Corp.
> Suite A, 100 Town Centre Drive, Rochester, NY 14623
> Phone: 585-775-7711
> E-mail: mike.axelrod@pictometry.com Web: http://www.Pictometry.com/<http://www.pictometry.com/>
>
>
>  NOTICE: This message is covered by the Electronic Communications Privacy
> Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any
> attached files are the exclusive property of Pictometry International Corp.,
> are deemed privileged and confidential, and are intended solely for the use
> of the individual(s) or entity to whom this e-mail is addressed. If you are
> not one of the named recipient(s) or believe that you have received this
> message in error, please delete this e-mail and any attachments and notify
> the sender immediately. Any other use, re-creation, dissemination,
> forwarding or copying of this e-mail is strictly prohibited and may be
> unlawful.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/f385d5b6/attachment.html
From mike.axelrod at pictometry.com  Thu Jan 27 15:21:13 2011
From: mike.axelrod at pictometry.com (Mike Axelrod)
Date: Thu Jan 27 15:21:19 2011
Subject: [gdal-dev] Can I use ogr2ogr to postgresql with security?
In-Reply-To: <AANLkTimM7LnE+hCwBodSu41rdS+HMzkEf1QPv4pw1rbY@mail.gmail.com>
References: <225359692369D14887515DB978A6A01E2E99888609@Aurora>
	<AANLkTimM7LnE+hCwBodSu41rdS+HMzkEf1QPv4pw1rbY@mail.gmail.com>
Message-ID: <225359692369D14887515DB978A6A01E2E9988866D@Aurora>

Thank you, I?ll be trying that out as soon as I get our postgresql server configured with ssl.  Do you know if the postgresql public key is required on the client side?  I see references to a ~/.postgresql/postgresql.key being available to the client. But I?m not clear if this is required or an option.

BTW I?m currently using the win32 SDK version of ogr2ogr that is distributed here => http://vbkto.dyndns.org/sdk/, I?m hoping these builds support SSL.  Can anybody confirm?

Mike

________________________________
From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Thursday, January 27, 2011 2:56 PM
To: Mike Axelrod
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Can I use ogr2ogr to postgresql with security?

Mike,

OGR's postgresql/postgis driver makes the connection using PQconnectdb() method from the libpq library.
You can set the option 'sslmode' to 'require', 'verify-ca' or 'verify-full' for a secure connection. Look for the documentation of PQconnectdb() for further details.
On Fri, Jan 28, 2011 at 12:13 AM, Mike Axelrod <mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com>> wrote:
Does ogr2ogr (and ogrinfo) natively support secure connections to postgresql?

I need to run ogrinfo and ogr2ogr where the target is a postgresql server elsewhere on the network (in a different domain) and secure the communication.

Mike

Mike Axelrod, Software Engineer
Pictometry International Corp.
Suite A, 100 Town Centre Drive, Rochester, NY 14623
Phone: 585-775-7711
E-mail: mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com> Web: http://www.Pictometry.com/<http://www.pictometry.com/>

NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E

NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110127/9b418c4b/attachment-0001.html
From mike.axelrod at pictometry.com  Thu Jan 27 15:39:51 2011
From: mike.axelrod at pictometry.com (Mike Axelrod)
Date: Thu Jan 27 15:39:55 2011
Subject: [gdal-dev] Can I use ogr2ogr to postgresql with security?
In-Reply-To: <225359692369D14887515DB978A6A01E2E9988866D@Aurora>
References: <225359692369D14887515DB978A6A01E2E99888609@Aurora>
	<AANLkTimM7LnE+hCwBodSu41rdS+HMzkEf1QPv4pw1rbY@mail.gmail.com>
	<225359692369D14887515DB978A6A01E2E9988866D@Aurora>
Message-ID: <225359692369D14887515DB978A6A01E2E9988867D@Aurora>

So it seems the build I?m using may not support ssl, I run ogrinfo with sslmode=prefer I connect ok, but when I set sslmode=require I get this error:

---------------------------
Details...
---------------------------
call to ogrinfo failed: ERROR 1: PQconnectdb failed.
sslmode value "require" invalid when SSL support is not compiled in

________________________________
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mike Axelrod
Sent: Thursday, January 27, 2011 3:21 PM
To: Chaitanya kumar CH
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Can I use ogr2ogr to postgresql with security?

Thank you, I?ll be trying that out as soon as I get our postgresql server configured with ssl.  Do you know if the postgresql public key is required on the client side?  I see references to a ~/.postgresql/postgresql.key being available to the client. But I?m not clear if this is required or an option.

BTW I?m currently using the win32 SDK version of ogr2ogr that is distributed here => http://vbkto.dyndns.org/sdk/, I?m hoping these builds support SSL.  Can anybody confirm?

Mike

________________________________
From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Thursday, January 27, 2011 2:56 PM
To: Mike Axelrod
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Can I use ogr2ogr to postgresql with security?

Mike,

OGR's postgresql/postgis driver makes the connection using PQconnectdb() method from the libpq library.
You can set the option 'sslmode' to 'require', 'verify-ca' or 'verify-full' for a secure connection. Look for the documentation of PQconnectdb() for further details.
On Fri, Jan 28, 2011 at 12:13 AM, Mike Axelrod <mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com>> wrote:
Does ogr2ogr (and ogrinfo) natively support secure connections to postgresql?

I need to run ogrinfo and ogr2ogr where the target is a postgresql server elsewhere on the network (in a different domain) and secure the communication.

Mike

Mike Axelrod, Software Engineer
Pictometry International Corp.
Suite A, 100 Town Centre Drive, Rochester, NY 14623
Phone: 585-775-7711
E-mail: mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com> Web: http://www.Pictometry.com/<http://www.pictometry.com/>

NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.

NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110127/9706a3a1/attachment.html
From chaitanya.ch at gmail.com  Thu Jan 27 16:11:37 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 27 16:11:39 2011
Subject: [gdal-dev] Can I use ogr2ogr to postgresql with security?
In-Reply-To: <225359692369D14887515DB978A6A01E2E9988867D@Aurora>
References: <225359692369D14887515DB978A6A01E2E99888609@Aurora>
	<AANLkTimM7LnE+hCwBodSu41rdS+HMzkEf1QPv4pw1rbY@mail.gmail.com>
	<225359692369D14887515DB978A6A01E2E9988866D@Aurora>
	<225359692369D14887515DB978A6A01E2E9988867D@Aurora>
Message-ID: <AANLkTimx0BZ0Mw8sjkssfs91tWs4WoDDQS0nQ6QBsryO@mail.gmail.com>

Mike,

To use SSL mode with OGR, your pqlib should be built with SSL support.

On Fri, Jan 28, 2011 at 2:09 AM, Mike Axelrod
<mike.axelrod@pictometry.com>wrote:

>  So it seems the build I?m using may not support ssl, I run ogrinfo with
> sslmode=prefer I connect ok, but when I set sslmode=require I get this
> error:
>
>
>
> ---------------------------
>
> Details...
>
> ---------------------------
>
> call to ogrinfo failed: ERROR 1: PQconnectdb failed.
>
> sslmode value "require" invalid when SSL support is not compiled in
>
>
>  ------------------------------
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Mike Axelrod
> *Sent:* Thursday, January 27, 2011 3:21 PM
> *To:* Chaitanya kumar CH
>
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* RE: [gdal-dev] Can I use ogr2ogr to postgresql with security?
>
>
>
> Thank you, I?ll be trying that out as soon as I get our postgresql server
> configured with ssl.  Do you know if the postgresql public key is required
> on the client side?  I see references to a ~/.postgresql/postgresql.keybeing available to the client. But I?m not clear if this is required or an
> option.
>
>
>
> BTW I?m currently using the win32 SDK version of ogr2ogr that is
> distributed here => http://vbkto.dyndns.org/sdk/, I?m hoping these builds
> support SSL.  Can anybody confirm?
>
>
>
> Mike
>
>
>  ------------------------------
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Thursday, January 27, 2011 2:56 PM
> *To:* Mike Axelrod
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Can I use ogr2ogr to postgresql with security?
>
>
>
> Mike,
>
> OGR's postgresql/postgis driver makes the connection using PQconnectdb()
> method from the libpq library.
> You can set the option 'sslmode' to 'require', 'verify-ca' or 'verify-full'
> for a secure connection. Look for the documentation of PQconnectdb() for
> further details.
>
> On Fri, Jan 28, 2011 at 12:13 AM, Mike Axelrod <
> mike.axelrod@pictometry.com> wrote:
>
> Does ogr2ogr (and ogrinfo) natively support secure connections to
> postgresql?
>
>
>
> I need to run ogrinfo and ogr2ogr where the target is a postgresql server
> elsewhere on the network (in a different domain) and secure the
> communication.
>
>
>
> Mike
>
> Mike Axelrod, Software Engineer
> Pictometry International Corp.
> Suite A, 100 Town Centre Drive, Rochester, NY 14623
> Phone: 585-775-7711
> E-mail: mike.axelrod@pictometry.com Web: http://www.Pictometry.com/<http://www.pictometry.com/>
>
>
>
> NOTICE: This message is covered by the Electronic Communications Privacy
> Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any
> attached files are the exclusive property of Pictometry International Corp.,
> are deemed privileged and confidential, and are intended solely for the use
> of the individual(s) or entity to whom this e-mail is addressed. If you are
> not one of the named recipient(s) or believe that you have received this
> message in error, please delete this e-mail and any attachments and notify
> the sender immediately. Any other use, re-creation, dissemination,
> forwarding or copying of this e-mail is strictly prohibited and may be
> unlawful.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> NOTICE: This message is covered by the Electronic Communications Privacy
> Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any
> attached files are the exclusive property of Pictometry International Corp.,
> are deemed privileged and confidential, and are intended solely for the use
> of the individual(s) or entity to whom this e-mail is addressed. If you are
> not one of the named recipient(s) or believe that you have received this
> message in error, please delete this e-mail and any attachments and notify
> the sender immediately. Any other use, re-creation, dissemination,
> forwarding or copying of this e-mail is strictly prohibited and may be
> unlawful.
>  NOTICE: This message is covered by the Electronic Communications Privacy
> Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any
> attached files are the exclusive property of Pictometry International Corp.,
> are deemed privileged and confidential, and are intended solely for the use
> of the individual(s) or entity to whom this e-mail is addressed. If you are
> not one of the named recipient(s) or believe that you have received this
> message in error, please delete this e-mail and any attachments and notify
> the sender immediately. Any other use, re-creation, dissemination,
> forwarding or copying of this e-mail is strictly prohibited and may be
> unlawful.
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/be834276/attachment-0001.html
From chaitanya.ch at gmail.com  Fri Jan 28 00:23:44 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan 28 00:23:46 2011
Subject: [gdal-dev] gdal_grid - cannot get interpolation to work
In-Reply-To: <BLU140-W6992F6DE3E2A767CBC76086FE0@phx.gbl>
References: <9AC967FED721B94BA9D47B71BA8AD12803C21A80@NCRX11.ncr.int.ec.gc.ca>
	<BLU140-W257ACC632711FD9455CFFC86FE0@phx.gbl>
	<BLU140-W6992F6DE3E2A767CBC76086FE0@phx.gbl>
Message-ID: <AANLkTikM0qKgv11f8s7zh4fRhk6Uq_t+Siu9kufdEKfp@mail.gmail.com>

Werner,

You swapped the X and Y extents in the command.

On Thu, Jan 27, 2011 at 11:14 PM, Werner Reiche <w.reiche@hotmail.com>wrote:

>
> I'm trying to use gdal_grid to generate a .tiff file from a .csv file.
>
> The problem I am encountering is that output file always contains 'no-data'
> values.
>
> The command I am using is:
>
> gdal_grid -txe -51.428009 -43.153992 -tye 46.112598 51.347198 -outsize 1024
> 796 \
>           -a nearest:radius1=10.0:radius2=10.0:angle=0.0:nodata=0.0 \
>           -l rs2_file_1 -l rs2_file_2 -l rs2_file_3 \
>           -of GTiff -ot Byte rs2_file.vrt test.tiff
>
> I have also tried the following interpolation parameters:
>
> # Results in all black
> # -a nearest:radius1=1.0:radius2=1.0:angle=0.0:nodata=0.0 \
> # -a average:radius1=1.0:radius2=1.0:angle=0.0:min_points=1:nodata=0.0 \
> # -a
> invdist:radius1=1.0:radius2=1.0:angle=0.0:max_points=1:min_points=1:nodata=0.0
> \
>
> # Results in all one shade of grey (average of entire image)
> # -a
> invdist:radius1=0.0:radius2=0.0:angle=0.0:max_points=10:min_points=1:nodata=0.0
> \
>
> The .vrt and csv file used are shown below.
>
> rs2_file.vrt
> ::::::::::::::
> <OGRVRTDataSource>
> <OGRVRTLayer name="rs2_file_1">
> <SrcDataSource>rs2_file_1.csv</SrcDataSource>
> <GeometryType>wkbPoint25D</GeometryType>
> <GeometryField encoding="PointFromColumns" x="lon" y="lat" z="red"/>
> </OGRVRTLayer>
> <OGRVRTLayer name="rs2_file_2">
> <SrcDataSource>rs2_file_2.csv</SrcDataSource>
> <GeometryType>wkbPoint25D</GeometryType>
> <GeometryField encoding="PointFromColumns" x="lon" y="lat" z="green"/>
> </OGRVRTLayer>
> <OGRVRTLayer name="rs2_file_3">
> <SrcDataSource>rs2_file_3.csv</SrcDataSource>
> <GeometryType>wkbPoint25D</GeometryType>
> <GeometryField encoding="PointFromColumns" x="lon" y="lat" z="blue"/>
> </OGRVRTLayer>
> </OGRVRTDataSource>
> rs2_file.vrt (partial)
> ::::::::::::::
> lat,lon,red,green,blue
> -51.428009,50.522499,0,0,143
> -50.049011,50.720699,0,0,143
> -48.660004,50.902401,0,159,255
> -47.260010,51.067501,0,239,255
> -45.851013,51.215900,255,255,15
> -44.433014,51.347198,255,191,0
> -50.433014,50.657600,255,255,0
> -49.046997,50.844200,255,223,0
> -47.649994,51.014301,255,159,0
> -46.243988,51.167599,255,191,0
> -44.829010,51.303799,255,255,15
> -50.816010,50.593800,255,255,0
> -49.433014,50.784698,255,175,0
> -48.040009,50.959202,255,239,0
> -46.635986,51.117100,255,191,0
> -45.222992,51.257999,255,223,0
> -51.197998,50.528301,255,175,0
> -49.819000,50.724098,255,191,0
> -48.428009,50.903500,255,223,0
> -47.028015,51.066299,255,207,0
> -45.618011,51.211800,255,255,0
> -44.199005,51.340199,255,255,0
> -50.203003,50.661999,223,255,47
> -48.816010,50.845798,255,223,0
> -47.417999,51.013000,255,191,0
> -46.010986,51.163502,255,207,0
> -44.595001,51.297001,255,255,15
> -50.585999,50.598900,255,191,0
> -49.201996,50.787601,255,255,0
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/df5935c2/attachment.html
From mohammedrashadkm at gmail.com  Fri Jan 28 08:05:39 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 28 08:06:21 2011
Subject: [gdal-dev] OGR GetExtent()
Message-ID: <AANLkTikZKndaZ1H5=3eypPU=i_pZr++VpmEq9L5Cmi9D@mail.gmail.com>

How to get the extent of an ogr data (shapefile). I need to read the xMin,
yMin, xMax,yMax
how to do that

-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/81bc97ae/attachment.html
From chaitanya.ch at gmail.com  Fri Jan 28 08:15:05 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan 28 08:15:08 2011
Subject: [gdal-dev] OGR GetExtent()
In-Reply-To: <AANLkTikZKndaZ1H5=3eypPU=i_pZr++VpmEq9L5Cmi9D@mail.gmail.com>
References: <AANLkTikZKndaZ1H5=3eypPU=i_pZr++VpmEq9L5Cmi9D@mail.gmail.com>
Message-ID: <AANLkTin_yZiQRVJwJGQNFGMCQv9iRrp5bOEXfvvKwrER@mail.gmail.com>

Rashad,

There is an example of usage of GetExtent() in the code for ogrinfo utility.
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/ogrinfo.cpp#L379

On Fri, Jan 28, 2011 at 6:35 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

>
> How to get the extent of an ogr data (shapefile). I need to read the xMin,
> yMin, xMax,yMax
> how to do that
>
> --
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/d14dde2a/attachment.html
From mohammedrashadkm at gmail.com  Fri Jan 28 10:57:09 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 28 10:57:58 2011
Subject: [gdal-dev] strange output in reading points of linear ring
Message-ID: <AANLkTik0TXQAXiZPHhxQwtxKf5Tm2JvRtSqVFDT4MZQr@mail.gmail.com>

   OGRPolygon *polygon = (OGRPolygon *) poGeometry;



            OGRLinearRing  *extring = polygon->getExteriorRing();
                for(int i=0;i<extring->getNumPoints();i++)
                {
                         cout << extring->getX(i) << ":::::" <<
extring->getY(i) << endl;
                 }

the shapefile is in UTM projection
the above said code gives me error . here is the output

......
.............
.................................

-269341:::::2.7739e+06
-270188:::::2.77958e+06
-267595:::::2.78341e+06
-266748:::::2.78775e+06
-265868:::::2.78773e+06
-262193:::::2.78899e+06
-260416:::::2.79265e+06
-258088:::::2.79378e+06
-257291:::::2.79542e+06
-257241:::::2.79553e+06
-256359:::::2.79637e+06
-254724:::::2.79808e+06
-253177:::::2.79897e+06
-252022:::::2.79541e+06
-252103:::::2.79144e+06
-248101:::::2.79034e+06
-246005:::::2.79466e+06
-244207:::::2.79732e+06
-240802:::::2.79897e+06
-238885:::::2.80189e+06
-239955:::::2.80502e+06
-240802:::::2.80936e+06

................................
.................
......
-240802:::::2.80936e+06 how to get rid of e+06 and convert it to double
-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/499cbe00/attachment.html
From warmerdam at pobox.com  Fri Jan 28 11:07:09 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 28 11:07:13 2011
Subject: [gdal-dev] strange output in reading points of linear ring
In-Reply-To: <AANLkTik0TXQAXiZPHhxQwtxKf5Tm2JvRtSqVFDT4MZQr@mail.gmail.com>
References: <AANLkTik0TXQAXiZPHhxQwtxKf5Tm2JvRtSqVFDT4MZQr@mail.gmail.com>
Message-ID: <4D42E9AD.5090802@pobox.com>

On 11-01-28 10:57 AM, Mohammed Rashad wrote:
>     OGRPolygon *polygon = (OGRPolygon *) poGeometry;
>
>
>              OGRLinearRing  *extring = polygon->getExteriorRing();
>                  for(int i=0;i<extring->getNumPoints();i++)
>                  {
>                           cout << extring->getX(i) << ":::::" <<
> extring->getY(i) << endl;
>                   }
...
> -240802:::::2.80936e+06
>
> ................................
> .................
> ......
> -240802:::::2.80936e+06 how to get rid of e+06 and convert it to double

Rashad,

That is a c++ stream's formatting question, not a gdal-dev question.  I
would suggest you review the formatting options for the stream class:

   http://www.cplusplus.com/reference/iostream/ostream/

In particular pay attention to the "field width" and "display precision"
values.  Also I see something about scientific vs. fixed format in the setf()
method:

   http://www.cplusplus.com/reference/iostream/ios_base/setf/

Personally I hate the way formatting works with the C++ stream classes
but I'm very old fashioned.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From annaauge at web.de  Fri Jan 28 12:07:30 2011
From: annaauge at web.de (anna auge)
Date: Fri Jan 28 12:07:43 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <AANLkTimXgPmEwaUdhKS_BVbQ1_bFBDPr+3yT__-qeES1@mail.gmail.com>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
	<320653926.4697125.1295423619575.JavaMail.fmail@mwmweb077>,
	<AANLkTimXgPmEwaUdhKS_BVbQ1_bFBDPr+3yT__-qeES1@mail.gmail.com>
Message-ID: <337649361.4308538.1296234450867.JavaMail.fmail@mwmweb078>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/d371c5b7/attachment.html
From mohammedrashadkm at gmail.com  Fri Jan 28 13:44:42 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Jan 28 13:45:24 2011
Subject: [gdal-dev] reproject
Message-ID: <AANLkTi=k=zo_bSbZ8PeWcvWB2O8D1Gd0VLQOaFDht7Ne@mail.gmail.com>

How to reproject a shapefile to geographic coordinates by code? using OGR

-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110129/51afd762/attachment.html
From warmerdam at pobox.com  Fri Jan 28 14:00:45 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 28 14:00:48 2011
Subject: [gdal-dev] ABI Version Specific Plugin Loading
Message-ID: <4D43125D.8010102@pobox.com>

Folks,

In gdal trunk I have made changes to the way plugins are loaded for GDAL
and OGR.  Now each directory in the search path will first be checked for
a subdirectory with the ABI version as the name
(ie. "/usr/local/lib/gdalplugins/1.8").  If found that directory will be
used instead of the original directory (ie. "/usr/local/lib/gdalplugins").

I see the MacOS X code already has a concept of different framework
directories for different versions.  I did not interfere with that though
it kind of annoys me how different all this stuff works on MacOS X -
even the name of the plugins directory is different  - needlessly IMHO.

For now I am leaving this only in trunk in subversion, though I will
backport it to the OSGeo4W GDAL/OGR 1.8 package which is where I
particularly want it.

Let me know if there are any concerns or if it causes problems.

   http://trac.osgeo.org/gdal/changeset/21596

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From craigrthunter at gmail.com  Fri Jan 28 18:48:52 2011
From: craigrthunter at gmail.com (Craig Hunter)
Date: Fri Jan 28 18:48:55 2011
Subject: [gdal-dev] SDE Write forces a value into the FID Column
Message-ID: <AANLkTik9U6sbfPdZCXNhUT=ajLapPjCSJqA_N7KihYPD@mail.gmail.com>

Hi,

I've been working with the GDAL/OGR 1.7.3 release and writing geometries to
SDE when I ran into an issue.  The code forces a value into a SDE table's
primary key field by automatically incrementing records starting with the
value of 1.  I don't see this as a practical implementation because it only
works with an empty SDE layer when you initially load data.  It causes a
-51/Underlying DMBS error when you attempt to append data onto the layer if
those primary key values are in use, and prevents other implementations for
handling primary key generation.  I handle auto-population of a primary key
through a BIR (Before-Insert-Record) trigger by querying the next value from
an Oracle Sequence when a NULL value is encountered on the insert
statement.  I've commented out the parts of the code in my build, so as not
to force the FID column to have a value, but I think this should be adopted
by the SDE driver.

Thanks,

Craig.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110128/3dcb2896/attachment.html
From warmerdam at pobox.com  Fri Jan 28 21:59:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 28 22:00:05 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
Message-ID: <4D4382AD.7070902@pobox.com>

Folks,

I have had good success with the GDAL 1.8 upgrade and I have now thrown
the switch migrating it into the production version of OSGeo4W.

I have upgraded "gdal", "gdal-python", "gdal-mrsid" and "gdal-autotest".
I have yet to upgrade the ecw, and sde related drivers, and I have not
upgraded the java bindings.  I will try to work on them tomorrow.

The gdal15dll package was created for backward compatability and should
be automatically pulled in.  It seems to be working fine for OpenEV.

I would encourage folks building packages to update, and rebuild them
using the current GDAL.  The GDAL include files in C:\OSGeo4W\include
and libraries in C:\OSGeo4w\lib should now be for 1.8.

Note that the new GDAL package is built using Visual Studio 2008
Express instead of 2003.  If you are using the C++ API this may cause
issues but if you use the C API it should be invisible.

Let me know of problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mohammedrashadkm at gmail.com  Sat Jan 29 04:55:00 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sat Jan 29 04:55:43 2011
Subject: [gdal-dev] reproject
In-Reply-To: <AANLkTim+fgGYPemJjO9Yt-Hds4BwJ4cOhtc0sDz1ioo+@mail.gmail.com>
References: <AANLkTi=k=zo_bSbZ8PeWcvWB2O8D1Gd0VLQOaFDht7Ne@mail.gmail.com>
	<AANLkTimp4G1RQqCDGeVn3PF69qPZ65QuCD-BT=yVBv1f@mail.gmail.com>
	<AANLkTim+fgGYPemJjO9Yt-Hds4BwJ4cOhtc0sDz1ioo+@mail.gmail.com>
Message-ID: <AANLkTi=nkwQU2LyFaBAkvCZohXXEZDmF-xHGoB=bwOS9@mail.gmail.com>

is there any function in ogr to export the projection string to proj4.

there is a function called importFromProj4 but nothing like export from
proj4. i have the wkt of projection read from .prj file
I need to convert it to proj4 string.

On Sat, Jan 29, 2011 at 10:58 AM, Mohammed Rashad <
mohammedrashadkm@gmail.com> wrote:

> sorry
>
>
> On Sat, Jan 29, 2011 at 1:35 AM, Chaitanya kumar CH <chaitanya.ch@
> gmail.com> wrote:
>
>> Rashad,
>>
>> Please look for solutions online before asking on the list. Read the
>> projections tutorial in the website. http://www.gdal.org/ogr/
>>
>> On Sat, Jan 29, 2011 at 12:14 AM, Mohammed Rashad <
>> mohammedrashadkm@gmail.com> wrote:
>>
>>> How to reproject a shapefile to geographic coordinates by code? using OGR
>>>
>>> --
>>> Rashad
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Rashad
>



-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110129/3c34f505/attachment-0001.html
From szekerest at gmail.com  Sat Jan 29 06:14:05 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jan 29 06:14:08 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D4382AD.7070902@pobox.com>
References: <4D4382AD.7070902@pobox.com>
Message-ID: <AANLkTinnnWW--6ACJPefb04vT3NQ5MtLmp+bDcXY-mYb@mail.gmail.com>

Frank,

I would suggest to include the C# bindings too. I don't think it would be
reasonable to provide the bindings from a separate compilation and not
compiling that along with the GDAL core components.

Best regards,

Tamas



2011/1/29 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> I have had good success with the GDAL 1.8 upgrade and I have now thrown
> the switch migrating it into the production version of OSGeo4W.
>
> I have upgraded "gdal", "gdal-python", "gdal-mrsid" and "gdal-autotest".
> I have yet to upgrade the ecw, and sde related drivers, and I have not
> upgraded the java bindings.  I will try to work on them tomorrow.
>
> The gdal15dll package was created for backward compatability and should
> be automatically pulled in.  It seems to be working fine for OpenEV.
>
> I would encourage folks building packages to update, and rebuild them
> using the current GDAL.  The GDAL include files in C:\OSGeo4W\include
> and libraries in C:\OSGeo4w\lib should now be for 1.8.
>
> Note that the new GDAL package is built using Visual Studio 2008
> Express instead of 2003.  If you are using the C++ API this may cause
> issues but if you use the C API it should be invisible.
>
> Let me know of problems.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110129/bfaa57ad/attachment.html
From nbest at ci.uchicago.edu  Sat Jan 29 09:16:01 2011
From: nbest at ci.uchicago.edu (Neil Best)
Date: Sat Jan 29 09:16:03 2011
Subject: [gdal-dev] GDAL Error 1: TIFFFetchDirectory:Sanity check on
 directory count failed . . .
Message-ID: <1296310561170-5972745.post@n2.nabble.com>


How should I interpret this error?

GDAL Error 1: TIFFFetchDirectory:Sanity check on directory count failed,
this is probably not a valid IFD offset

I saw this in an R session.  I descibe the context on Stackoverflow:

http://stackoverflow.com/questions/4831882/mysterious-error-from-foreach

There I describe that I am wrapping a function from library(raster), which
uses rgdal, with a foreach construct and parallelizing using multicore/doMC. 
I suspect that this and other errors have something to do with file I/O but
I'm not sure how to interpret them or track them down.  Thanks for any
suggestions.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Error-1-TIFFFetchDirectory-Sanity-check-on-directory-count-failed-tp5972745p5972745.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Jan 29 09:26:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 29 09:26:20 2011
Subject: [gdal-dev] GDAL Error 1: TIFFFetchDirectory:Sanity check on
	directory count failed . . .
In-Reply-To: <1296310561170-5972745.post@n2.nabble.com>
References: <1296310561170-5972745.post@n2.nabble.com>
Message-ID: <201101291526.11743.even.rouault@mines-paris.org>

Le samedi 29 janvier 2011 15:16:01, Neil Best a ?crit :
> How should I interpret this error?
> 
> GDAL Error 1: TIFFFetchDirectory:Sanity check on directory count failed,
> this is probably not a valid IFD offset
> 
> I saw this in an R session.  I descibe the context on Stackoverflow:
> 
> http://stackoverflow.com/questions/4831882/mysterious-error-from-foreach
> 
> There I describe that I am wrapping a function from library(raster), which
> uses rgdal, with a foreach construct and parallelizing using
> multicore/doMC. I suspect that this and other errors have something to do
> with file I/O but I'm not sure how to interpret them or track them down. 
> Thanks for any suggestions.

Neil,

First, does the opening of the TIFF file with a utility such gdalinfo works 
without emitting this warning ? If it works, then your code is the likely 
culprit, otherwise the TIFF file is corrupted.

I don't know how you use the multi threading, but this could certainly be the 
responsible for the error : you cannot use the same GDAL dataset object from 
multiple threads, even if you just use it for reading. If you want to do 
parallelized I/O, you need to open as many dataset objects as you have threads 
(you can open several datasets pointing to the same file). See 
http://www.gdal.org/classGDALDataset.html#6764788806a1785c97036d1dba064497

Best regards,

Even
From mariusjigmond at hotmail.com  Sat Jan 29 09:47:43 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jan 29 09:48:47 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
Message-ID: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>

Hi Everyone,

I am having some trouble figuring out why adding JPEG compression to a
RGB GeoTIFF results in Nodata pixel triplets becoming data pixel
triplets. Is this expected behavior due to the noisy nature of JPEG
compression or to the fact that these are border Nodata triplets? I know
certain algorithms process the boundary between data and Nodata
differently.

I'm running GDAL 1.8.0 with internal libtiff. The command I issued was:
gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90 -co
PHOTOMETRIC=YCBCR s70rgb321.tif test.tif

In QGIS using the identify feature on the same triplets results in:
s70rgb321.tif:
Band 1: null(nodata)
Band 2: null(nodata)
Band 3: null(nodata)
test.tif:
Band 1: 1
Band 2: 1
Band 3: 3


gdalinfo s70rgb321.tif yields:
Driver: GTiff/GeoTIFF
Files: s70rgb321.tif
       s70rgb321.tif.ovr
Size is 32261, 30632
Coordinate System is:
PROJCS["Pulkovo_1942_58_Stereo70",
    GEOGCS["GCS_Pulkovo 1942(58)",
        DATUM["Pulkovo_1942_58",
            SPHEROID["Krassowsky_1940",6378245,298.3,
                AUTHORITY["EPSG","7024"]],
            AUTHORITY["EPSG","6179"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Oblique_Stereographic"],
    PARAMETER["latitude_of_origin",46],
    PARAMETER["central_meridian",25],
    PARAMETER["scale_factor",0.99975],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",500000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (27432.591760581413837,941642.761553813470528)
Pixel Size = (28.512429802339831,-28.512429802339831)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (   27432.592,  941642.762) ( 18d26'17.19"E, 49d47'26.40"N)
Lower Left  (   27432.592,   68250.012) ( 19d18' 9.44"E, 41d58' 4.57"N)
Upper Right (  947272.090,  941642.762) ( 31d12'45.10"E, 49d48'33.95"N)
Lower Right (  947272.090,   68250.012) ( 30d23'36.76"E, 41d58'59.57"N)
Center      (  487352.341,  504946.387) ( 24d50'11.61"E, 46d 2'39.82"N)
Band 1 Block=32261x1 Type=Byte, ColorInterp=Red
  NoData Value=0
  Overviews: 16131x15316, 8066x7658, 4033x3829, 2017x1915, 1009x958,
505x479, 253x240
  Metadata:
    LAYER_TYPE=athematic
Band 2 Block=32261x1 Type=Byte, ColorInterp=Green
  NoData Value=0
  Overviews: 16131x15316, 8066x7658, 4033x3829, 2017x1915, 1009x958,
505x479, 253x240
  Metadata:
    LAYER_TYPE=athematic
Band 3 Block=32261x1 Type=Byte, ColorInterp=Blue
  NoData Value=0
  Overviews: 16131x15316, 8066x7658, 4033x3829, 2017x1915, 1009x958,
505x479, 253x240
  Metadata:
    LAYER_TYPE=athematic

gdalinfo test.tif yields:
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 32261, 30632
Coordinate System is:
PROJCS["Pulkovo_1942_58_Stereo70",
    GEOGCS["GCS_Pulkovo 1942(58)",
        DATUM["Pulkovo_1942_58",
            SPHEROID["Krassowsky 1940",6378245,298.2999999999998,
                AUTHORITY["EPSG","7024"]],
            AUTHORITY["EPSG","6179"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Oblique_Stereographic"],
    PARAMETER["latitude_of_origin",46],
    PARAMETER["central_meridian",25],
    PARAMETER["scale_factor",0.99975],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",500000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (27432.591760581413837,941642.761553813470528)
Pixel Size = (28.512429802339831,-28.512429802339831)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  SOURCE_COLOR_SPACE=YCbCr
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (   27432.592,  941642.762) ( 18d26'17.19"E, 49d47'26.40"N)
Lower Left  (   27432.592,   68250.012) ( 19d18' 9.44"E, 41d58' 4.57"N)
Upper Right (  947272.090,  941642.762) ( 31d12'45.10"E, 49d48'33.95"N)
Lower Right (  947272.090,   68250.012) ( 30d23'36.76"E, 41d58'59.57"N)
Center      (  487352.341,  504946.387) ( 24d50'11.61"E, 46d 2'39.82"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  NoData Value=0
  Metadata:
    LAYER_TYPE=athematic
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  NoData Value=0
  Metadata:
    LAYER_TYPE=athematic
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  NoData Value=0
  Metadata:
    LAYER_TYPE=athematic

Thanks for any insights you might have.

-marius

From ari.jolma at gmail.com  Sat Jan 29 09:52:46 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Jan 29 09:52:50 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D4382AD.7070902@pobox.com>
References: <4D4382AD.7070902@pobox.com>
Message-ID: <4D4429BE.9090305@gmail.com>

Did anybody else try to use the now standard Visual Studio built GDAL 
DLL (which was much discussed some time ago here and is now available 
from Tamas' site) in a MinGW environment?

I spent some time a week or two ago on the issue, but I had a hard time, 
which AFAIK is because the DLL mixes two function export methods and 
thus using the standard tools seems difficult if not impossible (I 
already downloaded the sources for latest GNU dlltool and considered 
hacking it...)

The best page about the issue I found so far is this: 
http://wyw.dcweb.cn/stdcall.htm

Anybody have any ideas? Is my observation about the two export methods 
correct and why is that?

Ari

On 01/29/2011 04:59 AM, Frank Warmerdam wrote:
> Folks,
>
> I have had good success with the GDAL 1.8 upgrade and I have now thrown
> the switch migrating it into the production version of OSGeo4W.
>
> I have upgraded "gdal", "gdal-python", "gdal-mrsid" and "gdal-autotest".
> I have yet to upgrade the ecw, and sde related drivers, and I have not
> upgraded the java bindings.  I will try to work on them tomorrow.
>
> The gdal15dll package was created for backward compatability and should
> be automatically pulled in.  It seems to be working fine for OpenEV.
>
> I would encourage folks building packages to update, and rebuild them
> using the current GDAL.  The GDAL include files in C:\OSGeo4W\include
> and libraries in C:\OSGeo4w\lib should now be for 1.8.
>
> Note that the new GDAL package is built using Visual Studio 2008
> Express instead of 2003.  If you are using the C++ API this may cause
> issues but if you use the C API it should be invisible.
>
> Let me know of problems.
>
> Best regards,

From nbest at ci.uchicago.edu  Sat Jan 29 09:53:30 2011
From: nbest at ci.uchicago.edu (Neil Best)
Date: Sat Jan 29 09:53:32 2011
Subject: [gdal-dev] Re: GDAL Error 1: TIFFFetchDirectory:Sanity check on
 directory count failed . . .
In-Reply-To: <201101291526.11743.even.rouault@mines-paris.org>
References: <1296310561170-5972745.post@n2.nabble.com>
	<201101291526.11743.even.rouault@mines-paris.org>
Message-ID: <1296312810466-5972790.post@n2.nabble.com>


Thanks, Even.  That makes sense.  If I understand your suggestion I can
create a trivial VRT pointing to the input data for each worker, correct?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Error-1-TIFFFetchDirectory-Sanity-check-on-directory-count-failed-tp5972745p5972790.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Jan 29 09:58:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 29 09:58:37 2011
Subject: [gdal-dev] Re: GDAL Error 1: TIFFFetchDirectory:Sanity check on
	directory count failed . . .
In-Reply-To: <1296312810466-5972790.post@n2.nabble.com>
References: <1296310561170-5972745.post@n2.nabble.com>
	<201101291526.11743.even.rouault@mines-paris.org>
	<1296312810466-5972790.post@n2.nabble.com>
Message-ID: <201101291558.30654.even.rouault@mines-paris.org>

Le samedi 29 janvier 2011 15:53:30, Neil Best a ?crit :
> Thanks, Even.  That makes sense.  If I understand your suggestion I can
> create a trivial VRT pointing to the input data for each worker, correct?

Yes, that's one possibility. But more simply, provided it is possible through 
rgdal framework, you could just open the same tiff file from each worker thread.
From even.rouault at mines-paris.org  Sat Jan 29 10:13:02 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 29 10:13:09 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
Message-ID: <201101291613.02232.even.rouault@mines-paris.org>

Le samedi 29 janvier 2011 15:47:43, Marius Jigmond a ?crit :
> Hi Everyone,
> 
> I am having some trouble figuring out why adding JPEG compression to a
> RGB GeoTIFF results in Nodata pixel triplets becoming data pixel
> triplets. Is this expected behavior due to the noisy nature of JPEG
> compression or to the fact that these are border Nodata triplets? I know
> certain algorithms process the boundary between data and Nodata
> differently.

Marius,

Yes you did find the cause : the pixels maching nodata values will be JPEG 
compressed, so you have no guarantee that the 0 value is preserved through 
compression/decompression. I'd also note that the nodata concept in GDAL is a 
per-band value (so it should not be interpreted as a nodata "triplet")

A possibility to workaround this would be to create a "nodata mask band" (see 
http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask), but I'm pretty sure that 
QGIS ignores those mask bands.

Anyway, if you want to try and create one, you can :

1) Use nearblack to create a nodata mask band based on (0,0,0) triplet
nearblack -setmask -of GTiff -o out_with_mask.tif in.tif

(the -setmask option is new in GDAL 1.8.0)

2) Then compress the dataset with
gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90 -co 
PHOTOMETRIC=YCBCR out_with_mask.tif out_compressed.tif

Only the RGB channels will be JPEG compressed : the mask band will use 
lossless compression so you won't have artifacts at the borders between 
significant areas and nodata areas.

(You can add --config GDAL_TIFF_INTERNAL_MASK YES to make the nodata mask 
internal to the GTiff file, instead of having a .tif.msk external file, which 
will not make any difference for software using GDAL API but can be more 
convenient to have a sinle file)

FYI, you can later reconvert the dataset into an uncompressed RGBA dataset :

gdal_translate out_compressed.tif out_rgba.tif -b 1 -b 2 -b 3 -b mask

Best regards,

Even
From jef at norbit.de  Sat Jan 29 11:51:13 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sat Jan 29 11:51:41 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D4429BE.9090305@gmail.com>
References: <4D4382AD.7070902@pobox.com> <4D4429BE.9090305@gmail.com>
Message-ID: <20110129165113.GA6251@norbit.de>

Hi Ari,

On Sat, 29. Jan 2011 at 16:52:46 +0200, Ari Jolma wrote:
> Did anybody else try to use the now standard Visual Studio built GDAL  
> DLL (which was much discussed some time ago here and is now available  
> from Tamas' site) in a MinGW environment?

The OSGeo4W GRASS package (and AFAIK also the standalone WinGRASS package) is
built with MinGW using the libraries for OSGeo4W (ie. with GDAL, GEOS and
PROJ.4 build with MSVC).   AFAIK that seems to work fine - although I must
admit to what extent GDAL/OGR is used in GRASS.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From warmerdam at pobox.com  Sat Jan 29 11:52:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 29 11:52:10 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D4429BE.9090305@gmail.com>
References: <4D4382AD.7070902@pobox.com> <4D4429BE.9090305@gmail.com>
Message-ID: <4D4445B7.2090108@pobox.com>

On 11-01-29 09:52 AM, Ari Jolma wrote:
> Did anybody else try to use the now standard Visual Studio built GDAL DLL
> (which was much discussed some time ago here and is now available from Tamas'
> site) in a MinGW environment?
>
> I spent some time a week or two ago on the issue, but I had a hard time, which
> AFAIK is because the DLL mixes two function export methods and thus using the
> standard tools seems difficult if not impossible (I already downloaded the
> sources for latest GNU dlltool and considered hacking it...)
>
> The best page about the issue I found so far is this:
> http://wyw.dcweb.cn/stdcall.htm
>
> Anybody have any ideas? Is my observation about the two export methods correct
> and why is that?

Ari,

It is true that some GDAL/OGR entry points are using cdecl, and some
are using stdcall.  Some were converted to stdcall several years ago
to facilitate calls into the DLL from VB6 and Delphi Pascal which
apparently could not easily call cdecl functions.

I believe these entry points can be used from gcc but you need to be sure
the stdcall decorations are properly applied when the include files are
processed.  There is some stuff about this in cpl_port.h, and I think you
can predefine CPL_STDCALL for alternate environments.

I think I did note this as one item we would likely want to discard
from the ABI in GDAL 2.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jef at norbit.de  Sat Jan 29 11:54:10 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sat Jan 29 11:54:38 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D4382AD.7070902@pobox.com>
References: <4D4382AD.7070902@pobox.com>
Message-ID: <20110129165410.GB6251@norbit.de>

Hi Frank,

On Fri, 28. Jan 2011 at 21:59:57 -0500, Frank Warmerdam wrote:
> I would encourage folks building packages to update, and rebuild them
> using the current GDAL.  The GDAL include files in C:\OSGeo4W\include
> and libraries in C:\OSGeo4w\lib should now be for 1.8.

Ok, the QGIS nightly build it now using GDAL 1.8.  And the automatic
"promotion" is back in place.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From warmerdam at pobox.com  Sat Jan 29 11:56:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 29 11:56:37 2011
Subject: [gdal-dev] reproject
In-Reply-To: <AANLkTi=nkwQU2LyFaBAkvCZohXXEZDmF-xHGoB=bwOS9@mail.gmail.com>
References: <AANLkTi=k=zo_bSbZ8PeWcvWB2O8D1Gd0VLQOaFDht7Ne@mail.gmail.com>
	<AANLkTimp4G1RQqCDGeVn3PF69qPZ65QuCD-BT=yVBv1f@mail.gmail.com>
	<AANLkTim+fgGYPemJjO9Yt-Hds4BwJ4cOhtc0sDz1ioo+@mail.gmail.com>
	<AANLkTi=nkwQU2LyFaBAkvCZohXXEZDmF-xHGoB=bwOS9@mail.gmail.com>
Message-ID: <4D4446C4.4040008@pobox.com>

On 11-01-29 04:55 AM, Mohammed Rashad wrote:
> is there any function in ogr to export the projection string to proj4.
>
> there is a function called importFromProj4 but nothing like export from proj4.
> i have the wkt of projection read from .prj file
> I need to convert it to proj4 string.


Rashad,

The method is OGRSpatialReference::exportToProj4().  There are corresponding
C, C#, python, java, etc entry points.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jluis at ualg.pt  Sat Jan 29 12:20:25 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Jan 29 12:20:33 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <337649361.4308538.1296234450867.JavaMail.fmail@mwmweb078>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>	<320653926.4697125.1295423619575.JavaMail.fmail@mwmweb077>,
	<AANLkTimXgPmEwaUdhKS_BVbQ1_bFBDPr+3yT__-qeES1@mail.gmail.com>
	<337649361.4308538.1296234450867.JavaMail.fmail@mwmweb078>
Message-ID: <4D444C59.7060808@ualg.pt>

Anna,

I wonder how ENVI does the warping and if there isn't any hidden trick 
that must be applied. I did the warping in Mirone where I can choose to 
do a gdalwarp or warping using a totally independent code (from Matlab) 
and the results are equal and ... wrong.

Joaquim

>
> hi all,
> excuse me for not giving up. i undertook some additional tests, and i 
> got the same problems i described below. But i can't believe that 
> nobody is working with gdal and modis level 1b data. At least this 
> format is listet as supported at http://www.gdal.org/frmt_hdf4.html.
> So my question: does anybody in this list work with modis level 1b? If 
> yes, is the georeference of the resulting image ok or does somebody 
> knows an workaround?
> maybe the answer is, that it is not possible to warp modis level 1b 
> data with gdal because the modis geolocation (mod3xxx) file is missing?
> i appreciate any help.
> cheers
> anna
>
>     ------------------------------------------------------------------------
>     *Von:* "Chaitanya kumar CH" <chaitanya.ch@gmail.com>
>     *Gesendet:* 19.01.2011 10:13:49
>     *An:* "anna auge" <annaauge@web.de>
>     *Betreff:* Re: [gdal-dev] Modis L1B SWATH: georef problem hdf to
>     geotiff
>
>     Anna,
>
>     Check a couple of GCPs to rule out bad data. If they are OK, file
>     a ticket at http://trac.osgeo.org/gdal/newticket
>
>     On Wed, Jan 19, 2011 at 1:23 PM, anna auge <annaauge@web.de
>     <mailto:annaauge@web.de>> wrote:
>
>         So it is a problem with gdalwarp and the GCPs ?n the GeoTiff.
>         Do you have any hints how to go on with this problem?
>         Cheers, Anna
>
>             ------------------------------------------------------------------------
>             *Von:* "Nikolaos Hatzopoulos" <nhatzop@gmail.com
>             <mailto:nhatzop@gmail.com>>
>             *Gesendet:* 19.01.2011 01:33:43
>             *An:* "anna auge" <annaauge@web.de <mailto:annaauge@web.de>>
>             *Betreff:* Re: [gdal-dev] Modis L1B SWATH: georef problem
>             hdf to geotiff
>
>
>             You are right, I notice that there isn't any difference
>             from the
>             band_1.tiff and band_1_warp.tiff
>
>             --Nikos Hatzopoulos
>
>             On Mon, Jan 17, 2011 at 8:15 AM, anna auge
>             <annaauge@web.de <mailto:annaauge@web.de>> wrote:
>
>                 Hi all,
>
>                 I am trying to convert modis level 1B data (type
>                 SWATH) to geotiff following these steps.
>
>                 1) Examining the HDF
>                 gdalinfo
>                 d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf
>                 gdalinfo
>                 HDF4_EOS:EOS_SWATH:"d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>                 2) Extracting the 1. band of the subdataset
>                 MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>                 gdal_translate -of GTiff -b 1
>                 HDF4_EOS:EOS_SWATH:"d:\modis\1b\MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>                 d:\modis\1b\band_1.tiff
>                 4) Warping the image to WGS84
>                 gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff
>                 d:\modis\1b\band_1_warp.tiff
>
>                 The example dataset, which i am using, can be
>                 downloaded here
>                 ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
>
>                 And now to my problem: I get always an certain shift
>                 (http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/),
>                 which is avoided if i am using the "Georeference
>                 MODIS" option in ENVI
>                 (http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
>                 I also tried a few workarounds, f.g.
>                 http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482,
>                 but nothing worked properly.
>                 As far as I understand gdal supports Modis L1B SWATH,
>                 so what I am doing wrong? Any help is appreciated.
>
>                 Regards Anna
>
>                 P.S. I am using FWTools 2.4.7 on Windows
>
>
>                 WEB.DE <http://WEB.DE> DSL Doppel-Flat ab 19,99
>                 ?/mtl.! Jetzt mit
>                 gratis Handy-Flat!
>                 *http://produkte.web.de/go/DSL_Doppel_Flatrate/2*
>
>
>                 _______________________________________________
>                 gdal-dev mailing list
>                 gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>                 http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>         NEU: FreePhone - kostenlos mobil telefonieren und surfen!
>         Jetzt informieren: *http://produkte.web.de/go/webdefreephone*
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>     -- 
>     Best regards,
>     Chaitanya kumar CH.
>     /t?a???nj?/ /k?m?r/
>     +91-9494447584
>     17.2416N 80.1426E
>
>
>
> Empfehlen Sie WEB.DE DSL Ihren Freunden und Bekannten und wir
> belohnen Sie mit bis zu 50,- Euro! *https://freundschaftswerbung.web.de*
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110129/3e017b2a/attachment.html
From nbest at ci.uchicago.edu  Sat Jan 29 13:23:28 2011
From: nbest at ci.uchicago.edu (Neil Best)
Date: Sat Jan 29 13:23:31 2011
Subject: [gdal-dev] Re: GDAL Error 1: TIFFFetchDirectory:Sanity check on
 directory count failed . . .
In-Reply-To: <201101291558.30654.even.rouault@mines-paris.org>
References: <1296310561170-5972745.post@n2.nabble.com>
	<201101291526.11743.even.rouault@mines-paris.org>
	<1296312810466-5972790.post@n2.nabble.com>
	<201101291558.30654.even.rouault@mines-paris.org>
Message-ID: <1296325408444-5973171.post@n2.nabble.com>


Thank you, Even.  I think that did it.  Instead of passing around raster()
objects I need to pass the file names and re-instantiate the objects on the
workers within the foreach closure.  Are you on Stackoverflow?  If not,
please consider signing up.  I think it's a great concept and I would like
to give you credit for this solution. 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Error-1-TIFFFetchDirectory-Sanity-check-on-directory-count-failed-tp5972745p5973171.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Sat Jan 29 13:43:57 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jan 29 13:44:02 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D4429BE.9090305@gmail.com>
References: <4D4382AD.7070902@pobox.com>
	<4D4429BE.9090305@gmail.com>
Message-ID: <AANLkTimvfxboJxNYXAa044Jfv-CyS=wW3iOFERVfb2KK@mail.gmail.com>

Ari,

I would be eager to know the exact use case you have. Did you have some
errors provided by the linker in this case?
It would indeed be a problem how the various compilers decorate their export
functions in a different way. It looks like the __declspec(dllexport) option
(this is what is used in GDAL) provides different names with MSVC and MinGW
by default. If we want to compile the dlls in a portable way we should
probably get back to an alternative method like .def file or "#pragma
comment( linker, "/export:FuncName" )" when exporting the functions.

The article you are referring to describes another way of providing a
portable version that is:
1. Compile the dll as it is now (the functions exported
with__declspec(dllexport))
2. Extract the export functions in a .def file by using pexports
3. Replace the function names with their undecorated names in the .def file
4. Recompile the dll with this new export definition file.

I'm keen to give it a try if I get some further info about how to test this
on the other side.


Best regards,

Tamas




2011/1/29 Ari Jolma <ari.jolma@gmail.com>

> Did anybody else try to use the now standard Visual Studio built GDAL DLL
> (which was much discussed some time ago here and is now available from
> Tamas' site) in a MinGW environment?
>
> I spent some time a week or two ago on the issue, but I had a hard time,
> which AFAIK is because the DLL mixes two function export methods and thus
> using the standard tools seems difficult if not impossible (I already
> downloaded the sources for latest GNU dlltool and considered hacking it...)
>
> The best page about the issue I found so far is this:
> http://wyw.dcweb.cn/stdcall.htm
>
> Anybody have any ideas? Is my observation about the two export methods
> correct and why is that?
>
> Ari
>
>
> On 01/29/2011 04:59 AM, Frank Warmerdam wrote:
>
>> Folks,
>>
>> I have had good success with the GDAL 1.8 upgrade and I have now thrown
>> the switch migrating it into the production version of OSGeo4W.
>>
>> I have upgraded "gdal", "gdal-python", "gdal-mrsid" and "gdal-autotest".
>> I have yet to upgrade the ecw, and sde related drivers, and I have not
>> upgraded the java bindings.  I will try to work on them tomorrow.
>>
>> The gdal15dll package was created for backward compatability and should
>> be automatically pulled in.  It seems to be working fine for OpenEV.
>>
>> I would encourage folks building packages to update, and rebuild them
>> using the current GDAL.  The GDAL include files in C:\OSGeo4W\include
>> and libraries in C:\OSGeo4w\lib should now be for 1.8.
>>
>> Note that the new GDAL package is built using Visual Studio 2008
>> Express instead of 2003.  If you are using the C++ API this may cause
>> issues but if you use the C API it should be invisible.
>>
>> Let me know of problems.
>>
>> Best regards,
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110129/7fda18b0/attachment.html
From even.rouault at mines-paris.org  Sat Jan 29 15:04:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 29 15:04:56 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <BLU0-SMTP1558A139C32402EF81D076EB2E00@phx.gbl>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
	<201101291613.02232.even.rouault@mines-paris.org>
	<BLU0-SMTP1558A139C32402EF81D076EB2E00@phx.gbl>
Message-ID: <201101292104.51321.even.rouault@mines-paris.org>

Le samedi 29 janvier 2011 20:28:02, Marius Jigmond a ?crit :
> Thanks Even. I ran some more tests but that didn't quite work for me. I
> still get those noisy pixels after gdal_translate (in QGIS I set value 0
> for transparency and those pixels stand out). However, I noticed the
> following:
> 
> * nearblack -setmask shrinks the significant pixels area (expected?)
> * the near black noise pixels seem to follow a stair step pattern
> similar to the edge of the significant area but at a different scale
> (larger steps, if what I just said makes sense) and extend past the
> significant data areas in both masked and unmasked datasets.

Ah yes, nearblack has some default parameters that can account for this. See 
the -near and -nb parameters of http://gdal.org/nearblack.html

You can set them to 0 to have strict nearblack behaviour.

> > 
> I was aware of the fact that nodata values are band specific but I had a
> little brain glitch from working with gdaladdo (which honors nodata only
> as a triplet nodata). That's how I actually ran into the problem. I am
> trying to compress a RGB GeoTIFF using JPEG and then generate compressed
> overviews. We plan to serve some imagery through Geoserver and would
> like to stick to open-source solutions. The compressed datasets are
> significantly smaller and with overviews they are extremely responsive,
> rendering very fast). OpenJPEG v2 looks great but I haven't found
> support for it in Geoserver, yet.

To limit the issues with artifacts, I would compute the overviews on the 
uncompressed dataset and then translate the whole full resolution + overviews 
into a JPEG compressed TIFF with the new COPY_SRC_OVERVIEWS option of the GTiff 
driver.

I'm not sure that JPEG2000 would solve the issue. This would need to be 
checked if alpha channel is strictly preserved.

For the record, MapServer is able to use nodata mask band as transparency 
channel.

> 
> -marius
> 
> On Sat, 2011-01-29 at 16:13 +0100, Even Rouault wrote:
> > Le samedi 29 janvier 2011 15:47:43, Marius Jigmond a ?crit :
> > > Hi Everyone,
> > > 
> > > I am having some trouble figuring out why adding JPEG compression to a
> > > RGB GeoTIFF results in Nodata pixel triplets becoming data pixel
> > > triplets. Is this expected behavior due to the noisy nature of JPEG
> > > compression or to the fact that these are border Nodata triplets? I
> > > know certain algorithms process the boundary between data and Nodata
> > > differently.
> > 
> > Marius,
> > 
> > Yes you did find the cause : the pixels maching nodata values will be
> > JPEG compressed, so you have no guarantee that the 0 value is preserved
> > through compression/decompression. I'd also note that the nodata concept
> > in GDAL is a per-band value (so it should not be interpreted as a nodata
> > "triplet")
> > 
> > A possibility to workaround this would be to create a "nodata mask band"
> > (see http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask), but I'm
> > pretty sure that QGIS ignores those mask bands.
> > 
> > Anyway, if you want to try and create one, you can :
> > 
> > 1) Use nearblack to create a nodata mask band based on (0,0,0) triplet
> > nearblack -setmask -of GTiff -o out_with_mask.tif in.tif
> > 
> > (the -setmask option is new in GDAL 1.8.0)
> > 
> > 2) Then compress the dataset with
> > gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90 -co
> > PHOTOMETRIC=YCBCR out_with_mask.tif out_compressed.tif
> > 
> > Only the RGB channels will be JPEG compressed : the mask band will use
> > lossless compression so you won't have artifacts at the borders between
> > significant areas and nodata areas.
> > 
> > (You can add --config GDAL_TIFF_INTERNAL_MASK YES to make the nodata mask
> > internal to the GTiff file, instead of having a .tif.msk external file,
> > which will not make any difference for software using GDAL API but can
> > be more convenient to have a sinle file)
> > 
> > FYI, you can later reconvert the dataset into an uncompressed RGBA
> > dataset :
> > 
> > gdal_translate out_compressed.tif out_rgba.tif -b 1 -b 2 -b 3 -b mask
> > 
> > Best regards,
> > 
> > Even
From warmerdam at pobox.com  Sat Jan 29 15:44:27 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 29 15:44:31 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
Message-ID: <4D447C2B.3030002@pobox.com>

Folks,

I have been thinking about how to adjust OSGeo4W in particular, and GDAL
in general to make it easier to distribute software in a way that complies
with the conflict between GPLed software and proprietary software.

In the case of OSGeo4W the main restrictions is that we should not be
distributing GRASS in such a way that proprietary drivers like the MrSID
driver can be used without the user having knowingly combined them by
themselves.

To that end, I have prepared an RFC which attempts to address this at
the GDAL driver registration level.  I'd appreciate feedback:

   http://trac.osgeo.org/gdal/wiki/rfc34_license_policy

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mariusjigmond at hotmail.com  Sat Jan 29 16:17:45 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jan 29 16:17:49 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <201101292104.51321.even.rouault@mines-paris.org>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
	<201101291613.02232.even.rouault@mines-paris.org>
	<BLU0-SMTP1558A139C32402EF81D076EB2E00@phx.gbl>
	<201101292104.51321.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP16063030DC02D0FDE90A305B2E00@phx.gbl>

Just realized that earlier I hit the wrong reply button (apologies).

The COPY_SRC_OVERVIEWS yielded a wild result. Here's what I did:
1. gdaladdo -ro s70rgb321.tif 2 4 8 16 32 64 128 (note: input GTiff is 3
band with nodata=0 and no mask)
2. gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90
-co PHOTOMETRIC=YCBCR -co COPY_SRC_OVERVIEWS=YES s70rgb321.tif test1.tif

The result: http://tinypic.com/r/110gig4/7

The top (~)quarter of the original image is replicated downwards up to
the original extent of the image. I would have expected the artifacts
but not this :). According to the http://www.gdal.org/frmt_gtiff.html
COPY_SRC_OVERVIEWS is applied as long as no general options are passed.

-marius


-- 
Sent from Ubuntu



On Sat, 2011-01-29 at 21:04 +0100, Even Rouault wrote: 
> Le samedi 29 janvier 2011 20:28:02, Marius Jigmond a ?crit :
> > Thanks Even. I ran some more tests but that didn't quite work for me. I
> > still get those noisy pixels after gdal_translate (in QGIS I set value 0
> > for transparency and those pixels stand out). However, I noticed the
> > following:
> > 
> > * nearblack -setmask shrinks the significant pixels area (expected?)
> > * the near black noise pixels seem to follow a stair step pattern
> > similar to the edge of the significant area but at a different scale
> > (larger steps, if what I just said makes sense) and extend past the
> > significant data areas in both masked and unmasked datasets.
> 
> Ah yes, nearblack has some default parameters that can account for this. See 
> the -near and -nb parameters of http://gdal.org/nearblack.html
> 
> You can set them to 0 to have strict nearblack behaviour.
> 
> > > 
> > I was aware of the fact that nodata values are band specific but I had a
> > little brain glitch from working with gdaladdo (which honors nodata only
> > as a triplet nodata). That's how I actually ran into the problem. I am
> > trying to compress a RGB GeoTIFF using JPEG and then generate compressed
> > overviews. We plan to serve some imagery through Geoserver and would
> > like to stick to open-source solutions. The compressed datasets are
> > significantly smaller and with overviews they are extremely responsive,
> > rendering very fast). OpenJPEG v2 looks great but I haven't found
> > support for it in Geoserver, yet.
> 
> To limit the issues with artifacts, I would compute the overviews on the 
> uncompressed dataset and then translate the whole full resolution + overviews 
> into a JPEG compressed TIFF with the new COPY_SRC_OVERVIEWS option of the GTiff 
> driver.
> 
> I'm not sure that JPEG2000 would solve the issue. This would need to be 
> checked if alpha channel is strictly preserved.
> 
> For the record, MapServer is able to use nodata mask band as transparency 
> channel.
> 
> > 
> > -marius
> > 
> > On Sat, 2011-01-29 at 16:13 +0100, Even Rouault wrote:
> > > Le samedi 29 janvier 2011 15:47:43, Marius Jigmond a ?crit :
> > > > Hi Everyone,
> > > > 
> > > > I am having some trouble figuring out why adding JPEG compression to a
> > > > RGB GeoTIFF results in Nodata pixel triplets becoming data pixel
> > > > triplets. Is this expected behavior due to the noisy nature of JPEG
> > > > compression or to the fact that these are border Nodata triplets? I
> > > > know certain algorithms process the boundary between data and Nodata
> > > > differently.
> > > 
> > > Marius,
> > > 
> > > Yes you did find the cause : the pixels maching nodata values will be
> > > JPEG compressed, so you have no guarantee that the 0 value is preserved
> > > through compression/decompression. I'd also note that the nodata concept
> > > in GDAL is a per-band value (so it should not be interpreted as a nodata
> > > "triplet")
> > > 
> > > A possibility to workaround this would be to create a "nodata mask band"
> > > (see http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask), but I'm
> > > pretty sure that QGIS ignores those mask bands.
> > > 
> > > Anyway, if you want to try and create one, you can :
> > > 
> > > 1) Use nearblack to create a nodata mask band based on (0,0,0) triplet
> > > nearblack -setmask -of GTiff -o out_with_mask.tif in.tif
> > > 
> > > (the -setmask option is new in GDAL 1.8.0)
> > > 
> > > 2) Then compress the dataset with
> > > gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90 -co
> > > PHOTOMETRIC=YCBCR out_with_mask.tif out_compressed.tif
> > > 
> > > Only the RGB channels will be JPEG compressed : the mask band will use
> > > lossless compression so you won't have artifacts at the borders between
> > > significant areas and nodata areas.
> > > 
> > > (You can add --config GDAL_TIFF_INTERNAL_MASK YES to make the nodata mask
> > > internal to the GTiff file, instead of having a .tif.msk external file,
> > > which will not make any difference for software using GDAL API but can
> > > be more convenient to have a sinle file)
> > > 
> > > FYI, you can later reconvert the dataset into an uncompressed RGBA
> > > dataset :
> > > 
> > > gdal_translate out_compressed.tif out_rgba.tif -b 1 -b 2 -b 3 -b mask
> > > 
> > > Best regards,
> > > 
> > > Even
> 

From even.rouault at mines-paris.org  Sat Jan 29 16:25:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 29 16:26:08 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <BLU0-SMTP16063030DC02D0FDE90A305B2E00@phx.gbl>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
	<201101292104.51321.even.rouault@mines-paris.org>
	<BLU0-SMTP16063030DC02D0FDE90A305B2E00@phx.gbl>
Message-ID: <201101292225.59426.even.rouault@mines-paris.org>

Le samedi 29 janvier 2011 22:17:45, Marius Jigmond a ?crit :
> Just realized that earlier I hit the wrong reply button (apologies).
> 
> The COPY_SRC_OVERVIEWS yielded a wild result. Here's what I did:
> 1. gdaladdo -ro s70rgb321.tif 2 4 8 16 32 64 128 (note: input GTiff is 3
> band with nodata=0 and no mask)
> 2. gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90
> -co PHOTOMETRIC=YCBCR -co COPY_SRC_OVERVIEWS=YES s70rgb321.tif test1.tif
> 
> The result: http://tinypic.com/r/110gig4/7
> 
> The top (~)quarter of the original image is replicated downwards up to
> the original extent of the image. I would have expected the artifacts
> but not this :). According to the http://www.gdal.org/frmt_gtiff.html
> COPY_SRC_OVERVIEWS is applied as long as no general options are passed.

This is weird. Do you have a link so I can download s70rgb321.tif and test ?

> 
> -marius
> 
> > Le samedi 29 janvier 2011 20:28:02, Marius Jigmond a ?crit :
> > > Thanks Even. I ran some more tests but that didn't quite work for me. I
> > > still get those noisy pixels after gdal_translate (in QGIS I set value
> > > 0 for transparency and those pixels stand out). However, I noticed the
> > > following:
> > > 
> > > * nearblack -setmask shrinks the significant pixels area (expected?)
> > > * the near black noise pixels seem to follow a stair step pattern
> > > similar to the edge of the significant area but at a different scale
> > > (larger steps, if what I just said makes sense) and extend past the
> > > significant data areas in both masked and unmasked datasets.
> > 
> > Ah yes, nearblack has some default parameters that can account for this.
> > See the -near and -nb parameters of http://gdal.org/nearblack.html
> > 
> > You can set them to 0 to have strict nearblack behaviour.
> > 
> > > I was aware of the fact that nodata values are band specific but I had
> > > a little brain glitch from working with gdaladdo (which honors nodata
> > > only as a triplet nodata). That's how I actually ran into the problem.
> > > I am trying to compress a RGB GeoTIFF using JPEG and then generate
> > > compressed overviews. We plan to serve some imagery through Geoserver
> > > and would like to stick to open-source solutions. The compressed
> > > datasets are significantly smaller and with overviews they are
> > > extremely responsive, rendering very fast). OpenJPEG v2 looks great
> > > but I haven't found support for it in Geoserver, yet.
> > 
> > To limit the issues with artifacts, I would compute the overviews on the
> > uncompressed dataset and then translate the whole full resolution +
> > overviews into a JPEG compressed TIFF with the new COPY_SRC_OVERVIEWS
> > option of the GTiff driver.
> > 
> > I'm not sure that JPEG2000 would solve the issue. This would need to be
> > checked if alpha channel is strictly preserved.
> > 
> > For the record, MapServer is able to use nodata mask band as transparency
> > channel.
> > 
> > > -marius
> > > 
> > > On Sat, 2011-01-29 at 16:13 +0100, Even Rouault wrote:
> > > > Le samedi 29 janvier 2011 15:47:43, Marius Jigmond a ?crit :
> > > > > Hi Everyone,
> > > > > 
> > > > > I am having some trouble figuring out why adding JPEG compression
> > > > > to a RGB GeoTIFF results in Nodata pixel triplets becoming data
> > > > > pixel triplets. Is this expected behavior due to the noisy nature
> > > > > of JPEG compression or to the fact that these are border Nodata
> > > > > triplets? I know certain algorithms process the boundary between
> > > > > data and Nodata differently.
> > > > 
> > > > Marius,
> > > > 
> > > > Yes you did find the cause : the pixels maching nodata values will be
> > > > JPEG compressed, so you have no guarantee that the 0 value is
> > > > preserved through compression/decompression. I'd also note that the
> > > > nodata concept in GDAL is a per-band value (so it should not be
> > > > interpreted as a nodata "triplet")
> > > > 
> > > > A possibility to workaround this would be to create a "nodata mask
> > > > band" (see http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask), but
> > > > I'm pretty sure that QGIS ignores those mask bands.
> > > > 
> > > > Anyway, if you want to try and create one, you can :
> > > > 
> > > > 1) Use nearblack to create a nodata mask band based on (0,0,0)
> > > > triplet nearblack -setmask -of GTiff -o out_with_mask.tif in.tif
> > > > 
> > > > (the -setmask option is new in GDAL 1.8.0)
> > > > 
> > > > 2) Then compress the dataset with
> > > > gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90
> > > > -co PHOTOMETRIC=YCBCR out_with_mask.tif out_compressed.tif
> > > > 
> > > > Only the RGB channels will be JPEG compressed : the mask band will
> > > > use lossless compression so you won't have artifacts at the borders
> > > > between significant areas and nodata areas.
> > > > 
> > > > (You can add --config GDAL_TIFF_INTERNAL_MASK YES to make the nodata
> > > > mask internal to the GTiff file, instead of having a .tif.msk
> > > > external file, which will not make any difference for software using
> > > > GDAL API but can be more convenient to have a sinle file)
> > > > 
> > > > FYI, you can later reconvert the dataset into an uncompressed RGBA
> > > > dataset :
> > > > 
> > > > gdal_translate out_compressed.tif out_rgba.tif -b 1 -b 2 -b 3 -b mask
> > > > 
> > > > Best regards,
> > > > 
> > > > Even
From mariusjigmond at hotmail.com  Sat Jan 29 16:40:20 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jan 29 16:40:24 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <201101292225.59426.even.rouault@mines-paris.org>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
	<201101292104.51321.even.rouault@mines-paris.org>
	<BLU0-SMTP16063030DC02D0FDE90A305B2E00@phx.gbl>
	<201101292225.59426.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP144080310963F596DB724DBB2E00@phx.gbl>

The link should work for another day or so (automatic server purge). I
can re-upload it if you don't get the chance to download it. Warning:
1.2GB.
https://www.twdb.state.tx.us/filetxfr/emaillinkdownload.aspx?id=&FileTransferID=289562464

-marius

-- 
Sent from Ubuntu



On Sat, 2011-01-29 at 22:25 +0100, Even Rouault wrote: 
> Le samedi 29 janvier 2011 22:17:45, Marius Jigmond a ?crit :
> > Just realized that earlier I hit the wrong reply button (apologies).
> > 
> > The COPY_SRC_OVERVIEWS yielded a wild result. Here's what I did:
> > 1. gdaladdo -ro s70rgb321.tif 2 4 8 16 32 64 128 (note: input GTiff is 3
> > band with nodata=0 and no mask)
> > 2. gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90
> > -co PHOTOMETRIC=YCBCR -co COPY_SRC_OVERVIEWS=YES s70rgb321.tif test1.tif
> > 
> > The result: http://tinypic.com/r/110gig4/7
> > 
> > The top (~)quarter of the original image is replicated downwards up to
> > the original extent of the image. I would have expected the artifacts
> > but not this :). According to the http://www.gdal.org/frmt_gtiff.html
> > COPY_SRC_OVERVIEWS is applied as long as no general options are passed.
> 
> This is weird. Do you have a link so I can download s70rgb321.tif and test ?
> 
> > 
> > -marius
> > 
> > > Le samedi 29 janvier 2011 20:28:02, Marius Jigmond a ?crit :
> > > > Thanks Even. I ran some more tests but that didn't quite work for me. I
> > > > still get those noisy pixels after gdal_translate (in QGIS I set value
> > > > 0 for transparency and those pixels stand out). However, I noticed the
> > > > following:
> > > > 
> > > > * nearblack -setmask shrinks the significant pixels area (expected?)
> > > > * the near black noise pixels seem to follow a stair step pattern
> > > > similar to the edge of the significant area but at a different scale
> > > > (larger steps, if what I just said makes sense) and extend past the
> > > > significant data areas in both masked and unmasked datasets.
> > > 
> > > Ah yes, nearblack has some default parameters that can account for this.
> > > See the -near and -nb parameters of http://gdal.org/nearblack.html
> > > 
> > > You can set them to 0 to have strict nearblack behaviour.
> > > 
> > > > I was aware of the fact that nodata values are band specific but I had
> > > > a little brain glitch from working with gdaladdo (which honors nodata
> > > > only as a triplet nodata). That's how I actually ran into the problem.
> > > > I am trying to compress a RGB GeoTIFF using JPEG and then generate
> > > > compressed overviews. We plan to serve some imagery through Geoserver
> > > > and would like to stick to open-source solutions. The compressed
> > > > datasets are significantly smaller and with overviews they are
> > > > extremely responsive, rendering very fast). OpenJPEG v2 looks great
> > > > but I haven't found support for it in Geoserver, yet.
> > > 
> > > To limit the issues with artifacts, I would compute the overviews on the
> > > uncompressed dataset and then translate the whole full resolution +
> > > overviews into a JPEG compressed TIFF with the new COPY_SRC_OVERVIEWS
> > > option of the GTiff driver.
> > > 
> > > I'm not sure that JPEG2000 would solve the issue. This would need to be
> > > checked if alpha channel is strictly preserved.
> > > 
> > > For the record, MapServer is able to use nodata mask band as transparency
> > > channel.
> > > 
> > > > -marius
> > > > 
> > > > On Sat, 2011-01-29 at 16:13 +0100, Even Rouault wrote:
> > > > > Le samedi 29 janvier 2011 15:47:43, Marius Jigmond a ?crit :
> > > > > > Hi Everyone,
> > > > > > 
> > > > > > I am having some trouble figuring out why adding JPEG compression
> > > > > > to a RGB GeoTIFF results in Nodata pixel triplets becoming data
> > > > > > pixel triplets. Is this expected behavior due to the noisy nature
> > > > > > of JPEG compression or to the fact that these are border Nodata
> > > > > > triplets? I know certain algorithms process the boundary between
> > > > > > data and Nodata differently.
> > > > > 
> > > > > Marius,
> > > > > 
> > > > > Yes you did find the cause : the pixels maching nodata values will be
> > > > > JPEG compressed, so you have no guarantee that the 0 value is
> > > > > preserved through compression/decompression. I'd also note that the
> > > > > nodata concept in GDAL is a per-band value (so it should not be
> > > > > interpreted as a nodata "triplet")
> > > > > 
> > > > > A possibility to workaround this would be to create a "nodata mask
> > > > > band" (see http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask), but
> > > > > I'm pretty sure that QGIS ignores those mask bands.
> > > > > 
> > > > > Anyway, if you want to try and create one, you can :
> > > > > 
> > > > > 1) Use nearblack to create a nodata mask band based on (0,0,0)
> > > > > triplet nearblack -setmask -of GTiff -o out_with_mask.tif in.tif
> > > > > 
> > > > > (the -setmask option is new in GDAL 1.8.0)
> > > > > 
> > > > > 2) Then compress the dataset with
> > > > > gdal_translate -co COMPRESS=JPEG -co TILED=YES -co JPEG_QUALITY=90
> > > > > -co PHOTOMETRIC=YCBCR out_with_mask.tif out_compressed.tif
> > > > > 
> > > > > Only the RGB channels will be JPEG compressed : the mask band will
> > > > > use lossless compression so you won't have artifacts at the borders
> > > > > between significant areas and nodata areas.
> > > > > 
> > > > > (You can add --config GDAL_TIFF_INTERNAL_MASK YES to make the nodata
> > > > > mask internal to the GTiff file, instead of having a .tif.msk
> > > > > external file, which will not make any difference for software using
> > > > > GDAL API but can be more convenient to have a sinle file)
> > > > > 
> > > > > FYI, you can later reconvert the dataset into an uncompressed RGBA
> > > > > dataset :
> > > > > 
> > > > > gdal_translate out_compressed.tif out_rgba.tif -b 1 -b 2 -b 3 -b mask
> > > > > 
> > > > > Best regards,
> > > > > 
> > > > > Even
> 

From even.rouault at mines-paris.org  Sat Jan 29 18:16:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 29 18:17:01 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D447C2B.3030002@pobox.com>
References: <4D447C2B.3030002@pobox.com>
Message-ID: <201101300016.52571.even.rouault@mines-paris.org>

Frank,

It looks mostly good to me.

A few remarks :

1) I had a strange feeling when I read that "In the absence of a user or 
application level policy, default to a policy of "PREFER_PROPRIETARY"". It 
sounds a bit paradoxical for an open source library... I guess that on Linux, 
it should be "PREFER_RECIPROCAL" and "PREFER_PROPRIETARY" on Windows. Just 
kidding...

2) We don't control the licence of third party libraries and their licencing 
terms can thus change over the time or have multiple licencing terms.

a) For example, currently the GDAL EPSILON driver relies on the epsilon 
library which is currently GPL. But Alessandro Furieri (Spatialite/Rasterlite 
author ) asked to the author of libepsilon if he would agree to relicence it 
under LGPL because what makes librasterlite GPL is the epsilon dependency. ( 
http://groups.google.com/group/spatialite-
users/browse_thread/thread/503faf18b78c3c6e/adbd5b7cef1cb5e8 ). This has been 
accepted but no newer release of libepsilon has been yet released. Admitedly 
licencing changes don't occur frequently so we can just indicate the ones of 
the latest released version of the third party library.

(Note: this doesn't affect the GDAL rasterlite driver that is an independant 
implementation that doesn't use librasterlite)

b) For MySQL, it depends on whether you use the open source version (GPL) or 
the commercial version.

3) Licences of the drivers :

* In the list of reciprocal drivers, you can add PDF (because of poppler being 
GPL) 
* I'm not sure for the GPSBabel driver. The driver doesn't technically link to 
GPSBabel (GPL) but communicate it with it through fork / exec / pipe. Does it 
make the driver to be bound to the GPL ?
* As far as ODBC, PGEO, MSSQLSPATIAL (and GEOMEDIA in trunk), it depends on 
the actual ODBC library... On unix, unixODBC is LGPL.
* The OGR SOSI driver should probably be marked as proprietary currently as it 
relies on linking with binary objects with unknown licencing terms, even if 
apparently the ultimate goal seems to open source them.
* I'm not sure for the ArcSDE Raster. I imagine this should be commercial ?
* I'm a bit confused by http://gdal.org/frmt_msg.html. Seems that it relies on 
third party stuff with both proprietary and GPL code.

4) A technical detail, but Python bindings automatically register the drivers 
when importing gdal or ogr modules, so it would not be possible to do a 
gdal.SetConfigOption('GDAL_LICENSE_POLICY', 'USE_ALL'), but 
os.environ['GDAL_LICENSE_POLICY'] = 'USE_ALL' should work

5) I was wondering if it wouldn't be nice to have a *build* option that could 
be equivalent to setting GDAL_LICENSE_POLICY = USE_ALL. That would only be 
usefull for power users that build their own GDAL for their own purposes and 
don't intend distributing it. Obviously neither Linux distributions nor 
OSGeo4W should use it, so that makes its use case scarce.

That's all for tonight !

Best regards,

Even

> Folks,
> 
> I have been thinking about how to adjust OSGeo4W in particular, and GDAL
> in general to make it easier to distribute software in a way that complies
> with the conflict between GPLed software and proprietary software.
> 
> In the case of OSGeo4W the main restrictions is that we should not be
> distributing GRASS in such a way that proprietary drivers like the MrSID
> driver can be used without the user having knowingly combined them by
> themselves.
> 
> To that end, I have prepared an RFC which attempts to address this at
> the GDAL driver registration level.  I'd appreciate feedback:
> 
>    http://trac.osgeo.org/gdal/wiki/rfc34_license_policy
> 
> Best regards,
From ari.jolma at gmail.com  Sun Jan 30 04:36:49 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Jan 30 04:36:53 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <AANLkTimvfxboJxNYXAa044Jfv-CyS=wW3iOFERVfb2KK@mail.gmail.com>
References: <4D4382AD.7070902@pobox.com>	<4D4429BE.9090305@gmail.com>
	<AANLkTimvfxboJxNYXAa044Jfv-CyS=wW3iOFERVfb2KK@mail.gmail.com>
Message-ID: <4D453131.8010609@gmail.com>

29.1.2011 20:43, Tamas Szekeres kirjoitti:
> Ari,
>
> I would be eager to know the exact use case you have. Did you have 
> some errors provided by the linker in this case?

For the stdcall functions I added entries like this

_CPLDefaultErrorHandler@12
CPLDefaultErrorHandler = _CPLDefaultErrorHandler@12

to the .def file. I create the .dll.a, which is the import library, with 
dlltool from the .def.

There are no errors from the linker. If I leave the stdcall entries as 
they are from pexports, i.e., just

_CPLDefaultErrorHandler@12

The linker complains about undefined reference to `CPLDefaultErrorHandler'

However, running the Perl tests fail with "The procedure entry point 
CPLDefaultErrorHandler could not be located in the dynamic link library 
gdal17.dll". This is no wonder since the Perl bindings GDAL.dll imports 
CPLDefaultErrorHandler from gdal17.dll. I believe this because I'm 
misusing the .def file or dlltool does not understand that 
CPLDefaultErrorHandler is an alias to _CPLDefaultErrorHandler@12.

I saw a web page which seemed to say that this is a known problem in 
dlltool and it had a small hack for dlltool.c to fix the problem, but I 
don't find the page just now and I've not yet tried hacking the 
dlltool.c (it seems quite possible).

I think the cdecl functions work ok.

If I compile GDAL in MSYS, all functions are exported cdecl.

Ari


> It would indeed be a problem how the various compilers decorate their 
> export functions in a different way. It looks like the 
> __declspec(dllexport) option (this is what is used in GDAL) provides 
> different names with MSVC and MinGW by default. If we want to compile 
> the dlls in a portable way we should probably get back to an 
> alternative method like .def file or "#pragma comment( linker, 
> "/export:FuncName" )" when exporting the functions.
>
> The article you are referring to describes another way of providing a 
> portable version that is:
> 1. Compile the dll as it is now (the functions exported 
> with__declspec(dllexport))
> 2. Extract the export functions in a .def file by using pexports
> 3. Replace the function names with their undecorated names in the .def 
> file
> 4. Recompile the dll with this new export definition file.
>
> I'm keen to give it a try if I get some further info about how to test 
> this on the other side.
>
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/1/29 Ari Jolma <ari.jolma@gmail.com <mailto:ari.jolma@gmail.com>>
>
>     Did anybody else try to use the now standard Visual Studio built
>     GDAL DLL (which was much discussed some time ago here and is now
>     available from Tamas' site) in a MinGW environment?
>
>     I spent some time a week or two ago on the issue, but I had a hard
>     time, which AFAIK is because the DLL mixes two function export
>     methods and thus using the standard tools seems difficult if not
>     impossible (I already downloaded the sources for latest GNU
>     dlltool and considered hacking it...)
>
>     The best page about the issue I found so far is this:
>     http://wyw.dcweb.cn/stdcall.htm
>
>     Anybody have any ideas? Is my observation about the two export
>     methods correct and why is that?
>
>     Ari
>
>
>     On 01/29/2011 04:59 AM, Frank Warmerdam wrote:
>
>         Folks,
>
>         I have had good success with the GDAL 1.8 upgrade and I have
>         now thrown
>         the switch migrating it into the production version of OSGeo4W.
>
>         I have upgraded "gdal", "gdal-python", "gdal-mrsid" and
>         "gdal-autotest".
>         I have yet to upgrade the ecw, and sde related drivers, and I
>         have not
>         upgraded the java bindings.  I will try to work on them tomorrow.
>
>         The gdal15dll package was created for backward compatability
>         and should
>         be automatically pulled in.  It seems to be working fine for
>         OpenEV.
>
>         I would encourage folks building packages to update, and
>         rebuild them
>         using the current GDAL.  The GDAL include files in
>         C:\OSGeo4W\include
>         and libraries in C:\OSGeo4w\lib should now be for 1.8.
>
>         Note that the new GDAL package is built using Visual Studio 2008
>         Express instead of 2003.  If you are using the C++ API this
>         may cause
>         issues but if you use the C API it should be invisible.
>
>         Let me know of problems.
>
>         Best regards,
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110130/240e658d/attachment.html
From strk at keybit.net  Sun Jan 30 06:09:12 2011
From: strk at keybit.net (strk)
Date: Sun Jan 30 06:09:16 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
Message-ID: <20110130110912.GQ77176@keybit.net>

Hello,
I'm writing GML output routines for Topologically-defined features
in PostGIS and found what I think is a bug in how ogr interprets
the <gml:Face> tag contents.

Take this topology:

 n1
  +-----e1-->-----.
  |               |
  |      F1       |
  |           n3  |
  |   ,-e2->-+    | 
  |   |      |    |
  |   |  F2  |    |
  |   |      |    |
  |   +-<-e7-'    |
  | n4            |
  |               |
  `---<-e2--------+
                   n2

It occurs to me that face F1 above is bounded by all edges,
not just the exterior ones, so I'd put _all_ edges inside
one gml:Face tag:

 <Face id="F1">
  <directedEdge orientation="-" id="e1" />
  <directedEdge orientation="-" id="e2" />
  <directedEdge id="e3" />
  <directedEdge id="e4" />
 </Face>

This is expressed clearly in the OGC 03-105r1 document (GML-3.1.1, 2004)
and 07-036 (GML-3.2.1, 2007)

<<
The non-dangling edges in the boundary of a face comprise one or more
topological rings. Each such ring consists of directedEdges connected
in a cycle, and is oriented with the face on its left.
>>

Now, when encountering such a GML snippet, ogr2ogr (GML driver)
insists in considering all edges as being part of the same ring
thus producing an invalid polygon as a result.

It basically interprets a <gml:Face> tag as if it was a ring, which
I belive is wrong.

Another example of such invalid intepretation follows:

  +------+------+
  | F1   |  F2  |
  +------+------+

A surface/polygon formed by the two faces above (F1,F2) should be
represented as:

 <TopoSurface id="P1">
   <directedFace> <Face id="F1"/> </directedFace>
   <directedFace> <Face id="F2"/> </directedFace>
 </TopoSurface>

Whereas the resulting feature geometry should be a single-ring polygon:
the topological _union_ of the two faces (I haven't tested this but
I belive GDAL would get this wrong as well).

On the PostGIS side, I've so far implemented the "invalid" representation
for the sake of interoperability with GDAL, but being a new implementation
I'd rather get it right from the start...

Note that using the "invalid" (but GDAL-compatible) representation also
has the negative effect of making it _impossible_ to map PostGIS(ISO)
topologies to GML in a lossless way (PostGIS topology faces would have 
no direct corrispondence to <gml:Face> tags).

I hope, with this mail, to get some feedback from the authors of the
GML reading capabilities of GDAL to plan actions towards interoperability
of the two systems and adherence to the standard (if possible).

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From chaitanya.ch at gmail.com  Sun Jan 30 07:23:20 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jan 30 07:23:24 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <20110130110912.GQ77176@keybit.net>
References: <20110130110912.GQ77176@keybit.net>
Message-ID: <AANLkTinO2=CPzUAdvAZr7cFsqwNdNFUk6eJe_ZVXRgvZ@mail.gmail.com>

strk,

Thank you very much for pointing out the errors. I could blame it on the
lack of enough sample data but that's just laziness. I should have read the
specifications more throughly.

I see your first point but I need to dig deeper for the second.

Please file a ticket at http://trac.osgeo.org/gdal/newticket
I would be grateful if you can provide some sample data.

On Sun, Jan 30, 2011 at 4:39 PM, strk <strk@keybit.net> wrote:

> Hello,
> I'm writing GML output routines for Topologically-defined features
> in PostGIS and found what I think is a bug in how ogr interprets
> the <gml:Face> tag contents.
>
> Take this topology:
>
>  n1
>  +-----e1-->-----.
>  |               |
>  |      F1       |
>  |           n3  |
>  |   ,-e2->-+    |
>  |   |      |    |
>  |   |  F2  |    |
>  |   |      |    |
>  |   +-<-e7-'    |
>  | n4            |
>  |               |
>  `---<-e2--------+
>                   n2
>
> It occurs to me that face F1 above is bounded by all edges,
> not just the exterior ones, so I'd put _all_ edges inside
> one gml:Face tag:
>
>  <Face id="F1">
>  <directedEdge orientation="-" id="e1" />
>  <directedEdge orientation="-" id="e2" />
>  <directedEdge id="e3" />
>  <directedEdge id="e4" />
>  </Face>
>
> This is expressed clearly in the OGC 03-105r1 document (GML-3.1.1, 2004)
> and 07-036 (GML-3.2.1, 2007)
>
> <<
> The non-dangling edges in the boundary of a face comprise one or more
> topological rings. Each such ring consists of directedEdges connected
> in a cycle, and is oriented with the face on its left.
> >>
>
> Now, when encountering such a GML snippet, ogr2ogr (GML driver)
> insists in considering all edges as being part of the same ring
> thus producing an invalid polygon as a result.
>
> It basically interprets a <gml:Face> tag as if it was a ring, which
> I belive is wrong.
>
> Another example of such invalid intepretation follows:
>
>  +------+------+
>  | F1   |  F2  |
>  +------+------+
>
> A surface/polygon formed by the two faces above (F1,F2) should be
> represented as:
>
>  <TopoSurface id="P1">
>   <directedFace> <Face id="F1"/> </directedFace>
>   <directedFace> <Face id="F2"/> </directedFace>
>  </TopoSurface>
>
> Whereas the resulting feature geometry should be a single-ring polygon:
> the topological _union_ of the two faces (I haven't tested this but
> I belive GDAL would get this wrong as well).
>
> On the PostGIS side, I've so far implemented the "invalid" representation
> for the sake of interoperability with GDAL, but being a new implementation
> I'd rather get it right from the start...
>
> Note that using the "invalid" (but GDAL-compatible) representation also
> has the negative effect of making it _impossible_ to map PostGIS(ISO)
> topologies to GML in a lossless way (PostGIS topology faces would have
> no direct corrispondence to <gml:Face> tags).
>
> I hope, with this mail, to get some feedback from the authors of the
> GML reading capabilities of GDAL to plan actions towards interoperability
> of the two systems and adherence to the standard (if possible).
>
> --strk;
>
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110130/1f74d57e/attachment.html
From even.rouault at mines-paris.org  Sun Jan 30 07:24:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 30 07:24:22 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <20110130110912.GQ77176@keybit.net>
References: <20110130110912.GQ77176@keybit.net>
Message-ID: <201101301324.08809.even.rouault@mines-paris.org>

Hi Sandro,

CC'ing Chaitanya who implemented the reading of topological GML3 elements.

Le dimanche 30 janvier 2011 12:09:12, strk a ?crit :
> Hello,
> I'm writing GML output routines for Topologically-defined features
> in PostGIS and found what I think is a bug in how ogr interprets
> the <gml:Face> tag contents.
> 
> Take this topology:
> 
>  n1
>   +-----e1-->-----.
> 
>   |      F1       |
>   |      
>   |           n3  |
>   |   
>   |   ,-e2->-+    |
>   |   
>   |   |  F2  |    |
>   |   
>   |   +-<-e7-'    |
>   | 
>   | n4            |
> 
>   `---<-e2--------+
>                    n2

There's probably an error with the name of the edges in your first schema : 
there are 2 e2 and one e7. I guess the edges of the interior ring should be 
named e3 and e4, right ?

> 
> It occurs to me that face F1 above is bounded by all edges,
> not just the exterior ones, so I'd put _all_ edges inside
> one gml:Face tag:
> 
>  <Face id="F1">
>   <directedEdge orientation="-" id="e1" />
>   <directedEdge orientation="-" id="e2" />
>   <directedEdge id="e3" />
>   <directedEdge id="e4" />
>  </Face>
> 
> This is expressed clearly in the OGC 03-105r1 document (GML-3.1.1, 2004)
> and 07-036 (GML-3.2.1, 2007)
> 
> <<
> The non-dangling edges in the boundary of a face comprise one or more
> topological rings. Each such ring consists of directedEdges connected
> in a cycle, and is oriented with the face on its left.
> 
> 
> Now, when encountering such a GML snippet, ogr2ogr (GML driver)
> insists in considering all edges as being part of the same ring
> thus producing an invalid polygon as a result.

If I understand well, the face should be interpreted as a polygon with 
exterior ring being e1,e2 and interior ring being e3, e4 ?

I've reviewed a bit the code and my understanding is that we concatenate all 
the linestring geometries found in the directedEdge of a Face into a single 
ring as you noticed. So we should implement detection of cycles to emit as 
many rings as necessary.

> 
> It basically interprets a <gml:Face> tag as if it was a ring, which
> I belive is wrong.
> 
> Another example of such invalid intepretation follows:
> 
>   +------+------+
> 
>   | F1   |  F2  |
> 
>   +------+------+
> 
> A surface/polygon formed by the two faces above (F1,F2) should be
> represented as:
> 
>  <TopoSurface id="P1">
>    <directedFace> <Face id="F1"/> </directedFace>
>    <directedFace> <Face id="F2"/> </directedFace>
>  </TopoSurface>
> 
> Whereas the resulting feature geometry should be a single-ring polygon:
> the topological _union_ of the two faces (I haven't tested this but
> I belive GDAL would get this wrong as well).

Yes we should likely use GEOSUnion instead of putting all the rings into a 
single polygon as we do currently.

> 
> On the PostGIS side, I've so far implemented the "invalid" representation
> for the sake of interoperability with GDAL, but being a new implementation
> I'd rather get it right from the start...
> 
> Note that using the "invalid" (but GDAL-compatible) representation also
> has the negative effect of making it _impossible_ to map PostGIS(ISO)
> topologies to GML in a lossless way (PostGIS topology faces would have
> no direct corrispondence to <gml:Face> tags).
> 
> I hope, with this mail, to get some feedback from the authors of the
> GML reading capabilities of GDAL to plan actions towards interoperability
> of the two systems and adherence to the standard (if possible).

I think you shouldn't try too hard to be OGR compatible in Postgis if you 
believe that we are currently not interpreting GML correctly. The GML3 
topology interpretation in OGR is completely new, so I would definitely not 
label it as a reference implementation, and it probably needs adjustements.

What could help is that you file GDAL trac tickets with examples of GML3 
topology and what you think would be the expected WKT.

Best regards,

Even

> 
> --strk;
> 
>   ()   Free GIS & Flash consultant/developer
>   /\   http://strk.keybit.net/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From strk at keybit.net  Sun Jan 30 07:51:08 2011
From: strk at keybit.net (strk)
Date: Sun Jan 30 07:51:14 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <201101301324.08809.even.rouault@mines-paris.org>
References: <20110130110912.GQ77176@keybit.net>
	<201101301324.08809.even.rouault@mines-paris.org>
Message-ID: <20110130125108.GR77176@keybit.net>

On Sun, Jan 30, 2011 at 01:24:08PM +0100, Even Rouault wrote:
> Le dimanche 30 janvier 2011 12:09:12, strk a ?crit :
> >
> >  n1
> >   +-----e1-->-----.
> >   |      F1       |
> >   |           n3  |
> >   |   ,-e2->-+    |
> >   |   |  F2  |    |
> >   |   +-<-e7-'    |
> >   | n4            |
> >   `---<-e2--------+
> >                    n2
> 
> There's probably an error with the name of the edges in your first schema : 
> there are 2 e2 and one e7. I guess the edges of the interior ring should be 
> named e3 and e4, right ?

Yes, sorry, the inner one re e3 and e4 (rather than e2 and e7)

> > It occurs to me that face F1 above is bounded by all edges,
> > not just the exterior ones, so I'd put _all_ edges inside
> > one gml:Face tag:
> > 
> >  <Face id="F1">
> >   <directedEdge orientation="-" id="e1" />
> >   <directedEdge orientation="-" id="e2" />
> >   <directedEdge id="e3" />
> >   <directedEdge id="e4" />
> >  </Face>
> > 
> > This is expressed clearly in the OGC 03-105r1 document (GML-3.1.1, 2004)
> > and 07-036 (GML-3.2.1, 2007)
> > 
> > <<
> > The non-dangling edges in the boundary of a face comprise one or more
> > topological rings. Each such ring consists of directedEdges connected
> > in a cycle, and is oriented with the face on its left.
> > 
> > 
> > Now, when encountering such a GML snippet, ogr2ogr (GML driver)
> > insists in considering all edges as being part of the same ring
> > thus producing an invalid polygon as a result.
> 
> If I understand well, the face should be interpreted as a polygon with 
> exterior ring being e1,e2 and interior ring being e3, e4 ?

Yes. To my understanding.
And it would match ISO topology too (from SQL-MM).

> I've reviewed a bit the code and my understanding is that we concatenate all 
> the linestring geometries found in the directedEdge of a Face into a single 
> ring as you noticed. So we should implement detection of cycles to emit as 
> many rings as necessary.

Yes.  This for each face.

> > Another example of such invalid intepretation follows:
> > 
> >   +------+------+
> >   | F1   |  F2  |
> >   +------+------+
> > 
> > A surface/polygon formed by the two faces above (F1,F2) should be
> > represented as:
> > 
> >  <TopoSurface id="P1">
> >    <directedFace> <Face id="F1"/> </directedFace>
> >    <directedFace> <Face id="F2"/> </directedFace>
> >  </TopoSurface>
> > 
> > Whereas the resulting feature geometry should be a single-ring polygon:
> > the topological _union_ of the two faces (I haven't tested this but
> > I belive GDAL would get this wrong as well).
> 
> Yes we should likely use GEOSUnion instead of putting all the rings into a 
> single polygon as we do currently.

Correct. The GEOSUnion of all composing faces.

> I think you shouldn't try too hard to be OGR compatible in Postgis if you 
> believe that we are currently not interpreting GML correctly. The GML3 
> topology interpretation in OGR is completely new, so I would definitely not 
> label it as a reference implementation, and it probably needs adjustements.
> 
> What could help is that you file GDAL trac tickets with examples of GML3 
> topology and what you think would be the expected WKT.

Ok. Stubbed: http://trac.osgeo.org/gdal/ticket/3937
Thanks for the feedback.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From strk at keybit.net  Sun Jan 30 08:05:30 2011
From: strk at keybit.net (strk)
Date: Sun Jan 30 08:05:38 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <AANLkTinO2=CPzUAdvAZr7cFsqwNdNFUk6eJe_ZVXRgvZ@mail.gmail.com>
References: <20110130110912.GQ77176@keybit.net>
	<AANLkTinO2=CPzUAdvAZr7cFsqwNdNFUk6eJe_ZVXRgvZ@mail.gmail.com>
Message-ID: <20110130130530.GS77176@keybit.net>

On Sun, Jan 30, 2011 at 05:53:20PM +0530, Chaitanya kumar CH wrote:

> Thank you very much for pointing out the errors. I could blame it on the
> lack of enough sample data but that's just laziness. I should have read the
> specifications more throughly.

I noticed primarly because the GDAL interpretation would have not map
1:1 with the ISO SQL/MM topology model implemented in PostGIS.

> I see your first point but I need to dig deeper for the second.

The second point is not very clear in the GML document.
About TopoSurface, it says:

 `` gml:TopoSurface represents a homogeneous topological expression,
    a set of directed faces, which if realized are isomorphic to a
    geometric surface primitive. ''


I'm guessing that "realizing the set of" (F1,F2) means deploying it,
or "burning" it, "filling" it.... "unioning" it.

> >  +------+------+
> >  | F1   |  F2  |
> >  +------+------+
> >
> > A surface/polygon formed by the two faces above (F1,F2) should be
> > represented as:
> >
> >  <TopoSurface id="P1">
> >   <directedFace> <Face id="F1"/> </directedFace>
> >   <directedFace> <Face id="F2"/> </directedFace>
> >  </TopoSurface>


The simple geometry resulting from the above would be this:

     +-------------+
     |     P1      |
     +-------------+

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From warmerdam at pobox.com  Sun Jan 30 12:00:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 30 12:00:25 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <201101300016.52571.even.rouault@mines-paris.org>
References: <4D447C2B.3030002@pobox.com>
	<201101300016.52571.even.rouault@mines-paris.org>
Message-ID: <4D459923.80005@pobox.com>

On 11-01-29 06:16 PM, Even Rouault wrote:
> 1) I had a strange feeling when I read that "In the absence of a user or
> application level policy, default to a policy of "PREFER_PROPRIETARY"". It
> sounds a bit paradoxical for an open source library... I guess that on Linux,
> it should be "PREFER_RECIPROCAL" and "PREFER_PROPRIETARY" on Windows. Just
> kidding...

Even,

Indeed, I felt the same way.  But I mostly think about formats like
ecw and mrsid being of high interest and I hadn't realized there were
as many reciprocally licensed drivers.

> 2) We don't control the licence of third party libraries and their licencing
> terms can thus change over the time or have multiple licencing terms.
>
> a) For example, currently the GDAL EPSILON driver relies on the epsilon
> library which is currently GPL. But Alessandro Furieri (Spatialite/Rasterlite
> author ) asked to the author of libepsilon if he would agree to relicence it

I believe we would just make a reasonable effort.  In some cases
we might be able to detect from the version of the library what
policy applies.

> b) For MySQL, it depends on whether you use the open source version (GPL) or
> the commercial version.

Really?  I had assumed that the client libraries would have been
under a non-reciprocal license even if the database server itself
was GPLed.  I wonder if there is a way of determining the license
configuration at runtime or from the include files.

> 3) Licences of the drivers :
>
> * In the list of reciprocal drivers, you can add PDF (because of poppler being
> GPL)
> * I'm not sure for the GPSBabel driver. The driver doesn't technically link to
> GPSBabel (GPL) but communicate it with it through fork / exec / pipe. Does it
> make the driver to be bound to the GPL ?

As long as the GPLed code is in a different process it seems clear
that the GPL license requirements do not apply.  So this one should
be fine as "nonreciprocal".

> * As far as ODBC, PGEO, MSSQLSPATIAL (and GEOMEDIA in trunk), it depends on
> the actual ODBC library... On unix, unixODBC is LGPL.

That could be hard to establish.  I'm still unclear on what we will
do here.

> * The OGR SOSI driver should probably be marked as proprietary currently as it
> relies on linking with binary objects with unknown licencing terms, even if
> apparently the ultimate goal seems to open source them.

Noted in the RFC.

> * I'm not sure for the ArcSDE Raster. I imagine this should be commercial ?

agreed

> * I'm a bit confused by http://gdal.org/frmt_msg.html. Seems that it relies on
> third party stuff with both proprietary and GPL code.

I have listed this in the rfc.

> 4) A technical detail, but Python bindings automatically register the drivers
> when importing gdal or ogr modules, so it would not be possible to do a
> gdal.SetConfigOption('GDAL_LICENSE_POLICY', 'USE_ALL'), but
> os.environ['GDAL_LICENSE_POLICY'] = 'USE_ALL' should work

Agreed, I have added a note about exposing AutoSkipDrivers() via SWIG
so an application that wants to apply a particular policy can update
the loaded drivers.

> 5) I was wondering if it wouldn't be nice to have a *build* option that could
> be equivalent to setting GDAL_LICENSE_POLICY = USE_ALL. That would only be
> usefull for power users that build their own GDAL for their own purposes and
> don't intend distributing it. Obviously neither Linux distributions nor
> OSGeo4W should use it, so that makes its use case scarce.

Yes, this seems like it could be useful.  Presumably we would implement
this in a way that lets the software be built with any particular default
GDAL_LICENSE_POLICY if not provided by other means.    I have incorporated
it in the RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Sun Jan 30 12:29:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 30 12:30:07 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D459923.80005@pobox.com>
References: <4D447C2B.3030002@pobox.com>
	<201101300016.52571.even.rouault@mines-paris.org>
	<4D459923.80005@pobox.com>
Message-ID: <201101301829.58784.even.rouault@mines-paris.org>

Le dimanche 30 janvier 2011 18:00:19, Frank Warmerdam a ?crit :

> > b) For MySQL, it depends on whether you use the open source version (GPL)
> > or the commercial version.
> 
> Really?  I had assumed that the client libraries would have been
> under a non-reciprocal license even if the database server itself
> was GPLed. 

Actually, I've just researched a bit, and the situation is more complicated 
than what I thought with their fun "GPL License with a FLOSS Exception". See 
http://mysql.com/about/legal/licensing/index.html and 
http://mysql.com/about/legal/licensing/foss-exception/

My understanding of it is that if GDAL is used by an application complying 
with a FLOSS licence, it must not necessarily comply with the GPL. But if the 
application is commercial, it must comply with the GPL... 

So if using the GPL licenced mysql, the mysql driver should be marked as 
NONRECIPROCAL if GDAL_APPLICATION_LICENSE_POLICY  = RECIPROCAL or DEFAULT, but 
it should be marked as RECIPROCAL if GDAL_APPLICATION_LICENSE_POLICY  = 
PROPRIETARY. But I'm not sure we want this RFC to take into account all these 
complicated licence terms and make the DMD_LICENSE_POLICY depend on the 
GDAL_APPLICATION_LICENSE_POLICY ...

>  I wonder if there is a way of determining the license
> configuration at runtime or from the include files.

Actually I see that /usr/include/mysql/mysql_version.h declares

#ifndef LICENSE
#define LICENSE                         GPL
#endif /* LICENSE */

so that should be possible at build time.

> 
> > * As far as ODBC, PGEO, MSSQLSPATIAL (and GEOMEDIA in trunk), it depends
> > on the actual ODBC library... On unix, unixODBC is LGPL.
> 
> That could be hard to establish.  I'm still unclear on what we will
> do here.

On Windows, I think that the actual license of the odbc library doesn't really 
count as people won't distribute the windows odbc system library right ? 
Otherwise it would make it impossible to distribute GPL software on Windows 
since the system windows libraries cannot comply with the GPL. A bit confused 
here...
From szekerest at gmail.com  Sun Jan 30 15:39:58 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jan 30 15:40:00 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D453131.8010609@gmail.com>
References: <4D4382AD.7070902@pobox.com> <4D4429BE.9090305@gmail.com>
	<AANLkTimvfxboJxNYXAa044Jfv-CyS=wW3iOFERVfb2KK@mail.gmail.com>
	<4D453131.8010609@gmail.com>
Message-ID: <AANLkTik22h+xTWVM4C0uYXJLUpw4TME8d4gSVhA7Bfwe@mail.gmail.com>

Ari,

Assuming you did mention to compile the Perl bindings with MinGW could you
describe the steps of the compilation in more detail? (by using the files
downloaded from http://vbkto.dyndns.org/sdk.) Which packages should be
installed as the prerequisites of the compilation?
I admit I'm not an expert in MinGW but it would be quite helpful on my side
to be able to reproduce the issue you are talking about. I would also be
curious to know how the perl tests are executed in this case.

Best regards,

Tamas


2011/1/30 Ari Jolma <ari.jolma@gmail.com>

>  29.1.2011 20:43, Tamas Szekeres kirjoitti:
>
> Ari,
>
> I would be eager to know the exact use case you have. Did you have some
> errors provided by the linker in this case?
>
>
> For the stdcall functions I added entries like this
>
> _CPLDefaultErrorHandler@12
> CPLDefaultErrorHandler = _CPLDefaultErrorHandler@12
>
> to the .def file. I create the .dll.a, which is the import library, with
> dlltool from the .def.
>
> There are no errors from the linker. If I leave the stdcall entries as they
> are from pexports, i.e., just
>
> _CPLDefaultErrorHandler@12
>
> The linker complains about undefined reference to `CPLDefaultErrorHandler'
>
> However, running the Perl tests fail with "The procedure entry point
> CPLDefaultErrorHandler could not be located in the dynamic link library
> gdal17.dll". This is no wonder since the Perl bindings GDAL.dll imports
> CPLDefaultErrorHandler from gdal17.dll. I believe this because I'm misusing
> the .def file or dlltool does not understand that CPLDefaultErrorHandler is
> an alias to _CPLDefaultErrorHandler@12.
>
> I saw a web page which seemed to say that this is a known problem in
> dlltool and it had a small hack for dlltool.c to fix the problem, but I
> don't find the page just now and I've not yet tried hacking the dlltool.c
> (it seems quite possible).
>
> I think the cdecl functions work ok.
>
> If I compile GDAL in MSYS, all functions are exported cdecl.
>
> Ari
>
>
>
> It would indeed be a problem how the various compilers decorate their
> export functions in a different way. It looks like the __declspec(dllexport)
> option (this is what is used in GDAL) provides different names with MSVC and
> MinGW by default. If we want to compile the dlls in a portable way we should
> probably get back to an alternative method like .def file or "#pragma
> comment( linker, "/export:FuncName" )" when exporting the functions.
>
> The article you are referring to describes another way of providing a
> portable version that is:
> 1. Compile the dll as it is now (the functions exported
> with__declspec(dllexport))
> 2. Extract the export functions in a .def file by using pexports
> 3. Replace the function names with their undecorated names in the .def file
> 4. Recompile the dll with this new export definition file.
>
> I'm keen to give it a try if I get some further info about how to test this
> on the other side.
>
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/1/29 Ari Jolma <ari.jolma@gmail.com>
>
>> Did anybody else try to use the now standard Visual Studio built GDAL DLL
>> (which was much discussed some time ago here and is now available from
>> Tamas' site) in a MinGW environment?
>>
>> I spent some time a week or two ago on the issue, but I had a hard time,
>> which AFAIK is because the DLL mixes two function export methods and thus
>> using the standard tools seems difficult if not impossible (I already
>> downloaded the sources for latest GNU dlltool and considered hacking it...)
>>
>> The best page about the issue I found so far is this:
>> http://wyw.dcweb.cn/stdcall.htm
>>
>> Anybody have any ideas? Is my observation about the two export methods
>> correct and why is that?
>>
>> Ari
>>
>>
>> On 01/29/2011 04:59 AM, Frank Warmerdam wrote:
>>
>>> Folks,
>>>
>>> I have had good success with the GDAL 1.8 upgrade and I have now thrown
>>> the switch migrating it into the production version of OSGeo4W.
>>>
>>> I have upgraded "gdal", "gdal-python", "gdal-mrsid" and "gdal-autotest".
>>> I have yet to upgrade the ecw, and sde related drivers, and I have not
>>> upgraded the java bindings.  I will try to work on them tomorrow.
>>>
>>> The gdal15dll package was created for backward compatability and should
>>> be automatically pulled in.  It seems to be working fine for OpenEV.
>>>
>>> I would encourage folks building packages to update, and rebuild them
>>> using the current GDAL.  The GDAL include files in C:\OSGeo4W\include
>>> and libraries in C:\OSGeo4w\lib should now be for 1.8.
>>>
>>> Note that the new GDAL package is built using Visual Studio 2008
>>> Express instead of 2003.  If you are using the C++ API this may cause
>>> issues but if you use the C API it should be invisible.
>>>
>>> Let me know of problems.
>>>
>>> Best regards,
>>>
>>
>>   _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110130/ae9c3188/attachment.html
From warmerdam at pobox.com  Sun Jan 30 16:01:16 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 30 16:01:21 2011
Subject: [gdal-dev] GDAL/OGR 1.8 Java Bindings for Windows Updated
Message-ID: <4D45D19C.5010907@pobox.com>

Folks,

I have updated the gdal-java package for OSGeo4W to be 1.8.  I have also
rewritten the "building Java bindings on windows" topic in the GDAL Trac
to reflect how things work.  I have only minimally tested the new package
so feel free to let me know if there are problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Sun Jan 30 16:47:24 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jan 30 16:47:28 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <201101301829.58784.even.rouault@mines-paris.org>
References: <4D447C2B.3030002@pobox.com>
	<201101300016.52571.even.rouault@mines-paris.org>
	<4D459923.80005@pobox.com>
	<201101301829.58784.even.rouault@mines-paris.org>
Message-ID: <AANLkTinS8LgQqj3r91xrZ2S2Q-dZdGmWqxk1OZ-mp74a@mail.gmail.com>

2011/1/30 Even Rouault <even.rouault@mines-paris.org>

>
> On Windows, I think that the actual license of the odbc library doesn't
> really
> count as people won't distribute the windows odbc system library right ?
> Otherwise it would make it impossible to distribute GPL software on Windows
> since the system windows libraries cannot comply with the GPL. A bit
> confused
> here...
>
>
Even,

I would somewhat make the distiction of the term "system library" and 3rd
party libraries which makes some difference with regards how GPL is applied.
There can be found some additional explanation at
http://www.gnu.org/licenses/gpl-faq.html#GPLIncompatibleLibs with the
conclusion of:

<quote>
Both versions of the GPL have an exception to their copyleft, commonly
called the system library exception. If the GPL-incompatible libraries you
want to use meet the criteria for a system library, then you don't have to
do anything special to use them; the requirement to distribute source code
for the whole program does not include those libraries, even if you
distribute a linked executable containing them.

The criteria for what counts as a "system library" vary between different
versions of the GPL. GPLv3 explicitly defines "System Libraries" in section
1, to exclude it from the definition of "Corresponding Source." GPLv2 says
the following, near the end of section 3:

However, as a special exception, the source code distributed need not
include anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component itself
accompanies the executable.
</quote>

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110130/8882b639/attachment.html
From jef at norbit.de  Sun Jan 30 17:41:02 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sun Jan 30 17:41:40 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <4D453131.8010609@gmail.com>
References: <4D4382AD.7070902@pobox.com> <4D4429BE.9090305@gmail.com>
	<AANLkTimvfxboJxNYXAa044Jfv-CyS=wW3iOFERVfb2KK@mail.gmail.com>
	<4D453131.8010609@gmail.com>
Message-ID: <20110130224102.GA10410@norbit.de>

Hi Ari,

On Sun, 30. Jan 2011 at 11:36:49 +0200, Ari Jolma wrote:
>    to the .def file. I create the .dll.a, which is the import library, with
>    dlltool from the .def.

Did you try to link the gdal_c_i.lib instead of generating your own library
from the DLL?  That what I do with GRASS.  Works fine for me - just the reverse
doesn't.

J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From even.rouault at mines-paris.org  Sun Jan 30 18:07:25 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 30 18:07:34 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <BLU0-SMTP144080310963F596DB724DBB2E00@phx.gbl>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
	<201101292225.59426.even.rouault@mines-paris.org>
	<BLU0-SMTP144080310963F596DB724DBB2E00@phx.gbl>
Message-ID: <201101310007.25073.even.rouault@mines-paris.org>

Le samedi 29 janvier 2011 22:40:20, Marius Jigmond a ?crit :
> The link should work for another day or so (automatic server purge). I
> can re-upload it if you don't get the chance to download it. Warning:
> 1.2GB.
> https://www.twdb.state.tx.us/filetxfr/emaillinkdownload.aspx?id=&FileTransf
> erID=289562464
> 

ok, I've reproduced the bug and fixed it in 
http://trac.osgeo.org/gdal/ticket/3938

This was one of the most "interesting" bug since months I had to track down ! 
Thanks for reporting.

Even
From antonio.rocha at deimos.com.pt  Mon Jan 31 04:01:21 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Mon Jan 31 04:01:27 2011
Subject: [gdal-dev] using gdalwarp: defining target_spatial resolution
Message-ID: <4D467A61.8030806@deimos.com.pt>

Greetings

I'm using a bash script to reproject an image, using gdalwarp, to a set 
of Coordinates/Projection systems. I'm using -tr  flag to define output 
spatial resolution. Since, i'm using UTM WGS84 I have this information 
in Meters (e.g. 30) so far, so good.
The thing is that i need to reproject to this system
+proj=longlat +no_defs +a=6378137 +rf=298.257223563 
+towgs84=0.000,0.000,0.000
So, I'm getting an error because this system uses degrees not meters as 
units. and, I will probably get more problems in the near future with 
other systems
My questions are:
1- from PROJ.4 format, how can I tell the units of the target 
coordinate/projection system
2- Since it's in degrees, does anyone suggest any (really good) tool to 
convert meters to degs? In order to parameterize -tr parameter?


Thanks
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5832 (20110130) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From stefano.moratto at gmail.com  Mon Jan 31 04:26:29 2011
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Mon Jan 31 04:26:31 2011
Subject: [gdal-dev] Interrupt long operation
Message-ID: <AANLkTino9SiP_dWDiiDo2334GyZjzF0s1iUU1nxPDuie@mail.gmail.com>

Hello,
          I need to interrupt a RasterIO  and warp calls before they have
been ended.
The call is invoked in a background thread and  It may happen that the user
changes the requested area in the main thread (GUI) (eg. a pan/scroll
operation).


Any suggestion,

Stefano
------------------------


Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110131/5c32cc57/attachment.html
From strk at keybit.net  Mon Jan 31 05:08:11 2011
From: strk at keybit.net (strk)
Date: Mon Jan 31 05:08:16 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <20110130125108.GR77176@keybit.net>
References: <20110130110912.GQ77176@keybit.net>
	<201101301324.08809.even.rouault@mines-paris.org>
	<20110130125108.GR77176@keybit.net>
Message-ID: <20110131100811.GB23689@keybit.net>

On Sun, Jan 30, 2011 at 01:51:08PM +0100, strk wrote:
> On Sun, Jan 30, 2011 at 01:24:08PM +0100, Even Rouault wrote:
> >
> > So we should implement detection of cycles to emit as 
> > many rings as necessary.
> 
> Yes.  This for each face.

To add some more about the topic, I'm not sure the directedEdge
tags should be ordered, so when detecting cycles the code might
be better not rely on any specific ordering.

Does anyone have evidence of requested ordering ?

--Strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From chaitanya.ch at gmail.com  Mon Jan 31 08:03:46 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan 31 08:03:47 2011
Subject: [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <20110131100811.GB23689@keybit.net>
References: <20110130110912.GQ77176@keybit.net>
	<201101301324.08809.even.rouault@mines-paris.org>
	<20110130125108.GR77176@keybit.net>
	<20110131100811.GB23689@keybit.net>
Message-ID: <AANLkTikgxmT_eE5uqmw4X7qR1_HsFCZvDVJ8tuj60gUS@mail.gmail.com>

strk,

You are right. The sequence of the elements _can_ be specified explicitly
using a sequence tag. Without that it will just be a guess work, especially
if any of the rings have a common point.

On Mon, Jan 31, 2011 at 3:38 PM, strk <strk@keybit.net> wrote:

> On Sun, Jan 30, 2011 at 01:51:08PM +0100, strk wrote:
> > On Sun, Jan 30, 2011 at 01:24:08PM +0100, Even Rouault wrote:
> > >
> > > So we should implement detection of cycles to emit as
> > > many rings as necessary.
> >
> > Yes.  This for each face.
>
> To add some more about the topic, I'm not sure the directedEdge
> tags should be ordered, so when detecting cycles the code might
> be better not rely on any specific ordering.
>
> Does anyone have evidence of requested ordering ?
>
> --Strk;
>
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110131/a1d87bb5/attachment.html
From ari.jolma at gmail.com  Mon Jan 31 08:27:17 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon Jan 31 08:29:03 2011
Subject: [gdal-dev] GDAL 1.8 - Switch Thrown
In-Reply-To: <AANLkTik22h+xTWVM4C0uYXJLUpw4TME8d4gSVhA7Bfwe@mail.gmail.com>
References: <4D4382AD.7070902@pobox.com>	<4D4429BE.9090305@gmail.com>	<AANLkTimvfxboJxNYXAa044Jfv-CyS=wW3iOFERVfb2KK@mail.gmail.com>	<4D453131.8010609@gmail.com>
	<AANLkTik22h+xTWVM4C0uYXJLUpw4TME8d4gSVhA7Bfwe@mail.gmail.com>
Message-ID: <4D46B8B5.6000102@gmail.com>

On 01/30/2011 10:39 PM, Tamas Szekeres wrote:
> Ari,
>
> Assuming you did mention to compile the Perl bindings with MinGW could 
> you describe the steps of the compilation in more detail? (by using 
> the files downloaded from http://vbkto.dyndns.org/sdk.) Which packages 
> should be installed as the prerequisites of the compilation?
> I admit I'm not an expert in MinGW but it would be quite helpful on my 
> side to be able to reproduce the issue you are talking about. I would 
> also be curious to know how the perl tests are executed in this case.

Tamas,

First, this page: 
http://www.transmissionzero.co.uk/computing/building-dlls-with-mingw/ 
has an alarming advice: "Therefore [when using stdcall], if you intend 
to have binary compatibility between MinGW and MSVC builds of your DLL, 
it?s necessary to change the names of the exported functions".

The steps: Download and install your DLL package; download the 
respective swig/perl folder (this really should be a separately 
downloadable package distro); Edit Makefile.PL to find gdal17.dll; run 
perl Makefile.PL; run make.bat.

That assumes of course you have a working perl. Strawberry perl should 
be usable as it is MinGW. Also in fact Makefile.PL should find the 
import library for which I used gdal17.dll.a, which I created with 
pexports and dlltool.

Perl tests are run simply as "make test", which runs the test code 
without installing anything.

J?rgen, no I did not yet try .lib.

Ari

>
> Best regards,
>
> Tamas
>
>
> 2011/1/30 Ari Jolma <ari.jolma@gmail.com <mailto:ari.jolma@gmail.com>>
>
>     29.1.2011 20:43, Tamas Szekeres kirjoitti:
>>     Ari,
>>
>>     I would be eager to know the exact use case you have. Did you
>>     have some errors provided by the linker in this case?
>
>     For the stdcall functions I added entries like this
>
>     _CPLDefaultErrorHandler@12
>     CPLDefaultErrorHandler = _CPLDefaultErrorHandler@12
>
>     to the .def file. I create the .dll.a, which is the import
>     library, with dlltool from the .def.
>
>     There are no errors from the linker. If I leave the stdcall
>     entries as they are from pexports, i.e., just
>
>     _CPLDefaultErrorHandler@12
>
>     The linker complains about undefined reference to
>     `CPLDefaultErrorHandler'
>
>     However, running the Perl tests fail with "The procedure entry
>     point CPLDefaultErrorHandler could not be located in the dynamic
>     link library gdal17.dll". This is no wonder since the Perl
>     bindings GDAL.dll imports CPLDefaultErrorHandler from gdal17.dll.
>     I believe this because I'm misusing the .def file or dlltool does
>     not understand that CPLDefaultErrorHandler is an alias to
>     _CPLDefaultErrorHandler@12.
>
>     I saw a web page which seemed to say that this is a known problem
>     in dlltool and it had a small hack for dlltool.c to fix the
>     problem, but I don't find the page just now and I've not yet tried
>     hacking the dlltool.c (it seems quite possible).
>
>     I think the cdecl functions work ok.
>
>     If I compile GDAL in MSYS, all functions are exported cdecl.
>
>     Ari
>
>
>
>>     It would indeed be a problem how the various compilers decorate
>>     their export functions in a different way. It looks like the
>>     __declspec(dllexport) option (this is what is used in GDAL)
>>     provides different names with MSVC and MinGW by default. If we
>>     want to compile the dlls in a portable way we should probably get
>>     back to an alternative method like .def file or "#pragma comment(
>>     linker, "/export:FuncName" )" when exporting the functions.
>>
>>     The article you are referring to describes another way of
>>     providing a portable version that is:
>>     1. Compile the dll as it is now (the functions exported
>>     with__declspec(dllexport))
>>     2. Extract the export functions in a .def file by using pexports
>>     3. Replace the function names with their undecorated names in the
>>     .def file
>>     4. Recompile the dll with this new export definition file.
>>
>>     I'm keen to give it a try if I get some further info about how to
>>     test this on the other side.
>>
>>
>>     Best regards,
>>
>>     Tamas
>>
>>
>>
>>
>>     2011/1/29 Ari Jolma <ari.jolma@gmail.com
>>     <mailto:ari.jolma@gmail.com>>
>>
>>         Did anybody else try to use the now standard Visual Studio
>>         built GDAL DLL (which was much discussed some time ago here
>>         and is now available from Tamas' site) in a MinGW environment?
>>
>>         I spent some time a week or two ago on the issue, but I had a
>>         hard time, which AFAIK is because the DLL mixes two function
>>         export methods and thus using the standard tools seems
>>         difficult if not impossible (I already downloaded the sources
>>         for latest GNU dlltool and considered hacking it...)
>>
>>         The best page about the issue I found so far is this:
>>         http://wyw.dcweb.cn/stdcall.htm
>>
>>         Anybody have any ideas? Is my observation about the two
>>         export methods correct and why is that?
>>
>>         Ari
>>
>>
>>         On 01/29/2011 04:59 AM, Frank Warmerdam wrote:
>>
>>             Folks,
>>
>>             I have had good success with the GDAL 1.8 upgrade and I
>>             have now thrown
>>             the switch migrating it into the production version of
>>             OSGeo4W.
>>
>>             I have upgraded "gdal", "gdal-python", "gdal-mrsid" and
>>             "gdal-autotest".
>>             I have yet to upgrade the ecw, and sde related drivers,
>>             and I have not
>>             upgraded the java bindings.  I will try to work on them
>>             tomorrow.
>>
>>             The gdal15dll package was created for backward
>>             compatability and should
>>             be automatically pulled in.  It seems to be working fine
>>             for OpenEV.
>>
>>             I would encourage folks building packages to update, and
>>             rebuild them
>>             using the current GDAL.  The GDAL include files in
>>             C:\OSGeo4W\include
>>             and libraries in C:\OSGeo4w\lib should now be for 1.8.
>>
>>             Note that the new GDAL package is built using Visual
>>             Studio 2008
>>             Express instead of 2003.  If you are using the C++ API
>>             this may cause
>>             issues but if you use the C API it should be invisible.
>>
>>             Let me know of problems.
>>
>>             Best regards,
>>
>>
>>         _______________________________________________
>>         gdal-dev mailing list
>>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110131/3a5acdd2/attachment-0001.html
From strk at keybit.net  Mon Jan 31 08:45:07 2011
From: strk at keybit.net (strk)
Date: Mon Jan 31 08:45:20 2011
Subject: [postgis-devel] [gdal-dev] Bogus <gml:Face> interpretation
In-Reply-To: <AANLkTikgxmT_eE5uqmw4X7qR1_HsFCZvDVJ8tuj60gUS@mail.gmail.com>
References: <20110130110912.GQ77176@keybit.net>
	<201101301324.08809.even.rouault@mines-paris.org>
	<20110130125108.GR77176@keybit.net>
	<20110131100811.GB23689@keybit.net>
	<AANLkTikgxmT_eE5uqmw4X7qR1_HsFCZvDVJ8tuj60gUS@mail.gmail.com>
Message-ID: <20110131134507.GC23689@keybit.net>

On Mon, Jan 31, 2011 at 06:33:46PM +0530, Chaitanya kumar CH wrote:
> strk,
> 
> You are right. The sequence of the elements _can_ be specified explicitly
> using a sequence tag. Without that it will just be a guess work, especially
> if any of the rings have a common point.

Ah, great to hear that.
This means postgis would not even need to construct the face geometries
in order to output the GML, as all the required information is already
in the normalized alphanumeric relations instead.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From dmorissette at mapgears.com  Mon Jan 31 08:58:23 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan 31 08:58:25 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D447C2B.3030002@pobox.com>
References: <4D447C2B.3030002@pobox.com>
Message-ID: <4D46BFFF.6050905@mapgears.com>

On 11-01-29 03:44 PM, Frank Warmerdam wrote:
>
> To that end, I have prepared an RFC which attempts to address this at
> the GDAL driver registration level. I'd appreciate feedback:
>
> http://trac.osgeo.org/gdal/wiki/rfc34_license_policy
>


Kudos for coming up with what sounds like a viable solution to this 
complicated licensing mess.

-- 
Daniel Morissette
http://www.mapgears.com/
From hobu.inc at gmail.com  Mon Jan 31 10:45:12 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Jan 31 10:45:18 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D46BFFF.6050905@mapgears.com>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
Message-ID: <363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>


On 11-01-29 03:44 PM, Frank Warmerdam wrote:

> To that end, I have prepared an RFC which attempts to address this at
> the GDAL driver registration level. I'd appreciate feedback:
> 
> http://trac.osgeo.org/gdal/wiki/rfc34_license_policy

I'm asymptotically approaching -1 on this RFC.  My concern is that it misplaces the apparent responsibility for managing licensing constraints on *us*.  It should always be the responsibility of users of the software to know, care, and mange the licensing of the software they're using.  What happens if we mislabel a driver?  Or not realize that a driver links to A, which links to B, which is GPL?  It's still the user's responsibility, but we've just done them a disservice.

> In the case of OSGeo4W the main restrictions is that we should not be
> distributing GRASS in such a way that proprietary drivers like the MrSID
> driver can be used without the user having knowingly combined them by
> themselves.


Another reason I don't like this is that it puts us square in the middle of the GPL vs commercial software war which I don't think we have been so interested in fighting.  IMO, we shouldn't try to protect users from having to care about this stuff, because they clearly need to understand the ground rules if they're going to choose to make a porridge of GPL and proprietary software.  

There's nothing preventing a user from manually registering only the drivers they need at runtime now.  If they need to register only non-GPL drivers, or non-proprietary ones, they can do so.  I completely agree this doesn't solve OSGeo4W's problem.

I do not formally object to this RFC with a veto, and I expect that it will be implemented, but I wanted to voice my opinion that I think this is a slippery, slippery slope.

Howard
From szekerest at gmail.com  Mon Jan 31 11:30:00 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 31 11:30:50 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D447C2B.3030002@pobox.com>
References: <4D447C2B.3030002@pobox.com>
Message-ID: <AANLkTikFSz3iE8MKB1cf8O2+aNVANDNfbCR-KvDvym+E@mail.gmail.com>

Frank,

I've reviewed the document and it looks good to me, though it seems better
to enforce these constraints rather at deployment time and not at run-time.
However I would have some further questions:

1. With regards to GDAL_APPLICATION_LICENSE_POLICY=DEFAULT does this mean
that GDAL will provide an error if a licensing violation is happening at
run-time? For example when MapServer attempts to display an ECW and a MySQL
layer at the same time? If this is not the case, I would prefer changing
'DEFAULT' to 'NONRECIPROCAL' and it would prevent from loading the GPL
drivers during the default operation. Having
GDAL_APPLICATION_LICENSE_POLICY=NONRECIPROCAL would provide better match
with the licensing policy of GDAL itself which intends to be MIT/X.


2. In my opinion the user shouldn't override any specific settings (like
RECIPROCAL or PROPRIETARY) being enforced by the application. In this regard
the user is allowed to violate the GPL like loading proprietary drivers in
QGIS. I don't think if USE_ALL should be a valid environment setting either.
This should only be allowed by a compilation flag which is not intended to
be used for distribution purposes.


3. I think the user should only be allowed to override
GDAL_APPLICATION_LICENSE_POLICY=DEFAULT either by the environment settings
or in the SWIG interface.

4. I don't really understand the rationale behind the PREFER_PROPRIETARY and
PREFER_RECIPROCAL settings. Shouldn't we raise an error if a licence
violation is detected? I think we might have to decide which kind of the
licensing enforcement should be applied in GDAL, like:

Version 1, The actual licensing mode is predefined within the scope of the
execution (either by the applevel or environment setting) and GDAL should
avoid to load any incompatible drivers.

Version 2, The actual licensing mode may be controlled by the drivers loaded
and provide an error if an incompatible driver is about to be used.

I'm a bit hesitant to think Version 2 would be sufficient which allows to
change the licensing mode of the application at run-time. I think we should
enforce the same licensing mode at least during the scope of the execution
or the within a single deployment if possible.


Best regards,

Tamas




2011/1/29 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> I have been thinking about how to adjust OSGeo4W in particular, and GDAL
> in general to make it easier to distribute software in a way that complies
> with the conflict between GPLed software and proprietary software.
>
> In the case of OSGeo4W the main restrictions is that we should not be
> distributing GRASS in such a way that proprietary drivers like the MrSID
> driver can be used without the user having knowingly combined them by
> themselves.
>
> To that end, I have prepared an RFC which attempts to address this at
> the GDAL driver registration level.  I'd appreciate feedback:
>
>  http://trac.osgeo.org/gdal/wiki/rfc34_license_policy
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110131/9d7cce4a/attachment.html
From warmerdam at pobox.com  Mon Jan 31 11:39:22 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 31 11:39:26 2011
Subject: [gdal-dev] Interrupt long operation
In-Reply-To: <AANLkTino9SiP_dWDiiDo2334GyZjzF0s1iUU1nxPDuie@mail.gmail.com>
References: <AANLkTino9SiP_dWDiiDo2334GyZjzF0s1iUU1nxPDuie@mail.gmail.com>
Message-ID: <4D46E5BA.6080408@pobox.com>

On 11-01-31 04:26 AM, Stefano Moratto wrote:
> Hello,
>            I need to interrupt a RasterIO  and warp calls before they have been
> ended.
> The call is invoked in a background thread and  It may happen that the user
> changes the requested area in the main thread (GUI) (eg. a pan/scroll operation).

Stefano,

Algorithms which take a GDALProgressFunc are likely to be interruptable.
Each time the progress function is invoked it has the opportunity to
return an indicate that the operation has been cancelled by the user.

So the warper can be canceled if you provide a customized progress
function.  But RasterIO cannot since it has no progress function.

If you want IO to be interruptible you would normally do it in modest
sized chunks, though this can interfere with optimization of the IO in
some cases.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 31 12:11:03 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 31 12:11:14 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <AANLkTikFSz3iE8MKB1cf8O2+aNVANDNfbCR-KvDvym+E@mail.gmail.com>
References: <4D447C2B.3030002@pobox.com>
	<AANLkTikFSz3iE8MKB1cf8O2+aNVANDNfbCR-KvDvym+E@mail.gmail.com>
Message-ID: <4D46ED27.1000208@pobox.com>

On 11-01-31 11:30 AM, Tamas Szekeres wrote:
> Frank,
>
> I've reviewed the document and it looks good to me, though it seems better to
> enforce these constraints rather at deployment time and not at run-time.
> However I would have some further questions:
>
> 1. With regards to GDAL_APPLICATION_LICENSE_POLICY=DEFAULT does this mean that
> GDAL will provide an error if a licensing violation is happening at run-time?
> For example when MapServer attempts to display an ECW and a MySQL layer at the
> same time?

Tamas,

Note that the intent of the RFC is that in a case of incompatible
drivers and the default policy one or more drivers would be de-registered
to bring things into compliance.  So, for instance the MySQL driver might
be de-registered and that means any effort to use MySQL would result in
an error message about it being an unsupported format since no driver
would recognise it.

It would *not* be a license error.

 > If this is not the case, I would prefer changing 'DEFAULT' to
> 'NONRECIPROCAL' and it would prevent from loading the GPL drivers during the
> default operation. Having GDAL_APPLICATION_LICENSE_POLICY=NONRECIPROCAL would
> provide better match with the licensing policy of GDAL itself which intends to
> be MIT/X.

I can see that "NONRECIPROCAL" might be a better term than "DEFAULT"
but I don't want to avoid loading reciprocal (ie. GPL) drivers in a
default situation.

> 2. In my opinion the user shouldn't override any specific settings (like
> RECIPROCAL or PROPRIETARY) being enforced by the application. In this regard
> the user is allowed to violate the GPL like loading proprietary drivers in
> QGIS. I don't think if USE_ALL should be a valid environment setting either.
> This should only be allowed by a compilation flag which is not intended to be
> used for distribution purposes.

I disagree strongly!  The end user always has the legal and moral
right to mix proprietary and free software.  The purpose of the
override operation is for them to knowingly make the decision that
they want to do this.

> 3. I think the user should only be allowed to override
> GDAL_APPLICATION_LICENSE_POLICY=DEFAULT either by the environment settings or
> in the SWIG interface.
>
> 4. I don't really understand the rationale behind the PREFER_PROPRIETARY and
> PREFER_RECIPROCAL settings. Shouldn't we raise an error if a licence violation
> is detected? I think we might have to decide which kind of the licensing
> enforcement should be applied in GDAL, like:
>
> Version 1, The actual licensing mode is predefined within the scope of the
> execution (either by the applevel or environment setting) and GDAL should avoid
> to load any incompatible drivers.

This was my intent, though because of the way we get metadata from drivers
to examine their license constraints it is necessary for us to load them
and then deregister them if they are in violation.

> Version 2, The actual licensing mode may be controlled by the drivers loaded
> and provide an error if an incompatible driver is about to be used.


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 31 13:21:22 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 31 13:21:25 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
Message-ID: <4D46FDA2.6020206@pobox.com>

On 11-01-31 10:45 AM, Howard Butler wrote:
>> http://trac.osgeo.org/gdal/wiki/rfc34_license_policy
>
> I'm asymptotically approaching -1 on this RFC.  My concern is that it
> misplaces the apparent responsibility for managing licensing constraints on
> *us*.  It should always be the responsibility of users of the software to
> know, care, and mange the licensing of the software they're using.  What
> happens if we mislabel a driver?  Or not realize that a driver links to A,
> which links to B, which is GPL?  It's still the user's responsibility, but
> we've just done them a disservice.

Howard,

I do not believe we are taking on any legal or moral responsibility
if a driver is mislabelled.  I think a best effort on our part is
fine.

>> In the case of OSGeo4W the main restrictions is that we should not be
>> distributing GRASS in such a way that proprietary drivers like the MrSID
>> driver can be used without the user having knowingly combined them by
>> themselves.
>
>
> Another reason I don't like this is that it puts us square in the middle of
> the GPL vs commercial software war which I don't think we have been so
> interested in fighting.

I'll just note I do not see this as a war to fight.  I am just
trying to make it easier for software distributors to act
responsibly with regard to licensing requirements of various
components.

 >  IMO, we shouldn't try to protect users from having
> to care about this stuff, because they clearly need to understand the ground
> rules if they're going to choose to make a porridge of GPL and proprietary
> software.
>
> There's nothing preventing a user from manually registering only the drivers
> they need at runtime now.  If they need to register only non-GPL drivers, or
> non-proprietary ones, they can do so.  I completely agree this doesn't solve
> OSGeo4W's problem.

You refer to "user" above, but I assume you are referring to
application developers and software distributors.  I agree that
this RFC is not intended to absolve them of all awareness of the
licensing of components they are distributing.

> I do not formally object to this RFC with a veto, and I expect that it will
> be implemented, but I wanted to voice my opinion that I think this is a
> slippery, slippery slope.

You concerns have moderately sapped my interest in the RFC.  As discussed
in IRC it seems that the fact that the user must separately select
packages like gdal-mrsid may be sufficient to protect OSGeo from
license violation claims.  I am going to try seeking input from the
QGIS, and perhaps GRASS communities about their intent when applying
the GPL license to their software.  Beyond the strict legalities, I
am interested in accounting for the intent of developers of GPL
software.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rayg at daylongraphics.com  Mon Jan 31 12:28:02 2011
From: rayg at daylongraphics.com (Ray Gardener)
Date: Mon Jan 31 14:12:39 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
Message-ID: <4D46F122.6040800@daylongraphics.com>

I think Mr. Butler makes a good point.

Maybe just have folders in the source tree called "frmts/reciprocal" and 
"frmts/proprietary" and the same for any libs. That way it's in people's 
face all the time and impossible not to be conscious of what is licenced 
how. And easy to exclude such drivers, just skip building that folder's 
makefile. If I want total certainty, I can even delete those folders. 
And if someone makes a classification mistake, it'll be more obvious too 
("hey, driver XXX shouldn't be in that folder").


Ray Gardener
Daylon Graphics Ltd.
From mike at stamen.com  Mon Jan 31 14:32:54 2011
From: mike at stamen.com (Michal Migurski)
Date: Mon Jan 31 14:49:45 2011
Subject: [gdal-dev] "ERROR 1: tolerance condition error" when projecting to
	gnomonic
Message-ID: <9E1B59FD-423A-4EB6-825A-821C89302528@stamen.com>

Hello,

I'm running into some problems warping to gnomonic projection. I'm trying to warp a TIFF in azimuthal-equidistant projection (covering North America, including the north pole and centered on 46?N, 95?W) to gnomonic. These are the relevant details and coverage of the input TIFF:
	http://dpaste.com/hold/372063/

Here's what I'm trying:
	gdalwarp -t_srs "+proj=gnom +lat_0=0 +lon_0=0" -te -6378137 -6378137 6378137 6378137 -ts 512 512 NAPHY_r-latlon.tif NAPHY_r-gnom.tif

Here's what I'm seeing:
	ERROR 1: tolerance condition error
	ERROR 1: tolerance condition error
	...
	ERROR 1: tolerance condition error
	ERROR 1: Reprojection failed, err = -20, further errors will be supressed on the transform object. 

The output looks to be a black square. I've successfully reprojected this same input TIFF to both spherical mercator and latlon, so I tried converting to one of those first and then gnomonic second, but still got the same errors. For what it's worth, the geographic info for the projected all-black TIFF looks right:
	http://dpaste.com/hold/372080/

I found this from six years ago and tried adding the recommended -wo SOURCE_EXTRA=100 -wo SAMPLE_GRID=YES parameters to gdalwarp, but I'm still seeing the same tolerance condition errors:
	http://trac.osgeo.org/gdal/ticket/642

Any ideas?

-mike.

----------------------------------------------------------------
michal migurski- mike@stamen.com
                 415.558.1610



From warmerdam at pobox.com  Mon Jan 31 15:32:17 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 31 15:32:21 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D46F122.6040800@daylongraphics.com>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
	<4D46F122.6040800@daylongraphics.com>
Message-ID: <4D471C51.2030000@pobox.com>

On 11-01-31 12:28 PM, Ray Gardener wrote:
> I think Mr. Butler makes a good point.
>
> Maybe just have folders in the source tree called "frmts/reciprocal" and
> "frmts/proprietary" and the same for any libs. That way it's in people's face
> all the time and impossible not to be conscious of what is licenced how. And
> easy to exclude such drivers, just skip building that folder's makefile. If I
> want total certainty, I can even delete those folders. And if someone makes a
> classification mistake, it'll be more obvious too ("hey, driver XXX shouldn't
> be in that folder").

Ray,

That would be adequate for those who are building things from source and
wanting to distribute the resulting binaries under a single consistent
licensing policy.  However it does not help me for the OSGeo4W need.

OSGeo4W is a unified installer that can install a wide variety of OSGeo
project binaries for windows into one unified tree.  So, for instance if
you install QGIS, MapServer and GRASS which all use GDAL they will end up
using a common copy of GDAL.  Users also often want proprietary format
drivers for formats like MrSID and there is an optional package offered
for this.

In this situation MapServer and GDAL are under a non-reciprocal open
source licenses and there is no problem using them with proprietary drivers.
However, QGIS and GRASS are GPL and it is improper to distribute them with
proprietary drivers.  I am *hoping* to be able to deliver a solution that
lets users have proprietary drivers easily with MapServer or GDAL
commandline, while not letting them use these drivers with QGIS or GRASS
unless they make a deliberate decision to do so even though it abridges
the freedoms they would normally have with GPLed software.

In the RFC I have also tried to offer a way for proprietary software
to avoid loading GPLed drivers accidentally.  But as you note most
proprietary software distributors will just take care to avoid building
in any GPLed dependencies at compile time.  However, I do like to imagine
a time in which even proprietary software distributors might be able to
take advantage of common "system level" installations of GDAL in which
case greater care about licenses might be appropriate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rayg at daylongraphics.com  Mon Jan 31 18:48:39 2011
From: rayg at daylongraphics.com (Ray Gardener)
Date: Mon Jan 31 18:46:32 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D471C51.2030000@pobox.com>
References: <4D447C2B.3030002@pobox.com>
	<4D46BFFF.6050905@mapgears.com>	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>	<4D46F122.6040800@daylongraphics.com>
	<4D471C51.2030000@pobox.com>
Message-ID: <4D474A57.9020901@daylongraphics.com>

On 1/31/2011 12:32 PM, Frank Warmerdam wrote:
> That would be adequate for those who are building things from source
> and wanting to distribute the resulting binaries under a single
> consistent licensing policy. However it does not help me for the
> OSGeo4W need.
>
> OSGeo4W is a unified installer... [snip]


Well, I'm definitely not a lawyer, but it sounds to me that OSGeo4W is 
in violation. I mean, they take GDAL, combine it with GPL'd code, and 
expect you to help "bless the marriage".

Why not just let OSGeo4W do its own licence management, since it's the 
one that's creating the problem. It can embed a little table inside 
itself that says which drivers are under which licence. If you move that 
logic into GDAL itself, then you'll share responsibility if a ruling 
occurs against OSGeo4W. If you keep the logic outside, then you can 
honestly claim that any violation happened beyond your control, and that 
conflicting drivers were combined into a package against your stated 
policies. The moment you have that logic internalized, you explicitly 
authorize -- or at the very least facilitate -- third parties to combine 
conflicting code in a distributable. The fact that the real damage 
doesn't happen until runtime (that the app in question happens to be an 
installer) may be a distinction that offended parties won't care to 
make. I'd prefer any perceived wrongdoing by OSGeo4W to stay firmly on 
its side.

Stallman is very leery of any tricks to workaround GPL, and this 
"creative bundling using evil bits" will smell of that. To him, the mere 
mixture in a distribution will be damage enough. At the very least, I'd 
check with him first if you haven't already, and get whatever 
concessions are offered in writing.

Ray
From mariusjigmond at hotmail.com  Mon Jan 31 19:21:40 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Mon Jan 31 19:21:48 2011
Subject: [gdal-dev] JPEG compressed GeoTIFF ignores Nodata
In-Reply-To: <201101310007.25073.even.rouault@mines-paris.org>
References: <BLU0-SMTP173FE543D310C5FA5A3172B2E00@phx.gbl>
	<201101292225.59426.even.rouault@mines-paris.org>
	<BLU0-SMTP144080310963F596DB724DBB2E00@phx.gbl>
	<201101310007.25073.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP1755DCC34660133C022FFE6B2E50@phx.gbl>

Thanks for all the suggestions. The following website:
http://sites.google.com/site/bpederse/caliwms gave me an idea of how to
treat the JPEG artifacts.

Going back to our previous discussion, the OpenJPEG implementation of
JPEG2000 creates very clean (at the boundary of data/nodata) compressed
images when compared to JPEG. But, because it's a new format, I'll have
to wait until it's implemented in the jai-imageio-ext package.

-marius

> Le samedi 29 janvier 2011 22:40:20, Marius Jigmond a ?crit :
> > The link should work for another day or so (automatic server purge). I
> > can re-upload it if you don't get the chance to download it. Warning:
> > 1.2GB.
> > https://www.twdb.state.tx.us/filetxfr/emaillinkdownload.aspx?id=&FileTransf
> > erID=289562464
> > 
> 
> ok, I've reproduced the bug and fixed it in 
> http://trac.osgeo.org/gdal/ticket/3938
> 
> This was one of the most "interesting" bug since months I had to track down ! 
> Thanks for reporting.
> 
> Even
> 


From matt.wilkie at gov.yk.ca  Mon Jan 31 19:28:36 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Mon Jan 31 19:28:42 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D474A57.9020901@daylongraphics.com>
References: <4D447C2B.3030002@pobox.com>	<4D46BFFF.6050905@mapgears.com>	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>	<4D46F122.6040800@daylongraphics.com>	<4D471C51.2030000@pobox.com>
	<4D474A57.9020901@daylongraphics.com>
Message-ID: <4D4753B4.3030606@gov.yk.ca>

> then you can
> honestly claim that any violation happened beyond your control

...except that Frank is the principle organizer/maintainer behind 
OSGeo4W as well as GDAL.

Not that this necessarily contravenes your main point, that since the 
gray area is in o4w and not gdal that's where the license 
agreeing/denying logic should take place.

I do hope this policy or something like it come to be, whether in gdal 
or osgeo4w. I work in both worlds and a more easeful coexistence, 
without obscuring or hiding the legal differences and responsibilities, 
is welcome. Personally I don't see osgeo4w's bundling or the current RFC 
under discussion to be much different from enabling Ubuntu's universe 
and restricted-driver repositories.


matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From ricardo.garcia.silva at gmail.com  Mon Jan 31 20:27:36 2011
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Mon Jan 31 20:27:58 2011
Subject: [gdal-dev] creating .VRT files with the python bindings
Message-ID: <AANLkTimTby8eUfYt0xNpWh44U0HrtW5_1P+KfyBU5kZ8@mail.gmail.com>

Hello list
I am trying to create a .VRT file to mosaic a bunch of HDF5 files. It
is starting to work, except for the fact that I can't seem to set the
relativeToVRT attribute of the SourceFilename tag to "0".

I've been adapting the online vrt tutorial[1] from C++ to Python. The
tutorial says that relativeToVRT will default to "0", but I'm getting
the exact opposite. It is defaulting to "1", and even if I try to set
it to "0" explicitly when using the SetMetadataItem method, it will
still be saved as a "1". I have included an excerpt of the code at the
end of this message. I'll post the rest of it if it is relevant.

After saving the file, I can open a text editor and replace all the
"1" with "0" and this fixes it, allowing me to get the desired
visualization (on QGIS).

Am I doing something wrong here? Or is this possibly a bug? I'm using
gdal 1.7.3, as available on the ubuntugis-unstable repository.


Another question: is it possible to use derived bands via python
bindings? I guess I'll have to write a pixel function and somehow
register it with gdal...

[1] - http://www.gdal.org/gdal_vrttut.html

[2] - python code follows:


def get_xml_source(fileName, dataSet, xSize, ySize, dType, blockX,
                   blockY, sXOff, sYOff, sXSize, sYSize, dXOff,
                   dYOff, dXSize, dYSize, relToVRT=0, band=1):
    template = """
    <SimpleSource>
    <SourceFilename relativeToVRT='%i'>HDF5:%s://%s</SourceFilename>
    <SourceBand>%i</SourceBand>
    <SourceProperties RasterXSize='%i' RasterYSize='%i' DataType='%s'
BlockXSize='%i' BlockYSize='%i' />
    <SrcRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
    <DstRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
    </SimpleSource>
    """
    return template % (relToVRT, fileName, dataSet, band, xSize, ySize,
                       dType, blockX, blockY, sXOff, sYOff, sXSize, sYSize,
                       dXOff, dYOff, dXSize, dYSize)

.... somewhere down the code...

xmlSource = get_xml_source(lit, dataSet, xResolution, yResolution,
                                   "Int16", blockXSize, blockYSize, 0, 0,
                                   xResolution, yResolution, xOff, yOff,
                                   xResolution, yResolution)
outBand.SetMetadataItem("teste", xmlSource, "new_vrt_sources")


-- 
___________________________ ___ __
Ricardo Garcia Silva
From mariusjigmond at hotmail.com  Mon Jan 31 21:42:17 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Mon Jan 31 21:42:21 2011
Subject: [gdal-dev] Gdalwarp -crop_to_cutline results in shifted raster
Message-ID: <BLU0-SMTP108BB67C40BEC3C61F3E311B2E50@phx.gbl>

Hi Everyone,

I am using the -crop_to_cutline option of gdalwarp but the resulting
raster is slightly shifted. Both cutline shapefile and raster are using
the same projection. On the sample raster dataset (pixel=28.5m) the
shift is about 5m to the east and 3.5m to the north. Pixel values remain
the same (so resampling doesn't take place, as expected).

I should add that not adding -crop_to_cutline results in no shift.
Commands I ran:
(1) gdalwarp -cutline mask.shp -crop_to_cutline sample.tif cropped.tif
result is shifted

(2) gdalwarp -cutline mask.shp sample.tif out.tif
result is not shifted

A workaround would be using gdal_rasterize on after option (2) above.

-marius

From rayg at daylongraphics.com  Mon Jan 31 23:59:25 2011
From: rayg at daylongraphics.com (Ray Gardener)
Date: Mon Jan 31 23:57:17 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D4753B4.3030606@gov.yk.ca>
References: <4D447C2B.3030002@pobox.com>	<4D46BFFF.6050905@mapgears.com>	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>	<4D46F122.6040800@daylongraphics.com>	<4D471C51.2030000@pobox.com>	<4D474A57.9020901@daylongraphics.com>
	<4D4753B4.3030606@gov.yk.ca>
Message-ID: <4D47932D.8020904@daylongraphics.com>

I should ask, is it okay for commercial apps to include GPL'd drivers 
currently? What would happen if my app included one? Do I have to wait 
for it to be under LGPL?

I don't mind at all sharing any changes I may make to such drivers, but 
if I can't even include the drivers, that seems excessive.

Ray
