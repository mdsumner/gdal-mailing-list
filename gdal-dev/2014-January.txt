From arno at agerrius.nl  Sat Jan  4 08:12:36 2014
From: arno at agerrius.nl (agerrius)
Date: Sat, 4 Jan 2014 08:12:36 -0800 (PST)
Subject: [gdal-dev] SetAttributeFilter and OSM
Message-ID: <1388851956034-5096352.post@n6.nabble.com>

Hello,

I'm using the GDAL/OGR libraries in a C# application and I have some trouble
with the SetAttributeFilter function on an OGR layer.

The filtering works fine when I load a SHP file, but when I load an OSM file
it doesn't work. I still get all the features on the layer. Is this a known
limitation of the OSM reader or did I make a mistake somehow?

Thanks,

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/SetAttributeFilter-and-OSM-tp5096352.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sat Jan  4 09:14:12 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 04 Jan 2014 18:14:12 +0100
Subject: [gdal-dev] SetAttributeFilter and OSM
In-Reply-To: <1388851956034-5096352.post@n6.nabble.com>
References: <1388851956034-5096352.post@n6.nabble.com>
Message-ID: <1388855652.52c84164a5b92@imp.free.fr>

Arno,

Do you replicate that with ogrinfo with the -where option ?
Could you show us how you do this with a code snippet and the filter you've used
?

Even

> Hello,
>
> I'm using the GDAL/OGR libraries in a C# application and I have some trouble
> with the SetAttributeFilter function on an OGR layer.
>
> The filtering works fine when I load a SHP file, but when I load an OSM file
> it doesn't work. I still get all the features on the layer. Is this a known
> limitation of the OSM reader or did I make a mistake somehow?
>
> Thanks,
>
> Arno
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/SetAttributeFilter-and-OSM-tp5096352.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From arno at agerrius.nl  Sun Jan  5 00:29:13 2014
From: arno at agerrius.nl (agerrius)
Date: Sun, 5 Jan 2014 00:29:13 -0800 (PST)
Subject: [gdal-dev] SetAttributeFilter and OSM
In-Reply-To: <1388855652.52c84164a5b92@imp.free.fr>
References: <1388851956034-5096352.post@n6.nabble.com>
	<1388855652.52c84164a5b92@imp.free.fr>
Message-ID: <1388910553495-5096413.post@n6.nabble.com>

Even,

Thanks for the quick answer.

I did some more testing. When using ogr2ogr it works fine indeed. When I use
the ExecuteSQL it also works fine. And it seems to only fail the second time
I call SetAttributeFilter.

Here is some test code I use:

using System;
using System.Collections.Generic;
using System.Text;
using OSGeo.OGR;
using OSGeo.GDAL;
using ASToFra.Utils;

namespace OGR_test
{
    class Program
    {
        static void Main(string[] args)
        {
            Ogr.RegisterAll();

            DataSource ds =
Ogr.Open(@"c:\flightsim\work\agn\schier\schier.osm", 0);

            {
                Console.WriteLine("all point");
                Layer lay = ds.GetLayerByName("points");
                lay.ResetReading();
                Feature feat = lay.GetNextFeature();
                int count = 0;
                while (feat != null)
                {
                    count++;
                    feat = lay.GetNextFeature();
                }
                Console.WriteLine(count);
            }

            {
                Console.WriteLine("all line");
                Layer lay = ds.GetLayerByName("lines");
                lay.ResetReading();
                Feature feat = lay.GetNextFeature();
                int count = 0;
                while (feat != null)
                {
                    count++;
                    feat = lay.GetNextFeature();
                }
                Console.WriteLine(count);
            }

            {
                Console.WriteLine("sql point");
                Layer lay = ds.ExecuteSQL("SELECT * FROM points WHERE
highway IS NOT NULL", null, null);
                lay.ResetReading();
                Feature feat = lay.GetNextFeature();
                int count = 0;
                while (feat != null)
                {
                    count++;
                    feat = lay.GetNextFeature();
                }
                Console.WriteLine(count);
                ds.ReleaseResultSet(lay);
            }

            {
                Console.WriteLine("sql line");
                Layer lay = ds.ExecuteSQL("SELECT * FROM lines WHERE highway
IS NOT NULL", null, null);
                lay.ResetReading();
                Feature feat = lay.GetNextFeature();
                int count = 0;
                while (feat != null)
                {
                    count++;
                    feat = lay.GetNextFeature();
                }
                Console.WriteLine(count);
                ds.ReleaseResultSet(lay);
            }

            Console.WriteLine("loop");
            for (int n = 0; n < 4; n++)
            {
                for (int i = 0; i < 2; i++)
                {
                    Layer lay = ds.GetLayerByIndex(i);
                    lay.SetAttributeFilter("highway IS NOT NULL");
                    lay.ResetReading();
                    Feature feat = lay.GetNextFeature();
                    int count = 0;
                    while (feat != null)
                    {
                        count++;
                        feat = lay.GetNextFeature();
                    }
                    Console.WriteLine(count);
                }
            }
        }
    }
}

When I run the code this is the output I get:

all point
137
all line
341
sql point
41
sql line
321
loop
41
341
41
321
41
321
41
321

As you can see the second time I set an attribute filter in the loop it
returns all 341 features on the layer, not only the 321 that match the
filter. In all other cases it seems to work fine.

Did I go something wrong with in my code? Do I need to call some other
commands maybe before I apply the SetAttributeFilter?

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/SetAttributeFilter-and-OSM-tp5096352p5096413.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sun Jan  5 01:33:19 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 5 Jan 2014 10:33:19 +0100
Subject: [gdal-dev] SetAttributeFilter and OSM
In-Reply-To: <1388910553495-5096413.post@n6.nabble.com>
References: <1388851956034-5096352.post@n6.nabble.com>
	<1388855652.52c84164a5b92@imp.free.fr>
	<1388910553495-5096413.post@n6.nabble.com>
Message-ID: <201401051033.19518.even.rouault@mines-paris.org>

> As you can see the second time I set an attribute filter in the loop it
> returns all 341 features on the layer, not only the 321 that match the
> filter. In all other cases it seems to work fine.
> 
> Did I go something wrong with in my code? Do I need to call some other
> commands maybe before I apply the SetAttributeFilter?

Arno,

I've managed to reproduce your issue and I've understood what happens. This is 
due to a performance optimization done in the OSM driver to avoid useless 
ResetReading() to discard already cached features. I've pushed into GDAL trunk 
a fix for that issue.

There are 2 workarounds :
* the recommanded one is to set attribute filters on all needed layers before 
starting iterating over any of them. Indeed, when you read a OSM file it will 
collect features for all layers, so while collecting points, it might also 
collect lines and apply the attribute filter that was currently set on that 
layer. If you apply another one afterwards, it is too late.
* a simple one, but potentially less efficient in terms of performance : just 
insert a call to lay.GetNextFeature() between lay.SetAttributeFilter("highway 
IS NOT NULL") and lay.ResetReading(). This will cause the ResetReading() to 
effectively ResetReading().

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From arno at agerrius.nl  Sun Jan  5 02:28:35 2014
From: arno at agerrius.nl (agerrius)
Date: Sun, 5 Jan 2014 02:28:35 -0800 (PST)
Subject: [gdal-dev] SetAttributeFilter and OSM
In-Reply-To: <201401051033.19518.even.rouault@mines-paris.org>
References: <1388851956034-5096352.post@n6.nabble.com>
	<1388855652.52c84164a5b92@imp.free.fr>
	<1388910553495-5096413.post@n6.nabble.com>
	<201401051033.19518.even.rouault@mines-paris.org>
Message-ID: <1388917715488-5096417.post@n6.nabble.com>

Thanks for checking, always good to understand why things happen as they do.

One of the workarounds will do for me, so I'll use them in my application.

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/SetAttributeFilter-and-OSM-tp5096352p5096417.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schwehr at gmail.com  Mon Jan  6 10:35:47 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 6 Jan 2014 10:35:47 -0800
Subject: [gdal-dev] What is readlink used for?
Message-ID: <CACmBxytHMD6SrBh4Yhg+uYu0onNDQg5i5X8=QgOs2nxe3owqYQ@mail.gmail.com>

Hi all,

I ran into trouble with readlink as can be seen in
http://trac.osgeo.org/gdal/ticket/5340.  I'm working with a system where
the run directory is all symbolic links.  So if I have nonsquare.vrt
refering to "./small.raw", readlink of nonsquare.vrt will end up being in a
totally different directory than the small.raw file.

So... That begs the question of the purpose of dereferencing symbolic links
using readlink (e.g.
http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/vrt/vrtdataset.cpp#L687).
 Is this done just for performance on filesystems where symbolic links
might be a performance hit (e.g. nfs file systems over slow networks and an
OS that does not do a good job caching)?  Or is there something else
important that I'm missing?

I see 4 places where readlink is used:

./ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp:        int nBytes =
readlink(pszName, szPointerFilename, sizeof(szPointerFilename));
./gcore/gdalopeninfo.cpp:        int nBytes = readlink(pszFilename,
szPointerFilename, sizeof(szPointerFilename));
./port/cpl_getexecpath.cpp:    nResultLen = readlink( osExeLink,
pszPathBuf, nMaxLength );
./frmts/vrt/vrtdataset.cpp:            int bufferSize =
readlink(currentVrtFilename, filenameBuffer, sizeof(filenameBuffer));

ogrsfdriverregistar.cpp looks like a possible issue.

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp#L250

I see that sort of works...

ogrinfo my_remote_poly.shp
ERROR 4: Unable to open /vsicurl/
http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp or /vsicurl/
http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.SHP.
Had to open data source read-only.
INFO: Open of `my_remote_poly.shp'
      using driver `ESRI Shapefile' successful.
INFO: Internal data source name `/vsicurl/
http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp'
      different from user name `my_remote_poly.shp'.
1: poly (3D Polygon)

I'm thinking that I should just disable readlink entirely.  Alternatively,
hhould there be a flag that controls readlink just for working with vrt's
or a runtime ConfigSetting that could turn on/off readlink?

Any thoughts would be appreciated!

Thanks,
-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140106/f9302298/attachment.html>

From even.rouault at mines-paris.org  Mon Jan  6 10:56:15 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 6 Jan 2014 19:56:15 +0100
Subject: [gdal-dev] What is readlink used for?
In-Reply-To: <CACmBxytHMD6SrBh4Yhg+uYu0onNDQg5i5X8=QgOs2nxe3owqYQ@mail.gmail.com>
References: <CACmBxytHMD6SrBh4Yhg+uYu0onNDQg5i5X8=QgOs2nxe3owqYQ@mail.gmail.com>
Message-ID: <201401061956.15354.even.rouault@mines-paris.org>

Hi Kurt,

> 
> I ran into trouble with readlink as can be seen in
> http://trac.osgeo.org/gdal/ticket/5340.  I'm working with a system where
> the run directory is all symbolic links.  So if I have nonsquare.vrt
> refering to "./small.raw", readlink of nonsquare.vrt will end up being in a
> totally different directory than the small.raw file.
> 
> So... That begs the question of the purpose of dereferencing symbolic links
> using readlink (e.g.
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/vrt/vrtdataset.cpp#L687
> ). Is this done just for performance on filesystems where symbolic links
> might be a performance hit (e.g. nfs file systems over slow networks and
> an OS that does not do a good job caching)?  Or is there something else
> important that I'm missing?

This was added in http://trac.osgeo.org/gdal/changeset/25682 . The autotests 
added in that commit show the use cases that are solved. They seem to be 
rather reasonable.

I'm having trouble to understand your use case that doesn't work. Perhaps you 
could explain it in a more "graphical" way ( "ls -al" in the relevant 
directories will do )

> 
> I see 4 places where readlink is used:
> 
> ./ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp:        int nBytes =
> readlink(pszName, szPointerFilename, sizeof(szPointerFilename));
> ./gcore/gdalopeninfo.cpp:        int nBytes = readlink(pszFilename,
> szPointerFilename, sizeof(szPointerFilename));
> ./port/cpl_getexecpath.cpp:    nResultLen = readlink( osExeLink,
> pszPathBuf, nMaxLength );
> ./frmts/vrt/vrtdataset.cpp:            int bufferSize =
> readlink(currentVrtFilename, filenameBuffer, sizeof(filenameBuffer));
> 
> ogrsfdriverregistar.cpp looks like a possible issue.
> 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrsf
> driverregistrar.cpp#L250
> 
> I see that sort of works...
> 
> ogrinfo my_remote_poly.shp
> ERROR 4: Unable to open /vsicurl/
> http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp or /vsicurl/
> http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.SHP.
> Had to open data source read-only.
> INFO: Open of `my_remote_poly.shp'
>       using driver `ESRI Shapefile' successful.
> INFO: Internal data source name `/vsicurl/
> http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp'
>       different from user name `my_remote_poly.shp'.
> 1: poly (3D Polygon)

Yes this is convenient to be able to "ln -s /vsicurl/http://somethnig" to 
something.

> 
> I'm thinking that I should just disable readlink entirely.  Alternatively,
> hhould there be a flag that controls readlink just for working with vrt's
> or a runtime ConfigSetting that could turn on/off readlink?

No there's no such runtime configuration option.

> 
> Any thoughts would be appreciated!
> 
> Thanks,
> -kurt

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schwehr at gmail.com  Mon Jan  6 11:25:08 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 6 Jan 2014 11:25:08 -0800
Subject: [gdal-dev] What is readlink used for?
In-Reply-To: <201401061956.15354.even.rouault@mines-paris.org>
References: <CACmBxytHMD6SrBh4Yhg+uYu0onNDQg5i5X8=QgOs2nxe3owqYQ@mail.gmail.com>
	<201401061956.15354.even.rouault@mines-paris.org>
Message-ID: <CACmBxytQbxzxCkCwV+cemTCMn6Cnkf=DhtXOBNhO=tswV4hbXA@mail.gmail.com>

Thanks for pointing me right at the vrt readlink changeset.

This re-arrangement of files is done without me or gdal doing anything.

# readonly filesystem with data used by tests.  Note that the checksums are
different directories
/data/checksum1/a.vrt
/data/checksum2/small.raw

# each test gets it's own working area
/ramdrive/test1234/a.vrt -> /data/checksum1/a.vrt
/ramdrive/test1234/small.raw -> /data/checksum2/small.raw

The test is then given /ramdrive/test1234/a.vrt

As for the config options, I was trying to think out loud if a config
option needed to be added to allow switching of readlink behavior in
vrtdataset.cpp.


On Mon, Jan 6, 2014 at 10:56 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Hi Kurt,
>
> >
> > I ran into trouble with readlink as can be seen in
> > http://trac.osgeo.org/gdal/ticket/5340.  I'm working with a system where
> > the run directory is all symbolic links.  So if I have nonsquare.vrt
> > refering to "./small.raw", readlink of nonsquare.vrt will end up being
> in a
> > totally different directory than the small.raw file.
> >
> > So... That begs the question of the purpose of dereferencing symbolic
> links
> > using readlink (e.g.
> >
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/vrt/vrtdataset.cpp#L687
> > ). Is this done just for performance on filesystems where symbolic links
> > might be a performance hit (e.g. nfs file systems over slow networks and
> > an OS that does not do a good job caching)?  Or is there something else
> > important that I'm missing?
>
> This was added in http://trac.osgeo.org/gdal/changeset/25682 . The
> autotests
> added in that commit show the use cases that are solved. They seem to be
> rather reasonable.
>
> I'm having trouble to understand your use case that doesn't work. Perhaps
> you
> could explain it in a more "graphical" way ( "ls -al" in the relevant
> directories will do )
>
> >
> > I see 4 places where readlink is used:
> >
> > ./ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp:        int nBytes =
> > readlink(pszName, szPointerFilename, sizeof(szPointerFilename));
> > ./gcore/gdalopeninfo.cpp:        int nBytes = readlink(pszFilename,
> > szPointerFilename, sizeof(szPointerFilename));
> > ./port/cpl_getexecpath.cpp:    nResultLen = readlink( osExeLink,
> > pszPathBuf, nMaxLength );
> > ./frmts/vrt/vrtdataset.cpp:            int bufferSize =
> > readlink(currentVrtFilename, filenameBuffer, sizeof(filenameBuffer));
> >
> > ogrsfdriverregistar.cpp looks like a possible issue.
> >
> >
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrsf
> > driverregistrar.cpp#L250
> >
> > I see that sort of works...
> >
> > ogrinfo my_remote_poly.shp
> > ERROR 4: Unable to open /vsicurl/
> > http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp or /vsicurl/
> > http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.SHP.
> > Had to open data source read-only.
> > INFO: Open of `my_remote_poly.shp'
> >       using driver `ESRI Shapefile' successful.
> > INFO: Internal data source name `/vsicurl/
> > http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp'
> >       different from user name `my_remote_poly.shp'.
> > 1: poly (3D Polygon)
>
> Yes this is convenient to be able to "ln -s /vsicurl/http://somethnig" to
> something.
>
> >
> > I'm thinking that I should just disable readlink entirely.
>  Alternatively,
> > hhould there be a flag that controls readlink just for working with vrt's
> > or a runtime ConfigSetting that could turn on/off readlink?
>
> No there's no such runtime configuration option.
>
> >
> > Any thoughts would be appreciated!
> >
> > Thanks,
> > -kurt
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140106/ffb9a2f3/attachment.html>

From pekka.sarkola at gispo.fi  Tue Jan  7 11:51:32 2014
From: pekka.sarkola at gispo.fi (Pekka Sarkola)
Date: Tue, 7 Jan 2014 21:51:32 +0200
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
Message-ID: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>

Hi!

 

Maybe newbie problem. I download GeoPDF file from
http://lib.utexas.edu/maps/topo/nicaragua/ and try to get information with
gdalinfo and translate with gdal_translate.

 

Both command response: "ERROR 4: `argelia-nicaragua-50k-3154iii-1981.pdf'
not recognised as a supported file format."

 

GDAL version 1.10.1, both on Windows and Ubuntu. gdalinfo -formats recognize
PDF-format as supported.

 

Is this on my installation or somewhere in gdal?

 

Rgs,

 

Pekka

--

Pekka Sarkola

Gispo Oy

 <mailto:pekka.sarkola at gispo.fi> pekka.sarkola at gispo.fi   - GSM +358 40 725
2042

 <http://www.gispo.fi> www.gispo.fi -  <http://www.paikkatieto.com>
www.paikkatieto.com 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140107/babb8c1d/attachment.html>

From ari.jolma at gmail.com  Tue Jan  7 12:43:46 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 07 Jan 2014 22:43:46 +0200
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
In-Reply-To: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
Message-ID: <52CC6702.8060107@gmail.com>

On 01/07/2014 09:51 PM, Pekka Sarkola wrote:
>
> Hi!
>
> Maybe newbie problem. I download GeoPDF file from 
> http://lib.utexas.edu/maps/topo/nicaragua/ and try to get information 
> with gdalinfo and translate with gdal_translate.
>
> Both command response: "ERROR 4: 
> `argelia-nicaragua-50k-3154iii-1981.pdf' not recognised as a supported 
> file format."
>
> GDAL version 1.10.1, both on Windows and Ubuntu. gdalinfo --formats 
> recognize PDF-format as supported.
>
> Is this on my installation or somewhere in gdal?
>

Pekka,

Are you sure that those are GeoPDF's? I didn't succeed either. In 
addition both links to GeoPDF examples on page

http://www.gdal.org/frmt_pdf.html

fail.

Cheers,

Ari

> Rgs,
>
> Pekka
>
> --
>
> Pekka Sarkola
>
> Gispo Oy
>
> pekka.sarkola at gispo.fi <mailto:pekka.sarkola at gispo.fi>   - GSM +358 
> 40 725 2042
>
> www.gispo.fi <http://www.gispo.fi> -- www.paikkatieto.com 
> <http://www.paikkatieto.com>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140107/ed644d77/attachment.html>

From even.rouault at mines-paris.org  Tue Jan  7 13:02:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 7 Jan 2014 22:02:24 +0100
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
In-Reply-To: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
Message-ID: <201401072202.24891.even.rouault@mines-paris.org>

Le mardi 07 janvier 2014 20:51:32, Pekka Sarkola a ?crit :
> Hi!
> 
> 
> 
> Maybe newbie problem. I download GeoPDF file from
> http://lib.utexas.edu/maps/topo/nicaragua/ and try to get information with
> gdalinfo and translate with gdal_translate.
> 
> 
> 
> Both command response: "ERROR 4: `argelia-nicaragua-50k-3154iii-1981.pdf'
> not recognised as a supported file format."
> 
> 
> 
> GDAL version 1.10.1, both on Windows and Ubuntu. gdalinfo -formats
> recognize PDF-format as supported.
> 
> 
> 
> Is this on my installation or somewhere in gdal?

Not exactly your installation, but the build you've picked up. I've verified 
this is a valid geospatial PDF file recognized by the GDAL PDF driver.
I assume your GDAL build has only write support for geospatial PDF (which 
doesn't require any third-party library), but not read support that requires 
linking to a third-party library, like Poppler or Podofo. Unfortunately 
gdalinfo --formats can only report read/write support even when it's write-
only.

> 
> 
> 
> Rgs,
> 
> 
> 
> Pekka
> 
> --
> 
> Pekka Sarkola
> 
> Gispo Oy
> 
>  <mailto:pekka.sarkola at gispo.fi> pekka.sarkola at gispo.fi   - GSM +358 40 725
> 2042
> 
>  <http://www.gispo.fi> www.gispo.fi -  <http://www.paikkatieto.com>
> www.paikkatieto.com

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Tue Jan  7 13:11:56 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 7 Jan 2014 21:11:56 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Convert_GeoPDF_with_gdal=5Ftranslate?=
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
	<52CC6702.8060107@gmail.com>
Message-ID: <loom.20140107T215650-626@post.gmane.org>

Ari Jolma <ari.jolma <at> gmail.com> writes:


>     Pekka,
>     Are you sure that those are GeoPDF's? I didn't succeed either. In
>     addition both links to GeoPDF examples on
pagehttp://www.gdal.org/frmt_pdf.html
>     fail.


Hi,

No trouble at all for me with Windows and GDAL-dev from gisinternals. And if
you play with GeoPDF it is good to have GeoPDF toolbar add-on from TerraGo
installed on your Adobe Reader as a reference software ;)

Well, I know that you guys don't have Windows computers but you can always
visit me and I will show you one.

C:\Temp>gdalinfo cerro_la_sirena-nicaragua-50k-3255iii
-1966.pdf
Driver: PDF/Geospatial PDF
Files: cerro_la_sirena-nicaragua-50k-3255iii-1966.pdf
Size is 4485, 3390
Coordinate System is:
PROJCS["UTM Zone 16, Northern Hemisphere",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.978698213898,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-87],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  714818.8797330001, 8.476243200000001, 0.14496576
  1458508.5010452, 0.1394904, -8.463528479999999
GCP Projection =
PROJCS["UTM Zone 16, Northern Hemisphere",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.978698213898,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-87],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GCP[  0]: Id=1, Info=
          (208.59375,2438.54176875) -> (716925.359302,1437898.544765,0)
GCP[  1]: Id=2, Info=
          (227.083333333333,259.895935416666) -> (716779.589226,1456338.780394,0
)
GCP[  2]: Id=3, Info=
          (3425,287.76051875) -> (743888.913193,1456567.911059,0)
GCP[  3]: Id=4, Info=
          (3408.33333333333,2466.40635208333) -> (744052.946554,1438124.977761,0
)
GCP[  4]: Id=5, Info=
          (1283.59375,1359.63551875) -> (725891.75939,1447191.579869,0)
GCP[  5]: Id=6, Info=
          (2350.26041666667,1369.01051875) -> (734931.248351,1447267.507212,0)
Metadata:
  AUTHOR=NGA
  CREATION_DATE=D:20070912082552-04'00'
  KEYWORDS=001
  NEATLINE=POLYGON ((716938.34429679858 1437894.4857479648,716928.5044922987 143
9113.5036389648,716776.80358879862 1456349.2838632148,718896.24190379865 1456362
.1160244648,743896.06732229865 1456555.2670583399,743906.63774229866 1455938.134
7733398,744068.56930229871 1438105.0586589649,716938.34429679858 1437894.4857479
648))
  TITLE=Map Edition
Corner Coordinates:
Upper Left  (  714818.880, 1458508.501) ( 85d 1' 4.53"W, 13d11'11.10"N)
Lower Left  (  715310.314, 1429817.139) ( 85d 0'55.67"W, 12d55'37.47"N)
Upper Right (  752834.830, 1459134.115) ( 84d40' 2.27"W, 13d11'20.82"N)
Lower Right (  753326.264, 1430442.754) ( 84d39'54.73"W, 12d55'47.39"N)
Center      (  734072.572, 1444475.627) ( 84d50'29.28"W, 13d 3'29.41"N)
Band 1 Block=4485x1 Type=Byte, ColorInterp=Red
Band 2 Block=4485x1 Type=Byte, ColorInterp=Green
Band 3 Block=4485x1 Type=Byte, ColorInterp=Blue

-Jukka Rahkonen-





From ari.jolma at gmail.com  Tue Jan  7 13:19:20 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 07 Jan 2014 23:19:20 +0200
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
In-Reply-To: <201401072202.24891.even.rouault@mines-paris.org>
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
	<201401072202.24891.even.rouault@mines-paris.org>
Message-ID: <52CC6F58.6090401@gmail.com>

On 01/07/2014 11:02 PM, Even Rouault wrote:
> Le mardi 07 janvier 2014 20:51:32, Pekka Sarkola a ?crit :
>> Hi!
>>
>>
>>
>> Maybe newbie problem. I download GeoPDF file from
>> http://lib.utexas.edu/maps/topo/nicaragua/ and try to get information with
>> gdalinfo and translate with gdal_translate.
>>
>>
>>
>> Both command response: "ERROR 4: `argelia-nicaragua-50k-3154iii-1981.pdf'
>> not recognised as a supported file format."
>>
>>
>>
>> GDAL version 1.10.1, both on Windows and Ubuntu. gdalinfo -formats
>> recognize PDF-format as supported.
>>
>>
>>
>> Is this on my installation or somewhere in gdal?
> Not exactly your installation, but the build you've picked up. I've verified
> this is a valid geospatial PDF file recognized by the GDAL PDF driver.
> I assume your GDAL build has only write support for geospatial PDF (which
> doesn't require any third-party library), but not read support that requires
> linking to a third-party library, like Poppler or Podofo. Unfortunately
> gdalinfo --formats can only report read/write support even when it's write-
> only.


I see this now - I don't have poppler nor podofo right now in this 
machine. The information (read and/or write - in my case only write) is 
in the meta data of the driver but it is not exposed well by gdalinfo. 
Is there any chance for improving gdalinfo in this respect?

Ari


>
>>
>>
>> Rgs,
>>
>>
>>
>> Pekka
>>
>> --
>>
>> Pekka Sarkola
>>
>> Gispo Oy
>>
>>   <mailto:pekka.sarkola at gispo.fi> pekka.sarkola at gispo.fi   - GSM +358 40 725
>> 2042
>>
>>   <http://www.gispo.fi> www.gispo.fi -  <http://www.paikkatieto.com>
>> www.paikkatieto.com


From apachemaven0 at gmail.com  Tue Jan  7 16:03:23 2014
From: apachemaven0 at gmail.com (maven apache)
Date: Wed, 8 Jan 2014 08:03:23 +0800
Subject: [gdal-dev] Ogr2ogr does not support file name with non-ASCII
	character
Message-ID: <CA+FxMdUEf7B5RCoAkUqwYBHzoc8ux+8RKHcqC8ynnc+p64t9jQ@mail.gmail.com>

Hi:

This is a cross post first post at
http://gis.stackexchange.com/questions/82142/ogr2ogr-does-not-support-file-name-with-non-ascii-character

Since I got no answer, then I think I may post it here, this is the
original question:

I tried to use the following script to convert shapefile to mif:

ogr2ogr -f "MapInfo File" D:\docs\arcgis_data\shp_mif\BOU.mif
D:\docs\arcgis_data\shp\BOU.shp

it works.

But I found that if the name of the shapefile has non-ASCII characters like
this:

D:\docs\arcgis_data\shp\??.shp

Then the covert will fail with message:

Unable to open datasource `D:\docs\arcgis_data\shp\??.shp' with the
following drivers
......

Any idea to fix it?

Looking for replay.


Yang

2014.1.8
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140108/771e5f51/attachment-0001.html>

From pekka.sarkola at gispo.fi  Tue Jan  7 21:41:49 2014
From: pekka.sarkola at gispo.fi (Pekka Sarkola)
Date: Wed, 8 Jan 2014 07:41:49 +0200
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
In-Reply-To: <201401072202.24891.even.rouault@mines-paris.org>
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
	<201401072202.24891.even.rouault@mines-paris.org>
Message-ID: <000601cf0c34$53b901e0$fb2b05a0$@gispo.fi>

Thanks Even!

And also Jukka and Ari. Jukka: Is there still Windows machines in Finland? Interesting, Land of Linux ;-) Well, even I have few.

Ok, I try GDAL versions with 3rd party librariries

I agree with Ari: gdalinfo should some how show that it has only write option. This maybe bigger change. Should I add this to feature request page?

Rgs,

Pekka

---   Pekka Sarkola  -  pekka.sarkola at gispo.fi  -  www.paikkatieto.com   ---

-----Alkuper?inen viesti-----
L?hett?j?: Even Rouault [mailto:even.rouault at mines-paris.org] 
L?hetetty: 7. tammikuuta 2014 23:02
Vastaanottaja: gdal-dev at lists.osgeo.org; Pekka.Sarkola at gispo.fi
Aihe: Re: [gdal-dev] Convert GeoPDF with gdal_translate

Le mardi 07 janvier 2014 20:51:32, Pekka Sarkola a ?crit :
> Hi!
> 
> 
> 
> Maybe newbie problem. I download GeoPDF file from 
> http://lib.utexas.edu/maps/topo/nicaragua/ and try to get information 
> with gdalinfo and translate with gdal_translate.
> 
> 
> 
> Both command response: "ERROR 4: `argelia-nicaragua-50k-3154iii-1981.pdf'
> not recognised as a supported file format."
> 
> 
> 
> GDAL version 1.10.1, both on Windows and Ubuntu. gdalinfo -formats 
> recognize PDF-format as supported.
> 
> 
> 
> Is this on my installation or somewhere in gdal?

Not exactly your installation, but the build you've picked up. I've verified this is a valid geospatial PDF file recognized by the GDAL PDF driver.
I assume your GDAL build has only write support for geospatial PDF (which doesn't require any third-party library), but not read support that requires linking to a third-party library, like Poppler or Podofo. Unfortunately gdalinfo --formats can only report read/write support even when it's write- only.

> 
> 
> 
> Rgs,
> 
> 
> 
> Pekka
> 
> --
> 
> Pekka Sarkola
> 
> Gispo Oy
> 
>  <mailto:pekka.sarkola at gispo.fi> pekka.sarkola at gispo.fi   - GSM +358 40 725
> 2042
> 
>  <http://www.gispo.fi> www.gispo.fi -  <http://www.paikkatieto.com> 
> www.paikkatieto.com

--
Geospatial professional services
http://even.rouault.free.fr/services.html


From robert at afrispatial.co.za  Wed Jan  8 00:36:42 2014
From: robert at afrispatial.co.za (Robert Moerman)
Date: Wed, 8 Jan 2014 10:36:42 +0200
Subject: [gdal-dev] Modifying gdal_retile.py to incorporate resume support
Message-ID: <CA+Ert6MfU+2yGRZRsH3OrGixTpLBJ=UN2SCtnhqVuxxjkji20g@mail.gmail.com>

Hello

I am trying to add resume functionality to gdal_retile.py. If, whilst
creating tiles, gdal_retile.py fails because of a bad base tile, I want to
be able to simply remove that bad base tile and restart gdal_retile.py to
generate the remaining possible tiles rather than starting from scratch.

I have managed to identify the tile and layer that caused the error. How
could I go about generating tiles in that layer after that tile i.e. how
could I use level 0 and immediately start producing tiles for level 3?

Any help would be greatly appreciated.

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140108/bafc9272/attachment.html>

From szekerest at gmail.com  Wed Jan  8 02:10:58 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 8 Jan 2014 11:10:58 +0100
Subject: [gdal-dev] Regarding to the memory management in the SWIG API
Message-ID: <CACALY+QM+dKPyPa-VrSQLbWHqtmOVaCwfNOQVG92M0ZVD15D5Q@mail.gmail.com>

Hi Devs,

Is that intentional that we don't call ReleaseResultset within the
destructor of the OGR Layer object? Actually the destructor is not even
generated (at least for the C# API) which seems to be an improper solution
and leads to memory leaks, definitely. However ReleaseResultset is exposed
in the API, but it's fairly dangerous to let the user decide whether to
call this method or not.

In my understanding the destructor of the Layer object should look
something like the destructor of the DataSource (but calling
ReleaseResultset instead of ReleaseDatasource). However modifying the code
this way, may lead to a crash for the existing code which call
ReleaseResultset directly.

Any opinion?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140108/c9525c4f/attachment.html>

From even.rouault at mines-paris.org  Wed Jan  8 02:27:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 8 Jan 2014 11:27:57 +0100
Subject: [gdal-dev] Regarding to the memory management in the SWIG API
In-Reply-To: <CACALY+QM+dKPyPa-VrSQLbWHqtmOVaCwfNOQVG92M0ZVD15D5Q@mail.gmail.com>
References: <CACALY+QM+dKPyPa-VrSQLbWHqtmOVaCwfNOQVG92M0ZVD15D5Q@mail.gmail.com>
Message-ID: <201401081127.57596.even.rouault@mines-paris.org>

Le mercredi 08 janvier 2014 11:10:58, Tamas Szekeres a ?crit :
> Hi Devs,
> 
> Is that intentional that we don't call ReleaseResultset within the
> destructor of the OGR Layer object?

The OGR Layer object has generally no pointer to the datasource from which it 
originates (well, at the swig level we could probably attach one), so you 
cannot call ReleaseResultSet

> Actually the destructor is not even
> generated (at least for the C# API)

That must be the case of all bindings, because the OGR Layer object has no 
destructor in its API. OGR C++ Layers obtained by OGRDataSource::GetLayer() 
are owned by the C++ OGRDataSource and destroyed by it.

> which seems to be an improper solution
> and leads to memory leaks, definitely. However ReleaseResultset is exposed
> in the API, but it's fairly dangerous to let the user decide whether to
> call this method or not.

Yes, that's not very popular in garbage collected languages to let the user 
deal with memory management...

> 
> In my understanding the destructor of the Layer object should look
> something like the destructor of the DataSource (but calling
> ReleaseResultset instead of ReleaseDatasource).

Actually you should distinguish how the Layer object has been created : if it 
comes from GetLayer() or ExecuteSQL()

> However modifying the code
> this way, may lead to a crash for the existing code which call
> ReleaseResultset directly.

Yes, that would cause breakage in all existing code. The alternative would be 
that the public SWIG ReleaseResultSet() becomes a no-op and the destructor of 
SWIG Layer object call OGR_DS_ReleaseResultSet() when appropriate.

> 
> Any opinion?
> 
> Best regards,
> 
> Tamas

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Jan  8 02:30:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 8 Jan 2014 11:30:32 +0100
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
In-Reply-To: <000601cf0c34$53b901e0$fb2b05a0$@gispo.fi>
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
	<201401072202.24891.even.rouault@mines-paris.org>
	<000601cf0c34$53b901e0$fb2b05a0$@gispo.fi>
Message-ID: <201401081130.32628.even.rouault@mines-paris.org>

Le mercredi 08 janvier 2014 06:41:49, Pekka Sarkola a ?crit :
> Thanks Even!
> 
> And also Jukka and Ari. Jukka: Is there still Windows machines in Finland?
> Interesting, Land of Linux ;-) Well, even I have few.
> 
> Ok, I try GDAL versions with 3rd party librariries
> 
> I agree with Ari: gdalinfo should some how show that it has only write
> option. This maybe bigger change. Should I add this to feature request
> page?

Well, I can imagine how that would be implemented - it would not be very 
complicated - but this is very low priority in my opinion. The PDF driver is 
the only one I can think of that can be configured in write-only mode.

> 
> Rgs,
> 
> Pekka
> 
> ---   Pekka Sarkola  -  pekka.sarkola at gispo.fi  -  www.paikkatieto.com  
> ---
> 
> -----Alkuper?inen viesti-----
> L?hett?j?: Even Rouault [mailto:even.rouault at mines-paris.org]
> L?hetetty: 7. tammikuuta 2014 23:02
> Vastaanottaja: gdal-dev at lists.osgeo.org; Pekka.Sarkola at gispo.fi
> Aihe: Re: [gdal-dev] Convert GeoPDF with gdal_translate
> 
> Le mardi 07 janvier 2014 20:51:32, Pekka Sarkola a ?crit :
> > Hi!
> > 
> > 
> > 
> > Maybe newbie problem. I download GeoPDF file from
> > http://lib.utexas.edu/maps/topo/nicaragua/ and try to get information
> > with gdalinfo and translate with gdal_translate.
> > 
> > 
> > 
> > Both command response: "ERROR 4: `argelia-nicaragua-50k-3154iii-1981.pdf'
> > not recognised as a supported file format."
> > 
> > 
> > 
> > GDAL version 1.10.1, both on Windows and Ubuntu. gdalinfo -formats
> > recognize PDF-format as supported.
> > 
> > 
> > 
> > Is this on my installation or somewhere in gdal?
> 
> Not exactly your installation, but the build you've picked up. I've
> verified this is a valid geospatial PDF file recognized by the GDAL PDF
> driver. I assume your GDAL build has only write support for geospatial PDF
> (which doesn't require any third-party library), but not read support that
> requires linking to a third-party library, like Poppler or Podofo.
> Unfortunately gdalinfo --formats can only report read/write support even
> when it's write- only.
> 
> > Rgs,
> > 
> > 
> > 
> > Pekka
> > 
> > --
> > 
> > Pekka Sarkola
> > 
> > Gispo Oy
> > 
> >  <mailto:pekka.sarkola at gispo.fi> pekka.sarkola at gispo.fi   - GSM +358 40
> >  725
> > 
> > 2042
> > 
> >  <http://www.gispo.fi> www.gispo.fi -  <http://www.paikkatieto.com>
> > 
> > www.paikkatieto.com
> 
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ari.jolma at gmail.com  Wed Jan  8 02:42:03 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 08 Jan 2014 12:42:03 +0200
Subject: [gdal-dev] Regarding to the memory management in the SWIG API
In-Reply-To: <201401081127.57596.even.rouault@mines-paris.org>
References: <CACALY+QM+dKPyPa-VrSQLbWHqtmOVaCwfNOQVG92M0ZVD15D5Q@mail.gmail.com>
	<201401081127.57596.even.rouault@mines-paris.org>
Message-ID: <52CD2B7B.1020203@gmail.com>

On 01/08/2014 12:27 PM, Even Rouault wrote:
> Le mercredi 08 janvier 2014 11:10:58, Tamas Szekeres a ?crit :
>> Hi Devs,
>>
>> Is that intentional that we don't call ReleaseResultset within the
>> destructor of the OGR Layer object?
> The OGR Layer object has generally no pointer to the datasource from which it
> originates (well, at the swig level we could probably attach one), so you
> cannot call ReleaseResultSet


In the Perl bindings a link between OGR datasource and layer objects is 
maintained and there is an explicit destructor for layer objects, which 
may implicitly destruct a datasource object if one is left dangling. 
Implicit because it is left for Perl to decide.

It's a good point that the ReleaseResultSet should be made a no-op and 
hide it into the layer destructor. I'll look into implementing it in the 
Perl bindings.

I assume it would be a good thing to implement this kind of machinery in 
the Swig bindings but it may be a complex task.

Ari


>
>> Actually the destructor is not even
>> generated (at least for the C# API)
> That must be the case of all bindings, because the OGR Layer object has no
> destructor in its API. OGR C++ Layers obtained by OGRDataSource::GetLayer()
> are owned by the C++ OGRDataSource and destroyed by it.
>
>> which seems to be an improper solution
>> and leads to memory leaks, definitely. However ReleaseResultset is exposed
>> in the API, but it's fairly dangerous to let the user decide whether to
>> call this method or not.
> Yes, that's not very popular in garbage collected languages to let the user
> deal with memory management...
>
>> In my understanding the destructor of the Layer object should look
>> something like the destructor of the DataSource (but calling
>> ReleaseResultset instead of ReleaseDatasource).
> Actually you should distinguish how the Layer object has been created : if it
> comes from GetLayer() or ExecuteSQL()
>
>> However modifying the code
>> this way, may lead to a crash for the existing code which call
>> ReleaseResultset directly.
> Yes, that would cause breakage in all existing code. The alternative would be
> that the public SWIG ReleaseResultSet() becomes a no-op and the destructor of
> SWIG Layer object call OGR_DS_ReleaseResultSet() when appropriate.
>
>> Any opinion?
>>
>> Best regards,
>>
>> Tamas


From ari.jolma at gmail.com  Wed Jan  8 03:57:25 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 08 Jan 2014 13:57:25 +0200
Subject: [gdal-dev] Convert GeoPDF with gdal_translate
In-Reply-To: <52CC6F58.6090401@gmail.com>
References: <000001cf0be1$dd3d1a30$97b74e90$@gispo.fi>
	<201401072202.24891.even.rouault@mines-paris.org>
	<52CC6F58.6090401@gmail.com>
Message-ID: <52CD3D25.6070903@gmail.com>

On 01/07/2014 11:19 PM, Ari Jolma wrote:
> On 01/07/2014 11:02 PM, Even Rouault wrote:
>> I assume your GDAL build has only write support for geospatial PDF 
>> (which
>> doesn't require any third-party library), but not read support that 
>> requires
>> linking to a third-party library, like Poppler or Podofo. Unfortunately
>> gdalinfo --formats can only report read/write support even when it's 
>> write-
>> only.
>
>
> I see this now - I don't have poppler nor podofo right now in this 
> machine. The information (read and/or write - in my case only write) 
> is in the meta data of the driver but it is not exposed well by gdalinfo.

Except that it is not there. gdal.h does not define GDAL_DCAP_READ, 
which should probably be put into the driver meta data as YES almost 
always except for the GDAL PDF driver without a reader.

I believe without this other software like gdalinfo have no way of 
knowing whether reading of a dataset is supported.

Regards,

Ari


From bishop.dev at gmail.com  Wed Jan  8 04:13:20 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 08 Jan 2014 16:13:20 +0400
Subject: [gdal-dev] Ogr2ogr does not support file name with non-ASCII
 character
In-Reply-To: <CA+FxMdUEf7B5RCoAkUqwYBHzoc8ux+8RKHcqC8ynnc+p64t9jQ@mail.gmail.com>
References: <CA+FxMdUEf7B5RCoAkUqwYBHzoc8ux+8RKHcqC8ynnc+p64t9jQ@mail.gmail.com>
Message-ID: <52CD40E0.8020102@gmail.com>

Hi,

The GDAL utilities expected all input paths in UTF-8 encoding. If you 
want to use system native encoding you have to set GDAL_FILENAME_IS_UTF8 
environment variable to NO.
http://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_FILENAME_IS_UTF8

Best regards,
     Dmitry

08.01.2014 4:03, maven apache ?????:
> Hi:
>
> This is a cross post first post at 
> http://gis.stackexchange.com/questions/82142/ogr2ogr-does-not-support-file-name-with-non-ascii-character
>
> Since I got no answer, then I think I may post it here, this is the 
> original question:
>
> I tried to use the following script to convert shapefile to mif:
>
> |ogr2ogr -f "MapInfo File" D:\docs\arcgis_data\shp_mif\BOU.mif D:\docs\arcgis_data\shp\BOU.shp
> |
>
> it works.
>
> But I found that if the name of the shapefile has non-ASCII characters 
> like this:
>
> |D:\docs\arcgis_data\shp\??.shp
> |
>
> Then the covert will fail with message:
>
> |Unable to open datasource `D:\docs\arcgis_data\shp\??.shp' with the following drivers
> ......
> |
>
> Any idea to fix it?
>
> Looking for replay.
>
>
> Yang
>
> 2014.1.8
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140108/13dee77a/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Jan  8 05:14:55 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 8 Jan 2014 14:14:55 +0100
Subject: [gdal-dev] Update on RFC 45 - GDAL datasets and raster bands as
	virtual memory mappings
Message-ID: <201401081414.55388.even.rouault@mines-paris.org>

Hi,

I've investigated memory file mapping mechanisms and added that to the RFC.

You'll find the diffs w.r.t the version I submitted 3 few weeks ago :
* http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem?action=diff&version=6
* http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem?action=diff&version=7
* http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem?action=diff&version=8

The implementation patch has also been updated :
http://trac.osgeo.org/gdal/attachment/wiki/rfc45_virtualmem/virtualmem.patch

If this does not raise further discussions (which are welcome), I'll call for 
a vote soon.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jared.erickson at gmail.com  Wed Jan  8 12:23:50 2014
From: jared.erickson at gmail.com (Jared Erickson)
Date: Wed, 8 Jan 2014 12:23:50 -0800
Subject: [gdal-dev] GeoRSS and TestCapability("CreateField")
In-Reply-To: <CADYRdTjBQO8GacSZrnrj7h0dKvYic53s6X78_bhVeQwa4f7_Fg@mail.gmail.com>
References: <CADYRdTjBQO8GacSZrnrj7h0dKvYic53s6X78_bhVeQwa4f7_Fg@mail.gmail.com>
Message-ID: <CADYRdThqasoiSwNnQL3jOFBinRvNqgypXeX+1cKc1e3C98UvOA@mail.gmail.com>

Hi all,

I am working with the GeoTools developers on their OGR module in order to
add OGR support for GeoScript and I have a question about what exactly
Layer.TestCapability means.  In GeoTools (which is written in Java), when
creating a new Layer we call Layer.TestCapability("CreateField") to see if
we can create a new field.  For most drivers this works fine.  For GeoRSS
and GPX testing for CreateField returns false even though if we comment out
the TestCapability("CreateField") check creating the fields succeeds.  Here
is the GeoTools code in question:

https://github.com/geotools/geotools/blob/master/modules/unsupported/ogr/ogr-core/src/main/java/org/geotools/data/ogr/OGRDataStore.java#L188

Are we using TestCapability("CreateField") correctly?    Should it be used
when creating new layers or just when adding a field to an existing layer?

I did notice that the GeoRSS driver doesn't seem to explicitly support
CreateField (
https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/georss/ogrgeorsslayer.cpp#L2207)
it just returns false.

Here is a small Python script that illustrates my question.

from osgeo import ogr
import os

if os.path.exists("atom.xml"):
    os.remove("atom.xml")

ds = ogr.GetDriverByName("GeoRSS").CreateDataSource("atom.xml",
options=["FORMAT=ATOM"])
layer = ds.CreateLayer("georss")
for cap in ["CreateField","DeleteField"]:
    print "%s = %s" % (cap, layer.TestCapability(cap))

data = [
        {"x": -122.275147, "y": 47.109372, "title": "point", "id": "123"}
]

layer.CreateField(ogr.FieldDefn("id", ogr.OFTString))
layer.CreateField(ogr.FieldDefn("title", ogr.OFTString))

feature = ogr.Feature(layer.GetLayerDefn())
feature.SetField("title", data[0]["title"])
feature.SetField("id", data[0]["id"])
feature.SetGeometryDirectly(ogr.CreateGeometryFromWkt("POINT (%d %d)" %
(data[0]["x"], data[0]["y"])))

layer.CreateFeature(feature)
feature.Destroy()
ds.Destroy()

The output I get from running this is:

CreateField = False
Delete Field = False

but the creation of the fields and the GeoRSS file succeeds.

Thank you!
Jared Erickson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140108/f00926ac/attachment.html>

From even.rouault at mines-paris.org  Wed Jan  8 13:04:37 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 8 Jan 2014 22:04:37 +0100
Subject: [gdal-dev] GeoRSS and TestCapability("CreateField")
In-Reply-To: <CADYRdThqasoiSwNnQL3jOFBinRvNqgypXeX+1cKc1e3C98UvOA@mail.gmail.com>
References: <CADYRdTjBQO8GacSZrnrj7h0dKvYic53s6X78_bhVeQwa4f7_Fg@mail.gmail.com>
	<CADYRdThqasoiSwNnQL3jOFBinRvNqgypXeX+1cKc1e3C98UvOA@mail.gmail.com>
Message-ID: <201401082204.38004.even.rouault@mines-paris.org>

Le mercredi 08 janvier 2014 21:23:50, Jared Erickson a ?crit :
> Hi all,
> 
> I am working with the GeoTools developers on their OGR module in order to
> add OGR support for GeoScript and I have a question about what exactly
> Layer.TestCapability means.  In GeoTools (which is written in Java), when
> creating a new Layer we call Layer.TestCapability("CreateField") to see if
> we can create a new field.  For most drivers this works fine.  For GeoRSS
> and GPX testing for CreateField returns false even though if we comment out
> the TestCapability("CreateField") check creating the fields succeeds.  Here
> is the GeoTools code in question:
> 
> https://github.com/geotools/geotools/blob/master/modules/unsupported/ogr/og
> r-core/src/main/java/org/geotools/data/ogr/OGRDataStore.java#L188
> 
> Are we using TestCapability("CreateField") correctly?  

Jared,

Your code looks correct. You've just found a bug in the GeoRSS and GPX 
drivers. Thanks for the report. They indeed should declare the CreateField 
capabality. I've now fixed that in GDAL trunk (as well as the SOSI driver but 
that one is far less popular). In the meantime, I guess you could hardcode an 
exception for those 2 drivers.

> Should it be used
> when creating new layers or just when adding a field to an existing layer?

It is OK in both scenarios.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From allenck at windstream.net  Tue Jan  7 12:28:17 2014
From: allenck at windstream.net (Allen Kempe)
Date: Tue, 07 Jan 2014 15:28:17 -0500
Subject: [gdal-dev] What is readlink used for?
In-Reply-To: <CACmBxytHMD6SrBh4Yhg+uYu0onNDQg5i5X8=QgOs2nxe3owqYQ@mail.gmail.com>
References: <CACmBxytHMD6SrBh4Yhg+uYu0onNDQg5i5X8=QgOs2nxe3owqYQ@mail.gmail.com>
Message-ID: <52CC6361.2080206@windstream.net>


    Allen Kempe

http://acksoft.dyndns.biz/PictureGallery
298 W. Audubon Drive
Shepherdsville, KY 40165
+1 502 543-3438
On 01/06/2014 01:35 PM, Kurt Schwehr wrote:
> Hi all,
>
> I ran into trouble with readlink as can be seen in 
> http://trac.osgeo.org/gdal/ticket/5340.  I'm working with a system 
> where the run directory is all symbolic links.  So if I have 
> nonsquare.vrt refering to "./small.raw", readlink of nonsquare.vrt 
> will end up being in a totally different directory than the small.raw 
> file.
>
> So... That begs the question of the purpose of dereferencing symbolic 
> links using readlink (e.g. 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/vrt/vrtdataset.cpp#L687). 
>  Is this done just for performance on filesystems where symbolic links 
> might be a performance hit (e.g. nfs file systems over slow networks 
> and an OS that does not do a good job caching)?  Or is there something 
> else important that I'm missing?
>
> I see 4 places where readlink is used:
>
> ./ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp:  int nBytes = 
> readlink(pszName, szPointerFilename, sizeof(szPointerFilename));
> ./gcore/gdalopeninfo.cpp:        int nBytes = readlink(pszFilename, 
> szPointerFilename, sizeof(szPointerFilename));
> ./port/cpl_getexecpath.cpp:    nResultLen = readlink( osExeLink, 
> pszPathBuf, nMaxLength );
> ./frmts/vrt/vrtdataset.cpp:            int bufferSize = 
> readlink(currentVrtFilename, filenameBuffer, sizeof(filenameBuffer));
>
> ogrsfdriverregistar.cpp looks like a possible issue.
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp#L250
>
> I see that sort of works...
>
> ogrinfo my_remote_poly.shp
> ERROR 4: Unable to open 
> /vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp or 
> /vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.SHP.
> Had to open data source read-only.
> INFO: Open of `my_remote_poly.shp'
>       using driver `ESRI Shapefile' successful.
> INFO: Internal data source name 
> `/vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.shp'
>       different from user name `my_remote_poly.shp'.
> 1: poly (3D Polygon)
>
> I'm thinking that I should just disable readlink entirely. 
>  Alternatively, hhould there be a flag that controls readlink just for 
> working with vrt's or a runtime ConfigSetting that could turn on/off 
> readlink?
>
> Any thoughts would be appreciated!
>
> Thanks,
> -kurt
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140107/0e1b33a7/attachment.html>

From zachary at stauber.org  Wed Jan  8 15:31:21 2014
From: zachary at stauber.org (Zachary L. Stauber)
Date: Wed, 08 Jan 2014 16:31:21 -0700
Subject: [gdal-dev] =?utf-8?q?gdal=5Fclip?=
Message-ID: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>

Dear developers,
      I would like to contribute some code to the project.  I have a 
utility I call gdal_clip I wrote wrote in C++, which I used to compile 
against the FWTools gdal .lib file and later Mr. Szekeres .lib files, 
which will "clip" an image.  It uses an input image and an input polygon 
shapefile, and where the polygons in the shapefile overlap the image, it 
will fill them in with a chosen color (defaults to black).  It will NOT 
resize the output image in any way.
      This was useful for me to black out, or white out areas of tiles 
in orthophoto projects that were outside the project boundary (outside 
of control network and therefore of low accuracy).  I am out of the 
photogrammetry business, but I have photogrammetry colleagues who wish 
for me to recompile this every time there is a new set of builds on 
gisinternals.com/sdk, so it may be useful to build it into GDAL's code.
      It is pretty optimized, not doing a pixel-in-polygon check for 
EVERY pixel, but breaking the image into tiles and then breaking those 
tiles into quarters only if they intersect the polygons, and so forth 
down to individual pixels.  It works correctly with doughnut polygons 
and rotated images.  I probably need to pretty up the code in some way 
friendly to Doxygen, but otherwise it is ready to go.
      In the future I'd like to generalize the code to deal with 
polygons from any vector data source that OGR reads, and optionally 
resize an image to cut it down if large parts are clipped.  It would 
also be nice to make it smart enough to reproject the input polygons to 
the image's coordinate reference system if they are not the same.  I 
also think right now it only reads in and outputs TIFF images.  But 
again, I think it is useful right now.  Please let me know if you all 
think this would be useful or would like the code to see.
      It is all MIT license right now, but could be changed to GDAL's 
standard license if necessary.

      -Zack Stauber
       Albuquerque, New Mexico
       United States


From apachemaven0 at gmail.com  Wed Jan  8 16:00:08 2014
From: apachemaven0 at gmail.com (maven apache)
Date: Thu, 9 Jan 2014 08:00:08 +0800
Subject: [gdal-dev] Ogr2ogr does not support file name with non-ASCII
	character
In-Reply-To: <52CD40E0.8020102@gmail.com>
References: <CA+FxMdUEf7B5RCoAkUqwYBHzoc8ux+8RKHcqC8ynnc+p64t9jQ@mail.gmail.com>
	<52CD40E0.8020102@gmail.com>
Message-ID: <CA+FxMdUpuHxN_AdjLtCfbD=Pj=DGCMo1RQZKApgM2dzfmbe8Zg@mail.gmail.com>

Hi:

Thanks for your reply.

But I wonder how do I know if the file name is utf8? Since not all of the
filename contain no-asci characters.

Thanks


2014/1/8 Dmitriy Baryshnikov <bishop.dev at gmail.com>

>  Hi,
>
> The GDAL utilities expected all input paths in UTF-8 encoding. If you want
> to use system native encoding you have to set GDAL_FILENAME_IS_UTF8
> environment variable to NO.
> http://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_FILENAME_IS_UTF8
>
> Best regards,
>     Dmitry
>
> 08.01.2014 4:03, maven apache ?????:
>
> Hi:
>
>  This is a cross post first post at
> http://gis.stackexchange.com/questions/82142/ogr2ogr-does-not-support-file-name-with-non-ascii-character
>
>  Since I got no answer, then I think I may post it here, this is the
> original question:
>
>   I tried to use the following script to convert shapefile to mif:
>
> ogr2ogr -f "MapInfo File" D:\docs\arcgis_data\shp_mif\BOU.mif D:\docs\arcgis_data\shp\BOU.shp
>
>  it works.
>
> But I found that if the name of the shapefile has non-ASCII characters
> like this:
>
> D:\docs\arcgis_data\shp\??.shp
>
>  Then the covert will fail with message:
>
> Unable to open datasource `D:\docs\arcgis_data\shp\??.shp' with the following drivers
> ......
>
>  Any idea to fix it?
>
> Looking for replay.
>
>
>  Yang
>
> 2014.1.8
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140109/3a5c1039/attachment-0001.html>

From bishop.dev at gmail.com  Wed Jan  8 22:28:59 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 09 Jan 2014 10:28:59 +0400
Subject: [gdal-dev] Ogr2ogr does not support file name with non-ASCII
 character
In-Reply-To: <CA+FxMdUpuHxN_AdjLtCfbD=Pj=DGCMo1RQZKApgM2dzfmbe8Zg@mail.gmail.com>
References: <CA+FxMdUEf7B5RCoAkUqwYBHzoc8ux+8RKHcqC8ynnc+p64t9jQ@mail.gmail.com>	<52CD40E0.8020102@gmail.com>
	<CA+FxMdUpuHxN_AdjLtCfbD=Pj=DGCMo1RQZKApgM2dzfmbe8Zg@mail.gmail.com>
Message-ID: <52CE41AB.2090108@gmail.com>

Hi,

You shouldn't know that file name is UTF. It maybe not in UTF (e.g. in 
you system encoding - in Linux usually UTF-8,  in Windows - CP1252, 
CP1251 etc.).
But you command line shell (bash, cmd, etc.) should encode the input to 
the UTF8, or you have to set the environment variable 
GDAL_FILENAME_IS_UTF8 to NO.

Best regards,
     Dmitry

09.01.2014 4:00, maven apache ?????:
> Hi:
>
> Thanks for your reply.
>
> But I wonder how do I know if the file name is utf8? Since not all of 
> the filename contain no-asci characters.
>
> Thanks
>
>
> 2014/1/8 Dmitriy Baryshnikov <bishop.dev at gmail.com 
> <mailto:bishop.dev at gmail.com>>
>
>     Hi,
>
>     The GDAL utilities expected all input paths in UTF-8 encoding. If
>     you want to use system native encoding you have to set
>     GDAL_FILENAME_IS_UTF8 environment variable to NO.
>     http://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_FILENAME_IS_UTF8
>
>     Best regards,
>          Dmitry
>
>     08.01.2014 4:03, maven apache ?????:
>>     Hi:
>>
>>     This is a cross post first post at
>>     http://gis.stackexchange.com/questions/82142/ogr2ogr-does-not-support-file-name-with-non-ascii-character
>>
>>     Since I got no answer, then I think I may post it here, this is
>>     the original question:
>>
>>     I tried to use the following script to convert shapefile to mif:
>>
>>     |ogr2ogr -f "MapInfo File" D:\docs\arcgis_data\shp_mif\BOU.mif D:\docs\arcgis_data\shp\BOU.shp
>>     |
>>
>>     it works.
>>
>>     But I found that if the name of the shapefile has non-ASCII
>>     characters like this:
>>
>>     |D:\docs\arcgis_data\shp\??.shp
>>     |
>>
>>     Then the covert will fail with message:
>>
>>     |Unable to open datasource `D:\docs\arcgis_data\shp\??.shp' with the following drivers
>>     ......
>>     |
>>
>>     Any idea to fix it?
>>
>>     Looking for replay.
>>
>>
>>     Yang
>>
>>     2014.1.8
>>
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140109/ed871356/attachment.html>

From bontepaarden at gmail.com  Wed Jan  8 23:34:31 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 9 Jan 2014 08:34:31 +0100
Subject: [gdal-dev] gdal_clip
In-Reply-To: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
Message-ID: <CAHNf2YQubLwzH2euy6N0mEehmap=HUAp1FxXj+eHzodaHzbSYg@mail.gmail.com>

Hi Zack,

Your function sounds great. We've tried to implement something similar last
summer but couldn't get it to work properly.
I have no authority to say if this should be implemented in GDAL or not,
but you've got my vote ;)

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl




2014/1/9 Zachary L. Stauber <zachary at stauber.org>

> Dear developers,
>      I would like to contribute some code to the project.  I have a
> utility I call gdal_clip I wrote wrote in C++, which I used to compile
> against the FWTools gdal .lib file and later Mr. Szekeres .lib files, which
> will "clip" an image.  It uses an input image and an input polygon
> shapefile, and where the polygons in the shapefile overlap the image, it
> will fill them in with a chosen color (defaults to black).  It will NOT
> resize the output image in any way.
>      This was useful for me to black out, or white out areas of tiles in
> orthophoto projects that were outside the project boundary (outside of
> control network and therefore of low accuracy).  I am out of the
> photogrammetry business, but I have photogrammetry colleagues who wish for
> me to recompile this every time there is a new set of builds on
> gisinternals.com/sdk, so it may be useful to build it into GDAL's code.
>      It is pretty optimized, not doing a pixel-in-polygon check for EVERY
> pixel, but breaking the image into tiles and then breaking those tiles into
> quarters only if they intersect the polygons, and so forth down to
> individual pixels.  It works correctly with doughnut polygons and rotated
> images.  I probably need to pretty up the code in some way friendly to
> Doxygen, but otherwise it is ready to go.
>      In the future I'd like to generalize the code to deal with polygons
> from any vector data source that OGR reads, and optionally resize an image
> to cut it down if large parts are clipped.  It would also be nice to make
> it smart enough to reproject the input polygons to the image's coordinate
> reference system if they are not the same.  I also think right now it only
> reads in and outputs TIFF images.  But again, I think it is useful right
> now.  Please let me know if you all think this would be useful or would
> like the code to see.
>      It is all MIT license right now, but could be changed to GDAL's
> standard license if necessary.
>
>      -Zack Stauber
>       Albuquerque, New Mexico
>       United States
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140109/ca0202e2/attachment.html>

From jukka.rahkonen at mmmtike.fi  Thu Jan  9 01:18:20 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 9 Jan 2014 09:18:20 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?gdal=5Fclip?=
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<CAHNf2YQubLwzH2euy6N0mEehmap=HUAp1FxXj+eHzodaHzbSYg@mail.gmail.com>
Message-ID: <loom.20140109T100811-494@post.gmane.org>

Paul Meems <bontepaarden <at> gmail.com> writes:

> 
> 
> 
> Hi Zack,
> Your function sounds great. We've tried to implement something similar
last summer but couldn't get it to work properly.
> I have no authority to say if this should be implemented in GDAL or not,
but you've got my vote ;)
> Thanks,

I can also imagine use cases for such utility but wouldn't a name like
gdal_paint, gdal_mask, gdal_hide etc. describe better what it does?

Is it possible to paint the covering areas as semi-transparent?

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Thu Jan  9 04:04:41 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 09 Jan 2014 13:04:41 +0100
Subject: [gdal-dev] gdal_clip
In-Reply-To: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
Message-ID: <1389269081.52ce905939039@imp.free.fr>

Zachary,

is it different from gdal_rasterize with the burn option ?

Even

> Dear developers,
>       I would like to contribute some code to the project.  I have a
> utility I call gdal_clip I wrote wrote in C++, which I used to compile
> against the FWTools gdal .lib file and later Mr. Szekeres .lib files,
> which will "clip" an image.  It uses an input image and an input polygon
> shapefile, and where the polygons in the shapefile overlap the image, it
> will fill them in with a chosen color (defaults to black).  It will NOT
> resize the output image in any way.
>       This was useful for me to black out, or white out areas of tiles
> in orthophoto projects that were outside the project boundary (outside
> of control network and therefore of low accuracy).  I am out of the
> photogrammetry business, but I have photogrammetry colleagues who wish
> for me to recompile this every time there is a new set of builds on
> gisinternals.com/sdk, so it may be useful to build it into GDAL's code.
>       It is pretty optimized, not doing a pixel-in-polygon check for
> EVERY pixel, but breaking the image into tiles and then breaking those
> tiles into quarters only if they intersect the polygons, and so forth
> down to individual pixels.  It works correctly with doughnut polygons
> and rotated images.  I probably need to pretty up the code in some way
> friendly to Doxygen, but otherwise it is ready to go.
>       In the future I'd like to generalize the code to deal with
> polygons from any vector data source that OGR reads, and optionally
> resize an image to cut it down if large parts are clipped.  It would
> also be nice to make it smart enough to reproject the input polygons to
> the image's coordinate reference system if they are not the same.  I
> also think right now it only reads in and outputs TIFF images.  But
> again, I think it is useful right now.  Please let me know if you all
> think this would be useful or would like the code to see.
>       It is all MIT license right now, but could be changed to GDAL's
> standard license if necessary.
>
>       -Zack Stauber
>        Albuquerque, New Mexico
>        United States
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From zachary at stauber.org  Thu Jan  9 07:39:35 2014
From: zachary at stauber.org (Zachary L. Stauber)
Date: Thu, 09 Jan 2014 08:39:35 -0700
Subject: [gdal-dev] =?utf-8?q?gdal=5Fclip?=
In-Reply-To: <1389269081.52ce905939039@imp.free.fr>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<1389269081.52ce905939039@imp.free.fr>
Message-ID: <fd1ac92cc2707c7f783d2da24c46f4d9@mail.swcp.com>

Replying to all respondents on this thread... M. Rouault's right, it 
appears to duplicate the functionality of gdal_rasterize with the -burn 
option, which I had never looked into.  Thus, I withdraw the idea.  If 
anyone wants a copy of the source or a compiled executable, I will still 
provide that.  And thank you M. Rouault for providing the functionality.

      -Zack

On Jan 9 2014 5:04 AM, Even Rouault wrote:
> Zachary,
>
> is it different from gdal_rasterize with the burn option ?
>
> Even
>
>> Dear developers,
>>       I would like to contribute some code to the project.  I have a
>> utility I call gdal_clip I wrote wrote in C++, which I used to 
>> compile
>> against the FWTools gdal .lib file and later Mr. Szekeres .lib 
>> files,
>> which will "clip" an image.  It uses an input image and an input 
>> polygon
>> shapefile, and where the polygons in the shapefile overlap the 
>> image, it
>> will fill them in with a chosen color (defaults to black).  It will 
>> NOT
>> resize the output image in any way.
>>       This was useful for me to black out, or white out areas of 
>> tiles
>> in orthophoto projects that were outside the project boundary 
>> (outside
>> of control network and therefore of low accuracy).  I am out of the
>> photogrammetry business, but I have photogrammetry colleagues who 
>> wish
>> for me to recompile this every time there is a new set of builds on
>> gisinternals.com/sdk, so it may be useful to build it into GDAL's 
>> code.
>>       It is pretty optimized, not doing a pixel-in-polygon check for
>> EVERY pixel, but breaking the image into tiles and then breaking 
>> those
>> tiles into quarters only if they intersect the polygons, and so 
>> forth
>> down to individual pixels.  It works correctly with doughnut 
>> polygons
>> and rotated images.  I probably need to pretty up the code in some 
>> way
>> friendly to Doxygen, but otherwise it is ready to go.
>>       In the future I'd like to generalize the code to deal with
>> polygons from any vector data source that OGR reads, and optionally
>> resize an image to cut it down if large parts are clipped.  It would
>> also be nice to make it smart enough to reproject the input polygons 
>> to
>> the image's coordinate reference system if they are not the same.  I
>> also think right now it only reads in and outputs TIFF images.  But
>> again, I think it is useful right now.  Please let me know if you 
>> all
>> think this would be useful or would like the code to see.
>>       It is all MIT license right now, but could be changed to 
>> GDAL's
>> standard license if necessary.
>>
>>       -Zack Stauber
>>        Albuquerque, New Mexico
>>        United States
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>


From even.rouault at mines-paris.org  Thu Jan  9 09:05:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 09 Jan 2014 18:05:57 +0100
Subject: [gdal-dev] gdal_clip
In-Reply-To: <fd1ac92cc2707c7f783d2da24c46f4d9@mail.swcp.com>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<1389269081.52ce905939039@imp.free.fr>
	<fd1ac92cc2707c7f783d2da24c46f4d9@mail.swcp.com>
Message-ID: <1389287157.52ced6f547fd5@imp.free.fr>

Selon "Zachary L. Stauber" <zachary at stauber.org>:

> Replying to all respondents on this thread... M. Rouault's right, it
> appears to duplicate the functionality of gdal_rasterize with the -burn
> option, which I had never looked into.  Thus, I withdraw the idea.  If
> anyone wants a copy of the source or a compiled executable, I will still
> provide that.  And thank you M. Rouault for providing the functionality.

Actually, all credit for gdal_rasterize goes to Frank Warmerdam.

>
>       -Zack
>
> On Jan 9 2014 5:04 AM, Even Rouault wrote:
> > Zachary,
> >
> > is it different from gdal_rasterize with the burn option ?
> >
> > Even
> >
> >> Dear developers,
> >>       I would like to contribute some code to the project.  I have a
> >> utility I call gdal_clip I wrote wrote in C++, which I used to
> >> compile
> >> against the FWTools gdal .lib file and later Mr. Szekeres .lib
> >> files,
> >> which will "clip" an image.  It uses an input image and an input
> >> polygon
> >> shapefile, and where the polygons in the shapefile overlap the
> >> image, it
> >> will fill them in with a chosen color (defaults to black).  It will
> >> NOT
> >> resize the output image in any way.
> >>       This was useful for me to black out, or white out areas of
> >> tiles
> >> in orthophoto projects that were outside the project boundary
> >> (outside
> >> of control network and therefore of low accuracy).  I am out of the
> >> photogrammetry business, but I have photogrammetry colleagues who
> >> wish
> >> for me to recompile this every time there is a new set of builds on
> >> gisinternals.com/sdk, so it may be useful to build it into GDAL's
> >> code.
> >>       It is pretty optimized, not doing a pixel-in-polygon check for
> >> EVERY pixel, but breaking the image into tiles and then breaking
> >> those
> >> tiles into quarters only if they intersect the polygons, and so
> >> forth
> >> down to individual pixels.  It works correctly with doughnut
> >> polygons
> >> and rotated images.  I probably need to pretty up the code in some
> >> way
> >> friendly to Doxygen, but otherwise it is ready to go.
> >>       In the future I'd like to generalize the code to deal with
> >> polygons from any vector data source that OGR reads, and optionally
> >> resize an image to cut it down if large parts are clipped.  It would
> >> also be nice to make it smart enough to reproject the input polygons
> >> to
> >> the image's coordinate reference system if they are not the same.  I
> >> also think right now it only reads in and outputs TIFF images.  But
> >> again, I think it is useful right now.  Please let me know if you
> >> all
> >> think this would be useful or would like the code to see.
> >>       It is all MIT license right now, but could be changed to
> >> GDAL's
> >> standard license if necessary.
> >>
> >>       -Zack Stauber
> >>        Albuquerque, New Mexico
> >>        United States
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From tpiepho at gmail.com  Thu Jan  9 09:18:06 2014
From: tpiepho at gmail.com (Trent Piepho)
Date: Thu, 9 Jan 2014 09:18:06 -0800
Subject: [gdal-dev] gdal_clip
In-Reply-To: <fd1ac92cc2707c7f783d2da24c46f4d9@mail.swcp.com>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<1389269081.52ce905939039@imp.free.fr>
	<fd1ac92cc2707c7f783d2da24c46f4d9@mail.swcp.com>
Message-ID: <CA+7tXihmxeSO-muwpBmCdPmaxqYcDKMQhPEgSycZSsefWwstVw@mail.gmail.com>

Is it significantly faster or slower than gdal_rasterize?

On Thu, Jan 9, 2014 at 7:39 AM, Zachary L. Stauber <zachary at stauber.org> wrote:
> Replying to all respondents on this thread... M. Rouault's right, it appears
> to duplicate the functionality of gdal_rasterize with the -burn option,
> which I had never looked into.  Thus, I withdraw the idea.  If anyone wants
> a copy of the source or a compiled executable, I will still provide that.
> And thank you M. Rouault for providing the functionality.
>

From jlaura at asu.edu  Thu Jan  9 20:00:32 2014
From: jlaura at asu.edu (Jay L.)
Date: Thu, 9 Jan 2014 21:00:32 -0700
Subject: [gdal-dev] Standard Dev. Environment?
Message-ID: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>

List,

I wonder if a standard dev. environment exists?  I am working to extend a
driver and am having trouble getting an environment working that will
compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with source
downloaded from SVN.  Attempting to build with minimized
drivers<http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as
per the build documentation and am having build errors due to
dec_jpeg2000 (jasper I believe).

Q: Are devs using a standard environment (or a different flavor of *nix?)?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140109/10d69c1f/attachment.html>

From warmerdam at pobox.com  Thu Jan  9 20:33:26 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 9 Jan 2014 20:33:26 -0800
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
Message-ID: <CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>

Jay,

Are you needing Jasper?  Normally a default build ("./configure") should
work pretty well on a precise system. I'm guessing you have enabled jasper
because it is key to what you want to do?  If not --without-jasper should
be straight forward.

Best regards,
Frank



On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:

> List,
>
> I wonder if a standard dev. environment exists?  I am working to extend a
> driver and am having trouble getting an environment working that will
> compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with source
> downloaded from SVN.  Attempting to build with minimized drivers<http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as per the build documentation and am having build errors due to
> dec_jpeg2000 (jasper I believe).
>
> Q: Are devs using a standard environment (or a different flavor of *nix?)?
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140109/7d1e26ed/attachment.html>

From pi_ml at sourcepole.com  Fri Jan 10 00:07:20 2014
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Fri, 10 Jan 2014 09:07:20 +0100
Subject: [gdal-dev] Preferred XML parser
Message-ID: <1600031.orOoL8ZXrV@robbe2>

Hi,

I'm going to implement some more XML parsing in the Interlis driver.
Which XML parser is generally suggested for using in OGR? For Interlis 2, 
we've implemented a SAX parser with Xerces, but for this part, only DOM access 
is needed.

Regards
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com


From even.rouault at mines-paris.org  Fri Jan 10 01:22:45 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 10 Jan 2014 10:22:45 +0100
Subject: [gdal-dev] Preferred XML parser
In-Reply-To: <1600031.orOoL8ZXrV@robbe2>
References: <1600031.orOoL8ZXrV@robbe2>
Message-ID: <1389345765.52cfbbe5703fa@imp.free.fr>

Hi Pirmin,

We have a variety of XML parsers used :
- the built-in CPLMiniXML parser (port/cpl_minixml.h) that is a simple DOM
parser without any fancy feature (it doesn't have explicit support for encodings
for example. If you've need for recoding, you'll have to do it explicitely with
CPLRecode() API) but that works well and is used for parsing PAM .aux.xml, .vrt
etc
- Expat for SAX parsing in quite a lot of OGR drivers : GPX, GeoRSS, GML, XLSX,
ODS, SVG
- Xerces used in GML (GML can use Expat or Xerces), its derived driver NAS and
in the existing Interlis driver as you mentionned.

Even

> Hi,
>
> I'm going to implement some more XML parsing in the Interlis driver.
> Which XML parser is generally suggested for using in OGR? For Interlis 2,
> we've implemented a SAX parser with Xerces, but for this part, only DOM
> access
> is needed.
>
> Regards
> Pirmin
>
> --
> Pirmin Kalberer
> Sourcepole  -  Linux & Open Source Solutions
> http://www.sourcepole.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jlaura at asu.edu  Fri Jan 10 06:14:19 2014
From: jlaura at asu.edu (Jay L.)
Date: Fri, 10 Jan 2014 07:14:19 -0700
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
Message-ID: <CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>

Frank,

Thanks for the heads up.  I am using the --without-jasper flag as part of
the ./configure call.  Here is the error that I am seeing - that led to me
to believe that the issue is jasper related:

make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
g++  gdalinfo.o commonutils.o  -L/home/vagrant/gdal-1.10.1 -lgdal
 -lpthread -lm -lrt -ldl                  -o gdalinfo
/home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to `dec_jpeg2000'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
make: *** [apps-target] Error 2

I did install libjpeg-dev and libjasper-dev in hopes that this would
alleviate the issue.

Perhaps I am pursuing the issue in the wrong direction?

Thanks,
Jay


On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> Jay,
>
> Are you needing Jasper?  Normally a default build ("./configure") should
> work pretty well on a precise system. I'm guessing you have enabled jasper
> because it is key to what you want to do?  If not --without-jasper should
> be straight forward.
>
> Best regards,
> Frank
>
>
>
> On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:
>
>> List,
>>
>> I wonder if a standard dev. environment exists?  I am working to extend a
>> driver and am having trouble getting an environment working that will
>> compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with source
>> downloaded from SVN.  Attempting to build with minimized drivers<http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as per the build documentation and am having build errors due to
>> dec_jpeg2000 (jasper I believe).
>>
>> Q: Are devs using a standard environment (or a different flavor of *nix?)?
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/7b62b817/attachment.html>

From even.rouault at mines-paris.org  Fri Jan 10 06:24:33 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 10 Jan 2014 15:24:33 +0100
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>
Message-ID: <1389363873.52d002a1777c8@imp.free.fr>

Selon "Jay L." <jlaura at asu.edu>:

> Frank,
>
> Thanks for the heads up.  I am using the --without-jasper flag as part of
> the ./configure call.  Here is the error that I am seeing - that led to me
> to believe that the issue is jasper related:
>
> make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
> g++  gdalinfo.o commonutils.o  -L/home/vagrant/gdal-1.10.1 -lgdal
>  -lpthread -lm -lrt -ldl                  -o gdalinfo
> /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to `dec_jpeg2000'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
> make: *** [apps-target] Error 2
>
> I did install libjpeg-dev and libjasper-dev in hopes that this would
> alleviate the issue.
>
> Perhaps I am pursuing the issue in the wrong direction?

When you run ./configure several times, make sure to run "make clean" between
the attempts. I'm not clear why you've had this error with the "dec_jpeg2000"
symbol that is defined and used in the GRIB driver (it has a definition even if
you don't have Jasper). Anway the "make clean" will probably solve it.
Generally, "./configure" without any particular argument should work on most
platforms.

>
> Thanks,
> Jay
>
>
> On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>
> > Jay,
> >
> > Are you needing Jasper?  Normally a default build ("./configure") should
> > work pretty well on a precise system. I'm guessing you have enabled jasper
> > because it is key to what you want to do?  If not --without-jasper should
> > be straight forward.
> >
> > Best regards,
> > Frank
> >
> >
> >
> > On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:
> >
> >> List,
> >>
> >> I wonder if a standard dev. environment exists?  I am working to extend a
> >> driver and am having trouble getting an environment working that will
> >> compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with source
> >> downloaded from SVN.  Attempting to build with minimized
> drivers<http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as
> per the build documentation and am having build errors due to
> >> dec_jpeg2000 (jasper I believe).
> >>
> >> Q: Are devs using a standard environment (or a different flavor of *nix?)?
> >>
> >>
> >>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
> >
> > --
> >
> >
> ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam at pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Software Developer
> >
>


From jlaura at asu.edu  Fri Jan 10 07:49:51 2014
From: jlaura at asu.edu (Jay L.)
Date: Fri, 10 Jan 2014 08:49:51 -0700
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <1389363873.52d002a1777c8@imp.free.fr>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>
	<1389363873.52d002a1777c8@imp.free.fr>
Message-ID: <CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>

Evan,

Thanks for the info.  One more question for you - make clean worked, but I
have hit another issue:

After running `./configure --without-jpeg ...`, `make clean`, `sudo make
install`:
...
/home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
`jpeg_write_scanlines'
/home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
`jpeg_CreateCompress'
/home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
`jpeg_read_scanlines'

So lib-jpeg is seen.  This doesn't make sense since I have --without-jpeg
specified in the config.  I looked in the config and must have missed it -
does a flag to specify the full PATH to libjpeg exist?

Thanks,
Jay


On Fri, Jan 10, 2014 at 7:24 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon "Jay L." <jlaura at asu.edu>:
>
> > Frank,
> >
> > Thanks for the heads up.  I am using the --without-jasper flag as part of
> > the ./configure call.  Here is the error that I am seeing - that led to
> me
> > to believe that the issue is jasper related:
> >
> > make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
> > g++  gdalinfo.o commonutils.o  -L/home/vagrant/gdal-1.10.1 -lgdal
> >  -lpthread -lm -lrt -ldl                  -o gdalinfo
> > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> `dec_jpeg2000'
> > collect2: ld returned 1 exit status
> > make[1]: *** [gdalinfo] Error 1
> > make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
> > make: *** [apps-target] Error 2
> >
> > I did install libjpeg-dev and libjasper-dev in hopes that this would
> > alleviate the issue.
> >
> > Perhaps I am pursuing the issue in the wrong direction?
>
> When you run ./configure several times, make sure to run "make clean"
> between
> the attempts. I'm not clear why you've had this error with the
> "dec_jpeg2000"
> symbol that is defined and used in the GRIB driver (it has a definition
> even if
> you don't have Jasper). Anway the "make clean" will probably solve it.
> Generally, "./configure" without any particular argument should work on
> most
> platforms.
>
> >
> > Thanks,
> > Jay
> >
> >
> > On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam <warmerdam at pobox.com>
> wrote:
> >
> > > Jay,
> > >
> > > Are you needing Jasper?  Normally a default build ("./configure")
> should
> > > work pretty well on a precise system. I'm guessing you have enabled
> jasper
> > > because it is key to what you want to do?  If not --without-jasper
> should
> > > be straight forward.
> > >
> > > Best regards,
> > > Frank
> > >
> > >
> > >
> > > On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:
> > >
> > >> List,
> > >>
> > >> I wonder if a standard dev. environment exists?  I am working to
> extend a
> > >> driver and am having trouble getting an environment working that will
> > >> compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with
> source
> > >> downloaded from SVN.  Attempting to build with minimized
> > drivers<
> http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as
> > per the build documentation and am having build errors due to
> > >> dec_jpeg2000 (jasper I believe).
> > >>
> > >> Q: Are devs using a standard environment (or a different flavor of
> *nix?)?
> > >>
> > >>
> > >>
> > >>
> > >>
> > >> _______________________________________________
> > >> gdal-dev mailing list
> > >> gdal-dev at lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >>
> > >
> > >
> > >
> > > --
> > >
> > >
> >
> ---------------------------------------+--------------------------------------
> > > I set the clouds in motion - turn up   | Frank Warmerdam,
> > > warmerdam at pobox.com
> > > light and sound - activate the windows | http://pobox.com/~warmerdam
> > > and watch the world go round - Rush    | Geospatial Software Developer
> > >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/2ebf8d47/attachment-0001.html>

From even.rouault at mines-paris.org  Fri Jan 10 08:33:52 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 10 Jan 2014 17:33:52 +0100
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>
	<1389363873.52d002a1777c8@imp.free.fr>
	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>
Message-ID: <1389371632.52d020f0aa679@imp.free.fr>

Jay,

hum it is well possible that the build with --without-jpeg doesn't work and that
some drivers will try to use it. I haven't tried it for ages. GDAL has an
internal version of libjpeg, so when you've no external libjpeg, that one will
be picked up. I imagine that very few people test --without-jpeg.

Frank suggested you to just use plain "./configure". I'd recommend strongly that
you just to try it. This must work well and autodetect which libs are available
or not. The BuildingOnUnixWithMinimizedDrivers page you quote represents a
non-standard configuration of GDAL, so you may hit rough corners.

To answer your question concerning the value for --with-jpeg, it is the
installation prefix of libjpeg. Typically /usr for system jpeg (but that one
would be picked up implicitely) or /usr/local (if you've installed your own
libjpeg).

> Evan,
>
> Thanks for the info.  One more question for you - make clean worked, but I
> have hit another issue:
>
> After running `./configure --without-jpeg ...`, `make clean`, `sudo make
> install`:
> ...
> /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> `jpeg_write_scanlines'
> /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> `jpeg_CreateCompress'
> /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> `jpeg_read_scanlines'
>
> So lib-jpeg is seen.  This doesn't make sense since I have --without-jpeg
> specified in the config.  I looked in the config and must have missed it -
> does a flag to specify the full PATH to libjpeg exist?
>
> Thanks,
> Jay
>
>
> On Fri, Jan 10, 2014 at 7:24 AM, Even Rouault
> <even.rouault at mines-paris.org>wrote:
>
> > Selon "Jay L." <jlaura at asu.edu>:
> >
> > > Frank,
> > >
> > > Thanks for the heads up.  I am using the --without-jasper flag as part of
> > > the ./configure call.  Here is the error that I am seeing - that led to
> > me
> > > to believe that the issue is jasper related:
> > >
> > > make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
> > > g++  gdalinfo.o commonutils.o  -L/home/vagrant/gdal-1.10.1 -lgdal
> > >  -lpthread -lm -lrt -ldl                  -o gdalinfo
> > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > `dec_jpeg2000'
> > > collect2: ld returned 1 exit status
> > > make[1]: *** [gdalinfo] Error 1
> > > make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
> > > make: *** [apps-target] Error 2
> > >
> > > I did install libjpeg-dev and libjasper-dev in hopes that this would
> > > alleviate the issue.
> > >
> > > Perhaps I am pursuing the issue in the wrong direction?
> >
> > When you run ./configure several times, make sure to run "make clean"
> > between
> > the attempts. I'm not clear why you've had this error with the
> > "dec_jpeg2000"
> > symbol that is defined and used in the GRIB driver (it has a definition
> > even if
> > you don't have Jasper). Anway the "make clean" will probably solve it.
> > Generally, "./configure" without any particular argument should work on
> > most
> > platforms.
> >
> > >
> > > Thanks,
> > > Jay
> > >
> > >
> > > On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam <warmerdam at pobox.com>
> > wrote:
> > >
> > > > Jay,
> > > >
> > > > Are you needing Jasper?  Normally a default build ("./configure")
> > should
> > > > work pretty well on a precise system. I'm guessing you have enabled
> > jasper
> > > > because it is key to what you want to do?  If not --without-jasper
> > should
> > > > be straight forward.
> > > >
> > > > Best regards,
> > > > Frank
> > > >
> > > >
> > > >
> > > > On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:
> > > >
> > > >> List,
> > > >>
> > > >> I wonder if a standard dev. environment exists?  I am working to
> > extend a
> > > >> driver and am having trouble getting an environment working that will
> > > >> compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with
> > source
> > > >> downloaded from SVN.  Attempting to build with minimized
> > > drivers<
> > http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as
> > > per the build documentation and am having build errors due to
> > > >> dec_jpeg2000 (jasper I believe).
> > > >>
> > > >> Q: Are devs using a standard environment (or a different flavor of
> > *nix?)?
> > > >>
> > > >>
> > > >>
> > > >>
> > > >>
> > > >> _______________________________________________
> > > >> gdal-dev mailing list
> > > >> gdal-dev at lists.osgeo.org
> > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >>
> > > >
> > > >
> > > >
> > > > --
> > > >
> > > >
> > >
> >
> ---------------------------------------+--------------------------------------
> > > > I set the clouds in motion - turn up   | Frank Warmerdam,
> > > > warmerdam at pobox.com
> > > > light and sound - activate the windows | http://pobox.com/~warmerdam
> > > > and watch the world go round - Rush    | Geospatial Software Developer
> > > >
> > >
> >
> >
>

From lucena_ivan at hotmail.com  Fri Jan 10 08:54:10 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 10 Jan 2014 11:54:10 -0500
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <1389371632.52d020f0aa679@imp.free.fr>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>,
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>,
	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>,
	<1389363873.52d002a1777c8@imp.free.fr>,
	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>,
	<1389371632.52d020f0aa679@imp.free.fr>
Message-ID: <BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>

I always build with:

  --with-libz=internal \
  --with-png=internal \
  --with-libtiff=internal \
  --with-geotiff=internal \
  --with-jpeg=internal \
  --with-gif=internal \

 If that helps...

> Date: Fri, 10 Jan 2014 17:33:52 +0100
> From: even.rouault at mines-paris.org
> To: jlaura at asu.edu
> CC: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Standard Dev. Environment?
> 
> Jay,
> 
> hum it is well possible that the build with --without-jpeg doesn't work and that
> some drivers will try to use it. I haven't tried it for ages. GDAL has an
> internal version of libjpeg, so when you've no external libjpeg, that one will
> be picked up. I imagine that very few people test --without-jpeg.
> 
> Frank suggested you to just use plain "./configure". I'd recommend strongly that
> you just to try it. This must work well and autodetect which libs are available
> or not. The BuildingOnUnixWithMinimizedDrivers page you quote represents a
> non-standard configuration of GDAL, so you may hit rough corners.
> 
> To answer your question concerning the value for --with-jpeg, it is the
> installation prefix of libjpeg. Typically /usr for system jpeg (but that one
> would be picked up implicitely) or /usr/local (if you've installed your own
> libjpeg).
> 
> > Evan,
> >
> > Thanks for the info.  One more question for you - make clean worked, but I
> > have hit another issue:
> >
> > After running `./configure --without-jpeg ...`, `make clean`, `sudo make
> > install`:
> > ...
> > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > `jpeg_write_scanlines'
> > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > `jpeg_CreateCompress'
> > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > `jpeg_read_scanlines'
> >
> > So lib-jpeg is seen.  This doesn't make sense since I have --without-jpeg
> > specified in the config.  I looked in the config and must have missed it -
> > does a flag to specify the full PATH to libjpeg exist?
> >
> > Thanks,
> > Jay
> >
> >
> > On Fri, Jan 10, 2014 at 7:24 AM, Even Rouault
> > <even.rouault at mines-paris.org>wrote:
> >
> > > Selon "Jay L." <jlaura at asu.edu>:
> > >
> > > > Frank,
> > > >
> > > > Thanks for the heads up.  I am using the --without-jasper flag as part of
> > > > the ./configure call.  Here is the error that I am seeing - that led to
> > > me
> > > > to believe that the issue is jasper related:
> > > >
> > > > make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
> > > > g++  gdalinfo.o commonutils.o  -L/home/vagrant/gdal-1.10.1 -lgdal
> > > >  -lpthread -lm -lrt -ldl                  -o gdalinfo
> > > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > > `dec_jpeg2000'
> > > > collect2: ld returned 1 exit status
> > > > make[1]: *** [gdalinfo] Error 1
> > > > make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
> > > > make: *** [apps-target] Error 2
> > > >
> > > > I did install libjpeg-dev and libjasper-dev in hopes that this would
> > > > alleviate the issue.
> > > >
> > > > Perhaps I am pursuing the issue in the wrong direction?
> > >
> > > When you run ./configure several times, make sure to run "make clean"
> > > between
> > > the attempts. I'm not clear why you've had this error with the
> > > "dec_jpeg2000"
> > > symbol that is defined and used in the GRIB driver (it has a definition
> > > even if
> > > you don't have Jasper). Anway the "make clean" will probably solve it.
> > > Generally, "./configure" without any particular argument should work on
> > > most
> > > platforms.
> > >
> > > >
> > > > Thanks,
> > > > Jay
> > > >
> > > >
> > > > On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam <warmerdam at pobox.com>
> > > wrote:
> > > >
> > > > > Jay,
> > > > >
> > > > > Are you needing Jasper?  Normally a default build ("./configure")
> > > should
> > > > > work pretty well on a precise system. I'm guessing you have enabled
> > > jasper
> > > > > because it is key to what you want to do?  If not --without-jasper
> > > should
> > > > > be straight forward.
> > > > >
> > > > > Best regards,
> > > > > Frank
> > > > >
> > > > >
> > > > >
> > > > > On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:
> > > > >
> > > > >> List,
> > > > >>
> > > > >> I wonder if a standard dev. environment exists?  I am working to
> > > extend a
> > > > >> driver and am having trouble getting an environment working that will
> > > > >> compile.  Current setup is a VagrantVM, Ubuntu 12.04 32-bit with
> > > source
> > > > >> downloaded from SVN.  Attempting to build with minimized
> > > > drivers<
> > > http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as
> > > > per the build documentation and am having build errors due to
> > > > >> dec_jpeg2000 (jasper I believe).
> > > > >>
> > > > >> Q: Are devs using a standard environment (or a different flavor of
> > > *nix?)?
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >> _______________________________________________
> > > > >> gdal-dev mailing list
> > > > >> gdal-dev at lists.osgeo.org
> > > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > >>
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > >
> > > > >
> > > >
> > >
> > ---------------------------------------+--------------------------------------
> > > > > I set the clouds in motion - turn up   | Frank Warmerdam,
> > > > > warmerdam at pobox.com
> > > > > light and sound - activate the windows | http://pobox.com/~warmerdam
> > > > > and watch the world go round - Rush    | Geospatial Software Developer
> > > > >
> > > >
> > >
> > >
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/4723e9ec/attachment.html>

From jlaura at asu.edu  Fri Jan 10 10:23:48 2014
From: jlaura at asu.edu (Jay L.)
Date: Fri, 10 Jan 2014 11:23:48 -0700
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>
	<1389363873.52d002a1777c8@imp.free.fr>
	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>
	<1389371632.52d020f0aa679@imp.free.fr>
	<BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>
Message-ID: <CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>

Success.  Ivan, I used your ./configure flags - stock was also not working
on this VM.

I wonder if the dev. community is large enough to warrant storing a
lightweight Vagrant box image somewhere.

Thanks Frank, Evan and Ivan.


On Fri, Jan 10, 2014 at 9:54 AM, Ivan Lucena <lucena_ivan at hotmail.com>wrote:

> I always build with:
>
>   --with-libz=internal \
>   --with-png=internal \
>   --with-libtiff=internal \
>   --with-geotiff=internal \
>
> *  --with-jpeg=internal \*  --with-gif=internal \
>
>  If that helps...
>
> > Date: Fri, 10 Jan 2014 17:33:52 +0100
> > From: even.rouault at mines-paris.org
> > To: jlaura at asu.edu
> > CC: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Standard Dev. Environment?
>
> >
> > Jay,
> >
> > hum it is well possible that the build with --without-jpeg doesn't work
> and that
> > some drivers will try to use it. I haven't tried it for ages. GDAL has an
> > internal version of libjpeg, so when you've no external libjpeg, that
> one will
> > be picked up. I imagine that very few people test --without-jpeg.
> >
> > Frank suggested you to just use plain "./configure". I'd recommend
> strongly that
> > you just to try it. This must work well and autodetect which libs are
> available
> > or not. The BuildingOnUnixWithMinimizedDrivers page you quote represents
> a
> > non-standard configuration of GDAL, so you may hit rough corners.
> >
> > To answer your question concerning the value for --with-jpeg, it is the
> > installation prefix of libjpeg. Typically /usr for system jpeg (but that
> one
> > would be picked up implicitely) or /usr/local (if you've installed your
> own
> > libjpeg).
> >
> > > Evan,
> > >
> > > Thanks for the info. One more question for you - make clean worked,
> but I
> > > have hit another issue:
> > >
> > > After running `./configure --without-jpeg ...`, `make clean`, `sudo
> make
> > > install`:
> > > ...
> > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > > `jpeg_write_scanlines'
> > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > > `jpeg_CreateCompress'
> > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > > `jpeg_read_scanlines'
> > >
> > > So lib-jpeg is seen. This doesn't make sense since I have
> --without-jpeg
> > > specified in the config. I looked in the config and must have missed
> it -
> > > does a flag to specify the full PATH to libjpeg exist?
> > >
> > > Thanks,
> > > Jay
> > >
> > >
> > > On Fri, Jan 10, 2014 at 7:24 AM, Even Rouault
> > > <even.rouault at mines-paris.org>wrote:
> > >
> > > > Selon "Jay L." <jlaura at asu.edu>:
> > > >
> > > > > Frank,
> > > > >
> > > > > Thanks for the heads up. I am using the --without-jasper flag as
> part of
> > > > > the ./configure call. Here is the error that I am seeing - that
> led to
> > > > me
> > > > > to believe that the issue is jasper related:
> > > > >
> > > > > make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
> > > > > g++ gdalinfo.o commonutils.o -L/home/vagrant/gdal-1.10.1 -lgdal
> > > > > -lpthread -lm -lrt -ldl -o gdalinfo
> > > > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
> > > > `dec_jpeg2000'
> > > > > collect2: ld returned 1 exit status
> > > > > make[1]: *** [gdalinfo] Error 1
> > > > > make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
> > > > > make: *** [apps-target] Error 2
> > > > >
> > > > > I did install libjpeg-dev and libjasper-dev in hopes that this
> would
> > > > > alleviate the issue.
> > > > >
> > > > > Perhaps I am pursuing the issue in the wrong direction?
> > > >
> > > > When you run ./configure several times, make sure to run "make clean"
> > > > between
> > > > the attempts. I'm not clear why you've had this error with the
> > > > "dec_jpeg2000"
> > > > symbol that is defined and used in the GRIB driver (it has a
> definition
> > > > even if
> > > > you don't have Jasper). Anway the "make clean" will probably solve
> it.
> > > > Generally, "./configure" without any particular argument should work
> on
> > > > most
> > > > platforms.
> > > >
> > > > >
> > > > > Thanks,
> > > > > Jay
> > > > >
> > > > >
> > > > > On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam <
> warmerdam at pobox.com>
> > > > wrote:
> > > > >
> > > > > > Jay,
> > > > > >
> > > > > > Are you needing Jasper? Normally a default build ("./configure")
> > > > should
> > > > > > work pretty well on a precise system. I'm guessing you have
> enabled
> > > > jasper
> > > > > > because it is key to what you want to do? If not --without-jasper
> > > > should
> > > > > > be straight forward.
> > > > > >
> > > > > > Best regards,
> > > > > > Frank
> > > > > >
> > > > > >
> > > > > >
> > > > > > On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> wrote:
> > > > > >
> > > > > >> List,
> > > > > >>
> > > > > >> I wonder if a standard dev. environment exists? I am working to
> > > > extend a
> > > > > >> driver and am having trouble getting an environment working
> that will
> > > > > >> compile. Current setup is a VagrantVM, Ubuntu 12.04 32-bit with
> > > > source
> > > > > >> downloaded from SVN. Attempting to build with minimized
> > > > > drivers<
> > > > http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers
> >as
> > > > > per the build documentation and am having build errors due to
> > > > > >> dec_jpeg2000 (jasper I believe).
> > > > > >>
> > > > > >> Q: Are devs using a standard environment (or a different flavor
> of
> > > > *nix?)?
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >> _______________________________________________
> > > > > >> gdal-dev mailing list
> > > > > >> gdal-dev at lists.osgeo.org
> > > > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > > >>
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > >
> > > > > >
> > > > >
> > > >
> > >
> ---------------------------------------+--------------------------------------
> > > > > > I set the clouds in motion - turn up | Frank Warmerdam,
> > > > > > warmerdam at pobox.com
> > > > > > light and sound - activate the windows |
> http://pobox.com/~warmerdam
> > > > > > and watch the world go round - Rush | Geospatial Software
> Developer
> > > > > >
> > > > >
> > > >
> > > >
> > >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/7ec941a5/attachment-0001.html>

From dmorissette at mapgears.com  Fri Jan 10 10:36:11 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 10 Jan 2014 13:36:11 -0500
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>	<1389363873.52d002a1777c8@imp.free.fr>	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>	<1389371632.52d020f0aa679@imp.free.fr>	<BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>
	<CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>
Message-ID: <52D03D9B.2040500@mapgears.com>

On 14-01-10 1:23 PM, Jay L. wrote:
> Success.  Ivan, I used your ./configure flags - stock was also not
> working on this VM.
>
> I wonder if the dev. community is large enough to warrant storing a
> lightweight Vagrant box image somewhere.
>

Talking of Vagrant, FYI about a year ago Alan Boudreault wrote a set of 
Vagrant and Chef recipes to automate the setup of a MapServer dev 
environment (which includes GDAL as a dependency). The recipes are a bit 
old already, but it may be a good starting point for automating the 
setup of a GDAL dev environment.

If you're interested, see:
http://www.alanb.ca/blog/2013/03/09/setup-a-mapserver-development-environment-with-vagrant-and-chef/


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From aboudreault at mapgears.com  Fri Jan 10 10:41:27 2014
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Fri, 10 Jan 2014 13:41:27 -0500
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <52D03D9B.2040500@mapgears.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>	<1389363873.52d002a1777c8@imp.free.fr>	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>	<1389371632.52d020f0aa679@imp.free.fr>	<BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>
	<CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>
	<52D03D9B.2040500@mapgears.com>
Message-ID: <52D03ED7.7070008@mapgears.com>

The github: https://github.com/aboudreault/mapserver_dev-cookbook

Note that I started to upgrade the environment to be compatible with the 
latest vagrant. I will also update the README file in the repo since the 
procedure will be easier (since a few things I was using have been 
directly integrated as vagrant plugin).

I plan to finish this during the next week.

Alan

On 14-01-10 01:36 PM, Daniel Morissette wrote:
> On 14-01-10 1:23 PM, Jay L. wrote:
>> Success.  Ivan, I used your ./configure flags - stock was also not
>> working on this VM.
>>
>> I wonder if the dev. community is large enough to warrant storing a
>> lightweight Vagrant box image somewhere.
>>
>
> Talking of Vagrant, FYI about a year ago Alan Boudreault wrote a set 
> of Vagrant and Chef recipes to automate the setup of a MapServer dev 
> environment (which includes GDAL as a dependency). The recipes are a 
> bit old already, but it may be a good starting point for automating 
> the setup of a GDAL dev environment.
>
> If you're interested, see:
> http://www.alanb.ca/blog/2013/03/09/setup-a-mapserver-development-environment-with-vagrant-and-chef/ 
>
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/0f447e7c/attachment.html>

From jlaura at asu.edu  Fri Jan 10 11:44:03 2014
From: jlaura at asu.edu (Jay L.)
Date: Fri, 10 Jan 2014 12:44:03 -0700
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <52D03ED7.7070008@mapgears.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>
	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>
	<1389363873.52d002a1777c8@imp.free.fr>
	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>
	<1389371632.52d020f0aa679@imp.free.fr>
	<BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>
	<CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>
	<52D03D9B.2040500@mapgears.com> <52D03ED7.7070008@mapgears.com>
Message-ID: <CA+bfmPtdnPkw3QdiFJwhxjeE9nSX_0hk9DO2kiQ5XWhHhDL-Ow@mail.gmail.com>

Have you also seen the geobox environment?

https://github.com/zhm/geobox

The install fails as the links to postgres configs are outdated (GiST URL
changes)  Alan, if you have no issue, I might fork geobox and swap in your
PostGreSQL lines to get geobox back up and running.  I think it is easier
to share with beginning users that the OSGEO live CD.


On Fri, Jan 10, 2014 at 11:41 AM, Alan Boudreault
<aboudreault at mapgears.com>wrote:

>  The github: https://github.com/aboudreault/mapserver_dev-cookbook
>
> Note that I started to upgrade the environment to be compatible with the
> latest vagrant. I will also update the README file in the repo since the
> procedure will be easier (since a few things I was using have been directly
> integrated as vagrant plugin).
>
> I plan to finish this during the next week.
>
> Alan
>
>
> On 14-01-10 01:36 PM, Daniel Morissette wrote:
>
> On 14-01-10 1:23 PM, Jay L. wrote:
>
> Success.  Ivan, I used your ./configure flags - stock was also not
> working on this VM.
>
> I wonder if the dev. community is large enough to warrant storing a
> lightweight Vagrant box image somewhere.
>
>
> Talking of Vagrant, FYI about a year ago Alan Boudreault wrote a set of
> Vagrant and Chef recipes to automate the setup of a MapServer dev
> environment (which includes GDAL as a dependency). The recipes are a bit
> old already, but it may be a good starting point for automating the setup
> of a GDAL dev environment.
>
> If you're interested, see:
>
> http://www.alanb.ca/blog/2013/03/09/setup-a-mapserver-development-environment-with-vagrant-and-chef/
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/124e1064/attachment.html>

From aboudreault at mapgears.com  Fri Jan 10 11:49:32 2014
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Fri, 10 Jan 2014 14:49:32 -0500
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+bfmPtdnPkw3QdiFJwhxjeE9nSX_0hk9DO2kiQ5XWhHhDL-Ow@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>	<1389363873.52d002a1777c8@imp.free.fr>	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>	<1389371632.52d020f0aa679@imp.free.fr>	<BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>	<CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>	<52D03D9B.2040500@mapgears.com>	<52D03ED7.7070008@mapgears.com>
	<CA+bfmPtdnPkw3QdiFJwhxjeE9nSX_0hk9DO2kiQ5XWhHhDL-Ow@mail.gmail.com>
Message-ID: <52D04ECC.5050403@mapgears.com>

Yeah, np. My repo only aims for mapserver development. Geobox installs a 
lot more stuff, which is not really needed for our stuff.

Alan

On 14-01-10 02:44 PM, Jay L. wrote:
> Have you also seen the geobox environment?
>
> https://github.com/zhm/geobox
>
> The install fails as the links to postgres configs are outdated (GiST 
> URL changes)  Alan, if you have no issue, I might fork geobox and swap 
> in your PostGreSQL lines to get geobox back up and running.  I think 
> it is easier to share with beginning users that the OSGEO live CD.
>
>
> On Fri, Jan 10, 2014 at 11:41 AM, Alan Boudreault 
> <aboudreault at mapgears.com <mailto:aboudreault at mapgears.com>> wrote:
>
>     The github: https://github.com/aboudreault/mapserver_dev-cookbook
>
>     Note that I started to upgrade the environment to be compatible
>     with the latest vagrant. I will also update the README file in the
>     repo since the procedure will be easier (since a few things I was
>     using have been directly integrated as vagrant plugin).
>
>     I plan to finish this during the next week.
>
>     Alan
>
>
>     On 14-01-10 01:36 PM, Daniel Morissette wrote:
>>     On 14-01-10 1:23 PM, Jay L. wrote:
>>>     Success.  Ivan, I used your ./configure flags - stock was also not
>>>     working on this VM.
>>>
>>>     I wonder if the dev. community is large enough to warrant storing a
>>>     lightweight Vagrant box image somewhere.
>>>
>>
>>     Talking of Vagrant, FYI about a year ago Alan Boudreault wrote a
>>     set of Vagrant and Chef recipes to automate the setup of a
>>     MapServer dev environment (which includes GDAL as a dependency).
>>     The recipes are a bit old already, but it may be a good starting
>>     point for automating the setup of a GDAL dev environment.
>>
>>     If you're interested, see:
>>     http://www.alanb.ca/blog/2013/03/09/setup-a-mapserver-development-environment-with-vagrant-and-chef/
>>
>>
>>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140110/c0638b5e/attachment.html>

From even.rouault at mines-paris.org  Fri Jan 10 11:56:15 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 10 Jan 2014 20:56:15 +0100
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <1389371632.52d020f0aa679@imp.free.fr>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>
	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>
	<1389371632.52d020f0aa679@imp.free.fr>
Message-ID: <201401102056.15173.even.rouault@mines-paris.org>

Le vendredi 10 janvier 2014 17:33:52, Even Rouault a ?crit :
> Jay,
> 
> hum it is well possible that the build with --without-jpeg doesn't work and
> that some drivers will try to use it. I haven't tried it for ages. GDAL
> has an internal version of libjpeg, so when you've no external libjpeg,
> that one will be picked up. I imagine that very few people test
> --without-jpeg.

I've just tested --without-jpeg, and in fact the PCIDSK driver was still 
trying to use libjpeg symbols. This is now fixed in trunk

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Jan 12 05:03:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 12 Jan 2014 14:03:54 +0100
Subject: [gdal-dev] Motion: Adopt RFC45 : GDAL datasets and raster bands as
	virtual memory mapping
Message-ID: <201401121403.54513.even.rouault@mines-paris.org>

Motion : I move to adopt RFC 45 (GDAL datasets and raster bands as virtual 
memory mapping)

    http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem

Starting with my +1

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ammar83_h at yahoo.com  Sun Jan 12 09:59:47 2014
From: ammar83_h at yahoo.com (Ammar)
Date: Sun, 12 Jan 2014 09:59:47 -0800 (PST)
Subject: [gdal-dev] White lines in merged GeoTIFF files
In-Reply-To: <1389349208.55646.YahooMailNeo@web163001.mail.bf1.yahoo.com>
References: <1389349208.55646.YahooMailNeo@web163001.mail.bf1.yahoo.com>
Message-ID: <1389549587.10756.YahooMailNeo@web163002.mail.bf1.yahoo.com>

Dear list,

I have merged 21 GeoTIFF images using GDAL utilities. Each image is the 
result of merging 500 smaller tiles. I am using ImageMosaic in Geoserver but I am getting a mosaic that contains white lines 


What could be the reason behind having those white lines?

The commands that I used are: (recommended by Jonathan Mule on Geoserver mailing list)

?? 

gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs EPSG:27700 -input_file_list tiff_list.txt mosaic.vrt


gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES -co COMPRESS=JPEG -co 
JPEG_QUALITY=80 -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co 
PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif


gdaladdo mosaic.tif -r average --config COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 60 --config 
INTERLEAVE_OVERVIEW PIXEL --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 
32 64 128 256 512

Thank you in advance
//Ammar? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140112/a8279ea7/attachment.html>

From warmerdam at pobox.com  Sun Jan 12 10:32:11 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 12 Jan 2014 10:32:11 -0800
Subject: [gdal-dev] Motion: Adopt RFC45 : GDAL datasets and raster bands
 as virtual memory mapping
In-Reply-To: <201401121403.54513.even.rouault@mines-paris.org>
References: <201401121403.54513.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBc6+Fh2wvsNiSm-fs=dFAeh+gPk-67J1vm5BwF1K9-acQ@mail.gmail.com>

+1



On Sun, Jan 12, 2014 at 5:03 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Motion : I move to adopt RFC 45 (GDAL datasets and raster bands as virtual
> memory mapping)
>
>     http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem
>
> Starting with my +1
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140112/69481e62/attachment.html>

From gillingham.sam at gmail.com  Sun Jan 12 16:06:01 2014
From: gillingham.sam at gmail.com (Sam Gillingham)
Date: Mon, 13 Jan 2014 13:06:01 +1300
Subject: [gdal-dev] Color Columns in Raster Attribute Tables
Message-ID: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>

Hi List,

There appears to be an inconsistency in the way color columns are handled
within Raster Attribute Tables (RATs) by different drivers. Color columns
are currently identified by their 'usage' setting - GFU_Red, GFU_Green,
GFU_Blue and GFU_Alpha. The HFA driver presents color columns as doubles
between 0 and 1 as this is how they are stored in the file. The IDRISI
driver presents them as integers between 0 and 255 like the Color Table
API. Code that uses color columns from the RAT API currently needs to know
which driver it is using, defeating one of the aims of GDAL.

I propose that the RAT API be defined so that color columns always appear
as Integer 0-255 no matter what type and range they are stored as. This
would make the RAT API consistent with the Color Table API and would mean a
change to the HFA driver

Another option is that flags are added to the RAT SetValue, GetValueAs* and
ValuesIO calls to specify the conversion to/from the native type. This
seems a bigger change.

Any thoughts?

Sam.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140113/4d2d8fa3/attachment.html>

From lucena_ivan at hotmail.com  Sun Jan 12 18:18:59 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sun, 12 Jan 2014 21:18:59 -0500
Subject: [gdal-dev] Color Columns in Raster Attribute Tables
In-Reply-To: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
Message-ID: <BLU173-W471B18174921EA5195968090BC0@phx.gbl>

Hi Sam,

In GDAL color table is supported by the GDALColorTable http://gdal.org/classGDALColorTable.html not by GDALRasterAttributeTable http://gdal.org/classGDALRasterAttributeTable.html. 

The GDALColorTable is a little bit limited but it is pretty much consistent across all the drivers that support it. For example, when you say that HFA reports RGBA with values from 0..1 as RAT it probably reports the correct 0..255 as GDALGetColorTable or it doesn't report it at all, because of the GDALColorTable limitation, like data type or number of colors.

But IMHO, there is no reason to expect consistency on the representation of color table from a driver RAT. An RAT could be user defined or generated by some driver or application. 

What you are seem is that some drivers are using, or maybe abusing, the freedom format of RAT to report information than can be understood by some particular application or software (mea culpa on one of those).

Best regards,

Ivan

Date: Mon, 13 Jan 2014 13:06:01 +1300
From: gillingham.sam at gmail.com
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Color Columns in Raster Attribute Tables

Hi List,

There appears to be an 
inconsistency in the way color columns are handled within Raster 
Attribute Tables (RATs) by different drivers. Color columns are currently identified by their 'usage' setting - GFU_Red, GFU_Green, GFU_Blue and GFU_Alpha. The HFA driver presents 
color columns as doubles between 0 and 1 as this is how they are stored 
in the file. The IDRISI driver presents them as integers between 0 and 
255 like the Color Table API. Code that uses color columns from the RAT
 API currently needs to know which driver it is using, defeating one of the aims of GDAL. 


I propose that the RAT API be defined so that color columns 
always appear as Integer 0-255 no matter what type and range they are stored as. 
This would make the RAT API consistent with the Color Table API and would mean a change to the HFA driver

Another
 option is that flags are added to the RAT SetValue, GetValueAs* and 
ValuesIO calls to specify the conversion to/from the native type. This 
seems a bigger change.


Any thoughts?

Sam.


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140112/28871a21/attachment.html>

From hrz at geodata.soton.ac.uk  Mon Jan 13 01:36:01 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Mon, 13 Jan 2014 09:36:01 +0000
Subject: [gdal-dev] Standard Dev. Environment?
In-Reply-To: <CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>
References: <CA+bfmPs4dmAW1U0_bZ0uFfnvRvj8EnV1w8rPwApbGPJeK1Z1pQ@mail.gmail.com>	<CA+YzLBcrpRrqGNhhv3yuPKtPktxRsmkZ-TUL3wkvT7+L+qhwCw@mail.gmail.com>	<CA+bfmPtaMvGEmD_DhEMfpc=jUh=+56tTLBwC26ADqR1pDpAtLA@mail.gmail.com>	<1389363873.52d002a1777c8@imp.free.fr>	<CA+bfmPvBpaNgHLZw3mwyNiuc3jHS2MTxa3rATwFTm3=VTCM1eQ@mail.gmail.com>	<1389371632.52d020f0aa679@imp.free.fr>	<BLU173-W46C04D7247BA8ACAD947FC90B30@phx.gbl>
	<CA+bfmPsQK00pn05=-kRZ8J+kYi3zUu00_-VqXD8aFW__gQ=RzA@mail.gmail.com>
Message-ID: <52D3B381.2000404@geodata.soton.ac.uk>

Hello,

On 10/01/14 18:23, Jay L. wrote:
> Success.  Ivan, I used your  ./configure flags - stock was also not working on this VM.
 >
 > I wonder if the dev. community is large enough to warrant storing a 
lightweight Vagrant box image somewhere.
 >

Thinking along these lines, Docker has been getting a lot of traction lately
(http://www.docker.io) as a way to manage linux containers: I can see a
standard GDAL/OGR container with a broad selection of drivers being 
useful in a
similar way to a Vagrant box image.

Container images can be hosted without cost to the community on the Docker
Index (https://index.docker.io).

See also <http://blog.docker.io/2013/11/introducing-trusted-builds/> as 
a way
of automatically rebuilding a container image on the Docker Index every 
time a
github commit is made.

Thanks,

Homme

> Thanks Frank, Evan and Ivan.
 >
 >
 > On Fri, Jan 10, 2014 at 9:54 AM, Ivan Lucena 
<lucena_ivan at hotmail.com> wrote:
 >
 >     I always build with:
 >
 >       --with-libz=internal \
 >       --with-png=internal \
 >       --with-libtiff=internal \
 >       --with-geotiff=internal \
 >       --with-jpeg=internal \
 >       --with-gif=internal \
 >
 >      If that helps...
 >
 >     > Date: Fri, 10 Jan 2014 17:33:52 +0100
 >     > From: even.rouault at mines-paris.org
 >     > To: jlaura at asu.edu
 >     > CC: gdal-dev at lists.osgeo.org
 >     > Subject: Re: [gdal-dev] Standard Dev. Environment?
 >
 >     >
 >     > Jay,
 >     >
 >     > hum it is well possible that the build with --without-jpeg 
doesn't work and that
 >     > some drivers will try to use it. I haven't tried it for ages. 
GDAL has an
 >     > internal version of libjpeg, so when you've no external 
libjpeg, that one will
 >     > be picked up. I imagine that very few people test --without-jpeg.
 >     >
 >     > Frank suggested you to just use plain "./configure". I'd 
recommend strongly that
 >     > you just to try it. This must work well and autodetect which 
libs are available
 >     > or not. The BuildingOnUnixWithMinimizedDrivers page you quote 
represents a
 >     > non-standard configuration of GDAL, so you may hit rough corners.
 >     >
 >     > To answer your question concerning the value for --with-jpeg, 
it is the
 >     > installation prefix of libjpeg. Typically /usr for system jpeg 
(but that one
 >     > would be picked up implicitely) or /usr/local (if you've 
installed your own
 >     > libjpeg).
 >     >
 >     > > Evan,
 >     > >
 >     > > Thanks for the info. One more question for you - make clean 
worked, but I
 >     > > have hit another issue:
 >     > >
 >     > > After running `./configure --without-jpeg ...`, `make clean`, 
`sudo make
 >     > > install`:
 >     > > ...
 >     > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
 >     > > `jpeg_write_scanlines'
 >     > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
 >     > > `jpeg_CreateCompress'
 >     > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
 >     > > `jpeg_read_scanlines'
 >     > >
 >     > > So lib-jpeg is seen. This doesn't make sense since I have 
--without-jpeg
 >     > > specified in the config. I looked in the config and must have 
missed it -
 >     > > does a flag to specify the full PATH to libjpeg exist?
 >     > >
 >     > > Thanks,
 >     > > Jay
 >     > >
 >     > >
 >     > > On Fri, Jan 10, 2014 at 7:24 AM, Even Rouault
 >     > > <even.rouault at mines-paris.org>wrote:
 >     > >
 >     > > > Selon "Jay L." <jlaura at asu.edu>:
 >     > > >
 >     > > > > Frank,
 >     > > > >
 >     > > > > Thanks for the heads up. I am using the --without-jasper 
flag as part of
 >     > > > > the ./configure call. Here is the error that I am seeing 
- that led to
 >     > > > me
 >     > > > > to believe that the issue is jasper related:
 >     > > > >
 >     > > > > make[1]: Entering directory `/home/vagrant/gdal-1.10.1/apps'
 >     > > > > g++ gdalinfo.o commonutils.o -L/home/vagrant/gdal-1.10.1 
-lgdal
 >     > > > > -lpthread -lm -lrt -ldl -o gdalinfo
 >     > > > > /home/vagrant/gdal-1.10.1/libgdal.so: undefined reference to
 >     > > > `dec_jpeg2000'
 >     > > > > collect2: ld returned 1 exit status
 >     > > > > make[1]: *** [gdalinfo] Error 1
 >     > > > > make[1]: Leaving directory `/home/vagrant/gdal-1.10.1/apps'
 >     > > > > make: *** [apps-target] Error 2
 >     > > > >
 >     > > > > I did install libjpeg-dev and libjasper-dev in hopes that 
this would
 >     > > > > alleviate the issue.
 >     > > > >
 >     > > > > Perhaps I am pursuing the issue in the wrong direction?
 >     > > >
 >     > > > When you run ./configure several times, make sure to run 
"make clean"
 >     > > > between
 >     > > > the attempts. I'm not clear why you've had this error with the
 >     > > > "dec_jpeg2000"
 >     > > > symbol that is defined and used in the GRIB driver (it has 
a definition
 >     > > > even if
 >     > > > you don't have Jasper). Anway the "make clean" will 
probably solve it.
 >     > > > Generally, "./configure" without any particular argument 
should work on
 >     > > > most
 >     > > > platforms.
 >     > > >
 >     > > > >
 >     > > > > Thanks,
 >     > > > > Jay
 >     > > > >
 >     > > > >
 >     > > > > On Thu, Jan 9, 2014 at 9:33 PM, Frank Warmerdam 
<warmerdam at pobox.com>
 >     > > > wrote:
 >     > > > >
 >     > > > > > Jay,
 >     > > > > >
 >     > > > > > Are you needing Jasper? Normally a default build 
("./configure")
 >     > > > should
 >     > > > > > work pretty well on a precise system. I'm guessing you 
have enabled
 >     > > > jasper
 >     > > > > > because it is key to what you want to do? If not 
--without-jasper
 >     > > > should
 >     > > > > > be straight forward.
 >     > > > > >
 >     > > > > > Best regards,
 >     > > > > > Frank
 >     > > > > >
 >     > > > > >
 >     > > > > >
 >     > > > > > On Thu, Jan 9, 2014 at 8:00 PM, Jay L. <jlaura at asu.edu> 
wrote:
 >     > > > > >
 >     > > > > >> List,
 >     > > > > >>
 >     > > > > >> I wonder if a standard dev. environment exists? I am 
working to
 >     > > > extend a
 >     > > > > >> driver and am having trouble getting an environment 
working that will
 >     > > > > >> compile. Current setup is a VagrantVM, Ubuntu 12.04 
32-bit with
 >     > > > source
 >     > > > > >> downloaded from SVN. Attempting to build with minimized
 >     > > > > drivers<
 >     > > > 
http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers>as
 >     > > > > per the build documentation and am having build errors due to
 >     > > > > >> dec_jpeg2000 (jasper I believe).
 >     > > > > >>
 >     > > > > >> Q: Are devs using a standard environment (or a 
different flavor of
 >     > > > *nix?)?
 >     > > > > >>
 >     > > > > >>
 >     > > > > >>
 >     > > > > >>
 >     > > > > >>
 >     > > > > >> _______________________________________________
 >     > > > > >> gdal-dev mailing list
 >     > > > > >> gdal-dev at lists.osgeo.org
 >     > > > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 >     > > > > >>
 >     > > > > >
 >     > > > > >
 >     > > > > >
 >     > > > > > --
 >     > > > > >
 >     > > > > >
 >     > > > >
 >     > > >
 >     > > 
---------------------------------------+--------------------------------------
 >     > > > > > I set the clouds in motion - turn up | Frank Warmerdam,
 >     > > > > > warmerdam at pobox.com
 >     > > > > > light and sound - activate the windows | 
http://pobox.com/~warmerdam
 >     > > > > > and watch the world go round - Rush | Geospatial 
Software Developer
 >     > > > > >
 >     > > > >
 >     > > >
 >     > > >
 >     > >
 >     > _______________________________________________
 >     > gdal-dev mailing list
 >     > gdal-dev at lists.osgeo.org
 >     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
 >
 >
 >
 >
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev at lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140113/c2de645c/attachment-0001.html>

From rveciana at gmail.com  Mon Jan 13 08:35:41 2014
From: rveciana at gmail.com (Roger Veciana i Rovira)
Date: Mon, 13 Jan 2014 17:35:41 +0100
Subject: [gdal-dev] Map problems with the new d3js 3.4 version
Message-ID: <CAJx2no=V=xJQciEh7xWxjR4g0Gcy6O-B7vp+91bwv16MOKqV1g@mail.gmail.com>

Hi, I don't know if somebody found the same problem, but this example:
http://bl.ocks.org/mbostock/3757132
should paint the land in a grey colour, and let the sea white. And it did
since the change to the version 3.4 of D3js. I tested it in my computer
with v 3.3 and it works properly.

Does somebody know what's happening?

Thank you

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140113/fda3a991/attachment.html>

From gillingham.sam at gmail.com  Mon Jan 13 11:51:58 2014
From: gillingham.sam at gmail.com (Sam Gillingham)
Date: Tue, 14 Jan 2014 08:51:58 +1300
Subject: [gdal-dev] Color Columns in Raster Attribute Tables
In-Reply-To: <BLU173-W471B18174921EA5195968090BC0@phx.gbl>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<BLU173-W471B18174921EA5195968090BC0@phx.gbl>
Message-ID: <CAMH-RbY4nDsJzOO99R04aZtWPfCH_we7wsvaxnq33Fg5eCXZ2g@mail.gmail.com>

Hi Ivan,

Unfortunately the color table API does not support the functionality that
was added to the RAT API in RFC40. As a result, dealing with large color
tables can be problematic.

Yes the HFA driver does report colors correctly as 0-255 with the color
table API and one solution could be to add RFC40 functionality to the color
table API. However, it does seem that it does make sense to be able to
manipulate colors from the RAT API for e.g. setting colors based on the
value(s) found in other attribute columns easily.

I accept that no consistency can be expected for user defined columns
(usage == GFU_Generic) but I would have though applications could depend on
the color columns since they are marked as such by their usage. In fact the
documentation for the usage values (
http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1) does
specify them to be 0-255 so this seems to have been the intention and is
maybe just a bug in the HFA driver.

Sam.


On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> wrote:

> Hi Sam,
>
> In GDAL color table is supported by the GDALColorTable
> http://gdal.org/classGDALColorTable.html not by GDALRasterAttributeTable
> http://gdal.org/classGDALRasterAttributeTable.html.
>
> The GDALColorTable is a little bit limited but it is pretty much
> consistent across all the drivers that support it. For example, when you
> say that HFA reports RGBA with values from 0..1 as RAT it probably reports
> the correct 0..255 as GDALGetColorTable or it doesn't report it at all,
> because of the GDALColorTable limitation, like data type or number of
> colors.
>
> But IMHO, there is no reason to expect consistency on the representation
> of color table from a driver RAT. An RAT could be user defined or generated
> by some driver or application.
>
> What you are seem is that some drivers are using, or maybe abusing, the
> freedom format of RAT to report information than can be understood by some
> particular application or software (mea culpa on one of those).
>
> Best regards,
>
> Ivan
>
> ------------------------------
> Date: Mon, 13 Jan 2014 13:06:01 +1300
> From: gillingham.sam at gmail.com
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Color Columns in Raster Attribute Tables
>
>
> Hi List,
>
> There appears to be an inconsistency in the way color columns are handled
> within Raster Attribute Tables (RATs) by different drivers. Color columns
> are currently identified by their 'usage' setting - GFU_Red, GFU_Green,
> GFU_Blue and GFU_Alpha. The HFA driver presents color columns as doubles
> between 0 and 1 as this is how they are stored in the file. The IDRISI
> driver presents them as integers between 0 and 255 like the Color Table
> API. Code that uses color columns from the RAT API currently needs to know
> which driver it is using, defeating one of the aims of GDAL.
>
> I propose that the RAT API be defined so that color columns always appear
> as Integer 0-255 no matter what type and range they are stored as. This
> would make the RAT API consistent with the Color Table API and would mean a
> change to the HFA driver
>
> Another option is that flags are added to the RAT SetValue, GetValueAs*
> and ValuesIO calls to specify the conversion to/from the native type. This
> seems a bigger change.
>
> Any thoughts?
>
> Sam.
>
> _______________________________________________ gdal-dev mailing list
> gdal-dev at lists.osgeo.org http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140114/4b3fb736/attachment.html>

From osgeo at gzmarketing.com  Mon Jan 13 14:22:26 2014
From: osgeo at gzmarketing.com (Metzen)
Date: Mon, 13 Jan 2014 14:22:26 -0800 (PST)
Subject: [gdal-dev] USGS DEM Header - Long/Lat in Different Formats
Message-ID: <1389651746011-5097877.post@n6.nabble.com>

I have several USGS DEM files in different resolutions from different
sources, and the coordinates in the headers are in different formats.

In one file the long/lat shows up as:
-105 0 1.8333  385958.1667   (spaces, no spaces)

In the other file the long/lat shows up as:
-104 0 0.0000  52 0 0.0000   (spaces, spaces)

Are both formats valid?

Is there a predictable way to determine which format it will (should) be in?

I can't find any documentation on the variations in coordinate notation.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/USGS-DEM-Header-Long-Lat-in-Different-Formats-tp5097877.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Tue Jan 14 14:41:57 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 14 Jan 2014 23:41:57 +0100
Subject: [gdal-dev] GDAL + libtiff
Message-ID: <CACALY+TYZwiy2cW853sQJcvFvbFvDKvOWj5+wNWpO64h_yG-gg@mail.gmail.com>

Hi Devs,

I'm a bit confused what would be the suggested approach of using GDAL with
the internal libtiff when the application would also use libtiff directly.
Is GDAL libtiff just the raw copy of the "official" libtiff or just a
limited functionality has been taken over?

Actually some of the functions of the library has been exposed by gdal.dll,
but many of the functions are missing. In this regard we might require to
use libtiff directly by the application, but the mixture of the versions
may lead to problems specifically.

I might also ask this from the aspect of an SDK distribution provider.
Should I provide the compilation of the standalone libtiff along with gdal
(compiled as dll or static lib) and which versions should be used? Or we
should modify the GDAL build process to compile at least the static libtiff
in addition?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140114/4aa3f095/attachment.html>

From even.rouault at mines-paris.org  Tue Jan 14 14:54:42 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 14 Jan 2014 23:54:42 +0100
Subject: [gdal-dev] GDAL + libtiff
In-Reply-To: <CACALY+TYZwiy2cW853sQJcvFvbFvDKvOWj5+wNWpO64h_yG-gg@mail.gmail.com>
References: <CACALY+TYZwiy2cW853sQJcvFvbFvDKvOWj5+wNWpO64h_yG-gg@mail.gmail.com>
Message-ID: <201401142354.43034.even.rouault@mines-paris.org>

Hi Tamas,

> Hi Devs,
> 
> I'm a bit confused what would be the suggested approach of using GDAL with
> the internal libtiff when the application would also use libtiff directly.
> Is GDAL libtiff just the raw copy of the "official" libtiff or just a
> limited functionality has been taken over?

It is a copy of official libtiff (the lib part of course, not the libtiff 
utilities) + some configuration to use GDAL configuration ( like enabling JPEG 
codec if jpeg is available to GDAL, 64bit integers, etc...)

> 
> Actually some of the functions of the library has been exposed by gdal.dll,
> but many of the functions are missing. In this regard we might require to
> use libtiff directly by the application, but the mixture of the versions
> may lead to problems specifically.

Yes, this has been a problem on Linux where internal GDAL was libtiff 4 and 
system libtiff 3.8 and 3.9. I ended up providing an option to rename the 
symbols of internal libtiff so they cannot collide with external libtiff.

> 
> I might also ask this from the aspect of an SDK distribution provider.
> Should I provide the compilation of the standalone libtiff along with gdal
> (compiled as dll or static lib) and which versions should be used? Or we
> should modify the GDAL build process to compile at least the static libtiff
> in addition?

You could compile the latest libtiff 4.0.X (you want 4.something for BigTIFF 
support) externally as a dll, and link GDAL against it. So that would please 
both people wanting to use libtiff directly and GDAL. I imagine this is how it 
is done in OSGeo4W (I haven't verified though).

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aperi2007 at gmail.com  Wed Jan 15 03:01:14 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 15 Jan 2014 12:01:14 +0100
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
Message-ID: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>

Hi,

I have a lot of huge tiff not-gereferenced raster.
These tiff are all with 4 bands (RGBA) and 10 pyramids inside.

I need to remove the piramids and retrieve a new tiff version without the
piramids and with only 3 bands (RGB).

Usually this work is do using imagemagick or vips, but I like to try to use
the gdal-translate to do this.
But Im not sure , because the tiff are not georef and also I'm not sure if
gdal is capable to read a 4 pyramid tiff and generate a 3 not-piramid tiff.

Thx for every hints.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140115/faaa7250/attachment.html>

From hrz at geodata.soton.ac.uk  Wed Jan 15 03:07:45 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 15 Jan 2014 11:07:45 +0000
Subject: [gdal-dev] GDAL Docker image
Message-ID: <52D66C01.6050903@geodata.soton.ac.uk>

Hi,

In case it's of use to anyone else, I've uploaded an image to the docker 
index containing a recent build of GDAL (see 
https://index.docker.io/u/homme/gdal/ for details).

The only dependency is that you have docker installed 
(http://www.docker.io/ - currently only on x86_64).  Assuming that, the 
following command will open a bash shell in an Ubuntu based environment 
with GDAL available:|

|docker run -t -i homme/gdal:latest /bin/bash

The build process closely follows that defined in 
<https://github.com/OSGeo/gdal/blob/trunk/.travis.yml> but omits Java 
support.  `configure` outputs the following:

GDAL is now configured for x86_64-unknown-linux-gnu

   Installation directory:    /usr/local
   C compiler:                gcc -fPIC  -g -DDEBUG 
-DHAVE_SSE_AT_COMPILE_TIME
   C++ compiler:              g++ -fPIC  -g -DDEBUG 
-DHAVE_SSE_AT_COMPILE_TIME

   LIBTOOL support:           no

   LIBZ support:              external
   LIBLZMA support:           yes
   GRASS support:             no
   CFITSIO support:           no
   PCRaster support:          internal
   LIBPNG support:            external
   DDS support:               no
   GTA support:               yes
   LIBTIFF support:           internal (BigTIFF=yes)
   LIBGEOTIFF support:        internal
   LIBJPEG support:           external
   12 bit JPEG:               yes
   12 bit JPEG-in-TIFF:       no
   LIBGIF support:            external
   OGDI support:              no
   HDF4 support:              yes
   HDF5 support:              yes
   NetCDF support:            yes
   Kakadu support:            no
   JasPer support:            no
   OpenJPEG support:          yes
   ECW support:               yes
   MrSID support:             yes
   MrSID/MG4 Lidar support:   yes
   MSG support:               no
   GRIB support:              yes
   EPSILON support:           yes
   WebP support:              yes
   cURL support (wms/wcs/...):yes
   PostgreSQL support:        yes
   MySQL support:             no
   Ingres support:            no
   Xerces-C support:          yes
   NAS support:               yes
   Expat support:             yes
   libxml2 support:           yes
   Google libkml support:     yes
   ODBC support:              yes
   PGeo support:              yes
   FGDB support:              yes
   MDB support:               no
   PCIDSK support:            internal
   OCI support:               no
   GEORASTER support:         no
   SDE support:               no
   Rasdaman support:          no
   DODS support:              no
   SQLite support:            yes
   PCRE support:              yes
   SpatiaLite support:        yes
   DWGdirect support          no
   INFORMIX DataBlade support:no
   GEOS support:              yes
   Poppler support:           yes
   Podofo support:            yes
   OpenCL support:            no
   Armadillo support:         no
   FreeXL support:            yes
   SOSI support:              no


   SWIG Bindings:             python

   Statically link PROJ.4:    no
   enable OGR building:       yes
   enable pthread support:    yes
   enable POSIX iconv support:yes
   hide internal symbols:     no

Improvements/suggestions are very welcome!

Best regards,

Homme

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140115/eb1652d4/attachment.html>

From daniele.romagnoli at geo-solutions.it  Wed Jan 15 03:36:59 2014
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed, 15 Jan 2014 12:36:59 +0100
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
In-Reply-To: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
References: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
Message-ID: <CAJaHrDyMgPCxebvDuKOGXUz0MbL3yRbsi1SXjfsLh=7M_4nL_g@mail.gmail.com>

Hi Andrea,
you may consider using
"gdal_translate -b 1 -b 2 -b 3 inputTiff outputTiff"

I assume you are referring to overviews, right?
In that case, gdal_translate won't copy overviews so you are lucky :)

You may also consider adding tiling with "-co TILED=YES" to the previous
command:
"gdal_translate -b 1 -b 2 -b 3 -co TILED=YES inputTiff outputTiff"

Default tiling is 256x256; you may specify different one with -co
BLOCKXSIZE=nnn -co BLOCKYSIZE=mmm

Hope this helps.
Cheers,
Daniele


==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==
Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


On Wed, Jan 15, 2014 at 12:01 PM, Andrea Peri <aperi2007 at gmail.com> wrote:

> Hi,
>
> I have a lot of huge tiff not-gereferenced raster.
> These tiff are all with 4 bands (RGBA) and 10 pyramids inside.
>
> I need to remove the piramids and retrieve a new tiff version without the
> piramids and with only 3 bands (RGB).
>
> Usually this work is do using imagemagick or vips, but I like to try to
> use the gdal-translate to do this.
> But Im not sure , because the tiff are not georef and also I'm not sure if
> gdal is capable to read a 4 pyramid tiff and generate a 3 not-piramid tiff.
>
> Thx for every hints.
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140115/ee7b248f/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Jan 15 04:43:37 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 15 Jan 2014 13:43:37 +0100
Subject: [gdal-dev] Motion: Adopt RFC45 : GDAL datasets and raster bands
	as virtual memory mapping
In-Reply-To: <201401121403.54513.even.rouault@mines-paris.org>
References: <201401121403.54513.even.rouault@mines-paris.org>
Message-ID: <201401151343.37824.even.rouault@mines-paris.org>

Le dimanche 12 janvier 2014 14:03:54, Even Rouault a ?crit :
> Motion : I move to adopt RFC 45 (GDAL datasets and raster bands as virtual
> memory mapping)
> 
>     http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem
> 
> Starting with my +1

I declare this motion passed with support from FrankW and myself.

> 
> Best regards,
> 
> Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aperi2007 at gmail.com  Wed Jan 15 07:26:50 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 15 Jan 2014 16:26:50 +0100
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
In-Reply-To: <CAJaHrDyMgPCxebvDuKOGXUz0MbL3yRbsi1SXjfsLh=7M_4nL_g@mail.gmail.com>
References: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
	<CAJaHrDyMgPCxebvDuKOGXUz0MbL3yRbsi1SXjfsLh=7M_4nL_g@mail.gmail.com>
Message-ID: <CABqTJk_LyXKPh++rPQV6W5vRVf=H8wbe47Q=3wBGxSSFTBjXhA@mail.gmail.com>

Hi,
thx for hints.

I'm not sure that the gdal overview are the same of pyramid tiff.
My tiff are all multipages.

There is same information about the overview of gdal ?




2014/1/15 Daniele Romagnoli <daniele.romagnoli at geo-solutions.it>

> Hi Andrea,
> you may consider using
> "gdal_translate -b 1 -b 2 -b 3 inputTiff outputTiff"
>
> I assume you are referring to overviews, right?
> In that case, gdal_translate won't copy overviews so you are lucky :)
>
> You may also consider adding tiling with "-co TILED=YES" to the previous
> command:
> "gdal_translate -b 1 -b 2 -b 3 -co TILED=YES inputTiff outputTiff"
>
> Default tiling is 256x256; you may specify different one with -co
> BLOCKXSIZE=nnn -co BLOCKYSIZE=mmm
>
> Hope this helps.
> Cheers,
> Daniele
>
>
> ==
> Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
> information.
> ==
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax:      +39 0584 1660272
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
>
> On Wed, Jan 15, 2014 at 12:01 PM, Andrea Peri <aperi2007 at gmail.com> wrote:
>
>> Hi,
>>
>> I have a lot of huge tiff not-gereferenced raster.
>> These tiff are all with 4 bands (RGBA) and 10 pyramids inside.
>>
>> I need to remove the piramids and retrieve a new tiff version without the
>> piramids and with only 3 bands (RGB).
>>
>> Usually this work is do using imagemagick or vips, but I like to try to
>> use the gdal-translate to do this.
>> But Im not sure , because the tiff are not georef and also I'm not sure if
>> gdal is capable to read a 4 pyramid tiff and generate a 3 not-piramid
>> tiff.
>>
>> Thx for every hints.
>>
>> --
>> -----------------
>> Andrea Peri
>> . . . . . . . . .
>> qwerty ?????
>> -----------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140115/184de0de/attachment.html>

From daniele.romagnoli at geo-solutions.it  Wed Jan 15 07:30:47 2014
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed, 15 Jan 2014 16:30:47 +0100
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
In-Reply-To: <CABqTJk_LyXKPh++rPQV6W5vRVf=H8wbe47Q=3wBGxSSFTBjXhA@mail.gmail.com>
References: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
	<CAJaHrDyMgPCxebvDuKOGXUz0MbL3yRbsi1SXjfsLh=7M_4nL_g@mail.gmail.com>
	<CABqTJk_LyXKPh++rPQV6W5vRVf=H8wbe47Q=3wBGxSSFTBjXhA@mail.gmail.com>
Message-ID: <CAJaHrDw8z0Do6j70o_atbjpsdfmELS2rBacBUD-qFC134WmPjA@mail.gmail.com>

Hi,
you could try a gdalinfo on one of your tiff and see the output.
Usually overviews are saved into different pages.

Cheers,
Daniele

==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==
Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


On Wed, Jan 15, 2014 at 4:26 PM, Andrea Peri <aperi2007 at gmail.com> wrote:

> Hi,
> thx for hints.
>
> I'm not sure that the gdal overview are the same of pyramid tiff.
> My tiff are all multipages.
>
> There is same information about the overview of gdal ?
>
>
>
>
> 2014/1/15 Daniele Romagnoli <daniele.romagnoli at geo-solutions.it>
>
>> Hi Andrea,
>> you may consider using
>> "gdal_translate -b 1 -b 2 -b 3 inputTiff outputTiff"
>>
>> I assume you are referring to overviews, right?
>> In that case, gdal_translate won't copy overviews so you are lucky :)
>>
>> You may also consider adding tiling with "-co TILED=YES" to the previous
>> command:
>> "gdal_translate -b 1 -b 2 -b 3 -co TILED=YES inputTiff outputTiff"
>>
>> Default tiling is 256x256; you may specify different one with -co
>> BLOCKXSIZE=nnn -co BLOCKYSIZE=mmm
>>
>> Hope this helps.
>> Cheers,
>> Daniele
>>
>>
>> ==
>> Our support, Your Success! Visit http://opensdi.geo-solutions.it for
>> more information.
>> ==
>> Ing. Daniele Romagnoli
>> Senior Software Engineer
>>
>> GeoSolutions S.A.S.
>> Via Poggio alle Viti 1187
>> 55054  Massarosa (LU)
>> Italy
>> phone: +39 0584 962313
>> fax:      +39 0584 1660272
>>
>> http://www.geo-solutions.it
>> http://twitter.com/geosolutions_it
>>
>> -------------------------------------------------------
>>
>>
>> On Wed, Jan 15, 2014 at 12:01 PM, Andrea Peri <aperi2007 at gmail.com>wrote:
>>
>>> Hi,
>>>
>>> I have a lot of huge tiff not-gereferenced raster.
>>> These tiff are all with 4 bands (RGBA) and 10 pyramids inside.
>>>
>>> I need to remove the piramids and retrieve a new tiff version without
>>> the piramids and with only 3 bands (RGB).
>>>
>>> Usually this work is do using imagemagick or vips, but I like to try to
>>> use the gdal-translate to do this.
>>> But Im not sure , because the tiff are not georef and also I'm not sure
>>> if
>>> gdal is capable to read a 4 pyramid tiff and generate a 3 not-piramid
>>> tiff.
>>>
>>> Thx for every hints.
>>>
>>> --
>>> -----------------
>>> Andrea Peri
>>> . . . . . . . . .
>>> qwerty ?????
>>> -----------------
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140115/f26e9763/attachment.html>

From afalciano at yahoo.it  Wed Jan 15 08:04:55 2014
From: afalciano at yahoo.it (Antonio Falciano)
Date: Wed, 15 Jan 2014 17:04:55 +0100
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
In-Reply-To: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
References: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
Message-ID: <52D6B1A7.1030006@yahoo.it>

Il 15/01/2014 12:01, Andrea Peri ha scritto:
> Hi,
>
> I have a lot of huge tiff not-gereferenced raster.
> These tiff are all with 4 bands (RGBA) and 10 pyramids inside.
>
> I need to remove the piramids and retrieve a new tiff version without
> the piramids and with only 3 bands (RGB).
>
> Usually this work is do using imagemagick or vips, but I like to try to
> use the gdal-translate to do this.
> But Im not sure , because the tiff are not georef and also I'm not sure if
> gdal is capable to read a 4 pyramid tiff and generate a 3 not-piramid tiff.

Andrea,
you can do it with gdal_translate and its creation options [1].
You can try with something like this:

gdal_translate -co COPY_SRC_OVERVIEWS=NO -co ALPHA=NO -co TFW=YES -co 
PROFILE=BASELINE input.tif output.tif

Hope this helps.

Cheers,
Antonio

[1] http://www.gdal.org/frmt_gtiff.html

-- 
Antonio Falciano
http://www.linkedin.com/in/antoniofalciano

From rajjad at gmail.com  Wed Jan 15 10:38:38 2014
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed, 15 Jan 2014 23:38:38 +0500
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
In-Reply-To: <52D6B1A7.1030006@yahoo.it>
References: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
	<52D6B1A7.1030006@yahoo.it>
Message-ID: <CADz3VuVKzDY0SZvwQ2BjrkZLrqPhvFvotZZwtA8bJOazkah6kw@mail.gmail.com>

gdaladdo -clean

Did u try this?
On Jan 15, 2014 9:11 PM, "Antonio Falciano" <afalciano at yahoo.it> wrote:

> Il 15/01/2014 12:01, Andrea Peri ha scritto:
>
>> Hi,
>>
>> I have a lot of huge tiff not-gereferenced raster.
>> These tiff are all with 4 bands (RGBA) and 10 pyramids inside.
>>
>> I need to remove the piramids and retrieve a new tiff version without
>> the piramids and with only 3 bands (RGB).
>>
>> Usually this work is do using imagemagick or vips, but I like to try to
>> use the gdal-translate to do this.
>> But Im not sure , because the tiff are not georef and also I'm not sure if
>> gdal is capable to read a 4 pyramid tiff and generate a 3 not-piramid
>> tiff.
>>
>
> Andrea,
> you can do it with gdal_translate and its creation options [1].
> You can try with something like this:
>
> gdal_translate -co COPY_SRC_OVERVIEWS=NO -co ALPHA=NO -co TFW=YES -co
> PROFILE=BASELINE input.tif output.tif
>
> Hope this helps.
>
> Cheers,
> Antonio
>
> [1] http://www.gdal.org/frmt_gtiff.html
>
> --
> Antonio Falciano
> http://www.linkedin.com/in/antoniofalciano
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140115/3d1d3f8d/attachment-0001.html>

From dmorissette at mapgears.com  Wed Jan 15 12:12:45 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 15 Jan 2014 15:12:45 -0500
Subject: [gdal-dev] Motion: Adopt RFC45 : GDAL datasets and raster bands
 as virtual memory mapping
In-Reply-To: <201401151343.37824.even.rouault@mines-paris.org>
References: <201401121403.54513.even.rouault@mines-paris.org>
	<201401151343.37824.even.rouault@mines-paris.org>
Message-ID: <52D6EBBD.6050201@mapgears.com>

Belated +1.

Daniel


On 14-01-15 7:43 AM, Even Rouault wrote:
> Le dimanche 12 janvier 2014 14:03:54, Even Rouault a ?crit :
>> Motion : I move to adopt RFC 45 (GDAL datasets and raster bands as virtual
>> memory mapping)
>>
>>      http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem
>>
>> Starting with my +1
>
> I declare this motion passed with support from FrankW and myself.
>
>>
>> Best regards,
>>
>> Even
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From jukka.rahkonen at mmmtike.fi  Wed Jan 15 14:18:21 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 15 Jan 2014 22:18:21 +0000 (UTC)
Subject: [gdal-dev] Motion: Adopt RFC45 : GDAL datasets and raster bands
	as virtual memory mapping
References: <201401121403.54513.even.rouault@mines-paris.org>
	<201401151343.37824.even.rouault@mines-paris.org>
	<52D6EBBD.6050201@mapgears.com>
Message-ID: <loom.20140115T231752-357@post.gmane.org>

Daniel Morissette <dmorissette <at> mapgears.com> writes:

> 
> Belated +1.
> 
> Daniel

Same here
+1

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Wed Jan 15 14:33:13 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 15 Jan 2014 22:33:13 +0000 (UTC)
Subject: [gdal-dev] How remove the piramids from TIFF non-georef
References: <CABqTJk-T-39Pnep+634nW1UvGfAKqF3bDwytP6UnFAzrm8E=Bg@mail.gmail.com>
	<52D6B1A7.1030006@yahoo.it>
	<CADz3VuVKzDY0SZvwQ2BjrkZLrqPhvFvotZZwtA8bJOazkah6kw@mail.gmail.com>
Message-ID: <loom.20140115T231922-298@post.gmane.org>

Imran Rajjad <rajjad <at> gmail.com> writes:

> 
> 
>  gdaladdo -clean
> Did u try this?

This command hides the overviews but if I have understood it right it does
not make the file any smaller. And user would also select only 3 bands out
of 4. Gdaladdo -clean command may be good when experimenting with different
gdaladdo settings but if size matters it is better to rewrite the file with
gdal_translate. It might be good to mention the behaviour somewhere in the
documentation:
-clean:
    (available from GDAL 1.7.0) remove all overviews. Fast but does not make
files smaller because image data it not rewritten.

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Thu Jan 16 05:52:37 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 16 Jan 2014 13:52:37 +0000 (UTC)
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
Message-ID: <loom.20140116T143730-979@post.gmane.org>

Hi,

What could be the reason that Windows 64-bit gdal_translate makes many times
bigger jpeg compressed tiff files than 32-bit build? I have not made a
thorough analysis but I feel that this happens only with B/W images.

My command is simple
gdal_translate -of GTiff -co tiled=yes -co compress=jpeg 
FLPIS_K003412.jp2 64bit.tif

Samples can be downloaded from

http://latuviitta.org/downloads/FLPIS_K003412.jp2 (18 MB, original JP2)
http://latuviitta.org/downloads/gdal_translate_32bit.TIF (9.6 MB)
http://latuviitta.org/downloads/gdal_translate_64bit.tif (57 MB)

Builds I use are specially made by Tamas and I can ask for details if
someone gives a hint about what to ask.

-Jukka Rahkonen-




From ivan at sanchezortega.es  Thu Jan 16 06:11:25 2014
From: ivan at sanchezortega.es (=?ISO-8859-1?Q?Iv=E1n_S=E1nchez?= Ortega)
Date: Thu, 16 Jan 2014 15:11:25 +0100
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
In-Reply-To: <loom.20140116T143730-979@post.gmane.org>
References: <loom.20140116T143730-979@post.gmane.org>
Message-ID: <2499823.bYFSPbqKE4@hiigara>

El Jueves, 16 de enero de 2014 13:52:37 Jukka Rahkonen escribi?:
> What could be the reason that Windows 64-bit gdal_translate makes many times
> bigger jpeg compressed tiff files than 32-bit build? I have not made a
> thorough analysis but I feel that this happens only with B/W images.

> Builds I use are specially made by Tamas and I can ask for details if
> someone gives a hint about what to ask.

Can you run both images through ImageMagick's 'identify' utility? It should be 
able to report detailed information about bit depth and other image internals.


-- 
Iv?n S?nchez Ortega <ivan at sanchezortega.es>


From even.rouault at mines-paris.org  Thu Jan 16 06:20:17 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 16 Jan 2014 15:20:17 +0100
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
In-Reply-To: <loom.20140116T143730-979@post.gmane.org>
References: <loom.20140116T143730-979@post.gmane.org>
Message-ID: <1389882017.52d7eaa10f294@imp.free.fr>

Hi Jukka,

> Hi,
>
> What could be the reason that Windows 64-bit gdal_translate makes many times
> bigger jpeg compressed tiff files than 32-bit build? I have not made a
> thorough analysis but I feel that this happens only with B/W images.
>
> My command is simple
> gdal_translate -of GTiff -co tiled=yes -co compress=jpeg
> FLPIS_K003412.jp2 64bit.tif
>
> Samples can be downloaded from
>
> http://latuviitta.org/downloads/FLPIS_K003412.jp2 (18 MB, original JP2)
> http://latuviitta.org/downloads/gdal_translate_32bit.TIF (9.6 MB)
> http://latuviitta.org/downloads/gdal_translate_64bit.tif (57 MB)

--> ouch ! I fail to see any reason why the on-disk format would be affected by
32 vs 64 bit. You could run "tiffdump" on the generated images to see the offset
and size of the tiles. What is surprising is that the 32 bit JPEG TIF is smaller
than the original JP2. Does it display correctly ?
Does gdalinfo -checksum return the same values ?

>
> Builds I use are specially made by Tamas and I can ask for details if
> someone gives a hint about what to ask.

--> Do you mean custom builds, and not the standard ones available on
gisinternals ? If they are custom, do you reproduce with the standard ones ?

>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From jukka.rahkonen at mmmtike.fi  Thu Jan 16 06:42:49 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 16 Jan 2014 14:42:49 +0000 (UTC)
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
References: <loom.20140116T143730-979@post.gmane.org>
	<1389882017.52d7eaa10f294@imp.free.fr>
Message-ID: <loom.20140116T152347-874@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> --> ouch ! I fail to see any reason why the on-disk format would be
affected by
> 32 vs 64 bit. You could run "tiffdump" on the generated images to see the
offset
> and size of the tiles. What is surprising is that the 32 bit JPEG TIF is
smaller
> than the original JP2. Does it display correctly ?
> Does gdalinfo -checksum return the same values ?

Ok, the images in this B/W set converted with 64-bit binaries are not only
big but they are totally broken. I will need to check the B/W images I have
processed so far with these binaries and see if they are all broken. I know
that colour images are good and I believe that I have also checked a bunch
of B/W images. This certain B/W batch is compressed into JPEG2000 a long
time ago with another program and settings than I use nowadays so it can be
that other images are not affected. I will tell more after doing some
inspections.

Originals are compressed as lossless JPEG2000 so it is normal that a jpeg
compressed tiff is much smaller.

> >
> > Builds I use are specially made by Tamas and I can ask for details if
> > someone gives a hint about what to ask.
> 
> --> Do you mean custom builds, and not the standard ones available on
> gisinternals ? If they are custom, do you reproduce with the standard ones ?

Yes, a custom build with Kakadu v. 7.3.2 plugin. I will do more tests
tomorrow once this batch of 3500 images is converted.

-Jukka-




From ivan at sanchezortega.es  Thu Jan 16 06:43:54 2014
From: ivan at sanchezortega.es (=?ISO-8859-1?Q?Iv=E1n_S=E1nchez?= Ortega)
Date: Thu, 16 Jan 2014 15:43:54 +0100
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
In-Reply-To: <loom.20140116T143730-979@post.gmane.org>
References: <loom.20140116T143730-979@post.gmane.org>
Message-ID: <2615382.Vmr9dB8kq6@hiigara>

El Jueves, 16 de enero de 2014 13:52:37 Jukka Rahkonen escribi?:
> Samples can be downloaded from
> 
> http://latuviitta.org/downloads/FLPIS_K003412.jp2 (18 MB, original JP2)
> http://latuviitta.org/downloads/gdal_translate_32bit.TIF (9.6 MB)
> http://latuviitta.org/downloads/gdal_translate_64bit.tif (57 MB)

> Builds I use are specially made by Tamas and I can ask for details if
> someone gives a hint about what to ask.

I've had a look at the files. With both gimp and imagemagick, I see the 64-bit 
image garbled, with obvious compression artifacts.

For example, when I run 'identify gdal_*', I get:

Image: gdal_translate_32bit.TIF
  Channel statistics:
    Gray:
      min: 0 (0)
      max: 239 (0.937255)
      mean: 91.8711 (0.360279)
      standard deviation: 23.4782 (0.0920712)
      kurtosis: 7.73665
      skewness: 1.39568

Image: gdal_translate_64bit.tif
  Channel statistics:
    Gray:
      min: 0 (0)
      max: 255 (1)
      mean: 117.769 (0.461839)
      standard deviation: 112.01 (0.439255)
      kurtosis: -1.78098
      skewness: 0.182984

Which means both images are greatly different.


I'd say your 64-bit build has some weird, nasty bug.


-- 
Iv?n S?nchez Ortega <ivan at sanchezortega.es>


From even.rouault at mines-paris.org  Thu Jan 16 06:57:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 16 Jan 2014 15:57:10 +0100
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
In-Reply-To: <loom.20140116T152347-874@post.gmane.org>
References: <loom.20140116T143730-979@post.gmane.org>
	<1389882017.52d7eaa10f294@imp.free.fr>
	<loom.20140116T152347-874@post.gmane.org>
Message-ID: <1389884230.52d7f34651322@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
> > --> ouch ! I fail to see any reason why the on-disk format would be
> affected by
> > 32 vs 64 bit. You could run "tiffdump" on the generated images to see the
> offset
> > and size of the tiles. What is surprising is that the 32 bit JPEG TIF is
> smaller
> > than the original JP2. Does it display correctly ?
> > Does gdalinfo -checksum return the same values ?
>
> Ok, the images in this B/W set converted with 64-bit binaries are not only
> big but they are totally broken. I will need to check the B/W images I have
> processed so far with these binaries and see if they are all broken. I know
> that colour images are good and I believe that I have also checked a bunch
> of B/W images. This certain B/W batch is compressed into JPEG2000 a long
> time ago with another program and settings than I use nowadays so it can be
> that other images are not affected. I will tell more after doing some
> inspections.
>
> Originals are compressed as lossless JPEG2000 so it is normal that a jpeg
> compressed tiff is much smaller.

What should be determined is if the problem is on the read side (JPEG 2000
decoding) or at the write side (JPEG in TIFF compression). Perhaps you could
translate to uncompressed TIFF. My feeling is that the problem must be on the
read side and that you get more or less random images at each read attempt. You
could also run gdalinfo -checksum on the JPEG2000 image itself and see if it
returns a constant value.



From jluis at ualg.pt  Thu Jan 16 07:10:02 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 16 Jan 2014 15:10:02 +0000
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
In-Reply-To: <1389884230.52d7f34651322@imp.free.fr>
References: <loom.20140116T143730-979@post.gmane.org>
	<1389882017.52d7eaa10f294@imp.free.fr>
	<loom.20140116T152347-874@post.gmane.org>
	<1389884230.52d7f34651322@imp.free.fr>
Message-ID: <52D7F64A.6060206@ualg.pt>

I converted with my own gdal64 build (not sure what driver was used to 
read the .jp2 file) and the file is fine, with a size very close to the 
32 bit one.

16-01-2014  15:03         9.824.833 g64bit.tif
16-01-2014  15:00         9.843.738 gdal_translate_32bit.TIF

Joaquim

> Selon Jukka Rahkonen<jukka.rahkonen at mmmtike.fi>:
>
>> Even Rouault<even.rouault<at>  mines-paris.org>  writes:
>>
>>> -->  ouch ! I fail to see any reason why the on-disk format would be
>> affected by
>>> 32 vs 64 bit. You could run "tiffdump" on the generated images to see the
>> offset
>>> and size of the tiles. What is surprising is that the 32 bit JPEG TIF is
>> smaller
>>> than the original JP2. Does it display correctly ?
>>> Does gdalinfo -checksum return the same values ?
>> Ok, the images in this B/W set converted with 64-bit binaries are not only
>> big but they are totally broken. I will need to check the B/W images I have
>> processed so far with these binaries and see if they are all broken. I know
>> that colour images are good and I believe that I have also checked a bunch
>> of B/W images. This certain B/W batch is compressed into JPEG2000 a long
>> time ago with another program and settings than I use nowadays so it can be
>> that other images are not affected. I will tell more after doing some
>> inspections.
>>
>> Originals are compressed as lossless JPEG2000 so it is normal that a jpeg
>> compressed tiff is much smaller.
> What should be determined is if the problem is on the read side (JPEG 2000
> decoding) or at the write side (JPEG in TIFF compression). Perhaps you could
> translate to uncompressed TIFF. My feeling is that the problem must be on the
> read side and that you get more or less random images at each read attempt. You
> could also run gdalinfo -checksum on the JPEG2000 image itself and see if it
> returns a constant value.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From dmburgess at linktechs.net  Thu Jan 16 08:53:02 2014
From: dmburgess at linktechs.net (Dennis Burgess)
Date: Thu, 16 Jan 2014 10:53:02 -0600
Subject: [gdal-dev] python script not working
Message-ID: <50710E9A7E64454C974049FC998EB655018DE319@03-exchange.lti.local>

Runing a command to do a gdal_polygonize, the gdal_translate and org2org
functions work just ifne, just not poloygoize..??

 

os.system('gdal_polygonize tmp.4.vrt -f KML tmp.5.kml')

 

I get :

 

python: can't open file '\bin\gdal_polygonize.py';: error 2, no such
file or directory

 

any thoughts, windows gdal using osgeo4w

 

Dennis Burgess, 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140116/3e2d568d/attachment.html>

From sean at mapbox.com  Thu Jan 16 08:57:45 2014
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 16 Jan 2014 09:57:45 -0700
Subject: [gdal-dev] python script not working
In-Reply-To: <50710E9A7E64454C974049FC998EB655018DE319@03-exchange.lti.local>
References: <50710E9A7E64454C974049FC998EB655018DE319@03-exchange.lti.local>
Message-ID: <52D80F89.7080004@mapbox.com>

Dennis,

You either have to know the absolute path to gdal_polygonize.py or have 
its location on your system path to make that work. And I also recommend
the subprocess module instead of the deprecated os.system.

     import subprocess

     subprocess.check_output(
         ['/PATH/TO/gdal_polygonize.py',
          '-f KML',
          'tmp.4.vrt',
          'tmp.5.kml'])

The gdal_polygonize.py script is a very thin wrapper around the 
gdal.Polygonize() function. Shelling out from a Python script to another 
Python script is kind of round-a-bout ? you could just grab the 
gdal_polygonize.py code and reuse it in your Python program.

On 1/16/14, 9:53 AM, Dennis Burgess wrote:
> Runing a command to do a gdal_polygonize, the gdal_translate and org2org
> functions work just ifne, just not poloygoize..??
>
> os.system('gdal_polygonize tmp.4.vrt -f KML tmp.5.kml')
>
> I get :
>
> python: can't open file '\bin\gdal_polygonize.py';: error 2, no such
> file or directory
>
> any thoughts, windows gdal using osgeo4w
>
> *_Dennis Burgess,_**//*


-- 
Sean Gillies
sean at mapbox.com

From jukka.rahkonen at mmmtike.fi  Thu Jan 16 12:16:17 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 16 Jan 2014 20:16:17 +0000 (UTC)
Subject: [gdal-dev] Bigger file size from 64-bit than 32-bit
References: <loom.20140116T143730-979@post.gmane.org>
	<1389882017.52d7eaa10f294@imp.free.fr>
	<loom.20140116T152347-874@post.gmane.org>
	<1389884230.52d7f34651322@imp.free.fr>
Message-ID: <loom.20140116T200947-821@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> What should be determined is if the problem is on the read side (JPEG 2000
> decoding) or at the write side (JPEG in TIFF compression). Perhaps you could
> translate to uncompressed TIFF. My feeling is that the problem must be on the
> read side and that you get more or less random images at each read
attempt. You
> could also run gdalinfo -checksum on the JPEG2000 image itself and see if it
> returns a constant value.

Hi,

I have studied the situation a bit and the reason is clearly somehow related
to Kakadu.

- My problematic originals are compressed with Kakadu SDK 3.4. Tamas
compiled me also the native Kakadu demo programs and if I decompress images
with 64-bit kdu_expand v. 7.3.2 the result is corrupted just like the ones
that come from gdal_translate. 
- If I convert the originals with the same 64-bit GDAL but with JP2ECW (SDK
3.x) the result is good.
- Then the odd thing, if I decompress images with kdu_expand v. 6.0, 32-bit,
and compress again into lossless JPEG2000 also with v. 6.0 Kakadu, these new
images can be converted with 64-bit GDAL and v. 7.3.2 Kakadu driver just fine.

Conclusion: Kakadu 7.3.2, 64-bit, has troubles at least with some images
which are compressed with ancient Kakadu 3.4. Same images which are
compressed by using identical options but with Kakadu v. 6.0 do no suffer
from these problems with Kakadu 7.3.2, 64-bit.

I guess I will write a note to Kakadu forum. 

-Jukka Rahkonen-


I used Kakadu binaries of version 6.0 and uncompressed some originals with
kdu_expand and recompressed them with kdu_compress v. 6.0. Then I used my
original command with 64-bit GDAL and Kakadu 7.3.2 plugin and the result was
perfect.




From l.hilger at ku.de  Thu Jan 16 13:06:01 2014
From: l.hilger at ku.de (ludwig.hilger)
Date: Thu, 16 Jan 2014 13:06:01 -0800 (PST)
Subject: [gdal-dev] Decimal places of output in cs2cs
Message-ID: <1389906361089-5098497.post@n6.nabble.com>

hello everybody,

I know that this is probably a ridiculously simple question, but I a rather
new to the syntax and have tried this for about 2 hours now. I want to
reproject decimal coordinates in epsg 4326 to 25832 and I want the output
values to have three decimal places instead of 2. I have tried the following
lines and none of them worked:

set source=+proj=longlat +datum=WGS84 +no_defs
set target=+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+no_defs

cs2cs %source% +to %target% < input_4326.xyz > output_25832.xyz -f "%.3f"
cs2cs %source% +to %target% < input_4326.xyz > output_25832.xyz -f %.3f
cs2cs %source% +to %target% < input_4326.xyz > output_25832.xyz -f '%.3f'
cs2cs -f '%.3f' %source% +to %target% < input_4326.xyz > output_25832.xyz
cs2cs -f %.3f %source% +to %target% < input_4326.xyz > output_25832.xyz
cs2cs -f "%.3f" %source% +to %target% < input_4326.xyz > output_25832.xyz

would be more than happy if anyone could point out my error...

regards,
Ludwig



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Decimal-places-of-output-in-cs2cs-tp5098497.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From afalciano at yahoo.it  Fri Jan 17 00:22:50 2014
From: afalciano at yahoo.it (Antonio Falciano)
Date: Fri, 17 Jan 2014 09:22:50 +0100
Subject: [gdal-dev] Decimal places of output in cs2cs
In-Reply-To: <1389906361089-5098497.post@n6.nabble.com>
References: <1389906361089-5098497.post@n6.nabble.com>
Message-ID: <52D8E85A.5000200@yahoo.it>

Il 16/01/2014 22:06, ludwig.hilger ha scritto:
> hello everybody,
>
> I know that this is probably a ridiculously simple question, but I a rather
> new to the syntax and have tried this for about 2 hours now. I want to
> reproject decimal coordinates in epsg 4326 to 25832 and I want the output
> values to have three decimal places instead of 2. I have tried the following
> lines and none of them worked:
>
> set source=+proj=longlat +datum=WGS84 +no_defs
> set target=+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +no_defs
>
> cs2cs %source% +to %target% < input_4326.xyz > output_25832.xyz -f "%.3f"
> cs2cs %source% +to %target% < input_4326.xyz > output_25832.xyz -f %.3f
> cs2cs %source% +to %target% < input_4326.xyz > output_25832.xyz -f '%.3f'
> cs2cs -f '%.3f' %source% +to %target% < input_4326.xyz > output_25832.xyz
> cs2cs -f %.3f %source% +to %target% < input_4326.xyz > output_25832.xyz
> cs2cs -f "%.3f" %source% +to %target% < input_4326.xyz > output_25832.xyz
>
> would be more than happy if anyone could point out my error...

Hi Ludwig,
if all these commands are in a batch file, have you tried to escape the 
% sign in
the format option: -f "%%.3f"?

Cheers,
Antonio

-- 
Antonio Falciano
http://www.linkedin.com/in/antoniofalciano

From IMCEAEX-_O=PIONEER+20VALLEY+20PLANNING+20COMMISION_OU=PVPC_CN=RECIPIENTS_CN=ASIMMONS at PVPC.ORG  Fri Jan 17 06:56:30 2014
From: IMCEAEX-_O=PIONEER+20VALLEY+20PLANNING+20COMMISION_OU=PVPC_CN=RECIPIENTS_CN=ASIMMONS at PVPC.ORG (Arielle Simmons)
Date: Fri, 17 Jan 2014 14:56:30 -0000
Subject: [gdal-dev] Problems with Python/subprocess.call/gdalwarp
Message-ID: <47B75B820F667842BE64F154A5832C7E01B97419@exch02.pvpc.com>

I am trying to use a subprocess.call method in python to use 'gdalwarp'
on a .img file. So far everything that I've put in my script runs
fine...but the gdalwarp. There is no error...so I assume I am somehow
not understanding the gdalwarp statement as well as I thought I might.

 

Anybody see what I am missing (or can direct me to a strong reference
regarding gdalwarp)?

 

 

Enclosing full code in .txt. 

 

 

 

 

       subprocess.call('gdalwarp %s %s -t_srs "+proj=lcc
+lat_1=42.68333333333333 +lat_2=41.71666666666667 +lat_0=41 +lon_0=-71.5
+x_0=200000 +y_0=750000 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"'
%(raster, 'new_'+raster))

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140117/d8c847a2/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: gdalwarp.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140117/d8c847a2/attachment.txt>

From osgeo at gzmarketing.com  Fri Jan 17 07:34:46 2014
From: osgeo at gzmarketing.com (Metzen)
Date: Fri, 17 Jan 2014 07:34:46 -0800 (PST)
Subject: [gdal-dev] gdal_translate - Generate Full 1 deg x 1 deg tile from
	partial data
Message-ID: <1389972886680-5098660.post@n6.nabble.com>

I'm using gdalbuildvrt to combine a bunch of .dem files into a larger .vrt
file, then using gdal_translate to slice this into 1 deg x 1 deg tiles.

gdalbuildvrt index.vrt *.dem

gdal_translate -of USGSDEM -projwin -88.0001042 52.0001042 -86.9998958
50.9998958 index.vrt output/N52W088.dem

The problem comes when I need a 1 x 1 tile of an area that only has partial
data.  Then I get "Computed -srcwin falls outside raster size".

Is there a way I can pad the .vrt with null or 0values so the index.vrt
raster size is larger and I can export a 1 x 1 tile?  The area I need to pad
is all ocean, so 0 or null would be fine.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-translate-Generate-Full-1-deg-x-1-deg-tile-from-partial-data-tp5098660.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kyle at pobox.com  Fri Jan 17 07:42:57 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 17 Jan 2014 08:42:57 -0700
Subject: [gdal-dev] gdal_translate - Generate Full 1 deg x 1 deg tile
 from partial data
In-Reply-To: <1389972886680-5098660.post@n6.nabble.com>
References: <1389972886680-5098660.post@n6.nabble.com>
Message-ID: <CAJ0mEz3c2epqo0FSk340-r_-1pmk0bkxzPD0ZQN=ccBb8nKX8g@mail.gmail.com>

What version of gdal are you using?  Starting with 1.10, it
gdal_translate should do what you want.  Specifying -eco or -epo makes
it an error:

-epo: (Error when Partially Outside)(GDAL >= 1.10) If this option is
set, -srcwin or -projwin values that falls partially outside the
source raster extent will be considered as an error. The default
behaviour starting with GDAL 1.10 is to accept such requests, when
they were considered as an error before.

-eco: (Error when Completely Outside)(GDAL >= 1.10) Same as -epo,
except that the criterion for erroring out is when the request falls
completely outside the source raster extent.


http://www.gdal.org/gdal_translate.html

On Fri, Jan 17, 2014 at 8:34 AM, Metzen <osgeo at gzmarketing.com> wrote:
> I'm using gdalbuildvrt to combine a bunch of .dem files into a larger .vrt
> file, then using gdal_translate to slice this into 1 deg x 1 deg tiles.
>
> gdalbuildvrt index.vrt *.dem
>
> gdal_translate -of USGSDEM -projwin -88.0001042 52.0001042 -86.9998958
> 50.9998958 index.vrt output/N52W088.dem
>
> The problem comes when I need a 1 x 1 tile of an area that only has partial
> data.  Then I get "Computed -srcwin falls outside raster size".
>
> Is there a way I can pad the .vrt with null or 0values so the index.vrt
> raster size is larger and I can export a 1 x 1 tile?  The area I need to pad
> is all ocean, so 0 or null would be fine.
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-translate-Generate-Full-1-deg-x-1-deg-tile-from-partial-data-tp5098660.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From bobc at bluemarblegeo.com  Fri Jan 17 08:08:38 2014
From: bobc at bluemarblegeo.com (Bob Cave)
Date: Fri, 17 Jan 2014 08:08:38 -0800 (PST)
Subject: [gdal-dev] Reading CurveString and CurvePolygon Geometries from FGF
	Data
Message-ID: <1389974918061-5098667.post@n6.nabble.com>

Hello,

I am using the OGR Spatialite driver to read a database that has FGF
geometries.  Some of the geometries are CurvePolygons, which are not
currently supported in OGRGeometryFactory::createFromFgfInternal() as of
GDAL 1.10.1.

Is support for FGF CurveString and CurvePolygon geometries currently in
development?

Thank you.

Cheers,

Bob



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Reading-CurveString-and-CurvePolygon-Geometries-from-FGF-Data-tp5098667.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From sean at mapbox.com  Fri Jan 17 08:27:23 2014
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 17 Jan 2014 09:27:23 -0700
Subject: [gdal-dev] Problems with Python/subprocess.call/gdalwarp
In-Reply-To: <47B75B820F667842BE64F154A5832C7E01B97419@exch02.pvpc.com>
References: <47B75B820F667842BE64F154A5832C7E01B97419@exch02.pvpc.com>
Message-ID: <52D959EB.7060509@mapbox.com>

Arielle,

Try

     output = subprocess.check_output('gdalwarp ...')
     print output

to see what gdalwarp might be complaining about in the child process.

See also 
http://docs.python.org/2/library/subprocess.html#subprocess.check_output.


On 5/31/13, 10:36 AM, Arielle Simmons wrote:
> I am trying to use a subprocess.call method in python to use ?gdalwarp?
> on a .img file. So far everything that I?ve put in my script runs
> fine?but the gdalwarp. There is no error?so I assume I am somehow not
> understanding the gdalwarp statement as well as I thought I might.
>
> Anybody see what I am missing (or can direct me to a strong reference
> regarding gdalwarp)?
>
> Enclosing full code in .txt.
>
>         subprocess.call('gdalwarp %s %s -t_srs "+proj=lcc
> +lat_1=42.68333333333333 +lat_2=41.71666666666667 +lat_0=41 +lon_0=-71.5
> +x_0=200000 +y_0=750000 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"'
> %(raster, 'new_'+raster))
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Sean Gillies
sean at mapbox.com

From osgeo at gzmarketing.com  Fri Jan 17 08:33:57 2014
From: osgeo at gzmarketing.com (Metzen)
Date: Fri, 17 Jan 2014 08:33:57 -0800 (PST)
Subject: [gdal-dev] gdal_translate - Generate Full 1 deg x 1 deg tile
 from partial data
In-Reply-To: <1389972886680-5098660.post@n6.nabble.com>
References: <1389972886680-5098660.post@n6.nabble.com>
Message-ID: <1389976437824-5098672.post@n6.nabble.com>

Thanks, that did the trick perfectly.  I'd say that is a very good change for
gdal_translate.

I'm still on 1.9.2 on my server, but was able to find a more recent binary
for my Mac.


> What version of gdal are you using?  Starting with 1.10, it
> gdal_translate should do what you want.  Specifying -eco or -epo makes
> it an error:
> 
> -epo: (Error when Partially Outside)(GDAL >= 1.10) If this option is
> set, -srcwin or -projwin values that falls partially outside the
> source raster extent will be considered as an error. The default
> behaviour starting with GDAL 1.10 is to accept such requests, when
> they were considered as an error before.
> 
> -eco: (Error when Completely Outside)(GDAL >= 1.10) Same as -epo,
> except that the criterion for erroring out is when the request falls
> completely outside the source raster extent.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-translate-Generate-Full-1-deg-x-1-deg-tile-from-partial-data-tp5098660p5098672.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Jan 17 11:33:21 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 17 Jan 2014 20:33:21 +0100
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <CAMH-RbYEiRH-aV79GAZ-NczMu7yA5OrJnhUdsuz-fE0W+suKEw@mail.gmail.com>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<CAMH-RbY4nDsJzOO99R04aZtWPfCH_we7wsvaxnq33Fg5eCXZ2g@mail.gmail.com>
	<CAMH-RbYEiRH-aV79GAZ-NczMu7yA5OrJnhUdsuz-fE0W+suKEw@mail.gmail.com>
Message-ID: <201401172033.22239.even.rouault@mines-paris.org>

Le vendredi 17 janvier 2014 01:21:14, Sam Gillingham a ?crit :
> Hi Even, Frank,
> 
> I'm interested to hear if you have an opinion on this. Is this behaviour by
> design or a bug in the HFA driver?
> 
> I'm happy to supply a patch to the HFA driver if you think this is sensible
> solution. I just want to make sure I'm not missing anything...

RAT is not my cup of tea, so I'm not sure to have a particularly enlightened 
opinion on this. It is a bit annoying that the HFA behaviour goes against the 
documentation. AFAIK nobody has ever complained about this, so this might be 
just a sign that RAT is not widely used. Provided that it is documented in 
MIGRATION_GUIDE.TXT, I think it would be OK to make the driver behaviour 
consistant with the doc.
Actually, I'm just thinking to the following point : if the color table in IMG 
is represented as a float, could values that are not of the form N / 255 be 
possible (when generated by Imagine) ?  If so, we would loose information by 
casting to int. It is a bit strange they have selected a floating point 
serialization.
Another possibility would be to indicate the validity range of the attribute, 
e.g 0-255 or 0-1, so that applications can normalize to [0,255] if they need 
to.

> 
> Thanks for your time,
> 
> Sam.
> 
> ---------- Forwarded message ----------
> From: Sam Gillingham <gillingham.sam at gmail.com>
> Date: 14 January 2014 08:51
> Subject: Re: [gdal-dev] Color Columns in Raster Attribute Tables
> To: Ivan Lucena <lucena_ivan at hotmail.com>
> Cc: gdal dev <gdal-dev at lists.osgeo.org>
> 
> 
> Hi Ivan,
> 
> Unfortunately the color table API does not support the functionality that
> was added to the RAT API in RFC40. As a result, dealing with large color
> tables can be problematic.
> 
> Yes the HFA driver does report colors correctly as 0-255 with the color
> table API and one solution could be to add RFC40 functionality to the color
> table API. However, it does seem that it does make sense to be able to
> manipulate colors from the RAT API for e.g. setting colors based on the
> value(s) found in other attribute columns easily.
> 
> I accept that no consistency can be expected for user defined columns
> (usage == GFU_Generic) but I would have though applications could depend on
> the color columns since they are marked as such by their usage. In fact the
> documentation for the usage values (
> http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1) does
> specify them to be 0-255 so this seems to have been the intention and is
> maybe just a bug in the HFA driver.
> 
> Sam.
> 
> On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> > Hi Sam,
> > 
> > In GDAL color table is supported by the GDALColorTable
> > http://gdal.org/classGDALColorTable.html not by GDALRasterAttributeTable
> > http://gdal.org/classGDALRasterAttributeTable.html.
> > 
> > The GDALColorTable is a little bit limited but it is pretty much
> > consistent across all the drivers that support it. For example, when you
> > say that HFA reports RGBA with values from 0..1 as RAT it probably
> > reports the correct 0..255 as GDALGetColorTable or it doesn't report it
> > at all, because of the GDALColorTable limitation, like data type or
> > number of colors.
> > 
> > But IMHO, there is no reason to expect consistency on the representation
> > of color table from a driver RAT. An RAT could be user defined or
> > generated by some driver or application.
> > 
> > What you are seem is that some drivers are using, or maybe abusing, the
> > freedom format of RAT to report information than can be understood by
> > some particular application or software (mea culpa on one of those).
> > 
> > Best regards,
> > 
> > Ivan
> > 
> > ------------------------------
> > Date: Mon, 13 Jan 2014 13:06:01 +1300
> > From: gillingham.sam at gmail.com
> > To: gdal-dev at lists.osgeo.org
> > Subject: [gdal-dev] Color Columns in Raster Attribute Tables
> > 
> > 
> > Hi List,
> > 
> > There appears to be an inconsistency in the way color columns are handled
> > within Raster Attribute Tables (RATs) by different drivers. Color columns
> > are currently identified by their 'usage' setting - GFU_Red, GFU_Green,
> > GFU_Blue and GFU_Alpha. The HFA driver presents color columns as doubles
> > between 0 and 1 as this is how they are stored in the file. The IDRISI
> > driver presents them as integers between 0 and 255 like the Color Table
> > API. Code that uses color columns from the RAT API currently needs to
> > know which driver it is using, defeating one of the aims of GDAL.
> > 
> > I propose that the RAT API be defined so that color columns always appear
> > as Integer 0-255 no matter what type and range they are stored as. This
> > would make the RAT API consistent with the Color Table API and would mean
> > a change to the HFA driver
> > 
> > Another option is that flags are added to the RAT SetValue, GetValueAs*
> > and ValuesIO calls to specify the conversion to/from the native type.
> > This seems a bigger change.
> > 
> > Any thoughts?
> > 
> > Sam.
> > 
> > _______________________________________________ gdal-dev mailing list
> > gdal-dev at lists.osgeo.org http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From scott at agi.com  Fri Jan 17 12:28:35 2014
From: scott at agi.com (Reynolds, Scott)
Date: Fri, 17 Jan 2014 20:28:35 +0000
Subject: [gdal-dev] gdalinfo coordinates problem?
Message-ID: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>

Hi,

I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/.  Gdalinfo is reporting the corner coordinates to be in the vicinity of  91 degrees 31 minutes west longitude which should be more like 75 degrees 36 minutes west longitude.  Can someone explain what is happening here?

Thanks,
Scott
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140117/389682f8/attachment.html>

From bishop.dev at gmail.com  Fri Jan 17 13:52:16 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sat, 18 Jan 2014 01:52:16 +0400
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
Message-ID: <52D9A610.2080401@gmail.com>

Hi,

yes, this is a bug. The same error on last trunk gdal and also QGIS.
I think the problem is in reprojection (lost linear units). The file 
have linear unit as us_survey_feet (0.304801).
It's interesting does gdal support such projection? May be is is 
unsupported.

Best regards,
     Dmitry

18.01.2014 0:28, Reynolds, Scott ?????:
>
> Hi,
>
> I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from 
> ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/. 
> Gdalinfo is reporting the corner coordinates to be in the vicinity of 
>  91 degrees 31 minutes west longitude which should be more like 75 
> degrees 36 minutes west longitude.  Can someone explain what is 
> happening here?
>
> Thanks,
>
> Scott
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/4ecaaebd/attachment.html>

From bishop.dev at gmail.com  Fri Jan 17 13:52:27 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sat, 18 Jan 2014 01:52:27 +0400
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
Message-ID: <52D9A61B.5050705@gmail.com>

Hi,

yes, this is a bug. The same error on last trunk gdal and also QGIS.
I think the problem is in reprojection (lost linear units). The file 
have linear unit as us_survey_feet (0.304801).
It's interesting does gdal support such projection? May be is is 
unsupported.

Best regards,
     Dmitry

18.01.2014 0:28, Reynolds, Scott ?????:
>
> Hi,
>
> I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from 
> ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/. 
> Gdalinfo is reporting the corner coordinates to be in the vicinity of 
>  91 degrees 31 minutes west longitude which should be more like 75 
> degrees 36 minutes west longitude.  Can someone explain what is 
> happening here?
>
> Thanks,
>
> Scott
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/1ac42172/attachment.html>

From even.rouault at mines-paris.org  Fri Jan 17 14:37:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 17 Jan 2014 23:37:28 +0100
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
Message-ID: <201401172337.28602.even.rouault@mines-paris.org>

Le vendredi 17 janvier 2014 21:28:35, Reynolds, Scott a ?crit :
> Hi,
> 
> I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from
> ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/. 
> Gdalinfo is reporting the corner coordinates to be in the vicinity of  91
> degrees 31 minutes west longitude which should be more like 75 degrees 36
> minutes west longitude.  Can someone explain what is happening here?

GeoTIFF support for non-meter linear units has been a major source of 
headaches in GDAL / libgeotiff. People will appreciate looking at 
frmts/gtiff/gt_wkt_srs.cpp

I'm not sure if that GeoTIFF file is correct or not regarding the values of the 
false easting/northing with respect to the GeoTIFF spec (many in the wild are 
broken), but when looking at what happens, I noticed that a transformation 
from meters to feet happened twice. The attached patch fixes that (and the 
corner coordinates are around 75?), but I'm not sure if it is completely 
correct in all cases.

You should likely create a GDAL Trac ticket with your report and the patch, 
but I'm not sure who will dare hurting his head against this wall...

Even

> 
> Thanks,
> Scott

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: attempt_fix_linear_units.patch
Type: text/x-patch
Size: 2764 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140117/2dc50e67/attachment.bin>

From even.rouault at mines-paris.org  Fri Jan 17 14:47:19 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 17 Jan 2014 23:47:19 +0100
Subject: [gdal-dev] Reading CurveString and CurvePolygon Geometries from
	FGF Data
In-Reply-To: <1389974918061-5098667.post@n6.nabble.com>
References: <1389974918061-5098667.post@n6.nabble.com>
Message-ID: <201401172347.19465.even.rouault@mines-paris.org>

Le vendredi 17 janvier 2014 17:08:38, Bob Cave a ?crit :
> Hello,
> 
> I am using the OGR Spatialite driver to read a database that has FGF
> geometries.  Some of the geometries are CurvePolygons, which are not
> currently supported in OGRGeometryFactory::createFromFgfInternal() as of
> GDAL 1.10.1.
> 
> Is support for FGF CurveString and CurvePolygon geometries currently in
> development?

Not that I'm aware of.

There's not yet support in OGR core for curve geometries, so that would be a 
preliminary step to implement support for the FGF curve geometries. This is 
something that could be part of the big changes for OGR 2.0 
(http://trac.osgeo.org/gdal/wiki/GDAL20Changes). A few years ago I had started 
preliminary work in a sandbox but didn't pursue.

Another annoying thing for implementation is that the link in 
http://trac.osgeo.org/fdo/wiki/FDORfc16 to the FGF binary spec seems to have 
disappeared.

Do people actually use FDO SQLite databases.... ?


Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From j.l.h.hartmann at uva.nl  Sat Jan 18 03:48:23 2014
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 18 Jan 2014 12:48:23 +0100
Subject: [gdal-dev] gdal_grid: number of data points to use
In-Reply-To: <1389269081.52ce905939039@imp.free.fr>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<1389269081.52ce905939039@imp.free.fr>
Message-ID: <52DA6A07.7080909@uva.nl>

gdal_grid has the option to set a minimum and maximum number of data 
points to use for interpolation. How are these data points selected from 
the total number of points? Are they always the nearest points to the 
grid-point that is interpolated?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/9c2a59ef/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Jan 18 04:50:15 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 18 Jan 2014 13:50:15 +0100
Subject: [gdal-dev] gdal_grid: number of data points to use
In-Reply-To: <52DA6A07.7080909@uva.nl>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<1389269081.52ce905939039@imp.free.fr> <52DA6A07.7080909@uva.nl>
Message-ID: <201401181350.15736.even.rouault@mines-paris.org>

Le samedi 18 janvier 2014 12:48:23, Jan Hartmann a ?crit :
> gdal_grid has the option to set a minimum and maximum number of data
> points to use for interpolation. How are these data points selected from
> the total number of points? Are they always the nearest points to the
> grid-point that is interpolated?

Jan,

if less than min_points match the selection of the algorithm, the nodata value 
will be returned
and when iterating over source points (in the order they are present in the 
source OGR layer), the algorithm will stop as soon as max_points is reached. 
The selected points are consequently not necessarily the nearest points, but 
they will be contained in the search ellipse (since max_points is only taken 
into account if you define radius1 and radius2)

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Sat Jan 18 06:18:20 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sat, 18 Jan 2014 09:18:20 -0500
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <201401172033.22239.even.rouault@mines-paris.org>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>,
	<CAMH-RbY4nDsJzOO99R04aZtWPfCH_we7wsvaxnq33Fg5eCXZ2g@mail.gmail.com>,
	<CAMH-RbYEiRH-aV79GAZ-NczMu7yA5OrJnhUdsuz-fE0W+suKEw@mail.gmail.com>,
	<201401172033.22239.even.rouault@mines-paris.org>
Message-ID: <BLU173-W1DF2BC53629EBFFF3EF6790BB0@phx.gbl>

Hi Even,

In a parallel and almost not related topic, I am getting users complains that gdal_translate crashes or waste their time and storage space with some ridiculous RAT that doesn't make any sense for their use case. Maybe we should have a -noRAT option on gdal_translate. I could also add an "RAT2VAT=NO" create-option on GeoRaster driver. 

Any better idea?

Regards,

Ivan

> From: even.rouault at mines-paris.org
> To: gillingham.sam at gmail.com
> Date: Fri, 17 Jan 2014 20:33:21 +0100
> CC: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> 
> Le vendredi 17 janvier 2014 01:21:14, Sam Gillingham a ?crit :
> > Hi Even, Frank,
> > 
> > I'm interested to hear if you have an opinion on this. Is this behaviour by
> > design or a bug in the HFA driver?
> > 
> > I'm happy to supply a patch to the HFA driver if you think this is sensible
> > solution. I just want to make sure I'm not missing anything...
> 
> RAT is not my cup of tea, so I'm not sure to have a particularly enlightened 
> opinion on this. It is a bit annoying that the HFA behaviour goes against the 
> documentation. AFAIK nobody has ever complained about this, so this might be 
> just a sign that RAT is not widely used. Provided that it is documented in 
> MIGRATION_GUIDE.TXT, I think it would be OK to make the driver behaviour 
> consistant with the doc.
> Actually, I'm just thinking to the following point : if the color table in IMG 
> is represented as a float, could values that are not of the form N / 255 be 
> possible (when generated by Imagine) ?  If so, we would loose information by 
> casting to int. It is a bit strange they have selected a floating point 
> serialization.
> Another possibility would be to indicate the validity range of the attribute, 
> e.g 0-255 or 0-1, so that applications can normalize to [0,255] if they need 
> to.
> 
> > 
> > Thanks for your time,
> > 
> > Sam.
> > 
> > ---------- Forwarded message ----------
> > From: Sam Gillingham <gillingham.sam at gmail.com>
> > Date: 14 January 2014 08:51
> > Subject: Re: [gdal-dev] Color Columns in Raster Attribute Tables
> > To: Ivan Lucena <lucena_ivan at hotmail.com>
> > Cc: gdal dev <gdal-dev at lists.osgeo.org>
> > 
> > 
> > Hi Ivan,
> > 
> > Unfortunately the color table API does not support the functionality that
> > was added to the RAT API in RFC40. As a result, dealing with large color
> > tables can be problematic.
> > 
> > Yes the HFA driver does report colors correctly as 0-255 with the color
> > table API and one solution could be to add RFC40 functionality to the color
> > table API. However, it does seem that it does make sense to be able to
> > manipulate colors from the RAT API for e.g. setting colors based on the
> > value(s) found in other attribute columns easily.
> > 
> > I accept that no consistency can be expected for user defined columns
> > (usage == GFU_Generic) but I would have though applications could depend on
> > the color columns since they are marked as such by their usage. In fact the
> > documentation for the usage values (
> > http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1) does
> > specify them to be 0-255 so this seems to have been the intention and is
> > maybe just a bug in the HFA driver.
> > 
> > Sam.
> > 
> > On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> > > Hi Sam,
> > > 
> > > In GDAL color table is supported by the GDALColorTable
> > > http://gdal.org/classGDALColorTable.html not by GDALRasterAttributeTable
> > > http://gdal.org/classGDALRasterAttributeTable.html.
> > > 
> > > The GDALColorTable is a little bit limited but it is pretty much
> > > consistent across all the drivers that support it. For example, when you
> > > say that HFA reports RGBA with values from 0..1 as RAT it probably
> > > reports the correct 0..255 as GDALGetColorTable or it doesn't report it
> > > at all, because of the GDALColorTable limitation, like data type or
> > > number of colors.
> > > 
> > > But IMHO, there is no reason to expect consistency on the representation
> > > of color table from a driver RAT. An RAT could be user defined or
> > > generated by some driver or application.
> > > 
> > > What you are seem is that some drivers are using, or maybe abusing, the
> > > freedom format of RAT to report information than can be understood by
> > > some particular application or software (mea culpa on one of those).
> > > 
> > > Best regards,
> > > 
> > > Ivan
> > > 
> > > ------------------------------
> > > Date: Mon, 13 Jan 2014 13:06:01 +1300
> > > From: gillingham.sam at gmail.com
> > > To: gdal-dev at lists.osgeo.org
> > > Subject: [gdal-dev] Color Columns in Raster Attribute Tables
> > > 
> > > 
> > > Hi List,
> > > 
> > > There appears to be an inconsistency in the way color columns are handled
> > > within Raster Attribute Tables (RATs) by different drivers. Color columns
> > > are currently identified by their 'usage' setting - GFU_Red, GFU_Green,
> > > GFU_Blue and GFU_Alpha. The HFA driver presents color columns as doubles
> > > between 0 and 1 as this is how they are stored in the file. The IDRISI
> > > driver presents them as integers between 0 and 255 like the Color Table
> > > API. Code that uses color columns from the RAT API currently needs to
> > > know which driver it is using, defeating one of the aims of GDAL.
> > > 
> > > I propose that the RAT API be defined so that color columns always appear
> > > as Integer 0-255 no matter what type and range they are stored as. This
> > > would make the RAT API consistent with the Color Table API and would mean
> > > a change to the HFA driver
> > > 
> > > Another option is that flags are added to the RAT SetValue, GetValueAs*
> > > and ValuesIO calls to specify the conversion to/from the native type.
> > > This seems a bigger change.
> > > 
> > > Any thoughts?
> > > 
> > > Sam.
> > > 
> > > _______________________________________________ gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/d85734c7/attachment.html>

From even.rouault at mines-paris.org  Sat Jan 18 06:22:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 18 Jan 2014 15:22:43 +0100
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <BLU173-W1DF2BC53629EBFFF3EF6790BB0@phx.gbl>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<201401172033.22239.even.rouault@mines-paris.org>
	<BLU173-W1DF2BC53629EBFFF3EF6790BB0@phx.gbl>
Message-ID: <201401181522.43820.even.rouault@mines-paris.org>

Le samedi 18 janvier 2014 15:18:20, Ivan Lucena a ?crit :
> Hi Even,
> 
> In a parallel and almost not related topic, I am getting users complains
> that gdal_translate crashes

Well, that should be debugged and fixed... You don't have more details ?

> or waste their time and storage space with
> some ridiculous RAT that doesn't make any sense for their use case. Maybe
> we should have a -noRAT option on gdal_translate. I could also add an
> "RAT2VAT=NO" create-option on GeoRaster driver.

Yes, -norat option in gdal_translate makes sense.

> 
> Any better idea?
> 
> Regards,
> 
> Ivan
> 
> > From: even.rouault at mines-paris.org
> > To: gillingham.sam at gmail.com
> > Date: Fri, 17 Jan 2014 20:33:21 +0100
> > CC: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> > 
> > Le vendredi 17 janvier 2014 01:21:14, Sam Gillingham a ?crit :
> > > Hi Even, Frank,
> > > 
> > > I'm interested to hear if you have an opinion on this. Is this
> > > behaviour by design or a bug in the HFA driver?
> > > 
> > > I'm happy to supply a patch to the HFA driver if you think this is
> > > sensible solution. I just want to make sure I'm not missing
> > > anything...
> > 
> > RAT is not my cup of tea, so I'm not sure to have a particularly
> > enlightened opinion on this. It is a bit annoying that the HFA behaviour
> > goes against the documentation. AFAIK nobody has ever complained about
> > this, so this might be just a sign that RAT is not widely used. Provided
> > that it is documented in MIGRATION_GUIDE.TXT, I think it would be OK to
> > make the driver behaviour consistant with the doc.
> > Actually, I'm just thinking to the following point : if the color table
> > in IMG is represented as a float, could values that are not of the form
> > N / 255 be possible (when generated by Imagine) ?  If so, we would loose
> > information by casting to int. It is a bit strange they have selected a
> > floating point serialization.
> > Another possibility would be to indicate the validity range of the
> > attribute, e.g 0-255 or 0-1, so that applications can normalize to
> > [0,255] if they need to.
> > 
> > > Thanks for your time,
> > > 
> > > Sam.
> > > 
> > > ---------- Forwarded message ----------
> > > From: Sam Gillingham <gillingham.sam at gmail.com>
> > > Date: 14 January 2014 08:51
> > > Subject: Re: [gdal-dev] Color Columns in Raster Attribute Tables
> > > To: Ivan Lucena <lucena_ivan at hotmail.com>
> > > Cc: gdal dev <gdal-dev at lists.osgeo.org>
> > > 
> > > 
> > > Hi Ivan,
> > > 
> > > Unfortunately the color table API does not support the functionality
> > > that was added to the RAT API in RFC40. As a result, dealing with
> > > large color tables can be problematic.
> > > 
> > > Yes the HFA driver does report colors correctly as 0-255 with the color
> > > table API and one solution could be to add RFC40 functionality to the
> > > color table API. However, it does seem that it does make sense to be
> > > able to manipulate colors from the RAT API for e.g. setting colors
> > > based on the value(s) found in other attribute columns easily.
> > > 
> > > I accept that no consistency can be expected for user defined columns
> > > (usage == GFU_Generic) but I would have though applications could
> > > depend on the color columns since they are marked as such by their
> > > usage. In fact the documentation for the usage values (
> > > http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1)
> > > does specify them to be 0-255 so this seems to have been the intention
> > > and is maybe just a bug in the HFA driver.
> > > 
> > > Sam.
> > > 
> > > On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> > > > Hi Sam,
> > > > 
> > > > In GDAL color table is supported by the GDALColorTable
> > > > http://gdal.org/classGDALColorTable.html not by
> > > > GDALRasterAttributeTable
> > > > http://gdal.org/classGDALRasterAttributeTable.html.
> > > > 
> > > > The GDALColorTable is a little bit limited but it is pretty much
> > > > consistent across all the drivers that support it. For example, when
> > > > you say that HFA reports RGBA with values from 0..1 as RAT it
> > > > probably reports the correct 0..255 as GDALGetColorTable or it
> > > > doesn't report it at all, because of the GDALColorTable limitation,
> > > > like data type or number of colors.
> > > > 
> > > > But IMHO, there is no reason to expect consistency on the
> > > > representation of color table from a driver RAT. An RAT could be
> > > > user defined or generated by some driver or application.
> > > > 
> > > > What you are seem is that some drivers are using, or maybe abusing,
> > > > the freedom format of RAT to report information than can be
> > > > understood by some particular application or software (mea culpa on
> > > > one of those).
> > > > 
> > > > Best regards,
> > > > 
> > > > Ivan
> > > > 
> > > > ------------------------------
> > > > Date: Mon, 13 Jan 2014 13:06:01 +1300
> > > > From: gillingham.sam at gmail.com
> > > > To: gdal-dev at lists.osgeo.org
> > > > Subject: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > 
> > > > 
> > > > Hi List,
> > > > 
> > > > There appears to be an inconsistency in the way color columns are
> > > > handled within Raster Attribute Tables (RATs) by different drivers.
> > > > Color columns are currently identified by their 'usage' setting -
> > > > GFU_Red, GFU_Green, GFU_Blue and GFU_Alpha. The HFA driver presents
> > > > color columns as doubles between 0 and 1 as this is how they are
> > > > stored in the file. The IDRISI driver presents them as integers
> > > > between 0 and 255 like the Color Table API. Code that uses color
> > > > columns from the RAT API currently needs to know which driver it is
> > > > using, defeating one of the aims of GDAL.
> > > > 
> > > > I propose that the RAT API be defined so that color columns always
> > > > appear as Integer 0-255 no matter what type and range they are
> > > > stored as. This would make the RAT API consistent with the Color
> > > > Table API and would mean a change to the HFA driver
> > > > 
> > > > Another option is that flags are added to the RAT SetValue,
> > > > GetValueAs* and ValuesIO calls to specify the conversion to/from the
> > > > native type. This seems a bigger change.
> > > > 
> > > > Any thoughts?
> > > > 
> > > > Sam.
> > > > 
> > > > _______________________________________________ gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Sat Jan 18 06:40:15 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sat, 18 Jan 2014 09:40:15 -0500
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <201401181522.43820.even.rouault@mines-paris.org>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<201401172033.22239.even.rouault@mines-paris.org>
	<BLU173-W1DF2BC53629EBFFF3EF6790BB0@phx.gbl>,
	<201401181522.43820.even.rouault@mines-paris.org>
Message-ID: <BLU173-W2253378D4D064381ED06FF90BB0@phx.gbl>



> From: even.rouault at mines-paris.org
> To: lucena_ivan at hotmail.com
> Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> Date: Sat, 18 Jan 2014 15:22:43 +0100
> CC: gillingham.sam at gmail.com; gdal-dev at lists.osgeo.org
> 
> Le samedi 18 janvier 2014 15:18:20, Ivan Lucena a ?crit :
> > Hi Even,
> > 
> > In a parallel and almost not related topic, I am getting users complains
> > that gdal_translate crashes
> 
> Well, that should be debugged and fixed... You don't have more details ?

I waiting to get a sample file to debug it, but even when it doesn't crash they need to manage what to do with the useless VAT table on the database. 

> 
> > or waste their time and storage space with
> > some ridiculous RAT that doesn't make any sense for their use case. Maybe
> > we should have a -noRAT option on gdal_translate. I could also add an
> > "RAT2VAT=NO" create-option on GeoRaster driver.
> 
> Yes, -norat option in gdal_translate makes sense.

IMHO, I don't think we should go to big deal of RPC discussion and voting to add that option to gdal_translate.

One work around that they are using is to run gdal_translate -of VRT, since VRT drivers does not support RAT, they can use it as input instead of the HFA .img files. They could just add -outsize 100% 100%, I guess. That would also do the trick without create VRT files.

But gdal_translate is not the only way to run the CreateCopy of a driver, so I think I am going to add my create-option anyway.

Regards,

Ivan

> 
> > 
> > Any better idea?
> > 
> > Regards,
> > 
> > Ivan
> > 
> > > From: even.rouault at mines-paris.org
> > > To: gillingham.sam at gmail.com
> > > Date: Fri, 17 Jan 2014 20:33:21 +0100
> > > CC: gdal-dev at lists.osgeo.org
> > > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> > > 
> > > Le vendredi 17 janvier 2014 01:21:14, Sam Gillingham a ?crit :
> > > > Hi Even, Frank,
> > > > 
> > > > I'm interested to hear if you have an opinion on this. Is this
> > > > behaviour by design or a bug in the HFA driver?
> > > > 
> > > > I'm happy to supply a patch to the HFA driver if you think this is
> > > > sensible solution. I just want to make sure I'm not missing
> > > > anything...
> > > 
> > > RAT is not my cup of tea, so I'm not sure to have a particularly
> > > enlightened opinion on this. It is a bit annoying that the HFA behaviour
> > > goes against the documentation. AFAIK nobody has ever complained about
> > > this, so this might be just a sign that RAT is not widely used. Provided
> > > that it is documented in MIGRATION_GUIDE.TXT, I think it would be OK to
> > > make the driver behaviour consistant with the doc.
> > > Actually, I'm just thinking to the following point : if the color table
> > > in IMG is represented as a float, could values that are not of the form
> > > N / 255 be possible (when generated by Imagine) ?  If so, we would loose
> > > information by casting to int. It is a bit strange they have selected a
> > > floating point serialization.
> > > Another possibility would be to indicate the validity range of the
> > > attribute, e.g 0-255 or 0-1, so that applications can normalize to
> > > [0,255] if they need to.
> > > 
> > > > Thanks for your time,
> > > > 
> > > > Sam.
> > > > 
> > > > ---------- Forwarded message ----------
> > > > From: Sam Gillingham <gillingham.sam at gmail.com>
> > > > Date: 14 January 2014 08:51
> > > > Subject: Re: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > To: Ivan Lucena <lucena_ivan at hotmail.com>
> > > > Cc: gdal dev <gdal-dev at lists.osgeo.org>
> > > > 
> > > > 
> > > > Hi Ivan,
> > > > 
> > > > Unfortunately the color table API does not support the functionality
> > > > that was added to the RAT API in RFC40. As a result, dealing with
> > > > large color tables can be problematic.
> > > > 
> > > > Yes the HFA driver does report colors correctly as 0-255 with the color
> > > > table API and one solution could be to add RFC40 functionality to the
> > > > color table API. However, it does seem that it does make sense to be
> > > > able to manipulate colors from the RAT API for e.g. setting colors
> > > > based on the value(s) found in other attribute columns easily.
> > > > 
> > > > I accept that no consistency can be expected for user defined columns
> > > > (usage == GFU_Generic) but I would have though applications could
> > > > depend on the color columns since they are marked as such by their
> > > > usage. In fact the documentation for the usage values (
> > > > http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1)
> > > > does specify them to be 0-255 so this seems to have been the intention
> > > > and is maybe just a bug in the HFA driver.
> > > > 
> > > > Sam.
> > > > 
> > > > On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
> > > > > Hi Sam,
> > > > > 
> > > > > In GDAL color table is supported by the GDALColorTable
> > > > > http://gdal.org/classGDALColorTable.html not by
> > > > > GDALRasterAttributeTable
> > > > > http://gdal.org/classGDALRasterAttributeTable.html.
> > > > > 
> > > > > The GDALColorTable is a little bit limited but it is pretty much
> > > > > consistent across all the drivers that support it. For example, when
> > > > > you say that HFA reports RGBA with values from 0..1 as RAT it
> > > > > probably reports the correct 0..255 as GDALGetColorTable or it
> > > > > doesn't report it at all, because of the GDALColorTable limitation,
> > > > > like data type or number of colors.
> > > > > 
> > > > > But IMHO, there is no reason to expect consistency on the
> > > > > representation of color table from a driver RAT. An RAT could be
> > > > > user defined or generated by some driver or application.
> > > > > 
> > > > > What you are seem is that some drivers are using, or maybe abusing,
> > > > > the freedom format of RAT to report information than can be
> > > > > understood by some particular application or software (mea culpa on
> > > > > one of those).
> > > > > 
> > > > > Best regards,
> > > > > 
> > > > > Ivan
> > > > > 
> > > > > ------------------------------
> > > > > Date: Mon, 13 Jan 2014 13:06:01 +1300
> > > > > From: gillingham.sam at gmail.com
> > > > > To: gdal-dev at lists.osgeo.org
> > > > > Subject: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > > 
> > > > > 
> > > > > Hi List,
> > > > > 
> > > > > There appears to be an inconsistency in the way color columns are
> > > > > handled within Raster Attribute Tables (RATs) by different drivers.
> > > > > Color columns are currently identified by their 'usage' setting -
> > > > > GFU_Red, GFU_Green, GFU_Blue and GFU_Alpha. The HFA driver presents
> > > > > color columns as doubles between 0 and 1 as this is how they are
> > > > > stored in the file. The IDRISI driver presents them as integers
> > > > > between 0 and 255 like the Color Table API. Code that uses color
> > > > > columns from the RAT API currently needs to know which driver it is
> > > > > using, defeating one of the aims of GDAL.
> > > > > 
> > > > > I propose that the RAT API be defined so that color columns always
> > > > > appear as Integer 0-255 no matter what type and range they are
> > > > > stored as. This would make the RAT API consistent with the Color
> > > > > Table API and would mean a change to the HFA driver
> > > > > 
> > > > > Another option is that flags are added to the RAT SetValue,
> > > > > GetValueAs* and ValuesIO calls to specify the conversion to/from the
> > > > > native type. This seems a bigger change.
> > > > > 
> > > > > Any thoughts?
> > > > > 
> > > > > Sam.
> > > > > 
> > > > > _______________________________________________ gdal-dev mailing list
> > > > > gdal-dev at lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/eb2e1a91/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Jan 18 07:23:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 18 Jan 2014 16:23:10 +0100
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <BLU173-W2253378D4D064381ED06FF90BB0@phx.gbl>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<201401181522.43820.even.rouault@mines-paris.org>
	<BLU173-W2253378D4D064381ED06FF90BB0@phx.gbl>
Message-ID: <201401181623.10720.even.rouault@mines-paris.org>

Le samedi 18 janvier 2014 15:40:15, Ivan Lucena a ?crit :
> > From: even.rouault at mines-paris.org
> > To: lucena_ivan at hotmail.com
> > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> > Date: Sat, 18 Jan 2014 15:22:43 +0100
> > CC: gillingham.sam at gmail.com; gdal-dev at lists.osgeo.org
> > 
> > Le samedi 18 janvier 2014 15:18:20, Ivan Lucena a ?crit :
> > > Hi Even,
> > > 
> > > In a parallel and almost not related topic, I am getting users
> > > complains that gdal_translate crashes
> > 
> > Well, that should be debugged and fixed... You don't have more details ?
> 
> I waiting to get a sample file to debug it, but even when it doesn't crash
> they need to manage what to do with the useless VAT table on the database.
> 
> > > or waste their time and storage space with
> > > some ridiculous RAT that doesn't make any sense for their use case.
> > > Maybe we should have a -noRAT option on gdal_translate. I could also
> > > add an "RAT2VAT=NO" create-option on GeoRaster driver.
> > 
> > Yes, -norat option in gdal_translate makes sense.
> 
> IMHO, I don't think we should go to big deal of RPC discussion and voting
> to add that option to gdal_translate.

I've just added the option. Yes that's not worth a RFC !

> 
> One work around that they are using is to run gdal_translate -of VRT, since
> VRT drivers does not support RAT, they can use it as input instead of the
> HFA .img files. They could just add -outsize 100% 100%, I guess. That
> would also do the trick without create VRT files.
> 
> But gdal_translate is not the only way to run the CreateCopy of a driver,
> so I think I am going to add my create-option anyway.
> 
> Regards,
> 
> Ivan
> 
> > > Any better idea?
> > > 
> > > Regards,
> > > 
> > > Ivan
> > > 
> > > > From: even.rouault at mines-paris.org
> > > > To: gillingham.sam at gmail.com
> > > > Date: Fri, 17 Jan 2014 20:33:21 +0100
> > > > CC: gdal-dev at lists.osgeo.org
> > > > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute
> > > > Tables
> > > > 
> > > > Le vendredi 17 janvier 2014 01:21:14, Sam Gillingham a ?crit :
> > > > > Hi Even, Frank,
> > > > > 
> > > > > I'm interested to hear if you have an opinion on this. Is this
> > > > > behaviour by design or a bug in the HFA driver?
> > > > > 
> > > > > I'm happy to supply a patch to the HFA driver if you think this is
> > > > > sensible solution. I just want to make sure I'm not missing
> > > > > anything...
> > > > 
> > > > RAT is not my cup of tea, so I'm not sure to have a particularly
> > > > enlightened opinion on this. It is a bit annoying that the HFA
> > > > behaviour goes against the documentation. AFAIK nobody has ever
> > > > complained about this, so this might be just a sign that RAT is not
> > > > widely used. Provided that it is documented in MIGRATION_GUIDE.TXT,
> > > > I think it would be OK to make the driver behaviour consistant with
> > > > the doc.
> > > > Actually, I'm just thinking to the following point : if the color
> > > > table in IMG is represented as a float, could values that are not of
> > > > the form N / 255 be possible (when generated by Imagine) ?  If so,
> > > > we would loose information by casting to int. It is a bit strange
> > > > they have selected a floating point serialization.
> > > > Another possibility would be to indicate the validity range of the
> > > > attribute, e.g 0-255 or 0-1, so that applications can normalize to
> > > > [0,255] if they need to.
> > > > 
> > > > > Thanks for your time,
> > > > > 
> > > > > Sam.
> > > > > 
> > > > > ---------- Forwarded message ----------
> > > > > From: Sam Gillingham <gillingham.sam at gmail.com>
> > > > > Date: 14 January 2014 08:51
> > > > > Subject: Re: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > > To: Ivan Lucena <lucena_ivan at hotmail.com>
> > > > > Cc: gdal dev <gdal-dev at lists.osgeo.org>
> > > > > 
> > > > > 
> > > > > Hi Ivan,
> > > > > 
> > > > > Unfortunately the color table API does not support the
> > > > > functionality that was added to the RAT API in RFC40. As a result,
> > > > > dealing with large color tables can be problematic.
> > > > > 
> > > > > Yes the HFA driver does report colors correctly as 0-255 with the
> > > > > color table API and one solution could be to add RFC40
> > > > > functionality to the color table API. However, it does seem that
> > > > > it does make sense to be able to manipulate colors from the RAT
> > > > > API for e.g. setting colors based on the value(s) found in other
> > > > > attribute columns easily.
> > > > > 
> > > > > I accept that no consistency can be expected for user defined
> > > > > columns (usage == GFU_Generic) but I would have though
> > > > > applications could depend on the color columns since they are
> > > > > marked as such by their usage. In fact the documentation for the
> > > > > usage values (
> > > > > http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1)
> > > > > does specify them to be 0-255 so this seems to have been the
> > > > > intention and is maybe just a bug in the HFA driver.
> > > > > 
> > > > > Sam.
> > > > > 
> > > > > On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> 
wrote:
> > > > > > Hi Sam,
> > > > > > 
> > > > > > In GDAL color table is supported by the GDALColorTable
> > > > > > http://gdal.org/classGDALColorTable.html not by
> > > > > > GDALRasterAttributeTable
> > > > > > http://gdal.org/classGDALRasterAttributeTable.html.
> > > > > > 
> > > > > > The GDALColorTable is a little bit limited but it is pretty much
> > > > > > consistent across all the drivers that support it. For example,
> > > > > > when you say that HFA reports RGBA with values from 0..1 as RAT
> > > > > > it probably reports the correct 0..255 as GDALGetColorTable or
> > > > > > it doesn't report it at all, because of the GDALColorTable
> > > > > > limitation, like data type or number of colors.
> > > > > > 
> > > > > > But IMHO, there is no reason to expect consistency on the
> > > > > > representation of color table from a driver RAT. An RAT could be
> > > > > > user defined or generated by some driver or application.
> > > > > > 
> > > > > > What you are seem is that some drivers are using, or maybe
> > > > > > abusing, the freedom format of RAT to report information than
> > > > > > can be understood by some particular application or software
> > > > > > (mea culpa on one of those).
> > > > > > 
> > > > > > Best regards,
> > > > > > 
> > > > > > Ivan
> > > > > > 
> > > > > > ------------------------------
> > > > > > Date: Mon, 13 Jan 2014 13:06:01 +1300
> > > > > > From: gillingham.sam at gmail.com
> > > > > > To: gdal-dev at lists.osgeo.org
> > > > > > Subject: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > > > 
> > > > > > 
> > > > > > Hi List,
> > > > > > 
> > > > > > There appears to be an inconsistency in the way color columns are
> > > > > > handled within Raster Attribute Tables (RATs) by different
> > > > > > drivers. Color columns are currently identified by their 'usage'
> > > > > > setting - GFU_Red, GFU_Green, GFU_Blue and GFU_Alpha. The HFA
> > > > > > driver presents color columns as doubles between 0 and 1 as this
> > > > > > is how they are stored in the file. The IDRISI driver presents
> > > > > > them as integers between 0 and 255 like the Color Table API.
> > > > > > Code that uses color columns from the RAT API currently needs to
> > > > > > know which driver it is using, defeating one of the aims of
> > > > > > GDAL.
> > > > > > 
> > > > > > I propose that the RAT API be defined so that color columns
> > > > > > always appear as Integer 0-255 no matter what type and range
> > > > > > they are stored as. This would make the RAT API consistent with
> > > > > > the Color Table API and would mean a change to the HFA driver
> > > > > > 
> > > > > > Another option is that flags are added to the RAT SetValue,
> > > > > > GetValueAs* and ValuesIO calls to specify the conversion to/from
> > > > > > the native type. This seems a bigger change.
> > > > > > 
> > > > > > Any thoughts?
> > > > > > 
> > > > > > Sam.
> > > > > > 
> > > > > > _______________________________________________ gdal-dev mailing
> > > > > > list gdal-dev at lists.osgeo.org
> > > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From j.l.h.hartmann at uva.nl  Sat Jan 18 07:47:23 2014
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 18 Jan 2014 16:47:23 +0100
Subject: [gdal-dev] gdal_grid: number of data points to use
In-Reply-To: <201401181350.15736.even.rouault@mines-paris.org>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<1389269081.52ce905939039@imp.free.fr> <52DA6A07.7080909@uva.nl>
	<201401181350.15736.even.rouault@mines-paris.org>
Message-ID: <52DAA20B.6050505@uva.nl>

Thanks Even. How difficult would it be to let gdal_gid use the nearest 
points? The way it works now does not make much sense for mapping. 
Another very usable solution would be to select the nearest points in 
each quadrant relative to the interpolation point (NE, SE, SW, SE). It 
is available in dedicated interpolation programs like Surfer, and I 
always found it very useful. Funding would be possible.

Jan

On 01/18/2014 01:50 PM, Even Rouault wrote:
> Le samedi 18 janvier 2014 12:48:23, Jan Hartmann a ?crit :
>> gdal_grid has the option to set a minimum and maximum number of data
>> points to use for interpolation. How are these data points selected from
>> the total number of points? Are they always the nearest points to the
>> grid-point that is interpolated?
> Jan,
>
> if less than min_points match the selection of the algorithm, the nodata value
> will be returned
> and when iterating over source points (in the order they are present in the
> source OGR layer), the algorithm will stop as soon as max_points is reached.
> The selected points are consequently not necessarily the nearest points, but
> they will be contained in the search ellipse (since max_points is only taken
> into account if you define radius1 and radius2)
>
> Even
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/243e389d/attachment.html>

From lucena_ivan at hotmail.com  Sat Jan 18 07:52:51 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sat, 18 Jan 2014 10:52:51 -0500
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <201401181623.10720.even.rouault@mines-paris.org>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<201401181522.43820.even.rouault@mines-paris.org>
	<BLU173-W2253378D4D064381ED06FF90BB0@phx.gbl>,
	<201401181623.10720.even.rouault@mines-paris.org>
Message-ID: <BLU173-W45C753C23E0F0E583A73CC90BB0@phx.gbl>



> From: even.rouault at mines-paris.org
> To: lucena_ivan at hotmail.com
> Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> Date: Sat, 18 Jan 2014 16:23:10 +0100
> CC: gillingham.sam at gmail.com; gdal-dev at lists.osgeo.org
> 
> Le samedi 18 janvier 2014 15:40:15, Ivan Lucena a ?crit :
> > > From: even.rouault at mines-paris.org
> > > To: lucena_ivan at hotmail.com
> > > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> > > Date: Sat, 18 Jan 2014 15:22:43 +0100
> > > CC: gillingham.sam at gmail.com; gdal-dev at lists.osgeo.org
> > > 
> > > Le samedi 18 janvier 2014 15:18:20, Ivan Lucena a ?crit :
> > > > Hi Even,
> > > > 
> > > > In a parallel and almost not related topic, I am getting users
> > > > complains that gdal_translate crashes
> > > 
> > > Well, that should be debugged and fixed... You don't have more details ?
> > 
> > I waiting to get a sample file to debug it, but even when it doesn't crash
> > they need to manage what to do with the useless VAT table on the database.
> > 
> > > > or waste their time and storage space with
> > > > some ridiculous RAT that doesn't make any sense for their use case.
> > > > Maybe we should have a -noRAT option on gdal_translate. I could also
> > > > add an "RAT2VAT=NO" create-option on GeoRaster driver.
> > > 
> > > Yes, -norat option in gdal_translate makes sense.
> > 
> > IMHO, I don't think we should go to big deal of RPC discussion and voting
> > to add that option to gdal_translate.
> 
> I've just added the option. Yes that's not worth a RFC !

Wow, that was fast. Look at the code, it seems that you are taking advantage of the lack of support for RAT in VRT. Is that right? But I think there was a discussion about adding that support for some other reasons. Perhaps when someone wants to translate the RAT but also wants to enter one of those gdal_translate parameters that triggers the VRT. So I think that in the future we would need to add support for RAT to the VRT driver and also add a create-option on that same driver to tell it not do create the RAT. Does it makes sense?

> 
> > 
> > One work around that they are using is to run gdal_translate -of VRT, since
> > VRT drivers does not support RAT, they can use it as input instead of the
> > HFA .img files. They could just add -outsize 100% 100%, I guess. That
> > would also do the trick without create VRT files.
> > 
> > But gdal_translate is not the only way to run the CreateCopy of a driver,
> > so I think I am going to add my create-option anyway.
> > 
> > Regards,
> > 
> > Ivan
> > 
> > > > Any better idea?
> > > > 
> > > > Regards,
> > > > 
> > > > Ivan
> > > > 
> > > > > From: even.rouault at mines-paris.org
> > > > > To: gillingham.sam at gmail.com
> > > > > Date: Fri, 17 Jan 2014 20:33:21 +0100
> > > > > CC: gdal-dev at lists.osgeo.org
> > > > > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute
> > > > > Tables
> > > > > 
> > > > > Le vendredi 17 janvier 2014 01:21:14, Sam Gillingham a ?crit :
> > > > > > Hi Even, Frank,
> > > > > > 
> > > > > > I'm interested to hear if you have an opinion on this. Is this
> > > > > > behaviour by design or a bug in the HFA driver?
> > > > > > 
> > > > > > I'm happy to supply a patch to the HFA driver if you think this is
> > > > > > sensible solution. I just want to make sure I'm not missing
> > > > > > anything...
> > > > > 
> > > > > RAT is not my cup of tea, so I'm not sure to have a particularly
> > > > > enlightened opinion on this. It is a bit annoying that the HFA
> > > > > behaviour goes against the documentation. AFAIK nobody has ever
> > > > > complained about this, so this might be just a sign that RAT is not
> > > > > widely used. Provided that it is documented in MIGRATION_GUIDE.TXT,
> > > > > I think it would be OK to make the driver behaviour consistant with
> > > > > the doc.
> > > > > Actually, I'm just thinking to the following point : if the color
> > > > > table in IMG is represented as a float, could values that are not of
> > > > > the form N / 255 be possible (when generated by Imagine) ?  If so,
> > > > > we would loose information by casting to int. It is a bit strange
> > > > > they have selected a floating point serialization.
> > > > > Another possibility would be to indicate the validity range of the
> > > > > attribute, e.g 0-255 or 0-1, so that applications can normalize to
> > > > > [0,255] if they need to.
> > > > > 
> > > > > > Thanks for your time,
> > > > > > 
> > > > > > Sam.
> > > > > > 
> > > > > > ---------- Forwarded message ----------
> > > > > > From: Sam Gillingham <gillingham.sam at gmail.com>
> > > > > > Date: 14 January 2014 08:51
> > > > > > Subject: Re: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > > > To: Ivan Lucena <lucena_ivan at hotmail.com>
> > > > > > Cc: gdal dev <gdal-dev at lists.osgeo.org>
> > > > > > 
> > > > > > 
> > > > > > Hi Ivan,
> > > > > > 
> > > > > > Unfortunately the color table API does not support the
> > > > > > functionality that was added to the RAT API in RFC40. As a result,
> > > > > > dealing with large color tables can be problematic.
> > > > > > 
> > > > > > Yes the HFA driver does report colors correctly as 0-255 with the
> > > > > > color table API and one solution could be to add RFC40
> > > > > > functionality to the color table API. However, it does seem that
> > > > > > it does make sense to be able to manipulate colors from the RAT
> > > > > > API for e.g. setting colors based on the value(s) found in other
> > > > > > attribute columns easily.
> > > > > > 
> > > > > > I accept that no consistency can be expected for user defined
> > > > > > columns (usage == GFU_Generic) but I would have though
> > > > > > applications could depend on the color columns since they are
> > > > > > marked as such by their usage. In fact the documentation for the
> > > > > > usage values (
> > > > > > http://www.gdal.org/gdal_8h.html#a27bf786b965d5227da1acc2a4cab69a1)
> > > > > > does specify them to be 0-255 so this seems to have been the
> > > > > > intention and is maybe just a bug in the HFA driver.
> > > > > > 
> > > > > > Sam.
> > > > > > 
> > > > > > On 13 January 2014 15:18, Ivan Lucena <lucena_ivan at hotmail.com> 
> wrote:
> > > > > > > Hi Sam,
> > > > > > > 
> > > > > > > In GDAL color table is supported by the GDALColorTable
> > > > > > > http://gdal.org/classGDALColorTable.html not by
> > > > > > > GDALRasterAttributeTable
> > > > > > > http://gdal.org/classGDALRasterAttributeTable.html.
> > > > > > > 
> > > > > > > The GDALColorTable is a little bit limited but it is pretty much
> > > > > > > consistent across all the drivers that support it. For example,
> > > > > > > when you say that HFA reports RGBA with values from 0..1 as RAT
> > > > > > > it probably reports the correct 0..255 as GDALGetColorTable or
> > > > > > > it doesn't report it at all, because of the GDALColorTable
> > > > > > > limitation, like data type or number of colors.
> > > > > > > 
> > > > > > > But IMHO, there is no reason to expect consistency on the
> > > > > > > representation of color table from a driver RAT. An RAT could be
> > > > > > > user defined or generated by some driver or application.
> > > > > > > 
> > > > > > > What you are seem is that some drivers are using, or maybe
> > > > > > > abusing, the freedom format of RAT to report information than
> > > > > > > can be understood by some particular application or software
> > > > > > > (mea culpa on one of those).
> > > > > > > 
> > > > > > > Best regards,
> > > > > > > 
> > > > > > > Ivan
> > > > > > > 
> > > > > > > ------------------------------
> > > > > > > Date: Mon, 13 Jan 2014 13:06:01 +1300
> > > > > > > From: gillingham.sam at gmail.com
> > > > > > > To: gdal-dev at lists.osgeo.org
> > > > > > > Subject: [gdal-dev] Color Columns in Raster Attribute Tables
> > > > > > > 
> > > > > > > 
> > > > > > > Hi List,
> > > > > > > 
> > > > > > > There appears to be an inconsistency in the way color columns are
> > > > > > > handled within Raster Attribute Tables (RATs) by different
> > > > > > > drivers. Color columns are currently identified by their 'usage'
> > > > > > > setting - GFU_Red, GFU_Green, GFU_Blue and GFU_Alpha. The HFA
> > > > > > > driver presents color columns as doubles between 0 and 1 as this
> > > > > > > is how they are stored in the file. The IDRISI driver presents
> > > > > > > them as integers between 0 and 255 like the Color Table API.
> > > > > > > Code that uses color columns from the RAT API currently needs to
> > > > > > > know which driver it is using, defeating one of the aims of
> > > > > > > GDAL.
> > > > > > > 
> > > > > > > I propose that the RAT API be defined so that color columns
> > > > > > > always appear as Integer 0-255 no matter what type and range
> > > > > > > they are stored as. This would make the RAT API consistent with
> > > > > > > the Color Table API and would mean a change to the HFA driver
> > > > > > > 
> > > > > > > Another option is that flags are added to the RAT SetValue,
> > > > > > > GetValueAs* and ValuesIO calls to specify the conversion to/from
> > > > > > > the native type. This seems a bigger change.
> > > > > > > 
> > > > > > > Any thoughts?
> > > > > > > 
> > > > > > > Sam.
> > > > > > > 
> > > > > > > _______________________________________________ gdal-dev mailing
> > > > > > > list gdal-dev at lists.osgeo.org
> > > > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/b9ec125d/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Jan 18 08:36:14 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 18 Jan 2014 17:36:14 +0100
Subject: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
In-Reply-To: <BLU173-W45C753C23E0F0E583A73CC90BB0@phx.gbl>
References: <CAMH-RbYUO-cUxw4kgwQz7ejjTNNZ8LDf6uEAbFV_NpdRYCft8A@mail.gmail.com>
	<201401181623.10720.even.rouault@mines-paris.org>
	<BLU173-W45C753C23E0F0E583A73CC90BB0@phx.gbl>
Message-ID: <201401181736.14625.even.rouault@mines-paris.org>

Le samedi 18 janvier 2014 16:52:51, Ivan Lucena a ?crit :
> > From: even.rouault at mines-paris.org
> > To: lucena_ivan at hotmail.com
> > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute Tables
> > Date: Sat, 18 Jan 2014 16:23:10 +0100
> > CC: gillingham.sam at gmail.com; gdal-dev at lists.osgeo.org
> > 
> > Le samedi 18 janvier 2014 15:40:15, Ivan Lucena a ?crit :
> > > > From: even.rouault at mines-paris.org
> > > > To: lucena_ivan at hotmail.com
> > > > Subject: Re: [gdal-dev] Fwd:  Color Columns in Raster Attribute
> > > > Tables Date: Sat, 18 Jan 2014 15:22:43 +0100
> > > > CC: gillingham.sam at gmail.com; gdal-dev at lists.osgeo.org
> > > > 
> > > > Le samedi 18 janvier 2014 15:18:20, Ivan Lucena a ?crit :
> > > > > Hi Even,
> > > > > 
> > > > > In a parallel and almost not related topic, I am getting users
> > > > > complains that gdal_translate crashes
> > > > 
> > > > Well, that should be debugged and fixed... You don't have more
> > > > details ?
> > > 
> > > I waiting to get a sample file to debug it, but even when it doesn't
> > > crash they need to manage what to do with the useless VAT table on the
> > > database.
> > > 
> > > > > or waste their time and storage space with
> > > > > some ridiculous RAT that doesn't make any sense for their use case.
> > > > > Maybe we should have a -noRAT option on gdal_translate. I could
> > > > > also add an "RAT2VAT=NO" create-option on GeoRaster driver.
> > > > 
> > > > Yes, -norat option in gdal_translate makes sense.
> > > 
> > > IMHO, I don't think we should go to big deal of RPC discussion and
> > > voting to add that option to gdal_translate.
> > 
> > I've just added the option. Yes that's not worth a RFC !
> 
> Wow, that was fast. Look at the code, it seems that you are taking
> advantage of the lack of support for RAT in VRT. Is that right? But I
> think there was a discussion about adding that support for some other
> reasons. Perhaps when someone wants to translate the RAT but also wants to
> enter one of those gdal_translate parameters that triggers the VRT. So I
> think that in the future we would need to add support for RAT to the VRT
> driver 

Yes, the implementation was trivial due to the lack of support for RAT in VRT. 
That's why I've added a regression test for -norat, so that if somebody 
implements RAT copying in VRT, they know that they must do something to unset 
it explicitely in gdal_translate -norat mode.

> and also add a create-option on that same driver to tell it not do
> create the RAT. Does it makes sense?

If you've other use cases, yes the creation option makes sense.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Jan 18 08:51:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 18 Jan 2014 17:51:23 +0100
Subject: [gdal-dev] gdal_grid: number of data points to use
In-Reply-To: <52DAA20B.6050505@uva.nl>
References: <c90b6f30515e0a51ef61aa5979892fd4@mail.swcp.com>
	<201401181350.15736.even.rouault@mines-paris.org>
	<52DAA20B.6050505@uva.nl>
Message-ID: <201401181751.23768.even.rouault@mines-paris.org>

Le samedi 18 janvier 2014 16:47:23, Jan Hartmann a ?crit :
> Thanks Even. How difficult would it be to let gdal_gid use the nearest
> points? The way it works now does not make much sense for mapping.

The points would need to be accumulated in an array and sorted by distance to 
the point being computed. Nothing terribly difficult. However I guess the 
max_points option, as currently implemented, was added to make the computation 
faster, so that would defeat a bit that purpose since you'd have to collect 
all them.

> Another very usable solution would be to select the nearest points in
> each quadrant relative to the interpolation point (NE, SE, SW, SE). It
> is available in dedicated interpolation programs like Surfer, and I
> always found it very useful.

Yes that would make sense. I'm not sure what's the interest currently in 
computing the weight contribution of points that are further than the closest 
points. But finding those nearest points would mean to go through all the 
possible points of the search ellipse, so that would not speed things up.

I have already implemented speeding up the nearest neighbour algorithm by 
using a in-memory spatial indexing of the point layers. The inverse distance 
to a power algorithm could likely take advantage of this too.

> Funding would be possible.
> 
> Jan
> 
> On 01/18/2014 01:50 PM, Even Rouault wrote:
> > Le samedi 18 janvier 2014 12:48:23, Jan Hartmann a ?crit :
> >> gdal_grid has the option to set a minimum and maximum number of data
> >> points to use for interpolation. How are these data points selected from
> >> the total number of points? Are they always the nearest points to the
> >> grid-point that is interpolated?
> > 
> > Jan,
> > 
> > if less than min_points match the selection of the algorithm, the nodata
> > value will be returned
> > and when iterating over source points (in the order they are present in
> > the source OGR layer), the algorithm will stop as soon as max_points is
> > reached. The selected points are consequently not necessarily the
> > nearest points, but they will be contained in the search ellipse (since
> > max_points is only taken into account if you define radius1 and radius2)
> > 
> > Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Sat Jan 18 11:09:20 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 18 Jan 2014 17:09:20 -0200
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <201401172337.28602.even.rouault@mines-paris.org>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
	<201401172337.28602.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvOe9qejzbZJrRUasSOzUQ-NOAVNmAXArgew7ANNgheWjw@mail.gmail.com>

I noticed that qgis-2.0 also has a problem with this file, but places it
around 54 degrees west longitude (if using on-the-fly reprojection to
WGS84).

The CRS is different from that identified by gdal (the lon_0, units and
datum are different)

qgis:
+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333
+lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs


gdal:
PROJ.4 : '+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333
+lat_0=39.33333333333334 +lon_0=-77.75 +x_0=1968500 +y_0=0 +datum=NAD83
+units=us-ft +no_defs '

OGC WKT :
PROJCS["NAD_1983_StatePlane_Pennsylvania_South_FIPS_3702_Feet",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",40.96666666666667],
    PARAMETER["standard_parallel_2",39.93333333333333],
    PARAMETER["latitude_of_origin",39.33333333333334],
    PARAMETER["central_meridian",-77.75],
    PARAMETER["false_easting",6458320.416666666],
    PARAMETER["false_northing",0],
    UNIT["us_survey_feet",0.3048006096012192],
    AUTHORITY["EPSG","32129"]]




On Fri, Jan 17, 2014 at 8:37 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le vendredi 17 janvier 2014 21:28:35, Reynolds, Scott a ?crit :
> > Hi,
> >
> > I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from
> > ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/.
> > Gdalinfo is reporting the corner coordinates to be in the vicinity of  91
> > degrees 31 minutes west longitude which should be more like 75 degrees 36
> > minutes west longitude.  Can someone explain what is happening here?
>
> GeoTIFF support for non-meter linear units has been a major source of
> headaches in GDAL / libgeotiff. People will appreciate looking at
> frmts/gtiff/gt_wkt_srs.cpp
>
> I'm not sure if that GeoTIFF file is correct or not regarding the values
> of the
> false easting/northing with respect to the GeoTIFF spec (many in the wild
> are
> broken), but when looking at what happens, I noticed that a transformation
> from meters to feet happened twice. The attached patch fixes that (and the
> corner coordinates are around 75?), but I'm not sure if it is completely
> correct in all cases.
>
> You should likely create a GDAL Trac ticket with your report and the patch,
> but I'm not sure who will dare hurting his head against this wall...
>
> Even
>
> >
> > Thanks,
> > Scott
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140118/d0604311/attachment.html>

From peifer at gmx.eu  Sat Jan 18 12:52:14 2014
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat, 18 Jan 2014 21:52:14 +0100
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <CA+TxYvOe9qejzbZJrRUasSOzUQ-NOAVNmAXArgew7ANNgheWjw@mail.gmail.com>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>	<201401172337.28602.even.rouault@mines-paris.org>
	<CA+TxYvOe9qejzbZJrRUasSOzUQ-NOAVNmAXArgew7ANNgheWjw@mail.gmail.com>
Message-ID: <52DAE97E.7080108@gmx.eu>


As far as I can see: lon_0 is the same in both cases and there is also 
no actual difference between +datum=NAD83 (gdal) and +ellps=GRS80 
+towgs84=0,0,0,0,0,0,0 (qgis).

I am not sure where +x_0=600000 (qgis) comes from, but gdal's +x_0 value 
is simply 6458320.416666666 * 0.3048006096012192 = 1968500 *meters*, so 
in fact only +units=us-ft is wrong there.

Hermann


On 2014-01-18 20:09, Etienne Tourigny wrote:
> I noticed that qgis-2.0 also has a problem with this file, but places it
> around 54 degrees west longitude (if using on-the-fly reprojection to
> WGS84).
>
> The CRS is different from that identified by gdal (the lon_0, units and
> datum are different)
>
> qgis:
> +proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333
> +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80
> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
>
>
> gdal:
>
> PROJ.4 : '+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333
> +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=1968500 +y_0=0 +datum=NAD83
> +units=us-ft +no_defs '
>
> OGC WKT :
> PROJCS["NAD_1983_StatePlane_Pennsylvania_South_FIPS_3702_Feet",
>      GEOGCS["NAD83",
>          DATUM["North_American_Datum_1983",
>              SPHEROID["GRS 1980",6378137,298.2572221010002,
>                  AUTHORITY["EPSG","7019"]],
>              AUTHORITY["EPSG","6269"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4269"]],
>      PROJECTION["Lambert_Conformal_Conic_2SP"],
>      PARAMETER["standard_parallel_1",40.96666666666667],
>      PARAMETER["standard_parallel_2",39.93333333333333],
>      PARAMETER["latitude_of_origin",39.33333333333334],
>      PARAMETER["central_meridian",-77.75],
>      PARAMETER["false_easting",6458320.416666666],
>      PARAMETER["false_northing",0],
>      UNIT["us_survey_feet",0.3048006096012192],
>      AUTHORITY["EPSG","32129"]]
>
>
>
>
> On Fri, Jan 17, 2014 at 8:37 PM, Even Rouault
> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>> wrote:
>
>     Le vendredi 17 janvier 2014 21:28:35, Reynolds, Scott a ?crit :
>      > Hi,
>      >
>      > I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from
>      >
>     ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/.
>      > Gdalinfo is reporting the corner coordinates to be in the
>     vicinity of  91
>      > degrees 31 minutes west longitude which should be more like 75
>     degrees 36
>      > minutes west longitude.  Can someone explain what is happening here?
>
>     GeoTIFF support for non-meter linear units has been a major source of
>     headaches in GDAL / libgeotiff. People will appreciate looking at
>     frmts/gtiff/gt_wkt_srs.cpp
>
>     I'm not sure if that GeoTIFF file is correct or not regarding the
>     values of the
>     false easting/northing with respect to the GeoTIFF spec (many in the
>     wild are
>     broken), but when looking at what happens, I noticed that a
>     transformation
>     from meters to feet happened twice. The attached patch fixes that
>     (and the
>     corner coordinates are around 75?), but I'm not sure if it is completely
>     correct in all cases.
>
>     You should likely create a GDAL Trac ticket with your report and the
>     patch,
>     but I'm not sure who will dare hurting his head against this wall...
>
>     Even
>
>      >
>      > Thanks,
>      > Scott
>
>     --
>     Geospatial professional services
>     http://even.rouault.free.fr/services.html
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From samsung460 at gmail.com  Sat Jan 18 15:36:22 2014
From: samsung460 at gmail.com (sam sung)
Date: Sun, 19 Jan 2014 10:36:22 +1100
Subject: [gdal-dev] registration to gdal development forum
Message-ID: <000001cf14a6$1ab0e140$5012a3c0$@com>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140119/a8a066dc/attachment.html>

From andre+joost at nurfuerspam.de  Sat Jan 18 23:54:16 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 19 Jan 2014 08:54:16 +0100
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <52DAE97E.7080108@gmx.eu>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>	<201401172337.28602.even.rouault@mines-paris.org>
	<CA+TxYvOe9qejzbZJrRUasSOzUQ-NOAVNmAXArgew7ANNgheWjw@mail.gmail.com>
	<52DAE97E.7080108@gmx.eu>
Message-ID: <lbg0cg$6cb$1@ger.gmane.org>

Am 18.01.2014 21:52, schrieb Hermann Peifer:
>
> As far as I can see: lon_0 is the same in both cases and there is also
> no actual difference between +datum=NAD83 (gdal) and +ellps=GRS80
> +towgs84=0,0,0,0,0,0,0 (qgis).
>
> I am not sure where +x_0=600000 (qgis) comes from, but gdal's +x_0 value
> is simply 6458320.416666666 * 0.3048006096012192 = 1968500 *meters*, so
> in fact only +units=us-ft is wrong there.

No, that's the only thing right. The DEM zip file includes a html and a 
xml file which gives the intended SRS information:

Geodetic_Model:

     Horizontal_Datum_Name: North American Datum of 1983
     Ellipsoid_Name: Geodetic Reference System 80
     Semi-major_Axis: 6378137.000000
     Denominator_of_Flattening_Ratio: 298.257222

cordsysn:

     geogcsn: GCS_North_American_1983
     projcsn: NAD_1983_StatePlane_Pennsylvania_South_FIPS_3702_Feet

Planar:

     Map_Projection:

         Map_Projection_Name: Lambert Conformal Conic
         Lambert_Conformal_Conic:

             Standard_Parallel: 39.933333
             Standard_Parallel: 40.966667
             Longitude_of_Central_Meridian: -77.750000
             Latitude_of_Projection_Origin: 39.333333
             False_Easting: 1968500.000000
             False_Northing: 0.000000

     Planar_Coordinate_Information:

         Planar_Coordinate_Encoding_Method: row and column
         Planar_Distance_Units: survey feet

That should be equivalent to the ESRI definition called EPSG:102790 in 
QGIS 2.0:

+proj=lcc +lat_1=39.93333333333333 +lat_2=40.96666666666667 
+lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000.0000000001 +y_0=0 
+datum=NAD83 +units=us-ft +no_defs

with that, the DEM file will place in the extent given by the same html 
file:

     West_Bounding_Coordinate: -75.601950
     East_Bounding_Coordinate: -75.565369
     North_Bounding_Coordinate: 40.054419
     South_Bounding_Coordinate: 40.026303

and the upper left corner reflects the name of the DEM

The only fault of QGIS is that it guesses the CRS wrongly as EPSG:3219:

+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333 
+lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80 
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs

which has a different lat_1 and different units.

EPSG:2272 has the right units, the wrong lat_1, but places the file in 
the same location:

+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333 
+lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80 
+towgs84=0,0,0,0,0,0,0 +units=us-ft +no_defs

x_0=600000 is the right value for the CRS. Creating a vector grid on 
that CRS, the central meridian gets the value of 1968500 feet as 
intended in the html document. You get x_0 by calculating 196850*0.3048

By the way, 600000 is the false easting in metres, as used by EPSG:3219, 
because both PA systems have their origin in the same place (which makes 
some sense).

gdalsrsinfo creates wrong x_0 for the project string, and wrong 
false_easting in OGC_WKT.

Greetings,
Andr? Joost


>
> On 2014-01-18 20:09, Etienne Tourigny wrote:
>> I noticed that qgis-2.0 also has a problem with this file, but places it
>> around 54 degrees west longitude (if using on-the-fly reprojection to
>> WGS84).
>>
>> The CRS is different from that identified by gdal (the lon_0, units and
>> datum are different)
>>
>> qgis:
>> +proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333
>> +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80
>> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
>>
>>
>> gdal:
>>
>> PROJ.4 : '+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333
>> +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=1968500 +y_0=0 +datum=NAD83
>> +units=us-ft +no_defs '
>>
>> OGC WKT :
>> PROJCS["NAD_1983_StatePlane_Pennsylvania_South_FIPS_3702_Feet",
>> GEOGCS["NAD83",
>> DATUM["North_American_Datum_1983",
>> SPHEROID["GRS 1980",6378137,298.2572221010002,
>> AUTHORITY["EPSG","7019"]],
>> AUTHORITY["EPSG","6269"]],
>> PRIMEM["Greenwich",0],
>> UNIT["degree",0.0174532925199433],
>> AUTHORITY["EPSG","4269"]],
>> PROJECTION["Lambert_Conformal_Conic_2SP"],
>> PARAMETER["standard_parallel_1",40.96666666666667],
>> PARAMETER["standard_parallel_2",39.93333333333333],
>> PARAMETER["latitude_of_origin",39.33333333333334],
>> PARAMETER["central_meridian",-77.75],
>> PARAMETER["false_easting",6458320.416666666],
>> PARAMETER["false_northing",0],
>> UNIT["us_survey_feet",0.3048006096012192],
>> AUTHORITY["EPSG","32129"]]
>>
>>
>>
>>
>> On Fri, Jan 17, 2014 at 8:37 PM, Even Rouault
>> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>>
>> wrote:
>>
>> Le vendredi 17 janvier 2014 21:28:35, Reynolds, Scott a ?crit :
>> > Hi,
>> >
>> > I've downloaded several DEMs (e.g 27002570PAS_dem.zip) from
>> >
>> ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/.
>> > Gdalinfo is reporting the corner coordinates to be in the
>> vicinity of 91
>> > degrees 31 minutes west longitude which should be more like 75
>> degrees 36
>> > minutes west longitude. Can someone explain what is happening here?
>>
>> GeoTIFF support for non-meter linear units has been a major source of
>> headaches in GDAL / libgeotiff. People will appreciate looking at
>> frmts/gtiff/gt_wkt_srs.cpp
>>
>> I'm not sure if that GeoTIFF file is correct or not regarding the
>> values of the
>> false easting/northing with respect to the GeoTIFF spec (many in the
>> wild are
>> broken), but when looking at what happens, I noticed that a
>> transformation
>> from meters to feet happened twice. The attached patch fixes that
>> (and the
>> corner coordinates are around 75?), but I'm not sure if it is completely
>> correct in all cases.
>>
>> You should likely create a GDAL Trac ticket with your report and the
>> patch,
>> but I'm not sure who will dare hurting his head against this wall...
>>
>> Even
>>
>> >
>> > Thanks,
>> > Scott
>>
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>



From andre+joost at nurfuerspam.de  Sun Jan 19 12:18:46 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 19 Jan 2014 21:18:46 +0100
Subject: [gdal-dev] gdalinfo coordinates problem?
In-Reply-To: <201401172337.28602.even.rouault@mines-paris.org>
References: <f2cea05bf3c94eb0bb4be728be588935@BY2PR07MB663.namprd07.prod.outlook.com>
	<201401172337.28602.even.rouault@mines-paris.org>
Message-ID: <lbhc1a$ugu$1@ger.gmane.org>

Am 17.01.2014 23:37, schrieb Even Rouault:

>
> You should likely create a GDAL Trac ticket with your report and the patch,
> but I'm not sure who will dare hurting his head against this wall...
>

This ticket should have the same issue already:

https://trac.osgeo.org/gdal/ticket/4954

For the QGIS part, I opened another at http://hub.qgis.org/issues/9370

Greetings,
Andr? Joost


From srp at geo.ku.dk  Sun Jan 19 14:27:49 2014
From: srp at geo.ku.dk (Simon Proud)
Date: Sun, 19 Jan 2014 14:27:49 -0800 (PST)
Subject: [gdal-dev] Problem calling gdalwarp from within python script
Message-ID: <1390170469862-5098902.post@n6.nabble.com>

Hi,
I wish to call gdalwarp from within a python script but I cannot get it to
work.

The command I wish to run is:

gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
-te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff

I'm running on Ubuntu 12.04. The above command works perfectly when called
from a terminal window and produces a good output image.

But when I run from python I get problems.
First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
TEST2.tiff"]) then all I see is the default usage instructions. No file is
created. Same if I use popen.

If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
and I see the expected text on the screen. However, in this case the output
file is blank - it is the right size and contains the right georeferencing
information but every pixel in the image has a value of zero.

Does anyone have an idea what could be the problem here?
Thanks!



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schwehr at gmail.com  Sun Jan 19 14:47:05 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 19 Jan 2014 14:47:05 -0800
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <1390170469862-5098902.post@n6.nabble.com>
References: <1390170469862-5098902.post@n6.nabble.com>
Message-ID: <0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>

try

> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])


Each arg must be an element in the list.

-kurt

On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:

> Hi,
> I wish to call gdalwarp from within a python script but I cannot get it to
> work.
> 
> The command I wish to run is:
> 
> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
> 
> I'm running on Ubuntu 12.04. The above command works perfectly when called
> from a terminal window and produces a good output image.
> 
> But when I run from python I get problems.
> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
> TEST2.tiff"]) then all I see is the default usage instructions. No file is
> created. Same if I use popen.
> 
> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
> and I see the expected text on the screen. However, in this case the output
> file is blank - it is the right size and contains the right georeferencing
> information but every pixel in the image has a value of zero.
> 
> Does anyone have an idea what could be the problem here?
> Thanks!
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From srp at geo.ku.dk  Sun Jan 19 15:00:55 2014
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Sun, 19 Jan 2014 23:00:55 +0000
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>

Hi, thanks for the reply.

I tried changing the call to this: 
process.call(["gdalwarp","-q","-multi","-r cubicspline","-t_srs '+proj=geos +lon_0=0.0 +h=35785831'","-te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758","-tr 3000.40316582 3000.40316582","-srcnodata 65535","TEST.tiff","TEST2.tiff"])

But still receive just the usage instructions, I can't see any other arguments that can be divided into an element. Setting the "shell=True" option also has no effect.

/Simon

________________________________________
Fra: Kurt Schwehr [schwehr at gmail.com]
Sendt: 19. januar 2014 17:47
Til: Simon Richard Proud
Cc: gdal-dev at lists.osgeo.org dev
Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script

try

> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])


Each arg must be an element in the list.

-kurt

On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:

> Hi,
> I wish to call gdalwarp from within a python script but I cannot get it to
> work.
>
> The command I wish to run is:
>
> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
>
> I'm running on Ubuntu 12.04. The above command works perfectly when called
> from a terminal window and produces a good output image.
>
> But when I run from python I get problems.
> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
> TEST2.tiff"]) then all I see is the default usage instructions. No file is
> created. Same if I use popen.
>
> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
> and I see the expected text on the screen. However, in this case the output
> file is blank - it is the right size and contains the right georeferencing
> information but every pixel in the image has a value of zero.
>
> Does anyone have an idea what could be the problem here?
> Thanks!
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From schwehr at gmail.com  Sun Jan 19 15:05:59 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 19 Jan 2014 15:05:59 -0800
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>
Message-ID: <AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>

> ,"-r cubicspline",


becomes

"-r", "cubicspline",

and so forth

On Jan 19, 2014, at 3:00 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:

> Hi, thanks for the reply.
> 
> I tried changing the call to this: 
> process.call(["gdalwarp","-q","-multi","-r cubicspline","-t_srs '+proj=geos +lon_0=0.0 +h=35785831'","-te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758","-tr 3000.40316582 3000.40316582","-srcnodata 65535","TEST.tiff","TEST2.tiff"])
> 
> But still receive just the usage instructions, I can't see any other arguments that can be divided into an element. Setting the "shell=True" option also has no effect.
> 
> /Simon
> 
> ________________________________________
> Fra: Kurt Schwehr [schwehr at gmail.com]
> Sendt: 19. januar 2014 17:47
> Til: Simon Richard Proud
> Cc: gdal-dev at lists.osgeo.org dev
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
> 
> try
> 
>> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])
> 
> 
> Each arg must be an element in the list.
> 
> -kurt
> 
> On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:
> 
>> Hi,
>> I wish to call gdalwarp from within a python script but I cannot get it to
>> work.
>> 
>> The command I wish to run is:
>> 
>> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
>> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
>> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
>> 
>> I'm running on Ubuntu 12.04. The above command works perfectly when called
>> from a terminal window and produces a good output image.
>> 
>> But when I run from python I get problems.
>> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
>> TEST2.tiff"]) then all I see is the default usage instructions. No file is
>> created. Same if I use popen.
>> 
>> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
>> and I see the expected text on the screen. However, in this case the output
>> file is blank - it is the right size and contains the right georeferencing
>> information but every pixel in the image has a value of zero.
>> 
>> Does anyone have an idea what could be the problem here?
>> Thanks!
>> 
>> 
>> 
>> --
>> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


From srp at geo.ku.dk  Sun Jan 19 15:13:27 2014
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Sun, 19 Jan 2014 23:13:27 +0000
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>,
	<AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>

Ok, that gets things a little closer - now it gives an error: "ERROR 1: Translating source or target SRS failed"
I tried with '+proj=geos +lon_0=0.0 +h=35785831' as one argument and as three. Same result. 
I also tried including the -te and -tr arguments in the one argument along with the proj details - no luck with that either.

/Simon
________________________________________
Fra: Kurt Schwehr [schwehr at gmail.com]
Sendt: 19. januar 2014 18:05
Til: Simon Richard Proud
Cc: gdal-dev at lists.osgeo.org dev
Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script

> ,"-r cubicspline",


becomes

"-r", "cubicspline",

and so forth

On Jan 19, 2014, at 3:00 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:

> Hi, thanks for the reply.
>
> I tried changing the call to this:
> process.call(["gdalwarp","-q","-multi","-r cubicspline","-t_srs '+proj=geos +lon_0=0.0 +h=35785831'","-te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758","-tr 3000.40316582 3000.40316582","-srcnodata 65535","TEST.tiff","TEST2.tiff"])
>
> But still receive just the usage instructions, I can't see any other arguments that can be divided into an element. Setting the "shell=True" option also has no effect.
>
> /Simon
>
> ________________________________________
> Fra: Kurt Schwehr [schwehr at gmail.com]
> Sendt: 19. januar 2014 17:47
> Til: Simon Richard Proud
> Cc: gdal-dev at lists.osgeo.org dev
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
>
> try
>
>> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])
>
>
> Each arg must be an element in the list.
>
> -kurt
>
> On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:
>
>> Hi,
>> I wish to call gdalwarp from within a python script but I cannot get it to
>> work.
>>
>> The command I wish to run is:
>>
>> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
>> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
>> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
>>
>> I'm running on Ubuntu 12.04. The above command works perfectly when called
>> from a terminal window and produces a good output image.
>>
>> But when I run from python I get problems.
>> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
>> TEST2.tiff"]) then all I see is the default usage instructions. No file is
>> created. Same if I use popen.
>>
>> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
>> and I see the expected text on the screen. However, in this case the output
>> file is blank - it is the right size and contains the right georeferencing
>> information but every pixel in the image has a value of zero.
>>
>> Does anyone have an idea what could be the problem here?
>> Thanks!
>>
>>
>>
>> --
>> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



From samsung460 at gmail.com  Sun Jan 19 15:55:27 2014
From: samsung460 at gmail.com (sam sung)
Date: Mon, 20 Jan 2014 10:55:27 +1100
Subject: [gdal-dev] How to build a Raster Attribute Table for a GeoTiff grid
 file using GDAL API in c only, not c++?
Message-ID: <CAPORVSKWhP3szP4TR6om54XCD7BxoCe03TXUjxbrmMFixqse7A@mail.gmail.com>

Hello, folks,

I tried to build a Raster Attribute Table (denoted as RAT below) for a
GeoTiff raster file(attached as ?test.tif?) in C within Visual Studio 2008.
This C file was compiled through and there was no errors reported.

I used GDALSetDefaultRAT function, it was successful. But when I used
GDALRATCreateColumn function to create RAT fields, it was always report
errors. I tested how well the c++ file ?rfc40_tests_hfa.cpp?
works(Downloaded from the GDAL forum). I found this code only works on HFA
driver, i.e., .img grid file, not .tif grid because the same errors occur
when I changed the driver from ?HFA? to ?GTiff?,

 I downloaded and used gdal-110-1500-core.msi, which is gdal 1.10 version
API library for Windows. I worked with C++ under Visual Studio 2008
professional.

 I have attached the GeoTiff file as "test.tif" and my C source code file
"gtiff_rat.c".   I also attached the c++ file ?rfc40_tests_hfa.cpp?.

 My question:   Is GDAL API able to be used to build a Raster Attribute
Table for GeoTiff raster?


Any help will be appriciated.

Regards,

Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/38dd4280/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_built_RAT.rar
Type: application/rar
Size: 5047 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/38dd4280/attachment-0001.rar>

From schwehr at gmail.com  Sun Jan 19 16:00:55 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 19 Jan 2014 16:00:55 -0800
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>,
	<AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>
Message-ID: <1B31D110-CE39-43AF-AE1A-B8DA75CC7466@gmail.com>

have not tested this, but I would guess something like this...

['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos +lon_0=0.0 +h=35785831', '-te', '-5568748.2758 -5568748.4774 5568748.2758 5568748.2758','-tr', '3000.40316582 3000.40316582', '-srcnodata', '65535','TEST.tiff', 'TEST2.tiff']


On Jan 19, 2014, at 3:13 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:

> Ok, that gets things a little closer - now it gives an error: "ERROR 1: Translating source or target SRS failed"
> I tried with '+proj=geos +lon_0=0.0 +h=35785831' as one argument and as three. Same result. 
> I also tried including the -te and -tr arguments in the one argument along with the proj details - no luck with that either.
> 
> /Simon
> ________________________________________
> Fra: Kurt Schwehr [schwehr at gmail.com]
> Sendt: 19. januar 2014 18:05
> Til: Simon Richard Proud
> Cc: gdal-dev at lists.osgeo.org dev
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
> 
>> ,"-r cubicspline",
> 
> 
> becomes
> 
> "-r", "cubicspline",
> 
> and so forth
> 
> On Jan 19, 2014, at 3:00 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:
> 
>> Hi, thanks for the reply.
>> 
>> I tried changing the call to this:
>> process.call(["gdalwarp","-q","-multi","-r cubicspline","-t_srs '+proj=geos +lon_0=0.0 +h=35785831'","-te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758","-tr 3000.40316582 3000.40316582","-srcnodata 65535","TEST.tiff","TEST2.tiff"])
>> 
>> But still receive just the usage instructions, I can't see any other arguments that can be divided into an element. Setting the "shell=True" option also has no effect.
>> 
>> /Simon
>> 
>> ________________________________________
>> Fra: Kurt Schwehr [schwehr at gmail.com]
>> Sendt: 19. januar 2014 17:47
>> Til: Simon Richard Proud
>> Cc: gdal-dev at lists.osgeo.org dev
>> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
>> 
>> try
>> 
>>> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])
>> 
>> 
>> Each arg must be an element in the list.
>> 
>> -kurt
>> 
>> On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:
>> 
>>> Hi,
>>> I wish to call gdalwarp from within a python script but I cannot get it to
>>> work.
>>> 
>>> The command I wish to run is:
>>> 
>>> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
>>> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
>>> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
>>> 
>>> I'm running on Ubuntu 12.04. The above command works perfectly when called
>>> from a terminal window and produces a good output image.
>>> 
>>> But when I run from python I get problems.
>>> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
>>> TEST2.tiff"]) then all I see is the default usage instructions. No file is
>>> created. Same if I use popen.
>>> 
>>> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
>>> and I see the expected text on the screen. However, in this case the output
>>> file is blank - it is the right size and contains the right georeferencing
>>> information but every pixel in the image has a value of zero.
>>> 
>>> Does anyone have an idea what could be the problem here?
>>> Thanks!
>>> 
>>> 
>>> 
>>> --
>>> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> 


From samsung460 at gmail.com  Sun Jan 19 16:25:35 2014
From: samsung460 at gmail.com (sam sung)
Date: Mon, 20 Jan 2014 11:25:35 +1100
Subject: [gdal-dev] How to build a Raster Attribute Table for a GeoTiff grid
 file using GDAL API in c only, not c++?
Message-ID: <CAPORVSJPdXoSe57ru=mQ+a1TzDxZ9f9UqZQyXuE2-VxSKf0Z2w@mail.gmail.com>

Hello, folks,

Sorry, the attactment was scrubed in my previous email since it  cannot be
in a .rar file.   In this email, I changed the file extension to .rar_1.
After grab it, please change back the file extension to .rar to open in rar.



I tried to build a Raster Attribute Table (denoted as RAT below) for a
GeoTiff raster file(attached as ?test.tif?) in C within Visual Studio 2008.
This C file was compiled through and there was no errors reported.

I used GDALSetDefaultRAT function, it was successful. But when I used
GDALRATCreateColumn function to create RAT fields, it was always report
errors. I tested how well the c++ file ?rfc40_tests_hfa.cpp?
works(Downloaded from the GDAL forum). I found this code only works on HFA
driver, i.e., .img grid file, not .tif grid because the same errors occur
when I changed the driver from ?HFA? to ?GTiff?,

 I downloaded and used gdal-110-1500-core.msi, which is gdal 1.10 version
API library for Windows. I worked with C++ under Visual Studio 2008
professional.

 I have attached the GeoTiff file as "test.tif" and my C source code file
"gtiff_rat.c". I also attached the c++ file ?rfc40_tests_hfa.cpp?.

 My question: Is GDAL API able to be used to build a Raster Attribute Table
for GeoTiff raster?

Any help will be appriciated.





 Regards,

Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/4852dce7/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_built_RAT.rar_1
Type: application/octet-stream
Size: 5047 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/4852dce7/attachment.obj>

From srp at geo.ku.dk  Sun Jan 19 16:41:17 2014
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Mon, 20 Jan 2014 00:41:17 +0000
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <1B31D110-CE39-43AF-AE1A-B8DA75CC7466@gmail.com>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>,
	<AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>,
	<1B31D110-CE39-43AF-AE1A-B8DA75CC7466@gmail.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB367D803B28@P1KITMBX05WC03.unicph.domain>

Hi,
Unfortunately that produces a file not found error with filename "65535". If I remove both arguments "-srcnodata" and "65535" then I go back to getting the usage guidelines.

/Simon
________________________________________
Fra: Kurt Schwehr [schwehr at gmail.com]
Sendt: 19. januar 2014 19:00
Til: Simon Richard Proud
Cc: gdal-dev at lists.osgeo.org dev
Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script

have not tested this, but I would guess something like this...

['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos +lon_0=0.0 +h=35785831', '-te', '-5568748.2758 -5568748.4774 5568748.2758 5568748.2758','-tr', '3000.40316582 3000.40316582', '-srcnodata', '65535','TEST.tiff', 'TEST2.tiff']


On Jan 19, 2014, at 3:13 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:

> Ok, that gets things a little closer - now it gives an error: "ERROR 1: Translating source or target SRS failed"
> I tried with '+proj=geos +lon_0=0.0 +h=35785831' as one argument and as three. Same result.
> I also tried including the -te and -tr arguments in the one argument along with the proj details - no luck with that either.
>
> /Simon
> ________________________________________
> Fra: Kurt Schwehr [schwehr at gmail.com]
> Sendt: 19. januar 2014 18:05
> Til: Simon Richard Proud
> Cc: gdal-dev at lists.osgeo.org dev
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
>
>> ,"-r cubicspline",
>
>
> becomes
>
> "-r", "cubicspline",
>
> and so forth
>
> On Jan 19, 2014, at 3:00 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:
>
>> Hi, thanks for the reply.
>>
>> I tried changing the call to this:
>> process.call(["gdalwarp","-q","-multi","-r cubicspline","-t_srs '+proj=geos +lon_0=0.0 +h=35785831'","-te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758","-tr 3000.40316582 3000.40316582","-srcnodata 65535","TEST.tiff","TEST2.tiff"])
>>
>> But still receive just the usage instructions, I can't see any other arguments that can be divided into an element. Setting the "shell=True" option also has no effect.
>>
>> /Simon
>>
>> ________________________________________
>> Fra: Kurt Schwehr [schwehr at gmail.com]
>> Sendt: 19. januar 2014 17:47
>> Til: Simon Richard Proud
>> Cc: gdal-dev at lists.osgeo.org dev
>> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
>>
>> try
>>
>>> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])
>>
>>
>> Each arg must be an element in the list.
>>
>> -kurt
>>
>> On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:
>>
>>> Hi,
>>> I wish to call gdalwarp from within a python script but I cannot get it to
>>> work.
>>>
>>> The command I wish to run is:
>>>
>>> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0 +h=35785831'
>>> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr 3000.40316582
>>> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
>>>
>>> I'm running on Ubuntu 12.04. The above command works perfectly when called
>>> from a terminal window and produces a good output image.
>>>
>>> But when I run from python I get problems.
>>> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
>>> TEST2.tiff"]) then all I see is the default usage instructions. No file is
>>> created. Same if I use popen.
>>>
>>> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
>>> and I see the expected text on the screen. However, in this case the output
>>> file is blank - it is the right size and contains the right georeferencing
>>> information but every pixel in the image has a value of zero.
>>>
>>> Does anyone have an idea what could be the problem here?
>>> Thanks!
>>>
>>>
>>>
>>> --
>>> View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>



From gillingham.sam at gmail.com  Sun Jan 19 16:57:50 2014
From: gillingham.sam at gmail.com (Sam Gillingham)
Date: Mon, 20 Jan 2014 13:57:50 +1300
Subject: [gdal-dev] How to build a Raster Attribute Table for a GeoTiff
 grid file using GDAL API in c only, not c++?
In-Reply-To: <CAPORVSKWhP3szP4TR6om54XCD7BxoCe03TXUjxbrmMFixqse7A@mail.gmail.com>
References: <CAPORVSKWhP3szP4TR6om54XCD7BxoCe03TXUjxbrmMFixqse7A@mail.gmail.com>
Message-ID: <CAMH-Rbb_q8FqhUOpYP=HVJQQPGEOgmyb1H78QXiQ_zzsmPw+cQ@mail.gmail.com>

GeoTiff's do not support Raster Attribute Tables. Try sticking to HFA
instead.

Sam.


On 20 January 2014 12:55, sam sung <samsung460 at gmail.com> wrote:

> Hello, folks,
>
>  I tried to build a Raster Attribute Table (denoted as RAT below) for a
> GeoTiff raster file(attached as ?test.tif?) in C within Visual Studio 2008.
> This C file was compiled through and there was no errors reported.
>
>  I used GDALSetDefaultRAT function, it was successful. But when I used
> GDALRATCreateColumn function to create RAT fields, it was always report
> errors. I tested how well the c++ file ?rfc40_tests_hfa.cpp?
> works(Downloaded from the GDAL forum). I found this code only works on HFA
> driver, i.e., .img grid file, not .tif grid because the same errors occur
> when I changed the driver from ?HFA? to ?GTiff?,
>
>   I downloaded and used gdal-110-1500-core.msi, which is gdal 1.10
> version API library for Windows. I worked with C++ under Visual Studio 2008
> professional.
>
>   I have attached the GeoTiff file as "test.tif" and my C source code
> file "gtiff_rat.c".   I also attached the c++ file ?rfc40_tests_hfa.cpp?.
>
>   My question:   Is GDAL API able to be used to build a Raster Attribute
> Table for GeoTiff raster?
>
>
> Any help will be appriciated.
>
>  Regards,
>
> Sam
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/e44caba6/attachment.html>

From even.rouault at mines-paris.org  Mon Jan 20 00:57:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 20 Jan 2014 09:57:24 +0100
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB367D803B28@P1KITMBX05WC03.unicph.domain>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>,
	<AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>,
	<1B31D110-CE39-43AF-AE1A-B8DA75CC7466@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D803B28@P1KITMBX05WC03.unicph.domain>
Message-ID: <1390208244.52dce4f464bd9@imp.free.fr>

Selon Simon Richard Proud <srp at geo.ku.dk>:

> Hi,
> Unfortunately that produces a file not found error with filename "65535". If
> I remove both arguments "-srcnodata" and "65535" then I go back to getting
> the usage guidelines.

You need to separate also the numerical values after -te and -tr

['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos +lon_0=0.0
+h=35785831', '-te', '-5568748.2758', '-5568748.4774', '5568748.2758',
'5568748.2758','-tr', '3000.40316582', '3000.40316582', '-srcnodata',
'65535','TEST.tiff', 'TEST2.tiff']

>
> /Simon
> ________________________________________
> Fra: Kurt Schwehr [schwehr at gmail.com]
> Sendt: 19. januar 2014 19:00
> Til: Simon Richard Proud
> Cc: gdal-dev at lists.osgeo.org dev
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
>
> have not tested this, but I would guess something like this...
>
> ['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos
> +lon_0=0.0 +h=35785831', '-te', '-5568748.2758 -5568748.4774 5568748.2758
> 5568748.2758','-tr', '3000.40316582 3000.40316582', '-srcnodata',
> '65535','TEST.tiff', 'TEST2.tiff']
>
>
> On Jan 19, 2014, at 3:13 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:
>
> > Ok, that gets things a little closer - now it gives an error: "ERROR 1:
> Translating source or target SRS failed"
> > I tried with '+proj=geos +lon_0=0.0 +h=35785831' as one argument and as
> three. Same result.
> > I also tried including the -te and -tr arguments in the one argument along
> with the proj details - no luck with that either.
> >
> > /Simon
> > ________________________________________
> > Fra: Kurt Schwehr [schwehr at gmail.com]
> > Sendt: 19. januar 2014 18:05
> > Til: Simon Richard Proud
> > Cc: gdal-dev at lists.osgeo.org dev
> > Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
> >
> >> ,"-r cubicspline",
> >
> >
> > becomes
> >
> > "-r", "cubicspline",
> >
> > and so forth
> >
> > On Jan 19, 2014, at 3:00 PM, Simon Richard Proud <srp at geo.ku.dk> wrote:
> >
> >> Hi, thanks for the reply.
> >>
> >> I tried changing the call to this:
> >> process.call(["gdalwarp","-q","-multi","-r cubicspline","-t_srs
> '+proj=geos +lon_0=0.0 +h=35785831'","-te -5568748.2758 -5568748.4774
> 5568748.2758 5568748.2758","-tr 3000.40316582 3000.40316582","-srcnodata
> 65535","TEST.tiff","TEST2.tiff"])
> >>
> >> But still receive just the usage instructions, I can't see any other
> arguments that can be divided into an element. Setting the "shell=True"
> option also has no effect.
> >>
> >> /Simon
> >>
> >> ________________________________________
> >> Fra: Kurt Schwehr [schwehr at gmail.com]
> >> Sendt: 19. januar 2014 17:47
> >> Til: Simon Richard Proud
> >> Cc: gdal-dev at lists.osgeo.org dev
> >> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
> >>
> >> try
> >>
> >>> subprocess.call(["gdalwarp", "-q",  "-multi",   ...   "TEST2.tiff"])
> >>
> >>
> >> Each arg must be an element in the list.
> >>
> >> -kurt
> >>
> >> On Jan 19, 2014, at 2:27 PM, Simon Proud <srp at geo.ku.dk> wrote:
> >>
> >>> Hi,
> >>> I wish to call gdalwarp from within a python script but I cannot get it
> to
> >>> work.
> >>>
> >>> The command I wish to run is:
> >>>
> >>> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0
> +h=35785831'
> >>> -te -5568748.2758 -5568748.4774 5568748.2758 5568748.2758 -tr
> 3000.40316582
> >>> 3000.40316582 -srcnodata 65535 TEST.tiff TEST2.tiff
> >>>
> >>> I'm running on Ubuntu 12.04. The above command works perfectly when
> called
> >>> from a terminal window and produces a good output image.
> >>>
> >>> But when I run from python I get problems.
> >>> First, I tried to run with subprocess.call(["gdalwarp","-q -multi ...
> >>> TEST2.tiff"]) then all I see is the default usage instructions. No file
> is
> >>> created. Same if I use popen.
> >>>
> >>> If I use: os.system("gdalwarp -q -multi ... TEST2.tiff") then it does run
> >>> and I see the expected text on the screen. However, in this case the
> output
> >>> file is blank - it is the right size and contains the right
> georeferencing
> >>> information but every pixel in the image has a value of zero.
> >>>
> >>> Does anyone have an idea what could be the problem here?
> >>> Thanks!
> >>>
> >>>
> >>>
> >>> --
> >>> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Problem-calling-gdalwarp-from-within-python-script-tp5098902.html
> >>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >>
> >
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>







From tim.southern at talktalk.net  Mon Jan 20 02:02:45 2014
From: tim.southern at talktalk.net (Tim Southern)
Date: Mon, 20 Jan 2014 10:02:45 +0000
Subject: [gdal-dev] effects of differences in .tgf and .tab files on Tiff
	imports
Message-ID: <0D6FB1CA-3FE0-4432-BA56-1B718E93E2CA@talktalk.net>

Dear Sir/Madame,

I have recently downloaded a number of historic analogue maps which have associated .twf and .tab files.  I notice that both these text files are required by GDAL for geo-referencing according to the information given on the appropriate web page for inputing tiff/geotiff files.

In this particular case the two files are not compatible with each telling the system slightly different things.  I have copied the contents below.  How will GDAL handle this situation?

Thanks

Tim Southern

.tab file

!table
!version 300
!charset WindowsLatin1

Definition Table
  File "02SU5980.tif"
  Type "RASTER"
  (459000, 181001) (0,0) Label "Pt 1",
  (459999, 181001) (4723,0) Label "Pt 2",
  (459999, 180001) (4723,4723) Label "Pt 3",
  (459000,180001) (0,4723) Label "Pt 4"
  CoordSys Earth Projection 8, 79, "m", -2, 49, 0.9996012717, 400000, -100000


and the .twf file is

0.21168000
0.0000
0.0000
-0.21168000
459000.00000000
181000.00000000

The .tab file gives coordinates for the pixel 0, 0 as 459000, 181001 whereas the .twf file defines the same pixel as 459000, 181000.
The .tab file gives coordinates for the pixel 4723,0 as 459999, 181001 whereas the .twf gives the same pixels as 459999.76464, 181000.
The .tab file gives coordinates for the pixel 4723, 4723 as 459999, 180001 whereas .twf file gives same point as 459999.76464, 180000.23536
The .tab file gives coordinates for the pixel 0, 4723 as 459000, 180001 whereas .twf file gives same point as 459000, 180000.23536

Another obvious difference is .tab file define a rectangle 999 by 1000 metres whereas the .twf file defines a square 999.76464 by 999.76464 metres.



Tim Southern
17, Park Close,
Sonning Common,
Oxfordshire
RG4 9RY



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/9c6d0716/attachment.html>

From sean at mapbox.com  Mon Jan 20 08:56:11 2014
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 20 Jan 2014 09:56:11 -0700
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <1390208244.52dce4f464bd9@imp.free.fr>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>,
	<AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>	<6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>,
	<1B31D110-CE39-43AF-AE1A-B8DA75CC7466@gmail.com>	<6C59A8A933C9B6409067456EC20EAB367D803B28@P1KITMBX05WC03.unicph.domain>
	<1390208244.52dce4f464bd9@imp.free.fr>
Message-ID: <52DD552B.5020107@mapbox.com>

On 1/20/14, 1:57 AM, Even Rouault wrote:
> Selon Simon Richard Proud <srp at geo.ku.dk>:
>
>> Hi,
>> Unfortunately that produces a file not found error with filename "65535". If
>> I remove both arguments "-srcnodata" and "65535" then I go back to getting
>> the usage guidelines.
>
> You need to separate also the numerical values after -te and -tr
>
> ['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos +lon_0=0.0
> +h=35785831', '-te', '-5568748.2758', '-5568748.4774', '5568748.2758',
> '5568748.2758','-tr', '3000.40316582', '3000.40316582', '-srcnodata',
> '65535','TEST.tiff', 'TEST2.tiff']

The shlex.split() function is handy for turning strings that you would 
have passed to os.system() into a list of args for subprocess functions.

     >>> import shlex
     >>> shlex.split('gdalwarp -q -multi -r cubicspline -te 
-5568748.2758 -5568748.4774 5568748.2758 5568748.2758')
     ['gdalwarp', '-q', '-multi', '-r', 'cubicspline', '-te', 
'-5568748.2758', '-5568748.4774', '5568748.2758', '5568748.2758']

...

-- 
Sean Gillies
sean at mapbox.com

From arno at agerrius.nl  Mon Jan 20 12:27:18 2014
From: arno at agerrius.nl (agerrius)
Date: Mon, 20 Jan 2014 12:27:18 -0800 (PST)
Subject: [gdal-dev] OGR functionality to remove holes?
Message-ID: <1390249638161-5099099.post@n6.nabble.com>

Hi all,

Does OGR have any build in functionality to convert features with holes into
features without holes? I don't mean delete the inner rings, but change the
geometry so that it covers the same area with only the outer ring.

I know GlobalMapper has such a function, but it would be useful if I could
perform it in my code directly with the OGR library.

Thanks,

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-functionality-to-remove-holes-tp5099099.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Mon Jan 20 12:36:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 20 Jan 2014 21:36:30 +0100
Subject: [gdal-dev] OGR functionality to remove holes?
In-Reply-To: <1390249638161-5099099.post@n6.nabble.com>
References: <1390249638161-5099099.post@n6.nabble.com>
Message-ID: <201401202136.31224.even.rouault@mines-paris.org>

Le lundi 20 janvier 2014 21:27:18, agerrius a ?crit :
> Hi all,
> 
> Does OGR have any build in functionality to convert features with holes
> into features without holes? I don't mean delete the inner rings, but
> change the geometry so that it covers the same area with only the outer
> ring.

I'm afraid not to understand what you mean. What is the difference between 
deleting inner rings and "changing the geometry so that it covers the same 
area with only the outer ring" ?

There's no one-line invocation for such functionnality. But it can be done 
with the OGR API and a few dozains lines of code.

> 
> I know GlobalMapper has such a function, but it would be useful if I could
> perform it in my code directly with the OGR library.
> 
> Thanks,
> 
> Arno
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/OGR-functionality-to-remove-holes-tp50
> 99099.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lhomme.xavier at gmail.com  Mon Jan 20 12:48:12 2014
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Mon, 20 Jan 2014 21:48:12 +0100
Subject: [gdal-dev] OGR functionality to remove holes?
In-Reply-To: <201401202136.31224.even.rouault@mines-paris.org>
References: <1390249638161-5099099.post@n6.nabble.com>
	<201401202136.31224.even.rouault@mines-paris.org>
Message-ID: <CACqzBMzcSBbaKg3hwYu+RbxVY78Mp8Q7o+ibpmpJ9kU86uznZw@mail.gmail.com>

3D engine doesn't like hole in a polygone.
 A way to render such polygon is to link the outer ring and the inner ring.
(But it's better to use tesselation.)

for example if you have a rectangle ABCD and a triangle describing the hole
( EFG) , you can create a polygone ABCDAEFGA

It's how I understand the question. I don't think you will find such
function in GEOS (or JTS)


2014/1/20 Even Rouault <even.rouault at mines-paris.org>

> Le lundi 20 janvier 2014 21:27:18, agerrius a ?crit :
> > Hi all,
> >
> > Does OGR have any build in functionality to convert features with holes
> > into features without holes? I don't mean delete the inner rings, but
> > change the geometry so that it covers the same area with only the outer
> > ring.
>
> I'm afraid not to understand what you mean. What is the difference between
> deleting inner rings and "changing the geometry so that it covers the same
> area with only the outer ring" ?
>
> There's no one-line invocation for such functionnality. But it can be done
> with the OGR API and a few dozains lines of code.
>
> >
> > I know GlobalMapper has such a function, but it would be useful if I
> could
> > perform it in my code directly with the OGR library.
> >
> > Thanks,
> >
> > Arno
> >
> >
> >
> > --
> > View this message in context:
> >
> http://osgeo-org.1560.x6.nabble.com/OGR-functionality-to-remove-holes-tp50
> > 99099.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140120/d968c204/attachment.html>

From even.rouault at mines-paris.org  Mon Jan 20 12:56:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 20 Jan 2014 21:56:57 +0100
Subject: [gdal-dev] OGR functionality to remove holes?
In-Reply-To: <CACqzBMzcSBbaKg3hwYu+RbxVY78Mp8Q7o+ibpmpJ9kU86uznZw@mail.gmail.com>
References: <1390249638161-5099099.post@n6.nabble.com>
	<201401202136.31224.even.rouault@mines-paris.org>
	<CACqzBMzcSBbaKg3hwYu+RbxVY78Mp8Q7o+ibpmpJ9kU86uznZw@mail.gmail.com>
Message-ID: <201401202156.57533.even.rouault@mines-paris.org>

Le lundi 20 janvier 2014 21:48:12, xavier lhomme a ?crit :
> 3D engine doesn't like hole in a polygone.
>  A way to render such polygon is to link the outer ring and the inner ring.
> (But it's better to use tesselation.)

Ah right tesselation would do it.

> 
> for example if you have a rectangle ABCD and a triangle describing the hole
> ( EFG) , you can create a polygone ABCDAEFGA

Yes, but such description isn't compliant with OGC geometries.

> 
> It's how I understand the question. I don't think you will find such
> function in GEOS (or JTS)
> 
> 
> 2014/1/20 Even Rouault <even.rouault at mines-paris.org>
> 
> > Le lundi 20 janvier 2014 21:27:18, agerrius a ?crit :
> > > Hi all,
> > > 
> > > Does OGR have any build in functionality to convert features with holes
> > > into features without holes? I don't mean delete the inner rings, but
> > > change the geometry so that it covers the same area with only the outer
> > > ring.
> > 
> > I'm afraid not to understand what you mean. What is the difference
> > between deleting inner rings and "changing the geometry so that it
> > covers the same area with only the outer ring" ?
> > 
> > There's no one-line invocation for such functionnality. But it can be
> > done with the OGR API and a few dozains lines of code.
> > 
> > > I know GlobalMapper has such a function, but it would be useful if I
> > 
> > could
> > 
> > > perform it in my code directly with the OGR library.
> > > 
> > > Thanks,
> > > 
> > > Arno
> > > 
> > > 
> > > 
> > > --
> > 
> > > View this message in context:
> > http://osgeo-org.1560.x6.nabble.com/OGR-functionality-to-remove-holes-tp5
> > 0
> > 
> > > 99099.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From peter.zamb at gmail.com  Mon Jan 20 01:40:17 2014
From: peter.zamb at gmail.com (Pietro Zambelli)
Date: Mon, 20 Jan 2014 09:40:17 +0000
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <1390170469862-5098902.post@n6.nabble.com>
References: <1390170469862-5098902.post@n6.nabble.com>
Message-ID: <231702778.Z4QdLbMtT1@thor>

On Sunday 19 Jan 2014 14:27:49 Simon Proud wrote:
> Hi,
> I wish to call gdalwarp from within a python script but I cannot get
> it to work.
> 
> The command I wish to run is:
> 
> gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0
> +h=35785831' -te -5568748.2758 -5568748.4774 5568748.2758
> 5568748.2758 -tr 3000.40316582 3000.40316582 -srcnodata 65535
> TEST.tiff TEST2.tiff

You can run the command directly with:

{{{
cmd = "gdalwarp -q -multi -r cubicspline -t_srs '+proj=geos +lon_0=0.0
 +h=35785831' -te -5568748.2758 -5568748.4774 5568748.2758
 5568748.2758 -tr 3000.40316582 3000.40316582 -srcnodata 65535
 TEST.tiff TEST2.tiff"

Subprocess.Popen(cmd, shell=True)
}}}

See the doc: 
http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module

Pietro

From woodbri at swoodbridge.com  Mon Jan 20 13:46:09 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 20 Jan 2014 16:46:09 -0500
Subject: [gdal-dev] OGR functionality to remove holes?
In-Reply-To: <201401202156.57533.even.rouault@mines-paris.org>
References: <1390249638161-5099099.post@n6.nabble.com>	<201401202136.31224.even.rouault@mines-paris.org>	<CACqzBMzcSBbaKg3hwYu+RbxVY78Mp8Q7o+ibpmpJ9kU86uznZw@mail.gmail.com>
	<201401202156.57533.even.rouault@mines-paris.org>
Message-ID: <52DD9921.6060101@swoodbridge.com>

On 1/20/2014 3:56 PM, Even Rouault wrote:
> Le lundi 20 janvier 2014 21:48:12, xavier lhomme a ?crit :
>> 3D engine doesn't like hole in a polygone.
>>   A way to render such polygon is to link the outer ring and the inner ring.
>> (But it's better to use tesselation.)
>
> Ah right tesselation would do it.
>
>>
>> for example if you have a rectangle ABCD and a triangle describing the hole
>> ( EFG) , you can create a polygone ABCDAEFGA

Actually, I think this would be ABCDAEFGEA and that assumes the the edge 
AE does not intersect any other boundary.

> Yes, but such description isn't compliant with OGC geometries.

Right, but there was a lot of software around that used this convention 
prior to OGC that people still have to deal with. If this is important 
enough, I suspect that it would be possible to create an format driver 
that could convert between this and OGC formats, Or to write a script 
that could convert these to the format needed.

-Steve

>>
>> It's how I understand the question. I don't think you will find such
>> function in GEOS (or JTS)
>>
>>
>> 2014/1/20 Even Rouault <even.rouault at mines-paris.org>
>>
>>> Le lundi 20 janvier 2014 21:27:18, agerrius a ?crit :
>>>> Hi all,
>>>>
>>>> Does OGR have any build in functionality to convert features with holes
>>>> into features without holes? I don't mean delete the inner rings, but
>>>> change the geometry so that it covers the same area with only the outer
>>>> ring.
>>>
>>> I'm afraid not to understand what you mean. What is the difference
>>> between deleting inner rings and "changing the geometry so that it
>>> covers the same area with only the outer ring" ?
>>>
>>> There's no one-line invocation for such functionnality. But it can be
>>> done with the OGR API and a few dozains lines of code.
>>>
>>>> I know GlobalMapper has such a function, but it would be useful if I
>>>
>>> could
>>>
>>>> perform it in my code directly with the OGR library.
>>>>
>>>> Thanks,
>>>>
>>>> Arno
>>>>
>>>>
>>>>
>>>> --
>>>
>>>> View this message in context:
>>> http://osgeo-org.1560.x6.nabble.com/OGR-functionality-to-remove-holes-tp5
>>> 0
>>>
>>>> 99099.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> --
>>> Geospatial professional services
>>> http://even.rouault.free.fr/services.html
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From arno at agerrius.nl  Tue Jan 21 00:04:52 2014
From: arno at agerrius.nl (agerrius)
Date: Tue, 21 Jan 2014 00:04:52 -0800 (PST)
Subject: [gdal-dev] OGR functionality to remove holes?
In-Reply-To: <52DD9921.6060101@swoodbridge.com>
References: <1390249638161-5099099.post@n6.nabble.com>
	<201401202136.31224.even.rouault@mines-paris.org>
	<CACqzBMzcSBbaKg3hwYu+RbxVY78Mp8Q7o+ibpmpJ9kU86uznZw@mail.gmail.com>
	<201401202156.57533.even.rouault@mines-paris.org>
	<52DD9921.6060101@swoodbridge.com>
Message-ID: <1390291492201-5099175.post@n6.nabble.com>

Hi,

Yes, that is indeed what I meant. Sorry, couldn't explain it more clear.

This forum post shows a screenshot of how GlobalMapper updates the polygons
to remove the holes.

http://www.fsdeveloper.com/forum/showpost.php?p=613313&postcount=25

I have already implemented some logic that makes the "seam" to remove the
holes, but that fails on complex polygons with many holes that I created
with GDAL Polygonize. So that's why I was wondering if GDAL itself maybe has
some functionality to get rid of the holes.

But maybe I should more be thinking along the line of splitting the polygon
into chunks, instead of trying to describe it as one polygon with those
seams.

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-functionality-to-remove-holes-tp5099099p5099175.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bobc at bluemarblegeo.com  Tue Jan 21 09:04:51 2014
From: bobc at bluemarblegeo.com (Bob Cave)
Date: Tue, 21 Jan 2014 09:04:51 -0800 (PST)
Subject: [gdal-dev] Reading CurveString and CurvePolygon Geometries from
	FGF Data
In-Reply-To: <201401172347.19465.even.rouault@mines-paris.org>
References: <1389974918061-5098667.post@n6.nabble.com>
	<201401172347.19465.even.rouault@mines-paris.org>
Message-ID: <1390323891823-5099296.post@n6.nabble.com>

Even Rouault wrote
> Le vendredi 17 janvier 2014 17:08:38, Bob Cave a ?crit :
>> Hello,
>> 
>> I am using the OGR Spatialite driver to read a database that has FGF
>> geometries.  Some of the geometries are CurvePolygons, which are not
>> currently supported in OGRGeometryFactory::createFromFgfInternal() as of
>> GDAL 1.10.1.
>> 
>> Is support for FGF CurveString and CurvePolygon geometries currently in
>> development?
> 
> Not that I'm aware of.
> 
> There's not yet support in OGR core for curve geometries, so that would be
> a 
> preliminary step to implement support for the FGF curve geometries. This
> is 
> something that could be part of the big changes for OGR 2.0 
> (http://trac.osgeo.org/gdal/wiki/GDAL20Changes). A few years ago I had
> started 
> preliminary work in a sandbox but didn't pursue.
> 
> Another annoying thing for implementation is that the link in 
> http://trac.osgeo.org/fdo/wiki/FDORfc16 to the FGF binary spec seems to
> have 
> disappeared.
> 
> Do people actually use FDO SQLite databases.... ?

Apparently, one of our customers uses an FDO SQLite database.  

I have seen that the OGR core does not currently support curve geometries,
so these objects could not be handled that way.  I was thinking that perhaps
someone might be working on producing a polyline or polygon representation
of an FGF curve object.

I found the FGF Binary Specification  here
<http://www.osgeo.org/files/fdo/docs/FDG_FDODevGuide/files/WSfacf1429558a55de8821c21057fbebc2b-789.htm> 
.

Thanks,

Bob



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Reading-CurveString-and-CurvePolygon-Geometries-from-FGF-Data-tp5098667p5099296.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Tue Jan 21 09:27:58 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 21 Jan 2014 22:57:58 +0530
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>
Message-ID: <CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>

Ammar,

You are using lossy JPEG compression. I'm guessing that the white lines are
are actually pixels with values near but not equal to 255. So, they are not
treated as nodata pixels.

My suggestion is to use another format with lossless compression for the 21
images or use a mask band if you prefer.

Let me know how it goes.

--
Best regards,
Chaitanya Kumar CH
On 21-Jan-2014 5:31 pm, <ammar83_h at yahoo.com> wrote:

> Hello Chaitanya,
>
> I was looking online for solutions to my problem and I cam across some of
> your posts so I thought you might help me with my problem.
>
> I have 10,000+ TIFF files that I want to merge into one big Image and
> serve using GeoServer. I merged every 500 images at a time creating using
> gdalbuildvrt and gdal_translate along with JPEG compression creating 21
> TIFF files. I added overviews then to each of the new 21 files. When adding
> the images together, once directly as files using QGIS and another time as
> WMSs using GeoServer, I got white lines/gaps precisely at the border of
> ever 2 images. I thought the problem is with no data values but I decided
> to take another approach and merged all the 10,000 files into one huge
> image and this time I got one perfect image with no lines or gaps. I failed
> to create overviews for the big image because the process took days or
> gdaladdo running with no progress. I tested then on smaller images with and
> without overviews and the ones with no overview came perfect while the one
> with gdaladdo overviews came with the same problem of lines and gaps. The
> commands I m using are the following:
>
>  gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs EPSG:27700
> -input_file_list tiff_list.txt mosaic.vrt
>
> gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES -co COMPRESS=JPEG
> -co JPEG_QUALITY=80 -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
> PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif
>
> gdaladdo mosaic.tif -r average --config COMPRESS_OVERVIEW JPEG --config
> JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config
> PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
>
> Any ideas, tips or recommendations would be appreciated!
>
> Best regards,
> Ammar
>
> _____________________________________
> Sent from http://osgeo-org.1560.x6.nabble.com
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140121/300032ac/attachment.html>

From rush at winkey.org  Tue Jan 21 10:47:17 2014
From: rush at winkey.org (Brian Case)
Date: Tue, 21 Jan 2014 10:47:17 -0800
Subject: [gdal-dev] Reading CurveString and CurvePolygon Geometries from
 FGF Data
In-Reply-To: <1390323891823-5099296.post@n6.nabble.com>
References: <1389974918061-5098667.post@n6.nabble.com>
	<201401172347.19465.even.rouault@mines-paris.org>
	<1390323891823-5099296.post@n6.nabble.com>
Message-ID: <1390330037.505.9.camel@octopi>

bob,

if you decide to go the mask band route you wont be able to use a vrt.
you will need to use gdalwarp or mapserver

Brian


On Tue, 2014-01-21 at 09:04 -0800, Bob Cave wrote:
> Even Rouault wrote
> > Le vendredi 17 janvier 2014 17:08:38, Bob Cave a ?crit :
> >> Hello,
> >> 
> >> I am using the OGR Spatialite driver to read a database that has FGF
> >> geometries.  Some of the geometries are CurvePolygons, which are not
> >> currently supported in OGRGeometryFactory::createFromFgfInternal() as of
> >> GDAL 1.10.1.
> >> 
> >> Is support for FGF CurveString and CurvePolygon geometries currently in
> >> development?
> > 
> > Not that I'm aware of.
> > 
> > There's not yet support in OGR core for curve geometries, so that would be
> > a 
> > preliminary step to implement support for the FGF curve geometries. This
> > is 
> > something that could be part of the big changes for OGR 2.0 
> > (http://trac.osgeo.org/gdal/wiki/GDAL20Changes). A few years ago I had
> > started 
> > preliminary work in a sandbox but didn't pursue.
> > 
> > Another annoying thing for implementation is that the link in 
> > http://trac.osgeo.org/fdo/wiki/FDORfc16 to the FGF binary spec seems to
> > have 
> > disappeared.
> > 
> > Do people actually use FDO SQLite databases.... ?
> 
> Apparently, one of our customers uses an FDO SQLite database.  
> 
> I have seen that the OGR core does not currently support curve geometries,
> so these objects could not be handled that way.  I was thinking that perhaps
> someone might be working on producing a polyline or polygon representation
> of an FGF curve object.
> 
> I found the FGF Binary Specification  here
> <http://www.osgeo.org/files/fdo/docs/FDG_FDODevGuide/files/WSfacf1429558a55de8821c21057fbebc2b-789.htm> 
> .
> 
> Thanks,
> 
> Bob
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Reading-CurveString-and-CurvePolygon-Geometries-from-FGF-Data-tp5098667p5099296.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From jason.greenlaw at noaa.gov  Wed Jan 22 11:27:19 2014
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Wed, 22 Jan 2014 14:27:19 -0500
Subject: [gdal-dev] GDAL v1.10.1 - Bad output from gdalwarp (works with
	1.10.0)
Message-ID: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>

When attempting to use a polygon shapefile (in custom web mercator
projection) with the gdalwarp cutline operation, operating on a GeoTIFF
(with same projection), the following error is output in both versions
1.10.0 and 1.10.1:

    ERROR 6: No translation for 'Mercator_Auxiliary_Sphere' to PROJ.4
format is known.

With GDAL 1.10.0, the operation still completes successfully with a zero
exit status, but with GDAL 1.10.1 the operation fails with a nonzero exit
status, and the resulting GeoTIFF has zeros for all pixels.

Here is the command I'm using:

    gdalwarp -co COMPRESS=LZW -cutline oceans_glakes_50m_3857.shp
-srcnodata 9999.0 -dstnodata 9999.0 -overwrite sst_global.tif
sst_global_cut.tif


The input shapefile was produced by reprojecting with ogr2ogr from
EPSG:4326 to my custom projection (WKT is included below), which is stored
in a *.prf file.  The source GeoTIFF is single-band with Float32 pixel type.

The custom WKT can be found here:  http://jgreenlaw.org/gdal/esri-3857.prf

The cutline shapefile can be downloaded at:
http://jgreenlaw.org/gdal/oceans_glakes_50m_3857.tar.gz (900kb)

The source GeoTIFF can be generated from this FLT/HDR raster:
http://jgreenlaw.org/gdal/sst_flt.tar.gz (11mb) by running these commands:

    gdalwarp -s_srs EPSG:4326 -t_srs esri-3857.prf -r bilinear -srcnodata
9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
TILED=yes sst.flt sst_projected.tif

    gdalwarp -co COMPRESS=LZW -te -20037507.0671618 -19971868.8804086
20037507.0671618 19971868.8804086 -srcnodata 9999.0 -dstnodata 9999.0 -tr
4000 9000 sst_projected.tif sst_global.tif

Does anyone know if this behavior is to be expected when the above error is
output?  Is there a better method for reprojecting to Web Mercator that
will align properly in ArcGIS?

Thanks
-Jason


Background:
The reason for using custom WKT for reprojecting to Web Mercator is because
I have experienced alignment problems displaying GDAL-produced GeoTIFFs in
ArcGIS when reprojecting using "EPSG:3857" as the target SRS (this seems to
be related to http://trac.osgeo.org/gdal/ticket/3962).

I generated the WKT below by copying the 102113 definition in
$GDAL_DATA/esri_extra.wkt and merging information from an ESRI Web Mercator
*.prj file.  Using this custom WKT as the target SRS with gdalwarp normally
results in rasters that align properly with ArcGIS Web Mercator data
(without on-the-fly datum transformation).


----------------------------------------------------------------------------------------------
Custom WKT for reprojecting to ESRI Web Mercator using GDAL (
http://jgreenlaw.org/gdal/esri-3857.prf):
----------------------------------------------------------------------------------------------

PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',
    GEOGCS['GCS_WGS_1984',
        DATUM['D_WGS_1984',
            SPHEROID['WGS_1984',6378137.0,298.257223563]
        ],
        PRIMEM['Greenwich',0.0],
        UNIT['Degree',0.0174532925199433]
    ],
    PROJECTION['Mercator_Auxiliary_Sphere'],
    PARAMETER['False_Easting',0.0],
    PARAMETER['False_Northing',0.0],
    PARAMETER['Central_Meridian',0.0],
    PARAMETER['latitude_of_origin',0.0],
    PARAMETER['Standard_Parallel_1',0.0],
    PARAMETER['Auxiliary_Sphere_Type',0.0],
    UNIT['Meter',1.0],
    EXTENSION["PROJ4",
        "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0
+x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
    ],
    AUTHORITY["EPSG","3857"]
]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140122/801f9788/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 22 12:07:19 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 22 Jan 2014 21:07:19 +0100
Subject: [gdal-dev] GDAL v1.10.1 - Bad output from gdalwarp (works with
	1.10.0)
In-Reply-To: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>
References: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>
Message-ID: <201401222107.19890.even.rouault@mines-paris.org>

Le mercredi 22 janvier 2014 20:27:19, Jason Greenlaw - NOAA Affiliate a ?crit :
> When attempting to use a polygon shapefile (in custom web mercator
> projection) with the gdalwarp cutline operation, operating on a GeoTIFF
> (with same projection), the following error is output in both versions
> 1.10.0 and 1.10.1:
> 
>     ERROR 6: No translation for 'Mercator_Auxiliary_Sphere' to PROJ.4
> format is known.

The issue is that esri-3857.prf contains single quote characters instead of 
double quotes, and oceans_glakes_50m_3857.prj contain single quotes inside 
double quotes. Both are not valid AFAIK

You should be able to overcome this with :

ogr2ogr -a_srs EPSG:3857 oceans_glakes_50m_3857.shp 
oceans_glakes_50m_3857_fixed.shp

and

gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -r bilinear -srcnodata
 9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
TILED=yes sst.flt sst_projected.tif

> 
> With GDAL 1.10.0, the operation still completes successfully with a zero
> exit status, but with GDAL 1.10.1 the operation fails with a nonzero exit
> status, and the resulting GeoTIFF has zeros for all pixels.
> 
> Here is the command I'm using:
> 
>     gdalwarp -co COMPRESS=LZW -cutline oceans_glakes_50m_3857.shp
> -srcnodata 9999.0 -dstnodata 9999.0 -overwrite sst_global.tif
> sst_global_cut.tif
> 
> 
> The input shapefile was produced by reprojecting with ogr2ogr from
> EPSG:4326 to my custom projection (WKT is included below), which is stored
> in a *.prf file.  The source GeoTIFF is single-band with Float32 pixel
> type.
> 
> The custom WKT can be found here:  http://jgreenlaw.org/gdal/esri-3857.prf
> 
> The cutline shapefile can be downloaded at:
> http://jgreenlaw.org/gdal/oceans_glakes_50m_3857.tar.gz (900kb)
> 
> The source GeoTIFF can be generated from this FLT/HDR raster:
> http://jgreenlaw.org/gdal/sst_flt.tar.gz (11mb) by running these commands:
> 
>     gdalwarp -s_srs EPSG:4326 -t_srs esri-3857.prf -r bilinear -srcnodata
> 9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
> TILED=yes sst.flt sst_projected.tif
> 
>     gdalwarp -co COMPRESS=LZW -te -20037507.0671618 -19971868.8804086
> 20037507.0671618 19971868.8804086 -srcnodata 9999.0 -dstnodata 9999.0 -tr
> 4000 9000 sst_projected.tif sst_global.tif
> 
> Does anyone know if this behavior is to be expected when the above error is
> output?  Is there a better method for reprojecting to Web Mercator that
> will align properly in ArcGIS?
> 
> Thanks
> -Jason
> 
> 
> Background:
> The reason for using custom WKT for reprojecting to Web Mercator is because
> I have experienced alignment problems displaying GDAL-produced GeoTIFFs in
> ArcGIS when reprojecting using "EPSG:3857" as the target SRS (this seems to
> be related to http://trac.osgeo.org/gdal/ticket/3962).
> 
> I generated the WKT below by copying the 102113 definition in
> $GDAL_DATA/esri_extra.wkt and merging information from an ESRI Web Mercator
> *.prj file.  Using this custom WKT as the target SRS with gdalwarp normally
> results in rasters that align properly with ArcGIS Web Mercator data
> (without on-the-fly datum transformation).
> 
> 
> ---------------------------------------------------------------------------
> ------------------- Custom WKT for reprojecting to ESRI Web Mercator using
> GDAL (
> http://jgreenlaw.org/gdal/esri-3857.prf):
> ---------------------------------------------------------------------------
> -------------------
> 
> PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',
>     GEOGCS['GCS_WGS_1984',
>         DATUM['D_WGS_1984',
>             SPHEROID['WGS_1984',6378137.0,298.257223563]
>         ],
>         PRIMEM['Greenwich',0.0],
>         UNIT['Degree',0.0174532925199433]
>     ],
>     PROJECTION['Mercator_Auxiliary_Sphere'],
>     PARAMETER['False_Easting',0.0],
>     PARAMETER['False_Northing',0.0],
>     PARAMETER['Central_Meridian',0.0],
>     PARAMETER['latitude_of_origin',0.0],
>     PARAMETER['Standard_Parallel_1',0.0],
>     PARAMETER['Auxiliary_Sphere_Type',0.0],
>     UNIT['Meter',1.0],
>     EXTENSION["PROJ4",
>         "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0
> +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
>     ],
>     AUTHORITY["EPSG","3857"]
> ]

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jason.greenlaw at noaa.gov  Wed Jan 22 13:09:33 2014
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Wed, 22 Jan 2014 16:09:33 -0500
Subject: [gdal-dev] GDAL v1.10.1 - Bad output from gdalwarp (works with
	1.10.0)
In-Reply-To: <201401222107.19890.even.rouault@mines-paris.org>
References: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>
	<201401222107.19890.even.rouault@mines-paris.org>
Message-ID: <CAAoP0JyUxV4MMLpy2Vj4LR=OqOX5pe90WsyWz6GPj58FEPTpcA@mail.gmail.com>

Even,

Thank you for catching the quote problem.  I've fixed my WKT accordingly.

Unfortunately altering the SRS to GDAL's default EPSG:3857 definition
results in the same alignment problem when viewed in ArcGIS Desktop/Server,
so I altered it back to my custom WKT (using double quotes this time) - now
it's aligning properly again, but I'm still seeing the same error:

    ERROR 6: No translation for Mercator_Auxiliary_Sphere to PROJ.4 format
is known.

It still produces valid output with 1.10.0, but with 1.10.1 it still exits
prematurely with status 1 and produces an all-zero image.

It seems that something was changed between 1.10.0 and 1.10.1 that made
this a fatal error.

Thanks,
Jason


On Wed, Jan 22, 2014 at 3:07 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 22 janvier 2014 20:27:19, Jason Greenlaw - NOAA Affiliate a
> ?crit :
> > When attempting to use a polygon shapefile (in custom web mercator
> > projection) with the gdalwarp cutline operation, operating on a GeoTIFF
> > (with same projection), the following error is output in both versions
> > 1.10.0 and 1.10.1:
> >
> >     ERROR 6: No translation for 'Mercator_Auxiliary_Sphere' to PROJ.4
> > format is known.
>
> The issue is that esri-3857.prf contains single quote characters instead of
> double quotes, and oceans_glakes_50m_3857.prj contain single quotes inside
> double quotes. Both are not valid AFAIK
>
> You should be able to overcome this with :
>
> ogr2ogr -a_srs EPSG:3857 oceans_glakes_50m_3857.shp
> oceans_glakes_50m_3857_fixed.shp
>
> and
>
> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -r bilinear -srcnodata
>  9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
> TILED=yes sst.flt sst_projected.tif
>
> >
> > With GDAL 1.10.0, the operation still completes successfully with a zero
> > exit status, but with GDAL 1.10.1 the operation fails with a nonzero exit
> > status, and the resulting GeoTIFF has zeros for all pixels.
> >
> > Here is the command I'm using:
> >
> >     gdalwarp -co COMPRESS=LZW -cutline oceans_glakes_50m_3857.shp
> > -srcnodata 9999.0 -dstnodata 9999.0 -overwrite sst_global.tif
> > sst_global_cut.tif
> >
> >
> > The input shapefile was produced by reprojecting with ogr2ogr from
> > EPSG:4326 to my custom projection (WKT is included below), which is
> stored
> > in a *.prf file.  The source GeoTIFF is single-band with Float32 pixel
> > type.
> >
> > The custom WKT can be found here:
> http://jgreenlaw.org/gdal/esri-3857.prf
> >
> > The cutline shapefile can be downloaded at:
> > http://jgreenlaw.org/gdal/oceans_glakes_50m_3857.tar.gz (900kb)
> >
> > The source GeoTIFF can be generated from this FLT/HDR raster:
> > http://jgreenlaw.org/gdal/sst_flt.tar.gz (11mb) by running these
> commands:
> >
> >     gdalwarp -s_srs EPSG:4326 -t_srs esri-3857.prf -r bilinear -srcnodata
> > 9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
> > TILED=yes sst.flt sst_projected.tif
> >
> >     gdalwarp -co COMPRESS=LZW -te -20037507.0671618 -19971868.8804086
> > 20037507.0671618 19971868.8804086 -srcnodata 9999.0 -dstnodata 9999.0 -tr
> > 4000 9000 sst_projected.tif sst_global.tif
> >
> > Does anyone know if this behavior is to be expected when the above error
> is
> > output?  Is there a better method for reprojecting to Web Mercator that
> > will align properly in ArcGIS?
> >
> > Thanks
> > -Jason
> >
> >
> > Background:
> > The reason for using custom WKT for reprojecting to Web Mercator is
> because
> > I have experienced alignment problems displaying GDAL-produced GeoTIFFs
> in
> > ArcGIS when reprojecting using "EPSG:3857" as the target SRS (this seems
> to
> > be related to http://trac.osgeo.org/gdal/ticket/3962).
> >
> > I generated the WKT below by copying the 102113 definition in
> > $GDAL_DATA/esri_extra.wkt and merging information from an ESRI Web
> Mercator
> > *.prj file.  Using this custom WKT as the target SRS with gdalwarp
> normally
> > results in rasters that align properly with ArcGIS Web Mercator data
> > (without on-the-fly datum transformation).
> >
> >
> >
> ---------------------------------------------------------------------------
> > ------------------- Custom WKT for reprojecting to ESRI Web Mercator
> using
> > GDAL (
> > http://jgreenlaw.org/gdal/esri-3857.prf):
> >
> ---------------------------------------------------------------------------
> > -------------------
> >
> > PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',
> >     GEOGCS['GCS_WGS_1984',
> >         DATUM['D_WGS_1984',
> >             SPHEROID['WGS_1984',6378137.0,298.257223563]
> >         ],
> >         PRIMEM['Greenwich',0.0],
> >         UNIT['Degree',0.0174532925199433]
> >     ],
> >     PROJECTION['Mercator_Auxiliary_Sphere'],
> >     PARAMETER['False_Easting',0.0],
> >     PARAMETER['False_Northing',0.0],
> >     PARAMETER['Central_Meridian',0.0],
> >     PARAMETER['latitude_of_origin',0.0],
> >     PARAMETER['Standard_Parallel_1',0.0],
> >     PARAMETER['Auxiliary_Sphere_Type',0.0],
> >     UNIT['Meter',1.0],
> >     EXTENSION["PROJ4",
> >         "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0
> +lon_0=0.0
> > +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
> >     ],
> >     AUTHORITY["EPSG","3857"]
> > ]
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140122/f970cfae/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 22 13:18:07 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 22 Jan 2014 22:18:07 +0100
Subject: [gdal-dev] GDAL v1.10.1 - Bad output from gdalwarp (works with
	1.10.0)
In-Reply-To: <CAAoP0JyUxV4MMLpy2Vj4LR=OqOX5pe90WsyWz6GPj58FEPTpcA@mail.gmail.com>
References: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>
	<201401222107.19890.even.rouault@mines-paris.org>
	<CAAoP0JyUxV4MMLpy2Vj4LR=OqOX5pe90WsyWz6GPj58FEPTpcA@mail.gmail.com>
Message-ID: <201401222218.07545.even.rouault@mines-paris.org>

Le mercredi 22 janvier 2014 22:09:33, Jason Greenlaw - NOAA Affiliate a ?crit :
> Even,
> 
> Thank you for catching the quote problem.  I've fixed my WKT accordingly.
> 
> Unfortunately altering the SRS to GDAL's default EPSG:3857 definition
> results in the same alignment problem when viewed in ArcGIS Desktop/Server,
> so I altered it back to my custom WKT (using double quotes this time) - now
> it's aligning properly again, but I'm still seeing the same error:
> 
>     ERROR 6: No translation for Mercator_Auxiliary_Sphere to PROJ.4 format
> is known.

Yes, this is an issue. Nobody agrees on how to represent WebMercator in WKT. 
There's a ticket pending in Trac about that.

While looking at the .prj, I see a difference in the EXTENSION["PROJ4" node 
w.r.t what GDAL does.

The .prj has :
"+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 
+y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"

Whereas gdalsrsinfo EPSG:3857 shows :
"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 
+k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"

So the ESRI stuff uses a non-spheric ellipsoid, which I believe is wrong...

You can probably get the same result as ESRI by using the "+proj=merc 
+a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 
+k=1.0 +units=m +nadgrids=@null +wktext +no_defs" as -a_srs value.


> 
> It still produces valid output with 1.10.0, but with 1.10.1 it still exits
> prematurely with status 1 and produces an all-zero image.
> 
> It seems that something was changed between 1.10.0 and 1.10.1 that made
> this a fatal error.

I don't see anything obvious in the log that explain the behavioural change, 
but erroring out make sense when there's an error... So 1.10.1 behaviour seems 
OK.

> 
> Thanks,
> Jason
> 
> 
> On Wed, Jan 22, 2014 at 3:07 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > Le mercredi 22 janvier 2014 20:27:19, Jason Greenlaw - NOAA Affiliate a
> > 
> > ?crit :
> > > When attempting to use a polygon shapefile (in custom web mercator
> > > projection) with the gdalwarp cutline operation, operating on a GeoTIFF
> > > (with same projection), the following error is output in both versions
> > > 
> > > 1.10.0 and 1.10.1:
> > >     ERROR 6: No translation for 'Mercator_Auxiliary_Sphere' to PROJ.4
> > > 
> > > format is known.
> > 
> > The issue is that esri-3857.prf contains single quote characters instead
> > of double quotes, and oceans_glakes_50m_3857.prj contain single quotes
> > inside double quotes. Both are not valid AFAIK
> > 
> > You should be able to overcome this with :
> > 
> > ogr2ogr -a_srs EPSG:3857 oceans_glakes_50m_3857.shp
> > oceans_glakes_50m_3857_fixed.shp
> > 
> > and
> > 
> > gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -r bilinear -srcnodata
> > 
> >  9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
> > 
> > TILED=yes sst.flt sst_projected.tif
> > 
> > > With GDAL 1.10.0, the operation still completes successfully with a
> > > zero exit status, but with GDAL 1.10.1 the operation fails with a
> > > nonzero exit status, and the resulting GeoTIFF has zeros for all
> > > pixels.
> > > 
> > > Here is the command I'm using:
> > >     gdalwarp -co COMPRESS=LZW -cutline oceans_glakes_50m_3857.shp
> > > 
> > > -srcnodata 9999.0 -dstnodata 9999.0 -overwrite sst_global.tif
> > > sst_global_cut.tif
> > > 
> > > 
> > > The input shapefile was produced by reprojecting with ogr2ogr from
> > > EPSG:4326 to my custom projection (WKT is included below), which is
> > 
> > stored
> > 
> > > in a *.prf file.  The source GeoTIFF is single-band with Float32 pixel
> > > type.
> > 
> > > The custom WKT can be found here:
> > http://jgreenlaw.org/gdal/esri-3857.prf
> > 
> > > The cutline shapefile can be downloaded at:
> > > http://jgreenlaw.org/gdal/oceans_glakes_50m_3857.tar.gz (900kb)
> > > 
> > > The source GeoTIFF can be generated from this FLT/HDR raster:
> > > http://jgreenlaw.org/gdal/sst_flt.tar.gz (11mb) by running these
> > 
> > commands:
> > >     gdalwarp -s_srs EPSG:4326 -t_srs esri-3857.prf -r bilinear
> > >     -srcnodata
> > > 
> > > 9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
> > > TILED=yes sst.flt sst_projected.tif
> > > 
> > >     gdalwarp -co COMPRESS=LZW -te -20037507.0671618 -19971868.8804086
> > > 
> > > 20037507.0671618 19971868.8804086 -srcnodata 9999.0 -dstnodata 9999.0
> > > -tr 4000 9000 sst_projected.tif sst_global.tif
> > > 
> > > Does anyone know if this behavior is to be expected when the above
> > > error
> > 
> > is
> > 
> > > output?  Is there a better method for reprojecting to Web Mercator that
> > > will align properly in ArcGIS?
> > > 
> > > Thanks
> > > -Jason
> > > 
> > > 
> > > Background:
> > > The reason for using custom WKT for reprojecting to Web Mercator is
> > 
> > because
> > 
> > > I have experienced alignment problems displaying GDAL-produced GeoTIFFs
> > 
> > in
> > 
> > > ArcGIS when reprojecting using "EPSG:3857" as the target SRS (this
> > > seems
> > 
> > to
> > 
> > > be related to http://trac.osgeo.org/gdal/ticket/3962).
> > > 
> > > I generated the WKT below by copying the 102113 definition in
> > > $GDAL_DATA/esri_extra.wkt and merging information from an ESRI Web
> > 
> > Mercator
> > 
> > > *.prj file.  Using this custom WKT as the target SRS with gdalwarp
> > 
> > normally
> > 
> > > results in rasters that align properly with ArcGIS Web Mercator data
> > > (without on-the-fly datum transformation).
> > 
> > -------------------------------------------------------------------------
> > --
> > 
> > > ------------------- Custom WKT for reprojecting to ESRI Web Mercator
> > 
> > using
> > 
> > > GDAL (
> > 
> > > http://jgreenlaw.org/gdal/esri-3857.prf):
> > -------------------------------------------------------------------------
> > --
> > 
> > > -------------------
> > > 
> > > PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',
> > > 
> > >     GEOGCS['GCS_WGS_1984',
> > >     
> > >         DATUM['D_WGS_1984',
> > >         
> > >             SPHEROID['WGS_1984',6378137.0,298.257223563]
> > >         
> > >         ],
> > >         PRIMEM['Greenwich',0.0],
> > >         UNIT['Degree',0.0174532925199433]
> > >     
> > >     ],
> > >     PROJECTION['Mercator_Auxiliary_Sphere'],
> > >     PARAMETER['False_Easting',0.0],
> > >     PARAMETER['False_Northing',0.0],
> > >     PARAMETER['Central_Meridian',0.0],
> > >     PARAMETER['latitude_of_origin',0.0],
> > >     PARAMETER['Standard_Parallel_1',0.0],
> > >     PARAMETER['Auxiliary_Sphere_Type',0.0],
> > >     UNIT['Meter',1.0],
> > >     EXTENSION["PROJ4",
> > >     
> > >         "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0
> > 
> > +lon_0=0.0
> > 
> > > +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
> > > 
> > >     ],
> > >     AUTHORITY["EPSG","3857"]
> > > 
> > > ]
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jason.greenlaw at noaa.gov  Wed Jan 22 13:40:38 2014
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Wed, 22 Jan 2014 16:40:38 -0500
Subject: [gdal-dev] GDAL v1.10.1 - Bad output from gdalwarp (works with
	1.10.0)
In-Reply-To: <201401222218.07545.even.rouault@mines-paris.org>
References: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>
	<201401222107.19890.even.rouault@mines-paris.org>
	<CAAoP0JyUxV4MMLpy2Vj4LR=OqOX5pe90WsyWz6GPj58FEPTpcA@mail.gmail.com>
	<201401222218.07545.even.rouault@mines-paris.org>
Message-ID: <CAAoP0Jw_MXPpu=9e2ShOmoxHGiJKtupBTfsvYqQe98tRoQi3YQ@mail.gmail.com>

Yes, ESRI does seem to have their own way of doing things, so it's not too
surprising.

What's strange is that an ESRI-generated .prj file for EPSG:3857 looks
something like this (no mention of the semi-minor axis):

PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",
GEOGCS["GCS_WGS_1984",
DATUM["D_WGS_1984",
SPHEROID["WGS_1984",6378137.0,298.257223563]
],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]
],
PROJECTION["Mercator_Auxiliary_Sphere"],
PARAMETER["False_Easting",0.0],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",0.0],
PARAMETER["Standard_Parallel_1",0.0],
PARAMETER["Auxiliary_Sphere_Type",0.0],
UNIT["Meter",1.0],
AUTHORITY["EPSG",3857]
]



But in the ArcGIS GUI, the details of the projection are reported as the
following, with the modified semi-minor axis (this is what I used to modify
the proj4 string in my WKT):

WGS_1984_Web_Mercator_Auxiliary_Sphere
WKID: 3857 Authority: EPSG

Projection: Mercator_Auxiliary_Sphere
False_Easting: 0.0
False_Northing: 0.0
Central_Meridian: 0.0
Standard_Parallel_1: 0.0
Auxiliary_Sphere_Type: 0.0
Linear Unit: Meter (1.0)

Geographic Coordinate System: GCS_WGS_1984
Angular Unit: Degree (0.0174532925199433)
Prime Meridian: Greenwich (0.0)
Datum: D_WGS_1984
  Spheroid: WGS_1984
    Semimajor Axis: 6378137.0
    Semiminor Axis: 6356752.314245179
    Inverse Flattening: 298.257223563


Jason


On Wed, Jan 22, 2014 at 4:18 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 22 janvier 2014 22:09:33, Jason Greenlaw - NOAA Affiliate a
> ?crit :
> > Even,
> >
> > Thank you for catching the quote problem.  I've fixed my WKT accordingly.
> >
> > Unfortunately altering the SRS to GDAL's default EPSG:3857 definition
> > results in the same alignment problem when viewed in ArcGIS
> Desktop/Server,
> > so I altered it back to my custom WKT (using double quotes this time) -
> now
> > it's aligning properly again, but I'm still seeing the same error:
> >
> >     ERROR 6: No translation for Mercator_Auxiliary_Sphere to PROJ.4
> format
> > is known.
>
> Yes, this is an issue. Nobody agrees on how to represent WebMercator in
> WKT.
> There's a ticket pending in Trac about that.
>
> While looking at the .prj, I see a difference in the EXTENSION["PROJ4" node
> w.r.t what GDAL does.
>
> The .prj has :
> "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0
> +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
>
> Whereas gdalsrsinfo EPSG:3857 shows :
> "+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0
> +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"
>
> So the ESRI stuff uses a non-spheric ellipsoid, which I believe is wrong...
>
> You can probably get the same result as ESRI by using the "+proj=merc
> +a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0
> +k=1.0 +units=m +nadgrids=@null +wktext +no_defs" as -a_srs value.
>
>
> >
> > It still produces valid output with 1.10.0, but with 1.10.1 it still
> exits
> > prematurely with status 1 and produces an all-zero image.
> >
> > It seems that something was changed between 1.10.0 and 1.10.1 that made
> > this a fatal error.
>
> I don't see anything obvious in the log that explain the behavioural
> change,
> but erroring out make sense when there's an error... So 1.10.1 behaviour
> seems
> OK.
>
> >
> > Thanks,
> > Jason
> >
> >
> > On Wed, Jan 22, 2014 at 3:07 PM, Even Rouault
> >
> > <even.rouault at mines-paris.org>wrote:
> > > Le mercredi 22 janvier 2014 20:27:19, Jason Greenlaw - NOAA Affiliate a
> > >
> > > ?crit :
> > > > When attempting to use a polygon shapefile (in custom web mercator
> > > > projection) with the gdalwarp cutline operation, operating on a
> GeoTIFF
> > > > (with same projection), the following error is output in both
> versions
> > > >
> > > > 1.10.0 and 1.10.1:
> > > >     ERROR 6: No translation for 'Mercator_Auxiliary_Sphere' to PROJ.4
> > > >
> > > > format is known.
> > >
> > > The issue is that esri-3857.prf contains single quote characters
> instead
> > > of double quotes, and oceans_glakes_50m_3857.prj contain single quotes
> > > inside double quotes. Both are not valid AFAIK
> > >
> > > You should be able to overcome this with :
> > >
> > > ogr2ogr -a_srs EPSG:3857 oceans_glakes_50m_3857.shp
> > > oceans_glakes_50m_3857_fixed.shp
> > >
> > > and
> > >
> > > gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -r bilinear -srcnodata
> > >
> > >  9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW -co
> > >
> > > TILED=yes sst.flt sst_projected.tif
> > >
> > > > With GDAL 1.10.0, the operation still completes successfully with a
> > > > zero exit status, but with GDAL 1.10.1 the operation fails with a
> > > > nonzero exit status, and the resulting GeoTIFF has zeros for all
> > > > pixels.
> > > >
> > > > Here is the command I'm using:
> > > >     gdalwarp -co COMPRESS=LZW -cutline oceans_glakes_50m_3857.shp
> > > >
> > > > -srcnodata 9999.0 -dstnodata 9999.0 -overwrite sst_global.tif
> > > > sst_global_cut.tif
> > > >
> > > >
> > > > The input shapefile was produced by reprojecting with ogr2ogr from
> > > > EPSG:4326 to my custom projection (WKT is included below), which is
> > >
> > > stored
> > >
> > > > in a *.prf file.  The source GeoTIFF is single-band with Float32
> pixel
> > > > type.
> > >
> > > > The custom WKT can be found here:
> > > http://jgreenlaw.org/gdal/esri-3857.prf
> > >
> > > > The cutline shapefile can be downloaded at:
> > > > http://jgreenlaw.org/gdal/oceans_glakes_50m_3857.tar.gz (900kb)
> > > >
> > > > The source GeoTIFF can be generated from this FLT/HDR raster:
> > > > http://jgreenlaw.org/gdal/sst_flt.tar.gz (11mb) by running these
> > >
> > > commands:
> > > >     gdalwarp -s_srs EPSG:4326 -t_srs esri-3857.prf -r bilinear
> > > >     -srcnodata
> > > >
> > > > 9999.0 -dstnodata 9999.0 -tr 4000 9000 -overwrite -co COMPRESS=LZW
> -co
> > > > TILED=yes sst.flt sst_projected.tif
> > > >
> > > >     gdalwarp -co COMPRESS=LZW -te -20037507.0671618 -19971868.8804086
> > > >
> > > > 20037507.0671618 19971868.8804086 -srcnodata 9999.0 -dstnodata 9999.0
> > > > -tr 4000 9000 sst_projected.tif sst_global.tif
> > > >
> > > > Does anyone know if this behavior is to be expected when the above
> > > > error
> > >
> > > is
> > >
> > > > output?  Is there a better method for reprojecting to Web Mercator
> that
> > > > will align properly in ArcGIS?
> > > >
> > > > Thanks
> > > > -Jason
> > > >
> > > >
> > > > Background:
> > > > The reason for using custom WKT for reprojecting to Web Mercator is
> > >
> > > because
> > >
> > > > I have experienced alignment problems displaying GDAL-produced
> GeoTIFFs
> > >
> > > in
> > >
> > > > ArcGIS when reprojecting using "EPSG:3857" as the target SRS (this
> > > > seems
> > >
> > > to
> > >
> > > > be related to http://trac.osgeo.org/gdal/ticket/3962).
> > > >
> > > > I generated the WKT below by copying the 102113 definition in
> > > > $GDAL_DATA/esri_extra.wkt and merging information from an ESRI Web
> > >
> > > Mercator
> > >
> > > > *.prj file.  Using this custom WKT as the target SRS with gdalwarp
> > >
> > > normally
> > >
> > > > results in rasters that align properly with ArcGIS Web Mercator data
> > > > (without on-the-fly datum transformation).
> > >
> > >
> -------------------------------------------------------------------------
> > > --
> > >
> > > > ------------------- Custom WKT for reprojecting to ESRI Web Mercator
> > >
> > > using
> > >
> > > > GDAL (
> > >
> > > > http://jgreenlaw.org/gdal/esri-3857.prf):
> > >
> -------------------------------------------------------------------------
> > > --
> > >
> > > > -------------------
> > > >
> > > > PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',
> > > >
> > > >     GEOGCS['GCS_WGS_1984',
> > > >
> > > >         DATUM['D_WGS_1984',
> > > >
> > > >             SPHEROID['WGS_1984',6378137.0,298.257223563]
> > > >
> > > >         ],
> > > >         PRIMEM['Greenwich',0.0],
> > > >         UNIT['Degree',0.0174532925199433]
> > > >
> > > >     ],
> > > >     PROJECTION['Mercator_Auxiliary_Sphere'],
> > > >     PARAMETER['False_Easting',0.0],
> > > >     PARAMETER['False_Northing',0.0],
> > > >     PARAMETER['Central_Meridian',0.0],
> > > >     PARAMETER['latitude_of_origin',0.0],
> > > >     PARAMETER['Standard_Parallel_1',0.0],
> > > >     PARAMETER['Auxiliary_Sphere_Type',0.0],
> > > >     UNIT['Meter',1.0],
> > > >     EXTENSION["PROJ4",
> > > >
> > > >         "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0
> > >
> > > +lon_0=0.0
> > >
> > > > +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
> > > >
> > > >     ],
> > > >     AUTHORITY["EPSG","3857"]
> > > >
> > > > ]
> > >
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140122/86117b87/attachment.html>

From jea at hbaspecto.com  Wed Jan 22 14:14:01 2014
From: jea at hbaspecto.com (John Abraham)
Date: Wed, 22 Jan 2014 15:14:01 -0700
Subject: [gdal-dev] gdaldem slope with -s 111120.0 works only at equator for
	lat/lon?
Message-ID: <F1428391-0432-4635-82D7-60B92BD2AAA5@hbaspecto.com>

Please help me with something potentially important.  The documentation for gdaldem slope says ?If the horizontal unit of the source DEM is degrees (e.g Lat/Long WGS84 projection), you can use scale=111120 if the vertical units are meters? but I don?t think this works very far away from the equator.  I think the algorithm assumes that the north-south units are the same as the east-west units, whereas obviously away from the equator degrees of longitude become a lot shorter.

I?m looking at my attempt at avalanche slope mapping, and seem to see east-west slopes showing up with higher slopes than north-south slopes with identically spaced contour intervals.

Am I right?  Or am I seeing things?

If I?m right, perhaps:

1) Someone should fix the documentation, so that people don?t rely on incorrect slope calculations for something life-critical such as avalanche slope mapping, and

2) Someone could tell me a better solution, I think perhaps the best idea is to just resample the grid into a projection based on meters, before applying gdaldem without any scaling factor.

Thanks for your help. This has been bugging me for sometime, but I finally decided to speak up.

?
John Abraham
jea at hbaspecto.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140122/81c33018/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Wed Jan 22 23:37:27 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 23 Jan 2014 07:37:27 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?GDAL_v1=2E10=2E1_-_Bad_output_from_gdalwarp_?=
	=?utf-8?b?KHdvcmtzIHdpdGgJMS4xMC4wKQ==?=
References: <CAAoP0JwqgUQD3KDZp=Y2cWj4y9OxF78L_xaEXmkU0d4TXSy93w@mail.gmail.com>
	<201401222107.19890.even.rouault@mines-paris.org>
	<CAAoP0JyUxV4MMLpy2Vj4LR=OqOX5pe90WsyWz6GPj58FEPTpcA@mail.gmail.com>
	<201401222218.07545.even.rouault@mines-paris.org>
Message-ID: <loom.20140123T083125-463@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> Yes, this is an issue. Nobody agrees on how to represent WebMercator in WKT. 
> There's a ticket pending in Trac about that.

Hi,

Those who want to test their mental limits can read the ticket: 
http://trac.osgeo.org/gdal/ticket/3962

-Jukka Rahkonen-





From ammar83_h at yahoo.com  Thu Jan 23 01:52:16 2014
From: ammar83_h at yahoo.com (Ammar)
Date: Thu, 23 Jan 2014 01:52:16 -0800 (PST)
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>
	<CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>
Message-ID: <1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>

Chaitanya,

Thank you very much for your
 reply and suggestion. I have used LZW with predictor 2 compression and 
added external overviews compressed in LZW too and the image came 
perfect. The only downside is the size of each of the images has 
expanded from approx. 2 GB to 18-20 GB. So now I have to choose between 
quality and size!

Attached are two screen shots showing the difference.

Thanks again!

Regards,
Ammar



________________________________
 From: Chaitanya kumar CH <chaitanya.ch at gmail.com>
To: ammar83_h at yahoo.com 
Cc: gdal dev <gdal-dev at lists.osgeo.org> 
Sent: Tuesday, January 21, 2014 6:27 PM
Subject: Re: Question about gdaladdo and raster mosaicking
 


Ammar,
You are using lossy JPEG compression. I'm guessing that the white lines are are actually pixels with values near but not equal to 255. So, they are not treated as nodata pixels.
My suggestion is to use another format with lossless compression for the 21 images or use a mask band if you prefer.
Let me know how it goes.
--
Best regards,
Chaitanya Kumar CH
On 21-Jan-2014 5:31 pm,  <ammar83_h at yahoo.com> wrote:

Hello Chaitanya,
>
>I was looking online for solutions to my problem and I cam across some of your posts so I thought you might help me with my problem.
>
>I have 10,000+ TIFF files that I want to merge into one big Image and serve using GeoServer. I merged every 500 images at a time creating using gdalbuildvrt and gdal_translate along with JPEG compression creating 21 TIFF files. I added overviews then to each of the new 21 files. When adding the images together, once directly as files using QGIS and another time as WMSs using GeoServer, I got white lines/gaps precisely at the border of ever 2 images. I thought the problem is with no data values but I decided to take another approach and merged all the 10,000 files into one huge image and this time I got one perfect image with no lines or gaps. I failed to create overviews for the big image because the process took days or gdaladdo running with no progress. I tested then on smaller images with and without overviews and the ones with no overview came perfect while the one with gdaladdo overviews came with the same problem of lines and gaps. The commands I
 m using are the following:
>
>?gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs EPSG:27700 -input_file_list tiff_list.txt mosaic.vrt
>
>gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif
>
>gdaladdo mosaic.tif -r average --config COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
>
>Any ideas, tips or recommendations would be appreciated!
>
>Best regards,
>Ammar
>
>_____________________________________
>Sent from http://osgeo-org.1560.x6.nabble.com
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/74782923/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: jpegCompress.jpeg
Type: image/jpeg
Size: 11737 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/74782923/attachment-0002.jpeg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lzwCompress.jpeg
Type: image/jpeg
Size: 11895 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/74782923/attachment-0003.jpeg>

From etourigny.dev at gmail.com  Thu Jan 23 03:25:46 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 23 Jan 2014 09:25:46 -0200
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>
	<CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>
	<1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>
Message-ID: <CA+TxYvOstwVSrfJ2_CznE5HwqoK+Lm=C02ihEzE2wRE05AMfjA@mail.gmail.com>

As was suggested, you could try using a mask instead.


On Thu, Jan 23, 2014 at 7:52 AM, Ammar <ammar83_h at yahoo.com> wrote:

> Chaitanya,
>
> Thank you very much for your reply and suggestion. I have used LZW with
> predictor 2 compression and added external overviews compressed in LZW too
> and the image came perfect. The only downside is the size of each of the
> images has expanded from approx. 2 GB to 18-20 GB. So now I have to choose
> between quality and size!
>
> Attached are two screen shots showing the difference.
>
> Thanks again!
>
> Regards,
> Ammar
>
>   ------------------------------
>  *From:* Chaitanya kumar CH <chaitanya.ch at gmail.com>
> *To:* ammar83_h at yahoo.com
> *Cc:* gdal dev <gdal-dev at lists.osgeo.org>
> *Sent:* Tuesday, January 21, 2014 6:27 PM
> *Subject:* Re: Question about gdaladdo and raster mosaicking
>
> Ammar,
> You are using lossy JPEG compression. I'm guessing that the white lines
> are are actually pixels with values near but not equal to 255. So, they are
> not treated as nodata pixels.
> My suggestion is to use another format with lossless compression for the
> 21 images or use a mask band if you prefer.
> Let me know how it goes.
> --
> Best regards,
> Chaitanya Kumar CH
> On 21-Jan-2014 5:31 pm, <ammar83_h at yahoo.com> wrote:
>
> Hello Chaitanya,
>
> I was looking online for solutions to my problem and I cam across some of
> your posts so I thought you might help me with my problem.
>
> I have 10,000+ TIFF files that I want to merge into one big Image and
> serve using GeoServer. I merged every 500 images at a time creating using
> gdalbuildvrt and gdal_translate along with JPEG compression creating 21
> TIFF files. I added overviews then to each of the new 21 files. When adding
> the images together, once directly as files using QGIS and another time as
> WMSs using GeoServer, I got white lines/gaps precisely at the border of
> ever 2 images. I thought the problem is with no data values but I decided
> to take another approach and merged all the 10,000 files into one huge
> image and this time I got one perfect image with no lines or gaps. I failed
> to create overviews for the big image because the process took days or
> gdaladdo running with no progress. I tested then on smaller images with and
> without overviews and the ones with no overview came perfect while the one
> with gdaladdo overviews came with the same problem of lines and gaps. The
> commands I m using are the following:
>
>  gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs EPSG:27700
> -input_file_list tiff_list.txt mosaic.vrt
>
> gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES -co COMPRESS=JPEG
> -co JPEG_QUALITY=80 -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
> PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif
>
> gdaladdo mosaic.tif -r average --config COMPRESS_OVERVIEW JPEG --config
> JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config
> PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
>
> Any ideas, tips or recommendations would be appreciated!
>
> Best regards,
> Ammar
>
> _____________________________________
> Sent from http://osgeo-org.1560.x6.nabble.com
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/3f64a199/attachment.html>

From ammar83_h at yahoo.com  Thu Jan 23 06:28:05 2014
From: ammar83_h at yahoo.com (Ammar)
Date: Thu, 23 Jan 2014 06:28:05 -0800 (PST)
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <CA+TxYvOstwVSrfJ2_CznE5HwqoK+Lm=C02ihEzE2wRE05AMfjA@mail.gmail.com>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>	<CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>	<1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>
	<CA+TxYvOstwVSrfJ2_CznE5HwqoK+Lm=C02ihEzE2wRE05AMfjA@mail.gmail.com>
Message-ID: <1390487285.95687.YahooMailNeo@web163004.mail.bf1.yahoo.com>

Etienne,

I tried the following:

gdalbuildvrt -srcnodata 255 -vrtnodata 255 -addalpha -input_file_list tiff_list.txt mosaic02.vrt

gdal_translate -of GTiff -b 1 -b 2 -b 3 -mask 4 -a_srs EPSG:3011 -co TILED=yes -co compress=jpeg -co jpeg_quality=80 -co blockxsize=512 -co blockysize=512 -co photometric=ycbcr --config gdal_tiff_internal_mask yes mosaic02.vrt mosaic02.tif

gdaladdo mosaic02.tif -r average --config COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512

Did I implement the mask the right way? The results I got were similar to the JPEG compression with no mask, in other words I got white lines too!







________________________________
 From: Etienne Tourigny <etourigny.dev at gmail.com>
To: Ammar <ammar83_h at yahoo.com> 
Cc: Chaitanya kumar CH <chaitanya.ch at gmail.com>; gdal dev <gdal-dev at lists.osgeo.org> 
Sent: Thursday, January 23, 2014 12:25 PM
Subject: Re: [gdal-dev] Question about gdaladdo and raster mosaicking
 


As was suggested, you could try using a mask instead.



On Thu, Jan 23, 2014 at 7:52 AM, Ammar <ammar83_h at yahoo.com> wrote:

Chaitanya,
>
>Thank you very much for your
 reply and suggestion. I have used LZW with predictor 2 compression and 
added external overviews compressed in LZW too and the image came 
perfect. The only downside is the size of each of the images has 
expanded from approx. 2 GB to 18-20 GB. So now I have to choose between 
quality and size!
>
>Attached are two screen shots showing the difference.
>
>Thanks again!
>
>Regards,
>Ammar
>
>
>
>________________________________
> From: Chaitanya kumar CH <chaitanya.ch at gmail.com>
>To: ammar83_h at yahoo.com 
>Cc: gdal dev <gdal-dev at lists.osgeo.org> 
>Sent: Tuesday, January 21, 2014 6:27 PM
>Subject: Re: Question about gdaladdo and raster mosaicking
> 
>
>
>Ammar,
>You are using lossy JPEG compression. I'm guessing that the white lines are are actually pixels with values near but not equal to 255. So, they are not treated as nodata pixels.
>My suggestion is to use another format with lossless compression for the 21 images or use a mask band if you prefer.
>Let me know how it goes.
>--
>Best regards,
>Chaitanya Kumar CH
>On 21-Jan-2014 5:31 pm,  <ammar83_h at yahoo.com> wrote:
>
>Hello Chaitanya,
>>
>>I was looking online for solutions to my problem and I cam across some of your posts so I thought you might help me with my problem.
>>
>>I have 10,000+ TIFF files that I want to merge into one big Image and serve using GeoServer. I merged every 500 images at a time creating using gdalbuildvrt and gdal_translate along with JPEG compression creating 21 TIFF files. I added overviews then to each of the new 21 files. When adding the images together, once directly as files using QGIS and another time as WMSs using GeoServer, I got white lines/gaps precisely at the border of ever 2 images. I thought the problem is with no data values but I decided to take another approach and merged all the 10,000 files into one huge image and this time I got one perfect image with no lines or gaps. I failed to create overviews for the big image because the process took days or gdaladdo running with no progress. I tested then on smaller images with and without overviews and the ones with no overview came perfect while the one with gdaladdo overviews came with the same problem of lines and gaps. The commands I
 m
 using are the following:
>>
>>?gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs EPSG:27700 -input_file_list tiff_list.txt mosaic.vrt
>>
>>gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif
>>
>>gdaladdo mosaic.tif -r average --config COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
>>
>>Any ideas, tips or recommendations would be appreciated!
>>
>>Best regards,
>>Ammar
>>
>>_____________________________________
>>Sent from http://osgeo-org.1560.x6.nabble.com
>>
>>
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/001ba391/attachment.html>

From jgrn at illinois.edu  Thu Jan 23 08:09:41 2014
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 23 Jan 2014 10:09:41 -0600
Subject: [gdal-dev] (no subject)
Message-ID: <CABG0rftys61UdR5rxJ6UF9mNgftHwFN0ng-Z-+8NHtNgMdQVFQ@mail.gmail.com>

GDALers:

I've not had this error before when compiling GDAL for Linux boxes, but I'm
getting some sqlite error.  This is from:
./configure --prefix=/pathto/wherever --with=python
make

***
...
chmod a+x gdal-config
/bin/sh /projects/oa/shared/jgrn/code/src/gdal-1.10.1/libtool --mode=link
    g++  gdalinfo.lo commonutils.lo
 /projects/oa/shared/jgrn/code/src/gdal-1.10.1/libgdal.la -o gdalinfo
libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
 /projects/oa/shared/jgrn/code/src/gdal-1.10.1/.libs/libgdal.so
-L/usr/apps/oa/lib -L/usr/lib64/hdf -L/usr/apps/oa/lib/lib
-L/usr/local/openmpi-1.4-gcc/lib /usr/apps/oa/lib/libgeos_c.so
/usr/apps/oa/lib/libgeos.so /usr/apps/oa/lib/libsqlite3.so -lexpat -ljasper
-lnetcdf -lhdf5 /usr/apps/oa/lib/libmfhdf.so /usr/apps/oa/lib/libdf.so
/usr/apps/oa//lib/libjpeg.so /usr/apps/oa/lib/libpng15.so -lpthread -lrt
-lpcre -lcurl /usr/apps/oa/lib/libxml2.so -lm -ldl -lz  -Wl,-rpath
-Wl,/usr/apps/oa/lib -Wl,-rpath -Wl,/usr/apps/oa//lib
/projects/oa/shared/jgrn/code/src/gdal-1.10.1/.libs/libgdal.so: undefined
reference to `sqlite3_column_table_name'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory
`/projects/oa/shared/jgrn/code/src/gdal-1.10.1/apps'
make: *** [apps-target] Error 2


***

I do have SQLite properly installed via the sqlite-autoconf-3080200
release, configured via:
./configure --prefix=/pathto/wherever
make
make install

Any ideas?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
259 Computing Applications Building, MC-150
605 East Springfield Avenue
Champaign, IL  61820-6371
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/b47d44ec/attachment-0001.html>

From DCarreira at edia.pt  Thu Jan 23 08:25:32 2014
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu, 23 Jan 2014 16:25:32 +0000
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <1390487285.95687.YahooMailNeo@web163004.mail.bf1.yahoo.com>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>
	<CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>
	<1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>
	<CA+TxYvOstwVSrfJ2_CznE5HwqoK+Lm=C02ihEzE2wRE05AMfjA@mail.gmail.com>
	<1390487285.95687.YahooMailNeo@web163004.mail.bf1.yahoo.com>
Message-ID: <4476f3ed1c3c43e4b64c57fcbafbe7c7@AMSPR07MB230.eurprd07.prod.outlook.com>

Try without internal mask.

Duarte

_____________________________________________
De: Ammar [mailto:ammar83_h at yahoo.com]
Enviada: quinta-feira, 23 de Janeiro de 2014 14:28
Para: Etienne Tourigny
Cc: gdal dev
Assunto: Re: [gdal-dev] Question about gdaladdo and raster mosaicking


Etienne,

I tried the following:

gdalbuildvrt -srcnodata 255 -vrtnodata 255 -addalpha -input_file_list tiff_list.txt mosaic02.vrt

gdal_translate -of GTiff -b 1 -b 2 -b 3 -mask 4 -a_srs EPSG:3011 -co TILED=yes -co compress=jpeg -co jpeg_quality=80 -co blockxsize=512 -co blockysize=512 -co photometric=ycbcr --config gdal_tiff_internal_mask yes mosaic02.vrt mosaic02.tif

gdaladdo mosaic02.tif -r average --config COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512

Did I implement the mask the right way? The results I got were similar to the JPEG compression with no mask, in other words I got white lines too!








  ________________________________
From: Etienne Tourigny <etourigny.dev at gmail.com<mailto:etourigny.dev at gmail.com>>
To: Ammar <ammar83_h at yahoo.com<mailto:ammar83_h at yahoo.com>>
Cc: Chaitanya kumar CH <chaitanya.ch at gmail.com<mailto:chaitanya.ch at gmail.com>>; gdal dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Sent: Thursday, January 23, 2014 12:25 PM
Subject: Re: [gdal-dev] Question about gdaladdo and raster mosaicking



As was suggested, you could try using a mask instead.



On Thu, Jan 23, 2014 at 7:52 AM, Ammar <ammar83_h at yahoo.com<mailto:ammar83_h at yahoo.com>> wrote:

Chaitanya,

Thank you very much for your reply and suggestion. I have used LZW with predictor 2 compression and added external overviews compressed in LZW too and the image came perfect. The only downside is the size of each of the images has expanded from approx. 2 GB to 18-20 GB. So now I have to choose between quality and size!

Attached are two screen shots showing the difference.

Thanks again!

Regards,
Ammar





  ________________________________
From: Chaitanya kumar CH <chaitanya.ch at gmail.com<mailto:chaitanya.ch at gmail.com>>
To: ammar83_h at yahoo.com<mailto:ammar83_h at yahoo.com>
Cc: gdal dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Sent: Tuesday, January 21, 2014 6:27 PM
Subject: Re: Question about gdaladdo and raster mosaicking



Ammar,
You are using lossy JPEG compression. I'm guessing that the white lines are are actually pixels with values near but not equal to 255. So, they are not treated as nodata pixels.
My suggestion is to use another format with lossless compression for the 21 images or use a mask band if you prefer.
Let me know how it goes.
--
Best regards,
Chaitanya Kumar CH
On 21-Jan-2014 5:31 pm, <ammar83_h at yahoo.com<mailto:ammar83_h at yahoo.com>> wrote:

Hello Chaitanya,

I was looking online for solutions to my problem and I cam across some of your posts so I thought you might help me with my problem.

I have 10,000+ TIFF files that I want to merge into one big Image and serve using GeoServer. I merged every 500 images at a time creating using gdalbuildvrt and gdal_translate along with JPEG compression creating 21 TIFF files. I added overviews then to each of the new 21 files. When adding the images together, once directly as files using QGIS and another time as WMSs using GeoServer, I got white lines/gaps precisely at the border of ever 2 images. I thought the problem is with no data values but I decided to take another approach and merged all the 10,000 files into one huge image and this time I got one perfect image with no lines or gaps. I failed to create overviews for the big image because the process took days or gdaladdo running with no progress. I tested then on smaller images with and without overviews and the ones with no overview came perfect while the one with gdaladdo overviews came with the same problem of lines and gaps. The commands I m using are the following:

 gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs EPSG:27700 -input_file_list tiff_list.txt mosaic.vrt

gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif

gdaladdo mosaic.tif -r average --config COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512

Any ideas, tips or recommendations would be appreciated!

Best regards,
Ammar

_____________________________________
Sent from http://osgeo-org.1560.x6.nabble.com<http://osgeo-org.1560.x6.nabble.com/>






_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140123/8e754391/attachment.html>

From rush at winkey.org  Thu Jan 23 09:11:16 2014
From: rush at winkey.org (Brian Case)
Date: Thu, 23 Jan 2014 09:11:16 -0800
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <1390487285.95687.YahooMailNeo@web163004.mail.bf1.yahoo.com>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>
	<CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>
	<1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>
	<CA+TxYvOstwVSrfJ2_CznE5HwqoK+Lm=C02ihEzE2wRE05AMfjA@mail.gmail.com>
	<1390487285.95687.YahooMailNeo@web163004.mail.bf1.yahoo.com>
Message-ID: <1390497076.505.53.camel@octopi>

Ammar


you want to turn on internal masks in the shell, gdaladdo will not use
them otherwise. also you will need to turn this on if you use mapserver.
gdal will need to have this turned on for any further operations.

gdaladdo should use the correct image options without specifying them

export GDAL_TIFF_INTERNAL_MASK=YES

gdalbuildvrt -srcnodata 255 -vrtnodata 255 -addalpha \
             -input_file_list tiff_list.txt \
             mosaic02.vrt


gdal_translate -of GTiff -b 1 -b 2 -b 3 -mask 4 -a_srs EPSG:3011 \
               -co TILED=yes -co photometric=ycbcr \
               -co compress=jpeg -co jpeg_quality=80 \
               -co blockxsize=512 -co blockysize=512 \
               -mosaic02.vrt \
               -mosaic02.tif

gdaladdo mosaic02.tif -r average 2 4 8 16 32 64 128 256 512



and you should end up with a 



On Thu, 2014-01-23 at 06:28 -0800, Ammar wrote:
> Etienne,
> 
> I tried the following:
> 
> gdalbuildvrt -srcnodata 255 -vrtnodata 255 -addalpha -input_file_list
> tiff_list.txt mosaic02.vrt
> 
> gdal_translate -of GTiff -b 1 -b 2 -b 3 -mask 4 -a_srs EPSG:3011 -co
> TILED=yes -co compress=jpeg -co jpeg_quality=80 -co blockxsize=512 -co
> blockysize=512 -co photometric=ycbcr --config gdal_tiff_internal_mask
> yes mosaic02.vrt mosaic02.tif
> 
> gdaladdo mosaic02.tif -r average --config COMPRESS_OVERVIEW JPEG
> --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL
> --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
> 
> Did I implement the mask the right way? The results I got were similar
> to the JPEG compression with no mask, in other words I got white lines
> too!
> 
> 
> 
> 
> 
> 
> 
> 
> ______________________________________________________________________
> From: Etienne Tourigny <etourigny.dev at gmail.com>
> To: Ammar <ammar83_h at yahoo.com> 
> Cc: Chaitanya kumar CH <chaitanya.ch at gmail.com>; gdal dev
> <gdal-dev at lists.osgeo.org> 
> Sent: Thursday, January 23, 2014 12:25 PM
> Subject: Re: [gdal-dev] Question about gdaladdo and raster mosaicking
> 
> 
> As was suggested, you could try using a mask instead.
> 
> 
> On Thu, Jan 23, 2014 at 7:52 AM, Ammar <ammar83_h at yahoo.com> wrote:
>         Chaitanya,
>         
>         Thank you very much for your reply and suggestion. I have used
>         LZW with predictor 2 compression and added external overviews
>         compressed in LZW too and the image came perfect. The only
>         downside is the size of each of the images has expanded from
>         approx. 2 GB to 18-20 GB. So now I have to choose between
>         quality and size!
>         
>         Attached are two screen shots showing the difference.
>         
>         Thanks again!
>         
>         Regards,
>         Ammar
>         
>         
>         
>         
>         
>         
>         ______________________________________________________________
>         From: Chaitanya kumar CH <chaitanya.ch at gmail.com>
>         To: ammar83_h at yahoo.com 
>         Cc: gdal dev <gdal-dev at lists.osgeo.org> 
>         Sent: Tuesday, January 21, 2014 6:27 PM
>         Subject: Re: Question about gdaladdo and raster mosaicking
>         
>         
>         Ammar,
>         You are using lossy JPEG compression. I'm guessing that the
>         white lines are are actually pixels with values near but not
>         equal to 255. So, they are not treated as nodata pixels.
>         My suggestion is to use another format with lossless
>         compression for the 21 images or use a mask band if you
>         prefer.
>         Let me know how it goes.
>         --
>         Best regards,
>         Chaitanya Kumar CH
>         On 21-Jan-2014 5:31 pm, <ammar83_h at yahoo.com> wrote:
>                 Hello Chaitanya,
>                 
>                 I was looking online for solutions to my problem and I
>                 cam across some of your posts so I thought you might
>                 help me with my problem.
>                 
>                 I have 10,000+ TIFF files that I want to merge into
>                 one big Image and serve using GeoServer. I merged
>                 every 500 images at a time creating using gdalbuildvrt
>                 and gdal_translate along with JPEG compression
>                 creating 21 TIFF files. I added overviews then to each
>                 of the new 21 files. When adding the images together,
>                 once directly as files using QGIS and another time as
>                 WMSs using GeoServer, I got white lines/gaps precisely
>                 at the border of ever 2 images. I thought the problem
>                 is with no data values but I decided to take another
>                 approach and merged all the 10,000 files into one huge
>                 image and this time I got one perfect image with no
>                 lines or gaps. I failed to create overviews for the
>                 big image because the process took days or gdaladdo
>                 running with no progress. I tested then on smaller
>                 images with and without overviews and the ones with no
>                 overview came perfect while the one with gdaladdo
>                 overviews came with the same problem of lines and
>                 gaps. The commands I m using are the following:
>                 
>                  gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs
>                 EPSG:27700 -input_file_list tiff_list.txt mosaic.vrt
>                 
>                 gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES
>                 -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co
>                 BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
>                 PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif
>                 
>                 gdaladdo mosaic.tif -r average --config
>                 COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW
>                 60 --config INTERLEAVE_OVERVIEW PIXEL --config
>                 PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
>                 
>                 Any ideas, tips or recommendations would be
>                 appreciated!
>                 
>                 Best regards,
>                 Ammar
>                 
>                 _____________________________________
>                 Sent from http://osgeo-org.1560.x6.nabble.com
>                 
>         
>         
>         
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From even.rouault at mines-paris.org  Thu Jan 23 10:55:04 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 23 Jan 2014 19:55:04 +0100
Subject: [gdal-dev] (no subject) [sqlite configuration]
In-Reply-To: <CABG0rftys61UdR5rxJ6UF9mNgftHwFN0ng-Z-+8NHtNgMdQVFQ@mail.gmail.com>
References: <CABG0rftys61UdR5rxJ6UF9mNgftHwFN0ng-Z-+8NHtNgMdQVFQ@mail.gmail.com>
Message-ID: <201401231955.04371.even.rouault@mines-paris.org>

Le jeudi 23 janvier 2014 17:09:41, Jonathan Greenberg a ?crit :
> GDALers:
> 
> I've not had this error before when compiling GDAL for Linux boxes, but I'm
> getting some sqlite error.  This is from:
> ./configure --prefix=/pathto/wherever --with=python
> make
> 
> ***
> ...
> chmod a+x gdal-config
> /bin/sh /projects/oa/shared/jgrn/code/src/gdal-1.10.1/libtool --mode=link
>     g++  gdalinfo.lo commonutils.lo
>  /projects/oa/shared/jgrn/code/src/gdal-1.10.1/libgdal.la -o gdalinfo
> libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
>  /projects/oa/shared/jgrn/code/src/gdal-1.10.1/.libs/libgdal.so
> -L/usr/apps/oa/lib -L/usr/lib64/hdf -L/usr/apps/oa/lib/lib
> -L/usr/local/openmpi-1.4-gcc/lib /usr/apps/oa/lib/libgeos_c.so
> /usr/apps/oa/lib/libgeos.so /usr/apps/oa/lib/libsqlite3.so -lexpat -ljasper
> -lnetcdf -lhdf5 /usr/apps/oa/lib/libmfhdf.so /usr/apps/oa/lib/libdf.so
> /usr/apps/oa//lib/libjpeg.so /usr/apps/oa/lib/libpng15.so -lpthread -lrt
> -lpcre -lcurl /usr/apps/oa/lib/libxml2.so -lm -ldl -lz  -Wl,-rpath
> -Wl,/usr/apps/oa/lib -Wl,-rpath -Wl,/usr/apps/oa//lib
> /projects/oa/shared/jgrn/code/src/gdal-1.10.1/.libs/libgdal.so: undefined
> reference to `sqlite3_column_table_name'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory
> `/projects/oa/shared/jgrn/code/src/gdal-1.10.1/apps'
> make: *** [apps-target] Error 2
> 
> 
> ***
> 
> I do have SQLite properly installed via the sqlite-autoconf-3080200
> release, configured via:
> ./configure --prefix=/pathto/wherever
> make
> make install
> 
> Any ideas?

Jonathan,

The GDAL source code tries to use sqlite3_column_table_name only if it is 
available i the sqlite library. Indeed, not all builds of sqlite3 have 
sqlite3_column_table_name defined. So you should not get this error 
theroretically.

My hypothesis is that the test in ./configure that detects if 
sqlite3_column_table_name is available or not must link against another 
library than the one that GDAL is finally linking against. This is a bit weird 
however that this happens, but I'd encourage you checking that there are not 
several libsqlite3.so hanging around.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Jan 23 11:11:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 23 Jan 2014 20:11:57 +0100
Subject: [gdal-dev] gdaldem slope with -s 111120.0 works only at equator
	for lat/lon?
In-Reply-To: <F1428391-0432-4635-82D7-60B92BD2AAA5@hbaspecto.com>
References: <F1428391-0432-4635-82D7-60B92BD2AAA5@hbaspecto.com>
Message-ID: <201401232011.57250.even.rouault@mines-paris.org>

Le mercredi 22 janvier 2014 23:14:01, John Abraham a ?crit :
> Please help me with something potentially important.  The documentation for
> gdaldem slope says ?If the horizontal unit of the source DEM is degrees
> (e.g Lat/Long WGS84 projection), you can use scale=111120 if the vertical
> units are meters? but I don?t think this works very far away from the
> equator.  I think the algorithm assumes that the north-south units are the
> same as the east-west units, whereas obviously away from the equator
> degrees of longitude become a lot shorter.
> 
> I?m looking at my attempt at avalanche slope mapping, and seem to see
> east-west slopes showing up with higher slopes than north-south slopes
> with identically spaced contour intervals.
> 
> Am I right?  Or am I seeing things?

Yes, the -scale 111120 only works for approximate visual rendering, not for 
something life critical. 
> 
> If I?m right, perhaps:
> 
> 1) Someone should fix the documentation, so that people don?t rely on
> incorrect slope calculations for something life-critical such as avalanche
> slope mapping, and

If you want to provide an update of the doc, its source is in 
apps/gdal_utilities.dox ( 
http://svn.osgeo.org/gdal/trunk/gdal/apps/gdal_utilities.dox )

> 
> 2) Someone could tell me a better solution, I think perhaps the best idea
> is to just resample the grid into a projection based on meters, before
> applying gdaldem without any scaling factor.

Yes that would probably be certainly more appropriate. For example in the UTM 
zone of your data, or potentially some more fitted grid.

> 
> Thanks for your help. This has been bugging me for sometime, but I finally
> decided to speak up.
> 
> ?
> John Abraham
> jea at hbaspecto.com

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jgray at graysolutions.com  Thu Jan 23 13:49:33 2014
From: jgray at graysolutions.com (John Gray)
Date: Thu, 23 Jan 2014 15:49:33 -0600
Subject: [gdal-dev] gdal_translate adding 'dashed' lines to output
Message-ID: <52E18E6D.1080008@graysolutions.com>

I've been trying to use "gdal_translate" to convert a USGS GeoPDF to a 
GeoTiff file.  It appears to be working correctly except for one issue.  
During the conversion a number of horizontal lines appear in the 
output.  They appear at a few latitudes in the file - it looks like a 
dashed line across the image with a lot of space between each dash (but 
you have to zoom in to see them).  When I view the produced GeoTiff file 
in an image viewer here is what I see (zoomed in and cropped):

http://www.graysolutions.com/temp/LenexaLines.png

I've circled the improper lines in this image.  When I view the GeoPDF 
in Acrobat these lines do not appear (so I do not believe they are part 
of the source image).

Has anybody seen this problem before or know how to keep it from happening?

---------

Additional Details:

For the example above I rendered only the raster orthoimage layer, 
however when the full contents of the file are rendered I still see the 
'dashes' in the output.

The source GeoPDF file I'm working with can be downloaded here (~25 MB, 
downloads as a .zip file):

http://ims.er.usgs.gov/gda_services/download?item_id=5689818

I'm using GDAL compiled for Windows from 
http://www.gisinternals.com/sdk/.  I tried using both the 'stable' and 
'development' versions and the results were the same (running on Windows 
8.1).  The command line used:

gdal_translate -of GTiff --config GDAL_PDF_LAYERS "Images.Orthoimage" 
--config GDAL_PDF_DPI 150 KS_Lenexa_20120905_TM_geo.pdf Lenexa.tif

I'm using the DPI setting to scale the image down so the output isn't so 
large (without this it is a ~950 MB file).  I did render one without 
setting this (rendering at the native resolution) and the dahses were 
still there.  I've also tried this for other GeoPDF files in the same 
series and experienced similar results.

Thanks,

John


From even.rouault at mines-paris.org  Thu Jan 23 14:16:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 23 Jan 2014 23:16:25 +0100
Subject: [gdal-dev] gdal_translate adding 'dashed' lines to output
In-Reply-To: <52E18E6D.1080008@graysolutions.com>
References: <52E18E6D.1080008@graysolutions.com>
Message-ID: <201401232316.25804.even.rouault@mines-paris.org>

Le jeudi 23 janvier 2014 22:49:33, John Gray a ?crit :
> I've been trying to use "gdal_translate" to convert a USGS GeoPDF to a
> GeoTiff file.  It appears to be working correctly except for one issue.
> During the conversion a number of horizontal lines appear in the
> output.  They appear at a few latitudes in the file - it looks like a
> dashed line across the image with a lot of space between each dash (but
> you have to zoom in to see them).  When I view the produced GeoTiff file
> in an image viewer here is what I see (zoomed in and cropped):
> 
> http://www.graysolutions.com/temp/LenexaLines.png
> 
> I've circled the improper lines in this image.  When I view the GeoPDF
> in Acrobat these lines do not appear (so I do not believe they are part
> of the source image).
> 
> Has anybody seen this problem before or know how to keep it from happening?
> 
> ---------
> 
> Additional Details:
> 
> For the example above I rendered only the raster orthoimage layer,
> however when the full contents of the file are rendered I still see the
> 'dashes' in the output.
> 
> The source GeoPDF file I'm working with can be downloaded here (~25 MB,
> downloads as a .zip file):
> 
> http://ims.er.usgs.gov/gda_services/download?item_id=5689818
> 
> I'm using GDAL compiled for Windows from
> http://www.gisinternals.com/sdk/.  I tried using both the 'stable' and
> 'development' versions and the results were the same (running on Windows
> 8.1).  The command line used:
> 
> gdal_translate -of GTiff --config GDAL_PDF_LAYERS "Images.Orthoimage"
> --config GDAL_PDF_DPI 150 KS_Lenexa_20120905_TM_geo.pdf Lenexa.tif

I've just tried the above with a recent version of the Poppler library that is 
used by the PDF driver for the rendering and there are no such artifacts.
I've also just tried with the Poppler version used by the builds on 
gisinternals, which is a bit obsolete now, and I do see the artifacts.
So the builds on gisinternals would benefit from an upgrade of the Poppler 
library. You might want to contact Tamas Szekeres about this.

> 
> I'm using the DPI setting to scale the image down so the output isn't so
> large (without this it is a ~950 MB file).  I did render one without
> setting this (rendering at the native resolution) and the dahses were
> still there.  I've also tried this for other GeoPDF files in the same
> series and experienced similar results.
> 
> Thanks,
> 
> John
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bo.victor.thomsen at gmail.com  Fri Jan 24 01:46:48 2014
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Fri, 24 Jan 2014 10:46:48 +0100
Subject: [gdal-dev] effects of differences in .tgf and .tab files on
 Tiff imports
In-Reply-To: <0D6FB1CA-3FE0-4432-BA56-1B718E93E2CA@talktalk.net>
References: <0D6FB1CA-3FE0-4432-BA56-1B718E93E2CA@talktalk.net>
Message-ID: <52E23688.50405@gmail.com>

To Tim Southern -

GDAL uses several different methods find information to georeference 
tiff files (Disclaimer: I'm not at all familiar with THE GDAL codebase 
and just had a brief look at the relevant c++ files):

 1. GDAL look for georeference information embedded in the tiff file and
    will use it to georeference the file.
 2. If no 1 fails it will look for a corresponding  .twf or similar
    named files and read 6 parameters from it to establish affine
    transformations to/from the "pixel" coordinate system and the
    "world" coordinate system.
 3. If no 2 fails it will look for a corresponding .tab file, read the
    ground control points (GCP)  and establish the transformations using
    these GCP's.

So, if your tiff file doesn't contain embedded information, GDAL wil use 
the twf file.

However: (And now I'm making some big assumptions):

  * I assume the size of the tiff file is 4724 x 4724
  * I assume the upper leftmost  _egde_ of the image is at position
    459000,181000 in the coordinate system.
  * I assume the lower rightmost _edge_ of the image is at position
    460000,180000 in the coordinate system, making the tiff file  1000 x
    1000 m in size in "world" coordinates

This will make the pixel height and width approx. 0.2116850127 meters, 
not 0.21168 as implied in the twf file.

*If* my assumptions are correct both the tfw and the tab-file contains 
incorrect parameters. The twf should look like this:

0.2116850127
0.0
0.0
-0.2116850127
459000.10584250635
180999.89415749365

The translation parameters (last 2 lines) is defined from the center of 
the pixel, not the edge

The tab file should look like this:

!table
!version 300
!charset WindowsLatin1
Definition Table
   File "02SU5980.tif"
   Type "RASTER"
   (459000.10584250635, 180999.89415749365) (0,0) Label "Pt 1",
   (459999.89415749365, 180999.89415749365) (4723,0) Label "Pt 2",
   (459999.89415749365, 180000.10584250635) (4723,4723) Label "Pt 3",
   (459000.10584250635, 180000.10584250635) (0,4723) Label "Pt 4"
   CoordSys Earth Projection 8, 79, "m", -2, 49, 0.9996012717, 400000, 
-100000

The number of decimals might be a slight "overkill" :-)
(The tab file doesn't contains any kind "rectangle" definitions; the 
GCP's could be placed anywhere in the image. But normally they are 
defined for the corners of the image)

Regards
Bo Victor Thomsen
Aestas-GIS
Denmark

Den 20-01-2014 11:02, Tim Southern skrev:
> Dear Sir/Madame,
>
> I have recently downloaded a number of historic analogue maps which 
> have associated .twf and .tab files.  I notice that both these text 
> files are required by GDAL for geo-referencing according to the 
> information given on the appropriate web page for inputing 
> tiff/geotiff files.
>
> In this particular case the two files are not compatible with each 
> telling the system slightly different things.  I have copied the 
> contents below.  How will GDAL handle this situation?
>
> Thanks
>
> Tim Southern
>
> .tab file
>
> !table
> !version 300
> !charset WindowsLatin1
>
> Definition Table
>   File "02SU5980.tif"
>   Type "RASTER"
>   (459000, 181001) (0,0) Label "Pt 1",
>   (459999, 181001) (4723,0) Label "Pt 2",
>   (459999, 180001) (4723,4723) Label "Pt 3",
>   (459000,180001) (0,4723) Label "Pt 4"
>   CoordSys Earth Projection 8, 79, "m", -2, 49, 0.9996012717, 400000, 
> -100000
>
>
> and the .twf file is
>
> 0.21168000
> 0.0000
> 0.0000
> -0.21168000
> 459000.00000000
> 181000.00000000
>
> The .tab file gives coordinates for the pixel 0, 0 as 459000, 
> 181001 whereas the .twf file defines the same pixel as 459000, 181000.
> The .tab file gives coordinates for the pixel 4723,0 as 459999, 
> 181001 whereas the .twf gives the same pixels as 459999.76464, 181000.
> The .tab file gives coordinates for the pixel 4723, 4723 as 459999, 
> 180001 whereas .twf file gives same point as 459999.76464, 180000.23536
> The .tab file gives coordinates for the pixel 0, 4723 as 459000, 
> 180001 whereas .twf file gives same point as 459000, 180000.23536
>
> Another obvious difference is .tab file define a rectangle 999 by 
> 1000 metres whereas the .twf file defines a square 999.76464 by 
> 999.76464 metres.
>
>
>
> Tim Southern
> 17, Park Close,
> Sonning Common,
> Oxfordshire
> RG4 9RY
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/aea1312f/attachment.html>

From marco at west.nl  Fri Jan 24 02:07:58 2014
From: marco at west.nl (Marco Nijdam)
Date: Fri, 24 Jan 2014 11:07:58 +0100
Subject: [gdal-dev] gdal_retile.py does not use a nodata value from GeoTIFF
Message-ID: <3902415b4e7efd123fedced667140c40.squirrel@www.west.nl>

Dear gdal developers,

I've used gdal_retile.py to retile a set of GeoTIFF files, with 1
grayscale band of type float32. In these files a NoData value is stored. I
used retile to reduce the number of GeoTIFF files from 1300 or so smaller
files to 40 or so larger files. When I use gdalinfo on the original files,
a relevant part of the output is:

Band 1 Block=1000x2 Type=Float32, ColorInterp=Gray
  Min=-0.848 Max=18.454
  Minimum=-0.848, Maximum=18.454, Mean=4.426, StdDev=3.674
  NoData Value=-3.4028234663852886e+38

When using gdal_retile.py, it seems that for all areas where there is no
data in the input files (mainly where there is no input file at all for an
area), the resulting retiled files contain a value of 0. It doesn't seem
to be using the NoData value from the input, and doesn't seems to allow
specifying a specific NoData value (like gdal_translate which has a
-a_nodata parameter). It also doesn't store the NoData tag in the created
retiled GeoTIFFs.

The problem for us is that a value of 0 represents a valid value (it is a
height).

Due to our environment I needed to work with GDAL 1.7.2. For this version
I created a patch for gdal_retile.py that fills the tile with the NoData
value before putting the data over it. It also sets the NoData tag in the
GeoTIFF.
I've only tested it with our own dataset, so I don't know how it will
behave with any other, or non-tiff files.

Please feel free to use it in any future version, if you think it is a
useful addition.

Attached are the patch, and the modified 1.7.2 gdal_retile.py.

Kind regards,
--
-- Marco Nijdam,         marco at west.nl
-- West Consulting B.V., Delftechpark 5, 2628 XJ  Delft, The Netherlands
-- Tel: +3115 219 1600,  Fax: +3115 214 7889, Mob: +316 2040 7591

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_retile.py.patch
Type: application/octet-stream
Size: 1847 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/dfab3074/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_retile.py
Type: application/octet-stream
Size: 29422 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/dfab3074/attachment-0003.obj>

From jonathanmoules at warwickshire.gov.uk  Fri Jan 24 07:01:43 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Fri, 24 Jan 2014 15:01:43 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate mosaic
Message-ID: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>

Hi List,
I'm trying to mosaic some ASCII grid tiles into a single large ASCII file
(which can then easily be handled).

I'm using this process:

> REM Create list of files
> dir /b /s *.asc > asc_list.txt
>


> REM Turn into VRT
> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
> -input_file_list "asc_list.txt" abc.vrt
>


> REM actual mosaicing
> gdal_translate -of AAIGrid abc.vrt abc.asc


The input files are like:

> ncols         500
> nrows         500
> xllcorner     432000.000
> yllcorner     243000.000
> cellsize      2
> nodata_value  -9999.0
> 98.354 98.449 98.658 98.874 99.038 99.096


But the outputs are like:

fncols        500
> nrows        1000
> xllcorner    432000.000000000000
> yllcorner    242000.000000000000
> cellsize     2.000000000000
> NODATA_value  0
>  98.353996276855469 98.448997497558594 98.657997131347656
> 98.874000549316406


Suddenly everything has a dozen extra decimal places. Not only does this
induce the False Precision problem (we don't have heights to the
femtometer!), it also massively increases the filesize.

How can I get this to not happen?

Thanks,
Jonathan

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/372b2811/attachment.html>

From nhv at cape.com  Fri Jan 24 07:11:50 2014
From: nhv at cape.com (Norman Vine)
Date: Fri, 24 Jan 2014 10:11:50 -0500
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
Message-ID: <254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>

try
> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
see http://www.gdal.org/frmt_various.html
HTH
Norman

On Jan 24, 2014, at 10:01 AM, Jonathan Moules <jonathanmoules at warwickshire.gov.uk> wrote:

> Hi List,
> I'm trying to mosaic some ASCII grid tiles into a single large ASCII file (which can then easily be handled).
> 
> I'm using this process:
> REM Create list of files
> dir /b /s *.asc > asc_list.txt
>  
> REM Turn into VRT
> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700" -input_file_list "asc_list.txt" abc.vrt
>  
> REM actual mosaicing
> gdal_translate -of AAIGrid abc.vrt abc.asc
> 
> The input files are like:
> ncols         500
> nrows         500
> xllcorner     432000.000
> yllcorner     243000.000
> cellsize      2
> nodata_value  -9999.0
> 98.354 98.449 98.658 98.874 99.038 99.096
> 
> But the outputs are like:
> 
> fncols        500
> nrows        1000
> xllcorner    432000.000000000000
> yllcorner    242000.000000000000
> cellsize     2.000000000000
> NODATA_value  0
>  98.353996276855469 98.448997497558594 98.657997131347656 98.874000549316406 
> 
> Suddenly everything has a dozen extra decimal places. Not only does this induce the False Precision problem (we don't have heights to the femtometer!), it also massively increases the filesize.
> 
> How can I get this to not happen?
> 
> Thanks,
> Jonathan
> 
> 
> This transmission is intended for the named addressee(s) only and may contain sensitive or protectively marked material up to RESTRICTED and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All email traffic sent to or from us, including without limitation all GCSX traffic, may be subject to recording and/or monitoring in accordance with relevant legislation._______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/baed0756/attachment.html>

From jonathanmoules at warwickshire.gov.uk  Fri Jan 24 08:12:35 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Fri, 24 Jan 2014 16:12:35 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>
Message-ID: <CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>

Thanks Norman. I'd already seen that page but failed to read it!
However, having tested it, it's not functioning as the manual says.

As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal places.
But what it instead does it give me 3 significant figures. So 98.354 has
become 98.3.
This becomes a problem because many of my heights are hovering around 100.
So some will either have to be 1 character too long to ensure no data loss
for the rest.

Is this a bug? The documentation on the page linked to is quite clear it
should be decimal places.

Less of an issue, but it also didn't make any difference to:

> xllcorner    432000.000000000000
> yllcorner    242000.000000000000
> cellsize     2.000000000000


GDAL 1.10.1, released 2013/08/26


Cheers,
Jonathan



On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:

> try
>
> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
>
> see http://www.gdal.org/frmt_various.html
> HTH
> Norman
>
> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <
> jonathanmoules at warwickshire.gov.uk> wrote:
>
> Hi List,
> I'm trying to mosaic some ASCII grid tiles into a single large ASCII file
> (which can then easily be handled).
>
> I'm using this process:
>
>> REM Create list of files
>> dir /b /s *.asc > asc_list.txt
>>
>
>
>> REM Turn into VRT
>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
>> -input_file_list "asc_list.txt" abc.vrt
>>
>
>
>> REM actual mosaicing
>> gdal_translate -of AAIGrid abc.vrt abc.asc
>
>
> The input files are like:
>
>> ncols         500
>> nrows         500
>> xllcorner     432000.000
>> yllcorner     243000.000
>> cellsize      2
>> nodata_value  -9999.0
>> 98.354 98.449 98.658 98.874 99.038 99.096
>
>
> But the outputs are like:
>
> fncols        500
>> nrows        1000
>> xllcorner    432000.000000000000
>> yllcorner    242000.000000000000
>> cellsize     2.000000000000
>> NODATA_value  0
>>  98.353996276855469 98.448997497558594 98.657997131347656
>> 98.874000549316406
>
>
> Suddenly everything has a dozen extra decimal places. Not only does this
> induce the False Precision problem (we don't have heights to the
> femtometer!), it also massively increases the filesize.
>
> How can I get this to not happen?
>
> Thanks,
> Jonathan
>
>
> This transmission is intended for the named addressee(s) only and may
> contain sensitive or protectively marked material up to RESTRICTED and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use it, or
> disclose it to anyone else. If you have received this transmission in error
> please notify the sender immediately. All email traffic sent to or from us,
> including without limitation all GCSX traffic, may be subject to recording
> and/or monitoring in accordance with relevant legislation.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/8123c6ef/attachment.html>

From nhv at cape.com  Fri Jan 24 08:22:12 2014
From: nhv at cape.com (Norman Vine)
Date: Fri, 24 Jan 2014 11:22:12 -0500
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>
	<CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
Message-ID: <F678A75E-1FF7-4316-98EF-DDF3AB2FBDF6@cape.com>

hmm 

this seems to be related to this fairly recent change
http://trac.osgeo.org/gdal/ticket/3732
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Change-of-DECIMAL-PRECISION-in-AAIGrid-td5075524.html

don't know much more

Norman

On Jan 24, 2014, at 11:12 AM, Jonathan Moules <jonathanmoules at warwickshire.gov.uk> wrote:

> Thanks Norman. I'd already seen that page but failed to read it!
> However, having tested it, it's not functioning as the manual says.
> 
> As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal places. But what it instead does it give me 3 significant figures. So 98.354 has become 98.3.
> This becomes a problem because many of my heights are hovering around 100. So some will either have to be 1 character too long to ensure no data loss for the rest.
> 
> Is this a bug? The documentation on the page linked to is quite clear it should be decimal places.
> 
> Less of an issue, but it also didn't make any difference to:
> xllcorner    432000.000000000000
> yllcorner    242000.000000000000
> cellsize     2.000000000000
> 
> GDAL 1.10.1, released 2013/08/26
> 
> 
> Cheers,
> Jonathan
> 
> 
> 
> On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:
> try
>> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
> see http://www.gdal.org/frmt_various.html
> HTH
> Norman
> 
> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <jonathanmoules at warwickshire.gov.uk> wrote:
> 
>> Hi List,
>> I'm trying to mosaic some ASCII grid tiles into a single large ASCII file (which can then easily be handled).
>> 
>> I'm using this process:
>> REM Create list of files
>> dir /b /s *.asc > asc_list.txt
>>  
>> REM Turn into VRT
>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700" -input_file_list "asc_list.txt" abc.vrt
>>  
>> REM actual mosaicing
>> gdal_translate -of AAIGrid abc.vrt abc.asc
>> 
>> The input files are like:
>> ncols         500
>> nrows         500
>> xllcorner     432000.000
>> yllcorner     243000.000
>> cellsize      2
>> nodata_value  -9999.0
>> 98.354 98.449 98.658 98.874 99.038 99.096
>> 
>> But the outputs are like:
>> 
>> fncols        500
>> nrows        1000
>> xllcorner    432000.000000000000
>> yllcorner    242000.000000000000
>> cellsize     2.000000000000
>> NODATA_value  0
>>  98.353996276855469 98.448997497558594 98.657997131347656 98.874000549316406 
>> 
>> Suddenly everything has a dozen extra decimal places. Not only does this induce the False Precision problem (we don't have heights to the femtometer!), it also massively increases the filesize.
>> 
>> How can I get this to not happen?
>> 
>> Thanks,
>> Jonathan
>> 
>> 
>> This transmission is intended for the named addressee(s) only and may contain sensitive or protectively marked material up to RESTRICTED and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All email traffic sent to or from us, including without limitation all GCSX traffic, may be subject to recording and/or monitoring in accordance with relevant legislation._______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> This transmission is intended for the named addressee(s) only and may contain sensitive or protectively marked material up to RESTRICTED and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All email traffic sent to or from us, including without limitation all GCSX traffic, may be subject to recording and/or monitoring in accordance with relevant legislation.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/48c6addd/attachment-0001.html>

From srp at geo.ku.dk  Fri Jan 24 12:46:50 2014
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Fri, 24 Jan 2014 20:46:50 +0000
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <52DD552B.5020107@mapbox.com>
References: <1390170469862-5098902.post@n6.nabble.com>,
	<0EFEDDFC-9DA1-42F5-AF29-C2B6073B237D@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D80396E@P1KITMBX05WC03.unicph.domain>,
	<AF58E07F-FC6C-4DDF-A2C1-008AA7F856BF@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D8039E1@P1KITMBX05WC03.unicph.domain>,
	<1B31D110-CE39-43AF-AE1A-B8DA75CC7466@gmail.com>
	<6C59A8A933C9B6409067456EC20EAB367D803B28@P1KITMBX05WC03.unicph.domain>
	<1390208244.52dce4f464bd9@imp.free.fr>,<52DD552B.5020107@mapbox.com>
Message-ID: <6C59A8A933C9B6409067456EC20EAB367D812645@P1KITMBX05WC03.unicph.domain>

Does anyone have any other ideas as to what would be causing gdalwarp to output entire blank images when called from a python script?
I can get it to run using os.system and subprocess.call (using both shell=True and shell=False) but always just get a blank image (all pixels=0). This does not happen if I run exactly the same command from a terminal window.

Thanks,
Simon

________________________________________
Fra: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] p&#229; vegne af Sean Gillies [sean at mapbox.com]
Sendt: 20. januar 2014 11:56
Til: gdal-dev at lists.osgeo.org
Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script

On 1/20/14, 1:57 AM, Even Rouault wrote:
> Selon Simon Richard Proud <srp at geo.ku.dk>:
>
>> Hi,
>> Unfortunately that produces a file not found error with filename "65535". If
>> I remove both arguments "-srcnodata" and "65535" then I go back to getting
>> the usage guidelines.
>
> You need to separate also the numerical values after -te and -tr
>
> ['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos +lon_0=0.0
> +h=35785831', '-te', '-5568748.2758', '-5568748.4774', '5568748.2758',
> '5568748.2758','-tr', '3000.40316582', '3000.40316582', '-srcnodata',
> '65535','TEST.tiff', 'TEST2.tiff']

The shlex.split() function is handy for turning strings that you would
have passed to os.system() into a list of args for subprocess functions.

     >>> import shlex
     >>> shlex.split('gdalwarp -q -multi -r cubicspline -te
-5568748.2758 -5568748.4774 5568748.2758 5568748.2758')
     ['gdalwarp', '-q', '-multi', '-r', 'cubicspline', '-te',
'-5568748.2758', '-5568748.4774', '5568748.2758', '5568748.2758']

...

--
Sean Gillies
sean at mapbox.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



From even.rouault at mines-paris.org  Fri Jan 24 13:17:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 24 Jan 2014 22:17:43 +0100
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <6C59A8A933C9B6409067456EC20EAB367D812645@P1KITMBX05WC03.unicph.domain>
References: <1390170469862-5098902.post@n6.nabble.com>
	<52DD552B.5020107@mapbox.com>
	<6C59A8A933C9B6409067456EC20EAB367D812645@P1KITMBX05WC03.unicph.domain>
Message-ID: <201401242217.43932.even.rouault@mines-paris.org>

Le vendredi 24 janvier 2014 21:46:50, Simon Richard Proud a ?crit :
> Does anyone have any other ideas as to what would be causing gdalwarp to
> output entire blank images when called from a python script? I can get it
> to run using os.system and subprocess.call (using both shell=True and
> shell=False) but always just get a blank image (all pixels=0). This does
> not happen if I run exactly the same command from a terminal window.

I can't see any rational reason for that... Just in case : are you sure you 
are running the same GDAL lib and binary in the terminal and from Python ?

> 
> Thanks,
> Simon
> 
> ________________________________________
> Fra: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org]
> p&#229; vegne af Sean Gillies [sean at mapbox.com] Sendt: 20. januar 2014
> 11:56
> Til: gdal-dev at lists.osgeo.org
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
> 
> On 1/20/14, 1:57 AM, Even Rouault wrote:
> > Selon Simon Richard Proud <srp at geo.ku.dk>:
> >> Hi,
> >> Unfortunately that produces a file not found error with filename
> >> "65535". If I remove both arguments "-srcnodata" and "65535" then I go
> >> back to getting the usage guidelines.
> > 
> > You need to separate also the numerical values after -te and -tr
> > 
> > ['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos
> > +lon_0=0.0 +h=35785831', '-te', '-5568748.2758', '-5568748.4774',
> > '5568748.2758', '5568748.2758','-tr', '3000.40316582', '3000.40316582',
> > '-srcnodata', '65535','TEST.tiff', 'TEST2.tiff']
> 
> The shlex.split() function is handy for turning strings that you would
> have passed to os.system() into a list of args for subprocess functions.
> 
>      >>> import shlex
>      >>> shlex.split('gdalwarp -q -multi -r cubicspline -te
> 
> -5568748.2758 -5568748.4774 5568748.2758 5568748.2758')
>      ['gdalwarp', '-q', '-multi', '-r', 'cubicspline', '-te',
> '-5568748.2758', '-5568748.4774', '5568748.2758', '5568748.2758']
> 
> ...
> 
> --
> Sean Gillies
> sean at mapbox.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From peifer at gmx.eu  Fri Jan 24 14:03:24 2014
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri, 24 Jan 2014 23:03:24 +0100
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <F678A75E-1FF7-4316-98EF-DDF3AB2FBDF6@cape.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>	<254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>	<CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
	<F678A75E-1FF7-4316-98EF-DDF3AB2FBDF6@cape.com>
Message-ID: <52E2E32C.50704@gmx.eu>

On 2014-01-24 17:22, Norman Vine wrote:
> hmm
>
> this seems to be related to this fairly recent change
> http://trac.osgeo.org/gdal/ticket/3732
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Change-of-DECIMAL-PRECISION-in-AAIGrid-td5075524.html
>

I am just repeating what I wrote in the above-mentioned mail from 3 Sep 
2013:

--- snip ---
"DECIMAL_PRECISION"  actually became a misnomer now and should perhaps 
be called "SIGNIFICANT_DIGITS" -- or the format should be changed back 
to "%<precision>f". Maybe some of the GDAL devs has an opinion about the 
issue.
--- snip ---
Hermann


From jea at hbaspecto.com  Fri Jan 24 15:47:45 2014
From: jea at hbaspecto.com (John Abraham)
Date: Fri, 24 Jan 2014 16:47:45 -0700
Subject: [gdal-dev] gdaldem slope with -s 111120.0 works only at equator
	for lat/lon?
In-Reply-To: <201401232011.57250.even.rouault@mines-paris.org>
References: <F1428391-0432-4635-82D7-60B92BD2AAA5@hbaspecto.com>
	<201401232011.57250.even.rouault@mines-paris.org>
Message-ID: <70826610-8D77-48B4-BA44-F23AD837780C@hbaspecto.com>

Here?s a diff on the .dox for gdaldem, as a suggestion.  (I don?t want commit access on the repository.  Is sending the diff by email the appropriate approach?)

Note I?m assuming that the other modules in gdaldem also assume that x and y units are the same.





Index: gdal_utilities.dox
===================================================================
--- gdal_utilities.dox	(revision 26875)
+++ gdal_utilities.dox	(working copy)
@@ -2038,8 +2038,14 @@
                 [-compute_edges] [-b Band (default=1)] [-of format] [-q]
 
 Notes :
-  Scale is the ratio of vertical units to horizontal
-   for Feet:Latlong use scale=370400, for Meters:LatLong use scale=111120)
+  gdaldem generally assumes that x, y and z units are identical.  If x (east-west)
+  and y (north-south) units are identical, but z (elevation) units are different, the
+  scale (-s) option can be used to set the ratio of vertical units to horizontal.  For 
+  LatLong projections near the equator, where units of latitude and units of 
+  longitude are similar, elevation (z) units can be converted to be compatible
+  by using scale=370400 (if elevation is in feet) or scale=111120 (if elevation is in 
+  meters).  For locations not near the equator, it would be best to reproject your
+  grid using gdalwarp before using gdaldem.
 
 \endverbatim
 \if man



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140124/1e21c8dd/attachment.html>

From even.rouault at mines-paris.org  Sat Jan 25 00:44:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 25 Jan 2014 09:44:57 +0100
Subject: [gdal-dev] gdaldem slope with -s 111120.0 works only at equator
	for lat/lon?
In-Reply-To: <70826610-8D77-48B4-BA44-F23AD837780C@hbaspecto.com>
References: <F1428391-0432-4635-82D7-60B92BD2AAA5@hbaspecto.com>
	<201401232011.57250.even.rouault@mines-paris.org>
	<70826610-8D77-48B4-BA44-F23AD837780C@hbaspecto.com>
Message-ID: <201401250944.57559.even.rouault@mines-paris.org>

Le samedi 25 janvier 2014 00:47:45, John Abraham a ?crit :
> Here?s a diff on the .dox for gdaldem, as a suggestion. 

Applied, thanks.

> (I don?t want
> commit access on the repository.  Is sending the diff by email the
> appropriate approach?)

For very short patches such as that one, it is OK. Otherwise it is better to 
put it as an attachment in http://trac.osgeo.org/gdal/newticket

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Jan 25 00:48:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 25 Jan 2014 09:48:35 +0100
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <52E2E32C.50704@gmx.eu>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<F678A75E-1FF7-4316-98EF-DDF3AB2FBDF6@cape.com>
	<52E2E32C.50704@gmx.eu>
Message-ID: <201401250948.35690.even.rouault@mines-paris.org>

Le vendredi 24 janvier 2014 23:03:24, Hermann Peifer a ?crit :
> On 2014-01-24 17:22, Norman Vine wrote:
> > hmm
> > 
> > this seems to be related to this fairly recent change
> > http://trac.osgeo.org/gdal/ticket/3732
> > http://osgeo-org.1560.x6.nabble.com/gdal-dev-Change-of-DECIMAL-PRECISION-
> > in-AAIGrid-td5075524.html
> 
> I am just repeating what I wrote in the above-mentioned mail from 3 Sep
> 2013:
> 
> --- snip ---
> "DECIMAL_PRECISION"  actually became a misnomer now and should perhaps
> be called "SIGNIFICANT_DIGITS" -- or the format should be changed back
> to "%<precision>f". Maybe some of the GDAL devs has an opinion about the
> issue.
> --- snip ---

Yes reverting to the original implementation of DECIMAL_PRECISION could be 
usefull. And maybe keeping the current behaviour under a SIGNIFICANT_DIGITS 
option ?
Anyone wanting to patch that ?

CC'ing Robert to get his opinion on this.

> Hermann
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From srp at geo.ku.dk  Sat Jan 25 04:06:25 2014
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Sat, 25 Jan 2014 12:06:25 +0000
Subject: [gdal-dev] Problem calling gdalwarp from within python script
In-Reply-To: <201401242217.43932.even.rouault@mines-paris.org>
References: <1390170469862-5098902.post@n6.nabble.com>
	<52DD552B.5020107@mapbox.com>
	<6C59A8A933C9B6409067456EC20EAB367D812645@P1KITMBX05WC03.unicph.domain>,
	<201401242217.43932.even.rouault@mines-paris.org>
Message-ID: <6C59A8A933C9B6409067456EC20EAB367D812DBD@P1KITMBX05WC03.unicph.domain>

Hi,
>>I can't see any rational reason for that... Just in case : are you sure you
>>are running the same GDAL lib and binary in the terminal and from Python ?

Yes, there's only one GDAL lib installed on the system - the default one that can be installed from the Ubuntu package manager.

Anyway, I changed to use the internal gdal.ReprojectImage() commands (rather than calling gdalwarp) and those work well. So from my perspective there is no problem, although it'd be nice to know what happened in gdalwarp!

Cheers,
Simon

________________________________________
Fra: Even Rouault [even.rouault at mines-paris.org]
Sendt: 24. januar 2014 16:17
Til: gdal-dev at lists.osgeo.org
Cc: Simon Richard Proud; Sean Gillies
Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script

Le vendredi 24 janvier 2014 21:46:50, Simon Richard Proud a ?crit :
> Does anyone have any other ideas as to what would be causing gdalwarp to
> output entire blank images when called from a python script? I can get it
> to run using os.system and subprocess.call (using both shell=True and
> shell=False) but always just get a blank image (all pixels=0). This does
> not happen if I run exactly the same command from a terminal window.

I can't see any rational reason for that... Just in case : are you sure you
are running the same GDAL lib and binary in the terminal and from Python ?

>
> Thanks,
> Simon
>
> ________________________________________
> Fra: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org]
> p&#229; vegne af Sean Gillies [sean at mapbox.com] Sendt: 20. januar 2014
> 11:56
> Til: gdal-dev at lists.osgeo.org
> Emne: Re: [gdal-dev] Problem calling gdalwarp from within python script
>
> On 1/20/14, 1:57 AM, Even Rouault wrote:
> > Selon Simon Richard Proud <srp at geo.ku.dk>:
> >> Hi,
> >> Unfortunately that produces a file not found error with filename
> >> "65535". If I remove both arguments "-srcnodata" and "65535" then I go
> >> back to getting the usage guidelines.
> >
> > You need to separate also the numerical values after -te and -tr
> >
> > ['gdalwarp','-q','-multi','-r', 'cubicspline','-t_srs', '+proj=geos
> > +lon_0=0.0 +h=35785831', '-te', '-5568748.2758', '-5568748.4774',
> > '5568748.2758', '5568748.2758','-tr', '3000.40316582', '3000.40316582',
> > '-srcnodata', '65535','TEST.tiff', 'TEST2.tiff']
>
> The shlex.split() function is handy for turning strings that you would
> have passed to os.system() into a list of args for subprocess functions.
>
>      >>> import shlex
>      >>> shlex.split('gdalwarp -q -multi -r cubicspline -te
>
> -5568748.2758 -5568748.4774 5568748.2758 5568748.2758')
>      ['gdalwarp', '-q', '-multi', '-r', 'cubicspline', '-te',
> '-5568748.2758', '-5568748.4774', '5568748.2758', '5568748.2758']
>
> ...
>
> --
> Sean Gillies
> sean at mapbox.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Geospatial professional services
http://even.rouault.free.fr/services.html



From jukka.rahkonen at mmmtike.fi  Sat Jan 25 14:07:06 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 25 Jan 2014 22:07:06 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?New_option_INDEX=5FCOLUMNS_for_SQLite_and_GP?=
	=?utf-8?q?KG?=
Message-ID: <loom.20140125T222200-793@post.gmane.org>

Hi,

I guess that both SQLite/Spatialite and especially OGC Geopackage will be
used by people who consider them more like file formats than as datebases.
Such users may not know the power of indexes and they do not necessarily
know anything about SQL and such.

How about writing a few lines about the power and importance of indexes into
the SQLite and GPKG driver pages? There could at least be on example about
how to create a new index with ogrinfo, which must be a secret even for many
advanced GDAL users. Better though, from user point of view, would be to
implement a new layer creation option. I see a very similar case in
SQLite/Spatialite
"COMPRESS_COLUMNS=column_name1[,column_name2, ...]: (Starting with GDAL
1.10.0) A list of (String) columns that must be compressed"
The new -lco might be
"INDEX_COLUMNS=column_name1[,column_name2, ...]: (Starting with GDAL 2.0) A
list of columns that will be indexed".

I am not sure if -lco should somehow support also composite indexes. Perhaps
users who know what those (and unique indexes) mean can also use SQL and
create them with ogrinfo if they can see an example in the documentation.
Thus -lco could be made to accept only one column per index. And index name
in the db could be set automatically into something like
"layer_name_column_name_idx". The SQL that this -lco should fire is simply

CREATE INDEX "table_name_column_name_idx"
ON "table_name" ("column_name");

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sat Jan 25 14:28:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 25 Jan 2014 23:28:10 +0100
Subject: [gdal-dev] New option INDEX_COLUMNS for SQLite and GPKG
In-Reply-To: <loom.20140125T222200-793@post.gmane.org>
References: <loom.20140125T222200-793@post.gmane.org>
Message-ID: <201401252328.10571.even.rouault@mines-paris.org>

Hi Jukka,

I'm a bit ambivalent about providing a creation option for that (although that 
would not be an heresy). For a few reasons :
- it is relatively easy to create an attribute index manually (once you know 
the syntax)
- it is not necessarily to create it at layer creation time
- it would potentially apply to all drivers that have a SQL engine behind

But I agree that improving the documentation to advertize the interest of 
indexes and how to create them could be usefull. Perhaps you would want to 
propose a modified version of the HTML page ? (I think that the GPKG one could 
just point to the relevant section of the SQLite one, to avoid doc 
duplication)

Even

> Hi,
> 
> I guess that both SQLite/Spatialite and especially OGC Geopackage will be
> used by people who consider them more like file formats than as datebases.
> Such users may not know the power of indexes and they do not necessarily
> know anything about SQL and such.
> 
> How about writing a few lines about the power and importance of indexes
> into the SQLite and GPKG driver pages? There could at least be on example
> about how to create a new index with ogrinfo, which must be a secret even
> for many advanced GDAL users. Better though, from user point of view,
> would be to implement a new layer creation option. I see a very similar
> case in SQLite/Spatialite
> "COMPRESS_COLUMNS=column_name1[,column_name2, ...]: (Starting with GDAL
> 1.10.0) A list of (String) columns that must be compressed"
> The new -lco might be
> "INDEX_COLUMNS=column_name1[,column_name2, ...]: (Starting with GDAL 2.0) A
> list of columns that will be indexed".
> 
> I am not sure if -lco should somehow support also composite indexes.
> Perhaps users who know what those (and unique indexes) mean can also use
> SQL and create them with ogrinfo if they can see an example in the
> documentation. Thus -lco could be made to accept only one column per
> index. And index name in the db could be set automatically into something
> like
> "layer_name_column_name_idx". The SQL that this -lco should fire is simply
> 
> CREATE INDEX "table_name_column_name_idx"
> ON "table_name" ("column_name");
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bontepaarden at gmail.com  Sat Jan 25 14:50:10 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 25 Jan 2014 23:50:10 +0100
Subject: [gdal-dev] exportToProj4
Message-ID: <CAHNf2YS=X7jpzH7LmzaSMDPuQuc4OxmTC_gEsDNAaZi_u9H+WQ@mail.gmail.com>

Hi all,

Thanks to Tamas Szekeres we are now using his binaries from
http://www.gisinternals.com/sdk/ with MapWinGIS, our mapping ActiveX.
This has drastically simplified our build process and we are very grateful
for Tamas' help.

We're now struggling with some minor issues regarding our 'old' C++ code
and the new binaries for GDAL, GEOS, Proj4, etc.
Several of them I managed to solve, but I'm struggling with this one.
We have code to read a prj file and get the Proj4 string:

    void ProjectionTools::GetProj4FromPRJFile(char * prjfileName, char **
prj4)
    {
        FILE * pFile;
        pFile = fopen (prjfileName,"r");
        if (pFile == NULL)
        {
            // Doesn't exist
            return;
        }
        fclose(pFile);
        pFile = NULL;
        OGRSpatialReference* oSRS = new OGRSpatialReference();

        char **papszPrj = CSLLoad(prjfileName);
        if (papszPrj == NULL)
        {
            return;
        }

        OGRErr eErr = oSRS->importFromESRI(papszPrj);
        if (eErr != OGRERR_NONE)
        {
            OGRErr eErr = oSRS->importFromProj4(*papszPrj);
        }

        CSLDestroy( papszPrj );
        char * pszProj4 = NULL;
        eErr = oSRS->exportToProj4( &pszProj4 );
        delete oSRS; <-- going wrong now

        *prj4 = new char[_tcslen(pszProj4)+1];
        strcpy(*prj4, pszProj4);
        CPLFree(pszProj4);
    }

This code was working for years, but now it crashes on delete oSRS;.
I've been searching for examples of how to use exportToProj4() in C++ but
can only find Python examples.
And I'm not a C++ developer, just a C# developer :)
How should I now free oSRS?

Thanks for any advice.

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140125/4392ec9d/attachment.html>

From even.rouault at mines-paris.org  Sat Jan 25 15:01:55 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 26 Jan 2014 00:01:55 +0100
Subject: [gdal-dev] exportToProj4
In-Reply-To: <CAHNf2YS=X7jpzH7LmzaSMDPuQuc4OxmTC_gEsDNAaZi_u9H+WQ@mail.gmail.com>
References: <CAHNf2YS=X7jpzH7LmzaSMDPuQuc4OxmTC_gEsDNAaZi_u9H+WQ@mail.gmail.com>
Message-ID: <201401260001.55965.even.rouault@mines-paris.org>

Le samedi 25 janvier 2014 23:50:10, Paul Meems a ?crit :
> Hi all,
> 
> Thanks to Tamas Szekeres we are now using his binaries from
> http://www.gisinternals.com/sdk/ with MapWinGIS, our mapping ActiveX.
> This has drastically simplified our build process and we are very grateful
> for Tamas' help.
> 
> We're now struggling with some minor issues regarding our 'old' C++ code
> and the new binaries for GDAL, GEOS, Proj4, etc.
> Several of them I managed to solve, but I'm struggling with this one.
> We have code to read a prj file and get the Proj4 string:
> 
>     void ProjectionTools::GetProj4FromPRJFile(char * prjfileName, char **
> prj4)
>     {
>         FILE * pFile;
>         pFile = fopen (prjfileName,"r");
>         if (pFile == NULL)
>         {
>             // Doesn't exist
>             return;
>         }
>         fclose(pFile);
>         pFile = NULL;
>         OGRSpatialReference* oSRS = new OGRSpatialReference();
> 
>         char **papszPrj = CSLLoad(prjfileName);
>         if (papszPrj == NULL)
>         {
>             return;
>         }
> 
>         OGRErr eErr = oSRS->importFromESRI(papszPrj);
>         if (eErr != OGRERR_NONE)
>         {
>             OGRErr eErr = oSRS->importFromProj4(*papszPrj);
>         }
> 
>         CSLDestroy( papszPrj );
>         char * pszProj4 = NULL;
>         eErr = oSRS->exportToProj4( &pszProj4 );
>         delete oSRS; <-- going wrong now
> 
>         *prj4 = new char[_tcslen(pszProj4)+1];
>         strcpy(*prj4, pszProj4);
>         CPLFree(pszProj4);
>     }
> 
> This code was working for years, but now it crashes on delete oSRS;.
> I've been searching for examples of how to use exportToProj4() in C++ but
> can only find Python examples.
> And I'm not a C++ developer, just a C# developer :)
> How should I now free oSRS?

The code looks OK and there's no fundamental reason why it would not work any 
longer. I highly suspect that you are running into a classical issue of a 
mismatch between the compile flags used in your application and the ones used 
by the GDAL built itself.

You could perhaps avoid that by letting GDAL do the allocation and 
deallocation with 

oSRS = (OGRSpatialReference*)OSRNewSpatialReference(NULL);

and

OGRSpatialReference::DestroySpatialReference(oSRS)

> 
> Thanks for any advice.
> 
> Paul
> 
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
> 
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Sat Jan 25 15:12:45 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Sat, 25 Jan 2014 23:12:45 +0000
Subject: [gdal-dev] New option INDEX_COLUMNS for SQLite and GPKG
In-Reply-To: <201401252328.10571.even.rouault@mines-paris.org>
References: <loom.20140125T222200-793@post.gmane.org>,
	<201401252328.10571.even.rouault@mines-paris.org>
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A017DE4@FITLK-EXMBX04.msvyvi.vaha.local>

Hi Even,

Good points and vacuuming is also very important sometimes but but does not suit at all for a creation option. I will think about some text and examples that could be added into SQLite/Spatialite performance hints.

-Jukka-


Even Rouault wrote:

> Hi Jukka,

> I'm a bit ambivalent about providing a creation option for that (although that
> would not be an heresy). For a few reasons :
> - it is relatively easy to create an attribute index manually (once you know
> the syntax)
> - it is not necessarily to create it at layer creation time
> - it would potentially apply to all drivers that have a SQL engine behind

> But I agree that improving the documentation to advertize the interest of
> indexes and how to create them could be usefull. Perhaps you would want to
> propose a modified version of the HTML page ? (I think that the GPKG one could
> just point to the relevant section of the SQLite one, to avoid doc
> duplication)

> Even

>> Hi,
>>
>> I guess that both SQLite/Spatialite and especially OGC Geopackage will be
>> used by people who consider them more like file formats than as datebases.
>> Such users may not know the power of indexes and they do not necessarily
>> know anything about SQL and such.
>>
>> How about writing a few lines about the power and importance of indexes
>> into the SQLite and GPKG driver pages? There could at least be on example
>> about how to create a new index with ogrinfo, which must be a secret even
>> for many advanced GDAL users. Better though, from user point of view,
>> would be to implement a new layer creation option. I see a very similar
>> case in SQLite/Spatialite
>> "COMPRESS_COLUMNS=column_name1[,column_name2, ...]: (Starting with GDAL
>> 1.10.0) A list of (String) columns that must be compressed"
>> The new -lco might be
>> "INDEX_COLUMNS=column_name1[,column_name2, ...]: (Starting with GDAL 2.0) A
>> list of columns that will be indexed".
>>
>> I am not sure if -lco should somehow support also composite indexes.
>> Perhaps users who know what those (and unique indexes) mean can also use
>> SQL and create them with ogrinfo if they can see an example in the
>> documentation. Thus -lco could be made to accept only one column per
>> index. And index name in the db could be set automatically into something
>> like
>> "layer_name_column_name_idx". The SQL that this -lco should fire is simply
>>
>> CREATE INDEX "table_name_column_name_idx"
>> ON "table_name" ("column_name");
>>
>> -Jukka Rahkonen-

From bontepaarden at gmail.com  Sat Jan 25 16:27:30 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Sun, 26 Jan 2014 01:27:30 +0100
Subject: [gdal-dev] exportToProj4
In-Reply-To: <201401260001.55965.even.rouault@mines-paris.org>
References: <CAHNf2YS=X7jpzH7LmzaSMDPuQuc4OxmTC_gEsDNAaZi_u9H+WQ@mail.gmail.com>
	<201401260001.55965.even.rouault@mines-paris.org>
Message-ID: <CAHNf2YTvQ=kVd9J+Zw=HmHRoHB2ce7pKHuLuDc9iTSfaTK1+Cw@mail.gmail.com>

Thanks Even,

This seems to be working. But unfortunately we have projection code in
several places, like
https://mapwingis.codeplex.com/SourceControl/latest#MapWinGIS/trunk/Processing/Projections.cppand
https://mapwingis.codeplex.com/SourceControl/latest#MapWinGIS/trunk/Grid/tkGridRaster.cpp(around
like 440).

I tried to use your suggestion in all those places, but it does compile but
doesn't run.
I'll need to let a true C++ developer look at it ;)

Thanks,



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl




2014-01-26 Even Rouault <even.rouault at mines-paris.org>

> Le samedi 25 janvier 2014 23:50:10, Paul Meems a ?crit :
> > Hi all,
> >
> > Thanks to Tamas Szekeres we are now using his binaries from
> > http://www.gisinternals.com/sdk/ with MapWinGIS, our mapping ActiveX.
> > This has drastically simplified our build process and we are very
> grateful
> > for Tamas' help.
> >
> > We're now struggling with some minor issues regarding our 'old' C++ code
> > and the new binaries for GDAL, GEOS, Proj4, etc.
> > Several of them I managed to solve, but I'm struggling with this one.
> > We have code to read a prj file and get the Proj4 string:
> >
> >     void ProjectionTools::GetProj4FromPRJFile(char * prjfileName, char **
> > prj4)
> >     {
> >         FILE * pFile;
> >         pFile = fopen (prjfileName,"r");
> >         if (pFile == NULL)
> >         {
> >             // Doesn't exist
> >             return;
> >         }
> >         fclose(pFile);
> >         pFile = NULL;
> >         OGRSpatialReference* oSRS = new OGRSpatialReference();
> >
> >         char **papszPrj = CSLLoad(prjfileName);
> >         if (papszPrj == NULL)
> >         {
> >             return;
> >         }
> >
> >         OGRErr eErr = oSRS->importFromESRI(papszPrj);
> >         if (eErr != OGRERR_NONE)
> >         {
> >             OGRErr eErr = oSRS->importFromProj4(*papszPrj);
> >         }
> >
> >         CSLDestroy( papszPrj );
> >         char * pszProj4 = NULL;
> >         eErr = oSRS->exportToProj4( &pszProj4 );
> >         delete oSRS; <-- going wrong now
> >
> >         *prj4 = new char[_tcslen(pszProj4)+1];
> >         strcpy(*prj4, pszProj4);
> >         CPLFree(pszProj4);
> >     }
> >
> > This code was working for years, but now it crashes on delete oSRS;.
> > I've been searching for examples of how to use exportToProj4() in C++ but
> > can only find Python examples.
> > And I'm not a C++ developer, just a C# developer :)
> > How should I now free oSRS?
>
> The code looks OK and there's no fundamental reason why it would not work
> any
> longer. I highly suspect that you are running into a classical issue of a
> mismatch between the compile flags used in your application and the ones
> used
> by the GDAL built itself.
>
> You could perhaps avoid that by letting GDAL do the allocation and
> deallocation with
>
> oSRS = (OGRSpatialReference*)OSRNewSpatialReference(NULL);
>
> and
>
> OGRSpatialReference::DestroySpatialReference(oSRS)
>
> >
> > Thanks for any advice.
> >
> > Paul
> >
> > *Paul Meems *
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140126/a9d7d54e/attachment-0001.html>

From ammar83_h at yahoo.com  Sun Jan 26 07:17:52 2014
From: ammar83_h at yahoo.com (Ammar)
Date: Sun, 26 Jan 2014 07:17:52 -0800 (PST)
Subject: [gdal-dev] Question about gdaladdo and raster mosaicking
In-Reply-To: <1390497076.505.53.camel@octopi>
References: <17506437.120071.1390305716535.JavaMail.nabble@alf.nabble.com>	
	<CAMKgpObpNJL00taOyMmU+7MSm4cTXe6Q=hWULQf5taJcc0en1A@mail.gmail.com>	
	<1390470736.23678.YahooMailNeo@web163001.mail.bf1.yahoo.com>	
	<CA+TxYvOstwVSrfJ2_CznE5HwqoK+Lm=C02ihEzE2wRE05AMfjA@mail.gmail.com>	
	<1390487285.95687.YahooMailNeo@web163004.mail.bf1.yahoo.com>
	<1390497076.505.53.camel@octopi>
Message-ID: <1390749472.76942.YahooMailNeo@web163003.mail.bf1.yahoo.com>

Brian,

Thank you for your help. I tried your suggestion and it gave me the same result. I started to believe that it is a lossy compression problem because once I tried to compress with LZW + predictor 2, the problem was gone!

Thanks again




________________________________
 From: Brian Case <rush at winkey.org>
To: Ammar <ammar83_h at yahoo.com> 
Cc: Etienne Tourigny <etourigny.dev at gmail.com>; gdal dev <gdal-dev at lists.osgeo.org> 
Sent: Thursday, January 23, 2014 6:11 PM
Subject: Re: [gdal-dev] Question about gdaladdo and raster mosaicking
 

Ammar


you want to turn on internal masks in the shell, gdaladdo will not use
them otherwise. also you will need to turn this on if you use mapserver.
gdal will need to have this turned on for any further operations.

gdaladdo should use the correct image options without specifying them

export GDAL_TIFF_INTERNAL_MASK=YES

gdalbuildvrt -srcnodata 255 -vrtnodata 255 -addalpha \
? ? ? ? ? ?  -input_file_list tiff_list.txt \
? ? ? ? ? ?  mosaic02.vrt


gdal_translate -of GTiff -b 1 -b 2 -b 3 -mask 4 -a_srs EPSG:3011 \
? ? ? ? ? ? ?  -co TILED=yes -co photometric=ycbcr \
? ? ? ? ? ? ?  -co compress=jpeg -co jpeg_quality=80 \
? ? ? ? ? ? ?  -co blockxsize=512 -co blockysize=512 \
? ? ? ? ? ? ?  -mosaic02.vrt \
? ? ? ? ? ? ?  -mosaic02.tif

gdaladdo mosaic02.tif -r average 2 4 8 16 32 64 128 256 512



and you should end up with a 



On Thu, 2014-01-23 at 06:28 -0800, Ammar wrote:
> Etienne,
> 
> I tried the following:
> 
> gdalbuildvrt -srcnodata 255 -vrtnodata 255 -addalpha -input_file_list
> tiff_list.txt mosaic02.vrt
> 
> gdal_translate -of GTiff -b 1 -b 2 -b 3 -mask 4 -a_srs EPSG:3011 -co
> TILED=yes -co compress=jpeg -co jpeg_quality=80 -co blockxsize=512 -co
> blockysize=512 -co photometric=ycbcr --config gdal_tiff_internal_mask
> yes mosaic02.vrt mosaic02.tif
> 
> gdaladdo mosaic02.tif -r average --config COMPRESS_OVERVIEW JPEG
> --config JPEG_QUALITY_OVERVIEW 60 --config INTERLEAVE_OVERVIEW PIXEL
> --config PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
> 
> Did I implement the mask the right way? The results I got were similar
> to the JPEG compression with no mask, in other words I got white lines
> too!
> 
> 
> 
> 
> 
> 
> 
> 
> ______________________________________________________________________
> From: Etienne Tourigny <etourigny.dev at gmail.com>
> To: Ammar <ammar83_h at yahoo.com> 
> Cc: Chaitanya kumar CH <chaitanya.ch at gmail.com>; gdal dev
> <gdal-dev at lists.osgeo.org> 
> Sent: Thursday, January 23, 2014 12:25 PM
> Subject: Re: [gdal-dev] Question about gdaladdo and raster mosaicking
> 
> 
> As was suggested, you could try using a mask instead.
> 
> 
> On Thu, Jan 23, 2014 at 7:52 AM, Ammar <ammar83_h at yahoo.com> wrote:
>? ? ? ?  Chaitanya,
>? ? ? ? 
>? ? ? ?  Thank you very much for your reply and suggestion. I have used
>? ? ? ?  LZW with predictor 2 compression and added external overviews
>? ? ? ?  compressed in LZW too and the image came perfect. The only
>? ? ? ?  downside is the size of each of the images has expanded from
>? ? ? ?  approx. 2 GB to 18-20 GB. So now I have to choose between
>? ? ? ?  quality and size!
>? ? ? ? 
>? ? ? ?  Attached are two screen shots showing the difference.
>? ? ? ? 
>? ? ? ?  Thanks again!
>? ? ? ? 
>? ? ? ?  Regards,
>? ? ? ?  Ammar
>? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ?  ______________________________________________________________
>? ? ? ?  From: Chaitanya kumar CH <chaitanya.ch at gmail.com>
>? ? ? ?  To: ammar83_h at yahoo.com 
>? ? ? ?  Cc: gdal dev <gdal-dev at lists.osgeo.org> 
>? ? ? ?  Sent: Tuesday, January 21, 2014 6:27 PM
>? ? ? ?  Subject: Re: Question about gdaladdo and raster mosaicking
>? ? ? ? 
>? ? ? ? 
>? ? ? ?  Ammar,
>? ? ? ?  You are using lossy JPEG compression. I'm guessing that the
>? ? ? ?  white lines are are actually pixels with values near but not
>? ? ? ?  equal to 255. So, they are not treated as nodata pixels.
>? ? ? ?  My suggestion is to use another format with lossless
>? ? ? ?  compression for the 21 images or use a mask band if you
>? ? ? ?  prefer.
>? ? ? ?  Let me know how it goes.
>? ? ? ?  --
>? ? ? ?  Best regards,
>? ? ? ?  Chaitanya Kumar CH
>? ? ? ?  On 21-Jan-2014 5:31 pm, <ammar83_h at yahoo.com> wrote:
>? ? ? ? ? ? ? ?  Hello Chaitanya,
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  I was looking online for solutions to my problem and I
>? ? ? ? ? ? ? ?  cam across some of your posts so I thought you might
>? ? ? ? ? ? ? ?  help me with my problem.
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  I have 10,000+ TIFF files that I want to merge into
>? ? ? ? ? ? ? ?  one big Image and serve using GeoServer. I merged
>? ? ? ? ? ? ? ?  every 500 images at a time creating using gdalbuildvrt
>? ? ? ? ? ? ? ?  and gdal_translate along with JPEG compression
>? ? ? ? ? ? ? ?  creating 21 TIFF files. I added overviews then to each
>? ? ? ? ? ? ? ?  of the new 21 files. When adding the images together,
>? ? ? ? ? ? ? ?  once directly as files using QGIS and another time as
>? ? ? ? ? ? ? ?  WMSs using GeoServer, I got white lines/gaps precisely
>? ? ? ? ? ? ? ?  at the border of ever 2 images. I thought the problem
>? ? ? ? ? ? ? ?  is with no data values but I decided to take another
>? ? ? ? ? ? ? ?  approach and merged all the 10,000 files into one huge
>? ? ? ? ? ? ? ?  image and this time I got one perfect image with no
>? ? ? ? ? ? ? ?  lines or gaps. I failed to create overviews for the
>? ? ? ? ? ? ? ?  big image because the process took days or gdaladdo
>? ? ? ? ? ? ? ?  running with no progress. I tested then on smaller
>? ? ? ? ? ? ? ?  images with and without overviews and the ones with no
>? ? ? ? ? ? ? ?  overview came perfect while the one with gdaladdo
>? ? ? ? ? ? ? ?  overviews came with the same problem of lines and
>? ? ? ? ? ? ? ?  gaps. The commands I m using are the following:
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ? ? gdalbuildvrt -srcnodata 255 -vrtnodata 255 -a_srs
>? ? ? ? ? ? ? ?  EPSG:27700 -input_file_list tiff_list.txt mosaic.vrt
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  gdal_translate -of GTiff -co TILED=YES -co BIGTIFF=YES
>? ? ? ? ? ? ? ?  -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co
>? ? ? ? ? ? ? ?  BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
>? ? ? ? ? ? ? ?  PHOTOMETRIC=YCBCR mosaic.vrt mosaic.tif
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  gdaladdo mosaic.tif -r average --config
>? ? ? ? ? ? ? ?  COMPRESS_OVERVIEW JPEG --config JPEG_QUALITY_OVERVIEW
>? ? ? ? ? ? ? ?  60 --config INTERLEAVE_OVERVIEW PIXEL --config
>? ? ? ? ? ? ? ?  PHOTOMETRIC_OVERVIEW YCBCR 2 4 8 16 32 64 128 256 512
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  Any ideas, tips or recommendations would be
>? ? ? ? ? ? ? ?  appreciated!
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  Best regards,
>? ? ? ? ? ? ? ?  Ammar
>? ? ? ? ? ? ? ? 
>? ? ? ? ? ? ? ?  _____________________________________
>? ? ? ? ? ? ? ?  Sent from http://osgeo-org.1560.x6.nabble.com
>? ? ? ? ? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ? 
>? ? ? ?  _______________________________________________
>? ? ? ?  gdal-dev mailing list
>? ? ? ? gdal-dev at lists.osgeo.org
>? ? ? ? http://lists.osgeo.org/mailman/listinfo/gdal-dev

> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140126/b1e6c035/attachment-0001.html>

From kansal.k at gmail.com  Sun Jan 26 23:46:47 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Mon, 27 Jan 2014 13:16:47 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
Message-ID: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>

Hello Everyone

I am an undergrad student in my Junior year of study. I have been involved
with some research in field of Spatial Temporal Analysis of Images. I have
been using the GDAL for various purposes, for quite some time now. I
thought that now its time to contribute something to Open Source Community.
So I started to think about the GSoC, 2014. As I started browsing the last
year's ideas, one idea that I could relate was "*Raster / Vector
Geo-referencer on the Web*".

*Motivation:*
The main motivation behind this is that, among the very first things that
are required in many remote sensing/geo-spatial related projects are
geo-referenced images. Most of the images that we have are generally not
referenced and hence we have to go to some tool and MANUALLY reference them
with the help of some reference image. This generally takes a lot of time
and most of the times errors do creep in.

*Original Idea:*
What has been proposed in this(as a part of GSoC'13 idea) was that we
should provide two image, one reference image and other un-referenced
image. Now with the help of this we should be able to geo-reference this
unreferenced image by MANUALLY selecting the Control Points. Some thing
like this :
http://www.youtube.com/watch?feature=player_embedded&v=88gt1gj2dbs

*Modified Idea:*
Now what I felt was that, this idea can be made more innovative and useful
if we can AUTOMATE this whole process of geo-referencing along with
providing the option for manual selection. This is where the knowledge of
Image Processing can help. There are various algorithms(like SIFT/SURF)
which can be used for doing this. We can apply these algorithms and extract
the GCP's and then geo-reference the images. Also, this thing has not been
implemented in any of the other open source softwares(like GRASS,QGIS). So
if we can implement this, other communities can build on these ideas or
even adapt it. It would be "entirely based on GDAL and completely reusable"

Furthermore, this idea can be expanded a lot in the sense that we should
not not put restrictions to the number of bands in the images. Now what I
mean by this is that reference image's bands may not be the same order of
unreferenced. It should work with images of any number of bands.

Any Comments or Suggestions or Feedback ?
Anyone willing to help me in this?

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140127/56ccc718/attachment.html>

From chaitanya.ch at gmail.com  Mon Jan 27 00:22:08 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 27 Jan 2014 13:52:08 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
Message-ID: <CAMKgpObpXavoPfyXxC1R4xpOvE6SaroMmCpxqE5GAuMR5U-Qsg@mail.gmail.com>

Hi all,
I talked with Kshitij about this idea at length. I am sure that he can do a
good job. He has the programming skills and has academic background in
image processing and computer vision.

I am willing to co-mentor him.

Kshitij,
You did not include the extensions we discussed. Estimating the shift
between two georeferenced images, matching rasters with vector datasets.




On Mon, Jan 27, 2014 at 1:16 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:

> Hello Everyone
>
> I am an undergrad student in my Junior year of study. I have been involved
> with some research in field of Spatial Temporal Analysis of Images. I have
> been using the GDAL for various purposes, for quite some time now. I
> thought that now its time to contribute something to Open Source Community.
> So I started to think about the GSoC, 2014. As I started browsing the last
> year's ideas, one idea that I could relate was "*Raster / Vector
> Geo-referencer on the Web*".
>
> *Motivation:*
> The main motivation behind this is that, among the very first things that
> are required in many remote sensing/geo-spatial related projects are
> geo-referenced images. Most of the images that we have are generally not
> referenced and hence we have to go to some tool and MANUALLY reference them
> with the help of some reference image. This generally takes a lot of time
> and most of the times errors do creep in.
>
> *Original Idea:*
> What has been proposed in this(as a part of GSoC'13 idea) was that we
> should provide two image, one reference image and other un-referenced
> image. Now with the help of this we should be able to geo-reference this
> unreferenced image by MANUALLY selecting the Control Points. Some thing
> like this :
> http://www.youtube.com/watch?feature=player_embedded&v=88gt1gj2dbs
>
> *Modified Idea:*
> Now what I felt was that, this idea can be made more innovative and useful
> if we can AUTOMATE this whole process of geo-referencing along with
> providing the option for manual selection. This is where the knowledge of
> Image Processing can help. There are various algorithms(like SIFT/SURF)
> which can be used for doing this. We can apply these algorithms and extract
> the GCP's and then geo-reference the images. Also, this thing has not been
> implemented in any of the other open source softwares(like GRASS,QGIS). So
> if we can implement this, other communities can build on these ideas or
> even adapt it. It would be "entirely based on GDAL and completely
> reusable"
>
> Furthermore, this idea can be expanded a lot in the sense that we should
> not not put restrictions to the number of bands in the images. Now what I
> mean by this is that reference image's bands may not be the same order of
> unreferenced. It should work with images of any number of bands.
>
> Any Comments or Suggestions or Feedback ?
> Anyone willing to help me in this?
>
> Regards,
>
> Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140127/a0fbe249/attachment.html>

From jluis at ualg.pt  Mon Jan 27 04:06:50 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 27 Jan 2014 12:06:50 +0000
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAMKgpObpXavoPfyXxC1R4xpOvE6SaroMmCpxqE5GAuMR5U-Qsg@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<CAMKgpObpXavoPfyXxC1R4xpOvE6SaroMmCpxqE5GAuMR5U-Qsg@mail.gmail.com>
Message-ID: <52E64BDA.9060506@ualg.pt>

Well, I actually implemented this idea in Mirone long time ago. First 
with SIFT and later with the SURF module in OpenCV, but I really never 
tested much from the the point that "some cases work well, others not so 
much".

Anyway, you might be interested to look also into ASIFT. It looks promising

http://www.cmap.polytechnique.fr/~yu/research/ASIFT/demo.html

Joaquim

> Hi all,
> I talked with Kshitij about this idea at length. I am sure that he can 
> do a good job. He has the programming skills and has academic 
> background in image processing and computer vision.
>
> I am willing to co-mentor him.
>
> Kshitij,
> You did not include the extensions we discussed. Estimating the shift 
> between two georeferenced images, matching rasters with vector datasets.
>
>
>
>
> On Mon, Jan 27, 2014 at 1:16 PM, Kshitij Kansal <kansal.k at gmail.com 
> <mailto:kansal.k at gmail.com>> wrote:
>
>     Hello Everyone
>
>     I am an undergrad student in my Junior year of study. I have been
>     involved with some research in field of Spatial Temporal Analysis
>     of Images. I have been using the GDAL for various purposes, for
>     quite some time now. I thought that now its time to contribute
>     something to Open Source Community. So I started to think about
>     the GSoC, 2014. As I started browsing the last year's ideas, one
>     idea that I could relate was "*Raster / Vector Geo-referencer on
>     the Web*".
>
>     *Motivation:*
>     The main motivation behind this is that, among the very first
>     things that are required in many remote sensing/geo-spatial
>     related projects are geo-referenced images. Most of the images
>     that we have are generally not referenced and hence we have to go
>     to some tool and MANUALLY reference them with the help of some
>     reference image. This generally takes a lot of time and most of
>     the times errors do creep in.
>
>     *Original Idea:*
>     What has been proposed in this(as a part of GSoC'13 idea) was that
>     we should provide two image, one reference image and other
>     un-referenced image. Now with the help of this we should be able
>     to geo-reference this unreferenced image by MANUALLY selecting the
>     Control Points. Some thing like this :
>     http://www.youtube.com/watch?feature=player_embedded&v=88gt1gj2dbs
>     <http://www.youtube.com/watch?feature=player_embedded&v=88gt1gj2dbs>
>
>     *Modified Idea:*
>     Now what I felt was that, this idea can be made more innovative
>     and useful if we can AUTOMATE this whole process of
>     geo-referencing along with providing the option for manual
>     selection. This is where the knowledge of Image Processing can
>     help. There are various algorithms(like SIFT/SURF) which can be
>     used for doing this. We can apply these algorithms and extract the
>     GCP's and then geo-reference the images. Also, this thing has not
>     been implemented in any of the other open source softwares(like
>     GRASS,QGIS). So if we can implement this, other communities can
>     build on these ideas or even adapt it. It would be "entirely based
>     on GDAL and completely reusable"
>
>     Furthermore, this idea can be expanded a lot in the sense that we
>     should not not put restrictions to the number of bands in the
>     images. Now what I mean by this is that reference image's bands
>     may not be the same order of unreferenced. It should work with
>     images of any number of bands.
>
>     Any Comments or Suggestions or Feedback ?
>     Anyone willing to help me in this?
>
>     Regards,
>
>         Kshitij Kansal
>
>         Lab For Spatial Informatics,
>
>         IIIT Hyderabad
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140127/b8457468/attachment-0001.html>

From kassies at gmail.com  Tue Jan 28 00:14:42 2014
From: kassies at gmail.com (Rutger)
Date: Tue, 28 Jan 2014 00:14:42 -0800 (PST)
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
Message-ID: <1390896882268-5100379.post@n6.nabble.com>

Just for your information. There already has been some work, at GSoC '13, to
get this type of algorithms in scikit-image, see:
http://skimager.blogspot.nl/

Scikit-image is of course restricted to use with Python. But of your final
aim is to add this to for example QGIS (Which can handle Python) a lot of
work is already done. 

Having this functionality at the core of GDAL would of course target much
more people then only Python users. 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-RFC-GDAL-Idea-for-GSoC-2014-tp5100128p5100379.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lucena_ivan at hotmail.com  Tue Jan 28 10:52:26 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 28 Jan 2014 13:52:26 -0500
Subject: [gdal-dev] OGRDataSource::CopyLayer
Message-ID: <BLU173-W44AFFE4B5D50394E5021190AD0@phx.gbl>

Hi there,

I have question/suggestion about that method. When it goes though the loop it calls the driver's CreateField several times, depending on the number of columns on the table. In a DBMS environment, at that point the table is already created and the only thing the driver's CreateField() can do is to issue some ALTER TABLE statements. But that is too time consuming. It takes more time than to load geometry in some cases.

Is there a way to pass the field description information to the driver and let it decide to create the table at once with a complete description of the fields?

Best regards,

Ivan




 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140128/5fa66fac/attachment.html>

From kansal.k at gmail.com  Tue Jan 28 11:41:15 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Wed, 29 Jan 2014 01:11:15 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <1390896882268-5100379.post@n6.nabble.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
Message-ID: <CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>

Hello

Thank you for you suggestions.

Joaquim

I looked into the link regarding Affine-SIFT that you provided. Indeed the
results that are shown there are very promising. If we can bring this to
one of the core functionality of GDAL then it would not only help in this
project but many more digital image/computer vision related projects.

Rutger

Yes the main aim to propose this idea into GDAL community is to bring this
functionality into the core GDAL functionality. I checked with the other
communities like QGIS or GRASS or even OPTICKS, but this functionality of
automatic geo-referencing is not present and till now no work has been done
in this direction. If implemented here, these communities can directly
adapt our thing and then build on this.

As we can see that we have a lot of algorithms to start with. Some kind of
analysis like "Estimating the shift between two georeferenced images". This
was something Chaitanya was talking about.

Also there was something me and Chaitanya discussed about, like matching
 raster with vector datasets, for example, GPX data could be used to match
roads.

Once we have this available in our core functionality of GDAL, we can
easily use it to make "*Raster / Vector Geo-referencer on the Web*" which
was the original idea proposed by the community in GS0C'13.

Any Comments or Suggestions?
Suggestions for getting started..

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Tue, Jan 28, 2014 at 1:44 PM, Rutger <kassies at gmail.com> wrote:

> Just for your information. There already has been some work, at GSoC '13,
> to
> get this type of algorithms in scikit-image, see:
> http://skimager.blogspot.nl/
>
> Scikit-image is of course restricted to use with Python. But of your final
> aim is to add this to for example QGIS (Which can handle Python) a lot of
> work is already done.
>
> Having this functionality at the core of GDAL would of course target much
> more people then only Python users.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-RFC-GDAL-Idea-for-GSoC-2014-tp5100128p5100379.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140129/88d75b64/attachment.html>

From even.rouault at mines-paris.org  Tue Jan 28 11:50:26 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 28 Jan 2014 20:50:26 +0100
Subject: [gdal-dev] OGRDataSource::CopyLayer
In-Reply-To: <BLU173-W44AFFE4B5D50394E5021190AD0@phx.gbl>
References: <BLU173-W44AFFE4B5D50394E5021190AD0@phx.gbl>
Message-ID: <201401282050.27085.even.rouault@mines-paris.org>

Le mardi 28 janvier 2014 19:52:26, Ivan Lucena a ?crit :
> Hi there,
> 
> I have question/suggestion about that method. When it goes though the loop
> it calls the driver's CreateField several times, depending on the number
> of columns on the table. In a DBMS environment, at that point the table is
> already created and the only thing the driver's CreateField() can do is to
> issue some ALTER TABLE statements. But that is too time consuming. It
> takes more time than to load geometry in some cases.
> 
> Is there a way to pass the field description information to the driver and
> let it decide to create the table at once with a complete description of
> the fields?

Ivan,

No, such a method doesn't exist.

One possible solution would be that the implementation of CreateLayer() and 
CreateField() in the driver doesn't do any SQL operation, but just save into 
memory the necessary elements to create the table later. The actual table 
creation would be deferred at the time of the first CreateFeature(), 
BeginTransaction(), or when the layer is destroyed.

Another solution would be to introduce a virtual method in OGRLayer - 
CreateLayerWithFields() - that could be specialized in drivers. The base 
implementation would just call CreateLayer() and CreateFields(). CopyLayer() 
and ogr2ogr would need to be retrofitted to use CreateLayerWithFields()

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Jan 28 12:01:00 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 28 Jan 2014 21:01:00 +0100
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
Message-ID: <201401282101.00768.even.rouault@mines-paris.org>

Le mardi 28 janvier 2014 20:41:15, Kshitij Kansal a ?crit :
> Hello
> 
> Thank you for you suggestions.
> 
> Joaquim
> 
> I looked into the link regarding Affine-SIFT that you provided. Indeed the
> results that are shown there are very promising. If we can bring this to
> one of the core functionality of GDAL then it would not only help in this
> project but many more digital image/computer vision related projects.
> 
> Rutger
> 
> Yes the main aim to propose this idea into GDAL community is to bring this
> functionality into the core GDAL functionality. I checked with the other
> communities like QGIS or GRASS or even OPTICKS, but this functionality of
> automatic geo-referencing is not present and till now no work has been done
> in this direction. If implemented here, these communities can directly
> adapt our thing and then build on this.
> 
> As we can see that we have a lot of algorithms to start with. Some kind of
> analysis like "Estimating the shift between two georeferenced images". This
> was something Chaitanya was talking about.
> 
> Also there was something me and Chaitanya discussed about, like matching
>  raster with vector datasets, for example, GPX data could be used to match
> roads.
> 
> Once we have this available in our core functionality of GDAL, we can
> easily use it to make "*Raster / Vector Geo-referencer on the Web*" which
> was the original idea proposed by the community in GS0C'13.
> 
> Any Comments or Suggestions?

Kshitij,

I just wanted to mention, to avoid any potential problem later in the process, 
that if you adapt existing code from other projects into GDAL, you will need 
to make sure that it comes with a license compatible with the GDAL X/MIT 
license (so LGPL or GPL would not be OK), or make sure with copyright holders 
that it is OK to port it to GDAL under the GDAL X/MIT license.

As a result of last year GSoC, we have an implementation of SURF algorithm in 
GDAL. Not sure how mature it is, but that might be a potential starting point.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Tue Jan 28 12:06:19 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 28 Jan 2014 15:06:19 -0500
Subject: [gdal-dev] OGRDataSource::CopyLayer
In-Reply-To: <201401282050.27085.even.rouault@mines-paris.org>
References: <BLU173-W44AFFE4B5D50394E5021190AD0@phx.gbl>,
	<201401282050.27085.even.rouault@mines-paris.org>
Message-ID: <BLU173-W4506780797AD29256CCB9F90AD0@phx.gbl>

Even,

> From: even.rouault at mines-paris.org
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] OGRDataSource::CopyLayer
> Date: Tue, 28 Jan 2014 20:50:26 +0100
> CC: lucena_ivan at hotmail.com
> 
> Le mardi 28 janvier 2014 19:52:26, Ivan Lucena a ?crit :
> > Hi there,
> > 
> > I have question/suggestion about that method. When it goes though the loop
> > it calls the driver's CreateField several times, depending on the number
> > of columns on the table. In a DBMS environment, at that point the table is
> > already created and the only thing the driver's CreateField() can do is to
> > issue some ALTER TABLE statements. But that is too time consuming. It
> > takes more time than to load geometry in some cases.
> > 
> > Is there a way to pass the field description information to the driver and
> > let it decide to create the table at once with a complete description of
> > the fields?
> 
> Ivan,
> 
> No, such a method doesn't exist.
> 
> One possible solution would be that the implementation of CreateLayer() and 
> CreateField() in the driver doesn't do any SQL operation, but just save into 
> memory the necessary elements to create the table later. The actual table 
> creation would be deferred at the time of the first CreateFeature(), 
> BeginTransaction(), or when the layer is destroyed.

I will try that option and see how it goes.

> Another solution would be to introduce a virtual method in OGRLayer - 
> CreateLayerWithFields() - that could be specialized in drivers. The base 
> implementation would just call CreateLayer() and CreateFields(). CopyLayer() 
> and ogr2ogr would need to be retrofitted to use CreateLayerWithFields()

It looks like a very generic problem that might need a general solution in the future.

Thanks!

> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140128/e91b40c6/attachment.html>

From kansal.k at gmail.com  Tue Jan 28 13:34:39 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Wed, 29 Jan 2014 03:04:39 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <201401282101.00768.even.rouault@mines-paris.org>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
Message-ID: <CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>

Even,

Thank you for pointing out this issue. I will keep this in mind.

I will look into that last year project and try to understand the
implementation.

More suggestions and comments are always welcomed.

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Wed, Jan 29, 2014 at 1:31 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 28 janvier 2014 20:41:15, Kshitij Kansal a ?crit :
> > Hello
> >
> > Thank you for you suggestions.
> >
> > Joaquim
> >
> > I looked into the link regarding Affine-SIFT that you provided. Indeed
> the
> > results that are shown there are very promising. If we can bring this to
> > one of the core functionality of GDAL then it would not only help in this
> > project but many more digital image/computer vision related projects.
> >
> > Rutger
> >
> > Yes the main aim to propose this idea into GDAL community is to bring
> this
> > functionality into the core GDAL functionality. I checked with the other
> > communities like QGIS or GRASS or even OPTICKS, but this functionality of
> > automatic geo-referencing is not present and till now no work has been
> done
> > in this direction. If implemented here, these communities can directly
> > adapt our thing and then build on this.
> >
> > As we can see that we have a lot of algorithms to start with. Some kind
> of
> > analysis like "Estimating the shift between two georeferenced images".
> This
> > was something Chaitanya was talking about.
> >
> > Also there was something me and Chaitanya discussed about, like matching
> >  raster with vector datasets, for example, GPX data could be used to
> match
> > roads.
> >
> > Once we have this available in our core functionality of GDAL, we can
> > easily use it to make "*Raster / Vector Geo-referencer on the Web*" which
> > was the original idea proposed by the community in GS0C'13.
> >
> > Any Comments or Suggestions?
>
> Kshitij,
>
> I just wanted to mention, to avoid any potential problem later in the
> process,
> that if you adapt existing code from other projects into GDAL, you will
> need
> to make sure that it comes with a license compatible with the GDAL X/MIT
> license (so LGPL or GPL would not be OK), or make sure with copyright
> holders
> that it is OK to port it to GDAL under the GDAL X/MIT license.
>
> As a result of last year GSoC, we have an implementation of SURF algorithm
> in
> GDAL. Not sure how mature it is, but that might be a potential starting
> point.
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140129/87c3806e/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Jan 28 23:57:04 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 29 Jan 2014 07:57:04 +0000 (UTC)
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
Message-ID: <loom.20140129T084029-6@post.gmane.org>

Kshitij Kansal <kansal.k <at> gmail.com> writes:

> 
> Even,
> Thank you for pointing out this issue. I will keep this in mind.
> 
> I will look into that last year project and try to understand the
implementation.?
> 
 
> More suggestions and comments are always welcomed.

Hi,

Another OSGeo project OSSIM has implemented an automatic image to image
rectification. Isn't that a bit alike your plan?
http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf

Frank Warmerdam seems to entertain himself with something related
http://fwarmerdam.blogspot.fi/

This article from 2013 may also give some inspiration
http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs

All these three aim to very high quality and I am sure that there is also
need for a more light-weight system.

-Jukka Rahkonen-


From peifer at gmx.eu  Wed Jan 29 03:51:25 2014
From: peifer at gmx.eu (peifer)
Date: Wed, 29 Jan 2014 03:51:25 -0800 (PST)
Subject: [gdal-dev] ogrinfo only sees 1 polygon in GML file
Message-ID: <1390996285744-5100685.post@n6.nabble.com>

Hi,

I have a GML file [1], which according to my understanding has 7 polygon
features [2]. ogrinfo only sees 1 feature [3], which is the last one in
document order (gml:id="ZON_NO0005_Polygon").

Can someone please tell me if the observed ogrinfo behaviour is a known
limitation of the GML driver, a bug -- or if I am perhaps doing something
terribly wrong? I am using GDAL from trunk, by the way.

Thanks in advance, Hermann

[1] http://tinyurl.com/q98z4ya

[2] grep "<gml:Polygon&quot; AQD_Zones.xml | nl
1 &lt;gml:Polygon gml:id=&quot;ZON_NO0003_Polygon&quot;
srsName=&quot;urn:ogc:def:crs:EPSG::4258&quot;>
2 <gml:Polygon gml:id="ZON_NO0007_Polygon"
srsName="urn:ogc:def:crs:EPSG::4258">
3 <gml:Polygon gml:id="ZON_NO0002_Polygon"
srsName="urn:ogc:def:crs:EPSG::4258">
4 <gml:Polygon gml:id="ZON_NO0004_Polygon"
srsName="urn:ogc:def:crs:EPSG::4258">
5 <gml:Polygon gml:id="ZON_NO0001_Polygon"
srsName="urn:ogc:def:crs:EPSG::4258">
6 <gml:Polygon gml:id="ZON_NO0006_Polygon"
srsName="urn:ogc:def:crs:EPSG::4258">
7 <gml:Polygon gml:id="ZON_NO0005_Polygon"
srsName="urn:ogc:def:crs:EPSG::4258">

[3] ogrinfo -al -so -ro AQD_Zones.xml
INFO: Open of `AQD_Zones.xml'
using driver `GML' successful.

Layer name: AQD_ReportingHeader
Geometry: Polygon
Feature Count: 1
Extent: (4.500440, 58.255870) - (8.322050, 62.273860)
(...)



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ogrinfo-only-sees-1-polygon-in-GML-file-tp5100685.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From stefan.bernsdorf at centauron.de  Wed Jan 29 04:06:42 2014
From: stefan.bernsdorf at centauron.de (Stefan Bernsdorf)
Date: Wed, 29 Jan 2014 13:06:42 +0100
Subject: [gdal-dev] [NAS] srsName in NAS import
In-Reply-To: <loom.20140129T084029-6@post.gmane.org>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>	<1390896882268-5100379.post@n6.nabble.com>	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>	<201401282101.00768.even.rouault@mines-paris.org>	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
Message-ID: <52E8EED2.4000802@centauron.de>


Hi,
I have question concerning the NAS data importer.
In the NAS data there is a srsName attribute for every geometry object.
This srsName can differ from the srsName for the whole layer.
As far as I see in the code, this is actually not implemented and this 
leads to wrong data is the value for the srsName differs.
Anybody familiar with this problem?
(I have seen, that Frank and Even wrote most of the code.)
  Regards, Stefan.


From even.rouault at mines-paris.org  Wed Jan 29 05:12:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 29 Jan 2014 14:12:06 +0100
Subject: [gdal-dev] [NAS] srsName in NAS import
In-Reply-To: <52E8EED2.4000802@centauron.de>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<52E8EED2.4000802@centauron.de>
Message-ID: <201401291412.06280.even.rouault@mines-paris.org>

Le mercredi 29 janvier 2014 13:06:42, Stefan Bernsdorf a ?crit :
> Hi,
> I have question concerning the NAS data importer.
> In the NAS data there is a srsName attribute for every geometry object.
> This srsName can differ from the srsName for the whole layer.
> As far as I see in the code, this is actually not implemented and this
> leads to wrong data is the value for the srsName differs.

Interesting. I imagine on-the-fly reprojection should be done from the feature 
SRS to the layer SRS ? CC'ing Jef since he has done work in the NAS driver 
recently.

> Anybody familiar with this problem?
> (I have seen, that Frank and Even wrote most of the code.)
>   Regards, Stefan.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jef at norbit.de  Wed Jan 29 05:54:24 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed, 29 Jan 2014 14:54:24 +0100
Subject: [gdal-dev] [NAS] srsName in NAS import
In-Reply-To: <201401291412.06280.even.rouault@mines-paris.org>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<52E8EED2.4000802@centauron.de>
	<201401291412.06280.even.rouault@mines-paris.org>
Message-ID: <20140129135424.GA18289@norbit.de>

Hi Even,

On Wed, 29. Jan 2014 at 14:12:06 +0100, Even Rouault wrote:
> > In the NAS data there is a srsName attribute for every geometry object.
> > This srsName can differ from the srsName for the whole layer.  As far as I
> > see in the code, this is actually not implemented and this leads to wrong
> > data is the value for the srsName differs.

> Interesting. I imagine on-the-fly reprojection should be done from the
> feature SRS to the layer SRS ? CC'ing Jef since he has done work in the NAS
> driver recently.

Yes, I wanted to look that up, before responding to a post on the nas list[1].
But didn't find time to yet.

I didn't come across such datasets yet.  Test data would be appreciated.


J?rgen


[1] http://lists.osgeo.org/pipermail/nas/2014-January/000596.html

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From even.rouault at mines-paris.org  Wed Jan 29 06:23:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 29 Jan 2014 15:23:32 +0100
Subject: [gdal-dev] ogrinfo only sees 1 polygon in GML file
In-Reply-To: <1390996285744-5100685.post@n6.nabble.com>
References: <1390996285744-5100685.post@n6.nabble.com>
Message-ID: <201401291523.33048.even.rouault@mines-paris.org>

Le mercredi 29 janvier 2014 12:51:25, peifer a ?crit :
> Hi,
> 
> I have a GML file [1], which according to my understanding has 7 polygon
> features [2]. ogrinfo only sees 1 feature [3], which is the last one in
> document order (gml:id="ZON_NO0005_Polygon").
> 
> Can someone please tell me if the observed ogrinfo behaviour is a known
> limitation of the GML driver, a bug -- or if I am perhaps doing something
> terribly wrong? I am using GDAL from trunk, by the way.

Hermann,

It is (was) a limitation of the GML driver. The issue is that from its point 
of view there's only one feature AQD_ReportingHeader, but you are interested 
into its sub-elements AQD_Zone, and the GML parser isn't smart enough to guess 
your intention.

Two solutions :
- one that implies a text editor to rename a few elements in the GML itself. 
Rename "featureMember" into "foobaroranythingyouwant" and "content>" into 
"contentMember>" (needs to end with Member). The OGR GML parser will then find 
the sub features (remove the .gfs file before)

- upgrade to latest trunk and use the attached AQD_Zones.gfs file. It is a 
modification of the base AQD_Zones.gfs file produced when reading the first time 
the GML file with the following changes : the ElementPath for the feature has 
been modified to include full path from top level XML element, and the 
ElementPath of attributes have been modified to remove content|AQD_Zone| from 
their path.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
-------------- next part --------------
<GMLFeatureClassList>
  <GMLFeatureClass>
    <Name>AQD_Zone</Name>
    <ElementPath>featureMember|AQD_ReportingHeader|content|AQD_Zone</ElementPath>
    <GeometryType>3</GeometryType>
    <SRSName>GEOGCS["ETRS89",DATUM["European_Terrestrial_Reference_System_1989",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6258"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4258"]]</SRSName>
    <PropertyDefn>
      <Name>localId</Name>
      <ElementPath>inspireId|Identifier|localId</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>namespace</Name>
      <ElementPath>inspireId|Identifier|namespace</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>versionId</Name>
      <ElementPath>inspireId|Identifier|versionId</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>language</Name>
      <ElementPath>name|GeographicalName|language</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>text</Name>
      <ElementPath>name|GeographicalName|spelling|SpellingOfName|text</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>beginPosition</Name>
      <ElementPath>designationPeriod|TimePeriod|beginPosition</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>CharacterString</Name>
      <ElementPath>competentAuthority|RelatedParty|individualName|CharacterString</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>competentAuthority|RelatedParty|organisationName|CharacterString</Name>
      <ElementPath>competentAuthority|RelatedParty|organisationName|CharacterString</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>competentAuthority|RelatedParty|contact|Contact|address|AddressRepresentation|adminUnit|GeographicalName|language</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|address|AddressRepresentation|adminUnit|GeographicalName|language</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>competentAuthority|RelatedParty|contact|Contact|address|AddressRepresentation|adminUnit|GeographicalName|spelling|SpellingOfName|text</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|address|AddressRepresentation|adminUnit|GeographicalName|spelling|SpellingOfName|text</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>locatorDesignator</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|address|AddressRepresentation|locatorDesignator</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>postCode</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|address|AddressRepresentation|postCode</ElementPath>
      <Type>IntegerList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>electronicMailAddress</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|electronicMailAddress</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>telephoneVoice</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|telephoneVoice</ElementPath>
      <Type>RealList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>website</Name>
      <ElementPath>competentAuthority|RelatedParty|contact|Contact|website</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>beginLifespanVersion</Name>
      <ElementPath>beginLifespanVersion</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>name</Name>
      <ElementPath>legalBasis|LegislationCitation|name</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>shortName</Name>
      <ElementPath>legalBasis|LegislationCitation|shortName</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>Date</Name>
      <ElementPath>legalBasis|LegislationCitation|date|CI_Date|date|Date</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>link</Name>
      <ElementPath>legalBasis|LegislationCitation|link</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>identificationNumber</Name>
      <ElementPath>legalBasis|LegislationCitation|identificationNumber</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>officialDocumentNumber</Name>
      <ElementPath>legalBasis|LegislationCitation|officialDocumentNumber</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>dateEnteredIntoForce</Name>
      <ElementPath>legalBasis|LegislationCitation|dateEnteredIntoForce</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>zoneCode</Name>
      <ElementPath>zoneCode</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>residentPopulation</Name>
      <ElementPath>residentPopulation</ElementPath>
      <Type>IntegerList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>timePosition</Name>
      <ElementPath>residentPopulationYear|TimeInstant|timePosition</ElementPath>
      <Type>IntegerList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>area</Name>
      <ElementPath>area</ElementPath>
      <Type>IntegerList</Type>
    </PropertyDefn>
    <PropertyDefn>
      <Name>area_uom</Name>
      <ElementPath>area_uom</ElementPath>
      <Type>StringList</Type>
    </PropertyDefn>
  </GMLFeatureClass>
</GMLFeatureClassList>

From peifer at gmx.eu  Wed Jan 29 07:49:46 2014
From: peifer at gmx.eu (peifer)
Date: Wed, 29 Jan 2014 07:49:46 -0800 (PST)
Subject: [gdal-dev] ogrinfo only sees 1 polygon in GML file
In-Reply-To: <201401291523.33048.even.rouault@mines-paris.org>
References: <1390996285744-5100685.post@n6.nabble.com>
	<201401291523.33048.even.rouault@mines-paris.org>
Message-ID: <1391010586285-5100746.post@n6.nabble.com>

Even Rouault wrote
> Hermann,
> 
> It is (was) a limitation of the GML driver. The issue is that from its
> point 
> of view there's only one feature AQD_ReportingHeader, but you are
> interested 
> into its sub-elements AQD_Zone, and the GML parser isn't smart enough to
> guess 
> your intention.
> 
> Two solutions :
> - one that implies a text editor to rename a few elements in the GML
> itself. 
> Rename "featureMember" into "foobaroranythingyouwant" and "content>" into 
> "contentMember>" (needs to end with Member). The OGR GML parser will then
> find 
> the sub features (remove the .gfs file before)
> 
> - upgrade to latest trunk and use the attached AQD_Zones.gfs file. It is a 
> modification of the base AQD_Zones.gfs file produced when reading the
> first time 
> the GML file with the following changes : the ElementPath for the feature
> has 
> been modified to include full path from top level XML element, and the 
> ElementPath of attributes have been modified to remove content|AQD_Zone|
> from 
> their path.

I was indeed experimenting with the ElementPath value in the gfs file, but
couldn't see any effect (before upgrading to latest trunk). After upgrading,
all features are detected, as expected.

Thanks for improving the GML driver so quickly, Hermann



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ogrinfo-only-sees-1-polygon-in-GML-file-tp5100685p5100746.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From stefan.bernsdorf at centauron.de  Wed Jan 29 11:28:36 2014
From: stefan.bernsdorf at centauron.de (Stefan Bernsdorf)
Date: Wed, 29 Jan 2014 20:28:36 +0100
Subject: [gdal-dev] [NAS] srsName in NAS import
In-Reply-To: <20140129135424.GA18289@norbit.de>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>	<loom.20140129T084029-6@post.gmane.org>	<52E8EED2.4000802@centauron.de>	<201401291412.06280.even.rouault@mines-paris.org>
	<20140129135424.GA18289@norbit.de>
Message-ID: <52E95664.4060707@centauron.de>


J?rgen, Even,

please find below a snip of my NAS-data. As there are legal restrictions 
I xxxxed  the coordinate information and some other stuff.

             <gml:featureMember>
                 <AX_PunktortAU gml:id="DERPLP170000rFWQ">
                     <gml:identifier 
codeSpace="http://www.adv-online.de/">urn:adv:oid:DERPLP170000rFWQ</gml:identifier>
                     <lebenszeitintervall>
                         <AA_Lebenszeitintervall>
<beginnt>2010-09-14T13:01:56Z</beginnt>
                         </AA_Lebenszeitintervall>
                     </lebenszeitintervall>
                     <modellart>
                         <AA_Modellart>
<advStandardModell>DLKM</advStandardModell>
                         </AA_Modellart>
                     </modellart>
                     <anlass>000000</anlass>
                     <istTeilVon xlink:href="urn:adv:oid:DERPLP170000s7ky"/>
                     <position>
                         <gml:Point gml:id="CP8">
                             <gml:pos 
srsName="urn:adv:crs:LOKAL_RP_UTM32101">3239XXXX.XXX 547XXXX.XXX</gml:pos>
                         </gml:Point>
                     </position>
<kartendarstellung>false</kartendarstellung>
                     <qualitaetsangaben>
                         <AX_DQPunktort>
                             <herkunft>
                                 <gmd:LI_Lineage>
                                     <gmd:processStep>
                                         <gmd:LI_ProcessStep>
<gmd:description>
<gco:CharacterString>Berechnung</gco:CharacterString>
</gmd:description>
                                             <gmd:dateTime>
<gco:DateTime>1996-01-01T00:00:00Z</gco:DateTime>
                                             </gmd:dateTime>
</gmd:LI_ProcessStep>
                                     </gmd:processStep>
                                     <gmd:source>
                                         <gmd:LI_Source>
<gmd:description>
<gco:CharacterString>9998</gco:CharacterString>
</gmd:description>
                                         </gmd:LI_Source>
                                     </gmd:source>
                                 </gmd:LI_Lineage>
                             </herkunft>
                         </AX_DQPunktort>
                     </qualitaetsangaben>
                 </AX_PunktortAU>
             </gml:featureMember>



Am 29.01.2014 14:54, schrieb J?rgen E. Fischer:
> Hi Even,
>
> On Wed, 29. Jan 2014 at 14:12:06 +0100, Even Rouault wrote:
>>> In the NAS data there is a srsName attribute for every geometry object.
>>> This srsName can differ from the srsName for the whole layer.  As far as I
>>> see in the code, this is actually not implemented and this leads to wrong
>>> data is the value for the srsName differs.
>> Interesting. I imagine on-the-fly reprojection should be done from the
>> feature SRS to the layer SRS ? CC'ing Jef since he has done work in the NAS
>> driver recently.
> Yes, I wanted to look that up, before responding to a post on the nas list[1].
> But didn't find time to yet.
>
> I didn't come across such datasets yet.  Test data would be appreciated.
>
>
> J?rgen
>
>
> [1] http://lists.osgeo.org/pipermail/nas/2014-January/000596.html
>



From kansal.k at gmail.com  Wed Jan 29 22:55:38 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Thu, 30 Jan 2014 12:25:38 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <loom.20140129T084029-6@post.gmane.org>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
Message-ID: <CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>

Hello

@Jukka Rahkonen: The OSSIM project (the link you provided) is more of image
orthorectification. Although
they are doing image co-registration but its as one of the steps of
orthorectification(I could only understand this from the manual).
Also I am not sure of the techniques they are using for this purposes. (Its
written corner point detection but How?)
I am new to OSSIM, so not aware of this thing's functionality and accuracy.
I am in the process of estimating it.

Thank you for pointing this out.

Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/). Here
the author is talking about writing a code for converting the GCP's into
RPC's. But the next question comes is where is he getting GCP's from. Now
this is the part where I aim to work on and improve.

Given two images, if we can automatically extract GCP's from them then we
are in a way speeding up and automating this whole process. Once we have
GCP, there are a lot of things that we can do from them like
geo-referencing(which I plan on doing), image stitching etc.

*Also you talked about a "more light weighted system". Can you please
elaborate on this?* I could not understand what you actually meant from
that.

If we look into the last year idea's page (
http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea that is
proposed regarding the "Raster/Vector geo-referencer on the Web". I want to
modify this idea a little bit and want to automate the whole process. As
far as the automation is concerned, we can develop GDAL functions for
that(which will be completely re-usable) and then developing a Web based
geo-referencer would only require calling those functions.

If we do this thing,* two objectives will be fulfilled*.* First*, GDAL will
get a web based geo-referencer. *Secondly*, communities that use GDAL and
have not developed these kind of geo-referencer(Like QGIS) can directly use
the functions developed and then build on that.

Suggestions and comments are welcomed.

Thank you for your propositions.

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Kshitij Kansal <kansal.k <at> gmail.com> writes:
>
> >
> > Even,
> > Thank you for pointing out this issue. I will keep this in mind.
> >
> > I will look into that last year project and try to understand the
> implementation.
> >
>
> > More suggestions and comments are always welcomed.
>
> Hi,
>
> Another OSGeo project OSSIM has implemented an automatic image to image
> rectification. Isn't that a bit alike your plan?
> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
>
> Frank Warmerdam seems to entertain himself with something related
> http://fwarmerdam.blogspot.fi/
>
> This article from 2013 may also give some inspiration
>
> http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
>
> All these three aim to very high quality and I am sure that there is also
> need for a more light-weight system.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140130/7255c303/attachment.html>

From jukka.rahkonen at mmmtike.fi  Thu Jan 30 04:31:18 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 30 Jan 2014 12:31:18 +0000 (UTC)
Subject: [gdal-dev] OGR changes some proj linear units, true or not?
Message-ID: <loom.20140130T132816-150@post.gmane.org>

Hi,

Noticed this one in QGIS issues http://hub.qgis.org/issues/9414

Writer claims:
"I just tried with a simple C++ wrapper around OSRImportFromProj4, and it
seems OGR doesn't keep the unit for at least dm,cm,mm. It will only work for
some units: such as km, ft, yd, us-ft, us-yd, etc."

-Jukka Rahkonen-




From ychemin at gmail.com  Thu Jan 30 05:08:22 2014
From: ychemin at gmail.com (Yann Chemin)
Date: Thu, 30 Jan 2014 18:38:22 +0530
Subject: [gdal-dev] a small GDAL+wxPython RS tool (wxGIPE) in github
Message-ID: <CALTpO6BxXDDb9x7JtoRYYcoDkvW_xABBctQ9ZyftA6nEGC7Z9Q@mail.gmail.com>

Hi I made this some time back, and just put it on github recently.
Might be of any use to some people.

there is a test_data directory that can be skipped from trunk check out.

screenshots:
https://github.com/YannChemin/wxGIPE/blob/master/screenshot_old.png
https://github.com/YannChemin/wxGIPE/blob/master/screenshot.png

svn check out:
svn co https://github.com/YannChemin/wxGIPE


Yann
-- 
----
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140130/067919c4/attachment.html>

From jukka.rahkonen at mmmtike.fi  Thu Jan 30 07:51:51 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 30 Jan 2014 15:51:51 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Can_gdal=5Frasterize_utilize_OGR=5FSTYLE=3F?=
Message-ID: <loom.20140130T164500-883@post.gmane.org>

Hi,

By reading the manual page and after doing some experiments I guess that the
answer is no. Is there any hidden parameter for burning lines with a wider
pen than what is the default?

-Jukka Rahkonen-


From rush at winkey.org  Thu Jan 30 09:36:53 2014
From: rush at winkey.org (Brian Case)
Date: Thu, 30 Jan 2014 09:36:53 -0800
Subject: [gdal-dev] Can gdal_rasterize utilize OGR_STYLE?
In-Reply-To: <loom.20140130T164500-883@post.gmane.org>
References: <loom.20140130T164500-883@post.gmane.org>
Message-ID: <1391103413.14221.75.camel@octopi>

Jukka

you could use mapserver to create your image. it will make use of
ogrstyle

shp2img or if that is an issue use mapserver and the wms driver in gdal

brian

On Thu, 2014-01-30 at 15:51 +0000, Jukka Rahkonen wrote:
> Hi,
> 
> By reading the manual page and after doing some experiments I guess that the
> answer is no. Is there any hidden parameter for burning lines with a wider
> pen than what is the default?
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From kyle at pobox.com  Thu Jan 30 10:18:13 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 30 Jan 2014 11:18:13 -0700
Subject: [gdal-dev] OGR changes some proj linear units, true or not?
In-Reply-To: <loom.20140130T132816-150@post.gmane.org>
References: <loom.20140130T132816-150@post.gmane.org>
Message-ID: <CAJ0mEz3ZdyXmS4-CmO-XFE8fJAXm-jKK-HCyX3JqsYYg6pO_rg@mail.gmail.com>

On Thu, Jan 30, 2014 at 5:31 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi> wrote:
> Hi,
>
> Noticed this one in QGIS issues http://hub.qgis.org/issues/9414
>
> Writer claims:
> "I just tried with a simple C++ wrapper around OSRImportFromProj4, and it
> seems OGR doesn't keep the unit for at least dm,cm,mm. It will only work for
> some units: such as km, ft, yd, us-ft, us-yd, etc."
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Jukka,

I added proj4 parsing support for all units reported by cs2cs -lu in
the trunk in r26902, and created a ticket, #5370 to track the issue.
Do you want to update the QGIS ticket, or shall I?

-- 
Kyle

From even.rouault at mines-paris.org  Thu Jan 30 11:09:04 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 30 Jan 2014 20:09:04 +0100
Subject: [gdal-dev] =?iso-8859-1?q?Motion=3A_Commit_Access_for_J=FCrgen_Fi?=
	=?iso-8859-1?q?scher?=
Message-ID: <201401302009.05064.even.rouault@mines-paris.org>

Motion: Extend GDAL/OGR commit access to J?rgen Fischer.

---

I'd like to make it easier for J?rgen (who is also a contributor to QGIS) to 
continue maintaining and improving the OGR NAS driver in which he has 
regularly worked over the last past months (years?). Up to now I used to 
commit his changes, but it would be more efficient if he could do it himself.

J?rgen, could you answer to this email to state that you have read and agreed 
to the GDAL commiter guidelines : 
http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the voting with:

+1 Even

Best regards,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Thu Jan 30 11:09:45 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 30 Jan 2014 11:09:45 -0800
Subject: [gdal-dev]
	=?iso-8859-1?q?Motion=3A_Commit_Access_for_J=FCrgen_Fi?=
	=?iso-8859-1?q?scher?=
In-Reply-To: <201401302009.05064.even.rouault@mines-paris.org>
References: <201401302009.05064.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBcdz=gw_P+xzBoQuz06PgpeJoTCm=zgGK_0jAWbteW7hw@mail.gmail.com>

+1 Frank



On Thu, Jan 30, 2014 at 11:09 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Motion: Extend GDAL/OGR commit access to J?rgen Fischer.
>
> ---
>
> I'd like to make it easier for J?rgen (who is also a contributor to QGIS)
> to
> continue maintaining and improving the OGR NAS driver in which he has
> regularly worked over the last past months (years?). Up to now I used to
> commit his changes, but it would be more efficient if he could do it
> himself.
>
> J?rgen, could you answer to this email to state that you have read and
> agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140130/53332035/attachment-0001.html>

From jef at norbit.de  Thu Jan 30 11:35:46 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 30 Jan 2014 20:35:46 +0100
Subject: [gdal-dev]
	=?iso-8859-1?q?Motion=3A_Commit_Access_for_J=FCrgen_Fi?=
	=?iso-8859-1?q?scher?=
In-Reply-To: <201401302009.05064.even.rouault@mines-paris.org>
References: <201401302009.05064.even.rouault@mines-paris.org>
Message-ID: <20140130193546.GA15209@norbit.de>

Hi,

On Thu, 30. Jan 2014 at 20:09:04 +0100, Even Rouault wrote:
> Motion: Extend GDAL/OGR commit access to J?rgen Fischer.
> 
> J?rgen, could you answer to this email to state that you have read and agreed 
> to the GDAL commiter guidelines : 
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I've read and agree to the GDAL commiter guidelines.


J?rgen


-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)      Germany                      IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From szekerest at gmail.com  Thu Jan 30 11:48:01 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 30 Jan 2014 20:48:01 +0100
Subject: [gdal-dev]
	=?utf-8?q?Motion=3A_Commit_Access_for_J=C3=BCrgen_Fisc?=
	=?utf-8?q?her?=
In-Reply-To: <201401302009.05064.even.rouault@mines-paris.org>
References: <201401302009.05064.even.rouault@mines-paris.org>
Message-ID: <CACALY+QYgMBUTRCVCGZo5nLgBEMVF-iKgYn-m8H89f=1mj7dPg@mail.gmail.com>

+1

Tamas



2014-01-30 Even Rouault <even.rouault at mines-paris.org>

> Motion: Extend GDAL/OGR commit access to J?rgen Fischer.
>
> ---
>
> I'd like to make it easier for J?rgen (who is also a contributor to QGIS)
> to
> continue maintaining and improving the OGR NAS driver in which he has
> regularly worked over the last past months (years?). Up to now I used to
> commit his changes, but it would be more efficient if he could do it
> himself.
>
> J?rgen, could you answer to this email to state that you have read and
> agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140130/760ca4be/attachment.html>

From dmorissette at mapgears.com  Thu Jan 30 12:59:05 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 30 Jan 2014 15:59:05 -0500
Subject: [gdal-dev]
 =?iso-8859-1?q?Motion=3A_Commit_Access_for_J=FCrgen_Fi?=
 =?iso-8859-1?q?scher?=
In-Reply-To: <201401302009.05064.even.rouault@mines-paris.org>
References: <201401302009.05064.even.rouault@mines-paris.org>
Message-ID: <52EABD19.3040507@mapgears.com>

+1

Daniel

On 14-01-30 2:09 PM, Even Rouault wrote:
> Motion: Extend GDAL/OGR commit access to J?rgen Fischer.
>
> ---
>
> I'd like to make it easier for J?rgen (who is also a contributor to QGIS) to
> continue maintaining and improving the OGR NAS driver in which he has
> regularly worked over the last past months (years?). Up to now I used to
> commit his changes, but it would be more efficient if he could do it himself.
>
> J?rgen, could you answer to this email to state that you have read and agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From jukka.rahkonen at mmmtike.fi  Thu Jan 30 13:15:36 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 30 Jan 2014 21:15:36 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Motion=3A_Commit_Access_for_J=C3=BCrgen_Fisc?=
	=?utf-8?q?her?=
References: <201401302009.05064.even.rouault@mines-paris.org>
Message-ID: <loom.20140130T221400-481@post.gmane.org>



Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Motion: Extend GDAL/OGR commit access to J?rgen Fischer.
> 
+1

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Thu Jan 30 13:19:29 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 30 Jan 2014 21:19:29 +0000 (UTC)
Subject: [gdal-dev] OGR changes some proj linear units, true or not?
References: <loom.20140130T132816-150@post.gmane.org>
	<CAJ0mEz3ZdyXmS4-CmO-XFE8fJAXm-jKK-HCyX3JqsYYg6pO_rg@mail.gmail.com>
Message-ID: <loom.20140130T221629-111@post.gmane.org>

Kyle Shannon <kyle <at> pobox.com> writes:


...
> 
> Jukka,
> 
> I added proj4 parsing support for all units reported by cs2cs -lu in
> the trunk in r26902, and created a ticket, #5370 to track the issue.
> Do you want to update the QGIS ticket, or shall I?

You understand better what you did so I suggest you to update the QGIS
ticket, if you don't mind.

-Jukka-





From kyle at pobox.com  Thu Jan 30 13:30:00 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 30 Jan 2014 14:30:00 -0700
Subject: [gdal-dev] OGR changes some proj linear units, true or not?
In-Reply-To: <loom.20140130T221629-111@post.gmane.org>
References: <loom.20140130T132816-150@post.gmane.org>
	<CAJ0mEz3ZdyXmS4-CmO-XFE8fJAXm-jKK-HCyX3JqsYYg6pO_rg@mail.gmail.com>
	<loom.20140130T221629-111@post.gmane.org>
Message-ID: <CAJ0mEz2-GreNenRiudz4w+vPaO_gV6qDzJu4PxWaYXTQG+PW8w@mail.gmail.com>

On Thu, Jan 30, 2014 at 2:19 PM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi> wrote:
> Kyle Shannon <kyle <at> pobox.com> writes:
>
>
> ...
>>
>> Jukka,
>>
>> I added proj4 parsing support for all units reported by cs2cs -lu in
>> the trunk in r26902, and created a ticket, #5370 to track the issue.
>> Do you want to update the QGIS ticket, or shall I?
>
> You understand better what you did so I suggest you to update the QGIS
> ticket, if you don't mind.
>
> -Jukka-
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Done, thanks.

-- 
Kyle

From peifer at gmx.eu  Fri Jan 31 00:38:46 2014
From: peifer at gmx.eu (peifer)
Date: Fri, 31 Jan 2014 00:38:46 -0800 (PST)
Subject: [gdal-dev] Axes order issue in GML file
Message-ID: <1391157526980-5101124.post@n6.nabble.com>

Hi,

ogrinfo tells me that the SRS in my GML file (0) is EPSG:4258 and that its
extent is somewhere around Belgium, see (1).

However, as the coordinates for the features (that are indeed from Belgium)
come in lon,lat (rather than lat,lon as defined by EPSG:4258): shouldn't the
extent be reported as (49.496840, 2.543250) - (51.505070, 6.408180) and the
features be (mis-)positioned somewhere near the Somalian coastline?

If I change the srsName attribute value to another representation of
EPSG:4258 (2), the mis-positioning happens, as expected.

Can someone tell me if this is a feature or rather a limitation or a bug?

Thanks in advance, Hermann

(0) http://tinyurl.com/oqpzfck

(1) ogrinfo -so -ro B_BE_2014-prelim.gml AQD_Zone

Layer name: AQD_Zone
Geometry: Multi Polygon
Feature Count: 22
Extent: (2.543250, 49.496840) - (6.408180, 51.505070)
Layer SRS WKT:
GEOGCS["ETRS89",
    DATUM["European_Terrestrial_Reference_System_1989",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6258"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4258"]]
...

(2) changes to srsName attribute value

before: <gml:MultiSurface gml:id="BEW17S"
srsName="http://www.opengis.net/gml/srs/epsg.xml#4258">
  after: <gml:MultiSurface gml:id="BEW17S"
srsName="urn:ogc:def:crs:EPSG::4258">



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Axes-order-issue-in-GML-file-tp5101124.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Jan 31 01:27:13 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 31 Jan 2014 10:27:13 +0100
Subject: [gdal-dev] Axes order issue in GML file
In-Reply-To: <1391157526980-5101124.post@n6.nabble.com>
References: <1391157526980-5101124.post@n6.nabble.com>
Message-ID: <1391160433.52eb6c7194842@imp.free.fr>

Hi,

The "CRS support" section of http://gdal.org/ogr/drv_gml.html should answer your
questions, but this is admitedly a highly confusing area.

Basically, when the GML driver sees a SRS as "EPSG:XXXX"  (old way of expression
CRS in GML, consistant with WFS 1.0) (or
"http://www.opengis.net/gml/srs/epsg.xml#XXXX" also), it assumes that the
coordinate order is GIS friendly, i.e. longitude, latitude for geographic SRS.
And in the case of your sample, this is indeed the appropriate behaviour.

If the SRS in the GML is advertized as "urn:ogc:def:crs:EPSG:XXXX" (new way,
consistant with WFS 1.1 or above), then the GML driver will expect the
coordinates to be in the order specified by EPSG, i.e. latitude, longitude for
geographic SRS, and it will do the on-the-fly swapping to expose them as
longitude, latitude to be GIS friendly.

So that's a feature. If a GML file doesn't met those expectations, the above
described behaviour can be altered with the configuration options explained in
the GML driver doc.

Even

> Hi,
>
> ogrinfo tells me that the SRS in my GML file (0) is EPSG:4258 and that its
> extent is somewhere around Belgium, see (1).
>
> However, as the coordinates for the features (that are indeed from Belgium)
> come in lon,lat (rather than lat,lon as defined by EPSG:4258): shouldn't the
> extent be reported as (49.496840, 2.543250) - (51.505070, 6.408180) and the
> features be (mis-)positioned somewhere near the Somalian coastline?
>
> If I change the srsName attribute value to another representation of
> EPSG:4258 (2), the mis-positioning happens, as expected.
>
> Can someone tell me if this is a feature or rather a limitation or a bug?
>
> Thanks in advance, Hermann
>
> (0) http://tinyurl.com/oqpzfck
>
> (1) ogrinfo -so -ro B_BE_2014-prelim.gml AQD_Zone
>
> Layer name: AQD_Zone
> Geometry: Multi Polygon
> Feature Count: 22
> Extent: (2.543250, 49.496840) - (6.408180, 51.505070)
> Layer SRS WKT:
> GEOGCS["ETRS89",
>     DATUM["European_Terrestrial_Reference_System_1989",
>         SPHEROID["GRS 1980",6378137,298.257222101,
>             AUTHORITY["EPSG","7019"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6258"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4258"]]
> ...
>
> (2) changes to srsName attribute value
>
> before: <gml:MultiSurface gml:id="BEW17S"
> srsName="http://www.opengis.net/gml/srs/epsg.xml#4258">
>   after: <gml:MultiSurface gml:id="BEW17S"
> srsName="urn:ogc:def:crs:EPSG::4258">
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Axes-order-issue-in-GML-file-tp5101124.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From yjacolin at free.fr  Fri Jan 31 00:52:51 2014
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Fri, 31 Jan 2014 09:52:51 +0100
Subject: [gdal-dev] OGR and WFS axis order
Message-ID: <347792818.ymFb82m0i6@tatras>

Hello,

I am testing ogr2ogr to read WFS services and create shapefil. WFS version 
1.0.0 is working as expected but 1.1.0 send data with y/x axis and store them 
in shapefile without taking this in account. Points are reversed in QGIS.

The OGR GML page gives some point about this and indicates two parameters:
* configuration option GML_CONSIDER_EPSG_AS_URN to YES
* configuration option GML_INVERT_AXIS_ORDER_IF_LAT_LONG to NO

Does it work with WFS format? Which kind of configuration option is it? layer 
or dataset configuration option?

I didn't find a way to manage this. Thanks for any hint!

Y.





From even.rouault at mines-paris.org  Fri Jan 31 02:38:07 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 31 Jan 2014 11:38:07 +0100
Subject: [gdal-dev] OGR and WFS axis order
In-Reply-To: <347792818.ymFb82m0i6@tatras>
References: <347792818.ymFb82m0i6@tatras>
Message-ID: <1391164687.52eb7d0fb23da@imp.free.fr>

Hi Yves,

> Hello,
>
> I am testing ogr2ogr to read WFS services and create shapefil. WFS version
> 1.0.0 is working as expected but 1.1.0 send data with y/x axis and store them
> in shapefile without taking this in account. Points are reversed in QGIS.

Hum, the GML driver should do the swapping back to x/y axis automatically, but
sometimes the content of the GML isn't consistant with the assumptions of the
GML driver (see my email from one hour ago related to that !)

>
> The OGR GML page gives some point about this and indicates two parameters:
> * configuration option GML_CONSIDER_EPSG_AS_URN to YES
> * configuration option GML_INVERT_AXIS_ORDER_IF_LAT_LONG to NO
>
> Does it work with WFS format?

Yes. Your problem might be (blind guessing !!!) a WFS server that reports the
SRS as "EPSG:XXXX" with y/x axis. In that case, setting GML_CONSIDER_EPSG_AS_URN
to YES should help.

> Which kind of configuration option is it? layer
> or dataset configuration option?

Configuration options can be passed with the "--config key value" (no equal
sign) on GDAL/OGR command line utilities. Or they can be set as key=value
environment variables.

>
> I didn't find a way to manage this. Thanks for any hint!
>
> Y.
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Fri Jan 31 05:04:58 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 31 Jan 2014 13:04:58 +0000 (UTC)
Subject: [gdal-dev] Does ogrtindex start counting layers from zero?
Message-ID: <loom.20140131T134832-301@post.gmane.org>

Hi,

Ogrtindex has an option -lnum x http://www.gdal.org/ogrtindex.html

I fear that layer numbers are count in a computer geeky way by starting from
zero and for creating a tileindex for point layer I should give the
parameter as -lnum 0 and not -lnum 1 as it is listed by ogrinfo.

C:\data>ogrinfo berlin.sqlite
INFO: Open of `berlin.sqlite'
      using driver `SQLite' successful.
1: points (Point)
2: lines (Line String)
3: polygons (Polygon)
4: multilinestrings (Multi Line String)
5: multipolygons (Multi Polygon)
6: other_relations (Geometry Collection)

By the way, I can see that this gets written for Mapserver into the
tileindex file:
LOCATION (String) = C:\data\berlin.sqlite,4

I would enjoy if I could save some key clicks and typos and do also with GDAL
"ogrinfo berlin.sqlite,4"

-Jukka Rahkonen-


From david.m.baker at chk.com  Fri Jan 31 08:15:53 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Fri, 31 Jan 2014 16:15:53 +0000
Subject: [gdal-dev] Fast Pixel Access
Message-ID: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>

Dev's,

I have a set of 55,501 bil files in a single directory.  They are DEMS data that cover the US in 7.5 minute tiles.  I would like to randomly access elevations at a given lat/lon's from the whole dataset.  I created a vrt file from the directory of bil files, and have been able to access the elevation at a given lat/lon using gdallocationinfo, but because of the size of the dataset, this operation is somewhat slow.  Can the vrt be indexed? Or, is there a faster, better way to access the pixels?  I would first like to do this with the utilities before diving into code (C#).  The files are regularly named base on their location within a 1 arc-second grid.

Thanks,
David

David M. Baker
Senior Advisor - Geoscience Technology
Chesapeake Energy Corporation
david.m.baker at chk.com<mailto:david.m.baker at chk.com>


________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140131/1d6c6153/attachment-0001.html>

From yjacolin at free.fr  Fri Jan 31 09:09:57 2014
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Fri, 31 Jan 2014 18:09:57 +0100
Subject: [gdal-dev] OGR and WFS axis order
In-Reply-To: <1391164687.52eb7d0fb23da@imp.free.fr>
References: <347792818.ymFb82m0i6@tatras>
	<1391164687.52eb7d0fb23da@imp.free.fr>
Message-ID: <2222026.ntAM56qsQ0@tatras>

Hello Even,

Le vendredi 31 janvier 2014 11:38:07 Even Rouault a ?crit :
> Hi Yves,
> 
> > Hello,
> > 
> > I am testing ogr2ogr to read WFS services and create shapefil. WFS version
> > 1.0.0 is working as expected but 1.1.0 send data with y/x axis and store
> > them in shapefile without taking this in account. Points are reversed in
> > QGIS.
> Hum, the GML driver should do the swapping back to x/y axis automatically,
> but sometimes the content of the GML isn't consistant with the assumptions
> of the GML driver (see my email from one hour ago related to that !)
I find it and read it, but I need to read it again :)
 
> > The OGR GML page gives some point about this and indicates two parameters:
> > * configuration option GML_CONSIDER_EPSG_AS_URN to YES
> > * configuration option GML_INVERT_AXIS_ORDER_IF_LAT_LONG to NO
> > 
> > Does it work with WFS format?
> 
> Yes. Your problem might be (blind guessing !!!) a WFS server that reports
> the SRS as "EPSG:XXXX" with y/x axis. In that case, setting
> GML_CONSIDER_EPSG_AS_URN to YES should help.
The WFS server is MapServer and my local test works correctly but not the 
server. I guess some difference but I don't know why or which. Does it seems 
possible to you that the EPSG database is not up tu date and can be the reason 
of this difference?

> > Which kind of configuration option is it? layer
> > or dataset configuration option?
> 
> Configuration options can be passed with the "--config key value" (no equal
> sign) on GDAL/OGR command line utilities. Or they can be set as key=value
> environment variables.

Indeed, it works much better in this way :)

Thanks,

Y.
> 
> > I didn't find a way to manage this. Thanks for any hint!
> > 
> > Y.
> > 
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Fri Jan 31 10:30:02 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 31 Jan 2014 19:30:02 +0100
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
Message-ID: <201401311930.02592.even.rouault@mines-paris.org>

Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit :
> Dev's,
> 
> I have a set of 55,501 bil files in a single directory.  They are DEMS data
> that cover the US in 7.5 minute tiles.  I would like to randomly access
> elevations at a given lat/lon's from the whole dataset.  I created a vrt
> file from the directory of bil files, and have been able to access the
> elevation at a given lat/lon using gdallocationinfo, but because of the
> size of the dataset, this operation is somewhat slow.  Can the vrt be
> indexed?

No, it isn't currently, although I think it could be improved to have a in-
memory index with moderate effort.

But are you sure the slowness is due to the lack of index ? 55,000 is a big 
number, but not that big. Maybe the slowness just comes from the opening time 
(XML parsing) of such a big VRT. That would need to be profiled to be sure 
where the bottleneck is.

> Or, is there a faster, better way to access the pixels?  I would
> first like to do this with the utilities before diving into code (C#). 
> The files are regularly named base on their location within a 1 arc-second
> grid.
> 
> Thanks,
> David
> 
> David M. Baker
> Senior Advisor - Geoscience Technology
> Chesapeake Energy Corporation
> david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> 
> 
> ________________________________
> 
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient,
> or the employee or agent responsible for delivering this message to the
> intended recipient, you are hereby notified that any dissemination,
> distribution or copying of this communication is strictly prohibited. If
> you have received this communication in error, please notify the sender
> immediately by return email and destroy all copies of the email (and
> attachments if any).

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Jan 31 10:34:31 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 31 Jan 2014 19:34:31 +0100
Subject: [gdal-dev] Does ogrtindex start counting layers from zero?
In-Reply-To: <loom.20140131T134832-301@post.gmane.org>
References: <loom.20140131T134832-301@post.gmane.org>
Message-ID: <201401311934.32002.even.rouault@mines-paris.org>

Le vendredi 31 janvier 2014 14:04:58, Jukka Rahkonen a ?crit :
> Hi,
> 
> Ogrtindex has an option -lnum x http://www.gdal.org/ogrtindex.html
> 
> I fear that layer numbers are count in a computer geeky way by starting
> from zero and for creating a tileindex for point layer I should give the
> parameter as -lnum 0 and not -lnum 1 as it is listed by ogrinfo.

Yes I confirm the numbering starts at 0. Would be nice to be explicitely 
documented.

> 
> C:\data>ogrinfo berlin.sqlite
> INFO: Open of `berlin.sqlite'
>       using driver `SQLite' successful.
> 1: points (Point)
> 2: lines (Line String)
> 3: polygons (Polygon)
> 4: multilinestrings (Multi Line String)
> 5: multipolygons (Multi Polygon)
> 6: other_relations (Geometry Collection)
> 
> By the way, I can see that this gets written for Mapserver into the
> tileindex file:
> LOCATION (String) = C:\data\berlin.sqlite,4
> 
> I would enjoy if I could save some key clicks and typos and do also with
> GDAL "ogrinfo berlin.sqlite,4"

Well, the connexion name is a black box for OGR utilities, and some of them 
already take spaces in the ir connection string.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Jan 31 10:39:09 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 31 Jan 2014 19:39:09 +0100
Subject: [gdal-dev] OGR and WFS axis order
In-Reply-To: <2222026.ntAM56qsQ0@tatras>
References: <347792818.ymFb82m0i6@tatras>
	<1391164687.52eb7d0fb23da@imp.free.fr> <2222026.ntAM56qsQ0@tatras>
Message-ID: <201401311939.09502.even.rouault@mines-paris.org>

Le vendredi 31 janvier 2014 18:09:57, Yves Jacolin (Free) a ?crit :
> Hello Even,
> 
> Le vendredi 31 janvier 2014 11:38:07 Even Rouault a ?crit :
> > Hi Yves,
> > 
> > > Hello,
> > > 
> > > I am testing ogr2ogr to read WFS services and create shapefil. WFS
> > > version 1.0.0 is working as expected but 1.1.0 send data with y/x axis
> > > and store them in shapefile without taking this in account. Points are
> > > reversed in QGIS.
> > 
> > Hum, the GML driver should do the swapping back to x/y axis
> > automatically, but sometimes the content of the GML isn't consistant
> > with the assumptions of the GML driver (see my email from one hour ago
> > related to that !)
> 
> I find it and read it, but I need to read it again :)
> 
> > > The OGR GML page gives some point about this and indicates two
> > > parameters: * configuration option GML_CONSIDER_EPSG_AS_URN to YES
> > > * configuration option GML_INVERT_AXIS_ORDER_IF_LAT_LONG to NO
> > > 
> > > Does it work with WFS format?
> > 
> > Yes. Your problem might be (blind guessing !!!) a WFS server that reports
> > the SRS as "EPSG:XXXX" with y/x axis. In that case, setting
> > GML_CONSIDER_EPSG_AS_URN to YES should help.
> 
> The WFS server is MapServer and my local test works correctly but not the
> server. I guess some difference but I don't know why or which. Does it
> seems possible to you that the EPSG database is not up tu date and can be
> the reason of this difference?

MapServer in WFS 1.1 returns lat,long order for geographic SRS and advertize 
SRS with "EPSG:XXXX" syntax, which confuses the OGR GML driver by default. 
MapServer should rather advertize "urn:ogc:def:crs:EPSG:XXXX" syntax for less 
ambiguity. This is something it does now in WFS 2.0 (in mapserver master) by 
default. And with mapserver master, you can also configure WFS 1.1 to emit 
"urn:ogc:def:crs:EPSG:XXXX" syntax by adding the "wfs_return_srs_as_urn" web
metadata item set to "true".

> 
> > > Which kind of configuration option is it? layer
> > > or dataset configuration option?
> > 
> > Configuration options can be passed with the "--config key value" (no
> > equal sign) on GDAL/OGR command line utilities. Or they can be set as
> > key=value environment variables.
> 
> Indeed, it works much better in this way :)
> 
> Thanks,
> 
> Y.
> 
> > > I didn't find a way to manage this. Thanks for any hint!
> > > 
> > > Y.
> > > 
> > > 
> > > 
> > > 
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From rush at winkey.org  Fri Jan 31 15:23:13 2014
From: rush at winkey.org (Brian Case)
Date: Fri, 31 Jan 2014 15:23:13 -0800
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <201401311930.02592.even.rouault@mines-paris.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201401311930.02592.even.rouault@mines-paris.org>
Message-ID: <1391210594.14221.97.camel@octopi>

evenr


what about the use of a tileindex? seems an intersection with a set of
polys first would be quick

brian





On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit :
> > Dev's,
> > 
> > I have a set of 55,501 bil files in a single directory.  They are DEMS data
> > that cover the US in 7.5 minute tiles.  I would like to randomly access
> > elevations at a given lat/lon's from the whole dataset.  I created a vrt
> > file from the directory of bil files, and have been able to access the
> > elevation at a given lat/lon using gdallocationinfo, but because of the
> > size of the dataset, this operation is somewhat slow.  Can the vrt be
> > indexed?
> 
> No, it isn't currently, although I think it could be improved to have a in-
> memory index with moderate effort.
> 
> But are you sure the slowness is due to the lack of index ? 55,000 is a big 
> number, but not that big. Maybe the slowness just comes from the opening time 
> (XML parsing) of such a big VRT. That would need to be profiled to be sure 
> where the bottleneck is.
> 
> > Or, is there a faster, better way to access the pixels?  I would
> > first like to do this with the utilities before diving into code (C#). 
> > The files are regularly named base on their location within a 1 arc-second
> > grid.
> > 
> > Thanks,
> > David
> > 
> > David M. Baker
> > Senior Advisor - Geoscience Technology
> > Chesapeake Energy Corporation
> > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > 
> > 
> > ________________________________
> > 
> > This email (and attachments if any) is intended only for the use of the
> > individual or entity to which it is addressed, and may contain information
> > that is confidential or privileged and exempt from disclosure under
> > applicable law. If the reader of this email is not the intended recipient,
> > or the employee or agent responsible for delivering this message to the
> > intended recipient, you are hereby notified that any dissemination,
> > distribution or copying of this communication is strictly prohibited. If
> > you have received this communication in error, please notify the sender
> > immediately by return email and destroy all copies of the email (and
> > attachments if any).
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From even.rouault at mines-paris.org  Fri Jan 31 23:27:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 1 Feb 2014 08:27:32 +0100
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <1391210594.14221.97.camel@octopi>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201401311930.02592.even.rouault@mines-paris.org>
	<1391210594.14221.97.camel@octopi>
Message-ID: <201402010827.32484.even.rouault@mines-paris.org>

Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> evenr
> 
> 
> what about the use of a tileindex?

You really mean a tileindex as produced by gdaltindex ? Well, that's not 
exactly the same beast as a VRT, but yes if it was recognized as a GDAL 
dataset then you could potentially save the cost of XML parsing. One could 
imagine that the VRT driver would accept a tileindex as an altenate connection 
string.

Anyway it would be interesting to first profile where the time is spent in David 
use case. If it's in the XML parsing, then I can't see what could be easily 
improved in that area. If it's the intersection, then there's potential for 
improvement.

> seems an intersection with a set of
> polys first would be quick


> 
> brian
> 
> On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit :
> > > Dev's,
> > > 
> > > I have a set of 55,501 bil files in a single directory.  They are DEMS
> > > data that cover the US in 7.5 minute tiles.  I would like to randomly
> > > access elevations at a given lat/lon's from the whole dataset.  I
> > > created a vrt file from the directory of bil files, and have been able
> > > to access the elevation at a given lat/lon using gdallocationinfo, but
> > > because of the size of the dataset, this operation is somewhat slow. 
> > > Can the vrt be indexed?
> > 
> > No, it isn't currently, although I think it could be improved to have a
> > in- memory index with moderate effort.
> > 
> > But are you sure the slowness is due to the lack of index ? 55,000 is a
> > big number, but not that big. Maybe the slowness just comes from the
> > opening time (XML parsing) of such a big VRT. That would need to be
> > profiled to be sure where the bottleneck is.
> > 
> > > Or, is there a faster, better way to access the pixels?  I would
> > > first like to do this with the utilities before diving into code (C#).
> > > The files are regularly named base on their location within a 1
> > > arc-second grid.
> > > 
> > > Thanks,
> > > David
> > > 
> > > David M. Baker
> > > Senior Advisor - Geoscience Technology
> > > Chesapeake Energy Corporation
> > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > > 
> > > 
> > > ________________________________
> > > 
> > > This email (and attachments if any) is intended only for the use of the
> > > individual or entity to which it is addressed, and may contain
> > > information that is confidential or privileged and exempt from
> > > disclosure under applicable law. If the reader of this email is not
> > > the intended recipient, or the employee or agent responsible for
> > > delivering this message to the intended recipient, you are hereby
> > > notified that any dissemination, distribution or copying of this
> > > communication is strictly prohibited. If you have received this
> > > communication in error, please notify the sender immediately by return
> > > email and destroy all copies of the email (and attachments if any).

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

