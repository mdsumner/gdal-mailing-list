From even.rouault at mines-paris.org  Sun Jul  1 13:51:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 1 Jul 2012 22:51:34 +0200
Subject: [gdal-dev] New capabilities in OGR VRT : OGRVRTWarpedLayer and
	OGRVRTUnionLayer
Message-ID: <201207012251.34873.even.rouault@mines-paris.org>

Hi,

FYI, I've just commited into trunk a few extensions to the OGR VRT syntax.

In addition to the existing <OGRVRTLayer>, <OGRVRTDataSource> can now accept :
- a <OGRVRTWarpedLayer> child to do on-the-fly reprojection of a base layer
- a <OGRVRTUnionLayer> to do on-the-fly concatenation of several base layers.

Examples from the updated http://gdal.org/ogr/drv_vrt.html :

"""
Example: Reprojected layer (GDAL >= 2.0.0)
The following example will return the source.shp layer reprojected to 
EPSG:4326.

<OGRVRTDataSource>
    <OGRVRTWarpedLayer>
        <OGRVRTLayer name="source">
            <SrcDataSource>source.shp</SrcDataSource>
        </OGRVRTLayer>
        <TargetSRS>EPSG:4326</TargetSRS>
    </OGRVRTWarpedLayer>
</OGRVRTDataSource>

Example: Union layer (GDAL >= 2.0.0)
The following example will return a layer that is the concatenation of 
source1.shp and source2.shp.

<OGRVRTDataSource>
    <OGRVRTUnionLayer name="unionLayer">
        <OGRVRTLayer name="source1">
            <SrcDataSource>source1.shp</SrcDataSource>
        </OGRVRTLayer>
        <OGRVRTLayer name="source2">
            <SrcDataSource>source2.shp</SrcDataSource>
        </OGRVRTLayer>
    </OGRVRTUnionLayer>
</OGRVRTDataSource>
"""


The unioning capability can also be used in OGR SQL, for example :
"SELECT * FROM first_layer UNION ALL SELECT * FROM second_layer"

Best regards,

Even

From AWilliams at rapidmap.com.au  Sun Jul  1 19:16:50 2012
From: AWilliams at rapidmap.com.au (Andrew Williams)
Date: Mon, 2 Jul 2012 12:16:50 +1000
Subject: [gdal-dev] Problem with gdal_translate and specific ECW file
Message-ID: <29C3A52E0876C94C97BD6443FA96F73301E46B4CABE6@rms03.rapidmap.local>

Folks,
I have an ECW which was supplied as a set of 4 from the same supplier.

As part of a process to make the image usable with a legacy system I create a series of tiles from the ECW as GTIFF.

I have done this successfully many times.

3 of the 4 images processed without issue.

One however causes gdal_translate to crash completely.

Gdalinfo returns the following

Driver: ECW/ERMapper Compressed Wavelets
Files: C:\Current Projects\image.ecw
Size is 330000, 170000
Coordinate System is:
PROJCS["MGA55",
    GEOGCS["GEOCENTRIC DATUM of AUSTRALIA",
        DATUM["GDA94",
            SPHEROID["GRS80",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",147],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["Meter",1]]
Origin = (285999.999998596960000,5812000.000001333700000)
Pixel Size = (0.100000000000000,-0.100000000000000)
Corner Coordinates:
Upper Left  (  286000.000, 5812000.000) (144d34'7.92"E, 37d48'51.61"S)
Lower Left  (  286000.000, 5795000.000) (144d33'49.77"E, 37d58'2.71"S)
Upper Right (  319000.000, 5812000.000) (144d56'36.67"E, 37d49'17.31"S)
Lower Right (  319000.000, 5795000.000) (144d56'21.31"E, 37d58'28.55"S)
Center      (  302500.000, 5803500.000) (144d45'13.88"E, 37d53'40.58"S)
Band 1 Block=330000x1 Type=Byte, ColorInterp=Red
  Overviews: arbitrary
Band 2 Block=330000x1 Type=Byte, ColorInterp=Green
  Overviews: arbitrary
Band 3 Block=330000x1 Type=Byte, ColorInterp=Blue
  Overviews: arbitrary

This is an example of the gdal_translate command line run from FWTOOLS Shell

gdal_translate -of GTIFF -projwin 286000 5796000 287000 5795000 "C:\Current Projects\image.ecw" "C:\Current Projects\image1.TIF"

Running this process begins and gets this far

Input file size is 330000, 170000
Computed -srcwin 0 160000 10000 10000 from projected window.
0

I have tried other -proj windows in the set, all crash.

Bear in mind the same command line pattern was used for three other images successfully.

I have tried two different PCs with the same result.

I suspect the image itself but not sure what it might be.

The image is quite large (4.7Gb) so sending it to someone for analysis will be difficult.

Any advice appreciated.

Andrew

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120702/02248718/attachment.html>

From AWilliams at rapidmap.com.au  Sun Jul  1 20:15:25 2012
From: AWilliams at rapidmap.com.au (Andrew Williams)
Date: Mon, 2 Jul 2012 13:15:25 +1000
Subject: [gdal-dev] Problem with gdal_translate and specific ECW file
	[SEC=UNCLASSIFIED]
In-Reply-To: <08A7084C05C8C94A9EA11656A36D3EE10B9E327A@PVAC01EXMX01.internal.govt>
References: <29C3A52E0876C94C97BD6443FA96F73301E46B4CABE6@rms03.rapidmap.local>
	<08A7084C05C8C94A9EA11656A36D3EE10B9E327A@PVAC01EXMX01.internal.govt>
Message-ID: <29C3A52E0876C94C97BD6443FA96F73301E46B4CABEF@rms03.rapidmap.local>

Got it in one Luke.

Thanks mate.

From: Pinner, Luke [mailto:Luke.Pinner at environment.gov.au]
Sent: Monday, 2 July 2012 12:52 PM
To: Andrew Williams
Subject: RE: Problem with gdal_translate and specific ECW file [SEC=UNCLASSIFIED]

I've had trouble with the old ECW 3.3 (from 2006) library that is included in FWTOOLS before.  FWTOOLS itself is pretty old (last release 2010, can't remember what GDAL version). OSGEO4W is usually now recommended for a "batteries included" GDAL install on Windows.

http://trac.osgeo.org/osgeo4w

OSGEO4W includes the ECW plugin but because of the slightly more onerous licensing of the latest ERDAS ECW/JP2 SDK (v. 4.2), you need to download the SDK from ERDAS yourself and copy the dlls into your OSGEOW installation:

http://trac.osgeo.org/osgeo4w/wiki/pkg-gdal-ecw

Regards,
Luke Pinner

From: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [mailto:gdal-dev-bounces at lists.osgeo.org]<mailto:[mailto:gdal-dev-bounces at lists.osgeo.org]> On Behalf Of Andrew Williams
Sent: Monday, 2 July 2012 12:17 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Problem with gdal_translate and specific ECW file

Folks,
I have an ECW which was supplied as a set of 4 from the same supplier.

As part of a process to make the image usable with a legacy system I create a series of tiles from the ECW as GTIFF.

I have done this successfully many times.

3 of the 4 images processed without issue.

One however causes gdal_translate to crash completely.

Gdalinfo returns the following

Driver: ECW/ERMapper Compressed Wavelets
Files: C:\Current Projects\image.ecw
Size is 330000, 170000
Coordinate System is:
PROJCS["MGA55",
    GEOGCS["GEOCENTRIC DATUM of AUSTRALIA",
        DATUM["GDA94",
            SPHEROID["GRS80",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",147],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["Meter",1]]
Origin = (285999.999998596960000,5812000.000001333700000)
Pixel Size = (0.100000000000000,-0.100000000000000)
Corner Coordinates:
Upper Left  (  286000.000, 5812000.000) (144d34'7.92"E, 37d48'51.61"S)
Lower Left  (  286000.000, 5795000.000) (144d33'49.77"E, 37d58'2.71"S)
Upper Right (  319000.000, 5812000.000) (144d56'36.67"E, 37d49'17.31"S)
Lower Right (  319000.000, 5795000.000) (144d56'21.31"E, 37d58'28.55"S)
Center      (  302500.000, 5803500.000) (144d45'13.88"E, 37d53'40.58"S)
Band 1 Block=330000x1 Type=Byte, ColorInterp=Red
  Overviews: arbitrary
Band 2 Block=330000x1 Type=Byte, ColorInterp=Green
  Overviews: arbitrary
Band 3 Block=330000x1 Type=Byte, ColorInterp=Blue
  Overviews: arbitrary

This is an example of the gdal_translate command line run from FWTOOLS Shell

gdal_translate -of GTIFF -projwin 286000 5796000 287000 5795000 "C:\Current Projects\image.ecw" "C:\Current Projects\image1.TIF"

Running this process begins and gets this far

Input file size is 330000, 170000
Computed -srcwin 0 160000 10000 10000 from projected window.
0

I have tried other -proj windows in the set, all crash.

Bear in mind the same command line pattern was used for three other images successfully.

I have tried two different PCs with the same result.

I suspect the image itself but not sure what it might be.

The image is quite large (4.7Gb) so sending it to someone for analysis will be difficult.

Any advice appreciated.

Andrew


If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. Please consider the environment before printing this email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120702/b4d0d2c5/attachment-0001.html>

From yehil at rafael.co.il  Mon Jul  2 03:42:37 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon, 2 Jul 2012 13:42:37 +0300
Subject: [gdal-dev] Creating jpeg compressed tiff with alpha
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B84@MAILBOXSERVER.rf.local>



Hi
I'm having problems creating a jpeg compressed tif with ARGB pixel format with gdal_translate.
I tried the command
gdal_translate pngWithAlpha.png 3.tif -b 1 -b 2 -b 3 -mask 4 -co alpha=yes -co COMPRESS=JPEG  --config GDAL_TIFF_INTERNAL_MASK YES

as it appears in the gdal_translate documentation, but the image I'm getting doesn't have an alpha channel.
c:\Users\Atlas\Pictures>gdalinfo 3.tif
Driver: GTiff/GeoTIFF
Files: 3.tif
Size is 480, 360
Coordinate System is `'
Image Structure Metadata:
  COMPRESSION=JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  360.0)
Upper Right (  480.0,    0.0)
Lower Right (  480.0,  360.0)
Center      (  240.0,  180.0)
Band 1 Block=480x16 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET
Band 2 Block=480x16 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET
Band 3 Block=480x16 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET

I also tried without the -mask option, in which case I get errors:
ERROR 1: JPEGLib:Bogus input colorspace
ERROR 1: WriteEncodedTile/Strip() failed.

I'm using gdal 1.9.1 x64 on windows 7 64 bit.

Is there another way to do this, or is it a known limitation of the tiff driver?

Thanks
Yehiyam

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120702/ea0c4c4c/attachment.html>

From even.rouault at mines-paris.org  Mon Jul  2 03:56:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 02 Jul 2012 12:56:45 +0200
Subject: [gdal-dev] Creating jpeg compressed tiff with alpha
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B84@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B84@MAILBOXSERVER.rf.local>
Message-ID: <1341226605.4ff17e6dede25@imp.free.fr>

Yehiyam,

Your command worked fine. It is just that your expectations are wrong. It will
produce a mask band, and not a alpha band. This is indicated by the following
line in the gdalinfo report :

>   Mask Flags: PER_DATASET

(a mask band that is common to all the regular bands of the dataset)

Mask bands can be obtained with GDALGetMaskBand(). But admitedly, I guess that
few software packages are able to deal with them. For example, recent versions
of MapServer will try using mask band if no alpha band is found.

Best regards,

Even

From yehil at rafael.co.il  Mon Jul  2 04:01:41 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon, 2 Jul 2012 14:01:41 +0300
Subject: [gdal-dev] Creating jpeg compressed tiff with alpha
In-Reply-To: <1341226605.4ff17e6dede25@imp.free.fr>
References: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B84@MAILBOXSERVER.rf.local>,
	<1341226605.4ff17e6dede25@imp.free.fr>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B85@MAILBOXSERVER.rf.local>

Even
Thanks for your quick reply.
Converting the same image with global mapper gives me different results:

Driver: GTiff/GeoTIFF
Files: C:\Users\Atlas\Pictures\2.tif
Size is 480, 360
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223560493,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["arc-second",4.848136811095361e-006],
    AUTHORITY["EPSG","4326"]]
Origin = (0.000000000000000,360.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (       0.000,     360.000) (  0d 0' 0.01"E,360d 0' 0.00"N)
Lower Left  (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Upper Right (     480.000,     360.000) (Invalid angle,360d 0' 0.00"N)
Lower Right (     480.000,       0.000) (Invalid angle,  0d 0' 0.01"N)
Center      (     240.000,     180.000) (240d 0' 0.00"E,180d 0' 0.00"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
Press any key to continue . . .

Is there a way to get the same result with gdal? I see that the mask flag is different (PER_DATASET ALPHA)

Thanks
Yehiyam
________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: Monday, July 02, 2012 1:56 PM
To: Livneh Yehiyam
Cc: gdal-dev  (gdal-dev at lists.osgeo.org)
Subject: Re: [gdal-dev] Creating jpeg compressed tiff with alpha

Yehiyam,

Your command worked fine. It is just that your expectations are wrong. It will
produce a mask band, and not a alpha band. This is indicated by the following
line in the gdalinfo report :

><table align='center'><tr><td></td></tr></table>   Mask Flags: PER_DATASET

(a mask band that is common to all the regular bands of the dataset)

Mask bands can be obtained with GDALGetMaskBand(). But admitedly, I guess that
few software packages are able to deal with them. For example, recent versions
of MapServer will try using mask band if no alpha band is found.

Best regards,

Even
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************


From even.rouault at mines-paris.org  Mon Jul  2 04:44:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 02 Jul 2012 13:44:39 +0200
Subject: [gdal-dev] Creating jpeg compressed tiff with alpha
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B85@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B84@MAILBOXSERVER.rf.local>,
	<1341226605.4ff17e6dede25@imp.free.fr>
	<C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B85@MAILBOXSERVER.rf.local>
Message-ID: <1341229479.4ff189a76a9c7@imp.free.fr>

Selon Livneh Yehiyam <yehil at rafael.co.il>:

I've always thought that JPEG compression couldn't deal with RGBA, but it turns
out that I was wrong. I've managed to produce such files (or similar ones) with
2 different approaches :

gdal_translate some_rgba.png out.tif -co COMPRESS=JPEG -co
PHOTOMETRIC=MINISBLACK

--> produces a PIXEL-interleaved JPEG-compressed, but reports grey, undefined,
undefined, undefined color interpretation

gdal_translate some_rgba.png out2.tif -co COMPRESS=JPEG -co PHOTOMETRIC=RGB -co
ALPHA=YES -co INTERLEAVE=BAND

--> produces a BAND-interleaved JPEG-compressed with R,G,B,A color
interpretation

But no way to produce a PIXEL-interleaved JPEG-compressed with R,G,B,A like the
one you quote below. So I'm not sure what trick GlobalMapper used to produce
such an image. Could you share it for closer analysis of its content ? Does
gdal_translate from this image to an uncompressed one give a result that is
visually OK ?

One drawback that I can see to use JPEG compression for the alpha band is that
at the border between transparent and opaque zones, you might have artifacts due
to the JPEG compression, which is annoying for an alpha channel. Mask bands have
the advantage to be compressed with a non-lossy compression scheme, regardless
of the compression scheme used for the other bands. And when using mask band to
transport transparency alpha, you could still use YCbCr color space for the JPEG
compression of the RGB band, which, thanks to its 2:1:1 resampling, will lead to
smaller file size. (YCbCr cannot be used if you provide the 4 RGBA bands to the
JPEG compressor : you need to separate the RGB content from the A content).

> Even
> Thanks for your quick reply.
> Converting the same image with global mapper gives me different results:
>
> Driver: GTiff/GeoTIFF
> Files: C:\Users\Atlas\Pictures\2.tif
> Size is 480, 360
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223560493,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["arc-second",4.848136811095361e-006],
>     AUTHORITY["EPSG","4326"]]
> Origin = (0.000000000000000,360.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=JPEG
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (       0.000,     360.000) (  0d 0' 0.01"E,360d 0' 0.00"N)
> Lower Left  (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Upper Right (     480.000,     360.000) (Invalid angle,360d 0' 0.00"N)
> Lower Right (     480.000,       0.000) (Invalid angle,  0d 0' 0.01"N)
> Center      (     240.000,     180.000) (240d 0' 0.00"E,180d 0' 0.00"N)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
> Press any key to continue . . .
>
> Is there a way to get the same result with gdal? I see that the mask flag is
> different (PER_DATASET ALPHA)
>

From jukka.rahkonen at mmmtike.fi  Mon Jul  2 06:28:54 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 2 Jul 2012 13:28:54 +0000 (UTC)
Subject: [gdal-dev] Scale dependent VRT for overviews
References: <loom.20120510T223139-789@post.gmane.org>
	<loom.20120514T095618-243@post.gmane.org>
	<201205152253.57596.even.rouault@mines-paris.org>
Message-ID: <loom.20120702T150714-141@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Jukka,
> 
> I think you could achieve what you want by adding a <Overview> element (see 
> http://www.gdal.org/gdal_vrttut.html ) inside the <VRTRasterBand> element. The 
> dataset pointed by the <SourceFilename> in <Overview> can be a .vrt.
> 
> So, schematically, you would have something like 100_percent.vrt :
> 
> <VRTDataset>
>    <VRTRasterBand>
>        <Overview>
>            <SourceFilename relativeToVRT="1">50_percent.vrt</SourceFilename>
>            <SourceBand>1</SourceBand>
>        </Overview>
>    </VRTRasterBand>
> </VRTDataset>
> 
> and in 50_percent.vrt :
> 
> <VRTDataset>
>    <VRTRasterBand>
>        <Overview>
>            <SourceFilename relativeToVRT="1">25_percent.vrt</SourceFilename>
>            <SourceBand>1</SourceBand>
>        </Overview>
>    </VRTRasterBand>
> </VRTDataset>

I finally tried how it goes with VRT overviews.  The result is rather well
usable with QGis. The VRT file containing an overview chain opens a bit slow but
once it is open it works totally transparently for the user. I had luck in my
trial because all my images do not have same extents which relealed one trouble.
Finland gets squeezed when zoomed far out because two images with smallest
scales are wider than the others.  For preventing wrong scaling I guess I should
clip all overview images to suit the extents of the primary VRT. Anyway, I
consider that this kind of system could be useful sometimes.

Test set is downloadable from
http://latuviitta.org/documents/GDAL_Scale_dependent_VRT_test.zip

Archive contains 5 original tiffs, each with a different pixel size and
rendering styles, and corresponding .VRT files.  Unzip and open the "t0320.vrt"
file with QGis and that's all.  QGis and user believes it is just one map even
all five originals are used one by one depending on the scale.

The native SRID is EPSG:3067.

-Jukka Rahkonen-






From kedardeshpande87 at gmail.com  Mon Jul  2 07:56:21 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Mon, 2 Jul 2012 07:56:21 -0700 (PDT)
Subject: [gdal-dev] UnsatisfiedLinkError: building with Swig Java bindings
Message-ID: <1341240981601-4985371.post@n6.nabble.com>

Hi,

I am trying to build from source with Java bindings. I compiled the regular
source with configure, make and make install first and then ran the GNUmake
file from the gdal/swig/java directory. Now, I have created a small cmdline
application in Java and I am trying to run it. It gets compiled. But when I
run it, I am getting this UnsatisfiedLinkError :

java.lang.UnsatisfiedLinkError: .../gdal/build/.libs/libgdal.so.1: undefined
symbol: _ZTVN6PCIDSK15PCIDSKExceptionE

Is there something I am missing here?

I have put gdal.jar in classpath and these files in java.library.path :
libgdaljni.so, libosrjni.so, linogrjni.so, libgdalconstjni.so, libgdal.so
Is there something more that I need to put in classpath or java library path
or set any environment variable?

Can you please provide me a full list of jars/files/env-variables that I
need to set to make it run ?

Thanks,
Kedar

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/UnsatisfiedLinkError-building-with-Swig-Java-bindings-tp4985371.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Mon Jul  2 14:28:03 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 2 Jul 2012 23:28:03 +0200
Subject: [gdal-dev] Creating jpeg compressed tiff with alpha
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B87@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B84@MAILBOXSERVER.rf.local>
	<1341229479.4ff189a76a9c7@imp.free.fr>
	<C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B87@MAILBOXSERVER.rf.local>
Message-ID: <201207022328.03721.even.rouault@mines-paris.org>

Le lundi 02 juillet 2012 15:10:16, Livneh Yehiyam a ?crit :
> Even
> Attached is the output of GlobalMapper
> 
> Thanks for your suggesion on using the mask band. We can use it internally,
> as we use gdal to reat the rasters, but some of our custumers require that
> they can open the files with GlobalMapper, which doesn't seem to support
> such an option.

See http://trac.osgeo.org/gdal/ticket/4732 for a patch to libtiff to support 
creating RGBA pixel-interleaved JPEG-compressed TIFF

> 
> Yehiyam

From even.rouault at mines-paris.org  Mon Jul  2 15:19:54 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 3 Jul 2012 00:19:54 +0200
Subject: [gdal-dev] GDAL alpha channels
In-Reply-To: <201205302026.q4UKQIeN019700@tux.cubewerx.com>
References: <201205302026.q4UKQIeN019700@tux.cubewerx.com>
Message-ID: <201207030019.55024.even.rouault@mines-paris.org>

Le mercredi 30 mai 2012 22:26:18, Craig Bruce a ?crit :
> Even Rouault <even.rouault at mines-paris.org> wrote:
> > There will be likely a compatibility problem if we do this, because
> > GDAL up to now writes TIFF RGBA images with EXTRASAMPLE_ASSOCALPHA
> > (pre-multiplied), but I think in most cases the data that people have
> > feed in the GTiff driver was not pre-multiplied. So if we un-premultiply
> > this would cause issues in case the alpha value is not 0 or 255.
> 
> You only need to deal with altering the raw data on reading if the GTiff
> driver were changed to always write unassociated alphas.  Also, if people
> have been writing non-pre-multipled samples to associated-alpha files in
> the existing interface, then the TIFF data is damaged in any case.
> 
> > The temporary conclusion of that is that there are likely images in
> > the wild where the value of the flag does not reflect the reality
> > of the imagery values... But, GDAL should likely be fixed to set
> > EXTRASAMPLE_UNASSALPHA to better reflect the way it is generally used
> > (presumably).
> 
> There's not much you can do about damaged images in the wild.  However,
> we can try to prevent more from being created.

This is just what I've done in trunk. See 
http://trac.osgeo.org/gdal/ticket/4733 for the details.

Best regards,

Even

From cryan at csse.com.au  Tue Jul  3 00:34:35 2012
From: cryan at csse.com.au (Fodder)
Date: Tue, 3 Jul 2012 00:34:35 -0700 (PDT)
Subject: [gdal-dev] Creating a .TAB for an ASCII Grid in MapInfo
Message-ID: <1341300875402-4985541.post@n6.nabble.com>

Hi Guys,

Hopefully a simple one. I'm trying to create a tab file to support an ASC
ASCII Grid file with the projection coming from a mid/mif. Can anyone tell
me the ogr2ogr or gdal commands to achieve this?

The tab is reasonably simple text file so I could probably hack it with the
mid/mif headers but I'd prefer to do it the right way!!!

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Creating-a-TAB-for-an-ASCII-Grid-in-MapInfo-tp4985541.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From padilla.marc at gmail.com  Tue Jul  3 09:20:43 2012
From: padilla.marc at gmail.com (Marc Padilla Parellada)
Date: Tue, 3 Jul 2012 18:20:43 +0200
Subject: [gdal-dev] Read image from zip with python and GDAL
Message-ID: <CAGFDCBQMiVLq_J68FS=UxD4vvgudZDTt=-KJZUMbtF0nq4EhaQ@mail.gmail.com>

Hello,


I would like to read raster files stored within a zip file with python and
GDAL. Something like this:


data=gdal.Open(?file.zip/image.tif?)


I have many zipped images stored in an external hard disk with slow
transfer connection; hence I would like to read them without unzipping.


I would be very grateful if you could give me some clues on that.


Thanks,


Marc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120703/00e95a0d/attachment.html>

From even.rouault at mines-paris.org  Tue Jul  3 09:23:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 03 Jul 2012 18:23:38 +0200
Subject: [gdal-dev] Read image from zip with python and GDAL
In-Reply-To: <CAGFDCBQMiVLq_J68FS=UxD4vvgudZDTt=-KJZUMbtF0nq4EhaQ@mail.gmail.com>
References: <CAGFDCBQMiVLq_J68FS=UxD4vvgudZDTt=-KJZUMbtF0nq4EhaQ@mail.gmail.com>
Message-ID: <1341332618.4ff31c8a8b288@imp.free.fr>

Selon Marc Padilla Parellada <padilla.marc at gmail.com>:

> Hello,
>
>
> I would like to read raster files stored within a zip file with python and
> GDAL. Something like this:
>
>

Try this instead :

data=gdal.Open("/vsizip/file.zip/image.tif")

See http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip

From anton.korosov at nersc.no  Tue Jul  3 10:00:25 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Tue, 03 Jul 2012 19:00:25 +0200
Subject: [gdal-dev] Read image from zip with python and GDAL
In-Reply-To: <1341332618.4ff31c8a8b288@imp.free.fr>
Message-ID: <20120703170025.c6f54062@mail.nersc.no>

Dear Even,
thank you very much for the info. I'm imressed by the gdal once again!

Though I have a problem with LANDSAT tar.gz:

fram:raw>tar -tf LT52280012006208KIS00.tar.gz
L5228001_00120060727_B10.TIF
L5228001_00120060727_B20.TIF
L5228001_00120060727_B30.TIF

fram:raw>gdalinfo /vsigzip/LT52280012006208KIS00.tar.gz/L5228001_00120060727_B10.TIF
ERROR 4: `/vsigzip/LT52280012006208KIS00.tar.gz/L5228001_00120060727_B10.TIF' does not exist in the file system, and is not recognised as a supported dataset name.
gdalinfo failed - unable to open '/vsigzip/LT52280012006208KIS00.tar.gz/L5228001_00120060727_B10.TIF'.

fram:~>gdalinfo --version
GDAL 1.9.0, released 2011/12/29

Why can that happen?
Thank you!

Anton

----- Original Message -----
From: Even Rouault
[mailto:even.rouault at mines-paris.org]
To: Marc Padilla Parellada
[mailto:padilla.marc at gmail.com]
Cc: gdal-dev at lists.osgeo.org
Sent: Tue, 03
Jul 2012 18:23:38 +0100
Subject: Re: [gdal-dev] Read image from zip with
python and GDAL


> Selon Marc Padilla Parellada <padilla.marc at gmail.com>:
> 
> > Hello,
> >
> >
> > I would like to read raster files stored within a zip file with python and
> > GDAL. Something like this:
> >
> >
> 
> Try this instead :
> 
> data=gdal.Open("/vsizip/file.zip/image.tif")
> 
> See http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From etourigny.dev at gmail.com  Tue Jul  3 10:10:29 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 3 Jul 2012 14:10:29 -0300
Subject: [gdal-dev] Read image from zip with python and GDAL
In-Reply-To: <20120703170025.c6f54062@mail.nersc.no>
References: <1341332618.4ff31c8a8b288@imp.free.fr>
	<20120703170025.c6f54062@mail.nersc.no>
Message-ID: <CA+TxYvO7zz2i-9a6mdro+jCCj0nDfRemZNrYtjC7jgjHaphUfw@mail.gmail.com>

you have to use /vsitar and not /vsigzip - because it is a tar file

On Tue, Jul 3, 2012 at 2:00 PM, Anton Korosov <anton.korosov at nersc.no> wrote:
> Dear Even,
> thank you very much for the info. I'm imressed by the gdal once again!
>
> Though I have a problem with LANDSAT tar.gz:
>
> fram:raw>tar -tf LT52280012006208KIS00.tar.gz
> L5228001_00120060727_B10.TIF
> L5228001_00120060727_B20.TIF
> L5228001_00120060727_B30.TIF
>
> fram:raw>gdalinfo /vsigzip/LT52280012006208KIS00.tar.gz/L5228001_00120060727_B10.TIF
> ERROR 4: `/vsigzip/LT52280012006208KIS00.tar.gz/L5228001_00120060727_B10.TIF' does not exist in the file system, and is not recognised as a supported dataset name.
> gdalinfo failed - unable to open '/vsigzip/LT52280012006208KIS00.tar.gz/L5228001_00120060727_B10.TIF'.
>
> fram:~>gdalinfo --version
> GDAL 1.9.0, released 2011/12/29
>
> Why can that happen?
> Thank you!
>
> Anton
>
> ----- Original Message -----
> From: Even Rouault
> [mailto:even.rouault at mines-paris.org]
> To: Marc Padilla Parellada
> [mailto:padilla.marc at gmail.com]
> Cc: gdal-dev at lists.osgeo.org
> Sent: Tue, 03
> Jul 2012 18:23:38 +0100
> Subject: Re: [gdal-dev] Read image from zip with
> python and GDAL
>
>
>> Selon Marc Padilla Parellada <padilla.marc at gmail.com>:
>>
>> > Hello,
>> >
>> >
>> > I would like to read raster files stored within a zip file with python and
>> > GDAL. Something like this:
>> >
>> >
>>
>> Try this instead :
>>
>> data=gdal.Open("/vsizip/file.zip/image.tif")
>>
>> See http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From anakintang at gmail.com  Tue Jul  3 15:04:31 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Tue, 3 Jul 2012 15:04:31 -0700
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
Message-ID: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>

Hi,

I am using OGR/GDAL to read GML/GeoRSS/GeoJSON from either local file or
url, the sample code is like below
...
inputDriver = ogr.GetDriverByName(inputDriverType)
inputDataSource = inputDriver.Open(inputDataPath, 0);
...

It seems that I can pass in the GeoJSON string directly like:

inputDataSource = inputDriver.Open("
{'type':'FeatureCollection','features':[{'type':'Feature','id':'OpenLayers.Feature.Vector_3449','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-109.3449,63.6328125],[-112.5,35.5078125],[-85.078125,34.8046875],[-68.90625,39.7265625],[-68.203125,67.1484375],[-109.6875,63.6328125]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}},{'type':'Feature','id':'OpenLayers.Feature.Vector_07050618','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-40.78125,65.0390625],[-40.078125,34.8046875],[-12.3449,25.6640625],[21.09375,17.2265625],[22.5,58.0078125],[-40.78125,65.0390625]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}}]}",
0);

But it doesn't seem to work with GML or GeoRSS, did I miss anything? So
basically how can I read GML/GeoRSS directly from an XML string?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120703/020b2a56/attachment.html>

From chaitanya.ch at gmail.com  Tue Jul  3 20:18:47 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 4 Jul 2012 08:48:47 +0530
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
In-Reply-To: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
References: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
Message-ID: <CAMKgpOb+Nm=37RgPeaVHcBLUnU4S_CyMfaaJap6jF+yHDwFDzg@mail.gmail.com>

Yingqi,

Though the GeoJSON driver allows for reading the data directly, it is more
like an exception. For consistent behavior between formats, you need to
read the data from a data source like a file or url.

You can create a temporary in-memory file of your data using the method

gdal.FileFromMemBuffer()

Example at http://www.gdal.org/ogr/drv_georss.html

There are also a few methods to import/export just the geometries. You can
import GML and WKT [1] and export to GML, KML and JSON[2].

[1]: http://www.gdal.org/ogr/classOGRGeometryFactory.html
[2]: http://www.gdal.org/ogr/classOGRGeometry.html

On Wed, Jul 4, 2012 at 3:34 AM, Yingqi Tang <anakintang at gmail.com> wrote:

> Hi,
>
> I am using OGR/GDAL to read GML/GeoRSS/GeoJSON from either local file or
> url, the sample code is like below
> ...
> inputDriver = ogr.GetDriverByName(inputDriverType)
> inputDataSource = inputDriver.Open(inputDataPath, 0);
> ...
>
> It seems that I can pass in the GeoJSON string directly like:
>
> inputDataSource = inputDriver.Open("
>
> {'type':'FeatureCollection','features':[{'type':'Feature','id':'OpenLayers.Feature.Vector_3449','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-109.3449,
> 63.6328125
> ],[-112.5,35.5078125],[-85.078125,34.8046875],[-68.90625,39.7265625],[-68.203125,
> 67.1484375],[-109.6875,63.6328125
> ]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}},{'type':'Feature','id':'OpenLayers.Feature.Vector_07050618','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-40.78125,
> 65.0390625
> ],[-40.078125,34.8046875],[-12.3449,25.6640625],[21.09375,17.2265625],[22.5,58.0078125],[-40.78125,
> 65.0390625]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}}]}",
> 0);
>
> But it doesn't seem to work with GML or GeoRSS, did I miss anything? So
> basically how can I read GML/GeoRSS directly from an XML string?
>
> Thanks
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120704/79a2c443/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Jul  4 10:27:40 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 4 Jul 2012 17:27:40 +0000 (UTC)
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
Message-ID: <loom.20120704T191141-530@post.gmane.org>

Hi,

I feel that gdaladdo is not working optimally with any bigger rasterlite tables.
For example for my 153600x249600 pixel sized test image the initial write into
rasterlite took 3 hours and 10 minutes while adding overviews with gdaladdo took
10 hours. Gdaladdo seems to use remarkable much time every time it has finished
with creating one overview layer. In addition, the creation of the last overview
layers does not feel as much faster than I would have guessed keeping in mind
that the number of tiles to write goes 3/4 down at each step.

I put my test image available for testing
http://latuviitta.org/documents/t80.tif (550 MB, deflate compressed tiff)
I will keep it on a server for a week or so. 

Commands I used were:
gdal_translate -of rasterlite -co driver=png t80.tif t80.sqlite
gdaladdo rasterlite:t80.sqlite,table=t80
 2 4 8 16 32 64 128 256 512 1024

I tried to compare times with Rasterlite utilites rasterlite_load and
raster_pyramid but they both failed totally with my test image.

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Wed Jul  4 14:39:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 4 Jul 2012 23:39:42 +0200
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
In-Reply-To: <loom.20120704T191141-530@post.gmane.org>
References: <loom.20120704T191141-530@post.gmane.org>
Message-ID: <201207042339.43067.even.rouault@mines-paris.org>

Le mercredi 04 juillet 2012 19:27:40, Jukka Rahkonen a ?crit :
> Hi,
> 
> I feel that gdaladdo is not working optimally with any bigger rasterlite
> tables. For example for my 153600x249600 pixel sized test image the
> initial write into rasterlite took 3 hours and 10 minutes while adding
> overviews with gdaladdo took 10 hours.

I tried a bit the gdal_translate part, but didn't have the patience to wait 
for it to complete (~ 1 hour on my PC). A sysprof profile shows that most of 
the CPU time ( ~ 75% ) is spent in zlib and libpng, which isn't surprising. 
I've tried to use tiles in geotiff with deflate compression, and it seems around 
twice faster, so png has a non neglectable overhead over plain zlib 
compression. But png seems to be smaller too.

> Gdaladdo seems to use remarkable
> much time every time it has finished with creating one overview layer.

Yes, this is expected. Each overview layer is wrapped into a BEGIN / COMMIT 
transaction, so the commit at the end will take some time. Without that, I 
think things would be globally slower. 

> In
> addition, the creation of the last overview layers does not feel as much
> faster than I would have guessed keeping in mind that the number of tiles
> to write goes 3/4 down at each step.

As far as the perceived slowness on the last overview layer, reviewing the 
code, I don't see any obvious hint that would explain that. I tried on a much 
smaller dataset, and I could see that building overview level (n+1) uses as 
expected results from level n. So there's something more subtle. Once the 
overviews are built, is the reading performance of the overviews OK ? I'm 
wondering if there are not some indexes that should be added on the metadata 
table, perhaps on pixel_x_size and pixel_y_size, to speed-up tile retrieval.

More generally, the rasterlite overview building does not use the generic 
overview code, but uses RasterIO() decimation. Not sure if this affects notably 
performance.

> 
> I put my test image available for testing
> http://latuviitta.org/documents/t80.tif (550 MB, deflate compressed tiff)
> I will keep it on a server for a week or so.
> 
> Commands I used were:
> gdal_translate -of rasterlite -co driver=png t80.tif t80.sqlite
> gdaladdo rasterlite:t80.sqlite,table=t80
>  2 4 8 16 32 64 128 256 512 1024
> 
> I tried to compare times with Rasterlite utilites rasterlite_load and
> raster_pyramid but they both failed totally with my test image.
> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Jukka.Rahkonen at mmmtike.fi  Thu Jul  5 05:32:14 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Thu, 5 Jul 2012 12:32:14 +0000
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
In-Reply-To: <201207042339.43067.even.rouault@mines-paris.org>
References: <loom.20120704T191141-530@post.gmane.org>,
	<201207042339.43067.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345B284@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Le mercredi 04 juillet 2012 19:27:40, Jukka Rahkonen a ?crit :
>> Hi,
>>
>> I feel that gdaladdo is not working optimally with any bigger rasterlite
>> tables. For example for my 153600x249600 pixel sized test image the
>> initial write into rasterlite took 3 hours and 10 minutes while adding
>> overviews with gdaladdo took 10 hours.

> I tried a bit the gdal_translate part, but didn't have the patience to wait
> for it to complete (~ 1 hour on my PC). A sysprof profile shows that most of
> the CPU time ( ~ 75% ) is spent in zlib and libpng, which isn't surprising.
> I've tried to use tiles in geotiff with deflate compression, and it seems around
> twice faster, so png has a non neglectable overhead over plain zlib
> compression. But png seems to be smaller too.

I repeated my test with another computer and I could not repeat the bad behaviour.
Overviews were generated at reasonable time and highest levels in the pyramid 
were just as much faster to create as could be estimated.  I can only imagine
that my first test computer was suffering from lack of some resources. Right 
now I cannot imagine what resource it could have been but I do not think
that it is so important either because there does not seem to be anything in 
gdaladdo that is totally wrong.

One issue there is still.  My original was a highly compressed (deflate) tiff 
with a file size of 550 MB.  Initial transform into Rasterlite with png tiles yielded
a 1.2 GB Rasterlite db. Condiderably bigger but still understandable.  However,
gdaladdo has no option to compress internal overviews which make most
sense with Rasterlite.  Because of this the Rasterlite overviews are 
uncompressed tiff tiles and after creating the whole set of overlays the file
size is not less than 37 GB.  It is naturally far too much and gdaladdo is
unusable for the kind of original maps I used in the test.
If gdaladdo cannot be modified to make compressed internal overviews when 
target format is suitable for that (I suppose at least all database rasters 
are such: Rasterlite, PostGIS raster, Oracle georasters) then it might be worth 
mentioning in gdaladdo manual page that the that the need of disk space
may be surprisingly high.

-Jukka Rahkonen-


>> Gdaladdo seems to use remarkable
>> much time every time it has finished with creating one overview layer.

> Yes, this is expected. Each overview layer is wrapped into a BEGIN / COMMIT
> transaction, so the commit at the end will take some time. Without that, I
> think things would be globally slower.

>> In addition, the creation of the last overview layers does not feel as much
>> faster than I would have guessed keeping in mind that the number of tiles
>> to write goes 3/4 down at each step.

> As far as the perceived slowness on the last overview layer, reviewing the
> code, I don't see any obvious hint that would explain that. I tried on a much
> smaller dataset, and I could see that building overview level (n+1) uses as
> expected results from level n. So there's something more subtle. Once the
> overviews are built, is the reading performance of the overviews OK ? I'm
> wondering if there are not some indexes that should be added on the metadata
> table, perhaps on pixel_x_size and pixel_y_size, to speed-up tile retrieval.

> More generally, the rasterlite overview building does not use the generic
> overview code, but uses RasterIO() decimation. Not sure if this affects notably
> performance.

>
>> I put my test image available for testing
>> http://latuviitta.org/documents/t80.tif (550 MB, deflate compressed tiff)
>> I will keep it on a server for a week or so.
>>
>> Commands I used were:
>> gdal_translate -of rasterlite -co driver=png t80.tif t80.sqlite
>> gdaladdo rasterlite:t80.sqlite,table=t80
>>  2 4 8 16 32 64 128 256 512 1024
>
>> I tried to compare times with Rasterlite utilites rasterlite_load and
>> raster_pyramid but they both failed totally with my test image.
>>
>> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From anakintang at gmail.com  Thu Jul  5 10:19:38 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu, 5 Jul 2012 10:19:38 -0700
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
In-Reply-To: <CAMKgpOb+Nm=37RgPeaVHcBLUnU4S_CyMfaaJap6jF+yHDwFDzg@mail.gmail.com>
References: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
	<CAMKgpOb+Nm=37RgPeaVHcBLUnU4S_CyMfaaJap6jF+yHDwFDzg@mail.gmail.com>
Message-ID: <CA+DQzZCr12cc9qwBjKYRhAsBVk6np52apNwPuAQr=LeG4wkr5Q@mail.gmail.com>

Hi Chaitanya,

This works great, thanks a lot for the advice. Here is basic code pattern:

    inputDataStr = "<input_geojson_or_gml_str>";
    gdal.FileFromMemBuffer('/vsimem/temp', inputDataStr);
    inputDriver.Open('/vsimem/temp', 0);

Thanks,
Yingqi

On Tue, Jul 3, 2012 at 8:18 PM, Chaitanya kumar CH
<chaitanya.ch at gmail.com>wrote:

> Yingqi,
>
> Though the GeoJSON driver allows for reading the data directly, it is more
> like an exception. For consistent behavior between formats, you need to
> read the data from a data source like a file or url.
>
> You can create a temporary in-memory file of your data using the method
>
> gdal.FileFromMemBuffer()
>
> Example at http://www.gdal.org/ogr/drv_georss.html
>
> There are also a few methods to import/export just the geometries. You can
> import GML and WKT [1] and export to GML, KML and JSON[2].
>
> [1]: http://www.gdal.org/ogr/classOGRGeometryFactory.html
> [2]: http://www.gdal.org/ogr/classOGRGeometry.html
>
> On Wed, Jul 4, 2012 at 3:34 AM, Yingqi Tang <anakintang at gmail.com> wrote:
>
>> Hi,
>>
>> I am using OGR/GDAL to read GML/GeoRSS/GeoJSON from either local file or
>> url, the sample code is like below
>> ...
>> inputDriver = ogr.GetDriverByName(inputDriverType)
>> inputDataSource = inputDriver.Open(inputDataPath, 0);
>> ...
>>
>> It seems that I can pass in the GeoJSON string directly like:
>>
>> inputDataSource = inputDriver.Open("
>>
>> {'type':'FeatureCollection','features':[{'type':'Feature','id':'OpenLayers.Feature.Vector_3449','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-109.3449,
>> 63.6328125
>> ],[-112.5,35.5078125],[-85.078125,34.8046875],[-68.90625,39.7265625],[-68.203125,
>> 67.1484375],[-109.6875,63.6328125
>> ]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}},{'type':'Feature','id':'OpenLayers.Feature.Vector_07050618','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-40.78125,
>> 65.0390625
>> ],[-40.078125,34.8046875],[-12.3449,25.6640625],[21.09375,17.2265625],[22.5,58.0078125],[-40.78125,
>> 65.0390625]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}}]}",
>> 0);
>>
>> But it doesn't seem to work with GML or GeoRSS, did I miss anything? So
>> basically how can I read GML/GeoRSS directly from an XML string?
>>
>> Thanks
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120705/2525fd17/attachment.html>

From even.rouault at mines-paris.org  Thu Jul  5 11:07:54 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 5 Jul 2012 20:07:54 +0200
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
In-Reply-To: <84446DEF76453C439E9E97E438E13A6345B284@suutari.haapa.mmm.fi>
References: <loom.20120704T191141-530@post.gmane.org>
	<201207042339.43067.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B284@suutari.haapa.mmm.fi>
Message-ID: <201207052007.54384.even.rouault@mines-paris.org>


> One issue there is still.  My original was a highly compressed (deflate)
> tiff with a file size of 550 MB.  Initial transform into Rasterlite with
> png tiles yielded a 1.2 GB Rasterlite db. Condiderably bigger but still
> understandable.  However, gdaladdo has no option to compress internal
> overviews which make most sense with Rasterlite. 

Good point. Support for specifying options was actually missing. Added in 
trunk in r24660.

See below diff for the syntax :

Index: frmts/rasterlite/frmt_rasterlite.html
===================================================================
--- frmts/rasterlite/frmt_rasterlite.html	(r?vision 24659)
+++ frmts/rasterlite/frmt_rasterlite.html	(copie de travail)
@@ -76,6 +76,10 @@
 
 <p>If no internal overview is detected, the driver will try using external 
overviews (.ovr files).</p>
 
+<p>Starting with GDAL 2.0, options can be used for internal overviews 
building. They can be specified with the
+RASTERLITE_OVR_OPTIONS configuration option, as a comma separated list of the 
above creation options. See below
+examples.</p>
+
 <h2>Examples:</h2>
 
 <ul>
@@ -172,6 +176,12 @@
 </pre>
 </li>
 
+<li>Creating internal overviews with options (GDAL 2.0 or later):
+<pre>
+$ gdaladdo RASTERLITE:my_db.sqlite,table=source 2 4 8 16 --config 
RASTERLITE_OVR_OPTIONS DRIVER=GTiff,COMPRESS=JPEG,PHOTOMETRIC=YCbCr
+</pre>
+</li>
+
 </ul>
 

From anakintang at gmail.com  Thu Jul  5 11:44:58 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu, 5 Jul 2012 11:44:58 -0700
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
In-Reply-To: <CA+DQzZCr12cc9qwBjKYRhAsBVk6np52apNwPuAQr=LeG4wkr5Q@mail.gmail.com>
References: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
	<CAMKgpOb+Nm=37RgPeaVHcBLUnU4S_CyMfaaJap6jF+yHDwFDzg@mail.gmail.com>
	<CA+DQzZCr12cc9qwBjKYRhAsBVk6np52apNwPuAQr=LeG4wkr5Q@mail.gmail.com>
Message-ID: <CA+DQzZCvHFqrLW--0VXsdDnKQPTnXZsU65VydBh+GT0a86ygUA@mail.gmail.com>

Hi Chaitanya,

GeoJSON does seem to be an exception, although the ogr driver can directly
read the GeoJSON string, the generic virtual memory file doesn't seem to
work:

    inputDataStr = "{geojson_string}";
    gdal.FileFromMemBuffer('/vsimem/temp', inputDataStr);
    inputDriver.Open('/vsimem/temp', 0);

Is that expected?

Thanks.

On Thu, Jul 5, 2012 at 10:19 AM, Yingqi Tang <anakintang at gmail.com> wrote:

> Hi Chaitanya,
>
> This works great, thanks a lot for the advice. Here is basic code pattern:
>
>     inputDataStr = "<input_geojson_or_gml_str>";
>     gdal.FileFromMemBuffer('/vsimem/temp', inputDataStr);
>     inputDriver.Open('/vsimem/temp', 0);
>
> Thanks,
> Yingqi
>
> On Tue, Jul 3, 2012 at 8:18 PM, Chaitanya kumar CH <chaitanya.ch at gmail.com
> > wrote:
>
>> Yingqi,
>>
>> Though the GeoJSON driver allows for reading the data directly, it is
>> more like an exception. For consistent behavior between formats, you need
>> to read the data from a data source like a file or url.
>>
>> You can create a temporary in-memory file of your data using the method
>>
>> gdal.FileFromMemBuffer()
>>
>> Example at http://www.gdal.org/ogr/drv_georss.html
>>
>> There are also a few methods to import/export just the geometries. You
>> can import GML and WKT [1] and export to GML, KML and JSON[2].
>>
>> [1]: http://www.gdal.org/ogr/classOGRGeometryFactory.html
>> [2]: http://www.gdal.org/ogr/classOGRGeometry.html
>>
>> On Wed, Jul 4, 2012 at 3:34 AM, Yingqi Tang <anakintang at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> I am using OGR/GDAL to read GML/GeoRSS/GeoJSON from either local file or
>>> url, the sample code is like below
>>> ...
>>> inputDriver = ogr.GetDriverByName(inputDriverType)
>>> inputDataSource = inputDriver.Open(inputDataPath, 0);
>>> ...
>>>
>>> It seems that I can pass in the GeoJSON string directly like:
>>>
>>> inputDataSource = inputDriver.Open("
>>>
>>> {'type':'FeatureCollection','features':[{'type':'Feature','id':'OpenLayers.Feature.Vector_3449','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-109.3449,
>>> 63.6328125
>>> ],[-112.5,35.5078125],[-85.078125,34.8046875],[-68.90625,39.7265625],[-68.203125,
>>> 67.1484375],[-109.6875,63.6328125
>>> ]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}},{'type':'Feature','id':'OpenLayers.Feature.Vector_07050618','properties':{},'geometry':{'type':'Polygon','coordinates':[[[-40.78125,
>>> 65.0390625
>>> ],[-40.078125,34.8046875],[-12.3449,25.6640625],[21.09375,17.2265625],[22.5,58.0078125],[-40.78125,
>>> 65.0390625]]]},'crs':{'type':'OGC','properties':{'urn':'urn:ogc:def:crs:OGC:1.3:CRS84'}}}]}",
>>> 0);
>>>
>>> But it doesn't seem to work with GML or GeoRSS, did I miss anything? So
>>> basically how can I read GML/GeoRSS directly from an XML string?
>>>
>>> Thanks
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120705/8d913727/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Jul  5 11:47:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 5 Jul 2012 20:47:39 +0200
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
In-Reply-To: <CA+DQzZCvHFqrLW--0VXsdDnKQPTnXZsU65VydBh+GT0a86ygUA@mail.gmail.com>
References: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
	<CA+DQzZCr12cc9qwBjKYRhAsBVk6np52apNwPuAQr=LeG4wkr5Q@mail.gmail.com>
	<CA+DQzZCvHFqrLW--0VXsdDnKQPTnXZsU65VydBh+GT0a86ygUA@mail.gmail.com>
Message-ID: <201207052047.39942.even.rouault@mines-paris.org>

Le jeudi 05 juillet 2012 20:44:58, Yingqi Tang a ?crit :
> Hi Chaitanya,
> 
> GeoJSON does seem to be an exception, although the ogr driver can directly
> read the GeoJSON string, the generic virtual memory file doesn't seem to
> work:
> 
>     inputDataStr = "{geojson_string}";
>     gdal.FileFromMemBuffer('/vsimem/temp', inputDataStr);
>     inputDriver.Open('/vsimem/temp', 0);
> 
> Is that expected?

Yes, the geojson driver only recognizes filenames ending with .json or 
.geojson, so use "/vsitem/temp.json" as a filename.

From anakintang at gmail.com  Thu Jul  5 11:52:06 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu, 5 Jul 2012 11:52:06 -0700
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
In-Reply-To: <201207052047.39942.even.rouault@mines-paris.org>
References: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
	<CA+DQzZCr12cc9qwBjKYRhAsBVk6np52apNwPuAQr=LeG4wkr5Q@mail.gmail.com>
	<CA+DQzZCvHFqrLW--0VXsdDnKQPTnXZsU65VydBh+GT0a86ygUA@mail.gmail.com>
	<201207052047.39942.even.rouault@mines-paris.org>
Message-ID: <CA+DQzZBo85zikta04uXr2q82yA_LB4MYyjMdC98sgQTGzoTSjw@mail.gmail.com>

Cool, adding ".json" doesn't solve the problem.

On Thu, Jul 5, 2012 at 11:47 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le jeudi 05 juillet 2012 20:44:58, Yingqi Tang a ?crit :
> > Hi Chaitanya,
> >
> > GeoJSON does seem to be an exception, although the ogr driver can
> directly
> > read the GeoJSON string, the generic virtual memory file doesn't seem to
> > work:
> >
> >     inputDataStr = "{geojson_string}";
> >     gdal.FileFromMemBuffer('/vsimem/temp', inputDataStr);
> >     inputDriver.Open('/vsimem/temp', 0);
> >
> > Is that expected?
>
> Yes, the geojson driver only recognizes filenames ending with .json or
> .geojson, so use "/vsitem/temp.json" as a filename.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120705/3213415f/attachment.html>

From anakintang at gmail.com  Thu Jul  5 11:55:45 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Thu, 5 Jul 2012 11:55:45 -0700
Subject: [gdal-dev] How to read GML/GeoRSS directly from XML string?
In-Reply-To: <CA+DQzZBo85zikta04uXr2q82yA_LB4MYyjMdC98sgQTGzoTSjw@mail.gmail.com>
References: <CA+DQzZB1WwqHfUDnU_kxt9jYUjFbYsrSRGCO0yCM8Vv8fuRgsQ@mail.gmail.com>
	<CA+DQzZCr12cc9qwBjKYRhAsBVk6np52apNwPuAQr=LeG4wkr5Q@mail.gmail.com>
	<CA+DQzZCvHFqrLW--0VXsdDnKQPTnXZsU65VydBh+GT0a86ygUA@mail.gmail.com>
	<201207052047.39942.even.rouault@mines-paris.org>
	<CA+DQzZBo85zikta04uXr2q82yA_LB4MYyjMdC98sgQTGzoTSjw@mail.gmail.com>
Message-ID: <CA+DQzZA6KiKCRye6zApsZERb4hZNwjJ32vBThnibx7RSRXEcWg@mail.gmail.com>

It looks like CSV driver follows the same pattern. You need to add ".csv"
for the temp memory virtual file. It's good to know.

Thanks,

On Thu, Jul 5, 2012 at 11:52 AM, Yingqi Tang <anakintang at gmail.com> wrote:

> Cool, adding ".json" doesn't solve the problem.
>
>
> On Thu, Jul 5, 2012 at 11:47 AM, Even Rouault <
> even.rouault at mines-paris.org> wrote:
>
>> Le jeudi 05 juillet 2012 20:44:58, Yingqi Tang a ?crit :
>> > Hi Chaitanya,
>> >
>> > GeoJSON does seem to be an exception, although the ogr driver can
>> directly
>> > read the GeoJSON string, the generic virtual memory file doesn't seem to
>> > work:
>> >
>> >     inputDataStr = "{geojson_string}";
>> >     gdal.FileFromMemBuffer('/vsimem/temp', inputDataStr);
>> >     inputDriver.Open('/vsimem/temp', 0);
>> >
>> > Is that expected?
>>
>> Yes, the geojson driver only recognizes filenames ending with .json or
>> .geojson, so use "/vsitem/temp.json" as a filename.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120705/4f63d726/attachment.html>

From kedardeshpande87 at gmail.com  Thu Jul  5 16:50:32 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Thu, 5 Jul 2012 16:50:32 -0700 (PDT)
Subject: [gdal-dev] Building from source excluding some packages
In-Reply-To: <CAHXrU-J4+pB-6Ob-9MMbWaFtC7P=4ToDfwZxpVJ+7Jyq1r1X_g@mail.gmail.com>
References: <1340643653764-4983703.post@n6.nabble.com>
	<CAHXrU-J4+pB-6Ob-9MMbWaFtC7P=4ToDfwZxpVJ+7Jyq1r1X_g@mail.gmail.com>
Message-ID: <1341532232259-4986405.post@n6.nabble.com>

Thanks Paolo,

I tried building it with minimal options as you suggested. The source builds
successfully, but when I try to use the library by making a call, I am
getting an error in libgdal.so file saying some symbol not found. I am using
swig java bindings.
I get the following error:

UnsatisfiedLinkError: .../build/lib/libogrjni.so:
.../gdal/build/.libs/libgdal.so.1 undefined symbol <symbol_name>

It finds the required .so files in java.library.path but the libgdal.so.1
file does not contain the symbol because we excluded some parts of source
while building.

For example, when I provide --without-jpeg option while configuring, I get
the error undefined symbol 'jpeg_resync_to_restart'.
For some other format I exclude, I get the same error for some other symbol
from that package.

So, specifying the --without-PACKAGE option builds the code but some of the
references are still pointing nowhere because the package was excluded. and
I am getting an exception at runtime.

Can you please let me know how do I resolve this ?

Thanks!
Kedar



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Building-from-source-excluding-some-packages-tp4983703p4986405.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Jukka.Rahkonen at mmmtike.fi  Fri Jul  6 00:44:54 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Fri, 6 Jul 2012 07:44:54 +0000
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
In-Reply-To: <201207052007.54384.even.rouault@mines-paris.org>
References: <loom.20120704T191141-530@post.gmane.org>
	<201207042339.43067.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B284@suutari.haapa.mmm.fi>,
	<201207052007.54384.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345B49C@suutari.haapa.mmm.fi>

Even Rouault wrote:

>> One issue there is still.  My original was a highly compressed (deflate)
>> tiff with a file size of 550 MB.  Initial transform into Rasterlite with
>> png tiles yielded a 1.2 GB Rasterlite db. Condiderably bigger but still
>> understandable.  However, gdaladdo has no option to compress internal
>> overviews which make most sense with Rasterlite.

> Good point. Support for specifying options was actually missing. Added in
> trunk in r24660.

Feels pretty good but I have an odd problem with a multitable database.  I can only 
create overviews for the table that was written first into the database.

gdalinfo
=======
gdalinfo taustak.sqlite
Driver: Rasterlite/Rasterlite
Files:
Size is 512, 512
Coordinate System is `'
Subdatasets:
  SUBDATASET_1_NAME=RASTERLITE:taustak.sqlite,table=t0320
  SUBDATASET_1_DESC=RASTERLITE:taustak.sqlite,table=t0320
  SUBDATASET_2_NAME=RASTERLITE:taustak.sqlite,table=t0800
  SUBDATASET_2_DESC=RASTERLITE:taustak.sqlite,table=t0800
  SUBDATASET_3_NAME=RASTERLITE:taustak.sqlite,table=t2000
  SUBDATASET_3_DESC=RASTERLITE:taustak.sqlite,table=t2000
  SUBDATASET_4_NAME=RASTERLITE:taustak.sqlite,table=t4000
  SUBDATASET_4_DESC=RASTERLITE:taustak.sqlite,table=t4000
  SUBDATASET_5_NAME=RASTERLITE:taustak.sqlite,table=t8000
  SUBDATASET_5_DESC=RASTERLITE:taustak.sqlite,table=t8000

table t8000 OK
==========

gdaladdo RASTERLITE:taustak.sqlite,table=t8000 2 4 8 16 --config
 RASTERLITE_OVR_OPTIONS DRIVER=png
0...10...20...30...40...50...60...70...80...90...100 - done.
0...10...20...30...40...50...60...70...80...90...100 - done.

table t4000 not OK
============

F:\taustakartat>gdaladdo RASTERLITE:taustak.sqlite,table=t4000 2 4 8 16 --config
 RASTERLITE_OVR_OPTIONS DRIVER=png
ERROR 4: `RASTERLITE:taustak.sqlite,table=t4000' does not exist in the file system,
and is not recognised as a supported dataset name.

-Jukka-


From even.rouault at mines-paris.org  Fri Jul  6 12:52:28 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 6 Jul 2012 21:52:28 +0200
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
In-Reply-To: <84446DEF76453C439E9E97E438E13A6345B49C@suutari.haapa.mmm.fi>
References: <loom.20120704T191141-530@post.gmane.org>
	<201207052007.54384.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B49C@suutari.haapa.mmm.fi>
Message-ID: <201207062152.28683.even.rouault@mines-paris.org>

Le vendredi 06 juillet 2012 09:44:54, Rahkonen Jukka a ?crit :
> Even Rouault wrote:
> >> One issue there is still.  My original was a highly compressed (deflate)
> >> tiff with a file size of 550 MB.  Initial transform into Rasterlite with
> >> png tiles yielded a 1.2 GB Rasterlite db. Condiderably bigger but still
> >> understandable.  However, gdaladdo has no option to compress internal
> >> overviews which make most sense with Rasterlite.
> > 
> > Good point. Support for specifying options was actually missing. Added in
> > trunk in r24660.
> 
> Feels pretty good but I have an odd problem with a multitable database.  I
> can only create overviews for the table that was written first into the
> database.

Good point. There was indeed an issue with multitable database and overviews. 
Fixed in http://trac.osgeo.org/gdal/ticket/4737

Thanks

From jukka.rahkonen at mmmtike.fi  Fri Jul  6 23:45:33 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 7 Jul 2012 06:45:33 +0000 (UTC)
Subject: [gdal-dev] Any plans for a GDAL WMTS driver?
Message-ID: <loom.20120707T083755-135@post.gmane.org>

Hi,

National Land Survey of Finland has opened an experimental WMTS service.
GetCapabolities is found from 
http://karttatiili.fi/dataset/taustakarttasarja/capabilities/wmts.xml??REQUEST=GetCapabilities
Unfortunately GDAL does not have a WMTS driver yet. Are there any plans for
making such?

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Sat Jul  7 02:07:35 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 7 Jul 2012 09:07:35 +0000 (UTC)
Subject: [gdal-dev] Basic OpenStreetMap driver with ReadOSM?
Message-ID: <loom.20120707T085929-639@post.gmane.org>

Hi,

I was wondering if the ReadOSM library
(https://www.gaia-gis.it/fossil/readosm/index) by Alessandro Furieri could be
utilised for making a basic read-only OpenStreetMap driver. Basic driver would
read OSM data in XML or pbf format and write out point, line and polygon layers
with a fixed attribute schema following a tag list which user could give as
input. ReadOSM seems to have most if not all that is needed for that. A ready
made spatialite_osm_map program is some example into that way but it is not made
for generic use. It imports a hardcoded set of tags and creates a predefined set
of layers https://www.gaia-gis.it/fossil/spatialite-tools/index.

-Jukka Rahkonen-





From even.rouault at mines-paris.org  Sat Jul  7 03:01:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 7 Jul 2012 12:01:10 +0200
Subject: [gdal-dev] Basic OpenStreetMap driver with ReadOSM?
In-Reply-To: <loom.20120707T085929-639@post.gmane.org>
References: <loom.20120707T085929-639@post.gmane.org>
Message-ID: <201207071201.10169.even.rouault@mines-paris.org>

Le samedi 07 juillet 2012 11:07:35, Jukka Rahkonen a ?crit :
> Hi,
> 
> I was wondering if the ReadOSM library
> (https://www.gaia-gis.it/fossil/readosm/index) by Alessandro Furieri could
> be utilised for making a basic read-only OpenStreetMap driver. Basic
> driver would read OSM data in XML or pbf format and write out point, line
> and polygon layers with a fixed attribute schema following a tag list
> which user could give as input. ReadOSM seems to have most if not all that
> is needed for that. A ready made spatialite_osm_map program is some
> example into that way but it is not made for generic use. It imports a
> hardcoded set of tags and creates a predefined set of layers
> https://www.gaia-gis.it/fossil/spatialite-tools/index.

Jukka,

I've a PBF parser and an embryonic OGR OSM driver in a local tree (I realize 
that it is sitting there for years in fact!), but it didn't yet make its way 
through svn, because I wasn't yet sure how to deal with a few key points that 
must be solved, to avoid doing just a "toy" driver :

- what kind of output would be the most usefull ?
     * Raw OSM data (but that doesn't fit really with the SimpleFeature model 
of OGR. That would be more suited for a topology engine),
     * or something more elaborated where linestrings and polygons and 
multipolygons geometry are built by examining ways and relations objects ? In 
that case, would the driver report in a 'osm_point' layer the nodes that have 
no associated tags (key/value pairs) ?

- For building the geometries, you need to access the nodes and/or ways that 
have been read before. The simple solution is to store them in RAM, but at 
some point, if the .osm file is too big, that will not work. Otherwise you need 
to write them into a temporary file/DB. That doesn't really follow the general 
philosophy of OGR drivers, except that recently we have done similar things in 
the GML driver or the VFK driver, by using a temporary SQLite DB, so that 
might be a possibility for a OGR OSM driver.

- The topology model of OSM data is rather loosely defined. For example, how do 
you know if a way is a linestring or a polygon ? Quoting 
http://wiki.openstreetmap.org/wiki/Elements#Area :
"""
An Area (also polygon) is an enclosed filled area of territory defined as a 
closed Way. Closed ways with some tags such as landuse=* are assumed to be 
areas, others, such as highway=footway are assumed to be closed Polylines 
unless they also have a area=yes tag. 
"""

Reading that I'm wondering if the presence of the landuse tag is the only case 
where area=yes is implicit, or if there are not other similar cases ? So, 
should we hardcode that rule, or make something more configurable, with a 
syntax has to be determined.

- You are also mentionning the possibility of having custom layers. My idea up 
to now was just to have layers like "osm_points", "osm_lines", "osm_polygons", 
but having something more advanced is certainly interesting. The syntax for 
configuring the layers and attributes would have to be determined.

- Last but not least, is there really an interest for such a driver given all 
the existing advanced tools that do similar things : osm2pgsql, osmosis, 
etc... ?

> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sat Jul  7 03:58:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 7 Jul 2012 12:58:33 +0200
Subject: [gdal-dev] Any plans for a GDAL WMTS driver?
In-Reply-To: <loom.20120707T083755-135@post.gmane.org>
References: <loom.20120707T083755-135@post.gmane.org>
Message-ID: <201207071258.33607.even.rouault@mines-paris.org>

Le samedi 07 juillet 2012 08:45:33, Jukka Rahkonen a ?crit :
> Hi,
> 
> National Land Survey of Finland has opened an experimental WMTS service.
> GetCapabolities is found from
> http://karttatiili.fi/dataset/taustakarttasarja/capabilities/wmts.xml??REQU
> EST=GetCapabilities Unfortunately GDAL does not have a WMTS driver yet. Are
> there any plans for making such?

This is something I've also thought to. At first sight WMTS shouldn't be so 
different of other tiled protocols (WMS-C, TMS, etc..), but there's an annoying 
difficulty : in WMTS, the different overview levels have not necessarily the same 
spatial extent (in the server you are mentionning, this seems to be indeed the 
case (*)), which doesn't fit natively into the GDAL model. An idea would be to 
take into account the tiling scheme and spatial extent of the most precise 
level, and use perhaps a in-memory VRT to do on-the-fly clipping of the 
overview levels. But that doesn't fit very well in the architecture of the 
"minidrivers" of the WMS driver.


(*)

You can see it by downloading the 4 following tiles at level 10 :

http://kansalaisen.karttatiili.fi/dataset/taustakarttasarja/service/wmts?STYLES=_null&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=taustakartta_10k&STYLE=_null&TILEMATRIXSET=EPSG_3067_MML&TILEMATRIX=EPSG_3067_MML%3A10&TILEROW=10000&TILECOL=1500&FORMAT=image%2Fpng
http://kansalaisen.karttatiili.fi/dataset/taustakarttasarja/service/wmts?STYLES=_null&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=taustakartta_10k&STYLE=_null&TILEMATRIXSET=EPSG_3067_MML&TILEMATRIX=EPSG_3067_MML%3A10&TILEROW=10000&TILECOL=1501&FORMAT=image%2Fpng
http://kansalaisen.karttatiili.fi/dataset/taustakarttasarja/service/wmts?STYLES=_null&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=taustakartta_10k&STYLE=_null&TILEMATRIXSET=EPSG_3067_MML&TILEMATRIX=EPSG_3067_MML%3A10&TILEROW=10001&TILECOL=1500&FORMAT=image%2Fpng
http://kansalaisen.karttatiili.fi/dataset/taustakarttasarja/service/wmts?STYLES=_null&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=taustakartta_10k&STYLE=_null&TILEMATRIXSET=EPSG_3067_MML&TILEMATRIX=EPSG_3067_MML%3A10&TILEROW=10001&TILECOL=1501&FORMAT=image%2Fpng

And then the one that, in a classical tiling scheme, should cover the same 
area at level 9 :

http://kansalaisen.karttatiili.fi/dataset/taustakarttasarja/service/wmts?STYLES=_null&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=taustakartta_10k&STYLE=_null&TILEMATRIXSET=EPSG_3067_MML&TILEMATRIX=EPSG_3067_MML%3A9&TILEROW=5000&TILECOL=750&FORMAT=image%2Fpng

But if you reassemble the 4 tiles of level 10, you'll see that the tile of 
level 9 is located at the north, with a shift of the height of a tile of level 
10.

This indeed comes from the TileMatrix definition, where one can see that the 
top of each level is not the same. And indeed, as 
ScaleDenominator=7142.857142857143 is equivalent to 2 m and 
ScaleDenominator=3571.4285714285716 is equivalent to 1 m, one can see that the 
tile at row=0 at level 10 is at the half of tile at row = 0 at level 9.

    <TileMatrix>
      <ows:Identifier>EPSG_3067_MML:9</ows:Identifier>
      <ScaleDenominator>7142.857142857143</ScaleDenominator>
      <TopLeftCorner>0.0 1.0000384E7</TopLeftCorner>
      <TileWidth>256</TileWidth>
      <TileHeight>256</TileHeight>
      <MatrixWidth>19532</MatrixWidth>
      <MatrixHeight>19532</MatrixHeight>
    </TileMatrix>
    <TileMatrix>
      <ows:Identifier>EPSG_3067_MML:10</ows:Identifier>
      <ScaleDenominator>3571.4285714285716</ScaleDenominator>
      <TopLeftCorner>0.0 1.0000128E7</TopLeftCorner>
      <TileWidth>256</TileWidth>
      <TileHeight>256</TileHeight>
      <MatrixWidth>39063</MatrixWidth>
      <MatrixHeight>39063</MatrixHeight>
    </TileMatrix>

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Jukka.Rahkonen at mmmtike.fi  Sat Jul  7 04:14:06 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Sat, 7 Jul 2012 11:14:06 +0000
Subject: [gdal-dev] Basic OpenStreetMap driver with ReadOSM?
In-Reply-To: <201207071201.10169.even.rouault@mines-paris.org>
References: <loom.20120707T085929-639@post.gmane.org>,
	<201207071201.10169.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345B62B@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Last but not least, is there really an interest for such a driver given all
> the existing advanced tools that do similar things : osm2pgsql, osmosis,
> etc... ?

Osm2pgsql outputs only to PostGIS and even PostGIS is super fine I consider that the threshold in installing and managing it is too high for many users. In addition, there has been only two Windows builds of osm2pgsql available ever and the latter one is more than two years old. ImpOsm is impossible to make work on Windows due to something called Tokyo Cabinet. Osm2pgsql fails every time for me with my lean Linux box with only 700 MB of memory and I must do local import with my home computer and use PostGIS dump/restore after that.  And on my home Windows laptop running import with osm2pgsql (with that 2 years old version) takes something like 3 hours while Sandro had a try with the same Finnish OSM excerpt and reported that he could parse it with ReadOSM in five minutes.  If something is possibly 30 times faster than something else I usually get interested.
If you count together the number of users who are on Windows OR do not want to learn to be DB admins OR are willing to run cheap and weak virtual servers, then I would say that there might be enough interest for such a driver.

I think that what Osm2pgsql is doing is enough for the majority of users. That is, create point, line and polygon layers from features which have at least on tag in the configuration file. Parsing relations must be pretty difficult, at least with polygons and therefore I was thinking that by using the ReadOSM library the responsibility about doing it right could be left to ReadOSM developer. Advanced users could still use the advanced tools.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Sat Jul  7 04:34:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 7 Jul 2012 13:34:53 +0200
Subject: [gdal-dev] Basic OpenStreetMap driver with ReadOSM?
In-Reply-To: <84446DEF76453C439E9E97E438E13A6345B62B@suutari.haapa.mmm.fi>
References: <loom.20120707T085929-639@post.gmane.org>
	<201207071201.10169.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B62B@suutari.haapa.mmm.fi>
Message-ID: <201207071334.53059.even.rouault@mines-paris.org>

> Parsing relations must be pretty
> difficult, at least with polygons and therefore I was thinking that by
> using the ReadOSM library the responsibility about doing it right could be
> left to ReadOSM developer. 

My understanding of the ReadOSM API is that it is "just" a low level API that 
exposes the raw OSM structure to applications wanting to use it. It will not 
build geometries for example. For ways, it will report an array of node ids, 
which you have to fetch by other means to build the corresponding linestring.

From Jukka.Rahkonen at mmmtike.fi  Sat Jul  7 04:45:28 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Sat, 7 Jul 2012 11:45:28 +0000
Subject: [gdal-dev] Basic OpenStreetMap driver with ReadOSM?
In-Reply-To: <201207071334.53059.even.rouault@mines-paris.org>
References: <loom.20120707T085929-639@post.gmane.org>
	<201207071201.10169.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B62B@suutari.haapa.mmm.fi>,
	<201207071334.53059.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345B648@suutari.haapa.mmm.fi>

Even Rouault wrote:

>> Parsing relations must be pretty
>> difficult, at least with polygons and therefore I was thinking that by
>> using the ReadOSM library the responsibility about doing it right could be
>> left to ReadOSM developer.

> My understanding of the ReadOSM API is that it is "just" a low level API that
> exposes the raw OSM structure to applications wanting to use it. It will not
> build geometries for example. For ways, it will report an array of node ids,
> which you have to fetch by other means to build the corresponding linestring.

You are probably right. I downloaded source code from https://www.gaia-gis.it/fossil/spatialite-tools/index and it looks to me that spatialite_map_c has code for building geometries. I cannot compile anything myself but once new version of spatialite tools are available as Windows binaries I will have a try. 

-Jukka-

From Jukka.Rahkonen at mmmtike.fi  Sat Jul  7 08:58:17 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Sat, 7 Jul 2012 15:58:17 +0000
Subject: [gdal-dev] Gdaladdo feels slow with Rasterlite
In-Reply-To: <201207062152.28683.even.rouault@mines-paris.org>
References: <loom.20120704T191141-530@post.gmane.org>
	<201207052007.54384.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B49C@suutari.haapa.mmm.fi>,
	<201207062152.28683.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345B656@suutari.haapa.mmm.fi>

Even Rouault wrote:
>>
>> Feels pretty good but I have an odd problem with a multitable database.  I
>> can only create overviews for the table that was written first into the
>> database.

> Good point. There was indeed an issue with multitable database and overviews.
> Fixed in http://trac.osgeo.org/gdal/ticket/4737

I made a  little test and everything seems to work perfectly now. Resulting tables behave also well in Quantum GIS. A single layer rasterlite db does not make much sense for me because tiled geotiff with overviews is doing the same thing but a db with multiple raster layers together with some useful vector data is interesting both as data delivery format and for off-line usage.

-Jukka-

From a1hunter at ucsd.edu  Sat Jul  7 17:14:09 2012
From: a1hunter at ucsd.edu (aphunter)
Date: Sat, 7 Jul 2012 17:14:09 -0700 (PDT)
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
Message-ID: <1341706449674-4986729.post@n6.nabble.com>

Hi community! 

Here's my issue. I currently have two halves of California, one in
EPSG:26910, and one in EPSG:26911. I successfully reprojected the 26910
segment into zone 26911, and if I make the images small, to test,
gdal_merge.py works properly. See below:

http://osgeo-org.1560.n6.nabble.com/file/n4986729/screenshot.92.png 

Unfortunately, the original images are too large to use gdal_merge.py,
because I don't have enough memory on my system. They are each about 1.5T in
size.

When I use gdalwarp to combine the images, I get a horrible space in the
middle. See below.

http://osgeo-org.1560.n6.nabble.com/file/n4986729/screenshot.93.png 

Can anybody help me either use gdalwarp properly to combine the two Tiff's,
or get gdal_merge.py to work with Tiff's larger than the amount of memory I
have on my system?

Any help is greatly appreciated!

Thanks in advance,
Aaron

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Sat Jul  7 20:45:08 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun, 8 Jul 2012 09:15:08 +0530
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <1341706449674-4986729.post@n6.nabble.com>
References: <1341706449674-4986729.post@n6.nabble.com>
Message-ID: <CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>

Aaron,

You can use a combination of gdalbuildvrt and gdal_translate.

gdalbuildvrt both.vrt one_26911.tif two_26911.tif
gdal_translate both.vrt both.tif

On Sun, Jul 8, 2012 at 5:44 AM, aphunter <a1hunter at ucsd.edu> wrote:

> Hi community!
>
> Here's my issue. I currently have two halves of California, one in
> EPSG:26910, and one in EPSG:26911. I successfully reprojected the 26910
> segment into zone 26911, and if I make the images small, to test,
> gdal_merge.py works properly. See below:
>
> http://osgeo-org.1560.n6.nabble.com/file/n4986729/screenshot.92.png
>
> Unfortunately, the original images are too large to use gdal_merge.py,
> because I don't have enough memory on my system. They are each about 1.5T
> in
> size.
>
> When I use gdalwarp to combine the images, I get a horrible space in the
> middle. See below.
>
> http://osgeo-org.1560.n6.nabble.com/file/n4986729/screenshot.93.png
>
> Can anybody help me either use gdalwarp properly to combine the two Tiff's,
> or get gdal_merge.py to work with Tiff's larger than the amount of memory I
> have on my system?
>
> Any help is greatly appreciated!
>
> Thanks in advance,
> Aaron
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120708/644fbc2b/attachment.html>

From a1hunter at ucsd.edu  Sat Jul  7 23:38:58 2012
From: a1hunter at ucsd.edu (aphunter)
Date: Sat, 7 Jul 2012 23:38:58 -0700 (PDT)
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
Message-ID: <1341729538388-4986741.post@n6.nabble.com>

Thanks for the suggestion. Unfortunately building the .vrt file as you
suggested, and using gdal_translate, gives me the same fractured image that
gdal_warp does. I am not sure why gdal_merge.py works properly while the
others don't.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4986741.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Sun Jul  8 00:18:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun, 8 Jul 2012 12:48:14 +0530
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <1341729538388-4986741.post@n6.nabble.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
Message-ID: <CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>

Aaron,

Can you provide some info about the images?
The gdalinfo output of each dataset and, if possible, the small images.

On Sun, Jul 8, 2012 at 12:08 PM, aphunter <a1hunter at ucsd.edu> wrote:

> Thanks for the suggestion. Unfortunately building the .vrt file as you
> suggested, and using gdal_translate, gives me the same fractured image that
> gdal_warp does. I am not sure why gdal_merge.py works properly while the
> others don't.
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4986741.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120708/cbcd6622/attachment.html>

From lorenzo.moretti at enea.it  Sun Jul  8 06:58:36 2012
From: lorenzo.moretti at enea.it (Lorenzo Moretti)
Date: Sun, 8 Jul 2012 15:58:36 +0200
Subject: [gdal-dev] Dxf output wrong in gdal 1.9 and correct in gdal 1.8
Message-ID: <23D05E1A-120C-40DC-88DA-AEEF28EB8A85@enea.it>

Hi

There are some problems in gdal 1.9.1. There are errors in dxf output when I use ogr2ogr.

I have  a simple shape file with some polylines. I want to convert it in dxf file.

The same command
GDAL 1.8
ogr2ogr -f "DXF" -t_srs EPSG:3004 "/Volumes/myhd/ustgdal18.dxf" -s_srs EPSG:32633 "/Volumes/myhd/ust.shp"

GDAL 1.9.1
ogr2ogr -f "DXF" -t_srs EPSG:3004 "/Volumes/myhd/ustgdal19.dxf" -s_srs EPSG:32633 "/Volumes/myhd/ust.shp"


creates two different DXF files

The first one, in gdal 1.8, is correct. It create a perfect DXF file. The size is 59kB.
The second one, in gdal 1.9, is wrong: it lost many polylines and the size is 62kB.

I have analyzed the two dxf file.

The correct file in gdal 1.8 has the perfect attribute for polylines:

100
AcDbEntity
100
AcDbPolyline
 70
1
 90
5
 10
2420094.24101526
 20
.............


The wrong DXF file in gdal 1.9 changes the attribute for polyline with hatch attribute:

100
AcDbEntity
100
AcDbHatch
  2
SOLID
 70
1
 71
0
 91
1
 92
2
 72
0
 73
1
 93
7
 10
2420032.16360568
 20
.............


This is an error.


Is this a bug in gdal 1.9.1 ?


Lorenzo




From polimax at mail.ru  Sun Jul  8 09:40:19 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sun, 08 Jul 2012 20:40:19 +0400
Subject: [gdal-dev] Dxf output wrong in gdal 1.9 and correct in gdal 1.8
In-Reply-To: <23D05E1A-120C-40DC-88DA-AEEF28EB8A85@enea.it>
References: <23D05E1A-120C-40DC-88DA-AEEF28EB8A85@enea.it>
Message-ID: <4FF9B7F3.9060300@mail.ru>

08.07.2012 17:58, Lorenzo Moretti ?????:
> Hi
>
> There are some problems in gdal 1.9.1. There are errors in dxf output when I use ogr2ogr.
>
> I have  a simple shape file with some polylines. I want to convert it in dxf file.
>
> The same command
> GDAL 1.8
> ogr2ogr -f "DXF" -t_srs EPSG:3004 "/Volumes/myhd/ustgdal18.dxf" -s_srs EPSG:32633 "/Volumes/myhd/ust.shp"
>
> GDAL 1.9.1
> ogr2ogr -f "DXF" -t_srs EPSG:3004 "/Volumes/myhd/ustgdal19.dxf" -s_srs EPSG:32633 "/Volumes/myhd/ust.shp"
>
>
> creates two different DXF files
>
> The first one, in gdal 1.8, is correct. It create a perfect DXF file. The size is 59kB.
> The second one, in gdal 1.9, is wrong: it lost many polylines and the size is 62kB.
>
> I have analyzed the two dxf file.
>
> The correct file in gdal 1.8 has the perfect attribute for polylines:
>
> 100
> AcDbEntity
> 100
> AcDbPolyline
>   70
> 1
>   90
> 5
>   10
> 2420094.24101526
>   20
> .............
>
>
> The wrong DXF file in gdal 1.9 changes the attribute for polyline with hatch attribute:
>
> 100
> AcDbEntity
> 100
> AcDbHatch
>    2
> SOLID
>   70
> 1
>   71
> 0
>   91
> 1
>   92
> 2
>   72
> 0
>   73
> 1
>   93
> 7
>   10
> 2420032.16360568
>   20
> .............
>
>
> This is an error.
>
>
> Is this a bug in gdal 1.9.1 ?
>
>
> Lorenzo
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
I have also reported this bug: http://trac.osgeo.org/gdal/ticket/4680
You can add your investigations to this ticket

Best regards,
Dmitry

From a1hunter at ucsd.edu  Sun Jul  8 10:48:14 2012
From: a1hunter at ucsd.edu (aphunter)
Date: Sun, 8 Jul 2012 10:48:14 -0700 (PDT)
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
	<CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
Message-ID: <1341769694934-4986770.post@n6.nabble.com>

Definitely, thanks for the help. I am sort of new to this stuff. Below is the
imagery from the small images I'm testing with.

Here is the info for the reprojected image (EPSG26910 -> EPSG26911)

Driver: GTiff/GeoTIFF
Files: 26910_rs.tif
Size is 4577, 11883
Coordinate System is:
PROJCS["NAD83 / UTM zone 11N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26911"]]
Origin = (-177789.631458136136644,4942643.042761978693306)
Pixel Size = (100.253523439120713,-100.236459348383733)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( -177789.631, 4942643.043) (125d29'56.62"W, 44d19'11.15"N)
Lower Left  ( -177789.631, 3751533.196) (124d18'18.68"W, 33d41'14.38"N)
Upper Right (  281070.745, 4942643.043) (119d45'31.64"W, 44d36'13.72"N)
Lower Right (  281070.745, 3751533.196) (119d22' 1.78"W, 33d52'53.21"N)
Center      (   51640.557, 4347088.120) (122d11'16.55"W, 39d 9'26.88"N)
Band 1 Block=4577x1 Type=Byte, ColorInterp=Red
Band 2 Block=4577x1 Type=Byte, ColorInterp=Green
Band 3 Block=4577x1 Type=Byte, ColorInterp=Blue


Here is the info for the native EPSG26911 image.


PROJCS["NAD83 / UTM zone 11N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26911"]]
Origin = (222400.000000000000000,4654450.000000000000000)
Pixel Size = (100.012896094325725,-100.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  222400.000, 4654450.000) (120d21' 4.97"W, 41d59'35.32"N)
Lower Left  (  222400.000, 3595550.000) (119d57'11.96"W, 32d27'45.18"N)
Upper Right (  765270.000, 4654450.000) (113d47'50.08"W, 41d59'50.61"N)
Lower Right (  765270.000, 3595550.000) (114d10'39.77"W, 32d27'56.01"N)
Center      (  493835.000, 4125000.000) (117d 4'10.33"W, 37d16'17.60"N)
Band 1 Block=5428x1 Type=Byte, ColorInterp=Red
Band 2 Block=5428x1 Type=Byte, ColorInterp=Green
Band 3 Block=5428x1 Type=Byte, ColorInterp=Blue


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4986770.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From admin at michiganwxsystem.com  Sun Jul  8 13:01:27 2012
From: admin at michiganwxsystem.com (Jeff Lake)
Date: Sun, 08 Jul 2012 16:01:27 -0400
Subject: [gdal-dev] Problem with gdalwarp
In-Reply-To: <4FF9DC3F.40009@michiganwxsystem.com>
References: <4FF9DC3F.40009@michiganwxsystem.com>
Message-ID: <4FF9E717.3080108@michiganwxsystem.com>

I am attempting to crop a geo tiff that I reprojected ..
But I keep getting the error I cannot make an image that is 0x0

gdalinfo of the geotif

Driver: GTiff/GeoTIFF
Files: na_regionals.tif
Size is 13738, 9740
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["WGS 84",
         DATUM["unknown",
             SPHEROID["WGS84",6378137,298.257223563]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["standard_parallel_1",25],
     PARAMETER["standard_parallel_2",25],
     PARAMETER["latitude_of_origin",36.5],
     PARAMETER["central_meridian",-95],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-8824126.437603076919913,8459741.486810354515910)
Pixel Size = (1109.003596911612931,-1109.003596911612931)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-8824126.438, 8459741.487) (109d 0'29.50"E, 58d50' 2.53"N)
Lower Left  (-8824126.438,-2341953.547) (168d 6'52.48"W, 5d12'19.39"S)
Upper Right ( 6411364.977, 8459741.487) ( 43d12'43.71"E, 72d27'51.59"N)
Lower Right ( 6411364.977,-2341953.547) ( 39d23'29.30"W, 3d51'28.79"N)
Center      (-1206380.730, 3058893.970) (112d24'29.73"W, 60d35' 2.20"N)
Band 1 Block=13738x1 Type=Byte, ColorInterp=Red
Band 2 Block=13738x1 Type=Byte, ColorInterp=Green
Band 3 Block=13738x1 Type=Byte, ColorInterp=Blue


my gdalwarp command to crop
  gdalwarp -te -119.045 57.455 -73.818 10.284 na_regionals.tif 
conus_lcc.tif

and the error
Creating output file that is 0P x 0L.
ERROR 1: Attempt to create 0x0 dataset is illegal,sizes must be larger 
than zero.

what am I doing wrong
version info
GDAL 1.8.0, released 2011/01/12

-Jeff Lake
MichiganWxSystem.com
WeatherMichigan.net
TheWeatherCenter.net
GRLevelXStuff.com




From Michael.Smith at erdc.dren.mil  Sun Jul  8 13:07:14 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Sun, 8 Jul 2012 20:07:14 +0000
Subject: [gdal-dev] Problem with gdalwarp
In-Reply-To: <4FF9E717.3080108@michiganwxsystem.com>
Message-ID: <CC1F6058.2E6B5%michael.smith@erdc.dren.mil>

Jeff,

The coordinates you are using with -te are not in the coordinate system of
the image.

>From the docs

-te xmin ymin xmax ymax:set georeferenced extents of output file to be
created (in target SRS).



Convert the lat/lon coordinates you are using to the srs of the image and
then try it.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 7/8/12 4:01 PM, "Jeff Lake" <admin at michiganwxsystem.com> wrote:

>I am attempting to crop a geo tiff that I reprojected ..
>But I keep getting the error I cannot make an image that is 0x0
>
>gdalinfo of the geotif
>
>Driver: GTiff/GeoTIFF
>Files: na_regionals.tif
>Size is 13738, 9740
>Coordinate System is:
>PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["unknown",
>             SPHEROID["WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",25],
>     PARAMETER["standard_parallel_2",25],
>     PARAMETER["latitude_of_origin",36.5],
>     PARAMETER["central_meridian",-95],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
>Origin = (-8824126.437603076919913,8459741.486810354515910)
>Pixel Size = (1109.003596911612931,-1109.003596911612931)
>Metadata:
>   AREA_OR_POINT=Area
>Image Structure Metadata:
>   INTERLEAVE=PIXEL
>Corner Coordinates:
>Upper Left  (-8824126.438, 8459741.487) (109d 0'29.50"E, 58d50' 2.53"N)
>Lower Left  (-8824126.438,-2341953.547) (168d 6'52.48"W, 5d12'19.39"S)
>Upper Right ( 6411364.977, 8459741.487) ( 43d12'43.71"E, 72d27'51.59"N)
>Lower Right ( 6411364.977,-2341953.547) ( 39d23'29.30"W, 3d51'28.79"N)
>Center      (-1206380.730, 3058893.970) (112d24'29.73"W, 60d35' 2.20"N)
>Band 1 Block=13738x1 Type=Byte, ColorInterp=Red
>Band 2 Block=13738x1 Type=Byte, ColorInterp=Green
>Band 3 Block=13738x1 Type=Byte, ColorInterp=Blue
>
>
>my gdalwarp command to crop
>  gdalwarp -te -119.045 57.455 -73.818 10.284 na_regionals.tif
>conus_lcc.tif
>
>and the error
>Creating output file that is 0P x 0L.
>ERROR 1: Attempt to create 0x0 dataset is illegal,sizes must be larger
>than zero.
>
>what am I doing wrong
>version info
>GDAL 1.8.0, released 2011/01/12
>
>-Jeff Lake
>MichiganWxSystem.com
>WeatherMichigan.net
>TheWeatherCenter.net
>GRLevelXStuff.com
>
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jrepetto at free.fr  Sun Jul  8 13:09:23 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sun, 08 Jul 2012 22:09:23 +0200
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
 properly.
In-Reply-To: <1341769694934-4986770.post@n6.nabble.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
	<CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
	<1341769694934-4986770.post@n6.nabble.com>
Message-ID: <4FF9E8F3.3050908@free.fr>

On 07/08/2012 07:48 PM, aphunter wrote:
> Definitely, thanks for the help. I am sort of new to this stuff. Below is the
> imagery from the small images I'm testing with.

Hi,
Since you have reprojected one of the images, it has a black border. Try
to change the images order in the gdalwarp command.

Jean-Claude


From Shaun.Kolomeitz at derm.qld.gov.au  Sun Jul  8 18:07:06 2012
From: Shaun.Kolomeitz at derm.qld.gov.au (Kolomeitz Shaun)
Date: Mon, 9 Jul 2012 11:07:06 +1000
Subject: [gdal-dev] GDAL and Kakadu v7 SDK
Message-ID: <7C123D1355F08B4CAA31A509D24361EF0C909A5D@CHQMAIL5.lands.resnet.qg>

Does anyone happen to know how to get Kakadu v7 SDK to compile
successfully into GDAL under 64bit Debian Linux please ?

(eventually it would be great to get the GeoServer jp2k ImageIO stuff
working as well, but that's another matter)

 

The v7 SDK of Kakadu (by itself) compiles successfully.

I've followed the instructions in http://trac.osgeo.org/gdal/wiki/JP2KAK

But get the following errors -

 

jp2kakdataset.cpp: In function 'int
JP2KAKCreateCopy_WriteTile(GDALDataset*, kdu_tile&, kdu_roi_image*, int,
int, int, int, int, int, GDALDataType, kdu_codestream&, int, kdu_long*,
int, int (*)(double, const char*, void*), void*, bool)':

jp2kakdataset.cpp:1977: error: no matching function for call to
'kdu_line_buf::pre_create(kdu_sample_allocator*, int&, int&, int&)'

/home/kakadu/v7_1-01334E/coresys/common/kdu_sample_processing.h:423:
note: candidates are: void
kdu_line_buf::pre_create(kdu_sample_allocator*, int, bool, bool, int,
int)

jp2kakdataset.cpp:2090: error: no matching function for call to
'kdu_push_ifc::push(kdu_line_buf&, bool)'

/home/kakadu/v7_1-01334E/coresys/common/kdu_sample_processing.h:917:
note: candidates are: void kdu_push_ifc::push(kdu_line_buf&,
kdu_thread_env*)

/home/kakadu/v7_1-01334E/apps/jp2/jp2_shared.h: At global scope:

/home/kakadu/v7_1-01334E/apps/jp2/jp2_shared.h:825: warning: 'jp2_brand'
defined but not used

/home/kakadu/v7_1-01334E/apps/jp2/jp2_shared.h:826: warning: 'jpx_brand'
defined but not used

/home/kakadu/v7_1-01334E/apps/jp2/jp2_shared.h:827: warning:
'jpx_baseline_brand' defined but not used

/home/kakadu/v7_1-01334E/apps/jp2/jp2_shared.h:828: warning: 'mj2_brand'
defined but not used

make[2]: *** [../o/jp2kakdataset.lo] Error 1

make[2]: Leaving directory `/home/geoserver/gdal-1.8.0/frmts/jp2kak'

make[1]: *** [jp2kak-install-obj] Error 2

make[1]: Leaving directory `/home/geoserver/gdal-1.8.0/frmts'

make: *** [frmts-target] Error 2

 

Is it worth even pursuing this ?

 

Many thanks,

Shaun



------------------------------
The information in this email together with any attachments is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. There is no waiver of any confidentiality/privilege by your inadvertent receipt of this material. 
Any form of review, disclosure, modification, distribution and/or publication of this email message is prohibited, unless as a necessary part of Departmental business.
If you have received this message in error, you are asked to inform the sender as quickly as possible and delete this message and any copies of this message from your computer and/or your computer system network.
------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120709/984d9117/attachment.html>

From a1hunter at ucsd.edu  Sun Jul  8 19:19:33 2012
From: a1hunter at ucsd.edu (aphunter)
Date: Sun, 8 Jul 2012 19:19:33 -0700 (PDT)
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <4FF9E8F3.3050908@free.fr>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
	<CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
	<1341769694934-4986770.post@n6.nabble.com>
	<4FF9E8F3.3050908@free.fr>
Message-ID: <1341800373118-4986806.post@n6.nabble.com>

Hi Jean-Claude. Thanks for the idea. Unfortunately it made the split a little
larger. Is it possible to make the borders transparent, or remove them so
the blending works properly as it does in gdal_merge.py?

Thanks,
Aaron

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4986806.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Sun Jul  8 23:35:20 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 9 Jul 2012 12:05:20 +0530
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <1341800373118-4986806.post@n6.nabble.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
	<CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
	<1341769694934-4986770.post@n6.nabble.com>
	<4FF9E8F3.3050908@free.fr>
	<1341800373118-4986806.post@n6.nabble.com>
Message-ID: <CAMKgpObUX2XXdo3wMBwPkNqkiWq-CXR6JeYmQQ12u0BmsaCy0Q@mail.gmail.com>

Aaron,

This could be solved by using the nodata attribute. You can set the nodata
value in the source in the vrt file[1]. The vrt driver will ignore the
nodata areas.
If you have problem with that, rerun the gdalwarp operation and make sure
you get the nodata values.
Use the -srcnodata and -dstnodata options in gdalwarp.

[1]: http://www.gdal.org/gdal_vrttut.html

On Mon, Jul 9, 2012 at 7:49 AM, aphunter <a1hunter at ucsd.edu> wrote:

> Hi Jean-Claude. Thanks for the idea. Unfortunately it made the split a
> little
> larger. Is it possible to make the borders transparent, or remove them so
> the blending works properly as it does in gdal_merge.py?
>
> Thanks,
> Aaron
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4986806.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120709/93f228b1/attachment.html>

From even.rouault at mines-paris.org  Mon Jul  9 00:33:20 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 9 Jul 2012 09:33:20 +0200
Subject: [gdal-dev] GDAL and Kakadu v7 SDK
In-Reply-To: <7C123D1355F08B4CAA31A509D24361EF0C909A5D@CHQMAIL5.lands.resnet.qg>
References: <7C123D1355F08B4CAA31A509D24361EF0C909A5D@CHQMAIL5.lands.resnet.qg>
Message-ID: <201207090933.20728.even.rouault@mines-paris.org>

Le lundi 09 juillet 2012 03:07:06, Kolomeitz Shaun a ?crit :
> Does anyone happen to know how to get Kakadu v7 SDK to compile
> successfully into GDAL under 64bit Debian Linux please ?

Shaun,

I don't think so. Apparently there are a few changes that would be needed to 
support Kakadu v7. See http://trac.osgeo.org/gdal/ticket/4575 for some 
suggested changes (not yet committed). Otherwise, you should stick with Kakadu 
v6.x if you have it available

From ari.jolma at gmail.com  Mon Jul  9 04:19:32 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 09 Jul 2012 07:19:32 -0400
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <4FEDA05D.1000306@mapgears.com>
References: <4FEB5390.802@gmail.com> <4FEDA05D.1000306@mapgears.com>
Message-ID: <4FFABE44.3030206@gmail.com>

Folks,

I declare the motion passed (More than 2 business days, more than two +1 
from PSC members and no -1) but will proceed with the commit and other 
things like the comment below only in August as I'm on holidays + 
traveling until that.

Ari

On 06/29/2012 08:32 AM, Daniel Morissette wrote:
> On 12-06-27 2:40 PM, Ari Jolma wrote:
>> Dear GDAL PSC,
>>
>> Some time ago I and Even spent some time to work on a patch which would
>> initially implement the RFC OGR Layer Algebra. The RFC proposes new API
>> for GDAL 2.0. The RFC is at
>> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>>
>> We believe the RFC and associated patch is now ready for approval.
>>
>> I will now rise the status of the RFC from development to proposed and
>> motion to adopt it.
>>
>
> +1
>
> Note that I think some good docs and usage examples with pictures will 
> be required for dumb people like me to really understand what each 
> operator really does and how to use them. Perhaps a ref to 
> http://courses.washington.edu/gis250/lessons/Model_Builder/ might 
> help, but then it would have to be included in the API docs and not 
> just in the RFC.
>



From robert.zermeno at navy.mil  Mon Jul  9 10:11:24 2012
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Mon, 9 Jul 2012 10:11:24 -0700
Subject: [gdal-dev] GDAL and Kakadu for MSVC2010 Building error
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA910846F1D7@nawechlkez02v.nadsuswe.nads.navy.mil>

Ladies and Gents,

I am upgrading my DLLs to all compile with the same CRT and trying to get GDAL to build with Kakadu for MSVC2010.  I have the latest GDAL SVN (7-8-2012) and kakadu v5.2.6.0 (I know it is older, but it works).  
I had to use MSVC2010 to update kakadu MSVC2005 and able to successfully build in both debug/release.

I am able to add kakadu to GDAL successfully in release mode, but always get an access violation error (MSVC brings up a malloc file) when performing a simple GDALOpen("jpip://ipAddress/file.jp2").  I want to see what problems are within GDAL but I need to have a debug version. 

Each time I try to add kakadu to GDAL in debug mode, I always get this type of error message:

Error LNK2038:mismatch detected for '_ITERATOR_DEBUG_LEVEL':value '0' doesn't match value '2' in cplkeywordparser.obj.
For files args.obj, palette.obj, and roi_sources.obj

Has anyone encountered this problem?  When I google online, people indicate it is a simple MSVC project upgrade problem when ITERATOR_DEBUG_LEVEL is not set.  It is recommended to not use _SECURE_SCL and _HAS_ITERATOR_DEBUGGING.  When I build kakadu coresys (which generates kdu_v52R.dll) and all the required .obj files in apps projects, I add a preprocessor of ITERATOR_DEBUG_LEVEL=2

However, I still get the error when compiling both kakadu and GDAL.  Any suggestions you might recommend?

Thanks,
Bob


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5695 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120709/c711a508/attachment.bin>

From mateusz at loskot.net  Mon Jul  9 10:37:44 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 9 Jul 2012 18:37:44 +0100
Subject: [gdal-dev] GDAL and Kakadu for MSVC2010 Building error
In-Reply-To: <F8A8A114E3F41D4D9157F1BECCA3BA910846F1D7@nawechlkez02v.nadsuswe.nads.navy.mil>
References: <F8A8A114E3F41D4D9157F1BECCA3BA910846F1D7@nawechlkez02v.nadsuswe.nads.navy.mil>
Message-ID: <CABUeae8J3tC=xry4mYduLBv20CcGOoZ5XdOe2A_Smn0X-fK0bQ@mail.gmail.com>

On 9 July 2012 18:11, Zermeno, Robert J CIV NAVAIR, 472100D
<robert.zermeno at navy.mil> wrote:
> I am able to add kakadu to GDAL successfully in release mode, but always get an
> access violation error (MSVC brings up a malloc file) when performing a simple GDALOpen("jpip://ipAddress/file.jp2").
> I want to see what problems are within GDAL but I need to have a debug version.
>
> Each time I try to add kakadu to GDAL in debug mode, I always get this type of error message:
>
> Error LNK2038:mismatch detected for '_ITERATOR_DEBUG_LEVEL':value '0' doesn't match value '2' in cplkeywordparser.obj.
> For files args.obj, palette.obj, and roi_sources.obj
>
> Has anyone encountered this problem?

http://trac.osgeo.org/gdal/ticket/4291
http://trac.osgeo.org/gdal/ticket/3346

-- 
Mateusz Loskot, http://mateusz.loskot.net

From cnieman at dmsolutions.ca  Mon Jul  9 11:03:50 2012
From: cnieman at dmsolutions.ca (Christy Nieman)
Date: Mon, 09 Jul 2012 14:03:50 -0400
Subject: [gdal-dev] Label from OGR Style in a VRT output over a tiff in a
 geospatial PDF
Message-ID: <4FFB1D06.6090803@dmsolutions.ca>

Hello,

I'm trying to overlay vectors in a PDF with a geoTIFF as the backdrop 
with GDAL compiled from trunk last Friday.  I had no problem adding a 
point layer and a polygon layer to a VRT and giving them 
colours/symbols/outlines.  But I tried adding labels to the point layer 
by specifying the field containing the label text, and all that gets 
displayed for text is {NAME}.  VRT definition:

<OGRVRTDataSource>

<OGRVRTLayer name="countries">
<SrcDataSource>/mnt/data/naturalearth/ne_10m_admin_0_countries.shp</SrcDataSource> 

<GeometryType>wkbMultiPolygon</GeometryType>
<LayerSRS>WGS84</LayerSRS>
<SrcSQL>SELECT *,'BRUSH(fc:#367C23);PEN(c:#B7B7B7,w:1px)' AS OGR_STYLE 
FROM ne_10m_admin_0_countries</SrcSQL>
</OGRVRTLayer>

<OGRVRTLayer name="cities">
<SrcDataSource>/mnt/data/naturalearth/110m-populated-places-simple/ne_110m_populated_places_simple.shp</SrcDataSource> 

<GeometryType>wkbPoint</GeometryType>
<LayerSRS>WGS84</LayerSRS>
<SrcSQL>SELECT 
*,'SYMBOL(c:#0000FF,id:ogr-sym-9;s:9px);LABEL(s:40pt,t:{NAME})' AS 
OGR_STYLE FROM ne_110m_populated_places_simple</SrcSQL>
</OGRVRTLayer>

</OGRVRTDataSource>

 From what I understand, LABEL(s:40pt,t:{NAME}) should use the NAME 
attribute field for the labels, but it is using "{NAME}" as the text.

Could someone point me in the right direction?

Thanks,
Christy


From even.rouault at mines-paris.org  Mon Jul  9 11:26:12 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 9 Jul 2012 20:26:12 +0200
Subject: [gdal-dev] Label from OGR Style in a VRT output over a tiff in
	a geospatial PDF
In-Reply-To: <4FFB1D06.6090803@dmsolutions.ca>
References: <4FFB1D06.6090803@dmsolutions.ca>
Message-ID: <201207092026.12171.even.rouault@mines-paris.org>

>  From what I understand, LABEL(s:40pt,t:{NAME}) should use the NAME
> attribute field for the labels, but it is using "{NAME}" as the text.

Good catch. Support for that syntax was actually missing. I've just added it 
in r24665

From jukka.rahkonen at mmmtike.fi  Mon Jul  9 12:39:05 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 9 Jul 2012 19:39:05 +0000 (UTC)
Subject: [gdal-dev] Rasterlite and external overviews
Message-ID: <loom.20120709T212553-209@post.gmane.org>

Hi,

Unfortunately the nearest neighbour sampling of internal overviews of 
Rasterlite tables yields pretty poor quality and no other sampling methods 
are supported.
While trying external overviews I found two troubles. First one is that 
it isimpossible to build external overviews if there has been internal 
overviews in the table. Removing them with "gdaladdo -clean" does not 
help, the message is still:
ERROR 6: Cannot add external overviews to a dataset with internal overviews
Overview building failed.
Another problem is not big. Gdaladdo just gives a faulty error message 
first but it still creates external overviews. This is what gets printed
on the screen:

gdaladdo -ro RASTERLITE:addotest3.sqlite,table=t8000 2 4 8
ERROR 4: `addotest3.sqlite_t8000' does not exist in the file system,
and is not recognised as a supported dataset name.

0...10...20...30...40...50...60...70...80...90...100 - done.

It would be really good to have at least average method also for 
internal overviews.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Mon Jul  9 13:04:49 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 9 Jul 2012 22:04:49 +0200
Subject: [gdal-dev] Rasterlite and external overviews
In-Reply-To: <loom.20120709T212553-209@post.gmane.org>
References: <loom.20120709T212553-209@post.gmane.org>
Message-ID: <201207092204.49520.even.rouault@mines-paris.org>

> While trying external overviews I found two troubles. First one is that
> it isimpossible to build external overviews if there has been internal
> overviews in the table. Removing them with "gdaladdo -clean" does not
> help, the message is still:
> ERROR 6: Cannot add external overviews to a dataset with internal overviews
> Overview building failed.

I don't reproduce that. Did you check with gdalinfo that the internal overview 
was properly cleaned ?

> Another problem is not big. Gdaladdo just gives a faulty error message
> first but it still creates external overviews. This is what gets printed
> on the screen:
> 
> gdaladdo -ro RASTERLITE:addotest3.sqlite,table=t8000 2 4 8
> ERROR 4: `addotest3.sqlite_t8000' does not exist in the file system,
> and is not recognised as a supported dataset name.

ok, I've just fixed that.

> 
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> It would be really good to have at least average method also for
> internal overviews.

Thinking about it again, this might be doable with modest code addition in the 
driver. Please file a ticket about that.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Jukka.Rahkonen at mmmtike.fi  Mon Jul  9 14:45:48 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon, 9 Jul 2012 21:45:48 +0000
Subject: [gdal-dev] Rasterlite and external overviews
In-Reply-To: <201207092204.49520.even.rouault@mines-paris.org>
References: <loom.20120709T212553-209@post.gmane.org>,
	<201207092204.49520.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345B949@suutari.haapa.mmm.fi>

Even Rouault wrote:

>> While trying external overviews I found two troubles. First one is that
>> it isimpossible to build external overviews if there has been internal
>> overviews in the table. Removing them with "gdaladdo -clean" does not
>> help, the message is still:
>> ERROR 6: Cannot add external overviews to a dataset with internal overviews
>> Overview building failed.

> I don't reproduce that. Did you check with gdalinfo that the internal overview
> was properly cleaned ?

Works fo me too now when doing test in a controlled way. Perhaps the database was locked by another software and internal overviews were not cleaned.

...
>>
>> It would be really good to have at least average method also for
>> internal overviews.

> Thinking about it again, this might be doable with modest code addition in the
> driver. Please file a ticket about that.

Filed as #4740.

-Jukka Rahkonen-

From cnieman at dmsolutions.ca  Mon Jul  9 15:49:27 2012
From: cnieman at dmsolutions.ca (Christy Nieman)
Date: Mon, 9 Jul 2012 18:49:27 -0400
Subject: [gdal-dev] Label from OGR Style in a VRT output over a tiff in
	a geospatial PDF
In-Reply-To: <201207092026.12171.even.rouault@mines-paris.org>
References: <4FFB1D06.6090803@dmsolutions.ca>
	<201207092026.12171.even.rouault@mines-paris.org>
Message-ID: <C945FEC3-2F5F-43C2-A2B0-344F4EA07DB5@dmsolutions.ca>

Thanks Even.  Did a quick test and it looks good!

On 2012-07-09, at 2:26 PM, Even Rouault wrote:

>> From what I understand, LABEL(s:40pt,t:{NAME}) should use the NAME
>> attribute field for the labels, but it is using "{NAME}" as the text.
> 
> Good catch. Support for that syntax was actually missing. I've just added it 
> in r24665


From cnieman at dmsolutions.ca  Mon Jul  9 16:10:04 2012
From: cnieman at dmsolutions.ca (Christy Nieman)
Date: Mon, 9 Jul 2012 19:10:04 -0400
Subject: [gdal-dev] Label from OGR Style in a VRT output over a tiff in
	a geospatial PDF
In-Reply-To: <C945FEC3-2F5F-43C2-A2B0-344F4EA07DB5@dmsolutions.ca>
References: <4FFB1D06.6090803@dmsolutions.ca>
	<201207092026.12171.even.rouault@mines-paris.org>
	<C945FEC3-2F5F-43C2-A2B0-344F4EA07DB5@dmsolutions.ca>
Message-ID: <0D2140AB-0038-4D8C-B3AA-01E7A7024064@dmsolutions.ca>

It seems that there are other features from http://www.gdal.org/ogr/ogr_feature_style.html that don't work (e.g. offsetting a label from the label point, using the pre-defined pen styles).  Is everything supposedly implemented and the ones I've found were accidentally missed?  Or is it still a work in progress (i.e should I file a bug with the style elements I can't get to work in my PDF tests, or wait for awhile)?


On 2012-07-09, at 6:49 PM, Christy Nieman wrote:

> Thanks Even.  Did a quick test and it looks good!
> 
> On 2012-07-09, at 2:26 PM, Even Rouault wrote:
> 
>>> From what I understand, LABEL(s:40pt,t:{NAME}) should use the NAME
>>> attribute field for the labels, but it is using "{NAME}" as the text.
>> 
>> Good catch. Support for that syntax was actually missing. I've just added it 
>> in r24665
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Tom_Roche at pobox.com  Mon Jul  9 16:16:29 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Mon, 09 Jul 2012 19:16:29 -0400
Subject: [gdal-dev] [newbie] regridding netCDF
Message-ID: <87obnowmnm.fsf@pobox.com>


summary: new user with limited geoinformatic background (including
jargon familiarity) wants to know if any of the GDAL tools (e.g.,
gdaltransform) can "regrid" netCDF data, such that data attributed to
each gridcell in a source dataset at a given {projection, resolution}
tuple is appropriately allocated to each gridcell in a target dataset
at a different {projection, resolution}. If so, please give or point
to an example.

details:

I'd appreciate advice suitability of GDAL tools for transforming values
contained in one 2-d netCDF spatial grid in one {projection, resolution}
to another, or pointers to other resources to consult. I see GDAL
supports netCDF as a "raster format"

http://gdal.org/formats_list.html

but don't know if the following counts as "image processing" (which is
what I tend to associate GDAL with), or if that matters. Further
apologies in advance if the following is too verbose (I'm guessing this
is a common usecase--or hoping :-) or uses the wrong vocabulary (please
correct where needed), but here's what I mean:

I want to take emissions of gaseous N2O from various sources in the
contiguous US (CONUS) and input them to a particular atmospheric model
(CMAQ). My group has other inputs (notably, meteorology) for our
usecase on a 12 km x 12 km Lambert conformal conic (LCC) grid, and the
model wants everything in one format, so I need to get our N2O
emissions on that 12x12 LCC. However, most of my N2O emissions will be
coming from global inventories (EDGAR, GEIA, GFED), which are all
gridded lat-lon, but at differing resolutions (e.g., 0.1x0.1?). So
I need to "regrid" the latter emissions, such that the mass emitted in
each lat-lon gridcell in the source dataset is appropriately
attributed (probably by spatial averaging) to one or more gridcells in
the 12-km LCC target dataset (the extents of which are a subset of the
global source dataset).

How to do programmatically (driven by bash, python, R) on linux?

Your coding recommendations are appreciated, as would be pointers to
helpful resources, esp example code. TIA, and feel free to forward,
Tom Roche <Tom_Roche at pobox.com>

From etourigny.dev at gmail.com  Mon Jul  9 19:01:35 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 9 Jul 2012 23:01:35 -0300
Subject: [gdal-dev] [newbie] regridding netCDF
In-Reply-To: <87obnowmnm.fsf@pobox.com>
References: <87obnowmnm.fsf@pobox.com>
Message-ID: <CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>

Tom,

gdaltransform is for transforming individual points, not entire datasets

What you want to achieve can be done with the gdalwarp command-line
tool [1] . See [2] and [3] for more information regarding netcdf
support in gdal.

You will need gdal version 1.9 to work properly with netcdf files
(especially to use gdalwarp).

If your other files are in the LCC projection, I assume they conform
to the CF conventions [4] [5], which the gdal netcdf driver supports.

You can get information on the target projection with 'ncdump -h
file.nc' and 'gdalinfo file.nc' and 'gdalsrsinfo file.nc'


I cannot think of good documentation, but here are some pointers:

In a nutshell here is the command you would use:

gdalwarp -t_srs srs_def -te xmin ymin xmax ymax -tr 12000 12000
source.nc dest.nc

The -te parameters depend on the extents of the files you need to
match with, you can find them with 'gdalinfo file.nc' (on an existing
file with desired projection).

The -t_srs  parameter describes the LCC projection you want. To get
it, try 'gdalsrsinfo -o proj4 file.nc' . You should get something
similar to (but with different params):
'+proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=263 +x_0=0 +y_0=0
+a=6371200 +b=6371200 +units=km +no_defs '

The -tr parameters are the resolution of the target file (in your case 12000 m).


If you have further questions post them here.
Etienne

[1] http://www.gdal.org/gdalwarp.html
[2] http://www.gdal.org/frmt_netcdf.html
[3] http://trac.osgeo.org/gdal/wiki/NetCDF
[4] http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html
[5] http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#lambert-conformal-projection



On Mon, Jul 9, 2012 at 8:16 PM, Tom Roche <Tom_Roche at pobox.com> wrote:
>
> summary: new user with limited geoinformatic background (including
> jargon familiarity) wants to know if any of the GDAL tools (e.g.,
> gdaltransform) can "regrid" netCDF data, such that data attributed to
> each gridcell in a source dataset at a given {projection, resolution}
> tuple is appropriately allocated to each gridcell in a target dataset
> at a different {projection, resolution}. If so, please give or point
> to an example.
>
> details:
>
> I'd appreciate advice suitability of GDAL tools for transforming values
> contained in one 2-d netCDF spatial grid in one {projection, resolution}
> to another, or pointers to other resources to consult. I see GDAL
> supports netCDF as a "raster format"
>
> http://gdal.org/formats_list.html
>
> but don't know if the following counts as "image processing" (which is
> what I tend to associate GDAL with), or if that matters. Further
> apologies in advance if the following is too verbose (I'm guessing this
> is a common usecase--or hoping :-) or uses the wrong vocabulary (please
> correct where needed), but here's what I mean:
>
> I want to take emissions of gaseous N2O from various sources in the
> contiguous US (CONUS) and input them to a particular atmospheric model
> (CMAQ). My group has other inputs (notably, meteorology) for our
> usecase on a 12 km x 12 km Lambert conformal conic (LCC) grid, and the
> model wants everything in one format, so I need to get our N2O
> emissions on that 12x12 LCC. However, most of my N2O emissions will be
> coming from global inventories (EDGAR, GEIA, GFED), which are all
> gridded lat-lon, but at differing resolutions (e.g., 0.1x0.1?). So
> I need to "regrid" the latter emissions, such that the mass emitted in
> each lat-lon gridcell in the source dataset is appropriately
> attributed (probably by spatial averaging) to one or more gridcells in
> the 12-km LCC target dataset (the extents of which are a subset of the
> global source dataset).
>
> How to do programmatically (driven by bash, python, R) on linux?
>
> Your coding recommendations are appreciated, as would be pointers to
> helpful resources, esp example code. TIA, and feel free to forward,
> Tom Roche <Tom_Roche at pobox.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Shaun.Kolomeitz at derm.qld.gov.au  Mon Jul  9 21:41:48 2012
From: Shaun.Kolomeitz at derm.qld.gov.au (Kolomeitz Shaun)
Date: Tue, 10 Jul 2012 14:41:48 +1000
Subject: [gdal-dev] GDAL and Kakadu v7 SDK
In-Reply-To: <201207090933.20728.even.rouault@mines-paris.org>
References: <7C123D1355F08B4CAA31A509D24361EF0C909A5D@CHQMAIL5.lands.resnet.qg>
	<201207090933.20728.even.rouault@mines-paris.org>
Message-ID: <7C123D1355F08B4CAA31A509D24361EF0C98D1CA@CHQMAIL5.lands.resnet.qg>

Thanks Even,

Much appreciated.
That seems to have worked (although not thoroughly tested), at least for GDAL-2x.
We have v7 of the Kakadu SDK and I will persevere with this version and look at the JNI bindings now and the geoserver imageIO extension.

Kind regards,
Shaun

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Monday, 9 July 2012 5:33 PM
To: gdal-dev at lists.osgeo.org
Cc: Kolomeitz Shaun
Subject: Re: [gdal-dev] GDAL and Kakadu v7 SDK

Le lundi 09 juillet 2012 03:07:06, Kolomeitz Shaun a ?crit :
> Does anyone happen to know how to get Kakadu v7 SDK to compile 
> successfully into GDAL under 64bit Debian Linux please ?

Shaun,

I don't think so. Apparently there are a few changes that would be needed to support Kakadu v7. See http://trac.osgeo.org/gdal/ticket/4575 for some suggested changes (not yet committed). Otherwise, you should stick with Kakadu v6.x if you have it available


------------------------------
The information in this email together with any attachments is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. There is no waiver of any confidentiality/privilege by your inadvertent receipt of this material. 
Any form of review, disclosure, modification, distribution and/or publication of this email message is prohibited, unless as a necessary part of Departmental business.
If you have received this message in error, you are asked to inform the sender as quickly as possible and delete this message and any copies of this message from your computer and/or your computer system network.
------------------------------


From even.rouault at mines-paris.org  Mon Jul  9 23:20:47 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 10 Jul 2012 08:20:47 +0200
Subject: [gdal-dev] Label from OGR Style in a VRT output over a tiff in
	a geospatial PDF
In-Reply-To: <0D2140AB-0038-4D8C-B3AA-01E7A7024064@dmsolutions.ca>
References: <4FFB1D06.6090803@dmsolutions.ca>
	<C945FEC3-2F5F-43C2-A2B0-344F4EA07DB5@dmsolutions.ca>
	<0D2140AB-0038-4D8C-B3AA-01E7A7024064@dmsolutions.ca>
Message-ID: <201207100820.47286.even.rouault@mines-paris.org>

Le mardi 10 juillet 2012 01:10:04, Christy Nieman a ?crit :
> It seems that there are other features from
> http://www.gdal.org/ogr/ogr_feature_style.html that don't work (e.g.
> offsetting a label from the label point, using the pre-defined pen
> styles).  Is everything supposedly implemented and the ones I've found
> were accidentally missed?

http://gdal.org/ogr/drv_pdf.html lists the subset of the OGR Feature Style 
spec that is currently implemented by the PDF driver.

I believe that you should be able to workaround the lack of support of pre-
defined pens, by defining a pattern ('p' parameter) that should be supported.

> Or is it still a work in progress (i.e should I
> file a bug with the style elements I can't get to work in my PDF tests, or
> wait for awhile)?

I don't actively work on it anymore for now. Contributions under the form of 
patches ( hint: edit GDALPDFWriter::WriteOGRFeature() in  
frmts/pdf/pdfcreatecopy.cpp ) kindly welcome, or if you can identify a 
reasonable extra subset of the OGR FeatureStyle spec that would be interesting 
to add, you can create a ticket. At first sight, dx and dy for labels and/or 
symbols should be reasonably easy to implement.

From a.neumann at carto.net  Tue Jul 10 02:46:22 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 10 Jul 2012 11:46:22 +0200
Subject: [gdal-dev] Open DXF issues when writing
Message-ID: <766b0295f332045264b557d47c9e7241@carto.net>

 Hi,

 The current ogr version seems to be quite broken when it comes to 
 writing DXF files.

 See bug report at:

 http://trac.osgeo.org/gdal/ticket/4680 (Invalid DXF files)

 and maillist threads:
 http://lists.osgeo.org/pipermail/gdal-dev/2012-July/033334.html
 und
 http://lists.osgeo.org/pipermail/gdal-dev/2012-June/033036.html

 I wonder if someone would be able to fix these problems?

 Thank you for your reply if this can be fixed with a reasonable effort 
 or with an estimate how much it would cost.

 Andreas

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From cnieman at dmsolutions.ca  Tue Jul 10 06:17:40 2012
From: cnieman at dmsolutions.ca (Christy Nieman)
Date: Tue, 10 Jul 2012 09:17:40 -0400
Subject: [gdal-dev] Label from OGR Style in a VRT output over a tiff in
 a geospatial PDF
In-Reply-To: <201207100820.47286.even.rouault@mines-paris.org>
References: <4FFB1D06.6090803@dmsolutions.ca>
	<C945FEC3-2F5F-43C2-A2B0-344F4EA07DB5@dmsolutions.ca>
	<0D2140AB-0038-4D8C-B3AA-01E7A7024064@dmsolutions.ca>
	<201207100820.47286.even.rouault@mines-paris.org>
Message-ID: <4FFC2B74.8010303@dmsolutions.ca>

Thanks for the info.  I'll see what features I think would be useful and 
see if I can come up with patches.

Christy

On 07/10/2012 02:20 AM, Even Rouault wrote:
> Le mardi 10 juillet 2012 01:10:04, Christy Nieman a ?crit :
>> It seems that there are other features from
>> http://www.gdal.org/ogr/ogr_feature_style.html that don't work (e.g.
>> offsetting a label from the label point, using the pre-defined pen
>> styles).  Is everything supposedly implemented and the ones I've found
>> were accidentally missed?
> http://gdal.org/ogr/drv_pdf.html lists the subset of the OGR Feature Style
> spec that is currently implemented by the PDF driver.
>
> I believe that you should be able to workaround the lack of support of pre-
> defined pens, by defining a pattern ('p' parameter) that should be supported.
>
>> Or is it still a work in progress (i.e should I
>> file a bug with the style elements I can't get to work in my PDF tests, or
>> wait for awhile)?
> I don't actively work on it anymore for now. Contributions under the form of
> patches ( hint: edit GDALPDFWriter::WriteOGRFeature() in
> frmts/pdf/pdfcreatecopy.cpp ) kindly welcome, or if you can identify a
> reasonable extra subset of the OGR FeatureStyle spec that would be interesting
> to add, you can create a ticket. At first sight, dx and dy for labels and/or
> symbols should be reasonably easy to implement.



From Patrick.Lynn at Colorado.EDU  Tue Jul 10 07:44:00 2012
From: Patrick.Lynn at Colorado.EDU (Patrick Lynn)
Date: Tue, 10 Jul 2012 08:44:00 -0600
Subject: [gdal-dev] ESRI's Mercator_Auxiliary_Sphere projection
Message-ID: <4FFC3FB0.20900@colorado.edu>

My application uses the GDAL & OGR libraries to load maps containing projection
metadata. As part of testing, I tried to load a GeoTIFF image exported from ESRI's
ArcMap 10.0 using the default coordinate system, the resulting OGRSpatialReference
does not validate successfully. Is there a way to get this to work?

Here is the output from gdalsrsinfo for such a dataset:

> ERROR 6: No translation for Mercator_Auxiliary_Sphere to PROJ.4 format is known.
>
> Validate Fails - contains non-standard PROJECTION[] values
>
> PROJ.4 : ''
>
> OGC WKT :
> PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",
>     GEOGCS["GCS_WGS_1984",
>         DATUM["D_WGS_1984",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Mercator_Auxiliary_Sphere"],
>     PARAMETER["False_Easting",0.0],
>     PARAMETER["False_Northing",0.0],
>     PARAMETER["Central_Meridian",0.0],
>     PARAMETER["Standard_Parallel_1",0.0],
>     PARAMETER["Auxiliary_Sphere_Type",0.0],
>     UNIT["Meter",1.0]]

It is quite possible that my application is not finding the appropriate
data files, but I didn't want to spend too much time investigating if this
projection is not yet supported.  I did notice that the defect described at
http://trac.osgeo.org/gdal/ticket/3962 has not been resolved, and then there's
the absence of an AUTHORITY clause in the WKT, so I'm thinking maybe this isn't
even doable.

Patrick

From joe.lyga at vcoresolutions.com  Tue Jul 10 09:53:44 2012
From: joe.lyga at vcoresolutions.com (Joe Lyga)
Date: Tue, 10 Jul 2012 12:53:44 -0400
Subject: [gdal-dev] reading compressed data?
Message-ID: <4FFC5E18.6080609@vcoresolutions.com>

I'm new to GDAL, and I'm wondering if there's a way I can get the buffer 
of raw compressed image data.  I have an NITF file that contains a jpeg 
image.  I've been able to use the rasterio function to get uncompressed 
image data, but what I really need is to just send along that jpeg image 
without the NITF wrapping.  Is there a funciton to give me just raw 
compressed image data?  Thanks.
-- 

Joe Lyga
Software Engineer
Balfour Technologies LLC and VCORE Solutions LLC
Morrelly Homeland Security Center
510 Grumman Road West, Suite 212, Bethpage NY 11714
Phone: (516) 513-0030
/"Innovations in Mission Critical Visualization with fourDscape?"/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120710/0090c22a/attachment.html>

From even.rouault at mines-paris.org  Tue Jul 10 10:23:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 10 Jul 2012 19:23:31 +0200
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf files
Message-ID: <201207101923.32027.even.rouault@mines-paris.org>

Hi,

Following the recent brainstorming with Jukka, I've pushed into trunk a driver 
to read OpenStreetMap .osm / .pbf files .

No particularly exotic dependencies : SQLite (and Expat for OSM XML files)

See http://www.gdal.org/ogr/drv_osm.html for the details (will be available in 
a few hours).

The performance to convert 
http://download.geofabrik.de/osm/europe/finland.osm.pbf into a Spatialite DB is 
the following one on my PC (Core i5 @ 2.67 GHz with 64bit GDAL) :

$ time ogr2ogr finland.sqlite finland.osm.pbf -f SQLite -dsco SPATIALITE=YES -gt 
10000 -progress --config OGR_SQLITE_SYNCHRONOUS OFF

real    4m31.194s
user    3m33.020s
sys 0m46.070s

Testing with larger areas, like whole France or Europe, shows sluggish 
performance when ways are built from nodes, but that's perhaps expected. I 
didn't compare with other tools to know if the indexing or request strategy is 
particularly bad.

The data/osmconf.ini configuration file is pretty basic and its settings could 
likely be improved with some tweaking. Contributions welcome.

An improved version of the driver could allow specifying custom layers, 
instead of the 4 fixed ones.

Happy testing,

Even

From even.rouault at mines-paris.org  Tue Jul 10 10:45:48 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 10 Jul 2012 19:45:48 +0200
Subject: [gdal-dev] reading compressed data?
In-Reply-To: <4FFC5E18.6080609@vcoresolutions.com>
References: <4FFC5E18.6080609@vcoresolutions.com>
Message-ID: <201207101945.49549.even.rouault@mines-paris.org>

Le mardi 10 juillet 2012 18:53:44, Joe Lyga a ?crit :
> I'm new to GDAL, and I'm wondering if there's a way I can get the buffer
> of raw compressed image data.  I have an NITF file that contains a jpeg
> image.  I've been able to use the rasterio function to get uncompressed
> image data, but what I really need is to just send along that jpeg image
> without the NITF wrapping.  Is there a funciton to give me just raw
> compressed image data?  Thanks.

Joe,

No, there's no function to do that. However, you can find some hints with 
running gdalinfo with debugging :

$ gdalinfo byte_jpg.ntf --debug on
GDAL: NITFDataset::Open() as IC=C3 (JPEG compressed)

JPG: real_filename byte_jpg.ntf, offset=907, size=519

GDAL: GDALOpen(JPEG_SUBFILE:Q0,907,519,byte_jpg.ntf, this=0x204ce00) succeeds 
as JPEG.
GDAL: GDALOpen(byte_jpg.ntf, this=0x204c770) succeeds as NITF.

[...]

This reveals that there is a JPEG stream starting at offset 907 and of length 
519 bytes.

Which can be verified with :

$ gdalinfo /vsisubfile/907_519,byte_jpg.ntf -checksum
Driver: JPEG/JPEG JFIF
Files: /vsisubfile/907_519,byte_jpg.ntf
Size is 20, 20
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   20.0)
Upper Right (   20.0,    0.0)
Lower Right (   20.0,   20.0)
Center      (   10.0,   10.0)
Band 1 Block=20x1 Type=Byte, ColorInterp=Gray
  Checksum=4743
  Image Structure Metadata:
    COMPRESSION=JPEG

Then, using the 
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/gdal_cp.py 
script :

$ python swig/python/samples/gdal_cp.py /vsisubfile/907_519,byte_jpg.ntf 
jpeg_stream_extracted.jpg

or more simply if your are on Linux :

$ dd if=byte_jpg.ntf of=jpeg_stream_extracted.jpg skip=907 count=519 bs=1

Then :

$ gdalinfo jpeg_stream_extracted.jpg -checksum
Driver: JPEG/JPEG JFIF
Files: jpeg_stream_extracted.jpg
Size is 20, 20
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   20.0)
Upper Right (   20.0,    0.0)
Lower Right (   20.0,   20.0)
Center      (   10.0,   10.0)
Band 1 Block=20x1 Type=Byte, ColorInterp=Gray
  Checksum=4743
  Image Structure Metadata:
    COMPRESSION=JPEG

The above will work with IC=C3 compressed NITF files. For IC=M3, as you have 
several tiles, it will be a bit more complicated.

From joe.lyga at vcoresolutions.com  Tue Jul 10 11:51:14 2012
From: joe.lyga at vcoresolutions.com (Joe Lyga)
Date: Tue, 10 Jul 2012 14:51:14 -0400
Subject: [gdal-dev] reading compressed data?
In-Reply-To: <201207101945.49549.even.rouault@mines-paris.org>
References: <4FFC5E18.6080609@vcoresolutions.com>
	<201207101945.49549.even.rouault@mines-paris.org>
Message-ID: <4FFC79A2.80703@vcoresolutions.com>

Thanks for the info.  I probably should have mentioned that I'm working 
in C++ on windows by the way.  I'm working with NITF images that are 
simply wrapped jpegs that are in one piece.  For now, I just need to 
read the NITF file and send the jpeg image data over the network.  
Temporarily, I'm just going to use the CreateCopy function to copy the 
image data to a jpeg file, then re-read it into my program then send it 
over the network.

Joe Lyga
Software Engineer
Balfour Technologies LLC and VCORE Solutions LLC
Morrelly Homeland Security Center
510 Grumman Road West, Suite 212, Bethpage NY 11714
Phone: (516) 513-0030
/"Innovations in Mission Critical Visualization with fourDscape?"/
On 7/10/2012 1:45 PM, Even Rouault wrote:
> Le mardi 10 juillet 2012 18:53:44, Joe Lyga a ?crit :
>> I'm new to GDAL, and I'm wondering if there's a way I can get the buffer
>> of raw compressed image data.  I have an NITF file that contains a jpeg
>> image.  I've been able to use the rasterio function to get uncompressed
>> image data, but what I really need is to just send along that jpeg image
>> without the NITF wrapping.  Is there a funciton to give me just raw
>> compressed image data?  Thanks.
> Joe,
>
> No, there's no function to do that. However, you can find some hints with
> running gdalinfo with debugging :
>
> $ gdalinfo byte_jpg.ntf --debug on
> GDAL: NITFDataset::Open() as IC=C3 (JPEG compressed)
>
> JPG: real_filename byte_jpg.ntf, offset=907, size=519
>
> GDAL: GDALOpen(JPEG_SUBFILE:Q0,907,519,byte_jpg.ntf, this=0x204ce00) succeeds
> as JPEG.
> GDAL: GDALOpen(byte_jpg.ntf, this=0x204c770) succeeds as NITF.
>
> [...]
>
> This reveals that there is a JPEG stream starting at offset 907 and of length
> 519 bytes.
>
> Which can be verified with :
>
> $ gdalinfo /vsisubfile/907_519,byte_jpg.ntf -checksum
> Driver: JPEG/JPEG JFIF
> Files: /vsisubfile/907_519,byte_jpg.ntf
> Size is 20, 20
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   20.0)
> Upper Right (   20.0,    0.0)
> Lower Right (   20.0,   20.0)
> Center      (   10.0,   10.0)
> Band 1 Block=20x1 Type=Byte, ColorInterp=Gray
>    Checksum=4743
>    Image Structure Metadata:
>      COMPRESSION=JPEG
>
> Then, using the
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/gdal_cp.py
> script :
>
> $ python swig/python/samples/gdal_cp.py /vsisubfile/907_519,byte_jpg.ntf
> jpeg_stream_extracted.jpg
>
> or more simply if your are on Linux :
>
> $ dd if=byte_jpg.ntf of=jpeg_stream_extracted.jpg skip=907 count=519 bs=1
>
> Then :
>
> $ gdalinfo jpeg_stream_extracted.jpg -checksum
> Driver: JPEG/JPEG JFIF
> Files: jpeg_stream_extracted.jpg
> Size is 20, 20
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   20.0)
> Upper Right (   20.0,    0.0)
> Lower Right (   20.0,   20.0)
> Center      (   10.0,   10.0)
> Band 1 Block=20x1 Type=Byte, ColorInterp=Gray
>    Checksum=4743
>    Image Structure Metadata:
>      COMPRESSION=JPEG
>
> The above will work with IC=C3 compressed NITF files. For IC=M3, as you have
> several tiles, it will be a bit more complicated.
>
>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120710/460f3258/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Tue Jul 10 13:04:52 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 10 Jul 2012 17:04:52 -0300
Subject: [gdal-dev] Basic OpenStreetMap driver with ReadOSM?
In-Reply-To: <84446DEF76453C439E9E97E438E13A6345B62B@suutari.haapa.mmm.fi>
References: <loom.20120707T085929-639@post.gmane.org>,
	<201207071201.10169.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6345B62B@suutari.haapa.mmm.fi>
Message-ID: <4FFC8AE4.9050609@gatewaygeomatics.com>

On 12-07-07 8:14 AM, Rahkonen Jukka wrote:
> Osm2pgsql outputs only to PostGIS and even PostGIS is super fine I consider that the threshold in installing and managing it is too high for many users. In addition, there has been only two Windows builds of osm2pgsql available ever and the latter one is more than two years old. ImpOsm is impossible to make work on Windows due to something called Tokyo Cabinet. Osm2pgsql fails every time for me with my lean Linux box with only 700 MB of memory and I must do local import with my home computer and use PostGIS dump/restore after that.  And on my home Windows laptop running import with osm2pgsql (with that 2 years old version) takes something like 3 hours while Sandro had a try with the same Finnish OSM excerpt and reported that he could parse it with ReadOSM in five minutes.  If something is possibly 30 times faster than something else I usually get interested.
> If you count together the number of users who are on Windows OR do not want to learn to be DB admins OR are willing to run cheap and weak virtual servers, then I would say that there might be enough interest for such a driver.
> 
> I think that what Osm2pgsql is doing is enough for the majority of users. That is, create point, line and polygon layers from features which have at least on tag in the configuration file. Parsing relations must be pretty difficult, at least with polygons and therefore I was thinking that by using the ReadOSM library the responsibility about doing it right could be left to ReadOSM developer. Advanced users could still use the advanced tools.
> 
> -Jukka Rahkonen-

Jukka,

Your assessment of the situation with importing OSM on Windows is
bang-on as usual.  In fact I have been hitting this same wall for a
while, so Mike Smith and I last week worked on a script to change the
osm2pgsql-imported tables, to the same schema of Imposm (so generalized
features, specific layers, and therefore faster drawing in MapServer,
Mapnik, or whatever you use).  Give it a try:
https://github.com/jmckenna/basemaps/blob/master/contrib/osm2pgsql-to-imposm-schema.sql

I'll be using this on Windows, until something better comes along.

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From Tom_Roche at pobox.com  Tue Jul 10 16:13:39 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Tue, 10 Jul 2012 19:13:39 -0400
Subject: [gdal-dev] installing debian GDAL version >= 1.9
References: <CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>
	<87obnowmnm.fsf@pobox.com>
Message-ID: <871ukj1a70.fsf@pobox.com>


Seeking advice on updating a debian box to GDAL version >= 1.9:

Etienne Tourigny Mon, 9 Jul 2012 23:01:35 -0300
> What you want to achieve can be done with [gdalwarp. ...] You will
> need gdal version 1.9 to work properly with netcdf files (especially
> to use gdalwarp).

I'm currently running

$ lsb_release -ds
> Linux Mint Debian Edition
$ cat /etc/debian_version
> wheezy/sid
$ uname -rv
> 3.2.0-2-amd64 #1 SMP Sun Mar 4 22:48:17 UTC 2012
$ cat /etc/apt/sources.list
> deb http://packages.linuxmint.com/ debian main upstream import
> deb http://debian.linuxmint.com/latest testing main contrib non-free
> deb http://debian.linuxmint.com/latest/security testing/updates main contrib non-free
> deb http://debian.linuxmint.com/latest/multimedia testing main non-free
...

Unfortunately

me at it:~$ which gdalwarp
> /usr/bin/gdalwarp
me at it:~$ gdalwarp --version
> GDAL 1.7.3, released 2010/11/10
me at it:~$ sudo aptitude update
# was up-to-date

I noted

http://packages.debian.org/search?keywords=gdal-bin&searchon=names&suite=all&section=all&sourceid=mozilla-search
> Package gdal-bin
...
>     wheezy (testing) [...] 1.9.0-3+b1

so I did

me at it:/etc/apt$ sudo cp sources.list sources.list_20120710_1834
me at it:/etc/apt$ sudo emacs -nw -q sources.list
me at it:/etc/apt$ diff -wB sources.list_20120710_1834 sources.list
20c20
< #deb http://ftp.debian.org/debian/ testing main contrib non-free
---
> deb http://ftp.debian.org/debian/ testing main contrib non-free
me at it:~$ sudo aptitude update
# very not up-to-date
me at it:~$ sudo aptitude install -s gdal-bin

This wants

> The following NEW packages will be installed:
>   libarmadillo3{a} libblas3{a} libgdal1{a} libgeos-3.3.3{a} libkml0{a} liblapack3{a} libmysqlclient18{a} libpoppler19{ab}
>   liburiparser1{a}
> The following packages will be REMOVED:
>   libgeos-3.3.1{u}
> The following packages will be upgraded:
>   gdal-bin libblas3gf libgeos-c1 liblapack3gf liblzma5 mysql-common
> 6 packages upgraded, 9 newly installed, 1 to remove and 1326 not upgraded.
> Need to get 14.8 MB of archives. After unpacking 26.0 MB will be used.
> The following packages have unmet dependencies:
>   libblas-dev: Depends: libblas3gf (= 1.2.20110419-2) but 1.2.20110419-5 is to be installed.
>   liblapack-dev: Depends: liblapack3gf (= 3.3.1-1) but 3.4.1-4 is to be installed.
>   libpoppler19: Depends: libfontconfig1 (>= 2.9.0) but 2.8.0-2.1ubuntu3 is installed.

I attempted to evaluate those dependencies (but I am not an APT expert):

me at it:~$ aptitude search ~Dlibblas-dev | grep -e '^i'
i   liblapack-dev   - Library of linear algebra routines 3 - sta
i   r-base-dev      - GNU R installation of auxiliary GNU R pack
me at it:~$ aptitude search ~Dliblapack-dev | grep -e '^i'
i   r-base-dev      - GNU R installation of auxiliary GNU R pack

I use R a lot, but am not averse to trying R from testing. However,

me at it:~$ aptitude search ~Dlibfontconfig1 | grep -e '^i' | wc -l
> 230

seems scary, since

me at it:~$ aptitude search ~Dlibfontconfig1 | grep -e '^i' | less

appears to show many important dependencies (e.g., emacs, xulrunner,
cinnamon, gnome-shell, MATE). Am I missing, or misinterpreting,
something? If not, is there a better/safer way for me to upgrade my
GDAL to version >= 1.9?

TIA, Tom Roche <Tom_Roche at pobox.com>

From a1hunter at ucsd.edu  Tue Jul 10 20:55:47 2012
From: a1hunter at ucsd.edu (aphunter)
Date: Tue, 10 Jul 2012 20:55:47 -0700 (PDT)
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <CAMKgpObUX2XXdo3wMBwPkNqkiWq-CXR6JeYmQQ12u0BmsaCy0Q@mail.gmail.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
	<CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
	<1341769694934-4986770.post@n6.nabble.com>
	<4FF9E8F3.3050908@free.fr>
	<1341800373118-4986806.post@n6.nabble.com>
	<CAMKgpObUX2XXdo3wMBwPkNqkiWq-CXR6JeYmQQ12u0BmsaCy0Q@mail.gmail.com>
Message-ID: <1341978947907-4987481.post@n6.nabble.com>

It looks like using -srcnodata 0 -dstnodata 5 worked using gdalwarp. Thanks
for the help!

What exactly do the 'values' mean? 

Thanks,
Aaron



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4987481.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Tue Jul 10 23:02:09 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 11 Jul 2012 11:32:09 +0530
Subject: [gdal-dev] gdal_merge.py on large Tiff's. gdalwarp not working
	properly.
In-Reply-To: <1341978947907-4987481.post@n6.nabble.com>
References: <1341706449674-4986729.post@n6.nabble.com>
	<CAMKgpOY9thMb--PUgGw0QrnKpSMCTi1QE5HvF3Yiejvvnzxodw@mail.gmail.com>
	<1341729538388-4986741.post@n6.nabble.com>
	<CAMKgpOa++Cex2WKcBBV1gsrFdbb9BVdNdG9ewGCHwME825npaA@mail.gmail.com>
	<1341769694934-4986770.post@n6.nabble.com>
	<4FF9E8F3.3050908@free.fr>
	<1341800373118-4986806.post@n6.nabble.com>
	<CAMKgpObUX2XXdo3wMBwPkNqkiWq-CXR6JeYmQQ12u0BmsaCy0Q@mail.gmail.com>
	<1341978947907-4987481.post@n6.nabble.com>
Message-ID: <CAMKgpOaRzssN8tacXopuBHzXGHcc+vMavpv+iqSyNzYC1YMYsg@mail.gmail.com>

Hi Aaron,

Rasters are rectangular grids of data. But the data is not always
rectangular. It may have holes. It may be skewed, especially if it was
warped from another projection. To note the areas with these hole and areas
with no information, we define a certain pixel value. We call it nodata
value.

Another way is to use a separate band. Alpha band or nodata mask.

It looks like you selected the values arbitrarily. You may be losing some
data. I suggest you use the -dstalpha option in gdalwarp to warp the first
image unless you are sure there is no data lose.

On Wed, Jul 11, 2012 at 9:25 AM, aphunter <a1hunter at ucsd.edu> wrote:

> It looks like using -srcnodata 0 -dstnodata 5 worked using gdalwarp. Thanks
> for the help!
>
> What exactly do the 'values' mean?
>
> Thanks,
> Aaron
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-merge-py-on-large-Tiff-s-gdalwarp-not-working-properly-tp4986729p4987481.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/bada22f9/attachment.html>

From taibc_coltech at yahoo.com  Wed Jul 11 02:27:10 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Wed, 11 Jul 2012 02:27:10 -0700 (PDT)
Subject: [gdal-dev] Can I create a win form program (using C++ or C#) to
 convert .dgn files to shape files by using ogr2ogr
Message-ID: <1341998830421-4987579.post@n6.nabble.com>


I want to create a win form program (in Visual Studio 2010, C++ or C#) to
allow to convert .dgn files into shape files by using ogr2ogr as a library.
Then, I will integrate that program into our project.

Do you think it is possible ? Are there any one have experiences about this
?

Thanks and regards,

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-I-create-a-win-form-program-using-C-or-C-to-convert-dgn-files-to-shape-files-by-using-ogr2ogr-tp4987579.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Wed Jul 11 02:43:48 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 11 Jul 2012 10:43:48 +0100
Subject: [gdal-dev] Can I create a win form program (using C++ or C#) to
 convert .dgn files to shape files by using ogr2ogr
In-Reply-To: <1341998830421-4987579.post@n6.nabble.com>
References: <1341998830421-4987579.post@n6.nabble.com>
Message-ID: <CABUeae-OknBLALXzFOu_yY4nVppz9QGivdOnorJ8_gPOR2yEFA@mail.gmail.com>

On 11 July 2012 10:27, taibc <taibc_coltech at yahoo.com> wrote:
> I want to create a win form program (in Visual Studio 2010, C++ or C#) to
> allow to convert .dgn files into shape files by using ogr2ogr as a library.
>
> Do you think it is possible ?

I think it is not possible.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From fabian.schindler at eox.at  Wed Jul 11 03:15:50 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Wed, 11 Jul 2012 12:15:50 +0200
Subject: [gdal-dev] Error handlers in Python bindings
Message-ID: <4FFD5256.60402@eox.at>

Hey folks,

I'd like to know how I could set a custom error handling function in the 
GDAL Python bindings?

Currently I was able to turn off error messages like so:

 >>> gdal.PushErrorHandler("CPLQuietErrorHandler")

What I want is something like this:

 >>> def f(error):
...    logger.error(error)
...
 >>> gdal.PushErrorHandler(f)

But I get the following error:

Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File "/usr/lib/python2.6/dist-packages/osgeo/gdal.py", line 312, in 
PushErrorHandler
     return _gdal.PushErrorHandler(*args)
NotImplementedError: Wrong number of arguments for overloaded function 
'PushErrorHandler'.
   Possible C/C++ prototypes are:
     PushErrorHandler(char const *)
     CPLPushErrorHandler(CPLErrorHandler)

If possible, I'd like a solution that works with 1.8.

Thanks,
Fabian

From benjamin.lux at maxsea.fr  Wed Jul 11 03:32:46 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Wed, 11 Jul 2012 03:32:46 -0700 (PDT)
Subject: [gdal-dev]  Ogr to access MSSQL DB
Message-ID: <1342002766792-4987592.post@n6.nabble.com>

Hi,

I try to connect my application to a DB with the framework Ogr (with C#
warper).
When I write folloing code, Ogr methods view the DB but can't read it.

[code]
            Ogr.RegisterAll();

            const string connectionString =
@"Server=SERVEUR_NAME;Database=DATABASE_NAME;trusted_connection=yes";

            DataSource pnn3 = Ogr.Open("MSSQL:" + connectionString, 0);
            if (pnn3 == null)
                       throw new IOException("Creation of output file
failed.");
            
            Console.WriteLine("pnn3.Name\t=" + pnn3.name);
            Console.WriteLine("pnn3.GetLayerCount()\t= " +
pnn3.GetLayerCount());
[/code]

It display :
[quote]
Server=SERVEUR_NAME;Database=DATABASE_NAME;trusted_connection=yes
0
[/quote]

I know my DB is view because if I switch SERVEUR_NAME and/or DATABASE_NAME
by an other name the exception is throwed
On the other hand driver don't see my layers (it displays 0, and my db has
near to 30 layers).

If someone have already connected to db MSSQL, can him suggests me an
example of code (in C or C++ it is also great, it may help me) ?

Notes:
I use gdal-1.9.0 (with MSSQL Driver)
link usefull :  http://www.gdal.org/ogr/drv_mssqlspatial.html MSSQLSpatial -
Microsoft SQL Server Spatial Database 

Best regards,
Benjamin.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-to-access-MSSQL-DB-tp4987592.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/d4a7c24f/attachment-0001.html>

From Michael.Smith at usace.army.mil  Wed Jul 11 03:50:48 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Wed, 11 Jul 2012 10:50:48 +0000
Subject: [gdal-dev] Problem reading shapefile via /vsizip
Message-ID: <CC22D2C5.2ED9A%michael.smith@usace.army.mil>

Reading a zipped shapefile (with 4 shapefiles in it) via vsicurl and vsizip

ogrinfo /vsizip//vsicurl/http://www.srh.noaa.gov/images/shv/shp/Day1_Conv_Outlook/Day1_Conv_Outlook.latest.zip -ro CATEGORICAL
Layer name: CATEGORICAL
Geometry: Polygon
Feature Count: 1
Extent: (-119.600000, 24.217000) - (-75.125000, 49.378000)
?

Shows 1 feature but doesn't show the geometry.

Downloading and unzipping the file, does show the geometry.
Layer name: CATEGORICAL
Geometry: Polygon
Feature Count: 1
Extent: (-119.600000, 24.217000) - (-75.125000, 49.378000)
?
POLYGON ((-83.454 46.018,-85.01 45.94,-87.15 45.02,...

Just to be inconsistent, this file does show the geometry

ogrinfo /vsizip//vsicurl/http://www.srh.noaa.gov/images/shv/shp/Day2_Conv_Outlook/Day2_Conv_Outlook.latest.zip -ro CATEGORICAL

But others in the same file do not

ogrinfo /vsizip//vsicurl/http://www.srh.noaa.gov/images/shv/shp/Day2_Conv_Outlook/Day2_Conv_Outlook.latest.zip -ro WIND


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/8a4b50ee/attachment.html>

From szekerest at gmail.com  Wed Jul 11 04:04:08 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 11 Jul 2012 13:04:08 +0200
Subject: [gdal-dev] Ogr to access MSSQL DB
In-Reply-To: <1342002766792-4987592.post@n6.nabble.com>
References: <1342002766792-4987592.post@n6.nabble.com>
Message-ID: <CACALY+R5N-NX-jGT9+vmjTugkM6jQBTzBwMsmDkPyDZ3RQY6rg@mail.gmail.com>

Benjamin,

What is the content of the geometry_columns metadata table in your database?

Best regards,

Tamas



2012/7/11 Benjamin <benjamin.lux at maxsea.fr>

> Hi, I try to connect my application to a DB with the framework Ogr (with
> C# warper). When I write folloing code, Ogr methods view the DB but can't
> read it. [code] Ogr.RegisterAll(); const string connectionString =
> @"Server=SERVEUR_NAME;Database=DATABASE_NAME;trusted_connection=yes";
> DataSource pnn3 = Ogr.Open("MSSQL:" + connectionString, 0); if (pnn3 ==
> null) throw new IOException("Creation of output file failed.");
> Console.WriteLine("pnn3.Name\t=" + pnn3.name);
> Console.WriteLine("pnn3.GetLayerCount()\t= " + pnn3.GetLayerCount());
> [/code] It display : [quote]
> Server=SERVEUR_NAME;Database=DATABASE_NAME;trusted_connection=yes 0
> [/quote] I know my DB is view because if I switch SERVEUR_NAME and/or
> DATABASE_NAME by an other name the exception is throwed On the other hand
> driver don't see my layers (it displays 0, and my db has near to 30
> layers). If someone have already connected to db MSSQL, can him suggests me
> an example of code (in C or C++ it is also great, it may help me) ? Notes:
> I use gdal-1.9.0 (with MSSQL Driver) link usefull : MSSQLSpatial -
> Microsoft SQL Server Spatial Database<http://www.gdal.org/ogr/drv_mssqlspatial.html>Best regards, Benjamin.
> ------------------------------
> View this message in context: [gdal-dev] Ogr to access MSSQL DB<http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-to-access-MSSQL-DB-tp4987592.html>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/be5b3e05/attachment.html>

From benjamin.lux at maxsea.fr  Wed Jul 11 06:46:11 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Wed, 11 Jul 2012 06:46:11 -0700 (PDT)
Subject: [gdal-dev] Ogr to access MSSQL DB
In-Reply-To: <CACALY+R5N-NX-jGT9+vmjTugkM6jQBTzBwMsmDkPyDZ3RQY6rg@mail.gmail.com>
References: <1342002766792-4987592.post@n6.nabble.com>
	<CACALY+R5N-NX-jGT9+vmjTugkM6jQBTzBwMsmDkPyDZ3RQY6rg@mail.gmail.com>
Message-ID: <1342014371918-4987674.post@n6.nabble.com>

Is the geometry_columns table mandatory ?
Because I have not such table.

This table is not in the spatial standard, isn't it ?
Ogr need to acces it ?

If yes, I think I will have to create it.

Thx for the clue,
Benjamin.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-to-access-MSSQL-DB-tp4987592p4987674.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Wed Jul 11 07:15:19 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 11 Jul 2012 16:15:19 +0200
Subject: [gdal-dev] Ogr to access MSSQL DB
In-Reply-To: <1342014371918-4987674.post@n6.nabble.com>
References: <1342002766792-4987592.post@n6.nabble.com>
	<CACALY+R5N-NX-jGT9+vmjTugkM6jQBTzBwMsmDkPyDZ3RQY6rg@mail.gmail.com>
	<1342014371918-4987674.post@n6.nabble.com>
Message-ID: <CACALY+TcJNw4ekK5tF64oWw-GnGLi4nPAKwvi6DA2KnxRF=OxQ@mail.gmail.com>

It is required with the current ogr driver, however we could implement some
support to eliminate. This table is anyway included in the simple features
specification for databases standard.
If you create the layers by using ogr (ie. by using ogr2ogr command line
tool) the metadata tables are also created if necessary.

Best regards,

Tamas



2012/7/11 Benjamin <benjamin.lux at maxsea.fr>

> Is the geometry_columns table mandatory ?
> Because I have not such table.
>
> This table is not in the spatial standard, isn't it ?
> Ogr need to acces it ?
>
> If yes, I think I will have to create it.
>
> Thx for the clue,
> Benjamin.
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-to-access-MSSQL-DB-tp4987592p4987674.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/4d8931d5/attachment.html>

From guasqui at actgate.com  Wed Jul 11 07:28:11 2012
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Wed, 11 Jul 2012 16:28:11 +0200
Subject: [gdal-dev] Memory leaks when using SQL queries with shapefiles
Message-ID: <4FFD8D7B.90507@actgate.com>

Hello,

I am experiencing a big memory allocation (with no subsequent memory 
release) when using SQL queries with shapefiles. This is a sample code 
that triggers this problem:

     OGRRegisterAll();

     // opening shapefile data source
     const char *fname = "path/to/shapefile.shp";
     OGRDataSource *poDS;
     poDS = OGRSFDriverRegistrar::Open( fname, FALSE );

     if( poDS == NULL )
     {
         fprintf( stderr, "%s: could not open input file\n", fname );
         return -1;
     }

     // creating the spatial filter
     OGRLineString regionPolygon;
     OGRRawPoint *pointsList = new OGRRawPoint[5];
     pointsList[0].x = -180; pointsList[0].y =  90;
     pointsList[1].x =  180; pointsList[1].y =  90;
     pointsList[2].x =  180; pointsList[2].y = -90;
     pointsList[3].x = -180; pointsList[3].y = -90;
     pointsList[4].x = -180; pointsList[4].y =  90;
     regionPolygon.setPoints(5, pointsList);
     delete[] pointsList;

     // executing the query
     const char *query = "SELECT * FROM table_name WHERE some_field LIKE 
'%bla%' ORDER BY some_other_field";
     OGRLayer *rs = poDS->ExecuteSQL( query, &regionPolygon, NULL );

     // releasing memory
     poDS-> ReleaseResultSet( rs );
     OGRDataSource::DestroyDataSource( poDS );

With a 100.000 records shapefile "ExecuteSQL" has allocated over 300 
MBytes of memory with no deallocation when calling "ReleaseResultSet".

The memory leak is triggered only when "ExecuteSQL" is called with a 
spatial filter (even trivial as shown in the above code) and the SQL 
query contains a 'WHERE' clause and an 'ORDER BY' clause. Is this a bug?

I am using GDAL 1.9.1 under Windows platform.

Any help would be really appreciated!
Thank you,

-- 
Pierluigi Guasqui
Applied Coherent Technology Corp.



From robert.zermeno at navy.mil  Wed Jul 11 13:21:22 2012
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Wed, 11 Jul 2012 13:21:22 -0700
Subject: [gdal-dev] Kakadu JP2 Output Overviews possible?
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA91084F38FE@nawechlkez02v.nadsuswe.nads.navy.mil>

GDAL Community,

I noticed GDAL has a utility program gdaladdo which embeds new overviews to a supplied file.  Does gdal have a utility program that allows me to extract overviews to a file?

If not, how would I be able to programmatically extract a specified overview within a JP2 image (using C/C++)?
What is the easiest way to get a reduced overview?

>From your website I think there is two options:

1. Use GDALRasterIO() and set nBufXSize and nBufYSize to be smaller than the window size forcing GDAL to try and use a suitable overview as explained from:
  http://www.gdal.org/gdal_tutorial.html

OR:

1. Check if GDALGetOverviewCount() > 0.  If true, then we have embedded overviews
2. Call GDALGetOverview(Band,1)  //For 1st overview band.  This will store the overview raster band in Band.  What happens if the image is RGB?  How do I obtain the R,G,B raster band of the overview at index 1?

3. Call GDALRasterBandXSize and GDALRasterBandYSize
4.  Once have all RasterBands and their sizes known, call GDALRasterIO to acquire the image.


How would you guys go about it?  I think I am on the right track.

Bob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5695 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/fe2c4719/attachment.bin>

From Luke.Pinner at environment.gov.au  Wed Jul 11 17:42:18 2012
From: Luke.Pinner at environment.gov.au (lpinner)
Date: Wed, 11 Jul 2012 17:42:18 -0700 (PDT)
Subject: [gdal-dev] Error handlers in Python bindings
In-Reply-To: <4FFD5256.60402@eox.at>
References: <4FFD5256.60402@eox.at>
Message-ID: <1342053738451-4987809.post@n6.nabble.com>

The python function needs to accept three arguments, error class, error code
and error message.

i.e.
from osgeo import gdal
def f(err_class, err_code, msg):
    print err_class, err_code, msg
    
gdal.PushErrorHandler(f) 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Error-handlers-in-Python-bindings-tp4987591p4987809.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From taibc_coltech at yahoo.com  Wed Jul 11 19:01:22 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Wed, 11 Jul 2012 19:01:22 -0700 (PDT)
Subject: [gdal-dev] Can't convert .dgn file to shape file by using ogr2ogr
Message-ID: <1342058482503-4987817.post@n6.nabble.com>

Dear friends,

I tried to convert .dgn file to shape files by using ogr2ogr with FWTools
Shell as below:

ogr2ogr -f "ESRI Shapefile" Dc16.shp Dc16.dgn

but I got an bellow error:

/Warning 6: Normalized/laundered field name: 'GraphicGroup' to 'GraphicGro'
ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type
shapefile.

ERROR 1: Terminating translation prematurely after failed
translation of layer elements (use -skipfailures to skip errors)/

Are there anyone know how to fix this error ?

PS: I am using Win 7

Thanks and Regards,

Tai 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Wed Jul 11 21:10:03 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 12 Jul 2012 09:40:03 +0530
Subject: [gdal-dev] Can't convert .dgn file to shape file by using
	ogr2ogr
In-Reply-To: <1342058482503-4987817.post@n6.nabble.com>
References: <1342058482503-4987817.post@n6.nabble.com>
Message-ID: <CAMKgpOYReu3BSVou1h+j9=Ft2LczUrjRx_FjfVg9prYF54j_RA@mail.gmail.com>

Tai,

Can you send me your dgn file?

On Thu, Jul 12, 2012 at 7:31 AM, taibc <taibc_coltech at yahoo.com> wrote:

> Dear friends,
>
> I tried to convert .dgn file to shape files by using ogr2ogr with FWTools
> Shell as below:
>
> ogr2ogr -f "ESRI Shapefile" Dc16.shp Dc16.dgn
>
> but I got an bellow error:
>
> /Warning 6: Normalized/laundered field name: 'GraphicGroup' to 'GraphicGro'
> ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type
> shapefile.
>
> ERROR 1: Terminating translation prematurely after failed
> translation of layer elements (use -skipfailures to skip errors)/
>
> Are there anyone know how to fix this error ?
>
> PS: I am using Win 7
>
> Thanks and Regards,
>
> Tai
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/616bb0bd/attachment.html>

From taibc_coltech at yahoo.com  Wed Jul 11 22:05:58 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Wed, 11 Jul 2012 22:05:58 -0700 (PDT)
Subject: [gdal-dev] Can't convert .dgn file to shape file by using
	ogr2ogr
In-Reply-To: <CAMKgpOYReu3BSVou1h+j9=Ft2LczUrjRx_FjfVg9prYF54j_RA@mail.gmail.com>
References: <1342058482503-4987817.post@n6.nabble.com>
	<CAMKgpOYReu3BSVou1h+j9=Ft2LczUrjRx_FjfVg9prYF54j_RA@mail.gmail.com>
Message-ID: <1342069525.83404.YahooMailNeo@web190003.mail.sg3.yahoo.com>

Dear Chaitanya,

Please find the attached .dgn file.

Thanks and regards,

Tai



________________________________
 From: chaitanya_ch [via OSGeo.org] <ml-node+s1560n4987825h94 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Thursday, July 12, 2012 11:10 AM
Subject: Re: Can't convert .dgn file to shape file by using ogr2ogr
 

Tai,

Can you send me your dgn file?


On Thu, Jul 12, 2012 at 7:31 AM, taibc <[hidden email]> wrote:

Dear friends,
>
>I tried to convert .dgn file to shape files by using ogr2ogr with FWTools
>Shell as below:
>
>ogr2ogr -f "ESRI Shapefile" Dc16.shp Dc16.dgn
>
>
>but I got an bellow error:
>
>/Warning 6: Normalized/laundered field name: 'GraphicGroup' to 'GraphicGro'
>
>ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type
>shapefile.
>
>ERROR 1: Terminating translation prematurely after failed
>translation of layer elements (use -skipfailures to skip errors)/
>
>
>Are there anyone know how to fix this error ?
>
>PS: I am using Win 7
>
>Thanks and Regards,
>
>Tai
>
>--
>View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817.html
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>_______________________________________________
>gdal-dev mailing list
>[hidden email]
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817p4987825.html 
To unsubscribe from Can't convert .dgn file to shape file by using ogr2ogr, click here.
NAML 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817p4987829.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120711/4f6cd880/attachment-0001.html>

From fabian.schindler at eox.at  Thu Jul 12 01:24:21 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Thu, 12 Jul 2012 10:24:21 +0200
Subject: [gdal-dev] Error handlers in Python bindings
In-Reply-To: <1342053738451-4987809.post@n6.nabble.com>
References: <4FFD5256.60402@eox.at> <1342053738451-4987809.post@n6.nabble.com>
Message-ID: <4FFE89B5.4020805@eox.at>

Thanks for the answer, but unfortunately this does not work on my machine:

>>>  from osgeo import gdal

>>>  def f(err_class, err_code, msg):

...     print err_class, err_code, msg

...

>>>  gdal.PushErrorHandler(f)

Traceback (most recent call last):

   File "<stdin>", line 1, in<module>

   File "/usr/lib/python2.6/dist-packages/osgeo/gdal.py", line 312, in PushErrorHandler

     return _gdal.PushErrorHandler(*args)

NotImplementedError: Wrong number of arguments for overloaded function 'PushErrorHandler'.

   Possible C/C++ prototypes are:

     PushErrorHandler(char const *)

     CPLPushErrorHandler(CPLErrorHandler)


Maybe I need a newer GDAL version?


On 07/12/2012 02:42 AM, lpinner wrote:
> The python function needs to accept three arguments, error class, error code
> and error message.
>
> i.e.
> from osgeo import gdal
> def f(err_class, err_code, msg):
>      print err_class, err_code, msg
>
> gdal.PushErrorHandler(f)
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Error-handlers-in-Python-bindings-tp4987591p4987809.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ao at t-kartor.se  Thu Jul 12 01:39:24 2012
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Thu, 12 Jul 2012 10:39:24 +0200
Subject: [gdal-dev] Convert S57 to image with S52 rendering
Message-ID: <4FFE8D3C.5030706@t-kartor.se>

Dear list

We need to produce background images (GeoTIFF, ECW or similar, to be 
used for WMS/WMTS services) from user-supplied S57 files with simplified 
S52 rendering in a web environment, i.e. server-side processing.
We think the following should work (on Windows 2008 Server):
1 OGR to read a S57 file
2 http://openev.cvs.sourceforge.net/viewvc/openev/contrib/S52/ to apply 
S52 rendering
3 GDAL to create output image
but we cannot find any documentation, e.g. at 
http://openev.sourceforge.net/, describing how to glue the pieces 
together without any user interaction.
Before we start C compiling etc - will our workflow work?


Best regards

-- 
Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From even.rouault at mines-paris.org  Thu Jul 12 01:53:12 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 10:53:12 +0200
Subject: [gdal-dev] Can't convert .dgn file to shape file by using
	ogr2ogr
In-Reply-To: <1342058482503-4987817.post@n6.nabble.com>
References: <1342058482503-4987817.post@n6.nabble.com>
Message-ID: <1342083192.4ffe907879c2e@imp.free.fr>

Selon taibc <taibc_coltech at yahoo.com>:

> Dear friends,
>
> I tried to convert .dgn file to shape files by using ogr2ogr with FWTools
> Shell as below:

FWTools is quite ancient by current standards. You could upgrade to a newer
binary distribution. See http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries

>
> ogr2ogr -f "ESRI Shapefile" Dc16.shp Dc16.dgn
>
> but I got an bellow error:
>
> /Warning 6: Normalized/laundered field name: 'GraphicGroup' to 'GraphicGro'

Nothing alarming. Shapefiles do not accept attribute name longer than 10
characters. ogr2ogr should deal with the truncation just fine.

> ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type
> shapefile.

This one is actually the error. DGN files can have a mix of geometry types
(points, lines, etc...), which is not supported by shapefiles. So you have to a
filtering to make sure that the target shapefile only receive geometries of the
right type.

ogr2ogr Dc16_points.shp Dc16.dgn -where "OGR_GEOMETRY = 'POINT'" -nln
Dc16_points

ogr2ogr Dc16_lines.shp Dc16.dgn -where "OGR_GEOMETRY = 'LINESTRING'" -nln
Dc16_lines

ogr2ogr Dc16_polygons.shp Dc16.dgn -where "OGR_GEOMETRY = 'POLYGON'" -nln
Dc16_polygons

From even.rouault at mines-paris.org  Thu Jul 12 01:59:41 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 10:59:41 +0200
Subject: [gdal-dev] Error handlers in Python bindings
In-Reply-To: <1342053738451-4987809.post@n6.nabble.com>
References: <4FFD5256.60402@eox.at> <1342053738451-4987809.post@n6.nabble.com>
Message-ID: <1342083581.4ffe91fdcd48a@imp.free.fr>

Selon lpinner <Luke.Pinner at environment.gov.au>:

> The python function needs to accept three arguments, error class, error code
> and error message.
>
> i.e.
> from osgeo import gdal
> def f(err_class, err_code, msg):
>     print err_class, err_code, msg
>
> gdal.PushErrorHandler(f)

Reviewing the Python bindings code, I see no evidence that Python error handlers
are possible. An option is to use gdal.UseExceptions() which will cause a Python
exception to be thrown after a GDAL call has emitted an error.

>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/gdal-dev-Error-handlers-in-Python-bindings-tp4987591p4987809.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From taibc_coltech at yahoo.com  Thu Jul 12 02:13:09 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Thu, 12 Jul 2012 02:13:09 -0700 (PDT)
Subject: [gdal-dev] Can't convert .dgn file to shape file by using
	ogr2ogr
In-Reply-To: <1342083192.4ffe907879c2e@imp.free.fr>
References: <1342058482503-4987817.post@n6.nabble.com>
	<1342083192.4ffe907879c2e@imp.free.fr>
Message-ID: <1342084389924-4987904.post@n6.nabble.com>

Thanks Even Rouault,

I tried as you said, but still got the error:

/C:\dc16>ogr2ogr Dc16_lines.shp Dc16.dgn -where "ORG_GEOMETRY =
'LINESTRING'" -nl
n Dc16_lines

ERROR 1: Failed to identify field:ORG_GEOMETRY
Warning 6: Normalized/laundered field name: 'GraphicGroup' to 'GraphicGro'
ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type
shapefile.

ERROR 1: Terminating translation prematurely after failed
translation of layer elements (use -skipfailures to skip errors)/

Thanks and regards,

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817p4987904.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From fabian.schindler at eox.at  Thu Jul 12 02:14:00 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Thu, 12 Jul 2012 11:14:00 +0200
Subject: [gdal-dev] Error handlers in Python bindings
In-Reply-To: <1342083581.4ffe91fdcd48a@imp.free.fr>
References: <4FFD5256.60402@eox.at> <1342053738451-4987809.post@n6.nabble.com>
	<1342083581.4ffe91fdcd48a@imp.free.fr>
Message-ID: <4FFE9558.7040909@eox.at>

Thanks Even,

I feared that this was the case. But the `UseException` function looks 
promising.

Regards,
Fabian


On 07/12/2012 10:59 AM, Even Rouault wrote:
> Selon lpinner<Luke.Pinner at environment.gov.au>:
>
>> The python function needs to accept three arguments, error class, error code
>> and error message.
>>
>> i.e.
>> from osgeo import gdal
>> def f(err_class, err_code, msg):
>>      print err_class, err_code, msg
>>
>> gdal.PushErrorHandler(f)
> Reviewing the Python bindings code, I see no evidence that Python error handlers
> are possible. An option is to use gdal.UseExceptions() which will cause a Python
> exception to be thrown after a GDAL call has emitted an error.
>
>> --
>> View this message in context:
>>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Error-handlers-in-Python-bindings-tp4987591p4987809.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Thu Jul 12 02:17:03 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 11:17:03 +0200
Subject: [gdal-dev] Kakadu JP2 Output Overviews possible?
In-Reply-To: <F8A8A114E3F41D4D9157F1BECCA3BA91084F38FE@nawechlkez02v.nadsuswe.nads.navy.mil>
References: <F8A8A114E3F41D4D9157F1BECCA3BA91084F38FE@nawechlkez02v.nadsuswe.nads.navy.mil>
Message-ID: <1342084623.4ffe960f15c5f@imp.free.fr>

Selon "Zermeno, Robert J CIV NAVAIR, 472100D" <robert.zermeno at navy.mil>:

> GDAL Community,
>
> I noticed GDAL has a utility program gdaladdo which embeds new overviews to a
> supplied file.  Does gdal have a utility program that allows me to extract
> overviews to a file?

Yes, it is a debug utility, called dumpoverviews, that is not compiled by
default. You will have to download GDAL sources, compile them, and then go to
the "apps" directory and : make dumpoverviews (Linux/Unix) or nmake /f
makefile.vc dumpoverviews.exe (Windows)

The source http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/dumpoverviews.cpp
will answer all your questions.

I'd note that JP2 is a bit special. The full resolution image and the overviews
are mixed in the JP2 datastream. The choice of overviews levels exposed by GDAL
is rather arbitrary.

From even.rouault at mines-paris.org  Thu Jul 12 02:31:25 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 11:31:25 +0200
Subject: [gdal-dev] Can't convert .dgn file to shape file by using
	ogr2ogr
In-Reply-To: <1342084389924-4987904.post@n6.nabble.com>
References: <1342058482503-4987817.post@n6.nabble.com>
	<1342083192.4ffe907879c2e@imp.free.fr>
	<1342084389924-4987904.post@n6.nabble.com>
Message-ID: <1342085485.4ffe996df19d0@imp.free.fr>

Selon taibc <taibc_coltech at yahoo.com>:

> Thanks Even Rouault,
>
> I tried as you said, but still got the error:
>
> /C:\dc16>ogr2ogr Dc16_lines.shp Dc16.dgn -where "ORG_GEOMETRY =
> 'LINESTRING'" -nln Dc16_lines
>
> ERROR 1: Failed to identify field:ORG_GEOMETRY

There is a typo in your command line. It is OGR_GEOMETRY. No magic here : see
http://gdal.org/ogr/ogr_sql.html for the explanations

From taibc_coltech at yahoo.com  Thu Jul 12 02:52:05 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Thu, 12 Jul 2012 02:52:05 -0700 (PDT)
Subject: [gdal-dev] Can't convert .dgn file to shape file by using
	ogr2ogr
In-Reply-To: <1342084389924-4987904.post@n6.nabble.com>
References: <1342058482503-4987817.post@n6.nabble.com>
	<1342083192.4ffe907879c2e@imp.free.fr>
	<1342084389924-4987904.post@n6.nabble.com>
Message-ID: <1342086725879-4987916.post@n6.nabble.com>

Oh, my mistake - OGR (not ORG).

It is sucessful now.

Thanks and regards, 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Can-t-convert-dgn-file-to-shape-file-by-using-ogr2ogr-tp4987817p4987916.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From p.meems at topx-group.nl  Thu Jul 12 03:26:52 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 12 Jul 2012 12:26:52 +0200
Subject: [gdal-dev] Tiling aerial photos
Message-ID: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>

Hi list,

I have several aerial photos and I use MapWindow GIS to view them.
MapWindow is already using GDAL v1.8

Instead of loading each aerial photo as an individual layer I want to
create a local tiles store of the photos.
I can then just load the tiles I need based on the scale and view. This
will most likely improve the performance.

The process will be something like this:
1. Get the filenames of the photos
2. Merge them into one
3. Create tiles
4. Put the tiles in a SQLite database

My first question: Is the above suggested process correct or should I do it
differently?
My second question: What GDAL functions should I look into to accomplish my
process?

Thanks,

Paul Meems
The Netherlands
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/52c358a5/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 12 03:31:56 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 12:31:56 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
Message-ID: <1342089116.4ffea79c30be1@imp.free.fr>

Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:

> Hi list,
>
> I have several aerial photos and I use MapWindow GIS to view them.
> MapWindow is already using GDAL v1.8
>
> Instead of loading each aerial photo as an individual layer I want to
> create a local tiles store of the photos.
> I can then just load the tiles I need based on the scale and view. This
> will most likely improve the performance.
>
> The process will be something like this:
> 1. Get the filenames of the photos
> 2. Merge them into one
> 3. Create tiles
> 4. Put the tiles in a SQLite database
>
> My first question: Is the above suggested process correct or should I do it
> differently?
> My second question: What GDAL functions should I look into to accomplish my
> process?

You could try to make a VRT from all your photos. It will be seen as a single
GDAL dataset, and will take care of the burden of opening the underlying photos
when needed. You can use the gdalbuildvrt utility to create the VRT from the
photos.

>
> Thanks,
>
> Paul Meems
> The Netherlands
>



From p.meems at topx-group.nl  Thu Jul 12 03:36:45 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 12 Jul 2012 12:36:45 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <1342089116.4ffea79c30be1@imp.free.fr>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
Message-ID: <CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>

Thanks Even,

http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
As I understand it, it will do the merging part (without actually merging).

But it doesn't do the tiling part, right? Or is the vrt so optimized tiling
is no longer necessary?

Thanks,

Paul


2012/7/12 Even Rouault <even.rouault at mines-paris.org>

> Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
>
> > Hi list,
> >
> > I have several aerial photos and I use MapWindow GIS to view them.
> > MapWindow is already using GDAL v1.8
> >
> > Instead of loading each aerial photo as an individual layer I want to
> > create a local tiles store of the photos.
> > I can then just load the tiles I need based on the scale and view. This
> > will most likely improve the performance.
> >
> > The process will be something like this:
> > 1. Get the filenames of the photos
> > 2. Merge them into one
> > 3. Create tiles
> > 4. Put the tiles in a SQLite database
> >
> > My first question: Is the above suggested process correct or should I do
> it
> > differently?
> > My second question: What GDAL functions should I look into to accomplish
> my
> > process?
>
> You could try to make a VRT from all your photos. It will be seen as a
> single
> GDAL dataset, and will take care of the burden of opening the underlying
> photos
> when needed. You can use the gdalbuildvrt utility to create the VRT from
> the
> photos.
>
> >
> > Thanks,
> >
> > Paul Meems
> > The Netherlands
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/f216302e/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 12 03:51:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 12:51:34 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
Message-ID: <1342090294.4ffeac36886fb@imp.free.fr>

Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:

> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually merging).

The VRT driver will do on-the-fly merging of tiles that have overlapping. The
VRT itself is just a XML file.

>
> But it doesn't do the tiling part, right?

No, I wasn't sure if your photos were already regularly tiled or not. Note that
the VRT accepts non regularly tiled images. They can have overlapping, gaps,
different resolutions, etc. The main constraints are :
- they are in the same projection
- they are "north-up", that is to say there is no rotation or skewing term in
their geotransform matrix
- they have the same number of bands

> Or is the vrt so optimized tiling
> is no longer necessary?

Not necessary. Note that the VRT has no internal spatial indexing, so if you
have several dozains of thousands of images in a VRT, it might slow down because
it will iterate over all the image descriptions (without needing to open them
however, all the information is in the VRT) to see if they intersect with the
request window. But I'd expect the number of images in the VRT to be really high
for that effect to become noticeable.

>
> Thanks,
>
> Paul

From polimax at mail.ru  Thu Jul 12 03:53:31 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Thu, 12 Jul 2012 14:53:31 +0400
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
Message-ID: <4FFEACAB.8000108@mail.ru>

12.07.2012 14:36, Paul Meems (Top-X) ?????:
> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually 
> merging).
>
> But it doesn't do the tiling part, right? Or is the vrt so optimized 
> tiling is no longer necessary?
>
> Thanks,
>
> Paul
>
>
> 2012/7/12 Even Rouault <even.rouault at mines-paris.org 
> <mailto:even.rouault at mines-paris.org>>
>
>     Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl
>     <mailto:p.meems at topx-group.nl>>:
>
>     > Hi list,
>     >
>     > I have several aerial photos and I use MapWindow GIS to view them.
>     > MapWindow is already using GDAL v1.8
>     >
>     > Instead of loading each aerial photo as an individual layer I
>     want to
>     > create a local tiles store of the photos.
>     > I can then just load the tiles I need based on the scale and
>     view. This
>     > will most likely improve the performance.
>     >
>     > The process will be something like this:
>     > 1. Get the filenames of the photos
>     > 2. Merge them into one
>     > 3. Create tiles
>     > 4. Put the tiles in a SQLite database
>     >
>     > My first question: Is the above suggested process correct or
>     should I do it
>     > differently?
>     > My second question: What GDAL functions should I look into to
>     accomplish my
>     > process?
>
>     You could try to make a VRT from all your photos. It will be seen
>     as a single
>     GDAL dataset, and will take care of the burden of opening the
>     underlying photos
>     when needed. You can use the gdalbuildvrt utility to create the
>     VRT from the
>     photos.
>
>     >
>     > Thanks,
>     >
>     > Paul Meems
>     > The Netherlands
>     >
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
There is an interesting work connected aerial imagery: 
http://trac.osgeo.org/gdal/wiki/Correlator
http://correlatorgsoc2012.blogspot.com/

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/37804d7a/attachment.html>

From p.meems at topx-group.nl  Thu Jul 12 04:11:17 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 12 Jul 2012 13:11:17 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <4FFEACAB.8000108@mail.ru>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
Message-ID: <CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>

Thanks Dmitry and Even,

The aerial photos are north-up and are in the same projection and I think
also in the same resolution.
It are commercial aerial photos.

The Correlator project sounds very interesting but not necessary in my case.
I'll try to implement the VRT format and see what the performance will be.
If it is fast we don't need to tile.

Thanks,

Paul

2012/7/12 Even Rouault <even.rouault at mines-paris.org>
Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:

> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually
merging).

The VRT driver will do on-the-fly merging of tiles that have overlapping.
The
VRT itself is just a XML file.

>
> But it doesn't do the tiling part, right?

No, I wasn't sure if your photos were already regularly tiled or not. Note
that
the VRT accepts non regularly tiled images. They can have overlapping, gaps,
different resolutions, etc. The main constraints are :
- they are in the same projection
- they are "north-up", that is to say there is no rotation or skewing term
in
their geotransform matrix
- they have the same number of bands

> Or is the vrt so optimized tiling
> is no longer necessary?

Not necessary. Note that the VRT has no internal spatial indexing, so if you
have several dozains of thousands of images in a VRT, it might slow down
because
it will iterate over all the image descriptions (without needing to open
them
however, all the information is in the VRT) to see if they intersect with
the
request window. But I'd expect the number of images in the VRT to be really
high
for that effect to become noticeable.

>
> Thanks,
>
> Paul

2012/7/12 Dmitry Baryshnikov <polimax at mail.ru>

>  12.07.2012 14:36, Paul Meems (Top-X) ?????:
>
> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually merging).
>
> But it doesn't do the tiling part, right? Or is the vrt so optimized
> tiling is no longer necessary?
>
> Thanks,
>
> Paul
>
>
> 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
>
>> Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
>>
>> > Hi list,
>> >
>> > I have several aerial photos and I use MapWindow GIS to view them.
>> > MapWindow is already using GDAL v1.8
>> >
>> > Instead of loading each aerial photo as an individual layer I want to
>> > create a local tiles store of the photos.
>> > I can then just load the tiles I need based on the scale and view. This
>> > will most likely improve the performance.
>> >
>> > The process will be something like this:
>> > 1. Get the filenames of the photos
>> > 2. Merge them into one
>> > 3. Create tiles
>> > 4. Put the tiles in a SQLite database
>> >
>> > My first question: Is the above suggested process correct or should I
>> do it
>> > differently?
>> > My second question: What GDAL functions should I look into to
>> accomplish my
>> > process?
>>
>>  You could try to make a VRT from all your photos. It will be seen as a
>> single
>> GDAL dataset, and will take care of the burden of opening the underlying
>> photos
>> when needed. You can use the gdalbuildvrt utility to create the VRT from
>> the
>> photos.
>>
>> >
>> > Thanks,
>> >
>> > Paul Meems
>> > The Netherlands
>> >
>>
>>
>>  _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>  There is an interesting work connected aerial imagery:
> http://trac.osgeo.org/gdal/wiki/Correlator
> http://correlatorgsoc2012.blogspot.com/
>
> Best regards,
>     Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/1354f107/attachment-0001.html>

From DCarreira at edia.pt  Thu Jul 12 05:03:02 2012
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu, 12 Jul 2012 12:03:02 +0000
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
	<CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
Message-ID: <A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>

Hi Paul.

I had to build a big vrt. The one trick that got it loading very fast into qgis was adding statistics to each rasterband:
  <Metadata>
      <MDI key="STATISTICS_MAXIMUM">255</MDI>
      <MDI key="STATISTICS_MEAN">111.6784426525</MDI>
      <MDI key="STATISTICS_MINIMUM">0</MDI>
      <MDI key="STATISTICS_STDDEV">52.100074055799</MDI>
    </Metadata>

I just got stats from a subset and used that for all bands.

Duarte

De: Paul Meems (Top-X) [mailto:p.meems at topx-group.nl]
Enviada: quinta-feira, 12 de Julho de 2012 12:11
Para: gdal-dev at lists.osgeo.org
Assunto: Re: [gdal-dev] Tiling aerial photos

Thanks Dmitry and Even,

The aerial photos are north-up and are in the same projection and I think also in the same resolution.
It are commercial aerial photos.

The Correlator project sounds very interesting but not necessary in my case.
I'll try to implement the VRT format and see what the performance will be.
If it is fast we don't need to tile.

Thanks,

Paul

2012/7/12 Even Rouault <even.rouault at mines-paris.org<mailto:even.rouault at mines-paris.org>>
Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl<mailto:p.meems at topx-group.nl>>:
> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually merging).
The VRT driver will do on-the-fly merging of tiles that have overlapping. The
VRT itself is just a XML file.

>
> But it doesn't do the tiling part, right?
No, I wasn't sure if your photos were already regularly tiled or not. Note that
the VRT accepts non regularly tiled images. They can have overlapping, gaps,
different resolutions, etc. The main constraints are :
- they are in the same projection
- they are "north-up", that is to say there is no rotation or skewing term in
their geotransform matrix
- they have the same number of bands

> Or is the vrt so optimized tiling
> is no longer necessary?
Not necessary. Note that the VRT has no internal spatial indexing, so if you
have several dozains of thousands of images in a VRT, it might slow down because
it will iterate over all the image descriptions (without needing to open them
however, all the information is in the VRT) to see if they intersect with the
request window. But I'd expect the number of images in the VRT to be really high
for that effect to become noticeable.

>
> Thanks,
>
> Paul
2012/7/12 Dmitry Baryshnikov <polimax at mail.ru<mailto:polimax at mail.ru>>
12.07.2012 14:36, Paul Meems (Top-X) ?????:
Thanks Even,

http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
As I understand it, it will do the merging part (without actually merging).

But it doesn't do the tiling part, right? Or is the vrt so optimized tiling is no longer necessary?

Thanks,

Paul

2012/7/12 Even Rouault <even.rouault at mines-paris.org<mailto:even.rouault at mines-paris.org>>
Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl<mailto:p.meems at topx-group.nl>>:

> Hi list,
>
> I have several aerial photos and I use MapWindow GIS to view them.
> MapWindow is already using GDAL v1.8
>
> Instead of loading each aerial photo as an individual layer I want to
> create a local tiles store of the photos.
> I can then just load the tiles I need based on the scale and view. This
> will most likely improve the performance.
>
> The process will be something like this:
> 1. Get the filenames of the photos
> 2. Merge them into one
> 3. Create tiles
> 4. Put the tiles in a SQLite database
>
> My first question: Is the above suggested process correct or should I do it
> differently?
> My second question: What GDAL functions should I look into to accomplish my
> process?
You could try to make a VRT from all your photos. It will be seen as a single
GDAL dataset, and will take care of the burden of opening the underlying photos
when needed. You can use the gdalbuildvrt utility to create the VRT from the
photos.

>
> Thanks,
>
> Paul Meems
> The Netherlands
>

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

http://lists.osgeo.org/mailman/listinfo/gdal-dev
There is an interesting work connected aerial imagery: http://trac.osgeo.org/gdal/wiki/Correlator
http://correlatorgsoc2012.blogspot.com/

Best regards,
    Dmitry

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/df46a666/attachment.html>

From etourigny.dev at gmail.com  Thu Jul 12 05:27:55 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 12 Jul 2012 09:27:55 -0300
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
	<CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>
Message-ID: <CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>

You should generate the stats for every file, as you will probably get
incorrect results with your method

for f in *.tif; do gdalinfo -stats $f ; done

On Thu, Jul 12, 2012 at 9:03 AM, Duarte Carreira <DCarreira at edia.pt> wrote:
> Hi Paul.
>
>
>
> I had to build a big vrt. The one trick that got it loading very fast into
> qgis was adding statistics to each rasterband:
>
>   <Metadata>
>
>       <MDI key="STATISTICS_MAXIMUM">255</MDI>
>
>       <MDI key="STATISTICS_MEAN">111.6784426525</MDI>
>
>       <MDI key="STATISTICS_MINIMUM">0</MDI>
>
>       <MDI key="STATISTICS_STDDEV">52.100074055799</MDI>
>
>     </Metadata>
>
>
>
> I just got stats from a subset and used that for all bands.
>
>
>
> Duarte
>
>
>
> De: Paul Meems (Top-X) [mailto:p.meems at topx-group.nl]
> Enviada: quinta-feira, 12 de Julho de 2012 12:11
> Para: gdal-dev at lists.osgeo.org
> Assunto: Re: [gdal-dev] Tiling aerial photos
>
>
>
> Thanks Dmitry and Even,
>
> The aerial photos are north-up and are in the same projection and I think
> also in the same resolution.
> It are commercial aerial photos.
>
> The Correlator project sounds very interesting but not necessary in my case.
> I'll try to implement the VRT format and see what the performance will be.
> If it is fast we don't need to tile.
>
> Thanks,
>
> Paul
>
> 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
>
> Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
>
>> Thanks Even,
>>
>> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
>> As I understand it, it will do the merging part (without actually
>> merging).
>
> The VRT driver will do on-the-fly merging of tiles that have overlapping.
> The
> VRT itself is just a XML file.
>
>
>>
>> But it doesn't do the tiling part, right?
>
> No, I wasn't sure if your photos were already regularly tiled or not. Note
> that
> the VRT accepts non regularly tiled images. They can have overlapping, gaps,
> different resolutions, etc. The main constraints are :
> - they are in the same projection
> - they are "north-up", that is to say there is no rotation or skewing term
> in
> their geotransform matrix
> - they have the same number of bands
>
>
>> Or is the vrt so optimized tiling
>> is no longer necessary?
>
> Not necessary. Note that the VRT has no internal spatial indexing, so if you
> have several dozains of thousands of images in a VRT, it might slow down
> because
> it will iterate over all the image descriptions (without needing to open
> them
> however, all the information is in the VRT) to see if they intersect with
> the
> request window. But I'd expect the number of images in the VRT to be really
> high
> for that effect to become noticeable.
>
>>
>> Thanks,
>>
>> Paul
>
> 2012/7/12 Dmitry Baryshnikov <polimax at mail.ru>
>
> 12.07.2012 14:36, Paul Meems (Top-X) ?????:
>
> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually merging).
>
> But it doesn't do the tiling part, right? Or is the vrt so optimized tiling
> is no longer necessary?
>
> Thanks,
>
> Paul
>
> 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
>
> Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
>
>
>> Hi list,
>>
>> I have several aerial photos and I use MapWindow GIS to view them.
>> MapWindow is already using GDAL v1.8
>>
>> Instead of loading each aerial photo as an individual layer I want to
>> create a local tiles store of the photos.
>> I can then just load the tiles I need based on the scale and view. This
>> will most likely improve the performance.
>>
>> The process will be something like this:
>> 1. Get the filenames of the photos
>> 2. Merge them into one
>> 3. Create tiles
>> 4. Put the tiles in a SQLite database
>>
>> My first question: Is the above suggested process correct or should I do
>> it
>> differently?
>> My second question: What GDAL functions should I look into to accomplish
>> my
>> process?
>
> You could try to make a VRT from all your photos. It will be seen as a
> single
> GDAL dataset, and will take care of the burden of opening the underlying
> photos
> when needed. You can use the gdalbuildvrt utility to create the VRT from the
> photos.
>
>
>>
>> Thanks,
>>
>> Paul Meems
>> The Netherlands
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> There is an interesting work connected aerial imagery:
> http://trac.osgeo.org/gdal/wiki/Correlator
> http://correlatorgsoc2012.blogspot.com/
>
> Best regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From p.meems at topx-group.nl  Thu Jul 12 05:38:09 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 12 Jul 2012 14:38:09 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
	<CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>
	<CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>
Message-ID: <CAHNf2YTsLC0PPBMvDv-F-+NQnb-fcq1g7tGQkq=rO6xRZDg3=w@mail.gmail.com>

Thanks Duarte and Etienne,

That is very useful information.
I wouldn't thought about it reading just the documentation.

Thanks,

Paul


2012/7/12 Etienne Tourigny <etourigny.dev at gmail.com>

> You should generate the stats for every file, as you will probably get
> incorrect results with your method
>
> for f in *.tif; do gdalinfo -stats $f ; done
>
> On Thu, Jul 12, 2012 at 9:03 AM, Duarte Carreira <DCarreira at edia.pt>
> wrote:
> > Hi Paul.
> >
> >
> >
> > I had to build a big vrt. The one trick that got it loading very fast
> into
> > qgis was adding statistics to each rasterband:
> >
> >   <Metadata>
> >
> >       <MDI key="STATISTICS_MAXIMUM">255</MDI>
> >
> >       <MDI key="STATISTICS_MEAN">111.6784426525</MDI>
> >
> >       <MDI key="STATISTICS_MINIMUM">0</MDI>
> >
> >       <MDI key="STATISTICS_STDDEV">52.100074055799</MDI>
> >
> >     </Metadata>
> >
> >
> >
> > I just got stats from a subset and used that for all bands.
> >
> >
> >
> > Duarte
> >
> >
> >
> > De: Paul Meems (Top-X) [mailto:p.meems at topx-group.nl]
> > Enviada: quinta-feira, 12 de Julho de 2012 12:11
> > Para: gdal-dev at lists.osgeo.org
> > Assunto: Re: [gdal-dev] Tiling aerial photos
> >
> >
> >
> > Thanks Dmitry and Even,
> >
> > The aerial photos are north-up and are in the same projection and I think
> > also in the same resolution.
> > It are commercial aerial photos.
> >
> > The Correlator project sounds very interesting but not necessary in my
> case.
> > I'll try to implement the VRT format and see what the performance will
> be.
> > If it is fast we don't need to tile.
> >
> > Thanks,
> >
> > Paul
> >
> > 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
> >
> > Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
> >
> >> Thanks Even,
> >>
> >> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> >> As I understand it, it will do the merging part (without actually
> >> merging).
> >
> > The VRT driver will do on-the-fly merging of tiles that have overlapping.
> > The
> > VRT itself is just a XML file.
> >
> >
> >>
> >> But it doesn't do the tiling part, right?
> >
> > No, I wasn't sure if your photos were already regularly tiled or not.
> Note
> > that
> > the VRT accepts non regularly tiled images. They can have overlapping,
> gaps,
> > different resolutions, etc. The main constraints are :
> > - they are in the same projection
> > - they are "north-up", that is to say there is no rotation or skewing
> term
> > in
> > their geotransform matrix
> > - they have the same number of bands
> >
> >
> >> Or is the vrt so optimized tiling
> >> is no longer necessary?
> >
> > Not necessary. Note that the VRT has no internal spatial indexing, so if
> you
> > have several dozains of thousands of images in a VRT, it might slow down
> > because
> > it will iterate over all the image descriptions (without needing to open
> > them
> > however, all the information is in the VRT) to see if they intersect with
> > the
> > request window. But I'd expect the number of images in the VRT to be
> really
> > high
> > for that effect to become noticeable.
> >
> >>
> >> Thanks,
> >>
> >> Paul
> >
> > 2012/7/12 Dmitry Baryshnikov <polimax at mail.ru>
> >
> > 12.07.2012 14:36, Paul Meems (Top-X) ?????:
> >
> > Thanks Even,
> >
> > http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> > As I understand it, it will do the merging part (without actually
> merging).
> >
> > But it doesn't do the tiling part, right? Or is the vrt so optimized
> tiling
> > is no longer necessary?
> >
> > Thanks,
> >
> > Paul
> >
> > 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
> >
> > Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
> >
> >
> >> Hi list,
> >>
> >> I have several aerial photos and I use MapWindow GIS to view them.
> >> MapWindow is already using GDAL v1.8
> >>
> >> Instead of loading each aerial photo as an individual layer I want to
> >> create a local tiles store of the photos.
> >> I can then just load the tiles I need based on the scale and view. This
> >> will most likely improve the performance.
> >>
> >> The process will be something like this:
> >> 1. Get the filenames of the photos
> >> 2. Merge them into one
> >> 3. Create tiles
> >> 4. Put the tiles in a SQLite database
> >>
> >> My first question: Is the above suggested process correct or should I do
> >> it
> >> differently?
> >> My second question: What GDAL functions should I look into to accomplish
> >> my
> >> process?
> >
> > You could try to make a VRT from all your photos. It will be seen as a
> > single
> > GDAL dataset, and will take care of the burden of opening the underlying
> > photos
> > when needed. You can use the gdalbuildvrt utility to create the VRT from
> the
> > photos.
> >
> >
> >>
> >> Thanks,
> >>
> >> Paul Meems
> >> The Netherlands
> >>
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > _______________________________________________
> >
> > gdal-dev mailing list
> >
> > gdal-dev at lists.osgeo.org
> >
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > There is an interesting work connected aerial imagery:
> > http://trac.osgeo.org/gdal/wiki/Correlator
> > http://correlatorgsoc2012.blogspot.com/
> >
> > Best regards,
> >     Dmitry
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/16882301/attachment.html>

From Tom_Roche at pobox.com  Thu Jul 12 06:41:04 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Thu, 12 Jul 2012 09:41:04 -0400
Subject: [gdal-dev] installing debian GDAL version >= 1.9
In-Reply-To: <877gua4xu8.fsf@gmx.us>
References: <877gua4xu8.fsf@gmx.us>
	<CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>
	<87obnowmnm.fsf@pobox.com> <871ukj1a70.fsf@pobox.com>
Message-ID: <87ehohyu4v.fsf@pobox.com>


summary: how to prevent or fix

me at it:/tmp/gdal$ dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
... much, much later ...
> error: could not create '/usr/local/lib/python2.6/dist-packages/osgeo': Permission denied
...
> error: could not create '/usr/local/lib/python2.7/dist-packages/osgeo': Permission denied
> make[1]: *** [install] Error 1
> make[1]: Leaving directory `/tmp/gdal/gdal-1.9.0/swig/python'
> make: *** [build-stamp] Error 2
> dpkg-buildpackage: error: debian/rules build gave error exit status 2

noting that `sudo` is no fix (more below)?

details:

Tom Roche Tue, Jul 10, 2012 7:13 PM
>>> me at it:~$ aptitude search ~Dlibfontconfig1 | grep -e '^i' | less

>>> appears to show many important dependencies (e.g., emacs, xulrunner,
>>> cinnamon, gnome-shell, MATE). Am I missing, or misinterpreting,
>>> something? If not, is there a better/safer way for me to upgrade my
>>> GDAL to version >= 1.9?

Mikhail Titov Wed, 11 Jul 2012 01:26:55 -0500
>> You can give a try rebuilding just that package. If you are lucky it
>> won't pull much else.

>> This [1] may help to get an idea.

>> [1] http://ask.debian.net/questions/how-to-install-from-experimental-on-natty-gdal-1-9

Thanks! The good news is, I didn't hafta pull from experimental:

http://ftp.de.debian.org/debian/pool/main/g/gdal/
> gdal-bin_1.9.0-3+b1_amd64.deb 25-Jun-2012 09:03   325K
...
> gdal_1.9.0-3.dsc              05-Jun-2012 15:47   2.2K

Even better, I didn't need an uplevel libfontconfig1! and I only had to
touch my sources.list once, to get libsqlite3-dev version=3.7.13-1!
So the build was *almost* painless, except ...

1 It was a slog ... the kind of loonnnggg build that induces anxiety
  about the size of one's /tmp, about vulnerabilities to one's
  electrical grid, about the impending heat death of the universe :-)
  But such is life, when building on an older laptop.

2 After fiddling with the build dependencies,

me at it:/tmp/gdal$ dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc

  failed with

> error: could not create '/usr/local/lib/python2.6/dist-packages/osgeo': Permission denied
...
> error: could not create '/usr/local/lib/python2.7/dist-packages/osgeo': Permission denied
> make[1]: *** [install] Error 1
> make[1]: Leaving directory `/tmp/gdal/gdal-1.9.0/swig/python'
> make: *** [build-stamp] Error 2
> dpkg-buildpackage: error: debian/rules build gave error exit status 2

  I thought the fix might be to run as root, but that also failed
  (but quickly):

me at it:/tmp/gdal$ sudo dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
> dget: retrieving http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
...
> dscverify: gdal_1.9.0-3.dsc failed signature check:
> gpg: keyblock resource `/root/.gnupg/secring.gpg': file open error
> gpg: Signature made Tue 05 Jun 2012 09:24:57 AM EDT using DSA key ID E9F2C747
> gpg: fatal: /root/.gnupg: directory does not exist!
> secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
> Validation FAILED!!

  So how to fix the /usr/local/lib/python2.x/dist-packages/osgeo fails?

TIA, Tom Roche <Tom_Roche at pobox.com>

From DCarreira at edia.pt  Thu Jul 12 06:39:25 2012
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu, 12 Jul 2012 13:39:25 +0000
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
	<CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>
	<CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>
Message-ID: <A2C5C1FEBB05AA41A13D4F312D5F1A889C5FEC@AMSPRD0710MB365.eurprd07.prod.outlook.com>

For some reason stats in the individual files did not solve the issue, had to put it in the vrt.

Duarte

-----Mensagem original-----
De: Etienne Tourigny [mailto:etourigny.dev at gmail.com] 
Enviada: quinta-feira, 12 de Julho de 2012 13:28
Para: Duarte Carreira
Cc: p.meems at topx-group.nl; gdal-dev at lists.osgeo.org
Assunto: Re: [gdal-dev] Tiling aerial photos

You should generate the stats for every file, as you will probably get incorrect results with your method

for f in *.tif; do gdalinfo -stats $f ; done

On Thu, Jul 12, 2012 at 9:03 AM, Duarte Carreira <DCarreira at edia.pt> wrote:
> Hi Paul.
>
>
>
> I had to build a big vrt. The one trick that got it loading very fast 
> into qgis was adding statistics to each rasterband:
>
>   <Metadata>
>
>       <MDI key="STATISTICS_MAXIMUM">255</MDI>
>
>       <MDI key="STATISTICS_MEAN">111.6784426525</MDI>
>
>       <MDI key="STATISTICS_MINIMUM">0</MDI>
>
>       <MDI key="STATISTICS_STDDEV">52.100074055799</MDI>
>
>     </Metadata>
>
>
>
> I just got stats from a subset and used that for all bands.
>
>
>
> Duarte
>
>
>
> De: Paul Meems (Top-X) [mailto:p.meems at topx-group.nl]
> Enviada: quinta-feira, 12 de Julho de 2012 12:11
> Para: gdal-dev at lists.osgeo.org
> Assunto: Re: [gdal-dev] Tiling aerial photos
>
>
>
> Thanks Dmitry and Even,
>
> The aerial photos are north-up and are in the same projection and I 
> think also in the same resolution.
> It are commercial aerial photos.
>
> The Correlator project sounds very interesting but not necessary in my case.
> I'll try to implement the VRT format and see what the performance will be.
> If it is fast we don't need to tile.
>
> Thanks,
>
> Paul
>
> 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
>
> Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
>
>> Thanks Even,
>>
>> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
>> As I understand it, it will do the merging part (without actually 
>> merging).
>
> The VRT driver will do on-the-fly merging of tiles that have overlapping.
> The
> VRT itself is just a XML file.
>
>
>>
>> But it doesn't do the tiling part, right?
>
> No, I wasn't sure if your photos were already regularly tiled or not. 
> Note that the VRT accepts non regularly tiled images. They can have 
> overlapping, gaps, different resolutions, etc. The main constraints 
> are :
> - they are in the same projection
> - they are "north-up", that is to say there is no rotation or skewing 
> term in their geotransform matrix
> - they have the same number of bands
>
>
>> Or is the vrt so optimized tiling
>> is no longer necessary?
>
> Not necessary. Note that the VRT has no internal spatial indexing, so 
> if you have several dozains of thousands of images in a VRT, it might 
> slow down because it will iterate over all the image descriptions 
> (without needing to open them however, all the information is in the 
> VRT) to see if they intersect with the request window. But I'd expect 
> the number of images in the VRT to be really high for that effect to 
> become noticeable.
>
>>
>> Thanks,
>>
>> Paul
>
> 2012/7/12 Dmitry Baryshnikov <polimax at mail.ru>
>
> 12.07.2012 14:36, Paul Meems (Top-X) ?????:
>
> Thanks Even,
>
> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> As I understand it, it will do the merging part (without actually merging).
>
> But it doesn't do the tiling part, right? Or is the vrt so optimized 
> tiling is no longer necessary?
>
> Thanks,
>
> Paul
>
> 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
>
> Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
>
>
>> Hi list,
>>
>> I have several aerial photos and I use MapWindow GIS to view them.
>> MapWindow is already using GDAL v1.8
>>
>> Instead of loading each aerial photo as an individual layer I want to 
>> create a local tiles store of the photos.
>> I can then just load the tiles I need based on the scale and view. 
>> This will most likely improve the performance.
>>
>> The process will be something like this:
>> 1. Get the filenames of the photos
>> 2. Merge them into one
>> 3. Create tiles
>> 4. Put the tiles in a SQLite database
>>
>> My first question: Is the above suggested process correct or should I 
>> do it differently?
>> My second question: What GDAL functions should I look into to 
>> accomplish my process?
>
> You could try to make a VRT from all your photos. It will be seen as a 
> single GDAL dataset, and will take care of the burden of opening the 
> underlying photos when needed. You can use the gdalbuildvrt utility to 
> create the VRT from the photos.
>
>
>>
>> Thanks,
>>
>> Paul Meems
>> The Netherlands
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> There is an interesting work connected aerial imagery:
> http://trac.osgeo.org/gdal/wiki/Correlator
> http://correlatorgsoc2012.blogspot.com/
>
> Best regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From etourigny.dev at gmail.com  Thu Jul 12 06:59:09 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 12 Jul 2012 10:59:09 -0300
Subject: [gdal-dev] installing debian GDAL version >= 1.9
In-Reply-To: <87ehohyu4v.fsf@pobox.com>
References: <CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>
	<87obnowmnm.fsf@pobox.com> <871ukj1a70.fsf@pobox.com>
	<877gua4xu8.fsf@gmx.us> <87ehohyu4v.fsf@pobox.com>
Message-ID: <CA+TxYvMOi2Y6EBYod57P8Rqoqc4-NRNbLvba8jxHK6AXYO1CGA@mail.gmail.com>

Isn't there a debian repository (debiangis) that provides gdal-1.9 ????

Etienne

On Thu, Jul 12, 2012 at 10:41 AM, Tom Roche <Tom_Roche at pobox.com> wrote:
>
> summary: how to prevent or fix
>
> me at it:/tmp/gdal$ dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
> ... much, much later ...
>> error: could not create '/usr/local/lib/python2.6/dist-packages/osgeo': Permission denied
> ...
>> error: could not create '/usr/local/lib/python2.7/dist-packages/osgeo': Permission denied
>> make[1]: *** [install] Error 1
>> make[1]: Leaving directory `/tmp/gdal/gdal-1.9.0/swig/python'
>> make: *** [build-stamp] Error 2
>> dpkg-buildpackage: error: debian/rules build gave error exit status 2
>
> noting that `sudo` is no fix (more below)?
>
> details:
>
> Tom Roche Tue, Jul 10, 2012 7:13 PM
>>>> me at it:~$ aptitude search ~Dlibfontconfig1 | grep -e '^i' | less
>
>>>> appears to show many important dependencies (e.g., emacs, xulrunner,
>>>> cinnamon, gnome-shell, MATE). Am I missing, or misinterpreting,
>>>> something? If not, is there a better/safer way for me to upgrade my
>>>> GDAL to version >= 1.9?
>
> Mikhail Titov Wed, 11 Jul 2012 01:26:55 -0500
>>> You can give a try rebuilding just that package. If you are lucky it
>>> won't pull much else.
>
>>> This [1] may help to get an idea.
>
>>> [1] http://ask.debian.net/questions/how-to-install-from-experimental-on-natty-gdal-1-9
>
> Thanks! The good news is, I didn't hafta pull from experimental:
>
> http://ftp.de.debian.org/debian/pool/main/g/gdal/
>> gdal-bin_1.9.0-3+b1_amd64.deb 25-Jun-2012 09:03   325K
> ...
>> gdal_1.9.0-3.dsc              05-Jun-2012 15:47   2.2K
>
> Even better, I didn't need an uplevel libfontconfig1! and I only had to
> touch my sources.list once, to get libsqlite3-dev version=3.7.13-1!
> So the build was *almost* painless, except ...
>
> 1 It was a slog ... the kind of loonnnggg build that induces anxiety
>   about the size of one's /tmp, about vulnerabilities to one's
>   electrical grid, about the impending heat death of the universe :-)
>   But such is life, when building on an older laptop.
>
> 2 After fiddling with the build dependencies,
>
> me at it:/tmp/gdal$ dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
>
>   failed with
>
>> error: could not create '/usr/local/lib/python2.6/dist-packages/osgeo': Permission denied
> ...
>> error: could not create '/usr/local/lib/python2.7/dist-packages/osgeo': Permission denied
>> make[1]: *** [install] Error 1
>> make[1]: Leaving directory `/tmp/gdal/gdal-1.9.0/swig/python'
>> make: *** [build-stamp] Error 2
>> dpkg-buildpackage: error: debian/rules build gave error exit status 2
>
>   I thought the fix might be to run as root, but that also failed
>   (but quickly):
>
> me at it:/tmp/gdal$ sudo dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
>> dget: retrieving http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
> ...
>> dscverify: gdal_1.9.0-3.dsc failed signature check:
>> gpg: keyblock resource `/root/.gnupg/secring.gpg': file open error
>> gpg: Signature made Tue 05 Jun 2012 09:24:57 AM EDT using DSA key ID E9F2C747
>> gpg: fatal: /root/.gnupg: directory does not exist!
>> secmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/32768
>> Validation FAILED!!
>
>   So how to fix the /usr/local/lib/python2.x/dist-packages/osgeo fails?
>
> TIA, Tom Roche <Tom_Roche at pobox.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From p.meems at topx-group.nl  Thu Jul 12 07:00:35 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 12 Jul 2012 16:00:35 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <A2C5C1FEBB05AA41A13D4F312D5F1A889C5FEC@AMSPRD0710MB365.eurprd07.prod.outlook.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
	<CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>
	<CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5FEC@AMSPRD0710MB365.eurprd07.prod.outlook.com>
Message-ID: <CAHNf2YTk7_1bauGPNWLf9PodDG-5rNy4mjaR8ZtLsUDP8bVn9A@mail.gmail.com>

One more related question.
It seems using the VRT format is the way to go.

Of course I can make a wrapper around the executable and create a VRT like
that.
I can also add the functionality to the MapWindow ActiveX control, it is
already using GDAL for lots of other stuff.
Is gdalbuildvrt.exe easily included in another application or should I
stick with the executable?

Does anybody know how QGis is doing it?

Thanks,

Paul


2012/7/12 Duarte Carreira <DCarreira at edia.pt>

> For some reason stats in the individual files did not solve the issue, had
> to put it in the vrt.
>
> Duarte
>
> -----Mensagem original-----
> De: Etienne Tourigny [mailto:etourigny.dev at gmail.com]
> Enviada: quinta-feira, 12 de Julho de 2012 13:28
> Para: Duarte Carreira
> Cc: p.meems at topx-group.nl; gdal-dev at lists.osgeo.org
> Assunto: Re: [gdal-dev] Tiling aerial photos
>
> You should generate the stats for every file, as you will probably get
> incorrect results with your method
>
> for f in *.tif; do gdalinfo -stats $f ; done
>
> On Thu, Jul 12, 2012 at 9:03 AM, Duarte Carreira <DCarreira at edia.pt>
> wrote:
> > Hi Paul.
> >
> >
> >
> > I had to build a big vrt. The one trick that got it loading very fast
> > into qgis was adding statistics to each rasterband:
> >
> >   <Metadata>
> >
> >       <MDI key="STATISTICS_MAXIMUM">255</MDI>
> >
> >       <MDI key="STATISTICS_MEAN">111.6784426525</MDI>
> >
> >       <MDI key="STATISTICS_MINIMUM">0</MDI>
> >
> >       <MDI key="STATISTICS_STDDEV">52.100074055799</MDI>
> >
> >     </Metadata>
> >
> >
> >
> > I just got stats from a subset and used that for all bands.
> >
> >
> >
> > Duarte
> >
> >
> >
> > De: Paul Meems (Top-X) [mailto:p.meems at topx-group.nl]
> > Enviada: quinta-feira, 12 de Julho de 2012 12:11
> > Para: gdal-dev at lists.osgeo.org
> > Assunto: Re: [gdal-dev] Tiling aerial photos
> >
> >
> >
> > Thanks Dmitry and Even,
> >
> > The aerial photos are north-up and are in the same projection and I
> > think also in the same resolution.
> > It are commercial aerial photos.
> >
> > The Correlator project sounds very interesting but not necessary in my
> case.
> > I'll try to implement the VRT format and see what the performance will
> be.
> > If it is fast we don't need to tile.
> >
> > Thanks,
> >
> > Paul
> >
> > 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
> >
> > Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
> >
> >> Thanks Even,
> >>
> >> http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> >> As I understand it, it will do the merging part (without actually
> >> merging).
> >
> > The VRT driver will do on-the-fly merging of tiles that have overlapping.
> > The
> > VRT itself is just a XML file.
> >
> >
> >>
> >> But it doesn't do the tiling part, right?
> >
> > No, I wasn't sure if your photos were already regularly tiled or not.
> > Note that the VRT accepts non regularly tiled images. They can have
> > overlapping, gaps, different resolutions, etc. The main constraints
> > are :
> > - they are in the same projection
> > - they are "north-up", that is to say there is no rotation or skewing
> > term in their geotransform matrix
> > - they have the same number of bands
> >
> >
> >> Or is the vrt so optimized tiling
> >> is no longer necessary?
> >
> > Not necessary. Note that the VRT has no internal spatial indexing, so
> > if you have several dozains of thousands of images in a VRT, it might
> > slow down because it will iterate over all the image descriptions
> > (without needing to open them however, all the information is in the
> > VRT) to see if they intersect with the request window. But I'd expect
> > the number of images in the VRT to be really high for that effect to
> > become noticeable.
> >
> >>
> >> Thanks,
> >>
> >> Paul
> >
> > 2012/7/12 Dmitry Baryshnikov <polimax at mail.ru>
> >
> > 12.07.2012 14:36, Paul Meems (Top-X) ?????:
> >
> > Thanks Even,
> >
> > http://www.gdal.org/gdalbuildvrt.html does seems very interesting.
> > As I understand it, it will do the merging part (without actually
> merging).
> >
> > But it doesn't do the tiling part, right? Or is the vrt so optimized
> > tiling is no longer necessary?
> >
> > Thanks,
> >
> > Paul
> >
> > 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
> >
> > Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:
> >
> >
> >> Hi list,
> >>
> >> I have several aerial photos and I use MapWindow GIS to view them.
> >> MapWindow is already using GDAL v1.8
> >>
> >> Instead of loading each aerial photo as an individual layer I want to
> >> create a local tiles store of the photos.
> >> I can then just load the tiles I need based on the scale and view.
> >> This will most likely improve the performance.
> >>
> >> The process will be something like this:
> >> 1. Get the filenames of the photos
> >> 2. Merge them into one
> >> 3. Create tiles
> >> 4. Put the tiles in a SQLite database
> >>
> >> My first question: Is the above suggested process correct or should I
> >> do it differently?
> >> My second question: What GDAL functions should I look into to
> >> accomplish my process?
> >
> > You could try to make a VRT from all your photos. It will be seen as a
> > single GDAL dataset, and will take care of the burden of opening the
> > underlying photos when needed. You can use the gdalbuildvrt utility to
> > create the VRT from the photos.
> >
> >
> >>
> >> Thanks,
> >>
> >> Paul Meems
> >> The Netherlands
> >>
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > _______________________________________________
> >
> > gdal-dev mailing list
> >
> > gdal-dev at lists.osgeo.org
> >
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > There is an interesting work connected aerial imagery:
> > http://trac.osgeo.org/gdal/wiki/Correlator
> > http://correlatorgsoc2012.blogspot.com/
> >
> > Best regards,
> >     Dmitry
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/8cb98434/attachment.html>

From Tom_Roche at pobox.com  Thu Jul 12 07:16:38 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Thu, 12 Jul 2012 10:16:38 -0400
Subject: [gdal-dev] installing debian GDAL version >= 1.9
In-Reply-To: <CA+TxYvMOi2Y6EBYod57P8Rqoqc4-NRNbLvba8jxHK6AXYO1CGA@mail.gmail.com>
References: <CA+TxYvMOi2Y6EBYod57P8Rqoqc4-NRNbLvba8jxHK6AXYO1CGA@mail.gmail.com>
	<CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>
	<87obnowmnm.fsf@pobox.com> <871ukj1a70.fsf@pobox.com>
	<877gua4xu8.fsf@gmx.us> <87ehohyu4v.fsf@pobox.com>
Message-ID: <87629tyshl.fsf@pobox.com>


Tom Roche Thu Jul 12 06:41:04 PDT 2012
>> me at it:/tmp/gdal$ dget --build http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
>> ... much, much later ...
>> > error: could not create '/usr/local/lib/python2.6/dist-packages/osgeo': Permission denied
>> ...
>> > error: could not create '/usr/local/lib/python2.7/dist-packages/osgeo': Permission denied

Etienne Tourigny Thu, 12 Jul 2012 10:59:09 -0300
> Isn't there a debian repository (debiangis) that provides gdal-1.9

Yes, but that wants me to update libfontconfig1, which has major
reverse depends: see

http://lists.osgeo.org/pipermail/gdal-dev/2012-July/033366.html

From even.rouault at mines-paris.org  Thu Jul 12 07:16:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 16:16:02 +0200
Subject: [gdal-dev] Tiling aerial photos
In-Reply-To: <CAHNf2YTk7_1bauGPNWLf9PodDG-5rNy4mjaR8ZtLsUDP8bVn9A@mail.gmail.com>
References: <CAHNf2YS=r=JiM1zCk=41azbvRB3wP6rTCKGcvhtA=+BF4uAFoA@mail.gmail.com>
	<1342089116.4ffea79c30be1@imp.free.fr>
	<CAHNf2YTTzpAEri+2BoADe1Suo4jmvoWpGvcFUcx3rH+_R7Rjpg@mail.gmail.com>
	<4FFEACAB.8000108@mail.ru>
	<CAHNf2YSKU_vo3ABhHmd+nLPFmmY0AKuXtLak8Ui9etdBKMD48Q@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5F1F@AMSPRD0710MB365.eurprd07.prod.outlook.com>
	<CA+TxYvMhxhGW5g1SpmraC_+tBGAU-Fh+T4ai46n1EBhnzNUV_g@mail.gmail.com>
	<A2C5C1FEBB05AA41A13D4F312D5F1A889C5FEC@AMSPRD0710MB365.eurprd07.prod.outlook.com>
	<CAHNf2YTk7_1bauGPNWLf9PodDG-5rNy4mjaR8ZtLsUDP8bVn9A@mail.gmail.com>
Message-ID: <1342102562.4ffedc22d6865@imp.free.fr>

Selon "Paul Meems (Top-X)" <p.meems at topx-group.nl>:

> One more related question.
> It seems using the VRT format is the way to go.
>
> Of course I can make a wrapper around the executable and create a VRT like
> that.
> I can also add the functionality to the MapWindow ActiveX control, it is
> already using GDAL for lots of other stuff.
> Is gdalbuildvrt.exe easily included in another application or should I
> stick with the executable?

If you don't want to call gdalbuildvrt, embedding its source code into your app
should be doable. It just uses the public API of GDAL to do 99% of its job. It
is just r20960 that introduced a dependency on the C++ VRTDataset class for the
advanced functionnality of handling mask bands. You could remove it if you want
to stick to the C API only.

>
> Does anybody know how QGis is doing it?

QGIS will just manipulate the VRT as any other GDAL raster format, without
knowing it is a VRT. And for VRT creation, the GDALTools plugin will call
gdalbuildvrt.

>
> Thanks,
>
> Paul
>

From saad.hessane at gmail.com  Thu Jul 12 07:50:56 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Thu, 12 Jul 2012 16:50:56 +0200
Subject: [gdal-dev] Build overviews and tile index
Message-ID: <CAEcp1tATX_vzQcrERjog_W4Tx7UAhhV489fZJHrH3rPmhqBdjQ@mail.gmail.com>

Hi list,

I'm workig on a Mapserver/GDAL application, and I have to setup the
datasource (create tileindex and overviews) to boost the performance.

I have two question :

   1. Can I store overviews in a different path than the original raster
   path? The original path can be in a read only folder like an optical disc.
   2. Can I build overviews of an entire VRT tile index ?

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/ac43bab8/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 12 08:18:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 17:18:55 +0200
Subject: [gdal-dev] Build overviews and tile index
In-Reply-To: <CAEcp1tATX_vzQcrERjog_W4Tx7UAhhV489fZJHrH3rPmhqBdjQ@mail.gmail.com>
References: <CAEcp1tATX_vzQcrERjog_W4Tx7UAhhV489fZJHrH3rPmhqBdjQ@mail.gmail.com>
Message-ID: <1342106334.4ffeeadf00508@imp.free.fr>

Selon Sa?d HESSANE <saad.hessane at gmail.com>:

> Hi list,
>
> I'm workig on a Mapserver/GDAL application, and I have to setup the
> datasource (create tileindex and overviews) to boost the performance.
>
> I have two question :
>
>    1. Can I store overviews in a different path than the original raster
>    path? The original path can be in a read only folder like an optical disc.

This should be possible by using the GDAL PamProxy mechanism, but I'ma afraid
this is very lightly documented. See http://trac.osgeo.org/gdal/ticket/2432 for
some elements.

>    2. Can I build overviews of an entire VRT tile index ?

gdaladdo on a VRT should work.

>
> Thank you.
>



From even.rouault at mines-paris.org  Thu Jul 12 08:19:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 17:19:58 +0200
Subject: [gdal-dev] installing debian GDAL version >= 1.9
In-Reply-To: <87629tyshl.fsf@pobox.com>
References: <CA+TxYvMOi2Y6EBYod57P8Rqoqc4-NRNbLvba8jxHK6AXYO1CGA@mail.gmail.com>
	<CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>
	<87obnowmnm.fsf@pobox.com> <871ukj1a70.fsf@pobox.com>
	<877gua4xu8.fsf@gmx.us> <87ehohyu4v.fsf@pobox.com>
	<87629tyshl.fsf@pobox.com>
Message-ID: <1342106398.4ffeeb1e09489@imp.free.fr>

Selon Tom Roche <Tom_Roche at pobox.com>, INVALID_ADDRESS at .SYNTAX-ERROR.:

>
> Tom Roche Thu Jul 12 06:41:04 PDT 2012
> >> me at it:/tmp/gdal$ dget --build
> http://ftp.de.debian.org/debian/pool/main/g/gdal/gdal_1.9.0-3.dsc
> >> ... much, much later ...
> >> > error: could not create '/usr/local/lib/python2.6/dist-packages/osgeo':
> Permission denied
> >> ...
> >> > error: could not create '/usr/local/lib/python2.7/dist-packages/osgeo':
> Permission denied
>
> Etienne Tourigny Thu, 12 Jul 2012 10:59:09 -0300
> > Isn't there a debian repository (debiangis) that provides gdal-1.9
>
> Yes, but that wants me to update libfontconfig1, which has major
> reverse depends: see
>
> http://lists.osgeo.org/pipermail/gdal-dev/2012-July/033366.html
> _______________________________________________

You could download the stock GDAL source code and compile it. If you want to
build the python bindings without having root access, you can do :

./configure any-needed-option
make
cd swig/python
python setup.py build

and set the PYTHONPATH environmenet variable to point to the generated
swig/python/build/libXXXXX directory

You will also need to define the GDAL_DATA and adjust the PATH and
LD_LIBRARY_PATH to point to the appropriate paths.

As a GDAL developer, this is how I do in order to have many GDAL versions in
parallel, without messing up with /usr or /usr/local



From saad.hessane at gmail.com  Thu Jul 12 08:48:56 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Thu, 12 Jul 2012 17:48:56 +0200
Subject: [gdal-dev] Build overviews and tile index
In-Reply-To: <1342106334.4ffeeadf00508@imp.free.fr>
References: <CAEcp1tATX_vzQcrERjog_W4Tx7UAhhV489fZJHrH3rPmhqBdjQ@mail.gmail.com>
	<1342106334.4ffeeadf00508@imp.free.fr>
Message-ID: <CAEcp1tBJ8n8BAPoBgho_XDhy3vxaYZxGn2ToO__P-nPtwghjkA@mail.gmail.com>

Thank's Even.

2012/7/12 Even Rouault <even.rouault at mines-paris.org>

> Selon Sa?d HESSANE <saad.hessane at gmail.com>:
>
> > Hi list,
> >
> > I'm workig on a Mapserver/GDAL application, and I have to setup the
> > datasource (create tileindex and overviews) to boost the performance.
> >
> > I have two question :
> >
> >    1. Can I store overviews in a different path than the original raster
> >    path? The original path can be in a read only folder like an optical
> disc.
>
> This should be possible by using the GDAL PamProxy mechanism, but I'ma
> afraid
> this is very lightly documented. See
> http://trac.osgeo.org/gdal/ticket/2432 for
> some elements.
>
> >    2. Can I build overviews of an entire VRT tile index ?
>
> gdaladdo on a VRT should work.
>
> >
> > Thank you.
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/e02b747c/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 12 08:51:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 12 Jul 2012 17:51:58 +0200
Subject: [gdal-dev] Build overviews and tile index
In-Reply-To: <CAEcp1tBJ8n8BAPoBgho_XDhy3vxaYZxGn2ToO__P-nPtwghjkA@mail.gmail.com>
References: <CAEcp1tATX_vzQcrERjog_W4Tx7UAhhV489fZJHrH3rPmhqBdjQ@mail.gmail.com>
	<1342106334.4ffeeadf00508@imp.free.fr>
	<CAEcp1tBJ8n8BAPoBgho_XDhy3vxaYZxGn2ToO__P-nPtwghjkA@mail.gmail.com>
Message-ID: <1342108318.4ffef29ea16a6@imp.free.fr>

Selon Sa?d HESSANE <saad.hessane at gmail.com>:

> Thank's Even.
>

For the PamProxy, the best doc is probably to study the corresponding test in
the autotest suite :

http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/pamproxydb.py

Basically, it seems you just have to define the GDAL_PAM_PROXY_DIR environmenet
variable and then the .ovr files should be read from/written into it.

> 2012/7/12 Even Rouault <even.rouault at mines-paris.org>
>
> > Selon Sa??d HESSANE <saad.hessane at gmail.com>:
> >
> > > Hi list,
> > >
> > > I'm workig on a Mapserver/GDAL application, and I have to setup the
> > > datasource (create tileindex and overviews) to boost the performance.
> > >
> > > I have two question :
> > >
> > >    1. Can I store overviews in a different path than the original raster
> > >    path? The original path can be in a read only folder like an optical
> > disc.
> >
> > This should be possible by using the GDAL PamProxy mechanism, but I'ma
> > afraid
> > this is very lightly documented. See
> > http://trac.osgeo.org/gdal/ticket/2432 for
> > some elements.
> >
> > >    2. Can I build overviews of an entire VRT tile index ?
> >
> > gdaladdo on a VRT should work.
> >
> > >
> > > Thank you.
> > >
> >
> >
> >
>



From jgrn at illinois.edu  Thu Jul 12 10:38:07 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 12 Jul 2012 12:38:07 -0500
Subject: [gdal-dev] Matching two datasets...
Message-ID: <CABG0rfv_7upsy7T-jeT5=FiPjxWLRzz7NTTTOtF4wPi6_5BS8w@mail.gmail.com>

GDALers:

Hope this isn't too much of a noobish question.  Given two images, A
and B, I want to have B match A in terms of projection, extent, and
resolution such that A and B will stack perfectly.  The tricky part
here, and one I'm not sure how to solve is that while they are both
global datasets with the same projection and datum, the origin of
image A is at -180 long and image B is ~0 long, so B needs to be
"rotated" halfway around the world to properly line up with A.

Suggestions for solving this?  Thanks!  GDALINFO below.  I can drop
one of the two files in a dropbox if need be, and the other one comes
from the Worldclim website (its too big for me to share up here).

--j

IMAGE A:

C:\release-1600-x64-gdal-mapserver>gdalinfo P:\global_boundary\raster\climate\nc
ep\elevation_raw.envi
Driver: ENVI/ENVI .hdr Labelled
Files: P:\global_boundary\raster\climate\ncep\elevation_raw.envi
       P:\global_boundary\raster\climate\ncep\elevation_raw.envi.aux.xml
       P:\global_boundary\raster\climate\ncep\elevation_raw.hdr
Size is 43200, 18000
Coordinate System is:
GEOGCS["GCS_WGS_1984",
    DATUM["unknown",
        SPHEROID["WGS84",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["Degree",0.017453292519943295]]
Origin = (-180.000000000000000,90.000000000000000)
Pixel Size = (0.008333333333333,-0.008333333333333)
Metadata:
  Band_1=Band 1
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
Lower Left  (-180.0000000, -60.0000000) (180d 0' 0.00"W, 60d 0' 0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
Lower Right ( 180.0000000, -60.0000000) (180d 0' 0.00"E, 60d 0' 0.00"S)
Center      (  -0.0000000,  15.0000000) (  0d 0' 0.00"W, 15d 0' 0.00"N)
Band 1 Block=43200x1 Type=Float32, ColorInterp=Undefined
  Min=-431.000 Max=8233.000
  Minimum=-431.000, Maximum=8233.000, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=8233
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=-431
    STATISTICS_STDDEV=0

***

IMAGE B:
C:\release-1600-x64-gdal-mapserver>gdalinfo P:\global_boundary\raster\climate\nc
ep\wnd_raw.envi
Driver: ENVI/ENVI .hdr Labelled
Files: P:\global_boundary\raster\climate\ncep\wnd_raw.envi
       P:\global_boundary\raster\climate\ncep\wnd_raw.envi.aux.xml
       P:\global_boundary\raster\climate\ncep\wnd_raw.hdr
Size is 192, 94
Coordinate System is:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_84",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["Degree",0.017453292519943295]]
Origin = (-0.937500000000000,89.494064331054702)
Pixel Size = (1.875000000000000,-1.904129028320310)
Metadata:
  Band_10=Band 10
  Band_11=Band 11
  Band_12=Band 12
  Band_1=Band 1
  Band_2=Band 2
  Band_3=Band 3
  Band_4=Band 4
  Band_5=Band 5
  Band_6=Band 6
  Band_7=Band 7
  Band_8=Band 8
  Band_9=Band 9
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  -0.9375000,  89.4940643) (  0d56'15.00"W, 89d29'38.63"N)
Lower Left  (  -0.9375000, -89.4940643) (  0d56'15.00"W, 89d29'38.63"S)
Upper Right (     359.063,      89.494) (359d 3'45.00"E, 89d29'38.63"N)
Lower Right (     359.063,     -89.494) (359d 3'45.00"E, 89d29'38.63"S)
Center      ( 179.0625000,   0.0000000) (179d 3'45.00"E,  0d 0' 0.00"N)
Band 1 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.269 Max=13.755
  Minimum=0.269, Maximum=13.755, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=13.755012512207
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.26909247040749
    STATISTICS_STDDEV=0
Band 2 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.307 Max=13.714
  Minimum=0.307, Maximum=13.714, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=13.713808059692
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.30690503120422
    STATISTICS_STDDEV=0
Band 3 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.283 Max=13.383
  Minimum=0.283, Maximum=13.383, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=13.382827758789
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.28258854150772
    STATISTICS_STDDEV=0
Band 4 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.286 Max=14.461
  Minimum=0.286, Maximum=14.461, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=14.460576057434
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.28578454256058
    STATISTICS_STDDEV=0
Band 5 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.301 Max=14.373
  Minimum=0.301, Maximum=14.373, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=14.373078346252
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.30080729722977
    STATISTICS_STDDEV=0
Band 6 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.293 Max=14.635
  Minimum=0.293, Maximum=14.635, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=14.634740829468
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.29314732551575
    STATISTICS_STDDEV=0
Band 7 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.308 Max=14.486
  Minimum=0.308, Maximum=14.486, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=14.485512733459
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.30756038427353
    STATISTICS_STDDEV=0
Band 8 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.280 Max=15.288
  Minimum=0.280, Maximum=15.288, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=15.288056373596
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.28006967902184
    STATISTICS_STDDEV=0
Band 9 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.278 Max=14.957
  Minimum=0.278, Maximum=14.957, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=14.956644058228
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.27797880768776
    STATISTICS_STDDEV=0
Band 10 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.266 Max=13.162
  Minimum=0.266, Maximum=13.162, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=13.16206073761
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.26645627617836
    STATISTICS_STDDEV=0
Band 11 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.264 Max=12.027
  Minimum=0.264, Maximum=12.027, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=12.027455329895
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.26428005099297
    STATISTICS_STDDEV=0
Band 12 Block=192x1 Type=Float32, ColorInterp=Undefined
  Min=0.254 Max=12.724
  Minimum=0.254, Maximum=12.724, Mean=0.000, StdDev=0.000
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=12.723794937134
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0.25427594780922
    STATISTICS_STDDEV=0

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html

From elliott at cpi.com  Thu Jul 12 10:56:04 2012
From: elliott at cpi.com (elliott)
Date: Thu, 12 Jul 2012 13:56:04 -0400
Subject: [gdal-dev] Help with viewing MODIS L2 Cloud Data
Message-ID: <4FFF0FB4.9030204@cpi.com>

Hello,

I have used gdal 1.9.1 to view various HDF4 and HDF5 files without a 
problem.  I am current trying to use gdalinfo to look at a MODIS L2 Aqua 
Cloud Product data file ( MYD06_L2.A2002244.0410.004.2004203230354.hdf ) 
and it does not recognize the file format.  Is it because it is a Level 
2 product or because it is HDF-EOS format?  I have compiled gdal from 
source with both the HDF4 and HDF5 libraries.

Thanks,
Karan

From newmanw10 at gmail.com  Thu Jul 12 14:27:42 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Thu, 12 Jul 2012 15:27:42 -0600
Subject: [gdal-dev] Easy way to tell if my image is EPSG 4326
Message-ID: <CAD34qgmizEk7jAmPObTX4C+t-bGvj7DT7OPjdbEFT4Winefwbw@mail.gmail.com>

I am using java bindings to read in some metadata from image files.  I have
a check for images that are in EPSG:4326 (if not I warp them).  However I
have an image which I know is EPSG:4326 that has the following:
"GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG\","7030"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433,
AUTHORITY["EPSG","4326"]]"

This is the constant from gdal I am using to compare:
org.gdal.osr.osrConstants.SRS_WKT_WGS84 =
"GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG\","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]"

So obviously when I do a string  comparison the two strings do not match.

1. my file is marked wrong and I am hosed.  This is tough cause I have
thousands of these files.
2. There is a much better way to look at the images projection string to
determine that it is EPSG:4326 and not some other projection.  I also have
file that are in a Transverse Mercator projection and its projection string
contains "EPSG 4326", so I know that I cannot just check for that in the
projection string.

So in the end my question is this: how can I tell from the projection
string metadata that I get from a GDAL Dataset object (Java) if it is
EPSG:4326.

thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/7d8ef5c3/attachment.html>

From geoff at tritonimaginginc.com  Thu Jul 12 17:58:46 2012
From: geoff at tritonimaginginc.com (Geoff Shipton)
Date: Thu, 12 Jul 2012 17:58:46 -0700
Subject: [gdal-dev] Gdalwarp Mercator problem
Message-ID: <01f801cd6092$a93bc250$fbb346f0$@com>

Hello again,

 

Been having good success reprojecting TIFs from/to various different
projections (UTMs, State Plane, Mercator etc.)  but I have run into a
problem with gdalwarp generating a particular Mercator GeoTIFF.  At the
bottom of the mail is the console output from three operations:

 

1.       Gdalinfo output from the input, a standard UTM Zone 35N Geotiff

2.       Gdalwarp  output warping to a Mercator Projection.

3.       Gdalinfo output from the resulting Tif.

 

Although the TIF image looks OK and is rotated about as you would expect, as
you can see there are some invalid fields in the output from step #3,

 

In case it helps the three Proj4 strings are:

 

"+proj=utm +zone=35 +datum=WGS84 +units=m +no_defs"  (from the original TIF)

"+proj=merc +datum=WGS84 +lon_0=0 +lat_ts=41.5 +x_0=0 +y_0=2000000" (input
to gdawarp)

"+proj=merc +lon_0=0 +k=1 +x_0=-1.#IND +y_0=0 +datum=WGS84 +to_meter=0
+no_defs" (the proj4 string from the final TIF)

 

If it helps I can provide links to the TIF files.

 

Can anyone spot what I am doing wrong?

 

Many thanks,

 

Geoff

 

STEP#1:

----------------------------------------------------------------------------
--

 

gdalinfo -proj4 G:\Tifftest\Marmara\testTrans_0_TRANS.tif

Driver: GTiff/GeoTIFF

Files: G:\Tifftest\Marmara\testTrans_0_TRANS.tif

       G:\Tifftest\Marmara\testTrans_0_TRANS.tfw

Size is 1030, 740

Coordinate System is:

PROJCS["WGS 84 / UTM zone 35N",

    GEOGCS["WGS 84",

        DATUM["WGS_1984",

            SPHEROID["WGS 84",6378137,298.257223563,

                AUTHORITY["EPSG","7030"]],

            AUTHORITY["EPSG","6326"]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433],

        AUTHORITY["EPSG","4326"]],

    PROJECTION["Transverse_Mercator"],

    PARAMETER["latitude_of_origin",0],

    PARAMETER["central_meridian",27],

    PARAMETER["scale_factor",0.9996],

    PARAMETER["false_easting",500000],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]],

    AUTHORITY["EPSG","32635"]]

PROJ.4 string is:

'+proj=utm +zone=35 +datum=WGS84 +units=m +no_defs '

Origin = (640314.119512796050000,4530851.144891739800000)

Pixel Size = (0.999893837330017,-0.999390728012785)

Metadata:

  AREA_OR_POINT=Area

  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)

  TIFFTAG_XRESOLUTION=96

  TIFFTAG_YRESOLUTION=96

Image Structure Metadata:

  INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left  (  640314.120, 4530851.145) ( 28d39'58.54"E, 40d55' 0.27"N)

Lower Left  (  640314.120, 4530111.596) ( 28d39'57.94"E, 40d54'36.30"N)

Upper Right (  641344.010, 4530851.145) ( 28d40'42.55"E, 40d54'59.63"N)

Lower Right (  641344.010, 4530111.596) ( 28d40'41.94"E, 40d54'35.66"N)

Center      (  640829.065, 4530481.370) ( 28d40'20.24"E, 40d54'47.96"N)

Band 1 Block=1030x1 Type=Byte, ColorInterp=Red

  Mask Flags: PER_DATASET ALPHA

Band 2 Block=1030x1 Type=Byte, ColorInterp=Green

  Mask Flags: PER_DATASET ALPHA

Band 3 Block=1030x1 Type=Byte, ColorInterp=Blue

  Mask Flags: PER_DATASET ALPHA

Band 4 Block=1030x1 Type=Byte, ColorInterp=Alpha

 

STEP#2

----------------------------------------------------------------------------
--

 

Gdalwarp -co TFW=YES -t_srs "+proj=merc +datum=WGS84 +lon_0=0 +lat_ts=41.5
+x_0=0 +y_0=20

00000" G:\Tifftest\Marmara\testTrans_0_TRANS.tif
G:\Tifftest\Marmara\test.tif

Creating output file that is 1044P x 759L.

Processing input file G:\Tifftest\Marmara\testTrans_0_TRANS.tif.

Using band 4 of source image as alpha.

Using band 4 of destination image as alpha.

0...10...20...30...40...50...60...70...80...90...100 - done.

 

STEP#3

----------------------------------------------------------------------------
---

 

 

gdalinfo -proj4 G:\Tifftest\Marmara\test.tif

Driver: GTiff/GeoTIFF

Files: G:\Tifftest\Marmara\test.tif

       G:\Tifftest\Marmara\test.tfw

Size is 1044, 759

Coordinate System is:

PROJCS["unnamed",

    GEOGCS["WGS 84",

        DATUM["WGS_1984",

            SPHEROID["WGS 84",6378137,298.257223563,

                AUTHORITY["EPSG","7030"]],

            AUTHORITY["EPSG","6326"]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433],

        AUTHORITY["EPSG","4326"]],

    PROJECTION["Mercator_1SP"],

    PARAMETER["central_meridian",0],

    PARAMETER["scale_factor",1],

    PARAMETER["false_easting","-1.#IND"],

    PARAMETER["false_northing","1.#INF"],

    UNIT["degree minute second hemisphere",0,

        AUTHORITY["EPSG","9108"]]]

PROJ.4 string is:

'+proj=merc +lon_0=0 +k=1 +x_0=-1.#IND +y_0=0 +datum=WGS84 +to_meter=0
+no_defs

'

Origin = (2393508.975926194800000,5729350.050399892000000)

Pixel Size = (0.990987191737565,-0.990987191737565)

Metadata:

  AREA_OR_POINT=Area

Image Structure Metadata:

  INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left  ( 2393508.976, 5729350.050) (  0d 0' 0.03"E,  0d 0' 0.01"N)

Lower Left  ( 2393508.976, 5728597.891) (  0d 0' 0.03"E,  0d 0' 0.01"N)

Upper Right ( 2394543.567, 5729350.050) (  0d 0' 0.03"E,  0d 0' 0.01"N)

Lower Right ( 2394543.567, 5728597.891) (  0d 0' 0.03"E,  0d 0' 0.01"N)

Center      ( 2394026.271, 5728973.971) (  0d 0' 0.03"E,  0d 0' 0.01"N)

Band 1 Block=1044x1 Type=Byte, ColorInterp=Red

  Mask Flags: PER_DATASET ALPHA

Band 2 Block=1044x1 Type=Byte, ColorInterp=Green

  Mask Flags: PER_DATASET ALPHA

Band 3 Block=1044x1 Type=Byte, ColorInterp=Blue

  Mask Flags: PER_DATASET ALPHA

Band 4 Block=1044x1 Type=Byte, ColorInterp=Alpha

Geoff Shipton,
Triton Imaging Inc.
Customer Support.
Capitola CA.
 <mailto:geoff at tritonimaginginc.com> geoff at tritonimaginginc.com

The information contained in this message may be privileged or confidential
information intended solely for the use of the addressee(s).  Any views or
opinions presented in this communication do not necessarily represent those
of Triton Imaging, Inc.  If the reader of this message is not the intended
recipient, you are hereby notified that any dissemination, distribution or
copying of this communication is strictly prohibited.  If you have received
this communication in error, please immediately notify me and you are hereby
instructed to delete all electronic copies and destroy all printed copies.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/fa263474/attachment-0001.html>

From taibc_coltech at yahoo.com  Thu Jul 12 20:56:53 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Thu, 12 Jul 2012 20:56:53 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using Ogr
 C++ class on Visual Studio 2010
Message-ID: <1342151813059-4988103.post@n6.nabble.com>

Hi everyone,

I am trying to use Ogr C++ class on Visual Studio 2010. I created an new
empty Visual C++ project (Win 32 Console Application). Then added Ogr files
into project, then buid it.

I got the errors similar as below: 

/Error	147	error LNK2001: unresolved external symbol "private: virtual int
__thiscall OGRLinearRing::_exportToWkb(enum OGRwkbByteOrder,int,unsigned
char *)const " (?_exportToWkb at OGRLinearRing@@EBEHW4OGRwkbByteOrder@@HPAE at Z)
c:\Users\administrator\documents\visual studio
2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter/

Do you know how to fix it ?

Thanks and regards,

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From polimax at mail.ru  Thu Jul 12 23:16:30 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri, 13 Jul 2012 10:16:30 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342151813059-4988103.post@n6.nabble.com>
References: <1342151813059-4988103.post@n6.nabble.com>
Message-ID: <4FFFBD3E.9040703@mail.ru>

13.07.2012 7:56, taibc ?????:
> Hi everyone,
>
> I am trying to use Ogr C++ class on Visual Studio 2010. I created an new
> empty Visual C++ project (Win 32 Console Application). Then added Ogr files
> into project, then buid it.
>
> I got the errors similar as below:
>
> /Error	147	error LNK2001: unresolved external symbol "private: virtual int
> __thiscall OGRLinearRing::_exportToWkb(enum OGRwkbByteOrder,int,unsigned
> char *)const " (?_exportToWkb at OGRLinearRing@@EBEHW4OGRwkbByteOrder@@HPAE at Z)
> c:\Users\administrator\documents\visual studio
> 2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter/
>
> Do you know how to fix it ?
>
> Thanks and regards,
>
> Tai
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Hi,

You have to link gdal1x.lib to your project

Best regards,
Dmitry

From taibc_coltech at yahoo.com  Thu Jul 12 23:56:33 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Thu, 12 Jul 2012 23:56:33 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFBD3E.9040703@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
Message-ID: <1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>

Thanks Dmitry,

I linked the file gdal_i.lib to the project (by editing 'Additional Dependencies' in the area: Linker/Input). And still got similar errors (but the number of errors were reduced) ?

Kind regards,
Tai



________________________________
 From: Dmitry Baryshnikov [via OSGeo.org] <ml-node+s1560n4988120h39 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Friday, July 13, 2012 1:17 PM
Subject: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
 

13.07.2012 7:56, taibc ?????: 

> Hi everyone, 
> 
> I am trying to use Ogr C++ class on Visual Studio 2010. I created an new 
> empty Visual C++ project (Win 32 Console Application). Then added Ogr files 
> into project, then buid it. 
> 
> I got the errors similar as below: 
> 
> /Error	147	error LNK2001: unresolved external symbol "private: virtual int 
> __thiscall OGRLinearRing::_exportToWkb(enum OGRwkbByteOrder,int,unsigned 
> char *)const " (?_exportToWkb at OGRLinearRing@@EBEHW4OGRwkbByteOrder@@HPAE at Z) 
> c:\Users\administrator\documents\visual studio 
> 2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter/ 
> 
> Do you know how to fix it ? 
> 
> Thanks and regards, 
> 
> Tai 
> 
> -- 
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com. 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> Hi, 

You have to link gdal1x.lib to your project 

Best regards, 
Dmitry 
_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988120.html 
To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
NAML

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988131.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120712/e9730022/attachment.html>

From polimax at mail.ru  Fri Jul 13 00:04:08 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri, 13 Jul 2012 11:04:08 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
Message-ID: <4FFFC868.9020305@mail.ru>

13.07.2012 10:56, taibc ?????:
> Thanks Dmitry,
>
> I linked the file gdal_i.lib to the project (by editing 'Additional 
> Dependencies' in the area: Linker/Input). And still got similar errors 
> (but the number of errors were reduced) ?
>
> Kind regards,
> Tai
>
> ------------------------------------------------------------------------
> *From:* Dmitry Baryshnikov [via OSGeo.org] <[hidden email] 
> </user/SendEmail.jtp?type=node&node=4988131&i=0>>
> *To:* taibc <[hidden email] 
> </user/SendEmail.jtp?type=node&node=4988131&i=1>>
> *Sent:* Friday, July 13, 2012 1:17 PM
> *Subject:* Re: Error LNK1120: 314 unresolved externals - When using 
> Ogr C++ class on Visual Studio 2010
>
> 13.07.2012 7:56, taibc ?????:
>
> > Hi everyone,
> >
> > I am trying to use Ogr C++ class on Visual Studio 2010. I created an 
> new
> > empty Visual C++ project (Win 32 Console Application). Then added 
> Ogr files
> > into project, then buid it.
> >
> > I got the errors similar as below:
> >
> > /Error 147 error LNK2001: unresolved external symbol "private: 
> virtual int
> > __thiscall OGRLinearRing::_exportToWkb(enum 
> OGRwkbByteOrder,int,unsigned
> > char *)const " 
> (?_exportToWkb at OGRLinearRing@@EBEHW4OGRwkbByteOrder@@HPAE at Z)
> > c:\Users\administrator\documents\visual studio
> > 2010\Projects\CLCConverter\CLCConverter\main.obj CLCConverter/
> >
> > Do you know how to fix it ?
> >
> > Thanks and regards,
> >
> > Tai
> >
> > --
> > View this message in context: 
> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com 
> <http://nabble.com/>.
> > _______________________________________________
> > gdal-dev mailing list
> > [hidden email]
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> Hi,
>
> You have to link gdal1x.lib to your project
>
> Best regards,
> Dmitry
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------------------------------------------------
> If you reply to this email, your message will be added to the 
> discussion below:
> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988120.html 
>
> To unsubscribe from Error LNK1120: 314 unresolved externals - When 
> using Ogr C++ class on Visual Studio 2010, click here.
> NAML 
> <http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>
>
>
>
> ------------------------------------------------------------------------
> View this message in context: Re: Error LNK1120: 314 unresolved 
> externals - When using Ogr C++ class on Visual Studio 2010 
> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988131.html>
> Sent from the GDAL - Dev mailing list archive 
> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
> Nabble.com.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

After linking, you can use only exported classes and methods. It seems 
to me you try to use not exported method. Maybe some your code can help.

Best regards,
     Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/027e2781/attachment-0001.html>

From taibc_coltech at yahoo.com  Fri Jul 13 00:18:55 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 13 Jul 2012 00:18:55 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFC868.9020305@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
Message-ID: <1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>

Hi,

What are exported classes/methods ?
I only created a file: main.cpp to show the word "Hello", and added Ogr files into my project, then built it.

Please see the attached file.

My idea is: I will create functions in the main.cpp file that use methods of Ogr class to allow convert .dgn files to shape files.

Thanks and regards,

Tai

View this message in context: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
>
>_______________________________________________
gdal-dev mailing list [hidden email] http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

After linking, you can use only exported classes and methods. It
    seems to me you try to use not exported method. Maybe some your code
    can help.

Best regards,
??? Dmitry


_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988133.html 
To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
NAML

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988136.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/03aa60d2/attachment.html>

From polimax at mail.ru  Fri Jul 13 00:44:26 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri, 13 Jul 2012 11:44:26 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
Message-ID: <4FFFD1DA.8040808@mail.ru>

13.07.2012 11:18, taibc ?????:
> Hi,
>
> What are exported classes/methods ?
> I only created a file: main.cpp to show the word "Hello", and added 
> Ogr files into my project, then built it.
>
> Please see the attached file.
>
> My idea is: I will create functions in the main.cpp file that use 
> methods of Ogr class to allow convert .dgn files to shape files.
>
> Thanks and regards,
>
> Tai
>> View this message in context: Re: Error LNK1120: 314 unresolved 
>> externals - When using Ogr C++ class on Visual Studio 2010 
>> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988131.html>
>> Sent from the GDAL - Dev mailing list archive 
>> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
>> Nabble.com.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Hi,
>
> After linking, you can use only exported classes and methods. It seems 
> to me you try to use not exported method. Maybe some your code can help.
>
> Best regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------------------------------------------------
> If you reply to this email, your message will be added to the 
> discussion below:
> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988133.html 
>
> To unsubscribe from Error LNK1120: 314 unresolved externals - When 
> using Ogr C++ class on Visual Studio 2010, click here.
> NAML 
> <http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>
>
>
>
> *Error.jpg* (343K) Download Attachment 
> <http://osgeo-org.1560.n6.nabble.com/attachment/4988136/0/Error.jpg>
>
> ------------------------------------------------------------------------
> View this message in context: Re: Error LNK1120: 314 unresolved 
> externals - When using Ogr C++ class on Visual Studio 2010 
> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988136.html>
> Sent from the GDAL - Dev mailing list archive 
> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
> Nabble.com.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

You mast remove any cpl_*.cpp and any gdal headers from your solution. 
In project properties you have to put path to gdal headers 
(gdal_root/port, gdal_root/gcore, gdal_root/ogr)
E.g. for GDALVersionInfo function you have to include only in your code 
#include "gdal.h"

Best regards,
     Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/43a10b48/attachment.html>

From taibc_coltech at yahoo.com  Fri Jul 13 00:54:45 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 13 Jul 2012 00:54:45 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFD1DA.8040808@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
Message-ID: <1342166063.45016.YahooMailNeo@web190001.mail.sg3.yahoo.com>

Ok, thank you !


Kind regards,

Tai



________________________________
 From: Dmitry Baryshnikov [via OSGeo.org] <ml-node+s1560n4988142h21 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Friday, July 13, 2012 2:44 PM
Subject: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
 

13.07.2012 11:18, taibc ?????:

Hi,
>
>What are exported classes/methods ?
>I only created a file: main.cpp to show the word "Hello", and
        added Ogr files into my project, then built it.
>
>Please see the attached file.
>
>My idea is: I will create functions in the main.cpp file that
        use methods of Ogr class to allow convert .dgn files to shape
        files.
>
>Thanks and regards,
>
>Tai
>
>View this message in context: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
>>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>>
>>
>>_______________________________________________
gdal-dev mailing list [hidden email] http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,
>
>After linking, you can use only exported classes and
              methods. It seems to me you try to use not exported
              method. Maybe some your code can help.
>
>Best regards,
>??? Dmitry
>
>
>_______________________________________________ 
>gdal-dev mailing list 
>[hidden email] 
>http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>
>>________________________________
> 
>If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988133.html 
>To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
>NAML 
>
>
>
> Error.jpg (343K) Download Attachment
>>________________________________
> View this message in context: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
>
>_______________________________________________
gdal-dev mailing list [hidden email] http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,
?
You mast remove any cpl_*.cpp and any gdal headers from your
    solution. In project properties you have to put path to gdal headers
    (gdal_root/port, gdal_root/gcore, gdal_root/ogr)
E.g. for GDALVersionInfo function you have to include only in your
    code #include "gdal.h"

Best regards,
??? Dmitry


_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988142.html 
To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
NAML

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988144.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/474d124a/attachment-0001.html>

From mateusz at loskot.net  Fri Jul 13 01:19:56 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 13 Jul 2012 09:19:56 +0100
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFD1DA.8040808@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
Message-ID: <CABUeae_WPidu9S8ZY=P6+AqkSPXiLLMAQf3w+GHNPCAPTKmCWQ@mail.gmail.com>

> 13.07.2012 11:18, taibc ?????:
>
> What are exported classes/methods ?

http://gdal.org/annotated.html
http://gdal.org/ogr/annotated.html

> I only created a file: main.cpp to show the word "Hello", and added Ogr files into my project, then built it.
>
> Please see the attached file.
>
> My idea is: I will create functions in the main.cpp file that use methods of Ogr class to allow convert .dgn files to shape files.

Read the last paragraph of "Building From Source" section

http://trac.osgeo.org/gdal/wiki/BuildingOnWindows

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at mines-paris.org  Fri Jul 13 01:50:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 10:50:23 +0200
Subject: [gdal-dev] Easy way to tell if my image is EPSG 4326
In-Reply-To: <CAD34qgmizEk7jAmPObTX4C+t-bGvj7DT7OPjdbEFT4Winefwbw@mail.gmail.com>
References: <CAD34qgmizEk7jAmPObTX4C+t-bGvj7DT7OPjdbEFT4Winefwbw@mail.gmail.com>
Message-ID: <1342169423.4fffe14f07f8d@imp.free.fr>

> So in the end my question is this: how can I tell from the projection
> string metadata that I get from a GDAL Dataset object (Java) if it is
> EPSG:4326.

You can try the AutoIdentifyEPSG() method of the SpatialReference class. And
then check that GetAuthorityName() returns "EPSG" and GetAuthorityCode() returns
4326.

>
> thanks
>



From marlam at marlam.de  Fri Jul 13 02:00:32 2012
From: marlam at marlam.de (Martin Lambers)
Date: Fri, 13 Jul 2012 11:00:32 +0200
Subject: [gdal-dev] Warp API / gdalwarp: using projection supported by PROJ4,
 but not explicitly by GDAL?
Message-ID: <20120713110032.39febc6b@jones>

Hello everyone,

I have a question about the GDAL Warp API and the gdalwarp utility.

I have added a new projection to PROJ4 (ticket #179), and would like
to use it with GDAL Warp.

For this purpose, I use the string
"+proj=qsc +a=6378137.0 +b=6356752.314245 +lat_0=90 +lon_0=0 +units=m"
as an argument to the -t_srs option of gdalwarp, and also to
OGRSpatialReference::importFromProj4() for passing the result to the
Warp API.

However, this requires explicit support for the projection not just in
PROJ4, but also in GDAL. I currently use the attached patch to add
that support, but is there a way to avoid patching GDAL for this
purpose?

Best regards,
Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0002-Add-the-Quadrilateralized-Spherical-Cube-QSC-project.patch
Type: text/x-patch
Size: 5852 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/a44bd158/attachment.bin>

From even.rouault at mines-paris.org  Fri Jul 13 02:22:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 11:22:13 +0200
Subject: [gdal-dev] Warp API / gdalwarp: using projection supported by
	PROJ4, but not explicitly by GDAL?
In-Reply-To: <20120713110032.39febc6b@jones>
References: <20120713110032.39febc6b@jones>
Message-ID: <1342171333.4fffe8c5a6926@imp.free.fr>

Selon Martin Lambers <marlam at marlam.de>:

> Hello everyone,
>
> I have a question about the GDAL Warp API and the gdalwarp utility.
>
> I have added a new projection to PROJ4 (ticket #179), and would like
> to use it with GDAL Warp.
>
> For this purpose, I use the string
> "+proj=qsc +a=6378137.0 +b=6356752.314245 +lat_0=90 +lon_0=0 +units=m"
> as an argument to the -t_srs option of gdalwarp, and also to
> OGRSpatialReference::importFromProj4() for passing the result to the
> Warp API.
>
> However, this requires explicit support for the projection not just in
> PROJ4, but also in GDAL. I currently use the attached patch to add
> that support, but is there a way to avoid patching GDAL for this
> purpose?

To preserve a proj4 string intact through GDAL, you need to add the "+wktext"
option at the end of the proj.4 string. Unfortunately, until recently (
http://trac.osgeo.org/gdal/changeset/24063/trunk/gdal/ogr/ogr_srs_proj4.cpp
which will be released in GDAL 2.0 ), this would still require GDAL to be able
to recognize the projection method.

At first sight, your patch to add support for the qsc method looks good (except
that I believe that, for consistency with other SRS, the words in the SRS_PT_QSC
string should be separated with underscore rather than space. Would you mind
opening a ticket in GDAL Trac with it attached.

>
> Best regards,
> Martin



From marlam at marlam.de  Fri Jul 13 02:49:16 2012
From: marlam at marlam.de (Martin Lambers)
Date: Fri, 13 Jul 2012 11:49:16 +0200
Subject: [gdal-dev] Warp API / gdalwarp: using projection supported by
 PROJ4, but not explicitly by GDAL?
In-Reply-To: <1342171333.4fffe8c5a6926@imp.free.fr>
References: <20120713110032.39febc6b@jones>
	<1342171333.4fffe8c5a6926@imp.free.fr>
Message-ID: <20120713114916.1c37570c@daffy>

On Fri, 13 Jul 2012 11:22:13 +0200, Even Rouault wrote:
> > I have added a new projection to PROJ4 (ticket #179), and would like
> > to use it with GDAL Warp.
> >
> > For this purpose, I use the string
> > "+proj=qsc +a=6378137.0 +b=6356752.314245 +lat_0=90 +lon_0=0
> > +units=m" as an argument to the -t_srs option of gdalwarp, and also
> > to OGRSpatialReference::importFromProj4() for passing the result to
> > the Warp API.
> >
> > However, this requires explicit support for the projection not just
> > in PROJ4, but also in GDAL. I currently use the attached patch to
> > add that support, but is there a way to avoid patching GDAL for this
> > purpose?
> 
> To preserve a proj4 string intact through GDAL, you need to add the
> "+wktext" option at the end of the proj.4 string. Unfortunately,
> until recently
> ( http://trac.osgeo.org/gdal/changeset/24063/trunk/gdal/ogr/ogr_srs_proj4.cpp
> which will be released in GDAL 2.0 ), this would still require GDAL
> to be able to recognize the projection method.

Thank you very much Even, this is exactly what I was looking for. I
just tested it with the latest GDAL from SVN and it works perfectly both
with gdalwarp and with the Warp API.

> At first sight, your patch to add support for the qsc method looks
> good (except that I believe that, for consistency with other SRS, the
> words in the SRS_PT_QSC string should be separated with underscore
> rather than space. Would you mind opening a ticket in GDAL Trac with
> it attached.

I could certainly do that, but with the '+wktext' mechanism, there is
no reason to add this patch anymore, is there?

Best regards,
Martin

From taibc_coltech at yahoo.com  Fri Jul 13 02:55:08 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 13 Jul 2012 02:55:08 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFD1DA.8040808@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
Message-ID: <1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>

Hi, 

Although, I added 'gdal_i.lib' in Properties (Linker ->Input->Additional Dependencies) and this file in Debug folder, but I got an other errror:

error LNK1104: cannot open file 'gdal_i.lib'?? 

Do you know how to fix it ?

Thanks and regards,

Tai
?

_______________________________________________
gdal-dev mailing list [hidden email] http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,
?
You mast remove any cpl_*.cpp and any gdal headers from your
    solution. In project properties you have to put path to gdal headers
    (gdal_root/port, gdal_root/gcore, gdal_root/ogr)
E.g. for GDALVersionInfo function you have to include only in your
    code #include "gdal.h"

Best regards,
??? Dmitry


_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988142.html 
To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
NAML

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988177.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/4103bf00/attachment.html>

From even.rouault at mines-paris.org  Fri Jul 13 03:01:21 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 12:01:21 +0200
Subject: [gdal-dev] Warp API / gdalwarp: using projection supported by
	PROJ4, but not explicitly by GDAL?
In-Reply-To: <20120713114916.1c37570c@daffy>
References: <20120713110032.39febc6b@jones>
	<1342171333.4fffe8c5a6926@imp.free.fr>
	<20120713114916.1c37570c@daffy>
Message-ID: <1342173681.4ffff1f138515@imp.free.fr>


> I could certainly do that, but with the '+wktext' mechanism, there is
> no reason to add this patch anymore, is there?

Your patch is a cleaner solution than the +wktext mechanism, which remains
something a bit hacky (although I must admit I had never heard before of that
QSC projection ! and it is probably some niche projection). The advantage of
having it properly recognized is that you can then embed its WKT representation
in a .aux.xml file and all tools using GDAL will be able to deal properly with
it.

But reading again your initial email, I didn't realize that it is not yet
supported in proj, only proposed. So we will wait for it to be committed in PROJ
first before committing its support in GDAL.

>
> Best regards,
> Martin
>



From polimax at mail.ru  Fri Jul 13 03:02:21 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri, 13 Jul 2012 14:02:21 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
Message-ID: <4FFFF22D.3050609@mail.ru>

13.07.2012 13:55, taibc ?????:
> Hi,
>
> Although, I added 'gdal_i.lib' in Properties (Linker 
> ->Input->Additional Dependencies) and this file in Debug folder, but I 
> got an other errror:
>
> error LNK1104: cannot open file 'gdal_i.lib'
>
> Do you know how to fix it ?
>
> Thanks and regards,
>
> Tai
>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Hi,
>
> You mast remove any cpl_*.cpp and any gdal headers from your solution. 
> In project properties you have to put path to gdal headers 
> (gdal_root/port, gdal_root/gcore, gdal_root/ogr)
> E.g. for GDALVersionInfo function you have to include only in your 
> code #include "gdal.h"
>
> Best regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------------------------------------------------
> If you reply to this email, your message will be added to the 
> discussion below:
> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988142.html 
>
> To unsubscribe from Error LNK1120: 314 unresolved externals - When 
> using Ogr C++ class on Visual Studio 2010, click here.
> NAML 
> <http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>
>
>
>
> ------------------------------------------------------------------------
> View this message in context: Re: Error LNK1120: 314 unresolved 
> externals - When using Ogr C++ class on Visual Studio 2010 
> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988177.html>
> Sent from the GDAL - Dev mailing list archive 
> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
> Nabble.com.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Put there (Linker ->Input->Additional Dependencies) the full path to 
gdal_i.lib or add the path to gdal_i.lib in Linker 
->General->AdditionalLibraryDirectories

Best regards,
     Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/3417b2ae/attachment-0001.html>

From even.rouault at mines-paris.org  Fri Jul 13 03:14:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 12:14:51 +0200
Subject: [gdal-dev] Memory leaks when using SQL queries with shapefiles
In-Reply-To: <4FFD8D7B.90507@actgate.com>
References: <4FFD8D7B.90507@actgate.com>
Message-ID: <1342174491.4ffff51b34d7e@imp.free.fr>

Selon Pierluigi Guasqui <guasqui at actgate.com>:

> Hello,
>
> I am experiencing a big memory allocation (with no subsequent memory
> release) when using SQL queries with shapefiles. This is a sample code
> that triggers this problem:
>
>      OGRRegisterAll();
>
>      // opening shapefile data source
>      const char *fname = "path/to/shapefile.shp";
>      OGRDataSource *poDS;
>      poDS = OGRSFDriverRegistrar::Open( fname, FALSE );
>
>      if( poDS == NULL )
>      {
>          fprintf( stderr, "%s: could not open input file\n", fname );
>          return -1;
>      }
>
>      // creating the spatial filter
>      OGRLineString regionPolygon;
>      OGRRawPoint *pointsList = new OGRRawPoint[5];
>      pointsList[0].x = -180; pointsList[0].y =  90;
>      pointsList[1].x =  180; pointsList[1].y =  90;
>      pointsList[2].x =  180; pointsList[2].y = -90;
>      pointsList[3].x = -180; pointsList[3].y = -90;
>      pointsList[4].x = -180; pointsList[4].y =  90;
>      regionPolygon.setPoints(5, pointsList);
>      delete[] pointsList;
>
>      // executing the query
>      const char *query = "SELECT * FROM table_name WHERE some_field LIKE
> '%bla%' ORDER BY some_other_field";
>      OGRLayer *rs = poDS->ExecuteSQL( query, &regionPolygon, NULL );
>
>      // releasing memory
>      poDS-> ReleaseResultSet( rs );
>      OGRDataSource::DestroyDataSource( poDS );
>
> With a 100.000 records shapefile "ExecuteSQL" has allocated over 300
> MBytes of memory with no deallocation when calling "ReleaseResultSet".
>
> The memory leak is triggered only when "ExecuteSQL" is called with a
> spatial filter (even trivial as shown in the above code) and the SQL
> query contains a 'WHERE' clause and an 'ORDER BY' clause. Is this a bug?
>
> I am using GDAL 1.9.1 under Windows platform.
>
> Any help would be really appreciated!

Pierluigi,

I have not a dev environmenet at the moment to investigate that, but could you
open a ticket in GDAL Trac with all the details so it does not get lost ?

Are you positive that, all other things unchanged, the presence of the spatial
filter makes a difference ? I'm not sure how you check on Windows if the memory
is really released (if you put your code in a while(1) {} loop, does the memory
used by the process increase at each iteration ?).

I also suspect that your spatial filter will not do what you would (probably)
expect from it. The geometry of the filter is a LINESTRING, not a POLYGON. So it
will only filter geometries that intersect the line, not geometries that are
fully inside it.

Best regards,

Even

From taibc_coltech at yahoo.com  Fri Jul 13 03:18:27 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 13 Jul 2012 03:18:27 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFF22D.3050609@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
Message-ID: <1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>

Hi Dmitry,

After modifying as you said, I got many errors like below:

error LNK2019: unresolved external symbol _CSLPartialFindString referenced in function "public: int __thiscall CPLStringList::PartialFindString(char const *)const " (?PartialFindString at CPLStringList@@QBEHPBD at Z)??? 


Thanks and regards,

Tai


________________________________
 From: Dmitry Baryshnikov [via OSGeo.org] <ml-node+s1560n4988180h99 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Friday, July 13, 2012 5:03 PM
Subject: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
 

13.07.2012 13:55, taibc ?????:

Hi, 
>
>Although, I added 'gdal_i.lib' in Properties (Linker
        ->Input->Additional Dependencies) and this file in Debug
        folder, but I got an other errror:
>
>error LNK1104: cannot open file 'gdal_i.lib'?? 
>
>Do you know how to fix it ?
>
>Thanks and regards,
>
>Tai
>?
>
>_______________________________________________
gdal-dev mailing list [hidden email] http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,
>?
>You mast remove any cpl_*.cpp and any gdal headers from
              your solution. In project properties you have to put path
              to gdal headers (gdal_root/port, gdal_root/gcore,
              gdal_root/ogr)
>E.g. for GDALVersionInfo function you have to include only
              in your code #include "gdal.h"
>
>Best regards,
>??? Dmitry
>
>
>_______________________________________________ 
>gdal-dev mailing list 
>[hidden email] 
>http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>
>>________________________________
> 
>If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988142.html 
>To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
>NAML 
>
>
>>________________________________
> View this message in context: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
>
>_______________________________________________
gdal-dev mailing list [hidden email] http://lists.osgeo.org/mailman/listinfo/gdal-dev
Put there (Linker ->Input->Additional Dependencies) the full path to gdal_i.lib or add the path to gdal_i.lib in Linker ->General->AdditionalLibraryDirectories

Best regards,
??? Dmitry


_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988180.html 
To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
NAML

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988184.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/4b67bf17/attachment.html>

From even.rouault at mines-paris.org  Fri Jul 13 03:19:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 12:19:14 +0200
Subject: [gdal-dev] Problem reading shapefile via /vsizip
In-Reply-To: <CC22D2C5.2ED9A%michael.smith@usace.army.mil>
References: <CC22D2C5.2ED9A%michael.smith@usace.army.mil>
Message-ID: <1342174754.4ffff6225921b@imp.free.fr>

Selon "Smith, Michael ERDC-CRREL-NH" <Michael.Smith at usace.army.mil>:

Michael,

Do you use GDAL trunk, or 1.9.X ? It might be possible that fixes for subtle
bugs could have pushed in trunk, but I'm not 100% positive that it is the case.

Did you try to turn "--debug on" to see if interesting messages appear ?

If the problem remains, please open a ticket in Trac so I have opportunity to
check that later.

Best regards,

Even

From marlam at marlam.de  Fri Jul 13 03:26:27 2012
From: marlam at marlam.de (Martin Lambers)
Date: Fri, 13 Jul 2012 12:26:27 +0200
Subject: [gdal-dev] Warp API / gdalwarp: using projection supported by
 PROJ4, but not explicitly by GDAL?
In-Reply-To: <1342173681.4ffff1f138515@imp.free.fr>
References: <20120713110032.39febc6b@jones>
	<1342171333.4fffe8c5a6926@imp.free.fr>
	<20120713114916.1c37570c@daffy>
	<1342173681.4ffff1f138515@imp.free.fr>
Message-ID: <20120713122627.26ce1548@daffy>

On Fri, 13 Jul 2012 12:01:21 +0200, Even Rouault wrote:
> > I could certainly do that, but with the '+wktext' mechanism, there
> > is no reason to add this patch anymore, is there?
> 
> Your patch is a cleaner solution than the +wktext mechanism, which
> remains something a bit hacky (although I must admit I had never
> heard before of that QSC projection ! and it is probably some niche
> projection). The advantage of having it properly recognized is that
> you can then embed its WKT representation in a .aux.xml file and all
> tools using GDAL will be able to deal properly with it.

Yes, QSC is very limited in scope and absolutely not widely used. It is
a perfect fit for my use case (planetary-scale terrain rendering using
quadtree hierarchies for data management), but I'm not sure it is worth
adding general support for it to GDAL. For me, the '+wktext' solution
already works fine since the transformation of data to the quadtree
hierarchies is typically one way only: the resulting files are only
ever used by the renderer.

> But reading again your initial email, I didn't realize that it is not
> yet supported in proj, only proposed. So we will wait for it to be
> committed in PROJ first before committing its support in GDAL.

OK, if QSC is accepted into PROJ and full support for it in GDAL is
considered worthwhile, I can update the patch and create a ticket. 

Best regards
Martin

From Michael.Smith at usace.army.mil  Fri Jul 13 03:30:48 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Fri, 13 Jul 2012 10:30:48 +0000
Subject: [gdal-dev] Problem reading shapefile via /vsizip
In-Reply-To: <1342174754.4ffff6225921b@imp.free.fr>
Message-ID: <CC2570DD.2F209%michael.smith@usace.army.mil>

EvenR,

This is GDAL trunk.

I will check with --debug on.

Mike



On 7/13/12 6:19 AM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Selon "Smith, Michael ERDC-CRREL-NH" <Michael.Smith at usace.army.mil>:
>
>Michael,
>
>Do you use GDAL trunk, or 1.9.X ? It might be possible that fixes for
>subtle
>bugs could have pushed in trunk, but I'm not 100% positive that it is the
>case.
>
>Did you try to turn "--debug on" to see if interesting messages appear ?
>
>If the problem remains, please open a ticket in Trac so I have
>opportunity to
>check that later.
>
>Best regards,
>
>Even


From mateusz at loskot.net  Fri Jul 13 03:39:43 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 13 Jul 2012 11:39:43 +0100
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
Message-ID: <CABUeae-7nMcJe40Q6QUFEiPtvqeZad50RBULHv+-H+80b=J1FQ@mail.gmail.com>

On 13 Jul 2012 10:55, "taibc" <taibc_coltech at yahoo.com> wrote:
>
> Although, I added 'gdal_i.lib' in Properties (Linker ->Input->Additional
Dependencies) and this file in Debug folder, but I got an other errror:
>
> error LNK1104: cannot open file 'gdal_i.lib'
>
> Do you know how to fix it ?

Read MSDN to learn about configuring Visual Studio projects, modify linker
settings, etc.

-- 
Mateusz Loskot
(Sent from phone, apology for any top-posting or broken quoting)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/845a0a3e/attachment-0001.html>

From Michael.Smith at usace.army.mil  Fri Jul 13 03:40:34 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Fri, 13 Jul 2012 10:40:34 +0000
Subject: [gdal-dev] Problem reading shapefile via /vsizip
In-Reply-To: <CC2570DD.2F209%michael.smith@usace.army.mil>
Message-ID: <CC257321.2F20F%michael.smith@usace.army.mil>

Ticket created 

http://trac.osgeo.org/gdal/ticket/4748


Mike



On 7/13/12 6:30 AM, "Smith, Michael ERDC-CRREL-NH"
<Michael.Smith at usace.army.mil> wrote:

>EvenR,
>
>This is GDAL trunk.
>
>I will check with --debug on.
>
>Mike
>
>
>
>On 7/13/12 6:19 AM, "Even Rouault" <even.rouault at mines-paris.org> wrote:
>
>>Selon "Smith, Michael ERDC-CRREL-NH" <Michael.Smith at usace.army.mil>:
>>
>>Michael,
>>
>>Do you use GDAL trunk, or 1.9.X ? It might be possible that fixes for
>>subtle
>>bugs could have pushed in trunk, but I'm not 100% positive that it is the
>>case.
>>
>>Did you try to turn "--debug on" to see if interesting messages appear ?
>>
>>If the problem remains, please open a ticket in Trac so I have
>>opportunity to
>>check that later.
>>
>>Best regards,
>>
>>Even
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From polimax at mail.ru  Fri Jul 13 03:43:29 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri, 13 Jul 2012 14:43:29 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
Message-ID: <4FFFFBD1.8060604@mail.ru>

13.07.2012 14:18, taibc ?????:
> Hi Dmitry,
>
> After modifying as you said, I got many errors like below:
>
> error LNK2019: unresolved external symbol _CSLPartialFindString 
> referenced in function "public: int __thiscall 
> CPLStringList::PartialFindString(char const *)const " 
> (?PartialFindString at CPLStringList@@QBEHPBD at Z)
> Thanks and regards,
>
> Tai
> ------------------------------------------------------------------------
> *From:* Dmitry Baryshnikov [via OSGeo.org] <[hidden email] 
> </user/SendEmail.jtp?type=node&node=4988184&i=0>>
> *To:* taibc <[hidden email] 
> </user/SendEmail.jtp?type=node&node=4988184&i=1>>
> *Sent:* Friday, July 13, 2012 5:03 PM
> *Subject:* Re: Error LNK1120: 314 unresolved externals - When using 
> Ogr C++ class on Visual Studio 2010
>
> 13.07.2012 13:55, taibc ?????:
>> Hi,
>>
>> Although, I added 'gdal_i.lib' in Properties (Linker 
>> ->Input->Additional Dependencies) and this file in Debug folder, but 
>> I got an other errror:
>>
>> error LNK1104: cannot open file 'gdal_i.lib'
>>
>> Do you know how to fix it ?
>>
>> Thanks and regards,
>>
>> Tai
>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> [hidden email]
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> Hi,
>>
>> You mast remove any cpl_*.cpp and any gdal headers from your 
>> solution. In project properties you have to put path to gdal headers 
>> (gdal_root/port, gdal_root/gcore, gdal_root/ogr)
>> E.g. for GDALVersionInfo function you have to include only in your 
>> code #include "gdal.h"
>>
>> Best regards,
>>     Dmitry
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> ------------------------------------------------------------------------
>> If you reply to this email, your message will be added to the 
>> discussion below:
>> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988142.html 
>>
>> To unsubscribe from Error LNK1120: 314 unresolved externals - When 
>> using Ogr C++ class on Visual Studio 2010, click here.
>> NAML 
>> <http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>>
>>
>>
>>
>> ------------------------------------------------------------------------
>> View this message in context: Re: Error LNK1120: 314 unresolved 
>> externals - When using Ogr C++ class on Visual Studio 2010 
>> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988177.html>
>> Sent from the GDAL - Dev mailing list archive 
>> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
>> Nabble.com <http://nabble.com/>.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Put there (Linker ->Input->Additional Dependencies) the full path to 
> gdal_i.lib or add the path to gdal_i.lib in Linker 
> ->General->AdditionalLibraryDirectories
>
> Best regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------------------------------------------------
> If you reply to this email, your message will be added to the 
> discussion below:
> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988180.html 
>
> To unsubscribe from Error LNK1120: 314 unresolved externals - When 
> using Ogr C++ class on Visual Studio 2010, click here.
> NAML 
> <http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>
>
>
>
> ------------------------------------------------------------------------
> View this message in context: Re: Error LNK1120: 314 unresolved 
> externals - When using Ogr C++ class on Visual Studio 2010 
> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988184.html>
> Sent from the GDAL - Dev mailing list archive 
> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
> Nabble.com.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi Tai,

Please post your code and screenshots of project tree and properties 
Linker ->Input and C/C++ -> Preprocessor definitions

Best regards,
        Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/24678e94/attachment.html>

From lcelati at latitude-geosystems.com  Fri Jul 13 04:07:51 2012
From: lcelati at latitude-geosystems.com (laurent celati)
Date: Fri, 13 Jul 2012 04:07:51 -0700 (PDT)
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
Message-ID: <1342177671957-4988197.post@n6.nabble.com>

Hello,

I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
source using Gdal SVN version. I'm working on Windows 7 64bits.

I am not in the habit of compiling software

I did not used to compile software. Can you tell me how to do please?




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-compile-gdal-1-9-1-from-GDAL-S-SVN-tp4988197.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From guasqui at actgate.com  Fri Jul 13 04:22:52 2012
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Fri, 13 Jul 2012 13:22:52 +0200
Subject: [gdal-dev] Memory leaks when using SQL queries with shapefiles
In-Reply-To: <1342174491.4ffff51b34d7e@imp.free.fr>
References: <4FFD8D7B.90507@actgate.com> <1342174491.4ffff51b34d7e@imp.free.fr>
Message-ID: <5000050C.1060602@actgate.com>

Il 13/07/2012 12.14, Even Rouault ha scritto:
> Selon Pierluigi Guasqui <guasqui at actgate.com>:
>
>> Hello,
>>
>> I am experiencing a big memory allocation (with no subsequent memory
>> release) when using SQL queries with shapefiles. This is a sample code
>> that triggers this problem:
>>
>>       OGRRegisterAll();
>>
>>       // opening shapefile data source
>>       const char *fname = "path/to/shapefile.shp";
>>       OGRDataSource *poDS;
>>       poDS = OGRSFDriverRegistrar::Open( fname, FALSE );
>>
>>       if( poDS == NULL )
>>       {
>>           fprintf( stderr, "%s: could not open input file\n", fname );
>>           return -1;
>>       }
>>
>>       // creating the spatial filter
>>       OGRLineString regionPolygon;
>>       OGRRawPoint *pointsList = new OGRRawPoint[5];
>>       pointsList[0].x = -180; pointsList[0].y =  90;
>>       pointsList[1].x =  180; pointsList[1].y =  90;
>>       pointsList[2].x =  180; pointsList[2].y = -90;
>>       pointsList[3].x = -180; pointsList[3].y = -90;
>>       pointsList[4].x = -180; pointsList[4].y =  90;
>>       regionPolygon.setPoints(5, pointsList);
>>       delete[] pointsList;
>>
>>       // executing the query
>>       const char *query = "SELECT * FROM table_name WHERE some_field LIKE
>> '%bla%' ORDER BY some_other_field";
>>       OGRLayer *rs = poDS->ExecuteSQL( query, &regionPolygon, NULL );
>>
>>       // releasing memory
>>       poDS-> ReleaseResultSet( rs );
>>       OGRDataSource::DestroyDataSource( poDS );
>>
>> With a 100.000 records shapefile "ExecuteSQL" has allocated over 300
>> MBytes of memory with no deallocation when calling "ReleaseResultSet".
>>
>> The memory leak is triggered only when "ExecuteSQL" is called with a
>> spatial filter (even trivial as shown in the above code) and the SQL
>> query contains a 'WHERE' clause and an 'ORDER BY' clause. Is this a bug?
>>
>> I am using GDAL 1.9.1 under Windows platform.
>>
>> Any help would be really appreciated!
> Pierluigi,
>
> I have not a dev environmenet at the moment to investigate that, but could you
> open a ticket in GDAL Trac with all the details so it does not get lost ?
>
> Are you positive that, all other things unchanged, the presence of the spatial
> filter makes a difference ? I'm not sure how you check on Windows if the memory
> is really released (if you put your code in a while(1) {} loop, does the memory
> used by the process increase at each iteration ?).
>
> I also suspect that your spatial filter will not do what you would (probably)
> expect from it. The geometry of the filter is a LINESTRING, not a POLYGON. So it
> will only filter geometries that intersect the line, not geometries that are
> fully inside it.
>
> Best regards,
>
> Even

Even,

thank you for looking into my problem and for your reply. Yes I will 
open a ticket in GDAL Trac.

I tried different test cases so I am sure that If I leave all other 
things unchanged and just remove the use of the spatial filter I do not 
see any memory leak. So it seems that the use of the spatial filter does 
make the difference. Also, I tried the SQL query without the "WHERE" 
clause or the "ORDER BY" clause and, again, I did not see any memory 
leak. So also the use of "WHERE" clause *and* "ORDER BY" clause seem to 
make the difference.

To check on Windows that memory is not released I put a "Sleep()" call 
by the end of my code so I could check with Task Manager the process 
memory allocation before the process quits. However, I added a 
while(true) loop around my previous code:

     OGRRegisterAll();
     int loop_i = 1;
     while ( true )
     {
         fprintf( stdout, "*** Loop %d... ", loop_i++ );
         fflush( stdout );

         // opening shapefile data source
         const char *fname = "path/to/shapefile.shp";
         OGRDataSource *poDS;
         poDS = OGRSFDriverRegistrar::Open( fname, FALSE );

         if( poDS == NULL )
         {
             fprintf( stderr, "%s: could not open input file\n", fname );
             return -1;
         }

         // creating the spatial filter
         OGRLineString regionPolygon;
         OGRRawPoint *pointsList = new OGRRawPoint[5];
         pointsList[0].x = -180; pointsList[0].y =  90;
         pointsList[1].x =  180; pointsList[1].y =  90;
         pointsList[2].x =  180; pointsList[2].y = -90;
         pointsList[3].x = -180; pointsList[3].y = -90;
         pointsList[4].x = -180; pointsList[4].y =  90;
         regionPolygon.setPoints(5, pointsList);
         delete[] pointsList;

         // executing the query
         const char *query = "SELECT * FROM table_name WHERE some_field 
LIKE '%bla%' ORDER BY some_other_field";
         OGRLayer *rs = poDS->ExecuteSQL( query, &regionPolygon, NULL );

         // releasing memory
         poDS-> ReleaseResultSet( rs );
         OGRDataSource::DestroyDataSource( poDS );

         fprintf( stdout, "done\n" );
         fflush( stdout );
     }

and I could get my process to allocate almost 1 GBytes of memory in just 
3 loops! So, yes memory keeps on being allocating without being released 
at each iteration.

Related to the use of LINESTRING filter instead of a POLYGON filter, yes 
you are right: it will filter out features that intersect my line but 
this is what I expect from the code from which I extrapolated the 
example above. However, thank you for warning me!

Thank you!

-- 
Pierluigi Guasqui
Applied Coherent Technology Corp.



From saad.hessane at gmail.com  Fri Jul 13 05:08:51 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Fri, 13 Jul 2012 14:08:51 +0200
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <1342177671957-4988197.post@n6.nabble.com>
References: <1342177671957-4988197.post@n6.nabble.com>
Message-ID: <CAEcp1tCJvYBCBm+h9BB1uABDSiRFkezrX+cYOQw1BSOuz12wFg@mail.gmail.com>

Hi,

To build GDAL it's easy. Visual Studio have to be installed in the system.
You download the source code. The easiest way to do that is to download it
from http://trac.osgeo.org/gdal/wiki/DownloadSource. (Or if you have SVN
you can just do a checkout from https://svn.osgeo.org/gdal/trunk/gdal. If
you don't know what I'm talking about forget that last part :D).
After that you open Visual Studio Command Line (Start Menu -> All programs
-> Microsoft Visual Studio -> Visual Studio Tools -> Visual Studio Command
line ).
You go to the gdal source folder "cd GDAL_PATH" with GDAL_PATH is the path
of your gdal folder.
And you do "nmake -f makefile.vc".

This is the easiest way. You can open the nmake.opt file before building
gdal to enable/disable some fonctionality, or to build 64-bit version.

I'm never build QGIS from source, I can't help you on that sorry.

Best regards.




2012/7/13 laurent celati <lcelati at latitude-geosystems.com>

> Hello,
>
> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
> source using Gdal SVN version. I'm working on Windows 7 64bits.
>
> I am not in the habit of compiling software
>
> I did not used to compile software. Can you tell me how to do please?
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-compile-gdal-1-9-1-from-GDAL-S-SVN-tp4988197.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/1e5086cc/attachment.html>

From p.meems at topx-group.nl  Fri Jul 13 05:17:10 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Fri, 13 Jul 2012 14:17:10 +0200
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <CAEcp1tCJvYBCBm+h9BB1uABDSiRFkezrX+cYOQw1BSOuz12wFg@mail.gmail.com>
References: <1342177671957-4988197.post@n6.nabble.com>
	<CAEcp1tCJvYBCBm+h9BB1uABDSiRFkezrX+cYOQw1BSOuz12wFg@mail.gmail.com>
Message-ID: <CAHNf2YS1o6jMk0VyKxEZHY6o3BZi=tFML-c5X38K1J9KMM9Xvw@mail.gmail.com>

We use makegdal_gen.bat to create the Vis. Studio project and solution
files.
We still need to make the required changes in the nmake.opt file but we
don't need to use the command line window.

It's just a matter of preferences what to use. Both options will result in
the same.

Regards,

Paul


2012/7/13 Sa?d HESSANE <saad.hessane at gmail.com>

> Hi,
>
> To build GDAL it's easy. Visual Studio have to be installed in the system.
> You download the source code. The easiest way to do that is to download it
> from http://trac.osgeo.org/gdal/wiki/DownloadSource. (Or if you have SVN
> you can just do a checkout from https://svn.osgeo.org/gdal/trunk/gdal. If
> you don't know what I'm talking about forget that last part :D).
> After that you open Visual Studio Command Line (Start Menu -> All programs
> -> Microsoft Visual Studio -> Visual Studio Tools -> Visual Studio Command
> line ).
> You go to the gdal source folder "cd GDAL_PATH" with GDAL_PATH is the path
> of your gdal folder.
> And you do "nmake -f makefile.vc".
>
> This is the easiest way. You can open the nmake.opt file before building
> gdal to enable/disable some fonctionality, or to build 64-bit version.
>
> I'm never build QGIS from source, I can't help you on that sorry.
>
> Best regards.
>
>
>
>
> 2012/7/13 laurent celati <lcelati at latitude-geosystems.com>
>
>> Hello,
>>
>> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
>> source using Gdal SVN version. I'm working on Windows 7 64bits.
>>
>> I am not in the habit of compiling software
>>
>> I did not used to compile software. Can you tell me how to do please?
>>
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/How-to-compile-gdal-1-9-1-from-GDAL-S-SVN-tp4988197.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/12d99be6/attachment.html>

From diregola at gmail.com  Fri Jul 13 05:28:25 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Fri, 13 Jul 2012 14:28:25 +0200
Subject: [gdal-dev] script selecting the extent
Message-ID: <CABa=8QrDCb1wrMkMvd9CxrfDA1c1n+-qHXNrYOYa2rA9giJ-Cw@mail.gmail.com>

Hi,

I have more than 22000 GeoTiff's stored in a folder (the world coverage of
ASTER GDEM) and I have to select among them only those covering the Europe
area, in order to import them in GRASS. I was about to write a Python
script to do that (using gdalinfo), but I felt like reinventing the wheel,
because I'm pretty sure I've already seen in the internet something doing
that, but can't remember where.. or likely some of you guys has already
experienced this and are willing to share a script :-)

TIA,

-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/9574cad5/attachment.html>

From even.rouault at mines-paris.org  Fri Jul 13 05:34:17 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 14:34:17 +0200
Subject: [gdal-dev] script selecting the extent
In-Reply-To: <CABa=8QrDCb1wrMkMvd9CxrfDA1c1n+-qHXNrYOYa2rA9giJ-Cw@mail.gmail.com>
References: <CABa=8QrDCb1wrMkMvd9CxrfDA1c1n+-qHXNrYOYa2rA9giJ-Cw@mail.gmail.com>
Message-ID: <1342182857.500015c927ff7@imp.free.fr>

Selon Margherita Di Leo <diregola at gmail.com>:

> Hi,
>
> I have more than 22000 GeoTiff's stored in a folder (the world coverage of
> ASTER GDEM) and I have to select among them only those covering the Europe
> area, in order to import them in GRASS. I was about to write a Python
> script to do that (using gdalinfo), but I felt like reinventing the wheel,
> because I'm pretty sure I've already seen in the internet something doing
> that, but can't remember where.. or likely some of you guys has already
> experienced this and are willing to share a script :-)

If you want to use python, don't use it to parse the output of gdalinfo ! Use
the GDAL Python API instead. Would be far easier and robust.

But I don't think you need to do any scripting. You could use "gdaltindex
an_index.shp *.tif" ( http://gdal.org/gdaltindex.html ) to create an index of
all the files, and then with "ogrinfo an_index.shp -spat xmin ymin xmax ymax",
you would get the list of files that intersection the bounding box. Perhaps
"ogr2ogr -f CSV list.csv an_index.shp -spat xmin ymin xmax ymax" would lead to
something even more easily usable.

>
> TIA,
>
> --
> Dr. Margherita Di Leo
>



From jrepetto at free.fr  Fri Jul 13 06:28:28 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri, 13 Jul 2012 15:28:28 +0200
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <1342177671957-4988197.post@n6.nabble.com>
References: <1342177671957-4988197.post@n6.nabble.com>
Message-ID: <5000227C.8010807@free.fr>

On 07/13/2012 01:07 PM, laurent celati wrote:
> Hello,
> 
> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
> source using Gdal SVN version. I'm working on Windows 7 64bits.
> 
> I am not in the habit of compiling software
> 
> I did not used to compile software. Can you tell me how to do please?
> 

Why don't you use the nightly builds avilables on this site :
http://www.gisinternals.com/sdk/ ?

Jean-Claude

From ivan.lucena at princeton-ma.us  Fri Jul 13 06:33:14 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 13 Jul 2012 08:33:14 -0500
Subject: [gdal-dev] =?iso-8859-1?q?ogr2ogr_and_reserved_words?=
Message-ID: <20120713133314.23983.qmail@s466.sureserver.com>

Hi there,

Is there any trick to avoid creating field names with reserved words? For example, a DBF from a shapefile can have field names like "long" and other formats may not like it.

Regards,

Ivan

From even.rouault at mines-paris.org  Fri Jul 13 06:41:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 15:41:39 +0200
Subject: [gdal-dev] ogr2ogr and reserved words
In-Reply-To: <20120713133314.23983.qmail@s466.sureserver.com>
References: <20120713133314.23983.qmail@s466.sureserver.com>
Message-ID: <1342186899.50002593893b4@imp.free.fr>

Hi Ivan,

>
> Is there any trick to avoid creating field names with reserved words? For
> example, a DBF from a shapefile can have field names like "long" and other
> formats may not like it.

It is up to the output driver to do whatever sanitizing it requires. This is
already done in a lot of drivers. The last recollection I have is in the FGBD
driver that modifies field names that match a list of reserved keywords. The
shapefile driver will also truncate too long field names, etc.. A bunch of RDBM
drivers have a LAUNDER creation option too. etc etc.

I suspect your question might be related to the OCI driver ? Perhaps it should
do something like the above if needed.

ogr2ogr is able to deal with drivers that have an implementation of
CreateField() that does a renaming/truncation/etc... of the source field name.

You also have the possibility to use the AS capability of OGR SQL to do the
renaming manually.

>
> Regards,
>
> Ivan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From ivan.lucena at princeton-ma.us  Fri Jul 13 06:49:08 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 13 Jul 2012 08:49:08 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?How_to_compile_gdal_1=2E9=2E1_from_GDAL?=
	=?iso-8859-1?q?=27S_SVN_=3F?=
In-Reply-To: <5000227C.8010807@free.fr>
References: <1342177671957-4988197.post@n6.nabble.com>
	<5000227C.8010807@free.fr>
Message-ID: <20120713134908.1241.qmail@s466.sureserver.com>

But if you do want to build on Windows you can take a look on that wiki pages

http://trac.osgeo.org/gdal/wiki/BuildingOnWindows
http://trac.osgeo.org/gdal/wiki/MakeFileProjects

Setting up VS Express edition to build 64bit is a little trick though.


>  -------Original Message-------
>  From: Jean-Claude Repetto <jrepetto at free.fr>
>  To: gdal-dev at lists.osgeo.org
>  Subject: Re: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
>  Sent: Jul 13 '12 08:28
>  
>  On 07/13/2012 01:07 PM, laurent celati wrote:
>  > Hello,
>  >
>  > I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
>  > source using Gdal SVN version. I'm working on Windows 7 64bits.
>  >
>  > I am not in the habit of compiling software
>  >
>  > I did not used to compile software. Can you tell me how to do please?
>  >
>  
>  Why don't you use the nightly builds avilables on this site :
>  http://www.gisinternals.com/sdk/ ?
>  
>  Jean-Claude
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From diregola at gmail.com  Fri Jul 13 06:51:21 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Fri, 13 Jul 2012 15:51:21 +0200
Subject: [gdal-dev] script selecting the extent
In-Reply-To: <1342182857.500015c927ff7@imp.free.fr>
References: <CABa=8QrDCb1wrMkMvd9CxrfDA1c1n+-qHXNrYOYa2rA9giJ-Cw@mail.gmail.com>
	<1342182857.500015c927ff7@imp.free.fr>
Message-ID: <CABa=8QoW-nUQBcQEnAUu9TmhvWi8R6mO6p-fzto9v3N4GpoKnA@mail.gmail.com>

On Fri, Jul 13, 2012 at 2:34 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

>
>
> But I don't think you need to do any scripting. You could use "gdaltindex
> an_index.shp *.tif" ( http://gdal.org/gdaltindex.html ) to create an
> index of
> all the files, and then with "ogrinfo an_index.shp -spat xmin ymin xmax
> ymax",
> you would get the list of files that intersection the bounding box. Perhaps
> "ogr2ogr -f CSV list.csv an_index.shp -spat xmin ymin xmax ymax" would
> lead to
> something even more easily usable.
>

Thanks a ton,

-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/8795511c/attachment.html>

From ivan.lucena at princeton-ma.us  Fri Jul 13 06:59:41 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 13 Jul 2012 08:59:41 -0500
Subject: [gdal-dev] =?iso-8859-1?q?ogr2ogr_and_reserved_words?=
In-Reply-To: <1342186899.50002593893b4@imp.free.fr>
References: <20120713133314.23983.qmail@s466.sureserver.com>
	<1342186899.50002593893b4@imp.free.fr>
Message-ID: <20120713135941.28284.qmail@s466.sureserver.com>

Thanks Even. Very good answer as always.

>  -------Original Message-------
>  From: Even Rouault <even.rouault at mines-paris.org>
>  To: Ivan Lucena <ivan.lucena at princeton-ma.us>
>  Cc: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
>  Subject: Re: [gdal-dev] ogr2ogr and reserved words
>  Sent: Jul 13 '12 08:41
>  
>  Hi Ivan,
>  
>  >
>  > Is there any trick to avoid creating field names with reserved words? For
>  > example, a DBF from a shapefile can have field names like "long" and other
>  > formats may not like it.
>  
>  It is up to the output driver to do whatever sanitizing it requires. This is
>  already done in a lot of drivers. The last recollection I have is in the FGBD
>  driver that modifies field names that match a list of reserved keywords. The
>  shapefile driver will also truncate too long field names, etc.. A bunch of RDBM
>  drivers have a LAUNDER creation option too. etc etc.
>  
>  I suspect your question might be related to the OCI driver ? Perhaps it should
>  do something like the above if needed.
>  
>  ogr2ogr is able to deal with drivers that have an implementation of
>  CreateField() that does a renaming/truncation/etc... of the source field name.
>  
>  You also have the possibility to use the AS capability of OGR SQL to do the
>  renaming manually.
>  
>  >
>  > Regards,
>  >
>  > Ivan
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev at lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  
>  
>  

From knutfrodesoppel at hotmail.com  Fri Jul 13 07:01:01 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Fri, 13 Jul 2012 16:01:01 +0200
Subject: [gdal-dev] Temporal statistics
Message-ID: <jtp9oh$hs9$1@dough.gmane.org>

Hi,

 From a time series of colocated images, I construct a VRT with one band
for each time step using gdalbuildvrt:

 > gdalbuildvrt -separate mtsat.vrt mtsat/*_IR*00.tif

Are there any tools that can be used to calculate some statistics (min,
max, mean, etc) versus time for each pixel of such a 3D Dataset?
The rasters are large and timeseries long, so reading everything into a
Python NumPy cube is not a good solution.

Thanks,
Knut-Frode


From even.rouault at mines-paris.org  Fri Jul 13 07:10:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 13 Jul 2012 16:10:50 +0200
Subject: [gdal-dev] Temporal statistics
In-Reply-To: <jtp9oh$hs9$1@dough.gmane.org>
References: <jtp9oh$hs9$1@dough.gmane.org>
Message-ID: <1342188650.50002c6a17fd8@imp.free.fr>

Selon Knut-Frode Dagestad <knutfrodesoppel at hotmail.com>:

> Hi,
>
>  From a time series of colocated images, I construct a VRT with one band
> for each time step using gdalbuildvrt:
>
>  > gdalbuildvrt -separate mtsat.vrt mtsat/*_IR*00.tif
>
> Are there any tools that can be used to calculate some statistics (min,
> max, mean, etc) versus time for each pixel of such a 3D Dataset?

Not that I'm aware of

> The rasters are large and timeseries long, so reading everything into a
> Python NumPy cube is not a good solution.

You don't need to have them all simultaneously opened.

An idea for an algorithm would be :

1)
- allocate one matrix for storing the min of each pixel
- allocate one matrix for storing the max of each pixel
- allocate one matrix for storing the sum of each pixel
- allocate one matrix for storing the sum of the square of each pixel

2) Open sequentially each band and update the above matrixes

3) Then you can use directly the min and max matrices, and deduce the mean and
standard deviation from the other matrices.

>
> Thanks,
> Knut-Frode
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From etourigny.dev at gmail.com  Fri Jul 13 07:19:09 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 13 Jul 2012 11:19:09 -0300
Subject: [gdal-dev] Temporal statistics
In-Reply-To: <jtp9oh$hs9$1@dough.gmane.org>
References: <jtp9oh$hs9$1@dough.gmane.org>
Message-ID: <CA+TxYvPMFX8CGyo-e1Tjt6QsEZMQV1thUVSq4oCuyv_Fk0PGwA@mail.gmail.com>

Provided you can convert the format to netcdf, you could use a tool
like cdo which does exactly what you want

"CDO is a collection of command line Operators to manipulate and
analyse Climate and NWP model Data."
https://code.zmaw.de/projects/cdo/

gdal supports netcdf output, you might have to do some fixing up of
the time axes though.

Basically I would do

- loop on each file:
 - convert to netcdf
 - set the time axis with cdo settime <def>
- merge all files: cdo mergetime <infiles> outfile.nc
- operate on the resulting file with cdo operators (cdo timmean, cdo
timmax, etc)

Cheers
Etienne

On Fri, Jul 13, 2012 at 11:01 AM, Knut-Frode Dagestad
<knutfrodesoppel at hotmail.com> wrote:
> Hi,
>
> From a time series of colocated images, I construct a VRT with one band
> for each time step using gdalbuildvrt:
>
>> gdalbuildvrt -separate mtsat.vrt mtsat/*_IR*00.tif
>
> Are there any tools that can be used to calculate some statistics (min,
> max, mean, etc) versus time for each pixel of such a 3D Dataset?
> The rasters are large and timeseries long, so reading everything into a
> Python NumPy cube is not a good solution.
>
> Thanks,
> Knut-Frode
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From guasqui at actgate.com  Fri Jul 13 07:22:34 2012
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Fri, 13 Jul 2012 16:22:34 +0200
Subject: [gdal-dev] Memory leaks when using SQL queries with shapefiles
In-Reply-To: <5000050C.1060602@actgate.com>
References: <4FFD8D7B.90507@actgate.com> <1342174491.4ffff51b34d7e@imp.free.fr>
	<5000050C.1060602@actgate.com>
Message-ID: <50002F2A.9050704@actgate.com>

Even,

I opened a ticket in GDAL Trac: http://trac.osgeo.org/gdal/ticket/4749.

Thank you,
Pierluigi

> Il 13/07/2012 12.14, Even Rouault ha scritto:
>> Selon Pierluigi Guasqui <guasqui at actgate.com>:
>>
>>> Hello,
>>>
>>> I am experiencing a big memory allocation (with no subsequent memory
>>> release) when using SQL queries with shapefiles. This is a sample code
>>> that triggers this problem:
>>>
>>>       OGRRegisterAll();
>>>
>>>       // opening shapefile data source
>>>       const char *fname = "path/to/shapefile.shp";
>>>       OGRDataSource *poDS;
>>>       poDS = OGRSFDriverRegistrar::Open( fname, FALSE );
>>>
>>>       if( poDS == NULL )
>>>       {
>>>           fprintf( stderr, "%s: could not open input file\n", fname );
>>>           return -1;
>>>       }
>>>
>>>       // creating the spatial filter
>>>       OGRLineString regionPolygon;
>>>       OGRRawPoint *pointsList = new OGRRawPoint[5];
>>>       pointsList[0].x = -180; pointsList[0].y =  90;
>>>       pointsList[1].x =  180; pointsList[1].y =  90;
>>>       pointsList[2].x =  180; pointsList[2].y = -90;
>>>       pointsList[3].x = -180; pointsList[3].y = -90;
>>>       pointsList[4].x = -180; pointsList[4].y =  90;
>>>       regionPolygon.setPoints(5, pointsList);
>>>       delete[] pointsList;
>>>
>>>       // executing the query
>>>       const char *query = "SELECT * FROM table_name WHERE some_field 
>>> LIKE
>>> '%bla%' ORDER BY some_other_field";
>>>       OGRLayer *rs = poDS->ExecuteSQL( query, &regionPolygon, NULL );
>>>
>>>       // releasing memory
>>>       poDS-> ReleaseResultSet( rs );
>>>       OGRDataSource::DestroyDataSource( poDS );
>>>
>>> With a 100.000 records shapefile "ExecuteSQL" has allocated over 300
>>> MBytes of memory with no deallocation when calling "ReleaseResultSet".
>>>
>>> The memory leak is triggered only when "ExecuteSQL" is called with a
>>> spatial filter (even trivial as shown in the above code) and the SQL
>>> query contains a 'WHERE' clause and an 'ORDER BY' clause. Is this a 
>>> bug?
>>>
>>> I am using GDAL 1.9.1 under Windows platform.
>>>
>>> Any help would be really appreciated!
>> Pierluigi,
>>
>> I have not a dev environmenet at the moment to investigate that, but 
>> could you
>> open a ticket in GDAL Trac with all the details so it does not get 
>> lost ?
>>
>> Are you positive that, all other things unchanged, the presence of 
>> the spatial
>> filter makes a difference ? I'm not sure how you check on Windows if 
>> the memory
>> is really released (if you put your code in a while(1) {} loop, does 
>> the memory
>> used by the process increase at each iteration ?).
>>
>> I also suspect that your spatial filter will not do what you would 
>> (probably)
>> expect from it. The geometry of the filter is a LINESTRING, not a 
>> POLYGON. So it
>> will only filter geometries that intersect the line, not geometries 
>> that are
>> fully inside it.
>>
>> Best regards,
>>
>> Even
>
> Even,
>
> thank you for looking into my problem and for your reply. Yes I will 
> open a ticket in GDAL Trac.
>
> I tried different test cases so I am sure that If I leave all other 
> things unchanged and just remove the use of the spatial filter I do 
> not see any memory leak. So it seems that the use of the spatial 
> filter does make the difference. Also, I tried the SQL query without 
> the "WHERE" clause or the "ORDER BY" clause and, again, I did not see 
> any memory leak. So also the use of "WHERE" clause *and* "ORDER BY" 
> clause seem to make the difference.
>
> To check on Windows that memory is not released I put a "Sleep()" call 
> by the end of my code so I could check with Task Manager the process 
> memory allocation before the process quits. However, I added a 
> while(true) loop around my previous code:
>
>     OGRRegisterAll();
>     int loop_i = 1;
>     while ( true )
>     {
>         fprintf( stdout, "*** Loop %d... ", loop_i++ );
>         fflush( stdout );
>
>         // opening shapefile data source
>         const char *fname = "path/to/shapefile.shp";
>         OGRDataSource *poDS;
>         poDS = OGRSFDriverRegistrar::Open( fname, FALSE );
>
>         if( poDS == NULL )
>         {
>             fprintf( stderr, "%s: could not open input file\n", fname );
>             return -1;
>         }
>
>         // creating the spatial filter
>         OGRLineString regionPolygon;
>         OGRRawPoint *pointsList = new OGRRawPoint[5];
>         pointsList[0].x = -180; pointsList[0].y =  90;
>         pointsList[1].x =  180; pointsList[1].y =  90;
>         pointsList[2].x =  180; pointsList[2].y = -90;
>         pointsList[3].x = -180; pointsList[3].y = -90;
>         pointsList[4].x = -180; pointsList[4].y =  90;
>         regionPolygon.setPoints(5, pointsList);
>         delete[] pointsList;
>
>         // executing the query
>         const char *query = "SELECT * FROM table_name WHERE some_field 
> LIKE '%bla%' ORDER BY some_other_field";
>         OGRLayer *rs = poDS->ExecuteSQL( query, &regionPolygon, NULL );
>
>         // releasing memory
>         poDS-> ReleaseResultSet( rs );
>         OGRDataSource::DestroyDataSource( poDS );
>
>         fprintf( stdout, "done\n" );
>         fflush( stdout );
>     }
>
> and I could get my process to allocate almost 1 GBytes of memory in 
> just 3 loops! So, yes memory keeps on being allocating without being 
> released at each iteration.
>
> Related to the use of LINESTRING filter instead of a POLYGON filter, 
> yes you are right: it will filter out features that intersect my line 
> but this is what I expect from the code from which I extrapolated the 
> example above. However, thank you for warning me!
>
> Thank you!
>


-- 
Pierluigi Guasqui
Applied Coherent Technology Corp.



From mateusz at loskot.net  Fri Jul 13 10:46:18 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 13 Jul 2012 18:46:18 +0100
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <1342177671957-4988197.post@n6.nabble.com>
References: <1342177671957-4988197.post@n6.nabble.com>
Message-ID: <CABUeae9jqbF+ijsefut37Fy6YYZCTtYKMZitegVipitKKKtTnw@mail.gmail.com>

On 13 July 2012 12:07, laurent celati <lcelati at latitude-geosystems.com> wrote:
>
> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
> source using Gdal SVN version. I'm working on Windows 7 64bits.
>
> I am not in the habit of compiling software

Then why for goodness would you want to do that.
End users are supposed to install the packages dedicated for their OS.
There are Windows binaries of QGIS provided!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From Tom_Roche at pobox.com  Fri Jul 13 16:06:19 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Fri, 13 Jul 2012 19:06:19 -0400
Subject: [gdal-dev] installing debian GDAL version >= 1.9
In-Reply-To: <1342106398.4ffeeb1e09489@imp.free.fr>
References: <1342106398.4ffeeb1e09489@imp.free.fr> <87629tyshl.fsf@pobox.com>
	<CA+TxYvMOi2Y6EBYod57P8Rqoqc4-NRNbLvba8jxHK6AXYO1CGA@mail.gmail.com>
	<CA+TxYvPMDLdDFBoc1x1UWBiu-FUBkW9JvCPDODwJR35J5mh0OQ@mail.gmail.com>
	<87obnowmnm.fsf@pobox.com> <871ukj1a70.fsf@pobox.com>
	<877gua4xu8.fsf@gmx.us> <87ehohyu4v.fsf@pobox.com>
Message-ID: <87txxbxnv8.fsf@pobox.com>


Tom Roche Thu, Jul 12, 2012 at 9:41 AM
>> how to fix the /usr/local/lib/python2.x/dist-packages/osgeo fails?

Kludging a makefile (see

https://alioth.debian.org/tracker/index.php?func=detail&aid=313720&group_id=30241&atid=410558

) "fixes" that problem ... but exposes another problem with building
python bindings (perl and ruby SWIG build without problems): see

https://alioth.debian.org/tracker/index.php?func=detail&aid=313721&group_id=30241&atid=410558

Even Rouault Thu, 12 Jul 2012 17:19:58 +0200
> You could download the stock GDAL source code and compile it.

Isn't that what dget'ing the .dsc (debian source control file) does?

http://wiki.debian.org/dsc

I'm assuming the source distro would come with the same makefiles and
build scripts--am I missing something?

> If you want to build the python bindings

All I really want is gdalwarp, and, despite abending, the debian source build may have almost gotten me almost there:

me at it:~$ find ~/tmp/gdal/ -name 'gdalwarp'
> /home/me/tmp/gdal/gdal-1.9.0/debian/tmp/usr/bin/gdalwarp
> /home/me/tmp/gdal/gdal-1.9.0/debian/gdal-bin/usr/bin/gdalwarp
> /home/me/tmp/gdal/gdal-1.9.0/apps/.libs/gdalwarp
> /home/me/tmp/gdal/gdal-1.9.0/apps/gdalwarp
me at it:~$ ls -alh ~/tmp/gdal/gdal-1.9.0/apps/gdalwarp
> -rwxr-xr-x 1 me me 7.9K Jul 13 14:55 /home/me/tmp/gdal/gdal-1.9.0/apps/gdalwarp
me at it:~$ ~/tmp/gdal/gdal-1.9.0/apps/gdalwarp --version
> GDAL 1.9.0, released 2011/12/29
me at it:~$ which gdalwarp
> /usr/bin/gdalwarp
me at it:~$ gdalwarp --version
> GDAL 1.7.3, released 2010/11/10
me at it:~$ info gdalwarp | tail -n 1
> GDAL                   Wed Mar 7 2012                   gdalwarp(1)

so hopefully the info is for 1.9.0. I'll see how this works on my data,
but would still like to fix the installer for the benefit of the next
poor bastard who "goes down this road."

HTH, Tom Roche <Tom_Roche at pobox.com>

From mateusz at loskot.net  Fri Jul 13 16:30:16 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 14 Jul 2012 00:30:16 +0100
Subject: [gdal-dev] json-c 0.10 update status and json-c copy removal
	proposed
Message-ID: <CABUeae_OZt2pPXvGKmjgzVxb+AnLQToWV6enOSMhWKVZ=MTugQ@mail.gmail.com>

Folks,

I'm trying to update GDAL's copy of json-c library.
The task is not trivial, due to the fact GDAL has applied
some sort of improvements to json-c, and also due to
significant changes to how json-c works, UTF-8 support, etc.

I tried to merge GDAL changes into Git branch at
https://github.com/mloskot/json-c/tree/gdal-modifications

All GDAL-specific changes are controlled with:

#ifdef GDAL_JSONC_MOD_ENABLED
...
#endif

So, geojson and couchdb drivers have got -DGDAL_JSONC_MOD_ENABLED=1
in their makefiles.

Some of GDAL's fixes have been submitted and accepted to the upstream,
but there are a few which hasn't, like custom function
json_object_new_double_with_precision(), or use of CPL string functions.

Personally, I don't really see benefits of using CPL functions in json-c.
The json_object_new_double_with_precision could be moved out to GDAL
source files.
So, if we could compromise and give up on GDAL-specific json-c version,
I'd like to propose to completely remove json-c sources from GDAL
and rely on externally provided json-c (libjsonc)
Especially, that building json-c is versy simple...if its native build
configuration is used.

Maintaining private and *changed* copy of json-c has become painful.
json-c has grown and its configuration/building is based on two
non-trivial config headers
with plenty of #defines. Previously, we simply crafted our own version
of static config.h
that worked for all systems. It is not really feasible with new version.
Also, hosting our own modified copy of json-c may lead to more GDAL-specific
modifications increasing the pain of sync'ing it with upstream and
maintenance in future.

I don't see any reason why GDAL couldn't rely on external json-c.
So, I'd like to propose to:
- remove GDAL's copy of json-c from ogr/ogrsf_frmts/geojson/jsonc
- configure Unix and Windows builds to use external binaries

I'm volunteering to apply those changes.
Please, shall I make RFC, call for votes or this e-mail is sufficient to
discuss and make decision?


The current status is that use of the json-c 0.10 leads to crashes,
they are a bit mysterious and likely related to how json-c handles
character encodings, but I'm trying to confirm that with the json-c folks.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From taibc_coltech at yahoo.com  Fri Jul 13 18:18:18 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 13 Jul 2012 18:18:18 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <4FFFFBD1.8060604@mail.ru>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
Message-ID: <1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>

Thanks Dmitry,

Please see attached files for screenshots.

Here is the code of the main.cpp (the project only includes this file):

#include <iostream>
#include "ogrsf_frmts.h"
using namespace std;

int main()

{
??????? OGRRegisterAll();
??? ??? OGRDataSource?????? *poDS;

??? ??? poDS = OGRSFDriverRegistrar::Open( "point.shp", FALSE );
??? ??? if( poDS == NULL )
??? ??? {
??? ??? ??? printf( "Open failed.\n" );
??? ??? ??? exit( 1 );
??? ??? }
??? ??? OGRLayer? *poLayer;

??? ??? poLayer = poDS->GetLayerByName( "point" );
??? ??? OGRFeature *poFeature;

??? ??? poLayer->ResetReading();
??? ??? while( (poFeature = poLayer->GetNextFeature()) != NULL )
??? ??? {
??? ??? ??? OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
??? ??? ??? int iField;

??? ??? ??? for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
??? ??? ??? {
??? ??? ??? ??? OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

??? ??? ??? ??? if( poFieldDefn->GetType() == OFTInteger )
??? ??? ??? ??? ??? printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
??? ??? ??? ??? else if( poFieldDefn->GetType() == OFTReal )
??? ??? ??? ??? ??? printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
??? ??? ??? ??? else if( poFieldDefn->GetType() == OFTString )
??? ??? ??? ??? ??? printf( "%s,", poFeature->GetFieldAsString(iField) );
??? ??? ??? ??? else
??? ??? ??? ??? ??? printf( "%s,", poFeature->GetFieldAsString(iField) );
??? ??? ??? }
??? ??? ??? OGRGeometry *poGeometry;

??? ??? ??? poGeometry = poFeature->GetGeometryRef();
??? ??? ??? if( poGeometry != NULL 
??? ??? ??? ??? && wkbFlatten(poGeometry->getGeometryType()) == wkbPoint )
??? ??? ??? {
??? ??? ??? ??? OGRPoint *poPoint = (OGRPoint *) poGeometry;

??? ??? ??? ??? printf( "%.3f,%3.f\n", poPoint->getX(), poPoint->getY() );
??? ??? ??? }
??? ??? ??? else
??? ??? ??? {
??? ??? ??? ??? printf( "no point geometry\n" );
??? ??? ??? }????? 
??? ??? ??? OGRFeature::DestroyFeature( poFeature );??? ??? ??? 
??? ??? }
??? ??? OGRDataSource::DestroyDataSource( poDS );
??? ??? return 0;
}



Thanks and regards,

Tai


________________________________
 From: Dmitry Baryshnikov [via OSGeo.org] <ml-node+s1560n4988193h2 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Friday, July 13, 2012 5:43 PM
Subject: Re: Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010
 


Hi Tai,

Please post your code and screenshots of project tree and properties
    Linker ->Input and C/C++ -> Preprocessor definitions

Best regards,
??? ?? Dmitry


_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988193.html 
To unsubscribe from Error LNK1120: 314 unresolved externals - When using Ogr C++ class on Visual Studio 2010, click here.
NAML

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988339.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120713/d5d4dd44/attachment.html>

From polimax at mail.ru  Sat Jul 14 12:09:12 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat, 14 Jul 2012 23:09:12 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
References: <1342151813059-4988103.post@n6.nabble.com>
	<4FFFBD3E.9040703@mail.ru>
	<1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
Message-ID: <5001C3D8.4070105@mail.ru>

14.07.2012 5:18, taibc ?????:
> Thanks Dmitry,
>
> Please see attached files for screenshots.
>
> Here is the code of the main.cpp (the project only includes this file):
>
> #include <iostream>
> #include "ogrsf_frmts.h"
> using namespace std;
>
> int main()
>
> {
>         OGRRegisterAll();
> OGRDataSource       *poDS;
>
>         poDS = OGRSFDriverRegistrar::Open( "point.shp", FALSE );
>         if( poDS == NULL )
>         {
>             printf( "Open failed.\n" );
>             exit( 1 );
>         }
>         OGRLayer *poLayer;
>
>         poLayer = poDS->GetLayerByName( "point" );
>         OGRFeature *poFeature;
>
> poLayer->ResetReading();
>         while( (poFeature = poLayer->GetNextFeature()) != NULL )
>         {
>             OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
>             int iField;
>
>             for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
>             {
> OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );
>
>                 if( poFieldDefn->GetType() == OFTInteger )
> printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
>                 else if( poFieldDefn->GetType() == OFTReal )
> printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
>                 else if( poFieldDefn->GetType() == OFTString )
> printf( "%s,", poFeature->GetFieldAsString(iField) );
>                 else
> printf( "%s,", poFeature->GetFieldAsString(iField) );
>             }
>             OGRGeometry *poGeometry;
>
>             poGeometry = poFeature->GetGeometryRef();
>             if( poGeometry != NULL
>                 && wkbFlatten(poGeometry->getGeometryType()) == wkbPoint )
>             {
>                 OGRPoint *poPoint = (OGRPoint *) poGeometry;
>
>                 printf( "%.3f,%3.f\n", poPoint->getX(), poPoint->getY() );
>             }
>             else
>             {
>                 printf( "no point geometry\n" );
>             }
> OGRFeature::DestroyFeature( poFeature );
>         }
> OGRDataSource::DestroyDataSource( poDS );
>         return 0;
> }
>
>
> Thanks and regards,
>
> Tai
> ------------------------------------------------------------------------
> *From:* Dmitry Baryshnikov [via OSGeo.org] <[hidden email] 
> </user/SendEmail.jtp?type=node&node=4988339&i=0>>
> *To:* taibc <[hidden email] 
> </user/SendEmail.jtp?type=node&node=4988339&i=1>>
> *Sent:* Friday, July 13, 2012 5:43 PM
> *Subject:* Re: Error LNK1120: 314 unresolved externals - When using 
> Ogr C++ class on Visual Studio 2010
>
>
> Hi Tai,
>
> Please post your code and screenshots of project tree and properties 
> Linker ->Input and C/C++ -> Preprocessor definitions
>
> Best regards,
>        Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------------------------------------------------
> If you reply to this email, your message will be added to the 
> discussion below:
> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988193.html 
>
> To unsubscribe from Error LNK1120: 314 unresolved externals - When 
> using Ogr C++ class on Visual Studio 2010, click here.
> NAML 
> <http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> 
>
>
>
>
> *Preprocessor.png* (316K) Download Attachment 
> <http://osgeo-org.1560.n6.nabble.com/attachment/4988339/0/Preprocessor.png>
> *Linker_Input.png* (318K) Download Attachment 
> <http://osgeo-org.1560.n6.nabble.com/attachment/4988339/1/Linker_Input.png>
> *Project tree.png* (271K) Download Attachment 
> <http://osgeo-org.1560.n6.nabble.com/attachment/4988339/2/Project%20tree.png>
>
> ------------------------------------------------------------------------
> View this message in context: Re: Error LNK1120: 314 unresolved 
> externals - When using Ogr C++ class on Visual Studio 2010 
> <http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988339.html>
> Sent from the GDAL - Dev mailing list archive 
> <http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html> at 
> Nabble.com.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Try to add to preprocessor definitions:

_WINDOWS
STRICT
_CRT_SECURE_NO_DEPRECATE
_CRT_NONSTDC_NO_DEPRECATE
_USRDLL

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120714/65d176b6/attachment.html>

From jukka.rahkonen at mmmtike.fi  Sat Jul 14 22:53:19 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 15 Jul 2012 05:53:19 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr and reserved words
References: <20120713133314.23983.qmail@s466.sureserver.com>
Message-ID: <loom.20120715T074611-88@post.gmane.org>

Ivan Lucena <ivan.lucena <at> princeton-ma.us> writes:

> 
> Hi there,
> 
> Is there any trick to avoid creating field names with reserved words? For
example, a DBF from a shapefile can
> have field names like "long" and other formats may not like it.

Just remembered another example: having an attribute named "ROWID" will make
spatial index of a Spatialite table unusable. Perhaps Spatilite driver could try
to sanitize it while reading data in?

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Sun Jul 15 03:01:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 15 Jul 2012 12:01:14 +0200
Subject: [gdal-dev] json-c 0.10 update status and json-c copy removal
	proposed
In-Reply-To: <CABUeae_OZt2pPXvGKmjgzVxb+AnLQToWV6enOSMhWKVZ=MTugQ@mail.gmail.com>
References: <CABUeae_OZt2pPXvGKmjgzVxb+AnLQToWV6enOSMhWKVZ=MTugQ@mail.gmail.com>
Message-ID: <1342346474.500294ea8b527@imp.free.fr>

Hi Mateusz,

> Folks,
>
> I'm trying to update GDAL's copy of json-c library.
> The task is not trivial, due to the fact GDAL has applied
> some sort of improvements to json-c, and also due to
> significant changes to how json-c works, UTF-8 support, etc.

Just curious about the changes in UTF-8 support : does json-c do any transcoding
now ? I would expect that previous versions dealt with UTF-8 without doing
anything particular.

> Some of GDAL's fixes have been submitted and accepted to the upstream,
> but there are a few which hasn't, like custom function
> json_object_new_double_with_precision(), or use of CPL string functions.
>
> Personally, I don't really see benefits of using CPL functions in json-c.
> The json_object_new_double_with_precision could be moved out to GDAL
> source files.

Hum, I see I'm the one to blame for json_object_new_double_with_precision().
(This was done at a time where I wrongly assumed that there was no libjsonc
upstream activity). Unfortunately it won't be possible to implement that only in
a GDAL specific file, because it requires an additional field in a private
structure of libjson-c. The implementation as it is currently is a bit bad
looking, so I can understand it will be difficult to upstream. Perhaps a simpler
version that does not try to do clever truncation of trailing 0's could be
accepted. Something like that (uncompiled & untested, being only with an email
environmenent right now):

static int json_object_double_with_precision_to_json_string(struct json_object*
jso,
                                             struct printbuf *pb)
{
    char szFormat[16];
    sprintf(szFormat, "%%.%df", jso->_precision);
    return sprintbuf(pb, szFormat, jso->o.c_double);
}

struct json_object* json_object_new_double_with_precision(double d, int
nPrecision)
{
    struct json_object *jso = json_object_new(json_type_double);
    if(!jso) return NULL;
    jso->_to_json_string = &json_object_double_with_precision_to_json_string;
    jso->o.c_double = d;
    jso->_precision = (nPrecision < 32) ? nPrecision : 32;
    return jso;
}

or perhaps a version where instead of passing the precision, we would pass a
pointer to a callback and a user_data pointer, so that the formatting function
could be completely implemented on GDAL side ? something like :

typedef int (*json_double_custom_formatter_func_type)(char* szBuffer, size_t
nBufferLen, double d, void* user_data);

static int json_double_custom_formatter_trampoline(struct json_object* jso,
                                             struct printbuf *pb)
{
    char szBuffer[32];
    if( !json->pfnCustomFormatter(szBuffer, sizeof(szBuffer), jso->o.c_double,
jso->user_data) )
       return 0; /* not sure what value is error code */
    szBuffer[sizeof(szBuffer) - 1] = '\0';
    return sprintbuf(pb, "%s", szBuffer);
}

struct json_object* json_object_new_double_custom(double d,
json_double_custom_formatter_func_type pfnCustomFormatter, void* user_data)
{
    struct json_object *jso = json_object_new(json_type_double);
    if(!jso) return NULL;
    jso->_to_json_string = &json_double_custom_formatter_trampoline;
    jso->o.c_double = d;
    jso->pfnCustomFormatter = pfnCustomFormatter;
    jso->user_data = user_data;
    return jso;
}

Actually, after having written the above, I'm wondering if a version where we
would directly pass the custom string representation in
json_object_new_double_custom would not be even simpler !

static int json_object_double_custom_to_json_string(struct json_object* jso,
                                             struct printbuf *pb)
{
    return sprintbuf(pb, "%s", jso->pszFormattedDouble);
}

struct json_object* json_object_new_double_custom(double d, const char*
pszFormattedDouble)
{
    struct json_object *jso = json_object_new(json_type_double);
    if(!jso) return NULL;
    jso->_to_json_string = &json_object_double_custom_to_json_string;
    jso->o.c_double = d;
    jso->pszFormattedDouble = strdup(pszFormattedDouble); /* FIXME: to be freed
somewhere */
    return jso;
}

If it is not accepted, that's not critical. It was an enhancement (
http://trac.osgeo.org/gdal/ticket/4108 ), but we could
live without it and just revert to json_object_new_double().

> So, if we could compromise and give up on GDAL-specific json-c version,
> I'd like to propose to completely remove json-c sources from GDAL
> and rely on externally provided json-c (libjsonc)
> Especially, that building json-c is versy simple...if its native build
> configuration is used.

It would be good if you could coordinate with Tamas and OSGeo4W to make sure
that they have a libjson binary, so that the most popular builds for Windows
don't loose geojson support.

>
> Maintaining private and *changed* copy of json-c has become painful.
> json-c has grown and its configuration/building is based on two
> non-trivial config headers
> with plenty of #defines. Previously, we simply crafted our own version
> of static config.h
> that worked for all systems. It is not really feasible with new version.
> Also, hosting our own modified copy of json-c may lead to more GDAL-specific
> modifications increasing the pain of sync'ing it with upstream and
> maintenance in future.
>
> I don't see any reason why GDAL couldn't rely on external json-c.
> So, I'd like to propose to:
> - remove GDAL's copy of json-c from ogr/ogrsf_frmts/geojson/jsonc
> - configure Unix and Windows builds to use external binaries

I assume you will deal with the libjsonc dependency as an optional one ? I'm not
sure if you're aware of it, but in addition to the OGR GeoJSON et CouchDB
drivers, there's also the new GDAL ARG driver that depends on libjsonc. The
corresponding autotests of the 3 drivers should likely be modified to skip if
the drivers aren't compiled in.

For the ease of using on Linux, it would be good if libjson-c 0.9 could still be
used, being the version currently packaged.

>
> I'm volunteering to apply those changes.
> Please, shall I make RFC, call for votes or this e-mail is sufficient to
> discuss and make decision?

I believe this email is sufficient.

Best regards,

Even

From even.rouault at mines-paris.org  Sun Jul 15 03:07:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 15 Jul 2012 12:07:06 +0200
Subject: [gdal-dev] ogr2ogr and reserved words
In-Reply-To: <loom.20120715T074611-88@post.gmane.org>
References: <20120713133314.23983.qmail@s466.sureserver.com>
	<loom.20120715T074611-88@post.gmane.org>
Message-ID: <1342346826.5002964af1e53@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Ivan Lucena <ivan.lucena <at> princeton-ma.us> writes:
>
> >
> > Hi there,
> >
> > Is there any trick to avoid creating field names with reserved words? For
> example, a DBF from a shapefile can
> > have field names like "long" and other formats may not like it.
>
> Just remembered another example: having an attribute named "ROWID" will make
> spatial index of a Spatialite table unusable.

Having an attribute named "ROWID" will likely make it being used as the primary
key. Not sure why it would break spatial index, but I somehow remember having
skimmed through Sandro's lengthy explanations about that ;-)

> Perhaps Spatilite driver could
> try
> to sanitize it while reading data in?

Yes, perhaps. Just curious : how did you get in the situation where a ROWID
field was found ? Was it with another sqlite/spatialite table in input, or with
a datasource from another driver ?

>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Jukka.Rahkonen at mmmtike.fi  Sun Jul 15 03:59:10 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Sun, 15 Jul 2012 10:59:10 +0000
Subject: [gdal-dev] ogr2ogr and reserved words
In-Reply-To: <1342346826.5002964af1e53@imp.free.fr>
References: <20120713133314.23983.qmail@s466.sureserver.com>
	<loom.20120715T074611-88@post.gmane.org>,
	<1342346826.5002964af1e53@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A6345C0A1@suutari.haapa.mmm.fi>

Even Rouault wrote:
Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

>> Ivan Lucena <ivan.lucena <at> princeton-ma.us> writes:
>>
>> >
>> > Hi there,
>> >
>> > Is there any trick to avoid creating field names with reserved words? For
>> example, a DBF from a shapefile can
>> > have field names like "long" and other formats may not like it.
>>
>> Just remembered another example: having an attribute named "ROWID" will make
>> spatial index of a Spatialite table unusable.

> Having an attribute named "ROWID" will likely make it being used as the primary
> key. Not sure why it would break spatial index, but I somehow remember having
> skimmed through Sandro's lengthy explanations about that ;-)

Break in actually not the right word.  Triggers may prevent the creation of spatial index totally which is happy situation for the user because nothing bad happens. In a unhappy situation creation of spatial index is successful but search from the index gives wrong results. The Spatialite discussion group thread is
https://groups.google.com/forum/?fromgroups#!topic/spatialite-users/QwRdCiWoVKw

>> Perhaps Spatilite driver could
>> try
>> to sanitize it while reading data in?

> Yes, perhaps. Just curious : how did you get in the situation where a ROWID
> field was found ? Was it with another sqlite/spatialite table in input, or with
> a datasource from another driver ?

I used Spatialite-gui for making a view and next transferred the view into a new table with ogr2ogr. It is easy to repeat
- Create a view into Spatialite database with the Query/View composer
and select ROWID among other attributes
- Use ogr2ogr for transferring data from this view into another
Spatialite database as
 ogr2ogr -f SQlite -append target.sqlite source.sqlite -sql "select *
from view_with_rowid" 

I am not totally sure but I have a feeling that ROWID also must be selected into Spatialite spatial view for making the spatial index to work (view_rowid in the views_geometry_columns table seems to refer to ROWID of the main table). However, I must admit that I do not deeply understand how this new virtual spatial index system works.

-Jukka-

From mateusz at loskot.net  Sun Jul 15 12:31:41 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 15 Jul 2012 20:31:41 +0100
Subject: [gdal-dev] json-c 0.10 update status and json-c copy removal
	proposed
In-Reply-To: <1342346474.500294ea8b527@imp.free.fr>
References: <CABUeae_OZt2pPXvGKmjgzVxb+AnLQToWV6enOSMhWKVZ=MTugQ@mail.gmail.com>
	<1342346474.500294ea8b527@imp.free.fr>
Message-ID: <CABUeae_ANqhZCCtC+RT+dx9D0PRR-4jb8O+2Fe1AanKoD5wM9w@mail.gmail.com>

On 15 July 2012 11:01, Even Rouault <even.rouault at mines-paris.org> wrote:
>>
>> I'm trying to update GDAL's copy of json-c library.
>> The task is not trivial, due to the fact GDAL has applied
>> some sort of improvements to json-c, and also due to
>> significant changes to how json-c works, UTF-8 support, etc.
>
> Just curious about the changes in UTF-8 support : does json-c do any transcoding
> now ?

It does not do any transcoding. It's just that UTF-8 is first class
citizen there now.

> It turns out it does not, I would expect that previous versions dealt with UTF-8 without doing
> anything particular.

Perhaps it dealt.

>> Some of GDAL's fixes have been submitted and accepted to the upstream,
>> but there are a few which hasn't, like custom function
>> json_object_new_double_with_precision(), or use of CPL string functions.
>>
>> Personally, I don't really see benefits of using CPL functions in json-c.
>> The json_object_new_double_with_precision could be moved out to GDAL
>> source files.
>
> Hum, I see I'm the one to blame for json_object_new_double_with_precision().
> (This was done at a time where I wrongly assumed that there was no libjsonc
> upstream activity). Unfortunately it won't be possible to implement that only in
> a GDAL specific file, because it requires an additional field in a private
> structure of libjson-c.

Yes, you are right. I've forgot about this extra member.

> The implementation as it is currently is a bit bad
> looking, so I can understand it will be difficult to upstream. Perhaps a simpler
> version that does not try to do clever truncation of trailing 0's could be
> accepted. Something like that (uncompiled & untested, being only with an email
> environmenent right no tw):
> [...]
> or perhaps a version where instead of passing the precision, we would pass a
> pointer to a callback and a user_data pointer, so that the formatting function
> could be completely implemented on GDAL side ?
>[...]
> Actually, after having written the above, I'm wondering if a version where we
> would directly pass the custom string representation in
> [...]

I have no idea what could be submitted and what couldn't.
So, if you care, submit a pull request
https://github.com/json-c/json-c
or just forward these functions to
https://groups.google.com/forum/#!forum/json-c

I'm not really interested in getting involved with the json-c development myself
any deeper than I have got already.
If I hadn't made mistake including json-c sources in GDAL, I wouldn't have to
write this e-mail and discuss how to get rid of it :)

> If it is not accepted, that's not critical. It was an enhancement (
> http://trac.osgeo.org/gdal/ticket/4108 ), but we could
> live without it and just revert to json_object_new_double().

Good.

>> So, if we could compromise and give up on GDAL-specific json-c version,
>> I'd like to propose to completely remove json-c sources from GDAL
>> and rely on externally provided json-c (libjsonc)
>> Especially, that building json-c is versy simple...if its native build
>> configuration is used.
>
> It would be good if you could coordinate with Tamas and OSGeo4W to make sure
> that they have a libjson binary, so that the most popular builds for Windows
> don't loose geojson support.

I have patched json-c for Windows and Visual C++, and patches have
been accepted,
so I guess there is no problem with building for Windows/OSGeo4W.

>> I don't see any reason why GDAL couldn't rely on external json-c.
>> So, I'd like to propose to:
>> - remove GDAL's copy of json-c from ogr/ogrsf_frmts/geojson/jsonc
>> - configure Unix and Windows builds to use external binaries
>
> I assume you will deal with the libjsonc dependency as an optional one ?

If GDAL agrees to use external libjsonc, then I will make it optional
in build config.
If that's what you mean.

> I'm not sure if you're aware of it, but in addition to the OGR GeoJSON et CouchDB
> drivers, there's also the new GDAL ARG driver that depends on libjsonc.

I know about the CouchDB, but didn't know about the ARG.

>The corresponding autotests of the 3 drivers should likely be modified to skip if
> the drivers aren't compiled in.

Yes.

> For the ease of using on Linux, it would be good if libjson-c 0.9 could still be
> used, being the version currently packaged.

I have no idea to what extent the API has changed in 0.10, but I can
give it a try.

>> I'm volunteering to apply those changes.
>> Please, shall I make RFC, call for votes or this e-mail is sufficient to
>> discuss and make decision?
>
> I believe this email is sufficient.

To summary, I plan the following steps during next week or so:

0. Work will happen in trunk only
1. I will remove the json-c sources
2. I will configure build to use external libjsonc (preferably 0.9+)
3. I will update the drivers, if necessary.
4. I will update the tests, if necessary.
5. Once confirmed sound on Linux, I will push changes as single commit.
6. I continue testing on Windows (hopefully someone will be willing to
help with testing for Windows).

Do you agree?

I think I'll make a ticket for reference too.

Best regards
-- 
Mateusz Loskot, http://mateusz.loskot.net

From taibc_coltech at yahoo.com  Sun Jul 15 18:09:56 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Sun, 15 Jul 2012 18:09:56 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <5001C3D8.4070105@mail.ru>
References: <1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
	<5001C3D8.4070105@mail.ru>
Message-ID: <1342400996346-4988476.post@n6.nabble.com>

Hi Dmitry,

I tried to do that, but still got errors:

/Error	36	error LNK2019: unresolved external symbol _CSLPartialFindString
referenced in function "public: int __thiscall
CPLStringList::PartialFindString(char const *)const "
(?PartialFindString at CPLStringList@@QBEHPBD at Z)
C:\Users\Administrator\Documents\Visual Studio
2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter
/

Thanks and regards,

Tai


Dmitry Baryshnikov wrote
> 
> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Try to add to preprocessor definitions:
> 
> _WINDOWS
> STRICT
> _CRT_SECURE_NO_DEPRECATE
> _CRT_NONSTDC_NO_DEPRECATE
> _USRDLL
> 
> Best regards,
>      Dmitry
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at .osgeo
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988476.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From polimax at mail.ru  Sun Jul 15 23:18:23 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon, 16 Jul 2012 10:18:23 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342400996346-4988476.post@n6.nabble.com>
References: <1342162579.22260.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<4FFFC868.9020305@mail.ru>
	<1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
	<5001C3D8.4070105@mail.ru>
	<1342400996346-4988476.post@n6.nabble.com>
Message-ID: <5003B22F.5080103@mail.ru>

16.07.2012 5:09, taibc ?????:
> Hi Dmitry,
>
> I tried to do that, but still got errors:
>
> /Error	36	error LNK2019: unresolved external symbol _CSLPartialFindString
> referenced in function "public: int __thiscall
> CPLStringList::PartialFindString(char const *)const "
> (?PartialFindString at CPLStringList@@QBEHPBD at Z)
> C:\Users\Administrator\Documents\Visual Studio
> 2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter
> /
>
> Thanks and regards,
>
> Tai
>
>
> Dmitry Baryshnikov wrote
>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at .osgeo
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> Try to add to preprocessor definitions:
>>
>> _WINDOWS
>> STRICT
>> _CRT_SECURE_NO_DEPRECATE
>> _CRT_NONSTDC_NO_DEPRECATE
>> _USRDLL
>>
>> Best regards,
>>       Dmitry
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988476.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Hi Tai,

There do you get gdal_i.lib, dll and sources? It seems to me that they 
are different versions.

Best regards,
Dmitry


From taibc_coltech at yahoo.com  Sun Jul 15 23:37:24 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Sun, 15 Jul 2012 23:37:24 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <5003B22F.5080103@mail.ru>
References: <1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
	<5001C3D8.4070105@mail.ru>
	<1342400996346-4988476.post@n6.nabble.com>
	<5003B22F.5080103@mail.ru>
Message-ID: <1342420644131-4988499.post@n6.nabble.com>

Hi Dmitry, thank you very much !

I think maybe it is problem, because I use files from many sources (on
internet).

I've just re-built GDAL sources by using Visual Studio Command Prompt. And,
it is ok now.

I could build my project with Ogr files. But, when I ran (F5) the project, I
got an error: 

"/The program can't start because gdal18.dll is missing from your computer.
Try reinstalling the program to fix this problem/" (Please see attached
screenshot).  http://osgeo-org.1560.n6.nabble.com/file/n4988499/error.png 

Do you know this errror ?

Thanks and regards,

Tai



Dmitry Baryshnikov wrote
> 
> 16.07.2012 5:09, taibc ?????:
>> Hi Dmitry,
>>
>> I tried to do that, but still got errors:
>>
>> /Error	36	error LNK2019: unresolved external symbol _CSLPartialFindString
>> referenced in function "public: int __thiscall
>> CPLStringList::PartialFindString(char const *)const "
>> (?PartialFindString at CPLStringList@@QBEHPBD at Z)
>> C:\Users\Administrator\Documents\Visual Studio
>> 2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter
>> /
>>
>> Thanks and regards,
>>
>> Tai
>>
>>
>> Dmitry Baryshnikov wrote
>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at .osgeo
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> Try to add to preprocessor definitions:
>>>
>>> _WINDOWS
>>> STRICT
>>> _CRT_SECURE_NO_DEPRECATE
>>> _CRT_NONSTDC_NO_DEPRECATE
>>> _USRDLL
>>>
>>> Best regards,
>>>       Dmitry
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at .osgeo
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988476.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> Hi Tai,
> 
> There do you get gdal_i.lib, dll and sources? It seems to me that they 
> are different versions.
> 
> Best regards,
> Dmitry
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at .osgeo
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988499.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From polimax at mail.ru  Mon Jul 16 00:04:50 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon, 16 Jul 2012 11:04:50 +0400
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342420644131-4988499.post@n6.nabble.com>
References: <1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
	<5001C3D8.4070105@mail.ru>
	<1342400996346-4988476.post@n6.nabble.com>
	<5003B22F.5080103@mail.ru>
	<1342420644131-4988499.post@n6.nabble.com>
Message-ID: <5003BD12.1010407@mail.ru>

16.07.2012 10:37, taibc ?????:
> Hi Dmitry, thank you very much !
>
> I think maybe it is problem, because I use files from many sources (on
> internet).
>
> I've just re-built GDAL sources by using Visual Studio Command Prompt. And,
> it is ok now.
>
> I could build my project with Ogr files. But, when I ran (F5) the project, I
> got an error:
>
> "/The program can't start because gdal18.dll is missing from your computer.
> Try reinstalling the program to fix this problem/" (Please see attached
> screenshot).  http://osgeo-org.1560.n6.nabble.com/file/n4988499/error.png
>
> Do you know this errror ?
>
> Thanks and regards,
>
> Tai
>
>
>
> Dmitry Baryshnikov wrote
>> 16.07.2012 5:09, taibc ?????:
>>> Hi Dmitry,
>>>
>>> I tried to do that, but still got errors:
>>>
>>> /Error	36	error LNK2019: unresolved external symbol _CSLPartialFindString
>>> referenced in function "public: int __thiscall
>>> CPLStringList::PartialFindString(char const *)const "
>>> (?PartialFindString at CPLStringList@@QBEHPBD at Z)
>>> C:\Users\Administrator\Documents\Visual Studio
>>> 2010\Projects\CLCConverter\CLCConverter\main.obj	CLCConverter
>>> /
>>>
>>> Thanks and regards,
>>>
>>> Tai
>>>
>>>
>>> Dmitry Baryshnikov wrote
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at .osgeo
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> Try to add to preprocessor definitions:
>>>>
>>>> _WINDOWS
>>>> STRICT
>>>> _CRT_SECURE_NO_DEPRECATE
>>>> _CRT_NONSTDC_NO_DEPRECATE
>>>> _USRDLL
>>>>
>>>> Best regards,
>>>>        Dmitry
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at .osgeo
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>> --
>>> View this message in context:
>>> http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988476.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at .osgeo
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>> Hi Tai,
>>
>> There do you get gdal_i.lib, dll and sources? It seems to me that they
>> are different versions.
>>
>> Best regards,
>> Dmitry
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988499.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Put gdal18.dll to the same folder of your executable.

From taibc_coltech at yahoo.com  Mon Jul 16 00:09:37 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 16 Jul 2012 00:09:37 -0700 (PDT)
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <5003BD12.1010407@mail.ru>
References: <1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
	<5001C3D8.4070105@mail.ru>
	<1342400996346-4988476.post@n6.nabble.com>
	<5003B22F.5080103@mail.ru>
	<1342420644131-4988499.post@n6.nabble.com>
	<5003BD12.1010407@mail.ru>
Message-ID: <1342422577140-4988503.post@n6.nabble.com>

Yes, that's right. I've just done.

Thank you.

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-LNK1120-314-unresolved-externals-When-using-Ogr-C-class-on-Visual-Studio-2010-tp4988103p4988503.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From taibc_coltech at yahoo.com  Mon Jul 16 02:10:23 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 16 Jul 2012 02:10:23 -0700 (PDT)
Subject: [gdal-dev] Error reading from OGR: Unhandled Exception... Access
 violation reading location 0x00000000
Message-ID: <1342429823948-4988534.post@n6.nabble.com>

Hi friends,

I am trying to use OGR classes on VS2010 to read and write from file as the
link: 
http://gdal.org/ogr/ogr_apitut.html 

But I got an error, please see attached screenshot for details.

http://osgeo-org.1560.n6.nabble.com/file/n4988534/error.png 

Do you know this error ?

Thanks and regards,

Tai


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-reading-from-OGR-Unhandled-Exception-Access-violation-reading-location-0x00000000-tp4988534.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Mon Jul 16 02:25:08 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 16 Jul 2012 10:25:08 +0100
Subject: [gdal-dev] Error reading from OGR: Unhandled Exception...
 Access violation reading location 0x00000000
In-Reply-To: <1342429823948-4988534.post@n6.nabble.com>
References: <1342429823948-4988534.post@n6.nabble.com>
Message-ID: <CABUeae9i-GGdLnW+HKXyXw69HN87mbnQjr7bX6afpKsE1R=9ng@mail.gmail.com>

On 16 July 2012 10:10, taibc <taibc_coltech at yahoo.com> wrote:
> I am trying to use OGR classes on VS2010 to read and write from file as the
> link:
> http://gdal.org/ogr/ogr_apitut.html
>
> But I got an error, please see attached screenshot for details.
>
> http://osgeo-org.1560.n6.nabble.com/file/n4988534/error.png

Your pointer poLayer is NULL.
Perhaps the layer you want could not be found by given name
and this call returns NULL:

poLayer = poDS->GetLayerByName(...)

Just check:

if( poLayer == NULL )
{
    printf( "Layer not found.\n" );
    exit( 1 );
}

> Do you know this error ?

http://en.wikipedia.org/wiki/Segmentation_fault#Segmentation.2C_page_fault.2C_and_access_violation

I'd recommend you to get a good C/C++ book.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jul 16 02:29:27 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 16 Jul 2012 10:29:27 +0100
Subject: [gdal-dev] Error LNK1120: 314 unresolved externals - When using
 Ogr C++ class on Visual Studio 2010
In-Reply-To: <1342420644131-4988499.post@n6.nabble.com>
References: <1342163913.35311.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<4FFFD1DA.8040808@mail.ru>
	<1342173288.70717.YahooMailNeo@web190004.mail.sg3.yahoo.com>
	<4FFFF22D.3050609@mail.ru>
	<1342174685.71847.YahooMailNeo@web190003.mail.sg3.yahoo.com>
	<4FFFFBD1.8060604@mail.ru>
	<1342228673.30169.YahooMailNeo@web190001.mail.sg3.yahoo.com>
	<5001C3D8.4070105@mail.ru> <1342400996346-4988476.post@n6.nabble.com>
	<5003B22F.5080103@mail.ru> <1342420644131-4988499.post@n6.nabble.com>
Message-ID: <CABUeae9AKokQvChg=47bLnJwvCmqq+TO4BMCwCk7OJO9YowE5w@mail.gmail.com>

On 16 July 2012 07:37, taibc <taibc_coltech at yahoo.com> wrote:
> I could build my project with Ogr files. But, when I ran (F5) the project, I
> got an error:
>
> "/The program can't start because gdal18.dll is missing from your computer.
> Try reinstalling the program to fix this problem/" (Please see attached
> screenshot).  http://osgeo-org.1560.n6.nabble.com/file/n4988499/error.png

http://stackoverflow.com/questions/428085/how-do-i-set-a-path-in-visual-studio

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From polimax at mail.ru  Mon Jul 16 02:29:51 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon, 16 Jul 2012 13:29:51 +0400
Subject: [gdal-dev] Error reading from OGR: Unhandled Exception...
 Access violation reading location 0x00000000
In-Reply-To: <1342429823948-4988534.post@n6.nabble.com>
References: <1342429823948-4988534.post@n6.nabble.com>
Message-ID: <5003DF0F.4060507@mail.ru>

16.07.2012 13:10, taibc ?????:
> Hi friends,
>
> I am trying to use OGR classes on VS2010 to read and write from file as the
> link:
> http://gdal.org/ogr/ogr_apitut.html
>
> But I got an error, please see attached screenshot for details.
>
> http://osgeo-org.1560.n6.nabble.com/file/n4988534/error.png
>
> Do you know this error ?
>
> Thanks and regards,
>
> Tai
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-reading-from-OGR-Unhandled-Exception-Access-violation-reading-location-0x00000000-tp4988534.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
You poLayer pointer is NULL. Use const char* err = CPLGetLastErrorMsg(); 
to check error

Best regards,
Dmitry


From taibc_coltech at yahoo.com  Mon Jul 16 03:42:21 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 16 Jul 2012 03:42:21 -0700 (PDT)
Subject: [gdal-dev] Error reading from OGR: Unhandled Exception...
 Access violation reading location 0x00000000
In-Reply-To: <5003DF0F.4060507@mail.ru>
References: <1342429823948-4988534.post@n6.nabble.com>
	<5003DF0F.4060507@mail.ru>
Message-ID: <1342435341153-4988552.post@n6.nabble.com>

Yes, thank you.

I have another question: When reading the files (.dgn, or .shp), why only
have* one layer* (I used the function GetLayerCount()) ?

I check these file on Microstation or ArcCatalog, they have many layers.

Thanks and regards,

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-reading-from-OGR-Unhandled-Exception-Access-violation-reading-location-0x00000000-tp4988534p4988552.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Mon Jul 16 03:50:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 16 Jul 2012 12:50:42 +0200
Subject: [gdal-dev] json-c 0.10 update status and json-c copy removal
	proposed
In-Reply-To: <CABUeae_ANqhZCCtC+RT+dx9D0PRR-4jb8O+2Fe1AanKoD5wM9w@mail.gmail.com>
References: <CABUeae_OZt2pPXvGKmjgzVxb+AnLQToWV6enOSMhWKVZ=MTugQ@mail.gmail.com>
	<1342346474.500294ea8b527@imp.free.fr>
	<CABUeae_ANqhZCCtC+RT+dx9D0PRR-4jb8O+2Fe1AanKoD5wM9w@mail.gmail.com>
Message-ID: <1342435842.5003f2024f0f5@imp.free.fr>

> I have no idea what could be submitted and what couldn't.
> So, if you care, submit a pull request
> https://github.com/json-c/json-c
> or just forward these functions to
> https://groups.google.com/forum/#!forum/json-c

I'll try to, but not before end of week.

> I have patched json-c for Windows and Visual C++, and patches have
> been accepted,
> so I guess there is no problem with building for Windows/OSGeo4W.

Do we need json-c 0.10 to be able to build it for Windows ? Or was 0.9 already
OK ?

>
> >> I don't see any reason why GDAL couldn't rely on external json-c.
> >> So, I'd like to propose to:
> >> - remove GDAL's copy of json-c from ogr/ogrsf_frmts/geojson/jsonc
> >> - configure Unix and Windows builds to use external binaries
> >
> > I assume you will deal with the libjsonc dependency as an optional one ?
>
> If GDAL agrees to use external libjsonc, then I will make it optional
> in build config.
> If that's what you mean.

Yes

> > For the ease of using on Linux, it would be good if libjson-c 0.9 could
> still be
> > used, being the version currently packaged.
>
> I have no idea to what extent the API has changed in 0.10, but I can
> give it a try.

Hopefully the API (at least, the subset used by the GDAL/OGR drivers) hasn't
changed. If it has, I think we will have to adapt to the 0.9 and 0.10 API.

> To summary, I plan the following steps during next week or so:
>
> 0. Work will happen in trunk only
> 1. I will remove the json-c sources
> 2. I will configure build to use external libjsonc (preferably 0.9+)
> 3. I will update the drivers, if necessary.
> 4. I will update the tests, if necessary.
> 5. Once confirmed sound on Linux, I will push changes as single commit.
> 6. I continue testing on Windows (hopefully someone will be willing to
> help with testing for Windows).
>
> Do you agree?
>
> I think I'll make a ticket for reference too.

Sounds good to me. If we need libjson-c 0.10 for having something that builds
under Windows, then I think it will be best to wait for it to be officially
released before removing the internal copy from GDAL trunk.

Best regards,

Even


From polimax at mail.ru  Mon Jul 16 03:57:35 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon, 16 Jul 2012 14:57:35 +0400
Subject: [gdal-dev] Error reading from OGR: Unhandled Exception...
 Access violation reading location 0x00000000
In-Reply-To: <1342435341153-4988552.post@n6.nabble.com>
References: <1342429823948-4988534.post@n6.nabble.com>
	<5003DF0F.4060507@mail.ru>
	<1342435341153-4988552.post@n6.nabble.com>
Message-ID: <5003F39F.8050707@mail.ru>

16.07.2012 14:42, taibc ?????:
> Yes, thank you.
>
> I have another question: When reading the files (.dgn, or .shp), why only
> have* one layer* (I used the function GetLayerCount()) ?
>
> I check these file on Microstation or ArcCatalog, they have many layers.
>
> Thanks and regards,
>
> Tai
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-reading-from-OGR-Unhandled-Exception-Access-violation-reading-location-0x00000000-tp4988534p4988552.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
http://gdal.org/ogr/drv_dgn.html
http://gdal.org/ogr/drv_shapefile.html

Best regards,
Dmitry


From diregola at gmail.com  Mon Jul 16 07:07:26 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Mon, 16 Jul 2012 16:07:26 +0200
Subject: [gdal-dev] bigtiff support maybe not working
Message-ID: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>

Hi,

I need to make a mosaic with gdalwarp using a lot of large files (ASTER
GDEM, Europe coverage). For this, I need the bigtiff support, but I'm not
sure it is working properly.
Here is my work flow:

# RES=0:00:01
RES=0.000278
BIGTIFF="-co BIGTIFF=YES"
# GDAL cache in megabytes
CACHE="--config GDAL_CACHEMAX 8000 -wm 8000"

LIST=""
for i in `cat /home/leomarg/Desktop/aster/elenco_aster_europa_riga`;do
LIST="$LIST $i"; done
gdalwarp $CACHE $BIGTIFF -srcnodata -9999 -dstnodata -9999 -r bilinear -tr
$RES $RES $LIST mosaik_$RES.tif

I get the following error:

[...]

ERROR 1: Integer overflow : nDstXSize=49460, nDstYSize=70144
Processing input file ASTGTM_N55E011_dem_lzw.tif.
ERROR 1: Integer overflow : nDstXSize=49460, nDstYSize=70144
Processing input file ASTGTM_N55E012_dem_lzw.tif.
ERROR 1: Integer overflow : nDstXSize=49460, nDstYSize=70144
More than 1000 errors or warnings have been reported. No more will be
reported from now.

[...]

So, it looks like the bigtiff support is not working properly. I'm on Red
Hat 64 bit and compiled gdal 1.9.1 from source, with the following
configure:

./configure --with-libtiff=internal -with-geotiff=internal

What am I missing? And, how can I check if the bigtiff support is active in
my gdal installation?

TIA,

-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120716/59522d82/attachment.html>

From even.rouault at mines-paris.org  Mon Jul 16 07:18:52 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 16 Jul 2012 16:18:52 +0200
Subject: [gdal-dev] bigtiff support maybe not working
In-Reply-To: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
Message-ID: <1342448332.500422cc75b15@imp.free.fr>

Margherita,

> # GDAL cache in megabytes
> CACHE="--config GDAL_CACHEMAX 8000 -wm 8000"
>

BigTIFF support likely works as expected. In that instance, the error comes from
the huge value used for the -wm option of gdalwarp. Try to keep it below 2000.
If I remember well, there must be a sanity check in the warping algorithm to
prevent allocation of buffers above 2 GB, to avoid errors in 32bit environmenet.
And in 64bit builds, there's little gain to expect from such huge values anyway.
The GDAL_CACHEMAX value is also probably much bigger than really needed. In any
case, you must make sure that the available RAM is at least the sum of the 2
values, otherwise you'll get into disk swapping, which will anihilate the
benefit of those optimizations.

If you are playing with cache values, you must make sure to read and understand
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp
. To sum it up : "bigger is not necessarily better"

But you could likely benefit from adding -co TILED=YES to produce a tiled
GeoTIFF.

And specifying -co BIGTIFF=YES is rarely needed. Recent GDAL builds will figure
automatically if BigTIFF is necessary for uncompressed files. If you ask for
compressed GeoTIFF, the heuristics might fail and the explicit BIGTIFF=YES
option might be necessary.

Best regards,

Even

From diregola at gmail.com  Mon Jul 16 09:01:53 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Mon, 16 Jul 2012 18:01:53 +0200
Subject: [gdal-dev] bigtiff support maybe not working
In-Reply-To: <1342448332.500422cc75b15@imp.free.fr>
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
	<1342448332.500422cc75b15@imp.free.fr>
Message-ID: <CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>

Hi Even,


> BigTIFF support likely works as expected. In that instance, the error
> comes from
> the huge value used for the -wm option of gdalwarp. Try to keep it below
> 2000.
> If I remember well, there must be a sanity check in the warping algorithm
> to
> prevent allocation of buffers above 2 GB, to avoid errors in 32bit
> environmenet.
> And in 64bit builds, there's little gain to expect from such huge values
> anyway.
> The GDAL_CACHEMAX value is also probably much bigger than really needed.
> In any
> case, you must make sure that the available RAM is at least the sum of the
> 2
> values, otherwise you'll get into disk swapping, which will anihilate the
> benefit of those optimizations.
>
> If you are playing with cache values, you must make sure to read and
> understand
>
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp
> . To sum it up : "bigger is not necessarily better"
>
> But you could likely benefit from adding -co TILED=YES to produce a tiled
> GeoTIFF.
>
> And specifying -co BIGTIFF=YES is rarely needed. Recent GDAL builds will
> figure
> automatically if BigTIFF is necessary for uncompressed files. If you ask
> for
> compressed GeoTIFF, the heuristics might fail and the explicit BIGTIFF=YES
> option might be necessary.
>

thank you for valuable hints,
now I'm trying with:

CACHE="--config GDAL_CACHEMAX 8000 -wm 2000"
gdalwarp $CACHE -srcnodata -9999 -dstnodata -9999 -r bilinear -tr $RES $RES
$LIST mosaik_$RES.tif -co TILED=YES

It is taking long, of course, but somehow it is working and I don't get
error, so I have good expectations.. I'll keep you posted about the results
:-)

Regards,

-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120716/6913b153/attachment.html>

From diregola at gmail.com  Mon Jul 16 23:40:44 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Tue, 17 Jul 2012 08:40:44 +0200
Subject: [gdal-dev] bigtiff support maybe not working
In-Reply-To: <CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
	<1342448332.500422cc75b15@imp.free.fr>
	<CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>
Message-ID: <CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>

On Mon, Jul 16, 2012 at 6:01 PM, Margherita Di Leo <diregola at gmail.com>wrote:

>
> now I'm trying with:
>
> CACHE="--config GDAL_CACHEMAX 8000 -wm 2000"
> gdalwarp $CACHE -srcnodata -9999 -dstnodata -9999 -r bilinear -tr $RES
> $RES $LIST mosaik_$RES.tif -co TILED=YES
>
>
> It is taking long, of course, but somehow it is working and I don't get
> error, so I have good expectations.. I'll keep you posted about the results
> :-)
>

Actually it is taking forever.. after one day it only processed a dozen of
tiles.. any hint to try to speed up the process? Otherwise I will need ages
to get my job done :-)

Thanks!

-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120717/6c44bf50/attachment.html>

From diregola at gmail.com  Mon Jul 16 23:42:25 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Tue, 17 Jul 2012 08:42:25 +0200
Subject: [gdal-dev] bigtiff support maybe not working
In-Reply-To: <CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
	<1342448332.500422cc75b15@imp.free.fr>
	<CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>
	<CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>
Message-ID: <CABa=8Qrxk3we6My-tXftj4yJV22mKFk_CUihdjsBbFuAUwF+qw@mail.gmail.com>

On Tue, Jul 17, 2012 at 8:40 AM, Margherita Di Leo <diregola at gmail.com>wrote:

>
>
> On Mon, Jul 16, 2012 at 6:01 PM, Margherita Di Leo <diregola at gmail.com>wrote:
>
>>
>> now I'm trying with:
>>
>> CACHE="--config GDAL_CACHEMAX 8000 -wm 2000"
>> gdalwarp $CACHE -srcnodata -9999 -dstnodata -9999 -r bilinear -tr $RES
>> $RES $LIST mosaik_$RES.tif -co TILED=YES
>>
>>
>> It is taking long, of course, but somehow it is working and I don't get
>> error, so I have good expectations.. I'll keep you posted about the results
>> :-)
>>
>
> Actually it is taking forever.. after one day it only processed a dozen of
> tiles.. any hint to try to speed up the process? Otherwise I will need ages
> to get my job done :-)
>
> I forgot to mention that cpu is around 1 and 5 % used.


-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120717/5b68c316/attachment.html>

From lcelati at latitude-geosystems.com  Tue Jul 17 00:39:56 2012
From: lcelati at latitude-geosystems.com (laurent celati)
Date: Tue, 17 Jul 2012 00:39:56 -0700 (PDT)
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <CABUeae9jqbF+ijsefut37Fy6YYZCTtYKMZitegVipitKKKtTnw@mail.gmail.com>
References: <1342177671957-4988197.post@n6.nabble.com>
	<CABUeae9jqbF+ijsefut37Fy6YYZCTtYKMZitegVipitKKKtTnw@mail.gmail.com>
Message-ID: <1342510796200-4988740.post@n6.nabble.com>

Dear Mr. Loskot,

I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
source using Gdal SVN version because i 'm working on displaying postgis
raster data with qgis. And i noticed a bug with gdal 1.9 regarding overviews
(bug fixed on gdal 1.9.1 according to Mauricio de paulo_developper of that
plugin). That's why i have not choice : i have to compile gdal 1.9.1 from
GDAL'S SVN then compile Qgis 1.8 from source using Gdal SVN version.

With kind regards.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-compile-gdal-1-9-1-from-GDAL-S-SVN-tp4988197p4988740.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jrepetto at free.fr  Tue Jul 17 01:01:37 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 17 Jul 2012 10:01:37 +0200
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <1342510796200-4988740.post@n6.nabble.com>
References: <1342177671957-4988197.post@n6.nabble.com>
	<CABUeae9jqbF+ijsefut37Fy6YYZCTtYKMZitegVipitKKKtTnw@mail.gmail.com>
	<1342510796200-4988740.post@n6.nabble.com>
Message-ID: <50051BE1.7020209@free.fr>

Le 17/07/2012 09:39, laurent celati a ?crit :
> Dear Mr. Loskot,
>
> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
> source using Gdal SVN version because i 'm working on displaying postgis
> raster data with qgis. And i noticed a bug with gdal 1.9 regarding overviews
> (bug fixed on gdal 1.9.1 according to Mauricio de paulo_developper of that
> plugin). That's why i have not choice : i have to compile gdal 1.9.1 from
> GDAL'S SVN then compile Qgis 1.8 from source using Gdal SVN version.
>

GDAL 1.9.1 has been released on May 22, so it is available now, and you 
don't have to compile it.

Jean-Claude


From mateusz at loskot.net  Tue Jul 17 01:06:35 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 17 Jul 2012 09:06:35 +0100
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <1342510796200-4988740.post@n6.nabble.com>
References: <1342177671957-4988197.post@n6.nabble.com>
	<CABUeae9jqbF+ijsefut37Fy6YYZCTtYKMZitegVipitKKKtTnw@mail.gmail.com>
	<1342510796200-4988740.post@n6.nabble.com>
Message-ID: <CABUeae_80kNPbg-h64KruNv_ah3ghMZ++M=2GfRwDeeEJ+4W4w@mail.gmail.com>

On 17 July 2012 08:39, laurent celati <lcelati at latitude-geosystems.com> wrote:
> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
> source using Gdal SVN version because i 'm working on displaying postgis
> raster data with qgis. And i noticed a bug with gdal 1.9 regarding overviews
> (bug fixed on gdal 1.9.1 according to Mauricio de paulo_developper of that
> plugin). That's why i have not choice : i have to compile gdal 1.9.1 from
> GDAL'S SVN then compile Qgis 1.8 from source using Gdal SVN version.

IMHO, it's not a reason.
In such case, I'd ask QGIS folks to release an updated binaries.
That way, only one person (package maintainers) has to do the work,
and all the users benefit. Otherwise, it's waste of energy and time
(It also includes time on explaining inexperienced end-user how to
build a software
from cutting-edge development version.)

my 5 groszy

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From jukka.rahkonen at mmmtike.fi  Tue Jul 17 01:19:18 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 17 Jul 2012 08:19:18 +0000 (UTC)
Subject: [gdal-dev] bigtiff support maybe not working
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
	<1342448332.500422cc75b15@imp.free.fr>
	<CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>
	<CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>
	<CABa=8Qrxk3we6My-tXftj4yJV22mKFk_CUihdjsBbFuAUwF+qw@mail.gmail.com>
Message-ID: <loom.20120717T095208-592@post.gmane.org>

Margherita Di Leo <diregola <at> gmail.com> writes:


> 
> now I'm trying with:CACHE="--config GDAL_CACHEMAX 8000 -wm 2000"gdalwarp
$CACHE -srcnodata -9999 -dstnodata -9999 -r bilinear -tr $RES $RES $LIST
mosaik_$RES.tif -co TILED=YES
> 
> It is taking long, of course, but somehow it is working and I don't get error,
so I have good expectations.. I'll keep you posted about the results 
> 
> 
> 
> Actually it is taking forever.. after one day it only processed a dozen of
tiles.. any hint to try to speed up the process? Otherwise I will need ages to
get my job done 

A few suggestions:

- GDAL_CACHEMAX and -wm may still be far too big.
- Try with -wo SKIP_NOSOURCE=YES which is documented in 
http://gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08
- It might work faster by using a single .VRT virtual raster as input (make is
with gdalbuildvrt utility) instead of adding source files one by one with
gdalwarp as I suppose your command is doing now.

There was some discussion about warping speed some years ago. I do not remember
what was the end result because I finally used another software for the task I
had then and I have not played much with creating big warped images since then.
However, the thread is probably worth reading. You can jump in for example at 
http://www.mail-archive.com/gdal-dev at lists.osgeo.org/msg03986.html

If you have really much imagery it may be faster to split the huge job into
smaller ones and create rectangular warped tiles into the target projection in
first phase and combine them in a second phase by combining them with
gdalbuildvrt and finally writing out to final BigTIFF with gdal_translate. Then
you can also use more computers for warping. 

-Jukka Rahkonen-





From even.rouault at mines-paris.org  Tue Jul 17 01:20:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 17 Jul 2012 10:20:30 +0200
Subject: [gdal-dev] bigtiff support maybe not working
In-Reply-To: <CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
	<1342448332.500422cc75b15@imp.free.fr>
	<CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>
	<CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>
Message-ID: <1342513230.5005204e0da21@imp.free.fr>

Selon Margherita Di Leo <diregola at gmail.com>:

> On Mon, Jul 16, 2012 at 6:01 PM, Margherita Di Leo <diregola at gmail.com>wrote:
>
> >
> > now I'm trying with:
> >
> > CACHE="--config GDAL_CACHEMAX 8000 -wm 2000"
> > gdalwarp $CACHE -srcnodata -9999 -dstnodata -9999 -r bilinear -tr $RES
> > $RES $LIST mosaik_$RES.tif -co TILED=YES
> >
> >
> > It is taking long, of course, but somehow it is working and I don't get
> > error, so I have good expectations.. I'll keep you posted about the results
> > :-)
> >
>
> Actually it is taking forever.. after one day it only processed a dozen of
> tiles.. any hint to try to speed up the process? Otherwise I will need ages
> to get my job done :-)

You could just remove the tweaking done with GDAL_CACHEMAX and -wm and leave
them to their default values. In my experience, a so big value for GDAL_CACHEMAX
is of no use (no need to use more than 500 MB), and when merging a lot of small
rasters into a big one, a high value for -wm can severely decrease performance
(see the link I posted yesterday). If all your tiles are of the same resolution,
you could also remove -r bilinear.

Or if your tiles are in the same projection, just use gdalbuildvrt to create a
virtual mosaic. That should take only a few seconds to run.

>
> Thanks!
>
> --
> Dr. Margherita Di Leo
>



From etourigny.dev at gmail.com  Tue Jul 17 04:40:46 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 17 Jul 2012 08:40:46 -0300
Subject: [gdal-dev] How to compile gdal 1.9.1 from GDAL'S SVN ?
In-Reply-To: <1342510796200-4988740.post@n6.nabble.com>
References: <1342177671957-4988197.post@n6.nabble.com>
	<CABUeae9jqbF+ijsefut37Fy6YYZCTtYKMZitegVipitKKKtTnw@mail.gmail.com>
	<1342510796200-4988740.post@n6.nabble.com>
Message-ID: <CA+TxYvOKbZtF78M42qJ0U6qx6ZfjZmZA6chKs2KbEjh-CpAPHg@mail.gmail.com>

Looking at the osgeo4w current package page[1], it looks like gdal
1.9.1-RC2-2 is available, which I think is identical to gdal-1.9.1

Did you try qgis with the osgeo4w installer or the standalone installer?

[1] http://download.osgeo.org/osgeo4w/versions.html

Etienne


On Tue, Jul 17, 2012 at 4:39 AM, laurent celati
<lcelati at latitude-geosystems.com> wrote:
> Dear Mr. Loskot,
>
> I would like compile gdal 1.9.1 from GDAL'S SVN then compile Qgis 1.8 from
> source using Gdal SVN version because i 'm working on displaying postgis
> raster data with qgis. And i noticed a bug with gdal 1.9 regarding overviews
> (bug fixed on gdal 1.9.1 according to Mauricio de paulo_developper of that
> plugin). That's why i have not choice : i have to compile gdal 1.9.1 from
> GDAL'S SVN then compile Qgis 1.8 from source using Gdal SVN version.
>
> With kind regards.
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-compile-gdal-1-9-1-from-GDAL-S-SVN-tp4988197p4988740.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From benjamin.lux at maxsea.fr  Tue Jul 17 07:37:08 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Tue, 17 Jul 2012 07:37:08 -0700 (PDT)
Subject: [gdal-dev]  Ogr: ExecuteSQL with MSSQL and geometry column
Message-ID: <1342535828384-4988831.post@n6.nabble.com>

Hi,

I code an application with a warper C# of Ogr.
I have a MSSQL data base which work fine with Ogr (except this issue).
I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY).

To minimise my acces to SQL Serveur (Driver MSSQLSpatial) I want to copy a
request SQL into a Spatial Layer (with a geometry column) based on a Memory
Driver.
To obtain my layer I call ExecuteSQL().

[code]
string options =  "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
serverDataSource = Ogr.Open("MSSQL:" + connectionString + options), 0);

string request = "SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'"
Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
[/code]

I see that my layer name is "SELECT", it have 39 features but my result
doesn't contain geometry column !
Why ?
serverLayer.GetGeometryColumn() returns "" and serverLayer.GetGeomType()
returns "wkbUnknown".

And the layer serverLayer ( or a layer provide by a Memory Driver) have any
method "ChoseGeometryField" or "SetGeometryColumn" (or I have missed it).


If I call serverDataSource.GetLayerByName("MY_TABLE").GetGeometryColumn() it
work fine and result "WKB_GEOMETRY".

Any suggests ?

Regards,
Benjamin.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bhudspeth at edac.unm.edu  Mon Jul 16 14:23:53 2012
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Mon, 16 Jul 2012 15:23:53 -0600
Subject: [gdal-dev] output of geotiff from numPy array
Message-ID: <1342473833.28106.17.camel@wilbur-desktop>

Hello,

I am trying to write a two-dimensional numPy float array to a Geotiff
using the Python GDAL bindings. I use code similar to

format="GTiff"
dst_driver=GetDriverByName(format)
srs=osr.SpatialReference()
srs.ImportFromEPSG(4326)

dust_abs=dst_driver.Create(dst_filename,pream_array_columns,pream_array_rows,1,GDT_Byte)
dust_abs.SetGeoTransform(pream_geotransform)			
dust_abs.SetProjection(srs.ExportToWkt())
dust_abs.GetRasterBand(1).WriteArray(input_array)

My output tiff is of type float, but the values are stretched from 0 to
255. How do I get an output tiff with the original array float values?


Ex. 
gdalinfo -stats file.tif

.....
Band 1 Block=149x54 Type=Byte, ColorInterp=Gray
  Min=0.000 Max=255.000 
  Minimum=0.000, Maximum=255.000, Mean=77.244, StdDev=117.178
  Metadata:
    STATISTICS_MINIMUM=0
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=77.244174647462
    STATISTICS_STDDEV=117.17765153021
..........


Thanks


From traviskirstine at gmail.com  Tue Jul 17 11:48:25 2012
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue, 17 Jul 2012 14:48:25 -0400
Subject: [gdal-dev] output of geotiff from numPy array
In-Reply-To: <1342473833.28106.17.camel@wilbur-desktop>
References: <1342473833.28106.17.camel@wilbur-desktop>
Message-ID: <CALtm4h1ufEgxsxW6hAG4q-9Eqm5RAE__=EBA3JvGHWmGGSC+EQ@mail.gmail.com>

It appears that you are creating a 8-bit unsigned integer as the
output (GDT_Byte).  Try switch it to GDT_Float32

http://www.gdal.org/gdal_8h.html#a22e22ce0a55036a96f652765793fb7a4

Regards

On 16 July 2012 17:23, William Hudspeth <bhudspeth at edac.unm.edu> wrote:
> Hello,
>
> I am trying to write a two-dimensional numPy float array to a Geotiff
> using the Python GDAL bindings. I use code similar to
>
> format="GTiff"
> dst_driver=GetDriverByName(format)
> srs=osr.SpatialReference()
> srs.ImportFromEPSG(4326)
>
> dust_abs=dst_driver.Create(dst_filename,pream_array_columns,pream_array_rows,1,GDT_Byte)
> dust_abs.SetGeoTransform(pream_geotransform)
> dust_abs.SetProjection(srs.ExportToWkt())
> dust_abs.GetRasterBand(1).WriteArray(input_array)
>
> My output tiff is of type float, but the values are stretched from 0 to
> 255. How do I get an output tiff with the original array float values?
>
>
> Ex.
> gdalinfo -stats file.tif
>
> .....
> Band 1 Block=149x54 Type=Byte, ColorInterp=Gray
>   Min=0.000 Max=255.000
>   Minimum=0.000, Maximum=255.000, Mean=77.244, StdDev=117.178
>   Metadata:
>     STATISTICS_MINIMUM=0
>     STATISTICS_MAXIMUM=255
>     STATISTICS_MEAN=77.244174647462
>     STATISTICS_STDDEV=117.17765153021
> ..........
>
>
> Thanks
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Tue Jul 17 21:33:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 18 Jul 2012 10:03:14 +0530
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <1342535828384-4988831.post@n6.nabble.com>
References: <1342535828384-4988831.post@n6.nabble.com>
Message-ID: <CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>

Benjamin,

The name 'SELECT' is intentional. We can't set it to the table's name. The
select command could be a complex one involving multiple tables.

The result layer has the native OGR format. The geometry is separate from
the attributes/fields. So, there will be no geometry column in it. You can
access the geometry like with any other ogr feature.

For a table, the geometry type is determined by reading the
dbo.geometry_columns table. For the result layer there is no easy way to do
it and is set to wkbUnknown. In any case, you should be able to use those
geometry objects like any other.


On Tue, Jul 17, 2012 at 8:07 PM, Benjamin <benjamin.lux at maxsea.fr> wrote:

> Hi,
>
> I code an application with a warper C# of Ogr.
> I have a MSSQL data base which work fine with Ogr (except this issue).
> I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY).
>
> To minimise my acces to SQL Serveur (Driver MSSQLSpatial) I want to copy a
> request SQL into a Spatial Layer (with a geometry column) based on a Memory
> Driver.
> To obtain my layer I call ExecuteSQL().
>
> [code]
> string options =  "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
> serverDataSource = Ogr.Open("MSSQL:" + connectionString + options), 0);
>
> string request = "SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'"
> Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
> [/code]
>
> I see that my layer name is "SELECT", it have 39 features but my result
> doesn't contain geometry column !
> Why ?
> serverLayer.GetGeometryColumn() returns "" and serverLayer.GetGeomType()
> returns "wkbUnknown".
>
> And the layer serverLayer ( or a layer provide by a Memory Driver) have any
> method "ChoseGeometryField" or "SetGeometryColumn" (or I have missed it).
>
>
> If I call serverDataSource.GetLayerByName("MY_TABLE").GetGeometryColumn()
> it
> work fine and result "WKB_GEOMETRY".
>
> Any suggests ?
>
> Regards,
> Benjamin.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120718/96b0dc2b/attachment.html>

From benjamin.lux at maxsea.fr  Wed Jul 18 00:56:40 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Wed, 18 Jul 2012 00:56:40 -0700 (PDT)
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
References: <1342535828384-4988831.post@n6.nabble.com>
	<CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
Message-ID: <1342598200302-4988966.post@n6.nabble.com>

"You can access the geometry like with any other ogr feature."

Yes, it's right. But how string are encoded with Ogr ?
Because I have to write :

[code]
byte[] memWkb =
System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
Geometry memGeom = Geometry.CreateFromWkb(memWkb);
[/code]

It's UTF8, ASCII, Unicode ?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4988966.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Jul 18 01:01:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 18 Jul 2012 10:01:18 +0200
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <1342598200302-4988966.post@n6.nabble.com>
References: <1342535828384-4988831.post@n6.nabble.com>
	<CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
	<1342598200302-4988966.post@n6.nabble.com>
Message-ID: <1342598478.50066d4e5450e@imp.free.fr>

Selon Benjamin <benjamin.lux at maxsea.fr>:

> "You can access the geometry like with any other ogr feature."
>

Hopefully, memFeature.GetGeometryRef() should do it !

From jukka.rahkonen at mmmtike.fi  Wed Jul 18 02:05:01 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 18 Jul 2012 09:05:01 +0000 (UTC)
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
References: <201207101923.32027.even.rouault@mines-paris.org>
Message-ID: <loom.20120718T103317-371@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Hi,
> 
> Following the recent brainstorming with Jukka, I've pushed into trunk a driver 
> to read OpenStreetMap .osm / .pbf files .

Driver seems to do what it promises. It is super fast in converting POI data
because it is possible to skip the slower layers (lines, polygons and especially
the tricky multipolygons). Speed with my slow Windows laptop is at least 300000
converted POIs per minute. However, select with SQL feels sub-optimal. It is
much faster to convert all the points than select only a part of those. The
error message suggest that ogr2ogr is inspecting the input file more closely
than necessary for this use case:

ogr2ogr -f "ESRI Shapefile" poitest.shp finland.osm.pbf
-sql "select name, amenity from points where amenity='toilets'" 

ERROR 1: Too many features have accumulated in lines layer. Use OGR_INTERLEAVED_
READING=YES mode

-Jukka Rahkonen-




From benjamin.lux at maxsea.fr  Wed Jul 18 06:01:04 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Wed, 18 Jul 2012 06:01:04 -0700 (PDT)
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <1342598478.50066d4e5450e@imp.free.fr>
References: <1342535828384-4988831.post@n6.nabble.com>
	<CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
	<1342598200302-4988966.post@n6.nabble.com>
	<1342598478.50066d4e5450e@imp.free.fr>
Message-ID: <1342616464446-4989072.post@n6.nabble.com>

Sorry, I was not clear. 

I resume from the beginning.

I work with a warper C# of Ogr.
I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY) in a
SQL server Database (in SQL Azure exactly).

*My aim is to work with a copy* (in a 
http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
statement result executed on a MSSQL DataSource.

Actually I can work with usuals methods with this MSSQL DataSource.
Note that I have not geometry_column table in my SQL Serveur DataBase, I use 
http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .

[code]
string driverOptions = 
"Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
serverDataSource = Ogr.Open("MSSQL:" + connectionString + driverOptions),
0);

serveurDataSource.GetLayerCount(); // It works fine.
[/code]

So I tried a call to 
http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
SQLExecute() .
[code]
string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
[/code]

But unfortunately, I have not geometry field in the result.
[code]
serveurLayer.GetGeometryColumn();  //*return ""*
serveurLayer.GetGeomType();          //*return wkbUnknown*
[/code]

But I have my 3 fields in serveurLayer !
[code]
serverLayer.GetLayerDefn().GetFieldCount();                //return 3
serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return "CHART_ID"
serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
"WKB_GEOMETRY"*
[/code]

So I want to copy this layer in a Memory Layer to minimise acces to my SQL
Server and work faster.
[code]
Driver memDriver = Ogr.GetDriverByName("Memory");
DataSource memDataSource =
memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName, null);
[/code]


Now,* I have to fetch my geometries*, so have thought to a trick like this :
[code]
byte[] memWkb =
System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
Geometry memGeom = Geometry.CreateFromWkb(memWkb); 
[/code]
Because I can't use memFeature.GetGeometryRef() 
[code]
memFeature.GetLayerCount();                                // return 39
Feature memFeature = memLayer.GetNextFeature();  // don't return null
memFeature.GetGeometryRef();                             // *return null*
[/code]

But I don't know if I have to use UTF8, ASCII, Unicode or other.
If you know what encoding is use, or better an other trick to have a
geometry in my memLayer or serverLayer I heard you with interest !


Sorry for my spelling, English isn't my native tongue language.

Benjamin


Ps : link to the thread: 
http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html 



Even Rouault wrote
> 
> Selon Benjamin &lt;benjamin.lux@&gt;:
> 
>> "You can access the geometry like with any other ogr feature."
>>
> 
> Hopefully, memFeature.GetGeometryRef() should do it !
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at .osgeo
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Wed Jul 18 06:50:48 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 18 Jul 2012 19:20:48 +0530
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <1342616464446-4989072.post@n6.nabble.com>
References: <1342535828384-4988831.post@n6.nabble.com>
	<CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
	<1342598200302-4988966.post@n6.nabble.com>
	<1342598478.50066d4e5450e@imp.free.fr>
	<1342616464446-4989072.post@n6.nabble.com>
Message-ID: <CAMKgpOZwuEQU8OzeGen4qdwSVFzGRvXAGx3GhNXJKbq84oTFnw@mail.gmail.com>

Benjamin,

The mssql driver already does the conversion from wkb in the database to
the native ogr geometry format. You don't have to create a temporary wkb
geometry and then the ogr geometry.

You can simply do this:
[code]
Geometry memGeom = memFeature.GetGeometryRef()
[/code]

On Wed, Jul 18, 2012 at 6:31 PM, Benjamin <benjamin.lux at maxsea.fr> wrote:

> Sorry, I was not clear.
>
> I resume from the beginning.
>
> I work with a warper C# of Ogr.
> I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY) in a
> SQL server Database (in SQL Azure exactly).
>
> *My aim is to work with a copy* (in a
> http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
> statement result executed on a MSSQL DataSource.
>
> Actually I can work with usuals methods with this MSSQL DataSource.
> Note that I have not geometry_column table in my SQL Serveur DataBase, I
> use
> http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .
>
> [code]
> string driverOptions =
> "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
> serverDataSource = Ogr.Open("MSSQL:" + connectionString + driverOptions),
> 0);
>
> serveurDataSource.GetLayerCount(); // It works fine.
> [/code]
>
> So I tried a call to
>
> http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
> SQLExecute() .
> [code]
> string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
> Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
> [/code]
>
> But unfortunately, I have not geometry field in the result.
> [code]
> serveurLayer.GetGeometryColumn();  //*return ""*
> serveurLayer.GetGeomType();          //*return wkbUnknown*
> [/code]
>
> But I have my 3 fields in serveurLayer !
> [code]
> serverLayer.GetLayerDefn().GetFieldCount();                //return 3
> serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
> serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return "CHART_ID"
> serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
> "WKB_GEOMETRY"*
> [/code]
>
> So I want to copy this layer in a Memory Layer to minimise acces to my SQL
> Server and work faster.
> [code]
> Driver memDriver = Ogr.GetDriverByName("Memory");
> DataSource memDataSource =
> memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
> Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName, null);
> [/code]
>
>
> Now,* I have to fetch my geometries*, so have thought to a trick like this
> :
> [code]
> byte[] memWkb =
>
> System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
> Geometry memGeom = Geometry.CreateFromWkb(memWkb);
> [/code]
> Because I can't use memFeature.GetGeometryRef()
> [code]
> memFeature.GetLayerCount();                                // return 39
> Feature memFeature = memLayer.GetNextFeature();  // don't return null
> memFeature.GetGeometryRef();                             // *return null*
> [/code]
>
> But I don't know if I have to use UTF8, ASCII, Unicode or other.
> If you know what encoding is use, or better an other trick to have a
> geometry in my memLayer or serverLayer I heard you with interest !
>
>
> Sorry for my spelling, English isn't my native tongue language.
>
> Benjamin
>
>
> Ps : link to the thread:
>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>
>
>
> Even Rouault wrote
> >
> > Selon Benjamin &lt;benjamin.lux@&gt;:
> >
> >> "You can access the geometry like with any other ogr feature."
> >>
> >
> > Hopefully, memFeature.GetGeometryRef() should do it !
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at .osgeo
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120718/83e60ab1/attachment-0001.html>

From chaitanya.ch at gmail.com  Wed Jul 18 07:53:28 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 18 Jul 2012 20:23:28 +0530
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <4951000.5582.1342621932111.JavaMail.nabble@alf.nabble.com>
References: <4951000.5582.1342621932111.JavaMail.nabble@alf.nabble.com>
Message-ID: <CAMKgpOaz5Z_H2hJccg10joBmxoitOtsoEydhQfvpDVZ7LH9k8w@mail.gmail.com>

Hi Benjamin,

Can you provide some more details?
How did you try to retrieve the geometry?

On Wed, Jul 18, 2012 at 8:02 PM, <benjamin.lux at maxsea.fr> wrote:

> <quote author='Benjamin'>
> memFeature.GetGeometryRef();          // return null
> </quote>
>
> Sorry, but no.
> After a call to SQLExecute(), Ogr framwork doesn't recognize any geometry
> in my feature.
> If you have a clue why that ?
>
> <quote author='chaitanya_ch'>
> Benjamin,
>
> The mssql driver already does the conversion from wkb in the database to
> the native ogr geometry format. You don't have to create a temporary wkb
> geometry and then the ogr geometry.
>
> You can simply do this:
> [code]
> Geometry memGeom = memFeature.GetGeometryRef()
> [/code]
>
> On Wed, Jul 18, 2012 at 6:31 PM, Benjamin <benjamin.lux at maxsea.fr> wrote:
>
> > Sorry, I was not clear.
> >
> > I resume from the beginning.
> >
> > I work with a warper C# of Ogr.
> > I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY) in
> a
> > SQL server Database (in SQL Azure exactly).
> >
> > *My aim is to work with a copy* (in a
> > http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
> > statement result executed on a MSSQL DataSource.
> >
> > Actually I can work with usuals methods with this MSSQL DataSource.
> > Note that I have not geometry_column table in my SQL Serveur DataBase, I
> > use
> > http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .
> >
> > [code]
> > string driverOptions =
> > "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
> > serverDataSource = Ogr.Open("MSSQL:" + connectionString + driverOptions),
> > 0);
> >
> > serveurDataSource.GetLayerCount(); // It works fine.
> > [/code]
> >
> > So I tried a call to
> >
> >
> http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
> > SQLExecute() .
> > [code]
> > string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
> > Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
> > [/code]
> >
> > But unfortunately, I have not geometry field in the result.
> > [code]
> > serveurLayer.GetGeometryColumn();  //*return ""*
> > serveurLayer.GetGeomType();          //*return wkbUnknown*
> > [/code]
> >
> > But I have my 3 fields in serveurLayer !
> > [code]
> > serverLayer.GetLayerDefn().GetFieldCount();                //return 3
> > serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
> > serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return "CHART_ID"
> > serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
> > "WKB_GEOMETRY"*
> > [/code]
> >
> > So I want to copy this layer in a Memory Layer to minimise acces to my
> SQL
> > Server and work faster.
> > [code]
> > Driver memDriver = Ogr.GetDriverByName("Memory");
> > DataSource memDataSource =
> > memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
> > Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName, null);
> > [/code]
> >
> >
> > Now,* I have to fetch my geometries*, so have thought to a trick like
> this
> > :
> > [code]
> > byte[] memWkb =
> >
> >
> System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
> > Geometry memGeom = Geometry.CreateFromWkb(memWkb);
> > [/code]
> > Because I can't use memFeature.GetGeometryRef()
> > [code]
> > memFeature.GetLayerCount();                                // return 39
> > Feature memFeature = memLayer.GetNextFeature();  // don't return null
> > memFeature.GetGeometryRef();                             // *return null*
> > [/code]
> >
> > But I don't know if I have to use UTF8, ASCII, Unicode or other.
> > If you know what encoding is use, or better an other trick to have a
> > geometry in my memLayer or serverLayer I heard you with interest !
> >
> >
> > Sorry for my spelling, English isn't my native tongue language.
> >
> > Benjamin
> >
> >
> > Ps : link to the thread:
> >
> >
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
> >
> >
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
> >
> >
> >
> > Even Rouault wrote
> > >
> > > Selon Benjamin &lt;benjamin.lux@&gt;:
> > >
> > >> "You can access the geometry like with any other ogr feature."
> > >>
> > >
> > > Hopefully, memFeature.GetGeometryRef() should do it !
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at .osgeo
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> > --
> > View this message in context:
> >
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> </quote>
> Quoted from:
>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989092.html
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120718/24c017d9/attachment.html>

From Benjamin.lux at maxsea.fr  Wed Jul 18 08:22:03 2012
From: Benjamin.lux at maxsea.fr (Benjamin LUX)
Date: Wed, 18 Jul 2012 17:22:03 +0200
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
References: <4951000.5582.1342621932111.JavaMail.nabble@alf.nabble.com>
	<CAMKgpOaz5Z_H2hJccg10joBmxoitOtsoEydhQfvpDVZ7LH9k8w@mail.gmail.com>
Message-ID: <2D6A931F6E6D04498055060E3B5F00A8070DE3B3@maxseamail.informatique-mer.fr>

Hi again Chaitanya,

 

If you look my previous mail you can see the code.

But in a compact way this is a copy/paste of my running code.

Note that RoleEnvironment.GetConfigurationSettingValue(?****?) just provide me parametrables strings (like argv[n]).

[code]

Ogr.RegisterAll();

string option = String.Format("Tables=dbo.{0}(WKB_GEOMETRY);GeometryFormat=wkb;",

                RoleEnvironment.GetConfigurationSettingValue("CatalogueRclAllName")

                );

RclDataSource = Ogr.Open(String.Format("MSSQL:{0}{1}", RoleEnvironment.GetConfigurationSettingValue("DataBaseConnectionString"), option), 0);

string request = String.Format("SELECT *  FROM {0} WHERE CHART_ID = '{1}'",

RoleEnvironment.GetConfigurationSettingValue("CatalogueRclAllName"),

"Z15F43AJ");

 

Layer serverLayer = RclDataSource.ExecuteSQL(request, null, "");

 

Driver memDriver = Ogr.GetDriverByName("Memory");

DataSource memDataSource = memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);

Layer memLayer = memDataSource.CopyLayer(serverLayer, serverLayer.GetName(), null);

Feature memFeature = memLayer.GetNextFeature();

string[] namesColumnsArray = new string[5];

for (int i = 0; i < memFeature.GetFieldCount(); i++)

namesColumnsArray[i] = memFeature.GetFieldDefnRef(i).GetName();

Geometry memGeometry = memFeature.GetGeometryRef(); 

[/code]

 

Results :

                namesColumnsArray = { D , CHART_ID, WKB_GEOMETRY }

                memGeometry = null

 

I don?t see what I can add to this :/

If you want more details said me.

 

Link to the thread : http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html <http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html> 

 

Best regards,

Benjamin

 

De : Chaitanya kumar CH [mailto:chaitanya.ch at gmail.com] 
Envoy? : mercredi 18 juillet 2012 16:53
? : Benjamin LUX
Cc : gdal dev
Objet : Re: Ogr: ExecuteSQL with MSSQL and geometry column

 

Hi Benjamin,

Can you provide some more details?
How did you try to retrieve the geometry?

On Wed, Jul 18, 2012 at 8:02 PM, <benjamin.lux at maxsea.fr> wrote:

<quote author='Benjamin'>
memFeature.GetGeometryRef();          // return null
</quote>

Sorry, but no.
After a call to SQLExecute(), Ogr framwork doesn't recognize any geometry in my feature.
If you have a clue why that ?

<quote author='chaitanya_ch'>

Benjamin,

The mssql driver already does the conversion from wkb in the database to
the native ogr geometry format. You don't have to create a temporary wkb
geometry and then the ogr geometry.

You can simply do this:
[code]
Geometry memGeom = memFeature.GetGeometryRef()
[/code]

On Wed, Jul 18, 2012 at 6:31 PM, Benjamin <benjamin.lux at maxsea.fr> wrote:

> Sorry, I was not clear.
>
> I resume from the beginning.
>
> I work with a warper C# of Ogr.
> I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY) in a
> SQL server Database (in SQL Azure exactly).
>
> *My aim is to work with a copy* (in a
> http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
> statement result executed on a MSSQL DataSource.
>
> Actually I can work with usuals methods with this MSSQL DataSource.
> Note that I have not geometry_column table in my SQL Serveur DataBase, I
> use
> http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .
>
> [code]
> string driverOptions =
> "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
> serverDataSource = Ogr.Open("MSSQL:" + connectionString + driverOptions),
> 0);
>
> serveurDataSource.GetLayerCount(); // It works fine.
> [/code]
>
> So I tried a call to
>
> http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
> SQLExecute() .
> [code]
> string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
> Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
> [/code]
>
> But unfortunately, I have not geometry field in the result.
> [code]
> serveurLayer.GetGeometryColumn();  //*return ""*
> serveurLayer.GetGeomType();          //*return wkbUnknown*
> [/code]
>
> But I have my 3 fields in serveurLayer !
> [code]
> serverLayer.GetLayerDefn().GetFieldCount();                //return 3
> serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
> serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return "CHART_ID"
> serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
> "WKB_GEOMETRY"*
> [/code]
>
> So I want to copy this layer in a Memory Layer to minimise acces to my SQL
> Server and work faster.
> [code]
> Driver memDriver = Ogr.GetDriverByName("Memory");
> DataSource memDataSource =
> memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
> Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName, null);
> [/code]
>
>
> Now,* I have to fetch my geometries*, so have thought to a trick like this
> :
> [code]
> byte[] memWkb =
>
> System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
> Geometry memGeom = Geometry.CreateFromWkb(memWkb);
> [/code]
> Because I can't use memFeature.GetGeometryRef()
> [code]
> memFeature.GetLayerCount();                                // return 39
> Feature memFeature = memLayer.GetNextFeature();  // don't return null
> memFeature.GetGeometryRef();                             // *return null*
> [/code]
>
> But I don't know if I have to use UTF8, ASCII, Unicode or other.
> If you know what encoding is use, or better an other trick to have a
> geometry in my memLayer or serverLayer I heard you with interest !
>
>
> Sorry for my spelling, English isn't my native tongue language.
>
> Benjamin
>
>
> Ps : link to the thread:
>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>
>
>
> Even Rouault wrote
> >
> > Selon Benjamin &lt;benjamin.lux@&gt;:
> >
> >> "You can access the geometry like with any other ogr feature."
> >>
> >
> > Hopefully, memFeature.GetGeometryRef() should do it !
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at .osgeo
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



--
Best regards,
Chaitanya kumar CH.

+91-9494447584 <tel:%2B91-9494447584> 
17.2416N 80.1426E

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

</quote>
Quoted from:
http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989092.html




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120718/47c1852c/attachment-0001.html>

From chaitanya.ch at gmail.com  Wed Jul 18 09:50:39 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 18 Jul 2012 22:20:39 +0530
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <2D6A931F6E6D04498055060E3B5F00A8070DE3B3@maxseamail.informatique-mer.fr>
References: <4951000.5582.1342621932111.JavaMail.nabble@alf.nabble.com>
	<CAMKgpOaz5Z_H2hJccg10joBmxoitOtsoEydhQfvpDVZ7LH9k8w@mail.gmail.com>
	<2D6A931F6E6D04498055060E3B5F00A8070DE3B3@maxseamail.informatique-mer.fr>
Message-ID: <CAMKgpOZkgrK+1hQF+FvYx=-YCAKPxP_=xDNOfkbHr3Q_+TeByQ@mail.gmail.com>

Benjamin,

First thing: You don't need to use a memory datasource here. OGR doesn't
make round trips to the database server every time you run
GetNextFeature(). Do that first. I'm sure it will make it less complicated.

I don't understand why you are getting the null. Hopefully we can figure
that out after you simplify your code by removing the memory driver stuff.

On Wed, Jul 18, 2012 at 8:52 PM, Benjamin LUX <Benjamin.lux at maxsea.fr>wrote:

> Hi again Chaitanya,****
>
> ** **
>
> If you look my previous mail you can see the code.****
>
> But in a compact way this is a copy/paste of my running code.****
>
> Note that RoleEnvironment.GetConfigurationSettingValue(?****?) just
> provide me parametrables strings (like argv[n]).****
>
> [code]****
>
> Ogr.RegisterAll();****
>
> string option = String.Format(
> "Tables=dbo.{0}(WKB_GEOMETRY);GeometryFormat=wkb;",****
>
>                 RoleEnvironment.GetConfigurationSettingValue(
> "CatalogueRclAllName")****
>
>                 );****
>
> RclDataSource = Ogr.Open(String.Format("MSSQL:{0}{1}", RoleEnvironment
> .GetConfigurationSettingValue("DataBaseConnectionString"), option), 0);***
> *
>
> string request = String.Format("SELECT *  FROM {0} WHERE CHART_ID = '{1}'"
> ,****
>
> RoleEnvironment.GetConfigurationSettingValue("CatalogueRclAllName"),****
>
> "Z15F43AJ");****
>
> ** **
>
> Layer serverLayer = RclDataSource.ExecuteSQL(request, null, "");****
>
> ** **
>
> Driver memDriver = Ogr.GetDriverByName("Memory");****
>
> DataSource memDataSource = memDriver.CreateDataSource(GetWorkPath(
> "nomimprobale"), null);****
>
> Layer memLayer = memDataSource.CopyLayer(serverLayer,
> serverLayer.GetName(), null);****
>
> Feature memFeature = memLayer.GetNextFeature();****
>
> string[] namesColumnsArray = new string[5];****
>
> for (int i = 0; i < memFeature.GetFieldCount(); i++)****
>
> namesColumnsArray[i] = memFeature.GetFieldDefnRef(i).GetName();****
>
> Geometry memGeometry = memFeature.GetGeometryRef(); ****
>
> [/code]****
>
> ** **
>
> Results :****
>
>                 namesColumnsArray = { D , CHART_ID, WKB_GEOMETRY }****
>
>                 memGeometry = null****
>
> ** **
>
> I don?t see what I can add to this :/****
>
> If you want more details said me.****
>
> ** **
>
> Link to the thread :
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
> ****
>
> ** **
>
> Best regards,****
>
> Benjamin****
>
> ** **
>
> *De :* Chaitanya kumar CH [mailto:chaitanya.ch at gmail.com]
> *Envoy? :* mercredi 18 juillet 2012 16:53
> *? :* Benjamin LUX
> *Cc :* gdal dev
> *Objet :* Re: Ogr: ExecuteSQL with MSSQL and geometry column****
>
> ** **
>
> Hi Benjamin,
>
> Can you provide some more details?
> How did you try to retrieve the geometry?****
>
> On Wed, Jul 18, 2012 at 8:02 PM, <benjamin.lux at maxsea.fr> wrote:****
>
> <quote author='Benjamin'>
> memFeature.GetGeometryRef();          // return null
> </quote>
>
> Sorry, but no.
> After a call to SQLExecute(), Ogr framwork doesn't recognize any geometry
> in my feature.
> If you have a clue why that ?
>
> <quote author='chaitanya_ch'>****
>
> Benjamin,
>
> The mssql driver already does the conversion from wkb in the database to
> the native ogr geometry format. You don't have to create a temporary wkb
> geometry and then the ogr geometry.
>
> You can simply do this:
> [code]
> Geometry memGeom = memFeature.GetGeometryRef()
> [/code]
>
> On Wed, Jul 18, 2012 at 6:31 PM, Benjamin <benjamin.lux at maxsea.fr> wrote:
>
> > Sorry, I was not clear.
> >
> > I resume from the beginning.
> >
> > I work with a warper C# of Ogr.
> > I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY) in
> a
> > SQL server Database (in SQL Azure exactly).
> >
> > *My aim is to work with a copy* (in a
> > http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
> > statement result executed on a MSSQL DataSource.
> >
> > Actually I can work with usuals methods with this MSSQL DataSource.
> > Note that I have not geometry_column table in my SQL Serveur DataBase, I
> > use
> > http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .
> >
> > [code]
> > string driverOptions =
> > "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
> > serverDataSource = Ogr.Open("MSSQL:" + connectionString + driverOptions),
> > 0);
> >
> > serveurDataSource.GetLayerCount(); // It works fine.
> > [/code]
> >
> > So I tried a call to
> >
> >
> http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
> > SQLExecute() .
> > [code]
> > string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
> > Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
> > [/code]
> >
> > But unfortunately, I have not geometry field in the result.
> > [code]
> > serveurLayer.GetGeometryColumn();  //*return ""*
> > serveurLayer.GetGeomType();          //*return wkbUnknown*
> > [/code]
> >
> > But I have my 3 fields in serveurLayer !
> > [code]
> > serverLayer.GetLayerDefn().GetFieldCount();                //return 3
> > serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
> > serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return "CHART_ID"
> > serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
> > "WKB_GEOMETRY"*
> > [/code]
> >
> > So I want to copy this layer in a Memory Layer to minimise acces to my
> SQL
> > Server and work faster.
> > [code]
> > Driver memDriver = Ogr.GetDriverByName("Memory");
> > DataSource memDataSource =
> > memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
> > Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName, null);
> > [/code]
> >
> >
> > Now,* I have to fetch my geometries*, so have thought to a trick like
> this
> > :
> > [code]
> > byte[] memWkb =
> >
> >
> System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
> > Geometry memGeom = Geometry.CreateFromWkb(memWkb);
> > [/code]
> > Because I can't use memFeature.GetGeometryRef()
> > [code]
> > memFeature.GetLayerCount();                                // return 39
> > Feature memFeature = memLayer.GetNextFeature();  // don't return null
> > memFeature.GetGeometryRef();                             // *return null*
> > [/code]
> >
> > But I don't know if I have to use UTF8, ASCII, Unicode or other.
> > If you know what encoding is use, or better an other trick to have a
> > geometry in my memLayer or serverLayer I heard you with interest !
> >
> >
> > Sorry for my spelling, English isn't my native tongue language.
> >
> > Benjamin
> >
> >
> > Ps : link to the thread:
> >
> >
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
> >
> >
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
> >
> >
> >
> > Even Rouault wrote
> > >
> > > Selon Benjamin &lt;benjamin.lux@&gt;:
> > >
> > >> "You can access the geometry like with any other ogr feature."
> > >>
> > >
> > > Hopefully, memFeature.GetGeometryRef() should do it !
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at .osgeo
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> > --
> > View this message in context:
> >
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
> </quote>
> Quoted from:
>
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989092.html
> ****
>
>
>
>
>
-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120718/0fbe2a00/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Jul 18 11:09:21 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 18 Jul 2012 20:09:21 +0200
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <loom.20120718T103317-371@post.gmane.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
Message-ID: <1342634961.5006fbd191cf6@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
> >
> > Hi,
> >
> > Following the recent brainstorming with Jukka, I've pushed into trunk a
> driver
> > to read OpenStreetMap .osm / .pbf files .
>
> Driver seems to do what it promises. It is super fast in converting POI data
> because it is possible to skip the slower layers (lines, polygons and
> especially
> the tricky multipolygons). Speed with my slow Windows laptop is at least
> 300000
> converted POIs per minute. However, select with SQL feels sub-optimal.

Yes, when you use ogr2ogr with explicit layer names, there are optimizations.
For example, when you only specify the layer 'points', the OSM driver will not
even try to index the nodes into the temporary database because it is not
needed. However, as you noticed, there is not yet any optimization when a SQL
request is specified.

> It is
> much faster to convert all the points than select only a part of those. The
> error message suggest that ogr2ogr is inspecting the input file more closely
> than necessary for this use case:
>
> ogr2ogr -f "ESRI Shapefile" poitest.shp finland.osm.pbf
> -sql "select name, amenity from points where amenity='toilets'"
>
> ERROR 1: Too many features have accumulated in lines layer. Use
> OGR_INTERLEAVED_
> READING=YES mode

You can easily transform the above SQL into something equivalent that will
benefit from the optimization :

ogr2ogr poitest.shp finland.osm.pbf points -select name,amenity -where
"amenity='toilets'""

>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jmckenna at gatewaygeomatics.com  Wed Jul 18 11:34:02 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 18 Jul 2012 15:34:02 -0300
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <loom.20120718T103317-371@post.gmane.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
Message-ID: <5007019A.3010202@gatewaygeomatics.com>


> Even Rouault <even.rouault <at> mines-paris.org> writes:

>> Following the recent brainstorming with Jukka, I've pushed into trunk a driver 
>> to read OpenStreetMap .osm / .pbf files .
> 

Fascinating.  Actually I think once someone imports the points, lines,
polys into a DB, then (cool!) someone could then run the SQL script that
Mike Smith and I made recently
(https://github.com/mapserver/basemaps/blob/master/contrib/osm2pgsql-to-imposm-schema.sql)
that created generalized and specific tables, and then, could even (if
that someone wanted to publish through MapServer) run those tables
through the MapServer/basemaps utility to generate the magical mapfile
(https://github.com/mapserver/basemaps) !!!!

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From jukka.rahkonen at mmmtike.fi  Wed Jul 18 15:57:03 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 18 Jul 2012 22:57:03 +0000 (UTC)
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
References: <201207101923.32027.even.rouault@mines-paris.org>
Message-ID: <loom.20120719T004447-659@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Hi,
> 
> Following the recent brainstorming with Jukka, I've pushed into trunk a driver 
> to read OpenStreetMap .osm / .pbf files .
.............
> 
> Testing with larger areas, like whole France or Europe, shows sluggish 
> performance when ways are built from nodes, but that's perhaps expected. I 
> didn't compare with other tools to know if the indexing or request strategy is 
> particularly bad.

Windows 7, 64-bit, SATA disk and 2x3 GHz is converting Finland.osm.pbf in about
8 minutes for me. But execution time does not increase at all linearly.
Germany.osm.pbf is about 10 times larger in filesize but ogr2ogr had to work
about 8 hours with it, thus roughly 70 times longer. Obviously I would save 6
hours by splitting the German pbf file into 10 smaller ones, running ogr2ogr ten
times and combining results with ogrtileindex for use with Mapserver.

-Jukka Rahkonen-


From taibc_coltech at yahoo.com  Wed Jul 18 19:08:00 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Wed, 18 Jul 2012 19:08:00 -0700 (PDT)
Subject: [gdal-dev] How to assign Text elements for related shapes (polygon)
 when reading .DGN files ?
Message-ID: <1342663680385-4989226.post@n6.nabble.com>

Hi friends,

When reading .DGN files, I can specify features (include attributes: Type,
Level, Text, ColorIndex,...), and geometry (polygon, point) of these
features.

But, do you know how can we assign (or specify) Text, Level elements for a
particular polygon ?

For example: The map include many polygons. Polygon 1 should have
attributes: Type = 1, Level = 10, City = "London", Area = 14332.5, etc...

Thanks and regards,

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-assign-Text-elements-for-related-shapes-polygon-when-reading-DGN-files-tp4989226.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dlopezaspe at gmail.com  Wed Jul 18 20:46:50 2012
From: dlopezaspe at gmail.com (sigologo)
Date: Wed, 18 Jul 2012 20:46:50 -0700 (PDT)
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean Color?
Message-ID: <1342669610101-4989237.post@n6.nabble.com>

Hello Everyone


I'm trying import A20030012003008.L3m_8D_NSST_4, with gdal with this script:

for file in A*L3m_8D_NSST_4 ; do
  echo "map: $file"

  gdal_translate -a_srs "+init=epsg:4326" -a_nodata 65535 \
    -a_ullr -180 90 180 -90 -co "COMPRESS=PACKBITS" \
    HDF4_SDS:UNKNOWN:"$file":0  ${file}_out.tif

done

all good, but the data not be in degree C............. I find for it another
script but no found in gdal...

for map in `g.mlist rast pat=A*L3m_8D_NSST_4` ; do
  echo "$map"
  g.region rast=$map
  #r.info -r $map
  Slope=0.000717185
  Intercept=-2
  r.mapcalc "${map}.degC = ($Slope * $map) + $Intercept"
  r.support "${map}.degC" units="deg-C"
  #r.colors "${map}.degC" color=bcyr  # fairly nice
done


I hope someone can help me with this!!!!!!!!!!!!
Best Regards.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Convert-to-temperature-in-degrees-C-in-MODIS-Ocean-Color-tp4989237.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Thu Jul 19 00:59:01 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 19 Jul 2012 07:59:01 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?New_OGR_driver_to_read_OpenStreetMap_=2Eosm_?=
	=?utf-8?q?/_=2Epbf=09files?=
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
	<1342634961.5006fbd191cf6@imp.free.fr>
Message-ID: <loom.20120719T095527-814@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Selon Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi>:
.......
> 
> > It is
> > much faster to convert all the points than select only a part of those. The
> > error message suggest that ogr2ogr is inspecting the input file more closely
> > than necessary for this use case:
> >
> > ogr2ogr -f "ESRI Shapefile" poitest.shp finland.osm.pbf
> > -sql "select name, amenity from points where amenity='toilets'"
> >
> > ERROR 1: Too many features have accumulated in lines layer. Use
> > OGR_INTERLEAVED_
> > READING=YES mode
> 
> You can easily transform the above SQL into something equivalent that will
> benefit from the optimization :
> 
> ogr2ogr poitest.shp finland.osm.pbf points -select name,amenity -where
> "amenity='toilets'""

Amenity is included in my osmconf.ini and it can be used inside -sql.
However, your example gives me this

ERROR 1: 'amenity' not recognised as an available field.
FAILURE: SetAttributeFilter(amenity='toilets') failed.

-Jukka-


From even.rouault at mines-paris.org  Thu Jul 19 01:08:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 19 Jul 2012 10:08:14 +0200
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm /
	.pbf	files
In-Reply-To: <loom.20120719T095527-814@post.gmane.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
	<1342634961.5006fbd191cf6@imp.free.fr>
	<loom.20120719T095527-814@post.gmane.org>
Message-ID: <1342685294.5007c06e725d1@imp.free.fr>


> Amenity is included in my osmconf.ini and it can be used inside -sql.
> However, your example gives me this
>
> ERROR 1: 'amenity' not recognised as an available field.
> FAILURE: SetAttributeFilter(amenity='toilets') failed.

Hum, I think I know what's wrong. I see that, even if a subset of layers is
specified, the attribute filter is applied on all layers, so I suppose that one
of the lines, polygons or multipolygons layers has no amenity field, right ? You
could workaround the error by editing osmconf.ini to add that field in all layer
definitions. But this should be fixed : would you mind opening a ticket about
that ? Thanks

>
> -Jukka-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From diregola at gmail.com  Thu Jul 19 01:23:06 2012
From: diregola at gmail.com (Margherita Di Leo)
Date: Thu, 19 Jul 2012 10:23:06 +0200
Subject: [gdal-dev] bigtiff support maybe not working
In-Reply-To: <1342513230.5005204e0da21@imp.free.fr>
References: <CABa=8Qr2RmyE7vVf-8i23Ni9u2ymHFKk354b4amESz03PWrMOw@mail.gmail.com>
	<1342448332.500422cc75b15@imp.free.fr>
	<CABa=8Qqc3RLHLVAPZYRx886ivoH_1_AH7emB5hruE=1gkN=pQg@mail.gmail.com>
	<CABa=8QrFS-T_8AvAhzVtdxXCoF87p4_9eXcb1KSjLG7C1Cjt2A@mail.gmail.com>
	<1342513230.5005204e0da21@imp.free.fr>
Message-ID: <CABa=8QokQMrvx-HPvmV6Kir64tLV8s-9qCJKqDSHr5JLEqmaZA@mail.gmail.com>

Even,

On Tue, Jul 17, 2012 at 10:20 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

>
>
> You could just remove the tweaking done with GDAL_CACHEMAX and -wm and
> leave
> them to their default values. In my experience, a so big value for
> GDAL_CACHEMAX
> is of no use (no need to use more than 500 MB), and when merging a lot of
> small
> rasters into a big one, a high value for -wm can severely decrease
> performance
> (see the link I posted yesterday). If all your tiles are of the same
> resolution,
> you could also remove -r bilinear.
>
> Or if your tiles are in the same projection, just use gdalbuildvrt to
> create a
> virtual mosaic. That should take only a few seconds to run.
>

Thanks, actually gdalbuildvrt solved my problems.

Best regards,


-- 
Dr. Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120719/2d842d19/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 19 01:25:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 19 Jul 2012 10:25:30 +0200
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <loom.20120719T004447-659@post.gmane.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120719T004447-659@post.gmane.org>
Message-ID: <1342686330.5007c47a444e9@imp.free.fr>

>
> Windows 7, 64-bit, SATA disk and 2x3 GHz is converting Finland.osm.pbf in
> about
> 8 minutes for me. But execution time does not increase at all linearly.
> Germany.osm.pbf is about 10 times larger in filesize but ogr2ogr had to work
> about 8 hours with it, thus roughly 70 times longer. Obviously I would save 6
> hours by splitting the German pbf file into 10 smaller ones, running ogr2ogr
> ten
> times and combining results with ogrtileindex for use with Mapserver.

I suppose there is a big discontinuity at some point. While the temporary
database can fit into RAM, and then in the I/O cache of the operating system,
the performance must be reasonably good. But when it grows above, you'll get
disk access for almost every way and this will be sluggish.

Do you have comparisons of the performance with osm2pgsql on the same PC and
with the same data ? I'd be curious if that slow down effect is found with every
tool, or if it is something specific to the way sqlite is used, or if other
tools do more clever things when indexing or retrieving nodes.

I suppose splitting could help, but I don't see an obvious reason why an
intelligent splitting would be faster. I mention "intelligent" because you can
do a rough splitting based on bounding box for example, but this will lead to
ways that have unresolved nodes.

Actually, you could try that by adding a -spat argument to your ogr2ogr command
line. Nodes that fall outside of the spatial filter are not added to the
temporary database. But of course ways that cross the boundary of the bounding
box will be truncated and some relations too. And no guarantee it will speed up
the global process, because some time will still be lost trying to resolve the
nodes of ways that are outside of the spatial filter.

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Jukka.Rahkonen at mmmtike.fi  Thu Jul 19 01:51:46 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Thu, 19 Jul 2012 08:51:46 +0000
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm /
	.pbf	files
In-Reply-To: <1342685294.5007c06e725d1@imp.free.fr>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
	<1342634961.5006fbd191cf6@imp.free.fr>
	<loom.20120719T095527-814@post.gmane.org>,
	<1342685294.5007c06e725d1@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A6345C4A8@suutari.haapa.mmm.fi>

Even Rouault wrote:

>> Amenity is included in my osmconf.ini and it can be used inside -sql.
>> However, your example gives me this
>>
>> ERROR 1: 'amenity' not recognised as an available field.
>> FAILURE: SetAttributeFilter(amenity='toilets') failed.

> Hum, I think I know what's wrong. I see that, even if a subset of layers is
> specified, the attribute filter is applied on all layers, so I suppose that one
> of the lines, polygons or multipolygons layers has no amenity field, right ? You
> could workaround the error by editing osmconf.ini to add that field in all layer
> definitions. But this should be fixed : would you mind opening a ticket about
> that ? Thanks

Adding "amenity" for all the layers really made filter to work and it is fast.
Ticket #4751 created.

-Jukka-

From Jukka.Rahkonen at mmmtike.fi  Thu Jul 19 02:25:42 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Thu, 19 Jul 2012 09:25:42 +0000
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
 files
In-Reply-To: <1342686330.5007c47a444e9@imp.free.fr>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120719T004447-659@post.gmane.org>,
	<1342686330.5007c47a444e9@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A6345C4D8@suutari.haapa.mmm.fi>


Even Rouault wrote:

>> Windows 7, 64-bit, SATA disk and 2x3 GHz is converting Finland.osm.pbf in
>> about
>> 8 minutes for me. But execution time does not increase at all linearly.
>> Germany.osm.pbf is about 10 times larger in filesize but ogr2ogr had to work
>> about 8 hours with it, thus roughly 70 times longer. Obviously I would save 6
>> hours by splitting the German pbf file into 10 smaller ones, running ogr2ogr
>> ten
>> times and combining results with ogrtileindex for use with Mapserver.

> I suppose there is a big discontinuity at some point. While the temporary
> database can fit into RAM, and then in the I/O cache of the operating system,
> the performance must be reasonably good. But when it grows above, you'll get
> disk access for almost every way and this will be sluggish.

Test with Germany.osm.pbf was more sluggish than I thought. Process was not 
complete and and finally it took 15 hours to run. Solving the relations must
have been heavy for ogr2ogr.

> Do you have comparisons of the performance with osm2pgsql on the same PC and
> with the same data ? I'd be curious if that slow down effect is found with every
> tool, or if it is something specific to the way sqlite is used, or if other
> tools do more clever things when indexing or retrieving nodes.

I fear that my comparisons would not give very much information.  Osm2pgsql is not at
all optimised for this kind of task. I would need to run it in a slim mode and 
then osm2pgsql is doing whole lot of things for preparing database to 
accept updates with the diff files. I suppose that osm2pgsql could be much 
faster if it had some kind of "slim, with no diff-support" mode.  A great part
of the job is also performed by PostgreSQL and db parameters seem to have
a big influence.
>From my own experience I can say that osm2pgsql gets very slow and unrieliable
on weak computers. Linux box with 700 MB of memory cannot import finland.osm
extract at all, and with my Window laptop with 2 GB it takes two or three hours.
Ogr2ogr on the same machine did the conversion in 40 minutes.
Let's hope that some OSM developer gets interested in this task.

> I suppose splitting could help, but I don't see an obvious reason why an
> intelligent splitting would be faster. I mention "intelligent" because you can
> do a rough splitting based on bounding box for example, but this will lead to
> ways that have unresolved nodes.

I forgot how much resolving there is in OSM format. Compared to that it is 
ridiculously simple to read already resolved OSM features from a WFS service
http://188.64.1.61/cgi-bin/tinyows?service=WFS&version=1.0.0&request=GetFeature&typeName=lv:osm_polygon&maxfeatures=20

-Jukka-

From etourigny.dev at gmail.com  Thu Jul 19 06:49:07 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 19 Jul 2012 10:49:07 -0300
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
	Color?
In-Reply-To: <1342669610101-4989237.post@n6.nabble.com>
References: <1342669610101-4989237.post@n6.nabble.com>
Message-ID: <CA+TxYvO2BCwTDbxXWxHK9ru3eNmz3p2fQVw-ht=nKiewvuDSOA@mail.gmail.com>

You can try gdal_calc.py, although that requires python support

svn.osgeo.org/gdal/trunk/gdal/swig/python/scripts/gdal_calc.py

On Thu, Jul 19, 2012 at 12:46 AM, sigologo <dlopezaspe at gmail.com> wrote:
> Hello Everyone
>
>
> I'm trying import A20030012003008.L3m_8D_NSST_4, with gdal with this script:
>
> for file in A*L3m_8D_NSST_4 ; do
>   echo "map: $file"
>
>   gdal_translate -a_srs "+init=epsg:4326" -a_nodata 65535 \
>     -a_ullr -180 90 180 -90 -co "COMPRESS=PACKBITS" \
>     HDF4_SDS:UNKNOWN:"$file":0  ${file}_out.tif
>
> done
>
> all good, but the data not be in degree C............. I find for it another
> script but no found in gdal...
>
> for map in `g.mlist rast pat=A*L3m_8D_NSST_4` ; do
>   echo "$map"
>   g.region rast=$map
>   #r.info -r $map
>   Slope=0.000717185
>   Intercept=-2
>   r.mapcalc "${map}.degC = ($Slope * $map) + $Intercept"
>   r.support "${map}.degC" units="deg-C"
>   #r.colors "${map}.degC" color=bcyr  # fairly nice
> done
>
>
> I hope someone can help me with this!!!!!!!!!!!!
> Best Regards.
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Convert-to-temperature-in-degrees-C-in-MODIS-Ocean-Color-tp4989237.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dlopezaspe at gmail.com  Thu Jul 19 07:13:20 2012
From: dlopezaspe at gmail.com (sigologo)
Date: Thu, 19 Jul 2012 07:13:20 -0700 (PDT)
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
	Color?
In-Reply-To: <CA+TxYvO2BCwTDbxXWxHK9ru3eNmz3p2fQVw-ht=nKiewvuDSOA@mail.gmail.com>
References: <1342669610101-4989237.post@n6.nabble.com>
	<CA+TxYvO2BCwTDbxXWxHK9ru3eNmz3p2fQVw-ht=nKiewvuDSOA@mail.gmail.com>
Message-ID: <1342707200972-4989377.post@n6.nabble.com>

Thanks Etienne
  But python is not my best skill in this session!!!!!!!!!!!!
I will try!


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Convert-to-temperature-in-degrees-C-in-MODIS-Ocean-Color-tp4989237p4989377.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jgomezdans at gmail.com  Thu Jul 19 07:25:14 2012
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu, 19 Jul 2012 15:25:14 +0100
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
	Color?
In-Reply-To: <1342669610101-4989237.post@n6.nabble.com>
References: <1342669610101-4989237.post@n6.nabble.com>
Message-ID: <CAMWde5rNLiPT9YH64-BYHx6d8+Sp_jWry0bgwkCSGSenwgH1Mw@mail.gmail.com>

Hi,


On 19 July 2012 04:46, sigologo <dlopezaspe at gmail.com> wrote:

> I'm trying import A20030012003008.L3m_8D_NSST_4, with gdal with this
> script:
>
> for file in A*L3m_8D_NSST_4 ; do
>   echo "map: $file"
>
>   gdal_translate -a_srs "+init=epsg:4326" -a_nodata 65535 \
>     -a_ullr -180 90 180 -90 -co "COMPRESS=PACKBITS" \
>     HDF4_SDS:UNKNOWN:"$file":0  ${file}_out.tif
>
> done
>
> all good, but the data not be in degree C............. I find for it
> another
> script but no found in gdal...
>

The problem is that the data are linearly scaled (from the GRASS script you
quoted). I am unfamiliar with the ocean products (that's the bit of the
data I blank out ;-D), and you know the linear scaling (either because it's
constant, or beause you can read it out from the files's metadata), I think
you can use gdal_translates 'scale' option: -scale [src_min src_max
[dst_min dst_max]]. Note that hte syntax will be slightly different to the
slope/intercept one in your GRASS script.

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120719/677c38b8/attachment.html>

From p.meems at topx-group.nl  Thu Jul 19 07:44:28 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 19 Jul 2012 16:44:28 +0200
Subject: [gdal-dev] MapWindow Summer of Code 2012
Message-ID: <CAHNf2YQJv=it-qBkyrG7MY284FTDtRtycdsFqV5u4P7YEXX_Gg@mail.gmail.com>

Hi List,

We've started the MapWindow Summer of Code 2012 again.
It's a bit late, but we don't have an end date ;)

This year we're focusing on the C++ ActiveX control MapWinGIS.
And because a lot of tasks are related to GDAL, I thought I mail this list
as well.

If you are an experience C++ developer and have some free time you can take
one of the tasks, have some fun and earn some money ;)


If you just want to support us you can donate some money at the website.

Please go to http://www.mapwindow.org/SummerOfCode/2012/index.php for more
information and help us making MapWindow better.

Thanks,

Paul Meems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120719/5ee6c738/attachment.html>

From etourigny.dev at gmail.com  Thu Jul 19 09:00:50 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 19 Jul 2012 13:00:50 -0300
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
	Color?
In-Reply-To: <1342707200972-4989377.post@n6.nabble.com>
References: <1342669610101-4989237.post@n6.nabble.com>
	<CA+TxYvO2BCwTDbxXWxHK9ru3eNmz3p2fQVw-ht=nKiewvuDSOA@mail.gmail.com>
	<1342707200972-4989377.post@n6.nabble.com>
Message-ID: <CA+TxYvOKAK9Ye1XWXQmDfUnvY626OfKBg_zVLh-mKCD9GACCGQ@mail.gmail.com>

I mean it requires the gdal python bindings and python installed.

You don't need python skills - it's a command-line program. Although
you may need to understand the numpy syntax if you have a complex
formula.

In your case it would be something like

gdal_calc.py -A input1.tif --outfile=result.tif --calc="0.000717185 *
A -2 " --type Float32

Etienne


On Thu, Jul 19, 2012 at 11:13 AM, sigologo <dlopezaspe at gmail.com> wrote:
> Thanks Etienne
>   But python is not my best skill in this session!!!!!!!!!!!!
> I will try!
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Convert-to-temperature-in-degrees-C-in-MODIS-Ocean-Color-tp4989237p4989377.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jluis at ualg.pt  Thu Jul 19 11:01:28 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 19 Jul 2012 19:01:28 +0100
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
 Color?
In-Reply-To: <1342707200972-4989377.post@n6.nabble.com>
References: <1342669610101-4989237.post@n6.nabble.com>
	<CA+TxYvO2BCwTDbxXWxHK9ru3eNmz3p2fQVw-ht=nKiewvuDSOA@mail.gmail.com>
	<1342707200972-4989377.post@n6.nabble.com>
Message-ID: <50084B78.1080407@ualg.pt>

Hi,

Unfortunately the GMT5 CookBook is no longer in html so I have to refer 
you the section 4.21 - "Options for grids and images read via GDAL" - of

http://www.soest.hawaii.edu/gmt5/gmt/pdf/GMT_Docs.pdf

where you can see this example

"... Be warned, however, that things are not yet completed because while 
the data are scaled according to the
equation printed above (?Scaling Equation=(Slope*l3m_data) + Intercept = 
Parameter value?), this scaling
is not applied by GDAL on reading so it cannot be done automatically by 
GMT. One solution is to do the
reading and scaling via grdmath first, i.e.,"

grdmath 
A20030012003365.L3m_YR_NSST_9=gd?HDF4_SDS:UNKNOWN:"A20030012003365.L3m_YR_NSST_9:0" 
\
0.000717185 MUL -2 ADD = sst.nc

Joaquim

> Thanks Etienne
>    But python is not my best skill in this session!!!!!!!!!!!!
> I will try!
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Convert-to-temperature-in-degrees-C-in-MODIS-Ocean-Color-tp4989237p4989377.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From jgomezdans at gmail.com  Thu Jul 19 12:03:19 2012
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu, 19 Jul 2012 20:03:19 +0100
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
	Color?
In-Reply-To: <CAMWde5rNLiPT9YH64-BYHx6d8+Sp_jWry0bgwkCSGSenwgH1Mw@mail.gmail.com>
References: <1342669610101-4989237.post@n6.nabble.com>
	<CAMWde5rNLiPT9YH64-BYHx6d8+Sp_jWry0bgwkCSGSenwgH1Mw@mail.gmail.com>
Message-ID: <CAMWde5qmE_BKBbSq_fuiZSe2V119JAm6SWwA+3ifka21RC1yGQ@mail.gmail.com>

On 19 July 2012 15:25, Jose Gomez-Dans <jgomezdans at gmail.com> wrote:

> Hi,
>
>
> On 19 July 2012 04:46, sigologo <dlopezaspe at gmail.com> wrote:
>
>> I'm trying import A20030012003008.L3m_8D_NSST_4, with gdal with this
>> script:
>>
>> for file in A*L3m_8D_NSST_4 ; do
>>   echo "map: $file"
>>
>>   gdal_translate -a_srs "+init=epsg:4326" -a_nodata 65535 \
>>     -a_ullr -180 90 180 -90 -co "COMPRESS=PACKBITS" \
>>     HDF4_SDS:UNKNOWN:"$file":0  ${file}_out.tif
>>
>> done
>>
>> all good, but the data not be in degree C............. I find for it
>> another
>> script but no found in gdal...
>>
>
> The problem is that the data are linearly scaled (from the GRASS script
> you quoted). I am unfamiliar with the ocean products (that's the bit of the
> data I blank out ;-D), and you know the linear scaling (either because it's
> constant, or beause you can read it out from the files's metadata), I think
> you can use gdal_translates 'scale' option: -scale [src_min src_max
> [dst_min dst_max]]. Note that hte syntax will be slightly different to the
> slope/intercept one in your GRASS script.
>

Here is your script modified to take the linear correction into account.
Note that the destination spread (-2 to 45) was read from the metadata.
Also note that you need to make the output format Float, otherwise, you get
a quantised version.

*for file in A*L3m_8D_NSST_4 ; *
*do*
*  echo "map: $file"*
*  gdal_translate -of GTiff -ot Float32 \*
*                      -scale 0 65535 -2. 45. \*
*                      -a_srs "EPSG:4326" \*
*                      -a_nodata 65535  \*
*                      -a_ullr -180 90 180 -90 \*
*                      -co "COMPRESS=PACKBITS" \*
*                      'HDF4_SDS:UNKNOWN:"A20030012003008.L3m_8D_NSST_4":0'
\*
*                      A20030012003008.L3m_8D_NSST_4.tif*
*done*


Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120719/ba6921bc/attachment.html>

From dlopezaspe at gmail.com  Thu Jul 19 15:02:43 2012
From: dlopezaspe at gmail.com (sigologo)
Date: Thu, 19 Jul 2012 15:02:43 -0700 (PDT)
Subject: [gdal-dev] Convert to temperature in degrees C in MODIS Ocean
	Color?
In-Reply-To: <CAMWde5qmE_BKBbSq_fuiZSe2V119JAm6SWwA+3ifka21RC1yGQ@mail.gmail.com>
References: <1342669610101-4989237.post@n6.nabble.com>
	<CAMWde5rNLiPT9YH64-BYHx6d8+Sp_jWry0bgwkCSGSenwgH1Mw@mail.gmail.com>
	<CAMWde5qmE_BKBbSq_fuiZSe2V119JAm6SWwA+3ifka21RC1yGQ@mail.gmail.com>
Message-ID: <1342735363031-4989478.post@n6.nabble.com>

Hello Everyone....
 Thanks a lot Jose.....
 Your Script running ok....Your solution is very clever.....
 Congratulations.....

 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Convert-to-temperature-in-degrees-C-in-MODIS-Ocean-Color-tp4989237p4989478.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From taibc_coltech at yahoo.com  Thu Jul 19 18:34:57 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Thu, 19 Jul 2012 18:34:57 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
Message-ID: <1342748097829-4989501.post@n6.nabble.com>

Hi everyone,

Do you know how to identify whether a point (OGRPoint) is belong to a
polygon (OGRPolygon) ? (the polygon covers the point)

Thanks and regards,

Tai

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Thu Jul 19 20:11:09 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 20 Jul 2012 08:41:09 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1342748097829-4989501.post@n6.nabble.com>
References: <1342748097829-4989501.post@n6.nabble.com>
Message-ID: <CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>

Tai,

You can use OGR_G_Within()
OGR_G_WIthin(point,polygon) will return true if the point is within the
polygon.

You can access various other geometry functions from the OGRGeometry class.

http://www.gdal.org/ogr/ogr__api_8h.html#a80ba9e516ccae381ae7240cc9684eb72

On Fri, Jul 20, 2012 at 7:04 AM, taibc <taibc_coltech at yahoo.com> wrote:

> Hi everyone,
>
> Do you know how to identify whether a point (OGRPoint) is belong to a
> polygon (OGRPolygon) ? (the polygon covers the point)
>
> Thanks and regards,
>
> Tai
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120720/59a4ac35/attachment.html>

From chaitanya.ch at gmail.com  Thu Jul 19 23:11:51 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 20 Jul 2012 11:41:51 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1342756789.75251.YahooMailNeo@web190006.mail.sg3.yahoo.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<1342755357.3374.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<CAMKgpOZOcgthxaLLjdZPf3BO=W-1ynLeKWtJrWtRif0W3UeQGA@mail.gmail.com>
	<1342756789.75251.YahooMailNeo@web190006.mail.sg3.yahoo.com>
Message-ID: <CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>

Tai,

You can use the spatial filter of the ogr layer to filter the point
features to speed things up. You will still have to test if the point is
within the polygon but it will be faster.

Also, make sure the test is like point->Within(polygon) and not
polygon->Within(point)

OGRLayer::SetSpatialFilter()
http://www.gdal.org/ogr/classOGRLayer.html#a0b4ab45cf97cbc470f0d60474d3e4169

On Fri, Jul 20, 2012 at 9:29 AM, Bui Chi Tai <taibc_coltech at yahoo.com>wrote:

> Chaitanya,
>
> I am checking my code. Maybe it is not successful because I used two
> different layers (of one file).
>
> As you know, one .dgn files only has one layer, that include many
> features, and Texts (Point Geometry), Polygons are treated as features.
> My idea is:
> First, I will read each feature to identify whether this feature is a
> polygon. Then, I need to use a loop to read and check all features of layer
> to identify whether a Text (point) is belong to that polygon. But, this
> will affect to the first reading times, and give unexpected result.
>
> Do you have any ideas ?
>
> Thanks and regards,
>
> Tai
>   ------------------------------
> *From:* Chaitanya kumar CH <chaitanya.ch at gmail.com>
> *To:* Bui Chi Tai <taibc_coltech at yahoo.com>
> *Sent:* Friday, July 20, 2012 10:39 AM
>
> *Subject:* Re: [gdal-dev] How to identify a point is belong to a polygon ?
>
> Tai,
>
> I don't understand why it would happen. Can you provide some more details?
> Code, data?
>
> On Fri, Jul 20, 2012 at 9:05 AM, Bui Chi Tai <taibc_coltech at yahoo.com>wrote:
>
> Thanks Chaitanya,
>
> I am trying to use this method. But, it is not successful.
>
> For example: One file .dgn includes Text (treated as a point geometry) and
> Shapes (Polygon).
>
> I used the method OGRGeometry::Within(OGRGeometry * other) to identify
> whether the Text is belong to the polygon. But it doesn't return an
> expected result (Actually, there are some texts that belong to each
> polygon).
>
> Kind regards,
>
> Tai
>
>    ------------------------------
> *From:* Chaitanya kumar CH <chaitanya.ch at gmail.com>
> *To:* taibc <taibc_coltech at yahoo.com>
> *Cc:* gdal-dev at lists.osgeo.org
> *Sent:* Friday, July 20, 2012 10:11 AM
> *Subject:* Re: [gdal-dev] How to identify a point is belong to a polygon ?
>
> Tai,
>
> You can use OGR_G_Within()
> OGR_G_WIthin(point,polygon) will return true if the point is within the
> polygon.
>
> You can access various other geometry functions from the OGRGeometry class.
>
> http://www.gdal.org/ogr/ogr__api_8h.html#a80ba9e516ccae381ae7240cc9684eb72
>
> On Fri, Jul 20, 2012 at 7:04 AM, taibc <taibc_coltech at yahoo.com> wrote:
>
> Hi everyone,
>
> Do you know how to identify whether a point (OGRPoint) is belong to a
> polygon (OGRPolygon) ? (the polygon covers the point)
>
> Thanks and regards,
>
> Tai
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com<http://nabble.com/>
> .
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120720/de92c05d/attachment.html>

From chaitanya.ch at gmail.com  Fri Jul 20 02:46:19 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 20 Jul 2012 15:16:19 +0530
Subject: [gdal-dev] [OSGeo-Discuss] how to use gdal_calc.py?
In-Reply-To: <1342773026317-4989563.post@n6.nabble.com>
References: <1342766236087-4989528.post@n6.nabble.com>
	<CAMKgpObmfyF0yYtwYSGPa-M5KS3sZqZOv0nr5iOUBgrDE0wgOQ@mail.gmail.com>
	<1342773026317-4989563.post@n6.nabble.com>
Message-ID: <CAMKgpOZosNjEzm-oQU=Ht4_5X7CJ9R1YzkDnZUwWeKSGhxqZqw@mail.gmail.com>

We should have this discussion in the gdal-dev list.

dhonjuh,

Try this at the command prompt; not the python command prompt.
$ gdal_calc.py -A cknp_dem_30m.tif --calc A/2 --outfile t.tif

Also, make sure you did not make any inadvertent changes to the script.

On Fri, Jul 20, 2012 at 2:00 PM, dhonjuh <dhonjuh at yahoo.com> wrote:

> thanks for your reply. I tried as you suggested but still I am getting
> syntax
> error like
>
> >>> gdal_calc -A /cknp_dem_30m/.tif --calc A/2 --outfile t.tif
> SyntaxError: invalid syntax
>
> is there any lib missing? I hope.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/how-to-use-gdal-calc-py-tp4989528p4989563.html
> Sent from the OSGeo Discuss mailing list archive at Nabble.com.
> _______________________________________________
> Discuss mailing list
> Discuss at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/discuss
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120720/a5c2de5b/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Fri Jul 20 03:25:17 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 20 Jul 2012 10:25:17 +0000 (UTC)
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120719T004447-659@post.gmane.org>,
	<1342686330.5007c47a444e9@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A6345C4D8@suutari.haapa.mmm.fi>
Message-ID: <loom.20120720T112412-21@post.gmane.org>

Rahkonen Jukka <Jukka.Rahkonen <at> mmmtike.fi> writes:

> 
> 
> Even Rouault wrote:

> 
> > Do you have comparisons of the performance with osm2pgsql on the same
 PC and
> > with the same data ? I'd be curious if that slow down effect is
 found with every
> > tool, or if it is something specific to the way sqlite is used, or if
 other
> > tools do more clever things when indexing or retrieving nodes.
> 

This test may be interesting. I took timings from converting 
finland.osm.pbf and germany.osm.pbf with spatialite_osm_map. 
It is doing roughly same thing as ogr2ogr, that is, reads 
nodes from OSM file and resolves point, line and polygon
features. Enviroment:

Windows 7, 64-bit. 6 GB memory 
64-bit spatialite_osm_map.exe, version numbers:
SQLite version: 3.7.13
SpatiaLite version: 3.1.0-RC2

Command:
spatialite_osm_map -d osm_map_testfi.sqlite -o finland.osm.pbf -jo

Results:
Finland 11 minutes
Germany 10 hours

Memory usage of spatialite_osm_map process was very low, under 50 MB.

Similar behaviour of ogr2ogr and spatialite_osm_map makes me 
think that perhaps it is SQLite that does not scale up well.

-Jukka Rahkonen-



From benjamin.lux at maxsea.fr  Fri Jul 20 05:34:02 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Fri, 20 Jul 2012 05:34:02 -0700 (PDT)
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <CAMKgpOZkgrK+1hQF+FvYx=-YCAKPxP_=xDNOfkbHr3Q_+TeByQ@mail.gmail.com>
References: <1342535828384-4988831.post@n6.nabble.com>
	<CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
	<CAMKgpOaz5Z_H2hJccg10joBmxoitOtsoEydhQfvpDVZ7LH9k8w@mail.gmail.com>
	<2D6A931F6E6D04498055060E3B5F00A8070DE3B3@maxseamail.informatique-mer.fr>
	<CAMKgpOZkgrK+1hQF+FvYx=-YCAKPxP_=xDNOfkbHr3Q_+TeByQ@mail.gmail.com>
Message-ID: <1342787642374-4989636.post@n6.nabble.com>

If you want I can remove the MemoryDriver, but it is still the same thing.

[code]
string request = "SELECT *  FROM MY_TABLE WHERE CHART_ID = 'Z15F43AJ'";
Layer serverLayer = RclDataSource.ExecuteSQL(request, null, "");

int nbFeature = serverLayer.GetFeatureCount(1);
Feature serverFeature = serverLayer.GetNextFeature();
string[] namesColumnsArray = new string[3];
for (int i = 0; i < serverFeature.GetFieldCount(); i++)
    namesColumnsArray[i] = serverFeature.GetFieldDefnRef(i).GetName();
Geometry serverGeometry = serverFeature.GetGeometryRef();
[/code]

Results:
    nbFeature = 39
    namesColumnsArray = { D , CHART_ID, WKB_GEOMETRY }
    serverGeometry = null


For me the fact is that the result of the SQL request is a layer without
geometry field, just 3 usuals fields.
I suppose that is normal because if you ask for a request like :
"Select column_geo1, column_geo2
>From Table1, Table2"
Unless I am wrong, you can't have 2 geometrics fields in a layer.

For me this result is normal (but I am a beginner with ogr so maybe not).

Reminder : I just want fetch my geometry.

In any cases, thank for all you reply Chaitanya_ch.

Benjamin.


chaitanya_ch wrote
> 
> Benjamin,
> 
> First thing: You don't need to use a memory datasource here. OGR doesn't
> make round trips to the database server every time you run
> GetNextFeature(). Do that first. I'm sure it will make it less
> complicated.
> 
> I don't understand why you are getting the null. Hopefully we can figure
> that out after you simplify your code by removing the memory driver stuff.
> 
> On Wed, Jul 18, 2012 at 8:52 PM, Benjamin LUX &lt;Benjamin.lux@&gt;wrote:
> 
>> Hi again Chaitanya,****
>>
>> ** **
>>
>> If you look my previous mail you can see the code.****
>>
>> But in a compact way this is a copy/paste of my running code.****
>>
>> Note that RoleEnvironment.GetConfigurationSettingValue(?****?) just
>> provide me parametrables strings (like argv[n]).****
>>
>> [code]****
>>
>> Ogr.RegisterAll();****
>>
>> string option = String.Format(
>> "Tables=dbo.{0}(WKB_GEOMETRY);GeometryFormat=wkb;",****
>>
>>                 RoleEnvironment.GetConfigurationSettingValue(
>> "CatalogueRclAllName")****
>>
>>                 );****
>>
>> RclDataSource = Ogr.Open(String.Format("MSSQL:{0}{1}", RoleEnvironment
>> .GetConfigurationSettingValue("DataBaseConnectionString"), option),
>> 0);***
>> *
>>
>> string request = String.Format("SELECT *  FROM {0} WHERE CHART_ID =
>> '{1}'"
>> ,****
>>
>> RoleEnvironment.GetConfigurationSettingValue("CatalogueRclAllName"),****
>>
>> "Z15F43AJ");****
>>
>> ** **
>>
>> Layer serverLayer = RclDataSource.ExecuteSQL(request, null, "");****
>>
>> ** **
>>
>> Driver memDriver = Ogr.GetDriverByName("Memory");****
>>
>> DataSource memDataSource = memDriver.CreateDataSource(GetWorkPath(
>> "nomimprobale"), null);****
>>
>> Layer memLayer = memDataSource.CopyLayer(serverLayer,
>> serverLayer.GetName(), null);****
>>
>> Feature memFeature = memLayer.GetNextFeature();****
>>
>> string[] namesColumnsArray = new string[5];****
>>
>> for (int i = 0; i < memFeature.GetFieldCount(); i++)****
>>
>> namesColumnsArray[i] = memFeature.GetFieldDefnRef(i).GetName();****
>>
>> Geometry memGeometry = memFeature.GetGeometryRef(); ****
>>
>> [/code]****
>>
>> ** **
>>
>> Results :****
>>
>>                 namesColumnsArray = { D , CHART_ID, WKB_GEOMETRY }****
>>
>>                 memGeometry = null****
>>
>> ** **
>>
>> I don?t see what I can add to this :/****
>>
>> If you want more details said me.****
>>
>> ** **
>>
>> Link to the thread :
>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>> ****
>>
>> ** **
>>
>> Best regards,****
>>
>> Benjamin****
>>
>> ** **
>>
>> *De :* Chaitanya kumar CH [mailto:chaitanya.ch@]
>> *Envoy? :* mercredi 18 juillet 2012 16:53
>> *? :* Benjamin LUX
>> *Cc :* gdal dev
>> *Objet :* Re: Ogr: ExecuteSQL with MSSQL and geometry column****
>>
>> ** **
>>
>> Hi Benjamin,
>>
>> Can you provide some more details?
>> How did you try to retrieve the geometry?****
>>
>> On Wed, Jul 18, 2012 at 8:02 PM, &lt;benjamin.lux@&gt; wrote:****
>>
>> 
> Benjamin wrote
>> 
>>> memFeature.GetGeometryRef();          // return null
>>> 
>>
>> Sorry, but no.
>> After a call to SQLExecute(), Ogr framwork doesn't recognize any geometry
>> in my feature.
>> If you have a clue why that ?
>>
>> 
> chaitanya_ch wrote
>> ****
>>>
>>> Benjamin,
>>>
>>> The mssql driver already does the conversion from wkb in the database to
>>> the native ogr geometry format. You don't have to create a temporary wkb
>>> geometry and then the ogr geometry.
>>>
>>> You can simply do this:
>>> [code]
>>> Geometry memGeom = memFeature.GetGeometryRef()
>>> [/code]
>>>
>>> On Wed, Jul 18, 2012 at 6:31 PM, Benjamin &lt;benjamin.lux@&gt; wrote:
>>>
>>> > Sorry, I was not clear.
>>> >
>>> > I resume from the beginning.
>>> >
>>> > I work with a warper C# of Ogr.
>>> > I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY)
>>> in
>>> a
>>> > SQL server Database (in SQL Azure exactly).
>>> >
>>> > *My aim is to work with a copy* (in a
>>> > http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
>>> > statement result executed on a MSSQL DataSource.
>>> >
>>> > Actually I can work with usuals methods with this MSSQL DataSource.
>>> > Note that I have not geometry_column table in my SQL Serveur DataBase,
>>> I
>>> > use
>>> > http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .
>>> >
>>> > [code]
>>> > string driverOptions =
>>> > "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
>>> > serverDataSource = Ogr.Open("MSSQL:" + connectionString +
>>> driverOptions),
>>> > 0);
>>> >
>>> > serveurDataSource.GetLayerCount(); // It works fine.
>>> > [/code]
>>> >
>>> > So I tried a call to
>>> >
>>> >
>>> http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
>>> > SQLExecute() .
>>> > [code]
>>> > string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
>>> > Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
>>> > [/code]
>>> >
>>> > But unfortunately, I have not geometry field in the result.
>>> > [code]
>>> > serveurLayer.GetGeometryColumn();  //*return ""*
>>> > serveurLayer.GetGeomType();          //*return wkbUnknown*
>>> > [/code]
>>> >
>>> > But I have my 3 fields in serveurLayer !
>>> > [code]
>>> > serverLayer.GetLayerDefn().GetFieldCount();                //return 3
>>> > serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
>>> > serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return
>>> "CHART_ID"
>>> > serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
>>> > "WKB_GEOMETRY"*
>>> > [/code]
>>> >
>>> > So I want to copy this layer in a Memory Layer to minimise acces to my
>>> SQL
>>> > Server and work faster.
>>> > [code]
>>> > Driver memDriver = Ogr.GetDriverByName("Memory");
>>> > DataSource memDataSource =
>>> > memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
>>> > Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName,
>>> null);
>>> > [/code]
>>> >
>>> >
>>> > Now,* I have to fetch my geometries*, so have thought to a trick like
>>> this
>>> > :
>>> > [code]
>>> > byte[] memWkb =
>>> >
>>> >
>>> System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
>>> > Geometry memGeom = Geometry.CreateFromWkb(memWkb);
>>> > [/code]
>>> > Because I can't use memFeature.GetGeometryRef()
>>> > [code]
>>> > memFeature.GetLayerCount();                                // return
>>> 39
>>> > Feature memFeature = memLayer.GetNextFeature();  // don't return null
>>> > memFeature.GetGeometryRef();                             // *return
>>> null*
>>> > [/code]
>>> >
>>> > But I don't know if I have to use UTF8, ASCII, Unicode or other.
>>> > If you know what encoding is use, or better an other trick to have a
>>> > geometry in my memLayer or serverLayer I heard you with interest !
>>> >
>>> >
>>> > Sorry for my spelling, English isn't my native tongue language.
>>> >
>>> > Benjamin
>>> >
>>> >
>>> > Ps : link to the thread:
>>> >
>>> >
>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>>> >
>>> >
>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>>> >
>>> >
>>> >
>>> > Even Rouault wrote
>>> > >
>>> > > Selon Benjamin &lt;benjamin.lux@&gt;:
>>> > >
>>> > >> "You can access the geometry like with any other ogr feature."
>>> > >>
>>> > >
>>> > > Hopefully, memFeature.GetGeometryRef() should do it !
>>> > > _______________________________________________
>>> > > gdal-dev mailing list
>>> > > gdal-dev at .osgeo
>>> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> > >
>>> >
>>> >
>>> > --
>>> > View this message in context:
>>> >
>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
>>> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> > _______________________________________________
>>> > gdal-dev mailing list
>>> > gdal-dev at .osgeo
>>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> >
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at .osgeo
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>>>
>>> 
>> Quoted from:
>>
>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989092.html
>> ****
>>
>>
>>
>>
>>
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at .osgeo
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989636.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dhoese at gmail.com  Fri Jul 20 08:14:21 2012
From: dhoese at gmail.com (David Hoese)
Date: Fri, 20 Jul 2012 10:14:21 -0500
Subject: [gdal-dev] geotransform rotation and gdal_merge
Message-ID: <500975CD.7050902@gmail.com>

I'm attempting to put aircraft scan data into geotiffs (1-3 scanlines 
each) and then use gdal_merge.py to combine them into one large geotiff 
that has the entire aircraft's path.  The scan lines are 15 pixels wide 
and taken every 10 seconds, the geotiffs are wgs84 lat/lon, and I have 
lat/lon values for each pixel.  To handle the case when the aircraft 
isn't flying straight north I think I have to use the 2 rotation 
parameters in the affine geotransform, is that right?  I don't have any 
test cases, but I think if I don't use rotation anything that reads the 
geotiff will think that the image is square(aligned) in lat/lon space.

Whether or not I need to use this, can someone explain to me how to use 
the rotation coefficients?  What are the actual values of the 
coefficients supposed to be?  I couldn't find a good example and I 
couldn't get any basic situations to make sense, like a 2x3 array turned 
45 degrees.  I used these equations:

     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)


And lastly, does gdal_merge.py handle rotation?  I checked the source 
and it doesn't ever seem to use elements 2 and 4 in its calculations.

Thanks for any help.

-Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120720/db0e3414/attachment.html>

From even.rouault at mines-paris.org  Fri Jul 20 09:16:54 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 20 Jul 2012 18:16:54 +0200
Subject: [gdal-dev] Memory leaks when using SQL queries with shapefiles
In-Reply-To: <50002F2A.9050704@actgate.com>
References: <4FFD8D7B.90507@actgate.com> <5000050C.1060602@actgate.com>
	<50002F2A.9050704@actgate.com>
Message-ID: <201207201816.54612.even.rouault@mines-paris.org>

Le vendredi 13 juillet 2012 16:22:34, Pierluigi Guasqui a ?crit :
> Even,
> 
> I opened a ticket in GDAL Trac: http://trac.osgeo.org/gdal/ticket/4749.
> 

Confirmed and fixed now. Thanks for reporting.

From even.rouault at mines-paris.org  Fri Jul 20 09:17:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 20 Jul 2012 18:17:18 +0200
Subject: [gdal-dev] Problem reading shapefile via /vsizip
In-Reply-To: <CC257321.2F20F%michael.smith@usace.army.mil>
References: <CC257321.2F20F%michael.smith@usace.army.mil>
Message-ID: <201207201817.18875.even.rouault@mines-paris.org>

Le vendredi 13 juillet 2012 12:40:34, Smith, Michael ERDC-CRREL-NH a ?crit :
> Ticket created
> 
> http://trac.osgeo.org/gdal/ticket/4748

Confirmed and fixed now. Thanks for reporting

From even.rouault at mines-paris.org  Fri Jul 20 11:10:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 20 Jul 2012 20:10:16 +0200
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <1342634961.5006fbd191cf6@imp.free.fr>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
	<1342634961.5006fbd191cf6@imp.free.fr>
Message-ID: <201207202010.16476.even.rouault@mines-paris.org>


> > However, select with SQL feels sub-optimal.
> 
> Yes, when you use ogr2ogr with explicit layer names, there are
> optimizations. For example, when you only specify the layer 'points', the
> OSM driver will not even try to index the nodes into the temporary
> database because it is not needed. However, as you noticed, there is not
> yet any optimization when a SQL request is specified.
> 

Optimization for SQL request added in r24690 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120720/aa61a3f3/attachment.html>

From taibc_coltech at yahoo.com  Fri Jul 20 23:49:29 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 20 Jul 2012 23:49:29 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
Message-ID: <1342853369586-4989766.post@n6.nabble.com>

Hi Chaitanya,

I still can't run the method "Geometry::Within". And I got the error: "GEOS
support not enable" when trying use this method.

Please find the attached file for sample code.
http://osgeo-org.1560.n6.nabble.com/file/n4989766/Source1.cpp Source1.cpp 

About spatial filter, you said that: we can use the spatial filter of the
ogr layer to filter the point features. But, I think it is used to filter
features that geometrically intersect the filter geometry.

For example: if I have one polygon A feature, I can use the method
"SetSpatialFilter" to get other features (Point or Polygon) that
geometrically *intersect* with A.



chaitanya_ch wrote
> 
> Tai,
> 
> You can use the spatial filter of the ogr layer to filter the point
> features to speed things up. You will still have to test if the point is
> within the polygon but it will be faster.
> 
> Also, make sure the test is like point->Within(polygon) and not
> polygon->Within(point)
> 
> OGRLayer::SetSpatialFilter()
> http://www.gdal.org/ogr/classOGRLayer.html#a0b4ab45cf97cbc470f0d60474d3e4169
> 
> On Fri, Jul 20, 2012 at 9:29 AM, Bui Chi Tai &lt;taibc_coltech@&gt;wrote:
> 
> 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4989766.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Sat Jul 21 00:05:58 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 21 Jul 2012 12:35:58 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1342853369586-4989766.post@n6.nabble.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
Message-ID: <CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>

Tai,

GDAL needs GEOS to perform these geometry functions. Make sure you install
that.

On Sat, Jul 21, 2012 at 12:19 PM, taibc <taibc_coltech at yahoo.com> wrote:

> Hi Chaitanya,
>
> I still can't run the method "Geometry::Within". And I got the error: "GEOS
> support not enable" when trying use this method.
>
> Please find the attached file for sample code.
> http://osgeo-org.1560.n6.nabble.com/file/n4989766/Source1.cpp Source1.cpp
>
> About spatial filter, you said that: we can use the spatial filter of the
> ogr layer to filter the point features. But, I think it is used to filter
> features that geometrically intersect the filter geometry.
>
> For example: if I have one polygon A feature, I can use the method
> "SetSpatialFilter" to get other features (Point or Polygon) that
> geometrically *intersect* with A.
>
>
>
> chaitanya_ch wrote
> >
> > Tai,
> >
> > You can use the spatial filter of the ogr layer to filter the point
> > features to speed things up. You will still have to test if the point is
> > within the polygon but it will be faster.
> >
> > Also, make sure the test is like point->Within(polygon) and not
> > polygon->Within(point)
> >
> > OGRLayer::SetSpatialFilter()
> >
> http://www.gdal.org/ogr/classOGRLayer.html#a0b4ab45cf97cbc470f0d60474d3e4169
> >
> > On Fri, Jul 20, 2012 at 9:29 AM, Bui Chi Tai <taibc_coltech@>wrote:
> >
> >
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4989766.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120721/adb0e0ff/attachment.html>

From taibc_coltech at yahoo.com  Sat Jul 21 01:36:57 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Sat, 21 Jul 2012 01:36:57 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
Message-ID: <1342859817307-4989779.post@n6.nabble.com>

Thanks Chaitanya,

I tried to install GEOS on Window. 

But I got below error: NMAKE fatal error U1077 ....return code '0x2'

Detail is:

algorithm\LineIntersector.cpp(671) : error C3861: 'isnan': identifier not
found
algorithm\LineIntersector.cpp(672) : error C3861: 'isnan': identifier not
found
algorithm\LineIntersector.cpp(680) : error C3861: 'isnan': identifier not
found
algorithm\LineIntersector.cpp(681) : error C3861: 'isnan': identifier not
found
algorithm\LineIntersector.cpp(736) : error C3861: 'isnan': identifier not
found
algorithm\LineIntersector.cpp(737) : error C3861: 'isnan': identifier not
found
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
10.0\VC\BI
N\cl.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
10.0\VC\BI
N\nmake.EXE"' : return code '0x2'
Stop.


chaitanya_ch wrote
> 
> Tai,
> 
> GDAL needs GEOS to perform these geometry functions. Make sure you install
> that.
> 
> On Sat, Jul 21, 2012 at 12:19 PM, taibc &lt;taibc_coltech@&gt; wrote:
> 
> 
> 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4989779.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Sat Jul 21 02:13:05 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 21 Jul 2012 14:43:05 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1342859817307-4989779.post@n6.nabble.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1342859817307-4989779.post@n6.nabble.com>
Message-ID: <CAMKgpOZkeC8ZwsLiai2_4Tf9GiugXUyRmaZ7uiNSEirRHdwGRg@mail.gmail.com>

Tai,

Pease refer to http://trac.osgeo.org/geos/

On Sat, Jul 21, 2012 at 2:06 PM, taibc <taibc_coltech at yahoo.com> wrote:

> Thanks Chaitanya,
>
> I tried to install GEOS on Window.
>
> But I got below error: NMAKE fatal error U1077 ....return code '0x2'
>
> Detail is:
>
> algorithm\LineIntersector.cpp(671) : error C3861: 'isnan': identifier not
> found
> algorithm\LineIntersector.cpp(672) : error C3861: 'isnan': identifier not
> found
> algorithm\LineIntersector.cpp(680) : error C3861: 'isnan': identifier not
> found
> algorithm\LineIntersector.cpp(681) : error C3861: 'isnan': identifier not
> found
> algorithm\LineIntersector.cpp(736) : error C3861: 'isnan': identifier not
> found
> algorithm\LineIntersector.cpp(737) : error C3861: 'isnan': identifier not
> found
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 10.0\VC\BI
> N\cl.EXE"' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 10.0\VC\BI
> N\nmake.EXE"' : return code '0x2'
> Stop.
>
>
> chaitanya_ch wrote
> >
> > Tai,
> >
> > GDAL needs GEOS to perform these geometry functions. Make sure you
> install
> > that.
> >
> > On Sat, Jul 21, 2012 at 12:19 PM, taibc <taibc_coltech@> wrote:
> >
> >
> >
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4989779.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120721/703910df/attachment.html>

From chaitanya.ch at gmail.com  Sat Jul 21 07:46:06 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 21 Jul 2012 20:16:06 +0530
Subject: [gdal-dev] geotransform rotation and gdal_merge
In-Reply-To: <500975CD.7050902@gmail.com>
References: <500975CD.7050902@gmail.com>
Message-ID: <CAMKgpOYmXpDrCyxLjE+mXFd5LofBFqB8oDSSaoq=58qy5MYG8w@mail.gmail.com>

Dave,

You said that you have lat/lon values for each pixel. Can you explain?

On Fri, Jul 20, 2012 at 8:44 PM, David Hoese <dhoese at gmail.com> wrote:

>  I'm attempting to put aircraft scan data into geotiffs (1-3 scanlines
> each) and then use gdal_merge.py to combine them into one large geotiff
> that has the entire aircraft's path.  The scan lines are 15 pixels wide and
> taken every 10 seconds, the geotiffs are wgs84 lat/lon, and I have lat/lon
> values for each pixel.  To handle the case when the aircraft isn't flying
> straight north I think I have to use the 2 rotation parameters in the
> affine geotransform, is that right?  I don't have any test cases, but I
> think if I don't use rotation anything that reads the geotiff will think
> that the image is square(aligned) in lat/lon space.
>
> Whether or not I need to use this, can someone explain to me how to use
> the rotation coefficients?  What are the actual values of the coefficients
> supposed to be?  I couldn't find a good example and I couldn't get any
> basic situations to make sense, like a 2x3 array turned 45 degrees.  I used
> these equations:
>
>     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
>
>
> And lastly, does gdal_merge.py handle rotation?  I checked the source and
> it doesn't ever seem to use elements 2 and 4 in its calculations.
>
> Thanks for any help.
>
> -Dave
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120721/c1915585/attachment.html>

From dhoese at gmail.com  Sun Jul 22 07:14:24 2012
From: dhoese at gmail.com (David Hoese)
Date: Sun, 22 Jul 2012 09:14:24 -0500
Subject: [gdal-dev] geotransform rotation and gdal_merge
In-Reply-To: <CAMKgpOYmXpDrCyxLjE+mXFd5LofBFqB8oDSSaoq=58qy5MYG8w@mail.gmail.com>
References: <500975CD.7050902@gmail.com>
	<CAMKgpOYmXpDrCyxLjE+mXFd5LofBFqB8oDSSaoq=58qy5MYG8w@mail.gmail.com>
Message-ID: <500C0AC0.6080102@gmail.com>

Sure, pixels were probably not the best word to use. I have 15 
points(elements) per scan line per "variable" directly from an aircraft 
instrument.  So I might have a 15 element array of brightness 
temperatures, a 15 element array of latitudes corresponding to those 
points in the BT array, and another 15 element array of longitudes 
corresponding to those points in the BT array.  So the first element in 
the brightness temperature(BT[0]) array represents an area of the earth 
located at lon[0],lat[0] (I'm actually not sure if its the center of the 
area or the corner, but at the moment that doesn't matter).

Does that make sense?

-Dave

On 7/21/12 9:46 AM, Chaitanya kumar CH wrote:
> Dave,
>
> You said that you have lat/lon values for each pixel. Can you explain?
>
> On Fri, Jul 20, 2012 at 8:44 PM, David Hoese <dhoese at gmail.com 
> <mailto:dhoese at gmail.com>> wrote:
>
>     I'm attempting to put aircraft scan data into geotiffs (1-3
>     scanlines each) and then use gdal_merge.py to combine them into
>     one large geotiff that has the entire aircraft's path.  The scan
>     lines are 15 pixels wide and taken every 10 seconds, the geotiffs
>     are wgs84 lat/lon, and I have lat/lon values for each pixel.  To
>     handle the case when the aircraft isn't flying straight north I
>     think I have to use the 2 rotation parameters in the affine
>     geotransform, is that right?  I don't have any test cases, but I
>     think if I don't use rotation anything that reads the geotiff will
>     think that the image is square(aligned) in lat/lon space.
>
>     Whether or not I need to use this, can someone explain to me how
>     to use the rotation coefficients?  What are the actual values of
>     the coefficients supposed to be?  I couldn't find a good example
>     and I couldn't get any basic situations to make sense, like a 2x3
>     array turned 45 degrees.  I used these equations:
>
>          Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>          Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
>
>
>     And lastly, does gdal_merge.py handle rotation?  I checked the
>     source and it doesn't ever seem to use elements 2 and 4 in its
>     calculations.
>
>     Thanks for any help.
>
>     -Dave
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120722/74469267/attachment.html>

From yehil at rafael.co.il  Sun Jul 22 07:28:48 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Sun, 22 Jul 2012 17:28:48 +0300
Subject: [gdal-dev] gdalwarp utility
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C81D7D0204@MAILBOXSERVER.rf.local>


Hi
I've come upon a limitation of the gdalwarp utility under windows. When creating a mosaic from a large number of files from the command line, I ran into the limit of the command line length in windows (about 8000 characters).
I added the functionality of reading the source files from a txt file (similar to gdalbuildvrt -input_file_list option) to gdalwarp.
I think it could benefit other users, and the symmetry of the API to add this to the official version.

A patch against trunk is included.

Yehiyam Livneh


**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120722/11a6e019/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalwarp.patch
Type: application/octet-stream
Size: 1524 bytes
Desc: gdalwarp.patch
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120722/11a6e019/attachment.obj>

From even.rouault at mines-paris.org  Sun Jul 22 10:34:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 22 Jul 2012 19:34:30 +0200
Subject: [gdal-dev] gdalwarp utility
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C81D7D0204@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C81D7D0204@MAILBOXSERVER.rf.local>
Message-ID: <201207221934.30091.even.rouault@mines-paris.org>

Le dimanche 22 juillet 2012 16:28:48, Livneh Yehiyam a ?crit :
> Hi
> I've come upon a limitation of the gdalwarp utility under windows. When
> creating a mosaic from a large number of files from the command line, I
> ran into the limit of the command line length in windows (about 8000
> characters). I added the functionality of reading the source files from a
> txt file (similar to gdalbuildvrt -input_file_list option) to gdalwarp. I
> think it could benefit other users, and the symmetry of the API to add
> this to the official version.
> 
> A patch against trunk is included.

Actually this is not needed (and there was not a real reason for -
input_file_list to exist in gdalbuildvrt too). All GDAL/OGR utilities have a 
"--optfile filename" (note the double dash before optfile) option that uses the 
lines of filename as arguments of the utility. 

See :

$ gdalinfo --help-general
Generic GDAL utility command options:
  --version: report version of GDAL in use.
  --license: report GDAL license info.
  --formats: report all configured format drivers.
  --format [format]: details of one format.
  --optfile filename: expand an option file into the argument list.
  --config key value: set system configuration option.
  --debug [on/off/value]: set debug level.
  --pause: wait for user input, time to attach debugger
  --locale [locale]: install locale for debugging (ie. en_US.UTF-8)
  --help-general: report detailed help on general options.


So you should be able to run :

gdalwarp --optfile text_file_with_src_files.txt target.tif

> 
> Yehiyam Livneh
> 
> 
> ***************************************************************************
> ******************* This message (including any attachments) issued by
> RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
> confidential information intended for a specific individual and purpose,
> may constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not the intended recipient, you
> should contact us immediately and thereafter delete this message from your
> system. You are hereby notified that any disclosure, copying,
> dissemination, distribution or forwarding of this message, or the taking
> of any action based on it, is strictly prohibited. If you have received
> this e-mail in error, please notify us immediately by e-mail
> mailto:lawraf at rafael.co.il and completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
> **************************************************************************
> ********************

From yehil at rafael.co.il  Sun Jul 22 11:42:24 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Sun, 22 Jul 2012 21:42:24 +0300
Subject: [gdal-dev] gdalwarp utility
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C81C5F3B89@MAILBOXSERVER.rf.local>

Even
that's a nice trick to know. I wasn't aware of this
Thanks
Yehiyam

Sent from my mobile


-----------------------------
From: "Even Rouault"
Subject: Re: [gdal-dev] gdalwarp utility
Date: 22 ???? 2012 20:34


Le dimanche 22 juillet 2012 16:28:48, Livneh Yehiyam a ?crit :
> Hi
> I've come upon a limitation of the gdalwarp utility under windows. When
> creating a mosaic from a large number of files from the command line, I
> ran into the limit of the command line length in windows (about 8000
> characters). I added the functionality of reading the source files from a
> txt file (similar to gdalbuildvrt -input_file_list option) to gdalwarp. I
> think it could benefit other users, and the symmetry of the API to add
> this to the official version.
>
> A patch against trunk is included.

Actually this is not needed (and there was not a real reason for -
input_file_list to exist in gdalbuildvrt too). All GDAL/OGR utilities have a
"--optfile filename" (note the double dash before optfile) option that uses the
lines of filename as arguments of the utility.

See :

$ gdalinfo --help-general
Generic GDAL utility command options:
  --version: report version of GDAL in use.
  --license: report GDAL license info.
  --formats: report all configured format drivers.
  --format [format]: details of one format.
  --optfile filename: expand an option file into the argument list.
  --config key value: set system configuration option.
  --debug [on/off/value]: set debug level.
  --pause: wait for user input, time to attach debugger
  --locale [locale]: install locale for debugging (ie. en_US.UTF-8)
  --help-general: report detailed help on general options.


So you should be able to run :

gdalwarp --optfile text_file_with_src_files.txt target.tif

>
> Yehiyam Livneh
>
>
> ***************************************************************************
> ******************* This message (including any attachments) issued by
> RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
> confidential information intended for a specific individual and purpose,
> may constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not the intended recipient, you
> should contact us immediately and thereafter delete this message from your
> system. You are hereby notified that any disclosure, copying,
> dissemination, distribution or forwarding of this message, or the taking
> of any action based on it, is strictly prohibited. If you have received
> this e-mail in error, please notify us immediately by e-mail
> mailto:lawraf at rafael.co.il and completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
> **************************************************************************
> ********************

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120722/fb4be62d/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Sun Jul 22 15:09:05 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 22 Jul 2012 22:09:05 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?New_OGR_driver_to_read_OpenStreetMap_=2Eosm_?=
	=?utf-8?q?/_=2Epbf=09files?=
References: <201207101923.32027.even.rouault@mines-paris.org>
	<loom.20120718T103317-371@post.gmane.org>
	<1342634961.5006fbd191cf6@imp.free.fr>
	<201207202010.16476.even.rouault@mines-paris.org>
Message-ID: <loom.20120723T000502-298@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> 
> 
> > > However, select with SQL feels sub-optimal.
> > 
> > Yes, when you use ogr2ogr with explicit layer names, there are
> > optimizations. For example, when you only specify the layer 'points', the
> > OSM driver will not even try to index the nodes into the temporary
> > database because it is not needed. However, as you noticed, there is not
> > yet any optimization when a SQL request is specified.
> > 
> 
> Optimization for SQL request added in r24690 

I had a try with r24696 today, downloaded from
http://gisinternals.com/sdk/Download.aspx?file=release-1500-gdal-mapserver.zip

Filtered commands give me errors. An example:
ogr2ogr -f "ESRI Shapefile" test germany.osm.pbf multipolygons -gt 20000
-progress --config OGR_SQLITE_SYNCHRONOUS OFF -where "natural='forest'"

ERROR 1: Failed inserting node 420797898: database schema has changed

Same error with Spatialite output.

-Jukka Rahkonen-




From taibc_coltech at yahoo.com  Sun Jul 22 23:32:45 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Sun, 22 Jul 2012 23:32:45 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpOZkeC8ZwsLiai2_4Tf9GiugXUyRmaZ7uiNSEirRHdwGRg@mail.gmail.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1342859817307-4989779.post@n6.nabble.com>
	<CAMKgpOZkeC8ZwsLiai2_4Tf9GiugXUyRmaZ7uiNSEirRHdwGRg@mail.gmail.com>
Message-ID: <1343025165502-4989973.post@n6.nabble.com>

Thanks Chaitanya,

I reported the error there. And waiting for answers.

Kind regards,

Tai



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4989973.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Mon Jul 23 00:51:14 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 23 Jul 2012 09:51:14 +0200
Subject: [gdal-dev] New OGR driver: Imageset
Message-ID: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>

Hi All,

We're thinking about implementing a new OGR driver which would represent a
set of images as a vector data source. The images are taken from any GPS
compatible mobile device, and each picture would be represented as a point
feature, the positions would be extracted from the exif information. The
file name and path would be provided as an attribute for each feature. This
data source could then be used by higher level apps to provide symbols at
the picture locations in the map and display the picture when the feature
is selected. The driver would definitely use GDAL to extract information
about the provided images.

I'm not sure whether we already have some kind of alternative solution to
this, let me know if you know about any. Further ideas about this topic
would also be helpful.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/c8360207/attachment.html>

From a.neumann at carto.net  Mon Jul 23 01:17:31 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 23 Jul 2012 10:17:31 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
Message-ID: <97eb238cf6790d974b77ea3501d26e69@carto.net>

 Hi Tamas,

 That would be interesting. So the user could specify a folder with 
 images and GDAL would create an OGR layer that would expose the photo 
 location? The OGR feature would have certain EXIF data exposed as 
 attributes?

 If you work on this, could you also expose other EXIF data, such as the 
 viewpoint coordinates, the image direction, the FOV or focal length, the 
 sensor size, etc. - this information could be used to create a field of 
 view angle of the picture.

 You can try this at http://www.geofoto.ch/geophotomap/index.svg where 
 you can click on a picture standpoint and the browser will display an 
 angle where the picture is looking at.

 I'd be interested in such a provider, as it would open a lot of 
 possibilities to display photo information in various applications.

 Are you aware of EXIFTOOL - the perl-script that allows getting and 
 setting image metadata, such as EXIF, IPTC, XMP, etc.? See 
 http://www.sno.phy.queensu.ca/~phil/exiftool/ - it is sort of the Swiss 
 Army Knife of photo metadata and one of the fewer apps that can also set 
 metadata - not just read.

 Andreas

 On Mon, 23 Jul 2012 09:51:14 +0200, Tamas Szekeres wrote:
> Hi All,
>
> We're thinking about implementing a new OGR driver which would
> represent a set of images as a vector data source. The images are
> taken from any GPS compatible mobile device, and each picture would 
> be
> represented as a point feature, the positions would be extracted from
> the exif information. The file name and path would be provided as an
> attribute for each feature. This data source could then be used by
> higher level apps to provide symbols at the picture locations in the
> map and display the picture when the feature is selected.?The driver
> would definitely use GDAL to extract information about the provided
> images.
>
> I'm not sure whether we already have some kind of alternative 
> solution
> to this, let me know if you know about any. Further ideas about this
> topic would also be helpful.?
>
> Best regards,
>
> Tamas

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From even.rouault at mines-paris.org  Mon Jul 23 01:48:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 23 Jul 2012 10:48:14 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
Message-ID: <201207231048.14475.even.rouault@mines-paris.org>

Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
> Hi All,
> 
> We're thinking about implementing a new OGR driver which would represent a
> set of images as a vector data source. The images are taken from any GPS
> compatible mobile device, and each picture would be represented as a point
> feature, the positions would be extracted from the exif information. The
> file name and path would be provided as an attribute for each feature. This
> data source could then be used by higher level apps to provide symbols at
> the picture locations in the map and display the picture when the feature
> is selected. The driver would definitely use GDAL to extract information
> about the provided images.
> 
> I'm not sure whether we already have some kind of alternative solution to
> this, let me know if you know about any. Further ideas about this topic
> would also be helpful.

The JPEG driver already exposes EXIF information if found :

$ gdalinfo ../autotest/gdrivers/data/albania.jpg
Driver: JPEG/JPEG JFIF
Files: ../autotest/gdrivers/data/albania.jpg
Size is 361, 260
Coordinate System is `'
Metadata:
[...]
  EXIF_GPSLatitude=(41) (1) (22.91)
  EXIF_GPSLatitudeRef=N
  EXIF_GPSLongitude=(19) (55) (42.35)
  EXIF_GPSLongitudeRef=E
[...]

$ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
Driver: GTiff/GeoTIFF
Files: ../autotest/gcore/data/exif_and_gps.tif
Size is 1, 1
Coordinate System is `'
[..]
Metadata (EXIF):
[...]
  EXIF_GPSLatitude=(77) (5) (60)
  EXIF_GPSLatitudeRef=S
  EXIF_GPSLongitude=(34) (12) (0)
  EXIF_GPSLongitudeRef=E
[..]

Are you thinking to other raster formats to extract EXIF info from? To my 
knowledge, the JPEG driver, and recently the GTiff driver, are the only one 
that extract EXIF for now. I see that the JPEG driver exposes it in the 
default metadata domain, whereas I chose EXIF for the GTiff driver. For GTiff, 
the specific EXIF metadata domain seemed better to me to avoid 'polluting' the 
default metadata domain, but I didn't want to change the JPEG driver at that 
point. But this would probably requires some harmonization.

So with some scripting, you could create for example a point shapefile, with 
the filename as attribute and GPS position as geometry.

In its syntax, this could be something similar to gdaltindex.

Doing that as a OGR driver would be also doable of course. The only point to 
solve is the definition of the connexion string to specify the image set.

> 
> Best regards,
> 
> Tamas

From szekerest at gmail.com  Mon Jul 23 02:09:09 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 23 Jul 2012 11:09:09 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <97eb238cf6790d974b77ea3501d26e69@carto.net>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<97eb238cf6790d974b77ea3501d26e69@carto.net>
Message-ID: <CACALY+SP_a4ctC7YRH=_o4W7_n5WDbS-NHYuLdrKr-UuGp=TDA@mail.gmail.com>

Hi Andreas,

Yes I wanted to expose further information, too. It could probably be user
configurable. The driver would be read only, the EXIF would be extracted by
using the corresponding GDAL drivers.
The site you refer to is very interesting,. This is something that we'd
like to achieve. It is also possible to render the symbols as the image
thumbnails by using the image file path attribute in the mapping
applications.

Best regards,

Tamas



2012/7/23 Andreas Neumann <a.neumann at carto.net>

> Hi Tamas,
>
> That would be interesting. So the user could specify a folder with images
> and GDAL would create an OGR layer that would expose the photo location?
> The OGR feature would have certain EXIF data exposed as attributes?
>
> If you work on this, could you also expose other EXIF data, such as the
> viewpoint coordinates, the image direction, the FOV or focal length, the
> sensor size, etc. - this information could be used to create a field of
> view angle of the picture.
>
> You can try this at http://www.geofoto.ch/**geophotomap/index.svg<http://www.geofoto.ch/geophotomap/index.svg>where you can click on a picture standpoint and the browser will display an
> angle where the picture is looking at.
>
> I'd be interested in such a provider, as it would open a lot of
> possibilities to display photo information in various applications.
>
> Are you aware of EXIFTOOL - the perl-script that allows getting and
> setting image metadata, such as EXIF, IPTC, XMP, etc.? See
> http://www.sno.phy.queensu.ca/**~phil/exiftool/<http://www.sno.phy.queensu.ca/~phil/exiftool/>- it is sort of the Swiss Army Knife of photo metadata and one of the fewer
> apps that can also set metadata - not just read.
>
> Andreas
>
>
> On Mon, 23 Jul 2012 09:51:14 +0200, Tamas Szekeres wrote:
>
>> Hi All,
>>
>> We're thinking about implementing a new OGR driver which would
>> represent a set of images as a vector data source. The images are
>> taken from any GPS compatible mobile device, and each picture would be
>> represented as a point feature, the positions would be extracted from
>> the exif information. The file name and path would be provided as an
>> attribute for each feature. This data source could then be used by
>> higher level apps to provide symbols at the picture locations in the
>> map and display the picture when the feature is selected. The driver
>> would definitely use GDAL to extract information about the provided
>> images.
>>
>> I'm not sure whether we already have some kind of alternative solution
>> to this, let me know if you know about any. Further ideas about this
>> topic would also be helpful.
>>
>> Best regards,
>>
>> Tamas
>>
>
> --
> --
> Andreas Neumann
> B?schacherstrasse 10A
> 8624 Gr?t (Gossau ZH)
> Switzerland
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/754e9295/attachment.html>

From benjamin.lux at maxsea.fr  Mon Jul 23 02:19:48 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Mon, 23 Jul 2012 02:19:48 -0700 (PDT)
Subject: [gdal-dev] Ogr: Difference betwen SQLexectue() and
 SetAttributFilter() ?
Message-ID: <1343035188332-4990004.post@n6.nabble.com>

Hi,

There is a difference betwen :

layer = ds.ExecuteSQL("SELECT * FROM MY_TABLE WHERE ID='my_id'", null, "");

And 

layer = ds.GetLayerByName("MY_TABLE");
layer.SetAttributeFilter("ID='my_id'");

?

When you fetch your feature with layer.getNextFeature(), there are numerous
request with the 2nd way ?

Links :
http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
http://www.gdal.org/ogr/classOGRLayer.html#acb2c6cc5fa3577df5be538284c1b0dde

Best regards,
Benjamin.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-Difference-betwen-SQLexectue-and-SetAttributFilter-tp4990004.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Mon Jul 23 02:27:01 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 23 Jul 2012 11:27:01 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <201207231048.14475.even.rouault@mines-paris.org>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
Message-ID: <CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>

Hi Even,

I just want to use the directory name to define the connection to the
images, we could also provide to scan the files in subdirectories if
needed. I would prefer to have a new driver not just an offline tool for
creating OGR datasets, in this case many existing applications (like
MapServer) would be capable to utilize this feature.
I could imagine a driver configuration file to specify which driver should
be used for a particular image format and where the specific information is
located, I don't require to harmonize the metadata structure at this time.
We should probably allow mixing jpegs and tiffs in the same directory, but
the configuration should specify how the similar attributes are provided by
each (sub)driver.

Best regards,

Tamas



2012/7/23 Even Rouault <even.rouault at mines-paris.org>

> Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
> > Hi All,
> >
> > We're thinking about implementing a new OGR driver which would represent
> a
> > set of images as a vector data source. The images are taken from any GPS
> > compatible mobile device, and each picture would be represented as a
> point
> > feature, the positions would be extracted from the exif information. The
> > file name and path would be provided as an attribute for each feature.
> This
> > data source could then be used by higher level apps to provide symbols at
> > the picture locations in the map and display the picture when the feature
> > is selected. The driver would definitely use GDAL to extract information
> > about the provided images.
> >
> > I'm not sure whether we already have some kind of alternative solution to
> > this, let me know if you know about any. Further ideas about this topic
> > would also be helpful.
>
> The JPEG driver already exposes EXIF information if found :
>
> $ gdalinfo ../autotest/gdrivers/data/albania.jpg
> Driver: JPEG/JPEG JFIF
> Files: ../autotest/gdrivers/data/albania.jpg
> Size is 361, 260
> Coordinate System is `'
> Metadata:
> [...]
>   EXIF_GPSLatitude=(41) (1) (22.91)
>   EXIF_GPSLatitudeRef=N
>   EXIF_GPSLongitude=(19) (55) (42.35)
>   EXIF_GPSLongitudeRef=E
> [...]
>
> $ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
> Driver: GTiff/GeoTIFF
> Files: ../autotest/gcore/data/exif_and_gps.tif
> Size is 1, 1
> Coordinate System is `'
> [..]
> Metadata (EXIF):
> [...]
>   EXIF_GPSLatitude=(77) (5) (60)
>   EXIF_GPSLatitudeRef=S
>   EXIF_GPSLongitude=(34) (12) (0)
>   EXIF_GPSLongitudeRef=E
> [..]
>
> Are you thinking to other raster formats to extract EXIF info from? To my
> knowledge, the JPEG driver, and recently the GTiff driver, are the only one
> that extract EXIF for now. I see that the JPEG driver exposes it in the
> default metadata domain, whereas I chose EXIF for the GTiff driver. For
> GTiff,
> the specific EXIF metadata domain seemed better to me to avoid 'polluting'
> the
> default metadata domain, but I didn't want to change the JPEG driver at
> that
> point. But this would probably requires some harmonization.
>
> So with some scripting, you could create for example a point shapefile,
> with
> the filename as attribute and GPS position as geometry.
>
> In its syntax, this could be something similar to gdaltindex.
>
> Doing that as a OGR driver would be also doable of course. The only point
> to
> solve is the definition of the connexion string to specify the image set.
>
> >
> > Best regards,
> >
> > Tamas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/5e825490/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Jul 23 03:04:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 23 Jul 2012 12:04:02 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
Message-ID: <201207231204.02745.even.rouault@mines-paris.org>

Le lundi 23 juillet 2012 11:27:01, Tamas Szekeres a ?crit :
> Hi Even,
> 
> I just want to use the directory name to define the connection to the
> images, we could also provide to scan the files in subdirectories if
> needed.

Do you imagine something like :

ogrinfo my_directory_with_images

or

ogrinfo IMAGESET:my_directory_with_images

The first syntax is convenient, but in the case the user isn't specifically 
interested in this driver, it could create performance problems if it 
GDALOpen() each file in the specified directory. There also could be a 
"competition" problem with, let's say, the shapefile or MITAB driver that also 
accept directory names : if the directory contains JPEG images, and also a 
shapefile or a .mif/.tab file, the new driver will not be used.

> I would prefer to have a new driver not just an offline tool for
> creating OGR datasets, in this case many existing applications (like
> MapServer) would be capable to utilize this feature.

Seems reasonable

> I could imagine a driver configuration file to specify which driver should
> be used for a particular image format

GDALOpen() should do it for you automatically. Unless you intend to have a 
list of known extensions, ".jpg", ".jpeg", ".tif", ".tiff" to avoid useless 
GDALOpen() attempts.

> and where the specific information is
> located, I don't require to harmonize the metadata structure at this time.

That could be an opportunity to do so. But you could just try exploring the 
contents of GetMetadata(NULL) and GetMetadata("EXIF") without caring which 
driver exposes the stuff in which domain. The code for both driver is the same 
and is located in gcore/gdalexif.cpp

From even.rouault at mines-paris.org  Mon Jul 23 03:11:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 23 Jul 2012 12:11:26 +0200
Subject: [gdal-dev] Ogr: Difference betwen SQLexectue() and
	SetAttributFilter() ?
In-Reply-To: <1343035188332-4990004.post@n6.nabble.com>
References: <1343035188332-4990004.post@n6.nabble.com>
Message-ID: <201207231211.26327.even.rouault@mines-paris.org>

Le lundi 23 juillet 2012 11:19:48, Benjamin a ?crit :
> Hi,
> 
> There is a difference betwen :
> 
> layer = ds.ExecuteSQL("SELECT * FROM MY_TABLE WHERE ID='my_id'", null, "");
> 
> And
> 
> layer = ds.GetLayerByName("MY_TABLE");
> layer.SetAttributeFilter("ID='my_id'");
> 
> ?

Short answer:

Generally, there should not be a visible difference between both syntax. There 
might be very subtle performance differences due to internal implementation 
details, but I doubt you could notice them. So use the one that is the most 
convenient for you.


Long answer :

For drivers that are not based on relational database manager, such as 
Shapefile, in both cases, the filter will be evaluated on "client-side" (there 
is no server side ;-))

For drivers such as PG, MySQL, SQLite, etc, the ExecuteSQL() is directly 
transfered to the database engine. But the SetAttributeFilter() is also used 
to synthetize a "SELECT * FROM the_table WHERE the_attribute_filter" 
internally, that is transfered to the database engine, so the performance will 
also be good.

From even.rouault at mines-paris.org  Mon Jul 23 03:27:27 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 23 Jul 2012 12:27:27 +0200
Subject: [gdal-dev]
 =?iso-8859-1?q?New_OGR_driver_to_read_OpenStreetMap_?=
 =?iso-8859-1?q?=2Eosm_/_=2Epbf=09files?=
In-Reply-To: <loom.20120723T000502-298@post.gmane.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201207202010.16476.even.rouault@mines-paris.org>
	<loom.20120723T000502-298@post.gmane.org>
Message-ID: <201207231227.28044.even.rouault@mines-paris.org>

Le lundi 23 juillet 2012 00:09:05, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > > > However, select with SQL feels sub-optimal.
> > > 
> > > Yes, when you use ogr2ogr with explicit layer names, there are
> > > optimizations. For example, when you only specify the layer 'points',
> > > the OSM driver will not even try to index the nodes into the temporary
> > > database because it is not needed. However, as you noticed, there is
> > > not yet any optimization when a SQL request is specified.
> > 
> > Optimization for SQL request added in r24690
> 
> I had a try with r24696 today, downloaded from
> http://gisinternals.com/sdk/Download.aspx?file=release-1500-gdal-mapserver.
> zip
> 
> Filtered commands give me errors. An example:
> ogr2ogr -f "ESRI Shapefile" test germany.osm.pbf multipolygons -gt 20000
> -progress --config OGR_SQLITE_SYNCHRONOUS OFF -where "natural='forest'"
> 
> ERROR 1: Failed inserting node 420797898: database schema has changed

I could also reproduce and I suppose there was at the begnning of the sequence 
of errors : "ERROR 1: Failed inserting node XXXX: I/O error"

It turned out that the mechanism to transfer the temporary in-memory DB file to 
disk when it is too big had been broken by a previous commit, so it stayed on 
RAM and at some point, it couldn't fit in RAM, hence the error. Should be fixed 
now with r24699.

I'm experimenting with removing the internal use of SQLite for the temporary 
database and replacing it with something custom. Actually, it won't replace it 
completely in all cases, but it could definitely be used in well-behaved cases 
where the elements in the .osm/.pbf are listed in increasing id order, which 
is the case of the data in geofabrik files for example. The first results seem 
to show increased performance.

Note: in your above example, you don't need to specify -gt and --config 
OGR_SQLITE_SYNCHRONOUS OFF when the output format is not sqlite/spatialite. 
And the internal use of SQLite in the OSM driver already sets the 
corresponding parameters to the values that give the best performance.


> 
> Same error with Spatialite output.
> 
> -Jukka Rahkonen-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nicolas.simon at spw.wallonie.be  Mon Jul 23 03:20:20 2012
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon, 23 Jul 2012 12:20:20 +0200
Subject: [gdal-dev] Oracle support available by default in any OSGeo software
Message-ID: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>

Hi , 
	I't very frustrating, each time I would like to use OSGeo software (GDAL/OGR, QGIS, ...) they don't support oracle database. Every time, everything should be recompiled from source with oracle support enabled. A long and not easy process... 

	The reason usually evoked for this situation, is that Oracle build needs Oracle files that aren't freely redistributable. Ok It's a good reason.

	I found a library, called OCILIB (<http://orclib.sourceforge.net/>), that enable your software to dynamically connect to your oracle database. This library does not require any oracle library to compile. It's available on any platform where oracle client is available and it licensed with LGPL.

	So it seems possible to create an OGR driver for Oracle, based on OCILIB, that doesn't require any Oracle copyrighted files.

	So what I propose is to develop, with the help of any volunteer, this kind of driver.
 
	But before going further, I would like to know if it seems to you a good way to have Oracle support available by default in any OSGeo software ?
   
	Depending of your answers, I 'll come back to ask you how it's the best way to do that ? 

Thanks a lot

Nicolas Simon



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/dcced34d/attachment.html>

From taibc_coltech at yahoo.com  Mon Jul 23 03:52:59 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 23 Jul 2012 03:52:59 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
Message-ID: <1343040779412-4990028.post@n6.nabble.com>


chaitanya_ch wrote
> 
> Tai,
> 
> GDAL needs GEOS to perform these geometry functions. Make sure you install
> that.
> 
> On Sat, Jul 21, 2012 at 12:19 PM, taibc &lt;taibc_coltech@&gt; wrote:
> 
> 

Hi Chaitanya,

I installed GEOS succesfful, and copy file geos.dll into my project. But I
still got the error: "GEOS support not enable" when using the method
"Within"

Are there something wrongs ?

Thanks and regards,

Tai



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990028.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Mon Jul 23 03:55:42 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 23 Jul 2012 11:55:42 +0100
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1343040779412-4990028.post@n6.nabble.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
Message-ID: <CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>

On 23 July 2012 11:52, taibc <taibc_coltech at yahoo.com> wrote:
> I installed GEOS succesfful, and copy file geos.dll into my project. But I
> still got the error: "GEOS support not enable" when using the method
> "Within"
>
> Are there something wrongs ?

You need to edit nmake.opt and rebuild GDAL.
Check this thread:
http://lists.osgeo.org/pipermail/gdal-dev/2010-March/023829.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From Michael.Smith at erdc.dren.mil  Mon Jul 23 03:56:12 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Mon, 23 Jul 2012 10:56:12 +0000
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
Message-ID: <CC32A609.3066C%michael.smith@erdc.dren.mil>

I'm finding that the new OSM Driver (I tested again with r24699) has a problem when working with the whole planet file. When I tried with the US Northeast subset, I got multipolygons and multilinestring entries. When reading the whole planet file, I did not. It gets to 70% and then ends (but without an error message). I also got fewer polygons than I was expecting. It seems like the reading got interrupted by some non reported error.

I was writing to Oracle for this importing but got the same results writing to sqlite. It seems that smaller extracts work fine but the are some reading issues with the whole planet file (in pbf format). I can try with the .osm format.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/b4a77cb4/attachment.html>

From even.rouault at mines-paris.org  Mon Jul 23 04:05:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 23 Jul 2012 13:05:02 +0200
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <CC32A609.3066C%michael.smith@erdc.dren.mil>
References: <CC32A609.3066C%michael.smith@erdc.dren.mil>
Message-ID: <201207231305.03033.even.rouault@mines-paris.org>

Le lundi 23 juillet 2012 12:56:12, Smith, Michael ERDC-RDE-CRREL-NH a ?crit :
> I'm finding that the new OSM Driver (I tested again with r24699) has a
> problem when working with the whole planet file. When I tried with the US
> Northeast subset, I got multipolygons and multilinestring entries. When
> reading the whole planet file, I did not. It gets to 70% and then ends
> (but without an error message). I also got fewer polygons than I was
> expecting. It seems like the reading got interrupted by some non reported
> error.
> 
> I was writing to Oracle for this importing but got the same results writing
> to sqlite. It seems that smaller extracts work fine but the are some
> reading issues with the whole planet file (in pbf format). I can try with
> the .osm format.

I didn't try yet with whole planet files. Takes too much time :-)

Which command line did you use exactly ?

Did it stop cleanly or with a segfault ? In the latter case, (assuming you are 
on Linux), running under gdb might be useful.

What is your OS, 32/64 bit ? Perhaps, you could add --debug on. I'd suggest 
redirecting standard error file to a file because the log file can be huge.

From chaitanya.ch at gmail.com  Mon Jul 23 05:02:41 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 23 Jul 2012 17:32:41 +0530
Subject: [gdal-dev] geotransform rotation and gdal_merge
In-Reply-To: <500C0AC0.6080102@gmail.com>
References: <500975CD.7050902@gmail.com>
	<CAMKgpOYmXpDrCyxLjE+mXFd5LofBFqB8oDSSaoq=58qy5MYG8w@mail.gmail.com>
	<500C0AC0.6080102@gmail.com>
Message-ID: <CAMKgpOYT=SU6QThLc=-14xs9D3eTEnr0KdLoR-uOKogBy6ZYtg@mail.gmail.com>

Dave,

The reason you have lat/lon values for each pixel is because they may not
be aligned exactly.
Even though it is not very 'efficient', you have to define the GCPs for
each pixel with the lat/lon values of that pixel. Then you use gdalwarp
while forcing use of these GCPs to combine all the images.

How are the lat/lon values stored?

On Sun, Jul 22, 2012 at 7:44 PM, David Hoese <dhoese at gmail.com> wrote:

>  Sure, pixels were probably not the best word to use. I have 15
> points(elements) per scan line per "variable" directly from an aircraft
> instrument.  So I might have a 15 element array of brightness temperatures,
> a 15 element array of latitudes corresponding to those points in the BT
> array, and another 15 element array of longitudes corresponding to those
> points in the BT array.  So the first element in the brightness
> temperature(BT[0]) array represents an area of the earth located at
> lon[0],lat[0] (I'm actually not sure if its the center of the area or the
> corner, but at the moment that doesn't matter).
>
> Does that make sense?
>
> -Dave
>
>
> On 7/21/12 9:46 AM, Chaitanya kumar CH wrote:
>
> Dave,
>
> You said that you have lat/lon values for each pixel. Can you explain?
>
> On Fri, Jul 20, 2012 at 8:44 PM, David Hoese <dhoese at gmail.com> wrote:
>
>>  I'm attempting to put aircraft scan data into geotiffs (1-3 scanlines
>> each) and then use gdal_merge.py to combine them into one large geotiff
>> that has the entire aircraft's path.  The scan lines are 15 pixels wide and
>> taken every 10 seconds, the geotiffs are wgs84 lat/lon, and I have lat/lon
>> values for each pixel.  To handle the case when the aircraft isn't flying
>> straight north I think I have to use the 2 rotation parameters in the
>> affine geotransform, is that right?  I don't have any test cases, but I
>> think if I don't use rotation anything that reads the geotiff will think
>> that the image is square(aligned) in lat/lon space.
>>
>> Whether or not I need to use this, can someone explain to me how to use
>> the rotation coefficients?  What are the actual values of the coefficients
>> supposed to be?  I couldn't find a good example and I couldn't get any
>> basic situations to make sense, like a 2x3 array turned 45 degrees.  I used
>> these equations:
>>
>>     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>>     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
>>
>>
>> And lastly, does gdal_merge.py handle rotation?  I checked the source and
>> it doesn't ever seem to use elements 2 and 4 in its calculations.
>>
>> Thanks for any help.
>>
>> -Dave
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/e80d713b/attachment-0001.html>

From ivan.lucena at princeton-ma.us  Mon Jul 23 05:26:54 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon, 23 Jul 2012 07:26:54 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?Oracle_support_available_by_default_in_?=
	=?iso-8859-1?q?any_OSGeo_software?=
In-Reply-To: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>
References: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>
Message-ID: <20120723122654.9324.qmail@s466.sureserver.com>

Hi Nicolas,

What operational system do you want to use?

Regards,

Ivan

>  -------Original Message-------
>  From: Nicolas Simon <nicolas.simon at spw.wallonie.be>
>  To: gdal-dev at lists.osgeo.org
>  Cc: vince.rogier at gmail.com
>  Subject: [gdal-dev] Oracle support available by default in any OSGeo software
>  Sent: Jul 23 '12 05:20
>  
>  Hi ,
>  I't very frustrating, each time I would like to use OSGeo software
>  (GDAL/OGR, QGIS, 
) they don't support oracle database. Every time,
>  everything should be recompiled from source with oracle support enabled. A
>  long and not easy process

>  
>  The reason usually evoked for this situation, is that Oracle build
>  needs Oracle files that aren't freely redistributable. Ok It's a good
>  reason.
>  
>  I found a library, called OCILIB (<[LINK:
>  http://orclib.sourceforge.net/] http://orclib.sourceforge.net/>), that
>  enable your software to dynamically connect to your oracle database. This
>  library does not require any oracle library to compile. It's available on
>  any platform where oracle client is available and it licensed with LGPL.
>  
>  So it seems possible to create an OGR driver for Oracle, based on
>  OCILIB, that doesn't require any Oracle copyrighted files.
>  
>  So what I propose is to develop, with the help of any volunteer,
>  this kind of driver.
>  
>  But before going further, I would like to know if it seems to you a
>  good way to have Oracle support available by default in any OSGeo software
>   
>  
>  
>  Depending of your answers, I 'll come back to ask you how it's the
>  best way to do that ?
>  
>  Thanks a lot
>  
>  Nicolas Simon
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dhoese at gmail.com  Mon Jul 23 06:00:11 2012
From: dhoese at gmail.com (David Hoese)
Date: Mon, 23 Jul 2012 08:00:11 -0500
Subject: [gdal-dev] geotransform rotation and gdal_merge
In-Reply-To: <CAMKgpOYT=SU6QThLc=-14xs9D3eTEnr0KdLoR-uOKogBy6ZYtg@mail.gmail.com>
References: <500975CD.7050902@gmail.com>
	<CAMKgpOYmXpDrCyxLjE+mXFd5LofBFqB8oDSSaoq=58qy5MYG8w@mail.gmail.com>
	<500C0AC0.6080102@gmail.com>
	<CAMKgpOYT=SU6QThLc=-14xs9D3eTEnr0KdLoR-uOKogBy6ZYtg@mail.gmail.com>
Message-ID: <500D4ADB.1000606@gmail.com>

Chaitanya,

I attempted a few small examples with GCPs and gdalwarp told me:
"ERROR 1: Failed to compute GCP transform: Transform is not solvable

I tried it with 2 GCPs at the sides from a 1x15 image array and another 
with every point's GCP defined, both failed with that error.  Sorry I 
forgot to mention this, I'll be using the python API and the data is 
provided as 3 numpy arrays, image/lat/lon. I've tried using rotation now 
then running it through gdalwarp which seems to work (although you lose 
a lot of data with the settings I was using).  And by work I mean that 
gdalwarp recognizes the rotation of the data and puts it into an 
aligned/square grid.  Another thing I may not have mentioned is that 
I'll eventually be putting this data into MapServer for WMS viewing.

If I'm not missing something, doesn't gdalwarp essentially do the same 
thing as gdal_merge.py, at least in this case?  It's even better if it 
actually uses the rotation in its calculations.

Also, I know the pixels won't be aligned exactly because the instrument 
is on an aircraft that's moving/turning.  It's more important that the 
data gets shown, not that its in the exact location.

-Dave

On 7/23/12 7:02 AM, Chaitanya kumar CH wrote:
> Dave,
>
> The reason you have lat/lon values for each pixel is because they may 
> not be aligned exactly.
> Even though it is not very 'efficient', you have to define the GCPs 
> for each pixel with the lat/lon values of that pixel. Then you use 
> gdalwarp while forcing use of these GCPs to combine all the images.
>
> How are the lat/lon values stored?


From Michael.Smith at usace.army.mil  Mon Jul 23 06:16:37 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Mon, 23 Jul 2012 13:16:37 +0000
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <201207231305.03033.even.rouault@mines-paris.org>
Message-ID: <CC32C653.25F50%michael.smith@usace.army.mil>

Even,

It stopped cleanly (no segfault) at 70%. OS is RHEL 6.2 64 bit. Import
time was about 340 min.

Command was 

ogr2ogr -progress -f oci oci:user/pass at tns:tmp planet-latest.osm.pbf -lco
dim=2 -lco srid=4326 -lco geometry_name=geometry -lco launder=yes

I'm rerunning now with the debug log to a file.

Mike

-- 
Michael Smith

Remote Sensing/GIS Center
US Army Corps of Engineers



On 7/23/12  7:05 AM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Le lundi 23 juillet 2012 12:56:12, Smith, Michael ERDC-RDE-CRREL-NH a
>?crit :
>> I'm finding that the new OSM Driver (I tested again with r24699) has a
>> problem when working with the whole planet file. When I tried with the
>>US
>> Northeast subset, I got multipolygons and multilinestring entries. When
>> reading the whole planet file, I did not. It gets to 70% and then ends
>> (but without an error message). I also got fewer polygons than I was
>> expecting. It seems like the reading got interrupted by some non
>>reported
>> error.
>> 
>> I was writing to Oracle for this importing but got the same results
>>writing
>> to sqlite. It seems that smaller extracts work fine but the are some
>> reading issues with the whole planet file (in pbf format). I can try
>>with
>> the .osm format.
>
>I didn't try yet with whole planet files. Takes too much time :-)
>
>Which command line did you use exactly ?
>
>Did it stop cleanly or with a segfault ? In the latter case, (assuming
>you are 
>on Linux), running under gdb might be useful.
>
>What is your OS, 32/64 bit ? Perhaps, you could add --debug on. I'd
>suggest 
>redirecting standard error file to a file because the log file can be
>huge.
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Jukka.Rahkonen at mmmtike.fi  Mon Jul 23 06:31:41 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon, 23 Jul 2012 13:31:41 +0000
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm /
	.pbf	files
In-Reply-To: <201207231227.28044.even.rouault@mines-paris.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201207202010.16476.even.rouault@mines-paris.org>
	<loom.20120723T000502-298@post.gmane.org>,
	<201207231227.28044.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6345C9A2@suutari.haapa.mmm.fi>

Even Rouault wrote:
23. hein?kuuta 2012 13:27

> Le lundi 23 juillet 2012 00:09:05, Jukka Rahkonen a ?crit :
>> Even Rouault <even.rouault <at> mines-paris.org> writes:
>> > > > However, select with SQL feels sub-optimal.
>> > >
>> > > Yes, when you use ogr2ogr with explicit layer names, there are
>> > > optimizations. For example, when you only specify the layer 'points',
>> > > the OSM driver will not even try to index the nodes into the temporary
>> > > database because it is not needed. However, as you noticed, there is
>> > > not yet any optimization when a SQL request is specified.
>> >
>> > Optimization for SQL request added in r24690
>
>> I had a try with r24696 today, downloaded from
>> http://gisinternals.com/sdk/Download.aspx?file=release-1500-gdal-mapserver.
>> zip
>>
>> Filtered commands give me errors. An example:
>> ogr2ogr -f "ESRI Shapefile" test germany.osm.pbf multipolygons -gt 20000
>> -progress --config OGR_SQLITE_SYNCHRONOUS OFF -where "natural='forest'"
>>
>> ERROR 1: Failed inserting node 420797898: database schema has changed

> I could also reproduce and I suppose there was at the begnning of the sequence
> of errors : "ERROR 1: Failed inserting node XXXX: I/O error"

Most probably yes but I saw only the last lines of the first thousand which were
printed on the screen.

> It turned out that the mechanism to transfer the temporary in-memory DB file to
> disk when it is too big had been broken by a previous commit, so it stayed on
> RAM and at some point, it couldn't fit in RAM, hence the error. Should be fixed
> now with r24699.

> I'm experimenting with removing the internal use of SQLite for the temporary
> database and replacing it with something custom. Actually, it won't replace it
> completely in all cases, but it could definitely be used in well-behaved cases
> where the elements in the .osm/.pbf are listed in increasing id order, which
> is the case of the data in geofabrik files for example. The first results seem
> to show increased performance.

> Note: in your above example, you don't need to specify -gt and --config
> OGR_SQLITE_SYNCHRONOUS OFF when the output format is not sqlite/spatialite.
> And the internal use of SQLite in the OSM driver already sets the
> corresponding parameters to the values that give the best performance.

Sure true with extra parametes, I just forgot to remove them when doing
a quick verification for seeing if the error occurs similarly for spatialite and 
shapefile outputs.

-Jukka-

From cjanssen at iavo-rs.com  Mon Jul 23 07:44:50 2012
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon, 23 Jul 2012 10:44:50 -0400
Subject: [gdal-dev] Coordinate Transformation issue
Message-ID: <CACDUkwL=6Ki715Qg0jpODf+u6LVHE2cM7Yy=cqu8v2Kf-K03+w@mail.gmail.com>

Hi,

I've been working with the OGR coordinate transformations for some time and
as long as I can remember, when calling the Transform function, no matter
what I'm transforming to or from I always need to convert the unit length
type of the Z component manually. For example, I've created a "from"
Coordinate System that is WGS84 Lat/Long METERS and a "to" Coordinate
System that is NAD83 State Plane North Carolina FEET. When I call the
Transform function, supplying all three components, the X and Y components
are transformed correctly while the Z component is left unchanged. I
realize that no vertical Datum transformation is done, which is fine, but
what's odd is that the Z value is still in the original meters and not in
feet. What I'm curious of is if this is intended result or am I doing
something wrong. The reason I'm asking is that version 1.9.0 started
converting the Z values for me (I noticed the changelog lists a change of
adding vertical unit support which I presume would be why it does this now)
but when I compiled 1.9.1 it seemed to revert back to its old ways of not
changing Z. It's probably an issue on my end but I was hoping someone could
help. If you need any additional information, just let me know. Thanks.

Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/cc472193/attachment.html>

From anton.korosov at nersc.no  Mon Jul 23 07:50:30 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Mon, 23 Jul 2012 16:50:30 +0200
Subject: [gdal-dev] how to create NETCDF with several 3D variables?
Message-ID: <500D64B6.8030109@nersc.no>

Dear list,

how to create a NetCDF file with several variables that have more than 
two dimensions?
I have to save time series of several fields (sst, chlorophyll, etc) in 
one file.

I found that in order to create one 3D variable I can add
NETCDF_DIM_EXTRA, NETCDF_DIM_time_DEF, NETCDF_DIM_time_VALUES to the 
metadata in a VRT file. Then I use 'gdal_translate -of NetCDF' or 
gdal.GetDriverByName('NetCDF').CreateCopy() to generate a .nc file.

However I cannot make several 3D variables!

Here are two VRTs. One works fine (one variable: 'sst', 3 dimentions: 
time, x, y). Another one produces two variables (chl, sst)  but time 
dimension is not added!
Is it possible to do it in theory?

I use the latest release of GDAL 2.0dev

With best regards and great thanks for the developers of the fantastic 
NetCDF driver!

Anton
-------------- next part --------------
<VRTDataset rasterXSize="4320" rasterYSize="2160">
  <SRS>GEOGCS["Clarke_1866",DATUM["Clarke_1866",SPHEROID["Clarke 1866",6378206.4,294.9786982139006]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]</SRS>
  <GeoTransform> -1.7999999491497874e+02,  8.3333335816860199e-02,  0.0000000000000000e+00,  9.0000002544373274e+01,  0.0000000000000000e+00, -8.3333335816860199e-02</GeoTransform>
  <Metadata>
    <MDI key="NETCDF_DIM_EXTRA">{time}</MDI>
    <MDI key="NETCDF_DIM_time_DEF">{3,6}</MDI>
    <MDI key="NETCDF_DIM_time_VALUES">{0,1,2}</MDI>
  </Metadata>
  <VRTRasterBand dataType="Int16" band="1">
    <Metadata>
      <MDI key="NETCDF_DIM_time">0</MDI>
      <MDI key="NETCDF_VARNAME">sst</MDI>
    </Metadata>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">gdal_test/alwdgg.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="4320" RasterYSize="2160" DataType="Int16" BlockXSize="4320" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
      <DstRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Int16" band="2">
    <Metadata>
      <MDI key="NETCDF_DIM_time">1</MDI>
      <MDI key="NETCDF_VARNAME">sst</MDI>
    </Metadata>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">gdal_test/alwdgg.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="4320" RasterYSize="2160" DataType="Int16" BlockXSize="4320" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
      <DstRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Int16" band="3">
    <Metadata>
      <MDI key="NETCDF_DIM_time">2</MDI>
      <MDI key="NETCDF_VARNAME">sst</MDI>
    </Metadata>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">gdal_test/alwdgg.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="4320" RasterYSize="2160" DataType="Int16" BlockXSize="4320" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
      <DstRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>
-------------- next part --------------
<VRTDataset rasterXSize="4320" rasterYSize="2160">
  <SRS>GEOGCS["Clarke_1866",DATUM["Clarke_1866",SPHEROID["Clarke 1866",6378206.4,294.9786982139006]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]</SRS>
  <GeoTransform> -1.7999999491497874e+02,  8.3333335816860199e-02,  0.0000000000000000e+00,  9.0000002544373274e+01,  0.0000000000000000e+00, -8.3333335816860199e-02</GeoTransform>
  <Metadata>
    <MDI key="NETCDF_DIM_EXTRA">{time}</MDI>
    <MDI key="NETCDF_DIM_time_DEF">{0,6}</MDI>
    <MDI key="NETCDF_DIM_time_VALUES">0</MDI>
  </Metadata>
  <VRTRasterBand dataType="Int16" band="1">
    <Metadata>
      <MDI key="NETCDF_DIM_time">0</MDI>
      <MDI key="NETCDF_VARNAME">sst</MDI>
    </Metadata>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">gdal_test/alwdgg.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="4320" RasterYSize="2160" DataType="Int16" BlockXSize="4320" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
      <DstRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Int16" band="2">
    <Metadata>
      <MDI key="NETCDF_DIM_time">0</MDI>
      <MDI key="NETCDF_VARNAME">chl</MDI>
    </Metadata>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">gdal_test/alwdgg.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="4320" RasterYSize="2160" DataType="Int16" BlockXSize="4320" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
      <DstRect xOff="0" yOff="0" xSize="4320" ySize="2160" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

From daniel.clewley at gmail.com  Mon Jul 23 08:16:30 2012
From: daniel.clewley at gmail.com (Daniel Clewley)
Date: Mon, 23 Jul 2012 08:16:30 -0700
Subject: [gdal-dev] New OGR driver: Imageset (Tamas Szekeres)
Message-ID: <500D6ACE.8030302@gmail.com>

Hi Tamas,

Sounds like a great idea. I don't know if it's of use but I recently put 
together a python script to create KMZ files of geotagged photos using 
the Python Imaging Library to read EXIF data. It also exports a list of 
photos and coordinates as a CSV file, for loading into a GIS. You could 
use OGR to output a vector data source instead.

The script can be downloaded from here:

http://dropbox.aber.ac.uk/?KJHsTqst

Thanks,

Dan

On Mon, 23 Jul 2012 09:51:14 +0200, Tamas Szekeres wrote:

 > Hi All,
 >
 > We're thinking about implementing a new OGR driver which would
 > represent a set of images as a vector data source. The images are
 > taken from any GPS compatible mobile device, and each picture would be
 > represented as a point feature, the positions would be extracted from
 > the exif information. The file name and path would be provided as an
 > attribute for each feature. This data source could then be used by
 > higher level apps to provide symbols at the picture locations in the
 > map and display the picture when the feature is selected. The driver
 > would definitely use GDAL to extract information about the provided
 > images.
 >
 > I'm not sure whether we already have some kind of alternative solution
 > to this, let me know if you know about any. Further ideas about this
 > topic would also be helpful.
 >
 > Best regards,
 >
 > Tamas
 >


From dmorissette at mapgears.com  Mon Jul 23 08:26:31 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 23 Jul 2012 11:26:31 -0400
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
Message-ID: <500D6D27.5040302@mapgears.com>

If I understand correctly, in the Open() call, this driver would open 
each image file to read its EXIF info and index the files in memory? 
This would work fine with a dozen images, but as the number of images 
increases the performance will suffer a lot and this would become 
unusable in apps such as MapServer, and even for Desktop apps with 
hundreds of images.

If I needed this kind of functionality myself I would use a script to 
create an OGR point file as suggested by Even, to avoid the overhead 
caused by opening all the images.

My 0.02$

Daniel


On 12-07-23 5:27 AM, Tamas Szekeres wrote:
> Hi Even,
>
> I just want to use the directory name to define the connection to the
> images, we could also provide to scan the files in subdirectories if
> needed. I would prefer to have a new driver not just an offline tool for
> creating OGR datasets, in this case many existing applications (like
> MapServer) would be capable to utilize this feature.
> I could imagine a driver configuration file to specify which driver
> should be used for a particular image format and where the specific
> information is located, I don't require to harmonize the metadata
> structure at this time. We should probably allow mixing jpegs and tiffs
> in the same directory, but the configuration should specify how the
> similar attributes are provided by each (sub)driver.
>
> Best regards,
>
> Tamas
>
>
>
> 2012/7/23 Even Rouault <even.rouault at mines-paris.org
> <mailto:even.rouault at mines-paris.org>>
>
>     Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>      > Hi All,
>      >
>      > We're thinking about implementing a new OGR driver which would
>     represent a
>      > set of images as a vector data source. The images are taken from
>     any GPS
>      > compatible mobile device, and each picture would be represented
>     as a point
>      > feature, the positions would be extracted from the exif
>     information. The
>      > file name and path would be provided as an attribute for each
>     feature. This
>      > data source could then be used by higher level apps to provide
>     symbols at
>      > the picture locations in the map and display the picture when the
>     feature
>      > is selected. The driver would definitely use GDAL to extract
>     information
>      > about the provided images.
>      >
>      > I'm not sure whether we already have some kind of alternative
>     solution to
>      > this, let me know if you know about any. Further ideas about this
>     topic
>      > would also be helpful.
>
>     The JPEG driver already exposes EXIF information if found :
>
>     $ gdalinfo ../autotest/gdrivers/data/albania.jpg
>     Driver: JPEG/JPEG JFIF
>     Files: ../autotest/gdrivers/data/albania.jpg
>     Size is 361, 260
>     Coordinate System is `'
>     Metadata:
>     [...]
>        EXIF_GPSLatitude=(41) (1) (22.91)
>        EXIF_GPSLatitudeRef=N
>        EXIF_GPSLongitude=(19) (55) (42.35)
>        EXIF_GPSLongitudeRef=E
>     [...]
>
>     $ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
>     Driver: GTiff/GeoTIFF
>     Files: ../autotest/gcore/data/exif_and_gps.tif
>     Size is 1, 1
>     Coordinate System is `'
>     [..]
>     Metadata (EXIF):
>     [...]
>        EXIF_GPSLatitude=(77) (5) (60)
>        EXIF_GPSLatitudeRef=S
>        EXIF_GPSLongitude=(34) (12) (0)
>        EXIF_GPSLongitudeRef=E
>     [..]
>
>     Are you thinking to other raster formats to extract EXIF info from?
>     To my
>     knowledge, the JPEG driver, and recently the GTiff driver, are the
>     only one
>     that extract EXIF for now. I see that the JPEG driver exposes it in the
>     default metadata domain, whereas I chose EXIF for the GTiff driver.
>     For GTiff,
>     the specific EXIF metadata domain seemed better to me to avoid
>     'polluting' the
>     default metadata domain, but I didn't want to change the JPEG driver
>     at that
>     point. But this would probably requires some harmonization.
>
>     So with some scripting, you could create for example a point
>     shapefile, with
>     the filename as attribute and GPS position as geometry.
>
>     In its syntax, this could be something similar to gdaltindex.
>
>     Doing that as a OGR driver would be also doable of course. The only
>     point to
>     solve is the definition of the connexion string to specify the image
>     set.
>
>      >
>      > Best regards,
>      >
>      > Tamas
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000




From nicolas.simon at spw.wallonie.be  Mon Jul 23 08:38:44 2012
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon, 23 Jul 2012 17:38:44 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <500D6D27.5040302@mapgears.com>
Message-ID: <94D09947F0049948855245E630E6FA4E0118184D@si0140.mrw.wallonie.int>

Hi 
	For me it looks like a variant of gdaltindex with input made from specials fields (EXIF data).
	Output (shapefile for instance) could be translated into whatever you want through ogr2ogr.
	
	Regards

	Nicolas 
	  
-----Message d'origine-----
De : gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org]De la part de Daniel Morissette
Envoy? : lundi 23 juillet 2012 17:27
? : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] New OGR driver: Imageset


If I understand correctly, in the Open() call, this driver would open 
each image file to read its EXIF info and index the files in memory? 
This would work fine with a dozen images, but as the number of images 
increases the performance will suffer a lot and this would become 
unusable in apps such as MapServer, and even for Desktop apps with 
hundreds of images.

If I needed this kind of functionality myself I would use a script to 
create an OGR point file as suggested by Even, to avoid the overhead 
caused by opening all the images.

My 0.02$

Daniel


On 12-07-23 5:27 AM, Tamas Szekeres wrote:
> Hi Even,
>
> I just want to use the directory name to define the connection to the
> images, we could also provide to scan the files in subdirectories if
> needed. I would prefer to have a new driver not just an offline tool for
> creating OGR datasets, in this case many existing applications (like
> MapServer) would be capable to utilize this feature.
> I could imagine a driver configuration file to specify which driver
> should be used for a particular image format and where the specific
> information is located, I don't require to harmonize the metadata
> structure at this time. We should probably allow mixing jpegs and tiffs
> in the same directory, but the configuration should specify how the
> similar attributes are provided by each (sub)driver.
>
> Best regards,
>
> Tamas
>
>
>
> 2012/7/23 Even Rouault <even.rouault at mines-paris.org
> <mailto:even.rouault at mines-paris.org>>
>
>     Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>      > Hi All,
>      >
>      > We're thinking about implementing a new OGR driver which would
>     represent a
>      > set of images as a vector data source. The images are taken from
>     any GPS
>      > compatible mobile device, and each picture would be represented
>     as a point
>      > feature, the positions would be extracted from the exif
>     information. The
>      > file name and path would be provided as an attribute for each
>     feature. This
>      > data source could then be used by higher level apps to provide
>     symbols at
>      > the picture locations in the map and display the picture when the
>     feature
>      > is selected. The driver would definitely use GDAL to extract
>     information
>      > about the provided images.
>      >
>      > I'm not sure whether we already have some kind of alternative
>     solution to
>      > this, let me know if you know about any. Further ideas about this
>     topic
>      > would also be helpful.
>
>     The JPEG driver already exposes EXIF information if found :
>
>     $ gdalinfo ../autotest/gdrivers/data/albania.jpg
>     Driver: JPEG/JPEG JFIF
>     Files: ../autotest/gdrivers/data/albania.jpg
>     Size is 361, 260
>     Coordinate System is `'
>     Metadata:
>     [...]
>        EXIF_GPSLatitude=(41) (1) (22.91)
>        EXIF_GPSLatitudeRef=N
>        EXIF_GPSLongitude=(19) (55) (42.35)
>        EXIF_GPSLongitudeRef=E
>     [...]
>
>     $ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
>     Driver: GTiff/GeoTIFF
>     Files: ../autotest/gcore/data/exif_and_gps.tif
>     Size is 1, 1
>     Coordinate System is `'
>     [..]
>     Metadata (EXIF):
>     [...]
>        EXIF_GPSLatitude=(77) (5) (60)
>        EXIF_GPSLatitudeRef=S
>        EXIF_GPSLongitude=(34) (12) (0)
>        EXIF_GPSLongitudeRef=E
>     [..]
>
>     Are you thinking to other raster formats to extract EXIF info from?
>     To my
>     knowledge, the JPEG driver, and recently the GTiff driver, are the
>     only one
>     that extract EXIF for now. I see that the JPEG driver exposes it in the
>     default metadata domain, whereas I chose EXIF for the GTiff driver.
>     For GTiff,
>     the specific EXIF metadata domain seemed better to me to avoid
>     'polluting' the
>     default metadata domain, but I didn't want to change the JPEG driver
>     at that
>     point. But this would probably requires some harmonization.
>
>     So with some scripting, you could create for example a point
>     shapefile, with
>     the filename as attribute and GPS position as geometry.
>
>     In its syntax, this could be something similar to gdaltindex.
>
>     Doing that as a OGR driver would be also doable of course. The only
>     point to
>     solve is the definition of the connexion string to specify the image
>     set.
>
>      >
>      > Best regards,
>      >
>      > Tamas
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev





From eadam at co.lincoln.or.us  Mon Jul 23 08:44:28 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 23 Jul 2012 08:44:28 -0700
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <500D6D27.5040302@mapgears.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
	<500D6D27.5040302@mapgears.com>
Message-ID: <CACqBkM-B84pTdTBSdcG7KzEkZ1gm-Qo36=CT8Ja8ogsgGDguSw@mail.gmail.com>

At one point I used GDAL's ability to access EXIF data along with sed
and bash to make a shapefile photo index, like ogrtindex but for
photos and points rather than geo-rasters and polygons.  It worked ok
but had precision issues and I stopped working on it when I found
GPSPrune, http://activityworkshop.net/software/gpsprune/index.html,
which did what I wanted but better.

I think that this would be a useful utility.

Eli

On Mon, Jul 23, 2012 at 8:26 AM, Daniel Morissette
<dmorissette at mapgears.com> wrote:
> If I understand correctly, in the Open() call, this driver would open each
> image file to read its EXIF info and index the files in memory? This would
> work fine with a dozen images, but as the number of images increases the
> performance will suffer a lot and this would become unusable in apps such as
> MapServer, and even for Desktop apps with hundreds of images.
>
> If I needed this kind of functionality myself I would use a script to create
> an OGR point file as suggested by Even, to avoid the overhead caused by
> opening all the images.
>
> My 0.02$
>
> Daniel
>
>
>
> On 12-07-23 5:27 AM, Tamas Szekeres wrote:
>>
>> Hi Even,
>>
>> I just want to use the directory name to define the connection to the
>> images, we could also provide to scan the files in subdirectories if
>> needed. I would prefer to have a new driver not just an offline tool for
>> creating OGR datasets, in this case many existing applications (like
>> MapServer) would be capable to utilize this feature.
>> I could imagine a driver configuration file to specify which driver
>> should be used for a particular image format and where the specific
>> information is located, I don't require to harmonize the metadata
>> structure at this time. We should probably allow mixing jpegs and tiffs
>> in the same directory, but the configuration should specify how the
>> similar attributes are provided by each (sub)driver.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2012/7/23 Even Rouault <even.rouault at mines-paris.org
>> <mailto:even.rouault at mines-paris.org>>
>>
>>
>>     Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>>      > Hi All,
>>      >
>>      > We're thinking about implementing a new OGR driver which would
>>     represent a
>>      > set of images as a vector data source. The images are taken from
>>     any GPS
>>      > compatible mobile device, and each picture would be represented
>>     as a point
>>      > feature, the positions would be extracted from the exif
>>     information. The
>>      > file name and path would be provided as an attribute for each
>>     feature. This
>>      > data source could then be used by higher level apps to provide
>>     symbols at
>>      > the picture locations in the map and display the picture when the
>>     feature
>>      > is selected. The driver would definitely use GDAL to extract
>>     information
>>      > about the provided images.
>>      >
>>      > I'm not sure whether we already have some kind of alternative
>>     solution to
>>      > this, let me know if you know about any. Further ideas about this
>>     topic
>>      > would also be helpful.
>>
>>     The JPEG driver already exposes EXIF information if found :
>>
>>     $ gdalinfo ../autotest/gdrivers/data/albania.jpg
>>     Driver: JPEG/JPEG JFIF
>>     Files: ../autotest/gdrivers/data/albania.jpg
>>     Size is 361, 260
>>     Coordinate System is `'
>>     Metadata:
>>     [...]
>>        EXIF_GPSLatitude=(41) (1) (22.91)
>>        EXIF_GPSLatitudeRef=N
>>        EXIF_GPSLongitude=(19) (55) (42.35)
>>        EXIF_GPSLongitudeRef=E
>>     [...]
>>
>>     $ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
>>     Driver: GTiff/GeoTIFF
>>     Files: ../autotest/gcore/data/exif_and_gps.tif
>>     Size is 1, 1
>>     Coordinate System is `'
>>     [..]
>>     Metadata (EXIF):
>>     [...]
>>        EXIF_GPSLatitude=(77) (5) (60)
>>        EXIF_GPSLatitudeRef=S
>>        EXIF_GPSLongitude=(34) (12) (0)
>>        EXIF_GPSLongitudeRef=E
>>     [..]
>>
>>     Are you thinking to other raster formats to extract EXIF info from?
>>     To my
>>     knowledge, the JPEG driver, and recently the GTiff driver, are the
>>     only one
>>     that extract EXIF for now. I see that the JPEG driver exposes it in
>> the
>>     default metadata domain, whereas I chose EXIF for the GTiff driver.
>>     For GTiff,
>>     the specific EXIF metadata domain seemed better to me to avoid
>>     'polluting' the
>>     default metadata domain, but I didn't want to change the JPEG driver
>>     at that
>>     point. But this would probably requires some harmonization.
>>
>>     So with some scripting, you could create for example a point
>>     shapefile, with
>>     the filename as attribute and GPS position as geometry.
>>
>>     In its syntax, this could be something similar to gdaltindex.
>>
>>     Doing that as a OGR driver would be also doable of course. The only
>>     point to
>>     solve is the definition of the connexion string to specify the image
>>     set.
>>
>>      >
>>      > Best regards,
>>      >
>>      > Tamas
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From benjamin.lux at maxsea.fr  Mon Jul 23 09:01:26 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Mon, 23 Jul 2012 09:01:26 -0700 (PDT)
Subject: [gdal-dev] Ogr: ExecuteSQL with MSSQL and geometry column
In-Reply-To: <1342787642374-4989636.post@n6.nabble.com>
References: <1342535828384-4988831.post@n6.nabble.com>
	<CAMKgpObz=LmVKCAyyn_FOfqbkxPvT2mOvVpxTsE3e7TO=YRKnA@mail.gmail.com>
	<CAMKgpOaz5Z_H2hJccg10joBmxoitOtsoEydhQfvpDVZ7LH9k8w@mail.gmail.com>
	<2D6A931F6E6D04498055060E3B5F00A8070DE3B3@maxseamail.informatique-mer.fr>
	<CAMKgpOZkgrK+1hQF+FvYx=-YCAKPxP_=xDNOfkbHr3Q_+TeByQ@mail.gmail.com>
	<1342787642374-4989636.post@n6.nabble.com>
Message-ID: <1343059286738-4990130.post@n6.nabble.com>

Now, I am able to answer to me.

Correct me if I am wrong but :

With the MSSQL Driver ,when you execute a statment with SQLExecute() the
result is a table without geometry field.
Then the in the layer give by "SELECT *  FROM my_table WHERE CHART_ID =
'my_id'" the geometry column is consider as a simple field like another.

In fact, you can see this field by .GetField(int i), and you can't see a
geometric field like that.

So to have a geometric field I have to use :
DataSource.GetLayerByName("my_table").SetAttributFilter("CHART_ID =
'my_id'")

I don't know if it is as efficient as a SELECT statment, but it work fine !

Thank to all your answers !

Best regards,
Benjamin.


Benjamin wrote
> 
> If you want I can remove the MemoryDriver, but it is still the same thing.
> 
> [code]
> string request = "SELECT *  FROM MY_TABLE WHERE CHART_ID = 'Z15F43AJ'";
> Layer serverLayer = RclDataSource.ExecuteSQL(request, null, "");
> 
> int nbFeature = serverLayer.GetFeatureCount(1);
> Feature serverFeature = serverLayer.GetNextFeature();
> string[] namesColumnsArray = new string[3];
> for (int i = 0; i < serverFeature.GetFieldCount(); i++)
>     namesColumnsArray[i] = serverFeature.GetFieldDefnRef(i).GetName();
> Geometry serverGeometry = serverFeature.GetGeometryRef();
> [/code]
> 
> Results:
>     nbFeature = 39
>     namesColumnsArray = { D , CHART_ID, WKB_GEOMETRY }
>     serverGeometry = null
> 
> 
> For me the fact is that the result of the SQL request is a layer without
> geometry field, just 3 usuals fields.
> I suppose that is normal because if you ask for a request like :
> "Select column_geo1, column_geo2
> From Table1, Table2"
> Unless I am wrong, you can't have 2 geometrics fields in a layer.
> 
> For me this result is normal (but I am a beginner with ogr so maybe not).
> 
> Reminder : I just want fetch my geometry.
> 
> In any cases, thank for all you reply Chaitanya_ch.
> 
> Benjamin.
> 
> 
> chaitanya_ch wrote
>> 
>> Benjamin,
>> 
>> First thing: You don't need to use a memory datasource here. OGR doesn't
>> make round trips to the database server every time you run
>> GetNextFeature(). Do that first. I'm sure it will make it less
>> complicated.
>> 
>> I don't understand why you are getting the null. Hopefully we can figure
>> that out after you simplify your code by removing the memory driver
>> stuff.
>> 
>> On Wed, Jul 18, 2012 at 8:52 PM, Benjamin LUX &lt;Benjamin.lux@&gt;wrote:
>> 
>>> Hi again Chaitanya,****
>>>
>>> ** **
>>>
>>> If you look my previous mail you can see the code.****
>>>
>>> But in a compact way this is a copy/paste of my running code.****
>>>
>>> Note that RoleEnvironment.GetConfigurationSettingValue(?****?) just
>>> provide me parametrables strings (like argv[n]).****
>>>
>>> [code]****
>>>
>>> Ogr.RegisterAll();****
>>>
>>> string option = String.Format(
>>> "Tables=dbo.{0}(WKB_GEOMETRY);GeometryFormat=wkb;",****
>>>
>>>                 RoleEnvironment.GetConfigurationSettingValue(
>>> "CatalogueRclAllName")****
>>>
>>>                 );****
>>>
>>> RclDataSource = Ogr.Open(String.Format("MSSQL:{0}{1}", RoleEnvironment
>>> .GetConfigurationSettingValue("DataBaseConnectionString"), option),
>>> 0);***
>>> *
>>>
>>> string request = String.Format("SELECT *  FROM {0} WHERE CHART_ID =
>>> '{1}'"
>>> ,****
>>>
>>> RoleEnvironment.GetConfigurationSettingValue("CatalogueRclAllName"),****
>>>
>>> "Z15F43AJ");****
>>>
>>> ** **
>>>
>>> Layer serverLayer = RclDataSource.ExecuteSQL(request, null, "");****
>>>
>>> ** **
>>>
>>> Driver memDriver = Ogr.GetDriverByName("Memory");****
>>>
>>> DataSource memDataSource = memDriver.CreateDataSource(GetWorkPath(
>>> "nomimprobale"), null);****
>>>
>>> Layer memLayer = memDataSource.CopyLayer(serverLayer,
>>> serverLayer.GetName(), null);****
>>>
>>> Feature memFeature = memLayer.GetNextFeature();****
>>>
>>> string[] namesColumnsArray = new string[5];****
>>>
>>> for (int i = 0; i < memFeature.GetFieldCount(); i++)****
>>>
>>> namesColumnsArray[i] = memFeature.GetFieldDefnRef(i).GetName();****
>>>
>>> Geometry memGeometry = memFeature.GetGeometryRef(); ****
>>>
>>> [/code]****
>>>
>>> ** **
>>>
>>> Results :****
>>>
>>>                 namesColumnsArray = { D , CHART_ID, WKB_GEOMETRY }****
>>>
>>>                 memGeometry = null****
>>>
>>> ** **
>>>
>>> I don?t see what I can add to this :/****
>>>
>>> If you want more details said me.****
>>>
>>> ** **
>>>
>>> Link to the thread :
>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>>> ****
>>>
>>> ** **
>>>
>>> Best regards,****
>>>
>>> Benjamin****
>>>
>>> ** **
>>>
>>> *De :* Chaitanya kumar CH [mailto:chaitanya.ch@]
>>> *Envoy? :* mercredi 18 juillet 2012 16:53
>>> *? :* Benjamin LUX
>>> *Cc :* gdal dev
>>> *Objet :* Re: Ogr: ExecuteSQL with MSSQL and geometry column****
>>>
>>> ** **
>>>
>>> Hi Benjamin,
>>>
>>> Can you provide some more details?
>>> How did you try to retrieve the geometry?****
>>>
>>> On Wed, Jul 18, 2012 at 8:02 PM, &lt;benjamin.lux@&gt; wrote:****
>>>
>>> 
>> Benjamin wrote
>>> 
>>>> memFeature.GetGeometryRef();          // return null
>>>> 
>>>
>>> Sorry, but no.
>>> After a call to SQLExecute(), Ogr framwork doesn't recognize any
>>> geometry
>>> in my feature.
>>> If you have a clue why that ?
>>>
>>> 
>> chaitanya_ch wrote
>>> ****
>>>>
>>>> Benjamin,
>>>>
>>>> The mssql driver already does the conversion from wkb in the database
>>>> to
>>>> the native ogr geometry format. You don't have to create a temporary
>>>> wkb
>>>> geometry and then the ogr geometry.
>>>>
>>>> You can simply do this:
>>>> [code]
>>>> Geometry memGeom = memFeature.GetGeometryRef()
>>>> [/code]
>>>>
>>>> On Wed, Jul 18, 2012 at 6:31 PM, Benjamin &lt;benjamin.lux@&gt; wrote:
>>>>
>>>> > Sorry, I was not clear.
>>>> >
>>>> > I resume from the beginning.
>>>> >
>>>> > I work with a warper C# of Ogr.
>>>> > I have a table dbo.MY_TABLE with 3 fields (D, CHART_ID, WKB_GEOMETRY)
>>>> in
>>>> a
>>>> > SQL server Database (in SQL Azure exactly).
>>>> >
>>>> > *My aim is to work with a copy* (in a
>>>> > http://www.gdal.org/ogr/drv_memory.html Memory DataSource ) of a SQL
>>>> > statement result executed on a MSSQL DataSource.
>>>> >
>>>> > Actually I can work with usuals methods with this MSSQL DataSource.
>>>> > Note that I have not geometry_column table in my SQL Serveur
>>>> DataBase, I
>>>> > use
>>>> > http://www.gdal.org/ogr/drv_mssqlspatial.html driver options .
>>>> >
>>>> > [code]
>>>> > string driverOptions =
>>>> > "Tables=dbo.MY_TABLE(WKB_GEOMETRY);GeometryFormat=wkb;"
>>>> > serverDataSource = Ogr.Open("MSSQL:" + connectionString +
>>>> driverOptions),
>>>> > 0);
>>>> >
>>>> > serveurDataSource.GetLayerCount(); // It works fine.
>>>> > [/code]
>>>> >
>>>> > So I tried a call to
>>>> >
>>>> >
>>>> http://www.gdal.org/ogr/classOGRDataSource.html#aa6acc228db6513784a56ce12334a8c33
>>>> > SQLExecute() .
>>>> > [code]
>>>> > string request = "*SELECT * FROM MY_TABLE WHERE CHART_ID = 'ID'*"
>>>> > Layer serverLayer = serverDataSource.ExecuteSQL(request, null, "");
>>>> > [/code]
>>>> >
>>>> > But unfortunately, I have not geometry field in the result.
>>>> > [code]
>>>> > serveurLayer.GetGeometryColumn();  //*return ""*
>>>> > serveurLayer.GetGeomType();          //*return wkbUnknown*
>>>> > [/code]
>>>> >
>>>> > But I have my 3 fields in serveurLayer !
>>>> > [code]
>>>> > serverLayer.GetLayerDefn().GetFieldCount();                //return 3
>>>> > serverLayer.GetLayerDefn().GetFieldDefn(0).GetName(); //return "D"
>>>> > serverLayer.GetLayerDefn().GetFieldDefn(1).GetName(); //return
>>>> "CHART_ID"
>>>> > serverLayer.GetLayerDefn().GetFieldDefn(2).GetName(); //*return
>>>> > "WKB_GEOMETRY"*
>>>> > [/code]
>>>> >
>>>> > So I want to copy this layer in a Memory Layer to minimise acces to
>>>> my
>>>> SQL
>>>> > Server and work faster.
>>>> > [code]
>>>> > Driver memDriver = Ogr.GetDriverByName("Memory");
>>>> > DataSource memDataSource =
>>>> > memDriver.CreateDataSource(GetWorkPath("nomimprobale"), null);
>>>> > Layer memLayer = memDataSource.CopyLayer(serverLayer, layerName,
>>>> null);
>>>> > [/code]
>>>> >
>>>> >
>>>> > Now,* I have to fetch my geometries*, so have thought to a trick like
>>>> this
>>>> > :
>>>> > [code]
>>>> > byte[] memWkb =
>>>> >
>>>> >
>>>> System.Text.Encoding.UTF8.GetBytes(memFeature.GetFieldAsString("WKB_GEOMETRY"));
>>>> > Geometry memGeom = Geometry.CreateFromWkb(memWkb);
>>>> > [/code]
>>>> > Because I can't use memFeature.GetGeometryRef()
>>>> > [code]
>>>> > memFeature.GetLayerCount();                                // return
>>>> 39
>>>> > Feature memFeature = memLayer.GetNextFeature();  // don't return null
>>>> > memFeature.GetGeometryRef();                             // *return
>>>> null*
>>>> > [/code]
>>>> >
>>>> > But I don't know if I have to use UTF8, ASCII, Unicode or other.
>>>> > If you know what encoding is use, or better an other trick to have a
>>>> > geometry in my memLayer or serverLayer I heard you with interest !
>>>> >
>>>> >
>>>> > Sorry for my spelling, English isn't my native tongue language.
>>>> >
>>>> > Benjamin
>>>> >
>>>> >
>>>> > Ps : link to the thread:
>>>> >
>>>> >
>>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>>>> >
>>>> >
>>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831.html
>>>> >
>>>> >
>>>> >
>>>> > Even Rouault wrote
>>>> > >
>>>> > > Selon Benjamin &lt;benjamin.lux@&gt;:
>>>> > >
>>>> > >> "You can access the geometry like with any other ogr feature."
>>>> > >>
>>>> > >
>>>> > > Hopefully, memFeature.GetGeometryRef() should do it !
>>>> > > _______________________________________________
>>>> > > gdal-dev mailing list
>>>> > > gdal-dev at .osgeo
>>>> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> > >
>>>> >
>>>> >
>>>> > --
>>>> > View this message in context:
>>>> >
>>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989072.html
>>>> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>> > _______________________________________________
>>>> > gdal-dev mailing list
>>>> > gdal-dev at .osgeo
>>>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> >
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at .osgeo
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>>>>
>>>> 
>>> Quoted from:
>>>
>>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4989092.html
>>> ****
>>>
>>>
>>>
>>>
>>>
>> -- 
>> Best regards,
>> Chaitanya kumar CH.
>> 
>> +91-9494447584
>> 17.2416N 80.1426E
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Ogr-ExecuteSQL-with-MSSQL-and-geometry-column-tp4988831p4990130.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Mon Jul 23 10:05:49 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 23 Jul 2012 14:05:49 -0300
Subject: [gdal-dev] how to create NETCDF with several 3D variables?
In-Reply-To: <500D64B6.8030109@nersc.no>
References: <500D64B6.8030109@nersc.no>
Message-ID: <CA+TxYvMKKAg0ZF63tfNOeTXxQXSM6x9nm5DMcpL1ZsCG2f96QQ@mail.gmail.com>

Hi

glad you like the driver.  Interesting that you were able to create a
3d file like that! I had thought of it but never tested. Those
NETCDF_DIM_* metadata I added to be able to deal with 3d variables in
a clean manner.

I'm afraid you cannot combine several variables (or subdatasets as
gdal calls them) inside one netcdf file with the driver. You should
use other tools for that.  You could, for example, use 'cdo merge
ifile1.nc ifile2.nc ofile.nc'.

See https://code.zmaw.de/projects/cdo/

Etienne
On Mon, Jul 23, 2012 at 11:50 AM, Anton Korosov <anton.korosov at nersc.no> wrote:
> Dear list,
>
> how to create a NetCDF file with several variables that have more than two
> dimensions?
> I have to save time series of several fields (sst, chlorophyll, etc) in one
> file.
>
> I found that in order to create one 3D variable I can add
> NETCDF_DIM_EXTRA, NETCDF_DIM_time_DEF, NETCDF_DIM_time_VALUES to the
> metadata in a VRT file. Then I use 'gdal_translate -of NetCDF' or
> gdal.GetDriverByName('NetCDF').CreateCopy() to generate a .nc file.
>
> However I cannot make several 3D variables!
>
> Here are two VRTs. One works fine (one variable: 'sst', 3 dimentions: time,
> x, y). Another one produces two variables (chl, sst)  but time dimension is
> not added!
> Is it possible to do it in theory?
>
> I use the latest release of GDAL 2.0dev
>
> With best regards and great thanks for the developers of the fantastic
> NetCDF driver!
>
> Anton
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Mon Jul 23 10:07:29 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 23 Jul 2012 14:07:29 -0300
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <94D09947F0049948855245E630E6FA4E0118184D@si0140.mrw.wallonie.int>
References: <500D6D27.5040302@mapgears.com>
	<94D09947F0049948855245E630E6FA4E0118184D@si0140.mrw.wallonie.int>
Message-ID: <CA+TxYvNU6bwyb-gjYE=V6Y0Xj3O8muVZsLyqOzi+ddoLsrT4ng@mail.gmail.com>

It might be worth enhancing gdaltindex, using gdal's native exif file reading.

Etienne

On Mon, Jul 23, 2012 at 12:38 PM, Nicolas Simon
<nicolas.simon at spw.wallonie.be> wrote:
> Hi
>         For me it looks like a variant of gdaltindex with input made from specials fields (EXIF data).
>         Output (shapefile for instance) could be translated into whatever you want through ogr2ogr.
>
>         Regards
>
>         Nicolas
>
> -----Message d'origine-----
> De : gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org]De la part de Daniel Morissette
> Envoy? : lundi 23 juillet 2012 17:27
> ? : gdal-dev at lists.osgeo.org
> Objet : Re: [gdal-dev] New OGR driver: Imageset
>
>
> If I understand correctly, in the Open() call, this driver would open
> each image file to read its EXIF info and index the files in memory?
> This would work fine with a dozen images, but as the number of images
> increases the performance will suffer a lot and this would become
> unusable in apps such as MapServer, and even for Desktop apps with
> hundreds of images.
>
> If I needed this kind of functionality myself I would use a script to
> create an OGR point file as suggested by Even, to avoid the overhead
> caused by opening all the images.
>
> My 0.02$
>
> Daniel
>
>
> On 12-07-23 5:27 AM, Tamas Szekeres wrote:
>> Hi Even,
>>
>> I just want to use the directory name to define the connection to the
>> images, we could also provide to scan the files in subdirectories if
>> needed. I would prefer to have a new driver not just an offline tool for
>> creating OGR datasets, in this case many existing applications (like
>> MapServer) would be capable to utilize this feature.
>> I could imagine a driver configuration file to specify which driver
>> should be used for a particular image format and where the specific
>> information is located, I don't require to harmonize the metadata
>> structure at this time. We should probably allow mixing jpegs and tiffs
>> in the same directory, but the configuration should specify how the
>> similar attributes are provided by each (sub)driver.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2012/7/23 Even Rouault <even.rouault at mines-paris.org
>> <mailto:even.rouault at mines-paris.org>>
>>
>>     Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>>      > Hi All,
>>      >
>>      > We're thinking about implementing a new OGR driver which would
>>     represent a
>>      > set of images as a vector data source. The images are taken from
>>     any GPS
>>      > compatible mobile device, and each picture would be represented
>>     as a point
>>      > feature, the positions would be extracted from the exif
>>     information. The
>>      > file name and path would be provided as an attribute for each
>>     feature. This
>>      > data source could then be used by higher level apps to provide
>>     symbols at
>>      > the picture locations in the map and display the picture when the
>>     feature
>>      > is selected. The driver would definitely use GDAL to extract
>>     information
>>      > about the provided images.
>>      >
>>      > I'm not sure whether we already have some kind of alternative
>>     solution to
>>      > this, let me know if you know about any. Further ideas about this
>>     topic
>>      > would also be helpful.
>>
>>     The JPEG driver already exposes EXIF information if found :
>>
>>     $ gdalinfo ../autotest/gdrivers/data/albania.jpg
>>     Driver: JPEG/JPEG JFIF
>>     Files: ../autotest/gdrivers/data/albania.jpg
>>     Size is 361, 260
>>     Coordinate System is `'
>>     Metadata:
>>     [...]
>>        EXIF_GPSLatitude=(41) (1) (22.91)
>>        EXIF_GPSLatitudeRef=N
>>        EXIF_GPSLongitude=(19) (55) (42.35)
>>        EXIF_GPSLongitudeRef=E
>>     [...]
>>
>>     $ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
>>     Driver: GTiff/GeoTIFF
>>     Files: ../autotest/gcore/data/exif_and_gps.tif
>>     Size is 1, 1
>>     Coordinate System is `'
>>     [..]
>>     Metadata (EXIF):
>>     [...]
>>        EXIF_GPSLatitude=(77) (5) (60)
>>        EXIF_GPSLatitudeRef=S
>>        EXIF_GPSLongitude=(34) (12) (0)
>>        EXIF_GPSLongitudeRef=E
>>     [..]
>>
>>     Are you thinking to other raster formats to extract EXIF info from?
>>     To my
>>     knowledge, the JPEG driver, and recently the GTiff driver, are the
>>     only one
>>     that extract EXIF for now. I see that the JPEG driver exposes it in the
>>     default metadata domain, whereas I chose EXIF for the GTiff driver.
>>     For GTiff,
>>     the specific EXIF metadata domain seemed better to me to avoid
>>     'polluting' the
>>     default metadata domain, but I didn't want to change the JPEG driver
>>     at that
>>     point. But this would probably requires some harmonization.
>>
>>     So with some scripting, you could create for example a point
>>     shapefile, with
>>     the filename as attribute and GPS position as geometry.
>>
>>     In its syntax, this could be something similar to gdaltindex.
>>
>>     Doing that as a OGR driver would be also doable of course. The only
>>     point to
>>     solve is the definition of the connexion string to specify the image
>>     set.
>>
>>      >
>>      > Best regards,
>>      >
>>      > Tamas
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chris.barker at noaa.gov  Mon Jul 23 10:07:07 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Mon, 23 Jul 2012 10:07:07 -0700
Subject: [gdal-dev] how to create NETCDF with several 3D variables?
In-Reply-To: <500D64B6.8030109@nersc.no>
References: <500D64B6.8030109@nersc.no>
Message-ID: <CALGmxEKBC6s2kYG0VbeYFcdnx5rc=CFPzEF8pB3Kx5BDBnac=g@mail.gmail.com>

On Mon, Jul 23, 2012 at 7:50 AM, Anton Korosov <anton.korosov at nersc.no> wrote:

> how to create a NetCDF file with several variables that have more than two
> dimensions?

I"m sure you can get this to work, but...

netcdf has a pretty different data model than GDAL -- I suspect you'll
be fighting that regularly. You may be better off workign with a more
native netcdf driver. If you are at all familiar with Python, the
"netCDF4" python module is great:

http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html

( you can read stuff in other formats with GDAL, and write with
netcdf4, if that makes sense )

you may want to give it a try.

-Chris


> I have to save time series of several fields (sst, chlorophyll, etc) in one
> file.
>
> I found that in order to create one 3D variable I can add
> NETCDF_DIM_EXTRA, NETCDF_DIM_time_DEF, NETCDF_DIM_time_VALUES to the
> metadata in a VRT file. Then I use 'gdal_translate -of NetCDF' or
> gdal.GetDriverByName('NetCDF').CreateCopy() to generate a .nc file.
>
> However I cannot make several 3D variables!
>
> Here are two VRTs. One works fine (one variable: 'sst', 3 dimentions: time,
> x, y). Another one produces two variables (chl, sst)  but time dimension is
> not added!
> Is it possible to do it in theory?
>
> I use the latest release of GDAL 2.0dev
>
> With best regards and great thanks for the developers of the fantastic
> NetCDF driver!
>
> Anton
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From Michael.Smith at usace.army.mil  Mon Jul 23 10:25:22 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Mon, 23 Jul 2012 17:25:22 +0000
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <CC32C653.25F50%michael.smith@usace.army.mil>
Message-ID: <CC33002F.2604E%michael.smith@usace.army.mil>

Even, 

[osmusr at bigserver-proc osm]$ ogr2ogr -progress -f oci
oci:user/pass at tns:tmp planet-latest.osm.pbf -lco dim=2 -lco srid=4326 -lco
geometry_name=geometry -lco launder=yes --debug on  2>osm_debug.log
0...10...20...30...40...50...60?70
[osmusr at bigserver-proc osm]$



>From the debug output

OCI: Flushing 100 features on layer POLYGONS
OCI: Flushing 100 features on layer POLYGONS
OCI: Flushing 100 features on layer POLYGONS
OCI: Flushing 100 features on layer POLYGONS
OCI: Flushing 100 features on layer POLYGONS
OCI: Flushing 100 features on layer POLYGONS

OCI: Flushing 100 features on layer POLYGONS
OSM: Switching to 'lines' as they are too many features in 'polygons'
OGR2OGR: 32827 features written in layer 'POLYGONS'
OCI: In Create Layer ...
OCI: Prepare(CREATE TABLE "MULTILINESTRINGS" ( OGR_FID INTEGER, geometry
MDSYS.SDO_GEOMETRY ))
OGR2OGR: 0 features written in layer 'MULTILINESTRINGS'
OCI: In Create Layer ...
OCI: Prepare(CREATE TABLE "MULTIPOLYGONS" ( OGR_FID INTEGER, geometry
MDSYS.SDO_GEOMETRY ))
OGR2OGR: 0 features written in layer 'MULTIPOLYGONS'
OCI: In Create Layer ...
OCI: Prepare(CREATE TABLE "OTHER_RELATIONS" ( OGR_FID INTEGER, geometry
MDSYS.SDO_GEOMETRY ))
OGR2OGR: 0 features written in layer 'OTHER_RELATIONS'
OCI: Flushing 23 features on layer POINTS
OCI: Flushing 99 features on layer LINES
OCI: Flushing 27 features on layer POLYGONS
OSM: nNodeSelectBetween = 50006
OSM: nNodeSelectIn = 94362
VSI: ~VSIUnixStdioFilesystemHandler() : nTotalBytesRead = 12682608949


(note that I removed some alter table lines for clarity)


Mike

On 7/23/12  9:16 AM, "Smith, Michael ERDC-CRREL-NH"
<Michael.Smith at usace.army.mil> wrote:

>Even,
>
>It stopped cleanly (no segfault) at 70%. OS is RHEL 6.2 64 bit. Import
>time was about 340 min.
>
>Command was 
>
>ogr2ogr -progress -f oci oci:user/pass at tns:tmp planet-latest.osm.pbf -lco
>dim=2 -lco srid=4326 -lco geometry_name=geometry -lco launder=yes
>
>I'm rerunning now with the debug log to a file.
>
>Mike
>
>-- 
>Michael Smith
>
>Remote Sensing/GIS Center
>US Army Corps of Engineers
>
>
>
>On 7/23/12  7:05 AM, "Even Rouault" <even.rouault at mines-paris.org> wrote:
>
>>Le lundi 23 juillet 2012 12:56:12, Smith, Michael ERDC-RDE-CRREL-NH a
>>?crit :
>>> I'm finding that the new OSM Driver (I tested again with r24699) has a
>>> problem when working with the whole planet file. When I tried with the
>>>US
>>> Northeast subset, I got multipolygons and multilinestring entries. When
>>> reading the whole planet file, I did not. It gets to 70% and then ends
>>> (but without an error message). I also got fewer polygons than I was
>>> expecting. It seems like the reading got interrupted by some non
>>>reported
>>> error.
>>> 
>>> I was writing to Oracle for this importing but got the same results
>>>writing
>>> to sqlite. It seems that smaller extracts work fine but the are some
>>> reading issues with the whole planet file (in pbf format). I can try
>>>with
>>> the .osm format.
>>
>>I didn't try yet with whole planet files. Takes too much time :-)
>>
>>Which command line did you use exactly ?
>>
>>Did it stop cleanly or with a segfault ? In the latter case, (assuming
>>you are 
>>on Linux), running under gdb might be useful.
>>
>>What is your OS, 32/64 bit ? Perhaps, you could add --debug on. I'd
>>suggest 
>>redirecting standard error file to a file because the log file can be
>>huge.
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev at lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ivan.lucena at princeton-ma.us  Mon Jul 23 10:26:00 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon, 23 Jul 2012 12:26:00 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?Oracle_support_available_by_default_in_?=
	=?iso-8859-1?q?any_OSGeo_software?=
In-Reply-To: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>
References: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>
Message-ID: <20120723172600.13997.qmail@s466.sureserver.com>

Nicolas,

If you install QGIS from OSGeo4W you should be able to also install the Libs package "gdal-oracle: OGR OCI and GDAL GeoRaster Plugins for Oracle" with the files gdal_GEOR.dll and ogr_OCI.dll. That is all you need in QGIS.

But if you don't use OSGeo4W you can grab the same files from Tamas Szekeres website (see http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries).

>  >  I't very frustrating, each time I would like to use OSGeo software
>  >  (GDAL/OGR, QGIS, ...) they don't support oracle database. Every time,
>  >  everything should be recompiled from source with oracle support enabled. A
>  >  long and not easy process...

I understand your frustration. But note that all GDAL/OGR driver that have dependency should not be incorporated by default into product distribution to avoid annoying "cannot find shared library xxx" messages or any other more serious error. Those driver are build as plugins so that they can be easily added or removed from the path.

>  >  
>  >  The reason usually evoked for this situation, is that Oracle build
>  >  needs Oracle files that aren't freely redistributable. Ok It's a good
>  >  reason.

You can freely download all the necessary files to compile against OCI from oracle.com.

>  >  
>  >  I found a library, called OCILIB (<[LINK:
>  >  http://orclib.sourceforge.net/] http://orclib.sourceforge.net/>), that
>  >  enable your software to dynamically connect to your oracle database. This
>  >  library does not require any oracle library to compile. It's available on
>  >  any platform where oracle client is available and it licensed with LGPL.

The OCILIB library is just a shell around OCI. You still need OCI distribution from a server, client or instant client installation in order to compile or run any code based on that library. 

>  >  But before going further, I would like to know if it seems to you a
>  >  good way to have Oracle support available by default in any OSGeo software

The OSGeo4W and Tamasz packages solutions are working pretty well for Windows users, so far. For QGIS all you have to do is to enable the Oracle Raster driver, is you want to use GeoRaster. Works pretty fast if the image has overviews. Please note that other OSGeo and commercial software can also access Oracle Spatial through GDAL.

>  >  Depending of your answers, I 'll come back to ask you how it's the
>  >  best way to do that ?

I hope that would answer your question.

Regards,

Ivan

From etourigny.dev at gmail.com  Mon Jul 23 11:09:11 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 23 Jul 2012 15:09:11 -0300
Subject: [gdal-dev] how to create NETCDF with several 3D variables?
In-Reply-To: <CALGmxEKBC6s2kYG0VbeYFcdnx5rc=CFPzEF8pB3Kx5BDBnac=g@mail.gmail.com>
References: <500D64B6.8030109@nersc.no>
	<CALGmxEKBC6s2kYG0VbeYFcdnx5rc=CFPzEF8pB3Kx5BDBnac=g@mail.gmail.com>
Message-ID: <CA+TxYvOYdsbH8Jt-hEhQ7rzoBTcwNRFTpZd1-71QOCBXTUgP8w@mail.gmail.com>

Chris is right - the netcdf driver in gdal was designed to read netcdf
data and create netcdf files from other formats, not write complex
files.

Anything else is a hack - better to use other tools if you want to
combine bands, variables, etc.

Etienne

On Mon, Jul 23, 2012 at 2:07 PM, Chris Barker <chris.barker at noaa.gov> wrote:
> On Mon, Jul 23, 2012 at 7:50 AM, Anton Korosov <anton.korosov at nersc.no> wrote:
>
>> how to create a NetCDF file with several variables that have more than two
>> dimensions?
>
> I"m sure you can get this to work, but...
>
> netcdf has a pretty different data model than GDAL -- I suspect you'll
> be fighting that regularly. You may be better off workign with a more
> native netcdf driver. If you are at all familiar with Python, the
> "netCDF4" python module is great:
>
> http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html
>
> ( you can read stuff in other formats with GDAL, and write with
> netcdf4, if that makes sense )
>
> you may want to give it a try.
>
> -Chris
>
>
>> I have to save time series of several fields (sst, chlorophyll, etc) in one
>> file.
>>
>> I found that in order to create one 3D variable I can add
>> NETCDF_DIM_EXTRA, NETCDF_DIM_time_DEF, NETCDF_DIM_time_VALUES to the
>> metadata in a VRT file. Then I use 'gdal_translate -of NetCDF' or
>> gdal.GetDriverByName('NetCDF').CreateCopy() to generate a .nc file.
>>
>> However I cannot make several 3D variables!
>>
>> Here are two VRTs. One works fine (one variable: 'sst', 3 dimentions: time,
>> x, y). Another one produces two variables (chl, sst)  but time dimension is
>> not added!
>> Is it possible to do it in theory?
>>
>> I use the latest release of GDAL 2.0dev
>>
>> With best regards and great thanks for the developers of the fantastic
>> NetCDF driver!
>>
>> Anton
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker at noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kevin.kreiser at mapquest.com  Mon Jul 23 11:09:21 2012
From: kevin.kreiser at mapquest.com (Kreiser, Kevin)
Date: Mon, 23 Jul 2012 18:09:21 +0000
Subject: [gdal-dev] Updated rgb2pct.py for greyscale images
Message-ID: <62BC8FA1D9F4024A817A2CDC28B5CB7A0CEA568E@aoldtcmes32.ad.aol.aoltw.net>

I ran into a small limitation of rgb2pct.py when processing the http://www.glcf.umd.edu/data/landcover/data.shtml 1km AVHRR landcover data set. Essentially the data is structured such that there is a single color channel in which each pixel has a value between 0 - 14. Where 0 is water and 1-4 are forest etc.

At any rate, I needed a way to map those values to colors so I wanted to paletize the image. I of course tried rgb2pct.py but it only supported rgb images. So I set out to overcome this with a short hack to the script. I wasn't sure where to post this so I'm trying th is mailing list in case someone might want it in the repositor.

Anyway I've attached my modified version of the script to this post.

Thanks to the creators/contributers of gdal for these awesome resources!


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/c1518b1f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rgb2pct.py
Type: text/x-python
Size: 5744 bytes
Desc: rgb2pct.py
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/c1518b1f/attachment.py>

From ivan.lucena at princeton-ma.us  Mon Jul 23 12:18:21 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon, 23 Jul 2012 14:18:21 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?Oracle_support_available_by_default_in_?=
	=?iso-8859-1?q?any_OSGeo_software?=
In-Reply-To: <CAPuEs1y1mLa=k8M4Wi-aa__XvkkeHKnWbGvnOd_VeSiVKL3FSQ@mail.gmail.com>
References: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>
	<20120723172600.13997.qmail@s466.sureserver.com>
	<CAPuEs1y1mLa=k8M4Wi-aa__XvkkeHKnWbGvnOd_VeSiVKL3FSQ@mail.gmail.com>
Message-ID: <20120723191822.18003.qmail@s466.sureserver.com>

Hi Vincent,

So I think we can agree that OCILIB does not bring any advantage other than some unlikely inconvenience of having OCI header and libraries available. You cannot remove the dependence of having access to an Oracle server anyway.

The use of OCILIB was evaluated and discussed during the development of GDAL/GeoRaster and it didn't make the final cut. I know that some other FOSS projects went to the same conclusion.

But you are absolutely right, the OGR/OCI driver does need some love and care. I would suggest reusing the code in frmts/georaster/oci_wrapper.h to access OCI. That same code is already shared by others OSGeo projects to support Point Cloud data for example. 

But again, changing the OCI wrapper or using a "dependency-free" wrapper is not going to give you any improvement. After that someone would need to look into performance issues and limitations, anyway.

Today, the GDAL/GeoRaster driver have a limitation. It does not support RPC. It is just a matter of passing some metadata notation to and from the driver to GDAL but when the driver was first develop GDAL didn't support RPC. The OGR/OCI driver must have some of those historical reasons too.

Thanks for your interest in helping.

Best regards,

Ivan


>  -------Original Message-------
>  From: vincent rogier <vince.rogier at gmail.com>
>  To: Ivan Lucena <ivan.lucena at princeton-ma.us>
>  Cc: Nicolas Simon <nicolas.simon at spw.wallonie.be>, gdal-dev at lists.osgeo.org
>  Subject: Re: [gdal-dev] Oracle support available by default in any OSGeo software
>  Sent: Jul 23 '12 13:02
>  
>  Hi all,
>  
>  I just want to add some precisions about what was said in that
>  conversation.
>  
>  Ivan is right, OCILIB is a wrapper around OCI.
>  But OCILIB can be built without any dependencies as it does not require
>  oracle headers or libraries to compile and it can dynamically load any
>  Oracle Client runtime.
>  
>  If the current used driver is stable, fully compliant with its desired
>  usage and if it delivers acceptable performances, there is no point trying
>  to make another one using OCILIB for example.
>  
>  I had a quick look at the gdal oci driver wiki page. It apparently shows
>  some limitations.
>  I also looked at the code, and it seems limited in some areas such as
>  data type support, ...
>  It could be also optimized in terms of OCI usage and performances.
>  
>  I often see discussion in dev mailing lists like this one. And sometimes, i
>  see negative reactions about using a third party wrapper for OCI because
>  there are just wrappers. Yes, indeed, But wrappers like OCILIB handle all
>  the common nightmares like portability across platforms, runtime oracle
>  versions, and delivivers a much more maintainable application code, much
>  shorter code, performance improvement due to OCI internal expertise,
>  etc....
>  
>  But once again, if the current driver matches its intended use really well,
>  is stable, scalable and does not restrict future enhancements, you should
>  stick to it and grab some pre built binaries for you OS.
>  
>  
>  Best regards,
>  
>  Vincent
>  
>  
>  On Mon, Jul 23, 2012 at 7:26 PM, Ivan Lucena <[LINK:
>  mailto:ivan.lucena at princeton-ma.us] ivan.lucena at princeton-ma.us> wrote:
>  Nicolas,
>  
>  If you install QGIS from OSGeo4W you should be able to also install the
>  Libs package "gdal-oracle: OGR OCI and GDAL GeoRaster Plugins for Oracle"
>  with the files gdal_GEOR.dll and ogr_OCI.dll. That is all you need in QGIS.
>  
>  But if you don't use OSGeo4W you can grab the same files from Tamas
>  Szekeres website (see [LINK:
>  http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries]
>  http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries).
>  
>  
>  > ?> ?I't very frustrating, each time I would like to use OSGeo
>  software
>  > ?> ?(GDAL/OGR, QGIS, ...) they don't support oracle database.
>  Every time,
>  
>  > ?> ?everything should be recompiled from source with oracle support
>  enabled. A
>  > ?> ?long and not easy process...
>  
>  I understand your frustration. But note that all GDAL/OGR driver that have
>  dependency should not be incorporated by default into product distribution
>  to avoid annoying "cannot find shared library xxx" messages or any other
>  more serious error. Those driver are build as plugins so that they can be
>  easily added or removed from the path.
>  
>  
>  > ?>
>  > ?> ?The reason usually evoked for this situation, is that Oracle build
>  > ?> ?needs Oracle files that aren't freely redistributable. Ok
>  It's a good
>  > ?> ?reason.
>  
>  You can freely download all the necessary files to compile against OCI
>  from [LINK: http://oracle.com] oracle.com.
>  
>  > ?>
>  > ?> ?I found a library, called OCILIB (<[LINK:
>  > ?> ?[LINK: http://orclib.sourceforge.net/]
>  http://orclib.sourceforge.net/] [LINK: http://orclib.sourceforge.net/]
>  http://orclib.sourceforge.net/>), that
>  
>  > ?> ?enable your software to dynamically connect to your oracle
>  database. This
>  > ?> ?library does not require any oracle library to compile. It's
>  available on
>  > ?> ?any platform where oracle client is available and it licensed with
>  LGPL.
>  
>  The OCILIB library is just a shell around OCI. You still need OCI
>  distribution from a server, client or instant client installation in order
>  to compile or run any code based on that library.
>  
>  
>  > ?> ?But before going further, I would like to know if it seems to you
>  a
>  > ?> ?good way to have Oracle support available by default in any OSGeo
>  software
>  
>  The OSGeo4W and Tamasz packages solutions are working pretty well for
>  Windows users, so far. For QGIS all you have to do is to enable the Oracle
>  Raster driver, is you want to use GeoRaster. Works pretty fast if the image
>  has overviews. Please note that other OSGeo and commercial software can
>  also access Oracle Spatial through GDAL.
>  
>  
>  > ?> ?Depending of your answers, I 'll come back to ask you how
>  it's the
>  > ?> ?best way to do that ?
>  
>  I hope that would answer your question.
>  
>  Regards,
>  
>  Ivan
>  
>  
>  --
>  Vincent Rogier

From szekerest at gmail.com  Mon Jul 23 13:49:11 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 23 Jul 2012 22:49:11 +0200
Subject: [gdal-dev] New OGR driver: Imageset (Tamas Szekeres)
In-Reply-To: <500D6ACE.8030302@gmail.com>
References: <500D6ACE.8030302@gmail.com>
Message-ID: <CACALY+QMnnUsd5_zGLpurOURqEj7UKiD2P_x1TuVtA5vofn4yg@mail.gmail.com>

Daniel,

Thanks for the input, I'm still thinking whether an offline or an online
solution would be more sufficient. OGR driver would somewhat be simple even
if it's used to convert the data source to shapefile directly (ogr2ogr).
Scripting requires the user to set up further environments (Python, C# Java
whatever) which is more complicated to utilize in most cases.

Best regards,

Tamas



2012/7/23 Daniel Clewley <daniel.clewley at gmail.com>

> Hi Tamas,
>
> Sounds like a great idea. I don't know if it's of use but I recently put
> together a python script to create KMZ files of geotagged photos using the
> Python Imaging Library to read EXIF data. It also exports a list of photos
> and coordinates as a CSV file, for loading into a GIS. You could use OGR to
> output a vector data source instead.
>
> The script can be downloaded from here:
>
> http://dropbox.aber.ac.uk/?**KJHsTqst<http://dropbox.aber.ac.uk/?KJHsTqst>
>
> Thanks,
>
> Dan
>
> On Mon, 23 Jul 2012 09:51:14 +0200, Tamas Szekeres wrote:
>
> > Hi All,
> >
> > We're thinking about implementing a new OGR driver which would
> > represent a set of images as a vector data source. The images are
> > taken from any GPS compatible mobile device, and each picture would be
> > represented as a point feature, the positions would be extracted from
> > the exif information. The file name and path would be provided as an
> > attribute for each feature. This data source could then be used by
> > higher level apps to provide symbols at the picture locations in the
> > map and display the picture when the feature is selected. The driver
> > would definitely use GDAL to extract information about the provided
> > images.
> >
> > I'm not sure whether we already have some kind of alternative solution
> > to this, let me know if you know about any. Further ideas about this
> > topic would also be helpful.
> >
> > Best regards,
> >
> > Tamas
> >
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/aa7dc884/attachment.html>

From szekerest at gmail.com  Mon Jul 23 14:13:32 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 23 Jul 2012 23:13:32 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <500D6D27.5040302@mapgears.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
	<500D6D27.5040302@mapgears.com>
Message-ID: <CACALY+RBdFsTD3SOGkU5j=21A3_jtj4dL5M8rhUsPpicNwCt+g@mail.gmail.com>

Hi Daniel,

Thanks for your comments. Your concerns are valid about the
performance. But writing a script to convert images to shapefiles would
likely provide similar performance. With regards to the usability, having a
driver (and the use of ogr2ogr) would be more convenient even if that's
used mostly as an offline solution. I'm not too satisfied with the practice
of outsourcing significant tasks to external (language specific) scrips as
"official" tools. This requires the user to be prepared to install further
things (like runtime environments, additional libraries etc) in order to
have the things up and running. The concept of having a new driver would
provide further possibilities related to the common object model (like
having OGR SQL to work)

Best regards,

Tamas




2012/7/23 Daniel Morissette <dmorissette at mapgears.com>

> If I understand correctly, in the Open() call, this driver would open each
> image file to read its EXIF info and index the files in memory? This would
> work fine with a dozen images, but as the number of images increases the
> performance will suffer a lot and this would become unusable in apps such
> as MapServer, and even for Desktop apps with hundreds of images.
>
> If I needed this kind of functionality myself I would use a script to
> create an OGR point file as suggested by Even, to avoid the overhead caused
> by opening all the images.
>
> My 0.02$
>
> Daniel
>
>
>
> On 12-07-23 5:27 AM, Tamas Szekeres wrote:
>
>> Hi Even,
>>
>> I just want to use the directory name to define the connection to the
>> images, we could also provide to scan the files in subdirectories if
>> needed. I would prefer to have a new driver not just an offline tool for
>> creating OGR datasets, in this case many existing applications (like
>> MapServer) would be capable to utilize this feature.
>> I could imagine a driver configuration file to specify which driver
>> should be used for a particular image format and where the specific
>> information is located, I don't require to harmonize the metadata
>> structure at this time. We should probably allow mixing jpegs and tiffs
>> in the same directory, but the configuration should specify how the
>> similar attributes are provided by each (sub)driver.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2012/7/23 Even Rouault <even.rouault at mines-paris.org
>> <mailto:even.rouault at mines-**paris.org <even.rouault at mines-paris.org>>>
>>
>>
>>     Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>>      > Hi All,
>>      >
>>      > We're thinking about implementing a new OGR driver which would
>>     represent a
>>      > set of images as a vector data source. The images are taken from
>>     any GPS
>>      > compatible mobile device, and each picture would be represented
>>     as a point
>>      > feature, the positions would be extracted from the exif
>>     information. The
>>      > file name and path would be provided as an attribute for each
>>     feature. This
>>      > data source could then be used by higher level apps to provide
>>     symbols at
>>      > the picture locations in the map and display the picture when the
>>     feature
>>      > is selected. The driver would definitely use GDAL to extract
>>     information
>>      > about the provided images.
>>      >
>>      > I'm not sure whether we already have some kind of alternative
>>     solution to
>>      > this, let me know if you know about any. Further ideas about this
>>     topic
>>      > would also be helpful.
>>
>>     The JPEG driver already exposes EXIF information if found :
>>
>>     $ gdalinfo ../autotest/gdrivers/data/**albania.jpg
>>     Driver: JPEG/JPEG JFIF
>>     Files: ../autotest/gdrivers/data/**albania.jpg
>>     Size is 361, 260
>>     Coordinate System is `'
>>     Metadata:
>>     [...]
>>        EXIF_GPSLatitude=(41) (1) (22.91)
>>        EXIF_GPSLatitudeRef=N
>>        EXIF_GPSLongitude=(19) (55) (42.35)
>>        EXIF_GPSLongitudeRef=E
>>     [...]
>>
>>     $ gdalinfo ../autotest/gcore/data/exif_**and_gps.tif -mdd EXIF
>>     Driver: GTiff/GeoTIFF
>>     Files: ../autotest/gcore/data/exif_**and_gps.tif
>>     Size is 1, 1
>>     Coordinate System is `'
>>     [..]
>>     Metadata (EXIF):
>>     [...]
>>        EXIF_GPSLatitude=(77) (5) (60)
>>        EXIF_GPSLatitudeRef=S
>>        EXIF_GPSLongitude=(34) (12) (0)
>>        EXIF_GPSLongitudeRef=E
>>     [..]
>>
>>     Are you thinking to other raster formats to extract EXIF info from?
>>     To my
>>     knowledge, the JPEG driver, and recently the GTiff driver, are the
>>     only one
>>     that extract EXIF for now. I see that the JPEG driver exposes it in
>> the
>>     default metadata domain, whereas I chose EXIF for the GTiff driver.
>>     For GTiff,
>>     the specific EXIF metadata domain seemed better to me to avoid
>>     'polluting' the
>>     default metadata domain, but I didn't want to change the JPEG driver
>>     at that
>>     point. But this would probably requires some harmonization.
>>
>>     So with some scripting, you could create for example a point
>>     shapefile, with
>>     the filename as attribute and GPS position as geometry.
>>
>>     In its syntax, this could be something similar to gdaltindex.
>>
>>     Doing that as a OGR driver would be also doable of course. The only
>>     point to
>>     solve is the definition of the connexion string to specify the image
>>     set.
>>
>>      >
>>      > Best regards,
>>      >
>>      > Tamas
>>
>>
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
>
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/fd1a299e/attachment-0001.html>

From cdqrain at gmail.com  Mon Jul 23 18:37:05 2012
From: cdqrain at gmail.com (dequan chen)
Date: Tue, 24 Jul 2012 09:37:05 +0800
Subject: [gdal-dev] encoding problem when reading DXF file
Message-ID: <CANJ4TWuc_jnnYyWAgnTUTMpbiQ=Z65YB-hffHrJ=86iUoG7_hA@mail.gmail.com>

hi all,
I download the latest gdal-19-1600-core.msi from
http://www.gisinternals.com/sdk and installed, then copy gdal_csharp.dll,
ogr_csharp.dll, osr_csharp.dll etc to read .DXF file. But it has the problem
of charactor encoding. My DXF file contains chinese charactor that code is
GB2312. If i use DLLs from FWTOOLS, the charactor encoding correctly, but i
cannot to run my compiled EXE (both debug and release versions). The
application just crashes.
What more work should i do ? thanks advanced.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/4440b2ca/attachment.html>

From taibc_coltech at yahoo.com  Mon Jul 23 19:07:42 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 23 Jul 2012 19:07:42 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
Message-ID: <1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>

Thanks Mateusz,

I edited the nmake.opt by adding below lines:

GEOS_DIR = C:/geos-3.3.5
GEOS_LIB = $(GEOS_DIR)/src/geos_c_i.lib
GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include/geos -DHAVE_GEOS


Then, I rebuilt GDAL, but still got the error: "GEOS support not enable".

Kind regards,

Tai

________________________________
 From: Mateusz Loskot [via OSGeo.org] <ml-node+s1560n4990029h18 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Monday, July 23, 2012 5:56 PM
Subject: Re: How to identify a point is belong to a polygon ?
 

On 23 July 2012 11:52, taibc <[hidden email]> wrote: 
> I installed GEOS succesfful, and copy file geos.dll into my project. But I 
> still got the error: "GEOS support not enable" when using the method 
> "Within" 
> 
> Are there something wrongs ? 

You need to edit nmake.opt and rebuild GDAL. 
Check this thread: 
http://lists.osgeo.org/pipermail/gdal-dev/2010-March/023829.html

Best regards, 
-- 
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990029.html 
To unsubscribe from How to identify a point is belong to a polygon ?, click here.
NAML 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990235.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/742c99a6/attachment.html>

From chaitanya.ch at gmail.com  Mon Jul 23 20:37:58 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 24 Jul 2012 09:07:58 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
	<1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
Message-ID: <CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>

Tai,

If your rebuild was successful with geos, the only reason for you to get
the error is that the application is accessing the wrong libraries
somewhere in your system. Do a clean rebuild and make sure the
LD_LIBRARY_PATH and GDAL_DATA are set correctly.

On Tue, Jul 24, 2012 at 7:37 AM, taibc <taibc_coltech at yahoo.com> wrote:

> Thanks Mateusz,
>
> I edited the nmake.opt by adding below lines:
>
> GEOS_DIR = C:/geos-3.3.5
> GEOS_LIB = $(GEOS_DIR)/src/geos_c_i.lib
> GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include/geos -DHAVE_GEOS
>
> Then, I rebuilt GDAL, but still got the error: "GEOS support not enable".
>
> Kind regards,
>
> Tai
>   ------------------------------
> *From:* Mateusz Loskot [via OSGeo.org] <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990235&i=0>
> >
> *To:* taibc <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990235&i=1>>
>
> *Sent:* Monday, July 23, 2012 5:56 PM
> *Subject:* Re: How to identify a point is belong to a polygon ?
>
>  On 23 July 2012 11:52, taibc <[hidden email]> wrote:
> > I installed GEOS succesfful, and copy file geos.dll into my project. But
> I
> > still got the error: "GEOS support not enable" when using the method
> > "Within"
> >
> > Are there something wrongs ?
>
> You need to edit nmake.opt and rebuild GDAL.
> Check this thread:
> http://lists.osgeo.org/pipermail/gdal-dev/2010-March/023829.html
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990029.html
>  To unsubscribe from How to identify a point is belong to a polygon ?, click
> here.
> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>
>
>
> ------------------------------
> View this message in context: Re: How to identify a point is belong to a
> polygon ?<http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990235.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/23da467c/attachment.html>

From taibc_coltech at yahoo.com  Mon Jul 23 21:20:58 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Mon, 23 Jul 2012 21:20:58 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
	<1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>
Message-ID: <1343103647.15439.YahooMailNeo@web190005.mail.sg3.yahoo.com>

Thanks Chaitanya,

I haven't set LD_LIBRARY_PATH and GDAL_DATA yet.

Do you know how to set them on Visual C++ 2010 ?

Kind regards,
Tai



________________________________
 From: chaitanya_ch [via OSGeo.org] <ml-node+s1560n4990248h7 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Tuesday, July 24, 2012 10:38 AM
Subject: Re: How to identify a point is belong to a polygon ?
 

Tai,

If your rebuild was successful with geos, the only reason for you to get the error is that the application is accessing the wrong libraries somewhere in your system. Do a clean rebuild and make sure the LD_LIBRARY_PATH and GDAL_DATA are set correctly.


On Tue, Jul 24, 2012 at 7:37 AM, taibc <[hidden email]> wrote:

Thanks Mateusz,
>
>
>I edited the nmake.opt by adding below lines:
>
>
>GEOS_DIR = C:/geos-3.3.5
>GEOS_LIB = $(GEOS_DIR)/src/geos_c_i.lib
>GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include/geos -DHAVE_GEOS
>
>
>
>Then, I rebuilt GDAL, but still got the error: "GEOS support not enable".
>
>
>Kind regards,
>
>
>Tai
>
>________________________________
> From: Mateusz Loskot [via OSGeo.org] <[hidden email]>
>To: taibc <[hidden email]> 
>Sent: Monday, July 23, 2012 5:56 PM
>Subject: Re: How to identify a point is belong to a polygon ?
> 
>
>On 23 July 2012 11:52, taibc <[hidden email]> wrote: 
>> I installed GEOS succesfful, and copy file geos.dll into my project. But I 
>> still got the error: "GEOS support not enable" when using the method 
>> "Within" 
>> 
>> Are there something wrongs ? 
>
>You need to edit nmake.opt and rebuild GDAL. 
>Check this thread: 
>http://lists.osgeo.org/pipermail/gdal-dev/2010-March/023829.html
>
>Best regards, 
>-- 
>Mateusz Loskot, http://mateusz.loskot.net
>_______________________________________________ 
>gdal-dev mailing list 
>[hidden email] 
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>>________________________________
> 
>If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990029.html 
>To unsubscribe from How to identify a point is belong to a polygon ?, click here.
>NAML 
>
>
>>________________________________
> View this message in context: Re: How to identify a point is belong to a polygon ?
>
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>_______________________________________________
>gdal-dev mailing list
>[hidden email]
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

________________________________
 
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990248.html 
To unsubscribe from How to identify a point is belong to a polygon ?, click here.
NAML 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990251.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120723/5986c104/attachment-0001.html>

From chaitanya.ch at gmail.com  Mon Jul 23 22:43:36 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 24 Jul 2012 11:13:36 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1343103647.15439.YahooMailNeo@web190005.mail.sg3.yahoo.com>
References: <1342748097829-4989501.post@n6.nabble.com>
	<CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
	<1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>
	<1343103647.15439.YahooMailNeo@web190005.mail.sg3.yahoo.com>
Message-ID: <CAMKgpOaz9FfBdv1=bf9qJaBDB1a1FV8t4jfbVOmOscTghGvHBg@mail.gmail.com>

Tai,

The environment variables can be set at the command prompt temporarily
using

SET LD_LIBRARY_PATH=C:\path\to\gdal\libraries
SET GDAL_DATA=C:\path\to\gdal\libraries\data

You can set them in the project settings in VC++. I don't know how.
You can also set them system wide at MyComputer->Settings.

On Tue, Jul 24, 2012 at 9:50 AM, taibc <taibc_coltech at yahoo.com> wrote:

> Thanks Chaitanya,
>
> I haven't set LD_LIBRARY_PATH and GDAL_DATA yet.
>
> Do you know how to set them on Visual C++ 2010 ?
>
> Kind regards,
> Tai
>
>   ------------------------------
> *From:* chaitanya_ch [via OSGeo.org] <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990251&i=0>
> >
> *To:* taibc <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990251&i=1>>
>
> *Sent:* Tuesday, July 24, 2012 10:38 AM
>
> *Subject:* Re: How to identify a point is belong to a polygon ?
>
>  Tai,
>
> If your rebuild was successful with geos, the only reason for you to get
> the error is that the application is accessing the wrong libraries
> somewhere in your system. Do a clean rebuild and make sure the
> LD_LIBRARY_PATH and GDAL_DATA are set correctly.
>
> On Tue, Jul 24, 2012 at 7:37 AM, taibc <[hidden email]> wrote:
>
> Thanks Mateusz,
>
> I edited the nmake.opt by adding below lines:
>
> GEOS_DIR = C:/geos-3.3.5
> GEOS_LIB = $(GEOS_DIR)/src/geos_c_i.lib
> GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include/geos -DHAVE_GEOS
>
> Then, I rebuilt GDAL, but still got the error: "GEOS support not enable".
>
> Kind regards,
>
> Tai
>   ------------------------------
> *From:* Mateusz Loskot [via OSGeo.org <http://osgeo.org/>] <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990235&i=0>
> >
> *To:* taibc <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990235&i=1>>
>
> *Sent:* Monday, July 23, 2012 5:56 PM
> *Subject:* Re: How to identify a point is belong to a polygon ?
>
>  On 23 July 2012 11:52, taibc <[hidden email]> wrote:
> > I installed GEOS succesfful, and copy file geos.dll into my project. But
> I
> > still got the error: "GEOS support not enable" when using the method
> > "Within"
> >
> > Are there something wrongs ?
>
> You need to edit nmake.opt and rebuild GDAL.
> Check this thread:
> http://lists.osgeo.org/pipermail/gdal-dev/2010-March/023829.html
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990029.html
>  To unsubscribe from How to identify a point is belong to a polygon ?, click
> here.
> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>
>
>
> ------------------------------
> View this message in context: Re: How to identify a point is belong to a
> polygon ?<http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990235.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at
> Nabble.com <http://nabble.com/>.
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990248.html
>  To unsubscribe from How to identify a point is belong to a polygon ?, click
> here.
> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>
>
>
> ------------------------------
> View this message in context: Re: How to identify a point is belong to a
> polygon ?<http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990251.html>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/f0ff1784/attachment.html>

From anton.korosov at nersc.no  Mon Jul 23 22:46:14 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Tue, 24 Jul 2012 07:46:14 +0200
Subject: [gdal-dev] how to create NETCDF with several 3D variables?
In-Reply-To: <CA+TxYvOYdsbH8Jt-hEhQ7rzoBTcwNRFTpZd1-71QOCBXTUgP8w@mail.gmail.com>
References: <500D64B6.8030109@nersc.no>
	<CALGmxEKBC6s2kYG0VbeYFcdnx5rc=CFPzEF8pB3Kx5BDBnac=g@mail.gmail.com>
	<CA+TxYvOYdsbH8Jt-hEhQ7rzoBTcwNRFTpZd1-71QOCBXTUgP8w@mail.gmail.com>
Message-ID: <500E36A6.2040108@nersc.no>

Etienne, Chris, thank you very much for your response!

I'll take a closer look at this software, though I wish to be dependent 
on fewer packages.

Anton


On 07/23/2012 08:09 PM, Etienne Tourigny wrote:
> Chris is right - the netcdf driver in gdal was designed to read netcdf
> data and create netcdf files from other formats, not write complex
> files.
>
> Anything else is a hack - better to use other tools if you want to
> combine bands, variables, etc.
>
> Etienne
>
> On Mon, Jul 23, 2012 at 2:07 PM, Chris Barker <chris.barker at noaa.gov> wrote:
>> On Mon, Jul 23, 2012 at 7:50 AM, Anton Korosov <anton.korosov at nersc.no> wrote:
>>
>>> how to create a NetCDF file with several variables that have more than two
>>> dimensions?
>>
>> I"m sure you can get this to work, but...
>>
>> netcdf has a pretty different data model than GDAL -- I suspect you'll
>> be fighting that regularly. You may be better off workign with a more
>> native netcdf driver. If you are at all familiar with Python, the
>> "netCDF4" python module is great:
>>
>> http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html
>>
>> ( you can read stuff in other formats with GDAL, and write with
>> netcdf4, if that makes sense )
>>
>> you may want to give it a try.
>>
>> -Chris
>>
>>
>>> I have to save time series of several fields (sst, chlorophyll, etc) in one
>>> file.
>>>
>>> I found that in order to create one 3D variable I can add
>>> NETCDF_DIM_EXTRA, NETCDF_DIM_time_DEF, NETCDF_DIM_time_VALUES to the
>>> metadata in a VRT file. Then I use 'gdal_translate -of NetCDF' or
>>> gdal.GetDriverByName('NetCDF').CreateCopy() to generate a .nc file.
>>>
>>> However I cannot make several 3D variables!
>>>
>>> Here are two VRTs. One works fine (one variable: 'sst', 3 dimentions: time,
>>> x, y). Another one produces two variables (chl, sst)  but time dimension is
>>> not added!
>>> Is it possible to do it in theory?
>>>
>>> I use the latest release of GDAL 2.0dev
>>>
>>> With best regards and great thanks for the developers of the fantastic
>>> NetCDF driver!
>>>
>>> Anton
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>>
>> Christopher Barker, Ph.D.
>> Oceanographer
>>
>> Emergency Response Division
>> NOAA/NOS/OR&R            (206) 526-6959   voice
>> 7600 Sand Point Way NE   (206) 526-6329   fax
>> Seattle, WA  98115       (206) 526-6317   main reception
>>
>> Chris.Barker at noaa.gov
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From kassies at gmail.com  Mon Jul 23 23:30:40 2012
From: kassies at gmail.com (Rutger)
Date: Mon, 23 Jul 2012 23:30:40 -0700 (PDT)
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
Message-ID: <1343111440484-4990271.post@n6.nabble.com>

Hey,

I really like the idea. But the first thing that came to my mind was graphs
(images) instead of photographs. So i would love to see it being general
enough so that your not limited to a photo with EXIF data.

See for example something like this:
http://www.cpc.ncep.noaa.gov/products/global_monitoring/temperature/weur_90temp.shtml
http://www.cpc.ncep.noaa.gov/products/global_monitoring/temperature/weur_90temp.shtml 

You could of course write your own 'fake' EXIF to any image file, that would
be a workaround.


Regards,
Rutger






--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-New-OGR-driver-Imageset-tp4989980p4990271.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From polimax at mail.ru  Mon Jul 23 23:41:58 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Tue, 24 Jul 2012 10:41:58 +0400
Subject: [gdal-dev] encoding problem when reading DXF file
In-Reply-To: <CANJ4TWuc_jnnYyWAgnTUTMpbiQ=Z65YB-hffHrJ=86iUoG7_hA@mail.gmail.com>
References: <CANJ4TWuc_jnnYyWAgnTUTMpbiQ=Z65YB-hffHrJ=86iUoG7_hA@mail.gmail.com>
Message-ID: <500E43B6.9070703@mail.ru>

24.07.2012 5:37, dequan chen ?????:
> hi all,
> I download the latest gdal-19-1600-core.msi from
> http://www.gisinternals.com/sdk and installed, then copy gdal_csharp.dll,
> ogr_csharp.dll, osr_csharp.dll etc to read .DXF file. But it has the 
> problem
> of charactor encoding. My DXF file contains chinese charactor that code is
> GB2312. If i use DLLs from FWTOOLS, the charactor encoding correctly, 
> but i
> cannot to run my compiled EXE (both debug and release versions). The
> application just crashes.
> What more work should i do ? thanks advanced.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi Dequan,

It seems to me that is the similar issue 
http://trac.osgeo.org/gdal/ticket/4650
Check TestCapability method of DXF driver

Best regards,
     Dmitry
<http://trac.osgeo.org/gdal/wiki/TestCapability>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/ed13d616/attachment-0001.html>

From taibc_coltech at yahoo.com  Tue Jul 24 00:18:31 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Tue, 24 Jul 2012 00:18:31 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpOaz9FfBdv1=bf9qJaBDB1a1FV8t4jfbVOmOscTghGvHBg@mail.gmail.com>
References: <CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
	<1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>
	<1343103647.15439.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<CAMKgpOaz9FfBdv1=bf9qJaBDB1a1FV8t4jfbVOmOscTghGvHBg@mail.gmail.com>
Message-ID: <1343114291.95830.YahooMailNeo@web190006.mail.sg3.yahoo.com>

Thanks Chaitanya,

I modified as your suggestion. But, still got the error (GEOS support not enable) when executing the program.
About building GEOS, if I only add two first lines, the process will be sucessful:

1. GEOS_DIR = C:/geos-3.3.5
2. GEOS_LIB = $(GEOS_DIR)/src/geos_c_i.lib

if I add third line, the building process will get errors

3. GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include/geos -DHAVE_GEOS 


Errors:

LINK : fatal error LNK1181: cannot open input file 'ogr\ogrsf_frmts\ogrsf_frmts.
lib'
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 10.0\VC\BI
N\lib.EXE"' : return code '0x49d'
Stop.

Thanks and regards,

Tai

________________________________
 From: chaitanya_ch [via OSGeo.org] <ml-node+s1560n4990261h10 at n6.nabble.com>
To: taibc <taibc_coltech at yahoo.com> 
Sent: Tuesday, July 24, 2012 12:48 PM
Subject: Re: How to identify a point is belong to a polygon ?
 

Tai,

The environment variables can be set at the command prompt temporarily using 

SET LD_LIBRARY_PATH=C:\path\to\gdal\libraries
SET GDAL_DATA=C:\path\to\gdal\libraries\data You can set them in the project settings in VC++. I don't know how.
You can also set them system wide at MyComputer->Settings.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990291.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/9f98d64d/attachment.html>

From a.neumann at carto.net  Tue Jul 24 00:28:28 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 24 Jul 2012 09:28:28 +0200
Subject: [gdal-dev] Oracle support available by default in any OSGeo
 software
In-Reply-To: <20120723191822.18003.qmail@s466.sureserver.com>
References: <94D09947F0049948855245E630E6FA4E01181849@si0140.mrw.wallonie.int>
	<20120723172600.13997.qmail@s466.sureserver.com>
	<CAPuEs1y1mLa=k8M4Wi-aa__XvkkeHKnWbGvnOd_VeSiVKL3FSQ@mail.gmail.com>
	<20120723191822.18003.qmail@s466.sureserver.com>
Message-ID: <f196ad96e0eec527367203b54c8c2b5d@carto.net>

 Hi,

 For the Oracle vector feature support in QGIS I can let you know that 
 J?rgen Fischer (Norbit) is working on better Oracle Support in QGIS. It 
 will be on par with the Postgis and SQL Server support in the future.

 However I believe it will still depend on OCI (or some other Oracle 
 library) and it wont' build on GDAL, as far as I can tell.

 It will improve the situation for Oracle and QGIS users a lot, I think.

 His work is paid by "Land Vorarlberg" and the City of Dornbirn.

 Andreas

 On Mon, 23 Jul 2012 14:18:21 -0500, Ivan Lucena wrote:
> Hi Vincent,
>
> So I think we can agree that OCILIB does not bring any advantage
> other than some unlikely inconvenience of having OCI header and
> libraries available. You cannot remove the dependence of having 
> access
> to an Oracle server anyway.
>
> The use of OCILIB was evaluated and discussed during the development
> of GDAL/GeoRaster and it didn't make the final cut. I know that some
> other FOSS projects went to the same conclusion.
>
> But you are absolutely right, the OGR/OCI driver does need some love
> and care. I would suggest reusing the code in
> frmts/georaster/oci_wrapper.h to access OCI. That same code is 
> already
> shared by others OSGeo projects to support Point Cloud data for
> example.
>
> But again, changing the OCI wrapper or using a "dependency-free"
> wrapper is not going to give you any improvement. After that someone
> would need to look into performance issues and limitations, anyway.
>
> Today, the GDAL/GeoRaster driver have a limitation. It does not
> support RPC. It is just a matter of passing some metadata notation to
> and from the driver to GDAL but when the driver was first develop 
> GDAL
> didn't support RPC. The OGR/OCI driver must have some of those
> historical reasons too.
>
> Thanks for your interest in helping.
>
> Best regards,
>
> Ivan
>
>
>>  -------Original Message-------
>>  From: vincent rogier <vince.rogier at gmail.com>
>>  To: Ivan Lucena <ivan.lucena at princeton-ma.us>
>>  Cc: Nicolas Simon <nicolas.simon at spw.wallonie.be>, 
>> gdal-dev at lists.osgeo.org
>>  Subject: Re: [gdal-dev] Oracle support available by default in any 
>> OSGeo software
>>  Sent: Jul 23 '12 13:02
>>
>>  Hi all,
>>
>>  I just want to add some precisions about what was said in that
>>  conversation.
>>
>>  Ivan is right, OCILIB is a wrapper around OCI.
>>  But OCILIB can be built without any dependencies as it does not 
>> require
>>  oracle headers or libraries to compile and it can dynamically load 
>> any
>>  Oracle Client runtime.
>>
>>  If the current used driver is stable, fully compliant with its 
>> desired
>>  usage and if it delivers acceptable performances, there is no point 
>> trying
>>  to make another one using OCILIB for example.
>>
>>  I had a quick look at the gdal oci driver wiki page. It apparently 
>> shows
>>  some limitations.
>>  I also looked at the code, and it seems limited in some areas such 
>> as
>>  data type support, ...
>>  It could be also optimized in terms of OCI usage and performances.
>>
>>  I often see discussion in dev mailing lists like this one. And 
>> sometimes, i
>>  see negative reactions about using a third party wrapper for OCI 
>> because
>>  there are just wrappers. Yes, indeed, But wrappers like OCILIB 
>> handle all
>>  the common nightmares like portability across platforms, runtime 
>> oracle
>>  versions, and delivivers a much more maintainable application code, 
>> much
>>  shorter code, performance improvement due to OCI internal 
>> expertise,
>>  etc....
>>
>>  But once again, if the current driver matches its intended use 
>> really well,
>>  is stable, scalable and does not restrict future enhancements, you 
>> should
>>  stick to it and grab some pre built binaries for you OS.
>>
>>
>>  Best regards,
>>
>>  Vincent
>>
>>
>>  On Mon, Jul 23, 2012 at 7:26 PM, Ivan Lucena <[LINK:
>>  mailto:ivan.lucena at princeton-ma.us] ivan.lucena at princeton-ma.us> 
>> wrote:
>>  Nicolas,
>>
>>  If you install QGIS from OSGeo4W you should be able to also install 
>> the
>>  Libs package "gdal-oracle: OGR OCI and GDAL GeoRaster Plugins for 
>> Oracle"
>>  with the files gdal_GEOR.dll and ogr_OCI.dll. That is all you need 
>> in QGIS.
>>
>>  But if you don't use OSGeo4W you can grab the same files from Tamas
>>  Szekeres website (see [LINK:
>>  http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries]
>>  http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries).
>>
>>
>>  > ?> ?I't very frustrating, each time I would like to use OSGeo
>>  software
>>  > ?> ?(GDAL/OGR, QGIS, ...) they don't support oracle database.
>>  Every time,
>>
>>  > ?> ?everything should be recompiled from source with oracle 
>> support
>>  enabled. A
>>  > ?> ?long and not easy process...
>>
>>  I understand your frustration. But note that all GDAL/OGR driver 
>> that have
>>  dependency should not be incorporated by default into product 
>> distribution
>>  to avoid annoying "cannot find shared library xxx" messages or any 
>> other
>>  more serious error. Those driver are build as plugins so that they 
>> can be
>>  easily added or removed from the path.
>>
>>
>>  > ?>
>>  > ?> ?The reason usually evoked for this situation, is that Oracle 
>> build
>>  > ?> ?needs Oracle files that aren't freely redistributable. Ok
>>  It's a good
>>  > ?> ?reason.
>>
>>  You can freely download all the necessary files to compile against 
>> OCI
>>  from [LINK: http://oracle.com] oracle.com.
>>
>>  > ?>
>>  > ?> ?I found a library, called OCILIB (<[LINK:
>>  > ?> ?[LINK: http://orclib.sourceforge.net/]
>>  http://orclib.sourceforge.net/] [LINK: 
>> http://orclib.sourceforge.net/]
>>  http://orclib.sourceforge.net/>), that
>>
>>  > ?> ?enable your software to dynamically connect to your oracle
>>  database. This
>>  > ?> ?library does not require any oracle library to compile. It's
>>  available on
>>  > ?> ?any platform where oracle client is available and it licensed 
>> with
>>  LGPL.
>>
>>  The OCILIB library is just a shell around OCI. You still need OCI
>>  distribution from a server, client or instant client installation 
>> in order
>>  to compile or run any code based on that library.
>>
>>
>>  > ?> ?But before going further, I would like to know if it seems to 
>> you
>>  a
>>  > ?> ?good way to have Oracle support available by default in any 
>> OSGeo
>>  software
>>
>>  The OSGeo4W and Tamasz packages solutions are working pretty well 
>> for
>>  Windows users, so far. For QGIS all you have to do is to enable the 
>> Oracle
>>  Raster driver, is you want to use GeoRaster. Works pretty fast if 
>> the image
>>  has overviews. Please note that other OSGeo and commercial software 
>> can
>>  also access Oracle Spatial through GDAL.
>>
>>
>>  > ?> ?Depending of your answers, I 'll come back to ask you how
>>  it's the
>>  > ?> ?best way to do that ?
>>
>>  I hope that would answer your question.
>>
>>  Regards,
>>
>>  Ivan
>>
>>
>>  --
>>  Vincent Rogier
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From zoltans at geograph.co.za  Tue Jul 24 00:44:39 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue, 24 Jul 2012 09:44:39 +0200
Subject: [gdal-dev] Batch conversion ECW to TIFF
Message-ID: <500E5267.2050704@geograph.co.za>

Hi GDALers,

I need to convert ECW files to GeoTIFF (and not the other way round).
I have 20 or so files now, but will be getting >1000 of them, so batch 
must be the way to go.

I would prefer a linux solution, but I see that the "free" Erdas SDK is 
only for windows.
On my Win7 (64 bit) box I only have Qt 4.7.4 (32 bit) [built Jan 26 2012 
version]. The Qt Creator version is 2.4.1

I have minimal experience with Qt so my question is is:

What is my best way forward?
Is there a Linux command line solution?

Thanks in advance,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From chaitanya.ch at gmail.com  Tue Jul 24 01:04:55 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 24 Jul 2012 13:34:55 +0530
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <1343114291.95830.YahooMailNeo@web190006.mail.sg3.yahoo.com>
References: <CAMKgpOZEtSTXai5Qts-5rHj1CV3ptXp+pMCGFY7SHUhob6P1Hg@mail.gmail.com>
	<CAMKgpObVd3MTj_Tw57HNkMqC=v8+CDPj3y-oRQrwK=1o3gBe+A@mail.gmail.com>
	<1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
	<1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>
	<1343103647.15439.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<CAMKgpOaz9FfBdv1=bf9qJaBDB1a1FV8t4jfbVOmOscTghGvHBg@mail.gmail.com>
	<1343114291.95830.YahooMailNeo@web190006.mail.sg3.yahoo.com>
Message-ID: <CAMKgpOZET2m9SBAFtYkcmJOugMjrNJ31K1Z9QtKzvt=FGrDK1g@mail.gmail.com>

Tai,

Geos code is not enabled in GDAL without the third line you omitted.
Check the compilation messages to identify the problem.
Perform a 'clean' before you build until this problem is resolved.

On Tue, Jul 24, 2012 at 12:48 PM, taibc <taibc_coltech at yahoo.com> wrote:

> Thanks Chaitanya,
>
> I modified as your suggestion. But, still got the error (GEOS support not
> enable) when executing the program.
> About building GEOS, if I only add two first lines, the process will be
> sucessful:
>
> 1. GEOS_DIR = C:/geos-3.3.5
> 2. GEOS_LIB = $(GEOS_DIR)/src/geos_c_i.lib
>
> if I add third line, the building process will get errors
> 3. GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/include/geos
> -DHAVE_GEOS
>
> Errors:
> LINK : fatal error LNK1181: cannot open input file
> 'ogr\ogrsf_frmts\ogrsf_frmts.
> lib'
>
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 10.0\VC\BI
> N\lib.EXE"' : return code '0x49d'
> Stop.
>
> Thanks and regards,
>
> Tai
>   ------------------------------
> *From:* chaitanya_ch [via OSGeo.org] <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990291&i=0>
> >
> *To:* taibc <[hidden email]<http://user/SendEmail.jtp?type=node&node=4990291&i=1>>
>
> *Sent:* Tuesday, July 24, 2012 12:48 PM
>
> *Subject:* Re: How to identify a point is belong to a polygon ?
>
>  Tai,
>
> The environment variables can be set at the command prompt temporarily
> using
>
> SET LD_LIBRARY_PATH=C:\path\to\gdal\libraries
> SET GDAL_DATA=C:\path\to\gdal\libraries\data
>
> You can set them in the project settings in VC++. I don't know how.
> You can also set them system wide at MyComputer->Settings.
>
>
>
> ------------------------------
> View this message in context: Re: How to identify a point is belong to a
> polygon ?<http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990291.html>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/d9d38da5/attachment.html>

From stefano.iacovella at gmail.com  Tue Jul 24 01:08:07 2012
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 24 Jul 2012 10:08:07 +0200
Subject: [gdal-dev] Batch conversion ECW to TIFF
In-Reply-To: <500E5267.2050704@geograph.co.za>
References: <500E5267.2050704@geograph.co.za>
Message-ID: <CAG9OqYqa2ZfTEz=zmMc1eD_0su5jRkambUG80-B31EA4j5Shgg@mail.gmail.com>

Hi Zoltan

A couple of years ago I downloaded the SDK to compile GDAL with ECW
support on linux too.
At now it is no more available and it is not completely clear to me if
using it, under the license terms included, is legal. I can send you
the license agreement to have a look and see if this could be a
solution.

Regards

Stefano
---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas


2012/7/24 Zoltan Szecsei <zoltans at geograph.co.za>:
> Hi GDALers,
>
> I need to convert ECW files to GeoTIFF (and not the other way round).
> I have 20 or so files now, but will be getting >1000 of them, so batch must
> be the way to go.
>
> I would prefer a linux solution, but I see that the "free" Erdas SDK is only
> for windows.
> On my Win7 (64 bit) box I only have Qt 4.7.4 (32 bit) [built Jan 26 2012
> version]. The Qt Creator version is 2.4.1
>
> I have minimal experience with Qt so my question is is:
>
> What is my best way forward?
> Is there a Linux command line solution?
>
> Thanks in advance,
> Zoltan
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Tue Jul 24 01:14:25 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 24 Jul 2012 13:44:25 +0530
Subject: [gdal-dev] Batch conversion ECW to TIFF
In-Reply-To: <500E5267.2050704@geograph.co.za>
References: <500E5267.2050704@geograph.co.za>
Message-ID: <CAMKgpObvaf0Wve+T-hemUZ_RLQfRf22=dPPH8D0khWWR_8NPLw@mail.gmail.com>

Zoltan,

These are a bit outdated but still usable.
http://trac.osgeo.org/gdal/wiki/ECW
http://trac.osgeo.org/ubuntugis/wiki/UserTutorials

On Tue, Jul 24, 2012 at 1:14 PM, Zoltan Szecsei <zoltans at geograph.co.za>wrote:

> Hi GDALers,
>
> I need to convert ECW files to GeoTIFF (and not the other way round).
> I have 20 or so files now, but will be getting >1000 of them, so batch
> must be the way to go.
>
> I would prefer a linux solution, but I see that the "free" Erdas SDK is
> only for windows.
> On my Win7 (64 bit) box I only have Qt 4.7.4 (32 bit) [built Jan 26 2012
> version]. The Qt Creator version is 2.4.1
>
> I have minimal experience with Qt so my question is is:
>
> What is my best way forward?
> Is there a Linux command line solution?
>
> Thanks in advance,
> Zoltan
>
>
> --
>
> ==============================**=============
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ==============================**=============
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/5ce54706/attachment.html>

From zoltans at geograph.co.za  Tue Jul 24 01:15:40 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue, 24 Jul 2012 10:15:40 +0200
Subject: [gdal-dev] Batch conversion ECW to TIFF
In-Reply-To: <CAG9OqYqa2ZfTEz=zmMc1eD_0su5jRkambUG80-B31EA4j5Shgg@mail.gmail.com>
References: <500E5267.2050704@geograph.co.za>
	<CAG9OqYqa2ZfTEz=zmMc1eD_0su5jRkambUG80-B31EA4j5Shgg@mail.gmail.com>
Message-ID: <500E59AC.3000006@geograph.co.za>

Hi Stefano,
I would be interested to look, but my guess is if it was legal then, 
then it is legal now.
The real problem that may come up is that that sdk might not link 
against the current gdal.
Regards,
Zoltan

On 2012/07/24 10:08, Stefano Iacovella wrote:
> Hi Zoltan
>
> A couple of years ago I downloaded the SDK to compile GDAL with ECW
> support on linux too.
> At now it is no more available and it is not completely clear to me if
> using it, under the license terms included, is legal. I can send you
> the license agreement to have a look and see if this could be a
> solution.
>
> Regards
>
> Stefano
>
> I would prefer a linux solution, but I see that the "free" Erdas SDK is only
> for windows.
> On my Win7 (64 bit) box I only have Qt 4.7.4 (32 bit) [built Jan 26 2012
> version]. The Qt Creator version is 2.4.1
>
> I have minimal experience with Qt so my question is is:
>
> What is my best way forward?
> Is there a Linux command line solution?
>
> Thanks in advance,
> Zoltan
>
>

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From a.neumann at carto.net  Tue Jul 24 01:15:43 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 24 Jul 2012 10:15:43 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <500D6D27.5040302@mapgears.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
	<500D6D27.5040302@mapgears.com>
Message-ID: <64fca61cafa59ddcff36bd09932f5859@carto.net>

 Hi,

 I agree that such a provider would probably slow - too slow for a 
 server, unless the data is cached somewhere (e.g. sqlite) and ogr only 
 reads new/updated files, and the rest from the cache.

 On the other hand it would still be useful for conversion into other 
 formats, where speed perhaps doesn't matter that much.

 Andreas

 On Mon, 23 Jul 2012 11:26:31 -0400, Daniel Morissette wrote:
> If I understand correctly, in the Open() call, this driver would open
> each image file to read its EXIF info and index the files in memory?
> This would work fine with a dozen images, but as the number of images
> increases the performance will suffer a lot and this would become
> unusable in apps such as MapServer, and even for Desktop apps with
> hundreds of images.
>
> If I needed this kind of functionality myself I would use a script to
> create an OGR point file as suggested by Even, to avoid the overhead
> caused by opening all the images.
>
> My 0.02$
>
> Daniel
>
>
> On 12-07-23 5:27 AM, Tamas Szekeres wrote:
>> Hi Even,
>>
>> I just want to use the directory name to define the connection to 
>> the
>> images, we could also provide to scan the files in subdirectories if
>> needed. I would prefer to have a new driver not just an offline tool 
>> for
>> creating OGR datasets, in this case many existing applications (like
>> MapServer) would be capable to utilize this feature.
>> I could imagine a driver configuration file to specify which driver
>> should be used for a particular image format and where the specific
>> information is located, I don't require to harmonize the metadata
>> structure at this time. We should probably allow mixing jpegs and 
>> tiffs
>> in the same directory, but the configuration should specify how the
>> similar attributes are provided by each (sub)driver.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2012/7/23 Even Rouault <even.rouault at mines-paris.org
>> <mailto:even.rouault at mines-paris.org>>
>>
>>     Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>>      > Hi All,
>>      >
>>      > We're thinking about implementing a new OGR driver which 
>> would
>>     represent a
>>      > set of images as a vector data source. The images are taken 
>> from
>>     any GPS
>>      > compatible mobile device, and each picture would be 
>> represented
>>     as a point
>>      > feature, the positions would be extracted from the exif
>>     information. The
>>      > file name and path would be provided as an attribute for each
>>     feature. This
>>      > data source could then be used by higher level apps to 
>> provide
>>     symbols at
>>      > the picture locations in the map and display the picture when 
>> the
>>     feature
>>      > is selected. The driver would definitely use GDAL to extract
>>     information
>>      > about the provided images.
>>      >
>>      > I'm not sure whether we already have some kind of alternative
>>     solution to
>>      > this, let me know if you know about any. Further ideas about 
>> this
>>     topic
>>      > would also be helpful.
>>
>>     The JPEG driver already exposes EXIF information if found :
>>
>>     $ gdalinfo ../autotest/gdrivers/data/albania.jpg
>>     Driver: JPEG/JPEG JFIF
>>     Files: ../autotest/gdrivers/data/albania.jpg
>>     Size is 361, 260
>>     Coordinate System is `'
>>     Metadata:
>>     [...]
>>        EXIF_GPSLatitude=(41) (1) (22.91)
>>        EXIF_GPSLatitudeRef=N
>>        EXIF_GPSLongitude=(19) (55) (42.35)
>>        EXIF_GPSLongitudeRef=E
>>     [...]
>>
>>     $ gdalinfo ../autotest/gcore/data/exif_and_gps.tif -mdd EXIF
>>     Driver: GTiff/GeoTIFF
>>     Files: ../autotest/gcore/data/exif_and_gps.tif
>>     Size is 1, 1
>>     Coordinate System is `'
>>     [..]
>>     Metadata (EXIF):
>>     [...]
>>        EXIF_GPSLatitude=(77) (5) (60)
>>        EXIF_GPSLatitudeRef=S
>>        EXIF_GPSLongitude=(34) (12) (0)
>>        EXIF_GPSLongitudeRef=E
>>     [..]
>>
>>     Are you thinking to other raster formats to extract EXIF info 
>> from?
>>     To my
>>     knowledge, the JPEG driver, and recently the GTiff driver, are 
>> the
>>     only one
>>     that extract EXIF for now. I see that the JPEG driver exposes it 
>> in the
>>     default metadata domain, whereas I chose EXIF for the GTiff 
>> driver.
>>     For GTiff,
>>     the specific EXIF metadata domain seemed better to me to avoid
>>     'polluting' the
>>     default metadata domain, but I didn't want to change the JPEG 
>> driver
>>     at that
>>     point. But this would probably requires some harmonization.
>>
>>     So with some scripting, you could create for example a point
>>     shapefile, with
>>     the filename as attribute and GPS position as geometry.
>>
>>     In its syntax, this could be something similar to gdaltindex.
>>
>>     Doing that as a OGR driver would be also doable of course. The 
>> only
>>     point to
>>     solve is the definition of the connexion string to specify the 
>> image
>>     set.
>>
>>      >
>>      > Best regards,
>>      >
>>      > Tamas
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From jrepetto at free.fr  Tue Jul 24 00:52:12 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 24 Jul 2012 09:52:12 +0200
Subject: [gdal-dev] Batch conversion ECW to TIFF
In-Reply-To: <500E5267.2050704@geograph.co.za>
References: <500E5267.2050704@geograph.co.za>
Message-ID: <500E542C.7090702@free.fr>

Le 24/07/2012 09:44, Zoltan Szecsei a ?crit :
> Hi GDALers,
>
> I need to convert ECW files to GeoTIFF (and not the other way round).
> I have 20 or so files now, but will be getting >1000 of them, so batch
> must be the way to go.
>
> I would prefer a linux solution, but I see that the "free" Erdas SDK is
> only for windows.

No, you can still use the version 3.3 of the SDK, which is available for 
Linux.

> Is there a Linux command line solution?

Yes, you just have to write a small script. For example :

for file in $(ls *.ecw); do
	gdal_translate $file ${file/ecw/tif}
done


Jean-Claude


From stefano.iacovella at gmail.com  Tue Jul 24 01:22:53 2012
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 24 Jul 2012 10:22:53 +0200
Subject: [gdal-dev] Batch conversion ECW to TIFF
In-Reply-To: <500E59AC.3000006@geograph.co.za>
References: <500E5267.2050704@geograph.co.za>
	<CAG9OqYqa2ZfTEz=zmMc1eD_0su5jRkambUG80-B31EA4j5Shgg@mail.gmail.com>
	<500E59AC.3000006@geograph.co.za>
Message-ID: <CAG9OqYo61Cd0SQuZa+TeVznM7Y-5kRNdnF+Sxh+Y6X-AbJ_UJg@mail.gmail.com>

2012/7/24 Zoltan Szecsei <zoltans at geograph.co.za>:
> Hi Stefano,
> I would be interested to look, but my guess is if it was legal then, then it
> is legal now.
> The real problem that may come up is that that sdk might not link against
> the current gdal.
I succeded compiling against 1.9.0, did not try but I guess should
compile against 1.9.1 too

I will send you license agreement and can share the sources

Regards

Stefano

> Regards,
> Zoltan
>
>
> On 2012/07/24 10:08, Stefano Iacovella wrote:
>>
>> Hi Zoltan
>>
>> A couple of years ago I downloaded the SDK to compile GDAL with ECW
>> support on linux too.
>> At now it is no more available and it is not completely clear to me if
>> using it, under the license terms included, is legal. I can send you
>> the license agreement to have a look and see if this could be a
>> solution.
>>
>> Regards
>>
>> Stefano
>>
>> I would prefer a linux solution, but I see that the "free" Erdas SDK is
>> only
>> for windows.
>> On my Win7 (64 bit) box I only have Qt 4.7.4 (32 bit) [built Jan 26 2012
>> version]. The Qt Creator version is 2.4.1
>>
>> I have minimal experience with Qt so my question is is:
>>
>> What is my best way forward?
>> Is there a Linux command line solution?
>>
>> Thanks in advance,
>> Zoltan
>>
>>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From taibc_coltech at yahoo.com  Tue Jul 24 02:50:41 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Tue, 24 Jul 2012 02:50:41 -0700 (PDT)
Subject: [gdal-dev] How to identify a point is belong to a polygon ?
In-Reply-To: <CAMKgpOZET2m9SBAFtYkcmJOugMjrNJ31K1Z9QtKzvt=FGrDK1g@mail.gmail.com>
References: <1342853369586-4989766.post@n6.nabble.com>
	<CAMKgpObq+C3PBP-eSBBb=RkOitVby0uvTkquB-DsW3p1XK-U+A@mail.gmail.com>
	<1343040779412-4990028.post@n6.nabble.com>
	<CABUeae-ssojMsVE7JNVge0bQpq0m83i-hf9ukLy3H88oVbHZHg@mail.gmail.com>
	<1343095653.67269.YahooMailNeo@web190002.mail.sg3.yahoo.com>
	<CAMKgpOaimB0XS8x2VUv4E7M8xZLJ8Ne9brMqfQ2AaW0zFKVQSA@mail.gmail.com>
	<1343103647.15439.YahooMailNeo@web190005.mail.sg3.yahoo.com>
	<CAMKgpOaz9FfBdv1=bf9qJaBDB1a1FV8t4jfbVOmOscTghGvHBg@mail.gmail.com>
	<1343114291.95830.YahooMailNeo@web190006.mail.sg3.yahoo.com>
	<CAMKgpOZET2m9SBAFtYkcmJOugMjrNJ31K1Z9QtKzvt=FGrDK1g@mail.gmail.com>
Message-ID: <1343123427.3898.YahooMailNeo@web190004.mail.sg3.yahoo.com>

Thanks chaitanya,

I resolved the errors by downloading GEO-3.2.3 (arrangement of folders in geo-3.2.3 is different from geo-3.3.5), re-build geo and gdal.

Kind regards,

Tai



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-identify-a-point-is-belong-to-a-polygon-tp4989501p4990341.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/2838114a/attachment.html>

From sunilkp at yahoo-inc.com  Tue Jul 24 03:55:45 2012
From: sunilkp at yahoo-inc.com (Sunil Padda)
Date: Tue, 24 Jul 2012 16:25:45 +0530
Subject: [gdal-dev] Compiling GDAL JNI libraries
Message-ID: <500E7F31.9010104@yahoo-inc.com>

Hi,

I am trying to compile GDAL with Java bindings, but am facing issues. 
Here is what I have done:
1. Download gdal source from http://trac.osgeo.org/gdal/wiki/DownloadSource
2. Build gdal libraries
     cd gdal
     ./configure
     make
     sudo make install
3. Install SWIG
4. Update JAVA_HOME in gdal/swig/java/java.opt
5. Build gdal JNI
     cd gdal/swig/java
     make

I am seeing errors like this:
wanthunger-dx 16:00:56 ~/downloads/gdal-1.9.1/swig/java $ make
mkdir -p org/gdal/gdal
mkdir -p org/gdal/gdalconst
mkdir -p org/gdal/ogr
mkdir -p org/gdal/osr
/bin/sh /home/sunilkp/downloads/gdal-1.9.1/libtool --mode=compile 
--tag=CXX g++ -fno-strict-aliasing -g -O2  -Wall 
-Wdeclaration-after-statement -I/home/sunilkp/downloads/gdal-1.9.1/port 
-I/home/sunilkp/downloads/gdal-1.9.1/gcore 
-I/home/sunilkp/downloads/gdal-1.9.1/alg 
-I/home/sunilkp/downloads/gdal-1.9.1/ogr 
-I/home/sunilkp/downloads/gdal-1.9.1/ogr/ogrsf_frmts 
-I"/home/y/libexec/jdk1.6.0"/include 
-I"/home/y/libexec/jdk1.6.0"/include/linux -c gdal_wrap.cpp
libtool: compile:  g++ -fno-strict-aliasing -g -O2 -Wall 
-Wdeclaration-after-statement -I/home/sunilkp/downloads/gdal-1.9.1/port 
-I/home/sunilkp/downloads/gdal-1.9.1/gcore 
-I/home/sunilkp/downloads/gdal-1.9.1/alg 
-I/home/sunilkp/downloads/gdal-1.9.1/ogr 
-I/home/sunilkp/downloads/gdal-1.9.1/ogr/ogrsf_frmts 
-I/home/y/libexec/jdk1.6.0/include 
-I/home/y/libexec/jdk1.6.0/include/linux -c gdal_wrap.cpp  -fPIC -DPIC 
-o .libs/gdal_wrap.o
cc1plus: warning: command line option "-Wdeclaration-after-statement" is 
valid for C/ObjC but not for C++
gdal_wrap.cpp: In function `_jstring* 
Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*, 
jlong)':
gdal_wrap.cpp:4600: error: `GDALDriverShadow_get_ShortName' was not 
declared in this scope
gdal_wrap.cpp:4600: warning: unused variable 
'GDALDriverShadow_get_ShortName'

I don't have experience in C++ or Make, so couldn't figure out how to 
fix this. But, it looks like some problem with a) referenced gdal c++ 
headers/libraries or b) invalid compiler options

It would be great if you can help me fix this issue.

Thanks,
Sunil

From Michael.Duller at goodrich.com  Tue Jul 24 04:21:10 2012
From: Michael.Duller at goodrich.com (Duller, Michael)
Date: Tue, 24 Jul 2012 12:21:10 +0100
Subject: [gdal-dev] GDAL, Kakadu 7 & JPIP Streaming
Message-ID: <F52876411F027A4FA646577165F65C1602EB640B@NHC2EX13.goodrich.root.local>

GDAL Mailing List,

 

I am wondering if anyone has had success JPIP streaming with GDAL &
Kakadu 7.

We are looking to upgrade to Kakadu 7 (from 6.3.1) for the new UDP
capability. 

 

I have managed to get everything compiled, with the JPIP support
included, however when I stream imagery I get invalid data the current
region I am requesting. The data I get sent from the server seems to be
from an invalid region on the image, resulting in major artefacts. 

 

I believe this is due to changes in kdu_window, as mentioned in
jp2kakdataset.cpp, but I have extremely limited experience in modifying
the GDAL Source.

 

The code changes I made are as explained here:
http://trac.osgeo.org/gdal/ticket/4575 

I have also uncommented line 59 (#define USE_JPIP). 

 

Any help would be much appreciated.

 

Regards,

 

Michael Duller, Software Engineer, Goodrich ISR Systems
Malvern Hills Science Park, Geraldine Road, Malvern, WR14 3SZ, UK;
www.goodrich.com <http://www.goodrich.com/> 
Tel: +44 (0) 1684 899731; Fax: +44 (0) 1684 899 710;
Michael.Duller at goodrich.com <mailto:Michael.Duller at goodrich.com>  

 

P Please consider your environmental responsibility before printing this
e-mail

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/298813ab/attachment.html>

From ari.jolma at gmail.com  Tue Jul 24 06:26:20 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 24 Jul 2012 16:26:20 +0300
Subject: [gdal-dev] GDAL, Kakadu 7 & JPIP Streaming
In-Reply-To: <F52876411F027A4FA646577165F65C1602EB640B@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C1602EB640B@NHC2EX13.goodrich.root.local>
Message-ID: <500EA27C.6030200@gmail.com>

On 07/24/2012 02:21 PM, Duller, Michael wrote:
>
> GDAL Mailing List,
>
> I am wondering if anyone has had success JPIP streaming with GDAL & 
> Kakadu 7.
>
> We are looking to upgrade to Kakadu 7 (from 6.3.1) for the new UDP 
> capability.
>
> I have managed to get everything compiled, with the JPIP support 
> included, however when I stream imagery I get invalid data the current 
> region I am requesting. The data I get sent from the server seems to 
> be from an invalid region on the image, resulting in major artefacts.
>
> I believe this is due to changes in kdu_window, as mentioned in 
> jp2kakdataset.cpp, but I have extremely limited experience in 
> modifying the GDAL Source.
>
> The code changes I made are as explained here: 
> http://trac.osgeo.org/gdal/ticket/4575
>
> I have also uncommented line 59 (#define USE_JPIP).
>

Michael,

I'm the reporter of ticket #4575. I (we) have not tried GDAL with Kakadu 
with JPIP -  in fact JPIP is unknown to me but it looks interesting and 
probably would be very useful to us too.

Best regards,

Ari

> Any help would be much appreciated.
>
> Regards,
>
> *Michael Duller, Software Engineer, Goodrich ISR Systems
> *Malvern Hills Science Park, Geraldine Road, Malvern, WR14 3SZ, UK; 
> _www.goodrich.com <http://www.goodrich.com/>
> _Tel: +44 (0) 1684 899731; Fax: +44 (0) 1684 899 710; 
> Michael.Duller at goodrich.com <mailto:Michael.Duller at goodrich.com>
>
> P***Please consider your environmental responsibility before printing 
> this e-mail*
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/c77af8df/attachment.html>

From jdmorgan at unca.edu  Tue Jul 24 06:57:05 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Tue, 24 Jul 2012 09:57:05 -0400
Subject: [gdal-dev] add string field to img
Message-ID: <500EA9B1.6050605@gmail.com>

Hello,
I was hoping someone could help me out.  I have a raster .img file. with 
existing pixel values.  Those values are integer, but are classed to 
string values not currently in the same .img file.  For example pixel 
value 2 means ClassTwo. Is it possible to add the string values (a new 
field) onto the raster .img file?

Thanks,
Derek

From chaitanya.ch at gmail.com  Tue Jul 24 07:13:58 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 24 Jul 2012 19:43:58 +0530
Subject: [gdal-dev] add string field to img
In-Reply-To: <500EA9B1.6050605@gmail.com>
References: <500EA9B1.6050605@gmail.com>
Message-ID: <CAMKgpOaPEkPvapBw+G6dCTnNGRhHTKx75OT9zHNvg3tdrEVuBw@mail.gmail.com>

Derek,

You can add this info as meta-data tags. You will have to define your own
names for the keys. Something like pix_1_class, pix_2_class, etc.

To add these you can use the -mo option with gdal_translate[1] or use a vrt
file[2]. You can create such a vrt file using gdal_translate too by setting
the output format (-of) to VRT.

[1]: http://www.gdal.org/gdal_translate.html
[2]: http://www.gdal.org/gdal_vrttut.html

On Tue, Jul 24, 2012 at 7:27 PM, jdmorgan <jdmorgan at unca.edu> wrote:

> Hello,
> I was hoping someone could help me out.  I have a raster .img file. with
> existing pixel values.  Those values are integer, but are classed to string
> values not currently in the same .img file.  For example pixel value 2
> means ClassTwo. Is it possible to add the string values (a new field) onto
> the raster .img file?
>
> Thanks,
> Derek
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/c7881a1b/attachment.html>

From Michael.Duller at goodrich.com  Tue Jul 24 03:26:29 2012
From: Michael.Duller at goodrich.com (Duller, Michael)
Date: Tue, 24 Jul 2012 11:26:29 +0100
Subject: [gdal-dev] GDAL, Kakadu 7 & JPIP Streaming
Message-ID: <F52876411F027A4FA646577165F65C1602EB63D7@NHC2EX13.goodrich.root.local>

GDAL Mailing List,

 

I am wondering if anyone has had success JPIP streaming with GDAL &
Kakadu 7.

We are looking to upgrade to Kakadu 7 (from 6.3.1) for the new UDP
capability. 

 

I have managed to get everything compiled, with the JPIP support
included, however when I stream imagery I get invalid data the current
region I am requesting. The data I get sent from the server seems to be
from an invalid region on the image, resulting in major artefacts. 

 

I believe this is due to changes in kdu_window, as mentioned in
jp2kakdataset.cpp, but I have extremely limited experience in modifying
the GDAL Source.

 

The code changes I made are as explained here:
http://trac.osgeo.org/gdal/ticket/4575 

I have also uncommented line 59 (#define USE_JPIP). 

 

Any help would be much appreciated.

 

Michael Duller, Software Engineer, Goodrich ISR Systems
Malvern Hills Science Park, Geraldine Road, Malvern, WR14 3SZ, UK;
www.goodrich.com <http://www.goodrich.com/> 
Tel: +44 (0) 1684 899731; Fax: +44 (0) 1684 899 710;
Michael.Duller at goodrich.com <mailto:Michael.Duller at goodrich.com>  

 

P Please consider your environmental responsibility before printing this
e-mail

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120724/62404616/attachment-0001.html>

From warmerdam at pobox.com  Tue Jul 24 08:33:52 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 24 Jul 2012 08:33:52 -0700
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <201207231048.14475.even.rouault@mines-paris.org>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBf0EhXhOAQx6T5gA1uG5ax0wLCY89yBg-n9Tc4YRRzciA@mail.gmail.com>

On Mon, Jul 23, 2012 at 1:48 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Metadata (EXIF):
> [...]
>   EXIF_GPSLatitude=(77) (5) (60)
>   EXIF_GPSLatitudeRef=S
>   EXIF_GPSLongitude=(34) (12) (0)
>   EXIF_GPSLongitudeRef=E
> [..]
>
> Are you thinking to other raster formats to extract EXIF info from? To my
> knowledge, the JPEG driver, and recently the GTiff driver, are the only one
> that extract EXIF for now. I see that the JPEG driver exposes it in the
> default metadata domain, whereas I chose EXIF for the GTiff driver. For GTiff,
> the specific EXIF metadata domain seemed better to me to avoid 'polluting' the
> default metadata domain, but I didn't want to change the JPEG driver at that
> point. But this would probably requires some harmonization.

Even,

I'm not convinced that a distinct EXIF domain is the best way to go.
Non-default metadata domains are often not carried with images
during translation or other processing and are (imho) more appropriate
for data that would no longer apply to transformed imagery or that is
bulky and of very limited interest.

The EXIF metadata - at least the geolocation portions - is very relevant
even after many kinds of transformation, is not too bulky and is very
interesting to preserve.  Instead i'd be inclined to identify the EXIF
info as "well known" metadata names for the default domain.

Best regards
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From even.rouault at mines-paris.org  Tue Jul 24 09:25:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 24 Jul 2012 18:25:50 +0200
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CA+YzLBf0EhXhOAQx6T5gA1uG5ax0wLCY89yBg-n9Tc4YRRzciA@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CA+YzLBf0EhXhOAQx6T5gA1uG5ax0wLCY89yBg-n9Tc4YRRzciA@mail.gmail.com>
Message-ID: <1343147150.500ecc8ed905a@imp.free.fr>

> Even,
>
> I'm not convinced that a distinct EXIF domain is the best way to go.
> Non-default metadata domains are often not carried with images
> during translation or other processing and are (imho) more appropriate
> for data that would no longer apply to transformed imagery or that is
> bulky and of very limited interest.
>
> The EXIF metadata - at least the geolocation portions - is very relevant
> even after many kinds of transformation, is not too bulky and is very
> interesting to preserve.  Instead i'd be inclined to identify the EXIF
> info as "well known" metadata names for the default domain.

I'm OK to expose the decyphered content of TIFFTAG_EXIFIFD and TIFFTAG_GPSIFD in
the default domain if you think it is more appropriate. There should be no
technical difficulty, and it should not cause any particular performance problem
to do so.

The only point that might be a bit confusing, if they are exposed in the default
domain, is that if they gdal_translate a TIFF that has EXIF/GPS info to another
TIFF, they will be preserved as "standard" GDAL metadata (in the
TIFFTAG_GDAL_METADATA specific tag). So a user that will do gdalinfo on the
resulting TIFF will not realize that the metadata comes from the GDAL tag, and
that it will not be usable by applications that use EXIF/GPS tags. But that can
be documented as a limitation in the GTiff format page.

Or we could choose to strip EXIF_* items when writting them in
TIFFTAG_GDAL_METADATA to avoid that confusion ? Of course, the best would be to
implement write support for EXIF/GPS tags, but that's another story...

>
> Best regards
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



From woodbri at swoodbridge.com  Tue Jul 24 10:03:39 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue, 24 Jul 2012 13:03:39 -0400
Subject: [gdal-dev] New OGR driver: Imageset
In-Reply-To: <CACALY+RBdFsTD3SOGkU5j=21A3_jtj4dL5M8rhUsPpicNwCt+g@mail.gmail.com>
References: <CACALY+TnTwX2BUzR+vyJ5vtZ-nJAZd3g__6VB8YjbB1DpRsX=w@mail.gmail.com>
	<201207231048.14475.even.rouault@mines-paris.org>
	<CACALY+Q4BeaSWHWfzrwY+NW=8Yvp5NY3-=v+=C01kFY7cVapng@mail.gmail.com>
	<500D6D27.5040302@mapgears.com>
	<CACALY+RBdFsTD3SOGkU5j=21A3_jtj4dL5M8rhUsPpicNwCt+g@mail.gmail.com>
Message-ID: <500ED56B.9040401@swoodbridge.com>

Would it be possible to combine this with VRT XML such that when the 
images were read to build the VRT file that it also added the EXIF tags 
there. This would collect all the info into the VRT file and avoid 
re-reading all the individual images. Sorry this might be a dumb 
question as I'm not sure to what extent attributes can be imported from 
the source files into the VRT file, but maybe this is a valid use case 
for such an extension.

-Steve W

On 7/23/2012 5:13 PM, Tamas Szekeres wrote:
> Hi Daniel,
>
> Thanks for your comments. Your concerns are valid about the
> performance. But writing a script to convert images to shapefiles would
> likely provide similar performance. With regards to the usability,
> having a driver (and the use of ogr2ogr) would be more convenient even
> if that's used mostly as an offline solution. I'm not too satisfied with
> the practice of outsourcing significant tasks to external (language
> specific) scrips as "official" tools. This requires the user to be
> prepared to install further things (like runtime environments,
> additional libraries etc) in order to have the things up and
> running. The concept of having a new driver would provide further
> possibilities related to the common object model (like having OGR SQL to
> work)
>
> Best regards,
>
> Tamas
>
>
>
>
> 2012/7/23 Daniel Morissette <dmorissette at mapgears.com
> <mailto:dmorissette at mapgears.com>>
>
>     If I understand correctly, in the Open() call, this driver would
>     open each image file to read its EXIF info and index the files in
>     memory? This would work fine with a dozen images, but as the number
>     of images increases the performance will suffer a lot and this would
>     become unusable in apps such as MapServer, and even for Desktop apps
>     with hundreds of images.
>
>     If I needed this kind of functionality myself I would use a script
>     to create an OGR point file as suggested by Even, to avoid the
>     overhead caused by opening all the images.
>
>     My 0.02$
>
>     Daniel
>
>
>
>     On 12-07-23 5:27 AM, Tamas Szekeres wrote:
>
>         Hi Even,
>
>         I just want to use the directory name to define the connection
>         to the
>         images, we could also provide to scan the files in subdirectories if
>         needed. I would prefer to have a new driver not just an offline
>         tool for
>         creating OGR datasets, in this case many existing applications (like
>         MapServer) would be capable to utilize this feature.
>         I could imagine a driver configuration file to specify which driver
>         should be used for a particular image format and where the specific
>         information is located, I don't require to harmonize the metadata
>         structure at this time. We should probably allow mixing jpegs
>         and tiffs
>         in the same directory, but the configuration should specify how the
>         similar attributes are provided by each (sub)driver.
>
>         Best regards,
>
>         Tamas
>
>
>
>         2012/7/23 Even Rouault <even.rouault at mines-paris.org
>         <mailto:even.rouault at mines-paris.org>
>         <mailto:even.rouault at mines-__paris.org
>         <mailto:even.rouault at mines-paris.org>>>
>
>
>              Le lundi 23 juillet 2012 09:51:14, Tamas Szekeres a ?crit :
>               > Hi All,
>               >
>               > We're thinking about implementing a new OGR driver which
>         would
>              represent a
>               > set of images as a vector data source. The images are
>         taken from
>              any GPS
>               > compatible mobile device, and each picture would be
>         represented
>              as a point
>               > feature, the positions would be extracted from the exif
>              information. The
>               > file name and path would be provided as an attribute for
>         each
>              feature. This
>               > data source could then be used by higher level apps to
>         provide
>              symbols at
>               > the picture locations in the map and display the picture
>         when the
>              feature
>               > is selected. The driver would definitely use GDAL to extract
>              information
>               > about the provided images.
>               >
>               > I'm not sure whether we already have some kind of
>         alternative
>              solution to
>               > this, let me know if you know about any. Further ideas
>         about this
>              topic
>               > would also be helpful.
>
>              The JPEG driver already exposes EXIF information if found :
>
>              $ gdalinfo ../autotest/gdrivers/data/__albania.jpg
>              Driver: JPEG/JPEG JFIF
>              Files: ../autotest/gdrivers/data/__albania.jpg
>              Size is 361, 260
>              Coordinate System is `'
>              Metadata:
>              [...]
>                 EXIF_GPSLatitude=(41) (1) (22.91)
>                 EXIF_GPSLatitudeRef=N
>                 EXIF_GPSLongitude=(19) (55) (42.35)
>                 EXIF_GPSLongitudeRef=E
>              [...]
>
>              $ gdalinfo ../autotest/gcore/data/exif___and_gps.tif -mdd EXIF
>              Driver: GTiff/GeoTIFF
>              Files: ../autotest/gcore/data/exif___and_gps.tif
>              Size is 1, 1
>              Coordinate System is `'
>              [..]
>              Metadata (EXIF):
>              [...]
>                 EXIF_GPSLatitude=(77) (5) (60)
>                 EXIF_GPSLatitudeRef=S
>                 EXIF_GPSLongitude=(34) (12) (0)
>                 EXIF_GPSLongitudeRef=E
>              [..]
>
>              Are you thinking to other raster formats to extract EXIF
>         info from?
>              To my
>              knowledge, the JPEG driver, and recently the GTiff driver,
>         are the
>              only one
>              that extract EXIF for now. I see that the JPEG driver
>         exposes it in the
>              default metadata domain, whereas I chose EXIF for the GTiff
>         driver.
>              For GTiff,
>              the specific EXIF metadata domain seemed better to me to avoid
>              'polluting' the
>              default metadata domain, but I didn't want to change the
>         JPEG driver
>              at that
>              point. But this would probably requires some harmonization.
>
>              So with some scripting, you could create for example a point
>              shapefile, with
>              the filename as attribute and GPS position as geometry.
>
>              In its syntax, this could be something similar to gdaltindex.
>
>              Doing that as a OGR driver would be also doable of course.
>         The only
>              point to
>              solve is the definition of the connexion string to specify
>         the image
>              set.
>
>               >
>               > Best regards,
>               >
>               > Tamas
>
>
>
>
>         _________________________________________________
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>         http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>         <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>     --
>     Daniel Morissette
>     http://www.mapgears.com/
>     Provider of Professional MapServer Support since 2000
>
>
>
>
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Tue Jul 24 15:08:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 25 Jul 2012 00:08:24 +0200
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <CC33002F.2604E%michael.smith@usace.army.mil>
References: <CC33002F.2604E%michael.smith@usace.army.mil>
Message-ID: <201207250008.24933.even.rouault@mines-paris.org>

Le lundi 23 juillet 2012 19:25:22, Smith, Michael ERDC-CRREL-NH a ?crit :
> Even,
> 
> [osmusr at bigserver-proc osm]$ ogr2ogr -progress -f oci
> oci:user/pass at tns:tmp planet-latest.osm.pbf -lco dim=2 -lco srid=4326 -lco
> geometry_name=geometry -lco launder=yes --debug on  2>osm_debug.log
> 0...10...20...30...40...50...60?70
> [osmusr at bigserver-proc osm]$
> 
> 
> 
> From the debug output
> 

Michael,

The debug output would suggest that there was no more data to process, which 
is strange. I've tested a bit with a planet file dating back to a few weeks, 
with a modified OSM driver that does basically no processing except the 
parsing, and it managed to parse until the end of file. So in your situation, 
I'd assume that there was a parsing error, but I'm not 100% positive (might be 
something wrong in the "interleaved reading" mode ?)

I've commited in r24707 a change that is mainly a custom indexation mechanism 
for nodes (can be disabled with OSM_USE_CUSTOM_INDEXING=NO) to improve 
performances (Improve them about by a factor of 2 on a 1 GB PBF on my PC) 
Along with that change, I've added some facility for extra error outputs. If a 
parsing error occured, an error message will be printed. And, before 
recompiling, you can edit ogr/ogrsf_frmts/osm/gpb.h and uncomment (by removing 
the // at the beginning of //#define DEBUG_GPB_ERRORS) line 40. This should 
report a more precise error if there's something wrong during the GPB parsing.
You might also retry with --debug OSM and, at the end of the processing, 
you'll see a trace "Number of bytes read in file : XXXXXXXXXXX" : you can check 
that the value is the same as the size of the PBF file.

Even

From Michael.Smith at erdc.dren.mil  Tue Jul 24 15:45:32 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 24 Jul 2012 22:45:32 +0000
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <201207250008.24933.even.rouault@mines-paris.org>
Message-ID: <CC349DAD.309EC%michael.smith@erdc.dren.mil>

OK, I'll retest with these changes.

Thanks!

Mike

On 7/24/12 6:08 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Le lundi 23 juillet 2012 19:25:22, Smith, Michael ERDC-CRREL-NH a ?crit :
>> Even,
>> 
>> [osmusr at bigserver-proc osm]$ ogr2ogr -progress -f oci
>> oci:user/pass at tns:tmp planet-latest.osm.pbf -lco dim=2 -lco srid=4326
>>-lco
>> geometry_name=geometry -lco launder=yes --debug on  2>osm_debug.log
>> 0...10...20...30...40...50...60?70
>> [osmusr at bigserver-proc osm]$
>> 
>> 
>> 
>> From the debug output
>> 
>
>Michael,
>
>The debug output would suggest that there was no more data to process,
>which 
>is strange. I've tested a bit with a planet file dating back to a few
>weeks, 
>with a modified OSM driver that does basically no processing except the
>parsing, and it managed to parse until the end of file. So in your
>situation, 
>I'd assume that there was a parsing error, but I'm not 100% positive
>(might be 
>something wrong in the "interleaved reading" mode ?)
>
>I've commited in r24707 a change that is mainly a custom indexation
>mechanism 
>for nodes (can be disabled with OSM_USE_CUSTOM_INDEXING=NO) to improve
>performances (Improve them about by a factor of 2 on a 1 GB PBF on my PC)
>Along with that change, I've added some facility for extra error outputs.
>If a 
>parsing error occured, an error message will be printed. And, before
>recompiling, you can edit ogr/ogrsf_frmts/osm/gpb.h and uncomment (by
>removing 
>the // at the beginning of //#define DEBUG_GPB_ERRORS) line 40. This
>should 
>report a more precise error if there's something wrong during the GPB
>parsing.
>You might also retry with --debug OSM and, at the end of the processing,
>you'll see a trace "Number of bytes read in file : XXXXXXXXXXX" : you can
>check 
>that the value is the same as the size of the PBF file.
>
>Even


From Luke.Pinner at environment.gov.au  Tue Jul 24 16:35:48 2012
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Tue, 24 Jul 2012 23:35:48 +0000
Subject: [gdal-dev] Batch conversion ECW to TIFF [SEC=UNCLASSIFIED]
In-Reply-To: <500E5267.2050704@geograph.co.za>
References: <500E5267.2050704@geograph.co.za>
Message-ID: <08A7084C05C8C94A9EA11656A36D3EE10BB57D91@PVAC01EXMX01.internal.govt>

See below for Ubuntu instructions (for other distros you could probably grab the libgdal-ecw-src deb unpack manually and compile).

#Get libecwj 3.3 (the old SDK), it's available from a number of sources. 
# If the link below doesn't work, google for "libecwj2-3.3"
wget -nd https://api.opensuse.org/public/source/home:jluce2:GEO/libecwj/libecwj2-3.3.tar.bz2
tar -xvjf libecwj2-3.3.tar.bz2
cd libecwj2-3.3
./configure
make
sudo make install

#Install the gdal ecw plugin source package and build it
sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable && sudo apt-get update
sudo apt-get install libgdal-ecw-src build-essential
sudo gdal-ecw-build /usr/local
sudo ldconfig #this step is missing from UbuntuGIS tutorial

#Try it out
gdalinfo --formats|grep -i ecw
  ECW (rw): ERDAS Compressed Wavelets (SDK 3.x)
  JP2ECW (rw+v): ERDAS JPEG2000 (SDK 3.x)

#Then use gdal_translate to convert (assumes bash shell)
for f in *.ecw;do gdal_translate $f ${f%%.*}.tif;done

Luke 

If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.

From taibc_coltech at yahoo.com  Tue Jul 24 21:26:17 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Tue, 24 Jul 2012 21:26:17 -0700 (PDT)
Subject: [gdal-dev] How to change displayed decimal places of double type in
 the method: OGRFeature::SetField
Message-ID: <1343190377709-4990648.post@n6.nabble.com>

Hi friends,

I used the method: OGRFeature:SetField(int i, double dfValue) to set field
values of a shapefile file (.dbf file).

I changed dfValue format to display 2 digits in decimal places. But, when I
used the Excel to see values, it showed an unexpected result.

For example: 
First, dfValue = 2688.74923
After changing format (by using code), dfValue = 2688.75

But, when I saw values in the excel, it showed: 2688,750000000000000 (not
2688.75)

How can I fix it (don't need change format settings in excel)?

Thanks and regards,
Tai



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-change-displayed-decimal-places-of-double-type-in-the-method-OGRFeature-SetField-tp4990648.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Tue Jul 24 22:28:33 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 25 Jul 2012 10:58:33 +0530
Subject: [gdal-dev] How to change displayed decimal places of double
 type in the method: OGRFeature::SetField
In-Reply-To: <1343190377709-4990648.post@n6.nabble.com>
References: <1343190377709-4990648.post@n6.nabble.com>
Message-ID: <CAMKgpOa-qh+WpaUQAYZ2bQJxJxoarpz_Tg4T+hnmvUx=Qpz8Lg@mail.gmail.com>

Tai,

DBF formats allows specifying the precision of decimal values.
Check the field definition of the .dbf file using ogrinfo. If it shows a
precision of 2, you did all you can with OGR.

Excel, on the other hand, may have different rules. There is not much that
can be done with .dbf files to control the view in Excel.

On Wed, Jul 25, 2012 at 9:56 AM, taibc <taibc_coltech at yahoo.com> wrote:

> Hi friends,
>
> I used the method: OGRFeature:SetField(int i, double dfValue) to set field
> values of a shapefile file (.dbf file).
>
> I changed dfValue format to display 2 digits in decimal places. But, when I
> used the Excel to see values, it showed an unexpected result.
>
> For example:
> First, dfValue = 2688.74923
> After changing format (by using code), dfValue = 2688.75
>
> But, when I saw values in the excel, it showed: 2688,750000000000000 (not
> 2688.75)
>
> How can I fix it (don't need change format settings in excel)?
>
> Thanks and regards,
> Tai
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-change-displayed-decimal-places-of-double-type-in-the-method-OGRFeature-SetField-tp4990648.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120725/174458a6/attachment.html>

From taibc_coltech at yahoo.com  Wed Jul 25 00:59:08 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Wed, 25 Jul 2012 00:59:08 -0700 (PDT)
Subject: [gdal-dev] How to fix "Error 1: Invalid Index : -1"
Message-ID: <1343203148943-4990687.post@n6.nabble.com>

Hi friends,

My program use GEO and GDAL (with Visual Studio 2010, C++). After running
the program, there are many error messages: Error 1: Invalid Index : -1
(More than 1000 errors).

Although I set environment variable: GDAL_DATA = C:\gdal\data by modifying
settings of My Computer and Visual Studio, but still got these errors.

Do you know how to fix it ?

Thanks and regards,
Tai





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-fix-Error-1-Invalid-Index-1-tp4990687.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Wed Jul 25 01:19:12 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 25 Jul 2012 13:49:12 +0530
Subject: [gdal-dev] How to fix "Error 1: Invalid Index : -1"
In-Reply-To: <1343203148943-4990687.post@n6.nabble.com>
References: <1343203148943-4990687.post@n6.nabble.com>
Message-ID: <CAMKgpOZdMPxS7Ec1O5FoPPR09OpxcbpBNLCntMQsXYV8yoRqYA@mail.gmail.com>

Tai,

Please provide some more details. OGR Feature definition stores the fields
in a zero based array.

On Wed, Jul 25, 2012 at 1:29 PM, taibc <taibc_coltech at yahoo.com> wrote:

> Hi friends,
>
> My program use GEO and GDAL (with Visual Studio 2010, C++). After running
> the program, there are many error messages: Error 1: Invalid Index : -1
> (More than 1000 errors).
>
> Although I set environment variable: GDAL_DATA = C:\gdal\data by modifying
> settings of My Computer and Visual Studio, but still got these errors.
>
> Do you know how to fix it ?
>
> Thanks and regards,
> Tai
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-fix-Error-1-Invalid-Index-1-tp4990687.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120725/51ec4d81/attachment.html>

From polimax at mail.ru  Wed Jul 25 01:19:32 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Wed, 25 Jul 2012 12:19:32 +0400
Subject: [gdal-dev] encoding problem when reading DXF file
In-Reply-To: <CANJ4TWs5Q1a5AffabUcpWq9zMZBRsML9zEs+6cB1Uq40ceGpZg@mail.gmail.com>
References: <CANJ4TWuc_jnnYyWAgnTUTMpbiQ=Z65YB-hffHrJ=86iUoG7_hA@mail.gmail.com>
	<500E43B6.9070703@mail.ru>
	<CANJ4TWs5Q1a5AffabUcpWq9zMZBRsML9zEs+6cB1Uq40ceGpZg@mail.gmail.com>
Message-ID: <500FAC14.9000609@mail.ru>

25.07.2012 11:11, dequan chen ?????:
> hi Dmitry
> Should i need to download source code and modify a little, then build 
> myself ? I'm not familiar in C++. :-(
> but I want to know whether the latest version has revised the issue, 
> and where to get the gdal installation ?
> thanks a lot.
It's enough to create a ticket in http://trac.osgeo.org/gdal/ (see 
http://trac.osgeo.org/gdal/newticket for details)
Also your buggy data in attach is welcome.
<http://trac.osgeo.org/gdal/>
>
>     Hi Dequan,
>
>     It seems to me that is the similar issue
>     http://trac.osgeo.org/gdal/ticket/4650
>     Check TestCapability method of DXF driver
>
>     Best regards,
>         Dmitry
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
 >> Why the FWTools2.4.7 can encoding DXF lable correctly, but the 
latest build gdal is not support ?

In FWTools is present previous GDAL version. In GDAL 1.9.x there was a 
move to UTF encoding.
You can play with DXF_ENCODING option 
(http://trac.osgeo.org/gdal/wiki/ConfigOptions).

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120725/9e7be6c7/attachment-0001.html>

From taibc_coltech at yahoo.com  Wed Jul 25 03:07:47 2012
From: taibc_coltech at yahoo.com (taibc)
Date: Wed, 25 Jul 2012 03:07:47 -0700 (PDT)
Subject: [gdal-dev] How to fix "Error 1: Invalid Index : -1"
In-Reply-To: <CAMKgpOZdMPxS7Ec1O5FoPPR09OpxcbpBNLCntMQsXYV8yoRqYA@mail.gmail.com>
References: <1343203148943-4990687.post@n6.nabble.com>
	<CAMKgpOZdMPxS7Ec1O5FoPPR09OpxcbpBNLCntMQsXYV8yoRqYA@mail.gmail.com>
Message-ID: <1343210867483-4990716.post@n6.nabble.com>

Hi Chaitanya,

I used the blow statements :

// To fetch features

while( (poFeature = poLayer->GetNextFeature()) != NULL )
{
}

// To set fields

for (int fieldCount = 0; fieldCount < poFDefn->GetFieldCount(); fieldCount
++)
{
}

Kind regards,
Tai




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-fix-Error-1-Invalid-Index-1-tp4990687p4990716.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From zoltans at geograph.co.za  Wed Jul 25 06:47:23 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed, 25 Jul 2012 15:47:23 +0200
Subject: [gdal-dev] Clarke 1880 Cape Datum for gdalwarp
Message-ID: <500FF8EB.80606@geograph.co.za>

Hi,
Not sure if this should go to proj list, but I would like to transform 
about 14 jpg orthos (already in a vrt)
from Clarke 1880 Cape Datum, Lo33 to WGS84 Hartebeeshoek94 datum UTM 43S

The jpw file has:
0.0500000000000000030
0.0
0.0
-0.0500000000000000030
-50999.974999999999
-2872000.0249999999
so you'll probably notice that it is not the usual Gauss Conformal 
projection, as that would be +ve South and West for this area.

I'm having a bit of trouble finding the correct s_srs and t_srs values 
for gdalwarp.
I'm presuming that by inputting a vrt to gdalwarp, I will get 1 nice big 
ortho (instead of the 14 jpeg in the vrt), and I can then cut that up 
into 1Km squares on the new projection.

Once the orthos are done I will be needing to transform (as above) a 3D 
DGN file (yep, I'll re-write it as v7) and an ASCII DEM file as well. 
Typical DEM values are:
-50400.000,-2872481.000,-2.74
-50399.000,-2872481.000,-2.84


I'd be grateful for some help specifying the input and output CRS's

Thanks & regards,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From zoltans at geograph.co.za  Wed Jul 25 06:49:09 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed, 25 Jul 2012 15:49:09 +0200
Subject: [gdal-dev] Clarke 1880 Cape Datum for gdalwarp - t_srs correction
Message-ID: <500FF955.40102@geograph.co.za>

Sorry - I had UTM 43S in my first post. It should be UTM36S

Hi,
Not sure if this should go to proj list, but I would like to transform 
about 14 jpg orthos (already in a vrt)
from Clarke 1880 Cape Datum, Lo33 to WGS84 Hartebeeshoek94 datum UTM 36S

The jpw file has:
0.0500000000000000030
0.0
0.0
-0.0500000000000000030
-50999.974999999999
-2872000.0249999999
so you'll probably notice that it is not the usual Gauss Conformal 
projection, as that would be +ve South and West for this area.

I'm having a bit of trouble finding the correct s_srs and t_srs values 
for gdalwarp.
I'm presuming that by inputting a vrt to gdalwarp, I will get 1 nice big 
ortho (instead of the 14 jpeg in the vrt), and I can then cut that up 
into 1Km squares on the new projection.

Once the orthos are done I will be needing to transform (as above) a 3D 
DGN file (yep, I'll re-write it as v7) and an ASCII DEM file as well. 
Typical DEM values are:
-50400.000,-2872481.000,-2.74
-50399.000,-2872481.000,-2.84


I'd be grateful for some help specifying the input and output CRS's

Thanks & regards,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From sebastiandagostino at suremptec.com.ar  Wed Jul 25 10:27:41 2012
From: sebastiandagostino at suremptec.com.ar (Sebastian D'Agostino)
Date: Wed, 25 Jul 2012 14:27:41 -0300
Subject: [gdal-dev] Question about adding features to ESRI Shapefile without
	Geometry
Message-ID: <CANtUR0GVvJw8_UveZKG_2pPNVcVNNxe_pick-+UMT9Aiu1OGxA@mail.gmail.com>

Hi,

I wanted to know if there are any known issues regarding feature addition
from an ESRI Shapefile without a geometry.

I'm having problems adding features without any geometry after deleting
features.


Sebasti?n D'Agostino
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
sebastiandagostino at suremptec.com.ar <javierurien at suremptec.com.ar>
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120725/0ab1619d/attachment.html>

From even.rouault at mines-paris.org  Wed Jul 25 12:35:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 25 Jul 2012 21:35:35 +0200
Subject: [gdal-dev] Question about adding features to ESRI Shapefile
	without Geometry
In-Reply-To: <CANtUR0GVvJw8_UveZKG_2pPNVcVNNxe_pick-+UMT9Aiu1OGxA@mail.gmail.com>
References: <CANtUR0GVvJw8_UveZKG_2pPNVcVNNxe_pick-+UMT9Aiu1OGxA@mail.gmail.com>
Message-ID: <201207252135.35486.even.rouault@mines-paris.org>

Le mercredi 25 juillet 2012 19:27:41, Sebastian D'Agostino a ?crit :
> Hi,
> 
> I wanted to know if there are any known issues regarding feature addition
> from an ESRI Shapefile without a geometry.
> 
> I'm having problems adding features without any geometry after deleting
> features.

Sebastian,

What would be helpful would be a minimum code sample (standalone) that could 
enable us to reproduce that.

I have just tried the following python script :

~~~~~~~~~~~~~

from osgeo import ogr

ds = ogr.GetDriverByName('ESRI Shapefile').CreateDataSource('test.shp')
lyr = ds.CreateLayer('test')
lyr.CreateField(ogr.FieldDefn('foo', ogr.OFTString))

# Create a feature with geometry
feat = ogr.Feature(lyr.GetLayerDefn())
feat.SetField('foo', 'bar')
feat.SetGeometry(ogr.CreateGeometryFromWkt('POINT(0 1)'))
lyr.CreateFeature(feat)

# deletes the feature that we have just created
lyr.DeleteFeature(0)

# Creates a new feature without geometry
feat = ogr.Feature(lyr.GetLayerDefn())
feat.SetField('foo', 'baz')
lyr.CreateFeature(feat)

ds = None

~~~~~~~~~~~~~

and I get as expected (with both trunk and GDAL 1.9) :

$ ogrinfo test.shp -al
INFO: Open of `test.shp'
      using driver `ESRI Shapefile' successful.

Layer name: test
Geometry: Point
Feature Count: 2
Extent: (0.000000, 1.000000) - (0.000000, 1.000000)
Layer SRS WKT:
(unknown)
foo: String (80.0)
OGRFeature(test):1
  foo (String) = baz

But I'm not sure to have the whole context of what you tried....

Best regards,

Even

From even.rouault at mines-paris.org  Wed Jul 25 13:22:52 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 25 Jul 2012 22:22:52 +0200
Subject: [gdal-dev] Question about adding features to ESRI Shapefile
	without Geometry
In-Reply-To: <CANtUR0Gk=nB=Yb33LR1JFmawhPARB06K9qsWSHJTS8J5qRHE0Q@mail.gmail.com>
References: <CANtUR0GVvJw8_UveZKG_2pPNVcVNNxe_pick-+UMT9Aiu1OGxA@mail.gmail.com>
	<201207252135.35486.even.rouault@mines-paris.org>
	<CANtUR0Gk=nB=Yb33LR1JFmawhPARB06K9qsWSHJTS8J5qRHE0Q@mail.gmail.com>
Message-ID: <201207252222.53027.even.rouault@mines-paris.org>

Le mercredi 25 juillet 2012 22:09:32, Sebastian D'Agostino a ?crit :
> Hi Even,
> 
> Thank you very much for your reply.
> 
> I couldn't provide code for my question because it isn't standalone code
> (I'm using a couple of classes in a big C++ project).

Yes my suggestion was that you try to isolate the few lines of codes that are 
spread among your big project into something small and standalone so that 
people you are asking the question have a chance to investigate ;-)

> Besides, I'm doing it in the reverse order:
> lyr.CreateFeature(feat)
> feat.SetGeometry(None)

Ah, that won't work ! Any change you make on the feature after calling 
CreateFeature() will not be saved into the shapefile. You need to do it before. 
Or if you do it afterwards, you'll need to call lyr.SetFeature(feat) to update 
the on-file content (but if you can set the feature completely before calling 
CreateFeature(), that will be more efficient of course)

From bellengj at gmail.com  Wed Jul 25 15:34:03 2012
From: bellengj at gmail.com (Jim Bellenger)
Date: Wed, 25 Jul 2012 17:34:03 -0500
Subject: [gdal-dev] Problem with the GDAL 1.9.1 GDALmake.opt for ESRI
	FileGDB API 1.2 on Linux
Message-ID: <CAGtt-47P=qPgsgJgKcV5V9tWyyRzWuxMScTv4d8iz9cNP5kegw@mail.gmail.com>

I have found that there is a problem with how the GDALmake.opt file is
created with 1.9.1 on Linux when using the FileGDB API 1.2.

ESRI now has two .so files required so I think there should be the
following changes to the configure script

21840c21840
<     if test -z "`${CXX} ${CPPFLAGS} testfgdb.cpp -lFileGDBAPI -o testfgdb
2>&1`" ; then
---
>     if test -z "`${CXX} ${CPPFLAGS} testfgdb.cpp -lFileGDBAPI
-lfgdbunixrtl -o testfgdb 2>&1`" ; then
21844c21844
<         FGDB_LIB="-lFileGDBAPI"
---
>         FGDB_LIB="-lFileGDBAPI -lfgdbunixrtl"
21864c21864
<     FGDB_LIB="-L$with_fgdb/lib -lFileGDBAPI"
---
>     FGDB_LIB="-L$with_fgdb/lib -lFileGDBAPI -lfgdbunixrtl"
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120725/5ef1a615/attachment.html>

From even.rouault at mines-paris.org  Wed Jul 25 15:49:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 26 Jul 2012 00:49:45 +0200
Subject: [gdal-dev] Problem with the GDAL 1.9.1 GDALmake.opt for ESRI
	FileGDB API 1.2 on Linux
In-Reply-To: <CAGtt-47P=qPgsgJgKcV5V9tWyyRzWuxMScTv4d8iz9cNP5kegw@mail.gmail.com>
References: <CAGtt-47P=qPgsgJgKcV5V9tWyyRzWuxMScTv4d8iz9cNP5kegw@mail.gmail.com>
Message-ID: <201207260049.45625.even.rouault@mines-paris.org>

Le jeudi 26 juillet 2012 00:34:03, Jim Bellenger a ?crit :
> I have found that there is a problem with how the GDALmake.opt file is
> created with 1.9.1 on Linux when using the FileGDB API 1.2.
> 
> ESRI now has two .so files required so I think there should be the
> following changes to the configure script
> 
> 21840c21840
> <     if test -z "`${CXX} ${CPPFLAGS} testfgdb.cpp -lFileGDBAPI -o testfgdb
> 2>&1`" ; then
> ---
> 
> >     if test -z "`${CXX} ${CPPFLAGS} testfgdb.cpp -lFileGDBAPI
> 
> -lfgdbunixrtl -o testfgdb 2>&1`" ; then
> 21844c21844
> <         FGDB_LIB="-lFileGDBAPI"
> ---
> 
> >         FGDB_LIB="-lFileGDBAPI -lfgdbunixrtl"
> 
> 21864c21864
> <     FGDB_LIB="-L$with_fgdb/lib -lFileGDBAPI"
> ---
> 
> >     FGDB_LIB="-L$with_fgdb/lib -lFileGDBAPI -lfgdbunixrtl"


This should not be necessary, if the path to the filegdb is in LD_LIBRARY_PATH 
or ld.so.conf. In which case the dynamic loader will find libfgdbunixrtl.so . 
You will need to do it for runtime anyway.

From benjamin.lux at maxsea.fr  Thu Jul 26 01:28:50 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Thu, 26 Jul 2012 01:28:50 -0700 (PDT)
Subject: [gdal-dev]  Use Ogr Geometry childs classes in C#.
Message-ID: <1343291330822-4990983.post@n6.nabble.com>

Hi,

I code in C# with Ogr wrapers - gdal_csharp.dll, gdalconst_csharp.dll,
ogr_csharp.dll and osr_csharp.dll -
"release-1600-x64-gdal-1-9-0-mapserver-6-0-1".

I want use specifics polygon methods on my geometry as "OGRLinearRing *
OGRPolygon::getInteriorRing ( int iRing )".
(see
http://www.gdal.org/ogr/classOGRPolygon.html#af0bf0b1d1104e142b47637659518ad9c)

But it seems that the Polygon classe doesn't exist with the C# wraper.
There is a enum wkbGeometryType but not the class. 

I know nothing about swig but I took a look at swig files into sources
("gdal-1.9.1\swig\include\csharp") and, in fact, I didn't see the Geometry
childs classes.

Is it an ogr or a geos issue ?
Anyone know a C# wraper of Ogr that include these classes ?

----
Best regards,
Benjamin.





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Use-Ogr-Geometry-childs-classes-in-C-tp4990983.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Jul 26 01:33:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 26 Jul 2012 10:33:35 +0200
Subject: [gdal-dev] Use Ogr Geometry childs classes in C#.
In-Reply-To: <1343291330822-4990983.post@n6.nabble.com>
References: <1343291330822-4990983.post@n6.nabble.com>
Message-ID: <1343291615.501100dfb7655@imp.free.fr>

Selon Benjamin <benjamin.lux at maxsea.fr>:

> Hi,
>
> I code in C# with Ogr wrapers - gdal_csharp.dll, gdalconst_csharp.dll,
> ogr_csharp.dll and osr_csharp.dll -
> "release-1600-x64-gdal-1-9-0-mapserver-6-0-1".
>
> I want use specifics polygon methods on my geometry as "OGRLinearRing *
> OGRPolygon::getInteriorRing ( int iRing )".
> (see
>
http://www.gdal.org/ogr/classOGRPolygon.html#af0bf0b1d1104e142b47637659518ad9c)
>
> But it seems that the Polygon classe doesn't exist with the C# wraper.
> There is a enum wkbGeometryType but not the class.

Indeed, at the bindings level, only a Geometry class exists. It has a
GetGeometryRef(int) method that, for polygons, is such that :

- GetGeometryRef(0) returns the exterior ring
- GetGeometryRef(n) with n>=1 return what OGRPolygon::getInteriorRing(n-1) would
return

For multi-geometries, such as multipolygon, multilinestring, multipoint or
geometrycollection, GetGeometryRef(n) returns the n(th) (starting from 0)
sub-geometry in the multi-geometry.

From benjamin.lux at maxsea.fr  Thu Jul 26 05:59:56 2012
From: benjamin.lux at maxsea.fr (Benjamin)
Date: Thu, 26 Jul 2012 05:59:56 -0700 (PDT)
Subject: [gdal-dev] Use Ogr Geometry childs classes in C#.
In-Reply-To: <1343291615.501100dfb7655@imp.free.fr>
References: <1343291330822-4990983.post@n6.nabble.com>
	<1343291615.501100dfb7655@imp.free.fr>
Message-ID: <1343307596445-4991052.post@n6.nabble.com>

Thank for the answer.

Sorry for spam you but another question,

A call to  Geometry.SimplifyPreserveTopology() and Geometry.Simplify() on a
geometry multi-object - as GeometryCollection, MultiPolygon or
MultiLigneString - is just a recursive call on each object ?

Also I read : "This function is built on the GEOS library, check it for the
definition of the geometry operation."
But in the Geos webs pages, I didn't find the PreserveTopology version.
http://geos.osgeo.org/doxygen/functions_0x73.html#index_s

Best regards,
Benjamin.



Even Rouault wrote
> 
> Selon Benjamin &lt;benjamin.lux@&gt;:
> 
>> Hi,
>>
>> I code in C# with Ogr wrapers - gdal_csharp.dll, gdalconst_csharp.dll,
>> ogr_csharp.dll and osr_csharp.dll -
>> "release-1600-x64-gdal-1-9-0-mapserver-6-0-1".
>>
>> I want use specifics polygon methods on my geometry as "OGRLinearRing *
>> OGRPolygon::getInteriorRing ( int iRing )".
>> (see
>>
> http://www.gdal.org/ogr/classOGRPolygon.html#af0bf0b1d1104e142b47637659518ad9c)
>>
>> But it seems that the Polygon classe doesn't exist with the C# wraper.
>> There is a enum wkbGeometryType but not the class.
> 
> Indeed, at the bindings level, only a Geometry class exists. It has a
> GetGeometryRef(int) method that, for polygons, is such that :
> 
> - GetGeometryRef(0) returns the exterior ring
> - GetGeometryRef(n) with n>=1 return what OGRPolygon::getInteriorRing(n-1)
> would
> return
> 
> For multi-geometries, such as multipolygon, multilinestring, multipoint or
> geometrycollection, GetGeometryRef(n) returns the n(th) (starting from 0)
> sub-geometry in the multi-geometry.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at .osgeo
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Use-Ogr-Geometry-childs-classes-in-C-tp4990983p4991052.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From conrad_bielski at yahoo.com  Thu Jul 26 06:12:04 2012
From: conrad_bielski at yahoo.com (Conrad Bielski)
Date: Thu, 26 Jul 2012 06:12:04 -0700 (PDT)
Subject: [gdal-dev] compiling gdal with hdf4 (all from sources)
Message-ID: <1343308324.31364.YahooMailNeo@web33908.mail.mud.yahoo.com>

Hi,
I need to compile gdal with the HDF4-EOS extensions which I downloaded from here:
http://newsroom.gsfc.nasa.gov/sdptoolkit/TKDownload.html

Now the problem is similar to one mentioned back in Sat Feb 25 11:09:32 EST 2012 where compilation stopped due to the following error:
hdf4imagedataset.cpp: In member function 'void HDF4ImageDataset::GetSwatAttrs(int32)':
hdf4imagedataset.cpp:1723: error: 'SWsdid' was not declared in this scope
hdf4imagedataset.cpp: In member function 'void HDF4ImageDataset::GetGridAttrs(int32)':
hdf4imagedataset.cpp:1833: error: 'GDsdid' was not declared in this scope
hdf4imagedataset.cpp: In member function 'int HDF4ImageDataset::ProcessSwathGeolocation(int32, char**)':
hdf4imagedataset.cpp:2218: warning: deprecated conversion from string constant to 'char*'
hdf4imagedataset.cpp:2240: warning: deprecated conversion from string constant to 'char*'
hdf4imagedataset.cpp:2252: warning: deprecated conversion from string constant to 'char*'
make[2]: *** [../o/hdf4imagedataset.lo] Error 1
make[1]: *** [hdf4-install-obj] Error 2
make: *** [frmts-target] Error 2


Now the difference is that I'm not compiling on Ubuntu but rather Mac OSX Lion (10.7.4) but obviously there is an issue with the gdal includes. Is there a fix for this?

Background: the normal gdal hdf4 driver does not handle MISR imagery correctly so I was hoping to include the newest HDF-EOS drivers into my gdal install.

Thanks in advance for your help,
Conrad :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120726/400a3d4b/attachment.html>

From conrad_bielski at yahoo.com  Thu Jul 26 10:06:19 2012
From: conrad_bielski at yahoo.com (Conrad Bielski)
Date: Thu, 26 Jul 2012 10:06:19 -0700 (PDT)
Subject: [gdal-dev]  compiling gdal with hdf4 (all from sources)
Message-ID: <1343322379.42455.YahooMailNeo@web33904.mail.mud.yahoo.com>

Hello again,
I fixed the compilation issue. Basically in the file frmts/hdf4/hdf4imagedataset.cpp the include statement wasn't correct. It should have been hdf-eos/HdfEosDef.h where it actually is.

However, this did not solve my MISR reading issue.
Have a great day,
Conrad :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120726/8df3f30c/attachment-0001.html>

From conrad_bielski at yahoo.com  Thu Jul 26 10:08:01 2012
From: conrad_bielski at yahoo.com (Conrad Bielski)
Date: Thu, 26 Jul 2012 10:08:01 -0700 (PDT)
Subject: [gdal-dev] Extracting MISR imagery from hdf file
Message-ID: <1343322481.43314.YahooMailNeo@web33906.mail.mud.yahoo.com>

Hi,
I'm having trouble extracting MISR bands from the hdf file. Has anyone been able to do it with gdal?

Thanks in advance and have a great day,
Conrad :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120726/ad24c318/attachment.html>

From ckling at upcmail.nl  Fri Jul 27 04:01:18 2012
From: ckling at upcmail.nl (Kees Kling)
Date: Fri, 27 Jul 2012 13:01:18 +0200
Subject: [gdal-dev] Swapped axes
Message-ID: <501274FE.9080900@upcmail.nl>

Hi,

I'm trying to draw maps from shape data.
For coordinate transformation I use as destination

proj->importFromProj4(projString.c_str());
where projString is "+proj=merc +k_0=0.02 +lat_0=90 +lon_0=0 +a=6378.388 
+b=6356.906"

as source projection I take the
oceanLayer->GetSpatialRef()
the definition of the source

After transforming and displaying the data, my imagery is flipped. I 
think it has to do with the fact that the data is in lon/lat format 
instead of lat/lon.

How can I correct that. I tried to use

proj->SetAxes("GEOGCS","Easting",OAO_East,"Northing",OAO_North);
but this doesn't show any effect

Regards
Kees Kling


From jirikadlec2 at gmail.com  Fri Jul 27 07:33:40 2012
From: jirikadlec2 at gmail.com (jkadlec)
Date: Fri, 27 Jul 2012 07:33:40 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
Message-ID: <1343399620972-4991388.post@n6.nabble.com>

Hi, I have a problem making GDAL work with ECW files on Fedora Linux 17.
Here are the steps I did following the instructions on:
http://trac.osgeo.org/gdal/wiki/ECW
1. I downloaded, installed and compiled libecwj 3.3 library
2. I downloaded the source of gdal 1.9.1
3. I ran ./configure --with-ecw, make and make install
4. gdalinfo --formats now includes ECW
5. However, I have a problem opening any ECW file with GDAL. For example, I
downloaded the sample ECW files from 
http://www.terracolor.net/sample_imagery.htmlhttp://
http://www.terracolor.net/sample_imagery.html . One of the files is called
Terracolor_SanFrancisco_US_15m.ecw
When I run gdalinfo Terracolor_SanFrancisco_US_15m.ecw I get a weird error:

terminate called after throwing an instance of 'std::length_error' what():
basic_string::_S_create Aborted (core dumped)

Other file types such as tiff or asc open with GDAL correctly.
Was anybody able to get GDAL running with ECW support on Linux?
Should I try to use the KAKADU library with GDAL instead of libecwj?

Any suggestions are welcome.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jrepetto at free.fr  Fri Jul 27 09:54:05 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri, 27 Jul 2012 18:54:05 +0200
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <1343399620972-4991388.post@n6.nabble.com>
References: <1343399620972-4991388.post@n6.nabble.com>
Message-ID: <5012C7AD.3010005@free.fr>

On 27/07/2012 16:33, jkadlec wrote:
> Hi, I have a problem making GDAL work with ECW files on Fedora Linux 17.
> Here are the steps I did following the instructions on:
> http://trac.osgeo.org/gdal/wiki/ECW
> 1. I downloaded, installed and compiled libecwj 3.3 library
> 2. I downloaded the source of gdal 1.9.1
> 3. I ran ./configure --with-ecw, make and make install
> 4. gdalinfo --formats now includes ECW
> 5. However, I have a problem opening any ECW file with GDAL. For example, I
> downloaded the sample ECW files from 
> http://www.terracolor.net/sample_imagery.htmlhttp://
> http://www.terracolor.net/sample_imagery.html . One of the files is called
> Terracolor_SanFrancisco_US_15m.ecw
> When I run gdalinfo Terracolor_SanFrancisco_US_15m.ecw I get a weird error:
> 
> terminate called after throwing an instance of 'std::length_error' what():
> basic_string::_S_create Aborted (core dumped)
> 
> Other file types such as tiff or asc open with GDAL correctly.
> Was anybody able to get GDAL running with ECW support on Linux?
> Should I try to use the KAKADU library with GDAL instead of libecwj?
> 
> Any suggestions are welcome.
> 

Hi,

I have tested the file "Terracolor_SanFrancisco_US_15m.ecw" on Gentoo
Linux 64 bits, with GDAL 1.9.1, and libecwj2-3.3.
No problem :

$ gdalinfo Terracolor_SanFrancisco_US_15m.ecw
Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: Terracolor_SanFrancisco_US_15m.ecw
       Terracolor_SanFrancisco_US_15m.eww
Size is 7204, 7204
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
Origin = (-122.809804036593036,38.285436652047451)
Pixel Size = (0.000138800000000,-0.000138800000000)
Corner Coordinates:
Upper Left  (-122.8098040,  38.2854367) (122d48'35.29"W, 38d17' 7.57"N)
Lower Left  (-122.8098040,  37.2855215) (122d48'35.29"W, 37d17' 7.88"N)
Upper Right (-121.8098888,  38.2854367) (121d48'35.60"W, 38d17' 7.57"N)
Lower Right (-121.8098888,  37.2855215) (121d48'35.60"W, 37d17' 7.88"N)
Center      (-122.3098464,  37.7854791) (122d18'35.45"W, 37d47' 7.72"N)
Band 1 Block=7204x1 Type=Byte, ColorInterp=Red
  Overviews: 3602x3602, 1801x1801, 900x900, 450x450, 225x225
Band 2 Block=7204x1 Type=Byte, ColorInterp=Green
  Overviews: 3602x3602, 1801x1801, 900x900, 450x450, 225x225
Band 3 Block=7204x1 Type=Byte, ColorInterp=Blue
  Overviews: 3602x3602, 1801x1801, 900x900, 450x450, 225x225


I was also able to display the image in QGIS 1.8.0,

HTH !
Jean-Claude

From zoltans at geograph.co.za  Fri Jul 27 09:59:35 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 27 Jul 2012 18:59:35 +0200
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <1343399620972-4991388.post@n6.nabble.com>
References: <1343399620972-4991388.post@n6.nabble.com>
Message-ID: <5012C8F7.8040300@geograph.co.za>

On 2012/07/27 16:33, jkadlec wrote:
> Hi, I have a problem making GDAL work with ECW files on Fedora Linux 17.
> Here are the steps I did following the instructions on:
> http://trac.osgeo.org/gdal/wiki/ECW
> 1. I downloaded, installed and compiled libecwj 3.3 library
> 2. I downloaded the source of gdal 1.9.1
> 3. I ran ./configure --with-ecw, make and make install
> 4. gdalinfo --formats now includes ECW
> 5. However, I have a problem opening any ECW file with GDAL. For example, I
> downloaded the sample ECW files from
> http://www.terracolor.net/sample_imagery.htmlhttp://
> http://www.terracolor.net/sample_imagery.html . One of the files is called
> Terracolor_SanFrancisco_US_15m.ecw
> When I run gdalinfo Terracolor_SanFrancisco_US_15m.ecw I get a weird error:
>
> terminate called after throwing an instance of 'std::length_error' what():
> basic_string::_S_create Aborted (core dumped)
>
> Other file types such as tiff or asc open with GDAL correctly.
> Was anybody able to get GDAL running with ECW support on Linux?
> Should I try to use the KAKADU library with GDAL instead of libecwj?
>
> Any suggestions are welcome.
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,
I went exactly your route with recompiling gdal on Ubuntu 12.04 - no 
problems whatsoever and I converted my ECW images to tiff using gdalwarp.
I suggest you download the (free?) Erdas viewer for ecw files and check 
the integrity of your ecw image - maybe it got corrupt on your download.

HTH,
Zoltan

From jzl5325 at psu.edu  Fri Jul 27 20:40:57 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Fri, 27 Jul 2012 20:40:57 -0700
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
Message-ID: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>

List,

I am working on a python script using the multiprocessing module with
shared memory ctype arrays.

Currently the workflow is to open the dataset and grab the first band, as
usual. I then read in the array, create an empty ctype array, and use
memmove to move the numpy array to my ctypes array.

Is it possible, via python, to read the array direct to a ctypes array and
bypass reading the array as an ndarray?

Thanks,
J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120727/c2f19da7/attachment.html>

From Luke.Pinner at environment.gov.au  Sat Jul 28 00:43:25 2012
From: Luke.Pinner at environment.gov.au (lpinner)
Date: Sat, 28 Jul 2012 00:43:25 -0700 (PDT)
Subject: [gdal-dev] Error handlers in Python bindings
In-Reply-To: <1342083581.4ffe91fdcd48a@imp.free.fr>
References: <4FFD5256.60402@eox.at> <1342083581.4ffe91fdcd48a@imp.free.fr>
Message-ID: <1343461405354-4991515.post@n6.nabble.com>

>> The python function needs to accept three arguments, error class, error
code
>> and error message.
>> 
>> i.e.
>> from osgeo import gdal
>> def f(err_class, err_code, msg):
>>     print err_class, err_code, msg
>>
>> gdal.PushErrorHandler(f)
>
>Reviewing the Python bindings code, I see no evidence that Python error
handlers
>are possible. An option is to use gdal.UseExceptions() which will cause a
Python
>exception to be thrown after a GDAL call has emitted an error. 

Sorry for the late reply, I fired off my original reply without testing it
actually worked.  It seems this functionality is no longer available (maybe
with the change to the new style bindings?) or maybe it never worked in the
first place.  My original reply was based on a post from Frank on gdal-dev
_quite_ a few years ago -
http://lists.osgeo.org/pipermail/gdal-dev/2003-March/000323.html



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Error-handlers-in-Python-bindings-tp4987591p4991515.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ckling at upcmail.nl  Sat Jul 28 01:58:24 2012
From: ckling at upcmail.nl (Kees Kling)
Date: Sat, 28 Jul 2012 10:58:24 +0200
Subject: [gdal-dev] Swapped axes
In-Reply-To: <501274FE.9080900@upcmail.nl>
References: <501274FE.9080900@upcmail.nl>
Message-ID: <5013A9B0.2090600@upcmail.nl>

Soory Guys,

I already found the mistake. Somewhere on the line I mixed up my 
coordinates and now it is working OK

Regards
Kees Kling


On 07/27/2012 01:01 PM, Kees Kling wrote:
> Hi,
>
> I'm trying to draw maps from shape data.
> For coordinate transformation I use as destination
>
> proj->importFromProj4(projString.c_str());
> where projString is "+proj=merc +k_0=0.02 +lat_0=90 +lon_0=0 
> +a=6378.388 +b=6356.906"
>
> as source projection I take the
> oceanLayer->GetSpatialRef()
> the definition of the source
>
> After transforming and displaying the data, my imagery is flipped. I 
> think it has to do with the fact that the data is in lon/lat format 
> instead of lat/lon.
>
> How can I correct that. I tried to use
>
> proj->SetAxes("GEOGCS","Easting",OAO_East,"Northing",OAO_North);
> but this doesn't show any effect
>
> Regards
> Kees Kling
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Sat Jul 28 02:17:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 28 Jul 2012 11:17:31 +0200
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
Message-ID: <201207281117.31511.even.rouault@mines-paris.org>

Le samedi 28 juillet 2012 05:40:57, Jay L. a ?crit :
> List,
> 
> I am working on a python script using the multiprocessing module with
> shared memory ctype arrays.
> 
> Currently the workflow is to open the dataset and grab the first band, as
> usual. I then read in the array, create an empty ctype array, and use
> memmove to move the numpy array to my ctypes array.
> 
> Is it possible, via python, to read the array direct to a ctypes array and
> bypass reading the array as an ndarray?

No, although it could certainly be extended to do so.

But with ctypes, you are able to bind all C functions of the GDAL API, so you 
can try the following snippet. Of course, due to the nature of ctypes 
bindings, you must be extra carefull of the value/size of arguments you use, 
otherwise crashes can easily happen.

from ctypes import *

def getlibgdal():
    import sys
    # Might need name tweaking depending on platfrom & version
    if sys.platform == 'win32':
        libgdal = windll.LoadLibrary("gdal19.dll")
    else:
        libgdal = cdll.LoadLibrary("libgdal.so.1")

    libgdal.GDALOpen.argtypes = [ c_char_p, c_int ]
    libgdal.GDALOpen.restype = c_void_p

    libgdal.GDALClose.argtypes = [ c_void_p ]

    libgdal.GDALGetRasterCount.argtypes = [ c_void_p ]
    libgdal.GDALGetRasterCount.res_type = c_int

    libgdal.GDALGetRasterXSize.argtypes = [ c_void_p ]
    libgdal.GDALGetRasterXSize.res_type = c_int

    libgdal.GDALGetRasterYSize.argtypes = [ c_void_p ]
    libgdal.GDALGetRasterYSize.res_type = c_int

    libgdal.GDALGetRasterBand.argtypes = [ c_void_p, c_int ]
    libgdal.GDALGetRasterBand.restype = c_void_p

    libgdal.GA_ReadOnly = 0
    libgdal.GA_Update = 1

    libgdal.GF_Read = 0
    libgdal.GF_Write = 1

    libgdal.GDT_Unknown = 0
    libgdal.GDT_Byte = 1
    libgdal.GDT_UInt16 = 2
    libgdal.GDT_Int16 = 3
    libgdal.GDT_UInt32 = 4
    libgdal.GDT_Int32 = 5
    libgdal.GDT_Float32 = 6
    libgdal.GDT_Float64 = 7
    libgdal.GDT_CInt16 = 8
    libgdal.GDT_CInt32 = 9
    libgdal.GDT_CFloat32 = 10
    libgdal.GDT_CFloat64 = 11

    libgdal.GDALRasterIO.argtypes = [
        c_void_p, # rasterband
        c_int, # eRWFlag
        c_int, # nXOff
        c_int, # nYOff
        c_int, # nXSize
        c_int, # nYSize
        c_void_p, # pData
        c_int, # nBufXSize
        c_int, # nBufYSize
        c_int, # eBufType
        c_int, # nPixelSpace
        c_int ] # nLineSpace
    libgdal.GDALRasterIO.res_type = c_int

    # Don't forget to register all drivers
    libgdal.GDALAllRegister()

    return libgdal

libgdal = getlibgdal()

ds = libgdal.GDALOpen("byte.tif", libgdal.GA_ReadOnly)
if ds is 0:
    import sys
    sys.exit(1)

xsize = libgdal.GDALGetRasterXSize(ds)
ysize = libgdal.GDALGetRasterYSize(ds)
band = libgdal.GDALGetRasterBand(ds, 1)
ar = (c_byte * (xsize * ysize))()

ret = libgdal.GDALRasterIO(band, libgdal.GF_Read,
                           0, 0, xsize, ysize,
                           cast(ar, c_void_p),
                           xsize, ysize, libgdal.GDT_Byte,
                           0, 0)
if ret == 0:
    print('success')

libgdal.GDALClose(ds)

> 
> Thanks,
> J

From jukka.rahkonen at mmmtike.fi  Sat Jul 28 04:39:48 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 28 Jul 2012 11:39:48 +0000 (UTC)
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
References: <CC33002F.2604E%michael.smith@usace.army.mil>
	<201207250008.24933.even.rouault@mines-paris.org>
Message-ID: <loom.20120728T132345-681@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> I've commited in r24707 a change that is mainly a custom indexation mechanism 
> for nodes (can be disabled with OSM_USE_CUSTOM_INDEXING=NO) to improve 
> performances (Improve them about by a factor of 2 on a 1 GB PBF on my PC) 

I had a try with finland.osm.pbf and germany.osm.pbf with Windows 64-bit 
binaries containing that change. Conversion of the Finnish OSM data with 
ogr2ogr and the default osmconf.ini into Spatialite format took about 5 minutes 
and it was a minute or two faster than it used to be. Conversion of German data
took 17 hours and it was a about as slow as before.
I guess it may be the output to spatialite format that gets so slow when 
database size gets bigger. CPU usage was only couple of percents during 
the last 10 hours and process took only 100-200 MB of memory.
What other output format could you recommend for testing?

-Jukka Rahkonen-


From p.vanbreugel at gmail.com  Sat Jul 28 06:24:15 2012
From: p.vanbreugel at gmail.com (Paulo van Breugel)
Date: Sat, 28 Jul 2012 15:24:15 +0200
Subject: [gdal-dev] compiling gdal with kml support
Message-ID: <CAGrkfcJ5P5AmSOs8iKqb6zCYoHsq1DBG6WEfF6=ZNu=tdnK1Jg@mail.gmail.com>

Hi,

I am on Ubuntu 12.04 and I am trying to compile gdal 1.9.1 with kml support
using the configuration below:

 ./configure --prefix=/usr/local/gdal1.9 --with-static-proj4
--with-png=internal --with-pcraster=internal --with-libtiff=internal
--with-geotiff=internal --with-jpeg=internal --with-gif=internal
--with-hdf4 --with-hdf5 --with-jasper --with-odbc --with-sqlite3
--with-spatialite --with-geos --with-python --with-ogdi --with-libkml=yes
CXXFLAGS=-fPIC CFLAGS=-fPIC CPPFLAGS=-fPIC

However, it does not seem to find the libkml libraries:

checking for Google libkml headers in /usr/include, /usr/include/kml, and
/usr/include/kml/third_party/boost_1_34_1... found
checking for Google libkml libraries... not found
checking for Google libkml... no

I do however have installed libkml0 an libkml-dev. E.g., libkmldom.so can
be found in /usr/lib/

Any clues?
 Paulo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120728/55dd12f5/attachment.html>

From even.rouault at mines-paris.org  Sat Jul 28 06:39:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 28 Jul 2012 15:39:33 +0200
Subject: [gdal-dev] compiling gdal with kml support
In-Reply-To: <CAGrkfcJ5P5AmSOs8iKqb6zCYoHsq1DBG6WEfF6=ZNu=tdnK1Jg@mail.gmail.com>
References: <CAGrkfcJ5P5AmSOs8iKqb6zCYoHsq1DBG6WEfF6=ZNu=tdnK1Jg@mail.gmail.com>
Message-ID: <201207281539.39203.even.rouault@mines-paris.org>


> checking for Google libkml headers in /usr/include, /usr/include/kml, and
> /usr/include/kml/third_party/boost_1_34_1... found
> checking for Google libkml libraries... not found
> checking for Google libkml... no
> 
> I do however have installed libkml0 an libkml-dev. E.g., libkmldom.so can
> be found in /usr/lib/

I suppose that the libkml shipped with your distribution is 1.2. The libkml 
driver needs the svn version of libkml (that would be 1.3 if it is ever 
released....) at http://libkml.googlecode.com/svn/trunk

> 
> Any clues?
>  Paulo

From jzl5325 at psu.edu  Sat Jul 28 08:05:43 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Sat, 28 Jul 2012 08:05:43 -0700
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <201207281117.31511.even.rouault@mines-paris.org>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
	<201207281117.31511.even.rouault@mines-paris.org>
Message-ID: <CA+bfmPuOFZtfpN9E7b-9bUpjmfh+gv6xh56Q-FEVXO_o20hTzA@mail.gmail.com>

Even,

Thanks so much!  I will give this a try and get it implemented into my
code.  This is also a wonderful primer on ctypes integration with existing
Python scripts.

Thanks,
Jay

On Sat, Jul 28, 2012 at 2:17 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le samedi 28 juillet 2012 05:40:57, Jay L. a ?crit :
> > List,
> >
> > I am working on a python script using the multiprocessing module with
> > shared memory ctype arrays.
> >
> > Currently the workflow is to open the dataset and grab the first band, as
> > usual. I then read in the array, create an empty ctype array, and use
> > memmove to move the numpy array to my ctypes array.
> >
> > Is it possible, via python, to read the array direct to a ctypes array
> and
> > bypass reading the array as an ndarray?
>
> No, although it could certainly be extended to do so.
>
> But with ctypes, you are able to bind all C functions of the GDAL API, so
> you
> can try the following snippet. Of course, due to the nature of ctypes
> bindings, you must be extra carefull of the value/size of arguments you
> use,
> otherwise crashes can easily happen.
>
> from ctypes import *
>
> def getlibgdal():
>     import sys
>     # Might need name tweaking depending on platfrom & version
>     if sys.platform == 'win32':
>         libgdal = windll.LoadLibrary("gdal19.dll")
>     else:
>         libgdal = cdll.LoadLibrary("libgdal.so.1")
>
>     libgdal.GDALOpen.argtypes = [ c_char_p, c_int ]
>     libgdal.GDALOpen.restype = c_void_p
>
>     libgdal.GDALClose.argtypes = [ c_void_p ]
>
>     libgdal.GDALGetRasterCount.argtypes = [ c_void_p ]
>     libgdal.GDALGetRasterCount.res_type = c_int
>
>     libgdal.GDALGetRasterXSize.argtypes = [ c_void_p ]
>     libgdal.GDALGetRasterXSize.res_type = c_int
>
>     libgdal.GDALGetRasterYSize.argtypes = [ c_void_p ]
>     libgdal.GDALGetRasterYSize.res_type = c_int
>
>     libgdal.GDALGetRasterBand.argtypes = [ c_void_p, c_int ]
>     libgdal.GDALGetRasterBand.restype = c_void_p
>
>     libgdal.GA_ReadOnly = 0
>     libgdal.GA_Update = 1
>
>     libgdal.GF_Read = 0
>     libgdal.GF_Write = 1
>
>     libgdal.GDT_Unknown = 0
>     libgdal.GDT_Byte = 1
>     libgdal.GDT_UInt16 = 2
>     libgdal.GDT_Int16 = 3
>     libgdal.GDT_UInt32 = 4
>     libgdal.GDT_Int32 = 5
>     libgdal.GDT_Float32 = 6
>     libgdal.GDT_Float64 = 7
>     libgdal.GDT_CInt16 = 8
>     libgdal.GDT_CInt32 = 9
>     libgdal.GDT_CFloat32 = 10
>     libgdal.GDT_CFloat64 = 11
>
>     libgdal.GDALRasterIO.argtypes = [
>         c_void_p, # rasterband
>         c_int, # eRWFlag
>         c_int, # nXOff
>         c_int, # nYOff
>         c_int, # nXSize
>         c_int, # nYSize
>         c_void_p, # pData
>         c_int, # nBufXSize
>         c_int, # nBufYSize
>         c_int, # eBufType
>         c_int, # nPixelSpace
>         c_int ] # nLineSpace
>     libgdal.GDALRasterIO.res_type = c_int
>
>     # Don't forget to register all drivers
>     libgdal.GDALAllRegister()
>
>     return libgdal
>
> libgdal = getlibgdal()
>
> ds = libgdal.GDALOpen("byte.tif", libgdal.GA_ReadOnly)
> if ds is 0:
>     import sys
>     sys.exit(1)
>
> xsize = libgdal.GDALGetRasterXSize(ds)
> ysize = libgdal.GDALGetRasterYSize(ds)
> band = libgdal.GDALGetRasterBand(ds, 1)
> ar = (c_byte * (xsize * ysize))()
>
> ret = libgdal.GDALRasterIO(band, libgdal.GF_Read,
>                            0, 0, xsize, ysize,
>                            cast(ar, c_void_p),
>                            xsize, ysize, libgdal.GDT_Byte,
>                            0, 0)
> if ret == 0:
>     print('success')
>
> libgdal.GDALClose(ds)
>
> >
> > Thanks,
> > J
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120728/22cc8982/attachment-0001.html>

From even.rouault at mines-paris.org  Sun Jul 29 08:49:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 29 Jul 2012 17:49:10 +0200
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <loom.20120728T132345-681@post.gmane.org>
References: <CC33002F.2604E%michael.smith@usace.army.mil>
	<201207250008.24933.even.rouault@mines-paris.org>
	<loom.20120728T132345-681@post.gmane.org>
Message-ID: <201207291749.10461.even.rouault@mines-paris.org>

Le samedi 28 juillet 2012 13:39:48, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > I've commited in r24707 a change that is mainly a custom indexation
> > mechanism for nodes (can be disabled with OSM_USE_CUSTOM_INDEXING=NO) to
> > improve performances (Improve them about by a factor of 2 on a 1 GB PBF
> > on my PC)
> 
> I had a try with finland.osm.pbf and germany.osm.pbf with Windows 64-bit
> binaries containing that change. Conversion of the Finnish OSM data with
> ogr2ogr and the default osmconf.ini into Spatialite format took about 5
> minutes and it was a minute or two faster than it used to be. Conversion
> of German data took 17 hours and it was a about as slow as before.

Yes, the performance improvement isn't so obvious when I/O is the limiting 
factor.

However, the performance on germany.osm.pbf seemed very slow on your PC, but 
after testing on mine it takes ~9 hours, which seemed too slow since a 
conversion for the full planet-latest.osm.pbf (17 GB)  into "null" (this is a 
debug output driver, not compiled by default, that doesn't write anything) has 
taken ~ 30h (which, while looking at 
http://wiki.openstreetmap.org/wiki/Osm2pgsql/benchmarks, isn't particularly 
bad)

After investigations, most of the slowdown it is due to the building of the 
spatial index of the output spatialite DB. When the spatial index is created 
at DB initialization, and updated at each feature insertion, the performance 
is clearly affected. For example, when adding  -lco SPATIAL_INDEX=NO to the 
command line, the conversion of germany only takes 2 hours. Adding manually 
the spatial index at the end with ogrinfo the.db -sql "SELECT 
CreateSpatialIndex('points', 'GEOMETRY')" (and the same for lines, polygons, 
multilines, multipolygons, other_relations) takes ~ 22 minutes, so overall,  
this is 4 times faster.

In r24715, I've implemented defered spatial index creation. And indeed the 
whole process takes now ~ 2h20.

> I guess it may be the output to spatialite format that gets so slow when
> database size gets bigger. CPU usage was only couple of percents during
> the last 10 hours and process took only 100-200 MB of memory.
> What other output format could you recommend for testing?

I don't think the output format would change performance so much. What takes 
time is disk seeking to get nodes to build way geometries, or to get ways to 
build multi geometries. So having RAID disks might help. The writing of the 
output data might certainly reduce the efficiency of OS I/O caching, but except 
if an output format is particularly verbose comparing to others, that should 
have little influence.

What can speed-up things is to have lots of RAM and specify a huge value for 
OSM_MAX_TMPFILE_SIZE. Typically this would be 4 times the size of the PBF. 
However if the temp file(s) doesn't fit entirely into that size, this will not 
bring any advantage.


> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Sun Jul 29 11:31:18 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 29 Jul 2012 18:31:18 +0000 (UTC)
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
References: <CC33002F.2604E%michael.smith@usace.army.mil>
	<201207250008.24933.even.rouault@mines-paris.org>
	<loom.20120728T132345-681@post.gmane.org>
	<201207291749.10461.even.rouault@mines-paris.org>
Message-ID: <loom.20120729T200504-731@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> However, the performance on germany.osm.pbf seemed very slow on your PC, but 
> after testing on mine it takes ~9 hours, which seemed too slow since a 
> conversion for the full planet-latest.osm.pbf (17 GB)  into "null" (this is a 
> debug output driver, not compiled by default, that doesn't write anything) has 
> taken ~ 30h (which, while looking at 
> http://wiki.openstreetmap.org/wiki/Osm2pgsql/benchmarks, isn't particularly 
> bad)
> 
> After investigations, most of the slowdown it is due to the building of the 
> spatial index of the output spatialite DB. When the spatial index is created 
> at DB initialization, and updated at each feature insertion, the performance 
> is clearly affected. For example, when adding  -lco SPATIAL_INDEX=NO to the 
> command line, the conversion of germany only takes 2 hours. Adding manually 
> the spatial index at the end with ogrinfo the.db -sql "SELECT 
> CreateSpatialIndex('points', 'GEOMETRY')" (and the same for lines, polygons, 
> multilines, multipolygons, other_relations) takes ~ 22 minutes, so overall,  
> this is 4 times faster.
> 
> In r24715, I've implemented defered spatial index creation. And indeed the 
> whole process takes now ~ 2h20.

Hi,

I borrowed my son's computer and made one more test. Important numbers about the
computer:
Windows 7, 64 -bit
Four-core Intel i5 2500k @3,3 GHz
SSD disk

Timings for germany.osm.pbf by using  -lco SPATIAL_INDEX=NO. Times are total
times from the beginning of the test

70% progress  - 5 minutes (I suppose resolving ways begins about at this phase)
100 % progress - 17 minutes
manual index creation for all the layers ready - 45 minutes

Results are interesting. Import to Spatialite without indexing was six times
faster for me and I suppose it is mostly because of the SSD drive. But creating
indexes took me 30 minutes while you timing was 22 minutes. Perhaps there is
something sub-optimal in combination of Windows/Spatialite/Create spatial index.

Anyway, the score for germany.osm.pbf is now 45 minutes. Someone with Linux and
SSD drive is perhaps the one to beat the record.

For comparison, converting finland.osm.pbf took 2 min 40 sec. Converting Germany
took 20 times more time and I believe that the relation is OK now.

-Jukka Rahkonen-




From chris.barker at noaa.gov  Sun Jul 29 14:20:48 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Sun, 29 Jul 2012 14:20:48 -0700
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
Message-ID: <CALGmxEKoZW_S64VAOzahgcVMrkTY8N9_O3jqYziFetWeM20HLw@mail.gmail.com>

On Fri, Jul 27, 2012 at 8:40 PM, Jay L. <jzl5325 at psu.edu> wrote:

> Currently the workflow is to open the dataset and grab the first band, as
> usual. I then read in the array, create an empty ctype array, and use
> memmove to move the numpy array to my ctypes array.

numpy comes with some utilities for working with ctypes and numpy
arrays -- you certainly should be able to do that without a copy. Poke
around in the numyp source, docs, and mailing list.

If I understand the docs right, this makes it really simple:

http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ctypes.html

note that there is a lot of great stuff going on with numpy and
Cython doing this sort of stuff -- numpy arrays may be a good bet anyway.


You might also want to check out geo-Dango -- I think they've got a
pretty complete wrapper for GDAL with ctypes

-Chris



-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From sbahram at nc.rr.com  Sun Jul 29 21:18:25 2012
From: sbahram at nc.rr.com (Sina Bahram)
Date: Mon, 30 Jul 2012 00:18:25 -0400
Subject: [gdal-dev] splitting along 180
Message-ID: <002801cd6e0a$5e8168c0$1b843a40$@nc.rr.com>

Hello,

I hope this is the right list for this question. If not, then my apologies and sincere thanks in advance for knowing what list might
be.

I have a dataset of country borders which I obtained from:
http://thematicmapping.org/downloads/world_borders.php/

I have that dataset in both shp and SQL, but I'll put out there that I don't feel that affects my problem; however, please let me
know if does/can.

Because I'll be displaying those borders in something that uses Google Maps, I've got a problem. That problem is that countries
whose polygons cross 180 degrees are displaying extremely weird in Google Maps. Either it's splitting them completely wrong, taking
them all the way across the map, whatever the weirdness might be.

So, I thought I can simply address this by splitting the polygons of the countries that cross the line so that no country contains a
polygon that presents a problem. Examples of such countries/regions would be Russia and Antarctica.

I therefore invoked the following:
ogr2ogr -wrapdateline -t_srs EPSG:4326 new countryBorders.sql

I got:
ERROR 1: TopologyException: found non-noded intersection between LINESTRING (-59.7742 -72.9003, -59.8494 -73.2331) and LINESTRING (0
-73.1221, -89.3211 -73.0542) at -59.8141 -73.0766
ERROR 1: TopologyException: found non-noded intersection between LINESTRING (-59.7742 -72.9003, -59.8494 -73.2331) and LINESTRING
(180 -73.2589, -89.3211 -73.0542) at -59.8141 -73.0766

A few questions:

#1: am I even doing this the right way? for example, I find it odd that I have to provide ogr2ogr the same srs as of the input. Is
that translation even needed? Is that even the right SRS to use? I obtained that SRS from taking the proj and looking it up on this
site:
http://prj2epsg.org/search

#2: all I want is for a few of the polygons of those few troublesome countries to get split so they don't cause any more problems.
-wrapdateline seemed like the perfect solution ... maybe it's not?

I'm completely open to advice, suggestions, references, whatever.

Thanks so much in advance.

Take care,
Sina

Website: www.SinaBahram.com
Twitter: @SinaBahram




From oliver.bgr at googlemail.com  Mon Jul 30 04:41:55 2012
From: oliver.bgr at googlemail.com (Oliver Burger)
Date: Mon, 30 Jul 2012 13:41:55 +0200
Subject: [gdal-dev] wms support not enabled with ceratin LDFLAGS set
Message-ID: <50167303.90702@googlemail.com>

Hi,

one of our users spotted a regression in gdal >= 1.9.x:
https://bugs.mageia.org/show_bug.cgi?id=6434

The problem seems to be with our default LDFLAGS we use on the package 
build system:
LDFLAGS=' -Wl,--as-needed -Wl,--no-undefined -Wl,-z,relro -Wl,-O1 
-Wl,--build-id -Wl,--enable-new-dtags'

With those flags I get the following FORMATS:
OPT_GDAL_FORMATS='grib bsb jpeg2000 netcdf hdf5 ogdi gif jpeg png 
pcraster fits '

Without those I get
OPT_GDAL_FORMATS='wcs wms grib bsb jpeg2000 netcdf hdf5 ogdi gif jpeg 
png pcraster fits '

This is a regression to older gdal versions (we had 1.8.x) in Mageia 1 
where tgis problem did not occur.

Anybody having an idea, what could be responsible for this?

Oliver

-- 
Oliver Burger aka obgr_seneca

Mageia contributor

From jukka.rahkonen at mmmtike.fi  Mon Jul 30 04:58:46 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 30 Jul 2012 11:58:46 +0000 (UTC)
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
References: <CC33002F.2604E%michael.smith@usace.army.mil>
	<201207250008.24933.even.rouault@mines-paris.org>
	<loom.20120728T132345-681@post.gmane.org>
	<201207291749.10461.even.rouault@mines-paris.org>
	<loom.20120729T200504-731@post.gmane.org>
Message-ID: <loom.20120730T122536-698@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:


> I borrowed my son's computer and made one more test. Important
 numbers about the
> computer:
> Windows 7, 64 -bit
> Four-core Intel i5 2500k @3,3 GHz
> SSD disk
> 
> Timings for germany.osm.pbf by using  -lco SPATIAL_INDEX=NO. Times are 
total
> times from the beginning of the test
> 
> 70% progress  - 5 minutes (I suppose resolving ways begins about at this phase)
> 100 % progress - 17 minutes
> manual index creation for all the layers ready - 45 minutes
> 
> Results are interesting. Import to Spatialite without indexing was 
six times
> faster for me and I suppose it is mostly because of the SSD drive.
 But creating
> indexes took me 30 minutes while you timing was 22 minutes. 
Perhaps there is
> something sub-optimal in combination of 
Windows/Spatialite/Create spatial index.
> 
> Anyway, the score for germany.osm.pbf is now 45 minutes. Someone
 with Linux and
> SSD drive is perhaps the one to beat the record.
> 
> For comparison, converting finland.osm.pbf took 2 min 40 sec.
 Converting Germany
> took 20 times more time and I believe that the relation is OK now.

Another set of tests with a brand new and quite powerful laptop.
 Specs for the
computer:
Intel i7-2760QM @2.4 GHz processor (8 threads)
Hitachi Travelstar Z7K320 7200 rpm SATA disk
8 GB of memory
Windows 7, 64-bit

GDAL-version r24717, Win64 build from gisinternals.com

Timings for germany.osm.pbf (1.3 GB)
====================================

A) Default settings with command
ogr2ogr -f sqlite -dsco spatialite=yes germany.sqlite 
germany.osm.pbf -gt 20000 -progress --config OGR_SQLITE_SYNCHRONOUS OFF

- reading the data               67 minutes
- creating spatial indexes       38 minutes
- total                         105 minutes

B) Using in-memory Spatialite db for the first step by giving
SET OSM_MAX_TMPFILE_SIZE=7000

- reading the data              16 minutes
- creating spatial indexes      38 minutes
- total                         54 minutes

Peak memory usage during this conversion was 4.4 GB.

Conclusions
===========
* The initial reading of data is heavily i/o bound. This phase 
is really fast if there is enough memory for keeping the OSM 
tempfile in memory but SSD disk seems to offer equally good 
performance.
* Creating spatial indexes for the Spatialite tables is also 
i/o bound. The hardware sets the speed limit and there are 
no other tricks for improving the performance. Multi-core 
CPU is quite idle during this phase with 10-15% load.
* If user does not plan to do spatial queries then then it 
may be handy to save some time and create the Spatialite db 
without spatial indexes by using -lco SPATIAL_INDEX=NO option.
* Windows disk i/o may be a limiting factor.

I consider that for small OSM datasets the speed starts to be 
good enough. For me it is about the same if converting the 
Finnish OSM data (137 MB in .pbf format) takes 160 or 140 
seconds when using the default settings or in-memory temporary 
database, respectively.  

-Jukka Rahkonen-





From even.rouault at mines-paris.org  Mon Jul 30 05:04:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 30 Jul 2012 14:04:02 +0200
Subject: [gdal-dev] wms support not enabled with ceratin LDFLAGS set
In-Reply-To: <50167303.90702@googlemail.com>
References: <50167303.90702@googlemail.com>
Message-ID: <1343649842.501678322dea7@imp.free.fr>

Selon Oliver Burger <oliver.bgr at googlemail.com>:

> Hi,
>
> one of our users spotted a regression in gdal >= 1.9.x:
> https://bugs.mageia.org/show_bug.cgi?id=6434
>
> The problem seems to be with our default LDFLAGS we use on the package
> build system:
> LDFLAGS=' -Wl,--as-needed -Wl,--no-undefined -Wl,-z,relro -Wl,-O1
> -Wl,--build-id -Wl,--enable-new-dtags'
>
> With those flags I get the following FORMATS:
> OPT_GDAL_FORMATS='grib bsb jpeg2000 netcdf hdf5 ogdi gif jpeg png
> pcraster fits '
>
> Without those I get
> OPT_GDAL_FORMATS='wcs wms grib bsb jpeg2000 netcdf hdf5 ogdi gif jpeg
> png pcraster fits '
>
> This is a regression to older gdal versions (we had 1.8.x) in Mageia 1
> where tgis problem did not occur.
>
> Anybody having an idea, what could be responsible for this?

The requirement for having WMS enabled is that libcurl has been properly
detected, so I'd assume that the above LDFLAGS prevents that. Looking at
configure, I see that libcurl detection is only based on curl-config presence
and the presence of curl_global_init in libcurl. So you should have a closer
look at that in config.log and ./configure output.

>
> Oliver
>
> --
> Oliver Burger aka obgr_seneca
>
> Mageia contributor
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>





From piero.campa at gmail.com  Mon Jul 30 06:12:27 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Mon, 30 Jul 2012 15:12:27 +0200
Subject: [gdal-dev] gdalsrsinfo "ERROR - failed to load SRS definition"
Message-ID: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>

Dear list,
(PREFACE: I was looking for a *gdal-users* list but I could see it does not
exists; I hope I am in the right place)

I started playing with the relatively new /gdalsrsinfo/ utility for
forward/backward translation to GML-based definitions of CRS.
I am trying to first get my XML definition from a proj4 string, then
getting it back from the XML definition itself:

$ gdalsrsinfo -o xml 'gdalsrsinfo -o xml '+proj=utm +a=3396190 +no_defs
+rf=200' > /tmp/test1
$ gdalsrsinfo -o proj4 /tmp/test1

But I often cannot get GDAL to recognize the XML definition produced by the
gdalsrsinfo utility.
As an example I take a proj4 string offered as example in the PROJ4 FAQ
page:

$ gdalsrsinfo -o xml '+proj=laea +lon_0=-40.000000 +lat_0=74.000000
+x_0=1000000 +y_0=1700000 +a=2000000 +b=2000000'  > /tmp/test1
$ gdalsrsinfo -o proj4 /tmp/test1
ERROR 1: ERROR - failed to load SRS definition from /tmp/test1

Any hint about the source of error?
Is there some restriction on the CRS definition in the XML form or am I
missing some parameter or is this a bug in the utility?

Cheers,
Piero
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120730/5519c128/attachment.html>

From even.rouault at mines-paris.org  Mon Jul 30 06:33:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 30 Jul 2012 15:33:32 +0200
Subject: [gdal-dev] gdalsrsinfo "ERROR - failed to load SRS definition"
In-Reply-To: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>
References: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>
Message-ID: <1343655212.50168d2c98d91@imp.free.fr>

Piero,

> Dear list,
> (PREFACE: I was looking for a *gdal-users* list but I could see it does not
> exists; I hope I am in the right place)

You're in the right place. There's only one mailing list for GDAL users,
developers, followers, fans, etc... ;-)

> Any hint about the source of error?
> Is there some restriction on the CRS definition in the XML form or am I
> missing some parameter or is this a bug in the utility?

Nothing wrong on your side or in gdalsrsinfo, but looking at the code for
import/export support of the XML representation of SRS in the library, I can see
that it only supports the Transverse Mercator projection in import, and
Transverse Mercator and LCC 1SP in export. Here you have LAEA, hence the error.

There's also another error, due to the +a and +b parameter being equal, this
leads to an inverse flattening equal to 0. And in the code that deals with
import, there's a test that forbids 0 as inverse flattening. I believe this test
could be safely removed, as 0 inverse flattening is usually used for the sphere.
Or perhaps the cleaner way would be to export the semiMinorAxis instead of the
inverse flattening in that case.

Well, the conclusion is that XML support for SRS has currently a few
restrictions. So, unless you have strong reasons to use the XML representation
of SRS, I'd suggest using WKT instead.

Best regards,

Even




From piero.campa at gmail.com  Mon Jul 30 06:59:37 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Mon, 30 Jul 2012 15:59:37 +0200
Subject: [gdal-dev] gdalsrsinfo "ERROR - failed to load SRS definition"
In-Reply-To: <1343655212.50168d2c98d91@imp.free.fr>
References: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>
	<1343655212.50168d2c98d91@imp.free.fr>
Message-ID: <CAMp9JaMfbqczCxpA4XEYz2zY+0EMs-YqqA1aNj6k0RLVpW3btw@mail.gmail.com>

Thanks Even,
I suspected this, GML is still not that widely used for CRS definition
seemingly.

Unluckily I have strong reasons to use GML, so do you know if there are is
some developing in progress to support a wider range of projections from/to
the XML representation?

Piero

On 30 July 2012 15:33, Even Rouault <even.rouault at mines-paris.org> wrote:

> Piero,
>
> > Dear list,
> > (PREFACE: I was looking for a *gdal-users* list but I could see it does
> not
> > exists; I hope I am in the right place)
>
> You're in the right place. There's only one mailing list for GDAL users,
> developers, followers, fans, etc... ;-)
>
> > Any hint about the source of error?
> > Is there some restriction on the CRS definition in the XML form or am I
> > missing some parameter or is this a bug in the utility?
>
> Nothing wrong on your side or in gdalsrsinfo, but looking at the code for
> import/export support of the XML representation of SRS in the library, I
> can see
> that it only supports the Transverse Mercator projection in import, and
> Transverse Mercator and LCC 1SP in export. Here you have LAEA, hence the
> error.
>
> There's also another error, due to the +a and +b parameter being equal,
> this
> leads to an inverse flattening equal to 0. And in the code that deals with
> import, there's a test that forbids 0 as inverse flattening. I believe
> this test
> could be safely removed, as 0 inverse flattening is usually used for the
> sphere.
> Or perhaps the cleaner way would be to export the semiMinorAxis instead of
> the
> inverse flattening in that case.
>
> Well, the conclusion is that XML support for SRS has currently a few
> restrictions. So, unless you have strong reasons to use the XML
> representation
> of SRS, I'd suggest using WKT instead.
>
> Best regards,
>
> Even
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120730/c1ae060b/attachment-0001.html>

From yehil at rafael.co.il  Mon Jul 30 07:42:30 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon, 30 Jul 2012 17:42:30 +0300
Subject: [gdal-dev] how to set proxy authentication method for WMS
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C81DA3EF4D@MAILBOXSERVER.rf.local>


Hi
Is it possible to set the proxy authentication method to NTLM using either the config options or the environment?
I noticed that it is possible to set the proxy server and user:password, and also the http authentication method, but I couldn't find the proxy setting.

The curl options that needs to be set is CURLOPT_PROXYAUTH

Thanks
Yehiyam Livneh


**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120730/1f56f1f9/attachment.html>

From jzl5325 at psu.edu  Mon Jul 30 08:19:43 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Mon, 30 Jul 2012 08:19:43 -0700
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <CALGmxEKoZW_S64VAOzahgcVMrkTY8N9_O3jqYziFetWeM20HLw@mail.gmail.com>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
	<CALGmxEKoZW_S64VAOzahgcVMrkTY8N9_O3jqYziFetWeM20HLw@mail.gmail.com>
Message-ID: <CA+bfmPszk15XSzwmgdmaG5aDWuQ=_n5es-zG3W0QTuboEJr-HA@mail.gmail.com>

Chris,

Thanks for the link / info.  My issue is not working with the ctypes array,
but the fact that, I believe, GDAL returns a numpy array using
gdal.ReadAsArray().  Perhaps it is possible to use the GDAL python bindings
ReadAsArray() to go directly into a ctypes array (as opposed to the
wonderful code post earlier in this thread), but I have missed it.

Is it possible, not using the previously posted code, to do something like:

empty_ctypes_array = multiprocessing.RawArray(data_type, size)
empty_ctypes_array.ReadAsArray()

I realize that the above will not work, but offer it only as a pseudo code
example.  Using the above we could go direct to the ctypes array without
using either any C code, or an intermediate numpy array.

I will definitely check out the SciPy mailing list to see what the current
trends in multiprocessing are on large arrays.

Thanks and please do correct all inaccuracies as I am trying to improve my
fluency in GDAL!
Jay

On Sun, Jul 29, 2012 at 2:20 PM, Chris Barker <chris.barker at noaa.gov> wrote:

> On Fri, Jul 27, 2012 at 8:40 PM, Jay L. <jzl5325 at psu.edu> wrote:
>
> > Currently the workflow is to open the dataset and grab the first band, as
> > usual. I then read in the array, create an empty ctype array, and use
> > memmove to move the numpy array to my ctypes array.
>
> numpy comes with some utilities for working with ctypes and numpy
> arrays -- you certainly should be able to do that without a copy. Poke
> around in the numyp source, docs, and mailing list.
>
> If I understand the docs right, this makes it really simple:
>
>
> http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ctypes.html
>
> note that there is a lot of great stuff going on with numpy and
> Cython doing this sort of stuff -- numpy arrays may be a good bet anyway.
>
>
> You might also want to check out geo-Dango -- I think they've got a
> pretty complete wrapper for GDAL with ctypes
>
> -Chris
>
>
>
> --
>
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker at noaa.gov
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120730/270db728/attachment.html>

From even.rouault at mines-paris.org  Mon Jul 30 08:28:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 30 Jul 2012 17:28:23 +0200
Subject: [gdal-dev] gdalsrsinfo "ERROR - failed to load SRS definition"
In-Reply-To: <CAMp9JaMfbqczCxpA4XEYz2zY+0EMs-YqqA1aNj6k0RLVpW3btw@mail.gmail.com>
References: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>
	<1343655212.50168d2c98d91@imp.free.fr>
	<CAMp9JaMfbqczCxpA4XEYz2zY+0EMs-YqqA1aNj6k0RLVpW3btw@mail.gmail.com>
Message-ID: <1343662103.5016a81708984@imp.free.fr>

Selon Piero Campalani <piero.campa at gmail.com>:

> Thanks Even,
> I suspected this, GML is still not that widely used for CRS definition
> seemingly.
>
> Unluckily I have strong reasons to use GML, so do you know if there are is
> some developing in progress to support a wider range of projections from/to
> the XML representation?

Not that I'm aware of. The last significant work in that area of OSR dates back
to more than 6 years ago.

>From what I see from the code, adding new projections should be doable, but as
this is rather a boring task, it would help if you could identify the
projections methods that are the most common. Are you trying to be interoperable
with another software, or is it just GDAL/GDAL interoperability ? Having
GDAL/GDAL interoperability is easy, but making sure it works properly with other
software is less obvious.

From etourigny.dev at gmail.com  Mon Jul 30 08:40:13 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 30 Jul 2012 12:40:13 -0300
Subject: [gdal-dev] gdalsrsinfo "ERROR - failed to load SRS definition"
In-Reply-To: <1343662103.5016a81708984@imp.free.fr>
References: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>
	<1343655212.50168d2c98d91@imp.free.fr>
	<CAMp9JaMfbqczCxpA4XEYz2zY+0EMs-YqqA1aNj6k0RLVpW3btw@mail.gmail.com>
	<1343662103.5016a81708984@imp.free.fr>
Message-ID: <CA+TxYvNQgzmTAKEQ0rPYRsWCCaS6wvp+-iZFHGAanduJ8nB1PQ@mail.gmail.com>

There might be an other tool that can translate WKT or PROJ.4 strings
to/from GML CRS definition?

Etienne

On Mon, Jul 30, 2012 at 12:28 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Piero Campalani <piero.campa at gmail.com>:
>
>> Thanks Even,
>> I suspected this, GML is still not that widely used for CRS definition
>> seemingly.
>>
>> Unluckily I have strong reasons to use GML, so do you know if there are is
>> some developing in progress to support a wider range of projections from/to
>> the XML representation?
>
> Not that I'm aware of. The last significant work in that area of OSR dates back
> to more than 6 years ago.
>
> From what I see from the code, adding new projections should be doable, but as
> this is rather a boring task, it would help if you could identify the
> projections methods that are the most common. Are you trying to be interoperable
> with another software, or is it just GDAL/GDAL interoperability ? Having
> GDAL/GDAL interoperability is easy, but making sure it works properly with other
> software is less obvious.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Jul 30 08:40:49 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 30 Jul 2012 17:40:49 +0200
Subject: [gdal-dev] how to set proxy authentication method for WMS
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C81DA3EF4D@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C81DA3EF4D@MAILBOXSERVER.rf.local>
Message-ID: <1343662849.5016ab012343d@imp.free.fr>

Selon Livneh Yehiyam <yehil at rafael.co.il>:

>
> Hi
> Is it possible to set the proxy authentication method to NTLM using either
> the config options or the environment?
> I noticed that it is possible to set the proxy server and user:password, and
> also the http authentication method, but I couldn't find the proxy setting.
>
> The curl options that needs to be set is CURLOPT_PROXYAUTH

I don't see it used in the code. You can try experimenting, by adding at the end
of CPLHTTPInitializeRequest() in frmts/wms/gdalhttp.cpp (at line 146 in trunk)

curl_easy_setopt(psRequest->m_curl_handle,CURLOPT_PROXYAUTH,CURLAUTH_NTLM);

>
> Thanks
> Yehiyam Livneh
>
>
>
**********************************************************************************************
> This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE
> SYSTEMS LTD.
> (hereinafter "RAFAEL") contains confidential information intended for a
> specific individual and purpose, may
> constitute information that is privileged or confidential or otherwise
> protected from disclosure. If you are not
> the intended recipient, you should contact us immediately and thereafter
> delete this message from your
> system. You are hereby notified that any disclosure, copying, dissemination,
> distribution or forwarding of this
> message, or the taking of any action based on it, is strictly prohibited. If
> you have received this e-mail in error,
> please notify us immediately by e-mail mailto:lawraf at rafael.co.il and
> completely delete or destroy any and all
> electronic or other copies of the original message and any attachments
> thereof.
>
**********************************************************************************************







From jzl5325 at psu.edu  Mon Jul 30 09:31:03 2012
From: jzl5325 at psu.edu (Jay L.)
Date: Mon, 30 Jul 2012 09:31:03 -0700
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <CA+bfmPszk15XSzwmgdmaG5aDWuQ=_n5es-zG3W0QTuboEJr-HA@mail.gmail.com>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
	<CALGmxEKoZW_S64VAOzahgcVMrkTY8N9_O3jqYziFetWeM20HLw@mail.gmail.com>
	<CA+bfmPszk15XSzwmgdmaG5aDWuQ=_n5es-zG3W0QTuboEJr-HA@mail.gmail.com>
Message-ID: <CA+bfmPvaWFONXFqgXRdbDK+VroXE2hsRw1D6m=M2+asL+-C19w@mail.gmail.com>

One more, likely, foolish question.

Where is libgdal.dylib living on OSX?  I have used the Kyngchaos binary
installer and it looks like it renames libgdal.dylib to simply GDAL.
 Should I be soft linking that libgdal.dylib?

Also, evan's test [1] looks like it is using simply libgdal.dylib.  Is that
test failing on OS X then?

[1]
http://svn.osgeo.org/gdal/sandbox/rouault/gdal-openjpeg-trunk/autotest/gcore/testnonboundtoswig.py


Thanks,
Jay


On Mon, Jul 30, 2012 at 8:19 AM, Jay L. <jzl5325 at psu.edu> wrote:

> Chris,
>
> Thanks for the link / info.  My issue is not working with the ctypes
> array, but the fact that, I believe, GDAL returns a numpy array using
> gdal.ReadAsArray().  Perhaps it is possible to use the GDAL python bindings
> ReadAsArray() to go directly into a ctypes array (as opposed to the
> wonderful code post earlier in this thread), but I have missed it.
>
> Is it possible, not using the previously posted code, to do something like:
>
> empty_ctypes_array = multiprocessing.RawArray(data_type, size)
> empty_ctypes_array.ReadAsArray()
>
> I realize that the above will not work, but offer it only as a pseudo code
> example.  Using the above we could go direct to the ctypes array without
> using either any C code, or an intermediate numpy array.
>
> I will definitely check out the SciPy mailing list to see what the current
> trends in multiprocessing are on large arrays.
>
> Thanks and please do correct all inaccuracies as I am trying to improve my
> fluency in GDAL!
> Jay
>
> On Sun, Jul 29, 2012 at 2:20 PM, Chris Barker <chris.barker at noaa.gov>wrote:
>
>> On Fri, Jul 27, 2012 at 8:40 PM, Jay L. <jzl5325 at psu.edu> wrote:
>>
>> > Currently the workflow is to open the dataset and grab the first band,
>> as
>> > usual. I then read in the array, create an empty ctype array, and use
>> > memmove to move the numpy array to my ctypes array.
>>
>> numpy comes with some utilities for working with ctypes and numpy
>> arrays -- you certainly should be able to do that without a copy. Poke
>> around in the numyp source, docs, and mailing list.
>>
>> If I understand the docs right, this makes it really simple:
>>
>>
>> http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ctypes.html
>>
>> note that there is a lot of great stuff going on with numpy and
>> Cython doing this sort of stuff -- numpy arrays may be a good bet anyway.
>>
>>
>> You might also want to check out geo-Dango -- I think they've got a
>> pretty complete wrapper for GDAL with ctypes
>>
>> -Chris
>>
>>
>>
>> --
>>
>> Christopher Barker, Ph.D.
>> Oceanographer
>>
>> Emergency Response Division
>> NOAA/NOS/OR&R            (206) 526-6959   voice
>> 7600 Sand Point Way NE   (206) 526-6329   fax
>> Seattle, WA  98115       (206) 526-6317   main reception
>>
>> Chris.Barker at noaa.gov
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120730/607a4c66/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Jul 30 09:39:09 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 30 Jul 2012 18:39:09 +0200
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <CA+bfmPvaWFONXFqgXRdbDK+VroXE2hsRw1D6m=M2+asL+-C19w@mail.gmail.com>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
	<CALGmxEKoZW_S64VAOzahgcVMrkTY8N9_O3jqYziFetWeM20HLw@mail.gmail.com>
	<CA+bfmPszk15XSzwmgdmaG5aDWuQ=_n5es-zG3W0QTuboEJr-HA@mail.gmail.com>
	<CA+bfmPvaWFONXFqgXRdbDK+VroXE2hsRw1D6m=M2+asL+-C19w@mail.gmail.com>
Message-ID: <1343666349.5016b8ada0b23@imp.free.fr>

Selon "Jay L." <jzl5325 at psu.edu>:

> One more, likely, foolish question.
>
> Where is libgdal.dylib living on OSX?  I have used the Kyngchaos binary
> installer and it looks like it renames libgdal.dylib to simply GDAL.
>  Should I be soft linking that libgdal.dylib?
>
> Also, evan's test [1] looks like it is using simply libgdal.dylib.  Is that
> test failing on OS X then?

I never had the opportunity to test it on the Mac, so it might fail indeed.

I'd note that in trunk we have disabled the test with ctypes, because there was
a concern that the GDAL library loaded by "from osgeo import gdal" and the one
with ctypes might not be the same (multiple installs of GDAL coexisting on the
same system), leading to weird behaviour.

>
> [1]
>
http://svn.osgeo.org/gdal/sandbox/rouault/gdal-openjpeg-trunk/autotest/gcore/testnonboundtoswig.py
>
>
> Thanks,
> Jay
>
>
> On Mon, Jul 30, 2012 at 8:19 AM, Jay L. <jzl5325 at psu.edu> wrote:
>
> > Chris,
> >
> > Thanks for the link / info.  My issue is not working with the ctypes
> > array, but the fact that, I believe, GDAL returns a numpy array using
> > gdal.ReadAsArray().  Perhaps it is possible to use the GDAL python bindings
> > ReadAsArray() to go directly into a ctypes array (as opposed to the
> > wonderful code post earlier in this thread), but I have missed it.
> >
> > Is it possible, not using the previously posted code, to do something like:
> >
> > empty_ctypes_array = multiprocessing.RawArray(data_type, size)
> > empty_ctypes_array.ReadAsArray()
> >
> > I realize that the above will not work, but offer it only as a pseudo code
> > example.  Using the above we could go direct to the ctypes array without
> > using either any C code, or an intermediate numpy array.
> >
> > I will definitely check out the SciPy mailing list to see what the current
> > trends in multiprocessing are on large arrays.
> >
> > Thanks and please do correct all inaccuracies as I am trying to improve my
> > fluency in GDAL!
> > Jay
> >
> > On Sun, Jul 29, 2012 at 2:20 PM, Chris Barker <chris.barker at noaa.gov>wrote:
> >
> >> On Fri, Jul 27, 2012 at 8:40 PM, Jay L. <jzl5325 at psu.edu> wrote:
> >>
> >> > Currently the workflow is to open the dataset and grab the first band,
> >> as
> >> > usual. I then read in the array, create an empty ctype array, and use
> >> > memmove to move the numpy array to my ctypes array.
> >>
> >> numpy comes with some utilities for working with ctypes and numpy
> >> arrays -- you certainly should be able to do that without a copy. Poke
> >> around in the numyp source, docs, and mailing list.
> >>
> >> If I understand the docs right, this makes it really simple:
> >>
> >>
> >>
> http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ctypes.html
> >>
> >> note that there is a lot of great stuff going on with numpy and
> >> Cython doing this sort of stuff -- numpy arrays may be a good bet anyway.
> >>
> >>
> >> You might also want to check out geo-Dango -- I think they've got a
> >> pretty complete wrapper for GDAL with ctypes
> >>
> >> -Chris
> >>
> >>
> >>
> >> --
> >>
> >> Christopher Barker, Ph.D.
> >> Oceanographer
> >>
> >> Emergency Response Division
> >> NOAA/NOS/OR&R            (206) 526-6959   voice
> >> 7600 Sand Point Way NE   (206) 526-6329   fax
> >> Seattle, WA  98115       (206) 526-6317   main reception
> >>
> >> Chris.Barker at noaa.gov
> >>
> >
> >
>



From CABO at NIRAS.DK  Mon Jul 30 10:31:05 2012
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Mon, 30 Jul 2012 17:31:05 +0000
Subject: [gdal-dev] gdalbuildvrt problem with heterogenous band
	characteristics
Message-ID: <BCF6B63AE0B25941A7F56567B58A2805AD4117@allkexa1.NIRAS.INT>

Hi!

I'm trying to create a VRT file from 4 GeoTIFFs using gdalbuildvrt. Three of the GeoTIFFs are created using OrthoVista and the last one created with an earlier version of the same program. When I run gdalbuildvrt I get the following error message when I try to add the file created by the early version:

Warning 6: gdalbuildvrt does not support heterogenous band characteristics. Skipping...

Running gdalinfo on the 4 files I see only a difference in the metadata section (and of course in the coordinates).
In the following is the band information from two of the files:

[From new version]
Band 1 Block=6250x20 Type=Byte, ColorInterp=Red
  Overviews: 1024x1024
Band 2 Block=6250x20 Type=Byte, ColorInterp=Green
  Overviews: 1024x1024
Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue
  Overviews: 1024x1024
Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined
  Overviews: 1024x1024

[From earlier version]
Band 1 Block=6250x20 Type=Byte, ColorInterp=Red
  Overviews: 1024x1024
Band 2 Block=6250x20 Type=Byte, ColorInterp=Green
  Overviews: 1024x1024
Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue
  Overviews: 1024x1024
Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined
  Overviews: 1024x1024

To me they seem identical and I can display them both using QGis 1.8. I guess that the difference is deeper inside the TIFFs than gdalinfo informs me about - what can I do to avoid this problem?

Regards Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120730/1b3c9ff8/attachment.html>

From chris.barker at noaa.gov  Mon Jul 30 21:36:10 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Mon, 30 Jul 2012 21:36:10 -0700
Subject: [gdal-dev] Python Bindings - ReadArray direct to ctypes array?
In-Reply-To: <CA+bfmPszk15XSzwmgdmaG5aDWuQ=_n5es-zG3W0QTuboEJr-HA@mail.gmail.com>
References: <CA+bfmPvXd6Ve=6viAb9U95BNCeQsxKZ4VbSF_y1tL=PxTmch+g@mail.gmail.com>
	<CALGmxEKoZW_S64VAOzahgcVMrkTY8N9_O3jqYziFetWeM20HLw@mail.gmail.com>
	<CA+bfmPszk15XSzwmgdmaG5aDWuQ=_n5es-zG3W0QTuboEJr-HA@mail.gmail.com>
Message-ID: <CALGmxE+rmpRseEbxeZ=iGCPTWK43mbkSHF7jbtePVCgw5grcdg@mail.gmail.com>

On Mon, Jul 30, 2012 at 8:19 AM, Jay L. <jzl5325 at psu.edu> wrote:
> Chris,
>
> Thanks for the link / info.  My issue is not working with the ctypes array,
> but the fact that, I believe, GDAL returns a numpy array using
> gdal.ReadAsArray().  Perhaps it is possible to use the GDAL python bindings
> ReadAsArray() to go directly into a ctypes array (as opposed to the
> wonderful code post earlier in this thread), but I have missed it.
>
> Is it possible, not using the previously posted code, to do something like:
>
> empty_ctypes_array = multiprocessing.RawArray(data_type, size)
> empty_ctypes_array.ReadAsArray()

what I was getting at is that you should be able to use ReadAsArray to
get a bumpy array, then crate a types array from that without any data
copying -- I"m pretty sure. So while you would still have the
intermediate step of the numpy array, that overhead would be minor if
your raster bands are not tiny.

Ideally, GDAL would produce PEP 3118 compatible buffers, and then you
could create either bumpy arrays or ctypes arrays from that -- not
sure how the code is written now, though.

But in fact, numpy arrays are really two things:

1) full-featured n-d arrays for python

2) nifty wrappers around a c data pointer

If you think them as (2) then there are exactly the right thing to use!

> I will definitely check out the SciPy mailing list to see what the current
> trends in multiprocessing are on large arrays.

I'd probably go to Cython and forget about ctypes anyway ;-)


-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From jukka.rahkonen at mmmtike.fi  Mon Jul 30 23:39:23 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 31 Jul 2012 06:39:23 +0000 (UTC)
Subject: [gdal-dev] How to concatenate with newlines by using OGR SQL?
Message-ID: <loom.20120731T082542-525@post.gmane.org>

Hi,

I was playing with the new OSM driver and tried to transfer some 
POI features into my GPS. It goes well by using GPX format in 
between. However, I have a little problem. My GPS supports multiline
descriptions but I do not know how to insert newlines into the 
output of ogr2ogr. The following command adds a space character 
between addr_street and addr_housenumber, but is is somehow possible
to insert newline instead?

ogr2ogr -f gpx test.gpx finland.osm.pbf
-sql "select name,CONCAT(addr_street,' ',addr_housenumber)
as 'desc' from points where amenity='toilets'"

I made two blind trials as 
CONCAT(addr_street,\n,addr_housenumber) which gives parsing error and
CONCAT(addr_street,'\n',addr_housenumber) which adds string \n literally.

-Jukka Rahkonen-



From chaitanya.ch at gmail.com  Tue Jul 31 00:16:27 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 31 Jul 2012 12:46:27 +0530
Subject: [gdal-dev] How to concatenate with newlines by using OGR SQL?
In-Reply-To: <loom.20120731T082542-525@post.gmane.org>
References: <loom.20120731T082542-525@post.gmane.org>
Message-ID: <CAMKgpOa2JDP8PhJRjFhL9hUf_YtYrp9_at8so4BYiFUV6Qh_QQ@mail.gmail.com>

Jukka,

You can try to pass the newline character directly from the command line.
With bash, you can use $'\n'. In your case it will be like this:

ogr2ogr -f gpx test.gpx finland.osm.pbf
-sql "select name,CONCAT(addr_street,"$'\n'",addr_housenumber)
as 'desc' from points where amenity='toilets'"

On Tue, Jul 31, 2012 at 12:09 PM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Hi,
>
> I was playing with the new OSM driver and tried to transfer some
> POI features into my GPS. It goes well by using GPX format in
> between. However, I have a little problem. My GPS supports multiline
> descriptions but I do not know how to insert newlines into the
> output of ogr2ogr. The following command adds a space character
> between addr_street and addr_housenumber, but is is somehow possible
> to insert newline instead?
>
> ogr2ogr -f gpx test.gpx finland.osm.pbf
> -sql "select name,CONCAT(addr_street,' ',addr_housenumber)
> as 'desc' from points where amenity='toilets'"
>
> I made two blind trials as
> CONCAT(addr_street,\n,addr_housenumber) which gives parsing error and
> CONCAT(addr_street,'\n',addr_housenumber) which adds string \n literally.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/74674fc1/attachment.html>

From Jukka.Rahkonen at mmmtike.fi  Tue Jul 31 00:36:22 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue, 31 Jul 2012 07:36:22 +0000
Subject: [gdal-dev] How to concatenate with newlines by using OGR SQL?
Message-ID: <84446DEF76453C439E9E97E438E13A6346096B@suutari.haapa.mmm.fi>

Hi,

Sorry, I forgot to tell that I am on Windows.  ?$?\n?? looks so gurutic that I feel jealous. I hope I will never need to teach anybody to use it at work, though ?

-Jukka-

Chaitanya kumar wrote:

Jukka,

You can try to pass the newline character directly from the command line. With bash, you can use $'\n'. In your case it will be like this:

ogr2ogr -f gpx test.gpx finland.osm.pbf
-sql "select name,CONCAT(addr_street,"$'\n'",addr_housenumber)
as 'desc' from points where amenity='toilets'"
On Tue, Jul 31, 2012 at 12:09 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>> wrote:
Hi,

I was playing with the new OSM driver and tried to transfer some
POI features into my GPS. It goes well by using GPX format in
between. However, I have a little problem. My GPS supports multiline
descriptions but I do not know how to insert newlines into the
output of ogr2ogr. The following command adds a space character
between addr_street and addr_housenumber, but is is somehow possible
to insert newline instead?

ogr2ogr -f gpx test.gpx finland.osm.pbf
-sql "select name,CONCAT(addr_street,' ',addr_housenumber)
as 'desc' from points where amenity='toilets'"

I made two blind trials as
CONCAT(addr_street,\n,addr_housenumber) which gives parsing error and
CONCAT(addr_street,'\n',addr_housenumber) which adds string \n literally.

-Jukka Rahkonen-


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/7fed9aba/attachment.html>

From chaitanya.ch at gmail.com  Tue Jul 31 02:13:34 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 31 Jul 2012 14:43:34 +0530
Subject: [gdal-dev] How to concatenate with newlines by using OGR SQL?
In-Reply-To: <84446DEF76453C439E9E97E438E13A6346096B@suutari.haapa.mmm.fi>
References: <84446DEF76453C439E9E97E438E13A6346096B@suutari.haapa.mmm.fi>
Message-ID: <CAMKgpOYLE5o=8yP3S+QN+HBwTjiV6eCS7hb8KEh_BeXpG2_gZQ@mail.gmail.com>

Jukka,

This should work:

ogr2ogr -f gpx test.gpx finland.osm.pbf -sql ^
*More? *"select name,CONCAT(addr_street,'^
*More? *
*More? *',addr_housenumber) as 'desc' from points where amenity='toilets'"

Note that the "More? " part is given by DOS. By giving ^ at the end of line
you are saying that there is more stuff to come. If you simply press
'return' when it prompts for more, it will treat it as a newline char and
ask for more one more time.

DOS treats ^ as a quote character.

On Tue, Jul 31, 2012 at 1:06 PM, Rahkonen Jukka
<Jukka.Rahkonen at mmmtike.fi>wrote:

>  Hi,****
>
> ** **
>
> Sorry, I forgot to tell that I am on Windows.  ?$?\n?? looks so gurutic
> that I feel jealous. I hope I will never need to teach anybody to use it at
> work, though J****
>
> ** **
>
> -Jukka-****
>
> ** **
>
> Chaitanya kumar wrote:****
>
> ** **
>
> Jukka,
>
> You can try to pass the newline character directly from the command line.
> With bash, you can use $'\n'. In your case it will be like this:
>
> ogr2ogr -f gpx test.gpx finland.osm.pbf
> -sql "select name,CONCAT(addr_street,"$'\n'",addr_housenumber)
> as 'desc' from points where amenity='toilets'"****
>
> On Tue, Jul 31, 2012 at 12:09 PM, Jukka Rahkonen <
> jukka.rahkonen at mmmtike.fi> wrote:****
>
> Hi,
>
> I was playing with the new OSM driver and tried to transfer some
> POI features into my GPS. It goes well by using GPX format in
> between. However, I have a little problem. My GPS supports multiline
> descriptions but I do not know how to insert newlines into the
> output of ogr2ogr. The following command adds a space character
> between addr_street and addr_housenumber, but is is somehow possible
> to insert newline instead?
>
> ogr2ogr -f gpx test.gpx finland.osm.pbf
> -sql "select name,CONCAT(addr_street,' ',addr_housenumber)
> as 'desc' from points where amenity='toilets'"
>
> I made two blind trials as
> CONCAT(addr_street,\n,addr_housenumber) which gives parsing error and
> CONCAT(addr_street,'\n',addr_housenumber) which adds string \n literally.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/04cf77ec/attachment-0001.html>

From mandschulz at googlemail.com  Tue Jul 31 02:32:35 2012
From: mandschulz at googlemail.com (Michael Schulz)
Date: Tue, 31 Jul 2012 11:32:35 +0200
Subject: [gdal-dev] reprojection of global rasters to mollweide
Message-ID: <CA+s71-wE4AVG5cLRoPashrMUU9_S7+a+uFGmmV2xc=FrpLA8HQ@mail.gmail.com>

Dear GDAL'ers,

I have currently some issues with reprojecting global datasets in
geographic coordinates to the Mollweide projection (GDAL 1.8.0). When using
gdalwarp like:

gdalwarp -s_srs 'EPSG:4326' -t_srs '+proj=moll +lon_0=0 +x_0=0 +y_0=0
+ellps=WGS84 +datum=WGS84 +units=m +no_defs' LatLon.2001.tree.nd.tif
Mollweide.2001.tree.nd.tif

unpredictably, it sometimes works but other times I get the "Too many
points (441 out of 441) failed to transform" error. I was wondering whether
this could be a memory size issues (although the machine I'm working has
24GB RAM).

To overcome this adding the config option CHECK_WITH_INVERT_PROJ FALSE
works, but now the projected raster shows wrapped values outside the actual
valid coordinate range for Mollweide, e.g. the Aleutian Islands appear
twice (once inside the outer ellipse. Is this due to
the CHECK_WITH_INVERT_PROJ? I haven't worked with the cutline option
before, but should/could this be used here to solve this?

Happy about any feedback on this issue. Thanks, Michael

-- 
-----------------------------------------------------------
Michael Schulz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/9624dd59/attachment.html>

From Jukka.Rahkonen at mmmtike.fi  Tue Jul 31 02:54:12 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue, 31 Jul 2012 09:54:12 +0000
Subject: [gdal-dev] How to concatenate with newlines by using OGR SQL?
Message-ID: <84446DEF76453C439E9E97E438E13A634609DC@suutari.haapa.mmm.fi>

Hi,

Great, it does work. I was reading an entertaining page
http://stackoverflow.com/questions/245395/hidden-features-of-windows-batch-files
and because of http://stackoverflow.com/a/254169 I was just experimenting with ^

I wonder if OGR SQL could have one more special field for newline for making things easier and similar for Linux and Windows users. Usage could  then be like
-sql "select name,CONCAT(addr_street,NEWLINE,addr_housenumber)

There may not be so many use cases for this, but at least it would make it easier to create nice POI files in GPX format for GPS units which is not at all uncommon task.

-Jukka-


Chaitanya kumar wrote:

Jukka,

This should work:

ogr2ogr -f gpx test.gpx finland.osm.pbf -sql ^
More? "select name,CONCAT(addr_street,'^
More?
More? ',addr_housenumber) as 'desc' from points where amenity='toilets'"

Note that the "More? " part is given by DOS. By giving ^ at the end of line you are saying that there is more stuff to come. If you simply press 'return' when it prompts for more, it will treat it as a newline char and ask for more one more time.

DOS treats ^ as a quote character.
On Tue, Jul 31, 2012 at 1:06 PM, Rahkonen Jukka <Jukka.Rahkonen at mmmtike.fi<mailto:Jukka.Rahkonen at mmmtike.fi>> wrote:
Hi,

Sorry, I forgot to tell that I am on Windows.  ?$?\n?? looks so gurutic that I feel jealous. I hope I will never need to teach anybody to use it at work, though ?

-Jukka-

Chaitanya kumar wrote:

Jukka,

You can try to pass the newline character directly from the command line. With bash, you can use $'\n'. In your case it will be like this:

ogr2ogr -f gpx test.gpx finland.osm.pbf
-sql "select name,CONCAT(addr_street,"$'\n'",addr_housenumber)
as 'desc' from points where amenity='toilets'"
On Tue, Jul 31, 2012 at 12:09 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>> wrote:
Hi,

I was playing with the new OSM driver and tried to transfer some
POI features into my GPS. It goes well by using GPX format in
between. However, I have a little problem. My GPS supports multiline
descriptions but I do not know how to insert newlines into the
output of ogr2ogr. The following command adds a space character
between addr_street and addr_housenumber, but is is somehow possible
to insert newline instead?

ogr2ogr -f gpx test.gpx finland.osm.pbf
-sql "select name,CONCAT(addr_street,' ',addr_housenumber)
as 'desc' from points where amenity='toilets'"

I made two blind trials as
CONCAT(addr_street,\n,addr_housenumber) which gives parsing error and
CONCAT(addr_street,'\n',addr_housenumber) which adds string \n literally.

-Jukka Rahkonen-


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584<tel:%2B91-9494447584>
17.2416N 80.1426E

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/264486a4/attachment.html>

From piero.campa at gmail.com  Tue Jul 31 02:56:25 2012
From: piero.campa at gmail.com (Piero Campalani)
Date: Tue, 31 Jul 2012 11:56:25 +0200
Subject: [gdal-dev] gdalsrsinfo "ERROR - failed to load SRS definition"
In-Reply-To: <1343662103.5016a81708984@imp.free.fr>
References: <CAMp9JaPNXNJ3uxj-DeyTMa69L0Vs2uV_yQi3SnAhWP2SMVEtoA@mail.gmail.com>
	<1343655212.50168d2c98d91@imp.free.fr>
	<CAMp9JaMfbqczCxpA4XEYz2zY+0EMs-YqqA1aNj6k0RLVpW3btw@mail.gmail.com>
	<1343662103.5016a81708984@imp.free.fr>
Message-ID: <CAMp9JaNBDAu-4+14VWhhEkvAqfR3PxZ4qsThx7GdNtgQagq0zg@mail.gmail.com>

Even,
the purpose was simply to call the utility from within a Java servlet to
retrieve the WKT translation of GML definitions at runtime.
In my case this would be then necessary until GeoTools will not be able to
decode GML definitions, but it unluckily seems that it neither can [1].

As Etienne said, is any of you aware of some other tool that can do that?

Thanks for the answers so far.
Best,
Piero

[1]
http://osgeo-org.1560.n6.nabble.com/Parsing-GML-CRS-definitions-td4963620.html

On 30 July 2012 17:28, Even Rouault <even.rouault at mines-paris.org> wrote:

> Selon Piero Campalani <piero.campa at gmail.com>:
>
> > Thanks Even,
> > I suspected this, GML is still not that widely used for CRS definition
> > seemingly.
> >
> > Unluckily I have strong reasons to use GML, so do you know if there are
> is
> > some developing in progress to support a wider range of projections
> from/to
> > the XML representation?
>
> Not that I'm aware of. The last significant work in that area of OSR dates
> back
> to more than 6 years ago.
>
> From what I see from the code, adding new projections should be doable,
> but as
> this is rather a boring task, it would help if you could identify the
> projections methods that are the most common. Are you trying to be
> interoperable
> with another software, or is it just GDAL/GDAL interoperability ? Having
> GDAL/GDAL interoperability is easy, but making sure it works properly with
> other
> software is less obvious.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/634db340/attachment-0001.html>

From chaitanya.ch at gmail.com  Tue Jul 31 06:30:17 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 31 Jul 2012 19:00:17 +0530
Subject: [gdal-dev] gdalbuildvrt problem with heterogenous band
	characteristics
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A2805AD4117@allkexa1.NIRAS.INT>
References: <BCF6B63AE0B25941A7F56567B58A2805AD4117@allkexa1.NIRAS.INT>
Message-ID: <CAMKgpOYPxL9zxGxwNwc1D9y0wd0EaTCigUFrJGb8zoRz_aBokA@mail.gmail.com>

Casper,

This message should not appear unless there is a difference in the band
data type, colour interpretation or the band order.
Can you check if manually adding the old file works?

On Mon, Jul 30, 2012 at 11:01 PM, Casper B?rgesen (CABO) <CABO at niras.dk>wrote:

>  Hi! ****
>
> ** **
>
> I?m trying to create a VRT file from 4 GeoTIFFs using gdalbuildvrt. Three
> of the GeoTIFFs are created using OrthoVista and the last one created with
> an earlier version of the same program. When I run gdalbuildvrt I get the
> following error message when I try to add the file created by the early
> version: ****
>
> ** **
>
> Warning 6: gdalbuildvrt does not support heterogenous band
> characteristics. Skipping...****
>
> ** **
>
> Running gdalinfo on the 4 files I see only a difference in the metadata
> section (and of course in the coordinates). ****
>
> In the following is the band information from two of the files:****
>
> ** **
>
> [From new version]****
>
> Band 1 Block=6250x20 Type=Byte, ColorInterp=Red****
>
>   Overviews: 1024x1024****
>
> Band 2 Block=6250x20 Type=Byte, ColorInterp=Green****
>
>   Overviews: 1024x1024****
>
> Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue****
>
>   Overviews: 1024x1024****
>
> Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined****
>
>   Overviews: 1024x1024****
>
> ** **
>
> [From earlier version]****
>
> Band 1 Block=6250x20 Type=Byte, ColorInterp=Red****
>
>   Overviews: 1024x1024****
>
> Band 2 Block=6250x20 Type=Byte, ColorInterp=Green****
>
>   Overviews: 1024x1024****
>
> Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue****
>
>   Overviews: 1024x1024****
>
> Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined****
>
>   Overviews: 1024x1024****
>
> ** **
>
> To me they seem identical and I can display them both using QGis 1.8. I
> guess that the difference is deeper inside the TIFFs than gdalinfo informs
> me about ? what can I do to avoid this problem?****
>
> ** **
>
> Regards Casper****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/51ba0f30/attachment.html>

From CABO at NIRAS.DK  Tue Jul 31 06:46:20 2012
From: CABO at NIRAS.DK (=?utf-8?B?Q2FzcGVyIELDuHJnZXNlbiAoQ0FCTyk=?=)
Date: Tue, 31 Jul 2012 13:46:20 +0000
Subject: [gdal-dev] gdalbuildvrt problem with heterogenous band
 characteristics
In-Reply-To: <CAMKgpOYPxL9zxGxwNwc1D9y0wd0EaTCigUFrJGb8zoRz_aBokA@mail.gmail.com>
References: <BCF6B63AE0B25941A7F56567B58A2805AD4117@allkexa1.NIRAS.INT>
	<CAMKgpOYPxL9zxGxwNwc1D9y0wd0EaTCigUFrJGb8zoRz_aBokA@mail.gmail.com>
Message-ID: <BCF6B63AE0B25941A7F56567B58A2805AD4219@allkexa1.NIRAS.INT>

What do you mean by manually? I run gdalbuildvrt using the command line, so I don?t understand how it can be done more manually ?

gdalbuildvrt myfile.vrt file1.tif file2.tif file3.tif file4.tif

I have tried using an old version of gdalinfo (1.7.0) and it gives tells me that my first 3 bands in the old file contains a mask flag:

Mask Flags: PER_DATASET ALPHA

This flag is not present in the 3 new files. Could this be the reason?

Btw. my normal version of gdal is 1.9.

Regards, Casper

From: Chaitanya kumar CH [mailto:chaitanya.ch at gmail.com]
Sent: 31. juli 2012 15:30
To: Casper B?rgesen (CABO)
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdalbuildvrt problem with heterogenous band characteristics

Casper,

This message should not appear unless there is a difference in the band data type, colour interpretation or the band order.
Can you check if manually adding the old file works?
On Mon, Jul 30, 2012 at 11:01 PM, Casper B?rgesen (CABO) <CABO at niras.dk<mailto:CABO at niras.dk>> wrote:
Hi!

I?m trying to create a VRT file from 4 GeoTIFFs using gdalbuildvrt. Three of the GeoTIFFs are created using OrthoVista and the last one created with an earlier version of the same program. When I run gdalbuildvrt I get the following error message when I try to add the file created by the early version:

Warning 6: gdalbuildvrt does not support heterogenous band characteristics. Skipping...

Running gdalinfo on the 4 files I see only a difference in the metadata section (and of course in the coordinates).
In the following is the band information from two of the files:

[From new version]
Band 1 Block=6250x20 Type=Byte, ColorInterp=Red
  Overviews: 1024x1024
Band 2 Block=6250x20 Type=Byte, ColorInterp=Green
  Overviews: 1024x1024
Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue
  Overviews: 1024x1024
Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined
  Overviews: 1024x1024

[From earlier version]
Band 1 Block=6250x20 Type=Byte, ColorInterp=Red
  Overviews: 1024x1024
Band 2 Block=6250x20 Type=Byte, ColorInterp=Green
  Overviews: 1024x1024
Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue
  Overviews: 1024x1024
Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined
  Overviews: 1024x1024

To me they seem identical and I can display them both using QGis 1.8. I guess that the difference is deeper inside the TIFFs than gdalinfo informs me about ? what can I do to avoid this problem?

Regards Casper

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/d100f882/attachment-0001.html>

From chaitanya.ch at gmail.com  Tue Jul 31 07:15:34 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 31 Jul 2012 19:45:34 +0530
Subject: [gdal-dev] gdalbuildvrt problem with heterogenous band
	characteristics
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A2805AD4219@allkexa1.NIRAS.INT>
References: <BCF6B63AE0B25941A7F56567B58A2805AD4117@allkexa1.NIRAS.INT>
	<CAMKgpOYPxL9zxGxwNwc1D9y0wd0EaTCigUFrJGb8zoRz_aBokA@mail.gmail.com>
	<BCF6B63AE0B25941A7F56567B58A2805AD4219@allkexa1.NIRAS.INT>
Message-ID: <CAMKgpOYCdcwgiRb71eS4-MWxA=Kwyrop_ZYUifEXn44X2_Th3w@mail.gmail.com>

Casper,

You can edit the vrt file in a text editor. Just make a copy of the
elements of one file and change them according to the fourth file. You can
refer to the VRT tutorial[1] if you have any doubts.

Can you provide the full gdalinfo report of the two files?

[1]: http://www.gdal.org/gdal_vrttut.html

On Tue, Jul 31, 2012 at 7:16 PM, Casper B?rgesen (CABO) <CABO at niras.dk>wrote:

>  What do you mean by manually? I run gdalbuildvrt using the command line,
> so I don?t understand how it can be done more manually J****
>
> ** **
>
> gdalbuildvrt myfile.vrt file1.tif file2.tif file3.tif file4.tif****
>
> ** **
>
> I have tried using an old version of gdalinfo (1.7.0) and it gives tells
> me that my first 3 bands in the old file contains a mask flag:****
>
> ** **
>
> Mask Flags: PER_DATASET ALPHA****
>
> ** **
>
> This flag is not present in the 3 new files. Could this be the reason? ***
> *
>
> ** **
>
> Btw. my normal version of gdal is 1.9.****
>
> ** **
>
> Regards, Casper****
>
> ** **
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch at gmail.com]
> *Sent:* 31. juli 2012 15:30
> *To:* Casper B?rgesen (CABO)
> *Cc:* gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] gdalbuildvrt problem with heterogenous band
> characteristics****
>
> ** **
>
> Casper,
>
> This message should not appear unless there is a difference in the band
> data type, colour interpretation or the band order.
> Can you check if manually adding the old file works?****
>
> On Mon, Jul 30, 2012 at 11:01 PM, Casper B?rgesen (CABO) <CABO at niras.dk>
> wrote:****
>
> Hi! ****
>
>  ****
>
> I?m trying to create a VRT file from 4 GeoTIFFs using gdalbuildvrt. Three
> of the GeoTIFFs are created using OrthoVista and the last one created with
> an earlier version of the same program. When I run gdalbuildvrt I get the
> following error message when I try to add the file created by the early
> version: ****
>
>  ****
>
> Warning 6: gdalbuildvrt does not support heterogenous band
> characteristics. Skipping...****
>
>  ****
>
> Running gdalinfo on the 4 files I see only a difference in the metadata
> section (and of course in the coordinates). ****
>
> In the following is the band information from two of the files:****
>
>  ****
>
> [From new version]****
>
> Band 1 Block=6250x20 Type=Byte, ColorInterp=Red****
>
>   Overviews: 1024x1024****
>
> Band 2 Block=6250x20 Type=Byte, ColorInterp=Green****
>
>   Overviews: 1024x1024****
>
> Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue****
>
>   Overviews: 1024x1024****
>
> Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined****
>
>   Overviews: 1024x1024****
>
>  ****
>
> [From earlier version]****
>
> Band 1 Block=6250x20 Type=Byte, ColorInterp=Red****
>
>   Overviews: 1024x1024****
>
> Band 2 Block=6250x20 Type=Byte, ColorInterp=Green****
>
>   Overviews: 1024x1024****
>
> Band 3 Block=6250x20 Type=Byte, ColorInterp=Blue****
>
>   Overviews: 1024x1024****
>
> Band 4 Block=6250x20 Type=Byte, ColorInterp=Undefined****
>
>   Overviews: 1024x1024****
>
>  ****
>
> To me they seem identical and I can display them both using QGis 1.8. I
> guess that the difference is deeper inside the TIFFs than gdalinfo informs
> me about ? what can I do to avoid this problem?****
>
>  ****
>
> Regards Casper****
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E****
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120731/18e2cef4/attachment.html>

From sbahram at nc.rr.com  Tue Jul 31 08:36:34 2012
From: sbahram at nc.rr.com (Sina Bahram)
Date: Tue, 31 Jul 2012 11:36:34 -0400
Subject: [gdal-dev] splitting along 180
Message-ID: <00ca01cd6f32$4686a6d0$d393f470$@nc.rr.com>

I was wondering if this isn't the right list for the below question, where would you folks recommend I ask?

Thanks much

Take care,
Sina

Website: www.SinaBahram.com
Twitter: @SinaBahram

-----Original Message-----
From: Sina Bahram [mailto:sbahram at nc.rr.com] 
Sent: Monday, July 30, 2012 12:18 AM
To: 'gdal-dev at lists.osgeo.org'
Subject: splitting along 180

Hello,

I hope this is the right list for this question. If not, then my apologies and sincere thanks in advance for knowing what list might
be.

I have a dataset of country borders which I obtained from:
http://thematicmapping.org/downloads/world_borders.php/

I have that dataset in both shp and SQL, but I'll put out there that I don't feel that affects my problem; however, please let me
know if does/can.

Because I'll be displaying those borders in something that uses Google Maps, I've got a problem. That problem is that countries
whose polygons cross 180 degrees are displaying extremely weird in Google Maps. Either it's splitting them completely wrong, taking
them all the way across the map, whatever the weirdness might be.

So, I thought I can simply address this by splitting the polygons of the countries that cross the line so that no country contains a
polygon that presents a problem. Examples of such countries/regions would be Russia and Antarctica.

I therefore invoked the following:
ogr2ogr -wrapdateline -t_srs EPSG:4326 new countryBorders.sql

I got:
ERROR 1: TopologyException: found non-noded intersection between LINESTRING (-59.7742 -72.9003, -59.8494 -73.2331) and LINESTRING (0
-73.1221, -89.3211 -73.0542) at -59.8141 -73.0766
ERROR 1: TopologyException: found non-noded intersection between LINESTRING (-59.7742 -72.9003, -59.8494 -73.2331) and LINESTRING
(180 -73.2589, -89.3211 -73.0542) at -59.8141 -73.0766

A few questions:

#1: am I even doing this the right way? for example, I find it odd that I have to provide ogr2ogr the same srs as of the input. Is
that translation even needed? Is that even the right SRS to use? I obtained that SRS from taking the proj and looking it up on this
site:
http://prj2epsg.org/search

#2: all I want is for a few of the polygons of those few troublesome countries to get split so they don't cause any more problems.
-wrapdateline seemed like the perfect solution ... maybe it's not?

I'm completely open to advice, suggestions, references, whatever.

Thanks so much in advance.

Take care,
Sina

Website: www.SinaBahram.com
Twitter: @SinaBahram




From even.rouault at mines-paris.org  Tue Jul 31 12:17:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 31 Jul 2012 21:17:02 +0200
Subject: [gdal-dev] OSM Driver and World Planet file (pbf format)
In-Reply-To: <loom.20120730T122536-698@post.gmane.org>
References: <CC33002F.2604E%michael.smith@usace.army.mil>
	<loom.20120729T200504-731@post.gmane.org>
	<loom.20120730T122536-698@post.gmane.org>
Message-ID: <201207312117.02533.even.rouault@mines-paris.org>


> Another set of tests with a brand new and quite powerful laptop.
>  Specs for the
> computer:
> Intel i7-2760QM @2.4 GHz processor (8 threads)
> Hitachi Travelstar Z7K320 7200 rpm SATA disk
> 8 GB of memory
> Windows 7, 64-bit
> 
> GDAL-version r24717, Win64 build from gisinternals.com
> 
> Timings for germany.osm.pbf (1.3 GB)
> ====================================
> 
> A) Default settings with command
> ogr2ogr -f sqlite -dsco spatialite=yes germany.sqlite
> germany.osm.pbf -gt 20000 -progress --config OGR_SQLITE_SYNCHRONOUS OFF
> 
> - reading the data               67 minutes
> - creating spatial indexes       38 minutes
> - total                         105 minutes
> 
> B) Using in-memory Spatialite db for the first step by giving
> SET OSM_MAX_TMPFILE_SIZE=7000
> 
> - reading the data              16 minutes
> - creating spatial indexes      38 minutes
> - total                         54 minutes
> 
> Peak memory usage during this conversion was 4.4 GB.
> 
> Conclusions
> ===========
> * The initial reading of data is heavily i/o bound. This phase
> is really fast if there is enough memory for keeping the OSM
> tempfile in memory but SSD disk seems to offer equally good
> performance.
> * Creating spatial indexes for the Spatialite tables is also
> i/o bound. The hardware sets the speed limit and there are
> no other tricks for improving the performance. Multi-core
> CPU is quite idle during this phase with 10-15% load.
> * If user does not plan to do spatial queries then then it
> may be handy to save some time and create the Spatialite db
> without spatial indexes by using -lco SPATIAL_INDEX=NO option.
> * Windows disk i/o may be a limiting factor.
> 
> I consider that for small OSM datasets the speed starts to be
> good enough. For me it is about the same if converting the
> Finnish OSM data (137 MB in .pbf format) takes 160 or 140
> seconds when using the default settings or in-memory temporary
> database, respectively.

Interesting findings.

A SSD is of course the ideal hardware to get efficient random access to the 
nodes.

I've just introduced inr 24719 a new config. option OSM_COMPRESS_NODES that can 
be set to YES. The effect is to use a compression algorithm while storing the 
temporary node DB.  This can compress to a factor of 3 or 4, and help keeping 
the node DB to a size where it is below the RAM size and that the OS can 
dramatically cache it (at least on Linux). This can be efficient for OSM 
extracts of the size of the country, but probably not for a planet file. In the 
case of Germany and France, here's the effect on my PC (SATA disk) :

$ time ogr2ogr -f null null /home/even/gdal/data/osm/france_new.osm.pbf -
progress --config OSM_COMPRESS_NODES YES
[...]
real    25m34.029s
user    15m11.530s
sys 0m36.470s

$ time ogr2ogr -f null null /home/even/gdal/data/osm/france_new.osm.pbf -
progress --config OSM_COMPRESS_NODES NO
[...]
real    74m33.077s
user    15m38.570s
sys 1m31.720s

$ time ogr2ogr -f null null /home/even/gdal/data/osm/germany.osm.pbf -progress 
--config OSM_COMPRESS_NODES YES
[...]
real    7m46.594s
user    7m24.990s
sys 0m11.880s

$ time ogr2ogr -f null null /home/even/gdal/data/osm/germany.osm.pbf -progress 
--config OSM_COMPRESS_NODES NO
[...]
real    108m48.967s
user    7m47.970s
sys 2m9.310s

I didn't turn it to YES by default, because I'm unsure of the performance 
impact on SSD. Perhaps you have a chance to test.




