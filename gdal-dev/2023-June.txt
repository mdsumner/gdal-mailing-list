From afernandez at odyhpc.com  Thu Jun  1 07:35:34 2023
From: afernandez at odyhpc.com (afernandez)
Date: Thu, 01 Jun 2023 14:35:34 +0000
Subject: [gdal-dev] How to decrease file size of colored raster bands?
Message-ID: <b1e913203547f.95f93eeb78cbd@odyhpc.com>

Hello,
I'm generating a raster file with GDAL. The pseudo-code (where the raster 
is loaded as 'var') for the colored version reads:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers 
so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This works well but the problem is that the generated file becomes too 
large and difficult to work with. If I change to a black and white 
representation by simply changing the 7th line to: 
gdal_ds = driver.Create(out_path, cols, rows, 1, type_code) 
The new file has a size smaller than 1% of the colored one. I was wondering 
if there is anything intermediate (with colors but generating a smaller 
size) or if I would need a more radical approach such as using a driver 
different from GTIFF or something else.
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/6517ace5/attachment.htm>

From lnicola at dend.ro  Thu Jun  1 09:28:56 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 01 Jun 2023 19:28:56 +0300
Subject: [gdal-dev] How to decrease file size of colored raster bands?
In-Reply-To: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
Message-ID: <ccff3aad-d290-4a41-a950-207855e485e9@betaapp.fastmail.com>

Hi,

There are a couple of things you can try:
 ? you seem to be scaling the data to 8-bit, but saving it as UInt16; GDT_Byte should work, yielding a 50% reduction. I didn't quite understand the comment about the color, does the palette not work with 8-bit images?
 ? you can enable and tune compression: check out COMPRESS, PREDICTOR and the level options in https://gdal.org/drivers/raster/gtiff.html. ZSTD and DEFLATE are pretty good.
 ? you can enable the tiled mode (TILED on the same page as above), which sometimes yields smaller files
 ? if you find large files difficult to use, you can enable overview creation or use the COG driver (it's a subset of GTiff)
 ? finally, you can use a lossy compression format like JPEG or LERC, but it's probably not what you want
Regards,
Laurentiu

On Thu, Jun 1, 2023, at 17:35, afernandez wrote:
> Hello,
> I'm generating a raster file with GDAL. The pseudo-code (where the raster is loaded as 'var') for the colored version reads:
> # Initial manipulations
>             dims = var.dimensions
>             shape = var.shape
>             driver_name = 'GTIFF'
>             driver = gdal.GetDriverByName(driver_name) 
>             np_dtype = var.dtype
>             type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>             gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
>             gdal_ds.SetProjection(_my_projection_)
>             gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix 
>             band = gdal_ds.GetRasterBand(1) 
>             data = var[_chosen_index_]
>             data = ma.getdata(data)
>             data_scaled =  np.interp(data, (data.min(), data.max()), (0, 255))
>             data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
>             band.WriteArray(data_scaled2)
>             gdal_ds.FlushCache()  
> This works well but the problem is that the generated file becomes too large and difficult to work with. If I change to a black and white representation by simply changing the 7th line to: 
>             gdal_ds = driver.Create(out_path, cols, rows, 1, type_code) 
> The new file has a size smaller than 1% of the colored one. I was wondering if there is anything intermediate (with colors but generating a smaller size) or if I would need a more radical approach such as using a driver different from GTIFF or something else.
> Thanks.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/e50a9057/attachment-0001.htm>

From public at postholer.com  Thu Jun  1 09:47:37 2023
From: public at postholer.com (Scott)
Date: Thu, 1 Jun 2023 09:47:37 -0700
Subject: [gdal-dev] How to decrease file size of colored raster bands?
In-Reply-To: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
Message-ID: <600916e2-f6f6-3f2d-25af-65430f6ddcda@postholer.com>

As a test you can skip the whole python debacle and try this:

gdal_translate -f COG -co COMPRESS=DEFLATE -scale 0 255 -ot Byte 
source.tif target.tif


On 6/1/23 07:35, afernandez wrote:
> Hello,
> I'm generating a raster file with GDAL. The pseudo-code (where the 
> raster is loaded as 'var') for the colored version reads:
> # Initial manipulations
>  ? ? ? ? ? ? dims = var.dimensions
>  ? shape = var.shape
>  ? ? driver_name = 'GTIFF'
>  ? ? ? ? driver = gdal.GetDriverByName(driver_name)
>  ? ? ? ? np_dtype = var.dtype
>  ? ? ? ? ? ? type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>  ? ? ? ? ? ? gdal_ds = driver.Create(_my_path_, cols, rows, 1, 
> gdal.GDT_UInt16)
> gdal_ds.SetProjection(_my_projection_)
> gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix
>  ? ? ? ? ? band = gdal_ds.GetRasterBand(1)
>  ? ? ? data = var[_chosen_index_]
>  ? ? ? ? ? data = ma.getdata(data)
>  ? ? ? ? ? ? data_scaled = np.interp(data, (data.min(), data.max()), (0, 
> 255))
>  ? ? ? ? ? ? data_scaled2 = data_scaled.astype(int) # This is to rescale 
> into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
>  ? band.WriteArray(data_scaled2)
>  ? ? ? ? gdal_ds.FlushCache()
> This works well but the problem is that the generated file becomes too 
> large and difficult to work with. If I change to a black and white 
> representation by simply changing the 7th line to:
>  ? ? ? ? ? ? gdal_ds = driver.Create(out_path, cols, rows, 1, type_code)
> The new file has a size smaller than 1% of the colored one. I was 
> wondering if there is anything intermediate (with colors but generating 
> a smaller size) or if I would need a more radical approach such as using 
> a driver different from GTIFF or something else.
> Thanks.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From afernandez at odyhpc.com  Thu Jun  1 10:41:43 2023
From: afernandez at odyhpc.com (afernandez)
Date: Thu, 01 Jun 2023 17:41:43 +0000
Subject: [gdal-dev] How to decrease file size of colored raster bands?
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
 <600916e2-f6f6-3f2d-25af-65430f6ddcda@postholer.com>
Message-ID: <9b86f88fda758.83dbb025161c9@odyhpc.com>

Hi Scott,
As I mentioned to Laurentiu, I'm still not getting the handle on how to use 
overviews but will keep working at it. However, this is only useful to me 
(and probably to other people) if they can be used from a python script, 
not from the OS.
Thanks,
Arturo
Scott wrote:
As a test you can skip the whole python debacle and try this:
gdal_translate -f COG -co COMPRESS=DEFLATE -scale 0 255 -ot Byte source.tif 
target.tif
On 6/1/23 07:35, afernandez wrote:
Hello,
I'm generating a raster file with GDAL. The pseudo-code (where the > raster 
is loaded as 'var') for the colored version reads:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name)
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, > gdal.GDT_UInt16)
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix
band = gdal_ds.GetRasterBand(1)
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, > 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale > into integers 
so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache()
This works well but the problem is that the generated file becomes too > 
large and difficult to work with. If I change to a black and white > 
representation by simply changing the 7th line to:
gdal_ds = driver.Create(out_path, cols, rows, 1, type_code)
The new file has a size smaller than 1% of the colored one. I was > 
wondering if there is anything intermediate (with colors but generating > a 
smaller size) or if I would need a more radical approach such as using > a 
driver different from GTIFF or something else.
Thanks.
 > _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/21d0f98a/attachment.htm>

From public at postholer.com  Thu Jun  1 10:44:15 2023
From: public at postholer.com (Scott)
Date: Thu, 1 Jun 2023 10:44:15 -0700
Subject: [gdal-dev] How to decrease file size of colored raster bands?
In-Reply-To: <9b86f88fda758.83dbb025161c9@odyhpc.com>
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
 <600916e2-f6f6-3f2d-25af-65430f6ddcda@postholer.com>
 <9b86f88fda758.83dbb025161c9@odyhpc.com>
Message-ID: <08efbd1f-1461-fee1-fd3e-ac4261fcbba5@postholer.com>

import os

os.system([gdal command here])


On 6/1/23 10:41, afernandez wrote:
> Hi Scott,
> As I mentioned to Laurentiu, I'm still not getting the handle on how to 
> use overviews but will keep working at it. However, this is only useful 
> to me (and probably to other people) if they can be used from a python 
> script, not from the OS.
> Thanks,
> Arturo
> 
> 
> 
> Scott wrote:
> 
> 
>> As a test you can skip the whole python debacle and try this:
>>
>> gdal_translate -f COG -co COMPRESS=DEFLATE -scale 0 255 -ot Byte 
>> source.tif target.tif
>>
>>
>> On 6/1/23 07:35, afernandez wrote:
>>
>>> Hello,
>>> I'm generating a raster file with GDAL. The pseudo-code (where the > 
>>> raster is loaded as 'var') for the colored version reads:
>>> # Initial manipulations
>>> ? ? ? ? ? ? dims = var.dimensions
>>> ? shape = var.shape
>>> driver_name = 'GTIFF'
>>> ? ? ? ? driver = gdal.GetDriverByName(driver_name)
>>> np_dtype = var.dtype
>>> type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>>> ? ? ? ? ? ? gdal_ds = driver.Create(_my_path_, cols, rows, 1, > 
>>> gdal.GDT_UInt16)
>>> gdal_ds.SetProjection(_my_projection_)
>>> gdal_ds.SetGeoTransform(_my_transformation_)
>>> # Creation of the bands and scaled matrix
>>> ? ? ? ? ? band = gdal_ds.GetRasterBand(1)
>>> ? ? ? data = var[_chosen_index_]
>>> ? ? ? ? ? data = ma.getdata(data)
>>> data_scaled = np.interp(data, (data.min(), data.max()), (0, > 255))
>>> ? ? ? ? ? ? data_scaled2 = data_scaled.astype(int) # This is to 
>>> rescale > into integers so that it can color the layer
>>> # *** Lines to set up the color palette ***
>>> # Write the array to band once everything has been rescaled
>>> ? band.WriteArray(data_scaled2)
>>> ? ? ? gdal_ds.FlushCache()
>>> This works well but the problem is that the generated file becomes 
>>> too > large and difficult to work with. If I change to a black and 
>>> white > representation by simply changing the 7th line to:
>>> ? ? gdal_ds = driver.Create(out_path, cols, rows, 1, type_code)
>>> The new file has a size smaller than 1% of the colored one. I was > 
>>> wondering if there is anything intermediate (with colors but 
>>> generating > a smaller size) or if I would need a more radical 
>>> approach such as using > a driver different from GTIFF or something else.
>>> Thanks.
>>> > _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From afernandez at odyhpc.com  Thu Jun  1 10:34:33 2023
From: afernandez at odyhpc.com (afernandez)
Date: Thu, 01 Jun 2023 17:34:33 +0000
Subject: [gdal-dev] How to decrease file size of colored raster bands?
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
 <ccff3aad-d290-4a41-a950-207855e485e9@betaapp.fastmail.com>
Message-ID: <d5a701a346f98.6e99773548411@odyhpc.com>

Hello Laurentiu,
The color palette is working fine. The issues seem to be caused by using UInt16 because I changed to GDT_Byte per your suggestion and everything is so much smoother (this was an oversight of mine as I recycled a snippet from somewhere and should have paid much closer attention to this detail). 
As for compressing and using overviews (for future use), I'm having some difficulty implementing them but it's less urgent and will keep working at it.
Thanks,
Arturo
Lauren?iu Nicola via gdal-dev wrote:
Hi,
There are a couple of things you can try:
you seem to be scaling the data to 8-bit, but saving it as UInt16; GDT_Byte should work, yielding a 50% reduction. I didn't quite understand the comment about the color, does the palette not work with 8-bit images?
you can enable and tune compression: check out COMPRESS, PREDICTOR and the level options in https://gdal.org/drivers/raster/gtiff.html <https://gdal.org/drivers/raster/gtiff.html> . ZSTD and DEFLATE are pretty good.
you can enable the tiled mode (TILED on the same page as above), which sometimes yields smaller files
if you find large files difficult to use, you can enable overview creation or use the COG driver (it's a subset of GTiff)
finally, you can use a lossy compression format like JPEG or LERC, but it's probably not what you want
Regards,
Laurentiu
On Thu, Jun 1, 2023, at 17:35, afernandez wrote:
Hello,
I'm generating a raster file with GDAL. The pseudo-code (where the raster is loaded as 'var') for the colored version reads:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This works well but the problem is that the generated file becomes too large and difficult to work with. If I change to a black and white representation by simply changing the 7th line to: 
gdal_ds = driver.Create(out_path, cols, rows, 1, type_code) 
The new file has a size smaller than 1% of the colored one. I was wondering if there is anything intermediate (with colors but generating a smaller size) or if I would need a more radical approach such as using a driver different from GTIFF or something else.
Thanks.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev> 
Hi,
There are a couple of things you can try:
you seem to be scaling the data to 8-bit, but saving it as UInt16; GDT_Byte should work, yielding a 50% reduction. I didn't quite understand the comment about the color, does the palette not work with 8-bit images?
you can enable and tune compression: check out COMPRESS, PREDICTOR and the level options in https://gdal.org/drivers/raster/gtiff.html <https://gdal.org/drivers/raster/gtiff.html> . ZSTD and DEFLATE are pretty good.
you can enable the tiled mode (TILED on the same page as above), which sometimes yields smaller files
if you find large files difficult to use, you can enable overview creation or use the COG driver (it's a subset of GTiff)
finally, you can use a lossy compression format like JPEG or LERC, but it's probably not what you want
Regards,
Laurentiu
On Thu, Jun 1, 2023, at 17:35, afernandez wrote:
Hello,
I'm generating a raster file with GDAL. The pseudo-code (where the raster is loaded as 'var') for the colored version reads:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This works well but the problem is that the generated file becomes too large and difficult to work with. If I change to a black and white representation by simply changing the 7th line to: 
gdal_ds = driver.Create(out_path, cols, rows, 1, type_code) 
The new file has a size smaller than 1% of the colored one. I was wondering if there is anything intermediate (with colors but generating a smaller size) or if I would need a more radical approach such as using a driver different from GTIFF or something else.
Thanks.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/c6952937/attachment-0001.htm>

From lnicola at dend.ro  Thu Jun  1 10:50:46 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 01 Jun 2023 20:50:46 +0300
Subject: [gdal-dev] How to decrease file size of colored raster bands?
In-Reply-To: <9b86f88fda758.83dbb025161c9@odyhpc.com>
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
 <600916e2-f6f6-3f2d-25af-65430f6ddcda@postholer.com>
 <9b86f88fda758.83dbb025161c9@odyhpc.com>
Message-ID: <aa77ee95-45dc-4c14-ab5a-9c9ef6f103ed@betaapp.fastmail.com>

Hi Arturo,

On Thu, Jun 1, 2023, at 20:41, afernandez wrote:
> Hi Scott,
> As I mentioned to Laurentiu, I'm still not getting the handle on how to use overviews but will keep working at it. 

You don't need to do anything except create them. QGIS will use them automatically, for example (make sure to use the tiled mode, though).

Anyway, I'm just replying to this, since I didn't get the email you're referring to.

Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/3ab72c27/attachment.htm>

From lnicola at dend.ro  Thu Jun  1 11:21:28 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 01 Jun 2023 21:21:28 +0300
Subject: [gdal-dev] How to decrease file size of colored raster bands?
In-Reply-To: <d5a701a346f98.6e99773548411@odyhpc.com>
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
 <ccff3aad-d290-4a41-a950-207855e485e9@betaapp.fastmail.com>
 <d5a701a346f98.6e99773548411@odyhpc.com>
Message-ID: <5572adda-327e-4eff-8da6-c6a4ef245431@betaapp.fastmail.com>

Hi,

Try saving the output into a new file. Those are "creation options".

Laurentiu

On Thu, Jun 1, 2023, at 20:34, afernandez wrote:
> Hello Laurentiu,
> The color palette is working fine. The issues seem to be caused by using UInt16 because I changed to GDT_Byte per your suggestion and everything is so much smoother (this was an oversight of mine as I recycled a snippet from somewhere and should have paid much closer attention to this detail). 
> As for compressing and using overviews (for future use), I'm having some difficulty implementing them but it's less urgent and will keep working at it.
> Thanks,
> Arturo
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/1f3dfa22/attachment.htm>

From lnicola at dend.ro  Thu Jun  1 11:39:23 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 01 Jun 2023 21:39:23 +0300
Subject: [gdal-dev] Can block offsets ever be negative?
Message-ID: <57e1b3cd-94f1-4339-a0f8-202b8157fda9@betaapp.fastmail.com>

Hello,

Just a quick question: can block offsets (such as those in in GDALReadBlock or IRasterIO) ever be negative? Is there any format that supports that?

GDAL uses signed integers everywhere, which is fine, but the intention isn't always clear at times.

Thanks,
Laurentiu Nicola
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/8944e12d/attachment.htm>

From even.rouault at spatialys.com  Thu Jun  1 11:45:39 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Jun 2023 20:45:39 +0200
Subject: [gdal-dev] Can block offsets ever be negative?
In-Reply-To: <57e1b3cd-94f1-4339-a0f8-202b8157fda9@betaapp.fastmail.com>
References: <57e1b3cd-94f1-4339-a0f8-202b8157fda9@betaapp.fastmail.com>
Message-ID: <9a59ef7b-13a1-fc94-05dc-c66b7c5c2352@spatialys.com>


Le 01/06/2023 ? 20:39, Lauren?iu Nicola via gdal-dev a ?crit?:
> Hello,
>
> Just a quick question: can block offsets (such as those in in 
> GDALReadBlock or IRasterIO) ever be negative?

No, this isn't allowed.

> Is there any format that supports that?
No
>
> GDAL uses signed integers everywhere, which is fine, but the intention 
> isn't always clear at times.
Doc enhancements to clarify that welcome
>
> Thanks,
> Laurentiu Nicola
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230601/7e7d6c66/attachment.htm>

From afernandez at odyhpc.com  Fri Jun  2 04:50:51 2023
From: afernandez at odyhpc.com (afernandez)
Date: Fri, 02 Jun 2023 11:50:51 +0000
Subject: [gdal-dev] How to decrease file size of colored raster bands?
References: <b1e913203547f.95f93eeb78cbd@odyhpc.com>
 <ccff3aad-d290-4a41-a950-207855e485e9@betaapp.fastmail.com>
 <d5a701a346f98.6e99773548411@odyhpc.com>
 <5572adda-327e-4eff-8da6-c6a4ef245431@betaapp.fastmail.com>
Message-ID: <8bf140b32810a.0b30fa4d9beb6@odyhpc.com>

Hi Scott and Laurentiu,
It is now compressing the file. On a minor note I usually prefer to use 'subprocess' instead of 'os.system' but either way it is now a matter of experimenting with the flags and finding out which is the best combination to compress the project output files. 
Thanks for all your help,
Arturo
Lauren?iu Nicola via gdal-dev wrote:
Hi,
Try saving the output into a new file. Those are "creation options".
Laurentiu
On Thu, Jun 1, 2023, at 20:34, afernandez wrote:
Hello Laurentiu,
The color palette is working fine. The issues seem to be caused by using UInt16 because I changed to GDT_Byte per your suggestion and everything is so much smoother (this was an oversight of mine as I recycled a snippet from somewhere and should have paid much closer attention to this detail). 
As for compressing and using overviews (for future use), I'm having some difficulty implementing them but it's less urgent and will keep working at it.
Thanks,
Arturo
Hi,
Try saving the output into a new file. Those are "creation options".
Laurentiu
On Thu, Jun 1, 2023, at 20:34, afernandez wrote:
Hello Laurentiu,
The color palette is working fine. The issues seem to be caused by using UInt16 because I changed to GDT_Byte per your suggestion and everything is so much smoother (this was an oversight of mine as I recycled a snippet from somewhere and should have paid much closer attention to this detail). 
As for compressing and using overviews (for future use), I'm having some difficulty implementing them but it's less urgent and will keep working at it.
Thanks,
Arturo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230602/9e095428/attachment.htm>

From a.pau at creaf.uab.cat  Fri Jun  2 08:08:26 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 2 Jun 2023 15:08:26 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
Message-ID: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Dear GDAL Team,
I am writing to you to introduce myself and ask you some questions, if I am allowed to.

We are a team of developers working on MiraMon GIS, and I, Abel Pau, am representing our group. We are interested in contributing to the GDAL community by generating GDAL drivers for our vector and raster formats.

MiraMon is a widely-used Geographic Information System (GIS) that offers a variety of functionalities for spatial data analysis and visualization across various sectors. Our short-time next goal is to enhance the accessibility and interoperability of MiraMon by integrating it with GDAL, which we believe will greatly benefit the GIS community.

You can find the specifications of our vector and raster formats on our website www.miramon.cat in the "Support/Technical notes" section under the titles "Format specification of the MiraMon vector files" and "Format specification of the MiraMon raster files".

I?ve been like 15 years programming this software in C (not C++) in our own style. So I have to get used to program in your style and in C++. It?ll not be easy for me but I hope you can help me if wome doubts arises.

I kindly request your collaboration in providing me with a clear roadmap of the steps we should follow to generate the GDAL drivers. While we are thoroughly reviewing the existing documentation, we want to ensure that we do not overlook any crucial aspects. Your guidance and expertise during this process would be greatly appreciated.

I hope you can answer some questions I have. Thanks in advance.


?         Do I need to ask for permission before starting a new driver, or is it assumed to be welcome?

?         I have downloaded the code from GitHub, but I'm not sure if it will provide me with a Visual Studio project. Will it generate an sln file?

?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow? I would like to be able to debug it. How will I know when I am ready to submit the driver?

We would like to express our sincere gratitude for the outstanding work you do with GDAL and for granting us the opportunity to contribute to this project. We are excited to begin collaborating with you and are confident that our joint efforts will have a positive impact on the GIS community.Thank you sincerely for your time and attention. We eagerly await your guidance and look forward to fruitful collaboration.
Best regards,


Abel Pau Garcia

T?cnic en SIG

a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>

Tel. +34 935814277

[cid:image001.png at 01D99574.DA15FF80][cid:image001.png at 01D99574.DA15FF80][cid:image001.png at 01D99574.DA15FF80][cid:image001.png at 01D99574.DA15FF80][cid:image001.png at 01D99574.DA15FF80]

www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat

CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230602/c3ac01e8/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 133 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230602/c3ac01e8/attachment-0001.png>

From bdezonia at gmail.com  Fri Jun  2 09:25:09 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Fri, 2 Jun 2023 11:25:09 -0500
Subject: [gdal-dev] Want to work with MDArrays
Message-ID: <CAKcvfuQ2V4NuAgDtcdGG9jUBm4ewr+sYHPD=Z8J-oA6BAfN-GQ@mail.gmail.com>

Hello,

I am a software developer that has written a numerical analysis software
package that has support for n-dimensional data (
https://github.com/bdezonia/zorbage). I sometimes write importer libraries
to pull data into my data structures for further processing. It is
primarily a package for scientists.

Anyhow in the past I wrote a library that will import data from GDAL (
https://github.com/bdezonia/zorbage-gdal). It is using gdal.Open(filename)
to load data as a Dataset but I think the approach taken is limited to 3-d
data. Plus testing has shown that sometimes (like with a tif stack) images
come in as many separate planes of data.

I see that you have MDArrays in your libraries. And that they are
associated with a Group. Do you have something like gdal.Open() that opens
data file(s) as a Group? That way I could then open one or more MDArrays
into my n-dimensional structures from the Group in a more direct fashion
than the Dataset way. Can you advise me on how to proceed? Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230602/601d6d77/attachment.htm>

From lnicola at dend.ro  Fri Jun  2 09:28:39 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Fri, 02 Jun 2023 19:28:39 +0300
Subject: [gdal-dev] Want to work with MDArrays
In-Reply-To: <CAKcvfuQ2V4NuAgDtcdGG9jUBm4ewr+sYHPD=Z8J-oA6BAfN-GQ@mail.gmail.com>
References: <CAKcvfuQ2V4NuAgDtcdGG9jUBm4ewr+sYHPD=Z8J-oA6BAfN-GQ@mail.gmail.com>
Message-ID: <dc6c65cb-f9ed-4c20-a80f-20e2d7a13c05@betaapp.fastmail.com>

Hi Barry,

I think you want GDAL_OF_MULTIDIM_RASTER. There's an example here: https://gdal.org/tutorials/multidimensional_api_tut.html.

Laurentiu

On Fri, Jun 2, 2023, at 19:25, Barry DeZonia wrote:
> Hello,
> 
> I am a software developer that has written a numerical analysis software package that has support for n-dimensional data (https://github.com/bdezonia/zorbage). I sometimes write importer libraries to pull data into my data structures for further processing. It is primarily a package for scientists.
> 
> Anyhow in the past I wrote a library that will import data from GDAL (https://github.com/bdezonia/zorbage-gdal). It is using gdal.Open(filename) to load data as a Dataset but I think the approach taken is limited to 3-d data. Plus testing has shown that sometimes (like with a tif stack) images come in as many separate planes of data.
> 
> I see that you have MDArrays in your libraries. And that they are associated with a Group. Do you have something like gdal.Open() that opens data file(s) as a Group? That way I could then open one or more MDArrays into my n-dimensional structures from the Group in a more direct fashion than the Dataset way. Can you advise me on how to proceed? Thanks.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230602/105ed445/attachment.htm>

From daniel.scheffler at gfz-potsdam.de  Fri Jun  2 09:30:56 2023
From: daniel.scheffler at gfz-potsdam.de (Daniel Scheffler)
Date: Fri, 2 Jun 2023 18:30:56 +0200
Subject: [gdal-dev] Create a GDAL VRT for a 3D image that transposes the
 image dimensions
Message-ID: <e00c1a37-37b9-4735-03b7-1d8f041fe3ca@gfz-potsdam.de>

Hi!

I have an image with 500 rows, 1000 columns, and 2 bands in a NetCDF 
file which stores the data in the following scheme:
- dimension 1: rows
- dimension 2: bands
- dimension 3: columns

If I now do gdal.Open('filepath').GetRasterBand(1).ReadAsArray(), I get 
a numpy array in the shape 500x2. Is it somehow possible to create a 
GDAL VRT that accesses the data as rows/columns/bands instead of 
rows/bands/columns? If yes, how would I create such a VRT using the 
Python API?

Best,
Daniel

-- 

Dr. Daniel Scheffler

Helmholtz Centre Potsdam
GFZ German Research Centre For Geosciences
Department 1 - Geodesy and Remote Sensing
Section 1.4  - Remote Sensing and Geoinformatics
Telegrafenberg, 14473 Potsdam, Germany

Phone:  +49 (0)331/288-1198
e-mail: daniel.scheffler at gfz-potsdam.de


From howard at hobu.co  Fri Jun  2 10:13:01 2023
From: howard at hobu.co (Howard Butler)
Date: Fri, 2 Jun 2023 12:13:01 -0500
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>

Abel,

Comments inline

> On Jun 2, 2023, at 10:08 AM, Abel Pau <a.pau at creaf.uab.cat> wrote:
> 
>  You can find the specifications of our vector and raster formats on our website www.miramon.cat in the "Support/Technical notes" section under the titles "Format specification of the MiraMon vector files" and "Format specification of the MiraMon raster files".

It is nice that both your raster and vector formats are openly specified. That should make contribution of drivers for GDAL straightforward and provide long lasting resilience of the software that might otherwise be sensitive to a binary SDK that might rot over time.

>  I?ve been like 15 years programming this software in C (not C++) in our own style. So I have to get used to program in your style and in C++. It?ll not be easy for me but I hope you can help me if wome doubts arises.

It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

>  I kindly request your collaboration in providing me with a clear roadmap of the steps we should follow to generate the GDAL drivers. While we are thoroughly reviewing the existing documentation, we want to ensure that we do not overlook any crucial aspects. Your guidance and expertise during this process would be greatly appreciated.
>  I hope you can answer some questions I have. Thanks in advance.
>  ?         Do I need to ask for permission before starting a new driver, or is it assumed to be welcome?

You do not need to ask permission. You are welcome to make the contribution as a pull request to the project, but do know that contributing code in this fashion does not promise the effort will be merged into the project. The project has a policy document about large contributions like new drivers from new contributors. You can read it at https://gdal.org/development/rfc/rfc85_policy_code_additions.html 

> ?         I have downloaded the code from GitHub, but I'm not sure if it will provide me with a Visual Studio project. Will it generate an sln file?

You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?

Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton. 

> I would like to be able to debug it.

Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.

> How will I know when I am ready to submit the driver?

When it provides the capabilities to GDAL you expect, it conforms to GDAL's formatting style, the tests that you have added to validate your driver works in CI in your own GitHub fork, and the tests are complete enough to protect the driver from rotting as time goes forward.

Howard





From even.rouault at spatialys.com  Fri Jun  2 11:33:43 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 2 Jun 2023 20:33:43 +0200
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
Message-ID: <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>


> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

Cf https://gdal.org/development/dev_practices.html#commit-hooks also to 
install pre-commit hooks to ensure the formatting is OK & fix it if not.

https://gdal.org/development/rfc/rfc8_devguide.html also gives some 
hints on the general development practices. Generally try to stick with 
the conventions you observe in source code of drivers you take 
inspiration from.

>
> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

The source of "truth" will be the CMakeLists.txt file.

sln files are just a possible by-product of CMake that isn't stored in git.

You may just google "Cmake visual studio" as there's nothing GDAL 
specific regarding this topic. ==> 
https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170 
among other links that you'll get

>
>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>
>> I would like to be able to debug it.
> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
For vector drivers, the test_ogrsf utility that is built with GDAL is 
used by most unit tests of vector drivers to check their compliance 
w.r.t expectations of what a driver should do/not do. Not that of course 
this is only generic testing. You also need to add tests that check that 
the content you read from a test file is the one you expect.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Jun  2 11:38:06 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 2 Jun 2023 20:38:06 +0200
Subject: [gdal-dev] Create a GDAL VRT for a 3D image that transposes the
 image dimensions
In-Reply-To: <e00c1a37-37b9-4735-03b7-1d8f041fe3ca@gfz-potsdam.de>
References: <e00c1a37-37b9-4735-03b7-1d8f041fe3ca@gfz-potsdam.de>
Message-ID: <66c869bb-eb7d-a654-38b2-7bf921d3ff70@spatialys.com>

You may use the multidimensional API for that : 
https://gdal.org/drivers/raster/vrt_multidimensional.html . Typically 
the <SourceTranspose> element is relevant. Note however that on-the-fly 
transposing can have bad performance, but for the relatively small image 
you mention, that might be OK. That said, you'd may be better using the 
MDim API ( https://gdal.org/tutorials/multidimensional_api_tut.html) 
directly to get a numpy array and use numpy native transpose capabilities.

Le 02/06/2023 ? 18:30, Daniel Scheffler a ?crit?:
> Hi!
>
> I have an image with 500 rows, 1000 columns, and 2 bands in a NetCDF 
> file which stores the data in the following scheme:
> - dimension 1: rows
> - dimension 2: bands
> - dimension 3: columns
>
> If I now do gdal.Open('filepath').GetRasterBand(1).ReadAsArray(), I 
> get a numpy array in the shape 500x2. Is it somehow possible to create 
> a GDAL VRT that accesses the data as rows/columns/bands instead of 
> rows/bands/columns? If yes, how would I create such a VRT using the 
> Python API?
>
> Best,
> Daniel
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From bdezonia at gmail.com  Fri Jun  2 22:18:09 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Sat, 3 Jun 2023 00:18:09 -0500
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
Message-ID: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>

Hi all,

I have access to an MDArray. I am trying to find its dimensions. In the C++
API I can see that GDALMDArray has a method called GetDimensions() to find
the info I need. But I am programming in Java and the Java API does not
show such a call for MDArray. Is there some way in Java to find the info I
need?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/b9f0b789/attachment.htm>

From bdezonia at gmail.com  Sat Jun  3 00:09:22 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Sat, 3 Jun 2023 02:09:22 -0500
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
Message-ID: <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>

On a related note is the Java api code in a public repo somewhere? It would
be helpful to look at that code sometimes. (Like is GetDimensions() present
in the Java code but not exposed as a public method?)

On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia <bdezonia at gmail.com> wrote:

> Hi all,
>
> I have access to an MDArray. I am trying to find its dimensions. In the
> C++ API I can see that GDALMDArray has a method called GetDimensions() to
> find the info I need. But I am programming in Java and the Java API does
> not show such a call for MDArray. Is there some way in Java to find the
> info I need?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/d702c5ca/attachment.htm>

From even.rouault at spatialys.com  Sat Jun  3 04:09:28 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 3 Jun 2023 13:09:28 +0200
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
Message-ID: <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>

Barry,

This method is indeed not available currently in the Java bindings. It 
is only available currently in the Python bindings (see 
https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159 
) , since it requires writing a specific SWIG typemap for each binding 
language when a method returns (or takes as argument) a new 
non-primitive type such as here, with an array of dimensions. The 
closest existing Java typemap I found that can be used to take 
inspiration from is 
https://github.com/OSGeo/gdal/blob/master/swig/include/java/typemaps_java.i#L235 
but there would be changes to call the "Dimension(long cPtr, boolean 
cMemoryOwn)" constructor.? Whether you want to try to tackle that 
yourself or not, you may create a ticket about that

Even

Le 03/06/2023 ? 09:09, Barry DeZonia a ?crit?:
> On a related note is the Java api code in a public repo somewhere? It 
> would be helpful to look at that code sometimes. (Like is 
> GetDimensions() present in the Java code but not exposed as a public 
> method?)
>
> On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia <bdezonia at gmail.com> wrote:
>
>     Hi all,
>
>     I have access to an MDArray. I am trying to find its dimensions.
>     In the C++ API I can see that GDALMDArray has a method called
>     GetDimensions() to find the info I need. But I am programming in
>     Java and the Java API does not show such a call for MDArray. Is
>     there some way in Java to find the info I need?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/58b63bef/attachment.htm>

From bdezonia at gmail.com  Sat Jun  3 08:45:58 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Sat, 3 Jun 2023 10:45:58 -0500
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
Message-ID: <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>

Thanks Even.

I might be able to find some time to do the SWIG work depending upon the
amount of development time needed. I am a long time developer with
experience in Java, C, and C++ (but have not used SWIG before). Is it just
a few signatures I need to write or do I need to write full support for a
GDALDimension class? Can you comment on this?

Am I right in understanding that, as of the current Java implementation,
one really can't use MDArrays for much? Like if I can't find the number of
(... z planes, t steps, channels, etc.) of data I will not be able to
reconstruct the data?

On Sat, Jun 3, 2023 at 6:09?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Barry,
>
> This method is indeed not available currently in the Java bindings. It is
> only available currently in the Python bindings (see
> https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159
> ) , since it requires writing a specific SWIG typemap for each binding
> language when a method returns (or takes as argument) a new non-primitive
> type such as here, with an array of dimensions. The closest existing Java
> typemap I found that can be used to take inspiration from is
> https://github.com/OSGeo/gdal/blob/master/swig/include/java/typemaps_java.i#L235
> but there would be changes to call the "Dimension(long cPtr, boolean
> cMemoryOwn)" constructor.  Whether you want to try to tackle that yourself
> or not, you may create a ticket about that
>
> Even
> Le 03/06/2023 ? 09:09, Barry DeZonia a ?crit :
>
> On a related note is the Java api code in a public repo somewhere? It
> would be helpful to look at that code sometimes. (Like is GetDimensions()
> present in the Java code but not exposed as a public method?)
>
> On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia <bdezonia at gmail.com> wrote:
>
>> Hi all,
>>
>> I have access to an MDArray. I am trying to find its dimensions. In the
>> C++ API I can see that GDALMDArray has a method called GetDimensions() to
>> find the info I need. But I am programming in Java and the Java API does
>> not show such a call for MDArray. Is there some way in Java to find the
>> info I need?
>>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/90620dad/attachment.htm>

From even.rouault at spatialys.com  Sat Jun  3 09:03:16 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 3 Jun 2023 18:03:16 +0200
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
 <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
Message-ID: <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>


Le 03/06/2023 ? 17:45, Barry DeZonia a ?crit?:
> Thanks Even.
>
> I might be able to find some time to do the SWIG work depending upon 
> the amount of development time needed. I am a long time developer with 
> experience in Java, C, and C++ (but have not used SWIG before). Is it 
> just a few signatures I need to write or do I need to write full 
> support for a GDALDimension class? Can you comment on this?

Yes this is "just" a few signatures to map a C array of (existing) 
GDALDimensionH objects to a vector of Java counterpart 
org.gdal.gdal.Dimension objects. The org.gdal.gdal.Dimension class 
already exists, with a "Dimension(long cPtr, boolean cMemoryOwn)" 
constructor taking the value of the underlying C pointer as a Java long. 
The cMemoryOwn boolean should probably be passed to true in that 
context, since the C GDALDimensionH objects need to be freed at the 
finalization of the Java Dimension object. This is really about glueing 
stuff, but that said writing SWIG typemaps is a whole adventure in 
itself... You may find relevant documentation at 
https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_typemaps .? The 
hint I gave for the existing closest typemap should hopefully put you on 
the right track, or at least as close as possible.

>
> Am I right in understanding that, as of the current Java 
> implementation, one really can't use MDArrays for much? Like if I 
> can't find the number of (... z planes, t steps, channels, etc.) of 
> data I will not be able to reconstruct the data?

Yes the multidim API is probably currently hardly usable outside C, C++ 
and Python due to the lack of a few critical typemaps for the other 
languages.

Even

>
> On Sat, Jun 3, 2023 at 6:09?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Barry,
>
>     This method is indeed not available currently in the Java
>     bindings. It is only available currently in the Python bindings
>     (see
>     https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159
>     ) , since it requires writing a specific SWIG typemap for each
>     binding language when a method returns (or takes as argument) a
>     new non-primitive type such as here, with an array of dimensions.
>     The closest existing Java typemap I found that can be used to take
>     inspiration from is
>     https://github.com/OSGeo/gdal/blob/master/swig/include/java/typemaps_java.i#L235
>     but there would be changes to call the "Dimension(long cPtr,
>     boolean cMemoryOwn)" constructor.? Whether you want to try to
>     tackle that yourself or not, you may create a ticket about that
>
>     Even
>
>     Le 03/06/2023 ? 09:09, Barry DeZonia a ?crit?:
>>     On a related note is the Java api code in a public repo
>>     somewhere? It would be helpful to look at that code sometimes.
>>     (Like is GetDimensions() present in the Java code but not exposed
>>     as a public method?)
>>
>>     On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia
>>     <bdezonia at gmail.com> wrote:
>>
>>         Hi all,
>>
>>         I have access to an MDArray. I am trying to find its
>>         dimensions. In the C++ API I can see that GDALMDArray has a
>>         method called GetDimensions() to find the info I need. But I
>>         am programming in Java and the Java API does not show such a
>>         call for MDArray. Is there some way in Java to find the info
>>         I need?
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/f249c572/attachment-0001.htm>

From bdezonia at gmail.com  Sat Jun  3 09:16:42 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Sat, 3 Jun 2023 11:16:42 -0500
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
 <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
 <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
Message-ID: <CAKcvfuQ0akUavsFn0ngHwdxidBcfiYbTArQq1H6oRmVt_OmLUg@mail.gmail.com>

Ok, thanks. I will consider this for some of my future
weekend-playtime-programming days. Yes, I'm a masochist.

Are there other typemaps needed that would further strengthen the Java api
support?

On Sat, Jun 3, 2023 at 11:03?AM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 03/06/2023 ? 17:45, Barry DeZonia a ?crit :
>
> Thanks Even.
>
> I might be able to find some time to do the SWIG work depending upon the
> amount of development time needed. I am a long time developer with
> experience in Java, C, and C++ (but have not used SWIG before). Is it just
> a few signatures I need to write or do I need to write full support for a
> GDALDimension class? Can you comment on this?
>
> Yes this is "just" a few signatures to map a C array of (existing)
> GDALDimensionH objects to a vector of Java counterpart
> org.gdal.gdal.Dimension objects. The org.gdal.gdal.Dimension class already
> exists, with a "Dimension(long cPtr, boolean cMemoryOwn)" constructor
> taking the value of the underlying C pointer as a Java long. The cMemoryOwn
> boolean should probably be passed to true in that context, since the C
> GDALDimensionH objects need to be freed at the finalization of the Java
> Dimension object. This is really about glueing stuff, but that said writing
> SWIG typemaps is a whole adventure in itself... You may find relevant
> documentation at
> https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_typemaps .  The
> hint I gave for the existing closest typemap should hopefully put you on
> the right track, or at least as close as possible.
>
>
> Am I right in understanding that, as of the current Java implementation,
> one really can't use MDArrays for much? Like if I can't find the number of
> (... z planes, t steps, channels, etc.) of data I will not be able to
> reconstruct the data?
>
> Yes the multidim API is probably currently hardly usable outside C, C++
> and Python due to the lack of a few critical typemaps for the other
> languages.
>
> Even
>
>
> On Sat, Jun 3, 2023 at 6:09?AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Barry,
>>
>> This method is indeed not available currently in the Java bindings. It is
>> only available currently in the Python bindings (see
>> https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159
>> ) , since it requires writing a specific SWIG typemap for each binding
>> language when a method returns (or takes as argument) a new non-primitive
>> type such as here, with an array of dimensions. The closest existing Java
>> typemap I found that can be used to take inspiration from is
>> https://github.com/OSGeo/gdal/blob/master/swig/include/java/typemaps_java.i#L235
>> but there would be changes to call the "Dimension(long cPtr, boolean
>> cMemoryOwn)" constructor.  Whether you want to try to tackle that yourself
>> or not, you may create a ticket about that
>>
>> Even
>> Le 03/06/2023 ? 09:09, Barry DeZonia a ?crit :
>>
>> On a related note is the Java api code in a public repo somewhere? It
>> would be helpful to look at that code sometimes. (Like is GetDimensions()
>> present in the Java code but not exposed as a public method?)
>>
>> On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia <bdezonia at gmail.com> wrote:
>>
>>> Hi all,
>>>
>>> I have access to an MDArray. I am trying to find its dimensions. In the
>>> C++ API I can see that GDALMDArray has a method called GetDimensions() to
>>> find the info I need. But I am programming in Java and the Java API does
>>> not show such a call for MDArray. Is there some way in Java to find the
>>> info I need?
>>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/fa101806/attachment.htm>

From even.rouault at spatialys.com  Sat Jun  3 09:26:07 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 3 Jun 2023 18:26:07 +0200
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <CAKcvfuQ0akUavsFn0ngHwdxidBcfiYbTArQq1H6oRmVt_OmLUg@mail.gmail.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
 <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
 <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
 <CAKcvfuQ0akUavsFn0ngHwdxidBcfiYbTArQq1H6oRmVt_OmLUg@mail.gmail.com>
Message-ID: <8f51d247-af98-8dd3-6337-31e0baa57192@spatialys.com>


Le 03/06/2023 ? 18:16, Barry DeZonia a ?crit?:
> Ok, thanks. I will consider this for some of my future 
> weekend-playtime-programming days. Yes, I'm a masochist.
great, we'd definitely welcome a few ones :-)
>
> Are there other typemaps needed that would further strengthen the Java 
> api support?

Basically most #if defined(SWIGPYTHON) in 
https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i 
<https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159> 
around a method are an indication that a typemap is missing.

Like:

- 
https://github.com/OSGeo/gdal/blob/92f9cee9a9ed3f114d3e6a63d095ceb09ce85eec/swig/include/MultiDimensional.i#L210 
for CreateMDArray() (resolution of that one should be close to the 
existing "(int object_list_count, GDALRasterBandShadow **poObjects)" 
Java typemap)

- 
https://github.com/OSGeo/gdal/blob/92f9cee9a9ed3f114d3e6a63d095ceb09ce85eec/swig/include/MultiDimensional.i#L464 
for GetCoordinateVariables() (resolution of that one should be very 
close to the GetDimensions() one)

- 
https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L477 
for GetProcessingChunkSize() (resolution should be close to the existing 
"(int* pnCountOut, int** outErrorCodes)" java typemap

- etc..

>
> On Sat, Jun 3, 2023 at 11:03?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>
>     Le 03/06/2023 ? 17:45, Barry DeZonia a ?crit?:
>>     Thanks Even.
>>
>>     I might be able to find some time to do the SWIG work depending
>>     upon the amount of development time needed. I am a long time
>>     developer with experience in Java, C, and C++ (but have not used
>>     SWIG before). Is it just a few signatures I need to write or do I
>>     need to write full support for a GDALDimension class? Can you
>>     comment on this?
>
>     Yes this is "just" a few signatures to map a C array of (existing)
>     GDALDimensionH objects to a vector of Java counterpart
>     org.gdal.gdal.Dimension objects. The org.gdal.gdal.Dimension class
>     already exists, with a "Dimension(long cPtr, boolean cMemoryOwn)"
>     constructor taking the value of the underlying C pointer as a Java
>     long. The cMemoryOwn boolean should probably be passed to true in
>     that context, since the C GDALDimensionH objects need to be freed
>     at the finalization of the Java Dimension object. This is really
>     about glueing stuff, but that said writing SWIG typemaps is a
>     whole adventure in itself... You may find relevant documentation
>     at
>     https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_typemaps
>     .? The hint I gave for the existing closest typemap should
>     hopefully put you on the right track, or at least as close as
>     possible.
>
>>
>>     Am I right in understanding that, as of the current Java
>>     implementation, one really can't use MDArrays for much? Like if I
>>     can't find the number of (... z planes, t steps, channels, etc.)
>>     of data I will not be able to reconstruct the data?
>
>     Yes the multidim API is probably currently hardly usable outside
>     C, C++ and Python due to the lack of a few critical typemaps for
>     the other languages.
>
>     Even
>
>>
>>     On Sat, Jun 3, 2023 at 6:09?AM Even Rouault
>>     <even.rouault at spatialys.com> wrote:
>>
>>         Barry,
>>
>>         This method is indeed not available currently in the Java
>>         bindings. It is only available currently in the Python
>>         bindings (see
>>         https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159
>>         ) , since it requires writing a specific SWIG typemap for
>>         each binding language when a method returns (or takes as
>>         argument) a new non-primitive type such as here, with an
>>         array of dimensions. The closest existing Java typemap I
>>         found that can be used to take inspiration from is
>>         https://github.com/OSGeo/gdal/blob/master/swig/include/java/typemaps_java.i#L235
>>         but there would be changes to call the "Dimension(long cPtr,
>>         boolean cMemoryOwn)" constructor.? Whether you want to try to
>>         tackle that yourself or not, you may create a ticket about that
>>
>>         Even
>>
>>         Le 03/06/2023 ? 09:09, Barry DeZonia a ?crit?:
>>>         On a related note is the Java api code in a public repo
>>>         somewhere? It would be helpful to look at that code
>>>         sometimes. (Like is GetDimensions() present in the Java code
>>>         but not exposed as a public method?)
>>>
>>>         On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia
>>>         <bdezonia at gmail.com> wrote:
>>>
>>>             Hi all,
>>>
>>>             I have access to an MDArray. I am trying to find its
>>>             dimensions. In the C++ API I can see that GDALMDArray
>>>             has a method called GetDimensions() to find the info I
>>>             need. But I am programming in Java and the Java API does
>>>             not show such a call for MDArray. Is there some way in
>>>             Java to find the info I need?
>>>
>>>
>>>         _______________________________________________
>>>         gdal-dev mailing list
>>>         gdal-dev at lists.osgeo.org
>>>         https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>         -- 
>>         http://www.spatialys.com
>>         My software is free, but my time generally not.
>>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/1ba61b5f/attachment-0001.htm>

From lnicola at dend.ro  Sat Jun  3 10:06:33 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Sat, 03 Jun 2023 20:06:33 +0300
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
 <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
 <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
Message-ID: <6ac223dc-a9d8-4db5-a6d8-c3703070b41c@betaapp.fastmail.com>

Hi,

On Sat, Jun 3, 2023, at 19:03, Even Rouault wrote:
> Yes the multidim API is probably currently hardly usable outside C, C++ and Python due to the lack of a few critical typemaps for the other languages.
> 

These are unofficial and much less mature, but the Rust bindings have some basic multidim support: https://docs.rs/gdal/latest/gdal/raster/struct.MDArray.html, https://github.com/georust/gdal/blob/master/src/raster/mdarray.rs#L945.

Regards,
Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230603/bd16c0b2/attachment.htm>

From a.pau at creaf.uab.cat  Mon Jun  5 00:58:06 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 5 Jun 2023 07:58:06 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
Message-ID: <AS8PR07MB81681AC43B8E2ED68CE41731A24DA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Thanks you both for your time and expertise.
I'll consider all your advices :)
See you soon (or perhaps will not be necessary).
Thanks!

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> 
Enviado el: divendres, 2 de juny de 2023 20:34
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org; Howard Butler <howard at hobu.co>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch


> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

Cf https://gdal.org/development/dev_practices.html#commit-hooks also to install pre-commit hooks to ensure the formatting is OK & fix it if not.

https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints on the general development practices. Generally try to stick with the conventions you observe in source code of drivers you take inspiration from.

>
> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

The source of "truth" will be the CMakeLists.txt file.

sln files are just a possible by-product of CMake that isn't stored in git.

You may just google "Cmake visual studio" as there's nothing GDAL specific regarding this topic. ==>
https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
among other links that you'll get

>
>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>
>> I would like to be able to debug it.
> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
For vector drivers, the test_ogrsf utility that is built with GDAL is used by most unit tests of vector drivers to check their compliance w.r.t expectations of what a driver should do/not do. Not that of course this is only generic testing. You also need to add tests that check that the content you read from a test file is the one you expect.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From bdezonia at gmail.com  Mon Jun  5 18:43:05 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Mon, 5 Jun 2023 20:43:05 -0500
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <8f51d247-af98-8dd3-6337-31e0baa57192@spatialys.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
 <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
 <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
 <CAKcvfuQ0akUavsFn0ngHwdxidBcfiYbTArQq1H6oRmVt_OmLUg@mail.gmail.com>
 <8f51d247-af98-8dd3-6337-31e0baa57192@spatialys.com>
Message-ID: <CAKcvfuRf0awE63_FO-pWaHT2JyyGnpLoU3aDB6Dp8n5h+YkCxw@mail.gmail.com>

Even,

Does this look okay as part of my typemap declaration? It is the only part
I am confused about. I am very unfamiliar with this "(DDDDDL...." stuff And
the L and V after each parameter. Where can I learn what this stuff means?

%typemap(argout) (int *nDimensions, GDALDimenion const **pDimensions )
{
  const jclass dimensionClass = jenv->FindClass("org/gdal/gdal/Dimension");
  const jclass vectorClass = jenv->FindClass("java/util/Vector");
  const jmethodID add = jenv->GetMethodID(vectorClass, "add",
"(Ljava/lang/Object;)Z");
  const jmethodID dimensionCon = jenv->GetMethodID(dimensionClass, "<init>",
    "(DDDDDLjava/lang/Long;Ljava/lang/Boolean;)V");

  for( int i = 0; i < *$1; i++ ) {
    jobject dimensionObj = jenv->NewObject(dimensionClass, dimensionCon,
                                &((*$2)[i]),
                                true);
    jenv->CallBooleanMethod($input, add, dimensionObj);
  }
}

On Sat, Jun 3, 2023 at 11:26?AM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 03/06/2023 ? 18:16, Barry DeZonia a ?crit :
>
> Ok, thanks. I will consider this for some of my future
> weekend-playtime-programming days. Yes, I'm a masochist.
>
> great, we'd definitely welcome a few ones :-)
>
>
> Are there other typemaps needed that would further strengthen the Java api
> support?
>
> Basically most #if defined(SWIGPYTHON) in
> https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i
> <https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159>
> around a method are an indication that a typemap is missing.
>
> Like:
>
> -
> https://github.com/OSGeo/gdal/blob/92f9cee9a9ed3f114d3e6a63d095ceb09ce85eec/swig/include/MultiDimensional.i#L210
> for CreateMDArray() (resolution of that one should be close to the existing
> "(int object_list_count, GDALRasterBandShadow **poObjects)" Java typemap)
>
> -
> https://github.com/OSGeo/gdal/blob/92f9cee9a9ed3f114d3e6a63d095ceb09ce85eec/swig/include/MultiDimensional.i#L464
> for GetCoordinateVariables() (resolution of that one should be very close
> to the GetDimensions() one)
>
> -
> https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L477
> for GetProcessingChunkSize() (resolution should be close to the existing
> "(int* pnCountOut, int** outErrorCodes)" java typemap
>
> - etc..
>
>
> On Sat, Jun 3, 2023 at 11:03?AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>>
>> Le 03/06/2023 ? 17:45, Barry DeZonia a ?crit :
>>
>> Thanks Even.
>>
>> I might be able to find some time to do the SWIG work depending upon the
>> amount of development time needed. I am a long time developer with
>> experience in Java, C, and C++ (but have not used SWIG before). Is it just
>> a few signatures I need to write or do I need to write full support for a
>> GDALDimension class? Can you comment on this?
>>
>> Yes this is "just" a few signatures to map a C array of (existing)
>> GDALDimensionH objects to a vector of Java counterpart
>> org.gdal.gdal.Dimension objects. The org.gdal.gdal.Dimension class already
>> exists, with a "Dimension(long cPtr, boolean cMemoryOwn)" constructor
>> taking the value of the underlying C pointer as a Java long. The cMemoryOwn
>> boolean should probably be passed to true in that context, since the C
>> GDALDimensionH objects need to be freed at the finalization of the Java
>> Dimension object. This is really about glueing stuff, but that said writing
>> SWIG typemaps is a whole adventure in itself... You may find relevant
>> documentation at
>> https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_typemaps .  The
>> hint I gave for the existing closest typemap should hopefully put you on
>> the right track, or at least as close as possible.
>>
>>
>> Am I right in understanding that, as of the current Java implementation,
>> one really can't use MDArrays for much? Like if I can't find the number of
>> (... z planes, t steps, channels, etc.) of data I will not be able to
>> reconstruct the data?
>>
>> Yes the multidim API is probably currently hardly usable outside C, C++
>> and Python due to the lack of a few critical typemaps for the other
>> languages.
>>
>> Even
>>
>>
>> On Sat, Jun 3, 2023 at 6:09?AM Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> Barry,
>>>
>>> This method is indeed not available currently in the Java bindings. It
>>> is only available currently in the Python bindings (see
>>> https://github.com/OSGeo/gdal/blob/master/swig/include/MultiDimensional.i#L159
>>> ) , since it requires writing a specific SWIG typemap for each binding
>>> language when a method returns (or takes as argument) a new non-primitive
>>> type such as here, with an array of dimensions. The closest existing Java
>>> typemap I found that can be used to take inspiration from is
>>> https://github.com/OSGeo/gdal/blob/master/swig/include/java/typemaps_java.i#L235
>>> but there would be changes to call the "Dimension(long cPtr, boolean
>>> cMemoryOwn)" constructor.  Whether you want to try to tackle that yourself
>>> or not, you may create a ticket about that
>>>
>>> Even
>>> Le 03/06/2023 ? 09:09, Barry DeZonia a ?crit :
>>>
>>> On a related note is the Java api code in a public repo somewhere? It
>>> would be helpful to look at that code sometimes. (Like is GetDimensions()
>>> present in the Java code but not exposed as a public method?)
>>>
>>> On Sat, Jun 3, 2023 at 12:18?AM Barry DeZonia <bdezonia at gmail.com>
>>> wrote:
>>>
>>>> Hi all,
>>>>
>>>> I have access to an MDArray. I am trying to find its dimensions. In the
>>>> C++ API I can see that GDALMDArray has a method called GetDimensions() to
>>>> find the info I need. But I am programming in Java and the Java API does
>>>> not show such a call for MDArray. Is there some way in Java to find the
>>>> info I need?
>>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> -- http://www.spatialys.com
>>> My software is free, but my time generally not.
>>>
>>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230605/7829991e/attachment.htm>

From lnicola at dend.ro  Mon Jun  5 22:31:10 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Tue, 06 Jun 2023 08:31:10 +0300
Subject: [gdal-dev] Java API: how to find dimensions of MDArray
In-Reply-To: <CAKcvfuRf0awE63_FO-pWaHT2JyyGnpLoU3aDB6Dp8n5h+YkCxw@mail.gmail.com>
References: <CAKcvfuS=D4mw8UfwikuQnTvWR7HwKptOhHW8wafO2jYSdLSZag@mail.gmail.com>
 <CAKcvfuTURFgnmm=xEQMbxZMuqG=TH7rPx5HriH+6oY660pNwQQ@mail.gmail.com>
 <d4ade119-9e44-8c34-0737-9b42a00b03bb@spatialys.com>
 <CAKcvfuTr1KzVPaZSc3zNVu9cD3nVZBPGdU=NyFcLimS0fHTz1A@mail.gmail.com>
 <91a47e68-dfde-156c-5350-983272bbf014@spatialys.com>
 <CAKcvfuQ0akUavsFn0ngHwdxidBcfiYbTArQq1H6oRmVt_OmLUg@mail.gmail.com>
 <8f51d247-af98-8dd3-6337-31e0baa57192@spatialys.com>
 <CAKcvfuRf0awE63_FO-pWaHT2JyyGnpLoU3aDB6Dp8n5h+YkCxw@mail.gmail.com>
Message-ID: <cbba93c7-bd56-41d7-b439-767f98b9e1f0@betaapp.fastmail.com>

Hi Barry,

I haven't used Java in a while, but those are type signatures as used in JNI. If I recall correctly, (DDDDDLjava/lang/Long;Ljava/lang/Boolean;)V is void f(double p1, double p2, double p3, double p4, double p5, long p6, boolean p6).

They're used to disambiguate overloaded methods.

Laurentiu

PS: I found https://docs.oracle.com/en/java/javase/20/docs/specs/jni/types.html with more details.

On Tue, Jun 6, 2023, at 04:43, Barry DeZonia wrote:
> Even,
> 
> Does this look okay as part of my typemap declaration? It is the only part I am confused about. I am very unfamiliar with this "(DDDDDL...." stuff And the L and V after each parameter. Where can I learn what this stuff means?
> 
> %typemap(argout) (int *nDimensions, GDALDimenion const **pDimensions )
> {
>   const jclass dimensionClass = jenv->FindClass("org/gdal/gdal/Dimension");
>   const jclass vectorClass = jenv->FindClass("java/util/Vector");
>   const jmethodID add = jenv->GetMethodID(vectorClass, "add", "(Ljava/lang/Object;)Z");
>   const jmethodID dimensionCon = jenv->GetMethodID(dimensionClass, "<init>",
>     "(DDDDDLjava/lang/Long;Ljava/lang/Boolean;)V");
> 
>   for( int i = 0; i < *$1; i++ ) {
>     jobject dimensionObj = jenv->NewObject(dimensionClass, dimensionCon,
>                                 &((*$2)[i]),
>                                 true);
>     jenv->CallBooleanMethod($input, add, dimensionObj);
>   }
> }
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230606/309c52b7/attachment.htm>

From bdezonia at gmail.com  Tue Jun  6 19:54:19 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Tue, 6 Jun 2023 21:54:19 -0500
Subject: [gdal-dev] Two questions about Java API
Message-ID: <CAKcvfuTCPprfZYLBRFEV3=E9z2QVT_M_YBrHjzxZT4k894RC7w@mail.gmail.com>

Hello,

I am trying to extend the Java API so that the MDArray code is more full
featured. Right now I am working on extending Attribute to return a
Vector<Dimension> when Attribute::GetDimensions() is called. Much of this
support is missing and I am in the process of wiring it up. I am starting
to write test code to drive development and have two questions about my
test code. I am pasting the code below with questions inlined.

private static void testGetDimensions() {

    // QUESTION 1:
    // how do I create a Group programmatically?

    Group group1 = new Group("universe1");  // NOPE

    Group group2 = Group.CreateGroup("universe2");  // NOPE

    // QUESTION 2:
    // What is a SWIGTYPE_p_GUIntBig?
    //  Is this type exposed in MDArray API as a flaw in the current Java
API?
    //  See API docs for MDArray::CreateAttribute()

    group1.CreateAttribute("jane",
                                1,
                                null,  // wants an array of
SWIGTYPE_p_GUIntBig

ExtendedDataType.Create(gdalconst.GDT_UInt16));

    Attribute attribute = group.GetAttribute("jane");

    Vector<Dimension> dims = attribute.GetDimensions();
}

So can anyone answer my two questions? Am I approaching this right? Thanks
for any info.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230606/865edc91/attachment.htm>

From even.rouault at spatialys.com  Wed Jun  7 01:47:19 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Jun 2023 10:47:19 +0200
Subject: [gdal-dev] Two questions about Java API
In-Reply-To: <CAKcvfuTCPprfZYLBRFEV3=E9z2QVT_M_YBrHjzxZT4k894RC7w@mail.gmail.com>
References: <CAKcvfuTCPprfZYLBRFEV3=E9z2QVT_M_YBrHjzxZT4k894RC7w@mail.gmail.com>
Message-ID: <e8c11f31-9230-9111-6173-2c86f55fd080@spatialys.com>

Barry,

you can't instantiate the objects directly. They are tied to an 
underlying driver.

You could for example port this subset of those tests of the MEM driver: 
https://github.com/OSGeo/gdal/blob/master/autotest/gdrivers/memmultidim.py#L85 
and 
https://github.com/OSGeo/gdal/blob/master/autotest/gdrivers/memmultidim.py#L188 
. Note that they test a bit more than just the API, but also the 
implementation of the MEM driver, so you don't need to test all error 
cases for example

Even

Le 07/06/2023 ? 04:54, Barry DeZonia a ?crit?:
> Hello,
>
> I am trying to extend the Java API so that the MDArray code is more 
> full featured. Right now I am working on extending Attribute to return 
> a Vector<Dimension> when Attribute::GetDimensions() is called. Much of 
> this support is missing and I am in the process of wiring it up. I am 
> starting to write test code to drive development and have two 
> questions about my test code. I am pasting the code below with 
> questions inlined.
>
> private static void testGetDimensions() {
>
> ? ? // QUESTION 1:
> ? ? // how do I create a Group programmatically?
>
> ? ? Group group1 = new Group("universe1"); ?// NOPE
>
> ? ? Group group2 = Group.CreateGroup("universe2"); ?// NOPE
>
> ? ? // QUESTION 2:
> ? ? //?What is a SWIGTYPE_p_GUIntBig?
> ? ? //? Is this type exposed in MDArray API as a flaw in the current 
> Java API?
> ? ? //? See API docs for MDArray::CreateAttribute()
>
> ? ? group1.CreateAttribute("jane",
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1,
> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? null, ?// wants an array of 
> SWIGTYPE_p_GUIntBig
> ExtendedDataType.Create(gdalconst.GDT_UInt16));
>
> ? ? Attribute attribute = group.GetAttribute("jane");
>
> ? ? Vector<Dimension> dims = attribute.GetDimensions();
> }
>
> So can anyone answer my two questions? Am I approaching?this right? 
> Thanks for any info.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Jun  7 09:21:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Jun 2023 18:21:51 +0200
Subject: [gdal-dev] Two questions about Java API
In-Reply-To: <CAKcvfuSpdBunv9m1vrV50-EN2hyBL2+7j1aUtn0bN+84rdH9bQ@mail.gmail.com>
References: <CAKcvfuTCPprfZYLBRFEV3=E9z2QVT_M_YBrHjzxZT4k894RC7w@mail.gmail.com>
 <e8c11f31-9230-9111-6173-2c86f55fd080@spatialys.com>
 <CAKcvfuSpdBunv9m1vrV50-EN2hyBL2+7j1aUtn0bN+84rdH9bQ@mail.gmail.com>
Message-ID: <d400d279-b31b-791c-9b4e-264f27c12812@spatialys.com>

Sorry, missed the question

You need to create a typemap for "(int nList, GUIntBig* pList)" that can 
be mapped to an a long[] in Java. You probably don't care about the 
range of uint64_t (GUIntBig is a GDAL specific alias of uint64_t) that 
cannot be mapped to a int64_t, so no need to go with Biginteger[]

Such typemap should be similar to the existing "(int nList, int* pList)" one

SWIG indeed generates rather dummy SWIGTYPE_p_xxxx types when there are 
missing typemaps. When such types appear in the Java API it means that a 
typemap is missing

Even


Le 07/06/2023 ? 18:03, Barry DeZonia a ?crit?:
> Thanks Even. I'll look at this later. But you only answered one of my 
> questions. The type SWIGTYPE_p_GUIntBig is specified in the Java API 
> for CreateAttribute(). No such thing is shown in the python tests you 
> showed me. I would suspect because python has unlimited range integers 
> and an array for them will work just fine, But this weird SWIG type in 
> Java seems misplaced. What should the signature be? dimensions as 
> lon[]? dimensions as Biginteger[]? And if so then why is the current 
> signature so messy with this SWIG type. If it is supposed to be this 
> weird SWIG type then how do I create it? The Java api javadoc does not 
> show it has any useful methods.
>
> On Wed, Jun 7, 2023 at 3:47?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Barry,
>
>     you can't instantiate the objects directly. They are tied to an
>     underlying driver.
>
>     You could for example port this subset of those tests of the MEM
>     driver:
>     https://github.com/OSGeo/gdal/blob/master/autotest/gdrivers/memmultidim.py#L85
>
>     and
>     https://github.com/OSGeo/gdal/blob/master/autotest/gdrivers/memmultidim.py#L188
>
>     . Note that they test a bit more than just the API, but also the
>     implementation of the MEM driver, so you don't need to test all error
>     cases for example
>
>     Even
>
>     Le 07/06/2023 ? 04:54, Barry DeZonia a ?crit?:
>     > Hello,
>     >
>     > I am trying to extend the Java API so that the MDArray code is more
>     > full featured. Right now I am working on extending Attribute to
>     return
>     > a Vector<Dimension> when Attribute::GetDimensions() is called.
>     Much of
>     > this support is missing and I am in the process of wiring it up.
>     I am
>     > starting to write test code to drive development and have two
>     > questions about my test code. I am pasting the code below with
>     > questions inlined.
>     >
>     > private static void testGetDimensions() {
>     >
>     > ? ? // QUESTION 1:
>     > ? ? // how do I create a Group programmatically?
>     >
>     > ? ? Group group1 = new Group("universe1"); ?// NOPE
>     >
>     > ? ? Group group2 = Group.CreateGroup("universe2"); ?// NOPE
>     >
>     > ? ? // QUESTION 2:
>     > ? ? //?What is a SWIGTYPE_p_GUIntBig?
>     > ? ? //? Is this type exposed in MDArray API as a flaw in the
>     current
>     > Java API?
>     > ? ? //? See API docs for MDArray::CreateAttribute()
>     >
>     > ? ? group1.CreateAttribute("jane",
>     > ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1,
>     > ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? null, ?// wants an array of
>     > SWIGTYPE_p_GUIntBig
>     > ExtendedDataType.Create(gdalconst.GDT_UInt16));
>     >
>     > ? ? Attribute attribute = group.GetAttribute("jane");
>     >
>     > ? ? Vector<Dimension> dims = attribute.GetDimensions();
>     > }
>     >
>     > So can anyone answer my two questions? Am I approaching?this right?
>     > Thanks for any info.
>     >
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230607/9b5dd2e1/attachment.htm>

From woklist at kyngchaos.com  Thu Jun  8 15:43:18 2023
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 8 Jun 2023 17:43:18 -0500
Subject: [gdal-dev] gdalinfo on large vrt takes a long time
Message-ID: <A43FF0A4-1B0F-4AF0-8FCE-E7F008D30BA4@kyngchaos.com>

I'm writing a script that needs some info from a vrt raster, and one has thousands of files. When reading the vrt over the internet (vpn to our server) it takes a long time. I think it's looking at every file of the vrt.  What is gdal reading from the files that's not in the vrt itself? I used all the -no options and I'm not adding any other info options like checksums or stats. I just need basic info from the vrt that's in the vrt file.

-----
William Kyngesburye
<kyngchaos*at*kyngchaos*dot*com>
<https://www.kyngchaos.com>

Don't Panic

From even.rouault at spatialys.com  Thu Jun  8 16:18:15 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Jun 2023 01:18:15 +0200
Subject: [gdal-dev] gdalinfo on large vrt takes a long time
In-Reply-To: <A43FF0A4-1B0F-4AF0-8FCE-E7F008D30BA4@kyngchaos.com>
References: <A43FF0A4-1B0F-4AF0-8FCE-E7F008D30BA4@kyngchaos.com>
Message-ID: <b428c878-0fbb-3fc5-d3e4-4d05a24ab80c@spatialys.com>

William,

it might be perhaps related to the GetMinimum() call done by gdalinfo. 
Cf https://trac.osgeo.org/gdal/ticket/5444

But normally it should only try to open the first source, and not all of 
them. At least that's what I could confirm on a quick testing. But I do 
see that the CanUseSourcesMinMaxImplementations() method will stat() 
sources whose filename looks like a local file (obviously if that's a 
mounted file system / vpn thing, it will not realize it is remote).

Try setting the VRT_MIN_MAX_FROM_SOURCES=NO environment variable / 
configuration option to see if that makes a difference. If it does, the 
CanUseSourcesMinMaxImplementations() logic should be modified to avoid 
doing those stat's().

If that's confirmed to be linked to GetMinmum(), you may also workaround 
the issue by doing a "gdalinfo -stats the.vrt" (from the server) to have 
statistics incorporated in the VRT, then GetMinimum() should be instant

Even

Le 09/06/2023 ? 00:43, William Kyngesburye a ?crit?:
> I'm writing a script that needs some info from a vrt raster, and one has thousands of files. When reading the vrt over the internet (vpn to our server) it takes a long time. I think it's looking at every file of the vrt.  What is gdal reading from the files that's not in the vrt itself? I used all the -no options and I'm not adding any other info options like checksums or stats. I just need basic info from the vrt that's in the vrt file.
>
> -----
> William Kyngesburye
> <kyngchaos*at*kyngchaos*dot*com>
> <https://www.kyngchaos.com>
>
> Don't Panic
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From a.pau at creaf.uab.cat  Fri Jun  9 03:11:16 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 9 Jun 2023 10:11:16 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
Message-ID: <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi again.

Finally I managed to use CMake to create a Visual Studio sln. And it's beautiful see all drivers there.
But it's not crear for me what I have to modify (Cmakelist.txt,.. or something else) to include the new driver. I need it to be there to be able to debug.
I created a copy of, let's say, Shape and modified the Cmakelists.txt in an apropriate way... but I miss something because recompiling and rebuilding doesn't change anything and my driver is not in the project.

Anyone can make me a simple list of which files I have to modify?
THANKS in advance!!!

Abel.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> 
Enviado el: divendres, 2 de juny de 2023 20:34
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org; Howard Butler <howard at hobu.co>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch


> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

Cf https://gdal.org/development/dev_practices.html#commit-hooks also to install pre-commit hooks to ensure the formatting is OK & fix it if not.

https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints on the general development practices. Generally try to stick with the conventions you observe in source code of drivers you take inspiration from.

>
> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

The source of "truth" will be the CMakeLists.txt file.

sln files are just a possible by-product of CMake that isn't stored in git.

You may just google "Cmake visual studio" as there's nothing GDAL specific regarding this topic. ==>
https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
among other links that you'll get

>
>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>
>> I would like to be able to debug it.
> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
For vector drivers, the test_ogrsf utility that is built with GDAL is used by most unit tests of vector drivers to check their compliance w.r.t expectations of what a driver should do/not do. Not that of course this is only generic testing. You also need to add tests that check that the content you read from a test file is the one you expect.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Jun  9 03:31:44 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Jun 2023 12:31:44 +0200
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <60d00b1f-67d3-5d88-5c6f-74b8a164a5bd@spatialys.com>

Abel,

cf 
https://github.com/OSGeo/gdal/commit/bcd4ed241503a545c1dee2819849d54117ac4e78 
for a commit that adds a new vector driver.

See the additions in ogr/ogrsf_frmts/CMakeLists.txt , 
ogr/ogrsf_frmts/generic/ogrregisterall.cpp, 
ogr/ogrsf_frmts/ogrsf_frmts.h and frmts/drivers.ini

And similarly for a raster driver: 
https://github.com/OSGeo/gdal/commit/27203405bc33723163b3c9a66a7f8dbb82be3e9f

Even

Le 09/06/2023 ? 12:11, Abel Pau a ?crit?:
> Hi again.
>
> Finally I managed to use CMake to create a Visual Studio sln. And it's beautiful see all drivers there.
> But it's not crear for me what I have to modify (Cmakelist.txt,.. or something else) to include the new driver. I need it to be there to be able to debug.
> I created a copy of, let's say, Shape and modified the Cmakelists.txt in an apropriate way... but I miss something because recompiling and rebuilding doesn't change anything and my driver is not in the project.
>
> Anyone can make me a simple list of which files I have to modify?
> THANKS in advance!!!
>
> Abel.
>
> -----Mensaje original-----
> De: Even Rouault <even.rouault at spatialys.com>
> Enviado el: divendres, 2 de juny de 2023 20:34
> Para: Abel Pau <a.pau at creaf.uab.cat>
> CC: gdal-dev at lists.osgeo.org; Howard Butler <howard at hobu.co>
> Asunto: Re: [gdal-dev] Creation of a new driver from scratch
>
>
>> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.
> Cf https://gdal.org/development/dev_practices.html#commit-hooks also to install pre-commit hooks to ensure the formatting is OK & fix it if not.
>
> https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints on the general development practices. Generally try to stick with the conventions you observe in source code of drivers you take inspiration from.
>
>> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.
> The source of "truth" will be the CMakeLists.txt file.
>
> sln files are just a possible by-product of CMake that isn't stored in git.
>
> You may just google "Cmake visual studio" as there's nothing GDAL specific regarding this topic. ==>
> https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
> among other links that you'll get
>
>>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
>> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>>
>>> I would like to be able to debug it.
>> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
> For vector drivers, the test_ogrsf utility that is built with GDAL is used by most unit tests of vector drivers to check their compliance w.r.t expectations of what a driver should do/not do. Not that of course this is only generic testing. You also need to add tests that check that the content you read from a test file is the one you expect.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From x.calaf at creaf.uab.cat  Mon Jun 12 01:16:22 2023
From: x.calaf at creaf.uab.cat (Xavier Calaf)
Date: Mon, 12 Jun 2023 08:16:22 +0000
Subject: [gdal-dev] Doubts about including GDAL libraries in C code using
 MSVC 2017
Message-ID: <DBBPR07MB7657247D423FE671DAA20B52B654A@DBBPR07MB7657.eurprd07.prod.outlook.com>

Hello,

I'm trying to use the GDAL libraries in C code in a mapping software to be able to read some raster and vector formats that so far, we can't open and I have doubts about how to include these libraries in the project.

Is there a standard way to proceed or a document that explains step by step how to include them?
And is there a way to implement them without depending on where the DLLs are and just rely on libs?
Both 32-bit and 64-bit versions must be included.
At the final installation of our software there are two executables in the same path, one for each type (32, 64) and I can't get it to recognize the dll's depending on which executable I'm using.

I explain how I did it if there is something wrong:

I have downloaded the Development Kits for the MSVC 2017 compiler release-1911-dev (http://download.gisinternals.com/query.html?content=filelist&file=release-1911-dev.zip) for 32bit and release-1911-x64-dev (http://download.gisinternals.com/query.html?content=filelist&file=release-1911-x64-dev.zip) for 64bit.

I have included the include folder as Additional Include Directories and the lib directory in Additional Library Directories. I also added gdal_i.lib to Additional Dependencies.

At the first test I was able to compile successfully but when running it gave me a system error because it couldn't find the file gdal302.dll. This error appears this before the first line of code.

I saw that it's necessary to register several variables (PATH, GDAL_DATA, GDAL_DRIVER_PATH, PYTHONPATH and PROJ_LIB) and for each variable I added the directories listed in the SDKShell.bat file. After registration, I checked that the variables are registered correctly in the Windows Environment Variables window and the directories are where the codes downloaded from the GDAL libraries are. For example, in the case "GDAL_DATA=%SDK_ROOT%bin\gdal-data" for 64bits, if %SDK_ROOT% is D:\progs\x64\gdalLibs, I specified "GDAL_DATA=D:\progs\x64\gdalLibs\bin \gdal-date".

However, I still have some problems, especially for the 64-bit case, where testing in some cases, after the variable register, it is necessary to restart windows for it to work but it does not always happen.

Thank you very much in advance and I look forward to hearing from you.


P.S. I have also tried using the release-1916-dev version but I had problems compiling the project because it does not find the variables VSIIsLocal(), VSISupportsSequentialWrite() and VSISupportsRandomWrite(). As with the release-1911-dev version, I have been able to compile the project, I have continued to use this version.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230612/5c30ef21/attachment.htm>

From schwehr at gmail.com  Tue Jun 13 10:22:26 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 13 Jun 2023 10:22:26 -0700
Subject: [gdal-dev] Minimum python version?
Message-ID: <CACmBxyseSuj7r5Q3EeP2zCB2dQ7WqX-ayd9rfu+LT8U-7MqRhQ@mail.gmail.com>

Hi all,

What is the minimum python version for the GDAL python bindings? This is
the only thing I found easily:

find . -type f | grep -v git | xargs grep 3 | grep python_version

cat autotest/requirements.txt
pytest>=6.0.0
pytest-sugar<=0.9.6; python_version < '3.7'
pytest-sugar; python_version >= '3.7'
pytest-env
lxml
jsonschema
filelock

I think the real answer is that it's 3.8 from what I see here:

swig/python/osgeo/__init__.py

# The following is a Sequence of tuples in the form of (gdal_version,
python_version).
# Each line represents the minimum supported Python version of a given GDAL
version.
# Introducing a new line for the next GDAL version will trigger a
deprecation warning
# when importing osgeo from a Python version which will not be
# supported in the next version of GDAL.
gdal_version_and_min_supported_python_version = (
    ((0, 0), (0, 0)),
    ((1, 0), (2, 0)),
    ((2, 0), (2, 7)),
    ((3, 3), (3, 6)),
    # ((3, 4), (3, 7)),
    # ((3, 5), (3, 8)),
)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230613/d78c8aa3/attachment.htm>

From even.rouault at spatialys.com  Tue Jun 13 10:37:29 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Jun 2023 19:37:29 +0200
Subject: [gdal-dev] Minimum python version?
In-Reply-To: <CACmBxyseSuj7r5Q3EeP2zCB2dQ7WqX-ayd9rfu+LT8U-7MqRhQ@mail.gmail.com>
References: <CACmBxyseSuj7r5Q3EeP2zCB2dQ7WqX-ayd9rfu+LT8U-7MqRhQ@mail.gmail.com>
Message-ID: <b8b505a4-2cc6-eda8-af9b-16877237aaaa@spatialys.com>

We're still at 3.6

Le 13/06/2023 ? 19:22, Kurt Schwehr a ?crit?:
> Hi all,
>
> What is the minimum python version for the GDAL python bindings? This 
> is the only thing I found easily:
>
> find . -type f | grep -v git | xargs grep 3 | grep python_version
>
> cat autotest/requirements.txt
> pytest>=6.0.0
> pytest-sugar<=0.9.6; python_version < '3.7'
> pytest-sugar; python_version >= '3.7'
> pytest-env
> lxml
> jsonschema
> filelock
>
> I think the real answer is that it's 3.8 from what I see here:
>
> swig/python/osgeo/__init__.py
>
> # The following is a Sequence of tuples in the form of (gdal_version, 
> python_version).
> # Each line represents the minimum supported Python version of a given 
> GDAL version.
> # Introducing a new line for the next GDAL version will trigger a 
> deprecation warning
> # when importing osgeo from a Python version which will not be
> # supported in the next version of GDAL.
> gdal_version_and_min_supported_python_version = (
> ? ? ((0, 0), (0, 0)),
> ? ? ((1, 0), (2, 0)),
> ? ? ((2, 0), (2, 7)),
> ? ? ((3, 3), (3, 6)),
> ? ? # ((3, 4), (3, 7)),
> ? ? # ((3, 5), (3, 8)),
> )
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dbaston at gmail.com  Tue Jun 13 10:45:19 2023
From: dbaston at gmail.com (Daniel Baston)
Date: Tue, 13 Jun 2023 13:45:19 -0400
Subject: [gdal-dev] Minimum python version?
In-Reply-To: <CACmBxyseSuj7r5Q3EeP2zCB2dQ7WqX-ayd9rfu+LT8U-7MqRhQ@mail.gmail.com>
References: <CACmBxyseSuj7r5Q3EeP2zCB2dQ7WqX-ayd9rfu+LT8U-7MqRhQ@mail.gmail.com>
Message-ID: <CA+K_q_oC+yLR503ekCpVOFtBGLGC99qD4eG+p9-u2ObGNLBpKg@mail.gmail.com>

The minimum version (3.6) is documented at
https://gdal.org/development/dev_environment.html#build-requirements

The CI still has configurations using Ubuntu 18.04, which is using 3.6.9:

docker run --rm ghcr.io/osgeo/gdal-deps:ubuntu_18.04-master python3
--version

Dan

On Tue, Jun 13, 2023 at 1:22?PM Kurt Schwehr <schwehr at gmail.com> wrote:

> Hi all,
>
> What is the minimum python version for the GDAL python bindings? This is
> the only thing I found easily:
>
> find . -type f | grep -v git | xargs grep 3 | grep python_version
>
> cat autotest/requirements.txt
> pytest>=6.0.0
> pytest-sugar<=0.9.6; python_version < '3.7'
> pytest-sugar; python_version >= '3.7'
> pytest-env
> lxml
> jsonschema
> filelock
>
> I think the real answer is that it's 3.8 from what I see here:
>
> swig/python/osgeo/__init__.py
>
> # The following is a Sequence of tuples in the form of (gdal_version,
> python_version).
> # Each line represents the minimum supported Python version of a given
> GDAL version.
> # Introducing a new line for the next GDAL version will trigger a
> deprecation warning
> # when importing osgeo from a Python version which will not be
> # supported in the next version of GDAL.
> gdal_version_and_min_supported_python_version = (
>     ((0, 0), (0, 0)),
>     ((1, 0), (2, 0)),
>     ((2, 0), (2, 7)),
>     ((3, 3), (3, 6)),
>     # ((3, 4), (3, 7)),
>     # ((3, 5), (3, 8)),
> )
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230613/68077edd/attachment.htm>

From schwehr at gmail.com  Tue Jun 13 12:41:40 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 13 Jun 2023 12:41:40 -0700
Subject: [gdal-dev] Minimum python version?
In-Reply-To: <CA+K_q_oC+yLR503ekCpVOFtBGLGC99qD4eG+p9-u2ObGNLBpKg@mail.gmail.com>
References: <CACmBxyseSuj7r5Q3EeP2zCB2dQ7WqX-ayd9rfu+LT8U-7MqRhQ@mail.gmail.com>
 <CA+K_q_oC+yLR503ekCpVOFtBGLGC99qD4eG+p9-u2ObGNLBpKg@mail.gmail.com>
Message-ID: <CACmBxyt3eCD8kPKfd+we82TooaRm3OHgH6mqHuXs_wquHZ+ZUg@mail.gmail.com>

Thanks Even and Dan!

On Tue, Jun 13, 2023 at 10:45?AM Daniel Baston <dbaston at gmail.com> wrote:

> The minimum version (3.6) is documented at
> https://gdal.org/development/dev_environment.html#build-requirements
>
> The CI still has configurations using Ubuntu 18.04, which is using 3.6.9:
>
> docker run --rm ghcr.io/osgeo/gdal-deps:ubuntu_18.04-master python3
> --version
>
> Dan
>
> On Tue, Jun 13, 2023 at 1:22?PM Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> Hi all,
>>
>> What is the minimum python version for the GDAL python bindings? This is
>> the only thing I found easily:
>>
>> find . -type f | grep -v git | xargs grep 3 | grep python_version
>>
>> cat autotest/requirements.txt
>> pytest>=6.0.0
>> pytest-sugar<=0.9.6; python_version < '3.7'
>> pytest-sugar; python_version >= '3.7'
>> pytest-env
>> lxml
>> jsonschema
>> filelock
>>
>> I think the real answer is that it's 3.8 from what I see here:
>>
>> swig/python/osgeo/__init__.py
>>
>> # The following is a Sequence of tuples in the form of (gdal_version,
>> python_version).
>> # Each line represents the minimum supported Python version of a given
>> GDAL version.
>> # Introducing a new line for the next GDAL version will trigger a
>> deprecation warning
>> # when importing osgeo from a Python version which will not be
>> # supported in the next version of GDAL.
>> gdal_version_and_min_supported_python_version = (
>>     ((0, 0), (0, 0)),
>>     ((1, 0), (2, 0)),
>>     ((2, 0), (2, 7)),
>>     ((3, 3), (3, 6)),
>>     # ((3, 4), (3, 7)),
>>     # ((3, 5), (3, 8)),
>> )
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230613/6469e478/attachment.htm>

From stenger at lat-lon.de  Tue Jun 13 13:27:31 2023
From: stenger at lat-lon.de (Dirk Stenger)
Date: Tue, 13 Jun 2023 22:27:31 +0200
Subject: [gdal-dev] Compatibility of GDAL binaries and GDAL jar files
Message-ID: <d4554efb-a762-ec31-442a-bf05a4b25bfb@lat-lon.de>

All,

I am using GDAL with an Java application and have a couple of questions 
regarding the compatibility of releases of the GDAL binaries and the 
GDAL jar files provided via Maven Central Repository [1].

The GDAL jar files provided via Maven Central Repository never contain a 
bug fix version (e.g. 3.5.0, 3.6.0, 3.7.0). The GDAL binaries, however, 
use bug fix versions (e.g. 3.6.4).
How do I match the versions? Should I, for example, use GDAL jar 3.6.0 
with GDAL binary 3.6.4? What is the release policy of the versions in 
Maven Central Repository, is there always a new jar release whenever 
there is a GDAL release of a minor version?

Is there any compatibility scheme/matrix for using the GDAL jar file 
with GDAL binaries?
For example, can minor versions be combined (e.g. using GDAL jar 3.0.0 
with GDAL binary 3.6.4) or should there always be exact version matching?
If different versions can be combined, is there any documentation about 
the logic of matching?

Kind regards,
Dirk

[1] https://central.sonatype.com/artifact/org.gdal/gdal/3.7.0

From even.rouault at spatialys.com  Tue Jun 13 13:37:09 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Jun 2023 22:37:09 +0200
Subject: [gdal-dev] Compatibility of GDAL binaries and GDAL jar files
In-Reply-To: <d4554efb-a762-ec31-442a-bf05a4b25bfb@lat-lon.de>
References: <d4554efb-a762-ec31-442a-bf05a4b25bfb@lat-lon.de>
Message-ID: <7612c8a7-74f7-c5ee-67a0-fca09db7c2d9@spatialys.com>


Le 13/06/2023 ? 22:27, Dirk Stenger a ?crit?:
> All,
>
> I am using GDAL with an Java application and have a couple of 
> questions regarding the compatibility of releases of the GDAL binaries 
> and the GDAL jar files provided via Maven Central Repository [1].
>
> The GDAL jar files provided via Maven Central Repository never contain 
> a bug fix version (e.g. 3.5.0, 3.6.0, 3.7.0). The GDAL binaries, 
> however, use bug fix versions (e.g. 3.6.4).
> How do I match the versions? Should I, for example, use GDAL jar 3.6.0 
> with GDAL binary 3.6.4? 

Yes, that should work

> What is the release policy of the versions in Maven Central 
> Repository, is there always a new jar release whenever there is a GDAL 
> release of a minor version?
We generally don't release .jar for patch versions (the z in x.y.z), 
unless there would be a bugfix for the bindings themselves
>
> Is there any compatibility scheme/matrix for using the GDAL jar file 
> with GDAL binaries?
> For example, can minor versions be combined (e.g. using GDAL jar 3.0.0 
> with GDAL binary 3.6.4) or should there always be exact version matching?

You could likely using a GDAL jar of a lesser version than the binary, 
since the bindings rely on the C API/ABI which is stable within the same 
major version number (but the reverse would be true. GDAL jar of 3.6 
might use C symbols missing in libgdal < 3.6).

But such mixed version combinations are not tested by our CI : the CI 
only tests running the bindings against the same GDAL native version.

I'm not totally sure you can run a .jar against the 
libgdalalljni.so/.dll that would have been generated with a different 
version of SWIG though. I assume that if you remain with the same major 
version of SWIG that should work OK, but that's not tested either.

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Jun 14 05:45:10 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jun 2023 14:45:10 +0200
Subject: [gdal-dev] libtiff 4.5.1 is released
Message-ID: <89fb0fcd-c691-84e7-b351-2eab9a63c547@spatialys.com>

Hi,

I've promoted rc3 as the final 4.5.1 release.

Read about this release at:
https://libtiff.gitlab.io/libtiff/releases/v4.5.1.html

Note the following warning:
This version will be the last one supporting most TIFF tools (except 
tiffinfo,
tiffdump, tiffcp and tiffset), whose maintenance will be discontinued, due
to the lack of contributors able to address reported security issues.
Starting with libtiff v4.6.0, their source code, at this time ,will still be
available in the source distribution, but they will no longer be built by
default, and issues related to them will no longer be accepted in the
libtiff bug tracker.

The release tarball can be downloaded at:

https://download.osgeo.org/libtiff/tiff-4.5.1.tar.gz
https://download.osgeo.org/libtiff/tiff-4.5.1.tar.xz
https://download.osgeo.org/libtiff/tiff-4.5.1.zip

Signatures:
https://download.osgeo.org/libtiff/tiff-4.5.1.tar.gz.sig
https://download.osgeo.org/libtiff/tiff-4.5.1.tar.xz.sig
https://download.osgeo.org/libtiff/tiff-4.5.1.zip.sig

The release is also available at:
https://gitlab.com/libtiff/libtiff/-/releases/v4.5.1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew at aitchison.me.uk  Wed Jun 14 06:28:01 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 14 Jun 2023 14:28:01 +0100 (BST)
Subject: [gdal-dev] libtiff 4.5.1 is released
In-Reply-To: <89fb0fcd-c691-84e7-b351-2eab9a63c547@spatialys.com>
References: <89fb0fcd-c691-84e7-b351-2eab9a63c547@spatialys.com>
Message-ID: <d7f4c6d3-1734-1302-4d06-22a1b06c1580@aitchison.me.uk>

On Wed, 14 Jun 2023, Even Rouault wrote:

> Hi,
>
> I've promoted rc3 as the final 4.5.1 release.
>
> Read about this release at:
> https://libtiff.gitlab.io/libtiff/releases/v4.5.1.html
>
> Note the following warning:
> This version will be the last one supporting most TIFF tools (except tiffinfo,
> tiffdump, tiffcp and tiffset), whose maintenance will be discontinued, due
> to the lack of contributors able to address reported security issues.
> Starting with libtiff v4.6.0, their source code, at this time ,will still be
> available in the source distribution, but they will no longer be built by
> default, and issues related to them will no longer be accepted in the
> libtiff bug tracker.

I think we should continue to allow *security* issues to be reported
and tracked, but make it clear that they will not be addressed.
If the source is available, someone will try to use it; is it not 
fair that they know about security issues that others have found ?

I am not saying we do anything, but if A can be bothered to report a 
security issue, then the only reason not to let B know would be if the 
report was as dangerous as the flaw ?
Or would this mean we would need to triage security reports ?

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From jmckenna at gatewaygeomatics.com  Wed Jun 14 08:57:35 2023
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 14 Jun 2023 12:57:35 -0300
Subject: [gdal-dev] libtiff 4.5.1 is released
In-Reply-To: <89fb0fcd-c691-84e7-b351-2eab9a63c547@spatialys.com>
References: <89fb0fcd-c691-84e7-b351-2eab9a63c547@spatialys.com>
Message-ID: <f28274b6-51fd-f156-5a68-5737a9234b73@gatewaygeomatics.com>

Thanks Even.  One question (for packagers), is if the tools you 
mentioned to be removed are set through -Dtiff-contrib correct?

thanks,

-jeff




-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/



On 2023-06-14 9:45 a.m., Even Rouault wrote:
> Hi,
> 
> I've promoted rc3 as the final 4.5.1 release.
> 
> Read about this release at:
> https://libtiff.gitlab.io/libtiff/releases/v4.5.1.html
> 
> Note the following warning:
> This version will be the last one supporting most TIFF tools (except 
> tiffinfo,
> tiffdump, tiffcp and tiffset), whose maintenance will be discontinued, due
> to the lack of contributors able to address reported security issues.
> Starting with libtiff v4.6.0, their source code, at this time ,will 
> still be
> available in the source distribution, but they will no longer be built by
> default, and issues related to them will no longer be accepted in the
> libtiff bug tracker.
> 
> The release tarball can be downloaded at:
> 
> https://download.osgeo.org/libtiff/tiff-4.5.1.tar.gz
> https://download.osgeo.org/libtiff/tiff-4.5.1.tar.xz
> https://download.osgeo.org/libtiff/tiff-4.5.1.zip
> 
> Signatures:
> https://download.osgeo.org/libtiff/tiff-4.5.1.tar.gz.sig
> https://download.osgeo.org/libtiff/tiff-4.5.1.tar.xz.sig
> https://download.osgeo.org/libtiff/tiff-4.5.1.zip.sig
> 
> The release is also available at:
> https://gitlab.com/libtiff/libtiff/-/releases/v4.5.1
> 
> Even
> 


From even.rouault at spatialys.com  Wed Jun 14 09:06:45 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Jun 2023 18:06:45 +0200
Subject: [gdal-dev] libtiff 4.5.1 is released
In-Reply-To: <f28274b6-51fd-f156-5a68-5737a9234b73@gatewaygeomatics.com>
References: <89fb0fcd-c691-84e7-b351-2eab9a63c547@spatialys.com>
 <f28274b6-51fd-f156-5a68-5737a9234b73@gatewaygeomatics.com>
Message-ID: <1f96bea5-5d70-bc4d-fb8c-00c49f5317ec@spatialys.com>


Le 14/06/2023 ? 17:57, Jeff McKenna a ?crit?:
> Thanks Even.? One question (for packagers), is if the tools you 
> mentioned to be removed are set through -Dtiff-contrib correct?

This is still to be decided how we implement this. There's a discussion 
in https://gitlab.com/libtiff/libtiff/-/issues/580

"contrib" are even less supported/maintained stuff. We should probably 
not build them by default either.

Een

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From rykovd at gmail.com  Wed Jun 14 13:43:26 2023
From: rykovd at gmail.com (Denis Rykov)
Date: Wed, 14 Jun 2023 22:43:26 +0200
Subject: [gdal-dev] OAPIF Unexpected Content-Type
In-Reply-To: <d1fe2b89-ca97-c344-57df-8de5610d7aec@spatialys.com>
References: <CAJbvKNojS8H-L2Yx-xPC=iqUhHLbq3mbj2_aj2frQ7HfdvaDqg@mail.gmail.com>
 <d1fe2b89-ca97-c344-57df-8de5610d7aec@spatialys.com>
Message-ID: <CAJbvKNonZTSqA9fHvr7VP+sv5EN2_500Osf93EqHCqZYYGaB5g@mail.gmail.com>

That was it. Thanks Even!


On Thu, Jun 1, 2023 at 2:09?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Denis,
>
> You have to identify on which request this occurs
>
> Run with CPL_DEBUG=ON CPL_CURL_VERBOSE=ON
>
> This error is emitted when the server issues a response with a missing
> Content-Type header.
>
> Le 01/06/2023 ? 01:52, Denis Rykov a ?crit :
> > I'm getting "ERROR 1: Unexpected Content-Type: (null)" in the middle
> > of the ogrinfo output. What does this mean? I can adjust server
> > configuration but it is not clear which endpoint is failing because
> > apart from that message everything seems to be working fine.
> >
> > $ ogrinfo OAPIF:http://localhost:8080/api/resource/6750/oapif/
> layer_6209
> > INFO: Open of `OAPIF:http://localhost:8080/api/resource/6750/oapif/'
> >       using driver `OAPIF' successful.
> >
> > Layer name: layer_6209
> > Metadata:
> >   TITLE=Test layer
> > Geometry: Point
> > ERROR 1: Unexpected Content-Type: (null)
> > Feature Count: 26
> > Extent: (0.000000, 0.000000) - (110.275300, 49.493019)
> > Layer SRS WKT:
> > GEOGCRS["WGS 84",
> >     DATUM["World Geodetic System 1984",
> >         ELLIPSOID["WGS 84",6378137,298.257223563,
> >             LENGTHUNIT["metre",1]]],
> >     PRIMEM["Greenwich",0,
> >         ANGLEUNIT["degree",0.0174532925199433]],
> >     CS[ellipsoidal,2],
> >         AXIS["geodetic latitude (Lat)",north,
> >             ORDER[1],
> >             ANGLEUNIT["degree",0.0174532925199433]],
> >         AXIS["geodetic longitude (Lon)",east,
> >             ORDER[2],
> >             ANGLEUNIT["degree",0.0174532925199433]],
> >     ID["EPSG",4326]]
> > Data axis to CRS axis mapping: 2,1
> > num: Real (0.0)
> > link: String (0.0)
> > wikipedia: String (0.0)
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230614/7d211998/attachment.htm>

From aborruso at gmail.com  Thu Jun 15 00:39:40 2023
From: aborruso at gmail.com (andy)
Date: Thu, 15 Jun 2023 09:39:40 +0200
Subject: [gdal-dev] ogr2ogr: is there something like the inverse of clipsrc
Message-ID: <CAHEdGZNsZD3gZ3Aynzqb7u7uT3eGzn4ipWfK4hcAWvfFBnBrVw@mail.gmail.com>

Hi,
I have a complex OpenFileGDB file, which has inside a lot of relations and
then a lot of non-geometric tables.
I need to spatially extract/clip 1/3 of this.

So I thought I'd make a copy and to use an external layer not as clip (that
maintains inside), but as an eraser.
This way I am sure that all relations are preserved, as well as
non-geometric tables.
If I use clipsrc, I think that the new layer clipped has the correct
geometry information, but loses all relationships.

Is there something to apply something like erase to a layer via ogr2ogr?

Thank you




-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230615/0688af62/attachment.htm>

From public at postholer.com  Sat Jun 17 08:54:44 2023
From: public at postholer.com (Scott)
Date: Sat, 17 Jun 2023 08:54:44 -0700
Subject: [gdal-dev] OGR CSV oddity
Message-ID: <41069bfd-bfbc-0703-6baf-63990694bfa7@postholer.com>

If I select a single column from a table, the header column name has a 
trailing comma. If I select more than 1 column it does not. Example:

ogr2ogr -f CSV -sql "select col1 from table limit 1" /vsistdout/ source.gpkg

Output:

col1,
123

Tested on 3.5.1 and 3.7

I've tried this on various column data types with the same result.

Pseudo suggestion:
header += header.length ? "," + colname : colname

-- 
www.postholer.com

From even.rouault at spatialys.com  Sat Jun 17 08:58:15 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 17 Jun 2023 17:58:15 +0200
Subject: [gdal-dev] OGR CSV oddity
In-Reply-To: <41069bfd-bfbc-0703-6baf-63990694bfa7@postholer.com>
References: <41069bfd-bfbc-0703-6baf-63990694bfa7@postholer.com>
Message-ID: <679a1160-3ff9-2947-cacf-fc9676e586a0@spatialys.com>

yep, known oddity. Presumably out of caution, the CSV driver refused for 
years to open a CSV with a single column, so on the writing side, it 
adds this dummy comma. Since recently (3.7.0 I believe), the read side 
of the CSV accepts single column header without trailing comma, but the 
write side still generates one

Le 17/06/2023 ? 17:54, Scott a ?crit?:
> If I select a single column from a table, the header column name has a 
> trailing comma. If I select more than 1 column it does not. Example:
>
> ogr2ogr -f CSV -sql "select col1 from table limit 1" /vsistdout/ 
> source.gpkg
>
> Output:
>
> col1,
> 123
>
> Tested on 3.5.1 and 3.7
>
> I've tried this on various column data types with the same result.
>
> Pseudo suggestion:
> header += header.length ? "," + colname : colname
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Sat Jun 17 09:00:48 2023
From: public at postholer.com (Scott)
Date: Sat, 17 Jun 2023 09:00:48 -0700
Subject: [gdal-dev] OGR CSV oddity
In-Reply-To: <679a1160-3ff9-2947-cacf-fc9676e586a0@spatialys.com>
References: <41069bfd-bfbc-0703-6baf-63990694bfa7@postholer.com>
 <679a1160-3ff9-2947-cacf-fc9676e586a0@spatialys.com>
Message-ID: <668adf1a-6f52-2750-bfd2-a5e947aa14cf@postholer.com>

Weird. Thanks Even!

On 6/17/23 08:58, Even Rouault wrote:
> yep, known oddity. Presumably out of caution, the CSV driver refused for 
> years to open a CSV with a single column, so on the writing side, it 
> adds this dummy comma. Since recently (3.7.0 I believe), the read side 
> of the CSV accepts single column header without trailing comma, but the 
> write side still generates one
> 
> Le 17/06/2023 ? 17:54, Scott a ?crit?:
>> If I select a single column from a table, the header column name has a 
>> trailing comma. If I select more than 1 column it does not. Example:
>>
>> ogr2ogr -f CSV -sql "select col1 from table limit 1" /vsistdout/ 
>> source.gpkg
>>
>> Output:
>>
>> col1,
>> 123
>>
>> Tested on 3.5.1 and 3.7
>>
>> I've tried this on various column data types with the same result.
>>
>> Pseudo suggestion:
>> header += header.length ? "," + colname : colname
>>

From jesse.r.meyer at nasa.gov  Tue Jun 20 13:43:44 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Tue, 20 Jun 2023 20:43:44 +0000
Subject: [gdal-dev] OSX 13.4 (M1 Pro) troubles using GDAL
Message-ID: <9FB5FF11-FA30-44F4-9297-462D5CC68272@ndc.nasa.gov>

Hi,

My GDAL installation procedure looks like:

Install python 3.11.4 from the official site
brew install gdal (this grabbed numpy v1.25, and a number of other pre-reqs, and installs 3.6.4)
python -m venv test_env
// activate test_env //
pip install numpy (installs v1.25)
pip install gdal==3.6.4 (brew does not yet house 3.7)

This appears to work fine at first.  I can manipulate gdal datasets up until I use band.ReadAsArray().  Python throws an exception `cannot import name '_gdal_array' from 'osgeo`.

Should this have worked?  Stack Overflow has a few instances of this problem and they all point to incorrect install orders, or various software environments interacting poorly.  But I don?t think I?m making those mistakes.

What causes my head to spin is that, I installed rasterio, and the ?read? function works!  It must be via a different mechanism, but I wasn?t able to follow the code architecture in Github to see how they pull it off.

Any advice?  Thanks --
Jesse

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230620/e63c773a/attachment.htm>

From adah at uvic.ca  Tue Jun 20 16:37:14 2023
From: adah at uvic.ca (=?iso-8859-1?Q?Abiga=EFl_Dah?=)
Date: Tue, 20 Jun 2023 23:37:14 +0000
Subject: [gdal-dev] gdal_translate tiff to netcdf
Message-ID: <eeb6edb102904b92bd5d77572b2647a6@uvic.ca>

Hello,

I am trying to convert a file with the format GEOTIFF to netcdf using the command line:
gdal_translate -of NetCDF <input filename> <output filename>

However, I get the following error message: Output driver `NetCDF' not recognised.

Would you know what's wrong and how to fix this? Thanks in advance,
Best,
Abigail

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230620/ccd5f0b3/attachment.htm>

From public at postholer.com  Tue Jun 20 17:17:24 2023
From: public at postholer.com (Scott)
Date: Tue, 20 Jun 2023 17:17:24 -0700
Subject: [gdal-dev] gdal_translate tiff to netcdf
In-Reply-To: <eeb6edb102904b92bd5d77572b2647a6@uvic.ca>
References: <eeb6edb102904b92bd5d77572b2647a6@uvic.ca>
Message-ID: <5bf75c19-4149-55e2-7598-0eeb90276678@postholer.com>

It sounds like the install wasn't built with libnetCDF. Try this:

gdalinfo --formats

If it's part of your install you'll see it.


On 6/20/23 16:37, Abiga?l Dah wrote:
> Hello,
> 
> I am trying to convert a file with the format GEOTIFF to netcdf using 
> the command line:
> 
> gdal_translate -of NetCDF <input filename> <output filename>
> 
> However, I get the following error message: Output driver `NetCDF' not 
> recognised.
> 
> Would you know what?s wrong and how to fix this? Thanks in advance,
> 
> Best,
> 
> Abigail
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From dnewhall at carlsonsw.com  Tue Jun 20 18:01:07 2023
From: dnewhall at carlsonsw.com (Derek Newhall)
Date: Tue, 20 Jun 2023 21:01:07 -0400
Subject: [gdal-dev] ESRI Shapefile API missing
Message-ID: <CAA1reb1XnP5pf4mh23Tz4Buqx=gOvEg2vSKFFZStmrEgomx+Vw@mail.gmail.com>

Hi all,

We've just migrated from GDAL 3.5.1 to 3.7.0 which we build with (almost)
all external dependencies as static libraries. However, we've noticed that
when we try to compile our app against the resulting library the ESRI
Shapefile API isn't available.

Severity Code Description
Error LNK2001 unresolved external symbol DBFClose
Error LNK2001 unresolved external symbol SHPOpen
<snip>
Error LNK2001 unresolved external symbol SHPCreateObject
Error LNK2001 unresolved external symbol SHPClose

Looking at the .libs' symbols:

DUMPBIN /linkermember D:\gdal-3.5.1\build\gdal_i.lib | sls DBF

   1ED958 DBFOpen
   1ED958 __imp_DBFOpen
   1ED9BC DBFOpenLL
   1ED9BC __imp_DBFOpenLL
   1ED3D0 DBFCreate
   1ED3D0 __imp_DBFCreate
   1ED436 DBFCreateEx
   1ED436 __imp_DBFCreateEx
<snip 50+ lines>
     1257 __imp_DBFWriteNULLAttribute
     1256 __imp_DBFWriteStringAttribute
     125B __imp_DBFWriteTuple

DUMPBIN /linkermember D:\gdal-3.7.0\build\gdal.lib | sls DBF

      DBF OSRGetAxesCount
      DBF __imp_OSRGetAxesCount

We build the DLL and apps with the following command in a .bat script (all
library paths are valid and it compiles):

cmake -G "Visual Studio 16 2019" -DBUILD_APPS=ON -DBUILD_SHARED_LIBS=ON ^
-DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_PREFIX_PATH=D:\gdal-3.7.0-build ^
-DCMAKE_CXX_FLAGS="-DCURL_STATICLIB -DXML_STATIC"
-DGDAL_USE_EXTERNAL_LIBS=OFF ^
-DOGR_BUILD_OPTIONAL_DRIVERS=ON ^
-DPROJ_INCLUDE_DIR="%~dp0proj-6.3.1\src" ^
-DPROJ_LIBRARY_RELEASE="%~dp0proj-6.3.1\build_VS2017_x64\lib\RelWithDebInfo\proj.lib"
^
-DGDAL_USE_CURL=ON -DCURL_INCLUDE_DIR="%~dp0libcurl\include"
-DCURL_LIBRARY_RELEASE="%~dp0libcurl\lib\libcurl.lib" ^
-DGDAL_USE_ECW=ON -DECW_INCLUDE_DIR="%~dp0ERDAS ECW JPEG 2000 SDK
5.5.0\Desktop Read-Only\include" -DECW_LIBRARY="%~dp0ERDAS ECW JPEG 2000
SDK 5.5.0\Desktop Read-Only\lib\vc141\x64\NCSEcw.lib" ^
-DGDAL_USE_ODBC=ON ^
-DGDAL_USE_OPENSSL=ON -DOPENSSL_ROOT_DIR="%~dp0openssl-1.1.0f-vs2017"
-DOPENSSL_USE_STATIC_LIBS=TRUE -DOPENSSL_MSVC_STATIC_RT=TRUE ^
-DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON ^
-DGDAL_USE_PDFIUM=ON
-DPDFIUM_INCLUDE_DIR="%~dp0ExtractPDFium\install\include\pdfium"
 -DPDFIUM_LIBRARY="%~dp0ExtractPDFium\install\lib\pdfium.lib" ^
-DGDAL_USE_SQLITE3=ON
-DSQLite3_INCLUDE_DIR="%~dp0sqlite-amalgamation-3370200"
 -DSQLite3_LIBRARY="%~dp0sqlite-amalgamation-3370200\sqlite3.lib" ^
-DGDAL_USE_XERCESC=ON -DXercesC_INCLUDE_DIR="%~dp0xerces-c-3.2.4\src"
-DXercesC_LIBRARY="%~dp0xerces-c-3.2.4\build\src\Release\xerces-c_3.lib" ^
-DGDAL_USE_EXPAT=ON -DEXPAT_INCLUDE_DIR="%~dp0Expat\lib"
-DEXPAT_LIBRARY="%~dp0Expat\RelWithDebInfo\libexpat.lib" ^
..

The build documentation at
https://gdal.org/development/building_from_source.html says the ESRI
Shapefile API cannot be disabled, so I'm wondering what's going on.  Is
this a bug, or did we just misconfigure something? This is our first time
semi-successfully building with the new CMake system.

Derek Newhall

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230620/1e10a942/attachment-0001.htm>

From dnewhall at carlsonsw.com  Tue Jun 20 18:02:49 2023
From: dnewhall at carlsonsw.com (Derek Newhall)
Date: Tue, 20 Jun 2023 21:02:49 -0400
Subject: [gdal-dev] ESRI Shapefile API missing
In-Reply-To: <CAA1reb1XnP5pf4mh23Tz4Buqx=gOvEg2vSKFFZStmrEgomx+Vw@mail.gmail.com>
References: <CAA1reb1XnP5pf4mh23Tz4Buqx=gOvEg2vSKFFZStmrEgomx+Vw@mail.gmail.com>
Message-ID: <CAA1reb3R70SAdGLK0Qr2v43hXVn=brkyXPr+4gKo23cUVKSU-A@mail.gmail.com>

Also worth noting that this appears in the console output:

-- Enabled drivers and features and found dependency packages
-- The following features have been enabled:
<snip ...>
 * ogr_SHAPE, ESRI shape-file

Derek Newhall

On Tue, Jun 20, 2023 at 9:01?PM Derek Newhall <dnewhall at carlsonsw.com>
wrote:

> Hi all,
>
> We've just migrated from GDAL 3.5.1 to 3.7.0 which we build with (almost)
> all external dependencies as static libraries. However, we've noticed that
> when we try to compile our app against the resulting library the ESRI
> Shapefile API isn't available.
>
> Severity Code Description
> Error LNK2001 unresolved external symbol DBFClose
> Error LNK2001 unresolved external symbol SHPOpen
> <snip>
> Error LNK2001 unresolved external symbol SHPCreateObject
> Error LNK2001 unresolved external symbol SHPClose
>
> Looking at the .libs' symbols:
>
> DUMPBIN /linkermember D:\gdal-3.5.1\build\gdal_i.lib | sls DBF
>
>    1ED958 DBFOpen
>    1ED958 __imp_DBFOpen
>    1ED9BC DBFOpenLL
>    1ED9BC __imp_DBFOpenLL
>    1ED3D0 DBFCreate
>    1ED3D0 __imp_DBFCreate
>    1ED436 DBFCreateEx
>    1ED436 __imp_DBFCreateEx
> <snip 50+ lines>
>      1257 __imp_DBFWriteNULLAttribute
>      1256 __imp_DBFWriteStringAttribute
>      125B __imp_DBFWriteTuple
>
> DUMPBIN /linkermember D:\gdal-3.7.0\build\gdal.lib | sls DBF
>
>       DBF OSRGetAxesCount
>       DBF __imp_OSRGetAxesCount
>
> We build the DLL and apps with the following command in a .bat script (all
> library paths are valid and it compiles):
>
> cmake -G "Visual Studio 16 2019" -DBUILD_APPS=ON -DBUILD_SHARED_LIBS=ON ^
> -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_PREFIX_PATH=D:\gdal-3.7.0-build ^
> -DCMAKE_CXX_FLAGS="-DCURL_STATICLIB -DXML_STATIC"
> -DGDAL_USE_EXTERNAL_LIBS=OFF ^
> -DOGR_BUILD_OPTIONAL_DRIVERS=ON ^
> -DPROJ_INCLUDE_DIR="%~dp0proj-6.3.1\src" ^
> -DPROJ_LIBRARY_RELEASE="%~dp0proj-6.3.1\build_VS2017_x64\lib\RelWithDebInfo\proj.lib"
> ^
> -DGDAL_USE_CURL=ON -DCURL_INCLUDE_DIR="%~dp0libcurl\include"
> -DCURL_LIBRARY_RELEASE="%~dp0libcurl\lib\libcurl.lib" ^
> -DGDAL_USE_ECW=ON -DECW_INCLUDE_DIR="%~dp0ERDAS ECW JPEG 2000 SDK
> 5.5.0\Desktop Read-Only\include" -DECW_LIBRARY="%~dp0ERDAS ECW JPEG 2000
> SDK 5.5.0\Desktop Read-Only\lib\vc141\x64\NCSEcw.lib" ^
> -DGDAL_USE_ODBC=ON ^
> -DGDAL_USE_OPENSSL=ON -DOPENSSL_ROOT_DIR="%~dp0openssl-1.1.0f-vs2017"
> -DOPENSSL_USE_STATIC_LIBS=TRUE -DOPENSSL_MSVC_STATIC_RT=TRUE ^
> -DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON ^
> -DGDAL_USE_PDFIUM=ON
> -DPDFIUM_INCLUDE_DIR="%~dp0ExtractPDFium\install\include\pdfium"
>  -DPDFIUM_LIBRARY="%~dp0ExtractPDFium\install\lib\pdfium.lib" ^
> -DGDAL_USE_SQLITE3=ON
> -DSQLite3_INCLUDE_DIR="%~dp0sqlite-amalgamation-3370200"
>  -DSQLite3_LIBRARY="%~dp0sqlite-amalgamation-3370200\sqlite3.lib" ^
> -DGDAL_USE_XERCESC=ON -DXercesC_INCLUDE_DIR="%~dp0xerces-c-3.2.4\src"
> -DXercesC_LIBRARY="%~dp0xerces-c-3.2.4\build\src\Release\xerces-c_3.lib" ^
> -DGDAL_USE_EXPAT=ON -DEXPAT_INCLUDE_DIR="%~dp0Expat\lib"
> -DEXPAT_LIBRARY="%~dp0Expat\RelWithDebInfo\libexpat.lib" ^
> ..
>
> The build documentation at
> https://gdal.org/development/building_from_source.html says the ESRI
> Shapefile API cannot be disabled, so I'm wondering what's going on.  Is
> this a bug, or did we just misconfigure something? This is our first time
> semi-successfully building with the new CMake system.
>
> Derek Newhall
>

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230620/ee9e2812/attachment.htm>

From bdezonia at gmail.com  Tue Jun 20 22:58:57 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Wed, 21 Jun 2023 00:58:57 -0500
Subject: [gdal-dev] A Java SWIG question
Message-ID: <CAKcvfuSKY7yGw83k7OkznJBrc20wSwXx=YvUz94=Z6Y5s94Mdg@mail.gmail.com>

Hello,

I am trying to work on the swig java api. I've made a lot of progress and
am running into one last error before my code completely compiles. I am
getting a swig complaint when passing a java long[] to a C/C++ call that is
expecting GUInt64*.

Basically the error message is "long[] cannot be converted to
SWIGTYPE_p_GUInt64". I've been reading and googling and I can't figure out
how to modify typemaps_java.i to accomplish this. I think it is a simple
thing but I am at a loss. Does anyone have any tips?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/d3617649/attachment.htm>

From even.rouault at spatialys.com  Wed Jun 21 01:34:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Jun 2023 10:34:51 +0200
Subject: [gdal-dev] ESRI Shapefile API missing
In-Reply-To: <CAA1reb1XnP5pf4mh23Tz4Buqx=gOvEg2vSKFFZStmrEgomx+Vw@mail.gmail.com>
References: <CAA1reb1XnP5pf4mh23Tz4Buqx=gOvEg2vSKFFZStmrEgomx+Vw@mail.gmail.com>
Message-ID: <aaac415b-2dec-9f7f-4c03-371defa14853@spatialys.com>

Derek,

This is intended. GDAL build shouldn't leak/expose internal 
implementation details such as its embedded shapelib copy, which doesn't 
belong to the GDAL API. Either you use the OGR Shapefile driver through 
OGR API, or you link against external shapelib if you want to use 
shapelib directly

Note that https://github.com/OSGeo/gdal/pull/7973 is pending to fix the 
isolation of the embedded shapelib copy

Even

Le 21/06/2023 ? 03:01, Derek Newhall a ?crit?:
> Hi all,
>
> We've just migrated from GDAL 3.5.1 to 3.7.0 which we build with 
> (almost) all external dependencies as static libraries. However, we've 
> noticed that when we try to compile our app against the resulting 
> library the ESRI Shapefile API isn't available.
>
> Severity Code Description
> Error LNK2001 unresolved external symbol DBFClose
> Error LNK2001 unresolved external symbol SHPOpen
> <snip>
> Error LNK2001 unresolved external symbol SHPCreateObject
> Error LNK2001 unresolved external symbol SHPClose
>
> Looking at the .libs' symbols:
>
> DUMPBIN /linkermember D:\gdal-3.5.1\build\gdal_i.lib | sls DBF
>
> ? ?1ED958 DBFOpen
> ? ?1ED958 __imp_DBFOpen
> ? ?1ED9BC DBFOpenLL
> ? ?1ED9BC __imp_DBFOpenLL
> ? ?1ED3D0 DBFCreate
> ? ?1ED3D0 __imp_DBFCreate
> ? ?1ED436 DBFCreateEx
> ? ?1ED436 __imp_DBFCreateEx
> <snip 50+ lines>
> ? ? ?1257 __imp_DBFWriteNULLAttribute
> ? ? ?1256 __imp_DBFWriteStringAttribute
> ? ? ?125B __imp_DBFWriteTuple
>
> DUMPBIN /linkermember D:\gdal-3.7.0\build\gdal.lib | sls DBF
>
> ? ? ? DBF OSRGetAxesCount
> ? ? ? DBF __imp_OSRGetAxesCount
>
> We build the DLL and apps with the following command in a .bat script 
> (all library paths are valid and it compiles):
>
> cmake -G "Visual Studio 16 2019" -DBUILD_APPS=ON -DBUILD_SHARED_LIBS=ON ^
> -DCMAKE_BUILD_TYPE=RelWithDebInfo 
> -DCMAKE_PREFIX_PATH=D:\gdal-3.7.0-build ^
> -DCMAKE_CXX_FLAGS="-DCURL_STATICLIB -DXML_STATIC" 
> -DGDAL_USE_EXTERNAL_LIBS=OFF ^
> -DOGR_BUILD_OPTIONAL_DRIVERS=ON ^
> -DPROJ_INCLUDE_DIR="%~dp0proj-6.3.1\src" ^
> -DPROJ_LIBRARY_RELEASE="%~dp0proj-6.3.1\build_VS2017_x64\lib\RelWithDebInfo\proj.lib" 
> ^
> -DGDAL_USE_CURL=ON -DCURL_INCLUDE_DIR="%~dp0libcurl\include" 
> -DCURL_LIBRARY_RELEASE="%~dp0libcurl\lib\libcurl.lib" ^
> -DGDAL_USE_ECW=ON -DECW_INCLUDE_DIR="%~dp0ERDAS ECW JPEG 2000 SDK 
> 5.5.0\Desktop Read-Only\include" -DECW_LIBRARY="%~dp0ERDAS ECW JPEG 
> 2000 SDK 5.5.0\Desktop Read-Only\lib\vc141\x64\NCSEcw.lib" ^
> -DGDAL_USE_ODBC=ON ^
> -DGDAL_USE_OPENSSL=ON -DOPENSSL_ROOT_DIR="%~dp0openssl-1.1.0f-vs2017" 
> -DOPENSSL_USE_STATIC_LIBS=TRUE -DOPENSSL_MSVC_STATIC_RT=TRUE ^
> -DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON ^
> -DGDAL_USE_PDFIUM=ON 
> -DPDFIUM_INCLUDE_DIR="%~dp0ExtractPDFium\install\include\pdfium" 
> ?-DPDFIUM_LIBRARY="%~dp0ExtractPDFium\install\lib\pdfium.lib" ^
> -DGDAL_USE_SQLITE3=ON 
> -DSQLite3_INCLUDE_DIR="%~dp0sqlite-amalgamation-3370200" 
> ?-DSQLite3_LIBRARY="%~dp0sqlite-amalgamation-3370200\sqlite3.lib" ^
> -DGDAL_USE_XERCESC=ON -DXercesC_INCLUDE_DIR="%~dp0xerces-c-3.2.4\src" 
> -DXercesC_LIBRARY="%~dp0xerces-c-3.2.4\build\src\Release\xerces-c_3.lib" ^
> -DGDAL_USE_EXPAT=ON -DEXPAT_INCLUDE_DIR="%~dp0Expat\lib" 
> -DEXPAT_LIBRARY="%~dp0Expat\RelWithDebInfo\libexpat.lib" ^
> ..
>
> The build documentation at 
> https://gdal.org/development/building_from_source.html says the ESRI 
> Shapefile API cannot be disabled, so I'm wondering what's going on.? 
> Is this a bug, or did we just misconfigure something? This is our 
> first time semi-successfully building with the new CMake system.
>
> Derek Newhall
>
>
> *Disclaimer*
>
> The information contained in this communication from the sender is 
> confidential. It is intended solely for use by the recipient and 
> others authorized to receive it. If you are not the recipient, you are 
> hereby notified that any disclosure, copying, distribution or taking 
> action in relation of the contents of this information is strictly 
> prohibited and may be unlawful.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/f9a6b07c/attachment.htm>

From even.rouault at spatialys.com  Wed Jun 21 01:35:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Jun 2023 10:35:36 +0200
Subject: [gdal-dev] A Java SWIG question
In-Reply-To: <CAKcvfuSKY7yGw83k7OkznJBrc20wSwXx=YvUz94=Z6Y5s94Mdg@mail.gmail.com>
References: <CAKcvfuSKY7yGw83k7OkznJBrc20wSwXx=YvUz94=Z6Y5s94Mdg@mail.gmail.com>
Message-ID: <c984ae0b-0c07-e6a8-5a86-5d3c7e8dcd6f@spatialys.com>

Barry,

it could help if you could point to a public branch in your github fork 
with your pending work

Even

Le 21/06/2023 ? 07:58, Barry DeZonia a ?crit?:
> Hello,
>
> I am trying to work on the swig java api. I've made a lot of progress 
> and am running into one last error before my code completely compiles. 
> I am getting a swig complaint when passing a java long[] to a C/C++ 
> call that is expecting GUInt64*.
>
> Basically the error message is "long[] cannot be converted to 
> SWIGTYPE_p_GUInt64". I've been reading and googling and I can't figure 
> out how to modify typemaps_java.i to accomplish this. I think it is a 
> simple thing but I am at a loss. Does anyone have any tips?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jesse.r.meyer at nasa.gov  Wed Jun 21 09:04:58 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 21 Jun 2023 16:04:58 +0000
Subject: [gdal-dev] [EXTERNAL] [BULK] OSX 13.4 (M1 Pro) troubles using
 GDAL
In-Reply-To: <9FB5FF11-FA30-44F4-9297-462D5CC68272@ndc.nasa.gov>
References: <9FB5FF11-FA30-44F4-9297-462D5CC68272@ndc.nasa.gov>
Message-ID: <1B6BF11B-1315-47CA-B898-9A4C199DC6B4@ndc.nasa.gov>

I checked which functions that were being exported from python3.11/site-packages/osgeo/_gdal.cpython-311-darwin.so

And found a few IO-esque functions, including _GDALReadBlock and _Band_ReadRaster.  Calling these via the standard bindings work.  Must be how rasterio is operating under the hood.

This import line is ultimately what fails for me in test_env/lib/python3.11/site-packages/osgeo/gdal_array.py
# Import the low-level C/C++ module
if __package__ or "." in __name__:
    from . import _gdal_array

I see no _gdal_array file of any kind in /osgeo/.  Only _gdal, _gdalconst, _gnm, _ogr, and _osr .so files and the python wrappers.

I don?t know where these .so files are sourced from / generated (brew?s installation, pip?).

Hopefully this helped clarify the problem..
Jesse

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev" <gdal-dev at lists.osgeo.org>
Reply-To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>
Date: Tuesday, June 20, 2023 at 4:44 PM
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] [BULK] [gdal-dev] OSX 13.4 (M1 Pro) troubles using GDAL

Hi,

My GDAL installation procedure looks like:

Install python 3.11.4 from the official site
brew install gdal (this grabbed numpy v1.25, and a number of other pre-reqs, and installs 3.6.4)
python -m venv test_env
// activate test_env //
pip install numpy (installs v1.25)
pip install gdal==3.6.4 (brew does not yet house 3.7)

This appears to work fine at first.  I can manipulate gdal datasets up until I use band.ReadAsArray().  Python throws an exception `cannot import name '_gdal_array' from 'osgeo`.

Should this have worked?  Stack Overflow has a few instances of this problem and they all point to incorrect install orders, or various software environments interacting poorly.  But I don?t think I?m making those mistakes.

What causes my head to spin is that, I installed rasterio, and the ?read? function works!  It must be via a different mechanism, but I wasn?t able to follow the code architecture in Github to see how they pull it off.

Any advice?  Thanks --
Jesse

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/cebe715d/attachment.htm>

From runette at gmail.com  Wed Jun 21 09:37:52 2023
From: runette at gmail.com (Paul Harwood)
Date: Wed, 21 Jun 2023 17:37:52 +0100
Subject: [gdal-dev] [EXTERNAL] [BULK] OSX 13.4 (M1 Pro) troubles using
 GDAL
In-Reply-To: <1B6BF11B-1315-47CA-B898-9A4C199DC6B4@ndc.nasa.gov>
References: <9FB5FF11-FA30-44F4-9297-462D5CC68272@ndc.nasa.gov>
 <1B6BF11B-1315-47CA-B898-9A4C199DC6B4@ndc.nasa.gov>
Message-ID: <CAE8nN5Nkmj4o9HWSWoZmU1_m5UO1uvz2z889YycNKFbNNqM4fw@mail.gmail.com>

To state the (I hope) obvious - it must be a problem with your installation
and not a general problem with GDAL on Mac - I just tried it on a fresh
installation and it worked.

However - I used Conda as the virtual environment and not Brew/Venv/Pip. I
find it much more consistent and easier ...

On Wed, 21 Jun 2023 at 17:05, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS
AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org> wrote:

> I checked which functions that were being exported from
> python3.11/site-packages/osgeo/_gdal.cpython-311-darwin.so
>
>
>
> And found a few IO-esque functions, including _GDALReadBlock and
> _Band_ReadRaster.  Calling these via the standard bindings work.  Must be
> how rasterio is operating under the hood.
>
>
>
> This import line is ultimately what fails for me in
> test_env/lib/python3.11/site-packages/osgeo/gdal_array.py
>
> *# Import the low-level C/C++ module*
>
> if __package__ or "." in __name__:
>
>     from . import _gdal_array
>
>
>
> I see no _*gdal*_array file of any kind in /osgeo/.  Only _gdal,
> _gdalconst, _gnm, _ogr, and _osr .so files and the python wrappers.
>
>
>
> I don?t know where these .so files are sourced from / generated (brew?s
> installation, pip?).
>
>
>
> Hopefully this helped clarify the problem..
> Jesse
>
>
>
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of "Meyer,
> Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev" <
> gdal-dev at lists.osgeo.org>
> *Reply-To: *"Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND
> APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>
> *Date: *Tuesday, June 20, 2023 at 4:44 PM
> *To: *"gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] [BULK] [gdal-dev] OSX 13.4 (M1 Pro) troubles using
> GDAL
>
>
>
> Hi,
>
>
>
> My GDAL installation procedure looks like:
>
>
>
> Install python 3.11.4 from the official site
>
> brew install gdal (this grabbed numpy v1.25, and a number of other
> pre-reqs, and installs 3.6.4)
>
> python -m venv test_env
>
> // activate test_env //
>
> pip install numpy (installs v1.25)
>
> pip install gdal==3.6.4 (brew does not yet house 3.7)
>
>
>
> This appears to work fine at first.  I can manipulate gdal datasets up
> until I use band.ReadAsArray().  Python throws an exception `cannot import
> name '_gdal_array' from 'osgeo`.
>
>
>
> Should this have worked?  Stack Overflow has a few instances of this
> problem and they all point to incorrect install orders, or various software
> environments interacting poorly.  But I don?t think I?m making those
> mistakes.
>
>
>
> What causes my head to spin is that, I installed rasterio, and the ?read?
> function works!  It must be via a different mechanism, but I wasn?t able to
> follow the code architecture in Github to see how they pull it off.
>
>
>
> Any advice?  Thanks --
>
> Jesse
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/faac64bf/attachment-0001.htm>

From jesse.r.meyer at nasa.gov  Wed Jun 21 10:19:58 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 21 Jun 2023 17:19:58 +0000
Subject: [gdal-dev] [EXTERNAL] [BULK] OSX 13.4 (M1 Pro) troubles using
 GDAL
In-Reply-To: <CAE8nN5Nkmj4o9HWSWoZmU1_m5UO1uvz2z889YycNKFbNNqM4fw@mail.gmail.com>
References: <9FB5FF11-FA30-44F4-9297-462D5CC68272@ndc.nasa.gov>
 <1B6BF11B-1315-47CA-B898-9A4C199DC6B4@ndc.nasa.gov>
 <CAE8nN5Nkmj4o9HWSWoZmU1_m5UO1uvz2z889YycNKFbNNqM4fw@mail.gmail.com>
Message-ID: <1224595E-92D9-4139-9376-94CFD2B2B8B7@ndc.nasa.gov>

I went spelunking in brew?s folder structure and found _gdal_array.cpython-311-darwin.so.  So I just copied it over and problem solved. Not sure why that file was left out.

Hermeneutic solutions like conda at least prevent this kind of problem from occurring.

From: Paul Harwood <runette at gmail.com>
Date: Wednesday, June 21, 2023 at 12:38 PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>
Cc: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [EXTERNAL] [BULK] OSX 13.4 (M1 Pro) troubles using GDAL

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


To state the (I hope) obvious - it must be a problem with your installation and not a general problem with GDAL on Mac - I just tried it on a fresh installation and it worked.

However - I used Conda as the virtual environment and not Brew/Venv/Pip. I find it much more consistent and easier ...

On Wed, 21 Jun 2023 at 17:05, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
I checked which functions that were being exported from python3.11/site-packages/osgeo/_gdal.cpython-311-darwin.so<http://gdal.cpython-311-darwin.so/>

And found a few IO-esque functions, including _GDALReadBlock and _Band_ReadRaster.  Calling these via the standard bindings work.  Must be how rasterio is operating under the hood.

This import line is ultimately what fails for me in test_env/lib/python3.11/site-packages/osgeo/gdal_array.py
# Import the low-level C/C++ module
if __package__ or "." in __name__:
    from . import _gdal_array

I see no _gdal_array file of any kind in /osgeo/.  Only _gdal, _gdalconst, _gnm, _ogr, and _osr .so files and the python wrappers.

I don?t know where these .so files are sourced from / generated (brew?s installation, pip?).

Hopefully this helped clarify the problem..
Jesse

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> on behalf of "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Reply-To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov<mailto:jesse.r.meyer at nasa.gov>>
Date: Tuesday, June 20, 2023 at 4:44 PM
To: "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: [EXTERNAL] [BULK] [gdal-dev] OSX 13.4 (M1 Pro) troubles using GDAL

Hi,

My GDAL installation procedure looks like:

Install python 3.11.4 from the official site
brew install gdal (this grabbed numpy v1.25, and a number of other pre-reqs, and installs 3.6.4)
python -m venv test_env
// activate test_env //
pip install numpy (installs v1.25)
pip install gdal==3.6.4 (brew does not yet house 3.7)

This appears to work fine at first.  I can manipulate gdal datasets up until I use band.ReadAsArray().  Python throws an exception `cannot import name '_gdal_array' from 'osgeo`.

Should this have worked?  Stack Overflow has a few instances of this problem and they all point to incorrect install orders, or various software environments interacting poorly.  But I don?t think I?m making those mistakes.

What causes my head to spin is that, I installed rasterio, and the ?read? function works!  It must be via a different mechanism, but I wasn?t able to follow the code architecture in Github to see how they pull it off.

Any advice?  Thanks --
Jesse

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/2648c313/attachment-0001.htm>

From bdezonia at gmail.com  Wed Jun 21 10:34:56 2023
From: bdezonia at gmail.com (Barry DeZonia)
Date: Wed, 21 Jun 2023 12:34:56 -0500
Subject: [gdal-dev] A Java SWIG question
In-Reply-To: <c984ae0b-0c07-e6a8-5a86-5d3c7e8dcd6f@spatialys.com>
References: <CAKcvfuSKY7yGw83k7OkznJBrc20wSwXx=YvUz94=Z6Y5s94Mdg@mail.gmail.com>
 <c984ae0b-0c07-e6a8-5a86-5d3c7e8dcd6f@spatialys.com>
Message-ID: <CAKcvfuTHfPfuOBH5FnOvy0S4kmOngJQ0_LvO7m7TM7-ZHGxFqA@mail.gmail.com>

Thanks Even. I will try to throw that together later. But I think my
question is much more simple. I will show a small blurb below from
swig/include/java/typemaps_java.i

Code I have now follows right here. This code might conflict with current
code because I am wanting GUInt64s to go to longs and not BigIntegers
throughout the Java api. Note the code I am at a loss as to how to write
would be " Typemaps for GUInt64 * ". In other words a C array of GUInt64's
which I'd like to translate back and forth to long[]'s. Any example code
would be appreciated.

/***************************************************
 * Typemaps for GUInt64
 ***************************************************/

%typemap(in) (GUInt64) "$1 = $input;"
%typemap(out) (GUInt64) {
    /* %typemap(out) (GUInt64) */
    $result = result;
}
%typemap(jni) (GUInt64) "jlong"
%typemap(jtype) (GUInt64) "long"
%typemap(jstype) (GUInt64) "long"
%typemap(javain) (GUInt64) "$javainput"
%typemap(javaout) (GUInt64) {
    return $jnicall;
}

I tried a similar template for GUInt64* and made "jlong" into "jlongArray"
and "long" into "long[]" in those three places above but I have no idea how
to write the (javain) and (javaout) cases.

On Wed, Jun 21, 2023 at 3:35?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Barry,
>
> it could help if you could point to a public branch in your github fork
> with your pending work
>
> Even
>
> Le 21/06/2023 ? 07:58, Barry DeZonia a ?crit :
> > Hello,
> >
> > I am trying to work on the swig java api. I've made a lot of progress
> > and am running into one last error before my code completely compiles.
> > I am getting a swig complaint when passing a java long[] to a C/C++
> > call that is expecting GUInt64*.
> >
> > Basically the error message is "long[] cannot be converted to
> > SWIGTYPE_p_GUInt64". I've been reading and googling and I can't figure
> > out how to modify typemaps_java.i to accomplish this. I think it is a
> > simple thing but I am at a loss. Does anyone have any tips?
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/287eb56f/attachment.htm>

From even.rouault at spatialys.com  Wed Jun 21 10:53:54 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Jun 2023 19:53:54 +0200
Subject: [gdal-dev] A Java SWIG question
In-Reply-To: <CAKcvfuTHfPfuOBH5FnOvy0S4kmOngJQ0_LvO7m7TM7-ZHGxFqA@mail.gmail.com>
References: <CAKcvfuSKY7yGw83k7OkznJBrc20wSwXx=YvUz94=Z6Y5s94Mdg@mail.gmail.com>
 <c984ae0b-0c07-e6a8-5a86-5d3c7e8dcd6f@spatialys.com>
 <CAKcvfuTHfPfuOBH5FnOvy0S4kmOngJQ0_LvO7m7TM7-ZHGxFqA@mail.gmail.com>
Message-ID: <2889f5ec-a06e-1e28-e39b-cb1dd49edd6c@spatialys.com>

Barry,

The file 
"${SWIG_INSTALL_PREFIX}/share/swig/{swig_version_here}/java/typemaps.i 
seems to be the place where the default mappings from unsigned long long 
to BigInteger are defined. I guess taking inspiration from those 
typemaps and overriding them could be the way to go.

An alternative I'm thinking of would be to modify MultiDimensional.i 
with something like the following (untested! just to give the idea) 
added towards its top

#ifdef SWIGJAVA

// For practical reason we want Java long to be used instead of default 
BigInteger. This approximation isn't much a problem since there is no 
real use case to be able to address values in the range [INT64_MAX, 
UINT64_MAX] for dimension sizes

typedef GInt64 MDimUInt64;

#else

typedef GUInt64 MDimUInt64;

#endif

and then replacing occurrences of GUInt64 (at least those dealing with 
dimension sizes) with MDimUInt64

Not super pretty admitedly

Even

Le 21/06/2023 ? 19:34, Barry DeZonia a ?crit?:
> Thanks Even. I will try to throw that together later. But I think my 
> question is much more simple. I will show a small blurb below from 
> swig/include/java/typemaps_java.i
>
> Code I have now follows right here. This code might conflict with 
> current code because I am wanting GUInt64s to go to longs and not 
> BigIntegers throughout the Java api. Note the code I am?at a loss as 
> to how to write would be " Typemaps for GUInt64 * ". In other words a 
> C array of GUInt64's which?I'd like to translate back and forth to 
> long[]'s. Any example code would be appreciated.
>
> /***************************************************
> ?* Typemaps for GUInt64
> ?***************************************************/
>
> %typemap(in) (GUInt64) "$1 = $input;"
> %typemap(out) (GUInt64) {
> ? ? /* %typemap(out) (GUInt64) */
> ? ? $result = result;
> }
> %typemap(jni) (GUInt64) "jlong"
> %typemap(jtype) (GUInt64) "long"
> %typemap(jstype) (GUInt64) "long"
> %typemap(javain) (GUInt64) "$javainput"
> %typemap(javaout) (GUInt64) {
> ? ? return $jnicall;
> }
>
> I tried a similar template for GUInt64* and made "jlong" into 
> "jlongArray" and "long" into "long[]" in those three places above but 
> I have no idea how to write the (javain) and (javaout) cases.

For the direction Java Array -> C Array, I guess taking inspiration from 
DEFINE_REGULAR_ARRAY_OUT(int64_t, jlong, SetLongArrayRegion); should work


>
> On Wed, Jun 21, 2023 at 3:35?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Barry,
>
>     it could help if you could point to a public branch in your github
>     fork
>     with your pending work
>
>     Even
>
>     Le 21/06/2023 ? 07:58, Barry DeZonia a ?crit?:
>     > Hello,
>     >
>     > I am trying to work on the swig java api. I've made a lot of
>     progress
>     > and am running into one last error before my code completely
>     compiles.
>     > I am getting a swig complaint when passing a java long[] to a C/C++
>     > call that is expecting GUInt64*.
>     >
>     > Basically the error message is "long[] cannot be converted to
>     > SWIGTYPE_p_GUInt64". I've been reading and googling and I can't
>     figure
>     > out how to modify typemaps_java.i to accomplish this. I think it
>     is a
>     > simple thing but I am at a loss. Does anyone have any tips?
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230621/d70882c3/attachment.htm>

From benoit.de.mezzo at oslandia.com  Fri Jun 23 02:14:00 2023
From: benoit.de.mezzo at oslandia.com (B. De Mezzo)
Date: Fri, 23 Jun 2023 11:14:00 +0200
Subject: [gdal-dev] 3D extent
Message-ID: <9d6ab5a5-4179-e486-8f2d-4253ee72cd8d@oslandia.com>

Hi,

I was looking for a solution to retrieve a 3D extent (in my case from a 
gpkg). Currently, the OGR_L_GetExtent function uses an OGREnvelope and 
when I pass a OGREnvelope3D parameter, it does not fill the Z fields.

What should be the best approach to the minZ and maxZ for a layer?

Regards.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230623/7d8ed618/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 236 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230623/7d8ed618/attachment.sig>

From even.rouault at spatialys.com  Fri Jun 23 02:25:58 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Jun 2023 11:25:58 +0200
Subject: [gdal-dev] 3D extent
In-Reply-To: <9d6ab5a5-4179-e486-8f2d-4253ee72cd8d@oslandia.com>
References: <9d6ab5a5-4179-e486-8f2d-4253ee72cd8d@oslandia.com>
Message-ID: <4006468e-dec1-5b21-8630-08a8385a31c1@spatialys.com>

Benoit,

Indeed OGR_L_GetExtent() will never fill the Z fields, since it has no 
idea they are there. So a 3D specific function would be needed.

But in the case of GeoPackage, as many/most other formats, layer extent 
metadata doesn't include the Z component either. The generic option is 
to iterate over all features and use OGR_G_GetEnvelope3D() on their 
geometry.

In the specific case of GeoPackage, you could also issue a 
ExecuteSQL("SELECT MIN(ST_MinZ(geometry_column_name)), 
MAX(ST_MaxZ(geometry_column_name)) FROM layer_name") which should be 
faster on big layers

Even

Le 23/06/2023 ? 11:14, B. De Mezzo a ?crit?:
>
> Hi,
>
> I was looking for a solution to retrieve a 3D extent (in my case from 
> a gpkg). Currently, the OGR_L_GetExtent function uses an OGREnvelope 
> and when I pass a OGREnvelope3D parameter, it does not fill the Z fields.
>
> What should be the best approach to the minZ and maxZ for a layer?
>
> Regards.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230623/32cc2932/attachment.htm>

From even.rouault at spatialys.com  Fri Jun 23 02:45:48 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Jun 2023 11:45:48 +0200
Subject: [gdal-dev] 3D extent
In-Reply-To: <2fc36c19-a27e-fe00-2b65-d5a9754425c1@oslandia.com>
References: <9d6ab5a5-4179-e486-8f2d-4253ee72cd8d@oslandia.com>
 <4006468e-dec1-5b21-8630-08a8385a31c1@spatialys.com>
 <2fc36c19-a27e-fe00-2b65-d5a9754425c1@oslandia.com>
Message-ID: <5f0626a3-d4f3-63e6-83a4-80e9c02265a4@spatialys.com>

(re-adding the list)

Le 23/06/2023 ? 11:34, B. De Mezzo a ?crit?:
>
> Thanks!
>
> I will try this sql request to handle this specific case.
>
> Do you think it could be possible to have a OGR_L_GetExtent3D() 
> function which returns, as a default implementation, the 
> OGR_L_GetExtent() result and with 0.0 (or NaN) for the Z coordinates? 
> Future works can re-implement the OGR_L_GetExtent3D driver function to 
> fit the real data.
>
That's technically possible, but at bit odd. I'd say that while at it, 
it would be much better to have a default generic implementation in the 
base OGRLayer class that does the iteration, just like the 2D version at 
https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/generic/ogrlayer.cpp#L230 
. Driver specializations could indeed come afterwards
>
> Benoit.
>
> Le 23/06/2023 ? 11:25, Even Rouault a ?crit?:
>>
>> Benoit,
>>
>> Indeed OGR_L_GetExtent() will never fill the Z fields, since it has 
>> no idea they are there. So a 3D specific function would be needed.
>>
>> But in the case of GeoPackage, as many/most other formats, layer 
>> extent metadata doesn't include the Z component either. The generic 
>> option is to iterate over all features and use OGR_G_GetEnvelope3D() 
>> on their geometry.
>>
>> In the specific case of GeoPackage, you could also issue a 
>> ExecuteSQL("SELECT MIN(ST_MinZ(geometry_column_name)), 
>> MAX(ST_MaxZ(geometry_column_name)) FROM layer_name") which should be 
>> faster on big layers
>>
>> Even
>>
>> Le 23/06/2023 ? 11:14, B. De Mezzo a ?crit?:
>>>
>>> Hi,
>>>
>>> I was looking for a solution to retrieve a 3D extent (in my case 
>>> from a gpkg). Currently, the OGR_L_GetExtent function uses an 
>>> OGREnvelope and when I pass a OGREnvelope3D parameter, it does not 
>>> fill the Z fields.
>>>
>>> What should be the best approach to the minZ and maxZ for a layer?
>>>
>>> Regards.
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230623/d653ec3b/attachment.htm>

From howard at hobu.co  Fri Jun 23 14:07:52 2023
From: howard at hobu.co (Howard Butler)
Date: Fri, 23 Jun 2023 16:07:52 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <88133984-00AF-43ED-9ABB-C7DA8E523126@hobu.co>

Howard Butler, Even Rouault, and Dan Baston held the monthly GDAL Maintainers Meeting on 06/22/2023. The following items were discussed and reported upon:

* Dan discussed recent updates to update the GDAL bindings to more closely keep track of usage reference counting so that it is more difficult to crash when using objects in the bindings. He decide it would be more productive to attempt to address some of the gotchas that are outlined in https://gdal.org/api/python_gotchas.html instead of updating the document with more explicit workarounds for gotchas.

* Dan continued update of GDAL's test suite to migrate to pytest, including efforts to provide test ordering independence, explicit definition of test fixtures, and modernizing python usage.

* As mentioned last month, Dan had undertaken documentation effort to identify and autoformat GDAL's configurations. That effort is now merged to the tree and available on the website at https://gdal.org/user/configoptions.html#list-of-configuration-options-and-where-they-apply 

* Even coordinated the libtiff 4.5.1 release. While there is some agreement on deprecating the libtiff utility programs that continue to attract security attention but not contribution, no decision has been made to initiate their deprecation in an upcoming release.

* Even added CI linting to trigger an error if a GDAL configuration option is added but it is not documented using the formalized formatting or marked hidden.

* Even provided an initial implementation of gdal_footprint, which can be used to compute a polygon describing where pixels are filled. It includes features to operate on existing mask bands - either explicit or implicit, reproject polygons, operate on overviews, and defining geometry properties like densification or number of points. Go checkout  https://github.com/OSGeo/gdal/pull/7992 to play with it and see https://github.com/rouault/gdal/blob/gdal_footprint/doc/source/programs/gdal_footprint.rst for options and usage.

* Even implemented a new algorithm for nearblack's flood fill algorithm https://github.com/OSGeo/gdal/pull/7877 which should produce better capture of concave shapes. It is not the default algorithm and must be explicitly selected as it takes a bit more computing. 

* Even explored adding a line coverage CI item, but it is still in the experimental stage.

* Allesandro reported via email that he had been working OGCAPI tickets #7679 and #7926 in an attempt to clean up CI test failures


The next GDAL Maintainers Meeting is 07/27/2023 at 9:00 EDT. Any PSC members are welcome to join by reaching out to me for an invite.

Howard

From jluis at ualg.pt  Sun Jun 25 10:38:42 2023
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Sun, 25 Jun 2023 17:38:42 +0000
Subject: [gdal-dev] Can we do Delaunay with 3D points?
Message-ID: <GVXPR04MB9926A8A43EC6FF536068F952A621A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Hi,

This (GMT Julia wrapper) works fine:

julia> D1 = mat2ds([0 0;10 0;10 10;11 10], geom=wkbMultiPoint);

julia> delaunay(D1,0.0,false)
Vector{GMTdataset} with 2 segments
Show first segment. To see other segments just type its element number. E.g. D[7]

BoundingBox: [0.0, 10.0, 0.0, 10.0]
4?2 GMTdataset{Float64, 2}
Row ?   col.1    col.2
     ? Float64  Float64
????????????????????????
   1 ?     0.0      0.0
   2 ?    10.0      0.0
   3 ?    10.0     10.0
   4 ?     0.0      0.0

But when I try with 3D points

julia> D1 = mat2ds([0 0 0;10 0 1;10 10 2;11 10 3], geom=wkbMultiPoint);

julia> delaunay(D1,0.0,false)
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
BoundingBox: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
2?3 GMTdataset{Float64, 2}
Row ?   col.1    col.2    col.3
     ? Float64  Float64  Float64
?????????????????????????????????
   1 ?     0.0      0.0      0.0
   2 ?     0.0      0.0      0.0


I?ve tried with wkbMultiPointZ, wkbMultiPoint25D and same thing.
Looked at the GDAL tests and there it also uses only 2D (a 3D test is commented).
I am doing something wrong or delaunay in GDAL is only possible with with 2D points?

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230625/14c51650/attachment.htm>

From even.rouault at spatialys.com  Sun Jun 25 11:05:27 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 25 Jun 2023 20:05:27 +0200
Subject: [gdal-dev] Can we do Delaunay with 3D points?
In-Reply-To: <GVXPR04MB9926A8A43EC6FF536068F952A621A@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <GVXPR04MB9926A8A43EC6FF536068F952A621A@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <9a0f09ef-ebff-caf0-e1d8-f601dbff3687@spatialys.com>

Joaquim,
>
> Looked at the GDAL tests and there it also uses only 2D (a 3D test is 
> commented).
>
I assume you're speaking about the PolyhedralSurface / TIN tests in 
ogr_geom.py.? The reason is that the code (and in particularly GEOS) is 
not ready for those geometry types.
>
> I am doing something wrong or delaunay in GDAL is only possible with 
> with 2D points?
>
Quick testing shows that it works with a multipoint z with a recent GEOS 
master version? (but might work with older ones perhaps)

 >>> g = ogr.CreateGeometryFromWkt("MULTIPOINT Z (0 0 10,0 1 10,1 1 12,1 
0 10)")

 >>> triangulation = g.DelaunayTriangulation()

 >>> triangulation.ExportToWkt()

'GEOMETRYCOLLECTION (POLYGON ((0 1 10,0 0 10,1 0 10,0 1 10)),POLYGON ((0 
1 10,1 0 10,1 1 12,0 1 10)))'

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230625/9f196b5b/attachment.htm>

From jluis at ualg.pt  Sun Jun 25 11:30:25 2023
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Sun, 25 Jun 2023 18:30:25 +0000
Subject: [gdal-dev] Can we do Delaunay with 3D points?
In-Reply-To: <9a0f09ef-ebff-caf0-e1d8-f601dbff3687@spatialys.com>
References: <GVXPR04MB9926A8A43EC6FF536068F952A621A@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <9a0f09ef-ebff-caf0-e1d8-f601dbff3687@spatialys.com>
Message-ID: <GVXPR04MB9926617F534D8784077EF439A621A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Thanks Even

Your example actually also works for me too.

julia> g1 = fromWKT("MULTIPOINT Z(0 0 10,0 1 10,1 1 12,1 0 10)");

julia> d = delaunay(g1,0.0,false)
Geometry: GEOMETRYCOLLECTION (POLYGON ((0 1 10,0 0 10,1 0 10 ... 10)))

julia> toWKT(d)
"GEOMETRYCOLLECTION (POLYGON ((0 1 10,0 0 10,1 0 10,0 1 10)),POLYGON ((0 1 10,1 0 10,1 1 12,0 1 10)))"

It?s when I try to extract the data into a table (a GMT type) that the problem arises.
My code, so up to me to fix it.

julia> gd2gmt(d)
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
ERROR 6: Incompatible geometry for operation
BoundingBox: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
2?3 GMTdataset{Float64, 2}
Row ?   col.1    col.2    col.3
     ? Float64  Float64  Float64
?????????????????????????????????
   1 ?     0.0      0.0      0.0

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Sunday, June 25, 2023 7:05 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Can we do Delaunay with 3D points?

Joaquim,

Looked at the GDAL tests and there it also uses only 2D (a 3D test is commented).
I assume you're speaking about the PolyhedralSurface / TIN tests in ogr_geom.py.  The reason is that the code (and in particularly GEOS) is not ready for those geometry types.

I am doing something wrong or delaunay in GDAL is only possible with with 2D points?

Quick testing shows that it works with a multipoint z with a recent GEOS master version  (but might work with older ones perhaps)

>>> g = ogr.CreateGeometryFromWkt("MULTIPOINT Z (0 0 10,0 1 10,1 1 12,1 0 10)")

>>> triangulation = g.DelaunayTriangulation()

>>> triangulation.ExportToWkt()

'GEOMETRYCOLLECTION (POLYGON ((0 1 10,0 0 10,1 0 10,0 1 10)),POLYGON ((0 1 10,1 0 10,1 1 12,0 1 10)))'

Even



--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230625/e3798345/attachment-0001.htm>

From Mikael.Rittri at carmenta.com  Mon Jun 26 02:43:40 2023
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 26 Jun 2023 09:43:40 +0000
Subject: [gdal-dev] Codepage or UTF-8 in a metadata file Filename.aux in the
 Erdas Imagine format, describing a Filename.tif
Message-ID: <HE1PR03MB30847A1B4CDE96919FFAC9409F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>

Hello list.

I have encountered a Filename.tif with an associated metadata file, Filename.aux. The .aux file can be understood by gdalinfo, which says

Driver: HFA/Erdas Imagine Images (.img)
Files: Filename.aux
       Filename.rrd
       Filename.rde

As I understand it, the .aux file is on an Erdas Imagine format intended to describe metadata for the Erdas .img format, but it can also be used to describe metadata for .tif files as in my case. (I have the Filename.rrd and the Filename.rde but not any Filename.img, so it is somewhat strange but useful that GDAL can read the .aux file directly).

Anyway, my question is: when the Filename.aux contains strings, in my case descriptions of terrain types represented by integers (part of a Raster Attribute Table), is there an established way to figure out whether the strings are stored in UTF-8, or if not, what codepage is used? In my case, the strings seem to be stored as 8-bit ASCII using the codepage 1252 (mainly for West-European alphabets), but GDAL seems to expect UTF-8 so the Swedish characters with diacritics become garbled.

I realize that if the .aux format is proprietary and has just been reverse-engineered, then maybe no-one knows the answer to this. But I am curious if anyone has had similar problems and maybe figured out a workaround. Or if there are any grounds to say that UTF-8 is mandatory in the .aux format, then my example file would be incorrect and that would also be useful to know.

Best regards,

Mikael Rittri
Carmenta Geospatial Technologies
Sweden
carmenta.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/71714aec/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jun 26 04:57:58 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 26 Jun 2023 11:57:58 +0000
Subject: [gdal-dev] Codepage or UTF-8 in a metadata file Filename.aux in
 the Erdas Imagine format, describing a Filename.tif
In-Reply-To: <HE1PR03MB30847A1B4CDE96919FFAC9409F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>
References: <HE1PR03MB30847A1B4CDE96919FFAC9409F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>
Message-ID: <AM0PR09MB3219BD9039A65A4DD93E307CFD26A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I cannot say anything about the codebase in the Erdas .aux file, but it looks that by running ?gdalinfo filename.aux? you are doing something that you are not expected to do. See some background from https://trac.osgeo.org/gdal/ticket/2529.
I am not sure what all is required for getting a set of filename.tif, filename.aux, filename.rrd, and filename.rde. Having .rde means that the overviews take more than 2 GB and they do not fit into .rrd (or .aux). That there exists both .aux and .rrd may mean that the GeoTIFF is created by some ESRI tool. With GDAL it requires this odd command to force the creation of both .aux and .rrd.
gdaladdo --config HFA_USE_RRD YES --config USE_RRD YES filename.tif
Best documentation about these configuration options is in https://gdal.org/drivers/raster/hfa.html

You wrote ?The .aux file can be understood by gdalinfo? and that is partially true. However, ?gdalinfo filename.aux? gives information only from the overviews. Read the output and you?ll see that CRS info is missing. The right command is ?gdalinfo filename.tif? and it is then searching info from the tif file and all the sidecar files.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Mikael Rittri
L?hetetty: maanantai 26. kes?kuuta 2023 12.44
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Codepage or UTF-8 in a metadata file Filename.aux in the Erdas Imagine format, describing a Filename.tif

Hello list.

I have encountered a Filename.tif with an associated metadata file, Filename.aux. The .aux file can be understood by gdalinfo, which says

Driver: HFA/Erdas Imagine Images (.img)
Files: Filename.aux
       Filename.rrd
       Filename.rde

As I understand it, the .aux file is on an Erdas Imagine format intended to describe metadata for the Erdas .img format, but it can also be used to describe metadata for .tif files as in my case. (I have the Filename.rrd and the Filename.rde but not any Filename.img, so it is somewhat strange but useful that GDAL can read the .aux file directly).

Anyway, my question is: when the Filename.aux contains strings, in my case descriptions of terrain types represented by integers (part of a Raster Attribute Table), is there an established way to figure out whether the strings are stored in UTF-8, or if not, what codepage is used? In my case, the strings seem to be stored as 8-bit ASCII using the codepage 1252 (mainly for West-European alphabets), but GDAL seems to expect UTF-8 so the Swedish characters with diacritics become garbled.

I realize that if the .aux format is proprietary and has just been reverse-engineered, then maybe no-one knows the answer to this. But I am curious if anyone has had similar problems and maybe figured out a workaround. Or if there are any grounds to say that UTF-8 is mandatory in the .aux format, then my example file would be incorrect and that would also be useful to know.

Best regards,

Mikael Rittri
Carmenta Geospatial Technologies
Sweden
carmenta.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/8e81c3da/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jun 26 05:05:30 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jun 2023 14:05:30 +0200
Subject: [gdal-dev] Codepage or UTF-8 in a metadata file Filename.aux in
 the Erdas Imagine format, describing a Filename.tif
In-Reply-To: <HE1PR03MB30847A1B4CDE96919FFAC9409F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>
References: <HE1PR03MB30847A1B4CDE96919FFAC9409F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>
Message-ID: <168deb77-336f-6d87-465f-c616ded52c70@spatialys.com>

Mikael,

to my surprise, the HFA format is actually published at 
https://hexagongeospatial.fluidtopics.net/r/fH0o7KrMKUViXGUeoilQuA/5DlRUpslzb6NK6uTz98KSg 
. Not sure if it is "new" or had already been available. From a quick 
look, it doesn't mention anything about string encoding.

My intuition would be that the encoding would be whatever the one of the 
machine generated the file was, but perhaps that's a fixed one. You 
could potentially try to ask Hexagon support about that.

GDAL itself makes not that many assumptions about the encoding, although 
it tries to expose as UTF-8 as much as possible (and recode to UTF-8 
when it knows the source encoding), otherwise it will present strings as 
they are, hoping for the best. But language bindings might make stronger 
assumptions and indeed misbehave when UTF-8 is not encountered

Even

Le 26/06/2023 ? 11:43, Mikael Rittri a ?crit?:
>
> Hello list.
>
> I have encountered a Filename.tif with an associated metadata file, 
> Filename.aux. The .aux file can be understood by gdalinfo, which says
>
> Driver: HFA/Erdas Imagine Images (.img)
>
> Files: Filename.aux
>
> ?????? Filename.rrd
>
> ?????? Filename.rde
>
> As I understand it, the .aux file is on an Erdas Imagine format 
> intended to describe metadata for the Erdas .img format, but it can 
> also be used to describe metadata for .tif files as in my case. (I 
> have the Filename.rrd and the Filename.rde but not any Filename.img, 
> so it is somewhat strange but useful that GDAL can read the .aux file 
> directly).
>
> Anyway, my question is: when the Filename.aux contains strings, in my 
> case descriptions of terrain types represented by integers (part of a 
> Raster Attribute Table), is there an established way to figure out 
> whether the strings are stored in UTF-8, or if not, what codepage is 
> used? In my case, the strings seem to be stored as 8-bit ASCII using 
> the codepage 1252 (mainly for West-European alphabets), but GDAL seems 
> to expect UTF-8 so the Swedish characters with diacritics become garbled.
>
> I realize that if the .aux format is proprietary and has just been 
> reverse-engineered, then maybe no-one knows the answer to this. But I 
> am curious if anyone has had similar problems and maybe figured out a 
> workaround. Or if there are any grounds to say that UTF-8 is mandatory 
> in the .aux format, then my example file would be incorrect and that 
> would also be useful to know.
>
> Best regards,
>
> Mikael Rittri
>
> Carmenta Geospatial Technologies
>
> Sweden
>
> carmenta.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/8de89a9f/attachment.htm>

From Mikael.Rittri at carmenta.com  Mon Jun 26 06:25:23 2023
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 26 Jun 2023 13:25:23 +0000
Subject: [gdal-dev] Codepage or UTF-8 in a metadata file Filename.aux in
 the Erdas Imagine format, describing a Filename.tif
In-Reply-To: <168deb77-336f-6d87-465f-c616ded52c70@spatialys.com>
References: <HE1PR03MB30847A1B4CDE96919FFAC9409F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>
 <168deb77-336f-6d87-465f-c616ded52c70@spatialys.com>
Message-ID: <HE1PR03MB30844E692699DF518E4393419F26A@HE1PR03MB3084.eurprd03.prod.outlook.com>

Thank you, Even and Jukka.

Jukka: If the .rrd and .rde files just contain overviews, then they are irrelevant for my purpose. The .tif file itself doesn?t give me problems, but I want to extract its Raster Attribute Table, and it seems that I can read it from the .aux file via GDAL whether or not the .rrd and .rde files are present. That?s good to know. (I mean, it?s good for me to know which sidecar files I can ignore since there are a lot of them: some Erdas ones and some Esri ones and some that I don?t recognize at all.)

Even: Thanks for the link to the format description. Since I, too, fail to find anything about character encoding there, I suppose the format is neutral about that, and then GDAL just retrieves the byte sequences as they are. So I ought to make my software more robust when handling the retrieved strings, which is also good to know.

Regards,

Mikael Rittri
Carmenta Geospatial Technologies
Sweden
carmenta.com

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Monday, 26 June 2023 14:06
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Codepage or UTF-8 in a metadata file Filename.aux in the Erdas Imagine format, describing a Filename.tif


This message was sent from outside of Carmenta. Please do not click links or open attachments unless you recognize the source of this email and know the content is safe.



Mikael,

to my surprise, the HFA format is actually published at https://hexagongeospatial.fluidtopics.net/r/fH0o7KrMKUViXGUeoilQuA/5DlRUpslzb6NK6uTz98KSg . Not sure if it is "new" or had already been available. From a quick look, it doesn't mention anything about string encoding.

My intuition would be that the encoding would be whatever the one of the machine generated the file was, but perhaps that's a fixed one. You could potentially try to ask Hexagon support about that.

GDAL itself makes not that many assumptions about the encoding, although it tries to expose as UTF-8 as much as possible (and recode to UTF-8 when it knows the source encoding), otherwise it will present strings as they are, hoping for the best. But language bindings might make stronger assumptions and indeed misbehave when UTF-8 is not encountered

Even
Le 26/06/2023 ? 11:43, Mikael Rittri a ?crit :
Hello list.

I have encountered a Filename.tif with an associated metadata file, Filename.aux. The .aux file can be understood by gdalinfo, which says

Driver: HFA/Erdas Imagine Images (.img)
Files: Filename.aux
       Filename.rrd
       Filename.rde

As I understand it, the .aux file is on an Erdas Imagine format intended to describe metadata for the Erdas .img format, but it can also be used to describe metadata for .tif files as in my case. (I have the Filename.rrd and the Filename.rde but not any Filename.img, so it is somewhat strange but useful that GDAL can read the .aux file directly).

Anyway, my question is: when the Filename.aux contains strings, in my case descriptions of terrain types represented by integers (part of a Raster Attribute Table), is there an established way to figure out whether the strings are stored in UTF-8, or if not, what codepage is used? In my case, the strings seem to be stored as 8-bit ASCII using the codepage 1252 (mainly for West-European alphabets), but GDAL seems to expect UTF-8 so the Swedish characters with diacritics become garbled.

I realize that if the .aux format is proprietary and has just been reverse-engineered, then maybe no-one knows the answer to this. But I am curious if anyone has had similar problems and maybe figured out a workaround. Or if there are any grounds to say that UTF-8 is mandatory in the .aux format, then my example file would be incorrect and that would also be useful to know.

Best regards,

Mikael Rittri
Carmenta Geospatial Technologies
Sweden
carmenta.com






_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/694b8089/attachment-0001.htm>

From shayanghofrany at gmail.com  Mon Jun 26 09:38:14 2023
From: shayanghofrany at gmail.com (Shayan Ghofrany)
Date: Mon, 26 Jun 2023 12:38:14 -0400
Subject: [gdal-dev] Multi-threaded GDALPolygonize C++
Message-ID: <CA+-QNNiFvj_wqXn-FtAx0vbr+svFDvzYvA3LDGcWgNgouuZTDg@mail.gmail.com>

Good afternoon everyone,

I'm new to the mailing list, so if my question is not formatted correctly
please let me know.

I am attempting to polygonize a raster file by first chunking it into
smaller pieces and then using multi-threaded to polygonize those chunks
simultaneously. I often come across Disk I/O errors which makes me think
that what I want to do is not necessarily how GDALPolygonize should be
used. I was wondering if anyone has attempted something similar and whether
there are public examples available that I could look into.

Thanks for your time,

Shayan Ghofrany
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/04f4cd2e/attachment.htm>

From even.rouault at spatialys.com  Mon Jun 26 10:04:34 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Jun 2023 19:04:34 +0200
Subject: [gdal-dev] Multi-threaded GDALPolygonize C++
In-Reply-To: <CA+-QNNiFvj_wqXn-FtAx0vbr+svFDvzYvA3LDGcWgNgouuZTDg@mail.gmail.com>
References: <CA+-QNNiFvj_wqXn-FtAx0vbr+svFDvzYvA3LDGcWgNgouuZTDg@mail.gmail.com>
Message-ID: <cb38058f-440e-13cf-c893-00c249db700d@spatialys.com>

Shayan,

make sure to read https://gdal.org/user/multithreading.html . I suspect 
you use the same GDAL Dataset or RasterBand object from multiple 
threads, which isn't allowed

Even

Le 26/06/2023 ? 18:38, Shayan Ghofrany a ?crit?:
> Good afternoon everyone,
>
> I'm new to the mailing list, so if my question is not formatted 
> correctly please let me know.
>
> I am attempting to polygonize a raster file by first chunking it into 
> smaller pieces?and then using multi-threaded to polygonize those 
> chunks simultaneously. I often come across Disk I/O errors which makes 
> me think that what I want to do is not necessarily how GDALPolygonize 
> should be used. I was wondering if anyone has attempted something 
> similar and whether there are public examples available that I could 
> look into.
>
> Thanks for your time,
>
> Shayan Ghofrany
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From shayanghofrany at gmail.com  Mon Jun 26 12:11:16 2023
From: shayanghofrany at gmail.com (Shayan Ghofrany)
Date: Mon, 26 Jun 2023 15:11:16 -0400
Subject: [gdal-dev] gdal-dev Digest, Vol 229, Issue 28
In-Reply-To: <mailman.3.1687806002.1501.gdal-dev@lists.osgeo.org>
References: <mailman.3.1687806002.1501.gdal-dev@lists.osgeo.org>
Message-ID: <CA+-QNNhnGZtboh1fX9sfPMWceHGYJex1ic--SmqJ+5P3Rxx+cg@mail.gmail.com>

Thanks for the response,

I am reading each raster chunk into its own Dataset within the function and
also creating its own output GPKG file. From what I can tell there are no
shared Datasets between the separate threads. The code in the function can
be found in this Github issue which I believe you also helped resolve.
https://github.com/OSGeo/gdal/issues/8001

On Mon, Jun 26, 2023 at 3:00?PM <gdal-dev-request at lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Multi-threaded GDALPolygonize C++ (Shayan Ghofrany)
>    2. Re: Multi-threaded GDALPolygonize C++ (Even Rouault)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 26 Jun 2023 12:38:14 -0400
> From: Shayan Ghofrany <shayanghofrany at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Multi-threaded GDALPolygonize C++
> Message-ID:
>         <
> CA+-QNNiFvj_wqXn-FtAx0vbr+svFDvzYvA3LDGcWgNgouuZTDg at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Good afternoon everyone,
>
> I'm new to the mailing list, so if my question is not formatted correctly
> please let me know.
>
> I am attempting to polygonize a raster file by first chunking it into
> smaller pieces and then using multi-threaded to polygonize those chunks
> simultaneously. I often come across Disk I/O errors which makes me think
> that what I want to do is not necessarily how GDALPolygonize should be
> used. I was wondering if anyone has attempted something similar and whether
> there are public examples available that I could look into.
>
> Thanks for your time,
>
> Shayan Ghofrany
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/04f4cd2e/attachment-0001.htm
> >
>
> ------------------------------
>
> Message: 2
> Date: Mon, 26 Jun 2023 19:04:34 +0200
> From: Even Rouault <even.rouault at spatialys.com>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Multi-threaded GDALPolygonize C++
> Message-ID: <cb38058f-440e-13cf-c893-00c249db700d at spatialys.com>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
> Shayan,
>
> make sure to read https://gdal.org/user/multithreading.html . I suspect
> you use the same GDAL Dataset or RasterBand object from multiple
> threads, which isn't allowed
>
> Even
>
> Le 26/06/2023 ? 18:38, Shayan Ghofrany a ?crit?:
> > Good afternoon everyone,
> >
> > I'm new to the mailing list, so if my question is not formatted
> > correctly please let me know.
> >
> > I am attempting to polygonize a raster file by first chunking it into
> > smaller pieces?and then using multi-threaded to polygonize those
> > chunks simultaneously. I often come across Disk I/O errors which makes
> > me think that what I want to do is not necessarily how GDALPolygonize
> > should be used. I was wondering if anyone has attempted something
> > similar and whether there are public examples available that I could
> > look into.
> >
> > Thanks for your time,
> >
> > Shayan Ghofrany
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>
> End of gdal-dev Digest, Vol 229, Issue 28
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230626/812a7720/attachment.htm>

From andrew.terry at centremaps.co.uk  Tue Jun 27 04:00:26 2023
From: andrew.terry at centremaps.co.uk (Andrew Terry)
Date: Tue, 27 Jun 2023 11:00:26 +0000
Subject: [gdal-dev] sozip and tile index
Message-ID: <AM6PR01MB49461AF6E7F00F4CE31BCCBCA127A@AM6PR01MB4946.eurprd01.prod.exchangelabs.com>

Hi,

Is it possible to include a virtual file system file in a ogrtindex (or alternative?) vector file index?

My ideal use case is to include sozip enabled or just plain zip files.

At the moment the files are one shp per zip which makes it easy to swap out changed data.

Thanks

Andy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230627/19c3ac85/attachment.htm>

From vijay.kurhade at gmail.com  Tue Jun 27 09:40:18 2023
From: vijay.kurhade at gmail.com (Vijay Kurhade (via Google Drive))
Date: Tue, 27 Jun 2023 16:40:18 +0000
Subject: [gdal-dev] Folder shared with you: "GDal Community"
References: <132a5c2c-a66d-4476-b4e0-70d373f09b34@docs-share.google.com>
Message-ID: <autogen-java-5ae1c8c9-ab27-4f90-8cff-41b4ba1ff780@google.com>

I've shared an item with you:

GDal Community
https://drive.google.com/drive/folders/1xylPKQy0uJM3zbcqyxdvdSnxCaFh8lox?usp=sharing&invite=COKSqLgO&ts=649b10f2

It's not an attachment -- it's stored online. To open this item, just click  
the link above.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230627/be9f54ff/attachment-0001.htm>

From vijay.kurhade at gmail.com  Tue Jun 27 09:44:04 2023
From: vijay.kurhade at gmail.com (Vijay Kurhade)
Date: Tue, 27 Jun 2023 22:14:04 +0530
Subject: [gdal-dev] Need help with correct projection of ShapeFile
Message-ID: <CAEcx6ha4uVM9OSg7Tx38ynBnNJHCaLFuYbAGXzdCA8Fpcs63EA@mail.gmail.com>

Hello;

Please refer to

Files shared on :
https://drive.google.com/drive/folders/1xylPKQy0uJM3zbcqyxdvdSnxCaFh8lox?usp=drive_link


Problem statement is : Doc for Rob : Gdal Steps.docx

Input file is : DWG file which needs to be converted to DXF
                     or
                    Already converted DXF file is shared

Thanks in Advance.

Regards-
Vijay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230627/6da6f600/attachment.htm>

From gdt at lexort.com  Tue Jun 27 09:55:09 2023
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 27 Jun 2023 12:55:09 -0400
Subject: [gdal-dev] Folder shared with you: "GDal Community"
In-Reply-To: <autogen-java-5ae1c8c9-ab27-4f90-8cff-41b4ba1ff780@google.com>
 (Vijay Kurhade's message of "Tue, 27 Jun 2023 16:40:18 +0000")
References: <132a5c2c-a66d-4476-b4e0-70d373f09b34@docs-share.google.com>
 <autogen-java-5ae1c8c9-ab27-4f90-8cff-41b4ba1ff780@google.com>
Message-ID: <rmipm5gn8uq.fsf@s1.lexort.com>

"Vijay Kurhade (via Google Drive)" <vijay.kurhade at gmail.com> writes:

> I've shared an item with you:
>
> GDal Community
> https://drive.google.com/drive/folders/1xylPKQy0uJM3zbcqyxdvdSnxCaFh8lox?usp=sharing&invite=COKSqLgO&ts=649b10f2
>
> It's not an attachment -- it's stored online. To open this item, just
> click the link above.

Possibly legit, but this looks like a phishing attack.

Vijay: Normal practice is to ask your question in plain text in the body
of an email, rather than asking people to download things.  Personally,
when I see "download this from <advertising company> to read my
question", I just hit delete.

Greg

From public at postholer.com  Tue Jun 27 09:58:32 2023
From: public at postholer.com (Scott)
Date: Tue, 27 Jun 2023 09:58:32 -0700
Subject: [gdal-dev] Folder shared with you: "GDal Community"
In-Reply-To: <rmipm5gn8uq.fsf@s1.lexort.com>
References: <132a5c2c-a66d-4476-b4e0-70d373f09b34@docs-share.google.com>
 <autogen-java-5ae1c8c9-ab27-4f90-8cff-41b4ba1ff780@google.com>
 <rmipm5gn8uq.fsf@s1.lexort.com>
Message-ID: <de26a506-4120-e399-b867-98ea8d7a23e7@postholer.com>

It looks like the original requester is named "Rob" and Vijay is doing 
it for Rob and Vijay wants us to do it for him.

Delegating his workload it seems...

On 6/27/23 09:55, Greg Troxel wrote:
> "Vijay Kurhade (via Google Drive)" <vijay.kurhade at gmail.com> writes:
> 
>> I've shared an item with you:
>>
>> GDal Community
>> https://drive.google.com/drive/folders/1xylPKQy0uJM3zbcqyxdvdSnxCaFh8lox?usp=sharing&invite=COKSqLgO&ts=649b10f2
>>
>> It's not an attachment -- it's stored online. To open this item, just
>> click the link above.
> 
> Possibly legit, but this looks like a phishing attack.
> 
> Vijay: Normal practice is to ask your question in plain text in the body
> of an email, rather than asking people to download things.  Personally,
> when I see "download this from <advertising company> to read my
> question", I just hit delete.
> 
> Greg
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From vijay.kurhade at gmail.com  Tue Jun 27 09:59:35 2023
From: vijay.kurhade at gmail.com (Vijay Kurhade)
Date: Tue, 27 Jun 2023 22:29:35 +0530
Subject: [gdal-dev] Folder shared with you: "GDal Community"
In-Reply-To: <rmipm5gn8uq.fsf@s1.lexort.com>
References: <132a5c2c-a66d-4476-b4e0-70d373f09b34@docs-share.google.com>
 <autogen-java-5ae1c8c9-ab27-4f90-8cff-41b4ba1ff780@google.com>
 <rmipm5gn8uq.fsf@s1.lexort.com>
Message-ID: <CAEcx6hbYwErnQ6o727VCwf-RD3eHtGq=DxOOTAxYHd0Pa5ziOQ@mail.gmail.com>

Thanks a lot Greg. Your point is valid and apologise to anyone who may
think this as an phishing attack or wrong practice at my end.


I have shared it on drive because attachments are not allowed on Community
emails

On Tue, Jun 27, 2023 at 10:25?PM Greg Troxel <gdt at lexort.com> wrote:

> "Vijay Kurhade (via Google Drive)" <vijay.kurhade at gmail.com> writes:
>
> > I've shared an item with you:
> >
> > GDal Community
> >
> https://drive.google.com/drive/folders/1xylPKQy0uJM3zbcqyxdvdSnxCaFh8lox?usp=sharing&invite=COKSqLgO&ts=649b10f2
> >
> > It's not an attachment -- it's stored online. To open this item, just
> > click the link above.
>
> Possibly legit, but this looks like a phishing attack.
>
> Vijay: Normal practice is to ask your question in plain text in the body
> of an email, rather than asking people to download things.  Personally,
> when I see "download this from <advertising company> to read my
> question", I just hit delete.
>
> Greg
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230627/ed1f3b79/attachment.htm>

From vijay.kurhade at gmail.com  Tue Jun 27 10:02:39 2023
From: vijay.kurhade at gmail.com (Vijay Kurhade)
Date: Tue, 27 Jun 2023 22:32:39 +0530
Subject: [gdal-dev] Folder shared with you: "GDal Community"
In-Reply-To: <de26a506-4120-e399-b867-98ea8d7a23e7@postholer.com>
References: <132a5c2c-a66d-4476-b4e0-70d373f09b34@docs-share.google.com>
 <autogen-java-5ae1c8c9-ab27-4f90-8cff-41b4ba1ff780@google.com>
 <rmipm5gn8uq.fsf@s1.lexort.com>
 <de26a506-4120-e399-b867-98ea8d7a23e7@postholer.com>
Message-ID: <CAEcx6hb1UzBu826KEMJDgaqMt=7Sh1kHc-aym-vJ69nf67MrEg@mail.gmail.com>

Scott;

Please dont think it that way; Rob tried to help me with my request
earlier; I did try the steps he mentioned but my result is somehow not what
Rob managed to achieve so clearly I am missing a step or two.

I am more than grateful to Rob for all his efforts and help; at same time
every one here who can help me out on this issue I am facing.




On Tue, Jun 27, 2023 at 10:28?PM Scott <public at postholer.com> wrote:

> It looks like the original requester is named "Rob" and Vijay is doing
> it for Rob and Vijay wants us to do it for him.
>
> Delegating his workload it seems...
>
> On 6/27/23 09:55, Greg Troxel wrote:
> > "Vijay Kurhade (via Google Drive)" <vijay.kurhade at gmail.com> writes:
> >
> >> I've shared an item with you:
> >>
> >> GDal Community
> >>
> https://drive.google.com/drive/folders/1xylPKQy0uJM3zbcqyxdvdSnxCaFh8lox?usp=sharing&invite=COKSqLgO&ts=649b10f2
> >>
> >> It's not an attachment -- it's stored online. To open this item, just
> >> click the link above.
> >
> > Possibly legit, but this looks like a phishing attack.
> >
> > Vijay: Normal practice is to ask your question in plain text in the body
> > of an email, rather than asking people to download things.  Personally,
> > when I see "download this from <advertising company> to read my
> > question", I just hit delete.
> >
> > Greg
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230627/a4c2bbda/attachment.htm>

From patrick.mckendree.young at gmail.com  Wed Jun 28 08:18:41 2023
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 28 Jun 2023 09:18:41 -0600
Subject: [gdal-dev] ogr2ogr sqlite dialect and fgb format
Message-ID: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>

Hi,

I'm playing around with the gdb dataset

https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d

and getting errors starting with gdal 3.5 when I try to use the sqlite
dialect:

ogr2ogr -f GeoJSONSeq -sql "select shape from roadbed where source_id =
13350003311" -dialect sqlite /vsistdout/
NYC_DoITT_Planimetric_OpenData.gdb.zip

ERROR 6: Unsupported field type for range domain: esriFieldTypeDate
ERROR 1: Cannot create virtual table for layer 'roadbed' : CREATE VIRTUAL:
invalid SQL statement : CREATE TABLE "roadbed"("SOURCE_ID"
FLOAT,"FEATURE_CODE"
INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME,"SUB_FEATURE_CODE"
INTEGER,"STATUS"
VARCHAR(16)_BEGIN_DOMAIN_NAME_645374617475735F31_END_DOMAIN_NAME,"SHAPE_Length"
FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR HIDDEN,"SHAPE"
BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCHAR, OGR_NATIVE_MEDIA_TYPE
VARCHAR)
ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select shape from roadbed
where source_id = 13350003311):
  no such table: roadbed

This command works in GDAL 3.4 (and also works with the ogr sql dialect); I
was wanting to use the sqlite dialect so that i can use CASE statements.
Is this a bug or expected?

Thanks,
Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230628/b6d91724/attachment.htm>

From public at postholer.com  Wed Jun 28 08:28:52 2023
From: public at postholer.com (Scott)
Date: Wed, 28 Jun 2023 08:28:52 -0700
Subject: [gdal-dev] ogr2ogr sqlite dialect and fgb format
In-Reply-To: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>
References: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>
Message-ID: <a1913df7-6a99-0ea9-8137-924ed17331d7@postholer.com>

The last line says:
    no such table: roadbed

See if it exists in the gdb:

ogrinfo dataset.gdb

On 6/28/23 08:18, Patrick Young wrote:
> Hi,
> 
> I'm playing around with the gdb dataset
> 
> https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d 
> <https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d>
> 
> and getting errors starting with gdal 3.5 when I try to use the sqlite 
> dialect:
> 
> ogr2ogr -f GeoJSONSeq -sql "select shape from roadbed where source_id = 
> 13350003311" -dialect sqlite /vsistdout/ 
> NYC_DoITT_Planimetric_OpenData.gdb.zip
> 
> ERROR 6: Unsupported field type for range domain: esriFieldTypeDate
> ERROR 1: Cannot create virtual table for layer 'roadbed' : CREATE 
> VIRTUAL: invalid SQL statement : CREATE TABLE "roadbed"("SOURCE_ID" 
> FLOAT,"FEATURE_CODE" 
> INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME,"SUB_FEATURE_CODE" INTEGER,"STATUS" VARCHAR(16)_BEGIN_DOMAIN_NAME_645374617475735F31_END_DOMAIN_NAME,"SHAPE_Length" FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR HIDDEN,"SHAPE" BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCHAR, OGR_NATIVE_MEDIA_TYPE VARCHAR)
> ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select shape from roadbed 
> where source_id = 13350003311):
>  ? no such table: roadbed
> 
> This command works in GDAL 3.4 (and also works with the ogr sql 
> dialect); I was wanting to use the sqlite dialect so that i can use CASE 
> statements.? Is this a bug or expected?
> 
> Thanks,
> Patrick
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From patrick.mckendree.young at gmail.com  Wed Jun 28 08:38:05 2023
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 28 Jun 2023 09:38:05 -0600
Subject: [gdal-dev] ogr2ogr sqlite dialect and fgb format
In-Reply-To: <a1913df7-6a99-0ea9-8137-924ed17331d7@postholer.com>
References: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>
 <a1913df7-6a99-0ea9-8137-924ed17331d7@postholer.com>
Message-ID: <CADXYQQ7--HdJqCoMZOYyyQHBtzRNvFPwDU7PPNnvwcuo83VHrQ@mail.gmail.com>

The table exists, the SQL emitted to create the virtual table is the issue
from the looks of it.  The command works as is in gdal 3.4 FWIW

On Wed, Jun 28, 2023, 9:29 AM Scott <public at postholer.com> wrote:

> The last line says:
>     no such table: roadbed
>
> See if it exists in the gdb:
>
> ogrinfo dataset.gdb
>
> On 6/28/23 08:18, Patrick Young wrote:
> > Hi,
> >
> > I'm playing around with the gdb dataset
> >
> > https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d
> > <https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d
> >
> >
> > and getting errors starting with gdal 3.5 when I try to use the sqlite
> > dialect:
> >
> > ogr2ogr -f GeoJSONSeq -sql "select shape from roadbed where source_id =
> > 13350003311" -dialect sqlite /vsistdout/
> > NYC_DoITT_Planimetric_OpenData.gdb.zip
> >
> > ERROR 6: Unsupported field type for range domain: esriFieldTypeDate
> > ERROR 1: Cannot create virtual table for layer 'roadbed' : CREATE
> > VIRTUAL: invalid SQL statement : CREATE TABLE "roadbed"("SOURCE_ID"
> > FLOAT,"FEATURE_CODE"
> >
> INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME,"SUB_FEATURE_CODE"
> INTEGER,"STATUS"
> VARCHAR(16)_BEGIN_DOMAIN_NAME_645374617475735F31_END_DOMAIN_NAME,"SHAPE_Length"
> FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR HIDDEN,"SHAPE"
> BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCHAR, OGR_NATIVE_MEDIA_TYPE
> VARCHAR)
> > ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select shape from roadbed
> > where source_id = 13350003311):
> >    no such table: roadbed
> >
> > This command works in GDAL 3.4 (and also works with the ogr sql
> > dialect); I was wanting to use the sqlite dialect so that i can use CASE
> > statements.  Is this a bug or expected?
> >
> > Thanks,
> > Patrick
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230628/30b59209/attachment.htm>

From patrick.mckendree.young at gmail.com  Wed Jun 28 08:50:55 2023
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 28 Jun 2023 09:50:55 -0600
Subject: [gdal-dev] ogr2ogr sqlite dialect and fgb format
In-Reply-To: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>
References: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>
Message-ID: <CADXYQQ7AxruHsFk2tkWiSP3a_yOwJz31kacPJPu9WQVY_RUarg@mail.gmail.com>

Here's the CREATE TABLE from 3.4:

OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "roadbed"("SOURCE_ID"
FLOAT,"FEATURE_CODE" INTEGER_INT16,"SUB_FEATURE_CODE" INTEGER,"STATUS"
VARCHAR(16),"SHAPE_Length" FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR
HIDDEN,"SHAPE" BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCH
AR, OGR_NATIVE_MEDIA_TYPE VARCHAR))

In the 3.5+ versions, sqlite is angry about the
INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME

On Wed, Jun 28, 2023 at 9:18?AM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> Hi,
>
> I'm playing around with the gdb dataset
>
> https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d
>
> and getting errors starting with gdal 3.5 when I try to use the sqlite
> dialect:
>
> ogr2ogr -f GeoJSONSeq -sql "select shape from roadbed where source_id =
> 13350003311" -dialect sqlite /vsistdout/
> NYC_DoITT_Planimetric_OpenData.gdb.zip
>
> ERROR 6: Unsupported field type for range domain: esriFieldTypeDate
> ERROR 1: Cannot create virtual table for layer 'roadbed' : CREATE VIRTUAL:
> invalid SQL statement : CREATE TABLE "roadbed"("SOURCE_ID"
> FLOAT,"FEATURE_CODE"
> INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME,"SUB_FEATURE_CODE"
> INTEGER,"STATUS"
> VARCHAR(16)_BEGIN_DOMAIN_NAME_645374617475735F31_END_DOMAIN_NAME,"SHAPE_Length"
> FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR HIDDEN,"SHAPE"
> BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCHAR, OGR_NATIVE_MEDIA_TYPE
> VARCHAR)
> ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select shape from roadbed
> where source_id = 13350003311):
>   no such table: roadbed
>
> This command works in GDAL 3.4 (and also works with the ogr sql dialect);
> I was wanting to use the sqlite dialect so that i can use CASE statements.
> Is this a bug or expected?
>
> Thanks,
> Patrick
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230628/3b4e92cc/attachment.htm>

From philippe.ghesquiere at airbus.com  Wed Jun 28 09:56:37 2023
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Wed, 28 Jun 2023 18:56:37 +0200
Subject: [gdal-dev] Converting VPF vector set into shapefile (under Windows
 environment)
Message-ID: <CAAes_OFQNRurF8M-Wzhn8_OfUtr1f6XsoKazdHqfhgzKRVw1GQ@mail.gmail.com>

Dear all,

I would like to convert a VPF vector set ( OGDI driver
<https://gdal.org/drivers/vector/ogdi.html>  ) into shapefile format.

My environment is  as follow:

   - windows 10
   - GDAL environment installed with QGIS 3.26.0 : *GDAL 3.5.0, released
   2022/05/10*
   - the OGDI driver is available
   ogrinfo --format ogr_ogdi
   Format Details:
     Short Name: OGR_OGDI
     Long Name: OGDI Vectors (VPF, VMAP, DCW)
     Supports: Vector
     Help Topic: drivers/vector/ogdi.html
     Supports: Open() - Open existing dataset.
     Supports: Multiple vector layers.

To make sure I have a supported database, I downloaded the
gdalautotest suite.

After reading the OGDI driver <https://gdal.org/drivers/vector/ogdi.html>
page, I modified the example for a  windows environment. I tried the
following command

ogrinfo
gltp:/vrf/C:\Download\GDAL\gdalautotest-3.6.4\ogr\data\vm2alv2_texash\texash

I observe :


   - nothing happens (no warning or error message)
   - activating debug mode does not give any extra information

As mentioned in the  OGDI driver
<https://gdal.org/drivers/vector/ogdi.html> page,
the '*texash/*' directory is at the same level as the *dht *and *lat *files.

Do you have any idea for a correct "windows-like" path I should use ?

Thanks

Philippe
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230628/34208c13/attachment-0001.htm>

From public at postholer.com  Wed Jun 28 10:33:22 2023
From: public at postholer.com (Scott)
Date: Wed, 28 Jun 2023 10:33:22 -0700
Subject: [gdal-dev] ogr2ogr sqlite dialect and fgb format
In-Reply-To: <CADXYQQ7AxruHsFk2tkWiSP3a_yOwJz31kacPJPu9WQVY_RUarg@mail.gmail.com>
References: <CADXYQQ7a-5FcyapBtcb6WcW1e7613C=5uBPA5pXTeVL0VvZbTA@mail.gmail.com>
 <CADXYQQ7AxruHsFk2tkWiSP3a_yOwJz31kacPJPu9WQVY_RUarg@mail.gmail.com>
Message-ID: <7860a775-bc37-0a56-0e50-e386fc71d3c5@postholer.com>

There may be a way to address the underlying issue, I don't know what it 
is. In lieu of that, here's a work around in 2 steps in 3.7.

Create a gpkg:

ogr2ogr -sql "select * from roadbed where source_id = 13350003311" 
tmp.gpkg /vsizip/NYC_DoITT_Planimetric_OpenData.gdb.zip

Then do it with -dialect sqlite on the gpkg:

ogr2ogr -f GeoJSONseq -sql "select shape from roadbed where source_id = 
13350003311" -dialect sqlite /vsistdout/ tmp.gpkg | more




On 6/28/23 08:50, Patrick Young wrote:
> Here's the CREATE TABLE from 3.4:
> 
> OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "roadbed"("SOURCE_ID" 
> FLOAT,"FEATURE_CODE" INTEGER_INT16,"SUB_FEATURE_CODE" INTEGER,"STATUS" 
> VARCHAR(16),"SHAPE_Length" FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR 
> HIDDEN,"SHAPE" BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCH
> AR, OGR_NATIVE_MEDIA_TYPE VARCHAR))
> 
> In the 3.5+ versions, sqlite is angry about the 
> INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME
> 
> On Wed, Jun 28, 2023 at 9:18?AM Patrick Young 
> <patrick.mckendree.young at gmail.com 
> <mailto:patrick.mckendree.young at gmail.com>> wrote:
> 
>     Hi,
> 
>     I'm playing around with the gdb dataset
> 
>     https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d <https://data.cityofnewyork.us/Transportation/NYC-Planimetrics/wt4d-p43d>
> 
>     and getting errors starting with gdal 3.5 when I try to use the
>     sqlite dialect:
> 
>     ogr2ogr -f GeoJSONSeq -sql "select shape from roadbed where
>     source_id = 13350003311" -dialect sqlite /vsistdout/
>     NYC_DoITT_Planimetric_OpenData.gdb.zip
> 
>     ERROR 6: Unsupported field type for range domain: esriFieldTypeDate
>     ERROR 1: Cannot create virtual table for layer 'roadbed' : CREATE
>     VIRTUAL: invalid SQL statement : CREATE TABLE "roadbed"("SOURCE_ID"
>     FLOAT,"FEATURE_CODE"
>     INTEGER_INT16_BEGIN_DOMAIN_NAME_64526F6164626564_END_DOMAIN_NAME,"SUB_FEATURE_CODE" INTEGER,"STATUS" VARCHAR(16)_BEGIN_DOMAIN_NAME_645374617475735F31_END_DOMAIN_NAME,"SHAPE_Length" FLOAT,"SHAPE_Area" FLOAT,OGR_STYLE VARCHAR HIDDEN,"SHAPE" BLOB_MULTIPOLYGON_XY_2263, OGR_NATIVE_DATA VARCHAR, OGR_NATIVE_MEDIA_TYPE VARCHAR)
>     ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select shape from
>     roadbed where source_id = 13350003311):
>      ? no such table: roadbed
> 
>     This command works in GDAL 3.4 (and also works with the ogr sql
>     dialect); I was wanting to use the sqlite dialect so that i can use
>     CASE statements.? Is this a bug or expected?
> 
>     Thanks,
>     Patrick
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jerome.siot at mytimezero.com  Thu Jun 29 02:41:57 2023
From: jerome.siot at mytimezero.com (Jerome Siot)
Date: Thu, 29 Jun 2023 09:41:57 +0000
Subject: [gdal-dev] Converting VPF vector set into shapefile (under
 Windows environment)
In-Reply-To: <CAAes_OFQNRurF8M-Wzhn8_OfUtr1f6XsoKazdHqfhgzKRVw1GQ@mail.gmail.com>
References: <CAAes_OFQNRurF8M-Wzhn8_OfUtr1f6XsoKazdHqfhgzKRVw1GQ@mail.gmail.com>
Message-ID: <CO1PR17MB53536004FAD545C80C461BCC8325A@CO1PR17MB5353.namprd17.prod.outlook.com>

Hello,
Replacing "\" by "/" gives result with error. (windows 10)

jerome.siot at WORK<mailto:jerome.siot at WORK> C:\Users\jerome.siot
$ ogrinfo gltp:/vrf/C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/libref/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/elev/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/hydro/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/ind/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/phys/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/pop/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/trans/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/util/fcs>

vpf_open_table: error opening <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/veg/fcs>
INFO: Open of `gltp:/vrf/C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash'
      using driver `OGR_OGDI' successful.
1: tileref at tileref(*)_area (Polygon)
2: tilereft at tileref(*)_text (Point)
3: markersp at bnd(*)_point (Point)
4: polbndl at bnd(*)_line (Line String)
5: polbnda at bnd(*)_area (Polygon)
6: bndtxt at bnd(*)_text (Point)


--
Regards, J?rome
De : gdal-dev <gdal-dev-bounces at lists.osgeo.org> De la part de Philippe Ghesquiere via gdal-dev
Envoy? : Wednesday, June 28, 2023 6:57 PM
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] Converting VPF vector set into shapefile (under Windows environment)

Dear all,

I would like to convert a VPF vector set ( OGDI driver<https://gdal.org/drivers/vector/ogdi.html>  ) into shapefile format.

My environment is  as follow:

  *   windows 10
  *   GDAL environment installed with QGIS 3.26.0 : GDAL 3.5.0, released 2022/05/10
  *   the OGDI driver is available
ogrinfo --format ogr_ogdi
Format Details:
  Short Name: OGR_OGDI
  Long Name: OGDI Vectors (VPF, VMAP, DCW)
  Supports: Vector
  Help Topic: drivers/vector/ogdi.html
  Supports: Open() - Open existing dataset.
  Supports: Multiple vector layers.

To make sure I have a supported database, I downloaded the gdalautotest suite.

After reading the OGDI driver<https://gdal.org/drivers/vector/ogdi.html> page, I modified the example for a  windows environment. I tried the following command

ogrinfo gltp:/vrf/C:\Download\GDAL\gdalautotest-3.6.4\ogr\data\vm2alv2_texash\texash

I observe :

  *   nothing happens (no warning or error message)
  *   activating debug mode does not give any extra information

As mentioned in the  OGDI driver<https://gdal.org/drivers/vector/ogdi.html> page, the 'texash/' directory is at the same level as the dht and lat files.

Do you have any idea for a correct "windows-like" path I should use ?

Thanks

Philippe
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/3236081f/attachment-0001.htm>

From philippe.ghesquiere at airbus.com  Thu Jun 29 04:20:18 2023
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Thu, 29 Jun 2023 13:20:18 +0200
Subject: [gdal-dev] Converting VPF vector set into shapefile (under
 Windows environment)
In-Reply-To: <CO1PR17MB53536004FAD545C80C461BCC8325A@CO1PR17MB5353.namprd17.prod.outlook.com>
References: <CAAes_OFQNRurF8M-Wzhn8_OfUtr1f6XsoKazdHqfhgzKRVw1GQ@mail.gmail.com>
 <CO1PR17MB53536004FAD545C80C461BCC8325A@CO1PR17MB5353.namprd17.prod.outlook.com>
Message-ID: <CAAes_OEddmLKufhEF31G214ttEZKJdJ19EZ5q7U5Q0+=hDFS7A@mail.gmail.com>

Hi J?rome,
Thanks for the hint : it does work, despites the warning messages

Philippe


On Thu, Jun 29, 2023 at 11:45?AM Jerome Siot <jerome.siot at mytimezero.com>
wrote:

> Hello,
>
> Replacing "\" by "/" gives result with error. (windows 10)
>
>
>
> jerome.siot at WORK C:\Users\jerome.siot
>
> $ ogrinfo gltp:/vrf/C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/libref/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/elev/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/hydro/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/ind/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/phys/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/pop/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/trans/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/util/fcs>
>
>
>
> vpf_open_table: error opening
> <C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash/veg/fcs>
>
> INFO: Open of
> `gltp:/vrf/C:/git/gdal/autotest/ogr/data/vm2alv2_texash/texash'
>
>       using driver `OGR_OGDI' successful.
>
> 1: tileref at tileref(*)_area (Polygon)
>
> 2: tilereft at tileref(*)_text (Point)
>
> 3: markersp at bnd(*)_point (Point)
>
> 4: polbndl at bnd(*)_line (Line String)
>
> 5: polbnda at bnd(*)_area (Polygon)
>
> 6: bndtxt at bnd(*)_text (Point)
>
>
>
>
>
> --
>
> Regards, J?rome
>
> *De :* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *De la part de*
> Philippe Ghesquiere via gdal-dev
> *Envoy? :* Wednesday, June 28, 2023 6:57 PM
> *? :* gdal-dev at lists.osgeo.org
> *Objet :* [gdal-dev] Converting VPF vector set into shapefile (under
> Windows environment)
>
>
>
> Dear all,
>
> I would like to convert a VPF vector set ( OGDI driver
> <https://gdal.org/drivers/vector/ogdi.html>  ) into shapefile format.
>
> My environment is  as follow:
>
>    - windows 10
>    - GDAL environment installed with QGIS 3.26.0 : *GDAL 3.5.0, released
>    2022/05/10*
>    - the OGDI driver is available
>    ogrinfo --format ogr_ogdi
>    Format Details:
>      Short Name: OGR_OGDI
>      Long Name: OGDI Vectors (VPF, VMAP, DCW)
>      Supports: Vector
>      Help Topic: drivers/vector/ogdi.html
>      Supports: Open() - Open existing dataset.
>      Supports: Multiple vector layers.
>
> To make sure I have a supported database, I downloaded the
> gdalautotest suite.
>
> After reading the OGDI driver <https://gdal.org/drivers/vector/ogdi.html>
> page, I modified the example for a  windows environment. I tried the
> following command
>
> ogrinfo
> gltp:/vrf/C:\Download\GDAL\gdalautotest-3.6.4\ogr\data\vm2alv2_texash\texash
>
> I observe :
>
>    - nothing happens (no warning or error message)
>    - activating debug mode does not give any extra information
>
> As mentioned in the  OGDI driver
> <https://gdal.org/drivers/vector/ogdi.html> page, the '*texash/*'
> directory is at the same level as the *dht *and *lat *files.
>
> Do you have any idea for a correct "windows-like" path I should use ?
>
> Thanks
>
> Philippe
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/5c8c07bf/attachment.htm>

From a.pau at creaf.uab.cat  Thu Jun 29 06:14:56 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 29 Jun 2023 13:14:56 +0000
Subject: [gdal-dev] Debugging in Visual Studio 2019?
Message-ID: <AS8PR07MB81684928D0A7665301EB2ACEA225A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi everyone,
I am a little stuck in something. Let's see if someone can help me.

I'm immersed in the creation of a new driver.
First step OK: download GDAL from GitHub, install some dependences, and use Cmake to create GDAL for Visual Studio. Big one project.
Second step OK: Add a new driver in ogr (using another project as inspiration) in this big project (adding some lines in CmakeLists etc..)
Third step: fill all functions to really make this driver work.
I'm stuck here. I want to debug in Visual Studio to complete the Third step but I don't know how. There is any way to debug something (in Visual Studio project I created using CMake) like a simple transformation "ogr2ogr layer.shp MiraMon_layer.pol ". I'm interested in debug inside the code to see if all is as I expect and this kind of things developers do... If not, then I supose I have to use testing
After having the project created I don't know how to debug it.
[cid:image001.png at 01D9AA9C.763B7B10]

Can anyone give me some clue? Thanks in advance!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/a11c2c1e/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 6831 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/a11c2c1e/attachment-0001.png>

From jluis at ualg.pt  Thu Jun 29 07:15:09 2023
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 29 Jun 2023 14:15:09 +0000
Subject: [gdal-dev] Debugging in Visual Studio 2019?
In-Reply-To: <AS8PR07MB81684928D0A7665301EB2ACEA225A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB81684928D0A7665301EB2ACEA225A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <GVXPR04MB9926901C54EFB292B773E26BA625A@GVXPR04MB9926.eurprd04.prod.outlook.com>


Debugging with VS is actually simple. You need:


  *   To build GDAL and your driver in debug mode
  *   Step 1, see Screenshot_1. Load one executable that has a code path into that of your driver (gdalinfo?)
  *   Step 2, see Screenshot_2. Right-click on Properties and give the full set of options to run the executable select in 2)
  *   Load the c/c++ codes and set breakpoints.
  *   Hit F5, etc... (here I'm assuming you know how to use the debugger)

NOTE. Screenshot_2 will be sent in a second message as the limit for the attach is so low that makes is very difficult to attach images-

Good luck

Joaquim


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Abel Pau
Sent: Thursday, June 29, 2023 2:15 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Debugging in Visual Studio 2019?

N?o costuma receber e-mails de a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>. Saiba por que motivo isto ? importante<https://aka.ms/LearnAboutSenderIdentification>
Hi everyone,
I am a little stuck in something. Let's see if someone can help me.

I'm immersed in the creation of a new driver.
First step OK: download GDAL from GitHub, install some dependences, and use Cmake to create GDAL for Visual Studio. Big one project.
Second step OK: Add a new driver in ogr (using another project as inspiration) in this big project (adding some lines in CmakeLists etc..)
Third step: fill all functions to really make this driver work.
I'm stuck here. I want to debug in Visual Studio to complete the Third step but I don't know how. There is any way to debug something (in Visual Studio project I created using CMake) like a simple transformation "ogr2ogr layer.shp MiraMon_layer.pol ". I'm interested in debug inside the code to see if all is as I expect and this kind of things developers do... If not, then I supose I have to use testing
After having the project created I don't know how to debug it.
[cid:image001.png at 01D9AA9C.7D0EC3C0]

Can anyone give me some clue? Thanks in advance!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/afe7abe1/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 6831 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/afe7abe1/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot_1.png
Type: image/png
Size: 40851 bytes
Desc: Screenshot_1.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/afe7abe1/attachment-0003.png>

From jluis at ualg.pt  Thu Jun 29 07:20:25 2023
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 29 Jun 2023 14:20:25 +0000
Subject: [gdal-dev] Debugging in Visual Studio 2019?
In-Reply-To: <GVXPR04MB9926901C54EFB292B773E26BA625A@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <AS8PR07MB81684928D0A7665301EB2ACEA225A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <GVXPR04MB9926901C54EFB292B773E26BA625A@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <GVXPR04MB9926DFFA7D5536C9AE533704A625A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Second SS

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Joaquim Manuel Freire Lu?s via gdal-dev
Sent: Thursday, June 29, 2023 3:15 PM
To: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Debugging in Visual Studio 2019?


Debugging with VS is actually simple. You need:


  *   To build GDAL and your driver in debug mode
  *   Step 1, see Screenshot_1. Load one executable that has a code path into that of your driver (gdalinfo?)
  *   Step 2, see Screenshot_2. Right-click on Properties and give the full set of options to run the executable select in 2)
  *   Load the c/c++ codes and set breakpoints.
  *   Hit F5, etc... (here I'm assuming you know how to use the debugger)

NOTE. Screenshot_2 will be sent in a second message as the limit for the attach is so low that makes is very difficult to attach images-

Good luck

Joaquim


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Abel Pau
Sent: Thursday, June 29, 2023 2:15 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Debugging in Visual Studio 2019?

N?o costuma receber e-mails de a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>. Saiba por que motivo isto ? importante<https://aka.ms/LearnAboutSenderIdentification>
Hi everyone,
I am a little stuck in something. Let's see if someone can help me.

I'm immersed in the creation of a new driver.
First step OK: download GDAL from GitHub, install some dependences, and use Cmake to create GDAL for Visual Studio. Big one project.
Second step OK: Add a new driver in ogr (using another project as inspiration) in this big project (adding some lines in CmakeLists etc..)
Third step: fill all functions to really make this driver work.
I'm stuck here. I want to debug in Visual Studio to complete the Third step but I don't know how. There is any way to debug something (in Visual Studio project I created using CMake) like a simple transformation "ogr2ogr layer.shp MiraMon_layer.pol ". I'm interested in debug inside the code to see if all is as I expect and this kind of things developers do... If not, then I supose I have to use testing
After having the project created I don't know how to debug it.
[cid:image001.png at 01D9AA9D.397E82C0]

Can anyone give me some clue? Thanks in advance!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/a0149969/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 6831 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/a0149969/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot_2.png
Type: image/png
Size: 53098 bytes
Desc: Screenshot_2.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/a0149969/attachment-0003.png>

From dnewhall at carlsonsw.com  Thu Jun 29 07:34:59 2023
From: dnewhall at carlsonsw.com (Derek Newhall)
Date: Thu, 29 Jun 2023 10:34:59 -0400
Subject: [gdal-dev] Change name of compiled DLL
Message-ID: <CAA1reb05K-Zuz2baMWx7VY7RoAHaxsv6Wa2spkXx+b=Mh=tW5w@mail.gmail.com>

Hi,

When building GDAL 3.5.1 and earlier with Nmake, the created DLL was named
gdal305.dll (or similar). Now with Cmake and 3.7.0 it's just gdal.dll. Is
there a way to configure the DLL name?  We're concerned about version
clashes with just using the name gdal.dll. I checked the build
documentation, but couldn't find a setting for this. I also tried
-DOUTPUT_NAME and -DLIBRARY_OUTPUT_NAME (per the CMake documentation)
with no success.

Thanks,

Derek Newhall

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/bafe66cb/attachment.htm>

From jluis at ualg.pt  Thu Jun 29 07:43:47 2023
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Thu, 29 Jun 2023 14:43:47 +0000
Subject: [gdal-dev] Change name of compiled DLL
In-Reply-To: <CAA1reb05K-Zuz2baMWx7VY7RoAHaxsv6Wa2spkXx+b=Mh=tW5w@mail.gmail.com>
References: <CAA1reb05K-Zuz2baMWx7VY7RoAHaxsv6Wa2spkXx+b=Mh=tW5w@mail.gmail.com>
Message-ID: <GVXPR04MB9926E1C03B04BCF0DCA212B3A625A@GVXPR04MB9926.eurprd04.prod.outlook.com>

Yes, there is. The docs explain that somewhere. Set the variable GDAL_LIB_OUTPUT_NAME

I have this in my ConfigUser.cmake file

set (GDAL_LIB_OUTPUT_NAME gdal_w${BITAGE} CACHE STRING "" FORCE)

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Derek Newhall
Sent: Thursday, June 29, 2023 3:35 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Change name of compiled DLL

N?o costuma receber e-mails de dnewhall at carlsonsw.com<mailto:dnewhall at carlsonsw.com>. Saiba por que motivo isto ? importante<https://aka.ms/LearnAboutSenderIdentification>
Hi,

When building GDAL 3.5.1 and earlier with Nmake, the created DLL was named gdal305.dll (or similar). Now with Cmake and 3.7.0 it's just gdal.dll. Is there a way to configure the DLL name?  We're concerned about version clashes with just using the name gdal.dll. I checked the build documentation, but couldn't find a setting for this. I also tried -DOUTPUT_NAME and -DLIBRARY_OUTPUT_NAME (per the CMake documentation) with no success.

Thanks,

Derek Newhall


Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230629/d6cae1f6/attachment.htm>

From a.pau at creaf.uab.cat  Fri Jun 30 00:44:19 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 30 Jun 2023 07:44:19 +0000
Subject: [gdal-dev] Trying to build GDAL but I am missing something
In-Reply-To: <AS8PR07MB8168069566CA9D0E83C8E8A2A22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168069566CA9D0E83C8E8A2A22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB81682BBC3E19812B21726DEBA22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi and good morning,
I am trying to debug GDAL and for doing this I executed Cmake and the configuration seems to be correct.
But when I try to build it "Cmake --build ." one persistent error arises:


LINK : fatal error LNK1104: cannot open file 'D:\GitHub-repository\PROJ\build\src\apps\invproj.dir\Release\\.obj' [D:\G
itHub-repository\GDAL\build\GDAL.vcxproj]

I have configurated in CMakeLists.txt the next PROJ library:
set(PROJ_LIBRARY_RELEASE "D:/GitHub-repository/PROJ/build/src/apps/invproj.dir/Release/")
set(PROJ_INCLUDE_DIR "D:/GitHub-repository/proj-9.2.0/src")

With this shown in image2.png

[Attatched]

It shoud be ok because the documentations says:
PROJ*<https://gdal.org/development/building_from_source.html#proj>

PROJ<https://github.com/OSGeo/PROJ/> >= 6 is a required dependency for GDAL.
PROJ_INCLUDE_DIR*<https://gdal.org/development/building_from_source.html#cmdoption-arg-PROJ_INCLUDE_DIR>

Path to an include directory with the proj.h header file.
PROJ_LIBRARY_RELEASE*<https://gdal.org/development/building_from_source.html#cmdoption-arg-PROJ_LIBRARY_RELEASE>

Path to a shared or static library file, such as proj.dll, libproj.so, proj.lib, or other name. A similar variable PROJ_LIBRARY_DEBUG can also be specified to a similar library for building Debug releases.

Then, anyone knows what I am doing wrong? I've tried lots of things. PROJ is built with CMake and all was OK.
Thanks in advance!


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230630/5250dfdf/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image2.png
Type: image/png
Size: 15778 bytes
Desc: image2.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230630/5250dfdf/attachment-0001.png>

From a.pau at creaf.uab.cat  Fri Jun 30 00:45:58 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 30 Jun 2023 07:45:58 +0000
Subject: [gdal-dev] Debugging in Visual Studio 2019?
In-Reply-To: <GVXPR04MB9926DFFA7D5536C9AE533704A625A@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <AS8PR07MB81684928D0A7665301EB2ACEA225A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <GVXPR04MB9926901C54EFB292B773E26BA625A@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <GVXPR04MB9926DFFA7D5536C9AE533704A625A@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <AS8PR07MB8168B7C05E51EC522D40D821A22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Joaquim (merci per la resposta).

Thanks for your answer. Now I'm trying to make the projec works in Visual Studio. And after that I think I'll can apply what you say.
Thanks!

De: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>
Enviado el: dijous, 29 de juny de 2023 16:20
Para: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: RE: Debugging in Visual Studio 2019?

Second SS

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Joaquim Manuel Freire Lu?s via gdal-dev
Sent: Thursday, June 29, 2023 3:15 PM
To: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Debugging in Visual Studio 2019?


Debugging with VS is actually simple. You need:

-          To build GDAL and your driver in debug mode
-          Step 1, see Screenshot_1. Load one executable that has a code path into that of your driver (gdalinfo?)
-          Step 2, see Screenshot_2. Right-click on Properties and give the full set of options to run the executable select in 2)
-          Load the c/c++ codes and set breakpoints.
-          Hit F5, etc... (here I'm assuming you know how to use the debugger)

NOTE. Screenshot_2 will be sent in a second message as the limit for the attach is so low that makes is very difficult to attach images-

Good luck

Joaquim


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Abel Pau
Sent: Thursday, June 29, 2023 2:15 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Debugging in Visual Studio 2019?

N?o costuma receber e-mails de a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>. Saiba por que motivo isto ? importante<https://aka.ms/LearnAboutSenderIdentification>
Hi everyone,
I am a little stuck in something. Let's see if someone can help me.

I'm immersed in the creation of a new driver.
First step OK: download GDAL from GitHub, install some dependences, and use Cmake to create GDAL for Visual Studio. Big one project.
Second step OK: Add a new driver in ogr (using another project as inspiration) in this big project (adding some lines in CmakeLists etc..)
Third step: fill all functions to really make this driver work.
I'm stuck here. I want to debug in Visual Studio to complete the Third step but I don't know how. There is any way to debug something (in Visual Studio project I created using CMake) like a simple transformation "ogr2ogr layer.shp MiraMon_layer.pol ". I'm interested in debug inside the code to see if all is as I expect and this kind of things developers do... If not, then I supose I have to use testing
After having the project created I don't know how to debug it.
[cid:image001.png at 01D9AB37.ABA5EFB0]

Can anyone give me some clue? Thanks in advance!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230630/58b69713/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 6831 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230630/58b69713/attachment-0001.png>

From a.pau at creaf.uab.cat  Fri Jun 30 03:03:24 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 30 Jun 2023 10:03:24 +0000
Subject: [gdal-dev] Trying to build GDAL but I am missing something
In-Reply-To: <AS8PR07MB81682BBC3E19812B21726DEBA22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168069566CA9D0E83C8E8A2A22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB81682BBC3E19812B21726DEBA22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB8168A1185AF9A317E0E2E0CAA22AA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Sorry,
I solved the problem. I pointed to a lib:
set(PROJ_LIBRARY_RELEASE "D:/GitHub-repository/PROJ/build/lib/Release/proj.lib")
set(PROJ_LIBRARY_DEBUG "D:/GitHub-repository/PROJ/build/lib/Debug/proj.lib")
set(PROJ_INCLUDE_DIR "D:/GitHub-repository/PROJ/src")

And now it builds perfectly :)

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau
Enviado el: divendres, 30 de juny de 2023 9:44
Para: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Trying to build GDAL but I am missing something

Hi and good morning,
I am trying to debug GDAL and for doing this I executed Cmake and the configuration seems to be correct.
But when I try to build it "Cmake --build ." one persistent error arises:


LINK : fatal error LNK1104: cannot open file 'D:\GitHub-repository\PROJ\build\src\apps\invproj.dir\Release\\.obj' [D:\G
itHub-repository\GDAL\build\GDAL.vcxproj]

I have configurated in CMakeLists.txt the next PROJ library:
set(PROJ_LIBRARY_RELEASE "D:/GitHub-repository/PROJ/build/src/apps/invproj.dir/Release/")
set(PROJ_INCLUDE_DIR "D:/GitHub-repository/proj-9.2.0/src")

With this shown in image2.png

[Attatched]

It shoud be ok because the documentations says:
PROJ*<https://gdal.org/development/building_from_source.html#proj>

PROJ<https://github.com/OSGeo/PROJ/> >= 6 is a required dependency for GDAL.
PROJ_INCLUDE_DIR*<https://gdal.org/development/building_from_source.html#cmdoption-arg-PROJ_INCLUDE_DIR>

Path to an include directory with the proj.h header file.
PROJ_LIBRARY_RELEASE*<https://gdal.org/development/building_from_source.html#cmdoption-arg-PROJ_LIBRARY_RELEASE>

Path to a shared or static library file, such as proj.dll, libproj.so, proj.lib, or other name. A similar variable PROJ_LIBRARY_DEBUG can also be specified to a similar library for building Debug releases.

Then, anyone knows what I am doing wrong? I've tried lots of things. PROJ is built with CMake and all was OK.
Thanks in advance!


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230630/9d6d660b/attachment.htm>

