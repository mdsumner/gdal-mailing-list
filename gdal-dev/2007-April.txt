From aaime at openplans.org  Sun Apr  1 03:27:06 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
In-Reply-To: <f3b73b7d0703181455w15a00495pc7b3ce1d669a5dda@mail.gmail.com>
References: <45FD5CFE.8040609@openplans.org>	
	<f3b73b7d0703180942g6aa07c73p66383b57de5c8adb@mail.gmail.com>	
	<45FD9FD7.2030206@openplans.org>
	<f3b73b7d0703181455w15a00495pc7b3ce1d669a5dda@mail.gmail.com>
Message-ID: <460F5ECA.4060103@openplans.org>

Tamas Szekeres ha scritto:
> 2007/3/18, Andrea Aime <aaime@openplans.org>:

> Hopefully, this implementation can be achieved as:
> 
> %typemap(javacode) SWIGTYPE %{
>  protected static long getCPtrAndDisown($javaclassname obj) {
>    if (obj != null) obj.swigCMemOwn= false;
>    return getCPtr(obj);
>  }
> %}
> 
> %typemap(javain) SWIGTYPE *DISOWN 
> "$javaclassname.getCPtrAndDisown($javainput)"
> 

Tried it, and it works fine (I had some unit tests to catch the
VM crash due to the lack of DISOWN in my Geotools datastore, so
it has been tested too).

Thanks for all the help :-)
Cheers
Andrea

From aki.suvanto at joensuu.fi  Sun Apr  1 03:58:02 2007
From: aki.suvanto at joensuu.fi (Aki Suvanto)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Problem in gdal_translate and -co
	"PHOTOMETRIC=MINISBLACK"
Message-ID: <1175414282.460f660a64917@wwwmail.joensuu.fi>

Hello,

I already wrote once about this same problem, but nobody has replied me so I
write again.

I have a problem which relates to the gdal_translate and -co
"PHOTOMETRIC=MINISBLACK" option.

I'm trying to do mosaic with gdalwarp and I'm using 4 band 8 byte Geotiff
aerial
images. Gdalwarp use the last band as Alpha so the mosaic image is not correct.

Therefore I have to change the last band something different than the alpha. If
I'm understand right the gdal_translate -co "PHOTOMETRIC=MINISBLACK" should
change the band ColorInterpretation from alpha to something else. This mosaic
process works fine with img-format, but it would be faster to use Geotiff
images.

So here are my commands:

gdal_translate -of Gtiff -co "PHOTOMETRIC=MINISBLACK" 1076.tif 1076_co.tif

Input file size is 7563, 3462
0...10...20...30...40...50...60...70...80...90...100 - done.

gdalinfo 1076_co.tif

Driver: GTiff/GeoTIFF
Size is 7563, 3462
Coordinate System is `'
Origin = (306961.500000000000000,6961278.500000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Corner Coordinates:
Upper Left  (  306961.500, 6961278.500)
Lower Left  (  306961.500, 6959547.500)
Upper Right (  310743.000, 6961278.500)
Lower Right (  310743.000, 6959547.500)
Center      (  308852.250, 6960413.000)
Band 1 Block=7563x1 Type=Byte, ColorInterp=Red
Band 2 Block=7563x1 Type=Byte, ColorInterp=Green
Band 3 Block=7563x1 Type=Byte, ColorInterp=Blue
Band 4 Block=7563x1 Type=Byte, ColorInterp=Alpha
  
So is there something wrong in those commands or do you have any good advices,
please tell me.


Best regards,

Aki 

From ari.jolma at tkk.fi  Sun Apr  1 04:43:04 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] For SWIG maintainers: Move to SWIG 1.3.31
In-Reply-To: <460EA91D.9090500@pobox.com>
References: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
	<460E14C4.9080001@tkk.fi> <460EA91D.9090500@pobox.com>
Message-ID: <460F7098.7070101@tkk.fi>

Frank Warmerdam kirjoitti:
> and stable.  Wasn't it your perl bindings that in the past request some
> hand tweaking?

Yes, you're right, the Perl part of the bindings did require some hand 
tweaking, or at least some ugly hacks in the makefile. I'm glad that's 
not the case any more.

>
>> I made a small addition to the OGR Perl bindigs (Move(dx,dy,dz) 
>> method Geometry class - I'm currently playing with moving geographic 
>> objects). I find it a bit distracting and additional thing to 
>> remember to update also the big generated bindings because of a small 
>> change in a .i file.
>
> I can understand that, and if you are quite certain that you would like
> the distribute bindings auto-generated you could modify mkgdaldist.sh to
> do this.
>
> But really, I encourage you to commit your changes as some folks who 
> might
> be interested in using the perl bindings against trunk may not have the
> right swig version.  The current approach is intended to make svn 
> accessable
> to folks without futzing around with swig.

ok,

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From lists at b-open-solutions.it  Sun Apr  1 05:41:57 2007
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <460EA9A6.4030001@pobox.com>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<460EA9A6.4030001@pobox.com>
Message-ID: <200704011141.58473.lists@b-open-solutions.it>


Frank,

On Saturday 31 March 2007 20:34, Frank Warmerdam wrote:
> Possibly we need to regenerate the libtool stuff with a
> newer version?

sounds reasonable, since the current version of libtool doesn't have the --tag 
option anymore.

I would like to have a look at the problema, but ATM i can't checkout from the 
svn:

$ svn checkout https://svn.osgeo.org/svn/gdal/trunk/gdal gdal 
svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
svn: '/svn/gdal/gdal/!svn/vcc/default' path not found
           ^^^^^^^^^ missing 'trunk'?

cheers,
alessandro

-- 
B-Open Solutions srl -- http://www.bopen.it/

From lists at b-open-solutions.it  Sun Apr  1 05:58:52 2007
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <200704011158.53122.lists@b-open-solutions.it>


Eric,

On Friday 30 March 2007 17:54, Patton, Eric wrote:
> I just upgraded my Ubuntu to 7.04 Beta, and I'm re-compiling gdal-1.4.0.
> configure progresses cleanly with no obvious errors. At the very beginning
> of make, however, I encounter this error:
>
> $ sudo make
> (cd port; make)
> make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
> /bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++   -DOGR_ENABLED
> -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp libtool:
> compile: unable to infer tagged configuration
> libtool: compile: specify a tag with `--tag'
> make[1]: *** [cpl_conv.o] Error 1
> make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
> make: *** [port-target] Error 2

i just tried a clean configure/make with gdal 1.4.0 on ubuntu 7.04 beta 
(x86_64 in my case) and i can't reproduce the problem. 

> Any ideas on what this error means and how to correct it?

be sure to run 'make distclean' before configure (if you aren't already) or 
better start from a fresh tree.

please report the result, thanks.

cheers,
alessandro

-- 
B-Open Solutions srl -- http://www.bopen.it/

From mateusz at loskot.net  Sun Apr  1 06:36:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <460EA9A6.4030001@pobox.com>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<460EA9A6.4030001@pobox.com>
Message-ID: <460F8B15.9070909@loskot.net>

Frank Warmerdam wrote:
> Patton, Eric wrote:
>> Hi,
>>
>> I just upgraded my Ubuntu to 7.04 Beta, and I'm re-compiling
>> gdal-1.4.0. configure progresses cleanly with no obvious errors. At
>> the very beginning of make, however, I encounter this error:
>>
>> $ sudo make
>> (cd port; make)
>> make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
>> /bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++  
>> -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp
>> libtool: compile: unable to infer tagged configuration
>> libtool: compile: specify a tag with `--tag'
>> make[1]: *** [cpl_conv.o] Error 1
>> make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
>> make: *** [port-target] Error 2
>>
>> Any ideas on what this error means and how to correct it?
> 
> Eric,
> 
> I'm afraid I don't know what causes this.  I'd appreciate it if you could
> file a bug on this, and work with Mateusz to try and resolve it before the
> 1.4.1 release.

AFAIK, this error means that libtool is can not determine what compiler
is used exactly and libtool is confused.
May be with newer version of libtool, it's works in more strict mode.

As I remember, the solution is to explicitly distinct compiler
tags for C and C++ compilation and specify them in configure/makefiles

for C++ compilation it looks as:
--tag CXX

for C:
--tag CC


Eric,

Could you try following simple fix:

1. Open GDALmake.opt.in file
2. Go to line 19
3. Replace

CC  = $(LIBTOOL_COMPILE) @CC@
CXX = $(LIBTOOL_COMPILE) @CXX@

with

CC  = $(LIBTOOL_COMPILE) --tag CC @CC@
CXX = $(LIBTOOL_COMPILE) --tag CXX @CXX@

4. Run ./configure and see if it helps

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr  1 06:38:32 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <200704011141.58473.lists@b-open-solutions.it>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>	<460EA9A6.4030001@pobox.com>
	<200704011141.58473.lists@b-open-solutions.it>
Message-ID: <460F8BA8.2030008@loskot.net>

Alessandro Amici wrote:
> Frank,
> 
> On Saturday 31 March 2007 20:34, Frank Warmerdam wrote:
>> Possibly we need to regenerate the libtool stuff with a
>> newer version?
> 
> sounds reasonable, since the current version of libtool doesn't have the --tag 
> option anymore.
> 
> I would like to have a look at the problema, but ATM i can't checkout from the 
> svn:
> 
> $ svn checkout https://svn.osgeo.org/svn/gdal/trunk/gdal gdal 
> svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
> svn: '/svn/gdal/gdal/!svn/vcc/default' path not found
>            ^^^^^^^^^ missing 'trunk'?

You need to relocate your working copy because you are using *old* URL
of the repository.

The new URL is:

https://svn.osgeo.org/gdal/


In order to relocate, follow these steps:
1. Go to location where you have trunk checkouted
2. Run

svn switch --relocate https://svn.osgeo.org/svn/gdal/trunk \
                      https://svn.osgeo.org/gdal/trunk

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr  1 06:41:53 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <200704011158.53122.lists@b-open-solutions.it>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011158.53122.lists@b-open-solutions.it>
Message-ID: <460F8C71.8030101@loskot.net>

Alessandro Amici wrote:
> Eric,
> 
> On Friday 30 March 2007 17:54, Patton, Eric wrote:
>> I just upgraded my Ubuntu to 7.04 Beta, and I'm re-compiling gdal-1.4.0.
>> configure progresses cleanly with no obvious errors. At the very beginning
>> of make, however, I encounter this error:
>>
>> $ sudo make
>> (cd port; make)
>> make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
>> /bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++   -DOGR_ENABLED
>> -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp libtool:
>> compile: unable to infer tagged configuration
>> libtool: compile: specify a tag with `--tag'
>> make[1]: *** [cpl_conv.o] Error 1
>> make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
>> make: *** [port-target] Error 2
> 
> i just tried a clean configure/make with gdal 1.4.0 on ubuntu 7.04 beta 
> (x86_64 in my case) and i can't reproduce the problem. 

I don't have access to Ubuntu 7.04 now so I can not check it myself,
but are you sure you did build it *with* libtool support on?

GDAL can be compiled with:

./configure

*or* without libtool used:

./configure --without-libtool

In the latter case the error reported by Eric will not leak.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Sun Apr  1 10:45:04 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] IdrisiDataset::SetGeoTransform
Message-ID: <460FC570.9010007@tkk.fi>

There's been an error long time (the only error) in the Perl bindings 
autotest because of IdrisiDataset::SetGeoTransform and a subsequent 
IdrisiDataset::GetGeoTransform failing to produce identical 
transformation. I thought I had reported it on the this list or as a 
bug, but can't find it anywhere.

My question is should the IdrisiDataset::SetGeoTransform modify 
adfGeoTransform, from which is reported in GetGeoTransform? If not, then 
I can just skip that test, if yes, then that's probably a bug?

Then, I see the buildbot is running a csharp-test. Maybe it would be a 
good idea to run the Perl-bindings test? 

Regards,

Ari


From mateusz at loskot.net  Sun Apr  1 11:15:32 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] IdrisiDataset::SetGeoTransform
In-Reply-To: <460FC570.9010007@tkk.fi>
References: <460FC570.9010007@tkk.fi>
Message-ID: <460FCC94.9020500@loskot.net>

Ari Jolma wrote:
> There's been an error long time (the only error) in the Perl bindings
>  autotest because of IdrisiDataset::SetGeoTransform and a subsequent
>  IdrisiDataset::GetGeoTransform failing to produce identical 
> transformation. I thought I had reported it on the this list or as a
>  bug, but can't find it anywhere.
> 
> My question is should the IdrisiDataset::SetGeoTransform modify 
> adfGeoTransform, from which is reported in GetGeoTransform? If not, 
> then I can just skip that test, if yes, then that's probably a bug?

Ari,

According to my understanding, the IdrisiDataset::GetGeoTransform()
fills passed array with transformation parameters, so it modifies the array.

AFAIK, the semantic of IdrisiDataset::SetGeoTransform() is that the
array with parameters is passed as read-only, so it shouldn't
be modified.

Even if the prototype of IdrisiDataset::SetGeoTransform() does not
explicitly inform about constness of input parameter,
I think it's safe to assume the following:

IdrisiDataset::SetGeoTransform( double const* padfGeoTransform );

> Then, I see the buildbot is running a csharp-test. Maybe it would be 
> a good idea to run the Perl-bindings test? Regards,

Ari, please send me instructions how to configure/run Perl bindings test
and I will add it to the buildbot, no problem.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Sun Apr  1 11:32:22 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] IdrisiDataset::SetGeoTransform
In-Reply-To: <460FCC94.9020500@loskot.net>
References: <460FC570.9010007@tkk.fi> <460FCC94.9020500@loskot.net>
Message-ID: <460FD086.5040704@tkk.fi>

Mateusz Loskot wrote:
> Ari Jolma wrote:
>   
>> There's been an error long time (the only error) in the Perl bindings
>>  autotest because of IdrisiDataset::SetGeoTransform and a subsequent
>>  IdrisiDataset::GetGeoTransform failing to produce identical 
>> transformation. I thought I had reported it on the this list or as a
>>  bug, but can't find it anywhere.
>>
>> My question is should the IdrisiDataset::SetGeoTransform modify 
>> adfGeoTransform, from which is reported in GetGeoTransform? If not, 
>> then I can just skip that test, if yes, then that's probably a bug?
>>     
>
> Ari,
>
> According to my understanding, the IdrisiDataset::GetGeoTransform()
> fills passed array with transformation parameters, so it modifies the array.
>
> AFAIK, the semantic of IdrisiDataset::SetGeoTransform() is that the
> array with parameters is passed as read-only, so it shouldn't
> be modified.
>
> Even if the prototype of IdrisiDataset::SetGeoTransform() does not
> explicitly inform about constness of input parameter,
> I think it's safe to assume the following:
>
> IdrisiDataset::SetGeoTransform( double const* padfGeoTransform );
>   

I'm not being very clear I believe. In my eyes the fact that 
SetGeoTransform does not change the adfGeoTransform property (note *adf* 
not *padf*) of the object looks like a bug. It only changes some 
NameValues (?). When you ask the transformation parameters from the 
object using GetGeoTransform, it does not query these NameValues but the 
adfGeoTransform, which has not been changed. adfGeoTransform is 
initialized if a new dataset is created and it is filled (from the 
NameValues) in Open method, but not if SetGeoTransform is called.

>   
>> Then, I see the buildbot is running a csharp-test. Maybe it would be 
>> a good idea to run the Perl-bindings test? Regards,
>>     
>
> Ari, please send me instructions how to configure/run Perl bindings test
> and I will add it to the buildbot, no problem.
>   

in swig/perl and in Linux (can be done in Windows but it is really not 
so nice since it is difficult to delete the temporary files the test 
creates and it is much slower also):

make generate
make build
make test

The last step returns a report saying that 3 out of 1301 tests failed 
(the Idrisi set/getGeoTransform tests) and all ogr tests were ok. The 
report is standard Perl format.

Regards,

Ari

> Cheers
>   


From lists at b-open-solutions.it  Sun Apr  1 11:35:12 2007
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <460F8BA8.2030008@loskot.net>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011141.58473.lists@b-open-solutions.it>
	<460F8BA8.2030008@loskot.net>
Message-ID: <200704011735.12322.lists@b-open-solutions.it>

On Sunday 01 April 2007 12:38, Mateusz Loskot wrote:
> Alessandro Amici wrote:
> > $ svn checkout https://svn.osgeo.org/svn/gdal/trunk/gdal gdal
> > svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
> > svn: '/svn/gdal/gdal/!svn/vcc/default' path not found
> >            ^^^^^^^^^ missing 'trunk'?
>
> You need to relocate your working copy because you are using *old* URL
> of the repository.
>
> The new URL is:
>
> https://svn.osgeo.org/gdal/

that was a fresh checkout and the URL was cat'n'pasted from:
 
http://www.gdal.org/download.html

the page needs to be updated to reflect the new repository localtion.

cheers,
alessandro
-- 
B-Open Solutions srl -- http://www.bopen.it/

From warmerdam at pobox.com  Sun Apr  1 11:41:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] IdrisiDataset::SetGeoTransform
In-Reply-To: <460FC570.9010007@tkk.fi>
References: <460FC570.9010007@tkk.fi>
Message-ID: <460FD2A1.2000101@pobox.com>

Ari Jolma wrote:
> There's been an error long time (the only error) in the Perl bindings 
> autotest because of IdrisiDataset::SetGeoTransform and a subsequent 
> IdrisiDataset::GetGeoTransform failing to produce identical 
> transformation. I thought I had reported it on the this list or as a 
> bug, but can't find it anywhere.
 >
> My question is should the IdrisiDataset::SetGeoTransform modify 
> adfGeoTransform, from which is reported in GetGeoTransform? If not, then 
> I can just skip that test, if yes, then that's probably a bug?

Ari,

If you file this as a bug, I will turn it over to Ivan to investigate.

> Then, I see the buildbot is running a csharp-test. Maybe it would be a 
> good idea to run the Perl-bindings test?
> Regards,

I see Mateusz is on top of this issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From lists at b-open-solutions.it  Sun Apr  1 11:31:59 2007
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <460F8C71.8030101@loskot.net>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011158.53122.lists@b-open-solutions.it>
	<460F8C71.8030101@loskot.net>
Message-ID: <200704011731.59408.lists@b-open-solutions.it>


Mateusz,

On Sunday 01 April 2007 12:41, Mateusz Loskot wrote:
> I don't have access to Ubuntu 7.04 now so I can not check it myself,
> but are you sure you did build it *with* libtool support on?

i am.

just for the record, i'm the one who:
 * ported the gdal build system to use libtool back in 2003 and
 * is the target of all Frank's secret libtool curses since then ;)

cheers,
alessandro

-- 
B-Open Solutions srl -- http://www.bopen.it/

From lists at b-open-solutions.it  Sun Apr  1 11:31:59 2007
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <460F8C71.8030101@loskot.net>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011158.53122.lists@b-open-solutions.it>
	<460F8C71.8030101@loskot.net>
Message-ID: <200704011731.59408.lists@b-open-solutions.it>


Mateusz,

On Sunday 01 April 2007 12:41, Mateusz Loskot wrote:
> I don't have access to Ubuntu 7.04 now so I can not check it myself,
> but are you sure you did build it *with* libtool support on?

i am.

just for the record, i'm the one who:
 * ported the gdal build system to use libtool back in 2003 and
 * is the target of all Frank's secret libtool curses since then ;)

cheers,
alessandro

-- 
B-Open Solutions srl -- http://www.bopen.it/

From warmerdam at pobox.com  Sun Apr  1 11:46:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <200704011735.12322.lists@b-open-solutions.it>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011141.58473.lists@b-open-solutions.it>
	<460F8BA8.2030008@loskot.net>
	<200704011735.12322.lists@b-open-solutions.it>
Message-ID: <460FD3D7.9050302@pobox.com>

Alessandro Amici wrote:
> On Sunday 01 April 2007 12:38, Mateusz Loskot wrote:
>> Alessandro Amici wrote:
>>> $ svn checkout https://svn.osgeo.org/svn/gdal/trunk/gdal gdal
>>> svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
>>> svn: '/svn/gdal/gdal/!svn/vcc/default' path not found
>>>            ^^^^^^^^^ missing 'trunk'?
>> You need to relocate your working copy because you are using *old* URL
>> of the repository.
>>
>> The new URL is:
>>
>> https://svn.osgeo.org/gdal/
> 
> that was a fresh checkout and the URL was cat'n'pasted from:
>  
> http://www.gdal.org/download.html
> 
> the page needs to be updated to reflect the new repository localtion.

Alessandro,

Fixed!

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sun Apr  1 11:48:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <200704011731.59408.lists@b-open-solutions.it>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011158.53122.lists@b-open-solutions.it>
	<460F8C71.8030101@loskot.net>
	<200704011731.59408.lists@b-open-solutions.it>
Message-ID: <460FD45D.4020703@loskot.net>

Alessandro Amici wrote:
> Mateusz,
> 
> On Sunday 01 April 2007 12:41, Mateusz Loskot wrote:
>> I don't have access to Ubuntu 7.04 now so I can not check it myself,
>> but are you sure you did build it *with* libtool support on?
> 
> i am.
> 
> just for the record, i'm the one who:
>  * ported the gdal build system to use libtool back in 2003 and
>  * is the target of all Frank's secret libtool curses since then ;)

Alessandro,

Seem I've made a small booboo ;-)
Thanks for explanation.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr  1 11:49:34 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <200704011735.12322.lists@b-open-solutions.it>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011141.58473.lists@b-open-solutions.it>
	<460F8BA8.2030008@loskot.net>
	<200704011735.12322.lists@b-open-solutions.it>
Message-ID: <460FD48E.9010806@loskot.net>

Alessandro Amici wrote:
> On Sunday 01 April 2007 12:38, Mateusz Loskot wrote:
>> Alessandro Amici wrote:
>>> $ svn checkout https://svn.osgeo.org/svn/gdal/trunk/gdal gdal
>>> svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
>>> svn: '/svn/gdal/gdal/!svn/vcc/default' path not found
>>>            ^^^^^^^^^ missing 'trunk'?
>> You need to relocate your working copy because you are using *old* URL
>> of the repository.
>>
>> The new URL is:
>>
>> https://svn.osgeo.org/gdal/
> 
> that was a fresh checkout and the URL was cat'n'pasted from:
>  
> http://www.gdal.org/download.html
> 
> the page needs to be updated to reflect the new repository localtion.

Thanks for reporting it.
As I see Hobu has just fixed it:
http://trac.osgeo.org/gdal/changeset/11137

Hobu thank you!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr  1 11:52:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] IdrisiDataset::SetGeoTransform
In-Reply-To: <460FD086.5040704@tkk.fi>
References: <460FC570.9010007@tkk.fi> <460FCC94.9020500@loskot.net>
	<460FD086.5040704@tkk.fi>
Message-ID: <460FD52D.8080601@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot wrote:
>>
>> Even if the prototype of IdrisiDataset::SetGeoTransform() does not
>> explicitly inform about constness of input parameter,
>> I think it's safe to assume the following:
>>
>> IdrisiDataset::SetGeoTransform( double const* padfGeoTransform );
>>   
> 
> I'm not being very clear I believe. In my eyes the fact that
> SetGeoTransform does not change the adfGeoTransform property (note *adf*
> not *padf*) of the object looks like a bug. It only changes some
> NameValues (?). When you ask the transformation parameters from the
> object using GetGeoTransform, it does not query these NameValues but the
> adfGeoTransform, which has not been changed. adfGeoTransform is
> initialized if a new dataset is created and it is filled (from the
> NameValues) in Open method, but not if SetGeoTransform is called.

I think Frank has explained it in previous post (bug).
Also, I have to admit I wasn't sure if it is a bug or not, but sounds
suspicious.

>>> Then, I see the buildbot is running a csharp-test. Maybe it would be
>>> a good idea to run the Perl-bindings test? Regards,
>>
>> Ari, please send me instructions how to configure/run Perl bindings test
>> and I will add it to the buildbot, no problem.
> 
> in swig/perl and in Linux (can be done in Windows but it is really not
> so nice since it is difficult to delete the temporary files the test
> creates and it is much slower also):
> 
> make generate
> make build
> make test
> 
> The last step returns a report saying that 3 out of 1301 tests failed
> (the Idrisi set/getGeoTransform tests) and all ogr tests were ok. The
> report is standard Perl format.

Ari, thank you I will try to add it today.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sun Apr  1 12:10:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <460FD45D.4020703@loskot.net>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
	<200704011158.53122.lists@b-open-solutions.it>
	<460F8C71.8030101@loskot.net>
	<200704011731.59408.lists@b-open-solutions.it>
	<460FD45D.4020703@loskot.net>
Message-ID: <460FD993.3000308@pobox.com>


> Alessandro Amici wrote:
>> just for the record, i'm the one who:
>>  * ported the gdal build system to use libtool back in 2003 and
>>  * is the target of all Frank's secret libtool curses since then ;)

Many thanks, and a few curses. :-)

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sun Apr  1 12:13:30 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Modified elemnets of bindings
Message-ID: <460FDA2A.5020507@loskot.net>

Hi,

Every time I build GDAL from SVN and then run svn status,
I get long list of modified files:

mloskot:~/dev/gdal/_svn/trunk/gdal$ svn st
M      swig/java/gdal_wrap.cpp
M      swig/java/ogr_wrap.cpp
M      swig/java/osr_wrap.cpp
M      swig/ruby/gdal_wrap.cpp
M      swig/ruby/ogr_wrap.cpp
M      swig/ruby/osr_wrap.cpp
M      swig/perl/gdal_wrap.cpp
M      swig/perl/gdalconst_wrap.c
M      swig/perl/ogr_wrap.cpp
M      swig/perl/lib/Geo/GDAL.pm
M      swig/perl/lib/Geo/OSR.pm
M      swig/perl/osr_wrap.cpp
M      swig/php/php_osr.h
M      swig/php/gdal_wrap.cpp
M      swig/php/ogr_wrap.cpp
M      swig/php/gdalconst.php
M      swig/php/php_gdal.h
M      swig/php/php_ogr.h
M      swig/php/gdalconst_wrap.c
M      swig/php/osr.php
M      swig/php/php_gdalconst.h
M      swig/php/gdal.php
M      swig/php/ogr.php
M      swig/php/osr_wrap.cpp

Is there any way we could keep generated stuff out of the repository?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr  1 12:21:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Perl bindings added to the Buildbot
Message-ID: <460FDBF4.2000203@loskot.net>

Folks,

I added building and testing of Perl bindings to the GDAL Buildbot.
Currently, Perl steps are only added to quick and full builders
on the telascience slave (Linux/FC4).

Comments, questions and suggestions are welcome.


By the way, what do you think about unification of interface generation
target in makefiles of SWIG bindings:
Currently, SWIG C# uses "make interface", Perl uses "make generate"...
I think it's a good idea to unify these targets,
according to the idea of "learn once, use everywhere".

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr  1 12:55:49 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] patch for mingw bug in strdup
In-Reply-To: <a40be0e10703271818of756ec3mb229b55ec394e128@mail.gmail.com>
References: <a40be0e10703271818of756ec3mb229b55ec394e128@mail.gmail.com>
Message-ID: <460FE415.5000906@loskot.net>

Rob McMullen wrote:
> Using MinGW, there's a really strange bug that I can't yet isolate
> completely, but occurs within msvcrt's strdup implementation.
> Enclosed is a patch to duplicate the functionality of strdup but using
> VSIMalloc, avoiding the problematic strdup.
> 
> If you didn't want to use this to replace strdup entirely, you could
> wrap the new code with ifdefs:
> 
> #if defined(WIN32) && defined(__GCC__)
> 
> which should isolate this to MinGW only.

Rob,

I think it's a good idea to submit patches on the Trac directly.
I've taken the liberty to submit your patch there:

http://trac.osgeo.org/gdal/ticket/1547

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Sun Apr  1 12:58:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Perl bindings added to the Buildbot
In-Reply-To: <460FDBF4.2000203@loskot.net>
References: <460FDBF4.2000203@loskot.net>
Message-ID: <460FE4A1.3050902@tkk.fi>

Mateusz Loskot wrote:
> Currently, SWIG C# uses "make interface", Perl uses "make generate"...
> I think it's a good idea to unify these targets,
> according to the idea of "learn once, use everywhere".
>   

Ideally it should test if the wrappers are older than the interface 
files and "make" would be all that we need.

Ari

> Cheers
>   


From warmerdam at pobox.com  Sun Apr  1 13:25:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Perl bindings added to the Buildbot
In-Reply-To: <460FE4A1.3050902@tkk.fi>
References: <460FDBF4.2000203@loskot.net> <460FE4A1.3050902@tkk.fi>
Message-ID: <460FEB08.6010900@pobox.com>

Ari Jolma wrote:
> Mateusz Loskot wrote:
>> Currently, SWIG C# uses "make interface", Perl uses "make generate"...
>> I think it's a good idea to unify these targets,
>> according to the idea of "learn once, use everywhere".
>>   
> 
> Ideally it should test if the wrappers are older than the interface 
> files and "make" would be all that we need.

Ari,

I believe that the generate step is explicit to avoid folks accidentally
corrupting their generated files if they have the wrong version of swig
installed.  So, all things considered, I'd rather not have the makefiles
automatically run generate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Apr  1 15:48:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Problem in gdal_translate and -co
	"PHOTOMETRIC=MINISBLACK"
In-Reply-To: <1175414282.460f660a64917@wwwmail.joensuu.fi>
References: <1175414282.460f660a64917@wwwmail.joensuu.fi>
Message-ID: <46100C95.9090108@pobox.com>

Aki Suvanto wrote:
> Hello,
> 
> I already wrote once about this same problem, but nobody has replied me so I
> write again.
> 
> I have a problem which relates to the gdal_translate and -co
> "PHOTOMETRIC=MINISBLACK" option.
...
> So is there something wrong in those commands or do you have any good advices,
> please tell me.

Aki,

Your approach is correct.  There is a problem somewhere in the code with
making assumptions that 4band data is rgba.  Please file a bug with all the
details we will need to reproduce the problem (ie. including a *small*
example input file).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Apr  1 17:02:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL/OGR In Other Languages
Message-ID: <46101DFB.3020009@pobox.com>

Folks,

I have added links for all languages in which GDAL/OGR is supported in the
wiki (and on the main GDAL page).  This includes writing stub topics for
the CSharp, Java and Ruby bindings in the wiki.

I'd like to encourage the users and maintainers of the different languages
to flesh these out somewhat as time permits to give new visitors more material
to get started on.

http://trac.osgeo.org/gdal/wiki#GDALOGRInOtherLanguages

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From brian.claywell at gmail.com  Sun Apr  1 23:20:54 2007
From: brian.claywell at gmail.com (Brian Claywell)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] HFA no data value support followup
Message-ID: <eupsqg$5vt$1@sea.gmane.org>

Frank et al,

I spoke to you on #gdal the other day regarding my work implementing no
data value support in the HFA driver, and I wanted to update you on my
progress and doublecheck that what I was doing was acceptable.

I toyed around with your suggestion to add a case 'b': to SetInstValue()
in HFAField similar to the one in ExtractInstValue(), but couldn't come
up with an elegant solution to handling the number of rows, number of
columns, and base item type fields in the basedata structure, since that
would at the very least require multiple calls to SetInstValue(), which
would have to check to see which field we were currently on, etc., so I
abandoned that idea and instead went with the idea of serializing the
basedata structure before the call to SetInstValue(), which I modified
slightly to add a special case (like the string case) which writes out
the entire serialized structure at once.

One thing that I'm uncertain about is my handling of the structure in
SetInstValue(), where I decode the first three fields of the serialized
data to see exactly how much data to write out. It would certainly be
easier to simply write out nDataSize bytes, but I wasn't confident in
the safety of doing it like that.

I've attached a (very rough!) diff which illustrates what I've done so
far. Please keep in mind that I'm an electrical engineer by training and
not a code wizard :) Without modifying any of the read routines, the
statistics routines correctly honored the no-data value I set in a
simple test case.

Let me know if this approach is acceptable to you, and if there are any
changes you'd like to see before I submit a cleaner version of the patch
with some more error checking/handling and some streamlining.

-- 
Brian Claywell
brian.claywell@gmail.com
-------------- next part --------------
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfa.h frmts/hfa/hfa.h
219a220
> CPLErr CPL_DLL HFASetBandNoData( HFAHandle hHFA, int nBand, double dfValue );
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfa_p.h frmts/hfa/hfa_p.h
228a229,233
>     GByte * SerializeBasedata( GInt32 nRows, 
> 							   GInt32 nColumns,
> 							   GInt16 nBaseDataType,
> 							   void * pValue );
>     
260c265,266
< 
---
>     CPLErr SetNoDataValue( double dfValue );
>     
338a345
>     CPLErr 		SetBasedataField( const char *, const GByte * );
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfaband.cpp frmts/hfa/hfaband.cpp
1437a1438,1587
> /*                         SetNoDataValue()                             */
> /*                                                                      */
> /*      Set the layer no data value                                     */
> /************************************************************************/
> 
> CPLErr HFABand::SetNoDataValue( double dfValue )
> {
> 	CPLErr eErr = CE_Failure;
> 	
> 	if ( psInfo->eAccess == HFA_Update )
> 	{
> 		HFAEntry *poNDNode = poNode->GetNamedChild( "Eimg_NonInitializedValue" );
> 		
> 		if ( poNDNode == NULL )
> 		{
> 			poNDNode = new HFAEntry ( psInfo,
> 									  "Eimg_NonInitializedValue",
> 									  "Eimg_NonInitializedValue",
> 									  poNode );
> 		}
> 		
> 		// serialize basedata structure
> 		GByte *pszSerData = SerializeBasedata( 1, 1, EPT_f64, (void *) &dfValue );
> 		
> 		if ( pszSerData != NULL )
> 		{
> 			poNDNode->MakeData( 8 + 12 + 8 );
> 			poNDNode->SetPosition();
> 			
> 			poNDNode->DumpFieldValues(stdout, "poNDNode: ");
> 			
> 			/*	SetStringField won't work here, because we can't depend
> 			 * 	on not having values of 0x00 somewhere in the serialized
> 			 * 	data. What we really need is something *akin* to SetStringField
> 			 * 	that doesn't use strlen to figure out how many bytes to write.
> 			 */
> #if 1
> 			if ( poNDNode->SetBasedataField( "valueBD", pszSerData ) != CE_Failure )
> 			{
> 				CPLDebug( "HFABand",
> 						  "poNDNode->SetBasedataField returned success" );
> 				
> 				bNoDataSet = TRUE;
> 				dfNoData = dfValue;
> 				eErr = CE_None;
> 			}
> #endif		
> 			CPLFree( pszSerData );
> 
> 		}	/* end if ( pszSerData != NULL ) */
> 		/* else eErr = CE_Failure; */
> 		
> 	}	/* end if ( psInfo->eAccess == HFA_Update ) */
> 	/* else eErr = CE_Failure; */
> 	
> 	return eErr;
> }
> 
> /************************************************************************/
> /*                         SerializeBasedata()                          */
> /*                                                                      */
> /*      Package basedata into a serial byte structure                   */
> /************************************************************************/
> 
> GByte * HFABand::SerializeBasedata( GInt32 nRows, 
> 								    GInt32 nColumns,
> 								    GInt16 nBaseItemType,
> 								    void *pValue )
> {
> 	if ( nRows < 1 || nColumns < 1 ) {
> 		CPLAssert( FALSE );
> 		return NULL;
> 	}
> 	
> 	int nBaseItemSize = 0;
> 	
> 	switch (nBaseItemType)
> 	{
> 		/*	at this point, sub-byte datatypes are stored as one byte each. */
> 		case EPT_u1:
> 		case EPT_u2:
> 		case EPT_u4:
> 		case EPT_u8:
> 		case EPT_s8:
> 			nBaseItemSize = 1;
> 			break;
> 			
> 		case EPT_u16:
> 		case EPT_s16:
> 			nBaseItemSize = 2;
> 			break;
> 			
> 		case EPT_u32:
> 		case EPT_s32:
> 		case EPT_f32:
> 			nBaseItemSize = 4;
> 			break;
> 			
> 		case EPT_f64:
> 		case EPT_c64:
> 			nBaseItemSize = 8;
> 			break;
> 			
> 		case EPT_c128:
> 			nBaseItemSize = 16;
> 			break;
> 			
> 		default:
> 			return NULL;
> 			break;
> 			
> 	}
> 	
> 	GByte *pszSerData = NULL;
> 	pszSerData = (GByte *) CPLMalloc( 12 + nRows*nColumns*nBaseItemSize );
> 	
> 	if ( pszSerData == NULL )
> 	{
> 		CPLError( CE_Failure, CPLE_OutOfMemory, 
> 				  "Out of memory allocating pszSerData for basedata serialization" );
> 		return NULL;
> 	}
> 	
> 	HFAStandard( 4, &nRows );
> 	memcpy( pszSerData, &nRows, 4 );
> 	
> 	HFAStandard( 4, &nColumns );
> 	memcpy( pszSerData+4, &nColumns, 4 );
> 	
> 	HFAStandard( 2, &nBaseDataType );
> 	memcpy( pszSerData+8, &nBaseItemType, 2 );
> 	
> 	/*	objecttype should probably be set here	*/
> 	
> 	GByte *pSrc = (GByte *) pValue;
> 	GByte *pDst = pszSerData + 12;
> 	
> 	/*	standardize the remaining data and store to memory */
> 	for ( int i = 0; i < nRows*nColumns; i++ )
> 	{
> 		memcpy( pDst, pSrc, nBaseItemSize );
> 		HFAStandard( nBaseItemSize, pDst );
> 		pDst += nBaseItemSize;
> 		pSrc += nBaseItemSize;
> 	}
> 	
> 	return pszSerData;
> }
> 
> /************************************************************************/
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfadataset.cpp frmts/hfa/hfadataset.cpp
499c499,500
< 
---
>     virtual CPLErr SetNoDataValue( double dfValue );
>     
817a819,827
> /*                             SetNoData()                              */
> /************************************************************************/
> 
> CPLErr HFARasterBand::SetNoDataValue( double dfValue )
> {
> 	return HFASetBandNoData( hHFA, nBand, dfValue );
> }
> 
> /************************************************************************/
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfaentry.cpp frmts/hfa/hfaentry.cpp
664a665,675
> /*                           SetBasedataField()                         */
> /************************************************************************/
> 
> CPLErr HFAEntry::SetBasedataField( const char * pszFieldPath, 
>                                    const GByte * pszValue )
> 
> {
>     return SetFieldValue( pszFieldPath, 'b', (void *) pszValue );
> }
> 
> /************************************************************************/
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfafield.cpp frmts/hfa/hfafield.cpp
525a546,620
>     
>     else if ( chReqType == 'b' )
>     {
>     	
>     	GInt32 nRows;
>     	GInt32 nColumns;
>     	GInt16 nBaseItemType;
>     	
>     	memcpy( &nRows, pValue, 4 );
>     	HFAStandard(4, &nRows );
>     	
>     	memcpy( &nColumns, pValue, 4 );
>     	HFAStandard(4, &nColumns );
>     	
>     	memcpy( &nBaseItemType, pValue, 2 );
>     	HFAStandard(2, &nBaseItemType );
>     	
>     	int nBaseItemSize = 0;
>     	
>     	switch (nBaseItemType)
>     	{
>     		/*	at this point, sub-byte datatypes are stored as one byte each. */
>     		case EPT_u1:
>     		case EPT_u2:
>     		case EPT_u4:
>     		case EPT_u8:
>     		case EPT_s8:
>     			nBaseItemSize = 1;
>     			break;
>     			
>     		case EPT_u16:
>     		case EPT_s16:
>     			nBaseItemSize = 2;
>     			break;
>     			
>     		case EPT_u32:
>     		case EPT_s32:
>     		case EPT_f32:
>     			nBaseItemSize = 4;
>     			break;
>     			
>     		case EPT_f64:
>     		case EPT_c64:
>     			nBaseItemSize = 8;
>     			break;
>     			
>     		case EPT_c128:
>     			nBaseItemSize = 16;
>     			break;
>     			
>     		default:
>     			CPLDebug( "HFAField",
>     					  "Bad nBaseItemType in SetInstValue()" );
>     			
>     			return CE_Failure;
>     			break;
>     			
>     	}
>     	
>     	int	nBytesToCopy = 12 + nRows*nColumns*nBaseItemSize;
>     	
>     	if( nBytesToCopy > nDataSize )
>     	{
>     		CPLError( CE_Failure, CPLE_AppDefined,
>     			"Attempt to extend field %s in node past end of data,\n"
>     			"not currently supported.",
>     			pszField );
>     		return CE_Failure;
>     	}
>     	
>     	memcpy( pabyData, pValue, nBytesToCopy );
>     	
>     	return CE_None;
>     	
>     }
diff -r /usr/src/gdal-1.4.0/frmts/hfa/hfaopen.cpp frmts/hfa/hfaopen.cpp
673a674,693
> /*                          HFASetBandNoData()                          */
> /*                                                                      */
> /*      attempts to set the no data value on the band                   */
> /************************************************************************/
> 
> CPLErr HFASetBandNoData( HFAHandle hHFA, int nBand, double dfValue )
> {
> 	if ( nBand < 0 || nBand > hHFA->nBands )
> 	{
> 		CPLAssert( FALSE );
> 		return CE_Failure;
> 	}
> 	
> 	HFABand *poBand = hHFA->papoBand[nBand-1];
> 	
> 	return poBand->SetNoDataValue( dfValue );
> 	
> }
> 
> /************************************************************************/
From warmerdam at pobox.com  Mon Apr  2 01:40:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] HFA no data value support followup
In-Reply-To: <eupsqg$5vt$1@sea.gmane.org>
References: <eupsqg$5vt$1@sea.gmane.org>
Message-ID: <46109737.8020909@pobox.com>

Brian Claywell wrote:
> Frank et al,
> 
> I spoke to you on #gdal the other day regarding my work implementing no
> data value support in the HFA driver, and I wanted to update you on my
> progress and doublecheck that what I was doing was acceptable.
...
> I've attached a (very rough!) diff which illustrates what I've done so
> far. Please keep in mind that I'm an electrical engineer by training and
> not a code wizard :) Without modifying any of the read routines, the
> statistics routines correctly honored the no-data value I set in a
> simple test case.
> 
> Let me know if this approach is acceptable to you, and if there are any
> changes you'd like to see before I submit a cleaner version of the patch
> with some more error checking/handling and some streamlining.

Brian,

The approach looks ok from a quick skim.   When you are satisfied with what
you have submit it as a patch in the GDAL Trac, and I'll see about integrating
it in 1.5 (trunk).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jgaudet at gmail.com  Mon Apr  2 01:24:23 2007
From: jgaudet at gmail.com (Jason Gaudet)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] python ogr - creating a feature in a postgis layer
Message-ID: <d3a30fb30704012224l24012215o9aed778bf303a1af@mail.gmail.com>

Hello list.

I am attempting to take information from an ESRI Shapefile data source and
write it to a PostGIS data source. The data I am using is all in the same
projection, but I cannot create a new feature in the postgis layer. When I
try to:

postgisLayer.CreateFeature(newfeature)

My SRID is set to -1, where it should be set to 42102 (I am using the older
projection format, so that is what the enforce_srid_constraint for my table
is expecting.)  I have searched the net and have not yet found a way to
change the SRID attribute in the geometry.  So far I've tried this:

newspatial = osr.SpatialReference()
newspatial.ImportFromEPSG(42102)
newfeatureGeometry.AssignSpatialReference(newspatial)

But when I try to write to the postgis db it still shows the SRID as being
-1. I'm a GIS newbie, so I'm still a little vague about what *all* of the
data structures represent, but I've been spinning my wheels on this for a
week now. I'd be very grateful for any help.

Thanks,
Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070401/d7545c5d/attachment.html
From warmerdam at pobox.com  Mon Apr  2 02:34:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] python ogr - creating a feature in a postgis layer
In-Reply-To: <d3a30fb30704012224l24012215o9aed778bf303a1af@mail.gmail.com>
References: <d3a30fb30704012224l24012215o9aed778bf303a1af@mail.gmail.com>
Message-ID: <4610A40A.8020403@pobox.com>

Jason Gaudet wrote:
> Hello list.
> 
> I am attempting to take information from an ESRI Shapefile data source 
> and write it to a PostGIS data source. The data I am using is all in the 
> same projection, but I cannot create a new feature in the postgis layer. 
> When I try to:
> 
> postgisLayer.CreateFeature(newfeature)
> 
> My SRID is set to -1, where it should be set to 42102 (I am using the 
> older projection format, so that is what the enforce_srid_constraint for 
> my table is expecting.)  I have searched the net and have not yet found 
> a way to change the SRID attribute in the geometry.  So far I've tried 
> this:
> 
> newspatial = osr.SpatialReference()
> newspatial.ImportFromEPSG(42102)
> newfeatureGeometry.AssignSpatialReference(newspatial)
> 
> But when I try to write to the postgis db it still shows the SRID as 
> being -1. I'm a GIS newbie, so I'm still a little vague about what *all* 
> of the data structures represent, but I've been spinning my wheels on 
> this for a week now. I'd be very grateful for any help.

Jason,

Was this an existing PostGIS layer or a new one you created as part of
the script.  If you created it, then the key is likely to pass the
osr.SpatialReference() in the CreateLayer() call.  If it is an
existing layer then it may be that the driver isn't capturing the existing
layer's SRID properly for use when creating new features.  I believe, but
am not certain, that the spatialreference on the feature itself is ignored
by the postgis driver.

We are closing in on the 1.4.1 release, and with Mateusz (a relative
PostGIS expert available) this is an excellent week to squash OGR/PostGIS
bugs.  So if you can provide enough detail for us to reproduce this, we
can hopefully fix it.

PS. What version of GDAL are you using?  There were some important fixes for
PostGIS coordinate system handling a while ago.  I'm not sure if they were
in 1.4.0 or not, but they are definately in the most recent FWTools
distributions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yadi at tekmira.esdm.go.id  Mon Apr  2 02:36:52 2007
From: yadi at tekmira.esdm.go.id (yadi)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
Message-ID: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>

I come from Indonesia

Please help me, I want to create contour map (shape file) from XYZ
scattered points (from sensor of groundwater system) by script

 

Thanks

Yadi

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070402/d277c2b5/attachment.html
From abhay.menon at gmail.com  Mon Apr  2 03:14:23 2007
From: abhay.menon at gmail.com (abhay menon)
Date: Wed Nov 21 11:50:45 2007
Subject: [gdal-dev] 4 band GeoTIFF to 3 band GeoTIFF
Message-ID: <7a30cd70704020014q11869c40l9c33570f42693fbf@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
@python "%FWTOOLS_DIR%\bin\4bandto3band.py" %*
-------------- next part --------------
#!/usr/bin/env python
#******************************************************************************
#  Name:    4bandto3band
#  Purpose:  Utility to convert 4 band image to 3 band images.
#  Author:   Abhay Menon,abhay.menon@gmail.com
#******************************************************************************

import gdal
import sys
import Numeric
import os.path
import string

def Usage():
    print 'Usage: 4bandto3band.py [-of format] source_file dest_file [-worldfile]'
    sys.exit(1)

# =============================================================================
# 	Mainline
# =============================================================================

format = 'GTiff'
src_filename = None
dst_filename = None
out_bands = 3
band_number = 1
worldfile=0

gdal.AllRegister()
argv = gdal.GeneralCmdLineProcessor( sys.argv )
if argv is None:
    sys.exit( 0 )

# Parse command line arguments.
i = 1
while i < len(argv):
    arg = argv[i]

    if arg == '-of':
        i = i + 1
        format = argv[i]

    elif arg == '-worldfile':
       worldfile=1
		
    elif src_filename is None:
        src_filename = argv[i]

    elif dst_filename is None:
        dst_filename = argv[i]

    else:
        Usage()

    i = i + 1

if dst_filename is None:
    Usage()
    
# ----------------------------------------------------------------------------
# Open source file

src_ds = gdal.Open( src_filename )
if src_ds is None:
    print 'Unable to open ', src_filename
    sys.exit(1)

if worldfile is not None:
	geotransform = src_ds.GetGeoTransform()
	if not geotransform is None:
		wrldfile = dst_filename
		wrldfile = os.path.splitext(wrldfile)[0] + '.wld'
		ulx = geotransform[0]
		uly = geotransform[3]
		ulx = ulx + (geotransform[1]*0.5)
		uly = uly + (geotransform[5]*0.5)
		fileHandle = open ( wrldfile, 'w' )
		fileHandle.write ( "%.16f\n%.16f\n%.16f\n%.16f\n%.16f\n%.16f" % (geotransform[1],geotransform[2],geotransform[4],geotransform[5],ulx,uly) )
		fileHandle.close() 
	
src_band = src_ds.GetRasterBand(band_number)

# ----------------------------------------------------------------------------
# Ensure we recognise the driver.

dst_driver = gdal.GetDriverByName(format)
if dst_driver is None:
    print '"%s" driver not registered.' % format
    sys.exit(1)

# ----------------------------------------------------------------------------
# Build color table.

lookup = [ Numeric.arrayrange(256), 
           Numeric.arrayrange(256), 
           Numeric.arrayrange(256), 
           Numeric.ones(256)*255 ]

ct = src_band.GetRasterColorTable()

if ct is not None:
    for i in range(min(256,ct.GetCount())):
        entry = ct.GetColorEntry(i)
        for c in range(3):
            lookup[c][i] = entry[c]

# ----------------------------------------------------------------------------
# Create the working file.

if format == 'GTiff':
    tif_filename = dst_filename
else:
    tif_filename = 'temp.tif'

gtiff_driver = gdal.GetDriverByName( 'GTiff' )
						
tif_ds = gtiff_driver.Create( tif_filename,
                              src_ds.RasterXSize, src_ds.RasterYSize, out_bands )


# ----------------------------------------------------------------------------
# We should copy projection information and so forth at this point.

tif_ds.SetProjection( src_ds.GetProjection() )
tif_ds.SetGeoTransform( src_ds.GetGeoTransform() )

# ----------------------------------------------------------------------------
# Do the processing one scanline at a time. 
print '\nWriting Band 1'
gdal.TermProgress( 0.0 )
for iY in range(src_ds.RasterYSize):
    src_data = src_band.ReadAsArray(0,iY,src_ds.RasterXSize,1)

    dst_data = Numeric.take(lookup[0],src_data)
    tif_ds.GetRasterBand(1).WriteArray(dst_data,0,iY)

    gdal.TermProgress( (iY+1.0) / src_ds.RasterYSize )

print '\nWriting Band 2'
gdal.TermProgress( 0.0 )	

src_band = src_ds.GetRasterBand(2)

lookup = [ Numeric.arrayrange(256), 
           Numeric.arrayrange(256), 
           Numeric.arrayrange(256), 
           Numeric.ones(256)*255 ]

ct = src_band.GetRasterColorTable()

if ct is not None:
    for i in range(min(256,ct.GetCount())):
        entry = ct.GetColorEntry(i)
        for c in range(3):
            lookup[c][i] = entry[c]

for iY in range(src_ds.RasterYSize):
    src_data = src_band.ReadAsArray(0,iY,src_ds.RasterXSize,1)

    dst_data = Numeric.take(lookup[0],src_data)
    tif_ds.GetRasterBand(2).WriteArray(dst_data,0,iY)

    gdal.TermProgress( (iY+1.0) / src_ds.RasterYSize )
   
print '\nWriting Band 3'
gdal.TermProgress( 0.0 )	

src_band = src_ds.GetRasterBand(3)

lookup = [ Numeric.arrayrange(256), 
           Numeric.arrayrange(256), 
           Numeric.arrayrange(256), 
           Numeric.ones(256)*255 ]

ct = src_band.GetRasterColorTable()

if ct is not None:
    for i in range(min(256,ct.GetCount())):
        entry = ct.GetColorEntry(i)
        for c in range(3):
            lookup[c][i] = entry[c]

for iY in range(src_ds.RasterYSize):
    src_data = src_band.ReadAsArray(0,iY,src_ds.RasterXSize,1)

    dst_data = Numeric.take(lookup[0],src_data)
    tif_ds.GetRasterBand(3).WriteArray(dst_data,0,iY)

    gdal.TermProgress( (iY+1.0) / src_ds.RasterYSize )
	
tif_ds = None

# ----------------------------------------------------------------------------
# Translate intermediate file to output format if desired format is not TIFF.

if tif_filename <> dst_filename:
    tif_ds = gdal.Open( tif_filename )
    dst_driver.CreateCopy( dst_filename, tif_ds )
    tif_ds = None

    gtiff_driver.Delete( tif_filename )







From tim.bowden at westnet.com.au  Mon Apr  2 05:43:59 2007
From: tim.bowden at westnet.com.au (Tim Bowden)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
In-Reply-To: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
Message-ID: <1175507039.4841.5.camel@staddle>

On Mon, 2007-04-02 at 13:36 +0700, yadi wrote:
> I come from Indonesia
> 
> Please help me, I want to create contour map (shape file) from XYZ
> scattered points (from sensor of groundwater system) by script
> 
>  
> 
> Thanks
> 
> Yadi
> 
>  

You may want to try grass: http://grass.itc.it/

HTH,
Tim Bowden
> 


From mateusz at loskot.net  Mon Apr  2 06:48:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
In-Reply-To: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
Message-ID: <4610DF6B.9060402@loskot.net>

yadi wrote:
> Please help me, I want to create contour map (shape file) from XYZ 
> scattered points (from sensor of groundwater system) by script

Yadi,

You need to be more specific what you know already, what you do not know
and you want to ask, so please ask specific questions.
Unfortunately, it's very hard to answer questions
like "I want to draw a map, please help me".

What scripting language do you use,
what is format of your input data, what do you specifically not know and
you want to learn, ... ?

Also, please start with reading OGR tutorial
http://gdal.org/ogr/ogr_apitut.html
and don't miss the brand new Wiki about scripting:
http://trac.osgeo.org/gdal/wiki/GdalOgrInPython

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Mon Apr  2 10:08:12 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
In-Reply-To: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
Message-ID: <46110E4C.5040206@tkk.fi>

yadi wrote:
>
> I come from Indonesia
>
> Please help me, I want to create contour map (shape file) from XYZ 
> scattered points (from sensor of groundwater system) by script
>

http://gdal.org/gdal_contour.html but first you need to interpolate the 
points to the raster somehow

Ari

>  
>
> Thanks
>
> Yadi
>
>  
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From epatton at nrcan.gc.ca  Mon Apr  2 10:36:21 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer
	taggedconfiguration"
In-Reply-To: <460F8B15.9070909@loskot.net>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com>
	<460F8B15.9070909@loskot.net>
Message-ID: <CA803441152AAE40935609509953BAD20F1152@s0-ott-x4.nrn.nrcan.gc.ca>

Hi, sorry for the delay in replying....I'll test the code you sent and
report back later today.

Regards,

--
Eric Patton 
email: epatton@nrcan.gc.ca

 

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Mateusz Loskot
> Sent: Sunday, April 01, 2007 7:36 AM
> To: gdal
> Subject: Re: [Gdal-dev] Make error "libtool: compile: unable 
> to infer taggedconfiguration"
> 
> Frank Warmerdam wrote:
> > Patton, Eric wrote:
> >> Hi,
> >>
> >> I just upgraded my Ubuntu to 7.04 Beta, and I'm re-compiling 
> >> gdal-1.4.0. configure progresses cleanly with no obvious 
> errors. At 
> >> the very beginning of make, however, I encounter this error:
> >>
> >> $ sudo make
> >> (cd port; make)
> >> make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
> >> /bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++ 
> >> -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o 
> >> cpl_conv.cpp
> >> libtool: compile: unable to infer tagged configuration
> >> libtool: compile: specify a tag with `--tag'
> >> make[1]: *** [cpl_conv.o] Error 1
> >> make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
> >> make: *** [port-target] Error 2
> >>
> >> Any ideas on what this error means and how to correct it?
> > 
> > Eric,
> > 
> > I'm afraid I don't know what causes this.  I'd appreciate it if you 
> > could file a bug on this, and work with Mateusz to try and 
> resolve it 
> > before the
> > 1.4.1 release.
> 
> AFAIK, this error means that libtool is can not determine 
> what compiler is used exactly and libtool is confused.
> May be with newer version of libtool, it's works in more strict mode.
> 
> As I remember, the solution is to explicitly distinct 
> compiler tags for C and C++ compilation and specify them in 
> configure/makefiles
> 
> for C++ compilation it looks as:
> --tag CXX
> 
> for C:
> --tag CC
> 
> 
> Eric,
> 
> Could you try following simple fix:
> 
> 1. Open GDALmake.opt.in file
> 2. Go to line 19
> 3. Replace
> 
> CC  = $(LIBTOOL_COMPILE) @CC@
> CXX = $(LIBTOOL_COMPILE) @CXX@
> 
> with
> 
> CC  = $(LIBTOOL_COMPILE) --tag CC @CC@
> CXX = $(LIBTOOL_COMPILE) --tag CXX @CXX@
> 
> 4. Run ./configure and see if it helps
> 
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Mon Apr  2 11:33:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
In-Reply-To: <46110E4C.5040206@tkk.fi>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
	<46110E4C.5040206@tkk.fi>
Message-ID: <46112232.9090305@pobox.com>

Ari Jolma wrote:
> yadi wrote:
>>
>> I come from Indonesia
>>
>> Please help me, I want to create contour map (shape file) from XYZ 
>> scattered points (from sensor of groundwater system) by script
>>
> 
> http://gdal.org/gdal_contour.html but first you need to interpolate the 
> points to the raster somehow

Yadi,

I'd suggest looking at GRASS for your task.  It includes methods to
interpolate points to a raster.  I think it also includes contour generation
from a raster, but if not you can fall back on the gdal_contour program.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ILucena at clarku.edu  Mon Apr  2 10:58:53 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] IdrisiDataset::SetGeoTransform
In-Reply-To: <460FD52D.8080601@loskot.net>
References: <460FC570.9010007@tkk.fi>
	<460FCC94.9020500@loskot.net><460FD086.5040704@tkk.fi>
	<460FD52D.8080601@loskot.net>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45502CA65DE@Iris.ad.clarku.edu>

Mateusz, Ari,

I lost track of my original code (previous to the introduction of
GDALPamDataset). But it looks like however did that change on
IdrisiDataset::GetGeoTransform() only concern was the PAM Dataset but it
also needs to update the .rdc file and adfGeotransform:

CPLErr  IdrisiDataset::GetGeoTransform( double * padfTransform )
{
    if( GDALPamDataset::GetGeoTransform( padfTransform ) != CE_None )
        memcpy( padfTransform, adfGeoTransform, sizeof( double ) * 6 );

    return CE_None;
}


I believe that because the RST driver is used mostly for "translate"
operations that problem never bother anyone (besides the test script).

Thanks for your help and suggestions.

I will take care of that.

Ivan 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Sunday, April 01, 2007 11:52 AM
To: gdal
Subject: Re: [Gdal-dev] IdrisiDataset::SetGeoTransform

Ari Jolma wrote:
> Mateusz Loskot wrote:
>>
>> Even if the prototype of IdrisiDataset::SetGeoTransform() does not
>> explicitly inform about constness of input parameter,
>> I think it's safe to assume the following:
>>
>> IdrisiDataset::SetGeoTransform( double const* padfGeoTransform );
                                   ^^^^^^^^^^^^^^

   IdrisiDataset::SetGeoTransform( const double *padfGeoTransform );
                                   ^^^^^^^^^^^^^^

>>   
> 
> I'm not being very clear I believe. In my eyes the fact that
> SetGeoTransform does not change the adfGeoTransform property (note
*adf*
> not *padf*) of the object looks like a bug. It only changes some
> NameValues (?). When you ask the transformation parameters from the
> object using GetGeoTransform, it does not query these NameValues but
the
> adfGeoTransform, which has not been changed. adfGeoTransform is
> initialized if a new dataset is created and it is filled (from the
> NameValues) in Open method, but not if SetGeoTransform is called.

I think Frank has explained it in previous post (bug).
Also, I have to admit I wasn't sure if it is a bug or not, but sounds
suspicious.

>>> Then, I see the buildbot is running a csharp-test. Maybe it would be
>>> a good idea to run the Perl-bindings test? Regards,
>>
>> Ari, please send me instructions how to configure/run Perl bindings
test
>> and I will add it to the buildbot, no problem.
> 
> in swig/perl and in Linux (can be done in Windows but it is really not
> so nice since it is difficult to delete the temporary files the test
> creates and it is much slower also):
> 
> make generate
> make build
> make test
> 
> The last step returns a report saying that 3 out of 1301 tests failed
> (the Idrisi set/getGeoTransform tests) and all ogr tests were ok. The
> report is standard Perl format.

Ari, thank you I will try to add it today.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From epatton at nrcan.gc.ca  Mon Apr  2 14:08:49 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer
	taggedconfiguration"
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com>
	<460F8B15.9070909@loskot.net>
Message-ID: <CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca>

Hi, 

After making the following edits to GDALmake.opt.in :

1. Open GDALmake.opt.in file
2. Go to line 19
3. Replace

CC  = $(LIBTOOL_COMPILE) @CC@
CXX = $(LIBTOOL_COMPILE) @CXX@

with

CC  = $(LIBTOOL_COMPILE) --tag CC @CC@
CXX = $(LIBTOOL_COMPILE) --tag CXX @CXX@

And running ./configure, I receive the following error:

$ sudo make
(cd port; make)
make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
/bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile --tag CXX g++   -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp
libtool: ignoring unknown tag CXX
mkdir .libs
 g++ -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port -c cpl_conv.cpp  -fPIC -DPIC -o .libs/cpl_conv.o
/usr/local/gdal-1.4.0/libtool: line 1055: g++: command not found
make[1]: *** [cpl_conv.o] Error 1
make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
make: *** [port-target] Error 2

FWIW I have g++ 4.1.2 installed, with dev packages.

Shall I file a bug?

~ Eric.


From mateusz at loskot.net  Mon Apr  2 14:10:49 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer
	taggedconfiguration"
In-Reply-To: <CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com>
	<460F8B15.9070909@loskot.net>
	<CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <46114729.30308@loskot.net>

Patton, Eric wrote:
> Hi, 
> 
> After making the following edits to GDALmake.opt.in :
> 
> 1. Open GDALmake.opt.in file
> 2. Go to line 19
> 3. Replace
> 
> CC  = $(LIBTOOL_COMPILE) @CC@
> CXX = $(LIBTOOL_COMPILE) @CXX@
> 
> with
> 
> CC  = $(LIBTOOL_COMPILE) --tag CC @CC@
> CXX = $(LIBTOOL_COMPILE) --tag CXX @CXX@

Eric,

Please, could you try this one:

CC  = $(LIBTOOL_COMPILE) @CC@ --tag CC
CXX = $(LIBTOOL_COMPILE) @CXX@ --tag CXX

?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From epatton at nrcan.gc.ca  Mon Apr  2 14:26:29 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer
	taggedconfiguration"
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com>
	<460F8B15.9070909@loskot.net>
	<CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca>
	<46114729.30308@loskot.net>
Message-ID: <CA803441152AAE40935609509953BAD20F7101@s0-ott-x4.nrn.nrcan.gc.ca>

Mateusz,

This time make complains with:

$ sudo make
(cd port; make)
make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
/bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++ --tag CXX   -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp
libtool: compile: unable to infer tagged configuration
libtool: compile: specify a tag with `--tag'
make[1]: *** [cpl_conv.o] Error 1
make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
make: *** [port-target] Error 2

~ Eric.


-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net]
Sent: Mon 4/2/2007 3:10 PM
To: Patton, Eric
Cc: gdal
Subject: Re: [Gdal-dev] Make error "libtool: compile: unable to infer taggedconfiguration"
 
Eric,

Please, could you try this one:

CC  = $(LIBTOOL_COMPILE) @CC@ --tag CC
CXX = $(LIBTOOL_COMPILE) @CXX@ --tag CXX

?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net



From nabble at souiki.org  Mon Apr  2 14:44:55 2007
From: nabble at souiki.org (Zindine)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Tansverse Mercator South Oriented question
Message-ID: <9796511.post@talk.nabble.com>


I have the PROJCS below defined and it does not get validated by OGR.

I receive the error: OGRERR_UNSUPPORTED_SRS.

It was simply defined as follow:

        OGRSpatialReference    oTMSO;
        oTMSO.SetProjCS("TMSO Zone 29 / WGS84");
        oTMSO.SetWellKnownGeogCS( "WGS84" );
        oTMSO.SetTMSO(0,29,1,0,0);


Can anyone help me find the error? Thanks.


PROJCS[
                "unnamed"
                ,GEOGCS[
                        "WGS 84"
                        ,DATUM[
                                "WGS_1984"
                                ,SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]]
                                ,TOWGS84[0,0,0,0,0,0,0]
                                ,AUTHORITY["EPSG","6326"]
                        ]
                        ,PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]]
                       
,UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]]
                        ,AXIS["Lat",NORTH]
                        ,AXIS["Long",EAST]
                        ,AUTHORITY["EPSG","4326"]
                ]
                ,PROJECTION["Transverse_Mercator_South_Orientated"]
                ,PARAMETER["latitude_of_origin",0]
                ,PARAMETER["central_meridian",29]
                ,PARAMETER["scale_factor",1]
                ,PARAMETER["false_easting",0]
                ,PARAMETER["false_northing",0]
]
-- 
View this message in context: http://www.nabble.com/Tansverse-Mercator-South-Oriented-question-tf3507502.html#a9796511
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From roger at beardandsandals.co.uk  Mon Apr  2 20:36:31 2007
From: roger at beardandsandals.co.uk (Roger James)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Revision 1.8 to GMLHandler.cpp seems to have broken UK
	Ordnance Survey GML files
Message-ID: <000001c77588$20c59450$fd0ba8c0@lancaster.beardandsandals.co.uk>

The latest revision (1.8) to GMLHandler.cpp has broken the reading UK
ordnance survey GML files.
Polygon features in the Ordnance Survey schema look like this.

      <osgb:polygon>
        <gml:Polygon srsName="osgb:BNG">
          <gml:outerBoundaryIs>
            <gml:LinearRing>
              <gml:coordinates>347346.09,461580.61 347345.35,461585.4
347337.97,461584.11 347338.7,461579.38 347346.09,461580.61</gml:coordinates>
            </gml:LinearRing>
          </gml:outerBoundaryIs>
        </gml:Polygon>
      </osgb:polygon>

This used to work in GMLReader::PrescanForSchema because osgb:polygon was
not recognised as a Geometry Element by GMLHander:: IsGeometryElement.

However at 1.8 because the namespace has been stripped it is now recognised
as a polygon geometry element. This causes a subsequent failure in
GML2OGRGeometry_XMLNode because outerBoundaryIsland is no longer an
immediate child of the polygon node.

I am not sure if this is a fatal error because I got fed up of looking at
all the error messages on the large file I was processing!

How do I get past this?

Thanks

Roger




From warmerdam at pobox.com  Mon Apr  2 23:17:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Revision 1.8 to GMLHandler.cpp seems to have broken
	UK Ordnance Survey GML files
In-Reply-To: <000001c77588$20c59450$fd0ba8c0@lancaster.beardandsandals.co.uk>
References: <000001c77588$20c59450$fd0ba8c0@lancaster.beardandsandals.co.uk>
Message-ID: <4611C767.3080102@pobox.com>

Roger James wrote:
> The latest revision (1.8) to GMLHandler.cpp has broken the reading UK
> ordnance survey GML files.
> Polygon features in the Ordnance Survey schema look like this.
> 
>       <osgb:polygon>
>         <gml:Polygon srsName="osgb:BNG">
>           <gml:outerBoundaryIs>
>             <gml:LinearRing>
>               <gml:coordinates>347346.09,461580.61 347345.35,461585.4
> 347337.97,461584.11 347338.7,461579.38 347346.09,461580.61</gml:coordinates>
>             </gml:LinearRing>
>           </gml:outerBoundaryIs>
>         </gml:Polygon>
>       </osgb:polygon>
> 
> This used to work in GMLReader::PrescanForSchema because osgb:polygon was
> not recognised as a Geometry Element by GMLHander:: IsGeometryElement.
> 
> However at 1.8 because the namespace has been stripped it is now recognised
> as a polygon geometry element. This causes a subsequent failure in
> GML2OGRGeometry_XMLNode because outerBoundaryIsland is no longer an
> immediate child of the polygon node.
> 
> I am not sure if this is a fatal error because I got fed up of looking at
> all the error messages on the large file I was processing!

Roger,

I'm afraid your primary resort is to stick with the older version or use
a hacked newer version.  The GML reader is known to be unsafe because it
uses jiffy rules to decide what is a feature and what is a geometry instead
of parsing the schema file.  That it worked before with a feature class
name of polygon was quick lucky (in a sense), but I'm not willing to revert
the change.

What we ideally need is a new schema aware GML reader.  Till then we are only
going to support rather unambitious types of gml files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Apr  2 22:41:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL maintenance biweekly report - No. 2
Message-ID: <4611BECD.8050902@loskot.net>

Hi,

Here is the second biweekly report:

Resolved issues:
----------------

HFA reading code does not handle reduced precision properly
http://trac.osgeo.org/gdal/ticket/1000

XYMZ data in WKT leads to an error
http://trac.osgeo.org/gdal/ticket/1036

gdalnumeric does only support old Numeric package
http://trac.osgeo.org/gdal/ticket/1166

Naked ewkb from postigs (queried through python) causes OGR to segfault
http://trac.osgeo.org/gdal/ticket/1195

XYZM data cannot be read from wkb
http://trac.osgeo.org/gdal/ticket/1323

problem w/ date fields using ogr2ogr to load shapefile into postgis
http://trac.osgeo.org/gdal/ticket/1389

Additional fixes to VSI*L and "errno" setting.
http://trac.osgeo.org/gdal/ticket/1429

[OGR] Seg fault in ~OGRKMLDataSource()
http://trac.osgeo.org/gdal/ticket/1432

(Partially fixed) GetFeature() not implemented efficiently for server
based drivers
http://trac.osgeo.org/gdal/ticket/1445

class ERSHdrNode has no member named FindElem
http://trac.osgeo.org/gdal/ticket/1522

GIMP JPEG error, Spaced World File error
http://trac.osgeo.org/gdal/ticket/1523

Setup Nightly Snapshots
http://trac.osgeo.org/gdal/ticket/1539

Investigated and issues in progress:
------------------------------------
dal
[OGR-ODBC] : DECIMAL field not recognised
http://trac.osgeo.org/gdal/ticket/1321

NHD (ESRI) geodatabase reading problems
http://trac.osgeo.org/gdal/ticket/1484

Random crashes when using OGR SQL in -where clause
http://trac.osgeo.org/gdal/ticket/1528

Patch for mingw bug in strdup
http://trac.osgeo.org/gdal/ticket/1547

Other tasks:
------------

1. Added or improved tests of:
- FAST
- OGR PG
- HFA

2. GDAL sources refactoring and improvements

3. Cleaned 300 reports on Bugzilla after migration to Trac

4. SWIG Perl tests added to Buildbot

5. Tested GDAL with MinGW buildbot configuration (deferred)

6. Provided support (>30 posts)

7. Ad-hoc troubleshooting

8. Investigated and tested building SWIG Java, for Buildbot (deferred)

-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Tue Apr  3 01:01:05 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Bool vs int in bindings?
Message-ID: <4611DF91.7080007@perkins.net>

Hi,

A lot of the SWIG generated binding functions use ints as arguments and 
return types when a boolean type would be more appropriate, e.g. the OGR 
Open() method takes an int as the second argument to indicate whether 
the file should be opened with update access, and the 
SpatialReference.IsGeographic() method returns an int. It would be nice 
to use a more natural bool in these cases for languages that support it.

Would I be right in thinking that there's pretty much no way of changing 
this now without breaking a lot of code? What about just changing it for 
some of the newer bindings, e.g. C#, that have recently had breaking API 
changes applied anyway. I like the new enums, etc for the C# bindings in 
place of int constants, can we fix the bool vs int problem there as 
well? I'd be happy to do this if people want to fix it, and Tamas 
doesn't have time.

And while we're changing this, should wkbGeometryType be WkbGeometryType?

Cheers,

Simon


From brian.claywell at gmail.com  Tue Apr  3 03:24:30 2007
From: brian.claywell at gmail.com (Brian Claywell)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] preferred diff format
Message-ID: <eusvfh$m80$1@sea.gmane.org>

What's the preferred diff format for submitting patches? For example,
I'm currently using context diffs with three lines of context, e.g.,

diff -rc3 /usr/src/gdal-1.4.0/frmts/hfa/ frmts/hfa/ > hfa-no-data.patch

Are unified diffs preferable? I'm pretty new to submitting patches to
large projects.

Thanks!

-- 
Brian Claywell
brian.claywell@gmail.com


From neteler at itc.it  Tue Apr  3 04:22:11 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
In-Reply-To: <46112232.9090305@pobox.com>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
	<46110E4C.5040206@tkk.fi> <46112232.9090305@pobox.com>
Message-ID: <20070403082211.GB4164@bartok.itc.it>

On Mon, Apr 02, 2007 at 11:33:06AM -0400, Frank Warmerdam wrote:
> Ari Jolma wrote:
> >yadi wrote:
> >>
> >>I come from Indonesia
> >>
> >>Please help me, I want to create contour map (shape file) from XYZ 
> >>scattered points (from sensor of groundwater system) by script
> >>
> >
> >http://gdal.org/gdal_contour.html but first you need to interpolate the 
> >points to the raster somehow
> 
> Yadi,
> 
> I'd suggest looking at GRASS for your task.  It includes methods to
> interpolate points to a raster.  I think it also includes contour generation
> from a raster, but if not you can fall back on the gdal_contour program.

Yadi,

see here for some pointers:
http://grass.itc.it/grass63/manuals/html63_user/rasterintro.html
-> Raster map resampling and interpolation methods


Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From thekla.wirkus at wheregroup.com  Tue Apr  3 08:19:59 2007
From: thekla.wirkus at wheregroup.com (Thekla Wirkus)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] problems with average
In-Reply-To: <45FEB64B.5000002@pobox.com>
References: <45FE509B.5020801@wheregroup.com> <45FEB64B.5000002@pobox.com>
Message-ID: <4612466F.9020105@wheregroup.com>

Hi,

the problem is undissolved. With
gdaladdo -r nearest bild_8bit.tif 2 4 8 16
the result-TIF has mistakes at page 2-5 too.

Best regards
Thekla Wirkus



Frank Warmerdam schrieb:
> Thekla Wirkus wrote:
>> Hi,
>>
>> I have problems with creating a multipage-TIF with:
>> gdaladdo -r average bild_8bit.tif 2 4 8 16
>> the result-TIF has mistakes at page 2-5, page 1 is OK. The hatches are 
>> normally single colors but after using gdaladdo -r average ...
>> they are shown with multicolors and they are blurred.
>>
>> See the result at:
>> http://wms1.ccgis.de/mapbender_dev/tmp/ergebnis_bild_8bit.tif
> 
> Thekla,
> 
> Average downsampling is inappropriate for discontinuous images.  That
> is images where nearby pixel values are not necessarily nearby colors.
> Your image has a colormap (and not just a continuous color ramp) and so
> fall into this category.
> 
> You should use the default nearest neighbour downsampling instead of
> using "-r average".
> 
> Best regards,


-- 
Mit freundlichen Gr??en
Thekla Wirkus




---------------------------------------
WhereGroup GmbH & Co. KG
Siemensstra?e 8
53121 Bonn
Germany
-------------------------------
Fon: +49 (0)228 / 90 90 38 - 16
Fax: +49 (0)228 / 90 90 38 - 11
-------------------------------
mailto:info@wheregroup.com
http://www.wheregroup.com
-------------------------------
Komplement?rin:
WhereGroup Verwaltungs GmbH
vertreten durch:
Arnulf Christl, Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRA 6788
---------------------------------------

From hobu at iastate.edu  Tue Apr  3 09:20:51 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Bool vs int in bindings?
In-Reply-To: <4611DF91.7080007@perkins.net>
References: <4611DF91.7080007@perkins.net>
Message-ID: <D76DF011-2680-404A-8CAD-603C3542D4EB@iastate.edu>

Simon,

Regarding the booleans, I am pretty strongly against this idea  
because it would mean a lot of divergent maintenance for languages  
that *don't* support boolean types, and GDAL itself uses ints which  
would mean we would have to have language-specific coercion.  It  
seems like a lot of pain for little benefit.

Regarding renaming, I'm ok with proper namespaces and using enums,  
but language-specific renames to follow its language conventions  
seems like a road to hell paved with good intentions.  I agree that  
GDAL/OGR's swig bindings are indeed rough in some places and are  
often not ideal as far as ease of use and following the norms of all  
of the languages it supports.  In my opinion, the purpose of the swig  
bindings is not to provide an ideal development library for  
geographic data manipulation in every language supported -- instead  
its purpose is to provide *access* to the GDAL/OGR/OSR facilities in  
as many languages as possible.  This means compromise in a number of  
areas, with naming conventions, calling conventions, and many  
language norms being some of them.

One approach you might take if you are wishing to smooth over the  
rough spots of the swig bindings in your language is to develop a  
wrapper library.  For example, the Python Cartographic Library  
provides a more unified approach to data access, including GDAL/OGR  
through wrapping the swig API, and it more closely follows Python's  
language norms in the process.

SWIG^H^H^H^Hcompromise-is-the-art-of-spreading-misery-ly y'rs*

Howard

*<http://www.amk.ca/quotations/python-quotes/page-10>

On Apr 3, 2007, at 12:01 AM, Simon Perkins wrote:

> Hi,
>
> A lot of the SWIG generated binding functions use ints as arguments  
> and return types when a boolean type would be more appropriate,  
> e.g. the OGR Open() method takes an int as the second argument to  
> indicate whether the file should be opened with update access, and  
> the SpatialReference.IsGeographic() method returns an int. It would  
> be nice to use a more natural bool in these cases for languages  
> that support it.
>
> Would I be right in thinking that there's pretty much no way of  
> changing this now without breaking a lot of code? What about just  
> changing it for some of the newer bindings, e.g. C#, that have  
> recently had breaking API changes applied anyway. I like the new  
> enums, etc for the C# bindings in place of int constants, can we  
> fix the bool vs int problem there as well? I'd be happy to do this  
> if people want to fix it, and Tamas doesn't have time.
>
> And while we're changing this, should wkbGeometryType be  
> WkbGeometryType?
>
> Cheers,
>
> Simon
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From jbeverage at prologic-inc.com  Tue Apr  3 10:03:43 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Dataset.BuildOverviews signature in C# bindings
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D035C447D@vader.prologic-inc.com>

All,

I'm playing with the C# bindings and I noticed that the BuildOverviews
method in Dataset has the signature:

int BuildOverviews(string resampling, int overviewlist)

The C++ signature has many more arguments, and it seems like at the very
least you have to pass in an array of overview levels instead of just a
single int for the overviewlist to have the method do anything
meaningful.

I would imagine the SWIG files need updating to correct the signature,
but I'm not sure where the change would need to be made exactly.

Just wanted to bring this to your attention before the 1.4.1 release if
its just a quick fix.

Thanks!

Jason


From ari.jolma at tkk.fi  Tue Apr  3 10:15:35 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] new user
In-Reply-To: <20070403082211.GB4164@bartok.itc.it>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
	<46110E4C.5040206@tkk.fi> <46112232.9090305@pobox.com>
	<20070403082211.GB4164@bartok.itc.it>
Message-ID: <46126187.6080202@tkk.fi>

Markus Neteler wrote:
>>> http://gdal.org/gdal_contour.html but first you need to interpolate the 
>>> points to the raster somehow
>>>       
> see here for some pointers:
> http://grass.itc.it/grass63/manuals/html63_user/rasterintro.html
> -> Raster map resampling and interpolation methods
>   

One of our grad students just had a similar problem and I told her to 
google for kriging. Why's there no kriging in these methods?

Ari

>
> Markus
>
> ------------------
> ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
> ITC -> since 1 March 2007 Fondazione Bruno Kessler
> ------------------
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From milo at 3dsite.nl  Tue Apr  3 10:27:24 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Caris NTX support
Message-ID: <4612644C.4000902@3dsite.nl>

    Hello list,

I ran into Caris NTX files. These are files used by the dutch 
hydrographic service. There is a NTXtoShape project on sourceforge, but 
development stopped in 2003.

Would it be an idea to embed this NTXtoShape functionality in OGR?

Kind regards,

Milo van der Linden

From warmerdam at pobox.com  Tue Apr  3 12:39:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Dataset.BuildOverviews signature in C# bindings
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D035C447D@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D035C447D@vader.prologic-inc.com>
Message-ID: <4612833C.8020007@pobox.com>

Jason Beverage wrote:
> All,
> 
> I'm playing with the C# bindings and I noticed that the BuildOverviews
> method in Dataset has the signature:
> 
> int BuildOverviews(string resampling, int overviewlist)
> 
> The C++ signature has many more arguments, and it seems like at the very
> least you have to pass in an array of overview levels instead of just a
> single int for the overviewlist to have the method do anything
> meaningful.
> 
> I would imagine the SWIG files need updating to correct the signature,
> but I'm not sure where the change would need to be made exactly.
> 
> Just wanted to bring this to your attention before the 1.4.1 release if
> its just a quick fix.

Jason,

Please file a bug now, and it might be correctable in time for 1.4.1.

Looking at the generic swig declaration it should at least have the
overview list as an array so perhaps there is a typemapping issue.

   // The (int,int*) arguments are typemapped.  The name of the first argument
   // becomes the kwarg name for it.
%feature("kwargs") BuildOverviews;
%apply (int nList, int* pList) { (int overviewlist, int *pOverviews) };
   int BuildOverviews( const char *resampling = "NEAREST",
                       int overviewlist = 0 , int *pOverviews = 0 ) {
     return GDALBuildOverviews( self, resampling, overviewlist, pOverviews, 0, 
0, 0, 0);
   }
%clear (int overviewlist, int *pOverviews);

The swig bindings don't support the callback interface for progress on this or
other methods with progress callacks (unfortunately).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Tue Apr  3 11:16:17 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Bool vs int in bindings?
In-Reply-To: <4611DF91.7080007@perkins.net>
References: <4611DF91.7080007@perkins.net>
Message-ID: <f3b73b7d0704030816v69082572y974d3f8dfdc81a9f@mail.gmail.com>

2007/4/3, Simon Perkins <sy@perkins.net>:
> Hi,
>
> A lot of the SWIG generated binding functions use ints as arguments and
> return types when a boolean type would be more appropriate, e.g. the OGR
> Open() method takes an int as the second argument to indicate whether
> the file should be opened with update access, and the
> SpatialReference.IsGeographic() method returns an int. It would be nice
> to use a more natural bool in these cases for languages that support it.
>
> Would I be right in thinking that there's pretty much no way of changing
> this now without breaking a lot of code? What about just changing it for
> some of the newer bindings, e.g. C#, that have recently had breaking API
> changes applied anyway. I like the new enums, etc for the C# bindings in
> place of int constants, can we fix the bool vs int problem there as
> well? I'd be happy to do this if people want to fix it, and Tamas
> doesn't have time.
>

Simon,

I would object to fix this issue only for the C# interface. The only
solution I can accept is to define a specific type for the booleans
(like GDAL_BOOL etc.) in the GDAL core and the various bindings can
create proper typemaps to map this type to the corresponting language
specific type. Without adding these typemaps the created interface
could fall back to the current integer based implementation.

> And while we're changing this, should wkbGeometryType be WkbGeometryType?
>

The benefit of this change is not obvious for me, but would bring in
unacceptable divergence between the various bindings and we would not
want to create separate reference documentation specifically for a
particular language.

Best regards,

Tamas

From szekerest at gmail.com  Tue Apr  3 11:44:28 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Dataset.BuildOverviews signature in C# bindings
In-Reply-To: <4612833C.8020007@pobox.com>
References: <2DBB9F887DAA394FA75D98474EA5730D035C447D@vader.prologic-inc.com>
	<4612833C.8020007@pobox.com>
Message-ID: <f3b73b7d0704030844j5d26d50fw1c5e2f625e78475@mail.gmail.com>

Hi,

I think it can be fixed easily, the callback function can be
implemented through the concept of delegates in C# as well. However we
should decide the C# equivalent type of 'void *   	 pProgressData'
would the C# string type sufficient?
Please create a ticket on it and assign to the CSharpBindings component.


Best regards,


2007/4/3, Frank Warmerdam <warmerdam@pobox.com>:
> Jason Beverage wrote:
> > All,
> >
> > I'm playing with the C# bindings and I noticed that the BuildOverviews
> > method in Dataset has the signature:
> >
> > int BuildOverviews(string resampling, int overviewlist)
> >
> > The C++ signature has many more arguments, and it seems like at the very
> > least you have to pass in an array of overview levels instead of just a
> > single int for the overviewlist to have the method do anything
> > meaningful.
> >
> > I would imagine the SWIG files need updating to correct the signature,
> > but I'm not sure where the change would need to be made exactly.
> >
> > Just wanted to bring this to your attention before the 1.4.1 release if
> > its just a quick fix.
>
> Jason,
>
> Please file a bug now, and it might be correctable in time for 1.4.1.
>
> Looking at the generic swig declaration it should at least have the
> overview list as an array so perhaps there is a typemapping issue.
>
>    // The (int,int*) arguments are typemapped.  The name of the first argument
>    // becomes the kwarg name for it.
> %feature("kwargs") BuildOverviews;
> %apply (int nList, int* pList) { (int overviewlist, int *pOverviews) };
>    int BuildOverviews( const char *resampling = "NEAREST",
>                        int overviewlist = 0 , int *pOverviews = 0 ) {
>      return GDALBuildOverviews( self, resampling, overviewlist, pOverviews, 0,
> 0, 0, 0);
>    }
> %clear (int overviewlist, int *pOverviews);
>
> The swig bindings don't support the callback interface for progress on this or
> other methods with progress callacks (unfortunately).
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Tue Apr  3 14:01:13 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Dataset.BuildOverviews signature in C# bindings
In-Reply-To: <f3b73b7d0704030844j5d26d50fw1c5e2f625e78475@mail.gmail.com>
References: <2DBB9F887DAA394FA75D98474EA5730D035C447D@vader.prologic-inc.com>
	<4612833C.8020007@pobox.com>
	<f3b73b7d0704030844j5d26d50fw1c5e2f625e78475@mail.gmail.com>
Message-ID: <46129669.9090006@pobox.com>

Tamas Szekeres wrote:
> Hi,
> 
> I think it can be fixed easily, the callback function can be
> implemented through the concept of delegates in C# as well. However we
> should decide the C# equivalent type of 'void *        pProgressData'
> would the C# string type sufficient?
> Please create a ticket on it and assign to the CSharpBindings component.

BTW,

If we are going to do callbacks, I don't think it should be in 1.4.1.  I
was just wanting to fix passing the overview list immediately.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Apr  3 14:10:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Caris NTX support
In-Reply-To: <4612644C.4000902@3dsite.nl>
References: <4612644C.4000902@3dsite.nl>
Message-ID: <4612989C.80703@pobox.com>

Milo van der Linden wrote:
>    Hello list,
> 
> I ran into Caris NTX files. These are files used by the dutch 
> hydrographic service. There is a NTXtoShape project on sourceforge, but 
> development stopped in 2003.
> 
> Would it be an idea to embed this NTXtoShape functionality in OGR?

Milo,

Yes, I think this might be desirable.  But I suspect maintaining a good
NTX reader may be a fair bit of work, and I have had no client interest.

So if you, or someone else would like to take on the task it would be
great.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From milo at 3dsite.nl  Tue Apr  3 12:16:13 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Caris NTX support
In-Reply-To: <4612989C.80703@pobox.com>
References: <4612644C.4000902@3dsite.nl> <4612989C.80703@pobox.com>
Message-ID: <46127DCD.1030909@3dsite.nl>

Hello Frank,

In this particular case where I do have a client, I wouldn't mind to 
invest in someone's development cost. I am not that good at writing C++  
and I surely do not know how it could best be integrated in the OGR 
system. If there would be any suggestions on that part they are welcome, 
I would like to give it a try, but if someone is interested in getting 
his or her development costs covered doing this, that would also be 
appriciated. Since development on ntxshape has stopped in 2003, I don't 
think the original developers would mind if we took over their code?

Frank Warmerdam schreef:
> Milo van der Linden wrote:
>>    Hello list,
>>
>> I ran into Caris NTX files. These are files used by the dutch 
>> hydrographic service. There is a NTXtoShape project on sourceforge, 
>> but development stopped in 2003.
>>
>> Would it be an idea to embed this NTXtoShape functionality in OGR?
>
> Milo,
>
> Yes, I think this might be desirable.  But I suspect maintaining a good
> NTX reader may be a fair bit of work, and I have had no client interest.
>
> So if you, or someone else would like to take on the task it would be
> great.
>
> Best regards,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070403/197b0c8f/attachment.html
From neteler at itc.it  Tue Apr  3 12:29:58 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] new user
In-Reply-To: <46126187.6080202@tkk.fi>
References: <A2CB2DE1AE4CA0428FF899E51188456A4881B3@MAIL.tekmira.esdm.go.id>
	<46110E4C.5040206@tkk.fi> <46112232.9090305@pobox.com>
	<20070403082211.GB4164@bartok.itc.it> <46126187.6080202@tkk.fi>
Message-ID: <20070403162958.GG19042@bartok.itc.it>

On Tue, Apr 03, 2007 at 05:15:35PM +0300, Ari Jolma wrote:
> Markus Neteler wrote:
> >>>http://gdal.org/gdal_contour.html but first you need to interpolate the 
> >>>points to the raster somehow
> >>>      
> >see here for some pointers:
> >http://grass.itc.it/grass63/manuals/html63_user/rasterintro.html
> >-> Raster map resampling and interpolation methods
> >  
> 
> One of our grad students just had a similar problem and I told her to 
> google for kriging. Why's there no kriging in these methods?
 
Ari,

there are currently three possibilities:
- use gstat with GRASS-interface,
- use R with GRASS-interface,
- or simply use v.variogram/v.surf.krige from the Addons section
  http://grass.gdf-hannover.de/wiki/GRASS_AddOns#Vector_add-ons

Since we cannot make R a GRASS dependency, it's in
the separate Addons section.

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From sy at perkins.net  Tue Apr  3 12:40:55 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Bool vs int in bindings?
In-Reply-To: <D76DF011-2680-404A-8CAD-603C3542D4EB@iastate.edu>
References: <4611DF91.7080007@perkins.net>
	<D76DF011-2680-404A-8CAD-603C3542D4EB@iastate.edu>
Message-ID: <46128397.2030409@perkins.net>

Hi Howard and Tamas,

Thanks for putting me straight on this. You've convinced me!

I shall suppress my overdeveloped aesthetic sense and continue to be 
grateful that I can use the splendid GDAL library with C# so easily...

Cheers!

Sy


Howard Butler wrote:
> Simon,
>
> Regarding the booleans, I am pretty strongly against this idea because 
> it would mean a lot of divergent maintenance for languages that 
> *don't* support boolean types, and GDAL itself uses ints which would 
> mean we would have to have language-specific coercion.  It seems like 
> a lot of pain for little benefit.
>
> Regarding renaming, I'm ok with proper namespaces and using enums, but 
> language-specific renames to follow its language conventions seems 
> like a road to hell paved with good intentions.  I agree that 
> GDAL/OGR's swig bindings are indeed rough in some places and are often 
> not ideal as far as ease of use and following the norms of all of the 
> languages it supports.  In my opinion, the purpose of the swig 
> bindings is not to provide an ideal development library for geographic 
> data manipulation in every language supported -- instead its purpose 
> is to provide *access* to the GDAL/OGR/OSR facilities in as many 
> languages as possible.  This means compromise in a number of areas, 
> with naming conventions, calling conventions, and many language norms 
> being some of them.
>
> One approach you might take if you are wishing to smooth over the 
> rough spots of the swig bindings in your language is to develop a 
> wrapper library.  For example, the Python Cartographic Library 
> provides a more unified approach to data access, including GDAL/OGR 
> through wrapping the swig API, and it more closely follows Python's 
> language norms in the process.
>
> SWIG^H^H^H^Hcompromise-is-the-art-of-spreading-misery-ly y'rs*
>
> Howard
>
> *<http://www.amk.ca/quotations/python-quotes/page-10>
>
> On Apr 3, 2007, at 12:01 AM, Simon Perkins wrote:
>
>> Hi,
>>
>> A lot of the SWIG generated binding functions use ints as arguments 
>> and return types when a boolean type would be more appropriate, e.g. 
>> the OGR Open() method takes an int as the second argument to indicate 
>> whether the file should be opened with update access, and the 
>> SpatialReference.IsGeographic() method returns an int. It would be 
>> nice to use a more natural bool in these cases for languages that 
>> support it.
>>
>> Would I be right in thinking that there's pretty much no way of 
>> changing this now without breaking a lot of code? What about just 
>> changing it for some of the newer bindings, e.g. C#, that have 
>> recently had breaking API changes applied anyway. I like the new 
>> enums, etc for the C# bindings in place of int constants, can we fix 
>> the bool vs int problem there as well? I'd be happy to do this if 
>> people want to fix it, and Tamas doesn't have time.
>>
>> And while we're changing this, should wkbGeometryType be 
>> WkbGeometryType?
>>
>> Cheers,
>>
>> Simon
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>


From warmerdam at pobox.com  Tue Apr  3 22:00:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] perl tests
Message-ID: <461306C1.9020408@pobox.com>

Ari,

I believe Ivan has fixed the problem with the IdrisiDataset and
SetGeoTransform.  But it seems various perl tests are still failing at:

   http://buildbot.osgeo.org:8500/telascience-quick/builds/82/step-perl-test/0

It looks ogr related, but I'm rather at a loss as to you to relate these
failures to formats or features.  Could you take a look?

I'd really like to get to the point where the perl tests pass as their
failure is sucking all the joy out of visiting the buildbot page.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Apr  3 22:05:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] preferred diff format
In-Reply-To: <eusvfh$m80$1@sea.gmane.org>
References: <eusvfh$m80$1@sea.gmane.org>
Message-ID: <461307D8.1090009@pobox.com>

Brian Claywell wrote:
> What's the preferred diff format for submitting patches? For example,
> I'm currently using context diffs with three lines of context, e.g.,
> 
> diff -rc3 /usr/src/gdal-1.4.0/frmts/hfa/ frmts/hfa/ > hfa-no-data.patch
> 
> Are unified diffs preferable? I'm pretty new to submitting patches to
> large projects.

Brian,

For what it's worth, I'm never sure how to prepare could diffs for patches
either.  I often patches I receive manually so context diffs with some
context sound good.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Apr  3 20:27:12 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] preferred diff format
In-Reply-To: <eusvfh$m80$1@sea.gmane.org>
References: <eusvfh$m80$1@sea.gmane.org>
Message-ID: <4612F0E0.8000001@loskot.net>

Brian Claywell wrote:
> What's the preferred diff format for submitting patches? For example,
>  I'm currently using context diffs with three lines of context, e.g.,
> 
> 
> diff -rc3 /usr/src/gdal-1.4.0/frmts/hfa/ frmts/hfa/ >
> hfa-no-data.patch

If you can generate diff from working copy of GDAL SVN, then
please use 'svn diff' command.

> Are unified diffs preferable? I'm pretty new to submitting patches to
>  large projects.

Personally, when I generate patches with diff from GNU Diffutils,
I use 'diff -Nua' command, but when I apply "manually generated"
patches, I always do it manually.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From ari.jolma at tkk.fi  Wed Apr  4 02:10:58 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: perl tests
In-Reply-To: <461306C1.9020408@pobox.com>
References: <461306C1.9020408@pobox.com>
Message-ID: <46134172.2020403@tkk.fi>

Frank Warmerdam wrote:
> Ari,
>
> I believe Ivan has fixed the problem with the IdrisiDataset and
> SetGeoTransform.  But it seems various perl tests are still failing at:
>
>   
> http://buildbot.osgeo.org:8500/telascience-quick/builds/82/step-perl-test/0 
>
>
> It looks ogr related, but I'm rather at a loss as to you to relate these
> failures to formats or features.  Could you take a look?

Should be better now. The test code uses only hand-picked drivers for 
the tests. What would be the best ones, i.e., those which cover all or 
most of the methods? Now I set GTiff, MEM, EHdr (GDAL) and ESRI 
Shapefile, MapInfo File, Memory (OGR).

My intention has been to start building tests that specifically test the 
binding methods, also their behavior in the case of an error (no core 
dumps, a textual error message). The current approach was the first easy 
shot to test the basic common methods. Out of curiosity I made it to 
test all drivers that are at hand.

Ari

>
> I'd really like to get to the point where the perl tests pass as their
> failure is sucking all the joy out of visiting the buildbot page.
>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Wed Apr  4 08:54:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: perl tests
In-Reply-To: <46134172.2020403@tkk.fi>
References: <461306C1.9020408@pobox.com> <46134172.2020403@tkk.fi>
Message-ID: <4613A01F.3060701@pobox.com>

Ari Jolma wrote:
> Should be better now. The test code uses only hand-picked drivers for 
> the tests. What would be the best ones, i.e., those which cover all or 
> most of the methods? Now I set GTiff, MEM, EHdr (GDAL) and ESRI 
> Shapefile, MapInfo File, Memory (OGR).
> 
> My intention has been to start building tests that specifically test the 
> binding methods, also their behavior in the case of an error (no core 
> dumps, a textual error message). The current approach was the first easy 
> shot to test the basic common methods. Out of curiosity I made it to 
> test all drivers that are at hand.

Ari,

If the objective is to test the API, I'd think that testing one full
featured raster format, and one full featured vector format would
be sufficient.  The MEM and Memory formats are the two obvious candidates
for full featured-ness.  For real formats the GTiff and Shapefile are pretty
full featured though each format has a few particular limitations as well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Apr  4 08:59:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Bindings Maintainers Upgrade to SWIG 1.3.31
In-Reply-To: <20070404055057.69A2312A845E@lists.osgeo.org>
References: <20070404055057.69A2312A845E@lists.osgeo.org>
Message-ID: <4613A116.1070503@pobox.com>

svn_gdal@osgeo.org wrote:
> Author: ajolma
> Date: 2007-04-04 01:50:57 -0400 (Wed, 04 Apr 2007)
> New Revision: 11200
> 
> Modified:
>    trunk/gdal/swig/perl/gdal_wrap.cpp
>    trunk/gdal/swig/perl/t/gdal.t
>    trunk/gdal/swig/perl/t/ogr.t
> Log:
> tests for only hand-picked drivers
> 
> 
> Modified: trunk/gdal/swig/perl/gdal_wrap.cpp
> ===================================================================
> --- trunk/gdal/swig/perl/gdal_wrap.cpp	2007-04-04 00:55:43 UTC (rev 11199)
> +++ trunk/gdal/swig/perl/gdal_wrap.cpp	2007-04-04 05:50:57 UTC (rev 11200)
> @@ -1,6 +1,6 @@
>  /* ----------------------------------------------------------------------------
>   * This file was automatically generated by SWIG (http://www.swig.org).
> - * Version 1.3.31
> + * Version 1.3.29

Folks,

I think it would be prudent for all the bindings developers to use SWIG
1.3.31 now so that we don't tromp over each others generated files with
ones from a different versions.

I'm also guilty and need to upgrade!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woodbri at swoodbridge.com  Wed Apr  4 09:02:06 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Question on building external overviews
Message-ID: <4613A1CE.8000209@swoodbridge.com>

Hi guys,

I took this approach to building external overviews, but all my images 
seem to be gray in mapserver and appear to be all nodata values in the 
file. Any idea what I'm doing wrong here?

I have a directory of of 16x16 tiles that fill a one degree block.
I want to make 4x4 overview files with 4x4 of the original tiles.
ie: 4x4 original tiles into 1 overview

So for the first tile, I create the output tile like this

gdal_translate -of GTiff -co \"TILED=YES\" -outsize 3200 3200 -a_srs 
EPSG:4326 -a_nodata 0 -a_ullr $top $left $bot $right $inf $outf

then for each additional tile I mosaic them into $outf like this:

gdalwarp --config GDAL_ONE_BIG_READ ON -srcnodata 0 -rc -wm 150 $inf $outf

Any help would be appreciated.

Thanks,
   -Steve

Here is what the $outf looks like:

[swoodbridge@booboo tile-repository]$ gdalinfo OV1/B-100_27/T-100_27-03.tif
Driver: GTiff/GeoTIFF
Size is 3200, 3200
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (28.000000000000000,-100.437500000000000)
Pixel Size = (-0.000078125000000,0.000078125000000)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (      28.000,    -100.438) ( 28d 0'0.00"E,100d26'15.00"S)
Lower Left  (      28.000,    -100.188) ( 28d 0'0.00"E,100d11'15.00"S)
Upper Right (      27.750,    -100.438) ( 27d45'0.00"E,100d26'15.00"S)
Lower Right (      27.750,    -100.188) ( 27d45'0.00"E,100d11'15.00"S)
Center      (      27.875,    -100.312) ( 27d52'30.00"E,100d18'45.00"S)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
   NoData Value=0
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
   NoData Value=0
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
   NoData Value=0

From warmerdam at pobox.com  Wed Apr  4 09:44:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Question on building external overviews
In-Reply-To: <4613A1CE.8000209@swoodbridge.com>
References: <4613A1CE.8000209@swoodbridge.com>
Message-ID: <4613ABB5.4070409@pobox.com>

Stephen Woodbridge wrote:
> Hi guys,
> 
> I took this approach to building external overviews, but all my images 
> seem to be gray in mapserver and appear to be all nodata values in the 
> file. Any idea what I'm doing wrong here?
> 
> I have a directory of of 16x16 tiles that fill a one degree block.
> I want to make 4x4 overview files with 4x4 of the original tiles.
> ie: 4x4 original tiles into 1 overview
> 
> So for the first tile, I create the output tile like this
> 
> gdal_translate -of GTiff -co \"TILED=YES\" -outsize 3200 3200 -a_srs 
> EPSG:4326 -a_nodata 0 -a_ullr $top $left $bot $right $inf $outf
> 
> then for each additional tile I mosaic them into $outf like this:
> 
> gdalwarp --config GDAL_ONE_BIG_READ ON -srcnodata 0 -rc -wm 150 $inf $outf
> 
> Any help would be appreciated.

Steve,

I don't see any obvious problem with the process.  When you say they are
grey in mapserver, do you mean "greyscale" or a single constant grey?

If you can reproduce the problem with a small dataset I would be happy to
try it here and comment.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woodbri at swoodbridge.com  Wed Apr  4 10:06:14 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Question on building external overviews
In-Reply-To: <4613ABB5.4070409@pobox.com>
References: <4613A1CE.8000209@swoodbridge.com> <4613ABB5.4070409@pobox.com>
Message-ID: <4613B0D6.9070309@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Hi guys,
>>
>> I took this approach to building external overviews, but all my images 
>> seem to be gray in mapserver and appear to be all nodata values in the 
>> file. Any idea what I'm doing wrong here?
>>
>> I have a directory of of 16x16 tiles that fill a one degree block.
>> I want to make 4x4 overview files with 4x4 of the original tiles.
>> ie: 4x4 original tiles into 1 overview
>>
>> So for the first tile, I create the output tile like this
>>
>> gdal_translate -of GTiff -co \"TILED=YES\" -outsize 3200 3200 -a_srs 
>> EPSG:4326 -a_nodata 0 -a_ullr $top $left $bot $right $inf $outf

I set $top $left $bot $right to the extents shown in the gdalinfo in the 
prior post, which is 4 times larger in x and y then the original tiles 
and $inf is one of the original tiles that is 1/16 the size of the 
output area.

>> then for each additional tile I mosaic them into $outf like this:
>>
>> gdalwarp --config GDAL_ONE_BIG_READ ON -srcnodata 0 -rc -wm 150 $inf 
>> $outf

Again $inf is one of the original tile that are 1/16 the size of the 
output area.

>> Any help would be appreciated.
> 
> Steve,
> 
> I don't see any obvious problem with the process.  When you say they are
> grey in mapserver, do you mean "greyscale" or a single constant grey?

a single constant grey

> If you can reproduce the problem with a small dataset I would be happy to
> try it here and comment.

I will see if I can do that with just 2 input files.

Thank you,
   -Steve

From epatton at nrcan.gc.ca  Wed Apr  4 10:49:47 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer
	taggedconfiguration"
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com>
	<460F8B15.9070909@loskot.net>
	<CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca>
	<46114729.30308@loskot.net>
Message-ID: <CA803441152AAE40935609509953BAD20F7104@s0-ott-x4.nrn.nrcan.gc.ca>

After some more digging around in Synaptic and installing some more packages, (specifically, unixodbc and libpq), the "unable to infer taggedconfiguration" error has vanished. I proceeded normally with make, and I received and error about libstdc++.la not being in /usr/lib. Synaptic reports that the libstdc++6.4.1-dbg package installed libstdc++.a and libstdc++.la in /usr/local/debug. So I created a symlink for each libstdc++ archive file:

$ pwd
/usr/lib

$ sudo ln -s debug/libstdc++.a libstdc++.a
$ sudo ln -s debug/libstdc++.la libstdc++.la


and re-ran make, which completed without the aforementioned "libstdc++.la not found in /usr/lib" error.

Curiously, though, the last three lines of the 'make install' output read:

ldconfig: /usr/local/lib/libproj.so.0 is not a symbolic link

ldconfig: /usr/local/lib/libgeos.so.2 is not a symbolic link

ldconfig: /usr/local/lib/libgeos_c.so.1 is not a symbolic link

Is this a problem? gdalinfo --version reports:

$ gdalinfo --version
GDAL 1.4.0.0, released 2007/01/02

So, can I assume that I have a healthy GDAL installation? 


~ Eric.

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net]
Sent: Mon 4/2/2007 3:10 PM
To: Patton, Eric
Cc: gdal
Subject: Re: [Gdal-dev] Make error "libtool: compile: unable to infer taggedconfiguration"
 
Patton, Eric wrote:
> Hi, 
> 
> After making the following edits to GDALmake.opt.in :
> 
> 1. Open GDALmake.opt.in file
> 2. Go to line 19
> 3. Replace
> 
> CC  = $(LIBTOOL_COMPILE) @CC@
> CXX = $(LIBTOOL_COMPILE) @CXX@
> 
> with
> 
> CC  = $(LIBTOOL_COMPILE) --tag CC @CC@
> CXX = $(LIBTOOL_COMPILE) --tag CXX @CXX@

Eric,

Please, could you try this one:

CC  = $(LIBTOOL_COMPILE) @CC@ --tag CC
CXX = $(LIBTOOL_COMPILE) @CXX@ --tag CXX

?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net



From epatton at nrcan.gc.ca  Wed Apr  4 10:53:24 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to
	infertaggedconfiguration"
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com><460F8B15.9070909@loskot.net><CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca><46114729.30308@loskot.net>
	<CA803441152AAE40935609509953BAD20F7104@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <CA803441152AAE40935609509953BAD20F7105@s0-ott-x4.nrn.nrcan.gc.ca>

CORRECTION:

"Synaptic reports that the libstdc++6.4.1-dbg package installed libstdc++.a and libstdc++.la in /usr/local/debug"

Should read:

Synaptic reports that the libstdc++6.4.1-dbg package installed libstdc++.a and libstdc++.la in /usr/lib/debug"

Sorry,

~ Eric.

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org on behalf of Patton, Eric
Sent: Wed 4/4/2007 11:49 AM
To: Mateusz Loskot
Cc: gdal
Subject: RE: [Gdal-dev] Make error "libtool: compile: unable to infertaggedconfiguration"
 
After some more digging around in Synaptic and installing some more packages, (specifically, unixodbc and libpq), the "unable to infer taggedconfiguration" error has vanished. I proceeded normally with make, and I received and error about libstdc++.la not being in /usr/lib. Synaptic reports that the libstdc++6.4.1-dbg package installed libstdc++.a and libstdc++.la in /usr/local/debug. So I created a symlink for each libstdc++ archive file:

$ pwd
/usr/lib

$ sudo ln -s debug/libstdc++.a libstdc++.a
$ sudo ln -s debug/libstdc++.la libstdc++.la


and re-ran make, which completed without the aforementioned "libstdc++.la not found in /usr/lib" error.

Curiously, though, the last three lines of the 'make install' output read:

ldconfig: /usr/local/lib/libproj.so.0 is not a symbolic link

ldconfig: /usr/local/lib/libgeos.so.2 is not a symbolic link

ldconfig: /usr/local/lib/libgeos_c.so.1 is not a symbolic link

Is this a problem? gdalinfo --version reports:

$ gdalinfo --version
GDAL 1.4.0.0, released 2007/01/02

So, can I assume that I have a healthy GDAL installation? 


~ Eric.

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net]
Sent: Mon 4/2/2007 3:10 PM
To: Patton, Eric
Cc: gdal
Subject: Re: [Gdal-dev] Make error "libtool: compile: unable to infer taggedconfiguration"
 
Patton, Eric wrote:
> Hi, 
> 
> After making the following edits to GDALmake.opt.in :
> 
> 1. Open GDALmake.opt.in file
> 2. Go to line 19
> 3. Replace
> 
> CC  = $(LIBTOOL_COMPILE) @CC@
> CXX = $(LIBTOOL_COMPILE) @CXX@
> 
> with
> 
> CC  = $(LIBTOOL_COMPILE) --tag CC @CC@
> CXX = $(LIBTOOL_COMPILE) --tag CXX @CXX@

Eric,

Please, could you try this one:

CC  = $(LIBTOOL_COMPILE) @CC@ --tag CC
CXX = $(LIBTOOL_COMPILE) @CXX@ --tag CXX

?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From mateusz at loskot.net  Wed Apr  4 11:03:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to 
	infertaggedconfiguration"
In-Reply-To: <CA803441152AAE40935609509953BAD20F7105@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com><460F8B15.9070909@loskot.net><CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca><46114729.30308@loskot.net>
	<CA803441152AAE40935609509953BAD20F7104@s0-ott-x4.nrn.nrcan.gc.ca>
	<CA803441152AAE40935609509953BAD20F7105@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <33608.87.204.110.187.1175699024.squirrel@loskot.net>

Patton, Eric wrote
>
> After some more digging around in Synaptic and installing some more
> packages, (specifically, unixodbc and libpq), the "unable to infer
> taggedconfiguration" error has vanished. I proceeded normally with make,
> and I received and error about libstdc++.la not being in /usr/lib.
> Synaptic reports that the libstdc++6.4.1-dbg package installed libstdc++.a
> and libstdc++.la in /usr/local/debug. So I created a symlink for each
> libstdc++ archive file:
>
> $ pwd
> /usr/lib
>
> $ sudo ln -s debug/libstdc++.a libstdc++.a
> $ sudo ln -s debug/libstdc++.la libstdc++.la

Eric,

You do not need -dbg packages to build and run GDAL.
You can safely uninstall it.

> and re-ran make, which completed without the aforementioned "libstdc++.la
> not found in /usr/lib" error.
>
> Curiously, though, the last three lines of the 'make install' output read:
> ldconfig: /usr/local/lib/libproj.so.0 is not a symbolic link
> ldconfig: /usr/local/lib/libgeos.so.2 is not a symbolic link
> ldconfig: /usr/local/lib/libgeos_c.so.1 is not a symbolic link
>
> Is this a problem? gdalinfo --version reports:

I don't think so this is a problem but I'd suggest to check to what
libraries GDAL links exactly:

ldd `which gdalinfo`

and

ldd /path/to/libgdal.so

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From epatton at nrcan.gc.ca  Wed Apr  4 11:21:27 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to
	infertaggedconfiguration"
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com><460F8B15.9070909@loskot.net><CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca><46114729.30308@loskot.net>
	<CA803441152AAE40935609509953BAD20F7104@s0-ott-x4.nrn.nrcan.gc.ca>
	<CA803441152AAE40935609509953BAD20F7105@s0-ott-x4.nrn.nrcan.gc.ca>
	<33608.87.204.110.187.1175699024.squirrel@loskot.net>
Message-ID: <CA803441152AAE40935609509953BAD20F7106@s0-ott-x4.nrn.nrcan.gc.ca>

Thanks Mateusz,

But in a previous thread, I had the same problem with make complaining about missing libstdc++.la:

http://article.gmane.org/gmane.comp.gis.gdal.devel/9122/match=error+compiling+gdal+1+3+2+libstdc%2b%2b+la

Where you recommended installing the dbg packages. So I take it this requirement changed for GDAL 1.4.0?

The output from ldd `which gdalinfo` and ldd /usr/local/gdal-1.4.0/.libs/libgdal.so look normal (I guess):

$ ldd `which gdalinfo`
        linux-gate.so.1 =>  (0xffffe000)
        libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0xb7b24000)
        libpthread.so.0 => /lib/tls/i686/cmov/libpthread.so.0 (0xb7afa000)
        librt.so.1 => /lib/tls/i686/cmov/librt.so.1 (0xb7af0000)
        libdl.so.2 => /lib/tls/i686/cmov/libdl.so.2 (0xb7aec000)
        libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0xb7a02000)
        libm.so.6 => /lib/tls/i686/cmov/libm.so.6 (0xb79db000)
        libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb79cf000)
        libc.so.6 => /lib/tls/i686/cmov/libc.so.6 (0xb788e000)
        libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0xb7795000)
        libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0xb7788000)
        libsqlite3.so.0 => /usr/local/lib/libsqlite3.so.0 (0xb772b000)
        /lib/ld-linux.so.2 (0xb7fc4000)

$ ldd /usr/local/gdal-1.4.0/.libs/libgdal.so
        linux-gate.so.1 =>  (0xffffe000)
        libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0xb797b000)
        libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0xb796e000)
        libpthread.so.0 => /lib/tls/i686/cmov/libpthread.so.0 (0xb7943000)
        librt.so.1 => /lib/tls/i686/cmov/librt.so.1 (0xb793a000)
        libdl.so.2 => /lib/tls/i686/cmov/libdl.so.2 (0xb7936000)
        libsqlite3.so.0 => /usr/local/lib/libsqlite3.so.0 (0xb78d9000)
        libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0xb77ef000)
        libm.so.6 => /lib/tls/i686/cmov/libm.so.6 (0xb77c8000)
        libc.so.6 => /lib/tls/i686/cmov/libc.so.6 (0xb7686000)
        libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb767a000)
        /lib/ld-linux.so.2 (0x80000000)

~ Eric. 



-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net]
Sent: Wed 4/4/2007 12:03 PM
To: Patton, Eric
Cc: gdal
Subject: RE: [Gdal-dev] Make error "libtool: compile: unable to infertaggedconfiguration"
 
Patton, Eric wrote
>
> After some more digging around in Synaptic and installing some more
> packages, (specifically, unixodbc and libpq), the "unable to infer
> taggedconfiguration" error has vanished. I proceeded normally with make,
> and I received and error about libstdc++.la not being in /usr/lib.
> Synaptic reports that the libstdc++6.4.1-dbg package installed libstdc++.a
> and libstdc++.la in /usr/local/debug. So I created a symlink for each
> libstdc++ archive file:
>
> $ pwd
> /usr/lib
>
> $ sudo ln -s debug/libstdc++.a libstdc++.a
> $ sudo ln -s debug/libstdc++.la libstdc++.la

Eric,

You do not need -dbg packages to build and run GDAL.
You can safely uninstall it.

> and re-ran make, which completed without the aforementioned "libstdc++.la
> not found in /usr/lib" error.
>
> Curiously, though, the last three lines of the 'make install' output read:
> ldconfig: /usr/local/lib/libproj.so.0 is not a symbolic link
> ldconfig: /usr/local/lib/libgeos.so.2 is not a symbolic link
> ldconfig: /usr/local/lib/libgeos_c.so.1 is not a symbolic link
>
> Is this a problem? gdalinfo --version reports:

I don't think so this is a problem but I'd suggest to check to what
libraries GDAL links exactly:

ldd `which gdalinfo`

and

ldd /path/to/libgdal.so

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net



From matt.wilkie at gov.yk.ca  Wed Apr  4 13:28:50 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Canadian Topographic data (NTDB)  now free!
Message-ID: <4613E052.5000705@gov.yk.ca>

Hello Folks,  Good news!

"Important Notice -- Take note that the NTDB, CanImage and CanMatrix 
products will now be available at no cost only at the GeoGratis website."
http://www.cits.rncan.gc.ca/cit/servlet/CIT/site_id=01&page_id=1-004.html

Note that the free CanMatrix available on the same server is only the 
half-resolution version (160dpi). The 300dpi is still for sale only and 
restricted distribution. A tip though, if you want the 300dpi buy it 
from  http://www.softmaptech.com/ for a fraction of the cost from NRCAN 
(with collars clipped to boot). Rumour has it that in a year or two the 
restrictions will be lifted here too.

If you already know what you're looking for, skip the 20-clicks 
interface at http://www.geogratis.ca/geogratis/en/index.html and dive 
straight into ftp://ftp2.cits.rncan.gc.ca/pub/geogratis/bndt/

A command like this will grab all of the 250k 105 series in one go:
[windows, with cygwin tools in path; double up % to put in a batch file]

    wget --continue --recursive --level 2 
ftp://ftp2.cits.rncan.gc.ca/pub/geogratis/bndt/250k_shp_en/105/*

Then unpack:

    cd ftp2.cits.rncan.gc.ca\pub\geogratis\bndt\250k_shp_en\105\
    for /r %f in (*.zip) do unzip -d . %f

and mush together with OGR goodness (orders of magnitude faster than 
ArcGIS FeatureClassToXXX[*]):

    mkdir merged
    for %f in (*wetland*.shp) do (
       ( if not exist merged\wetlands.shp ogr2ogr -f "esri shapefile" 
merged\wetlands.shp %f ) else (
       ogr2ogr -f "esri shapefile" -update -append merged\wetlands.shp %f )
    )	


[*] http://www.uttara.ca/blog/gis/ipy-and-arcgisscripting


Enjoy!


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------



From warmerdam at pobox.com  Wed Apr  4 18:25:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] gdal 1.4.1 beta1
Message-ID: <461425C3.8010502@pobox.com>

Folks,

Beta1 is available at:

   http://download.osgeo.org/gdal/gdal-1.4.1b1.tar.gz
   http://download.osgeo.org/gdal/gdal141b1.zip

I hope to do a final release on Monday so please let me know if
there is anything missing or badly broken (via Trac).  From the NEWS
file:

GDAL/OGR 1.4.1 - Overview of Changes
====================================

The GDAL 1.4.1 release is a stable release, and contains the following
bug fixes.  There should be no noteworthy changes in interfaces or APIs.


GDAL
----

World File Reader:
  - Handle case with blank lines in worldfile gracefully . #1523
  - Support other numeric locales (ie. comma for decimal). #1414

GeoTIFF Driver:
  - Use PHOTOMETRIC creation option properly. #1559
  - Fix writing pixel interleaved files. #1470
  - Fix thread safety issue with inmemory geo parsing. #1500

NetCDF Driver:
  - Correct off-by-half-pixel error in the geotransform. #1506
  - Pre-verify file is NetCDF format before calling nc_open(). #1176

Erdas Imagine (HFA) Driver:
  - Add support for EPT_s32 and EPT_u32 non-runs in UncompressBlock?().  #1000
  - Fix support for EPT_f32 non-runs with 16bit offset values. #1000
  - Avoid attempting to open "AUX" directly. #1493

HDF4 Driver:
  - Fix some problems with geolocation support crashes.

JPEG Driver:
  - Support EXIF directories with no entries. #1523

FAST Driver:
  - Handle various FAST datasets. #1516

MEM Driver:
  - Fix support for memory arrays larger than 4GB. #1503

MrSID Driver:
  - Compute approximate statistics from overview, even if not forced. #1452
  - Fix for decoding some stripped data. #1446


OGR
---

OGR:
  - Fixed handling of XYZM data in WKT without crashing (#1036)

OGRSpatialReference:
  - Fix up handling of feet and numeric units in old ESRI .prj files. #1533
  - Fix ESRI LCC 2SP support. #187

OGR SQL:
  - Allow use of <, >, <= and >= in attribute filters and WHERE. #1557
  - Fix handling of special fields if values are null. #1528
  - Fixed FID special field support. #1468

GML Driver:
  - Support files with a "BOM" marker at the beginning. #

Interlis Driver:
  - Return a clone of internal features to avoid crash if reread. #1535

Mapinfo Driver:
  - Back ported various MITAB 1.6.1 fixes. #1541

PostGIS Driver:
  - Don't disable sequential scanning. #1472
  - Increase CURSOR_PAGE from 1 to 500. #1474
  - Ensure that GetLayerByName(), and OpenTable() fail gracefully for
    non existant tables. #1480

Shapefile Driver:
  - Ensure SetFeature() and DeleteFeature() operations get applied. #1456


Other
-----

Java:
  - Fix missing import. #1463
  - Make ANT location configurable #1545
  - void functions should not return values #1543

Python:
  - Fix support for complex data in NG bindings. #1518
  - Fix array order compatibility with old bindings. #1542
  - Fix Dataset.ReadAsArray()
  - Fix WriteRaster and ReadRaster. #1481
  - Geometry contructor in old bindings. #1255


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woodbri at swoodbridge.com  Wed Apr  4 20:21:05 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Question on building external overviews - SOLVED
In-Reply-To: <4613B0D6.9070309@swoodbridge.com>
References: <4613A1CE.8000209@swoodbridge.com> <4613ABB5.4070409@pobox.com>
	<4613B0D6.9070309@swoodbridge.com>
Message-ID: <461440F1.6090204@swoodbridge.com>

Stephen Woodbridge wrote:
> Frank Warmerdam wrote:
>> Stephen Woodbridge wrote:
>>> Hi guys,
>>>
>>> I took this approach to building external overviews, but all my 
>>> images seem to be gray in mapserver and appear to be all nodata 
>>> values in the file. Any idea what I'm doing wrong here?
>>>
>>> I have a directory of of 16x16 tiles that fill a one degree block.
>>> I want to make 4x4 overview files with 4x4 of the original tiles.
>>> ie: 4x4 original tiles into 1 overview
>>>
>>> So for the first tile, I create the output tile like this
>>>
>>> gdal_translate -of GTiff -co \"TILED=YES\" -outsize 3200 3200 -a_srs 
>>> EPSG:4326 -a_nodata 0 -a_ullr $top $left $bot $right $inf $outf
> 
> I set $top $left $bot $right to the extents shown in the gdalinfo in the 
> prior post, which is 4 times larger in x and y then the original tiles 
> and $inf is one of the original tiles that is 1/16 the size of the 
> output area.

I feel stupid for not reading the manual <sigh>

    -a_ullr $top $left $bot $right

should be

    -a_ullr $left $top $right $bot

-Steve

From daniel112b at gmail.com  Thu Apr  5 01:34:56 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Read-Only HFA dataset and overview creation
Message-ID: <962626470704042234s15c8458ck8bd4e3523d8ea008@mail.gmail.com>

Hello Folks,

 If i open an Erdas .img file in read-only mode i can't create any
 overviews. The .ovr overview support was removed from the HFA driver a
 while ago and before that a .ovr file was created when a .img file
 was opened as read-only but no i just get "BuildOverviews() not
 supported for this dataset"

 HFADataset::IBuildOverviews calls GDALDataset::IBuildOverviews if
 opened as read-only but that does not work anymore since the
 initialization of the ovrManager was removed (Changeset 8358)

 if( GetAccess() == GA_ReadOnly )
         return GDALDataset::IBuildOverviews(

I think that .ovr support for .img files would be good to have since
the .rrd style overviews modifies the original file. Another problem
with the .rrd files is Ticket #1109 (Building overviews on an
Imagine-created HFA file results in a segfault) which seems a bit
tricky to fix.

Previously i always opened files as read-only since i don't need write
support ATM but this is not possible any more.

Best Regards,
  Daniel B?ck


From tutey at o2.pl  Thu Apr  5 08:32:07 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] FWTools 1.2.1: install.sh fails on a 64bit machine
Message-ID: <9854949.post@talk.nabble.com>


Ubuntu Dapper, 2.6.15-28-amd64-xeon:

$ /bin/FWTools-1.2.1$ ./install.sh
./install.sh: line 33: bin/python: No such file or directory

But why? The file *is* there:

$ file ~/bin/FWTools-1.2.1/bin/python
/home/maciek/bin/FWTools-1.2.1/bin/python: ELF 32-bit LSB executable, Intel
80386, version 1 (SYSV), for GNU/Linux 2.0.30, dynamically linked (uses
shared libs), for GNU/Linux 2.0.30, not stripped

The same FWTools 1.2.1 installs and works fine on a 32bit box.

Help!

Maciek

-- 
View this message in context: http://www.nabble.com/FWTools-1.2.1%3A-install.sh-fails-on-a-64bit-machine-tf3531309.html#a9854949
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From guillaume.huby.lists at gmail.com  Thu Apr  5 09:24:38 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Trouble with append option of ogr2ogr
Message-ID: <ddc797c30704050624u70e3cae4i729dd9af630e21e9@mail.gmail.com>

Hello,

I'm using FWTools 1.2.1

I have two shapefiles :

>ogrinfo out.shp
INFO: Open of `out.shp'
      using driver `ESRI Shapefile' successful.
1: out (Polygon)

>ogrinfo 013719-002.shp
INFO: Open of `013719-002.shp'
      using driver `ESRI Shapefile' successful.
1: 013719-002 (Polygon)

I use ogr2ogr to merge 013719-002.shp into out.shp and have a message error:

>ogr2ogr -append out.shp 013719-002.shp -nln out 013719-002
ERROR 1: out.shp is not a directory.

ESRI Shapefile driver failed to create out.shp

Same result without the -nln option.
Can someone see if I made something wrong ?


Thank you in advance for your reply.

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070405/3a0bb4ac/attachment.html
From guillaume.huby.lists at gmail.com  Thu Apr  5 09:47:23 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: Trouble with append option of ogr2ogr
In-Reply-To: <ddc797c30704050624u70e3cae4i729dd9af630e21e9@mail.gmail.com>
References: <ddc797c30704050624u70e3cae4i729dd9af630e21e9@mail.gmail.com>
Message-ID: <ddc797c30704050647p6e77d810i28c87ac724e25964@mail.gmail.com>

On 4/5/07, guillaume huby <guillaume.huby.lists@gmail.com> wrote:
>
> >ogr2ogr -append out.shp 013719-002.shp -nln out 013719-002


Mea culpa, I didn't read carefully
http://www.gdal.org/ogr/drv_shapefile.html. Command is:
ogr2ogr -update -append out.shp 013719-002.shp -nln out

sorry for  spamming ...

Have a nice day.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070405/21aabda7/attachment.html
From simboss1 at gmail.com  Thu Apr  5 10:20:11 2007
From: simboss1 at gmail.com (Simone Gannecchini)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Minor changes to gdal_java.i
Message-ID: <002c01c7778d$892b2a30$6a00a8c0@LAPTOP>

Hi all,
I am attaching a very minor patch for the gdal_java.i swig  file that me and
Daniele would really like to have accepted.
If you look at it here below, you'll see that it simply allows to write and
read without going through each single raster band.

It should provide a nice optimization in case you work tile by tile since it
reduces the number JNI calls to read/write data by the number of #bands.

Index: C:/work/VC++/gdal/swig/include/java/gdal_java.i
===================================================================
--- C:/work/VC++/gdal/swig/include/java/gdal_java.i	(revision 11187)
+++ C:/work/VC++/gdal/swig/include/java/gdal_java.i	(working copy)
+%extend GDALDatasetShadow {
+  CPLErr ReadRaster_Direct( int xoff, int yoff, int xsize, int ysize,
+                            int buf_xsize, int buf_ysize,
+                            GDALDataType buf_type, int bands, void *buf)
+{
+
+
+   return GDALDatasetRasterIO( self, GF_Read, xoff, yoff, xsize, ysize,
+                                 buf, buf_xsize, buf_ysize,
+                                 buf_type, bands, 0,0,0,0);
+
+}
+
+
+ CPLErr WriteRaster_Direct( int xoff, int yoff, int xsize, int ysize,
+                            int buf_xsize, int buf_ysize,
+                            GDALDataType buf_type, int bands, void *buf)
+{
+
+  return GDALDatasetRasterIO( self, GF_Write, xoff, yoff, xsize, ysize,
+                                 buf, buf_xsize, buf_ysize,
+                                 buf_type, bands, 0,0,0,0);
+
+}
+
+} /* extend */
+
+
 %include typemaps_java.i

We have other optimizations that we are working on for accessing large
raster in java on Tile base but for the moment they are not stable enough
(wonder if we'll have have time to make them stable though :-) )

Thx all,
Simone.

-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions S.A.S.
Via Carignoni 51 
55041  Camaiore (LU) 
Italy

phone:  +39 0584983027
fax:    +39 0584983027
mob:    +39 333 8128928 


http://www.geo-solutions.it

-------------------------------------------------------


-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_java.i_patch
Type: application/octet-stream
Size: 1160 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070405/b917d061/gdal_java.obj
From mitchelljj98 at gmail.com  Thu Apr  5 10:40:48 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] gdalwarp with change in projection for tiles then
	adjacent tiles overlap slightly with a black border at edge.
Message-ID: <fa2ac0580704050740t7aeec97cv10cf78aba99d5428@mail.gmail.com>

Hi,

I have found that running gdalwarp with a change in projection individually
for each tile and splitting them up via gdal_translate that the adjacent
tiles overlap slightly with a black border at edge.  If I instead run
gdalwarp against all the tiles to create a big mosaic with a change in
projection and then split(gdal_translate) them up that I don't have this
overlap.

Is their a way to individually run gdalwarp with a change in projection
against each tile without getting this overlap?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070405/ab9c755d/attachment.html
From craig.miller at spatialminds.com  Thu Apr  5 12:23:35 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] collarclip
Message-ID: <001901c7779e$c3830430$7401a8c0@sherpa>

A while back, someone posted to the list that they had written a small
utility to clip the collars off of their Soviet Topo maps.  I have a few
spurious DRGs (compressed paletted GeoTiffs) that need their collars clipped
and was wondering if this utility is available somewhere.

Thanks,
Craig

Craig Miller
www.spatialminds.com 


From woodbri at swoodbridge.com  Thu Apr  5 13:26:46 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] collarclip
In-Reply-To: <001901c7779e$c3830430$7401a8c0@sherpa>
References: <001901c7779e$c3830430$7401a8c0@sherpa>
Message-ID: <46153156.7030407@swoodbridge.com>

Craig Miller wrote:
> A while back, someone posted to the list that they had written a small
> utility to clip the collars off of their Soviet Topo maps.  I have a few
> spurious DRGs (compressed paletted GeoTiffs) that need their collars clipped
> and was wondering if this utility is available somewhere.
> 
> Thanks,
> Craig
> 
> Craig Miller
> www.spatialminds.com 

Hi Craig.

That would be me. The utility was less than sucessful as an automated 
clipping tool and the code had to be tuned to look for specific patterns 
for a class of images. I did ok identifying some corners but rarely got 
all corners identified correctly.

I have been to busy lately to revisit it. The approach that I finally 
came up with was to create a database if the image files and wrote an 
ajax web application that views the image (these were all gif) and 
allows the user to select the corner points and writes them to the 
database (I have like 16K images to clip eventually). then a wrote a 
perl script that read the corner info from the DB and generated gdal 
commands to clip and reproject the images.

As I said, I hope to get back to this, but have been too busy over the 
last 3 month to even think about it.

-Steve


From mitchelljj98 at gmail.com  Thu Apr  5 15:16:17 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] gdalwarp -rn(default) vs -rc
Message-ID: <fa2ac0580704051216o17148503yb1eb91ac415cf362@mail.gmail.com>

Hi,
Within gdalwarp where does using the higher quality option of -rc(cubic
resampling) verses the default of nearest neighbour resampling have the
greatest impact as far as quality and also as far as speed.
Either
a.) running gdalwarp to mosaic a number of tiles together and at the same
time reproject
  i.e.  gdalwarp.exe -wo SKIP_NOSOURCE=YES  -s_srs EPSG:" + EPSG + " -t_srs
EPSG:" + EPSG_wgs84 + " -rc -co tiled=yes -q " + inputFiles + " " +
rasterFile
b.) running gdalwarp to reduce the resolution but not changing the
projection and not mosaicking
 i.e.  gdalwarp.exe -tr " + psx + " " + psy + "  -s_srs EPSG:" + EPSG_wgs84
+ " -t_srs EPSG:" + EPSG_wgs84 + " -rc -co tiled=yes -q " + rasterFile + " "
+ warpedSplitRasterFile
Will it be faster to reduce resolution against a file via gdalwarp that has
already been reduced and will the quality be the same?  As an example:
1.) I mosaic a number of tiles at full resolution
2.) I reduce the mosaic from 1 by 1/2
3a.) I reduce the mosaic from 1 by 1/4
3b.) I reduce the mosaic from 2 by 1/2

Between 3a and 3b will 3b be faster and will the quality be the same?

Any other suggestions on speeding up gdalwarp would be appreciated.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070405/9b03ffb9/attachment.html
From Paul_VanDeusen at uml.edu  Thu Apr  5 15:26:22 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
Message-ID: <46154D5E.2000301@uml.edu>

I am using imagemagick to crop a geotiff file into 256x256 gif files to 
serve as tiles for google maps.
However, it starts to choke once the tiff file gets larger than  1/2 
GB.   Can gdal_translate take
a tif file and split it into individual tile files of a specific size? 

From mateusz at loskot.net  Thu Apr  5 15:43:57 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <46154D5E.2000301@uml.edu>
References: <46154D5E.2000301@uml.edu>
Message-ID: <42409.87.204.110.187.1175802237.squirrel@loskot.net>

Paul Van Deusen napisa?(a):
> I am using imagemagick to crop a geotiff file into 256x256 gif files to
> serve as tiles for google maps.
> However, it starts to choke once the tiff file gets larger than  1/2
> GB.   Can gdal_translate take
> a tif file and split it into individual tile files of a specific size?

Paul,

AFAIK, GDAL won't help here out of the box.
Users usually take gdal_translate.cpp program and customize it to do this
job.
Here you can find such utility called gdalsplit and posted to the list a
longer while ago:

http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html

May be it will work for you.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Apr  5 16:10:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to
	infertaggedconfiguration"
In-Reply-To: <CA803441152AAE40935609509953BAD20F7106@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca><460EA9A6.4030001@pobox.com><460F8B15.9070909@loskot.net><CA803441152AAE40935609509953BAD20F70FF@s0-ott-x4.nrn.nrcan.gc.ca><46114729.30308@loskot.net>
	<CA803441152AAE40935609509953BAD20F7104@s0-ott-x4.nrn.nrcan.gc.ca>
	<CA803441152AAE40935609509953BAD20F7105@s0-ott-x4.nrn.nrcan.gc.ca>
	<33608.87.204.110.187.1175699024.squirrel@loskot.net>
	<CA803441152AAE40935609509953BAD20F7106@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <461557AC.9070701@loskot.net>

Patton, Eric wrote:
> Thanks Mateusz,
> 
> But in a previous thread, I had the same problem with make complaining about missing libstdc++.la:
> 
> http://article.gmane.org/gmane.comp.gis.gdal.devel/9122/match=error+compiling+gdal+1+3+2+libstdc%2b%2b+la
> 
> Where you recommended installing the dbg packages. So I take it this requirement changed for GDAL 1.4.0?

Eric,

No -dbg packages should be required to run GDAL.
-dbg are for debugging, for developers, and I don't suppose any of Linux
distrubutions / packaging systems require user to install a -dbg
package to use a library or run an application.
Even if you want to build a software yourself, no -dbg packages should
be required. -dbg packages are useful for debugging, to get meaningful
backtrace, etc.

> The output from ldd `which gdalinfo` and ldd /usr/local/gdal-1.4.0/.libs/libgdal.so look normal (I guess):
> 
> $ ldd `which gdalinfo`
>         linux-gate.so.1 =>  (0xffffe000)
>         libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0xb7b24000)

OK, found

>         libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0xb7795000)
>         libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0xb7788000)

Yes, that's good too.

> $ ldd /usr/local/gdal-1.4.0/.libs/libgdal.so
>         linux-gate.so.1 =>  (0xffffe000)
>         libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0xb797b000)
>         libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0xb796e000)

Yes, everything looks correct to me.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woodbri at swoodbridge.com  Thu Apr  5 21:26:53 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] gdalwarp -rn(default) vs -rc
In-Reply-To: <fa2ac0580704051216o17148503yb1eb91ac415cf362@mail.gmail.com>
References: <fa2ac0580704051216o17148503yb1eb91ac415cf362@mail.gmail.com>
Message-ID: <4615A1DD.6020205@swoodbridge.com>

Hi John, et al,

You example a) implies that you can supply multiple input files to 
mosaic into a single output file. Can you do that in one command? So 
multiple files names are on the command line and the last one is the 
output file? That would be very sweet.

Also do you know where the various options for -wo and -co are listed. 
They are not in the man pages. There is only the less than useful 
comment "There is a list of available ones. " and not reference as to where.

-Steve

John Mitchell wrote:
> Hi,
> 
> 
> Within gdalwarp where does using the higher quality option of -rc(cubic 
> resampling) verses the default of nearest neighbour resampling have the 
> greatest impact as far as quality and also as far as speed.
> Either
> a.) running gdalwarp to mosaic a number of tiles together and at the 
> same time reproject
> 
>   i.e.  gdalwarp.exe -wo SKIP_NOSOURCE=YES  -s_srs EPSG:" + EPSG + " 
> -t_srs EPSG:" + EPSG_wgs84 + " -rc -co tiled=yes -q " + inputFiles + " " 
> + rasterFile
> 
> b.) running gdalwarp to reduce the resolution but not changing the 
> projection and not mosaicking
>  i.e.  gdalwarp.exe -tr " + psx + " " + psy + "  -s_srs EPSG:" + 
> EPSG_wgs84 + " -t_srs EPSG:" + EPSG_wgs84 + " -rc -co tiled=yes -q " + 
> rasterFile + " " + warpedSplitRasterFile
> 
> 
> Will it be faster to reduce resolution against a file via gdalwarp that 
> has already been reduced and will the quality be the same?  As an example:
> 1.) I mosaic a number of tiles at full resolution
> 2.) I reduce the mosaic from 1 by 1/2
> 3a.) I reduce the mosaic from 1 by 1/4
> 3b.) I reduce the mosaic from 2 by 1/2
> 
> Between 3a and 3b will 3b be faster and will the quality be the same?
> 
> Any other suggestions on speeding up gdalwarp would be appreciated.
> 
> Thanks,
> 
> 
> -- 
> John J. Mitchell
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mitchelljj98 at gmail.com  Thu Apr  5 21:39:54 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] gdalwarp -rn(default) vs -rc
In-Reply-To: <4615A1DD.6020205@swoodbridge.com>
References: <fa2ac0580704051216o17148503yb1eb91ac415cf362@mail.gmail.com>
	<4615A1DD.6020205@swoodbridge.com>
Message-ID: <fa2ac0580704051839pb638c8bobc3651052653b72a@mail.gmail.com>

Steve,

Yes you can supply multiple input files to mosaic into a single output file.
You can get the -co options for your output format by going to:
http://www.gdal.org/formats_list.html and finding your output format
or
*--format* *format*List detailed information about a single format driver.
The *format* should be the short name reported in the *--formats* list, such
as GTiff.
-wo is at:
http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08

John

On 4/5/07, Stephen Woodbridge <woodbri@swoodbridge.com> wrote:
>
> Hi John, et al,
>
> You example a) implies that you can supply multiple input files to
> mosaic into a single output file. Can you do that in one command? So
> multiple files names are on the command line and the last one is the
> output file? That would be very sweet.
>
> Also do you know where the various options for -wo and -co are listed.
> They are not in the man pages. There is only the less than useful
> comment "There is a list of available ones. " and not reference as to
> where.
>
> -Steve
>
> John Mitchell wrote:
> > Hi,
> >
> >
> > Within gdalwarp where does using the higher quality option of -rc(cubic
> > resampling) verses the default of nearest neighbour resampling have the
> > greatest impact as far as quality and also as far as speed.
> > Either
> > a.) running gdalwarp to mosaic a number of tiles together and at the
> > same time reproject
> >
> >   i.e.  gdalwarp.exe -wo SKIP_NOSOURCE=YES  -s_srs EPSG:" + EPSG + "
> > -t_srs EPSG:" + EPSG_wgs84 + " -rc -co tiled=yes -q " + inputFiles + " "
> > + rasterFile
> >
> > b.) running gdalwarp to reduce the resolution but not changing the
> > projection and not mosaicking
> >  i.e.  gdalwarp.exe -tr " + psx + " " + psy + "  -s_srs EPSG:" +
> > EPSG_wgs84 + " -t_srs EPSG:" + EPSG_wgs84 + " -rc -co tiled=yes -q " +
> > rasterFile + " " + warpedSplitRasterFile
> >
> >
> > Will it be faster to reduce resolution against a file via gdalwarp that
> > has already been reduced and will the quality be the same?  As an
> example:
> > 1.) I mosaic a number of tiles at full resolution
> > 2.) I reduce the mosaic from 1 by 1/2
> > 3a.) I reduce the mosaic from 1 by 1/4
> > 3b.) I reduce the mosaic from 2 by 1/2
> >
> > Between 3a and 3b will 3b be faster and will the quality be the same?
> >
> > Any other suggestions on speeding up gdalwarp would be appreciated.
> >
> > Thanks,
> >
> >
> > --
> > John J. Mitchell
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070405/c6b7bcb5/attachment.html
From neteler at itc.it  Fri Apr  6 03:54:39 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <42409.87.204.110.187.1175802237.squirrel@loskot.net>
References: <46154D5E.2000301@uml.edu>
	<42409.87.204.110.187.1175802237.squirrel@loskot.net>
Message-ID: <20070406075438.GC12816@bartok.itc.it>

On Thu, Apr 05, 2007 at 09:43:57PM +0200, Mateusz Loskot wrote:
> Paul Van Deusen napisa?(a):
> > I am using imagemagick to crop a geotiff file into 256x256 gif files to
> > serve as tiles for google maps.
> > However, it starts to choke once the tiff file gets larger than  1/2
> > GB.   Can gdal_translate take
> > a tif file and split it into individual tile files of a specific size?
> 
> Paul,
> 
> AFAIK, GDAL won't help here out of the box.
> Users usually take gdal_translate.cpp program and customize it to do this
> job.
> Here you can find such utility called gdalsplit and posted to the list a
> longer while ago:
> 
> http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html
> 
> May be it will work for you.

If anyone happens to haave an updated version of "gdalsplit"
I would be interested.
Maybe some mechanism to manage user contributions would be
good (like the GRASS Addons repository).

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From aaime at openplans.org  Fri Apr  6 04:48:14 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: Minor changes to gdal_java.i
In-Reply-To: <002c01c7778d$892b2a30$6a00a8c0@LAPTOP>
References: <002c01c7778d$892b2a30$6a00a8c0@LAPTOP>
Message-ID: <4616094E.1010801@openplans.org>

Simone Gannecchini ha scritto:
> Hi all,
> I am attaching a very minor patch for the gdal_java.i swig  file that me and
> Daniele would really like to have accepted.
> If you look at it here below, you'll see that it simply allows to write and
> read without going through each single raster band.
> 
> It should provide a nice optimization in case you work tile by tile since it
> reduces the number JNI calls to read/write data by the number of #bands.
> 
> Index: C:/work/VC++/gdal/swig/include/java/gdal_java.i
> ===================================================================
> --- C:/work/VC++/gdal/swig/include/java/gdal_java.i	(revision 11187)
> +++ C:/work/VC++/gdal/swig/include/java/gdal_java.i	(working copy)
> +%extend GDALDatasetShadow {
> +  CPLErr ReadRaster_Direct( int xoff, int yoff, int xsize, int ysize,
> +                            int buf_xsize, int buf_ysize,
> +                            GDALDataType buf_type, int bands, void *buf)
> +{
> +
> +
> +   return GDALDatasetRasterIO( self, GF_Read, xoff, yoff, xsize, ysize,
> +                                 buf, buf_xsize, buf_ysize,
> +                                 buf_type, bands, 0,0,0,0);
> +
> +}
> +
> +
> + CPLErr WriteRaster_Direct( int xoff, int yoff, int xsize, int ysize,
> +                            int buf_xsize, int buf_ysize,
> +                            GDALDataType buf_type, int bands, void *buf)
> +{
> +
> +  return GDALDatasetRasterIO( self, GF_Write, xoff, yoff, xsize, ysize,
> +                                 buf, buf_xsize, buf_ysize,
> +                                 buf_type, bands, 0,0,0,0);
> +
> +}
> +
> +} /* extend */
> +
> +
>  %include typemaps_java.i

Change looks good, I see the advantage, I'm just wondering if this is
general enough to push it one level up, where every language can use it.
I mean, I don't see anything java specific there?

> We have other optimizations that we are working on for accessing large
> raster in java on Tile base but for the moment they are not stable enough
> (wonder if we'll have have time to make them stable though :-) )

Well, it may be nice to discuss their design, aim, and implementation. 
There are lots of skilled people here, someone may have ideas on how to 
stabilize them, whatever that means :-)

Cheers
Andrea

From j.l.h.hartmann at uva.nl  Fri Apr  6 05:02:52 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <20070406075438.GC12816@bartok.itc.it>
References: <46154D5E.2000301@uml.edu>	<42409.87.204.110.187.1175802237.squirrel@loskot.net>
	<20070406075438.GC12816@bartok.itc.it>
Message-ID: <46160CBC.7000309@uva.nl>



Markus Neteler wrote:
> On Thu, Apr 05, 2007 at 09:43:57PM +0200, Mateusz Loskot wrote:
>> Paul Van Deusen napisa?(a):
>>> I am using imagemagick to crop a geotiff file into 256x256 gif files to
>>> serve as tiles for google maps.
>>> However, it starts to choke once the tiff file gets larger than  1/2
>>> GB.   Can gdal_translate take
>>> a tif file and split it into individual tile files of a specific size?
>> Paul,
>>
>> AFAIK, GDAL won't help here out of the box.
>> Users usually take gdal_translate.cpp program and customize it to do this
>> job.
>> Here you can find such utility called gdalsplit and posted to the list a
>> longer while ago:
>>
>> http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html
>>
>> May be it will work for you.
> 
> If anyone happens to haave an updated version of "gdalsplit"
> I would be interested.
> Maybe some mechanism to manage user contributions would be
> good (like the GRASS Addons repository).
> 
> Markus
> 
> ------------------
> ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
> ITC -> since 1 March 2007 Fondazione Bruno Kessler
> ------------------
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

Perhaps I am overlooking something, or didn't understand the question 
right, but I regularly create tiles from a large tif-file with the 
-srcwin <xoff yoff xsize ysize> parameter of gdal_translate. A simple 
bash-script to tile in.tif (30000*30000 pixels) into 256*256 tiles would be:

width=30000
height=30000
y=0
while [ $y -lt $height ]
do
   x=0
   while [ $x -lt $width ]
   do
      outtif=t_${y}_$x.tif
      gdal_translate -srcwin $x $y 256 256 in.tif $outtif
      let x=$x+256
   done
   let y=$y+256
done

This would result in about 14000 files. This is so simple that it can 
even be done with a primitive DOS batch file.

Most of the time I work with projected coordinates (-projwin instead of 
-srcwin) but the idea is the same. Note by the way that -projwin uses 
the *upper* left corner as reference.

Jan

Dr. J. Hartmann
Department of Geography
University of Amsterdam

From oberhauser at hoelzel.at  Fri Apr  6 07:05:06 2007
From: oberhauser at hoelzel.at (Stefan Oberhauser)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] How to include new planisphere in Gdal/OGR?
Message-ID: <009601c7783b$6f0e24f0$3800a8c0@hoelzel.local>

Hello,

 

We are a cartographic company and we are using a proprietary planisphere for
our world maps. It is a modification of Eckert Planisphere. The analogue
maps had been digitized but the data don?t have any georeferencing
information.

The projection parameters are known and we need an implementation in order
to transform geo-data to our planisphere and vice versa. Would it be
possible that our planisphere is supported by Gdal/OGR/Proj4? We don?t have
any programming experience and don?t know how and if this could be managed.
Is there anybody who could do this work for us?

 

Please contact me for further information.

 

Best regards,

Mag. Stefan Oberhauser
Ed. H?lzel Gesellschaft m.b.H. Nfg KG
Jochen-Rindt-Str. 9
1230 Wien
FN268969v, Handelsgericht Wien
Tel.: ++43 (01) 615 46 70 - 56
Fax: ++43 (01) 615 46 70 - 25
 <mailto:oberhauser@hoelzel.at> oberhauser@hoelzel.at
 <http://www.hoelzel.at/> www.hoelzel.at

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070406/f3a2e5cb/attachment.html
From Paul_VanDeusen at uml.edu  Fri Apr  6 11:53:10 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
Message-ID: <46166CE6.3010504@uml.edu>

Paul Van Deusen napisa?(a):

> > I am using imagemagick to crop a geotiff file into 256x256 gif files to
> > serve as tiles for google maps.
> > However, it starts to choke once the tiff file gets larger than  1/2
> > GB.   Can gdal_translate take
> > a tif file and split it into individual tile files of a specific size?
>   

>Paul,
>
>AFAIK, GDAL won't help here out of the box.
>Users usually take gdal_translate.cpp program and customize it to do this
>job.
>Here you can find such utility called gdalsplit and posted to the list a
>longer while ago:
>
>http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html
>
>May be it will work for you.
>
>Cheers
 >-- >Mateusz Loskot >http://mateusz.loskot.net > Mateusz, THanks. This 
is a good suggestion. I tried compiling it but got the following errors. 
It would be a handy tool if it could be made to compile. 
[pvandeus@localhost temp]$ gcc -o gdalsplit -L/usr/local/lib -lgdal 
-I/usr/local/include -I/home/pvandeus/downloads/gdal-1.4.0/frmts -ltiff 
gdalsplit.cpp -Wall gdalsplit.cpp: In function ?CPLErr 
CopyRasterBand(GDALDataset*, GDALDataset*, int, int, int, int, int)?: 
gdalsplit.cpp:233: error: ?class VRTRasterBand? has no member named 
?AddSimpleSource?


From Paul_VanDeusen at uml.edu  Fri Apr  6 13:34:32 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
Message-ID: <461684A8.3070809@uml.edu>

>
> If anyone happens to haave an updated version of "gdalsplit"
> > I would be interested.
> > Maybe some mechanism to manage user contributions would be
> > good (like the GRASS Addons repository).
> > 
> > Markus
> > 
> > ------------------
> > ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
> > ITC -> since 1 March 2007 Fondazione Bruno Kessler
> > ------------------
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
>   

>Perhaps I am overlooking something, or didn't understand the question 
>right, but I regularly create tiles from a large tif-file with the 
>-srcwin <xoff yoff xsize ysize> parameter of gdal_translate. A simple 
>bash-script to tile in.tif (30000*30000 pixels) into 256*256 tiles would be:
>
>width=30000
>height=30000
>y=0
>while [ $y -lt $height ]
>do
>   x=0
>   while [ $x -lt $width ]
>   do
>      outtif=t_${y}_$x.tif
>      gdal_translate -srcwin $x $y 256 256 in.tif $outtif
>      let x=$x+256
>   done
>   let y=$y+256
>done
>
>This would result in about 14000 files. This is so simple that it can 
>even be done with a primitive DOS batch file.
>
>Most of the time I work with projected coordinates (-projwin instead of 
>-srcwin) but the idea is the same. Note by the way that -projwin uses 
>the *upper* left corner as reference.
>
>Jan

Jan,

I always like simple solutions.  I put your code into a bash script and tried it
on a 10240x5120 section of a tif file.  I applied imagemagick to the full file using
convert nlcd.tif -crop 256x256 tiles%d.tif

Imagemagick was done in a couple of seconds, but the shell script took several 
minutes.  Imagemagick wins (I think) because it does everything in memory, whereas
the shell script keeps reloading the full image on each iteration.  However,
imagemagick starts to fall apart on very large files.   gdalsplit might work better.

Still your solution was worth looking at.

Paul


From mateusz at loskot.net  Fri Apr  6 14:08:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <46166CE6.3010504@uml.edu>
References: <46166CE6.3010504@uml.edu>
Message-ID: <45628.87.204.110.187.1175882886.squirrel@loskot.net>

Paul Van Deusen wrote
> Mateusz, THanks. This
> is a good suggestion. I tried compiling it but got the following errors.
> It would be a handy tool if it could be made to compile.
> [pvandeus@localhost temp]$ gcc -o gdalsplit -L/usr/local/lib -lgdal
> -I/usr/local/include -I/home/pvandeus/downloads/gdal-1.4.0/frmts -ltiff
> gdalsplit.cpp -Wall gdalsplit.cpp: In function &#65533;CPLErr
> CopyRasterBand(GDALDataset*, GDALDataset*, int, int, int, int,
int)&#65533;:
> gdalsplit.cpp:233: error: &#65533;class VRTRasterBand&#65533; has no
member named
> &#65533;AddSimpleSource&#65533;

Paul,

I'm taking look at this utility.
I'll let you know about results, tonight.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Fri Apr  6 16:04:22 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: Minor changes to gdal_java.i
In-Reply-To: <4616094E.1010801@openplans.org>
References: <002c01c7778d$892b2a30$6a00a8c0@LAPTOP>
	<4616094E.1010801@openplans.org>
Message-ID: <f3b73b7d0704061304y58a7cf9dw2e01ed57a77d9ac1@mail.gmail.com>

Folks,

I'm quite sure in that the Dataset.ReadRaster and Dataset.WriteRaster
is currently supported for some of the bindings. However the common
implementation in Dataset.i is not suitable for every language and
possibly need to be customized in many cases.
In this regard if this option currently does not work for java, it
would be necessary to apply a fix for it without waiting for the other
languages to proceed.

Best regards,

Tamas


2007/4/6, Andrea Aime <aaime@openplans.org>:
> Simone Gannecchini ha scritto:
> > Hi all,
> > I am attaching a very minor patch for the gdal_java.i swig  file that me and
> > Daniele would really like to have accepted.
> > If you look at it here below, you'll see that it simply allows to write and
> > read without going through each single raster band.
> >
> > It should provide a nice optimization in case you work tile by tile since it
> > reduces the number JNI calls to read/write data by the number of #bands.
> >
> > Index: C:/work/VC++/gdal/swig/include/java/gdal_java.i
> > ===================================================================
> > --- C:/work/VC++/gdal/swig/include/java/gdal_java.i   (revision 11187)
> > +++ C:/work/VC++/gdal/swig/include/java/gdal_java.i   (working copy)
> > +%extend GDALDatasetShadow {
> > +  CPLErr ReadRaster_Direct( int xoff, int yoff, int xsize, int ysize,
> > +                            int buf_xsize, int buf_ysize,
> > +                            GDALDataType buf_type, int bands, void *buf)
> > +{
> > +
> > +
> > +   return GDALDatasetRasterIO( self, GF_Read, xoff, yoff, xsize, ysize,
> > +                                 buf, buf_xsize, buf_ysize,
> > +                                 buf_type, bands, 0,0,0,0);
> > +
> > +}
> > +
> > +
> > + CPLErr WriteRaster_Direct( int xoff, int yoff, int xsize, int ysize,
> > +                            int buf_xsize, int buf_ysize,
> > +                            GDALDataType buf_type, int bands, void *buf)
> > +{
> > +
> > +  return GDALDatasetRasterIO( self, GF_Write, xoff, yoff, xsize, ysize,
> > +                                 buf, buf_xsize, buf_ysize,
> > +                                 buf_type, bands, 0,0,0,0);
> > +
> > +}
> > +
> > +} /* extend */
> > +
> > +
> >  %include typemaps_java.i
>
> Change looks good, I see the advantage, I'm just wondering if this is
> general enough to push it one level up, where every language can use it.
> I mean, I don't see anything java specific there?
>
> > We have other optimizations that we are working on for accessing large
> > raster in java on Tile base but for the moment they are not stable enough
> > (wonder if we'll have have time to make them stable though :-) )
>
> Well, it may be nice to discuss their design, aim, and implementation.
> There are lots of skilled people here, someone may have ideas on how to
> stabilize them, whatever that means :-)
>
> Cheers
> Andrea
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From Paul_VanDeusen at uml.edu  Sat Apr  7 09:32:49 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <461684A8.3070809@uml.edu>
References: <461684A8.3070809@uml.edu>
Message-ID: <46179D81.1020608@uml.edu>

Paul Van Deusen wrote:
>>
>> If anyone happens to haave an updated version of "gdalsplit"
>> > I would be interested.
>> > Maybe some mechanism to manage user contributions would be
>> > good (like the GRASS Addons repository).
>> > > Markus
>> > > ------------------
>> > ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
>> > ITC -> since 1 March 2007 Fondazione Bruno Kessler
>> > ------------------
>> > _______________________________________________
>> > Gdal-dev mailing list
>> > Gdal-dev@lists.maptools.org
>> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>> >   
>
>> Perhaps I am overlooking something, or didn't understand the question 
>> right, but I regularly create tiles from a large tif-file with the 
>> -srcwin <xoff yoff xsize ysize> parameter of gdal_translate. A simple 
>> bash-script to tile in.tif (30000*30000 pixels) into 256*256 tiles 
>> would be:
>>
>> width=30000
>> height=30000
>> y=0
>> while [ $y -lt $height ]
>> do
>>   x=0
>>   while [ $x -lt $width ]
>>   do
>>      outtif=t_${y}_$x.tif
>>      gdal_translate -srcwin $x $y 256 256 in.tif $outtif
>>      let x=$x+256
>>   done
>>   let y=$y+256
>> done
>>
>> This would result in about 14000 files. This is so simple that it can 
>> even be done with a primitive DOS batch file.
>>
>> Most of the time I work with projected coordinates (-projwin instead 
>> of -srcwin) but the idea is the same. Note by the way that -projwin 
>> uses the *upper* left corner as reference.
>>
>> Jan
>
> Jan,
>
> I always like simple solutions.  I put your code into a bash script 
> and tried it
> on a 10240x5120 section of a tif file.  I applied imagemagick to the 
> full file using
> convert nlcd.tif -crop 256x256 tiles%d.tif
>
> Imagemagick was done in a couple of seconds, but the shell script took 
> several minutes.  Imagemagick wins (I think) because it does 
> everything in memory, whereas
> the shell script keeps reloading the full image on each iteration.  
> However,
> imagemagick starts to fall apart on very large files.   gdalsplit 
> might work better.
>
> Still your solution was worth looking at.
>
> Paul
>
>
I spoke too soon.  I tried this script on some large files. It keeps 
chugging along and
finishes the job ahead of imagemagick on very large files.  So it is a 
solution.


From woodbri at swoodbridge.com  Sat Apr  7 11:43:59 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <46160CBC.7000309@uva.nl>
References: <46154D5E.2000301@uml.edu>	<42409.87.204.110.187.1175802237.squirrel@loskot.net>	<20070406075438.GC12816@bartok.itc.it>
	<46160CBC.7000309@uva.nl>
Message-ID: <4617BC3F.9010003@swoodbridge.com>

Hi Jan,

Great script, thank you for sharing it.

You mentioned working with projected coordinates below. I would like to 
do something along the lines gdalsplit, but be able to define the height 
and width on projected coordinates, like 0.0625 degrees and have it 
split the src image into tiles that size but the edges aligned to hit 
1.0 degree intervals. So like 42.0, 42.0625, 42.125, ...

Is there an easy way to do this in a script?
Would it be easy to modify gdalsplit to do something like this?
What if the src image is in some UTM projection and you want the tiles 
in geographic projection?

Inquiring minds want to know :)

-Steve W

Jan Hartmann wrote:
> 
> 
> Markus Neteler wrote:
>> On Thu, Apr 05, 2007 at 09:43:57PM +0200, Mateusz Loskot wrote:
>>> Paul Van Deusen napisa?(a):
>>>> I am using imagemagick to crop a geotiff file into 256x256 gif files to
>>>> serve as tiles for google maps.
>>>> However, it starts to choke once the tiff file gets larger than  1/2
>>>> GB.   Can gdal_translate take
>>>> a tif file and split it into individual tile files of a specific size?
>>> Paul,
>>>
>>> AFAIK, GDAL won't help here out of the box.
>>> Users usually take gdal_translate.cpp program and customize it to do 
>>> this
>>> job.
>>> Here you can find such utility called gdalsplit and posted to the list a
>>> longer while ago:
>>>
>>> http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html
>>>
>>> May be it will work for you.
>>
>> If anyone happens to haave an updated version of "gdalsplit"
>> I would be interested.
>> Maybe some mechanism to manage user contributions would be
>> good (like the GRASS Addons repository).
>>
>> Markus
>>
>> ------------------
>> ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
>> ITC -> since 1 March 2007 Fondazione Bruno Kessler
>> ------------------
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> 
> Perhaps I am overlooking something, or didn't understand the question 
> right, but I regularly create tiles from a large tif-file with the 
> -srcwin <xoff yoff xsize ysize> parameter of gdal_translate. A simple 
> bash-script to tile in.tif (30000*30000 pixels) into 256*256 tiles would 
> be:
> 
> width=30000
> height=30000
> y=0
> while [ $y -lt $height ]
> do
>   x=0
>   while [ $x -lt $width ]
>   do
>      outtif=t_${y}_$x.tif
>      gdal_translate -srcwin $x $y 256 256 in.tif $outtif
>      let x=$x+256
>   done
>   let y=$y+256
> done
> 
> This would result in about 14000 files. This is so simple that it can 
> even be done with a primitive DOS batch file.
> 
> Most of the time I work with projected coordinates (-projwin instead of 
> -srcwin) but the idea is the same. Note by the way that -projwin uses 
> the *upper* left corner as reference.
> 
> Jan
> 
> Dr. J. Hartmann
> Department of Geography
> University of Amsterdam
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From tutey at o2.pl  Sat Apr  7 12:29:11 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] how to fetch stable 1.4.0 + bugfixes
In-Reply-To: <20070316130112.GA2011@ak4719.spb.edu>
References: <45F7198D.10307@o2.pl> <45F71EF4.1040806@o2.pl>
	<20070316130112.GA2011@ak4719.spb.edu>
Message-ID: <4617C6D7.8030105@o2.pl>

Andrey Kiselev wrote:

> On Tue, Mar 13, 2007 at 11:00:20PM +0100, Maciej Sieczka wrote:

>> Is there a stable GDAL SVN trunk including only bugfixes and no new
>> features? I'm hesistant to using unstable GDAL version.

> You can check out the stable branch:
> 
>  https://svn.osgeo.org/gdal/branches/1.4/gdal

Just few minutes ago I have done:

svn checkout https://svn.osgeo.org/gdal/branches/1.4/gdal

and the VERSION file reads:

1.4.1b1

So is this 1.4.1 beta, or is it indeed the 1.4.0 + bugfixes I wanted to
fetch???

Could the instruction for how to fetch the latest stable+bugfixes
branch and the most bleeding-edge branch be put on GDAL's website?
Currently the 'Subversion' section on http://www.gdal.org/download.html
doesn't explain that.

Maciek

From tutey at o2.pl  Sat Apr  7 12:36:21 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] autotest-coverage.txt [was: GDAL maintenance biweekly
 report - No. 1]
In-Reply-To: <45FECEE5.1080208@loskot.net>
References: <45FECEE5.1080208@loskot.net>
Message-ID: <4617C885.2050705@o2.pl>

Mateusz Loskot wrote:

> 3. Started analysis of GDAL tests coverage:
> http://mateusz.loskot.net/tmp/gdal/autotest-coverage.txt

If that's usefull, a sample NDF (NLAPS Data Format) sample can be found
here:
ftp://edclpdsftp.cr.usgs.gov/SAMPLE/DATA/L5_MSS_NDF

linked on:
http://landsat.usgs.gov/data_products/sample_products.php

Maciek

From mateusz at loskot.net  Sat Apr  7 12:37:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <20070406075438.GC12816@bartok.itc.it>
References: <46154D5E.2000301@uml.edu>	<42409.87.204.110.187.1175802237.squirrel@loskot.net>
	<20070406075438.GC12816@bartok.itc.it>
Message-ID: <4617C8C5.7020109@loskot.net>

Markus Neteler wrote:
> On Thu, Apr 05, 2007 at 09:43:57PM +0200, Mateusz Loskot wrote:
>> Paul Van Deusen napisa?(a):
>>> I am using imagemagick to crop a geotiff file into 256x256 gif files to
>>> serve as tiles for google maps.
>>> However, it starts to choke once the tiff file gets larger than  1/2
>>> GB.   Can gdal_translate take
>>> a tif file and split it into individual tile files of a specific size?
>> Paul,
>>
>> AFAIK, GDAL won't help here out of the box.
>> Users usually take gdal_translate.cpp program and customize it to do this
>> job.
>> Here you can find such utility called gdalsplit and posted to the list a
>> longer while ago:
>>
>> http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html
>>
>> May be it will work for you.
> 
> If anyone happens to haave an updated version of "gdalsplit"
> I would be interested.
> Maybe some mechanism to manage user contributions would be
> good (like the GRASS Addons repository).


Folks,

I cleaned, updated and tested Homme's gdalsplit utility.
Here it is submitted as an enhancement with source code + patches for
makefiles, if you'd like to integrate it with GDAL building system
easily:

http://trac.osgeo.org/gdal/ticket/1566

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Sat Apr  7 12:41:27 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] autotest-coverage.txt [was: GDAL maintenance biweekly
 report - No. 1]
In-Reply-To: <45FECEE5.1080208@loskot.net>
References: <45FECEE5.1080208@loskot.net>
Message-ID: <4617C9B7.3090500@o2.pl>

Mateusz Loskot wrote:

> 3. Started analysis of GDAL tests coverage:
> http://mateusz.loskot.net/tmp/gdal/autotest-coverage.txt

If it's relevant: I can't see HDF4 on the list.

Maciek

From nhv at cape.com  Sat Apr  7 13:03:10 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <4617BC3F.9010003@swoodbridge.com>
Message-ID: <200704071703.l37H3AC3004914@smtp10.cape.com>

Stephen Woodbridge writes:
> > 
> Great script, thank you for sharing it.
> 
> You mentioned working with projected coordinates below. I 
> would like to do something along the lines gdalsplit, but be 
> able to define the height and width on projected coordinates, 
> like 0.0625 degrees and have it split the src image into 
> tiles that size but the edges aligned to hit 1.0 degree 
> intervals. So like 42.0, 42.0625, 42.125, ...
> 
> Is there an easy way to do this in a script?
> Would it be easy to modify gdalsplit to do something like this?
> What if the src image is in some UTM projection and you want 
> the tiles in geographic projection?

OSSIM has a couple of command line utilities that do this and more

igen and orthoigen

Docs start at about page 85 of 
http://ossim.telascience.org/ossimdata/Documentation/ossim_users_guide.pdf

Ossim has a GDAL plugin so most GDAL supported formats work

Norman


From woodbri at swoodbridge.com  Sat Apr  7 13:20:31 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Missing pixels after warp
Message-ID: <4617D2DF.8000209@swoodbridge.com>

Hi,

I used gdal warp to mosaic some images and I seem to have some bit-rot 
along the seams.

http://imaptools.com/temp/missing-pixels.png

The upper image is a 2 meter/pixel image that was stretched into a 1 
meter/pixel file. Then the lower image which is 1 meter/pixel was 
mosaiced into the same file.

This problem is probably exaggerated but the stretching the image into 
the 1 meter/pixel file.

I have not had a chance to recreate this and look at the original source 
files to see what they look like, but I'm wondering is anyone has any 
tricks or ideas on how to avoid this?

-Steve

From warmerdam at pobox.com  Sat Apr  7 14:01:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] how to fetch stable 1.4.0 + bugfixes
In-Reply-To: <4617C6D7.8030105@o2.pl>
References: <45F7198D.10307@o2.pl> <45F71EF4.1040806@o2.pl>
	<20070316130112.GA2011@ak4719.spb.edu> <4617C6D7.8030105@o2.pl>
Message-ID: <4617DC60.5090702@pobox.com>

Maciej Sieczka wrote:
> Just few minutes ago I have done:
> 
> svn checkout https://svn.osgeo.org/gdal/branches/1.4/gdal
> 
> and the VERSION file reads:
> 
> 1.4.1b1
> 
> So is this 1.4.1 beta, or is it indeed the 1.4.0 + bugfixes I wanted to
> fetch???

Maciej,

Yes, 1.4.1beta *is* 1.4.0 plus bug fixes as opposed to the trunk
where most new features are introduced.

> Could the instruction for how to fetch the latest stable+bugfixes
> branch and the most bleeding-edge branch be put on GDAL's website?
> Currently the 'Subversion' section on http://www.gdal.org/download.html
> doesn't explain that.

I'll make some updates to make this clearer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Apr  7 14:20:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Missing pixels after warp
In-Reply-To: <4617D2DF.8000209@swoodbridge.com>
References: <4617D2DF.8000209@swoodbridge.com>
Message-ID: <4617E102.5070007@pobox.com>

Stephen Woodbridge wrote:
> Hi,
> 
> I used gdal warp to mosaic some images and I seem to have some bit-rot 
> along the seams.
> 
> http://imaptools.com/temp/missing-pixels.png
> 
> The upper image is a 2 meter/pixel image that was stretched into a 1 
> meter/pixel file. Then the lower image which is 1 meter/pixel was 
> mosaiced into the same file.
> 
> This problem is probably exaggerated but the stretching the image into 
> the 1 meter/pixel file.
> 
> I have not had a chance to recreate this and look at the original source 
> files to see what they look like, but I'm wondering is anyone has any 
> tricks or ideas on how to avoid this?

Steve,

This looks like quite a serious issue.  I'd guess there are pixels being
identified as nodata, though it is hard to be sure.

If you can boil this down to a simple process to reproduce I'd be interested
in digging into it.  There is at least one somewhat related sounding bug
report in trac I hope to dig into.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sat Apr  7 17:05:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: autotest-coverage.txt [was: GDAL maintenance
 biweekly report - No. 1]
In-Reply-To: <4617C885.2050705@o2.pl>
References: <45FECEE5.1080208@loskot.net> <4617C885.2050705@o2.pl>
Message-ID: <46180791.8000805@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
> 
>> 3. Started analysis of GDAL tests coverage:
>> http://mateusz.loskot.net/tmp/gdal/autotest-coverage.txt
> 
> If that's usefull, a sample NDF (NLAPS Data Format) sample can be found
> here:
> ftp://edclpdsftp.cr.usgs.gov/SAMPLE/DATA/L5_MSS_NDF
> 
> linked on:
> http://landsat.usgs.gov/data_products/sample_products.php

Maciej,

Thanks, I'll check these samples.

FYI, I've moved the autotest status from the raw text file to the Wiki:

http://trac.osgeo.org/gdal/wiki/AutotestStatus

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From stanley at fresco.sr.unh.edu  Sun Apr  8 01:23:35 2007
From: stanley at fresco.sr.unh.edu (Stanley Glidden)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Excluding the nodata value from gdalwarp interpolation
Message-ID: <Pine.LNX.4.64.0704080104240.30206@fresco.sr.unh.edu>

Hi,

Can someone tell me the proper way to keep the nodata value from being 
interpolated by gdalwarp when using bilinear or cubic resampling. What I 
tried does not seem to work. I thought the -srcnodata flag would take care 
of this?


Thanks,

--Stanley Glidden

<Example of 4x4 matrix before and after gdalwarp>

gdalwarp -srcnodata -9999 -dstnodata -9999 -t_srs 'EPSG:2823' -s_srs 
'EPSG:4326' -of VRT -rb test.asc test2.vrt

gdal_translate -a_nodata -9999 -of AAIGrid test2.vrt test2.asc


#(input) test.asc
#ncols 4
#nrows 4
#xllcorner -70
#yllcorner 40
#cellsize .1
#NODATA_value -9999
#1 2 3 4
#5 -9999 7 8
#9 10 11 12
#13 14 15 16

#(result) test2.asc
#ncols        4
#nrows        5
#xllcorner    441487.734861204110
#yllcorner    -280657.303193560336
#cellsize     9896.947051239924
#NODATA_value  -9999
# 1 2 3 4
# -389 -6344 7 7
# -84 -2454 10 11
# 11 13 14 15
# 13 14 15 16




-- 
Water Systems Analysis Group
University of New Hampshire

From woodbri at swoodbridge.com  Sun Apr  8 12:22:17 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Missing pixels after warp
In-Reply-To: <4617E102.5070007@pobox.com>
References: <4617D2DF.8000209@swoodbridge.com> <4617E102.5070007@pobox.com>
Message-ID: <461916B9.3080904@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Hi,
>>
>> I used gdal warp to mosaic some images and I seem to have some bit-rot 
>> along the seams.
>>
>> http://imaptools.com/temp/missing-pixels.png
>>
>> The upper image is a 2 meter/pixel image that was stretched into a 1 
>> meter/pixel file. Then the lower image which is 1 meter/pixel was 
>> mosaiced into the same file.
>>
>> This problem is probably exaggerated but the stretching the image into 
>> the 1 meter/pixel file.
>>
>> I have not had a chance to recreate this and look at the original 
>> source files to see what they look like, but I'm wondering is anyone 
>> has any tricks or ideas on how to avoid this?
> 
> Steve,
> 
> This looks like quite a serious issue.  I'd guess there are pixels being
> identified as nodata, though it is hard to be sure.
> 
> If you can boil this down to a simple process to reproduce I'd be 
> interested
> in digging into it.  There is at least one somewhat related sounding bug
> report in trac I hope to dig into.
> 
> Best regards,
> 
Frank,

Thank you for the offer. I was able to track the problem back to the 
source tiles and it is a nearblack issue with some tiles.

This brings up couple of interesting problems associated with using 
nearblack. The imagery I'm working with is CCM files and as you know 
these are mosaics of DOQQ or equivalent tiles. So the one example that I 
traced back had an image with a notch like where "n" is nearblack:

         nnnnnnnnnnnnn          nnnnnnnnnnnnnnn
         n+---------+n          n+-----------+n
         n|         |n     A    n|           |n
         n|         |n          n|           |n
         n|         |nnnnnnnnnnnn|           |nnnnnnnnnnnnnnn
         n|         +------------+           +-------------+n
         n|                                                |n
         n|                                                |n
         n+------------------------------------------------+n
         nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn

1) nearblack scans rows from right to left and left to right and stops 
its scan after eating some pixels of good data. So it will never process 
a notch like area "A" above or a hole in the imagery (not that I have 
that case).

2) Notice my comment about eating some good pixels. nearblack does not 
implement a look ahead, it destructively eats (sets to black) good 
pixels and counts them. After it has reached some threshold it decides 
that it is in real data and terminates that scan. What is should do is 
trigger a look ahead if it finds a pixel outside the near black 
threshhold, to see if it is a small outlier or real data. Yes this would 
make it marginally slower but most of the time you would not do the look 
ahead, and the current algorithm does the same scan as a look behind.

3) it would be a nice feature to add to gdalwarp and gdal_translate to 
be able to define something like:
    -srcnodata <5
that would treat all values less than 5 as nodata in the source image. 
This has some obvious downsides of setting possible nearblack good data 
in the interior to black, but I think it would be generally useful for a 
lot of situations.

Thoughts?

-Steve

From warmerdam at pobox.com  Sun Apr  8 18:48:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Missing pixels after warp
In-Reply-To: <461916B9.3080904@swoodbridge.com>
References: <4617D2DF.8000209@swoodbridge.com> <4617E102.5070007@pobox.com>
	<461916B9.3080904@swoodbridge.com>
Message-ID: <46197157.4040700@pobox.com>

Stephen Woodbridge wrote:
> Thank you for the offer. I was able to track the problem back to the 
> source tiles and it is a nearblack issue with some tiles.

Steve,

Ah, I didn't know nearblack was involved, or I wouldn't have been so
surprised by the effect.


> This brings up couple of interesting problems associated with using 
> nearblack. The imagery I'm working with is CCM files and as you know 
> these are mosaics of DOQQ or equivalent tiles. So the one example that I 
> traced back had an image with a notch like where "n" is nearblack:
> 
>         nnnnnnnnnnnnn          nnnnnnnnnnnnnnn
>         n+---------+n          n+-----------+n
>         n|         |n     A    n|           |n
>         n|         |n          n|           |n
>         n|         |nnnnnnnnnnnn|           |nnnnnnnnnnnnnnn
>         n|         +------------+           +-------------+n
>         n|                                                |n
>         n|                                                |n
>         n+------------------------------------------------+n
>         nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn
> 
> 1) nearblack scans rows from right to left and left to right and stops 
> its scan after eating some pixels of good data. So it will never process 
> a notch like area "A" above or a hole in the imagery (not that I have 
> that case).

Yes, this is a known problem.  The difficulty is that it is noticably more
complicated to do the top to bottom, and bottom to top scanning without using
a lot of memory, though I can imagine some approaches that wouldn't be bad.

> 2) Notice my comment about eating some good pixels. nearblack does not 
> implement a look ahead, it destructively eats (sets to black) good 
> pixels and counts them. After it has reached some threshold it decides 
> that it is in real data and terminates that scan. What is should do is 
> trigger a look ahead if it finds a pixel outside the near black 
> threshhold, to see if it is a small outlier or real data. Yes this would 
> make it marginally slower but most of the time you would not do the look 
> ahead, and the current algorithm does the same scan as a look behind.

This is a reasonable idea, though in my clients case it was more important
to ensure that the edges were eaten away cleanly (since there was lots of
overlap) than to preserve the maximum number of pixels.

> 3) it would be a nice feature to add to gdalwarp and gdal_translate to 
> be able to define something like:
>    -srcnodata <5
> that would treat all values less than 5 as nodata in the source image. 
> This has some obvious downsides of setting possible nearblack good data 
> in the interior to black, but I think it would be generally useful for a 
> lot of situations.

I'm a bit dubious about this approach.  I think if you really want more
generalized concepts of nodata values and regions, the thing to do is
preprocess your image and marking nodata pixels explicitly.  This could be
done in something grass which has excellent "raster algebra" tools, or using
something like a python script with numpy to operate on the image as an array.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From randre at gmail.com  Sun Apr  8 20:37:51 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Where's the _gdal module?
Message-ID: <9c2015090704081737l16a6ed69lad94b395b51d4b91@mail.gmail.com>

I just finished compiling and installing gdal from source in Cygwin.  The
utilities like "gdal_translate" and "gdalinfo" seem to be working fne, but
I'm, having trouble with the Python API.  For example, when I try to run
"gdal_merge.py", I get the following error:

$ gdal_merge.py
Traceback (most recent call last):
  File "/usr/local/bin/gdal_merge.py", line 110, in <module>
    import gdal
  File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in <module>
    import _gdal
ImportError: No module named _gdal

When I trace this a bit further online, I see references to needing a "
gdal.so", but I don't know where it should be, or how to get it.

Can someone advise me?

Thanks.
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070408/33ff1af4/attachment.html
From mateusz at loskot.net  Mon Apr  9 10:12:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Where's the _gdal module?
In-Reply-To: <9c2015090704081737l16a6ed69lad94b395b51d4b91@mail.gmail.com>
References: <9c2015090704081737l16a6ed69lad94b395b51d4b91@mail.gmail.com>
Message-ID: <58522.87.204.110.187.1176127971.squirrel@loskot.net>

Roger Andr? wrote:
> I just finished compiling and installing gdal from source in Cygwin.  The
> utilities like "gdal_translate" and "gdalinfo" seem to be working fne, but
> I'm, having trouble with the Python API.  For example, when I try to run
> "gdal_merge.py", I get the following error:
>
> $ gdal_merge.py
> Traceback (most recent call last):
>   File "/usr/local/bin/gdal_merge.py", line 110, in <module>
>     import gdal
>   File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in <module>
>     import _gdal
> ImportError: No module named _gdal
>
> When I trace this a bit further online, I see references to needing a "
> gdal.so", but I don't know where it should be, or how to get it.
>
> Can someone advise me?

Roger,

Could you tell us how did you configured GDAL and what Python bindings do
you want to use: traditional or SWIG-based?
Simply, paste the ./configure command with all options you used.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From randre at gmail.com  Mon Apr  9 11:18:01 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Where's the _gdal module?
In-Reply-To: <58522.87.204.110.187.1176127971.squirrel@loskot.net>
References: <9c2015090704081737l16a6ed69lad94b395b51d4b91@mail.gmail.com>
	<58522.87.204.110.187.1176127971.squirrel@loskot.net>
Message-ID: <9c2015090704090818l2ae6ce41re5de7bb3fc734579@mail.gmail.com>

Ahh, well that may be the crux of the problem.  I ran ./configure with no
options, since I was unsure of what to set.  From the message that came up
during the compile process, it appears I have png, geotiff, jpg and OGR
support as is.  In the future I might look into JPEG2000 support, but for
now, this appeared  sufficient.

Regarding Python support, I don't know what the difference is between SWIG
and traditional Python support.  I would like to be able to run the
utilities that come with GDAL, such as "gdal_merge.py".  It appears that in
orger to do this I need to be able to import the gdal module.  More than
that I'm afraid I don't know.

I did find yesterday that there has been some discussion about how Cygwin
doesn't use shared libraries the way other Unix distros do, and that there
is a cygMakefile in the gdal/pymod directory.  However, it appears to be old
(refers to Python 2.1), and I have no idea how to use it as part of the
compile process.

Sorry I can't answer better, if you can point me to specific things to look
for, I'll be glad to do so.

Thanks for the help,

Roger
--

On 4/9/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> Roger Andr? wrote:
> > I just finished compiling and installing gdal from source in
> Cygwin.  The
> > utilities like "gdal_translate" and "gdalinfo" seem to be working fne,
> but
> > I'm, having trouble with the Python API.  For example, when I try to run
> > "gdal_merge.py", I get the following error:
> >
> > $ gdal_merge.py
> > Traceback (most recent call last):
> >   File "/usr/local/bin/gdal_merge.py", line 110, in <module>
> >     import gdal
> >   File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in <module>
> >     import _gdal
> > ImportError: No module named _gdal
> >
> > When I trace this a bit further online, I see references to needing a "
> > gdal.so", but I don't know where it should be, or how to get it.
> >
> > Can someone advise me?
>
> Roger,
>
> Could you tell us how did you configured GDAL and what Python bindings do
> you want to use: traditional or SWIG-based?
> Simply, paste the ./configure command with all options you used.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070409/064c9cb3/attachment.html
From mateusz at loskot.net  Mon Apr  9 11:33:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Where's the _gdal module?
In-Reply-To: <9c2015090704090818l2ae6ce41re5de7bb3fc734579@mail.gmail.com>
References: <9c2015090704081737l16a6ed69lad94b395b51d4b91@mail.gmail.com>
	<58522.87.204.110.187.1176127971.squirrel@loskot.net>
	<9c2015090704090818l2ae6ce41re5de7bb3fc734579@mail.gmail.com>
Message-ID: <59827.87.204.110.187.1176132801.squirrel@loskot.net>

Roger Andr? wrote:
> Ahh, well that may be the crux of the problem.  I ran ./configure with no
> options, since I was unsure of what to set.

Roger,

Try to run it this way, to configure the Traditional (for more details,
see the URL below):

./configure --with-python --without-ngpython ...


> Regarding Python support, I don't know what the difference is between SWIG
> and traditional Python support.

Here you can find some explanation:

http://trac.osgeo.org/gdal/wiki/GdalOgrInPython

> I would like to be able to run the
> utilities that come with GDAL, such as "gdal_merge.py".
> It appears that in orger to do this I need to be able to
> import the gdal module.  More than that I'm afraid I don't know.

Both bindings are compatible, but I've found the traditional easier to use
because I do not run 'make install' usually, during GDAL development process.

Anyway, you should be able to use both.

> I did find yesterday that there has been some discussion about how Cygwin
> doesn't use shared libraries the way other Unix distros do, and that there
> is a cygMakefile in the gdal/pymod directory.  However, it appears to be
> old
> (refers to Python 2.1), and I have no idea how to use it as part of the
> compile process.

Unfortunately, I'm not a user of Cygwin and actually I don't know this file.
The cygMakefile looks to me as a minimal version of GNUmakefile, may be it
will work.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Paul_VanDeusen at uml.edu  Mon Apr  9 12:22:22 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] why does r.out.gdal break other stuff?
Message-ID: <461A683E.8050308@uml.edu>

I just noticed that configuring gdal using the --with-grass option 
breaks things that used to work.
Is there anyway to have r.out.gdal working without sacrificing other 
gdal capabilities. 
For example, I could no longer run gdalinfo after compilation using the 
--with-grass option. 

I found this description of the problem.
http://grass.itc.it/pipermail/grass5/2004-October/015804.html


From warmerdam at pobox.com  Mon Apr  9 19:31:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.1 Released
Message-ID: <461ACCC0.8050104@pobox.com>

Folks,

Today I have released GDAL/OGR 1.4.1.  This is a "Stable Branch Release",
which is something new for GDAL/OGR.  That means it contains virtually no
new features, but it does contain all important bug fixes since 1.4.0.  It
should be possible for anyone using GDAL/OGR 1.4.0 to upgrade to GDAL/OGR
1.4.1 with a minimum of concern of new bugs or disruptive changes.  The binary
API (in C and C++ at least) should be the same as 1.4.0.

The detailed list of bugs fixed can be found at:

   http://trac.osgeo.org/gdal/wiki/Release/1.4.1-News

The source can be downloaded from:

  * http://download.osgeo.org/gdal/gdal141.zip - source as a zip
  * http://download.osgeo.org/gdal/gdal-1.4.1.tar.gz - source as .tar.gz
  * http://download.osgeo.org/gdal/gdal141doc.zip - html reference docs
  * http://download.osgeo.org/gdal/gdalautotest-1.4.1.tar.gz - test suite

I have tentatively scheduled a 1.4.2 bug fix release for late March.
I'd especially like to thank Mateusz Loskot, Tamas Szekeres, Howard Butler
and Denis Nadeau who have made large contributions to this release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From j.l.h.hartmann at uva.nl  Tue Apr 10 06:22:29 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] create 256x256 tiles for google maps
In-Reply-To: <4617BC3F.9010003@swoodbridge.com>
References: <46154D5E.2000301@uml.edu>	<42409.87.204.110.187.1175802237.squirrel@loskot.net>	<20070406075438.GC12816@bartok.itc.it>
	<46160CBC.7000309@uva.nl> <4617BC3F.9010003@swoodbridge.com>
Message-ID: <461B6565.10707@uva.nl>

Hi Steve,

If I understand you right, you would like to split a map from (e.g.) 0/0 
to 1/1 degree into (say) 20 by 20 parts. A shell-script  for that would be:

north=1
east=1
let size = 1/20
y=0
while [ $y -lt $north ]
do
   let yto=$y+$size
   x=0
   while [ $x -lt $east ]
   do
     outtif=t_${y}_$x.tif
     let xto=$x+$size
     gdal_translate -projwin $x $yto $xto $y in.tif $outtif
### Note upper y first!
     let x=$x+$size
   done
   let y=$y+$size
done

To align the tiles correctly you only need to set appropriate start and 
interval values.

For conversion between UTM and latlon, you can use gdalwarp. The safest 
way would be to project the complete input file and tile from the output 
file. If that isn't feasible, you can project and tile in one step:

gdalwarp -s_srs ... -t_srs ... -te xmin ymin xmax ymax -tr xres yres 
in.tif out.tif

but I always get confused by the different number systems of input and 
output. Better do it in two steps.

I haven't looked yet at gdalsplit, but I wouldn't expect it to work much 
faster than this script, not orders of magnitude, that is. To be sure, 
gdal_translate has to be started anew for every inner loop cycle, but 
that is not as inefficient as it looks. Even after finishing, it remains 
in the OS cache, and will be loaded again from unswapped memory. That is 
also the reason, by the way, that Mapserver CGI is not dramatically 
faster than a FastCGI solution, or MapScript with PHP-CGI than 
PHP-Module. The second ones are faster for sure, but as a rule the CGI 
versions remain in memory between successive calls too, so the only 
overhead is in initializing code and data stacks.

And then, I do not tile large files that often. It needs to be done at 
times, but after that the results ar permanently available and can be 
used time and again.

Happy Easter,

Jan


Stephen Woodbridge wrote:
> Hi Jan,
> 
> Great script, thank you for sharing it.
> 
> You mentioned working with projected coordinates below. I would like to 
> do something along the lines gdalsplit, but be able to define the height 
> and width on projected coordinates, like 0.0625 degrees and have it 
> split the src image into tiles that size but the edges aligned to hit 
> 1.0 degree intervals. So like 42.0, 42.0625, 42.125, ...
> 
> Is there an easy way to do this in a script?
> Would it be easy to modify gdalsplit to do something like this?
> What if the src image is in some UTM projection and you want the tiles 
> in geographic projection?
> 
> Inquiring minds want to know :)
> 
> -Steve W
> 
> Jan Hartmann wrote:
>>
>>
>> Markus Neteler wrote:
>>> On Thu, Apr 05, 2007 at 09:43:57PM +0200, Mateusz Loskot wrote:
>>>> Paul Van Deusen napisa?(a):
>>>>> I am using imagemagick to crop a geotiff file into 256x256 gif 
>>>>> files to
>>>>> serve as tiles for google maps.
>>>>> However, it starts to choke once the tiff file gets larger than  1/2
>>>>> GB.   Can gdal_translate take
>>>>> a tif file and split it into individual tile files of a specific size?
>>>> Paul,
>>>>
>>>> AFAIK, GDAL won't help here out of the box.
>>>> Users usually take gdal_translate.cpp program and customize it to do 
>>>> this
>>>> job.
>>>> Here you can find such utility called gdalsplit and posted to the 
>>>> list a
>>>> longer while ago:
>>>>
>>>> http://lists.maptools.org/pipermail/gdal-dev/2004-September/004135.html
>>>>
>>>> May be it will work for you.
>>>
>>> If anyone happens to haave an updated version of "gdalsplit"
>>> I would be interested.
>>> Maybe some mechanism to manage user contributions would be
>>> good (like the GRASS Addons repository).
>>>
>>> Markus
>>>
>>> ------------------
>>> ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
>>> ITC -> since 1 March 2007 Fondazione Bruno Kessler
>>> ------------------
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>>
>> Perhaps I am overlooking something, or didn't understand the question 
>> right, but I regularly create tiles from a large tif-file with the 
>> -srcwin <xoff yoff xsize ysize> parameter of gdal_translate. A simple 
>> bash-script to tile in.tif (30000*30000 pixels) into 256*256 tiles 
>> would be:
>>
>> width=30000
>> height=30000
>> y=0
>> while [ $y -lt $height ]
>> do
>>   x=0
>>   while [ $x -lt $width ]
>>   do
>>      outtif=t_${y}_$x.tif
>>      gdal_translate -srcwin $x $y 256 256 in.tif $outtif
>>      let x=$x+256
>>   done
>>   let y=$y+256
>> done
>>
>> This would result in about 14000 files. This is so simple that it can 
>> even be done with a primitive DOS batch file.
>>
>> Most of the time I work with projected coordinates (-projwin instead 
>> of -srcwin) but the idea is the same. Note by the way that -projwin 
>> uses the *upper* left corner as reference.
>>
>> Jan
>>
>> Dr. J. Hartmann
>> Department of Geography
>> University of Amsterdam
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From jluis at ualg.pt  Tue Apr 10 07:16:56 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] EHdr/ESRI .hdr to read SRTM is no longer working
In-Reply-To: <461B6565.10707@uva.nl>
References: <46154D5E.2000301@uml.edu>	<42409.87.204.110.187.1175802237.squirrel@loskot.net>	<20070406075438.GC12816@bartok.itc.it>	<46160CBC.7000309@uva.nl>
	<4617BC3F.9010003@swoodbridge.com> <461B6565.10707@uva.nl>
Message-ID: <461B7228.6040609@ualg.pt>

Hi,
The recipe of reading SRTMs by generating a ESRI .hdr file is no longer 
working
with  GDAL1.4 but it does work with 1.3.2
The problem seams to be that data is converted to unsigned short int 
instead of signed short int.

Joaquim Luis


---------------- With GDAL1.4.0

D:\programas\GDALB140\bin>gdalinfo -stats d:\img_samples\N18W071.hgt
Driver: EHdr/ESRI .hdr Labelled
Size is 1201, 1201
Coordinate System is `'
Origin = (-71.000416666666666,19.000416666666666)
Pixel Size = (0.000833333333333,-0.000833333333333)
Corner Coordinates:
Upper Left  ( -71.0004167,  19.0004167)
Lower Left  ( -71.0004167,  17.9995833)
Upper Right ( -69.9995833,  19.0004167)
Lower Right ( -69.9995833,  17.9995833)
Center      ( -70.5000000,  18.5000000)
Band 1 Block=1201x1 Type=UInt16, ColorInterp=Undefined
  Minimum=0.000, Maximum=65535.000, Mean=2873.507, StdDev=11834.425
  NoData Value=-32768

---------------- Now with GDAL1.3.2


D:\programas\GDALB132\bin>gdalinfo -stats d:\img_samples\N18W071.hgt
Driver: EHdr/ESRI .hdr Labelled
Size is 1201, 1201
Coordinate System is `'
Origin = (-71.000417,19.000417)
Pixel Size = (0.00083333,-0.00083333)
Corner Coordinates:
Upper Left  ( -71.0004167,  19.0004167)
Lower Left  ( -71.0004167,  17.9995833)
Upper Right ( -69.9995833,  19.0004167)
Lower Right ( -69.9995833,  17.9995833)
Center      ( -70.5000000,  18.5000000)
Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
  Minimum=-39.000, Maximum=2833.000, Mean=459.681, StdDev=572.878
  NoData Value=-32768
  Metadata:
    STATISTICS_MINIMUM=-39
    STATISTICS_MAXIMUM=2833
    STATISTICS_MEAN=459.68081074608
    STATISTICS_STDDEV=572.87797657624

and the header file is

# N18W071.hdr

BYTEORDER     M
LAYOUT        BIL
NROWS       1201
NCOLS       1201
NBANDS        1
NBITS         16
BANDROWBYTES  2402
TOTALROWBYTES 2402
BANDGAPBYTES  0
NODATA        -32768
ULXMAP        -71
ULYMAP        19
XDIM         0.000833333333333
YDIM         0.000833333333333

From mitchelljj98 at gmail.com  Tue Apr 10 09:33:29 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Fwd: gdalwarp with change in projection for tiles then
	adjacent tiles overlap slightly with a black border at edge.
In-Reply-To: <fa2ac0580704050740t7aeec97cv10cf78aba99d5428@mail.gmail.com>
References: <fa2ac0580704050740t7aeec97cv10cf78aba99d5428@mail.gmail.com>
Message-ID: <fa2ac0580704100633h60c5eb99m9cf8ed456e09c6ff@mail.gmail.com>

Frank,

Is their any plans on getting rid of the black border that you get when
using gdalwarp to reproject individual tiles which results in the black
border slightly overlapping the image of its adjacent reprojected tile?

If the above answer is no then how would I put in a request to gdal for this
capability.

Thanks,

John Mitchell



---------- Forwarded message ----------
From: John Mitchell <mitchelljj98@gmail.com>
Date: Apr 5, 2007 10:40 AM
Subject: gdalwarp with change in projection for tiles then adjacent tiles
overlap slightly with a black border at edge.
To: Gdal-Dev <gdal-dev@lists.maptools.org>, MAPSERVER-USERS@lists.umn.edu
Cc: mitchelljj98@gmail.com

Hi,

I have found that running gdalwarp with a change in projection individually
for each tile and splitting them up via gdal_translate that the adjacent
tiles overlap slightly with a black border at edge.  If I instead run
gdalwarp against all the tiles to create a big mosaic with a change in
projection and then split(gdal_translate) them up that I don't have this
overlap.

Is their a way to individually run gdalwarp with a change in projection
against each tile without getting this overlap?

Thanks,

-- 
John J. Mitchell

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070410/bd71e96b/attachment.html
From t.r.decarlo at larc.nasa.gov  Tue Apr 10 10:30:48 2007
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] SVN problem
Message-ID: <04c001c77b7c$d5629f80$959877c6@larc.nasa.gov>

When I try to do an svn update I get the following error:

PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
'/svn/gdal/gdal/!svn/vcc/default' path not found

Is anyone else having this problem?
Thom

--
this sig intentionally left blank





From warmerdam at pobox.com  Tue Apr 10 10:34:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: Fwd: gdalwarp with change in projection for tiles
 then adjacent tiles overlap slightly with a black border at edge.
In-Reply-To: <fa2ac0580704100633h60c5eb99m9cf8ed456e09c6ff@mail.gmail.com>
References: <fa2ac0580704050740t7aeec97cv10cf78aba99d5428@mail.gmail.com>
	<fa2ac0580704100633h60c5eb99m9cf8ed456e09c6ff@mail.gmail.com>
Message-ID: <461BA076.6080904@pobox.com>

John Mitchell wrote:
> Frank,
> 
> Is their any plans on getting rid of the black border that you get when 
> using gdalwarp to reproject individual tiles which results in the black 
> border slightly overlapping the image of its adjacent reprojected tile?
> 
> If the above answer is no then how would I put in a request to gdal for 
> this capability.

John,

There are already mechanisms to handle this.  Either treating the black as
nodata, or running gdalwarp in such a way to generate an alpha channel so
that the extra pixels are recognizable as transparent.  So, I don't
anticipate any changes in gdalwarp unless I am missing your point.

There have been a few gdalwarp related questions on the list I'd intended
to get back to and try to answer but I'm pretty swamped and that hasn't
happened.  It would be nice to have a "gdalwarp tricks and tips" topic in
the wiki!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Tue Apr 10 10:35:37 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] SVN problem
In-Reply-To: <04c001c77b7c$d5629f80$959877c6@larc.nasa.gov>
References: <04c001c77b7c$d5629f80$959877c6@larc.nasa.gov>
Message-ID: <6.2.3.4.2.20070410093449.03887a38@hobu.mail.iastate.edu>

svn doesn't answer to /svn/gdal anymore.

svn switch --relocate http://svn.osgeo.org/svn/gdal https://svn.osgeo.org/gdal

should do the trick.

At 09:30 AM 4/10/2007, Thom DeCarlo wrote:
>When I try to do an svn update I get the following error:
>
>PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
>'/svn/gdal/gdal/!svn/vcc/default' path not found
>
>Is anyone else having this problem?
>Thom
>
>--
>this sig intentionally left blank
>
>
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From t.r.decarlo at larc.nasa.gov  Tue Apr 10 10:47:16 2007
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] SVN problem
In-Reply-To: <6.2.3.4.2.20070410093449.03887a38@hobu.mail.iastate.edu>
References: <04c001c77b7c$d5629f80$959877c6@larc.nasa.gov>
	<6.2.3.4.2.20070410093449.03887a38@hobu.mail.iastate.edu>
Message-ID: <04c701c77b7f$2218c460$959877c6@larc.nasa.gov>

Howard,
Thanks! That was all it took.

Thom

> -----Original Message-----
> From: Howard Butler [mailto:hobu@iastate.edu]
> Sent: Tuesday, April 10, 2007 10:36 AM
> To: Thom DeCarlo; GDAL developers
> Subject: Re: [Gdal-dev] SVN problem
> 
> svn doesn't answer to /svn/gdal anymore.
> 
> svn switch --relocate http://svn.osgeo.org/svn/gdal
> https://svn.osgeo.org/gdal
> 
> should do the trick.
> 
> At 09:30 AM 4/10/2007, Thom DeCarlo wrote:
> >When I try to do an svn update I get the following error:
> >
> >PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
> >'/svn/gdal/gdal/!svn/vcc/default' path not found
> >
> >Is anyone else having this problem?
> >Thom
> >
> >--
> >this sig intentionally left blank
> >
> >
> >
> >
> >_______________________________________________
> >Gdal-dev mailing list
> >Gdal-dev@lists.maptools.org
> >http://lists.maptools.org/mailman/listinfo/gdal-dev



From mateusz at loskot.net  Tue Apr 10 10:47:49 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] SVN problem
In-Reply-To: <04c001c77b7c$d5629f80$959877c6@larc.nasa.gov>
References: <04c001c77b7c$d5629f80$959877c6@larc.nasa.gov>
Message-ID: <11894.87.204.110.187.1176216469.squirrel@loskot.net>

Thom DeCarlo wrote:
> When I try to do an svn update I get the following error:
>
> PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
> '/svn/gdal/gdal/!svn/vcc/default' path not found
>
> Is anyone else having this problem?
> Thom


Thom,

Please, check if you use correct URL of the GDAL repository:

http://svn.osgeo.org/gdal

but not old one:

http://svn.osgeo.org/svn/gdal

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Tom.Kralidis at ec.gc.ca  Tue Apr 10 10:54:12 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] version issues
Message-ID: <2576812186CDD411BF1500508B6DCE9511B30D72@ecnwri1.ontario.int.ec.gc.ca>


Hi,

After downloading, building (from source) and installing 1.4.1 (on FC6),
when I check for versions, I get the following:

$ gdal-config --version
1.5.0
$ gdalinfo --version
GDAL 1.5dev, released 2007/04/01

...when I was expecting 1.4.1

Is this intended?

..Tom



From neteler at itc.it  Tue Apr 10 11:12:57 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] why does r.out.gdal break other stuff?
In-Reply-To: <461A683E.8050308@uml.edu>
References: <461A683E.8050308@uml.edu>
Message-ID: <20070410151257.GB17129@bartok.itc.it>

On Mon, Apr 09, 2007 at 12:22:22PM -0400, Paul Van Deusen wrote:
> I just noticed that configuring gdal using the --with-grass option 
> breaks things that used to work.
> Is there anyway to have r.out.gdal working without sacrificing other 
> gdal capabilities. 
> For example, I could no longer run gdalinfo after compilation using the 
> --with-grass option. 
> 

Paul,

it is better to not use --with-grass for GDAL but the separate
GDAL-OGR-GRASS Plugin. See for instructions here:
http://grass.gdf-hannover.de/wiki/Compile_and_install_GRASS_and_QGIS_with_GDAL/OGR_Plugin

Then r.out.gdal works nicely.

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From neteler at itc.it  Tue Apr 10 11:15:27 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] EHdr/ESRI .hdr to read SRTM is no longer working
In-Reply-To: <461B7228.6040609@ualg.pt>
References: <46154D5E.2000301@uml.edu>
	<42409.87.204.110.187.1175802237.squirrel@loskot.net>
	<20070406075438.GC12816@bartok.itc.it>
	<46160CBC.7000309@uva.nl> <4617BC3F.9010003@swoodbridge.com>
	<461B6565.10707@uva.nl> <461B7228.6040609@ualg.pt>
Message-ID: <20070410151527.GC17129@bartok.itc.it>

Joaquim,

if you add
PIXELTYPE SIGNEDINT
to the header file, it should work again.

Markus

On Tue, Apr 10, 2007 at 12:16:56PM +0100, Joaquim Luis wrote:
> Hi,
> The recipe of reading SRTMs by generating a ESRI .hdr file is no longer 
> working
> with  GDAL1.4 but it does work with 1.3.2
> The problem seams to be that data is converted to unsigned short int 
> instead of signed short int.
> 
> Joaquim Luis
> 
> 
> ---------------- With GDAL1.4.0
> 
> D:\programas\GDALB140\bin>gdalinfo -stats d:\img_samples\N18W071.hgt
> Driver: EHdr/ESRI .hdr Labelled
> Size is 1201, 1201
> Coordinate System is `'
> Origin = (-71.000416666666666,19.000416666666666)
> Pixel Size = (0.000833333333333,-0.000833333333333)
> Corner Coordinates:
> Upper Left  ( -71.0004167,  19.0004167)
> Lower Left  ( -71.0004167,  17.9995833)
> Upper Right ( -69.9995833,  19.0004167)
> Lower Right ( -69.9995833,  17.9995833)
> Center      ( -70.5000000,  18.5000000)
> Band 1 Block=1201x1 Type=UInt16, ColorInterp=Undefined
>  Minimum=0.000, Maximum=65535.000, Mean=2873.507, StdDev=11834.425
>  NoData Value=-32768
> 
> ---------------- Now with GDAL1.3.2
> 
> 
> D:\programas\GDALB132\bin>gdalinfo -stats d:\img_samples\N18W071.hgt
> Driver: EHdr/ESRI .hdr Labelled
> Size is 1201, 1201
> Coordinate System is `'
> Origin = (-71.000417,19.000417)
> Pixel Size = (0.00083333,-0.00083333)
> Corner Coordinates:
> Upper Left  ( -71.0004167,  19.0004167)
> Lower Left  ( -71.0004167,  17.9995833)
> Upper Right ( -69.9995833,  19.0004167)
> Lower Right ( -69.9995833,  17.9995833)
> Center      ( -70.5000000,  18.5000000)
> Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
>  Minimum=-39.000, Maximum=2833.000, Mean=459.681, StdDev=572.878
>  NoData Value=-32768
>  Metadata:
>    STATISTICS_MINIMUM=-39
>    STATISTICS_MAXIMUM=2833
>    STATISTICS_MEAN=459.68081074608
>    STATISTICS_STDDEV=572.87797657624
> 
> and the header file is
> 
> # N18W071.hdr
> 
> BYTEORDER     M
> LAYOUT        BIL
> NROWS       1201
> NCOLS       1201
> NBANDS        1
> NBITS         16
> BANDROWBYTES  2402
> TOTALROWBYTES 2402
> BANDGAPBYTES  0
> NODATA        -32768
> ULXMAP        -71
> ULYMAP        19
> XDIM         0.000833333333333
> YDIM         0.000833333333333
> 

-- 
Markus Neteler  <neteler itc it>  http://mpa.itc.it/markus/
FBK-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From warmerdam at pobox.com  Tue Apr 10 11:26:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] version issues
In-Reply-To: <2576812186CDD411BF1500508B6DCE9511B30D72@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE9511B30D72@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <461BACAD.3080506@pobox.com>

Kralidis,Tom [Burlington] wrote:
> Hi,
> 
> After downloading, building (from source) and installing 1.4.1 (on FC6),
> when I check for versions, I get the following:
> 
> $ gdal-config --version
> 1.5.0
> $ gdalinfo --version
> GDAL 1.5dev, released 2007/04/01
> 
> ...when I was expecting 1.4.1
> 
> Is this intended?

Tom,

This indicates that I screwed up big time, and issued the 1.4.1 final release
from the "trunk" development branch.  I have deleted the files, and reissued
the 1.4.1 release.

God, I feel like such a knob.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Apr 10 11:32:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: GDAL/OGR 1.4.1 Released
In-Reply-To: <461ACCC0.8050104@pobox.com>
References: <461ACCC0.8050104@pobox.com>
Message-ID: <461BADF2.6050801@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> Today I have released GDAL/OGR 1.4.1.  This is a "Stable Branch Release",
...
> The source can be downloaded from:
> 
>  * http://download.osgeo.org/gdal/gdal141.zip - source as a zip
>  * http://download.osgeo.org/gdal/gdal-1.4.1.tar.gz - source as .tar.gz
>  * http://download.osgeo.org/gdal/gdal141doc.zip - html reference docs
>  * http://download.osgeo.org/gdal/gdalautotest-1.4.1.tar.gz - test suite

Folks,

I am afraid I screwed up and issued the final 1.4.1 release files from the
development trunk, instead of from 1.4.1 as I thought I was doing.  I have
deleted the old gdal-1.4.1.tar.gz, and gdal141.zip files and replaced them
with corrected ones.

If you already downloaded the 1.4.1 release source, please discard it, and
grab again.  The correct files should have the following sizes:

  7342368 Apr 10 08:17 gdal-1.4.1.tar.gz
  8596119 Apr 10 08:17 gdal141.zip

The improper release would report itself as 1.5.0dev if you did something
like "gdalinfo --version".

I shall now go and wallow in my humiliation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Tom.Kralidis at ec.gc.ca  Tue Apr 10 11:48:56 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] version issues
Message-ID: <2576812186CDD411BF1500508B6DCE9511B30D74@ecnwri1.ontario.int.ec.gc.ca>



> Kralidis,Tom [Burlington] wrote:
> > Hi,
> > 
> > After downloading, building (from source) and installing 1.4.1 (on 
> > FC6), when I check for versions, I get the following:
> > 
> > $ gdal-config --version
> > 1.5.0
> > $ gdalinfo --version
> > GDAL 1.5dev, released 2007/04/01
> > 
> > ...when I was expecting 1.4.1
> > 
> > Is this intended?
> 
> Tom,
> 
> This indicates that I screwed up big time, and issued the 
> 1.4.1 final release from the "trunk" development branch.  I 
> have deleted the files, and reissued the 1.4.1 release.
> 
> God, I feel like such a knob.
> 

Downloaded 1.4.1 again (there was some web caching going on [probably
from when I downloaded this AM], so I had to make sure this was the new
one), built / installed from source.  Works now:

$ gdalinfo --version
GDAL 1.4.1.0, released 2007/04/09
$ gdal-config --version
1.4.1

Thanks for the quick fix!

..Tom



From jluis at ualg.pt  Tue Apr 10 12:45:59 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] EHdr/ESRI .hdr to read SRTM is no longer working
In-Reply-To: <20070410151527.GC17129@bartok.itc.it>
References: <46154D5E.2000301@uml.edu>	<42409.87.204.110.187.1175802237.squirrel@loskot.net>	<20070406075438.GC12816@bartok.itc.it>	<46160CBC.7000309@uva.nl>
	<4617BC3F.9010003@swoodbridge.com>	<461B6565.10707@uva.nl>
	<461B7228.6040609@ualg.pt> <20070410151527.GC17129@bartok.itc.it>
Message-ID: <461BBF47.1050506@ualg.pt>

Markus Neteler wrote:
> Joaquim,
>
> if you add
> PIXELTYPE SIGNEDINT
> to the header file, it should work again.
>   


Thanks Markus
Yes it works

Joaquim Luis


> Markus
>
> On Tue, Apr 10, 2007 at 12:16:56PM +0100, Joaquim Luis wrote:
>   
>> Hi,
>> The recipe of reading SRTMs by generating a ESRI .hdr file is no longer 
>> working
>> with  GDAL1.4 but it does work with 1.3.2
>> The problem seams to be that data is converted to unsigned short int 
>> instead of signed short int.
>>
>> Joaquim Luis
>>
>>
>> ---------------- With GDAL1.4.0
>>
>> D:\programas\GDALB140\bin>gdalinfo -stats d:\img_samples\N18W071.hgt
>> Driver: EHdr/ESRI .hdr Labelled
>> Size is 1201, 1201
>> Coordinate System is `'
>> Origin = (-71.000416666666666,19.000416666666666)
>> Pixel Size = (0.000833333333333,-0.000833333333333)
>> Corner Coordinates:
>> Upper Left  ( -71.0004167,  19.0004167)
>> Lower Left  ( -71.0004167,  17.9995833)
>> Upper Right ( -69.9995833,  19.0004167)
>> Lower Right ( -69.9995833,  17.9995833)
>> Center      ( -70.5000000,  18.5000000)
>> Band 1 Block=1201x1 Type=UInt16, ColorInterp=Undefined
>>  Minimum=0.000, Maximum=65535.000, Mean=2873.507, StdDev=11834.425
>>  NoData Value=-32768
>>
>> ---------------- Now with GDAL1.3.2
>>
>>
>> D:\programas\GDALB132\bin>gdalinfo -stats d:\img_samples\N18W071.hgt
>> Driver: EHdr/ESRI .hdr Labelled
>> Size is 1201, 1201
>> Coordinate System is `'
>> Origin = (-71.000417,19.000417)
>> Pixel Size = (0.00083333,-0.00083333)
>> Corner Coordinates:
>> Upper Left  ( -71.0004167,  19.0004167)
>> Lower Left  ( -71.0004167,  17.9995833)
>> Upper Right ( -69.9995833,  19.0004167)
>> Lower Right ( -69.9995833,  17.9995833)
>> Center      ( -70.5000000,  18.5000000)
>> Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
>>  Minimum=-39.000, Maximum=2833.000, Mean=459.681, StdDev=572.878
>>  NoData Value=-32768
>>  Metadata:
>>    STATISTICS_MINIMUM=-39
>>    STATISTICS_MAXIMUM=2833
>>    STATISTICS_MEAN=459.68081074608
>>    STATISTICS_STDDEV=572.87797657624
>>
>> and the header file is
>>
>> # N18W071.hdr
>>
>> BYTEORDER     M
>> LAYOUT        BIL
>> NROWS       1201
>> NCOLS       1201
>> NBANDS        1
>> NBITS         16
>> BANDROWBYTES  2402
>> TOTALROWBYTES 2402
>> BANDGAPBYTES  0
>> NODATA        -32768
>> ULXMAP        -71
>> ULYMAP        19
>> XDIM         0.000833333333333
>> YDIM         0.000833333333333
>>
>>     
>
>   


From richard.matsunaga at waypointinfo.com  Tue Apr 10 14:51:17 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Problem with ogr2ogr and PG
Message-ID: <001d01c77ba1$39596720$c2012b0a@Richard>

Hi all,
 
I think there is something wrong with the PG driver or ogr2ogr when
appending or overwriting an existing table.
 
I can create a PG table from a shape file just fine, to any schema. However,
when I try to append or overwrite to the table, it will only work if the
schema is the default schema in the search path.
 
My command is as below (names changed to protect innocent). The table was
added using the same command (minus the append stuff) to the public schema.
If I remove the schema in both the first conversion and the append, it will
work, with the table going into the default schema.
 
-------------
 
C:\>ogr2ogr -append -update -f "PostgreSQL" PG:"connection string stuff"
shape.shp -lco SCHEMA=public

ERROR 1: CREATE TABLE public."shape" ( OGC_FID SERIAL, CONSTRAINT "shape_pk"
PRIMARY KEY (OGC_FID) )
ERROR:  relation "shape" already exists
 
ERROR 1: Terminating translation prematurely after failed
translation of layer shape
 
--------------
 
Is there a quick fix to this? I looked briefly at the code, but looks like
it would require some digging in the PG driver.
 
Thanks,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070410/e69d63f5/attachment.html
From mateusz at loskot.net  Tue Apr 10 18:12:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Problem with ogr2ogr and PG
In-Reply-To: <001d01c77ba1$39596720$c2012b0a@Richard>
References: <001d01c77ba1$39596720$c2012b0a@Richard>
Message-ID: <14369.87.204.110.187.1176243162.squirrel@loskot.net>

Richard Matsunaga wrote
> I think there is something wrong with the PG driver or ogr2ogr when
> appending or overwriting an existing table.
>
> I can create a PG table from a shape file just fine, to any schema.
> However, when I try to append or overwrite to the table,
> it will only work if the schema is the default schema in the search path.

Richard,

Yes, you're right there is something wrong.
I've checked the problem and reported as a bug:

http://trac.osgeo.org/gdal/ticket/1572

I'm fixing it after Frank's review.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Apr 11 07:26:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: Cannot find GDALGetRasterBandXSize in C API
In-Reply-To: <DC65EB3D6F198B4F93900800424A9CD6779020@MONTANA.tatukgis.com>
References: <DC65EB3D6F198B4F93900800424A9CD6779020@MONTANA.tatukgis.com>
Message-ID: <16706.87.204.110.187.1176290768.squirrel@loskot.net>

Artur Redzko wrote:
> I use GDAl 1.4 and during mapping GDAL14.DLL I get error binding
> GDALGetRasterBandXSize, GDALGetRasterBandYSize procedures under Delphi.
> Do these procedures are not shared anymore in DLL or have changed names?

Artur,

I do not know anything about removal of these functions from the GDAL C API.
As I see, they are included in DLL exports, in gdal14.dll:

D:\dev\gdal\_svn\trunk\gdal>dumpbin.exe /exports gdal14.dll | grep
GDALGetRasterBand
       2066  A47 00005BCD _GDALGetRasterBand@8 =
@ILT+19400(_GDALGetRasterBand@8)
       2067  A48 00005EDE _GDALGetRasterBandXSize@4 =
@ILT+20185(_GDALGetRasterBandXSize@4)
       2068  A49 00005556 _GDALGetRasterBandYSize@4 =
@ILT+17745(_GDALGetRasterBandYSize@4)

Also, they are still listed in the C API docs:
http://www.gdal.org/gdal_8h.html

> Maybe I need a new DLL, can you send me latest gdal DLL ?

Sure, but I can send you only binaries built using Visual C++ 8.0 compiler
(Visual Studio 2005). Give me a note if it will work for you.


p.s. Artur, if you don't mind, post your questions on the gdal-dev list
please, so other users will have a chance to find answers that might be
helpful for them too. Thank you!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Jukka.Rahkonen at mmmtike.fi  Wed Apr 11 08:45:21 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Multichannel JPEG2000 images
Message-ID: <CC197224AC75CE4DB23F739B16891B866687F2@tikka.haapa.mmm.fi>

Hi,
 
How well does GDAL support multichannel JPEG2000 images?  It seems not to like if some channels have different pixel sizes, but what might happen if I first convert all Landsat bands to have the same pixel size and then compress all the bands to a single JP2 file.  Can I then pick out any three channels I want to composite a colour image?  I would love to try this with Mapserver, so that the user could easily select for example 7-4-2 of 4-3-2 band combinations out of the single JPEG2000 image set without a need to make separate physical file sets for each combination.  Another possibility might be to build JPEG2000 jpx-files with several codestreams but I think that at least those are not supported, by GDAL.
 
Regards,
 
-Jukka Rahkonen-


From warmerdam at pobox.com  Wed Apr 11 11:12:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Multichannel JPEG2000 images
In-Reply-To: <CC197224AC75CE4DB23F739B16891B866687F2@tikka.haapa.mmm.fi>
References: <CC197224AC75CE4DB23F739B16891B866687F2@tikka.haapa.mmm.fi>
Message-ID: <461CFACA.1060507@pobox.com>

Rahkonen Jukka wrote:
> Hi,
> 
> How well does GDAL support multichannel JPEG2000 images?  It seems not to
> like if some channels have different pixel sizes, but what might happen if I
> first convert all Landsat bands to have the same pixel size and then
> compress all the bands to a single JP2 file.  Can I then pick out any three
> channels I want to composite a colour image?  I would love to try this with
> Mapserver, so that the user could easily select for example 7-4-2 of 4-3-2
> band combinations out of the single JPEG2000 image set without a need to
> make separate physical file sets for each combination.  Another possibility
> might be to build JPEG2000 jpx-files with several codestreams but I think
> that at least those are not supported, by GDAL.

Jukka,

There are four different JPEG2000 drivers in GDAL, but I *think* they all
support any number of channels.  Certainly the JP2KAK driver does.  I'm
not surprised that channels with different resolutions.

With a 7 band/channel JPEG2000 you should be able to select any desired band
combination with MapServer using the PROCESSING "BANDS=7,4,2" line in the
layer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From randre at gmail.com  Wed Apr 11 23:57:09 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
Message-ID: <9c2015090704112057k39da7af2k5c6e0d7939f2e732@mail.gmail.com>

Can someone please tell me what file to edit, and what to change/add to it,
so that I can compile GDAL in Cygwin and obtain Python support?  I found a
cygMakefile in the pymod dir that seems old (refers to Python 2.1), and
which I don't have a clue what to do with.  I've also found a posting from
Norman that says, "Just tweak the makefile(s) a little", and is followed by
code that looks similar (but not exactly the same) to what's in the
cygMakefile.  I have no idea what file to edit, or what info can be used
as-is from the old files, and what should be updated to reflect gdal
1.4.1and Python
2.5.

Thanks in advance for the help, I'd be happy to write up  a HOWTO for this
afterwards, so that we don't have to go through this again and again.

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070411/c317fa36/attachment.html
From JPalmer at linz.govt.nz  Thu Apr 12 00:02:27 2007
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Ogr Mapinfo driver bug for NZ projections based on datum
	NZGD2000
Message-ID: <s61e581e.022@lh-gw2.linz.govt.nz>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: nzgd2000.patch
Type: application/octet-stream
Size: 709 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070412/0936b585/nzgd2000.obj
From warmerdam at pobox.com  Thu Apr 12 02:13:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Ogr Mapinfo driver bug for NZ projections based on
	datum NZGD2000
In-Reply-To: <s61e581e.022@lh-gw2.linz.govt.nz>
References: <s61e581e.022@lh-gw2.linz.govt.nz>
Message-ID: <461DCE07.70902@pobox.com>

Jeremy Palmer wrote:
> Hi,
>  
> I've been having trouble creating Mapinfo files with correct coordinate 
> system header information for NZ projections based on NZGD2000. 
> Currently the trunk version of ogr2ogr is creating Mapinfo files with a 
> WGS84 datum (the default) within the coordsys definition when it should 
> not be. I think the reason for this is the OGRSpatialReference datum 
> name does exactly not match any entries in the asDatumInfoList within 
> mitab_spatialref.cpp.
>  
> I have attached a patch that adds the NZGD2000 datum name as currently 
> loaded into the OGRSpatialReference from WKT. This is not a clean 
> solution as it adds a new entry for a datum definition that already 
> exists. But I see this sort of hack has been done in the past so at 
> least it is consistent!

Jeremy,

You should file a ticket on this if you don't want it getting lost, likely
upstream in the MITAB bugzilla.

I've recently introduced an OGRSpatialReference::GetEPSGGeogCS() method
which attempts to do lots of guessing based on names and stuff to relate
a geogcs/datum with a well known epsg geogcs.  I think the best approach
might be to improve logic in this method for NZGD2000, and modify the MITAB
code to make use of this.

Datum recognition is quite a nightmare currently for many gdal and ogr drivers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Jukka.Rahkonen at mmmtike.fi  Thu Apr 12 05:03:10 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Multichannel JPEG2000 images
References: <CC197224AC75CE4DB23F739B16891B866687F2@tikka.haapa.mmm.fi>
	<461CFACA.1060507@pobox.com>
Message-ID: <CC197224AC75CE4DB23F739B16891B866687F4@tikka.haapa.mmm.fi>

L?hett?j?: Frank Warmerdam [mailto:warmerdam@pobox.com]

>Rahkonen Jukka wrote:
>> Hi,
>
>>How well does GDAL support multichannel JPEG2000 images?  It seems not to
>>like if some channels have different pixel sizes, but what might happen if I
>>first convert all Landsat bands to have the same pixel size and then
>> compress all the bands to a single JP2 file.  Can I then pick out any three
>> channels I want to composite a colour image?  I would love to try this with
>> Mapserver, so that the user could easily select for example 7-4-2 of 4-3-2
>> band combinations out of the single JPEG2000 image set without a need to
>> make separate physical file sets for each combination.  Another possibility
>> might be to build JPEG2000 jpx-files with several codestreams but I think
>> that at least those are not supported, by GDAL.

>Jukka,

>There are four different JPEG2000 drivers in GDAL, but I *think* they all
>support any number of channels.  Certainly the JP2KAK driver does.  I'm
>not surprised that channels with different resolutions.

>With a 7 band/channel JPEG2000 you should be able to select any desired band
>combination with MapServer using the PROCESSING "BANDS=7,4,2" line in the
>layer.

I made a fast try and I am really surprised!  I just compressed all the bands of an Landsat scene (orthorectified, but having three different pixel sizes) without any preprocessing.  Now I can show whatever three-band combinations with Mapserver, even those with thermal- and Pan-channels together with any of the others  (pixel sizes 57, 14.25 and 28.5, respectively).  It is not very very fast at least with my current compression setttings, but processing time is also very minimal, just compress all the individual bands to one single JPEG2000 file.
 
Original set was separate tif-files zipped to a package.  File size of the zip is 290 MB, while lossless JPEG2000 file is 230 MB, quite a bit lower.  And as I said, now I have all the possible bandcombinations available without any extra work.
 
Thanks Frank for encouragement.
 
-Jukka Rahkonen-


From josegomez at gmx.net  Thu Apr 12 07:23:15 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] ECW mosaicking
Message-ID: <20070412112315.174980@gmx.net>

Hi!
I have downloaded the ECW SDK from ERMapper, and have recompiled GDAL against it. It works fine. However, I have a couple of questions:
1.- Can I use gdal_merge to *ehm* merge a large number of large GeoTIFF files into a single ECW file? I have tried and I get the following error:
   "Format driver ecw does not support creation and piecewise writing.
   Please select a format that does, such as GTiff (the default) or HFA 
   (Erdas Imagine)."
If not, what is the best way to merge these files using GDAL and the ECW SDK?

2.- What about the file size limit? There used to be a 500Mb limit, but according to <http://www.ermapper.com/ProductView.aspx?t=212>, I can see no limitation anywhere (or in the gdal website). Is this still current. Given my inability to merge files into an ECW, I cannot test it myself yet :)

Many thanks!
Jose
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

From warmerdam at pobox.com  Thu Apr 12 12:23:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] ECW mosaicking
In-Reply-To: <20070412112315.174980@gmx.net>
References: <20070412112315.174980@gmx.net>
Message-ID: <461E5D0A.4000703@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi! I have downloaded the ECW SDK from ERMapper, and have recompiled GDAL
> against it. It works fine. However, I have a couple of questions: 1.- Can I
> use gdal_merge to *ehm* merge a large number of large GeoTIFF files into a
> single ECW file? I have tried and I get the following error: "Format driver
> ecw does not support creation and piecewise writing. Please select a format
> that does, such as GTiff (the default) or HFA (Erdas Imagine)." If not, what
> is the best way to merge these files using GDAL and the ECW SDK?

Jose,

Generally gdal_merge.py and gdalwarp won't support mosaicing into a CreateCopy
format such as compressed formats like ECW.  You generally need to mosaic into
an uncompressed format, like Erdas Imagine (driver is HFA), and then compress
the final mosaic into the compressed file.

> 2.- What about the file size limit? There used to be a 500Mb limit, but
> according to <http://www.ermapper.com/ProductView.aspx?t=212>, I can see no
> limitation anywhere (or in the gdal website). Is this still current. Given
> my inability to merge files into an ECW, I cannot test it myself yet :)
> 
> Many thanks! Jose

I am not aware of a change with regard to the 500MB limit.  In the past it
did not apply if the GPL-compatible license was being used, but there are
various conditions you need to meet for this to be true.  If you meet those
conditions you can use the "-co LARGE_OK=YES" creation option when creating
your ECW to indicate that you are appropriately licensed to create large
ecw files.

If the limit *has* been removed from the software you should not need to do
this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From JPalmer at linz.govt.nz  Thu Apr 12 17:00:24 2007
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] using nad grid within ogr2ogr
Message-ID: <s61f46af.070@lh-gw2.linz.govt.nz>

Hi,
 
Is is possible to update the projection definitions that ogr2ogr uses
to include the use of a custom nad grid? I know you can specific the
proj4 def on the command line, but it would be useful to be able to
update the gdal data defintions files so I can just use the EPSG srid on
the command line.
 
i.e 
 
"ogr2ogr -f "Mapinfo File" temp PG:dbname=xxxx -t_srs EPSG:27200
table"
 
instead of
 
ogr2ogr -f "Mapinfo File" temp PG:dbname=xxxx -t_srs "+proj=nzmg
+lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl
+datum=nzgd49 +units=m +no_defs  <> +nadgrids=nzgd2kgrid0005.gsb" table
 
Thanks
Jeremy

______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/e24c8eb2/attachment.html
From warmerdam at pobox.com  Thu Apr 12 17:52:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] using nad grid within ogr2ogr
In-Reply-To: <s61f46af.070@lh-gw2.linz.govt.nz>
References: <s61f46af.070@lh-gw2.linz.govt.nz>
Message-ID: <461EAA29.3000304@pobox.com>

Jeremy Palmer wrote:
> Hi,
>  
> Is is possible to update the projection definitions that ogr2ogr uses to 
> include the use of a custom nad grid? I know you can specific the proj4 
> def on the command line, but it would be useful to be able to update the 
> gdal data defintions files so I can just use the EPSG srid on the 
> command line.
>  
> i.e
>  
> "ogr2ogr -f "Mapinfo File" temp PG:dbname=xxxx -t_srs EPSG:27200 table"
>  
> instead of
>  
> ogr2ogr -f "Mapinfo File" temp PG:dbname=xxxx -t_srs "+proj=nzmg 
> +lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl 
> +datum=nzgd49 +units=m +no_defs  <> +nadgrids=nzgd2kgrid0005.gsb" table

Jeremy,

I don't think the above will actually do what you want as the nadgrids
aren't captured when ogr turns the proj.4 definition into an internal
WKT string.

That issue aside, the answer to your question is no.  Grid use is currently
not based on any sort of configuration file.  Instead it is hardcoded into
PROJ.4 for particular +datum= codes - primarily just +datum=NAD27.

What you can do, to force use of a grid in ogr2ogr is similar to what you
did above, but slightly different.

Try using:

"+proj=nzmg +lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl
  +units=m +nadgrids=nzgd2kgrid0005.gsb +wktext"

The +wktext is a special keyword that OGR recognises as meaning
"embed the entire PROJ.4 string in the WKT and use it literally
when converting back to PROJ.4 format".  Internally the above is
converted into this:

PROJCS["unnamed",
     GEOGCS["International 1909 (Hayford)",
         DATUM["unknown",
             SPHEROID["intl",6378388,297]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["New_Zealand_Map_Grid"],
     PARAMETER["latitude_of_origin",-41],
     PARAMETER["central_meridian",173],
     PARAMETER["false_easting",2510000],
     PARAMETER["false_northing",6023150],
     UNIT["Meter",1],
     EXTENSION["PROJ4","+proj=nzmg +lat_0=-41 +lon_0=173 +x_0=2510000 
+y_0=6023150 +ellps=intl  +units=m +nadgrids=nzgd2kgrid0005.gsb +wktext"]]

I hope this helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From quickstuff at altern.org  Thu Apr 12 18:31:38 2007
From: quickstuff at altern.org (Quentin S.)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Re: ECW mosaicking
References: <20070412112315.174980@gmx.net>
Message-ID: <loom.20070413T001351-36@post.gmane.org>

Jose Luis Gomez Dans <josegomez <at> gmx.net> writes:

> 
> (snip)

Jose,

you could also give the VRT (Virtual Raster) format a try.
It can 'virtually' assemble the Geotiff files into a small text file, then
convert this VRT file to ECW with gdal_translate. Such a 'trick' avoids the
intermediary step of a huge merged file. Nevertheless it is also prone to errors
(typos etc.) ; moreover you should expect poor performance regarding disk
access, memory usage, large datasets made of thousands of files etc.
(I'm pretty sure one can improve this by fine tuning the cache options etc.)

Such a VRT file is easy to create by hand or programmatically: it is just a text
file containing references to your geotiff files and some self-explanatory
parameters. See the GDAL site for details and tutorial - or generate some dummy
vrt file with any tool, then study it.

I successfully use this trick when merging a hundred small geotiffs to one big
ecw. So it's worth a try.

Hope this helps,

Quentin S.



From nhv at cape.com  Thu Apr 12 19:44:08 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <9c2015090704112057k39da7af2k5c6e0d7939f2e732@mail.gmail.com>
Message-ID: <200704122344.l3CNiAoc009767@smtp10.cape.com>

Roger Andr? writes:
> 
> Can someone please tell me what file to edit, and what to 
> change/add to it, so that I can compile GDAL in Cygwin and 
> obtain Python support?  

Shouldn't have to change anything 

To check I just did a fresh Cygwin install and

./configure --with-libtool=no; make; make install

  < might work with libtool I don't know I just can't stand the 
    glacially slow Cygwin compiles with libtool >

This works for me

Make sure you use Python 2.4  or else you will need to compile
your own Numeric extension module

This was with the latest GDAL source tarball from gdal.org

Cheers

Norman



From JPalmer at linz.govt.nz  Thu Apr 12 20:27:40 2007
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] using nad grid within ogr2ogr
Message-ID: <s61f774f.004@lh-gw2.linz.govt.nz>

Skipped content of type multipart/alternative-------------- next part --------------
An embedded message was scrubbed...
From: "Jeremy Palmer" <JPalmer@linz.govt.nz>
Subject: Re: [Gdal-dev] using nad grid within ogr2ogr
Date: Fri, 13 Apr 2007 12:04:38 +1200
Size: 7905
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/e5ab2f16/attachment.mht
From artur.redzko at tatukgis.com  Fri Apr 13 03:38:44 2007
From: artur.redzko at tatukgis.com (Artur Redzko)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] GDAL C API and Delphi
Message-ID: <DC65EB3D6F198B4F93900800424A9CD6779085@MONTANA.tatukgis.com>

 

Hi 

 

Is there any special procedure to build GDAL DLL, that can be mapped and
used in Delphi through C API. I built DLL using Visual C++ express 2005,
tested exports using dumpbin - it looks fine. But when I try to map it
in Delphi like : 

 

var

  GDALAllRegister : procedure; stdcall; 

 

..... 

  DLLHandle := LoadLibrary('gdal14.dll');

  if DLLHandle >= 32 then

  begin

    @GDALAllRegister := GetProcAddress(DLLHandle,'GDALAllRegister');

    ..... 

  end 

 

all functions addresses ( using names ) return nil like there is no
function with such name (taken from gdal.h). 

 

I tested it with daily and gdal 4.1 source with default settings. I also
tried to get binaries from vterrain but they also don't work. Strangely
found old 1.2 version works. 

 

Can anyone help me ? What do I do wrong ? 

 

Can someone send me compiled binaries for Windows ? 

 

Ps. Sorry for doubled emails. I have problem with my email server.

 

Regards

Artur 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/19aaac59/attachment.html
From lists at b-open-solutions.it  Fri Apr 13 04:04:53 2007
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <200704122344.l3CNiAoc009767@smtp10.cape.com>
References: <200704122344.l3CNiAoc009767@smtp10.cape.com>
Message-ID: <200704131004.53822.lists@b-open-solutions.it>


Norman,

On Friday 13 April 2007 01:44, Norman Vine wrote:
> Shouldn't have to change anything
>
> To check I just did a fresh Cygwin install and
>
> ./configure --with-libtool=no; make; make install
>
>   < might work with libtool I don't know I just can't stand the
>     glacially slow Cygwin compiles with libtool >

in order to avoid the double compile with libtool you may use 
the '--disable-static' (tested on unix/linux) or '--disable-shared' (maybe on 
cygwin, but not tested) options.

this is not as fast as '--without-libtool', but much, much closer.

if you test it on cygwin (i don't have a cygwin install at hand, currently), 
please report back how it goes.

thanks
alessandro 

-- 
B-Open Solutions srl - http://www.bopen.it/

From nhv at cape.com  Fri Apr 13 06:29:03 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:46 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <200704131004.53822.lists@b-open-solutions.it>
Message-ID: <200704131028.l3DASwPv018894@smtp11.cape.com>

Alessandro Amici writes:
> 
> Norman,
> 
> On Friday 13 April 2007 01:44, Norman Vine wrote:
> > Shouldn't have to change anything
> >
> > To check I just did a fresh Cygwin install and
> >
> > ./configure --with-libtool=no; make; make install
> >
> >   < might work with libtool I don't know I just can't stand the
> >     glacially slow Cygwin compiles with libtool >
> 
> in order to avoid the double compile with libtool you may use 
> the '--disable-static' (tested on unix/linux) or 
> '--disable-shared' (maybe on cygwin, but not tested) options.
> 
> this is not as fast as '--without-libtool', but much, much closer.
> 
> if you test it on cygwin (i don't have a cygwin install at 
> hand, currently), please report back how it goes.

Alessandro

Libtool's 'glacial pace' is due to the many levels of indirection
that it forces.

Cygwin is not Linux.  :-)

Cheers

Norman




From mattia.parigiani at gmail.com  Fri Apr 13 08:08:48 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced format
Message-ID: <6b6f1c810704130508y78d9e7fcoe515da5725eb9bd4@mail.gmail.com>

Hey all, I really have great confusion on how to convert my HDF 4 images
which reside as multiple bands into a single HDF file to a GeoTiff
geo-referenced image. In reality, I need to convert the format into a single
latitude/longitude *WGS-84* referenced TIFF image..I need to do this and at
the same time obtain a .tfw file which specifies the top left corner
coordinates of the image's bounding box and the pixel resolution of the
image.

I've tried to run the gdalinfo command on one of my images.. The image name
is AMOD021KM20061229043102.hdf and when I run the command (under Ubuntu) I
get the following stack report (the subdatasets are at the bottom part):

//----------------------------------------------------------
---------------------START-LOG-----------------------------------------
----------------------------------------------------------

rasdaman@mattia-desktop:~/FTPCHINA$ gdalinfo AMOD021KM20061229043102.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
  RANGEBEGINNINGDATE=2006-12-29
  RANGEBEGINNINGTIME=04:31:03.294926
  RANGEENDINGDATE=2006-12-29
  RANGEENDINGTIME=04:39:59.497042
  DAYNIGHTFLAG=Day
  GRINGPOINTLATITUDE.1=63.7264060974121, 57.638111114502, 28.4389171600342,
31.9011936187744
  GRINGPOINTLONGITUDE.1=82.2857818603516, 124.476379394531, 104.08544921875,
80.1825561523438
  AveragedBlackBodyTemperature=290.0164
  AveragedMirrorTemperature=279.3138
  AveragedFocalPlane1Temperature=270.8599
  AveragedFocalPlane2Temperature=271.0926
  AveragedFocalPlane3Temperature=83.34911
  AveragedFocalPlane4Temperature=83.01984
  QAPERCENTMISSINGDATA.1=0
  QAPERCENTMISSINGDATA.2=0
  QAPERCENTINTERPOLATEDDATA.1=0
  QAPERCENTINTERPOLATEDDATA.2=0
  QAPERCENTOUTOFBOUNDSDATA.1=33
  QAPERCENTOUTOFBOUNDSDATA.2=0
  EASTBOUNDINGCOORDINATE=124.476376001332
  WESTBOUNDINGCOORDINATE=80.1739148770052
  NORTHBOUNDINGCOORDINATE=63.75567496824
  SOUTHBOUNDINGCOORDINATE=28.2823508492026
  PGE_Version=3.0.0
  ASSOCIATEDPLATFORMSHORTNAME.1=Terra
  Satellite=Terra
  Number of Scans=363
  Number of Day mode scans=363
  Number of Night mode scans=0
  Incomplete Scans=3
  Max Earth View Frames=1354
  %Valid EV Observations=99.7291, 99.7291, 99.7291, 99.7291, 99.72901,
99.7291, 99.72907, 99.71925, 97.10823, 86.80626, 78.78944, 71.92345,
31.80874, 19.07113, 34.80765, 12.43985, 26.49936, 35.73066, 99.7291, 99.7291,
99.7291, 99.7291, 99.71949, 99.7291, 99.7291, 99.7291, 99.7291, 99.7291,
99.7291, 99.7291, 99.7291, 99.7291, 99.7291, 99.7291, 99.7291, 99.7291,
99.7291, 99.7291
  %Saturated EV Observations=0, 0, 0, 0, 0, 0, 0, 0.009847366, 2.564954,
12.81738, 20.93965, 27.80564, 67.92036, 80.65796, 64.92145, 87.28925,
73.22974, 63.99844, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0
  Post Processing Indicates Bad data=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Electronics Redundancy Vector=22405973, 1048
  Electronics Configuration Change=0, 0
  Reflective LUT Serial Number and Date of Last Change=R031t2003:04:08:08:55
  Emissive LUT Serial Number and Date of Last Change=E023t2003:04:08:08:55
  QA LUT Serial Number and Date of Last Change=Q019t2003:04:08:08:55
  Focal Plane Set Point State=0
  Doors and Screens Configuration=128
  Reflective Bands With Bad Data=1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1
  Emissive Bands With Bad Data=1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1
  Noise in Black Body Thermistors=2, 4, 2, 4, 2, 2, 1, 3, 1, 6, 1, 3
  Noise in Average BB Temperature=2
  Noise in LWIR FPA Temperature=147
  Noise in MWIR FPA Temperature=26
  Noise in Scan Mirror Thermistor #1=255
  Noise in Scan Mirror Thermistor #2=1
  Noise in Scan Mirror Thermistor Average=19
  Noise in Instrument Temperature=1
  Noise in Cavity Temperature=255
  Discontinuities in linear gain b1 across granule=0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0
  Noise in Temperature of NIR FPA=0
  Noise in Temperature of Vis FPA=0
  Dead Detector List=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Noisy Detector List=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Detector Quality Flag=32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
32, 32, 32, 32, 32, 32, 32, 32, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40,
40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 32, 32, 32, 32, 32, 32, 32, 32, 32,
32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 104, 104, 104, 109, 104,
104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104,
104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104,
104, 104, 104, 104, 104, 104, 104, 100, 104, 104, 104, 104, 104, 96, 96,
104, 104, 104, 104, 104, 96, 104, 104, 104, 104, 48, 48, 48, 48, 48, 48, 48,
48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48,
48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48,
48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 56, 56, 56, 56,
56, 56, 56, 56, 56, 56, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 56, 56, 56,
56, 56, 56, 56, 56, 56, 56, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48,
48, 48, 48, 48, 48, 48, 48, 48, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 32,
32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 76, 72, 72, 72, 72, 72, 72, 72, 72,
72, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64,
64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64,
64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 5, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 64, 64, 64, 64, 64,
64, 64, 64, 64, 68, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64,
64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64,
64, 64, 64, 64, 64, 64
  Earth-Sun Distance=0.9836482
  Solar Irradiance on RSB Detectors over pi=511.46, 511.46, 511.46, 511.46,
511.46, 511.46, 511.46, 511.588, 511.62, 511.588, 511.588, 511.588, 511.556,
511.556, 511.556, 511.492, 511.492, 511.556, 511.588, 511.588, 511.588,
511.62, 511.62, 511.62, 511.62, 511.62, 511.556, 511.492, 511.46, 511.365,
511.301, 511.206, 511.11, 510.983, 510.824, 510.378, 509.614, 509.614,
509.614, 509.614, 315.763, 315.763, 315.763, 315.763, 315.763, 315.763,
315.763, 315.795, 315.795, 315.795, 315.795, 315.795, 315.795, 315.763,
315.795, 315.795, 315.795, 315.795, 315.795, 315.795, 315.795, 315.795,
315.795, 315.795, 315.795, 315.795, 315.763, 315.763, 315.763, 315.732,
315.732, 315.7, 315.763, 315.795, 315.859, 315.954, 316.082, 316.273,
316.273, 316.273, 664.599, 664.599, 664.599, 664.599, 664.631, 664.631,
664.631, 664.631, 664.663, 664.663, 664.631, 664.631, 664.599, 664.663,
664.599, 664.599, 664.567, 664.567, 664.567, 664.567, 593.934, 593.934,
593.934, 593.934, 593.966, 593.934, 593.934, 593.934, 593.934, 593.934,
593.934, 593.934, 593.934, 593.934, 593.934, 593.934, 593.966, 593.998,
593.998, 593.998, 150.974, 150.974, 150.974, 150.974, 150.974, 150.974,
151.006, 151.006, 151.006, 151.006, 151.006, 151.006, 151.006, 150.974,
151.006, 151.006, 150.974, 150.974, 150.974, 150.974, 76.458, 76.458, 76.458,
76.458, 76.458, 76.458, 76.458, 76.458, 76.4899, 76.4899, 76.4899, 76.4899,
76.4899, 76.4899, 76.458, 76.458, 76.458, 76.458, 76.458, 76.458, 28.7752,
28.7752, 28.7752, 28.7752, 28.7434, 28.7434, 28.7434, 28.7434, 28.7434,
28.7752, 28.7434, 28.7434, 28.7434, 28.7434, 28.7434, 28.7434, 28.7434,
28.7434, 28.7434, 28.7434, 555.228, 555.228, 555.164, 555.101, 555.164,
555.323, 555.642, 556.151, 556.756, 557.138, 606.094, 606.094, 606.094,
606.03, 605.935, 605.903, 605.935, 606.03, 605.903, 605.871, 630.572,
630.572, 630.572, 630.572, 630.572, 630.572, 630.604, 630.54, 630.54,
630.413, 599.728, 599.728, 599.728, 599.759, 599.759, 599.759, 599.759,
599.759, 599.791, 599.791, 602.242, 602.242, 602.306, 602.306, 602.306,
602.306, 602.306, 602.338, 602.401, 602.433, 492.807, 492.807, 492.712,
492.68, 492.648, 492.648, 492.712, 492.839, 493.094, 493.062, 492.807,
492.807, 492.712, 492.68, 492.648, 492.648, 492.712, 492.839, 493.094,
493.062, 480.075, 480.075, 480.075, 480.043, 480.043, 480.043, 480.043,
480.043, 480.043, 480.075, 480.075, 480.075, 480.075, 480.043, 480.043,
480.043, 480.043, 480.043, 480.043, 480.075, 412.084, 412.084, 412.116,
412.179, 412.179, 412.179, 412.211, 412.148, 412.148, 412.148, 309.684,
309.684, 309.684, 309.716, 309.684, 309.716, 309.716, 309.716, 309.747,
309.811, 297.556, 297.556, 297.556, 297.556, 297.556, 297.556, 297.556,
297.556, 297.556, 297.556, 278.107, 278.107, 278.107, 278.107, 278.107,
278.107, 278.107, 278.107, 278.107, 278.107, 277.948, 277.948, 277.948,
277.948, 277.948, 277.948, 277.948, 277.948, 277.948, 277.948, 116.151,
116.151, 116.151, 116.151, 116.151, 116.183, 116.183, 116.183, 116.183,
116.183
Subdatasets:
  SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":0
  SUBDATASET_1_DESC=[15x3630x1354] EV_1KM_RefSB (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":1
  SUBDATASET_2_DESC=[15x3630x1354] EV_1KM_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":2
  SUBDATASET_3_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB (16-bit unsigned
integer)
  SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":3
  SUBDATASET_4_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":4
  SUBDATASET_5_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Samples_Used (8-bit
unsigned integer)
  SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":5
  SUBDATASET_6_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB (16-bit unsigned
integer)
  SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":6
  SUBDATASET_7_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":7
  SUBDATASET_8_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Samples_Used (8-bit
unsigned integer)
  SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":8
  SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9
  SUBDATASET_10_DESC=[16x3630x1354] EV_1KM_Emissive_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":10
  SUBDATASET_11_DESC=[726x271] Latitude (32-bit floating-point)
  SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":11
  SUBDATASET_12_DESC=[726x271] Longitude (32-bit floating-point)
  SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":12
  SUBDATASET_13_DESC=[726x271] Height (16-bit integer)
  SUBDATASET_14_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":13
  SUBDATASET_14_DESC=[726x271] SensorZenith (16-bit integer)
  SUBDATASET_15_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":14
  SUBDATASET_15_DESC=[726x271] SensorAzimuth (16-bit integer)
  SUBDATASET_16_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":15
  SUBDATASET_16_DESC=[726x271] Range (16-bit unsigned integer)
  SUBDATASET_17_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":16
  SUBDATASET_17_DESC=[726x271] SolarZenith (16-bit integer)
  SUBDATASET_18_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":17
  SUBDATASET_18_DESC=[726x271] SolarAzimuth (16-bit integer)
  SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":18
  SUBDATASET_19_DESC=[726x271] gflags (8-bit unsigned integer)
  SUBDATASET_20_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":19
  SUBDATASET_20_DESC=[3630x1354] EV_Band26 (16-bit unsigned integer)
  SUBDATASET_21_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":20
  SUBDATASET_21_DESC=[3630x1354] EV_Band26_Uncert_Indexes (8-bit unsigned
integer)
  SUBDATASET_22_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":21
  SUBDATASET_22_DESC=[16x10] Noise in Thermal Detectors (8-bit unsigned
integer)
  SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":22
  SUBDATASET_23_DESC=[16x10] Change in relative responses of thermal
detectors (8-bit unsigned integer)
  SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":23
  SUBDATASET_24_DESC=[363x16x10] DC Restore Change for Thermal Bands (8-bit
integer)
  SUBDATASET_25_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":24
  SUBDATASET_25_DESC=[363x2x40] DC Restore Change for Reflective 250m Bands
(8-bit integer)
  SUBDATASET_26_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":25
  SUBDATASET_26_DESC=[363x5x20] DC Restore Change for Reflective 500m Bands
(8-bit integer)
  SUBDATASET_27_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":26
  SUBDATASET_27_DESC=[363x15x10] DC Restore Change for Reflective 1km Bands
(8-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

//----------------------------------------------------------
----------------END-LOG--------------------------
----------------------------------------------------------
-----------------------------

It looks like the subdatasets could be malformed... This is because I get
these SUBDATASET_X_NAME=HDF4_SDS:UNKNOWN: syntax.. is that right.. I've been
told that the images are MODIS images from Terra and Aqua satellites. I also
read that MODIS is used for snow detection only.. is this correct??

I'm trying to understand how to achieve what I need and so far I understand
that the required commands are the gdal_transform or the gdalwarp commands.

When I run gdal_translate on the file, I get the following:

rasdaman@mattia-desktop:~/FTPCHINA$ gdal_translate
AMOD021KM20061229043102.hdf test.tiff
Input file contains subdatasets. Please, select one of them for reading.
rasdaman@mattia-desktop:~/FTPCHINA$

Hence my question is, how do I tell the command to pick up a certain
dataset?? And, where can I find the relative documentation for this command
when applied to multiple HDF bands??

Finally, I reside in Germany and need to transform a whole lot of images
into GeoTiff to later establish a WMS service .. Hence all conversion will
need be done remotely... Does anyone have any suggestions on how I should go
on about this?? Should I be using the gdal library or would I best bet on
something else???
Msphinx?? ENVI??




-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/f4ae6cda/attachment.html
From mattia.parigiani at gmail.com  Fri Apr 13 08:15:58 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced format
Message-ID: <6b6f1c810704130515l6913281oae3e5a36fa6d2e3d@mail.gmail.com>

PS, I'm using the GDAL version given by:

$ gdalinfo --version

GDAL 1.2.6.0, released 2005/03/13

please, your help,

thanks

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/b3356a49/attachment.html
From guillaume.huby.lists at gmail.com  Fri Apr 13 09:06:32 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
Message-ID: <ddc797c30704130606u18cb7086x131f55501c5a8954@mail.gmail.com>

mattia a ?crit :
> Hey all, I really have great confusion on how to convert my HDF 4 images
> which reside as multiple bands into a single HDF file to a GeoTiff
> geo-referenced image. In reality, I need to convert the format into a
> single latitude/longitude *WGS-84* referenced TIFF image..I need to do
> this and at the same time obtain a .tfw file which specifies the top
> left corner coordinates of the image's bounding box and the pixel
> resolution of the image.
>
> I've tried to run the gdalinfo command on one of my images.. The image
> name is AMOD021KM20061229043102.hdf and when I run the command (under
> Ubuntu) I get the following stack report (the subdatasets are at the
> bottom part):
>
> //----------------------------------------------------------
> ---------------------START-LOG--------------
> --------------------------------------------------------
> -----------------------------
>
> rasdaman@mattia-desktop:~/FTPCHINA$ gdalinfo AMOD021KM20061229043102.hdf
> Driver: HDF4/Hierarchical Data Format Release 4
> Subdatasets:
>   SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":0
>   SUBDATASET_1_DESC=[15x3630x1354] EV_1KM_RefSB (16-bit unsigned integer)
>   SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":1
>   SUBDATASET_2_DESC=[15x3630x1354] EV_1KM_RefSB_Uncert_Indexes (8-bit
> unsigned integer)
>   SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":2
>   SUBDATASET_3_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB (16-bit unsigned
> integer)
>   SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":3
>   SUBDATASET_4_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes
> (8-bit unsigned integer)
>   SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":4
>   SUBDATASET_5_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Samples_Used
> (8-bit unsigned integer)
>   SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":5
>   SUBDATASET_6_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB (16-bit unsigned
> integer)
>   SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":6
>   SUBDATASET_7_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes
> (8-bit unsigned integer)
>   SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":7
>   SUBDATASET_8_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Samples_Used
> (8-bit unsigned integer)
>   SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":8
>   SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned
integer)
>   SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9
>   SUBDATASET_10_DESC=[16x3630x1354] EV_1KM_Emissive_Uncert_Indexes
> (8-bit unsigned integer)
>   SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":10
>   SUBDATASET_11_DESC=[726x271] Latitude (32-bit floating-point)
>   SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":11
>   SUBDATASET_12_DESC=[726x271] Longitude (32-bit floating-point)
>   SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":12
>   SUBDATASET_13_DESC=[726x271] Height (16-bit integer)
>   SUBDATASET_14_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":13
>   SUBDATASET_14_DESC=[726x271] SensorZenith (16-bit integer)
>   SUBDATASET_15_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":14
>   SUBDATASET_15_DESC=[726x271] SensorAzimuth (16-bit integer)
>   SUBDATASET_16_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":15
>   SUBDATASET_16_DESC=[726x271] Range (16-bit unsigned integer)
>   SUBDATASET_17_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":16
>   SUBDATASET_17_DESC=[726x271] SolarZenith (16-bit integer)
>   SUBDATASET_18_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":17
>   SUBDATASET_18_DESC=[726x271] SolarAzimuth (16-bit integer)
>   SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":18
>   SUBDATASET_19_DESC=[726x271] gflags (8-bit unsigned integer)
>   SUBDATASET_20_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":19
>   SUBDATASET_20_DESC=[3630x1354] EV_Band26 (16-bit unsigned integer)
>   SUBDATASET_21_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":20
>   SUBDATASET_21_DESC=[3630x1354] EV_Band26_Uncert_Indexes (8-bit
> unsigned integer)
>   SUBDATASET_22_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":21
>   SUBDATASET_22_DESC=[16x10] Noise in Thermal Detectors (8-bit unsigned
> integer)
>   SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":22
>   SUBDATASET_23_DESC=[16x10] Change in relative responses of thermal
> detectors (8-bit unsigned integer)
>   SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":23
>   SUBDATASET_24_DESC=[363x16x10] DC Restore Change for Thermal Bands
> (8-bit integer)
>   SUBDATASET_25_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":24
>   SUBDATASET_25_DESC=[363x2x40] DC Restore Change for Reflective 250m
> Bands (8-bit integer)
>   SUBDATASET_26_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":25
>   SUBDATASET_26_DESC=[363x5x20] DC Restore Change for Reflective 500m
> Bands (8-bit integer)
>   SUBDATASET_27_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":26
>   SUBDATASET_27_DESC=[363x15x10] DC Restore Change for Reflective 1km
> Bands (8-bit integer)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
>
//--------------------------------------------------------------------------END-LOG

> --------------------------
> ----------------------------------------------------------
> -----------------------------
>
> It looks like the subdatasets could be malformed... This is because I
> get these SUBDATASET_X_NAME=HDF4_SDS:UNKNOWN: syntax.. is that right..
> I've been told that the images are MODIS images from Terra and Aqua
> satellites. I also read that MODIS is used for snow detection only.. is
> this correct??
>
> I'm trying to understand how to achieve what I need and so far I
> understand that the required commands are the gdal_transform or the
> gdalwarp commands.
>
> When I run gdal_translate on the file, I get the following:
>
> rasdaman@mattia-desktop :~/FTPCHINA$ gdal_translate
> AMOD021KM20061229043102.hdf test.tiff
> Input file contains subdatasets. Please, select one of them for reading.
> rasdaman@mattia-desktop:~/FTPCHINA$
>
> Hence my question is, how do I tell the command to pick up a certain
> dataset?? And, where can I find the relative documentation for this
> command when applied to multiple HDF bands??
>
> Finally, I reside in Germany and need to transform a whole lot of images
> into GeoTiff to later establish a WMS service .. Hence all conversion
> will need be done remotely... Does anyone have any suggestions on how I
> should go on about this?? Should I be using the gdal library or would I
> best bet on something else???
> Msphinx?? ENVI??
>
you should try :
$ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":0
test_b0.tif
$ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":1
test_b1.tif
... and so on for each dataset

same with gdalwarp.

this extract only one band. Then you can use gdal_merge or gdalwarp to merge
bands in a single raster.

Also have a look to some previous post in the list :
http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482
if you meet trouble to get WGS84 correct.

Good alternates are MRT or HEG modis tools ...

Good luck !
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/a4d29c6f/attachment.html
From mattia.parigiani at gmail.com  Fri Apr 13 09:52:23 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
In-Reply-To: <ddc797c30704130606u18cb7086x131f55501c5a8954@mail.gmail.com>
References: <ddc797c30704130606u18cb7086x131f55501c5a8954@mail.gmail.com>
Message-ID: <6b6f1c810704130652s4118b5a7lf96e6e1a1c96c47e@mail.gmail.com>

Hey! Thanks a lot, I seem to be getting my Tiff images ok.. Even though they
are all really dark and cant see much out of them.. Is that right anyways??

One more thing I had mentioned in the previous mail is that I need to obtain
also the TWF file that accompanies each TIFF file.. This file specifies
pixel resolution and upper left coordinates of images bounding box.. Does
anyone have a clue on how to obtain this??

For what regards merging the images, I do not have the gdalmerge command...
only the gdalwarp one.. Is this because of my gdal version... Where can I
get the CVS version from? I've been looking for it but was not lucky in my
search..

Can you, or anyone, also help me with the gdalwarp syntax given a series of
.tif files and wanting to merge them into a single viewable one??

Thanks again for your support

Mattia

On 4/13/07, guillaume huby <guillaume.huby.lists@gmail.com> wrote:
>
> mattia a ?crit :
> > Hey all, I really have great confusion on how to convert my HDF 4 images
>
> > which reside as multiple bands into a single HDF file to a GeoTiff
> > geo-referenced image. In reality, I need to convert the format into a
> > single latitude/longitude *WGS-84* referenced TIFF image..I need to do
> > this and at the same time obtain a .tfw file which specifies the top
> > left corner coordinates of the image's bounding box and the pixel
> > resolution of the image.
> >
> > I've tried to run the gdalinfo command on one of my images.. The image
> > name is AMOD021KM20061229043102.hdf and when I run the command (under
> > Ubuntu) I get the following stack report (the subdatasets are at the
> > bottom part):
> >
> > //----------------------------------------------------------
> > ---------------------START-LOG--------------
> > --------------------------------------------------------
> > -----------------------------
> >
> > rasdaman@mattia-desktop:~/FTPCHINA$ gdalinfo AMOD021KM20061229043102.hdf
> > Driver: HDF4/Hierarchical Data Format Release 4
> > Subdatasets:
> >   SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":0
> >   SUBDATASET_1_DESC=[15x3630x1354] EV_1KM_RefSB (16-bit unsigned
> integer)
> >   SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":1
> >   SUBDATASET_2_DESC=[15x3630x1354] EV_1KM_RefSB_Uncert_Indexes (8-bit
> > unsigned integer)
> >   SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":2
> >   SUBDATASET_3_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB (16-bit unsigned
> > integer)
> >   SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":3
> >   SUBDATASET_4_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes
> > (8-bit unsigned integer)
> >   SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":4
> >   SUBDATASET_5_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Samples_Used
> > (8-bit unsigned integer)
> >   SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":5
> >   SUBDATASET_6_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB (16-bit unsigned
> > integer)
> >   SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":6
> >   SUBDATASET_7_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes
> > (8-bit unsigned integer)
> >   SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":7
> >   SUBDATASET_8_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Samples_Used
> > (8-bit unsigned integer)
> >   SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf ":8
> >   SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned
> integer)
> >   SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9
> >   SUBDATASET_10_DESC=[16x3630x1354] EV_1KM_Emissive_Uncert_Indexes
> > (8-bit unsigned integer)
> >   SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":10
> >   SUBDATASET_11_DESC=[726x271] Latitude (32-bit floating-point)
> >   SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf ":11
> >   SUBDATASET_12_DESC=[726x271] Longitude (32-bit floating-point)
> >   SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":12
> >   SUBDATASET_13_DESC=[726x271] Height (16-bit integer)
> >   SUBDATASET_14_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":13
> >   SUBDATASET_14_DESC=[726x271] SensorZenith (16-bit integer)
> >   SUBDATASET_15_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":14
> >   SUBDATASET_15_DESC=[726x271] SensorAzimuth (16-bit integer)
> >   SUBDATASET_16_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":15
> >   SUBDATASET_16_DESC=[726x271] Range (16-bit unsigned integer)
> >   SUBDATASET_17_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":16
> >   SUBDATASET_17_DESC=[726x271] SolarZenith (16-bit integer)
> >   SUBDATASET_18_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":17
> >   SUBDATASET_18_DESC=[726x271] SolarAzimuth (16-bit integer)
> >   SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":18
> >   SUBDATASET_19_DESC=[726x271] gflags (8-bit unsigned integer)
> >   SUBDATASET_20_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":19
> >   SUBDATASET_20_DESC=[3630x1354] EV_Band26 (16-bit unsigned integer)
> >   SUBDATASET_21_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":20
> >   SUBDATASET_21_DESC=[3630x1354] EV_Band26_Uncert_Indexes (8-bit
> > unsigned integer)
> >   SUBDATASET_22_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":21
> >   SUBDATASET_22_DESC=[16x10] Noise in Thermal Detectors (8-bit unsigned
> > integer)
> >   SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf ":22
> >   SUBDATASET_23_DESC=[16x10] Change in relative responses of thermal
> > detectors (8-bit unsigned integer)
> >   SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":23
> >   SUBDATASET_24_DESC=[363x16x10] DC Restore Change for Thermal Bands
> > (8-bit integer)
> >   SUBDATASET_25_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf":24
> >   SUBDATASET_25_DESC=[363x2x40] DC Restore Change for Reflective 250m
> > Bands (8-bit integer)
> >   SUBDATASET_26_NAME=HDF4_SDS:UNKNOWN:" AMOD021KM20061229043102.hdf ":25
> >   SUBDATASET_26_DESC=[363x5x20] DC Restore Change for Reflective 500m
> > Bands (8-bit integer)
> >   SUBDATASET_27_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":26
> >   SUBDATASET_27_DESC=[363x15x10] DC Restore Change for Reflective 1km
> > Bands (8-bit integer)
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0,  512.0)
> > Upper Right (  512.0,    0.0)
> > Lower Right (  512.0,  512.0)
> > Center      (  256.0,  256.0)
> >
> >
> //--------------------------------------------------------------------------END-LOG
>
> > --------------------------
> > ----------------------------------------------------------
> > -----------------------------
> >
> > It looks like the subdatasets could be malformed... This is because I
> > get these SUBDATASET_X_NAME=HDF4_SDS:UNKNOWN: syntax.. is that right..
> > I've been told that the images are MODIS images from Terra and Aqua
> > satellites. I also read that MODIS is used for snow detection only.. is
> > this correct??
> >
> > I'm trying to understand how to achieve what I need and so far I
> > understand that the required commands are the gdal_transform or the
> > gdalwarp commands.
> >
> > When I run gdal_translate on the file, I get the following:
> >
> > rasdaman@mattia-desktop :~/FTPCHINA$ gdal_translate
> > AMOD021KM20061229043102.hdf test.tiff
> > Input file contains subdatasets. Please, select one of them for reading.
> > rasdaman@mattia-desktop:~/FTPCHINA$
> >
> > Hence my question is, how do I tell the command to pick up a certain
> > dataset?? And, where can I find the relative documentation for this
> > command when applied to multiple HDF bands??
> >
> > Finally, I reside in Germany and need to transform a whole lot of images
>
> > into GeoTiff to later establish a WMS service .. Hence all conversion
> > will need be done remotely... Does anyone have any suggestions on how I
> > should go on about this?? Should I be using the gdal library or would I
> > best bet on something else???
> > Msphinx?? ENVI??
> >
> you should try :
> $ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":0
> test_b0.tif
> $ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":1
> test_b1.tif
> ... and so on for each dataset
>
> same with gdalwarp.
>
> this extract only one band. Then you can use gdal_merge or gdalwarp to
> merge bands in a single raster.
>
> Also have a look to some previous post in the list :
> http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482
> if you meet trouble to get WGS84 correct.
>
> Good alternates are MRT or HEG modis tools ...
>
> Good luck !
> Guillaume.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/449940a5/attachment.html
From warmerdam at pobox.com  Fri Apr 13 10:19:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C API and Delphi
In-Reply-To: <DC65EB3D6F198B4F93900800424A9CD6779085@MONTANA.tatukgis.com>
References: <DC65EB3D6F198B4F93900800424A9CD6779085@MONTANA.tatukgis.com>
Message-ID: <461F9166.4090705@pobox.com>

Artur Redzko wrote:
>  
> 
> Hi
> 
>  
> 
> Is there any special procedure to build GDAL DLL, that can be mapped and 
> used in Delphi through C API. I built DLL using Visual C++ express 2005, 
> tested exports using dumpbin - it looks fine. But when I try to map it 
> in Delphi like :
...
> I tested it with daily and gdal 4.1 source with default settings. I also 
> tried to get binaries from vterrain but they also don't work. Strangely 
> found old 1.2 version works.
> 
> Can anyone help me ? What do I do wrong ?
> 
> Can someone send me compiled binaries for Windows ?
> 
> Ps. Sorry for doubled emails. I have problem with my email server.

Artur,

GDAL 1.4 should build with most GDAL C API entry points using stdcall
conventions.  I don't know why things aren't working for you, except
possibly limitations with the express compiler.

You might want to grab FWTools and try with that GDAL_FW.DLL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Fri Apr 13 10:20:41 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
In-Reply-To: <6b6f1c810704130508y78d9e7fcoe515da5725eb9bd4@mail.gmail.com>
References: <6b6f1c810704130508y78d9e7fcoe515da5725eb9bd4@mail.gmail.com>
Message-ID: <20070413142041.GC9899@bartok.itc.it>

On Fri, Apr 13, 2007 at 02:08:48PM +0200, mattia wrote:
>    Hey all, I really have great confusion on how to convert my HDF 4 images
>    which reside as multiple bands into a single HDF file to a GeoTiff
>    geo-referenced image. In reality, I need to convert the format into a
>    single latitude/longitude WGS-84 referenced TIFF image..I need to do this
>    and at the same time obtain a .tfw file which specifies the top left
>    corner coordinates of the image's bounding box and the pixel resolution of
>    the image.

You may want to take a look at this thread:
 http://lists.maptools.org/pipermail/gdal-dev/2007-February/011744.html

Probably it also works for this MODIS data set.
 
>    I've been told that the images are MODIS images from Terra and Aqua satellites.
>    I also read that MODIS is used for snow detection only.. is this correct??

No. MODIS is used for many applications, not only snow.
I have some older pages at
 http://mpa.itc.it/rs/
illustrating 
    * Surface Reflectance Daily
    * Snow coverage
    * NDVI / EVI Vegetation index
    * Land Surface Temperature (LST, incl. multitemporal analysis example)
    * Atmosphere Daily Global Product 

which is a fraction of the available products:
http://edcdaac.usgs.gov/modis/dataproducts.asp
(there is more)

...
>    Hence my question is, how do I tell the command to pick up a certain
>    dataset?? And, where can I find the relative documentation for this
>    command when applied to multiple HDF bands??

See above script and/or
http://www.gdal.org/frmt_hdf4.html
 
>    Finally, I reside in Germany and need to transform a whole lot of images
>    into GeoTiff to later establish a WMS service .. Hence all conversion will
>    need be done remotely... Does anyone have any suggestions on how I should
>    go on about this?? Should I be using the gdal library or would I best bet
>    on something else???

GDAL is just fine for this. Maybe plus some scripting.

Markus

>    Msphinx?? ENVI??
> 
>    --
>    Mattia

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From mattia.parigiani at gmail.com  Fri Apr 13 10:34:24 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C API and Delphi
In-Reply-To: <461F9166.4090705@pobox.com>
References: <DC65EB3D6F198B4F93900800424A9CD6779085@MONTANA.tatukgis.com>
	<461F9166.4090705@pobox.com>
Message-ID: <6b6f1c810704130734l4569d566s53c5e0daa19afa71@mail.gmail.com>

Would that be under Windows?

On 4/13/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Artur Redzko wrote:
> >
> >
> > Hi
> >
> >
> >
> > Is there any special procedure to build GDAL DLL, that can be mapped and
> > used in Delphi through C API. I built DLL using Visual C++ express 2005,
> > tested exports using dumpbin - it looks fine. But when I try to map it
> > in Delphi like :
> ...
> > I tested it with daily and gdal 4.1 source with default settings. I also
> > tried to get binaries from vterrain but they also don't work. Strangely
> > found old 1.2 version works.
> >
> > Can anyone help me ? What do I do wrong ?
> >
> > Can someone send me compiled binaries for Windows ?
> >
> > Ps. Sorry for doubled emails. I have problem with my email server.
>
> Artur,
>
> GDAL 1.4 should build with most GDAL C API entry points using stdcall
> conventions.  I don't know why things aren't working for you, except
> possibly limitations with the express compiler.
>
> You might want to grab FWTools and try with that GDAL_FW.DLL.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/613f747e/attachment.html
From guillaume.huby.lists at gmail.com  Fri Apr 13 10:44:17 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
In-Reply-To: <6b6f1c810704130652s4118b5a7lf96e6e1a1c96c47e@mail.gmail.com>
References: <ddc797c30704130606u18cb7086x131f55501c5a8954@mail.gmail.com>
	<6b6f1c810704130652s4118b5a7lf96e6e1a1c96c47e@mail.gmail.com>
Message-ID: <ddc797c30704130744g4c0f44dat6e372752c7d98379@mail.gmail.com>

On 4/13/07, mattia <mattia.parigiani@gmail.com> wrote:
>
> Hey! Thanks a lot, I seem to be getting my Tiff images ok.. Even though
> they are all really dark and cant see much out of them.. Is that right
> anyways??
>
> One more thing I had mentioned in the previous mail is that I need to
> obtain also the TWF file that accompanies each TIFF file.. This file
> specifies pixel resolution and upper left coordinates of images bounding
> box.. Does anyone have a clue on how to obtain this??
>
> For what regards merging the images, I do not have the gdalmergecommand... only the
> gdalwarp one.. Is this because of my gdal version... Where can I get the
> CVS version from? I've been looking for it but was not lucky in my search..
>
> Can you, or anyone, also help me with the gdalwarp syntax given a series
> of .tif files and wanting to merge them into a single viewable one??


Having a look at http://www.gdal.org/index.html should help you a lot to
answer your questions ...

For tfw files, add option -co "TFW=YES".

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/46c246ea/attachment.html
From ILucena at clarku.edu  Fri Apr 13 11:18:42 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C API and Delphi
In-Reply-To: <DC65EB3D6F198B4F93900800424A9CD6779085@MONTANA.tatukgis.com>
References: <DC65EB3D6F198B4F93900800424A9CD6779085@MONTANA.tatukgis.com>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45502E18F5C@Iris.ad.clarku.edu>

Artur,

Take a look a Dr. Bob's Delphi Clinic: http://www.drbob42.com/delphi/headconv.htm

But don't get me wrong, I am not saying that you should use the automatic header conversion tool HeadConv. It tried it and it didn't work for gdal.h.

You are going in the right direction with your Delphi interface unit, but what you need is to create a .DEF file, something like "gdal14.def", and then use the "/def:gdal14.def" option in the linker of gdal14.dll in gdal/makefile.vc.

If you are using VC project the path for that option is:

"Project Properties/Configuration Properties/Linker/Module Definition file"

I hope that will help you Artur.

- - - -

Frank,

I am wondering... Some open source project in C/C++ already comes with those .DEF files and with the /def: in dll link option, e.g.:

- HDF41rs5s
- ImageMagick
- Shapelib
- wxWidgets
- Lua
- Goggle Desktop-DK

Maybe we should consider adding it to the GADL makefile.vc too.

What do you thing?

- - - -

Pozdrowienia / Regards

Ivan

________________________________________
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Artur Redzko
Sent: Friday, April 13, 2007 3:39 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] GDAL C API and Delphi


Hi 

Is there any special procedure to build GDAL DLL, that can be mapped and used in Delphi through C API. I built DLL using Visual C++ express 2005, tested exports using dumpbin - it looks fine. But when I try to map it in Delphi like : 

var
? GDALAllRegister : procedure; stdcall; 

..... 
? DLLHandle := LoadLibrary('gdal14.dll');
? if DLLHandle >= 32 then
? begin
??? @GDALAllRegister := GetProcAddress(DLLHandle,'GDALAllRegister');
??? ..... 
? end 

all functions addresses ( using names ) return nil like there is no function with such name (taken from gdal.h). 

I tested it with daily and gdal 4.1 source with default settings. I also tried to get binaries from vterrain but they also don't work. Strangely found old 1.2 version works. 

Can anyone help me ? What do I do wrong ? 

Can someone send me compiled binaries for Windows ? 

Ps. Sorry for doubled emails. I have problem with my email server.

Regards
Artur 






From mattia.parigiani at gmail.com  Fri Apr 13 11:57:24 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
In-Reply-To: <ddc797c30704130744g4c0f44dat6e372752c7d98379@mail.gmail.com>
References: <ddc797c30704130606u18cb7086x131f55501c5a8954@mail.gmail.com>
	<6b6f1c810704130652s4118b5a7lf96e6e1a1c96c47e@mail.gmail.com>
	<ddc797c30704130744g4c0f44dat6e372752c7d98379@mail.gmail.com>
Message-ID: <6b6f1c810704130857w32d715c2pfb87cb6d3e591f4d@mail.gmail.com>

Thanks a lot again,
Tried to gdal_translate with the -co "TWF=YES" option.... Cant see the .twf
file though... do I have to tell it where to store it or ?? where is it
getting stored? any idea?
Again,
Mattia

On 4/13/07, guillaume huby <guillaume.huby.lists@gmail.com> wrote:
>
> On 4/13/07, mattia <mattia.parigiani@gmail.com> wrote:
> >
> > Hey! Thanks a lot, I seem to be getting my Tiff images ok.. Even though
> > they are all really dark and cant see much out of them.. Is that right
> > anyways??
> >
> > One more thing I had mentioned in the previous mail is that I need to
> > obtain also the TWF file that accompanies each TIFF file.. This file
> > specifies pixel resolution and upper left coordinates of images bounding
> > box.. Does anyone have a clue on how to obtain this??
> >
> > For what regards merging the images, I do not have the gdalmergecommand... only the
> > gdalwarp one.. Is this because of my gdal version... Where can I get the
> > CVS version from? I've been looking for it but was not lucky in my search..
> >
> > Can you, or anyone, also help me with the gdalwarp syntax given a series
> > of .tif files and wanting to merge them into a single viewable one??
>
>
> Having a look at http://www.gdal.org/index.html should help you a lot to
> answer your questions ...
>
> For tfw files, add option -co "TFW=YES".
>
> Regards,
> Guillaume.
>



-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/45f63dc7/attachment.html
From mattia.parigiani at gmail.com  Fri Apr 13 12:29:52 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
In-Reply-To: <20070413142041.GC9899@bartok.itc.it>
References: <6b6f1c810704130508y78d9e7fcoe515da5725eb9bd4@mail.gmail.com>
	<20070413142041.GC9899@bartok.itc.it>
Message-ID: <6b6f1c810704130929g12f3668agf9c7cb24a8dd7aa@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: modis_hdf2erdas_ll_wgs84.sh
Type: application/x-sh
Size: 1494 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/ae2bde31/modis_hdf2erdas_ll_wgs84.sh
From mateusz at loskot.net  Fri Apr 13 15:11:24 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] New builder for stable branch
Message-ID: <461FD5DC.3020201@loskot.net>

Hi,

I added new builder to the GDAL Buildbot instance: telascience-stable

http://buildbot.osgeo.org:8500/telascience-stable

This builder is dedicated to build current stable branch
(ATM, it's branches/1.4).

It's configured to run incremental builds, the same way as -quick
builders work.


It's also possible to build branches using -quick and -full builders,
but it takes long time, because Buildbot has to remove current source
tree, do fresh checkout and then run complete build.

Having a dedicated builder the process of testing stable
branch is much shorter.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From randre at gmail.com  Fri Apr 13 18:30:52 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <200704131028.l3DASwPv018894@smtp11.cape.com>
References: <200704131004.53822.lists@b-open-solutions.it>
	<200704131028.l3DASwPv018894@smtp11.cape.com>
Message-ID: <9c2015090704131530s4ab1ddddr694d4e598bd449d1@mail.gmail.com>

Sorry, didn't work.  See results below.

Roger@obelix /cygdrive/c/gdal/gdal-1.4.1
$ ./configure --disable-shared; make; make install  <====== ok

Roger@obelix /cygdrive/c/gdal/gdal-1.4.1
$ which gdalinfo
/usr/local/bin/gdalinfo                                           <====== ok

Roger@obelix /cygdrive/c/gdal/gdal-1.4.1
$ python
Python 2.5 (r25:51908, Mar 13 2007, 08:13:14)
[GCC 3.4.4 (cygming special, gdc 0.12, using dmd 0.125)] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in <module>
    import _gdal
ImportError: No module named _gdal                  <======== Boom!
>>>



On 4/13/07, Norman Vine <nhv@cape.com> wrote:
>
> Alessandro Amici writes:
> >
> > Norman,
> >
> > On Friday 13 April 2007 01:44, Norman Vine wrote:
> > > Shouldn't have to change anything
> > >
> > > To check I just did a fresh Cygwin install and
> > >
> > > ./configure --with-libtool=no; make; make install
> > >
> > >   < might work with libtool I don't know I just can't stand the
> > >     glacially slow Cygwin compiles with libtool >
> >
> > in order to avoid the double compile with libtool you may use
> > the '--disable-static' (tested on unix/linux) or
> > '--disable-shared' (maybe on cygwin, but not tested) options.
> >
> > this is not as fast as '--without-libtool', but much, much closer.
> >
> > if you test it on cygwin (i don't have a cygwin install at
> > hand, currently), please report back how it goes.
>
> Alessandro
>
> Libtool's 'glacial pace' is due to the many levels of indirection
> that it forces.
>
> Cygwin is not Linux.  :-)
>
> Cheers
>
> Norman
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/649623f5/attachment.html
From nhv at cape.com  Fri Apr 13 18:52:25 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <9c2015090704131530s4ab1ddddr694d4e598bd449d1@mail.gmail.com>
Message-ID: <200704132252.l3DMqYPv007172@smtp11.cape.com>

Roger Andr? writes:
>  
> Sorry, didn't work.  See results below.

> Roger@obelix /cygdrive/c/gdal/gdal-1.4.1 $ ./configure --disable-shared;
make; make install 
> Roger@obelix /cygdrive/c/gdal/gdal-1.4.1 $ python Python 2.5 (r25:51908,
Mar 13 2007, 08:13:14) [GCC 3.4.4 (cygming special, gdc 0.12, using dmd >
0.125)] on cygwin Type "help", "copyright", "credits" or "license" for more
information. 
> >>> import gdal
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in <module> 
>     import _gdal
> ImportError: No module named _gdal                  <======== Boom!
> >>>

Hmm   I believe my example was 

./configure --with-libtool=no --with-python

Note I installed Cygwin on a clean machine just to test
if GDAL still worked in Cygwin

Good Luck

Norman

$ python
Python 2.5 (r25:51908, Mar 13 2007, 08:13:14)
[GCC 3.4.4 (cygming special, gdc 0.12, using dmd 0.125)] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
>>> gdal.__file__
'/usr/lib/python2.5/site-packages/gdal.pyc'
>>> a = dir(gdal)
>>> a[:4]
['AllRegister', 'AutoCreateWarpedVRT', 'Band', 'CE_Debug']
>>>



From randre at gmail.com  Fri Apr 13 19:16:24 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <200704132252.l3DMqYPv007172@smtp11.cape.com>
References: <9c2015090704131530s4ab1ddddr694d4e598bd449d1@mail.gmail.com>
	<200704132252.l3DMqYPv007172@smtp11.cape.com>
Message-ID: <9c2015090704131616l1f4ecea4r63ceff0873d24fb2@mail.gmail.com>

The --with-python option is one I hadn't seen before.

I'll try it again, and with the --with-libtool=no option, since I'd like it
to finish in the next 45 minutes.

Thanks,

Roger
--


On 4/13/07, Norman Vine <nhv@cape.com> wrote:
>
> Roger Andr? writes:
> >
> > Sorry, didn't work.  See results below.
>
> > Roger@obelix /cygdrive/c/gdal/gdal-1.4.1 $ ./configure --disable-shared;
> make; make install
> > Roger@obelix /cygdrive/c/gdal/gdal-1.4.1 $ python Python 2.5 (r25:51908,
> Mar 13 2007, 08:13:14) [GCC 3.4.4 (cygming special, gdc 0.12, using dmd >
> 0.125)] on cygwin Type "help", "copyright", "credits" or "license" for
> more
> information.
> > >>> import gdal
> > Traceback (most recent call last):
> >   File "<stdin>", line 1, in <module>
> >   File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in <module>
> >     import _gdal
> > ImportError: No module named _gdal                  <======== Boom!
> > >>>
>
> Hmm   I believe my example was
>
> ./configure --with-libtool=no --with-python
>
> Note I installed Cygwin on a clean machine just to test
> if GDAL still worked in Cygwin
>
> Good Luck
>
> Norman
>
> $ python
> Python 2.5 (r25:51908, Mar 13 2007, 08:13:14)
> [GCC 3.4.4 (cygming special, gdc 0.12, using dmd 0.125)] on cygwin
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import gdal
> >>> gdal.__file__
> '/usr/lib/python2.5/site-packages/gdal.pyc'
> >>> a = dir(gdal)
> >>> a[:4]
> ['AllRegister', 'AutoCreateWarpedVRT', 'Band', 'CE_Debug']
> >>>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070413/72aab18e/attachment.html
From hobu at iastate.edu  Sun Apr 15 10:51:32 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
Message-ID: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>

All,

I think the time has arrived for us work toward releasing Windows  
binaries that coincide with software releases.  Numerous projects,  
notably WorldWind, Python Cartographic Library,  GeoTools/GeoServer,  
and many others are starting to more widely take advantage of all the  
hard work the swig bindings maintainers have been doing.   There are  
currently a number of folks generating Windows binaries, most notably  
FWTools and MS4W.

 From a user's perspective, it is almost impossible to mix and match  
the drivers and features (scripting bindings, Python utilities, etc)  
that you might need if you want to do anything out of the ordinary  
for each distribution.  Each distribution also has a very different  
aim, with MS4W mostly tracking releases and FWTools covering the  
bleeding edge.  As a purveyor of exotic drivers (ArcSDE), the  
different distributions makes it hard for me to provide support, even  
though my driver can be built as a plugin, because of the need to  
match up linkages against each distribution.

I think an "official" Windows GDAL release should have the following  
traits:
- All optional drivers built as plugins and all other drivers built in
- No scripting bindings
- No Python utilities
- Include the .lib files

Instead of a monolithic kitchen sink approach, I think it might be  
better to provide the basic building blocks, which will allow  
developers to start from the same base and augment from that.  For  
example, with "GDAL Base," we could provide the Python bindings and  
utilities as an installable package that targets each Python version  
(same for .NET bindings, Java, and so on).

Thoughts?

Howard



From seth at pricepages.org  Sun Apr 15 13:11:33 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Constant width using gdalwarp?
Message-ID: <30FCC830-29C1-45AE-AE8C-C4A1C3216BDC@pricepages.org>

Let me start off by saying that GDAL is excellent. Big thanks. :)

I am reprojecting a set of 14400x14400px lat/long images to 14400px  
wide, and the image height depends on the latitude. The output  
projection is Mercator. My intent is to only interpolate pixels in  
one direction, so the output image will be a bit sharper along the x  
direction.

I thought I could do this with the "-tr" flag, but the width is  
changing depending on the latitude. Out of the two latitudes I've  
tried, I'm getting images 14400px wide and 14399px wide.

From ari.jolma at tkk.fi  Sun Apr 15 13:36:54 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
Message-ID: <462262B6.6040101@tkk.fi>


I've just spent numerous hours trying to get at least one of the 
JPEG2000 drivers to work with MinGW built GDAL. I managed to compile the 
ECW driver but linking was a too big pain since MinGW is not directly 
supported. I also tried to to compile and link the Perl bindings in 
MinGW to use the DLLs in FWTools. I ended up hacking dlltool, and I got 
the thing almost working but ended up in a mysterious "illegal instruction".

Perhaps my problem is sticking with MinGW. If I switched to MS C I could 
possibly use Perl (ActiveState) and other binaries.

Yes, the idea of being able to use (and tell others to use) a generic 
GDAL windows installation package as a part of a bigger geospatial tool 
system sounds good.

Ari

Howard Butler kirjoitti:
> All,
>
> I think the time has arrived for us work toward releasing Windows 
> binaries that coincide with software releases.  Numerous projects, 
> notably WorldWind, Python Cartographic Library,  GeoTools/GeoServer, 
> and many others are starting to more widely take advantage of all the 
> hard work the swig bindings maintainers have been doing.   There are 
> currently a number of folks generating Windows binaries, most notably 
> FWTools and MS4W.
>
> From a user's perspective, it is almost impossible to mix and match 
> the drivers and features (scripting bindings, Python utilities, etc) 
> that you might need if you want to do anything out of the ordinary for 
> each distribution.  Each distribution also has a very different aim, 
> with MS4W mostly tracking releases and FWTools covering the bleeding 
> edge.  As a purveyor of exotic drivers (ArcSDE), the different 
> distributions makes it hard for me to provide support, even though my 
> driver can be built as a plugin, because of the need to match up 
> linkages against each distribution.
>
> I think an "official" Windows GDAL release should have the following 
> traits:
> - All optional drivers built as plugins and all other drivers built in
> - No scripting bindings
> - No Python utilities
> - Include the .lib files
>
> Instead of a monolithic kitchen sink approach, I think it might be 
> better to provide the basic building blocks, which will allow 
> developers to start from the same base and augment from that.  For 
> example, with "GDAL Base," we could provide the Python bindings and 
> utilities as an installable package that targets each Python version 
> (same for .NET bindings, Java, and so on).
>
> Thoughts?
>
> Howard
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Sun Apr 15 16:29:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
Message-ID: <46228B31.4030405@pobox.com>

Howard Butler wrote:
> I think an "official" Windows GDAL release should have the following 
> traits:
> - All optional drivers built as plugins and all other drivers built in
> - No scripting bindings
> - No Python utilities
> - Include the .lib files

Howard,

Presumably it would also include the include files?  By .lib files to you
just mean the stub library for the DLL or static libraries as well?  I'd
rather avoid static libraries which are much harder to arrange on windows
when there are dependencies, and where are very sensitive to difference in
compiler version, and build options.  The C API used from a DLL should be
fairly save across compiler versions and mixes of build options.

So where do we go from here?  Should we get Mateusz to prepare initial
binaries for 1.4.1 based on the suggested pattern?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sun Apr 15 18:48:08 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
Message-ID: <f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>

Howard,

I'm not sure I could follow all of the aspects of this proposal, It's
worth considering to create an RFC describing the related changes in
the makefiles for the better understanding.

I agree with the aim of splitting up a binary package to various
sub-components  can be installed separately and creating a common core
component hosting the GDAL/OGR core implementation. The GDAL C API can
possibly be the primary separation boundary for this isolation.

But I would completely disagree if we would want to take out the
binaries of the scripting interfaces and let the user to create this
code by hand or obtain the corresponding bundle from a different
location. Instead, I would extend the pactice for adding these
binaries for all of the bindings in a more unique way. For example
adding some common makefile targets to create the code for this
purpose, and allow the interface maintainers to decide which files
should be included in the package and to which location.

I would also keep on providing the related dll-s (like proj.dll) in
the package to support a ready to use installation.

I also have some doubts how to create an unique compilation that is
suitable for all of the applications and the various needs.
Can someone confirm that the usage of the different CRT heaps will not
cause memory related problems when compiling the code using different
compiler installations. (Is the GDAL C API capable to pass memory
segments being allocated and released on different sides?)
Which default options to use the makefile? In this regard I consider
that the GDAL project is in a better shape than mapserver for
instance. As a raw example ms4w defines the USE_PHP_REGEX option which
prevents from the option to use regex with these binaries in an non
PHP environment at all.

There are some further issues should also be considered, like:

1. Provide support for WIN64 images
2. Possible issues related to embedding manifests in a multi-compiler
environment (VC2003, VC2005)
3. Controlling compiler related runtime dependencies (like the .NET
framework version affinity of the package)

Generally speaking it should be made clear how to reproduce a
particular binary representation from the corresponding sources.
(Without using undocumented inhouse hackings/scripts/file locations
for example).

Best regards,

Tamas




2007/4/15, Howard Butler <hobu@iastate.edu>:
> All,
>
> I think the time has arrived for us work toward releasing Windows
> binaries that coincide with software releases.  Numerous projects,
> notably WorldWind, Python Cartographic Library,  GeoTools/GeoServer,
> and many others are starting to more widely take advantage of all the
> hard work the swig bindings maintainers have been doing.   There are
> currently a number of folks generating Windows binaries, most notably
> FWTools and MS4W.
>
>  From a user's perspective, it is almost impossible to mix and match
> the drivers and features (scripting bindings, Python utilities, etc)
> that you might need if you want to do anything out of the ordinary
> for each distribution.  Each distribution also has a very different
> aim, with MS4W mostly tracking releases and FWTools covering the
> bleeding edge.  As a purveyor of exotic drivers (ArcSDE), the
> different distributions makes it hard for me to provide support, even
> though my driver can be built as a plugin, because of the need to
> match up linkages against each distribution.
>
> I think an "official" Windows GDAL release should have the following
> traits:
> - All optional drivers built as plugins and all other drivers built in
> - No scripting bindings
> - No Python utilities
> - Include the .lib files
>
> Instead of a monolithic kitchen sink approach, I think it might be
> better to provide the basic building blocks, which will allow
> developers to start from the same base and augment from that.  For
> example, with "GDAL Base," we could provide the Python bindings and
> utilities as an installable package that targets each Python version
> (same for .NET bindings, Java, and so on).
>
> Thoughts?
>
> Howard
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Sun Apr 15 19:30:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
Message-ID: <4622B5A5.6050706@pobox.com>

Tamas Szekeres wrote:
> But I would completely disagree if we would want to take out the
> binaries of the scripting interfaces and let the user to create this
> code by hand or obtain the corresponding bundle from a different
> location. Instead, I would extend the pactice for adding these
> binaries for all of the bindings in a more unique way. For example
> adding some common makefile targets to create the code for this
> purpose, and allow the interface maintainers to decide which files
> should be included in the package and to which location.

Tamas,

I don't think Howard was proposing any changes to the makefiles.
But rather that the "core component" we would build on would be
the GDAL/OGR C++ core, the C API, plus all the drivers that have
odd requirements built as plugins so they are optional.  Stuff that
depends on external DLLs, has runtime requirements, etc.

Then stuff like the C# or Python bindings could be provided as an
extra package on top of the C API.

> I also have some doubts how to create an unique compilation that is
> suitable for all of the applications and the various needs.
> Can someone confirm that the usage of the different CRT heaps will not
> cause memory related problems when compiling the code using different
> compiler installations. (Is the GDAL C API capable to pass memory
> segments being allocated and released on different sides?)

Generally speaking if you use the C API I *think* there should be
no cross-heap / cross-runtime problems but I'm not 100% sure of this
myself.  I'm imagining shipping a core built with VC7.1.

> There are some further issues should also be considered, like:
> 
> 1. Provide support for WIN64 images

I'd like to suggest we put off WIN64 native support binaries till we
have a good handle on 32bit builds, and till WIN64 is in wider use.

> 2. Possible issues related to embedding manifests in a multi-compiler
> environment (VC2003, VC2005)

I think if we build with VC7.1 we don't need to worry about manifests.
If we were to build the core with VC8 I think we would want to embed the
manifests as the makefiles do now.  But I get quite confused about how
DLL searching works with manifests in the picture.

> 3. Controlling compiler related runtime dependencies (like the .NET
> framework version affinity of the package)

I presume this only becomes an issue at the c#/.net level, is that
right?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Sun Apr 15 20:17:21 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
Message-ID: <3C6EB20A-33E0-4846-B874-99CEA5780B57@iastate.edu>


On Apr 15, 2007, at 5:48 PM, Tamas Szekeres wrote:

> Howard,
>
> I'm not sure I could follow all of the aspects of this proposal, It's
> worth considering to create an RFC describing the related changes in
> the makefiles for the better understanding.

I agree that this is RFC worthy, but I just wanted to float the idea  
and see if there is general support for it.  I volunteer to write the  
RFC when it appears we have some consensus on an approach we are  
going to take.  I would most like to hear from other developers using  
GDAL/OGR on windows and how our production of binaries can make their  
lives easier.

>
> I agree with the aim of splitting up a binary package to various
> sub-components  can be installed separately and creating a common core
> component hosting the GDAL/OGR core implementation. The GDAL C API can
> possibly be the primary separation boundary for this isolation.

The C API is certainly the boundary as far as the language bindings  
are concerned...

>
> But I would completely disagree if we would want to take out the
> binaries of the scripting interfaces and let the user to create this
> code by hand or obtain the corresponding bundle from a different
> location. Instead, I would extend the pactice for adding these
> binaries for all of the bindings in a more unique way. For example
> adding some common makefile targets to create the code for this
> purpose, and allow the interface maintainers to decide which files
> should be included in the package and to which location.

I am proposing that they obtain the bundle separately from the "GDAL  
base" distribution.  They might get it from the same place, but I  
think it should be separate.  There's just too many variations  
otherwise.  For example, I want Python 2.3, Java 1.4, and .NET 1.1  
bindings all at once... or, I want Python 2.5 next-gen, .NET 2.0, and  
Java 1.5.  If we're to just pick a set and distribute them  
altogether, it's invariably wrong for somebody.  Instead, I would  
propose that we build a Python 2.4 and 2.5 (or .NET 1.1 and 2.0) set  
of bindings and provide them for download separately (or even package  
them separately in a all-in-one-style installer kind of like FWTools  
does plugins currently).  Then the user (which I assert is more  
frequently a developer who's stuffing GDAL in something else) can mix  
and match the pieces they need.  I'm not recommending that users have  
to compile language bindings themselves, but rather recommending that  
they obtain them separately from the GDAL base distribution.   
Additionally, I'm recommending that the language bindings (in binary  
form) be tailored in such a way as to make them as simple as possible  
to bolt on to the GDAL base distribution.

>
> I would also keep on providing the related dll-s (like proj.dll) in
> the package to support a ready to use installation.

Proj, OGR, and GML fall into my "required" list, but I think we  
should argue the finer points of what to include and what not to  
include after we reach some consensus on the general idea of a GDAL  
base distribution.  I will state that this approach will be really  
nice for the exotics (SDE, Oracle, etc), which have *their own*  
quadratic variations of version pain going on.

>
> I also have some doubts how to create an unique compilation that is
> suitable for all of the applications and the various needs.

I don't think GDAL base solves everyone's needs, but I'm hoping it  
can cover more needs than we are currently covering with FWTools and  
MS4W (with respect to GDAL only...each binary has much different  
supporting members).  I also think it is important to focus a bit  
more on other developers embedding and linking GDAL in their  
applications.  I think our current Windows binary offerings cater  
mostly to end-user types rather than developer types, and I think the  
developer types spread GDAL further and wider in a shorter amount of  
time.

Howard


From bgreene at rapidmap.com.au  Sun Apr 15 23:31:07 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C# bindings freezing problem
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC6488570C@rmg-server03.rmg.local>

Hi,
 
I've been trying to modify an existing program to be able to read the georeferencing and image data from geotiffs using GDAL.  The program is written in VB.Net, but for my initial attempt I wrote a library in C#, and used that as a go-between.  I was having frequent crashing issues when the program hit the functions that load the image, so I switched to another library for the image loading stuff (I was also having trouble with indexed images, and it crashed much more often with certain images).
 
I was still having the crashing problems, so I removed the references to my library, and everything worked.  I tried converting my code to VB and integrating it into the original program, but I'm still having the same issue.
 
When the program crashes, it just freezes, taking the debugger with it (when I try to break, the environment freezes.  I then have to kill the process, and the debugger unfreezes).  This happens at different lines throughout the program, and for some images very occasionally (one in 20 executions maybe) won't happen, but with others will work most of the time.  There doesn't seem to be any pattern to the compression used, but larger images seem to be slightly more likley to crash.
 
Has anyone else had similar problems?
 
Cheers


From bgreene at rapidmap.com.au  Sun Apr 15 23:35:04 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] RE: GDAL C# bindings freezing problem
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC6488570D@rmg-server03.rmg.local>

Sorry, here's the nicely formatted version.
 
I've been trying to modify an existing program to be able to read the georeferencing and image data from 
geotiffs using GDAL.  The program is written in VB.Net, but for my initial attempt I wrote a library in C#,
 and used that as a go-between.  I was having frequent crashing issues when the program hit the functions
 that load the image, so I switched to another library for the image loading stuff (I was also having trouble 
with indexed images, and it crashed much more often with certain images).
 
I was still having the crashing problems, so I removed the references to my library, and everything worked.  
I tried converting my code to VB and integrating it into the original program, but I'm still having the same 
issue.
 
When the program crashes, it just freezes, taking the debugger with it (when I try to break, the environment 
freezes.  I then have to kill the process, and the debugger unfreezes).  This happens at different lines 
throughout the program, and for some images very occasionally (one in 20 executions maybe) won't 
happen, but with others will work most of the time.  There doesn't seem to be any pattern to the 
compression used, but larger images seem to be slightly more likley to crash.
 
Has anyone else had similar problems?
 
Cheers


From ari.jolma at tkk.fi  Mon Apr 16 02:31:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4622B5A5.6050706@pobox.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com>
Message-ID: <4623182D.5070509@tkk.fi>

Frank Warmerdam kirjoitti:
> Generally speaking if you use the C API I *think* there should be
> no cross-heap / cross-runtime problems but I'm not 100% sure of this
> myself.  I'm imagining shipping a core built with VC7.1.

The current bindings use the C API but they also use the Colortable 
class C++ API. That may cause some problems when trying to use a GDAL 
DLL built with other compiler than what you are using.

> I think if we build with VC7.1

Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?

My opinion is that the GDAL DLL binary package should be distributed as 
an end-users version and then there should be an associated developers 
package with include files and import libraries and/or DEF files.

Best regards,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From schut at sarvision.nl  Mon Apr 16 02:52:31 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] HDF MODIS conversion to GeoTiff WGS-84 referenced
	format
In-Reply-To: <6b6f1c810704130857w32d715c2pfb87cb6d3e591f4d@mail.gmail.com>
References: <ddc797c30704130606u18cb7086x131f55501c5a8954@mail.gmail.com>	<6b6f1c810704130652s4118b5a7lf96e6e1a1c96c47e@mail.gmail.com>	<ddc797c30704130744g4c0f44dat6e372752c7d98379@mail.gmail.com>
	<6b6f1c810704130857w32d715c2pfb87cb6d3e591f4d@mail.gmail.com>
Message-ID: <46231D2F.1030609@sarvision.nl>

mattia wrote:
> Thanks a lot again,
> Tried to gdal_translate with the -co "TWF=YES" option.... Cant see the 
> .twf file though... do I have to tell it where to store it or ?? where 
> is it getting stored? any idea?
Possibly because you made a typo :-) It's TFW, not TWF. Using -co 
TFW=YES you should get a <filename>.tfw next to your output tiff, right 
in the same place.

Cheers,
Vincent.
> Again,
> Mattia
>
> On 4/13/07, *guillaume huby* <guillaume.huby.lists@gmail.com 
> <mailto:guillaume.huby.lists@gmail.com>> wrote:
>
>     On 4/13/07, *mattia* < mattia.parigiani@gmail.com
>     <mailto:mattia.parigiani@gmail.com>> wrote:
>
>         Hey! Thanks a lot, I seem to be getting my Tiff images ok..
>         Even though they are all really dark and cant see much out of
>         them.. Is that right anyways??
>
>         One more thing I had mentioned in the previous mail is that I
>         need to obtain also the TWF file that accompanies each TIFF
>         file.. This file specifies pixel resolution and upper left
>         coordinates of images bounding box.. Does anyone have a clue
>         on how to obtain this??
>
>         For what regards merging the images, I do not have the
>         gdalmerge command... only the gdalwarp one.. Is this because
>         of my gdal version... Where can I get the CVS version from?
>         I've been looking for it but was not lucky in my search..
>
>         Can you, or anyone, also help me with the gdalwarp syntax
>         given a series of .tif files and wanting to merge them into a
>         single viewable one??
>
>
>     Having a look at http://www.gdal.org/index.html should help you a
>     lot to answer your questions ...
>
>     For tfw files, add option -co "TFW=YES".
>
>     Regards,
>     Guillaume.
>
>
>
>
> -- 
> Mattia
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From artur.redzko at tatukgis.com  Mon Apr 16 03:25:16 2007
From: artur.redzko at tatukgis.com (Artur Redzko)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Proposal for Unified Windows Binaries
Message-ID: <DC65EB3D6F198B4F93900800424A9CD677909F@MONTANA.tatukgis.com>

Ari Jolma napisa?(a):

> Frank Warmerdam kirjoitti:

>> Generally speaking if you use the C API I *think* there should be

>> no cross-heap / cross-runtime problems but I'm not 100% sure of this

>> myself.  I'm imagining shipping a core built with VC7.1.

> 

> The current bindings use the C API but they also use the Colortable 

> class C++ API. That may cause some problems when trying to use a GDAL 

> DLL built with other compiler than what you are using.

 

Maybe that's why I have problems with using standard DLL and C API in Delphi.

 

> 

>> I think if we build with VC7.1

> 

> Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?

> 

> My opinion is that the GDAL DLL binary package should be distributed as 

> an end-users version and then there should be an associated developers 

> package with include files and import libraries and/or DEF files.

 

That would be great. Other products using GDAL like openev change distributive dll-s requiring lots of additional stuff instead of one simple DLL.

 

> 

> Best regards,

> 

> Ari

> 

 

>>So where do we go from here?  Should we get Mateusz to prepare initial 
>>binaries for 1.4.1 based on the suggested pattern?

 

Yes, please.

 

So when Mateusz can prepare initial binaries for 1.4.1, with version exporting C API without C++ stuff, so it can be easily used with Delphi (that doesn't like C++) ?

 

Pozdrowienia / Regards
AR 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070416/844a317c/attachment.html
From szekerest at gmail.com  Mon Apr 16 05:59:12 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C# bindings freezing problem
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC6488570C@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC6488570C@rmg-server03.rmg.local>
Message-ID: <f3b73b7d0704160259q6d61cdaah5dec6495a838561d@mail.gmail.com>

Ben,

Could you post an example code and data to reproduce this problem?
Which version of the C# bindings you use?

Best regards,

Tamas


2007/4/16, Ben Greene <bgreene@rapidmap.com.au>:
> Hi,
>
> I've been trying to modify an existing program to be able to read the georeferencing and image data from geotiffs using GDAL.  The program is written in VB.Net, but for my initial attempt I wrote a library in C#, and used that as a go-between.  I was having frequent crashing issues when the program hit the functions that load the image, so I switched to another library for the image loading stuff (I was also having trouble with indexed images, and it crashed much more often with certain images).
>
> I was still having the crashing problems, so I removed the references to my library, and everything worked.  I tried converting my code to VB and integrating it into the original program, but I'm still having the same issue.
>
> When the program crashes, it just freezes, taking the debugger with it (when I try to break, the environment freezes.  I then have to kill the process, and the debugger unfreezes).  This happens at different lines throughout the program, and for some images very occasionally (one in 20 executions maybe) won't happen, but with others will work most of the time.  There doesn't seem to be any pattern to the compression used, but larger images seem to be slightly more likley to crash.
>
> Has anyone else had similar problems?
>
> Cheers
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu at iastate.edu  Mon Apr 16 08:53:41 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4623182D.5070509@tkk.fi>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com> <4623182D.5070509@tkk.fi>
Message-ID: <17091DE5-E253-4306-B55B-A8CC997AD111@iastate.edu>


On Apr 16, 2007, at 1:31 AM, Ari Jolma wrote:

> Frank Warmerdam kirjoitti:
>> Generally speaking if you use the C API I *think* there should be
>> no cross-heap / cross-runtime problems but I'm not 100% sure of this
>> myself.  I'm imagining shipping a core built with VC7.1.
>
> The current bindings use the C API but they also use the Colortable  
> class C++ API. That may cause some problems when trying to use a  
> GDAL DLL built with other compiler than what you are using.

We need to add C API for the GDALColorTable and GDALColorEntry stuff  
to reconcile this issue.

Howard

From dmorissette at mapgears.com  Mon Apr 16 10:35:07 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4623182D.5070509@tkk.fi>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<4623182D.5070509@tkk.fi>
Message-ID: <4623899B.6020600@mapgears.com>

Ari Jolma wrote:
> 
>> I think if we build with VC7.1
> 
> Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?
> 

I tried a few months ago and it seems to be impossible to find VC 7.1 
any more. If you find a place where it's still available (I mean 
legally) then I'd be interested as well.

In the meantime I have been using the VC++ 2005 Express (I think that's 
what it's called) which is available for free, but seems to have some 
compatibility problems with the BuildKit.

Back to the original topic of this thread, I agree that unified binaries 
would be nice to have, but I am not familiar enough with the Windows 
builds and issues so I'll let the Windows experts decide what they think 
is best.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From Roger.Bivand at nhh.no  Mon Apr 16 11:49:47 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Proposal for Unified Windows Binaries
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com>
Message-ID: <loom.20070416T174120-650@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:
> 
> Tamas Szekeres wrote:
> > But I would completely disagree if we would want to take out the
> > binaries of the scripting interfaces and let the user to create this
> > code by hand or obtain the corresponding bundle from a different
> > location. Instead, I would extend the pactice for adding these
> > binaries for all of the bindings in a more unique way. For example
> > adding some common makefile targets to create the code for this
> > purpose, and allow the interface maintainers to decide which files
> > should be included in the package and to which location.
> 
> Tamas,
> 
> I don't think Howard was proposing any changes to the makefiles.
> But rather that the "core component" we would build on would be
> the GDAL/OGR C++ core, the C API, plus all the drivers that have
> odd requirements built as plugins so they are optional.  Stuff that
> depends on external DLLs, has runtime requirements, etc.


Just a brief comment: the native Windows GRASS build is MSYS/MinGW, as is 
rgdal, the R/GDAL interface package. The latter is using MSYS/MinGW builds of 
proj4 and GDAL to internalise external dependencies, so that the R archive 
network can distribute a complete package built automatically. Users with the 
skill needed have used FWTools DLLs, but always meet the issue that VC* 
compiled DLLs reset the FP precision to 64 bit from 80 bit on i386; MinGW has 
been house-trained and doesn't do that. The WinGRASS people (very few) may not 
have the capacity to try to switch to VC* build trains.

Best wishes,

Roger







From szekerest at gmail.com  Mon Apr 16 12:12:22 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <3C6EB20A-33E0-4846-B874-99CEA5780B57@iastate.edu>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<3C6EB20A-33E0-4846-B874-99CEA5780B57@iastate.edu>
Message-ID: <f3b73b7d0704160912s2a373e23y20245a68041f2bf0@mail.gmail.com>

>
> I am proposing that they obtain the bundle separately from the "GDAL
> base" distribution.  They might get it from the same place, but I
> think it should be separate.  There's just too many variations
> otherwise.  For example, I want Python 2.3, Java 1.4, and .NET 1.1
> bindings all at once... or, I want Python 2.5 next-gen, .NET 2.0, and
> Java 1.5.  If we're to just pick a set and distribute them
> altogether, it's invariably wrong for somebody.  Instead, I would
> propose that we build a Python 2.4 and 2.5 (or .NET 1.1 and 2.0) set
> of bindings and provide them for download separately (or even package
> them separately in a all-in-one-style installer kind of like FWTools
> does plugins currently).  Then the user (which I assert is more
> frequently a developer who's stuffing GDAL in something else) can mix
> and match the pieces they need.  I'm not recommending that users have
> to compile language bindings themselves, but rather recommending that
> they obtain them separately from the GDAL base distribution.
> Additionally, I'm recommending that the language bindings (in binary
> form) be tailored in such a way as to make them as simple as possible
> to bolt on to the GDAL base distribution.
>

I would support the idea very much, and hopefully it's not impossible
to achieve the desired result. But I would like to see that the core
and the complementary components are fit into same package creation
environment. The developer (componrnt owner) would be responsible to
implement the make process for the variations but the actual building
and packaging would be done on the same common environment (with the
same SDK-s installed etc.).

Moreover it would be desirable establish the technology rules the
various OSGEO projects follow in order to fit into a common
installation system. Are you thinking solely about the GDAL project?
It would be great if we can handle whether a component depends on a
particular version of another component should also be installed. How
can we eliminate the need of the side-by-side execution of the
different versions of the same component in some cases? These are not
issues for the ms4w or FWTools approach, since all of the package was
bound to a specific version of a particular component.

We should at least consider:

1. The component boundaries of the implementation.
2. The expected location of the files in the target environment.
3. How the components relate to each other, dependencies, required versions.
4. Choose a proper installation framework.

>
> I don't think GDAL base solves everyone's needs, but I'm hoping it
> can cover more needs than we are currently covering with FWTools and
> MS4W (with respect to GDAL only...each binary has much different
> supporting members).  I also think it is important to focus a bit
> more on other developers embedding and linking GDAL in their
> applications.  I think our current Windows binary offerings cater
> mostly to end-user types rather than developer types, and I think the
> developer types spread GDAL further and wider in a shorter amount of
> time.
>

I agree. And it would also be great to eliminate the common problems
caused by the nature of the Windows environment at the implementation.

Best regards,

Tamas

From drsiino at gmail.com  Mon Apr 16 12:33:33 2007
From: drsiino at gmail.com (Daniel Siino)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Issue running Swig-Java gdalinfo
In-Reply-To: <614adc770704152016p6e176e9u159e2df0b63acfd8@mail.gmail.com>
References: <614adc770704152016p6e176e9u159e2df0b63acfd8@mail.gmail.com>
Message-ID: <614adc770704160933n768337b0gfb4064647207835f@mail.gmail.com>

Hi,

Ok, I've found out what I was missing, thanks to a link in a previous post:

I've included the manifest to the ogrjni.dll by adding
mt -manifest ogrjni.dll.manifest -outputresource:ogrjni.dll;2
in the swig\java makefile.

Best regards,

Daniel


On 4/15/07, Daniel Siino <drsiino@gmail.com> wrote:
>
> Hi,
>
> I've build GDAL on Windows XP using nmake from VC++ 2005 express.
> I can run ogrinfo.exe without problems. However, after building the Java
> binding using Swig (swigwin-1.3.31), I ran the gdalinfo test class
> provided and got an error:
> Native library load failed.
> java.lang.UnsatisfiedLinkError: D:\ms4w\gdal\swig\java\gdaljni.dll: The
> specified procedure could not be found
> Exception in thread "main" java.lang.UnsatisfiedLinkError:
> org.gdal.gdal.gdalJNI.AllRegister ()V.
>
> I've searched the forum and looked at similar issues but was not able to
> correct it.
>
> The DLL is on my path and from the error message, it is being loaded.
> Is this an issue with the compiler messing up the name of the entry point
> by adding underscore?
> I've look at the dll using DependencyWalker  and this is what I see:
> _Java_org_gdal_gdal_gdalJNI_AllRegister@8
>
> Is this correct?
>
> As a side question, is the MITab format supported through the Swig Java
> binding?
>
> Regards,
>
> Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070416/6cbbdc5a/attachment.html
From drsiino at gmail.com  Mon Apr 16 13:46:02 2007
From: drsiino at gmail.com (Daniel Siino)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Java binding - supported file format.
Message-ID: <614adc770704161046u2ad7da45nf2821d3438a34f4@mail.gmail.com>

Hi,

I am able to read ESRI and TAB files using  the ogrinfo tool but I get:
"ERROR 4: `d:\data\world.shp' not recognised as a supported file format."
when running
java -cp build\classes;apps gdalinfo d:\data\world.shp

Am I missing some file in my path?

I have build the Java binding using nmake and swigwin-1.3.31.
I've only got a few warnings during the process:
Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No typemaps are defined.
Warning(302): Identifier 'Geometry' redefined (ignored) (Renamed from
'OGRGeometryShadow'),
 Warning(302): previous definition of 'Geometry' (Renamed from
'OGRGeometryShadow').
Warning(453): Can't apply (double argout[ANY]). No typemaps are defined.



Regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070416/e5bbc255/attachment.html
From bfraser at geoanalytic.com  Mon Apr 16 13:52:33 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries (Visual C++ .NET
	2003 availability)
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com><4623182D.5070509@tkk.fi>
	<4623899B.6020600@mapgears.com>
Message-ID: <029801c78050$02b42d50$160002c0@shark>

Daniel,

  Good question.  A search of Amazon for "Microsoft Visual
Studio .NET Professional 2003" shows some available, but I
don't know what would happen if you tried to order one.

  I got my copy in 2005 through Microsoft's Empower program
(basically Microsoft Developer Network (MSDN) subscription
with a lower price and higher development requirements).  I
don't know if you purchased an MSDN
Professional/Enterprise/Universal subscription today if you
would get a copy (and I couldn't tell by browsing the
Microsoft site!).


  And maybe it's a question for OSGeo:

       Should OSGeo help OSGeo Projects in supporting
Windows binary releases by purchasing an MSDN subscription
(a level that includes the compilers)?

   I expect there would be lots of questions regarding
licensing, whether it's appropriate, etc.

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Daniel Morissette" <dmorissette@mapgears.com>
To: "gdal-dev" <gdal-dev@lists.maptools.org>
Sent: Monday, April 16, 2007 8:35 AM
Subject: Re: [Gdal-dev] Proposal for Unified Windows
Binaries


> Ari Jolma wrote:
> >
> >> I think if we build with VC7.1
> >
> > Where can one get (even buy) VC7.1 (aka Visual C++ .NET
2003)?
> >
>
> I tried a few months ago and it seems to be impossible to
find VC 7.1
> any more. If you find a place where it's still available
(I mean
> legally) then I'd be interested as well.
>
> In the meantime I have been using the VC++ 2005 Express (I
think that's
> what it's called) which is available for free, but seems
to have some
> compatibility problems with the BuildKit.
>
> Back to the original topic of this thread, I agree that
unified binaries
> would be nice to have, but I am not familiar enough with
the Windows
> builds and issues so I'll let the Windows experts decide
what they think
> is best.
>
> Daniel
> -- 
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From richard.matsunaga at waypointinfo.com  Mon Apr 16 14:18:36 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries (Visual C++
	.NET2003 availability)
In-Reply-To: <029801c78050$02b42d50$160002c0@shark>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com><4623182D.5070509@tkk.fi><4623899B.6020600@mapgears.com>
	<029801c78050$02b42d50$160002c0@shark>
Message-ID: <008001c78053$a76d7d80$c2012b0a@Richard>

 
Yes, MSDN includes VS 2003 (and Visual C++ 6).

I don't think buying MSDN would benefit OSGeo, as it is a per-developer
license.

Cheers,
Richard

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Brent Fraser
> Sent: April 16, 2007 1:53 PM
> To: Daniel Morissette; gdal-dev
> Subject: Re: [Gdal-dev] Proposal for Unified Windows Binaries 
> (Visual C++ .NET2003 availability)
> 
> Daniel,
> 
>   Good question.  A search of Amazon for "Microsoft Visual 
> Studio .NET Professional 2003" shows some available, but I 
> don't know what would happen if you tried to order one.
> 
>   I got my copy in 2005 through Microsoft's Empower program 
> (basically Microsoft Developer Network (MSDN) subscription 
> with a lower price and higher development requirements).  I 
> don't know if you purchased an MSDN 
> Professional/Enterprise/Universal subscription today if you 
> would get a copy (and I couldn't tell by browsing the 
> Microsoft site!).
> 
> 
>   And maybe it's a question for OSGeo:
> 
>        Should OSGeo help OSGeo Projects in supporting Windows 
> binary releases by purchasing an MSDN subscription (a level 
> that includes the compilers)?
> 
>    I expect there would be lots of questions regarding 
> licensing, whether it's appropriate, etc.
> 
> Brent Fraser
> GeoAnalytic Inc.
> Calgary, Alberta
> 
> ----- Original Message -----
> From: "Daniel Morissette" <dmorissette@mapgears.com>
> To: "gdal-dev" <gdal-dev@lists.maptools.org>
> Sent: Monday, April 16, 2007 8:35 AM
> Subject: Re: [Gdal-dev] Proposal for Unified Windows Binaries
> 
> 
> > Ari Jolma wrote:
> > >
> > >> I think if we build with VC7.1
> > >
> > > Where can one get (even buy) VC7.1 (aka Visual C++ .NET
> 2003)?
> > >
> >
> > I tried a few months ago and it seems to be impossible to
> find VC 7.1
> > any more. If you find a place where it's still available
> (I mean
> > legally) then I'd be interested as well.
> >
> > In the meantime I have been using the VC++ 2005 Express (I
> think that's
> > what it's called) which is available for free, but seems
> to have some
> > compatibility problems with the BuildKit.
> >
> > Back to the original topic of this thread, I agree that
> unified binaries
> > would be nice to have, but I am not familiar enough with
> the Windows
> > builds and issues so I'll let the Windows experts decide
> what they think
> > is best.
> >
> > Daniel
> > -- 
> > Daniel Morissette
> > http://www.mapgears.com/
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From drsiino at gmail.com  Mon Apr 16 14:23:21 2007
From: drsiino at gmail.com (Daniel Siino)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Java binding - supported file format.
In-Reply-To: <614adc770704161046u2ad7da45nf2821d3438a34f4@mail.gmail.com>
References: <614adc770704161046u2ad7da45nf2821d3438a34f4@mail.gmail.com>
Message-ID: <614adc770704161123m5b5c2bc1ne3c7604b02df6cff@mail.gmail.com>

Sorry,

I jumped the gun on this one. I just realized the gdalinfo class is meant
for raster format. I need to use the ogr class with vector files.

Best regards,

Daniel

On 4/16/07, Daniel Siino <drsiino@gmail.com> wrote:
>
> Hi,
>
> I am able to read ESRI and TAB files using  the ogrinfo tool but I get:
> "ERROR 4: `d:\data\world.shp' not recognised as a supported file format."
> when running
> java -cp build\classes;apps gdalinfo d:\data\world.shp
>
> Am I missing some file in my path?
>
> I have build the Java binding using nmake and swigwin-1.3.31.
> I've only got a few warnings during the process:
> Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No typemaps are defined.
>
> Warning(302): Identifier 'Geometry' redefined (ignored) (Renamed from
> 'OGRGeometryShadow'),
>  Warning(302): previous definition of 'Geometry' (Renamed from
> 'OGRGeometryShadow').
> Warning(453): Can't apply (double argout[ANY]). No typemaps are defined.
>
>
>
> Regards,
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070416/3b133699/attachment.html
From bfraser at geoanalytic.com  Mon Apr 16 15:07:58 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries (Visual
	C++.NET2003 availability)
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com><4623182D.5070509@tkk.fi><4623899B.6020600@mapgears.com><029801c78050$02b42d50$160002c0@shark>
	<008001c78053$a76d7d80$c2012b0a@Richard>
Message-ID: <03c801c7805a$8bb8bb20$160002c0@shark>

Richard,

    My thought was to use a license for automated building
of libraries (and applications?); so more in the "buildbot"
scenario than the usual interactive create-compile-debug
code...

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Richard Matsunaga"
<richard.matsunaga@waypointinfo.com>
To: "'gdal-dev'" <gdal-dev@lists.maptools.org>
Sent: Monday, April 16, 2007 12:18 PM
Subject: RE: [Gdal-dev] Proposal for Unified Windows
Binaries (Visual C++.NET2003 availability)


>
> Yes, MSDN includes VS 2003 (and Visual C++ 6).
>
> I don't think buying MSDN would benefit OSGeo, as it is a
per-developer
> license.
>
> Cheers,
> Richard
>
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.maptools.org
> > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf
Of Brent Fraser
> > Sent: April 16, 2007 1:53 PM
> > To: Daniel Morissette; gdal-dev
> > Subject: Re: [Gdal-dev] Proposal for Unified Windows
Binaries
> > (Visual C++ .NET2003 availability)
> >
> > Daniel,
> >
> >   Good question.  A search of Amazon for "Microsoft
Visual
> > Studio .NET Professional 2003" shows some available, but
I
> > don't know what would happen if you tried to order one.
> >
> >   I got my copy in 2005 through Microsoft's Empower
program
> > (basically Microsoft Developer Network (MSDN)
subscription
> > with a lower price and higher development requirements).
I
> > don't know if you purchased an MSDN
> > Professional/Enterprise/Universal subscription today if
you
> > would get a copy (and I couldn't tell by browsing the
> > Microsoft site!).
> >
> >
> >   And maybe it's a question for OSGeo:
> >
> >        Should OSGeo help OSGeo Projects in supporting
Windows
> > binary releases by purchasing an MSDN subscription (a
level
> > that includes the compilers)?
> >
> >    I expect there would be lots of questions regarding
> > licensing, whether it's appropriate, etc.
> >
> > Brent Fraser
> > GeoAnalytic Inc.
> > Calgary, Alberta
> >


From jmckenna at dmsolutions.ca  Mon Apr 16 15:12:35 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Proposal for Unified Windows Binaries
In-Reply-To: <loom.20070416T174120-650@post.gmane.org>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<loom.20070416T174120-650@post.gmane.org>
Message-ID: <4623CAA3.6090607@dmsolutions.ca>

(slightly off-topic)

Reading this MSYS/MinGW/GRASS comment reminds me of a wall I am planning 
to hit: recently I have become a grass user (on Gentoo, and have failed 
miserably with any windows attempts) and my goal is to add GRASS-data 
support to MS4W builds (through GDAL of course).   But I have many 
questions for how to go about that...which IS related to this "unified" 
windows binary for GDAL.

jeff



Roger Bivand wrote:
> Just a brief comment: the native Windows GRASS build is MSYS/MinGW, as is 
> rgdal, the R/GDAL interface package. The latter is using MSYS/MinGW builds of 
> proj4 and GDAL to internalise external dependencies, so that the R archive 
> network can distribute a complete package built automatically. Users with the 
> skill needed have used FWTools DLLs, but always meet the issue that VC* 
> compiled DLLs reset the FP precision to 64 bit from 80 bit on i386; MinGW has 
> been house-trained and doesn't do that. The WinGRASS people (very few) may not 
> have the capacity to try to switch to VC* build trains.
> 
> Best wishes,
> 
> Roger


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From drewtimmins at gmail.com  Mon Apr 16 17:29:45 2007
From: drewtimmins at gmail.com (Andrew Timmins)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] OGR C# .NET
Message-ID: <d3876dea0704161429s6613e0d2vcec4dc9413e7ff3e@mail.gmail.com>

Is there any way you can use the OGR lib in C# .NET ?
I downloaded FWTools and found a /csharp/ directory with a dll called
ogr_csharp.dll
But when I try and use this in a project I get errors.
[Error]
"The type initializer for 'OGR.ogr' threw an exception"

my Code


using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using OGR;

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {

            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            ogr.RegisterAll();
        }
    }
}


If anyone has any ideas please reply.

Thanks,
Drew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070416/f252d807/attachment.html
From mateusz at loskot.net  Mon Apr 16 17:43:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] OGR C# .NET
In-Reply-To: <d3876dea0704161429s6613e0d2vcec4dc9413e7ff3e@mail.gmail.com>
References: <d3876dea0704161429s6613e0d2vcec4dc9413e7ff3e@mail.gmail.com>
Message-ID: <4623EDFB.2030306@loskot.net>

Andrew Timmins wrote:
> Is there any way you can use the OGR lib in C# .NET ?

Andrew,

Yes, there is.
Check the Wiki:

http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp

> I downloaded FWTools and found a /csharp/ directory with a dll called
> ogr_csharp.dll But when I try and use this in a project I get errors.
> [Error]
> "The type initializer for 'OGR.ogr' threw an exception"

I'm not sure but AFAIK there were some changes in names,
and it should be

using OSGeo.OGR;

check this article for details:

http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions

Also, don't forget to look at C# example applications, like GDALRead.cs:

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From randre at gmail.com  Mon Apr 16 17:55:34 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Instructions for Cygwin compile of GDAL
In-Reply-To: <9c2015090704131616l1f4ecea4r63ceff0873d24fb2@mail.gmail.com>
References: <9c2015090704131530s4ab1ddddr694d4e598bd449d1@mail.gmail.com>
	<200704132252.l3DMqYPv007172@smtp11.cape.com>
	<9c2015090704131616l1f4ecea4r63ceff0873d24fb2@mail.gmail.com>
Message-ID: <9c2015090704161455w3fe692j31485fe8f01c9e72@mail.gmail.com>

The "--with-python" options does the trick.  Gonna have to try it from
scratch with a fresh Cygwin install and GDAL source, but that seems to have
done it.
--

On 4/13/07, Roger Andr? <randre@gmail.com> wrote:
>
> The --with-python option is one I hadn't seen before.
>
> I'll try it again, and with the --with-libtool=no option, since I'd like
> it to finish in the next 45 minutes.
>
> Thanks,
>
> Roger
> --
>
>
> On 4/13/07, Norman Vine <nhv@cape.com> wrote:
> >
> > Roger Andr? writes:
> > >
> > > Sorry, didn't work.  See results below.
> >
> > > Roger@obelix /cygdrive/c/gdal/gdal-1.4.1 $ ./configure
> > --disable-shared;
> > make; make install
> > > Roger@obelix /cygdrive/c/gdal/gdal- 1.4.1 $ python Python 2.5(r25:51908,
> > Mar 13 2007, 08:13:14) [GCC 3.4.4 (cygming special, gdc 0.12, using dmd
> > >
> > 0.125)] on cygwin Type "help", "copyright", "credits" or "license" for
> > more
> > information.
> > > >>> import gdal
> > > Traceback (most recent call last):
> > >   File "<stdin>", line 1, in <module>
> > >   File "/usr/lib/python2.5/site-packages/gdal.py", line 191, in
> > <module>
> > >     import _gdal
> > > ImportError: No module named _gdal                  <======== Boom!
> > > >>>
> >
> > Hmm   I believe my example was
> >
> > ./configure --with-libtool=no --with-python
> >
> > Note I installed Cygwin on a clean machine just to test
> > if GDAL still worked in Cygwin
> >
> > Good Luck
> >
> > Norman
> >
> > $ python
> > Python 2.5 (r25:51908, Mar 13 2007, 08:13:14)
> > [GCC 3.4.4 (cygming special, gdc 0.12, using dmd 0.125)] on cygwin
> > Type "help", "copyright", "credits" or "license" for more information.
> > >>> import gdal
> > >>> gdal.__file__
> > '/usr/lib/python2.5/site-packages/gdal.pyc'
> > >>> a = dir(gdal)
> > >>> a[:4]
> > ['AllRegister', 'AutoCreateWarpedVRT', 'Band', 'CE_Debug']
> > >>>
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070416/ee12c1f8/attachment.html
From szekerest at gmail.com  Mon Apr 16 18:10:29 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] OGR C# .NET
In-Reply-To: <d3876dea0704161429s6613e0d2vcec4dc9413e7ff3e@mail.gmail.com>
References: <d3876dea0704161429s6613e0d2vcec4dc9413e7ff3e@mail.gmail.com>
Message-ID: <f3b73b7d0704161510l4e6ac7a7qf6112b2a2b6b65f6@mail.gmail.com>

Do you have [FWTools dir]\bin available in the PATH?

Best regards,

Tamas


2007/4/16, Andrew Timmins <drewtimmins@gmail.com>:
> Is there any way you can use the OGR lib in C# .NET ?
> I downloaded FWTools and found a /csharp/ directory with a dll called
> ogr_csharp.dll
> But when I try and use this in a project I get errors.
> [Error]
> "The type initializer for ' OGR.ogr' threw an exception"
>
> my Code
>
>
> using System;
> using System.Collections.Generic;
> using System.ComponentModel;
> using System.Data;
> using System.Drawing;
> using System.Text;
> using System.Windows.Forms;
> using OGR;
>
> namespace WindowsApplication1
> {
>     public partial class Form1 : Form
>     {
>         public Form1()
>         {
>
>             InitializeComponent();
>
>         }
>
>         private void Form1_Load(object sender, EventArgs e)
>         {
>             ogr.RegisterAll();
>         }
>     }
> }
>
>
> If anyone has any ideas please reply.
>
> Thanks,
> Drew
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From bgreene at rapidmap.com.au  Mon Apr 16 19:18:36 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C# bindings freezing problem
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC6488570E@rmg-server03.rmg.local>

I was originally using the latest FWTools 1.2.2 binaries (I think that makes it 1.4.0), and then I compiled from the 1.4.1 sources according to the instructions on this site.  When I compiled from sources, the debugger would step into the SWIG wrappers, but I still had the same problem.
 
Here is the VB code I'm currently using, if you would like the C# code I can probably dig that up too, but the VB is basically a direct translation of it.
 
Private Shared image As Dataset

Public Shared Function GetGeoReference(ByVal Filename As String) As GeoReference

If Not (Filename Is Nothing) Then

'Return Nothing

'if uncommented, the code will not crash

End If

GDAL.gdal.AllRegister()

image = GDAL.gdal.Open(Filename, 0)

If (image Is Nothing) Then

Return Nothing

End If

Dim gr(6) As Double

image.GetGeoTransform(gr)

Dim topLeft() As Double = TransformWGS84(gr(0), gr(3))

Dim bottomRight() As Double = TransformWGS84(gr(0) + gr(1) * image.RasterXSize, gr(3) + gr(5) * image.RasterXSize)

If (topLeft.Length = 2 And bottomRight.Length = 2) Then

Return New GeoReference(topLeft(0), topLeft(1), bottomRight(0), bottomRight(1))

Else

Return Nothing

End If

image.Dispose()

End Function

Public Shared Function TransformWGS84(ByVal px As Double, ByVal py As Double) As Double()

Dim point() As Double

point = New Double() {0.0, 0.0}

Dim srWGS84 As New SpatialReference("")

srWGS84.SetWellKnownGeogCS("WGS84")

If (image.GetProjection() = "") Then

Return New Double() {}

End If

Dim srCurrent As New SpatialReference(image.GetProjection())

Dim transform As New CoordinateTransformation(srCurrent, srWGS84)

If (transform Is Nothing) Then

Return New Double() {}

End If

Try

transform.TransformPoint(point, px, py, 0)

Catch

Return New Double() {}

End Try

Return point

End Function

 

I'm not sure how I can post the GeoTIFFs - is there free hosting somewhere that people generally use?

Thanks,

Ben

	-----Original Message----- 
	From: Tamas Szekeres [mailto:szekerest@gmail.com] 
	Sent: Mon 4/16/2007 7:59 PM 
	To: Ben Greene 
	Cc: gdal-dev@lists.maptools.org 
	Subject: Re: [Gdal-dev] GDAL C# bindings freezing problem
	
	

	Ben,
	
	Could you post an example code and data to reproduce this problem?
	Which version of the C# bindings you use?
	
	Best regards,
	
	Tamas
	
	
	2007/4/16, Ben Greene <bgreene@rapidmap.com.au>:
	> Hi,
	>
	> I've been trying to modify an existing program to be able to read the georeferencing and image data from geotiffs using GDAL.  The program is written in VB.Net, but for my initial attempt I wrote a library in C#, and used that as a go-between.  I was having frequent crashing issues when the program hit the functions that load the image, so I switched to another library for the image loading stuff (I was also having trouble with indexed images, and it crashed much more often with certain images).
	>
	> I was still having the crashing problems, so I removed the references to my library, and everything worked.  I tried converting my code to VB and integrating it into the original program, but I'm still having the same issue.
	>
	> When the program crashes, it just freezes, taking the debugger with it (when I try to break, the environment freezes.  I then have to kill the process, and the debugger unfreezes).  This happens at different lines throughout the program, and for some images very occasionally (one in 20 executions maybe) won't happen, but with others will work most of the time.  There doesn't seem to be any pattern to the compression used, but larger images seem to be slightly more likley to crash.
	>
	> Has anyone else had similar problems?
	>
	> Cheers
	>
	> _______________________________________________
	> Gdal-dev mailing list
	> Gdal-dev@lists.maptools.org
	> http://lists.maptools.org/mailman/listinfo/gdal-dev
	>
	



From bgreene at rapidmap.com.au  Mon Apr 16 19:28:32 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C# bindings freezing problem
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC64885710@rmg-server03.rmg.local>

I found a file already hosted that will crash my code.
 
The file is:
o41078a5.tif
from
http://dl.maptools.org/dl/geotiff/samples/usgs/ 
 
 
Thanks

	-----Original Message----- 
	From: Tamas Szekeres [mailto:szekerest@gmail.com] 
	Sent: Mon 4/16/2007 7:59 PM 
	To: Ben Greene 
	Cc: gdal-dev@lists.maptools.org 
	Subject: Re: [Gdal-dev] GDAL C# bindings freezing problem
	
	

	Ben,
	
	Could you post an example code and data to reproduce this problem?
	Which version of the C# bindings you use?
	
	Best regards,
	
	Tamas
	
	
	2007/4/16, Ben Greene <bgreene@rapidmap.com.au>:
	> Hi,
	>
	> I've been trying to modify an existing program to be able to read the georeferencing and image data from geotiffs using GDAL.  The program is written in VB.Net, but for my initial attempt I wrote a library in C#, and used that as a go-between.  I was having frequent crashing issues when the program hit the functions that load the image, so I switched to another library for the image loading stuff (I was also having trouble with indexed images, and it crashed much more often with certain images).
	>
	> I was still having the crashing problems, so I removed the references to my library, and everything worked.  I tried converting my code to VB and integrating it into the original program, but I'm still having the same issue.
	>
	> When the program crashes, it just freezes, taking the debugger with it (when I try to break, the environment freezes.  I then have to kill the process, and the debugger unfreezes).  This happens at different lines throughout the program, and for some images very occasionally (one in 20 executions maybe) won't happen, but with others will work most of the time.  There doesn't seem to be any pattern to the compression used, but larger images seem to be slightly more likley to crash.
	>
	> Has anyone else had similar problems?
	>
	> Cheers
	>
	> _______________________________________________
	> Gdal-dev mailing list
	> Gdal-dev@lists.maptools.org
	> http://lists.maptools.org/mailman/listinfo/gdal-dev
	>
	



From dpinte at itae.be  Tue Apr 17 03:44:58 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4623899B.6020600@mapgears.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com> <4623182D.5070509@tkk.fi>
	<4623899B.6020600@mapgears.com>
Message-ID: <1176795898.32665.15.camel@ddp.simpson>

On Mon, 2007-04-16 at 10:35 -0400, Daniel Morissette wrote:
> Ari Jolma wrote:
> > 
> >> I think if we build with VC7.1
> > 
> > Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?
> > 
> 
> I tried a few months ago and it seems to be impossible to find VC 7.1 
> any more. If you find a place where it's still available (I mean 
> legally) then I'd be interested as well.

I don't know if it's legal or not but I still have a full official
installer of the MS VC toolkit 2003 (all you need except the visual
interface). This was available for free on the Windows website.

I can provide the download link if needed.

Didrik


From ari.jolma at tkk.fi  Tue Apr 17 04:39:34 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <1176795898.32665.15.camel@ddp.simpson>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com> <4623182D.5070509@tkk.fi>
	<4623899B.6020600@mapgears.com>
	<1176795898.32665.15.camel@ddp.simpson>
Message-ID: <462487C6.2040606@tkk.fi>

Didrik Pinte kirjoitti:
> I don't know if it's legal or not but I still have a full official
> installer of the MS VC toolkit 2003 (all you need except the visual
> interface). This was available for free on the Windows website.
>
> I can provide the download link if needed.
>   

Are you willing to take the risk? ;)

Yes please,

Ari



From milo at 3dsite.nl  Tue Apr 17 04:44:13 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: OGR C# .NET
Message-ID: <462488DD.6010503@3dsite.nl>

Why revert to VS 2003 and why pay?

A free Visual Studio Express Edition is available for download from 
microsoft. It takes adding the MFC required SDK manually, but offers 
full C++ availability.

Microsoft has a good description on the website on how to add MFC 
support in Visual Studio Express.
I tested this with Virtual terrain project and it worked perfectly.

Kind regards,

Milo van der Linden


From DCarreira at edia.pt  Tue Apr 17 04:46:47 2007
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] ArcSDE Raster Driver for GDAL - displacement of exported
	images
Message-ID: <94C0F903807262438796839A98A9BA50018D42EA@beja001.edia.pt>

Hello all.

I have lost contact with the ArcSDE driver progress and only now noticed
it's included in FWTools 1.2.2 for Windows.

I have tried it on our server 9.1 SP2.

I exported a small window from a raster mosaic, and got a Gtiff file.
The problem is it's displaced about 51m, north-south direction.

The command I used and output is the following:
gdal_translate -of GTiff -projwin 271212 148836 272592 147857
SDE:<host>.edia.pt,5151,database,<user>,<passwd>,<user>.MOSAIC_ORTO_2K_I
GEOE tes
teorto.tif
Input file size is 562500, 800001
Computed -srcwin 553030 12911 3450 2448 from projected window.
0...10...20...30...40...50...60...70...80...90...100 - done.

GDAL then crashes:
AppName: gdal_translate.exe AppVer: 0.0.0.0 ModName: sde91.dll
ModVer: 9.1.0.805 Offset: 00114a19

Are there any other reports like this? Does anyone have an idea of
what's going on?

I have arcsde 9.1 binaries installed as well as ArcGIS 9.2.
The gdal_arcsde.dll is 53,248 bytes and created on Thursday, February
22, 2007, 5:44:37 AM.

Also I exported the same image using ArcSDE command-line utilities with
the following command:
sderaster -o export -l SIG_OWNER2.MOSAIC_ORTO_2K_IGEOE,RASTER -v 1 -f
testesde.tif -e 271212,147857,272592,148836 -i 5151 -s <host> -u <user>
-p <passwd>

One can see the displacement when comparing to gdal's export.

Thanks,
Duarte


From szekerest at gmail.com  Tue Apr 17 05:14:26 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C# bindings freezing problem
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC6488570E@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC6488570E@rmg-server03.rmg.local>
Message-ID: <f3b73b7d0704170214r50ec4295r97e0ac6e434989c8@mail.gmail.com>

Ben,

I've tested the code with FWTools1.2.3. The only problem I've found is
that TransformPoint requires an array with 3 elements, so it should be
initialized as:
point = New Double() {0.0, 0.0, 0.0}

Without this change I got an application error at the end of the
program, the code did not freeze though.

This is just another example that makes me personally frustrated
having array parameters instead of obvious structures and classes in
the GDAL/OGR API. This approach might be converient for the interface
creator in some of the bindings but it's totally confusing for the
users and for some other language implementations.

This issue might be treated locally for the C# interface, but it's not
the suggested way as it brings in additional diversity among the
various languages.

Best regards,

Tamas



2007/4/17, Ben Greene <bgreene@rapidmap.com.au>:
> I was originally using the latest FWTools 1.2.2 binaries (I think that makes it 1.4.0), and then I compiled from the 1.4.1 sources according to the instructions on this site.  When I compiled from sources, the debugger would step into the SWIG wrappers, but I still had the same problem.
>
> Here is the VB code I'm currently using, if you would like the C# code I can probably dig that up too, but the VB is basically a direct translation of it.
>
> Private Shared image As Dataset
>
> Public Shared Function GetGeoReference(ByVal Filename As String) As GeoReference
>
> If Not (Filename Is Nothing) Then
>
> 'Return Nothing
>
> 'if uncommented, the code will not crash
>
> End If
>
> GDAL.gdal.AllRegister()
>
> image = GDAL.gdal.Open(Filename, 0)
>
> If (image Is Nothing) Then
>
> Return Nothing
>
> End If
>
> Dim gr(6) As Double
>
> image.GetGeoTransform(gr)
>
> Dim topLeft() As Double = TransformWGS84(gr(0), gr(3))
>
> Dim bottomRight() As Double = TransformWGS84(gr(0) + gr(1) * image.RasterXSize, gr(3) + gr(5) * image.RasterXSize)
>
> If (topLeft.Length = 2 And bottomRight.Length = 2) Then
>
> Return New GeoReference(topLeft(0), topLeft(1), bottomRight(0), bottomRight(1))
>
> Else
>
> Return Nothing
>
> End If
>
> image.Dispose()
>
> End Function
>
> Public Shared Function TransformWGS84(ByVal px As Double, ByVal py As Double) As Double()
>
> Dim point() As Double
>
> point = New Double() {0.0, 0.0}
>
> Dim srWGS84 As New SpatialReference("")
>
> srWGS84.SetWellKnownGeogCS("WGS84")
>
> If (image.GetProjection() = "") Then
>
> Return New Double() {}
>
> End If
>
> Dim srCurrent As New SpatialReference(image.GetProjection())
>
> Dim transform As New CoordinateTransformation(srCurrent, srWGS84)
>
> If (transform Is Nothing) Then
>
> Return New Double() {}
>
> End If
>
> Try
>
> transform.TransformPoint(point, px, py, 0)
>
> Catch
>
> Return New Double() {}
>
> End Try
>
> Return point
>
> End Function
>
>
>
> I'm not sure how I can post the GeoTIFFs - is there free hosting somewhere that people generally use?
>
> Thanks,
>
> Ben
>
>         -----Original Message-----
>         From: Tamas Szekeres [mailto:szekerest@gmail.com]
>         Sent: Mon 4/16/2007 7:59 PM
>         To: Ben Greene
>         Cc: gdal-dev@lists.maptools.org
>         Subject: Re: [Gdal-dev] GDAL C# bindings freezing problem
>
>
>
>         Ben,
>
>         Could you post an example code and data to reproduce this problem?
>         Which version of the C# bindings you use?
>
>         Best regards,
>
>         Tamas
>
>
>         2007/4/16, Ben Greene <bgreene@rapidmap.com.au>:
>         > Hi,
>         >
>         > I've been trying to modify an existing program to be able to read the georeferencing and image data from geotiffs using GDAL.  The program is written in VB.Net, but for my initial attempt I wrote a library in C#, and used that as a go-between.  I was having frequent crashing issues when the program hit the functions that load the image, so I switched to another library for the image loading stuff (I was also having trouble with indexed images, and it crashed much more often with certain images).
>         >
>         > I was still having the crashing problems, so I removed the references to my library, and everything worked.  I tried converting my code to VB and integrating it into the original program, but I'm still having the same issue.
>         >
>         > When the program crashes, it just freezes, taking the debugger with it (when I try to break, the environment freezes.  I then have to kill the process, and the debugger unfreezes).  This happens at different lines throughout the program, and for some images very occasionally (one in 20 executions maybe) won't happen, but with others will work most of the time.  There doesn't seem to be any pattern to the compression used, but larger images seem to be slightly more likley to crash.
>         >
>         > Has anyone else had similar problems?
>         >
>         > Cheers
>         >
>         > _______________________________________________
>         > Gdal-dev mailing list
>         > Gdal-dev@lists.maptools.org
>         > http://lists.maptools.org/mailman/listinfo/gdal-dev
>         >
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From artur.redzko at tatukgis.com  Tue Apr 17 07:10:12 2007
From: artur.redzko at tatukgis.com (Artur Redzko)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C API in Delphi
Message-ID: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal14.def.zip
Type: application/x-zip-compressed
Size: 3663 bytes
Desc: gdal14.def.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070417/2d7b723f/gdal14.def.bin
From seth at pricepages.org  Tue Apr 17 11:03:21 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Constant width using gdalwarp?
In-Reply-To: <30FCC830-29C1-45AE-AE8C-C4A1C3216BDC@pricepages.org>
References: <30FCC830-29C1-45AE-AE8C-C4A1C3216BDC@pricepages.org>
Message-ID: <DF0A1BEF-D3E4-43AA-B6A9-B967DF89DEB5@pricepages.org>

Anyone? Will I just need to manually calculate the expected image px  
dimensions? Why is the "-tr" flag not working as expected?
Thanks,
Seth


On Apr 15, 2007, at 12:11 PM, Seth Price wrote:

> Let me start off by saying that GDAL is excellent. Big thanks. :)
>
> I am reprojecting a set of 14400x14400px lat/long images to 14400px  
> wide, and the image height depends on the latitude. The output  
> projection is Mercator. My intent is to only interpolate pixels in  
> one direction, so the output image will be a bit sharper along the  
> x direction.
>
> I thought I could do this with the "-tr" flag, but the width is  
> changing depending on the latitude. Out of the two latitudes I've  
> tried, I'm getting images 14400px wide and 14399px wide.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From warmerdam at pobox.com  Tue Apr 17 11:40:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Constant width using gdalwarp?
In-Reply-To: <30FCC830-29C1-45AE-AE8C-C4A1C3216BDC@pricepages.org>
References: <30FCC830-29C1-45AE-AE8C-C4A1C3216BDC@pricepages.org>
Message-ID: <931f8ea90704170840p1e1b5aa1gf95aba8df35be736@mail.gmail.com>

On 4/15/07, Seth Price <seth@pricepages.org> wrote:
> Let me start off by saying that GDAL is excellent. Big thanks. :)
>
> I am reprojecting a set of 14400x14400px lat/long images to 14400px
> wide, and the image height depends on the latitude. The output
> projection is Mercator. My intent is to only interpolate pixels in
> one direction, so the output image will be a bit sharper along the x
> direction.
>
> I thought I could do this with the "-tr" flag, but the width is
> changing depending on the latitude. Out of the two latitudes I've
> tried, I'm getting images 14400px wide and 14399px wide.

Seth,

I'm really not clear enough on the details to understand what is or
isn't working here.  Perhaps you could provide the gdalinfo report
on the input file, the gdalinfo report on the output file, and the
exact gdalwarp command you used.

If you are getting 14399 when you expect 14400 it seems likely there
is some sort of rounding off issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at tkk.fi  Tue Apr 17 14:11:07 2007
From: ari.jolma at tkk.fi (ari.jolma@tkk.fi)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL C API in Delphi
In-Reply-To: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>
Message-ID: <46250DBB.60508@tkk.fi>

Artur Redzko kirjoitti:
>
> Hi
>
>  
>
> Finally I managed to solve a problem with binding GDAL C API in 
> Delphi. I attach a DEF file that must be used as a link option to make 
> C API visible under Delphi.
>

I used a similar def -file with MinGW, although I had to tweak its 
dlltool to understand aliases (interestingly) similarly as in your file. 
In addition I had to add very cryptic looking aliases for the Colortable 
C++ class. The linking went ok and the Windows debug tools told that 
there were no undefined references, but (as I wrote Sunday evening) the 
execution ended in "illegal instruction".

Regards,

Ari


From mateusz at loskot.net  Tue Apr 17 14:26:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: GDAL C API in Delphi
In-Reply-To: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>
Message-ID: <4625115C.5050907@loskot.net>

Artur Redzko wrote:
> 
> I hope that dev team will make use of this and import it gracefully
> into GDAL sources for further tests.

Frank,

Should I try to include Artur's solution and DEF file to GDAL ?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 15:30:49 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46228B31.4030405@pobox.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<46228B31.4030405@pobox.com>
Message-ID: <46252069.60608@loskot.net>

Frank Warmerdam wrote:
> Howard Butler wrote:
>> I think an "official" Windows GDAL release should have the following
>> traits:
>> - All optional drivers built as plugins and all other drivers built in
>> - No scripting bindings
>> - No Python utilities
>> - Include the .lib files
> 
> Howard,
> 
> Presumably it would also include the include files?  By .lib files to you
> just mean the stub library for the DLL or static libraries as well?  I'd
> rather avoid static libraries which are much harder to arrange on windows
> when there are dependencies, and where are very sensitive to difference in
> compiler version, and build options.  The C API used from a DLL should be
> fairly save across compiler versions and mixes of build options.
> 
> So where do we go from here?  Should we get Mateusz to prepare initial
> binaries for 1.4.1 based on the suggested pattern?

Folks,

What compiler should we use to prepare official binaries for Windows?

I have only legal copy of Visual C++ 2005 Professional.
I don't have 2003 or may be I could have it if we are OK to use Visual
C++ 2003 Toolkig (already deprecated by Microsoft).
Unfortunately, I don't have any access to Visual C++ 6.0.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 15:45:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
Message-ID: <462523E3.9030609@loskot.net>

Tamas Szekeres wrote:
> Can someone confirm that the usage of the different CRT heaps will not
> cause memory related problems when compiling the code using different
> compiler installations.

Tamas,

I believe no one will confirm that.

> (Is the GDAL C API capable to pass memory
> segments being allocated and released on different sides?)

No, it isn't and it is not recommended practice,
as explained in FAQ #14:
http://www.gdal.org/faq.html

Also, here is more detailed discussion of this subject:

http://support.microsoft.com/kb/q140584/
http://msdn2.microsoft.com/en-us/library/abx4dbyh(VS.80).aspx

> Which default options to use the makefile?

It's not a trivial problem.
Personally, I believe in /MD and embedding manifest in binary.

> There are some further issues should also be considered, like:
> 
> 1. Provide support for WIN64 images

Not trivial but feasible.

> 2. Possible issues related to embedding manifests in a multi-compiler
> environment (VC2003, VC2005)

Yes, that's another kind of DLL Hell.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 15:57:46 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4622B5A5.6050706@pobox.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com>
Message-ID: <462526BA.60905@loskot.net>

Frank Warmerdam wrote:
> Tamas Szekeres wrote:
>> I also have some doubts how to create an unique compilation that is
>>  suitable for all of the applications and the various needs. Can
>> someone confirm that the usage of the different CRT heaps will not 
>> cause memory related problems when compiling the code using
>> different compiler installations. (Is the GDAL C API capable to
>> pass memory segments being allocated and released on different
>> sides?)
> 
> Generally speaking if you use the C API I *think* there should be no
> cross-heap / cross-runtime problems but I'm not 100% sure of this 
> myself.

Right, I wasn't precise in my previous reply.
As long as the user will use the API but not manually free/malloc
objects, then everything should be fine.

> I'm imagining shipping a core built with VC7.1.

Personally, I'm not sure about this choice.
Microsoft has migrated to manifest-based metadata about binary
dependencies and manifest may be required in some situations,
perhaps by .NET 2 and higher etc.

AFAIK, it's better to have manifest, even if it's not used,
than to not to have it.

>> There are some further issues should also be considered, like:
>> 
>> 1. Provide support for WIN64 images
> 
> I'd like to suggest we put off WIN64 native support binaries till we 
> have a good handle on 32bit builds, and till WIN64 is in wider use.
> 
>> 2. Possible issues related to embedding manifests in a
>> multi-compiler environment (VC2003, VC2005)
> 
> I think if we build with VC7.1 we don't need to worry about
> manifests.

If a user will use GDAL with components from Visual Studio 2005, then I
suppose we will need to provide manifest or ship CRT libraries together
with GDAL binaries.

> If we were to build the core with VC8 I think we would want to embed
> the manifests as the makefiles do now.  But I get quite confused
> about how DLL searching works with manifests in the picture.

Manifest is used by loader on Windows to locate and load appropriate
module that an application depends on.
The manifest includes version and architecture details about particular
dependency, which later is used to locate appropriate module in cache
or load it. Also, the concept of manifest is required to support so
called "isolation" of applications, private and shared dependencies, etc.

It's possible to embed manifest inside a binary in RS_MANIFEST resource
block or provide it as a separate file.
Since 2005, *all* binaries have to have manifest included (embedded or
as external file).

Here is long story about it:
http://www.grimes.demon.co.uk/workshops/fusWSThirteen.htm

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 16:02:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4623899B.6020600@mapgears.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>	<4623182D.5070509@tkk.fi>
	<4623899B.6020600@mapgears.com>
Message-ID: <462527DD.9020007@loskot.net>

Daniel Morissette wrote:
> Ari Jolma wrote:
>>
>>> I think if we build with VC7.1
>>
>> Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?
>>
> 
> I tried a few months ago and it seems to be impossible to find VC 7.1
> any more. If you find a place where it's still available (I mean
> legally) then I'd be interested as well.

Daniel,

It's still possible to download Visual C++ 2003 Toolkit from some P2P
networks etc.
It's a first free version of Visual C++ compiler, father of Visual C++
2005 Expression Edition.
The Toolkit does not include any IDE, but can be used from
command line,  NMAKE, etc.

Here is more info:
http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_.NET_2003

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 16:04:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <1176795898.32665.15.camel@ddp.simpson>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<4623182D.5070509@tkk.fi>	<4623899B.6020600@mapgears.com>
	<1176795898.32665.15.camel@ddp.simpson>
Message-ID: <4625283F.40000@loskot.net>

Didrik Pinte wrote:
> On Mon, 2007-04-16 at 10:35 -0400, Daniel Morissette wrote:
>> Ari Jolma wrote:
>>>> I think if we build with VC7.1
>>> Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?
>>>
>> I tried a few months ago and it seems to be impossible to find VC 7.1 
>> any more. If you find a place where it's still available (I mean 
>> legally) then I'd be interested as well.
> 
> I don't know if it's legal or not but I still have a full official
> installer of the MS VC toolkit 2003 (all you need except the visual
> interface). This was available for free on the Windows website.
> 
> I can provide the download link if needed.

Unoficially, it's legal :-)
AFIK, it doesn't matter from where you have the Toolkit.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 16:15:56 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <462527DD.9020007@loskot.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>	<4623182D.5070509@tkk.fi>	<4623899B.6020600@mapgears.com>
	<462527DD.9020007@loskot.net>
Message-ID: <46252AFC.2000402@loskot.net>

Mateusz Loskot wrote:
> Daniel Morissette wrote:
>> Ari Jolma wrote:
>>>> I think if we build with VC7.1
>>> Where can one get (even buy) VC7.1 (aka Visual C++ .NET 2003)?
>>>
>> I tried a few months ago and it seems to be impossible to find VC 7.1
>> any more. If you find a place where it's still available (I mean
>> legally) then I'd be interested as well.
> 
> Daniel,
> 
> It's still possible to download Visual C++ 2003 Toolkit from some P2P
> networks etc.
> It's a first free version of Visual C++ compiler, father of Visual C++
> 2005 Expression Edition.

What I was thinking about... :-)

Visual C++ 2005 Express Edition

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Tue Apr 17 16:25:49 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46252069.60608@loskot.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>
	<46252069.60608@loskot.net>
Message-ID: <46252D4D.9050100@ualg.pt>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>   
>> Howard Butler wrote:
>>     
>>> I think an "official" Windows GDAL release should have the following
>>> traits:
>>> - All optional drivers built as plugins and all other drivers built in
>>> - No scripting bindings
>>> - No Python utilities
>>> - Include the .lib files
>>>       
>> Howard,
>>
>> Presumably it would also include the include files?  By .lib files to you
>> just mean the stub library for the DLL or static libraries as well?  I'd
>> rather avoid static libraries which are much harder to arrange on windows
>> when there are dependencies, and where are very sensitive to difference in
>> compiler version, and build options.  The C API used from a DLL should be
>> fairly save across compiler versions and mixes of build options.
>>
>> So where do we go from here?  Should we get Mateusz to prepare initial
>> binaries for 1.4.1 based on the suggested pattern?
>>     
>
> Folks,
>
> What compiler should we use to prepare official binaries for Windows?
>
> I have only legal copy of Visual C++ 2005 Professional.
> I don't have 2003 or may be I could have it if we are OK to use Visual
> C++ 2003 Toolkig (already deprecated by Microsoft).
> Unfortunately, I don't have any access to Visual C++ 6.0.
>   

Hi,
Have you considered using Intel compilers?
Here you can get a 1 month working demo.
http://www3.intel.com/cd/software/products/asmo-na/eng/compilers/cwin/279578.htm

A test case that I'm working with showed a dramatic reduction in running 
time using this compiler.
from 2 min 50 sec (exe compiled with MSVC6) to 1:50

Joaquim Luis

From mateusz at loskot.net  Tue Apr 17 16:38:34 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46252D4D.9050100@ualg.pt>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>	<46252069.60608@loskot.net>
	<46252D4D.9050100@ualg.pt>
Message-ID: <4625304A.5020201@loskot.net>

Joaquim Luis wrote:
> Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>> 
>>> Howard Butler wrote:
>>> 
>>>> I think an "official" Windows GDAL release should have the
>>>> following traits: - All optional drivers built as plugins and
>>>> all other drivers built in - No scripting bindings - No Python
>>>> utilities - Include the .lib files
>>>> 
>>> Howard,
>>> 
>>> Presumably it would also include the include files?  By .lib
>>> files to you just mean the stub library for the DLL or static
>>> libraries as well?  I'd rather avoid static libraries which are
>>> much harder to arrange on windows when there are dependencies,
>>> and where are very sensitive to difference in compiler version,
>>> and build options.  The C API used from a DLL should be fairly
>>> save across compiler versions and mixes of build options.
>>> 
>>> So where do we go from here?  Should we get Mateusz to prepare
>>> initial binaries for 1.4.1 based on the suggested pattern?
>>> 
>> 
>> Folks,
>> 
>> What compiler should we use to prepare official binaries for
>> Windows?
>> 
>> I have only legal copy of Visual C++ 2005 Professional. I don't
>> have 2003 or may be I could have it if we are OK to use Visual C++
>> 2003 Toolkig (already deprecated by Microsoft). Unfortunately, I
>> don't have any access to Visual C++ 6.0.
>> 
> 
> Hi, Have you considered using Intel compilers? Here you can get a 1
> month working demo. 
> http://www3.intel.com/cd/software/products/asmo-na/eng/compilers/cwin/279578.htm
> 
Joaquim,

I used it for Windows CE platform and it wasn't much better than
eMbedded Visual C++ 4.0 (the same compiler as Visual C++ 6.0).
It was like 1:1.

> A test case that I'm working with showed a dramatic reduction in
> running time using this compiler. from 2 min 50 sec (exe compiled
> with MSVC6) to 1:50

It's not a surprise, because Visual C++ 6.0 is a dinosaur and it doesn't
fit well to modern CPUs regarding optimization.

Have you tried Visual C++ 8.0 or at least 7.1?

Another subject is that it costs ~400 USD or so :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Tue Apr 17 17:12:57 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4625304A.5020201@loskot.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>	<46252069.60608@loskot.net>
	<46252D4D.9050100@ualg.pt> <4625304A.5020201@loskot.net>
Message-ID: <46253859.7000003@ualg.pt>

Mateusz Loskot wrote:
>> A test case that I'm working with showed a dramatic reduction in
>> running time using this compiler. from 2 min 50 sec (exe compiled
>> with MSVC6) to 1:50
>>     
>
> It's not a surprise, because Visual C++ 6.0 is a dinosaur and it doesn't
> fit well to modern CPUs regarding optimization.
>
> Have you tried Visual C++ 8.0 or at least 7.1?
>   

Mateusz,
OK, I tried with 7.1 as well.
The times are now
2:25 min (VC6)
2:05 min (VC7.1)
1:20 min (Intel)

This is with a code that was originally in f77 and that I converted to C 
with f2c. I have
been working on it and that's why the times have changed from the 
figures I posted earlier.

A side, very irritating, note. With the fortran Intel compiler that same 
code takes 1:05 min


> Another subject is that it costs ~400 USD or so :-)
>   
I strong argument indeed.

Cheers

Joaquim


From davemaster99 at hotmail.com  Tue Apr 17 17:35:49 2007
From: davemaster99 at hotmail.com (=?iso-8859-1?B?RGF2aWQgRWztYXMgRmxvcmVzIEVzY2FsYW50ZQ==?=)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46253859.7000003@ualg.pt>
Message-ID: <BAY20-F9FE9456B0D10255DA9EC8C5510@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070417/30a34152/attachment.html
From mateusz at loskot.net  Tue Apr 17 17:51:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [OT] Re: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46253859.7000003@ualg.pt>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>	<46252069.60608@loskot.net>
	<46252D4D.9050100@ualg.pt> <4625304A.5020201@loskot.net>
	<46253859.7000003@ualg.pt>
Message-ID: <46254153.1060702@loskot.net>

Joaquim Luis wrote:
> Mateusz Loskot wrote:
>>> A test case that I'm working with showed a dramatic reduction in 
>>> running time using this compiler. from 2 min 50 sec (exe compiled
>>> with MSVC6) to 1:50
>>> 
>> 
>> It's not a surprise, because Visual C++ 6.0 is a dinosaur and it 
>> doesn't fit well to modern CPUs regarding optimization.
>> 
>> Have you tried Visual C++ 8.0 or at least 7.1?
>> 
> 
> Mateusz, OK, I tried with 7.1 as well. The times are now 2:25 min 
> (VC6) 2:05 min (VC7.1) 1:20 min (Intel)

Joaquim,

Please, show compilation options you used for every test
case + source code, otherwise I'm not able to compare it.
Your result does also depend on your hardware and many other factors.
"It's still very relative" as one guru said
(http://www.coyotegulch.com/reviews/linux_compilers/)

My opinion in short: Visual C++ 8.0 is a very well optimizing compiler.
Run-time differences between GCC, Intel C/C++ and Visual C++ are almost
unnoticeable for a common user, because all these compiler perform very
well and nowadays we won't observe anything
like "GCC is 2 x slower than Intel".
The situation is different on particular platform, with very
specific settings for run-time and memory optimization, on a very
specific hardware like embedded devices with "hardware specific"
limitations.

IMHO, today we need good and comparable support of C/C++ language
implementation more, provided by all compilers on the market.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 17:53:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <BAY20-F9FE9456B0D10255DA9EC8C5510@phx.gbl>
References: <BAY20-F9FE9456B0D10255DA9EC8C5510@phx.gbl>
Message-ID: <462541C4.6080701@loskot.net>

David El?as Flores Escalante wrote:
> Hi all, how about a version for mingw c++ compilers, it costs $0.00
> is there a gdal for those compilers??

David,

AFAIK, MinGW is not officially supported but it's usable after some
small hacks in makefiles, ask Norman Vine he is the MinGW guru here :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Chris.Barker at noaa.gov  Tue Apr 17 17:58:41 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46252D4D.9050100@ualg.pt>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<46228B31.4030405@pobox.com> <46252069.60608@loskot.net>
	<46252D4D.9050100@ualg.pt>
Message-ID: <46254311.1040403@noaa.gov>

Joaquim Luis wrote:
> Have you considered using Intel compilers?

are they link-compatible with the MS ones?

> 1:20 min (Intel)

> A side, very irritating, note. With the fortran Intel compiler that same 
> code takes 1:05 min

No surprise, Fortran is fast, if nothing else. Why convert to C?

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From lijian.shi at und.nodak.edu  Tue Apr 17 18:06:07 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Transform Line String into Polygon with ogr2ogr
Message-ID: <0JGN0086NXE7PW30@mailmx1.und.nodak.edu>

Hi, 

 

I have a shp file with Line String geometry type. Actually these lines are
polygon because the coordinate values of line string's first point are same
with them of line string's last one. Now I want to transform this shp into a
new one with polygon and I use command "ogr2ogr" as:

 

ogr2ogr new.shp old.shp -nlt POLYGON

 

But there are some errors as followed:

 

ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to type
shapefile.

ERROR 1: Terminating translation prematurely after failed

Translation of layer zones

 

Can I use this "ogr2ogr" to convert LINESTRING into POLYGON? If yes, what's
the problem with my command? 

 

Thanks in advance,

 

Lijian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070417/6aafd1e8/attachment.html
From Chris.Barker at noaa.gov  Tue Apr 17 18:09:15 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46252069.60608@loskot.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<46228B31.4030405@pobox.com> <46252069.60608@loskot.net>
Message-ID: <4625458B.8050009@noaa.gov>

Mateusz Loskot wrote:
> Folks,
> 
> What compiler should we use to prepare official binaries for Windows?

The standard Python build (python.org) uses VS2003 (I'm pretty sure), so 
there's a reason to stick with that.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mateusz at loskot.net  Tue Apr 17 18:07:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46254311.1040403@noaa.gov>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>
	<46252069.60608@loskot.net>	<46252D4D.9050100@ualg.pt>
	<46254311.1040403@noaa.gov>
Message-ID: <4625451A.4020503@loskot.net>

Christopher Barker wrote:
> Joaquim Luis wrote:
>> Have you considered using Intel compilers?
> 
> are they link-compatible with the MS ones?

Christopher,

Yes, the Intel C/C++ uses name mangling scheme compatible with
that one used by Visual C++.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Apr 17 18:17:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4625458B.8050009@noaa.gov>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<46228B31.4030405@pobox.com> <46252069.60608@loskot.net>
	<4625458B.8050009@noaa.gov>
Message-ID: <46254766.90304@loskot.net>

Christopher Barker wrote:
> Mateusz Loskot wrote:
>> Folks,
>> 
>> What compiler should we use to prepare official binaries for 
>> Windows?
> 
> The standard Python build (python.org) uses VS2003 (I'm pretty sure),
>  so there's a reason to stick with that.

Christopher,

Yes, you're right and that's a very strong argument.
Although, AFAIK recently Tamas has managed to run autotest scripts
against GDAL built with Visual C++ 8.0, using official Python 2.4 binaries.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Tue Apr 17 18:26:56 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46254311.1040403@noaa.gov>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>
	<46252069.60608@loskot.net>	<46252D4D.9050100@ualg.pt>
	<46254311.1040403@noaa.gov>
Message-ID: <462549B0.6000803@ualg.pt>

Christopher Barker wrote:
> Joaquim Luis wrote:
>> Have you considered using Intel compilers?
>
> are they link-compatible with the MS ones?
>
>> 1:20 min (Intel)
>> A side, very irritating, note. With the fortran Intel compiler that 
>> same code takes 1:05 min

> No surprise, Fortran is fast, if nothing else. Why convert to C?

Because I want to have dynamic allocation memory and I don't know f90.

P.S. I sent my example case to Mateusz so that he can test it as well.

Joaquim

From jluis at ualg.pt  Tue Apr 17 18:37:38 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46254311.1040403@noaa.gov>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<46228B31.4030405@pobox.com>
	<46252069.60608@loskot.net>	<46252D4D.9050100@ualg.pt>
	<46254311.1040403@noaa.gov>
Message-ID: <46254C32.5070101@ualg.pt>

Christopher Barker wrote:
> Joaquim Luis wrote:
>> Have you considered using Intel compilers?
>> 1:20 min (Intel)
>> A side, very irritating, note. With the fortran Intel compiler that 
>> same code takes 1:05 min
>
> No surprise, Fortran is fast, if nothing else. Why convert to C?

Because I want to have dynamic allocation memory and I don't know f90.

P.S. I sent my example case to Mateusz so that he can test it as well.

Joaquim

From milo at 3dsite.nl  Tue Apr 17 18:53:06 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Proposal for Unified Windows Binaries
Message-ID: <46254FD2.3000202@3dsite.nl>

I probably mentioned this in response to the wrong topic;

Commiting to *Visual Studio Express* seems the best method to me.

It's free for everyone to get and fully dotnet 2.0 compatible. This way 
no one has to invest big money to get up and going on Windows!
It takes a bit of work but is documented; VC++ in Visual Studio Express 
doesn't ship with MFC support, you have to download the MFC SDK, do some 
little tricks and you're up and running

Hope this tought is appreciated.

Milo van der Linden

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070418/9bb4e6e1/attachment.html
From ivan.lucena at pmldnet.com  Tue Apr 17 19:11:19 2007
From: ivan.lucena at pmldnet.com (Iva Lucena)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46254766.90304@loskot.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu><46228B31.4030405@pobox.com>
	<46252069.60608@loskot.net><4625458B.8050009@noaa.gov>
	<46254766.90304@loskot.net>
Message-ID: <000a01c78145$b63658d0$0a0a0a0a@idrisi.clarku.edu>

Mateusz, Tamas,

> against GDAL built with Visual C++ 8.0, using official Python 2.4
binaries.

When you say official 2.4 binaries you mean downloaded from python.org:
http://www.python.org/download/releases/2.4.4/ ?

That is great, I almost moving back to VS 2003 just because I can't deliver
GDAL 1.4.1 with Python for people that need it, in the same way I as used to
do with GDAL 1.3.2 in an InnoSetup installation.

Cheers,

Ivan



-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Tuesday, April 17, 2007 6:17 PM
To: Christopher Barker
Cc: gdal-dev
Subject: Re: [Gdal-dev] Proposal for Unified Windows Binaries

Christopher Barker wrote:
> Mateusz Loskot wrote:
>> Folks,
>> 
>> What compiler should we use to prepare official binaries for 
>> Windows?
> 
> The standard Python build (python.org) uses VS2003 (I'm pretty sure),
>  so there's a reason to stick with that.

Christopher,

Yes, you're right and that's a very strong argument.
Although, AFAIK recently Tamas has managed to run autotest scripts
against GDAL built with Visual C++ 8.0, using official Python 2.4 binaries.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Tue Apr 17 19:17:47 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: Proposal for Unified Windows Binaries
In-Reply-To: <46254FD2.3000202@3dsite.nl>
References: <46254FD2.3000202@3dsite.nl>
Message-ID: <4625559B.3020500@loskot.net>

Milo van der Linden wrote:
> I probably mentioned this in response to the wrong topic;
> 
> Commiting to *Visual Studio Express* seems the best method to me.
> 

Milo,

Sure, personally I'm OK with this option.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Tue Apr 17 19:58:04 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <462526BA.60905@loskot.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<462526BA.60905@loskot.net>
Message-ID: <46255F0C.70608@perkins.net>

Mateusz Loskot wrote:
> It's possible to embed manifest inside a binary in RS_MANIFEST resource
> block or provide it as a separate file.
> Since 2005, *all* binaries have to have manifest included (embedded or
> as external file).
>   

Note that in my experience, there are situations where you MUST embed 
the manifest into a DLL or things won't work. It's not enough to include 
the manifest as a separate file in the same directory.

> Here is long story about it:
> http://www.grimes.demon.co.uk/workshops/fusWSThirteen.htm
>   

A good discussion! It seems to suggest that manifest embedding is 
required for private DLLs, but not necessarily shared DLLs. I imagine 
that most distributors of windows apps using GDAL will be using private 
assemblies - there's much less tendency to share 3rd party "shared 
libraries" on windows than on linux.

Cheers,

Sy


From sy at perkins.net  Tue Apr 17 20:03:35 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46255F0C.70608@perkins.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<462526BA.60905@loskot.net> <46255F0C.70608@perkins.net>
Message-ID: <46256057.60200@perkins.net>

BTW, I'd like to put in my vote for using Visual Studio 2005 Express for 
pre-compiled windows binaries. It's free, up to date (at least until 
Visual Studio Orcas comes out later this year), actually available 
(unlike VS 2003), includes a proper optimizing compiler, and is 
generally a nicer bit of software than VS 2003. The manifest thing 
should be taken care of by the GDAL makefiles.

Cheers,

Sy


From mateusz at loskot.net  Wed Apr 18 01:19:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <000a01c78145$b63658d0$0a0a0a0a@idrisi.clarku.edu>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu><46228B31.4030405@pobox.com>
	<46252069.60608@loskot.net><4625458B.8050009@noaa.gov>
	<46254766.90304@loskot.net>
	<000a01c78145$b63658d0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <4625AA70.2030508@loskot.net>

Iva Lucena wrote:
> Mateusz, Tamas,
> 
>> against GDAL built with Visual C++ 8.0, using official Python 2.4
> binaries.
> 
> When you say official 2.4 binaries you mean downloaded from 
> python.org: http://www.python.org/download/releases/2.4.4/ ?

Ivan,

Yes, that one.

> That is great, I almost moving back to VS 2003 just because I can't 
> deliver GDAL 1.4.1 with Python for people that need it, in the same 
> way I as used to do with GDAL 1.3.2 in an InnoSetup installation.

I configured Buildbot according Tamas' instructions and here you can see
that GDAL tests, Python scripts, run with GDAL built using VC++ 8.0
under Windows:

- the builder
http://buildbot.osgeo.org:8500/szekerest-vc80-quick

- the test run
http://buildbot.osgeo.org:8500/szekerest-vc80-quick/builds/53/step-test/0


The trick includes two steps:

1. Add manifest location to the PATH:
C:\Program Files (x86)\Microsoft Visual Studio
8\VC\redist\amd64\Microsoft.VC80.CRT;

2. Run Python using absolute path:

C:\Python24_x64\python.exe run_all.py

The paths above are for VC++ 8.0 on x64 Windows, becuase
the szekerest-vc80-gdal builder is hosted on x64, but it should be easy
to change them to x86 version.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Wed Apr 18 01:48:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <462541C4.6080701@loskot.net>
References: <BAY20-F9FE9456B0D10255DA9EC8C5510@phx.gbl>
	<462541C4.6080701@loskot.net>
Message-ID: <4625B119.30506@tkk.fi>

Mateusz Loskot kirjoitti:
> David El?as Flores Escalante wrote:
>   
>> Hi all, how about a version for mingw c++ compilers, it costs $0.00
>> is there a gdal for those compilers??
>>     
>
> David,
>
> AFAIK, MinGW is not officially supported but it's usable after some
> small hacks in makefiles, ask Norman Vine he is the MinGW guru here :-)
>   

GDAL configures and compiles without any problems under MSYS + MinGW - 
but you need to use the latest binutils (see my notes and links at 
http://geoinformatics.tkk.fi/twiki/bin/view/Main/InstallingWithMinGW#GDAL).

However, I haven't so far been able to compile (Perl) bindings with 
MinGW against binary GDAL compiled with VC7.1.

Ari

> Cheers
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Wed Apr 18 01:50:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] GDAL maintenance biweekly report - No. 3
Message-ID: <4625B193.9080008@loskot.net>

Hi,

Here is the 3rd bi-weekly report, it includes only ~6 of 10
work days and the rest of time I was traveling a bit.

== Resolved issues ==

#738 It seems OGR uses reference counting inconsistently,
     what result in memory leak
http://trac.osgeo.org/gdal/ticket/738

#755 minixml - can't read complex DOCTYPE elements
http://trac.osgeo.org/gdal/ticket/755

#1412 Schema names are not quoted by OGR tools (ogrinfo/ogr2ogr) when
      using PostGIS as datasource
http://trac.osgeo.org/gdal/ticket/1412

#1497 Use EnhancedPrecisionOp? for difference and intersection
      operations
http://trac.osgeo.org/gdal/ticket/1497

#1534 OGR GML reader fails if file has UTF-8 BOM prefix
http://trac.osgeo.org/gdal/ticket/1534

#1537 ogr_sql: FID not usable in WHERE clause
http://trac.osgeo.org/gdal/ticket/1534

#1539 Setup Nightly Snapshots
http://trac.osgeo.org/gdal/ticket/1534

#1556 Missing recent CPLString improvements in branches/1.4
http://trac.osgeo.org/gdal/ticket/1556

#1566 Proposal of gdalsplit utility
http://trac.osgeo.org/gdal/ticket/1566

#1572 PG incorrectly recognizes layers from non-default schema
http://trac.osgeo.org/gdal/ticket/1572

== Analysed and discussed issues ==

#770 Specify proj4text in spatial_ref_sys table of PostGIS
http://trac.osgeo.org/gdal/ticket/770

#952 Array bounds error
http://trac.osgeo.org/gdal/ticket/952

#976 Wrong OGR2OGR conversion
http://trac.osgeo.org/gdal/ticket/976

#1442 Feature.GetFieldAsInteger? does not behave correctly
      on non existant field
http://trac.osgeo.org/gdal/ticket/1442

#1507 GDALRasterIO crashes for width values higher than 2048
      with LZW enabled
http://trac.osgeo.org/gdal/ticket/1507

== Other activities ==

* Updated tests:
  * minixml.py
  * ogr_sql.py
  * ogr_gml.py
  * fast.py
  * hfa.py

* Configured autotest package under Windows with Visual C++ 8.0 builds
and native Python binaries

* Testing beta and stable versions of 1.4.1 release

* Around 60 e-mails to the gdal-dev and around 20 off-list with
support to users

* A few hours on the #gdal channel

* Prepared GDAL binaries on request from Windows users

* New pages on Wiki

* A few tasks about administration of Trac, Buildbot and GDAL website


The whole collection of bi-weekly reports is available on the Wiki:

http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByMateusz2007

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Wed Apr 18 01:59:42 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46256057.60200@perkins.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com> <462526BA.60905@loskot.net>
	<46255F0C.70608@perkins.net> <46256057.60200@perkins.net>
Message-ID: <4625B3CE.9060104@tkk.fi>

Simon Perkins kirjoitti:
> BTW, I'd like to put in my vote for using Visual Studio 2005 Express 
> for pre-compiled windows binaries. It's free, up to date (at least 
> until Visual Studio Orcas comes out later this year), actually 
> available (unlike VS 2003), includes a proper optimizing compiler, and 
> is generally a nicer bit of software than VS 2003. The manifest thing 
> should be taken care of by the GDAL makefiles.

This (from Wikipedia) worries me:

"Unfortunately, the Express Edition does not include the Visual C++ 
Redistributables and the SP1 version of the redistributables cannot be 
downloaded from Microsoft. This causes deployment problems when using 
Visual C++ 2005 Express Service Pack 1. For example, a "hello world" 
console program (compiled with default settings) will not run on a PC 
that does not already have Visual C++ 2005 Express SP1."

Is it really a working solution? A sidenote: I downloaded it, installed 
it, and then removed it manually (I know, bad habit) from this W2000 
box, now it complains in installation and it seems to require, if not 
reinstallation if Windows, at least some complicated hacks.

At least we should make sure that it is possible to build the bindings 
with other tools against the official GDAL binaries. I think that was 
one of the Howard's original ideas that the bindings wouldn't be in the 
main binary distribution.

I'd put my vote on MinGW (i.e., gcc) for the official Windows binary 
distribution.

Regards,

Ari


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Wed Apr 18 02:03:29 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4625B119.30506@tkk.fi>
References: <BAY20-F9FE9456B0D10255DA9EC8C5510@phx.gbl>	<462541C4.6080701@loskot.net>
	<4625B119.30506@tkk.fi>
Message-ID: <4625B4B1.1050108@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot kirjoitti:
>> David El?as Flores Escalante wrote:
>> 
>>> Hi all, how about a version for mingw c++ compilers, it costs
>>> $0.00 is there a gdal for those compilers??
>>> 
>> 
>> David,
>> 
>> AFAIK, MinGW is not officially supported but it's usable after some
>>  small hacks in makefiles, ask Norman Vine he is the MinGW guru
>> here :-)
>> 
> 
> GDAL configures and compiles without any problems under MSYS + MinGW
> - but you need to use the latest binutils (see my notes and links at 
> http://geoinformatics.tkk.fi/twiki/bin/view/Main/InstallingWithMinGW#GDAL).
> 
Ari,

Do you mind if I'd put your notes to the Wiki?

> However, I haven't so far been able to compile (Perl) bindings with 
> MinGW against binary GDAL compiled with VC7.1.

There is a chance to change this situation, because as you can read
here: http://trac.osgeo.org/gdal/ticket/100
with GDAL 1.5.0 is going to be "officially" supported :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From artur.redzko at tatukgis.com  Wed Apr 18 03:40:47 2007
From: artur.redzko at tatukgis.com (Artur Redzko)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] RE: GDAL C API in Delphi
In-Reply-To: <4625115C.5050907@loskot.net>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>
	<4625115C.5050907@loskot.net>
Message-ID: <DC65EB3D6F198B4F93900800424A9CD677911B@MONTANA.tatukgis.com>

Thanks for reply. I hope Frank will agree to add this feature. If he does, please check def file if it's complete:
- Someone posted info about missing color table access in C API,
- I also noticed new functions with RAT prefix, 
- Maybe additional memory management functions like alloc and free should be added to C API to avoid memory crashes. 

I used different GDAL versions including latest daily that's why I prefer to test this feature. I'll also try to prepare a test app in Delphi to test DEF file and C API binding for all function names.

Hoping to include DEF feature successfully into GDAL.. 

 
Pozdrowienia / Regards
Artur Red?ko
www.TatukGIS.com
 
 
-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Tuesday, April 17, 2007 8:27 PM
To: Artur Redzko; gdal
Subject: Re: GDAL C API in Delphi

Artur Redzko wrote:
> 
> I hope that dev team will make use of this and import it gracefully
> into GDAL sources for further tests.

Frank,

Should I try to include Artur's solution and DEF file to GDAL ?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From szekerest at gmail.com  Wed Apr 18 07:22:11 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Some recent changes have messed up the GDAL trunk
Message-ID: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>

Developers,

Some recent changes have messed up the GDAL trunk. The python tests
terminate unexpectedly on Windows and Linux and the csharp-tests
produce access violation (might be related to memory corruption). See
the gdal buildbot for more details:
http://buildbot.osgeo.org:8500/

I'm totally confused and freaked out.

Here are some changes have been made as of the time when the things were ok.

U    gdal\port\cpl_minixml.cpp
U    gdal\port\cpl_csv.cpp
U    gdal\ogr\ogrspatialreference.cpp
U    gdal\frmts\idrisi\IdrisiDataset.cpp
U    gdal\frmts\gtiff\gt_wkt_srs.cpp
U    gdal\frmts\l1b\l1bdataset.cpp
U    gdal\frmts\bmp\bmpdataset.cpp
U    gdal\frmts\raw\fastdataset.cpp
U    gdal\frmts\raw\envidataset.cpp
U    gdal\frmts\hfa\hfa.h
U    gdal\gcore\gdal_rat.cpp
U    gdal\gcore\gdalrasterband.cpp
U    gdal\alg\gdalwarper.h
U    autotest\gcore\minixml.py
A    autotest\gcore\data\doctype.xml


Best regards,

Tamas

From ivan.lucena at pmldnet.com  Wed Apr 18 08:09:59 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4625B3CE.9060104@tkk.fi>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu><f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com><4622B5A5.6050706@pobox.com>
	<462526BA.60905@loskot.net><46255F0C.70608@perkins.net>
	<46256057.60200@perkins.net> <4625B3CE.9060104@tkk.fi>
Message-ID: <000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>

Hi there,

> I'd put my vote on MinGW (i.e., gcc) for the official Windows binary
> distribution.

Until 1995 most of the multi-platform open source project comes with
"makefile.bc" for Borland C++ compiler. xwWindows for example, I guess that
xwWidget still have it.

By that time I was able to compile in Solaris, AIX, IRIS and MS-DOS very
easily. But, of course the requirements were much less then what we have
today with.

There is a bunch of good C compiler out there, Symantec, Intel also, but I
guess that Bill Gates won that battle too. Luck Bill.

My point is:

There is a free version of Borland C++ Builder IDE that is called "Turbo C++
Explorer" that you can get from the new Borland subdivision, CodeGear:

http://codegear.com/Default.aspx?tabid=144

The makefile from Borland are a little more Unix-like than Microsoft's and I
don't think that CodeGear have restrictions in the deployment/redistribution
package.

Ivan


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ari Jolma
Sent: Wednesday, April 18, 2007 2:00 AM
To: gdal-dev
Subject: Re: [Gdal-dev] Proposal for Unified Windows Binaries

Simon Perkins kirjoitti:
> BTW, I'd like to put in my vote for using Visual Studio 2005 Express 
> for pre-compiled windows binaries. It's free, up to date (at least 
> until Visual Studio Orcas comes out later this year), actually 
> available (unlike VS 2003), includes a proper optimizing compiler, and 
> is generally a nicer bit of software than VS 2003. The manifest thing 
> should be taken care of by the GDAL makefiles.

This (from Wikipedia) worries me:

"Unfortunately, the Express Edition does not include the Visual C++ 
Redistributables and the SP1 version of the redistributables cannot be 
downloaded from Microsoft. This causes deployment problems when using 
Visual C++ 2005 Express Service Pack 1. For example, a "hello world" 
console program (compiled with default settings) will not run on a PC 
that does not already have Visual C++ 2005 Express SP1."

Is it really a working solution? A sidenote: I downloaded it, installed 
it, and then removed it manually (I know, bad habit) from this W2000 
box, now it complains in installation and it seems to require, if not 
reinstallation if Windows, at least some complicated hacks.

At least we should make sure that it is possible to build the bindings 
with other tools against the official GDAL binaries. I think that was 
one of the Howard's original ideas that the bindings wouldn't be in the 
main binary distribution.

I'd put my vote on MinGW (i.e., gcc) for the official Windows binary 
distribution.

Regards,

Ari


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Apr 18 09:18:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Transform Line String into Polygon with ogr2ogr
In-Reply-To: <0JGN0086NXE7PW30@mailmx1.und.nodak.edu>
References: <0JGN0086NXE7PW30@mailmx1.und.nodak.edu>
Message-ID: <931f8ea90704180618y60815bb0iaa4c330d0d1f4a8d@mail.gmail.com>

On 4/17/07, Lijian Shi <lijian.shi@und.nodak.edu> wrote:
> I have a shp file with Line String geometry type. Actually these lines are
> polygon because the coordinate values of line string's first point are same
> with them of line string's last one. Now I want to transform this shp into a
> new one with polygon and I use command "ogr2ogr" as:
>
>
>
> ogr2ogr new.shp old.shp ?nlt POLYGON
>
>
>
> But there are some errors as followed:
>
>
>
> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to type
> shapefile.
>
> ERROR 1: Terminating translation prematurely after failed
>
> Translation of layer zones
>
>
>
> Can I use this "ogr2ogr" to convert LINESTRING into POLYGON? If yes, what's
> the problem with my command?

Lijian,

I'm afraid there is not support for automatic conversion of
geometry types in ogr2ogr.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mateusz at loskot.net  Wed Apr 18 09:52:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Some recent changes have messed up the GDAL trunk
In-Reply-To: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>
References: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>
Message-ID: <4626228A.9060709@loskot.net>

Tamas Szekeres wrote:
> Developers,
> 
> Some recent changes have messed up the GDAL trunk. The python tests 
> terminate unexpectedly on Windows and Linux and the csharp-tests 
> produce access violation (might be related to memory corruption). See
>  the gdal buildbot for more details: http://buildbot.osgeo.org:8500/
> 
> I'm totally confused and freaked out.

Tamas,

Thanks for reporting it.
The problem is with crashing ogr_index.py test, case No 2.
I'm investigating it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Apr 18 10:00:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Re: GDAL C API in Delphi
In-Reply-To: <4625115C.5050907@loskot.net>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com>
	<4625115C.5050907@loskot.net>
Message-ID: <931f8ea90704180700p446c48aai6f32017b5bbd2482@mail.gmail.com>

On 4/17/07, Mateusz Loskot <mateusz@loskot.net> wrote:
> Artur Redzko wrote:
> >
> > I hope that dev team will make use of this and import it gracefully
> > into GDAL sources for further tests.
>
> Frank,
>
> Should I try to include Artur's solution and DEF file to GDAL ?

Artur,

i'd appreciate your filing a proper ticket at:

  http://trac.osgeo.org/gdal

I skimmed your earlier message, but the text didn't really tell
me anything about what the problem turned out to be, and I
didn't have the time to dig through the zip file.

Assuming there is a clear action item, I'll have Mateusz take
care of it.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Wed Apr 18 10:11:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Some recent changes have messed up the GDAL trunk
In-Reply-To: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>
References: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>
Message-ID: <46262720.1050808@loskot.net>

Folks,

Another issues was assertion catch:

  TEST: ogr_index_8 ... ERROR 7: Assertion `nKeyLength == 8 &&
sizeof(double) == 8' failed
in file `mitab_indfile.cpp', line 653


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Apr 18 10:26:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:47 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>
	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>
	<4622B5A5.6050706@pobox.com> <462526BA.60905@loskot.net>
	<46255F0C.70608@perkins.net> <46256057.60200@perkins.net>
	<4625B3CE.9060104@tkk.fi>
	<000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>

Folks,

This thread seems to have spun wildly out of control.  Mateusz
does not have visual studio 2003, so Howard or I will likely do the
first round binary builds.

At that point someone can do some tests to verify the resulting
DLLs work fine with VS2005.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Wed Apr 18 10:42:01 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL C API in Delphi
In-Reply-To: <931f8ea90704180700p446c48aai6f32017b5bbd2482@mail.gmail.com>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com><4625115C.5050907@loskot.net>
	<931f8ea90704180700p446c48aai6f32017b5bbd2482@mail.gmail.com>
Message-ID: <000201c781c7$b9af0ac0$0a0a0a0a@idrisi.clarku.edu>

Frank,

Since Artur is not a GDAL committer and I am assuming that Mateusz doesn't
have a Delphi developer environment at his disposal, I am offering my help
on that matter, if it is needed.

Regards,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, April 18, 2007 10:00 AM
To: Mateusz Loskot
Cc: gdal
Subject: Re: [Gdal-dev] Re: GDAL C API in Delphi

On 4/17/07, Mateusz Loskot <mateusz@loskot.net> wrote:
> Artur Redzko wrote:
> >
> > I hope that dev team will make use of this and import it gracefully
> > into GDAL sources for further tests.
>
> Frank,
>
> Should I try to include Artur's solution and DEF file to GDAL ?

Artur,

i'd appreciate your filing a proper ticket at:

  http://trac.osgeo.org/gdal

I skimmed your earlier message, but the text didn't really tell
me anything about what the problem turned out to be, and I
didn't have the time to dig through the zip file.

Assuming there is a clear action item, I'll have Mateusz take
care of it.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Wed Apr 18 10:54:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Some recent changes have messed up the GDAL trunk
In-Reply-To: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>
References: <f3b73b7d0704180422x29bcd554o3a8885c76c35b02a@mail.gmail.com>
Message-ID: <46263112.4010804@loskot.net>

Folks,

The problem has been fixed and now tests run without any crash.

Tamas,
Could you look at your builder
http://buildbot.osgeo.org:8500/szekerest-vc71-full/builds/323
It seems there are files locked or in use and can not be removed/updated.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Apr 18 11:21:48 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<462526BA.60905@loskot.net>	<46255F0C.70608@perkins.net>
	<46256057.60200@perkins.net>	<4625B3CE.9060104@tkk.fi>	<000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>
	<931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>
Message-ID: <4626378C.40708@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> This thread seems to have spun wildly out of control.  Mateusz
> does not have visual studio 2003, so Howard or I will likely do the
> first round binary builds.
> 
> At that point someone can do some tests to verify the resulting
> DLLs work fine with VS2005.

Frank,

+1

and certainly I can test the DLL.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Wed Apr 18 11:25:07 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <4625B3CE.9060104@tkk.fi>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<462526BA.60905@loskot.net>	<46255F0C.70608@perkins.net>
	<46256057.60200@perkins.net> <4625B3CE.9060104@tkk.fi>
Message-ID: <46263853.8040006@perkins.net>

Ari Jolma wrote:
> Simon Perkins kirjoitti:
>> BTW, I'd like to put in my vote for using Visual Studio 2005 Express 
>> for pre-compiled windows binaries. It's free, up to date (at least 
>> until Visual Studio Orcas comes out later this year), actually 
>> available (unlike VS 2003), includes a proper optimizing compiler, 
>> and is generally a nicer bit of software than VS 2003. The manifest 
>> thing should be taken care of by the GDAL makefiles.
>
> This (from Wikipedia) worries me:
>
> "Unfortunately, the Express Edition does not include the Visual C++ 
> Redistributables and the SP1 version of the redistributables cannot be 
> downloaded from Microsoft. This causes deployment problems when using 
> Visual C++ 2005 Express Service Pack 1. For example, a "hello world" 
> console program (compiled with default settings) will not run on a PC 
> that does not already have Visual C++ 2005 Express SP1."

Interesting... I wasn't aware of this issue, but it does appear to be a 
big screw-up at Microsoft's end. They claim that they are working on an 
updated version of the redistributable package for SP1, but right now 
it's not available. If you have any non-express version of Visual Studio 
then it's included in that package. There are some workarounds, but 
they're messy, e.g.:

http://blogs.msdn.com/nikolad/archive/2007/04/02/workaround-for-using-vs2005-sp1-version-of-vcredist-exe-within-a-boostrapper-setup-exe.aspx



> I'd put my vote on MinGW (i.e., gcc) for the official Windows binary 
> distribution.

Eek. If we're producing pre-compiled binaries to make life easier for 
developers, then it seems to me that we should be addressing the needs 
of the mainstream of windows developers. AFAIK that is unquestionably 
Visual Studio (in some version or another). I've used MinGW and while 
it's possible to get it to work, it always feels rather "fringey" - 
anybody capable of getting MinGW to work is probably capable of building 
their own GDAL binaries... :)

Cheers,

Sy


From sy at perkins.net  Wed Apr 18 11:29:39 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>
	<462526BA.60905@loskot.net>	<46255F0C.70608@perkins.net>
	<46256057.60200@perkins.net>	<4625B3CE.9060104@tkk.fi>	<000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>
	<931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>
Message-ID: <46263963.1020602@perkins.net>

Frank Warmerdam wrote:
> This thread seems to have spun wildly out of control.  Mateusz
> does not have visual studio 2003, so Howard or I will likely do the
> first round binary builds.
>
> At that point someone can do some tests to verify the resulting
> DLLs work fine with VS2005.

I hate to add any more to this thread then, but in general it's a bad 
idea to mix C runtime versions with visual studio, i.e. if you're 
building your app with VS2005, you may run into problems when using 
libraries compiled with VS2003. In theory, if you're just using the C 
interface, and not doing any memory allocation / deallocation across 
boundaries then you might be OK, but I've had problems even in this 
scenario.

Bit of a mess really.

Sy


From mateusz at loskot.net  Wed Apr 18 11:40:58 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Proposal for Unified Windows Binaries
In-Reply-To: <46263963.1020602@perkins.net>
References: <0363238F-BC3E-45E1-9BB7-8462F95774DF@iastate.edu>	<f3b73b7d0704151548h9f89d20v882bd9fb01e4484c@mail.gmail.com>	<4622B5A5.6050706@pobox.com>	<462526BA.60905@loskot.net>	<46255F0C.70608@perkins.net>	<46256057.60200@perkins.net>	<4625B3CE.9060104@tkk.fi>	<000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>	<931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>
	<46263963.1020602@perkins.net>
Message-ID: <46263C0A.3080009@loskot.net>

Simon Perkins wrote:
> Frank Warmerdam wrote:
>> This thread seems to have spun wildly out of control.  Mateusz
>> does not have visual studio 2003, so Howard or I will likely do the
>> first round binary builds.
>>
>> At that point someone can do some tests to verify the resulting
>> DLLs work fine with VS2005.
> 
> I hate to add any more to this thread then, but in general it's a bad
> idea to mix C runtime versions with visual studio, i.e. if you're
> building your app with VS2005, you may run into problems when using
> libraries compiled with VS2003. In theory, if you're just using the C
> interface, and not doing any memory allocation / deallocation across
> boundaries then you might be OK, but I've had problems even in this
> scenario.
> 
> Bit of a mess really.

Simon,

Any way we choose, we have to do first steps and try and test, to see
how things really works.

I've got convinced it's a good idea to start with VC++7.1 and see.
If we will really find problems, we will try to switch to VC++8.0 and,
again, test and see.

This way, we'll collect better observations about
capabilities of both versions.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From artur.redzko at tatukgis.com  Wed Apr 18 13:12:25 2007
From: artur.redzko at tatukgis.com (Artur Redzko)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: Re: GDAL C API in Delphi
Message-ID: <DC65EB3D6F198B4F93900800424A9CD6779131@MONTANA.tatukgis.com>

Hi

I added an enhancement ticket at http://trac.osgeo.org/gdal/ticket/1580 
?
Pozdrowienia / Regards
Artur Red?ko
www.TatukGIS.com
?
?



From mateusz at loskot.net  Wed Apr 18 15:01:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
Message-ID: <46266B22.8070307@loskot.net>

Folks,

We have the Wiki :-)
It's been discussed that it's a good idea to migrate some of
doxygen-driven pages published on the website to the Wiki on Trac.

Could we list pages that are good candidates to migrate to the Wiki?

Also, I'd like to migrate our FAQ to the Wiki, so it will be easier to
maintain it, encourage for contributions and monitor them.
Is there any objection or I can move on with FAQ as the first item to
migrate?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Apr 18 15:21:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL C API in Delphi
In-Reply-To: <000201c781c7$b9af0ac0$0a0a0a0a@idrisi.clarku.edu>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com><4625115C.5050907@loskot.net>
	<931f8ea90704180700p446c48aai6f32017b5bbd2482@mail.gmail.com>
	<000201c781c7$b9af0ac0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <46266FC6.2090000@loskot.net>


Ivan,

No, I don't have Delphi environment, but if there is any free like VC++
2005 EE, I can install it if that will help us to solve GDAL problems
for Delphi users.

I've been programming with Pascal quite a long time ;-)

Mateusz

Ivan Lucena wrote:
> Frank,
> 
> Since Artur is not a GDAL committer and I am assuming that Mateusz doesn't
> have a Delphi developer environment at his disposal, I am offering my help
> on that matter, if it is needed.
> 
> Regards,
> 
> Ivan
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
> Sent: Wednesday, April 18, 2007 10:00 AM
> To: Mateusz Loskot
> Cc: gdal
> Subject: Re: [Gdal-dev] Re: GDAL C API in Delphi
> 
> On 4/17/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>> Artur Redzko wrote:
>>> I hope that dev team will make use of this and import it gracefully
>>> into GDAL sources for further tests.
>> Frank,
>>
>> Should I try to include Artur's solution and DEF file to GDAL ?
> 
> Artur,
> 
> i'd appreciate your filing a proper ticket at:
> 
>   http://trac.osgeo.org/gdal
> 
> I skimmed your earlier message, but the text didn't really tell
> me anything about what the problem turned out to be, and I
> didn't have the time to dig through the zip file.
> 
> Assuming there is a clear action item, I'll have Mateusz take
> care of it.
> 
> Best regards,
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net

From ivan.lucena at pmldnet.com  Wed Apr 18 16:44:14 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL C API in Delphi
In-Reply-To: <46266FC6.2090000@loskot.net>
References: <DC65EB3D6F198B4F93900800424A9CD67790EE@MONTANA.tatukgis.com><4625115C.5050907@loskot.net>
	<931f8ea90704180700p446c48aai6f32017b5bbd2482@mail.gmail.com>
	<000201c781c7$b9af0ac0$0a0a0a0a@idrisi.clarku.edu>
	<46266FC6.2090000@loskot.net>
Message-ID: <000301c781fa$54eca330$0a0a0a0a@idrisi.clarku.edu>

Mateusz,

You can get the full package from the same address that I mentioned before
for C++ Builder: http://codegear.com/Default.aspx?tabid=144

But I think that what Delphi programmers will need from us is just to
include those changes that Artur have mentioned:

>>> nmake.opt

# Uncomment this line to build a Delphi compatible dll:
#LINKER_FLAGS  = /def:gdal14.def

Of course, we need to add the file "gdal114.def" created by the inpdef tool
(comes with Delphi) to the root. We can make it run automatically I guess.

But do some test you will need to write interface units, gdal.pas and
ogr.pas that replicate all the gdal.h and ogr_api.h types and function
definition in Pascal. That is way to much work and I think that it is up to
the Delphi user to do that. That is not a wrapper.

Let me know if you need any thing else,

Regards,

Ivan

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Wednesday, April 18, 2007 3:22 PM
To: Ivan Lucena
Cc: 'Frank Warmerdam'; 'gdal'
Subject: Re: [Gdal-dev] Re: GDAL C API in Delphi


Ivan,

No, I don't have Delphi environment, but if there is any free like VC++
2005 EE, I can install it if that will help us to solve GDAL problems
for Delphi users.

I've been programming with Pascal quite a long time ;-)

Mateusz

Ivan Lucena wrote:
> Frank,
> 
> Since Artur is not a GDAL committer and I am assuming that Mateusz doesn't
> have a Delphi developer environment at his disposal, I am offering my help
> on that matter, if it is needed.
> 
> Regards,
> 
> Ivan
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
> Sent: Wednesday, April 18, 2007 10:00 AM
> To: Mateusz Loskot
> Cc: gdal
> Subject: Re: [Gdal-dev] Re: GDAL C API in Delphi
> 
> On 4/17/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>> Artur Redzko wrote:
>>> I hope that dev team will make use of this and import it gracefully
>>> into GDAL sources for further tests.
>> Frank,
>>
>> Should I try to include Artur's solution and DEF file to GDAL ?
> 
> Artur,
> 
> i'd appreciate your filing a proper ticket at:
> 
>   http://trac.osgeo.org/gdal
> 
> I skimmed your earlier message, but the text didn't really tell
> me anything about what the problem turned out to be, and I
> didn't have the time to dig through the zip file.
> 
> Assuming there is a clear action item, I'll have Mateusz take
> care of it.
> 
> Best regards,
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net


From lijian.shi at und.nodak.edu  Wed Apr 18 17:44:38 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] raster to vector with gdal_contour or other method
Message-ID: <0JGP00F6ER2EB560@mailmx1.und.nodak.edu>

Hi, everyone,

 

I am trying to use gdal_contour to convert the raster data (.geotiff file)
into vector data (.shp file). Now I can use this command to create the close
line. Next step is to transform the geometry types from line to polygon. But
when the polygon is doughnut shape, the boundary of polygon will become two
lines and the problem becomes very complicated. 

 

Is there any other method or code to convert the raster data into polygon? 

 

Best regards,

 

Lijian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070418/c3281234/attachment.html
From warmerdam at pobox.com  Wed Apr 18 21:24:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <46266B22.8070307@loskot.net>
References: <46266B22.8070307@loskot.net>
Message-ID: <4626C4C1.8060505@pobox.com>

Mateusz Loskot wrote:
> Folks,
> 
> We have the Wiki :-)
> It's been discussed that it's a good idea to migrate some of
> doxygen-driven pages published on the website to the Wiki on Trac.
> 
> Could we list pages that are good candidates to migrate to the Wiki?

Mateusz,

I've been taking this in a somewhat ad-hoc manner, and don't have a
detailed plan.

> Also, I'd like to migrate our FAQ to the Wiki, so it will be easier to
> maintain it, encourage for contributions and monitor them.
> Is there any objection or I can move on with FAQ as the first item to
> migrate?

The FAQ is a very obvious thing that should move to the wiki, and you may
do so at will.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From cgeorges at CSO.Net  Thu Apr 19 09:16:23 2007
From: cgeorges at CSO.Net (Cgeorges)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Read BITMAP segments from PCI database files?
Message-ID: <200704191216.l3JCGNrB016364@Mail.CSO.Net>

Hello,

any chances to read BITMAP segments from PCI database files
using gdal?

There is nothing said about BITMAP segments in the
format description. Also, "gdalinfo" doesn't report
about BITMAP segments.

(version: gdal-1.4.1)

Any workarounds?

Thanks,
Christian

_________________________________________________________________
E-Mail
versendet via WebMail von CSO.Net Austria


From warmerdam at pobox.com  Thu Apr 19 08:48:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Read BITMAP segments from PCI database files?
In-Reply-To: <200704191216.l3JCGNrB016364@Mail.CSO.Net>
References: <200704191216.l3JCGNrB016364@Mail.CSO.Net>
Message-ID: <46276536.5050308@pobox.com>

Cgeorges wrote:
> Hello,
> 
> any chances to read BITMAP segments from PCI database files
> using gdal?
> 
> There is nothing said about BITMAP segments in the
> format description. Also, "gdalinfo" doesn't report
> about BITMAP segments.
> 
> (version: gdal-1.4.1)
> 
> Any workarounds?

Christian,

I'm afraid that the GDAL PCIDSK driver does not currently support
bitmap segments and there are no plans to implement this, though it
shouldn't be terribly hard to do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mattia.parigiani at gmail.com  Thu Apr 19 10:29:21 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] gdal_translate of HDF : resulting GeoTiff file strange
Message-ID: <6b6f1c810704190729v33215a6fyde693854ad9ceb74@mail.gmail.com>

Hey all,

I ran the following command on an HDF format:

$ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9
test_b9.tif

I hence get a geotiff file called test_b9.tif
I actually ran the command on all my 26 channels and got 26 different TIF
files.
I think that this should be the most important channel though, namely, it is
the :

  SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":8
  SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned integer)


If I now run gdalinfo I get:

rasdaman@mattia-desktop:~/FTPCHINA$ gdalinfo -nomd test_b8.tif
Driver: GTiff/GeoTIFF
Size is 1354, 3630
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 3630.0)
Upper Right ( 1354.0,    0.0)
Lower Right ( 1354.0, 3630.0)
Center      (  677.0, 1815.0)
Band 1 Block=1354x3 Type=UInt16, ColorInterp=Gray
Band 2 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 3 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 4 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 5 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 6 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 7 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 8 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 9 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 10 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 11 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 12 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 13 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 14 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 15 Block=1354x3 Type=UInt16, ColorInterp=Undefined
Band 16 Block=1354x3 Type=UInt16, ColorInterp=Undefined
rasdaman@mattia-desktop:~/FTPCHINA$



Isnt this a strange result?

What about the coordinate system?

I tried to merge all the tifs with gdalwarp, but had no success so far..

I'm pretty new to this field and in very high waters..

Any suggestions?


Thanks



-- 
Mattia

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070419/cdb26bcc/attachment.html
From guillaume.huby.lists at gmail.com  Thu Apr 19 12:00:02 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] gdal_translate of HDF : resulting GeoTiff file strange
In-Reply-To: <46278B4E.9040405@geosys.com>
References: <46278B4E.9040405@geosys.com>
Message-ID: <ddc797c30704190900n6f88fddah855c6c7c85ea9501@mail.gmail.com>

On 4/19/07, Guillaume HUBY <ghuby@geosys.com> wrote:
>
> Hey all,
>
> I ran the following command on an HDF format:
>
> $ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9
> test_b9.tif


First of all, your modis file does not look like like the HDF-EOS MOD21KM
file I know (but I downloaded subseted data). Are you sure you get a good
one ?
Second point, each dataset of MOD21KM hdf is made of raw data with GCP
within meta data. So, AFAIK, if you use gdal_translate you do not apply GCP
to image. You should use gdalwarp instead.


I hence get a geotiff file called test_b9.tif
> I actually ran the command on all my 26 channels and got 26 different
> TIF files.
> I think that this should be the most important channel though, namely,
> it is the :
>
>    SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":8
>    SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned
> integer)
>
>
> If I now run gdalinfo I get:
>
> rasdaman@mattia-desktop:~/FTPCHINA$ gdalinfo -nomd test_b8.tif
> Driver: GTiff/GeoTIFF
> Size is 1354, 3630
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 3630.0)
> Upper Right ( 1354.0,    0.0)
> Lower Right ( 1354.0, 3630.0)
> Center      (  677.0, 1815.0)
> Band 1 Block=1354x3 Type=UInt16, ColorInterp=Gray
> Band 2 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 3 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 4 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 5 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 6 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 7 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 8 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 9 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 10 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 11 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 12 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 13 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 14 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 15 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> Band 16 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> rasdaman@mattia-desktop:~/FTPCHINA$



Isnt this a strange result?


No, a hdf file is made of datasets. Each dataset can contain rasters (or
other data). In your case, the ninth dataset of your hdf file contains a
raster with 16 bands (see the 16 of SUBDATASET_9_DESC=[16x3630x1354]). So
when you extract the ninth dataset, you get a raster with 16 bands.


What about the coordinate system?


see before.

I tried to merge all the tifs with gdalwarp, but had no success so far..
>
> I'm pretty new to this field and in very high waters..
>
> Any suggestions?


If you don't want to use batch mode or have a uniform process for all
images, you should use HEG-Tools or MRT which EOS made tools with simple GUI
very easy to use to extract data from HDF-EOS files.

Good luck,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070419/6434501e/attachment.html
From matt.wilkie at gov.yk.ca  Thu Apr 19 12:35:24 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <46266B22.8070307@loskot.net>
References: <46266B22.8070307@loskot.net>
Message-ID: <46279A4C.6020902@gov.yk.ca>

Hi Mateusz,

I worked a little bit on adding some stuff to the wiki, but quickly got 
to the point of not knowing where to put stuff, or what was going to 
stay in svn/doxygen/whatever and shouldn't be duplicated in the wiki.

Another issue I ran into was devising a scheme to easily discriminate 
between end user and developer docs. I floated an idea for this at 
http://trac.osgeo.org/gdal/wiki/TracDiscuss but have no responses so 
far. I don't know whether this is because no one has noticed the page or 
  if they just don't have an opinion. ;)

> Could we list pages that are good candidates to migrate to the Wiki?

As a general principle I suggest focussing on user docs as developers 
already have access to svn, so can change things (like the man-style 
quick references pages for the utilities) there.

> Also, I'd like to migrate our FAQ to the Wiki, so it will be easier to
> maintain it, encourage for contributions and monitor them.
> Is there any objection or I can move on with FAQ as the first item to
> migrate?

No objection from me, the FAQ is a perfect candidate.


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mattia.parigiani at gmail.com  Thu Apr 19 12:42:20 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] gdal_translate of HDF : resulting GeoTiff file strange
In-Reply-To: <ddc797c30704190900n6f88fddah855c6c7c85ea9501@mail.gmail.com>
References: <46278B4E.9040405@geosys.com>
	<ddc797c30704190900n6f88fddah855c6c7c85ea9501@mail.gmail.com>
Message-ID: <6b6f1c810704190942y374974a5qeaeff72e128c8d74@mail.gmail.com>

WHat I meant by strange is that I only get one band to have a significant
value... all other bands have 'Undefined value' ...

I tried renaming the file from AMOD021KM20061229043102.hdf to
MOD021KM20061229043102.hdf, ie : removing the A in front which, I guess, as
been used for convention to indicate an image from Terra satellite as
opposed to the Aqua satellite..

I also tried, some days ago with HEG tools but when I try to open the image
I get an error popup statin "cannot open load AMOD021KM20061229043102.hdf,
unknown error"

I'm having problem installing MRT in Linux (Ubuntu) .. I will keep trying :(

How do I know if I have a good image? gdalinfo??

This is what I get with gdalinfo -nomd

rasdaman@mattia-desktop:/opt/HEG/iHEG$ gdalinfo -nomd
MOD021KM20061229043102.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Subdatasets:
  SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":0
  SUBDATASET_1_DESC=[15x3630x1354] EV_1KM_RefSB (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":1
  SUBDATASET_2_DESC=[15x3630x1354] EV_1KM_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":2
  SUBDATASET_3_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB (16-bit unsigned
integer)
  SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":3
  SUBDATASET_4_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":4
  SUBDATASET_5_DESC=[2x3630x1354] EV_250_Aggr1km_RefSB_Samples_Used (8-bit
unsigned integer)
  SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":5
  SUBDATASET_6_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB (16-bit unsigned
integer)
  SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":6
  SUBDATASET_7_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":7
  SUBDATASET_8_DESC=[5x3630x1354] EV_500_Aggr1km_RefSB_Samples_Used (8-bit
unsigned integer)
  SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":8
  SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":9
  SUBDATASET_10_DESC=[16x3630x1354] EV_1KM_Emissive_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":10
  SUBDATASET_11_DESC=[726x271] Latitude (32-bit floating-point)
  SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":11
  SUBDATASET_12_DESC=[726x271] Longitude (32-bit floating-point)
  SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":12
  SUBDATASET_13_DESC=[726x271] Height (16-bit integer)
  SUBDATASET_14_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":13
  SUBDATASET_14_DESC=[726x271] SensorZenith (16-bit integer)
  SUBDATASET_15_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":14
  SUBDATASET_15_DESC=[726x271] SensorAzimuth (16-bit integer)
  SUBDATASET_16_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":15
  SUBDATASET_16_DESC=[726x271] Range (16-bit unsigned integer)
  SUBDATASET_17_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":16
  SUBDATASET_17_DESC=[726x271] SolarZenith (16-bit integer)
  SUBDATASET_18_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":17
  SUBDATASET_18_DESC=[726x271] SolarAzimuth (16-bit integer)
  SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":18
  SUBDATASET_19_DESC=[726x271] gflags (8-bit unsigned integer)
  SUBDATASET_20_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":19
  SUBDATASET_20_DESC=[3630x1354] EV_Band26 (16-bit unsigned integer)
  SUBDATASET_21_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":20
  SUBDATASET_21_DESC=[3630x1354] EV_Band26_Uncert_Indexes (8-bit unsigned
integer)
  SUBDATASET_22_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":21
  SUBDATASET_22_DESC=[16x10] Noise in Thermal Detectors (8-bit unsigned
integer)
  SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":22
  SUBDATASET_23_DESC=[16x10] Change in relative responses of thermal
detectors (8-bit unsigned integer)
  SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":23
  SUBDATASET_24_DESC=[363x16x10] DC Restore Change for Thermal Bands (8-bit
integer)
  SUBDATASET_25_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":24
  SUBDATASET_25_DESC=[363x2x40] DC Restore Change for Reflective 250m Bands
(8-bit integer)
  SUBDATASET_26_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":25
  SUBDATASET_26_DESC=[363x5x20] DC Restore Change for Reflective 500m Bands
(8-bit integer)
  SUBDATASET_27_NAME=HDF4_SDS:UNKNOWN:"MOD021KM20061229043102.hdf":26
  SUBDATASET_27_DESC=[363x15x10] DC Restore Change for Reflective 1km Bands
(8-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)
rasdaman@mattia-desktop:/opt/HEG/iHEG$


You had sent me the following command some days ago to convert to tiff using
gdal_translate
gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9 test_b9.tif

WOuld I need to do the analogous thing with the gdalwarp utility?? So as to
consider GCP??

One last thing... At the end of day I will need to process all images in the
same way and to get out of them RGB images (The images cover the whole
national territory of China)... For this, I'm I looking at all the bands in
the HDF File?? Or does it only concern a certain number of them (in this
case all means the 26 bands displayed with gdalinfo)

Thanks for your patience and help, Its only that I have some deadlines
coming for a big project and really need to sort these data conversions
ASAP.

Thanks

Mattia



On 4/19/07, guillaume huby <guillaume.huby.lists@gmail.com> wrote:
>
>
>
> On 4/19/07, Guillaume HUBY <ghuby@geosys.com> wrote:
> >
> > Hey all,
> >
> > I ran the following command on an HDF format:
> >
> > $ gdal_translate HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":9
> > test_b9.tif
>
>
> First of all, your modis file does not look like like the HDF-EOS MOD21KM
> file I know (but I downloaded subseted data). Are you sure you get a good
> one ?
> Second point, each dataset of MOD21KM hdf is made of raw data with GCP
> within meta data. So, AFAIK, if you use gdal_translate you do not apply GCP
> to image. You should use gdalwarp instead.
>
>
> I hence get a geotiff file called test_b9.tif
> > I actually ran the command on all my 26 channels and got 26 different
> > TIF files.
> > I think that this should be the most important channel though, namely,
> > it is the :
> >
> >    SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20061229043102.hdf":8
> >    SUBDATASET_9_DESC=[16x3630x1354] EV_1KM_Emissive (16-bit unsigned
> > integer)
> >
> >
> > If I now run gdalinfo I get:
> >
> > rasdaman@mattia-desktop :~/FTPCHINA$ gdalinfo -nomd test_b8.tif
> > Driver: GTiff/GeoTIFF
> > Size is 1354, 3630
> > Coordinate System is `'
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0, 3630.0)
> > Upper Right ( 1354.0,    0.0)
> > Lower Right ( 1354.0, 3630.0)
> > Center      (  677.0, 1815.0)
> > Band 1 Block=1354x3 Type=UInt16, ColorInterp=Gray
> > Band 2 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 3 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 4 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 5 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 6 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 7 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 8 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 9 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 10 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 11 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 12 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 13 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 14 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 15 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > Band 16 Block=1354x3 Type=UInt16, ColorInterp=Undefined
> > rasdaman@mattia-desktop:~/FTPCHINA$
>
>
>
> Isnt this a strange result?
>
>
> No, a hdf file is made of datasets. Each dataset can contain rasters (or
> other data). In your case, the ninth dataset of your hdf file contains a
> raster with 16 bands (see the 16 of SUBDATASET_9_DESC=[16x3630x1354]). So
> when you extract the ninth dataset, you get a raster with 16 bands.
>
>
> What about the coordinate system?
>
>
> see before.
>
> I tried to merge all the tifs with gdalwarp, but had no success so far..
> >
> > I'm pretty new to this field and in very high waters..
> >
> > Any suggestions?
>
>
> If you don't want to use batch mode or have a uniform process for all
> images, you should use HEG-Tools or MRT which EOS made tools with simple GUI
> very easy to use to extract data from HDF-EOS files.
>
> Good luck,
> Guillaume.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070419/c3377691/attachment.html
From matt.wilkie at gov.yk.ca  Thu Apr 19 12:48:33 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Canadian Topographic data (NTDB)  now free!
In-Reply-To: <4613E052.5000705@gov.yk.ca>
References: <4613E052.5000705@gov.yk.ca>
Message-ID: <46279D61.3050003@gov.yk.ca>

> Note that the free CanMatrix available on the same server is only the 
> half-resolution version (160dpi). The 300dpi is still for sale only and 
> restricted distribution. A tip though, if you want the 300dpi buy it
> from  http://www.softmaptech.com/ for a fraction of the cost from NRCAN 
> (with collars clipped to boot). Rumour has it that in a year or two the 
> restrictions will be lifted here too.

I am mistakem. The 300dpi CanMatrix is now the only available version :)
http://ftp2.cits.rncan.gc.ca/pub/canmatrix/

The Softmap distribution remains value added as they have the collars 
removed.

Thank you to Eric DeLong for the correction.

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Thu Apr 19 12:58:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <46279A4C.6020902@gov.yk.ca>
References: <46266B22.8070307@loskot.net> <46279A4C.6020902@gov.yk.ca>
Message-ID: <46279FBF.1020600@loskot.net>

Matt Wilkie wrote:
> Hi Mateusz,
> 
> I worked a little bit on adding some stuff to the wiki, but quickly 
> got to the point of not knowing where to put stuff, or what was going
>  to stay in svn/doxygen/whatever and shouldn't be duplicated in the 
> wiki.

Matt,

Yes, I understand your confusion. My goal is to clean things a little,
so we will have user-friendly and well-structured knowledge base with
parts to which users can also contribute.

> Another issue I ran into was devising a scheme to easily discriminate
>  between end user and developer docs. I floated an idea for this at 
> http://trac.osgeo.org/gdal/wiki/TracDiscuss but have no responses so 
> far. I don't know whether this is because no one has noticed the page
> or if they just don't have an opinion. ;)

Yes, I think it's possible.
I've not noticed it myself too :-)

I like the idea about separate corners for Users and Developers
regarding documentation.

>> Could we list pages that are good candidates to migrate to the 
>> Wiki?
> 
> As a general principle I suggest focussing on user docs as developers
>  already have access to svn, so can change things (like the man-style
>  quick references pages for the utilities) there.

I agree.

>> Also, I'd like to migrate our FAQ to the Wiki, so it will be easier
>>  to maintain it, encourage for contributions and monitor them. Is 
>> there any objection or I can move on with FAQ as the first item to 
>> migrate?
> 
> No objection from me, the FAQ is a perfect candidate.

Here it is:
http://trac.osgeo.org/gdal/wiki/FAQ

There is only a TOC proposal so far, please feel free to extend it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Apr 19 13:06:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] raster to vector with gdal_contour or other method
In-Reply-To: <0JGP00F6ER2EB560@mailmx1.und.nodak.edu>
References: <0JGP00F6ER2EB560@mailmx1.und.nodak.edu>
Message-ID: <4627A19B.9080803@loskot.net>

Lijian Shi wrote:
> I am trying to use gdal_contour to convert the raster data (.geotiff
> file) into vector data (.shp file). Now I can use this command to
> create the close line. Next step is to transform the geometry types
> from line to polygon. But when the polygon is doughnut shape, the
> boundary of polygon will become two lines and the problem becomes
> very complicated.
> 
> Is there any other method or code to convert the raster data into
> polygon?

Lijian,

I believe you could do it with GRASS.
Unfortunately, I'm not experienced with GRASS (yet) but
you can see if r.to.vect will be suitable.

Another option is to convert raster to polygon using r2v.pl script from:
http://map.hut.fi/PerlForGeoinformatics/examples.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Apr 19 14:08:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <46279A4C.6020902@gov.yk.ca>
References: <46266B22.8070307@loskot.net> <46279A4C.6020902@gov.yk.ca>
Message-ID: <4627B01B.3040705@pobox.com>

Matt Wilkie wrote:
> Another issue I ran into was devising a scheme to easily discriminate 
> between end user and developer docs. I floated an idea for this at 
> http://trac.osgeo.org/gdal/wiki/TracDiscuss but have no responses so 
> far. I don't know whether this is because no one has noticed the page or 
>  if they just don't have an opinion. ;)

Matt,

To be honest, I read this over and wasn't too keen on the approach.  It
can be quite difficult to enforce rules such as those you suggest for
new wiki contributors so I'm inclined to avoid making rules that are
likely to fall apart.  I am also not convinced that orderly organization
in the index is that important an objective.

I didn't respond with my initial impressions because I hate to *always*
be the wet blanket dumping on new ideas.  I thought I'd give others
a chance to comment, or you a chance to test it out in practice.

>> Could we list pages that are good candidates to migrate to the Wiki?
> 
> As a general principle I suggest focussing on user docs as developers 
> already have access to svn, so can change things (like the man-style 
> quick references pages for the utilities) there.

I'd suggest users focus on user pages, as long as you don't mind
developers focusing on developer stuff!

I don't have final answers on what belongs in the wiki and what in
doxygen.  But some criteria might be:

Best in wiki if:
  o contributions are likely to come from casual participants without
    commit access.
  o opinion related material, suggested approaches, etc

Best in doxygen if:
  o it is API reference documentation generated from the code.
  o it needs to be installed with software (like man pages)
  o it makes extensive use of the doxygen cross-referencing capability
    to the reference docs, like some of the developer tutorials.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Apr 19 14:20:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: Q. Strange colors produced in output image (jpeg to
	NITF w/ IC=C8)
In-Reply-To: <7B95239DDD54E54B9BFA23847142B1EE01136721@aplesnation.dom1.jhuapl.edu>
References: <000001c781b2$7c9b1ad0$0a0a0a0a@idrisi.clarku.edu>
	<931f8ea90704180726w764fa67al93e8e5dae081cc1e@mail.gmail.com>
	<7B95239DDD54E54B9BFA23847142B1EE01136721@aplesnation.dom1.jhuapl.edu>
Message-ID: <4627B2D8.9020805@pobox.com>

David, Bradley J. wrote:
> I am trying to produce NITF 2.1 images with JPEG 2000 compression,
> however I keep getting strange results in the final image.  I am using
> OpenEV_FW to view my images.  Here's my code and images:

David,

I just tried converting an RGB jpeg image to NITF/JPEG2000 with this
command:

gdal_translate -of NITF -co IC=C8 -co IREP=RGB in.jpg out.ntf

And the resulting image displayed properly in OpenEV.  In my case the
JP2ECW driver seems to have been used to do the encoding.  Perhaps you
could run with debug enabled (add  CPLSetConfigOption("CPL_DEBUG","ON");)
and verify that the JP2ECW driver is being used.  You should see something
like:

   ECW: Writing with PROJ=RAW, DATUM=RAW

You should also do a gdalinfo on the output file and verify that the colors
are reported as RGB, not YCbCr.  If the colors are off it is almost certainly
because the RGB image is converted to YCbCr in the jpeg2000 data stream and
then not converted back properly.  Whether this happens or not may depend on
which jpeg2000 driver gets used for the encoding and/or the decoding.

Once you have narrowed things down somewhat, could you please file a bug
report in the GDAL Trac with the details.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Apr 19 14:56:55 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <4627B01B.3040705@pobox.com>
References: <46266B22.8070307@loskot.net> <46279A4C.6020902@gov.yk.ca>
	<4627B01B.3040705@pobox.com>
Message-ID: <4627BB77.7080902@loskot.net>

Frank Warmerdam wrote:
> Matt Wilkie wrote:
>> Another issue I ran into was devising a scheme to easily
>> discriminate between end user and developer docs. I floated an idea
>> for this at http://trac.osgeo.org/gdal/wiki/TracDiscuss but have no
>> responses so far. I don't know whether this is because no one has
>> noticed the page or  if they just don't have an opinion. ;)
> 
> Matt,
> 
> To be honest, I read this over and wasn't too keen on the approach.
> It can be quite difficult to enforce rules such as those you suggest
> for new wiki contributors so I'm inclined to avoid making rules that
> are likely to fall apart.  I am also not convinced that orderly
> organization in the index is that important an objective.

Frank, Matt,

I think we can just group subjects on the Wiki frontpage.
Rules, groups may not be needed and/or may complicate things, but
organizing the content according to two rules: for a user and for a
developer makes sens to me.

I'm not sure if it needs a special rules for URL, because users will
probably use the Table of Content instead of write URLs manually.

>>> Could we list pages that are good candidates to migrate to the
>>> Wiki?
>> 
>> As a general principle I suggest focussing on user docs as
>> developers already have access to svn, so can change things (like
>> the man-style quick references pages for the utilities) there.
> 
> I'd suggest users focus on user pages, as long as you don't mind 
> developers focusing on developer stuff!
> 
> I don't have final answers on what belongs in the wiki and what in 
> doxygen.  But some criteria might be:
> 
> Best in wiki if: o contributions are likely to come from casual
> participants without commit access. o opinion related material,
> suggested approaches, etc

+ more dynamic content, like reports, status pages, etc.

> Best in doxygen if: o it is API reference documentation generated
> from the code. o it needs to be installed with software (like man
> pages) o it makes extensive use of the doxygen cross-referencing
> capability to the reference docs, like some of the developer
> tutorials.

IMHO, doxygen is directly related to "current status of GDAL" and it
usually reflects this status, so it's more a static content and does not
belong to the idea of Wiki.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sjwague1 at uno.edu  Thu Apr 19 15:15:22 2007
From: sjwague1 at uno.edu (Scott J Waguespack)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Unresolved External Error with GetFieldAsStringList
Message-ID: <053B3DFC11806D4FAB4EF8CC5062577BC567AB@mail5.uno.edu>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070419/4f73b670/attachment.html
From sjwague1 at uno.edu  Thu Apr 19 15:52:28 2007
From: sjwague1 at uno.edu (Scott J Waguespack)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] RE: Unresolved External Error with GetFieldAsStringList 
Message-ID: <053B3DFC11806D4FAB4EF8CC5062577BC567AC@mail5.uno.edu>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070419/2dd48c8a/attachment.html
From mateusz at loskot.net  Thu Apr 19 16:22:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Unresolved External Error with GetFieldAsStringList
In-Reply-To: <053B3DFC11806D4FAB4EF8CC5062577BC567AB@mail5.uno.edu>
References: <053B3DFC11806D4FAB4EF8CC5062577BC567AB@mail5.uno.edu>
Message-ID: <4627CF72.7000604@loskot.net>

Scott J Waguespack wrote:
> I've recently built gdal 1.4.0 (Using Visual Studios Express 2005),
> and I am having a linking error:
> 
> error LNK2001: unresolved external symbol "public: char * *
> __thiscall OGRFeature::GetFieldAsStringList(int)" 
> (?GetFieldAsStringList@OGRFeature@@QAEPAPADH@Z)

Scott,

This error is related to recent changes - this function has been
redeclared as const:

http://trac.osgeo.org/gdal/changeset/10020

I did complete rebuild of GDAL SVN *and* GDAL 1.40 using
Visual C++ 8.0 (VS 2005 Professional) and it links without any error.

Also, GDAL SVN builds well on following buildbot slaves:

http://buildbot.osgeo.org:8500/szekerest-vc80-full/builds/321
http://buildbot.osgeo.org:8500/szekerest-vc71-full/builds/328


Is there any chance you use gdal from SVN and you've some old object
files inside? If there is, please run
nmake /f makefile.vc clean
and then
nmake /f makefile.vc

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From richard.matsunaga at waypointinfo.com  Thu Apr 19 16:23:42 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] addition to C# bindings
Message-ID: <000001c782c0$9ff7d720$c2012b0a@Richard>

Hi Tamas,
 
Would it be possible to get the GDALGetRasterCategoryNames() method added to
the C# bindings? I suspect no one else will need this.
 
http://www.gdal.org/gdal_8h.html#c8de1aad913c58e63ee88b262594a228
 
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070419/15da2c49/attachment.html
From szekerest at gmail.com  Thu Apr 19 16:50:11 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: addition to C# bindings
In-Reply-To: <000001c782c0$9ff7d720$c2012b0a@Richard>
References: <000001c782c0$9ff7d720$c2012b0a@Richard>
Message-ID: <f3b73b7d0704191350r5cd5fdcag4bded8edc085b483@mail.gmail.com>

Why not?  Submit a ticket for it, please.
http://trac.osgeo.org/gdal/newticket

(Component = CSharpBindings)

Best regards,

Tamas


2007/4/19, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> Hi Tamas,
>
> Would it be possible to get the GDALGetRasterCategoryNames() method added to
> the C# bindings? I suspect no one else will need this.
>
> http://www.gdal.org/gdal_8h.html#c8de1aad913c58e63ee88b262594a228
>
> Richard

From warmerdam at pobox.com  Thu Apr 19 17:07:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] addition to C# bindings
In-Reply-To: <000001c782c0$9ff7d720$c2012b0a@Richard>
References: <000001c782c0$9ff7d720$c2012b0a@Richard>
Message-ID: <4627DA14.6040206@pobox.com>

Richard Matsunaga wrote:
> Hi Tamas,
>  
> Would it be possible to get the GDALGetRasterCategoryNames() method 
> added to the C# bindings? I suspect no one else will need this.
>  
> http://www.gdal.org/gdal_8h.html#c8de1aad913c58e63ee88b262594a228

Richard,

This should be done at the generic swig level, not only in c#.

Mateusz - perhaps you could take care of this?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Thu Apr 19 17:04:33 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] addition to C# bindings
In-Reply-To: <4627DA14.6040206@pobox.com>
References: <000001c782c0$9ff7d720$c2012b0a@Richard>
	<4627DA14.6040206@pobox.com>
Message-ID: <f3b73b7d0704191404j57fd36aataf38c02bfa68ca3f@mail.gmail.com>

A typemap for returning string array should be implemented that is
somewhat language specific. The skeleton of the method might be
implemented uniquely though.

Best regards,

Tamas


2007/4/19, Frank Warmerdam <warmerdam@pobox.com>:
> Richard Matsunaga wrote:
> > Hi Tamas,
> >
> > Would it be possible to get the GDALGetRasterCategoryNames() method
> > added to the C# bindings? I suspect no one else will need this.
> >
> > http://www.gdal.org/gdal_8h.html#c8de1aad913c58e63ee88b262594a228
>
> Richard,
>
> This should be done at the generic swig level, not only in c#.
>
> Mateusz - perhaps you could take care of this?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From mateusz at loskot.net  Thu Apr 19 17:04:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] addition to C# bindings
In-Reply-To: <4627DA14.6040206@pobox.com>
References: <000001c782c0$9ff7d720$c2012b0a@Richard>
	<4627DA14.6040206@pobox.com>
Message-ID: <4627D95C.1070707@loskot.net>

Frank Warmerdam wrote:
> Richard Matsunaga wrote:
>> Hi Tamas,
>>  
>> Would it be possible to get the GDALGetRasterCategoryNames() method
>> added to the C# bindings? I suspect no one else will need this.
>>  
>> http://www.gdal.org/gdal_8h.html#c8de1aad913c58e63ee88b262594a228
> 
> Richard,
> 
> This should be done at the generic swig level, not only in c#.
> 
> Mateusz - perhaps you could take care of this?

Frank

Sure. so may I ask for the ticket?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From JARED.RUBIN at saic.com  Thu Apr 19 18:34:54 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] gdal_translate speed of dted2
Message-ID: <200704191534.55024.rubinj@nemesis.tucson.saic.com>

Hi,  
  I am experiencing very slow translation of dted2 files to other file formats 
using the gdal_translate utility. dted2 files are only 3601 columns x 3601 
rows. So I am wondering how the conversion can be this slow. Is there a more 
direct way I can use the gdal library?
Thanks
Jared

From warmerdam at pobox.com  Thu Apr 19 19:30:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] gdal_translate speed of dted2
In-Reply-To: <200704191534.55024.rubinj@nemesis.tucson.saic.com>
References: <200704191534.55024.rubinj@nemesis.tucson.saic.com>
Message-ID: <4627FBA3.9090303@pobox.com>

Jared Rubin wrote:
> Hi,  
>   I am experiencing very slow translation of dted2 files to other file formats 
> using the gdal_translate utility. dted2 files are only 3601 columns x 3601 
> rows. So I am wondering how the conversion can be this slow. Is there a more 
> direct way I can use the gdal library?

Jared,

DTED files are column oriented instead of row oriented.  But applications
like gdal_translate read one horizontal scanline at a time.  This isn't
normally a problem unless the working cache is too small to hold all
the column blocks in which case every time you read one scanline, all
the column have to be reread from disk.

The solution is increase the cache size.

This can be accomplished by setting the GDAL_CACHEMAX environment
variable to a value large enough to hold all your data.  For a 3601x3601
DTED setting it 30 (ie. 30MB) should be fine.  This can also be done
on the commandline.

   gdal_translate --config GDAL_CACHEMAX 30 in.dt2 out.tif

This problem is *often* seen with dted 2 files, but can affect other
formats where a substantial cache is needed to avoid cache thrashing.

The default cache size has been increased to 40MB in the development
version, so we should stop seeing this question in regard to dted2 in
the future.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Apr 19 19:22:55 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <4627B01B.3040705@pobox.com>
References: <46266B22.8070307@loskot.net> <46279A4C.6020902@gov.yk.ca>
	<4627B01B.3040705@pobox.com>
Message-ID: <4627F9CF.5070609@gov.yk.ca>

Frank Warmerdam wrote:
> Matt Wilkie wrote:
>> Another issue I ran into was devising a scheme to easily discriminate 
>> between end user and developer docs. I floated an idea for this at 
>> http://trac.osgeo.org/gdal/wiki/TracDiscuss but have no responses so 
>> far. I don't know whether this is because no one has noticed the page 
>> or  if they just don't have an opinion. ;)
> 
> Matt,
> 
> To be honest, I read this over and wasn't too keen on the approach.  It
> can be quite difficult to enforce rules such as those you suggest for
> new wiki contributors so I'm inclined to avoid making rules that are
> likely to fall apart.  I am also not convinced that orderly organization
> in the index is that important an objective.

I'm not a wholehearted supporter of subwiki's myself, which is why I 
just didn't dive right in. I think a better approach overall would be to 
be able to tag pages with labels. E.g. ClipByPolygon could be all of 
"enduser, howto, tutorial" while ClipPolyAPI is "developer, 
under-discussion, incomplete" and SoftwareUsingGDAL is "enduser, 
developer".  I don't see a way to do this with Trac, but I don't know 
much about it yet.

> I didn't respond with my initial impressions because I hate to *always*
> be the wet blanket dumping on new ideas.  I thought I'd give others
> a chance to comment, or you a chance to test it out in practice.

The pause is appreciated. I can well empathise with not wanting to be a 
wet blanket. Oftimes that seems to be my main role within our department!

> I'd suggest users focus on user pages, as long as you don't mind
> developers focusing on developer stuff!

Not at all, that's why I'm seeking an easy filtering mechanism to begin 
with :) Maybe I'm jumping the gun though, and it's better to just start 
adding material and once we have a corpus it will be easier to see how 
to organise it.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From sy at perkins.net  Thu Apr 19 20:08:02 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] In memory OGR layers?
Message-ID: <46280462.3020901@perkins.net>

Is there an OGR format that I can use to create a vector layer in 
memory? Similar to the MEM driver for GDAL, but for vector layers?

In my application I have a need to create a vector layer and I don't 
want it to be backed up with a file unless the user subsequently decides 
to save it as one. However, I want my same vector layer rendering 
machinery to be able to handle regular OGR layers as well, so it would 
be convenient if I could create an internal memory layer and access it 
via OGR.

Any suggestions?

Cheers,

Simon


From warmerdam at pobox.com  Thu Apr 19 21:28:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] In memory OGR layers?
In-Reply-To: <46280462.3020901@perkins.net>
References: <46280462.3020901@perkins.net>
Message-ID: <4628175A.70201@pobox.com>

Simon Perkins wrote:
> Is there an OGR format that I can use to create a vector layer in 
> memory? Similar to the MEM driver for GDAL, but for vector layers?
> 
> In my application I have a need to create a vector layer and I don't 
> want it to be backed up with a file unless the user subsequently decides 
> to save it as one. However, I want my same vector layer rendering 
> machinery to be able to handle regular OGR layers as well, so it would 
> be convenient if I could create an internal memory layer and access it 
> via OGR.
> 
> Any suggestions?

Simon,

Absolutely. It is the "Memory" driver for OGR.  It basically just
holds an array of features behind the normal OGR API.  It is quite
"full featured" as var as update goes, and has been used by some
applications as the main container for vector layers they want to
render quickly, and also be able to edit in place.  The SilverEye
application from GeoTango did this quite successfully.  Of course
care should be taken with large numbers of features, since it is
rather memory hungry.  The in-memory representation is just OGRFeature's
and this isn't a particularly compact feature representation.

Hmm, I notice there isn't any driver page for this driver!  I suppose
I had better fix it.  I'll try and add one, and list it at:

   http://www.gdal.org/ogr/ogr_formats.html

sometime tonight.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From JPalmer at linz.govt.nz  Thu Apr 19 20:52:31 2007
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: Nad Grid with ogr2ogr
Message-ID: <s628b795.045@lh-gw2.linz.govt.nz>

Hi Brendan,
 
First make sure you have the NZGD49 <=> NZGD2000 datum distortion grid
installed into your proj4 lib directory. 
 
You can download the grid from the:
  LINZ website
http://www.linz.govt.nz/core/surveysystem/geodeticinfo/geodeticdatums/nzgd49tonzgd2000/index.html
or
  PROJ.4 ftp ftp://ftp.remotesensing.org/proj/proj-datumgrid-1.3.zip
 
The PROJ.4 lib directory is either ms4w\proj\nad for MS4W, proj_lib for
FWTools, or can be manually set using the PROJ_LIB environment
variable.
 
I would change your command a little so you don't need to specify the
NZTM proj def on the command line. Instead I would obtain it from the
'epsg' coordinate definition file in the proj lib directory :)
 
ogr2ogr -f "ESRI Shapefile" output.shp input.shp -s_srs "+proj=nzmg
+lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl
+datum=nzgd49 +units=m +nadgrids=nzgd2kgrid0005.1gsb +wktext" -t_srs
EPSG:2193
 
Note the use of the "+wktext" parameter for the NZMG proj text. You
need at least OGR 1.4.0 for this to work. See
http://lists.maptools.org/pipermail/gdal-dev/2007-April/012561.html for
more info.
 
Cheers
Jeremy

>>> <bcervin@gmail.com> 20/04/2007 11:49 >>>

Hello Jeremy,

I stumbled across your discussion about nad grid and ogr2ogr. I'm
trying to do the same reprojection as you.

As I noticed that this was very recent I'm hoping you might be able to
give me some help.

I'm having difficulty with ogr2ogr, NZMG->NZTM conversion for shape
files.

I've got what i think should work but it simply isn't. This is my
command:
ogr2ogr output.shp input.shp  -t_srs '+proj=tmerc +lat_0=0.0000000000
+lon_0=173.0000000000 +k_0=0.9996000000 +x_0=1600000.0000000000
+y_0=10000000.0000000000 +a=6378137 +rf=298.257222101 +no_defs
+towgs84=0.000,0.000,0.000' -s_srs '+proj=nzmg +lat_0=-41.0000000000
+lon_0=173.0000000000 +x_0=2510000.0000000000 +y_0=6023150.0000000000
+a=6378388 +rf=297 +no_defs +nadgrids=nzgd2kgrid0005.gsb'

I suspect that your command would work perfectly for me. I'm using a
MS4W version of ogr2ogr.

Thanks for your time.

Cheers, Brendan.


______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070420/5a8a2f12/attachment.html
From perrygeo at gmail.com  Thu Apr 19 21:50:59 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] trouble installing latest svn ngpython bindings on
	python 2.5
Message-ID: <5383fa5e0704191850w4fec6772l98e35f7a8da1ca1d@mail.gmail.com>

Hey folks,

 I checked out svn revision 11300 and I'm getting an error installing
the ngpython bindings:

make[2]: Entering directory `/home/perry/src/gdal/swig/python'
python setup.py install --prefix=/usr/local
numpy include /usr/lib/python2.5/site-packages/numpy/core/include
running install
running build
running build_py
running build_ext
building '_gdal' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O2 -Wall
-Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg
-I../../ogr -I/usr/lib/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c gdal_wrap.cpp -o
build/temp.linux-i686-2.5/gdal_wrap.o
cc1plus: warning: command line option "-Wstrict-prototypes" is valid
for Ada/C/ObjC but not for C++
gdal_wrap.cpp: In function 'int
SWIG_Python_ConvertFunctionPtr(PyObject*, void**, swig_type_info*)':
gdal_wrap.cpp:2051: error: invalid conversion from 'const char*' to 'char*'
gdal_wrap.cpp: In function 'void SWIG_Python_FixMethods(PyMethodDef*,
swig_const_info*, swig_type_info**, swig_type_info**)':
gdal_wrap.cpp:11168: error: invalid conversion from 'const char*' to 'char*'
error: command 'gcc' failed with exit status 1
make[2]: *** [install] Error 1
make[2]: Leaving directory `/home/perry/src/gdal/swig/python'
make[1]: *** [install] Error 2
make[1]: Leaving directory `/home/perry/src/gdal/swig'
make: *** [install-actions] Error 2


Any ideas?

-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From warmerdam at pobox.com  Thu Apr 19 23:41:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] trouble installing latest svn ngpython bindings on
	python 2.5
In-Reply-To: <5383fa5e0704191850w4fec6772l98e35f7a8da1ca1d@mail.gmail.com>
References: <5383fa5e0704191850w4fec6772l98e35f7a8da1ca1d@mail.gmail.com>
Message-ID: <4628366B.8010406@pobox.com>

Matthew Perry wrote:
> gdal_wrap.cpp: In function 'int
> SWIG_Python_ConvertFunctionPtr(PyObject*, void**, swig_type_info*)':
> gdal_wrap.cpp:2051: error: invalid conversion from 'const char*' to 'char*'
> gdal_wrap.cpp: In function 'void SWIG_Python_FixMethods(PyMethodDef*,
> swig_const_info*, swig_type_info**, swig_type_info**)':
> gdal_wrap.cpp:11168: error: invalid conversion from 'const char*' to 
> 'char*'
> error: command 'gcc' failed with exit status 1
> make[2]: *** [install] Error 1
> make[2]: Leaving directory `/home/perry/src/gdal/swig/python'
> make[1]: *** [install] Error 2
> make[1]: Leaving directory `/home/perry/src/gdal/swig'
> make: *** [install-actions] Error 2

Matthew,

I have committed r11301 with the python ng swig bindings regenerated
with swig 1.3.31 instead of 1.3.29 and I think this will fix this
problem (that only bites with python 2.5).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From perrygeo at gmail.com  Thu Apr 19 23:10:08 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] trouble installing latest svn ngpython bindings on
	python 2.5
In-Reply-To: <4628366B.8010406@pobox.com>
References: <5383fa5e0704191850w4fec6772l98e35f7a8da1ca1d@mail.gmail.com>
	<4628366B.8010406@pobox.com>
Message-ID: <5383fa5e0704192010o1c97870fp22ece8c66164c2c5@mail.gmail.com>

On 4/19/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> I have committed r11301 with the python ng swig bindings regenerated
> with swig 1.3.31 instead of 1.3.29 and I think this will fix this
> problem (that only bites with python 2.5).
>

Frank,

 That did the trick. Thanks!

-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From perrygeo at gmail.com  Thu Apr 19 23:20:21 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] error compiling gdal-grass against latest gdal +
	potential fix?
Message-ID: <5383fa5e0704192020p77d13607n89b19986e710d527@mail.gmail.com>

Hey folks,

 I ran into some minor troubles getting gdal-grass plugin (version
1.3.2) installed on gdal:

./configure --with-gdal=/usr/local/bin/gdal-config
--with-grass=/usr/local/grass-6.3.cvs

g++ -Wall -fPIC  -DUSE_CPL
-DGRASS_GISBASE=\"/usr/local/grass-6.3.cvs\" -I/usr/local/include
-I/usr/local/grass-6.3.cvs/include   -c -o grass57dataset.o
grass57dataset.cpp
grass57dataset.cpp: In static member function 'static GDALDataset*
GRASSDataset::Open(GDALOpenInfo*)':
grass57dataset.cpp:828: error: invalid conversion from 'int (*)(char*,
int)' to 'int (*)(const char*, int)'
grass57dataset.cpp:828: error:   initializing argument 1 of 'int
G_set_error_routine(int (*)(const char*, int))'
make: *** [grass57dataset.o] Error 1

Is there an updated gdal-grass plugin for 1.4.1 that I'm missing?



For the record, changing the following lines seems to fix it.


------ grass57dataset.cpp: 799
typedef int (*GrassErrorHandler)(const char *, int);

------  ogrgrassdatasource:91
typedef int (*GrassErrorHandler)(const char *, int);

I can't confirm that the above changes work but at they compile at the
very least ;-)


-- 
Matthew T. Perry
http://www.perrygeo.net

From mike at scenomics.com  Fri Apr 20 03:53:36 2007
From: mike at scenomics.com (Mike Richardson)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Resampling With GDAL
Message-ID: <027901c78321$034dac90$1b00da0c@YOURF739F58915>

Not sure if this has been covered yet but I read a thread recently that discussed image resampling with GDAL. The results with one resampling pass were not quite satisfactory ... 

At any rate, here is technique you can use to create smooth, anti-aliased resampled images with GDAL. It's not perfect and it is a bit more work but it does generate good results.

===============================================================
Sample Batch File
===============================================================

gdalwarp -of GTiff -ts 900 900 input_filename.tif -rcs resampled_01.tif
gdalwarp -of GTiff -ts 800 800 resampled_01.tif -rcs resampled_02.tif
gdalwarp -of GTiff -ts 700 700 resampled_02.tif -rcs resampled_03.tif
gdalwarp -of GTiff -ts 600 600 resampled_03.tif -rcs resampled_04.tif
gdalwarp -of GTiff -ts 500 500 resampled_04.tif -rcs resampled_05.tif
gdalwarp -of GTiff -ts 400 400 resampled_05.tif -rcs resampled_06.tif
gdalwarp -of GTiff -ts 300 300 resampled_06.tif -rcs resampled_07.tif
gdalwarp -of GTiff -ts 200 200 resampled_07.tif -rcs resampled_08.tif
gdalwarp -of GTiff -ts 128 128 resampled_08.tif -rcs resampled_09.tif


gdal_translate -of BMP resampled_09.tif resampled_10.bmp

del resampled_01.tif
del resampled_02.tif
del resampled_03.tif
del resampled_04.tif
del resampled_05.tif
del resampled_06.tif
del resampled_07.tif
del resampled_08.tif
del resampled_09.tif

===============================================================

This will generate a nicely smoothed image by using successive passes. Please forgive the redundancy if this has been suggested already.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070420/936fa667/attachment.html
From mateusz at loskot.net  Fri Apr 20 09:23:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] error compiling gdal-grass against latest gdal
	+	potential fix?
In-Reply-To: <5383fa5e0704192020p77d13607n89b19986e710d527@mail.gmail.com>
References: <5383fa5e0704192020p77d13607n89b19986e710d527@mail.gmail.com>
Message-ID: <4628BEBD.4000402@loskot.net>

Matthew Perry wrote:
> Hey folks,
> 
> I ran into some minor troubles getting gdal-grass plugin (version 
> 1.3.2) installed on gdal:
> 
> ./configure --with-gdal=/usr/local/bin/gdal-config 
> --with-grass=/usr/local/grass-6.3.cvs
> 
> g++ -Wall -fPIC  -DUSE_CPL 
> -DGRASS_GISBASE=\"/usr/local/grass-6.3.cvs\" -I/usr/local/include 
> -I/usr/local/grass-6.3.cvs/include   -c -o grass57dataset.o 
> grass57dataset.cpp grass57dataset.cpp: In static member function
> 'static GDALDataset* GRASSDataset::Open(GDALOpenInfo*)': 
> grass57dataset.cpp:828: error: invalid conversion from 'int
> (*)(char*, int)' to 'int (*)(const char*, int)' 
> grass57dataset.cpp:828: error:   initializing argument 1 of 'int 
> G_set_error_routine(int (*)(const char*, int))' make: ***
> [grass57dataset.o] Error 1

Matthew,

It seems prototype of function pointer has changed and first parameter
has been redefined from non-const to const.

> Is there an updated gdal-grass plugin for 1.4.1 that I'm missing?

AFAIK, not.

> For the record, changing the following lines seems to fix it.
> 
> ------ grass57dataset.cpp: 799 typedef int (*GrassErrorHandler)(const
> char *, int);
> 
> ------  ogrgrassdatasource:91 typedef int (*GrassErrorHandler)(const
> char *, int);
> 
> I can't confirm that the above changes work but at they compile at
> the very least ;-)

Yes, that will work, but probably it also will break backward
compatibility, I suppose.

I think the best would be to submit your proposal as a ticket,
if you don't mind.

Thank you!
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Apr 20 10:20:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <46266B22.8070307@loskot.net>
References: <46266B22.8070307@loskot.net>
Message-ID: <4628CC21.7060605@loskot.net>

Mateusz Loskot wrote:
> Also, I'd like to migrate our FAQ to the Wiki, so it will be easier to
> maintain it, encourage for contributions and monitor them.
> Is there any objection or I can move on with FAQ as the first item to
> migrate?

And here it is already migrated:

http://trac.osgeo.org/gdal/wiki/FAQ

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From gdal at geoworld.de  Fri Apr 20 10:38:27 2007
From: gdal at geoworld.de (Nicol Hermann)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] mitab driver
Message-ID: <1177079907.3425.41.camel@emil.intranet.gdv.com>

Hi list,

i have a question concerning the subversion version of the mitab driver
in gdal. I saw that it was updated to version 1.6.1.
Does this driver version support updates of existing files?
Many thanks
Nicol


From mateusz at loskot.net  Fri Apr 20 10:38:16 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Supported Compiler
Message-ID: <4628D058.4040008@loskot.net>

Hi,

I started matrix of supported compilers/system/architecture:

http://trac.osgeo.org/gdal/wiki/SupportedCompilers

Please, feel free to extend it with missing configurations or just
e-mail details to me and I'll ad them.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From vali.system at free.fr  Fri Apr 20 11:11:36 2007
From: vali.system at free.fr (ValiSystem)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <4628D058.4040008@loskot.net>
References: <4628D058.4040008@loskot.net>
Message-ID: <A6E06BE3-BB49-4D2E-A666-481359BCE781@free.fr>


On 20 avr. 07, at 16:38, Mateusz Loskot wrote:

> Hi,
>
> I started matrix of supported compilers/system/architecture:
>
> http://trac.osgeo.org/gdal/wiki/SupportedCompilers
>
> Please, feel free to extend it with missing configurations or just
> e-mail details to me and I'll ad them.
>
> Cheers
> --  
> Mateusz Loskot
> http://mateusz.loskot.net
>

I added my successful builds, but i have three suggestions :
- It could be nice to add an "OS flavour" column, to match different  
GNU/Linux distros, that might have different compiler patches/ 
libraries version that could break a build. It's also important for  
Mac OS X since panther, tiger and leopard have different buildings  
environment. I don't now windows enough to say if it is important to  
know the version (XP/Vista)
- I don't think we need to specify minor compiler version for GCC,  
since they are  bug fixes, generally heavily tested to avoid breaking  
anything.
- Giving GDAL version could help for history maintenance :-)




From mateusz at loskot.net  Fri Apr 20 11:32:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <A6E06BE3-BB49-4D2E-A666-481359BCE781@free.fr>
References: <4628D058.4040008@loskot.net>
	<A6E06BE3-BB49-4D2E-A666-481359BCE781@free.fr>
Message-ID: <4628DCFB.8020309@loskot.net>

ValiSystem wrote:
> On 20 avr. 07, at 16:38, Mateusz Loskot wrote:
> 
>> Hi,
>> 
>> I started matrix of supported compilers/system/architecture:
>> 
>> http://trac.osgeo.org/gdal/wiki/SupportedCompilers
>> 
>> Please, feel free to extend it with missing configurations or just 
>> e-mail details to me and I'll ad them.
>> 
>> Cheers -- Mateusz Loskot http://mateusz.loskot.net
>> 
> 
> I added my successful builds, but i have three suggestions : - It
> could be nice to add an "OS flavour" column, to match different 
> GNU/Linux distros, that might have different compiler
> patches/libraries version that could break a build.

Yes, I agree.

What about putting such details in Operating System column,
instead of GNU/Linux it could be something
like GNU/Linux (Ubuntu 6.10) ?

> It's also important for Mac OS X since panther, tiger and leopard
> have different buildings environment.

Yes.

> I don't now windows enough to say if it is important to know the
> version (XP/Vista)

I'll updated it.

> - I don't think we need to specify minor compiler version for GCC,
> since they are  bug fixes, generally heavily tested to avoid breaking
> anything.

I'd suggest to *specify* full version, with minor part included.

> - Giving GDAL version could help for history maintenance :-)

Yes, but I wasn't able get MoinMoin or reStructuredText tables working,
but the native table format is very simple, so it seems hard to get
complex matrix displayed:

http://trac.osgeo.org/gdal/wiki/WikiFormatting

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Apr 20 11:50:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Win32: Supported build environments
Message-ID: <4628E141.3040304@pobox.com>

Folks,

As I'm sure many have noticed in the past, I've been cool to actively
supporting MingW builds of GDAL.  Some people might remember that I was
the same way about Cygwin builds for three or four years, till I finally
accepted it should be a supported build environment.  I am always nervous
about adding new "supported" environments because they add additional
complexity and work.

However, there is clearly a significant interest in MingW builds.  So I'd
like to open a discussion about what win32 build environments we are willing
to expect maintainer time on supporting.  Environments not in this list can
still be supported by contributors, but we aren't going to commit significant
maintainer resources to them, and I won't feel personally bad if they rot. :-)

Currently supported:
  o Visual Studio 6 (via nmakefile)
  o Visual Studio 2003 (aka VC7.1) (via nmakefile)
  o Visual Studio 2005 (aka VC8) (via nmakefile)
  o Cygwin (via unix build mechanism)


Some potential candidates that come to mind:
  o Visual Studio Express Edition (the free download)
  o Visual Studio via project files (beyond the simple ones
    we have now that just run the nmakefiles)
  o MINGW (using the unix build scripts and makefiles)
  o Borland C
  o WATCOM C (or whatever the free version is called)

My currently thinking is that we should add MINGW, and VS Express
Edition support, and possibly drop Visual Studio 6 support.  After a bit
of discussion, my intent would be to make a motion declaring particular
compiler/build environments supported for win32, and thereafter we would
make a concerted effort to test them before releases, and fix issues that
come up.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From vali.system at free.fr  Fri Apr 20 12:09:08 2007
From: vali.system at free.fr (ValiSystem)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <4628DCFB.8020309@loskot.net>
References: <4628D058.4040008@loskot.net>
	<A6E06BE3-BB49-4D2E-A666-481359BCE781@free.fr>
	<4628DCFB.8020309@loskot.net>
Message-ID: <599EB6B1-D1FA-4361-93AB-BB6BE946D7F0@free.fr>


On 20 avr. 07, at 17:32, Mateusz Loskot wrote:

> ValiSystem wrote:
>> On 20 avr. 07, at 16:38, Mateusz Loskot wrote:
>>
>>> Hi,
>>>
>>> I started matrix of supported compilers/system/architecture:
>>>
>>> http://trac.osgeo.org/gdal/wiki/SupportedCompilers
>>>
>>> Please, feel free to extend it with missing configurations or just
>>> e-mail details to me and I'll ad them.
>>>
>>> Cheers -- Mateusz Loskot http://mateusz.loskot.net
>>>
>>
>> I added my successful builds, but i have three suggestions : - It
>> could be nice to add an "OS flavour" column, to match different
>> GNU/Linux distros, that might have different compiler
>> patches/libraries version that could break a build.
>
> Yes, I agree.
>
> What about putting such details in Operating System column,
> instead of GNU/Linux it could be something
> like GNU/Linux (Ubuntu 6.10) ?

Yes ! It may be a little less readable, but if everyone keeps the  
"GNU/Linux" at start, it should not be a problem.

>
>> It's also important for Mac OS X since panther, tiger and leopard
>> have different buildings environment.
>
> Yes.
>
>> I don't now windows enough to say if it is important to know the
>> version (XP/Vista)
>
> I'll updated it.
>
>> - I don't think we need to specify minor compiler version for GCC,
>> since they are  bug fixes, generally heavily tested to avoid breaking
>> anything.
>
> I'd suggest to *specify* full version, with minor part included.

I'm okay with that, it was just to be sure to keep the good ratio  
between needed informations and quantity of informations. If you  
think it's needed, it should appear.

>
>> - Giving GDAL version could help for history maintenance :-)
>
> Yes, but I wasn't able get MoinMoin or reStructuredText tables  
> working,
> but the native table format is very simple, so it seems hard to get
> complex matrix displayed:
>
> http://trac.osgeo.org/gdal/wiki/WikiFormatting

I definitely agree with you to keep the "simple stupid" table format  
instead of a complex one that would certainly lead to an unmaintained  
wiki page.
As a workaround, why not create a table for each version, with the  
version number in a heading ?

So, then i'll wait for your update to see what you have in mind. Feel  
free to remind me if it seems that i forgot.

>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Fri Apr 20 12:51:31 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <599EB6B1-D1FA-4361-93AB-BB6BE946D7F0@free.fr>
References: <4628D058.4040008@loskot.net>	<A6E06BE3-BB49-4D2E-A666-481359BCE781@free.fr>	<4628DCFB.8020309@loskot.net>
	<599EB6B1-D1FA-4361-93AB-BB6BE946D7F0@free.fr>
Message-ID: <4628EF93.30205@loskot.net>

ValiSystem wrote:
> On 20 avr. 07, at 17:32, Mateusz Loskot wrote:
>> ValiSystem wrote:
>>>
>>> - Giving GDAL version could help for history maintenance :-)
>>
>> Yes, but I wasn't able get MoinMoin or reStructuredText tables working,
>> but the native table format is very simple, so it seems hard to get
>> complex matrix displayed:
>>
>> http://trac.osgeo.org/gdal/wiki/WikiFormatting
> 
> I definitely agree with you to keep the "simple stupid" table format
> instead of a complex one that would certainly lead to an unmaintained
> wiki page.
> As a workaround, why not create a table for each version, with the
> version number in a heading ?

I think this is a very good idea and I'd go with that.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From matt.wilkie at gov.yk.ca  Fri Apr 20 13:41:14 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Resampling With GDAL
In-Reply-To: <027901c78321$034dac90$1b00da0c@YOURF739F58915>
References: <027901c78321$034dac90$1b00da0c@YOURF739F58915>
Message-ID: <4628FB3A.7090204@gov.yk.ca>

Hi Mike,

thanks for sharing the resample-by-stages technique. I've spruced up the 
batch file a bit. I initially tried to change the hardcoded intermediate 
sizes to use percentages instead of pixels but it turns out that while 
gdal_translate can do that, gdalwarp does not.  Anyway, here is my update:

===============================================================
NiceResample.cmd
===============================================================
@echo off
echo.
echo.   %~n0: resample an image nicely, slow but with good results
echo.
if [%2]==[] goto :Usage
if not exist "%1" goto :NoFile
rem if exist "%2" goto :OutExists
set inFile=%1
set outFile=%2

:: enables variable expansion inside FOR loop (!x! syntax)
:: requires Windows 2000 or newer
setlocal enabledelayedexpansion

:Main
	set tmpFile=%infile%
	:: resample from 900x900 pixels down to 128x128
	:: in 100px stages.
	for %%a in (900 800 700 600 500 400 300 200 128) do (
		gdalwarp -q -ts %%a %%a !tmpFile! xx_%%a_%inFile%
		set tmpFile=xx_%%a_%inFile%
		)
	:: "&& del" only deletes if previous command successful
	gdal_translate !tmpFile! %outFile% && del xx_*_%inFile%
	echo.
	echo   Finished writing 128x128px %outFile%
	goto :EOF

:NoFile
	echo *** Error: input %1 not found
	goto :EOF

:Usage
	echo.	Usage: %~n0 [input image] [output image]
	echo.
	echo   output overwritten if it exists
	goto :EOF
===============================================================


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Fri Apr 20 13:51:19 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <4628CC21.7060605@loskot.net>
References: <46266B22.8070307@loskot.net> <4628CC21.7060605@loskot.net>
Message-ID: <4628FD97.5030705@gov.yk.ca>

Mateusz Loskot wrote:
> Mateusz Loskot wrote:
>> Also, I'd like to migrate our FAQ to the Wiki, so it will be easier to
>> maintain it, encourage for contributions and monitor them.
>> Is there any objection or I can move on with FAQ as the first item to
>> migrate?
> 
> And here it is already migrated:
> 
> http://trac.osgeo.org/gdal/wiki/FAQ

good work, thanks Mateusz!


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Fri Apr 20 14:38:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Perl tests
Message-ID: <462908AB.909@loskot.net>

Hi,

I'm trying to find out why the Perl tests are still failing,
especially for stable branch builder:

http://buildbot.osgeo.org:8500/telascience-stable/builds/8/step-perl-test/0

I tried to run it locally and here is my output:

############################################################################
mloskot:~/dev/gdal/_svn/trunk/gdal/swig/perl$ make generate
...
mloskot:~/dev/gdal/_svn/trunk/gdal/swig/perl$ make build
...
mloskot:~/dev/gdal/_svn/trunk/gdal/swig/perl$ make test
make -f Makefile_Geo__GDAL
make[1]: Entering directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make[1]: Leaving directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make -f Makefile_Geo__GDAL__Const
make[1]: Entering directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make[1]: Leaving directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make -f Makefile_Geo__OGR
make[1]: Entering directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make[1]: Leaving directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make -f Makefile_Geo__OSR
make[1]: Entering directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make[1]: Leaving directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
make -f Makefile_Geo__GDAL test
make[1]: Entering directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
PERL_DL_NONLAZY=1 /usr/bin/perl "-MExtUtils::Command::MM" "-e"
"test_harness(0, 'blib/lib', 'blib/arch')" t/*.t
t/gdal....ok 1/0

Available drivers were AAIGrid, AIG, AirSAR, BMP, BSB, BT, CEOS, CPG,
DIPEx, DOQ1, DOQ2, DTED, EHdr, ELAS, ENVI, ESAT, FAST, FIT, FujiBAS,
GIF, GSAG, GSBG, GSC, GTiff, GXF, HFA, HTTP, IDA, ILWIS, INGR, ISIS2,
JDEM, JPEG, JPEG2000, L1B, LAN, Leveller, MEM, MFF, MFF2, NDF, NITF,
PAux, PCIDSK, PCRaster, PDS, PNG, PNM, RIK, RMF, RS2, RST, SAR_CEOS,
SDTS, SGI, USGSDEM, VRT, WCS, XPM
Drivers used in tests were: GTiff, MEM, EHdr
t/gdal....ok

t/ogr.....ok 1/0

Available drivers were AVCBin, CSV, DGN, ESRI Shapefile, GML, KML,
MapInfo File, Memory, OCI, ODBC, PGeo, PostgreSQL, REC, S57, SDTS,
TIGER, UK .NTF, VRT
Drivers used in tests were: ESRI Shapefile, MapInfo File, Memory
t/ogr.....ok

All tests successful.
Files=2, Tests=673,  1 wallclock secs ( 0.51 cusr +  0.07 csys =  0.58 CPU)
make[1]: Leaving directory
`/home/mloskot/dev/gdal/_svn/trunk/gdal/swig/perl'
############################################################################


Why I'm getting such short output and the stable builder prints out much
longer status?

Is there anything I've forgot about?


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Fri Apr 20 15:31:22 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Perl tests
In-Reply-To: <462908AB.909@loskot.net>
References: <462908AB.909@loskot.net>
Message-ID: <4629150A.10602@tkk.fi>

Mateusz Loskot kirjoitti:
> Hi,
>
> I'm trying to find out why the Perl tests are still failing,
> especially for stable branch builder:
>
> http://buildbot.osgeo.org:8500/telascience-stable/builds/8/step-perl-test/0
>   

It's running the old tests and the RST GeoTransform bug is probably not 
fixed there. Should I commit the new tests to the stable branch? How do 
I do that?

> Why I'm getting such short output and the stable builder prints out much
> longer status?
>   

I don't know, it's some magic in Perl's Test::More. It is re-using the 
same line for messages, when you watch.

Ari

> Is there anything I've forgot about?
>
>
> Cheers
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From tcchheng at ucsd.edu  Fri Apr 20 15:54:37 2007
From: tcchheng at ucsd.edu (t chheng)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Reading/Writing via GDAL library
Message-ID: <10109181.post@talk.nabble.com>


Hi,
I'm trying to read/write to vector shapefiles using the GDAL/OGR library.
I have compiled gdal-1.4.0 and have gdal14.dll

Now I'm trying to use the example code from the tutorial to get the sample
read/write of vector files working.
http://www.gdal.org/ogr/ogr_apitut.html

My sample code is basically
#include <ogrsf_frmts.h>
int main(int argc, char* argv[])
{
                readShapeFile();
return 0;
}
where readShapeFile is the code provided from the tutorial.

When I compile(note that the dll location is specified
-L/c/ossimcvs/gdal-1.4.0/lib -lgdal, i also tried -lgdal14), i get an
undefined reference error.

C:\msys\1.0\bin\make all
if [ ! -d /.shared_obj ] ; then mkdir /.shared_obj ; fi
g++ -mthreads -Wall -pipe  -O2 -g3  -L/c/Imaging/OpenCV/lib -lcxcore -lcv
-lhighgui -lcvaux -L/c/ossimcvs/bin -lossimcontrib_plugin -L/c/ossimcvs/bin
-lossimopencv_plugin -L/c/ossimcvs/gdal-1.4.0/lib -lgdal  ship_detect.o
-L/c/ossimcvs/ossim/lib/ossim -lossim          
-L/c/ossimcvs/libgeotiff-1.2.3/lib -L/c/ossimcvs/tiff-3.8.2/lib -lgeotiff
-ltiff  -L/c/ossimcvs/jpeg-6b -ljpeg -lm  -ljpeg -o ship_detect.exe
Info: resolving ossimProjection::RTTI_obj       by linking to
__imp___ZN15ossimProjection8RTTI_objE (auto-import)
Info: resolving vtable for ossimStdOutProgressby linking to
__imp___ZTV19ossimStdOutProgress (auto-import)
ship_detect.o: In function
`ZNSt6vectorI7BlobBoxSaIS0_EE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPS0_S2_EERKS0_':C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0xe):
undefined reference to `OGRRegisterAll'
:C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): undefined reference
to `OGRSFDriverRegistrar::Open(char const*, int, OGRSFDriver**)'

Any ideas why it isn't finding the correct references?

Thanks


-- 
View this message in context: http://www.nabble.com/Reading-Writing-via-GDAL-library-tf3620307.html#a10109181
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From Allan.Meek at drdc-rddc.gc.ca  Fri Apr 20 16:01:01 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] PCI .aux Labelled Raw Format
Message-ID: <2E58C246F17003499C141D334794D04902968372@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

I have an image in PCI's .aux labelled raw format. The .aux file
contains information similar to the following:

AuxiliaryTarget: image.raw
RawDefinition: 12000 18000 1
ChanDefinition-1: 32R 0 4 48072 Unswapped
MapUnits: LONG/LAT
UpLeftX: -77.00000
UpLeftY: 45.90000
LoRightX: -77.40000
LoRightY: 46.00000
ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

Gdalinfo gives the following info:

Driver: Paux/PCI .aux Labelled
Size is 12000, 18000
Coordinate System is ''
Origin = (-77.3622989999999993,45.9357545499999)
Pixel Size = (-0.000002179920120,0.000001437865907)
Corner Coordinates:
Upper Left  ( -77.0000000,  45.9000000)
Lower Left  ( -77.0000000,  46.0000000)
Upper Right ( -77.4000000,  45.9000000)
Lower Right ( -77.4000000,  46.0000000)
Center      ( -77.2000000,  45.9500000)
Band 1 Block=12000x1 Type=Float32, ColorInterp=Undefined

However, when I open the image in OpenEV, the georeferencing isn't
correct. The image is displayed upside down, with the north end at the
bottom of the window and the south end at the top of the window. On the
other hand, east and west are fine. The layer properties window shows
that the image's projection is blank.

If I open a shape file in OpenEV before opening the image, the image is
oriented properly. Again, the layer properties window shows that the
image's projection is blank.

What needs to be changed in the driver to correct this problem? I've
tried a couple of things, but haven't figured it out.

Thanks,
Allan Meek


From mateusz at loskot.net  Fri Apr 20 16:35:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Perl tests
In-Reply-To: <4629150A.10602@tkk.fi>
References: <462908AB.909@loskot.net> <4629150A.10602@tkk.fi>
Message-ID: <46292421.4070004@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot kirjoitti:
>> Hi,
>> 
>> I'm trying to find out why the Perl tests are still failing, 
>> especially for stable branch builder:
>> 
>> http://buildbot.osgeo.org:8500/telascience-stable/builds/8/step-perl-test/0
>> 
> 
> It's running the old tests and the RST GeoTransform bug is probably
> not fixed there. Should I commit the new tests to the stable branch?
> How do I do that?

Ari,

If we agree the new tests should go to the stable branch, I'd
recommend to do it with "svn merge" command.

Or you can also checkout the branches/1.4, and copy files if you feel it
will work and there are no other serious changes introduced later.

>> Why I'm getting such short output and the stable builder prints out
>> much longer status?
> 
> I don't know, it's some magic in Perl's Test::More. It is re-using
> the same line for messages, when you watch.

I see.

OK, so I think the best is to update the Perl bindings in the branches/1.4.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Apr 20 16:45:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Reading/Writing via GDAL library
In-Reply-To: <10109181.post@talk.nabble.com>
References: <10109181.post@talk.nabble.com>
Message-ID: <46292660.3090801@loskot.net>

t chheng wrote:
> Hi, I'm trying to read/write to vector shapefiles using the GDAL/OGR
> library. I have compiled gdal-1.4.0 and have gdal14.dll
> 
> Now I'm trying to use the example code from the tutorial to get the
> sample read/write of vector files working. 
> http://www.gdal.org/ogr/ogr_apitut.html
> 
> My sample code is basically #include <ogrsf_frmts.h> int main(int
> argc, char* argv[]) { readShapeFile(); return 0; } where
> readShapeFile is the code provided from the tutorial.
> 
> When I compile(note that the dll location is specified 
> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal, i also tried -lgdal14), i get an
>  undefined reference error.
> 
> C:\msys\1.0\bin\make all if [ ! -d /.shared_obj ] ; then mkdir
> /.shared_obj ; fi g++ -mthreads -Wall -pipe  -O2 -g3
> -L/c/Imaging/OpenCV/lib -lcxcore -lcv -lhighgui -lcvaux
> -L/c/ossimcvs/bin -lossimcontrib_plugin -L/c/ossimcvs/bin 
> -lossimopencv_plugin -L/c/ossimcvs/gdal-1.4.0/lib -lgdal
> ship_detect.o -L/c/ossimcvs/ossim/lib/ossim -lossim 
> -L/c/ossimcvs/libgeotiff-1.2.3/lib -L/c/ossimcvs/tiff-3.8.2/lib
> -lgeotiff -ltiff  -L/c/ossimcvs/jpeg-6b -ljpeg -lm  -ljpeg -o
> ship_detect.exe Info: resolving ossimProjection::RTTI_obj       by
> linking to __imp___ZN15ossimProjection8RTTI_objE (auto-import) Info:
> resolving vtable for ossimStdOutProgressby linking to 
> __imp___ZTV19ossimStdOutProgress (auto-import) ship_detect.o: In
> function 
> `ZNSt6vectorI7BlobBoxSaIS0_EE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPS0_S2_EERKS0_':C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0xe):
>  undefined reference to `OGRRegisterAll' 
> :C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): undefined
> reference to `OGRSFDriverRegistrar::Open(char const*, int,
> OGRSFDriver**)'
> 
> Any ideas why it isn't finding the correct references?


I've never used MinGW to build GDAL but I suppose the library specifier
for GDAL is incorrect, may be MinGW needs some special form of -lgdal if
you want to link with import library for DLL, may be -llibgdal...

Check what binaries you have got after you GDAL building.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Apr 20 17:31:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] PCI .aux Labelled Raw Format
In-Reply-To: <2E58C246F17003499C141D334794D04902968372@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D04902968372@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <46293122.5000805@pobox.com>

Meek, Allan (Contractor) wrote:
> Hi,
> 
> I have an image in PCI's .aux labelled raw format. The .aux file
> contains information similar to the following:
> 
> AuxiliaryTarget: image.raw
> RawDefinition: 12000 18000 1
> ChanDefinition-1: 32R 0 4 48072 Unswapped
> MapUnits: LONG/LAT
> UpLeftX: -77.00000
> UpLeftY: 45.90000
> LoRightX: -77.40000
> LoRightY: 46.00000
> ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

Allan,

According to the above UpLeftY is 45.9 and LoRightY is 46.  So it
appears the image on disk is "south up".  I believe OpenEV defaults to
displaying things north up rather than in "natural image orientation"
and so flips it around into what is presumably north up format even though
it is upside compared to how it might look elsewhere.

In openev, you can switch between georeferenced (north up) mode and natural
image mode by hitting the blue-green world icon.  You can also use
cntl-f1 and cntl-f2 to flip your view horizontally and vertically.

As far as I can tell, gdalinfo is accurately reflecting the bounds of the
image as stored in the .aux file.  So I'm not sure there is anything here to
be fixed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tcchheng at ucsd.edu  Fri Apr 20 17:41:43 2007
From: tcchheng at ucsd.edu (t chheng)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Reading/Writing via GDAL library
In-Reply-To: <46292660.3090801@loskot.net>
References: <10109181.post@talk.nabble.com> <46292660.3090801@loskot.net>
Message-ID: <10110730.post@talk.nabble.com>


Hi there,
GDAL produced gdal14.dll

I tried:
-L/c/ossimcvs/gdal-1.4.0/lib -lgdal 
-L/c/ossimcvs/gdal-1.4.0/lib -lgdal14
-L/c/ossimcvs/gdal-1.4.0/lib -l"gdal14.dll"

all with the same error.

tommy


Mateusz Loskot wrote:
> 
> t chheng wrote:
>> Hi, I'm trying to read/write to vector shapefiles using the GDAL/OGR
>> library. I have compiled gdal-1.4.0 and have gdal14.dll
>> 
>> Now I'm trying to use the example code from the tutorial to get the
>> sample read/write of vector files working. 
>> http://www.gdal.org/ogr/ogr_apitut.html
>> 
>> My sample code is basically #include <ogrsf_frmts.h> int main(int
>> argc, char* argv[]) { readShapeFile(); return 0; } where
>> readShapeFile is the code provided from the tutorial.
>> 
>> When I compile(note that the dll location is specified 
>> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal, i also tried -lgdal14), i get an
>>  undefined reference error.
>> 
>> C:\msys\1.0\bin\make all if [ ! -d /.shared_obj ] ; then mkdir
>> /.shared_obj ; fi g++ -mthreads -Wall -pipe  -O2 -g3
>> -L/c/Imaging/OpenCV/lib -lcxcore -lcv -lhighgui -lcvaux
>> -L/c/ossimcvs/bin -lossimcontrib_plugin -L/c/ossimcvs/bin 
>> -lossimopencv_plugin -L/c/ossimcvs/gdal-1.4.0/lib -lgdal
>> ship_detect.o -L/c/ossimcvs/ossim/lib/ossim -lossim 
>> -L/c/ossimcvs/libgeotiff-1.2.3/lib -L/c/ossimcvs/tiff-3.8.2/lib
>> -lgeotiff -ltiff  -L/c/ossimcvs/jpeg-6b -ljpeg -lm  -ljpeg -o
>> ship_detect.exe Info: resolving ossimProjection::RTTI_obj       by
>> linking to __imp___ZN15ossimProjection8RTTI_objE (auto-import) Info:
>> resolving vtable for ossimStdOutProgressby linking to 
>> __imp___ZTV19ossimStdOutProgress (auto-import) ship_detect.o: In
>> function 
>> `ZNSt6vectorI7BlobBoxSaIS0_EE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPS0_S2_EERKS0_':C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0xe):
>>  undefined reference to `OGRRegisterAll' 
>> :C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): undefined
>> reference to `OGRSFDriverRegistrar::Open(char const*, int,
>> OGRSFDriver**)'
>> 
>> Any ideas why it isn't finding the correct references?
> 
> 
> I've never used MinGW to build GDAL but I suppose the library specifier
> for GDAL is incorrect, may be MinGW needs some special form of -lgdal if
> you want to link with import library for DLL, may be -llibgdal...
> 
> Check what binaries you have got after you GDAL building.
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Reading-Writing-via-GDAL-library-tf3620307.html#a10110730
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From szekerest at gmail.com  Fri Apr 20 18:46:33 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Guidelines for the typemap usage for the SWIG bindings
Message-ID: <f3b73b7d0704201546g3f8c7672r8466efa8f035ed24@mail.gmail.com>

Developers,

Upon adding support for Band.GetRasterCategoryNames,
Band.SetRasterCategoryNames to the SWIG interface I've realized the
need of an agreement among the binding owners about the desired usage
of the various typemaps. In the current implementation I cannot see an
obvious direction. Actually it would be much easier if there were a
common policy when %applying the typemaps on a particular member.

In case of the typemap char** we could use for example

%typemap() char **stringarray   for passing and returning arrays of strings
%typemap() char **argout  for mapping outbound string parameters
and so on

Currently it's quite a difficult task even to count how many different
typemaps we have for char** particularly.

Having an unique approach would ensure not require to implement
various typemaps for the same purpose.
In addition we should also remove the several inhouse solutions like:

%rename (GetProjectionMethodParameterList) OPTGetParameterList;
#if defined(SWIGPERL)
%apply (char **free) {(char **)};
%apply (char **argout) {(char **username)};
#endif
char **OPTGetParameterList( char *method, char **username );
#if defined(SWIGPERL)
%clear (char **);
%clear (char **username);
#endif

Which is not too benefical for the other languages.

I guess this kind of work - if needed - would require an RFC to have.
But at first we should get together with the ideas which ones we
should really keep, omit or replace.

Best regards,

Tamas

From ivan.lucena at pmldnet.com  Fri Apr 20 21:57:57 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <4628E141.3040304@pobox.com>
References: <4628E141.3040304@pobox.com>
Message-ID: <000101c783b8$7cef09d0$0a0a0a0a@idrisi.clarku.edu>

Frank,

It looks like a very reasonable proposition.

I understand that we should draw a line where the responsibility of maintain
GDAL ends so that it could be done well. But still supporting and promoting
new initiatives. 

That is not the case of VC 6. :-)

As an example, today The HDF Group just release the Newsletter #92 that says
that they are dropping support for MSVC++ 6.0 in the release of HDF5-1.8.0:

http://www.hdfgroup.org/newsletters/newsletter92.html

Some of us would say: 

Au revoir vieil ami!  

Regards,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Friday, April 20, 2007 11:50 AM
To: gdal-dev
Subject: [Gdal-dev] Win32: Supported build environments

Folks,

As I'm sure many have noticed in the past, I've been cool to actively
supporting MingW builds of GDAL.  Some people might remember that I was
the same way about Cygwin builds for three or four years, till I finally
accepted it should be a supported build environment.  I am always nervous
about adding new "supported" environments because they add additional
complexity and work.

However, there is clearly a significant interest in MingW builds.  So I'd
like to open a discussion about what win32 build environments we are willing
to expect maintainer time on supporting.  Environments not in this list can
still be supported by contributors, but we aren't going to commit
significant
maintainer resources to them, and I won't feel personally bad if they rot.
:-)

Currently supported:
  o Visual Studio 6 (via nmakefile)
  o Visual Studio 2003 (aka VC7.1) (via nmakefile)
  o Visual Studio 2005 (aka VC8) (via nmakefile)
  o Cygwin (via unix build mechanism)


Some potential candidates that come to mind:
  o Visual Studio Express Edition (the free download)
  o Visual Studio via project files (beyond the simple ones
    we have now that just run the nmakefiles)
  o MINGW (using the unix build scripts and makefiles)
  o Borland C
  o WATCOM C (or whatever the free version is called)

My currently thinking is that we should add MINGW, and VS Express
Edition support, and possibly drop Visual Studio 6 support.  After a bit
of discussion, my intent would be to make a motion declaring particular
compiler/build environments supported for win32, and thereafter we would
make a concerted effort to test them before releases, and fix issues that
come up.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Sat Apr 21 04:28:19 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Reading/Writing via GDAL library
In-Reply-To: <10109181.post@talk.nabble.com>
References: <10109181.post@talk.nabble.com>
Message-ID: <4629CB23.4040007@tkk.fi>

t chheng kirjoitti:
> Hi,
> I'm trying to read/write to vector shapefiles using the GDAL/OGR library.
> I have compiled gdal-1.4.0 and have gdal14.dll
>
> Now I'm trying to use the example code from the tutorial to get the sample
> read/write of vector files working.
> http://www.gdal.org/ogr/ogr_apitut.html
>
> My sample code is basically
> #include <ogrsf_frmts.h>
> int main(int argc, char* argv[])
> {
>                 readShapeFile();
> return 0;
> }
> where readShapeFile is the code provided from the tutorial.
>
> When I compile(note that the dll location is specified
> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal, i also tried -lgdal14), i get an
> undefined reference error.
>
> C:\msys\1.0\bin\make all
> if [ ! -d /.shared_obj ] ; then mkdir /.shared_obj ; fi
> g++ -mthreads -Wall -pipe  -O2 -g3  -L/c/Imaging/OpenCV/lib -lcxcore -lcv
> -lhighgui -lcvaux -L/c/ossimcvs/bin -lossimcontrib_plugin -L/c/ossimcvs/bin
> -lossimopencv_plugin -L/c/ossimcvs/gdal-1.4.0/lib -lgdal  ship_detect.o
> -L/c/ossimcvs/ossim/lib/ossim -lossim          
> -L/c/ossimcvs/libgeotiff-1.2.3/lib -L/c/ossimcvs/tiff-3.8.2/lib -lgeotiff
> -ltiff  -L/c/ossimcvs/jpeg-6b -ljpeg -lm  -ljpeg -o ship_detect.exe
> Info: resolving ossimProjection::RTTI_obj       by linking to
> __imp___ZN15ossimProjection8RTTI_objE (auto-import)
> Info: resolving vtable for ossimStdOutProgressby linking to
> __imp___ZTV19ossimStdOutProgress (auto-import)
> ship_detect.o: In function
> `ZNSt6vectorI7BlobBoxSaIS0_EE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPS0_S2_EERKS0_':C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0xe):
> undefined reference to `OGRRegisterAll'
> :C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): undefined reference
> to `OGRSFDriverRegistrar::Open(char const*, int, OGRSFDriver**)'
>
> Any ideas why it isn't finding the correct references?
>   

Why do you need to link in the ossim stuff anyway (the undefined 
reference is from ossim)? Are your ossim binaries working?

Ari

> Thanks
>
>
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Sat Apr 21 04:53:06 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Guidelines for the typemap usage for the SWIG bindings
In-Reply-To: <f3b73b7d0704201546g3f8c7672r8466efa8f035ed24@mail.gmail.com>
References: <f3b73b7d0704201546g3f8c7672r8466efa8f035ed24@mail.gmail.com>
Message-ID: <4629D0F2.8000702@tkk.fi>

I agree. If you can draft such an agreement that would be very welcome. 
I must say that I have a really hard time understanding what is going on 
in the swig bindings at any given place and time - somehow swig requires 
a perverse and a crooked way of thinking ;), not linear at all.

I used the #ifdef's you refer to below, as I did not know if the effect 
would be harmful for the other bindings or if they had such typemaps I 
was using/adding to the Perl bindings. BTW, that whole section is #if 
!defined(SWIGPYTHON) (!). I don't recall how I announced these things on 
the list, but I think my intention was that having the typemap applied 
for Perl only was only temporary solution.

Cheers,

Ari

Tamas Szekeres kirjoitti:
> Developers,
>
> Upon adding support for Band.GetRasterCategoryNames,
> Band.SetRasterCategoryNames to the SWIG interface I've realized the
> need of an agreement among the binding owners about the desired usage
> of the various typemaps. In the current implementation I cannot see an
> obvious direction. Actually it would be much easier if there were a
> common policy when %applying the typemaps on a particular member.
>
> In case of the typemap char** we could use for example
>
> %typemap() char **stringarray   for passing and returning arrays of 
> strings
> %typemap() char **argout  for mapping outbound string parameters
> and so on
>
> Currently it's quite a difficult task even to count how many different
> typemaps we have for char** particularly.
>
> Having an unique approach would ensure not require to implement
> various typemaps for the same purpose.
> In addition we should also remove the several inhouse solutions like:
>
> %rename (GetProjectionMethodParameterList) OPTGetParameterList;
> #if defined(SWIGPERL)
> %apply (char **free) {(char **)};
> %apply (char **argout) {(char **username)};
> #endif
> char **OPTGetParameterList( char *method, char **username );
> #if defined(SWIGPERL)
> %clear (char **);
> %clear (char **username);
> #endif
>
> Which is not too benefical for the other languages.
>
> I guess this kind of work - if needed - would require an RFC to have.
> But at first we should get together with the ideas which ones we
> should really keep, omit or replace.
>
> Best regards,
>
> Tamas
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Sat Apr 21 16:55:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] VSIFSeekL() - making vsi_l_offset signed instead of
	unsigned
Message-ID: <462A7A2C.6030208@pobox.com>

Folks,

I have discovered that the vsi_l_offset type used for offsets arguments
to VSIFSeekL() are GUIntBig - an unsigned type, instead of a signed type
like size_t of the fseek() POSIX analog.

I would like to change vsi_l_offset in 1.5 to be of type GIntBig instead
so that constructions like:

     	if( VSIFSeekL( poGDS->fp, -1, SEEK_CUR ) != 0 )

will work properly.  I have prepared a ticket on the issue, and I'm wondering
if there are any objections to my doing so.

   http://trac.osgeo.org/gdal/ticket/1590

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sat Apr 21 17:28:52 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Guidelines for the typemap usage for the SWIG bindings
In-Reply-To: <4629D0F2.8000702@tkk.fi>
References: <f3b73b7d0704201546g3f8c7672r8466efa8f035ed24@mail.gmail.com>
	<4629D0F2.8000702@tkk.fi>
Message-ID: <f3b73b7d0704211428y4e861b41vd465bf83b7817120@mail.gmail.com>

2007/4/21, Ari Jolma <ari.jolma@tkk.fi>:
> I agree. If you can draft such an agreement that would be very welcome.
> I must say that I have a really hard time understanding what is going on
> in the swig bindings at any given place and time - somehow swig requires
> a perverse and a crooked way of thinking ;), not linear at all.
>

Ari,

I volunteer to make my initial offer in a week or two. But surely it
will require some further refinements considering the aspects of the
other languages I'm not familiar with.
But, indeed, SWIG requires a kind of obsession from the developer to
survive, often having to dig into the implementation to understand
what's going on behind the scenes. I guess no one can really
understand the whole stuff until making a full %feature-d language
implementation for it ;-).

> I used the #ifdef's you refer to below, as I did not know if the effect
> would be harmful for the other bindings or if they had such typemaps I
> was using/adding to the Perl bindings. BTW, that whole section is #if
> !defined(SWIGPYTHON) (!). I don't recall how I announced these things on
> the list, but I think my intention was that having the typemap applied
> for Perl only was only temporary solution.
>

One of my main objectives is that the developer could blindly add
working implementations for even the members having esoteric types of
the formal parameter list or the return value. Applying commonly
accepted typemaps for the GDAL/OGR datatypes would establish the
proper environment for this purpose. In addition many of the members
having unmapped types like SWIGTYPE_p_p_char would disappear
automatically from my (C#) side.
And there should be at least one doc for the bindings maintainers
including the "which typemaps are compulsory to implement" kind of
information inside.

Best regards,

Tamas

From tcchheng at ucsd.edu  Sun Apr 22 00:54:25 2007
From: tcchheng at ucsd.edu (Tommy Chheng)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Reading/Writing via GDAL library
In-Reply-To: <4629CB23.4040007@tkk.fi>
References: <10109181.post@talk.nabble.com> <4629CB23.4040007@tkk.fi>
Message-ID: <462AEA81.6040201@ucsd.edu>

I will be using the GDAL in conjunction with OSSIM, but for this error, 
I commented out the OSSIM-specific code and just ran the tutorial code.

This is one of the errors that I'm encountering
:C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): undefined reference
to `OGRSFDriverRegistrar::Open(char const*, int, OGRSFDriver**)'

I have gdal14.dll and I tried linking it using:
-L/c/ossimcvs/gdal-1.4.0/lib -lgdal
-L/c/ossimcvs/gdal-1.4.0/lib -lgdal14
-L/c/ossimcvs/gdal-1.4.0/lib -l"gdal14.dll"

All with the same error.  Any ideas why it isn't linking correctly?

Thanks,
Tommy

Ari Jolma wrote:
> t chheng kirjoitti:
>> Hi,
>> I'm trying to read/write to vector shapefiles using the GDAL/OGR 
>> library.
>> I have compiled gdal-1.4.0 and have gdal14.dll
>>
>> Now I'm trying to use the example code from the tutorial to get the 
>> sample
>> read/write of vector files working.
>> http://www.gdal.org/ogr/ogr_apitut.html
>>
>> My sample code is basically
>> #include <ogrsf_frmts.h>
>> int main(int argc, char* argv[])
>> {
>>                 readShapeFile();
>> return 0;
>> }
>> where readShapeFile is the code provided from the tutorial.
>>
>> When I compile(note that the dll location is specified
>> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal, i also tried -lgdal14), i get an
>> undefined reference error.
>>
>> C:\msys\1.0\bin\make all
>> if [ ! -d /.shared_obj ] ; then mkdir /.shared_obj ; fi
>> g++ -mthreads -Wall -pipe  -O2 -g3  -L/c/Imaging/OpenCV/lib -lcxcore 
>> -lcv
>> -lhighgui -lcvaux -L/c/ossimcvs/bin -lossimcontrib_plugin 
>> -L/c/ossimcvs/bin
>> -lossimopencv_plugin -L/c/ossimcvs/gdal-1.4.0/lib -lgdal  ship_detect.o
>> -L/c/ossimcvs/ossim/lib/ossim -lossim          
>> -L/c/ossimcvs/libgeotiff-1.2.3/lib -L/c/ossimcvs/tiff-3.8.2/lib 
>> -lgeotiff
>> -ltiff  -L/c/ossimcvs/jpeg-6b -ljpeg -lm  -ljpeg -o ship_detect.exe
>> Info: resolving ossimProjection::RTTI_obj       by linking to
>> __imp___ZN15ossimProjection8RTTI_objE (auto-import)
>> Info: resolving vtable for ossimStdOutProgressby linking to
>> __imp___ZTV19ossimStdOutProgress (auto-import)
>> ship_detect.o: In function
>> `ZNSt6vectorI7BlobBoxSaIS0_EE13_M_insert_auxEN9__gnu_cxx17__normal_iteratorIPS0_S2_EERKS0_':C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0xe): 
>>
>> undefined reference to `OGRRegisterAll'
>> :C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): undefined 
>> reference
>> to `OGRSFDriverRegistrar::Open(char const*, int, OGRSFDriver**)'
>>
>> Any ideas why it isn't finding the correct references?
>>   
>
> Why do you need to link in the ossim stuff anyway (the undefined 
> reference is from ossim)? Are your ossim binaries working?
>
> Ari
>
>> Thanks
>>
>>
>>   
>
>


From nhv at cape.com  Sun Apr 22 02:19:33 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Reading/Writing via GDAL library
In-Reply-To: <462AEA81.6040201@ucsd.edu>
Message-ID: <200704220619.l3M6JWPv002845@smtp11.cape.com>

Tommy Chheng writes:AL library
> 
> I will be using the GDAL in conjunction with OSSIM, but for 
> this error, I commented out the OSSIM-specific code and just 
> ran the tutorial code.
> 
> This is one of the errors that I'm encountering
> :C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): 
> undefined reference to `OGRSFDriverRegistrar::Open(char 
> const*, int, OGRSFDriver**)'
> 
> I have gdal14.dll and I tried linking it using:
> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal
> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal14
> -L/c/ossimcvs/gdal-1.4.0/lib -l"gdal14.dll"
> 
> All with the same error.  Any ideas why it isn't linking correctly?


Tommy

Using the last example on http://www.gdal.org/ogr/ogr_apitut.html

The following commandline works for me with MingW in a MSYS shell

c++ `gdal-config --cflags` ogr_examp.c++ `gdal-config --libs` -o
org_examp.exe

Note the back ticks 

HTH

Norman


From aaime at openplans.org  Sun Apr 22 04:26:34 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Java and the build environment
Message-ID: <462B1C3A.7030302@openplans.org>

Hi,
I've looked at the discussion about creating standard binaries
and about the supported enviroments under win32.

Let me add my 2 cents from the point of view of the java developer
that struggles making these c++ things work :-)

Building gdal and making the java bindings work was possible, for me,
only under Linux and Visual C++ 6.0. In both environments, build,
copy the resuling dll in the java library path, run, works. Aahh,nice!

I also tried with Microsoft Visual C++ Express 2005 + windows sdk + atl 
fixes I grabbed on a random internet page.
Gdal builds and all the gdal* apps, as well as the ogr* apps do work. 
Swig bindings to build. But for the life of me, I cannot make JNI load
the resulting libraries, it always complains about missing dependent
libraries. I tried using Dependency Walker to figure out the missing
ones and copied them right besides the gdal/ogr ones, and in the end
I was missing only the delay load library that makes up the Vista UI
(which of course I don't have on Windows) without luck, the error
was always the same.

On mingw I cannot even make gdal compile, I guess I need a "gdal+mingw 
for dummies" guide to try this road.

On cygwin, everything compiles (after taking _ages_, so slow that it's
basically unusable), but I don't see dll generated anywhere, the
swig java bindings do generate some .so.exe files... Are these things
usable only under a cygwin environemnt? Don't know, but if so, it's
unacceptable anyways.

So, long story short, the only full blown and licensed version of visual 
c++ I could put my hands upon was the vc 6.0 one (my old employer once
upon a time used it along with VB6), and that's the only one I could use
to make java bindings work for real.

If anyone has ideas on how to make vc++ 2005 or mingw work, I'm all 
ears, thought my response times will be limited by the fact that I have
to keep this on my (limited) spare time.
Both environments are in big need of a "howto" such as the VC++
one imho (http://trac.osgeo.org/gdal/wiki/BuildingOnWindows).

Cheers
Andrea

From ari.jolma at tkk.fi  Sun Apr 22 05:05:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Building with VC7.1
Message-ID: <462B2545.4040203@tkk.fi>

I downloaded clean 1.4.1.tar.gz and I've got the VC 7.1 from an official 
installer.

I issue the command nmake /f makefile.vc in Visual C++ Toolkit 2003 
command prompt and I get the error "windows.h": no such file. Which I 
think is somewhat ironic.

What gives? BTW, I'm only trying to get something that I can 
subsequentially use in linking against GDAL, i.e., gdal.lib or something 
like that.

Regards,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Sun Apr 22 06:21:58 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Java and the build environment
In-Reply-To: <462B1C3A.7030302@openplans.org>
References: <462B1C3A.7030302@openplans.org>
Message-ID: <462B3746.1040905@tkk.fi>

Andrea Aime kirjoitti:
>
> On mingw I cannot even make gdal compile, I guess I need a "gdal+mingw 
> for dummies" guide to try this road.

Get MinGW-5.1.3 exe, MSYS-1.0.10.exe, w32api-3.8.tar.gz, 
binutils-2.17.50-20060824-1.tar.gz and install them (this may not be 
comprehensive list but start with MinGW and execute the install package 
and try to add gcc etc. - the tar packages you just unpack to c:\mingw). 
Then open MSYS prompt, go to the dir where you unpacked GDAL, and issue 
commands:

./configure
make
make install

And you should have libgdal-1.dll in your c:\msys\1.0\local\bin and 
libgdal-1.dll.a in c:\msys\1.0\local\lib.

Easy :)

For the bindings I can then only tell how to proceed to get the Perl 
ones compiled, installed and used.

Perhaps I should copy this to 
http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ivan.lucena at pmldnet.com  Sun Apr 22 07:07:32 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Building with VC7.1
In-Reply-To: <462B2545.4040203@tkk.fi>
References: <462B2545.4040203@tkk.fi>
Message-ID: <000301c784ce$6d3640f0$0a0a0a0a@idrisi.clarku.edu>

Ari,

Did you run VCVARS32.BAT first ?

Regards,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ari Jolma
Sent: Sunday, April 22, 2007 5:05 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Building with VC7.1

I downloaded clean 1.4.1.tar.gz and I've got the VC 7.1 from an official 
installer.

I issue the command nmake /f makefile.vc in Visual C++ Toolkit 2003 
command prompt and I get the error "windows.h": no such file. Which I 
think is somewhat ironic.

What gives? BTW, I'm only trying to get something that I can 
subsequentially use in linking against GDAL, i.e., gdal.lib or something 
like that.

Regards,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Sun Apr 22 09:13:57 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Building with VC7.1
In-Reply-To: <000301c784ce$6d3640f0$0a0a0a0a@idrisi.clarku.edu>
References: <462B2545.4040203@tkk.fi>
	<000301c784ce$6d3640f0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <462B5F95.1040102@tkk.fi>

Ivan Lucena kirjoitti:
> Ari,
>
> Did you run VCVARS32.BAT first ?
>   

No, but now I tried and it doesn't help since the only windows.h I have 
is the FOSS version (which does not seem to work). I think I'm missing 
the Windows Platform SDK.

Ari

> Regards,
>
> Ivan
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ari Jolma
> Sent: Sunday, April 22, 2007 5:05 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] Building with VC7.1
>
> I downloaded clean 1.4.1.tar.gz and I've got the VC 7.1 from an official 
> installer.
>
> I issue the command nmake /f makefile.vc in Visual C++ Toolkit 2003 
> command prompt and I get the error "windows.h": no such file. Which I 
> think is somewhat ironic.
>
> What gives? BTW, I'm only trying to get something that I can 
> subsequentially use in linking against GDAL, i.e., gdal.lib or something 
> like that.
>
> Regards,
>
> Ari
>
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Sun Apr 22 13:31:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Building with VC7.1
In-Reply-To: <462B5F95.1040102@tkk.fi>
References: <462B2545.4040203@tkk.fi>	<000301c784ce$6d3640f0$0a0a0a0a@idrisi.clarku.edu>
	<462B5F95.1040102@tkk.fi>
Message-ID: <462B9C00.8080102@loskot.net>

Ari Jolma wrote:
> Ivan Lucena kirjoitti:
>> Ari,
>> 
>> Did you run VCVARS32.BAT first ?
>> 
> 
> No, but now I tried and it doesn't help since the only windows.h I
> have is the FOSS version (which does not seem to work). I think I'm
> missing the Windows Platform SDK.

Ari,

The VC++ Toolkit 2003 is similar to VC++ 2005 Express Edition and it
doesn't include Platform SDK.

Here are details where to find PSDK and how to install it:

http://trac.osgeo.org/gdal/wiki/FAQ#CanIbuildGDALwithMSVisualC2005ExpressEdition

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr 22 13:52:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] [motion] Migration of web pages to the Wiki
In-Reply-To: <4628FD97.5030705@gov.yk.ca>
References: <46266B22.8070307@loskot.net> <4628CC21.7060605@loskot.net>
	<4628FD97.5030705@gov.yk.ca>
Message-ID: <462BA0C2.1010903@loskot.net>

Matt Wilkie wrote:
> Mateusz Loskot wrote:
>> Mateusz Loskot wrote:
>>> Also, I'd like to migrate our FAQ to the Wiki, so it will be
>>> easier to maintain it, encourage for contributions and monitor
>>> them. Is there any objection or I can move on with FAQ as the
>>> first item to migrate?
>> 
>> And here it is already migrated:
>> 
>> http://trac.osgeo.org/gdal/wiki/FAQ
> 
> good work, thanks Mateusz!

Matt,

I reorganized the FAQ in separate page per section
and the main FAQ page lists links to those new pages-sections:

http://trac.osgeo.org/gdal/wiki/FAQ

This should make it easier to edit FAQ content easier,
add new sections, etc.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From bgreene at rapidmap.com.au  Sun Apr 22 19:51:01 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write
	protected memory
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC64885712@rmg-server03.rmg.local>

Hi,
 
I had a problem with the GDAL C# bindings freezing a little while ago, and Tamas managed to find the problem (I was passing in a two-element array instead of a three element for the return value).  However, now I'm having a different issue.
 
I'm working with 1.4.1 binaries compiled myself according to the instructions on this site (I can't find the most recent binaries in the FWTools distribution).  When I run the code below, I get a System.AccessViolationException:Attempted to read or write protected memory exception on the line:
transform.TransformPoint(point, px, py, 0.0)

It appears that the exception is thrown from this line:
public void TransformPoint(double[] argout, double x, double y, double z) {

osrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(swigCPtr, argout, x, y, z);

}

The test image I'm using is:

o41078a5.tif
from
http://dl.maptools.org/dl/geotiff/samples/usgs/

Here is the VB.Net code I'm using (in VS 2005):

Imports GDAL

Imports OGR

Public Class GeoTiffReader

Private Shared image As Dataset

Public Shared Function GetGeoReference(ByVal Filename As String) As GeoReference

If Not (Filename Is Nothing) Then

'Return Nothing

'if uncommented, the code will not crash

End If

GDAL.gdal.AllRegister()

image = GDAL.gdal.Open(Filename, 0)

If (image Is Nothing) Then

Return Nothing

End If

Dim gr(6) As Double

image.GetGeoTransform(gr)

Dim topLeft() As Double = TransformWGS84(gr(0), gr(3))

Dim bottomRight() As Double = TransformWGS84(gr(0) + gr(1) * image.RasterXSize, gr(3) + gr(5) * image.RasterXSize)

If (topLeft.Length = 2 And bottomRight.Length = 2) Then

Return New GeoReference(topLeft(0), topLeft(1), bottomRight(0), bottomRight(1))

Else

Return Nothing

End If

image.Dispose()

End Function

Public Shared Function TransformWGS84(ByVal px As Double, ByVal py As Double) As Double()

Dim point() As Double

point = New Double() {0.0, 0.0, 0.0}

Dim srWGS84 As New SpatialReference("")

srWGS84.SetWellKnownGeogCS("WGS84")

If (image.GetProjection() = "") Then

Return New Double() {}

End If

Dim srCurrent As New SpatialReference(image.GetProjection())

Dim transform As New CoordinateTransformation(srCurrent, srWGS84)

If (transform Is Nothing) Then

Return New Double() {}

End If

Try

transform.TransformPoint(point, px, py, 0.0)

Catch

Return New Double() {}

End Try

Return point

End Function

End Class



From sy at perkins.net  Sun Apr 22 23:55:54 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Java and the build environment
In-Reply-To: <462B1C3A.7030302@openplans.org>
References: <462B1C3A.7030302@openplans.org>
Message-ID: <462C2E4A.3060006@perkins.net>

Andrea Aime wrote:
> I also tried with Microsoft Visual C++ Express 2005 + windows sdk + 
> atl fixes I grabbed on a random internet page.
> Gdal builds and all the gdal* apps, as well as the ogr* apps do work. 
> Swig bindings to build. But for the life of me, I cannot make JNI load
> the resulting libraries, it always complains about missing dependent
> libraries. I tried using Dependency Walker to figure out the missing
> ones and copied them right besides the gdal/ogr ones, and in the end
> I was missing only the delay load library that makes up the Vista UI
> (which of course I don't have on Windows) without luck, the error
> was always the same.

It's sometimes surprisingly hard to track down missing dependency 
libraries, and often Dependency Walker will give misleading results.

I would tend to suspect the C++ runtime libraries as the missing 
component. If you can, find the C++ library suite that lives in 
C:\Program Files\Microsoft Visual Studio 
8\VC\redist\x86\Microsoft.VC80.CRT\, and put a copy of that directory 
and its contents in your application folder. Only thing is, VS Express 
might not have this package, so, find someone with standard or 
professional and get it from them. If you're still stuck, let me know 
and I'll send you a zip file (I'd post it here, but the zip file will be 
several MB).


Cheers,

Sy


From dron at ak4719.spb.edu  Mon Apr 23 05:12:22 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <4628E141.3040304@pobox.com>
References: <4628E141.3040304@pobox.com>
Message-ID: <20070423091221.GA7638@ak4719.spb.edu>

On Fri, Apr 20, 2007 at 11:50:25AM -0400, Frank Warmerdam wrote:
> My currently thinking is that we should add MINGW, and VS Express
> Edition support, and possibly drop Visual Studio 6 support.

Frank,

I am strongly against dropping VS6 support. I am using that environment
and will need it to use at least a year. I am ready to solve problems
related to that build. We can drop VS6, but not right now.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From szekerest at gmail.com  Mon Apr 23 06:29:27 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write
	protected memory
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC64885712@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC64885712@rmg-server03.rmg.local>
Message-ID: <f3b73b7d0704230329n147757f3o32b12f40c7cc7248@mail.gmail.com>

Ben,

I would suggest to start with the latest SVN trunk. There were some
fundamental changes compared with the current stable branch. It might
be more difficult to make this transition later. For more information
see:

http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp

Best regards,

Tamas



2007/4/23, Ben Greene <bgreene@rapidmap.com.au>:
> Hi,
>
> I had a problem with the GDAL C# bindings freezing a little while ago, and Tamas managed to find the problem (I was passing in a two-element array instead of a three element for the return value).  However, now I'm having a different issue.
>
> I'm working with 1.4.1 binaries compiled myself according to the instructions on this site (I can't find the most recent binaries in the FWTools distribution).  When I run the code below, I get a System.AccessViolationException:Attempted to read or write protected memory exception on the line:
> transform.TransformPoint(point, px, py, 0.0)
>
> It appears that the exception is thrown from this line:
> public void TransformPoint(double[] argout, double x, double y, double z) {
>
> osrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(swigCPtr, argout, x, y, z);
>
> }
>
> The test image I'm using is:
>
> o41078a5.tif
> from
> http://dl.maptools.org/dl/geotiff/samples/usgs/
>
> Here is the VB.Net code I'm using (in VS 2005):
>
> Imports GDAL
>
> Imports OGR
>
> Public Class GeoTiffReader
>
> Private Shared image As Dataset
>
> Public Shared Function GetGeoReference(ByVal Filename As String) As GeoReference
>
> If Not (Filename Is Nothing) Then
>
> 'Return Nothing
>
> 'if uncommented, the code will not crash
>
> End If
>
> GDAL.gdal.AllRegister()
>
> image = GDAL.gdal.Open(Filename, 0)
>
> If (image Is Nothing) Then
>
> Return Nothing
>
> End If
>
> Dim gr(6) As Double
>
> image.GetGeoTransform(gr)
>
> Dim topLeft() As Double = TransformWGS84(gr(0), gr(3))
>
> Dim bottomRight() As Double = TransformWGS84(gr(0) + gr(1) * image.RasterXSize, gr(3) + gr(5) * image.RasterXSize)
>
> If (topLeft.Length = 2 And bottomRight.Length = 2) Then
>
> Return New GeoReference(topLeft(0), topLeft(1), bottomRight(0), bottomRight(1))
>
> Else
>
> Return Nothing
>
> End If
>
> image.Dispose()
>
> End Function
>
> Public Shared Function TransformWGS84(ByVal px As Double, ByVal py As Double) As Double()
>
> Dim point() As Double
>
> point = New Double() {0.0, 0.0, 0.0}
>
> Dim srWGS84 As New SpatialReference("")
>
> srWGS84.SetWellKnownGeogCS("WGS84")
>
> If (image.GetProjection() = "") Then
>
> Return New Double() {}
>
> End If
>
> Dim srCurrent As New SpatialReference(image.GetProjection())
>
> Dim transform As New CoordinateTransformation(srCurrent, srWGS84)
>
> If (transform Is Nothing) Then
>
> Return New Double() {}
>
> End If
>
> Try
>
> transform.TransformPoint(point, px, py, 0.0)
>
> Catch
>
> Return New Double() {}
>
> End Try
>
> Return point
>
> End Function
>
> End Class
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From dhdeangelis.listas at gmail.com  Mon Apr 23 07:30:31 2007
From: dhdeangelis.listas at gmail.com (=?ISO-8859-1?Q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Error building gdal/ogr: undefined reference to
	`_gfortran_ ...
Message-ID: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>

Hi all,

I am trying to build gdal/ogr. I did many times before without
problems but this time I continuously get this error:

g++ ogrinfo.o -o .libs/ogrinfo  /usr/local/src/gdal/.libs/libgdal.so
-L/usr/local/lib -L/usr/lib -L/usr/lib/lib -ljpeg -lgeotiff
-L/usr/local -L/usr/local/pgsql/lib -lpq -lz -lrt -ldl -lpthread

/usr/local/src/gdal/.libs/libgdal.so: undefined reference to `_gfortran_shape_4'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_internal_malloc'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to `_gfortran_size0'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_reshape_4'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_internal_unpack'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_internal_pack'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_string_trim'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_string_len_trim'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_copy_string'
/usr/local/src/gdal/.libs/libgdal.so: undefined reference to
`_gfortran_internal_free'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/usr/local/src/gdal/ogr'
make: *** [ogr-apps] Error 2

This happens almost at the end of the make process, when building ogr.
I am using openSUSE 10.2, gfortran-4.1 and gcc-4.1. The error is the
same in both gdal-1.4.1 and svn checkout, so it is likely an issue in
my machine. I have no clue about the reason, so any hint will be
appreciated.

Thanks in advance

-- 

Hern?n De Angelis
Linux user # 397217


From mateusz at loskot.net  Mon Apr 23 07:36:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] wcs tests failing
Message-ID: <462C9A4D.8010004@loskot.net>

Hi,

Ivan notified me that wcs tests are failing due to some strange problems.
It seemed to me that there is not enough space or may be /tmp on
xblade14-2 or geodata.telascience.org is not writable but this is not
the case here.

Frank,

Could you check what's going on here?


Running tests from gdrivers/wcs.py
  TEST: wcs_1 ... success
  TEST: wcs_2 ... ERROR 1: msSaveImageGDAL(): General error message.
Failed to create output GTiff file.
TIFFOpen:/tmp/srtmsrvr/462c9826_5da1_0.tif: No such file or directory

fail
    open failed.
  TEST: wcs_3 ... skip
  TEST: wcs_4 ... skip
  TEST: wcs_5 ... ERROR 1: msSaveImageGDAL(): General error message.
Failed to create output GTiff file.
TIFFOpen:/tmp/srtmsrvr/462c9827_5da3_0.tif: No such file or directory

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Apr 23 08:05:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Error building gdal/ogr: undefined reference
	to	`_gfortran_ ...
In-Reply-To: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>
References: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>
Message-ID: <462CA0F7.80701@loskot.net>

Hern?n De Angelis wrote:
> Hi all,
> 
> I am trying to build gdal/ogr. I did many times before without
> problems but this time I continuously get this error:
> 
> g++ ogrinfo.o -o .libs/ogrinfo  /usr/local/src/gdal/.libs/libgdal.so
> -L/usr/local/lib -L/usr/lib -L/usr/lib/lib -ljpeg -lgeotiff
> -L/usr/local -L/usr/local/pgsql/lib -lpq -lz -lrt -ldl -lpthread
> 
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_shape_4'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_internal_malloc'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_size0'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_reshape_4'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_internal_unpack'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_internal_pack'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_string_trim'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_string_len_trim'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_copy_string'
> /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> `_gfortran_internal_free'
> collect2: ld returned 1 exit status
> make[1]: *** [ogrinfo] Error 1
> make[1]: Leaving directory `/usr/local/src/gdal/ogr'
> make: *** [ogr-apps] Error 2
> 
> This happens almost at the end of the make process, when building ogr.
> I am using openSUSE 10.2, gfortran-4.1 and gcc-4.1. The error is the
> same in both gdal-1.4.1 and svn checkout, so it is likely an issue in
> my machine. I have no clue about the reason, so any hint will be
> appreciated.

I tested GDAL SVN building it with libtool support and it works for me.
Also, as you can see the buildbot slave called epimetheus builds with
libtool support too:

http://buildbot.osgeo.org:8500/epimetheus-full/builds/187

I'm not sure what is the fortran used for in your case.

Could you include full command of ./configure you use
and output of the configure summary?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dhdeangelis.listas at gmail.com  Mon Apr 23 08:16:08 2007
From: dhdeangelis.listas at gmail.com (=?ISO-8859-1?Q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Error building gdal/ogr: undefined reference to
	`_gfortran_ ...
In-Reply-To: <462CA0F7.80701@loskot.net>
References: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>
	<462CA0F7.80701@loskot.net>
Message-ID: <a498cee90704230516s419ad0d2k67fade4a02654f46@mail.gmail.com>

Hi Mateusz,

Thanks for your fast answer. Below you will find the configure command
and the output. I am afraid I do not undesrtand the epimetheus thing.

Thanks!

My configure command is:

./configure --with-pg=/usr/local/pgsql/bin/pg_config
--with-netcdf=/usr/local --with-png=/usr/lib --with-libtiff=internal
--with-geotiff=/usr/local --with-jpeg=/usr/lib
--with-geos=/usr/local/bin/geos-config --with-perl --with-python
--with-sqlite --with-odbc

and the output is:

checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for a sed that does not truncate output... /usr/bin/sed
checking for egrep... grep -E
checking for ld used by gcc... /usr/i586-suse-linux/bin/ld
checking if the linker (/usr/i586-suse-linux/bin/ld) is GNU ld... yes
checking for /usr/i586-suse-linux/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm -B
checking whether ln -s works... yes
checking how to recognise dependent libraries... pass_all
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking how to run the C++ preprocessor... g++ -E
checking for g77... g77
checking whether we are using the GNU Fortran 77 compiler... yes
checking whether g77 accepts -g... yes
checking the maximum length of command line arguments... 32768
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/i586-suse-linux/bin/ld) supports
shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by g++... /usr/i586-suse-linux/bin/ld
checking if the linker (/usr/i586-suse-linux/bin/ld) is GNU ld... yes
checking whether the g++ linker (/usr/i586-suse-linux/bin/ld) supports
shared libraries... yes
checking for g++ option to produce PIC... -fPIC
checking if g++ PIC flag -fPIC works... yes
checking if g++ static flag -static works... yes
checking if g++ supports -c -o file.o... yes
checking whether the g++ linker (/usr/i586-suse-linux/bin/ld) supports
shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for g77 option to produce PIC... -fPIC
checking if g77 PIC flag -fPIC works... yes
checking if g77 static flag -static works... yes
checking if g77 supports -c -o file.o... yes
checking whether the g77 linker (/usr/i586-suse-linux/bin/ld) supports
shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for dlopen in -ldl... yes
checking for nanosleep in -lrt... yes
checking for sin in -lm... yes
checking for ANSI C header files... (cached) yes
checking assert.h usability... yes
checking assert.h presence... yes
checking for assert.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for unistd.h... (cached) yes
checking dbmalloc.h usability... no
checking dbmalloc.h presence... no
checking for dbmalloc.h... no
checking for dlfcn.h... (cached) yes
checking for stdint.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking values.h usability... yes
checking values.h presence... yes
checking for values.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
checking whether byte ordering is bigendian... no
checking for 64bit integer type... long long
checking for 64bit file io... yes
checking for stat64... yes
checking for fopen64... yes
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for int8... no
checking for int16... no
checking for int32... no
checking native cpu bit order... lsb2msb
checking for vprintf... yes
checking for _doprnt... no
checking for snprintf... yes
checking for vsnprintf... yes
checking for atoll... yes
checking for copysign... yes
checking for copysignf... yes
checking for strtof... yes
checking for nan... yes
checking for nanf... yes
checking for getcwd... yes
checking whether nan is declared... no
checking whether nanf is declared... no
checking for gmtime_r... yes
checking for localtime_r... yes
checking for setlocale... yes
checking for local include/lib path... none
configure: checking whether we should include thread/mutex support......
        thread safe support disabled.
checking for deflateInit_ in -lz... yes
using pre-installed libz
checking for PostgreSQL... yes
checking for PQconnectdb in -lpq... yes
checking for PQputCopyData in -lpq... yes
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for Mopen in -lcsf... no
checking csf.h usability... no
checking csf.h presence... no
checking for csf.h... no
using internal csf code.
using libnetcdf from /usr/local.
using libpng from /usr/lib.
using internal TIFF code.
checking for XTIFFClientOpen in -lgeotiff... yes
using libgeotiff from /usr/local.
using libjpeg from /usr/lib.
checking for DGifOpenFileName in -lgif... no
using internal gif code.
checking for cln_GetLayerCapabilities in -logdi31... no
checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for H5Fopen in -lhdf5... no
checking for jpc_decode in -ljasper... yes
checking for jp2_decode in -ljasper... yes
checking for pgx_decode in -ljasper... yes
checking for jp2_encode_uuid in -ljasper... no
configure: hacked JasPer version not found, GeoJP2 disabled.
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for NCScbmOpenFileView in -lecwj2... no
checking for Kakadu JPEG2000 support... not requested.
configure: MrSID support disabled.
checking for BSB ... enabled
checking for OGR ... enabled
checking for MySQL... no
checking for Xerces C++... disabled
checking for SQLConnect in -lodbc... yes
checking for SQLInstallDriverEx in -lodbcinst... yes
checking if Oracle support is enabled... no
checking Checking for DODS... disabled
checking for curl-config... no
checking Checking for SQLite... enabled
checking Checking for DWGdirect... disabled
configure: IBM Informix DataBlade not supported.
configure: checking whether we should include ESRI SDE support...
        ESRI SDE support not requested.
checking for geos-config... /usr/local/bin/geos-config
checking for GEOS version >= 2.2.0... yes
checking for GEOSversion in -lgeos_c... yes
configure: using GEOS 2.2.x+ C API
checking how to link PROJ.4 library... link dynamically.
checking GDAL version information from gdal_version.h: 1.4.1
checking for SWIG perl bindings... enabled
checking for SWIG php bindings... disabled
checking for SWIG ruby bindings... disabled
checking for NG SWIG python bindings... disabled
checking for python... python
checking where python Makefiles are... found
checking Python makefile... found
checking where .py files should go... /usr/lib/python2.5/site-packages
checking for python headers... found
checking definitions from Python makefile... done
checking for special pymod link hacks... default
checking for NumPy include files... found
checking if local/include already standard... no, everything is ok
configure: creating ./config.status
config.status: creating GDALmake.opt
config.status: creating port/cpl_config.h

GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -O2
  C++ compiler:              g++ -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NETCDF support:            yes
  LIBPNG support:            external
  LIBTIFF support:           internal
  LIBGEOTIFF support:        external
  LIBJPEG support:           external
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  KAKADU support:            no
  JASPER support:            yes (GeoJP2=no)
  ECW support:               no
  MrSID support:             no
  CURL support (wcs):        no
  POSTGRESQL support:        yes
  MySQL support:             no
  XERCES support:            no
  ODBC support:              yes
  PGEO support:              yes
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  DWGdirect support          no
  PANORAMA GIS support:      no
  INFORMIX DataBlade support:no
  GEOS support:              yes

  Statically link PROJ.4:    no

  Traditional Python:        yes
  NG SWIG Bindings:          perl

  enable OGR building:       yes


----------------------------------------------------------


2007/4/23, Mateusz Loskot <mateusz@loskot.net>:
> Hern?n De Angelis wrote:
> > Hi all,
> >
> > I am trying to build gdal/ogr. I did many times before without
> > problems but this time I continuously get this error:
> >
> > g++ ogrinfo.o -o .libs/ogrinfo  /usr/local/src/gdal/.libs/libgdal.so
> > -L/usr/local/lib -L/usr/lib -L/usr/lib/lib -ljpeg -lgeotiff
> > -L/usr/local -L/usr/local/pgsql/lib -lpq -lz -lrt -ldl -lpthread
> >
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_shape_4'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_internal_malloc'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_size0'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_reshape_4'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_internal_unpack'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_internal_pack'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_string_trim'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_string_len_trim'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_copy_string'
> > /usr/local/src/gdal/.libs/libgdal.so: undefined reference to
> > `_gfortran_internal_free'
> > collect2: ld returned 1 exit status
> > make[1]: *** [ogrinfo] Error 1
> > make[1]: Leaving directory `/usr/local/src/gdal/ogr'
> > make: *** [ogr-apps] Error 2
> >
> > This happens almost at the end of the make process, when building ogr.
> > I am using openSUSE 10.2, gfortran-4.1 and gcc-4.1. The error is the
> > same in both gdal-1.4.1 and svn checkout, so it is likely an issue in
> > my machine. I have no clue about the reason, so any hint will be
> > appreciated.
>
> I tested GDAL SVN building it with libtool support and it works for me.
> Also, as you can see the buildbot slave called epimetheus builds with
> libtool support too:
>
> http://buildbot.osgeo.org:8500/epimetheus-full/builds/187
>
> I'm not sure what is the fortran used for in your case.
>
> Could you include full command of ./configure you use
> and output of the configure summary?
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>


-- 

Hern?n De Angelis
Linux user # 397217


From mateusz at loskot.net  Mon Apr 23 08:21:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Error building gdal/ogr: undefined reference to
	`_gfortran_ ...
In-Reply-To: <a498cee90704230516s419ad0d2k67fade4a02654f46@mail.gmail.com>
References: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>	
	<462CA0F7.80701@loskot.net>
	<a498cee90704230516s419ad0d2k67fade4a02654f46@mail.gmail.com>
Message-ID: <462CA4AF.7040909@loskot.net>

Hern?n De Angelis wrote:
> Hi Mateusz,
> 
> Thanks for your fast answer. Below you will find the configure
> command and the output. I am afraid I do not undesrtand the
> epimetheus thing.
> 
> Thanks!
> 
> My configure command is:
> 
> ./configure --with-pg=/usr/local/pgsql/bin/pg_config 
> --with-netcdf=/usr/local --with-png=/usr/lib --with-libtiff=internal 
> --with-geotiff=/usr/local --with-jpeg=/usr/lib 
> --with-geos=/usr/local/bin/geos-config --with-perl --with-python 
> --with-sqlite --with-odbc

Could you run "make clean" first and then add --without-libtool
option to your configure command and make again, and see if that will work.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Mon Apr 23 08:32:20 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL Perl compilations
In-Reply-To: <f3b73b7d0704221520i4aa73029oef11153b125e5ef1@mail.gmail.com>
References: <f3b73b7d0704221520i4aa73029oef11153b125e5ef1@mail.gmail.com>
Message-ID: <462CA754.6020909@tkk.fi>

Tamas Szekeres kirjoitti:
> Ari,
>
> Is the GDAL SWIG Perl compatible with ActivePerl + Visual Studio (nmake)

At the moment, no. For my part it is a problem of the things in 
Makefile.PL because I've used it only with gcc (MinGW or Linux). But 
that's only minor issue and it is easy to change, i.e. use .lib and not 
.dll.a etc.

I'm currently trying to build it with ActivePerl & Visual C++ 2003, but 
my first try yesterday was not succesful. I hit the same" 
'PerlProc_abort' : is not a  member of '`global namespace" problem, 
which is an issue with swig+MSVC I think. Currently I have no idea how 
to fix that. Anybody?

I cc this to the list in case somebody has experience with ActiveState 
Perl and Swig.

Ari

>
> I've tried this, but it did not work:
>
> E:\buildbot\osgeo\slaves\szekerest-msvc80-gdal\szekerest-vc80-quick\build\gdal\swig\perl>perl 
>
> Makefile.PL
> Checking if your kit is complete...
> Looks good
> Warning: '-L../..' changed to
> '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..' 
>
> Note (probably harmless): No library found for -lgdal.dll
> Writing Makefile_Geo__OGR for Geo::OGR
> Checking if your kit is complete...
> Looks good
> Warning: '-L../..' changed to
> '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..' 
>
> Note (probably harmless): No library found for -lgdal.dll
> Writing Makefile_Geo__GDAL__Const for Geo::GDAL::Const
> Checking if your kit is complete...
> Looks good
> Warning: '-L../..' changed to
> '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..' 
>
> Note (probably harmless): No library found for -lgdal.dll
> Writing Makefile_Geo__OSR for Geo::OSR
> Checking if your kit is complete...
> Looks good
> Warning: '-L../..' changed to
> '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..' 
>
> Note (probably harmless): No library found for -lgdal.dll
> Writing Makefile_Geo__GDAL for Geo::GDAL
>
> E:\buildbot\osgeo\slaves\szekerest-msvc80-gdal\szekerest-vc80-quick\build\gdal\swig\perl>nmake 
>
> -f Makefile_Geo__GDAL
>
> Microsoft (R) Program Maintenance Utility Version 8.00.50727.42
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
>        cl -c  -I../../gcore -I../../alg -I../../ogr -I../../port
> -nologo -GF -W3 -MD -Zi -DNDEBUG -Ox -GL -Wp64 -fp:precise -DWIN32
> -D_CON
> SOLE -DNO_STRICT -DHAVE_DES_FCRYPT -DWIN64 -DCONSERVATIVE
> -DNO_HASH_SEED -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CONTEXT
> -DPERL_IMPLICIT_SYS -DU
> SE_PERLIO -DPERL_MSVCRT_READFIX -MD -Zi -DNDEBUG -Ox -GL -Wp64
> -fp:precise    -DVERSION=\"0.21\"  -DXS_VERSION=\"0.21\"
> "-IC:\Perl64\lib\CO
> RE"   gdal_wrap.cpp
> gdal_wrap.cpp
> gdal_wrap.cpp(359) : warning C4244: 'return' : conversion from
> '__int64' to 'int', possible loss of data
> gdal_wrap.cpp(1282) : warning C4267: 'argument' : conversion from
> 'size_t' to 'I32', possible loss of data
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(20) : error C2039: 'PerlProc_abort' : is not a
> member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(20) : error C2873: 'PerlProc_abort' : symbol
> cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(23) : error C2039: 'PerlProc_exit' : is not a
> member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(23) : error C2873: 'PerlProc_exit' : symbol
> cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(23) : error C2039: 'PerlEnv_getenv' : is not a
> member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(23) : error C2873: 'PerlEnv_getenv' : symbol
> cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(26) : error C2039: 'PerlMem_realloc' : is not a
> member of '`global names
> pace''
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\cstdlib(26) : error C2873: 'PerlMem_realloc' : symbol
> cannot be used in a using-
> declaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> : error C2039: 'PerlSIO_clearerr' : is not a member of '`global names
> pace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> : error C2873: 'PerlSIO_clearerr' : symbol cannot be used in a using-
> declaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> : error C2039: 'PerlSIO_fclose' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> : error C2873: 'PerlSIO_fclose' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> : error C2039: 'PerlSIO_feof' : is not a member of '`global namespace
> ''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> : error C2873: 'PerlSIO_feof' : symbol cannot be used in a using-decl
> aration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> : error C2039: 'PerlSIO_ferror' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> : error C2873: 'PerlSIO_ferror' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> : error C2039: 'PerlSIO_fflush' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> : error C2873: 'PerlSIO_fflush' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> : error C2039: 'PerlSIO_fgetpos' : is not a member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> : error C2873: 'PerlSIO_fgetpos' : symbol cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> : error C2039: 'PerlSIO_fopen' : is not a member of '`global namespac
> e''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> : error C2873: 'PerlSIO_fopen' : symbol cannot be used in a using-dec
> laration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> : error C2039: 'PerlSIO_fputc' : is not a member of '`global namespac
> e''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> : error C2873: 'PerlSIO_fputc' : symbol cannot be used in a using-dec
> laration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> : error C2039: 'PerlSIO_fputs' : is not a member of '`global namespac
> e''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> : error C2873: 'PerlSIO_fputs' : symbol cannot be used in a using-dec
> laration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> : error C2039: 'PerlSIO_fread' : is not a member of '`global namespac
> e''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> : error C2873: 'PerlSIO_fread' : symbol cannot be used in a using-dec
> laration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> : error C2039: 'PerlSIO_freopen' : is not a member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> : error C2873: 'PerlSIO_freopen' : symbol cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> : error C2039: 'PerlSIO_fseek' : is not a member of '`global namespac
> e''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> : error C2873: 'PerlSIO_fseek' : symbol cannot be used in a using-dec
> laration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> : error C2039: 'PerlSIO_fsetpos' : is not a member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> : error C2873: 'PerlSIO_fsetpos' : symbol cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> : error C2039: 'PerlSIO_ftell' : is not a member of '`global namespac
> e''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> : error C2873: 'PerlSIO_ftell' : symbol cannot be used in a using-dec
> laration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> : error C2039: 'PerlSIO_fwrite' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> : error C2873: 'PerlSIO_fwrite' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> : error C2039: 'PerlSIO_getc' : is not a member of '`global namespace
> ''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> : error C2873: 'PerlSIO_getc' : symbol cannot be used in a using-decl
> aration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(36)
> : error C2039: 'PerlLIO_rename' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(36)
> : error C2873: 'PerlLIO_rename' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> : error C2039: 'PerlSIO_setbuf' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> : error C2873: 'PerlSIO_setbuf' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> : error C2039: 'PerlSIO_setvbuf' : is not a member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> : error C2873: 'PerlSIO_setvbuf' : symbol cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> : error C2039: 'PerlSIO_tmpfile' : is not a member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> : error C2873: 'PerlSIO_tmpfile' : symbol cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> : error C2039: 'PerlLIO_tmpnam' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> : error C2873: 'PerlLIO_tmpnam' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> : error C2039: 'PerlSIO_ungetc' : is not a member of '`global namespa
> ce''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> : error C2873: 'PerlSIO_ungetc' : symbol cannot be used in a using-de
> claration
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> : error C2039: 'PerlSIO_vprintf' : is not a member of '`global namesp
> ace''
> C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> : error C2873: 'PerlSIO_vprintf' : symbol cannot be used in a using-d
> eclaration
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\xlocale(326) : warning C4530: C++ exception handler used,
> but unwind semantics a
> re not enabled. Specify /EHsc
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\xlocale(341) : warning C4530: C++ exception handler used,
> but unwind semantics a
> re not enabled. Specify /EHsc
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\xlocale(358) : warning C4530: C++ exception handler used,
> but unwind semantics a
> re not enabled. Specify /EHsc
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : '('
>        C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(432) : see reference to class template
> instantiation 'std::bas
> ic_streambuf<_Elem,_Traits>' being compiled
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ')'
> before '->'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ';'
> before '->'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(404) : error C2334: unexpected token(s)
> preceding '{'; skipping appare
> nt function body
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : '('
>        C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(436) : see reference to class template
> instantiation 'std::bas
> ic_streambuf<_Elem,_Traits>' being compiled
>        with
>        [
>            _Elem=char,
>            _Traits=std::char_traits<char>
>        ]
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ')'
> before '->'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ';'
> before '->'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(404) : error C2334: unexpected token(s)
> preceding '{'; skipping appare
> nt function body
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : '('
>        C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(437) : see reference to class template
> instantiation 'std::bas
> ic_streambuf<_Elem,_Traits>' being compiled
>        with
>        [
>            _Elem=wchar_t,
>            _Traits=std::char_traits<wchar_t>
>        ]
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ')'
> before '->'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ';'
> before '->'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\streambuf(404) : error C2334: unexpected token(s)
> preceding '{'; skipping appare
> nt function body
> C:\Program Files (x86)\Microsoft Visual Studio
> 8\VC\INCLUDE\istream(1075) : warning C4530: C++ exception handler
> used, but unwind semantics
> are not enabled. Specify /EHsc
> gdal_wrap.cpp(1678) : warning C4244: '=' : conversion from 'IV' to
> 'long', possible loss of data
> gdal_wrap.cpp(2292) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(3288) : warning C4267: 'argument' : conversion from
> 'size_t' to 'I32', possible loss of data
> gdal_wrap.cpp(6572) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7021) : warning C4267: '=' : conversion from 'size_t' to
> 'int', possible loss of data
> gdal_wrap.cpp(7030) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7042) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7054) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7071) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7199) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7211) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7223) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(7240) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8214) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8226) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8515) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8527) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8539) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8661) : warning C4267: '=' : conversion from 'size_t' to
> 'int', possible loss of data
> gdal_wrap.cpp(8670) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8682) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(8694) : warning C4244: '=' : conversion from 'IV' to
> 'int', possible loss of data
> gdal_wrap.cpp(9220) : warning C4244: '=' : conversion from 'IV' to
> 'short', possible loss of data
> gdal_wrap.cpp(9222) : warning C4244: '=' : conversion from 'IV' to
> 'short', possible loss of data
> gdal_wrap.cpp(9224) : warning C4244: '=' : conversion from 'IV' to
> 'short', possible loss of data
> gdal_wrap.cpp(9226) : warning C4244: '=' : conversion from 'IV' to
> 'short', possible loss of data
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> Studio 8\VC\BIN\amd64\cl.EXE"' : return code '0x2'
> Stop.
>
> Best regards,
>
> Tamas


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From dhdeangelis.listas at gmail.com  Mon Apr 23 08:54:23 2007
From: dhdeangelis.listas at gmail.com (=?ISO-8859-1?Q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Error building gdal/ogr: undefined reference to
	`_gfortran_ ...
In-Reply-To: <462CA4AF.7040909@loskot.net>
References: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>
	<462CA0F7.80701@loskot.net>
	<a498cee90704230516s419ad0d2k67fade4a02654f46@mail.gmail.com>
	<462CA4AF.7040909@loskot.net>
Message-ID: <a498cee90704230554w4a10862n2c8fd2fcb502b41e@mail.gmail.com>

> Could you run "make clean" first and then add --without-libtool
> option to your configure command and make again, and see if that will work.

Yes! It worked flawlessly, only with a long series of warnings at the
end of the make, when making pymod, of the type:

gdal_wrap.c:1211: warning: dereferencing type-punned pointer will
break strict-aliasing rules

Although this is not an unusual thing in gdal. Now I will check that
everything works. I noted that in previous installations in this same
machine (P4 3.0 GHz, 2Gb RAM) gdal/ogr used to take 9 minutes to make,
whereas it too only 5 min now. Do you thing this is because of having
disabled libtool, is it something about this new version or is it that
something went wrong? In any case the cause of the original error is
not clear for me.

Thanks for your help!

Hern?n


---

Hern?n De Angelis
Linux user # 397217


From szekerest at gmail.com  Mon Apr 23 08:59:24 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL Perl compilations
In-Reply-To: <462CA754.6020909@tkk.fi>
References: <f3b73b7d0704221520i4aa73029oef11153b125e5ef1@mail.gmail.com>
	<462CA754.6020909@tkk.fi>
Message-ID: <f3b73b7d0704230559u5eeb999eg6e41e0251b080e85@mail.gmail.com>

I'm not too familiar with this WriteMakefile stuff but I guess we
should take over something from nmake.opt  like $INC, $GDALLIB,
$EXTERNAL_LIBS or so.
Is Makefile.PL capable to include these variables somehow?

Best regards,

Tamas



2007/4/23, Ari Jolma <ari.jolma@tkk.fi>:
> Tamas Szekeres kirjoitti:
> > Ari,
> >
> > Is the GDAL SWIG Perl compatible with ActivePerl + Visual Studio (nmake)
>
> At the moment, no. For my part it is a problem of the things in
> Makefile.PL because I've used it only with gcc (MinGW or Linux). But
> that's only minor issue and it is easy to change, i.e. use .lib and not
> .dll.a etc.
>
> I'm currently trying to build it with ActivePerl & Visual C++ 2003, but
> my first try yesterday was not succesful. I hit the same"
> 'PerlProc_abort' : is not a  member of '`global namespace" problem,
> which is an issue with swig+MSVC I think. Currently I have no idea how
> to fix that. Anybody?
>
> I cc this to the list in case somebody has experience with ActiveState
> Perl and Swig.
>
> Ari
>
> >
> > I've tried this, but it did not work:
> >
> > E:\buildbot\osgeo\slaves\szekerest-msvc80-gdal\szekerest-vc80-quick\build\gdal\swig\perl>perl
> >
> > Makefile.PL
> > Checking if your kit is complete...
> > Looks good
> > Warning: '-L../..' changed to
> > '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..'
> >
> > Note (probably harmless): No library found for -lgdal.dll
> > Writing Makefile_Geo__OGR for Geo::OGR
> > Checking if your kit is complete...
> > Looks good
> > Warning: '-L../..' changed to
> > '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..'
> >
> > Note (probably harmless): No library found for -lgdal.dll
> > Writing Makefile_Geo__GDAL__Const for Geo::GDAL::Const
> > Checking if your kit is complete...
> > Looks good
> > Warning: '-L../..' changed to
> > '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..'
> >
> > Note (probably harmless): No library found for -lgdal.dll
> > Writing Makefile_Geo__OSR for Geo::OSR
> > Checking if your kit is complete...
> > Looks good
> > Warning: '-L../..' changed to
> > '-LE:/buildbot/osgeo/slaves/szekerest-msvc80-gdal/szekerest-vc80-quick/build/gdal/swig/perl/../..'
> >
> > Note (probably harmless): No library found for -lgdal.dll
> > Writing Makefile_Geo__GDAL for Geo::GDAL
> >
> > E:\buildbot\osgeo\slaves\szekerest-msvc80-gdal\szekerest-vc80-quick\build\gdal\swig\perl>nmake
> >
> > -f Makefile_Geo__GDAL
> >
> > Microsoft (R) Program Maintenance Utility Version 8.00.50727.42
> > Copyright (C) Microsoft Corporation.  All rights reserved.
> >
> >        cl -c  -I../../gcore -I../../alg -I../../ogr -I../../port
> > -nologo -GF -W3 -MD -Zi -DNDEBUG -Ox -GL -Wp64 -fp:precise -DWIN32
> > -D_CON
> > SOLE -DNO_STRICT -DHAVE_DES_FCRYPT -DWIN64 -DCONSERVATIVE
> > -DNO_HASH_SEED -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CONTEXT
> > -DPERL_IMPLICIT_SYS -DU
> > SE_PERLIO -DPERL_MSVCRT_READFIX -MD -Zi -DNDEBUG -Ox -GL -Wp64
> > -fp:precise    -DVERSION=\"0.21\"  -DXS_VERSION=\"0.21\"
> > "-IC:\Perl64\lib\CO
> > RE"   gdal_wrap.cpp
> > gdal_wrap.cpp
> > gdal_wrap.cpp(359) : warning C4244: 'return' : conversion from
> > '__int64' to 'int', possible loss of data
> > gdal_wrap.cpp(1282) : warning C4267: 'argument' : conversion from
> > 'size_t' to 'I32', possible loss of data
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(20) : error C2039: 'PerlProc_abort' : is not a
> > member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(20) : error C2873: 'PerlProc_abort' : symbol
> > cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(23) : error C2039: 'PerlProc_exit' : is not a
> > member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(23) : error C2873: 'PerlProc_exit' : symbol
> > cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(23) : error C2039: 'PerlEnv_getenv' : is not a
> > member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(23) : error C2873: 'PerlEnv_getenv' : symbol
> > cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(26) : error C2039: 'PerlMem_realloc' : is not a
> > member of '`global names
> > pace''
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\cstdlib(26) : error C2873: 'PerlMem_realloc' : symbol
> > cannot be used in a using-
> > declaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> > : error C2039: 'PerlSIO_clearerr' : is not a member of '`global names
> > pace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> > : error C2873: 'PerlSIO_clearerr' : symbol cannot be used in a using-
> > declaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> > : error C2039: 'PerlSIO_fclose' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> > : error C2873: 'PerlSIO_fclose' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> > : error C2039: 'PerlSIO_feof' : is not a member of '`global namespace
> > ''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(26)
> > : error C2873: 'PerlSIO_feof' : symbol cannot be used in a using-decl
> > aration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> > : error C2039: 'PerlSIO_ferror' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> > : error C2873: 'PerlSIO_ferror' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> > : error C2039: 'PerlSIO_fflush' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(27)
> > : error C2873: 'PerlSIO_fflush' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> > : error C2039: 'PerlSIO_fgetpos' : is not a member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> > : error C2873: 'PerlSIO_fgetpos' : symbol cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> > : error C2039: 'PerlSIO_fopen' : is not a member of '`global namespac
> > e''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(28)
> > : error C2873: 'PerlSIO_fopen' : symbol cannot be used in a using-dec
> > laration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> > : error C2039: 'PerlSIO_fputc' : is not a member of '`global namespac
> > e''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> > : error C2873: 'PerlSIO_fputc' : symbol cannot be used in a using-dec
> > laration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> > : error C2039: 'PerlSIO_fputs' : is not a member of '`global namespac
> > e''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(29)
> > : error C2873: 'PerlSIO_fputs' : symbol cannot be used in a using-dec
> > laration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> > : error C2039: 'PerlSIO_fread' : is not a member of '`global namespac
> > e''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> > : error C2873: 'PerlSIO_fread' : symbol cannot be used in a using-dec
> > laration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> > : error C2039: 'PerlSIO_freopen' : is not a member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(30)
> > : error C2873: 'PerlSIO_freopen' : symbol cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> > : error C2039: 'PerlSIO_fseek' : is not a member of '`global namespac
> > e''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> > : error C2873: 'PerlSIO_fseek' : symbol cannot be used in a using-dec
> > laration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> > : error C2039: 'PerlSIO_fsetpos' : is not a member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> > : error C2873: 'PerlSIO_fsetpos' : symbol cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> > : error C2039: 'PerlSIO_ftell' : is not a member of '`global namespac
> > e''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(31)
> > : error C2873: 'PerlSIO_ftell' : symbol cannot be used in a using-dec
> > laration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> > : error C2039: 'PerlSIO_fwrite' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> > : error C2873: 'PerlSIO_fwrite' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> > : error C2039: 'PerlSIO_getc' : is not a member of '`global namespace
> > ''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(32)
> > : error C2873: 'PerlSIO_getc' : symbol cannot be used in a using-decl
> > aration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(36)
> > : error C2039: 'PerlLIO_rename' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(36)
> > : error C2873: 'PerlLIO_rename' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> > : error C2039: 'PerlSIO_setbuf' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> > : error C2873: 'PerlSIO_setbuf' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> > : error C2039: 'PerlSIO_setvbuf' : is not a member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(37)
> > : error C2873: 'PerlSIO_setvbuf' : symbol cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> > : error C2039: 'PerlSIO_tmpfile' : is not a member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> > : error C2873: 'PerlSIO_tmpfile' : symbol cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> > : error C2039: 'PerlLIO_tmpnam' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(38)
> > : error C2873: 'PerlLIO_tmpnam' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> > : error C2039: 'PerlSIO_ungetc' : is not a member of '`global namespa
> > ce''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> > : error C2873: 'PerlSIO_ungetc' : symbol cannot be used in a using-de
> > claration
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> > : error C2039: 'PerlSIO_vprintf' : is not a member of '`global namesp
> > ace''
> > C:\Program Files (x86)\Microsoft Visual Studio 8\VC\INCLUDE\cstdio(39)
> > : error C2873: 'PerlSIO_vprintf' : symbol cannot be used in a using-d
> > eclaration
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\xlocale(326) : warning C4530: C++ exception handler used,
> > but unwind semantics a
> > re not enabled. Specify /EHsc
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\xlocale(341) : warning C4530: C++ exception handler used,
> > but unwind semantics a
> > re not enabled. Specify /EHsc
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\xlocale(358) : warning C4530: C++ exception handler used,
> > but unwind semantics a
> > re not enabled. Specify /EHsc
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : '('
> >        C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(432) : see reference to class template
> > instantiation 'std::bas
> > ic_streambuf<_Elem,_Traits>' being compiled
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ')'
> > before '->'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ';'
> > before '->'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(404) : error C2334: unexpected token(s)
> > preceding '{'; skipping appare
> > nt function body
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : '('
> >        C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(436) : see reference to class template
> > instantiation 'std::bas
> > ic_streambuf<_Elem,_Traits>' being compiled
> >        with
> >        [
> >            _Elem=char,
> >            _Traits=std::char_traits<char>
> >        ]
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ')'
> > before '->'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ';'
> > before '->'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(404) : error C2334: unexpected token(s)
> > preceding '{'; skipping appare
> > nt function body
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : '('
> >        C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(437) : see reference to class template
> > instantiation 'std::bas
> > ic_streambuf<_Elem,_Traits>' being compiled
> >        with
> >        [
> >            _Elem=wchar_t,
> >            _Traits=std::char_traits<wchar_t>
> >        ]
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ')'
> > before '->'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2143: syntax error : missing ';'
> > before '->'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(403) : error C2059: syntax error : ')'
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\streambuf(404) : error C2334: unexpected token(s)
> > preceding '{'; skipping appare
> > nt function body
> > C:\Program Files (x86)\Microsoft Visual Studio
> > 8\VC\INCLUDE\istream(1075) : warning C4530: C++ exception handler
> > used, but unwind semantics
> > are not enabled. Specify /EHsc
> > gdal_wrap.cpp(1678) : warning C4244: '=' : conversion from 'IV' to
> > 'long', possible loss of data
> > gdal_wrap.cpp(2292) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(3288) : warning C4267: 'argument' : conversion from
> > 'size_t' to 'I32', possible loss of data
> > gdal_wrap.cpp(6572) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7021) : warning C4267: '=' : conversion from 'size_t' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7030) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7042) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7054) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7071) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7199) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7211) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7223) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(7240) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8214) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8226) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8515) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8527) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8539) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8661) : warning C4267: '=' : conversion from 'size_t' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8670) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8682) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(8694) : warning C4244: '=' : conversion from 'IV' to
> > 'int', possible loss of data
> > gdal_wrap.cpp(9220) : warning C4244: '=' : conversion from 'IV' to
> > 'short', possible loss of data
> > gdal_wrap.cpp(9222) : warning C4244: '=' : conversion from 'IV' to
> > 'short', possible loss of data
> > gdal_wrap.cpp(9224) : warning C4244: '=' : conversion from 'IV' to
> > 'short', possible loss of data
> > gdal_wrap.cpp(9226) : warning C4244: '=' : conversion from 'IV' to
> > 'short', possible loss of data
> > NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> > Studio 8\VC\BIN\amd64\cl.EXE"' : return code '0x2'
> > Stop.
> >
> > Best regards,
> >
> > Tamas
>
>
> --
> Prof. Ari Jolma
> Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
> Teknillinen Korkeakoulu / Helsinki University of Technology
> tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
> Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>
>
>

From mateusz at loskot.net  Mon Apr 23 09:06:53 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Error building gdal/ogr: undefined reference to
	`_gfortran_ ...
In-Reply-To: <a498cee90704230554w4a10862n2c8fd2fcb502b41e@mail.gmail.com>
References: <a498cee90704230430v5dff40f6i4d82f0a1211422f7@mail.gmail.com>	
	<462CA0F7.80701@loskot.net>	
	<a498cee90704230516s419ad0d2k67fade4a02654f46@mail.gmail.com>	
	<462CA4AF.7040909@loskot.net>
	<a498cee90704230554w4a10862n2c8fd2fcb502b41e@mail.gmail.com>
Message-ID: <462CAF6D.6010909@loskot.net>

Hern?n De Angelis wrote:
>> Could you run "make clean" first and then add --without-libtool 
>> option to your configure command and make again, and see if that
>> will work.
> 
> Yes! It worked flawlessly, only with a long series of warnings at the
>  end of the make, when making pymod, of the type:
> 
> gdal_wrap.c:1211: warning: dereferencing type-punned pointer will 
> break strict-aliasing rules
> 
> Although this is not an unusual thing in gdal.

Right.

> Now I will check that everything works.

OK

> I noted that in previous installations in this same machine (P4 3.0
> GHz, 2Gb RAM) gdal/ogr used to take 9 minutes to make, whereas it too
> only 5 min now. Do you thing this is because of having disabled
> libtool, is it something about this new version or is it that 
> something went wrong?

The timing is very correct to me.
It's well known that libtool increases building time significantly.

> In any case the cause of the original error is not clear for me.

It's not clear to me too, perhaps it's a libtool problem but I don't know.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Apr 23 09:10:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL Perl compilations
In-Reply-To: <462CA754.6020909@tkk.fi>
References: <f3b73b7d0704221520i4aa73029oef11153b125e5ef1@mail.gmail.com>
	<462CA754.6020909@tkk.fi>
Message-ID: <462CB02B.7090102@loskot.net>

Ari Jolma wrote:
> I'm currently trying to build it with ActivePerl & Visual C++ 2003,
> but my first try yesterday was not succesful. I hit the same" 
> 'PerlProc_abort' : is not a  member of '`global namespace" problem, 
> which is an issue with swig+MSVC I think. Currently I have no idea
> how to fix that. Anybody?

The PerlProc_abort declaration is incorrectly recognized or it's
incorrectly used.

May be SWIG puts it in a dedicated namespace, C++ namespace?

I'd suggest to track down where it is declared.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Mon Apr 23 09:36:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <20070423091221.GA7638@ak4719.spb.edu>
References: <4628E141.3040304@pobox.com> <20070423091221.GA7638@ak4719.spb.edu>
Message-ID: <462CB640.1060804@pobox.com>

Andrey Kiselev wrote:
> On Fri, Apr 20, 2007 at 11:50:25AM -0400, Frank Warmerdam wrote:
>> My currently thinking is that we should add MINGW, and VS Express
>> Edition support, and possibly drop Visual Studio 6 support.
> 
> Frank,
> 
> I am strongly against dropping VS6 support. I am using that environment
> and will need it to use at least a year. I am ready to solve problems
> related to that build. We can drop VS6, but not right now.

Andrey,

No problem.  VS6 isn't causing any problems, and I'm happy to keep it on
the supported list for a while.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Mon Apr 23 09:43:04 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Re: GDAL Perl compilations
In-Reply-To: <f3b73b7d0704230559u5eeb999eg6e41e0251b080e85@mail.gmail.com>
References: <f3b73b7d0704221520i4aa73029oef11153b125e5ef1@mail.gmail.com>
	<462CA754.6020909@tkk.fi>
	<f3b73b7d0704230559u5eeb999eg6e41e0251b080e85@mail.gmail.com>
Message-ID: <462CB7E8.5080004@tkk.fi>

Tamas Szekeres kirjoitti:
> I'm not too familiar with this WriteMakefile stuff but I guess we
> should take over something from nmake.opt  like $INC, $GDALLIB,
> $EXTERNAL_LIBS or so.
> Is Makefile.PL capable to include these variables somehow?
>

Sure. One straight-forward way would be to open nmake.opt and grep the 
information from there, but it really is not a big problem to manually 
edit it, compared to the problem of actually compiling it. Right now the 
Makefile.PL works more or less as it is in MinGW and in Linux. Once I 
get it to compile with VC 7.1 I'll add automatic support for it.

Regards,

Ari



From gyetman at ciesin.columbia.edu  Mon Apr 23 12:30:00 2007
From: gyetman at ciesin.columbia.edu (Gregory Yetman)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] libgdal.so: open failed: No such file or directory
Message-ID: <462CDF08.7060907@ciesin.columbia.edu>

Hi,

Hopefully this isn't too newbie, but I can't find an answer on the forums.

I've compiled GDAL 1.4.1 on solaris (SunOS 5.10) successfully but I'm 
having trouble running most commands. With gdalinfo, ogr2ogr, ogrinfo, 
etc. I get:

ld.so.1: gdalinfo: fatal: libgdal.so: open failed: No such file or directory
Killed

The compile options that I used are below. Note that I'm not root on 
this machine, so I'm using a local folder and no python support. I've 
included the gdal /bin folder on my path and the /lib folder in my 
LD_LIBRARY_PATH. Any other suggestions?

Thanks,

Greg

configure --without-libtool
--without-python
--prefix=/greg/sfw/gdal
--exec-prefix=/greg/sfw/gdal
--with-xerces-inc=/greg/sfw/xerces/xerces-c-solaris_28-cc_62/bin


-- 
--------------------------------------------------------------------
Gregory Yetman
Center for International Earth Science Information Network (CIESIN)
Columbia University
URL: http://www.ciesin.columbia.edu/
e-mail: gyetman (at) ciesin.columbia.edu
tel: (845) 365-8982
--------------------------------------------------------------------


From mateusz at loskot.net  Mon Apr 23 12:44:47 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] libgdal.so: open failed: No such file or directory
In-Reply-To: <462CDF08.7060907@ciesin.columbia.edu>
References: <462CDF08.7060907@ciesin.columbia.edu>
Message-ID: <462CE27F.8050705@loskot.net>

Gregory Yetman wrote:
> Hi,
> 
> Hopefully this isn't too newbie, but I can't find an answer on the
> forums.
> 
> I've compiled GDAL 1.4.1 on solaris (SunOS 5.10) successfully but I'm
>  having trouble running most commands. With gdalinfo, ogr2ogr,
> ogrinfo, etc. I get:
> 
> ld.so.1: gdalinfo: fatal: libgdal.so: open failed: No such file or 
> directory Killed
> 
> The compile options that I used are below. Note that I'm not root on 
> this machine, so I'm using a local folder and no python support. I've
>  included the gdal /bin folder on my path and the /lib folder in my 
> LD_LIBRARY_PATH. Any other suggestions?

Gregory,

I've never worked on SunOS with GDAL, but if you
have the 'ldd' tool, please run:

ldd /absolute/path/to/gdalinfo

and paste the output here.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From gyetman at ciesin.columbia.edu  Mon Apr 23 12:48:02 2007
From: gyetman at ciesin.columbia.edu (Gregory Yetman)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] libgdal.so: open failed: No such file or directory
In-Reply-To: <462CE27F.8050705@loskot.net>
References: <462CDF08.7060907@ciesin.columbia.edu>
	<462CE27F.8050705@loskot.net>
Message-ID: <462CE342.1060306@ciesin.columbia.edu>



Mateusz Loskot wrote:
> 
> Gregory,
> 
> I've never worked on SunOS with GDAL, but if you
> have the 'ldd' tool, please run:
> 
> ldd /absolute/path/to/gdalinfo
> 
> and paste the output here.
> 

Interesting, looks like it can't find libgdal.so:

ldd /space/greg/sfw/gdal/gdal/bin/gdalinfo
         libgdal.so =>    (file not found)
         libjpeg.so.62 =>         /usr/lib/libjpeg.so.62
         libtiff.so.3 =>  /usr/lib/libtiff.so.3
         libpng.so.3 =>   /usr/lib/libpng.so.3
         libz.so.1 =>     /usr/lib/libz.so.1
         librt.so.1 =>    /usr/lib/librt.so.1
         libdl.so.1 =>    /usr/lib/libdl.so.1
         libstdc++.so.6 =>        /usr/sfw/lib/libstdc++.so.6
         libm.so.2 =>     /usr/lib/libm.so.2
         libgcc_s.so.1 =>         /usr/sfw/lib/libgcc_s.so.1
         libc.so.1 =>     /usr/lib/libc.so.1
         libaio.so.1 =>   /usr/lib/libaio.so.1
         libmd5.so.1 =>   /usr/lib/libmd5.so.1
         /platform/SUNW,Sun-Blade-1500/lib/libc_psr.so.1
         /platform/SUNW,Sun-Blade-1500/lib/libmd5_psr.so.1

it exists in:

/space/greg/sfw/gdal/gdal/lib

I don't know why this would be the case....

-- 
--------------------------------------------------------------------
Gregory Yetman
Center for International Earth Science Information Network (CIESIN)
Columbia University
URL: http://www.ciesin.columbia.edu/
e-mail: gyetman (at) ciesin.columbia.edu
tel: (845) 365-8982
--------------------------------------------------------------------


From sy at perkins.net  Mon Apr 23 12:55:05 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Efficient BIP Access?
Message-ID: <462CE4E9.6080704@perkins.net>

Hi,

I have a need to access large hyperspectral (hundred of bands) data 
files efficiently. The files are stored in BIP format (nad interleaved 
by pixel, i.e. "packed" pixel format), and hyperspectral processing is 
typically carried out a pixel at a time using data from all bands.

The GDAL data access functions on the other hand are very band oriented, 
and cache blocks are inherently 2D, and in the absence of tiling, 
default to single rows of the image. So, if I want to access all bands 
in a tile of an image, this will often blow GDAL's cache, since multiple 
whole rows will be loaded for every band. It's also inherently 
inefficient since hundreds of separate multiple random access reads have 
to be made to the same portion of the file for each pixel.

Now, GDALDataset does define a RasterIO() method that allows 3D windows 
to be retrieved, but the default implementation reverts to accessing the 
data band by band. So my question is: which data formats implement this 
method efficiently for BIP images? Second question: do these 
implementations use GDALs cache?

Cheers,

Simon


From mateusz at loskot.net  Mon Apr 23 12:55:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] libgdal.so: open failed: No such file or directory
In-Reply-To: <462CE342.1060306@ciesin.columbia.edu>
References: <462CDF08.7060907@ciesin.columbia.edu>
	<462CE27F.8050705@loskot.net>
	<462CE342.1060306@ciesin.columbia.edu>
Message-ID: <462CE505.1020702@loskot.net>

Gregory Yetman wrote:
> Mateusz Loskot wrote:
>> 
>> Gregory,
>> 
>> I've never worked on SunOS with GDAL, but if you have the 'ldd'
>> tool, please run:
>> 
>> ldd /absolute/path/to/gdalinfo
>> 
>> and paste the output here.
> 
> Interesting, looks like it can't find libgdal.so:
> 
> ldd /space/greg/sfw/gdal/gdal/bin/gdalinfo libgdal.so =>    (file not
> found)

Yes, that's what I supposed

> it exists in:
> 
> /space/greg/sfw/gdal/gdal/lib
> 
> I don't know why this would be the case....

Could you also check this:

echo $LD_LIBRARY_PATH

?

Perhaps my lack of knowledge of SunOS points to wrong direction,
and the LD_LIBRARY_PATH works differently under SunOS than under Linux,
but I'm inclined to say there the path with libgdal.so is not accessible
for the loader.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tcchheng at ucsd.edu  Mon Apr 23 13:36:24 2007
From: tcchheng at ucsd.edu (t chheng)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] RE: Reading/Writing via GDAL library
In-Reply-To: <200704220619.l3M6JWPv002845@smtp11.cape.com>
References: <10109181.post@talk.nabble.com> <4629CB23.4040007@tkk.fi>
	<462AEA81.6040201@ucsd.edu>
	<200704220619.l3M6JWPv002845@smtp11.cape.com>
Message-ID: <10145189.post@talk.nabble.com>


Thanks, that does work.

I'm curious, why doesn't the compile options i've tried work? Why do i have
to use the libgdal.a rather than the produced gdal14.dll file?

> I have gdal14.dll and I tried linking it using:
> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal
> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal14
> -L/c/ossimcvs/gdal-1.4.0/lib -l"gdal14.dll"

Tommy


Norman Vine wrote:
> 
> Tommy Chheng writes:AL library
>> 
>> I will be using the GDAL in conjunction with OSSIM, but for 
>> this error, I commented out the OSSIM-specific code and just 
>> ran the tutorial code.
>> 
>> This is one of the errors that I'm encountering
>> :C:/ossimcvs/ossimConsole/ship_detect.cpp:(.text+0x22): 
>> undefined reference to `OGRSFDriverRegistrar::Open(char 
>> const*, int, OGRSFDriver**)'
>> 
>> I have gdal14.dll and I tried linking it using:
>> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal
>> -L/c/ossimcvs/gdal-1.4.0/lib -lgdal14
>> -L/c/ossimcvs/gdal-1.4.0/lib -l"gdal14.dll"
>> 
>> All with the same error.  Any ideas why it isn't linking correctly?
> 
> 
> Tommy
> 
> Using the last example on http://www.gdal.org/ogr/ogr_apitut.html
> 
> The following commandline works for me with MingW in a MSYS shell
> 
> c++ `gdal-config --cflags` ogr_examp.c++ `gdal-config --libs` -o
> org_examp.exe
> 
> Note the back ticks 
> 
> HTH
> 
> Norman
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Reading-Writing-via-GDAL-library-tf3620307.html#a10145189
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From nhv at cape.com  Mon Apr 23 14:05:04 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] RE: Reading/Writing via GDAL library
In-Reply-To: <10145189.post@talk.nabble.com>
Message-ID: <200704231805.l3NI54Pv031423@smtp11.cape.com>

t chheng writes:
> 
> I'm curious, why doesn't the compile options i've tried work? 
> Why do i have to use the libgdal.a rather than the produced 
> gdal14.dll file?

http://www.redhat.com/docs/manuals/enterprise/RHEL-4-Manual/gnu-linker/win32
.html

HTH

Norman


From warmerdam at pobox.com  Mon Apr 23 14:10:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Efficient BIP Access?
In-Reply-To: <462CE4E9.6080704@perkins.net>
References: <462CE4E9.6080704@perkins.net>
Message-ID: <462CF6B3.70504@pobox.com>

Simon Perkins wrote:
> Hi,
> 
> I have a need to access large hyperspectral (hundred of bands) data 
> files efficiently. The files are stored in BIP format (nad interleaved 
> by pixel, i.e. "packed" pixel format), and hyperspectral processing is 
> typically carried out a pixel at a time using data from all bands.
> 
> The GDAL data access functions on the other hand are very band oriented, 
> and cache blocks are inherently 2D, and in the absence of tiling, 
> default to single rows of the image. So, if I want to access all bands 
> in a tile of an image, this will often blow GDAL's cache, since multiple 
> whole rows will be loaded for every band. It's also inherently 
> inefficient since hundreds of separate multiple random access reads have 
> to be made to the same portion of the file for each pixel.
> 
> Now, GDALDataset does define a RasterIO() method that allows 3D windows 
> to be retrieved, but the default implementation reverts to accessing the 
> data band by band. So my question is: which data formats implement this 
> method efficiently for BIP images? Second question: do these 
> implementations use GDALs cache?

Simon,

Good questions!

Generally speaking when a format overrides GDALDataset::RasterIO() in order
to provide efficient pixel interleaved access, it ends up skipping the cache
though that is not strictly necessary.

On inspection of gdal/frmts/raw/rawdataset.cpp it appears that all the "raw
raster" based drivers have no special support for handling BIP rasters
efficiently, and could benefit from very careful improvements.

There are formats like JPEG that have special logic to "push" extra bands
into the cache when a one band is read.  So if you read an RGB JPEG file
one scanline via IReadBlock() (directly or indirectly) it will only decode
the image once when reading the first band, at which point it will force
the data into the cache for the second and third bands.

Other formats, like MrSID and JP2KAK override IRasterIO() on the dataset,
and implement reading all requested bands in one pass, but at the cost of
avoiding the block cache.

For pixel interleaved data, the TIFF driver keeps the last tile or strip
around and can satisfy requests for other bands very efficiently.  But this
only works if you request all the bands of a given block before moving on
to the next.  It might make sense to apply the same "push into global cache"
logic in the TIFF driver as is currently used in the JPEG driver.

I think the most important step we could take on more efficient hyperspectral
data access would be to work on the "raw" infrastructure to handle pixel
interleaved data efficiently.  Possibly using the "push into cache" approach
of the jpeg driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mike at scenomics.com  Mon Apr 23 16:24:55 2007
From: mike at scenomics.com (Mike Richardson)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Pixel Loss When Resampling
Message-ID: <046401c785e5$77b3b720$1b00da0c@YOURF739F58915>

There is a discussion about reprojecting imagery and pixel loss. Wouldn't 
some pixel loss be normal, depending on the type of imagery? SDTS files are 
already projected in UTM and it seems to me that the data is a bit lossy, 
especially in scan lines near the top of the image. The scan lines there 
have fewer pixels than the scanlines near the bottom, especially as you 
approach the north or south pole. [ Background: SDTS files contain data that 
has already been projected onto a sphere.]

I think another important question is: What are the correct results? I think 
some pixel loss might be "correct" in some cases. 


From mateusz at loskot.net  Mon Apr 23 17:30:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <4628E141.3040304@pobox.com>
References: <4628E141.3040304@pobox.com>
Message-ID: <462D2565.5050507@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> As I'm sure many have noticed in the past, I've been cool to actively
> supporting MingW builds of GDAL.  Some people might remember that I was
> the same way about Cygwin builds for three or four years, till I finally
> accepted it should be a supported build environment.

Frank,

So, we're going to officially support both: MinGW and Cygwin.

> However, there is clearly a significant interest in MingW builds.  So I'd
> like to open a discussion about what win32 build environments we are
> willing to expect maintainer time on supporting.
> Environments not in this list can
> still be supported by contributors, but we aren't going to commit
> significant maintainer resources to them,
> and I won't feel personally bad if they rot. :-)
> 
> Currently supported:
>  o Visual Studio 6 (via nmakefile)
>  o Visual Studio 2003 (aka VC7.1) (via nmakefile)

I think we also (implicitly) support Visual Studio .NET 2002 with
the Visual C++ 7.0 compiler.

>  o Visual Studio 2005 (aka VC8) (via nmakefile)
>  o Cygwin (via unix build mechanism)
> 
> 
> Some potential candidates that come to mind:
>  o Visual Studio Express Edition (the free download)
>  o Visual Studio via project files (beyond the simple ones
>    we have now that just run the nmakefiles)
>  o MINGW (using the unix build scripts and makefiles)
>  o Borland C

Do we have any version of Borland specified?
BTW, the new version is called Turbo C/C++:

http://www.turboexplorer.com/

>  o WATCOM C (or whatever the free version is called)

Open Watcom C/C++ and it's Open Source project available here:

http://www.openwatcom.org

> My currently thinking is that we should add MINGW, and VS Express
> Edition support,

The Express Edition can be supported similarly to VC++ 7.x/8

> and possibly drop Visual Studio 6 support.  After a bit
> of discussion, my intent would be to make a motion declaring particular
> compiler/build environments supported for win32, and thereafter we would
> make a concerted effort to test them before releases, and fix issues that
> come up.

I'm all for that.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From bgreene at rapidmap.com.au  Mon Apr 23 19:49:32 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:48 2007
Subject: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write
	protected memory
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC64885715@rmg-server03.rmg.local>

Tamas,
 
Would the SVN trunk be considered stable enough to release with a commercial product?  If it's probably not a good idea, is there currently a target date for a stable release based on this new code?
 
Thanks

	-----Original Message----- 
	From: Tamas Szekeres [mailto:szekerest@gmail.com] 
	Sent: Mon 4/23/2007 8:29 PM 
	To: Ben Greene 
	Cc: gdal-dev@lists.maptools.org 
	Subject: Re: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write protected memory
	
	

	Ben,
	
	I would suggest to start with the latest SVN trunk. There were some
	fundamental changes compared with the current stable branch. It might
	be more difficult to make this transition later. For more information
	see:
	
	http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
	http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp
	
	Best regards,
	
	Tamas
	
	
	
	2007/4/23, Ben Greene <bgreene@rapidmap.com.au>:
	> Hi,
	>
	> I had a problem with the GDAL C# bindings freezing a little while ago, and Tamas managed to find the problem (I was passing in a two-element array instead of a three element for the return value).  However, now I'm having a different issue.
	>
	> I'm working with 1.4.1 binaries compiled myself according to the instructions on this site (I can't find the most recent binaries in the FWTools distribution).  When I run the code below, I get a System.AccessViolationException:Attempted to read or write protected memory exception on the line:
	> transform.TransformPoint(point, px, py, 0.0)
	>
	> It appears that the exception is thrown from this line:
	> public void TransformPoint(double[] argout, double x, double y, double z) {
	>
	> osrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(swigCPtr, argout, x, y, z);
	>
	> }
	>
	> The test image I'm using is:
	>
	> o41078a5.tif
	> from
	> http://dl.maptools.org/dl/geotiff/samples/usgs/
	>
	> Here is the VB.Net code I'm using (in VS 2005):
	>
	> Imports GDAL
	>
	> Imports OGR
	>
	> Public Class GeoTiffReader
	>
	> Private Shared image As Dataset
	>
	> Public Shared Function GetGeoReference(ByVal Filename As String) As GeoReference
	>
	> If Not (Filename Is Nothing) Then
	>
	> 'Return Nothing
	>
	> 'if uncommented, the code will not crash
	>
	> End If
	>
	> GDAL.gdal.AllRegister()
	>
	> image = GDAL.gdal.Open(Filename, 0)
	>
	> If (image Is Nothing) Then
	>
	> Return Nothing
	>
	> End If
	>
	> Dim gr(6) As Double
	>
	> image.GetGeoTransform(gr)
	>
	> Dim topLeft() As Double = TransformWGS84(gr(0), gr(3))
	>
	> Dim bottomRight() As Double = TransformWGS84(gr(0) + gr(1) * image.RasterXSize, gr(3) + gr(5) * image.RasterXSize)
	>
	> If (topLeft.Length = 2 And bottomRight.Length = 2) Then
	>
	> Return New GeoReference(topLeft(0), topLeft(1), bottomRight(0), bottomRight(1))
	>
	> Else
	>
	> Return Nothing
	>
	> End If
	>
	> image.Dispose()
	>
	> End Function
	>
	> Public Shared Function TransformWGS84(ByVal px As Double, ByVal py As Double) As Double()
	>
	> Dim point() As Double
	>
	> point = New Double() {0.0, 0.0, 0.0}
	>
	> Dim srWGS84 As New SpatialReference("")
	>
	> srWGS84.SetWellKnownGeogCS("WGS84")
	>
	> If (image.GetProjection() = "") Then
	>
	> Return New Double() {}
	>
	> End If
	>
	> Dim srCurrent As New SpatialReference(image.GetProjection())
	>
	> Dim transform As New CoordinateTransformation(srCurrent, srWGS84)
	>
	> If (transform Is Nothing) Then
	>
	> Return New Double() {}
	>
	> End If
	>
	> Try
	>
	> transform.TransformPoint(point, px, py, 0.0)
	>
	> Catch
	>
	> Return New Double() {}
	>
	> End Try
	>
	> Return point
	>
	> End Function
	>
	> End Class
	>
	>
	> _______________________________________________
	> Gdal-dev mailing list
	> Gdal-dev@lists.maptools.org
	> http://lists.maptools.org/mailman/listinfo/gdal-dev
	>
	



From warmerdam at pobox.com  Mon Apr 23 20:17:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <462D2565.5050507@loskot.net>
References: <4628E141.3040304@pobox.com> <462D2565.5050507@loskot.net>
Message-ID: <462D4C81.3090309@pobox.com>

Mateusz Loskot wrote:
> Frank,
> 
> So, we're going to officially support both: MinGW and Cygwin.

Mateusz,

Well, that is a matter for discussion.  I hadn't really planned
to drop the Cygwin builds, though if people think there is little
interest in that we could.  I've never really used the cygwin builds
for anything "real".

I guess the question would be how many people are interested in
continued cygwin support?

>> Currently supported:
>>  o Visual Studio 6 (via nmakefile)
>>  o Visual Studio 2003 (aka VC7.1) (via nmakefile)
> 
> I think we also (implicitly) support Visual Studio .NET 2002 with
> the Visual C++ 7.0 compiler.

This version works, but I'm suggesting that we wouldn't actively
test it.  Lots of things might work, but not be considered supported.

>> My currently thinking is that we should add MINGW, and VS Express
>> Edition support,
> 
> The Express Edition can be supported similarly to VC++ 7.x/8

Right, I don't anticipate much in the way of changes would be required,
but there have been occasional complaints and problems.  If we support
the express edition then we would try and work through and test this
compiler before releases.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Apr 23 20:26:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write
	protected memory
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC64885715@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC64885715@rmg-server03.rmg.local>
Message-ID: <462D4E9D.1090909@pobox.com>

Ben Greene wrote:
> Tamas,
> 
> Would the SVN trunk be considered stable enough to release with a commercial
> product?  If it's probably not a good idea, is there currently a target date
> for a stable release based on this new code?

Ben,

I am thinking the GDAL 1.5.0 release would be sometime mid-summer.

You could likely retrofit the C# bindings in trunk back onto the 1.4.1
release with a minimum of hassle.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Mon Apr 23 22:45:29 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Computing MinMax on a NETCDF subdataset
Message-ID: <462D6F49.9070606@ualg.pt>

Hi,
In my gdalread MEX file I have this call

GDALComputeRasterMinMax(hBand, FALSE, adfMinMax);

which, in case of reading a NETCDF file, is returning

adfMinMax[0] = 0  and adfMinMax[1] = 0
or
adfMinMax[0] = -4294967295.0  and adfMinMax[1] = 4294967295.0
if I change to
GDALComputeRasterMinMax(hBand, TRUE, adfMinMax);

Note that I'm using this (example)
Z =  gdalread('NETCDF:"D:\SVN\global.nc":z');
which is the correct way of using this MEX, confirmed by the fact that Z 
has the correct values.

For all other formats that I have tested, the min/max is correct.

Is this on purpose or a feature?

Joaquim Luis



From khrithik_kumar at yahoo.co.in  Tue Apr 24 05:33:21 2007
From: khrithik_kumar at yahoo.co.in (sen thil)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Creation of  *.PRJ file from Shapefile (*.shp) - reg.
Message-ID: <135928.12951.qm@web94510.mail.in2.yahoo.com>

Hai all,

I am working on shapefile using C#.NET. I would like
to know how to create a PRJ file from a shape file.
Infact this can be acheived by using any GIS tool.
But, i would like to create it thro' programmming
using some OGR or shape file API in C#. Can anyone
please help me in this regard. Is there any API
available or any source code to create a PRJ file from
shape file with its corresponding Spatial Refernce
System.

Thanks & regards,

skr_t 


      Send a FREE SMS to your friend's mobile from Yahoo! Messenger. Get it now at http://in.messenger.yahoo.com/

From szekerest at gmail.com  Tue Apr 24 06:36:51 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write
	protected memory
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC64885715@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC64885715@rmg-server03.rmg.local>
Message-ID: <f3b73b7d0704240336w3cfbcdbaka4b58d16f3388a7f@mail.gmail.com>

Ben,

If you would like to use the gdal1.4 branch as the gdal core and only
aware of the C# interface of the SWIG bindings, then checkout:
http://svn.osgeo.org/gdal/branches/1.4/gdal/
and replace the the swig directory with the files from the SVN trunk.

Then you can compile gdal and gdal C# as usual.

Best regards,

Tamas


2007/4/24, Ben Greene <bgreene@rapidmap.com.au>:
> Tamas,
>
> Would the SVN trunk be considered stable enough to release with a commercial product?  If it's probably not a good idea, is there currently a target date for a stable release based on this new code?
>
> Thanks
>
>         -----Original Message-----
>         From: Tamas Szekeres [mailto:szekerest@gmail.com]
>         Sent: Mon 4/23/2007 8:29 PM
>         To: Ben Greene
>         Cc: gdal-dev@lists.maptools.org
>         Subject: Re: [Gdal-dev] GDAL C# bindings exception: Attempted to read or write protected memory
>
>
>
>         Ben,
>
>         I would suggest to start with the latest SVN trunk. There were some
>         fundamental changes compared with the current stable branch. It might
>         be more difficult to make this transition later. For more information
>         see:
>
>         http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
>         http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp
>
>         Best regards,
>
>         Tamas
>
>
>
>         2007/4/23, Ben Greene <bgreene@rapidmap.com.au>:
>         > Hi,
>         >
>         > I had a problem with the GDAL C# bindings freezing a little while ago, and Tamas managed to find the problem (I was passing in a two-element array instead of a three element for the return value).  However, now I'm having a different issue.
>         >
>         > I'm working with 1.4.1 binaries compiled myself according to the instructions on this site (I can't find the most recent binaries in the FWTools distribution).  When I run the code below, I get a System.AccessViolationException:Attempted to read or write protected memory exception on the line:
>         > transform.TransformPoint(point, px, py, 0.0)
>         >
>         > It appears that the exception is thrown from this line:
>         > public void TransformPoint(double[] argout, double x, double y, double z) {
>         >
>         > osrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(swigCPtr, argout, x, y, z);
>         >
>         > }
>         >
>         > The test image I'm using is:
>         >
>         > o41078a5.tif
>         > from
>         > http://dl.maptools.org/dl/geotiff/samples/usgs/
>         >
>         > Here is the VB.Net code I'm using (in VS 2005):
>         >
>         > Imports GDAL
>         >
>         > Imports OGR
>         >
>         > Public Class GeoTiffReader
>         >
>         > Private Shared image As Dataset
>         >
>         > Public Shared Function GetGeoReference(ByVal Filename As String) As GeoReference
>         >
>         > If Not (Filename Is Nothing) Then
>         >
>         > 'Return Nothing
>         >
>         > 'if uncommented, the code will not crash
>         >
>         > End If
>         >
>         > GDAL.gdal.AllRegister()
>         >
>         > image = GDAL.gdal.Open(Filename, 0)
>         >
>         > If (image Is Nothing) Then
>         >
>         > Return Nothing
>         >
>         > End If
>         >
>         > Dim gr(6) As Double
>         >
>         > image.GetGeoTransform(gr)
>         >
>         > Dim topLeft() As Double = TransformWGS84(gr(0), gr(3))
>         >
>         > Dim bottomRight() As Double = TransformWGS84(gr(0) + gr(1) * image.RasterXSize, gr(3) + gr(5) * image.RasterXSize)
>         >
>         > If (topLeft.Length = 2 And bottomRight.Length = 2) Then
>         >
>         > Return New GeoReference(topLeft(0), topLeft(1), bottomRight(0), bottomRight(1))
>         >
>         > Else
>         >
>         > Return Nothing
>         >
>         > End If
>         >
>         > image.Dispose()
>         >
>         > End Function
>         >
>         > Public Shared Function TransformWGS84(ByVal px As Double, ByVal py As Double) As Double()
>         >
>         > Dim point() As Double
>         >
>         > point = New Double() {0.0, 0.0, 0.0}
>         >
>         > Dim srWGS84 As New SpatialReference("")
>         >
>         > srWGS84.SetWellKnownGeogCS("WGS84")
>         >
>         > If (image.GetProjection() = "") Then
>         >
>         > Return New Double() {}
>         >
>         > End If
>         >
>         > Dim srCurrent As New SpatialReference(image.GetProjection())
>         >
>         > Dim transform As New CoordinateTransformation(srCurrent, srWGS84)
>         >
>         > If (transform Is Nothing) Then
>         >
>         > Return New Double() {}
>         >
>         > End If
>         >
>         > Try
>         >
>         > transform.TransformPoint(point, px, py, 0.0)
>         >
>         > Catch
>         >
>         > Return New Double() {}
>         >
>         > End Try
>         >
>         > Return point
>         >
>         > End Function
>         >
>         > End Class
>         >
>         >
>         > _______________________________________________
>         > Gdal-dev mailing list
>         > Gdal-dev@lists.maptools.org
>         > http://lists.maptools.org/mailman/listinfo/gdal-dev
>         >
>
>
>

From szekerest at gmail.com  Tue Apr 24 07:25:09 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Creation of *.PRJ file from Shapefile (*.shp) - reg.
In-Reply-To: <135928.12951.qm@web94510.mail.in2.yahoo.com>
References: <135928.12951.qm@web94510.mail.in2.yahoo.com>
Message-ID: <f3b73b7d0704240425i16d84af2m23ccf8941aa344f3@mail.gmail.com>

Hopefully you could use the GDAL/OGR C# API to accomplish this task.
I think the morphToESRI() and exportToWkt() methods of the
SpatialReference object can be used to generate output suitable to
write Arc/Info 8 compatible .prj files.

Best regards,

Tamas


2007/4/24, sen thil <khrithik_kumar@yahoo.co.in>:
> Hai all,
>
> I am working on shapefile using C#.NET. I would like
> to know how to create a PRJ file from a shape file.
> Infact this can be acheived by using any GIS tool.
> But, i would like to create it thro' programmming
> using some OGR or shape file API in C#. Can anyone
> please help me in this regard. Is there any API
> available or any source code to create a PRJ file from
> shape file with its corresponding Spatial Refernce
> System.
>
> Thanks & regards,
>
> skr_t
>
>
>       Send a FREE SMS to your friend's mobile from Yahoo! Messenger. Get it now at http://in.messenger.yahoo.com/
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mateusz at loskot.net  Tue Apr 24 07:41:07 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Creation of  *.PRJ file from Shapefile (*.shp) - reg.
In-Reply-To: <135928.12951.qm@web94510.mail.in2.yahoo.com>
References: <135928.12951.qm@web94510.mail.in2.yahoo.com>
Message-ID: <462DECD3.3030409@loskot.net>

sen thil wrote:
> Hai all,
> 
> I am working on shapefile using C#.NET. I would like
> to know how to create a PRJ file from a shape file.

During layer creation with OGRDataSource::CreateLayer [1]
pass valid object of SRS and OGR will save it for you,
in Shapefile as .prj file.

[1]
http://www.gdal.org/ogr/classOGRDataSource.html#39cfc6e0ee790506d7638b0dce03c7da

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Apr 24 09:32:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Computing MinMax on a NETCDF subdataset
In-Reply-To: <462D6F49.9070606@ualg.pt>
References: <462D6F49.9070606@ualg.pt>
Message-ID: <462E06E6.6070003@pobox.com>

Joaquim Luis wrote:
> Hi,
> In my gdalread MEX file I have this call
> 
> GDALComputeRasterMinMax(hBand, FALSE, adfMinMax);
> 
> which, in case of reading a NETCDF file, is returning
> 
> adfMinMax[0] = 0  and adfMinMax[1] = 0
> or
> adfMinMax[0] = -4294967295.0  and adfMinMax[1] = 4294967295.0
> if I change to
> GDALComputeRasterMinMax(hBand, TRUE, adfMinMax);
> 
> Note that I'm using this (example)
> Z =  gdalread('NETCDF:"D:\SVN\global.nc":z');
> which is the correct way of using this MEX, confirmed by the fact that Z 
> has the correct values.
> 
> For all other formats that I have tested, the min/max is correct.
> 
> Is this on purpose or a feature?

Joaquim,

This is not expected behavior.  Could you provide the global.nc file for me
to do some testing with?  Perhaps best to file this as a problem bug so I
can keep track of it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Tue Apr 24 10:30:51 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] mitab driver
In-Reply-To: <1177079907.3425.41.camel@emil.intranet.gdv.com>
References: <1177079907.3425.41.camel@emil.intranet.gdv.com>
Message-ID: <462E149B.3070204@mapgears.com>

Nicol Hermann wrote:
> Hi list,
> 
> i have a question concerning the subversion version of the mitab driver
> in gdal. I saw that it was updated to version 1.6.1.
> Does this driver version support updates of existing files?
> Many thanks

No it doesn't support updates of existing files. MITAB 1.6.x doesn't 
support that either (yet).

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From mateusz at loskot.net  Tue Apr 24 10:47:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <462D4C81.3090309@pobox.com>
References: <4628E141.3040304@pobox.com> <462D2565.5050507@loskot.net>
	<462D4C81.3090309@pobox.com>
Message-ID: <462E1897.1090606@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>>> Currently supported:
>>>  o Visual Studio 6 (via nmakefile)
>>>  o Visual Studio 2003 (aka VC7.1) (via nmakefile)
>>
>> I think we also (implicitly) support Visual Studio .NET 2002 with
>> the Visual C++ 7.0 compiler.
> 
> This version works, but I'm suggesting that we wouldn't actively
> test it.  Lots of things might work, but not be considered supported.

Frank,

Understood.

>>> My currently thinking is that we should add MINGW, and VS Express
>>> Edition support,
>>
>> The Express Edition can be supported similarly to VC++ 7.x/8
> 
> Right, I don't anticipate much in the way of changes would be required,
> but there have been occasional complaints and problems.  If we support
> the express edition then we would try and work through and test this
> compiler before releases.

I think it would be helpful if wecan setup dedicated
builders for every compiler we want to support.

Perhaps, it would be possible to have it based on VMWare hosts?

What do you think?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Tue Apr 24 12:21:11 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Computing MinMax on a NETCDF subdataset
In-Reply-To: <462E06E6.6070003@pobox.com>
References: <462D6F49.9070606@ualg.pt> <462E06E6.6070003@pobox.com>
Message-ID: <462E2E77.6@ualg.pt>

Frank Warmerdam wrote:
> Joaquim Luis wrote:
>> Hi,
>> In my gdalread MEX file I have this call
>>
>> GDALComputeRasterMinMax(hBand, FALSE, adfMinMax);
>>
>> which, in case of reading a NETCDF file, is returning
>>
>> adfMinMax[0] = 0  and adfMinMax[1] = 0
>> or
>> adfMinMax[0] = -4294967295.0  and adfMinMax[1] = 4294967295.0
>> if I change to
>> GDALComputeRasterMinMax(hBand, TRUE, adfMinMax);
>>
>> Note that I'm using this (example)
>> Z =  gdalread('NETCDF:"D:\SVN\global.nc":z');
>> which is the correct way of using this MEX, confirmed by the fact 
>> that Z has the correct values.
>>
>> For all other formats that I have tested, the min/max is correct.
>>
>> Is this on purpose or a feature?
>
> Joaquim,
>
> This is not expected behavior.  Could you provide the global.nc file 
> for me
> to do some testing with?
Frank,
No need to use the global.nc. I reproduced the same behavior with a GMT 
generated file.

e.g, using GMT's example 5 mexican hat you can use the sombrero.grd for 
testing
grdmath -R-15/15/-15/15 -I0.3 X Y HYPOT DUP 2 MUL PI MUL 8 DIV COS EXCH 
NEG 10 DIV EXP MUL = sombrero.grd

For sanity I rechecked with old format GMT file (e.g grdmath  ... = 
sombrero.grd=cf) and the result was correct

> Perhaps best to file this as a problem bug so I can keep track of it.
Done.

Joaquim


From matt.wilkie at gov.yk.ca  Tue Apr 24 13:15:47 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Re: Resampling With GDAL
In-Reply-To: <032e01c78394$818935c0$1b00da0c@YOURF739F58915>
References: <027901c78321$034dac90$1b00da0c@YOURF739F58915>
	<4628FB3A.7090204@gov.yk.ca>
	<032e01c78394$818935c0$1b00da0c@YOURF739F58915>
Message-ID: <462E3B43.5030305@gov.yk.ca>

Mike Richardson wrote:
> Thanks for the upgrade! [I hope this is the right way to reply to the 
> thread... new this system!]

"the right way": It's pretty much ReplyAll for stuff that adds value to 
the thread, (might be useful for those searching the archives and 
whatnot) and ReplySender for chitchat. But really it's whatever feels 
right to you.


> Another caveat: this technique does not work on paletted images. 
> True-color only.

For indexed images change the resampling to nearest neighbour (-rn) 
rather than bilinear, cubic or cubic spline (-rb, -rc, -rcs):

    gdalwarp -q -rn -ts %%a %%a !tmpFile! xx_%%a_%inFile%

Oops, I made a mistake in the NiceResample.cmd I posted earlier, 
neglecting to specify the resampling kernel at all.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue Apr 24 15:11:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <462E1897.1090606@loskot.net>
References: <4628E141.3040304@pobox.com> <462D2565.5050507@loskot.net>
	<462D4C81.3090309@pobox.com> <462E1897.1090606@loskot.net>
Message-ID: <462E564E.8080304@pobox.com>

Mateusz Loskot wrote:
> I think it would be helpful if wecan setup dedicated
> builders for every compiler we want to support.
> 
> Perhaps, it would be possible to have it based on VMWare hosts?

Mateusz,

This is mildly desirable, but I don't think it is critical.  It is
important that there is at least one GDAL developer committed to
supporting it for each compiler configuration, and that we check/verify
them before releases.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Apr 24 15:01:46 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32: Supported build environments
In-Reply-To: <462E564E.8080304@pobox.com>
References: <4628E141.3040304@pobox.com> <462D2565.5050507@loskot.net>
	<462D4C81.3090309@pobox.com> <462E1897.1090606@loskot.net>
	<462E564E.8080304@pobox.com>
Message-ID: <462E541A.3060506@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> I think it would be helpful if wecan setup dedicated
>> builders for every compiler we want to support.
>>
>> Perhaps, it would be possible to have it based on VMWare hosts?
> 
> Mateusz,
> 
> This is mildly desirable, but I don't think it is critical. 

Frank,

OK.

> It is
> important that there is at least one GDAL developer committed to
> supporting it for each compiler configuration, and that we check/verify
> them before releases.

Yes, I agree it's a good to dispatch it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From richard.matsunaga at waypointinfo.com  Tue Apr 24 15:58:08 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Encoding in ogr2ogr
Message-ID: <004601c786aa$e2277ef0$c6012b0a@Richard>

Hi all,
 
I came across this post. I am having the same problem with a MapInfo tab
file with french accented characters. Other than the workaround provided by
Etienne, is there a way to solve this problem where more than just LATIN1
(or whatever) must be supported? i.e. without setting a system environment
variable.
 
Richard
 
On 12/11/05, Etienne Dube <etdube at globetrotter.net
<http://lists.maptools.org/mailman/listinfo/gdal-dev> > wrote:

> This is correct. I've managed to insert latin1 characters in a

> UTF8-encoded DB with ogr2ogr, by setting the PGCLIENTENCODING

> environment variable to LATIN1 (prior to running ogr). In Windows, that

> would be:

>

> SET PGCLIENTENCODING=LATIN1



Etienne / Charlie,



I have added a note on PGCLIENTENCODING in the postgres/postgis

driver details.  BTW, I am also getting "encouragement" from Andrey

to deal with encodings in OGR.  Perhaps something will need to be

done, as loath as I am to deal with it.



Best regards,

--

---------------------------------------+------------------------------------
--

I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at
pobox.com <http://lists.maptools.org/mailman/listinfo/gdal-dev> 

light and sound - activate the windows | http://pobox.com/~warmerdam

and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070424/9063dab3/attachment.html
From jluis at ualg.pt  Tue Apr 24 16:53:48 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Incorrect adfGeoTransform on a NETCDF subdataset
In-Reply-To: <462E2E77.6@ualg.pt>
References: <462D6F49.9070606@ualg.pt> <462E06E6.6070003@pobox.com>
	<462E2E77.6@ualg.pt>
Message-ID: <462E6E5C.10503@ualg.pt>

Hi again,

Now the problem is with adfGeoTransform.
adfGeoTransform[3] and adfGeoTransform[5] have the sign swapped on a 
NETCDF dataset.

Without checking how GDALInfoReportCorner() works I think that the 
problem is illustrated
with the following example

Cheers

Joaquim Luis

Use GMT to create two example files
grdmath -R-10/15/-9/16 -I1 = t1.grd           ------ netCDF file
grdmath -R-10/15/-9/16 -I1 = t2.grd=cf      ------ old GMT format file

gdalinfo t2.grd
Driver: GMT/GMT NetCDF Grid Format
Size is 26, 26
Coordinate System is `'
Origin = (-10.500000000000000,16.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  ( -10.5000000,  16.5000000)
Lower Left  ( -10.5000000,  -9.5000000)              ---------------> 
CORRECT
Upper Right (  15.5000000,  16.5000000)
Lower Right (  15.5000000,  -9.5000000)
Center      (   2.5000000,   3.5000000)
Band 1 Block=26x1 Type=Float32, ColorInterp=Undefined


gdalinfo NETCDF:"t1.grd":z
Driver: netCDF/Network Common Data Format
Size is 26, 26
Coordinate System is `'
Origin = (-10.500000000000000,-9.500000000000000)
Pixel Size = (1.000000000000000,1.000000000000000)
Metadata:
  NC_GLOBAL#Conventions=COARDS
  NC_GLOBAL#history=grdmath -R-10/15/-9/16 -I1 = t1.grd
  NC_GLOBAL#node_offset=0
  z#long_name=z
  z#_FillValue=1.#QNAN0e+000
  z#actual_range=0.000000e+0000.000000e+000
  x#long_name=x
  x#actual_range=-1015
  y#long_name=y
  y#actual_range=-916
Corner Coordinates:
Upper Left  ( -10.5000000,  -9.5000000)
Lower Left  ( -10.5000000,  16.5000000)
Upper Right (  15.5000000,  -9.5000000)               
------------------> WRONG
Lower Right (  15.5000000,  16.5000000)
Center      (   2.5000000,   3.5000000)
Band 1 Block=26x1 Type=Float32, ColorInterp=Undefined
  NoData Value=1.#QNAN
  Metadata:
    NETCDF_VARNAME=z

From Bob.Moskovitz at conservation.ca.gov  Tue Apr 24 17:21:49 2007
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <A73B6E7A4503E948826CE81A65AF5FEC087900@docexs1.ad.consrv.ca.gov>

Hello All,
 
I have a quad map of California that is in a Shapefile.  I converted this file into a KML file with ogr2ogr and displayed it in Google Earth.  The quads are filled with white which blocks out the layers below.  So after changing the style, I got a nice black grid and was able to view the other layers.  What I want to do now is have the quad names display at the center of the quad.  Reading the KML specs tells me that I have to add a POINT feature within the PLACEMARK tag.  Rather then manually editing thousands of PLACEMARKs, I am hoping that there is an easier way to do it.
 
Does anybody have any suggestions?  Maybe in the future there can be a creation option for the KML format that would solve this problem :)
 
Bob

CONFIDENTIALITY NOTICE: This communication is intended only for the use of the individual or entity to which it is addressed. This message contains information from the State of California, California Geological Survey, which may be privileged, confidential and exempt from disclosure under applicable law, including the Electronic Communications Privacy Act. If the reader of this communication is not the intended recipient, you are hereby notified that any dissemination, distribution, or copying of this communication is strictly prohibited.

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070424/9e76e66c/attachment.html
From aaime at openplans.org  Wed Apr 25 11:02:29 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Java and the build environment
In-Reply-To: <462B3746.1040905@tkk.fi>
References: <462B1C3A.7030302@openplans.org> <462B3746.1040905@tkk.fi>
Message-ID: <462F6D85.3020308@openplans.org>

Ari Jolma ha scritto:
> Andrea Aime kirjoitti:
>>
>> On mingw I cannot even make gdal compile, I guess I need a "gdal+mingw 
>> for dummies" guide to try this road.
> 
> Get MinGW-5.1.3 exe, MSYS-1.0.10.exe, w32api-3.8.tar.gz, 
> binutils-2.17.50-20060824-1.tar.gz and install them (this may not be 
> comprehensive list but start with MinGW and execute the install package 
> and try to add gcc etc. - the tar packages you just unpack to c:\mingw). 
> Then open MSYS prompt, go to the dir where you unpacked GDAL, and issue 
> commands:
> 
> ./configure
> make
> make install
> 
> And you should have libgdal-1.dll in your c:\msys\1.0\local\bin and 
> libgdal-1.dll.a in c:\msys\1.0\local\lib.
> 
> Easy :)

Hi,
thanks for the heads up. In fact, the mingw installer downloaded and 
installed w32api and binutils for me once I asked for the g++ compiler
in the installer selection list, so I ended up installing only mingw
and msys.

Now, configure goes fine, make breaks during linking with the following
error message:

libtool: link: rm -fr  .libs/libgdal.la.lnkscript
libtool: link: creating GNU ld script: .libs/libgdal.la.lnkscript
libtool: link: g++ -shared -nostdlib /mingw/lib/dllcrt2.o 
c:/MinGW/bin/../lib/gcc/mingw32/3.4.2/crtbegin.o 
.libs/libgdal.la.lnkscript  -Lc:/MinGW/bin/../lib/gcc/mingw32/3.4.2 
-Lc:/MinGW/bin/../lib/gcc -L/mingw/lib/gcc/mingw32/3.4.2 
-Lc:/MinGW/bin/../lib/gcc/mingw32/3.4.2/../../../../mingw32/lib 
-L/mingw/lib/gcc/mingw32/3.4.2/../../../../mingw32/lib -L/mingw/lib 
-Lc:/MinGW/bin/../lib/gcc/mingw32/3.4.2/../../.. 
-L/mingw/lib/gcc/mingw32/3.4.2/../../.. -lstdc++ -lmingw32 -lgcc 
-lmoldname -lmingwex -lmsvcrt -luser32 -lkernel32 -ladvapi32 -lshell32 
-lmingw32 -lgcc -lmoldname -lmingwex -lmsvcrt 
c:/MinGW/bin/../lib/gcc/mingw32/3.4.2/crtend.o  -o .libs/libgdal-1.dll 
-Wl,--enable-auto-image-base -Xlinker --out-implib -Xlinker 
.libs/libgdal.dll.a
c:\MinGW\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: 
cannot find /c/progetti/gdal/gdalMing/frmts/o/.libs/EnvisatFile.o
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/c/progetti/gdal/gdalMing'
make: *** [check-lib] Error 2

The funny thing is that I checked, and that EnvisatFile.o is there
were it's looking for it.

At first I suspected env variables, so I cleaned up PATH and
LIB so that the first was minimal and the second was empty.
Then I suspected binutils, and noticed that binutils was not
the one you suggested to install, so I downloaded the tar.gz and 
overwritten the one installed along with MinGW.
Both attempt failed, the error is still the same. Any ideas about
what I did wrong?

Oh, btw, I'm building trunk, not 1.4.x.

Cheers
Andrea


From mitchelljj98 at gmail.com  Wed Apr 25 11:51:34 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] EPSG code of 32618 for WGS 84 / UTM zone 18N
Message-ID: <fa2ac0580704250851q30fd548eve6f697b47ede8208@mail.gmail.com>

Hi,

I have the listed the gdalinfo listing of an erdas imagine file below and
notice that it does not have a EPSG code within it.  I need this EPSG code
if I want to reproject within gdalwarp or for on the fly projection within
mapserver.  Based the gdalinfo listing I searched within the epsg file and
found the following code and definition:

# WGS 84 / UTM zone 18N
<32618> +proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>

Does the above EPSG code of 32618 make sense for the below gdalinfo listing?

Thanks,

John J . Mitchell

-----------------------------------------------------------------------------------------------------------------------------------------------
Driver: HFA/Erdas Imagine Images (.img)
Size is 13940, 33191
Coordinate System is:
PROJCS["UTM Zone 18, Northern Hemisphere",
    GEOGCS["WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (638992.500000000000000,221212.500000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Corner Coordinates:
Upper Left  (  638992.500,  221212.500) ( 73d45'0.91"W,  2d 0'3.21"N)
Lower Left  (  638992.500,   55257.500) ( 73d45'3.46"W,  0d29'59.32"N)
Upper Right (  708692.500,  221212.500) ( 73d 7'25.44"W,  2d 0'1.05"N)
Lower Right (  708692.500,   55257.500) ( 73d 7'29.28"W,  0d29'58.78"N)
Center      (  673842.500,  138235.000) ( 73d26'15.17"W,  1d15'0.67"N)

-----------------------------------------------------------------------------------------------------------------------------------------------




-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070425/8e729b8f/attachment.html
From bryan at geomega.com  Wed Apr 25 12:35:10 2007
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] (no subject)
In-Reply-To: <A73B6E7A4503E948826CE81A65AF5FEC087900@docexs1.ad.consrv.ca.gov>
References: <A73B6E7A4503E948826CE81A65AF5FEC087900@docexs1.ad.consrv.ca.gov>
Message-ID: <462F833E.6070704@geomega.com>

Bob,

I did something like this recently but did not find a way to do it 
without writing a short script or two.  Here's what I did.

I put the polygons in a postgis database (which I needed to do anyway to 
do some overlay operations).  I output the polygons and their centroids 
(for the labels) as separate kml files using ogr2ogr, and I wrote a 
short script to combine those two kml files into one kml with the style 
and labels set up the way I wanted.

In the end it might have been easier to script the whole thing (skipping 
the ogr2ogr part) from one postgis sql that output the polygon and 
centroid in the same record as kml.  Were I starting from scratch I'd 
try this approach, but I already had a script written to combine 
multiple kml files into one.

Hope that helps.

Bryan

Moskovitz, Bob wrote:
> Hello All,
> 
> I have a quad map of California that is in a Shapefile.  I converted
> this file into a KML file with ogr2ogr and displayed it in Google
> Earth.  The quads are filled with white which blocks out the layers
> below.  So after changing the style, I got a nice black grid and was
> able to view the other layers.  What I want to do now is have the
> quad names display at the center of the quad.  Reading the KML specs
> tells me that I have to add a POINT feature within the PLACEMARK tag.
> Rather then manually editing thousands of PLACEMARKs, I am hoping
> that there is an easier way to do it.
> 
> Does anybody have any suggestions?  Maybe in the future there can be
> a creation option for the KML format that would solve this problem :)
> 
> 
> Bob
> 
> CONFIDENTIALITY NOTICE: This communication is intended only for the
> use of the individual or entity to which it is addressed. This
> message contains information from the State of California, California
> Geological Survey, which may be privileged, confidential and exempt
> from disclosure under applicable law, including the Electronic
> Communications Privacy Act. If the reader of this communication is
> not the intended recipient, you are hereby notified that any
> dissemination, distribution, or copying of this communication is
> strictly prohibited.
> 
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> _______________________________________________ Gdal-dev mailing list
>  Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From ari.jolma at tkk.fi  Wed Apr 25 13:43:52 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Java and the build environment
In-Reply-To: <462F6D85.3020308@openplans.org>
References: <462B1C3A.7030302@openplans.org> <462B3746.1040905@tkk.fi>
	<462F6D85.3020308@openplans.org>
Message-ID: <462F9358.8040400@tkk.fi>

Andrea Aime kirjoitti:
> thanks for the heads up. In fact, the mingw installer downloaded and 
> installed w32api and binutils for me once I asked for the g++ compiler

I think the default binutils is too old.

>
> c:\MinGW\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: 
> cannot find /c/progetti/gdal/gdalMing/frmts/o/.libs/EnvisatFile.o

I've got the same problem - now, after updating from trunk. The problem 
is in .libs/libgdal.la.lnkscript which is created by libtool. If you 
copy and paste the last command and replace it with frmts/o/.libs/*.o 
port/.libs/*.o gcore/.libs/*.o alg/.libs/*.o o
gr/ogrsf_frmts/o/.libs/*.o ogr/.libs/*.o you should be able to run the 
last command (providing there are no ogrinfo.o or similar in the 
ogr/.libs/).

But the problem is with the libtool or something. The problem seems to 
be only in MinGW. Damn.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ivan.lucena at pmldnet.com  Wed Apr 25 16:00:18 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] EPSG code of 32618 for WGS 84 / UTM zone 18N
In-Reply-To: <fa2ac0580704250851q30fd548eve6f697b47ede8208@mail.gmail.com>
References: <fa2ac0580704250851q30fd548eve6f697b47ede8208@mail.gmail.com>
Message-ID: <000001c78774$597c4160$0a0a0a0a@idrisi.clarku.edu>

Hi John,

 

At http://www.epsg.org/ you can download a MS Access Database/Application in
which you can search and browse through all the EPSG codes.

 

Regards,

 

Ivan

  _____  

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of John Mitchell
Sent: Wednesday, April 25, 2007 11:52 AM
To: mitchelljj98@gmail.com; MAPSERVER-USERS@lists.umn.edu; Gdal-Dev
Cc: Mark A Hollis
Subject: [Gdal-dev] EPSG code of 32618 for WGS 84 / UTM zone 18N

 

Hi,

I have the listed the gdalinfo listing of an erdas imagine file below and
notice that it does not have a EPSG code within it.  I need this EPSG code
if I want to reproject within gdalwarp or for on the fly projection within
mapserver.  Based the gdalinfo listing I searched within the epsg file and
found the following code and definition: 

# WGS 84 / UTM zone 18N
<32618> +proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>

Does the above EPSG code of 32618 make sense for the below gdalinfo listing?

Thanks,

John J . Mitchell

----------------------------------------------------------------------------
-------------------------------------------------------------------
Driver: HFA/Erdas Imagine Images (.img)
Size is 13940, 33191
Coordinate System is: 
PROJCS["UTM Zone 18, Northern Hemisphere",
    GEOGCS["WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016],
            TOWGS84[0,0,0,0,0,0,0]], 
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75], 
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (638992.500000000000000 ,221212.500000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Corner Coordinates:
Upper Left  (  638992.500,  221212.500) ( 73d45'0.91"W,  2d 0'3.21"N)
Lower Left  (  638992.500 ,   55257.500) ( 73d45'3.46"W,  0d29'59.32"N)
Upper Right (  708692.500,  221212.500) ( 73d 7'25.44"W,  2d 0'1.05"N)
Lower Right (  708692.500,   55257.500) ( 73d 7'29.28"W,  0d29' 58.78"N)
Center      (  673842.500,  138235.000) ( 73d26'15.17"W,  1d15'0.67"N)

----------------------------------------------------------------------------
------------------------------------------------------------------- 




-- 
John J. Mitchell 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070425/ac1551c8/attachment.html
From richard.greenwood at gmail.com  Wed Apr 25 17:41:43 2007
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] gdaladdo errors on Linux
Message-ID: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>

I've got an odd situation. I have a set of TIFFs that I can add
overlays to under Windows and Mac OS X, but not Linux.

The gdaladdo error under Linux is:

ERROR 1: IReadBlock failed at X offset 2, Y offset 4
ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 4
ERROR 1: F43110A1.TIF:DumpModeDecode: Not enough data for scanline 256
ERROR 1: TIFFReadEncodedTile() failed.

(These 4 error repeat "forever")

The images are 8 bit TIFFs with a 13 color table. The Linux and OS X
versions of gdaladdo are identical (1.3.2.0) the Windows version is
1.4.0.0. I have run gdaladdo on the Linux box successfully in the
past.

It seems like it's unable to read the files. The permissions look okay
(-rw-rw-r--) and I'm the owner.

I feel like I'm missing something obvious. Any suggestions?

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From woklist at kyngchaos.com  Wed Apr 25 18:13:32 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] gdaladdo errors on Linux
In-Reply-To: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>
References: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>
Message-ID: <CF709913-4A25-4C0A-BAD0-CB9DED96FF8C@kyngchaos.com>

I've had similar problems before and it's a problem with the libtiff  
version.  Fixes for part of the problem are in libtiff CVS (and are  
included in my OSX frameworks).  It also was less of a problem in  
earlier libtiff versions (3.6, 3.7), but there may still be issues.

This looks slightly different than what I've seen before so it might  
not help, but it's worth a try.

On Apr 25, 2007, at 4:41 PM, Richard Greenwood wrote:

> I've got an odd situation. I have a set of TIFFs that I can add
> overlays to under Windows and Mac OS X, but not Linux.
>
> The gdaladdo error under Linux is:
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 4
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 4
> ERROR 1: F43110A1.TIF:DumpModeDecode: Not enough data for scanline 256
> ERROR 1: TIFFReadEncodedTile() failed.
>
> (These 4 error repeat "forever")
>
> The images are 8 bit TIFFs with a 13 color table. The Linux and OS X
> versions of gdaladdo are identical (1.3.2.0) the Windows version is
> 1.4.0.0. I have run gdaladdo on the Linux box successfully in the
> past.
>
> It seems like it's unable to read the files. The permissions look okay
> (-rw-rw-r--) and I'm the owner.
>
> I feel like I'm missing something obvious. Any suggestions?
>
> Thanks,
> Rich
>
> -- 
> Richard Greenwood
> richard.greenwood@gmail.com
> www.greenwoodmap.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From jdjohnso at google.com  Thu Apr 26 08:32:48 2007
From: jdjohnso at google.com (John Johnson)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Feedback on JP2KAK RasterIO implementation?
Message-ID: <d0b0f8b0704260532o50f7ee42mb8de6b20bb44c292@mail.gmail.com>

Frank,

Have you gotten much feedback on your new RasterIO implementation for JP2KAK
that you announced back in Feb?

We're about to rev one of our products use of GDAL from 1.3.2 and are trying
to decide on 1.4.1 or TOT. The stability of 1.4.1 is very appealing, but
many of our customers use JP2KAK for very large images and could really
benefit from the new RasterIO implementation.

-- 
John Johnson <jdjohnso@google.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070426/c9cf60c0/attachment.html
From warmerdam at pobox.com  Thu Apr 26 09:22:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Feedback on JP2KAK RasterIO implementation?
In-Reply-To: <d0b0f8b0704260532o50f7ee42mb8de6b20bb44c292@mail.gmail.com>
References: <d0b0f8b0704260532o50f7ee42mb8de6b20bb44c292@mail.gmail.com>
Message-ID: <4630A79A.30805@pobox.com>

John Johnson wrote:
> Frank,
> 
> Have you gotten much feedback on your new RasterIO implementation for 
> JP2KAK that you announced back in Feb?
> 
> We're about to rev one of our products use of GDAL from 1.3.2 and are 
> trying to decide on 1.4.1 or TOT. The stability of 1.4.1 is very 
> appealing, but many of our customers use JP2KAK for very large images 
> and could really benefit from the new RasterIO implementation.

John,

The feedback on the JP2KAK optimizations has been positive, but I wouldn't
say it has been all that extensively tested.

I do believe you can just drop the gdal/frmts/jp2kak/jp2kakdataset.cpp
(and associated makefiles) from trunk back into 1.4 branch without any
problem.  So 1.4.1 + a retrofit jp2kak driver should be an option.

I do believe you need Kakadu 5.0 or newer with the trunk version of the
JP2KAK driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dpinte at itae.be  Thu Apr 26 09:23:50 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] w32 ng-python bindings problem
Message-ID: <1177593830.1531.1186699805@webmail.messagingengine.com>

Hi,

I'm trying to compile the new generation bindings with the latest
official 1.4.1 version.

Here is the error I get :

        "C:\Python24"/python.exe setup.py build
numpy include C:\Python24\lib\site-packages\numpy\core\include
running build
running build_py
copying gdal.py -> build\lib.win32-2.4
copying ogr.py -> build\lib.win32-2.4
copying osr.py -> build\lib.win32-2.4
copying gdalconst.py -> build\lib.win32-2.4
running build_ext
building '_gdal' extension
C:\Program Files\Microsoft Visual C++ Toolkit 2003\bin\cl.exe /c /nologo
/Ox /MD
 /W3 /GX /DNDEBUG -I../../port -I../../gcore -I../../alg -I../../ogr
 -IC:\Python
24\lib\site-packages\numpy\core\include -IC:\Python24\include
-IC:\Python24\PC /
Tpgdal_wrap.cpp /Fobuild\temp.win32-2.4\Release\gdal_wrap.obj
gdal_wrap.cpp
c:\build\thuban\gdal-1.4.1\port\cpl_config.h(8) : warning C4005:
'HAVE_SNPRINTF'
 : macro redefinition
        c:\Python24\include\pyerrors.h(220) : see previous definition of
        'HAVE_S
NPRINTF'
C:\Program Files\Microsoft Visual C++ Toolkit 2003\bin\link.exe /DLL
/nologo /IN
CREMENTAL:NO /LIBPATH:"C:\build\thuban\gdal-1.4.1\build\"
/LIBPATH:C:\Python24\l
ibs /LIBPATH:C:\Python24\PCBuild gdal_i.lib /EXPORT:init_gdal
build\temp.win32-2
.4\Release\gdal_wrap.obj /OUT:build\lib.win32-2.4\_gdal.pyd
/IMPLIB:build\temp.w
in32-2.4\Release\_gdal.lib
LINK : warning LNK4001: no object files specified; libraries used
LINK : warning LNK4068: /MACHINE not specified; defaulting to X86
LINK : fatal error LNK1159: no output file specified
error: command '"C:\Program Files\Microsoft Visual C++ Toolkit
2003\bin\link.exe
"' failed with exit status 1159
NMAKE : fatal error U1077: '"C:\Python24"/python.exe'?: code retour
'0x1'
Stop.

My environment is MSVC Toolkit 2003 (VC 7.1) with Python 2.4 and numpy
1.0.2. 

The message is not really clear for me. Any help would be greatly
appreciated ;-)

Thanks

Didrik


From Bradley.David at jhuapl.edu  Thu Apr 26 09:42:03 2007
From: Bradley.David at jhuapl.edu (David, Bradley J.)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ERROR 6: SetColorInterpretation() not supported for
	this dataset.
In-Reply-To: <1177593830.1531.1186699805@webmail.messagingengine.com>
References: <1177593830.1531.1186699805@webmail.messagingengine.com>
Message-ID: <7B95239DDD54E54B9BFA23847142B1EE01136756@aplesnation.dom1.jhuapl.edu>

Developers,

Anyone else getting this error:

	ERROR 6: SetColorInterpretation() not supported for this
dataset.


I get this error when I attempt to convert, either in my own code or
using gdal_translate, a JPEG/GTIFF to a NITF w/ C8 (JPEG 2000
compression) image.

I've already tried this:

	gdal_translate -of NITF -co IC=C8 -co IREP=RGB in.jpg out.ntf
(courtesy of FW)
	

...on several different images and all the outputs looks like something
Andy Warhol created.

For more on this, see a similar error:

	http://trac.osgeo.org/gdal/ticket/1309

Any takers?

Bradley David
JHU/APL


From richard.matsunaga at waypointinfo.com  Thu Apr 26 10:04:29 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Recommendation: use Trac post-commit hooks
Message-ID: <000a01c7880b$cee265f0$c6012b0a@Richard>

It would be very useful if GDAL/OGR were to enable post-commit hooks.
 
http://trac.edgewall.org/wiki/TracFaq#can-trac-automatically-update-a-ticket
-when-i-commit-a-changeset
 
Cheers,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070426/ca6466e0/attachment.html
From Christian.Martel at drdc-rddc.gc.ca  Thu Apr 26 10:05:16 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi List,

How can I merge hundreds of shapefiles with wildcard in input name (eg.
fileABC*.shp) ? Does ogr2ogr allow this ?
Is it better to write a python script (opening each file, reading
geometries, write them to output file, etc.) ?

Thanks,
Christian


From hobu.inc at gmail.com  Thu Apr 26 10:26:20 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <E2F09C1D-CE07-4CFF-B3BC-7632E32BEA83@gmail.com>

Here's a bash script that I use to bulk load a directory of  
shapefiles that have the same schema to postgis.  It could obviously  
be made smarter, but it seems to do the trick.

#!/bin/bash

# let OGR create a table from one of the files
ogr2ogr -f Postgresql PG:"host=smoke.hobu.net" -a_srs "EPSG:26915" - 
nln outputlayer first_input_shape.shp -overwrite -nlt POLYGON

# delete all the data in the table we just created (but don't delete  
the table)
ogrinfo PG:"host=smoke.hobu.net" -sql "delete  from outputlayer"

# loop through all of the shapefiles in the directory and load them
for i in $(ls *.shp); do
   ogr2ogr -f Postgresql PG:"host=smoke.hobu.net" -a_srs " EPSG: 
26915" -nln outputlayer $i -update -append -skipfailures
done



On Apr 26, 2007, at 9:05 AM, Martel, Christian wrote:

> Hi List,
>
> How can I merge hundreds of shapefiles with wildcard in input name  
> (eg.
> fileABC*.shp) ? Does ogr2ogr allow this ?
> Is it better to write a python script (opening each file, reading
> geometries, write them to output file, etc.) ?
>
> Thanks,
> Christian
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Thu Apr 26 12:05:06 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <4630CDB2.3030909@gov.yk.ca>

Martel, Christian wrote:
> Hi List,
> 
> How can I merge hundreds of shapefiles with wildcard in input name (eg.
> fileABC*.shp) ? Does ogr2ogr allow this ?
> Is it better to write a python script (opening each file, reading
> geometries, write them to output file, etc.) ?

To complement Howard's script, here is what will work in a Windows cmd 
shell (double % to put in a script, %f --> %%f):

  mkdir merged
  for %f in (*wetland*.shp) do (
    (if not exist merged\wetlands.shp ogr2ogr -f "esri shapefile" 
merged\wetlands.shp %f) else (
    ogr2ogr -f "esri shapefile" -update -append merged\wetlands.shp %f
    )
  )

The trick is to use the first input to create a new shapefile, and 
thereafter only update and append. See the end of 
http://www.gdal.org/ogr/drv_shapefile.html

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From szekerest at gmail.com  Thu Apr 26 12:15:33 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Recommendation: use Trac post-commit hooks
In-Reply-To: <000a01c7880b$cee265f0$c6012b0a@Richard>
References: <000a01c7880b$cee265f0$c6012b0a@Richard>
Message-ID: <f3b73b7d0704260915m598d4398pd6382e14ae83ddaa@mail.gmail.com>

Richard,

I feel you are referring to my recent change:
http://trac.osgeo.org/gdal/ticket/1584

In fact I've delayed the update on this ticket with the announcement
of the changes until making some quick tests so you might have been
notified later as expected, apologies.

Best regards,

Tamas



2007/4/26, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> It would be very useful if GDAL/OGR were to enable post-commit hooks.
>
> http://trac.edgewall.org/wiki/TracFaq#can-trac-automatically-update-a-ticket-when-i-commit-a-changeset
>
> Cheers,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From matt.wilkie at gov.yk.ca  Thu Apr 26 12:17:48 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
In-Reply-To: <4630CDB2.3030909@gov.yk.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<4630CDB2.3030909@gov.yk.ca>
Message-ID: <4630D0AC.8030503@gov.yk.ca>

 >> Martel, Christian wrote:
>> Hi List,
>>
>> How can I merge hundreds of shapefiles with wildcard in input name (eg.
>> fileABC*.shp) ? Does ogr2ogr allow this ?

http://trac.osgeo.org/gdal/wiki/FAQVector

:)

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Christian.Martel at drdc-rddc.gc.ca  Thu Apr 26 14:09:36 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
In-Reply-To: <4630CDB2.3030909@gov.yk.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<4630CDB2.3030909@gov.yk.ca>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D1038C2@valcartierex01.valcartier.drdc-rddc.gc.ca>

Matt,

Thanks. It is what I was looking for (a windows script).
However, "(" and ")" were not correct in the if clause and it lacks the
-nln parameter in else clause.

Here is the correct script :

mkdir merged
for %%f in (ABC*.shp) do (
  if not exist merged\all.shp (
    ogr2ogr -f "esri shapefile" merged\all.shp  %%f) else (
      ogr2ogr -f "esri shapefile" -update -append merged\all.shp %%f
-nln all)
)

Christian

> -----Original Message-----
> From: Matt Wilkie [mailto:matt.wilkie@gov.yk.ca] 
> Sent: 26 avril 2007 12:05
> To: Martel, Christian
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] ogr2ogr hundreds of shapefiles
> 
> Martel, Christian wrote:
> > Hi List,
> > 
> > How can I merge hundreds of shapefiles with wildcard in 
> input name (eg.
> > fileABC*.shp) ? Does ogr2ogr allow this ?
> > Is it better to write a python script (opening each file, reading 
> > geometries, write them to output file, etc.) ?
> 
> To complement Howard's script, here is what will work in a 
> Windows cmd shell (double % to put in a script, %f --> %%f):
> 
>   mkdir merged
>   for %f in (*wetland*.shp) do (
>     (if not exist merged\wetlands.shp ogr2ogr -f "esri shapefile" 
> merged\wetlands.shp %f) else (
>     ogr2ogr -f "esri shapefile" -update -append merged\wetlands.shp %f
>     )
>   )
> 
> The trick is to use the first input to create a new 
> shapefile, and thereafter only update and append. See the end 
> of http://www.gdal.org/ogr/drv_shapefile.html
> 
> cheers,
> 
> --
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
> 
> 


From sjwague1 at uno.edu  Thu Apr 26 14:10:42 2007
From: sjwague1 at uno.edu (Scott J Waguespack)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] CPLRemoveXMLChild doesn't work (And I can't figure out
	how it's supposed to)
Message-ID: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070426/68036962/attachment.html
From sjwague1 at uno.edu  Thu Apr 26 14:15:36 2007
From: sjwague1 at uno.edu (Scott J Waguespack)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] FW: CPLRemoveXMLChild doesn't work (And I can't figure
	out how it's supposed to)
References: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>
Message-ID: <053B3DFC11806D4FAB4EF8CC5062577BC567B3@mail5.uno.edu>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070426/fe490afa/attachment.html
From sjwague1 at uno.edu  Thu Apr 26 14:17:30 2007
From: sjwague1 at uno.edu (Scott J Waguespack)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] CPLRemoveXMLChild doesn't work (And I can't figure out
	how it's supposed to)
References: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>
	<053B3DFC11806D4FAB4EF8CC5062577BC567B3@mail5.uno.edu>
Message-ID: <053B3DFC11806D4FAB4EF8CC5062577BC567B4@mail5.uno.edu>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070426/c8c01365/attachment.html
From richard.matsunaga at waypointinfo.com  Thu Apr 26 14:18:47 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Recommendation: use Trac post-commit hooks
In-Reply-To: <f3b73b7d0704260915m598d4398pd6382e14ae83ddaa@mail.gmail.com>
References: <000a01c7880b$cee265f0$c6012b0a@Richard>
	<f3b73b7d0704260915m598d4398pd6382e14ae83ddaa@mail.gmail.com>
Message-ID: <002b01c7882f$552a6270$c6012b0a@Richard>


Well, not exactly. We use Trac/SVN here and having the post-commit hooks are
and extremely valuable resource for the developers. Since all commit
comments are also copied to the ticket, there is no need to duplicate
documentation.

We also require a ticket # for all commits, but that may be too rigid for
GDAL :)

Richard

> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com] 
> 
> Richard,
> 
> I feel you are referring to my recent change:
> http://trac.osgeo.org/gdal/ticket/1584
> 
> In fact I've delayed the update on this ticket with the 
> announcement of the changes until making some quick tests so 
> you might have been notified later as expected, apologies.
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 2007/4/26, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
> >
> >
> > It would be very useful if GDAL/OGR were to enable 
> post-commit hooks.
> >
> > 
> http://trac.edgewall.org/wiki/TracFaq#can-trac-automatically-update-a-
> > ticket-when-i-commit-a-changeset
> >
> > Cheers,
> > Richard
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >


From John.C.Cartwright at noaa.gov  Thu Apr 26 14:41:10 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] remove background from a geotiff
Message-ID: <4630F246.1000507@noaa.gov>

Hello All,

I have a geotiff that has a black (0,0,0) background that I would like 
to remove as part of a conversion to png or gif.
Is there an easy way to do this with one of the existing utilities or 
will I need to create my own?

Thanks!

-- john


From warmerdam at pobox.com  Thu Apr 26 14:51:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] CPLRemoveXMLChild doesn't work (And I can't figure
	out how it's supposed to)
In-Reply-To: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>
References: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>
Message-ID: <4630F4B5.40306@pobox.com>

Scott J Waguespack wrote:
> I had a bug in my program that I had to go
> through the trouble of building GDAL and Xerces
> to track down, and here's what I've come to:
> 
> CPLRemoveXMLChild
> 
> It's supposed to cleanly remove a child from
> the parent's list of children. Instead, it
> seems to simply set the parent's psChild to
> NULL. Naturally, I decided to step through the
> function to see what was happening.

Scott,

This is clearly a bug, and I'll work on it this afternoon.  I've turned
this into a bug report at:

   http://trac.osgeo.org/gdal/ticket/1598

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Apr 26 14:58:52 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D1038C2@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<4630CDB2.3030909@gov.yk.ca>
	<D8AD814B3EB3A945B7F149E41240DB6D1038C2@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <4630F66C.5010600@gov.yk.ca>

> Here is the correct script :

ahhh, thanks for catching that.

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Thu Apr 26 15:26:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] CPLRemoveXMLChild doesn't work (And I can't figure
	out how it's supposed to)
In-Reply-To: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>
References: <053B3DFC11806D4FAB4EF8CC5062577BC567B2@mail5.uno.edu>
Message-ID: <4630FCCB.4020401@pobox.com>

Scott J Waguespack wrote:
> I had a bug in my program that I had to go
> through the trouble of building GDAL and Xerces
> to track down, and here's what I've come to:
> 
> CPLRemoveXMLChild
> 
> It's supposed to cleanly remove a child from
> the parent's list of children. Instead, it
> seems to simply set the parent's psChild to
> NULL. Naturally, I decided to step through the
> function to see what was happening.

Scott,

This is fixed now - http://trac.osgeo.org/gdal/ticket/1598

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From John.C.Cartwright at noaa.gov  Thu Apr 26 15:45:23 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] remove background from a geotiff
In-Reply-To: <4630F246.1000507@noaa.gov>
References: <4630F246.1000507@noaa.gov>
Message-ID: <46310153.2010104@noaa.gov>

Hello again,

I've been able to achieve what I was looking for via Image Magick's 
convert command, e.g.

convert crm_east.tif -transparent "rgb(0,0,0)" crm_east.png

Should teach me to look at at all the tools in the toolbox instead of 
focusing on a single one!

-- john



John Cartwright wrote:
> Hello All,
>
> I have a geotiff that has a black (0,0,0) background that I would like 
> to remove as part of a conversion to png or gif.
> Is there an easy way to do this with one of the existing utilities or 
> will I need to create my own?
>
> Thanks!
>
> -- john
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mjtrent at wisc.edu  Thu Apr 26 16:13:05 2007
From: mjtrent at wisc.edu (MIKAH JAMES TRENT)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GdalCreate
Message-ID: <e9d3aa8ca6cc.4630c181@wiscmail.wisc.edu>

Hi,
I am using the 'swigged' version of Gdal in C-Sharp.  I am struggling with the GdalCreate command.

Here is a summary of my code:

           Driver dv;
           Dataset ds;
//this command gets the driver
            dv = gdal.GetDriverByName(format_dictionary[ext]);
//this command does what????
            ds = dv.Create(path, x_size, y_size, 1, 1, null);


My 'format_dictionary[ext]' in this case returns 'HFA' which is the format for .img files.  However, when I call dv.Create, it immediately creates a file with the correct EHFA_HEADER_TAG header followed by a few null characters, and then there's a bunch of junk data following it, like:

HeaderLength,1:LdictionaryPtr,}Ehfa_File,{1:Lnext,1:Lprev,1:Lparent,1:Lchild,1:Ldata,1:ldataSize,64:cname,32:ctype,1:tmodTime,}Ehfa_Entry,{16:clabel,1:LheaderPtr,}Ehfa_HeaderTag,{1:LfreeList,1:lfreeSize,}Ehfa_FreeListNode,{1:lsize,1:Lptr,}Ehfa_Data,{1:lwidth,1:lheight,1:e3:thematic,athematic,fft of real-valued...

which makes it an invalid file.  Where does this data come from, and how do I get just a normal valid file of type img??

Thank you for any help!!
-Mikah



Mikah J. Trent
(414) 238 3573
mjtrent@wisc.edu

From matt.wilkie at gov.yk.ca  Thu Apr 26 18:22:33 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] remove background from a geotiff
In-Reply-To: <46310258.10107@noaa.gov>
References: <4630F246.1000507@noaa.gov> <4630FF06.8040706@gov.yk.ca>
	<46310258.10107@noaa.gov>
Message-ID: <46312629.5070308@gov.yk.ca>

John Cartwright wrote:
> Thanks for your reply Matt.  I did take a look at nearblack, but in my 
> case I already have a consistent color in the background and was looking 
> to make that color transparent.  It didn't look to me as if nearblack 
> would help me in this situation.  However, I realized that I could use 
> imagemagick to handle the conversion.

It's nice to have more than one path to get to one's goal. You take the 
one you can see from where you are!

For future reference, there is a wholly gdal solution albeit multi-step 
First use nearblack to get consistent colour (which you already had), 
then use gdalwarp to choose which values to make nodata (transparent), 
then gdal_translate to desired out format (warp doesn't support the same 
number of write formats):

  gdalwarp -srcnodata 0,0,0 -dstalpha crm_east.tif crm_east_alpha.tif
  gdal_translate -of png crm_east_alpha.tif crm_east.png


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From szekerest at gmail.com  Fri Apr 27 12:39:28 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GdalCreate
In-Reply-To: <e9d3aa8ca6cc.4630c181@wiscmail.wisc.edu>
References: <e9d3aa8ca6cc.4630c181@wiscmail.wisc.edu>
Message-ID: <f3b73b7d0704270939i4f4b1c8cj3a66471a20bc9685@mail.gmail.com>

Mikah,

I would suggest to make a test with the current SVN-trunk or the FWTools 1.3.0
http://test.gdal.org/fwtools/FWTools130.exe

If the problem still persists please submit a ticket:
http://trac.osgeo.org/gdal/newticket

by describing the problem and adding the sample data.

Best regards,

Tamas


2007/4/26, MIKAH JAMES TRENT <mjtrent@wisc.edu>:
> Hi,
> I am using the 'swigged' version of Gdal in C-Sharp.  I am struggling with the GdalCreate command.
>
> Here is a summary of my code:
>
>            Driver dv;
>            Dataset ds;
> //this command gets the driver
>             dv = gdal.GetDriverByName(format_dictionary[ext]);
> //this command does what????
>             ds = dv.Create(path, x_size, y_size, 1, 1, null);
>
>
> My 'format_dictionary[ext]' in this case returns 'HFA' which is the format for .img files.  However, when I call dv.Create, it immediately creates a file with the correct EHFA_HEADER_TAG header followed by a few null characters, and then there's a bunch of junk data following it, like:
>
> HeaderLength,1:LdictionaryPtr,}Ehfa_File,{1:Lnext,1:Lprev,1:Lparent,1:Lchild,1:Ldata,1:ldataSize,64:cname,32:ctype,1:tmodTime,}Ehfa_Entry,{16:clabel,1:LheaderPtr,}Ehfa_HeaderTag,{1:LfreeList,1:lfreeSize,}Ehfa_FreeListNode,{1:lsize,1:Lptr,}Ehfa_Data,{1:lwidth,1:lheight,1:e3:thematic,athematic,fft of real-valued...
>
> which makes it an invalid file.  Where does this data come from, and how do I get just a normal valid file of type img??
>
> Thank you for any help!!
> -Mikah
>
>
>
> Mikah J. Trent
> (414) 238 3573
> mjtrent@wisc.edu
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From dmorissette at mapgears.com  Fri Apr 27 14:46:12 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Re: GDAL SOC
In-Reply-To: <46323A42.4010000@xpam.de>
References: <46323A42.4010000@xpam.de>
Message-ID: <463244F4.3070006@mapgears.com>

Adam Nowacki wrote:
> Hi, just checking if you're alive.

Hi Adam,

Yes, I'm alive and well. BTW, congrats for getting your project 
approved, the WMS driver should be a nice addition to GDAL.

I guess I'm still a bit unclear on the process for the SoC work, that's 
why I have been quiet so far. I was checking the schedule the other day 
and saw that SoC work starts officially on May 28th and in the meantime 
you should start to familiarize with the GDAL project and its community.

I believe you're already familiar with the GDAL project, so I don't need 
to introduce you to the mailing list and IRC channel (I think you are on 
#gdal more than I am) and other project resources.

FYI I implemented WMS (client and server) support in MapServer and have 
been maintaining/upgrading that component for the last 5-6 years. In the 
next 1-2 months I am also planning to upgrade MapServer to WMS 1.3.0 (it 
currently supports 1.1.1 and older), so I am quite familiar with the WMS 
spec and its issues, hopefully that will help.

However, I am less familiar with the way similar drivers (WCS, etc.) 
have been implemented in GDAL, but I think you have already looked at 
that, and I'm sure others on the gdal-dev list will be able to provide 
advice and feedback on that front.

BTW, talking of the gdal-dev list, and in the spirit of open source 
development, I took the liberty of CC'ing the gdal-dev list on this 
email to give everyone a heads up on what's coming. I think most of our 
technical discussions during your project should happen in the open on 
this list.

While we're here, a question for the GDAL PSC members: is a RFC required 
for a new driver? I believe the answer is yes, and if that's the case 
then the first task of your project will be to prepare the RFC and get 
it reviewed/approved before the fun part (i.e. coding) can start.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Fri Apr 27 15:49:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Re: GDAL SOC
In-Reply-To: <463244F4.3070006@mapgears.com>
References: <46323A42.4010000@xpam.de> <463244F4.3070006@mapgears.com>
Message-ID: <463253AC.5060004@pobox.com>

Daniel Morissette wrote:
> While we're here, a question for the GDAL PSC members: is a RFC required 
> for a new driver? I believe the answer is yes, and if that's the case 
> then the first task of your project will be to prepare the RFC and get 
> it reviewed/approved before the fun part (i.e. coding) can start.

Daniel,

We haven't generally required RFCs for new drivers, though I have sometimes
at least sought feedback before incorporating new drivers (such as WCS as I
recall).

I'd be happy enough with the students working on new or substantially updated
drivers preparing detailed designs on their Trac wiki pages, circulating those
for feedback, and then we could raise a motion in support of the design when it
is ready.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Apr 27 15:59:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GdalCreate
In-Reply-To: <e9d3aa8ca6cc.4630c181@wiscmail.wisc.edu>
References: <e9d3aa8ca6cc.4630c181@wiscmail.wisc.edu>
Message-ID: <4632562E.8050105@pobox.com>

MIKAH JAMES TRENT wrote:
> Hi, I am using the 'swigged' version of Gdal in C-Sharp.  I am struggling
> with the GdalCreate command.
> 
> Here is a summary of my code:
> 
> Driver dv; Dataset ds; //this command gets the driver dv =
> gdal.GetDriverByName(format_dictionary[ext]); //this command does what???? 
> ds = dv.Create(path, x_size, y_size, 1, 1, null);
> 
> 
> My 'format_dictionary[ext]' in this case returns 'HFA' which is the format
> for .img files.  However, when I call dv.Create, it immediately creates a
> file with the correct EHFA_HEADER_TAG header followed by a few null
> characters, and then there's a bunch of junk data following it, like:
> 
> HeaderLength,1:LdictionaryPtr,}Ehfa_File,{1:Lnext,1:Lprev,1:Lparent,1:Lchild,1:Ldata,1:ldataSize,64:cname,32:ctype,1:tmodTime,}Ehfa_Entry,{16:clabel,1:LheaderPtr,}Ehfa_HeaderTag,{1:LfreeList,1:lfreeSize,}Ehfa_FreeListNode,{1:lsize,1:Lptr,}Ehfa_Data,{1:lwidth,1:lheight,1:e3:thematic,athematic,fft
> of real-valued...
> 
> which makes it an invalid file.  Where does this data come from, and how do
> I get just a normal valid file of type img??
> 
> Thank you for any help!!

Mikah,

Erdas Imagine files include an internal dictionary defining all the objects
in the file.  That's what all the "Ehfa_File..." stuff is about.  Why do you
think this is an invalid file?

Note that the file will likely not be flushed out and completely valid till
after you close the dataset handle you get back from Create().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Fri Apr 27 16:39:32 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Changes to libtool (or something) break MinGW build
In-Reply-To: <462F9358.8040400@tkk.fi>
References: <462B1C3A.7030302@openplans.org> <462B3746.1040905@tkk.fi>
	<462F6D85.3020308@openplans.org> <462F9358.8040400@tkk.fi>
Message-ID: <46325F84.9050501@tkk.fi>

Ari Jolma kirjoitti:
> Andrea Aime kirjoitti:
>
>>
>> c:\MinGW\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: 
>> cannot find /c/progetti/gdal/gdalMing/frmts/o/.libs/EnvisatFile.o
>

this can also be fixed (assuming mingw is on C: drive) in libtool by:

$ECHO "$obj" | sed -e "s/\/c\//c:\//" >> $output

the | sed -e "s/\/c\//c:\//" has to be added by hand

that's line 6114 at least in my libtool, just after "for obj in 
$save_libobjs"

But the basic problem is probably a recent change somewhere which causes 
libtool to use full paths for _some_ of the object files that it writes 
into .libs/libgdal.la.lnkscript.

Mateusz? Frank?

Ari



From warmerdam at pobox.com  Sat Apr 28 00:16:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32 Binaries
Message-ID: <4632CA81.80104@pobox.com>

Folks,

I've taken my first crack at producing Win32 binaries for GDAL 1.4.1.

   http://download.osgeo.org/gdal/win32/gdalwin32exe141.zip
   http://download.osgeo.org/gdal/win32/gdalwin32dev141.zip

This is built using VC7.1 (Visual Studio .NET 2003).  I have confirmed
that C applications (like gdalinfo.c) can be built against these libraries
using other compilers - I tested with VC6.

The executables and corresponding gdal14.dll are fairly minimimal.  I
used the default set of built-in drivers.  No external libraries were
used.

I'd appreciate folks trying these out a bit and let me know of problems
encountered.

I've also updated the following wiki topics to mention the new binaries.

   http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
   http://trac.osgeo.org/gdal/wiki/BuildingOnWindows

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Sat Apr 28 06:35:50 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] what is "band configurations"?
Message-ID: <46332386.7060402@o2.pl>

Hi

Regarding GDAL's JPEG documenation [1] - what is the "band
configurations" mentioned there?

Maciek

From ivan.lucena at pmldnet.com  Sat Apr 28 09:59:30 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4632CA81.80104@pobox.com>
References: <4632CA81.80104@pobox.com>
Message-ID: <000401c7899d$750856a0$0a0a0a0a@idrisi.clarku.edu>

Frank

I download it and I checked the version:

C:\Program Files\gdalwin32-1.4.1\bin>gdalinfo --version
GDAL 1.4.1.0, released 2007/04/09

> The executables and corresponding gdal14.dll are fairly minimimal.  I
> used the default set of built-in drivers.  No external libraries were
> used.

I understand that in this build you are not adding any external library but
I think that it would be nice to add Python support as a minimal requirement
too. What do you think?

Best regards,

Ivan


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Saturday, April 28, 2007 12:16 AM
To: gdal-dev
Subject: [Gdal-dev] Win32 Binaries

Folks,

I've taken my first crack at producing Win32 binaries for GDAL 1.4.1.

   http://download.osgeo.org/gdal/win32/gdalwin32exe141.zip
   http://download.osgeo.org/gdal/win32/gdalwin32dev141.zip

This is built using VC7.1 (Visual Studio .NET 2003).  I have confirmed
that C applications (like gdalinfo.c) can be built against these libraries
using other compilers - I tested with VC6.

The executables and corresponding gdal14.dll are fairly minimimal.  I
used the default set of built-in drivers.  No external libraries were
used.

I'd appreciate folks trying these out a bit and let me know of problems
encountered.

I've also updated the following wiki topics to mention the new binaries.

   http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
   http://trac.osgeo.org/gdal/wiki/BuildingOnWindows

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Sat Apr 28 10:40:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Changes to libtool (or something) break MinGW build
In-Reply-To: <46325F84.9050501@tkk.fi>
References: <462B1C3A.7030302@openplans.org>
	<462B3746.1040905@tkk.fi>	<462F6D85.3020308@openplans.org>
	<462F9358.8040400@tkk.fi> <46325F84.9050501@tkk.fi>
Message-ID: <46335CD2.8020102@loskot.net>

Ari Jolma wrote:
> Ari Jolma kirjoitti:
>> Andrea Aime kirjoitti:
>> 
>>> 
>>> c:\MinGW\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe:
>>>  cannot find
>>> /c/progetti/gdal/gdalMing/frmts/o/.libs/EnvisatFile.o
>> 
> 
> this can also be fixed (assuming mingw is on C: drive) in libtool by:
> 
> 
> $ECHO "$obj" | sed -e "s/\/c\//c:\//" >> $output
> 
> the | sed -e "s/\/c\//c:\//" has to be added by hand
> 
> that's line 6114 at least in my libtool, just after "for obj in 
> $save_libobjs"
> 
> But the basic problem is probably a recent change somewhere which
> causes libtool to use full paths for _some_ of the object files that
> it writes into .libs/libgdal.la.lnkscript.

Ari,

I suppose this may be caused by ltmain.sh update a week ago:

http://trac.osgeo.org/gdal/changeset/11290

It's a big update to the libtool script.

Sorry, I feel a bit lost reading the magic of libtool script,
not sure if this is the problem.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sat Apr 28 10:41:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] what is "band configurations"?
In-Reply-To: <46332386.7060402@o2.pl>
References: <46332386.7060402@o2.pl>
Message-ID: <46335D15.1060104@pobox.com>

Maciej Sieczka wrote:
> Hi
> 
> Regarding GDAL's JPEG documenation [1] - what is the "band
> configurations" mentioned there?

Maciek,

I assume you are referring to this?

   file:///home/warmerda/gdal/html/frmt_jpeg.html

It states "Only Byte band types are supported, and only 1 and 3 band
configurations." in the Creation Options discussion.  This means you can
only create files with one band (treated as greyscale) and three bands
(treated as RGB).  Does that answer your question?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Apr 28 10:45:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <000401c7899d$750856a0$0a0a0a0a@idrisi.clarku.edu>
References: <4632CA81.80104@pobox.com>
	<000401c7899d$750856a0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <46335E24.30303@pobox.com>

Ivan Lucena wrote:
> I understand that in this build you are not adding any external library but
> I think that it would be nice to add Python support as a minimal requirement
> too. What do you think?

Ivan,

I believe that Howard was hoping to produce Python installable
packages built on this distribution - possibly even for more than
one version of python.  But it is not my intention that python be
part of the core install.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sat Apr 28 11:10:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ogr2ogr hundreds of shapefiles
In-Reply-To: <4630D0AC.8030503@gov.yk.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1038C1@valcartierex01.valcartier.drdc-rddc.gc.ca>	<4630CDB2.3030909@gov.yk.ca>
	<4630D0AC.8030503@gov.yk.ca>
Message-ID: <463363D9.4040209@loskot.net>

Matt Wilkie wrote:
>>> Martel, Christian wrote:
>>> Hi List,
>>>
>>> How can I merge hundreds of shapefiles with wildcard in input name (eg.
>>> fileABC*.shp) ? Does ogr2ogr allow this ?
> 
> http://trac.osgeo.org/gdal/wiki/FAQVector

Matt,

Great, thank you!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sat Apr 28 11:40:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] VERSION file
Message-ID: <46336AD0.1010201@pobox.com>

Folks,

Does anyone know what the VERSION file is for in the GDAL distribution?
I'm thinking of getting rid of it, with the contents of gcore/gdal_version.h
being the one live definition of the current version.

I think I long ago introduced this file as a sort of documentation for
the version, but it has been superceeded by gdal_version.h, and the
reporting from gdal-config.

Howard has indicated that the python setup.py script uses the file, but
could be fairly easily altered to use gdal_version.h.

I'm asking because it is getting confusing to keep everything in sync.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sat Apr 28 11:49:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] ERROR 6: SetColorInterpretation() not supported for
	this dataset.
In-Reply-To: <7B95239DDD54E54B9BFA23847142B1EE01136756@aplesnation.dom1.jhuapl.edu>
References: <1177593830.1531.1186699805@webmail.messagingengine.com>
	<7B95239DDD54E54B9BFA23847142B1EE01136756@aplesnation.dom1.jhuapl.edu>
Message-ID: <46336D11.20005@loskot.net>

David, Bradley J. wrote:
> Developers,
> 
> Anyone else getting this error:
> 
> 	ERROR 6: SetColorInterpretation() not supported for this
> dataset.
> 
> 
> I get this error when I attempt to convert, either in my own code or
> using gdal_translate, a JPEG/GTIFF to a NITF w/ C8 (JPEG 2000
> compression) image.
> 
> I've already tried this:
> 
> 	gdal_translate -of NITF -co IC=C8 -co IREP=RGB in.jpg out.ntf
> (courtesy of FW)
> 	
> ...on several different images and all the outputs looks like something
> Andy Warhol created.

David,

Would it be possible for you to give me your dataset?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Apr 28 11:59:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] gdaladdo errors on Linux
In-Reply-To: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>
References: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>
Message-ID: <46336F5B.2090200@loskot.net>

Richard Greenwood wrote:
> I've got an odd situation. I have a set of TIFFs that I can add
> overlays to under Windows and Mac OS X, but not Linux.
> 
> The gdaladdo error under Linux is:
> 
> ERROR 1: IReadBlock failed at X offset 2, Y offset 4
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 4
> ERROR 1: F43110A1.TIF:DumpModeDecode: Not enough data for scanline 256
> ERROR 1: TIFFReadEncodedTile() failed.
> 
> (These 4 error repeat "forever")
> 
> The images are 8 bit TIFFs with a 13 color table. The Linux and OS X
> versions of gdaladdo are identical (1.3.2.0) the Windows version is
> 1.4.0.0. I have run gdaladdo on the Linux box successfully in the
> past.

Richard,

Do you use internal or external libtiff ?

Could you give me your dataset, so I can test it myself too?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Sat Apr 28 13:55:14 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Changes to libtool (or something) break MinGW build
In-Reply-To: <46325F84.9050501@tkk.fi>
References: <462B1C3A.7030302@openplans.org> <462B3746.1040905@tkk.fi>
	<462F6D85.3020308@openplans.org> <462F9358.8040400@tkk.fi>
	<46325F84.9050501@tkk.fi>
Message-ID: <20070428175514.GA15745@ak4719.spb.edu>

On Fri, Apr 27, 2007 at 11:39:32PM +0300, Ari Jolma wrote:
> >>c:\MinGW\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: 
> >>cannot find /c/progetti/gdal/gdalMing/frmts/o/.libs/EnvisatFile.o
> 
> this can also be fixed (assuming mingw is on C: drive) in libtool by:
> 
> $ECHO "$obj" | sed -e "s/\/c\//c:\//" >> $output
> 
> the | sed -e "s/\/c\//c:\//" has to be added by hand
> 
> that's line 6114 at least in my libtool, just after "for obj in 
> $save_libobjs"
> 
> But the basic problem is probably a recent change somewhere which
> causes libtool to use full paths for _some_ of the object files that
> it writes into .libs/libgdal.la.lnkscript.

I have reproduced this problem and I think it is mingw issue. It can be
fixed with the following patch, but I don't want to check it in, I would
like to dig into this problem more.

--- GNUmakefile	(revision 11369)
+++ GNUmakefile	(working copy)
@@ -3,13 +3,13 @@
 
 include GDALmake.opt
 
-GDAL_OBJ	=	$(GDAL_ROOT)/frmts/o/*.o \
-			$(GDAL_ROOT)/gcore/*.o \
-			$(GDAL_ROOT)/port/*.o \
-			$(GDAL_ROOT)/alg/*.o
+GDAL_OBJ	=	./frmts/o/*.o \
+			./gcore/*.o \
+			./port/*.o \
+			./alg/*.o
 
 ifeq ($(OGR_ENABLED),yes)
-GDAL_OBJ += $(GDAL_ROOT)/ogr/ogrsf_frmts/o/*.o
+GDAL_OBJ += ./ogr/ogrsf_frmts/o/*.o
 endif
 
 include ./ogr/file.lst


Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Sat Apr 28 16:00:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Outstanding RFCs
Message-ID: <4633A7E5.1060005@pobox.com>

Folks,

I've migrated the governance docs and RFCs all to the wiki (tedious work!).

I'm hoping for a mid-summer release of GDAL/OGR 1.5.0 and so I'm keen to
firm up major changes that will be going into it.  Looking at the existing
posted RFCs I see:


RFC 4: Geolocation arrays (FrankW)

This one is stalled on me working out how to use geolocation arrays with
gdalwarp, and I'm happy to put it off till after the 1.5 release.


RFC 5: Unicode support in GDAL (AndreyK)

I'd love to see this one revised and into GDAL for 1.5 release.  How close
to the top of your stack is this issue Andrey?


RFC 7: Use VSILFILE for VSI*L Functions (EricD)

I think there are a few complexities not recognised in this one, but the
idea has certainly grown on me, and I'd like to see it proceed.  Eric, are
you still interested in pursuing this?


RFC 10: OGR Open Parameters (AndreyK)

If this is going to go in for 1.5 I'd like to see it incorporated
fairly soon.  I'd be willing to do work on support for a standard
way that open arguments can be wrapped in the datasource name, and
updating a few drivers to use it.  Ideally, I'd like to see this
mechanism also applied in GDAL as well as OGR.  Is this still of
interest to your Andrey, or has it been superceeded by other
developments?

I will also be preparing a couple development RFCs myself - the thing
that originally got me digging into this.

One will be for "fast image identification" - essentially a way of
checking what format files are without the expense of fully opening
them.

Also one about drivers keeping explicit track of all the files in a
dataset, so that datasets can be renamed, deleted and so forth in a
more organized fashion.

I'll get these written up over the next week or so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Sat Apr 28 16:04:53 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Changes to libtool (or something) break MinGW build
In-Reply-To: <20070428175514.GA15745@ak4719.spb.edu>
References: <462B1C3A.7030302@openplans.org> <462B3746.1040905@tkk.fi>
	<462F6D85.3020308@openplans.org> <462F9358.8040400@tkk.fi>
	<46325F84.9050501@tkk.fi> <20070428175514.GA15745@ak4719.spb.edu>
Message-ID: <4633A8E5.2060105@tkk.fi>

Andrey Kiselev kirjoitti:
> On Fri, Apr 27, 2007 at 11:39:32PM +0300, Ari Jolma wrote:
>   
>>>> c:\MinGW\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\mingw32\bin\ld.exe: 
>>>> cannot find /c/progetti/gdal/gdalMing/frmts/o/.libs/EnvisatFile.o
>>>>         
> I have reproduced this problem and I think it is mingw issue. It can be
> fixed with the following patch, but I don't want to check it in, I would
> like to dig into this problem more.
>
> --- GNUmakefile	(revision 11369)
> +++ GNUmakefile	(working copy)
> @@ -3,13 +3,13 @@
>  
>  include GDALmake.opt
>  
> -GDAL_OBJ	=	$(GDAL_ROOT)/frmts/o/*.o \
> -			$(GDAL_ROOT)/gcore/*.o \
> -			$(GDAL_ROOT)/port/*.o \
> -			$(GDAL_ROOT)/alg/*.o
> +GDAL_OBJ	=	./frmts/o/*.o \
> +			./gcore/*.o \
> +			./port/*.o \
> +			./alg/*.o
>  
>  ifeq ($(OGR_ENABLED),yes)
> -GDAL_OBJ += $(GDAL_ROOT)/ogr/ogrsf_frmts/o/*.o
> +GDAL_OBJ += ./ogr/ogrsf_frmts/o/*.o
>  endif
>  
>  include ./ogr/file.lst
>   

This works, thanks. The problem is that GDAL_ROOT is (in my case) 
/c/dev/gdal and ld.exe would like to have it c:/dev/gdal. After a quick 
test it looks like just changing GDAL_ROOT in GDALmake.opt to 
c:/dev/gdal fixes the problem too.

Ari



From mateusz at loskot.net  Sat Apr 28 17:43:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <4628D058.4040008@loskot.net>
References: <4628D058.4040008@loskot.net>
Message-ID: <4633C00E.8000900@loskot.net>

Folks,

I updated the supported compilers Wiki page and now it lists compilers
categorized as officially supported and unsupported:

http://trac.osgeo.org/gdal/wiki/SupportedCompilers

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From richard.greenwood at gmail.com  Sat Apr 28 18:51:18 2007
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] gdaladdo errors on Linux
In-Reply-To: <46336F5B.2090200@loskot.net>
References: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>
	<46336F5B.2090200@loskot.net>
Message-ID: <ae9185aa0704281551u3b2f879fqe3d5273d192d9580@mail.gmail.com>

On 4/28/07, Mateusz Loskot <mateusz@loskot.net> wrote:
> Richard Greenwood wrote:
> > I've got an odd situation. I have a set of TIFFs that I can add
> > overlays to under Windows and Mac OS X, but not Linux.
> >
> > The gdaladdo error under Linux is:
> >
> > ERROR 1: IReadBlock failed at X offset 2, Y offset 4
> > ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 4
> > ERROR 1: F43110A1.TIF:DumpModeDecode: Not enough data for scanline 256
> > ERROR 1: TIFFReadEncodedTile() failed.
> >
> > (These 4 error repeat "forever")
> >
> > The images are 8 bit TIFFs with a 13 color table. The Linux and OS X
> > versions of gdaladdo are identical (1.3.2.0) the Windows version is
> > 1.4.0.0. I have run gdaladdo on the Linux box successfully in the
> > past.
>
> Richard,
>
> Do you use internal or external libtiff ?

I honestly do not know. The Linux server is a remote server that I
know very little about It is running Linux 2.4.33.3 stable Slackware
11.0. I did a minimal ./configure, make install of gdal. If you can
give me any pointers as to how to determine more about my libtiff I
can of course research it more.

> Could you give me your dataset, so I can test it myself too?

I put a ~4MB samle at:
    http://www.sublettewyo.com/250k.zip

I appreciate your interest in this problem, but please do not put
undue effort into solving as I can easily work around the problem.

Thanks very much!
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From mateusz at loskot.net  Sat Apr 28 18:58:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <4633CA2F.2020509@ualg.pt>
References: <4628D058.4040008@loskot.net> <4633C00E.8000900@loskot.net>
	<4633CA2F.2020509@ualg.pt>
Message-ID: <4633D1AE.4050609@loskot.net>

Joaquim Luis wrote:
> Mateusz Loskot wrote:
>> Folks,
>>
>> I updated the supported compilers Wiki page and now it lists compilers
>> categorized as officially supported and unsupported:
>>
>> http://trac.osgeo.org/gdal/wiki/SupportedCompilers
>>   
> 
> Mateusz,
> I see in the above list that you report compiling with Intel 9.1 under
> Linux but not under Windows.
> I gave it a try using the nmake.opt for VC (with minimalist changes) but
> the error list was too long.
> Did you try a windows build as well?
> 
> I don't know much about the makefiles art.

Joaquim,

No, I've not tested Intel compiler yet.
We've planned this task with Frank so I'm going to try it soon,
may be this week.

p.s. I added gdal-dev to CC as others may be interested too.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Sun Apr 29 04:36:22 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Methods in the bindings that can easily create a segfault
Message-ID: <46345906.2090103@tkk.fi>

Bindings developers,

I created a small test, which I'd eventually like to include in the Perl 
test code, which tests for the strength of the bindings. The test code 
calls all known class and object methods with undefined arguments. 
Undefined arguments map to NULLs in the Perl bindings. I don't know 
about other bindings, but it must be the same at least in some. Below is 
a list of the methods that create a segfault (in Windows a dialog box 
that says: "Please tell Microsoft about this problem"!!) when called in 
this way. Some (two or three) methods in the list don't create a segfaul 
but otherwise behave badly, for example ComputeBandStats, when called 
with undef (samplestep 0) seems to go into indefinite loop. For some 
reason I could not create a valid CoordinateTransformation object. 
Dataset.SetDescription fails saying strangely: "This application has 
requested the Runtime to terminate it in an unusual way. Please contact 
the application's support team for more information."

I've previously added a bunch of tests into the bindings. I wonder if I 
should do the same with these, or should I try to create typemaps that 
catch NULL parameters.

I consider these serious problems since I believe Perl code should never 
cause a segfault. I have an graphical application, where any user can 
type in any Perl code. It is just not acceptable that such application 
segfaults.

Regards,

Ari

class Geo::GDAL
#    GetDataTypeByName (scalar name)
#     DecToDMS (scalar double, scalar string, scalar int)
#     GetDriverByName (scalar ShortName)
#     Open (scalar name, scalar Access=$Geo::GDAL::Const::GA_ReadOnly)
#     OpenShared (scalar name, scalar Access=$Geo::GDAL::Const::GA_ReadOnly)
#     AutoCreateWarpedVRT (scalar src_ds, scalar src_wkt=undef, scalar 
dst_wkt=undef, scalar 
ResampleAlg=$Geo::GDAL::Const::GRA_NearestNeighbour, scalar maxerror=0.0)
class Geo::GDAL::Driver
#     Delete (scalar name)
class Geo::GDAL::Dataset
class Geo::GDAL::MajorObject
#     SetDescription (scalar NewDesc)
class Geo::GDAL::Band
#    ComputeBandStats (scalar samplestep=1)
class Geo::OGR
#     GetDriverByName (scalar name)
#     Open (scalar filename, scalar update=0)
#     OpenShared (scalar filename, scalar update=0)
class Geo::OGR::Driver
#     TestCapability (scalar cap)
class Geo::OGR::Datasource
#     GetDriver ()
#    TestCapability (scalar cap)
#    ExecuteSQL (scalar statement, scalar geom=undef, scalar dialect="")
class Geo::OGR::Layer
#     CreateFeature (scalar feature)
#     TestCapability (scalar cap)
#     CreateField (scalar field_def, scalar approx_ok=1)
class Geo::OGR::Feature
#     Equal (scalar feature)
#    SetFrom (scalar other, scalar forgiving=1)
class Geo::OGR::FeatureDefn
#     AddFieldDefn (scalar defn)
class Geo::OGR::FieldDefn
class Geo::OGR::Geometry
#     Intersection (scalar other)
#     Union (scalar other)
#     Difference (scalar other)
#     SymmetricDifference (scalar other)
#     Equal (scalar other)
#     Disjoint (scalar other)
#     Touches (scalar other)
#     Crosses (scalar other)
#     Within (scalar other)
#     Contains (scalar other)
#     Overlaps (scalar other)
#     Transform (scalar trans)
class Geo::OSR
#         GetWellKnownGeogCSAsWKT (scalar name)
#     GetUserInputAsWKT (scalar name)
#     GetProjectionMethodParameterList (scalar method)
#     GetProjectionMethodParamInfo (scalar method, scalar parameter)
class Geo::OSR::SpatialReference
#     IsSame (scalar rhs)
#     IsSameGeogCS (scalar rhs)
#     GetAttrValue (scalar name, scalar child=0)
#     SetAttrValue (scalar name, scalar value)
#     GetProjParm (scalar name, scalar default_val=0.0)
#     SetNormProjParm (scalar name, scalar val)
#     GetNormProjParm (scalar name, scalar default_val=0.0)
#     SetWellKnownGeogCS (scalar name)
#     SetFromUserInput (scalar name)
#     CopyGeogCSFrom (scalar rhs)
#     ExportToProj4 ()
#     ExportToUSGS ()
class Geo::OSR::CoordinateTransformation
#     TransformPoint (scalar x, scalar y, scalar z=0.0)



From mattia.parigiani at gmail.com  Sun Apr 29 05:51:42 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Geotiff format interpretation
Message-ID: <6b6f1c810704290251v64ed38e1h8bc5fb2b478a7ec6@mail.gmail.com>

Hey all, with some external tool using GDAL I managed to convert an HDF file
into a Geotiff.

If I now gdalinfo the file, I get the following output:

rasdaman@mattia-desktop:/opt/rasdaman/local$ gdalinfo -nomd Area1.tif
Driver: GTiff/GeoTIFF
Size is 7103, 3947
Coordinate System is:
PROJCS["HDFLook: LINEAR",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6370997,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Equirectangular"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (8912408.472916,7090227.412053)
Pixel Size = (694.49452741,-1000.15538912)
Corner Coordinates:
Upper Left  ( 8912408.473, 7090227.412) ( 80d 9'4.51"E, 63d45'50.32"N)
Lower Left  ( 8912408.473, 3142614.091) ( 80d 9'4.51"E, 28d15'43.99"N)
Upper Right (13845403.101, 7090227.412) (124d30'53.14"E, 63d45'50.32"N)
Lower Right (13845403.101, 3142614.091) (124d30'53.14"E, 28d15'43.99"N)
Center      (11378905.787, 5116420.752) (102d19'58.82"E, 46d 0'47.16"N)
Band 1 Block=7103x20 Type=Byte, ColorInterp=Red
Band 2 Block=7103x20 Type=Byte, ColorInterp=Green
Band 3 Block=7103x20 Type=Byte, ColorInterp=Blue


Now, I dont know what the EPSG 9001 system is and I cannot manage to google
it successfully..

I need to convert the given corner coordinates into WGS-84 easting northin
decimals..

I mainly need to define a bounding box using the lower left and upper right
corners..

Can anyone point me out on how I can do this?? Or what is the EPSG 9001
code?? Are those decimal values the ones in EPSG 9001??
What about the other notation (80d 9'4.51"E, 63d45'50.32" N)? What is it
indicating? is it still the EPSG 9001 representation? Or is it already the
WGS84 one?

Thanks in advance

Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070429/bde29c7c/attachment.html
From dron at ak4719.spb.edu  Sun Apr 29 09:12:43 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Changes to libtool (or something) break MinGW build
In-Reply-To: <4633A8E5.2060105@tkk.fi>
References: <462B1C3A.7030302@openplans.org> <462B3746.1040905@tkk.fi>
	<462F6D85.3020308@openplans.org> <462F9358.8040400@tkk.fi>
	<46325F84.9050501@tkk.fi> <20070428175514.GA15745@ak4719.spb.edu>
	<4633A8E5.2060105@tkk.fi>
Message-ID: <20070429131243.GA23646@ak4719.spb.edu>

On Sat, Apr 28, 2007 at 11:04:53PM +0300, Ari Jolma wrote:
> This works, thanks. The problem is that GDAL_ROOT is (in my case) 
> /c/dev/gdal and ld.exe would like to have it c:/dev/gdal.

Yes, but I believe it must work with /c/dev/gdal too, that is why I
think it is a mingw problem. Perhaps it should be reported as bug to
mingw developers, but I need to isolate this problem first.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From tutey at o2.pl  Sun Apr 29 09:47:34 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] what is "band configurations"?
In-Reply-To: <46335D15.1060104@pobox.com>
References: <46332386.7060402@o2.pl> <46335D15.1060104@pobox.com>
Message-ID: <4634A1F6.7030801@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:
>> Hi
>>
>> Regarding GDAL's JPEG documenation [1] - what is the "band
>> configurations" mentioned there?
> 
> Maciek,
> 
> I assume you are referring to this?
> 
>   file:///home/warmerda/gdal/html/frmt_jpeg.html

Yes. I failed to paste that link.

> It states "Only Byte band types are supported, and only 1 and 3 band
> configurations." in the Creation Options discussion.  This means you can
> only create files with one band (treated as greyscale) and three bands
> (treated as RGB).  Does that answer your question?

Yes. Thanks. Could this extended info be added to JPEG spec as well as
to JPEG section in GeoTIFF spec?

Maciek

From szekerest at gmail.com  Sun Apr 29 12:33:02 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <4633C00E.8000900@loskot.net>
References: <4628D058.4040008@loskot.net> <4633C00E.8000900@loskot.net>
Message-ID: <f3b73b7d0704290933l7a027589ta4558a0a117ae134@mail.gmail.com>

Mateusz,

I'm a bit uncertain what do we mean by declaring the various compilers
and platforms 'supported' or 'not supported'.

#1
In my opinion if we declare a compiler as 'supported' we should at
least make regular tests  with it. It's not enough that someone has
managed to compile the code on that compiler/platform at a given time.
What happens if a subsequent change works pretty well on some platform
but breaks the compilation on another (we can find some examples for
this kind of issue in the recent days). It's fairly unconvenient to
wait for a bug report from someone who uses that compiler/platform and
trying to find which changes caused the problem. I can eventually say
that the supported compilers should be part of the gdal buildbot
configuration.

#2
We should also have a detailed documentation for the supported
compilers, how to make the compilation and the tests (for making sure
that the compilation was successful). Though someone can declare that
the code compiles successfully on a particular platform/compiler but 2
months later he won't even know which options were enabled, which
softwares were installed or what other hacks had to be made for the
successful compilation. Therefore the compilation should be
reproduceable on a 'supported' compiler/platform.

#3
We should make further declarations about which components are
supported on which compilers/platforms because some components might
not compile on the same environment where the core gdal builds. For
example, apparently, not all of the SWIG bindings maintainers might be
aware of all of the compilers/platforms declared as supported now, he
might not have the proper environment to test them all.

#4
We should also identify the substantial compiler configurations that
will require significantly different approach when making the
builds/tests. In my opinion the difference between the Win32/Win64
builds are a good candidate to make this separation. The document
describing the Win64 with VC8 would be somewhat different as the
description of the Win32 with VC8.

So after all I can say that at first we should try to tuck the
supported component/compiler/platform combination into the buildbot
configuration and after the successful assimilation we can surely make
the declaration that this configuration is supported or not.


Best regards,

Tamas



2007/4/28, Mateusz Loskot <mateusz@loskot.net>:
> Folks,
>
> I updated the supported compilers Wiki page and now it lists compilers
> categorized as officially supported and unsupported:
>
> http://trac.osgeo.org/gdal/wiki/SupportedCompilers
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Sun Apr 29 12:43:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] what is "band configurations"?
In-Reply-To: <4634A1F6.7030801@o2.pl>
References: <46332386.7060402@o2.pl> <46335D15.1060104@pobox.com>
	<4634A1F6.7030801@o2.pl>
Message-ID: <4634CB24.8030005@pobox.com>

Maciej Sieczka wrote:
>> It states "Only Byte band types are supported, and only 1 and 3 band
>> configurations." in the Creation Options discussion.  This means you can
>> only create files with one band (treated as greyscale) and three bands
>> (treated as RGB).  Does that answer your question?
> 
> Yes. Thanks. Could this extended info be added to JPEG spec as well as
> to JPEG section in GeoTIFF spec?

Maciek,

As long as you use PLANARCONFIG_SEPERATE (ie. INTERLEAVE=BAND) with the
GeoTIFF driver you can actually use jpeg compression with multi-spectral
data.  So I don't think this limitation applies to the geotiff driver.

I feel that the "and only 1 and 3 band configurations" is fairly clear
in the frmt_jpeg.html document especially in combination with the earlier
mention of only supporting greyscale and rgb.  Writing decent documentation
is a balance between adding enough detail, and avoiding obscuring things
with too much detail.  It is always hard to know where the right balance
is.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Apr 29 12:52:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Geotiff format interpretation
In-Reply-To: <6b6f1c810704290251v64ed38e1h8bc5fb2b478a7ec6@mail.gmail.com>
References: <6b6f1c810704290251v64ed38e1h8bc5fb2b478a7ec6@mail.gmail.com>
Message-ID: <4634CD41.9030404@pobox.com>

mattia wrote:
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Origin = (8912408.472916,7090227.412053)
> Pixel Size = (694.49452741,-1000.15538912)
> Corner Coordinates:
> Upper Left  ( 8912408.473, 7090227.412) ( 80d 9'4.51"E, 63d45'50.32"N)
> Lower Left  ( 8912408.473, 3142614.091) ( 80d 9'4.51"E, 28d15'43.99"N)
> Upper Right (13845403.101, 7090227.412) (124d30'53.14"E, 63d45'50.32"N)
> Lower Right (13845403.101, 3142614.091) (124d30' 53.14"E, 28d15'43.99"N)
> Center      (11378905.787, 5116420.752) (102d19'58.82"E, 46d 0'47.16"N)
> Band 1 Block=7103x20 Type=Byte, ColorInterp=Red
> Band 2 Block=7103x20 Type=Byte, ColorInterp=Green
> Band 3 Block=7103x20 Type=Byte, ColorInterp=Blue
> 
> 
> Now, I dont know what the EPSG 9001 system is and I cannot manage to 
> google it successfully..

Mattia,

EPSG:9001 is the EPSG code for the linear unit "Meter".

> I need to convert the given corner coordinates into WGS-84 easting 
> northin decimals..

You can convert the WGS84 values into decimal form yourself if you want.

eg.

the north edge would be:

   63d45'50.32"N
= 63 + 45/60.0 + 50.32/3600.0
= 63.7639777777N

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Apr 29 13:01:13 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Methods in the bindings that can easily create a
	segfault
In-Reply-To: <46345906.2090103@tkk.fi>
References: <46345906.2090103@tkk.fi>
Message-ID: <4634CF59.9070400@pobox.com>

Ari Jolma wrote:
> I've previously added a bunch of tests into the bindings. I wonder if I 
> should do the same with these, or should I try to create typemaps that 
> catch NULL parameters.
> 
> I consider these serious problems since I believe Perl code should never 
> cause a segfault. I have an graphical application, where any user can 
> type in any Perl code. It is just not acceptable that such application 
> segfaults.

Ari,

I'd be happy to have NULL checking, but I think the swig bindings is the
wrong place for it. I believe it should be done in the C API functions
instead.  My preference would be for you to backout any changes you have
made like:

   http://trac.osgeo.org/gdal/changeset/11367

And we instead do this comprehensively in the C API.  I'd be willing to
queue this up as a job for Matuesz in trunk (not 1.4 branch).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Apr 29 13:09:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <f3b73b7d0704290933l7a027589ta4558a0a117ae134@mail.gmail.com>
References: <4628D058.4040008@loskot.net> <4633C00E.8000900@loskot.net>
	<f3b73b7d0704290933l7a027589ta4558a0a117ae134@mail.gmail.com>
Message-ID: <4634D151.1070301@pobox.com>

Tamas Szekeres wrote:
> #1
> In my opinion if we declare a compiler as 'supported' we should at
> least make regular tests  with it. It's not enough that someone has
> managed to compile the code on that compiler/platform at a given time.
> What happens if a subsequent change works pretty well on some platform
> but breaks the compilation on another (we can find some examples for
> this kind of issue in the recent days). It's fairly unconvenient to
> wait for a bug report from someone who uses that compiler/platform and
> trying to find which changes caused the problem. I can eventually say
> that the supported compilers should be part of the gdal buildbot
> configuration.

Tamas,

I agree that if declare something supported we need to at least be
testing it before releases, and including any details in the wiki
needed to work with it. I don't feel we need to include buildbot
configurations for them all.

> #3
> We should make further declarations about which components are
> supported on which compilers/platforms because some components might
> not compile on the same environment where the core gdal builds. For
> example, apparently, not all of the SWIG bindings maintainers might be
> aware of all of the compilers/platforms declared as supported now, he
> might not have the proper environment to test them all.

Good point.  I agree we should be specific about what components
are supported with what compilers as best as we are able.

> #4
> We should also identify the substantial compiler configurations that
> will require significantly different approach when making the
> builds/tests. In my opinion the difference between the Win32/Win64
> builds are a good candidate to make this separation. The document
> describing the Win64 with VC8 would be somewhat different as the
> description of the Win32 with VC8.

Yes, Win32/Win64 are meaningfully distinct configurations, and worth
documenting seperately.  In fact, I don't consider Win64 builds
"supported" yet by GDAL though I don't imagine it will take too much
work to make it so once there is sufficient interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Sun Apr 29 13:24:26 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Methods in the bindings that can easily create a
	segfault
In-Reply-To: <4634CF59.9070400@pobox.com>
References: <46345906.2090103@tkk.fi> <4634CF59.9070400@pobox.com>
Message-ID: <4634D4CA.3090901@tkk.fi>

Frank Warmerdam kirjoitti:
>
> I'd be happy to have NULL checking, but I think the swig bindings is the
> wrong place for it. I believe it should be done in the C API functions
> instead.  My preference would be for you to backout any changes you have
> made like:
>
>   http://trac.osgeo.org/gdal/changeset/11367
>
> And we instead do this comprehensively in the C API.  I'd be willing to
> queue this up as a job for Matuesz in trunk (not 1.4 branch).

That would be good. I just didn't want to mess with the C API.

Cheers,

Ari



From szekerest at gmail.com  Sun Apr 29 13:47:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Methods in the bindings that can easily create a
	segfault
In-Reply-To: <4634CF59.9070400@pobox.com>
References: <46345906.2090103@tkk.fi> <4634CF59.9070400@pobox.com>
Message-ID: <f3b73b7d0704291047n14132d98h1b0206241b158018@mail.gmail.com>

I'm wondering why some of the functions of the C API have no proper
checks of the valid domains of the parameters. But, indeed the C API
is the right place to treat these problems at all.

Do we have a common policy how to make these checks or we should
consider the proper handling of the problematic functions one by one?

This issue is candidate to have a ticket so as to track the changes
that have been made and will be done in the future.

Best regards,

Tamas



2007/4/29, Frank Warmerdam <warmerdam@pobox.com>:
> Ari Jolma wrote:
> > I've previously added a bunch of tests into the bindings. I wonder if I
> > should do the same with these, or should I try to create typemaps that
> > catch NULL parameters.
> >
> > I consider these serious problems since I believe Perl code should never
> > cause a segfault. I have an graphical application, where any user can
> > type in any Perl code. It is just not acceptable that such application
> > segfaults.
>
> Ari,
>
> I'd be happy to have NULL checking, but I think the swig bindings is the
> wrong place for it. I believe it should be done in the C API functions
> instead.  My preference would be for you to backout any changes you have
> made like:
>
>    http://trac.osgeo.org/gdal/changeset/11367
>
> And we instead do this comprehensively in the C API.  I'd be willing to
> queue this up as a job for Matuesz in trunk (not 1.4 branch).
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mateusz at loskot.net  Sun Apr 29 15:48:40 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <f3b73b7d0704290933l7a027589ta4558a0a117ae134@mail.gmail.com>
References: <4628D058.4040008@loskot.net> <4633C00E.8000900@loskot.net>
	<f3b73b7d0704290933l7a027589ta4558a0a117ae134@mail.gmail.com>
Message-ID: <4634F698.2030800@loskot.net>

Tamas Szekeres wrote:
> Mateusz,
> 
> I'm a bit uncertain what do we mean by declaring the various 
> compilers and platforms 'supported' or 'not supported'.

Tamas,

According to my sense of taste, if we declare a compiler is supported,
then GDAL users can expect their requests for help with building GDAL
using that cmpiler will get higher priority.

Also, they can expect they won't get answer like

"sorry, but your compiler is not supported, so we're not going to take
an steps to fix this problem"

> #1 In my opinion if we declare a compiler as 'supported' we should at
>  least make regular tests  with it. It's not enough that someone has 
> managed to compile the code on that compiler/platform at a given 
> time.

I've assumed that SUNpro and MIPSpro compilers are listed as supported
because there are users who confirm it works. AFAIK, Frank is also
testing it from time to time.

> What happens if a subsequent change works pretty well on some 
> platform but breaks the compilation on another (we can find some 
> examples for this kind of issue in the recent days). It's fairly 
> unconvenient to wait for a bug report from someone who uses that 
> compiler/platform and trying to find which changes caused the 
> problem.

I agree.

> I can eventually say that the supported compilers should be part of
> the gdal buildbot configuration.

Personally, I'd really like to see all supported environments connected,
but it's not easy to find free access to sophisticated platforms.

> #2 We should also have a detailed documentation for the supported 
> compilers, how to make the compilation and the tests (for making sure
>  that the compilation was successful).

If I will get access to SUNpro and MIPSpro, I'm eager to write
this docs.

> [...] Therefore the compilation should be reproduceable on a
> 'supported' compiler/platform.

Agreed.

> #3 We should make further declarations about which components are 
> supported on which compilers/platforms because some components might 
> not compile on the same environment where the core gdal builds. For 
> example, apparently, not all of the SWIG bindings maintainers might 
> be aware of all of the compilers/platforms declared as supported now,
>  he might not have the proper environment to test them all.

I didn't do it intentionally.
Compilation support means "what C/C++ compilator can be used to build
GDAL binaries".

If we want to list all components, then we have to:
- list editions/versions of C# compilators
- --//-- for Java
- versions of Python and Perl interpreters

I believe we should focus on the core binaries.

> #4 We should also identify the substantial compiler configurations 
> that will require significantly different approach when making the 
> builds/tests. In my opinion the difference between the Win32/Win64 
> builds are a good candidate to make this separation. The document 
> describing the Win64 with VC8 would be somewhat different as the 
> description of the Win32 with VC8.

I agree.

> So after all I can say that at first we should try to tuck the 
> supported component/compiler/platform combination into the buildbot 
> configuration and after the successful assimilation we can surely 
> make the declaration that this configuration is supported or not.

Agreed but I have no idea who to ask for platforms
like SUN with SUNpro and SGI with MIPSpro.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Apr 29 15:50:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Supported Compiler
In-Reply-To: <4634D151.1070301@pobox.com>
References: <4628D058.4040008@loskot.net>
	<4633C00E.8000900@loskot.net>	<f3b73b7d0704290933l7a027589ta4558a0a117ae134@mail.gmail.com>
	<4634D151.1070301@pobox.com>
Message-ID: <4634F6F5.1070908@loskot.net>

Frank Warmerdam wrote:
> Tamas Szekeres wrote:
>> #1 In my opinion if we declare a compiler as 'supported' we should
>> at least make regular tests  with it. It's not enough that someone
>> has managed to compile the code on that compiler/platform at a
>> given time. What happens if a subsequent change works pretty well
>> on some platform but breaks the compilation on another (we can find
>> some examples for this kind of issue in the recent days). It's
>> fairly unconvenient to wait for a bug report from someone who uses
>> that compiler/platform and trying to find which changes caused the
>> problem. I can eventually say that the supported compilers should
>> be part of the gdal buildbot configuration.
> 
> Tamas,
> 
> I agree that if declare something supported we need to at least be 
> testing it before releases, and including any details in the wiki 
> needed to work with it. I don't feel we need to include buildbot 
> configurations for them all.

Frank, Tamas,

This Frank's opinion I had in mind when I said that I'm pretty sure
SUNpro and MIPSpro work and can be considered as supported,
because Frank keeps an eye on it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Mon Apr 30 00:51:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
Message-ID: <463575C9.9080007@pobox.com>

Folks,

I have a client wanting to be able to scan directories quickly, and identify
which files are supported raster files so they can be shown accordingly in
a file picker dialog.  In support of this use case, which I've seen in other
applications as well, I have prepared RFC 11: Fast Format Identification.

It is available at:

   http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify

This is a call for discussion on the matter.  Barring compelling reasons
why this is a terrible idea, I'll try and incorporate feedback and bring
this RFC to a vote later this week.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From battisti at actgate.com  Mon Apr 30 04:15:12 2007
From: battisti at actgate.com (Andrea Battisti)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GRIB Driver status
Message-ID: <4635A590.2000203@actgate.com>

All,

I'm interested in testing and track the progress of the GDAL GRIB driver.

The last message about it is:
http://lists.maptools.org/pipermail/gdal-dev/2007-February/011663.html
but the mentioned SVN repository no longer works:

$ svn checkout https://svn.osgeo.org/svn/gdal/trunk/spike/grib grib
svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
svn: '/svn/gdal/gdal/!svn/vcc/default' path not found

How can I download the latest code for the driver in order to compile
and test it?


Thanks for any help.
Kind regards,

-- 
Andrea Battisti, ACT Corp.



From eric.doenges at gmx.net  Mon Apr 30 13:52:38 2007
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Outstanding RFCs
In-Reply-To: <4633A7E5.1060005@pobox.com>
References: <4633A7E5.1060005@pobox.com>
Message-ID: <A80A2F61-4B56-46A1-8770-23125B2F8709@gmx.net>


Am 28.04.2007 um 22:00 schrieb Frank Warmerdam:

> Folks,
>
> I've migrated the governance docs and RFCs all to the wiki (tedious  
> work!).
>
> I'm hoping for a mid-summer release of GDAL/OGR 1.5.0 and so I'm  
> keen to
> firm up major changes that will be going into it.  Looking at the  
> existing
> posted RFCs I see:
>
>
> RFC 7: Use VSILFILE for VSI*L Functions (EricD)
>
> I think there are a few complexities not recognised in this one,  
> but the
> idea has certainly grown on me, and I'd like to see it proceed.   
> Eric, are
> you still interested in pursuing this?

Frank,

yes I am still interested. The quick and dirty solution (typedef  
VSILFILE to void *)
should be doable in a couple of hours; it's basically just search and  
replace. We would
probably break binary compatibility for any code using the C++  
interfaces directly due
to C++ name mangling, so that should be considered before going ahead.

Personally, I would prefer a typesafe solution by defining VSILFILE *  
as a new opaque
datatype as described in the RFC, but I don't see how we can do this  
without breaking
source compatibility as well, so that's probably out for now.

With kind regards,
Eric

From warmerdam at pobox.com  Mon Apr 30 14:03:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GRIB Driver status
In-Reply-To: <4635A590.2000203@actgate.com>
References: <4635A590.2000203@actgate.com>
Message-ID: <46362F58.5080106@pobox.com>

Andrea Battisti wrote:
> All,
> 
> I'm interested in testing and track the progress of the GDAL GRIB driver.
> 
> The last message about it is:
> http://lists.maptools.org/pipermail/gdal-dev/2007-February/011663.html
> but the mentioned SVN repository no longer works:
> 
> $ svn checkout https://svn.osgeo.org/svn/gdal/trunk/spike/grib grib
> svn: PROPFIND request failed on '/svn/gdal/gdal/!svn/vcc/default'
> svn: '/svn/gdal/gdal/!svn/vcc/default' path not found
> 
> How can I download the latest code for the driver in order to compile
> and test it?

Andrea,

Sorry, there was a slight reorganization of the subversion repository.

Now you would do:

   svn checkout https://svn.osgeo.org/gdal/spike/grib grib

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Mon Apr 30 16:11:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <463575C9.9080007@pobox.com>
References: <463575C9.9080007@pobox.com>
Message-ID: <f3b73b7d0704301311uf543a0y2335d1bd9ab0ee2a@mail.gmail.com>

Frank,

Generally I like the idea of providing a fast identification of the
files in the filesystem supported by gdal. I wish we had a similar
capability for the ogr supported formats. Are you planning to extend
this functionality to the ogr project as well?

The proposed implementation eliminates the need of rescanning the file
names within a directory by accepting the stringlist of the filenames
when calling the GDALOpenInfo constructor. However all of the files
will eventually be opened, fstat-ed and the header bytes will be read
by the constructor. Wouldn't it be reasonable to establish a primary
test based only on the exisistence of the filenames and the extensions
in the stringlist? I guess it would significantly increase the overall
performance of the scan.

Is it enough to cache only the filenames for the subsequent Identify
calls? For example if we open a "secondary file" of a driver first
would not we want to retain the header bytes to that time when the
primary file is identifyed by a driver?

Theoretically from the user's perspective I feel a bit hacky to pass
the siblings in a filesystem when identifying a particular file.
Wouldn't it be more convenient to follow the FindFirst... FindNext...
approach on the supported filenames and drivers. An internal
searchhandle could be passed between these functions holding the
internal state of the search and eliminating the need for the user of
dealing with the potentially unsupported items. Moreover, later on,
you could easily reorganize the internal structure holded by the
handle without affecting the interface itself if you find a more
performant approach of which information should be retained during the
search.

Exposing a stringlist in GDALIdentifyDriver to SWIG is less effective
as exposing an internal handle. Many of the languages would require to
reallocate the stringlist in the marshaling code every time when the
GDALIdentifyDriver is called.

CPLReadDir() should also be exposed to the SWIG interface to easily
construct the string list of the files in a directory. However I would
like more if this method was internally handled and only the root
directory had to be specified by the user (in the FindFirst... method
for example).

Are you planning to order the drivers when making the Identify calls?
For example the more effective drivers (the driver really supports the
Identify, by not calling the corresponding Open) should be called
first.

Best regards,

Tamas



2007/4/30, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> I have a client wanting to be able to scan directories quickly, and identify
> which files are supported raster files so they can be shown accordingly in
> a file picker dialog.  In support of this use case, which I've seen in other
> applications as well, I have prepared RFC 11: Fast Format Identification.
>
> It is available at:
>
>    http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify
>
> This is a call for discussion on the matter.  Barring compelling reasons
> why this is a terrible idea, I'll try and incorporate feedback and bring
> this RFC to a vote later this week.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Mon Apr 30 17:01:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <f3b73b7d0704301311uf543a0y2335d1bd9ab0ee2a@mail.gmail.com>
References: <463575C9.9080007@pobox.com>
	<f3b73b7d0704301311uf543a0y2335d1bd9ab0ee2a@mail.gmail.com>
Message-ID: <4636591C.3080908@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Generally I like the idea of providing a fast identification of the
> files in the filesystem supported by gdal. I wish we had a similar
> capability for the ogr supported formats. Are you planning to extend
> this functionality to the ogr project as well?

Tamas,

I have no current plans to extend this to OGR.  In fact, OGR doesn't
have an equivelent to the GDALOpenInfo, and so checking formats in many
driver Open methods in OGR can be fairly expensive since the header gets
re-read in each one.

At some point (GDAL/OGR 2.0?) it is my hope to re-unify GDAL and OGR
with them sharing a common driver manager, open function, metadata
model and so forth.  At that point OGR would presumably be upgraded to
use the GDAL identify and open mechanisms.  But it is unclear if or
when that will happen.

> The proposed implementation eliminates the need of rescanning the file
> names within a directory by accepting the stringlist of the filenames
> when calling the GDALOpenInfo constructor. However all of the files
> will eventually be opened, fstat-ed and the header bytes will be read
> by the constructor. Wouldn't it be reasonable to establish a primary
> test based only on the exisistence of the filenames and the extensions
> in the stringlist? I guess it would significantly increase the overall
> performance of the scan.

Many file formats cannot be accurately distinguished by filename, so
I don't see how we could do a good job with only the filenames, and not
having the header chunk.

> Is it enough to cache only the filenames for the subsequent Identify
> calls? For example if we open a "secondary file" of a driver first
> would not we want to retain the header bytes to that time when the
> primary file is identifyed by a driver?

This is possible, but I am doubtful that it would gain much for a
substantial increase in complexity.  I do plan to do some performance
testing, including strace's watching system calls, to see what extra
work is being done in directory scans after the new code is put in place.
This might point out that such header-caching would be of substantial
value, but I'm hesitant to take on that complexity yet.

> Theoretically from the user's perspective I feel a bit hacky to pass
> the siblings in a filesystem when identifying a particular file.
> Wouldn't it be more convenient to follow the FindFirst... FindNext...
> approach on the supported filenames and drivers. An internal
> searchhandle could be passed between these functions holding the
> internal state of the search and eliminating the need for the user of
> dealing with the potentially unsupported items. 

I'm afraid I don't see where the benefit in this approach would be.
How would it it be "elimiinating the need for the user of dealing
with the potentially unsupported items."?

 > Moreover, later on,
> you could easily reorganize the internal structure holded by the
> handle without affecting the interface itself if you find a more
> performant approach of which information should be retained during the
> search.

I had contemplated requiring that the filename list be lexically ordered
so that a binary search could be done for particular files instead of a
linear scan.  Beyond this I find it hard to imagine that performance of
the list of filenames is likely to be much of an issue.

> Exposing a stringlist in GDALIdentifyDriver to SWIG is less effective
> as exposing an internal handle. Many of the languages would require to
> reallocate the stringlist in the marshaling code every time when the
> GDALIdentifyDriver is called.

I have contemplated also offering a GDALIdentifyDriverForDirectory()
function that where you would provide a directory name, and it would
return a list of all apparently supported files, and the driver that
applies.  If this was done, it would be the most efficient entry point
for swig bindings that want to avoid reallocating the filename list
for each call.

However, I'm just not at all certain that this is a significant
performance issue, and certainly the convenience function can be added
later if it is found to be valuable, without any changes to the
underlying GDALIdentifyDriver() call.

> CPLReadDir() should also be exposed to the SWIG interface to easily
> construct the string list of the files in a directory. However I would
> like more if this method was internally handled and only the root
> directory had to be specified by the user (in the FindFirst... method
> for example).

In the past I've avoided exposing too many of the VSI and related functions
through SWIG under the assumptions that the languages have all their own
POSIX io and filesystem operations.  However, as we move to use VSI as an
abstraction layer for "in memory files" and such, it may be valuable to
expose the VSI*L API and a few helper functions expected to work properly
against any VSI type files.

> Are you planning to order the drivers when making the Identify calls?
> For example the more effective drivers (the driver really supports the
> Identify, by not calling the corresponding Open) should be called
> first.

pfnIdentify calls will be made in the same order as pfnOpen calls would
be made which is in the order that the drivers are registered with
the GDALDriverManager.  I already make some effort to register expensive
or risky drivers after fast/safe drivers though the application/user can
also influence ordering if they want to work at it.

I think it is important that identify be called in the same order as
open since we don't want identify to say one driver will get used, and
then have another driver kick in at open time because things were done
in a different order.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Mon Apr 30 17:49:21 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <4636591C.3080908@pobox.com>
References: <463575C9.9080007@pobox.com>
	<f3b73b7d0704301311uf543a0y2335d1bd9ab0ee2a@mail.gmail.com>
	<4636591C.3080908@pobox.com>
Message-ID: <f3b73b7d0704301449i149342b6ia3407d56e65a0c8c@mail.gmail.com>

2007/4/30, Frank Warmerdam <warmerdam@pobox.com>:
>
> > Is it enough to cache only the filenames for the subsequent Identify
> > calls? For example if we open a "secondary file" of a driver first
> > would not we want to retain the header bytes to that time when the
> > primary file is identifyed by a driver?
>
> This is possible, but I am doubtful that it would gain much for a
> substantial increase in complexity.  I do plan to do some performance
> testing, including strace's watching system calls, to see what extra
> work is being done in directory scans after the new code is put in place.
> This might point out that such header-caching would be of substantial
> value, but I'm hesitant to take on that complexity yet.
>

I think in that case the proposed interface should be reconstructed
substantially, since the current appoach does not provide the option
of retaining the internal state of the search among the subsequent
Identify invocations. Currently only the (readonly) stringlist is
retained.

> > Theoretically from the user's perspective I feel a bit hacky to pass
> > the siblings in a filesystem when identifying a particular file.
> > Wouldn't it be more convenient to follow the FindFirst... FindNext...
> > approach on the supported filenames and drivers. An internal
> > searchhandle could be passed between these functions holding the
> > internal state of the search and eliminating the need for the user of
> > dealing with the potentially unsupported items.
>
> I'm afraid I don't see where the benefit in this approach would be.
> How would it it be "elimiinating the need for the user of dealing
> with the potentially unsupported items."?
>

Only the successfully identified items would be retrieved by the
FindFirst... FindNext... methods. The user should not deal with the
files not relevant from the aspect of the gdal/ogr project. The
proposed implementation would require the user to call
GDALIdentifyDriver with every file have been found in the directory.

The other raising I've mentioned is mostly theoretical that is: Why
should we force the user  on retaining internal data for 'our' search?
Normally he would not want to deal with the list of the filenames in a
directory. Instead he would want to pick up the supported
files/formats one by one so as to populate a listview or a treeview on
the user interface.

>  > Moreover, later on,
> > you could easily reorganize the internal structure holded by the
> > handle without affecting the interface itself if you find a more
> > performant approach of which information should be retained during the
> > search.
>
> I had contemplated requiring that the filename list be lexically ordered
> so that a binary search could be done for particular files instead of a
> linear scan.  Beyond this I find it hard to imagine that performance of
> the list of filenames is likely to be much of an issue.
>

Hmmm... That would be another requirement the user would not want to
bother with. (Passing a lexically ordered list to GDALOpenInfo) The
ordering should take place internally when starting the search and the
ordered list should be retained during the search.

> > Exposing a stringlist in GDALIdentifyDriver to SWIG is less effective
> > as exposing an internal handle. Many of the languages would require to
> > reallocate the stringlist in the marshaling code every time when the
> > GDALIdentifyDriver is called.
>
> I have contemplated also offering a GDALIdentifyDriverForDirectory()
> function that where you would provide a directory name, and it would
> return a list of all apparently supported files, and the driver that
> applies.  If this was done, it would be the most efficient entry point
> for swig bindings that want to avoid reallocating the filename list
> for each call.
>

Well, it's worth considering to include this one in the current
proposal. I wonder if we could choose a sufficient type of the return
value that is easily SWIGgable for every languages. At this point I
would discourage to utilize the practice of using arrays of classes as
return value types.

> > CPLReadDir() should also be exposed to the SWIG interface to easily
> > construct the string list of the files in a directory. However I would
> > like more if this method was internally handled and only the root
> > directory had to be specified by the user (in the FindFirst... method
> > for example).
>
> In the past I've avoided exposing too many of the VSI and related functions
> through SWIG under the assumptions that the languages have all their own
> POSIX io and filesystem operations.  However, as we move to use VSI as an
> abstraction layer for "in memory files" and such, it may be valuable to
> expose the VSI*L API and a few helper functions expected to work properly
> against any VSI type files.
>

The various languages might not be completely equal in this regard.
However it might be possible to retrieve the list of the files in a
directory, it not as easy as calling a function have already been
prepared for this purpose. The more functionality we expose the less
extra code should be added to the target language to implement the
desired features.

Best regards,

Tamas

From ivan.lucena at pmldnet.com  Mon Apr 30 19:53:48 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <463575C9.9080007@pobox.com>
References: <463575C9.9080007@pobox.com>
Message-ID: <000001c78b82$cbde47a0$0a0a0a0a@idrisi.clarku.edu>

Frank,

I developed something a very similar tool (code name: WITWIMGD, Where in the
World is my Geospatial Data) where I basically developed everything around
GDAL without changing it. It browses the whole file system or just a single
folder tree while asking if GDAL and OGR can recognize each file.

My goal it to have something like:
http://www.bluemarblegeo.com/products/geoexplorer.php?associateid=39\%22%3EG
eographic%20Explorer, but better, since I am using GDAL :-)

Anyway,

A faster identifier would be nice but IMHO I think that you can accomplish
improvement is performance without the proposed change so that your
application will take responsibility for that. You can thread the
user-interface, record search-index like google desktop or/and treat
especial case in your own driver-manager loop in your app.

But like I said, it is just humble opinion.

Ivan



-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Monday, April 30, 2007 12:51 AM
To: gdal-dev
Subject: [Gdal-dev] RFC 11: Fast Format Identification

Folks,

I have a client wanting to be able to scan directories quickly, and identify
which files are supported raster files so they can be shown accordingly in
a file picker dialog.  In support of this use case, which I've seen in other
applications as well, I have prepared RFC 11: Fast Format Identification.

It is available at:

   http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify

This is a call for discussion on the matter.  Barring compelling reasons
why this is a terrible idea, I'll try and incorporate feedback and bring
this RFC to a vote later this week.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Apr 30 22:03:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <000001c78b82$cbde47a0$0a0a0a0a@idrisi.clarku.edu>
References: <463575C9.9080007@pobox.com>
	<000001c78b82$cbde47a0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <46369FFB.6080801@pobox.com>

Ivan Lucena wrote:
> A faster identifier would be nice but IMHO I think that you can accomplish
> improvement is performance without the proposed change so that your
> application will take responsibility for that. You can thread the
> user-interface, record search-index like google desktop or/and treat
> especial case in your own driver-manager loop in your app.

Ivan,

I don't see that multi-threading is a great solution to speeding up
identification, and if it is, it should provide even more benefit
once the identify operation is available.

Keeping some sort of search index might work in some contexts, but at
a great cost in complication and there would still be the brutal hit the
first time a big directory on a network drive is accessed.

I quite agree that the identify feature is not *critical* for folks to
build applications with GDAL.  But there is an important client who wants
it to improve their user experience, and I can see it being useful for other
applications, so I'm keen to provide a solution.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Apr 30 22:25:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <f3b73b7d0704301449i149342b6ia3407d56e65a0c8c@mail.gmail.com>
References: <463575C9.9080007@pobox.com>
	<f3b73b7d0704301311uf543a0y2335d1bd9ab0ee2a@mail.gmail.com>
	<4636591C.3080908@pobox.com>
	<f3b73b7d0704301449i149342b6ia3407d56e65a0c8c@mail.gmail.com>
Message-ID: <4636A534.3020306@pobox.com>

Tamas Szekeres wrote:
> 2007/4/30, Frank Warmerdam <warmerdam@pobox.com>:
>>
>> > Is it enough to cache only the filenames for the subsequent Identify
>> > calls? For example if we open a "secondary file" of a driver first
>> > would not we want to retain the header bytes to that time when the
>> > primary file is identifyed by a driver?
>>
>> This is possible, but I am doubtful that it would gain much for a
>> substantial increase in complexity.  I do plan to do some performance
>> testing, including strace's watching system calls, to see what extra
>> work is being done in directory scans after the new code is put in place.
>> This might point out that such header-caching would be of substantial
>> value, but I'm hesitant to take on that complexity yet.
>>
> 
> I think in that case the proposed interface should be reconstructed
> substantially, since the current appoach does not provide the option
> of retaining the internal state of the search among the subsequent
> Identify invocations. Currently only the (readonly) stringlist is
> retained.

Tamas,

I agree that the current interface does not give the option of
caching file headers (short of pushing responsibility for this
down into some VSI*L magic).  However, I don't agree that this
possible optimization is worth complicating the interface.

>> > Theoretically from the user's perspective I feel a bit hacky to pass
>> > the siblings in a filesystem when identifying a particular file.
>> > Wouldn't it be more convenient to follow the FindFirst... FindNext...
>> > approach on the supported filenames and drivers. An internal
>> > searchhandle could be passed between these functions holding the
>> > internal state of the search and eliminating the need for the user of
>> > dealing with the potentially unsupported items.
>>
>> I'm afraid I don't see where the benefit in this approach would be.
>> How would it it be "elimiinating the need for the user of dealing
>> with the potentially unsupported items."?
>>
> 
> Only the successfully identified items would be retrieved by the
> FindFirst... FindNext... methods. The user should not deal with the
> files not relevant from the aspect of the gdal/ogr project. The
> proposed implementation would require the user to call
> GDALIdentifyDriver with every file have been found in the directory.

It's only a for loop for heaven's sake!

> The other raising I've mentioned is mostly theoretical that is: Why
> should we force the user  on retaining internal data for 'our' search?
> Normally he would not want to deal with the list of the filenames in a
> directory. Instead he would want to pick up the supported
> files/formats one by one so as to populate a listview or a treeview on
> the user interface.

I only anticipate the identify features being used by perhaps a half
dozen applications in the future, so I don't think putting a little
work on the application developer is so terrible.  It isn't like this
is something that would be expected to be very widely used such that
it would be worth putting a great deal of extra work into convenience
functions.

>>  > Moreover, later on,
>> > you could easily reorganize the internal structure holded by the
>> > handle without affecting the interface itself if you find a more
>> > performant approach of which information should be retained during the
>> > search.
>>
>> I had contemplated requiring that the filename list be lexically ordered
>> so that a binary search could be done for particular files instead of a
>> linear scan.  Beyond this I find it hard to imagine that performance of
>> the list of filenames is likely to be much of an issue.
>>
> 
> Hmmm... That would be another requirement the user would not want to
> bother with. (Passing a lexically ordered list to GDALOpenInfo) The
> ordering should take place internally when starting the search and the
> ordered list should be retained during the search.

I would agree that the ordering would likely be taken care of within
GDALIdentifyDriver() to avoid making things too fragile.

>> > Exposing a stringlist in GDALIdentifyDriver to SWIG is less effective
>> > as exposing an internal handle. Many of the languages would require to
>> > reallocate the stringlist in the marshaling code every time when the
>> > GDALIdentifyDriver is called.
>>
>> I have contemplated also offering a GDALIdentifyDriverForDirectory()
>> function that where you would provide a directory name, and it would
>> return a list of all apparently supported files, and the driver that
>> applies.  If this was done, it would be the most efficient entry point
>> for swig bindings that want to avoid reallocating the filename list
>> for each call.
>>
> 
> Well, it's worth considering to include this one in the current
> proposal. I wonder if we could choose a sufficient type of the return
> value that is easily SWIGgable for every languages. At this point I
> would discourage to utilize the practice of using arrays of classes as
> return value types.

The issue of how to return the results was one of the reasons I
was hesitant to implement such a function.  I am also note keen on
building a whole set of functions so that we can have a "results"
object, and iterators or query functions to pull each result from that.
I strongly dislike that sort of extra machinery except where it is
pretty valuable.

>> > CPLReadDir() should also be exposed to the SWIG interface to easily
>> > construct the string list of the files in a directory. However I would
>> > like more if this method was internally handled and only the root
>> > directory had to be specified by the user (in the FindFirst... method
>> > for example).
>>
>> In the past I've avoided exposing too many of the VSI and related 
>> functions
>> through SWIG under the assumptions that the languages have all their own
>> POSIX io and filesystem operations.  However, as we move to use VSI as an
>> abstraction layer for "in memory files" and such, it may be valuable to
>> expose the VSI*L API and a few helper functions expected to work properly
>> against any VSI type files.
>>
> 
> The various languages might not be completely equal in this regard.
> However it might be possible to retrieve the list of the files in a
> directory, it not as easy as calling a function have already been
> prepared for this purpose. The more functionality we expose the less
> extra code should be added to the target language to implement the
> desired features.

Can you identify a language where it is hard to get a list of files
in a directory?  I know that in some languages it is a bit tiresome
because they force use of FindFirst()/FindNext() iterators but then
that just supports my other point, right?

I stand by my claim that the only reason to expose low level filesystem
functions from CPL is because applications might need access to the
VSI*L virtual io redirection capability of GDAL.  But whether that is a
good idea or not, I don't see it as closely related to the Identify()
operation, so I'm not keen on adding it to this RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


